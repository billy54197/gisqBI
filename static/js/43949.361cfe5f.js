"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[43949],{943949:function(v,c,s){s.r(c),s.d(c,{default:function(){return m}});var d=function(){var e=this,a=e._self._c;return a("vue-lazy-component",[a("el-form",{ref:"form",attrs:{size:"mini","label-width":"70px","label-position":"right",model:e.currentWidget.dataset}},[a("el-form-item",{attrs:{label:"\u6570\u636E\u7C7B\u578B"}},[a("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"},on:{change:e.changeDatasetType},model:{value:e.currentWidget.dataset.type,callback:function(n){e.$set(e.currentWidget.dataset,"type",n)},expression:"currentWidget.dataset.type"}},e._l(this.$$global_editor.dataSourcTypeList3,function(n){return a("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1),a("el-form-item",{attrs:{label:"y\u8F74"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9Y\u8F74\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:e.changeY},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.y,callback:function(n){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"y",n)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.y"}},e._l(this.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(n){return a("el-option",{key:n.name,attrs:{label:n.alias!=""?n.alias:n.name,value:n.name}})}),1),a("el-tooltip",{attrs:{content:"\u6DFB\u52A0x\u8F74","open-delay":1e3,effect:"dark",placement:"top"}},[a("el-button",{staticClass:"el-icon-plus",staticStyle:{color:"#13CE66","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text"},on:{click:function(n){return e.addX()}}})],1)],1),e._l(e.currentWidget.config.series,function(n,r){return a("el-form-item",{key:r,attrs:{label:"\u67F1\u5B50"+(r+1)}},[a("el-select",{staticStyle:{width:"160px"},attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u67F1\u5B50\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:function(i){return e.changeX(r)}},model:{value:n.encode.x,callback:function(i){e.$set(n.encode,"x",i)},expression:"ser.encode.x"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(i){return a("el-option",{key:i.name,attrs:{label:i.alias!=""?i.alias:i.name,value:i.name}})}),1),a("el-tooltip",{attrs:{content:"\u79FB\u9664\u67F1\u5B50","open-delay":1e3,effect:"dark",placement:"top"}},[a("el-button",{staticStyle:{color:"#f6061b","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.deleteX(r)}}})],1)],1)}),a("setting-dataset",{ref:"settingDataset",attrs:{currentWidget:e.currentWidget},on:{getDataSetData:e.getConfigData,clearDynamicEncode:e.clearDynamicEncode}})],2)],1)},l=[],o=s(589908),g=s(846577),u=s(723400),h=s(994480),p={name:"bar-stack-data",props:["currentWidget"],components:{SettingDataset:o.Z},mixins:[h.baseConfig,u.j],methods:{changeDatasetType(){this.$refs.settingDataset.loadPreview(),this.clearDynamicEncode(),this.initName(this.currentWidget.config.series),this.getConfigData()},clearDynamicEncode(){this.currentWidget.dataset[this.currentWidget.dataset.type].encode.y="";for(let t=0;t<this.currentWidget.dataset[this.currentWidget.dataset.type].encode.x.length;t++)this.currentWidget.dataset[this.currentWidget.dataset.type].encode.x[t]="";this.$$lib__.each(this.currentWidget.config.series,t=>{t.encode.x="",t.encode.y=""})},addX(){let t=JSON.parse(JSON.stringify(g.Z.charts.bar.bar_negative.config.series[0]));t.encode={x:"",y:""},this.currentWidget.dataset[this.currentWidget.dataset.type].encode.y&&(t.encode.y=this.currentWidget.dataset[this.currentWidget.dataset.type].encode.y),this.currentWidget.dataset[this.currentWidget.dataset.type].encode.x.push(""),this.currentWidget.config.series.push(JSON.parse(JSON.stringify(t))),this.getConfigData()},deleteX(t){this.currentWidget.config.series.splice(t,1),this.currentWidget.dataset[this.currentWidget.dataset.type].encode.x.splice(t,1),this.getConfigData()},changeY(){for(let t=0;t<this.currentWidget.config.series.length;t++)this.currentWidget.config.series[t].encode.y=this.currentWidget.dataset[this.currentWidget.dataset.type].encode.y;this.getConfigData()},getLegendData(t,e){let a=this.$$lib__.find(t,n=>n.name==e);return a?a.alias&&a.alias!=""?a.alias:a.name:""},changeX(t){let e=this.currentWidget.dataset[this.currentWidget.dataset.type].dimensionsAlias;this.currentWidget.dataset[this.currentWidget.dataset.type].encode.x.splice(t,1,this.currentWidget.config.series[t].encode.x),this.currentWidget.config.series[t].name=this.getLegendData(e,this.currentWidget.config.series[t].encode.x),this.getConfigData()},initName(t){let e=this.currentWidget.dataset[this.currentWidget.dataset.type].dimensionsAlias;this.$$lib__.each(t,a=>{let n=a.encode.x,r=this.$$lib__.find(e,i=>i.name==n);r?a.name=r.alias:a.name=""})}}},f=p,y=s(768141),W=(0,y.Z)(f,d,l,!1,null,"391d1b9c",null),m=W.exports}}]);
