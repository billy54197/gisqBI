"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[5721],{87798:function(g,h,o){o.d(h,{P:function(){return u}});var f=o(55616),c=o.n(f),l=o(49500);const u={created(){},methods:{getFormatterString(s){if(!s)return null;let t;if(s.script){if(l.log("Execute script for formatter component to replace dataset parameters"),s.scriptontent===""){f.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}t=new Function("params",s.scriptontent)}if(s.show&&!s.script){let e=[];for(s.str_start&&e.push(s.str_start),s.a&&(e.push("{a}"),e.push(s.str_a)),s.b&&(e.push("{b}"),e.push(s.str_b)),s.c&&(s.cx?e.push(s.cx):e.push("{c}"),e.push(s.str_c)),s.d&&(e.push("{d}"),e.push(s.str_d)),s.str_end&&e.push(s.str_end),t=e.join("");t.indexOf("\\n")>-1;)t=t.replace("\\n",`
`)}return t}}}},99349:function(g,h,o){o.d(h,{P:function(){return s}});var f=o(87798),c=o(21300),l=o(42160),u=o(49500);const s={created(){},beforeDestroy(){this.echarts&&this.echarts.clear(),this.animationLoop&&clearInterval(this.animationLoop)},mixins:[f.P],data(){return{animationLoop:null,dimensionsEx:null,source:[],source_auto_timer:null,source_auto_carousel:[]}},methods:{getColorInfo(t){if(!t)return null;let e=null;if(t.type==this.$$global_editor.colorType.pureColor.code)e=t.pureColor;else if(t.type==this.$$global_editor.colorType.gradation.code){let i={linear:{type:"linear",x:t.linear.x!=null&&t.linear.x!=null?t.linear.x:0,y:t.linear.y!=null&&t.linear.y!=null?t.linear.y:0,x2:t.linear.x2!=null&&t.linear.x2!=null?t.linear.x2:0,y2:t.linear.y2!=null&&t.linear.y2!=null?t.linear.y2:1,colorStops:[{offset:0,color:t.gradation.start!=null&&t.gradation.start!=""?t.gradation.start:"#FFFFFF"},{offset:1,color:t.gradation.end!=null&&t.gradation.end!=""?t.gradation.end:"#FFFFFF"}],global:!1},radial:{type:"radial",x:t.radial.x!=null&&t.radial.x!=null?t.radial.x:.5,y:t.radial.y!=null&&t.radial.y!=null?t.radial.y:.5,x2:t.radial.r!=null&&t.radial.r!=null?t.radial.r:.5,colorStops:[{offset:0,color:t.gradation.start!=null&&t.gradation.start!=""?t.gradation.start:"#FFFFFF"},{offset:1,color:t.gradation.end!=null&&t.gradation.end!=""?t.gradation.end:"#FFFFFF"}],global:!1}};t.direction&&(e=i[t.direction])}else e=t;return e},getLabelStyle(t){let e=JSON.parse(JSON.stringify(t));return e.padding=this.getSplitNumber(t.padding),e.formatter=this.getFormatterString(t.formatter),e},getTitle(t){let e=JSON.parse(JSON.stringify(t));if(t&&t.top&&(e.top=t.top+"%"),t&&t.bottom&&(e.bottom=t.bottom+"%"),t&&t.left&&(e.left=t.left+"%"),t&&t.right&&(e.right=t.right+"%"),e.text)for(;e.text.indexOf("\\n")>-1;)e.text=e.text.replace("\\n",`
`);return e},getLegend(t){let e=JSON.parse(JSON.stringify(t));if(t&&t.top&&(e.top=t.top+"%"),t&&t.bottom&&(e.bottom=t.bottom+"%"),t&&t.left&&(e.left=t.left+"%"),t&&t.right&&(e.right=t.right+"%"),t&&t.iconURL&&(e.icon=this.getSymbolURL(t.iconURL)),t.formatterType||t.formatterArr){if(t.formatterType==null||t.formatterType=="template")e.formatter=t.formatterArr[0]+"{name}"+t.formatterArr[1];else if(t.formatterType=="script"){let i=this;e.formatter=function(n){return(!t.formatterScript||t.formatterScript=="")&&u.warn("\u56FE\u4F8B\u6587\u672C\u5185\u5BB9\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u56FE\u4F8B\u6587\u672C\u5185\u5BB9\u811A\u672C"),new Function("name",t.formatterScript).apply(i,[n])}}}return e},getGrid(t){let e=JSON.parse(JSON.stringify(t));return t.backgroundColor||(e.backgroundColor="transparent"),t.borderColor||(e.borderColor="transparent"),t.shadowColor||(e.shadowColor="transparent"),t&&t.top&&(e.top=t.top+"%"),t&&t.bottom&&(e.bottom=t.bottom+"%"),t&&t.left&&(e.left=t.left+"%"),t&&t.right&&(e.right=t.right+"%"),e},getSourceList(t,e){let i=[];return this.$$lib__.each(t,(n,a)=>{let r={};r[n]=e[a],i.push(r)}),i},getVisualMap(t){if(t.type==="piecewise"&&!t.setSplit){let e=t.splitNumber?t.splitNumber:5,i=t.precision?t.precision:0,n=((t.max-t.min)/e).toFixed(i),a=[];for(let r=0;r<e;r++)r==0?a.push({min:Math.floor(Number(t.min*Math.pow(10,i)))/Math.pow(10,i),max:Math.ceil(Number((t.min+n*(r+1))*Math.pow(10,i)))/Math.pow(10,i)}):r==e-1?a.push({min:Math.floor(Number((t.min+n*r)*Math.pow(10,i)))/Math.pow(10,i),max:Math.ceil(Number(t.max*Math.pow(10,i)))/Math.pow(10,i)}):a.push({min:Math.floor(Number((t.min+n*r)*Math.pow(10,i)))/Math.pow(10,i),max:Math.ceil(Number((t.min+n*(r+1))*Math.pow(10,i)))/Math.pow(10,i)});t.pieces=a}return t},getVisualmapData(t,e){let i,n,a=t.dataset[t.dataset.type].dimensions,r=t.dataset[t.dataset.type].source,m=null;return this.$$lib__.each(a,(d,p)=>{d==e&&(m=p)}),m>=0&&(i=Number(r[0][m]),n=Number(r[0][m]),this.$$lib__.each(r,d=>{let p=Number(d[m]);i>p&&(i=p),n<p&&(n=p)})),[i,n]},getAxisPointer(t){let e=JSON.parse(JSON.stringify(t));if(t)switch(t.type){case"line":t&&t.lineStyle&&(e.lineStyle.color=this.getColorInfo(t.lineStyle.colorInfo)),l.default.delete(e,"shadowStyle");break;case"shadow":t&&t.shadowStyle&&(e.shadowStyle.color=this.getColorInfo(t.shadowStyle.colorInfo)),l.default.delete(e,"lineStyle");break}return e},getToolbox(t){let e=JSON.parse(JSON.stringify(t));return t.iconStyle.shadowColor||(e.iconStyle.shadowColor="transparent"),e},getTooltip(t){let e=JSON.parse(JSON.stringify(t));if(t.backgroundColor||(e.backgroundColor="rgba(50,50,50,0.7)"),t.borderColor||(e.borderColor="#333"),t&&t.formatter&&(e.formatter=this.getFormatterString(t.formatter)),t.hideDelay&&(e.hideDelay=t.hideDelay*1e3),t.axisPointer)switch(t.axisPointer.type){case"line":t&&t.axisPointer&&t.axisPointer.lineStyle&&(e.axisPointer.lineStyle.color=this.getColorInfo(t.axisPointer.lineStyle.colorInfo)),l.default.delete(e.axisPointer,"shadowStyle"),l.default.delete(e.axisPointer,"crossStyle");break;case"shadow":t&&t.axisPointer&&t.axisPointer.shadowStyle&&(e.axisPointer.shadowStyle.color=this.getColorInfo(t.axisPointer.shadowStyle.colorInfo)),l.default.delete(e.axisPointer,"lineStyle"),l.default.delete(e.axisPointer,"crossStyle");break;case"cross":t&&t.axisPointer&&t.axisPointer.crossStyle&&(e.axisPointer.crossStyle.color=this.getColorInfo(t.axisPointer.crossStyle.colorInfo)),l.default.set(e.axisPointer,"lineStyle",e.axisPointer.crossStyle),l.default.delete(e.axisPointer,"shadowStyle");break}return c.isMobile()&&(e.renderMode="richText",e.confine=!0),e},getxAxis(t){let e=JSON.parse(JSON.stringify(t));return t&&t.axisLabel&&t.axisLabel.formatterArr&&(e.axisLabel.formatter=t.axisLabel.formatterArr[0]+"{value}"+t.axisLabel.formatterArr[1]),e},getyAxis(t){let e=JSON.parse(JSON.stringify(t));return t&&t.axisLabel&&t.axisLabel.formatterArr&&(e.axisLabel.formatter=t.axisLabel.formatterArr[0]+"{value}"+t.axisLabel.formatterArr[1]),e},getRadar(t){let e=JSON.parse(JSON.stringify(t));if(t.axisLine&&t.axisLine.symbol&&t.axisLine.symbol.split(",").length>1&&(e.axisLine.symbol=t.axisLine.symbol.split(",")),e.name.padding=this.getSplitNumber(t.name.padding),e.axisLabel.padding=this.getSplitNumber(t.axisLabel.padding),e.axisLine.symbolSize=this.getSplitNumber(t.axisLine.symbolSize),e.axisLine.symbolOffset=this.getSplitNumber(t.axisLine.symbolOffset),t.name&&t.name.show==!0&&(t.name.formatterType||t.name.formatterArr)){if(t.name.formatterType==null||t.name.formatterType=="template")e.name.formatter=t.name.formatterArr[0]+"{value}"+t.name.formatterArr[1];else if(t.name.formatterType=="script"){let i=this;e.name.formatter=function(n,a){return(!t.name.formatterScript||t.name.formatterScript=="")&&u.warn("\u6307\u793A\u5668\u540D\u79F0\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u6307\u793A\u5668\u540D\u79F0\u5185\u5BB9\u811A\u672C"),new Function("value","indicator",t.name.formatterScript).apply(i,[n,a])}}}if(t.axisLabel&&(t.axisLabel.formatterType||t.axisLabel.formatterArr)){if(t.axisLabel.formatterType==null||t.axisLabel.formatterType=="template")e.axisLabel.formatter=t.axisLabel.formatterArr[0]+"{value}"+t.axisLabel.formatterArr[1];else if(t.axisLabel.formatterType=="script"){let i=this;e.axisLabel.formatter=function(n,a){return(!t.axisLabel.formatterScript||t.axisLabel.formatterScript=="")&&u.warn("\u523B\u5EA6\u6807\u7B7E\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u523B\u5EA6\u6807\u7B7E\u5185\u5BB9\u811A\u672C"),new Function("value","index",t.axisLabel.formatterScript).apply(i,[n,a])}}}return e},getOptionColor(t){if(t.useType=="system")return this.$$global_editor.predefineColors;{let e=[];return this.$$lib__.each(t.colorList,i=>{e.push(this.getColorInfo(i))}),e}},getSymbolURL(t){if(t&&t!="")return"image://"+c.appendImageBaseURL(t)},getAnimation(t,e){Array.isArray(t.series)?(this.$$lib__.each(t.series,i=>{i.animation=e.config.animation.animation,i.animationDuration=e.config.animation.animationDuration,i.animationEasing=e.config.animation.animationEasing,i.animationDurationUpdate=e.config.animation.animationDuration,i.animationEasingUpdate=e.config.animation.animationEasing,i.animationDelay=n=>n==null||n==null?e.config.animation.animationDelayMultiple:(n+1)*e.config.animation.animationDelayMultiple}),t.series.animationEasing="elasticOut"):(t.series.animation=e.config.animation.animation,t.series.animationDuration=e.config.animation.animationDuration,t.series.animationEasing=e.config.animation.animationEasing,t.series.animationDurationUpdate=e.config.animation.animationDuration,t.series.animationEasingUpdate=e.config.animation.animationEasing,t.series.animationDelay=i=>i==null||i==null?e.config.animation.animationDelayMultiple:(i+1)*e.config.animation.animationDelayMultiple),t.animation=e.config.animation.animation,t.animationDuration=e.config.animation.animationDuration,t.animationEasing=e.config.animation.animationEasing,t.animationDurationUpdate=e.config.animation.animationDuration,t.animationEasingUpdate=e.config.animation.animationEasing,t.animationDelayUpdate=i=>i==null||i==null?e.config.animation.animationDelayMultiple:(i+1)*e.config.animation.animationDelayMultiple},setAnimationLoop(t,e){this.animationLoop&&(clearInterval(this.animationLoop),this.animationLoop=null);let i=0;t.config.animation.animation&&t.config.animation&&t.config.animation.animationLoop?i=t.config.animation.animationDuration+t.config.animation.animationInterval:t.config.series&&t.config.series.animationLoop&&(i=t.config.series.animationDuration+t.config.series.animationInterval),i>0&&(this.animationLoop=setInterval(()=>{e()},i))},getProgressLength(t){let e=t.dataset[t.dataset.type],i=e.encode.length;if(i){let n;for(let a=0;a<e.dimensions.length;a++)e.dimensions[a]===i&&(n=a);if(n)for(let a=0;a<e.source.length;a++)t.config.partitionAttr.widthData[a]=e.source[a][n]}else t.config.partitionAttr.widthData=t.config.partitionAttr.width},getSplitNumber(t){let e=null;return t&&t.split(",").length>1?e=t.split(",").map(i=>+i):e=+t,e},getSplitString(t){let e=null;return t&&t.split(",").length>1?e=t.split(",").map(i=>i):e=t,e},getGraphic(t){let e={elements:[]},i=[];if(t.image){let n=JSON.parse(JSON.stringify(t.image));n.style.imageUrl&&(n.style.image=this.getImageUrl(t.image.style.imageUrl)),n.type="image",n.z=9999,i.push(n)}if(t.text){let n=JSON.parse(JSON.stringify(t.text)),a="";t.text.style.fontSize&&(a=a+t.text.style.fontSize+"px "),t.text.style.fontFamily&&(a=a+t.text.style.fontFamily+" "),n.type="text",n.z=9999,n.style.font=a,i.push(n)}if(t.group){let n=JSON.parse(JSON.stringify(t.group));n.type="group",n.z=9999,n.children=i,e.elements.push(n)}else e.elements=i;return e},getImageUrl(t){if(t&&t!=="")return c.appendImageBaseURL(t)},setAutoCarousel(t,e){let i=e.length;if(i>0){let n=t.config.autoCarousel.carouselSize!=null?t.config.autoCarousel.carouselSize:null;this.source_auto_carousel=JSON.parse(JSON.stringify(e));let a=[];n&&n<i?a=this.source_auto_carousel.slice(0,n):a=JSON.parse(JSON.stringify(this.source_auto_carousel)),this.renderEcharts(t,a);let r=3;t.config.autoCarousel.carouselTime&&(r=t.config.autoCarousel.carouselTime),this.source_auto_timer=setInterval(()=>{this.source_auto_carousel.push(JSON.parse(JSON.stringify(this.source_auto_carousel[0]))),this.source_auto_carousel.shift();let m=[];n&&n<i?m=this.source_auto_carousel.slice(0,n):m=JSON.parse(JSON.stringify(this.source_auto_carousel)),this.renderEcharts(t,m)},r*1e3)}else this.renderEcharts(t,e)},clearAutoCarousel(){this.source_auto_timer&&clearInterval(this.source_auto_timer)}}}},44513:function(g,h,o){o.d(h,{Z:function(){return i}});var f=function(){var a=this,r=a._self._c;return a.attr.buttonHide?r("div",{style:{position:"absolute",right:a.attr.buttonHideRight+"px",top:a.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(m){return a.onHide()}}},[a.openTooltip?r("el-tooltip",{attrs:{"open-delay":1e3,content:a.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[r("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):r("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a._e()},c=[],l=o(52246),u={props:["attr"],name:"hide-button",data(){return{isPc:l.b}},computed:{openTooltip:function(){let n=!1,a=this.attr.buttonHideTooltipContent;return l.b&&a&&a!=null&&a.trim()!=""&&(n=!0),n}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},s=u,t=o(68141),e=(0,t.Z)(s,f,c,!1,null,"bf399b9a",null),i=e.exports}}]);
