"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[83943],{56279:function(J,x,o){o.d(x,{P:function(){return c}});var g=o(386892),u=o(149500);const c={mixins:[g.D],created(){},methods:{lifecycleBeforeChartsLoad(b){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&u.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let w=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[b]);if(w)return w}return b},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&u.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(J,x,o){o.d(x,{X:function(){return g},b:function(){return u}});let g={versions:function(){var c=navigator.userAgent;return{trident:c.indexOf("Trident")>-1,presto:c.indexOf("Presto")>-1,webKit:c.indexOf("AppleWebKit")>-1,gecko:c.indexOf("Gecko")>-1&&c.indexOf("KHTML")==-1,mobile:!!c.match(/AppleWebKit.*Mobile.*/),ios:!!c.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:c.indexOf("Android")>-1,iPhone:c.indexOf("iPhone")>-1,iPad:c.indexOf("iPad")>-1,webApp:c.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},u;g.versions.mobile||g.versions.ios||g.versions.android||g.versions.iPhone||g.versions.iPad?u=!1:u=!0},483943:function(J,x,o){o.r(x),o.d(x,{default:function(){return X}});var g=function(){var e=this,i=e._self._c;return i("div",{style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}},[i("hide-button",{attrs:{attr:e.widgetInfo.attr}}),i("div",{ref:"scatterSimple",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}})],1)},u=[],c=o(844513),b=o(927966),z=o(267163),w=o(56279),H=o(445061),M=o(126711),I=o(99349),a=o(555616),v=o(275770),B=o(321300),V=o(231954),R=o(67157),L=o(150813);const D={mixins:[R.c],data(){return{config_extend:{},filter_config:{title:JSON.parse(JSON.stringify(L.Z.charts.title)),legend:JSON.parse(JSON.stringify(L.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(L.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(L.Z.charts.toolbox)),xAxis:JSON.parse(JSON.stringify(L.Z.charts.xAxis)),yAxis:JSON.parse(JSON.stringify(L.Z.charts.yAxis)),series:{itemStyle:{colorInfo:{type:"pureColor",pureColor:"#54D6AC",gradation:{top:"#7CFAD7",bottom:"#14BEB4"}},opacity:1}}}}},methods:{filterPredefineColoursSchemeConfig(t,e){this.getNewConfigWithArrary(t,e,this.filter_config)}}};var P=o(149500);const W=o(954255);var j={name:"ScatterSimple",components:{HideButton:c.Z},mixins:[z.baseConfig,w.P,H.u,M.H,I.P,D],props:["widgetInfo"],data(){return{dimensionsEx:null,dimensionsAliasEx:null}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},destroyed(){this.echarts.dispose()},mounted(){this.echarts=W.init(this.$refs.scatterSimple,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{loadInfo(t){let e=[],i=[],s=[],l=[];e=t.dataset[t.dataset.type].source,i=t.dataset[t.dataset.type].dimensions,s=t.dataset[t.dataset.type].dimensionsAlias,l=t.dataset[t.dataset.type].encode,this.dimensionsEx=i,this.dimensionsAliasEx=s;let N=this.getTooltip(t.config.tooltip),$=JSON.parse(JSON.stringify(t.config.toolbox)),r=JSON.parse(JSON.stringify(t.config.legend)),d=JSON.parse(JSON.stringify(t.config.title)),y=JSON.parse(JSON.stringify(t.config.grid)),f=JSON.parse(JSON.stringify(t.config.xAxis)),m=JSON.parse(JSON.stringify(t.config.yAxis)),n=JSON.parse(JSON.stringify(t.config.series));n.name||(n.name=this.getLegendData(s,l)),n.itemStyle.colorInfo.type&&(n.itemStyle.color=this.getItemStyleColor(n.itemStyle.colorInfo));let p={dataMax:0,dataMin:0,max:0,min:0},T=this.getFieldIndex(i,l);p=this.getPointSymbolSize(n,e,T);let C={},E=[],Z=[];for(let h=i.length-1;h>-1;--h)C[i[h]]=h;for(let h=0;h<e.length;++h){let S=e[h];E.push({name:S[C[l.x]]||"",value:S[C[l.y]]||"",source:e,symbolSize:Number((p.max-p.min)*(Number(S[C[l.y]])-p.dataMin)/(p.dataMax-p.dataMin))+Number(p.min)}),Z.push(S[C[l.x]]||"")}n.data=E,f.data=Z;let F={color:this.$$global_editor.predefineColors,tooltip:N,toolbox:$,title:{show:d.show,text:d.text,link:d.link,textAlign:d.textAlign,left:d.left+"%",right:d.right+"%",top:d.top+"%",bottom:d.bottom+"%",textStyle:{fontSize:d.textStyle.fontSize,fontFamily:d.textStyle.fontFamily,fontWeight:d.textStyle.fontWeight,color:d.textStyle.color}},legend:{show:r.show,type:r.type,itemWidth:r.itemWidth,itemHeight:r.itemHeight,icon:r.icon,orient:r.orient,align:r.align,itemGap:r.itemGap,left:r.left+"%",right:r.right+"%",top:r.top+"%",bottom:r.bottom+"%",textStyle:{color:r.textStyle.color,fontWeight:r.textStyle.fontWeight}},textStyle:{fontSize:r.textStyle.fontSize,fontFamily:r.textStyle.fontFamily,color:r.textStyle.color},grid:{left:y.left+"%",right:y.right+"%",top:y.top+"%",bottom:y.bottom+"%",dx:y.dx+"%",dy:y.dy+"%"},xAxis:[{type:"category",show:f.show,name:f.name,data:f.data,axisLine:{show:f.axisLine.show,lineStyle:{color:f.axisLine.lineStyle.color}},axisTick:{show:f.axisTick.show},axisLabel:{interval:f.axisLabel.interval,show:f.axisLabel.show,rotate:f.axisLabel.rotate,margin:f.axisLabel.margin,fontSize:f.axisLabel.fontSize,fontFamily:f.axisLabel.fontFamily,color:f.axisLabel.color},splitLine:{show:f.splitLine.show}}],yAxis:[{scale:!1,min:m.min,max:m.max,type:"value",show:m.show,name:m.name,axisLine:{show:m.axisLine.show,lineStyle:{color:m.axisLine.lineStyle.color}},axisTick:{show:m.axisTick.show},axisLabel:{show:m.axisLabel.show,rotate:m.axisLabel.rotate,margin:m.axisLabel.margin,fontSize:m.axisLabel.fontSize,fontFamily:m.axisLabel.fontFamily,color:m.axisLabel.color},splitLine:{show:m.splitLine.show}}],dataset:{source:e,sourceHeader:!1},series:[{symbolSize:function(h){return h[T]==0?0:Number((p.max-p.min)*(h[T]-p.dataMin)/(p.dataMax-p.dataMin))+Number(p.min)},name:n.name,type:"scatter",dimensions:i,symbol:n.symbol,encode:l,data:E,barWidth:n.barWidth+"%",label:{show:n.label.show,rotate:n.label.rotate,color:n.label.color,fontSize:n.label.fontSize,fontFamily:n.label.fontFamily,fontWeight:n.label.fontWeight,position:n.label.position},itemStyle:{color:n.itemStyle.color,opacity:n.itemStyle.opacity,barBorderRadius:[n.itemStyle.barBorderRadius,n.itemStyle.barBorderRadius,0,0]},smooth:n.smooth}]};if(n.emphasis)try{let h=n.emphasis;if(h.script&&h.script.enabled){if(h.script.content){let S=new Function("index","item","data",h.script.content),O=F.series[0].data;if(O&&O.length>0)for(let A=0;A<O.length;++A)try{O[A].emphasis=S.call(this,A,O[A],O)}catch(k){P.error("\u5904\u7406\u81EA\u5B9A\u4E49\u9AD8\u4EAE\u6837\u5F0F\u51FA\u9519\uFF1A",k)}}}else n.emphasis.itemStyle&&n.emphasis.itemStyle.color&&(F.series[0].emphasis={itemStyle:{...n.emphasis.itemStyle}})}catch(h){P.error("\u5904\u7406\u81EA\u5B9A\u4E49\u9AD8\u4EAE\u6837\u5F0F\u51FA\u9519\uFF1A",h)}this.getAnimation(F,t),this.setOption(F),this.setAnimationLoop(t,()=>{this.setOption(F,t)})},setOption(t){this.echarts.getOption()&&this.echarts.clear(),this.echarts.setOption(this.lifecycleBeforeChartsLoad(t),{notMerge:!0})},reLoadInfo(t){t&&(this.$refs.scatterSimple.style.width=t.attr.w+"px",this.$refs.scatterSimple.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},getLegendData(t,e){let i=this.$$lib__.find(t,s=>s.name==e.y);return i?i.alias&&i.alias!=""?i.alias:i.name:""},getFieldIndex(t,e){let i=0;for(let s=0;s<t.length;s++)if(t[s]==e.y){i=s;break}return i},getPointSymbolSize(t,e,i){let s=[],l=0,N=0;t.isShowMax&&t.isShowMin?(t.max=60,t.min=20):!t.isShowMax&&t.isShowMin?(t.min=20,Number(t.max)<=Number(t.min)&&(t.max=Number(t.min)+1)):t.isShowMax&&!t.isShowMin&&(t.max=60,Number(t.max)<=Number(t.min)&&(t.min=Number(t.max)-1));let $=t.max,r=t.min;for(let d=0;d<e.length;d++)e[d][i]>0&&s.push(e[d][i]);return s.sort(function(d,y){return d-y}),s.length>0&&(l=s[s.length-1],N=s[0]),{dataMax:l,dataMin:N,max:$,min:r}},initAction(t){this.actionSendout(t),this.actionReceive(t)},actionSendout(t){let e=this;this.$$lib__.each(t.action.sendOut.actionList,i=>{if(i.enabled){let s=i.code+"_"+t.id;if(i.paramsExtend&&i.paramsExtend.length>0){let l={};this.getParamsExtend(l,i.paramsExtend,t)}i.code==v.default.click.code&&e.onClick(s,i)}})},onClick(t,e){let i=this;i.echarts.on("click",s=>{let l={},N=i.getValue(s.seriesName,s.data);if(l.x=s.name,l.y=N,e.script&&e.script.enabled){if(P.log("Execute script for "+i.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){a.Message.warning({message:e.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),l=this.customScript(l)}b.Z.$emit(t,l),e.postMessage&&i.doPostMessage(l),i.actionNameList.push(t)})},getItemStyleColor(t){let e=null;return t.pureColor&&t.type==this.$$global_editor.colorType.pureColor.code?e=t.pureColor:t.type==this.$$global_editor.colorType.gradation.code&&(e=new W.graphic.LinearGradient(0,0,0,1,[{offset:0,color:t.gradation.top!=null&&t.gradation.top!=""?t.gradation.top:"#FFFFFF"},{offset:1,color:t.gradation.bottom!=null&&t.gradation.bottom!=""?t.gradation.bottom:"#FFFFFF"}])),e}}},K=j,G=o(768141),U=(0,G.Z)(K,g,u,!1,null,"312c2414",null),X=U.exports},844513:function(J,x,o){o.d(x,{Z:function(){return M}});var g=function(){var a=this,v=a._self._c;return a.attr.buttonHide?v("div",{style:{position:"absolute",right:a.attr.buttonHideRight+"px",top:a.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(B){return a.onHide()}}},[a.openTooltip?v("el-tooltip",{attrs:{"open-delay":1e3,content:a.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[v("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):v("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a._e()},u=[],c=o(752246),b={props:["attr"],name:"hide-button",data(){return{isPc:c.b}},computed:{openTooltip:function(){let I=!1,a=this.attr.buttonHideTooltipContent;return c.b&&a&&a!=null&&a.trim()!=""&&(I=!0),I}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},z=b,w=o(768141),H=(0,w.Z)(z,g,u,!1,null,"bf399b9a",null),M=H.exports}}]);
