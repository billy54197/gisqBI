"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[97084],{598521:function(T,v,i){var g=i(275770),m=i(927966),r=i(555616),E=i.n(r),F=i(149500);v.Z={autoShow(O,L,A){let l=O;if(l.innerAutoShowInterval&&l.innerAutoShowInterval>-1&&(clearInterval(l.innerAutoShowInterval),l.innerAutoShowInterval=-1,L.dispatchAction({type:"downplay",dataIndex:l.innerAutoShowIndex}),l.innerAutoShowIndex=0),!(O&&L&&A&&A.enabled&&A.interval>0))return;let o=A.showTip;typeof l.innerAutoShowIndex>"u"&&(l.innerAutoShowIndex=0),l.innerAutoShowInterval=setInterval(function(){let c=L.getOption(),C=0,f=0;c.series[C].data?f=c.series[C].data.length:c.dataset&&c.dataset.length>0&&(f=c.dataset[0].source.length),f!=0&&(L.dispatchAction({type:"downplay",dataIndex:l.innerAutoShowIndex}),l.innerAutoShowIndex=(l.innerAutoShowIndex+1)%f,L.dispatchAction({type:"highlight",dataIndex:l.innerAutoShowIndex}),o&&L.dispatchAction({type:"showTip",seriesIndex:C,dataIndex:l.innerAutoShowIndex}),I(l,l.innerAutoShowIndex,C,c))},A.interval*1e3);function I(c,C,f,H){let p=c.widgetInfo;c.$$lib__.each(p.action.sendOut.actionList,x=>{if(x.enabled&&x.code==g.default.autoHighLight.code){let J=p.dataset[p.dataset.type].dimensions,D=x.code+"_"+p.id,N={},P=[];if(p.dataset[p.dataset.type].source&&p.dataset[p.dataset.type].source.length>0&&(P=p.dataset[p.dataset.type].source[C]),N.x=c.getFieldVal(P,J,H.series[f].encode.x),N.y=c.getFieldVal(P,J,H.series[f].encode.y),c.getExtendParams(N,x.paramsExtend,P,J),x.script&&x.script.enabled){if(F.log("Execute script for "+p.name+" component to "+x.name+" component"),x.script.content==""){r.Message.warning({message:x.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}try{N=new Function("param,autoShowIndex,seriesIndex, opts",x.script.content).apply(c,[N,C,f,H])}catch(M){F.error(M)}}m.Z.$emit(D,N),x.postMessage&&c.doPostMessage(N)}})}}}},56279:function(T,v,i){i.d(v,{P:function(){return r}});var g=i(386892),m=i(149500);const r={mixins:[g.D],created(){},methods:{lifecycleBeforeChartsLoad(E){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&m.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),m.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let O=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[E]);if(O)return O}return E},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&m.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),m.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(T,v,i){i.d(v,{X:function(){return g},b:function(){return m}});let g={versions:function(){var r=navigator.userAgent;return{trident:r.indexOf("Trident")>-1,presto:r.indexOf("Presto")>-1,webKit:r.indexOf("AppleWebKit")>-1,gecko:r.indexOf("Gecko")>-1&&r.indexOf("KHTML")==-1,mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:r.indexOf("Android")>-1,iPhone:r.indexOf("iPhone")>-1,iPad:r.indexOf("iPad")>-1,webApp:r.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},m;g.versions.mobile||g.versions.ios||g.versions.android||g.versions.iPhone||g.versions.iPad?m=!1:m=!0},997084:function(T,v,i){i.r(v),i.d(v,{default:function(){return M}});var g=function(){var e=this,n=e._self._c;return n("div",{style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}},[n("hide-button",{attrs:{attr:e.widgetInfo.attr}}),n("div",{ref:"lineStack",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}})],1)},m=[],r=i(844513),E=i(927966),F=i(597910),O=i(56279),L=i(445061),A=i(126711),l=i(99349),o=i(598521),I=i(275770),c=i(555616),C=i(67157),f=i(150813);const H={mixins:[C.c],data(){return{config_extend:{config:{series:[{itemStyle:{color:"#222227"}},{itemStyle:{color:"#29CC97"}}]}},filter_config:{title:JSON.parse(JSON.stringify(f.Z.charts.title)),legend:JSON.parse(JSON.stringify(f.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(f.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(f.Z.charts.toolbox)),xAxis:JSON.parse(JSON.stringify(f.Z.charts.xAxis)),yAxis:JSON.parse(JSON.stringify(f.Z.charts.yAxis)),series:[{itemStyle:{opacity:1,color:"rgba(76, 132, 255, 1)"}}]}}},methods:{filterPredefineColoursSchemeConfig(t,e){this.getNewConfigWithArrary(t,e,this.filter_config)}}};var p=i(149500);const x=i(954255);var J={name:"LineStack",components:{HideButton:r.Z},mixins:[F.baseConfig,O.P,L.u,A.H,l.P,H],props:["widgetInfo"],data(){return{dimensionsEx:null,dimensionsAliasEx:null}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.echarts=x.init(this.$refs.lineStack,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},destroyed(){this.echarts.dispose()},methods:{loadInfo(t){let e=[],n=[],S=[],w=[];t.dataset[t.dataset.type]&&(e=t.dataset[t.dataset.type].source,n=t.dataset[t.dataset.type].dimensions,S=t.dataset[t.dataset.type].dimensionsAlias,w=t.dataset[t.dataset.type].encode),this.dimensionsEx=n,this.dimensionsAliasEx=S;let a=JSON.parse(JSON.stringify(t.config.series)),W=JSON.parse(JSON.stringify(t.config.toolbox)),k=this.getTooltip(t.config.tooltip),u=JSON.parse(JSON.stringify(t.config.legend)),b=JSON.parse(JSON.stringify(t.config.title)),$=JSON.parse(JSON.stringify(t.config.grid)),d=JSON.parse(JSON.stringify(t.config.xAxis)),h=JSON.parse(JSON.stringify(t.config.yAxis));for(let s=0;s<a.length;s++){a[s].dimensions=n,a[s].type="line",a[s].lineWidth&&(a[s].lineWidth=a[s].lineWidth+"%"),a[s].name||(a[s].name=this.getLegendData(S,a[s].encode.y),t.config.series[s].name=a[s].name);let _={},G=[],R=[];for(let y=a[s].dimensions.length-1;y>-1;--y)_[n[y]]=y;for(let y=0;y<e.length;++y){let z=e[y];G.push(z[_[w.y[s]]]||""),R.push(z[_[w.x]]||"")}if(a[s].data=G,d.data=R,a[s].emphasis)try{if(a[s].emphasis.script&&a[s].emphasis.script.enabled){if(a[s].emphasis.script.content)try{let y=this,z=new Function("index","item","data",a[s].emphasis.script.content);a[s].data.forEach((B,K)=>{let U=z.call(y,K,B,G);a[s].data[K]={value:B,emphasis:U}})}catch(y){p.error("\u81EA\u5B9A\u4E49\u9AD8\u4EAE\u6837\u5F0F\u811A\u672C\u62A5\u9519\uFF1A",y)}}else a[s].emphasis.itemStyle&&a[s].emphasis.itemStyle.color&&(a[s].emphasis={itemStyle:{...a[s].emphasis.itemStyle}})}catch(y){p.error("\u5904\u7406\u9AD8\u4EAE\u6837\u5F0F\u62A5\u9519\uFF1A",y)}}let Z={color:this.$$global_editor.predefineColors,tooltip:k,toolbox:W,title:{show:b.show,text:b.text,link:b.link,textAlign:b.textAlign,left:b.left+"%",right:b.right+"%",top:b.top+"%",bottom:b.bottom+"%",textStyle:{fontSize:b.textStyle.fontSize,fontFamily:b.textStyle.fontFamily,color:b.textStyle.color}},legend:{show:u.show,type:u.type,itemWidth:u.itemWidth,itemHeight:u.itemHeight,icon:u.icon,orient:u.orient,align:u.align,itemGap:u.itemGap,left:u.left+"%",right:u.right+"%",top:u.top+"%",bottom:u.bottom+"%",textStyle:{fontSize:u.textStyle.fontSize,fontFamily:u.textStyle.fontFamily,color:u.textStyle.color}},grid:{left:$.left+"%",right:$.right+"%",top:$.top+"%",bottom:$.bottom+"%"},xAxis:[{type:"category",show:d.show,name:d.name,data:d.data,nameLocation:d.nameLocation,boundaryGap:d.boundaryGap,nameGap:d.nameGap,axisLine:{show:d.axisLine.show,lineStyle:{color:d.axisLine.lineStyle.color}},axisTick:{show:d.axisTick.show},axisLabel:{interval:d.axisLabel.interval,show:d.axisLabel.show,rotate:d.axisLabel.rotate,margin:d.axisLabel.margin,fontSize:d.axisLabel.fontSize,fontFamily:d.axisLabel.fontFamily,color:d.axisLabel.color},splitLine:d.splitLine}],yAxis:[{type:"value",show:h.show,name:h.name,nameLocation:h.nameLocation,nameGap:h.nameGap,max:h.max,min:h.min,axisLine:{show:h.axisLine.show,lineStyle:{color:h.axisLine.lineStyle.color}},axisTick:{show:h.axisTick.show},axisLabel:{show:h.axisLabel.show,rotate:h.axisLabel.rotate,margin:h.axisLabel.margin,fontSize:h.axisLabel.fontSize,fontFamily:h.axisLabel.fontFamily,color:h.axisLabel.color},splitLine:h.splitLine}],dataset:{source:e,sourceHeader:!1},series:a};this.getAnimation(Z,t),this.setOption(Z,t),this.setAnimationLoop(t,()=>{this.setOption(Z,t)})},setOption(t,e){this.echarts.getOption()&&this.echarts.clear(),setTimeout(()=>{this.echarts.setOption(this.lifecycleBeforeChartsLoad(t),{notMerge:!0}),o.Z.autoShow(this,this.echarts,e.config.autoShow)},0)},reLoadInfo(t){this.mergeConfig(t),t&&(this.$refs.lineStack.style.width=t.attr.w+"px",this.$refs.lineStack.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},getLegendData(t,e){let n=this.$$lib__.find(t,S=>S.name==e);return n?n.alias&&n.alias!=""?n.alias:n.name:""},getEmphasisStyle(t){let e=null;return t.pureColor&&(e=t.pureColor),e},getItemStyleColor(t){let e=null;return t.pureColor&&t.type==this.$$global_editor.colorType.pureColor.code?e=t.pureColor:t.type==this.$$global_editor.colorType.gradation.code&&(e=new x.graphic.LinearGradient(0,0,0,1,[{offset:0,color:t.gradation.top!=null&&t.gradation.top!=""?t.gradation.top:"#FFFFFF"},{offset:1,color:t.gradation.bottom!=null&&t.gradation.bottom!=""?t.gradation.bottom:"#FFFFFF"}])),e},getItemStyleBarBorderRadius(t){let e=[];return e.push(t.lt),e.push(t.rt),e.push(t.rb),e.push(t.lb),e},initAction(t){this.actionSendout(t),this.actionReceive(t)},actionSendout(t){let e=this;this.$$lib__.each(t.action.sendOut.actionList,n=>{if(n.enabled){let S=n.code+"_"+t.id;if(n.paramsExtend&&n.paramsExtend.length>0){let w={};this.getParamsExtend(w,n.paramsExtend,t)}n.code==I.default.click.code&&e.onClick(S,n)}})},onClick(t,e){let n=this;n.echarts.on("click",S=>{let w={},a=n.getValue(S.seriesName,S.data);if(w.x=S.name||S.value,w.y=a,e.script&&e.script.enabled){if(p.log("Execute script for "+n.widgetInfo.name+" component to "+I.default[e.code].name+" component"),e.script.content==""){c.Message.warning({message:I.default[e.code].name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),w=this.customScript(w)}E.Z.$emit(t,w),e.postMessage&&n.doPostMessage(w),n.actionNameList.push(t)})}}},D=J,N=i(768141),P=(0,N.Z)(D,g,m,!1,null,"b1e51ee8",null),M=P.exports},844513:function(T,v,i){i.d(v,{Z:function(){return A}});var g=function(){var o=this,I=o._self._c;return o.attr.buttonHide?I("div",{style:{position:"absolute",right:o.attr.buttonHideRight+"px",top:o.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(c){return o.onHide()}}},[o.openTooltip?I("el-tooltip",{attrs:{"open-delay":1e3,content:o.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[I("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):I("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):o._e()},m=[],r=i(752246),E={props:["attr"],name:"hide-button",data(){return{isPc:r.b}},computed:{openTooltip:function(){let l=!1,o=this.attr.buttonHideTooltipContent;return r.b&&o&&o!=null&&o.trim()!=""&&(l=!0),l}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},F=E,O=i(768141),L=(0,O.Z)(F,g,m,!1,null,"bf399b9a",null),A=L.exports}}]);
