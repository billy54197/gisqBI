"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[39810],{752246:function(b,d,e){e.d(d,{X:function(){return s},b:function(){return r}});let s={versions:function(){var a=navigator.userAgent;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1,iPhone:a.indexOf("iPhone")>-1,iPad:a.indexOf("iPad")>-1,webApp:a.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},r;s.versions.mobile||s.versions.ios||s.versions.android||s.versions.iPhone||s.versions.iPad?r=!1:r=!0},844513:function(b,d,e){e.d(d,{Z:function(){return v}});var s=function(){var t=this,l=t._self._c;return t.attr.buttonHide?l("div",{style:{position:"absolute",right:t.attr.buttonHideRight+"px",top:t.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(C){return t.onHide()}}},[t.openTooltip?l("el-tooltip",{attrs:{"open-delay":1e3,content:t.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[l("el-button",{class:t.attr.buttonHideIconClass&&t.attr.buttonHideIconClass!=""?t.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.attr.buttonHideColor,fontSize:t.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):l("el-button",{class:t.attr.buttonHideIconClass&&t.attr.buttonHideIconClass!=""?t.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.attr.buttonHideColor,fontSize:t.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):t._e()},r=[],a=e(752246),g={props:["attr"],name:"hide-button",data(){return{isPc:a.b}},computed:{openTooltip:function(){let c=!1,t=this.attr.buttonHideTooltipContent;return a.b&&t&&t!=null&&t.trim()!=""&&(c=!0),c}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},u=g,p=e(768141),m=(0,p.Z)(u,s,r,!1,null,"bf399b9a",null),v=m.exports},639810:function(b,d,e){e.r(d),e.d(d,{default:function(){return L}});var s=function(){var n=this,o=n._self._c;return o("div",{directives:[{name:"show",rawName:"v-show",value:n.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],ref:"content",staticClass:"my-gisBase",style:{width:n.widgetInfo.attr.w+"px",height:n.widgetInfo.attr.hh+"px"}},[o("hide-button",{attrs:{attr:n.widgetInfo.attr}}),o("LayerManager",{ref:"toc",attrs:{mobile:"","hide-pile-num":n.hidePileNum,"layers-info":n.toc,position:n.position,"drag-enable":n.widgetInfo.config.styleConfig.dragEnable,"style-config":n.styleConfig,"theme-style":n.themeConfig},on:{tocLoaded:n.tocLoaded,treeNodeCheckChange:n.treeNodeCheckChange}})],1)},r=[],a=e(619364),g=e.n(a),u=e(844513),p=e(927966),m=e(213249),v=e(445061),c=e(126711),t=e(386892),l=e(148836),C=e(476010),x=e(242709),y=e(149500),I={name:"GisMobileToc",components:{LayerManager:g(),HideButton:u.Z},mixins:[m.baseConfig,t.D,v.u,c.H,C.Z,x.Z],props:["widgetInfo"],computed:{...(0,l.Se)(["getCanvasSetting","bodyFraction"])},data(){return{timer:"",map:null,tocConfig:null,hidePileNum:this.widgetInfo.config.widgetConfig.hidePileNum,toc:this.widgetInfo.mapLayer.toc}},mounted(){this.isEditor||this.$nextTick(()=>{let i=this.$refs.toc.$el;this.bindToPage(i)}),this.initAction(this.widgetInfo)},methods:{loadInfo(i){},reLoadInfo(i){this.loadInfo(i),this.btnAttr=i.attr,this.imgIconConfig=i.config.imgIconConfig,this.isShowBtn=i.config.widgetConfig.isShowBtn,this.hidePileNum=i.config.widgetConfig.hidePileNum,this.widgetConfig=i.config.widgetConfig,this.toc=i.mapLayer.toc,setTimeout(()=>{this.$refs.toc.initTreeToc(this.toc,!1)},200)},initAction(i){this.registerAction(i,"configMap","mapList",this.doConfigMap),this.actionReceive(i)},doConfigMap(i,n,o){let f=n[o];this.map=f,y.info("==============="),this.$refs.toc.initLayerManager(this.map)},tocLoaded(){let i=this,n=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(n,o=>{if(o.enabled&&o.code==i.$$global_editor.actionType.tocInit.code){let f=o.code+"_"+i.widgetInfo.id,h={toc:i};o.paramsExtend&&o.paramsExtend.length>0&&this.getExtendParams(h,o.paramsExtend,[],[]),o.script&&o.script.enabled&&o.script.content&&(this.doConfigMap=new Function("data",o.script.content),this.doConfigMap(h)),p.Z.$emit(f,h),o.postMessage&&this.doPostMessage(h),this.actionNameList.push(f)}})},treeNodeCheckChange(){}}},w=I,H=e(768141),P=(0,H.Z)(w,s,r,!1,null,"a770507c",null),L=P.exports}}]);
