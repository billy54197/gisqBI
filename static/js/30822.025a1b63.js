"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[30822],{730588:function(b,a){Object.defineProperty(a,"__esModule",{value:!![]}),a.STAR=a.MOUNTAIN=a.LOVE=a.LOCATION=a.ISLAND=a.INSTITUTION=a.HOSPITAL=a.HARBOUR=a.AIRPORT=void 0;var o={value:"mountain",label:"\u5C71\u8109"};a.MOUNTAIN=o;var r={value:"island",label:"\u5C9B\u5C7F"};a.ISLAND=r;var s={value:"star",label:"\u4E94\u89D2\u661F"};a.STAR=s;var c={value:"location",label:"\u5B9A\u4F4D"};a.LOCATION=c;var d={value:"love",label:"\u7231\u5FC3"};a.LOVE=d;var p={value:"institution",label:"\u673A\u6784"};a.INSTITUTION=p;var u={value:"hospital",label:"\u533B\u9662"};a.HOSPITAL=u;var v={value:"harbour",label:"\u6E2F\u6E7E"};a.HARBOUR=v;var n={value:"airport",label:"\u673A\u573A"};a.AIRPORT=n},327640:function(b,a){var o;o={value:!![]},a.k4=a.Md=void 0;var r="circle";a.Md=r;var s="image";a.k4=s},430822:function(b,a,o){o.r(a),o.d(a,{default:function(){return w}});var r=function(){var e=this,t=e._self._c;return t("span",{directives:[{name:"show",rawName:"v-show",value:e.enabled.toolbar_draw,expression:"enabled.toolbar_draw"}],staticClass:"leftM",style:{backgroundColor:e.theme.topBarBtn,borderRadius:"4px",fontSize:"20px",display:"inline-block",margin:"0 5px 0 10px",lineHeight:"25px"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:(e.enabled.map_draw==!0?"\u5173\u95ED":"\u5F00\u542F")+"\u5730\u56FE\u7ED8\u5236\u6A21\u5F0F","open-delay":1e3,placement:"top"}},[t("span",{staticClass:"iconfont bi_map",style:{borderRight:"1px solid #000",padding:"5px 9px",fontSize:"18px",color:e.enabled.map_draw==!0?e.theme.switch_active_color:e.theme.active_color},on:{click:e.onMapDraw}})]),t("el-tooltip",{staticClass:"item",attrs:{"open-delay":1e3,effect:"light",content:"\u5F00\u59CB\u7ED8\u5236\u5730\u56FE",placement:"top","hide-after":1500}},[t("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"click"}},[t("toolbar-top-create-plot"),t("span",{staticClass:"iconfont bi_design",style:{padding:"5px 9px",fontSize:"18px",color:e.enabled.map_draw==!0?e.theme.active_color:e.theme.lockBtn},attrs:{slot:"reference"},on:{click:e.onDraw},slot:"reference"})],1)],1)],1)},s=[],c=o(148836),d=o(316188),p=o(555616),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbar-plot"},[t("section",[t("h5",{staticClass:"geoTitle"},[e._v("\u6807\u6CE8")]),e._l(e.textSelect,function(l){return t("div",{key:l.label,class:"imgBox "+l.value,attrs:{title:l.label},on:{click:function(h){return e.domLineClick(h)}}})})],2),t("section",[t("h5",{staticClass:"geoTitle"},[e._v("\u70B9")]),e._l(e.pointSelect,function(l){return t("div",{key:l.label,class:"imgBox "+l.value,attrs:{title:l.label},on:{click:function(h){return e.pointActive(l)}}})})],2),t("section",{on:{click:function(l){return e.domLineClick(l)}}},[t("h5",{staticClass:"geoTitle"},[e._v("\u7EBF")]),e._l(e.lineSelect,function(l){return t("div",{key:l.label,class:"imgBox "+l.value,attrs:{title:l.label}})})],2),t("section",{on:{click:function(l){return e.domLineClick(l)}}},[t("h5",{staticClass:"geoTitle"},[e._v("\u7BAD\u5934")]),e._l(e.arrowSelect,function(l){return t("div",{key:l.label,class:"imgBox "+l.value,attrs:{title:l.label}})})],2),t("section",{on:{click:function(l){return e.domLineClick(l)}}},[t("h5",{staticClass:"geoTitle"},[e._v("\u9762")]),e._l(e.polygonSelect,function(l){return t("div",{key:l.label,class:"imgBox "+l.value,attrs:{title:l.label}})})],2)])},v=[],n=o(927966),f=o(399565),_=o(327640),g=o(730588),y={name:"ToolbarTopCreatePlot",components:{},props:["currentWidget"],data(){return{radio:"0",isActive:"test",domHadClickArr:[],textSelect:[{value:"TextArea",label:"\u6807\u6CE8"}],pointSelect:[{type:_.Md,value:"circle",label:"\u5706\u70B9"}],arrowSelect:[{value:"DoubleArrow",label:"\u53CC\u7BAD\u5934"},{value:"SquadCombat",label:"\u5206\u961F\u6218\u6597\u884C\u52A8"},{value:"FineArrow",label:"\u7C97\u5355\u5C16\u5934\u7BAD\u5934"},{value:"DottedArrow",label:"\u865A\u7EBF\u7BAD\u5934"}],lineSelect:[{value:"Polyline",label:"\u76F4\u7EBF"},{value:"Curve",label:"\u66F2\u7EBF"},{value:"MultipleCurve",label:"\u590D\u5408\u66F2\u7EBF"},{value:"RailLoadLine",label:"\u94C1\u8DEF\u7EBF"},{value:"RailLoadCurve",label:"\u94C1\u8DEF\u66F2\u7EBF"},{value:"Arc",label:"\u5F13\u5F62"}],polygonSelect:[{value:"Circle",label:"\u5706"},{value:"RectAngle",label:"\u77E9\u5F62"},{value:"Ellipse",label:"\u692D\u5706"},{value:"Polygon",label:"\u591A\u8FB9\u5F62"},{value:"FreePolygon",label:"\u81EA\u7531\u9762"},{value:"Lune",label:"\u5F13\u5F62"},{value:"Sector",label:"\u6247\u5F62"}]}},mounted(){this.$el.parentElement.style.padding="4px 0px";for(let i in g)g[i].type=_.k4,this.pointSelect.push(g[i])},methods:{domLineClick(i){let e=i.target.className.split("imgBox")[1].trim();this.activate(e)},pointActive(i){let e=JSON.parse(JSON.stringify(f.DEF_STYEL));e.point.src="/images/plot/"+i.value+"-white.png",e.point.iconSrc="/images/plot/"+i.value+".png",e.point.type=i.type,n.Z.$emit("gis-plot-activate","Point",e)},activate(i,e){n.Z.$emit("gis-plot-activate",i,e)},save(){n.Z.$emit("gis-plot-save")}}},A=y,m=o(768141),S=(0,m.Z)(A,u,v,!1,null,"348b22ab",null),T=S.exports,N={name:"ToolbarTopPlot",components:{ToolbarTopCreatePlot:T},data(){return{enabled:{toolbar_draw:!1,map_draw:!1},sendAction:!1,plot:{type:null,style:null}}},computed:{...(0,c.Se)(["getWidgetAllArr","getWidgetTemplateList"]),widget_length:function(){return this.getWidgetAllArr.length}},watch:{widget_length(){let i=this;this.enabled.toolbar_draw=!1,this.enabled.map_draw=!1,this.$$lib__.each(this.getWidgetAllArr,e=>{(e.typeName=="gis-map"||e.typeName=="gis-3dmap")&&(i.enabled.toolbar_draw=!0,e.attr.pointerEvents&&(i.enabled.map_draw=!0))})}},mounted(){n.Z.$on("changePlot",(i,e)=>{this.onDraw();let t=this;t.sendAction=!0,t.plot.type=JSON.parse(JSON.stringify(i)),t.plot.style=JSON.parse(JSON.stringify(e)),n.Z.$emit("changePlotStyle",t.plot.type,t.plot.style),n.Z.$on("gisPlotStyleFinish",()=>{t.sendAction&&(n.Z.$emit("changePlotStyle",t.plot.type,t.plot.style),t.sendAction=!1)})})},methods:{...(0,c.nv)(["updateCurrentWidget","setCurrentWidget","setActiveScreen","setSelectMultiple","clearMultipleWidget","addMultipleWidget","addWidget"]),onMapDraw(){this.enabled.map_draw=!this.enabled.map_draw,this.$$lib__.each(this.getWidgetAllArr,i=>{(i.typeName=="gis-map"||i.typeName=="gis-3dmap")&&(i.attr.pointerEvents=this.enabled.map_draw,this.updateCurrentWidget(JSON.parse(JSON.stringify(i))))})},onDraw(){let i=this.$$lib__.find(this.getWidgetAllArr,e=>e.typeName=="gis-plot");if(i)this.setActiveScreen(!1),this.setSelectMultiple(!1),this.clearMultipleWidget(),this.addMultipleWidget(i.id),this.setCurrentWidget(i.id);else{let e=this.$$lib__.find(this.getWidgetTemplateList,l=>l.widgetName=="gis-plot");if(e==null){p.Message.error({message:"\u7EC4\u4EF6\u5E93\u4E2D\u6CA1\u6709\u6B64\u7EC4\u4EF6",offset:60});return}let t=JSON.parse(JSON.stringify(d.default));t.name=e.widgetTitle,t.typeId=e.widgetTemplateId,t.typeName=e.widgetName,t.widgetType=e.widgetType,t.widgetGroup=e.widgetGroup,t.typeTitle=e.widgetTitle,this.addWidget(t)}}}},C=N,O=(0,m.Z)(C,r,s,!1,null,"56be1410",null),w=O.exports}}]);
