"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[213],{56279:function(I,d,n){n.d(d,{P:function(){return l}});var m=n(86892),a=n(49500);const l={mixins:[m.D],created(){},methods:{lifecycleBeforeChartsLoad(c){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&a.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),a.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let g=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[c]);if(g)return g}return c},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&a.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),a.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},44513:function(I,d,n){n.d(d,{Z:function(){return w}});var m=function(){var o=this,h=o._self._c;return o.attr.buttonHide?h("div",{style:{position:"absolute",right:o.attr.buttonHideRight+"px",top:o.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(b){return o.onHide()}}},[o.openTooltip?h("el-tooltip",{attrs:{"open-delay":1e3,content:o.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[h("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):h("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):o._e()},a=[],l=n(52246),c={props:["attr"],name:"hide-button",data(){return{isPc:l.b}},computed:{openTooltip:function(){let u=!1,o=this.attr.buttonHideTooltipContent;return l.b&&o&&o!=null&&o.trim()!=""&&(u=!0),u}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},p=c,g=n(68141),y=(0,g.Z)(p,m,a,!1,null,"bf399b9a",null),w=y.exports},10213:function(I,d,n){n.r(d),n.d(d,{default:function(){return z}});var m=function(){var t=this,i=t._self._c;return i("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[i("hide-button",{attrs:{attr:t.widgetInfo.attr}}),t.widgetInfo.config.title.show?i("div",{style:{height:t.widgetInfo.config.title.height+"px",lineHeight:t.widgetInfo.config.title.height+"px",marginLeft:t.widgetInfo.config.title.marginLeft+"px",fontSize:t.widgetInfo.config.title.titleStyle.fontSize+"px",fontFamily:t.widgetInfo.config.title.titleStyle.fontFamily,fontStyle:t.widgetInfo.config.title.titleStyle.fontStyle,fontWeight:t.widgetInfo.config.title.titleStyle.fontWeight,textDecoration:t.widgetInfo.config.title.titleStyle.textDecoration,color:t.widgetInfo.config.title.titleStyle.color}},[t._v(" "+t._s(t.widgetInfo.config.title.label)+" ")]):t._e(),i("div",{style:{display:t.widgetInfo.config.layOut==="auto"?"flex":"block",flexDirection:"row",height:t.widgetInfo.config.contentHeight+"px",alignContent:"flex-start",flexWrap:"wrap",overflow:t.widgetInfo.config.scroll?"auto":"hidden"}},t._l(t.itemList,function(s){return i("div",{key:s,style:{flex:"none",position:"relative",height:t.widgetInfo.config.item.height+"px",lineHeight:t.widgetInfo.config.item.height+"px",maxWidth:t.widgetInfo.config.item.maxWidth+"px",marginTop:t.widgetInfo.config.item.marginTop+"px",marginLeft:t.widgetInfo.config.item.marginLeft+"px",background:t.widgetInfo.config.item.background,borderRadius:t.widgetInfo.config.item.borderRadius+"px",border:`solid ${t.widgetInfo.config.item.borderWidth}px ${t.widgetInfo.config.item.borderColor}`}},[i("span",{style:{display:"inline-block",width:"100%",verticalAlign:"middle",paddingLeft:t.widgetInfo.config.item.paddingLeft+"px",paddingRight:t.widgetInfo.config.item.paddingRight+"px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:t.widgetInfo.config.item.itemFontStyle.color,fontSize:t.widgetInfo.config.item.itemFontStyle.fontSize+"px",fontFamily:t.widgetInfo.config.item.itemFontStyle.fontFamily,fontStyle:t.widgetInfo.config.item.itemFontStyle.fontStyle,fontWeight:t.widgetInfo.config.item.itemFontStyle.fontWeight,textDecoration:t.widgetInfo.config.item.itemFontStyle.textDecoration},on:{click:function(f){return t.clickHistoryItem(s)}}},[t._v(" "+t._s(s)+" ")]),i("i",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.config.clearable,expression:"widgetInfo.config.clearable"}],staticClass:"el-icon-close",style:{position:"absolute",color:t.widgetInfo.config.color,background:t.widgetInfo.config.background,fontSize:t.widgetInfo.config.fontSize+"px",top:0,right:0,borderRadius:"50%",transform:`translate(50%,-50%) translate(${t.widgetInfo.config.bottom}px, ${t.widgetInfo.config.right}px)`},on:{click:function(f){return t.deleteHistoryItem(s)}}})])}),0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.config.bottomFeature.show,expression:"widgetInfo.config.bottomFeature.show"}],style:{height:t.widgetInfo.config.bottomFeature.height+"px",lineHeight:t.widgetInfo.config.bottomFeature.height+"px",textAlign:"center",marginTop:t.widgetInfo.config.bottomFeature.top+"px"}},[i("i",{staticClass:"el-icon-delete",style:{fontSize:t.widgetInfo.config.bottomFeature.fontSize+"px",color:t.widgetInfo.config.bottomFeature.color},on:{click:t.deleteAllHistory}}),i("span",{style:{marginLeft:t.widgetInfo.config.bottomFeature.marginLeft+"px",fontSize:t.widgetInfo.config.bottomFeature.titleStyle.fontSize+"px",fontFamily:t.widgetInfo.config.bottomFeature.titleStyle.fontFamily,fontStyle:t.widgetInfo.config.bottomFeature.titleStyle.fontStyle,fontWeight:t.widgetInfo.config.bottomFeature.titleStyle.fontWeight,textDecoration:t.widgetInfo.config.bottomFeature.titleStyle.textDecoration,color:t.widgetInfo.config.bottomFeature.titleStyle.color},on:{click:t.deleteAllHistory}},[t._v(t._s(t.widgetInfo.config.bottomFeature.label))])])],1)},a=[],l=n(27966),c=n(95549),p=n(67157);const g={mixins:[p.c],data(){return{config_extend:{config:{}},filter_config:{color:"rgba(153,144,144,1)",background:"rgba(252,252,252,1)",title:{titleStyle:{color:"#303133",fontFamily:"alibabaPuHuiTiMedium"}},bottomFeature:{titleStyle:{color:"#C0C4CC",fontFamily:"alibabaPuHuiTiRegular"},color:"#C0C4CC"},item:{itemFontStyle:{color:"#616266",fontFamily:""},background:"#ffffff",borderColor:"#DBDFE6"}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var y=n(23400),w=n(45061),u=n(86892),o=n(26711),h=n(56279),b=n(44513),S=n(48836),v=n(55616),x=n(49500),L={name:"form-history",props:["widgetInfo"],components:{HideButton:b.Z},mixins:[c.u,g,w.u,y.j,u.D,o.H,h.P],data(){return{itemList:[]}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},computed:{...(0,S.Se)(["isView"])},methods:{loadInfo(e){this.lifecycleAfterLoad()},reLoadInfo(e){this.loadInfo(e)},initAction(e){this.actionReceive(e),this.historyReceive(e)},historyReceive(e){if(e.action===void 0||e.action.receive===void 0)return;let t=e.action.receive.setHistory;if(t&&t.enabled){let i=t.setHistoryList;this.doReceive(i,e)}},doReceive(e,t){e&&e.length>0&&e.forEach(i=>{if(i&&i.length<1)return;let s=i[0][1]+"_"+i[0][0];i[0][1].indexOf("_")>-1&&(s=i[0][1]);let f=i[0][2];if(f){let r=f.indexOf("|");r>-1&&(f=i[0][2].substring(r+1))}l.Z.$on(s,r=>{if(t.action.receive.setHistory.script&&t.action.receive.setHistory.script.enabled){if(x.log("Execute script for "+this.widgetInfo.name+" component to "+i.name+" component"),t.action.receive.setHistory.script.content==""){v.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.setHistoryItem=new Function("data","param_key",t.action.receive.setHistory.script.content)}this.setHistoryItem(r,f)})})},setHistoryItem(e,t){let i=e[t];this.itemList.length===Number(this.widgetInfo.config.max)&&this.itemList.pop();let s=JSON.parse(JSON.stringify(this.itemList));s.unshift(i),this.itemList=Array.from(new Set(s)),localStorage.setItem(this.widgetInfo.id,JSON.stringify(this.itemList))},deleteHistoryItem(e){this.itemList=this.itemList.filter(t=>e!==t),localStorage.setItem(this.widgetInfo.id,JSON.stringify(this.itemList))},deleteAllHistory(){this.itemList=[],localStorage.setItem(this.widgetInfo.id,JSON.stringify([]))},clickHistoryItem(e){let t=this;this.widgetInfo.action.sendOut.actionList.forEach(s=>{if(s.enabled&&s.code==="click"){let f="click_"+t.widgetInfo.id,r={data:e};if(s.paramsExtend&&s.paramsExtend.length>0&&this.getExtendParams(r,s.paramsExtend),s.script&&s.script.enabled){if(x.log("Execute script for "+this.widgetInfo.name+" component to "+s.name+" component"),s.script.content==""){v.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",s.script.content),r=this.customScript(r)}l.Z.$emit(f,r),s.postMessage&&this.doPostMessage(r),this.actionNameList.push(f)}})}},mounted(){this.initAction(this.widgetInfo);let e=localStorage.getItem(this.widgetInfo.id);this.isView||(this.itemList=["\u7D2B\u82D1","\u5F3A\u88AD","\u4EE3\u8FBE\u7F57\u65AF\u4E4B\u6B87","\u8774\u8776","\u65AF\u5609\u8482\u4E4B\u773C","\u6DF1\u6E0A\u4E4B\u5203"]),e&&this.isView&&(this.itemList=JSON.parse(e)),this.loadInfo(this.widgetInfo)}},H=L,F=n(68141),C=(0,F.Z)(H,m,a,!1,null,"67ecc32c",null),z=C.exports}}]);
