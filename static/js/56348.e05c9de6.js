"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[56348],{99695:function(){},105143:function(k,m,o){o.d(m,{b:function(){return f}});var y=o(148836),h=o(42160),v=o(149500);const f={created(){},computed:{...(0,y.Se)(["getWidgetAllArr"])},data(){return{containerViewSubWidgetList:[]}},methods:{...(0,y.nv)(["updateWidgetParentArrDataset","updateWidgetAllArrDataset"]),reLoadInfo(s){this.widgetInfo.id!=s.id&&this.$refs["comp_"+s.id]&&setTimeout(this.$refs["comp_"+s.id][0].reLoadInfo(s),500),this.loadInfo(s)},orgWidget(s){let d=[];return this.$$lib__.each(s,c=>{let r=this.$$lib__.find(this.getWidgetAllArr,u=>u.parentId==this.widgetInfo.id&&u.id==c.id);r&&(r.dataset&&r.dataset[r.dataset.type]&&(r.dataset.type==this.$$global_editor.dataSourcType.dynamic.code||r.dataset.type==this.$$global_editor.dataSourcType.local.code)&&r.dataset[r.dataset.type].autoUpdate==!0&&(h.default.set(this.dynamicWidgets,r.id,r),r.attr.hide!=!0&&r.dataset[r.dataset.type].autoUpdate==!0&&h.default.set(this.autoUpdateWidget,r.id,r)),d.push(r))}),h.default.set(this,"containerViewSubWidgetList",d),d},setTitleText(s,d){d?this.$$lib__.each(d,c=>{this.$$lib__.each(this.orgWidget(c.widgets),r=>{r.attr.widgetW||(r.attr.widgetW=r.attr.w),this.$refs["title_"+r.id]&&this.$refs["title_"+r.id][0]&&(this.$refs["title_"+r.id][0].innerHTML=this.initTextPosition(r)),r.title.position||(r.title.position="top")})}):this.$$lib__.each(this.orgWidget(s),c=>{this.$refs["title_"+c.id]&&this.$refs["title_"+c.id][0]&&(this.$refs["title_"+c.id][0].innerHTML=this.initTextPosition(c)),c.title.position||(c.title.position="top")})},initTextPosition(s){return s.title.text===void 0||!s.title.text?"":s.title.text&&(s.title.position==="left"||s.title.position==="right")?s.title.text.split("").join("<br />"):s.title.text},updataWidgetSource(s,d,c){try{switch(s.dataset.type){case this.$$global_editor.dataSourcType.dynamic.code:s.dataset.dynamic.source=d.data,d.total&&(s.dataset.dynamic.total=d.total);break;case this.$$global_editor.dataSourcType.local.code:s.dataset.local.dimensionsAlias=[],s.dataset.local.columnList=[],s.dataset.local.source=[],s.dataset.local.dimensions=[],s.dataset.local.dimensionsAlias=d.dimensionsAlias,s.dataset.local.columnList=d.columnList,s.dataset.local.source=d.source,s.dataset.local.dimensions=d.dimensions;break}}catch(u){v&&v.log&&v.log(u)}let r=this.$refs["comp_"+s.id];r&&r.length>0&&(this.updateWidgetAllArrDataset(s),this.updateWidgetParentArrDataset(s),r[0].reLoadInfo(s),this.sendoutDataloadSuccess(s),this.sendoutResponseData(s,d,c))},fit(s,d){if(!this.isView||!/^mobile/.test(this.getCanvasSetting.transformType))return s+"px";let c=this.getCanvasSetting.width/10,r=this.getCanvasSetting.height/window.innerHeight,u="";switch(this.getCanvasSetting.transformType){case"mobileAutoWidth":d?u=s+"px":u=s/c+"rem";break;case"mobileAutoBoth":u=s/c+"rem";break;default:d?u=s/r+"px":u=s/c+"rem"}return u}}}},943351:function(k,m,o){var y=o(604017),h=o(579023),v=o.n(h),f=o(439733),s=o(153673),d=o(954387),c=o(220511),r=o(340321),u=o(313013),x=(0,f.d)("button"),S=x[0],w=x[1];function Z(T,g,R,P){var B,V=g.tag,W=g.icon,E=g.type,C=g.color,D=g.plain,$=g.disabled,A=g.loading,b=g.hairline,M=g.loadingText,_=g.iconPosition,O={};C&&(O.color=D?C:"white",D||(O.background=C),C.indexOf("gradient")!==-1?O.border=0:O.borderColor=C);function K(I){!A&&!$&&((0,s.j8)(P,"click",I),(0,c.fz)(P))}function G(I){(0,s.j8)(P,"touchstart",I)}var z=[w([E,g.size,{plain:D,loading:A,disabled:$,hairline:b,block:g.block,round:g.round,square:g.square}]),(B={},B[d._K]=b,B)];function N(){if(A)return R.loading?R.loading():T(u.Z,{class:w("loading"),attrs:{size:g.loadingSize,type:g.loadingType,color:"currentColor"}});if(W)return T(r.Z,{attrs:{name:W,classPrefix:g.iconPrefix},class:w("icon")})}function j(){var I=[];_==="left"&&I.push(N());var L;return A?L=M:L=R.default?R.default():g.text,L&&I.push(T("span",{class:w("text")},[L])),_==="right"&&I.push(N()),I}return T(V,v()([{style:O,class:z,attrs:{type:g.nativeType,disabled:$},on:{click:K,touchstart:G}},(0,s.ED)(P)]),[T("div",{class:w("content")},[j()])])}Z.props=(0,y.Z)({},c.g2,{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"},iconPosition:{type:String,default:"left"}}),m.Z=S(Z)},954387:function(k,m,o){o.d(m,{_K:function(){return d},a8:function(){return f},k7:function(){return v},pj:function(){return r},r5:function(){return c}});var y="#ee0a24",h="van-hairline",v=h+"--top",f=h+"--left",s=h+"--bottom",d=h+"--surround",c=h+"--top-bottom",r=h+"-unset--top-bottom"},880269:function(k,m,o){o.d(m,{u:function(){return v},w:function(){return y}});function y(f,s,d){return Math.min(Math.max(f,s),d)}function h(f,s,d){var c=f.indexOf(s),r="";return c===-1?f:s==="-"&&c!==0?f.slice(0,c):(s==="."&&f.match(/^(\.|-\.)/)&&(r=c?"-0":"0"),r+f.slice(0,c+1)+f.slice(c).replace(d,""))}function v(f,s,d){s===void 0&&(s=!0),d===void 0&&(d=!0),s?f=h(f,".",/\./g):f=f.split(".")[0],d?f=h(f,"-",/-/g):f=f.replace(/-/,"");var c=s?/[^-0-9.]/g:/[^-0-9]/g;return f.replace(c,"")}},220511:function(k,m,o){o.d(m,{BC:function(){return h},fz:function(){return v},g2:function(){return f}});function y(s){return s.name==="NavigationDuplicated"||s.message&&s.message.indexOf("redundant navigation")!==-1}function h(s,d){var c=d.to,r=d.url,u=d.replace;if(c&&s){var x=s[u?"replace":"push"](c);x&&x.catch&&x.catch(function(S){if(S&&!y(S))throw S})}else r&&(u?location.replace(r):location.href=r)}function v(s){h(s.parent&&s.parent.$router,s.props)}var f={url:String,replace:Boolean,to:[String,Object]}},117230:function(k,m,o){o.r(m),o.d(m,{default:function(){return ot}});var y=function(){var t=this,e=t._self._c;return e("div",{ref:"drawer",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[e("hide-button",{attrs:{attr:t.widgetInfo.attr}}),e("pull-refresh",{ref:"pullRefresh",staticClass:"refresh",staticStyle:{height:"100%",overflow:"auto !important"},attrs:{disabled:!t.widgetInfo.config.list.pullDownRefresh},on:{refresh:t.onRefresh},nativeOn:{touchstart:function(l){return t.touchStart.apply(null,arguments)},touchmove:function(l){return t.touchMove.apply(null,arguments)},touchend:function(l){return t.touchEnd.apply(null,arguments)}},model:{value:t.refreshing,callback:function(l){t.refreshing=l},expression:"refreshing"}},[t.widgetInfo.config.list.autoLoad?t._e():e("div",{style:{height:"100%",overflow:"auto"}},t._l(t.totalListInfo,function(l,a){return e("div",{key:a,ref:"list",refInFor:!0,style:{position:"relative",overflow:"hidden",width:t.widgetInfo.config.list.listItem.width+"px",height:t.widgetInfo.config.list.listItem.height+"px",background:t.widgetInfo.config.list.listItem.backgroundColor,borderRadius:t.widgetInfo.config.list.listItem.borderRadius+"px",margin:`${t.widgetInfo.config.list.listItem.marginTop+"px"} 0 0 ${t.widgetInfo.config.list.listItem.marginLeft+"px"} `}},[e("swipe-cell",{staticClass:"swipe-cell-action",style:{width:"auto",height:"100%"},attrs:{disabled:!t.widgetInfo.config.list.swipeCellAction},scopedSlots:t._u([t.widgetInfo.config.list.firstActionShow?{key:"left",fn:function(){return[e("Button",{staticClass:"cell-action-left",attrs:{type:"primary"},on:{click:function(n){return t.handleClick("first",l)}}},[t._v(t._s(t.widgetInfo.config.list.firstActionText))])]},proxy:!0}:null,{key:"right",fn:function(){return[t.widgetInfo.config.list.secondActionShow?e("Button",{staticClass:"cell-action-right-left",attrs:{type:"danger"},on:{click:function(n){return t.handleClick("second",l)}}},[t._v(t._s(t.widgetInfo.config.list.secondActionText))]):t._e(),t.widgetInfo.config.list.thirdActionShow?e("Button",{staticClass:"cell-action-right-right",attrs:{type:"primary"},on:{click:function(n){return t.handleClick("third",l)}}},[t._v(t._s(t.widgetInfo.config.list.thirdActionText))]):t._e()]},proxy:!0}],null,!0)},[t._l(t.orgWidget1(t.widgetInfo.config.container.widgets,a),function(n){return[e("div",{key:"widget_"+n.id,style:(n.attr.deg&&n.attr.deg!=0?"transform: rotate("+n.attr.deg+"deg);":"")+"position: absolute;width: "+n.attr.widgetW+"px;height: "+n.attr.h+"px;left:"+n.attr.x+"px;top:"+n.attr.y+"px"},[e("div",{directives:[{name:"show",rawName:"v-show",value:n.attr.showAnimate||n.attr.hideAnimate?t.first?n.attr.hide!==!0:!0:n.attr.hide!==!0,expression:"(widget.attr.showAnimate || widget.attr.hideAnimate) ? first ? widget.attr.hide !== true : true: widget.attr.hide !== true"}],ref:"widget_"+n.id,refInFor:!0,staticClass:"my-comp",style:t.getBindStyle(n)},[e("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(n),on:{click:function(p){return t.openLink(n)}}},[e("div",{style:{marginLeft:n.title.label.left+"px",marginTop:n.title.label.top+"px"}},[e("span",{style:t.getTitleSpanStyle(n)},[t._v(t._s(n.title.text)+" ")])])]),e("draggable-component-container",{ref:"comp_"+n.id,refInFor:!0,style:t.getInfoStyle(n),attrs:{widgetData:n},on:{attrChange:function(p){return t.attrChange(p,a)},doReSetBoardId:t.doReSetBoardId,doGetPreviewData:t.getPreviewData}})],1)])]})],2)],1)}),0),t.widgetInfo.config.list.autoLoad?e("list",{staticClass:"list-container",staticStyle:{height:"auto !important"},attrs:{offset:t.widgetInfo.config.list.offsetHeight===0?1:t.widgetInfo.config.list.offsetHeight,"immediate-check":!1,finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},on:{load:t.onLoad},model:{value:t.listLoading,callback:function(l){t.listLoading=l},expression:"listLoading"}},[e("div",{ref:"listContent",style:{display:t.widgetInfo.config.list.layOut==="single"?"block":"flex",flexFlow:"wrap"}},[!t.widgetInfo.config.list.selectType||t.widgetInfo.config.list.selectType==="none"?t._l(t.totalListInfo,function(l,a){return e("div",{key:a,ref:"list",refInFor:!0,style:{flex:"none",position:"relative",overflow:"hidden",width:t.widgetInfo.config.list.listItem.width+"px",height:t.widgetInfo.config.list.listItem.height+"px",background:t.widgetInfo.config.list.listItem.backgroundColor,borderRadius:t.widgetInfo.config.list.listItem.borderRadius+"px",margin:`${t.widgetInfo.config.list.listItem.marginTop+"px"} 0 0 ${t.widgetInfo.config.list.listItem.marginLeft+"px"} `}},[e("swipe-cell",{staticClass:"swipe-cell-action",style:{width:"auto",height:"100%"},attrs:{disabled:!t.widgetInfo.config.list.swipeCellAction},scopedSlots:t._u([t.widgetInfo.config.list.firstActionShow?{key:"left",fn:function(){return[e("Button",{staticClass:"cell-action-left",attrs:{type:"primary"},on:{click:function(n){return t.handleClick("first",l)}}},[t._v(t._s(t.widgetInfo.config.list.firstActionText))])]},proxy:!0}:null,{key:"right",fn:function(){return[t.widgetInfo.config.list.secondActionShow?e("Button",{staticClass:"cell-action-right-left",attrs:{type:"danger"},on:{click:function(n){return t.handleClick("second",l)}}},[t._v(t._s(t.widgetInfo.config.list.secondActionText))]):t._e(),t.widgetInfo.config.list.thirdActionShow?e("Button",{staticClass:"cell-action-right-right",attrs:{type:"primary"},on:{click:function(n){return t.handleClick("third",l)}}},[t._v(t._s(t.widgetInfo.config.list.thirdActionText))]):t._e()]},proxy:!0}],null,!0)},[t._l(t.orgWidget1(t.widgetInfo.config.container.widgets,a),function(n){return[e("div",{key:"widget_"+n.id,staticClass:"test",style:(n.attr.deg&&n.attr.deg!=0?"transform: rotate("+n.attr.deg+"deg);":"")+"position: absolute;width: "+n.attr.widgetW+"px;height: "+n.attr.h+"px;left:"+n.attr.x+"px;top:"+n.attr.y+"px"},[e("div",{directives:[{name:"show",rawName:"v-show",value:n.attr.showAnimate||n.attr.hideAnimate?t.first?n.attr.hide!==!0:!0:n.attr.hide!==!0,expression:"(widget.attr.showAnimate || widget.attr.hideAnimate) ? first ? widget.attr.hide !== true : true: widget.attr.hide !== true"}],ref:"widget_"+n.id,refInFor:!0,staticClass:"my-comp",style:t.getBindStyle(n)},[e("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(n),on:{click:function(p){return t.openLink(n)}}},[e("div",{style:{marginLeft:n.title.label.left+"px",marginTop:n.title.label.top+"px"}},[e("span",{style:t.getTitleSpanStyle(n)},[t._v(t._s(n.title.text)+" ")])])]),e("draggable-component-container",{ref:"comp_"+n.id,refInFor:!0,style:t.getInfoStyle(n),attrs:{widgetData:n},on:{attrChange:function(p){return t.attrChange(p,a)},doReSetBoardId:t.doReSetBoardId,doGetPreviewData:t.getPreviewData}})],1)])]})],2)],1)}):e(t.widgetInfo.config.list.selectType==="single"?"RadioGroup":"CheckboxGroup",{tag:"component",attrs:{value:t.widgetInfo.config.list.selectType==="single"?t.radioValue:t.checkBoxList},on:{input:t.selectInput,change:t.valueChange}},t._l(t.totalListInfo,function(l,a){return e("div",{key:a,ref:"list",refInFor:!0,style:{flex:"none",position:"relative",overflow:"hidden",width:t.widgetInfo.config.list.listItem.width+"px",height:t.widgetInfo.config.list.listItem.height+"px",background:t.widgetInfo.config.list.listItem.backgroundColor,borderRadius:t.widgetInfo.config.list.listItem.borderRadius+"px",margin:`${t.widgetInfo.config.list.listItem.marginTop+"px"} 0 0 ${t.widgetInfo.config.list.listItem.marginLeft+"px"} `}},[e("swipe-cell",{staticClass:"swipe-cell-action",style:{width:"auto",height:"100%"},attrs:{disabled:!t.widgetInfo.config.list.swipeCellAction},scopedSlots:t._u([t.widgetInfo.config.list.firstActionShow?{key:"left",fn:function(){return[e("Button",{staticClass:"cell-action-left",attrs:{type:"primary"},on:{click:function(n){return t.handleClick("first",l)}}},[t._v(t._s(t.widgetInfo.config.list.firstActionText))])]},proxy:!0}:null,{key:"right",fn:function(){return[t.widgetInfo.config.list.secondActionShow?e("Button",{staticClass:"cell-action-right-left",attrs:{type:"danger"},on:{click:function(n){return t.handleClick("second",l)}}},[t._v(t._s(t.widgetInfo.config.list.secondActionText))]):t._e(),t.widgetInfo.config.list.thirdActionShow?e("Button",{staticClass:"cell-action-right-right",attrs:{type:"primary"},on:{click:function(n){return t.handleClick("third",l)}}},[t._v(t._s(t.widgetInfo.config.list.thirdActionText))]):t._e()]},proxy:!0}],null,!0)},[e(t.widgetInfo.config.list.selectType==="single"?"radio":"checkbox",{tag:"component",style:{position:"absolute",left:t.widgetInfo.config.list.select.left+"px",top:t.widgetInfo.config.list.select.top+"px"},attrs:{name:l[t.valueIndex],shape:t.widgetInfo.config.list.select.shape,"icon-size":t.widgetInfo.config.list.select.fontSize+"px","checked-color":t.widgetInfo.config.list.select.checkedColor,disabled:t.disabledIndex===""?!1:l[t.disabledIndex]==1},scopedSlots:t._u([t.widgetInfo.config.list.select.showIcon?{key:"icon",fn:function(n){return[t.widgetInfo.config.list.select.iconType==="icon"?e("i",{class:`${n.checked?t.widgetInfo.config.list.select.activeIcon:t.widgetInfo.config.list.select.icon} select-icon`,style:{fontSize:t.widgetInfo.config.list.select.fontSize+"px",color:n.checked?t.widgetInfo.config.list.select.checkedColor:t.widgetInfo.config.list.select.color}}):e("van-image",{style:{width:t.widgetInfo.config.list.select.fontSize+"px",height:t.widgetInfo.config.list.select.fontSize+"px"},attrs:{fit:t.widgetInfo.config.list.select.fit,src:n.checked?t.getImageFullUrl(t.widgetInfo.config.list.select.activeUrl):t.getImageFullUrl(t.widgetInfo.config.list.select.url)}})]}}:null],null,!0)}),t._l(t.orgWidget1(t.widgetInfo.config.container.widgets,a),function(n){return[e("div",{key:"widget_"+n.id,staticClass:"test",style:(n.attr.deg&&n.attr.deg!=0?"transform: rotate("+n.attr.deg+"deg);":"")+"position: absolute;width: "+n.attr.widgetW+"px;height: "+n.attr.h+"px;left:"+n.attr.x+"px;top:"+n.attr.y+"px"},[e("div",{directives:[{name:"show",rawName:"v-show",value:n.attr.showAnimate||n.attr.hideAnimate?t.first?n.attr.hide!==!0:!0:n.attr.hide!==!0,expression:"(widget.attr.showAnimate || widget.attr.hideAnimate) ? first ? widget.attr.hide !== true : true: widget.attr.hide !== true"}],ref:"widget_"+n.id,refInFor:!0,staticClass:"my-comp",style:t.getBindStyle(n)},[e("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(n),on:{click:function(p){return t.openLink(n)}}},[e("div",{style:{marginLeft:n.title.label.left+"px",marginTop:n.title.label.top+"px"}},[e("span",{style:t.getTitleSpanStyle(n)},[t._v(t._s(n.title.text)+" ")])])]),e("draggable-component-container",{ref:"comp_"+n.id,refInFor:!0,style:t.getInfoStyle(n),attrs:{widgetData:n},on:{attrChange:function(p){return t.attrChange(p,a)},doReSetBoardId:t.doReSetBoardId,doGetPreviewData:t.getPreviewData}})],1)])]})],2)],1)}),0)],2)]):t._e()],1)],1)},h=[],v=o(95795),f=o(963565),s=o(620946),d=o(602004),c=o(391221),r=o(591692),u=o(495144),x=o(391567),S=o(37735),w=o(83762),Z=o(586569),T=o(691905),g=o(751595),R=o(891508),P=o(99695),B=o(943351),V=o(439733),W=o(880269),E=o(750068),C=o(734672),D=function(t){return{props:{closeOnClickOutside:{type:Boolean,default:!0}},data:function(){var l=this,a=function(p){l.closeOnClickOutside&&!l.$el.contains(p.target)&&l[t.method]()};return{clickOutsideHandler:a}},mounted:function(){(0,E.on)(document,t.event,this.clickOutsideHandler)},beforeDestroy:function(){(0,E.S1)(document,t.event,this.clickOutsideHandler)}}},$=(0,V.d)("swipe-cell"),A=$[0],b=$[1],M=.15,_=A({mixins:[C.D,D({event:"touchstart",method:"onClick"})],props:{onClose:Function,disabled:Boolean,leftWidth:[Number,String],rightWidth:[Number,String],beforeClose:Function,stopPropagation:Boolean,name:{type:[Number,String],default:""}},data:function(){return{offset:0,dragging:!1}},computed:{computedLeftWidth:function(){return+this.leftWidth||this.getWidthByRef("left")},computedRightWidth:function(){return+this.rightWidth||this.getWidthByRef("right")}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{getWidthByRef:function(t){if(this.$refs[t]){var e=this.$refs[t].getBoundingClientRect();return e.width}return 0},open:function(t){var e=t==="left"?this.computedLeftWidth:-this.computedRightWidth;this.opened=!0,this.offset=e,this.$emit("open",{position:t,name:this.name,detail:this.name})},close:function(t){this.offset=0,this.opened&&(this.opened=!1,this.$emit("close",{position:t,name:this.name}))},onTouchStart:function(t){this.disabled||(this.startOffset=this.offset,this.touchStart(t))},onTouchMove:function(t){if(!this.disabled&&(this.touchMove(t),this.direction==="horizontal")){this.dragging=!0,this.lockClick=!0;var e=!this.opened||this.deltaX*this.startOffset<0;e&&(0,E.PF)(t,this.stopPropagation),this.offset=(0,W.w)(this.deltaX+this.startOffset,-this.computedRightWidth,this.computedLeftWidth)}},onTouchEnd:function(){var t=this;this.disabled||this.dragging&&(this.toggle(this.offset>0?"left":"right"),this.dragging=!1,setTimeout(function(){t.lockClick=!1},0))},toggle:function(t){var e=Math.abs(this.offset),l=this.opened?1-M:M,a=this.computedLeftWidth,n=this.computedRightWidth;n&&t==="right"&&e>n*l?this.open("right"):a&&t==="left"&&e>a*l?this.open("left"):this.close()},onClick:function(t){t===void 0&&(t="outside"),this.$emit("click",t),this.opened&&!this.lockClick&&(this.beforeClose?this.beforeClose({position:t,name:this.name,instance:this}):this.onClose?this.onClose(t,this,{name:this.name}):this.close(t))},getClickHandler:function(t,e){var l=this;return function(a){e&&a.stopPropagation(),l.onClick(t)}},genLeftPart:function(){var t=this.$createElement,e=this.slots("left");if(e)return t("div",{ref:"left",class:b("left"),on:{click:this.getClickHandler("left",!0)}},[e])},genRightPart:function(){var t=this.$createElement,e=this.slots("right");if(e)return t("div",{ref:"right",class:b("right"),on:{click:this.getClickHandler("right",!0)}},[e])}},render:function(){var t=arguments[0],e={transform:"translate3d("+this.offset+"px, 0, 0)",transitionDuration:this.dragging?"0s":".6s"};return t("div",{class:b(),on:{click:this.getClickHandler("cell")}},[t("div",{class:b("wrapper"),style:e},[this.genLeftPart(),this.slots(),this.genRightPart()])])}}),O=o(66780),K=o(975792),G=o(238575),z=o(577117),N=o(844513),j=o(980512),I=o(281573),L=o(148836),J=o(193575),Y=o(105143),X=o(126711),F=o(927966),Q=o(445061),q=o(56279),tt=o(734194),H=o(555616),U=o(149500),et={name:"mobile-container-list-view",props:["widgetInfo","currentWidget"],components:{DraggableComponentContainer:j.Z,List:z.Z,PullRefresh:K.Z,SwipeCell:_,Button:B.Z,RadioGroup:w.Z,Radio:x.Z,CheckboxGroup:r.Z,Checkbox:d.Z,HideButton:N.Z,VanImage:f.Z},mixins:[I.baseConfig,J.E,Y.b,X.H,Q.u,q.P],data(){return{prefix:{widget:"widget_"},png:tt,refreshing:!1,finished:!1,pageData:[],listLoading:!1,valueIndex:"",disabledIndex:"",radioValue:"",checkBoxList:[],touchPoint:0}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)},listInfo:function(i,t){this.refreshing?(this.pageData=[],this.listLoading=!1,this.refreshing=!1):this.listLoading?(this.widgetInfo.dataset.type==="dynamic"&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].query&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].query.page&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].query.page.enabled&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].query.page.pageNum===1?this.pageData=[]:this.pageData=[...this.pageData,...t],this.listLoading=!1):this.widgetInfo.dataset.type==="dynamic"&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].query&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].query.page&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].query.page.enabled&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].query.page.pageNum===1&&(this.pageData=[])}},computed:{...(0,L.Se)(["getWidgets","getCanvasSetting","isView"]),totalListInfo:function(){return this.widgetInfo.config.list.autoLoad?[...this.pageData,...this.listInfo]:this.listInfo},listInfo:function(){return this.getListInfo(this.widgetInfo.dataset[this.widgetInfo.dataset.type])}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{...(0,L.nv)(["updateCurrentWidget"]),orgWidget1(i,t){return this.orgWidget(i).map(l=>{let a={...l};if(a.dataset=JSON.parse(JSON.stringify(l.dataset)),a.dataset.extend&&this.totalListInfo.length>0){let n=JSON.parse(JSON.stringify(this.totalListInfo[t]));n.push(t+1),a.dataset.extend.source=[n]}return this.$refs[`comp_${a.id}`]&&this.$nextTick(()=>{let n={...a};delete n.parentId,this.$refs[`comp_${a.id}`][t]&&this.$refs[`comp_${a.id}`][t].reLoadInfo&&this.$refs[`comp_${a.id}`][t].reLoadInfo(n)}),a})},onRefresh(){if(this.widgetInfo.dataset.type===this.$$global_editor.dataSourcType.static.code){this.refreshing=!1,this.finished=!1;return}this.widgetInfo.dataset.dynamic.query.page.pageNum=1,this.listLoading=!0,this.refreshing=!0,this.finished=!1,this.$emit("doGetPreviewData",this.widgetInfo)},onLoad(){if(this.widgetInfo.dataset.type===this.$$global_editor.dataSourcType.static.code){this.listLoading=!1;return}if(this.widgetInfo.dataset.dynamic.query.page.pageNum*this.widgetInfo.dataset.dynamic.query.page.pageSize>=this.widgetInfo.dataset.dynamic.total){this.finished=!0;return}this.widgetInfo.dataset.dynamic.query.page.pageNum+=1,this.$emit("doGetPreviewData",this.widgetInfo)},initAction(i){this.actionReceive(i),this.initReceive(i)},initReceive(i){if(i.action==null||i.action.receive==null)return;let t=i.action.receive.setAll;if(t&&t.enabled){let l=t.widgetList;this.setAll(l,i)}let e=i.action.receive.setOther;if(e&&e.enabled){let l=e.widgetList;this.setOther(l,i)}},setAll(i,t){this.widgetInfo.config.list.selectType!=="single"&&this.$$lib__.each(i,e=>{let l=e[0][1];F.Z.$on(l,a=>{if(t.action.receive.setAll.script&&t.action.receive.setAll.script.enabled){if(U.log("Execute the script to execute model to the "+t.name+" component"),t.action.receive.setAll.script.content==""){H.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.setAllValue=new Function("info","data",t.action.receive.setAll.script.content)}this.setAllValue(t,a)})})},setAllValue(){this.checkBoxList=this.totalListInfo.map(i=>i[this.valueIndex])},setOtherValue(){let i=this.totalListInfo.map(t=>t[this.valueIndex]);this.checkBoxList=i.filter(t=>this.checkBoxList.indexOf(t)===-1)},setOther(i,t){this.widgetInfo.config.list.selectType!=="single"&&this.$$lib__.each(i,e=>{let l=e[0][1];F.Z.$on(l,a=>{if(t.action.receive.setOther.script&&t.action.receive.setOther.script.enabled){if(U.log("Execute the script to execute model to the "+t.name+" component"),t.action.receive.setOther.script.content==""){H.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.setOtherValue=new Function("info","data",t.action.receive.setOther.script.content)}this.setOtherValue(t,a)})})},doReSetBoardId(i){this.$emit("doReSetBoardId",i)},attrChange(i,t){let e=this.$refs["widget_"+i.id][t];i.attr.hide?i.attr.hideAnimate&&i.attr.hideAnimate.length>0?(this.first=!1,e.classList="",e.classList.add("animated"),e.classList.add("my-comp"),e.classList.add(i.attr.hideAnimate[i.attr.hideAnimate.length-1]),setTimeout(()=>{e.style.display="none",e.classList.remove(i.attr.hideAnimate[i.attr.hideAnimate.length-1])},900)):e.style.display="none":i.attr.showAnimate&&i.attr.showAnimate.length>0?(e.style.display="block",this.first=!1,e.classList="",e.classList.add("animated"),e.classList.add("my-comp"),e.classList.add(i.attr.showAnimate[i.attr.showAnimate.length-1])):e.style.display="block"},loadInfo(i){if(i.dataset[i.dataset.type]&&i.dataset[i.dataset.type].dimensions&&i.dataset[i.dataset.type].dimensions.length>0?this.getListInfo(i.dataset[i.dataset.type]):this.getListInfo({source:[]}),this.lifecycleAfterLoad(),!this.widgetInfo.config.list.selectType||this.widgetInfo.config.list.selectType==="none")return;let t=i.dataset[i.dataset.type].columnList.filter(e=>e.name===i.dataset[i.dataset.type].encode.value);if(t.length>0&&(this.valueIndex=t[0].index),i.dataset[i.dataset.type].encode.disabled){let e=i.dataset[i.dataset.type].columnList.filter(l=>l.name===i.dataset[i.dataset.type].encode.disabled);e.length>0&&(this.disabledIndex=e[0].index)}},reLoadInfo(i){this.loadInfo(i)},getListInfo(i){return i.source},handleClick(i,t){let e=this,l=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(l,a=>{if(a.enabled&&a.code==e.$$global_editor.actionType.click.code){let n=e.$$global_editor.actionType.click.code+"_"+e.widgetInfo.id,p={item:t,type:i};if(a.paramsExtend&&a.paramsExtend.length>0&&this.getExtendParams(p,a.paramsExtend),a.script&&a.script.enabled){if(U.log("Execute script for "+this.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){H.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",a.script.content),p=this.customScript(p)}F.Z.$emit(n,p),a.postMessage&&this.doPostMessage(p),this.actionNameList.push(n)}})},getPosition(){let i=this.$refs.pullRefresh.scrollEl,t=this.$refs.listContent;return i.scrollTop===0?"top":i.offsetHeight+i.scrollTop===t.offsetHeight+this.widgetInfo.config.list.offsetHeight+this.widgetInfo.config.list.listItem.marginTop?"bottom":!1},touchStart(i){this.touchPoint=i.changedTouches[0].screenY},touchMove(i){let t=i.changedTouches[0].screenY-this.touchPoint;this.touchPoint=i.changedTouches[0].screenY;let e=this.getPosition();e==="top"&&t<0&&i.stopPropagation(),e==="bottom"&&t>0&&i.stopPropagation(),e||i.stopPropagation()},touchEnd(){},selectInput(i){this.widgetInfo.config.list.selectType==="single"?this.radioValue=i:this.checkBoxList=i},valueChange(){if(!this.widgetInfo.config.list.selectType||this.widgetInfo.config.list.selectType==="none")return;let i=this,t=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(t,e=>{if(e.enabled&&e.code==i.$$global_editor.actionType.change.code){let l=i.$$global_editor.actionType.change.code+"_"+i.widgetInfo.id,a={value:this.widgetInfo.config.list.selectType==="single"?this.radioValue:this.checkBoxList};if(e.paramsExtend&&e.paramsExtend.length>0&&this.getExtendParams(a,e.paramsExtend),e.script&&e.script.enabled){if(U.log("Execute script for "+this.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){H.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),a=this.customScript(a)}F.Z.$emit(l,a),e.postMessage&&this.doPostMessage(a),this.actionNameList.push(l)}})}}},it=et,nt=o(768141),st=(0,nt.Z)(it,y,h,!1,null,"0117da67",null),ot=st.exports}}]);
