(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[3511],{56279:function(pt,tt,I){"use strict";I.d(tt,{P:function(){return T}});var Z=I(86892),$=I(49500);const T={mixins:[Z.D],created(){},methods:{lifecycleBeforeChartsLoad(W){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&$.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),$.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let Y=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[W]);if(Y)return Y}return W},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&$.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),$.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},77863:function(pt,tt,I){var Z=I(49500);(function($,T){T(tt,I(42160))})(this,function($,T){"use strict";function W(t,n,i){document.addEventListener?t.addEventListener(n,i):t.attachEvent("on"+n,i)}function et(t,n,i){document.addEventListener?t.removeEventListener(n,i):t.detachEvent("on"+n,i)}function Y(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function nt(t,n){return n={exports:{}},t(n,n.exports),n.exports}function ot(){var t={},n=0,i=0,r=0;return{add:function(o,a){a||(a=o,o=0),o>i?i=o:o<r&&(r=o),t[o]||(t[o]=[]),t[o].push(a),n++},process:function(){for(var o=r;o<=i;o++)for(var a=t[o],c=0;c<a.length;c++)(0,a[c])()},size:function(){return n}}}function rt(t){return t[ct]}function D(t){return Array.isArray(t)||t.length!==void 0}function S(t){if(Array.isArray(t))return t;var n=[];return it(t,function(i){n.push(i)}),n}function q(t){return t&&t.nodeType===1}function j(t,n,i){var r=t[n];return r!=null||i===void 0?r:i}T=T&&T.hasOwnProperty("default")?T.default:T;var gt=function(t){var n=Date.now();return function(i){if(i-n>(t||14))return n=i,!0}},St={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{ref:"stripContainer",staticClass:"happy-scroll-strip",class:[t.horizontal?"happy-scroll-strip--horizontal":"happy-scroll-strip--vertical"],style:[t.initLocation],on:{"!wheel":function(r){r.stopPropagation(),t.handlerWheel(r)}}},[i("div",{ref:"strip",staticClass:"happy-scroll-bar",style:[t.translate,Y({},t.config.sizeAttr,t.length+"px"),t.initSize,{background:t.color},{opacity:t.isOpacity}],on:{mousedown:function(r){r.stopPropagation(),t.handlerMouseDown(r)}}})])},staticRenderFns:[],name:"happy-scroll-strip",props:{horizontal:Boolean,left:Boolean,top:Boolean,move:{type:Number,default:0},size:{type:[Number,String],default:4},minLengthV:{type:Number,default:40},minLengthH:{type:Number,default:40},color:{type:String,default:"rgba(51,51,51,0.2)"},throttle:{type:Number,default:14}},data:function(){return{config:{},startMove:!1,binded:!1,length:0,percentage:0,maxOffset:0,currentOffset:0,moveThrottle:gt(this.throttle)}},watch:{currentOffset:function(t){t===0?this.emitLocationEvent("start",0):t===this.maxOffset&&this.emitLocationEvent("end",t/this.percentage)}},computed:{initSize:function(){return Y({},this.horizontal?"height":"width",this.size+"px")},isOpacity:function(){return this.percentage<1?1:0},translate:function(){var t=this.move*this.percentage;if(this.$refs.stripContainer)return t<0&&(t=0),t>this.maxOffset&&(t=this.maxOffset),this.currentOffset=t,{transform:this.config.translate+"("+t+"px)"}},initLocation:function(){return this.horizontal?this.top?{top:0,bottom:"auto"}:"":this.left?{left:0,right:"auto"}:""}},methods:{emitLocationEvent:function(t,n){var i=this.horizontal?"horizontal":"vertical";this.$emit(i+"-"+t,n)},computeStrip:function(t,n){var i=this.$refs.stripContainer[this.config.client];this.length=i*(n/t);var r=this.horizontal?this.minLengthH:this.minLengthV;r<1&&(r*=i),this.length=this.length<r?r:this.length;var o=this.maxOffset=i-this.length;this.percentage=o/(t-n)},bindEvents:function(){this.binded||(W(document,"mouseup",this.handlerMouseUp),W(document,"mousemove",this.handlerMove),this.binded=!0)},handlerMouseDown:function(t){if(t.button===0)return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.startMove=!0,this.axis=t[this.config.clientAxis],this.bindEvents(),!1},handlerMouseUp:function(){this.startMove=!1},handlerMove:function(t){if(this.startMove&&this.moveThrottle(Date.now())){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var n=this.$refs.stripContainer.getBoundingClientRect(),i=this.$refs.strip.getBoundingClientRect()[this.config.direction]-n[this.config.direction],r=t[this.config.clientAxis]-this.axis+i;this.axis=t[this.config.clientAxis],this.changeOffset(r)}},handlerWheel:function(t){var n=this.$refs.stripContainer.getBoundingClientRect(),i=this.$refs.strip.getBoundingClientRect()[this.config.direction]-n[this.config.direction]+t[this.config.wheelDelta];this.changeOffset(i,t)},changeOffset:function(t,n){t<0&&(t=0),t>this.maxOffset&&(t=this.maxOffset),n&&t>0&&t<this.maxOffset&&(n.preventDefault(),n.stopImmediatePropagation()),this.currentOffset=t,this.$refs.strip.style.transform=this.config.translate+"("+t+"px)",this.$emit("change",t/this.percentage)}},created:function(){var t={h:{sizeAttr:"width",client:"clientWidth",clientAxis:"clientX",translate:"translateX",direction:"left",wheelDelta:"deltaX"},v:{sizeAttr:"height",client:"clientHeight",clientAxis:"clientY",translate:"translateY",direction:"top",wheelDelta:"deltaY"}};this.config=this.horizontal?t.h:t.v},destroyed:function(){et(document,"mouseup",this.handlerClickUp),et(document,"mousemove",this.handlerMove)}},mt=nt(function(t){(t.exports={}).forEach=function(n,i){for(var r=0;r<n.length;r++){var o=i(n[r]);if(o)return o}}}),xt=function(t){var n=t.stateHandler.getState;return{isDetectable:function(i){var r=n(i);return r&&!!r.isDetectable},markAsDetectable:function(i){n(i).isDetectable=!0},isBusy:function(i){return!!n(i).busy},markBusy:function(i,r){n(i).busy=!!r}}},zt=function(t){function n(r){var o=t.get(r);return o===void 0?[]:i[o]||[]}var i={};return{get:n,add:function(r,o){var a=t.get(r);i[a]||(i[a]=[]),i[a].push(o)},removeListener:function(r,o){for(var a=n(r),c=0,f=a.length;c<f;++c)if(a[c]===o){a.splice(c,1);break}},removeAllListeners:function(r){var o=n(r);o&&(o.length=0)}}},Et=function(){var t=1;return{generate:function(){return t++}}},Lt=function(t){var n=t.idGenerator,i=t.stateHandler.getState;return{get:function(r){var o=i(r);return o&&o.id!==void 0?o.id:null},set:function(r){var o=i(r);if(!o)throw new Error("setId required the element to have a resize detection state.");var a=n.generate();return o.id=a,a}}},Ct=function(t){function n(){}var i={log:n,warn:n,error:n};if(!t&&window.console){var r=function(o,a){o[a]=function(){var c=Z[a];if(c.apply)c.apply(Z,arguments);else for(var f=0;f<arguments.length;f++)c(arguments[f])}};r(i,"log"),r(i,"warn"),r(i,"error")}return i},R=nt(function(t){var n=t.exports={};n.isIE=function(i){return!!function(){var r=navigator.userAgent.toLowerCase();return r.indexOf("msie")!==-1||r.indexOf("trident")!==-1||r.indexOf(" edge/")!==-1}()&&(!i||i===function(){var r=3,o=document.createElement("div"),a=o.getElementsByTagName("i");do o.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->";while(a[0]);return r>4?r:void 0}())},n.isLegacyOpera=function(){return!!window.opera}}),vt=nt(function(t){(t.exports={}).getOption=function(n,i,r){var o=n[i];return o!=null||r===void 0?o:r}}),Ht=function(t){function n(){for(v=!0;x.size();){var w=x;x=ot(),w.process()}v=!1}function i(){s=o(n)}function r(w){return clearTimeout(w)}function o(w){return function(d){return setTimeout(d,0)}(w)}var a=(t=t||{}).reporter,c=vt.getOption(t,"async",!0),f=vt.getOption(t,"auto",!0);f&&!c&&(a&&a.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),c=!0);var s,x=ot(),v=!1;return{add:function(w,d){!v&&f&&c&&x.size()===0&&i(),x.add(w,d)},force:function(w){v||(w===void 0&&(w=c),s&&(r(s),s=null),w?i():n())}}},ct="_erd",B={initState:function(t){return t[ct]={},rt(t)},getState:rt,cleanState:function(t){delete t[ct]}},_t=function(t){function n(a){return o(a).object}var i=(t=t||{}).reporter,r=t.batchProcessor,o=t.stateHandler.getState;if(!i)throw new Error("Missing required dependency: reporter.");return{makeDetectable:function(a,c,f){f||(f=c,c=a,a=null),a=a||{},R.isIE(8)?f(c):function(s,x){function v(){function k(){if(e.position==="static"){s.style.position="relative";var L=function(H,N,A,y){var m=A[y];m!=="auto"&&function(E){return E.replace(/[^-\d\.]/g,"")}(m)!=="0"&&(H.warn("An element that is positioned static has style."+y+"="+m+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+y+" will be set to 0. Element: ",N),N.style[y]=0)};L(i,s,e,"top"),L(i,s,e,"right"),L(i,s,e,"bottom"),L(i,s,e,"left")}}e.position!==""&&(k(e),d=!0);var z=document.createElement("object");z.style.cssText=w,z.tabIndex=-1,z.type="text/html",z.onload=function(){function L(H,N){H.contentDocument?N(H.contentDocument):setTimeout(function(){L(H,N)},100)}d||k(),L(this,function(H){x(s)})},R.isIE()||(z.data="about:blank"),s.appendChild(z),o(s).object=z,R.isIE()&&(z.data="about:blank")}var w="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",d=!1,e=window.getComputedStyle(s),u=s.offsetWidth,h=s.offsetHeight;o(s).startSize={width:u,height:h},r?r.add(v):v()}(c,f)},addListener:function(a,c){function f(){c(a)}if(!n(a))throw new Error("Element is not detectable by this strategy.");R.isIE(8)?(o(a).object={proxy:f},a.attachEvent("onresize",f)):n(a).contentDocument.defaultView.addEventListener("resize",f)},uninstall:function(a){R.isIE(8)?a.detachEvent("onresize",o(a).object.proxy):a.removeChild(n(a)),delete o(a).object}}},At=mt.forEach,$t=function(t){function n(d){d.className+=" "+w+"_animation_active"}function i(d,e,u){if(d.addEventListener)d.addEventListener(e,u);else{if(!d.attachEvent)return c.error("[scroll] Don't know how to add event listeners.");d.attachEvent("on"+e,u)}}function r(d,e,u){if(d.removeEventListener)d.removeEventListener(e,u);else{if(!d.detachEvent)return c.error("[scroll] Don't know how to remove event listeners.");d.detachEvent("on"+e,u)}}function o(d){return s(d).container.childNodes[0].childNodes[0].childNodes[0]}function a(d){return s(d).container.childNodes[0].childNodes[0].childNodes[1]}var c=(t=t||{}).reporter,f=t.batchProcessor,s=t.stateHandler.getState,x=t.idHandler;if(!f)throw new Error("Missing required dependency: batchProcessor");if(!c)throw new Error("Missing required dependency: reporter.");var v=function(){var d=document.createElement("div");d.style.cssText="position: absolute; width: 1000px; height: 1000px; visibility: hidden; margin: 0; padding: 0;";var e=document.createElement("div");e.style.cssText="position: absolute; width: 500px; height: 500px; overflow: scroll; visibility: none; top: -1500px; left: -1500px; visibility: hidden; margin: 0; padding: 0;",e.appendChild(d),document.body.insertBefore(e,document.body.firstChild);var u=500-e.clientWidth,h=500-e.clientHeight;return document.body.removeChild(e),{width:u,height:h}}(),w="erd_scroll_detection_container";return function(d,e){if(!document.getElementById(d)){var u=e+"_animation",h=`/* Created by the element-resize-detector library. */
`;h+="."+e+` > div::-webkit-scrollbar { display: none; }

`,h+="."+e+"_animation_active { -webkit-animation-duration: 0.1s; animation-duration: 0.1s; -webkit-animation-name: "+u+"; animation-name: "+u+`; }
`,h+="@-webkit-keyframes "+u+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,function(k,z){z=z||function(H){document.head.appendChild(H)};var L=document.createElement("style");L.innerHTML=k,L.id=d,z(L)}(h+="@keyframes "+u+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}("erd_scroll_detection_scrollbar_style",w),{makeDetectable:function(d,e,u){function h(){if(d.debug){var l=Array.prototype.slice.call(arguments);if(l.unshift(x.get(e),"Scroll: "),c.log.apply)c.log.apply(null,l);else for(var p=0;p<l.length;p++)c.log(l[p])}}function k(l){var p=s(l).container.childNodes[0],C=getComputedStyle(p);return!C.width||C.width.indexOf("px")===-1}function z(){var l=getComputedStyle(e),p={};return p.position=l.position,p.width=e.offsetWidth,p.height=e.offsetHeight,p.top=l.top,p.right=l.right,p.bottom=l.bottom,p.left=l.left,p.widthCSS=l.width,p.heightCSS=l.height,p}function L(){var l=z();s(e).startSize={width:l.width,height:l.height},h("Element start size",s(e).startSize)}function H(){s(e).listeners=[]}function N(){if(h("storeStyle invoked."),s(e)){var l=z();s(e).style=l}else h("Aborting because element has been uninstalled")}function A(l,p,C){s(l).lastWidth=p,s(l).lastHeight=C}function y(l){return o(l).childNodes[0]}function m(){return 2*v.width+1}function E(){return 2*v.height+1}function J(l){return l+10+m()}function st(l){return l+10+E()}function ht(l){return 2*l+m()}function ft(l){return 2*l+E()}function yt(l,p,C){var P=o(l),V=a(l),K=J(p),g=st(C),b=ht(p),_=ft(C);P.scrollLeft=K,P.scrollTop=g,V.scrollLeft=b,V.scrollTop=_}function bt(){var l=s(e).container;if(!l){(l=document.createElement("div")).className=w,l.style.cssText="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0; padding: 0;",s(e).container=l,n(l),e.appendChild(l);var p=function(){s(e).onRendered&&s(e).onRendered()};i(l,"animationstart",p),s(e).onAnimationStart=p}return l}function Dt(){function l(){s(e).onExpand&&s(e).onExpand()}function p(){s(e).onShrink&&s(e).onShrink()}if(h("Injecting elements"),s(e)){(function(){var O=s(e).style;if(O.position==="static"){e.style.position="relative";var M=function(Q,G,Mt,lt){var ut=Mt[lt];ut!=="auto"&&function(Wt){return Wt.replace(/[^-\d\.]/g,"")}(ut)!=="0"&&(Q.warn("An element that is positioned static has style."+lt+"="+ut+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+lt+" will be set to 0. Element: ",G),G.style[lt]=0)};M(c,e,O,"top"),M(c,e,O,"right"),M(c,e,O,"bottom"),M(c,e,O,"left")}})();var C=s(e).container;C||(C=bt());var P=v.width,V=v.height,K="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; "+function(O,M,Q,G){return O=O?O+"px":"0",M=M?M+"px":"0",Q=Q?Q+"px":"0",G=G?G+"px":"0","left: "+O+"; top: "+M+"; right: "+G+"; bottom: "+Q+";"}(-(1+P),-(1+V),-V,-P),g=document.createElement("div"),b=document.createElement("div"),_=document.createElement("div"),F=document.createElement("div"),X=document.createElement("div"),at=document.createElement("div");g.dir="ltr",g.style.cssText="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;",g.className=w,b.className=w,b.style.cssText=K,_.style.cssText="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",F.style.cssText="position: absolute; left: 0; top: 0;",X.style.cssText="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",at.style.cssText="position: absolute; width: 200%; height: 200%;",_.appendChild(F),X.appendChild(at),b.appendChild(_),b.appendChild(X),g.appendChild(b),C.appendChild(g),i(_,"scroll",l),i(X,"scroll",p),s(e).onExpandScroll=l,s(e).onShrinkScroll=p}else h("Aborting because element has been uninstalled")}function Nt(){function l(g,b,_){var F=y(g),X=J(b),at=st(_);F.style.width=X+"px",F.style.height=at+"px"}function p(g){var b=e.offsetWidth,_=e.offsetHeight;h("Storing current size",b,_),A(e,b,_),f.add(0,function(){if(s(e))if(C()){if(d.debug){var F=e.offsetWidth,X=e.offsetHeight;F===b&&X===_||c.warn(x.get(e),"Scroll: Size changed before updating detector elements.")}l(e,b,_)}else h("Aborting because element container has not been initialized");else h("Aborting because element has been uninstalled")}),f.add(1,function(){s(e)?C()?yt(e,b,_):h("Aborting because element container has not been initialized"):h("Aborting because element has been uninstalled")}),g&&f.add(2,function(){s(e)?C()?g():h("Aborting because element container has not been initialized"):h("Aborting because element has been uninstalled")})}function C(){return!!s(e).container}function P(){h("notifyListenersIfNeeded invoked");var g=s(e);return s(e).lastNotifiedWidth===void 0&&g.lastWidth===g.startSize.width&&g.lastHeight===g.startSize.height?h("Not notifying: Size is the same as the start size, and there has been no notification yet."):g.lastWidth===g.lastNotifiedWidth&&g.lastHeight===g.lastNotifiedHeight?h("Not notifying: Size already notified"):(h("Current size not notified, notifying..."),g.lastNotifiedWidth=g.lastWidth,g.lastNotifiedHeight=g.lastHeight,void At(s(e).listeners,function(b){b(e)}))}function V(){if(h("Scroll detected."),k(e))h("Scroll event fired while unrendered. Ignoring...");else{var g=e.offsetWidth,b=e.offsetHeight;g!==e.lastWidth||b!==e.lastHeight?(h("Element size changed."),p(P)):h("Element size has not changed ("+g+"x"+b+").")}}if(h("registerListenersAndPositionElements invoked."),s(e)){s(e).onRendered=function(){if(h("startanimation triggered."),k(e))h("Ignoring since element is still unrendered...");else{h("Element rendered.");var g=o(e),b=a(e);g.scrollLeft!==0&&g.scrollTop!==0&&b.scrollLeft!==0&&b.scrollTop!==0||(h("Scrollbars out of sync. Updating detector elements..."),p(P))}},s(e).onExpand=V,s(e).onShrink=V;var K=s(e).style;l(e,K.width,K.height)}else h("Aborting because element has been uninstalled")}function kt(){if(h("finalizeDomMutation invoked."),s(e)){var l=s(e).style;A(e,l.width,l.height),yt(e,l.width,l.height)}else h("Aborting because element has been uninstalled")}function Ot(){u(e)}function wt(){h("Installing..."),H(),L(),f.add(0,N),f.add(1,Dt),f.add(2,Nt),f.add(3,kt),f.add(4,Ot)}u||(u=e,e=d,d=null),d=d||{},h("Making detectable..."),function(l){return!function(p){return p===p.ownerDocument.body||p.ownerDocument.body.contains(p)}(l)||getComputedStyle(l)===null}(e)?(h("Element is detached"),bt(),h("Waiting until element is attached..."),s(e).onRendered=function(){h("Element is now attached"),wt()}):wt()},addListener:function(d,e){if(!s(d).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");s(d).listeners.push(e)},uninstall:function(d){var e=s(d);e&&(e.onExpandScroll&&r(o(d),"scroll",e.onExpandScroll),e.onShrinkScroll&&r(a(d),"scroll",e.onShrinkScroll),e.onAnimationStart&&r(e.container,"animationstart",e.onAnimationStart),e.container&&d.removeChild(e.container))}}},it=mt.forEach,Tt=function(t){var n;if((t=t||{}).idHandler)n={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var i=Et(),r=Lt({idGenerator:i,stateHandler:B});n=r}var o=t.reporter;o||(o=Ct(o===!1));var a=j(t,"batchProcessor",Ht({reporter:o})),c={};c.callOnAdd=!!j(t,"callOnAdd",!0),c.debug=!!j(t,"debug",!1);var f,s=zt(n),x=xt({stateHandler:B}),v=j(t,"strategy","object"),w={reporter:o,batchProcessor:a,stateHandler:B,idHandler:n};if(v==="scroll"&&(R.isLegacyOpera()?(o.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),v="object"):R.isIE(9)&&(o.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),v="object")),v==="scroll")f=$t(w);else{if(v!=="object")throw new Error("Invalid strategy name: "+v);f=_t(w)}var d={};return{listenTo:function(e,u,h){function k(y){var m=s.get(y);it(m,function(E){E(y)})}function z(y,m,E){s.add(m,E),y&&E(m)}if(h||(h=u,u=e,e={}),!u)throw new Error("At least one element required.");if(!h)throw new Error("Listener required.");if(q(u))u=[u];else{if(!D(u))return o.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");u=S(u)}var L=0,H=j(e,"callOnAdd",c.callOnAdd),N=j(e,"onReady",function(){}),A=j(e,"debug",c.debug);it(u,function(y){B.getState(y)||(B.initState(y),n.set(y));var m=n.get(y);if(A&&o.log("Attaching listener to element",m,y),!x.isDetectable(y))return A&&o.log(m,"Not detectable."),x.isBusy(y)?(A&&o.log(m,"System busy making it detectable"),z(H,y,h),d[m]=d[m]||[],void d[m].push(function(){++L===u.length&&N()})):(A&&o.log(m,"Making detectable..."),x.markBusy(y,!0),f.makeDetectable({debug:A},y,function(E){if(A&&o.log(m,"onElementDetectable"),B.getState(E)){x.markAsDetectable(E),x.markBusy(E,!1),f.addListener(E,k),z(H,E,h);var J=B.getState(E);if(J&&J.startSize){var st=E.offsetWidth,ht=E.offsetHeight;J.startSize.width===st&&J.startSize.height===ht||k(E)}d[m]&&it(d[m],function(ft){ft()})}else A&&o.log(m,"Element uninstalled before being detectable.");delete d[m],++L===u.length&&N()}));A&&o.log(m,"Already detecable, adding listener."),z(H,y,h),L++}),L===u.length&&N()},removeListener:s.removeListener,removeAllListeners:s.removeAllListeners,uninstall:function(e){if(!e)return o.error("At least one element is required.");if(q(e))e=[e];else{if(!D(e))return o.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=S(e)}it(e,function(u){s.removeAllListeners(u),f.uninstall(u),B.cleanState(u)})}}},U=T;typeof window<"u"&&window.Vue&&(U=window.Vue);var dt={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{ref:"happy-scroll",staticClass:"happy-scroll"},[i("div",{ref:"container",staticClass:"happy-scroll-container",style:[t.initSize],on:{scroll:function(r){r.stopPropagation(),t.onScroll(r)}}},[i("div",{ref:"content",staticClass:"happy-scroll-content",style:[t.contentBorderStyle]},[t._t("default")],2)]),t.hideVertical?t._e():i("happy-scroll-strip",t._g(t._b({ref:"stripY",attrs:{throttle:t.throttle,move:t.moveY},on:{change:t.slideYChange}},"happy-scroll-strip",t.$attrs,!1),t.$listeners)),t.hideHorizontal?t._e():i("happy-scroll-strip",t._g(t._b({ref:"stripX",attrs:{horizontal:"",throttle:t.throttle,move:t.moveX},on:{change:t.slideXChange}},"happy-scroll-strip",t.$attrs,!1),t.$listeners))],1)},staticRenderFns:[],name:"happy-scroll",inheritAttrs:!1,components:{HappyScrollStrip:St},props:{scrollTop:{type:[Number,String],default:0},scrollLeft:{type:[Number,String],default:0},hideVertical:Boolean,hideHorizontal:Boolean,throttle:{type:Number,default:14},resize:Boolean,smallerMoveH:{type:String,default:""},smallerMoveV:{type:String,default:""},biggerMoveH:{type:String,default:""},biggerMoveV:{type:String,default:""}},data:function(){return{initSize:{},moveX:+this.scrollLeft,moveY:+this.scrollTop,scrollThrottle:gt(this.throttle),browserHSize:0,browserVSize:0,isScrollNotUseSpace:void 0}},watch:{scrollTop:function(t){this.$refs.container.scrollTop=this.moveY=+t},scrollLeft:function(t){this.$refs.container.scrollLeft=this.moveX=+t},hideVertical:function(t){t||this.$nextTick(this.computeStripY)},hideHorizontal:function(t){t||this.$nextTick(this.computeStripX)}},computed:{contentBorderStyle:function(){return this.isScrollNotUseSpace===void 0?{}:{"border-right":20-this.browserHSize+"px solid transparent","border-bottom":20-this.browserVSize+"px solid transparent"}}},methods:{slideYChange:function(t){this.$refs.container.scrollTop=t,this.$emit("update:scrollTop",this.$refs.container.scrollTop)},slideXChange:function(t){this.$refs.container.scrollLeft=t,this.$emit("update:scrollLeft",this.$refs.container.scrollLeft)},updateSyncScroll:function(t,n,i){var r,o,a,c,f,s=function x(){var v=new Date().getTime()-c;v<n&&v>=0?r=setTimeout(x,n-v):(r=null,i||(f=t.apply(a,o),r||(a=o=null)))};return function(){a=this,o=arguments,c=new Date().getTime();var x=i&&!r;return r||(r=setTimeout(s,n)),x&&(f=t.apply(a,o),a=o=null),f}}(function(){this.$emit("update:scrollTop",this.moveY),this.$emit("update:scrollLeft",this.moveX)},50),onScroll:function(t){if(!this.scrollThrottle(Date.now()))return!1;this.moveY=t.target.scrollTop,this.moveX=t.target.scrollLeft,this.updateSyncScroll()},initBrowserSize:function(){this.isScrollNotUseSpace!==void 0&&(this.isScrollNotUseSpace===!0?(this.browserHSize=0,this.browserVSize=0):(this.browserHSize=this.$refs.container.offsetWidth-this.$refs.container.clientWidth,this.browserVSize=this.$refs.container.offsetHeight-this.$refs.container.clientHeight))},computeStripX:function(){if(!this.hideHorizontal){var t=this.$refs["happy-scroll"],n=this.$slots.default[0].elm;this.$refs.stripX.computeStrip(n.scrollWidth,t.clientWidth)}},computeStripY:function(){if(!this.hideVertical){var t=this.$refs["happy-scroll"],n=this.$slots.default[0].elm;this.$refs.stripY.computeStrip(n.scrollHeight,t.clientHeight)}},resizeListener:function(){var t=this;if(this.resize){var n=Tt({strategy:"scroll",callOnAdd:!1}),i=this.$slots.default[0].elm,r=i.clientHeight,o=i.clientWidth;n.listenTo(i,function(a){t.computeStripX(),t.computeStripY(),t.initBrowserSize();var c=void 0;a.clientHeight<r&&(c=t.smallerMoveH.toLocaleLowerCase()),a.clientHeight>r&&(c=t.biggerMoveH.toLocaleLowerCase()),c==="start"&&(t.moveY=0,t.slideYChange(t.moveY)),c==="end"&&(t.moveY=a.clientHeight,t.slideYChange(t.moveY)),r=a.clientHeight,c="",a.clientWidth<o&&(c=t.smallerMoveV.toLocaleLowerCase()),a.clientWidth>o&&(c=t.biggerMoveV.toLocaleLowerCase()),c==="start"&&(t.moveX=0,t.slideXChange(t.moveX)),c==="end"&&(t.moveX=a.clientWidth,t.slideXChange(t.moveX)),o=a.clientWidth})}},setContainerSize:function(){this.initSize={width:this.$refs["happy-scroll"].clientWidth+20+"px",height:this.$refs["happy-scroll"].clientHeight+20+"px"}},checkScrollMode:function(){if(U._happyJS._isScrollNotUseSpace===void 0){var t=this.$slots.default[0].elm,n=this.$refs.container;(t.offsetHeight>n.clientHeight||t.offsetWidth>n.clientWidth)&&(n.offsetWidth>n.clientWidth||n.offsetHeight>n.clientHeight?U._happyJS._isScrollNotUseSpace=!1:U._happyJS._isScrollNotUseSpace=!0,this.isScrollNotUseSpace=U._happyJS._isScrollNotUseSpace)}}},beforeCreate:function(){var t=U._happyJS=U._happyJS||{};this.isScrollNotUseSpace=t._isScrollNotUseSpace},mounted:function(){var t=this;this.setContainerSize(),this.$nextTick(function(){t.computeStripX(),t.computeStripY(),t.checkScrollMode(),t.initBrowserSize(),t.$nextTick(function(){t.scrollTop&&(t.$refs.container.scrollTop=+t.scrollTop),t.scrollLeft&&(t.$refs.container.scrollLeft=+t.scrollLeft)})}),this.resizeListener(),this.$watch("browserHSize",this.setContainerSize),this.$watch("browserVSize",this.setContainerSize)}};typeof window<"u"&&window.Vue&&Vue.component("happy-scroll",dt);var It={install:function(t){t.component("happy-scroll",dt)},version:"2.1.0"};$.default=It,$.HappyScroll=dt,$.version="2.1.0",Object.defineProperty($,"__esModule",{value:!0})})},80512:function(pt,tt,I){"use strict";I.d(tt,{Z:function(){return rt}});var Z=function(){var S=this,q=S._self._c;return q("div",{class:"container_child_"+S.widgetData.id,attrs:{id:"container_child_"+S.widgetData.id}},[q("keep-alive",[q(S.isView&&S.widgetData.isContainer?S.widgetData.typeName+"-view":S.widgetData.typeName,{ref:"com_"+S.widgetData.id,tag:"component",attrs:{"widget-info":S.widgetData,"widget-arr":S.getWidgetAllArr,"current-widget":S.currentWidget},on:{doGetPreviewData:S.doGetPreviewData,doReSetBoardId:S.doReSetBoardId,attrChange:S.attrChange}})],1)],1)},$=[],T=I(13229),W=I(48836),et={name:"DraggableComponent",extends:T.Z,computed:{...(0,W.Se)(["getWidgetAllArr","isView"])},methods:{reLoadInfo(D){if(D.id){let S=this.$refs["com_"+D.id];S&&S.reLoadInfo(D)}},doReSetBoardId(D){this.$emit("doReSetBoardId",D)},attrChange(D){this.$emit("attrChange",D)}}},Y=et,nt=I(68141),ot=(0,nt.Z)(Y,Z,$,!1,null,"41d16aa2",null),rt=ot.exports}}]);
