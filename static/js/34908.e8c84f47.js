"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[34908],{752246:function(w,d,n){n.d(d,{X:function(){return s},b:function(){return r}});let s={versions:function(){var i=navigator.userAgent;return{trident:i.indexOf("Trident")>-1,presto:i.indexOf("Presto")>-1,webKit:i.indexOf("AppleWebKit")>-1,gecko:i.indexOf("Gecko")>-1&&i.indexOf("KHTML")==-1,mobile:!!i.match(/AppleWebKit.*Mobile.*/),ios:!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:i.indexOf("Android")>-1,iPhone:i.indexOf("iPhone")>-1,iPad:i.indexOf("iPad")>-1,webApp:i.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},r;s.versions.mobile||s.versions.ios||s.versions.android||s.versions.iPhone||s.versions.iPad?r=!1:r=!0},844513:function(w,d,n){n.d(d,{Z:function(){return b}});var s=function(){var t=this,l=t._self._c;return t.attr.buttonHide?l("div",{style:{position:"absolute",right:t.attr.buttonHideRight+"px",top:t.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(m){return t.onHide()}}},[t.openTooltip?l("el-tooltip",{attrs:{"open-delay":1e3,content:t.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[l("el-button",{class:t.attr.buttonHideIconClass&&t.attr.buttonHideIconClass!=""?t.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.attr.buttonHideColor,fontSize:t.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):l("el-button",{class:t.attr.buttonHideIconClass&&t.attr.buttonHideIconClass!=""?t.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.attr.buttonHideColor,fontSize:t.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):t._e()},r=[],i=n(752246),g={props:["attr"],name:"hide-button",data(){return{isPc:i.b}},computed:{openTooltip:function(){let c=!1,t=this.attr.buttonHideTooltipContent;return i.b&&t&&t!=null&&t.trim()!=""&&(c=!0),c}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},h=g,p=n(768141),v=(0,p.Z)(h,s,r,!1,null,"bf399b9a",null),b=v.exports},356155:function(w,d,n){n.r(d),n.d(d,{default:function(){return M}});var s=function(){var e=this,u=e._self._c;return u("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],ref:"gisBase",staticClass:"my-gisBase",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}},[u("hide-button",{attrs:{attr:e.widgetInfo.attr}}),u("GeneralButton",e._b({ref:"drawBtn",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"},attrs:{active:e.active,"icon-class":e.widgetInfo.config.btnConfig.iconClass?e.widgetInfo.config.btnConfig.iconClass:"drawPolygon","theme-style":e.themeConfig,position:e.btnPosition},on:{click:e.draw}},"GeneralButton",e.widgetInfo.config.btnConfig,!1))],1)},r=[],i=n(308421),g=n.n(i),h=n(844513),p=n(845249),v=n(445061),b=n(126711),c=n(386892),t=n(927966),l=n(950681),m=n(149500),I={name:"GisDrawPolygon",components:{HideButton:h.Z,GeneralButton:g()},mixins:[p.baseConfig,c.D,v.u,b.H,l.Z],inject:{reactiveMap:{default:function(){return()=>null}}},props:["widgetInfo"],data(){return{active:!1}},watch:{},beforeDestroy(){},mounted(){this.initAction(this.widgetInfo),this.reactiveMap()&&(this.reactiveMap().drawTool.$on("change:active",(o,e)=>{e==="drawPolygon"&&(this.active=o)}),this.reactiveMap().drawTool.$on("drawend",this.drawend))},methods:{btnActive(o){this.$refs.drawBtn.changeBtn(o)},loadInfo(o){m.log(o)},reLoadInfo(o){m.log("\u914D\u7F6E\u66F4\u65B0\u4E86"),this.loadInfo(o)},initAction(o){this.registerAction(o,"configMap","mapList",this.doConfigMap),this.actionReceive(o)},drawend(o){let e=this,u=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(u,a=>{if(a.enabled&&a.code==e.$$global_editor.actionType.drawEnd.code){let x=a.code+"_"+e.widgetInfo.id,f={geojson:o};if(a.paramsExtend&&a.paramsExtend.length>0&&this.getExtendParams(f,a.paramsExtend,[],[]),a.script&&a.script.enabled&&a.script.content){this.doConfigMap=new Function("data",a.script.content);let y=this.doConfigMap(f);y&&(f=y)}t.Z.$emit(x,f),a.postMessage&&this.doPostMessage(f),this.actionNameList.push(x)}})},draw(){this.active?this.reactiveMap().drawTool.deactivate():this.reactiveMap().drawTool.activate("polygon")},changeActive(o){this.active=o}}},C=I,H=n(768141),P=(0,H.Z)(C,s,r,!1,null,"498c0614",null),M=P.exports}}]);
