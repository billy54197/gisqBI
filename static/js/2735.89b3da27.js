"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[2735],{56279:function(H,p,s){s.d(p,{P:function(){return g}});var S=s(86892),h=s(49500);const g={mixins:[S.D],created(){},methods:{lifecycleBeforeChartsLoad(y){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&h.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),h.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let u=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[y]);if(u)return u}return y},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&h.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),h.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},44513:function(H,p,s){s.d(p,{Z:function(){return b}});var S=function(){var n=this,m=n._self._c;return n.attr.buttonHide?m("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(x){return n.onHide()}}},[n.openTooltip?m("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[m("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):m("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},h=[],g=s(52246),y={props:["attr"],name:"hide-button",data(){return{isPc:g.b}},computed:{openTooltip:function(){let v=!1,n=this.attr.buttonHideTooltipContent;return g.b&&n&&n!=null&&n.trim()!=""&&(v=!0),v}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},w=y,u=s(68141),I=(0,u.Z)(w,S,h,!1,null,"bf399b9a",null),b=I.exports},22735:function(H,p,s){s.r(p),s.d(p,{default:function(){return _}});var S=function(){var t=this,c=t._self._c;return c("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[c("hide-button",{attrs:{attr:t.widgetInfo.attr}}),c("div",{ref:"comDatePicker",style:t.contStyle},[c("el-steps",{attrs:{active:t.active,space:t.widgetInfo.config.lineStyle.height,direction:t.widgetInfo.config.lineStyle.direction}},t._l(t.list,function(i,o){return c("el-step",{key:o,attrs:{icon:t.widgetInfo.config.pointStyle.iconClass,description:i.content,title:i.time},nativeOn:{click:function(l){return t.onChange(o)}}})}),1)],1)],1)},h=[],g=s(27966),y=s(26711),w=s(45061),u=s(56279),I=s(44513),b=s(55616),v=s(70411),n=s(67157);const m={mixins:[n.c],data(){return{config_extend:{config:{labelStyle:{activeStyle:{font:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14}},inactiveStyle:{font:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14}}},contentStyle:{activeStyle:{font:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14}},inactiveStyle:{font:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14}}}}},filter_config:{lineStyle:{activeStyle:{fillColor:"rgb(46 204 113)",borderColor:"rgb(46 204 113)"},inactiveStyle:{fillColor:"rgb(189 195 199)",borderColor:"rgb(189 195 199)"}},labelStyle:{activeStyle:{font:{color:"#4C84FF",fontFamily:"alibabaPuHuiTiRegular"}},inactiveStyle:{font:{color:"#303133",fontFamily:"alibabaPuHuiTiRegular"}}},contentStyle:{activeStyle:{font:{color:"#4C84FF",fontFamily:"alibabaPuHuiTiRegular"}},inactiveStyle:{font:{color:"#303133",fontFamily:"alibabaPuHuiTiRegular"}}},pointStyle:{activeStyle:{fillColor:"rgba(76, 132, 255, 0)",borderColor:"#4C84FF"},inactiveStyle:{fillColor:"rgba(191, 203, 217, 0)",borderColor:"#BFCBD9"}}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var x=s(49500),F={props:["widgetInfo"],name:"com-time-line",components:{HideButton:I.Z},mixins:[y.H,w.u,u.P,v.u,m],data(){return{list:[],active:1,timmer:null,contStyle:{},isSetStyle:!1}},watch:{"widgetInfo.attr.pause":{deep:!0,handler:function(){this.widgetInfo.attr.pause?window.clearInterval(this.timmer):this.widgetInfo.config.global.autoPlay&&(window.clearInterval(this.timmer),this.run(this.widgetInfo))}},"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},updated(){let e=this.$refs.comDatePicker.childNodes[0].childNodes;e.length>0&&!this.isSetStyle&&(this.isSetStyle=!0,this.getLineStyle(e))},methods:{loadInfo(e){this.getTimelist(e.dataset[e.dataset.type].encode,e.dataset[e.dataset.type].dimensions,e.dataset[e.dataset.type].source),this.active=e.config.global.active,this.getContStyle(),this.isSetStyle=!1,this.timmer&&window.clearInterval(this.timmer),e.config.global.autoPlay&&e.dataset[e.dataset.type].encode.time?this.run(e):window.clearInterval(this.timmer),this.lifecycleAfterLoad()},reLoadInfo(e){this.loadInfo(e)},getContStyle(){this.contStyle={paddingLeft:this.mUtils.getNewPxW(this.widgetInfo.config.global.left)+"px",paddingRight:this.mUtils.getNewPxW(this.widgetInfo.config.global.right)+"px",paddingTop:this.mUtils.getNewPxH(this.widgetInfo.config.global.top)+"px",paddingBottom:this.mUtils.getNewPxH(this.widgetInfo.config.global.bottom)+"px",cursor:"pointer"}},getLineStyle(e){let t=this.widgetInfo.config.lineStyle,c=this.widgetInfo.config.labelStyle,i=this.widgetInfo.config.contentStyle,o=this.widgetInfo.config.pointStyle;this.$$lib__.each(e,l=>{let r=l.childNodes[0].childNodes[0],a=l.childNodes[0].childNodes[1],d=l.childNodes[1].childNodes[0],f=l.childNodes[1].childNodes[1],C,N,L,P;this.widgetInfo.config.global.type=="single"?(C=l.childNodes[0].classList.value.indexOf("is-process")>0,N=l.childNodes[0].classList.value.indexOf("is-process")>0,L=d.classList.value.indexOf("is-process")>0,P=f.classList.value.indexOf("is-process")>0):this.widgetInfo.config.global.type=="continue"&&(C=l.childNodes[0].classList.value.indexOf("is-process")>0||l.childNodes[0].classList.value.indexOf("is-finish")>0,N=l.childNodes[0].classList.value.indexOf("is-process")>0||l.childNodes[0].classList.value.indexOf("is-finish")>0,L=d.classList.value.indexOf("is-process")>0||d.classList.value.indexOf("is-finish")>0,P=f.classList.value.indexOf("is-process")>0||f.classList.value.indexOf("is-finish")>0),a.style.color=o.inactiveStyle.fillColor,a.style.width=this.mUtils.getNewPxW(o.inactiveStyle.pointSize+4+o.inactiveStyle.borderWidth)+"px",a.style.height=this.mUtils.getNewPxH(o.inactiveStyle.pointSize+4+o.inactiveStyle.borderWidth)+"px",a.childNodes[0]&&a.childNodes[0].style?a.childNodes[0].style.fontSize=this.mUtils.getNewFontSize(o.inactiveStyle.pointSize)+"px":a.childNodes[1].style.fontSize=this.mUtils.getNewFontSize(o.inactiveStyle.pointSize)+"px",a.style.borderRadius="100%",a.style.borderWidth=this.mUtils.getNewPxW(o.inactiveStyle.borderWidth)+"px",a.style.borderColor=o.inactiveStyle.borderColor,a.style.borderStyle="solid",C&&(a.style.color=o.activeStyle.fillColor,a.style.borderColor=o.activeStyle.borderColor),r.style.backgroundColor=t.inactiveStyle.fillColor,r.style.color=t.inactiveStyle.fillColor,r.style.borderColor=t.inactiveStyle.borderColor,r.style.marginLeft=this.mUtils.getNewPxW(t.left)+"px",r.style.marginTop=this.mUtils.getNewPxH(t.top)+"px",d.style.marginTop=this.mUtils.getNewPxH(c.top)+"px",d.style.marginLeft=this.mUtils.getNewPxW(c.left)+"px",this.setFontStyle(d,c.inactiveStyle.font),d.style.backgroundColor=c.inactiveStyle.bgc,L&&(this.setFontStyle(d,c.activeStyle.font),d.style.backgroundColor=c.activeStyle.bgc),f.style.marginTop=this.mUtils.getNewPxH(i.top)+"px",f.style.marginLeft=this.mUtils.getNewPxW(i.left)+"px",this.setFontStyle(f,i.inactiveStyle.font),f.style.backgroundColor=i.inactiveStyle.bgc,P&&(this.setFontStyle(f,i.activeStyle.font),f.style.backgroundColor=i.activeStyle.bgc)})},startTransform(e){e.style.width="100%",e.style.borderWidth="1px",e.style.color=this.widgetInfo.config.lineStyle.activeStyle.fillColor,e.style.borderColor=this.widgetInfo.config.lineStyle.activeStyle.fillColor},endTransform(e){e.style.width="0%",e.style.borderWidth="0px",e.style.color=this.widgetInfo.config.lineStyle.inactiveStyle.fillColor,e.style.borderColor=this.widgetInfo.config.lineStyle.inactiveStyle.fillColor},setFontStyle(e,t){e.style.fontSize=this.mUtils.getNewFontSize(t.fontSize)+"px",e.style.fontFamily=t.fontFamily,e.style.color=t.color,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.textAlign=t.horizontalAlignment,e.style.textDecoration=t.textDecoration},getTimelist(e,t,c){let i=e.time,o=e.content,l,r;this.$$lib__.each(t,(a,d)=>{a==i&&(l=d),a==o&&(r=d)}),this.list=[],l!=null&&this.$$lib__.each(c,a=>{let d={time:l!=null?a[l]:"",content:r!=null?a[r]:""};this.list.push(d)})},run(e){let t=this,c=t.active;this.timmer=window.setInterval(()=>{t.active<t.list.length-1?t.active+=1:(t.active=0,e.config.global.loop||(t.active=c,window.clearInterval(t.timmer))),t.$nextTick(()=>{let o=t.$refs.comDatePicker.childNodes[0].childNodes;o.length>0&&t.getLineStyle(o)});let i=e.action.sendOut.actionList;for(let o=0;o<i.length;o++)i[o].code=="change"&&i[o].enabled&&t.onChange(t.active)},e.config.global.interval*1e3)},initAction(e){this.actionReceive(e)},onChange(e){let t=this;t.active=e,t.$nextTick(()=>{let i=t.$refs.comDatePicker.childNodes[0].childNodes;i.length>0&&t.getLineStyle(i)});let c=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(c,i=>{if(i.enabled){if(i.code==t.$$global_editor.actionType.change.code){let o=t.$$global_editor.actionType.change.code+"_"+t.widgetInfo.id,l={time:t.list[e].time};if(i.paramsExtend&&i.paramsExtend.length>0){let r=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(r=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[e]),this.getExtendParams(l,i.paramsExtend,r,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(x.log("Execute script for "+i.name+" component to "+i.script.title+" component"),i.script.content==""){b.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",i.script.content),l=this.customScript_actionSend_clickParam(l)}g.Z.$emit(o,l),i.postMessage&&this.doPostMessage(l),this.actionNameList.push(o)}else if(i.code==t.$$global_editor.actionType.click.code){let o=t.$$global_editor.actionType.click.code+"_"+t.widgetInfo.id,l={time:this.list[e].time};if(i.paramsExtend&&i.paramsExtend.length>0){let r=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(r=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[e]),this.getExtendParams(l,i.paramsExtend,r,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(x.log("Execute script for "+i.name+" component to "+i.script.title+" component"),i.script.content==""){b.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",i.script.content),l=this.customScript_actionSend_clickParam(l)}g.Z.$emit(o,l),this.actionNameList.push(o),i.postMessage&&this.doPostMessage(l)}}})}},beforeDestroy(){window.clearInterval(this.timmer)}},T=F,$=s(68141),z=(0,$.Z)(T,S,h,!1,null,"e8c2f6a6",null),_=z.exports}}]);
