"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[6399],{44513:function(j,T,h){h.d(T,{Z:function(){return I}});var L=function(){var _=this,v=_._self._c;return _.attr.buttonHide?v("div",{style:{position:"absolute",right:_.attr.buttonHideRight+"px",top:_.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(S){return _.onHide()}}},[_.openTooltip?v("el-tooltip",{attrs:{"open-delay":1e3,content:_.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[v("el-button",{class:_.attr.buttonHideIconClass&&_.attr.buttonHideIconClass!=""?_.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:_.attr.buttonHideColor,fontSize:_.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):v("el-button",{class:_.attr.buttonHideIconClass&&_.attr.buttonHideIconClass!=""?_.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:_.attr.buttonHideColor,fontSize:_.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):_._e()},k=[],C=h(52246),y={props:["attr"],name:"hide-button",data(){return{isPc:C.b}},computed:{openTooltip:function(){let c=!1,_=this.attr.buttonHideTooltipContent;return C.b&&_&&_!=null&&_.trim()!=""&&(c=!0),c}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},M=y,w=h(68141),P=(0,w.Z)(M,L,k,!1,null,"bf399b9a",null),I=P.exports},57922:function(j,T,h){var L=h(98776),k=h(32450),C=h(2073),y=h(13811),M=h(51154),w=h(3873),P=h(59225),I=h(21145),c=h(62256),_=h(4889),v=h(22683),S=h(7522),R=h(13798),U=h(99994),B=h(44727),Z=h(72449),W=h(2487),x=h(92249),N=h(10516),H=h(82571),F=h(90583),G=h(7115),K=h(66884),A=function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),o={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},E={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},O=function(l){A(r,l);function r(t,e){var i=l.call(this,t)||this;return i.feature=e,i}return r}(k.ZP),b=function(l){A(r,l);function r(t){var e=this,i=t;i.stopDown||(i.stopDown=x.Dv),e=l.call(this,i)||this,e.on,e.once,e.un,e.shouldHandle_=!1,e.downPx_=null,e.downTimeout_,e.lastDragTime_,e.pointerType_,e.freehand_=!1,e.source_=t.source?t.source:null,e.features_=t.features?t.features:null,e.snapTolerance_=t.snapTolerance?t.snapTolerance:12,e.type_=t.type,e.mode_=Y(e.type_),e.stopClick_=!!t.stopClick,e.minPoints_=t.minPoints?t.minPoints:e.mode_===o.POLYGON?3:2,e.maxPoints_=e.mode_===o.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,e.finishCondition_=t.finishCondition?t.finishCondition:x.uX,e.geometryLayout_=t.geometryLayout?t.geometryLayout:M.Z.XY;var s=t.geometryFunction;if(!s){var n=e.mode_;if(n===o.CIRCLE)s=function(u,d,f){var g=d||new L.Z([NaN,NaN]),p=(0,F.fromUserCoordinate)(u[0],f),D=(0,K.bI)(p,(0,F.fromUserCoordinate)(u[u.length-1],f));g.setCenterAndRadius(p,Math.sqrt(D),this.geometryLayout_);var m=(0,F.getUserProjection)();return m&&g.transform(f,m),g};else{var a;n===o.POINT?a=R.Z:n===o.LINE_STRING?a=P.Z:n===o.POLYGON&&(a=B.ZP),s=function(u,d,f){return d?n===o.POLYGON?u[0].length?d.setCoordinates([u[0].concat([u[0][0]])],this.geometryLayout_):d.setCoordinates([],this.geometryLayout_):d.setCoordinates(u,this.geometryLayout_):d=new a(u,this.geometryLayout_),d}}}return e.geometryFunction_=s,e.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,e.finishCoordinate_=null,e.sketchFeature_=null,e.sketchPoint_=null,e.sketchCoords_=null,e.sketchLine_=null,e.sketchLineCoords_=null,e.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,e.overlay_=new Z.default({source:new W.default({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:V(),updateWhileInteracting:!0}),e.geometryName_=t.geometryName,e.condition_=t.condition?t.condition:N.rM,e.freehandCondition_,t.freehand?e.freehandCondition_=N.Bx:e.freehandCondition_=t.freehandCondition?t.freehandCondition:N.vY,e.addChangeListener(w.Z.ACTIVE,e.updateState_),e}return r.prototype.setMap=function(t){l.prototype.setMap.call(this,t),this.updateState_()},r.prototype.getOverlay=function(){return this.overlay_},r.prototype.handleEvent=function(t){t.originalEvent.type===C.Z.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==o.POINT&&this.freehandCondition_(t);var e=t.type===c.Z.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===c.Z.POINTERDRAG){var s=Date.now();s-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===c.Z.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===c.Z.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===c.Z.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===c.Z.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===c.Z.DBLCLICK&&(i=!1),l.prototype.handleEvent.call(this,t)&&i},r.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new I.Z(c.Z.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},r.prototype.handleUpEvent=function(t){var e=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===o.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.preventDefault(),e},r.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,s=e[0]-i[0],n=e[1]-i[1],a=s*s+n*n;if(this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},r.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,s=[this.finishCoordinate_],n=this.mode_;if(n===o.POINT)e=!0;else if(n===o.CIRCLE)e=this.sketchCoords_.length===2;else if(n===o.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(n===o.POLYGON){var a=this.sketchCoords_;i=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]]}if(i)for(var u=this.getMap(),d=0,f=s.length;d<f;d++){var g=s[d],p=u.getPixelFromCoordinate(g),D=t[0]-p[0],m=t[1]-p[1],z=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(D*D+m*m)<=z,e){this.finishCoordinate_=g;break}}}return e},r.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new y.Z(new R.Z(t)),this.updateSketchFeatures_();else{var e=this.sketchPoint_.getGeometry();e.setCoordinates(t)}},r.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new y.Z);var e=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new P.Z(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))},r.prototype.startDrawing_=function(t){for(var e=this.getMap().getView().getProjection(),i=(0,G.tP)(this.geometryLayout_);t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_===o.POINT?this.sketchCoords_=t.slice():this.mode_===o.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new y.Z(new P.Z(this.sketchLineCoords_)));var s=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new y.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new O(E.DRAWSTART,this.sketchFeature_))},r.prototype.modifyDrawing_=function(t){for(var e=this.getMap(),i=this.sketchFeature_.getGeometry(),s=e.getView().getProjection(),n=(0,G.tP)(this.geometryLayout_),a,u;t.length<n;)t.push(0);if(this.mode_===o.POINT?u=this.sketchCoords_:this.mode_===o.POLYGON?(a=this.sketchCoords_[0],u=a[a.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(a=this.sketchCoords_,u=a[a.length-1]),u[0]=t[0],u[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,s),this.sketchPoint_){var d=this.sketchPoint_.getGeometry();d.setCoordinates(t)}if(i.getType()==="Polygon"&&this.mode_!==o.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var f=this.sketchLine_.getGeometry();f.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},r.prototype.addToDrawing_=function(t){var e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),s,n,a=this.mode_;a===o.LINE_STRING||a===o.CIRCLE?(this.finishCoordinate_=t.slice(),n=this.sketchCoords_,n.length>=this.maxPoints_&&(this.freehand_?n.pop():s=!0),n.push(t.slice()),this.geometryFunction_(n,e,i)):a===o.POLYGON&&(n=this.sketchCoords_[0],n.length>=this.maxPoints_&&(this.freehand_?n.pop():s=!0),n.push(t.slice()),s&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()},r.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),e=this.getMap().getView().getProjection(),i,s=this.mode_;if(s===o.LINE_STRING||s===o.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var n=this.finishCoordinate_.slice();i[i.length-1]=n,this.createOrUpdateSketchPoint_(n)}this.geometryFunction_(i,t,e),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(s===o.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var a=this.sketchLine_.getGeometry();if(i.length>=2){var n=i[i.length-2].slice();i[i.length-1]=n,this.createOrUpdateSketchPoint_(n)}a.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,e)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},r.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),s=this.getMap().getView().getProjection();this.mode_===o.LINE_STRING?(e.pop(),this.geometryFunction_(e,i,s)):this.mode_===o.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i,s),e=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new v.Z([e])):this.type_==="MultiLineString"?t.setGeometry(new _.Z([e])):this.type_==="MultiPolygon"&&t.setGeometry(new S.Z([e])),this.dispatchEvent(new O(E.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},r.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},r.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new O(E.DRAWABORT,t))},r.prototype.appendCoordinates=function(t){var e=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);var s;if(e===o.LINE_STRING||e===o.CIRCLE)s=this.sketchCoords_;else if(e===o.POLYGON)s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&s.shift(),s.pop();for(var n=0;n<t.length;n++)this.addToDrawing_(t[n]);var a=t[t.length-1];this.addToDrawing_(a),this.modifyDrawing_(a)},r.prototype.extend=function(t){var e=t.getGeometry(),i=e;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new y.Z(new R.Z(s)),this.updateSketchFeatures_(),this.dispatchEvent(new O(E.DRAWSTART,this.sketchFeature_))},r.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},r.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)},r}(U.Z);function V(){var l=(0,H.Ly)();return function(r,t){return l[r.getGeometry().getType()]}}function X(l,r){return function(t,e,i){var s=fromUserCoordinate(t[0],i),n=fromUserCoordinate(t[t.length-1],i),a=Math.sqrt(squaredCoordinateDistance(s,n)),u=e||fromCircle(new Circle(s),l),d=r;if(!r&&r!==0){var f=n[0]-s[0],g=n[1]-s[1];d=Math.atan2(g,f)}makeRegular(u,s,a,d);var p=getUserProjection();return p&&u.transform(i,p),u}}function $(){return function(l,r,t){var e=boundingExtent([l[0],l[l.length-1]].map(function(a){return fromUserCoordinate(a,t)})),i=[[getBottomLeft(e),getBottomRight(e),getTopRight(e),getTopLeft(e),getBottomLeft(e)]],s=r;s?s.setCoordinates(i):s=new Polygon(i);var n=getUserProjection();return n&&s.transform(t,n),s}}function Y(l){switch(l){case"Point":case"MultiPoint":return o.POINT;case"LineString":case"MultiLineString":return o.LINE_STRING;case"Polygon":case"MultiPolygon":return o.POLYGON;case"Circle":return o.CIRCLE;default:throw new Error("Invalid type: "+l)}}T.ZP=b}}]);
