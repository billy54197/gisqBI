"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[2019],{42019:function(f,s,n){n.r(s),n.d(s,{default:function(){return y}});var l=function(){var e=this,r=e._self._c;return e.preview_condition_enable==!0?r("span",[r("br"),e._v(" "+e._s(e.preview_condition.label)+" "),e._l(e.tags,function(t){return r("el-tag",{key:t.field,style:e.tagStyle(),attrs:{type:e.preview_condition.type,closable:e.preview_condition.closable,"disable-transitions":!e.preview_condition.disable_transitions,hit:e.preview_condition.hit,color:e.preview_condition.color,size:e.preview_condition.size,effect:e.preview_condition.effect},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t.label)+" ")])})],2):e._e()},o=[],u=n(79876),d=n(48836),c=n(27966),_={name:"preview-condition-value",mixins:[u.G],data(){return{tags:[]}},computed:{...(0,d.Se)(["enumInfoFun","datasetInfoFun"]),enumInfo(){return this.enumInfoFun(this.widgetId)},datasetInfo(){return this.datasetInfoFun(this.widgetId)},preview_condition_enable(){return this.queryConfig.base.preview_condition_enable},preview_condition(){return this.queryConfig.base.preview_condition?this.queryConfig.base.preview_condition:{}}},created(){c.Z.$on("busPreviewConditionValue"+(this.widgetId?"_"+this.widgetId:""),()=>{this.getTags()})},methods:{handleClose(i){this.$emit("clearConditionValue",i.field)},getTags(){if(this.preview_condition_enable==!0){this.tags=[];for(let i in this.requestBody.keyValue){let e=this.requestBody.keyValue[i];e!=null&&e.length>0&&this.tags.push(this.getTag(i,e))}}},getTag(i,e){let r={field:i,value:e,label:i+":"+e},t=this.$$lib__.find(this.queryConfig.condition,a=>a.field==i);if(t){let a='"'+e+'"';switch(t.control_type){case this.global_query.control_type.select.code:a=this.getLabelArray(t.attributes.multiple,t,e);break;case this.global_query.control_type.selectTree.code:a=this.getLabelArray(t.attributes.show_checkbox,t,e);break;case this.global_query.control_type.cascader.code:a=this.getLabelArray(t.attributes.multiple,t,e);break;case this.global_query.control_type.radio.code:a=this.getLabelArray(!1,t,e);break;case this.global_query.control_type.checkbox.code:a=this.getLabelArray(!0,t,e);break;case this.global_query.control_type.cascaderXzq.code:t.attributes.display_mode==this.$$global_query.xzq_display_mode.cascader.code&&t.attributes.multiple==!0?a='["'+this.$$lib__.map(e,p=>this.getXzq(p)).join('","')+'"]':a='"'+this.getXzq(e)+'"';break;case this.global_query.control_type.datePicker.code:t.attributes&&t.attributes.type&&t.attributes.type.indexOf("range")>-1&&(a='["'+e.join('","')+'"]');break;case this.global_query.control_type.switch.code:e==t.attributes.active_value?a=t.attributes.active_text:e==t.attributes.inactive_value&&(a=t.attributes.inactive_text);break}r.label=t.label+"\uFF1A"+a}return r},getLabelArray(i,e,r){return i==!0?'["'+this.$$lib__.map(r,a=>this.getLabel(e,a)).join('","')+'"]':'"'+this.getLabel(e,r)+'"'},getLabel(i,e){let r=this.getEnumList(i),t=this.$$lib__.find(r,a=>a.enumValue==e);return t?t.enumName:e},getXzq(i){let e=this.enumInfo.enumJson[this.$$global_query.globalConstantKey.field_enum.system_region_enum_key],r=this.$$lib__.find(e,t=>t.xzqCode==i);return r?r.xzqName:i},getEnumList(i){let e=[];if(i.control_enum_type==this.$$global_query.enum_type.data_set.code)i.guid!=""&&i.data_set.dataSetId!=""&&this.$$lib__.each(this.datasetInfo.datasetJson[i.data_set.dataSetId+"_"+i.guid],r=>{r.enumValue=r[i.data_set.field_value],r.enumName=r[i.data_set.field_name],e.push(r)});else{let r=this.enumInfo.enumJson[i.control_enum_name];r&&(e=JSON.parse(JSON.stringify(r)),e=this.$$lib__.sortBy(e,"enumOrder"))}return e},tagStyle(){let i={};return this.preview_condition.marginRight&&(i.marginRight=this.preview_condition.marginRight+"px"),i}}},h=_,b=n(68141),g=(0,b.Z)(h,l,o,!1,null,"5550ef26",null),y=g.exports}}]);
