"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[8018],{56279:function(k,h,n){n.d(h,{P:function(){return d}});var u=n(86892),a=n(49500);const d={mixins:[u.D],created(){},methods:{lifecycleBeforeChartsLoad(r){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&a.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),a.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let f=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[r]);if(f)return f}return r},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&a.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),a.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},44513:function(k,h,n){n.d(h,{Z:function(){return m}});var u=function(){var o=this,g=o._self._c;return o.attr.buttonHide?g("div",{style:{position:"absolute",right:o.attr.buttonHideRight+"px",top:o.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(w){return o.onHide()}}},[o.openTooltip?g("el-tooltip",{attrs:{"open-delay":1e3,content:o.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[g("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):g("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):o._e()},a=[],d=n(52246),r={props:["attr"],name:"hide-button",data(){return{isPc:d.b}},computed:{openTooltip:function(){let y=!1,o=this.attr.buttonHideTooltipContent;return d.b&&o&&o!=null&&o.trim()!=""&&(y=!0),y}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},b=r,f=n(68141),p=(0,f.Z)(b,u,a,!1,null,"bf399b9a",null),m=p.exports},38018:function(k,h,n){n.r(h),n.d(h,{default:function(){return H}});var u=function(){var t=this,l=t._self._c;return l("div",{style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:"auto"}},[l("hide-button",{attrs:{attr:t.widgetInfo.attr}}),l("div",{staticClass:"my-checkbox-group",style:t.setStyleInfo(t.widgetInfo.config.global)},[l("el-checkbox-group",{ref:"checkboxGroup",attrs:{size:"mini",min:t.widgetInfo.config.min,max:t.widgetInfo.config.checkAll?void 0:t.widgetInfo.config.max,"text-color":t.widgetInfo.config.checkedStyle.textColor,fill:t.widgetInfo.config.checkedStyle.fill},on:{change:t.changecheckboxGroup},model:{value:t.checkedValues,callback:function(s){t.checkedValues=s},expression:"checkedValues"}},[t.widgetInfo.config.button?l("div",[l("el-checkbox-button",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.config.checkAll,expression:"widgetInfo.config.checkAll"}],class:t.checkAll?"is-checked":"",attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(s){t.checkAll=s},expression:"checkAll"}},[t._v("\u5168\u9009 ")]),t._l(t.checkboxInfo,function(s,i){return l("el-tooltip",{key:i,attrs:{disabled:t.setDisabled(s.label),content:s.label,placement:"top",effect:t.widgetInfo.config.global.effect}},[l("el-checkbox-button",{attrs:{label:s.value,disabled:s.disabled}},[t._v(" "+t._s(s.label)+" "),l("div",{directives:[{name:"show",rawName:"v-show",value:t.checkedValues.indexOf(s.value)>-1,expression:"checkedValues.indexOf(checkbox.value) > -1"}],staticClass:"tangle-check",style:{borderTop:`solid ${t.widgetInfo.config.checkedStyle.checkMark.height/2}px transparent`,borderLeft:`solid ${t.widgetInfo.config.checkedStyle.checkMark.width/2}px transparent`,borderBottom:`solid ${t.widgetInfo.config.checkedStyle.checkMark.height/2}px ${t.widgetInfo.config.checkedStyle.checkMark.background}`,borderRight:`solid ${t.widgetInfo.config.checkedStyle.checkMark.width/2}px ${t.widgetInfo.config.checkedStyle.checkMark.background}`}}),l("i",{directives:[{name:"show",rawName:"v-show",value:t.checkedValues.indexOf(s.value)>-1,expression:"checkedValues.indexOf(checkbox.value) > -1"}],staticClass:"el-icon-check check-mark",style:{fontSize:t.widgetInfo.config.checkedStyle.checkMark.fontSize+"px",color:t.widgetInfo.config.checkedStyle.checkMark.color}})])],1)})],2):l("div",[l("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.config.checkAll,expression:"widgetInfo.config.checkAll"}],class:t.checkAll?"is-checked":"",style:t.setBoxStyle(t.widgetInfo.config),attrs:{border:t.widgetInfo.config.border,indeterminate:t.isIndeterminate,id:"check_All"},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(s){t.checkAll=s},expression:"checkAll"}},[t._v("\u5168\u9009 ")]),t._l(t.checkboxInfo,function(s,i){return l("el-tooltip",{key:i,attrs:{disabled:t.setDisabled(s.label),content:s.label,placement:"top",effect:t.widgetInfo.config.global.effect}},[l("el-checkbox",{style:t.setBoxStyle(t.widgetInfo.config),attrs:{border:t.widgetInfo.config.border,label:s.value,disabled:s.disabled}},[t._v(" "+t._s(s.label)+" ")])],1)})],2)])],1)],1)},a=[],d=n(21300),r=n(27966),b=n(44513),f=n(45061),p=n(26711),m=n(56279),y=n(38430),o=n(55616),g=n(67157);const w={mixins:[g.c],data(){return{config_extend:{config:{border:!0,style:{checkboxColor:"#DCDFE5"},checkedStyle:{checkboxColor:"#4C84FF"},checkAll:!1,button:!1},dataset:{static:{defaultValue:"sh"}}},filter_config:{style:{fill:"#ffffff",textColor:"#616999",borderColor:"#DCDFE5",checkboxColor:"#DCDFE5",fontStyle:{fontFamily:"alibabaPuHuiTiRegular"}},checkedStyle:{fill:"#ffffff",textColor:"#4C84FF",borderColor:"#4C84FF",checkboxColor:"#4C84FF",fontStyle:{fontFamily:"alibabaPuHuiTiRegular"},checkMark:{background:"#76b0ec",color:"#ffffff"}}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var I=n(49500),S={props:["widgetInfo"],name:"checkbox-group",components:{HideButton:b.Z},mixins:[y.u,f.u,p.H,m.P,w],data(){return{checkAll:!1,isIndeterminate:!1,lib_:this.$$lib__,checkedValues:[],checkboxInfo:[],options:[]}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},updated(){if(this.checkAll){let e=document.querySelector("#check_All");e&&e.className.indexOf("is-checked")>-1&&e.childNodes[0].classList.add("is-checked")}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(e){this.getListInfo(e.dataset[e.dataset.type]),setTimeout(()=>{this.setStyle(this.widgetInfo.config)},1),this.lifecycleAfterLoad()},reLoadInfo(e){this.loadInfo(e)},getListInfo(e){this.checkboxInfo=[],e.defaultValue?this.checkedValues=e.defaultValue.split(","):this.checkedValues=[],this.options.length=0,this.lib_.each(e.source,t=>{let l=this.getFieldVal(t,e.dimensions,e.encode.value),s=this.getFieldVal(t,e.dimensions,e.encode.label),i=this.getFieldVal(t,e.dimensions,e.encode.disabled);this.options.push(l),this.checkboxInfo.push({value:l,label:s,disabled:d.stringToBoolean(i)})}),this.checkedValues.length>0&&this.checkedValues.length<this.options.length?(this.isIndeterminate=!0,this.checkAll=!1):this.checkedValues.length>=this.options.length?(this.isIndeterminate=!1,this.checkAll=!0):(this.isIndeterminate=!1,this.checkAll=!1)},handleCheckAllChange(e){let t=this.checkboxInfo.length,l=[];for(let s=0;s<t;s++)this.checkboxInfo[s].disabled||l.push(this.options[s]);this.checkedValues=e?l:[],this.isIndeterminate=!1,setTimeout(()=>{this.setStyle(this.widgetInfo.config)},1)},changecheckboxGroup(e){let t=e.length;this.checkAll=t===this.options.length,this.isIndeterminate=t>0&&t<this.options.length,this.onClick(),setTimeout(()=>{this.setStyle(this.widgetInfo.config)},1)},initAction(e){this.actionReceive(e)},setStyle(e){if(!e&&!e.style&&!e.checkedStyle)return;let t=this.$refs.checkboxGroup;if(t.$el.childNodes&&t.$el.childNodes.length>0&&t.$el.childNodes[0].childNodes){let l=t.$el.childNodes[0].childNodes;this.$$lib__.each(l,s=>{if(s.className.indexOf("el-checkbox-button")>-1){let i=s.getElementsByClassName("el-checkbox-button__inner");i[0].style.textAlign=e.global.textAlign,e.setWH?(e.sizeWidth&&(i[0].style.width=this.mUtils.getNewPxW(e.sizeWidth)+"px"),e.sizeHeight&&(i[0].style.height=this.mUtils.getNewPxH(e.sizeHeight)+"px",i[0].style.lineHeight=this.mUtils.getNewPxH(e.sizeHeight)+"px",i[0].style.padding="0  "+this.mUtils.getNewPxW(5)+"px")):(i[0].style.width="auto",i[0].style.height="auto",i[0].style.lineHeight="normal",i[0].style.padding=this.mUtils.getNewPxH(7)+"px "+this.mUtils.getNewPxW(15)+"px");let c=l[1].getElementsByClassName("el-checkbox-button__inner");if(e.checkAll?(c[0].style.borderLeftStyle="none",c[0].style.borderRadius="0"):(c[0].style.borderWidth="1px",c[0].style.borderStyle="solid",c[0].style.borderRadius="4px 0 0 4px"),e.global.margin.left)i[0].style.marginLeft=this.mUtils.getNewPxW(e.global.margin.left)+"px",i[0].style.borderWidth="1px",i[0].style.borderStyle="solid",i[0].style.borderRadius="4px",c[0].style.borderWidth="1px",c[0].style.borderStyle="solid",c[0].style.borderRadius="4px";else{let x=l[0].getElementsByClassName("el-checkbox-button__inner"),_=l[l.length-1].getElementsByClassName("el-checkbox-button__inner");i[0].style.marginLeft="0",i[0].style.borderRadius="0",i[0].style.borderLeftStyle="none",x[0].style.borderLeftStyle="solid",x[0].style.borderRadius="4px 0 0 4px",_[0].style.borderRadius=" 0 4px 4px 0"}i[0].style.marginTop=this.mUtils.getNewPxH(e.global.margin.top)+"px",s.className.indexOf("is-checked")>-1?(this.setLabelStyle(i[0],e.checkedStyle),i[0].style.backgroundImage=this.getImageUrl(e.checkedStyle.backgroundImage),i[0].style.backgroundSize=e.checkedStyle.backgroundSize):(this.setLabelStyle(i[0],e.style),i[0].style.backgroundImage=this.getImageUrl(e.style.backgroundImage),i[0].style.backgroundSize=e.style.backgroundSize)}else{let i=s.getElementsByClassName("el-checkbox__inner"),c=s.getElementsByClassName("el-checkbox__label");e.setWH&&e.sizeWidth?(i[0].style.marginBottom=this.mUtils.getNewPxH((e.sizeHeight-5)/2)+"px",c[0].style.maxWidth=this.mUtils.getNewPxW(e.sizeWidth-30)+"px",c[0].style.overflow="hidden",s.style.padding="0 "+this.mUtils.getNewPxW(5)+"px"):(i[0].style.marginBottom=0,c[0].style.maxWidth="none",s.style.padding=this.mUtils.getNewPxH(5)+"px "+this.mUtils.getNewPxW(10)+"px",c[0].style.overflow="visible"),s.className.indexOf("is-checked")>-1?(this.setLabelStyle(s,e.checkedStyle),c[0].style.color=e.checkedStyle.textColor,i[0].style.borderColor=e.checkedStyle.checkboxColor,i[0].style.backgroundColor=e.checkedStyle.textColor):(this.setLabelStyle(s,e.style),c[0].style.color=e.style.textColor,i[0].style.borderColor=e.style.checkboxColor,i[0].style.backgroundColor=e.style.fill,s.getElementsByClassName("el-checkbox__input")[0].className.indexOf("is-indeterminate")>-1&&(i[0].style.backgroundColor=e.checkedStyle.textColor))}})}},setStyleInfo(e){return{paddingTop:this.mUtils.getNewPxH(e.padding.top)+"px",paddingLeft:this.mUtils.getNewPxW(e.padding.left)+"px"}},setBoxStyle(e){let t={textAlign:e.global.textAlign,marginTop:this.mUtils.getNewPxH(e.global.margin.top)+"px",marginLeft:this.mUtils.getNewPxW(e.global.margin.left)+"px"};return e.setWH&&(e.sizeWidth&&(t.width=this.mUtils.getNewPxW(e.sizeWidth)+"px"),e.sizeHeight&&(t.height=this.mUtils.getNewPxH(e.sizeHeight)+"px",t.lineHeight=this.mUtils.getNewPxH(e.sizeHeight)+"px")),t},setDisabled(e){return!(this.widgetInfo.config.setWH&&e.length*this.widgetInfo.config.style.fontStyle.fontSize>this.widgetInfo.config.sizeWidth-30)},setLabelStyle(e,t){if(e.style.borderColor=t.borderColor,e.style.color=t.textColor,e.style.backgroundColor=t.fill,e.style.fontFamily=t.fontStyle.fontFamily,e.style.fontWeight=t.fontStyle.fontWeight,e.style.fontStyle=t.fontStyle.fontStyle,e.style.textDecoration=t.fontStyle.textDecoration,e.style.fontSize=this.mUtils.getNewFontSize(t.fontStyle.fontSize)+"px",e.childNodes[1]&&e.childNodes[1].className=="el-checkbox__label"){let l=e.childNodes[1];l.style.textDecoration=t.fontStyle.textDecoration,l.style.paddingLeft=this.mUtils.getNewPxW(10)+"px"}},onClick(){let e=this,t=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(t,l=>{if(l.enabled&&l.code==e.$$global_editor.actionType.click.code){let s=l.code+"_"+e.widgetInfo.id,i={value:this.checkedValues,options:this.options};if(l.paramsExtend&&l.paramsExtend.length>0&&this.getExtendParams(i,l.paramsExtend,this.getSelectSource(this.checkedValues[0]),e.widgetInfo.dataset[e.widgetInfo.dataset.type].dimensions),i=JSON.parse(JSON.stringify(i)),l.script&&l.script.enabled){if(I.log("Execute script for "+e.widgetInfo.name+" component to "+l.name+" component"),l.script.content==""){o.Message.warning({message:l.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",l.script.content),i=this.customScript_actionSend_clickParam(i)}r.Z.$emit(s,i),this.actionNameList.push(s),l.postMessage&&this.doPostMessage(i)}})},getSelectSource(e){let t=-1,l=this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions;for(let i=0;i<l.length;i++)l[i]==this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.value&&(t=i);let s=this.$$lib__.find(this.widgetInfo.dataset[this.widgetInfo.dataset.type].source,i=>i[t]==e);return s||[]},getImageUrl(e){if(e&&e!="")return"url("+d.appendImageBaseURL(e)+")"},getValue(){return this.checkedValues}}},v=S,C=n(68141),N=(0,C.Z)(v,u,a,!1,null,"257c63b1",null),H=N.exports}}]);
