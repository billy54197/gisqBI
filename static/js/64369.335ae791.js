"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[64369],{664369:function(W,o,r){r.r(o),r.d(o,{default:function(){return x}});var d=function(){var e=this,t=e._self._c;return t("div",[t("el-collapse",[t("el-collapse-item",{attrs:{title:"\u6807\u7B7E\u9879"}},[t("div",{staticStyle:{"text-align":"right","margin-right":"20px"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u6807\u7B7E\u9879",effect:"dark",placement:"top"}},[t("el-button",{staticStyle:{color:"#2af606","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text",icon:"el-icon-plus"},on:{click:e.addItem}})],1)],1),e._l(e.currentWidget.config.tabBarItems,function(n,s){return t("el-collapse-item",{key:s,staticStyle:{"margin-left":"10px"},attrs:{title:n.label}},[t("el-form",{attrs:{size:"mini","label-width":"80px",model:n}},[t("el-form-item",{attrs:{label:"\u6807\u8BC6"}},[t("el-input",{on:{change:e.getConfigData},model:{value:n.name,callback:function(a){e.$set(n,"name",a)},expression:"tabBarItem.name"}}),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u6807\u7B7E\u9879",effect:"dark",placement:"top"}},[t("el-button",{staticStyle:{color:"#f6061b","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deleteItem(s)}}})],1)],1),t("el-form-item",{attrs:{label:"\u540D\u79F0"}},[t("el-input",{on:{change:e.getConfigData},model:{value:n.label,callback:function(a){e.$set(n,"label",a)},expression:"tabBarItem.label"}})],1),t("el-form-item",{attrs:{label:"\u5730\u5740"}},[t("el-input",{attrs:{autosize:{minRows:3,maxRows:7},type:"textarea"},on:{change:function(a){return e.urlChange(n)}},model:{value:n.url,callback:function(a){e.$set(n,"url",a)},expression:"tabBarItem.url"}})],1),e._l(n.encode,function(a,C){return t("el-collapse-item",{key:C,attrs:{title:"\u53C2\u6570\u540D: "+a.key}},[t("el-form-item",{attrs:{label:"\u53C2\u6570\u503C\u7C7B\u578B"}},[t("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"\u8BF7\u9009\u62E9\u53C2\u6570\u503C\u7C7B\u578B"},on:{change:function(i){return e.typeChange(a)}},model:{value:a.type,callback:function(i){e.$set(a,"type",i)},expression:"parmaItem.type"}},e._l(e.globalEditor.iframeUrlParamsTypeList,function(i){return t("el-option",{key:i.value,attrs:{disabled:i.value===e.globalEditor.iframeUrlParamsType.dataSet.code,label:i.label,value:i.value}})}),1)],1),a.type===e.globalEditor.iframeUrlParamsType.static.code?t("el-form-item",{attrs:{label:"\u56FA\u5B9A\u503C"}},[t("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"\u8F93\u5165\u56FA\u5B9A\u503C"},on:{change:e.getConfigData},model:{value:a.value,callback:function(i){e.$set(a,"value",i)},expression:"parmaItem.value"}})],1):a.type==e.globalEditor.iframeUrlParamsType.globalParams.code?t("el-form-item",{attrs:{label:"\u5168\u5C40\u53D8\u91CF"}},[t("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"\u8BF7\u9009\u62E9\u5168\u5C40\u53D8\u91CF\u53C2\u6570\u540D"},on:{change:e.getConfigData},model:{value:a.value,callback:function(i){e.$set(a,"value",i)},expression:"parmaItem.value"}},e._l(e.globalParamsList,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1):e._e()],1)}),t("el-form-item",{attrs:{label:"\u56FE\u6807\u9009\u62E9"}},[t("el-icon",{attrs:{icon:n.icon},on:{"on-icon-change":function(a){return e.onIconChange(a,n)}}})],1)],2)],1)})],2),t("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.badge.open,expression:"currentWidget.config.badge.open"}],attrs:{title:"\u5FBD\u6807\u6570\u636E"}},[t("vue-lazy-component",[t("el-form",{ref:"form",attrs:{size:"mini","label-width":"120px","label-position":"right",model:e.currentWidget.dataset}},[t("el-form-item",{attrs:{label:"\u6570\u636E\u7C7B\u578B"}},[t("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"},on:{change:e.changeDatasetType},model:{value:e.currentWidget.dataset.type,callback:function(n){e.$set(e.currentWidget.dataset,"type",n)},expression:"currentWidget.dataset.type"}},e._l(e.$$global_editor.dataSourcTypeList,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1),e._l(e.currentWidget.config.tabBarItems,function(n,s){return t("el-form-item",{key:s,attrs:{label:`\u7B2C${s+1}\u9875\u6620\u5C04\u5B57\u6BB5`}},[t("el-select",{attrs:{size:"mini",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E\u6587\u672C\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode[`page${s+1}`],callback:function(a){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,`page${s+1}`,a)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode[`page${index + 1}`]"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(a){return t("el-option",{key:a.name,attrs:{label:a.alias!==""?a.alias:a.name,value:a.name}})}),1)],1)}),t("setting-dataset",{ref:"settingDataset",attrs:{currentWidget:e.currentWidget},on:{getDataSetData:e.getConfigData,clearDynamicEncode:e.clearDynamicEncode}})],2)],1)],1)],1)],1)},g=[],u=r(589908),p=r(723400),m=r(521007),c=r(42160),f=r(148836),h={name:"navigation-tabbar-data",props:["currentWidget"],components:{SettingDataset:u.Z,ElIcon:m.Z},data(){return{newParam:null,globalEditor:this.$$global_editor}},mixins:[p.j],computed:{...(0,f.Se)(["getCanvasSetting"]),globalParamsList:function(){let l=this,e=[];return l.getCanvasSetting&&l.getCanvasSetting.data&&l.getCanvasSetting.data.globalParams&&l.getCanvasSetting.data.globalParams.paramsValue&&l.getCanvasSetting.data.globalParams.paramsValue.length>0&&l.$$lib__.each(l.getCanvasSetting.data.globalParams.paramsValue,t=>{e.push({value:t.paramName,label:t.paramName})}),e}},methods:{changeDatasetType(){this.$refs.settingDataset.loadPreview(),this.getConfigData()},clearDynamicEncode(){Object.keys(this.currentWidget.dataset[this.currentWidget.dataset.type].encode).forEach(l=>{this.currentWidget.dataset[this.currentWidget.dataset.type].encode[l]=""})},typeChange(l){l.value="",this.getConfigData()},urlChange(l){l.encode=this.getUrlParams(l),this.getConfigData()},getUrlParams(l){let e=l.url.match(/\${([^}])*}/g);return e?e.map(t=>({key:t.split("{")[1].split("}")[0],type:"",value:""})):[]},addParam(){this.newParam&&this.newParam!==""&&c.default.set(this.currentWidget.dataset.params.param,this.newParam,null)},deleteParam(l){c.default.delete(this.currentWidget.dataset.params.param,l)},addItem(){this.currentWidget.config.tabBarItems.push({name:"newPage",label:"\u65B0\u9875",url:"https://www.baidu.com",icon:"el-icon-close"}),this.getConfigData()},deleteItem(l){this.currentWidget.config.tabBarItems.splice(l,1),this.getConfigData()},onIconChange(l,e){e.icon=l,this.getConfigData()}}},v=h,b=r(768141),y=(0,b.Z)(v,d,g,!1,null,"2d7b15da",null),x=y.exports}}]);
