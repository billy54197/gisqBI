"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[31375],{56279:function(_,m,d){d.d(m,{P:function(){return p}});var g=d(386892),b=d(149500);const p={mixins:[g.D],created(){},methods:{lifecycleBeforeChartsLoad(t){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&b.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),b.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let l=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[t]);if(l)return l}return t},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&b.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),b.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},483577:function(_,m,d){d.d(m,{i:function(){return p}});var g=d(148836),b=d(927966);const p={created(){},computed:{...(0,g.Se)(["getCurrentWidget","getKeydown","getSelectMultiple","getMultipleWidget","getWidgets"])},methods:{...(0,g.nv)(["setCurrentWidget","setCurrentWidgetXYWHR","setActiveScreen","removeMultipleWidget","addMultipleWidget","setSelectMultiple","clearMultipleWidget"]),reLoadInfo(t){this.widgetInfo.id!=t.id&&this.$refs["comp_"+t.id]&&setTimeout(()=>{this.$refs["comp_"+t.id][0].reLoadInfo(t),this.$refs["comp_frame_"+t.id][0].initSvg()},500),this.loadInfo(t)},orgWidget(t,i){let l=[];return this.$$lib__.each(t,n=>{for(let c=0;c<this.widgetArr.length;c++){let f=this.widgetArr[c];f.parentId==this.widgetInfo.id&&f.id==n.id&&(!i||i(f))&&l.push(JSON.parse(JSON.stringify(f)))}}),l},setTitleText(t,i){i?this.$$lib__.each(i,l=>{this.$$lib__.each(this.orgWidget(l.widgets,n=>!n.title.hide&&n.title.text),n=>{n.attr.widgetW||(n.attr.widgetW=n.attr.w),this.$refs["title_"+n.id]&&this.$refs["title_"+n.id][0]&&(this.$refs["title_"+n.id][0].innerHTML=this.initTextPosition(n)),n.title.position||(n.title.position="top")})}):this.$$lib__.each(this.orgWidget(t,l=>!l.title.hide&&l.title.text),l=>{this.$refs["title_"+l.id]&&this.$refs["title_"+l.id][0]&&(this.$refs["title_"+l.id][0].innerHTML=this.initTextPosition(l)),l.title.position||(l.title.position="top")})},initTextPosition(t){return t.title.text===void 0||!t.title.text?"":t.title.text&&(t.title.position==="left"||t.title.position==="right")?t.title.text.split("").join("<br />"):t.title.text},onActive(t){return this.getSelectMultiple?this.getMultipleWidget[t.id]!=null:t.id===this.getCurrentWidget.id},onClicked(t){if(t&&t.currentTarget){let i=t.currentTarget.id;if(i&&i.indexOf(this.prefix.widget)>-1){let l=i.substr(this.prefix.widget.length);if(l!=this.getCurrentWidget.id){this.setActiveScreen(!1),this.setCurrentWidget(l);let n=this.$$lib__.keys(this.getMultipleWidget);this.getKeydown.ctrlKey?(this.setSelectMultiple(!0),this.getMultipleWidget[l]?this.removeMultipleWidget(l):this.addMultipleWidget(l)):this.getMultipleWidget[l]==null?(this.setSelectMultiple(!1),this.clearMultipleWidget(),this.addMultipleWidget(l)):n&&n.length==1&&(this.setSelectMultiple(!1),this.setCurrentWidget(n[0]),this.clearMultipleWidget(),this.addMultipleWidget(n[0]))}b.Z.$emit("autoScrollIntoViewWidgetTree",l)}}},onMouseEnter(t){this.onWidgetLayerMouseOver("push",t)},onMouseLeave(t){this.onWidgetLayerMouseOver("pop",t)},onWidgetLayerMouseOver(t,i){if(i&&i.currentTarget){let l=i.currentTarget.id;if(l&&l.indexOf(this.prefix.widget)>-1){let n=l.substr(this.prefix.widget.length);n&&n!=this.getCurrentWidget.id&&this.getMultipleWidget[n]==null&&t=="push"&&this.widget_layer_mouse_over.push(n),t=="pop"&&(this.widget_layer_mouse_over=this.$$lib__.without(this.widget_layer_mouse_over,n))}}},onDragstop(t,i){let l=this.getCurrentWidget.attr;l&&(l.x!=t||l.y!=i)&&this.setCurrentWidgetXYWHR({x:t,y:i})},dragging(t,i,l,n){if(this.getSelectMultiple){let c=this.getCurrentWidget.attr;c&&(c.x!=t||c.y!=i)&&this.setCurrentWidgetXYWHR({x:t,y:i})}},onResizstop(t,i,l,n){this.setCurrentWidgetXYWHR({x:t,y:i,w:l,h:n})},onRotatestop(t){this.setCurrentWidgetXYWHR({r:t})},getdraggableHW(t){let i={h:t.attr.h,w:t.attr.w?t.attr.widgetW:t.attr.w};return t.border.hide!=!0&&(t.border.type==!1?(t.border.widthT&&t.border.styleT&&t.border.styleT!=="none"&&(i.h=i.h+t.border.widthT),t.border.widthB&&t.border.styleB&&t.border.styleB!=="none"&&(i.h=i.h+t.border.widthB),t.border.widthR&&t.border.styleR&&t.border.styleR!=="none"&&(i.w=i.w+t.border.widthR),t.border.widthL&&t.border.styleL&&t.border.styleL!=="none"&&(i.w=i.w+t.border.widthL)):t.border.type==!0&&(t.border.breadthT&&t.border.borderStyle&&t.border.borderStyle!=="none"&&(i.h=i.h+t.border.breadthT),t.border.breadthB&&t.border.borderStyle&&t.border.borderStyle!=="none"&&(i.h=i.h+t.border.breadthB),t.border.breadthR&&t.border.borderStyle&&t.border.borderStyle!=="none"&&(i.w=i.w+t.border.breadthR),t.border.breadthL&&t.border.borderStyle&&t.border.borderStyle!=="none"&&(i.w=i.w+t.border.breadthL))),i},getDraggableStyle(t){let i={};return!t.isContainer&&!t.attr.pointerEvents&&(i.pointerEvents="none",t.id===this.getCurrentWidget.id&&(i.backgroundColor="rgba(236, 240, 241, 1)",i.filter="Alpha(Opacity=50)")),typeof t.attr.opacity=="number"&&(i.opacity=t.attr.opacity),t.attr.backgroundColor&&(i.backgroundColor=t.attr.backgroundColor),t.attr.backgroundImage&&(i.backgroundImage=this.getImageUrl(t.attr.backgroundImage)),t.attr.backgroundSize&&(i.backgroundSize=t.attr.backgroundSize),i.overflow=t.border.overflowShow?"hidden":"visible",t.border.hide!=!0&&((t.border.hShadow||t.border.vShadow)&&(i.boxShadow=(t.border.hShadow||0)+"px "+(t.border.vShadow||0)+"px "+(t.border.blur||0)+"px "+t.border.blurColor||"rgba(0,0,0,0)"),t.border.type==!1?(i.borderTopWidth=t.border.widthT+"px",i.borderRightWidth=t.border.widthR+"px",i.borderBottomWidth=t.border.widthB+"px",i.borderLeftWidth=t.border.widthL+"px",i.borderTopStyle=t.border.styleT,i.borderRightStyle=t.border.styleR,i.borderBottomStyle=t.border.styleB,i.borderLeftStyle=t.border.styleL,i.borderTopColor=t.border.colorT,i.borderRightColor=t.border.colorR,i.borderBottomColor=t.border.colorB,i.borderLeftColor=t.border.colorL,i.borderTopLeftRadius=t.border.radiusTL+"px",i.borderTopRightRadius=t.border.radiusTR+"px",i.borderBottomLeftRadius=t.border.radiusBL+"px",i.borderBottomRightRadius=t.border.radiusBR+"px"):t.border.type==!0&&(i.borderStyle=t.border.borderStyle,i.borderTopWidth=t.border.breadthT+"px",i.borderRightWidth=t.border.breadthR+"px",i.borderBottomWidth=t.border.breadthB+"px",i.borderLeftWidth=t.border.breadthL+"px",i.borderImageSource=this.getImageUrl(t.border.borderImage),i.borderImageSlice=t.border.cutT+" "+t.border.cutR+" "+t.border.cutB+" "+t.border.cutL,i.borderImageRepeat=t.border.repeat)),i.float="left !important",i}}}},752246:function(_,m,d){d.d(m,{X:function(){return g},b:function(){return b}});let g={versions:function(){var p=navigator.userAgent;return{trident:p.indexOf("Trident")>-1,presto:p.indexOf("Presto")>-1,webKit:p.indexOf("AppleWebKit")>-1,gecko:p.indexOf("Gecko")>-1&&p.indexOf("KHTML")==-1,mobile:!!p.match(/AppleWebKit.*Mobile.*/),ios:!!p.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:p.indexOf("Android")>-1,iPhone:p.indexOf("iPhone")>-1,iPad:p.indexOf("iPad")>-1,webApp:p.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},b;g.versions.mobile||g.versions.ios||g.versions.android||g.versions.iPhone||g.versions.iPad?b=!1:b=!0},459738:function(_,m,d){d.d(m,{OW:function(){return b},m3:function(){return l},nm:function(){return p},vP:function(){return t},xC:function(){return i}});var g=d(153258);function b(n,c,f){let a=n;const h=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(y=>(0,g.mf)(a[y]));if(!(0,g.mf)(a[h]))return!1;do{if(a[h](c))return!0;if(a===f)return!1;a=a.parentNode}while(a);return!1}function p(n){const c=window.getComputedStyle(n);return[parseFloat(c.getPropertyValue("width"),10),parseFloat(c.getPropertyValue("height"),10)]}function t(n,c,f){n&&(n.attachEvent?n.attachEvent("on"+c,f):n.addEventListener?n.addEventListener(c,f,!0):n["on"+c]=f)}function i(n,c,f){n&&(n.detachEvent?n.detachEvent("on"+c,f):n.removeEventListener?n.removeEventListener(c,f,!0):n["on"+c]=null)}function l(n,c,f,a){var h=0,y=setInterval(()=>{h<f?(h++,n()):(clearInterval(y),a&&a())},c);return y}},980512:function(_,m,d){d.d(m,{Z:function(){return f}});var g=function(){var h=this,y=h._self._c;return y("div",{class:"container_child_"+h.widgetData.id,attrs:{id:"container_child_"+h.widgetData.id}},[y("keep-alive",[y(h.isView&&h.widgetData.isContainer?h.widgetData.typeName+"-view":h.widgetData.typeName,{ref:"com_"+h.widgetData.id,tag:"component",attrs:{"widget-info":h.widgetData,"widget-arr":h.getWidgetAllArr,"current-widget":h.currentWidget},on:{doGetPreviewData:h.doGetPreviewData,doReSetBoardId:h.doReSetBoardId,attrChange:h.attrChange}})],1)],1)},b=[],p=d(513229),t=d(148836),i={name:"DraggableComponent",extends:p.Z,computed:{...(0,t.Se)(["getWidgetAllArr","isView"])},methods:{reLoadInfo(a){if(a.id){let h=this.$refs["com_"+a.id];h&&h.reLoadInfo(a)}},doReSetBoardId(a){this.$emit("doReSetBoardId",a)},attrChange(a){this.$emit("attrChange",a)}}},l=i,n=d(768141),c=(0,n.Z)(l,g,b,!1,null,"41d16aa2",null),f=c.exports},844513:function(_,m,d){d.d(m,{Z:function(){return c}});var g=function(){var a=this,h=a._self._c;return a.attr.buttonHide?h("div",{style:{position:"absolute",right:a.attr.buttonHideRight+"px",top:a.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(y){return a.onHide()}}},[a.openTooltip?h("el-tooltip",{attrs:{"open-delay":1e3,content:a.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[h("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):h("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a._e()},b=[],p=d(752246),t={props:["attr"],name:"hide-button",data(){return{isPc:p.b}},computed:{openTooltip:function(){let f=!1,a=this.attr.buttonHideTooltipContent;return p.b&&a&&a!=null&&a.trim()!=""&&(f=!0),f}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},i=t,l=d(768141),n=(0,l.Z)(i,g,b,!1,null,"bf399b9a",null),c=n.exports},461823:function(_,m,d){d.r(m),d.d(m,{default:function(){return R}});var g=function(){var e=this,o=e._self._c;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px",overflow:"auto"}},[o("hide-button",{attrs:{attr:e.widgetInfo.attr}}),e.widgetInfo.config.global.type=="base"?o("el-collapse",{staticClass:"collapse-container",on:{change:e.handleChange},model:{value:e.activeName,callback:function(s){e.activeName=s},expression:"activeName"}},e._l(e.widgetInfo.config.collapseList,function(s,v){return o("el-collapse-item",{key:v,ref:"collapseItem",refInFor:!0,style:e.style[v],attrs:{title:s.label,disabled:s.disabled,name:v}},[o("template",{slot:"title"},[s.iconImg?e._e():o("i",{class:s.iconClass,style:{color:s.iconColor,fontSize:s.iconSize+"px",marginRight:s.iconRight+"px"}}),s.iconImg?o("img",{style:{width:s.imgWidth+"px",height:s.imgHeight+"px",marginRight:s.imgRight+"px"},attrs:{src:e.getImageSrc(s.iconImg)}}):e._e(),e._v(" "+e._s(s.label)+" ")]),e._l(e.orgWidget(s.widgets),function(r){return o("draggable",{directives:[{name:"show",rawName:"v-show",value:r.attr.hideEditor!==!0,expression:"widget.attr.hideEditor !== true"}],key:e.prefix.widget+r.id,ref:e.prefix.widget+r.id,refInFor:!0,attrs:{rotatable:!0,resizable:!r.attr.locked,draggable:!r.attr.locked,snap:!0,id:e.prefix.widget+r.id,x:r.attr.x,y:r.attr.y,z:e.getZ(r),r:r.attr.deg,h:r.attr.h,w:r.attr.widgetW?r.attr.widgetW:r.attr.w,minw:r.attr.minw,minh:r.attr.minh,deselectCancel:".unboardArea",active:e.onActive(r)},on:{onClicked:e.onClicked,dragstop:e.onDragstop,dragging:e.dragging,resizestop:e.onResizstop,rotatestop:e.onRotatestop,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}},[o("widget-action-icon",{attrs:{widget:r}}),o("div",{style:e.getDraggableMouseOver(r)}),o("div",{directives:[{name:"show",rawName:"v-show",value:r.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:e.getDraggableStyle(r)},[o("external-frame-svg",{ref:"comp_frame_"+r.id,refInFor:!0,attrs:{"widget-info":r}}),r.title.position==="top"||r.title.position==="left"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(r),on:{click:function(S){return e.openLink(r)}}},[o("div",{style:{marginLeft:r.title.label.left+"px",marginTop:r.title.label.top+"px"}},[o("span",{ref:"title_"+r.id,refInFor:!0,style:e.getTitleSpanStyle(r)})])]):e._e(),o("draggable-component-container",{ref:"comp_"+r.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:e.getInfoStyle(r),attrs:{widgetData:r,currentWidget:e.getCurrentWidget}}),r.title.position==="bottom"||r.title.position==="right"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(r),on:{click:function(S){return e.openLink(r)}}},[o("div",{style:{marginLeft:r.title.label.left+"px",marginTop:r.title.label.top+"px"}},[o("span",{ref:"title_"+r.id,refInFor:!0,style:e.getTitleSpanStyle(r)})])]):e._e()],1)],1)})],2)}),1):o("el-collapse",{staticClass:"collapse-container",attrs:{accordion:""},on:{change:e.handleChange},model:{value:e.activeName,callback:function(s){e.activeName=s},expression:"activeName"}},e._l(e.widgetInfo.config.collapseList,function(s,v){return o("el-collapse-item",{key:v,ref:"collapseItem",refInFor:!0,style:e.style[v],attrs:{title:s.label,disabled:s.disabled,name:v}},[o("template",{slot:"title"},[s.iconImg?e._e():o("i",{class:s.iconClass,style:{color:s.iconColor,fontSize:s.iconSize+"px",marginRight:s.iconRight+"px"}}),s.iconImg?o("img",{style:{width:s.imgWidth+"px",height:s.imgHeight+"px",marginRight:s.imgRight+"px"},attrs:{src:e.getImageSrc(s.iconImg)}}):e._e(),e._v(" "+e._s(s.label)+" ")]),e._l(e.orgWidget(s.widgets),function(r){return o("draggable",{directives:[{name:"show",rawName:"v-show",value:r.attr.hideEditor!==!0,expression:"widget.attr.hideEditor !== true"}],key:e.prefix.widget+r.id,ref:e.prefix.widget+r.id,refInFor:!0,attrs:{rotatable:!0,resizable:!r.attr.locked,draggable:!r.attr.locked,snap:!0,id:e.prefix.widget+r.id,x:r.attr.x,y:r.attr.y,z:e.getZ(r),r:r.attr.deg,h:r.attr.h,w:r.attr.widgetW,minw:r.attr.minw,minh:r.attr.minh,deselectCancel:".unboardArea",active:e.onActive(r)},on:{onClicked:e.onClicked,dragstop:e.onDragstop,dragging:e.dragging,resizestop:e.onResizstop,rotatestop:e.onRotatestop,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}},[o("widget-action-icon",{attrs:{widget:r}}),o("div",{style:e.getDraggableMouseOver(r)}),o("div",{directives:[{name:"show",rawName:"v-show",value:r.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:e.getDraggableStyle(r)},[o("external-frame-svg",{ref:"comp_frame_"+r.id,refInFor:!0,attrs:{"widget-info":r}}),r.title.position==="top"||r.title.position==="left"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(r),on:{click:function(S){return e.openLink(r)}}},[o("div",{style:{marginLeft:r.title.label.left+"px",marginTop:r.title.label.top+"px"}},[o("span",{ref:"title_"+r.id,refInFor:!0,style:e.getTitleSpanStyle(r)})])]):e._e(),o("draggable-component-container",{ref:"comp_"+r.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:e.getInfoStyle(r),attrs:{widgetData:r,currentWidget:e.getCurrentWidget}}),r.title.position==="bottom"||r.title.position==="right"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(r),on:{click:function(S){return e.openLink(r)}}},[o("div",{style:{marginLeft:r.title.label.left+"px",marginTop:r.title.label.top+"px"}},[o("span",{ref:"title_"+r.id,refInFor:!0,style:e.getTitleSpanStyle(r)})])]):e._e()],1)],1)})],2)}),1)],1)},b=[],p=d(844513),t=d(787479),i=d(980512),l=d(723400),n=d(483577),c=d(321300),f=d(925791),a=d(213743),h=d(67157);const y={mixins:[h.c],data(){return{config_extend:{config:{collapseList:[{titleBg:{backgroundColor:"rgba(186, 206, 251, 0.2)"},contentBg:{backgroundColor:"rgba(242, 246, 252, 1)"},style:{color:"rgba(97, 98, 102, 1)",fontFamily:"alibabaPuHuiTiRegular"}},{titleBg:{backgroundColor:"rgba(186, 206, 251, 0.2)"},contentBg:{backgroundColor:"rgba(242, 246, 252, 1)"},style:{color:"rgba(97, 98, 102, 1)",fontFamily:"alibabaPuHuiTiRegular"}}]}},filter_config:{collapseList:[{titleBg:{backgroundColor:"rgba(186, 206, 251, 0.2)"},contentBg:{backgroundColor:"rgba(242, 246, 252, 1)"},style:{color:"rgba(97, 98, 102, 1)",fontFamily:"alibabaPuHuiTiRegular"}}]}}},methods:{filterPredefineColoursSchemeConfig(u,e){this.getNewConfigWithArrary(u,e,this.filter_config)}}};var I=d(56279),C=d(629466),x={name:"container-collapse",props:["widgetInfo","widgetArr"],components:{WidgetActionIcon:C.Z,ExternalFrameSvg:a.Z,DraggableComponentContainer:i.Z,draggable:t.Z,HideButton:p.Z},mixins:[l.j,n.i,f.baseConfig,y,I.P],data(){return{dataList:[],activeName:[],style:[],handleStatus:!1}},mounted(){this.loadInfo(this.widgetInfo)},computed:{collapseListVal(){return JSON.parse(JSON.stringify(this.widgetInfo.config.collapseList))}},watch:{collapseListVal:{handler(u,e){for(let o=0;o<u.length;o++)for(let s=0;s<e.length;s++)if(u[o].active==e[s].active){this.handleStatus=!1;break}},deep:!0},getCurrentWidget:{deep:!0,handler:function(){this.$nextTick(()=>{this.setTitleText("widgets",this.widgetInfo.config.collapseList)})}}},methods:{loadInfo(u){this.widgetInfo.id==u.id&&(this.initActiveName(u),this.initStyle(u),this.lifecycleAfterLoad())},getImageSrc(u){if(u&&u!="")return c.appendImageBaseURL(u)},initActiveName(u){if(!this.handleStatus)if(u.config.global.type=="base"){this.activeName=[];let e=u.config.collapseList.length;for(let o=0;o<e;o++)u.config.collapseList[o].active&&this.activeName.indexOf(o)==-1&&this.activeName.push(o)}else{typeof this.activeName=="object"&&(this.activeName="");let e=u.config.collapseList.length;for(let o=0;o<e;o++){this.activeName=u.config.collapseList[o].active?o:"";break}}},initStyle(u){let e=this;u.config.collapseList.forEach((o,s)=>{if(e.$refs.collapseItem.length>s){let v=JSON.parse(JSON.stringify(o.titleBg));v.backgroundImage=o.titleBg.backgroundImage?this.getImageUrl(o.titleBg.backgroundImage):"url()";let r=JSON.parse(JSON.stringify(o.contentBg));r.backgroundImage=o.contentBg.backgroundImage?this.getImageUrl(o.contentBg.backgroundImage):"url()",e.$refs.collapseItem[s].$el.firstChild.firstChild.style.display=o.titleShow?"flex":"none",e.$refs.collapseItem[s].$el.lastChild.firstChild.style.height=o.height+"px",e.$refs.collapseItem[s].$el.firstChild.firstChild.lastChild.style.display=o.openIconShow?"inline-block":"none",e.copyJson(e.$refs.collapseItem[s].$el.firstChild.style,v),e.copyJson(e.$refs.collapseItem[s].$el.lastChild.style,r),e.$refs.collapseItem[s].$el.firstChild.firstChild.style.paddingLeft=o.titleLeft+"px"}e.style[s]=JSON.parse(JSON.stringify(o.style)),e.style[s].fontSize=o.style.fontSize?o.style.fontSize+"px":null})},copyJson(u,e){for(let o in e)u[o]=e[o]},getImageUrl(u){if(u&&u!="")return"url("+c.appendImageBaseURL(u)+")"},handleChange(){this.handleStatus=!0}}},L=x,W=d(768141),T=(0,W.Z)(L,g,b,!1,null,"45697636",null),R=T.exports},629466:function(_,m,d){d.d(m,{Z:function(){return n}});var g=function(){var f=this,a=f._self._c;return f.action_info.is_action?a("div",{staticClass:"widget-action-icon"},[a("el-tooltip",{attrs:{"open-delay":1e3,effect:"light",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-table",{attrs:{data:f.action_info.tableData,"span-method":f.objectSpanMethod,border:"",size:"mini",stripe:""}},[a("el-table-column",{attrs:{label:"\u4E8B\u4EF6\u7C7B\u578B",prop:"action_type"}}),a("el-table-column",{attrs:{label:"\u4E8B\u4EF6\u540D\u79F0",prop:"action_name"}})],1)],1),a("i",{staticClass:"iconfont bi_jh"})])],1):f._e()},b=[],p={name:"widget-action-icon",props:["widget"],data(){return{action_info:{is_action:!1,tableData:[]},position:0,rowSpanArr:[]}},watch:{widget:{deep:!0,handler:function(){this.initInfo()}}},mounted(){this.initInfo()},methods:{initInfo(){if(this.action_info.is_action=!1,this.action_info.tableData=[],this.widget&&this.widget.action){if(this.widget.action.lifecycle)for(let c in this.widget.action.lifecycle)this.widget.action.lifecycle[c].enabled&&(this.action_info.is_action=!0,this.action_info.tableData.push({action_type:"\u751F\u547D\u5468\u671F",action_name:this.widget.action.lifecycle[c].name}));if(this.widget.action.sendOut&&this.widget.action.sendOut.actionList&&this.$$lib__.each(this.widget.action.sendOut.actionList,c=>{c.enabled==!0&&(this.action_info.is_action=!0,this.action_info.tableData.push({action_type:"\u53D1\u9001\u4E8B\u4EF6",action_name:c.name}))}),this.widget.action.receive)for(let c in this.widget.action.receive)this.widget.action.receive[c].enabled&&(this.action_info.is_action=!0,this.action_info.tableData.push({action_type:"\u63A5\u6536\u4E8B\u4EF6",action_name:this.widget.action.receive[c].name}))}this.rowSpanArr=[],this.action_info.tableData.forEach((c,f)=>{f==0?(this.rowSpanArr.push(1),this.position=0):this.action_info.tableData[f].action_type==this.action_info.tableData[f-1].action_type?(this.rowSpanArr[this.position]+=1,this.rowSpanArr.push(0),this.action_info.tableData[f].action_type=this.action_info.tableData[f-1].action_type):(this.rowSpanArr.push(1),this.position=f)})},objectSpanMethod({row:c,column:f,rowIndex:a,columnIndex:h}){if(h!=1)return{rowspan:this.rowSpanArr[a],colspan:1}}}},t=p,i=d(768141),l=(0,i.Z)(t,g,b,!1,null,"cd1e86ee",null),n=l.exports}}]);
