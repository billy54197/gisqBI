"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[12768],{426374:function(Lt,q){var c=function(){function b(U,$,Y){this.decay_=U,this.minVelocity_=$,this.delay_=Y,this.points_=[],this.angle_=0,this.initialVelocity_=0}return b.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},b.prototype.update=function(U,$){this.points_.push(U,$,Date.now())},b.prototype.end=function(){if(this.points_.length<6)return!1;var U=Date.now()-this.delay_,$=this.points_.length-3;if(this.points_[$+2]<U)return!1;for(var Y=$-3;Y>0&&this.points_[Y+2]>U;)Y-=3;var st=this.points_[$+2]-this.points_[Y+2];if(st<16.666666666666668)return!1;var F=this.points_[$]-this.points_[Y],w=this.points_[$+1]-this.points_[Y+1];return this.angle_=Math.atan2(w,F),this.initialVelocity_=Math.sqrt(F*F+w*w)/st,this.initialVelocity_>this.minVelocity_},b.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},b.prototype.getAngle=function(){return this.angle_},b}();q.Z=c},612768:function(Lt,q,c){c.r(q),c.d(q,{DoubleClickZoom:function(){return F},DragAndDrop:function(){return jt},DragBox:function(){return pt},DragPan:function(){return lt},DragRotate:function(){return K},DragRotateAndZoom:function(){return vt},DragZoom:function(){return ct},Draw:function(){return Gt.default},Extent:function(){return ce},Interaction:function(){return U.default},KeyboardPan:function(){return o},KeyboardZoom:function(){return _},Modify:function(){return _e.default},MouseWheelZoom:function(){return A},PinchRotate:function(){return B},PinchZoom:function(){return _t},Pointer:function(){return w.default},Select:function(){return ve.default},Snap:function(){return xe},Translate:function(){return Ce},defaults:function(){return Te}});var b=c(10257),U=c(655878),$=c(290086),Y=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),st=function(a){Y(r,a);function r(e){var t=a.call(this)||this,n=e||{};return t.delta_=n.delta?n.delta:1,t.duration_=n.duration!==void 0?n.duration:250,t}return r.prototype.handleEvent=function(e){var t=!1;if(e.type==$.Z.DBLCLICK){var n=e.originalEvent,i=e.map,u=e.coordinate,h=n.shiftKey?-this.delta_:this.delta_,f=i.getView();(0,U.zoomByDelta)(f,h,u,this.duration_),n.preventDefault(),t=!0}return!t},r}(U.default),F=st,w=c(724101),Z=c(561280),R=c(708326),ut=c(333917),N=c(209399),mt=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ot=function(a){mt(r,a);function r(e){var t=a.call(this,{stopDown:Z.FALSE})||this,n=e||{};t.kinetic_=n.kinetic,t.lastCentroid=null,t.lastPointersCount_,t.panning_=!1;var i=n.condition?n.condition:(0,R.all)(R.noModifierKeys,R.primaryAction);return t.condition_=n.onFocusOnly?(0,R.all)(R.focusWithTabindex,i):i,t.noKinetic_=!1,t}return r.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var t=this.targetPointers,n=(0,w.centroid)(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var i=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],u=e.map,h=u.getView();(0,N.bA)(i,h.getResolution()),(0,N.U1)(i,h.getRotation()),h.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()},r.prototype.handleUpEvent=function(e){var t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),u=this.kinetic_.getAngle(),h=n.getCenterInternal(),f=t.getPixelFromCoordinateInternal(h),P=t.getCoordinateFromPixelInternal([f[0]-i*Math.cos(u),f[1]-i*Math.sin(u)]);n.animateInternal({center:n.getConstrainedCenter(P),duration:500,easing:ut.easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},r.prototype.handleDownEvent=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var t=e.map,n=t.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},r}(w.default),lt=Ot,H=c(466689),J=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Dt=function(a){J(r,a);function r(e){var t=this,n=e||{};return t=a.call(this,{stopDown:Z.FALSE})||this,t.condition_=n.condition?n.condition:R.altShiftKeysOnly,t.lastAngle_=void 0,t.duration_=n.duration!==void 0?n.duration:250,t}return r.prototype.handleDragEvent=function(e){if((0,R.mouseOnly)(e)){var t=e.map,n=t.getView();if(n.getConstraints().rotation!==H.h$){var i=t.getSize(),u=e.pixel,h=Math.atan2(i[1]/2-u[1],u[0]-i[0]/2);if(this.lastAngle_!==void 0){var f=h-this.lastAngle_;n.adjustRotationInternal(-f)}this.lastAngle_=h}}},r.prototype.handleUpEvent=function(e){if(!(0,R.mouseOnly)(e))return!0;var t=e.map,n=t.getView();return n.endInteraction(this.duration_),!1},r.prototype.handleDownEvent=function(e){if(!(0,R.mouseOnly)(e))return!1;if((0,R.mouseActionButton)(e)&&this.condition_(e)){var t=e.map;return t.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},r}(w.default),K=Dt,I=c(12207),v=c(799917),y=c(54896),M=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),j=function(a){M(r,a);function r(e){var t=a.call(this)||this;return t.geometry_=null,t.element_=document.createElement("div"),t.element_.style.position="absolute",t.element_.style.pointerEvents="auto",t.element_.className="ol-box "+e,t.map_=null,t.startPixel_=null,t.endPixel_=null,t}return r.prototype.disposeInternal=function(){this.setMap(null)},r.prototype.render_=function(){var e=this.startPixel_,t=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+n,i.top=Math.min(e[1],t[1])+n,i.width=Math.abs(t[0]-e[0])+n,i.height=Math.abs(t[1]-e[1])+n},r.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},r.prototype.setPixels=function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()},r.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]],i=n.map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new y.default([i])},r.prototype.getGeometry=function(){return this.geometry_},r}(v.Z),z=j,ft=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),X={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},tt=function(a){ft(r,a);function r(e,t,n){var i=a.call(this,e)||this;return i.coordinate=t,i.mapBrowserEvent=n,i}return r}(I.default),k=function(a){ft(r,a);function r(e){var t=a.call(this)||this;t.on,t.once,t.un;var n=e||{};return t.box_=new z(n.className||"ol-dragbox"),t.minArea_=n.minArea!==void 0?n.minArea:64,n.onBoxEnd&&(t.onBoxEnd=n.onBoxEnd),t.startPixel_=null,t.condition_=n.condition?n.condition:R.mouseActionButton,t.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:t.defaultBoxEndCondition,t}return r.prototype.defaultBoxEndCondition=function(e,t,n){var i=n[0]-t[0],u=n[1]-t[1];return i*i+u*u>=this.minArea_},r.prototype.getGeometry=function(){return this.box_.getGeometry()},r.prototype.handleDragEvent=function(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new tt(X.BOXDRAG,e.coordinate,e))},r.prototype.handleUpEvent=function(e){this.box_.setMap(null);var t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new tt(t?X.BOXEND:X.BOXCANCEL,e.coordinate,e)),!1},r.prototype.handleDownEvent=function(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new tt(X.BOXSTART,e.coordinate,e)),!0):!1},r.prototype.onBoxEnd=function(e){},r}(w.default),pt=k,gt=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),yt=function(a){gt(r,a);function r(e){var t=this,n=e||{},i=n.condition?n.condition:R.shiftKeyOnly;return t=a.call(this,{condition:i,className:n.className||"ol-dragzoom",minArea:n.minArea})||this,t.duration_=n.duration!==void 0?n.duration:200,t.out_=n.out!==void 0?n.out:!1,t}return r.prototype.onBoxEnd=function(e){var t=this.getMap(),n=t.getView(),i=this.getGeometry();if(this.out_){var u=n.rotatedExtentForGeometry(i),h=n.getResolutionForExtentInternal(u),f=n.getResolution()/h;i=i.clone(),i.scale(f*f)}n.fitInternal(i,{duration:this.duration_,easing:ut.easeOut})},r}(pt),ct=yt,V=c(588298),L={LEFT:37,UP:38,RIGHT:39,DOWN:40},x=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),s=function(a){x(r,a);function r(e){var t=a.call(this)||this,n=e||{};return t.defaultCondition_=function(i){return(0,R.noModifierKeys)(i)&&(0,R.targetNotEditable)(i)},t.condition_=n.condition!==void 0?n.condition:t.defaultCondition_,t.duration_=n.duration!==void 0?n.duration:100,t.pixelDelta_=n.pixelDelta!==void 0?n.pixelDelta:128,t}return r.prototype.handleEvent=function(e){var t=!1;if(e.type==V.Z.KEYDOWN){var n=e.originalEvent,i=n.keyCode;if(this.condition_(e)&&(i==L.DOWN||i==L.LEFT||i==L.RIGHT||i==L.UP)){var u=e.map,h=u.getView(),f=h.getResolution()*this.pixelDelta_,P=0,C=0;i==L.DOWN?C=-f:i==L.LEFT?P=-f:i==L.RIGHT?P=f:C=f;var D=[P,C];(0,N.U1)(D,h.getRotation()),(0,U.pan)(h,D,this.duration_),n.preventDefault(),t=!0}}return!t},r}(U.default),o=s,d=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),l=function(a){d(r,a);function r(e){var t=a.call(this)||this,n=e||{};return t.condition_=n.condition?n.condition:R.targetNotEditable,t.delta_=n.delta?n.delta:1,t.duration_=n.duration!==void 0?n.duration:100,t}return r.prototype.handleEvent=function(e){var t=!1;if(e.type==V.Z.KEYDOWN||e.type==V.Z.KEYPRESS){var n=e.originalEvent,i=n.charCode;if(this.condition_(e)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var u=e.map,h=i=="+".charCodeAt(0)?this.delta_:-this.delta_,f=u.getView();(0,U.zoomByDelta)(f,h,void 0,this.duration_),n.preventDefault(),t=!0}}return!t},r}(U.default),_=l,p=c(426374),g=c(283953),E=c(423744),m=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),T={TRACKPAD:"trackpad",WHEEL:"wheel"},W=function(a){m(r,a);function r(e){var t=this,n=e||{};t=a.call(this,n)||this,t.totalDelta_=0,t.lastDelta_=0,t.maxDelta_=n.maxDelta!==void 0?n.maxDelta:1,t.duration_=n.duration!==void 0?n.duration:250,t.timeout_=n.timeout!==void 0?n.timeout:80,t.useAnchor_=n.useAnchor!==void 0?n.useAnchor:!0,t.constrainResolution_=n.constrainResolution!==void 0?n.constrainResolution:!1;var i=n.condition?n.condition:R.always;return t.condition_=n.onFocusOnly?(0,R.all)(R.focusWithTabindex,i):i,t.lastAnchor_=null,t.startTime_=void 0,t.timeoutId_,t.mode_=void 0,t.trackpadEventGap_=400,t.trackpadTimeoutId_,t.deltaPerZoom_=300,t}return r.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var e=this.getMap().getView();e.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},r.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var t=e.type;if(t!==V.Z.WHEEL)return!0;var n=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);var u;if(e.type==V.Z.WHEEL&&(u=i.deltaY,g.V&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(u/=g.MP),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(u*=40)),u===0)return!1;this.lastDelta_=u;var h=Date.now();this.startTime_===void 0&&(this.startTime_=h),(!this.mode_||h-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(u)<4?T.TRACKPAD:T.WHEEL);var f=n.getView();if(this.mode_===T.TRACKPAD&&!(f.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(f.getAnimating()&&f.cancelAnimations(),f.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),f.adjustZoom(-u/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=h,!1;this.totalDelta_+=u;var P=Math.max(this.timeout_-(h-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),P),!1},r.prototype.handleWheelZoom_=function(e){var t=e.getView();t.getAnimating()&&t.cancelAnimations();var n=-(0,E.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),(0,U.zoomByDelta)(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},r.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},r}(U.default),A=W,S=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),O=function(a){S(r,a);function r(e){var t=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Z.FALSE),t=a.call(this,i)||this,t.anchor_=null,t.lastAngle_=void 0,t.rotating_=!1,t.rotationDelta_=0,t.threshold_=n.threshold!==void 0?n.threshold:.3,t.duration_=n.duration!==void 0?n.duration:250,t}return r.prototype.handleDragEvent=function(e){var t=0,n=this.targetPointers[0],i=this.targetPointers[1],u=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){var h=u-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=h}this.lastAngle_=u;var f=e.map,P=f.getView();if(P.getConstraints().rotation!==H.h$){var C=f.getViewport().getBoundingClientRect(),D=(0,w.centroid)(this.targetPointers);D[0]-=C.left,D[1]-=C.top,this.anchor_=f.getCoordinateFromPixelInternal(D),this.rotating_&&(f.render(),P.adjustRotationInternal(t,this.anchor_))}},r.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var t=e.map,n=t.getView();return n.endInteraction(this.duration_),!1}else return!0},r.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}else return!1},r}(w.default),B=O,Q=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),rt=function(a){Q(r,a);function r(e){var t=this,n=e||{},i=n;return i.stopDown||(i.stopDown=Z.FALSE),t=a.call(this,i)||this,t.anchor_=null,t.duration_=n.duration!==void 0?n.duration:400,t.lastDistance_=void 0,t.lastScaleDelta_=1,t}return r.prototype.handleDragEvent=function(e){var t=1,n=this.targetPointers[0],i=this.targetPointers[1],u=n.clientX-i.clientX,h=n.clientY-i.clientY,f=Math.sqrt(u*u+h*h);this.lastDistance_!==void 0&&(t=this.lastDistance_/f),this.lastDistance_=f;var P=e.map,C=P.getView();t!=1&&(this.lastScaleDelta_=t);var D=P.getViewport().getBoundingClientRect(),G=(0,w.centroid)(this.targetPointers);G[0]-=D.left,G[1]-=D.top,this.anchor_=P.getCoordinateFromPixelInternal(G),P.render(),C.adjustResolutionInternal(t,this.anchor_)},r.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var t=e.map,n=t.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}else return!0},r.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}else return!1},r}(w.default),_t=rt,Pt=c(963827),it=c(972233),et=c(981143),At=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),wt={ADD_FEATURES:"addfeatures"},Ft=function(a){At(r,a);function r(e,t,n,i){var u=a.call(this,e)||this;return u.features=n,u.file=t,u.projection=i,u}return r}(I.default),Ct=function(a){At(r,a);function r(e){var t=this,n=e||{};t=a.call(this,{handleEvent:Z.TRUE})||this,t.on,t.once,t.un,t.readAsBuffer_=!1,t.formats_=[];for(var i=n.formatConstructors?n.formatConstructors:[],u=0,h=i.length;u<h;++u){var f=i[u];typeof f=="function"&&(f=new f),t.formats_.push(f),t.readAsBuffer_=t.readAsBuffer_||f.getType()===Pt.Z.ARRAY_BUFFER}return t.projection_=n.projection?(0,it.get)(n.projection):null,t.dropListenKeys_=null,t.source_=n.source||null,t.target=n.target?n.target:null,t}return r.prototype.handleResult_=function(e,t){var n=t.target.result,i=this.getMap(),u=this.projection_;if(!u){var h=i.getView();u=h.getProjection()}for(var f,P=this.formats_,C=0,D=P.length;C<D;++C){var G=P[C],ot=n;this.readAsBuffer_&&G.getType()!==Pt.Z.ARRAY_BUFFER&&(f===void 0&&(f=new TextDecoder().decode(n)),ot=f);var nt=this.tryReadFeatures_(G,ot,{featureProjection:u});if(nt&&nt.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(nt)),this.dispatchEvent(new Ft(wt.ADD_FEATURES,e,nt,u));break}}},r.prototype.registerListeners_=function(){var e=this.getMap();if(e){var t=this.target?this.target:e.getViewport();this.dropListenKeys_=[(0,et.oL)(t,V.Z.DROP,this.handleDrop,this),(0,et.oL)(t,V.Z.DRAGENTER,this.handleStop,this),(0,et.oL)(t,V.Z.DRAGOVER,this.handleStop,this),(0,et.oL)(t,V.Z.DROP,this.handleStop,this)]}},r.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),a.prototype.setActive.call(this,e)},r.prototype.setMap=function(e){this.unregisterListeners_(),a.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},r.prototype.tryReadFeatures_=function(e,t,n){try{return e.readFeatures(t,n)}catch{return null}},r.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(et.bN),this.dropListenKeys_=null)},r.prototype.handleDrop=function(e){for(var t=e.dataTransfer.files,n=0,i=t.length;n<i;++n){var u=t.item(n),h=new FileReader;h.addEventListener(V.Z.LOAD,this.handleResult_.bind(this,u)),this.readAsBuffer_?h.readAsArrayBuffer(u):h.readAsText(u)}},r.prototype.handleStop=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},r}(U.default),jt=Ct,Et=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ut=function(a){Et(r,a);function r(e){var t=this,n=e||{};return t=a.call(this,n)||this,t.condition_=n.condition?n.condition:R.shiftKeyOnly,t.lastAngle_=void 0,t.lastMagnitude_=void 0,t.lastScaleDelta_=0,t.duration_=n.duration!==void 0?n.duration:400,t}return r.prototype.handleDragEvent=function(e){if((0,R.mouseOnly)(e)){var t=e.map,n=t.getSize(),i=e.pixel,u=i[0]-n[0]/2,h=n[1]/2-i[1],f=Math.atan2(h,u),P=Math.sqrt(u*u+h*h),C=t.getView();if(this.lastAngle_!==void 0){var D=this.lastAngle_-f;C.adjustRotationInternal(D)}this.lastAngle_=f,this.lastMagnitude_!==void 0&&C.adjustResolutionInternal(this.lastMagnitude_/P),this.lastMagnitude_!==void 0&&(this.lastScaleDelta_=this.lastMagnitude_/P),this.lastMagnitude_=P}},r.prototype.handleUpEvent=function(e){if(!(0,R.mouseOnly)(e))return!0;var t=e.map,n=t.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),this.lastScaleDelta_=0,!1},r.prototype.handleDownEvent=function(e){return(0,R.mouseOnly)(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0):!1},r}(w.default),vt=Ut,Gt=c(765056),dt=c(647598),xt=c(17369),ae=c(223378),Xt=c(505085),zt=c(692405),at=c(692086),bt=c(339211),$t=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),se={EXTENTCHANGED:"extentchanged"},ue=function(a){$t(r,a);function r(e){var t=a.call(this,se.EXTENTCHANGED)||this;return t.extent=e,t}return r}(I.default),le=function(a){$t(r,a);function r(e){var t=this,n=e||{};return t=a.call(this,n)||this,t.on,t.once,t.un,t.condition_=n.condition?n.condition:R.always,t.extent_=null,t.pointerHandler_=null,t.pixelTolerance_=n.pixelTolerance!==void 0?n.pixelTolerance:10,t.snappedToVertex_=!1,t.extentFeature_=null,t.vertexFeature_=null,e||(e={}),t.extentOverlay_=new Xt.default({source:new zt.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:fe(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.vertexOverlay_=new Xt.default({source:new zt.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:de(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&t.setExtent(e.extent),t}return r.prototype.snapToVertex_=function(e,t){var n=t.getCoordinateFromPixelInternal(e),i=function(Mt,St){return(0,N.Bs)(n,Mt)-(0,N.Bs)(n,St)},u=this.getExtentInternal();if(u){var h=he(u);h.sort(i);var f=h[0],P=(0,N.oL)(n,f),C=t.getPixelFromCoordinateInternal(P);if((0,N.TE)(e,C)<=this.pixelTolerance_){var D=t.getPixelFromCoordinateInternal(f[0]),G=t.getPixelFromCoordinateInternal(f[1]),ot=(0,N.bI)(C,D),nt=(0,N.bI)(C,G),Nt=Math.sqrt(Math.min(ot,nt));return this.snappedToVertex_=Nt<=this.pixelTolerance_,this.snappedToVertex_&&(P=ot>nt?f[1]:f[0]),P}}return null},r.prototype.handlePointerMove_=function(e){var t=e.pixel,n=e.map,i=this.snapToVertex_(t,n);i||(i=n.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(i)},r.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;return t?e?t.setGeometry((0,y.fromExtent)(e)):t.setGeometry(void 0):(e?t=new dt.default((0,y.fromExtent)(e)):t=new dt.default({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},r.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;if(!t)t=new dt.default(new ae.default(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t);else{var n=t.getGeometry();n.setCoordinates(e)}return t},r.prototype.handleEvent=function(e){return!e.originalEvent||!this.condition_(e)?!0:(e.type==$.Z.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),a.prototype.handleEvent.call(this,e),!1)},r.prototype.handleDownEvent=function(e){var t=e.pixel,n=e.map,i=this.getExtentInternal(),u=this.snapToVertex_(t,n),h=function(C){var D=null,G=null;return C[0]==i[0]?D=i[2]:C[0]==i[2]&&(D=i[0]),C[1]==i[1]?G=i[3]:C[1]==i[3]&&(G=i[1]),D!==null&&G!==null?[D,G]:null};if(u&&i){var f=u[0]==i[0]||u[0]==i[2]?u[0]:null,P=u[1]==i[1]||u[1]==i[3]?u[1]:null;f!==null&&P!==null?this.pointerHandler_=Jt(h(u)):f!==null?this.pointerHandler_=Qt(h([f,i[1]]),h([f,i[3]])):P!==null&&(this.pointerHandler_=Qt(h([i[0],P]),h([i[2],P])))}else u=n.getCoordinateFromPixelInternal(t),this.setExtent([u[0],u[1],u[0],u[1]]),this.pointerHandler_=Jt(u);return!0},r.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}},r.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return(!t||(0,at.getArea)(t)===0)&&this.setExtent(null),!1},r.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),a.prototype.setMap.call(this,e)},r.prototype.getExtent=function(){return(0,it.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())},r.prototype.getExtentInternal=function(){return this.extent_},r.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new ue(this.extent_))},r}(w.default);function fe(){var a=(0,bt.createEditingStyle)();return function(r,e){return a[xt.default.POLYGON]}}function de(){var a=(0,bt.createEditingStyle)();return function(r,e){return a[xt.default.POINT]}}function Jt(a){return function(r){return(0,at.boundingExtent)([a,r])}}function Qt(a,r){return a[0]==r[0]?function(e){return(0,at.boundingExtent)([a,[e[0],r[1]]])}:a[1]==r[1]?function(e){return(0,at.boundingExtent)([a,[r[0],e[1]]])}:null}function he(a){return[[[a[0],a[1]],[a[0],a[3]]],[[a[0],a[3]],[a[2],a[3]]],[[a[2],a[3]],[a[2],a[1]]],[[a[2],a[1]],[a[0],a[1]]]]}var ce=le,_e=c(986200),ve=c(902981),kt=c(745105),pe=c(232891),qt=c(308429),Vt=c(875907),ge=c(500623),ye=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();function te(a){if(a.feature)return a.feature;if(a.element)return a.element}var Tt=[],Ee=function(a){ye(r,a);function r(e){var t=this,n=e||{},i=n;return i.handleDownEvent||(i.handleDownEvent=Z.TRUE),i.stopDown||(i.stopDown=Z.FALSE),t=a.call(this,i)||this,t.source_=n.source?n.source:null,t.vertex_=n.vertex!==void 0?n.vertex:!0,t.edge_=n.edge!==void 0?n.edge:!0,t.features_=n.features?n.features:null,t.featuresListenerKeys_=[],t.featureChangeListenerKeys_={},t.indexedFeaturesExtents_={},t.pendingFeatures_={},t.pixelTolerance_=n.pixelTolerance!==void 0?n.pixelTolerance:10,t.rBush_=new pe.Z,t.SEGMENT_WRITERS_={Point:t.writePointGeometry_.bind(t),LineString:t.writeLineStringGeometry_.bind(t),LinearRing:t.writeLineStringGeometry_.bind(t),Polygon:t.writePolygonGeometry_.bind(t),MultiPoint:t.writeMultiPointGeometry_.bind(t),MultiLineString:t.writeMultiLineStringGeometry_.bind(t),MultiPolygon:t.writeMultiPolygonGeometry_.bind(t),GeometryCollection:t.writeGeometryCollectionGeometry_.bind(t),Circle:t.writeCircleGeometry_.bind(t)},t}return r.prototype.addFeature=function(e,t){var n=t!==void 0?t:!0,i=(0,Vt.getUid)(e),u=e.getGeometry();if(u){var h=this.SEGMENT_WRITERS_[u.getType()];h&&(this.indexedFeaturesExtents_[i]=u.getExtent((0,at.createEmpty)()),h(e,u))}n&&(this.featureChangeListenerKeys_[i]=(0,et.oL)(e,V.Z.CHANGE,this.handleFeatureChange_,this))},r.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},r.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},r.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},r.prototype.handleEvent=function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),a.prototype.handleEvent.call(this,e)},r.prototype.handleFeatureAdd_=function(e){var t=te(e);this.addFeature(t)},r.prototype.handleFeatureRemove_=function(e){var t=te(e);this.removeFeature(t)},r.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var n=(0,Vt.getUid)(t);n in this.pendingFeatures_||(this.pendingFeatures_[n]=t)}else this.updateFeature_(t)},r.prototype.handleUpEvent=function(e){var t=(0,ge.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},r.prototype.removeFeature=function(e,t){var n=t!==void 0?t:!0,i=(0,Vt.getUid)(e),u=this.indexedFeaturesExtents_[i];if(u){var h=this.rBush_,f=[];h.forEachInExtent(u,function(C){e===C.feature&&f.push(C)});for(var P=f.length-1;P>=0;--P)h.remove(f[P])}n&&((0,et.bN)(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])},r.prototype.setMap=function(e){var t=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();t&&(n.forEach(et.bN),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),a.prototype.setMap.call(this,e),e&&(this.features_?n.push((0,et.oL)(this.features_,kt.default.ADD,this.handleFeatureAdd_,this),(0,et.oL)(this.features_,kt.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push((0,et.oL)(this.source_,qt.Z.ADDFEATURE,this.handleFeatureAdd_,this),(0,et.oL)(this.source_,qt.Z.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},r.prototype.snapTo=function(e,t,n){var i=n.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),u=n.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),h=(0,at.boundingExtent)([i,u]),f=this.rBush_.getInExtent(h);this.vertex_&&!this.edge_&&(f=f.filter(function(Oe){return Oe.feature.getGeometry().getType()!==xt.default.CIRCLE}));var P=!1,C=null,D=null;if(f.length===0)return{snapped:P,vertex:C,vertexPixel:D};for(var G=n.getView().getProjection(),ot=(0,it.fromUserCoordinate)(t,G),nt,Nt=1/0,Mt=0;Mt<f.length;++Mt){var St=f[Mt];Tt[0]=(0,it.fromUserCoordinate)(St.segment[0],G),Tt[1]=(0,it.fromUserCoordinate)(St.segment[1],G);var re=(0,N.Bs)(ot,Tt);re<Nt&&(nt=St,Nt=re)}var ht=nt.segment;if(this.vertex_&&!this.edge_){var Kt=n.getPixelFromCoordinate(ht[0]),Wt=n.getPixelFromCoordinate(ht[1]),Rt=(0,N.bI)(e,Kt),It=(0,N.bI)(e,Wt),Ht=Math.sqrt(Math.min(Rt,It));Ht<=this.pixelTolerance_&&(P=!0,C=Rt>It?ht[1]:ht[0],D=n.getPixelFromCoordinate(C))}else if(this.edge_){var ie=nt.feature.getGeometry().getType()===xt.default.CIRCLE;if(ie){var Yt=nt.feature.getGeometry(),oe=(0,it.getUserProjection)();oe&&(Yt=Yt.clone().transform(oe,G)),C=(0,it.toUserCoordinate)((0,N.Ed)(ot,Yt),G)}else Tt[0]=(0,it.fromUserCoordinate)(ht[0],G),Tt[1]=(0,it.fromUserCoordinate)(ht[1],G),C=(0,it.toUserCoordinate)((0,N.oL)(ot,Tt),G);if(D=n.getPixelFromCoordinate(C),(0,N.TE)(e,D)<=this.pixelTolerance_&&(P=!0,this.vertex_&&!ie)){var Kt=n.getPixelFromCoordinate(ht[0]),Wt=n.getPixelFromCoordinate(ht[1]),Rt=(0,N.bI)(D,Kt),It=(0,N.bI)(D,Wt),Ht=Math.sqrt(Math.min(Rt,It));Ht<=this.pixelTolerance_&&(C=Rt>It?ht[1]:ht[0],D=n.getPixelFromCoordinate(C))}}return P&&(D=[Math.round(D[0]),Math.round(D[1])]),{snapped:P,vertex:C,vertexPixel:D}},r.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},r.prototype.writeCircleGeometry_=function(e,t){var n=this.getMap().getView().getProjection(),i=t,u=(0,it.getUserProjection)();u&&(i=i.clone().transform(u,n));var h=(0,y.fromCircle)(i);u&&h.transform(n,u);for(var f=h.getCoordinates()[0],P=0,C=f.length-1;P<C;++P){var D=f.slice(P,P+2),G={feature:e,segment:D};this.rBush_.insert((0,at.boundingExtent)(D),G)}},r.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var n=t.getGeometriesArray(),i=0;i<n.length;++i){var u=this.SEGMENT_WRITERS_[n[i].getType()];u&&u(e,n[i])}},r.prototype.writeLineStringGeometry_=function(e,t){for(var n=t.getCoordinates(),i=0,u=n.length-1;i<u;++i){var h=n.slice(i,i+2),f={feature:e,segment:h};this.rBush_.insert((0,at.boundingExtent)(h),f)}},r.prototype.writeMultiLineStringGeometry_=function(e,t){for(var n=t.getCoordinates(),i=0,u=n.length;i<u;++i)for(var h=n[i],f=0,P=h.length-1;f<P;++f){var C=h.slice(f,f+2),D={feature:e,segment:C};this.rBush_.insert((0,at.boundingExtent)(C),D)}},r.prototype.writeMultiPointGeometry_=function(e,t){for(var n=t.getCoordinates(),i=0,u=n.length;i<u;++i){var h=n[i],f={feature:e,segment:[h,h]};this.rBush_.insert(t.getExtent(),f)}},r.prototype.writeMultiPolygonGeometry_=function(e,t){for(var n=t.getCoordinates(),i=0,u=n.length;i<u;++i)for(var h=n[i],f=0,P=h.length;f<P;++f)for(var C=h[f],D=0,G=C.length-1;D<G;++D){var ot=C.slice(D,D+2),nt={feature:e,segment:ot};this.rBush_.insert((0,at.boundingExtent)(ot),nt)}},r.prototype.writePointGeometry_=function(e,t){var n=t.getCoordinates(),i={feature:e,segment:[n,n]};this.rBush_.insert(t.getExtent(),i)},r.prototype.writePolygonGeometry_=function(e,t){for(var n=t.getCoordinates(),i=0,u=n.length;i<u;++i)for(var h=n[i],f=0,P=h.length-1;f<P;++f){var C=h.slice(f,f+2),D={feature:e,segment:C};this.rBush_.insert((0,at.boundingExtent)(C),D)}},r}(w.default),xe=Ee,me=c(787914),ee=c(542422),ne=function(){var a=function(r,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},a(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zt={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},Bt=function(a){ne(r,a);function r(e,t,n,i,u){var h=a.call(this,e)||this;return h.features=t,h.coordinate=n,h.startCoordinate=i,h.mapBrowserEvent=u,h}return r}(I.default),Pe=function(a){ne(r,a);function r(e){var t=this,n=e||{};t=a.call(this,n)||this,t.on,t.once,t.un,t.lastCoordinate_=null,t.startCoordinate_=null,t.features_=n.features!==void 0?n.features:null;var i;if(n.layers&&!t.features_)if(typeof n.layers=="function")i=n.layers;else{var u=n.layers;i=function(h){return(0,ee.includes)(u,h)}}else i=Z.TRUE;return t.layerFilter_=i,t.filter_=n.filter&&!t.features_?n.filter:Z.TRUE,t.hitTolerance_=n.hitTolerance?n.hitTolerance:0,t.condition_=n.condition?n.condition:R.always,t.lastFeature_=null,t.addChangeListener(me.default.ACTIVE,t.handleActiveChanged_),t}return r.prototype.handleDownEvent=function(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);var t=this.features_||new b.default([this.lastFeature_]);return this.dispatchEvent(new Bt(Zt.TRANSLATESTART,t,e.coordinate,this.startCoordinate_,e)),!0}return!1},r.prototype.handleUpEvent=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);var t=this.features_||new b.default([this.lastFeature_]);return this.dispatchEvent(new Bt(Zt.TRANSLATEEND,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1},r.prototype.handleDragEvent=function(e){if(this.lastCoordinate_){var t=e.coordinate,n=t[0]-this.lastCoordinate_[0],i=t[1]-this.lastCoordinate_[1],u=this.features_||new b.default([this.lastFeature_]);u.forEach(function(h){var f=h.getGeometry();f.translate(n,i),h.setGeometry(f)}),this.lastCoordinate_=t,this.dispatchEvent(new Bt(Zt.TRANSLATING,u,t,this.startCoordinate_,e))}},r.prototype.handleMoveEvent=function(e){var t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")},r.prototype.featuresAtPixel_=function(e,t){return t.forEachFeatureAtPixel(e,function(n,i){if(this.filter_(n,i)&&(!this.features_||(0,ee.includes)(this.features_.getArray(),n)))return n}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},r.prototype.getHitTolerance=function(){return this.hitTolerance_},r.prototype.setHitTolerance=function(e){this.hitTolerance_=e},r.prototype.setMap=function(e){var t=this.getMap();a.prototype.setMap.call(this,e),this.updateState_(t)},r.prototype.handleActiveChanged_=function(){this.updateState_(null)},r.prototype.updateState_=function(e){var t=this.getMap(),n=this.getActive();if((!t||!n)&&(t=t||e,t)){var i=t.getViewport();i.classList.remove("ol-grab","ol-grabbing")}},r}(w.default),Ce=Pe;function Te(a){var r=a||{},e=new b.default,t=new p.Z(-.005,.05,100),n=r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0;n&&e.push(new K);var i=r.doubleClickZoom!==void 0?r.doubleClickZoom:!0;i&&e.push(new F({delta:r.zoomDelta,duration:r.zoomDuration}));var u=r.dragPan!==void 0?r.dragPan:!0;u&&e.push(new lt({onFocusOnly:r.onFocusOnly,kinetic:t}));var h=r.pinchRotate!==void 0?r.pinchRotate:!0;h&&e.push(new B);var f=r.pinchZoom!==void 0?r.pinchZoom:!0;f&&e.push(new _t({duration:r.zoomDuration}));var P=r.keyboard!==void 0?r.keyboard:!0;P&&(e.push(new o),e.push(new _({delta:r.zoomDelta,duration:r.zoomDuration})));var C=r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0;C&&e.push(new A({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration}));var D=r.shiftDragZoom!==void 0?r.shiftDragZoom:!0;return D&&e.push(new ct({duration:r.zoomDuration})),e}},986200:function(Lt,q,c){c.r(q),c.d(q,{ModifyEvent:function(){return k}});var b=c(10257),U=c(745105),$=c(12207),Y=c(588298),st=c(647598),F=c(17369),w=c(290086),Z=c(223378),R=c(724101),ut=c(232891),N=c(308429),mt=c(505085),Ot=c(692405),lt=c(708326),H=c(692086),J=c(209399),Dt=c(339211),K=c(542422),I=c(54896),v=c(972233),y=c(875907),M=function(){var L=function(x,s){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(o[l]=d[l])},L(x,s)};return function(x,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");L(x,s);function o(){this.constructor=x}x.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}(),j=0,z=1,ft=[0,0,0,0],X=[],tt={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},k=function(L){M(x,L);function x(s,o,d){var l=L.call(this,s)||this;return l.features=o,l.mapBrowserEvent=d,l}return x}($.default),pt=function(L){M(x,L);function x(s){var o=L.call(this,s)||this;o.on,o.once,o.un,o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=s.condition?s.condition:lt.primaryAction,o.defaultDeleteCondition_=function(l){return(0,lt.altKeyOnly)(l)&&(0,lt.singleClick)(l)},o.deleteCondition_=s.deleteCondition?s.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=s.insertVertexCondition?s.insertVertexCondition:lt.always,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.featuresBeingModified_=null,o.rBush_=new ut.Z,o.pixelTolerance_=s.pixelTolerance!==void 0?s.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new mt.default({source:new Ot.default({useSpatialIndex:!1,wrapX:!!s.wrapX}),style:s.style?s.style:V(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,o.hitDetection_=null;var d;if(s.features?d=s.features:s.source&&(o.source_=s.source,d=new b.default(o.source_.getFeatures()),o.source_.addEventListener(N.Z.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(N.Z.REMOVEFEATURE,o.handleSourceRemove_.bind(o))),!d)throw new Error("The modify interaction requires features, a source or a layer");return s.hitDetection&&(o.hitDetection_=s.hitDetection),o.features_=d,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(U.default.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(U.default.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o.delta_=[0,0],o.snapToPointer_=s.snapToPointer===void 0?!o.hitDetection_:s.snapToPointer,o}return x.prototype.addFeature_=function(s){var o=s.getGeometry();if(o){var d=this.SEGMENT_WRITERS_[o.getType()];d&&d(s,o)}var l=this.getMap();l&&l.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,l),s.addEventListener(Y.Z.CHANGE,this.boundHandleFeatureChange_)},x.prototype.willModifyFeatures_=function(s,o){if(!this.featuresBeingModified_){this.featuresBeingModified_=new b.default;for(var d=this.featuresBeingModified_.getArray(),l=0,_=o.length;l<_;++l)for(var p=o[l],g=0,E=p.length;g<E;++g){var m=p[g].feature;m&&d.indexOf(m)===-1&&this.featuresBeingModified_.push(m)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new k(tt.MODIFYSTART,this.featuresBeingModified_,s))}},x.prototype.removeFeature_=function(s){this.removeFeatureSegmentData_(s),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),s.removeEventListener(Y.Z.CHANGE,this.boundHandleFeatureChange_)},x.prototype.removeFeatureSegmentData_=function(s){var o=this.rBush_,d=[];o.forEach(function(g){s===g.feature&&d.push(g)});for(var l=d.length-1;l>=0;--l){for(var _=d[l],p=this.dragSegments_.length-1;p>=0;--p)this.dragSegments_[p][0]===_&&this.dragSegments_.splice(p,1);o.remove(_)}},x.prototype.setActive=function(s){this.vertexFeature_&&!s&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),L.prototype.setActive.call(this,s)},x.prototype.setMap=function(s){this.overlay_.setMap(s),L.prototype.setMap.call(this,s)},x.prototype.getOverlay=function(){return this.overlay_},x.prototype.handleSourceAdd_=function(s){s.feature&&this.features_.push(s.feature)},x.prototype.handleSourceRemove_=function(s){s.feature&&this.features_.remove(s.feature)},x.prototype.handleFeatureAdd_=function(s){this.addFeature_(s.element)},x.prototype.handleFeatureChange_=function(s){if(!this.changingFeature_){var o=s.target;this.removeFeature_(o),this.addFeature_(o)}},x.prototype.handleFeatureRemove_=function(s){var o=s.element;this.removeFeature_(o)},x.prototype.writePointGeometry_=function(s,o){var d=o.getCoordinates(),l={feature:s,geometry:o,segment:[d,d]};this.rBush_.insert(o.getExtent(),l)},x.prototype.writeMultiPointGeometry_=function(s,o){for(var d=o.getCoordinates(),l=0,_=d.length;l<_;++l){var p=d[l],g={feature:s,geometry:o,depth:[l],index:l,segment:[p,p]};this.rBush_.insert(o.getExtent(),g)}},x.prototype.writeLineStringGeometry_=function(s,o){for(var d=o.getCoordinates(),l=0,_=d.length-1;l<_;++l){var p=d.slice(l,l+2),g={feature:s,geometry:o,index:l,segment:p};this.rBush_.insert((0,H.boundingExtent)(p),g)}},x.prototype.writeMultiLineStringGeometry_=function(s,o){for(var d=o.getCoordinates(),l=0,_=d.length;l<_;++l)for(var p=d[l],g=0,E=p.length-1;g<E;++g){var m=p.slice(g,g+2),T={feature:s,geometry:o,depth:[l],index:g,segment:m};this.rBush_.insert((0,H.boundingExtent)(m),T)}},x.prototype.writePolygonGeometry_=function(s,o){for(var d=o.getCoordinates(),l=0,_=d.length;l<_;++l)for(var p=d[l],g=0,E=p.length-1;g<E;++g){var m=p.slice(g,g+2),T={feature:s,geometry:o,depth:[l],index:g,segment:m};this.rBush_.insert((0,H.boundingExtent)(m),T)}},x.prototype.writeMultiPolygonGeometry_=function(s,o){for(var d=o.getCoordinates(),l=0,_=d.length;l<_;++l)for(var p=d[l],g=0,E=p.length;g<E;++g)for(var m=p[g],T=0,W=m.length-1;T<W;++T){var A=m.slice(T,T+2),S={feature:s,geometry:o,depth:[g,l],index:T,segment:A};this.rBush_.insert((0,H.boundingExtent)(A),S)}},x.prototype.writeCircleGeometry_=function(s,o){var d=o.getCenter(),l={feature:s,geometry:o,index:j,segment:[d,d]},_={feature:s,geometry:o,index:z,segment:[d,d]},p=[l,_];l.featureSegments=p,_.featureSegments=p,this.rBush_.insert((0,H.createOrUpdateFromCoordinate)(d),l);var g=o,E=(0,v.getUserProjection)();if(E&&this.getMap()){var m=this.getMap().getView().getProjection();g=g.clone().transform(E,m),g=(0,I.fromCircle)(g).transform(m,E)}this.rBush_.insert(g.getExtent(),_)},x.prototype.writeGeometryCollectionGeometry_=function(s,o){for(var d=o.getGeometriesArray(),l=0;l<d.length;++l){var _=d[l],p=this.SEGMENT_WRITERS_[_.getType()];p(s,_)}},x.prototype.createOrUpdateVertexFeature_=function(s,o,d){var l=this.vertexFeature_;if(!l)l=new st.default(new Z.default(s)),this.vertexFeature_=l,this.overlay_.getSource().addFeature(l);else{var _=l.getGeometry();_.setCoordinates(s)}return l.set("features",o),l.set("geometries",d),l},x.prototype.handleEvent=function(s){if(!s.originalEvent)return!0;this.lastPointerEvent_=s;var o;return!s.map.getView().getInteracting()&&s.type==w.Z.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(s),this.vertexFeature_&&this.deleteCondition_(s)&&(s.type!=w.Z.SINGLECLICK||!this.ignoreNextSingleClick_?o=this.removePoint():o=!0),s.type==w.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),L.prototype.handleEvent.call(this,s)&&!o},x.prototype.handleDragEvent=function(s){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(s,this.dragSegments_);for(var o=[s.coordinate[0]+this.delta_[0],s.coordinate[1]+this.delta_[1]],d=[],l=[],_=0,p=this.dragSegments_.length;_<p;++_){var g=this.dragSegments_[_],E=g[0],m=E.feature;d.indexOf(m)===-1&&d.push(m);var T=E.geometry;l.indexOf(T)===-1&&l.push(T);for(var W=E.depth,A=void 0,S=E.segment,O=g[1];o.length<T.getStride();)o.push(S[O][o.length]);switch(T.getType()){case F.default.POINT:A=o,S[0]=o,S[1]=o;break;case F.default.MULTI_POINT:A=T.getCoordinates(),A[E.index]=o,S[0]=o,S[1]=o;break;case F.default.LINE_STRING:A=T.getCoordinates(),A[E.index+O]=o,S[O]=o;break;case F.default.MULTI_LINE_STRING:A=T.getCoordinates(),A[W[0]][E.index+O]=o,S[O]=o;break;case F.default.POLYGON:A=T.getCoordinates(),A[W[0]][E.index+O]=o,S[O]=o;break;case F.default.MULTI_POLYGON:A=T.getCoordinates(),A[W[1]][W[0]][E.index+O]=o,S[O]=o;break;case F.default.CIRCLE:if(S[0]=o,S[1]=o,E.index===j)this.changingFeature_=!0,T.setCenter(o),this.changingFeature_=!1;else{this.changingFeature_=!0;var B=s.map.getView().getProjection(),Q=(0,J.TE)((0,v.fromUserCoordinate)(T.getCenter(),B),(0,v.fromUserCoordinate)(o,B)),rt=(0,v.getUserProjection)();if(rt){var _t=T.clone().transform(rt,B);_t.setRadius(Q),Q=_t.transform(B,rt).getRadius()}T.setRadius(Q),this.changingFeature_=!1}break;default:}A&&this.setGeometryCoordinates_(T,A)}this.createOrUpdateVertexFeature_(o,d,l)},x.prototype.handleDownEvent=function(s){if(!this.condition_(s))return!1;var o=s.coordinate;this.handlePointerAtPixel_(s.pixel,s.map,o),this.dragSegments_.length=0,this.featuresBeingModified_=null;var d=this.vertexFeature_;if(d){var l=s.map.getView().getProjection(),_=[],p=d.getGeometry().getCoordinates(),g=(0,H.boundingExtent)([p]),E=this.rBush_.getInExtent(g),m={};E.sort(gt);for(var T=0,W=E.length;T<W;++T){var A=E[T],S=A.segment,O=(0,y.getUid)(A.geometry),B=A.depth;if(B&&(O+="-"+B.join("-")),m[O]||(m[O]=new Array(2)),A.geometry.getType()===F.default.CIRCLE&&A.index===z){var Q=ct(o,A,l);(0,J.fS)(Q,p)&&!m[O][0]&&(this.dragSegments_.push([A,0]),m[O][0]=A);continue}if((0,J.fS)(S[0],p)&&!m[O][0]){this.dragSegments_.push([A,0]),m[O][0]=A;continue}if((0,J.fS)(S[1],p)&&!m[O][1]){if((A.geometry.getType()===F.default.LINE_STRING||A.geometry.getType()===F.default.MULTI_LINE_STRING)&&m[O][0]&&m[O][0].index===0)continue;this.dragSegments_.push([A,1]),m[O][1]=A;continue}(0,y.getUid)(S)in this.vertexSegments_&&!m[O][0]&&!m[O][1]&&this.insertVertexCondition_(s)&&_.push(A)}_.length&&this.willModifyFeatures_(s,[_]);for(var rt=_.length-1;rt>=0;--rt)this.insertVertex_(_[rt],p)}return!!this.vertexFeature_},x.prototype.handleUpEvent=function(s){for(var o=this.dragSegments_.length-1;o>=0;--o){var d=this.dragSegments_[o][0],l=d.geometry;if(l.getType()===F.default.CIRCLE){var _=l.getCenter(),p=d.featureSegments[0],g=d.featureSegments[1];p.segment[0]=_,p.segment[1]=_,g.segment[0]=_,g.segment[1]=_,this.rBush_.update((0,H.createOrUpdateFromCoordinate)(_),p);var E=l,m=(0,v.getUserProjection)();if(m){var T=s.map.getView().getProjection();E=E.clone().transform(m,T),E=(0,I.fromCircle)(E).transform(T,m)}this.rBush_.update(E.getExtent(),g)}else this.rBush_.update((0,H.boundingExtent)(d.segment),d)}return this.featuresBeingModified_&&(this.dispatchEvent(new k(tt.MODIFYEND,this.featuresBeingModified_,s)),this.featuresBeingModified_=null),!1},x.prototype.handlePointerMove_=function(s){this.lastPixel_=s.pixel,this.handlePointerAtPixel_(s.pixel,s.map,s.coordinate)},x.prototype.handlePointerAtPixel_=function(s,o,d){var l=this,_=d||o.getCoordinateFromPixel(s),p=o.getView().getProjection(),g=function(vt,Gt){return yt(_,vt,p)-yt(_,Gt,p)},E,m;if(this.hitDetection_){var T=typeof this.hitDetection_=="object"?function(vt){return vt===l.hitDetection_}:void 0;o.forEachFeatureAtPixel(s,function(vt,Gt,dt){if(dt=dt||vt.getGeometry(),dt.getType()===F.default.POINT&&(0,K.includes)(l.features_.getArray(),vt)){m=dt;var xt=dt.getFlatCoordinates().slice(0,2);E=[{feature:vt,geometry:dt,segment:[xt,xt]}]}return!0},{layerFilter:T})}if(!E){var W=(0,v.fromUserExtent)((0,H.createOrUpdateFromCoordinate)(_,ft),p),A=o.getView().getResolution()*this.pixelTolerance_,S=(0,v.toUserExtent)((0,H.buffer)(W,A,ft),p);E=this.rBush_.getInExtent(S)}if(E&&E.length>0){var O=E.sort(g)[0],B=O.segment,Q=ct(_,O,p),rt=o.getPixelFromCoordinate(Q),_t=(0,J.TE)(s,rt);if(m||_t<=this.pixelTolerance_){var Pt={};if(Pt[(0,y.getUid)(B)]=!0,this.snapToPointer_||(this.delta_[0]=Q[0]-_[0],this.delta_[1]=Q[1]-_[1]),O.geometry.getType()===F.default.CIRCLE&&O.index===z)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(Q,[O.feature],[O.geometry]);else{var it=o.getPixelFromCoordinate(B[0]),et=o.getPixelFromCoordinate(B[1]),At=(0,J.bI)(rt,it),wt=(0,J.bI)(rt,et);_t=Math.sqrt(Math.min(At,wt)),this.snappedToVertex_=_t<=this.pixelTolerance_,this.snappedToVertex_&&(Q=At>wt?B[1]:B[0]),this.createOrUpdateVertexFeature_(Q,[O.feature],[O.geometry]);var Ft={};Ft[(0,y.getUid)(O.geometry)]=!0;for(var Ct=1,jt=E.length;Ct<jt;++Ct){var Et=E[Ct].segment;if((0,J.fS)(B[0],Et[0])&&(0,J.fS)(B[1],Et[1])||(0,J.fS)(B[0],Et[1])&&(0,J.fS)(B[1],Et[0])){var Ut=(0,y.getUid)(E[Ct].geometry);Ut in Ft||(Ft[Ut]=!0,Pt[(0,y.getUid)(Et)]=!0)}else break}}this.vertexSegments_=Pt;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},x.prototype.insertVertex_=function(s,o){for(var d=s.segment,l=s.feature,_=s.geometry,p=s.depth,g=s.index,E;o.length<_.getStride();)o.push(0);switch(_.getType()){case F.default.MULTI_LINE_STRING:E=_.getCoordinates(),E[p[0]].splice(g+1,0,o);break;case F.default.POLYGON:E=_.getCoordinates(),E[p[0]].splice(g+1,0,o);break;case F.default.MULTI_POLYGON:E=_.getCoordinates(),E[p[1]][p[0]].splice(g+1,0,o);break;case F.default.LINE_STRING:E=_.getCoordinates(),E.splice(g+1,0,o);break;default:return}this.setGeometryCoordinates_(_,E);var m=this.rBush_;m.remove(s),this.updateSegmentIndices_(_,g,p,1);var T={segment:[d[0],o],feature:l,geometry:_,depth:p,index:g};m.insert((0,H.boundingExtent)(T.segment),T),this.dragSegments_.push([T,1]);var W={segment:[o,d[1]],feature:l,geometry:_,depth:p,index:g+1};m.insert((0,H.boundingExtent)(W.segment),W),this.dragSegments_.push([W,0]),this.ignoreNextSingleClick_=!0},x.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=w.Z.POINTERDRAG){var s=this.lastPointerEvent_;this.willModifyFeatures_(s,this.dragSegments_);var o=this.removeVertex_();return this.dispatchEvent(new k(tt.MODIFYEND,this.featuresBeingModified_,s)),this.featuresBeingModified_=null,o}return!1},x.prototype.removeVertex_=function(){var s=this.dragSegments_,o={},d=!1,l,_,p,g,E,m,T,W,A,S,O;for(E=s.length-1;E>=0;--E)p=s[E],S=p[0],O=(0,y.getUid)(S.feature),S.depth&&(O+="-"+S.depth.join("-")),O in o||(o[O]={}),p[1]===0?(o[O].right=S,o[O].index=S.index):p[1]==1&&(o[O].left=S,o[O].index=S.index+1);for(O in o){switch(A=o[O].right,T=o[O].left,m=o[O].index,W=m-1,T!==void 0?S=T:S=A,W<0&&(W=0),g=S.geometry,_=g.getCoordinates(),l=_,d=!1,g.getType()){case F.default.MULTI_LINE_STRING:_[S.depth[0]].length>2&&(_[S.depth[0]].splice(m,1),d=!0);break;case F.default.LINE_STRING:_.length>2&&(_.splice(m,1),d=!0);break;case F.default.MULTI_POLYGON:l=l[S.depth[1]];case F.default.POLYGON:l=l[S.depth[0]],l.length>4&&(m==l.length-1&&(m=0),l.splice(m,1),d=!0,m===0&&(l.pop(),l.push(l[0]),W=l.length-1));break;default:}if(d){this.setGeometryCoordinates_(g,_);var B=[];if(T!==void 0&&(this.rBush_.remove(T),B.push(T.segment[0])),A!==void 0&&(this.rBush_.remove(A),B.push(A.segment[1])),T!==void 0&&A!==void 0){var Q={depth:S.depth,feature:S.feature,geometry:S.geometry,index:W,segment:B};this.rBush_.insert((0,H.boundingExtent)(Q.segment),Q)}this.updateSegmentIndices_(g,m,S.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),s.length=0}}return d},x.prototype.setGeometryCoordinates_=function(s,o){this.changingFeature_=!0,s.setCoordinates(o),this.changingFeature_=!1},x.prototype.updateSegmentIndices_=function(s,o,d,l){this.rBush_.forEachInExtent(s.getExtent(),function(_){_.geometry===s&&(d===void 0||_.depth===void 0||(0,K.equals)(_.depth,d))&&_.index>o&&(_.index+=l)})},x}(R.default);function gt(L,x){return L.index-x.index}function yt(L,x,s){var o=x.geometry;if(o.getType()===F.default.CIRCLE){var d=o;if(x.index===z){var l=(0,v.getUserProjection)();l&&(d=d.clone().transform(l,s));var _=(0,J.bI)(d.getCenter(),(0,v.fromUserCoordinate)(L,s)),p=Math.sqrt(_)-d.getRadius();return p*p}}var g=(0,v.fromUserCoordinate)(L,s);return X[0]=(0,v.fromUserCoordinate)(x.segment[0],s),X[1]=(0,v.fromUserCoordinate)(x.segment[1],s),(0,J.Bs)(g,X)}function ct(L,x,s){var o=x.geometry;if(o.getType()===F.default.CIRCLE&&x.index===z){var d=o,l=(0,v.getUserProjection)();return l&&(d=d.clone().transform(l,s)),(0,v.toUserCoordinate)(d.getClosestPoint((0,v.fromUserCoordinate)(L,s)),s)}var _=(0,v.fromUserCoordinate)(L,s);return X[0]=(0,v.fromUserCoordinate)(x.segment[0],s),X[1]=(0,v.fromUserCoordinate)(x.segment[1],s),(0,v.toUserCoordinate)((0,J.oL)(_,X),s)}function V(){var L=(0,Dt.createEditingStyle)();return function(x,s){return L[F.default.POINT]}}q.default=pt},902981:function(Lt,q,c){c.r(q),c.d(q,{SelectEvent:function(){return lt}});var b=c(10257),U=c(745105),$=c(12207),Y=c(17369),st=c(655878),F=c(561280),w=c(500623),Z=c(339211),R=c(542422),ut=c(875907),N=c(708326),mt=function(){var K=function(I,v){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var j in M)Object.prototype.hasOwnProperty.call(M,j)&&(y[j]=M[j])},K(I,v)};return function(I,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");K(I,v);function y(){this.constructor=I}I.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}}(),Ot={SELECT:"select"},lt=function(K){mt(I,K);function I(v,y,M,j){var z=K.call(this,v)||this;return z.selected=y,z.deselected=M,z.mapBrowserEvent=j,z}return I}($.default),H={},J=function(K){mt(I,K);function I(v){var y=K.call(this)||this;y.on,y.once,y.un;var M=v||{};y.boundAddFeature_=y.addFeature_.bind(y),y.boundRemoveFeature_=y.removeFeature_.bind(y),y.condition_=M.condition?M.condition:N.singleClick,y.addCondition_=M.addCondition?M.addCondition:N.never,y.removeCondition_=M.removeCondition?M.removeCondition:N.never,y.toggleCondition_=M.toggleCondition?M.toggleCondition:N.shiftKeyOnly,y.multi_=M.multi?M.multi:!1,y.filter_=M.filter?M.filter:F.TRUE,y.hitTolerance_=M.hitTolerance?M.hitTolerance:0,y.style_=M.style!==void 0?M.style:Dt(),y.features_=M.features||new b.default;var j;if(M.layers)if(typeof M.layers=="function")j=M.layers;else{var z=M.layers;j=function(ft){return(0,R.includes)(z,ft)}}else j=F.TRUE;return y.layerFilter_=j,y.featureLayerAssociation_={},y}return I.prototype.addFeatureLayerAssociation_=function(v,y){this.featureLayerAssociation_[(0,ut.getUid)(v)]=y},I.prototype.getFeatures=function(){return this.features_},I.prototype.getHitTolerance=function(){return this.hitTolerance_},I.prototype.getLayer=function(v){return this.featureLayerAssociation_[(0,ut.getUid)(v)]},I.prototype.setHitTolerance=function(v){this.hitTolerance_=v},I.prototype.setMap=function(v){var y=this.getMap();y&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),K.prototype.setMap.call(this,v),v?(this.features_.addEventListener(U.default.ADD,this.boundAddFeature_),this.features_.addEventListener(U.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(U.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(U.default.REMOVE,this.boundRemoveFeature_))},I.prototype.addFeature_=function(v){var y=v.element;this.style_&&this.applySelectedStyle_(y)},I.prototype.removeFeature_=function(v){var y=v.element;this.style_&&this.restorePreviousStyle_(y)},I.prototype.getStyle=function(){return this.style_},I.prototype.applySelectedStyle_=function(v){var y=(0,ut.getUid)(v);y in H||(H[y]=v.getStyle()),v.setStyle(this.style_)},I.prototype.restorePreviousStyle_=function(v){for(var y=this.getMap().getInteractions().getArray(),M=y.length-1;M>=0;--M){var j=y[M];if(j!==this&&j instanceof I&&j.getStyle()&&j.getFeatures().getArray().lastIndexOf(v)!==-1){v.setStyle(j.getStyle());return}}var z=(0,ut.getUid)(v);v.setStyle(H[z]),delete H[z]},I.prototype.removeFeatureLayerAssociation_=function(v){delete this.featureLayerAssociation_[(0,ut.getUid)(v)]},I.prototype.handleEvent=function(v){if(!this.condition_(v))return!0;var y=this.addCondition_(v),M=this.removeCondition_(v),j=this.toggleCondition_(v),z=!y&&!M&&!j,ft=v.map,X=this.getFeatures(),tt=[],k=[];if(z){(0,w.clear)(this.featureLayerAssociation_),ft.forEachFeatureAtPixel(v.pixel,function(V,L){if(this.filter_(V,L))return k.push(V),this.addFeatureLayerAssociation_(V,L),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var pt=X.getLength()-1;pt>=0;--pt){var gt=X.item(pt),yt=k.indexOf(gt);yt>-1?k.splice(yt,1):(X.remove(gt),tt.push(gt))}k.length!==0&&X.extend(k)}else{ft.forEachFeatureAtPixel(v.pixel,function(V,L){if(this.filter_(V,L))return(y||j)&&!(0,R.includes)(X.getArray(),V)?(k.push(V),this.addFeatureLayerAssociation_(V,L)):(M||j)&&(0,R.includes)(X.getArray(),V)&&(tt.push(V),this.removeFeatureLayerAssociation_(V)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var ct=tt.length-1;ct>=0;--ct)X.remove(tt[ct]);X.extend(k)}return(k.length>0||tt.length>0)&&this.dispatchEvent(new lt(Ot.SELECT,k,tt,v)),!0},I}(st.default);function Dt(){var K=(0,Z.createEditingStyle)();return(0,R.extend)(K[Y.default.POLYGON],K[Y.default.LINE_STRING]),(0,R.extend)(K[Y.default.GEOMETRY_COLLECTION],K[Y.default.LINE_STRING]),function(I){return I.getGeometry()?K[I.getGeometry().getType()]:null}}q.default=J},466689:function(Lt,q,c){c.d(q,{Gw:function(){return st},YP:function(){return $},gE:function(){return Y},h$:function(){return U}});var b=c(423744);function U(F){if(F!==void 0)return 0}function $(F){if(F!==void 0)return F}function Y(F){var w=2*Math.PI/F;return function(Z,R){if(R)return Z;if(Z!==void 0)return Z=Math.floor(Z/w+.5)*w,Z}}function st(F){var w=F||(0,b.Yr)(5);return function(Z,R){if(R)return Z;if(Z!==void 0)return Math.abs(Z)<=w?0:Z}}}}]);
