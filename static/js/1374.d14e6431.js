(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[1374],{73150:function(F,y,e){"use strict";var P=e(52909),D=e(26541),q=e(81806),K=e(20314),Y=e(26352),tt=e(40639),Z=e(43586),et=e(19534);Object.defineProperty(y,"__esModule",{value:!![]}),y.default=void 0,y.optionsFromCapabilities=W;var x=e(42422),p=e(72233),g=e(92086),H=e(66016),N=et(e(57577));function R(m,h){var a=typeof tt<"u"&&Z(m)||m["@@iterator"];if(!a){if(Array.isArray(m)||(a=E(m))||h&&m&&typeof m.length=="number"){a&&(m=a);var v=0,o=function(){};return{s:o,n:function(){return v>=m.length?{done:!![]}:{done:![],value:m[v++]}},e:function(r){throw r},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!![],S=![],C;return{s:function(){a=a.call(m)},n:function(){var r=a.next();return s=r.done,r},e:function(r){S=!![],C=r},f:function(){try{!s&&a.return!=null&&a.return()}finally{if(S)throw C}}}}function E(m,h){var a;if(m){if(typeof m=="string")return A(m,h);var v=K(a=Object.prototype.toString.call(m)).call(a,8,-1);if(v==="Object"&&m.constructor&&(v=m.constructor.name),v==="Map"||v==="Set")return Y(m);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return A(m,h)}}function A(m,h){(h==null||h>m.length)&&(h=m.length);for(var a=0,v=new Array(h);a<h;a++)v[a]=m[a];return v}function O(m,h,a){var v=W(h,a);if(v.format.indexOf("image")===-1){var o=h.Contents.Layer,s=P(x)(o,function(_){return _.Identifier===a.layer});if(s===null)return null;var S=s.Format,C=R(S),d;try{for(C.s();!(d=C.n()).done;){var r=d.value;if(r.indexOf("image")>-1){v.format=r;break}}}catch(_){C.e(_)}finally{C.f()}}var i=a.pixelSize?a.pixelSize:a.otherPixel?.00026458386740859903:null;if(i){var u=a.targetSRS?(0,p.get)(a.targetSRS):m,f=u.getMetersPerUnit(),c=h.Contents.Layer,U=P(x)(c,function(_){return _.Identifier===a.layer});if(U===null)return null;var V=h.Contents.TileMatrixSet,z;U.TileMatrixSetLink.length>1?"projection"in a?z=D(x)(U.TileMatrixSetLink,function(_){var k=P(x)(V,function(gt){return gt.Identifier===_.TileMatrixSet}),M=k.SupportedCRS,lt=(0,p.get)(M.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,p.get)(M),X=(0,p.get)(a.projection);return lt&&X?(0,p.equivalent)(lt,X):M===a.projection}):z=D(x)(U.TileMatrixSetLink,function(_){return _.TileMatrixSet===a.matrixSet}):z=0,z<0&&(z=0);var t=U.TileMatrixSetLink[z].TileMatrixSet,L=P(x)(V,function(_){return _.Identifier===t}),G=[],b=R(L.TileMatrix),at;try{for(b.s();!(at=b.n()).done;){var st=at.value;G.push(i*(st.ScaleDenominator/f))}}catch(_){b.e(_)}finally{b.f()}v.tileGrid.resolutions_=G}return v}function W(m,h){var a=m.Contents.Layer,v=P(x)(a,function(it){return it.Identifier===h.layer});if(v===null)return null;var o=m.Contents.TileMatrixSet,s;v.TileMatrixSetLink.length>1?"projection"in h?s=D(x)(v.TileMatrixSetLink,function(it){var Lt=P(x)(o,function(Bt){return Bt.Identifier===it.TileMatrixSet}),Et=Lt.SupportedCRS,St=(0,p.get)(Et),At=(0,p.get)(h.projection);return St&&At?(0,p.equivalent)(St,At):Et===h.projection}):s=D(x)(v.TileMatrixSetLink,function(it){return it.TileMatrixSet===h.matrixSet}):s=0,s<0&&(s=0);var S=v.TileMatrixSetLink[s].TileMatrixSet,C=v.TileMatrixSetLink[s].TileMatrixSetLimits,d=v.Format[0];"format"in h&&(d=h.format),s=D(x)(v.Style,function(it){return"style"in h?it.Title===h.style:it.isDefault}),s<0&&(s=0);var r=v.Style[s].Identifier,i={};"Dimension"in v&&v.Dimension.forEach(function(it){var Lt=it.Identifier,Et=it.Default;Et===void 0&&(Et=it.Value[0]),i[Lt]=Et});var u=m.Contents.TileMatrixSet,f=P(x)(u,function(it){return it.Identifier===S}),c,U=f.SupportedCRS;if(U&&(c=(0,p.get)(U)),"projection"in h){var V=(0,p.get)(h.projection);V&&(!c||(0,p.equivalent)(V,c))&&(c=V)}var z=![],t=c.getAxisOrientation().substr(0,2)==="ne",L=f.TileMatrix[0],G={MinTileCol:0,MinTileRow:0,MaxTileCol:L.MatrixWidth-1,MaxTileRow:L.MatrixHeight-1};if(C){if(f.WellKnownScaleSet){var b=R(C),at;try{for(b.s();!(at=b.n()).done;){var st=at.value;st.TileMatrix=st.TileMatrix.replace(f.WellKnownScaleSet,f.Identifier)}}catch(it){b.e(it)}finally{b.f()}}G=C[C.length-1];var _=P(x)(f.TileMatrix,function(it){return it.Identifier===G.TileMatrix||f.Identifier+":"+it.Identifier===G.TileMatrix});_&&(L=_)}var k=L.ScaleDenominator*28e-5/c.getMetersPerUnit(),M=t?[L.TopLeftCorner[1],L.TopLeftCorner[0]]:L.TopLeftCorner,lt=L.TileWidth*k,X=L.TileHeight*k,gt=f.BoundingBox,mt=[M[0]+lt*G.MinTileCol,M[1]-X*(1+G.MaxTileRow),M[0]+lt*(1+G.MaxTileCol),M[1]-X*G.MinTileRow];if(gt!==void 0&&!(0,g.containsExtent)(gt,mt)){var Ot=v.WGS84BoundingBox,Pt=(0,p.get)("EPSG:4326").getExtent();if(mt=gt,Ot)z=Ot[0]===Pt[0]&&Ot[2]===Pt[2];else{var jt=(0,p.transformExtent)(gt,f.SupportedCRS,"EPSG:4326");z=jt[0]-1e-10<=Pt[0]&&jt[2]+1e-10>=Pt[2]}}var Gt=(0,H.createFromCapabilitiesMatrixSet)(f,mt,C),Ct=[],vt=h.requestEncoding;if(vt=vt!==void 0?vt:"","OperationsMetadata"in m&&"GetTile"in m.OperationsMetadata)for(var xt=m.OperationsMetadata.GetTile.DCP.HTTP.Get,yt=0,Ft=xt.length;yt<Ft;++yt)if(xt[yt].Constraint){var Rt=P(x)(xt[yt].Constraint,function(it){return it.name==="GetEncoding"}),Mt=Rt.AllowedValues.Value;if(vt===""&&(vt=Mt[0]),vt===N.default.KVP)q(x)(Mt,N.default.KVP)&&Ct.push(xt[yt].href);else break}else xt[yt].href&&(vt=N.default.KVP,Ct.push(xt[yt].href));return Ct.length===0&&(vt=N.default.REST,v.ResourceURL.forEach(function(it){it.resourceType==="tile"&&(d=it.format,Ct.push(it.template))})),{urls:Ct,layer:h.layer,matrixSet:S,format:d,projection:c,requestEncoding:vt,tileGrid:Gt,style:r,dimensions:i,wrapX:z,crossOrigin:h.crossOrigin}}var w=O;y.default=w},83300:function(F,y,e){"use strict";var P=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.createKeyFromFilter=x,y.getIndexByTemplate=Z,y.getKeyByTemplate=et,y.indexOfFilter=tt,y.isEqualFilter=Y,y.isMatchCql=q,y.isMatchFilter=K;var D=P(e(83605));function q(p,g){var H=new D.default().read(g);return K(p,H)}function K(p,g){switch(g.tagName_){case"Not":return!K(p,g.condition);case"And":{for(var H=!0,N=0;N<g.conditions.length;N++)H=H&&K(p,g.conditions[N]);return H}case"Or":{for(var R=!1,E=0;E<g.conditions.length;E++)R=R||K(p,g.conditions[E]);return R}case"PropertyIsBetween":return p[g.property]>g.lowerBoundary&&p[g.property]<g.upperBoundary;case"PropertyIsEqualTo":return p[g.propertyName]===g.expression;case"PropertyIsNotEqualTo":return p[g.propertyName]!==g.expression;case"PropertyIsLessThan":return p[g.propertyName]<g.expression;case"PropertyIsLessThanOrEqualTo":return p[g.propertyName]<=g.expression;case"PropertyIsGreaterThan":return p[g.propertyName]>g.expression;case"PropertyIsGreaterThanOrEqualTo":return p[g.propertyName]>=g.expression;case"PropertyIsLike":return p[g.propertyName].indexOf(g.expression)>-1;case"PropertyIsNull":return!p[g.propertyName];default:return!1}}function Y(p,g){switch(p.tagName_){case"Not":return p.tagName_===g.tagName_&&Y(p.condition,g.condition);case"Or":case"And":{for(var H=p.tagName_===g.tagName_&&p.conditions.length===g.conditions.length,N=0;N<p.conditions.length;N++)H=H&&Y(p.conditions[N],g.conditions[N]);return H}case"PropertyIsBetween":return p.tagName_===g.tagName_&&p.property===g.property;case"PropertyIsEqualTo":case"PropertyIsNotEqualTo":case"PropertyIsLessThan":case"PropertyIsLessThanOrEqualTo":case"PropertyIsGreaterThan":case"PropertyIsGreaterThanOrEqualTo":case"PropertyIsLike":case"PropertyIsNull":return p.tagName_===g.tagName_&&p.propertyName===g.propertyName;default:return!1}}function tt(p,g){var H=-1;if(p?.length>0){for(var N in p)if(Y(p[N].template,g))return N}return H}function Z(p,g){var H=g.template;if(g.idMapLength>0){var N=et(p,H);if(N instanceof Array)for(var R in N){var E=g.idMap[N[R]+"_"+R];if(E)return E}else return g.idMap[N]}return null}function et(p,g){switch(g.tagName_){case"PropertyIsEqualTo":return p[g.propertyName];case"And":{for(var H=[],N=0;N<g.conditions.length;N++){var R=et(p,g.conditions[N]);R&&H.push(R)}return H.join(",")}case"Or":{for(var E=[],A=0;A<g.conditions.length;A++){var O=et(p,g.conditions[A]);O&&E.push(O)}return E}default:return null}}function x(p){switch(p.tagName_){case"PropertyIsEqualTo":return p.expression;case"And":{for(var g=[],H=0;H<p.conditions.length;H++){var N=x(p.conditions[H]);if(N)g.push(N);else return null}return g.join(",")}case"Or":{for(var R=[],E=0;E<p.conditions.length;E++){var A=x(p.conditions[E]);A&&R.push(A)}return R}default:return null}}},80480:function(F,y,e){"use strict";var P=e(49500),D=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.preParse=g;var q=D(e(42579)),K=D(e(78756)),Y=D(e(22466)),tt=D(e(85208)),Z=e(64849),et=e(57463),x=D(e(83605)),p=e(83300);function g(R){var E=this;return new K.default(function(A){var O=this;(0,q.default)(this,E),R.minimumLevel&&(R.minZoom=Number(R.minimumLevel)+.6),R.maximumLevel&&(R.maxZoom=Number(R.maximumLevel)+.6),(0,et.symbolParse)(R).then(function(){(0,q.default)(this,O),H(R),N(R,A)}.bind(this)).catch(function(W){(0,q.default)(this,O),P.warn(W),N(R,A)}.bind(this))}.bind(this))}function H(R){if(R.symbol&&R.symbol.styleFilterOptions&&R.symbol.styleFilterOptions.length>0){var E=[];R.symbol.styleFilterParseOptions={};for(var A in R.symbol.styleFilterOptions){var O=R.symbol.styleFilterOptions[A],W=new x.default().read((0,Y.default)(O));O.filterObj=W;var w=(0,p.indexOfFilter)(E,O.filterObj),m=(0,p.createKeyFromFilter)(W),h={id:A,filterObj:W};if(w===-1){var a={};if(m instanceof Array)for(var v in m)a[m[v]+"_"+v]=A;else a[m]=A;E.push({template:W,idMap:a,filterArr:[h]})}else m&&(E[w].idMap[m]=A),E[w].filterArr.push(h)}for(var o=0,s=E;o<s.length;o++){var S=s[o];S.idMapLength=(0,tt.default)(S.idMap).length}R.symbol.filterTemplates=E}}function N(R,E){var A=this;(0,Z.geoStrParse)(R).then(function(){(0,q.default)(this,A),E()}.bind(this)).catch(function(O){(0,q.default)(this,A),P.warn(O),E()}.bind(this))}},64849:function(F,y,e){"use strict";var P=e(49500),D=e(20314),q=e(26352),K=e(40639),Y=e(43586),tt=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.geoStrParse=R;var Z=tt(e(42579)),et=tt(e(78756)),x=tt(e(77019)),p=e(10563);function g(E,A){var O=typeof K<"u"&&Y(E)||E["@@iterator"];if(!O){if(Array.isArray(E)||(O=H(E))||A&&E&&typeof E.length=="number"){O&&(E=O);var W=0,w=function(){};return{s:w,n:function(){return W>=E.length?{done:!0}:{done:!1,value:E[W++]}},e:function(o){throw o},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=!0,h=!1,a;return{s:function(){O=O.call(E)},n:function(){var o=O.next();return m=o.done,o},e:function(o){h=!0,a=o},f:function(){try{!m&&O.return!=null&&O.return()}finally{if(h)throw a}}}}function H(E,A){var O;if(E){if(typeof E=="string")return N(E,A);var W=D(O=Object.prototype.toString.call(E)).call(O,8,-1);if(W==="Object"&&E.constructor&&(W=E.constructor.name),W==="Map"||W==="Set")return q(E);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return N(E,A)}}function N(E,A){(A==null||A>E.length)&&(A=E.length);for(var O=0,W=new Array(A);O<A;O++)W[O]=E[O];return W}function R(E){var A=this;return new et.default(function(O){var W=this;if((0,Z.default)(this,A),E.geoStr)O();else switch(E.type){case"geoserver-wms":case"geoserver-wfs":{var w={typeName:E.selectLayer?E.selectLayer:E.visibleLayers[0],service:"wfs",Request:"DescribeFeatureType",authkey:E.authkey};x.default.get(E.url,{params:w,timeout:5e3,headers:{"content-type":"application/xml"}}).then(function(m){(0,Z.default)(this,W);var h;try{h=(0,p.LoadXmlText)(m.headers?m.data:m);var a=h.getElementsByTagName("xsd:sequence")[0].children,v=g(a),o;try{for(v.s();!(o=v.n()).done;){var s,S=o.value;if(((s=S.getAttribute("type"))===null||s===void 0?void 0:s.indexOf("gml"))>-1){E.geoStr=S.getAttribute("name");break}}}catch(C){v.e(C)}finally{v.f()}O()}catch(C){P.warn(C),O()}}.bind(this)).catch(function(m){(0,Z.default)(this,W),P.warn(m),O()}.bind(this));break}default:O();break}}.bind(this))}},73081:function(F,y,e){"use strict";var P=e(49500),D=e(52909),q=e(20314),K=e(26352),Y=e(40639),tt=e(43586),Z=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var et=Z(e(29870)),x=Z(e(42579)),p=Z(e(78756)),g=Z(e(70515)),H=Z(e(81806)),N=Z(e(20314)),R=Z(e(5146)),E=Z(e(66273)),A=Z(e(52909)),O=e(72233),W=Z(e(60031)),w=Z(e(61368)),m=e(42422),h=Z(e(77019)),a=e(67040),v=e(81534),o=e(10563),s=e(97149),S=e(80480),C=Z(e(73150)),d=Z(e(3073));function r(t,L){var G=typeof Y<"u"&&tt(t)||t["@@iterator"];if(!G){if(Array.isArray(t)||(G=i(t))||L&&t&&typeof t.length=="number"){G&&(t=G);var b=0,at=function(){};return{s:at,n:function(){return b>=t.length?{done:!0}:{done:!1,value:t[b++]}},e:function(lt){throw lt},f:at}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var st=!0,_=!1,k;return{s:function(){G=G.call(t)},n:function(){var lt=G.next();return st=lt.done,lt},e:function(lt){_=!0,k=lt},f:function(){try{!st&&G.return!=null&&G.return()}finally{if(_)throw k}}}}function i(t,L){var G;if(t){if(typeof t=="string")return u(t,L);var b=q(G=Object.prototype.toString.call(t)).call(G,8,-1);if(b==="Object"&&t.constructor&&(b=t.constructor.name),b==="Map"||b==="Set")return K(t);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return u(t,L)}}function u(t,L){(L==null||L>t.length)&&(L=t.length);for(var G=0,b=new Array(L);G<L;G++)b[G]=t[G];return b}function f(t){var L,G=this;if(t._options)return p.default.resolve(t._options);t.appid&&(t.url=(0,a.addParamToUrl)(b,"appid",t.appid));var b=t.url;if(t.authkey&&(b=(0,a.addParamToUrl)(b,"authkey",t.authkey)),t.isProxy){var at=t.proxyPath?t.proxyPath:"/gisqBI/api/gis/proxy?";b=(0,g.default)(at).call(at,"?")?at+b:at+"?"+b,t.proxy=at}var st=t.type,_=(0,H.default)(L=b.substring(b.lastIndexOf("://"),b.length)).call(L,"?")?"&":"?";return new p.default(function(k,M){var lt=this;(0,x.default)(this,G),(0,S.preParse)(t).then(function(){var X=this;switch((0,x.default)(this,lt),st){case"tiled":{var gt=(0,a.addParamToUrl)(b,"f","json");h.default.get(gt).then(function(l){var T;(0,x.default)(this,X),l=l.headers?l.data:l;var n="";if(typeof l=="string")try{n=JSON.parse(l)}catch{M(new Error("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"));return}else n=l;var B=[],j=[],$=[],I=[],rt=[],Q="EPSG:"+(n.fullExtent.spatialReference.wkid===102100?3857:n.fullExtent.spatialReference.wkid);(0,v.registerProj)(Q);var nt=d.default.Proj(Q);$.push(n.tileInfo.origin.x,n.tileInfo.origin.y),j.push(n.fullExtent.xmin,n.fullExtent.ymin,n.fullExtent.xmax,n.fullExtent.ymax),B.push(n.initialExtent.xmin,n.initialExtent.ymin,n.initialExtent.xmax,n.initialExtent.ymax),rt.push(n.tileInfo.rows,n.tileInfo.cols);for(var J=0,ft=n.tileInfo.lods.length;J<ft;J++)I.push(n.tileInfo.lods[J].resolution);var dt=n.tileInfo.lods[0].level?n.tileInfo.lods[0].level:0,ct={projection:Q,result:n,tilingScheme:t.tilingScheme||((T=(0,v.getProj)(Q))===null||T===void 0?void 0:T.getUnits())==="degrees"?"geodetic":"mercator",origin:$,initExtent:t.initExtent||(0,O.transformExtent)(B,Q,"EPSG:4326"),extent:j,resolutions:I,tileSize:rt,extUrl:"/tile/{z}/{y}/{x}",zDirection:dt,proj4Info:nt};k(ct)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"geoserver-vectorTiled":{var mt=b+_+"SERVICE=WMTS&request=getCapabilities&version=1.0.0";h.default.get(mt,{headers:{"content-type":"application/xml"}}).then(function(l){var T,n=this,B;(0,x.default)(this,X);var j=l.headers?l.data:l,$=new W.default,I=(0,H.default)(T=t.url.substring(t.url.lastIndexOf("://"),t.url.length)).call(T,"?")?"&":"?",rt=t.url+I,Q={},nt="",J="";try{nt=$.read(j);for(var ft=nt.Contents.Layer,dt=nt.Contents.TileMatrixSet,ct,ut=0;ut<ft.length;ut++)if(ft[ut].Identifier===t.visibleLayers[0]){ct=ft[ut].TileMatrixSetLink[0].TileMatrixSet;break}for(var bt=0;bt<dt.length;bt++)if(dt[bt].Identifier===ct){J=dt[bt].SupportedCRS.replace("urn:ogc:def:crs:","").replace("::",":");break}(0,v.registerProj)(J),Q=(0,C.default)("EPSG:4490",nt,{layer:t.visibleLayers[0],otherPixel:t.sourceType==="arcgis",targetSRS:J});var Tt=0;Q.tileGrid.origins_.forEach(function(wt){(0,x.default)(this,n),wt[0]===90&&wt[1]===-180&&(wt=[wt[1],wt[0]],Q.tileGrid.origins_[Tt]=wt,Tt=Tt+1)}.bind(this));var pt=Q.matrixSet,Vt=Q.style,ot={REQUEST:"GetTile",SERVICE:"WMTS",VERSION:"1.0.0",LAYER:t.visibleLayers[0],STYLE:Vt,TILEMATRIX:pt+":{z}",TILEMATRIXSET:pt,FORMAT:"application/vnd.mapbox-vector-tile",TILECOL:"{x}",TILEROW:"{y}"};t.authkey&&(ot.authkey=t.authkey);for(var kt in ot)rt=rt+kt+"="+ot[kt]+"&";rt=(0,N.default)(rt).call(rt,0,-1)}catch{M(new Error(c(t.label)));return}var ae={projection:J,tilingScheme:t.tilingScheme||((B=(0,v.getProj)(J))===null||B===void 0?void 0:B.getUnits())==="degrees"?"geodetic":"mercator",initExtent:t.initExtent||Q.tileGrid.extent_,CapabilitiesXml:nt,WMTSSourceOptions:Q,requestUrl:rt};k(ae)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"geoway_tile":{var Ot;if(t.visibleLayers&&t.visibleLayers.length>0){Ot={otherDisplay:!1,layers:[]};var Pt=r(t.visibleLayers),jt;try{for(Pt.s();!(jt=Pt.n()).done;){var Gt=jt.value,Ct={id:Gt};Ot.layers.push(Ct)}}catch(l){Pt.e(l)}finally{Pt.f()}}var vt=t.url.split("/"),xt=vt.indexOf("label")>-1?vt.indexOf("label"):vt.indexOf("vmap");if(xt>-1){var yt,Ft,Rt,Mt=vt[xt],it=vt[xt+1],Lt=(0,N.default)(vt).call(vt,0,xt).join("/"),Et=(0,a.getQueryVariable)(t.url,"styleId");t.geowayInfo={typeName:Mt,serverName:it,hostUrl:Lt,styleId:Et};var St=(0,R.default)(yt=(0,R.default)(Ft=(0,R.default)(Rt="".concat(Lt,"/")).call(Rt,Mt,"/")).call(Ft,it,"/getMAP?x={x}&y={y}&l={z}&styleId=")).call(yt,Et);t.GTOKEN&&(St=(0,a.addParamToUrl)(St,"GTOKEN",t.GTOKEN)),t.authkey&&(St=(0,a.addParamToUrl)(St,"authkey",t.authkey)),Ot&&(St=(0,a.addParamToUrl)(St,"control",(0,E.default)(Ot)));var At={initExtent:t.initExtent,geowayInfo:{typeName:Mt,serverName:it,hostUrl:Lt,styleId:Et},requestUrl:St};k(At)}else M(new Error(c(t.label)));break}case"tms":{var Bt=(0,a.appendPath)(b,"/tilemapresource.xml");h.default.get(Bt,null,{headers:{"content-type":"application/xml"}}).then(function(l){var T=this,n;(0,x.default)(this,X);var B=[],j=[],$=[],I="",rt,Q=new DOMParser,nt;try{nt=Q.parseFromString(l.data,"text/xml")}catch{M(new Error(c(t.label)));return}var J=(0,o.xmlToJson)(nt);rt=J.tilemap.srs["#text"],rt.indexOf("OSGEO")>-1&&(rt="EPSG:3857"),(0,v.registerProj)(rt);var ft=J.tilemap.boundingbox["@attributes"].minx,dt=J.tilemap.boundingbox["@attributes"].miny,ct=J.tilemap.boundingbox["@attributes"].maxx,ut=J.tilemap.boundingbox["@attributes"].maxy;B=[ct,ut,ft,dt],J.tilemap.tilesets.tileset.forEach(function(pt){return(0,x.default)(this,T),j.push(pt["@attributes"]["units-per-pixel"])}.bind(this));var bt=J.tilemap.tileformat["@attributes"]["mime-type"];t.isGoogle===!0?I="/{z}/{x}/{-y}."+J.tilemap.tileformat["@attributes"].extension:I="/{z}/{x}/{y}."+J.tilemap.tileformat["@attributes"].extension;var Tt={projection:rt,tilingScheme:t.tilingScheme||((n=(0,v.getProj)(rt))===null||n===void 0?void 0:n.getUnits())==="degrees"?"geodetic":"mercator",initExtent:(0,O.transformExtent)(B,rt,"EPSG:4326"),extent:B,resolutions:j,tileSize:$,extUrl:I,format:bt};k(Tt)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"geoserver-wms":case"wms":{var Ht=b+_+"service=WMS&request=getCapabilities";h.default.get(Ht,{headers:{"content-type":"application/xml"}}).then(function(l){(0,x.default)(this,X);var T=new w.default,n;try{n=T.read(l.headers?l.data:l)}catch{M(new Error(c(t.label)));return}var B=n.Capability.Layer.Layer,j=null;if(t.visibleLayers.length>0){var $=t.visibleLayers[0];if(Array.isArray($)===!0&&($=$[0]),$.split(":").length>1&&($=t.visibleLayers[0].split(":")[1]),t.type.indexOf("geoserver")===-1)j=B[0];else if(t.geoGroup){var I=D(m)(B,function(J){return J.Name===t.geoGroup});j=D(m)(I.Layer,function(J){return J.Name===$||J.Name===t.visibleLayers[0]})}else j=D(m)(B,function(J){return J.Name===$||J.Name===t.visibleLayers[0]}),j.Layer&&P.warn("targetLayer.Layer\u5B58\u5728",t)}if(j){var rt=j.Layer,Q=j.BoundingBox[0].extent,nt={initExtent:t.initExtent||Q,groupinfo:rt};k(nt)}else M(new Error(c(t.label)))}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"tdt":{var ht;t.crs==="4326"||t.url.indexOf("vec_c")!==-1?(t.visibleLayers=["vec"],ht="vec_c.xml"):t.url.indexOf("cia_c")!==-1?ht="cia_c.xml":t.url.indexOf("img_c")!==-1?ht="img_c.xml":t.url.indexOf("cva_c")!==-1?ht="cva_c.xml":t.url.indexOf("ter_c")!==-1?ht="ter_c.xml":t.url.indexOf("cta_c")!==-1?ht="cta_c.xml":t.url.indexOf("tbo_c")!==-1?ht="tbo_c.xml":t.crs==="3857"||t.url.indexOf("vec_w")!==-1?(t.visibleLayers=["vec"],ht="vec_w.xml"):t.url.indexOf("cva_w")!==-1?ht="cva_w.xml":t.url.indexOf("img_w")!==-1?ht="img_w.xml":t.url.indexOf("cia_w")!==-1?ht="cia_w.xml":t.url.indexOf("ibo_w")!==-1&&(ht="ibo_w.xml",t.visibleLayers[0]="ibo");try{if(ht){var Xt=e(29659)("./"+ht),Nt={CapabilitiesXml:Xt.default};Nt.initExtent=t.initExtent||U(t,Nt.CapabilitiesXml),k(Nt)}else{var Qt=b+_+"SERVICE=WMTS&request=getCapabilities";h.default.get(Qt,{headers:{"content-type":"application/xml"}}).then(function(l){(0,x.default)(this,X);var T={CapabilitiesXml:l.headers?l.data:l};T.initExtent=t.initExtent||U(t,T.CapabilitiesXml),k(T)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(new Error(c(t.label))))}.bind(this))}}catch(l){P.error(l),M(new Error(new Error(c(t.label))))}break}case"ckytdt":{var Jt={reject:M,initExtent:t.initExtent};k(Jt);break}case"tdt-sd":{var Kt=(0,a.getCapabilitiesUrl)(t);h.default.get(Kt,{headers:{"content-type":"application/xml"}}).then(function(l){(0,x.default)(this,X);var T={CapabilitiesXml:l.headers?l.data:l};k(T)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"dynamic":{var $t=(0,a.addParamToUrl)(b,"f","json");h.default.get($t).then(function(l){(0,x.default)(this,X),l=l.headers?l.data:l;var T="";if(typeof l=="string")try{T=JSON.parse(l)}catch{M(new Error("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"));return}else T=l;var n=[],B="";T.fullExtent.spatialReference.wkt?((0,v.registerProj)(T.fullExtent.spatialReference.wkt,[T.fullExtent.xmin,T.fullExtent.ymin,T.fullExtent.xmax,T.fullExtent.ymax]),B=T.fullExtent.spatialReference.wkt):(B="EPSG:"+T.fullExtent.spatialReference.wkid,(0,v.registerProj)(B)),T.fullExtent.xmin!=="NaN"?n.push(T.fullExtent.xmin,T.fullExtent.ymin,T.fullExtent.xmax,T.fullExtent.ymax):n.push(T.initialExtent.xmin,T.initialExtent.ymin,T.initialExtent.xmax,T.initialExtent.ymax);var j={projection:B,initExtent:t.initExtent||(0,O.transformExtent)(n,B,"EPSG:4326")};k(j)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"feature":{var Yt=(0,a.addParamToUrl)(b,"f","json");h.default.get(Yt).then(function(l){var T;(0,x.default)(this,X),l=l.headers?l.data:l;var n="";if((0,et.default)(l).toLowerCase()==="string")try{n=JSON.parse(l)}catch{M(new Error("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"));return}else n=l;var B=[],j="";n.fullExtent.spatialReference.wkt?(j=n.fullExtent.spatialReference.wkt,(0,v.registerProj)(j,[n.fullExtent.xmin,n.fullExtent.ymin,n.fullExtent.xmax,n.fullExtent.ymax])):(j="EPSG:"+n.fullExtent.spatialReference.wkid,(0,v.registerProj)(j)),n.fullExtent.xmin!=="NaN"?B.push(n.fullExtent.xmin,n.fullExtent.ymin,n.fullExtent.xmax,n.fullExtent.ymax):B.push(n.initialExtent.xmin,n.initialExtent.ymin,n.initialExtent.xmax,n.initialExtent.ymax);var $={projection:j,tilingScheme:t.tilingScheme||((T=(0,v.getProj)(j))===null||T===void 0?void 0:T.getUnits())==="degrees"?"geodetic":"mercator",maxRecordCount:n.maxRecordCount,initExtent:t.initExtent||(0,O.transformExtent)(B,j,"EPSG:4326")};k($)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"feature-zj":{var Zt=(0,a.addParamToUrl)(b,"f","json");h.default.get(Zt).then(function(l){var T;(0,x.default)(this,X),l=l.headers?l.data:l;var n="";if(typeof l=="string")try{n=JSON.parse(l)}catch{M(new Error("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"));return}else n=l;var B=[],j="";n.fullExtent.spatialReference.wkt?(j=n.fullExtent.spatialReference.wkt,(0,v.registerProj)(j,[n.fullExtent.xmin,n.fullExtent.ymin,n.fullExtent.xmax,n.fullExtent.ymax])):(j="EPSG:"+n.fullExtent.spatialReference.wkid,(0,v.registerProj)(j)),n.fullExtent.xmin!=="NaN"?B.push(n.fullExtent.xmin,n.fullExtent.ymin,n.fullExtent.xmax,n.fullExtent.ymax):B.push(n.initialExtent.xmin,n.initialExtent.ymin,n.initialExtent.xmax,n.initialExtent.ymax);var $={projection:j,tilingScheme:t.tilingScheme||((T=(0,v.getProj)(j))===null||T===void 0?void 0:T.getUnits())==="degrees"?"geodetic":"mercator",initExtent:t.initExtent||(0,O.transformExtent)(B,j,"EPSG:4326")};k($)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"geoserver-wfs":{var It=b+_+"service=WFS&request=getCapabilities";h.default.get(It,{headers:{"content-type":"application/xml"}}).then(function(l){(0,x.default)(this,X);var T;try{T=(0,o.LoadXmlText)(l.headers?l.data:l)}catch{M(new Error(c(t.label)));return}for(var n=T.getElementsByTagName("FeatureTypeList")[0].children,B,j=0,$=n.length;j<$;j++){for(var I=0,rt=n[j].children.length;I<rt;I++)if(n[j].children[I].nodeName==="Name"&&V(n[j].children[I].innerHTML.toString(),t.visibleLayers[0].toString())){B=n[j];break}if(B)break}for(var Q=[],nt=0,J=B.children.length;nt<J;nt++)if(B.children[nt].nodeName==="ows:WGS84BoundingBox"){var ft=B.children[nt].children[0].innerHTML.split(" "),dt=B.children[nt].children[1].innerHTML.split(" ");Q=[Number(ft[0]),Number(ft[1]),Number(dt[0]),Number(dt[1])];break}var ct={initExtent:t.initExtent||Q};k(ct)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"geoserver-wmts":{var qt=(0,a.getCapabilitiesUrl)(t);h.default.get(qt,{headers:{"content-type":"application/xml"}}).then(function(l){var T=this,n;(0,x.default)(this,X);var B=l.headers?l.data:l,j=new W.default,$,I,rt,Q;try{$=j.read(B);var nt=$.Contents.Layer,J=$.Contents.TileMatrixSet,ft=(0,A.default)(nt).call(nt,function(ot){return(0,x.default)(this,T),ot.Identifier===t.visibleLayers[0]}.bind(this)),dt=ft.TileMatrixSetLink[0].TileMatrixSet;if(rt=ft.WGS84BoundingBox,I=(0,A.default)(J).call(J,function(ot){return(0,x.default)(this,T),ot.Identifier===dt}.bind(this)).SupportedCRS.replace("urn:ogc:def:crs:","").replace("::",":"),(0,v.registerProj)(I),Q=(0,C.default)("EPSG:4490",$,{layer:t.visibleLayers[0],otherPixel:t.sourceType==="arcgis",pixelSize:t.pixelSize,targetSRS:I,matrixSet:t.matrixSet,requestEncoding:"KVP"}),t.wmtsUrl==="true"||t.wmtsUrl===!0)Q.urls[0]=t.url;else{var ct=(0,a.getUrlParams)(t.url);if(ct?.length>0){var ut=r(ct),bt;try{for(ut.s();!(bt=ut.n()).done;){var Tt=bt.value;Q.urls[0]=(0,a.addParamToUrl)(Q.urls[0],Tt.name,Tt.value)}}catch(ot){ut.e(ot)}finally{ut.f()}}}t.authkey&&(Q.urls[0]=(0,a.addParamToUrl)(Q.urls[0],"authkey",t.authkey));var pt=0;t.switchOriginXY?Q.tileGrid.origins_.forEach(function(ot){(0,x.default)(this,T),ot=[ot[1],ot[0]],Q.tileGrid.origins_[pt]=ot,pt=pt+1}.bind(this)):Q.tileGrid.origins_.forEach(function(ot){(0,x.default)(this,T),ot[0]===90&&ot[1]===-180&&(ot=[ot[1],ot[0]],Q.tileGrid.origins_[pt]=ot,pt=pt+1)}.bind(this)),Q.crossOrigin="anonymous",t.isOverLimt&&(Q.tileGrid.fullTileRanges_=[])}catch(ot){throw new Error(ot)}var Vt={WMTSSourceOptions:Q,CapabilitiesXml:B,result:$,WGS84BoundingBox:rt,projection:I,tilingScheme:t.tilingScheme||((n=(0,v.getProj)(I))===null||n===void 0?void 0:n.getUnits())==="degrees"?"geodetic":"mercator",initExtent:t.initExtent||rt};k(Vt)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"wmts":case"arcgis-wmts":{var Dt,Wt,Ut=b;(Dt=t.url)!==null&&Dt!==void 0&&(Wt=Dt.toUpperCase())!==null&&Wt!==void 0&&Wt.match(/WMTS\/?$/)||(Ut=(0,a.appendPath)(Ut,"WMTS")),h.default.get(Ut,{headers:{"content-type":"application/xml"}}).then(function(l){var T=this,n;(0,x.default)(this,X);var B=l.headers?l.data:l,j=new W.default,$,I,rt,Q;try{$=j.read(B);var nt=$.Contents.Layer,J=$.Contents.TileMatrixSet,ft=(0,A.default)(nt).call(nt,function(ut){return(0,x.default)(this,T),ut.Identifier===t.visibleLayers[0]}.bind(this)),dt=ft.TileMatrixSetLink[0].TileMatrixSet;rt=ft.WGS84BoundingBox,I=(0,A.default)(J).call(J,function(ut){return(0,x.default)(this,T),ut.Identifier===dt}.bind(this)).SupportedCRS.replace("urn:ogc:def:crs:","").replace("::",":"),(0,v.registerProj)(I),Q=(0,C.default)("EPSG:4490",$,{layer:t.visibleLayers[0],pixelSize:t.pixelSize,targetSRS:I,requestEncoding:"KVP"})}catch(ut){throw new Error(ut)}var ct={WMTSSourceOptions:Q,CapabilitiesXml:B,result:$,WGS84BoundingBox:rt,projection:I,tilingScheme:t.tilingScheme||((n=(0,v.getProj)(I))===null||n===void 0?void 0:n.getUnits())==="degrees"?"geodetic":"mercator",initExtent:t.initExtent||rt};k(ct)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"vectorTiled":{var _t=(0,a.addParamToUrl)(b,"f","json");h.default.get(_t).then(function(l){var T;(0,x.default)(this,X),l=l.headers?l.data:l;var n="";if((0,et.default)(l).toLowerCase()==="string")try{n=JSON.parse(l)}catch{M(new Error("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"));return}else n=l;var B=[],j=[],$=[],I=[],rt=[],Q="EPSG:"+(n.fullExtent.spatialReference.wkid===102100?3857:n.fullExtent.spatialReference.wkid);(0,v.registerProj)(Q),$.push(n.tileInfo.origin.x,n.tileInfo.origin.y),j.push(n.fullExtent.xmin,n.fullExtent.ymin,n.fullExtent.xmax,n.fullExtent.ymax),B.push(n.initialExtent.xmin,n.initialExtent.ymin,n.initialExtent.xmax,n.initialExtent.ymax),rt.push(n.tileInfo.rows,n.tileInfo.cols);for(var nt=0,J=n.tileInfo.lods.length;nt<J;nt++)I.push(n.tileInfo.lods[nt].resolution);var ft={projection:Q,tilingScheme:t.tilingScheme||((T=(0,v.getProj)(Q))===null||T===void 0?void 0:T.getUnits())==="degrees"?"geodetic":"mercator",origin:$,initExtent:t.initExtent||(0,O.transformExtent)(B,Q,"EPSG:4326"),extent:j,resolutions:I,tileSize:rt,extUrl:n.tiles&&n.tiles.length===1?n.tiles[0]:"/tile/{z}/{y}/{x}.pbf",defaultStyles:n.defaultStyles};k(ft)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"feature-pbf":{var te=(0,a.addParamToUrl)(b,"f","json");h.default.get(te).then(function(l){var T;(0,x.default)(this,X),l=l.headers?l.data:l;var n="";if((0,et.default)(l).toLowerCase()==="string")try{n=JSON.parse(l)}catch{M(new Error("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"));return}else n=l;var B=[],j="";n.fullExtent.spatialReference.wkt?((0,v.registerProj)(n.fullExtent.spatialReference.wkt,[n.fullExtent.xmin,n.fullExtent.ymin,n.fullExtent.xmax,n.fullExtent.ymax]),j=n.fullExtent.spatialReference.wkt):(j="EPSG:"+n.fullExtent.spatialReference.wkid,(0,v.registerProj)(j)),n.initialExtent.xmin!=="NaN"?B.push(n.initialExtent.xmin,n.initialExtent.ymin,n.initialExtent.xmax,n.initialExtent.ymax):B.push(n.fullExtent.xmin,n.fullExtent.ymin,n.fullExtent.xmax,n.fullExtent.ymax);var $={projection:j,tilingScheme:t.tilingScheme||((T=(0,v.getProj)(j))===null||T===void 0?void 0:T.getUnits())==="degrees"?"geodetic":"mercator",initExtent:t.initExtent||(0,O.transformExtent)(B,j,"EPSG:4326")};k($)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"arcgis-wfs":case"wfs":{var ee=b+_+"service=WFS&request=getCapabilities";h.default.get(ee,{headers:{"content-type":"application/xml"}}).then(function(l){(0,x.default)(this,X);for(var T=(0,o.LoadXmlText)(l.headers?l.data:l),n=T.getElementsByTagName("wfs:FeatureTypeList")[0].children,B,j=0,$=n.length;j<$;j++){for(var I=0,rt=n[j].children.length;I<rt;I++){var Q=(0,s.getGeoLayerName)(n[j].children[I].innerHTML);if(n[j].children[I].nodeName==="wfs:Name"&&(n[j].children[I].innerHTML===t.visibleLayers[0]||Q===t.visibleLayers[0])){B=n[j];break}}if(B)break}for(var nt=[],J=0,ft=B.children.length;J<ft;J++)if(B.children[J].nodeName==="ows:WGS84BoundingBox"){var dt=B.children[J].children[0].innerHTML.split(" "),ct=B.children[J].children[1].innerHTML.split(" ");nt=[Number(dt[0]),Number(dt[1]),Number(ct[0]),Number(ct[1])];break}var ut={initExtent:t.initExtent||nt};k(ut)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"gaode":case"baidu":case"baidu_vector":case"baidu_image":case"baidu_road":{var re={reject:M,initExtent:t.initExtent};k(re);break}case"offline":{var zt={initExtent:t.initExtent};k(zt),window.plus?k(zt):document.addEventListener("plusready",function(){(0,x.default)(this,X),k(zt)}.bind(this));break}case"geojson":{h.default.get(b,{headers:{"content-type":"application/json"}}).then(function(l){(0,x.default)(this,X);var T=l.headers?l.data:l,n={geojson:T,initExtent:t.initExtent};k(n)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"arcgis-wmts-gd":{h.default.get(b).then(function(l){(0,x.default)(this,X),l=l.headers?l.data:l;var T={xml:l,initExtent:t.initExtent};k(T)}.bind(this)).catch(function(l){(0,x.default)(this,X),P.error(l),M(new Error(c(t.label)))}.bind(this));break}case"xyz":{var ne={initExtent:t.initExtent};k(ne);break}case"3dtiles":case"terrain":case"S3M":case"I3S":case"gltf":{var ie={initExtent:t.initExtent};k(ie);break}default:M(new Error("\u672A\u8BC6\u522B\u7684\u56FE\u5C42\u914D\u7F6E"))}}.bind(this))}.bind(this))}function c(t){return"\u52A0\u8F7D'".concat(t,"'\u56FE\u5C42\u670D\u52A1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5730\u5740\u548C\u8FD0\u7EF4\u7AEF\u914D\u7F6E\u9879\u662F\u5426\u6B63\u786E\u3002")}function U(t,L){var G=(0,s.replaceWktProj)(L),b=[],at=new W.default,st=at.read(G),_=st.Contents.Layer,k=D(m)(_,function(M){return t.visibleLayers&&t.visibleLayers.length>0&&M.Identifier===t.visibleLayers[0]?t.visibleLayers[0]:t.name});return b=k.WGS84BoundingBox,b}function V(t,L){if(t===L)return!0;var G=t.split(":"),b=L.split(":"),at=G[G.length-1],st=b[b.length-1];return at===st}var z=f;y.default=z},36374:function(F,y,e){"use strict";var P=e(85208),D=e(59791),q=e(22466),K=e(83393),Y=e(5077),tt=e(20314),Z=e(26352),et=e(40639),x=e(43586),p=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.DEFAULT_SYMBOL=void 0,y.getRealSymbol=S,y.getRealSymbolByAsync=o;var g=p(e(11323)),H=p(e(85208)),N=p(e(38006)),R=p(e(22466)),E=p(e(43389)),A=p(e(34749)),O=e(83300);function W(r,i){var u=typeof et<"u"&&x(r)||r["@@iterator"];if(!u){if(Array.isArray(r)||(u=w(r))||i&&r&&typeof r.length=="number"){u&&(r=u);var f=0,c=function(){};return{s:c,n:function(){return f>=r.length?{done:!0}:{done:!1,value:r[f++]}},e:function(L){throw L},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var U=!0,V=!1,z;return{s:function(){u=u.call(r)},n:function(){var L=u.next();return U=L.done,L},e:function(L){V=!0,z=L},f:function(){try{!U&&u.return!=null&&u.return()}finally{if(V)throw z}}}}function w(r,i){var u;if(r){if(typeof r=="string")return m(r,i);var f=tt(u=Object.prototype.toString.call(r)).call(u,8,-1);if(f==="Object"&&r.constructor&&(f=r.constructor.name),f==="Map"||f==="Set")return Z(r);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return m(r,i)}}function m(r,i){(i==null||i>r.length)&&(i=r.length);for(var u=0,f=new Array(i);u<i;u++)f[u]=r[u];return f}function h(r,i){var u=P(r);if(D){var f=D(r);i&&(f=q(f).call(f,function(c){return K(r,c).enumerable})),u.push.apply(u,f)}return u}function a(r){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?h(Object(u),!0).forEach(function(f){(0,E.default)(r,f,u[f])}):Y?Object.defineProperties(r,Y(u)):h(Object(u)).forEach(function(f){Object.defineProperty(r,f,K(u,f))})}return r}var v={type:"polygon",styleOptions:{fill:!0,color:"rgb(255, 255, 255)",opacity:.2,outline:!0,outlineColor:"rgb(1, 191, 255)",outlineWidth:1,outlineOpacity:1}};y.DEFAULT_SYMBOL=v;function o(r,i){return s.apply(this,arguments)}function s(){return s=(0,A.default)(g.default.mark(function r(i,u){return g.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,S(i,u).symbol;case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},r)})),s.apply(this,arguments)}function S(r,i){if(r){var u=r.styleOptions||v,f;if(r.styleStepOptions&&r.styleStepOptions.length>0){var c=r.minValue;c===null&&(c=Number.MIN_VALUE);var U=r.styleField,V=i[U];f=C(r.styleStepOptions,c,V);var z;f!=null&&(z=r.styleStepOptions[f].style),z&&(u=a(a({},r.styleOptions),z))}else if(r.styleFieldOptions&&(0,H.default)(r.styleFieldOptions).length>0){var t=r.styleField,L=r.styleField2,G=r.styleField3,b=i[t]?i[t]:"";if(L){var at=i[L]?i[L]:"";b+=", "+at}if(G){var st=i[G]?i[G]:"";b+=", "+st}f=b;var _=r.styleFieldOptions[b];_&&(u=a(a({},r.styleOptions),_))}else if(r.styleFilterOptions&&r.styleFilterOptions.length>0){var k=new N.default,M=self.keyField?i[self.keyField]:null;f=d(r.styleFilterOptions,i,r.filterTemplates),M&&k.set(M,f);var lt;f!=null&&(lt=r.styleFilterOptions[f].style),lt&&(u=a(a({},r.styleOptions),lt))}return{filedIndex:f,symbol:u}}else return{filedIndex:null,symbol:v}}function C(r,i,u){for(var f in r){var c=r[f].value;if(u>=i&&u<=c)return f;i=c}}function d(r,i,u){var f=W(u),c;try{for(f.s();!(c=f.n()).done;){var U=c.value,V=(0,O.getIndexByTemplate)(i,U);if(r[V])return V}}catch(G){f.e(G)}finally{f.f()}for(var z in r){var t=r[z].filterObj;if(t){if((0,O.isMatchFilter)(i,t))return z}else{var L=(0,R.default)(r[z]);if((0,O.isMatchCql)(i,L))return z}}}},57463:function(F,y,e){"use strict";var P=e(85208),D=e(59791),q=e(22466),K=e(83393),Y=e(5077),tt=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.symbolParse=m;var Z=tt(e(43389)),et=tt(e(42579)),x=tt(e(78756)),p=tt(e(39082)),g=e(67040),H=tt(e(5224)),N=tt(e(28874)),R=e(10563);function E(a,v){var o=P(a);if(D){var s=D(a);v&&(s=q(s).call(s,function(S){return K(a,S).enumerable})),o.push.apply(o,s)}return o}function A(a){for(var v=1;v<arguments.length;v++){var o=arguments[v]!=null?arguments[v]:{};v%2?E(Object(o),!0).forEach(function(s){(0,Z.default)(a,s,o[s])}):Y?Object.defineProperties(a,Y(o)):E(Object(o)).forEach(function(s){Object.defineProperty(a,s,K(o,s))})}return a}var O=0,W=1,w=2;function m(a){var v=this;return new x.default(function(o,s){var S=this;(0,et.default)(this,v);var C;if(a.symbol?C=a.symbol.merge?w:O:C=W,C===O)o();else switch(a.type){case"feature":case"feature-pbf":{var d=(0,g.appendPath)(a.url,a.visibleLayers[0]);d=(0,g.addParamToUrl)(d,"f","json"),d=(0,g.addParamByData)(d,a),(0,p.default)(d).then(function(u){(0,et.default)(this,S);var f=u.style,c=u.f;a.type==="feature-pbf"&&!a.supportedQueryFormat&&(a.supportedQueryFormat=c);var U=h(f);a.symbol=C===w?(0,R.mergeObjs)(U,a.symbol):U,o()}.bind(this)).catch(function(u){(0,et.default)(this,S),s(u)}.bind(this));break}case"vectorTiled":{var r=a.defaultStyles?a.defaultStyles:"resources/styles",i=a.url+"/"+r;i=(0,g.addParamByData)(i,a),(0,H.default)(i).then(function(u){(0,et.default)(this,S);var f=h(u);a.symbol=C===w?A(A({},f),a.symbol):f,o()}.bind(this)).catch(function(u){(0,et.default)(this,S),s(u)}.bind(this));break}case"geoserver-wfs":case"geoserver-vectorTiled":(0,N.default)(a).then(function(u){(0,et.default)(this,S);var f=h(u);a.symbol=C===w?A(A({},f),a.symbol):f,o()}.bind(this)).catch(function(u){(0,et.default)(this,S),s(u)}.bind(this));break;default:o();break}}.bind(this))}function h(a){return a.styleOptions||(a.styleOptions={}),a.styleOptions.clampToGround=!0,a.styleOptions.classificationType=2,a}},39082:function(F,y,e){"use strict";var P=e(49500),D=e(20314),q=e(26352),K=e(40639),Y=e(43586),tt=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.default=A;var Z=tt(e(29870)),et=tt(e(42579)),x=tt(e(78756)),p=tt(e(77019)),g=tt(e(22305));function H(o,s){var S=typeof K<"u"&&Y(o)||o["@@iterator"];if(!S){if(Array.isArray(o)||(S=N(o))||s&&o&&typeof o.length=="number"){S&&(o=S);var C=0,d=function(){};return{s:d,n:function(){return C>=o.length?{done:!0}:{done:!1,value:o[C++]}},e:function(c){throw c},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r=!0,i=!1,u;return{s:function(){S=S.call(o)},n:function(){var c=S.next();return r=c.done,c},e:function(c){i=!0,u=c},f:function(){try{!r&&S.return!=null&&S.return()}finally{if(i)throw u}}}}function N(o,s){var S;if(o){if(typeof o=="string")return R(o,s);var C=D(S=Object.prototype.toString.call(o)).call(S,8,-1);if(C==="Object"&&o.constructor&&(C=o.constructor.name),C==="Map"||C==="Set")return q(o);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return R(o,s)}}function R(o,s){(s==null||s>o.length)&&(s=o.length);for(var S=0,C=new Array(s);S<s;S++)C[S]=o[S];return C}var E={esriSLSSolid:"solid"};function A(o){var s=this;return new x.default(function(S,C){var d=this;(0,et.default)(this,s),p.default.get(o).then(function(r){var i,u;(0,et.default)(this,d),r=r.headers?r.data:r;var f="";if((0,Z.default)(r).toLowerCase()==="string")try{f=JSON.parse(r)}catch{C(new Error("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"));return}else f=r;var c=((i=f.supportedQueryFormats)===null||i===void 0||(u=i.toLowerCase())===null||u===void 0?void 0:u.indexOf("pbf"))>-1?"pbf":"json",U=f.geometryType;if(f.drawingInfo){var V=f.drawingInfo.renderer,z=V.type;if(z==="simple"){var t=V.symbol;if(t){var L={type:O(U)};L.styleOptions=W(t,U),S({style:L,f:c})}}else if(z==="uniqueValue"){var G=V.defaultSymbol,b={type:O(U)};G&&(b.styleOptions=W(G,U)),b.styleField=v(f.fields,V.field1),b.styleField2=v(f.fields,V.field2),b.styleField3=v(f.fields,V.field3),b.styleFieldOptions={};var at=H(V.uniqueValueInfos),st;try{for(at.s();!(st=at.n()).done;){var _=st.value;b.styleFieldOptions[_.value]=W(_.symbol,U)}}catch(mt){at.e(mt)}finally{at.f()}b.styleFieldOptions[""]&&(b.styleOptions=b.styleFieldOptions[""]),S({style:b,f:c})}else if(z==="classBreaks"){var k=V.defaultSymbol,M={type:O(U)};k&&(M.styleOptions=W(k,U)),M.styleField=V.field,M.styleStepOptions=[],M.minValue=V.minValue?V.minValue:Number.MIN_VALUE;var lt=H(V.classBreakInfos),X;try{for(lt.s();!(X=lt.n()).done;){var gt=X.value;M.styleStepOptions.push({value:gt.classMaxValue,style:W(gt.symbol,U)})}}catch(mt){lt.e(mt)}finally{lt.f()}S({style:M,f:c})}}}.bind(this)).catch(function(){(0,et.default)(this,d),C(new Error("\u56FE\u5C42\u65E0\u6CD5\u83B7\u53D6\u6837\u5F0F\u914D\u7F6E\uFF0C\u8BF7\u68C0\u67E5\u53EF\u89C1\u56FE\u5C42\u662F\u5426\u6B63\u5E38!"))}.bind(this))}.bind(this))}function O(o){switch(o){case"esriGeometryPolygon":return"polygon";case"esriGeometryPolyline":return"polyline";case"esriGeometryPoint":return"point";default:return"polygon"}}function W(o,s){switch(s){case"esriGeometryPolygon":return w(o);case"esriGeometryPolyline":return m(o);case"esriGeometryPoint":return h(o);default:return w(o)}}function w(o){if(o){var s,S,C,d={};return((s=o.color)===null||s===void 0?void 0:s.length)===4&&(d.fill=!0,d.color=a(o.color),d.opacity=o.color[3]/255),((S=o.outline)===null||S===void 0||(C=S.color)===null||C===void 0?void 0:C.length)===4&&(d.outline=!0,d.outlineColor=a(o.outline.color),d.outlineOpacity=o.outline.color[3]/255,d.outlineWidth=o.outline.width),d}else return{fill:!0,color:"rgba(245,245,245)",opacity:.8,outline:!0,outlineColor:"rgb(200,200,200)",outlineWidth:1,outlineOpacity:1}}function m(o){if(o){var s,S={};return((s=o.color)===null||s===void 0?void 0:s.length)===4&&(S.lineType=E[o.style]?E[o.style]:"solid",S.width=o.width,S.color=a(o.color),S.opacity=o.color[3]/255),S}else return{fill:!0,color:"rgba(245,245,245)",opacity:.8,outline:!0,outlineColor:"rgb(200,200,200)",outlineWidth:1,outlineOpacity:1}}function h(o){if(o){var s={};if(o.type==="esriSMS"){var S,C;s.width=o.width,s.radius=o.size,s.color=a(o.color),s.opacity=o.color[3]/255,((S=o.outline)===null||S===void 0||(C=S.color)===null||C===void 0?void 0:C.length)===4&&(s.outlineColor=a(o.outline.color),s.outlineOpacity=o.outline.color[3]/255,s.outlineWidth=o.outline.width?o.outline.width:1)}else o.type==="esriPMS"&&(s.image="data:image/jpg;base64,"+o.imageData);if(o.labelingInfo&&o.labelingInfo.length>0){var d,r=o.labelingInfo[0],i=r.symbol;s.label={text:r.labelExpression.replace("[","{").replace("]","}"),font_size:(d=i.font)===null||d===void 0?void 0:d.size,color:a(i.color),opacity:i.color[3]/255,border:!0,border_color:"#000000",pixelOffset:[i.xoffset,i.yoffset],showBackground:!0,backgroundColor:"#000000",background_opacity:.5},i.backgroundColor&&(s.label.showBackground=!0,s.label.backgroundColor=a(i.backgroundColor),s.label.background_opacity=i.backgroundColor[3]/255),i.borderLineColor&&(s.label.border=!0,s.label.border_color=a(i.borderLineColor),s.label.border_opacity=i.borderLineColor[3]/255,s.label.border_width=i.borderLineSize)}return s}else return{color:"#ffffff",pixelSize:1,outlineColor:"#FED976",outlineWidth:1}}function a(o){return(0,g.default)(o).hex()}function v(o,s){if(s){var S=H(o),C;try{for(S.s();!(C=S.n()).done;){var d=C.value;if(d.name===s)return s}}catch(f){S.e(f)}finally{S.f()}var r=H(o),i;try{for(r.s();!(i=r.n()).done;){var u=i.value;if(u.alias===s)return u.name}}catch(f){r.e(f)}finally{r.f()}return P.warn("Feature\u6837\u5F0F\u89E3\u6790:\u6CA1\u6709\u5339\u914D\u7684\u5B57\u6BB5"),s}else return null}},5224:function(F,y,e){"use strict";var P=e(20314),D=e(26352),q=e(40639),K=e(43586),Y=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.default=E;var tt=Y(e(29870)),Z=Y(e(42579)),et=Y(e(78756)),x=Y(e(22466)),p=Y(e(77019)),g=Y(e(22305));function H(w,m){var h=typeof q<"u"&&K(w)||w["@@iterator"];if(!h){if(Array.isArray(w)||(h=N(w))||m&&w&&typeof w.length=="number"){h&&(w=h);var a=0,v=function(){};return{s:v,n:function(){return a>=w.length?{done:!0}:{done:!1,value:w[a++]}},e:function(d){throw d},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,S;return{s:function(){h=h.call(w)},n:function(){var d=h.next();return o=d.done,d},e:function(d){s=!0,S=d},f:function(){try{!o&&h.return!=null&&h.return()}finally{if(s)throw S}}}}function N(w,m){var h;if(w){if(typeof w=="string")return R(w,m);var a=P(h=Object.prototype.toString.call(w)).call(h,8,-1);if(a==="Object"&&w.constructor&&(a=w.constructor.name),a==="Map"||a==="Set")return D(w);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(w,m)}}function R(w,m){(m==null||m>w.length)&&(m=w.length);for(var h=0,a=new Array(m);h<m;h++)a[h]=w[h];return a}function E(w){var m=this;return new et.default(function(h,a){var v=this;(0,Z.default)(this,m),p.default.get(w).then(function(o){(0,Z.default)(this,v),o=o.headers?o.data:o;var s="";if((0,tt.default)(o).toLowerCase()==="string")try{s=JSON.parse(o)}catch{a("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458");return}else s=o;if(s.layers){if(s.layers.length===1){var S=s.layers[0].paint,C={styleOptions:A(S)};h(C)}else if(s.layers.length>1){var d={styleField:(0,x.default)(s.layers[0])[1],styleFieldOptions:{},styleOptions:A(s.layers[0].paint)},r=H(s.layers),i;try{for(r.s();!(i=r.n()).done;){var u=i.value,f=u.paint;(0,x.default)(u)[1]===d.styleField&&(d.styleFieldOptions[(0,x.default)(u)[2]]=A(f))}}catch(c){r.e(c)}finally{r.f()}h(d)}}}.bind(this)).catch(function(){(0,Z.default)(this,v),a("\u56FE\u5C42\u65E0\u6CD5\u83B7\u53D6\u6837\u5F0F\u914D\u7F6E\uFF0C\u8BF7\u68C0\u67E5\u53EF\u89C1\u56FE\u5C42\u662F\u5426\u6B63\u5E38!")}.bind(this))}.bind(this))}function A(w){return{color:O(w["fill-color"]),opacity:W(w["fill-color"]),outlineColor:O(w["fill-outline-color"]),outlineWidth:1,outlineOpacity:W(w["fill-outline-color"])}}function O(w){return(0,g.default)(w).hex()}function W(w){return(0,g.default)(w).alpha()}},28874:function(F,y,e){"use strict";var P=e(49500),D=e(20314),q=e(26352),K=e(40639),Y=e(43586),tt=e(85208),Z=e(59791),et=e(22466),x=e(83393),p=e(5077),g=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.default=o,y.parseSymbolizers=S;var H=g(e(43389)),N=g(e(42579)),R=g(e(78756)),E=g(e(81806)),A=g(e(22466)),O=g(e(18853)),W=g(e(77019));function w(d,r){var i=tt(d);if(Z){var u=Z(d);r&&(u=et(u).call(u,function(f){return x(d,f).enumerable})),i.push.apply(i,u)}return i}function m(d){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?w(Object(i),!0).forEach(function(u){(0,H.default)(d,u,i[u])}):p?Object.defineProperties(d,p(i)):w(Object(i)).forEach(function(u){Object.defineProperty(d,u,x(i,u))})}return d}function h(d,r){var i=typeof K<"u"&&Y(d)||d["@@iterator"];if(!i){if(Array.isArray(d)||(i=a(d))||r&&d&&typeof d.length=="number"){i&&(d=i);var u=0,f=function(){};return{s:f,n:function(){return u>=d.length?{done:!0}:{done:!1,value:d[u++]}},e:function(t){throw t},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,U=!1,V;return{s:function(){i=i.call(d)},n:function(){var t=i.next();return c=t.done,t},e:function(t){U=!0,V=t},f:function(){try{!c&&i.return!=null&&i.return()}finally{if(U)throw V}}}}function a(d,r){var i;if(d){if(typeof d=="string")return v(d,r);var u=D(i=Object.prototype.toString.call(d)).call(i,8,-1);if(u==="Object"&&d.constructor&&(u=d.constructor.name),u==="Map"||u==="Set")return q(d);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return v(d,r)}}function v(d,r){(r==null||r>d.length)&&(r=d.length);for(var i=0,u=new Array(r);i<r;i++)u[i]=d[i];return u}function o(d){var r=this;return new R.default(function(i,u){var f=this;(0,N.default)(this,r);var c=d.url,U=d.visibleLayers[0],V="service=WMS&version=1.1.0&request=GetLegendGraphic&layer=".concat(U,"&format=application/json");d.authkey&&(V+="&authkey="+d.authkey),c=c.replace("gwc/service/wmts","wms"),c=(0,E.default)(c).call(c,"?")?c+"&"+V:c+"?"+V,W.default.get(c).then(function(z){if((0,N.default)(this,f),z.data.Legend){var t=z.data?z.data.Legend:null;if(t&&t.length>0){var L=s(t[0].rules);i(L)}else u()}}.bind(this)).catch(function(z){(0,N.default)(this,f);var t=z+"";(0,E.default)(t).call(t,"NullPointerException")&&P.warn(d.label+" \u670D\u52A1\u4E0D\u652F\u6301\u6837\u5F0F\u89E3\u6790"),u(t)}.bind(this))}.bind(this))}function s(d){var r,i=[],u=h(d),f;try{for(u.s();!(f=u.n()).done;){var c=f.value,U=void 0;c.symbolizers&&c.symbolizers.length>0&&(U=S(c.symbolizers)),U.name=c.name,U.filter=(0,A.default)(c),U.ElseFilter=c.ElseFilter,i.push(U)}}catch(L){u.e(L)}finally{u.f()}if(i.length===0)return P.warn("geoserver\u670D\u52A1\u4E0D\u5B58\u5728\u53EF\u7528\u7684rule"),null;if(i.length===1)return r={type:i[0].type,styleOptions:i[0].style},r;r={type:i[0].type,styleFilterOptions:[]};var V=h(i),z;try{for(V.s();!(z=V.n()).done;){var t=z.value;(0,A.default)(t)?r.styleFilterOptions.push(t):t.ElseFilter?r.styleOptions=t.style:P.warn("\u5B58\u5728\u5F02\u5E38rule,\u53EF\u8054\u7CFB\u7BA1\u7406\u5458\u6392\u67E5")}}catch(L){V.e(L)}finally{V.f()}return r}function S(d){var r=["Polygon","Line","Point","Text"],i={Polygon:[],Line:[],Point:[],Text:[]},u=h(d),f;try{for(u.s();!(f=u.n()).done;){var c=f.value,U=h(r),V;try{for(U.s();!(V=U.n()).done;){var z=V.value;c[z]&&i[z].push(c[z])}}catch(lt){U.e(lt)}finally{U.f()}}}catch(lt){u.e(lt)}finally{u.f()}var t={},L={};if(i.Polygon.length>0){t.type="polygon";var G=i.Polygon[0];if(i.Line.length>0){var b=i.Line[0];G=m(m({},G),b)}var at=(0,O.default)(G);at&&(L.fill=!0,L.color=(0,O.default)(G),L.opacity=G["fill-opacity"]);var st=G.stroke;st&&(L.outline=!0,L.outlineColor=G.stroke,L.outlineOpacity=G["stroke-opacity"],L.outlineWidth=G["stroke-width"]);var _=G["graphic-fill"];_&&(L.image=_.url)}else if(i.Line.length>0){t.type="polyline";var k=i.Line[0],M=k.stroke;M&&(L.color=k.stroke,L.opacity=k["stroke-opacity"],L.width=k["stroke-width"])}else i.Point.length>0&&(t.type="point",L=C(i.Point));if(t.type)return t.style=L,t}function C(d){var r=Number(d.size),i=d[0].graphic;if(d[1]&&i){var u=d[1].graphic,f=Number(d[1].size);r>f?(i.stroke=(0,O.default)(u),i["stroke-opacity"]=u["fill-opacity"],r=r-f):(u.stroke=(0,O.default)(i),u["stroke-opacity"]=i["fill-opacity"],r=f-r,i=u)}var c={},U=(0,O.default)(i);U&&(c.fill=!0,c.color=(0,O.default)(i),c.opacity=i["fill-opacity"],c.radius=r);var V=i.stroke;return V&&(c.outline=!0,c.outlineColor=i.stroke,c.outlineOpacity=i["stroke-opacity"],c.outlineWidth=i["stroke-width"]),c}},77019:function(F,y,e){"use strict";var P=e(19534);Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var D=P(e(10299)),q=D.default.create({timeout:30*1e3}),K=q;y.default=K},67040:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(19534);Object.defineProperty(exports,"__esModule",{value:!0}),exports.addParamByData=addParamByData,exports.addParamToUrl=addParamToUrl,exports.appendPath=appendPath,exports.getBoolean=getBoolean,exports.getCapabilitiesUrl=getCapabilitiesUrl,exports.getQueryVariable=getQueryVariable,exports.getUrlParams=getUrlParams;var _map=_interopRequireDefault(__webpack_require__(28866)),_newArrowCheck2=_interopRequireDefault(__webpack_require__(42579));function addParamToUrl(F,y,e){var P=this,D=new RegExp("[\\?&]("+y+"=)([^&]*)","gi");if(F.match(D))F=F.replace(D,function(tt){return(0,_newArrowCheck2.default)(this,P),tt[0]+y+"="+e}.bind(this));else{var q=y+"="+e,K=F.indexOf("?"),Y=F;K>-1&&F.indexOf("?http")>-1&&(Y=F.substring(K+1),K=Y.indexOf("?")),K<0?F+="?":K>=0&&K!==Y.length-1&&(F+="&"),F=F+q}return F}function appendPath(F,y){var e=F.indexOf("?"),P=F;if(e>-1&&F.indexOf("?http")>-1){var D=e+1;P=F.substring(e+1),e=P.indexOf("?"),e>-1&&(e+=D)}return e>-1?F.substring(0,e)+"/"+y+F.substring(e):F+"/"+y}function getCapabilitiesUrl(F){var y=addParamToUrl(F.url,"SERVICE","WMTS");return y=addParamToUrl(y,"request","getCapabilities"),y=addParamToUrl(y,"version","1.0.0"),y=addParamByData(y,F),y}function addParamByData(F,y){return y.authkey&&(F=addParamToUrl(F,"authkey",y.authkey)),y.appid&&(F=addParamToUrl(F,"appid",y.appid)),F}function getQueryVariable(F,y){if(F.indexOf("?")>-1)for(var e=F.split("?")[1],P=e.split("&"),D=0;D<P.length;D++){var q=P[D].split("=");if(q[0]===y)return q[1]}return!1}function getUrlParams(F){var y=F.indexOf("jsp?");if(y>-1){if(F.indexOf("?",y+3)>-1){var e=F.split("?")[2];return createParamByQuery(e)}}else if(F.indexOf("?")>-1){var P=F.split("?")[1];return createParamByQuery(P)}return[]}function createParamByQuery(F){var y=this,e=F.split("&");return(0,_map.default)(e).call(e,function(P){(0,_newArrowCheck2.default)(this,y);var D=P.split("=");return{name:D[0],value:D[1]}}.bind(this))}function getBoolean(booleanStr){try{return eval(booleanStr)}catch(F){return!1}}},70515:function(F,y,e){F.exports=e(49844)},36225:function(F,y,e){"use strict";var P=e(32242),D=e(67487),q=String.prototype;F.exports=function(K){var Y=K.endsWith;return typeof K=="string"||K===q||P(q,K)&&Y===q.endsWith?D:Y}},67487:function(F,y,e){"use strict";e(1381);var P=e(18893);F.exports=P("String","endsWith")},1381:function(F,y,e){"use strict";var P=e(90434),D=e(43806),q=e(68428).f,K=e(9505),Y=e(47482),tt=e(72679),Z=e(64734),et=e(2541),x=e(96338),p=D("".slice),g=Math.min,H=et("endsWith"),N=!x&&!H&&!!function(){var R=q(String.prototype,"endsWith");return R&&!R.writable}();P({target:"String",proto:!0,forced:!N&&!H},{endsWith:function(E){var A=Y(Z(this));tt(E);var O=arguments.length>1?arguments[1]:void 0,W=A.length,w=O===void 0?W:g(K(O),W),m=Y(E);return p(A,w-m.length,w)===m}})},49844:function(F,y,e){"use strict";var P=e(36225);F.exports=P}}]);
