"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[49085],{49085:function(f,r,i){i.r(r),i.d(r,{default:function(){return W}});var d=function(){var e=this,a=e._self._c;return a("div",[a("el-form",{ref:"form",attrs:{size:"mini","label-width":"80px","label-position":"right",model:e.currentWidget.dataset}},[a("el-form-item",{attrs:{label:"\u6570\u636E\u7C7B\u578B"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"},on:{change:e.changeDatasetType},model:{value:e.currentWidget.dataset.type,callback:function(t){e.$set(e.currentWidget.dataset,"type",t)},expression:"currentWidget.dataset.type"}},e._l(e.$$global_editor.dataSourcTypeList3,function(t){return a("el-option",{key:t.value,attrs:{disabled:t.disabled,label:t.label,value:t.value}})}),1)],1),a("el-form-item",{attrs:{label:"\u9996\u7EA7\u7236\u503C"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"\u7B2C\u4E00\u7EA7\u8282\u70B9\u7684\u7236\u503C",size:"mini"},on:{input:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.firstPid,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"firstPid",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.firstPid"}})],1),a("el-form-item",{staticStyle:{"margin-top":"12px"},attrs:{label:"\u9009\u9879\u7684\u503C"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{filterable:"",size:"mini",placeholder:"\u8BF7\u9009\u62E9\u5217\u9009\u9879\u503C\u7684\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.id,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"id",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.id"}},e._l(e.dimensions_alias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u9009\u9879\u7236\u503C"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u5217\u9009\u9879\u503C\u7684\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.pid,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"pid",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.pid"}},e._l(e.dimensions_alias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u9009\u9879\u6807\u7B7E",prop:"label"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u9009\u9879\u6807\u7B7E\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.name,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"name",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.name"}},e._l(e.dimensions_alias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u9009\u9879\u56FE\u6807",prop:"label"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u9009\u9879\u6807\u7B7E\u7684\u56FE\u6807"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.icon,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"icon",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.icon"}},e._l(e.dimensions_alias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u6392\u5E8F\u5B57\u6BB5",prop:"label"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u9009\u9879\u6392\u5E8F\u7684\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.sort,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"sort",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.sort"}},e._l(e.dimensions_alias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u662F\u5426\u7981\u7528"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"mini",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u7981\u7528\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.disabled,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"disabled",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.disabled"}},e._l(e.dimensions_alias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u662F\u5426\u9690\u85CF"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"mini",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u9690\u85CF\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.hide,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"hide",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.hide"}},e._l(e.dimensions_alias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias,value:t.name}})}),1)],1),a("setting-dataset",{ref:"settingDataset",attrs:{currentWidget:e.currentWidget},on:{getDataSetData:e.getConfigData,clearDynamicEncode:e.clearDynamicEncode}})],1)],1)},l=[],c=i(589908),o=i(723400),u=i(148836),g={name:"nav-menu-data",components:{SettingDataset:c.Z},props:["currentWidget"],mixins:[o.j],computed:{...(0,u.Se)(["getCanvasSetting"]),dimensions_alias:function(){let n=[];return this.$$lib__.each(this.currentWidget.dataset[this.currentWidget.dataset.type].dimensionsAlias,e=>{let a=JSON.parse(JSON.stringify(e));(!e.alias||e.alias=="")&&(a.alias=e.name),n.push(a)}),this.$$lib__.sortBy(n,"alias")}},methods:{changeDatasetType(){this.$refs.settingDataset.loadPreview(),this.getConfigData()},clearDynamicEncode(){this.currentWidget.dataset[this.currentWidget.dataset.type].encode.firstPid=null,this.currentWidget.dataset[this.currentWidget.dataset.type].encode.id=null,this.currentWidget.dataset[this.currentWidget.dataset.type].encode.pid=null,this.currentWidget.dataset[this.currentWidget.dataset.type].encode.name=null,this.currentWidget.dataset[this.currentWidget.dataset.type].encode.icon=null,this.currentWidget.dataset[this.currentWidget.dataset.type].encode.disabled=null,this.currentWidget.dataset[this.currentWidget.dataset.type].encode.sort=null,this.setEncodeAndActionParam()},setEncodeAndActionParam(){this.$$lib__.each(this.dimensions_alias,n=>{switch(n.name){case"id":this.currentWidget.dataset[this.currentWidget.dataset.type].encode.id=n.name,this.setClickActionParam(n.name,this.currentWidget.dataset.type);break;case"name":this.currentWidget.dataset[this.currentWidget.dataset.type].encode.name=n.name,this.setClickActionParam(n.name,this.currentWidget.dataset.type);break;case"funcgroupId":this.currentWidget.dataset[this.currentWidget.dataset.type].encode.pid=n.name,this.setClickActionParam(n.name,this.currentWidget.dataset.type);break;case"parentFuncgroupId":this.currentWidget.dataset[this.currentWidget.dataset.type].encode.pid=n.name,this.setClickActionParam(n.name,this.currentWidget.dataset.type);break;case"iconPath":this.currentWidget.dataset[this.currentWidget.dataset.type].encode.icon=n.name;break;case"sequence":this.currentWidget.dataset[this.currentWidget.dataset.type].encode.sort=n.name;break;case"pagePath":this.setClickActionParam(n.name,this.currentWidget.dataset.type);break}}),this.getCanvasSetting&&this.getCanvasSetting.data&&this.getCanvasSetting.data.globalParams&&this.getCanvasSetting.data.globalParams&&(this.getCanvasSetting.data.globalParams.params.token!=null&&this.setClickActionParam("token","global"),this.getCanvasSetting.data.globalParams.params.userId!=null&&this.setClickActionParam("userId","global"))},setClickActionParam(n,e){this.currentWidget.action&&this.currentWidget.action.sendOut&&this.currentWidget.action.sendOut.actionList&&this.$$lib__.each(this.currentWidget.action.sendOut.actionList,a=>{if(a.code==this.$$global_editor.actionType.click.code)if(a.params&&a.params[n]==null&&(a.params[n]=null),!a.paramsExtend)a.paramsExtend=[];else{let t="";if(e=="dynamic"||e=="local"?t="fieldD":e=="global"&&(t="fieldG"),!this.$$lib__.find(a.paramsExtend,s=>s[t]==n)){let s={type:e,fieldS:"",value:""};s[t]=n,a.paramsExtend.push(s)}}})}}},p=g,h=i(768141),m=(0,h.Z)(p,d,l,!1,null,"40701aa4",null),W=m.exports}}]);
