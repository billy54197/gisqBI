"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[6155],{44513:function(x,l,n){n.d(l,{Z:function(){return m}});var h=function(){var t=this,a=t._self._c;return t.attr.buttonHide?a("div",{style:{position:"absolute",right:t.attr.buttonHideRight+"px",top:t.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(w){return t.onHide()}}},[t.openTooltip?a("el-tooltip",{attrs:{"open-delay":1e3,content:t.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[a("el-button",{class:t.attr.buttonHideIconClass&&t.attr.buttonHideIconClass!=""?t.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.attr.buttonHideColor,fontSize:t.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a("el-button",{class:t.attr.buttonHideIconClass&&t.attr.buttonHideIconClass!=""?t.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.attr.buttonHideColor,fontSize:t.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):t._e()},u=[],c=n(52246),p={props:["attr"],name:"hide-button",data(){return{isPc:c.b}},computed:{openTooltip:function(){let s=!1,t=this.attr.buttonHideTooltipContent;return c.b&&t&&t!=null&&t.trim()!=""&&(s=!0),s}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},g=p,f=n(68141),v=(0,f.Z)(g,h,u,!1,null,"bf399b9a",null),m=v.exports},56155:function(x,l,n){n.r(l),n.d(l,{default:function(){return B}});var h=function(){var e=this,r=e._self._c;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],ref:"gisBase",staticClass:"my-gisBase",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}},[r("hide-button",{attrs:{attr:e.widgetInfo.attr}}),r("GeneralButton",e._b({ref:"drawBtn",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"},attrs:{active:e.active,"icon-class":e.widgetInfo.config.btnConfig.iconClass?e.widgetInfo.config.btnConfig.iconClass:"drawPolygon","theme-style":e.themeConfig,position:e.btnPosition},on:{click:e.draw}},"GeneralButton",e.widgetInfo.config.btnConfig,!1))],1)},u=[],c=n(8421),p=n.n(c),g=n(44513),f=n(45249),v=n(45061),m=n(26711),s=n(86892),t=n(27966),a=n(50681),w=n(49500),I={name:"GisDrawPolygon",components:{HideButton:g.Z,GeneralButton:p()},mixins:[f.u,s.D,v.u,m.H,a.Z],inject:{reactiveMap:{default:function(){return()=>null}}},props:["widgetInfo"],data(){return{active:!1}},watch:{},beforeDestroy(){},mounted(){this.initAction(this.widgetInfo),this.reactiveMap()&&(this.reactiveMap().drawTool.$on("change:active",(o,e)=>{e==="drawPolygon"&&(this.active=o)}),this.reactiveMap().drawTool.$on("drawend",this.drawend))},methods:{btnActive(o){this.$refs.drawBtn.changeBtn(o)},loadInfo(o){w.log(o)},reLoadInfo(o){w.log("\u914D\u7F6E\u66F4\u65B0\u4E86"),this.loadInfo(o)},initAction(o){this.registerAction(o,"configMap","mapList",this.doConfigMap),this.actionReceive(o)},drawend(o){let e=this,r=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(r,i=>{if(i.enabled&&i.code==e.$$global_editor.actionType.drawEnd.code){let b=i.code+"_"+e.widgetInfo.id,d={geojson:o};if(i.paramsExtend&&i.paramsExtend.length>0&&this.getExtendParams(d,i.paramsExtend,[],[]),i.script&&i.script.enabled&&i.script.content){this.doConfigMap=new Function("data",i.script.content);let y=this.doConfigMap(d);y&&(d=y)}t.Z.$emit(b,d),i.postMessage&&this.doPostMessage(d),this.actionNameList.push(b)}})},draw(){this.active?this.reactiveMap().drawTool.deactivate():this.reactiveMap().drawTool.activate("polygon")},changeActive(o){this.active=o}}},C=I,H=n(68141),M=(0,H.Z)(C,h,u,!1,null,"498c0614",null),B=M.exports}}]);
