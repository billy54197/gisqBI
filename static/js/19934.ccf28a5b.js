"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[19934],{56279:function(N,g,a){a.d(g,{P:function(){return o}});var f=a(386892),p=a(149500);const o={mixins:[f.D],created(){},methods:{lifecycleBeforeChartsLoad(y){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&p.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),p.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let v=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[y]);if(v)return v}return y},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&p.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),p.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(N,g,a){a.d(g,{X:function(){return f},b:function(){return p}});let f={versions:function(){var o=navigator.userAgent;return{trident:o.indexOf("Trident")>-1,presto:o.indexOf("Presto")>-1,webKit:o.indexOf("AppleWebKit")>-1,gecko:o.indexOf("Gecko")>-1&&o.indexOf("KHTML")==-1,mobile:!!o.match(/AppleWebKit.*Mobile.*/),ios:!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:o.indexOf("Android")>-1,iPhone:o.indexOf("iPhone")>-1,iPad:o.indexOf("iPad")>-1,webApp:o.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},p;f.versions.mobile||f.versions.ios||f.versions.android||f.versions.iPhone||f.versions.iPad?p=!1:p=!0},219934:function(N,g,a){a.r(g),a.d(g,{default:function(){return F}});var f=function(){var i=this,e=i._self._c;return e("div",{style:{width:i.widgetInfo.attr.w+"px",overflow:"hidden",height:i.widgetInfo.attr.hh+"px"}},[e("hide-button",{attrs:{attr:i.widgetInfo.attr}}),e("div",{ref:"barThreeDimensional",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"},attrs:{id:"barThreeDimensional"}})],1)},p=[],o=a(844513),y=a(927966),I=a(787798),v=a(445061),J=a(126711),A=a(77403),S=a(99349),s=a(179966),b=a(555616),M=a(275770),C=a(56279),L=a(67157),u=a(150813);const P={mixins:[L.c],data(){return{config_extend:{config:{series:{barWidth:30}}},filter_config:{title:JSON.parse(JSON.stringify(u.Z.charts.title)),legend:JSON.parse(JSON.stringify(u.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(u.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(u.Z.charts.toolbox)),visualMap:JSON.parse(JSON.stringify(u.Z.charts.visualMap)),dataZoom:JSON.parse(JSON.stringify(u.Z.charts.dataZoom)),xAxis3D:JSON.parse(JSON.stringify(u.Z.charts.xAxis3D)),yAxis3D:JSON.parse(JSON.stringify(u.Z.charts.yAxis3D)),zAxis3D:JSON.parse(JSON.stringify(u.Z.charts.zAxis3D))}}},methods:{filterPredefineColoursSchemeConfig(t,i){if(this.getNewConfig(t,i,this.filter_config),this.getNewConfig_charts_visualMap_inRange_color(t.visualMap,i.visualMap),i.color&&i.color instanceof Array&&i.color.length>0)if(t.color&&t.color instanceof Array&&t.color.length>0)for(let e=0;e<t.color.length;e++)t.color[e]=i.color[e];else t.color=JSON.parse(JSON.stringify(i.color))}}};var H=a(149500);const $=a(954255);var T={props:["widgetInfo"],name:"bar-three-dimensional",components:{HideButton:o.Z},mixins:[v.u,J.H,I.P,C.P,S.P,A.baseConfig,P],data(){return{}},mounted(){this.echarts=$.init(this.$refs.barThreeDimensional,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{initAction(t){this.actionSendout(t),this.actionReceive(t)},loadInfo(t){let i=this.getData(t.dataset[t.dataset.type].encode,t.dataset[t.dataset.type].dimensionsAlias,t.dataset[t.dataset.type].source),e=JSON.parse(JSON.stringify(t.config.tooltip)),r=JSON.parse(JSON.stringify(t.config.xAxis3D));r.data=Array.from(new Set(i.xData));let n=JSON.parse(JSON.stringify(t.config.yAxis3D));n.data=Array.from(new Set(i.yData));let h=JSON.parse(JSON.stringify(t.config.zAxis3D));h.data=Array.from(new Set(i.zData));let l=JSON.parse(JSON.stringify(t.config.grid3D)),c=JSON.parse(JSON.stringify(t.config.series)),d=JSON.parse(JSON.stringify(t.config.visualMap));d.seriesIndex=d.show?0:-1;let z=JSON.parse(JSON.stringify(t.config.toolbox)),x=t.dataset[t.dataset.type].encode;t.config.visualMap.visualMapMin=="dataMin"&&(t.config.visualMap.min=this.getVisualmapData(t,x.z)[0]),t.config.visualMap.visualMapMax=="dataMax"&&(t.config.visualMap.max=this.getVisualmapData(t,x.z)[1]);let w={tooltip:e,xAxis3D:r,yAxis3D:n,zAxis3D:h,grid3D:l,toolbox:z,visualMap:this.getVisualMap(d),series:[{type:"bar3D",data:i.data.map(function(m){return{value:[m[0],m[1],m[2]]}}),shading:"lambert",label:this.getLabelStyle(c.label),itemStyle:c.itemStyle,emphasis:c.emphasis}]};this.echarts.setOption(this.lifecycleBeforeChartsLoad(w),{notMerge:!1})},reLoadInfo(t){t&&(this.$refs.barThreeDimensional.style.width=t.attr.w+"px",this.$refs.barThreeDimensional.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},getData(t,i,e){let r,n,h,l={xData:[],yData:[],zData:[],data:[]};return this.$$lib__.each(i,(c,d)=>{t.x&&c.name==t.x&&(r=d),t.y&&c.name==t.y&&(n=d),t.z&&c.name==t.z&&(h=d)}),this.$$lib__.each(e,c=>{r>=0?l.xData.push(c[r]):l.xData.push(0),n>=0?l.yData.push(c[n]):l.xData.push(0),h>=0?l.zData.push(c[h]):l.xData.push(0);let d=[];r>=0?d.push(c[r]):d.push(0),n>=0?d.push(c[n]):d.push(0),h>=0?d.push(c[h]):d.push(0),l.data.push(d)}),l.data=this.changeSourceType(l.data,l.xData,l.yData,l.zData),l},changeSourceType(t,i,e,r){let n=Array.from(new Set(i)),h=Array.from(new Set(e)),l=Array.from(new Set(r)),c=this.widgetInfo.config.xAxis3D.type,d=this.widgetInfo.config.yAxis3D.type,z=this.widgetInfo.config.zAxis3D.type,x=JSON.parse(JSON.stringify(t));return this.$$lib__.each(t,(w,m)=>{c=="category"&&this.$$lib__.each(n,(D,O)=>{w[0]==D&&(x[m][0]=O)}),d=="category"&&this.$$lib__.each(h,(D,O)=>{w[1]==D&&(x[m][1]=O)}),z=="category"&&this.$$lib__.each(l,(D,O)=>{w[2]==D&&(x[m][2]=O)})}),x},actionSendout(t){let i=this;this.$$lib__.each(t.action.sendOut.actionList,e=>{if(e.enabled){let r=e.code+"_"+t.id;if(e.paramsExtend&&e.paramsExtend.length>0){let n={};this.getParamsExtend(n,e.paramsExtend,t)}e.code==M.default.click.code&&i.onClick(r,e)}})},onClick(t,i){let e=this;e.echarts.on("click",r=>{let n={};n.x=r.data.value[0],n.y=r.data.value[1],n.z=r.data.value[2];let h=[];if(e.widgetInfo.dataset[e.widgetInfo.dataset.type].source&&e.widgetInfo.dataset[e.widgetInfo.dataset.type].source.length>0&&(h=e.widgetInfo.dataset[e.widgetInfo.dataset.type].source[r.dataIndex]),e.getExtendParams(n,i.paramsExtend,h,e.widgetInfo.dataset[e.widgetInfo.dataset.type].dimensions),i.script&&i.script.enabled){if(H.log("Execute script for "+e.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){b.Message.warning({message:i.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param,params",i.script.content),n=this.customScript_actionSend_clickParam(n,r)}y.Z.$emit(t,n),i.postMessage&&e.doPostMessage(n)})}}},Z=T,E=a(768141),R=(0,E.Z)(Z,f,p,!1,null,"cb78063a",null),F=R.exports},844513:function(N,g,a){a.d(g,{Z:function(){return A}});var f=function(){var s=this,b=s._self._c;return s.attr.buttonHide?b("div",{style:{position:"absolute",right:s.attr.buttonHideRight+"px",top:s.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(M){return s.onHide()}}},[s.openTooltip?b("el-tooltip",{attrs:{"open-delay":1e3,content:s.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[b("el-button",{class:s.attr.buttonHideIconClass&&s.attr.buttonHideIconClass!=""?s.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:s.attr.buttonHideColor,fontSize:s.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):b("el-button",{class:s.attr.buttonHideIconClass&&s.attr.buttonHideIconClass!=""?s.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:s.attr.buttonHideColor,fontSize:s.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):s._e()},p=[],o=a(752246),y={props:["attr"],name:"hide-button",data(){return{isPc:o.b}},computed:{openTooltip:function(){let S=!1,s=this.attr.buttonHideTooltipContent;return o.b&&s&&s!=null&&s.trim()!=""&&(S=!0),S}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},I=y,v=a(768141),J=(0,v.Z)(I,f,p,!1,null,"bf399b9a",null),A=J.exports}}]);
