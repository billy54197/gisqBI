"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[15914],{56279:function(F,v,d){d.d(v,{P:function(){return m}});var w=d(386892),k=d(149500);const m={mixins:[w.D],created(){},methods:{lifecycleBeforeChartsLoad(I){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&k.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),k.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let p=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[I]);if(p)return p}return I},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&k.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),k.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(F,v,d){d.d(v,{X:function(){return w},b:function(){return k}});let w={versions:function(){var m=navigator.userAgent;return{trident:m.indexOf("Trident")>-1,presto:m.indexOf("Presto")>-1,webKit:m.indexOf("AppleWebKit")>-1,gecko:m.indexOf("Gecko")>-1&&m.indexOf("KHTML")==-1,mobile:!!m.match(/AppleWebKit.*Mobile.*/),ios:!!m.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:m.indexOf("Android")>-1,iPhone:m.indexOf("iPhone")>-1,iPad:m.indexOf("iPad")>-1,webApp:m.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},k;w.versions.mobile||w.versions.ios||w.versions.android||w.versions.iPhone||w.versions.iPad?k=!1:k=!0},134580:function(F,v,d){d.d(v,{Z:function(){return _}});var w=function(){var g=this,x=g._self._c;return x("span",[g._v(" "+g._s(g.displayValue)+" ")])},k=[];let m=0;const I="webkit moz ms o".split(" ");let b,p;if(typeof window>"u")b=function(){},p=function(){};else{b=window.requestAnimationFrame,p=window.cancelAnimationFrame;let h;for(let g=0;g<I.length&&!(b&&p);g++)h=I[g],b=b||window[h+"RequestAnimationFrame"],p=p||window[h+"CancelAnimationFrame"]||window[h+"CancelRequestAnimationFrame"];(!b||!p)&&(b=function(g){const x=new Date().getTime(),S=Math.max(0,16-(x-m)),T=window.setTimeout(()=>{g(x+S)},S);return m=x+S,T},p=function(g){window.clearTimeout(g)})}var P={name:"count-to",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:2,validator(h){return h>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(h,g,x,S){return x*(-Math.pow(2,-10*h/S)+1)*1024/1023+g}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{decimals(){this.start()},startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=b(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){p(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,b(this.count)},reset(){this.startTime=null,p(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(h){this.startTime||(this.startTime=h),this.timestamp=h;const g=h-this.startTime;this.remaining=this.localDuration-g,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(g,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(g,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(g/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(g/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),g<this.localDuration?this.rAF=b(this.count):this.$emit("callback")},isNumber(h){return!isNaN(parseFloat(h))},formatNumber(h){h=h.toFixed(this.decimals),h+="";const g=h.split(".");let x=g[0];const S=g.length>1?this.decimal+g[1]:"",T=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;T.test(x);)x=x.replace(T,"$1"+this.separator+"$2");return this.prefix+x+S+this.suffix}},destroyed(){p(this.rAF)}},N=P,f=d(768141),A=(0,f.Z)(N,w,k,!1,null,"696c34af",null),_=A.exports},844513:function(F,v,d){d.d(v,{Z:function(){return P}});var w=function(){var f=this,A=f._self._c;return f.attr.buttonHide?A("div",{style:{position:"absolute",right:f.attr.buttonHideRight+"px",top:f.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(_){return f.onHide()}}},[f.openTooltip?A("el-tooltip",{attrs:{"open-delay":1e3,content:f.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[A("el-button",{class:f.attr.buttonHideIconClass&&f.attr.buttonHideIconClass!=""?f.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:f.attr.buttonHideColor,fontSize:f.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):A("el-button",{class:f.attr.buttonHideIconClass&&f.attr.buttonHideIconClass!=""?f.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:f.attr.buttonHideColor,fontSize:f.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):f._e()},k=[],m=d(752246),I={props:["attr"],name:"hide-button",data(){return{isPc:m.b}},computed:{openTooltip:function(){let N=!1,f=this.attr.buttonHideTooltipContent;return m.b&&f&&f!=null&&f.trim()!=""&&(N=!0),N}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},b=I,p=d(768141),z=(0,p.Z)(b,w,k,!1,null,"bf399b9a",null),P=z.exports},115914:function(F,v,d){d.r(v),d.d(v,{default:function(){return H}});var w=function(){var i=this,e=i._self._c;return e("div",{ref:"listPaneText",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px",overflow:"hidden"}},[e("hide-button",{attrs:{attr:i.widgetInfo.attr}}),e("el-carousel",{ref:"myCarousel",attrs:{height:i.widgetInfo.attr.hh+"px",autoplay:i.widgetInfo.config.carouselAttr.autoplay,interval:i.widgetInfo.config.carouselAttr.interval*1e3,trigger:i.widgetInfo.config.carouselAttr.trigger,indicatorPosition:i.widgetInfo.config.carouselAttr.indicatorPosition,arrow:i.widgetInfo.config.carouselAttr.arrow,type:i.widgetInfo.config.carouselAttr.type,loop:i.widgetInfo.config.carouselAttr.loop,direction:i.widgetInfo.config.carouselAttr.direction},on:{change:i.onChangeAction}},i._l(i.carouselItem,function(l,o){return e("el-carousel-item",{key:o,attrs:{label:i.widgetInfo.config.carouselAttr.label&&i.widgetInfo.config.carouselAttr.indicatorType!="diamond"?l.label:" "}},[e("div",{style:{paddingLeft:i.mUtils.getNewPxW(i.widgetInfo.config.global.padding.left)+"px",paddingTop:i.mUtils.getNewPxH(i.widgetInfo.config.global.padding.top)+"px"}},i._l(l.listInfo,function(r,n){return e("div",{key:n,ref:"contentArea",refInFor:!0,style:i.getContentAreaStyle(i.widgetInfo.config.contentArea,r.area.areaImage),attrs:{index:o+"-"+n}},[e("div",{style:i.getTitleAreaStyle(i.widgetInfo.config.contentArea.title,i.widgetInfo.action,"",r.area.areaTitleImage,o,n),on:{click:function(a){return i.onClick("areaTitle",r.area.title!=null?r.area.title:i.widgetInfo.config.contentArea.title.text,o,n)}}},[e("span",[i._v(i._s(r.area.title!=null?r.area.title:i.widgetInfo.config.contentArea.title.text)+" ")])]),i._l(i.widgetInfo.config.content,function(a,s){return e("div",{key:s,style:i.getContentStyle(a,i.widgetInfo.action,a.id,r.content[a.id].contentImage,o,n),on:{click:function(c){i.onClick(a.id,i.lib_.isNaN(r.content[a.id].number)?"":r.content[a.id].number,o,n)}}},[e("div",{class:"title-"+o+"-"+n+"-"+s,style:i.getContentTitleStyle(a.title,r.content[a.id].contentTitleImage)},[e("span",[i._v(i._s(r.content[a.id].title!=null?r.content[a.id].title:a.title.text)+" ")])]),e("div",[e("div",{class:"prefix-"+o+"-"+n+"-"+s,style:i.getStylePrefix(a.prefix)},[e("span",[i._v(" "+i._s(a.prefix.lable)+" ")])]),e("el-tooltip",{attrs:{disabled:i.getShowTooltip(a.number,r.content[a.id].number),"open-delay":200,content:r.content[a.id].number+"",effect:a.number.effect,placement:"top"}},[i.lib_.isNaN(parseFloat(r.content[a.id].number))?e("div",[e("div",{class:"number-"+o+"-"+n+"-"+s,style:i.getStyleNumber(a.number,r.content[a.id],o,n)},[e("span",{directives:[{name:"show",rawName:"v-show",value:!!r.content[a.id].number,expression:"Boolean(li.content[con.id].number)"}]},[i._v(i._s(r.content[a.id].number))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!r.content[a.id].number,expression:"!Boolean(li.content[con.id].number)"}]},[i._v("-")])])]):e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:a.number.text,expression:"con.number.text"}]},[e("div",{class:"number-"+o+"-"+n+"-"+s,style:i.getStyleNumber(a.number,r.content[a.id],o,n)},[e("count-to",{directives:[{name:"show",rawName:"v-show",value:!i.lib_.isNaN(parseFloat(r.content[a.id].number)),expression:"!lib_.isNaN(parseFloat(li.content[con.id].number))"}],ref:"countTo",refInFor:!0,attrs:{endVal:parseFloat(r.content[a.id].number),duration:a.number.duration,decimals:a.number.decimals}}),e("span",{directives:[{name:"show",rawName:"v-show",value:i.lib_.isNaN(parseFloat(r.content[a.id].number)),expression:"lib_.isNaN(parseFloat(li.content[con.id].number))"}]},[i._v("-")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:!a.number.text,expression:"!con.number.text"}]},[e("div",{class:"number-"+o+"-"+n+"-"+s,style:i.getStyleNumber(a.number,r.content[a.id])},[a.number.scriptEnabled==!0?[e("span",{domProps:{innerHTML:i._s(i.getHtml(a,r.content[a.id].number))}})]:[e("span",{directives:[{name:"show",rawName:"v-show",value:!!r.content[a.id].number,expression:"Boolean(li.content[con.id].number)"}]},[i._v(i._s(r.content[a.id].number))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!r.content[a.id].number,expression:"!Boolean(li.content[con.id].number)"}]},[i._v("-")])]],2)])])]),e("div",{class:"suffix-"+o+"-"+n+"-"+s,style:i.getStyleSuffix(a.suffix)},[e("span",[i._v(" "+i._s(a.suffix.lable)+" ")])])],1)])})],2)}),0)])}),1)],1)},k=[],m=d(42160),I=d(321300),b=d(134580),p=d(927966),z=d(445061),P=d(126711),N=d(56279),f=d(8662),A=d(844513),_=d(766059),h=d(555616),g=d(67157);const x={mixins:[g.c],data(){return{config_extend:{config:{global:{padding:{left:53}},carouselAttr:{indicatorActiveBgc:"#4C84FF"},contentArea:{top:10,left:5,title:{hide:!0}},content:[{left:1,title:{left:11,top:2}}]}},filter_config:{carouselAttr:{indicatorBgc:"#C4C4C4",indicatorActiveBgc:"#4C84FF"},contentArea:{opacity:1,title:{opacity:1,label:{fontFamily:"Microsoft Yahei",color:"rgba(63, 67, 74, 1)",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}},backgroundColor:"rgba(255,255,255,0)"},content:[{borderColor:"",activeBorderColor:"",title:{opacity:1,label:{fontFamily:"alibabaPuHuiTiRegular",color:"#303133",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}},prefix:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"},number:{fontFamily:"alibabaPuHuiTiMedium",color:"#4C84FF",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"},suffix:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}}]}}},methods:{filterPredefineColoursSchemeConfig(t,i){this.getNewConfigWithArrary(t,i,this.filter_config)}}};var S=d(149500),T={name:"list-carousel-text",props:["widgetInfo"],components:{CountTo:b.Z,HideButton:A.Z},mixins:[_.baseConfig,z.u,P.H,x,N.P,f.j],data(){return{current:null,clickArea:{index:-1,selected:!1},lib_:this.$$lib__}},computed:{carouselItem:function(){return this.getListInfo(this.widgetInfo.dataset[this.widgetInfo.dataset.type],this.widgetInfo.config.contentArea,this.widgetInfo.config.content,this.widgetInfo.config.global.pageSize)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(t){this.sendTotal(t),this.setArrowStyle(t),this.setIndicatorPosition(t),setTimeout(()=>{this.setIndicatorStyle(t,0)},500),this.$nextTick(()=>{this.widgetInfo.config.carouselAttr.touchable&&this.slideBanner()}),S.debug(t),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.actionReceive(t)},setArrowStyle(t){let i=this.$refs.myCarousel.$el.childNodes[0].childNodes;i[0].className&&i[0].className.indexOf("el-carousel__arrow--left")>-1&&(i[0].style.left=this.mUtils.getNewPxW(t.config.global.leftArrowL)+"px",i[0].style.top=this.mUtils.getNewPxH(t.config.global.leftArrowT)+"px"),i[1].className&&i[1].className.indexOf("el-carousel__arrow--right")>-1&&(i[1].style.right=this.mUtils.getNewPxW(t.config.global.rightArrowL)+"px",i[1].style.top=this.mUtils.getNewPxH(t.config.global.rightArrowT)+"px")},setIndicatorPosition(t){let i=this.$refs.myCarousel.$el,e=this.$refs.myCarousel.$el.childNodes[1];i.className&&i.className.indexOf("el-carousel")>-1&&e.className&&e.className.indexOf("el-carousel__indicators")>-1&&(t.config.carouselAttr.indicatorPosition==="custom"?(i.parentNode.style.position="relative",i.style.position="static",e.style.bottom=this.mUtils.getNewPxH(t.config.carouselAttr.indicatorBottom)+"px",e.style.left=this.mUtils.getNewPxW(t.config.carouselAttr.indicatorLeft)+"px",e.style.top="auto",e.style.right="auto",e.style.transform="none",e.style.position="absolute"):t.config.carouselAttr.indicatorPosition==="\u2014"&&t.config.carouselAttr.direction==="vertical"?(e.style.bottom="auto",e.style.left="auto",e.style.transform="translateY(-50%)"):e.style="")},setIndicatorStyle(t,i){let e=5;t.config.carouselAttr.pagerCount&&(e=t.config.carouselAttr.pagerCount);let l=(e-1)/2;if(t.config.carouselAttr.indicatorPosition==="none")return;let o=this.$refs.myCarousel.$el.childNodes;if(o&&o[1]&&o[1].className&&o[1].className.indexOf("el-carousel__indicators")>-1){let r=o[1].childNodes,n=r.length;for(let a=0;a<n;a++){let s=r[a];this.setNode(t,s,i,a),n>e&&(i==0?a<e-1||a==n-1?(s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):a==e-1?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px",s.style.display=""):s.style.display="none":i==n-1?a>n-e||a==0?(s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):a==n-e?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px",s.style.display=""):s.style.display="none":i<e-1?a<e-1||a==n-1?(s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):a==e-1?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px"):s.style.display="none":i>n-e?a>n-e||a==0?(s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):a==n-e?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px"):s.style.display="none":a==0||a==n-1||a>=i-l&&a<=i+l?(a==i-l||a==i+l?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px"):s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):s.style.display="none")}}},setNode(t,i,e,l){let o=i.childNodes[0];i.style.padding="6px "+this.mUtils.getNewPxW(t.config.carouselAttr.indicatorSpacing)+"px",o.style.backgroundColor=t.config.carouselAttr.indicatorBgc,o.style.opacity=1,o.style.color=t.config.carouselAttr.inactiveColor,o.style.width="100%",o.style.height="100%",o.style.textAlign="center",o.style.padding="2px 0",t.config.carouselAttr.indicatorType=="react"?(i.style.width=this.mUtils.getNewPxW(t.config.carouselAttr.indicatorW)+"px",i.style.height=this.mUtils.getNewPxH(t.config.carouselAttr.indicatorH)+"px",o.style.borderRadius="0px",o.style.transform="skew(0deg, 0deg)"):t.config.carouselAttr.indicatorType=="circle"?(i.style.width=this.mUtils.getNewPxW(t.config.carouselAttr.indicatorSize)+"px",i.style.height=this.mUtils.getNewPxH(t.config.carouselAttr.indicatorSize)+"px",o.style.borderRadius=t.config.carouselAttr.indicatorSize+"px",o.style.transform="skew(0deg, 0deg)"):t.config.carouselAttr.indicatorType=="diamond"&&(i.style.width=this.mUtils.getNewPxW(t.config.carouselAttr.indicatorW)+"px",i.style.height=this.mUtils.getNewPxH(t.config.carouselAttr.indicatorH)+"px",o.style.borderRadius="0px",o.style.transform="skew(-50deg, 0deg)"),e>=0?e===l&&(o.style.color=t.config.carouselAttr.activeColor,o.style.backgroundColor=t.config.carouselAttr.indicatorActiveBgc):i.className.indexOf("is-active")>-1&&(o.style.color=t.config.carouselAttr.activeColor,o.style.backgroundColor=t.config.carouselAttr.indicatorActiveBgc)},getListInfo(t,i,e,l){let o=0,r=0,n=this.setCarouselItem(t.source.length,l);return t.source.length||(t.source=[""]),this.lib_.each(t.source,a=>{let s=this.getFieldVal2(a,t.dimensions,{areaTitle:i.title.encode.field,areaTitleImage:i.title.encode.image,areaImage:i.imageField}),c={area:{title:s.areaTitle,areaTitleImage:s.areaTitleImage,areaImage:s.areaImage},content:{}};this.lib_.each(e,u=>{let C=this.getFieldVal2(a,t.dimensions,{title:u.title.encode.field,number:u.number.encode.field,contentTitleImage:u.title.encode.image,contentImage:u.imageField,numberImage:u.number.imageField}),B={title:C.title,number:C.number,contentTitleImage:C.contentTitleImage,contentImage:C.contentImage,numberImage:C.numberImage};m.default.set(c.content,u.id,B)}),n[r]&&n[r].listInfo.push(JSON.parse(JSON.stringify(c))),o+1==l?(r++,o=0):o++}),n},setCarouselItem(t,i){let e=[],l=Math.ceil(t/i),o="",r="";this.widgetInfo.config.carouselAttr.indicatorPrefix&&(o=this.widgetInfo.config.carouselAttr.indicatorPrefix),this.widgetInfo.config.carouselAttr.indicatorSuffix&&(r=this.widgetInfo.config.carouselAttr.indicatorSuffix);for(let n=0;n<l;n++)e.push({name:n,label:o+(n+1)+r,listInfo:[]});return e},getContentAreaStyle(t,i){return{float:"left",width:this.mUtils.getNewPxW(t.w)+"px",height:this.mUtils.getNewPxH(t.h)+"px",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",opacity:t.opacity,backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(i??t.backgroundImage),backgroundSize:t.backgroundSize}},replaceEmptyStyle(){let t=this.widgetInfo.config.contentArea;(!t.backgroundColor||t.backgroundColor==null)&&(t.backgroundColor=""),(!t.backgroundImage||t.backgroundImage==null)&&(t.backgroundImage=""),(!t.backgroundSize||t.backgroundSize==null)&&(t.backgroundSize=""),t.activeBackground||(t.activeBackground={}),(!t.activeBackground.backgroundColor||t.activeBackground.backgroundColor==null)&&(t.activeBackground.backgroundColor=""),(!t.activeBackground.backgroundImage||t.activeBackground.backgroundImage==null)&&(t.activeBackground.backgroundImage=""),(!t.activeBackground.backgroundSize||t.activeBackground.backgroundSize==null)&&(t.activeBackground.backgroundSize=""),t.allActiveBackground||(t.allActiveBackground={}),(!t.allActiveBackground.backgroundColor||t.allActiveBackground.backgroundColor==null)&&(t.allActiveBackground.backgroundColor=""),(!t.allActiveBackground.backgroundImage||t.allActiveBackground.backgroundImage==null)&&(t.allActiveBackground.backgroundImage=""),(!t.allActiveBackground.backgroundSize||t.allActiveBackground.backgroundSize==null)&&(t.allActiveBackground.backgroundSize=""),t.hoverStyle||(t.hoverStyle={}),(!t.hoverStyle.backgroundColor||t.hoverStyle.backgroundColor==null)&&(t.hoverStyle.backgroundColor=""),(!t.hoverStyle.backgroundImage||t.hoverStyle.backgroundImage==null)&&(t.hoverStyle.backgroundImage=""),(!t.hoverStyle.backgroundSize||t.hoverStyle.backgroundSize==null)&&(t.hoverStyle.backgroundSize=""),(!t.hoverStyle.color||t.hoverStyle.color==null)&&(t.hoverStyle.color="")},setContentAreaStyle(t,i){this.replaceEmptyStyle();let e=this.widgetInfo.config.contentArea;if(t=="active")for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o],n=r.getAttribute("index"),a="";if(n&&n!=""&&n.split("-").length==2){let s=parseInt(n.split("-")[0]),c=parseInt(n.split("-")[1]);this.carouselItem[s]&&this.carouselItem[s].listInfo[c]&&(a=this.carouselItem[s].listInfo[c].area.areaImage)}n==i?(this.clickArea.index!=i||!this.clickArea.selected?(e.allActiveBackground.backgroundColor!=""&&(r.style.backgroundColor=e.allActiveBackground.backgroundColor),e.allActiveBackground.backgroundImage!=""&&(r.style.backgroundImage=this.getImageUrl(e.allActiveBackground.backgroundImage)),e.allActiveBackground.backgroundSize!=""&&(r.style.backgroundSize=e.allActiveBackground.backgroundSize),this.clickArea.selected=!0):e.activeCancel&&(r.style.backgroundColor=e.backgroundColor,r.style.backgroundImage=this.getImageUrl(a&&a!=""?a:e.backgroundImage),r.style.backgroundSize=e.backgroundSize,this.clickArea.selected=!1),this.clickArea.index=i):(r.style.backgroundColor=e.backgroundColor,r.style.backgroundImage=this.getImageUrl(a&&a!=""?a:e.backgroundImage),r.style.backgroundSize=e.backgroundSize),this.setHoverFontColor(!1,r,i)}let l=!1;if(e.hoverStyle&&(e.hoverStyle.backgroundColor!=""||e.hoverStyle.backgroundImage!=""||e.hoverStyle.backgroundSize!=""||e.hoverStyle.color!="")&&(l=!0),l){for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o],n=r.getAttribute("index");t=="enter"&&n==i?(e.hoverStyle.backgroundColor!=""&&(r.style.backgroundColor=e.hoverStyle.backgroundColor),e.hoverStyle.backgroundImage!=""&&(r.style.backgroundImage=this.getImageUrl(e.hoverStyle.backgroundImage)),e.hoverStyle.backgroundSize!=""&&(r.style.backgroundSize=e.hoverStyle.backgroundSize),e.hoverStyle.color!=""&&this.setHoverFontColor(!0,r,i)):this.clickArea.index!=n&&(r.style.backgroundColor=e.backgroundColor,r.style.backgroundImage=this.getImageUrl(e.backgroundImage),r.style.backgroundSize=e.backgroundSize,this.setHoverFontColor(!1,r,i))}if(t=="leave"){if(this.clickArea.index==i&&this.clickArea.selected)for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o];r.getAttribute("index")==i&&(e.allActiveBackground.backgroundColor!=""?r.style.backgroundColor=e.allActiveBackground.backgroundColor:r.style.backgroundColor=e.backgroundColor,e.allActiveBackground.backgroundImage!=""?r.style.backgroundImage=this.getImageUrl(e.allActiveBackground.backgroundImage):r.style.backgroundImage=this.getImageUrl(e.backgroundImage),e.allActiveBackground.backgroundSize!=""?r.style.backgroundSize=e.allActiveBackground.backgroundSize:r.style.backgroundSize=e.backgroundSize)}else for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o];r.getAttribute("index")==i&&(r.style.backgroundColor=e.backgroundColor,r.style.backgroundImage=this.getImageUrl(e.backgroundImage),r.style.backgroundSize=e.backgroundSize)}for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o];r.getAttribute("index")==i&&this.setHoverFontColor(!1,r,i)}}}},setHoverFontColor(t,i,e){this.replaceEmptyStyle();let l=this.widgetInfo.config.contentArea;if(l.hoverStyle&&l.hoverStyle.color!="")for(let o=0;o<this.widgetInfo.config.content.length;o++){let r=this.widgetInfo.config.content[o],n=i.querySelectorAll(".suffix-"+e+"-"+o),a=i.querySelectorAll(".number-"+e+"-"+o),s=i.querySelectorAll(".prefix-"+e+"-"+o),c=i.querySelectorAll(".title-"+e+"-"+o),u="",C="",B="",$="";t?u=C=B=$=l.hoverStyle.color:(u=r.suffix.color,C=r.number.color,B=r.prefix.color);for(let y=0;y<n.length;y++)n[y].style.color=u;for(let y=0;y<a.length;y++)a[y].style.color=C;for(let y=0;y<s.length;y++)s[y].style.color=B;for(let y=0;y<c.length;y++)c[y].style.color=$}},getTitleAreaStyle(t,i,e,l,o,r){let n={height:this.mUtils.getNewPxH(t.h)+"px",opacity:t.opacity,display:t.hide==!0?"none":"",paddingLeft:this.mUtils.getNewPxW(t.left)+"px",paddingTop:this.mUtils.getNewPxH(t.top)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(l??t.backgroundImage),backgroundSize:t.backgroundSize,fontSize:this.mUtils.getNewFontSize(t.label.fontSize)+"px",fontFamily:t.label.fontFamily,color:t.label.color,fontWeight:t.label.fontWeight,fontStyle:t.label.fontStyle,textDecoration:t.label.textDecoration,textAlign:t.label.horizontalAlignment,cursor:this.getCursor(i,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code,e)},a=t.label;return a.textShadow&&(n.textShadow=a.hShadow+"px "+a.vShadow+"px "+a.textShadowBlur+"px "+a.textShadowColor||"rgba(0,0,0,0)"),a.textStroke&&(n.webkitTextStrokeWidth=a.textStrokeWidth+"px",n.webkitTextStrokeColor=a.textStrokeColor),a.gradient&&(n.backgroundImage="linear-gradient("+a.angle+"deg,"+a.startColor+","+a.endColor+")",n.webkitBackgroundClip="text",n.webkitTextFillColor="transparent"),e+o+r===this.current&&(this.widgetInfo.config.contentArea.activeBackground.backgroundColor||this.widgetInfo.config.contentArea.activeBackground.backgroundImage)&&(n.backgroundColor=this.widgetInfo.config.contentArea.activeBackground.backgroundColor,n.backgroundImage=this.getImageUrl(this.widgetInfo.config.contentArea.activeBackground.backgroundImage),n.backgroundSize=this.widgetInfo.config.contentArea.activeBackground.backgroundSize),n},getContentStyle(t,i,e,l,o,r){let n={float:"left",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",width:this.mUtils.getNewPxW(t.w)+"px",height:this.mUtils.getNewPxH(t.h)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(l??t.backgroundImage),backgroundSize:t.backgroundSize,cursor:this.getCursor(i,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code,e)};return t.openBorder&&(n.border=`solid ${t.borderWidth}px ${t.borderColor}`,n.borderRadius=t.borderRadius+"px",e+o+r===this.current&&(n.border=`solid ${t.activeBorderWidth}px ${t.activeBorderColor}`,n.borderRadius=t.activeBorderRadius+"px")),e+o+r===this.current&&(this.widgetInfo.config.contentArea.activeBackground.backgroundColor||this.widgetInfo.config.contentArea.activeBackground.backgroundImage)&&(n.backgroundColor=this.widgetInfo.config.contentArea.activeBackground.backgroundColor,n.backgroundImage=this.getImageUrl(this.widgetInfo.config.contentArea.activeBackground.backgroundImage),n.backgroundSize=this.widgetInfo.config.contentArea.activeBackground.backgroundSize),n},getContentTitleStyle(t,i){let e={height:this.mUtils.getNewPxH(t.h)+"px",opacity:t.opacity,display:t.hide==!0?"none":"",paddingLeft:this.mUtils.getNewPxW(t.left)+"px",paddingTop:this.mUtils.getNewPxH(t.top)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(i??t.backgroundImage),backgroundSize:t.backgroundSize,fontSize:this.mUtils.getNewFontSize(t.label.fontSize)+"px",fontFamily:t.label.fontFamily,color:t.label.color,fontWeight:t.label.fontWeight,fontStyle:t.label.fontStyle,textDecoration:t.label.textDecoration,textAlign:t.label.horizontalAlignment},l=t.label;return l.textShadow&&(e.textShadow=l.hShadow+"px "+l.vShadow+"px "+l.textShadowBlur+"px "+l.textShadowColor||"rgba(0,0,0,0)"),l.textStroke&&(e.webkitTextStrokeWidth=l.textStrokeWidth+"px",e.webkitTextStrokeColor=l.textStrokeColor),l.gradient&&(e.backgroundImage="linear-gradient("+l.angle+"deg,"+l.startColor+","+l.endColor+")",e.webkitBackgroundClip="text",e.webkitTextFillColor="transparent"),e},getStylePrefix(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w)+"px",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleNumber(t,i){let e={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":t.lineFeed?"-webkit-box":"",width:this.mUtils.getNewPxW(t.w)+"px",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment,textIndent:this.mUtils.getNewPxW(t.textIndent)+"px",lineHeight:this.mUtils.getNewPxW(t.lineHeight)+"px",overflow:"hidden",textOverflow:"ellipsis",webkitLineClamp:t.maxRow,webkitBoxOrient:t.maxRow?"vertical":1,whiteSpace:t.lineFeed?"pre-wrap":"nowrap"},l=t;l.textShadow&&(e.textShadow=l.hShadow+"px "+l.vShadow+"px "+l.textShadowBlur+"px "+l.textShadowColor||"rgba(0,0,0,0)"),l.textStroke&&(e.webkitTextStrokeWidth=l.textStrokeWidth+"px",e.webkitTextStrokeColor=l.textStrokeColor),l.gradient&&(e.backgroundImage="linear-gradient("+l.angle+"deg,"+l.startColor+","+l.endColor+")",e.webkitBackgroundClip="text",e.webkitTextFillColor="transparent");let o=i.numberImage;return/(.jpg|.png|.jpeg|.gif|.svg|.JPG|.PNG|.GIF|.bmp|.BMP)/g.test(o)&&(e.backgroundImage=this.getImageUrl(o),e.backgroundRepeat="no-repeat",e.backgroundPosition=t.horizontalAlignment+" center"),e},getStyleSuffix(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w)+"px",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getShowTooltip(t,i){if(t.showTooltip){let e=0;return t.text&&!isNaN(parseFloat(i))?e=parseInt(i).toString().length+t.decimals:e=i.toString().length,isNaN(parseFloat(i))?t.w-e*t.fontSize>0:t.w-e*t.fontSize/3*2>0}else return!0},onClick(t,i,e,l){let o=this,r=this.widgetInfo.action.sendOut.actionList,n=e*this.widgetInfo.config.global.pageSize+l;this.$$lib__.each(r,a=>{if(a.enabled&&(t=="areaTitle"||a.contentId==t)&&a.code.indexOf(o.$$global_editor.actionType.click.code)>-1){o.widgetInfo.config.contentArea.activeCancel&&o.current==t+e+l?o.current="":o.current=t+e+l;let s=a.code+"_"+o.widgetInfo.id,c={text:i};if(c.checked=o.current!="",a.paramsExtend&&a.paramsExtend.length>0&&this.getExtendParams(c,a.paramsExtend,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[n],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions),a.script&&a.script.enabled){if(S.log("Execute script for "+o.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){h.Message.warning({message:a.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",a.script.content),c=this.customScript_actionSend_clickParam(c)}p.Z.$emit(s,c),a.postMessage&&this.doPostMessage(c),this.actionNameList.push(s)}else if(a.enabled&&(t=="areaTitle"||a.contentId==t)&&a.code.indexOf(o.$$global_editor.actionType.openLink.code)>-1){o.widgetInfo.config.contentArea.activeCancel&&o.current==t+e+l?o.current="":o.current=t+e+l;let s={};if(s.checked=o.current!="",a.paramsExtend&&a.paramsExtend.length>0&&this.getExtendParams(s,a.paramsExtend,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[n],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions),a.type===this.$$global_editor.linkType.dynamic.code&&(a[this.$$global_editor.linkType.dynamic.code].url=this.getActionUrl(a,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[n],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions)),a.script&&a.script.enabled){if(S.log("Execute script for "+o.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){h.Message.warning({message:a.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_openLinkParam=new Function("param",a.script.content),s=this.customScript_actionSend_openLinkParam(s)}this.openLinkAction(a,s)}}),this.$nextTick(function(){this.setContentAreaStyle("active",e+"-"+l)})},onChangeAction(t){if(this.widgetInfo.action.sendOut&&this.widgetInfo.action.sendOut.actionList)for(let i=this.widgetInfo.action.sendOut.actionList.length-1;i>-1;--i){let e=this.widgetInfo.action.sendOut.actionList[i];if(e.enabled&&e.code==this.$$global_editor.actionType.carouselChange.code){let l=this.$$global_editor.actionType.carouselChange.code+"_"+this.widgetInfo.id,o=this.$refs.myCarousel.activeIndex,r=0;for(let u=0;u<o;++u)r+=this.carouselItem[u].listInfo.length;let n=r+this.carouselItem[o].listInfo.length,a=this.widgetInfo.dataset[this.widgetInfo.dataset.type],s=[];for(let u=r;u<n;++u)a.source[u]&&s.push(a.source[u]);let c={index:o,data:s};if(e.paramsExtend&&e.paramsExtend.length>0&&this.getParamsExtend(c,e.paramsExtend,this.widgetInfo),e.script&&e.script.enabled&&e.script.content)try{this.customScript_actionSend_clickParam=new Function("param",e.script.content),c=this.customScript_actionSend_clickParam(c)}catch(u){S.log("custom script error in list-carousel-text event carouselChange :"+u.message)}p.Z.$emit(l,c),e.postMessage&&this.doPostMessage(c)}}this.setIndicatorStyle(this.widgetInfo,t)},getCursor(t,i,e,l){let o="default";if(t==null||t.sendOut==null||t.sendOut.actionList==null)return o;let r=t.sendOut.actionList;return this.$$lib__.find(r,a=>a.contentId==l&&(a.code.indexOf(i)>-1||a.code.indexOf(e)>-1)&&a.enabled)&&(o="pointer"),o},getFieldVal2(t,i,e){let l={};if(t&&t.length>0)for(let o=0;o<i.length;o++)i[o]==e.areaTitle&&(l.areaTitle=t[o]),i[o]==e.title&&(l.title=t[o]),i[o]==e.number&&(l.number=t[o]),i[o]==e.areaImage&&(l.areaImage=t[o]),i[o]==e.areaTitleImage&&(l.areaTitleImage=t[o]),i[o]==e.contentTitleImage&&(l.contentTitleImage=t[o]),i[o]==e.contentImage&&(l.contentImage=t[o]),i[o]==e.numberImage&&(l.numberImage=t[o]);return l},getImageUrl(t){return t&&t!=""?"url("+I.appendImageBaseURL(t)+")":""},getHtml(t,i){(!t.number.scriptContent||t.number.scriptContent=="")&&S.warn("\u5185\u5BB9\uFF1A"+t.lable+"\u7684\u811A\u672C\u4E3A\u7A7A"),S.info("\u6267\u884C\u5185\u5BB9\uFF1A"+t.lable+"\u7684\u811A\u672C\u4E3A\u7A7A");let l=new Function("content","text",t.number.scriptContent).apply(this,[t,i]);return l||i},slideBanner(){let t=this.$el.querySelectorAll(".el-carousel__container")[0],i=0,e=0,l=0,o=Array.from(this.$el.querySelectorAll(".el-carousel__item"));if(o.length===0)return;let r=function(){i=0,l=0,e=0};t.addEventListener("touchstart",n=>{i=n.changedTouches[0].pageX,l=n.changedTouches[0].pageX,e=n.changedTouches[0].pageX}),t.addEventListener("touchmove",n=>{if(n.changedTouches[0].target.classList[0]==="el-icon-arrow-left"||n.changedTouches[0].target.classList[0]==="el-icon-arrow-right"||o.length===1)return;let a;e=n.changedTouches[0].pageX,a=e-l;for(let s=0;s<o.length;s++){let c=o[s],u=Number(c.style.transform.split("X(")[1].split(") s")[0].split("px")[0])+a;if(s===0&&u>0&&!this.widgetInfo.config.carouselAttr.loop||s===o.length-1&&u<0&&!this.widgetInfo.config.carouselAttr.loop)break;c.classList.remove("is-animating"),c.style.transform=c.style.transform.replace(/translateX\(([^(])*\)/,`translateX(${u}px)`)}l=e}),t.addEventListener("touchend",n=>{if(o.forEach(c=>{c.classList.add("is-animating")}),i-e===0){r();return}let a;e-i<0&&(a=Math.floor((i-e)/o[0].offsetWidth),(i-e)%o[0].offsetWidth>o[0].offsetWidth/3&&(a+=1)),e-i>0&&(a=-Math.floor((e-i)/o[0].offsetWidth),(e-i)%o[0].offsetWidth>o[0].offsetWidth/3&&(a-=1));let s=this.$refs.myCarousel.activeIndex+a;if(a==0){o.forEach((c,u)=>{c.style.transform=c.style.transform.replace(/translateX\(([^(])*\)/,`translateX(${-o[0].offsetWidth*s+u*o[0].offsetWidth}px)`)}),r();return}if(!this.widgetInfo.config.carouselAttr.loop){s>=0&&s<=o.length-1&&(this.$refs.myCarousel.setActiveItem(s),r());return}this.$refs.myCarousel.setActiveItem(s),r()})}}},U=T,W=d(768141),L=(0,W.Z)(U,w,k,!1,null,"016e1dc2",null),H=L.exports}}]);
