(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[68397],{536443:function(d,y,a){"use strict";var w=a(149500),T=a(419534);Object.defineProperty(y,"__esModule",{value:!![]}),y.getPointSingleStyle=I,y.getPointStyle=c;var S=T(a(342579)),v=T(a(66273)),h=a(904778),m=a(91873);function c(l,t,u,g){var o,s=(o=l.zIndex)!==null&&o!==void 0?o:9999,i=[],r=(0,h.isShowStyle)(l,u,g);if(r&&(l.image=P(l.image),i.push(C(l))),l.billboard){var n=(0,h.isShowStyle)(l.billboard,u,g);n&&(l.billboard.image=P(l.billboard.image),i.push(C(l.billboard)))}if(l.label){var e=new m.Style({text:(0,h.createTextStyle)(l.label,t,u,g),zIndex:Number(s)+1});i.push(e)}return i}function I(l,t,u,g){t=JSON.parse((0,v.default)(t));var o=t.label,s;if(o&&(s=o.text?o.text:""),l==="billboard")return t.image=P(t.image),c(t,s,u,g);if(l==="model"){var i=t.imgUrl||"model/".concat(t.modelKind,".png"),r=a(657875);return t.scale=1,t.image=P(i,r),c(t,s,u,g)}else return l==="cloud"?(t.image=a(455629),c(t,s,u,g)):l==="point"?c(t,s,u,g):l==="label"?new m.Style({text:(0,h.createTextStyle)(t,t.text,u,g),zIndex:t.zIndex}):c(t,s,u,g)}function C(l){var t=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9999,g;return l.image?g=new m.Style({renderer:function(s,i){(0,S.default)(this,t),(0,h.preLoadImageRenderFunction)(l,s,i,O)}.bind(this),zIndex:Number(u)}):g=new m.Style({image:new m.Circle({radius:l.radius?l.radius:l.pixelSize,fill:new m.Fill({color:(0,h.getColor)(l.color,l.opacity)}),stroke:l.outlineColor?new m.Stroke({color:(0,h.getColor)(l.outlineColor,l.outlineOpacity),width:l.outlineWidth}):null}),zIndex:Number(u)}),g}function O(l,t,u){try{var g,o,s=u.context,i=new Image;i.src=l.image,s.save();var r=Number(l.pixelOffsetX||((g=l.pixelOffset)===null||g===void 0?void 0:g[0])||0),n=Number(l.pixelOffsetY||((o=l.pixelOffset)===null||o===void 0?void 0:o[1])||0);if(s.translate(t[0]+r,t[1]+n),l.rotation&&s.rotate((0,h.toRadians)(l.rotation)),s.globalAlpha=l.opacity!=null?l.opacity:1,i.width>0){var e=i.width*l.scale*u.pixelRatio,f=i.height*l.scale*u.pixelRatio;s.drawImage(i,-e/2,-f/2,e,f)}else s.drawImage(i,0,0);s.restore()}catch(p){w.warn(p)}}function P(l,t){if(l){var u;if(l.match(/^(data|http|https)/))u=l;else try{u=a(308890)("./".concat(l))}catch{u=t||a(933862)}return u}}},603262:function(d,y,a){"use strict";var w=a(149500),T=a(419534);Object.defineProperty(y,"__esModule",{value:!![]}),y.getPolygonStyle=O;var S=T(a(342579)),v=T(a(518853)),h=a(904778),m=a(91873),c=a(692086),I=T(a(137107)),C=T(a(275229));function O(o,s,i,r){var n=this,e=new m.Style;return e.setFill(new m.Fill({color:"rgba(0,0,0,0)"})),(0,v.default)(o)&&(!o.fillType||o.fillType==="color"?e.setFill(new m.Fill({color:(0,h.getColor)(o.color,o.opacity)})):o.fillType==="image"?e.setRenderer(function(f,p){var R=this;(0,S.default)(this,n);var k=new I.default({src:o.image}),D=k.getImageState();D===C.default.LOADED||D===C.default.ERROR?P(o,f,p):(D===C.default.IDLE&&k.load(),k.listenImageChange(function(F){(0,S.default)(this,R),D=F.target.getImageState(),(D===C.default.LOADED||D===C.default.ERROR)&&P(o,f,p)}.bind(this)))}.bind(this)):o.fillType==="grid"||o.fillType==="stripe"||o.fillType==="checkerboard"?e.setRenderer(function(f,p){(0,S.default)(this,n),P(o,f,p)}.bind(this)):e.setFill(new m.Fill({color:(0,h.getColor)(o.color,o.opacity)}))),o.outline&&e.setStroke(new m.Stroke({color:(0,h.getColor)(o.outlineColor,o.outlineOpacity),width:o.outlineWidth})),o.label&&s&&e.setText((0,h.createTextStyle)(o.label,s,i,r)),e.setZIndex(o.zIndex),e}function P(o,s,i){try{for(var r=i.context,n=0,e=s.length;n<e;n++){r.save(),r.beginPath();var f=s[n],p=(0,c.boundingExtent)(f);r.translate(p[0],p[1]);var R=void 0;switch(o.fillType){case"image":R=l(r,p,o);break;case"grid":R=t(r,p,o);break;case"stripe":R=u(r,p,o);break;case"checkerboard":R=g(r,p,o);break;default:R="rgba(0,0,0,0.01)";break}for(var k=0,D=f.length;k<D;k++){var F=f[k];k===0?r.moveTo(F[0]-p[0],F[1]-p[1]):r.lineTo(F[0]-p[0],F[1]-p[1])}r.closePath(),r.fillStyle="rgba(0,0,0,0.01)",(0,v.default)(r).call(r),r.fillStyle=R,(0,v.default)(r).call(r),o.outline?(r.strokeStyle=(0,h.getColor)(o.outlineColor,o.outlineOpacity),r.lineWidth=o.outlineWidth):r.strokeStyle="rgba(0,0,0,0.0)",r.stroke(),r.restore()}}catch(M){r.restore(),w.warn(M)}}function l(o,s,i){var r=(0,c.getSize)(s),n=document.createElement("canvas"),e=n.getContext("2d");n.width=Math.max(r[0]/i.repeatX,1),n.height=Math.max(r[1]/i.repeatY,1);var f=new Image;return f.src=i.image,e.globalAlpha=i.opacity,e.drawImage(f,0,0,n.width,n.height),o.createPattern(n,"repeat")}function t(o,s,i){var r=(0,c.getSize)(s),n=document.createElement("canvas"),e=n.getContext("2d");return n.width=Math.max(r[0]/i.grid_lineCount,1),n.height=Math.max(r[1]/i.grid_lineCount,1),e.strokeStyle=(0,h.getColor)(i.color,i.opacity),e.lineWidth=i.grid_lineThickness*4,e.beginPath(),e.moveTo(0,n.height),e.lineTo(n.width,n.height),e.moveTo(n.width,0),e.lineTo(n.width,n.height),e.stroke(),o.createPattern(n,"repeat")}function u(o,s,i){var r=(0,c.getSize)(s),n=document.createElement("canvas"),e=n.getContext("2d"),f=Math.max(r[1]/i.stripe_repeat,1);return n.width=r[0],n.height=f*2,e.beginPath(),e.moveTo(0,0),e.lineTo(n.width,0),e.lineTo(n.width,f),e.lineTo(0,f),e.closePath(),e.fillStyle=(0,h.getColor)(i.stripe_oddcolor,i.opacity),(0,v.default)(e).call(e),e.beginPath(),e.moveTo(0,f),e.lineTo(n.width,f),e.lineTo(n.width,f*2),e.lineTo(0,f*2),e.closePath(),e.fillStyle=(0,h.getColor)(i.color,i.opacity),(0,v.default)(e).call(e),o.createPattern(n,"repeat")}function g(o,s,i){var r=(0,c.getSize)(s),n=document.createElement("canvas"),e=n.getContext("2d"),f=Math.max(r[0]/i.checkerboard_repeat,1),p=Math.max(r[1]/i.checkerboard_repeat,1);return n.width=f*2,n.height=p*2,e.beginPath(),e.moveTo(0,0),e.lineTo(f,0),e.lineTo(f,p),e.lineTo(0,p),e.closePath(),e.fillStyle=(0,h.getColor)(i.oddColor,i.opacity),(0,v.default)(e).call(e),e.beginPath(),e.moveTo(f,0),e.lineTo(n.width,0),e.lineTo(n.width,p),e.lineTo(f,p),e.closePath(),e.fillStyle=(0,h.getColor)(i.color,i.opacity),(0,v.default)(e).call(e),e.beginPath(),e.moveTo(0,p),e.lineTo(f,p),e.lineTo(f,n.height),e.lineTo(0,n.height),e.closePath(),e.fillStyle=(0,h.getColor)(i.color,i.opacity),(0,v.default)(e).call(e),e.beginPath(),e.moveTo(f,p),e.lineTo(n.width,p),e.lineTo(n.width,n.height),e.lineTo(f,n.height),e.closePath(),e.fillStyle=(0,h.getColor)(i.oddColor,i.opacity),(0,v.default)(e).call(e),o.createPattern(n,"repeat")}},904778:function(d,y,a){"use strict";var w=a(419534);Object.defineProperty(y,"__esModule",{value:!![]}),y.createTextStyle=c,y.getColor=m,y.getLevel=l,y.isShowStyle=O,y.preLoadImageRenderFunction=C,y.toRadians=P;var T=w(a(342579)),S=w(a(122305)),v=a(91873),h=w(a(275229));function m(t,u){return(0,S.default)(t).alpha(u??1).hexa()}function c(t,u,g,o){if(t){var s=O(t,g,o);if(s===![])return null;t.font_style=t.italic?"italic":"normal",t.font_weight=t.bold?"bold":"normal",t.font_size=t.font_size||"25",t.font_family=t.font_family||"\u6977\u4F53";var i=t.font_style+" small-caps "+t.font_weight+" "+t.font_size+"px "+t.font_family,r=t.pixelOffsetX?t.pixelOffsetX:t.pixelOffset?t.pixelOffset[0]:0,n=t.pixelOffsetY?t.pixelOffsetY:t.pixelOffset?t.pixelOffset[1]:0;return new v.Text({text:u,font:i,offsetX:r,offsetY:n,textBaseline:"top",fill:new v.Fill({color:m(t.color,t.opacity)}),stroke:I(t),backgroundFill:t.background?new v.Fill({color:m(t.background_color?t.background_color:"#2A2A2A",t.background_opacity)}):null})}else return null}function I(t){if(t.border)return new v.Stroke({color:m(t.border_color,t.opacity),width:t.border_width});if(t.outline)return new v.Stroke({color:m(t.outlineColor,t.opacity),width:t.outlineWidth})}function C(t,u,g,o){var s=this,i=new v.Icon({src:t.image}),r=i.getImageState();r===h.default.LOADED||r===h.default.ERROR?o(t,u,g):(r===h.default.IDLE&&i.load(),i.listenImageChange(function(n){(0,T.default)(this,s),r=n.target.getImageState(),(r===h.default.LOADED||r===h.default.ERROR)&&o(t,u,g)}.bind(this)))}function O(t,u,g){var o=!![];if(t.distanceDisplayCondition){if(t.distanceDisplayCondition_far&&g&&t){o=![];var s=l(t.distanceDisplayCondition_far),i=g.getView().getResolutionForZoom(s);u<i&&(o=!![])}if(o&&t.distanceDisplayCondition_near&&g){o=![];var r=l(t.distanceDisplayCondition_near),n=g.getView().getResolutionForZoom(r);u>n&&(o=!![])}}return o}function P(t){return t?-(t*Math.PI)/180:0}function l(t){var u=3252.745,g=.0009198301,o=52977.61,s=-3228.107;return s+(u-s)/(1+Math.pow(t/o,g))}},553144:function(d,y,a){var w=a(727018),T=a(601520),S=a(33710),v=a(346923);function h(){if(typeof Reflect<"u"&&w){var m;d.exports=h=T(m=w).call(m),d.exports.__esModule=!0,d.exports.default=d.exports}else d.exports=h=function(I,C,O){var P=v(I,C);if(P){var l=S(P,C);return l.get?l.get.call(arguments.length<3?I:O):l.value}},d.exports.__esModule=!0,d.exports.default=d.exports;return h.apply(this,arguments)}d.exports=h,d.exports.__esModule=!0,d.exports.default=d.exports},346923:function(d,y,a){var w=a(234009);function T(S,v){for(;!Object.prototype.hasOwnProperty.call(S,v)&&(S=w(S),S!==null););return S}d.exports=T,d.exports.__esModule=!0,d.exports.default=d.exports},936455:function(d,y,a){"use strict";var w=a(315397);d.exports=w},663863:function(d,y,a){"use strict";var w=a(425538);d.exports=w},33710:function(d,y,a){"use strict";d.exports=a(899417)},727018:function(d,y,a){"use strict";d.exports=a(158947)},899417:function(d,y,a){"use strict";var w=a(936455);d.exports=w},158947:function(d,y,a){"use strict";var w=a(663863);d.exports=w}}]);
