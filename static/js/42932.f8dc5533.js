"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[42932],{56279:function(v,y,l){l.d(y,{P:function(){return h}});var m=l(386892),f=l(149500);const h={mixins:[m.D],created(){},methods:{lifecycleBeforeChartsLoad(g){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&f.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),f.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let a=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[g]);if(a)return a}return g},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&f.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),f.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},105143:function(v,y,l){l.d(y,{b:function(){return g}});var m=l(148836),f=l(42160),h=l(149500);const g={created(){},computed:{...(0,m.Se)(["getWidgetAllArr"])},data(){return{containerViewSubWidgetList:[]}},methods:{...(0,m.nv)(["updateWidgetParentArrDataset","updateWidgetAllArrDataset"]),reLoadInfo(i){this.widgetInfo.id!=i.id&&this.$refs["comp_"+i.id]&&setTimeout(this.$refs["comp_"+i.id][0].reLoadInfo(i),500),this.loadInfo(i)},orgWidget(i){let a=[];return this.$$lib__.each(i,r=>{let n=this.$$lib__.find(this.getWidgetAllArr,c=>c.parentId==this.widgetInfo.id&&c.id==r.id);n&&(n.dataset&&n.dataset[n.dataset.type]&&(n.dataset.type==this.$$global_editor.dataSourcType.dynamic.code||n.dataset.type==this.$$global_editor.dataSourcType.local.code)&&n.dataset[n.dataset.type].autoUpdate==!0&&(f.default.set(this.dynamicWidgets,n.id,n),n.attr.hide!=!0&&n.dataset[n.dataset.type].autoUpdate==!0&&f.default.set(this.autoUpdateWidget,n.id,n)),a.push(n))}),f.default.set(this,"containerViewSubWidgetList",a),a},setTitleText(i,a){a?this.$$lib__.each(a,r=>{this.$$lib__.each(this.orgWidget(r.widgets),n=>{n.attr.widgetW||(n.attr.widgetW=n.attr.w),this.$refs["title_"+n.id]&&this.$refs["title_"+n.id][0]&&(this.$refs["title_"+n.id][0].innerHTML=this.initTextPosition(n)),n.title.position||(n.title.position="top")})}):this.$$lib__.each(this.orgWidget(i),r=>{this.$refs["title_"+r.id]&&this.$refs["title_"+r.id][0]&&(this.$refs["title_"+r.id][0].innerHTML=this.initTextPosition(r)),r.title.position||(r.title.position="top")})},initTextPosition(i){return i.title.text===void 0||!i.title.text?"":i.title.text&&(i.title.position==="left"||i.title.position==="right")?i.title.text.split("").join("<br />"):i.title.text},updataWidgetSource(i,a,r){try{switch(i.dataset.type){case this.$$global_editor.dataSourcType.dynamic.code:i.dataset.dynamic.source=a.data,a.total&&(i.dataset.dynamic.total=a.total);break;case this.$$global_editor.dataSourcType.local.code:i.dataset.local.dimensionsAlias=[],i.dataset.local.columnList=[],i.dataset.local.source=[],i.dataset.local.dimensions=[],i.dataset.local.dimensionsAlias=a.dimensionsAlias,i.dataset.local.columnList=a.columnList,i.dataset.local.source=a.source,i.dataset.local.dimensions=a.dimensions;break}}catch(c){h&&h.log&&h.log(c)}let n=this.$refs["comp_"+i.id];n&&n.length>0&&(this.updateWidgetAllArrDataset(i),this.updateWidgetParentArrDataset(i),n[0].reLoadInfo(i),this.sendoutDataloadSuccess(i),this.sendoutResponseData(i,a,r))},fit(i,a){if(!this.isView||!/^mobile/.test(this.getCanvasSetting.transformType))return i+"px";let r=this.getCanvasSetting.width/10,n=this.getCanvasSetting.height/window.innerHeight,c="";switch(this.getCanvasSetting.transformType){case"mobileAutoWidth":a?c=i+"px":c=i/r+"rem";break;case"mobileAutoBoth":c=i/r+"rem";break;default:a?c=i/n+"px":c=i/r+"rem"}return c}}}},980512:function(v,y,l){l.d(y,{Z:function(){return c}});var m=function(){var d=this,I=d._self._c;return I("div",{class:"container_child_"+d.widgetData.id,attrs:{id:"container_child_"+d.widgetData.id}},[I("keep-alive",[I(d.isView&&d.widgetData.isContainer?d.widgetData.typeName+"-view":d.widgetData.typeName,{ref:"com_"+d.widgetData.id,tag:"component",attrs:{"widget-info":d.widgetData,"widget-arr":d.getWidgetAllArr,"current-widget":d.currentWidget},on:{doGetPreviewData:d.doGetPreviewData,doReSetBoardId:d.doReSetBoardId,attrChange:d.attrChange}})],1)],1)},f=[],h=l(513229),g=l(148836),i={name:"DraggableComponent",extends:h.Z,computed:{...(0,g.Se)(["getWidgetAllArr","isView"])},methods:{reLoadInfo(p){if(p.id){let d=this.$refs["com_"+p.id];d&&d.reLoadInfo(p)}},doReSetBoardId(p){this.$emit("doReSetBoardId",p)},attrChange(p){this.$emit("attrChange",p)}}},a=i,r=l(768141),n=(0,r.Z)(a,m,f,!1,null,"41d16aa2",null),c=n.exports},442932:function(v,y,l){l.r(y),l.d(y,{default:function(){return x}});var m=function(){var t=this,o=t._self._c;return o("div",[t.widgetInfo.config.scroll.show?o("happy-scroll",{attrs:{color:t.widgetInfo.config.scroll.color,size:t.widgetInfo.config.scroll.width,resize:""}},[o("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:t.widgetInfo.config.scroll.show?"visible":"hidden"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.attr.buttonHide,expression:"widgetInfo.attr.buttonHide"}],style:{position:"absolute",right:t.widgetInfo.attr.buttonHideRight+"px",top:t.widgetInfo.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"}},[o("el-tooltip",{attrs:{content:t.widgetInfo.attr.buttonHideTooltipContent,disabled:t.widgetInfo.attr.buttonHideTooltipContent==""||t.widgetInfo.attr.buttonHideTooltipContent==null,"open-delay":1e3,effect:"dark",placement:"top"}},[o("el-button",{class:t.widgetInfo.attr.buttonHideIconClass&&t.widgetInfo.attr.buttonHideIconClass!=""?t.widgetInfo.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.widgetInfo.attr.buttonHideColor,fontSize:t.widgetInfo.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.onHide()}}})],1)],1),t._l(t.orgWidget(t.widgetInfo.config.widgets),function(e){return[o("div",{style:t.getWidgetStyle(e)},[o("div",{key:"widget_"+e.id,ref:"widget_"+e.id,refInFor:!0,class:t.getWidgetClass(e),style:t.getBindStyle(e),attrs:{id:"widget_"+e.id}},[o("external-frame-svg",{ref:"comp_frame_"+e.id,refInFor:!0,attrs:{"widget-info":e}}),e.title.position==="top"||e.title.position==="left"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:t.getWidgetTitleStyle(e),on:{click:function(u){return t.openLink(e)}}},[o("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[o("span",{ref:"title_"+e.id,refInFor:!0,style:t.getTitleSpanStyle(e),domProps:{innerHTML:t._s(t.getTitleText(e))}})])]):t._e(),o("draggable-component-container",{ref:"comp_"+e.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:t.getInfoStyle(e),attrs:{"widget-data":e},on:{attrChange:t.attrChange,doGetPreviewData:t.getPreviewData}}),e.title.position==="bottom"||e.title.position==="right"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:t.getWidgetTitleStyle(e),on:{click:function(u){return t.openLink(e)}}},[o("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[o("span",{ref:"title_"+e.id,refInFor:!0,style:t.getTitleSpanStyle(e),domProps:{innerHTML:t._s(t.getTitleText(e))}})])]):t._e()],1)])]})],2)]):o("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:t.widgetInfo.config.overflow?"visible":"hidden"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.attr.buttonHide,expression:"widgetInfo.attr.buttonHide"}],style:{position:"absolute",right:t.widgetInfo.attr.buttonHideRight+"px",top:t.widgetInfo.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"}},[o("el-tooltip",{attrs:{content:t.widgetInfo.attr.buttonHideTooltipContent,disabled:t.widgetInfo.attr.buttonHideTooltipContent==""||t.widgetInfo.attr.buttonHideTooltipContent==null,"open-delay":1e3,effect:"dark",placement:"top"}},[o("el-button",{class:t.widgetInfo.attr.buttonHideIconClass&&t.widgetInfo.attr.buttonHideIconClass!=""?t.widgetInfo.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.widgetInfo.attr.buttonHideColor,fontSize:t.widgetInfo.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.onHide()}}})],1)],1),t._l(t.orgWidget(t.widgetInfo.config.widgets),function(e){return[o("div",{style:t.getWidgetStyle(e)},[o("div",{key:"widget_"+e.id,ref:"widget_"+e.id,refInFor:!0,class:t.getWidgetClass(e),style:t.getBindStyle(e),attrs:{id:"widget_"+e.id}},[o("external-frame-svg",{ref:"comp_frame_"+e.id,refInFor:!0,attrs:{"widget-info":e}}),e.title.position==="top"||e.title.position==="left"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:t.getWidgetTitleStyle(e),on:{click:function(u){return t.openLink(e)}}},[o("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[o("span",{ref:"title_"+e.id,refInFor:!0,style:t.getTitleSpanStyle(e),domProps:{innerHTML:t._s(t.getTitleText(e))}})])]):t._e(),o("draggable-component-container",{ref:"comp_"+e.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:t.getInfoStyle(e),attrs:{"widget-data":e},on:{attrChange:t.attrChange,doGetPreviewData:t.getPreviewData,doReSetBoardId:t.doReSetBoardId}}),e.title.position==="bottom"||e.title.position==="right"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:t.getWidgetTitleStyle(e),on:{click:function(u){return t.openLink(e)}}},[o("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[o("span",{ref:"title_"+e.id,refInFor:!0,style:t.getTitleSpanStyle(e),domProps:{innerHTML:t._s(t.getTitleText(e))}})])]):t._e()],1)])]})],2)],1)},f=[],h=l(980512),g=l(193575),i=l(105143),a=l(977863),r=l(80161),n=l(445061),c=l(213743),p=l(56279),d={name:"ContainerPaneView",components:{ExternalFrameSvg:c.Z,DraggableComponentContainer:h.Z,HappyScroll:a.HappyScroll},mixins:[r.baseConfig,g.E,i.b,n.u,p.P],props:["widgetInfo","currentWidget"],data(){return{timerArr:[],dataSetArr:{},autoUpdateWidget:{},dynamicWidgets:{},prefix:{widget:"widget_"}}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo),this.$nextTick(()=>{setTimeout(()=>{this.setHappyScrollStyle()},50)})},created:function(){this.clear()},destroyed:function(){this.clear()},methods:{loadInfo(){this.getDynamicWidgetsSource(this.dynamicWidgets),this.lifecycleAfterLoad()},initAction(s){this.actionReceive(s)},getCarouselItemStyle(s){return{opacity:s.opacity,backgroundColor:s.backgroundColor,backgroundImage:this.getImageUrl(s.backgroundImage),backgroundSize:s.backgroundSize}},doReSetBoardId(s){this.$emit("doReSetBoardId",s)},getTitleText(s){return s.title.text===void 0||!s.title.text?"":s.title.text&&(s.title.position==="left"||s.title.position==="right")?s.title.text.split("").join("<br />"):s.title.text},setHappyScrollStyle(){if(this.widgetInfo.config.scroll.show){let s=0,t=0;if(this.widgetInfo.config.scroll.width&&this.widgetInfo.config.scroll.width!=0){let e=document.querySelector("#widget_"+this.widgetInfo.id).querySelector(".happy-scroll-strip--vertical");e&&e.childNodes&&e.childNodes.length>0&&e.childNodes[0].style&&e.childNodes[0].style.opacity==1&&(s=this.widgetInfo.config.scroll.width);let u=document.querySelector("#widget_"+this.widgetInfo.id).querySelector(".happy-scroll-strip--horizontal");u&&u.childNodes&&u.childNodes.length>0&&u.childNodes[0].style&&u.childNodes[0].style.opacity==1&&(t=this.widgetInfo.config.scroll.width)}let o=document.querySelector("#widget_"+this.widgetInfo.id).querySelector(".happy-scroll");o&&o.childNodes&&o.childNodes.length>0&&o.childNodes[0].style&&(o.childNodes[0].style.width=this.widgetInfo.attr.w+s+"px",o.childNodes[0].style.height=this.widgetInfo.attr.hh+t+"px")}}}},I=d,b=l(768141),S=(0,b.Z)(I,m,f,!1,null,"4614171d",null),x=S.exports}}]);
