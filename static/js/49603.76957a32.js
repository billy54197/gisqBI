"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[49603],{821382:function(p,c,a){var h=a(439733),r=a(281602),u=a(931710),g=(0,h.d)("badge"),s=g[0],l=g[1];c.Z=s({props:{dot:Boolean,max:[Number,String],color:String,content:[Number,String],tag:{type:String,default:"div"}},methods:{hasContent:function(){return!!(this.$scopedSlots.content||(0,r.Xq)(this.content)&&this.content!=="")},renderContent:function(){var d=this.dot,m=this.max,b=this.content;if(!d&&this.hasContent())return this.$scopedSlots.content?this.$scopedSlots.content():(0,r.Xq)(m)&&(0,u.k)(b)&&+b>m?m+"+":b},renderBadge:function(){var d=this.$createElement;if(this.hasContent()||this.dot)return d("div",{class:l({dot:this.dot,fixed:!!this.$scopedSlots.default}),style:{background:this.color}},[this.renderContent()])}},render:function(){var d=arguments[0];if(this.$scopedSlots.default){var m=this.tag;return d(m,{class:l("wrapper")},[this.$scopedSlots.default(),this.renderBadge()])}return this.renderBadge()}})},148275:function(p,c,a){var h=a(586569)},954387:function(p,c,a){a.d(c,{_K:function(){return l},a8:function(){return g},k7:function(){return u},pj:function(){return d},r5:function(){return f}});var h="#ee0a24",r="van-hairline",u=r+"--top",g=r+"--left",s=r+"--bottom",l=r+"--surround",f=r+"--top-bottom",d=r+"-unset--top-bottom"},753032:function(p,c,a){a.d(c,{I:function(){return r}});var h=a(281602);function r(u){var g=u.interceptor,s=u.args,l=u.done;if(g){var f=g.apply(void 0,s);(0,h.tI)(f)?f.then(function(d){d&&l()}).catch(h.ZT):f&&l()}else l()}},220511:function(p,c,a){a.d(c,{BC:function(){return r},fz:function(){return u},g2:function(){return g}});function h(s){return s.name==="NavigationDuplicated"||s.message&&s.message.indexOf("redundant navigation")!==-1}function r(s,l){var f=l.to,d=l.url,m=l.replace;if(f&&s){var b=s[m?"replace":"push"](f);b&&b.catch&&b.catch(function(w){if(w&&!h(w))throw w})}else d&&(m?location.replace(d):location.href=d)}function u(s){r(s.parent&&s.parent.$router,s.props)}var g={url:String,replace:Boolean,to:[String,Object]}},226266:function(p,c,a){a.r(c),a.d(c,{default:function(){return et}});var h=function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[i("hide-button",{attrs:{attr:t.widgetInfo.attr}}),t.repainted?i("swipe",{ref:"swipe",staticClass:"my-swipe",style:{width:"100%",height:t.swipeHeight+"px",overflow:t.widgetInfo.config.tabBarAttr.canSlide?"auto":"hidden"},attrs:{id:"my-swipe",loop:!1,touchable:!1,"initial-swipe":0,"show-indicators":!1,"lazy-render":!1,width:t.widgetInfo.attr.w},nativeOn:{scroll:function(n){t.widgetInfo.config.tabBarAttr.canSlide&&t.tabScroll(n)}}},t._l(t.tabPaneAttr,function(n){return i("swipe-item",{key:n.name,style:{height:"100%"}},[i("iframe",{class:t.closeEvent?"iframe-scroll":"",style:{width:"100%",height:"100%"},attrs:{src:t.getUrl(n),frameborder:"0"}})])}),1):t._e(),t.widgetInfo.config.badge.open?i("tabbar",{ref:"tabbar",staticClass:"my-tabbar",style:{borderTop:t.widgetInfo.config.tabBarAttr.border.open?`solid ${t.widgetInfo.config.tabBarAttr.border.borderWidth}px ${t.widgetInfo.config.tabBarAttr.borderColor}`:"solid 0 white",height:t.widgetInfo.config.tabBarAttr.tabBarHeight+"px"},attrs:{"safe-area-inset-bottom":!1,placeholder:!0,"active-color":t.widgetInfo.config.tabBarAttr.activeColor,"inactive-color":t.widgetInfo.config.tabBarAttr.inactiveColor},on:{change:t.changeTab},model:{value:t.currentIdx,callback:function(n){t.currentIdx=n},expression:"currentIdx"}},t._l(t.tabPaneAttr,function(n,o){return i("tabbar-item",{key:n.name,staticClass:"tabbar-item",style:{height:t.widgetInfo.config.tabBarAttr.tabBarHeight+"px",...t.widgetInfo.config.tabBarItemsAttr.textStyle,fontSize:t.widgetInfo.config.tabBarItemsAttr.textStyle.fontSize+"px",position:"relative"}},[i("template",{slot:"icon"},[i("badge",{style:{zIndex:1e5,visibility:o===(t.tabPaneAttr.length-1)/2&&t.widgetInfo.config.midItemAttr.open?"hidden":"visible"},attrs:{content:t.getBadge(o),color:t.widgetInfo.config.badge.color,max:t.widgetInfo.config.badge.max,dot:t.widgetInfo.config.badge.dot}},[i("i",{class:`${n.icon} tabBarIcon`,style:{fontSize:t.widgetInfo.config.tabBarItemsAttr.fontSize+"px",marginBottom:t.widgetInfo.config.tabBarItemsAttr.iconGap+"px",visibility:o===(t.tabPaneAttr.length-1)/2&&t.widgetInfo.config.midItemAttr.open?"hidden":"visible"}})]),o===(t.tabPaneAttr.length-1)/2&&t.widgetInfo.config.midItemAttr.open?i("i",{class:`${n.icon} tabBarIcon`,style:{fontSize:t.widgetInfo.config.midItemAttr.fontSize+"px",background:`${t.currentIdx===o?t.widgetInfo.config.midItemAttr.activeBackground:t.widgetInfo.config.midItemAttr.inactiveBackground}`,color:`${t.currentIdx===o?t.widgetInfo.config.midItemAttr.activeColor:t.widgetInfo.config.midItemAttr.inactiveColor}`,width:t.widgetInfo.config.midItemAttr.size+"px",height:t.widgetInfo.config.midItemAttr.size+"px",textAlign:"center",lineHeight:t.widgetInfo.config.midItemAttr.size+"px",borderRadius:"50%",position:"absolute",top:t.widgetInfo.config.midItemAttr.bottom+"px",left:"50%",transform:"translate(-50%,-50%)",zIndex:1e4,border:`solid ${t.widgetInfo.config.midItemAttr.outBorderWidth}px ${t.currentIdx===o?t.widgetInfo.config.midItemAttr.activeOuterBorderBg:t.widgetInfo.config.midItemAttr.inactiveOuterBorderBg}`}}):t._e()],1),t._v(" "+t._s(n.label))],2)}),1):i("tabbar",{ref:"tabbar",staticClass:"my-tabbar",style:{borderTop:t.widgetInfo.config.tabBarAttr.border.open?`solid ${t.widgetInfo.config.tabBarAttr.border.borderWidth}px ${t.widgetInfo.config.tabBarAttr.borderColor}`:"solid 0 white",height:t.widgetInfo.config.tabBarAttr.tabBarHeight+"px"},attrs:{"safe-area-inset-bottom":!1,placeholder:!0,"active-color":t.widgetInfo.config.tabBarAttr.activeColor,"inactive-color":t.widgetInfo.config.tabBarAttr.inactiveColor},on:{change:t.changeTab},model:{value:t.currentIdx,callback:function(n){t.currentIdx=n},expression:"currentIdx"}},t._l(t.tabPaneAttr,function(n,o){return i("tabbar-item",{key:n.name,staticClass:"tabbar-item",style:{height:t.widgetInfo.config.tabBarAttr.tabBarHeight+"px",...t.widgetInfo.config.tabBarItemsAttr.textStyle,fontSize:t.widgetInfo.config.tabBarItemsAttr.textStyle.fontSize+"px",position:"relative"}},[i("template",{slot:"icon"},[i("i",{class:`${n.icon} tabBarIcon`,style:{...t.widgetInfo.config.tabBarItemsAttr.iconTextStyle,fontSize:t.widgetInfo.config.tabBarItemsAttr.fontSize?t.widgetInfo.config.tabBarItemsAttr.fontSize+"px":t.widgetInfo.config.tabBarItemsAttr.iconTextStyle.fontSize+"px",marginBottom:t.widgetInfo.config.tabBarItemsAttr.iconGap+"px",visibility:o===(t.tabPaneAttr.length-1)/2&&t.widgetInfo.config.midItemAttr.open?"hidden":"visible"}}),o===(t.tabPaneAttr.length-1)/2&&t.widgetInfo.config.midItemAttr.open?i("i",{class:`${n.icon} tabBarIcon`,style:{fontSize:t.widgetInfo.config.midItemAttr.fontSize+"px",background:`${t.currentIdx===o?t.widgetInfo.config.midItemAttr.activeBackground:t.widgetInfo.config.midItemAttr.inactiveBackground}`,color:`${t.currentIdx===o?t.widgetInfo.config.midItemAttr.activeColor:t.widgetInfo.config.midItemAttr.inactiveColor}`,width:t.widgetInfo.config.midItemAttr.size+"px",height:t.widgetInfo.config.midItemAttr.size+"px",textAlign:"center",lineHeight:t.widgetInfo.config.midItemAttr.size+"px",borderRadius:"50%",position:"absolute",top:t.widgetInfo.config.midItemAttr.bottom+"px",left:"50%",transform:"translate(-50%,-50%)",zIndex:1e4,border:`solid ${t.widgetInfo.config.midItemAttr.outBorderWidth}px ${t.currentIdx===o?t.widgetInfo.config.midItemAttr.activeOuterBorderBg:t.widgetInfo.config.midItemAttr.inactiveOuterBorderBg}`}}):t._e()]),t._v(" "+t._s(n.label))],2)}),1)],1)},r=[],u=a(148275),g=a(821382),s=a(626427),l=a(9114),f=a(424978),d=a(46366),m=a(586569),b=a(691905),w=a(751595),P=a(604017),B=a(439733),x=a(281602),y=a(220511),S=a(40799),R=a(340321),O=a(112645),C=(0,B.d)("tabbar-item"),z=C[0],A=C[1],L=z({mixins:[(0,S.j)("vanTabbar")],props:(0,P.Z)({},y.g2,{dot:Boolean,icon:String,name:[Number,String],info:[Number,String],badge:[Number,String],iconPrefix:String}),data:function(){return{active:!1}},computed:{routeActive:function(){var t=this.to,i=this.$route;if(t&&i){var n=(0,x.Kn)(t)?t:{path:t},o=n.path===i.path,v=(0,x.Xq)(n.name)&&n.name===i.name;return o||v}}},methods:{onClick:function(t){this.parent.onChange(this.name||this.index),this.$emit("click",t),(0,y.BC)(this.$router,this)},genIcon:function(t){var i=this.$createElement,n=this.slots("icon",{active:t});if(n)return n;if(this.icon)return i(R.Z,{attrs:{name:this.icon,classPrefix:this.iconPrefix}})}},render:function(){var t,i=arguments[0],n=this.parent.route?this.routeActive:this.active,o=this.parent[n?"activeColor":"inactiveColor"];return i("div",{class:A({active:n}),style:{color:o},on:{click:this.onClick}},[i("div",{class:A("icon")},[this.genIcon(n),i(O.Z,{attrs:{dot:this.dot,info:(t=this.badge)!=null?t:this.info}})]),i("div",{class:A("text")},[this.slots("default",{active:n})])])}}),D=a(954387),N=a(753032),T=(0,B.d)("tabbar"),W=T[0],$=T[1],H=W({mixins:[(0,S.G)("vanTabbar")],props:{route:Boolean,zIndex:[Number,String],placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,value:{type:[Number,String],default:0},border:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:null}},data:function(){return{height:null}},computed:{fit:function(){return this.safeAreaInsetBottom!==null?this.safeAreaInsetBottom:this.fixed}},watch:{value:"setActiveItem",children:"setActiveItem"},mounted:function(){this.placeholder&&this.fixed&&(this.height=this.$refs.tabbar.getBoundingClientRect().height)},methods:{setActiveItem:function(){var t=this;this.children.forEach(function(i,n){i.active=(i.name||n)===t.value})},onChange:function(t){var i=this;t!==this.value&&(0,N.I)({interceptor:this.beforeChange,args:[t],done:function(){i.$emit("input",t),i.$emit("change",t)}})},genTabbar:function(){var t,i=this.$createElement;return i("div",{ref:"tabbar",style:{zIndex:this.zIndex},class:[(t={},t[D.r5]=this.border,t),$({unfit:!this.fit,fixed:this.fixed})]},[this.slots()])}},render:function(){var t=arguments[0];return this.placeholder&&this.fixed?t("div",{class:$("placeholder"),style:{height:this.height+"px"}},[this.genTabbar()]):this.genTabbar()}}),M=a(844513),F=a(927966),U=a(843514),Z=a(67157);const k={mixins:[Z.c],data(){return{config_extend:{config:{tabBarItemsAttr:{textStyle:{fontFamily:"alibabaPuHuiTiRegular"},fontSize:22}}},filter_config:{global:{fontFamily:"alibabaPuHuiTiRegular"},part:{label:{fontFamily:"",color:"#333"},logo:{color:"#333",background:"rgba(255,255,255,0)"},select:{borderColor:"#DCDFE5",color:"#616266",fontFamily:"alibabaPuHuiTiRegular",background:"#ffffff"},option:{background:"#0C235B",color:"#3DE0FD",fontStyle:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266"},backGround:{backgroundColor:"#ffffff"}}}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var j=a(723400),G=a(445061),K=a(555616),V=a(386892),X=a(126711),J=a(56279),Q=a(148836),E=a(149500),Y={props:["widgetInfo"],name:"navigation-tabbar",mixins:[U.baseConfig,k,G.u,j.j,V.D,X.H,J.P],components:{Tabbar:H,TabbarItem:L,Swipe:d.Z,SwipeItem:l.Z,Badge:g.Z,HideButton:M.Z},data(){return{currentIdx:0,tabsValue:"",closeEvent:!1,el:null,t1:0,t2:0,timer:null,timer2:null,repainted:!0}},computed:{...(0,Q.Se)(["getCanvasSetting","isView","getURLParams"]),canvasSetting(){return this.getCanvasSetting},swipeHeight(){return this.widgetInfo.attr.hh-this.widgetInfo.config.tabBarAttr.tabBarHeight-this.widgetInfo.config.tabBarAttr.border.borderWidth},tabPaneAttr(){return this.widgetInfo.config.tabBarItems}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo),this.el=document.getElementById("my-swipe")},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)},currentIdx:function(e){e!==-1&&this.emitChange(this.tabPaneAttr[e].name,this.tabPaneAttr[e].label)},"widgetInfo.attr.w":{handler:function(){let e=this;this.repainted=!1,this.$nextTick(()=>{this.repainted=!0,this.el=document.getElementById("my-swipe"),this.$nextTick(()=>{setTimeout(()=>{E.log("time-out-------"),e.changeTab(0)},200)})})}},"widgetInfo.attr.hh":{handler:function(){this.repainted=!1,this.$nextTick(()=>{this.repainted=!0,this.el=document.getElementById("my-swipe"),this.$nextTick(()=>{this.changeTab(0)})})}}},methods:{scrollToWithAnimation(e){this.timer2&&clearInterval(this.timer),this.timer2=setInterval(()=>{if(this.el.scrollLeft<=this.widgetInfo.attr.w*e){if(this.el.scrollLeft+5>this.widgetInfo.attr.w*e){clearInterval(this.timer2),this.timer2=null,this.el.scrollLeft=this.widgetInfo.attr.w*e,this.currentIdx=e;return}this.el.scrollLeft+=5}else{if(this.el.scrollLeft-5<this.widgetInfo.attr.w*e){clearInterval(this.timer2),this.timer2=null,this.el.scrollLeft=this.widgetInfo.attr.w*e,this.currentIdx=e;return}this.el.scrollLeft-=5}},4)},isScrollEnd(e){if(this.t2=e.scrollLeft,this.t2===this.t1){const t=this.widgetInfo.attr.w;let i=e.scrollLeft%t,n=Math.floor(e.scrollLeft/t);e.scrollLeft>=t*this.currentIdx?i<t/3?this.scrollToWithAnimation(n):this.scrollToWithAnimation(n+1):t-i<t/3?this.scrollToWithAnimation(n+1):this.scrollToWithAnimation(n),this.closeEvent=!1}},tabScroll(){this.widgetInfo.config.tabBarAttr.canSlide&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.isScrollEnd(this.el)},100),this.t1=this.el.scrollLeft,this.closeEvent=!0)},changeTab(e){if(this.widgetInfo.config.tabBarAttr.canSlide){if(this.timer2)return;this.scrollToWithAnimation(e);return}this.$refs.swipe.swipeTo(e,{immediate:!this.widgetInfo.config.tabBarAttr.animation}),this.currentIdx=e},emitChange(e,t){let i=this,n=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(n,o=>{if(o.enabled&&o.code==i.$$global_editor.actionType.change.code){let v=i.$$global_editor.actionType.change.code+"_"+i.widgetInfo.id,I={name:e,label:t};if(o.paramsExtend&&o.paramsExtend.length>0&&this.getParamsExtend(I,o.paramsExtend,i.widgetInfo),o.script&&o.script.enabled){if(E.log("Execute script for "+this.widgetInfo.name+" component to "+o.name+" component"),o.script.content==""){K.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",o.script.content),I=this.customScript(I)}F.Z.$emit(v,I),o.postMessage&&this.doPostMessage(I),this.actionNameList.push(v)}else if(o.enabled&&o.code==i.$$global_editor.actionType.openLink.code){let v={};if(o.paramsExtend&&o.paramsExtend.length>0){let I=[];i.widgetInfo.dataset[i.widgetInfo.dataset.type].source&&i.widgetInfo.dataset[i.widgetInfo.dataset.type].source.length>0&&(I=i.widgetInfo.dataset[i.widgetInfo.dataset.type].source[0]),this.getExtendParams(v,o.paramsExtend,I,i.widgetInfo.dataset[i.widgetInfo.dataset.type].dimensions)}this.openLinkAction(o,v)}})},loadInfo(e){this.lifecycleAfterLoad()},reLoadInfo(e){this.loadInfo(e)},initAction(e){this.actionReceive(e)},getGlobalParamsValue(e){if(this.getCanvasSetting==null||this.getCanvasSetting.data==null||this.getCanvasSetting.data.globalParams==null||this.getCanvasSetting.data.globalParams.paramsValue==null||this.getCanvasSetting.data.globalParams.paramsValue.length<1)return"";let t=this.$$lib__.find(this.getCanvasSetting.data.globalParams.paramsValue,n=>n.paramName==e);if(!t)return this.getCanvasSetting.data.globalParams.params[e];let i=this.getURLParams[t[t.type]];return i||(i=this.getCanvasSetting.data.globalParams.params[e]),i},getUrl(e){return e.encode&&Array.isArray(e.encode)&&e.encode.forEach(t=>{t.type==="static"?e.url=e.url.replace("${"+t.key+"}",t.value):e.url=e.url.replace("${"+t.key+"}",this.getGlobalParamsValue(t.value))}),e.url},getBadge(e){if(!this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[0])return;let t=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode[`page${e+1}`],i=this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions.findIndex(n=>n===t);if(i>-1){let n=this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[0][i],o="";if(isNaN(Number(n)))o=n;else if(Number(n)>0)o=n;else return;return o}}}},q=Y,_=a(768141),tt=(0,_.Z)(q,h,r,!1,null,"f18120c0",null),et=tt.exports}}]);
