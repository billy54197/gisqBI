"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[6119],{6119:function(y,l,r){r.r(l),r.d(l,{default:function(){return m}});var c=function(){var t=this,e=t._self._c;return e("vue-lazy-component",[e("el-form",{ref:"form",attrs:{size:"mini","label-width":"70px","label-position":"right",model:t.currentWidget.dataset}},[e("el-form-item",{attrs:{label:"\u6570\u636E\u7C7B\u578B"}},[e("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"},on:{change:t.changeDatasetType},model:{value:t.currentWidget.dataset.type,callback:function(s){t.$set(t.currentWidget.dataset,"type",s)},expression:"currentWidget.dataset.type"}},t._l(this.$$global_editor.dataSourcTypeList3,function(s){return e("el-option",{key:s.value,attrs:{label:s.label,value:s.value}})}),1)],1),e("el-collapse",{model:{value:t.activeNames,callback:function(s){t.activeNames=s},expression:"activeNames"}},[e("el-form-item",{attrs:{label:"\u6570\u636E\u7ED1\u5B9A"}},[e("el-tooltip",{attrs:{content:"\u6DFB\u52A0\u997C\u56FE","open-delay":1e3,effect:"dark",placement:"top"}},[e("el-button",{staticClass:"el-icon-plus",staticStyle:{color:"#13ce66","margin-right":"25px",width:"15px",height:"15px",float:"right"},attrs:{size:"small",type:"text"},on:{click:t.addDoughnut}})],1)],1),t._l(t.currentWidget.config.series,function(s,i){return e("el-collapse-item",{key:i},[e("template",{slot:"title"},[e("el-col",{staticClass:"my-title",staticStyle:{color:"white","font-size":"15px"},attrs:{span:21}},[t._v("\u997C\u56FE"+t._s(i+1))]),e("el-col",{attrs:{span:3}},[t.currentWidget.config.series.length>1?e("el-tooltip",{attrs:{content:"\u5220\u9664\u997C\u56FE","open-delay":1e3,effect:"dark",placement:"top"}},[e("el-button",{staticClass:"el-icon-delete",staticStyle:{color:"red","margin-left":"6px",padding:"3px 0",width:"30px",height:"100%"},attrs:{size:"small",type:"text"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.delDoughnut(i)}}})],1):t._e()],1)],1),e("vue-lazy-component",{staticClass:"my-collapse-chart"},[e("el-form-item",{attrs:{label:"\u540D\u79F0"}},[e("el-select",{ref:"encodeX",refInFor:!0,attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u540D\u79F0\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:t.getConfigData},model:{value:t.currentWidget.dataset[t.currentWidget.dataset.type].encode[i].name,callback:function(a){t.$set(t.currentWidget.dataset[t.currentWidget.dataset.type].encode[i],"name",a)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode[index].name"}},t._l(t.currentWidget.dataset[t.currentWidget.dataset.type].dimensionsAlias,function(a){return e("el-option",{key:a.name,attrs:{label:a.alias!=""?a.alias:a.name,value:a.name}})}),1)],1),e("el-form-item",{attrs:{label:"\u6570\u503C"}},[e("el-select",{ref:"encodeY",refInFor:!0,attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u6570\u503C\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:t.getConfigData},model:{value:t.currentWidget.dataset[t.currentWidget.dataset.type].encode[i].value,callback:function(a){t.$set(t.currentWidget.dataset[t.currentWidget.dataset.type].encode[i],"value",a)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode[index].value"}},t._l(t.currentWidget.dataset[t.currentWidget.dataset.type].dimensionsAlias,function(a){return e("el-option",{key:a.name,attrs:{label:a.alias!=""?a.alias:a.name,value:a.name}})}),1)],1)],1)],2)})],2),e("setting-dataset",{ref:"settingDataset",attrs:{currentWidget:t.currentWidget},on:{getDataSetData:t.getConfigData,clearDynamicEncode:t.clearDynamicEncode}})],1)],1)},d=[],o=r(589908),u=r(723400),g={name:"PieDoughnutMultiData",components:{SettingDataset:o.Z},props:["currentWidget"],mixins:[u.j],data(){return{activeNames:"demo"}},methods:{changeDatasetType(){this.$refs.settingDataset.loadPreview();let n=JSON.parse(JSON.stringify(this.currentWidget.config.series[0]));this.currentWidget.config.series=[],this.currentWidget.config.series.push(n),n=JSON.parse(JSON.stringify(this.currentWidget.dataset[this.currentWidget.dataset.type].encode[0])),this.currentWidget.dataset[this.currentWidget.dataset.type].encode=[],this.currentWidget.dataset[this.currentWidget.dataset.type].encode.push(n),this.getConfigData()},clearDynamicEncode(){let n=this.currentWidget.dataset[this.currentWidget.dataset.type].encode;for(let t in n)n[t].name=null,n[t].value=null},addDoughnut(){let n=JSON.parse(JSON.stringify(this.currentWidget.config.series)),t=n[n.length-1];t.center.alone[0]+=5,t.radius.nest[0]+=25,t.radius.nest[1]+=25,this.currentWidget.config.series.push(t);let e=JSON.parse(JSON.stringify(this.currentWidget.dataset[this.currentWidget.dataset.type].encode));this.currentWidget.dataset[this.currentWidget.dataset.type].encode.push(e[e.length-1]),this.getConfigData()},delDoughnut(n){this.currentWidget.config.series.splice(n,1),this.currentWidget.dataset[this.currentWidget.dataset.type].encode.splice(n,1),this.getConfigData()}}},p=g,h=r(768141),f=(0,h.Z)(p,c,d,!1,null,"3aa993a3",null),m=f.exports}}]);
