(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[9372],{567367:function(N,D,C){var M,F;(function(s){N.exports?(s.default=s,N.exports=s):(M=[C(235776),C(7715)],F=function(A){return s(A),s.Highcharts=A,s}.apply(D,M),F!==void 0&&(N.exports=F))})(function(s){function A(S,v,L,g){S.hasOwnProperty(v)||(S[v]=g.apply(null,L),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:v,module:S[v]}})))}s=s?s._modules:{},A(s,"Series/Cylinder/CylinderPoint.js",[s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],function(S,v){var L=this&&this.__extends||function(){var g=function(m,d){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,E){I.__proto__=E}||function(I,E){for(var w in E)E.hasOwnProperty(w)&&(I[w]=E[w])},g(m,d)};return function(m,d){function I(){this.constructor=m}g(m,d),m.prototype=d===null?Object.create(d):(I.prototype=d.prototype,new I)}}();return v=v.extend,S=function(g){function m(){var d=g!==null&&g.apply(this,arguments)||this;return d.options=void 0,d.series=void 0,d}return L(m,g),m}(S.seriesTypes.column.prototype.pointClass),v(S.prototype,{shapeType:"cylinder"}),S}),A(s,"Series/Cylinder/CylinderComposition.js",[s["Core/Color/Color.js"],s["Core/Globals.js"],s["Core/Math3D.js"],s["Core/Renderer/RendererRegistry.js"],s["Core/Utilities.js"]],function(S,v,L,g,m){var d=S.parse,I=v.charts,E=v.deg2rad,w=L.perspective;S=m.merge;var P=m.pick;g=g.getRendererType().prototype;var O=g.cuboidPath,j=function(r){return!r.some(function(a){return a[0]==="C"})};m=S(g.elements3d.cuboid,{parts:["top","bottom","front","back"],pathType:"cylinder",fillSetter:function(r){return this.singleSetterForParts("fill",null,{front:r,back:r,top:d(r).brighten(.1).get(),bottom:d(r).brighten(-.1).get()}),this.color=this.fill=r,this}}),g.elements3d.cylinder=m,g.cylinder=function(r){return this.element3d("cylinder",r)},g.cylinderPath=function(r){var a=I[this.chartIndex],o=O.call(this,r),e=!o.isTop,n=!o.isFront,f=this.getCylinderEnd(a,r);return r=this.getCylinderEnd(a,r,!0),{front:this.getCylinderFront(f,r),back:this.getCylinderBack(f,r),top:f,bottom:r,zIndexes:{top:e?3:0,bottom:e?0:3,front:n?2:1,back:n?1:2,group:o.zIndexes.group}}},g.getCylinderFront=function(r,a){if(r=r.slice(0,3),j(a)){var o=a[0];o[0]==="M"&&(r.push(a[2]),r.push(a[1]),r.push(["L",o[1],o[2]]))}else{o=a[0];var e=a[1];a=a[2],o[0]==="M"&&e[0]==="C"&&a[0]==="C"&&(r.push(["L",a[5],a[6]]),r.push(["C",a[3],a[4],a[1],a[2],e[5],e[6]]),r.push(["C",e[3],e[4],e[1],e[2],o[1],o[2]]))}return r.push(["Z"]),r},g.getCylinderBack=function(r,a){var o=[];if(j(r)){var e=r[0],n=r[2];e[0]==="M"&&n[0]==="L"&&(o.push(["M",n[1],n[2]]),o.push(r[3]),o.push(["L",e[1],e[2]]))}else r[2][0]==="C"&&o.push(["M",r[2][5],r[2][6]]),o.push(r[3],r[4]);return j(a)?(e=a[0],e[0]==="M"&&(o.push(["L",e[1],e[2]]),o.push(a[3]),o.push(a[2]))):(r=a[2],e=a[3],a=a[4],r[0]==="C"&&e[0]==="C"&&a[0]==="C"&&(o.push(["L",a[5],a[6]]),o.push(["C",a[3],a[4],a[1],a[2],e[5],e[6]]),o.push(["C",e[3],e[4],e[1],e[2],r[5],r[6]]))),o.push(["Z"]),o},g.getCylinderEnd=function(r,a,o){var e=a.width;e=e===void 0?0:e;var n=a.height,f=n===void 0?0:n;n=a.alphaCorrection;var l=n===void 0?0:n;n=P(a.depth,e,0);var c=Math.min(e,n)/2;l=E*(r.options.chart.options3d.beta-90+l),o=(a.y||0)+(o?f:0),f=.5519*c;var t=e/2+(a.x||0),i=n/2+(a.z||0),u=[{x:0,y:o,z:c},{x:f,y:o,z:c},{x:c,y:o,z:f},{x:c,y:o,z:0},{x:c,y:o,z:-f},{x:f,y:o,z:-c},{x:0,y:o,z:-c},{x:-f,y:o,z:-c},{x:-c,y:o,z:-f},{x:-c,y:o,z:0},{x:-c,y:o,z:f},{x:-f,y:o,z:c},{x:0,y:o,z:c}],h=Math.cos(l),b=Math.sin(l),p,y;return u.forEach(function(x,z){p=x.x,y=x.z,u[z].x=p*h-y*b+t,u[z].z=y*h+p*b+i}),r=w(u,r,!0),2.5>Math.abs(r[3].y-r[9].y)&&2.5>Math.abs(r[0].y-r[6].y)?this.toLinePath([r[0],r[3],r[6],r[9]],!0):this.getCurvedPath(r)},g.getCurvedPath=function(r){var a=[["M",r[0].x,r[0].y]],o=r.length-2,e;for(e=1;e<o;e+=3)a.push(["C",r[e].x,r[e].y,r[e+1].x,r[e+1].y,r[e+2].x,r[e+2].y]);return a}}),A(s,"Series/Cylinder/CylinderSeries.js",[s["Series/Cylinder/CylinderPoint.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],function(S,v,L){var g=this&&this.__extends||function(){var E=function(w,P){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,j){O.__proto__=j}||function(O,j){for(var r in j)j.hasOwnProperty(r)&&(O[r]=j[r])},E(w,P)};return function(w,P){function O(){this.constructor=w}E(w,P),w.prototype=P===null?Object.create(P):(O.prototype=P.prototype,new O)}}(),m=v.seriesTypes.column,d=L.extend,I=L.merge;return L=function(E){function w(){var P=E!==null&&E.apply(this,arguments)||this;return P.data=void 0,P.options=void 0,P.points=void 0,P}return g(w,E),w.defaultOptions=I(m.defaultOptions),w}(m),d(L.prototype,{pointClass:S}),v.registerSeriesType("cylinder",L),L}),A(s,"masters/modules/cylinder.src.js",[],function(){})})},180153:function(N,D,C){var M,F;(function(s){N.exports?(s.default=s,N.exports=s):(M=[C(235776),C(7715),C(567367)],F=function(A){return s(A),s.Highcharts=A,s}.apply(D,M),F!==void 0&&(N.exports=F))})(function(s){function A(S,v,L,g){S.hasOwnProperty(v)||(S[v]=g.apply(null,L),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:v,module:S[v]}})))}s=s?s._modules:{},A(s,"Series/Funnel3D/Funnel3DComposition.js",[s["Core/Color/Color.js"],s["Core/Globals.js"],s["Core/Renderer/SVG/SVGRenderer3D.js"],s["Core/Utilities.js"]],function(S,v,L,g){var m=S.parse,d=v.charts,I=g.error,E=g.extend,w=g.merge,P;return function(O){function j(a){a.funnel3d=w(a.cuboid,{parts:"top bottom frontUpper backUpper frontLower backLower rightUpper rightLower".split(" "),mainParts:["top","bottom"],sideGroups:["upperGroup","lowerGroup"],sideParts:{upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},pathType:"funnel3d",opacitySetter:function(o){var e=this,n=e.parts,f=v.charts[e.renderer.chartIndex],l="group-opacity-"+o+"-"+f.index;return e.parts=e.mainParts,e.singleSetterForParts("opacity",o),e.parts=n,f.renderer.filterId||(f.renderer.definition({tagName:"filter",attributes:{id:l},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+o}}]}]}),e.sideGroups.forEach(function(c){e[c].attr({filter:"url(#"+l+")"})}),e.renderer.styledMode&&(f.renderer.definition({tagName:"style",textContent:".highcharts-"+l+" {filter:url(#"+l+")}"}),e.sideGroups.forEach(function(c){c.addClass("highcharts-"+l)}))),e},fillSetter:function(o){var e=this,n=m(o),f=n.rgba[3],l={top:m(o).brighten(.1).get(),bottom:m(o).brighten(-.2).get()};return 1>f?(n.rgba[3]=1,n=n.get("rgb"),e.attr({opacity:f})):n=o,n.linearGradient||n.radialGradient||!e.gradientForSides||(n={linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,m(o).brighten(-.2).get()],[.5,o],[1,m(o).brighten(-.2).get()]]}),n.linearGradient?e.sideGroups.forEach(function(c){var t=e[c].gradientBox,i=n.linearGradient,u=w(n,{linearGradient:{x1:t.x+i.x1*t.width,y1:t.y+i.y1*t.height,x2:t.x+i.x2*t.width,y2:t.y+i.y2*t.height}});e.sideParts[c].forEach(function(h){l[h]=u})}):(w(!0,l,{frontUpper:n,backUpper:n,rightUpper:n,frontLower:n,backLower:n,rightLower:n}),n.radialGradient&&e.sideGroups.forEach(function(c){var t=e[c].gradientBox,i=t.x+t.width/2,u=t.y+t.height/2,h=Math.min(t.width,t.height);e.sideParts[c].forEach(function(b){e[b].setRadialReference([i,u,h])})})),e.singleSetterForParts("fill",null,l),e.color=e.fill=o,n.linearGradient&&[e.frontLower,e.frontUpper].forEach(function(c){(c=(c=c.element)&&e.renderer.gradients[c.gradient])&&c.attr("gradientUnits")!=="userSpaceOnUse"&&c.attr({gradientUnits:"userSpaceOnUse"})}),e},adjustForGradient:function(){var o=this,e;o.sideGroups.forEach(function(n){var f={x:Number.MAX_VALUE,y:Number.MAX_VALUE},l={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};o.sideParts[n].forEach(function(c){e=o[c].getBBox(!0),f={x:Math.min(f.x,e.x),y:Math.min(f.y,e.y)},l={x:Math.max(l.x,e.x+e.width),y:Math.max(l.y,e.y+e.height)}}),o[n].gradientBox={x:f.x,width:l.x-f.x,y:f.y,height:l.y-f.y}})},zIndexSetter:function(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)},onAdd:function(){this.adjustForGradient(),this.finishedOnAdd=!0}})}function r(a){var o=a.prototype;E(o,{funnel3d:function(e){var n=this.element3d("funnel3d",e),f=this.styledMode,l={"stroke-width":1,stroke:"none"};return n.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:n.frontUpper.zIndex}).add(n),[n.frontUpper,n.backUpper,n.rightUpper].forEach(function(c){f||c.attr(l),c.add(n.upperGroup)}),n.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:n.frontLower.zIndex}).add(n),[n.frontLower,n.backLower,n.rightLower].forEach(function(c){f||c.attr(l),c.add(n.lowerGroup)}),n.gradientForSides=e.gradientForSides,n},funnel3dPath:function(e){this.getCylinderEnd||I("A required Highcharts module is missing: cylinder.js",!0,d[this.chartIndex]);var n=d[this.chartIndex],f=e.alphaCorrection=90-Math.abs(n.options.chart.options3d.alpha%180-90),l=o.cuboidPath.call(this,w(e,{depth:e.width,width:(e.width+e.bottom.width)/2})),c=l.isTop,t=!l.isFront,i=!!e.middle,u=this.getCylinderEnd(n,w(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:f})),h=e.bottom.width,b=w(e,{width:h,x:e.x-h/2,z:e.z-h/2,alphaCorrection:f}),p=this.getCylinderEnd(n,b,!0),y=h,x=b,z=p,H=p;return i&&(y=e.middle.width,x=w(e,{y:e.y+e.middle.fraction*e.height,width:y,x:e.x-y/2,z:e.z-y/2}),z=this.getCylinderEnd(n,x,!1),H=this.getCylinderEnd(n,x,!1)),l={top:u,bottom:p,frontUpper:this.getCylinderFront(u,z),zIndexes:{group:l.zIndexes.group,top:c!==0?0:3,bottom:c!==1?0:3,frontUpper:t?2:1,backUpper:t?1:2,rightUpper:t?2:1}},l.backUpper=this.getCylinderBack(u,z),u=Math.min(y,e.width)/Math.max(y,e.width)!==1,l.rightUpper=this.getCylinderFront(this.getCylinderEnd(n,w(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:u?-f:0}),!1),this.getCylinderEnd(n,w(x,{alphaCorrection:u?-f:0}),!i)),i&&(u=Math.min(y,h)/Math.max(y,h)!==1,w(!0,l,{frontLower:this.getCylinderFront(H,p),backLower:this.getCylinderBack(H,p),rightLower:this.getCylinderFront(this.getCylinderEnd(n,w(b,{alphaCorrection:u?-f:0}),!0),this.getCylinderEnd(n,w(x,{alphaCorrection:u?-f:0}),!1)),zIndexes:{frontLower:t?2:1,backLower:t?1:2,rightLower:t?1:2}})),l}})}O.compose=function(a){L.compose(a),j(a.prototype.elements3d),r(a)}}(P||(P={})),P}),A(s,"Series/Funnel3D/Funnel3DPoint.js",[s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],function(S,v){var L=this&&this.__extends||function(){var g=function(m,d){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,E){I.__proto__=E}||function(I,E){for(var w in E)E.hasOwnProperty(w)&&(I[w]=E[w])},g(m,d)};return function(m,d){function I(){this.constructor=m}g(m,d),m.prototype=d===null?Object.create(d):(I.prototype=d.prototype,new I)}}();return v=v.extend,S=function(g){function m(){var d=g!==null&&g.apply(this,arguments)||this;return d.dlBoxRaw=void 0,d.options=void 0,d.series=void 0,d.y=void 0,d}return L(m,g),m}(S.seriesTypes.column.prototype.pointClass),v(S.prototype,{shapeType:"funnel3d"}),S}),A(s,"Series/Funnel3D/Funnel3DSeries.js",[s["Series/Funnel3D/Funnel3DComposition.js"],s["Series/Funnel3D/Funnel3DPoint.js"],s["Core/Globals.js"],s["Core/Math3D.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],function(S,v,L,g,m,d){var I=this&&this.__extends||function(){var o=function(e,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var c in l)l.hasOwnProperty(c)&&(f[c]=l[c])},o(e,n)};return function(e,n){function f(){this.constructor=e}o(e,n),e.prototype=n===null?Object.create(n):(f.prototype=n.prototype,new f)}}();L=L.noop;var E=g.perspective,w=m.series,P=m.seriesTypes.column,O=d.extend,j=d.merge,r=d.pick,a=d.relativeLength;return g=function(o){function e(){var n=o!==null&&o.apply(this,arguments)||this;return n.center=void 0,n.data=void 0,n.options=void 0,n.points=void 0,n}return I(e,o),e.prototype.alignDataLabel=function(n,f,l){var c=n.dlBoxRaw,t=this.chart.inverted,i=n.plotY>r(this.translatedThreshold,this.yAxis.len),u=r(l.inside,!!this.options.stacking),h={x:c.x,y:c.y,height:0};l.align=r(l.align,!t||u?"center":i?"right":"left"),l.verticalAlign=r(l.verticalAlign,t||u?"middle":i?"top":"bottom"),l.verticalAlign!=="top"&&(h.y+=c.bottom/(l.verticalAlign==="bottom"?1:2)),h.width=this.getWidthAt(h.y),this.options.reversed&&(h.width=c.fullWidth-h.width),u?h.x-=h.width/2:l.align==="left"?(l.align="right",h.x-=1.5*h.width):l.align==="right"?(l.align="left",h.x+=h.width/2):h.x-=h.width/2,n.dlBox=h,P.prototype.alignDataLabel.apply(this,arguments)},e.prototype.bindAxes=function(){w.prototype.bindAxes.apply(this,arguments),O(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),j(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})},e.prototype.translate=function(){w.prototype.translate.apply(this,arguments);var n=0,f=this.chart,l=this.options,c=l.reversed,t=l.ignoreHiddenPoint,i=f.plotWidth,u=f.plotHeight,h=0,b=l.center,p=a(b[0],i),y=a(b[1],u),x=a(l.width,i),z,H,k=a(l.height,u),J=a(l.neckWidth,i),$=a(l.neckHeight,u),B=y-k/2+k-$;i=this.data;var G,K,T,R,Z,W,U;this.getWidthAt=H=function(_){var X=y-k/2;return _>B||k===$?J:J+(x-J)*(1-(_-X)/(k-$))},this.center=[p,y,k],this.centerX=p,i.forEach(function(_){t&&_.visible===!1||(n+=_.y)}),i.forEach(function(_){Z=null,G=n?_.y/n:0,T=y-k/2+h*k,R=T+G*k,z=H(T),W=R-T,U={gradientForSides:r(_.options.gradientForSides,l.gradientForSides),x:p,y:T,height:W,width:z,z:1,top:{width:z}},z=H(R),U.bottom={fraction:G,width:z},T>=B?U.isCylinder=!0:R>B&&(Z=R,z=H(B),R=B,U.bottom.width=z,U.middle={fraction:W?(B-T)/W:0,width:z}),c&&(U.y=T=y+k/2-(h+G)*k,U.middle&&(U.middle.fraction=1-(W?U.middle.fraction:0)),z=U.width,U.width=U.bottom.width,U.bottom.width=z),_.shapeArgs=O(_.shapeArgs,U),_.percentage=100*G,_.plotX=p,_.plotY=c?y+k/2-(h+G/2)*k:(T+(Z||R))/2,K=E([{x:p,y:_.plotY,z:c?-(x-H(_.plotY))/2:-H(_.plotY)/2}],f,!0)[0],_.tooltipPos=[K.x,K.y],_.dlBoxRaw={x:p,width:H(_.plotY),y:T,bottom:U.height||0,fullWidth:x},t&&_.visible===!1||(h+=G)})},e.compose=S.compose,e.defaultOptions=j(P.defaultOptions,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}),e}(P),O(g.prototype,{pointClass:v,translate3dShapes:L}),m.registerSeriesType("funnel3d",g),g}),A(s,"masters/modules/funnel3d.src.js",[s["Core/Renderer/RendererRegistry.js"],s["Series/Funnel3D/Funnel3DSeries.js"]],function(S,v){return v.compose(S.getRendererType()),v})})},56279:function(N,D,C){"use strict";C.d(D,{P:function(){return s}});var M=C(386892),F=C(149500);const s={mixins:[M.D],created(){},methods:{lifecycleBeforeChartsLoad(A){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&F.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),F.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let v=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[A]);if(v)return v}return A},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&F.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),F.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(N,D,C){"use strict";C.d(D,{X:function(){return M},b:function(){return F}});let M={versions:function(){var s=navigator.userAgent;return{trident:s.indexOf("Trident")>-1,presto:s.indexOf("Presto")>-1,webKit:s.indexOf("AppleWebKit")>-1,gecko:s.indexOf("Gecko")>-1&&s.indexOf("KHTML")==-1,mobile:!!s.match(/AppleWebKit.*Mobile.*/),ios:!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:s.indexOf("Android")>-1,iPhone:s.indexOf("iPhone")>-1,iPad:s.indexOf("iPad")>-1,webApp:s.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},F;M.versions.mobile||M.versions.ios||M.versions.android||M.versions.iPhone||M.versions.iPad?F=!1:F=!0},709372:function(N,D,C){"use strict";C.r(D),C.d(D,{default:function(){return c}});var M=function(){var i=this,u=i._self._c;return u("div",{style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"}},[u("hide-button",{attrs:{attr:i.widgetInfo.attr}}),u("div",{ref:"funnel3d",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"}})],1)},F=[],s=C(844513),A=C(927966),S=C(307984),v=C(67157),L=C(150813);const g={mixins:[v.c],data(){return{config_extend:{},filter_config:{title:JSON.parse(JSON.stringify(L.Z.charts.title)),legend:JSON.parse(JSON.stringify(L.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(L.Z.charts.tooltip))}}},methods:{filterPredefineColoursSchemeConfig(t,i){t.series.colors=JSON.parse(JSON.stringify(i.series.colors)),this.getNewConfigWithArrary(t,i,this.filter_config)}}};var m=C(56279),d=C(445061),I=C(126711),E=C(99349),w=C(555616),P=C(275770),O=C(149500);const j=C(235776),r=C(7715),a=C(567367),o=C(180153);r(j),o(j),a(j);var e={name:"FunnelThreeDimensional",components:{HideButton:s.Z},mixins:[S.baseConfig,g,m.P,d.u,I.H,E.P],props:["widgetInfo"],data(){return{}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.loadInfo(this.widgetInfo),this.initAction(this.widgetInfo)},destroyed(){},methods:{loadInfo(t){let i=JSON.parse(JSON.stringify(t)),u=this.getChart(i.config.chart),h=this.getTitle(i.config.title),b=this.getLegend(i.config.legend),p=this.getTooltip(i),y=this.getPlotOptions(i.config.plotOptions),x=this.getSeries(i),z={chart:u,title:h,credits:{enabled:!1},legend:b,tooltip:p,plotOptions:y,series:x};j.chart(this.$refs.funnel3d,this.lifecycleBeforeChartsLoad(z))},reLoadInfo(t){t&&(this.$refs.funnel3d.style.width=t.attr.w+"px",this.$refs.funnel3d.style.height=t.attr.hh+"px"),this.loadInfo(t)},getChart(t){return t.width=this.widgetInfo.attr.w,t.height=this.widgetInfo.attr.hh,t},getTitle(t){return t.style&&t.style.fontSize&&(t.style.fontSize=t.style.fontSize+"px"),t},getLegend(t){return t.itemStyle&&t.itemStyle.fontSize&&(t.itemStyle.fontSize=t.itemStyle.fontSize+"px"),t.itemHoverStyle&&t.itemHoverStyle.fontSize&&(t.itemHoverStyle.fontSize=t.itemHoverStyle.fontSize+"px"),t.itemHiddenStyle&&t.itemHiddenStyle.fontSize&&(t.itemHiddenStyle.fontSize=t.itemHiddenStyle.fontSize+"px"),t.labelFormatter=this.getLabelFormatter(t.labelFormatter),t},getLabelFormatter(t){let i=this.widgetInfo.dataset[this.widgetInfo.dataset.type],u="",h="";if(i.dimensionsAlias&&i.encode)for(let y in i.dimensionsAlias){let x=i.dimensionsAlias[y];x.name==i.encode.name&&(u=x.alias),x.name==i.encode.value&&(h=x.alias)}let b=this;return function(){if(t.script)return new Function("params",t.scriptontent).apply(b,[this]);if(t.show){let y="";return t.str_start&&(y+=t.str_start),t.a&&(y+=u,t.str_a&&(y+=t.str_a)),t.b&&(y+=this.name,t.str_b&&(y+=t.str_b)),t.c&&(y+=h,t.str_c&&(y+=t.str_c)),t.d&&(y+=this.percentage,t.str_d&&t.str_d!=""?y+=t.str_d:y+="%"),t.str_end&&(y+=t.str_end),y.replace(/\\n/g,"<br/>")}else return this.name}},getTooltip(t){let i=this.getCensusTotal(t);return t.config.tooltip.formatter=function(){if(this.color!="transparent"){let u=(this.y/i*100).toFixed(2),h="<b>"+this.key+"</b><br/>";return h+="<b>"+u+"%</b>",h}},t.config.tooltip},getPlotOptions(t){let i=this;return t.series&&(t.series.neckWidth=t.series.neckWidth+"%",t.series.neckHeight=t.series.neckHeight+"%",t.series.width=t.series.width+"%",t.series.height=t.series.height+"%",t.series.events={click:u=>{i.onClick(u.point)}},t.series.dataLabels&&(t.series.dataLabels.style.fontSize=t.series.dataLabels.style.fontSize+"px",t.series.dataLabels.formatter=function(){if(this.color!="transparent")return this.key+"("+this.y+")"})),t},setDataColor(t,i){if(i.colorCustom==!0&&i.colors){let u=0;t.forEach((h,b)=>{i.colors[u]||(u=0),t[b].color=i.colors[u],u++})}return t},getSeries(t){let i=this.getDataSource(t);i=this.setDataColor(i,t.config.series);let u=[];if(t.config.series.gap&&t.config.series.gapHeight>0){for(let b=0;b<i.length;b++)if(u.push(i[b]),b<i.length-1){let p={};p.name="",p.y=t.config.series.gapHeight,p.color="transparent",u.push(p)}}else u=i;return[{borderColor:"#fff",data:u}]},getCensusTotal(t){let i=0;return this.getDataSource(t).forEach(h=>{i+=h.y}),i},getDataSource(t){let i=[];if(t.dataset[t.dataset.type]){let u=JSON.parse(JSON.stringify(t.dataset[t.dataset.type].source)),h=JSON.parse(JSON.stringify(t.dataset[t.dataset.type].encode)),b=JSON.parse(JSON.stringify(t.dataset[t.dataset.type].columnList)),p=null,y=null;b&&b.length>0&&b.forEach(x=>{h.name==x.name&&(p=x.index),h.value==x.name&&(y=x.index)}),u&&u.length>0&&u.forEach(x=>{if(/^(-?\d+)(\.\d+)?$/.test(x[y])){let z={};z.name=x[p],z.y=parseInt(x[y]),i.push(z)}})}return i},initAction(t){this.actionReceive(t)},onClick(t){let i=this.widgetInfo,u=[],h=this,b=i.action.sendOut.actionList;h.$$lib__.each(b,p=>{let y=p.code+"_"+i.id,x={};p.paramsExtend&&p.paramsExtend.length>0&&h.getParamsExtend(x,p.paramsExtend,i);let z=p.postMessage;if(x.name=t.name,x.value=t.y,p.enabled&&p.code==P.default.click.code){if(i.dataset[i.dataset.type].source&&i.dataset[i.dataset.type].source.length>0&&(u=i.dataset[i.dataset.type].source[t.index]),h.getExtendParams(x,p.paramsExtend,u,i.dataset[i.dataset.type].dimensions),p.script&&p.script.enabled){if(O.log("Execute script for "+h.widgetInfo.name+" component to "+p.name+" component"),p.script.content==""){w.Message.warning({message:p.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}x=new Function("param,params",p.script.content)(x,t)}A.Z.$emit(y,x),z&&h.doPostMessage(x)}else if(p.enabled&&p.code==P.default.click.openLink.code){if(p.paramsExtend&&p.paramsExtend.length>0){let H=[];i.dataset[i.dataset.type].source&&i.dataset[i.dataset.type].source.length>0&&(H=i.dataset[i.dataset.type].source[t.index]),p.type===h.$$global_editor.linkType.dynamic.code&&(p[h.$$global_editor.linkType.dynamic.code].url=h.getActionUrl(p,i.dataset[i.dataset.type].source[t.index],i.dataset[i.dataset.type].dimensions)),h.getExtendParams(x,p.paramsExtend,H,i.dataset[i.dataset.type].dimensions)}if(p.script&&p.script.enabled){if(O.log("Execute script for "+h.widgetInfo.name+" component to "+p.name+" component"),p.script.content==""){w.Message.warning({message:p.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}x=new Function("param,params",p.script.content)(x,t)}h.openLinkAction(p,x,t)}})}}},n=e,f=C(768141),l=(0,f.Z)(n,M,F,!1,null,"089e3cd0",null),c=l.exports},844513:function(N,D,C){"use strict";C.d(D,{Z:function(){return g}});var M=function(){var d=this,I=d._self._c;return d.attr.buttonHide?I("div",{style:{position:"absolute",right:d.attr.buttonHideRight+"px",top:d.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(E){return d.onHide()}}},[d.openTooltip?I("el-tooltip",{attrs:{"open-delay":1e3,content:d.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[I("el-button",{class:d.attr.buttonHideIconClass&&d.attr.buttonHideIconClass!=""?d.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:d.attr.buttonHideColor,fontSize:d.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):I("el-button",{class:d.attr.buttonHideIconClass&&d.attr.buttonHideIconClass!=""?d.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:d.attr.buttonHideColor,fontSize:d.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):d._e()},F=[],s=C(752246),A={props:["attr"],name:"hide-button",data(){return{isPc:s.b}},computed:{openTooltip:function(){let m=!1,d=this.attr.buttonHideTooltipContent;return s.b&&d&&d!=null&&d.trim()!=""&&(m=!0),m}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},S=A,v=C(768141),L=(0,v.Z)(S,M,F,!1,null,"bf399b9a",null),g=L.exports}}]);
