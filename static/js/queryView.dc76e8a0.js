(function(){"use strict";var ne={795294:function(u,S,s){var d=s(42160),p=function(){var R=this,T=R._self._c;return T("div",{staticStyle:{width:"100%",height:"100%"}},[T("screen",{ref:"view_screen"})],1)},c=[],i=function(){var R=this,T=R._self._c;return T("div",{directives:[{name:"loading",rawName:"v-loading",value:R.loading,expression:"loading"}],staticStyle:{width:"100%",height:"100%",margin:"0px",overflow:"hidden"}},[T("query-view",{ref:"query_view",attrs:{queryListId:R.query_list_id,queryListPublishId:R.query_list_publish_id,applicationId:R.application_id,"this-access-type":R.access_type}})],1)},O=[],y=s(479876),g=s(694807),P=s(148836),E={name:"screen",components:{QueryView:g.Z},mixins:[y.G],data(){return{query_list_id:null,query_list_publish_id:null,application_id:null,access_type:null}},mounted(){this.initInfo()},methods:{...(0,P.nv)(["setURLParams","setViewPreview"]),initInfo(){this.setURLParams(),this.setViewPreview(this.getUrlKey("preview")),this.query_list_id=this.getUrlKey("queryId"),this.query_list_publish_id=this.getUrlKey("queryPid"),this.application_id=this.getUrlKey("appId"),this.access_type=this.getUrlKey("tp"),setTimeout(()=>{this.$refs.query_view.initQueryInfo()},1)}}},C=E,I=s(768141),b=(0,I.Z)(C,i,O,!1,null,"7dc0cd8a",null),x=b.exports,M={name:"App",components:{Screen:x},mounted(){document.getElementsByTagName("body")[0].classList.add("query_design")}},W=M,F=(0,I.Z)(W,p,c,!1,null,"29d60055",null),B=F.exports,_=s(155946),D=s(555616),Z=s.n(D),N=s(321300),j=s(340774),$=s(807788),Q=s(416131),V=s(801559),X=s(520674),K=s(231954),q=s(66715);d.default.use(Z()),d.default.config.productionTip=!1,d.default.prototype.mUtils=N;const H=q.Z.getQueryString("applicationId")||q.Z.getQueryString("appId");K.Z.baseConfig.isPlatform&&H&&_.Z.dispatch("setApplicationIdEx",H),$.Z.setAppIcon(H),$.Z.getTokenFromUrl({isPreview:!0}),$.Z.healteBeat(5),new d.default({store:_.Z,render:J=>J(B)}).$mount("#app")},935051:function(u,S,s){s.r(S),s.d(S,{authenticationFailed:function(){return T},deleteRequest:function(){return K},downloadExcelRequest:function(){return V},formGetRequest:function(){return J},formPostRequest:function(){return R},get:function(){return H},getRequest:function(){return q},platformGetRequest:function(){return z},platformPostRequest:function(){return Y},postRequest:function(){return $},putRequest:function(){return X},uploadFileRequest:function(){return Q}});var d=s(231954),p=s(91382),c=s(155946),i=s(927966),O=s(17977),y=s.n(O),g=s(555616),P=s.n(g),E=s(645617),C=s.n(E),I=s(321300),b=s(149500);const x="X-Gisq-Token",M="X-Gisq-DeviceId",W="ApplicationId",F="gisq_request_id",B=d.Z.baseConfig,_=y().create({});_.interceptors.request.use(a=>{if(!a.url.startsWith(window.location.origin)&&!a.url.startsWith("/")&&!a.url.startsWith(".")&&!a.url.startsWith(B.platformApi)&&!a.url.startsWith(B.apiBaseURL))return a;if(a.headers[x]==null){const v=I.getStoreToken();v!==void 0&&v!==""&&v!==null&&(a.headers[x]="Bearer "+v)}if(a.headers[M]==null){const v=I.getStoreDeviceId();v!==void 0&&v!==""&&v!==null&&(a.headers[M]=v)}const m=c.Z.state.index.application.applicationId;return m&&(a.headers[W]=m),a.headers[F]=C().v4(),a},a=>(g.Message.error({message:a,offset:60}),Promise.reject(a))),_.interceptors.response.use(a=>{const m=a.data;return c.Z.commit("SET_RESPONSE_HEADERS",a.headers),m.status&&m.status!==200&&m.status!==201?m&&m.status==401?N(a):Promise.reject(m):m},a=>{let m=a&&a.response&&a.response.data&&(a.response.data.msg||a.response.data.message)||"",v=a.config.Message||g.Message;if(!(typeof a.config.errorHandler=="function"&&!a.config.errorHandler(a.response.status,a))){if(a.response.status==500){let A="\u540E\u7AEF\u670D\u52A1\u8FDE\u63A5\u5931\u8D25";if(a.response.data.type==="application/json"){let U=new FileReader;U.readAsText(a.response.data,"utf-8"),U.onload=G=>{let L=JSON.parse(G.target.result);b.info(L),v.error({message:L.message||L.msg,offset:60})},U.onload=function(G){let L=JSON.parse(G.target.result);b.info(L),v.error({message:L.message||L.msg,offset:60})}}else{A=m||A;let U="com.gisquest.datavisual.exception.DataVisualException:";A.indexOf(U)==0&&(A=A.substring(U.length)),v.error({message:A&&A.length>1?A:"\u51FA\u73B0\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5\u6216\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458",offset:60})}}else if(a.response.status==520)v.error({message:m,offset:60});else if(a.response.status==504||a.response.status==404){if(a.request.responseURL.indexOf("xzq/importGisXzqGeojson")>-1)return Promise.resolve(a);v.error({message:"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8FD4\u56DE\uFF1A"+a.response.status,offset:60})}else a.response.status==403?v.error({message:"\u6743\u9650\u4E0D\u8DB3,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458!",offset:60}):a.response.status==401?(v.error({message:m,offset:60}),T()):(b.info(a),v.error({message:m||"\u672A\u77E5\u9519\u8BEF\uFF01",offset:60}));return Promise.reject(a)}});let D=!0,Z=[];const N=async a=>{if(D){b.log("\u6B63\u5728\u5237\u65B0token"),D=!1;const m=a.config;try{const v=await j();if(v&&v!=="")return I.setStoreToken(v),Z.forEach(A=>A()),Z=[],m.headers[x]="Bearer "+v,b.log("token\u5237\u65B0\u6210\u529F",v),_(m);b.log("token\u5237\u65B0\u5931\u8D25, token\u83B7\u53D6\u4E3A\u7A7A"),Z=[],I.removeStoreToken(),T()}catch(v){b.error("token\u5237\u65B0\u5931\u8D25",v),Z=[],I.removeStoreToken(),T()}finally{D=!0}}else return new Promise(m=>{Z.push(()=>m(y()(d.Z)))});return a.data},j=async()=>{const a=I.getStoreToken();let m={http:_,token:a,mUtils:I,axios:y()};return window.refreshToken?(b.info("\u5728window.refreshToken\u4E2D\u83B7\u53D6token"),await window.refreshToken(m)):null},$=(a,m,v={})=>(v.headers||(v.headers={"Content-Type":"application/json"}),_({method:"post",url:`${d.Z.baseConfig.apiBaseURL}${a}`,data:m,...v})),Q=(a,m,v)=>_({method:"post",url:`${d.Z.baseConfig.apiBaseURL}${a}`,data:m,headers:{"Content-Type":"multipart/form-data"},...v}),V=(a,m)=>_({method:"post",url:`${d.Z.baseConfig.apiBaseURL}${a}`,data:m,responseType:"blob"}),X=(a,m)=>_({method:d.Z.baseConfig.usePutMethod?"put":"post",url:`${d.Z.baseConfig.apiBaseURL}${a}`,data:m,headers:{"Content-Type":"application/json"}}),K=a=>_({method:d.Z.baseConfig.usePutMethod?"delete":"get",url:`${d.Z.baseConfig.apiBaseURL}${a}`}),q=(a,m={})=>(m.headers||(m.headers={"Content-Type":"application/json"}),_({method:"get",url:`${d.Z.baseConfig.apiBaseURL}${a}`,...m})),H=a=>(a=location.origin+`${d.Z.baseConfig.projectName}${a}`,_({method:"get",url:a})),J=(a,m={})=>_({method:"get",url:a,...m}),R=(a,m,v={})=>_({method:"post",url:a,data:m,...v}),T=a=>{if(!I.isView())return i.Z.$emit("loginAgain",!0),!1;if(I.removeStoreToken(),I.removeStoreUserInfo(),I.removeStoreDeviceId(),I.removeStoreOrApp("needModifyPassword"),localStorage.removeItem("menuData"),c.Z.commit("ADD_MENU",[]),d.Z.baseConfig.isPlatform){if(window.top!=window){let m={from:"gisq-bi",action:"logout"};window.top.postMessage(JSON.stringify(m),"*")}if(window.bi&&window.bi.config&&window.bi.config.publishUrl){let m=window.bi.config.publishUrl.startsWith("http")?window.bi.config.publishUrl:`${d.Z.baseConfig.domain}#${window.bi.config.publishUrl}`;return window.location.href=`${m}${m.indexOf("?")>-1?"&":"?"}redirect=${encodeURIComponent(window.location.href)}`,!1}}return!a&&p.Z.currentRoute.path!=="/"?(p.Z.replace({path:"/",query:{redirect:p.Z.currentRoute.path}}),!1):!0},z=(a,m={})=>_({method:"get",url:`${d.Z.baseConfig.platformApi}${a}`,...m}),Y=(a,m,v={})=>(v.headers||(v.headers={"Content-Type":"application/json"}),_({method:"post",url:`${d.Z.baseConfig.platformApi}${a}`,data:m,...v}))},321300:function(u,S,s){s.r(S),s.d(S,{AES:function(){return je},accSub:function(){return me},addClass:function(){return A},appendCss:function(){return $e},appendImageBaseURL:function(){return fe},appendLink:function(){return Ne},appendResource:function(){return Le},arrObjSort:function(){return ae},biResourceType:function(){return Me},colorToRgb:function(){return Ze},colorToRgbValue:function(){return Te},dataSet2DataList:function(){return He},dealRegison:function(){return we},enc:function(){return De},formatDate:function(){return a},getAppStore:function(){return F},getHtmlImageInfo:function(){return pe},getImageBase64:function(){return de},getLoadUrlComponent:function(){return xe},getLocationByAddress:function(){return Ie},getNewFontSize:function(){return he},getNewPxH:function(){return be},getNewPxMin:function(){return ve},getNewPxW:function(){return ye},getScalePxW:function(){return Se},getStore:function(){return W},getStoreDeviceId:function(){return z},getStoreOrApp:function(){return N},getStoreRememberPassword:function(){return H},getStoreToken:function(){return K},getStoreUserInfo:function(){return q},getUrlKey:function(){return le},getWidgetPermissionDisabled:function(){return Fe},hexToRgba:function(){return Ae},html2canvas:function(){return Ue},isEditor:function(){return qe},isEmpty:function(){return U},isMobile:function(){return _e},isNumber:function(){return G},isView:function(){return ce},loadCallbackResource:function(){return ue},loadCallbackResourceList:function(){return Be},mergeObjs:function(){return ie},mergeObjsArr:function(){return k},parseStringTemplate:function(){return Je},parseToDate:function(){return m},parseToScope:function(){return v},randomString:function(){return Ce},rebuildData:function(){return Ee},registerScript:function(){return Re},removeAppStore:function(){return _},removeStore:function(){return B},removeStoreDeviceId:function(){return Y},removeStoreOrApp:function(){return j},removeStoreRememberPassword:function(){return T},removeStoreToken:function(){return J},removeStoreUserInfo:function(){return R},rgbaToHex:function(){return te},setAppStore:function(){return M},setBrowserTitle:function(){return ge},setImgStyle:function(){return Pe},setStore:function(){return x},setStoreDeviceId:function(){return X},setStoreOrApp:function(){return Z},setStoreRememberPassword:function(){return V},setStoreToken:function(){return $},setStoreUserInfo:function(){return Q},stringToBoolean:function(){return Oe},style2CSSStr:function(){return We},toFixedNum:function(){return L},transferFl:function(){return ee},useAppStore:function(){return D}});var d=s(645617),p=s.n(d),c=s(231954),i=s(155946),O=s(910761),y=s.n(O),g=s(117231),P=s(42160),E=s(792162),C=s.n(E),I=s(869036),b=s(149500);const x=(e,t)=>{e&&(typeof t!="string"&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t))},M=(e,t)=>{if(e&&t)if(c.Z.baseConfig.isPlatform==!1||c.Z.baseConfig.isUseAppObject==!1)x(e,t);else if(i.Z.state.index.application&&i.Z.state.index.application.applicationId&&i.Z.state.index.application.applicationId!=""){let r=i.Z.state.index.application.applicationId,n=window.localStorage.getItem("appObject");if(n)try{n=JSON.parse(n);let o=n[r];o?(o[e]=t,n[r]=o):(n[r]={},n[r][e]=t)}catch{b.error(n)}else n={},n[r]={},n[r][e]=t;window.localStorage.setItem("appObject",JSON.stringify(n))}else i.Z.state.editor.isBoardEditor!=!0&&b.error("localStorage\u4FE1\u606F\u5B58\u50A8\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A")},W=e=>{if(!e)return;let t=window.localStorage.getItem(e);if(t!==null)try{t=JSON.parse(t)}catch{return t}return t},F=e=>{if(e){if(c.Z.baseConfig.isPlatform==!1||c.Z.baseConfig.isUseAppObject==!1)return W(e);if(i.Z.state.index.application&&i.Z.state.index.application.applicationId&&i.Z.state.index.application.applicationId!=""){let t=i.Z.state.index.application.applicationId,r=window.localStorage.getItem("appObject");if(r)try{r=JSON.parse(r);let n=r[t];if(n)return n[e];i.Z.state.editor.isBoardEditor!=!0&&b.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u6CA1\u6709["+t+"]\u7684\u5E94\u7528\u4FE1\u606F")}catch{b.error(r)}else i.Z.state.editor.isBoardEditor!=!0&&b.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u6CA1\u6709appObject\u5E94\u7528\u4FE1\u606F")}else i.Z.state.editor.isBoardEditor!=!0&&b.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A");return null}},B=e=>{e&&window.localStorage.removeItem(e)},_=e=>{if(e)if(c.Z.baseConfig.isPlatform==!1||c.Z.baseConfig.isUseAppObject==!1)B(e);else if(i.Z.state.index.application&&i.Z.state.index.application.applicationId&&i.Z.state.index.application.applicationId!=""){let t=i.Z.state.index.application.applicationId,r=window.localStorage.getItem("appObject");if(r)try{r=JSON.parse(r);let n=r[t];n?(n[e]=void 0,r[t]=n,window.localStorage.setItem("appObject",JSON.stringify(r))):i.Z.state.editor.isBoardEditor!=!0&&b.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5220\u9664\u5931\u8D25\uFF0C\u6CA1\u6709["+t+"]\u7684\u5E94\u7528\u4FE1\u606F")}catch{b.error(r)}else i.Z.state.editor.isBoardEditor!=!0&&b.error("localStorage\u4FE1\u606F\u5220\u9664\u5931\u8D25\uFF0C\u6CA1\u6709appObject\u5E94\u7528\u4FE1\u606F")}else i.Z.state.editor.isBoardEditor!=!0&&b.error("localStorage\u4FE1\u606F\u5220\u9664\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A")},D=()=>c.Z.baseConfig.isPlatform&&c.Z.baseConfig.isUseAppObject&&ce()&&le("preview")!=="true"&&i.Z.state.view.preview!=!0&&window.sessionStorage.getItem("preview")!=="true",Z=(e,t)=>{D()?M(e,t):x(e,t)},N=e=>D()?F(e):W(e),j=(e,t=!1)=>{e&&((t||D())&&_(e),(t||!D())&&B(e))},$=e=>{e&&(Z("accessToken",e),Z("X-Gisq-Token","Bearer "+e))},Q=e=>{e&&(typeof e!="string"&&(e.user_id&&(e.userId=e.user_id),e.user_nickname&&(e.userName=decodeURIComponent(e.user_nickname)),e.user_name&&(e.userCode=e.user_name),e.system_user&&(e.systemUser=e.system_user),e.superManager=e.superManager||e.roles&&e.roles.indexOf("ROLE_ADMIN")>-1,e=JSON.stringify(e)),Z("userinfo",e))},V=(e,t,r,n)=>{if(!t||!r){b.log("\u7528\u6237\u6216\u8005\u5BC6\u7801\u4E3A\u7A7A,\u65E0\u6CD5\u8BB0\u4F4F\u5BC6\u7801");return}let o={username:t,password:r,expdate:new Date().getTime()+24*60*60*1e3*(n??30)},f=g.Z.encrypt_custom(JSON.stringify(o));window.localStorage.setItem("rememberPassword_"+e,f)},X=()=>{const e=N("accessDeviceId");(e==null||e==""||e==null)&&Z("accessDeviceId",p().v1())},K=()=>N("accessToken"),q=()=>{let e=N("userinfo");return e?(c.Z.baseConfig.isPlatform&&(typeof e=="string"&&(e=JSON.parse(e)),(e.user_name&&!e.userCode||e.userCode!=e.user_name)&&(e.userId=e.user_id,e.userCode=e.user_name,e.userName=decodeURIComponent(e.user_nickname||""),e.phone=e.user_tel,e.roles=e.authorities)),typeof e=="string"?e:JSON.stringify(e)):"{}"},H=e=>{let t=window.localStorage.getItem("rememberPassword_"+e);if(!t)return null;let r=JSON.parse(g.Z.decrypt_custom(t));return r.expdate<new Date().getTime()?(T(e),null):{username:r.username,password:r.password}},J=()=>{j("accessToken"),j("X-Gisq-Token")},R=()=>{j("userinfo")},T=e=>{window.localStorage.removeItem("rememberPassword_"+e)},z=()=>N("accessDeviceId"),Y=()=>{j("accessDeviceId")},a=(e,t)=>{let r=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,o=e.getDate()<10?"0"+e.getDate():e.getDate(),f=e.getHours()<10?"0"+e.getHours():e.getHours(),l=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),w=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),re=e.getMilliseconds()<10?"0"+e.getMilliseconds():e.getMilliseconds();return t==1?r+"-"+n+"-"+o+" "+f+":"+l+":"+w+"."+re:t==2?r+""+n+o+f+l+w:t==3?r+"-"+n+"-"+o:r+"-"+n+"-"+o+" "+f+":"+l+":"+w},m=e=>{let t="",r=e.substr(0,4),n=e.substr(4,2),o=e.substr(6,2),f=e.substr(8,2),l=e.substr(10,2),w=e.substr(12,2);return t=r+"-"+n+"-"+o+" "+f+":"+l+":"+w,t},v=(e,t)=>{let r={day:"\u5929",hour:"\u5C0F\u65F6",minute:"\u5206",seconds:"\u79D2",...t},n=e>=864e5?parseInt(e/864e5)+r.day:"",o=e%864e5;return n+=n.length>0||o>=36e5?parseInt(o/36e5)+r.hour:"",o=e%36e5,n+=n.length>0||o>=6e4?parseInt(o/6e4)+r.minute:"",o=e%6e4,n+=parseInt(o/1e3)+r.seconds,n},A=(e,t)=>{if(!t.headerBanner||!t.headerBanner.classList)return;let r=t.headerBanner.classList;e.target.scrollTop>10?r&&r.value.indexOf("scroll")==-1&&r.add("scroll"):r&&r.value.indexOf("scroll")>-1&&r.remove("scroll")},U=e=>{if(typeof e=="string")return e=e.replace(/\|&nbsp;|\\/g,"").replace(/(^\s*)|(\s*$)/g,""),e==""||e==null||e=="null"||e==="undefined";if(typeof e>"u")return!0;if(typeof e=="number")return!1;if(typeof e=="boolean")return!1;if(typeof e=="object")return JSON.stringify(e)=="{}"?!0:e==null;if(e instanceof Array&&e.length==0)return!0},G=e=>{let t=/^\d+(\.\d+)?$/,r=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!!(t.test(e)||r.test(e))},L=e=>Number(e).toFixed(2),fe=e=>!e||e==""?null:e.toString().indexOf("/images")==0?c.Z.baseConfig.viewImageBaseURL+e:e.toString(),de=e=>{let t='url("',r='")';return e.indexOf(t)>-1&&(e=e.substring(t.length)),e.indexOf(r)>-1&&(e=e.substring(0,e.length-r.length)),e},pe=(e,t)=>{if(!t||t==""||t=="none")return null;let r='url("',n='")';t.indexOf(r)>-1&&(t=t.substring(r.length)),t.indexOf(n)>-1&&(t=t.substring(0,t.length-n.length));let o={id:p().v4().replace(/-/g,""),name:null,type:null,url_real:null,url_temp:t,base64:null};if(t.indexOf("data:")>-1){let f=e.id;o.id=C().SHA1(t).toString(C().enc.Hex),o.type=t.substring(t.indexOf("image/")+6,t.indexOf(";")),o.name=f,o.url_real="/images/"+o.id+"."+o.type,o.base64=t}else{let f=t.substring(t.lastIndexOf("/"));o.name=f.substring(0,f.indexOf(".")),o.type=f.substring(f.indexOf(".")),o.url_real="/images/"+o.id+"."+o.type}return o},ge=e=>{document.title=e},me=(e,t)=>{let r,n,o,f;try{r=e.toString().split(".")[1].length}catch{r=0}try{n=t.toString().split(".")[1].length}catch{n=0}return o=Math.pow(10,Math.max(r,n)),f=r>=n?r:n,((e*o-t*o)/o).toFixed(f)},ie=(e,t)=>{if(t){if(!e)return t}else return e;for(let r in t)if(t[r]!=null&&t[r].constructor==Object)try{e[r]=ie(e[r],t[r])}catch(n){b.error(n)}else e[r]=t[r];return e},k=(e,t)=>{if(t){if(!e)return t}else return e;for(let r in t)if(t[r]!=null&&t[r].constructor==Object)try{e[r]=k(e[r],t[r])}catch(n){b.error(n)}else if(t[r]!=null&&t[r]instanceof Array&&t[r].length>0)if(t[r][0].constructor==Object){let n=[],o={};if(e[r])for(let f=0,l=e[r].length;f<l;f++)o[e[r][f].id]=f;for(let f=0,l=t[r].length;f<l;f++){let w=t[r][f];o[w.id]!==void 0?e[r][f]=k(e[r][f],w):n.push(w)}if(e[r])for(let f=0,l=n.length;f<l;f++)e[r].push(n[f])}else for(let n=0;n<t[r].length;n++){let o=t[r][n];e[r].indexOf(o)===-1&&e[r].push(o)}else e[r]=t[r];return e},he=(e,t,r)=>r||t||i.Z.state.board.boardConfig.canvasSetting.transformType=="autoBoth"&&i.Z.state.board.boardConfig.canvasSetting.authBothNoText?e:e*Math.min(i.Z.state.view.bodyFraction.windowH,i.Z.state.view.bodyFraction.windowW),ye=(e,t)=>typeof t=="boolean"&&t?e:typeof t=="object"&&t.attr&&t.layout?t.attr.lockedW?e:t.layout.widgetW.old>0?e*t.attr.widgetW/t.layout.widgetW.old:0:e*i.Z.state.view.bodyFraction.windowW,be=(e,t)=>typeof t=="boolean"&&t?e:typeof t=="object"&&t.attr&&t.layout?t.attr.lockedH?e:t.layout.hh.old>0?e*t.attr.hh/t.layout.hh.old:0:e*i.Z.state.view.bodyFraction.windowH,ve=(e,t)=>t?e:e*Math.min(i.Z.state.view.bodyFraction.windowW,i.Z.state.view.bodyFraction.windowH),Se=(e,t)=>{if(t==="auto"||t==="autoWidth")return e*i.Z.state.view.bodyFraction.windowScaleW;if(t==="autoHeight")return e*i.Z.state.view.bodyFraction.windowScaleH},Oe=e=>{if(e){let t=e.toString();switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return!!t}}},we=e=>{let t=e.toString().length,r;return t==5&&e=="china"?r="china":t<=2?r="geometryProvince/"+e:t<=4?r="geometryCities/"+e+"00":t<=6?r="geometryCouties/"+e+"00":t<=12&&(r="geometryTown/"+e),r},Pe=e=>{let t=s(403963);try{t=s(28544)("./"+e.widgetType+"/"+e.widgetGroup+"/"+e.widgetImg)}catch{}return{backgroundImage:"url("+t+")"}},Ee=(e,t,r)=>{let n={},o={},f=[];return y().each(t,l=>{l.id=l[r.data.id]+"_"+l.applicationId,l.label=l[r.data.name],l.type="data",n[l[r.data.category]]||(n[l[r.data.category]]=[]),n[l[r.data.category]].push(l)}),y().each(e,l=>{l.id="category_"+l[r.category.id]+"_"+l.applicationId,l.label=l[r.category.name],l.type="category",l[r.category.parentId]!=null&&l[r.category.parentId]!=""?(o[l[r.category.parentId]]||(o[l[r.category.parentId]]=[]),o[l[r.category.parentId]].push(l)):f.push(l)}),ee(f,o,n,r.category.id),f},ee=(e,t,r,n)=>{y().each(e,o=>{let f=t[o[n]];f?(o.children=f,r[o[n]]&&y().each(r[o[n]],l=>{o.children.push(l)}),ee(f,t,r,n)):r[o[n]]&&(o.children=r[o[n]])})},Ie=(e,t,r,n)=>new Promise((o,f)=>{(!t||t=="")&&(t="\u5168\u56FD");let l="http://api.map.baidu.com/place/v2/search?query="+e+"&region="+t+"&output=json&ak=8cyYUAN3bZGbZ2C8T4MD3T0HDOuDCm4x&page_size="+r+"&ret_coordtype=gcj02ll&page_num="+n;P.default.jsonp(l).then(w=>{o(w)}).catch(w=>{f(w)})}),_e=()=>{if(typeof window.gisqbiParamIsMobile>"u"){let e=navigator.userAgent;window.gisqbiParamIsMobile=e.indexOf("Linux")>-1&&e.indexOf("Android")>-1||e.indexOf("iPhone")>-1||e.indexOf("MQQBrowser")>-1}return window.gisqbiParamIsMobile},Ce=e=>{let t="";for(e||(e=4);t.length<e;t+=Math.random().toString(36).substr(2));return t.substr(0,e)},Ze=e=>{let t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e=e.toLowerCase(),e&&t.test(e)){if(e.length===4){let n="#";for(let o=1;o<4;o+=1)n+=e.slice(o,o+1).concat(e.slice(o,o+1));e=n}let r=[];for(let n=1;n<7;n+=2)r.push(parseInt("0x"+e.slice(n,n+2)));return"rgb("+r.join(",")+")"}else return e},Te=e=>{if(e=e.toLowerCase(),e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(e.length===4){let n="#";for(let o=1;o<4;o+=1)n+=e.slice(o,o+1).concat(e.slice(o,o+1));e=n}let r=[];for(let n=1;n<7;n+=2)r.push(parseInt("0x"+e.slice(n,n+2)));return r.join(",")}else if(e.indexOf("rgb")>-1){e=e.substring(e.indexOf("(")+1,e.indexOf(")"));let r=e.split(",");return r.length=3,r.join(",")}return e},te=e=>{if(e&&e.startsWith("rgba(")){let t="";e=e.trim(),e=e.substring(5,e.length-1);let r=e.split(",");r=r.map(n=>n.trim()-0);for(let n=0;n<3;++n){let o=r[n].toString(16);t+=o.length<2?"0"+o:o}if(r[3]&&r[3]<1){let n=Math.round(r[3]*100).toString(16);t+=n.length<2?"0"+n:n}return t}else return e},Ae=e=>{if(e.length<=8){let t="rgba(";for(let r=0;r<3;++r){let n=e.substr(r*2,2);t+=parseInt("0x"+n)+","}return e.length==8?t+=parseInt("0x"+e.substr(6))/100+")":t+="1)",t}else return e},xe=e=>{try{let t=null;if(typeof e=="object"?e.canvasSetting?t=e.canvasSetting:t=e:typeof e=="string"&&(t=JSON.parse(e).canvasSetting),t&&t.loading&&t.loading.type!="default")return"&load="+t.loading.type+"$"+te(t.loading.backgroundColor)+"$"+te(t.loading.iconColor)}catch(t){b.log(t)}return""},ae=(e,t,r)=>{r=r?r.toLowerCase():"asc",e.sort((n,o)=>t?r=="asc"?n[t]-o[t]:o[t]-n[t]:r=="asc"?n-o:o-n),e.forEach(n=>{n.children&&n.children.length>0&&ae(n.children,t,r)})},Re=async e=>new Promise((t,r)=>{const n=document.createElement("script");n.src=e,n.onload=t,n.onerror=r;const o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}),De=e=>{let t=JSON.parse(JSON.stringify(e));if(t.dataSet){let r=typeof t.dataSet=="string"?JSON.parse(t.dataSet):t.dataSet;r.query&&r.query.script&&(r.query.script.enabled?r.query.script.content="":delete r.query.script),r.source&&(r.source=[]),t.dataSet=JSON.stringify(r)}else{if(t.query){let r=typeof t.query=="string",n=r?JSON.parse(t.query):t.query;n.script&&(n.script.enabled?n.script.content="":delete n.script,r&&(t.query=JSON.stringify(n)))}t.source&&(t.source=[])}if(c.Z.baseConfig.enc)if(t=t||JSON.parse(JSON.stringify(e)),t.dataSet){let r=JSON.parse(t.dataSet);r.query&&(r.query=g.Z.encrypt(typeof r.query=="string"?r.query:JSON.stringify(r.query))),r.dataSetParams&&(r.dataSetParams=g.Z.encrypt(typeof r.dataSetParams=="string"?r.dataSetParams:JSON.stringify(r.dataSetParams))),t.dataSet=JSON.stringify(r)}else t.query&&(t.query=g.Z.encrypt(typeof t.query=="string"?t.query:JSON.stringify(t.query))),t.dataSetParams&&(t.dataSetParams=g.Z.encrypt(typeof t.dataSetParams=="string"?t.dataSetParams:JSON.stringify(t.dataSetParams))),t.cfg&&(t.cfg=g.Z.encrypt(typeof t.cfg=="string"?t.cfg:JSON.stringify(t.cfg)));return t},Me=e=>{let t=["10001","10002"];return y().filter(e,r=>y().contains(t,r.restypeId))},Ne=e=>{let t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("class","iconLibrary"),t.setAttribute("href",c.Z.baseConfig.projectName+e),document.head.appendChild(t)},Le=(e,t,r,n)=>{if(i.Z.state.index.application&&i.Z.state.index.application.applicationId&&i.Z.state.index.application.applicationId!=""){let o=null;switch(t){case"10001":return o=document.createElement("link"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",c.Z.baseConfig.projectName+"/resource/"+i.Z.state.index.application.applicationId+e+"?v="+r),document.head.appendChild(o),o;case"10002":return o=document.createElement("script"),o.setAttribute("charset","utf-8"),o.setAttribute("type","application/javascript"),o.setAttribute("src",c.Z.baseConfig.projectName+"/resource/"+i.Z.state.index.application.applicationId+e+"?v="+r),n&&(o.onload=n,o.onerror=n),document.head.appendChild(o),o;default:b.error("\u672A\u77E5\u8D44\u6E90\u7C7B\u578B")}}else b.error("\u5E94\u7528ID\u4E3A\u7A7A")},Be=(e,t)=>new Promise(()=>{e.reduce((r,n)=>r.then(()=>ue(n.fileUrlPath,n.restypeId,n.updatedTime)),Promise.resolve()).then(()=>{t&&t()}).catch(r=>(b.error("\u8D44\u6E90\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25:",r.name,r.message),Promise.reject(r)))}),ue=(e,t,r)=>{if(i.Z.state.index.application&&i.Z.state.index.application.applicationId&&i.Z.state.index.application.applicationId!=""){let n=null;switch(t){case"10001":return n=c.Z.baseConfig.projectName+"/resource/"+i.Z.state.index.application.applicationId+e+"?v="+r,new Promise((o,f)=>{const l=document.createElement("link");l.setAttribute("rel","stylesheet"),l.onload=()=>o(),l.onerror=()=>f(new Error(`Load css from ${n} failed`)),l.href=n;const w=document.head||document.getElementsByTagName("head")[0];(document.body||w).appendChild(l)});case"10002":return n=c.Z.baseConfig.projectName+"/resource/"+i.Z.state.index.application.applicationId+e+"?v="+r,new Promise((o,f)=>{const l=document.createElement("script");l.setAttribute("charset","utf-8"),l.setAttribute("type","application/javascript"),l.onload=()=>o(),l.onerror=()=>f(new Error(`Load script from ${n} failed`)),l.src=n;const w=document.head||document.getElementsByTagName("head")[0];(document.body||w).appendChild(l)});default:return b.error("\u672A\u77E5\u8D44\u6E90\u7C7B\u578B"),new Promise((o,f)=>{f()})}}else return b.error("\u5E94\u7528ID\u4E3A\u7A7A"),new Promise((n,o)=>{o()})},je={CryptoJS:g.Z.getCryptoJS(),encrypt:g.Z.encrypt,decrypt:g.Z.decrypt},Ue=(e,t,r)=>{if(!e||!e.dom){b.error("\u53C2\u6570\u9519\u8BEF");return}t||(t=function(n,o){n.toBlob(f=>{const l=document.createElement("a");l.download=o.filename||o.dom.id||"\u56FE\u7247",l.style.display="none",l.target="_blank",l.href=URL.createObjectURL(f),document.body.appendChild(l),l.click(),document.body.removeChild(l)})}),Promise.all([s.e(94009),s.e(23497)]).then(function(){const n=s(64707).Z;n(e.dom,{scale:e.scale||.5,useCORS:!0,allowTaint:!1}).then(o=>{t(o,e)}).catch(o=>{b.error(o),typeof r=="function"&&r(o)})}.bind(null,s)).catch(s.oe)},We=e=>Object.keys(e).reduce((t,r)=>t+(e[r]?`${r.split(/(?=[A-Z])/).join("-").toLowerCase()}:${e[r]};`:""),""),$e=(e,t)=>{let r=document.getElementById(e);r?r.innerHTML=t:(r=document.createElement("style"),r.id=e,r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r))},ce=()=>window.location.pathname.indexOf("view.html")>-1||window.location.pathname.indexOf("query_view.html")>-1||i.Z.getters.isView,qe=()=>window.location.pathname.indexOf("editor.html")>-1||window.location.pathname.indexOf("query_design.html")>-1,He=e=>{let t=null;return e&&e.type?t=e[e.type]:e&&e.source&&e.dimensions&&(t=e),t.source&&t.source.length>0&&t.dimensions?t.source.map(r=>{let n={};return t.dimensions.forEach((o,f)=>{n[o]=r[f]}),n}):[]},le=e=>{let t=(new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[""])[1];return t!=null&&decodeURIComponent(t.replace(/\+/g,"%20"))||null},Je=(e,t)=>{if(!e)return null;let r=e.split(/\$\{(?!\d)[\wæøåÆØÅ]*\}/),o=(e.match(/[^{\}]+(?=})/g)||[]).map(f=>t[f]||(t[f]===void 0?"":t[f]));return String.raw({raw:r},...o)},Fe=(e,t)=>{if(I.Z.state.viewType=="public")return!1;let r=!1,n=JSON.parse(q()),o=e.permissions,f=null;o&&o.length>0&&(f=o.find(w=>w.enabled&&w.code===t));let l=window.localStorage.getItem("roleIds");if(n&&!n.roleIdArray&&l&&(n.roleIdArray=l.split(",")),f&&f.roles&&f.roles.length>0&&n&&n.roleIdArray){let w=!1;for(let re in n.roleIdArray)if(f.roles.find(Ke=>Ke.roleId==n.roleIdArray[re])){w=!0;break}r=f&&!f.roleHide?!w:w}else if(o)for(let w=0;w<o.length;w++)o[w].code==t&&o[w].enabled&&(r=!o[w].roleHide);return r}}},oe={};function h(u){var S=oe[u];if(S!==void 0)return S.exports;var s=oe[u]={id:u,loaded:!1,exports:{}};return ne[u].call(s.exports,s,s.exports,h),s.loaded=!0,s.exports}h.m=ne,function(){h.amdO={}}(),function(){var u=[];h.O=function(S,s,d,p){if(s){p=p||0;for(var c=u.length;c>0&&u[c-1][2]>p;c--)u[c]=u[c-1];u[c]=[s,d,p];return}for(var i=1/0,c=0;c<u.length;c++){for(var s=u[c][0],d=u[c][1],p=u[c][2],O=!0,y=0;y<s.length;y++)(p&!1||i>=p)&&Object.keys(h.O).every(function(b){return h.O[b](s[y])})?s.splice(y--,1):(O=!1,p<i&&(i=p));if(O){u.splice(c--,1);var g=d();g!==void 0&&(S=g)}}return S}}(),function(){h.n=function(u){var S=u&&u.__esModule?function(){return u.default}:function(){return u};return h.d(S,{a:S}),S}}(),function(){var u=Object.getPrototypeOf?function(s){return Object.getPrototypeOf(s)}:function(s){return s.__proto__},S;h.t=function(s,d){if(d&1&&(s=this(s)),d&8||typeof s=="object"&&s&&(d&4&&s.__esModule||d&16&&typeof s.then=="function"))return s;var p=Object.create(null);h.r(p);var c={};S=S||[null,u({}),u([]),u(u)];for(var i=d&2&&s;typeof i=="object"&&!~S.indexOf(i);i=u(i))Object.getOwnPropertyNames(i).forEach(function(O){c[O]=function(){return s[O]}});return c.default=function(){return s},h.d(p,c),p}}(),function(){h.d=function(u,S){for(var s in S)h.o(S,s)&&!h.o(u,s)&&Object.defineProperty(u,s,{enumerable:!0,get:S[s]})}}(),function(){h.f={},h.e=function(u){return Promise.all(Object.keys(h.f).reduce(function(S,s){return h.f[s](u,S),S},[]))}}(),function(){h.u=function(u){return"static/js/"+u+"."+{1030:"1c7c40b3",2465:"030986b4",2739:"1edfe9f9",3850:"0cb17409",4116:"836d7fe1",4527:"83f2f2c1",6206:"885858a8",7090:"3af70bbe",7556:"bc5bff9d",8646:"d0ffd548",8890:"7a2bf188",10482:"c693da24",11174:"83640ee5",11183:"f9de8541",12768:"9ced6a87",12826:"ccca38ce",13621:"e7993f3f",14849:"9d7da7ba",14931:"09991168",15690:"4b6d5e72",17745:"edef5c2e",17813:"add0c0c5",18587:"9382e9ef",19471:"9d2d0b96",20098:"f7918d90",20755:"3022f02d",22305:"09cb9b2c",22707:"7af46e92",23497:"b4871df2",23731:"78eec250",25362:"106dbc59",26591:"827ad4d0",27737:"5df39411",27992:"993016d6",29865:"5afe550b",29932:"eef4dddb",29936:"ca12ad66",30198:"2799bfa6",30830:"367c3c4e",31357:"fa17eba2",32002:"950a19fd",32132:"3e64b9c3",32602:"941edfc8",32654:"5cbc6c98",33217:"13e53db7",33332:"129c8a7e",35151:"6462a7c8",35485:"5a5c243f",36456:"7b957eb3",36968:"d067d249",37040:"1d245d41",39450:"86b54115",40028:"e9f535bc",41e3:"6a48ead4",41585:"f2b24ba7",42019:"d980a86e",43446:"2ed7ef89",44564:"c53cae66",44777:"c527054e",46113:"486307ea",46564:"732d4ba1",47558:"a3712fe0",48773:"2432ba7b",49558:"bff864fc",49639:"79100752",50189:"8e7f0bb1",52605:"99a2d589",52830:"9e2a7bf0",52864:"2fee1bf9",53210:"751935dd",54188:"f0c9fff9",54197:"7723e5b2",55482:"7962003a",55660:"2e8c12fd",59452:"352ca5c4",62368:"1609b5cb",62732:"43a4df77",63106:"9d6b6c74",63995:"7e653c8c",64510:"4980f251",64529:"b5677fc2",64879:"87d0cf1c",65056:"b7d7c901",68397:"c5834e75",68433:"5d39b9d9",68684:"389e314b",69796:"f5b81cd7",72217:"3ab89416",73641:"b8799aca",74214:"9638e810",75201:"715ec1ed",75305:"0ea7e8ae",77334:"b65a0d1a",77414:"04743487",79273:"8162b234",80709:"e4d440a6",81080:"2953be8a",81346:"4a5c9c29",81435:"d9ce6e19",81814:"cda8444c",81978:"a7c0863a",82157:"2468c708",82876:"6b63d707",83676:"539e9554",84296:"9b88c442",88362:"15990839",88545:"717156a8",89536:"db2d5a69",90099:"1c62466f",90926:"79efcd43",91374:"ed6881e7",92241:"b4e9b97a",94009:"843f0bf8",96831:"5b154aa1",97060:"df3c7e18",97698:"6ec4a630",97986:"6683bd1e",98706:"52af0981",99096:"afd32c04"}[u]+".js"}}(),function(){h.miniCssF=function(u){return"static/css/"+u+"."+{2739:"346bf361",13621:"4b9a6c41",14849:"b473f9d9",36968:"5fdf268e",41e3:"187af014",41585:"2aed1dfd",44777:"4096670b",75201:"8461def7",81435:"31f05bfd",90099:"1d01d7b2"}[u]+".css"}}(),function(){h.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){h.o=function(u,S){return Object.prototype.hasOwnProperty.call(u,S)}}(),function(){var u={},S="datavisual:";h.l=function(s,d,p,c){if(u[s]){u[s].push(d);return}var i,O;if(p!==void 0)for(var y=document.getElementsByTagName("script"),g=0;g<y.length;g++){var P=y[g];if(P.getAttribute("src")==s||P.getAttribute("data-webpack")==S+p){i=P;break}}i||(O=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,h.nc&&i.setAttribute("nonce",h.nc),i.setAttribute("data-webpack",S+p),i.src=s),u[s]=[d];var E=function(I,b){i.onerror=i.onload=null,clearTimeout(C);var x=u[s];if(delete u[s],i.parentNode&&i.parentNode.removeChild(i),x&&x.forEach(function(M){return M(b)}),I)return I(b)},C=setTimeout(E.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=E.bind(null,i.onerror),i.onload=E.bind(null,i.onload),O&&document.head.appendChild(i)}}(),function(){h.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}}(),function(){h.nmd=function(u){return u.paths=[],u.children||(u.children=[]),u}}(),function(){h.j=91214}(),function(){h.p=""}(),function(){if(!(typeof document>"u")){var u=function(p,c,i,O,y){var g=document.createElement("link");g.rel="stylesheet",g.type="text/css";var P=function(E){if(g.onerror=g.onload=null,E.type==="load")O();else{var C=E&&E.type,I=E&&E.target&&E.target.href||c,b=new Error("Loading CSS chunk "+p+` failed.
(`+C+": "+I+")");b.name="ChunkLoadError",b.code="CSS_CHUNK_LOAD_FAILED",b.type=C,b.request=I,g.parentNode&&g.parentNode.removeChild(g),y(b)}};return g.onerror=g.onload=P,g.href=c,i?i.parentNode.insertBefore(g,i.nextSibling):document.head.appendChild(g),g},S=function(p,c){for(var i=document.getElementsByTagName("link"),O=0;O<i.length;O++){var y=i[O],g=y.getAttribute("data-href")||y.getAttribute("href");if(y.rel==="stylesheet"&&(g===p||g===c))return y}for(var P=document.getElementsByTagName("style"),O=0;O<P.length;O++){var y=P[O],g=y.getAttribute("data-href");if(g===p||g===c)return y}},s=function(p){return new Promise(function(c,i){var O=h.miniCssF(p),y=h.p+O;if(S(O,y))return c();u(p,y,null,c,i)})},d={91214:0};h.f.miniCss=function(p,c){var i={2739:1,13621:1,14849:1,36968:1,41e3:1,41585:1,44777:1,75201:1,81435:1,90099:1};d[p]?c.push(d[p]):d[p]!==0&&i[p]&&c.push(d[p]=s(p).then(function(){d[p]=0},function(O){throw delete d[p],O}))}}}(),function(){var u={91214:0};h.f.j=function(d,p){var c=h.o(u,d)?u[d]:void 0;if(c!==0)if(c)p.push(c[2]);else{var i=new Promise(function(P,E){c=u[d]=[P,E]});p.push(c[2]=i);var O=h.p+h.u(d),y=new Error,g=function(P){if(h.o(u,d)&&(c=u[d],c!==0&&(u[d]=void 0),c)){var E=P&&(P.type==="load"?"missing":P.type),C=P&&P.target&&P.target.src;y.message="Loading chunk "+d+` failed.
(`+E+": "+C+")",y.name="ChunkLoadError",y.type=E,y.request=C,c[1](y)}};h.l(O,g,"chunk-"+d,d)}},h.O.j=function(d){return u[d]===0};var S=function(d,p){var c=p[0],i=p[1],O=p[2],y,g,P=0;if(c.some(function(C){return u[C]!==0})){for(y in i)h.o(i,y)&&(h.m[y]=i[y]);if(O)var E=O(h)}for(d&&d(p);P<c.length;P++)g=c[P],h.o(u,g)&&u[g]&&u[g][0](),u[g]=0;return h.O(E)},s=self.webpackChunkdatavisual=self.webpackChunkdatavisual||[];s.forEach(S.bind(null,0)),s.push=S.bind(null,s.push.bind(s))}();var se=h.O(void 0,[94998,13064],function(){return h(795294)});se=h.O(se)})();
