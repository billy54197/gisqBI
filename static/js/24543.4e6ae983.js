(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[24543],{96542:function(X){"use strict";X.exports=z;function z(e,E){this.x=e,this.y=E}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,E){return this.clone()._rotateAround(e,E)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var E=e.x-this.x,F=e.y-this.y;return E*E+F*F},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,E){return Math.atan2(this.x*E-this.y*e,this.x*e+this.y*E)},_matMult:function(e){var E=e[0]*this.x+e[1]*this.y,F=e[2]*this.x+e[3]*this.y;return this.x=E,this.y=F,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var E=Math.cos(e),F=Math.sin(e),O=E*this.x-F*this.y,M=F*this.x+E*this.y;return this.x=O,this.y=M,this},_rotateAround:function(e,E){var F=Math.cos(e),O=Math.sin(e),M=E.x+F*(this.x-E.x)-O*(this.y-E.y),b=E.y+O*(this.x-E.x)+F*(this.y-E.y);return this.x=M,this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},z.convert=function(e){return e instanceof z?e:Array.isArray(e)?new z(e[0],e[1]):e}},199996:function(X,z,e){X.exports.VectorTile=e(814253),X.exports.VectorTileFeature=e(635752),X.exports.VectorTileLayer=e(800143)},814253:function(X,z,e){"use strict";var E=e(800143);X.exports=F;function F(M,b){this.layers=M.readFields(O,{},b)}function O(M,b,L){if(M===3){var T=new E(L,L.readVarint()+L.pos);T.length&&(b[T.name]=T)}}},635752:function(X,z,e){"use strict";var E=e(96542);X.exports=F;function F(T,C,f,v,m){this.properties={},this.extent=f,this.type=0,this._pbf=T,this._geometry=-1,this._keys=v,this._values=m,T.readFields(O,this,C)}function O(T,C,f){T==1?C.id=f.readVarint():T==2?M(f,C):T==3?C.type=f.readVarint():T==4&&(C._geometry=f.pos)}function M(T,C){for(var f=T.readVarint()+T.pos;T.pos<f;){var v=C._keys[T.readVarint()],m=C._values[T.readVarint()];C.properties[v]=m}}F.types=["Unknown","Point","LineString","Polygon"],F.prototype.loadGeometry=function(){var T=this._pbf;T.pos=this._geometry;for(var C=T.readVarint()+T.pos,f=1,v=0,m=0,o=0,h=[],l;T.pos<C;){if(v<=0){var r=T.readVarint();f=r&7,v=r>>3}if(v--,f===1||f===2)m+=T.readSVarint(),o+=T.readSVarint(),f===1&&(l&&h.push(l),l=[]),l.push(new E(m,o));else if(f===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+f)}return l&&h.push(l),h},F.prototype.bbox=function(){var T=this._pbf;T.pos=this._geometry;for(var C=T.readVarint()+T.pos,f=1,v=0,m=0,o=0,h=1/0,l=-1/0,r=1/0,s=-1/0;T.pos<C;){if(v<=0){var c=T.readVarint();f=c&7,v=c>>3}if(v--,f===1||f===2)m+=T.readSVarint(),o+=T.readSVarint(),m<h&&(h=m),m>l&&(l=m),o<r&&(r=o),o>s&&(s=o);else if(f!==7)throw new Error("unknown command "+f)}return[h,r,l,s]},F.prototype.toGeoJSON=function(T,C,f){var v=this.extent*Math.pow(2,f),m=this.extent*T,o=this.extent*C,h=this.loadGeometry(),l=F.types[this.type],r,s;function c(i){for(var n=0;n<i.length;n++){var u=i[n],g=180-(u.y+o)*360/v;i[n]=[(u.x+m)*360/v-180,360/Math.PI*Math.atan(Math.exp(g*Math.PI/180))-90]}}switch(this.type){case 1:var x=[];for(r=0;r<h.length;r++)x[r]=h[r][0];h=x,c(h);break;case 2:for(r=0;r<h.length;r++)c(h[r]);break;case 3:for(h=b(h),r=0;r<h.length;r++)for(s=0;s<h[r].length;s++)c(h[r][s]);break}h.length===1?h=h[0]:l="Multi"+l;var a={type:"Feature",geometry:{type:l,coordinates:h},properties:this.properties};return"id"in this&&(a.id=this.id),a};function b(T){var C=T.length;if(C<=1)return[T];for(var f=[],v,m,o=0;o<C;o++){var h=L(T[o]);h!==0&&(m===void 0&&(m=h<0),m===h<0?(v&&f.push(v),v=[T[o]]):v.push(T[o]))}return v&&f.push(v),f}function L(T){for(var C=0,f=0,v=T.length,m=v-1,o,h;f<v;m=f++)o=T[f],h=T[m],C+=(h.x-o.x)*(o.y+h.y);return C}},800143:function(X,z,e){"use strict";var E=e(635752);X.exports=F;function F(b,L){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=b,this._keys=[],this._values=[],this._features=[],b.readFields(O,this,L),this.length=this._features.length}function O(b,L,T){b===15?L.version=T.readVarint():b===1?L.name=T.readString():b===5?L.extent=T.readVarint():b===2?L._features.push(T.pos):b===3?L._keys.push(T.readString()):b===4&&L._values.push(M(T))}function M(b){for(var L=null,T=b.readVarint()+b.pos;b.pos<T;){var C=b.readVarint()>>3;L=C===1?b.readString():C===2?b.readFloat():C===3?b.readDouble():C===4?b.readVarint64():C===5?b.readVarint():C===6?b.readSVarint():C===7?b.readBoolean():null}return L}F.prototype.feature=function(b){if(b<0||b>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[b];var L=this._pbf.readVarint()+this._pbf.pos;return new E(this._pbf,L,this.extent,this._keys,this._values)}},110565:function(X,z){var e,E,F;(function(O,M){E=[],e=M,F=typeof e=="function"?e.apply(z,E):e,F!==void 0&&(X.exports=F)})(this,function(){var O=52.35987755982988,M=3.141592653589793,b=6378245,L=.006693421622965943,T=function(c,x){var c=+c,x=+x,a=c-.0065,i=x-.006,n=Math.sqrt(a*a+i*i)-2e-5*Math.sin(i*O),u=Math.atan2(i,a)-3e-6*Math.cos(a*O),g=n*Math.cos(u),d=n*Math.sin(u);return[g,d]},C=function(x,c){var c=+c,x=+x,a=Math.sqrt(x*x+c*c)+2e-5*Math.sin(c*O),i=Math.atan2(c,x)+3e-6*Math.cos(x*O),n=a*Math.cos(i)+.0065,u=a*Math.sin(i)+.006;return[n,u]},f=function(x,c){var c=+c,x=+x;if(h(x,c))return[x,c];var a=m(x-105,c-35),i=o(x-105,c-35),n=c/180*M,u=Math.sin(n);u=1-L*u*u;var g=Math.sqrt(u);a=a*180/(b*(1-L)/(u*g)*M),i=i*180/(b/g*Math.cos(n)*M);var d=c+a,y=x+i;return[y,d]},v=function(x,c){var c=+c,x=+x;if(h(x,c))return[x,c];var a=m(x-105,c-35),i=o(x-105,c-35),n=c/180*M,u=Math.sin(n);u=1-L*u*u;var g=Math.sqrt(u);a=a*180/(b*(1-L)/(u*g)*M),i=i*180/(b/g*Math.cos(n)*M);var d=c+a,y=x+i;return[x*2-y,c*2-d]},m=function(x,c){var c=+c,x=+x,a=-100+2*x+3*c+.2*c*c+.1*x*c+.2*Math.sqrt(Math.abs(x));return a+=(20*Math.sin(6*x*M)+20*Math.sin(2*x*M))*2/3,a+=(20*Math.sin(c*M)+40*Math.sin(c/3*M))*2/3,a+=(160*Math.sin(c/12*M)+320*Math.sin(c*M/30))*2/3,a},o=function(x,c){var c=+c,x=+x,a=300+x+2*c+.1*x*x+.1*x*c+.1*Math.sqrt(Math.abs(x));return a+=(20*Math.sin(6*x*M)+20*Math.sin(2*x*M))*2/3,a+=(20*Math.sin(x*M)+40*Math.sin(x/3*M))*2/3,a+=(150*Math.sin(x/12*M)+300*Math.sin(x/30*M))*2/3,a},h=function(x,c){var c=+c,x=+x;return!(x>73.66&&x<135.05&&c>3.86&&c<53.55)};return{bd09togcj02:T,gcj02tobd09:C,wgs84togcj02:f,gcj02towgs84:v}})},596376:function(X,z,e){var E=e(3440);(function(){for(var O in E){if(E==null||!E.hasOwnProperty(O)||O==="default"||O==="__esModule")return;z[O]=E[O]}})();var F=e(940451);(function(){for(var O in F){if(F==null||!F.hasOwnProperty(O)||O==="default"||O==="__esModule")return;z[O]=F[O]}})(),e(118841),e(923184),e(796990),e(226749),e(538109),e(33421),e(987387),e(454219),e(97408),e(255921),e(931433),e(432958),e(729923),e(579337),e(330988),e(400706),e(963914),e(553088),e(327207),e(94385),e(71626),e(359735),e(778029),e(103692),e(569124),e(910238),e(554843),e(160804),e(431075),e(362550),e(801498),e(134208),e(144344),e(36888),e(751838),e(641634),e(223710),e(703542),e(253597),e(368697),e(816613),e(182846),e(758367),e(745292),e(570846),e(623004),e(910875),e(432041),e(530690)},348642:function(X,z,e){var E=e(131879),F={};function O(){this._coordinateSystems=[]}O.prototype={constructor:O,create:function(b,L){var T=[];E.each(F,function(C,f){var v=C.create(b,L);T=T.concat(v||[])}),this._coordinateSystems=T},update:function(b,L){E.each(this._coordinateSystems,function(T){T.update&&T.update(b,L)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},O.register=function(b,L){F[b]=L},O.get=function(b){return F[b]};var M=O;X.exports=M},903868:function(X,z,e){var E=e(131879),F=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function O(b){E.each(F,function(L){this[L]=E.bind(b[L],b)},this)}var M=O;X.exports=M},109652:function(X,z,e){var E=e(3440),F=e(131879);function O(M,b){F.each(b,function(L){L.update="updateView",E.registerAction(L,function(T,C){var f={};return C.eachComponent({mainType:"series",subType:M,query:T},function(v){v[L.method]&&v[L.method](T.name,T.dataIndex);var m=v.getData();m.each(function(o){var h=m.getName(o);f[h]=v.isSelected(h)||!1})}),{name:T.name,selected:f,seriesId:T.seriesId}})})}X.exports=O},933894:function(X,z,e){var E=e(3440),F=e(131879),O=e(264072),M=O.updateCenterAndZoom;E.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(b,L){var T=b.componentType||"series";L.eachComponent({mainType:T,query:b},function(C){var f=C.coordinateSystem;if(f.type==="geo"){var v=M(f,b,C.get("scaleLimit"));C.setCenter&&C.setCenter(v.center),C.setZoom&&C.setZoom(v.zoom),T==="series"&&F.each(C.seriesGroup,function(m){m.setCenter(v.center),m.setZoom(v.zoom)})}})})},264072:function(X,z){function e(E,F,O){var M=E.getZoom(),b=E.getCenter(),L=F.zoom,T=E.dataToPoint(b);if(F.dx!=null&&F.dy!=null){T[0]-=F.dx,T[1]-=F.dy;var b=E.pointToData(T);E.setCenter(b)}if(L!=null){if(O){var C=O.min||0,f=O.max||1/0;L=Math.max(Math.min(M*L,f),C)/M}E.scale[0]*=L,E.scale[1]*=L;var v=E.position,m=(F.originX-v[0])*(L-1),o=(F.originY-v[1])*(L-1);v[0]-=m,v[1]-=o,E.updateTransform();var b=E.pointToData(T);E.setCenter(b),E.setZoom(L*M)}return{center:E.getCenter(),zoom:E.getZoom()}}z.updateCenterAndZoom=e},796990:function(X,z,e){var E=e(3440),F=e(131879),O=e(919641),M=O.layout,b=O.largeLayout;e(909145),e(811767),e(119489),e(615367),E.registerLayout(E.PRIORITY.VISUAL.LAYOUT,F.curry(M,"bar")),E.registerLayout(E.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,b),E.registerVisual({seriesType:"bar",reset:function(L){L.getData().setVisual("legendSymbol","roundRect")}})},811767:function(X,z,e){var E=e(232400),F=E.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return this.get("large")?this.get("progressive"):!1},getProgressiveThreshold:function(){var O=this.get("progressiveThreshold"),M=this.get("largeThreshold");return M>O&&(O=M),O},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});X.exports=F},119489:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(131879),b=e(248070),L=e(843100),T=L.setLabel,C=e(56785),f=e(768626),v=e(254904),m=e(827146),o=e(601655),h=o.throttle,l=e(629686),r=l.createClipPath,s=e(345507),c=["itemStyle","barBorderWidth"],x=[0,0];M.extend(C.prototype,f);function a(Z,H){var U=Z.getArea&&Z.getArea();if(Z.type==="cartesian2d"){var V=Z.getBaseAxis();if(V.type!=="category"||!V.onBand){var Y=H.getLayout("bandWidth");V.isHorizontal()?(U.x-=Y,U.width+=Y*2):(U.y-=Y,U.height+=Y*2)}}return U}var i=O.extendChartView({type:"bar",render:function(Z,H,U){this._updateDrawMode(Z);var V=Z.get("coordinateSystem");return(V==="cartesian2d"||V==="polar")&&(this._isLargeDraw?this._renderLarge(Z,H,U):this._renderNormal(Z,H,U)),this.group},incrementalPrepareRender:function(Z,H,U){this._clear(),this._updateDrawMode(Z)},incrementalRender:function(Z,H,U,V){this._incrementalRenderLarge(Z,H)},_updateDrawMode:function(Z){var H=Z.pipelineContext.large;(this._isLargeDraw==null||H^this._isLargeDraw)&&(this._isLargeDraw=H,this._clear())},_renderNormal:function(Z,H,U){var V=this.group,Y=Z.getData(),$=this._data,K=Z.coordinateSystem,J=K.getBaseAxis(),Q;K.type==="cartesian2d"?Q=J.isHorizontal():K.type==="polar"&&(Q=J.dim==="angle");var et=Z.isAnimationEnabled()?Z:null,nt=Z.get("clip",!0),st=a(K,Y);V.removeClipPath();var ut=Z.get("roundCap",!0),rt=Z.get("showBackground",!0),ht=Z.getModel("backgroundStyle"),Pt=ht.get("barBorderRadius")||0,wt=[],Mt=this._backgroundEls||[],Ft=function(Tt){var mt=w[K.type](Y,Tt),Nt=W(K,Q,mt);return Nt.useStyle(ht.getBarItemStyle()),K.type==="cartesian2d"&&Nt.setShape("r",Pt),wt[Tt]=Nt,Nt};Y.diff($).add(function(Tt){var mt=Y.getItemModel(Tt),Nt=w[K.type](Y,Tt,mt);if(rt&&Ft(Tt),!!Y.hasValue(Tt)){if(nt){var ct=g[K.type](st,Nt);if(ct){V.remove(vt);return}}var vt=d[K.type](Tt,Nt,Q,et,!1,ut);Y.setItemGraphicEl(Tt,vt),V.add(vt),R(vt,Y,Tt,mt,Nt,Z,Q,K.type==="polar")}}).update(function(Tt,mt){var Nt=Y.getItemModel(Tt),ct=w[K.type](Y,Tt,Nt);if(rt){var vt;Mt.length===0?vt=Ft(mt):(vt=Mt[mt],vt.useStyle(ht.getBarItemStyle()),K.type==="cartesian2d"&&vt.setShape("r",Pt),wt[Tt]=vt);var Lt=w[K.type](Y,Tt),Ct=G(Q,Lt,K);b.updateProps(vt,{shape:Ct},et,Tt)}var jt=$.getItemGraphicEl(mt);if(!Y.hasValue(Tt)){V.remove(jt);return}if(nt){var zt=g[K.type](st,ct);if(zt){V.remove(jt);return}}jt?b.updateProps(jt,{shape:ct},et,Tt):jt=d[K.type](Tt,ct,Q,et,!0,ut),Y.setItemGraphicEl(Tt,jt),V.add(jt),R(jt,Y,Tt,Nt,ct,Z,Q,K.type==="polar")}).remove(function(Tt){var mt=$.getItemGraphicEl(Tt);K.type==="cartesian2d"?mt&&y(Tt,et,mt):mt&&p(Tt,et,mt)}).execute();var Dt=this._backgroundGroup||(this._backgroundGroup=new m);Dt.removeAll();for(var Rt=0;Rt<wt.length;++Rt)Dt.add(wt[Rt]);V.add(Dt),this._backgroundEls=wt,this._data=Y},_renderLarge:function(Z,H,U){this._clear(),P(Z,this.group);var V=Z.get("clip",!0)?r(Z.coordinateSystem,!1,Z):null;V?this.group.setClipPath(V):this.group.removeClipPath()},_incrementalRenderLarge:function(Z,H){this._removeBackground(),P(H,this.group,!0)},dispose:M.noop,remove:function(Z){this._clear(Z)},_clear:function(Z){var H=this.group,U=this._data;Z&&Z.get("animation")&&U&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],U.eachItemGraphicEl(function(V){V.type==="sector"?p(V.dataIndex,Z,V):y(V.dataIndex,Z,V)})):H.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}}),n=Math.max,u=Math.min,g={cartesian2d:function(Z,H){var U=H.width<0?-1:1,V=H.height<0?-1:1;U<0&&(H.x+=H.width,H.width=-H.width),V<0&&(H.y+=H.height,H.height=-H.height);var Y=n(H.x,Z.x),$=u(H.x+H.width,Z.x+Z.width),K=n(H.y,Z.y),J=u(H.y+H.height,Z.y+Z.height);H.x=Y,H.y=K,H.width=$-Y,H.height=J-K;var Q=H.width<0||H.height<0;return U<0&&(H.x+=H.width,H.width=-H.width),V<0&&(H.y+=H.height,H.height=-H.height),Q},polar:function(Z,H){var U=H.r0<=H.r?1:-1;if(U<0){var V=H.r;H.r=H.r0,H.r0=V}var V=u(H.r,Z.r),Y=n(H.r0,Z.r0);H.r=V,H.r0=Y;var $=V-Y<0;if(U<0){var V=H.r;H.r=H.r0,H.r0=V}return $}},d={cartesian2d:function(Z,H,U,V,Y){var $=new b.Rect({shape:M.extend({},H),z2:1});if($.name="item",V){var K=$.shape,J=U?"height":"width",Q={};K[J]=0,Q[J]=H[J],b[Y?"updateProps":"initProps"]($,{shape:Q},V,Z)}return $},polar:function(Z,H,U,V,Y,$){var K=H.startAngle<H.endAngle,J=!U&&$?s:b.Sector,Q=new J({shape:M.defaults({clockwise:K},H),z2:1});if(Q.name="item",V){var et=Q.shape,nt=U?"r":"endAngle",st={};et[nt]=U?0:H.startAngle,st[nt]=H[nt],b[Y?"updateProps":"initProps"](Q,{shape:st},V,Z)}return Q}};function y(Z,H,U){U.style.text=null,b.updateProps(U,{shape:{width:0}},H,Z,function(){U.parent&&U.parent.remove(U)})}function p(Z,H,U){U.style.text=null,b.updateProps(U,{shape:{r:U.shape.r0}},H,Z,function(){U.parent&&U.parent.remove(U)})}var w={cartesian2d:function(Z,H,U){var V=Z.getItemLayout(H),Y=U?B(U,V):0,$=V.width>0?1:-1,K=V.height>0?1:-1;return{x:V.x+$*Y/2,y:V.y+K*Y/2,width:V.width-$*Y,height:V.height-K*Y}},polar:function(Z,H,U){var V=Z.getItemLayout(H);return{cx:V.cx,cy:V.cy,r0:V.r0,r:V.r,startAngle:V.startAngle,endAngle:V.endAngle}}};function S(Z){return Z.startAngle!=null&&Z.endAngle!=null&&Z.startAngle===Z.endAngle}function R(Z,H,U,V,Y,$,K,J){var Q=H.getItemVisual(U,"color"),et=H.getItemVisual(U,"opacity"),nt=H.getVisual("borderColor"),st=V.getModel("itemStyle"),ut=V.getModel("emphasis.itemStyle").getBarItemStyle();J||Z.setShape("r",st.get("barBorderRadius")||0),Z.useStyle(M.defaults({stroke:S(Y)?"none":nt,fill:S(Y)?"none":Q,opacity:et},st.getBarItemStyle()));var rt=V.getShallow("cursor");rt&&Z.attr("cursor",rt);var ht=K?Y.height>0?"bottom":"top":Y.width>0?"left":"right";J||T(Z.style,ut,V,Q,$,U,ht),S(Y)&&(ut.fill=ut.stroke="none"),b.setHoverStyle(Z,ut)}function B(Z,H){var U=Z.get(c)||0,V=isNaN(H.width)?Number.MAX_VALUE:Math.abs(H.width),Y=isNaN(H.height)?Number.MAX_VALUE:Math.abs(H.height);return Math.min(U,V,Y)}var k=v.extend({type:"largeBar",shape:{points:[]},buildPath:function(Z,H){for(var U=H.points,V=this.__startPoint,Y=this.__baseDimIdx,$=0;$<U.length;$+=2)V[Y]=U[$+Y],Z.moveTo(V[0],V[1]),Z.lineTo(U[$],U[$+1])}});function P(Z,H,U){var V=Z.getData(),Y=[],$=V.getLayout("valueAxisHorizontal")?1:0;Y[1-$]=V.getLayout("valueAxisStart");var K=V.getLayout("largeDataIndices"),J=V.getLayout("barWidth"),Q=Z.getModel("backgroundStyle"),et=Z.get("showBackground",!0);if(et){var nt=V.getLayout("largeBackgroundPoints"),st=[];st[1-$]=V.getLayout("backgroundStart");var ut=new k({shape:{points:nt},incremental:!!U,__startPoint:st,__baseDimIdx:$,__largeDataIndices:K,__barWidth:J,silent:!0,z2:0});I(ut,Q,V),H.add(ut)}var rt=new k({shape:{points:V.getLayout("largePoints")},incremental:!!U,__startPoint:Y,__baseDimIdx:$,__largeDataIndices:K,__barWidth:J});H.add(rt),N(rt,Z,V),rt.seriesIndex=Z.seriesIndex,Z.get("silent")||(rt.on("mousedown",D),rt.on("mousemove",D))}var D=h(function(Z){var H=this,U=A(H,Z.offsetX,Z.offsetY);H.dataIndex=U>=0?U:null},30,!1);function A(Z,H,U){var V=Z.__baseDimIdx,Y=1-V,$=Z.shape.points,K=Z.__largeDataIndices,J=Math.abs(Z.__barWidth/2),Q=Z.__startPoint[Y];x[0]=H,x[1]=U;for(var et=x[V],nt=x[1-V],st=et-J,ut=et+J,rt=0,ht=$.length/2;rt<ht;rt++){var Pt=rt*2,wt=$[Pt+V],Mt=$[Pt+Y];if(wt>=st&&wt<=ut&&(Q<=Mt?nt>=Q&&nt<=Mt:nt>=Mt&&nt<=Q))return K[rt]}return-1}function N(Z,H,U){var V=U.getVisual("borderColor")||U.getVisual("color"),Y=H.getModel("itemStyle").getItemStyle(["color","borderColor"]);Z.useStyle(Y),Z.style.fill=null,Z.style.stroke=V,Z.style.lineWidth=U.getLayout("barWidth")}function I(Z,H,U){var V=H.get("borderColor")||H.get("color"),Y=H.getItemStyle(["color","borderColor"]);Z.useStyle(Y),Z.style.fill=null,Z.style.stroke=V,Z.style.lineWidth=U.getLayout("barWidth")}function G(Z,H,U){var V,Y=U.type==="polar";return Y?V=U.getArea():V=U.grid.getRect(),Y?{cx:V.cx,cy:V.cy,r0:Z?V.r0:H.r0,r:Z?V.r:H.r,startAngle:Z?H.startAngle:0,endAngle:Z?H.endAngle:Math.PI*2}:{x:Z?H.x:V.x,y:Z?V.y:H.y,width:Z?H.width:V.width,height:Z?V.height:H.height}}function W(Z,H,U){var V=Z.type==="polar"?b.Sector:b.Rect;return new V({shape:G(H,U,Z),silent:!0,z2:0})}X.exports=i},232400:function(X,z,e){var E=e(502365),F=e(901664),O=E.extend({type:"series.__base_bar__",getInitialData:function(M,b){return F(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(M){var b=this.coordinateSystem;if(b){var L=b.dataToPoint(b.clampData(M)),T=this.getData(),C=T.getLayout("offset"),f=T.getLayout("size"),v=b.getBaseAxis().isHorizontal()?0:1;return L[v]+=C+f/2,L}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});X.exports=O},463908:function(X,z,e){var E=e(232400),F=E.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(M){return M.stack=null,F.superApply(this,"getInitialData",arguments)}}),O=F;X.exports=O},342197:function(X,z,e){var E=e(3440),F=e(131879),O=e(248070),M=e(435730),b=M.createSymbol,L=e(748354),T=L.parsePercent,C=L.isNumeric,f=e(843100),v=f.setLabel,m=["itemStyle","borderWidth"],o=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],h=new O.Circle,l=E.extendChartView({type:"pictorialBar",render:function(Z,H,U){var V=this.group,Y=Z.getData(),$=this._data,K=Z.coordinateSystem,J=K.getBaseAxis(),Q=!!J.isHorizontal(),et=K.grid.getRect(),nt={ecSize:{width:U.getWidth(),height:U.getHeight()},seriesModel:Z,coordSys:K,coordSysExtent:[[et.x,et.x+et.width],[et.y,et.y+et.height]],isHorizontal:Q,valueDim:o[+Q],categoryDim:o[1-Q]};return Y.diff($).add(function(st){if(Y.hasValue(st)){var ut=p(Y,st),rt=r(Y,st,ut,nt),ht=B(Y,nt,rt);Y.setItemGraphicEl(st,ht),V.add(ht),I(ht,nt,rt)}}).update(function(st,ut){var rt=$.getItemGraphicEl(ut);if(!Y.hasValue(st)){V.remove(rt);return}var ht=p(Y,st),Pt=r(Y,st,ht,nt),wt=D(Y,Pt);rt&&wt!==rt.__pictorialShapeStr&&(V.remove(rt),Y.setItemGraphicEl(st,null),rt=null),rt?k(rt,nt,Pt):rt=B(Y,nt,Pt,!0),Y.setItemGraphicEl(st,rt),rt.__pictorialSymbolMeta=Pt,V.add(rt),I(rt,nt,Pt)}).remove(function(st){var ut=$.getItemGraphicEl(st);ut&&P($,st,ut.__pictorialSymbolMeta.animationModel,ut)}).execute(),this._data=Y,this.group},dispose:F.noop,remove:function(Z,H){var U=this.group,V=this._data;Z.get("animation")?V&&V.eachItemGraphicEl(function(Y){P(V,Y.dataIndex,Z,Y)}):U.removeAll()}});function r(Z,H,U,V){var Y=Z.getItemLayout(H),$=U.get("symbolRepeat"),K=U.get("symbolClip"),J=U.get("symbolPosition")||"start",Q=U.get("symbolRotate"),et=(Q||0)*Math.PI/180||0,nt=U.get("symbolPatternSize")||2,st=U.isAnimationEnabled(),ut={dataIndex:H,layout:Y,itemModel:U,symbolType:Z.getItemVisual(H,"symbol")||"circle",color:Z.getItemVisual(H,"color"),symbolClip:K,symbolRepeat:$,symbolRepeatDirection:U.get("symbolRepeatDirection"),symbolPatternSize:nt,rotation:et,animationModel:st?U:null,hoverAnimation:st&&U.get("hoverAnimation"),z2:U.getShallow("z",!0)||0};s(U,$,Y,V,ut),x(Z,H,Y,$,K,ut.boundingLength,ut.pxSign,nt,V,ut),a(U,ut.symbolScale,et,V,ut);var rt=ut.symbolSize,ht=U.get("symbolOffset");return F.isArray(ht)&&(ht=[T(ht[0],rt[0]),T(ht[1],rt[1])]),i(U,rt,Y,$,K,ht,J,ut.valueLineWidth,ut.boundingLength,ut.repeatCutLength,V,ut),ut}function s(Z,H,U,V,Y){var $=V.valueDim,K=Z.get("symbolBoundingData"),J=V.coordSys.getOtherAxis(V.coordSys.getBaseAxis()),Q=J.toGlobalCoord(J.dataToCoord(0)),et=1-+(U[$.wh]<=0),nt;if(F.isArray(K)){var st=[c(J,K[0])-Q,c(J,K[1])-Q];st[1]<st[0]&&st.reverse(),nt=st[et]}else K!=null?nt=c(J,K)-Q:H?nt=V.coordSysExtent[$.index][et]-Q:nt=U[$.wh];Y.boundingLength=nt,H&&(Y.repeatCutLength=U[$.wh]),Y.pxSign=nt>0?1:nt<0?-1:0}function c(Z,H){return Z.toGlobalCoord(Z.dataToCoord(Z.scale.parse(H)))}function x(Z,H,U,V,Y,$,K,J,Q,et){var nt=Q.valueDim,st=Q.categoryDim,ut=Math.abs(U[st.wh]),rt=Z.getItemVisual(H,"symbolSize");F.isArray(rt)?rt=rt.slice():(rt==null&&(rt="100%"),rt=[rt,rt]),rt[st.index]=T(rt[st.index],ut),rt[nt.index]=T(rt[nt.index],V?ut:Math.abs($)),et.symbolSize=rt;var ht=et.symbolScale=[rt[0]/J,rt[1]/J];ht[nt.index]*=(Q.isHorizontal?-1:1)*K}function a(Z,H,U,V,Y){var $=Z.get(m)||0;$&&(h.attr({scale:H.slice(),rotation:U}),h.updateTransform(),$/=h.getLineScale(),$*=H[V.valueDim.index]),Y.valueLineWidth=$}function i(Z,H,U,V,Y,$,K,J,Q,et,nt,st){var ut=nt.categoryDim,rt=nt.valueDim,ht=st.pxSign,Pt=Math.max(H[rt.index]+J,0),wt=Pt;if(V){var Mt=Math.abs(Q),Ft=F.retrieve(Z.get("symbolMargin"),"15%")+"",Dt=!1;Ft.lastIndexOf("!")===Ft.length-1&&(Dt=!0,Ft=Ft.slice(0,Ft.length-1)),Ft=T(Ft,H[rt.index]);var Rt=Math.max(Pt+Ft*2,0),Tt=Dt?0:Ft*2,mt=C(V),Nt=mt?V:G((Mt+Tt)/Rt),ct=Mt-Nt*Pt;Ft=ct/2/(Dt?Nt:Nt-1),Rt=Pt+Ft*2,Tt=Dt?0:Ft*2,!mt&&V!=="fixed"&&(Nt=et?G((Math.abs(et)+Tt)/Rt):0),wt=Nt*Rt-Tt,st.repeatTimes=Nt,st.symbolMargin=Ft}var vt=ht*(wt/2),Lt=st.pathPosition=[];Lt[ut.index]=U[ut.wh]/2,Lt[rt.index]=K==="start"?vt:K==="end"?Q-vt:Q/2,$&&(Lt[0]+=$[0],Lt[1]+=$[1]);var Ct=st.bundlePosition=[];Ct[ut.index]=U[ut.xy],Ct[rt.index]=U[rt.xy];var jt=st.barRectShape=F.extend({},U);jt[rt.wh]=ht*Math.max(Math.abs(U[rt.wh]),Math.abs(Lt[rt.index]+vt)),jt[ut.wh]=U[ut.wh];var zt=st.clipShape={};zt[ut.xy]=-U[ut.xy],zt[ut.wh]=nt.ecSize[ut.wh],zt[rt.xy]=0,zt[rt.wh]=U[rt.wh]}function n(Z){var H=Z.symbolPatternSize,U=b(Z.symbolType,-H/2,-H/2,H,H,Z.color);return U.attr({culling:!0}),U.type!=="image"&&U.setStyle({strokeNoScale:!0}),U}function u(Z,H,U,V){var Y=Z.__pictorialBundle,$=U.symbolSize,K=U.valueLineWidth,J=U.pathPosition,Q=H.valueDim,et=U.repeatTimes||0,nt=0,st=$[H.valueDim.index]+K+U.symbolMargin*2;for(A(Z,function(Mt){Mt.__pictorialAnimationIndex=nt,Mt.__pictorialRepeatTimes=et,nt<et?N(Mt,null,ht(nt),U,V):N(Mt,null,{scale:[0,0]},U,V,function(){Y.remove(Mt)}),R(Mt,U),nt++});nt<et;nt++){var ut=n(U);ut.__pictorialAnimationIndex=nt,ut.__pictorialRepeatTimes=et,Y.add(ut);var rt=ht(nt);N(ut,{position:rt.position,scale:[0,0]},{scale:rt.scale,rotation:rt.rotation},U,V),ut.on("mouseover",Pt).on("mouseout",wt),R(ut,U)}function ht(Mt){var Ft=J.slice(),Dt=U.pxSign,Rt=Mt;return(U.symbolRepeatDirection==="start"?Dt>0:Dt<0)&&(Rt=et-1-Mt),Ft[Q.index]=st*(Rt-et/2+.5)+J[Q.index],{position:Ft,scale:U.symbolScale.slice(),rotation:U.rotation}}function Pt(){A(Z,function(Mt){Mt.trigger("emphasis")})}function wt(){A(Z,function(Mt){Mt.trigger("normal")})}}function g(Z,H,U,V){var Y=Z.__pictorialBundle,$=Z.__pictorialMainPath;$?N($,null,{position:U.pathPosition.slice(),scale:U.symbolScale.slice(),rotation:U.rotation},U,V):($=Z.__pictorialMainPath=n(U),Y.add($),N($,{position:U.pathPosition.slice(),scale:[0,0],rotation:U.rotation},{scale:U.symbolScale.slice()},U,V),$.on("mouseover",K).on("mouseout",J)),R($,U);function K(){this.trigger("emphasis")}function J(){this.trigger("normal")}}function d(Z,H,U){var V=F.extend({},H.barRectShape),Y=Z.__pictorialBarRect;Y?N(Y,null,{shape:V},H,U):(Y=Z.__pictorialBarRect=new O.Rect({z2:2,shape:V,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),Z.add(Y))}function y(Z,H,U,V){if(U.symbolClip){var Y=Z.__pictorialClipPath,$=F.extend({},U.clipShape),K=H.valueDim,J=U.animationModel,Q=U.dataIndex;if(Y)O.updateProps(Y,{shape:$},J,Q);else{$[K.wh]=0,Y=new O.Rect({shape:$}),Z.__pictorialBundle.setClipPath(Y),Z.__pictorialClipPath=Y;var et={};et[K.wh]=U.clipShape[K.wh],O[V?"updateProps":"initProps"](Y,{shape:et},J,Q)}}}function p(Z,H){var U=Z.getItemModel(H);return U.getAnimationDelayParams=w,U.isAnimationEnabled=S,U}function w(Z){return{index:Z.__pictorialAnimationIndex,count:Z.__pictorialRepeatTimes}}function S(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function R(Z,H){Z.off("emphasis").off("normal");var U=H.symbolScale.slice();H.hoverAnimation&&Z.on("emphasis",function(){this.animateTo({scale:[U[0]*1.1,U[1]*1.1]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:U.slice()},400,"elasticOut")})}function B(Z,H,U,V){var Y=new O.Group,$=new O.Group;return Y.add($),Y.__pictorialBundle=$,$.attr("position",U.bundlePosition.slice()),U.symbolRepeat?u(Y,H,U):g(Y,H,U),d(Y,U,V),y(Y,H,U,V),Y.__pictorialShapeStr=D(Z,U),Y.__pictorialSymbolMeta=U,Y}function k(Z,H,U){var V=U.animationModel,Y=U.dataIndex,$=Z.__pictorialBundle;O.updateProps($,{position:U.bundlePosition.slice()},V,Y),U.symbolRepeat?u(Z,H,U,!0):g(Z,H,U,!0),d(Z,U,!0),y(Z,H,U,!0)}function P(Z,H,U,V){var Y=V.__pictorialBarRect;Y&&(Y.style.text=null);var $=[];A(V,function(K){$.push(K)}),V.__pictorialMainPath&&$.push(V.__pictorialMainPath),V.__pictorialClipPath&&(U=null),F.each($,function(K){O.updateProps(K,{scale:[0,0]},U,H,function(){V.parent&&V.parent.remove(V)})}),Z.setItemGraphicEl(H,null)}function D(Z,H){return[Z.getItemVisual(H.dataIndex,"symbol")||"none",!!H.symbolRepeat,!!H.symbolClip].join(":")}function A(Z,H,U){F.each(Z.__pictorialBundle.children(),function(V){V!==Z.__pictorialBarRect&&H.call(U,V)})}function N(Z,H,U,V,Y,$){H&&Z.attr(H),V.symbolClip&&!Y?U&&Z.attr(U):U&&O[Y?"updateProps":"initProps"](Z,U,V.animationModel,V.dataIndex,$)}function I(Z,H,U){var V=U.color,Y=U.dataIndex,$=U.itemModel,K=$.getModel("itemStyle").getItemStyle(["color"]),J=$.getModel("emphasis.itemStyle").getItemStyle(),Q=$.getShallow("cursor");A(Z,function(ut){ut.setColor(V),ut.setStyle(F.defaults({fill:V,opacity:U.opacity},K)),O.setHoverStyle(ut,J),Q&&(ut.cursor=Q),ut.z2=U.z2});var et={},nt=H.valueDim.posDesc[+(U.boundingLength>0)],st=Z.__pictorialBarRect;v(st.style,et,$,V,H.seriesModel,Y,nt),O.setHoverStyle(st,et)}function G(Z){var H=Math.round(Z);return Math.abs(Z-H)<1e-4?H:Math.ceil(Z)}var W=l;X.exports=W},768626:function(X,z,e){var E=e(769003),F=E([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),O={getBarItemStyle:function(M){var b=F(this,M);if(this.getBorderLineDash){var L=this.getBorderLineDash();L&&(b.lineDash=L)}return b}};X.exports=O},843100:function(X,z,e){var E=e(248070),F=e(303768),O=F.getDefaultLabel;function M(L,T,C,f,v,m,o){var h=C.getModel("label"),l=C.getModel("emphasis.label");E.setLabelStyle(L,T,h,l,{labelFetcher:v,labelDataIndex:m,defaultText:O(v.getData(),m),isRectText:!0,autoColor:f}),b(L),b(T)}function b(L,T){L.textPosition==="outside"&&(L.textPosition=T)}z.setLabel=M},330988:function(X,z,e){var E=e(3440);e(573394),e(613599);var F=e(86437),O=e(836988);E.registerVisual(F),E.registerLayout(O)},573394:function(X,z,e){var E=e(131879),F=e(502365),O=e(89184),M=O.seriesModelMixin,b=F.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});E.mixin(b,M,!0);var L=b;X.exports=L},613599:function(X,z,e){var E=e(131879),F=e(901911),O=e(248070),M=e(254904),b=["itemStyle"],L=["emphasis","itemStyle"],T=F.extend({type:"boxplot",render:function(h,l,r){var s=h.getData(),c=this.group,x=this._data;this._data||c.removeAll();var a=h.get("layout")==="horizontal"?1:0;s.diff(x).add(function(i){if(s.hasValue(i)){var n=s.getItemLayout(i),u=f(n,s,i,a,!0);s.setItemGraphicEl(i,u),c.add(u)}}).update(function(i,n){var u=x.getItemGraphicEl(n);if(!s.hasValue(i)){c.remove(u);return}var g=s.getItemLayout(i);u?v(g,u,s,i):u=f(g,s,i,a),c.add(u),s.setItemGraphicEl(i,u)}).remove(function(i){var n=x.getItemGraphicEl(i);n&&c.remove(n)}).execute(),this._data=s},remove:function(h){var l=this.group,r=this._data;this._data=null,r&&r.eachItemGraphicEl(function(s){s&&l.remove(s)})},dispose:E.noop}),C=M.extend({type:"boxplotBoxPath",shape:{},buildPath:function(h,l){var r=l.points,s=0;for(h.moveTo(r[s][0],r[s][1]),s++;s<4;s++)h.lineTo(r[s][0],r[s][1]);for(h.closePath();s<r.length;s++)h.moveTo(r[s][0],r[s][1]),s++,h.lineTo(r[s][0],r[s][1])}});function f(h,l,r,s,c){var x=h.ends,a=new C({shape:{points:c?m(x,s,h):x}});return v(h,a,l,r,c),a}function v(h,l,r,s,c){var x=r.hostModel,a=O[c?"initProps":"updateProps"];a(l,{shape:{points:h.ends}},x,s);var i=r.getItemModel(s),n=i.getModel(b),u=r.getItemVisual(s,"color"),g=n.getItemStyle(["borderColor"]);g.stroke=u,g.strokeNoScale=!0,l.useStyle(g),l.z2=100;var d=i.getModel(L).getItemStyle();O.setHoverStyle(l,d)}function m(h,l,r){return E.map(h,function(s){return s=s.slice(),s[l]=r.initBaseline,s})}var o=T;X.exports=o},836988:function(X,z,e){var E=e(131879),F=e(748354),O=F.parsePercent,M=E.each;function b(f){var v=L(f);M(v,function(m){var o=m.seriesModels;o.length&&(T(m),M(o,function(h,l){C(h,m.boxOffsetList[l],m.boxWidthList[l])}))})}function L(f){var v=[],m=[];return f.eachSeriesByType("boxplot",function(o){var h=o.getBaseAxis(),l=E.indexOf(m,h);l<0&&(l=m.length,m[l]=h,v[l]={axis:h,seriesModels:[]}),v[l].seriesModels.push(o)}),v}function T(f){var v,m=f.axis,o=f.seriesModels,h=o.length,l=f.boxWidthList=[],r=f.boxOffsetList=[],s=[],c;if(m.type==="category")c=m.getBandWidth();else{var x=0;M(o,function(g){x=Math.max(x,g.getData().count())}),v=m.getExtent(),Math.abs(v[1]-v[0])/x}M(o,function(g){var d=g.get("boxWidth");E.isArray(d)||(d=[d,d]),s.push([O(d[0],c)||0,O(d[1],c)||0])});var a=c*.8-2,i=a/h*.3,n=(a-i*(h-1))/h,u=n/2-a/2;M(o,function(g,d){r.push(u),u+=i+n,l.push(Math.min(Math.max(n,s[d][0]),s[d][1]))})}function C(f,v,m){var o=f.coordinateSystem,h=f.getData(),l=m/2,r=f.get("layout")==="horizontal"?0:1,s=1-r,c=["x","y"],x=h.mapDimension(c[r]),a=h.mapDimension(c[s],!0);if(x==null||a.length<5)return;for(var i=0;i<h.count();i++){var n=h.get(x,i),u=S(n,a[2],i),g=S(n,a[0],i),d=S(n,a[1],i),y=S(n,a[3],i),p=S(n,a[4],i),w=[];R(w,d,0),R(w,y,1),w.push(g,d,p,y),B(w,g),B(w,p),B(w,u),h.setItemLayout(i,{initBaseline:u[s],ends:w})}function S(k,P,D){var A=h.get(P,D),N=[];N[r]=k,N[s]=A;var I;return isNaN(k)||isNaN(A)?I=[NaN,NaN]:(I=o.dataToPoint(N),I[r]+=v),I}function R(k,P,D){var A=P.slice(),N=P.slice();A[r]+=l,N[r]-=l,D?k.push(A,N):k.push(N,A)}function B(k,P){var D=P.slice(),A=P.slice();D[r]-=l,A[r]+=l,k.push(D,A)}}X.exports=b},86437:function(X){var z=["itemStyle","borderColor"];function e(E,F){var O=E.get("color");E.eachRawSeriesByType("boxplot",function(M){var b=O[M.seriesIndex%O.length],L=M.getData();L.setVisual({legendSymbol:"roundRect",color:M.get(z)||b}),E.isSeriesFiltered(M)||L.each(function(T){var C=L.getItemModel(T);L.setItemVisual(T,{color:C.get(z,!0)})})})}X.exports=e},400706:function(X,z,e){var E=e(3440);e(724577),e(625587);var F=e(754134),O=e(261341),M=e(869904);E.registerPreprocessor(F),E.registerVisual(O),E.registerLayout(M)},724577:function(X,z,e){var E=e(131879),F=e(502365),O=e(89184),M=O.seriesModelMixin,b=F.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(T,C,f){var v=C.getItemLayout(T);return v&&f.rect(v.brushRect)}});E.mixin(b,M,!0);var L=b;X.exports=L},625587:function(X,z,e){var E=e(131879),F=e(901911),O=e(248070),M=e(254904),b=e(629686),L=b.createClipPath,T=["itemStyle"],C=["emphasis","itemStyle"],f=["color","color0","borderColor","borderColor0"],v=F.extend({type:"candlestick",render:function(i,n,u){this.group.removeClipPath(),this._updateDrawMode(i),this._isLargeDraw?this._renderLarge(i):this._renderNormal(i)},incrementalPrepareRender:function(i,n,u){this._clear(),this._updateDrawMode(i)},incrementalRender:function(i,n,u,g){this._isLargeDraw?this._incrementalRenderLarge(i,n):this._incrementalRenderNormal(i,n)},_updateDrawMode:function(i){var n=i.pipelineContext.large;(this._isLargeDraw==null||n^this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},_renderNormal:function(i){var n=i.getData(),u=this._data,g=this.group,d=n.getLayout("isSimpleBox"),y=i.get("clip",!0),p=i.coordinateSystem,w=p.getArea&&p.getArea();this._data||g.removeAll(),n.diff(u).add(function(S){if(n.hasValue(S)){var R,B=n.getItemLayout(S);if(y&&h(w,B))return;R=o(B,S,!0),O.initProps(R,{shape:{points:B.ends}},i,S),l(R,n,S,d),g.add(R),n.setItemGraphicEl(S,R)}}).update(function(S,R){var B=u.getItemGraphicEl(R);if(!n.hasValue(S)){g.remove(B);return}var k=n.getItemLayout(S);if(y&&h(w,k)){g.remove(B);return}B?O.updateProps(B,{shape:{points:k.ends}},i,S):B=o(k,S),l(B,n,S,d),g.add(B),n.setItemGraphicEl(S,B)}).remove(function(S){var R=u.getItemGraphicEl(S);R&&g.remove(R)}).execute(),this._data=n},_renderLarge:function(i){this._clear(),c(i,this.group);var n=i.get("clip",!0)?L(i.coordinateSystem,!1,i):null;n?this.group.setClipPath(n):this.group.removeClipPath()},_incrementalRenderNormal:function(i,n){for(var u=n.getData(),g=u.getLayout("isSimpleBox"),d;(d=i.next())!=null;){var y,p=u.getItemLayout(d);y=o(p,d),l(y,u,d,g),y.incremental=!0,this.group.add(y)}},_incrementalRenderLarge:function(i,n){c(n,this.group,!0)},remove:function(i){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:E.noop}),m=M.extend({type:"normalCandlestickBox",shape:{},buildPath:function(i,n){var u=n.points;this.__simpleBox?(i.moveTo(u[4][0],u[4][1]),i.lineTo(u[6][0],u[6][1])):(i.moveTo(u[0][0],u[0][1]),i.lineTo(u[1][0],u[1][1]),i.lineTo(u[2][0],u[2][1]),i.lineTo(u[3][0],u[3][1]),i.closePath(),i.moveTo(u[4][0],u[4][1]),i.lineTo(u[5][0],u[5][1]),i.moveTo(u[6][0],u[6][1]),i.lineTo(u[7][0],u[7][1]))}});function o(i,n,u){var g=i.ends;return new m({shape:{points:u?r(g,i):g},z2:100})}function h(i,n){for(var u=!0,g=0;g<n.ends.length;g++)if(i.contain(n.ends[g][0],n.ends[g][1])){u=!1;break}return u}function l(i,n,u,g){var d=n.getItemModel(u),y=d.getModel(T),p=n.getItemVisual(u,"color"),w=n.getItemVisual(u,"borderColor")||p,S=y.getItemStyle(f);i.useStyle(S),i.style.strokeNoScale=!0,i.style.fill=p,i.style.stroke=w,i.__simpleBox=g;var R=d.getModel(C).getItemStyle();O.setHoverStyle(i,R)}function r(i,n){return E.map(i,function(u){return u=u.slice(),u[1]=n.initBaseline,u})}var s=M.extend({type:"largeCandlestickBox",shape:{},buildPath:function(i,n){for(var u=n.points,g=0;g<u.length;)if(this.__sign===u[g++]){var d=u[g++];i.moveTo(d,u[g++]),i.lineTo(d,u[g++])}else g+=3}});function c(i,n,u){var g=i.getData(),d=g.getLayout("largePoints"),y=new s({shape:{points:d},__sign:1});n.add(y);var p=new s({shape:{points:d},__sign:-1});n.add(p),x(1,y,i,g),x(-1,p,i,g),u&&(y.incremental=!0,p.incremental=!0)}function x(i,n,u,g){var d=i>0?"P":"N",y=g.getVisual("borderColor"+d)||g.getVisual("color"+d),p=u.getModel(T).getItemStyle(f);n.useStyle(p),n.style.fill=null,n.style.stroke=y}var a=v;X.exports=a},869904:function(X,z,e){var E=e(248070),F=E.subPixelOptimize,O=e(250629),M=e(748354),b=M.parsePercent,L=e(131879),T=L.retrieve2,C=typeof Float32Array<"u"?Float32Array:Array,f={seriesType:"candlestick",plan:O(),reset:function(o){var h=o.coordinateSystem,l=o.getData(),r=m(o,l),s=0,c=1,x=["x","y"],a=l.mapDimension(x[s]),i=l.mapDimension(x[c],!0),n=i[0],u=i[1],g=i[2],d=i[3];if(l.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),a==null||i.length<4)return;return{progress:o.pipelineContext.large?p:y};function y(w,S){for(var R;(R=w.next())!=null;){var B=S.get(a,R),k=S.get(n,R),P=S.get(u,R),D=S.get(g,R),A=S.get(d,R),N=Math.min(k,P),I=Math.max(k,P),G=V(N,B),W=V(I,B),Z=V(D,B),H=V(A,B),U=[];Y(U,W,0),Y(U,G,1),U.push(K(H),K(W),K(Z),K(G)),S.setItemLayout(R,{sign:v(S,R,k,P,u),initBaseline:k>P?W[c]:G[c],ends:U,brushRect:$(D,A,B)})}function V(J,Q){var et=[];return et[s]=Q,et[c]=J,isNaN(Q)||isNaN(J)?[NaN,NaN]:h.dataToPoint(et)}function Y(J,Q,et){var nt=Q.slice(),st=Q.slice();nt[s]=F(nt[s]+r/2,1,!1),st[s]=F(st[s]-r/2,1,!0),et?J.push(nt,st):J.push(st,nt)}function $(J,Q,et){var nt=V(J,et),st=V(Q,et);return nt[s]-=r/2,st[s]-=r/2,{x:nt[0],y:nt[1],width:c?r:st[0]-nt[0],height:c?st[1]-nt[1]:r}}function K(J){return J[s]=F(J[s],1),J}}function p(w,S){for(var R=new C(w.count*4),B=0,k,P=[],D=[],A;(A=w.next())!=null;){var N=S.get(a,A),I=S.get(n,A),G=S.get(u,A),W=S.get(g,A),Z=S.get(d,A);if(isNaN(N)||isNaN(W)||isNaN(Z)){R[B++]=NaN,B+=3;continue}R[B++]=v(S,A,I,G,u),P[s]=N,P[c]=W,k=h.dataToPoint(P,null,D),R[B++]=k?k[0]:NaN,R[B++]=k?k[1]:NaN,P[c]=Z,k=h.dataToPoint(P,null,D),R[B++]=k?k[1]:NaN}S.setLayout("largePoints",R)}}};function v(o,h,l,r,s){var c;return l>r?c=-1:l<r?c=1:c=h>0?o.get(s,h-1)<=r?1:-1:1,c}function m(o,h){var l=o.getBaseAxis(),r,s=l.type==="category"?l.getBandWidth():(r=l.getExtent(),Math.abs(r[1]-r[0])/h.count()),c=b(T(o.get("barMaxWidth"),s),s),x=b(T(o.get("barMinWidth"),1),s),a=o.get("barWidth");return a!=null?b(a,s):Math.max(Math.min(s/2,c),x)}X.exports=f},261341:function(X,z,e){var E=e(250629),F=["itemStyle","borderColor"],O=["itemStyle","borderColor0"],M=["itemStyle","color"],b=["itemStyle","color0"],L={seriesType:"candlestick",plan:E(),performRawSeries:!0,reset:function(T,C){var f=T.getData();if(f.setVisual({legendSymbol:"roundRect",colorP:o(1,T),colorN:o(-1,T),borderColorP:h(1,T),borderColorN:h(-1,T)}),C.isSeriesFiltered(T))return;var v=T.pipelineContext.large;return!v&&{progress:m};function m(l,r){for(var s;(s=l.next())!=null;){var c=r.getItemModel(s),x=r.getItemLayout(s).sign;r.setItemVisual(s,{color:o(x,c),borderColor:h(x,c)})}}function o(l,r){return r.get(l>0?M:b)}function h(l,r){return r.get(l>0?F:O)}}};X.exports=L},754134:function(X,z,e){var E=e(131879);function F(O){!O||!E.isArray(O.series)||E.each(O.series,function(M){E.isObject(M)&&M.type==="k"&&(M.type="candlestick")})}X.exports=F},778029:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(248070),b=e(303768),L=b.getDefaultLabel,T=e(901664),C=e(919641),f=C.getLayoutOnAxis,v=e(865453),m=e(502365),o=e(56785),h=e(901911),l=e(629686),r=l.createClipPath,s=e(73684),c=e(222782),x=e(76966),a=e(694914),i=e(870535),n=M.CACHED_LABEL_STYLE_PROPERTIES,u=["itemStyle"],g=["emphasis","itemStyle"],d=["label"],y=["emphasis","label"],p="e\0\0",w={cartesian2d:s,geo:c,singleAxis:x,polar:a,calendar:i};m.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(K,J){return T(this.getSource(),this)},getDataParams:function(K,J,Q){var et=m.prototype.getDataParams.apply(this,arguments);return Q&&(et.info=Q.info),et}}),h.extend({type:"custom",_data:null,render:function(K,J,Q,et){var nt=this._data,st=K.getData(),ut=this.group,rt=k(K,st,J,Q);st.diff(nt).add(function(Pt){D(null,Pt,rt(Pt,et),K,ut,st)}).update(function(Pt,wt){var Mt=nt.getItemGraphicEl(wt);D(Mt,Pt,rt(Pt,et),K,ut,st)}).remove(function(Pt){var wt=nt.getItemGraphicEl(Pt);wt&&ut.remove(wt)}).execute();var ht=K.get("clip",!0)?r(K.coordinateSystem,!1,K):null;ht?ut.setClipPath(ht):ut.removeClipPath(),this._data=st},incrementalPrepareRender:function(K,J,Q){this.group.removeAll(),this._data=null},incrementalRender:function(K,J,Q,et,nt){var st=J.getData(),ut=k(J,st,Q,et);function rt(wt){wt.isGroup||(wt.incremental=!0,wt.useHoverLayer=!0)}for(var ht=K.start;ht<K.end;ht++){var Pt=D(null,ht,ut(ht,nt),J,this.group,st);Pt.traverse(rt)}},dispose:O.noop,filterForExposedEvent:function(K,J,Q,et){var nt=J.element;if(nt==null||Q.name===nt)return!0;for(;(Q=Q.parent)&&Q!==this.group;)if(Q.name===nt)return!0;return!1}});function S(K){var J=K.type,Q;if(J==="path"){var et=K.shape,nt=et.width!=null&&et.height!=null?{x:et.x||0,y:et.y||0,width:et.width,height:et.height}:null,st=V(et);Q=M.makePath(st,null,nt,et.layout||"center"),Q.__customPathData=st}else if(J==="image")Q=new M.Image({}),Q.__customImagePath=K.style.image;else if(J==="text")Q=new M.Text({}),Q.__customText=K.style.text;else if(J==="group")Q=new M.Group;else{if(J==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var ut=M.getShapeClass(J);Q=new ut}return Q.__customGraphicType=J,Q.name=K.name,Q}function R(K,J,Q,et,nt,st,ut){var rt={},ht=Q.style||{};if(Q.shape&&(rt.shape=O.clone(Q.shape)),Q.position&&(rt.position=Q.position.slice()),Q.scale&&(rt.scale=Q.scale.slice()),Q.origin&&(rt.origin=Q.origin.slice()),Q.rotation&&(rt.rotation=Q.rotation),K.type==="image"&&Q.style){var Pt=rt.style={};O.each(["x","y","width","height"],function(Ft){B(Ft,Pt,ht,K.style,st)})}if(K.type==="text"&&Q.style){var Pt=rt.style={};O.each(["x","y"],function(Dt){B(Dt,Pt,ht,K.style,st)}),!ht.hasOwnProperty("textFill")&&ht.fill&&(ht.textFill=ht.fill),!ht.hasOwnProperty("textStroke")&&ht.stroke&&(ht.textStroke=ht.stroke)}if(K.type!=="group"&&(K.useStyle(ht),st)){K.style.opacity=0;var wt=ht.opacity;wt==null&&(wt=1),M.initProps(K,{style:{opacity:wt}},et,J)}st?K.attr(rt):M.updateProps(K,rt,et,J),Q.hasOwnProperty("z2")&&K.attr("z2",Q.z2||0),Q.hasOwnProperty("silent")&&K.attr("silent",Q.silent),Q.hasOwnProperty("invisible")&&K.attr("invisible",Q.invisible),Q.hasOwnProperty("ignore")&&K.attr("ignore",Q.ignore),Q.hasOwnProperty("info")&&K.attr("info",Q.info);var Mt=Q.styleEmphasis;M.setElementHoverStyle(K,Mt),ut&&M.setAsHighDownDispatcher(K,Mt!==!1)}function B(K,J,Q,et,nt){Q[K]!=null&&!nt&&(J[K]=Q[K],Q[K]=et[K])}function k(K,J,Q,et){var nt=K.get("renderItem"),st=K.coordinateSystem,ut={};st&&(ut=st.prepareCustoms?st.prepareCustoms():w[st.type](st));var rt=O.defaults({getWidth:et.getWidth,getHeight:et.getHeight,getZr:et.getZr,getDevicePixelRatio:et.getDevicePixelRatio,value:mt,style:Nt,styleEmphasis:ct,visual:vt,barLayout:Lt,currentSeriesIndices:Ct,font:jt},ut.api||{}),ht={context:{},seriesId:K.id,seriesName:K.name,seriesIndex:K.seriesIndex,coordSys:ut.coordSys,dataInsideLength:J.count(),encode:P(K.getData())},Pt,wt=!0,Mt,Ft,Dt,Rt;return function(zt,Yt){return Pt=zt,wt=!0,nt&&nt(O.defaults({dataIndexInside:zt,dataIndex:J.getRawIndex(zt),actionType:Yt?Yt.type:null},ht),rt)};function Tt(zt){zt==null&&(zt=Pt),wt&&(Mt=J.getItemModel(zt),Ft=Mt.getModel(d),Dt=Mt.getModel(y),Rt=J.getItemVisual(zt,"color"),wt=!1)}function mt(zt,Yt){return Yt==null&&(Yt=Pt),J.get(J.getDimension(zt||0),Yt)}function Nt(zt,Yt){Yt==null&&(Yt=Pt),Tt(Yt);var Zt=Mt.getModel(u).getItemStyle();Rt!=null&&(Zt.fill=Rt);var ft=J.getItemVisual(Yt,"opacity");ft!=null&&(Zt.opacity=ft);var gt=zt?Z(zt,Ft):Ft;return M.setTextStyle(Zt,gt,null,{autoColor:Rt,isRectText:!0}),Zt.text=gt.getShallow("show")?O.retrieve2(K.getFormattedLabel(Yt,"normal"),L(J,Yt)):null,zt&&H(Zt,zt),Zt}function ct(zt,Yt){Yt==null&&(Yt=Pt),Tt(Yt);var Zt=Mt.getModel(g).getItemStyle(),ft=zt?Z(zt,Dt):Dt;return M.setTextStyle(Zt,ft,null,{isRectText:!0},!0),Zt.text=ft.getShallow("show")?O.retrieve3(K.getFormattedLabel(Yt,"emphasis"),K.getFormattedLabel(Yt,"normal"),L(J,Yt)):null,zt&&H(Zt,zt),Zt}function vt(zt,Yt){return Yt==null&&(Yt=Pt),J.getItemVisual(Yt,zt)}function Lt(zt){if(st.getBaseAxis){var Yt=st.getBaseAxis();return f(O.defaults({axis:Yt},zt),et)}}function Ct(){return Q.getCurrentSeriesIndices()}function jt(zt){return M.getFont(zt,Q)}}function P(K){var J={};return O.each(K.dimensions,function(Q,et){var nt=K.getDimensionInfo(Q);if(!nt.isExtraCoord){var st=nt.coordDim,ut=J[st]=J[st]||[];ut[nt.coordDimIndex]=et}}),J}function D(K,J,Q,et,nt,st){return K=A(K,J,Q,et,nt,st,!0),K&&st.setItemGraphicEl(J,K),K}function A(K,J,Q,et,nt,st,ut){var rt=!Q;Q=Q||{};var ht=Q.type,Pt=Q.shape,wt=Q.style;if(K&&(rt||ht!=null&&ht!==K.__customGraphicType||ht==="path"&&Y(Pt)&&V(Pt)!==K.__customPathData||ht==="image"&&$(wt,"image")&&wt.image!==K.__customImagePath||ht==="text"&&$(Pt,"text")&&wt.text!==K.__customText)&&(nt.remove(K),K=null),!rt){var Mt=!K;return!K&&(K=S(Q)),R(K,J,Q,et,st,Mt,ut),ht==="group"&&N(K,J,Q,et,st),nt.add(K),K}}function N(K,J,Q,et,nt){var st=Q.children,ut=st?st.length:0,rt=Q.$mergeChildren,ht=rt==="byName"||Q.diffChildrenByName,Pt=rt===!1;if(!(!ut&&!ht&&!Pt)){if(ht){I({oldChildren:K.children()||[],newChildren:st||[],dataIndex:J,animatableModel:et,group:K,data:nt});return}Pt&&K.removeAll();for(var wt=0;wt<ut;wt++)st[wt]&&A(K.childAt(wt),J,st[wt],et,K,nt)}}function I(K){new v(K.oldChildren,K.newChildren,G,G,K).add(W).update(W).remove(U).execute()}function G(K,J){var Q=K&&K.name;return Q??p+J}function W(K,J){var Q=this.context,et=K!=null?Q.newChildren[K]:null,nt=J!=null?Q.oldChildren[J]:null;A(nt,Q.dataIndex,et,Q.animatableModel,Q.group,Q.data)}function Z(K,J){var Q=new o({},J);return O.each(n,function(et,nt){K.hasOwnProperty(et)&&(Q.option[nt]=K[et])}),Q}function H(K,J){for(var Q in J)(J.hasOwnProperty(Q)||!n.hasOwnProperty(Q))&&(K[Q]=J[Q])}function U(K){var J=this.context,Q=J.oldChildren[K];Q&&J.group.remove(Q)}function V(K){return K&&(K.pathData||K.d)}function Y(K){return K&&(K.hasOwnProperty("pathData")||K.hasOwnProperty("d"))}function $(K,J){return K&&K.hasOwnProperty(J)}},963914:function(X,z,e){var E=e(3440);e(110178),e(413367);var F=e(341124),O=e(275028);E.registerVisual(F("effectScatter","circle")),E.registerLayout(O("effectScatter"))},110178:function(X,z,e){var E=e(901664),F=e(502365),O=F.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(M,b){return E(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});X.exports=O},413367:function(X,z,e){var E=e(3440),F=e(151724),O=e(279138),M=e(343970),b=e(275028),L=E.extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new F(O)},render:function(T,C,f){var v=T.getData(),m=this._symbolDraw;m.updateData(v),this.group.add(m.group)},updateTransform:function(T,C,f){var v=T.getData();this.group.dirty();var m=b().reset(T);m.progress&&m.progress({start:0,end:v.count()},v),this._symbolDraw.updateLayout(v)},_updateGroupTransform:function(T){var C=T.coordinateSystem;C&&C.getRoamTransform&&(this.group.transform=M.clone(C.getRoamTransform()),this.group.decomposeTransform())},remove:function(T,C){this._symbolDraw&&this._symbolDraw.remove(C)},dispose:function(){}});X.exports=L},432958:function(X,z,e){var E=e(3440);e(307139),e(764048);var F=e(31310),O=e(369818),M=e(861614);E.registerVisual(F("funnel")),E.registerLayout(O),E.registerProcessor(M("funnel"))},307139:function(X,z,e){var E=e(3440),F=e(131879),O=e(642347),M=e(835454),b=M.defaultEmphasis,L=e(543036),T=L.makeSeriesEncodeForNameBased,C=e(389960),f=E.extendSeriesModel({type:"series.funnel",init:function(m){f.superApply(this,"init",arguments),this.legendVisualProvider=new C(F.bind(this.getData,this),F.bind(this.getRawData,this)),this._defaultLabelLine(m)},getInitialData:function(m,o){return O(this,{coordDimensions:["value"],encodeDefaulter:F.curry(T,this)})},_defaultLabelLine:function(m){b(m,"labelLine",["show"]);var o=m.labelLine,h=m.emphasis.labelLine;o.show=o.show&&m.label.show,h.show=h.show&&m.emphasis.label.show},getDataParams:function(m){var o=this.getData(),h=f.superCall(this,"getDataParams",m),l=o.mapDimension("value"),r=o.getSum(l);return h.percent=r?+(o.get(l,m)/r*100).toFixed(2):0,h.$vars.push("percent"),h},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}),v=f;X.exports=v},764048:function(X,z,e){var E=e(248070),F=e(131879),O=e(901911);function M(f,v){E.Group.call(this);var m=new E.Polygon,o=new E.Polyline,h=new E.Text;this.add(m),this.add(o),this.add(h),this.highDownOnUpdate=function(l,r){r==="emphasis"?(o.ignore=o.hoverIgnore,h.ignore=h.hoverIgnore):(o.ignore=o.normalIgnore,h.ignore=h.normalIgnore)},this.updateData(f,v,!0)}var b=M.prototype,L=["itemStyle","opacity"];b.updateData=function(f,v,m){var o=this.childAt(0),h=f.hostModel,l=f.getItemModel(v),r=f.getItemLayout(v),s=f.getItemModel(v).get(L);s=s??1,o.useStyle({}),m?(o.setShape({points:r.points}),o.setStyle({opacity:0}),E.initProps(o,{style:{opacity:s}},h,v)):E.updateProps(o,{style:{opacity:s},shape:{points:r.points}},h,v);var c=l.getModel("itemStyle"),x=f.getItemVisual(v,"color");o.setStyle(F.defaults({lineJoin:"round",fill:x},c.getItemStyle(["opacity"]))),o.hoverStyle=c.getModel("emphasis").getItemStyle(),this._updateLabel(f,v),E.setHoverStyle(this)},b._updateLabel=function(f,v){var m=this.childAt(1),o=this.childAt(2),h=f.hostModel,l=f.getItemModel(v),r=f.getItemLayout(v),s=r.label,n=f.getItemVisual(v,"color");E.updateProps(m,{shape:{points:s.linePoints||s.linePoints}},h,v),E.updateProps(o,{style:{x:s.x,y:s.y}},h,v),o.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var c=l.getModel("label"),x=l.getModel("emphasis.label"),a=l.getModel("labelLine"),i=l.getModel("emphasis.labelLine"),n=f.getItemVisual(v,"color");E.setLabelStyle(o.style,o.hoverStyle={},c,x,{labelFetcher:f.hostModel,labelDataIndex:v,defaultText:f.getName(v),autoColor:n,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign}),o.ignore=o.normalIgnore=!c.get("show"),o.hoverIgnore=!x.get("show"),m.ignore=m.normalIgnore=!a.get("show"),m.hoverIgnore=!i.get("show"),m.setStyle({stroke:n}),m.setStyle(a.getModel("lineStyle").getLineStyle()),m.hoverStyle=i.getModel("lineStyle").getLineStyle()},F.inherits(M,E.Group);var T=O.extend({type:"funnel",render:function(f,v,m){var o=f.getData(),h=this._data,l=this.group;o.diff(h).add(function(r){var s=new M(o,r);o.setItemGraphicEl(r,s),l.add(s)}).update(function(r,s){var c=h.getItemGraphicEl(s);c.updateData(o,r),l.add(c),o.setItemGraphicEl(r,c)}).remove(function(r){var s=h.getItemGraphicEl(r);l.remove(s)}).execute(),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),C=T;X.exports=C},369818:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(930871),M=e(748354),b=M.parsePercent,L=M.linearMap;function T(m,o){return O.getLayoutRect(m.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function C(m,o){for(var h=m.mapDimension("value"),l=m.mapArray(h,function(a){return a}),r=[],s=o==="ascending",c=0,x=m.count();c<x;c++)r[c]=c;return typeof o=="function"?r.sort(o):o!=="none"&&r.sort(function(a,i){return s?l[a]-l[i]:l[i]-l[a]}),r}function f(m){m.each(function(o){var h=m.getItemModel(o),l=h.getModel("label"),r=l.get("position"),s=h.get("orient"),c=h.getModel("labelLine"),x=m.getItemLayout(o),a=x.points,i=r==="inner"||r==="inside"||r==="center"||r==="insideLeft"||r==="insideRight",n,u,g,d;if(i)r==="insideLeft"?(u=(a[0][0]+a[3][0])/2+5,g=(a[0][1]+a[3][1])/2,n="left"):r==="insideRight"?(u=(a[1][0]+a[2][0])/2-5,g=(a[1][1]+a[2][1])/2,n="right"):(u=(a[0][0]+a[1][0]+a[2][0]+a[3][0])/4,g=(a[0][1]+a[1][1]+a[2][1]+a[3][1])/4,n="center"),d=[[u,g],[u,g]];else{var y,p,w,S,R=c.get("length");r==="left"?(y=(a[3][0]+a[0][0])/2,p=(a[3][1]+a[0][1])/2,w=y-R,u=w-5,n="right"):r==="right"?(y=(a[1][0]+a[2][0])/2,p=(a[1][1]+a[2][1])/2,w=y+R,u=w+5,n="left"):r==="top"?(y=(a[3][0]+a[0][0])/2,p=(a[3][1]+a[0][1])/2,S=p-R,g=S-5,n="center"):r==="bottom"?(y=(a[1][0]+a[2][0])/2,p=(a[1][1]+a[2][1])/2,S=p+R,g=S+5,n="center"):r==="rightTop"?(y=s==="horizontal"?a[3][0]:a[1][0],p=s==="horizontal"?a[3][1]:a[1][1],s==="horizontal"?(S=p-R,g=S-5,n="center"):(w=y+R,u=w+5,n="top")):r==="rightBottom"?(y=a[2][0],p=a[2][1],s==="horizontal"?(S=p+R,g=S+5,n="center"):(w=y+R,u=w+5,n="bottom")):r==="leftTop"?(y=a[0][0],p=s==="horizontal"?a[0][1]:a[1][1],s==="horizontal"?(S=p-R,g=S-5,n="center"):(w=y-R,u=w-5,n="right")):r==="leftBottom"?(y=s==="horizontal"?a[1][0]:a[3][0],p=s==="horizontal"?a[1][1]:a[2][1],s==="horizontal"?(S=p+R,g=S+5,n="center"):(w=y-R,u=w-5,n="right")):(y=(a[1][0]+a[2][0])/2,p=(a[1][1]+a[2][1])/2,s==="horizontal"?(S=p+R,g=S+5,n="center"):(w=y+R,u=w+5,n="left")),s==="horizontal"?(w=y,u=w):(S=p,g=S),d=[[y,p],[w,S]]}x.label={linePoints:d,x:u,y:g,verticalAlign:"middle",textAlign:n,inside:i}})}function v(m,o,h){m.eachSeriesByType("funnel",function(l){var r=l.getData(),s=r.mapDimension("value"),c=l.get("sort"),x=T(l,o),a=C(r,c),i=l.get("orient"),n=x.width,u=x.height,g=x.x,d=x.y,y=i==="horizontal"?[b(l.get("minSize"),u),b(l.get("maxSize"),u)]:[b(l.get("minSize"),n),b(l.get("maxSize"),n)],p=r.getDataExtent(s),w=l.get("min"),S=l.get("max");w==null&&(w=Math.min(p[0],0)),S==null&&(S=p[1]);var R=l.get("funnelAlign"),B=l.get("gap"),k=i==="horizontal"?n:u,P=(k-B*(r.count()-1))/r.count(),D=function(V,Y){if(i==="horizontal"){var J=r.get(s,V)||0,$=L(J,[w,S],y,!0),K;switch(R){case"top":K=d;break;case"center":K=d+(u-$)/2;break;case"bottom":K=d+(u-$);break}return[[Y,K],[Y,K+$]]}var J=r.get(s,V)||0,Q=L(J,[w,S],y,!0),et;switch(R){case"left":et=g;break;case"center":et=g+(n-Q)/2;break;case"right":et=g+n-Q;break}return[[et,Y],[et+Q,Y]]};c==="ascending"&&(P=-P,B=-B,i==="horizontal"?g+=n:d+=u,a=a.reverse());for(var A=0;A<a.length;A++){var N=a[A],I=a[A+1],G=r.getItemModel(N);if(i==="horizontal"){var W=G.get("itemStyle.width");W==null?W=P:(W=b(W,n),c==="ascending"&&(W=-W));var Z=D(N,g),H=D(I,g+W);g+=W+B,r.setItemLayout(N,{points:Z.concat(H.slice().reverse())})}else{var U=G.get("itemStyle.height");U==null?U=P:(U=b(U,u),c==="ascending"&&(U=-U));var Z=i==="horizontal"?D(N,g):D(N,d),H=i==="horizontal"?D(I,g+W):D(I,d+U);d+=U+B,r.setItemLayout(N,{points:Z.concat(H.slice().reverse())})}}f(r)})}X.exports=v},931433:function(X,z,e){e(583252),e(591122)},583252:function(X,z,e){var E=e(642347),F=e(502365),O=F.extend({type:"series.gauge",getInitialData:function(b,L){return E(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}}),M=O;X.exports=M},591122:function(X,z,e){var E=e(153280),F=e(248070),O=e(901911),M=e(748354),b=M.parsePercent,L=M.round,T=M.linearMap;function C(h,l){var r=h.get("center"),s=l.getWidth(),c=l.getHeight(),x=Math.min(s,c),a=b(r[0],l.getWidth()),i=b(r[1],l.getHeight()),n=b(h.get("radius"),x/2);return{cx:a,cy:i,r:n}}function f(h,l){return l&&(typeof l=="string"?h=l.replace("{value}",h??""):typeof l=="function"&&(h=l(h))),h}var v=Math.PI*2,m=O.extend({type:"gauge",render:function(h,l,r){this.group.removeAll();var s=h.get("axisLine.lineStyle.color"),c=C(h,r);this._renderMain(h,l,r,s,c)},dispose:function(){},_renderMain:function(h,l,r,s,c){for(var x=this.group,a=h.getModel("axisLine"),i=a.getModel("lineStyle"),n=h.get("clockwise"),u=-h.get("startAngle")/180*Math.PI,g=-h.get("endAngle")/180*Math.PI,d=(g-u)%v,y=u,p=i.get("width"),w=a.get("show"),S=0;w&&S<s.length;S++){var R=Math.min(Math.max(s[S][0],0),1),g=u+d*R,B=new F.Sector({shape:{startAngle:y,endAngle:g,cx:c.cx,cy:c.cy,clockwise:n,r0:c.r-p,r:c.r},silent:!0});B.setStyle({fill:s[S][1]}),B.setStyle(i.getLineStyle(["color","borderWidth","borderColor"])),x.add(B),y=g}var k=function(D){if(D<=0)return s[0][1];for(var A=0;A<s.length;A++)if(s[A][0]>=D&&(A===0?0:s[A-1][0])<D)return s[A][1];return s[A-1][1]};if(!n){var P=u;u=g,g=P}this._renderTicks(h,l,r,k,c,u,g,n),this._renderPointer(h,l,r,k,c,u,g,n),this._renderTitle(h,l,r,k,c),this._renderDetail(h,l,r,k,c)},_renderTicks:function(h,l,r,s,c,x,a,i){for(var n=this.group,u=c.cx,g=c.cy,d=c.r,y=+h.get("min"),p=+h.get("max"),w=h.getModel("splitLine"),S=h.getModel("axisTick"),R=h.getModel("axisLabel"),B=h.get("splitNumber"),k=S.get("splitNumber"),P=b(w.get("length"),d),D=b(S.get("length"),d),A=x,N=(a-x)/B,I=N/k,G=w.getModel("lineStyle").getLineStyle(),W=S.getModel("lineStyle").getLineStyle(),Z=0;Z<=B;Z++){var H=Math.cos(A),U=Math.sin(A);if(w.get("show")){var V=new F.Line({shape:{x1:H*d+u,y1:U*d+g,x2:H*(d-P)+u,y2:U*(d-P)+g},style:G,silent:!0});G.stroke==="auto"&&V.setStyle({stroke:s(Z/B)}),n.add(V)}if(R.get("show")){var Y=f(L(Z/B*(p-y)+y),R.get("formatter")),$=R.get("distance"),K=s(Z/B);n.add(new F.Text({style:F.setTextStyle({},R,{text:Y,x:H*(d-P-$)+u,y:U*(d-P-$)+g,textVerticalAlign:U<-.4?"top":U>.4?"bottom":"middle",textAlign:H<-.4?"left":H>.4?"right":"center"},{autoColor:K}),silent:!0}))}if(S.get("show")&&Z!==B){for(var J=0;J<=k;J++){var H=Math.cos(A),U=Math.sin(A),Q=new F.Line({shape:{x1:H*d+u,y1:U*d+g,x2:H*(d-D)+u,y2:U*(d-D)+g},silent:!0,style:W});W.stroke==="auto"&&Q.setStyle({stroke:s((Z+J/k)/B)}),n.add(Q),A+=I}A-=I}else A+=N}},_renderPointer:function(h,l,r,s,c,x,a,i){var n=this.group,u=this._data;if(!h.get("pointer.show")){u&&u.eachItemGraphicEl(function(w){n.remove(w)});return}var g=[+h.get("min"),+h.get("max")],d=[x,a],y=h.getData(),p=y.mapDimension("value");y.diff(u).add(function(w){var S=new E({shape:{angle:x}});F.initProps(S,{shape:{angle:T(y.get(p,w),g,d,!0)}},h),n.add(S),y.setItemGraphicEl(w,S)}).update(function(w,S){var R=u.getItemGraphicEl(S);F.updateProps(R,{shape:{angle:T(y.get(p,w),g,d,!0)}},h),n.add(R),y.setItemGraphicEl(w,R)}).remove(function(w){var S=u.getItemGraphicEl(w);n.remove(S)}).execute(),y.eachItemGraphicEl(function(w,S){var R=y.getItemModel(S),B=R.getModel("pointer");w.setShape({x:c.cx,y:c.cy,width:b(B.get("width"),c.r),r:b(B.get("length"),c.r)}),w.useStyle(R.getModel("itemStyle").getItemStyle()),w.style.fill==="auto"&&w.setStyle("fill",s(T(y.get(p,S),g,[0,1],!0))),F.setHoverStyle(w,R.getModel("emphasis.itemStyle").getItemStyle())}),this._data=y},_renderTitle:function(h,l,r,s,c){var x=h.getData(),a=x.mapDimension("value"),i=h.getModel("title");if(i.get("show")){var n=i.get("offsetCenter"),u=c.cx+b(n[0],c.r),g=c.cy+b(n[1],c.r),d=+h.get("min"),y=+h.get("max"),p=h.getData().get(a,0),w=s(T(p,[d,y],[0,1],!0));this.group.add(new F.Text({silent:!0,style:F.setTextStyle({},i,{x:u,y:g,text:x.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:w,forceRich:!0})}))}},_renderDetail:function(h,l,r,s,c){var x=h.getModel("detail"),a=+h.get("min"),i=+h.get("max");if(x.get("show")){var n=x.get("offsetCenter"),u=c.cx+b(n[0],c.r),g=c.cy+b(n[1],c.r),d=b(x.get("width"),c.r),y=b(x.get("height"),c.r),p=h.getData(),w=p.get(p.mapDimension("value"),0),S=s(T(w,[a,i],[0,1],!0));this.group.add(new F.Text({silent:!0,style:F.setTextStyle({},x,{x:u,y:g,text:f(w,x.get("formatter")),textWidth:isNaN(d)?null:d,textHeight:isNaN(y)?null:y,textAlign:"center",textVerticalAlign:"middle"},{autoColor:S,forceRich:!0})}))}}}),o=m;X.exports=o},153280:function(X,z,e){var E=e(254904),F=E.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(O,M){var b=Math.cos,L=Math.sin,T=M.r,C=M.width,f=M.angle,v=M.x-b(f)*C*(C>=T/3?1:2),m=M.y-L(f)*C*(C>=T/3?1:2);f=M.angle-Math.PI/2,O.moveTo(v,m),O.lineTo(M.x+b(f)*C,M.y+L(f)*C),O.lineTo(M.x+b(M.angle)*T,M.y+L(M.angle)*T),O.lineTo(M.x-b(f)*C,M.y-L(f)*C),O.lineTo(v,m)}});X.exports=F},255921:function(X,z,e){var E=e(3440);e(793015),e(327219),e(595075);var F=e(321302),O=e(341124),M=e(697306),b=e(748063),L=e(135493),T=e(495313),C=e(420798),f=e(215453);E.registerProcessor(F),E.registerVisual(O("graph","circle",null)),E.registerVisual(M),E.registerVisual(b),E.registerLayout(L),E.registerLayout(E.PRIORITY.VISUAL.POST_CHART_LAYOUT,T),E.registerLayout(C),E.registerCoordinateSystem("graphView",{create:f})},793015:function(X,z,e){var E=e(3440),F=e(58677),O=e(131879),M=e(835454),b=M.defaultEmphasis,L=e(56785),T=e(317795),C=T.encodeHTML,f=e(631323),v=e(389960),m=e(737498),o=m.initCurvenessList,h=m.createEdgeMapForCurveness,l=E.extendSeriesModel({type:"series.graph",init:function(s){l.superApply(this,"init",arguments);var c=this;function x(){return c._categoriesData}this.legendVisualProvider=new v(x,x),this.fillDataTextStyle(s.edges||s.links),this._updateCategoriesData()},mergeOption:function(s){l.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(s.edges||s.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(s){l.superApply(this,"mergeDefaultAndTheme",arguments),b(s,["edgeLabel"],["show"])},getInitialData:function(s,c){var x=s.edges||s.links||[],a=s.data||s.nodes||[],i=this;if(a&&x){o(this);var n=f(a,x,this,!0,u);return O.each(n.edges,function(g){h(g.node1,g.node2,this,g.dataIndex)},this),n.data}function u(g,d){g.wrapMethod("getItemModel",function(B){var k=i._categoriesModels,P=B.getShallow("category"),D=k[P];return D&&(D.parentModel=B.parentModel,B.parentModel=D),B});var y=i.getModel("edgeLabel"),p=new L({label:y.option},y.parentModel,c),w=i.getModel("emphasis.edgeLabel"),S=new L({emphasis:{label:w.option}},w.parentModel,c);d.wrapMethod("getItemModel",function(B){return B.customizeGetParent(R),B});function R(B){return B=this.parsePath(B),B&&B[0]==="label"?p:B&&B[0]==="emphasis"&&B[1]==="label"?S:this.parentModel}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(s,c,x){if(x==="edge"){var a=this.getData(),i=this.getDataParams(s,x),n=a.graph.getEdgeByIndex(s),u=a.getName(n.node1.dataIndex),g=a.getName(n.node2.dataIndex),d=[];return u!=null&&d.push(u),g!=null&&d.push(g),d=C(d.join(" > ")),i.value&&(d+=" : "+C(i.value)),d}else return l.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var s=O.map(this.option.categories||[],function(x){return x.value!=null?x:O.extend({value:0},x)}),c=new F(["value"],this);c.initData(s),this._categoriesData=c,this._categoriesModels=c.mapArray(function(x){return c.getItemModel(x,!0)})},setZoom:function(s){this.option.zoom=s},setCenter:function(s){this.option.center=s},isAnimationEnabled:function(){return l.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),r=l;X.exports=r},327219:function(X,z,e){var E=e(3440),F=e(131879),O=e(151724),M=e(89264),b=e(973672),L=e(895922),T=e(422997),C=T.onIrrelevantElement,f=e(248070),v=e(63323),m=e(425799),o=m.getNodeGlobalScale,h="__focusNodeAdjacency",l="__unfocusNodeAdjacency",r=["itemStyle","opacity"],s=["lineStyle","opacity"];function c(n,u){var g=n.getVisual("opacity");return g??n.getModel().get(u)}function x(n,u,g){var d=n.getGraphicEl(),y=c(n,u);g!=null&&(y==null&&(y=1),y*=g),d.downplay&&d.downplay(),d.traverse(function(p){if(!p.isGroup){var w=p.lineLabelOriginalOpacity;(w==null||g!=null)&&(w=y),p.setStyle("opacity",w)}})}function a(n,u){var g=c(n,u),d=n.getGraphicEl();d.traverse(function(y){!y.isGroup&&y.setStyle("opacity",g)}),d.highlight&&d.highlight()}var i=E.extendChartView({type:"graph",init:function(n,u){var g=new O,d=new M,y=this.group;this._controller=new b(u.getZr()),this._controllerHost={target:y},y.add(g.group),y.add(d.group),this._symbolDraw=g,this._lineDraw=d,this._firstRender=!0},render:function(n,u,g){var d=this,y=n.coordinateSystem;this._model=n;var p=this._symbolDraw,w=this._lineDraw,S=this.group;if(y.type==="view"){var R={position:y.position,scale:y.scale};this._firstRender?S.attr(R):f.updateProps(S,R,n)}v(n.getGraph(),o(n));var B=n.getData();p.updateData(B);var k=n.getEdgeData();w.updateData(k),this._updateNodeAndLinkScale(),this._updateController(n,u,g),clearTimeout(this._layoutTimeout);var P=n.forceLayout,D=n.get("force.layoutAnimation");P&&this._startForceLayoutIteration(P,D),B.eachItemGraphicEl(function(G,W){var Z=B.getItemModel(W);G.off("drag").off("dragend");var H=Z.get("draggable");H&&G.on("drag",function(){P&&(P.warmUp(),!this._layouting&&this._startForceLayoutIteration(P,D),P.setFixed(W),B.setItemLayout(W,G.position))},this).on("dragend",function(){P&&P.setUnfixed(W)},this),G.setDraggable(H&&P),G[h]&&G.off("mouseover",G[h]),G[l]&&G.off("mouseout",G[l]),Z.get("focusNodeAdjacency")&&(G.on("mouseover",G[h]=function(){d._clearTimer(),g.dispatchAction({type:"focusNodeAdjacency",seriesId:n.id,dataIndex:G.dataIndex})}),G.on("mouseout",G[l]=function(){d._dispatchUnfocus(g)}))},this),B.graph.eachEdge(function(G){var W=G.getGraphicEl();W[h]&&W.off("mouseover",W[h]),W[l]&&W.off("mouseout",W[l]),G.getModel().get("focusNodeAdjacency")&&(W.on("mouseover",W[h]=function(){d._clearTimer(),g.dispatchAction({type:"focusNodeAdjacency",seriesId:n.id,edgeDataIndex:G.dataIndex})}),W.on("mouseout",W[l]=function(){d._dispatchUnfocus(g)}))});var A=n.get("layout")==="circular"&&n.get("circular.rotateLabel"),N=B.getLayout("cx"),I=B.getLayout("cy");B.eachItemGraphicEl(function(G,W){var Z=B.getItemModel(W),H=Z.get("label.rotate")||0,U=G.getSymbolPath();if(A){var V=B.getItemLayout(W),Y=Math.atan2(V[1]-I,V[0]-N);Y<0&&(Y=Math.PI*2+Y);var $=V[0]<N;$&&(Y=Y-Math.PI);var K=$?"left":"right";f.modifyLabelStyle(U,{textRotation:-Y,textPosition:K,textOrigin:"center"},{textPosition:K})}else f.modifyLabelStyle(U,{textRotation:H*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(n,u){var g=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){g._unfocusDelayTimer=null,n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:g._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(n,u,g,d){var y=n.getData(),p=y.graph,w=d.dataIndex,S=d.edgeDataIndex,R=p.getNodeByIndex(w),B=p.getEdgeByIndex(S);!R&&!B||(p.eachNode(function(k){x(k,r,.1)}),p.eachEdge(function(k){x(k,s,.1)}),R&&(a(R,r),F.each(R.edges,function(k){k.dataIndex<0||(a(k,s),a(k.node1,r),a(k.node2,r))})),B&&(a(B,s),a(B.node1,r),a(B.node2,r)))},unfocusNodeAdjacency:function(n,u,g,d){var y=n.getData().graph;y.eachNode(function(p){x(p,r)}),y.eachEdge(function(p){x(p,s)})},_startForceLayoutIteration:function(n,u){var g=this;(function d(){n.step(function(y){g.updateLayout(g._model),(g._layouting=!y)&&(u?g._layoutTimeout=setTimeout(d,16):d())})})()},_updateController:function(n,u,g){var d=this._controller,y=this._controllerHost,p=this.group;if(d.setPointerChecker(function(w,S,R){var B=p.getBoundingRect();return B.applyTransform(p.transform),B.contain(S,R)&&!C(w,g,n)}),n.coordinateSystem.type!=="view"){d.disable();return}d.enable(n.get("roam")),y.zoomLimit=n.get("scaleLimit"),y.zoom=n.coordinateSystem.getZoom(),d.off("pan").off("zoom").on("pan",function(w){L.updateViewOnPan(y,w.dx,w.dy),g.dispatchAction({seriesId:n.id,type:"graphRoam",dx:w.dx,dy:w.dy})}).on("zoom",function(w){L.updateViewOnZoom(y,w.scale,w.originX,w.originY),g.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:w.scale,originX:w.originX,originY:w.originY}),this._updateNodeAndLinkScale(),v(n.getGraph(),o(n)),this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var n=this._model,u=n.getData(),g=o(n),d=[g,g];u.eachItemGraphicEl(function(y,p){y.attr("scale",d)})},updateLayout:function(n){v(n.getGraph(),o(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(n,u){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}});X.exports=i},63323:function(X,z,e){var E=e(890723),F=e(912072),O=e(425799),M=O.getSymbolSize,b=[],L=[],T=[],C=E.quadraticAt,f=F.distSquare,v=Math.abs;function m(h,l,r){for(var s=h[0],c=h[1],x=h[2],a=1/0,i,n=r*r,u=.1,g=.1;g<=.9;g+=.1){b[0]=C(s[0],c[0],x[0],g),b[1]=C(s[1],c[1],x[1],g);var d=v(f(b,l)-n);d<a&&(a=d,i=g)}for(var y=0;y<32;y++){var p=i+u;L[0]=C(s[0],c[0],x[0],i),L[1]=C(s[1],c[1],x[1],i),T[0]=C(s[0],c[0],x[0],p),T[1]=C(s[1],c[1],x[1],p);var d=f(L,l)-n;if(v(d)<.01)break;var w=f(T,l)-n;u/=2,d<0?w>=0?i=i+u:i=i-u:w>=0?i=i-u:i=i+u}return i}function o(h,l){var r=[],s=E.quadraticSubdivide,c=[[],[],[]],x=[[],[]],a=[];l/=2,h.eachEdge(function(i,n){var u=i.getLayout(),g=i.getVisual("fromSymbol"),d=i.getVisual("toSymbol");u.__original||(u.__original=[F.clone(u[0]),F.clone(u[1])],u[2]&&u.__original.push(F.clone(u[2])));var y=u.__original;if(u[2]!=null){if(F.copy(c[0],y[0]),F.copy(c[1],y[2]),F.copy(c[2],y[1]),g&&g!=="none"){var p=M(i.node1),w=m(c,y[0],p*l);s(c[0][0],c[1][0],c[2][0],w,r),c[0][0]=r[3],c[1][0]=r[4],s(c[0][1],c[1][1],c[2][1],w,r),c[0][1]=r[3],c[1][1]=r[4]}if(d&&d!=="none"){var p=M(i.node2),w=m(c,y[1],p*l);s(c[0][0],c[1][0],c[2][0],w,r),c[1][0]=r[1],c[2][0]=r[2],s(c[0][1],c[1][1],c[2][1],w,r),c[1][1]=r[1],c[2][1]=r[2]}F.copy(u[0],c[0]),F.copy(u[1],c[2]),F.copy(u[2],c[1])}else{if(F.copy(x[0],y[0]),F.copy(x[1],y[1]),F.sub(a,x[1],x[0]),F.normalize(a,a),g&&g!=="none"){var p=M(i.node1);F.scaleAndAdd(x[0],x[0],a,p*l)}if(d&&d!=="none"){var p=M(i.node2);F.scaleAndAdd(x[1],x[1],a,-p*l)}F.copy(u[0],x[0]),F.copy(u[1],x[1])}})}X.exports=o},321302:function(X){function z(e){var E=e.findComponents({mainType:"legend"});!E||!E.length||e.eachSeriesByType("graph",function(F){var O=F.getCategoriesData(),M=F.getGraph(),b=M.data,L=O.mapArray(O.getName);b.filterSelf(function(T){var C=b.getItemModel(T),f=C.getShallow("category");if(f!=null){typeof f=="number"&&(f=L[f]);for(var v=0;v<E.length;v++)if(!E[v].isSelected(f))return!1}return!0})},this)}X.exports=z},697306:function(X){function z(e){var E={};e.eachSeriesByType("graph",function(F){var O=F.getCategoriesData(),M=F.getData(),b={};O.each(function(L){var T=O.getName(L);b["ec-"+T]=L;var C=O.getItemModel(L),f=C.get("itemStyle.color")||F.getColorFromPalette(T,E);O.setItemVisual(L,"color",f);for(var v=["opacity","symbol","symbolSize","symbolKeepAspect"],m=0;m<v.length;m++){var o=C.getShallow(v[m],!0);o!=null&&O.setItemVisual(L,v[m],o)}}),O.count()&&M.each(function(L){var T=M.getItemModel(L),C=T.getShallow("category");if(C!=null){typeof C=="string"&&(C=b["ec-"+C]);for(var f=["color","opacity","symbol","symbolSize","symbolKeepAspect"],v=0;v<f.length;v++)M.getItemVisual(L,f[v],!0)==null&&M.setItemVisual(L,f[v],O.getItemVisual(C,f[v]))}})})}X.exports=z},495313:function(X,z,e){var E=e(861616),F=E.circularLayout;function O(M){M.eachSeriesByType("graph",function(b){b.get("layout")==="circular"&&F(b,"symbolSize")})}X.exports=O},861616:function(X,z,e){var E=e(912072),F=e(425799),O=F.getSymbolSize,M=F.getNodeGlobalScale,b=e(131879),L=e(737498),T=L.getCurvenessForEdge,C=Math.PI,f=[];function v(o,h){var l=o.coordinateSystem;if(!(l&&l.type!=="view")){var r=l.getBoundingRect(),s=o.getData(),c=s.graph,x=r.width/2+r.x,a=r.height/2+r.y,i=Math.min(r.width,r.height)/2,n=s.count();s.setLayout({cx:x,cy:a}),n&&(m[h](o,l,c,s,i,x,a,n),c.eachEdge(function(u,g){var d=b.retrieve3(u.getModel().get("lineStyle.curveness"),T(u,o,g),0),y=E.clone(u.node1.getLayout()),p=E.clone(u.node2.getLayout()),w,S=(y[0]+p[0])/2,R=(y[1]+p[1])/2;+d&&(d*=3,w=[x*d+S*(1-d),a*d+R*(1-d)]),u.setLayout([y,p,w])}))}}var m={value:function(o,h,l,r,s,c,x,a){var i=0,n=r.getSum("value"),u=Math.PI*2/(n||a);l.eachNode(function(g){var d=g.getValue("value"),y=u*(n?d:1)/2;i+=y,g.setLayout([s*Math.cos(i)+c,s*Math.sin(i)+x]),i+=y})},symbolSize:function(o,h,l,r,s,c,x,a){var i=0;f.length=a;var n=M(o);l.eachNode(function(d){var y=O(d);isNaN(y)&&(y=2),y<0&&(y=0),y*=n;var p=Math.asin(y/2/s);isNaN(p)&&(p=C/2),f[d.dataIndex]=p,i+=p*2});var u=(2*C-i)/a/2,g=0;l.eachNode(function(d){var y=u+f[d.dataIndex];g+=y,d.setLayout([s*Math.cos(g)+c,s*Math.sin(g)+x]),g+=y})}};z.circularLayout=v},215453:function(X,z,e){var E=e(665176),F=e(930871),O=F.getLayoutRect,M=e(18644);function b(T,C,f){var v=T.getBoxLayoutParams();return v.aspect=f,O(v,{width:C.getWidth(),height:C.getHeight()})}function L(T,C){var f=[];return T.eachSeriesByType("graph",function(v){var m=v.get("coordinateSystem");if(!m||m==="view"){var o=v.getData(),h=o.mapArray(function(g){var d=o.getItemModel(g);return[+d.get("x"),+d.get("y")]}),l=[],r=[];M.fromPoints(h,l,r),r[0]-l[0]===0&&(r[0]+=1,l[0]-=1),r[1]-l[1]===0&&(r[1]+=1,l[1]-=1);var s=(r[0]-l[0])/(r[1]-l[1]),c=b(v,C,s);isNaN(s)&&(l=[c.x,c.y],r=[c.x+c.width,c.y+c.height]);var x=r[0]-l[0],a=r[1]-l[1],i=c.width,n=c.height,u=v.coordinateSystem=new E;u.zoomLimit=v.get("scaleLimit"),u.setBoundingRect(l[0],l[1],x,a),u.setViewRect(c.x,c.y,i,n),u.setCenter(v.get("center")),u.setZoom(v.get("zoom")),f.push(u)}}),f}X.exports=L},748063:function(X){function z(E){return E instanceof Array||(E=[E,E]),E}function e(E){E.eachSeriesByType("graph",function(F){var O=F.getGraph(),M=F.getEdgeData(),b=z(F.get("edgeSymbol")),L=z(F.get("edgeSymbolSize")),T="lineStyle.color".split("."),C="lineStyle.opacity".split(".");M.setVisual("fromSymbol",b&&b[0]),M.setVisual("toSymbol",b&&b[1]),M.setVisual("fromSymbolSize",L&&L[0]),M.setVisual("toSymbolSize",L&&L[1]),M.setVisual("color",F.get(T)),M.setVisual("opacity",F.get(C)),M.each(function(f){var v=M.getItemModel(f),m=O.getEdgeByIndex(f),o=z(v.getShallow("symbol",!0)),h=z(v.getShallow("symbolSize",!0)),l=v.get(T),r=v.get(C);switch(l){case"source":l=m.node1.getVisual("color");break;case"target":l=m.node2.getVisual("color");break}o[0]&&m.setVisual("fromSymbol",o[0]),o[1]&&m.setVisual("toSymbol",o[1]),h[0]&&m.setVisual("fromSymbolSize",h[0]),h[1]&&m.setVisual("toSymbolSize",h[1]),m.setVisual("color",l),m.setVisual("opacity",r)})})}X.exports=e},161852:function(X,z,e){var E=e(912072),F=E.scaleAndAdd;function O(M,b,L){for(var T=L.rect,C=T.width,f=T.height,v=[T.x+C/2,T.y+f/2],m=L.gravity==null?.1:L.gravity,o=0;o<M.length;o++){var h=M[o];h.p||(h.p=E.create(C*(Math.random()-.5)+v[0],f*(Math.random()-.5)+v[1])),h.pp=E.clone(h.p),h.edges=null}var l=L.friction==null?.6:L.friction,r=l;return{warmUp:function(){r=l*.8},setFixed:function(s){M[s].fixed=!0},setUnfixed:function(s){M[s].fixed=!1},step:function(s){for(var c=[],x=M.length,a=0;a<b.length;a++){var i=b[a];if(!i.ignoreForceLayout){var n=i.n1,u=i.n2;E.sub(c,u.p,n.p);var g=E.len(c)-i.d,d=u.w/(n.w+u.w);isNaN(d)&&(d=0),E.normalize(c,c),!n.fixed&&F(n.p,n.p,c,d*g*r),!u.fixed&&F(u.p,u.p,c,-(1-d)*g*r)}}for(var a=0;a<x;a++){var y=M[a];y.fixed||(E.sub(c,v,y.p),F(y.p,y.p,c,m*r))}for(var a=0;a<x;a++)for(var n=M[a],p=a+1;p<x;p++){var u=M[p];E.sub(c,u.p,n.p);var g=E.len(c);g===0&&(E.set(c,Math.random()-.5,Math.random()-.5),g=1);var w=(n.rep+u.rep)/g/g;!n.fixed&&F(n.pp,n.pp,c,w),!u.fixed&&F(u.pp,u.pp,c,-w)}for(var S=[],a=0;a<x;a++){var y=M[a];y.fixed||(E.sub(S,y.p,y.pp),F(y.p,y.p,S,r),E.copy(y.pp,y.p))}r=r*.992,s&&s(M,b,r<.01)}}}z.forceLayout=O},420798:function(X,z,e){var E=e(161852),F=E.forceLayout,O=e(189761),M=O.simpleLayout,b=e(861616),L=b.circularLayout,T=e(748354),C=T.linearMap,f=e(912072),v=e(131879),m=e(737498),o=m.getCurvenessForEdge;function h(l){l.eachSeriesByType("graph",function(r){var s=r.coordinateSystem;if(!(s&&s.type!=="view"))if(r.get("layout")==="force"){var c=r.preservedPoints||{},x=r.getGraph(),a=x.data,i=x.edgeData,n=r.getModel("force"),u=n.get("initLayout");r.preservedPoints?a.each(function(D){var A=a.getId(D);a.setItemLayout(D,c[A]||[NaN,NaN])}):!u||u==="none"?M(r):u==="circular"&&L(r,"value");var g=a.getDataExtent("value"),d=i.getDataExtent("value"),y=n.get("repulsion"),p=n.get("edgeLength");v.isArray(y)||(y=[y,y]),v.isArray(p)||(p=[p,p]),p=[p[1],p[0]];var w=a.mapArray("value",function(D,A){var N=a.getItemLayout(A),I=C(D,g,y);return isNaN(I)&&(I=(y[0]+y[1])/2),{w:I,rep:I,fixed:a.getItemModel(A).get("fixed"),p:!N||isNaN(N[0])||isNaN(N[1])?null:N}}),S=i.mapArray("value",function(D,A){var N=x.getEdgeByIndex(A),I=C(D,d,p);isNaN(I)&&(I=(p[0]+p[1])/2);var G=N.getModel(),W=v.retrieve3(G.get("lineStyle.curveness"),-o(N,r,A,!0),0);return{n1:w[N.node1.dataIndex],n2:w[N.node2.dataIndex],d:I,curveness:W,ignoreForceLayout:G.get("ignoreForceLayout")}}),s=r.coordinateSystem,R=s.getBoundingRect(),B=F(w,S,{rect:R,gravity:n.get("gravity"),friction:n.get("friction")}),k=B.step;B.step=function(D){for(var A=0,N=w.length;A<N;A++)w[A].fixed&&f.copy(w[A].p,x.getNodeByIndex(A).getLayout());k(function(I,G,W){for(var Z=0,H=I.length;Z<H;Z++)I[Z].fixed||x.getNodeByIndex(Z).setLayout(I[Z].p),c[a.getId(Z)]=I[Z].p;for(var Z=0,H=G.length;Z<H;Z++){var U=G[Z],V=x.getEdgeByIndex(Z),Y=U.n1.p,$=U.n2.p,K=V.getLayout();K=K?K.slice():[],K[0]=K[0]||[],K[1]=K[1]||[],f.copy(K[0],Y),f.copy(K[1],$),+U.curveness&&(K[2]=[(Y[0]+$[0])/2-(Y[1]-$[1])*U.curveness,(Y[1]+$[1])/2-($[0]-Y[0])*U.curveness]),V.setLayout(K)}D&&D(W)})},r.forceLayout=B,r.preservedPoints=c,B.step()}else r.forceLayout=null})}X.exports=h},595075:function(X,z,e){var E=e(3440),F=e(264072),O=F.updateCenterAndZoom;e(479722);var M={type:"graphRoam",event:"graphRoam",update:"none"};E.registerAction(M,function(b,L){L.eachComponent({mainType:"series",query:b},function(T){var C=T.coordinateSystem,f=O(C,b);T.setCenter&&T.setCenter(f.center),T.setZoom&&T.setZoom(f.zoom)})})},425799:function(X,z){function e(F){var O=F.coordinateSystem;if(O.type!=="view")return 1;var M=F.option.nodeScaleRatio,b=O.scale,L=b&&b[0]||1,T=O.getZoom(),C=(T-1)*M+1;return C/L}function E(F){var O=F.getVisual("symbolSize");return O instanceof Array&&(O=(O[0]+O[1])/2),+O}z.getNodeGlobalScale=e,z.getSymbolSize=E},135493:function(X,z,e){var E=e(131879),F=E.each,O=e(189761),M=O.simpleLayout,b=O.simpleLayoutEdge;function L(T,C){T.eachSeriesByType("graph",function(f){var v=f.get("layout"),m=f.coordinateSystem;if(m&&m.type!=="view"){var o=f.getData(),h=[];F(m.dimensions,function(a){h=h.concat(o.mapDimension(a,!0))});for(var l=0;l<o.count();l++){for(var r=[],s=!1,c=0;c<h.length;c++){var x=o.get(h[c],l);isNaN(x)||(s=!0),r.push(x)}s?o.setItemLayout(l,m.dataToPoint(r)):o.setItemLayout(l,[NaN,NaN])}b(o.graph,f)}else(!v||v==="none")&&M(f)})}X.exports=L},189761:function(X,z,e){var E=e(912072),F=e(131879),O=e(737498),M=O.getCurvenessForEdge;function b(T){var C=T.coordinateSystem;if(!(C&&C.type!=="view")){var f=T.getGraph();f.eachNode(function(v){var m=v.getModel();v.setLayout([+m.get("x"),+m.get("y")])}),L(f,T)}}function L(T,C){T.eachEdge(function(f,v){var m=F.retrieve3(f.getModel().get("lineStyle.curveness"),-M(f,C,v,!0),0),o=E.clone(f.node1.getLayout()),h=E.clone(f.node2.getLayout()),l=[o,h];+m&&l.push([(o[0]+h[0])/2-(o[1]-h[1])*m,(o[1]+h[1])/2-(h[0]-o[0])*m]),f.setLayout(l)})}z.simpleLayout=b,z.simpleLayoutEdge=L},327207:function(X,z,e){e(561715),e(814334)},684821:function(X,z,e){var E=e(131879),F=256;function O(){var b=E.createCanvas();this.canvas=b,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}O.prototype={update:function(b,L,T,C,f,v){var m=this._getBrush(),o=this._getGradient(b,f,"inRange"),h=this._getGradient(b,f,"outOfRange"),l=this.pointSize+this.blurSize,r=this.canvas,s=r.getContext("2d"),c=b.length;r.width=L,r.height=T;for(var x=0;x<c;++x){var a=b[x],i=a[0],n=a[1],u=a[2],g=C(u);s.globalAlpha=g,s.drawImage(m,i-l,n-l)}if(!r.width||!r.height)return r;for(var d=s.getImageData(0,0,r.width,r.height),y=d.data,p=0,w=y.length,S=this.minOpacity,R=this.maxOpacity,B=R-S;p<w;){var g=y[p+3]/256,k=Math.floor(g*(F-1))*4;if(g>0){var P=v(g)?o:h;g>0&&(g=g*B+S),y[p++]=P[k],y[p++]=P[k+1],y[p++]=P[k+2],y[p++]=P[k+3]*g*256}else p+=4}return s.putImageData(d,0,0),r},_getBrush:function(){var b=this._brushCanvas||(this._brushCanvas=E.createCanvas()),L=this.pointSize+this.blurSize,T=L*2;b.width=T,b.height=T;var C=b.getContext("2d");return C.clearRect(0,0,T,T),C.shadowOffsetX=T,C.shadowBlur=this.blurSize,C.shadowColor="#000",C.beginPath(),C.arc(-L,L,this.pointSize,0,Math.PI*2,!0),C.closePath(),C.fill(),b},_getGradient:function(b,L,T){for(var C=this._gradientPixels,f=C[T]||(C[T]=new Uint8ClampedArray(256*4)),v=[0,0,0,0],m=0,o=0;o<256;o++)L[T](o/255,!0,v),f[m++]=v[0],f[m++]=v[1],f[m++]=v[2],f[m++]=v[3];return f}};var M=O;X.exports=M},561715:function(X,z,e){var E=e(502365),F=e(901664),O=e(348642),M=E.extend({type:"series.heatmap",getInitialData:function(b,L){return F(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var b=O.get(this.get("coordinateSystem"));if(b&&b.dimensions)return b.dimensions[0]==="lng"&&b.dimensions[1]==="lat"},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});X.exports=M},814334:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(248070),b=e(684821),L=e(131879);function T(m,o,h){var l=m[1]-m[0];o=L.map(o,function(c){return{interval:[(c.interval[0]-m[0])/l,(c.interval[1]-m[0])/l]}});var r=o.length,s=0;return function(c){for(var x=s;x<r;x++){var a=o[x].interval;if(a[0]<=c&&c<=a[1]){s=x;break}}if(x===r)for(var x=s-1;x>=0;x--){var a=o[x].interval;if(a[0]<=c&&c<=a[1]){s=x;break}}return x>=0&&x<r&&h[x]}}function C(m,o){var h=m[1]-m[0];return o=[(o[0]-m[0])/h,(o[1]-m[0])/h],function(l){return l>=o[0]&&l<=o[1]}}function f(m){var o=m.dimensions;return o[0]==="lng"&&o[1]==="lat"}var v=O.extendChartView({type:"heatmap",render:function(m,o,h){var l;o.eachComponent("visualMap",function(s){s.eachTargetSeries(function(c){c===m&&(l=s)})}),this.group.removeAll(),this._incrementalDisplayable=null;var r=m.coordinateSystem;r.type==="cartesian2d"||r.type==="calendar"?this._renderOnCartesianAndCalendar(m,h,0,m.getData().count()):f(r)&&this._renderOnGeo(r,m,l,h)},incrementalPrepareRender:function(m,o,h){this.group.removeAll()},incrementalRender:function(m,o,h,l){var r=o.coordinateSystem;r&&this._renderOnCartesianAndCalendar(o,l,m.start,m.end,!0)},_renderOnCartesianAndCalendar:function(m,o,h,l,r){var s=m.coordinateSystem,c,x;if(s.type==="cartesian2d"){var a=s.getAxis("x"),i=s.getAxis("y");c=a.getBandWidth(),x=i.getBandWidth()}for(var n=this.group,u=m.getData(),g="itemStyle",d="emphasis.itemStyle",y="label",p="emphasis.label",w=m.getModel(g).getItemStyle(["color"]),S=m.getModel(d).getItemStyle(),R=m.getModel(y),B=m.getModel(p),k=s.type,P=k==="cartesian2d"?[u.mapDimension("x"),u.mapDimension("y"),u.mapDimension("value")]:[u.mapDimension("time"),u.mapDimension("value")],D=h;D<l;D++){var A;if(k==="cartesian2d"){if(isNaN(u.get(P[2],D)))continue;var N=s.dataToPoint([u.get(P[0],D),u.get(P[1],D)]);A=new M.Rect({shape:{x:Math.floor(Math.round(N[0])-c/2),y:Math.floor(Math.round(N[1])-x/2),width:Math.ceil(c),height:Math.ceil(x)},style:{fill:u.getItemVisual(D,"color"),opacity:u.getItemVisual(D,"opacity")}})}else{if(isNaN(u.get(P[1],D)))continue;A=new M.Rect({z2:1,shape:s.dataToRect([u.get(P[0],D)]).contentShape,style:{fill:u.getItemVisual(D,"color"),opacity:u.getItemVisual(D,"opacity")}})}var I=u.getItemModel(D);u.hasItemOption&&(w=I.getModel(g).getItemStyle(["color"]),S=I.getModel(d).getItemStyle(),R=I.getModel(y),B=I.getModel(p));var G=m.getRawValue(D),W="-";G&&G[2]!=null&&(W=G[2]),M.setLabelStyle(w,S,R,B,{labelFetcher:m,labelDataIndex:D,defaultText:W,isRectText:!0}),A.setStyle(w),M.setHoverStyle(A,u.hasItemOption?S:L.extend({},S)),A.incremental=r,r&&(A.useHoverLayer=!0),n.add(A),u.setItemGraphicEl(D,A)}},_renderOnGeo:function(m,o,h,l){var r=h.targetVisuals.inRange,s=h.targetVisuals.outOfRange,c=o.getData(),x=this._hmLayer||this._hmLayer||new b;x.blurSize=o.get("blurSize"),x.pointSize=o.get("pointSize"),x.minOpacity=o.get("minOpacity"),x.maxOpacity=o.get("maxOpacity");var a=m.getViewRect().clone(),i=m.getRoamTransform();a.applyTransform(i);var n=Math.max(a.x,0),u=Math.max(a.y,0),g=Math.min(a.width+a.x,l.getWidth()),d=Math.min(a.height+a.y,l.getHeight()),y=g-n,p=d-u,w=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],S=c.mapArray(w,function(P,D,A){var N=m.dataToPoint([P,D]);return N[0]-=n,N[1]-=u,N.push(A),N}),R=h.getExtent(),B=h.type==="visualMap.continuous"?C(R,h.option.range):T(R,h.getPieceList(),h.option.selected);x.update(S,y,p,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:s.color.getColorMapper()},B);var k=new M.Image({style:{width:y,height:p,x:n,y:u,image:x.canvas},silent:!0});this.group.add(k)},dispose:function(){}});X.exports=v},600813:function(X,z,e){var E=e(248070),F=e(443959),O=e(131879),M=e(435730),b=M.createSymbol,L=e(912072),T=e(890723);function C(m,o,h){E.Group.call(this),this.add(this.createLine(m,o,h)),this._updateEffectSymbol(m,o)}var f=C.prototype;f.createLine=function(m,o,h){return new F(m,o,h)},f._updateEffectSymbol=function(m,o){var h=m.getItemModel(o),l=h.getModel("effect"),r=l.get("symbolSize"),s=l.get("symbol");O.isArray(r)||(r=[r,r]);var c=l.get("color")||m.getItemVisual(o,"color"),x=this.childAt(1);this._symbolType!==s&&(this.remove(x),x=b(s,-.5,-.5,1,1,c),x.z2=100,x.culling=!0,this.add(x)),x&&(x.setStyle("shadowColor",c),x.setStyle(l.getItemStyle(["color"])),x.attr("scale",r),x.setColor(c),x.attr("scale",r),this._symbolType=s,this._symbolScale=r,this._updateEffectAnimation(m,l,o))},f._updateEffectAnimation=function(m,o,h){var l=this.childAt(1);if(l){var r=this,s=m.getItemLayout(h),c=o.get("period")*1e3,x=o.get("loop"),a=o.get("constantSpeed"),i=O.retrieve(o.get("delay"),function(d){return d/m.count()*c/3}),n=typeof i=="function";if(l.ignore=!0,this.updateAnimationPoints(l,s),a>0&&(c=this.getLineLength(l)/a*1e3),c!==this._period||x!==this._loop){l.stopAnimation();var u=i;n&&(u=i(h)),l.__t>0&&(u=-c*l.__t),l.__t=0;var g=l.animate("",x).when(c,{__t:1}).delay(u).during(function(){r.updateSymbolPosition(l)});x||g.done(function(){r.remove(l)}),g.start()}this._period=c,this._loop=x}},f.getLineLength=function(m){return L.dist(m.__p1,m.__cp1)+L.dist(m.__cp1,m.__p2)},f.updateAnimationPoints=function(m,o){m.__p1=o[0],m.__p2=o[1],m.__cp1=o[2]||[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]},f.updateData=function(m,o,h){this.childAt(0).updateData(m,o,h),this._updateEffectSymbol(m,o)},f.updateSymbolPosition=function(m){var o=m.__p1,h=m.__p2,l=m.__cp1,r=m.__t,s=m.position,c=[s[0],s[1]],x=T.quadraticAt,a=T.quadraticDerivativeAt;s[0]=x(o[0],l[0],h[0],r),s[1]=x(o[1],l[1],h[1],r);var i=a(o[0],l[0],h[0],r),n=a(o[1],l[1],h[1],r);if(m.rotation=-Math.atan2(n,i)-Math.PI/2,this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")if(m.__lastT!==void 0&&m.__lastT<m.__t){var u=L.dist(c,s)*1.05;m.attr("scale",[m.scale[0],u]),r===1&&(s[0]=c[0]+(s[0]-c[0])/2,s[1]=c[1]+(s[1]-c[1])/2)}else if(m.__lastT===1){var u=2*L.dist(o,s);m.attr("scale",[m.scale[0],u])}else m.attr("scale",this._symbolScale);m.__lastT=m.__t,m.ignore=!1},f.updateLayout=function(m,o){this.childAt(0).updateLayout(m,o);var h=m.getItemModel(o).getModel("effect");this._updateEffectAnimation(m,h,o)},O.inherits(C,E.Group);var v=C;X.exports=v},424105:function(X,z,e){var E=e(35417),F=e(131879),O=e(600813),M=e(912072);function b(C,f,v){O.call(this,C,f,v),this._lastFrame=0,this._lastFramePercent=0}var L=b.prototype;L.createLine=function(C,f,v){return new E(C,f,v)},L.updateAnimationPoints=function(C,f){this._points=f;for(var v=[0],m=0,o=1;o<f.length;o++){var h=f[o-1],l=f[o];m+=M.dist(h,l),v.push(m)}if(m!==0){for(var o=0;o<v.length;o++)v[o]/=m;this._offsets=v,this._length=m}},L.getLineLength=function(C){return this._length},L.updateSymbolPosition=function(C){var f=C.__t,v=this._points,m=this._offsets,o=v.length;if(m){var h=this._lastFrame,l;if(f<this._lastFramePercent){var r=Math.min(h+1,o-1);for(l=r;l>=0&&!(m[l]<=f);l--);l=Math.min(l,o-2)}else{for(var l=h;l<o&&!(m[l]>f);l++);l=Math.min(l-1,o-2)}M.lerp(C.position,v[l],v[l+1],(f-m[l])/(m[l+1]-m[l]));var s=v[l+1][0]-v[l][0],c=v[l+1][1]-v[l][1];C.rotation=-Math.atan2(c,s)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=f,C.ignore=!1}},F.inherits(b,O);var T=b;X.exports=T},279138:function(X,z,e){var E=e(131879),F=e(435730),O=F.createSymbol,M=e(248070),b=M.Group,L=e(748354),T=L.parsePercent,C=e(513980),f=3;function v(r){return E.isArray(r)||(r=[+r,+r]),r}function m(r,s){var c=s.rippleEffectColor||s.color;r.eachChild(function(x){x.attr({z:s.z,zlevel:s.zlevel,style:{stroke:s.brushType==="stroke"?c:null,fill:s.brushType==="fill"?c:null}})})}function o(r,s){b.call(this);var c=new C(r,s),x=new b;this.add(c),this.add(x),x.beforeUpdate=function(){this.attr(c.getScale())},this.updateData(r,s)}var h=o.prototype;h.stopEffectAnimation=function(){this.childAt(1).removeAll()},h.startEffectAnimation=function(r){for(var s=r.symbolType,c=r.color,x=this.childAt(1),a=0;a<f;a++){var i=O(s,-1,-1,2,2,c);i.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var n=-a/f*r.period+r.effectOffset;i.animate("",!0).when(r.period,{scale:[r.rippleScale/2,r.rippleScale/2]}).delay(n).start(),i.animateStyle(!0).when(r.period,{opacity:0}).delay(n).start(),x.add(i)}m(x,r)},h.updateEffectAnimation=function(r){for(var s=this._effectCfg,c=this.childAt(1),x=["symbolType","period","rippleScale"],a=0;a<x.length;a++){var i=x[a];if(s[i]!==r[i]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}m(c,r)},h.highlight=function(){this.trigger("emphasis")},h.downplay=function(){this.trigger("normal")},h.updateData=function(r,s){var c=r.hostModel;this.childAt(0).updateData(r,s);var x=this.childAt(1),a=r.getItemModel(s),i=r.getItemVisual(s,"symbol"),n=v(r.getItemVisual(s,"symbolSize")),u=r.getItemVisual(s,"color");x.attr("scale",n),x.traverse(function(B){B.attr({fill:u})});var g=a.getShallow("symbolOffset");if(g){var d=x.position;d[0]=T(g[0],n[0]),d[1]=T(g[1],n[1])}var y=r.getItemVisual(s,"symbolRotate");x.rotation=(y||0)*Math.PI/180||0;var p={};if(p.showEffectOn=c.get("showEffectOn"),p.rippleScale=a.get("rippleEffect.scale"),p.brushType=a.get("rippleEffect.brushType"),p.period=a.get("rippleEffect.period")*1e3,p.effectOffset=s/r.count(),p.z=a.getShallow("z")||0,p.zlevel=a.getShallow("zlevel")||0,p.symbolType=i,p.color=u,p.rippleEffectColor=a.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),p.showEffectOn==="render")this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p;else{this._effectCfg=null,this.stopEffectAnimation();var w=this.childAt(0),S=function(){w.highlight(),p.showEffectOn!=="render"&&this.startEffectAnimation(p)},R=function(){w.downplay(),p.showEffectOn!=="render"&&this.stopEffectAnimation()};this.on("mouseover",S,this).on("mouseout",R,this).on("emphasis",S,this).on("normal",R,this)}this._effectCfg=p},h.fadeOut=function(r){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),r&&r()},E.inherits(o,b);var l=o;X.exports=l},714305:function(X,z,e){var E=e(248070),F=e(672440),O=e(84142),M=e(159188),b=E.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(f,v){var m=v.segs,o=v.curveness;if(v.polyline)for(var h=0;h<m.length;){var l=m[h++];if(l>0){f.moveTo(m[h++],m[h++]);for(var r=1;r<l;r++)f.lineTo(m[h++],m[h++])}}else for(var h=0;h<m.length;){var s=m[h++],c=m[h++],x=m[h++],a=m[h++];if(f.moveTo(s,c),o>0){var i=(s+x)/2-(c-a)*o,n=(c+a)/2-(x-s)*o;f.quadraticCurveTo(i,n,x,a)}else f.lineTo(x,a)}},findDataIndex:function(f,v){var m=this.shape,o=m.segs,h=m.curveness;if(m.polyline)for(var l=0,r=0;r<o.length;){var s=o[r++];if(s>0)for(var c=o[r++],x=o[r++],a=1;a<s;a++){var i=o[r++],n=o[r++];if(O.containStroke(c,x,i,n))return l}l++}else for(var l=0,r=0;r<o.length;){var c=o[r++],x=o[r++],i=o[r++],n=o[r++];if(h>0){var u=(c+i)/2-(x-n)*h,g=(x+n)/2-(i-c)*h;if(M.containStroke(c,x,u,g,i,n))return l}else if(O.containStroke(c,x,i,n))return l;l++}return-1}});function L(){this.group=new E.Group}var T=L.prototype;T.isPersistent=function(){return!this._incremental},T.updateData=function(f){this.group.removeAll();var v=new b({rectHover:!0,cursor:"default"});v.setShape({segs:f.getLayout("linesPoints")}),this._setCommon(v,f),this.group.add(v),this._incremental=null},T.incrementalPrepareUpdate=function(f){this.group.removeAll(),this._clearIncremental(),f.count()>5e5?(this._incremental||(this._incremental=new F({silent:!0})),this.group.add(this._incremental)):this._incremental=null},T.incrementalUpdate=function(f,v){var m=new b;m.setShape({segs:v.getLayout("linesPoints")}),this._setCommon(m,v,!!this._incremental),this._incremental?this._incremental.addDisplayable(m,!0):(m.rectHover=!0,m.cursor="default",m.__startIndex=f.start,this.group.add(m))},T.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},T._setCommon=function(f,v,m){var o=v.hostModel;f.setShape({polyline:o.get("polyline"),curveness:o.get("lineStyle.curveness")}),f.useStyle(o.getModel("lineStyle").getLineStyle()),f.style.strokeNoScale=!0;var h=v.getVisual("color");h&&f.setStyle("stroke",h),f.setStyle("fill"),m||(f.seriesIndex=o.seriesIndex,f.on("mousemove",function(l){f.dataIndex=null;var r=f.findDataIndex(l.offsetX,l.offsetY);r>0&&(f.dataIndex=r+f.__startIndex)}))},T._clearIncremental=function(){var f=this._incremental;f&&f.clearDisplaybles()};var C=L;X.exports=C},934567:function(X,z,e){var E=e(248070),F=e(435730),O=F.createSymbol,M=e(672440),b=4,L=E.extendShape({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(v,m){var o=m.points,h=m.size,l=this.symbolProxy,r=l.shape,s=v.getContext?v.getContext():v,c=s&&h[0]<b;if(!c)for(var x=0;x<o.length;){var a=o[x++],i=o[x++];isNaN(a)||isNaN(i)||this.softClipShape&&!this.softClipShape.contain(a,i)||(r.x=a-h[0]/2,r.y=i-h[1]/2,r.width=h[0],r.height=h[1],l.buildPath(v,r,!0))}},afterBrush:function(v){var m=this.shape,o=m.points,h=m.size,l=h[0]<b;if(l){this.setTransform(v);for(var r=0;r<o.length;){var s=o[r++],c=o[r++];isNaN(s)||isNaN(c)||this.softClipShape&&!this.softClipShape.contain(s,c)||v.fillRect(s-h[0]/2,c-h[1]/2,h[0],h[1])}this.restoreTransform(v)}},findDataIndex:function(v,m){for(var o=this.shape,h=o.points,l=o.size,r=Math.max(l[0],4),s=Math.max(l[1],4),c=h.length/2-1;c>=0;c--){var x=c*2,a=h[x]-r/2,i=h[x+1]-s/2;if(v>=a&&m>=i&&v<=a+r&&m<=i+s)return c}return-1}});function T(){this.group=new E.Group}var C=T.prototype;C.isPersistent=function(){return!this._incremental},C.updateData=function(v,m){this.group.removeAll();var o=new L({rectHover:!0,cursor:"default"});o.setShape({points:v.getLayout("symbolPoints")}),this._setCommon(o,v,!1,m),this.group.add(o),this._incremental=null},C.updateLayout=function(v){if(!this._incremental){var m=v.getLayout("symbolPoints");this.group.eachChild(function(o){if(o.startIndex!=null){var h=(o.endIndex-o.startIndex)*2,l=o.startIndex*4*2;m=new Float32Array(m.buffer,l,h)}o.setShape("points",m)})}},C.incrementalPrepareUpdate=function(v){this.group.removeAll(),this._clearIncremental(),v.count()>2e6?(this._incremental||(this._incremental=new M({silent:!0})),this.group.add(this._incremental)):this._incremental=null},C.incrementalUpdate=function(v,m,o){var h;this._incremental?(h=new L,this._incremental.addDisplayable(h,!0)):(h=new L({rectHover:!0,cursor:"default",startIndex:v.start,endIndex:v.end}),h.incremental=!0,this.group.add(h)),h.setShape({points:m.getLayout("symbolPoints")}),this._setCommon(h,m,!!this._incremental,o)},C._setCommon=function(v,m,o,h){var l=m.hostModel;h=h||{};var r=m.getVisual("symbolSize");v.setShape("size",r instanceof Array?r:[r,r]),v.softClipShape=h.clipShape||null,v.symbolProxy=O(m.getVisual("symbol"),0,0,0,0),v.setColor=v.symbolProxy.setColor;var s=v.shape.size[0]<b;v.useStyle(l.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var c=m.getVisual("color");c&&v.setColor(c),o||(v.seriesIndex=l.seriesIndex,v.on("mousemove",function(x){v.dataIndex=null;var a=v.findDataIndex(x.offsetX,x.offsetY);a>=0&&(v.dataIndex=a+(v.startIndex||0))}))},C.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},C._clearIncremental=function(){var v=this._incremental;v&&v.clearDisplaybles()};var f=T;X.exports=f},443959:function(X,z,e){var E=e(131879),F=e(912072),O=e(435730),M=e(84811),b=e(248070),L=e(748354),T=L.round,C=["fromSymbol","toSymbol"];function f(c){return"_"+c+"Type"}function v(c,x,a){var i=x.getItemVisual(a,c);if(!(!i||i==="none")){var n=x.getItemVisual(a,"color"),u=x.getItemVisual(a,c+"Size"),g=x.getItemVisual(a,c+"Rotate");E.isArray(u)||(u=[u,u]);var d=O.createSymbol(i,-u[0]/2,-u[1]/2,u[0],u[1],n);return d.__specifiedRotation=g==null||isNaN(g)?void 0:+g*Math.PI/180||0,d.name=c,d}}function m(c){var x=new M({name:"line",subPixelOptimize:!0});return o(x.shape,c),x}function o(c,x){c.x1=x[0][0],c.y1=x[0][1],c.x2=x[1][0],c.y2=x[1][1],c.percent=1;var a=x[2];a?(c.cpx1=a[0],c.cpy1=a[1]):(c.cpx1=NaN,c.cpy1=NaN)}function h(){var c=this,x=c.childOfName("fromSymbol"),a=c.childOfName("toSymbol"),i=c.childOfName("label");if(!(!x&&!a&&i.ignore)){for(var n=1,u=this.parent;u;)u.scale&&(n/=u.scale[0]),u=u.parent;var g=c.childOfName("line");if(!(!this.__dirty&&!g.__dirty)){var d=g.shape.percent,y=g.pointAt(0),p=g.pointAt(d),w=F.sub([],p,y);if(F.normalize(w,w),x){x.attr("position",y);var S=x.__specifiedRotation;if(S==null){var R=g.tangentAt(0);x.attr("rotation",Math.PI/2-Math.atan2(R[1],R[0]))}else x.attr("rotation",S);x.attr("scale",[n*d,n*d])}if(a){a.attr("position",p);var S=a.__specifiedRotation;if(S==null){var R=g.tangentAt(1);a.attr("rotation",-Math.PI/2-Math.atan2(R[1],R[0]))}else a.attr("rotation",S);a.attr("scale",[n*d,n*d])}if(!i.ignore){i.attr("position",p);var B,k,P,D,A=i.__labelDistance,N=A[0]*n,I=A[1]*n,G=d/2,R=g.tangentAt(G),W=[R[1],-R[0]],Z=g.pointAt(G);W[1]>0&&(W[0]=-W[0],W[1]=-W[1]);var H=R[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var U=-Math.atan2(R[1],R[0]);p[0]<y[0]&&(U=Math.PI+U),i.attr("rotation",U)}var V;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":V=-I,P="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":V=I,P="top";break;default:V=0,P="middle"}switch(i.__position){case"end":B=[w[0]*N+p[0],w[1]*I+p[1]],k=w[0]>.8?"left":w[0]<-.8?"right":"center",P=w[1]>.8?"top":w[1]<-.8?"bottom":"middle";break;case"start":B=[-w[0]*N+y[0],-w[1]*I+y[1]],k=w[0]>.8?"right":w[0]<-.8?"left":"center",P=w[1]>.8?"bottom":w[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":B=[N*H+y[0],y[1]+V],k=R[0]<0?"right":"left",D=[-N*H,-V];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":B=[Z[0],Z[1]+V],k="center",D=[0,-V];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":B=[-N*H+p[0],p[1]+V],k=R[0]>=0?"right":"left",D=[N*H,-V];break}i.attr({style:{textVerticalAlign:i.__verticalAlign||P,textAlign:i.__textAlign||k},position:B,scale:[n,n],origin:D})}}}}function l(c,x,a){b.Group.call(this),this._createLine(c,x,a)}var r=l.prototype;r.beforeUpdate=h,r._createLine=function(c,x,a){var i=c.hostModel,n=c.getItemLayout(x),u=m(n);u.shape.percent=0,b.initProps(u,{shape:{percent:1}},i,x),this.add(u);var g=new b.Text({name:"label",lineLabelOriginalOpacity:1});this.add(g),E.each(C,function(d){var y=v(d,c,x);this.add(y),this[f(d)]=c.getItemVisual(x,d)},this),this._updateCommonStl(c,x,a)},r.updateData=function(c,x,a){var i=c.hostModel,n=this.childOfName("line"),u=c.getItemLayout(x),g={shape:{}};o(g.shape,u),b.updateProps(n,g,i,x),E.each(C,function(d){var y=c.getItemVisual(x,d),p=f(d);if(this[p]!==y){this.remove(this.childOfName(d));var w=v(d,c,x);this.add(w)}this[p]=y},this),this._updateCommonStl(c,x,a)},r._updateCommonStl=function(c,x,a){var i=c.hostModel,n=this.childOfName("line"),u=a&&a.lineStyle,g=a&&a.hoverLineStyle,d=a&&a.labelModel,y=a&&a.hoverLabelModel;if(!a||c.hasItemOption){var p=c.getItemModel(x);u=p.getModel("lineStyle").getLineStyle(),g=p.getModel("emphasis.lineStyle").getLineStyle(),d=p.getModel("label"),y=p.getModel("emphasis.label")}var w=c.getItemVisual(x,"color"),S=E.retrieve3(c.getItemVisual(x,"opacity"),u.opacity,1);n.useStyle(E.defaults({strokeNoScale:!0,fill:"none",stroke:w,opacity:S},u)),n.hoverStyle=g,E.each(C,function(Z){var H=this.childOfName(Z);H&&(H.setColor(w),H.setStyle({opacity:S}))},this);var R=d.getShallow("show"),B=y.getShallow("show"),k=this.childOfName("label"),P,D;if((R||B)&&(P=w||"#000",D=i.getFormattedLabel(x,"normal",c.dataType),D==null)){var A=i.getRawValue(x);D=A==null?c.getName(x):isFinite(A)?T(A):A}var N=R?D:null,I=B?E.retrieve2(i.getFormattedLabel(x,"emphasis",c.dataType),D):null,G=k.style;if(N!=null||I!=null){b.setTextStyle(k.style,d,{text:N},{autoColor:P}),k.__textAlign=G.textAlign,k.__verticalAlign=G.textVerticalAlign,k.__position=d.get("position")||"middle";var W=d.get("distance");E.isArray(W)||(W=[W,W]),k.__labelDistance=W}I!=null?k.hoverStyle={text:I,textFill:y.getTextColor(!0),fontStyle:y.getShallow("fontStyle"),fontWeight:y.getShallow("fontWeight"),fontSize:y.getShallow("fontSize"),fontFamily:y.getShallow("fontFamily")}:k.hoverStyle={text:null},k.ignore=!R&&!B,b.setHoverStyle(this)},r.highlight=function(){this.trigger("emphasis")},r.downplay=function(){this.trigger("normal")},r.updateLayout=function(c,x){this.setLinePoints(c.getItemLayout(x))},r.setLinePoints=function(c){var x=this.childOfName("line");o(x.shape,c),x.dirty()},E.inherits(l,b.Group);var s=l;X.exports=s},89264:function(X,z,e){var E=e(248070),F=e(443959);function O(o){this._ctor=o||F,this.group=new E.Group}var M=O.prototype;M.isPersistent=function(){return!0},M.updateData=function(o){var h=this,l=h.group,r=h._lineData;h._lineData=o,r||l.removeAll();var s=C(o);o.diff(r).add(function(c){b(h,o,c,s)}).update(function(c,x){L(h,r,o,x,c,s)}).remove(function(c){l.remove(r.getItemGraphicEl(c))}).execute()};function b(o,h,l,r){var s=h.getItemLayout(l);if(v(s)){var c=new o._ctor(h,l,r);h.setItemGraphicEl(l,c),o.group.add(c)}}function L(o,h,l,r,s,c){var x=h.getItemGraphicEl(r);if(!v(l.getItemLayout(s))){o.group.remove(x);return}x?x.updateData(l,s,c):x=new o._ctor(l,s,c),l.setItemGraphicEl(s,x),o.group.add(x)}M.updateLayout=function(){var o=this._lineData;o&&o.eachItemGraphicEl(function(h,l){h.updateLayout(o,l)},this)},M.incrementalPrepareUpdate=function(o){this._seriesScope=C(o),this._lineData=null,this.group.removeAll()};function T(o){return o.animators&&o.animators.length>0}M.incrementalUpdate=function(o,h){function l(x){!x.isGroup&&!T(x)&&(x.incremental=x.useHoverLayer=!0)}for(var r=o.start;r<o.end;r++){var s=h.getItemLayout(r);if(v(s)){var c=new this._ctor(h,r,this._seriesScope);c.traverse(l),this.group.add(c),h.setItemGraphicEl(r,c)}}};function C(o){var h=o.hostModel;return{lineStyle:h.getModel("lineStyle").getLineStyle(),hoverLineStyle:h.getModel("emphasis.lineStyle").getLineStyle(),labelModel:h.getModel("label"),hoverLabelModel:h.getModel("emphasis.label")}}M.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},M._clearIncremental=function(){var o=this._incremental;o&&o.clearDisplaybles()};function f(o){return isNaN(o[0])||isNaN(o[1])}function v(o){return!f(o[0])&&!f(o[1])}var m=O;X.exports=m},84811:function(X,z,e){var E=e(248070),F=e(912072),O=E.Line.prototype,M=E.BezierCurve.prototype;function b(T){return isNaN(+T.cpx1)||isNaN(+T.cpy1)}var L=E.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(T,C){this[b(C)?"_buildPathLine":"_buildPathCurve"](T,C)},_buildPathLine:O.buildPath,_buildPathCurve:M.buildPath,pointAt:function(T){return this[b(this.shape)?"_pointAtLine":"_pointAtCurve"](T)},_pointAtLine:O.pointAt,_pointAtCurve:M.pointAt,tangentAt:function(T){var C=this.shape,f=b(C)?[C.x2-C.x1,C.y2-C.y1]:this._tangentAtCurve(T);return F.normalize(f,f)},_tangentAtCurve:M.tangentAt});X.exports=L},35417:function(X,z,e){var E=e(248070),F=e(131879);function O(L,T,C){E.Group.call(this),this._createPolyline(L,T,C)}var M=O.prototype;M._createPolyline=function(L,T,C){var f=L.getItemLayout(T),v=new E.Polyline({shape:{points:f}});this.add(v),this._updateCommonStl(L,T,C)},M.updateData=function(L,T,C){var f=L.hostModel,v=this.childAt(0),m={shape:{points:L.getItemLayout(T)}};E.updateProps(v,m,f,T),this._updateCommonStl(L,T,C)},M._updateCommonStl=function(L,T,C){var f=this.childAt(0),v=L.getItemModel(T),m=L.getItemVisual(T,"color"),o=C&&C.lineStyle,h=C&&C.hoverLineStyle;(!C||L.hasItemOption)&&(o=v.getModel("lineStyle").getLineStyle(),h=v.getModel("emphasis.lineStyle").getLineStyle()),f.useStyle(F.defaults({strokeNoScale:!0,fill:"none",stroke:m},o)),f.hoverStyle=h,E.setHoverStyle(this)},M.updateLayout=function(L,T){var C=this.childAt(0);C.setShape("points",L.getItemLayout(T))},F.inherits(O,E.Group);var b=O;X.exports=b},513980:function(X,z,e){var E=e(131879),F=e(435730),O=F.createSymbol,M=e(248070),b=e(748354),L=b.parsePercent,T=e(303768),C=T.getDefaultLabel;function f(i,n,u){M.Group.call(this),this.updateData(i,n,u)}var v=f.prototype,m=f.getSymbolSize=function(i,n){var u=i.getItemVisual(n,"symbolSize");return u instanceof Array?u.slice():[+u,+u]};function o(i){return[i[0]/2,i[1]/2]}function h(i,n){this.parent.drift(i,n)}v._createSymbol=function(i,n,u,g,d){this.removeAll();var y=n.getItemVisual(u,"color"),p=O(i,-1,-1,2,2,y,d);p.attr({z2:100,culling:!0,scale:o(g)}),p.drift=h,this._symbolType=i,this.add(p)},v.stopSymbolAnimation=function(i){this.childAt(0).stopAnimation(i)},v.getSymbolPath=function(){return this.childAt(0)},v.getScale=function(){return this.childAt(0).scale},v.highlight=function(){this.childAt(0).trigger("emphasis")},v.downplay=function(){this.childAt(0).trigger("normal")},v.setZ=function(i,n){var u=this.childAt(0);u.zlevel=i,u.z=n},v.setDraggable=function(i){var n=this.childAt(0);n.draggable=i,n.cursor=i?"move":n.cursor},v.updateData=function(i,n,u){this.silent=!1;var g=i.getItemVisual(n,"symbol")||"circle",d=i.hostModel,y=m(i,n),p=g!==this._symbolType;if(p){var w=i.getItemVisual(n,"symbolKeepAspect");this._createSymbol(g,i,n,y,w)}else{var S=this.childAt(0);S.silent=!1,M.updateProps(S,{scale:o(y)},d,n)}if(this._updateCommon(i,n,y,u),p){var S=this.childAt(0),R=u&&u.fadeIn,B={scale:S.scale.slice()};R&&(B.style={opacity:S.style.opacity}),S.scale=[0,0],R&&(S.style.opacity=0),M.initProps(S,B,d,n)}this._seriesModel=d};var l=["itemStyle"],r=["emphasis","itemStyle"],s=["label"],c=["emphasis","label"];v._updateCommon=function(i,n,u,g){var d=this.childAt(0),y=i.hostModel,p=i.getItemVisual(n,"color");d.type!=="image"?d.useStyle({strokeNoScale:!0}):d.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var w=g&&g.itemStyle,S=g&&g.hoverItemStyle,R=g&&g.symbolOffset,B=g&&g.labelModel,k=g&&g.hoverLabelModel,P=g&&g.hoverAnimation,D=g&&g.cursorStyle;if(!g||i.hasItemOption){var A=g&&g.itemModel?g.itemModel:i.getItemModel(n);w=A.getModel(l).getItemStyle(["color"]),S=A.getModel(r).getItemStyle(),R=A.getShallow("symbolOffset"),B=A.getModel(s),k=A.getModel(c),P=A.getShallow("hoverAnimation"),D=A.getShallow("cursor")}else S=E.extend({},S);var N=d.style,I=i.getItemVisual(n,"symbolRotate");d.attr("rotation",(I||0)*Math.PI/180||0),R&&d.attr("position",[L(R[0],u[0]),L(R[1],u[1])]),D&&d.attr("cursor",D),d.setColor(p,g&&g.symbolInnerColor),d.setStyle(w);var G=i.getItemVisual(n,"opacity");G!=null&&(N.opacity=G);var W=i.getItemVisual(n,"liftZ"),Z=d.__z2Origin;W!=null?Z==null&&(d.__z2Origin=d.z2,d.z2+=W):Z!=null&&(d.z2=Z,d.__z2Origin=null);var H=g&&g.useNameLabel;M.setLabelStyle(N,S,B,k,{labelFetcher:y,labelDataIndex:n,defaultText:U,isRectText:!0,autoColor:p});function U(V,Y){return H?i.getName(V):C(i,V)}d.__symbolOriginalScale=o(u),d.hoverStyle=S,d.highDownOnUpdate=P&&y.isAnimationEnabled()?x:null,M.setHoverStyle(d)};function x(i,n){if(!(this.incremental||this.useHoverLayer))if(n==="emphasis"){var u=this.__symbolOriginalScale,g=u[1]/u[0],d={scale:[Math.max(u[0]*1.1,u[0]+3),Math.max(u[1]*1.1,u[1]+3*g)]};this.animateTo(d,400,"elasticOut")}else n==="normal"&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}v.fadeOut=function(i,n){var u=this.childAt(0);this.silent=u.silent=!0,!(n&&n.keepLabel)&&(u.style.text=null),M.updateProps(u,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,i)},E.inherits(f,M.Group);var a=f;X.exports=a},151724:function(X,z,e){var E=e(248070),F=e(513980),O=e(131879),M=O.isObject;function b(m){this.group=new E.Group,this._symbolCtor=m||F}var L=b.prototype;function T(m,o,h,l){return o&&!isNaN(o[0])&&!isNaN(o[1])&&!(l.isIgnore&&l.isIgnore(h))&&!(l.clipShape&&!l.clipShape.contain(o[0],o[1]))&&m.getItemVisual(h,"symbol")!=="none"}L.updateData=function(m,o){o=C(o);var h=this.group,l=m.hostModel,r=this._data,s=this._symbolCtor,c=f(m);r||h.removeAll(),m.diff(r).add(function(x){var a=m.getItemLayout(x);if(T(m,a,x,o)){var i=new s(m,x,c);i.attr("position",a),m.setItemGraphicEl(x,i),h.add(i)}}).update(function(x,a){var i=r.getItemGraphicEl(a),n=m.getItemLayout(x);if(!T(m,n,x,o)){h.remove(i);return}i?(i.updateData(m,x,c),E.updateProps(i,{position:n},l)):(i=new s(m,x),i.attr("position",n)),h.add(i),m.setItemGraphicEl(x,i)}).remove(function(x){var a=r.getItemGraphicEl(x);a&&a.fadeOut(function(){h.remove(a)})}).execute(),this._data=m},L.isPersistent=function(){return!0},L.updateLayout=function(){var m=this._data;m&&m.eachItemGraphicEl(function(o,h){var l=m.getItemLayout(h);o.attr("position",l)})},L.incrementalPrepareUpdate=function(m){this._seriesScope=f(m),this._data=null,this.group.removeAll()},L.incrementalUpdate=function(m,o,h){h=C(h);function l(x){x.isGroup||(x.incremental=x.useHoverLayer=!0)}for(var r=m.start;r<m.end;r++){var s=o.getItemLayout(r);if(T(o,s,r,h)){var c=new this._symbolCtor(o,r,this._seriesScope);c.traverse(l),c.attr("position",s),this.group.add(c),o.setItemGraphicEl(r,c)}}};function C(m){return m!=null&&!M(m)&&(m={isIgnore:m}),m||{}}L.remove=function(m){var o=this.group,h=this._data;h&&m?h.eachItemGraphicEl(function(l){l.fadeOut(function(){o.remove(l)})}):o.removeAll()};function f(m){var o=m.hostModel;return{itemStyle:o.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:o.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:o.get("symbolRotate"),symbolOffset:o.get("symbolOffset"),hoverAnimation:o.get("hoverAnimation"),labelModel:o.getModel("label"),hoverLabelModel:o.getModel("emphasis.label"),cursorStyle:o.get("cursor")}}var v=b;X.exports=v},629686:function(X,z,e){var E=e(248070),F=e(748354),O=F.round;function M(T,C,f){var v=T.getArea(),m=T.getBaseAxis().isHorizontal(),o=v.x,h=v.y,l=v.width,r=v.height,s=f.get("lineStyle.width")||2;o-=s/2,h-=s/2,l+=s,r+=s,o=Math.floor(o),l=Math.round(l);var c=new E.Rect({shape:{x:o,y:h,width:l,height:r}});return C&&(c.shape[m?"width":"height"]=0,E.initProps(c,{shape:{width:l,height:r}},f)),c}function b(T,C,f){var v=T.getArea(),m=new E.Sector({shape:{cx:O(T.cx,1),cy:O(T.cy,1),r0:O(v.r0,1),r:O(v.r,1),startAngle:v.startAngle,endAngle:v.endAngle,clockwise:v.clockwise}});return C&&(m.shape.endAngle=v.startAngle,E.initProps(m,{shape:{endAngle:v.endAngle}},f)),m}function L(T,C,f){if(T){if(T.type==="polar")return b(T,C,f);if(T.type==="cartesian2d")return M(T,C,f)}else return null;return null}z.createGridClipPath=M,z.createPolarClipPath=b,z.createClipPath=L},631323:function(X,z,e){var E=e(131879),F=e(58677),O=e(131517),M=e(185567),b=e(480554),L=e(348642),T=e(901664);function C(f,v,m,o,h){for(var l=new O(o),r=0;r<f.length;r++)l.addNode(E.retrieve(f[r].id,f[r].name,r),r);for(var s=[],c=[],x=0,r=0;r<v.length;r++){var a=v[r],i=a.source,n=a.target;l.addEdge(i,n,x)&&(c.push(a),s.push(E.retrieve(a.id,i+" > "+n)),x++)}var u=m.get("coordinateSystem"),g;if(u==="cartesian2d"||u==="polar")g=T(f,m);else{var d=L.get(u),y=d&&d.type!=="view"?d.dimensions||[]:[];E.indexOf(y,"value")<0&&y.concat(["value"]);var p=b(f,{coordDimensions:y});g=new F(p,m),g.initData(f)}var w=new F(["value"],m);return w.initData(c,s),h&&h(g,w),M({mainData:g,struct:l,structAttr:"graph",datas:{node:g,edge:w},datasAttr:{node:"data",edge:"edgeData"}}),l.update(),l}X.exports=C},901664:function(X,z,e){var E=e(131879),F=e(58677),O=e(480554),M=e(317233),b=M.SOURCE_FORMAT_ORIGINAL,L=e(317071),T=L.getDimensionTypeByAxis,C=e(835454),f=C.getDataItemValue,v=e(348642),m=e(27499),o=m.getCoordSysInfoBySeries,h=e(304345),l=e(553618),r=l.enableDataStack,s=e(543036),c=s.makeSeriesEncodeForAxisCoordSys;function x(u,g,d){d=d||{},h.isInstance(u)||(u=h.seriesDataToSource(u));var y=g.get("coordinateSystem"),p=v.get(y),w=o(g),S;w&&(S=E.map(w.coordSysDims,function(N){var I={name:N},G=w.axisMap.get(N);if(G){var W=G.get("type");I.type=T(W)}return I})),S||(S=p&&(p.getDimensionsInfo?p.getDimensionsInfo():p.dimensions.slice())||["x","y"]);var R=O(u,{coordDimensions:S,generateCoord:d.generateCoord,encodeDefaulter:d.useEncodeDefaulter?E.curry(c,S,g):null}),B,k;w&&E.each(R,function(N,I){var G=N.coordDim,W=w.categoryAxisMap.get(G);W&&(B==null&&(B=I),N.ordinalMeta=W.getOrdinalMeta()),N.otherDims.itemName!=null&&(k=!0)}),!k&&B!=null&&(R[B].otherDims.itemName=0);var P=r(g,R),D=new F(R,g);D.setCalculationInfo(P);var A=B!=null&&a(u)?function(N,I,G,W){return W===B?G:this.defaultDimValueGetter(N,I,G,W)}:null;return D.hasItemOption=!1,D.initData(u,null,A),D}function a(u){if(u.sourceFormat===b){var g=i(u.data||[]);return g!=null&&!E.isArray(f(g))}}function i(u){for(var g=0;g<u.length&&u[g]==null;)g++;return u[g]}var n=x;X.exports=n},642347:function(X,z,e){var E=e(480554),F=e(58677),O=e(131879),M=O.extend,b=O.isArray;function L(T,C,f){C=b(C)&&{coordDimensions:C}||M({},C);var v=T.getSource(),m=E(v,C),o=new F(m,T);return o.initData(v,f),o}X.exports=L},250629:function(X,z,e){var E=e(835454),F=E.makeInner;function O(){var M=F();return function(b){var L=M(b),T=b.pipelineContext,C=L.large,f=L.progressiveRender,v=L.large=T&&T.large,m=L.progressiveRender=T&&T.progressiveRender;return!!(C^v||f^m)&&"reset"}}X.exports=O},479722:function(X,z,e){var E=e(3440);E.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),E.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){})},303768:function(X,z,e){var E=e(858708),F=E.retrieveRawValue;function O(M,b){var L=M.mapDimension("defaultedLabel",!0),T=L.length;if(T===1)return F(M,b,L[0]);if(T){for(var C=[],f=0;f<L.length;f++){var v=F(M,b,L[f]);C.push(v)}return C.join(" ")}}z.getDefaultLabel=O},737498:function(X,z,e){var E=e(131879),F="-->",O=function(h){return h.get("autoCurveness")||null},M=function(h,l){var r=O(h),s=20,c=[];if(typeof r=="number")s=r;else if(E.isArray(r)){h.__curvenessList=r;return}l>s&&(s=l);var x=s%2?s+2:s+3;c=[];for(var a=0;a<x;a++)c.push((a%2?a+1:a)/10*(a%2?-1:1));h.__curvenessList=c},b=function(h,l,r){var s=[h.id,h.dataIndex].join("."),c=[l.id,l.dataIndex].join(".");return[r.uid,s,c].join(F)},L=function(h){var l=h.split(F);return[l[0],l[2],l[1]].join(F)},T=function(h,l){var r=b(h.node1,h.node2,l);return l.__edgeMap[r]},C=function(h,l){var r=f(b(h.node1,h.node2,l),l),s=f(b(h.node2,h.node1,l),l);return r+s},f=function(h,l){var r=l.__edgeMap;return r[h]?r[h].length:0};function v(h){O(h)&&(h.__curvenessList=[],h.__edgeMap={},M(h))}function m(h,l,r,s){if(O(r)){var c=b(h,l,r),x=r.__edgeMap,a=x[L(c)];x[c]&&!a?x[c].isForward=!0:a&&x[c]&&(a.isForward=!0,x[c].isForward=!1),x[c]=x[c]||[],x[c].push(s)}}function o(h,l,r,s){var c=O(l),x=E.isArray(c);if(!c)return null;var a=T(h,l);if(!a)return null;for(var i=-1,n=0;n<a.length;n++)if(a[n]===r){i=n;break}var u=C(h,l);M(l,u),h.lineStyle=h.lineStyle||{};var g=b(h.node1,h.node2,l),d=l.__curvenessList,y=x||u%2?0:1;if(a.isForward)return d[y+i];var p=L(g),w=f(p,l),S=d[i+w+y];return s?x?c&&c[0]===0?(w+y)%2?S:-S:((w%2?0:1)+y)%2?S:-S:(w+y)%2?S:-S:d[i+w+y]}z.initCurvenessList=v,z.createEdgeMapForCurveness=m,z.getCurvenessForEdge=o},300998:function(X,z,e){var E=e(131879);function F(L,T,C){if(L&&E.indexOf(T,L.type)>=0){var f=C.getData().tree.root,v=L.targetNode;if(typeof v=="string"&&(v=f.getNodeById(v)),v&&f.contains(v))return{node:v};var m=L.targetNodeId;if(m!=null&&(v=f.getNodeById(m)))return{node:v}}}function O(L){for(var T=[];L;)L=L.parentNode,L&&T.push(L);return T.reverse()}function M(L,T){var C=O(L);return E.indexOf(C,T)>=0}function b(L,T){for(var C=[];L;){var f=L.dataIndex;C.push({name:L.name,dataIndex:f,value:T.getRawValue(f)}),L=L.parentNode}return C.reverse(),C}z.retrieveTargetInfo=F,z.getPathToRoot=O,z.aboveViewRoot=M,z.wrapTreePathInfo=b},89184:function(X,z,e){var E=e(642347),F=e(131879),O=e(317071),M=O.getDimensionTypeByAxis,b=e(543036),L=b.makeSeriesEncodeForAxisCoordSys,T={_baseAxisDim:null,getInitialData:function(C,f){var v,m=f.getComponent("xAxis",this.get("xAxisIndex")),o=f.getComponent("yAxis",this.get("yAxisIndex")),h=m.get("type"),l=o.get("type"),r;h==="category"?(C.layout="horizontal",v=m.getOrdinalMeta(),r=!0):l==="category"?(C.layout="vertical",v=o.getOrdinalMeta(),r=!0):C.layout=C.layout||"horizontal";var s=["x","y"],c=C.layout==="horizontal"?0:1,x=this._baseAxisDim=s[c],a=s[1-c],i=[m,o],n=i[c].get("type"),u=i[1-c].get("type"),g=C.data;if(g&&r){var d=[];F.each(g,function(w,S){var R;w.value&&F.isArray(w.value)?(R=w.value.slice(),w.value.unshift(S)):F.isArray(w)?(R=w.slice(),w.unshift(S)):R=w,d.push(R)}),C.data=d}var y=this.defaultValueDimensions,p=[{name:x,type:M(n),ordinalMeta:v,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:a,type:M(u),dimsDef:y.slice()}];return E(this,{coordDimensions:p,dimensionsCount:y.length+1,encodeDefaulter:F.curry(L,p,this)})},getBaseAxis:function(){var C=this._baseAxisDim;return this.ecModel.getComponent(C+"Axis",this.get(C+"AxisIndex")).axis}};z.seriesModelMixin=T},923184:function(X,z,e){var E=e(3440);e(91),e(256171);var F=e(341124),O=e(275028),M=e(33064);e(615367),E.registerVisual(F("line","circle","line")),E.registerLayout(O("line")),E.registerProcessor(E.PRIORITY.PROCESSOR.STATISTIC,M("line"))},91:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(901664),M=e(502365),b=M.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(L,T){return O(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});X.exports=b},256171:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(18644),b=M.fromPoints,L=e(151724),T=e(513980),C=e(461498),f=e(248070),v=e(835454),m=e(669036),o=m.Polyline,h=m.Polygon,l=e(901911),r=e(187873),s=r.prepareDataCoordInfo,c=r.getStackedOnPoint,x=e(629686),a=x.createGridClipPath,i=x.createPolarClipPath;function n(k,P){if(k.length===P.length){for(var D=0;D<k.length;D++){var A=k[D],N=P[D];if(A[0]!==N[0]||A[1]!==N[1])return}return!0}}function u(k,P){var D=[],A=[],N=[],I=[];return b(k,D,A),b(P,N,I),Math.max(Math.abs(D[0]-N[0]),Math.abs(D[1]-N[1]),Math.abs(A[0]-I[0]),Math.abs(A[1]-I[1]))}function g(k){return typeof k=="number"?k:k?.5:0}function d(k,P,D){if(!D.valueDim)return[];for(var A=[],N=0,I=P.count();N<I;N++)A.push(c(D,k,P,N));return A}function y(k,P,D){for(var A=P.getBaseAxis(),N=A.dim==="x"||A.dim==="radius"?0:1,I=[],G=0;G<k.length-1;G++){var W=k[G+1],Z=k[G];I.push(Z);var H=[];switch(D){case"end":H[N]=W[N],H[1-N]=Z[1-N],I.push(H);break;case"middle":var U=(Z[N]+W[N])/2,V=[];H[N]=V[N]=U,H[1-N]=Z[1-N],V[1-N]=W[1-N],I.push(H),I.push(V);break;default:H[N]=Z[N],H[1-N]=W[1-N],I.push(H)}}return k[G]&&I.push(k[G]),I}function p(k,P){var D=k.getVisual("visualMeta");if(!(!D||!D.length||!k.count())&&P.type==="cartesian2d"){for(var A,N,I=D.length-1;I>=0;I--){var G=D[I].dimension,W=k.dimensions[G],Z=k.getDimensionInfo(W);if(A=Z&&Z.coordDim,A==="x"||A==="y"){N=D[I];break}}if(N){var H=P.getAxis(A),U=O.map(N.stops,function(nt){return{coord:H.toGlobalCoord(H.dataToCoord(nt.value)),color:nt.color}}),V=U.length,Y=N.outerColors.slice();V&&U[0].coord>U[V-1].coord&&(U.reverse(),Y.reverse());var $=10,K=U[0].coord-$,J=U[V-1].coord+$,Q=J-K;if(Q<.001)return"transparent";O.each(U,function(nt){nt.offset=(nt.coord-K)/Q}),U.push({offset:V?U[V-1].offset:.5,color:Y[1]||"transparent"}),U.unshift({offset:V?U[0].offset:.5,color:Y[0]||"transparent"});var et=new f.LinearGradient(0,0,0,0,U,!0);return et[A]=K,et[A+"2"]=J,et}}}function w(k,P,D){var A=k.get("showAllSymbol"),N=A==="auto";if(!(A&&!N)){var I=D.getAxesByScale("ordinal")[0];if(I&&!(N&&S(I,P))){var G=P.mapDimension(I.dim),W={};return O.each(I.getViewLabels(),function(Z){W[Z.tickValue]=1}),function(Z){return!W.hasOwnProperty(P.get(G,Z))}}}}function S(k,P){var D=k.getExtent(),A=Math.abs(D[1]-D[0])/k.scale.count();isNaN(A)&&(A=0);for(var N=P.count(),I=Math.max(1,Math.round(N/5)),G=0;G<N;G+=I)if(T.getSymbolSize(P,G)[k.isHorizontal()?1:0]*1.5>A)return!1;return!0}function R(k,P,D){if(k.type==="cartesian2d"){var A=k.getBaseAxis().isHorizontal(),N=a(k,P,D);if(!D.get("clip",!0)){var I=N.shape,G=Math.max(I.width,I.height);A?(I.y-=G,I.height+=G*2):(I.x-=G,I.width+=G*2)}return N}else return i(k,P,D)}var B=l.extend({type:"line",init:function(){var k=new f.Group,P=new L;this.group.add(P.group),this._symbolDraw=P,this._lineGroup=k},render:function(k,P,D){var A=k.coordinateSystem,N=this.group,I=k.getData(),G=k.getModel("lineStyle"),W=k.getModel("areaStyle"),Z=I.mapArray(I.getItemLayout),H=A.type==="polar",U=this._coordSys,V=this._symbolDraw,Y=this._polyline,$=this._polygon,K=this._lineGroup,J=k.get("animation"),Q=!W.isEmpty(),et=W.get("origin"),nt=s(A,I,et),st=d(A,I,nt),ut=k.get("showSymbol"),rt=ut&&!H&&w(k,I,A),ht=this._data;ht&&ht.eachItemGraphicEl(function(Tt,mt){Tt.__temp&&(N.remove(Tt),ht.setItemGraphicEl(mt,null))}),ut||V.remove(),N.add(K);var Pt=!H&&k.get("step"),wt;A&&A.getArea&&k.get("clip",!0)&&(wt=A.getArea(),wt.width!=null?(wt.x-=.1,wt.y-=.1,wt.width+=.2,wt.height+=.2):wt.r0&&(wt.r0-=.5,wt.r1+=.5)),this._clipShapeForSymbol=wt,Y&&U.type===A.type&&Pt===this._step?(Q&&!$?$=this._newPolygon(Z,st,A,J):$&&!Q&&(K.remove($),$=this._polygon=null),K.setClipPath(R(A,!1,k)),ut&&V.updateData(I,{isIgnore:rt,clipShape:wt}),I.eachItemGraphicEl(function(Tt){Tt.stopAnimation(!0)}),(!n(this._stackedOnPoints,st)||!n(this._points,Z))&&(J?this._updateAnimation(I,st,A,D,Pt,et):(Pt&&(Z=y(Z,A,Pt),st=y(st,A,Pt)),Y.setShape({points:Z}),$&&$.setShape({points:Z,stackedOnPoints:st})))):(ut&&V.updateData(I,{isIgnore:rt,clipShape:wt}),Pt&&(Z=y(Z,A,Pt),st=y(st,A,Pt)),Y=this._newPolyline(Z,A,J),Q&&($=this._newPolygon(Z,st,A,J)),K.setClipPath(R(A,!0,k)));var Mt=p(I,A)||I.getVisual("color");Y.useStyle(O.defaults(G.getLineStyle(),{fill:"none",stroke:Mt,lineJoin:"bevel"}));var Ft=k.get("smooth");if(Ft=g(k.get("smooth")),Y.setShape({smooth:Ft,smoothMonotone:k.get("smoothMonotone"),connectNulls:k.get("connectNulls")}),$){var Dt=I.getCalculationInfo("stackedOnSeries"),Rt=0;$.useStyle(O.defaults(W.getAreaStyle(),{fill:Mt,opacity:.7,lineJoin:"bevel"})),Dt&&(Rt=g(Dt.get("smooth"))),$.setShape({smooth:Ft,stackedOnSmooth:Rt,smoothMonotone:k.get("smoothMonotone"),connectNulls:k.get("connectNulls")})}this._data=I,this._coordSys=A,this._stackedOnPoints=st,this._points=Z,this._step=Pt,this._valueOrigin=et},dispose:function(){},highlight:function(k,P,D,A){var N=k.getData(),I=v.queryDataIndex(N,A);if(!(I instanceof Array)&&I!=null&&I>=0){var G=N.getItemGraphicEl(I);if(!G){var W=N.getItemLayout(I);if(!W||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(W[0],W[1]))return;G=new T(N,I),G.position=W,G.setZ(k.get("zlevel"),k.get("z")),G.ignore=isNaN(W[0])||isNaN(W[1]),G.__temp=!0,N.setItemGraphicEl(I,G),G.stopSymbolAnimation(!0),this.group.add(G)}G.highlight()}else l.prototype.highlight.call(this,k,P,D,A)},downplay:function(k,P,D,A){var N=k.getData(),I=v.queryDataIndex(N,A);if(I!=null&&I>=0){var G=N.getItemGraphicEl(I);G&&(G.__temp?(N.setItemGraphicEl(I,null),this.group.remove(G)):G.downplay())}else l.prototype.downplay.call(this,k,P,D,A)},_newPolyline:function(k){var P=this._polyline;return P&&this._lineGroup.remove(P),P=new o({shape:{points:k},silent:!0,z2:10}),this._lineGroup.add(P),this._polyline=P,P},_newPolygon:function(k,P){var D=this._polygon;return D&&this._lineGroup.remove(D),D=new h({shape:{points:k,stackedOnPoints:P},silent:!0}),this._lineGroup.add(D),this._polygon=D,D},_updateAnimation:function(k,P,D,A,N,I){var G=this._polyline,W=this._polygon,Z=k.hostModel,H=C(this._data,k,this._stackedOnPoints,P,this._coordSys,D,this._valueOrigin,I),U=H.current,V=H.stackedOnCurrent,Y=H.next,$=H.stackedOnNext;if(N&&(U=y(H.current,D,N),V=y(H.stackedOnCurrent,D,N),Y=y(H.next,D,N),$=y(H.stackedOnNext,D,N)),u(U,Y)>3e3||W&&u(V,$)>3e3){G.setShape({points:Y}),W&&W.setShape({points:Y,stackedOnPoints:$});return}G.shape.__points=H.current,G.shape.points=U,f.updateProps(G,{shape:{points:Y}},Z),W&&(W.setShape({points:U,stackedOnPoints:V}),f.updateProps(W,{shape:{points:Y,stackedOnPoints:$}},Z));for(var K=[],J=H.status,Q=0;Q<J.length;Q++){var et=J[Q].cmd;if(et==="="){var nt=k.getItemGraphicEl(J[Q].idx1);nt&&K.push({el:nt,ptIdx:Q})}}G.animators&&G.animators.length&&G.animators[0].during(function(){for(var st=0;st<K.length;st++){var ut=K[st].el;ut.attr("position",G.shape.__points[K[st].ptIdx])}})},remove:function(k){var P=this.group,D=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),D&&D.eachItemGraphicEl(function(A,N){A.__temp&&(P.remove(A),D.setItemGraphicEl(N,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});X.exports=B},187873:function(X,z,e){var E=e(553618),F=E.isDimensionStacked,O=e(131879),M=O.map;function b(C,f,v){var m=C.getBaseAxis(),o=C.getOtherAxis(m),h=L(o,v),l=m.dim,r=o.dim,s=f.mapDimension(r),c=f.mapDimension(l),x=r==="x"||r==="radius"?1:0,a=M(C.dimensions,function(u){return f.mapDimension(u)}),i,n=f.getCalculationInfo("stackResultDimension");return(i|=F(f,a[0]))&&(a[0]=n),(i|=F(f,a[1]))&&(a[1]=n),{dataDimsForPoint:a,valueStart:h,valueAxisDim:r,baseAxisDim:l,stacked:!!i,valueDim:s,baseDim:c,baseDataOffset:x,stackedOverDimension:f.getCalculationInfo("stackedOverDimension")}}function L(C,f){var v=0,m=C.scale.getExtent();return f==="start"?v=m[0]:f==="end"?v=m[1]:m[0]>0?v=m[0]:m[1]<0&&(v=m[1]),v}function T(C,f,v,m){var o=NaN;C.stacked&&(o=v.get(v.getCalculationInfo("stackedOverDimension"),m)),isNaN(o)&&(o=C.valueStart);var h=C.baseDataOffset,l=[];return l[h]=v.get(C.baseDim,m),l[1-h]=o,f.dataToPoint(l)}z.prepareDataCoordInfo=b,z.getStackedOnPoint=T},461498:function(X,z,e){var E=e(187873),F=E.prepareDataCoordInfo,O=E.getStackedOnPoint;function M(L,T){var C=[];return T.diff(L).add(function(f){C.push({cmd:"+",idx:f})}).update(function(f,v){C.push({cmd:"=",idx:v,idx1:f})}).remove(function(f){C.push({cmd:"-",idx:f})}).execute(),C}function b(L,T,C,f,v,m,o,h){for(var l=M(L,T),r=[],s=[],c=[],x=[],a=[],i=[],n=[],u=F(v,T,o),g=F(m,L,h),d=0;d<l.length;d++){var y=l[d],p=!0;switch(y.cmd){case"=":var w=L.getItemLayout(y.idx),S=T.getItemLayout(y.idx1);(isNaN(w[0])||isNaN(w[1]))&&(w=S.slice()),r.push(w),s.push(S),c.push(C[y.idx]),x.push(f[y.idx1]),n.push(T.getRawIndex(y.idx1));break;case"+":var R=y.idx;r.push(v.dataToPoint([T.get(u.dataDimsForPoint[0],R),T.get(u.dataDimsForPoint[1],R)])),s.push(T.getItemLayout(R).slice()),c.push(O(u,v,T,R)),x.push(f[R]),n.push(T.getRawIndex(R));break;case"-":var R=y.idx,B=L.getRawIndex(R);B!==R?(r.push(L.getItemLayout(R)),s.push(m.dataToPoint([L.get(g.dataDimsForPoint[0],R),L.get(g.dataDimsForPoint[1],R)])),c.push(C[R]),x.push(O(g,m,L,R)),n.push(B)):p=!1}p&&(a.push(y),i.push(i.length))}i.sort(function(I,G){return n[I]-n[G]});for(var k=[],P=[],D=[],A=[],N=[],d=0;d<i.length;d++){var R=i[d];k[d]=r[R],P[d]=s[R],D[d]=c[R],A[d]=x[R],N[d]=a[R]}return{current:k,next:P,stackedOnCurrent:D,stackedOnNext:A,status:N}}X.exports=b},669036:function(X,z,e){var E=e(254904),F=e(912072),O=e(207805),M=F.min,b=F.max,L=F.scaleAndAdd,T=F.copy,C=[],f=[],v=[];function m(x){return isNaN(x[0])||isNaN(x[1])}function o(x,a,i,n,u,g,d,y,p,w,S){return w==="none"||!w?l.apply(this,arguments):h.apply(this,arguments)}function h(x,a,i,n,u,g,d,y,p,w,S){for(var R=0,B=i,k=0;k<n;k++){var P=a[B];if(B>=u||B<0)break;if(m(P)){if(S){B+=g;continue}break}if(B===i)x[g>0?"moveTo":"lineTo"](P[0],P[1]);else if(p>0){var D=a[R],A=w==="y"?1:0,N=(P[A]-D[A])*p;T(f,D),f[A]=D[A]+N,T(v,P),v[A]=P[A]-N,x.bezierCurveTo(f[0],f[1],v[0],v[1],P[0],P[1])}else x.lineTo(P[0],P[1]);R=B,B+=g}return k}function l(x,a,i,n,u,g,d,y,p,w,S){for(var R=0,B=i,k=0;k<n;k++){var P=a[B];if(B>=u||B<0)break;if(m(P)){if(S){B+=g;continue}break}if(B===i)x[g>0?"moveTo":"lineTo"](P[0],P[1]),T(f,P);else if(p>0){var D=B+g,I=a[D];if(S)for(;I&&m(a[D]);)D+=g,I=a[D];var A=.5,N=a[R],I=a[D];if(!I||m(I))T(v,P);else{m(I)&&!S&&(I=P),F.sub(C,I,N);var G,W;if(w==="x"||w==="y"){var Z=w==="x"?0:1;G=Math.abs(P[Z]-N[Z]),W=Math.abs(P[Z]-I[Z])}else G=F.dist(P,N),W=F.dist(P,I);A=W/(W+G),L(v,P,C,-p*(1-A))}M(f,f,y),b(f,f,d),M(v,v,y),b(v,v,d),x.bezierCurveTo(f[0],f[1],v[0],v[1],P[0],P[1]),L(f,P,C,p*A)}else x.lineTo(P[0],P[1]);R=B,B+=g}return k}function r(x,a){var i=[1/0,1/0],n=[-1/0,-1/0];if(a)for(var u=0;u<x.length;u++){var g=x[u];g[0]<i[0]&&(i[0]=g[0]),g[1]<i[1]&&(i[1]=g[1]),g[0]>n[0]&&(n[0]=g[0]),g[1]>n[1]&&(n[1]=g[1])}return{min:a?i:n,max:a?n:i}}var s=E.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:O(E.prototype.brush),buildPath:function(x,a){var i=a.points,n=0,u=i.length,g=r(i,a.smoothConstraint);if(a.connectNulls){for(;u>0&&m(i[u-1]);u--);for(;n<u&&m(i[n]);n++);}for(;n<u;)n+=o(x,i,n,u,u,1,g.min,g.max,a.smooth,a.smoothMonotone,a.connectNulls)+1}}),c=E.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:O(E.prototype.brush),buildPath:function(x,a){var i=a.points,n=a.stackedOnPoints,u=0,g=i.length,d=a.smoothMonotone,y=r(i,a.smoothConstraint),p=r(n,a.smoothConstraint);if(a.connectNulls){for(;g>0&&m(i[g-1]);g--);for(;u<g&&m(i[u]);u++);}for(;u<g;){var w=o(x,i,u,g,g,1,y.min,y.max,a.smooth,d,a.connectNulls);o(x,n,u+w-1,w,g,-1,p.min,p.max,a.stackedOnSmooth,d,a.connectNulls),u+=w+1,x.closePath()}}});z.Polyline=s,z.Polygon=c},553088:function(X,z,e){var E=e(3440);e(744163),e(924970);var F=e(190360),O=e(870945);E.registerLayout(F),E.registerVisual(O)},744163:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(502365),M=e(58677),b=e(131879),L=b.concatArray,T=b.mergeAll,C=b.map,f=e(317795),v=f.encodeHTML,m=e(348642),o=typeof Uint32Array>"u"?Array:Uint32Array,h=typeof Float64Array>"u"?Array:Float64Array;function l(c){var x=c.data;x&&x[0]&&x[0][0]&&x[0][0].coord&&(c.data=C(x,function(a){var i=[a[0].coord,a[1].coord],n={coords:i};return a[0].name&&(n.fromName=a[0].name),a[1].name&&(n.toName=a[1].name),T([n,a[0],a[1]])}))}var r=O.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(c){c.data=c.data||[],l(c);var x=this._processFlatCoordsArray(c.data);this._flatCoords=x.flatCoords,this._flatCoordsOffset=x.flatCoordsOffset,x.flatCoords&&(c.data=new Float32Array(x.count)),r.superApply(this,"init",arguments)},mergeOption:function(c){if(l(c),c.data){var x=this._processFlatCoordsArray(c.data);this._flatCoords=x.flatCoords,this._flatCoordsOffset=x.flatCoordsOffset,x.flatCoords&&(c.data=new Float32Array(x.count))}r.superApply(this,"mergeOption",arguments)},appendData:function(c){var x=this._processFlatCoordsArray(c.data);x.flatCoords&&(this._flatCoords?(this._flatCoords=L(this._flatCoords,x.flatCoords),this._flatCoordsOffset=L(this._flatCoordsOffset,x.flatCoordsOffset)):(this._flatCoords=x.flatCoords,this._flatCoordsOffset=x.flatCoordsOffset),c.data=new Float32Array(x.count)),this.getRawData().appendData(c.data)},_getCoordsFromItemModel:function(c){var x=this.getData().getItemModel(c),a=x.option instanceof Array?x.option:x.getShallow("coords");return a},getLineCoordsCount:function(c){return this._flatCoordsOffset?this._flatCoordsOffset[c*2+1]:this._getCoordsFromItemModel(c).length},getLineCoords:function(c,x){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[c*2],i=this._flatCoordsOffset[c*2+1],n=0;n<i;n++)x[n]=x[n]||[],x[n][0]=this._flatCoords[a+n*2],x[n][1]=this._flatCoords[a+n*2+1];return i}else{for(var u=this._getCoordsFromItemModel(c),n=0;n<u.length;n++)x[n]=x[n]||[],x[n][0]=u[n][0],x[n][1]=u[n][1];return u.length}},_processFlatCoordsArray:function(c){var x=0;if(this._flatCoords&&(x=this._flatCoords.length),typeof c[0]=="number"){for(var a=c.length,i=new o(a),n=new h(a),u=0,g=0,d=0,y=0;y<a;){d++;var p=c[y++];i[g++]=u+x,i[g++]=p;for(var w=0;w<p;w++){var S=c[y++],R=c[y++];n[u++]=S,n[u++]=R,y>a}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,g),flatCoords:n,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:c.length}},getInitialData:function(c,x){var a=new M(["value"],this);return a.hasItemOption=!1,a.initData(c.data,[],function(i,n,u,g){if(i instanceof Array)return NaN;a.hasItemOption=!0;var d=i.value;if(d!=null)return d instanceof Array?d[g]:d}),a},formatTooltip:function(c){var x=this.getData(),a=x.getItemModel(c),i=a.get("name");if(i)return i;var n=a.get("fromName"),u=a.get("toName"),g=[];return n!=null&&g.push(n),u!=null&&g.push(u),v(g.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var c=this.option.progressive;return c??(this.option.large?1e4:this.get("progressive"))},getProgressiveThreshold:function(){var c=this.option.progressiveThreshold;return c??(this.option.large?2e4:this.get("progressiveThreshold"))},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}),s=r;X.exports=s},924970:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(89264),b=e(600813),L=e(443959),T=e(35417),C=e(424105),f=e(714305),v=e(190360),m=e(629686),o=m.createClipPath,h=O.extendChartView({type:"lines",init:function(){},render:function(l,r,s){var c=l.getData(),x=this._updateLineDraw(c,l),a=l.get("zlevel"),i=l.get("effect.trailLength"),n=s.getZr(),u=n.painter.getType()==="svg";u||n.painter.getLayer(a).clear(!0),this._lastZlevel!=null&&!u&&n.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(l)&&i&&(u||n.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(i/10+.9,1),0)})),x.updateData(c);var g=l.get("clip",!0)&&o(l.coordinateSystem,!1,l);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(l,r,s){var c=l.getData(),x=this._updateLineDraw(c,l);x.incrementalPrepareUpdate(c),this._clearLayer(s),this._finished=!1},incrementalRender:function(l,r,s){this._lineDraw.incrementalUpdate(l,r.getData()),this._finished=l.end===r.getData().count()},updateTransform:function(l,r,s){var c=l.getData(),x=l.pipelineContext;if(!this._finished||x.large||x.progressiveRender)return{update:!0};var a=v.reset(l);a.progress&&a.progress({start:0,end:c.count()},c),this._lineDraw.updateLayout(),this._clearLayer(s)},_updateLineDraw:function(l,r){var s=this._lineDraw,c=this._showEffect(r),x=!!r.get("polyline"),a=r.pipelineContext,i=a.large;return(!s||c!==this._hasEffet||x!==this._isPolyline||i!==this._isLargeDraw)&&(s&&s.remove(),s=this._lineDraw=i?new f:new M(x?c?C:T:c?b:L),this._hasEffet=c,this._isPolyline=x,this._isLargeDraw=i,this.group.removeAll()),this.group.add(s.group),s},_showEffect:function(l){return!!l.get("effect.show")},_clearLayer:function(l){var r=l.getZr(),s=r.painter.getType()==="svg";!s&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(l,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},dispose:function(){}});X.exports=h},190360:function(X,z,e){var E=e(250629),F={seriesType:"lines",plan:E(),reset:function(O){var M=O.coordinateSystem,b=O.get("polyline"),L=O.pipelineContext.large;function T(C,f){var v=[];if(L){var m,o=C.end-C.start;if(b){for(var h=0,l=C.start;l<C.end;l++)h+=O.getLineCoordsCount(l);m=new Float32Array(o+h*2)}else m=new Float32Array(o*4);for(var r=0,s=[],l=C.start;l<C.end;l++){var c=O.getLineCoords(l,v);b&&(m[r++]=c);for(var x=0;x<c;x++)s=M.dataToPoint(v[x],!1,s),m[r++]=s[0],m[r++]=s[1]}f.setLayout("linesPoints",m)}else for(var l=C.start;l<C.end;l++){var a=f.getItemModel(l),c=O.getLineCoords(l,v),i=[];if(b)for(var n=0;n<c;n++)i.push(M.dataToPoint(v[n]));else{i[0]=M.dataToPoint(v[0]),i[1]=M.dataToPoint(v[1]);var u=a.get("lineStyle.curveness");+u&&(i[2]=[(i[0][0]+i[1][0])/2-(i[0][1]-i[1][1])*u,(i[0][1]+i[1][1])/2-(i[1][0]-i[0][0])*u])}f.setItemLayout(l,i)}}return{progress:T}}};X.exports=F},870945:function(X){function z(F){return F instanceof Array||(F=[F,F]),F}var e="lineStyle.opacity".split("."),E={seriesType:"lines",reset:function(F,O,M){var b=z(F.get("symbol")),L=z(F.get("symbolSize")),T=F.getData();T.setVisual("fromSymbol",b&&b[0]),T.setVisual("toSymbol",b&&b[1]),T.setVisual("fromSymbolSize",L&&L[0]),T.setVisual("toSymbolSize",L&&L[1]),T.setVisual("opacity",F.get(e));function C(f,v){var m=f.getItemModel(v),o=z(m.getShallow("symbol",!0)),h=z(m.getShallow("symbolSize",!0)),l=m.get(e);o[0]&&f.setItemVisual(v,"fromSymbol",o[0]),o[1]&&f.setItemVisual(v,"toSymbol",o[1]),h[0]&&f.setItemVisual(v,"fromSymbolSize",h[0]),h[1]&&f.setItemVisual(v,"toSymbolSize",h[1]),f.setItemVisual(v,"opacity",l)}return{dataEach:T.hasItemOption?C:null}}};X.exports=E},987387:function(X,z,e){var E=e(3440);e(534738),e(305027),e(933894),e(727547);var F=e(65887),O=e(21004),M=e(595501),b=e(511699),L=e(109652);E.registerLayout(F),E.registerVisual(O),E.registerProcessor(E.PRIORITY.PROCESSOR.STATISTIC,M),E.registerPreprocessor(b),L("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])},534738:function(X,z,e){var E=e(131879),F=e(642347),O=e(502365),M=e(317795),b=M.encodeHTML,L=M.addCommas,T=e(314748),C=e(858708),f=C.retrieveRawAttr,v=e(308590),m=e(543036),o=m.makeSeriesEncodeForNameBased,h=O.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(r){for(var s=F(this,{coordDimensions:["value"],encodeDefaulter:E.curry(o,this)}),c=s.mapDimension("value"),x=E.createHashMap(),a=[],i=[],n=0,u=s.count();n<u;n++){var g=s.getName(n);x.set(g,!0),a.push({name:g,value:s.get(c,n),selected:f(s,n,"selected")})}var d=v.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return E.each(d.regions,function(y){var p=y.name;x.get(p)||(a.push({name:p}),i.push(p))}),this.updateSelectedMap(a),s.appendValues([],i),s},getHostGeoModel:function(){var r=this.option.geoIndex;return r!=null?this.dependentModels.geo[r]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(r){var s=this.getData();return s.get(s.mapDimension("value"),r)},getRegionModel:function(r){var s=this.getData();return s.getItemModel(s.indexOfName(r))},formatTooltip:function(r,s,c,x){for(var a=this.getData(),i=L(this.getRawValue(r)),n=a.getName(r),u=this.seriesGroup,g=[],d=0;d<u.length;d++){var y=u[d].originalData.indexOfName(n),p=a.mapDimension("value");isNaN(u[d].originalData.get(p,y))||g.push(b(u[d].name))}var w=x==="html"?"<br/>":`
`;return g.join(", ")+w+b(n+" : "+i)},getTooltipPosition:function(r){if(r!=null){var s=this.getData().getName(r),c=this.coordinateSystem,x=c.getRegion(s);return x&&c.dataToPoint(x.center)}},setZoom:function(r){this.option.zoom=r},setCenter:function(r){this.option.center=r},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}});E.mixin(h,T);var l=h;X.exports=l},305027:function(X,z,e){var E=e(3440),F=e(131879),O=e(248070),M=e(307245),b="__seriesMapHighDown",L="__seriesMapCallKey",T=E.extendChartView({type:"map",render:function(v,m,o,h){if(!(h&&h.type==="mapToggleSelect"&&h.from===this.uid)){var l=this.group;if(l.removeAll(),!v.getHostGeoModel()){if(h&&h.type==="geoRoam"&&h.componentType==="series"&&h.seriesId===v.id){var r=this._mapDraw;r&&l.add(r.group)}else if(v.needsDrawMap){var r=this._mapDraw||new M(o,!0);l.add(r.group),r.draw(v,m,o,this,h),this._mapDraw=r}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;v.get("showLegendSymbol")&&m.getComponent("legend")&&this._renderSymbols(v,m,o)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(v,m,o){var h=v.originalData,l=this.group;h.each(h.mapDimension("value"),function(r,s){if(!isNaN(r)){var c=h.getItemLayout(s);if(!(!c||!c.point)){var x=c.point,a=c.offset,i=new O.Circle({style:{fill:v.getData().getVisual("color")},shape:{cx:x[0]+a*9,cy:x[1],r:3},silent:!0,z2:8+(a?0:O.Z2_EMPHASIS_LIFT+1)});if(!a){var n=v.mainSeries.getData(),u=h.getName(s),g=n.indexOfName(u),d=h.getItemModel(s),y=d.getModel("label"),p=d.getModel("emphasis.label"),w=n.getItemGraphicEl(g),S=F.retrieve2(v.getFormattedLabel(g,"normal"),u),R=F.retrieve2(v.getFormattedLabel(g,"emphasis"),S),B=w[b],k=Math.random();if(!B){B=w[b]={};var P=F.curry(C,!0),D=F.curry(C,!1);w.on("mouseover",P).on("mouseout",D).on("emphasis",P).on("normal",D)}w[L]=k,F.extend(B,{recordVersion:k,circle:i,labelModel:y,hoverLabelModel:p,emphasisText:R,normalText:S}),f(B,!1)}l.add(i)}}})}});function C(v){var m=this[b];m&&m.recordVersion===this[L]&&f(m,v)}function f(v,m){var o=v.circle,h=v.labelModel,l=v.hoverLabelModel,r=v.emphasisText,s=v.normalText;m?(o.style.extendFrom(O.setTextStyle({},l,{text:l.get("show")?r:null},{isRectText:!0,useInsideStyle:!1},!0)),o.__mapOriginalZ2=o.z2,o.z2+=O.Z2_EMPHASIS_LIFT):(O.setTextStyle(o.style,h,{text:h.get("show")?s:null,textPosition:h.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),o.dirty(!1),o.__mapOriginalZ2!=null&&(o.z2=o.__mapOriginalZ2,o.__mapOriginalZ2=null))}X.exports=T},511699:function(X,z,e){var E=e(131879);function F(O){var M=[];E.each(O.series,function(b){b&&b.type==="map"&&(M.push(b),b.map=b.map||b.mapType,E.defaults(b,b.mapLocation))})}X.exports=F},595501:function(X,z,e){var E=e(131879);function F(M,b){var L={};return E.each(M,function(T){T.each(T.mapDimension("value"),function(C,f){var v="ec-"+T.getName(f);L[v]=L[v]||[],isNaN(C)||L[v].push(C)})}),M[0].map(M[0].mapDimension("value"),function(T,C){for(var f="ec-"+M[0].getName(C),v=0,m=1/0,o=-1/0,h=L[f].length,l=0;l<h;l++)m=Math.min(m,L[f][l]),o=Math.max(o,L[f][l]),v+=L[f][l];var r;return b==="min"?r=m:b==="max"?r=o:b==="average"?r=v/h:r=v,h===0?NaN:r})}function O(M){var b={};M.eachSeriesByType("map",function(L){var T=L.getHostGeoModel(),C=T?"o"+T.id:"i"+L.getMapType();(b[C]=b[C]||[]).push(L)}),E.each(b,function(L,T){for(var C=F(E.map(L,function(v){return v.getData()}),L[0].get("mapValueCalculation")),f=0;f<L.length;f++)L[f].originalData=L[f].getData();for(var f=0;f<L.length;f++)L[f].seriesGroup=L,L[f].needsDrawMap=f===0&&!L[f].getHostGeoModel(),L[f].setData(C.cloneShallow()),L[f].mainSeries=L[0]})}X.exports=O},65887:function(X,z,e){var E=e(131879);function F(O){var M={};O.eachSeriesByType("map",function(b){var L=b.getMapType();if(!(b.getHostGeoModel()||M[L])){var T={};E.each(b.seriesGroup,function(f){var v=f.coordinateSystem,m=f.originalData;f.get("showLegendSymbol")&&O.getComponent("legend")&&m.each(m.mapDimension("value"),function(o,h){var l=m.getName(h),r=v.getRegion(l);if(!(!r||isNaN(o))){var s=T[l]||0,c=v.dataToPoint(r.center);T[l]=s+1,m.setItemLayout(h,{point:c,offset:s})}})});var C=b.getData();C.each(function(f){var v=C.getName(f),m=C.getItemLayout(f)||{};m.showLabel=!T[v],C.setItemLayout(f,m)}),M[L]=!0}})}X.exports=F},21004:function(X){function z(e){e.eachSeriesByType("map",function(E){var F=E.get("color"),O=E.getModel("itemStyle"),M=O.get("areaColor"),b=O.get("color")||F[E.seriesIndex%F.length];E.getData().setVisual({areaColor:M,color:b})})}X.exports=z},729923:function(X,z,e){var E=e(3440);e(160804),e(303431),e(726175);var F=e(677169);E.registerVisual(F)},303431:function(X,z,e){var E=e(131879),F=E.each,O=E.createHashMap,M=e(502365),b=e(901664),L=M.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(f,v){var m=this.getSource();return T(m,this),b(m,this)},getRawIndicesByActiveState:function(f){var v=this.coordinateSystem,m=this.getData(),o=[];return v.eachActiveState(m,function(h,l){f===h&&o.push(m.getRawIndex(l))}),o},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});function T(f,v){if(!f.encodeDefine){var m=v.ecModel.getComponent("parallel",v.get("parallelIndex"));if(m){var o=f.encodeDefine=O();F(m.dimensions,function(h){var l=C(h);o.set(h,l)})}}}function C(f){return+f.replace("dim","")}X.exports=L},726175:function(X,z,e){var E=e(248070),F=e(901911),O=.3,M=F.extend({type:"parallel",init:function(){this._dataGroup=new E.Group,this.group.add(this._dataGroup),this._data,this._initialized},render:function(o,h,l,r){var s=this._dataGroup,c=o.getData(),x=this._data,a=o.coordinateSystem,i=a.dimensions,n=C(o);c.diff(x).add(u).update(g).remove(d).execute();function u(p){var w=T(c,s,p,i,a);f(w,c,p,n)}function g(p,w){var S=x.getItemGraphicEl(w),R=L(c,p,i,a);c.setItemGraphicEl(p,S);var B=r&&r.animation===!1?null:o;E.updateProps(S,{shape:{points:R}},B,p),f(S,c,p,n)}function d(p){var w=x.getItemGraphicEl(p);s.remove(w)}if(!this._initialized){this._initialized=!0;var y=b(a,o,function(){setTimeout(function(){s.removeClipPath()})});s.setClipPath(y)}this._data=c},incrementalPrepareRender:function(o,h,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(o,h,l){for(var r=h.getData(),s=h.coordinateSystem,c=s.dimensions,x=C(h),a=o.start;a<o.end;a++){var i=T(r,this._dataGroup,a,c,s);i.incremental=!0,f(i,r,a,x)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});function b(o,h,l){var r=o.model,s=o.getRect(),c=new E.Rect({shape:{x:s.x,y:s.y,width:s.width,height:s.height}}),x=r.get("layout")==="horizontal"?"width":"height";return c.setShape(x,0),E.initProps(c,{shape:{width:s.width,height:s.height}},h,l),c}function L(o,h,l,r){for(var s=[],c=0;c<l.length;c++){var x=l[c],a=o.get(o.mapDimension(x),h);v(a,r.getAxis(x).type)||s.push(r.dataToPoint(a,x))}return s}function T(o,h,l,r,s){var c=L(o,l,r,s),x=new E.Polyline({shape:{points:c},silent:!0,z2:10});return h.add(x),o.setItemGraphicEl(l,x),x}function C(o){var h=o.get("smooth",!0);return h===!0&&(h=O),{lineStyle:o.getModel("lineStyle").getLineStyle(),smooth:h??O}}function f(o,h,l,r){var s=r.lineStyle;if(h.hasItemOption){var c=h.getItemModel(l).getModel("lineStyle");s=c.getLineStyle()}o.useStyle(s);var x=o.style;x.fill=null,x.stroke=h.getItemVisual(l,"color"),x.opacity=h.getItemVisual(l,"opacity"),r.smooth&&(o.shape.smooth=r.smooth)}function v(o,h){return h==="category"?o==null:o==null||isNaN(o)}var m=M;X.exports=m},677169:function(X){var z=["lineStyle","normal","opacity"],e={seriesType:"parallel",reset:function(E,F,O){var M=E.getModel("itemStyle"),b=E.getModel("lineStyle"),L=F.get("color"),T=b.get("color")||M.get("color")||L[E.seriesIndex%L.length],C=E.get("inactiveOpacity"),f=E.get("activeOpacity"),v=E.getModel("lineStyle").getLineStyle(),m=E.coordinateSystem,o=E.getData(),h={normal:v.opacity,active:f,inactive:C};o.setVisual("color",T);function l(r,s){m.eachActiveState(s,function(c,x){var a=h[c];if(c==="normal"&&s.hasItemOption){var i=s.getItemModel(x).get(z,!0);i!=null&&(a=i)}s.setItemVisual(x,"opacity",a)},r.start,r.end)}return{progress:l}}};X.exports=e},94385:function(X,z,e){var E=e(3440),F=e(131879);e(909145),e(463908),e(342197);var O=e(919641),M=O.layout,b=e(341124);e(615367),E.registerLayout(F.curry(M,"pictorialBar")),E.registerVisual(b("pictorialBar","roundRect"))},226749:function(X,z,e){var E=e(3440),F=e(131879);e(229307),e(786723);var O=e(109652),M=e(31310),b=e(712813),L=e(861614);O("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),E.registerVisual(M("pie")),E.registerLayout(F.curry(b,"pie")),E.registerProcessor(L("pie"))},229307:function(X,z,e){var E=e(3440),F=e(642347),O=e(131879),M=e(835454),b=e(748354),L=b.getPercentWithPrecision,T=e(314748),C=e(858708),f=C.retrieveRawAttr,v=e(543036),m=v.makeSeriesEncodeForNameBased,o=e(389960),h=E.extendSeriesModel({type:"series.pie",init:function(r){h.superApply(this,"init",arguments),this.legendVisualProvider=new o(O.bind(this.getData,this),O.bind(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(r)},mergeOption:function(r){h.superCall(this,"mergeOption",r),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(r,s){return F(this,{coordDimensions:["value"],encodeDefaulter:O.curry(m,this)})},_createSelectableList:function(){for(var r=this.getRawData(),s=r.mapDimension("value"),c=[],x=0,a=r.count();x<a;x++)c.push({name:r.getName(x),value:r.get(s,x),selected:f(r,x,"selected")});return c},getDataParams:function(r){var s=this.getData(),c=h.superCall(this,"getDataParams",r),x=[];return s.each(s.mapDimension("value"),function(a){x.push(a)}),c.percent=L(x,r,s.hostModel.get("percentPrecision")),c.$vars.push("percent"),c},_defaultLabelLine:function(r){M.defaultEmphasis(r,"labelLine",["show"]);var s=r.labelLine,c=r.emphasis.labelLine;s.show=s.show&&r.label.show,c.show=c.show&&r.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});O.mixin(h,T);var l=h;X.exports=l},786723:function(X,z,e){var E=e(131879),F=e(248070),O=e(901911);function M(v,m,o,h){var l=m.getData(),r=this.dataIndex,s=l.getName(r),c=m.get("selectedOffset");h.dispatchAction({type:"pieToggleSelect",from:v,name:s,seriesId:m.id}),l.each(function(x){b(l.getItemGraphicEl(x),l.getItemLayout(x),m.isSelected(l.getName(x)),c,o)})}function b(v,m,o,h,l){var r=(m.startAngle+m.endAngle)/2,s=Math.cos(r),c=Math.sin(r),x=o?h:0,a=[s*x,c*x];l?v.animate().when(200,{position:a}).start("bounceOut"):v.attr("position",a)}function L(v,m){F.Group.call(this);var o=new F.Sector({z2:2}),h=new F.Polyline,l=new F.Text;this.add(o),this.add(h),this.add(l),this.updateData(v,m,!0)}var T=L.prototype;T.updateData=function(v,m,o){var h=this.childAt(0),l=this.childAt(1),r=this.childAt(2),s=v.hostModel,c=v.getItemModel(m),x=v.getItemLayout(m),a=E.extend({},x);a.label=null;var i=s.getShallow("animationTypeUpdate");if(o){h.setShape(a);var n=s.getShallow("animationType");n==="scale"?(h.shape.r=x.r0,F.initProps(h,{shape:{r:x.r}},s,m)):(h.shape.endAngle=x.startAngle,F.updateProps(h,{shape:{endAngle:x.endAngle}},s,m))}else i==="expansion"?h.setShape(a):F.updateProps(h,{shape:a},s,m);var u=v.getItemVisual(m,"color");h.useStyle(E.defaults({lineJoin:"bevel",fill:u},c.getModel("itemStyle").getItemStyle())),h.hoverStyle=c.getModel("emphasis.itemStyle").getItemStyle();var g=c.getShallow("cursor");g&&h.attr("cursor",g),b(this,v.getItemLayout(m),s.isSelected(v.getName(m)),s.get("selectedOffset"),s.get("animation"));var d=!o&&i==="transition";this._updateLabel(v,m,d),this.highDownOnUpdate=s.get("silent")?null:function(y,p){var w=s.isAnimationEnabled()&&c.get("hoverAnimation");p==="emphasis"?(l.ignore=l.hoverIgnore,r.ignore=r.hoverIgnore,w&&(h.stopAnimation(!0),h.animateTo({shape:{r:x.r+s.get("hoverOffset")}},300,"elasticOut"))):(l.ignore=l.normalIgnore,r.ignore=r.normalIgnore,w&&(h.stopAnimation(!0),h.animateTo({shape:{r:x.r}},300,"elasticOut")))},F.setHoverStyle(this)},T._updateLabel=function(v,m,o){var h=this.childAt(1),l=this.childAt(2),r=v.hostModel,s=v.getItemModel(m),c=v.getItemLayout(m),x=c.label,y=v.getItemVisual(m,"color");if(!x||isNaN(x.x)||isNaN(x.y)){l.ignore=l.normalIgnore=l.hoverIgnore=h.ignore=h.normalIgnore=h.hoverIgnore=!0;return}var a={points:x.linePoints||[[x.x,x.y],[x.x,x.y],[x.x,x.y]]},i={x:x.x,y:x.y};o?(F.updateProps(h,{shape:a},r,m),F.updateProps(l,{style:i},r,m)):(h.attr({shape:a}),l.attr({style:i})),l.attr({rotation:x.rotation,origin:[x.x,x.y],z2:10});var n=s.getModel("label"),u=s.getModel("emphasis.label"),g=s.getModel("labelLine"),d=s.getModel("emphasis.labelLine"),y=v.getItemVisual(m,"color");F.setLabelStyle(l.style,l.hoverStyle={},n,u,{labelFetcher:v.hostModel,labelDataIndex:m,defaultText:x.text,autoColor:y,useInsideStyle:!!x.inside},{textAlign:x.textAlign,textVerticalAlign:x.verticalAlign,opacity:v.getItemVisual(m,"opacity")}),l.ignore=l.normalIgnore=!n.get("show"),l.hoverIgnore=!u.get("show"),h.ignore=h.normalIgnore=!g.get("show"),h.hoverIgnore=!d.get("show"),h.setStyle({stroke:y,opacity:v.getItemVisual(m,"opacity")}),h.setStyle(g.getModel("lineStyle").getLineStyle()),h.hoverStyle=d.getModel("lineStyle").getLineStyle();var p=g.get("smooth");p&&p===!0&&(p=.4),h.setShape({smooth:p})},E.inherits(L,F.Group);var C=O.extend({type:"pie",init:function(){var v=new F.Group;this._sectorGroup=v},render:function(v,m,o,h){if(!(h&&h.from===this.uid)){var l=v.getData(),r=this._data,s=this.group,c=m.get("animation"),x=!r,a=v.get("animationType"),i=v.get("animationTypeUpdate"),n=E.curry(M,this.uid,v,c,o),u=v.get("selectedMode");if(l.diff(r).add(function(w){var S=new L(l,w);x&&a!=="scale"&&S.eachChild(function(R){R.stopAnimation(!0)}),u&&S.on("click",n),l.setItemGraphicEl(w,S),s.add(S)}).update(function(w,S){var R=r.getItemGraphicEl(S);!x&&i!=="transition"&&R.eachChild(function(B){B.stopAnimation(!0)}),R.updateData(l,w),R.off("click"),u&&R.on("click",n),s.add(R),l.setItemGraphicEl(w,R)}).remove(function(w){var S=r.getItemGraphicEl(w);s.remove(S)}).execute(),c&&l.count()>0&&(x?a!=="scale":i!=="transition")){for(var g=l.getItemLayout(0),d=1;isNaN(g.startAngle)&&d<l.count();++d)g=l.getItemLayout(d);var y=Math.max(o.getWidth(),o.getHeight())/2,p=E.bind(s.removeClipPath,s);s.setClipPath(this._createClipPath(g.cx,g.cy,y,g.startAngle,g.clockwise,p,v,x))}else s.removeClipPath();this._data=l}},dispose:function(){},_createClipPath:function(v,m,o,h,l,r,s,c){var x=new F.Sector({shape:{cx:v,cy:m,r0:0,r:o,startAngle:h,endAngle:h,clockwise:l}}),a=c?F.initProps:F.updateProps;return a(x,{shape:{endAngle:h+(l?1:-1)*Math.PI*2}},s,r),x},containPoint:function(v,m){var o=m.getData(),h=o.getItemLayout(0);if(h){var l=v[0]-h.cx,r=v[1]-h.cy,s=Math.sqrt(l*l+r*r);return s<=h.r&&s>=h.r0}}}),f=C;X.exports=f},443561:function(X,z,e){var E=e(872113),F=e(748354),O=F.parsePercent,M=Math.PI/180;function b(f,v,m,o,h,l,r,s,c,x){f.sort(function(R,B){return R.y-B.y});function a(R,B,k,P){for(var D=R;D<B&&!(f[D].y+k>c+r);D++)if(f[D].y+=k,D>R&&D+1<B&&f[D+1].y>f[D].y+f[D].height){i(D,k/2);return}i(B-1,k/2)}function i(R,B){for(var k=R;k>=0&&!(f[k].y-B<c||(f[k].y-=B,k>0&&f[k].y>f[k-1].y+f[k-1].height));k--);}function n(R,B,k,P,D,A){for(var N=(A>0,B?Number.MAX_VALUE:0),I=0,G=R.length;I<G;I++)if(R[I].labelAlignTo==="none"){var W=Math.abs(R[I].y-P),Z=R[I].len,H=R[I].len2,U=W<D+Z?Math.sqrt((D+Z+H)*(D+Z+H)-W*W):Math.abs(R[I].x-k);B&&U>=N&&(U=N-10),!B&&U<=N&&(U=N+10),R[I].x=k+U*A,N=U}}for(var u=0,g,d=f.length,y=[],p=[],w=0;w<d;w++){if(f[w].position==="outer"&&f[w].labelAlignTo==="labelLine"){var S=f[w].x-x;f[w].linePoints[1][0]+=S,f[w].x=x}g=f[w].y-u,g<0&&a(w,d,-g,h),u=f[w].y+f[w].height}r-u<0&&i(d-1,u-r);for(var w=0;w<d;w++)f[w].y>=m?p.push(f[w]):y.push(f[w]);n(y,!1,v,m,o,h),n(p,!0,v,m,o,h)}function L(f,v,m,o,h,l,r,s){for(var c=[],x=[],a=Number.MAX_VALUE,i=-Number.MAX_VALUE,n=0;n<f.length;n++)T(f[n])||(f[n].x<v?(a=Math.min(a,f[n].x),c.push(f[n])):(i=Math.max(i,f[n].x),x.push(f[n])));b(x,v,m,o,1,h,l,r,s,i),b(c,v,m,o,-1,h,l,r,s,a);for(var n=0;n<f.length;n++){var u=f[n];if(!T(u)){var g=u.linePoints;if(g){var d=u.labelAlignTo==="edge",y=u.textRect.width,p;d?u.x<v?p=g[2][0]-u.labelDistance-r-u.labelMargin:p=r+h-u.labelMargin-g[2][0]-u.labelDistance:u.x<v?p=u.x-r-u.bleedMargin:p=r+h-u.x-u.bleedMargin,p<u.textRect.width&&(u.text=E.truncateText(u.text,p,u.font),u.labelAlignTo==="edge"&&(y=E.getWidth(u.text,u.font)));var w=g[1][0]-g[2][0];d?u.x<v?g[2][0]=r+u.labelMargin+y+u.labelDistance:g[2][0]=r+h-u.labelMargin-y-u.labelDistance:(u.x<v?g[2][0]=u.x+u.labelDistance:g[2][0]=u.x-u.labelDistance,g[1][0]=g[2][0]+w),g[1][1]=g[2][1]=u.y}}}}function T(f){return f.position==="center"}function C(f,v,m,o,h,l){var r=f.getData(),s=[],c,x,a=!1,i=(f.get("minShowLabelAngle")||0)*M;r.each(function(n){var u=r.getItemLayout(n),g=r.getItemModel(n),d=g.getModel("label"),y=d.get("position")||g.get("emphasis.label.position"),p=d.get("distanceToLabelLine"),w=d.get("alignTo"),S=O(d.get("margin"),m),R=d.get("bleedMargin"),B=d.getFont(),k=g.getModel("labelLine"),P=k.get("length");P=O(P,m);var D=k.get("length2");if(D=O(D,m),!(u.angle<i)){var A=(u.startAngle+u.endAngle)/2,N=Math.cos(A),I=Math.sin(A),G,W,Z,H;c=u.cx,x=u.cy;var U=f.getFormattedLabel(n,"normal")||r.getName(n),V=E.getBoundingRect(U,B,H,"top"),Y=y==="inside"||y==="inner";if(y==="center")G=u.cx,W=u.cy,H="center";else{var $=(Y?(u.r+u.r0)/2*N:u.r*N)+c,K=(Y?(u.r+u.r0)/2*I:u.r*I)+x;if(G=$+N*3,W=K+I*3,!Y){var J=$+N*(P+v-u.r),Q=K+I*(P+v-u.r),et=J+(N<0?-1:1)*D,nt=Q;w==="edge"?G=N<0?h+S:h+m-S:G=et+(N<0?-p:p),W=nt,Z=[[$,K],[J,Q],[et,nt]]}H=Y?"center":w==="edge"?N>0?"right":"left":N>0?"left":"right"}var st,ut=d.get("rotate");typeof ut=="number"?st=ut*(Math.PI/180):st=ut?N<0?-A+Math.PI:-A:0,a=!!st,u.label={x:G,y:W,position:y,height:V.height,len:P,len2:D,linePoints:Z,textAlign:H,verticalAlign:"middle",rotation:st,inside:Y,labelDistance:p,labelAlignTo:w,labelMargin:S,bleedMargin:R,textRect:V,text:U,font:B},Y||s.push(u.label)}}),!a&&f.get("avoidLabelOverlap")&&L(s,c,x,v,m,o,h,l)}X.exports=C},712813:function(X,z,e){var E=e(748354),F=E.parsePercent,O=E.linearMap,M=e(930871),b=e(443561),L=e(131879),T=Math.PI*2,C=Math.PI/180;function f(m,o){return M.getLayoutRect(m.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function v(m,o,h,l){o.eachSeriesByType(m,function(r){var s=r.getData(),c=s.mapDimension("value"),x=f(r,h),a=r.get("center"),i=r.get("radius");L.isArray(i)||(i=[0,i]),L.isArray(a)||(a=[a,a]);var n=F(x.width,h.getWidth()),u=F(x.height,h.getHeight()),g=Math.min(n,u),d=F(a[0],n)+x.x,y=F(a[1],u)+x.y,p=F(i[0],g/2),w=F(i[1],g/2),S=-r.get("startAngle")*C,R=r.get("minAngle")*C,B=0;s.each(c,function(V){!isNaN(V)&&B++});var k=s.getSum(c),P=Math.PI/(k||B)*2,D=r.get("clockwise"),A=r.get("roseType"),N=r.get("stillShowZeroSum"),I=s.getDataExtent(c);I[0]=0;var G=T,W=0,Z=S,H=D?1:-1;if(s.each(c,function(V,Y){var $;if(isNaN(V)){s.setItemLayout(Y,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:D,cx:d,cy:y,r0:p,r:A?NaN:w,viewRect:x});return}A!=="area"?$=k===0&&N?P:V*P:$=T/B,$<R?($=R,G-=R):W+=V;var K=Z+H*$;s.setItemLayout(Y,{angle:$,startAngle:Z,endAngle:K,clockwise:D,cx:d,cy:y,r0:p,r:A?O(V,I,[p,w]):w,viewRect:x}),Z=K}),G<T&&B)if(G<=.001){var U=T/B;s.each(c,function(V,Y){if(!isNaN(V)){var $=s.getItemLayout(Y);$.angle=U,$.startAngle=S+H*Y*U,$.endAngle=S+H*(Y+1)*U}})}else P=G/W,Z=S,s.each(c,function(V,Y){if(!isNaN(V)){var $=s.getItemLayout(Y),K=$.angle===R?R:V*P;$.startAngle=Z,$.endAngle=Z+H*K,Z+=H*K}});b(r,w,x.width,x.height,x.x,x.y)})}X.exports=v},33421:function(X,z,e){var E=e(3440);e(364041),e(464646),e(206306);var F=e(31310),O=e(341124),M=e(947052),b=e(861614),L=e(415752);E.registerVisual(F("radar")),E.registerVisual(O("radar","circle")),E.registerLayout(M),E.registerProcessor(b("radar")),E.registerPreprocessor(L)},464646:function(X,z,e){var E=e(502365),F=e(642347),O=e(131879),M=e(317795),b=M.encodeHTML,L=e(389960),T=E.extend({type:"series.radar",dependencies:["radar"],init:function(f){T.superApply(this,"init",arguments),this.legendVisualProvider=new L(O.bind(this.getData,this),O.bind(this.getRawData,this))},getInitialData:function(f,v){return F(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(f,v,m,o){var h=this.getData(),l=this.coordinateSystem,r=l.getIndicatorAxes(),s=this.getData().getName(f),c=o==="html"?"<br/>":`
`;return b(s===""?this.name:s)+c+O.map(r,function(x,a){var i=h.get(h.mapDimension(x.dim),f);return b(x.name+" : "+i)}).join(c)},getTooltipPosition:function(f){if(f!=null){for(var v=this.getData(),m=this.coordinateSystem,o=v.getValues(O.map(m.dimensions,function(s){return v.mapDimension(s)}),f,!0),h=0,l=o.length;h<l;h++)if(!isNaN(o[h])){var r=m.getIndicatorAxes();return m.coordToPoint(r[h].dataToCoord(o[h]),h)}}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}}),C=T;X.exports=C},206306:function(X,z,e){var E=e(3440),F=e(248070),O=e(131879),M=e(435730);function b(T){return O.isArray(T)||(T=[+T,+T]),T}var L=E.extendChartView({type:"radar",render:function(T,C,f){var v=T.coordinateSystem,m=this.group,o=T.getData(),h=this._data;function l(c,x){var a=c.getItemVisual(x,"symbol")||"circle",i=c.getItemVisual(x,"color");if(a!=="none"){var n=b(c.getItemVisual(x,"symbolSize")),u=M.createSymbol(a,-1,-1,2,2,i),g=c.getItemVisual(x,"symbolRotate")||0;return u.attr({style:{strokeNoScale:!0},z2:100,scale:[n[0]/2,n[1]/2],rotation:g*Math.PI/180||0}),u}}function r(c,x,a,i,n,u){a.removeAll();for(var g=0;g<x.length-1;g++){var d=l(i,n);d&&(d.__dimIdx=g,c[g]?(d.attr("position",c[g]),F[u?"initProps":"updateProps"](d,{position:x[g]},T,n)):d.attr("position",x[g]),a.add(d))}}function s(c){return O.map(c,function(x){return[v.cx,v.cy]})}o.diff(h).add(function(c){var x=o.getItemLayout(c);if(x){var a=new F.Polygon,i=new F.Polyline,n={shape:{points:x}};a.shape.points=s(x),i.shape.points=s(x),F.initProps(a,n,T,c),F.initProps(i,n,T,c);var u=new F.Group,g=new F.Group;u.add(i),u.add(a),u.add(g),r(i.shape.points,x,g,o,c,!0),o.setItemGraphicEl(c,u)}}).update(function(c,x){var a=h.getItemGraphicEl(x),i=a.childAt(0),n=a.childAt(1),u=a.childAt(2),g={shape:{points:o.getItemLayout(c)}};g.shape.points&&(r(i.shape.points,g.shape.points,u,o,c,!1),F.updateProps(i,g,T),F.updateProps(n,g,T),o.setItemGraphicEl(c,a))}).remove(function(c){m.remove(h.getItemGraphicEl(c))}).execute(),o.eachItemGraphicEl(function(c,x){var a=o.getItemModel(x),i=c.childAt(0),n=c.childAt(1),u=c.childAt(2),g=o.getItemVisual(x,"color");m.add(c),i.useStyle(O.defaults(a.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:g})),i.hoverStyle=a.getModel("emphasis.lineStyle").getLineStyle();var d=a.getModel("areaStyle"),y=a.getModel("emphasis.areaStyle"),p=d.isEmpty()&&d.parentModel.isEmpty(),w=y.isEmpty()&&y.parentModel.isEmpty();w=w&&p,n.ignore=p,n.useStyle(O.defaults(d.getAreaStyle(),{fill:g,opacity:.7})),n.hoverStyle=y.getAreaStyle();var S=a.getModel("itemStyle").getItemStyle(["color"]),R=a.getModel("emphasis.itemStyle").getItemStyle(),B=a.getModel("label"),k=a.getModel("emphasis.label");u.eachChild(function(P){P.setStyle(S),P.hoverStyle=O.clone(R);var D=o.get(o.dimensions[P.__dimIdx],x);(D==null||isNaN(D))&&(D=""),F.setLabelStyle(P.style,P.hoverStyle,B,k,{labelFetcher:o.hostModel,labelDataIndex:x,labelDimIndex:P.__dimIdx,defaultText:D,autoColor:g,isRectText:!0})}),c.highDownOnUpdate=function(P,D){n.attr("ignore",D==="emphasis"?w:p)},F.setHoverStyle(c)}),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});X.exports=L},415752:function(X,z,e){var E=e(131879);function F(O){var M=O.polar;if(M){E.isArray(M)||(M=[M]);var b=[];E.each(M,function(L,T){L.indicator?(L.type&&!L.shape&&(L.shape=L.type),O.radar=O.radar||[],E.isArray(O.radar)||(O.radar=[O.radar]),O.radar.push(L)):b.push(L)}),O.polar=b}E.each(O.series,function(L){L&&L.type==="radar"&&L.polarIndex&&(L.radarIndex=L.polarIndex)})}X.exports=F},947052:function(X,z,e){var E=e(131879);function F(b){b.eachSeriesByType("radar",function(L){var T=L.getData(),C=[],f=L.coordinateSystem;if(f){var v=f.getIndicatorAxes();E.each(v,function(m,o){T.each(T.mapDimension(v[o].dim),function(h,l){C[l]=C[l]||[];var r=f.dataToPoint(h,o);C[l][o]=O(r)?r:M(f)})}),T.each(function(m){var o=E.find(C[m],function(h){return O(h)})||M(f);C[m].push(o.slice()),T.setItemLayout(m,C[m])})}})}function O(b){return!isNaN(b[0])&&!isNaN(b[1])}function M(b){return[b.cx,b.cy]}X.exports=F},579337:function(X,z,e){var E=e(3440);e(698017),e(89574),e(768836);var F=e(915224),O=e(762395);E.registerLayout(F),E.registerVisual(O)},698017:function(X,z,e){var E=e(502365),F=e(631323),O=e(317795),M=O.encodeHTML,b=e(56785),L=e(550617),T=L.__DEV__,C=E.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(v,m){for(var o=v.edges||v.links,h=v.data||v.nodes,l=v.levels,r=this.levelModels={},s=0;s<l.length;s++)l[s].depth!=null&&l[s].depth>=0&&(r[l[s].depth]=new b(l[s],this,m));if(h&&o){var c=F(h,o,this,!0,x);return c.data}function x(a,i){a.wrapMethod("getItemModel",function(n,u){return n.customizeGetParent(function(g){var d=this.parentModel,y=d.getData().getItemLayout(u).depth,p=d.levelModels[y];return p||this.parentModel}),n}),i.wrapMethod("getItemModel",function(n,u){return n.customizeGetParent(function(g){var d=this.parentModel,y=d.getGraph().getEdgeByIndex(u),p=y.node1.getLayout().depth,w=d.levelModels[p];return w||this.parentModel}),n})}},setNodePosition:function(v,m){var o=this.option.data[v];o.localX=m[0],o.localY=m[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(v,m,o){if(o==="edge"){var h=this.getDataParams(v,o),l=h.data,r=l.source+" -- "+l.target;return h.value&&(r+=" : "+h.value),M(r)}else if(o==="node"){var s=this.getGraph().getNodeByIndex(v),c=s.getLayout().value,x=this.getDataParams(v,o).data.name;if(c)var r=x+" : "+c;return M(r)}return C.superCall(this,"formatTooltip",v,m)},optionUpdated:function(){var v=this.option;v.focusNodeAdjacency===!0&&(v.focusNodeAdjacency="allEdges")},getDataParams:function(v,m){var o=C.superCall(this,"getDataParams",v,m);if(o.value==null&&m==="node"){var h=this.getGraph().getNodeByIndex(v),l=h.getLayout().value;o.value=l}return o},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),f=C;X.exports=f},89574:function(X,z,e){var E=e(248070),F=e(3440),O=e(131879),M=["itemStyle","opacity"],b=["emphasis","itemStyle","opacity"],L=["lineStyle","opacity"],T=["emphasis","lineStyle","opacity"];function C(l,r){return l.getVisual("opacity")||l.getModel().get(r)}function f(l,r,s){var c=l.getGraphicEl(),x=C(l,r);s!=null&&(x==null&&(x=1),x*=s),c.downplay&&c.downplay(),c.traverse(function(a){a.type!=="group"&&a.setStyle("opacity",x)})}function v(l,r){var s=C(l,r),c=l.getGraphicEl();c.traverse(function(x){x.type!=="group"&&x.setStyle("opacity",s)}),c.highlight&&c.highlight()}var m=E.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(l,r){var s=r.extent;l.moveTo(r.x1,r.y1),l.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(l.lineTo(r.x2+s,r.y2),l.bezierCurveTo(r.cpx2+s,r.cpy2,r.cpx1+s,r.cpy1,r.x1+s,r.y1)):(l.lineTo(r.x2,r.y2+s),l.bezierCurveTo(r.cpx2,r.cpy2+s,r.cpx1,r.cpy1+s,r.x1,r.y1+s)),l.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}}),o=F.extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(l,r,s){var c=this,x=l.getGraph(),a=this.group,i=l.layoutInfo,n=i.width,u=i.height,g=l.getData(),d=l.getData("edge"),y=l.get("orient");this._model=l,a.removeAll(),a.attr("position",[i.x,i.y]),x.eachEdge(function(p){var w=new m;w.dataIndex=p.dataIndex,w.seriesIndex=l.seriesIndex,w.dataType="edge";var S=p.getModel("lineStyle"),R=S.get("curveness"),B=p.node1.getLayout(),k=p.node1.getModel(),P=k.get("localX"),D=k.get("localY"),A=p.node2.getLayout(),N=p.node2.getModel(),I=N.get("localX"),G=N.get("localY"),W=p.getLayout(),Z,H,U,V,Y,$,K,J;switch(w.shape.extent=Math.max(1,W.dy),w.shape.orient=y,y==="vertical"?(Z=(P!=null?P*n:B.x)+W.sy,H=(D!=null?D*u:B.y)+B.dy,U=(I!=null?I*n:A.x)+W.ty,V=G!=null?G*u:A.y,Y=Z,$=H*(1-R)+V*R,K=U,J=H*R+V*(1-R)):(Z=(P!=null?P*n:B.x)+B.dx,H=(D!=null?D*u:B.y)+W.sy,U=I!=null?I*n:A.x,V=(G!=null?G*u:A.y)+W.ty,Y=Z*(1-R)+U*R,$=H,K=Z*R+U*(1-R),J=V),w.setShape({x1:Z,y1:H,x2:U,y2:V,cpx1:Y,cpy1:$,cpx2:K,cpy2:J}),w.setStyle(S.getItemStyle()),w.style.fill){case"source":w.style.fill=p.node1.getVisual("color");break;case"target":w.style.fill=p.node2.getVisual("color");break}E.setHoverStyle(w,p.getModel("emphasis.lineStyle").getItemStyle()),a.add(w),d.setItemGraphicEl(p.dataIndex,w)}),x.eachNode(function(p){var w=p.getLayout(),S=p.getModel(),R=S.get("localX"),B=S.get("localY"),k=S.getModel("label"),P=S.getModel("emphasis.label"),D=new E.Rect({shape:{x:R!=null?R*n:w.x,y:B!=null?B*u:w.y,width:w.dx,height:w.dy},style:S.getModel("itemStyle").getItemStyle()}),A=p.getModel("emphasis.itemStyle").getItemStyle();E.setLabelStyle(D.style,A,k,P,{labelFetcher:l,labelDataIndex:p.dataIndex,defaultText:p.id,isRectText:!0}),D.setStyle("fill",p.getVisual("color")),E.setHoverStyle(D,A),a.add(D),g.setItemGraphicEl(p.dataIndex,D),D.dataType="node"}),g.eachItemGraphicEl(function(p,w){var S=g.getItemModel(w);S.get("draggable")&&(p.drift=function(R,B){c._focusAdjacencyDisabled=!0,this.shape.x+=R,this.shape.y+=B,this.dirty(),s.dispatchAction({type:"dragNode",seriesId:l.id,dataIndex:g.getRawIndex(w),localX:this.shape.x/n,localY:this.shape.y/u})},p.ondragend=function(){c._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move"),p.highlight=function(){this.trigger("emphasis")},p.downplay=function(){this.trigger("normal")},p.focusNodeAdjHandler&&p.off("mouseover",p.focusNodeAdjHandler),p.unfocusNodeAdjHandler&&p.off("mouseout",p.unfocusNodeAdjHandler),S.get("focusNodeAdjacency")&&(p.on("mouseover",p.focusNodeAdjHandler=function(){c._focusAdjacencyDisabled||(c._clearTimer(),s.dispatchAction({type:"focusNodeAdjacency",seriesId:l.id,dataIndex:p.dataIndex}))}),p.on("mouseout",p.unfocusNodeAdjHandler=function(){c._focusAdjacencyDisabled||c._dispatchUnfocus(s)}))}),d.eachItemGraphicEl(function(p,w){var S=d.getItemModel(w);p.focusNodeAdjHandler&&p.off("mouseover",p.focusNodeAdjHandler),p.unfocusNodeAdjHandler&&p.off("mouseout",p.unfocusNodeAdjHandler),S.get("focusNodeAdjacency")&&(p.on("mouseover",p.focusNodeAdjHandler=function(){c._focusAdjacencyDisabled||(c._clearTimer(),s.dispatchAction({type:"focusNodeAdjacency",seriesId:l.id,edgeDataIndex:p.dataIndex}))}),p.on("mouseout",p.unfocusNodeAdjHandler=function(){c._focusAdjacencyDisabled||c._dispatchUnfocus(s)}))}),!this._data&&l.get("animation")&&a.setClipPath(h(a.getBoundingRect(),l,function(){a.removeClipPath()})),this._data=l.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(l){var r=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){r._unfocusDelayTimer=null,l.dispatchAction({type:"unfocusNodeAdjacency",seriesId:r._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(l,r,s,c){var x=l.getData(),a=x.graph,i=c.dataIndex,n=x.getItemModel(i),u=c.edgeDataIndex;if(!(i==null&&u==null)){var g=a.getNodeByIndex(i),d=a.getEdgeByIndex(u);if(a.eachNode(function(p){f(p,M,.1)}),a.eachEdge(function(p){f(p,L,.1)}),g){v(g,b);var y=n.get("focusNodeAdjacency");y==="outEdges"?O.each(g.outEdges,function(p){p.dataIndex<0||(v(p,T),v(p.node2,b))}):y==="inEdges"?O.each(g.inEdges,function(p){p.dataIndex<0||(v(p,T),v(p.node1,b))}):y==="allEdges"&&O.each(g.edges,function(p){p.dataIndex<0||(v(p,T),p.node1!==g&&v(p.node1,b),p.node2!==g&&v(p.node2,b))})}d&&(v(d,T),v(d.node1,b),v(d.node2,b))}},unfocusNodeAdjacency:function(l,r,s,c){var x=l.getGraph();x.eachNode(function(a){f(a,M)}),x.eachEdge(function(a){f(a,L)})}});function h(l,r,s){var c=new E.Rect({shape:{x:l.x-10,y:l.y-10,width:0,height:l.height+20}});return E.initProps(c,{shape:{width:l.width+20}},r,s),c}X.exports=o},768836:function(X,z,e){var E=e(3440);e(479722),E.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(F,O){O.eachComponent({mainType:"series",subType:"sankey",query:F},function(M){M.setNodePosition(F.dataIndex,[F.localX,F.localY])})})},915224:function(X,z,e){var E=e(930871),F=e(131879),O=e(835454),M=O.groupData;function b(S,R,B){S.eachSeriesByType("sankey",function(k){var P=k.get("nodeWidth"),D=k.get("nodeGap"),A=L(k,R);k.layoutInfo=A;var N=A.width,I=A.height,G=k.getGraph(),W=G.nodes,Z=G.edges;C(W);var H=F.filter(W,function($){return $.getLayout().value===0}),U=H.length!==0?0:k.get("layoutIterations"),V=k.get("orient"),Y=k.get("nodeAlign");T(W,Z,P,D,N,I,U,V,Y)})}function L(S,R){return E.getLayoutRect(S.getBoxLayoutParams(),{width:R.getWidth(),height:R.getHeight()})}function T(S,R,B,k,P,D,A,N,I){f(S,R,B,P,D,N,I),l(S,R,D,P,k,A,N),w(S,N)}function C(S){F.each(S,function(R){var B=y(R.outEdges,d),k=y(R.inEdges,d),P=R.getValue()||0,D=Math.max(B,k,P);R.setLayout({value:D},!0)})}function f(S,R,B,k,P,D,A){for(var N=[],I=[],G=[],W=[],Z=0,rt=0,H=0;H<R.length;H++)N[H]=1;for(H=0;H<S.length;H++)I[H]=S[H].inEdges.length,I[H]===0&&G.push(S[H]);for(var U=-1;G.length;){for(var V=0;V<G.length;V++){var Y=G[V],$=Y.hostGraph.data.getRawDataItem(Y.dataIndex),K=$.depth!=null&&$.depth>=0;K&&$.depth>U&&(U=$.depth),Y.setLayout({depth:K?$.depth:Z},!0),D==="vertical"?Y.setLayout({dy:B},!0):Y.setLayout({dx:B},!0);for(var J=0;J<Y.outEdges.length;J++){var Q=Y.outEdges[J],et=R.indexOf(Q);N[et]=0;var nt=Q.node2,st=S.indexOf(nt);--I[st]===0&&W.indexOf(nt)<0&&W.push(nt)}}++Z,G=W,W=[]}for(H=0;H<N.length;H++)if(N[H]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var ut=U>Z-1?U:Z-1;A&&A!=="left"&&m(S,A,D,ut);var rt=D==="vertical"?(P-B)/ut:(k-B)/ut;h(S,rt,D)}function v(S){var R=S.hostGraph.data.getRawDataItem(S.dataIndex);return R.depth!=null&&R.depth>=0}function m(S,R,B,k){if(R==="right"){for(var P=[],D=S,A=0;D.length;){for(var N=0;N<D.length;N++){var I=D[N];I.setLayout({skNodeHeight:A},!0);for(var G=0;G<I.inEdges.length;G++){var W=I.inEdges[G];P.indexOf(W.node1)<0&&P.push(W.node1)}}D=P,P=[],++A}F.each(S,function(Z){v(Z)||Z.setLayout({depth:Math.max(0,k-Z.getLayout().skNodeHeight)},!0)})}else R==="justify"&&o(S,k)}function o(S,R){F.each(S,function(B){!v(B)&&!B.outEdges.length&&B.setLayout({depth:R},!0)})}function h(S,R,B){F.each(S,function(k){var P=k.getLayout().depth*R;B==="vertical"?k.setLayout({y:P},!0):k.setLayout({x:P},!0)})}function l(S,R,B,k,P,D,A){var N=r(S,A);s(N,R,B,k,P,A),c(N,P,B,k,A);for(var I=1;D>0;D--)I*=.99,x(N,I,A),c(N,P,B,k,A),p(N,I,A),c(N,P,B,k,A)}function r(S,R){var B=[],k=R==="vertical"?"y":"x",P=M(S,function(D){return D.getLayout()[k]});return P.keys.sort(function(D,A){return D-A}),F.each(P.keys,function(D){B.push(P.buckets.get(D))}),B}function s(S,R,B,k,P,D){var A=1/0;F.each(S,function(N){var I=N.length,G=0;F.each(N,function(Z){G+=Z.getLayout().value});var W=D==="vertical"?(k-(I-1)*P)/G:(B-(I-1)*P)/G;W<A&&(A=W)}),F.each(S,function(N){F.each(N,function(I,G){var W=I.getLayout().value*A;D==="vertical"?(I.setLayout({x:G},!0),I.setLayout({dx:W},!0)):(I.setLayout({y:G},!0),I.setLayout({dy:W},!0))})}),F.each(R,function(N){var I=+N.getValue()*A;N.setLayout({dy:I},!0)})}function c(S,R,B,k,P){var D=P==="vertical"?"x":"y";F.each(S,function(A){A.sort(function(Y,$){return Y.getLayout()[D]-$.getLayout()[D]});for(var N,I,G,W=0,Z=A.length,H=P==="vertical"?"dx":"dy",U=0;U<Z;U++)I=A[U],G=W-I.getLayout()[D],G>0&&(N=I.getLayout()[D]+G,P==="vertical"?I.setLayout({x:N},!0):I.setLayout({y:N},!0)),W=I.getLayout()[D]+I.getLayout()[H]+R;var V=P==="vertical"?k:B;if(G=W-R-V,G>0)for(N=I.getLayout()[D]-G,P==="vertical"?I.setLayout({x:N},!0):I.setLayout({y:N},!0),W=N,U=Z-2;U>=0;--U)I=A[U],G=I.getLayout()[D]+I.getLayout()[H]+R-W,G>0&&(N=I.getLayout()[D]-G,P==="vertical"?I.setLayout({x:N},!0):I.setLayout({y:N},!0)),W=I.getLayout()[D]})}function x(S,R,B){F.each(S.slice().reverse(),function(k){F.each(k,function(P){if(P.outEdges.length){var D=y(P.outEdges,a,B)/y(P.outEdges,d,B);if(isNaN(D)){var A=P.outEdges.length;D=A?y(P.outEdges,i,B)/A:0}if(B==="vertical"){var N=P.getLayout().x+(D-g(P,B))*R;P.setLayout({x:N},!0)}else{var I=P.getLayout().y+(D-g(P,B))*R;P.setLayout({y:I},!0)}}})})}function a(S,R){return g(S.node2,R)*S.getValue()}function i(S,R){return g(S.node2,R)}function n(S,R){return g(S.node1,R)*S.getValue()}function u(S,R){return g(S.node1,R)}function g(S,R){return R==="vertical"?S.getLayout().x+S.getLayout().dx/2:S.getLayout().y+S.getLayout().dy/2}function d(S){return S.getValue()}function y(S,R,B){for(var k=0,P=S.length,D=-1;++D<P;){var A=+R.call(S,S[D],B);isNaN(A)||(k+=A)}return k}function p(S,R,B){F.each(S,function(k){F.each(k,function(P){if(P.inEdges.length){var D=y(P.inEdges,n,B)/y(P.inEdges,d,B);if(isNaN(D)){var A=P.inEdges.length;D=A?y(P.inEdges,u,B)/A:0}if(B==="vertical"){var N=P.getLayout().x+(D-g(P,B))*R;P.setLayout({x:N},!0)}else{var I=P.getLayout().y+(D-g(P,B))*R;P.setLayout({y:I},!0)}}})})}function w(S,R){var B=R==="vertical"?"x":"y";F.each(S,function(k){k.outEdges.sort(function(P,D){return P.node2.getLayout()[B]-D.node2.getLayout()[B]}),k.inEdges.sort(function(P,D){return P.node1.getLayout()[B]-D.node1.getLayout()[B]})}),F.each(S,function(k){var P=0,D=0;F.each(k.outEdges,function(A){A.setLayout({sy:P},!0),P+=A.getLayout().dy}),F.each(k.inEdges,function(A){A.setLayout({ty:D},!0),D+=A.getLayout().dy})})}X.exports=b},762395:function(X,z,e){var E=e(658796),F=e(131879);function O(M,b){M.eachSeriesByType("sankey",function(L){var T=L.getGraph(),C=T.nodes;if(C.length){var f=1/0,v=-1/0;F.each(C,function(m){var o=m.getLayout().value;o<f&&(f=o),o>v&&(v=o)}),F.each(C,function(m){var o=new E({type:"color",mappingMethod:"linear",dataExtent:[f,v],visual:L.get("color")}),h=o.mapValueToVisual(m.getLayout().value),l=m.getModel().get("itemStyle.color");l!=null?m.setVisual("color",l):m.setVisual("color",h)})}})}X.exports=O},538109:function(X,z,e){var E=e(3440);e(530238),e(997603);var F=e(341124),O=e(275028);e(615367),E.registerVisual(F("scatter","circle")),E.registerLayout(O("scatter"))},530238:function(X,z,e){var E=e(901664),F=e(502365),O=F.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(M,b){return E(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var M=this.option.progressive;return M??(this.option.large?5e3:this.get("progressive"))},getProgressiveThreshold:function(){var M=this.option.progressiveThreshold;return M??(this.option.large?1e4:this.get("progressiveThreshold"))},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});X.exports=O},997603:function(X,z,e){var E=e(3440),F=e(151724),O=e(934567),M=e(275028);E.extendChartView({type:"scatter",render:function(b,L,T){var C=b.getData(),f=this._updateSymbolDraw(C,b);f.updateData(C,{clipShape:this._getClipShape(b)}),this._finished=!0},incrementalPrepareRender:function(b,L,T){var C=b.getData(),f=this._updateSymbolDraw(C,b);f.incrementalPrepareUpdate(C),this._finished=!1},incrementalRender:function(b,L,T){this._symbolDraw.incrementalUpdate(b,L.getData(),{clipShape:this._getClipShape(L)}),this._finished=b.end===L.getData().count()},updateTransform:function(b,L,T){var C=b.getData();if(this.group.dirty(),!this._finished||C.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var f=M().reset(b);f.progress&&f.progress({start:0,end:C.count()},C),this._symbolDraw.updateLayout(C)},_getClipShape:function(b){var L=b.coordinateSystem,T=L&&L.getArea&&L.getArea();return b.get("clip",!0)?T:null},_updateSymbolDraw:function(b,L){var T=this._symbolDraw,C=L.pipelineContext,f=C.large;return(!T||f!==this._isLargeDraw)&&(T&&T.remove(),T=this._symbolDraw=f?new O:new F,this._isLargeDraw=f,this.group.removeAll()),this.group.add(T.group),T},remove:function(b,L){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}})},359735:function(X,z,e){var E=e(3440),F=e(131879);e(819818),e(58051),e(556472);var O=e(31310),M=e(524273),b=e(861614);E.registerVisual(F.curry(O,"sunburst")),E.registerLayout(F.curry(M,"sunburst")),E.registerProcessor(F.curry(b,"sunburst"))},76595:function(X,z,e){var E=e(131879),F=e(248070),O={NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"},M=2,b=4;function L(h,l,r){F.Group.call(this);var s=new F.Sector({z2:M});s.seriesIndex=l.seriesIndex;var c=new F.Text({z2:b,silent:h.getModel("label").get("silent")});this.add(s),this.add(c),this.updateData(!0,h,"normal",l,r);function x(){c.ignore=c.hoverIgnore}function a(){c.ignore=c.normalIgnore}this.on("emphasis",x).on("normal",a).on("mouseover",x).on("mouseout",a)}var T=L.prototype;T.updateData=function(h,l,r,s,c){this.node=l,l.piece=this,s=s||this._seriesModel,c=c||this._ecModel;var x=this.childAt(0);x.dataIndex=l.dataIndex;var a=l.getModel(),i=l.getLayout(),n=E.extend({},i);n.label=null;var u=f(l,s,c);o(l,s,u);var g=a.getModel("itemStyle").getItemStyle(),d;if(r==="normal")d=g;else{var y=a.getModel(r+".itemStyle").getItemStyle();d=E.merge(y,g)}d=E.defaults({lineJoin:"bevel",fill:d.fill||u},d),h?(x.setShape(n),x.shape.r=i.r0,F.updateProps(x,{shape:{r:i.r}},s,l.dataIndex),x.useStyle(d)):typeof d.fill=="object"&&d.fill.type||typeof x.style.fill=="object"&&x.style.fill.type?(F.updateProps(x,{shape:n},s),x.useStyle(d)):F.updateProps(x,{shape:n,style:d},s),this._updateLabel(s,u,r);var p=a.getShallow("cursor");if(p&&x.attr("cursor",p),h){var w=s.getShallow("highlightPolicy");this._initEvents(x,l,s,w)}this._seriesModel=s||this._seriesModel,this._ecModel=c||this._ecModel,F.setHoverStyle(this)},T.onEmphasis=function(h){var l=this;this.node.hostTree.root.eachNode(function(r){r.piece&&(l.node===r?r.piece.updateData(!1,r,"emphasis"):m(r,l.node,h)?r.piece.childAt(0).trigger("highlight"):h!==O.NONE&&r.piece.childAt(0).trigger("downplay"))})},T.onNormal=function(){this.node.hostTree.root.eachNode(function(h){h.piece&&h.piece.updateData(!1,h,"normal")})},T.onHighlight=function(){this.updateData(!1,this.node,"highlight")},T.onDownplay=function(){this.updateData(!1,this.node,"downplay")},T._updateLabel=function(h,l,r){var s=this.node.getModel(),c=s.getModel("label"),x=r==="normal"||r==="emphasis"?c:s.getModel(r+".label"),a=s.getModel("emphasis.label"),i=x.get("formatter"),n=i?r:"normal",u=E.retrieve(h.getFormattedLabel(this.node.dataIndex,n,null,null,"label"),this.node.name);W("show")===!1&&(u="");var g=this.node.getLayout(),d=x.get("minAngle");d==null&&(d=c.get("minAngle")),d=d/180*Math.PI;var y=g.endAngle-g.startAngle;d!=null&&Math.abs(y)<d&&(u="");var p=this.childAt(1);F.setLabelStyle(p.style,p.hoverStyle||{},c,a,{defaultText:x.getShallow("show")?u:null,autoColor:l,useInsideStyle:!0});var w=(g.startAngle+g.endAngle)/2,S=Math.cos(w),R=Math.sin(w),B,k=W("position"),P=W("distance")||0,D=W("align");k==="outside"?(B=g.r+P,D=w>Math.PI/2?"right":"left"):!D||D==="center"?(B=(g.r+g.r0)/2,D="center"):D==="left"?(B=g.r0+P,w>Math.PI/2&&(D="right")):D==="right"&&(B=g.r-P,w>Math.PI/2&&(D="left")),p.attr("style",{text:u,textAlign:D,textVerticalAlign:W("verticalAlign")||"middle",opacity:W("opacity")});var A=B*S+g.cx,N=B*R+g.cy;p.attr("position",[A,N]);var I=W("rotate"),G=0;I==="radial"?(G=-w,G<-Math.PI/2&&(G+=Math.PI)):I==="tangential"?(G=Math.PI/2-w,G>Math.PI/2?G-=Math.PI:G<-Math.PI/2&&(G+=Math.PI)):typeof I=="number"&&(G=I*Math.PI/180),p.attr("rotation",G);function W(Z){var H=x.get(Z);return H??c.get(Z)}},T._initEvents=function(h,l,r,s){h.off("mouseover").off("mouseout").off("emphasis").off("normal");var c=this,x=function(){c.onEmphasis(s)},a=function(){c.onNormal()},i=function(){c.onDownplay()},n=function(){c.onHighlight()};r.isAnimationEnabled()&&h.on("mouseover",x).on("mouseout",a).on("emphasis",x).on("normal",a).on("downplay",i).on("highlight",n)},E.inherits(L,F.Group);var C=L;function f(h,l,r){var s=h.getVisual("color"),c=h.getVisual("visualMeta");(!c||c.length===0)&&(s=null);var x=h.getModel("itemStyle").get("color");if(x)return x;if(s)return s;if(h.depth===0)return r.option.color[0];var a=r.option.color.length;return x=r.option.color[v(h)%a],x}function v(h){for(var l=h;l.depth>1;)l=l.parentNode;var r=h.getAncestors()[0];return E.indexOf(r.children,l)}function m(h,l,r){return r===O.NONE?!1:r===O.SELF?h===l:r===O.ANCESTOR?h===l||h.isAncestorOf(l):h===l||h.isDescendantOf(l)}function o(h,l,r){var s=l.getData();s.setItemVisual(h.dataIndex,"color",r)}X.exports=C},819818:function(X,z,e){var E=e(131879),F=e(502365),O=e(575174),M=e(56785),b=e(300998),L=b.wrapTreePathInfo,T=F.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(f,v){var m={name:f.name,children:f.data};C(m);var o=E.map(f.levels||[],function(r){return new M(r,this,v)},this),h=O.createTree(m,this,l);function l(r){r.wrapMethod("getItemModel",function(s,c){var x=h.getNodeByDataIndex(c),a=o[x.depth];return a&&(s.parentModel=a),s})}return h.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(f){var v=F.prototype.getDataParams.apply(this,arguments),m=this.getData().tree.getNodeByDataIndex(f);return v.treePathInfo=L(m,this),v},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(f){f?this._viewRoot=f:f=this._viewRoot;var v=this.getRawData().tree.root;(!f||f!==v&&!v.contains(f))&&(this._viewRoot=v)}});function C(f){var v=0;E.each(f.children,function(o){C(o);var h=o.value;E.isArray(h)&&(h=h[0]),v+=h});var m=f.value;E.isArray(m)&&(m=m[0]),(m==null||isNaN(m))&&(m=v),m<0&&(m=0),E.isArray(f.value)?f.value[0]=m:f.value=m}X.exports=T},58051:function(X,z,e){var E=e(131879),F=e(901911),O=e(76595),M=e(865453),b=e(317795),L=b.windowOpen,T="sunburstRootToNode",C=F.extend({type:"sunburst",init:function(){},render:function(v,m,o,h){var l=this;this.seriesModel=v,this.api=o,this.ecModel=m;var r=v.getData(),s=r.tree.root,c=v.getViewRoot(),x=this.group,a=v.get("renderLabelForZeroData"),i=[];c.eachNode(function(S){i.push(S)});var n=this._oldChildren||[];if(d(i,n),w(s,c),h&&h.highlight&&h.highlight.piece){var u=v.getShallow("highlightPolicy");h.highlight.piece.onEmphasis(u)}else if(h&&h.unhighlight){var g=this.virtualPiece;!g&&s.children.length&&(g=s.children[0].piece),g&&g.onNormal()}this._initEvents(),this._oldChildren=i;function d(S,R){if(S.length===0&&R.length===0)return;new M(R,S,B,B).add(k).update(k).remove(E.curry(k,null)).execute();function B(P){return P.getId()}function k(P,D){var A=P==null?null:S[P],N=D==null?null:R[D];y(A,N)}}function y(S,R){if(!a&&S&&!S.getValue()&&(S=null),S!==s&&R!==s){if(R&&R.piece)S?(R.piece.updateData(!1,S,"normal",v,m),r.setItemGraphicEl(S.dataIndex,R.piece)):p(R);else if(S){var B=new O(S,v,m);x.add(B),r.setItemGraphicEl(S.dataIndex,B)}}}function p(S){S&&S.piece&&(x.remove(S.piece),S.piece=null)}function w(S,R){if(R.depth>0){l.virtualPiece?l.virtualPiece.updateData(!1,S,"normal",v,m):(l.virtualPiece=new O(S,v,m),x.add(l.virtualPiece)),R.piece._onclickEvent&&R.piece.off("click",R.piece._onclickEvent);var B=function(k){l._rootToNode(R.parentNode)};R.piece._onclickEvent=B,l.virtualPiece.on("click",B)}else l.virtualPiece&&(x.remove(l.virtualPiece),l.virtualPiece=null)}},dispose:function(){},_initEvents:function(){var v=this,m=function(o){var h=!1,l=v.seriesModel.getViewRoot();l.eachNode(function(r){if(!h&&r.piece&&r.piece.childAt(0)===o.target){var s=r.getModel().get("nodeClick");if(s==="rootToNode")v._rootToNode(r);else if(s==="link"){var c=r.getModel(),x=c.get("link");if(x){var a=c.get("target",!0)||"_blank";L(x,a)}}h=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",m),this.group._onclickEvent=m},_rootToNode:function(v){v!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:T,from:this.uid,seriesId:this.seriesModel.id,targetNode:v})},containPoint:function(v,m){var o=m.getData(),h=o.getItemLayout(0);if(h){var l=v[0]-h.cx,r=v[1]-h.cy,s=Math.sqrt(l*l+r*r);return s<=h.r&&s>=h.r0}}}),f=C;X.exports=f},556472:function(X,z,e){var E=e(3440),F=e(300998),O="sunburstRootToNode";E.registerAction({type:O,update:"updateView"},function(L,T){T.eachComponent({mainType:"series",subType:"sunburst",query:L},C);function C(f,v){var m=F.retrieveTargetInfo(L,[O],f);if(m){var o=f.getViewRoot();o&&(L.direction=F.aboveViewRoot(o,m.node)?"rollUp":"drillDown"),f.resetViewRoot(m.node)}}});var M="sunburstHighlight";E.registerAction({type:M,update:"updateView"},function(L,T){T.eachComponent({mainType:"series",subType:"sunburst",query:L},C);function C(f,v){var m=F.retrieveTargetInfo(L,[M],f);m&&(L.highlight=m.node)}});var b="sunburstUnhighlight";E.registerAction({type:b,update:"updateView"},function(L,T){T.eachComponent({mainType:"series",subType:"sunburst",query:L},C);function C(f,v){L.unhighlight=!0}})},524273:function(X,z,e){var E=e(748354),F=E.parsePercent,O=e(131879),M=Math.PI/180;function b(C,f,v,m){f.eachSeriesByType(C,function(o){var h=o.get("center"),l=o.get("radius");O.isArray(l)||(l=[0,l]),O.isArray(h)||(h=[h,h]);var r=v.getWidth(),s=v.getHeight(),c=Math.min(r,s),x=F(h[0],r),a=F(h[1],s),i=F(l[0],c/2),n=F(l[1],c/2),u=-o.get("startAngle")*M,g=o.get("minAngle")*M,d=o.getData().tree.root,y=o.getViewRoot(),p=y.depth,w=o.get("sort");w!=null&&L(y,w);var S=0;O.each(y.children,function(U){!isNaN(U.getValue())&&S++});var R=y.getValue(),B=Math.PI/(R||S)*2,k=y.depth>0,P=y.height-(k?-1:1),D=(n-i)/(P||1),A=o.get("clockwise"),N=o.get("stillShowZeroSum"),I=A?1:-1,G=function(U,V){if(U){var Y=V;if(U!==d){var $=U.getValue(),K=R===0&&N?B:$*B;K<g&&(K=g),Y=V+I*K;var J=U.depth-p-(k?-1:1),Q=i+D*J,et=i+D*(J+1),nt=U.getModel();nt.get("r0")!=null&&(Q=F(nt.get("r0"),c/2)),nt.get("r")!=null&&(et=F(nt.get("r"),c/2)),U.setLayout({angle:K,startAngle:V,endAngle:Y,clockwise:A,cx:x,cy:a,r0:Q,r:et})}if(U.children&&U.children.length){var st=0;O.each(U.children,function(ut){st+=G(ut,V+st)})}return Y-V}};if(k){var W=i,Z=i+D,H=Math.PI*2;d.setLayout({angle:H,startAngle:u,endAngle:u+H,clockwise:A,cx:x,cy:a,r0:W,r:Z})}G(y,u)})}function L(C,f){var v=C.children||[];C.children=T(v,f),v.length&&O.each(C.children,function(m){L(m,f)})}function T(C,f){if(typeof f=="function")return C.sort(f);var v=f==="asc";return C.sort(function(m,o){var h=(m.getValue()-o.getValue())*(v?1:-1);return h===0?(m.dataIndex-o.dataIndex)*(v?-1:1):h})}X.exports=b},71626:function(X,z,e){var E=e(3440);e(554843),e(904547),e(639004);var F=e(104515),O=e(792425),M=e(861614);E.registerLayout(F),E.registerVisual(O),E.registerProcessor(M("themeRiver"))},904547:function(X,z,e){var E=e(502365),F=e(480554),O=e(317071),M=O.getDimensionTypeByAxis,b=e(58677),L=e(131879),T=e(835454),C=T.groupData,f=e(317795),v=f.encodeHTML,m=e(389960),o=2,h=E.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(r){h.superApply(this,"init",arguments),this.legendVisualProvider=new m(L.bind(this.getData,this),L.bind(this.getRawData,this))},fixData:function(r){var s=r.length,c={},x=C(r,function(y){return c.hasOwnProperty(y[0])||(c[y[0]]=-1),y[2]}),a=[];x.buckets.each(function(y,p){a.push({name:p,dataList:y})});for(var i=a.length,n=0;n<i;++n){for(var u=a[n].name,g=0;g<a[n].dataList.length;++g){var d=a[n].dataList[g][0];c[d]=n}for(var d in c)c.hasOwnProperty(d)&&c[d]!==n&&(c[d]=n,r[s]=[],r[s][0]=d,r[s][1]=0,r[s][2]=u,s++)}return r},getInitialData:function(r,s){for(var c=s.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0],x=c.get("type"),a=L.filter(r.data,function(w){return w[2]!==void 0}),i=this.fixData(a||[]),n=[],u=this.nameMap=L.createHashMap(),g=0,d=0;d<i.length;++d)n.push(i[d][o]),u.get(i[d][o])||(u.set(i[d][o],g),g++);var y=F(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:M(x)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),p=new b(y,this);return p.initData(i),p},getLayerSeries:function(){for(var r=this.getData(),s=r.count(),c=[],x=0;x<s;++x)c[x]=x;var a=r.mapDimension("single"),i=C(c,function(u){return r.get("name",u)}),n=[];return i.buckets.each(function(u,g){u.sort(function(d,y){return r.get(a,d)-r.get(a,y)}),n.push({name:g,indices:u})}),n},getAxisTooltipData:function(r,s,c){L.isArray(r)||(r=r?[r]:[]);for(var x=this.getData(),a=this.getLayerSeries(),i=[],n=a.length,u,g=0;g<n;++g){for(var d=Number.MAX_VALUE,y=-1,p=a[g].indices.length,w=0;w<p;++w){var S=x.get(r[0],a[g].indices[w]),R=Math.abs(S-s);R<=d&&(u=S,d=R,y=a[g].indices[w])}i.push(y)}return{dataIndices:i,nestestValue:u}},formatTooltip:function(r){var s=this.getData(),c=s.getName(r),x=s.get(s.mapDimension("value"),r);return(isNaN(x)||x==null)&&(x="-"),v(c+" : "+x)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),l=h;X.exports=l},639004:function(X,z,e){var E=e(3440),F=e(669036),O=F.Polygon,M=e(248070),b=e(131879),L=b.bind,T=b.extend,C=e(865453),f=E.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(m,o,h){var l=m.getData(),r=this.group,s=m.getLayerSeries(),c=l.getLayout("layoutInfo"),x=c.rect,a=c.boundaryGap;r.attr("position",[0,x.y+a[0]]);function i(d){return d.name}var n=new C(this._layersSeries||[],s,i,i),u={};n.add(L(g,this,"add")).update(L(g,this,"update")).remove(L(g,this,"remove")).execute();function g(d,y,p){var w=this._layers;if(d==="remove"){r.remove(w[y]);return}for(var S=[],R=[],B,k=s[y].indices,P=0;P<k.length;P++){var D=l.getItemLayout(k[P]),A=D.x,N=D.y0,I=D.y;S.push([A,N]),R.push([A,N+I]),B=l.getItemVisual(k[P],"color")}var G,W,Z=l.getItemLayout(k[0]),H=l.getItemModel(k[P-1]),U=H.getModel("label"),V=U.get("margin");if(d==="add"){var Y=u[y]=new M.Group;G=new O({shape:{points:S,stackedOnPoints:R,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),W=new M.Text({style:{x:Z.x-V,y:Z.y0+Z.y/2}}),Y.add(G),Y.add(W),r.add(Y),G.setClipPath(v(G.getBoundingRect(),m,function(){G.removeClipPath()}))}else{var Y=w[p];G=Y.childAt(0),W=Y.childAt(1),r.add(Y),u[y]=Y,M.updateProps(G,{shape:{points:S,stackedOnPoints:R}},m),M.updateProps(W,{style:{x:Z.x-V,y:Z.y0+Z.y/2}},m)}var $=H.getModel("emphasis.itemStyle"),K=H.getModel("itemStyle");M.setTextStyle(W.style,U,{text:U.get("show")?m.getFormattedLabel(k[P-1],"normal")||l.getName(k[P-1]):null,textVerticalAlign:"middle"}),G.setStyle(T({fill:B},K.getItemStyle(["color"]))),M.setHoverStyle(G,$.getItemStyle())}this._layersSeries=s,this._layers=u},dispose:function(){}});function v(m,o,h){var l=new M.Rect({shape:{x:m.x-10,y:m.y-10,width:0,height:m.height+20}});return M.initProps(l,{shape:{width:m.width+20,height:m.height+20}},o,h),l}X.exports=f},104515:function(X,z,e){var E=e(131879),F=e(748354);function O(L,T){L.eachSeriesByType("themeRiver",function(C){var f=C.getData(),v=C.coordinateSystem,m={},o=v.getRect();m.rect=o;var h=C.get("boundaryGap"),l=v.getAxis();if(m.boundaryGap=h,l.orient==="horizontal"){h[0]=F.parsePercent(h[0],o.height),h[1]=F.parsePercent(h[1],o.height);var r=o.height-h[0]-h[1];M(f,C,r)}else{h[0]=F.parsePercent(h[0],o.width),h[1]=F.parsePercent(h[1],o.width);var s=o.width-h[0]-h[1];M(f,C,s)}f.setLayout("layoutInfo",m)})}function M(L,T,C){if(L.count())for(var f=T.coordinateSystem,v=T.getLayerSeries(),m=L.mapDimension("single"),o=L.mapDimension("value"),h=E.map(v,function(u){return E.map(u.indices,function(g){var d=f.dataToPoint(L.get(m,g));return d[1]=L.get(o,g),d})}),l=b(h),r=l.y0,s=C/l.max,c=v.length,x=v[0].indices.length,a,i=0;i<x;++i){a=r[i]*s,L.setItemLayout(v[0].indices[i],{layerIndex:0,x:h[0][i][0],y0:a,y:h[0][i][1]*s});for(var n=1;n<c;++n)a+=h[n-1][i][1]*s,L.setItemLayout(v[n].indices[i],{layerIndex:n,x:h[n][i][0],y0:a,y:h[n][i][1]*s})}}function b(L){for(var T=L.length,C=L[0].length,f=[],v=[],m=0,o,h={},l=0;l<C;++l){for(var r=0,o=0;r<T;++r)o+=L[r][l][1];o>m&&(m=o),f.push(o)}for(var s=0;s<C;++s)v[s]=(m-f[s])/2;m=0;for(var c=0;c<C;++c){var x=f[c]+v[c];x>m&&(m=x)}return h.y0=v,h.max=m,h}X.exports=O},792425:function(X,z,e){var E=e(131879),F=E.createHashMap;function O(M){M.eachSeriesByType("themeRiver",function(b){var L=b.getData(),T=b.getRawData(),C=b.get("color"),f=F();L.each(function(v){f.set(L.getRawIndex(v),v)}),T.each(function(v){var m=T.getName(v),o=C[(b.nameMap.get(m)-1)%C.length];T.setItemVisual(v,"color",o);var h=f.get(v);h!=null&&L.setItemVisual(h,"color",o)})})}X.exports=O},454219:function(X,z,e){var E=e(3440);e(113664),e(443324),e(561256);var F=e(341124),O=e(655999);E.registerVisual(F("tree","circle")),E.registerLayout(O)},113664:function(X,z,e){var E=e(502365),F=e(575174),O=e(317795),M=O.encodeHTML,b=e(56785),L=E.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(T){var C={name:T.name,children:T.data},f=T.leaves||{},v=new b(f,this,this.ecModel),m=F.createTree(C,this,o);function o(s){s.wrapMethod("getItemModel",function(c,x){var a=m.getNodeByDataIndex(x);return(!a.children.length||!a.isExpand)&&(c.parentModel=v),c})}var h=0;m.eachNode("preorder",function(s){s.depth>h&&(h=s.depth)});var l=T.expandAndCollapse,r=l&&T.initialTreeDepth>=0?T.initialTreeDepth:h;return m.root.eachNode("preorder",function(s){var c=s.hostTree.data.getRawDataItem(s.dataIndex);s.isExpand=c&&c.collapsed!=null?!c.collapsed:s.depth<=r}),m.data},getOrient:function(){var T=this.get("orient");return T==="horizontal"?T="LR":T==="vertical"&&(T="TB"),T},setZoom:function(T){this.option.zoom=T},setCenter:function(T){this.option.center=T},formatTooltip:function(T){for(var C=this.getData().tree,f=C.root.children[0],v=C.getNodeByDataIndex(T),m=v.getValue(),o=v.name;v&&v!==f;)o=v.parentNode.name+"."+o,v=v.parentNode;return M(o+(isNaN(m)||m==null?"":" : "+m))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});X.exports=L},443324:function(X,z,e){var E=e(131879),F=e(248070),O=e(513980),M=e(767882),b=M.radialCoordinate,L=e(3440),T=e(18644),C=e(665176),f=e(895922),v=e(973672),m=e(422997),o=m.onIrrelevantElement,h=e(550617),l=h.__DEV__,r=e(748354),s=r.parsePercent,c=F.extendShape({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(y,p){var w=p.childPoints,S=w.length,R=p.parentPoint,B=w[0],k=w[S-1];if(S===1){y.moveTo(R[0],R[1]),y.lineTo(B[0],B[1]);return}var P=p.orient,D=P==="TB"||P==="BT"?0:1,A=1-D,N=s(p.forkPosition,1),I=[];I[D]=R[D],I[A]=R[A]+(k[A]-R[A])*N,y.moveTo(R[0],R[1]),y.lineTo(I[0],I[1]),y.moveTo(B[0],B[1]),I[D]=B[D],y.lineTo(I[0],I[1]),I[D]=k[D],y.lineTo(I[0],I[1]),y.lineTo(k[0],k[1]);for(var G=1;G<S-1;G++){var W=w[G];y.moveTo(W[0],W[1]),I[D]=W[D],y.lineTo(I[0],I[1])}}}),x=L.extendChartView({type:"tree",init:function(y,p){this._oldTree,this._mainGroup=new F.Group,this._controller=new v(p.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(y,p,w,S){var R=y.getData(),B=y.layoutInfo,k=this._mainGroup,P=y.get("layout");P==="radial"?k.attr("position",[B.x+B.width/2,B.y+B.height/2]):k.attr("position",[B.x,B.y]),this._updateViewCoordSys(y,B,P),this._updateController(y,p,w);var D=this._data,A={expandAndCollapse:y.get("expandAndCollapse"),layout:P,edgeShape:y.get("edgeShape"),edgeForkPosition:y.get("edgeForkPosition"),orient:y.getOrient(),curvature:y.get("lineStyle.curveness"),symbolRotate:y.get("symbolRotate"),symbolOffset:y.get("symbolOffset"),hoverAnimation:y.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};R.diff(D).add(function(N){a(R,N)&&n(R,N,null,k,y,A)}).update(function(N,I){var G=D.getItemGraphicEl(I);if(!a(R,N)){G&&g(D,I,G,k,y,A);return}n(R,N,G,k,y,A)}).remove(function(N){var I=D.getItemGraphicEl(N);I&&g(D,N,I,k,y,A)}).execute(),this._nodeScaleRatio=y.get("nodeScaleRatio"),this._updateNodeAndLinkScale(y),A.expandAndCollapse===!0&&R.eachItemGraphicEl(function(N,I){N.off("click").on("click",function(){w.dispatchAction({type:"treeExpandAndCollapse",seriesId:y.id,dataIndex:I})})}),this._data=R},_updateViewCoordSys:function(y){var p=y.getData(),w=[];p.each(function(D){var A=p.getItemLayout(D);A&&!isNaN(A.x)&&!isNaN(A.y)&&w.push([+A.x,+A.y])});var S=[],R=[];T.fromPoints(w,S,R);var B=this._min,k=this._max;R[0]-S[0]===0&&(S[0]=B?B[0]:S[0]-1,R[0]=k?k[0]:R[0]+1),R[1]-S[1]===0&&(S[1]=B?B[1]:S[1]-1,R[1]=k?k[1]:R[1]+1);var P=y.coordinateSystem=new C;P.zoomLimit=y.get("scaleLimit"),P.setBoundingRect(S[0],S[1],R[0]-S[0],R[1]-S[1]),P.setCenter(y.get("center")),P.setZoom(y.get("zoom")),this.group.attr({position:P.position,scale:P.scale}),this._viewCoordSys=P,this._min=S,this._max=R},_updateController:function(y,p,w){var S=this._controller,R=this._controllerHost,B=this.group;S.setPointerChecker(function(k,P,D){var A=B.getBoundingRect();return A.applyTransform(B.transform),A.contain(P,D)&&!o(k,w,y)}),S.enable(y.get("roam")),R.zoomLimit=y.get("scaleLimit"),R.zoom=y.coordinateSystem.getZoom(),S.off("pan").off("zoom").on("pan",function(k){f.updateViewOnPan(R,k.dx,k.dy),w.dispatchAction({seriesId:y.id,type:"treeRoam",dx:k.dx,dy:k.dy})},this).on("zoom",function(k){f.updateViewOnZoom(R,k.scale,k.originX,k.originY),w.dispatchAction({seriesId:y.id,type:"treeRoam",zoom:k.scale,originX:k.originX,originY:k.originY}),this._updateNodeAndLinkScale(y)},this)},_updateNodeAndLinkScale:function(y){var p=y.getData(),w=this._getNodeGlobalScale(y),S=[w,w];p.eachItemGraphicEl(function(R,B){R.attr("scale",S)})},_getNodeGlobalScale:function(y){var p=y.coordinateSystem;if(p.type!=="view")return 1;var w=this._nodeScaleRatio,S=p.scale,R=S&&S[0]||1,B=p.getZoom(),k=(B-1)*w+1;return k/R},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}});function a(y,p){var w=y.getItemLayout(p);return w&&!isNaN(w.x)&&!isNaN(w.y)&&y.getItemVisual(p,"symbol")!=="none"}function i(y,p,w){return w.itemModel=p,w.itemStyle=p.getModel("itemStyle").getItemStyle(),w.hoverItemStyle=p.getModel("emphasis.itemStyle").getItemStyle(),w.lineStyle=p.getModel("lineStyle").getLineStyle(),w.labelModel=p.getModel("label"),w.hoverLabelModel=p.getModel("emphasis.label"),y.isExpand===!1&&y.children.length!==0?w.symbolInnerColor=w.itemStyle.fill:w.symbolInnerColor="#fff",w}function n(y,p,w,S,R,A){var k=!w,P=y.tree.getNodeByDataIndex(p),D=P.getModel(),A=i(P,D,A),N=y.tree.root,I=P.parentNode===N?P:P.parentNode||P,G=y.getItemGraphicEl(I.dataIndex),W=I.getLayout(),Z=G?{x:G.position[0],y:G.position[1],rawX:G.__radialOldRawX,rawY:G.__radialOldRawY}:W,H=P.getLayout();k?(w=new O(y,p,A),w.attr("position",[Z.x,Z.y])):w.updateData(y,p,A),w.__radialOldRawX=w.__radialRawX,w.__radialOldRawY=w.__radialRawY,w.__radialRawX=H.rawX,w.__radialRawY=H.rawY,S.add(w),y.setItemGraphicEl(p,w),F.updateProps(w,{position:[H.x,H.y]},R);var U=w.getSymbolPath();if(A.layout==="radial"){var V=N.children[0],Y=V.getLayout(),$=V.children.length,K,J;if(H.x===Y.x&&P.isExpand===!0){var Q={};Q.x=(V.children[0].getLayout().x+V.children[$-1].getLayout().x)/2,Q.y=(V.children[0].getLayout().y+V.children[$-1].getLayout().y)/2,K=Math.atan2(Q.y-Y.y,Q.x-Y.x),K<0&&(K=Math.PI*2+K),J=Q.x<Y.x,J&&(K=K-Math.PI)}else K=Math.atan2(H.y-Y.y,H.x-Y.x),K<0&&(K=Math.PI*2+K),P.children.length===0||P.children.length!==0&&P.isExpand===!1?(J=H.x<Y.x,J&&(K=K-Math.PI)):(J=H.x>Y.x,J||(K=K-Math.PI));var et=J?"left":"right",nt=A.labelModel.get("rotate"),st=nt*(Math.PI/180);U.setStyle({textPosition:A.labelModel.get("position")||et,textRotation:nt==null?-K:st,textOrigin:"center",verticalAlign:"middle"})}u(R,P,N,w,Z,W,H,S,A)}function u(y,p,w,S,R,B,k,P,D){var A=D.edgeShape,N=S.__edge;if(A==="curve")p.parentNode&&p.parentNode!==w&&(N||(N=S.__edge=new F.BezierCurve({shape:d(D,R,R),style:E.defaults({opacity:0,strokeNoScale:!0},D.lineStyle)})),F.updateProps(N,{shape:d(D,B,k),style:E.defaults({opacity:1},D.lineStyle)},y));else if(A==="polyline"&&D.layout==="orthogonal"&&p!==w&&p.children&&p.children.length!==0&&p.isExpand===!0){for(var I=p.children,G=[],W=0;W<I.length;W++){var Z=I[W].getLayout();G.push([Z.x,Z.y])}N||(N=S.__edge=new c({shape:{parentPoint:[k.x,k.y],childPoints:[[k.x,k.y]],orient:D.orient,forkPosition:D.edgeForkPosition},style:E.defaults({opacity:0,strokeNoScale:!0},D.lineStyle)})),F.updateProps(N,{shape:{parentPoint:[k.x,k.y],childPoints:G},style:E.defaults({opacity:1},D.lineStyle)},y)}P.add(N)}function g(y,p,w,S,R,A){for(var k=y.tree.getNodeByDataIndex(p),P=y.tree.root,D=k.getModel(),A=i(k,D,A),N=k.parentNode===P?k:k.parentNode||k,H=A.edgeShape,I;I=N.getLayout(),I==null;)N=N.parentNode===P?N:N.parentNode||N;F.updateProps(w,{position:[I.x+1,I.y+1]},R,function(){S.remove(w),y.setItemGraphicEl(p,null)}),w.fadeOut(null,{keepLabel:!0});var G=y.getItemGraphicEl(N.dataIndex),W=G.__edge,Z=w.__edge||(N.isExpand===!1||N.children.length===1?W:void 0),H=A.edgeShape;Z&&(H==="curve"?F.updateProps(Z,{shape:d(A,I,I),style:{opacity:0}},R,function(){S.remove(Z)}):H==="polyline"&&A.layout==="orthogonal"&&F.updateProps(Z,{shape:{parentPoint:[I.x,I.y],childPoints:[[I.x,I.y]]},style:{opacity:0}},R,function(){S.remove(Z)}))}function d(y,p,w){var S,R,B,k,P=y.orient,D,A,N,I;if(y.layout==="radial"){D=p.rawX,N=p.rawY,A=w.rawX,I=w.rawY;var G=b(D,N),W=b(D,N+(I-N)*y.curvature),Z=b(A,I+(N-I)*y.curvature),H=b(A,I);return{x1:G.x,y1:G.y,x2:H.x,y2:H.y,cpx1:W.x,cpy1:W.y,cpx2:Z.x,cpy2:Z.y}}else D=p.x,N=p.y,A=w.x,I=w.y,(P==="LR"||P==="RL")&&(S=D+(A-D)*y.curvature,R=N,B=A+(D-A)*y.curvature,k=I),(P==="TB"||P==="BT")&&(S=D,R=N+(I-N)*y.curvature,B=A,k=I+(N-I)*y.curvature);return{x1:D,y1:N,x2:A,y2:I,cpx1:S,cpy1:R,cpx2:B,cpy2:k}}X.exports=x},767882:function(X,z,e){var E=e(930871);function F(r){r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var s=[r],c,x;c=s.pop();)if(x=c.children,c.isExpand&&x.length)for(var a=x.length,i=a-1;i>=0;i--){var n=x[i];n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i,thread:null},s.push(n)}}function O(r,s){var c=r.isExpand?r.children:[],x=r.parentNode.children,a=r.hierNode.i?x[r.hierNode.i-1]:null;if(c.length){C(r);var i=(c[0].hierNode.prelim+c[c.length-1].hierNode.prelim)/2;a?(r.hierNode.prelim=a.hierNode.prelim+s(r,a),r.hierNode.modifier=r.hierNode.prelim-i):r.hierNode.prelim=i}else a&&(r.hierNode.prelim=a.hierNode.prelim+s(r,a));r.parentNode.hierNode.defaultAncestor=f(r,a,r.parentNode.hierNode.defaultAncestor||x[0],s)}function M(r){var s=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:s},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function b(r){return arguments.length?r:l}function L(r,s){var c={};return r-=Math.PI/2,c.x=s*Math.cos(r),c.y=s*Math.sin(r),c}function T(r,s){return E.getLayoutRect(r.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}function C(r){for(var s=r.children,c=s.length,x=0,a=0;--c>=0;){var i=s[c];i.hierNode.prelim+=x,i.hierNode.modifier+=x,a+=i.hierNode.change,x+=i.hierNode.shift+a}}function f(r,s,c,x){if(s){for(var a=r,i=r,n=i.parentNode.children[0],u=s,g=a.hierNode.modifier,d=i.hierNode.modifier,y=n.hierNode.modifier,p=u.hierNode.modifier;u=v(u),i=m(i),u&&i;){a=v(a),n=m(n),a.hierNode.ancestor=r;var w=u.hierNode.prelim+p-i.hierNode.prelim-d+x(u,i);w>0&&(h(o(u,r,c),r,w),d+=w,g+=w),p+=u.hierNode.modifier,d+=i.hierNode.modifier,g+=a.hierNode.modifier,y+=n.hierNode.modifier}u&&!v(a)&&(a.hierNode.thread=u,a.hierNode.modifier+=p-g),i&&!m(n)&&(n.hierNode.thread=i,n.hierNode.modifier+=d-y,c=r)}return c}function v(r){var s=r.children;return s.length&&r.isExpand?s[s.length-1]:r.hierNode.thread}function m(r){var s=r.children;return s.length&&r.isExpand?s[0]:r.hierNode.thread}function o(r,s,c){return r.hierNode.ancestor.parentNode===s.parentNode?r.hierNode.ancestor:c}function h(r,s,c){var x=c/(s.hierNode.i-r.hierNode.i);s.hierNode.change-=x,s.hierNode.shift+=c,s.hierNode.modifier+=c,s.hierNode.prelim+=c,r.hierNode.change+=x}function l(r,s){return r.parentNode===s.parentNode?1:2}z.init=F,z.firstWalk=O,z.secondWalk=M,z.separation=b,z.radialCoordinate=L,z.getViewRect=T},901825:function(X,z){function e(F,O,M){for(var b=[F],L=[],T;T=b.pop();)if(L.push(T),T.isExpand){var C=T.children;if(C.length)for(var f=0;f<C.length;f++)b.push(C[f])}for(;T=L.pop();)O(T,M)}function E(F,O){for(var M=[F],b;b=M.pop();)if(O(b),b.isExpand){var L=b.children;if(L.length)for(var T=L.length-1;T>=0;T--)M.push(L[T])}}z.eachAfter=e,z.eachBefore=E},561256:function(X,z,e){var E=e(3440),F=e(264072),O=F.updateCenterAndZoom;E.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(M,b){b.eachComponent({mainType:"series",subType:"tree",query:M},function(L){var T=M.dataIndex,C=L.getData().tree,f=C.getNodeByDataIndex(T);f.isExpand=!f.isExpand})}),E.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(M,b){b.eachComponent({mainType:"series",subType:"tree",query:M},function(L){var T=L.coordinateSystem,C=O(T,M);L.setCenter&&L.setCenter(C.center),L.setZoom&&L.setZoom(C.zoom)})})},655999:function(X,z,e){var E=e(901825),F=E.eachAfter,O=E.eachBefore,M=e(767882),b=M.init,L=M.firstWalk,T=M.secondWalk,C=M.separation,f=M.radialCoordinate,v=M.getViewRect;function m(h,l){h.eachSeriesByType("tree",function(r){o(r,l)})}function o(h,l){var r=v(h,l);h.layoutInfo=r;var s=h.get("layout"),c=0,x=0,a=null;s==="radial"?(c=2*Math.PI,x=Math.min(r.height,r.width)/2,a=C(function(P,D){return(P.parentNode===D.parentNode?1:2)/P.depth})):(c=r.width,x=r.height,a=C());var i=h.getData().tree.root,n=i.children[0];if(n){b(i),F(n,L,a),i.hierNode.modifier=-n.hierNode.prelim,O(n,T);var u=n,g=n,d=n;O(n,function(P){var D=P.getLayout().x;D<u.getLayout().x&&(u=P),D>g.getLayout().x&&(g=P),P.depth>d.depth&&(d=P)});var y=u===g?1:a(u,g)/2,p=y-u.getLayout().x,w=0,S=0,R=0,B=0;if(s==="radial")w=c/(g.getLayout().x+y+p),S=x/(d.depth-1||1),O(n,function(P){R=(P.getLayout().x+p)*w,B=(P.depth-1)*S;var D=f(R,B);P.setLayout({x:D.x,y:D.y,rawX:R,rawY:B},!0)});else{var k=h.getOrient();k==="RL"||k==="LR"?(S=x/(g.getLayout().x+y+p),w=c/(d.depth-1||1),O(n,function(P){B=(P.getLayout().x+p)*S,R=k==="LR"?(P.depth-1)*w:c-(P.depth-1)*w,P.setLayout({x:R,y:B},!0)})):(k==="TB"||k==="BT")&&(w=c/(g.getLayout().x+y+p),S=x/(d.depth-1||1),O(n,function(P){R=(P.getLayout().x+p)*w,B=k==="TB"?(P.depth-1)*S:x-(P.depth-1)*S,P.setLayout({x:R,y:B},!0)}))}}}X.exports=m},97408:function(X,z,e){var E=e(3440);e(412377),e(272593),e(104945);var F=e(296913),O=e(716472);E.registerVisual(F),E.registerLayout(O)},93448:function(X,z,e){var E=e(248070),F=e(930871),O=e(131879),M=e(300998),b=M.wrapTreePathInfo,L=8,T=8,C=5;function f(h){this.group=new E.Group,h.add(this.group)}f.prototype={constructor:f,render:function(h,l,r,s){var c=h.getModel("breadcrumb"),x=this.group;if(x.removeAll(),!(!c.get("show")||!r)){var a=c.getModel("itemStyle"),i=a.getModel("textStyle"),n={pos:{left:c.get("left"),right:c.get("right"),top:c.get("top"),bottom:c.get("bottom")},box:{width:l.getWidth(),height:l.getHeight()},emptyItemWidth:c.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,n,i),this._renderContent(h,n,a,i,s),F.positionElement(x,n.pos,n.box)}},_prepare:function(h,l,r){for(var s=h;s;s=s.parentNode){var c=s.getModel().get("name"),x=r.getTextRect(c),a=Math.max(x.width+L*2,l.emptyItemWidth);l.totalWidth+=a+T,l.renderList.push({node:s,text:c,width:a})}},_renderContent:function(h,l,r,s,c){for(var x=0,a=l.emptyItemWidth,i=h.get("breadcrumb.height"),n=F.getAvailableSize(l.pos,l.box),u=l.totalWidth,g=l.renderList,d=g.length-1;d>=0;d--){var y=g[d],p=y.node,w=y.width,S=y.text;u>n.width&&(u-=w-a,w=a,S=null);var R=new E.Polygon({shape:{points:v(x,0,w,i,d===g.length-1,d===0)},style:O.defaults(r.getItemStyle(),{lineJoin:"bevel",text:S,textFill:s.getTextColor(),textFont:s.getFont()}),z:10,onclick:O.curry(c,p)});this.group.add(R),m(R,h,p),x+=w+T}},remove:function(){this.group.removeAll()}};function v(h,l,r,s,c,x){var a=[[c?h:h-C,l],[h+r,l],[h+r,l+s],[c?h:h-C,l+s]];return!x&&a.splice(2,0,[h+r+C,l+s/2]),!c&&a.push([h,l+s/2]),a}function m(h,l,r){h.eventData={componentType:"series",componentSubType:"treemap",componentIndex:l.componentIndex,seriesIndex:l.componentIndex,seriesName:l.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&b(r,l)}}var o=f;X.exports=o},412377:function(X,z,e){var E=e(131879),F=e(502365),O=e(575174),M=e(56785),b=e(317795),L=b.encodeHTML,T=b.addCommas,C=e(300998),f=C.wrapTreePathInfo,v=F.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(h,l){var r={name:h.name,children:h.data};m(r);var s=h.levels||[],c=this.designatedVisualItemStyle={},x=new M({itemStyle:c},this,l);s=h.levels=o(s,l);var a=E.map(s||[],function(u){return new M(u,x,l)},this),i=O.createTree(r,this,n);function n(u){u.wrapMethod("getItemModel",function(g,d){var y=i.getNodeByDataIndex(d),p=a[y.depth];return g.parentModel=p||x,g})}return i.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(h){var l=this.getData(),r=this.getRawValue(h),s=E.isArray(r)?T(r[0]):T(r),c=l.getName(h);return L(c+": "+s)},getDataParams:function(h){var l=F.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(h);return l.treePathInfo=f(r,this),l},setLayoutInfo:function(h){this.layoutInfo=this.layoutInfo||{},E.extend(this.layoutInfo,h)},mapIdToIndex:function(h){var l=this._idIndexMap;l||(l=this._idIndexMap=E.createHashMap(),this._idIndexMapCount=0);var r=l.get(h);return r==null&&l.set(h,r=this._idIndexMapCount++),r},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(h){h?this._viewRoot=h:h=this._viewRoot;var l=this.getRawData().tree.root;(!h||h!==l&&!l.contains(h))&&(this._viewRoot=l)}});function m(h){var l=0;E.each(h.children,function(s){m(s);var c=s.value;E.isArray(c)&&(c=c[0]),l+=c});var r=h.value;E.isArray(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=l),r<0&&(r=0),E.isArray(h.value)?h.value[0]=r:h.value=r}function o(h,l){var r=l.get("color");if(r){h=h||[];var s;if(E.each(h,function(x){var a=new M(x),i=a.get("color");(a.get("itemStyle.color")||i&&i!=="none")&&(s=!0)}),!s){var c=h[0]||(h[0]={});c.color=r.slice()}return h}}X.exports=v},272593:function(X,z,e){var E=e(3440),F=e(131879),O=e(248070),M=e(865453),b=e(300998),L=e(93448),T=e(973672),C=e(795946),f=e(343970),v=e(957847),m=e(769003),o=e(317795),h=o.windowOpen,l=F.bind,r=O.Group,s=O.Rect,c=F.each,x=3,a=["label"],i=["emphasis","label"],n=["upperLabel"],u=["emphasis","upperLabel"],g=10,d=1,y=2,p=m([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),w=function(P){var D=p(P);return D.stroke=D.fill=D.lineWidth=null,D},S=E.extendChartView({type:"treemap",init:function(P,D){this._containerGroup,this._storage=R(),this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(P,D,A,N){var I=D.findComponents({mainType:"series",subType:"treemap",query:N});if(!(F.indexOf(I,P)<0)){this.seriesModel=P,this.api=A,this.ecModel=D;var G=["treemapZoomToNode","treemapRootToNode"],W=b.retrieveTargetInfo(N,G,P),Z=N&&N.type,H=P.layoutInfo,U=!this._oldTree,V=this._storage,Y=Z==="treemapRootToNode"&&W&&V?{rootNodeGroup:V.nodeGroup[W.node.getRawIndex()],direction:N.direction}:null,$=this._giveContainerGroup(H),K=this._doRender($,P,Y);!U&&(!Z||Z==="treemapZoomToNode"||Z==="treemapRootToNode")?this._doAnimation($,K,P,Y):K.renderFinally(),this._resetController(A),this._renderBreadcrumb(P,A,W)}},_giveContainerGroup:function(P){var D=this._containerGroup;return D||(D=this._containerGroup=new r,this._initEvents(D),this.group.add(D)),D.attr("position",[P.x,P.y]),D},_doRender:function(P,D,A){var N=D.getData().tree,I=this._oldTree,G=R(),W=R(),Z=this._storage,H=[],U=F.curry(B,D,W,Z,A,G,H);Y(N.root?[N.root]:[],I&&I.root?[I.root]:[],P,N===I||!I,0);var V=$(Z);return this._oldTree=N,this._storage=W,{lastsForAnimation:G,willDeleteEls:V,renderFinally:K};function Y(J,Q,et,nt,st){nt?(Q=J,c(J,function(ht,Pt){!ht.isRemoved()&&rt(Pt,Pt)})):new M(Q,J,ut,ut).add(rt).update(rt).remove(F.curry(rt,null)).execute();function ut(ht){return ht.getId()}function rt(ht,Pt){var wt=ht!=null?J[ht]:null,Mt=Pt!=null?Q[Pt]:null,Ft=U(wt,Mt,et,st);Ft&&Y(wt&&wt.viewChildren||[],Mt&&Mt.viewChildren||[],Ft,nt,st+1)}}function $(J){var Q=R();return J&&c(J,function(et,nt){var st=Q[nt];c(et,function(ut){ut&&(st.push(ut),ut.__tmWillDelete=1)})}),Q}function K(){c(V,function(J){c(J,function(Q){Q.parent&&Q.parent.remove(Q)})}),c(H,function(J){J.invisible=!0,J.dirty()})}},_doAnimation:function(P,D,A,N){if(A.get("animation")){var I=A.get("animationDurationUpdate"),G=A.get("animationEasing"),W=v.createWrap();c(D.willDeleteEls,function(Z,H){c(Z,function(U,V){if(!U.invisible){var Y=U.parent,$;if(N&&N.direction==="drillDown")$=Y===N.rootNodeGroup?{shape:{x:0,y:0,width:Y.__tmNodeWidth,height:Y.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var K=0,J=0;Y.__tmWillDelete||(K=Y.__tmNodeWidth/2,J=Y.__tmNodeHeight/2),$=H==="nodeGroup"?{position:[K,J],style:{opacity:0}}:{shape:{x:K,y:J,width:0,height:0},style:{opacity:0}}}$&&W.add(U,$,I,G)}})}),c(this._storage,function(Z,H){c(Z,function(U,V){var Y=D.lastsForAnimation[H][V],$={};Y&&(H==="nodeGroup"?Y.old&&($.position=U.position.slice(),U.attr("position",Y.old)):(Y.old&&($.shape=F.extend({},U.shape),U.setShape(Y.old)),Y.fadein?(U.setStyle("opacity",0),$.style={opacity:1}):U.style.opacity!==1&&($.style={opacity:1})),W.add(U,$,I,G))})},this),this._state="animating",W.done(l(function(){this._state="ready",D.renderFinally()},this)).start()}},_resetController:function(P){var D=this._controller;D||(D=this._controller=new T(P.getZr()),D.enable(this.seriesModel.get("roam")),D.on("pan",l(this._onPan,this)),D.on("zoom",l(this._onZoom,this)));var A=new C(0,0,P.getWidth(),P.getHeight());D.setPointerChecker(function(N,I,G){return A.contain(I,G)})},_clearController:function(){var P=this._controller;P&&(P.dispose(),P=null)},_onPan:function(P){if(this._state!=="animating"&&(Math.abs(P.dx)>x||Math.abs(P.dy)>x)){var D=this.seriesModel.getData().tree.root;if(!D)return;var A=D.getLayout();if(!A)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:A.x+P.dx,y:A.y+P.dy,width:A.width,height:A.height}})}},_onZoom:function(P){var D=P.originX,A=P.originY;if(this._state!=="animating"){var N=this.seriesModel.getData().tree.root;if(!N)return;var I=N.getLayout();if(!I)return;var G=new C(I.x,I.y,I.width,I.height),W=this.seriesModel.layoutInfo;D-=W.x,A-=W.y;var Z=f.create();f.translate(Z,Z,[-D,-A]),f.scale(Z,Z,[P.scale,P.scale]),f.translate(Z,Z,[D,A]),G.applyTransform(Z),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:G.x,y:G.y,width:G.width,height:G.height}})}},_initEvents:function(P){P.on("click",function(D){if(this._state==="ready"){var A=this.seriesModel.get("nodeClick",!0);if(A){var N=this.findTarget(D.offsetX,D.offsetY);if(N){var I=N.node;if(I.getLayout().isLeafRoot)this._rootToNode(N);else if(A==="zoomToNode")this._zoomToNode(N);else if(A==="link"){var G=I.hostTree.data.getItemModel(I.dataIndex),W=G.get("link",!0),Z=G.get("target",!0)||"blank";W&&h(W,Z)}}}}},this)},_renderBreadcrumb:function(P,D,A){A||(A=P.get("leafDepth",!0)!=null?{node:P.getViewRoot()}:this.findTarget(D.getWidth()/2,D.getHeight()/2),A||(A={node:P.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new L(this.group))).render(P,D,A.node,l(N,this));function N(I){this._state!=="animating"&&(b.aboveViewRoot(P.getViewRoot(),I)?this._rootToNode({node:I}):this._zoomToNode({node:I}))}},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=R(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(P){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:P.node})},_rootToNode:function(P){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:P.node})},findTarget:function(P,D){var A,N=this.seriesModel.getViewRoot();return N.eachNode({attr:"viewChildren",order:"preorder"},function(I){var G=this._storage.background[I.getRawIndex()];if(G){var W=G.transformCoordToLocal(P,D),Z=G.shape;if(Z.x<=W[0]&&W[0]<=Z.x+Z.width&&Z.y<=W[1]&&W[1]<=Z.y+Z.height)A={node:I,offsetX:W[0],offsetY:W[1]};else return!1}},this),A}});function R(){return{nodeGroup:[],background:[],content:[]}}function B(P,D,A,N,I,G,W,Z,H,U){if(!W)return;var V=W.getLayout(),Y=P.getData();if(Y.setItemGraphicEl(W.dataIndex,null),!V||!V.isInView)return;var $=V.width,K=V.height,J=V.borderWidth,Q=V.invisible,et=W.getRawIndex(),nt=Z&&Z.getRawIndex(),st=W.viewChildren,ut=V.upperHeight,rt=st&&st.length,ht=W.getModel("itemStyle"),Pt=W.getModel("emphasis.itemStyle"),wt=vt("nodeGroup",r);if(!wt)return;if(H.add(wt),wt.attr("position",[V.x||0,V.y||0]),wt.__tmNodeWidth=$,wt.__tmNodeHeight=K,V.isAboveViewRoot)return wt;var Mt=W.getModel(),Ft=vt("background",s,U,d);if(Ft&&Rt(wt,Ft,rt&&V.upperLabelHeight),rt)O.isHighDownDispatcher(wt)&&O.setAsHighDownDispatcher(wt,!1),Ft&&(O.setAsHighDownDispatcher(Ft,!0),Y.setItemGraphicEl(W.dataIndex,Ft));else{var Dt=vt("content",s,U,y);Dt&&Tt(wt,Dt),Ft&&O.isHighDownDispatcher(Ft)&&O.setAsHighDownDispatcher(Ft,!1),O.setAsHighDownDispatcher(wt,!0),Y.setItemGraphicEl(W.dataIndex,wt)}return wt;function Rt(jt,zt,Yt){if(zt.dataIndex=W.dataIndex,zt.seriesIndex=P.seriesIndex,zt.setShape({x:0,y:0,width:$,height:K}),Q)mt(zt);else{zt.invisible=!1;var Zt=W.getVisual("borderColor",!0),ft=Pt.get("borderColor"),gt=w(ht);gt.fill=Zt;var dt=p(Pt);if(dt.fill=ft,Yt){var lt=$-2*J;Nt(gt,dt,Zt,lt,ut,{x:J,y:0,width:lt,height:ut})}else gt.text=dt.text=null;zt.setStyle(gt),O.setElementHoverStyle(zt,dt)}jt.add(zt)}function Tt(jt,zt){zt.dataIndex=W.dataIndex,zt.seriesIndex=P.seriesIndex;var Yt=Math.max($-2*J,0),Zt=Math.max(K-2*J,0);if(zt.culling=!0,zt.setShape({x:J,y:J,width:Yt,height:Zt}),Q)mt(zt);else{zt.invisible=!1;var ft=W.getVisual("color",!0),gt=w(ht);gt.fill=ft;var dt=p(Pt);Nt(gt,dt,ft,Yt,Zt),zt.setStyle(gt),O.setElementHoverStyle(zt,dt)}jt.add(zt)}function mt(jt){!jt.invisible&&G.push(jt)}function Nt(jt,zt,Yt,Zt,ft,gt){var dt=Mt.get("name"),lt=Mt.getModel(gt?n:a),ot=Mt.getModel(gt?u:i),it=lt.getShallow("show");O.setLabelStyle(jt,zt,lt,ot,{defaultText:it?dt:null,autoColor:Yt,isRectText:!0,labelFetcher:P,labelDataIndex:W.dataIndex,labelProp:gt?"upperLabel":"label"}),ct(jt,gt,V),ct(zt,gt,V),gt&&(jt.textRect=F.clone(gt)),jt.truncate=it&&lt.get("ellipsis")?{outerWidth:Zt,outerHeight:ft,minChar:2}:null}function ct(jt,zt,Yt){var Zt=jt.text;if(!zt&&Yt.isLeafRoot&&Zt!=null){var ft=P.get("drillDownIcon",!0);jt.text=ft?ft+" "+Zt:Zt}}function vt(jt,zt,Yt,Zt){var ft=nt!=null&&A[jt][nt],gt=I[jt];return ft?(A[jt][nt]=null,Lt(gt,ft,jt)):Q||(ft=new zt({z:k(Yt,Zt)}),ft.__tmDepth=Yt,ft.__tmStorageName=jt,Ct(gt,ft,jt)),D[jt][et]=ft}function Lt(jt,zt,Yt){var Zt=jt[et]={};Zt.old=Yt==="nodeGroup"?zt.position.slice():F.extend({},zt.shape)}function Ct(jt,zt,Yt){var Zt=jt[et]={},ft=W.parentNode;if(ft&&(!N||N.direction==="drillDown")){var gt=0,dt=0,lt=I.background[ft.getRawIndex()];!N&&lt&&lt.old&&(gt=lt.old.width,dt=lt.old.height),Zt.old=Yt==="nodeGroup"?[0,dt]:{x:gt,y:dt,width:0,height:0}}Zt.fadein=Yt!=="nodeGroup"}}function k(P,D){var A=P*g+D;return(A-1)/A}X.exports=S},104945:function(X,z,e){for(var E=e(3440),F=e(300998),O=function(){},M=["treemapZoomToNode","treemapRender","treemapMove"],b=0;b<M.length;b++)E.registerAction({type:M[b],update:"updateView"},O);E.registerAction({type:"treemapRootToNode",update:"updateView"},function(L,T){T.eachComponent({mainType:"series",subType:"treemap",query:L},C);function C(f,v){var m=["treemapZoomToNode","treemapRootToNode"],o=F.retrieveTargetInfo(L,m,f);if(o){var h=f.getViewRoot();h&&(L.direction=F.aboveViewRoot(h,o.node)?"rollUp":"drillDown"),f.resetViewRoot(o.node)}}})},716472:function(X,z,e){var E=e(131879),F=e(795946),O=e(748354),M=O.parsePercent,b=O.MAX_SAFE_INTEGER,L=e(930871),T=e(300998),C=Math.max,f=Math.min,v=E.retrieve,m=E.each,o=["itemStyle","borderWidth"],h=["itemStyle","gapWidth"],l=["upperLabel","show"],r=["upperLabel","height"],s={seriesType:"treemap",reset:function(S,R,B,k){var P=B.getWidth(),D=B.getHeight(),A=S.option,N=L.getLayoutRect(S.getBoxLayoutParams(),{width:B.getWidth(),height:B.getHeight()}),I=A.size||[],G=M(v(N.width,I[0]),P),W=M(v(N.height,I[1]),D),Z=k&&k.type,H=["treemapZoomToNode","treemapRootToNode"],U=T.retrieveTargetInfo(k,H,S),V=Z==="treemapRender"||Z==="treemapMove"?k.rootRect:null,Y=S.getViewRoot(),$=T.getPathToRoot(Y);if(Z!=="treemapMove"){var K=Z==="treemapZoomToNode"?d(S,U,Y,G,W):V?[V.width,V.height]:[G,W],J=A.sort;J&&J!=="asc"&&J!=="desc"&&(J="desc");var Q={squareRatio:A.squareRatio,sort:J,leafDepth:A.leafDepth};Y.hostTree.clearLayouts();var et={x:0,y:0,width:K[0],height:K[1],area:K[0]*K[1]};Y.setLayout(et),c(Y,Q,!1,0);var et=Y.getLayout();m($,function(st,ut){var rt=($[ut+1]||Y).getValue();st.setLayout(E.extend({dataExtent:[rt,rt],borderWidth:0,upperHeight:0},et))})}var nt=S.getData().tree.root;nt.setLayout(y(N,V,U),!0),S.setLayoutInfo(N),p(nt,new F(-N.x,-N.y,P,D),$,Y,0)}};function c(S,R,B,k){var P,D;if(!S.isRemoved()){var A=S.getLayout();P=A.width,D=A.height;var U=S.getModel(),N=U.get(o),I=U.get(h)/2,G=w(U),W=Math.max(N,G),Z=N-I,H=W-I,U=S.getModel();S.setLayout({borderWidth:N,upperHeight:W,upperLabelHeight:G},!0),P=C(P-2*Z,0),D=C(D-Z-H,0);var V=P*D,Y=x(S,U,V,R,B,k);if(Y.length){var $={x:Z,y:H,width:P,height:D},K=f(P,D),J=1/0,Q=[];Q.area=0;for(var et=0,nt=Y.length;et<nt;){var st=Y[et];Q.push(st),Q.area+=st.getLayout().area;var ut=u(Q,K,R.squareRatio);ut<=J?(et++,J=ut):(Q.area-=Q.pop().getLayout().area,g(Q,K,$,I,!1),K=f($.width,$.height),Q.length=Q.area=0,J=1/0)}if(Q.length&&g(Q,K,$,I,!0),!B){var rt=U.get("childrenVisibleMin");rt!=null&&V<rt&&(B=!0)}for(var et=0,nt=Y.length;et<nt;et++)c(Y[et],R,B,k+1)}}}function x(S,R,B,k,P,D){var A=S.children||[],N=k.sort;N!=="asc"&&N!=="desc"&&(N=null);var I=k.leafDepth!=null&&k.leafDepth<=D;if(P&&!I)return S.viewChildren=[];A=E.filter(A,function(U){return!U.isRemoved()}),i(A,N);var G=n(R,A,N);if(G.sum===0)return S.viewChildren=[];if(G.sum=a(R,B,G.sum,N,A),G.sum===0)return S.viewChildren=[];for(var W=0,Z=A.length;W<Z;W++){var H=A[W].getValue()/G.sum*B;A[W].setLayout({area:H})}return I&&(A.length&&S.setLayout({isLeafRoot:!0},!0),A.length=0),S.viewChildren=A,S.setLayout({dataExtent:G.dataExtent},!0),A}function a(S,R,B,k,P){if(!k)return B;for(var D=S.get("visibleMin"),A=P.length,N=A,I=A-1;I>=0;I--){var G=P[k==="asc"?A-I-1:I].getValue();G/B*R<D&&(N=I,B-=G)}return k==="asc"?P.splice(0,A-N):P.splice(N,A-N),B}function i(S,R){return R&&S.sort(function(B,k){var P=R==="asc"?B.getValue()-k.getValue():k.getValue()-B.getValue();return P===0?R==="asc"?B.dataIndex-k.dataIndex:k.dataIndex-B.dataIndex:P}),S}function n(S,R,B){for(var k=0,P=0,D=R.length;P<D;P++)k+=R[P].getValue();var A=S.get("visualDimension"),N;if(!R||!R.length)N=[NaN,NaN];else if(A==="value"&&B)N=[R[R.length-1].getValue(),R[0].getValue()],B==="asc"&&N.reverse();else{var N=[1/0,-1/0];m(R,function(G){var W=G.getValue(A);W<N[0]&&(N[0]=W),W>N[1]&&(N[1]=W)})}return{sum:k,dataExtent:N}}function u(S,R,B){for(var k=0,P=1/0,D=0,A,N=S.length;D<N;D++)A=S[D].getLayout().area,A&&(A<P&&(P=A),A>k&&(k=A));var I=S.area*S.area,G=R*R*B;return I?C(G*k/I,I/(G*P)):1/0}function g(S,R,B,k,P){var D=R===B.width?0:1,A=1-D,N=["x","y"],I=["width","height"],G=B[N[D]],W=R?S.area/R:0;(P||W>B[I[A]])&&(W=B[I[A]]);for(var Z=0,H=S.length;Z<H;Z++){var U=S[Z],V={},Y=W?U.getLayout().area/W:0,$=V[I[A]]=C(W-2*k,0),K=B[N[D]]+B[I[D]]-G,J=Z===H-1||K<Y?K:Y,Q=V[I[D]]=C(J-2*k,0);V[N[A]]=B[N[A]]+f(k,$/2),V[N[D]]=G+f(k,Q/2),G+=J,U.setLayout(V,!0)}B[N[A]]+=W,B[I[A]]-=W}function d(S,R,B,k,P){var D=(R||{}).node,A=[k,P];if(!D||D===B)return A;for(var N,I=k*P,G=I*S.option.zoomToNodeRatio;N=D.parentNode;){for(var W=0,Z=N.children,H=0,U=Z.length;H<U;H++)W+=Z[H].getValue();var V=D.getValue();if(V===0)return A;G*=W/V;var Y=N.getModel(),$=Y.get(o),K=Math.max($,w(Y,$));G+=4*$*$+(3*$+K)*Math.pow(G,.5),G>b&&(G=b),D=N}G<I&&(G=I);var J=Math.pow(G/I,.5);return[k*J,P*J]}function y(S,R,B){if(R)return{x:R.x,y:R.y};var k={x:0,y:0};if(!B)return k;var P=B.node,D=P.getLayout();if(!D)return k;for(var A=[D.width/2,D.height/2],N=P;N;){var I=N.getLayout();A[0]+=I.x,A[1]+=I.y,N=N.parentNode}return{x:S.width/2-A[0],y:S.height/2-A[1]}}function p(S,R,B,k,P){var D=S.getLayout(),A=B[P],N=A&&A===S;if(!(A&&!N||P===B.length&&S!==k)){S.setLayout({isInView:!0,invisible:!N&&!R.intersect(D),isAboveViewRoot:N},!0);var I=new F(R.x-D.x,R.y-D.y,R.width,R.height);m(S.viewChildren||[],function(G){p(G,I,B,k,P+1)})}}function w(S){return S.get(l)?S.get(r):0}X.exports=s},296913:function(X,z,e){var E=e(658796),F=e(994819),O=e(131879),M=O.isArray,b="itemStyle",L={seriesType:"treemap",reset:function(r,s,c,x){var a=r.getData().tree,i=a.root;i.isRemoved()||T(i,{},r.getViewRoot().getAncestors(),r)}};function T(r,s,c,x){var a=r.getModel(),i=r.getLayout();if(!(!i||i.invisible||!i.isInView)){var n=r.getModel(b),u=C(n,s,x),g=n.get("borderColor"),d=n.get("borderColorSaturation"),y;d!=null&&(y=f(u,r),g=v(d,y)),r.setVisual("borderColor",g);var p=r.viewChildren;if(!p||!p.length)y=f(u,r),r.setVisual("color",y);else{var w=o(r,a,i,n,u,p);O.each(p,function(S,R){if(S.depth>=c.length||S===c[S.depth]){var B=l(a,u,S,R,w,x);T(S,B,c,x)}})}}}function C(r,s,c){var x=O.extend({},s),a=c.designatedVisualItemStyle;return O.each(["color","colorAlpha","colorSaturation"],function(i){a[i]=s[i];var n=r.get(i);a[i]=null,n!=null&&(x[i]=n)}),x}function f(r){var s=m(r,"color");if(s){var c=m(r,"colorAlpha"),x=m(r,"colorSaturation");return x&&(s=F.modifyHSL(s,null,null,x)),c&&(s=F.modifyAlpha(s,c)),s}}function v(r,s){return s!=null?F.modifyHSL(s,null,null,r):null}function m(r,s){var c=r[s];if(c!=null&&c!=="none")return c}function o(r,s,c,x,a,i){if(!(!i||!i.length)){var n=h(s,"color")||a.color!=null&&a.color!=="none"&&(h(s,"colorAlpha")||h(s,"colorSaturation"));if(n){var u=s.get("visualMin"),g=s.get("visualMax"),d=c.dataExtent.slice();u!=null&&u<d[0]&&(d[0]=u),g!=null&&g>d[1]&&(d[1]=g);var y=s.get("colorMappingBy"),p={type:n.name,dataExtent:d,visual:n.range};p.type==="color"&&(y==="index"||y==="id")?(p.mappingMethod="category",p.loop=!0):p.mappingMethod="linear";var w=new E(p);return w.__drColorMappingBy=y,w}}}function h(r,s){var c=r.get(s);return M(c)&&c.length?{name:s,range:c}:null}function l(r,s,c,x,a,i){var n=O.extend({},s);if(a){var u=a.type,g=u==="color"&&a.__drColorMappingBy,d=g==="index"?x:g==="id"?i.mapIdToIndex(c.getId()):c.getValue(r.get("visualDimension"));n[u]=a.mapValueToVisual(d)}return n}X.exports=L},271883:function(X,z,e){e(68137),e(47976)},95608:function(X,z,e){e(600152),e(909952)},144344:function(X,z,e){var E=e(3440),F=e(131879),O=e(832740),M=e(279789);e(579319),e(292882),e(88067),E.registerPreprocessor(function(b){if(b){(!b.axisPointer||b.axisPointer.length===0)&&(b.axisPointer={});var L=b.axisPointer.link;L&&!F.isArray(L)&&(b.axisPointer.link=[L])}}),E.registerProcessor(E.PRIORITY.PROCESSOR.STATISTIC,function(b,L){b.getComponent("axisPointer").coordSysAxesInfo=O.collect(b,L)}),E.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},M)},579319:function(X,z,e){var E=e(3440),F=E.extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}}),O=F;X.exports=O},292882:function(X,z,e){var E=e(3440),F=e(353036),O=E.extendComponentView({type:"axisPointer",render:function(b,L,T){var C=L.getComponent("tooltip"),f=b.get("triggerOn")||C&&C.get("triggerOn")||"mousemove|click";F.register("axisPointer",T,function(v,m,o){f!=="none"&&(v==="leave"||f.indexOf(v)>=0)&&o({type:"updateAxisPointer",currTrigger:v,x:m&&m.offsetX,y:m&&m.offsetY})})},remove:function(b,L){F.unregister(L.getZr(),"axisPointer"),O.superApply(this._model,"remove",arguments)},dispose:function(b,L){F.unregister("axisPointer",L),O.superApply(this._model,"dispose",arguments)}}),M=O;X.exports=M},206929:function(X,z,e){var E=e(131879),F=e(28108),O=e(248070),M=e(832740),b=e(519756),L=e(601655),T=e(835454),C=T.makeInner,f=C(),v=E.clone,m=E.bind;function o(){}o.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(a,i,n,u){var g=i.get("value"),d=i.get("status");if(this._axisModel=a,this._axisPointerModel=i,this._api=n,!(!u&&this._lastValue===g&&this._lastStatus===d)){this._lastValue=g,this._lastStatus=d;var y=this._group,p=this._handle;if(!d||d==="hide"){y&&y.hide(),p&&p.hide();return}y&&y.show(),p&&p.show();var w={};this.makeElOption(w,g,a,i,n);var S=w.graphicKey;S!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=S;var R=this._moveAnimation=this.determineAnimation(a,i);if(!y)y=this._group=new O.Group,this.createPointerEl(y,w,a,i),this.createLabelEl(y,w,a,i),n.getZr().add(y);else{var B=E.curry(h,i,R);this.updatePointerEl(y,w,B,i),this.updateLabelEl(y,w,B,i)}c(y,i,!0),this._renderHandle(g)}},remove:function(a){this.clear(a)},dispose:function(a){this.clear(a)},determineAnimation:function(a,i){var n=i.get("animation"),u=a.axis,g=u.type==="category",d=i.get("snap");if(!d&&!g)return!1;if(n==="auto"||n==null){var y=this.animationThreshold;if(g&&u.getBandWidth()>y)return!0;if(d){var p=M.getAxisInfo(a).seriesDataCount,w=u.getExtent();return Math.abs(w[0]-w[1])/p>y}return!1}return n===!0},makeElOption:function(a,i,n,u,g){},createPointerEl:function(a,i,n,u){var g=i.pointer;if(g){var d=f(a).pointerEl=new O[g.type](v(i.pointer));a.add(d)}},createLabelEl:function(a,i,n,u){if(i.label){var g=f(a).labelEl=new O.Rect(v(i.label));a.add(g),r(g,u)}},updatePointerEl:function(a,i,n){var u=f(a).pointerEl;u&&i.pointer&&(u.setStyle(i.pointer.style),n(u,{shape:i.pointer.shape}))},updateLabelEl:function(a,i,n,u){var g=f(a).labelEl;g&&(g.setStyle(i.label.style),n(g,{shape:i.label.shape,position:i.label.position}),r(g,u))},_renderHandle:function(a){if(!(this._dragging||!this.updateHandleTransform)){var i=this._axisPointerModel,n=this._api.getZr(),u=this._handle,g=i.getModel("handle"),d=i.get("status");if(!g.get("show")||!d||d==="hide"){u&&n.remove(u),this._handle=null;return}var y;this._handle||(y=!0,u=this._handle=O.createIcon(g.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(S){b.stop(S.event)},onmousedown:m(this._onHandleDragMove,this,0,0),drift:m(this._onHandleDragMove,this),ondragend:m(this._onHandleDragEnd,this)}),n.add(u)),c(u,i,!1);var p=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];u.setStyle(g.getItemStyle(null,p));var w=g.get("size");E.isArray(w)||(w=[w,w]),u.attr("scale",[w[0]/2,w[1]/2]),L.createOrUpdate(this,"_doDispatchAxisPointer",g.get("throttle")||0,"fixRate"),this._moveHandleToValue(a,y)}},_moveHandleToValue:function(a,i){h(this._axisPointerModel,!i&&this._moveAnimation,this._handle,s(this.getHandleTransform(a,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(a,i){var n=this._handle;if(n){this._dragging=!0;var u=this.updateHandleTransform(s(n),[a,i],this._axisModel,this._axisPointerModel);this._payloadInfo=u,n.stopAnimation(),n.attr(s(u)),f(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){var a=this._handle;if(a){var i=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:i.cursorPoint[0],y:i.cursorPoint[1],tooltipOption:i.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},_onHandleDragEnd:function(a){this._dragging=!1;var i=this._handle;if(i){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(a){this._lastValue=null,this._lastStatus=null;var i=a.getZr(),n=this._group,u=this._handle;i&&n&&(this._lastGraphicKey=null,n&&i.remove(n),u&&i.remove(u),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(a,i,n){return n=n||0,{x:a[n],y:a[1-n],width:i[n],height:i[1-n]}}},o.prototype.constructor=o;function h(a,i,n,u){l(f(n).lastProp,u)||(f(n).lastProp=u,i?O.updateProps(n,u,a):(n.stopAnimation(),n.attr(u)))}function l(a,i){if(E.isObject(a)&&E.isObject(i)){var n=!0;return E.each(i,function(u,g){n=n&&l(a[g],u)}),!!n}else return a===i}function r(a,i){a[i.get("label.show")?"show":"hide"]()}function s(a){return{position:a.position.slice(),rotation:a.rotation||0}}function c(a,i,n){var u=i.get("z"),g=i.get("zlevel");a&&a.traverse(function(d){d.type!=="group"&&(u!=null&&(d.z=u),g!=null&&(d.zlevel=g),d.silent=n)})}F.enableClassExtend(o);var x=o;X.exports=x},88067:function(X,z,e){var E=e(206929),F=e(760293),O=e(999495),M=e(835051),b=E.extend({makeElOption:function(v,m,o,h,l){var r=o.axis,s=r.grid,c=h.get("type"),x=L(s,r).getOtherAxis(r).getGlobalExtent(),a=r.toGlobalCoord(r.dataToCoord(m,!0));if(c&&c!=="none"){var i=F.buildElStyle(h),n=T[c](r,a,x);n.style=i,v.graphicKey=n.type,v.pointer=n}var u=O.layout(s.model,o);F.buildCartesianSingleLabelElOption(m,v,u,o,h,l)},getHandleTransform:function(v,m,o){var h=O.layout(m.axis.grid.model,m,{labelInside:!1});return h.labelMargin=o.get("handle.margin"),{position:F.getTransformedPosition(m.axis,v,h),rotation:h.rotation+(h.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(v,m,o,h){var l=o.axis,r=l.grid,s=l.getGlobalExtent(!0),c=L(r,l).getOtherAxis(l).getGlobalExtent(),x=l.dim==="x"?0:1,a=v.position;a[x]+=m[x],a[x]=Math.min(s[1],a[x]),a[x]=Math.max(s[0],a[x]);var i=(c[1]+c[0])/2,n=[i,i];n[x]=a[x];var u=[{verticalAlign:"middle"},{align:"center"}];return{position:a,rotation:v.rotation,cursorPoint:n,tooltipOption:u[x]}}});function L(v,m){var o={};return o[m.dim+"AxisIndex"]=m.index,v.getCartesian(o)}var T={line:function(v,m,o){var h=F.makeLineShape([m,o[0]],[m,o[1]],C(v));return{type:"Line",subPixelOptimize:!0,shape:h}},shadow:function(v,m,o){var h=Math.max(1,v.getBandWidth()),l=o[1]-o[0];return{type:"Rect",shape:F.makeRectShape([m-h/2,o[0]],[h,l],C(v))}}};function C(v){return v.dim==="x"?0:1}M.registerAxisPointerClass("CartesianAxisPointer",b);var f=b;X.exports=f},947438:function(X,z,e){var E=e(317795),F=e(206929),O=e(248070),M=e(760293),b=e(343970),L=e(310030),T=e(835051),C=F.extend({makeElOption:function(o,h,l,r,s){var c=l.axis;c.dim==="angle"&&(this.animationThreshold=Math.PI/18);var x=c.polar,a=x.getOtherAxis(c),i=a.getExtent(),n;n=c["dataTo"+E.capitalFirst(c.dim)](h);var u=r.get("type");if(u&&u!=="none"){var g=M.buildElStyle(r),d=v[u](c,x,n,i,g);d.style=g,o.graphicKey=d.type,o.pointer=d}var y=r.get("label.margin"),p=f(h,l,r,x,y);M.buildLabelElOption(o,l,r,s,p)}});function f(o,h,l,r,s){var c=h.axis,x=c.dataToCoord(o),a=r.getAngleAxis().getExtent()[0];a=a/180*Math.PI;var i=r.getRadiusAxis().getExtent(),n,u,g;if(c.dim==="radius"){var d=b.create();b.rotate(d,d,a),b.translate(d,d,[r.cx,r.cy]),n=O.applyTransform([x,-s],d);var y=h.getModel("axisLabel").get("rotate")||0,p=L.innerTextLayout(a,y*Math.PI/180,-1);u=p.textAlign,g=p.textVerticalAlign}else{var w=i[1];n=r.coordToPoint([w+s,x]);var S=r.cx,R=r.cy;u=Math.abs(n[0]-S)/w<.3?"center":n[0]>S?"left":"right",g=Math.abs(n[1]-R)/w<.3?"middle":n[1]>R?"top":"bottom"}return{position:n,align:u,verticalAlign:g}}var v={line:function(o,h,l,r,s){return o.dim==="angle"?{type:"Line",shape:M.makeLineShape(h.coordToPoint([r[0],l]),h.coordToPoint([r[1],l]))}:{type:"Circle",shape:{cx:h.cx,cy:h.cy,r:l}}},shadow:function(o,h,l,r,s){var c=Math.max(1,o.getBandWidth()),x=Math.PI/180;return o.dim==="angle"?{type:"Sector",shape:M.makeSectorShape(h.cx,h.cy,r[0],r[1],(-l-c/2)*x,(-l+c/2)*x)}:{type:"Sector",shape:M.makeSectorShape(h.cx,h.cy,l-c/2,l+c/2,0,Math.PI*2)}}};T.registerAxisPointerClass("PolarAxisPointer",C);var m=C;X.exports=m},974139:function(X,z,e){var E=e(206929),F=e(760293),O=e(160367),M=e(835051),b=["x","y"],L=["width","height"],T=E.extend({makeElOption:function(o,h,l,r,s){var c=l.axis,x=c.coordinateSystem,a=v(x,1-f(c)),i=x.dataToPoint(h)[0],n=r.get("type");if(n&&n!=="none"){var u=F.buildElStyle(r),g=C[n](c,i,a);g.style=u,o.graphicKey=g.type,o.pointer=g}var d=O.layout(l);F.buildCartesianSingleLabelElOption(h,o,d,l,r,s)},getHandleTransform:function(o,h,l){var r=O.layout(h,{labelInside:!1});return r.labelMargin=l.get("handle.margin"),{position:F.getTransformedPosition(h.axis,o,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(o,h,l,r){var s=l.axis,c=s.coordinateSystem,x=f(s),a=v(c,x),i=o.position;i[x]+=h[x],i[x]=Math.min(a[1],i[x]),i[x]=Math.max(a[0],i[x]);var n=v(c,1-x),u=(n[1]+n[0])/2,g=[u,u];return g[x]=i[x],{position:i,rotation:o.rotation,cursorPoint:g,tooltipOption:{verticalAlign:"middle"}}}}),C={line:function(o,h,l){var r=F.makeLineShape([h,l[0]],[h,l[1]],f(o));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(o,h,l){var r=o.getBandWidth(),s=l[1]-l[0];return{type:"Rect",shape:F.makeRectShape([h-r/2,l[0]],[r,s],f(o))}}};function f(o){return o.isHorizontal()?0:1}function v(o,h){var l=o.getRect();return[l[b[h]],l[b[h]]+l[L[h]]]}M.registerAxisPointerClass("SingleAxisPointer",T);var m=T;X.exports=m},279789:function(X,z,e){var E=e(131879),F=e(835454),O=F.makeInner,M=e(832740),b=e(55425),L=E.each,T=E.curry,C=O();function f(i,n,u){var g=i.currTrigger,d=[i.x,i.y],y=i,p=i.dispatchAction||E.bind(u.dispatchAction,u),w=n.getComponent("axisPointer").coordSysAxesInfo;if(w){a(d)&&(d=b({seriesIndex:y.seriesIndex,dataIndex:y.dataIndex},n).point);var S=a(d),R=y.axesInfo,B=w.axesInfo,k=g==="leave"||a(d),P={},D={},A={list:[],map:{}},N={showPointer:T(o,D),showTooltip:T(h,A)};L(w.coordSysMap,function(G,W){var Z=S||G.containPoint(d);L(w.coordSysAxesInfo[W],function(H,U){var V=H.axis,Y=c(R,H);if(!k&&Z&&(!R||Y)){var $=Y&&Y.value;$==null&&!S&&($=V.pointToData(d)),$!=null&&v(H,$,N,!1,P)}})});var I={};return L(B,function(G,W){var Z=G.linkGroup;Z&&!D[W]&&L(Z.axesInfo,function(H,U){var V=D[U];if(H!==G&&V){var Y=V.value;Z.mapper&&(Y=G.axis.scale.parse(Z.mapper(Y,x(H),x(G)))),I[G.key]=Y}})}),L(I,function(G,W){v(B[W],G,N,!0,P)}),l(D,B,P),r(A,d,i,p),s(B,p,u),P}}function v(i,n,u,g,d){var y=i.axis;if(!(y.scale.isBlank()||!y.containData(n))){if(!i.involveSeries){u.showPointer(i,n);return}var p=m(n,i),w=p.payloadBatch,S=p.snapToValue;w[0]&&d.seriesIndex==null&&E.extend(d,w[0]),!g&&i.snap&&y.containData(S)&&S!=null&&(n=S),u.showPointer(i,n,w,d),u.showTooltip(i,p,S)}}function m(i,n){var u=n.axis,g=u.dim,d=i,y=[],p=Number.MAX_VALUE,w=-1;return L(n.seriesModels,function(S,R){var B=S.getData().mapDimension(g,!0),k,P;if(S.getAxisTooltipData){var D=S.getAxisTooltipData(B,i,u);P=D.dataIndices,k=D.nestestValue}else{if(P=S.getData().indicesOfNearest(B[0],i,u.type==="category"?.5:null),!P.length)return;k=S.getData().get(B[0],P[0])}if(!(k==null||!isFinite(k))){var A=i-k,N=Math.abs(A);N<=p&&((N<p||A>=0&&w<0)&&(p=N,w=A,d=k,y.length=0),L(P,function(I){y.push({seriesIndex:S.seriesIndex,dataIndexInside:I,dataIndex:S.getData().getRawIndex(I)})}))}}),{payloadBatch:y,snapToValue:d}}function o(i,n,u,g){i[n.key]={value:u,payloadBatch:g}}function h(i,n,u,g){var d=u.payloadBatch,y=n.axis,p=y.model,w=n.axisPointerModel;if(!(!n.triggerTooltip||!d.length)){var S=n.coordSys.model,R=M.makeKey(S),B=i.map[R];B||(B=i.map[R]={coordSysId:S.id,coordSysIndex:S.componentIndex,coordSysType:S.type,coordSysMainType:S.mainType,dataByAxis:[]},i.list.push(B)),B.dataByAxis.push({axisDim:y.dim,axisIndex:p.componentIndex,axisType:p.type,axisId:p.id,value:g,valueLabelOpt:{precision:w.get("label.precision"),formatter:w.get("label.formatter")},seriesDataIndices:d.slice()})}}function l(i,n,u){var g=u.axesInfo=[];L(n,function(d,y){var p=d.axisPointerModel.option,w=i[y];w?(!d.useHandle&&(p.status="show"),p.value=w.value,p.seriesDataIndices=(w.payloadBatch||[]).slice()):!d.useHandle&&(p.status="hide"),p.status==="show"&&g.push({axisDim:d.axis.dim,axisIndex:d.axis.model.componentIndex,value:p.value})})}function r(i,n,u,g){if(a(n)||!i.list.length){g({type:"hideTip"});return}var d=((i.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};g({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:u.tooltipOption,position:u.position,dataIndexInside:d.dataIndexInside,dataIndex:d.dataIndex,seriesIndex:d.seriesIndex,dataByCoordSys:i.list})}function s(i,n,u){var g=u.getZr(),d="axisPointerLastHighlights",y=C(g)[d]||{},p=C(g)[d]={};L(i,function(R,B){var k=R.axisPointerModel.option;k.status==="show"&&L(k.seriesDataIndices,function(P){var D=P.seriesIndex+" | "+P.dataIndex;p[D]=P})});var w=[],S=[];E.each(y,function(R,B){!p[B]&&S.push(R)}),E.each(p,function(R,B){!y[B]&&w.push(R)}),S.length&&u.dispatchAction({type:"downplay",escapeConnect:!0,batch:S}),w.length&&u.dispatchAction({type:"highlight",escapeConnect:!0,batch:w})}function c(i,n){for(var u=0;u<(i||[]).length;u++){var g=i[u];if(n.axis.dim===g.axisDim&&n.axis.model.componentIndex===g.axisIndex)return g}}function x(i){var n=i.axis.model,u={},g=u.axisDim=i.axis.dim;return u.axisIndex=u[g+"AxisIndex"]=n.componentIndex,u.axisName=u[g+"AxisName"]=n.name,u.axisId=u[g+"AxisId"]=n.id,u}function a(i){return!i||i[0]==null||isNaN(i[0])||i[1]==null||isNaN(i[1])}X.exports=f},55425:function(X,z,e){var E=e(131879),F=e(835454);function O(M,b){var L=[],T=M.seriesIndex,C;if(T==null||!(C=b.getSeriesByIndex(T)))return{point:[]};var f=C.getData(),v=F.queryDataIndex(f,M);if(v==null||v<0||E.isArray(v))return{point:[]};var m=f.getItemGraphicEl(v),o=C.coordinateSystem;if(C.getTooltipPosition)L=C.getTooltipPosition(v)||[];else if(o&&o.dataToPoint)L=o.dataToPoint(f.getValues(E.map(o.dimensions,function(l){return f.mapDimension(l)}),v,!0))||[];else if(m){var h=m.getBoundingRect().clone();h.applyTransform(m.transform),L=[h.x+h.width/2,h.y+h.height/2]}return{point:L,el:m}}X.exports=O},353036:function(X,z,e){var E=e(131879),F=e(358020),O=e(835454),M=O.makeInner,b=M(),L=E.each;function T(l,r,s){if(!F.node){var c=r.getZr();b(c).records||(b(c).records={}),C(c,r);var x=b(c).records[l]||(b(c).records[l]={});x.handler=s}}function C(l,r){if(b(l).initialized)return;b(l).initialized=!0,s("click",E.curry(m,"click")),s("mousemove",E.curry(m,"mousemove")),s("globalout",v);function s(c,x){l.on(c,function(a){var i=o(r);L(b(l).records,function(n){n&&x(n,a,i.dispatchAction)}),f(i.pendings,r)})}}function f(l,r){var s=l.showTip.length,c=l.hideTip.length,x;s?x=l.showTip[s-1]:c&&(x=l.hideTip[c-1]),x&&(x.dispatchAction=null,r.dispatchAction(x))}function v(l,r,s){l.handler("leave",null,s)}function m(l,r,s,c){r.handler(l,s,c)}function o(l){var r={showTip:[],hideTip:[]},s=function(c){var x=r[c.type];x?x.push(c):(c.dispatchAction=s,l.dispatchAction(c))};return{dispatchAction:s,pendings:r}}function h(l,r){if(!F.node){var s=r.getZr(),c=(b(s).records||{})[l];c&&(b(s).records[l]=null)}}z.register=T,z.unregister=h},832740:function(X,z,e){var E=e(131879),F=e(56785),O=E.each,M=E.curry;function b(s,c){var x={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return L(x,s,c),x.seriesInvolved&&C(x,s),x}function L(s,c,x){var a=c.getComponent("tooltip"),i=c.getComponent("axisPointer"),n=i.get("link",!0)||[],u=[];O(x.getCoordinateSystems(),function(g){if(!g.axisPointerEnabled)return;var d=r(g.model),y=s.coordSysAxesInfo[d]={};s.coordSysMap[d]=g;var p=g.model,w=p.getModel("tooltip",a);if(O(g.getAxes(),M(k,!1,null)),g.getTooltipAxes&&a&&w.get("show")){var S=w.get("trigger")==="axis",R=w.get("axisPointer.type")==="cross",B=g.getTooltipAxes(w.get("axisPointer.axis"));(S||R)&&O(B.baseAxes,M(k,R?"cross":!0,S)),R&&O(B.otherAxes,M(k,"cross",!1))}function k(P,D,A){var N=A.model.getModel("axisPointer",i),I=N.get("show");if(!(!I||I==="auto"&&!P&&!l(N))){D==null&&(D=N.get("triggerTooltip")),N=P?T(A,w,i,c,P,D):N;var G=N.get("snap"),W=r(A.model),Z=D||G||A.type==="category",H=s.axesInfo[W]={key:W,axis:A,coordSys:g,axisPointerModel:N,triggerTooltip:D,involveSeries:Z,snap:G,useHandle:l(N),seriesModels:[]};y[W]=H,s.seriesInvolved|=Z;var U=f(n,A);if(U!=null){var V=u[U]||(u[U]={axesInfo:{}});V.axesInfo[W]=H,V.mapper=n[U].mapper,H.linkGroup=V}}}})}function T(s,c,x,a,i,n){var u=c.getModel("axisPointer"),g={};O(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(w){g[w]=E.clone(u.get(w))}),g.snap=s.type!=="category"&&!!n,u.get("type")==="cross"&&(g.type="line");var d=g.label||(g.label={});if(d.show==null&&(d.show=!1),i==="cross"){var y=u.get("label.show");if(d.show=y??!0,!n){var p=g.lineStyle=u.get("crossStyle");p&&E.defaults(d,p.textStyle)}}return s.model.getModel("axisPointer",new F(g,x,a))}function C(s,c){c.eachSeries(function(x){var a=x.coordinateSystem,i=x.get("tooltip.trigger",!0),n=x.get("tooltip.show",!0);!a||i==="none"||i===!1||i==="item"||n===!1||x.get("axisPointer.show",!0)===!1||O(s.coordSysAxesInfo[r(a.model)],function(u){var g=u.axis;a.getAxis(g.dim)===g&&(u.seriesModels.push(x),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=x.getData().count())})},this)}function f(s,c){for(var x=c.model,a=c.dim,i=0;i<s.length;i++){var n=s[i]||{};if(v(n[a+"AxisId"],x.id)||v(n[a+"AxisIndex"],x.componentIndex)||v(n[a+"AxisName"],x.name))return i}}function v(s,c){return s==="all"||E.isArray(s)&&E.indexOf(s,c)>=0||s===c}function m(s){var c=o(s);if(c){var x=c.axisPointerModel,a=c.axis.scale,i=x.option,n=x.get("status"),u=x.get("value");u!=null&&(u=a.parse(u));var g=l(x);n==null&&(i.status=g?"show":"hide");var d=a.getExtent().slice();d[0]>d[1]&&d.reverse(),(u==null||u>d[1])&&(u=d[1]),u<d[0]&&(u=d[0]),i.value=u,g&&(i.status=c.axis.scale.isBlank()?"hide":"show")}}function o(s){var c=(s.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return c&&c.axesInfo[r(s)]}function h(s){var c=o(s);return c&&c.axisPointerModel}function l(s){return!!s.get("handle.show")}function r(s){return s.type+"||"+s.id}z.collect=b,z.fixValue=m,z.getAxisInfo=o,z.getAxisPointerModel=h,z.makeKey=r},760293:function(X,z,e){var E=e(131879),F=e(248070),O=e(872113),M=e(317795),b=e(343970),L=e(799538),T=e(310030);function C(c){var x=c.get("type"),a=c.getModel(x+"Style"),i;return x==="line"?(i=a.getLineStyle(),i.fill=null):x==="shadow"&&(i=a.getAreaStyle(),i.stroke=null),i}function f(c,x,a,i,n){var u=a.get("value"),g=m(u,x.axis,x.ecModel,a.get("seriesDataIndices"),{precision:a.get("label.precision"),formatter:a.get("label.formatter")}),d=a.getModel("label"),y=M.normalizeCssArray(d.get("padding")||0),p=d.getFont(),w=O.getBoundingRect(g,p),S=n.position,R=w.width+y[1]+y[3],B=w.height+y[0]+y[2],k=n.align;k==="right"&&(S[0]-=R),k==="center"&&(S[0]-=R/2);var P=n.verticalAlign;P==="bottom"&&(S[1]-=B),P==="middle"&&(S[1]-=B/2),v(S,R,B,i);var D=d.get("backgroundColor");(!D||D==="auto")&&(D=x.get("axisLine.lineStyle.color")),c.label={shape:{x:0,y:0,width:R,height:B,r:d.get("borderRadius")},position:S.slice(),style:{text:g,textFont:p,textFill:d.getTextColor(),textPosition:"inside",textPadding:y,fill:D,stroke:d.get("borderColor")||"transparent",lineWidth:d.get("borderWidth")||0,shadowBlur:d.get("shadowBlur"),shadowColor:d.get("shadowColor"),shadowOffsetX:d.get("shadowOffsetX"),shadowOffsetY:d.get("shadowOffsetY")},z2:10}}function v(c,x,a,i){var n=i.getWidth(),u=i.getHeight();c[0]=Math.min(c[0]+x,n)-x,c[1]=Math.min(c[1]+a,u)-a,c[0]=Math.max(c[0],0),c[1]=Math.max(c[1],0)}function m(c,x,a,i,n){c=x.scale.parse(c);var u=x.scale.getLabel(c,{precision:n.precision}),g=n.formatter;if(g){var d={value:L.getAxisRawValue(x,c),axisDimension:x.dim,axisIndex:x.index,seriesData:[]};E.each(i,function(y){var p=a.getSeriesByIndex(y.seriesIndex),w=y.dataIndexInside,S=p&&p.getDataParams(w);S&&d.seriesData.push(S)}),E.isString(g)?u=g.replace("{value}",u):E.isFunction(g)&&(u=g(d))}return u}function o(c,x,a){var i=b.create();return b.rotate(i,i,a.rotation),b.translate(i,i,a.position),F.applyTransform([c.dataToCoord(x),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],i)}function h(c,x,a,i,n,u){var g=T.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=n.get("label.margin"),f(x,i,n,u,{position:o(i.axis,c,a),align:g.textAlign,verticalAlign:g.textVerticalAlign})}function l(c,x,a){return a=a||0,{x1:c[a],y1:c[1-a],x2:x[a],y2:x[1-a]}}function r(c,x,a){return a=a||0,{x:c[a],y:c[1-a],width:x[a],height:x[1-a]}}function s(c,x,a,i,n,u){return{cx:c,cy:x,r0:a,r:i,startAngle:n,endAngle:u,clockwise:!0}}z.buildElStyle=C,z.buildLabelElOption=f,z.getValueLabel=m,z.getTransformedPosition=o,z.buildCartesianSingleLabelElOption=h,z.makeLineShape=l,z.makeRectShape=r,z.makeSectorShape=s},47976:function(X,z,e){var E=e(131879),F=e(248070),O=e(56785),M=e(835051),b=e(310030),L=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function T(m,o,h){o[1]>o[0]&&(o=o.slice().reverse());var l=m.coordToPoint([o[0],h]),r=m.coordToPoint([o[1],h]);return{x1:l[0],y1:l[1],x2:r[0],y2:r[1]}}function C(m){var o=m.getRadiusAxis();return o.inverse?0:1}function f(m){var o=m[0],h=m[m.length-1];o&&h&&Math.abs(Math.abs(o.coord-h.coord)-360)<1e-4&&m.pop()}var v=M.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(m,o){if(this.group.removeAll(),!!m.get("show")){var h=m.axis,l=h.polar,r=l.getRadiusAxis().getExtent(),s=h.getTicksCoords(),c=h.getMinorTicksCoords(),x=E.map(h.getViewLabels(),function(i){var i=E.clone(i);return i.coord=h.dataToCoord(i.tickValue),i});f(x),f(s),E.each(L,function(a){m.get(a+".show")&&(!h.scale.isBlank()||a==="axisLine")&&this["_"+a](m,l,s,c,r,x)},this)}},_axisLine:function(m,o,h,l,r){var s=m.getModel("axisLine.lineStyle"),c=C(o),x=c?0:1,a;r[x]===0?a=new F.Circle({shape:{cx:o.cx,cy:o.cy,r:r[c]},style:s.getLineStyle(),z2:1,silent:!0}):a=new F.Ring({shape:{cx:o.cx,cy:o.cy,r:r[c],r0:r[x]},style:s.getLineStyle(),z2:1,silent:!0}),a.style.fill=null,this.group.add(a)},_axisTick:function(m,o,h,l,r){var s=m.getModel("axisTick"),c=(s.get("inside")?-1:1)*s.get("length"),x=r[C(o)],a=E.map(h,function(i){return new F.Line({shape:T(o,[x,x+c],i.coord)})});this.group.add(F.mergePath(a,{style:E.defaults(s.getModel("lineStyle").getLineStyle(),{stroke:m.get("axisLine.lineStyle.color")})}))},_minorTick:function(m,o,h,l,r){if(l.length){for(var s=m.getModel("axisTick"),c=m.getModel("minorTick"),x=(s.get("inside")?-1:1)*c.get("length"),a=r[C(o)],i=[],n=0;n<l.length;n++)for(var u=0;u<l[n].length;u++)i.push(new F.Line({shape:T(o,[a,a+x],l[n][u].coord)}));this.group.add(F.mergePath(i,{style:E.defaults(c.getModel("lineStyle").getLineStyle(),E.defaults(s.getLineStyle(),{stroke:m.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(m,o,h,l,r,s){var c=m.getCategories(!0),x=m.getModel("axisLabel"),a=x.get("margin"),i=m.get("triggerEvent");E.each(s,function(n,u){var g=x,d=n.tickValue,y=r[C(o)],p=o.coordToPoint([y+a,n.coord]),w=o.cx,S=o.cy,R=Math.abs(p[0]-w)/y<.3?"center":p[0]>w?"left":"right",B=Math.abs(p[1]-S)/y<.3?"middle":p[1]>S?"top":"bottom";c&&c[d]&&c[d].textStyle&&(g=new O(c[d].textStyle,x,x.ecModel));var k=new F.Text({silent:b.isLabelSilent(m)});this.group.add(k),F.setTextStyle(k.style,g,{x:p[0],y:p[1],textFill:g.getTextColor()||m.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:R,textVerticalAlign:B}),i&&(k.eventData=b.makeAxisEventDataBase(m),k.eventData.targetType="axisLabel",k.eventData.value=n.rawLabel)},this)},_splitLine:function(m,o,h,l,r){var s=m.getModel("splitLine"),c=s.getModel("lineStyle"),x=c.get("color"),a=0;x=x instanceof Array?x:[x];for(var i=[],n=0;n<h.length;n++){var u=a++%x.length;i[u]=i[u]||[],i[u].push(new F.Line({shape:T(o,r,h[n].coord)}))}for(var n=0;n<i.length;n++)this.group.add(F.mergePath(i[n],{style:E.defaults({stroke:x[n%x.length]},c.getLineStyle()),silent:!0,z:m.get("z")}))},_minorSplitLine:function(m,o,h,l,r){if(l.length){for(var s=m.getModel("minorSplitLine"),c=s.getModel("lineStyle"),x=[],a=0;a<l.length;a++)for(var i=0;i<l[a].length;i++)x.push(new F.Line({shape:T(o,r,l[a][i].coord)}));this.group.add(F.mergePath(x,{style:c.getLineStyle(),silent:!0,z:m.get("z")}))}},_splitArea:function(m,o,h,l,r){if(h.length){var s=m.getModel("splitArea"),c=s.getModel("areaStyle"),x=c.get("color"),a=0;x=x instanceof Array?x:[x];for(var i=[],n=Math.PI/180,u=-h[0].coord*n,g=Math.min(r[0],r[1]),d=Math.max(r[0],r[1]),y=m.get("clockwise"),p=1;p<h.length;p++){var w=a++%x.length;i[w]=i[w]||[],i[w].push(new F.Sector({shape:{cx:o.cx,cy:o.cy,r0:g,r:d,startAngle:u,endAngle:-h[p].coord*n,clockwise:y},silent:!0})),u=-h[p].coord*n}for(var p=0;p<i.length;p++)this.group.add(F.mergePath(i[p],{style:E.defaults({fill:x[p%x.length]},c.getAreaStyle()),silent:!0}))}}});X.exports=v},310030:function(X,z,e){var E=e(131879),F=E.retrieve,O=E.defaults,M=E.extend,b=E.each,L=e(317795),T=e(248070),C=e(56785),f=e(748354),v=f.isRadianAroundZero,m=f.remRadian,o=e(435730),h=o.createSymbol,l=e(343970),r=e(912072),s=r.applyTransform,c=e(799538),x=c.shouldShowAllLabels,a=Math.PI,i=function(N,I){this.opt=I,this.axisModel=N,O(I,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new T.Group;var G=new T.Group({position:I.position.slice(),rotation:I.rotation});G.updateTransform(),this._transform=G.transform,this._dumbGroup=G};i.prototype={constructor:i,hasBuilder:function(N){return!!n[N]},add:function(N){n[N].call(this)},getGroup:function(){return this.group}};var n={axisLine:function(){var N=this.opt,I=this.axisModel;if(I.get("axisLine.show")){var G=this.axisModel.axis.getExtent(),W=this._transform,Z=[G[0],0],H=[G[1],0];W&&(s(Z,Z,W),s(H,H,W));var U=M({lineCap:"round"},I.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new T.Line({anid:"line",subPixelOptimize:!0,shape:{x1:Z[0],y1:Z[1],x2:H[0],y2:H[1]},style:U,strokeContainThreshold:N.strokeContainThreshold||5,silent:!0,z2:1}));var V=I.get("axisLine.symbol"),Y=I.get("axisLine.symbolSize"),$=I.get("axisLine.symbolOffset")||0;if(typeof $=="number"&&($=[$,$]),V!=null){typeof V=="string"&&(V=[V,V]),(typeof Y=="string"||typeof Y=="number")&&(Y=[Y,Y]);var K=Y[0],J=Y[1];b([{rotate:N.rotation+Math.PI/2,offset:$[0],r:0},{rotate:N.rotation-Math.PI/2,offset:$[1],r:Math.sqrt((Z[0]-H[0])*(Z[0]-H[0])+(Z[1]-H[1])*(Z[1]-H[1]))}],function(Q,et){if(V[et]!=="none"&&V[et]!=null){var nt=h(V[et],-K/2,-J/2,K,J,U.stroke,!0),st=Q.r+Q.offset,ut=[Z[0]+st*Math.cos(N.rotation),Z[1]-st*Math.sin(N.rotation)];nt.attr({rotation:Q.rotate,position:ut,silent:!0,z2:11}),this.group.add(nt)}},this)}}},axisTickLabel:function(){var N=this.axisModel,I=this.opt,G=k(this,N,I),W=D(this,N,I);p(N,W,G),P(this,N,I)},axisName:function(){var N=this.opt,I=this.axisModel,G=F(N.axisName,I.get("name"));if(G){var W=I.get("nameLocation"),Z=N.nameDirection,H=I.getModel("nameTextStyle"),U=I.get("nameGap")||0,V=this.axisModel.axis.getExtent(),Y=V[0]>V[1]?-1:1,$=[W==="start"?V[0]-Y*U:W==="end"?V[1]+Y*U:(V[0]+V[1])/2,R(W)?N.labelOffset+Z*U:0],K,J=I.get("nameRotate");J!=null&&(J=J*a/180);var Q;R(W)?K=g(N.rotation,J??N.rotation,Z):(K=d(N,W,J||0,V),Q=N.axisNameAvailableWidth,Q!=null&&(Q=Math.abs(Q/Math.sin(K.rotation)),!isFinite(Q)&&(Q=null)));var et=H.getFont(),nt=I.get("nameTruncate",!0)||{},st=nt.ellipsis,ut=F(N.nameTruncateMaxWidth,nt.maxWidth,Q),rt=st!=null&&ut!=null?L.truncateText(G,ut,et,st,{minChar:2,placeholder:nt.placeholder}):G,ht=I.get("tooltip",!0),Pt=I.mainType,wt={componentType:Pt,name:G,$vars:["name"]};wt[Pt+"Index"]=I.componentIndex;var Mt=new T.Text({anid:"name",__fullText:G,__truncatedText:rt,position:$,rotation:K.rotation,silent:y(I),z2:1,tooltip:ht&&ht.show?M({content:G,formatter:function(){return G},formatterParams:wt},ht):null});T.setTextStyle(Mt.style,H,{text:rt,textFont:et,textFill:H.getTextColor()||I.get("axisLine.lineStyle.color"),textAlign:H.get("align")||K.textAlign,textVerticalAlign:H.get("verticalAlign")||K.textVerticalAlign}),I.get("triggerEvent")&&(Mt.eventData=u(I),Mt.eventData.targetType="axisName",Mt.eventData.name=G),this._dumbGroup.add(Mt),Mt.updateTransform(),this.group.add(Mt),Mt.decomposeTransform()}}},u=i.makeAxisEventDataBase=function(N){var I={componentType:N.mainType,componentIndex:N.componentIndex};return I[N.mainType+"Index"]=N.componentIndex,I},g=i.innerTextLayout=function(N,I,G){var W=m(I-N),Z,H;return v(W)?(H=G>0?"top":"bottom",Z="center"):v(W-a)?(H=G>0?"bottom":"top",Z="center"):(H="middle",W>0&&W<a?Z=G>0?"right":"left":Z=G>0?"left":"right"),{rotation:W,textAlign:Z,textVerticalAlign:H}};function d(N,I,G,W){var Z=m(G-N.rotation),H,U,V=W[0]>W[1],Y=I==="start"&&!V||I!=="start"&&V;return v(Z-a/2)?(U=Y?"bottom":"top",H="center"):v(Z-a*1.5)?(U=Y?"top":"bottom",H="center"):(U="middle",Z<a*1.5&&Z>a/2?H=Y?"left":"right":H=Y?"right":"left"),{rotation:Z,textAlign:H,textVerticalAlign:U}}var y=i.isLabelSilent=function(N){var I=N.get("tooltip");return N.get("silent")||!(N.get("triggerEvent")||I&&I.show)};function p(N,I,G){if(!x(N.axis)){var W=N.get("axisLabel.showMinLabel"),Z=N.get("axisLabel.showMaxLabel");I=I||[],G=G||[];var H=I[0],U=I[1],V=I[I.length-1],Y=I[I.length-2],$=G[0],K=G[1],J=G[G.length-1],Q=G[G.length-2];W===!1?(w(H),w($)):S(H,U)&&(W?(w(U),w(K)):(w(H),w($))),Z===!1?(w(V),w(J)):S(Y,V)&&(Z?(w(Y),w(Q)):(w(V),w(J)))}}function w(N){N&&(N.ignore=!0)}function S(N,I,G){var W=N&&N.getBoundingRect().clone(),Z=I&&I.getBoundingRect().clone();if(!(!W||!Z)){var H=l.identity([]);return l.rotate(H,H,-N.rotation),W.applyTransform(l.mul([],H,N.getLocalTransform())),Z.applyTransform(l.mul([],H,I.getLocalTransform())),W.intersect(Z)}}function R(N){return N==="middle"||N==="center"}function B(N,I,G,W,Z){for(var H=[],U=[],V=[],Y=0;Y<N.length;Y++){var $=N[Y].coord;U[0]=$,U[1]=0,V[0]=$,V[1]=G,I&&(s(U,U,I),s(V,V,I));var K=new T.Line({anid:Z+"_"+N[Y].tickValue,subPixelOptimize:!0,shape:{x1:U[0],y1:U[1],x2:V[0],y2:V[1]},style:W,z2:2,silent:!0});H.push(K)}return H}function k(N,I,G){var W=I.axis,Z=I.getModel("axisTick");if(!(!Z.get("show")||W.scale.isBlank())){for(var H=Z.getModel("lineStyle"),U=G.tickDirection*Z.get("length"),V=W.getTicksCoords(),Y=B(V,N._transform,U,O(H.getLineStyle(),{stroke:I.get("axisLine.lineStyle.color")}),"ticks"),$=0;$<Y.length;$++)N.group.add(Y[$]);return Y}}function P(N,I,G){var W=I.axis,Z=I.getModel("minorTick");if(!(!Z.get("show")||W.scale.isBlank())){var H=W.getMinorTicksCoords();if(H.length)for(var U=Z.getModel("lineStyle"),V=G.tickDirection*Z.get("length"),Y=O(U.getLineStyle(),O(I.getModel("axisTick").getLineStyle(),{stroke:I.get("axisLine.lineStyle.color")})),$=0;$<H.length;$++)for(var K=B(H[$],N._transform,V,Y,"minorticks_"+$),J=0;J<K.length;J++)N.group.add(K[J])}}function D(N,I,G){var W=I.axis,Z=F(G.axisLabelShow,I.get("axisLabel.show"));if(!(!Z||W.scale.isBlank())){var H=I.getModel("axisLabel"),U=H.get("margin"),V=W.getViewLabels(),Y=(F(G.labelRotate,H.get("rotate"))||0)*a/180,$=g(G.rotation,Y,G.labelDirection),K=I.getCategories&&I.getCategories(!0),J=[],Q=y(I),et=I.get("triggerEvent");return b(V,function(nt,st){var ut=nt.tickValue,rt=nt.formattedLabel,ht=nt.rawLabel,Pt=H;K&&K[ut]&&K[ut].textStyle&&(Pt=new C(K[ut].textStyle,H,I.ecModel));var wt=Pt.getTextColor()||I.get("axisLine.lineStyle.color"),Mt=W.dataToCoord(ut),Ft=[Mt,G.labelOffset+G.labelDirection*U],Dt=new T.Text({anid:"label_"+ut,position:Ft,rotation:$.rotation,silent:Q,z2:10});T.setTextStyle(Dt.style,Pt,{text:rt,textAlign:Pt.getShallow("align",!0)||$.textAlign,textVerticalAlign:Pt.getShallow("verticalAlign",!0)||Pt.getShallow("baseline",!0)||$.textVerticalAlign,textFill:typeof wt=="function"?wt(W.type==="category"?ht:W.type==="value"?ut+"":ut,st):wt}),et&&(Dt.eventData=u(I),Dt.eventData.targetType="axisLabel",Dt.eventData.value=ht),N._dumbGroup.add(Dt),Dt.updateTransform(),J.push(Dt),N.group.add(Dt),Dt.decomposeTransform()}),J}}var A=i;X.exports=A},835051:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(832740),b=O.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(v,m,o,h){this.axisPointerClass&&M.fixValue(v),b.superApply(this,"render",arguments),L(this,v,m,o,h,!0)},updateAxisPointer:function(v,m,o,h,l){L(this,v,m,o,h,!1)},remove:function(v,m){var o=this._axisPointer;o&&o.remove(m),b.superApply(this,"remove",arguments)},dispose:function(v,m){T(this,m),b.superApply(this,"dispose",arguments)}});function L(v,m,o,h,l,r){var s=b.getAxisPointerClass(v.axisPointerClass);if(s){var c=M.getAxisPointerModel(m);c?(v._axisPointer||(v._axisPointer=new s)).render(m,c,h,r):T(v,h)}}function T(v,m,o){var h=v._axisPointer;h&&h.dispose(m,o),v._axisPointer=null}var C=[];b.registerAxisPointerClass=function(v,m){C[v]=m},b.getAxisPointerClass=function(v){return v&&C[v]};var f=b;X.exports=f},909952:function(X,z,e){var E=e(131879),F=e(248070),O=e(310030),M=e(835051),b=e(999495),L=e(676128),T=L.rectCoordAxisBuildSplitArea,C=L.rectCoordAxisHandleRemove,f=["axisLine","axisTickLabel","axisName"],v=["splitArea","splitLine","minorSplitLine"],m=M.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(o,h,l,r){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new F.Group,this.group.add(this._axisGroup),!!o.get("show")){var c=o.getCoordSysModel(),x=b.layout(c,o),a=new O(o,x);E.each(f,a.add,a),this._axisGroup.add(a.getGroup()),E.each(v,function(i){o.get(i+".show")&&this["_"+i](o,c)},this),F.groupTransition(s,this._axisGroup,o),m.superCall(this,"render",o,h,l,r)}},remove:function(){C(this)},_splitLine:function(o,h){var l=o.axis;if(!l.scale.isBlank()){var r=o.getModel("splitLine"),s=r.getModel("lineStyle"),c=s.get("color");c=E.isArray(c)?c:[c];for(var x=h.coordinateSystem.getRect(),a=l.isHorizontal(),i=0,n=l.getTicksCoords({tickModel:r}),u=[],g=[],d=s.getLineStyle(),y=0;y<n.length;y++){var p=l.toGlobalCoord(n[y].coord);a?(u[0]=p,u[1]=x.y,g[0]=p,g[1]=x.y+x.height):(u[0]=x.x,u[1]=p,g[0]=x.x+x.width,g[1]=p);var w=i++%c.length,S=n[y].tickValue;this._axisGroup.add(new F.Line({anid:S!=null?"line_"+n[y].tickValue:null,subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:g[0],y2:g[1]},style:E.defaults({stroke:c[w]},d),silent:!0}))}}},_minorSplitLine:function(o,h){var l=o.axis,r=o.getModel("minorSplitLine"),s=r.getModel("lineStyle"),c=h.coordinateSystem.getRect(),x=l.isHorizontal(),a=l.getMinorTicksCoords();if(a.length)for(var i=[],n=[],u=s.getLineStyle(),g=0;g<a.length;g++)for(var d=0;d<a[g].length;d++){var y=l.toGlobalCoord(a[g][d].coord);x?(i[0]=y,i[1]=c.y,n[0]=y,n[1]=c.y+c.height):(i[0]=c.x,i[1]=y,n[0]=c.x+c.width,n[1]=y),this._axisGroup.add(new F.Line({anid:"minor_line_"+a[g][d].tickValue,subPixelOptimize:!0,shape:{x1:i[0],y1:i[1],x2:n[0],y2:n[1]},style:u,silent:!0}))}},_splitArea:function(o,h){T(this,this._axisGroup,o,h)}});m.extend({type:"xAxis"}),m.extend({type:"yAxis"})},155489:function(X,z,e){var E=e(3440),F=e(131879),O=e(310030),M=e(612968),b=e(313483),L=e(248070),T=["axisLine","axisTickLabel","axisName"],C=E.extendComponentView({type:"parallelAxis",init:function(h,l){C.superApply(this,"init",arguments),(this._brushController=new M(l.getZr())).on("brush",F.bind(this._onBrush,this))},render:function(h,l,r,s){if(!f(h,l,s)){this.axisModel=h,this.api=r,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new L.Group,this.group.add(this._axisGroup),!!h.get("show")){var x=m(h,l),a=x.coordinateSystem,i=h.getAreaSelectStyle(),n=i.width,u=h.axis.dim,g=a.getAxisLayout(u),d=F.extend({strokeContainThreshold:n},g),y=new O(h,d);F.each(T,y.add,y),this._axisGroup.add(y.getGroup()),this._refreshBrushController(d,i,h,x,n,r);var p=s&&s.animation===!1?null:h;L.groupTransition(c,this._axisGroup,p)}}},_refreshBrushController:function(h,l,r,s,c,x){var a=r.axis.getExtent(),i=a[1]-a[0],n=Math.min(30,Math.abs(i)*.1),u=L.BoundingRect.create({x:a[0],y:-c/2,width:i,height:c});u.x-=n,u.width+=2*n,this._brushController.mount({enableGlobalPan:!0,rotation:h.rotation,position:h.position}).setPanels([{panelId:"pl",clipPath:b.makeRectPanelClipPath(u),isTargetByCursor:b.makeRectIsTargetByCursor(u,x,s),getLinearBrushOtherExtent:b.makeLinearBrushOtherExtent(u,0)}]).enableBrush({brushType:"lineX",brushStyle:l,removeOnClick:!0}).updateCovers(v(r))},_onBrush:function(h,l){var r=this.axisModel,s=r.axis,c=F.map(h,function(x){return[s.coordToData(x.range[0],!0),s.coordToData(x.range[1],!0)]});(!r.option.realtime===l.isEnd||l.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:r.id,intervals:c})},dispose:function(){this._brushController.dispose()}});function f(h,l,r){return r&&r.type==="axisAreaSelect"&&l.findComponents({mainType:"parallelAxis",query:r})[0]===h}function v(h){var l=h.axis;return F.map(h.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[l.dataToCoord(r[0],!0),l.dataToCoord(r[1],!0)]}})}function m(h,l){return l.getComponent("parallel",h.get("parallelIndex"))}var o=C;X.exports=o},793915:function(X,z,e){var E=e(131879),F=e(248070),O=e(310030),M=e(835051),b=["axisLine","axisTickLabel","axisName"],L=["splitLine","splitArea","minorSplitLine"],T=M.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(f,v){if(this.group.removeAll(),!!f.get("show")){var m=f.axis,o=m.polar,h=o.getAngleAxis(),l=m.getTicksCoords(),r=m.getMinorTicksCoords(),s=h.getExtent()[0],c=m.getExtent(),x=C(o,f,s),a=new O(f,x);E.each(b,a.add,a),this.group.add(a.getGroup()),E.each(L,function(i){f.get(i+".show")&&!m.scale.isBlank()&&this["_"+i](f,o,s,c,l,r)},this)}},_splitLine:function(f,v,m,o,h){var l=f.getModel("splitLine"),r=l.getModel("lineStyle"),s=r.get("color"),c=0;s=s instanceof Array?s:[s];for(var x=[],a=0;a<h.length;a++){var i=c++%s.length;x[i]=x[i]||[],x[i].push(new F.Circle({shape:{cx:v.cx,cy:v.cy,r:h[a].coord}}))}for(var a=0;a<x.length;a++)this.group.add(F.mergePath(x[a],{style:E.defaults({stroke:s[a%s.length],fill:null},r.getLineStyle()),silent:!0}))},_minorSplitLine:function(f,v,m,o,h,l){if(l.length){for(var r=f.getModel("minorSplitLine"),s=r.getModel("lineStyle"),c=[],x=0;x<l.length;x++)for(var a=0;a<l[x].length;a++)c.push(new F.Circle({shape:{cx:v.cx,cy:v.cy,r:l[x][a].coord}}));this.group.add(F.mergePath(c,{style:E.defaults({fill:null},s.getLineStyle()),silent:!0}))}},_splitArea:function(f,v,m,o,h){if(h.length){var l=f.getModel("splitArea"),r=l.getModel("areaStyle"),s=r.get("color"),c=0;s=s instanceof Array?s:[s];for(var x=[],a=h[0].coord,i=1;i<h.length;i++){var n=c++%s.length;x[n]=x[n]||[],x[n].push(new F.Sector({shape:{cx:v.cx,cy:v.cy,r0:a,r:h[i].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),a=h[i].coord}for(var i=0;i<x.length;i++)this.group.add(F.mergePath(x[i],{style:E.defaults({fill:s[i%s.length]},r.getAreaStyle()),silent:!0}))}}});function C(f,v,m){return{position:[f.cx,f.cy],rotation:m/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:v.getModel("axisLabel").get("rotate"),z2:1}}X.exports=T},430278:function(X,z,e){var E=e(131879),F=e(310030),O=e(248070),M=e(160367),b=e(835051),L=e(676128),T=L.rectCoordAxisBuildSplitArea,C=L.rectCoordAxisHandleRemove,f=["axisLine","axisTickLabel","axisName"],v=["splitArea","splitLine"],m=b.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(h,l,r,s){var c=this.group;c.removeAll();var x=this._axisGroup;this._axisGroup=new O.Group;var a=M.layout(h),i=new F(h,a);E.each(f,i.add,i),c.add(this._axisGroup),c.add(i.getGroup()),E.each(v,function(n){h.get(n+".show")&&this["_"+n](h)},this),O.groupTransition(x,this._axisGroup,h),m.superCall(this,"render",h,l,r,s)},remove:function(){C(this)},_splitLine:function(h){var l=h.axis;if(!l.scale.isBlank()){var r=h.getModel("splitLine"),s=r.getModel("lineStyle"),c=s.get("width"),x=s.get("color");x=x instanceof Array?x:[x];for(var a=h.coordinateSystem.getRect(),i=l.isHorizontal(),n=[],u=0,g=l.getTicksCoords({tickModel:r}),d=[],y=[],p=0;p<g.length;++p){var w=l.toGlobalCoord(g[p].coord);i?(d[0]=w,d[1]=a.y,y[0]=w,y[1]=a.y+a.height):(d[0]=a.x,d[1]=w,y[0]=a.x+a.width,y[1]=w);var S=u++%x.length;n[S]=n[S]||[],n[S].push(new O.Line({subPixelOptimize:!0,shape:{x1:d[0],y1:d[1],x2:y[0],y2:y[1]},style:{lineWidth:c},silent:!0}))}for(var p=0;p<n.length;++p)this.group.add(O.mergePath(n[p],{style:{stroke:x[p%x.length],lineDash:s.getLineDash(c),lineWidth:c},silent:!0}))}},_splitArea:function(h){T(this,this._axisGroup,h,h)}}),o=m;X.exports=o},676128:function(X,z,e){var E=e(131879),F=e(248070);function O(b,L,T,C){var f=T.axis;if(!f.scale.isBlank()){var v=T.getModel("splitArea"),m=v.getModel("areaStyle"),o=m.get("color"),h=C.coordinateSystem.getRect(),l=f.getTicksCoords({tickModel:v,clamp:!0});if(l.length){var r=o.length,s=b.__splitAreaColors,c=E.createHashMap(),x=0;if(s)for(var a=0;a<l.length;a++){var i=s.get(l[a].tickValue);if(i!=null){x=(i+(r-1)*a)%r;break}}var n=f.toGlobalCoord(l[0].coord),u=m.getAreaStyle();o=E.isArray(o)?o:[o];for(var a=1;a<l.length;a++){var g=f.toGlobalCoord(l[a].coord),d,y,p,w;f.isHorizontal()?(d=n,y=h.y,p=g-d,w=h.height,n=d+p):(d=h.x,y=n,p=h.width,w=g-y,n=y+w);var S=l[a-1].tickValue;S!=null&&c.set(S,x),L.add(new F.Rect({anid:S!=null?"area_"+S:null,shape:{x:d,y,width:p,height:w},style:E.defaults({fill:o[x]},u),silent:!0})),x=(x+1)%r}b.__splitAreaColors=c}}}function M(b){b.__splitAreaColors=null}z.rectCoordAxisBuildSplitArea=O,z.rectCoordAxisHandleRemove=M},593847:function(X,z,e){var E=e(3440),F={type:"axisAreaSelect",event:"axisAreaSelected"};E.registerAction(F,function(O,M){M.eachComponent({mainType:"parallelAxis",query:O},function(b){b.axis.model.setActiveIntervals(O.intervals)})}),E.registerAction("parallelAxisExpand",function(O,M){M.eachComponent({mainType:"parallel",query:O},function(b){b.setAxisExpand(O)})})},36888:function(X,z,e){var E=e(3440),F=e(380504);e(294141),e(489654),e(80461),e(736499),e(144562),E.registerPreprocessor(F)},489654:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(131879),b=e(236193),L=e(56785),T=["#ddd"],C=O.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(m,o){var h=this.option;!o&&b.replaceVisualOption(h,m,["inBrush","outOfBrush"]);var l=h.inBrush=h.inBrush||{};h.outOfBrush=h.outOfBrush||{color:T},l.hasOwnProperty("liftZ")||(l.liftZ=5)},setAreas:function(m){m&&(this.areas=M.map(m,function(o){return f(this.option,o)},this))},setBrushOption:function(m){this.brushOption=f(this.option,m),this.brushType=this.brushOption.brushType}});function f(m,o){return M.merge({brushType:m.brushType,brushMode:m.brushMode,transformable:m.transformable,brushStyle:new L(m.brushStyle).getItemStyle(),removeOnClick:m.removeOnClick,z:m.z},o,!0)}var v=C;X.exports=v},80461:function(X,z,e){var E=e(3440),F=e(131879),O=e(612968),M=e(294141),b=M.layoutCovers,L=E.extendComponentView({type:"brush",init:function(C,f){this.ecModel=C,this.api=f,this.model,(this._brushController=new O(f.getZr())).on("brush",F.bind(this._onBrush,this)).mount()},render:function(C){return this.model=C,T.apply(this,arguments)},updateTransform:function(C,f){return b(f),T.apply(this,arguments)},updateView:T,dispose:function(){this._brushController.dispose()},_onBrush:function(C,f){var v=this.model.id;this.model.brushTargetManager.setOutputRanges(C,this.ecModel),(!f.isEnd||f.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:v,areas:F.clone(C),$from:v}),f.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:v,areas:F.clone(C),$from:v})}});function T(C,f,v,m){(!m||m.$from!==C.id)&&this._brushController.setPanels(C.brushTargetManager.makePanelOpts(v)).enableBrush(C.brushOption).updateCovers(C.areas.slice())}X.exports=L},736499:function(X,z,e){var E=e(3440);E.registerAction({type:"brush",event:"brush"},function(F,O){O.eachComponent({mainType:"brush",query:F},function(M){M.setAreas(F.areas)})}),E.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),E.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},function(){})},380504:function(X,z,e){var E=e(131879),F=["rect","polygon","keep","clear"];function O(b,L){var T=b&&b.brush;if(E.isArray(T)||(T=T?[T]:[]),!!T.length){var C=[];E.each(T,function(h){var l=h.hasOwnProperty("toolbox")?h.toolbox:[];l instanceof Array&&(C=C.concat(l))});var f=b&&b.toolbox;E.isArray(f)&&(f=f[0]),f||(f={feature:{}},b.toolbox=[f]);var v=f.feature||(f.feature={}),m=v.brush||(v.brush={}),o=m.type||(m.type=[]);o.push.apply(o,C),M(o),L&&!o.length&&o.push.apply(o,F)}}function M(b){var L={};E.each(b,function(T){L[T]=1}),b.length=0,E.each(L,function(T,C){b.push(C)})}X.exports=O},714671:function(X,z,e){var E=e(274898),F=e(795946),O=e(248070),M=O.linePolygonIntersect,b={lineX:L(0),lineY:L(1),rect:{point:function(f,v,m){return f&&m.boundingRect.contain(f[0],f[1])},rect:function(f,v,m){return f&&m.boundingRect.intersect(f)}},polygon:{point:function(f,v,m){return f&&m.boundingRect.contain(f[0],f[1])&&E.contain(m.range,f[0],f[1])},rect:function(f,v,m){var o=m.range;if(!f||o.length<=1)return!1;var h=f.x,l=f.y,r=f.width,s=f.height,c=o[0];if(E.contain(o,h,l)||E.contain(o,h+r,l)||E.contain(o,h,l+s)||E.contain(o,h+r,l+s)||F.create(f).contain(c[0],c[1])||M(h,l,h+r,l,o)||M(h,l,h,l+s,o)||M(h+r,l,h+r,l+s,o)||M(h,l+s,h+r,l+s,o))return!0}}};function L(f){var v=["x","y"],m=["width","height"];return{point:function(o,h,l){if(o){var r=l.range,s=o[f];return T(s,r)}},rect:function(o,h,l){if(o){var r=l.range,s=[o[v[f]],o[v[f]]+o[m[f]]];return s[1]<s[0]&&s.reverse(),T(s[0],r)||T(s[1],r)||T(r[0],s)||T(r[1],s)}}}}function T(f,v){return v[0]<=f&&f<=v[1]}var C=b;X.exports=C},294141:function(X,z,e){var E=e(3440),F=e(131879),O=e(795946),M=e(236193),b=e(714671),L=e(601655),T=e(999516),C=["inBrush","outOfBrush"],f="__ecBrushSelect",v="__ecInBrushSelectEvent",m=E.PRIORITY.VISUAL.BRUSH;E.registerLayout(m,function(n,u,g){n.eachComponent({mainType:"brush"},function(d){g&&g.type==="takeGlobalCursor"&&d.setBrushOption(g.key==="brush"?g.brushOption:{brushType:!1})}),o(n)});function o(n){n.eachComponent({mainType:"brush"},function(u){var g=u.brushTargetManager=new T(u.option,n);g.setInputRanges(u.areas,n)})}E.registerVisual(m,function(n,u,g){var d=[],y,p;n.eachComponent({mainType:"brush"},function(w,S){var R={brushId:w.id,brushIndex:S,brushName:w.name,areas:F.clone(w.areas),selected:[]};d.push(R);var B=w.option,k=B.brushLink,P=[],D=[],A=[],N=0;S||(y=B.throttleType,p=B.throttleDelay);var I=F.map(w.areas,function(V){return x(F.defaults({boundingRect:a[V.brushType](V)},V))}),G=M.createVisualMappings(w.option,C,function(V){V.mappingMethod="fixed"});F.isArray(k)&&F.each(k,function(V){P[V]=1});function W(V){return k==="all"||P[V]}function Z(V){return!!V.length}n.eachSeries(function(V,Y){var $=A[Y]=[];V.subType==="parallel"?H(V,Y,$):U(V,Y,$)});function H(V,Y){var $=V.coordinateSystem;N|=$.hasAxisBrushed(),W(Y)&&$.eachActiveState(V.getData(),function(K,J){K==="active"&&(D[J]=1)})}function U(V,Y,$){var K=s(V);if(!(!K||c(w,Y))&&(F.each(I,function(Q){K[Q.brushType]&&w.brushTargetManager.controlSeries(Q,V,n)&&$.push(Q),N|=Z($)}),W(Y)&&Z($))){var J=V.getData();J.each(function(Q){r(K,$,J,Q)&&(D[Q]=1)})}}n.eachSeries(function(V,Y){var $={seriesId:V.id,seriesIndex:Y,seriesName:V.name,dataIndex:[]};R.selected.push($);var K=s(V),J=A[Y],Q=V.getData(),et=W(Y)?function(nt){return D[nt]?($.dataIndex.push(Q.getRawIndex(nt)),"inBrush"):"outOfBrush"}:function(nt){return r(K,J,Q,nt)?($.dataIndex.push(Q.getRawIndex(nt)),"inBrush"):"outOfBrush"};(W(Y)?N:Z(J))&&M.applyVisual(C,G,Q,et)})}),h(u,y,p,d,g)});function h(n,u,g,d,y){if(y){var p=n.getZr();if(!p[v]){p[f]||(p[f]=l);var w=L.createOrUpdate(p,f,g,u);w(n,d)}}}function l(n,u){if(!n.isDisposed()){var g=n.getZr();g[v]=!0,n.dispatchAction({type:"brushSelect",batch:u}),g[v]=!1}}function r(n,u,g,d){for(var y=0,p=u.length;y<p;y++){var w=u[y];if(n[w.brushType](d,g,w.selectors,w))return!0}}function s(n){var u=n.brushSelector;if(F.isString(u)){var g=[];return F.each(b,function(y,p){g[p]=function(w,S,R,B){var k=S.getItemLayout(w);return y[u](k,R,B)}}),g}else if(F.isFunction(u)){var d={};return F.each(b,function(y,p){d[p]=u}),d}return u}function c(n,u){var g=n.option.seriesIndex;return g!=null&&g!=="all"&&(F.isArray(g)?F.indexOf(g,u)<0:u!==g)}function x(n){var u=n.selectors={};return F.each(b[n.brushType],function(g,d){u[d]=function(y){return g(y,u,n)}}),n}var a={lineX:F.noop,lineY:F.noop,rect:function(n){return i(n.range)},polygon:function(n){for(var u,g=n.range,d=0,y=g.length;d<y;d++){u=u||[[1/0,-1/0],[1/0,-1/0]];var p=g[d];p[0]<u[0][0]&&(u[0][0]=p[0]),p[0]>u[0][1]&&(u[0][1]=p[0]),p[1]<u[1][0]&&(u[1][0]=p[1]),p[1]>u[1][1]&&(u[1][1]=p[1])}return u&&i(u)}};function i(n){return new O(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}z.layoutCovers=o},431075:function(X,z,e){e(265728),e(53336),e(448105)},448105:function(X,z,e){var E=e(3440),F=e(131879),O=e(248070),M=e(317795),b=e(748354),L={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"]},T={EN:["S","M","T","W","T","F","S"],CN:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},C=E.extendComponentView({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(f,v,m){var o=this.group;o.removeAll();var h=f.coordinateSystem,l=h.getRangeInfo(),r=h.getOrient();this._renderDayRect(f,l,o),this._renderLines(f,l,r,o),this._renderYearText(f,l,r,o),this._renderMonthText(f,r,o),this._renderWeekText(f,l,r,o)},_renderDayRect:function(f,v,m){for(var o=f.coordinateSystem,h=f.getModel("itemStyle").getItemStyle(),l=o.getCellWidth(),r=o.getCellHeight(),s=v.start.time;s<=v.end.time;s=o.getNextNDay(s,1).time){var c=o.dataToRect([s],!1).tl,x=new O.Rect({shape:{x:c[0],y:c[1],width:l,height:r},cursor:"default",style:h});m.add(x)}},_renderLines:function(f,v,m,o){var h=this,l=f.coordinateSystem,r=f.getModel("splitLine.lineStyle").getLineStyle(),s=f.get("splitLine.show"),c=r.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var x=v.start,a=0;x.time<=v.end.time;a++){n(x.formatedDate),a===0&&(x=l.getDateInfo(v.start.y+"-"+v.start.m));var i=x.date;i.setMonth(i.getMonth()+1),x=l.getDateInfo(i)}n(l.getNextNDay(v.end.time,1).formatedDate);function n(u){h._firstDayOfMonth.push(l.getDateInfo(u)),h._firstDayPoints.push(l.dataToRect([u],!1).tl);var g=h._getLinePointsOfOneWeek(f,u,m);h._tlpoints.push(g[0]),h._blpoints.push(g[g.length-1]),s&&h._drawSplitline(g,r,o)}s&&this._drawSplitline(h._getEdgesPoints(h._tlpoints,c,m),r,o),s&&this._drawSplitline(h._getEdgesPoints(h._blpoints,c,m),r,o)},_getEdgesPoints:function(f,v,m){var o=[f[0].slice(),f[f.length-1].slice()],h=m==="horizontal"?0:1;return o[0][h]=o[0][h]-v/2,o[1][h]=o[1][h]+v/2,o},_drawSplitline:function(f,v,m){var o=new O.Polyline({z2:20,shape:{points:f},style:v});m.add(o)},_getLinePointsOfOneWeek:function(f,v,m){var o=f.coordinateSystem;v=o.getDateInfo(v);for(var h=[],l=0;l<7;l++){var r=o.getNextNDay(v.time,l),s=o.dataToRect([r.time],!1);h[2*r.day]=s.tl,h[2*r.day+1]=s[m==="horizontal"?"bl":"tr"]}return h},_formatterLabel:function(f,v){return typeof f=="string"&&f?M.formatTplSimple(f,v):typeof f=="function"?f(v):v.nameMap},_yearTextPositionControl:function(f,v,m,o,h){v=v.slice();var l=["center","bottom"];o==="bottom"?(v[1]+=h,l=["center","top"]):o==="left"?v[0]-=h:o==="right"?(v[0]+=h,l=["center","top"]):v[1]-=h;var r=0;return(o==="left"||o==="right")&&(r=Math.PI/2),{rotation:r,position:v,style:{textAlign:l[0],textVerticalAlign:l[1]}}},_renderYearText:function(f,v,m,o){var h=f.getModel("yearLabel");if(h.get("show")){var l=h.get("margin"),r=h.get("position");r||(r=m!=="horizontal"?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(s[0][0]+s[1][0])/2,x=(s[0][1]+s[1][1])/2,a=m==="horizontal"?0:1,i={top:[c,s[a][1]],bottom:[c,s[1-a][1]],left:[s[1-a][0],x],right:[s[a][0],x]},n=v.start.y;+v.end.y>+v.start.y&&(n=n+"-"+v.end.y);var u=h.get("formatter"),g={start:v.start.y,end:v.end.y,nameMap:n},d=this._formatterLabel(u,g),y=new O.Text({z2:30});O.setTextStyle(y.style,h,{text:d}),y.attr(this._yearTextPositionControl(y,i[r],m,r,l)),o.add(y)}},_monthTextPositionControl:function(f,v,m,o,h){var l="left",r="top",s=f[0],c=f[1];return m==="horizontal"?(c=c+h,v&&(l="center"),o==="start"&&(r="bottom")):(s=s+h,v&&(r="middle"),o==="start"&&(l="right")),{x:s,y:c,textAlign:l,textVerticalAlign:r}},_renderMonthText:function(f,v,m){var o=f.getModel("monthLabel");if(o.get("show")){var h=o.get("nameMap"),l=o.get("margin"),r=o.get("position"),s=o.get("align"),c=[this._tlpoints,this._blpoints];F.isString(h)&&(h=L[h.toUpperCase()]||[]);var x=r==="start"?0:1,a=v==="horizontal"?0:1;l=r==="start"?-l:l;for(var i=s==="center",n=0;n<c[x].length-1;n++){var u=c[x][n].slice(),g=this._firstDayOfMonth[n];if(i){var d=this._firstDayPoints[n];u[a]=(d[a]+c[0][n+1][a])/2}var y=o.get("formatter"),p=h[+g.m-1],w={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:p},S=this._formatterLabel(y,w),R=new O.Text({z2:30});F.extend(O.setTextStyle(R.style,o,{text:S}),this._monthTextPositionControl(u,i,v,r,l)),m.add(R)}}},_weekTextPositionControl:function(f,v,m,o,h){var l="center",r="middle",s=f[0],c=f[1],x=m==="start";return v==="horizontal"?(s=s+o+(x?1:-1)*h[0]/2,l=x?"right":"left"):(c=c+o+(x?1:-1)*h[1]/2,r=x?"bottom":"top"),{x:s,y:c,textAlign:l,textVerticalAlign:r}},_renderWeekText:function(f,v,m,o){var h=f.getModel("dayLabel");if(h.get("show")){var l=f.coordinateSystem,r=h.get("position"),s=h.get("nameMap"),c=h.get("margin"),x=l.getFirstDayOfWeek();F.isString(s)&&(s=T[s.toUpperCase()]||[]);var a=l.getNextNDay(v.end.time,7-v.lweek).time,i=[l.getCellWidth(),l.getCellHeight()];c=b.parsePercent(c,i[m==="horizontal"?0:1]),r==="start"&&(a=l.getNextNDay(v.start.time,-(7+v.fweek)).time,c=-c);for(var n=0;n<7;n++){var u=l.getNextNDay(a,n),g=l.dataToRect([u.time],!1).center,d=n;d=Math.abs((n+x)%7);var y=new O.Text({z2:30});F.extend(O.setTextStyle(y.style,h,{text:s[d]}),this._weekTextPositionControl(g,m,r,c,i)),o.add(y)}}}});X.exports=C},182846:function(X,z,e){e(745292),e(758367)},758367:function(X,z,e){e(803949),e(507051),e(884449),e(257381),e(503021),e(837963),e(209117)},641632:function(X,z,e){e(803949),e(507051),e(884449),e(614103),e(479491),e(837963),e(209117)},745292:function(X,z,e){e(803949),e(507051),e(884449),e(362638),e(849825),e(837963),e(209117)},250127:function(X,z,e){var E=e(131879),F=e(748354),O=e(497171),M=e(438289),b=E.each,L=F.asc,T=function(h,l,r,s){this._dimName=h,this._axisIndex=l,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=s,this._dataZoomModel=r};T.prototype={constructor:T,hostedBy:function(h){return this._dataZoomModel===h},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var h=[],l=this.ecModel;return l.eachSeries(function(r){if(O.isCoordSupported(r.get("coordinateSystem"))){var s=this._dimName,c=l.queryComponents({mainType:s+"Axis",index:r.get(s+"AxisIndex"),id:r.get(s+"AxisId")})[0];this._axisIndex===(c&&c.componentIndex)&&h.push(r)}},this),h},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var h=this._dimName,l=this.ecModel,r=this.getAxisModel(),s=h==="x"||h==="y",c,x;s?(x="gridIndex",c=h==="x"?"y":"x"):(x="polarIndex",c=h==="angle"?"radius":"angle");var a;return l.eachComponent(c+"Axis",function(i){(i.get(x)||0)===(r.get(x)||0)&&(a=i)}),a},getMinMaxSpan:function(){return E.clone(this._minMaxSpan)},calculateDataWindow:function(h){var l=this._dataExtent,r=this.getAxisModel(),s=r.axis.scale,c=this._dataZoomModel.getRangePropMode(),x=[0,100],a=[],i=[],n;b(["start","end"],function(d,y){var p=h[d],w=h[d+"Value"];c[y]==="percent"?(p==null&&(p=x[y]),w=s.parse(F.linearMap(p,x,l))):(n=!0,w=w==null?l[y]:s.parse(w),p=F.linearMap(w,l,x)),i[y]=w,a[y]=p}),L(i),L(a);var u=this._minMaxSpan;n?g(i,a,l,x,!1):g(a,i,x,l,!0);function g(d,y,p,w,S){var R=S?"Span":"ValueSpan";M(0,d,p,"all",u["min"+R],u["max"+R]);for(var B=0;B<2;B++)y[B]=F.linearMap(d[B],p,w,!0),S&&(y[B]=s.parse(y[B]))}return{valueWindow:i,percentWindow:a}},reset:function(h){if(h===this._dataZoomModel){var l=this.getTargetSeriesModels();this._dataExtent=C(this,this._dimName,l),m(this);var r=this.calculateDataWindow(h.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,v(this)}},restore:function(h){h===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,v(this,!0))},filterData:function(h,l){if(h!==this._dataZoomModel)return;var r=this._dimName,s=this.getTargetSeriesModels(),c=h.get("filterMode"),x=this._valueWindow;if(c==="none")return;b(s,function(i){var n=i.getData(),u=n.mapDimension(r,!0);u.length&&(c==="weakFilter"?n.filterSelf(function(g){for(var d,y,p,w=0;w<u.length;w++){var S=n.get(u[w],g),R=!isNaN(S),B=S<x[0],k=S>x[1];if(R&&!B&&!k)return!0;R&&(p=!0),B&&(d=!0),k&&(y=!0)}return p&&d&&y}):b(u,function(g){if(c==="empty")i.setData(n=n.map(g,function(y){return a(y)?y:NaN}));else{var d={};d[g]=x,n.selectRange(d)}}),b(u,function(g){n.setApproximateExtent(x,g)}))});function a(i){return i>=x[0]&&i<=x[1]}}};function C(h,l,r){var s=[1/0,-1/0];return b(r,function(c){var x=c.getData();x&&b(x.mapDimension(l,!0),function(a){var i=x.getApproximateExtent(a);i[0]<s[0]&&(s[0]=i[0]),i[1]>s[1]&&(s[1]=i[1])})}),s[1]<s[0]&&(s=[NaN,NaN]),f(h,s),s}function f(h,l){var r=h.getAxisModel(),s=r.getMin(!0),c=r.get("type")==="category",x=c&&r.getCategories().length;s!=null&&s!=="dataMin"&&typeof s!="function"?l[0]=s:c&&(l[0]=x>0?0:NaN);var a=r.getMax(!0);return a!=null&&a!=="dataMax"&&typeof a!="function"?l[1]=a:c&&(l[1]=x>0?x-1:NaN),r.get("scale",!0)||(l[0]>0&&(l[0]=0),l[1]<0&&(l[1]=0)),l}function v(h,l){var r=h.getAxisModel(),s=h._percentWindow,c=h._valueWindow;if(s){var x=F.getPixelPrecision(c,[0,500]);x=Math.min(x,20);var a=l||s[0]===0&&s[1]===100;r.setRange(a?null:+c[0].toFixed(x),a?null:+c[1].toFixed(x))}}function m(h){var l=h._minMaxSpan={},r=h._dataZoomModel,s=h._dataExtent;b(["min","max"],function(c){var x=r.get(c+"Span"),a=r.get(c+"ValueSpan");a!=null&&(a=h.getAxisModel().axis.scale.parse(a)),a!=null?x=F.linearMap(s[0]+a,s,[0,100],!0):x!=null&&(a=F.linearMap(x,[0,100],s,!0)-s[0]),l[c+"Span"]=x,l[c+"ValueSpan"]=a})}var o=T;X.exports=o},507051:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(131879),b=e(358020),L=e(835454),T=e(497171),C=e(250127),f=M.each,v=T.eachAxisDim,m=O.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(r,s,c){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var x=o(r);this.settledOption=x,this.mergeDefaultAndTheme(r,c),this.doInit(x)},mergeOption:function(r){var s=o(r);M.merge(this.option,r,!0),M.merge(this.settledOption,s,!0),this.doInit(s)},doInit:function(r){var s=this.option;b.canvasSupported||(s.realtime=!1),this._setDefaultThrottle(r),h(this,r);var c=this.settledOption;f([["start","startValue"],["end","endValue"]],function(x,a){this._rangePropMode[a]==="value"&&(s[x[0]]=c[x[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var r=this._axisProxies;this.eachTargetAxis(function(s,c,x,a){var i=this.dependentModels[s.axis][c],n=i.__dzAxisProxy||(i.__dzAxisProxy=new C(s.name,c,this,a));r[s.name+"_"+c]=n},this)},_resetTarget:function(){var r=this.option,s=this._judgeAutoMode();v(function(c){var x=c.axisIndex;r[x]=L.normalizeToArray(r[x])},this),s==="axisIndex"?this._autoSetAxisIndex():s==="orient"&&this._autoSetOrient()},_judgeAutoMode:function(){var r=this.option,s=!1;v(function(x){r[x.axisIndex]!=null&&(s=!0)},this);var c=r.orient;if(c==null&&s)return"orient";if(!s)return c==null&&(r.orient="horizontal"),"axisIndex"},_autoSetAxisIndex:function(){var r=!0,s=this.get("orient",!0),c=this.option,x=this.dependentModels;if(r){var a=s==="vertical"?"y":"x";x[a+"Axis"].length?(c[a+"AxisIndex"]=[0],r=!1):f(x.singleAxis,function(i){r&&i.get("orient",!0)===s&&(c.singleAxisIndex=[i.componentIndex],r=!1)})}r&&v(function(i){if(r){var n=[],u=this.dependentModels[i.axis];if(u.length&&!n.length)for(var g=0,d=u.length;g<d;g++)u[g].get("type")==="category"&&n.push(g);c[i.axisIndex]=n,n.length&&(r=!1)}},this),r&&this.ecModel.eachSeries(function(i){this._isSeriesHasAllAxesTypeOf(i,"value")&&v(function(n){var u=c[n.axisIndex],g=i.get(n.axisIndex),d=i.get(n.axisId),y=i.ecModel.queryComponents({mainType:n.axis,index:g,id:d})[0];g=y.componentIndex,M.indexOf(u,g)<0&&u.push(g)})},this)},_autoSetOrient:function(){var r;this.eachTargetAxis(function(s){!r&&(r=s.name)},this),this.option.orient=r==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(r,s){var c=!0;return v(function(x){var a=r.get(x.axisIndex),i=this.dependentModels[x.axis][a];(!i||i.get("type")!==s)&&(c=!1)},this),c},_setDefaultThrottle:function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var s=this.ecModel.option;this.option.throttle=s.animation&&s.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var r;return v(function(s){if(r==null){var c=this.get(s.axisIndex);c.length&&(r=this.dependentModels[s.axis][c[0]])}},this),r},eachTargetAxis:function(r,s){var c=this.ecModel;v(function(x){f(this.get(x.axisIndex),function(a){r.call(s,x,a,this,c)},this)},this)},getAxisProxy:function(r,s){return this._axisProxies[r+"_"+s]},getAxisModel:function(r,s){var c=this.getAxisProxy(r,s);return c&&c.getAxisModel()},setRawRange:function(r){var s=this.option,c=this.settledOption;f([["start","startValue"],["end","endValue"]],function(x){(r[x[0]]!=null||r[x[1]]!=null)&&(s[x[0]]=c[x[0]]=r[x[0]],s[x[1]]=c[x[1]]=r[x[1]])},this),h(this,r)},setCalculatedRange:function(r){var s=this.option;f(["start","startValue","end","endValue"],function(c){s[c]=r[c]})},getPercentRange:function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},getValueRange:function(r,s){if(r==null&&s==null){var c=this.findRepresentativeAxisProxy();if(c)return c.getDataValueWindow()}else return this.getAxisProxy(r,s).getDataValueWindow()},findRepresentativeAxisProxy:function(r){if(r)return r.__dzAxisProxy;var s=this._axisProxies;for(var c in s)if(s.hasOwnProperty(c)&&s[c].hostedBy(this))return s[c];for(var c in s)if(s.hasOwnProperty(c)&&!s[c].hostedBy(this))return s[c]},getRangePropMode:function(){return this._rangePropMode.slice()}});function o(r){var s={};return f(["start","end","startValue","endValue","throttle"],function(c){r.hasOwnProperty(c)&&(s[c]=r[c])}),s}function h(r,s){var c=r._rangePropMode,x=r.get("rangeMode");f([["start","startValue"],["end","endValue"]],function(a,i){var n=s[a[0]]!=null,u=s[a[1]]!=null;n&&!u?c[i]="percent":!n&&u?c[i]="value":x?c[i]=x[i]:n&&(c[i]="percent")})}var l=m;X.exports=l},884449:function(X,z,e){var E=e(653646),F=E.extend({type:"dataZoom",render:function(O,M,b,L){this.dataZoomModel=O,this.ecModel=M,this.api=b},getTargetCoordInfo:function(){var O=this.dataZoomModel,M=this.ecModel,b={};O.eachTargetAxis(function(T,C){var f=M.getComponent(T.axis,C);if(f){var v=f.getCoordSysModel();v&&L(v,f,b[v.mainType]||(b[v.mainType]=[]),v.componentIndex)}},this);function L(T,C,f,v){for(var m,o=0;o<f.length;o++)if(f[o].model===T){m=f[o];break}m||f.push(m={model:T,axisModels:[],coordIndex:v}),m.axisModels.push(C)}return b}});X.exports=F},257381:function(X,z,e){var E=e(507051),F=E.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});X.exports=F},503021:function(X,z,e){var E=e(131879),F=e(884449),O=e(438289),M=e(911727),b=E.bind,L=F.extend({type:"dataZoom.inside",init:function(m,o){this._range},render:function(m,o,h,l){L.superApply(this,"render",arguments),this._range=m.getPercentRange(),E.each(this.getTargetCoordInfo(),function(r,s){var c=E.map(r,function(x){return M.generateCoordId(x.model)});E.each(r,function(x){var a=x.model,i={};E.each(["pan","zoom","scrollMove"],function(n){i[n]=b(T[n],this,x,s)},this),M.register(h,{coordId:M.generateCoordId(a),allCoordIds:c,containsPoint:function(n,u,g){return a.coordinateSystem.containPoint([u,g])},dataZoomId:m.id,dataZoomModel:m,getRange:i})},this)},this)},dispose:function(){M.unregister(this.api,this.dataZoomModel.id),L.superApply(this,"dispose",arguments),this._range=null}}),T={zoom:function(m,o,h,l){var r=this._range,s=r.slice(),c=m.axisModels[0];if(c){var x=f[o](null,[l.originX,l.originY],c,h,m),a=(x.signal>0?x.pixelStart+x.pixelLength-x.pixel:x.pixel-x.pixelStart)/x.pixelLength*(s[1]-s[0])+s[0],i=Math.max(1/l.scale,0);s[0]=(s[0]-a)*i+a,s[1]=(s[1]-a)*i+a;var n=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(O(0,s,[0,100],0,n.minSpan,n.maxSpan),this._range=s,r[0]!==s[0]||r[1]!==s[1])return s}},pan:C(function(m,o,h,l,r,s){var c=f[l]([s.oldX,s.oldY],[s.newX,s.newY],o,r,h);return c.signal*(m[1]-m[0])*c.pixel/c.pixelLength}),scrollMove:C(function(m,o,h,l,r,s){var c=f[l]([0,0],[s.scrollDelta,s.scrollDelta],o,r,h);return c.signal*(m[1]-m[0])*s.scrollDelta})};function C(m){return function(o,h,l,r){var s=this._range,c=s.slice(),x=o.axisModels[0];if(x){var a=m(c,x,o,h,l,r);if(O(a,c,[0,100],"all"),this._range=c,s[0]!==c[0]||s[1]!==c[1])return c}}}var f={grid:function(m,o,h,l,r){var s=h.axis,c={},x=r.model.coordinateSystem.getRect();return m=m||[0,0],s.dim==="x"?(c.pixel=o[0]-m[0],c.pixelLength=x.width,c.pixelStart=x.x,c.signal=s.inverse?1:-1):(c.pixel=o[1]-m[1],c.pixelLength=x.height,c.pixelStart=x.y,c.signal=s.inverse?-1:1),c},polar:function(m,o,h,l,r){var s=h.axis,c={},x=r.model.coordinateSystem,a=x.getRadiusAxis().getExtent(),i=x.getAngleAxis().getExtent();return m=m?x.pointToCoord(m):[0,0],o=x.pointToCoord(o),h.mainType==="radiusAxis"?(c.pixel=o[0]-m[0],c.pixelLength=a[1]-a[0],c.pixelStart=a[0],c.signal=s.inverse?1:-1):(c.pixel=o[1]-m[1],c.pixelLength=i[1]-i[0],c.pixelStart=i[0],c.signal=s.inverse?-1:1),c},singleAxis:function(m,o,h,l,r){var s=h.axis,c=r.model.coordinateSystem.getRect(),x={};return m=m||[0,0],s.orient==="horizontal"?(x.pixel=o[0]-m[0],x.pixelLength=c.width,x.pixelStart=c.x,x.signal=s.inverse?1:-1):(x.pixel=o[1]-m[1],x.pixelLength=c.height,x.pixelStart=c.y,x.signal=s.inverse?-1:1),x}},v=L;X.exports=v},614103:function(X,z,e){var E=e(507051),F=E.extend({type:"dataZoom.select"});X.exports=F},479491:function(X,z,e){var E=e(884449),F=E.extend({type:"dataZoom.select"});X.exports=F},362638:function(X,z,e){var E=e(507051),F=E.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),O=F;X.exports=O},849825:function(X,z,e){var E=e(131879),F=e(519756),O=e(248070),M=e(601655),b=e(884449),L=e(748354),T=e(930871),C=e(438289),f=O.Rect,v=L.linearMap,m=L.asc,o=E.bind,h=E.each,l=7,r=1,s=30,c="horizontal",x="vertical",a=5,i=["line","bar","candlestick","scatter"],n=b.extend({type:"dataZoom.slider",init:function(y,p){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=p},render:function(y,p,w,S){if(n.superApply(this,"render",arguments),M.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=y.get("orient"),this.dataZoomModel.get("show")===!1){this.group.removeAll();return}(!S||S.type!=="dataZoom"||S.from!==this.uid)&&this._buildView(),this._updateView()},remove:function(){n.superApply(this,"remove",arguments),M.clear(this,"_dispatchZoomAction")},dispose:function(){n.superApply(this,"dispose",arguments),M.clear(this,"_dispatchZoomAction")},_buildView:function(){var y=this.group;y.removeAll(),this._resetLocation(),this._resetInterval();var p=this._displayables.barGroup=new O.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),y.add(p),this._positionGroup()},_resetLocation:function(){var y=this.dataZoomModel,p=this.api,w=this._findCoordRect(),S={width:p.getWidth(),height:p.getHeight()},R=this._orient===c?{right:S.width-w.x-w.width,top:S.height-s-l,width:w.width,height:s}:{right:l,top:w.y,width:s,height:w.height},B=T.getLayoutParams(y.option);E.each(["right","top","width","height"],function(P){B[P]==="ph"&&(B[P]=R[P])});var k=T.getLayoutRect(B,S,y.padding);this._location={x:k.x,y:k.y},this._size=[k.width,k.height],this._orient===x&&this._size.reverse()},_positionGroup:function(){var y=this.group,p=this._location,w=this._orient,S=this.dataZoomModel.getFirstTargetAxisModel(),R=S&&S.get("inverse"),B=this._displayables.barGroup,k=(this._dataShadowInfo||{}).otherAxisInverse;B.attr(w===c&&!R?{scale:k?[1,1]:[1,-1]}:w===c&&R?{scale:k?[-1,1]:[-1,-1]}:w===x&&!R?{scale:k?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:k?[-1,-1]:[-1,1],rotation:Math.PI/2});var P=y.getBoundingRect([B]);y.attr("position",[p.x-P.x,p.y-P.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var y=this.dataZoomModel,p=this._size,w=this._displayables.barGroup;w.add(new f({silent:!0,shape:{x:0,y:0,width:p[0],height:p[1]},style:{fill:y.get("backgroundColor")},z2:-40})),w.add(new f({shape:{x:0,y:0,width:p[0],height:p[1]},style:{fill:"transparent"},z2:0,onclick:E.bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var y=this._dataShadowInfo=this._prepareDataShadowInfo();if(y){var p=this._size,w=y.series,S=w.getRawData(),R=w.getShadowDim?w.getShadowDim():y.otherDim;if(R!=null){var B=S.getDataExtent(R),k=(B[1]-B[0])*.3;B=[B[0]-k,B[1]+k];var P=[0,p[1]],D=[0,p[0]],A=[[p[0],0],[0,0]],N=[],I=D[1]/(S.count()-1),G=0,W=Math.round(S.count()/p[0]),Z;S.each([R],function(U,V){if(W>0&&V%W){G+=I;return}var Y=U==null||isNaN(U)||U==="",$=Y?0:v(U,B,P,!0);Y&&!Z&&V?(A.push([A[A.length-1][0],0]),N.push([N[N.length-1][0],0])):!Y&&Z&&(A.push([G,0]),N.push([G,0])),A.push([G,$]),N.push([G,$]),G+=I,Z=Y});var H=this.dataZoomModel;this._displayables.barGroup.add(new O.Polygon({shape:{points:A},style:E.defaults({fill:H.get("dataBackgroundColor")},H.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new O.Polyline({shape:{points:N},style:H.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var y=this.dataZoomModel,p=y.get("showDataShadow");if(p!==!1){var w,S=this.ecModel;return y.eachTargetAxis(function(R,B){var k=y.getAxisProxy(R.name,B).getTargetSeriesModels();E.each(k,function(P){if(!w&&!(p!==!0&&E.indexOf(i,P.get("type"))<0)){var D=S.getComponent(R.axis,B).axis,A=u(R.name),N,I=P.coordinateSystem;A!=null&&I.getOtherAxis&&(N=I.getOtherAxis(D).inverse),A=P.getData().mapDimension(A),w={thisAxis:D,series:P,thisDim:R.name,otherDim:A,otherAxisInverse:N}}},this)},this),w}},_renderHandle:function(){var y=this._displayables,p=y.handles=[],w=y.handleLabels=[],S=this._displayables.barGroup,R=this._size,B=this.dataZoomModel;S.add(y.filler=new f({draggable:!0,cursor:g(this._orient),drift:o(this._onDragMove,this,"all"),ondragstart:o(this._showDataInfo,this,!0),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1),style:{fill:B.get("fillerColor"),textPosition:"inside"}})),S.add(new f({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:R[0],height:R[1]},style:{stroke:B.get("dataBackgroundColor")||B.get("borderColor"),lineWidth:r,fill:"rgba(0,0,0,0)"}})),h([0,1],function(k){var P=O.createIcon(B.get("handleIcon"),{cursor:g(this._orient),draggable:!0,drift:o(this._onDragMove,this,k),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),D=P.getBoundingRect();this._handleHeight=L.parsePercent(B.get("handleSize"),this._size[1]),this._handleWidth=D.width/D.height*this._handleHeight,P.setStyle(B.getModel("handleStyle").getItemStyle());var A=B.get("handleColor");A!=null&&(P.style.fill=A),S.add(p[k]=P);var N=B.textStyleModel;this.group.add(w[k]=new O.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:N.getTextColor(),textFont:N.getFont()},z2:10}))},this)},_resetInterval:function(){var y=this._range=this.dataZoomModel.getPercentRange(),p=this._getViewExtent();this._handleEnds=[v(y[0],[0,100],p,!0),v(y[1],[0,100],p,!0)]},_updateInterval:function(y,p){var w=this.dataZoomModel,S=this._handleEnds,R=this._getViewExtent(),B=w.findRepresentativeAxisProxy().getMinMaxSpan(),k=[0,100];C(p,S,R,w.get("zoomLock")?"all":y,B.minSpan!=null?v(B.minSpan,k,R,!0):null,B.maxSpan!=null?v(B.maxSpan,k,R,!0):null);var P=this._range,D=this._range=m([v(S[0],R,k,!0),v(S[1],R,k,!0)]);return!P||P[0]!==D[0]||P[1]!==D[1]},_updateView:function(y){var p=this._displayables,w=this._handleEnds,S=m(w.slice()),R=this._size;h([0,1],function(B){var k=p.handles[B],P=this._handleHeight;k.attr({scale:[P/2,P/2],position:[w[B],R[1]/2-P/2]})},this),p.filler.setShape({x:S[0],y:0,width:S[1]-S[0],height:R[1]}),this._updateDataInfo(y)},_updateDataInfo:function(y){var p=this.dataZoomModel,w=this._displayables,S=w.handleLabels,R=this._orient,B=["",""];if(p.get("showDetail")){var k=p.findRepresentativeAxisProxy();if(k){var P=k.getAxisModel().axis,D=this._range,A=y?k.calculateDataWindow({start:D[0],end:D[1]}).valueWindow:k.getDataValueWindow();B=[this._formatLabel(A[0],P),this._formatLabel(A[1],P)]}}var N=m(this._handleEnds.slice());I.call(this,0),I.call(this,1);function I(G){var W=O.getTransform(w.handles[G].parent,this.group),Z=O.transformDirection(G===0?"right":"left",W),H=this._handleWidth/2+a,U=O.applyTransform([N[G]+(G===0?-H:H),this._size[1]/2],W);S[G].setStyle({x:U[0],y:U[1],textVerticalAlign:R===c?"middle":Z,textAlign:R===c?Z:"center",text:B[G]})}},_formatLabel:function(y,p){var w=this.dataZoomModel,S=w.get("labelFormatter"),R=w.get("labelPrecision");(R==null||R==="auto")&&(R=p.getPixelPrecision());var B=y==null||isNaN(y)?"":p.type==="category"||p.type==="time"?p.scale.getLabel(Math.round(y)):y.toFixed(Math.min(R,20));return E.isFunction(S)?S(y,B):E.isString(S)?S.replace("{value}",B):B},_showDataInfo:function(y){y=this._dragging||y;var p=this._displayables.handleLabels;p[0].attr("invisible",!y),p[1].attr("invisible",!y)},_onDragMove:function(y,p,w,S){this._dragging=!0,F.stop(S.event);var R=this._displayables.barGroup.getLocalTransform(),B=O.applyTransform([p,w],R,!0),k=this._updateInterval(y,B[0]),P=this.dataZoomModel.get("realtime");this._updateView(!P),k&&P&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1);var y=this.dataZoomModel.get("realtime");!y&&this._dispatchZoomAction()},_onClickPanelClick:function(y){var p=this._size,w=this._displayables.barGroup.transformCoordToLocal(y.offsetX,y.offsetY);if(!(w[0]<0||w[0]>p[0]||w[1]<0||w[1]>p[1])){var S=this._handleEnds,R=(S[0]+S[1])/2,B=this._updateInterval("all",w[0]-R);this._updateView(),B&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var y=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:y[0],end:y[1]})},_findCoordRect:function(){var y;if(h(this.getTargetCoordInfo(),function(S){if(!y&&S.length){var R=S[0].model.coordinateSystem;y=R.getRect&&R.getRect()}}),!y){var p=this.api.getWidth(),w=this.api.getHeight();y={x:p*.2,y:w*.2,width:p*.6,height:w*.6}}return y}});function u(y){var p={x:"y",y:"x",radius:"angle",angle:"radius"};return p[y]}function g(y){return y==="vertical"?"ns-resize":"ew-resize"}var d=n;X.exports=d},209117:function(X,z,e){var E=e(3440),F=e(131879),O=e(497171);E.registerAction("dataZoom",function(M,b){var L=O.createLinkedNodesFinder(F.bind(b.eachComponent,b,"dataZoom"),O.eachAxisDim,function(C,f){return C.get(f.axisIndex)}),T=[];b.eachComponent({mainType:"dataZoom",query:M},function(C,f){T.push.apply(T,L(C).nodes)}),F.each(T,function(C,f){C.setRawRange({start:M.start,end:M.end,startValue:M.startValue,endValue:M.endValue})})})},837963:function(X,z,e){var E=e(3440),F=e(131879),O=F.createHashMap,M=F.each;E.registerProcessor({getTargetSeries:function(b){var L=O();return b.eachComponent("dataZoom",function(T){T.eachTargetAxis(function(C,f,v){var m=v.getAxisProxy(C.name,f);M(m.getTargetSeriesModels(),function(o){L.set(o.uid,o)})})}),L},modifyOutputEnd:!0,overallReset:function(b,L){b.eachComponent("dataZoom",function(T){T.eachTargetAxis(function(C,f,v){v.getAxisProxy(C.name,f).reset(v,L)}),T.eachTargetAxis(function(C,f,v){v.getAxisProxy(C.name,f).filterData(v,L)})}),b.eachComponent("dataZoom",function(T){var C=T.findRepresentativeAxisProxy(),f=C.getDataPercentWindow(),v=C.getDataValueWindow();T.setCalculatedRange({start:f[0],end:f[1],startValue:v[0],endValue:v[1]})})}})},497171:function(X,z,e){var E=e(131879),F=e(317795),O=["x","y","z","radius","angle","single"],M=["cartesian2d","polar","singleAxis"];function b(f){return E.indexOf(M,f)>=0}function L(f,v){f=f.slice();var m=E.map(f,F.capitalFirst);v=(v||[]).slice();var o=E.map(v,F.capitalFirst);return function(h,l){E.each(f,function(r,s){for(var c={name:r,capital:m[s]},x=0;x<v.length;x++)c[v[x]]=r+o[x];h.call(l,c)})}}var T=L(O,["axisIndex","axis","index","id"]);function C(f,v,m){return function(r){var s={nodes:[],records:{}};if(v(function(a){s.records[a.name]={}}),!r)return s;l(r,s);var c;do c=!1,f(x);while(c);function x(a){!o(a,s)&&h(a,s)&&(l(a,s),c=!0)}return s};function o(r,s){return E.indexOf(s.nodes,r)>=0}function h(r,s){var c=!1;return v(function(x){E.each(m(r,x)||[],function(a){s.records[x.name][a]&&(c=!0)})}),c}function l(r,s){s.nodes.push(r),v(function(c){E.each(m(r,c)||[],function(x){s.records[c.name][x]=!0})})}}z.isCoordSupported=b,z.createNameEach=L,z.eachAxisDim=T,z.createLinkedNodesFinder=C},883406:function(X,z,e){var E=e(131879),F=E.each,O="\0_ec_hist_store";function M(f,v){var m=C(f);F(v,function(o,h){for(var l=m.length-1;l>=0;l--){var r=m[l];if(r[h])break}if(l<0){var s=f.queryComponents({mainType:"dataZoom",subType:"select",id:h})[0];if(s){var c=s.getPercentRange();m[0][h]={dataZoomId:h,start:c[0],end:c[1]}}}}),m.push(v)}function b(f){var v=C(f),m=v[v.length-1];v.length>1&&v.pop();var o={};return F(m,function(h,l){for(var r=v.length-1;r>=0;r--){var h=v[r][l];if(h){o[l]=h;break}}}),o}function L(f){f[O]=null}function T(f){return C(f).length}function C(f){var v=f[O];return v||(v=f[O]=[{}]),v}z.push=M,z.pop=b,z.clear=L,z.count=T},911727:function(X,z,e){var E=e(131879),F=e(973672),O=e(601655),M="\0_ec_dataZoom_roams";function b(h,l){var r=C(h),s=l.dataZoomId,c=l.coordId;E.each(r,function(i,n){var u=i.dataZoomInfos;u[s]&&E.indexOf(l.allCoordIds,c)<0&&(delete u[s],i.count--)}),v(r);var x=r[c];x||(x=r[c]={coordId:c,dataZoomInfos:{},count:0},x.controller=f(h,x),x.dispatchAction=E.curry(m,h)),!x.dataZoomInfos[s]&&x.count++,x.dataZoomInfos[s]=l;var a=o(x.dataZoomInfos);x.controller.enable(a.controlType,a.opt),x.controller.setPointerChecker(l.containsPoint),O.createOrUpdate(x,"dispatchAction",l.dataZoomModel.get("throttle",!0),"fixRate")}function L(h,l){var r=C(h);E.each(r,function(s){s.controller.dispose();var c=s.dataZoomInfos;c[l]&&(delete c[l],s.count--)}),v(r)}function T(h){return h.type+"\0_"+h.id}function C(h){var l=h.getZr();return l[M]||(l[M]={})}function f(h,l){var r=new F(h.getZr());return E.each(["pan","zoom","scrollMove"],function(s){r.on(s,function(c){var x=[];E.each(l.dataZoomInfos,function(a){if(c.isAvailableBehavior(a.dataZoomModel.option)){var i=(a.getRange||{})[s],n=i&&i(l.controller,c);!a.dataZoomModel.get("disabled",!0)&&n&&x.push({dataZoomId:a.dataZoomId,start:n[0],end:n[1]})}}),x.length&&l.dispatchAction(x)})}),r}function v(h){E.each(h,function(l,r){l.count||(l.controller.dispose(),delete h[r])})}function m(h,l){h.dispatchAction({type:"dataZoom",batch:l})}function o(h){var l,r="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},c=!0;return E.each(h,function(x){var a=x.dataZoomModel,i=a.get("disabled",!0)?!1:a.get("zoomLock",!0)?"move":!0;s[r+i]>s[r+l]&&(l=i),c&=a.get("preventDefaultMouseMove",!0)}),{controlType:l,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!c}}}z.register=b,z.unregister=L,z.generateCoordId=T},803949:function(X,z,e){var E=e(360684);E.registerSubTypeDefaulter("dataZoom",function(){return"slider"})},118841:function(X,z,e){var E=e(360684),F=e(653646),O=e(543036),M=O.detectSourceFormat,b=e(317233),L=b.SERIES_LAYOUT_BY_COLUMN;E.extend({type:"dataset",defaultOption:{seriesLayoutBy:L,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){M(this)}}),F.extend({type:"dataset"})},910238:function(X,z,e){var E=e(3440),F=e(131879);e(658526),e(727547),e(697028),e(933894);function O(M,b){b.update="updateView",E.registerAction(b,function(L,T){var C={};return T.eachComponent({mainType:"geo",query:L},function(f){f[M](L.name);var v=f.coordinateSystem;F.each(v.regions,function(m){C[m.name]=f.isSelected(m.name)||!1})}),{selected:C,name:L.name}})}O("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),O("select",{type:"geoSelect",event:"geoselected"}),O("unSelect",{type:"geoUnSelect",event:"geounselected"})},697028:function(X,z,e){var E=e(307245),F=e(3440),O=F.extendComponentView({type:"geo",init:function(M,b){var L=new E(b,!0);this._mapDraw=L,this.group.add(L.group)},render:function(M,b,L,T){if(!(T&&T.type==="geoToggleSelect"&&T.from===this.uid)){var C=this._mapDraw;M.get("show")?C.draw(M,b,L,this,T):this._mapDraw.group.removeAll(),this.group.silent=M.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});X.exports=O},362550:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(131879),b=e(835454),L=e(248070),T=e(930871),C=e(748354),f=C.parsePercent,v={path:null,compoundPath:null,group:L.Group,image:L.Image,text:L.Text};O.registerPreprocessor(function(i){var n=i.graphic;M.isArray(n)?!n[0]||!n[0].elements?i.graphic=[{elements:n}]:i.graphic=[i.graphic[0]]:n&&!n.elements&&(i.graphic=[{elements:[n]}])});var m=O.extendComponentModel({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(i){var n=this.option.elements;this.option.elements=null,m.superApply(this,"mergeOption",arguments),this.option.elements=n},optionUpdated:function(i,n){var u=this.option,g=(n?u:i).elements,d=u.elements=n?[]:u.elements,y=[];this._flatten(g,y);var p=b.mappingToExists(d,y);b.makeIdAndName(p);var w=this._elOptionsToUpdate=[];M.each(p,function(R,B){var k=R.option;k&&(w.push(k),s(R,k),c(d,B,k),x(d[B],k))},this);for(var S=d.length-1;S>=0;S--)d[S]==null?d.splice(S,1):delete d[S].$action},_flatten:function(i,n,u){M.each(i,function(g){if(g){u&&(g.parentOption=u),n.push(g);var d=g.children;g.type==="group"&&d&&this._flatten(d,n,g),delete g.children}},this)},useElOptionsToUpdate:function(){var i=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,i}});O.extendComponentView({type:"graphic",init:function(i,n){this._elMap=M.createHashMap(),this._lastGraphicModel},render:function(i,n,u){i!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=i,this._updateElements(i),this._relocate(i,u)},_updateElements:function(i){var n=i.useElOptionsToUpdate();if(n){var u=this._elMap,g=this.group;M.each(n,function(d){var y=d.$action,p=d.id,w=u.get(p),S=d.parentId,R=S!=null?u.get(S):g,B=d.style;d.type==="text"&&B&&(d.hv&&d.hv[1]&&(B.textVerticalAlign=B.textBaseline=null),!B.hasOwnProperty("textFill")&&B.fill&&(B.textFill=B.fill),!B.hasOwnProperty("textStroke")&&B.stroke&&(B.textStroke=B.stroke));var k=l(d);!y||y==="merge"?w?w.attr(k):o(p,R,k,u):y==="replace"?(h(w,u),o(p,R,k,u)):y==="remove"&&h(w,u);var P=u.get(p);P&&(P.__ecGraphicWidthOption=d.width,P.__ecGraphicHeightOption=d.height,a(P,i,d))})}},_relocate:function(i,n){for(var u=i.option.elements,g=this.group,d=this._elMap,y=n.getWidth(),p=n.getHeight(),w=0;w<u.length;w++){var S=u[w],R=d.get(S.id);if(!(!R||!R.isGroup)){var B=R.parent,k=B===g;R.__ecGraphicWidth=f(R.__ecGraphicWidthOption,k?y:B.__ecGraphicWidth)||0,R.__ecGraphicHeight=f(R.__ecGraphicHeightOption,k?p:B.__ecGraphicHeight)||0}}for(var w=u.length-1;w>=0;w--){var S=u[w],R=d.get(S.id);if(R){var B=R.parent,P=B===g?{width:y,height:p}:{width:B.__ecGraphicWidth,height:B.__ecGraphicHeight};T.positionElement(R,S,P,null,{hv:S.hv,boundingMode:S.bounding})}}},_clear:function(){var i=this._elMap;i.each(function(n){h(n,i)}),this._elMap=M.createHashMap()},dispose:function(){this._clear()}});function o(i,n,u,g){var d=u.type,y=v.hasOwnProperty(d)?v[d]:L.getShapeClass(d),p=new y(u);n.add(p),g.set(i,p),p.__ecGraphicId=i}function h(i,n){var u=i&&i.parent;u&&(i.type==="group"&&i.traverse(function(g){h(g,n)}),n.removeKey(i.__ecGraphicId),u.remove(i))}function l(i){return i=M.extend({},i),M.each(["id","parentId","$action","hv","bounding"].concat(T.LOCATION_PARAMS),function(n){delete i[n]}),i}function r(i,n){var u;return M.each(n,function(g){i[g]!=null&&i[g]!=="auto"&&(u=!0)}),u}function s(i,n){var u=i.exist;if(n.id=i.keyInfo.id,!n.type&&u&&(n.type=u.type),n.parentId==null){var g=n.parentOption;g?n.parentId=g.id:u&&(n.parentId=u.parentId)}n.parentOption=null}function c(i,n,u){var g=M.extend({},u),d=i[n],y=u.$action||"merge";y==="merge"?d?(M.merge(d,g,!0),T.mergeLayoutParam(d,g,{ignoreSize:!0}),T.copyLayoutParams(u,d)):i[n]=g:y==="replace"?i[n]=g:y==="remove"&&d&&(i[n]=null)}function x(i,n){i&&(i.hv=n.hv=[r(n,["left","right"]),r(n,["top","bottom"])],i.type==="group"&&(i.width==null&&(i.width=n.width=0),i.height==null&&(i.height=n.height=0)))}function a(i,n,u){var g=i.eventData;!i.silent&&!i.ignore&&!g&&(g=i.eventData={componentType:"graphic",componentIndex:n.componentIndex,name:i.name}),g&&(g.info=i.info)}},103692:function(X,z,e){e(615367),e(88067),e(144344)},615367:function(X,z,e){var E=e(3440),F=e(131879),O=e(248070);e(909145),e(95608),E.extendComponentView({type:"grid",render:function(M,b){this.group.removeAll(),M.get("show")&&this.group.add(new O.Rect({shape:M.coordinateSystem.getRect(),style:F.defaults({fill:M.get("backgroundColor")},M.getItemStyle()),silent:!0,z2:-1}))}}),E.registerPreprocessor(function(M){M.xAxis&&M.yAxis&&!M.grid&&(M.grid={})})},612968:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(291212),b=e(248070),L=e(464174),T=e(865453),C=O.curry,f=O.each,v=O.map,m=Math.min,o=Math.max,h=Math.pow,l=1e4,r=6,s=6,c="globalPan",x={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},a={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},i={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},n=0;function u(ct){M.call(this),this._zr=ct,this.group=new b.Group,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid="brushController_"+n++,this._handlers={},f(Ft,function(vt,Lt){this._handlers[Lt]=O.bind(vt,this)},this)}u.prototype={constructor:u,enableBrush:function(ct){return this._brushType&&d(this),ct.brushType&&g(this,ct),this},setPanels:function(ct){if(ct&&ct.length){var vt=this._panels={};O.each(ct,function(Lt){vt[Lt.panelId]=O.clone(Lt)})}else this._panels=null;return this},mount:function(ct){ct=ct||{},this._enableGlobalPan=ct.enableGlobalPan;var vt=this.group;return this._zr.add(vt),vt.attr({position:ct.position||[0,0],rotation:ct.rotation||0,scale:ct.scale||[1,1]}),this._transform=vt.getLocalTransform(),this},eachCover:function(ct,vt){f(this._covers,ct,vt)},updateCovers:function(ct){ct=O.map(ct,function(dt){return O.merge(O.clone(i),dt,!0)});var vt="\0-brush-index-",Lt=this._covers,Ct=this._covers=[],jt=this,zt=this._creatingCover;return new T(Lt,ct,Zt,Yt).add(ft).update(ft).remove(gt).execute(),this;function Yt(dt,lt){return(dt.id!=null?dt.id:vt+lt)+"-"+dt.brushType}function Zt(dt,lt){return Yt(dt.__brushOption,lt)}function ft(dt,lt){var ot=ct[dt];if(lt!=null&&Lt[lt]===zt)Ct[dt]=Lt[lt];else{var it=Ct[dt]=lt!=null?(Lt[lt].__brushOption=ot,Lt[lt]):S(jt,w(jt,ot));k(jt,it)}}function gt(dt){Lt[dt]!==zt&&jt.group.remove(Lt[dt])}},unmount:function(){return this.enableBrush(!1),N(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},O.mixin(u,M);function g(ct,vt){var Lt=ct._zr;ct._enableGlobalPan||L.take(Lt,c,ct._uid),y(Lt,ct._handlers),ct._brushType=vt.brushType,ct._brushOption=O.merge(O.clone(i),vt,!0)}function d(ct){var vt=ct._zr;L.release(vt,c,ct._uid),p(vt,ct._handlers),ct._brushType=ct._brushOption=null}function y(ct,vt){f(vt,function(Lt,Ct){ct.on(Ct,Lt)})}function p(ct,vt){f(vt,function(Lt,Ct){ct.off(Ct,Lt)})}function w(ct,vt){var Lt=Tt[vt.brushType].createCover(ct,vt);return Lt.__brushOption=vt,B(Lt,vt),ct.group.add(Lt),Lt}function S(ct,vt){var Lt=P(vt);return Lt.endCreating&&(Lt.endCreating(ct,vt),B(vt,vt.__brushOption)),vt}function R(ct,vt){var Lt=vt.__brushOption;P(vt).updateCoverShape(ct,vt,Lt.range,Lt)}function B(ct,vt){var Lt=vt.z;Lt==null&&(Lt=l),ct.traverse(function(Ct){Ct.z=Lt,Ct.z2=Lt})}function k(ct,vt){P(vt).updateCommon(ct,vt),R(ct,vt)}function P(ct){return Tt[ct.__brushOption.brushType]}function D(ct,vt,Lt){var Ct=ct._panels;if(!Ct)return!0;var jt,zt=ct._transform;return f(Ct,function(Yt){Yt.isTargetByCursor(vt,Lt,zt)&&(jt=Yt)}),jt}function A(ct,vt){var Lt=ct._panels;if(!Lt)return!0;var Ct=vt.__brushOption.panelId;return Ct!=null?Lt[Ct]:!0}function N(ct){var vt=ct._covers,Lt=vt.length;return f(vt,function(Ct){ct.group.remove(Ct)},ct),vt.length=0,!!Lt}function I(ct,vt){var Lt=v(ct._covers,function(Ct){var jt=Ct.__brushOption,zt=O.clone(jt.range);return{brushType:jt.brushType,panelId:jt.panelId,range:zt}});ct.trigger("brush",Lt,{isEnd:!!vt.isEnd,removeOnClick:!!vt.removeOnClick})}function G(ct){var vt=ct._track;if(!vt.length)return!1;var Lt=vt[vt.length-1],Ct=vt[0],jt=Lt[0]-Ct[0],zt=Lt[1]-Ct[1],Yt=h(jt*jt+zt*zt,.5);return Yt>r}function W(ct){var vt=ct.length-1;return vt<0&&(vt=0),[ct[0],ct[vt]]}function Z(ct,vt,Lt,Ct){var jt=new b.Group;return jt.add(new b.Rect({name:"main",style:Y(Lt),silent:!0,draggable:!0,cursor:"move",drift:C(ct,vt,jt,"nswe"),ondragend:C(I,vt,{isEnd:!0})})),f(Ct,function(zt){jt.add(new b.Rect({name:zt,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:C(ct,vt,jt,zt),ondragend:C(I,vt,{isEnd:!0})}))}),jt}function H(ct,vt,Lt,Ct){var jt=Ct.brushStyle.lineWidth||0,zt=o(jt,s),Yt=Lt[0][0],Zt=Lt[1][0],ft=Yt-jt/2,gt=Zt-jt/2,dt=Lt[0][1],lt=Lt[1][1],ot=dt-zt+jt/2,it=lt-zt+jt/2,yt=dt-Yt,Ot=lt-Zt,St=yt+jt,Gt=Ot+jt;V(ct,vt,"main",Yt,Zt,yt,Ot),Ct.transformable&&(V(ct,vt,"w",ft,gt,zt,Gt),V(ct,vt,"e",ot,gt,zt,Gt),V(ct,vt,"n",ft,gt,St,zt),V(ct,vt,"s",ft,it,St,zt),V(ct,vt,"nw",ft,gt,zt,zt),V(ct,vt,"ne",ot,gt,zt,zt),V(ct,vt,"sw",ft,it,zt,zt),V(ct,vt,"se",ot,it,zt,zt))}function U(ct,vt){var Lt=vt.__brushOption,Ct=Lt.transformable,jt=vt.childAt(0);jt.useStyle(Y(Lt)),jt.attr({silent:!Ct,cursor:Ct?"move":"default"}),f(["w","e","n","s","se","sw","ne","nw"],function(zt){var Yt=vt.childOfName(zt),Zt=J(ct,zt);Yt&&Yt.attr({silent:!Ct,invisible:!Ct,cursor:Ct?a[Zt]+"-resize":null})})}function V(ct,vt,Lt,Ct,jt,zt,Yt){var Zt=vt.childOfName(Lt);Zt&&Zt.setShape(ut(st(ct,vt,[[Ct,jt],[Ct+zt,jt+Yt]])))}function Y(ct){return O.defaults({strokeNoScale:!0},ct.brushStyle)}function $(ct,vt,Lt,Ct){var jt=[m(ct,Lt),m(vt,Ct)],zt=[o(ct,Lt),o(vt,Ct)];return[[jt[0],zt[0]],[jt[1],zt[1]]]}function K(ct){return b.getTransform(ct.group)}function J(ct,vt){if(vt.length>1){vt=vt.split("");var Lt=[J(ct,vt[0]),J(ct,vt[1])];return(Lt[0]==="e"||Lt[0]==="w")&&Lt.reverse(),Lt.join("")}else{var Ct={w:"left",e:"right",n:"top",s:"bottom"},jt={left:"w",right:"e",top:"n",bottom:"s"},Lt=b.transformDirection(Ct[vt],K(ct));return jt[Lt]}}function Q(ct,vt,Lt,Ct,jt,zt,Yt,Zt){var ft=Ct.__brushOption,gt=ct(ft.range),dt=nt(Lt,zt,Yt);f(jt.split(""),function(lt){var ot=x[lt];gt[ot[0]][ot[1]]+=dt[ot[0]]}),ft.range=vt($(gt[0][0],gt[1][0],gt[0][1],gt[1][1])),k(Lt,Ct),I(Lt,{isEnd:!1})}function et(ct,vt,Lt,Ct,jt){var zt=vt.__brushOption.range,Yt=nt(ct,Lt,Ct);f(zt,function(Zt){Zt[0]+=Yt[0],Zt[1]+=Yt[1]}),k(ct,vt),I(ct,{isEnd:!1})}function nt(ct,vt,Lt){var Ct=ct.group,jt=Ct.transformCoordToLocal(vt,Lt),zt=Ct.transformCoordToLocal(0,0);return[jt[0]-zt[0],jt[1]-zt[1]]}function st(ct,vt,Lt){var Ct=A(ct,vt);return Ct&&Ct!==!0?Ct.clipPath(Lt,ct._transform):O.clone(Lt)}function ut(ct){var vt=m(ct[0][0],ct[1][0]),Lt=m(ct[0][1],ct[1][1]),Ct=o(ct[0][0],ct[1][0]),jt=o(ct[0][1],ct[1][1]);return{x:vt,y:Lt,width:Ct-vt,height:jt-Lt}}function rt(ct,vt,Lt){if(!(!ct._brushType||Rt(ct,vt))){var Ct=ct._zr,jt=ct._covers,zt=D(ct,vt,Lt);if(!ct._dragging)for(var Yt=0;Yt<jt.length;Yt++){var Zt=jt[Yt].__brushOption;if(zt&&(zt===!0||Zt.panelId===zt.panelId)&&Tt[Zt.brushType].contain(jt[Yt],Lt[0],Lt[1]))return}zt&&Ct.setCursorStyle("crosshair")}}function ht(ct){var vt=ct.event;vt.preventDefault&&vt.preventDefault()}function Pt(ct,vt,Lt){return ct.childOfName("main").contain(vt,Lt)}function wt(ct,vt,Lt,Ct){var jt=ct._creatingCover,zt=ct._creatingPanel,Yt=ct._brushOption,Zt;if(ct._track.push(Lt.slice()),G(ct)||jt){if(zt&&!jt){Yt.brushMode==="single"&&N(ct);var ft=O.clone(Yt);ft.brushType=Mt(ft.brushType,zt),ft.panelId=zt===!0?null:zt.panelId,jt=ct._creatingCover=w(ct,ft),ct._covers.push(jt)}if(jt){var gt=Tt[Mt(ct._brushType,zt)],dt=jt.__brushOption;dt.range=gt.getCreatingRange(st(ct,jt,ct._track)),Ct&&(S(ct,jt),gt.updateCommon(ct,jt)),R(ct,jt),Zt={isEnd:Ct}}}else Ct&&Yt.brushMode==="single"&&Yt.removeOnClick&&D(ct,vt,Lt)&&N(ct)&&(Zt={isEnd:Ct,removeOnClick:!0});return Zt}function Mt(ct,vt){return ct==="auto"?vt.defaultBrushType:ct}var Ft={mousedown:function(ct){if(this._dragging)Dt(this,ct);else if(!ct.target||!ct.target.draggable){ht(ct);var vt=this.group.transformCoordToLocal(ct.offsetX,ct.offsetY);this._creatingCover=null;var Lt=this._creatingPanel=D(this,ct,vt);Lt&&(this._dragging=!0,this._track=[vt.slice()])}},mousemove:function(ct){var vt=ct.offsetX,Lt=ct.offsetY,Ct=this.group.transformCoordToLocal(vt,Lt);if(rt(this,ct,Ct),this._dragging){ht(ct);var jt=wt(this,ct,Ct,!1);jt&&I(this,jt)}},mouseup:function(ct){Dt(this,ct)}};function Dt(ct,vt){if(ct._dragging){ht(vt);var Lt=vt.offsetX,Ct=vt.offsetY,jt=ct.group.transformCoordToLocal(Lt,Ct),zt=wt(ct,vt,jt,!0);ct._dragging=!1,ct._track=[],ct._creatingCover=null,zt&&I(ct,zt)}}function Rt(ct,vt,Lt){var Ct=ct._zr;return vt<0||vt>Ct.getWidth()||Lt<0||Lt>Ct.getHeight()}var Tt={lineX:mt(0),lineY:mt(1),rect:{createCover:function(ct,vt){return Z(C(Q,function(Lt){return Lt},function(Lt){return Lt}),ct,vt,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(ct){var vt=W(ct);return $(vt[1][0],vt[1][1],vt[0][0],vt[0][1])},updateCoverShape:function(ct,vt,Lt,Ct){H(ct,vt,Lt,Ct)},updateCommon:U,contain:Pt},polygon:{createCover:function(ct,vt){var Lt=new b.Group;return Lt.add(new b.Polyline({name:"main",style:Y(vt),silent:!0})),Lt},getCreatingRange:function(ct){return ct},endCreating:function(ct,vt){vt.remove(vt.childAt(0)),vt.add(new b.Polygon({name:"main",draggable:!0,drift:C(et,ct,vt),ondragend:C(I,ct,{isEnd:!0})}))},updateCoverShape:function(ct,vt,Lt,Ct){vt.childAt(0).setShape({points:st(ct,vt,Lt)})},updateCommon:U,contain:Pt}};function mt(ct){return{createCover:function(vt,Lt){return Z(C(Q,function(Ct){var jt=[Ct,[0,100]];return ct&&jt.reverse(),jt},function(Ct){return Ct[ct]}),vt,Lt,[["w","e"],["n","s"]][ct])},getCreatingRange:function(vt){var Lt=W(vt),Ct=m(Lt[0][ct],Lt[1][ct]),jt=o(Lt[0][ct],Lt[1][ct]);return[Ct,jt]},updateCoverShape:function(vt,Lt,Ct,jt){var zt,Yt=A(vt,Lt);if(Yt!==!0&&Yt.getLinearBrushOtherExtent)zt=Yt.getLinearBrushOtherExtent(ct,vt._transform);else{var Zt=vt._zr;zt=[0,[Zt.getWidth(),Zt.getHeight()][1-ct]]}var ft=[Ct,zt];ct&&ft.reverse(),H(vt,Lt,ft,jt)},updateCommon:U,contain:Pt}}var Nt=u;X.exports=Nt},999516:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(248070),b=e(835454),L=e(313483),T=O.each,C=O.indexOf,f=O.curry,v=["dataToPoint","pointToData"],m=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function o(p,w,S){var R=this._targetInfoList=[],B={},k=r(w,p);T(s,function(P,D){(!S||!S.include||C(S.include,D)>=0)&&P(k,R,B)})}var h=o.prototype;h.setOutputRanges=function(p,w){this.matchOutputRanges(p,w,function(S,R,B){if((S.coordRanges||(S.coordRanges=[])).push(R),!S.coordRange){S.coordRange=R;var k=a[S.brushType](0,B,R);S.__rangeOffset={offset:n[S.brushType](k.values,S.range,[1,1]),xyMinMax:k.xyMinMax}}})},h.matchOutputRanges=function(p,w,S){T(p,function(R){var B=this.findTargetInfo(R,w);B&&B!==!0&&O.each(B.coordSyses,function(k){var P=a[R.brushType](1,k,R.range);S(R,P.values,k,w)})},this)},h.setInputRanges=function(p,w){T(p,function(S){var R=this.findTargetInfo(S,w);if(S.range=S.range||[],R&&R!==!0){S.panelId=R.panelId;var B=a[S.brushType](0,R.coordSys,S.coordRange),k=S.__rangeOffset;S.range=k?n[S.brushType](B.values,k.offset,g(B.xyMinMax,k.xyMinMax)):B.values}},this)},h.makePanelOpts=function(p,w){return O.map(this._targetInfoList,function(S){var R=S.getPanelRect();return{panelId:S.panelId,defaultBrushType:w&&w(S),clipPath:L.makeRectPanelClipPath(R),isTargetByCursor:L.makeRectIsTargetByCursor(R,p,S.coordSysModel),getLinearBrushOtherExtent:L.makeLinearBrushOtherExtent(R)}})},h.controlSeries=function(p,w,S){var R=this.findTargetInfo(p,S);return R===!0||R&&C(R.coordSyses,w.coordinateSystem)>=0},h.findTargetInfo=function(p,w){for(var S=this._targetInfoList,R=r(w,p),B=0;B<S.length;B++){var k=S[B],P=p.panelId;if(P){if(k.panelId===P)return k}else for(var B=0;B<c.length;B++)if(c[B](R,k))return k}return!0};function l(p){return p[0]>p[1]&&p.reverse(),p}function r(p,w){return b.parseFinder(p,w,{includeMainTypes:m})}var s={grid:function(p,w){var S=p.xAxisModels,R=p.yAxisModels,B=p.gridModels,k=O.createHashMap(),P={},D={};!S&&!R&&!B||(T(S,function(A){var N=A.axis.grid.model;k.set(N.id,N),P[N.id]=!0}),T(R,function(A){var N=A.axis.grid.model;k.set(N.id,N),D[N.id]=!0}),T(B,function(A){k.set(A.id,A),P[A.id]=!0,D[A.id]=!0}),k.each(function(A){var N=A.coordinateSystem,I=[];T(N.getCartesians(),function(G,W){(C(S,G.getAxis("x").model)>=0||C(R,G.getAxis("y").model)>=0)&&I.push(G)}),w.push({panelId:"grid--"+A.id,gridModel:A,coordSysModel:A,coordSys:I[0],coordSyses:I,getPanelRect:x.grid,xAxisDeclared:P[A.id],yAxisDeclared:D[A.id]})}))},geo:function(p,w){T(p.geoModels,function(S){var R=S.coordinateSystem;w.push({panelId:"geo--"+S.id,geoModel:S,coordSysModel:S,coordSys:R,coordSyses:[R],getPanelRect:x.geo})})}},c=[function(p,w){var S=p.xAxisModel,R=p.yAxisModel,B=p.gridModel;return!B&&S&&(B=S.axis.grid.model),!B&&R&&(B=R.axis.grid.model),B&&B===w.gridModel},function(p,w){var S=p.geoModel;return S&&S===w.geoModel}],x={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var p=this.coordSys,w=p.getBoundingRect().clone();return w.applyTransform(M.getTransform(p)),w}},a={lineX:f(i,0),lineY:f(i,1),rect:function(p,w,S){var R=w[v[p]]([S[0][0],S[1][0]]),B=w[v[p]]([S[0][1],S[1][1]]),k=[l([R[0],B[0]]),l([R[1],B[1]])];return{values:k,xyMinMax:k}},polygon:function(p,w,S){var R=[[1/0,-1/0],[1/0,-1/0]],B=O.map(S,function(k){var P=w[v[p]](k);return R[0][0]=Math.min(R[0][0],P[0]),R[1][0]=Math.min(R[1][0],P[1]),R[0][1]=Math.max(R[0][1],P[0]),R[1][1]=Math.max(R[1][1],P[1]),P});return{values:B,xyMinMax:R}}};function i(p,w,S,R){var B=S.getAxis(["x","y"][p]),k=l(O.map([0,1],function(D){return w?B.coordToData(B.toLocalCoord(R[D])):B.toGlobalCoord(B.dataToCoord(R[D]))})),P=[];return P[p]=k,P[1-p]=[NaN,NaN],{values:k,xyMinMax:P}}var n={lineX:f(u,0),lineY:f(u,1),rect:function(p,w,S){return[[p[0][0]-S[0]*w[0][0],p[0][1]-S[0]*w[0][1]],[p[1][0]-S[1]*w[1][0],p[1][1]-S[1]*w[1][1]]]},polygon:function(p,w,S){return O.map(p,function(R,B){return[R[0]-S[0]*w[B][0],R[1]-S[1]*w[B][1]]})}};function u(p,w,S,R){return[w[0]-R[p]*S[0],w[1]-R[p]*S[1]]}function g(p,w){var S=d(p),R=d(w),B=[S[0]/R[0],S[1]/R[1]];return isNaN(B[0])&&(B[0]=1),isNaN(B[1])&&(B[1]=1),B}function d(p){return p?[p[0][1]-p[0][0],p[1][1]-p[1][0]]:[NaN,NaN]}var y=o;X.exports=y},307245:function(X,z,e){var E=e(131879),F=e(973672),O=e(895922),M=e(422997),b=M.onIrrelevantElement,L=e(248070),T=e(308590),C=e(650777),f=C.getUID,v=e(451218);function m(s){var c=s.getItemStyle(),x=s.get("areaColor");return x!=null&&(c.fill=x),c}function o(s,c,x,a,i){x.off("click"),x.off("mousedown"),c.get("selectedMode")&&(x.on("mousedown",function(){s._mouseDownFlag=!0}),x.on("click",function(n){if(s._mouseDownFlag){s._mouseDownFlag=!1;for(var u=n.target;!u.__regions;)u=u.parent;if(u){var g={type:(c.mainType==="geo"?"geo":"map")+"ToggleSelect",batch:E.map(u.__regions,function(d){return{name:d.name,from:i.uid}})};g[c.mainType+"Id"]=c.id,a.dispatchAction(g),h(c,x)}}}))}function h(s,c){c.eachChild(function(x){E.each(x.__regions,function(a){x.trigger(s.isSelected(a.name)?"emphasis":"normal")})})}function l(s,c){var x=new L.Group;this.uid=f("ec_map_draw"),this._controller=new F(s.getZr()),this._controllerHost={target:c?x:null},this.group=x,this._updateGroup=c,this._mouseDownFlag,this._mapName,this._initialized,x.add(this._regionsGroup=new L.Group),x.add(this._backgroundGroup=new L.Group)}l.prototype={constructor:l,draw:function(s,c,x,a,i){var n=s.mainType==="geo",u=s.getData&&s.getData();n&&c.eachComponent({mainType:"series",subType:"map"},function(W){!u&&W.getHostGeoModel()===s&&(u=W.getData())});var g=s.coordinateSystem;this._updateBackground(g);var d=this._regionsGroup,y=this.group,p=g.getTransformInfo(),w=!d.childAt(0)||i,S;if(w)y.transform=p.roamTransform,y.decomposeTransform(),y.dirty();else{var R=new v;R.transform=p.roamTransform,R.decomposeTransform();var B={scale:R.scale,position:R.position};S=R.scale,L.updateProps(y,B,s)}var k=p.rawScale,P=p.rawPosition;d.removeAll();var D=["itemStyle"],A=["emphasis","itemStyle"],N=["label"],I=["emphasis","label"],G=E.createHashMap();E.each(g.regions,function(W){var Z=G.get(W.name)||G.set(W.name,new L.Group),H=new L.CompoundPath({segmentIgnoreThreshold:1,shape:{paths:[]}});Z.add(H);var U=s.getRegionModel(W.name)||s,V=U.getModel(D),Y=U.getModel(A),$=m(V),K=m(Y),J=U.getModel(N),Q=U.getModel(I),et;if(u){et=u.indexOfName(W.name);var nt=u.getItemVisual(et,"color",!0);nt&&($.fill=nt)}var st=function(Tt){return[Tt[0]*k[0]+P[0],Tt[1]*k[1]+P[1]]};E.each(W.geometries,function(Tt){if(Tt.type==="polygon"){for(var mt=[],Nt=0;Nt<Tt.exterior.length;++Nt)mt.push(st(Tt.exterior[Nt]));H.shape.paths.push(new L.Polygon({segmentIgnoreThreshold:1,shape:{points:mt}}));for(var Nt=0;Nt<(Tt.interiors?Tt.interiors.length:0);++Nt){for(var ct=Tt.interiors[Nt],mt=[],vt=0;vt<ct.length;++vt)mt.push(st(ct[vt]));H.shape.paths.push(new L.Polygon({segmentIgnoreThreshold:1,shape:{points:mt}}))}}}),H.setStyle($),H.style.strokeNoScale=!0,H.culling=!0;var ut=J.get("show"),rt=Q.get("show"),ht=u&&isNaN(u.get(u.mapDimension("value"),et)),Pt=u&&u.getItemLayout(et);if(n||ht&&(ut||rt)||Pt&&Pt.showLabel){var wt=n?W.name:et,Mt;(!u||et>=0)&&(Mt=s);var Ft=new L.Text({position:st(W.center.slice()),scale:[1/y.scale[0],1/y.scale[1]],z2:10,silent:!0});if(L.setLabelStyle(Ft.style,Ft.hoverStyle={},J,Q,{labelFetcher:Mt,labelDataIndex:wt,defaultText:W.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!w){var Dt=[1/S[0],1/S[1]];L.updateProps(Ft,{scale:Dt},s)}Z.add(Ft)}if(u)u.setItemGraphicEl(et,Z);else{var U=s.getRegionModel(W.name);H.eventData={componentType:"geo",componentIndex:s.componentIndex,geoIndex:s.componentIndex,name:W.name,region:U&&U.option||{}}}var Rt=Z.__regions||(Z.__regions=[]);Rt.push(W),Z.highDownSilentOnTouch=!!s.get("selectedMode"),L.setHoverStyle(Z,K),d.add(Z)}),this._updateController(s,c,x),o(this,s,d,x,a),h(s,d)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&T.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(s){var c=s.map;this._mapName!==c&&E.each(T.makeGraphic(c,this.uid),function(x){this._backgroundGroup.add(x)},this),this._mapName=c},_updateController:function(s,c,x){var a=s.coordinateSystem,i=this._controller,n=this._controllerHost;n.zoomLimit=s.get("scaleLimit"),n.zoom=a.getZoom(),i.enable(s.get("roam")||!1);var u=s.mainType;function g(){var d={type:"geoRoam",componentType:u};return d[u+"Id"]=s.id,d}i.off("pan").on("pan",function(d){this._mouseDownFlag=!1,O.updateViewOnPan(n,d.dx,d.dy),x.dispatchAction(E.extend(g(),{dx:d.dx,dy:d.dy}))},this),i.off("zoom").on("zoom",function(d){if(this._mouseDownFlag=!1,O.updateViewOnZoom(n,d.scale,d.originX,d.originY),x.dispatchAction(E.extend(g(),{zoom:d.scale,originX:d.originX,originY:d.originY})),this._updateGroup){var y=this.group.scale;this._regionsGroup.traverse(function(p){p.type==="text"&&p.attr("scale",[1/y[0],1/y[1]])})}},this),i.setPointerChecker(function(d,y,p){return a.getViewRectAfterRoam().contain(y,p)&&!b(d,x,s)})}};var r=l;X.exports=r},973672:function(X,z,e){var E=e(131879),F=e(291212),O=e(519756),M=e(464174);function b(r){this.pointerChecker,this._zr=r,this._opt={};var s=E.bind,c=s(L,this),x=s(T,this),a=s(C,this),i=s(f,this),n=s(v,this);F.call(this),this.setPointerChecker=function(u){this.pointerChecker=u},this.enable=function(u,g){this.disable(),this._opt=E.defaults(E.clone(g)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",c),r.on("mousemove",x),r.on("mouseup",a)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",i),r.on("pinch",n))},this.disable=function(){r.off("mousedown",c),r.off("mousemove",x),r.off("mouseup",a),r.off("mousewheel",i),r.off("pinch",n)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}E.mixin(b,F);function L(r){if(!(O.isMiddleOrRightButtonOnMouseUpDown(r)||r.target&&r.target.draggable)){var s=r.offsetX,c=r.offsetY;this.pointerChecker&&this.pointerChecker(r,s,c)&&(this._x=s,this._y=c,this._dragging=!0)}}function T(r){if(!(!this._dragging||!h("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||M.isTaken(this._zr,"globalPan"))){var s=r.offsetX,c=r.offsetY,x=this._x,a=this._y,i=s-x,n=c-a;this._x=s,this._y=c,this._opt.preventDefaultMouseMove&&O.stop(r.event),o(this,"pan","moveOnMouseMove",r,{dx:i,dy:n,oldX:x,oldY:a,newX:s,newY:c})}}function C(r){O.isMiddleOrRightButtonOnMouseUpDown(r)||(this._dragging=!1)}function f(r){var s=h("zoomOnMouseWheel",r,this._opt),c=h("moveOnMouseWheel",r,this._opt),x=r.wheelDelta,a=Math.abs(x),i=r.offsetX,n=r.offsetY;if(!(x===0||!s&&!c)){if(s){var u=a>3?1.4:a>1?1.2:1.1,g=x>0?u:1/u;m(this,"zoom","zoomOnMouseWheel",r,{scale:g,originX:i,originY:n})}if(c){var d=Math.abs(x),y=(x>0?1:-1)*(d>3?.4:d>1?.15:.05);m(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:y,originX:i,originY:n})}}}function v(r){if(!M.isTaken(this._zr,"globalPan")){var s=r.pinchScale>1?1.1:1/1.1;m(this,"zoom",null,r,{scale:s,originX:r.pinchX,originY:r.pinchY})}}function m(r,s,c,x,a){r.pointerChecker&&r.pointerChecker(x,a.originX,a.originY)&&(O.stop(x.event),o(r,s,c,x,a))}function o(r,s,c,x,a){a.isAvailableBehavior=E.bind(h,null,c,x),r.trigger(s,a)}function h(r,s,c){var x=c[r];return!r||x&&(!E.isString(x)||s.event[x+"Key"])}var l=b;X.exports=l},313483:function(X,z,e){var E=e(795946),F=e(422997),O=F.onIrrelevantElement,M=e(248070);function b(f){return f=C(f),function(v,m){return M.clipPointsByRect(v,f)}}function L(f,v){return f=C(f),function(m){var o=v??m,h=o?f.width:f.height,l=o?f.x:f.y;return[l,l+(h||0)]}}function T(f,v,m){return f=C(f),function(o,h,l){return f.contain(h[0],h[1])&&!O(o,v,m)}}function C(f){return E.create(f)}z.makeRectPanelClipPath=b,z.makeLinearBrushOtherExtent=L,z.makeRectIsTargetByCursor=T},422997:function(X,z){var e={axisPointer:1,tooltip:1,brush:1};function E(F,O,M){var b=O.getComponentByElement(F.topTarget),L=b&&b.coordinateSystem;return b&&b!==M&&!e[b.mainType]&&L&&L.model!==M}z.onIrrelevantElement=E},464174:function(X,z,e){var E=e(3440),F="\0_ec_interaction_mutex";function O(T,C,f){var v=L(T);v[C]=f}function M(T,C,f){var v=L(T),m=v[C];m===f&&(v[C]=null)}function b(T,C){return!!L(T)[C]}function L(T){return T[F]||(T[F]={})}E.registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),z.take=O,z.release=M,z.isTaken=b},223907:function(X,z,e){var E=e(930871),F=E.getLayoutRect,O=E.box,M=E.positionElement,b=e(317795),L=e(248070);function T(f,v,m){var o=v.getBoxLayoutParams(),h=v.get("padding"),l={width:m.getWidth(),height:m.getHeight()},r=F(o,l,h);O(v.get("orient"),f,v.get("itemGap"),r.width,r.height),M(f,o,l,h)}function C(h,v){var m=b.normalizeCssArray(v.get("padding")),o=v.getItemStyle(["color","opacity"]);o.fill=v.get("backgroundColor");var h=new L.Rect({shape:{x:h.x-m[3],y:h.y-m[0],width:h.width+m[1]+m[3],height:h.height+m[0]+m[2],r:v.get("borderRadius")},style:o,silent:!0,z2:-1});return h}z.layout=T,z.makeBackground=C},895922:function(X,z){function e(F,O,M){var b=F.target,L=b.position;L[0]+=O,L[1]+=M,b.dirty()}function E(F,O,M,b){var L=F.target,T=F.zoomLimit,C=L.position,f=L.scale,v=F.zoom=F.zoom||1;if(v*=O,T){var m=T.min||0,o=T.max||1/0;v=Math.max(Math.min(o,v),m)}var h=v/F.zoom;F.zoom=v,C[0]-=(M-C[0])*(h-1),C[1]-=(b-C[1])*(h-1),f[0]*=h,f[1]*=h,L.dirty()}z.updateViewOnPan=e,z.updateViewOnZoom=E},314748:function(X,z,e){var E=e(131879),F={updateSelectedMap:function(O){this._targetList=E.isArray(O)?O.slice():[],this._selectTargetMap=E.reduce(O||[],function(M,b){return M.set(b.name,b),M},E.createHashMap())},select:function(O,M){var b=M!=null?this._targetList[M]:this._selectTargetMap.get(O),L=this.get("selectedMode");L==="single"&&this._selectTargetMap.each(function(T){T.selected=!1}),b&&(b.selected=!0)},unSelect:function(O,M){var b=M!=null?this._targetList[M]:this._selectTargetMap.get(O);b&&(b.selected=!1)},toggleSelected:function(O,M){var b=M!=null?this._targetList[M]:this._selectTargetMap.get(O);if(b!=null)return this[b.selected?"unSelect":"select"](O,M),b.selected},isSelected:function(O,M){var b=M!=null?this._targetList[M]:this._selectTargetMap.get(O);return b&&b.selected}};X.exports=F},438289:function(X){function z(F,O,M,b,L,T){F=F||0;var C=M[1]-M[0];if(L!=null&&(L=E(L,[0,C])),T!=null&&(T=Math.max(T,L??0)),b==="all"){var f=Math.abs(O[1]-O[0]);f=E(f,[0,C]),L=T=E(f,[L,T]),b=0}O[0]=E(O[0],M),O[1]=E(O[1],M);var v=e(O,b);O[b]+=F;var m=L||0,o=M.slice();v.sign<0?o[0]+=m:o[1]-=m,O[b]=E(O[b],o);var h=e(O,b);L!=null&&(h.sign!==v.sign||h.span<L)&&(O[1-b]=O[b]+v.sign*L);var h=e(O,b);return T!=null&&h.span>T&&(O[1-b]=O[b]+h.sign*T),O}function e(F,O){var M=F[O]-F[1-O];return{span:Math.abs(M),sign:M>0?-1:M<0?1:O?-1:1}}function E(F,O){return Math.min(O[1]!=null?O[1]:1/0,Math.max(O[0]!=null?O[0]:-1/0,F))}X.exports=z},816613:function(X,z,e){var E=e(3440);e(658882),e(621331),e(420314);var F=e(459953),O=e(360684);E.registerProcessor(E.PRIORITY.PROCESSOR.SERIES_FILTER,F),O.registerSubTypeDefaulter("legend",function(){return"plain"})},368697:function(X,z,e){e(816613),e(425608),e(753693),e(898074)},658882:function(X,z,e){var E=e(3440),F=e(131879),O=e(56785),M=e(835454),b=M.isNameSpecified,L=e(516923),T=L.legend.selector,C={all:{type:"all",title:F.clone(T.all)},inverse:{type:"inverse",title:F.clone(T.inverse)}},f=E.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(m,o,h){this.mergeDefaultAndTheme(m,h),m.selected=m.selected||{},this._updateSelector(m)},mergeOption:function(m){f.superCall(this,"mergeOption",m),this._updateSelector(m)},_updateSelector:function(m){var o=m.selector;o===!0&&(o=m.selector=["all","inverse"]),F.isArray(o)&&F.each(o,function(h,l){F.isString(h)&&(h={type:h}),o[l]=F.merge(h,C[h.type])})},optionUpdated:function(){this._updateData(this.ecModel);var m=this._data;if(m[0]&&this.get("selectedMode")==="single"){for(var o=!1,h=0;h<m.length;h++){var l=m[h].get("name");if(this.isSelected(l)){this.select(l),o=!0;break}}!o&&this.select(m[0].get("name"))}},_updateData:function(m){var o=[],h=[];m.eachRawSeries(function(s){var c=s.name;h.push(c);var x;if(s.legendVisualProvider){var a=s.legendVisualProvider,i=a.getAllNames();m.isSeriesFiltered(s)||(h=h.concat(i)),i.length?o=o.concat(i):x=!0}else x=!0;x&&b(s)&&o.push(s.name)}),this._availableNames=h;var l=this.get("data")||o,r=F.map(l,function(s){return(typeof s=="string"||typeof s=="number")&&(s={name:s}),new O(s,this,this.ecModel)},this);this._data=r},getData:function(){return this._data},select:function(m){var o=this.option.selected,h=this.get("selectedMode");if(h==="single"){var l=this._data;F.each(l,function(r){o[r.get("name")]=!1})}o[m]=!0},unSelect:function(m){this.get("selectedMode")!=="single"&&(this.option.selected[m]=!1)},toggleSelected:function(m){var o=this.option.selected;o.hasOwnProperty(m)||(o[m]=!0),this[o[m]?"unSelect":"select"](m)},allSelect:function(){var m=this._data,o=this.option.selected;F.each(m,function(h){o[h.get("name",!0)]=!0})},inverseSelect:function(){var m=this._data,o=this.option.selected;F.each(m,function(h){var l=h.get("name",!0);o.hasOwnProperty(l)||(o[l]=!0),o[l]=!o[l]})},isSelected:function(m){var o=this.option.selected;return!(o.hasOwnProperty(m)&&!o[m])&&F.indexOf(this._availableNames,m)>=0},getOrient:function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}}),v=f;X.exports=v},420314:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(131879),b=e(435730),L=b.createSymbol,T=e(248070),C=e(223907),f=C.makeBackground,v=e(930871),m=M.curry,o=M.each,h=T.Group,l=O.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new h),this._backgroundEl,this.group.add(this._selectorGroup=new h),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(a,i,n){var u=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!a.get("show",!0)){var g=a.get("align"),d=a.get("orient");(!g||g==="auto")&&(g=a.get("left")==="right"&&d==="vertical"?"right":"left");var y=a.get("selector",!0),p=a.get("selectorPosition",!0);y&&(!p||p==="auto")&&(p=d==="horizontal"?"end":"start"),this.renderInner(g,a,i,n,y,d,p);var w=a.getBoxLayoutParams(),S={width:n.getWidth(),height:n.getHeight()},R=a.get("padding"),B=v.getLayoutRect(w,S,R),k=this.layoutInner(a,g,B,u,y,p),P=v.getLayoutRect(M.defaults({width:k.width,height:k.height},w),S,R);this.group.attr("position",[P.x-k.x,P.y-k.y]),this.group.add(this._backgroundEl=f(k,a))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(a,i,n,u,g,d,y){var p=this.getContentGroup(),w=M.createHashMap(),S=i.get("selectedMode"),R=[];n.eachRawSeries(function(B){!B.get("legendHoverLink")&&R.push(B.id)}),o(i.getData(),function(B,k){var P=B.get("name");if(!this.newlineDisabled&&(P===""||P===`
`)){p.add(new h({newline:!0}));return}var D=n.getSeriesByName(P)[0];if(!w.get(P))if(D){var A=D.getData(),N=A.getVisual("color"),I=A.getVisual("borderColor");typeof N=="function"&&(N=N(D.getDataParams(0))),typeof I=="function"&&(I=I(D.getDataParams(0)));var G=A.getVisual("legendSymbol")||"roundRect",W=A.getVisual("symbol"),Z=this._createItem(P,k,B,i,G,W,a,N,I,S);Z.on("click",m(s,P,null,u,R)).on("mouseover",m(c,D.name,null,u,R)).on("mouseout",m(x,D.name,null,u,R)),w.set(P,!0)}else n.eachRawSeries(function(H){if(!w.get(P)&&H.legendVisualProvider){var U=H.legendVisualProvider;if(!U.containName(P))return;var V=U.indexOfName(P),Y=U.getItemVisual(V,"color"),$=U.getItemVisual(V,"borderColor"),K="roundRect",J=this._createItem(P,k,B,i,K,null,a,Y,$,S);J.on("click",m(s,null,P,u,R)).on("mouseover",m(c,null,P,u,R)).on("mouseout",m(x,null,P,u,R)),w.set(P,!0)}},this)},this),g&&this._createSelector(g,i,u,d,y)},_createSelector:function(a,i,n,u,g){var d=this.getSelectorGroup();o(a,function(p){y(p)});function y(p){var w=p.type,S=new T.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:w==="all"?"legendAllSelect":"legendInverseSelect"})}});d.add(S);var R=i.getModel("selectorLabel"),B=i.getModel("emphasis.selectorLabel");T.setLabelStyle(S.style,S.hoverStyle={},R,B,{defaultText:p.title,isRectText:!1}),T.setHoverStyle(S)}},_createItem:function(a,i,n,u,g,d,y,p,w,S){var R=u.get("itemWidth"),B=u.get("itemHeight"),k=u.get("inactiveColor"),P=u.get("inactiveBorderColor"),D=u.get("symbolKeepAspect"),A=u.getModel("itemStyle"),N=u.isSelected(a),I=new h,G=n.getModel("textStyle"),W=n.get("icon"),Z=n.getModel("tooltip"),H=Z.parentModel;g=W||g;var U=L(g,0,0,R,B,N?p:k,D??!0);if(I.add(r(U,g,A,w,P,N)),!W&&d&&(d!==g||d==="none")){var V=B*.8;d==="none"&&(d="circle");var Y=L(d,(R-V)/2,(B-V)/2,V,V,N?p:k,D??!0);I.add(r(Y,d,A,w,P,N))}var $=y==="left"?R+5:-5,K=y,J=u.get("formatter"),Q=a;typeof J=="string"&&J?Q=J.replace("{name}",a??""):typeof J=="function"&&(Q=J(a)),I.add(new T.Text({style:T.setTextStyle({},G,{text:Q,x:$,y:B/2,textFill:N?G.getTextColor():k,textAlign:K,textVerticalAlign:"middle"})}));var et=new T.Rect({shape:I.getBoundingRect(),invisible:!0,tooltip:Z.get("show")?M.extend({content:a,formatter:H.get("formatter",!0)||function(){return a},formatterParams:{componentType:"legend",legendIndex:u.componentIndex,name:a,$vars:["name"]}},Z.option):null});return I.add(et),I.eachChild(function(nt){nt.silent=!0}),et.silent=!S,this.getContentGroup().add(I),T.setHoverStyle(I),I.__legendDataIndex=i,I},layoutInner:function(a,i,n,u,g,d){var y=this.getContentGroup(),p=this.getSelectorGroup();v.box(a.get("orient"),y,a.get("itemGap"),n.width,n.height);var w=y.getBoundingRect(),S=[-w.x,-w.y];if(g){v.box("horizontal",p,a.get("selectorItemGap",!0));var R=p.getBoundingRect(),B=[-R.x,-R.y],k=a.get("selectorButtonGap",!0),P=a.getOrient().index,D=P===0?"width":"height",A=P===0?"height":"width",N=P===0?"y":"x";d==="end"?B[P]+=w[D]+k:S[P]+=R[D]+k,B[1-P]+=w[A]/2-R[A]/2,p.attr("position",B),y.attr("position",S);var I={x:0,y:0};return I[D]=w[D]+k+R[D],I[A]=Math.max(w[A],R[A]),I[N]=Math.min(0,R[N]+B[1-P]),I}else return y.attr("position",S),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function r(a,i,n,u,g,d){var y;return i!=="line"&&i.indexOf("empty")<0?(y=n.getItemStyle(),a.style.stroke=u,d||(y.stroke=g)):y=n.getItemStyle(["borderWidth","borderColor"]),a.setStyle(y)}function s(a,i,n,u){x(a,i,n,u),n.dispatchAction({type:"legendToggleSelect",name:a??i}),c(a,i,n,u)}function c(a,i,n,u){var g=n.getZr().storage.getDisplayList()[0];g&&g.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:a,name:i,excludeSeriesId:u})}function x(a,i,n,u){var g=n.getZr().storage.getDisplayList()[0];g&&g.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:a,name:i,excludeSeriesId:u})}X.exports=l},425608:function(X,z,e){var E=e(658882),F=e(930871),O=F.mergeLayoutParam,M=F.getLayoutParams,b=E.extend({type:"legend.scroll",setScrollDataIndex:function(C){this.option.scrollDataIndex=C},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(C,f,v,m){var o=M(C);b.superCall(this,"init",C,f,v,m),L(this,C,o)},mergeOption:function(C,f){b.superCall(this,"mergeOption",C,f),L(this,this.option,C)}});function L(C,f,v){var m=C.getOrient(),o=[1,1];o[m.index]=0,O(f,v,{type:"box",ignoreSize:o})}var T=b;X.exports=T},753693:function(X,z,e){var E=e(131879),F=e(248070),O=e(930871),M=e(420314),b=F.Group,L=["width","height"],T=["x","y"],C=M.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){C.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new b),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new b),this._showController},resetInner:function(){C.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(v,m,o,h,l,r,s){var c=this;C.superCall(this,"renderInner",v,m,o,h,l,r,s);var x=this._controllerGroup,a=m.get("pageIconSize",!0);E.isArray(a)||(a=[a,a]),n("pagePrev",0);var i=m.getModel("pageTextStyle");x.add(new F.Text({name:"pageText",style:{textFill:i.getTextColor(),font:i.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),n("pageNext",1);function n(u,g){var d=u+"DataIndex",y=F.createIcon(m.get("pageIcons",!0)[m.getOrient().name][g],{onclick:E.bind(c._pageGo,c,d,m,h)},{x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]});y.name=u,x.add(y)}},layoutInner:function(v,m,o,h,l,r){var s=this.getSelectorGroup(),c=v.getOrient().index,x=L[c],a=T[c],i=L[1-c],n=T[1-c];l&&O.box("horizontal",s,v.get("selectorItemGap",!0));var u=v.get("selectorButtonGap",!0),g=s.getBoundingRect(),d=[-g.x,-g.y],y=E.clone(o);l&&(y[x]=o[x]-g[x]-u);var p=this._layoutContentAndController(v,h,y,c,x,i,n);if(l){if(r==="end")d[c]+=p[x]+u;else{var w=g[x]+u;d[c]-=w,p[a]-=w}p[x]+=g[x]+u,d[1-c]+=p[n]+p[i]/2-g[i]/2,p[i]=Math.max(p[i],g[i]),p[n]=Math.min(p[n],g[n]+d[1-c]),s.attr("position",d)}return p},_layoutContentAndController:function(v,m,o,h,l,r,s){var c=this.getContentGroup(),x=this._containerGroup,a=this._controllerGroup;O.box(v.get("orient"),c,v.get("itemGap"),h?o.width:null,h?null:o.height),O.box("horizontal",a,v.get("pageButtonItemGap",!0));var i=c.getBoundingRect(),n=a.getBoundingRect(),u=this._showController=i[l]>o[l],g=[-i.x,-i.y];m||(g[h]=c.position[h]);var d=[0,0],y=[-n.x,-n.y],p=E.retrieve2(v.get("pageButtonGap",!0),v.get("itemGap",!0));if(u){var w=v.get("pageButtonPosition",!0);w==="end"?y[h]+=o[l]-n[l]:d[h]+=n[l]+p}y[1-h]+=i[r]/2-n[r]/2,c.attr("position",g),x.attr("position",d),a.attr("position",y);var S={x:0,y:0};if(S[l]=u?o[l]:i[l],S[r]=Math.max(i[r],n[r]),S[s]=Math.min(0,n[s]+y[1-h]),x.__rectSize=o[l],u){var R={x:0,y:0};R[l]=Math.max(o[l]-n[l]-p,0),R[r]=S[r],x.setClipPath(new F.Rect({shape:R})),x.__rectSize=R[l]}else a.eachChild(function(k){k.attr({invisible:!0,silent:!0})});var B=this._getPageInfo(v);return B.pageIndex!=null&&F.updateProps(c,{position:B.contentPosition},u?v:!1),this._updatePageInfoView(v,B),S},_pageGo:function(v,m,o){var h=this._getPageInfo(m)[v];h!=null&&o.dispatchAction({type:"legendScroll",scrollDataIndex:h,legendId:m.id})},_updatePageInfoView:function(v,m){var o=this._controllerGroup;E.each(["pagePrev","pageNext"],function(x){var a=m[x+"DataIndex"]!=null,i=o.childOfName(x);i&&(i.setStyle("fill",a?v.get("pageIconColor",!0):v.get("pageIconInactiveColor",!0)),i.cursor=a?"pointer":"default")});var h=o.childOfName("pageText"),l=v.get("pageFormatter"),r=m.pageIndex,s=r!=null?r+1:0,c=m.pageCount;h&&l&&h.setStyle("text",E.isString(l)?l.replace("{current}",s).replace("{total}",c):l({current:s,total:c}))},_getPageInfo:function(v){var m=v.get("scrollDataIndex",!0),o=this.getContentGroup(),h=this._containerGroup.__rectSize,l=v.getOrient().index,r=L[l],s=T[l],c=this._findTargetItemIndex(m),x=o.children(),a=x[c],i=x.length,n=i?1:0,u={contentPosition:o.position.slice(),pageCount:n,pageIndex:n-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!a)return u;var g=S(a);u.contentPosition[l]=-g.s;for(var d=c+1,y=g,p=g,w=null;d<=i;++d)w=S(x[d]),(!w&&p.e>y.s+h||w&&!R(w,y.s))&&(p.i>y.i?y=p:y=w,y&&(u.pageNextDataIndex==null&&(u.pageNextDataIndex=y.i),++u.pageCount)),p=w;for(var d=c-1,y=g,p=g,w=null;d>=-1;--d)w=S(x[d]),(!w||!R(p,w.s))&&y.i<p.i&&(p=y,u.pagePrevDataIndex==null&&(u.pagePrevDataIndex=y.i),++u.pageCount,++u.pageIndex),y=w;return u;function S(B){if(B){var k=B.getBoundingRect(),P=k[s]+B.position[l];return{s:P,e:P+k[r],i:B.__legendDataIndex}}}function R(B,k){return B.e>=k&&B.s<=k+h}},_findTargetItemIndex:function(v){if(!this._showController)return 0;var m,o=this.getContentGroup(),h;return o.eachChild(function(l,r){var s=l.__legendDataIndex;h==null&&s!=null&&(h=r),s===v&&(m=r)}),m??h}}),f=C;X.exports=f},621331:function(X,z,e){var E=e(3440),F=e(131879);function O(M,b,L){var T={},C=M==="toggleSelected",f;return L.eachComponent("legend",function(v){C&&f!=null?v[f?"select":"unSelect"](b.name):M==="allSelect"||M==="inverseSelect"?v[M]():(v[M](b.name),f=v.isSelected(b.name));var m=v.getData();F.each(m,function(o){var h=o.get("name");if(!(h===`
`||h==="")){var l=v.isSelected(h);T.hasOwnProperty(h)?T[h]=T[h]&&l:T[h]=l}})}),M==="allSelect"||M==="inverseSelect"?{selected:T}:{name:b.name,selected:T}}E.registerAction("legendToggleSelect","legendselectchanged",F.curry(O,"toggleSelected")),E.registerAction("legendAllSelect","legendselectall",F.curry(O,"allSelect")),E.registerAction("legendInverseSelect","legendinverseselect",F.curry(O,"inverseSelect")),E.registerAction("legendSelect","legendselected",F.curry(O,"select")),E.registerAction("legendUnSelect","legendunselected",F.curry(O,"unSelect"))},459953:function(X){function z(e){var E=e.findComponents({mainType:"legend"});E&&E.length&&e.filterSeries(function(F){for(var O=0;O<E.length;O++)if(!E[O].isSelected(F.name))return!1;return!0})}X.exports=z},898074:function(X,z,e){var E=e(3440);E.registerAction("legendScroll","legendscroll",function(F,O){var M=F.scrollDataIndex;M!=null&&O.eachComponent({mainType:"legend",subType:"scroll",query:F},function(b){b.setScrollDataIndex(M)})})},253597:function(X,z,e){var E=e(3440);e(257786),e(316258),E.registerPreprocessor(function(F){F.markArea=F.markArea||{}})},703542:function(X,z,e){var E=e(3440);e(141827),e(682295),E.registerPreprocessor(function(F){F.markLine=F.markLine||{}})},223710:function(X,z,e){var E=e(3440);e(169520),e(652747),E.registerPreprocessor(function(F){F.markPoint=F.markPoint||{}})},257786:function(X,z,e){var E=e(60030),F=E.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});X.exports=F},316258:function(X,z,e){var E=e(131879),F=e(994819),O=e(58677),M=e(748354),b=e(248070),L=e(267975),T=e(344005),C=function(r,s,c,x){var a=L.dataTransform(r,x[0]),i=L.dataTransform(r,x[1]),n=E.retrieve,u=a.coord,g=i.coord;u[0]=n(u[0],-1/0),u[1]=n(u[1],-1/0),g[0]=n(g[0],1/0),g[1]=n(g[1],1/0);var d=E.mergeAll([{},a,i]);return d.coord=[a.coord,i.coord],d.x0=a.x,d.y0=a.y,d.x1=i.x,d.y1=i.y,d};function f(r){return!isNaN(r)&&!isFinite(r)}function v(r,s,c,x){var a=1-r;return f(s[a])&&f(c[a])}function m(r,s){var c=s.coord[0],x=s.coord[1];return r.type==="cartesian2d"&&c&&x&&(v(1,c,x,r)||v(0,c,x,r))?!0:L.dataFilter(r,{coord:c,x:s.x0,y:s.y0})||L.dataFilter(r,{coord:x,x:s.x1,y:s.y1})}function o(r,s,c,x,a){var i=x.coordinateSystem,n=r.getItemModel(s),u,g=M.parsePercent(n.get(c[0]),a.getWidth()),d=M.parsePercent(n.get(c[1]),a.getHeight());if(!isNaN(g)&&!isNaN(d))u=[g,d];else{if(x.getMarkerPosition)u=x.getMarkerPosition(r.getValues(c,s));else{var y=r.get(c[0],s),p=r.get(c[1],s),w=[y,p];i.clampData&&i.clampData(w,w),u=i.dataToPoint(w,!0)}if(i.type==="cartesian2d"){var S=i.getAxis("x"),R=i.getAxis("y"),y=r.get(c[0],s),p=r.get(c[1],s);f(y)?u[0]=S.toGlobalCoord(S.getExtent()[c[0]==="x0"?0:1]):f(p)&&(u[1]=R.toGlobalCoord(R.getExtent()[c[1]==="y0"?0:1]))}isNaN(g)||(u[0]=g),isNaN(d)||(u[1]=d)}return u}var h=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];T.extend({type:"markArea",updateTransform:function(r,s,c){s.eachSeries(function(x){var a=x.markAreaModel;if(a){var i=a.getData();i.each(function(n){var u=E.map(h,function(d){return o(i,n,d,x,c)});i.setItemLayout(n,u);var g=i.getItemGraphicEl(n);g.setShape("points",u)})}},this)},renderSeries:function(r,s,c,x){var a=r.coordinateSystem,i=r.id,n=r.getData(),u=this.markerGroupMap,g=u.get(i)||u.set(i,{group:new b.Group});this.group.add(g.group),g.__keep=!0;var d=l(a,r,s);s.setData(d),d.each(function(y){var p=E.map(h,function(S){return o(d,y,S,r,x)}),w=!0;E.each(h,function(S){if(w){var R=d.get(S[0],y),B=d.get(S[1],y);(f(R)||a.getAxis("x").containData(R))&&(f(B)||a.getAxis("y").containData(B))&&(w=!1)}}),d.setItemLayout(y,{points:p,allClipped:w}),d.setItemVisual(y,{color:n.getVisual("color")})}),d.diff(g.__data).add(function(y){var p=d.getItemLayout(y);if(!p.allClipped){var w=new b.Polygon({shape:{points:p.points}});d.setItemGraphicEl(y,w),g.group.add(w)}}).update(function(y,p){var w=g.__data.getItemGraphicEl(p),S=d.getItemLayout(y);S.allClipped?w&&g.group.remove(w):(w?b.updateProps(w,{shape:{points:S.points}},s,y):w=new b.Polygon({shape:{points:S.points}}),d.setItemGraphicEl(y,w),g.group.add(w))}).remove(function(y){var p=g.__data.getItemGraphicEl(y);g.group.remove(p)}).execute(),d.eachItemGraphicEl(function(y,p){var w=d.getItemModel(p),S=w.getModel("label"),R=w.getModel("emphasis.label"),B=d.getItemVisual(p,"color");y.useStyle(E.defaults(w.getModel("itemStyle").getItemStyle(),{fill:F.modifyAlpha(B,.4),stroke:B})),y.hoverStyle=w.getModel("emphasis.itemStyle").getItemStyle(),b.setLabelStyle(y.style,y.hoverStyle,S,R,{labelFetcher:s,labelDataIndex:p,defaultText:d.getName(p)||"",isRectText:!0,autoColor:B}),b.setHoverStyle(y,{}),y.dataModel=s}),g.__data=d,g.group.silent=s.get("silent")||r.get("silent")}});function l(r,s,c){var x,a,i=["x0","y0","x1","y1"];r?(x=E.map(r&&r.dimensions,function(g){var d=s.getData(),y=d.getDimensionInfo(d.mapDimension(g))||{};return E.defaults({name:g},y)}),a=new O(E.map(i,function(g,d){return{name:g,type:x[d%2].type}}),c)):(x=[{name:"value",type:"float"}],a=new O(x,c));var n=E.map(c.get("data"),E.curry(C,s,r,c));r&&(n=E.filter(n,E.curry(m,r)));var u=r?function(g,d,y,p){return g.coord[Math.floor(p/2)][p%2]}:function(g){return g.value};return a.initData(n,null,u),a.hasItemOption=!0,a}},141827:function(X,z,e){var E=e(60030),F=E.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});X.exports=F},682295:function(X,z,e){var E=e(131879),F=e(58677),O=e(748354),M=e(267975),b=e(89264),L=e(344005),T=e(553618),C=T.getStackedDimension,f=function(s,c,x,a){var i=s.getData(),n=a.type;if(!E.isArray(a)&&(n==="min"||n==="max"||n==="average"||n==="median"||a.xAxis!=null||a.yAxis!=null)){var u,g;if(a.yAxis!=null||a.xAxis!=null)u=c.getAxis(a.yAxis!=null?"y":"x"),g=E.retrieve(a.yAxis,a.xAxis);else{var d=M.getAxisInfo(a,i,c,s);u=d.valueAxis;var y=C(i,d.valueDataDim);g=M.numCalculate(i,y,n)}var p=u.dim==="x"?0:1,w=1-p,S=E.clone(a),R={};S.type=null,S.coord=[],R.coord=[],S.coord[w]=-1/0,R.coord[w]=1/0;var B=x.get("precision");B>=0&&typeof g=="number"&&(g=+g.toFixed(Math.min(B,20))),S.coord[p]=R.coord[p]=g,a=[S,R,{type:n,valueIndex:a.valueIndex,value:g}]}return a=[M.dataTransform(s,a[0]),M.dataTransform(s,a[1]),E.extend({},a[2])],a[2].type=a[2].type||"",E.merge(a[2],a[0]),E.merge(a[2],a[1]),a};function v(s){return!isNaN(s)&&!isFinite(s)}function m(s,c,x,a){var i=1-s,n=a.dimensions[s];return v(c[i])&&v(x[i])&&c[s]===x[s]&&a.getAxis(n).containData(c[s])}function o(s,c){if(s.type==="cartesian2d"){var x=c[0].coord,a=c[1].coord;if(x&&a&&(m(1,x,a,s)||m(0,x,a,s)))return!0}return M.dataFilter(s,c[0])&&M.dataFilter(s,c[1])}function h(s,c,x,a,i){var n=a.coordinateSystem,u=s.getItemModel(c),g,d=O.parsePercent(u.get("x"),i.getWidth()),y=O.parsePercent(u.get("y"),i.getHeight());if(!isNaN(d)&&!isNaN(y))g=[d,y];else{if(a.getMarkerPosition)g=a.getMarkerPosition(s.getValues(s.dimensions,c));else{var p=n.dimensions,w=s.get(p[0],c),S=s.get(p[1],c);g=n.dataToPoint([w,S])}if(n.type==="cartesian2d"){var R=n.getAxis("x"),B=n.getAxis("y"),p=n.dimensions;v(s.get(p[0],c))?g[0]=R.toGlobalCoord(R.getExtent()[x?0:1]):v(s.get(p[1],c))&&(g[1]=B.toGlobalCoord(B.getExtent()[x?0:1]))}isNaN(d)||(g[0]=d),isNaN(y)||(g[1]=y)}s.setItemLayout(c,g)}var l=L.extend({type:"markLine",updateTransform:function(s,c,x){c.eachSeries(function(a){var i=a.markLineModel;if(i){var n=i.getData(),u=i.__from,g=i.__to;u.each(function(d){h(u,d,!0,a,x),h(g,d,!1,a,x)}),n.each(function(d){n.setItemLayout(d,[u.getItemLayout(d),g.getItemLayout(d)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},renderSeries:function(s,c,x,a){var i=s.coordinateSystem,n=s.id,u=s.getData(),g=this.markerGroupMap,d=g.get(n)||g.set(n,new b);this.group.add(d.group);var y=r(i,s,c),p=y.from,w=y.to,S=y.line;c.__from=p,c.__to=w,c.setData(S);var R=c.get("symbol"),B=c.get("symbolSize");E.isArray(R)||(R=[R,R]),typeof B=="number"&&(B=[B,B]),y.from.each(function(P){k(p,P,!0),k(w,P,!1)}),S.each(function(P){var D=S.getItemModel(P).get("lineStyle.color");S.setItemVisual(P,{color:D||p.getItemVisual(P,"color")}),S.setItemLayout(P,[p.getItemLayout(P),w.getItemLayout(P)]),S.setItemVisual(P,{fromSymbolRotate:p.getItemVisual(P,"symbolRotate"),fromSymbolSize:p.getItemVisual(P,"symbolSize"),fromSymbol:p.getItemVisual(P,"symbol"),toSymbolRotate:w.getItemVisual(P,"symbolRotate"),toSymbolSize:w.getItemVisual(P,"symbolSize"),toSymbol:w.getItemVisual(P,"symbol")})}),d.updateData(S),y.line.eachItemGraphicEl(function(P,D){P.traverse(function(A){A.dataModel=c})});function k(P,D,A){var N=P.getItemModel(D);h(P,D,A,s,a),P.setItemVisual(D,{symbolRotate:N.get("symbolRotate"),symbolSize:N.get("symbolSize")||B[A?0:1],symbol:N.get("symbol",!0)||R[A?0:1],color:N.get("itemStyle.color")||u.getVisual("color")})}d.__keep=!0,d.group.silent=c.get("silent")||s.get("silent")}});function r(s,c,x){var a;s?a=E.map(s&&s.dimensions,function(y){var p=c.getData().getDimensionInfo(c.getData().mapDimension(y))||{};return E.defaults({name:y},p)}):a=[{name:"value",type:"float"}];var i=new F(a,x),n=new F(a,x),u=new F([],x),g=E.map(x.get("data"),E.curry(f,c,s,x));s&&(g=E.filter(g,E.curry(o,s)));var d=s?M.dimValueGetter:function(y){return y.value};return i.initData(E.map(g,function(y){return y[0]}),null,d),n.initData(E.map(g,function(y){return y[1]}),null,d),u.initData(E.map(g,function(y){return y[2]})),u.hasItemOption=!0,{from:i,to:n,line:u}}X.exports=l},169520:function(X,z,e){var E=e(60030),F=E.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});X.exports=F},652747:function(X,z,e){var E=e(131879),F=e(151724),O=e(748354),M=e(58677),b=e(267975),L=e(344005);function T(v,m,o){var h=m.coordinateSystem;v.each(function(l){var r=v.getItemModel(l),s,c=O.parsePercent(r.get("x"),o.getWidth()),x=O.parsePercent(r.get("y"),o.getHeight());if(!isNaN(c)&&!isNaN(x))s=[c,x];else if(m.getMarkerPosition)s=m.getMarkerPosition(v.getValues(v.dimensions,l));else if(h){var a=v.get(h.dimensions[0],l),i=v.get(h.dimensions[1],l);s=h.dataToPoint([a,i])}isNaN(c)||(s[0]=c),isNaN(x)||(s[1]=x),v.setItemLayout(l,s)})}var C=L.extend({type:"markPoint",updateTransform:function(v,m,o){m.eachSeries(function(h){var l=h.markPointModel;l&&(T(l.getData(),h,o),this.markerGroupMap.get(h.id).updateLayout(l))},this)},renderSeries:function(v,m,o,h){var l=v.coordinateSystem,r=v.id,s=v.getData(),c=this.markerGroupMap,x=c.get(r)||c.set(r,new F),a=f(l,v,m);m.setData(a),T(m.getData(),v,h),a.each(function(i){var n=a.getItemModel(i),u=n.getShallow("symbol"),g=n.getShallow("symbolSize"),d=n.getShallow("symbolRotate"),y=E.isFunction(u),p=E.isFunction(g),w=E.isFunction(d);if(y||p||w){var S=m.getRawValue(i),R=m.getDataParams(i);y&&(u=u(S,R)),p&&(g=g(S,R)),w&&(d=d(S,R))}a.setItemVisual(i,{symbol:u,symbolSize:g,symbolRotate:d,color:n.get("itemStyle.color")||s.getVisual("color")})}),x.updateData(a),this.group.add(x.group),a.eachItemGraphicEl(function(i){i.traverse(function(n){n.dataModel=m})}),x.__keep=!0,x.group.silent=m.get("silent")||v.get("silent")}});function f(v,m,o){var h;v?h=E.map(v&&v.dimensions,function(s){var c=m.getData().getDimensionInfo(m.getData().mapDimension(s))||{};return E.defaults({name:s},c)}):h=[{name:"value",type:"float"}];var l=new M(h,o),r=E.map(o.get("data"),E.curry(b.dataTransform,m));return v&&(r=E.filter(r,E.curry(b.dataFilter,v))),l.initData(r,null,v?b.dimValueGetter:function(s){return s.value}),l}X.exports=C},60030:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(131879),b=e(358020),L=e(835454),T=e(317795),C=e(482370),f=T.addCommas,v=T.encodeHTML;function m(l){L.defaultEmphasis(l,"label",["show"])}var o=O.extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(l,r,s){this.mergeDefaultAndTheme(l,s),this._mergeOption(l,s,!1,!0)},isAnimationEnabled:function(){if(b.node)return!1;var l=this.__hostSeries;return this.getShallow("animation")&&l&&l.isAnimationEnabled()},mergeOption:function(l,r){this._mergeOption(l,r,!1,!1)},_mergeOption:function(l,r,s,c){var x=this.constructor,a=this.mainType+"Model";s||r.eachSeries(function(i){var n=i.get(this.mainType,!0),u=i[a];if(!n||!n.data){i[a]=null;return}u?u._mergeOption(n,r,!0):(c&&m(n),M.each(n.data,function(g){g instanceof Array?(m(g[0]),m(g[1])):m(g)}),u=new x(n,this,r),M.extend(u,{mainType:this.mainType,seriesIndex:i.seriesIndex,name:i.name,createdBySelf:!0}),u.__hostSeries=i),i[a]=u},this)},formatTooltip:function(l,r,s,c){var x=this.getData(),a=this.getRawValue(l),i=M.isArray(a)?M.map(a,f).join(", "):f(a),n=x.getName(l),u=v(this.name),g=c==="html"?"<br/>":`
`;return(a!=null||n)&&(u+=g),n&&(u+=v(n),a!=null&&(u+=" : ")),a!=null&&(u+=v(i)),u},getData:function(){return this._data},setData:function(l){this._data=l}});M.mixin(o,C);var h=o;X.exports=h},344005:function(X,z,e){var E=e(3440),F=e(131879),O=E.extendComponentView({type:"marker",init:function(){this.markerGroupMap=F.createHashMap()},render:function(M,b,L){var T=this.markerGroupMap;T.each(function(f){f.__keep=!1});var C=this.type+"Model";b.eachSeries(function(f){var v=f[C];v&&this.renderSeries(f,v,b,L)},this),T.each(function(f){!f.__keep&&this.group.remove(f.group)},this)},renderSeries:function(){}});X.exports=O},267975:function(X,z,e){var E=e(131879),F=e(748354),O=e(553618),M=O.isDimensionStacked,b=E.indexOf;function L(c){return!(isNaN(parseFloat(c.x))&&isNaN(parseFloat(c.y)))}function T(c){return!isNaN(parseFloat(c.x))&&!isNaN(parseFloat(c.y))}function C(c,x,a,i,n,u){var g=[],d=M(x,i),y=d?x.getCalculationInfo("stackResultDimension"):i,p=s(x,y,c),w=x.indicesOfNearest(y,p)[0];g[n]=x.get(a,w),g[u]=x.get(y,w);var S=x.get(i,w),R=F.getPrecision(x.get(i,w));return R=Math.min(R,20),R>=0&&(g[u]=+g[u].toFixed(R)),[g,S]}var f=E.curry,v={min:f(C,"min"),max:f(C,"max"),average:f(C,"average")};function m(c,x){var a=c.getData(),i=c.coordinateSystem;if(x&&!T(x)&&!E.isArray(x.coord)&&i){var n=i.dimensions,u=o(x,a,i,c);if(x=E.clone(x),x.type&&v[x.type]&&u.baseAxis&&u.valueAxis){var g=b(n,u.baseAxis.dim),d=b(n,u.valueAxis.dim),y=v[x.type](a,u.baseDataDim,u.valueDataDim,g,d);x.coord=y[0],x.value=y[1]}else{for(var p=[x.xAxis!=null?x.xAxis:x.radiusAxis,x.yAxis!=null?x.yAxis:x.angleAxis],w=0;w<2;w++)v[p[w]]&&(p[w]=s(a,a.mapDimension(n[w]),p[w]));x.coord=p}}return x}function o(c,x,a,i){var n={};return c.valueIndex!=null||c.valueDim!=null?(n.valueDataDim=c.valueIndex!=null?x.getDimension(c.valueIndex):c.valueDim,n.valueAxis=a.getAxis(h(i,n.valueDataDim)),n.baseAxis=a.getOtherAxis(n.valueAxis),n.baseDataDim=x.mapDimension(n.baseAxis.dim)):(n.baseAxis=i.getBaseAxis(),n.valueAxis=a.getOtherAxis(n.baseAxis),n.baseDataDim=x.mapDimension(n.baseAxis.dim),n.valueDataDim=x.mapDimension(n.valueAxis.dim)),n}function h(c,x){var a=c.getData(),i=a.dimensions;x=a.getDimension(x);for(var n=0;n<i.length;n++){var u=a.getDimensionInfo(i[n]);if(u.name===x)return u.coordDim}}function l(c,x){return c&&c.containData&&x.coord&&!L(x)?c.containData(x.coord):!0}function r(c,x,a,i){return i<2?c.coord&&c.coord[i]:c.value}function s(c,x,a){if(a==="average"){var i=0,n=0;return c.each(x,function(u,g){isNaN(u)||(i+=u,n++)}),i/n}else return a==="median"?c.getMedian(x):c.getDataExtent(x,!0)[a==="max"?1:0]}z.dataTransform=m,z.getAxisInfo=o,z.dataFilter=l,z.dimValueGetter=r,z.numCalculate=s},160804:function(X,z,e){var E=e(3440),F=e(131879),O=e(601655),M=e(449224);e(39302),e(254084),e(459647);var b=5;E.extendComponentView({type:"parallel",render:function(C,f,v){this._model=C,this._api=v,this._handlers||(this._handlers={},F.each(L,function(m,o){v.getZr().on(o,this._handlers[o]=F.bind(m,this))},this)),O.createOrUpdate(this,"_throttledDispatchExpand",C.get("axisExpandRate"),"fixRate")},dispose:function(C,f){F.each(this._handlers,function(v,m){f.getZr().off(m,v)}),this._handlers=null},_throttledDispatchExpand:function(C){this._dispatchExpand(C)},_dispatchExpand:function(C){C&&this._api.dispatchAction(F.extend({type:"parallelAxisExpand"},C))}});var L={mousedown:function(C){T(this,"click")&&(this._mouseDownPoint=[C.offsetX,C.offsetY])},mouseup:function(C){var f=this._mouseDownPoint;if(T(this,"click")&&f){var v=[C.offsetX,C.offsetY],m=Math.pow(f[0]-v[0],2)+Math.pow(f[1]-v[1],2);if(m>b)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([C.offsetX,C.offsetY]);o.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(C){if(!(this._mouseDownPoint||!T(this,"mousemove"))){var f=this._model,v=f.coordinateSystem.getSlidedAxisExpandWindow([C.offsetX,C.offsetY]),m=v.behavior;m==="jump"&&this._throttledDispatchExpand.debounceNextCall(f.get("axisExpandDebounce")),this._throttledDispatchExpand(m==="none"?null:{axisExpandWindow:v.axisExpandWindow,animation:m==="jump"?null:!1})}}};function T(C,f){var v=C._model;return v.get("axisExpandable")&&v.get("axisExpandTriggerOn")===f}E.registerPreprocessor(M)},459647:function(X,z,e){e(39302),e(593847),e(155489)},569124:function(X,z,e){var E=e(3440),F=e(131879),O=e(724741);e(68137),e(271883),e(297534),e(144344),e(947438),E.registerLayout(F.curry(O,"bar")),E.extendComponentView({type:"polar"})},364041:function(X,z,e){e(925390),e(396034),e(964702)},964702:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(131879),b=e(310030),L=e(248070),T=["axisLine","axisTickLabel","axisName"],C=O.extendComponentView({type:"radar",render:function(f,v,m){var o=this.group;o.removeAll(),this._buildAxes(f),this._buildSplitLineAndArea(f)},_buildAxes:function(f){var v=f.coordinateSystem,m=v.getIndicatorAxes(),o=M.map(m,function(h){var l=new b(h.model,{position:[v.cx,v.cy],rotation:h.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});M.each(o,function(h){M.each(T,h.add,h),this.group.add(h.getGroup())},this)},_buildSplitLineAndArea:function(f){var v=f.coordinateSystem,m=v.getIndicatorAxes();if(!m.length)return;var o=f.get("shape"),h=f.getModel("splitLine"),l=f.getModel("splitArea"),r=h.getModel("lineStyle"),s=l.getModel("areaStyle"),c=h.get("show"),x=l.get("show"),a=r.get("color"),i=s.get("color");a=M.isArray(a)?a:[a],i=M.isArray(i)?i:[i];var n=[],u=[];function g(I,G,W){var Z=W%G.length;return I[Z]=I[Z]||[],Z}if(o==="circle")for(var d=m[0].getTicksCoords(),y=v.cx,p=v.cy,w=0;w<d.length;w++){if(c){var S=g(n,a,w);n[S].push(new L.Circle({shape:{cx:y,cy:p,r:d[w].coord}}))}if(x&&w<d.length-1){var S=g(u,i,w);u[S].push(new L.Ring({shape:{cx:y,cy:p,r0:d[w].coord,r:d[w+1].coord}}))}}else for(var R,B=M.map(m,function(I,G){var W=I.getTicksCoords();return R=R==null?W.length-1:Math.min(W.length-1,R),M.map(W,function(Z){return v.coordToPoint(Z.coord,G)})}),k=[],w=0;w<=R;w++){for(var P=[],D=0;D<m.length;D++)P.push(B[D][w]);if(P[0]&&P.push(P[0].slice()),c){var S=g(n,a,w);n[S].push(new L.Polyline({shape:{points:P}}))}if(x&&k){var S=g(u,i,w-1);u[S].push(new L.Polygon({shape:{points:P.concat(k)}}))}k=P.slice().reverse()}var A=r.getLineStyle(),N=s.getAreaStyle();M.each(u,function(I,G){this.group.add(L.mergePath(I,{style:M.defaults({stroke:"none",fill:i[G%i.length]},N),silent:!0}))},this),M.each(n,function(I,G){this.group.add(L.mergePath(I,{style:M.defaults({fill:"none",stroke:a[G%a.length]},A),silent:!0}))},this)}});X.exports=C},297534:function(X,z,e){e(68137),e(793915)},554843:function(X,z,e){var E=e(3440);e(365178),e(430278),e(352639),e(144344),e(974139),E.extendComponentView({type:"single"})},641634:function(X,z,e){var E=e(3440),F=e(559366);e(945473),e(41492),e(542206),e(831296),E.registerPreprocessor(F)},542206:function(X,z,e){var E=e(131879),F=e(121526),O=e(482370),M=F.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});E.mixin(M,O);var b=M;X.exports=b},831296:function(X,z,e){var E=e(131879),F=e(795946),O=e(343970),M=e(248070),b=e(930871),L=e(531052),T=e(585264),C=e(435730),f=C.createSymbol,v=e(799538),m=e(748354),o=e(317795),h=o.encodeHTML,l=E.bind,r=E.each,s=Math.PI,c=L.extend({type:"timeline.slider",init:function(u,g){this.api=g,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(u,g,d,y){if(this.model=u,this.api=d,this.ecModel=g,this.group.removeAll(),u.get("show",!0)){var p=this._layout(u,d),w=this._createGroup("mainGroup"),S=this._createGroup("labelGroup"),R=this._axis=this._createAxis(p,u);u.formatTooltip=function(B){return h(R.scale.getLabel(B))},r(["AxisLine","AxisTick","Control","CurrentPointer"],function(B){this["_render"+B](p,w,R,u)},this),this._renderAxisLabel(p,S,R,u),this._position(p,u)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(u,g){var d=u.get("label.position"),y=u.get("orient"),p=x(u,g);d==null||d==="auto"?d=y==="horizontal"?p.y+p.height/2<g.getHeight()/2?"-":"+":p.x+p.width/2<g.getWidth()/2?"+":"-":isNaN(d)&&(d={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[y][d]);var w={horizontal:"center",vertical:d>=0||d==="+"?"left":"right"},S={horizontal:d>=0||d==="+"?"top":"bottom",vertical:"middle"},R={horizontal:0,vertical:s/2},B=y==="vertical"?p.height:p.width,k=u.getModel("controlStyle"),P=k.get("show",!0),D=P?k.get("itemSize"):0,A=P?k.get("itemGap"):0,N=D+A,I=u.get("label.rotate")||0;I=I*s/180;var G,W,Z,H,U=k.get("position",!0),V=P&&k.get("showPlayBtn",!0),Y=P&&k.get("showPrevBtn",!0),$=P&&k.get("showNextBtn",!0),K=0,J=B;return U==="left"||U==="bottom"?(V&&(G=[0,0],K+=N),Y&&(W=[K,0],K+=N),$&&(Z=[J-D,0],J-=N)):(V&&(G=[J-D,0],J-=N),Y&&(W=[0,0],K+=N),$&&(Z=[J-D,0],J-=N)),H=[K,J],u.get("inverse")&&H.reverse(),{viewRect:p,mainLength:B,orient:y,rotation:R[y],labelRotation:I,labelPosOpt:d,labelAlign:u.get("label.align")||w[y],labelBaseline:u.get("label.verticalAlign")||u.get("label.baseline")||S[y],playPosition:G,prevBtnPosition:W,nextBtnPosition:Z,axisExtent:H,controlSize:D,controlGap:A}},_position:function(u,g){var d=this._mainGroup,y=this._labelGroup,p=u.viewRect;if(u.orient==="vertical"){var w=O.create(),S=p.x,R=p.y+p.height;O.translate(w,w,[-S,-R]),O.rotate(w,w,-s/2),O.translate(w,w,[S,R]),p=p.clone(),p.applyTransform(w)}var B=W(p),k=W(d.getBoundingRect()),P=W(y.getBoundingRect()),D=d.position,A=y.position;A[0]=D[0]=B[0][0];var N=u.labelPosOpt;if(isNaN(N)){var I=N==="+"?0:1;Z(D,k,B,1,I),Z(A,P,B,1,1-I)}else{var I=N>=0?0:1;Z(D,k,B,1,I),A[1]=D[1]+N}d.attr("position",D),y.attr("position",A),d.rotation=y.rotation=u.rotation,G(d),G(y);function G(H){var U=H.position;H.origin=[B[0][0]-U[0],B[1][0]-U[1]]}function W(H){return[[H.x,H.x+H.width],[H.y,H.y+H.height]]}function Z(H,U,V,Y,$){H[Y]+=V[Y][$]-U[Y][$]}},_createAxis:function(u,g){var d=g.getData(),y=g.get("axisType"),p=v.createScaleByModel(g,y);p.getTicks=function(){return d.mapArray(["value"],function(R){return R})};var w=d.getDataExtent("value");p.setExtent(w[0],w[1]),p.niceTicks();var S=new T("value",p,u.axisExtent,y);return S.model=g,S},_createGroup:function(u){var g=this["_"+u]=new M.Group;return this.group.add(g),g},_renderAxisLine:function(u,g,d,y){var p=d.getExtent();y.get("lineStyle.show")&&g.add(new M.Line({shape:{x1:p[0],y1:0,x2:p[1],y2:0},style:E.extend({lineCap:"round"},y.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(u,g,d,y){var p=y.getData(),w=d.scale.getTicks();r(w,function(S){var R=d.dataToCoord(S),B=p.getItemModel(S),k=B.getModel("itemStyle"),P=B.getModel("emphasis.itemStyle"),D={position:[R,0],onclick:l(this._changeTimeline,this,S)},A=i(B,k,g,D);M.setHoverStyle(A,P.getItemStyle()),B.get("tooltip")?(A.dataIndex=S,A.dataModel=y):A.dataIndex=A.dataModel=null},this)},_renderAxisLabel:function(u,g,d,y){var p=d.getLabelModel();if(p.get("show")){var w=y.getData(),S=d.getViewLabels();r(S,function(R){var B=R.tickValue,k=w.getItemModel(B),P=k.getModel("label"),D=k.getModel("emphasis.label"),A=d.dataToCoord(R.tickValue),N=new M.Text({position:[A,0],rotation:u.labelRotation-u.rotation,onclick:l(this._changeTimeline,this,B),silent:!1});M.setTextStyle(N.style,P,{text:R.formattedLabel,textAlign:u.labelAlign,textVerticalAlign:u.labelBaseline}),g.add(N),M.setHoverStyle(N,M.setTextStyle({},D))},this)}},_renderControl:function(u,g,d,y){var p=u.controlSize,w=u.rotation,S=y.getModel("controlStyle").getItemStyle(),R=y.getModel("emphasis.controlStyle").getItemStyle(),B=[0,-p/2,p,p],k=y.getPlayState(),P=y.get("inverse",!0);D(u.nextBtnPosition,"controlStyle.nextIcon",l(this._changeTimeline,this,P?"-":"+")),D(u.prevBtnPosition,"controlStyle.prevIcon",l(this._changeTimeline,this,P?"+":"-")),D(u.playPosition,"controlStyle."+(k?"stopIcon":"playIcon"),l(this._handlePlayClick,this,!k),!0);function D(A,N,I,G){if(A){var W={position:A,origin:[p/2,0],rotation:G?-w:0,rectHover:!0,style:S,onclick:I},Z=a(y,N,B,W);g.add(Z),M.setHoverStyle(Z,R)}}},_renderCurrentPointer:function(u,g,d,y){var p=y.getData(),w=y.getCurrentIndex(),S=p.getItemModel(w).getModel("checkpointStyle"),R=this,B={onCreate:function(k){k.draggable=!0,k.drift=l(R._handlePointerDrag,R),k.ondragend=l(R._handlePointerDragend,R),n(k,w,d,y,!0)},onUpdate:function(k){n(k,w,d,y)}};this._currentPointer=i(S,S,this._mainGroup,{},this._currentPointer,B)},_handlePlayClick:function(u){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:u,from:this.uid})},_handlePointerDrag:function(u,g,d){this._clearTimer(),this._pointerChangeTimeline([d.offsetX,d.offsetY])},_handlePointerDragend:function(u){this._pointerChangeTimeline([u.offsetX,u.offsetY],!0)},_pointerChangeTimeline:function(u,g){var d=this._toAxisCoord(u)[0],y=this._axis,p=m.asc(y.getExtent().slice());d>p[1]&&(d=p[1]),d<p[0]&&(d=p[0]),this._currentPointer.position[0]=d,this._currentPointer.dirty();var w=this._findNearestTick(d),S=this.model;(g||w!==S.getCurrentIndex()&&S.get("realtime"))&&this._changeTimeline(w)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(l(u,this),this.model.get("playInterval")));function u(){var g=this.model;this._changeTimeline(g.getCurrentIndex()+(g.get("rewind",!0)?-1:1))}},_toAxisCoord:function(u){var g=this._mainGroup.getLocalTransform();return M.applyTransform(u,g,!0)},_findNearestTick:function(u){var g=this.model.getData(),d=1/0,y,p=this._axis;return g.each(["value"],function(w,S){var R=p.dataToCoord(w),B=Math.abs(R-u);B<d&&(d=B,y=S)}),y},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(u){var g=this.model.getCurrentIndex();u==="+"?u=g+1:u==="-"&&(u=g-1),this.api.dispatchAction({type:"timelineChange",currentIndex:u,from:this.uid})}});function x(u,g){return b.getLayoutRect(u.getBoxLayoutParams(),{width:g.getWidth(),height:g.getHeight()},u.get("padding"))}function a(u,g,d,y){var p=y.style,w=M.createIcon(u.get(g),y||{},new F(d[0],d[1],d[2],d[3]));return p&&w.setStyle(p),w}function i(u,g,d,y,p,w){var S=g.get("color");if(p)p.setColor(S),d.add(p),w&&w.onUpdate(p);else{var R=u.get("symbol");p=f(R,-1,-1,2,2,S),p.setStyle("strokeNoScale",!0),d.add(p),w&&w.onCreate(p)}var B=g.getItemStyle(["color","symbol","symbolSize"]);p.setStyle(B),y=E.merge({rectHover:!0,z2:100},y,!0);var k=u.get("symbolSize");k=k instanceof Array?k.slice():[+k,+k],k[0]/=2,k[1]/=2,y.scale=k;var P=u.get("symbolOffset");if(P){var D=y.position=y.position||[0,0];D[0]+=m.parsePercent(P[0],k[0]),D[1]+=m.parsePercent(P[1],k[1])}var A=u.get("symbolRotate");return y.rotation=(A||0)*Math.PI/180||0,p.attr(y),p.updateTransform(),p}function n(u,g,d,y,p){if(!u.dragging){var w=y.getModel("checkpointStyle"),S=d.dataToCoord(y.getData().get(["value"],g));p||!w.get("animation",!0)?u.attr({position:[S,0]}):(u.stopAnimation(!0),u.animateTo({position:[S,0]},w.get("animationDuration",!0),w.get("animationEasing",!0)))}}X.exports=c},585264:function(X,z,e){var E=e(131879),F=e(536492),O=function(b,L,T,C){F.call(this,b,L,T),this.type=C||"value",this.model=null};O.prototype={constructor:O,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return this.model.get("orient")==="horizontal"}},E.inherits(O,F);var M=O;X.exports=M},121526:function(X,z,e){var E=e(131879),F=e(360684),O=e(58677),M=e(835454),b=F.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(T,C,f){this._data,this._names,this.mergeDefaultAndTheme(T,f),this._initData()},mergeOption:function(T){b.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(T){T==null&&(T=this.option.currentIndex);var C=this._data.count();this.option.loop?T=(T%C+C)%C:(T>=C&&(T=C-1),T<0&&(T=0)),this.option.currentIndex=T},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(T){this.option.autoPlay=!!T},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var T=this.option,C=T.data||[],f=T.axisType,v=this._names=[];if(f==="category"){var m=[];E.each(C,function(l,r){var s=M.getDataItemValue(l),c;E.isObject(l)?(c=E.clone(l),c.value=r):c=r,m.push(c),!E.isString(s)&&(s==null||isNaN(s))&&(s=""),v.push(s+"")}),C=m}var o={category:"ordinal",time:"time"}[f]||"number",h=this._data=new O([{name:"value",type:o}],this);h.initData(C,v)},getData:function(){return this._data},getCategories:function(){if(this.get("axisType")==="category")return this._names.slice()}}),L=b;X.exports=L},531052:function(X,z,e){var E=e(653646),F=E.extend({type:"timeline"});X.exports=F},559366:function(X,z,e){var E=e(131879);function F(L){var T=L&&L.timeline;E.isArray(T)||(T=T?[T]:[]),E.each(T,function(C){C&&O(C)})}function O(L){var T=L.type,C={number:"value",time:"time"};if(C[T]&&(L.axisType=C[T],delete L.type),M(L),b(L,"controlPosition")){var f=L.controlStyle||(L.controlStyle={});b(f,"position")||(f.position=L.controlPosition),f.position==="none"&&!b(f,"show")&&(f.show=!1,delete f.position),delete L.controlPosition}E.each(L.data||[],function(v){E.isObject(v)&&!E.isArray(v)&&(!b(v,"value")&&b(v,"name")&&(v.value=v.name),M(v))})}function M(L){var T=L.itemStyle||(L.itemStyle={}),C=T.emphasis||(T.emphasis={}),f=L.label||L.label||{},v=f.normal||(f.normal={}),m={normal:1,emphasis:1};E.each(f,function(o,h){!m[h]&&!b(v,h)&&(v[h]=o)}),C.label&&!b(f,"emphasis")&&(f.emphasis=C.label,delete C.label)}function b(L,T){return L.hasOwnProperty(T)}X.exports=F},41492:function(X,z,e){var E=e(3440),F=e(131879);E.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(O,M){var b=M.getComponent("timeline");return b&&O.currentIndex!=null&&(b.setCurrentIndex(O.currentIndex),!b.get("loop",!0)&&b.isIndexMax()&&b.setPlayState(!1)),M.resetOption("timeline"),F.defaults({currentIndex:b.option.currentIndex},O)}),E.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(O,M){var b=M.getComponent("timeline");b&&O.playState!=null&&b.setPlayState(O.playState)})},945473:function(X,z,e){var E=e(360684);E.registerSubTypeDefaulter("timeline",function(){return"slider"})},751838:function(X,z,e){var E=e(131879),F=e(3440),O=e(248070),M=e(930871),b=M.getLayoutRect,L=e(317795),T=L.windowOpen;F.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),F.extendComponentView({type:"title",render:function(C,f,v){if(this.group.removeAll(),!!C.get("show")){var m=this.group,o=C.getModel("textStyle"),h=C.getModel("subtextStyle"),l=C.get("textAlign"),r=E.retrieve2(C.get("textBaseline"),C.get("textVerticalAlign")),s=new O.Text({style:O.setTextStyle({},o,{text:C.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),c=s.getBoundingRect(),x=C.get("subtext"),a=new O.Text({style:O.setTextStyle({},h,{text:x,textFill:h.getTextColor(),y:c.height+C.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),i=C.get("link"),n=C.get("sublink"),u=C.get("triggerEvent",!0);s.silent=!i&&!u,a.silent=!n&&!u,i&&s.on("click",function(){T(i,"_"+C.get("target"))}),n&&a.on("click",function(){T(n,"_"+C.get("subtarget"))}),s.eventData=a.eventData=u?{componentType:"title",componentIndex:C.componentIndex}:null,m.add(s),x&&m.add(a);var g=m.getBoundingRect(),d=C.getBoxLayoutParams();d.width=g.width,d.height=g.height;var y=b(d,{width:v.getWidth(),height:v.getHeight()},C.get("padding"));l||(l=C.get("left")||C.get("right"),l==="middle"&&(l="center"),l==="right"?y.x+=y.width:l==="center"&&(y.x+=y.width/2)),r||(r=C.get("top")||C.get("bottom"),r==="center"&&(r="middle"),r==="bottom"?y.y+=y.height:r==="middle"&&(y.y+=y.height/2),r=r||"top"),m.attr("position",[y.x,y.y]);var p={textAlign:l,textVerticalAlign:r};s.setStyle(p),a.setStyle(p),g=m.getBoundingRect();var w=y.margin,S=C.getItemStyle(["color","opacity"]);S.fill=C.get("backgroundColor");var R=new O.Rect({shape:{x:g.x-w[3],y:g.y-w[0],width:g.width+w[1]+w[3],height:g.height+w[0]+w[2],r:C.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});m.add(R)}}})},801498:function(X,z,e){e(955392),e(785418),e(468231),e(670640),e(645828),e(290320),e(390014)},955392:function(X,z,e){var E=e(3440),F=e(131879),O=e(868120),M=E.extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){M.superApply(this,"optionUpdated",arguments),F.each(this.option.feature,function(L,T){var C=O.get(T);C&&F.merge(L,C.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}}),b=M;X.exports=b},785418:function(X,z,e){var E=e(3440),F=e(131879),O=e(872113),M=e(868120),b=e(248070),L=e(56785),T=e(865453),C=e(223907),f=E.extendComponentView({type:"toolbox",render:function(m,o,h,l){var r=this.group;if(r.removeAll(),!m.get("show"))return;var s=+m.get("itemSize"),c=m.get("feature")||{},x=this._features||(this._features={}),a=[];F.each(c,function(u,g){a.push(g)}),new T(this._featureNames||[],a).add(i).update(i).remove(F.curry(i,null)).execute(),this._featureNames=a;function i(u,g){var d=a[u],y=a[g],p=c[d],w=new L(p,m,m.ecModel),S;if(l&&l.newTitle!=null&&l.featureName===d&&(p.title=l.newTitle),d&&!y){if(v(d))S={model:w,onclick:w.option.onclick,featureName:d};else{var R=M.get(d);if(!R)return;S=new R(w,o,h)}x[d]=S}else{if(S=x[y],!S)return;S.model=w,S.ecModel=o,S.api=h}if(!d&&y){S.dispose&&S.dispose(o,h);return}if(!w.get("show")||S.unusable){S.remove&&S.remove(o,h);return}n(w,S,d),w.setIconStatus=function(B,k){var P=this.option,D=this.iconPaths;P.iconStatus=P.iconStatus||{},P.iconStatus[B]=k,D[B]&&D[B].trigger(k)},S.render&&S.render(w,o,h,l)}function n(u,g,d){var y=u.getModel("iconStyle"),p=u.getModel("emphasis.iconStyle"),w=g.getIcons?g.getIcons():u.get("icon"),S=u.get("title")||{};if(typeof w=="string"){var R=w,B=S;w={},S={},w[d]=R,S[d]=B}var k=u.iconPaths={};F.each(w,function(P,D){var A=b.createIcon(P,{},{x:-s/2,y:-s/2,width:s,height:s});A.setStyle(y.getItemStyle()),A.hoverStyle=p.getItemStyle(),A.setStyle({text:S[D],textAlign:p.get("textAlign"),textBorderRadius:p.get("textBorderRadius"),textPadding:p.get("textPadding"),textFill:null});var N=m.getModel("tooltip");N&&N.get("show")&&A.attr("tooltip",F.extend({content:S[D],formatter:N.get("formatter",!0)||function(){return S[D]},formatterParams:{componentType:"toolbox",name:D,title:S[D],$vars:["name","title"]},position:N.get("position",!0)||"bottom"},N.option)),b.setHoverStyle(A),m.get("showTitle")&&(A.__title=S[D],A.on("mouseover",function(){var I=p.getItemStyle(),G=m.get("orient")==="vertical"?m.get("right")==null?"right":"left":m.get("bottom")==null?"bottom":"top";A.setStyle({textFill:p.get("textFill")||I.fill||I.stroke||"#000",textBackgroundColor:p.get("textBackgroundColor"),textPosition:p.get("textPosition")||G})}).on("mouseout",function(){A.setStyle({textFill:null,textBackgroundColor:null})})),A.trigger(u.get("iconStatus."+D)||"normal"),r.add(A),A.on("click",F.bind(g.onclick,g,o,h,D)),k[D]=A})}C.layout(r,m,h),r.add(C.makeBackground(r.getBoundingRect(),m)),r.eachChild(function(u){var g=u.__title,d=u.hoverStyle;if(d&&g){var y=O.getBoundingRect(g,O.makeFont(d)),p=u.position[0]+r.position[0],w=u.position[1]+r.position[1]+s,S=!1;w+y.height>h.getHeight()&&(d.textPosition="top",S=!0);var R=S?-5-y.height:s+8;p+y.width/2>h.getWidth()?(d.textPosition=["100%",R],d.textAlign="right"):p-y.width/2<0&&(d.textPosition=[0,R],d.textAlign="left")}})},updateView:function(m,o,h,l){F.each(this._features,function(r){r.updateView&&r.updateView(r.model,o,h,l)})},remove:function(m,o){F.each(this._features,function(h){h.remove&&h.remove(m,o)}),this.group.removeAll()},dispose:function(m,o){F.each(this._features,function(h){h.dispose&&h.dispose(m,o)})}});function v(m){return m.indexOf("my")===0}X.exports=f},868120:function(X,z){var e={};function E(O,M){e[O]=M}function F(O){return e[O]}z.register=E,z.get=F},144562:function(X,z,e){var E=e(131879),F=e(868120),O=e(516923),M=O.toolbox.brush;function b(C,f,v){this.model=C,this.ecModel=f,this.api=v,this._brushType,this._brushMode}b.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:E.clone(M.title)};var L=b.prototype;L.render=L.updateView=function(C,f,v){var m,o,h;f.eachComponent({mainType:"brush"},function(l){m=l.brushType,o=l.brushOption.brushMode||"single",h|=l.areas.length}),this._brushType=m,this._brushMode=o,E.each(C.get("type",!0),function(l){C.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?h:l===m)?"emphasis":"normal")})},L.getIcons=function(){var C=this.model,f=C.get("icon",!0),v={};return E.each(C.get("type",!0),function(m){f[m]&&(v[m]=f[m])}),v},L.onclick=function(C,f,v){var m=this._brushType,o=this._brushMode;v==="clear"?(f.dispatchAction({type:"axisAreaSelect",intervals:[]}),f.dispatchAction({type:"brush",command:"clear",areas:[]})):f.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:v==="keep"?m:m===v?!1:v,brushMode:v==="keep"?o==="multiple"?"single":"multiple":o}})},F.register("brush",b);var T=b;X.exports=T},645828:function(X,z,e){var E=e(3440),F=e(131879),O=e(519756),M=e(516923),b=e(868120),L=M.toolbox.dataView,T=new Array(60).join("-"),C="	";function f(u){var g={},d=[],y=[];return u.eachRawSeries(function(p){var w=p.coordinateSystem;if(w&&(w.type==="cartesian2d"||w.type==="polar")){var S=w.getBaseAxis();if(S.type==="category"){var R=S.dim+"_"+S.index;g[R]||(g[R]={categoryAxis:S,valueAxis:w.getOtherAxis(S),series:[]},y.push({axisDim:S.dim,axisIndex:S.index})),g[R].series.push(p)}else d.push(p)}else d.push(p)}),{seriesGroupByCategoryAxis:g,other:d,meta:y}}function v(u){var g=[];return F.each(u,function(d,y){var p=d.categoryAxis,w=d.valueAxis,S=w.dim,R=[" "].concat(F.map(d.series,function(N){return N.name})),B=[p.model.getCategories()];F.each(d.series,function(N){var I=N.getRawData();B.push(N.getRawData().mapArray(I.mapDimension(S),function(G){return G}))});for(var k=[R.join(C)],P=0;P<B[0].length;P++){for(var D=[],A=0;A<B.length;A++)D.push(B[A][P]);k.push(D.join(C))}g.push(k.join(`
`))}),g.join(`

`+T+`

`)}function m(u){return F.map(u,function(g){var d=g.getRawData(),y=[g.name],p=[];return d.each(d.dimensions,function(){for(var w=arguments.length,S=arguments[w-1],R=d.getName(S),B=0;B<w-1;B++)p[B]=arguments[B];y.push((R?R+C:"")+p.join(C))}),y.join(`
`)}).join(`

`+T+`

`)}function o(u){var g=f(u);return{value:F.filter([v(g.seriesGroupByCategoryAxis),m(g.other)],function(d){return d.replace(/[\n\t\s]/g,"")}).join(`

`+T+`

`),meta:g.meta}}function h(u){return u.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function l(u){var g=u.slice(0,u.indexOf(`
`));if(g.indexOf(C)>=0)return!0}var r=new RegExp("["+C+"]+","g");function s(u){for(var g=u.split(/\n+/g),d=h(g.shift()).split(r),y=[],p=F.map(d,function(B){return{name:B,data:[]}}),w=0;w<g.length;w++){var S=h(g[w]).split(r);y.push(S.shift());for(var R=0;R<S.length;R++)p[R]&&(p[R].data[w]=S[R])}return{series:p,categories:y}}function c(u){for(var g=u.split(/\n+/g),d=h(g.shift()),y=[],p=0;p<g.length;p++){var w=h(g[p]);if(w){var S=w.split(r),R="",B,k=!1;isNaN(S[0])?(k=!0,R=S[0],S=S.slice(1),y[p]={name:R,value:[]},B=y[p].value):B=y[p]=[];for(var P=0;P<S.length;P++)B.push(+S[P]);B.length===1&&(k?y[p].value=B[0]:y[p]=B[0])}}return{name:d,data:y}}function x(u,g){var d=u.split(new RegExp(`
*`+T+`
*`,"g")),y={series:[]};return F.each(d,function(p,w){if(l(p)){var S=s(p),R=g[w],B=R.axisDim+"Axis";R&&(y[B]=y[B]||[],y[B][R.axisIndex]={data:S.categories},y.series=y.series.concat(S.series))}else{var S=c(p);y.series.push(S)}}),y}function a(u){this._dom=null,this.model=u}a.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:F.clone(L.title),lang:F.clone(L.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},a.prototype.onclick=function(u,g){var d=g.getDom(),y=this.model;this._dom&&d.removeChild(this._dom);var p=document.createElement("div");p.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",p.style.backgroundColor=y.get("backgroundColor")||"#fff";var w=document.createElement("h4"),S=y.get("lang")||[];w.innerHTML=S[0]||y.get("title"),w.style.cssText="margin: 10px 20px;",w.style.color=y.get("textColor");var R=document.createElement("div"),B=document.createElement("textarea");R.style.cssText="display:block;width:100%;overflow:auto;";var k=y.get("optionToContent"),P=y.get("contentToOption"),D=o(u);if(typeof k=="function"){var A=k(g.getOption());typeof A=="string"?R.innerHTML=A:F.isDom(A)&&R.appendChild(A)}else R.appendChild(B),B.readOnly=y.get("readOnly"),B.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",B.style.color=y.get("textColor"),B.style.borderColor=y.get("textareaBorderColor"),B.style.backgroundColor=y.get("textareaColor"),B.value=D.value;var N=D.meta,I=document.createElement("div");I.style.cssText="position:absolute;bottom:0;left:0;right:0;";var G="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",W=document.createElement("div"),Z=document.createElement("div");G+=";background-color:"+y.get("buttonColor"),G+=";color:"+y.get("buttonTextColor");var H=this;function U(){d.removeChild(p),H._dom=null}O.addEventListener(W,"click",U),O.addEventListener(Z,"click",function(){var V;try{typeof P=="function"?V=P(R,g.getOption()):V=x(B.value,N)}catch(Y){throw U(),new Error("Data view format error "+Y)}V&&g.dispatchAction({type:"changeDataView",newOption:V}),U()}),W.innerHTML=S[1],Z.innerHTML=S[2],Z.style.cssText=G,W.style.cssText=G,!y.get("readOnly")&&I.appendChild(Z),I.appendChild(W),p.appendChild(w),p.appendChild(R),p.appendChild(I),R.style.height=d.clientHeight-80+"px",d.appendChild(p),this._dom=p},a.prototype.remove=function(u,g){this._dom&&g.getDom().removeChild(this._dom)},a.prototype.dispose=function(u,g){this.remove(u,g)};function i(u,g){return F.map(u,function(d,y){var p=g&&g[y];if(F.isObject(p)&&!F.isArray(p)){var w=F.isObject(d)&&!F.isArray(d);w||(d={value:d});var S=p.name!=null&&d.name==null;return d=F.defaults(d,p),S&&delete d.name,d}else return d})}b.register("dataView",a),E.registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(u,g){var d=[];F.each(u.newOption.series,function(y){var p=g.getSeriesByName(y.name)[0];if(!p)d.push(F.extend({type:"scatter"},y));else{var w=p.get("data");d.push({name:y.name,data:i(y.data,w)})}}),g.mergeOption(F.defaults({series:d},u.newOption))});var n=a;X.exports=n},290320:function(X,z,e){var E=e(3440),F=e(131879),O=e(612968),M=e(999516),b=e(883406),L=e(438289),T=e(516923),C=e(868120);e(641632);var f=T.toolbox.dataZoom,v=F.each,m="\0_ec_\0toolbox-dataZoom_";function o(a,i,n){(this._brushController=new O(n.getZr())).on("brush",F.bind(this._onBrush,this)).mount(),this._isZoomActive}o.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:F.clone(f.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var h=o.prototype;h.render=function(a,i,n,u){this.model=a,this.ecModel=i,this.api=n,c(a,i,this,u,n),s(a,i)},h.onclick=function(a,i,n){l[n].call(this)},h.remove=function(a,i){this._brushController.unmount()},h.dispose=function(a,i){this._brushController.dispose()};var l={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(b.pop(this.ecModel))}};h._onBrush=function(a,i){if(!i.isEnd||!a.length)return;var n={},u=this.ecModel;this._brushController.updateCovers([]);var g=new M(r(this.model.option),u,{include:["grid"]});g.matchOutputRanges(a,u,function(p,w,S){if(S.type==="cartesian2d"){var R=p.brushType;R==="rect"?(d("x",S,w[0]),d("y",S,w[1])):d({lineX:"x",lineY:"y"}[R],S,w)}}),b.push(u,n),this._dispatchZoomAction(n);function d(p,w,S){var R=w.getAxis(p),B=R.model,k=y(p,B,u),P=k.findRepresentativeAxisProxy(B).getMinMaxSpan();(P.minValueSpan!=null||P.maxValueSpan!=null)&&(S=L(0,S.slice(),R.scale.getExtent(),0,P.minValueSpan,P.maxValueSpan)),k&&(n[k.id]={dataZoomId:k.id,startValue:S[0],endValue:S[1]})}function y(p,w,S){var R;return S.eachComponent({mainType:"dataZoom",subType:"select"},function(B){var k=B.getAxisModel(p,w.componentIndex);k&&(R=B)}),R}},h._dispatchZoomAction=function(a){var i=[];v(a,function(n,u){i.push(F.clone(n))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})};function r(a){var i={};return F.each(["xAxisIndex","yAxisIndex"],function(n){i[n]=a[n],i[n]==null&&(i[n]="all"),(i[n]===!1||i[n]==="none")&&(i[n]=[])}),i}function s(a,i){a.setIconStatus("back",b.count(i)>1?"emphasis":"normal")}function c(a,i,n,u,g){var d=n._isZoomActive;u&&u.type==="takeGlobalCursor"&&(d=u.key==="dataZoomSelect"?u.dataZoomSelectActive:!1),n._isZoomActive=d,a.setIconStatus("zoom",d?"emphasis":"normal");var y=new M(r(a.option),i,{include:["grid"]});n._brushController.setPanels(y.makePanelOpts(g,function(p){return p.xAxisDeclared&&!p.yAxisDeclared?"lineX":!p.xAxisDeclared&&p.yAxisDeclared?"lineY":"rect"})).enableBrush(d?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}C.register("dataZoom",o),E.registerPreprocessor(function(a){if(!a)return;var i=a.dataZoom||(a.dataZoom=[]);F.isArray(i)||(a.dataZoom=i=[i]);var n=a.toolbox;if(n&&(F.isArray(n)&&(n=n[0]),n&&n.feature)){var u=n.feature.dataZoom;g("xAxis",u),g("yAxis",u)}function g(y,p){if(p){var w=y+"Index",S=p[w];S!=null&&S!=="all"&&!F.isArray(S)&&(S=S===!1||S==="none"?[]:[S]),d(y,function(R,B){if(!(S!=null&&S!=="all"&&F.indexOf(S,B)===-1)){var k={type:"select",$fromToolbox:!0,filterMode:p.filterMode||"filter",id:m+y+B};k[w]=B,i.push(k)}})}}function d(y,p){var w=a[y];F.isArray(w)||(w=w?[w]:[]),v(w,p)}});var x=o;X.exports=x},670640:function(X,z,e){var E=e(3440),F=e(131879),O=e(516923),M=e(868120),b=O.toolbox.magicType,L="__ec_magicType_stack__";function T(o){this.model=o}T.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:F.clone(b.title),option:{},seriesIndex:{}};var C=T.prototype;C.getIcons=function(){var o=this.model,h=o.get("icon"),l={};return F.each(o.get("type"),function(r){h[r]&&(l[r]=h[r])}),l};var f={line:function(o,h,l,r){if(o==="bar")return F.merge({id:h,type:"line",data:l.get("data"),stack:l.get("stack"),markPoint:l.get("markPoint"),markLine:l.get("markLine")},r.get("option.line")||{},!0)},bar:function(o,h,l,r){if(o==="line")return F.merge({id:h,type:"bar",data:l.get("data"),stack:l.get("stack"),markPoint:l.get("markPoint"),markLine:l.get("markLine")},r.get("option.bar")||{},!0)},stack:function(o,h,l,r){var s=l.get("stack")===L;if(o==="line"||o==="bar")return r.setIconStatus("stack",s?"normal":"emphasis"),F.merge({id:h,stack:s?"":L},r.get("option.stack")||{},!0)}},v=[["line","bar"],["stack"]];C.onclick=function(o,h,l){var r=this.model,s=r.get("seriesIndex."+l);if(f[l]){var c={series:[]},x=function(n){var u=n.subType,g=n.id,d=f[l](u,g,n,r);d&&(F.defaults(d,n.option),c.series.push(d));var y=n.coordinateSystem;if(y&&y.type==="cartesian2d"&&(l==="line"||l==="bar")){var p=y.getAxesByScale("ordinal")[0];if(p){var w=p.dim,S=w+"Axis",R=o.queryComponents({mainType:S,index:n.get(name+"Index"),id:n.get(name+"Id")})[0],B=R.componentIndex;c[S]=c[S]||[];for(var k=0;k<=B;k++)c[S][B]=c[S][B]||{};c[S][B].boundaryGap=l==="bar"}}};F.each(v,function(n){F.indexOf(n,l)>=0&&F.each(n,function(u){r.setIconStatus(u,"normal")})}),r.setIconStatus(l,"emphasis"),o.eachComponent({mainType:"series",query:s==null?null:{seriesIndex:s}},x);var a;if(l==="stack"){var i=c.series&&c.series[0]&&c.series[0].stack===L;a=i?F.merge({stack:b.title.tiled},b.title):F.clone(b.title)}h.dispatchAction({type:"changeMagicType",currentType:l,newOption:c,newTitle:a,featureName:"magicType"})}},E.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(o,h){h.mergeOption(o.newOption)}),M.register("magicType",T);var m=T;X.exports=m},390014:function(X,z,e){var E=e(3440),F=e(883406),O=e(516923),M=e(868120),b=O.toolbox.restore;function L(f){this.model=f}L.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:b.title};var T=L.prototype;T.onclick=function(f,v,m){F.clear(f),v.dispatchAction({type:"restore",from:this.uid})},M.register("restore",L),E.registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(f,v){v.resetOption("recreate")});var C=L;X.exports=C},468231:function(X,z,e){var E=e(358020),F=e(516923),O=e(868120),M=F.toolbox.saveAsImage;function b(C){this.model=C}b.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:M.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:M.lang.slice()},b.prototype.unusable=!E.canvasSupported;var L=b.prototype;L.onclick=function(C,f){var v=this.model,m=v.get("name")||C.get("title.0.text")||"echarts",o=f.getZr().painter.getType()==="svg",h=o?"svg":v.get("type",!0)||"png",l=f.getConnectedDataURL({type:h,backgroundColor:v.get("backgroundColor",!0)||C.get("backgroundColor")||"#fff",connectedBackgroundColor:v.get("connectedBackgroundColor"),excludeComponents:v.get("excludeComponents"),pixelRatio:v.get("pixelRatio")});if(typeof MouseEvent=="function"&&!E.browser.ie&&!E.browser.edge){var r=document.createElement("a");r.download=m+"."+h,r.target="_blank",r.href=l;var s=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});r.dispatchEvent(s)}else if(window.navigator.msSaveOrOpenBlob){for(var c=atob(l.split(",")[1]),x=c.length,a=new Uint8Array(x);x--;)a[x]=c.charCodeAt(x);var i=new Blob([a]);window.navigator.msSaveOrOpenBlob(i,m+"."+h)}else{var n=v.get("lang"),u='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(n&&n[0]||"")+'" /></body>',g=window.open();g.document.write(u)}},O.register("saveAsImage",b);var T=b;X.exports=T},134208:function(X,z,e){var E=e(3440);e(144344),e(389388),e(397387),E.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),E.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})},463827:function(X,z,e){var E=e(131879),F=e(994819),O=e(519756),M=e(771659),b=e(358020),L=e(317795),T=E.each,C=L.toCamelCase,f=["","-webkit-","-moz-","-o-"],v="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";function m(c){var x="cubic-bezier(0.23, 1, 0.32, 1)",a="left "+c+"s "+x+",top "+c+"s "+x;return E.map(f,function(i){return i+"transition:"+a}).join(";")}function o(c){var x=[],a=c.get("fontSize"),i=c.getTextColor();i&&x.push("color:"+i),x.push("font:"+c.getFont());var n=c.get("lineHeight");n==null&&(n=Math.round(a*3/2)),a&&x.push("line-height:"+n+"px");var u=c.get("textShadowColor"),g=c.get("textShadowBlur")||0,d=c.get("textShadowOffsetX")||0,y=c.get("textShadowOffsetY")||0;return g&&x.push("text-shadow:"+d+"px "+y+"px "+g+"px "+u),T(["decoration","align"],function(p){var w=c.get(p);w&&x.push("text-"+p+":"+w)}),x.join(";")}function h(c){var x=[],a=c.get("transitionDuration"),i=c.get("backgroundColor"),n=c.getModel("textStyle"),u=c.get("padding");return a&&x.push(m(a)),i&&(b.canvasSupported?x.push("background-Color:"+i):(x.push("background-Color:#"+F.toHex(i)),x.push("filter:alpha(opacity=70)"))),T(["width","color","radius"],function(g){var d="border-"+g,y=C(d),p=c.get(y);p!=null&&x.push(d+":"+p+(g==="color"?"":"px"))}),x.push(o(n)),u!=null&&x.push("padding:"+L.normalizeCssArray(u).join("px ")+"px"),x.join(";")+";"}function l(c,x,a,i,n){var u=x&&x.painter;if(a){var g=u&&u.getViewportRoot();g&&M.transformLocalCoord(c,g,document.body,i,n)}else{c[0]=i,c[1]=n;var d=u&&u.getViewportRootOffset();d&&(c[0]+=d.offsetLeft,c[1]+=d.offsetTop)}c[2]=c[0]/x.getWidth(),c[3]=c[1]/x.getHeight()}function r(c,x,a){if(b.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=x.getZr(),u=this._appendToBody=a&&a.appendToBody;this._styleCoord=[0,0,0,0],l(this._styleCoord,n,u,x.getWidth()/2,x.getHeight()/2),u?document.body.appendChild(i):c.appendChild(i),this._container=c,this._show=!1,this._hideTimeout;var g=this;i.onmouseenter=function(){g._enterable&&(clearTimeout(g._hideTimeout),g._show=!0),g._inContent=!0},i.onmousemove=function(d){if(d=d||window.event,!g._enterable){var y=n.handler,p=n.painter.getViewportRoot();O.normalizeEvent(p,d,!0),y.dispatch("mousemove",d)}},i.onmouseleave=function(){g._enterable&&g._show&&g.hideLater(g._hideDelay),g._inContent=!1}}r.prototype={constructor:r,_enterable:!0,update:function(c){var x=this._container,a=x.currentStyle||document.defaultView.getComputedStyle(x),i=x.style;i.position!=="absolute"&&a.position!=="absolute"&&(i.position="relative");var n=c.get("alwaysShowContent");n&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var c=this._styleCoord[2],x=this._styleCoord[3],a=c*this._zr.getWidth(),i=x*this._zr.getHeight();this.moveTo(a,i)},show:function(c){clearTimeout(this._hideTimeout);var x=this.el,a=this._styleCoord;x.style.cssText=v+h(c)+";left:"+a[0]+"px;top:"+a[1]+"px;"+(c.get("extraCssText")||""),x.style.display=x.innerHTML?"block":"none",x.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(c){this.el.innerHTML=c??""},setEnterable:function(c){this._enterable=c},getSize:function(){var c=this.el;return[c.clientWidth,c.clientHeight]},moveTo:function(c,x){var a=this._styleCoord;l(a,this._zr,this._appendToBody,c,x);var i=this.el.style;i.left=a[0]+"px",i.top=a[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(c){this._show&&!(this._inContent&&this._enterable)&&(c?(this._hideDelay=c,this._show=!1,this._hideTimeout=setTimeout(E.bind(this.hide,this),c)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var c=this.el.clientWidth,x=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(this.el);a&&(c+=parseInt(a.borderLeftWidth,10)+parseInt(a.borderRightWidth,10),x+=parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10))}return{width:c,height:x}}};var s=r;X.exports=s},389388:function(X,z,e){var E=e(3440),F=E.extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});X.exports=F},831629:function(X,z,e){var E=e(131879),F=e(835727),O=e(248070);function M(T,C,f,v){T[0]=f,T[1]=v,T[2]=T[0]/C.getWidth(),T[3]=T[1]/C.getHeight()}function b(T){var C=this._zr=T.getZr();this._styleCoord=[0,0,0,0],M(this._styleCoord,C,T.getWidth()/2,T.getHeight()/2),this._show=!1,this._hideTimeout}b.prototype={constructor:b,_enterable:!0,update:function(T){var C=T.get("alwaysShowContent");C&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var T=this._styleCoord[2],C=this._styleCoord[3],f=T*this._zr.getWidth(),v=C*this._zr.getHeight();this.moveTo(f,v)},show:function(T){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(T,C,f){this.el&&this._zr.remove(this.el);for(var v={},m=T,o="{marker",h="|}",l=m.indexOf(o);l>=0;){var r=m.indexOf(h),s=m.substr(l+o.length,r-l-o.length);s.indexOf("sub")>-1?v["marker"+s]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:C[s],textOffset:[3,0]}:v["marker"+s]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:C[s]},m=m.substr(r+1),l=m.indexOf("{marker")}var c=f.getModel("textStyle"),x=c.get("fontSize"),a=f.get("textLineHeight");a==null&&(a=Math.round(x*3/2)),this.el=new F({style:O.setTextStyle({},c,{rich:v,text:T,textBackgroundColor:f.get("backgroundColor"),textBorderRadius:f.get("borderRadius"),textFill:f.get("textStyle.color"),textPadding:f.get("padding"),textLineHeight:a}),z:f.get("z")}),this._zr.add(this.el);var i=this;this.el.on("mouseover",function(){i._enterable&&(clearTimeout(i._hideTimeout),i._show=!0),i._inContent=!0}),this.el.on("mouseout",function(){i._enterable&&i._show&&i.hideLater(i._hideDelay),i._inContent=!1})},setEnterable:function(T){this._enterable=T},getSize:function(){var T=this.el.getBoundingRect();return[T.width,T.height]},moveTo:function(T,C){if(this.el){var f=this._styleCoord;M(f,this._zr,T,C),this.el.attr("position",[f[0],f[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(T){this._show&&!(this._inContent&&this._enterable)&&(T?(this._hideDelay=T,this._show=!1,this._hideTimeout=setTimeout(E.bind(this.hide,this),T)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var T=this.getSize();return{width:T[0],height:T[1]}}};var L=b;X.exports=L},397387:function(X,z,e){var E=e(3440),F=e(131879),O=e(358020),M=e(463827),b=e(831629),L=e(317795),T=e(748354),C=e(248070),f=e(55425),v=e(930871),m=e(56785),o=e(353036),h=e(799538),l=e(760293),r=e(835454),s=r.getTooltipRenderMode,c=F.bind,x=F.each,a=T.parsePercent,i=new C.Rect({shape:{x:-1,y:-1,width:2,height:2}}),n=E.extendComponentView({type:"tooltip",init:function(S,R){if(!O.node){var B=S.getComponent("tooltip"),k=B.get("renderMode");this._renderMode=s(k);var P;this._renderMode==="html"?(P=new M(R.getDom(),R,{appendToBody:B.get("appendToBody",!0)}),this._newLine="<br/>"):(P=new b(R),this._newLine=`
`),this._tooltipContent=P}},render:function(S,R,B){if(!O.node){this.group.removeAll(),this._tooltipModel=S,this._ecModel=R,this._api=B,this._lastDataByCoordSys=null,this._alwaysShowContent=S.get("alwaysShowContent");var k=this._tooltipContent;k.update(S),k.setEnterable(S.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var S=this._tooltipModel,R=S.get("triggerOn");o.register("itemTooltip",this._api,c(function(B,k,P){R!=="none"&&(R.indexOf(B)>=0?this._tryShow(k,P):B==="leave"&&this._hide(P))},this))},_keepShow:function(){var S=this._tooltipModel,R=this._ecModel,B=this._api;if(this._lastX!=null&&this._lastY!=null&&S.get("triggerOn")!=="none"){var k=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!B.isDisposed()&&k.manuallyShowTip(S,R,B,{x:k._lastX,y:k._lastY})})}},manuallyShowTip:function(S,R,B,k){if(!(k.from===this.uid||O.node)){var P=g(k,B);this._ticket="";var D=k.dataByCoordSys;if(k.tooltip&&k.x!=null&&k.y!=null){var A=i;A.position=[k.x,k.y],A.update(),A.tooltip=k.tooltip,this._tryShow({offsetX:k.x,offsetY:k.y,target:A},P)}else if(D)this._tryShow({offsetX:k.x,offsetY:k.y,position:k.position,dataByCoordSys:k.dataByCoordSys,tooltipOption:k.tooltipOption},P);else if(k.seriesIndex!=null){if(this._manuallyAxisShowTip(S,R,B,k))return;var N=f(k,R),I=N.point[0],G=N.point[1];I!=null&&G!=null&&this._tryShow({offsetX:I,offsetY:G,position:k.position,target:N.el},P)}else k.x!=null&&k.y!=null&&(B.dispatchAction({type:"updateAxisPointer",x:k.x,y:k.y}),this._tryShow({offsetX:k.x,offsetY:k.y,position:k.position,target:B.getZr().findHover(k.x,k.y).target},P))}},manuallyHideTip:function(S,R,B,k){var P=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&P.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,k.from!==this.uid&&this._hide(g(k,B))},_manuallyAxisShowTip:function(G,R,B,k){var P=k.seriesIndex,D=k.dataIndex,A=R.getComponent("axisPointer").coordSysAxesInfo;if(!(P==null||D==null||A==null)){var N=R.getSeriesByIndex(P);if(N){var I=N.getData(),G=u([I.getItemModel(D),N,(N.coordinateSystem||{}).model,G]);if(G.get("trigger")==="axis")return B.dispatchAction({type:"updateAxisPointer",seriesIndex:P,dataIndex:D,position:k.position}),!0}}},_tryShow:function(S,R){var B=S.target,k=this._tooltipModel;if(k){this._lastX=S.offsetX,this._lastY=S.offsetY;var P=S.dataByCoordSys;P&&P.length?this._showAxisTooltip(P,S):B&&B.dataIndex!=null?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(S,B,R)):B&&B.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(S,B,R)):(this._lastDataByCoordSys=null,this._hide(R))}},_showOrMove:function(S,R){var B=S.get("showDelay");R=F.bind(R,this),clearTimeout(this._showTimout),B>0?this._showTimout=setTimeout(R,B):R()},_showAxisTooltip:function(S,R){var B=this._ecModel,k=this._tooltipModel,P=[R.offsetX,R.offsetY],D=[],A=[],N=u([R.tooltipOption,k]),I=this._renderMode,G=this._newLine,W={};x(S,function(H){x(H.dataByAxis,function(U){var V=B.getComponent(U.axisDim+"Axis",U.axisIndex),Y=U.value,$=[];if(!(!V||Y==null)){var K=l.getValueLabel(Y,V.axis,B,U.seriesDataIndices,U.valueLabelOpt);F.each(U.seriesDataIndices,function(Q){var et=B.getSeriesByIndex(Q.seriesIndex),nt=Q.dataIndexInside,st=et&&et.getDataParams(nt);if(st.axisDim=U.axisDim,st.axisIndex=U.axisIndex,st.axisType=U.axisType,st.axisId=U.axisId,st.axisValue=h.getAxisRawValue(V.axis,Y),st.axisValueLabel=K,st){A.push(st);var ut=et.formatTooltip(nt,!0,null,I),rt;if(F.isObject(ut)){rt=ut.html;var ht=ut.markers;F.merge(W,ht)}else rt=ut;$.push(rt)}});var J=K;I!=="html"?D.push($.join(G)):D.push((J?L.encodeHTML(J)+G:"")+$.join(G))}})},this),D.reverse(),D=D.join(this._newLine+this._newLine);var Z=R.position;this._showOrMove(N,function(){this._updateContentNotChangedOnAxis(S)?this._updatePosition(N,Z,P[0],P[1],this._tooltipContent,A):this._showTooltipContent(N,D,A,Math.random(),P[0],P[1],Z,void 0,W)})},_showSeriesItemTooltip:function(S,R,B){var k=this._ecModel,P=R.seriesIndex,D=k.getSeriesByIndex(P),A=R.dataModel||D,N=R.dataIndex,I=R.dataType,G=A.getData(I),W=u([G.getItemModel(N),A,D&&(D.coordinateSystem||{}).model,this._tooltipModel]),Z=W.get("trigger");if(!(Z!=null&&Z!=="item")){var H=A.getDataParams(N,I),U=A.formatTooltip(N,!1,I,this._renderMode),V,Y;F.isObject(U)?(V=U.html,Y=U.markers):(V=U,Y=null);var $="item_"+A.name+"_"+N;this._showOrMove(W,function(){this._showTooltipContent(W,V,H,$,S.offsetX,S.offsetY,S.position,S.target,Y)}),B({type:"showTip",dataIndexInside:N,dataIndex:G.getRawIndex(N),seriesIndex:P,from:this.uid})}},_showComponentItemTooltip:function(S,R,B){var k=R.tooltip;if(typeof k=="string"){var P=k;k={content:P,formatter:P}}var D=new m(k,this._tooltipModel,this._ecModel),A=D.get("content"),N=Math.random();this._showOrMove(D,function(){this._showTooltipContent(D,A,D.get("formatterParams")||{},N,S.offsetX,S.offsetY,S.position,R)}),B({type:"showTip",from:this.uid})},_showTooltipContent:function(S,R,B,k,P,D,A,N,I){if(this._ticket="",!(!S.get("showContent")||!S.get("show"))){var G=this._tooltipContent,W=S.get("formatter");A=A||S.get("position");var Z=R;if(W&&typeof W=="string")Z=L.formatTpl(W,B,!0);else if(typeof W=="function"){var H=c(function(U,V){U===this._ticket&&(G.setContent(V,I,S),this._updatePosition(S,A,P,D,G,B,N))},this);this._ticket=k,Z=W(B,k,H)}G.setContent(Z,I,S),G.show(S),this._updatePosition(S,A,P,D,G,B,N)}},_updatePosition:function(S,R,B,k,P,D,A){var N=this._api.getWidth(),I=this._api.getHeight();R=R||S.get("position");var G=P.getSize(),W=S.get("align"),Z=S.get("verticalAlign"),H=A&&A.getBoundingRect().clone();if(A&&H.applyTransform(A.transform),typeof R=="function"&&(R=R([B,k],D,P.el,H,{viewSize:[N,I],contentSize:G.slice()})),F.isArray(R))B=a(R[0],N),k=a(R[1],I);else if(F.isObject(R)){R.width=G[0],R.height=G[1];var U=v.getLayoutRect(R,{width:N,height:I});B=U.x,k=U.y,W=null,Z=null}else if(typeof R=="string"&&A){var V=p(R,H,G);B=V[0],k=V[1]}else{var V=d(B,k,P,N,I,W?null:20,Z?null:20);B=V[0],k=V[1]}if(W&&(B-=w(W)?G[0]/2:W==="right"?G[0]:0),Z&&(k-=w(Z)?G[1]/2:Z==="bottom"?G[1]:0),S.get("confine")){var V=y(B,k,P,N,I);B=V[0],k=V[1]}P.moveTo(B,k)},_updateContentNotChangedOnAxis:function(S){var R=this._lastDataByCoordSys,B=!!R&&R.length===S.length;return B&&x(R,function(k,P){var D=k.dataByAxis||{},A=S[P]||{},N=A.dataByAxis||[];B&=D.length===N.length,B&&x(D,function(I,G){var W=N[G]||{},Z=I.seriesDataIndices||[],H=W.seriesDataIndices||[];B&=I.value===W.value&&I.axisType===W.axisType&&I.axisId===W.axisId&&Z.length===H.length,B&&x(Z,function(U,V){var Y=H[V];B&=U.seriesIndex===Y.seriesIndex&&U.dataIndex===Y.dataIndex})})}),this._lastDataByCoordSys=S,!!B},_hide:function(S){this._lastDataByCoordSys=null,S({type:"hideTip",from:this.uid})},dispose:function(S,R){O.node||(this._tooltipContent.dispose(),o.unregister("itemTooltip",R))}});function u(S){for(var R=S.pop();S.length;){var B=S.pop();B&&(m.isInstance(B)&&(B=B.get("tooltip",!0)),typeof B=="string"&&(B={formatter:B}),R=new m(B,R,R.ecModel))}return R}function g(S,R){return S.dispatchAction||F.bind(R.dispatchAction,R)}function d(S,R,B,k,P,D,A){var N=B.getOuterSize(),I=N.width,G=N.height;return D!=null&&(S+I+D>k?S-=I+D:S+=D),A!=null&&(R+G+A>P?R-=G+A:R+=A),[S,R]}function y(S,R,B,k,P){var D=B.getOuterSize(),A=D.width,N=D.height;return S=Math.min(S+A,k)-A,R=Math.min(R+N,P)-N,S=Math.max(S,0),R=Math.max(R,0),[S,R]}function p(S,R,B){var k=B[0],P=B[1],D=5,A=0,N=0,I=R.width,G=R.height;switch(S){case"inside":A=R.x+I/2-k/2,N=R.y+G/2-P/2;break;case"top":A=R.x+I/2-k/2,N=R.y-P-D;break;case"bottom":A=R.x+I/2-k/2,N=R.y+G+D;break;case"left":A=R.x-k-D,N=R.y+G/2-P/2;break;case"right":A=R.x+I+D,N=R.y+G/2-P/2}return[A,N]}function w(S){return S==="center"||S==="middle"}X.exports=n},570846:function(X,z,e){e(623004),e(910875)},623004:function(X,z,e){var E=e(3440),F=e(964144);e(715421),e(848545),e(279727),e(62684),e(455418),E.registerPreprocessor(F)},910875:function(X,z,e){var E=e(3440),F=e(964144);e(715421),e(848545),e(400457),e(659930),e(455418),E.registerPreprocessor(F)},279727:function(X,z,e){var E=e(131879),F=e(617886),O=e(748354),M=[20,140],b=F.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(C,f){b.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(v){v.mappingMethod="linear",v.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){b.superApply(this,"resetItemSize",arguments);var C=this.itemSize;this._orient==="horizontal"&&C.reverse(),(C[0]==null||isNaN(C[0]))&&(C[0]=M[0]),(C[1]==null||isNaN(C[1]))&&(C[1]=M[1])},_resetRange:function(){var C=this.getExtent(),f=this.option.range;!f||f.auto?(C.auto=1,this.option.range=C):E.isArray(f)&&(f[0]>f[1]&&f.reverse(),f[0]=Math.max(f[0],C[0]),f[1]=Math.min(f[1],C[1]))},completeVisualOption:function(){F.prototype.completeVisualOption.apply(this,arguments),E.each(this.stateList,function(C){var f=this.option.controller[C].symbolSize;f&&f[0]!==f[1]&&(f[0]=0)},this)},setSelected:function(C){this.option.range=C.slice(),this._resetRange()},getSelected:function(){var C=this.getExtent(),f=O.asc((this.get("range")||[]).slice());return f[0]>C[1]&&(f[0]=C[1]),f[1]>C[1]&&(f[1]=C[1]),f[0]<C[0]&&(f[0]=C[0]),f[1]<C[0]&&(f[1]=C[0]),f},getValueState:function(C){var f=this.option.range,v=this.getExtent();return(f[0]<=v[0]||f[0]<=C)&&(f[1]>=v[1]||C<=f[1])?"inRange":"outOfRange"},findTargetDataIndices:function(C){var f=[];return this.eachTargetSeries(function(v){var m=[],o=v.getData();o.each(this.getDataDimension(o),function(h,l){C[0]<=h&&h<=C[1]&&m.push(l)},this),f.push({seriesId:v.id,dataIndex:m})},this),f},getVisualMeta:function(C){var f=L(this,"outOfRange",this.getExtent()),v=L(this,"inRange",this.option.range.slice()),m=[];function o(a,i){m.push({value:a,color:C(a,i)})}for(var h=0,l=0,r=v.length,s=f.length;l<s&&(!v.length||f[l]<=v[0]);l++)f[l]<v[h]&&o(f[l],"outOfRange");for(var c=1;h<r;h++,c=0)c&&m.length&&o(v[h],"outOfRange"),o(v[h],"inRange");for(var c=1;l<s;l++)(!v.length||v[v.length-1]<f[l])&&(c&&(m.length&&o(m[m.length-1].value,"outOfRange"),c=0),o(f[l],"outOfRange"));var x=m.length;return{stops:m,outerColors:[x?m[0].color:"transparent",x?m[x-1].color:"transparent"]}}});function L(C,f,v){if(v[0]===v[1])return v.slice();for(var m=200,o=(v[1]-v[0])/m,h=v[0],l=[],r=0;r<=m&&h<v[1];r++)l.push(h),h+=o;return l.push(v[1]),l}var T=b;X.exports=T},62684:function(X,z,e){var E=e(131879),F=e(808691),O=e(519756),M=e(317320),b=e(248070),L=e(748354),T=e(438289),C=e(906690),f=e(835454),v=L.linearMap,m=E.each,o=Math.min,h=Math.max,l=12,r=6,s=M.extend({type:"visualMap.continuous",init:function(){s.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(d,y,p,w){(!w||w.type!=="selectDataRange"||w.from!==this.uid)&&this._buildView()},_buildView:function(){this.group.removeAll();var d=this.visualMapModel,y=this.group;this._orient=d.get("orient"),this._useHandle=d.get("calculable"),this._resetInterval(),this._renderBar(y);var p=d.get("text");this._renderEndsText(y,p,0),this._renderEndsText(y,p,1),this._updateView(!0),this.renderBackground(y),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(y)},_renderEndsText:function(d,y,p){if(y){var w=y[1-p];w=w!=null?w+"":"";var S=this.visualMapModel,R=S.get("textGap"),B=S.itemSize,k=this._shapes.barGroup,P=this._applyTransform([B[0]/2,p===0?-R:B[1]+R],k),D=this._applyTransform(p===0?"bottom":"top",k),A=this._orient,N=this.visualMapModel.textStyleModel;this.group.add(new b.Text({style:{x:P[0],y:P[1],textVerticalAlign:A==="horizontal"?"middle":D,textAlign:A==="horizontal"?D:"center",text:w,textFont:N.getFont(),textFill:N.getTextColor()}}))}},_renderBar:function(d){var y=this.visualMapModel,p=this._shapes,w=y.itemSize,S=this._orient,R=this._useHandle,B=C.getItemAlign(y,this.api,w),k=p.barGroup=this._createBarGroup(B);k.add(p.outOfRange=c()),k.add(p.inRange=c(null,R?u(this._orient):null,E.bind(this._dragHandle,this,"all",!1),E.bind(this._dragHandle,this,"all",!0)));var P=y.textStyleModel.getTextRect("\u56FD"),D=h(P.width,P.height);R&&(p.handleThumbs=[],p.handleLabels=[],p.handleLabelPoints=[],this._createHandle(k,0,w,D,S,B),this._createHandle(k,1,w,D,S,B)),this._createIndicator(k,w,D,S),d.add(k)},_createHandle:function(d,y,p,w,S){var R=E.bind(this._dragHandle,this,y,!1),B=E.bind(this._dragHandle,this,y,!0),k=c(x(y,w),u(this._orient),R,B);k.position[0]=p[0],d.add(k);var P=this.visualMapModel.textStyleModel,D=new b.Text({draggable:!0,drift:R,onmousemove:function(I){O.stop(I.event)},ondragend:B,style:{x:0,y:0,text:"",textFont:P.getFont(),textFill:P.getTextColor()}});this.group.add(D);var A=[S==="horizontal"?w/2:w*1.5,S==="horizontal"?y===0?-(w*1.5):w*1.5:y===0?-w/2:w/2],N=this._shapes;N.handleThumbs[y]=k,N.handleLabelPoints[y]=A,N.handleLabels[y]=D},_createIndicator:function(d,y,p,w){var S=c([[0,0]],"move");S.position[0]=y[0],S.attr({invisible:!0,silent:!0}),d.add(S);var R=this.visualMapModel.textStyleModel,B=new b.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:R.getFont(),textFill:R.getTextColor()}});this.group.add(B);var k=[w==="horizontal"?p/2:r+3,0],P=this._shapes;P.indicator=S,P.indicatorLabel=B,P.indicatorLabelPoint=k},_dragHandle:function(d,y,p,w){if(this._useHandle){if(this._dragging=!y,!y){var S=this._applyTransform([p,w],this._shapes.barGroup,!0);this._updateInterval(d,S[1]),this._updateView()}y===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),y?!this._hovering&&this._clearHoverLinkToSeries():n(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[d],!1)}},_resetInterval:function(){var d=this.visualMapModel,y=this._dataInterval=d.getSelected(),p=d.getExtent(),w=[0,d.itemSize[1]];this._handleEnds=[v(y[0],p,w,!0),v(y[1],p,w,!0)]},_updateInterval:function(d,y){y=y||0;var p=this.visualMapModel,w=this._handleEnds,S=[0,p.itemSize[1]];T(y,w,S,d,0);var R=p.getExtent();this._dataInterval=[v(w[0],S,R,!0),v(w[1],S,R,!0)]},_updateView:function(d){var y=this.visualMapModel,p=y.getExtent(),w=this._shapes,S=[0,y.itemSize[1]],R=d?S:this._handleEnds,B=this._createBarVisual(this._dataInterval,p,R,"inRange"),k=this._createBarVisual(p,p,S,"outOfRange");w.inRange.setStyle({fill:B.barColor,opacity:B.opacity}).setShape("points",B.barPoints),w.outOfRange.setStyle({fill:k.barColor,opacity:k.opacity}).setShape("points",k.barPoints),this._updateHandle(R,B)},_createBarVisual:function(d,y,p,w){var S={forceState:w,convertOpacityToAlpha:!0},R=this._makeColorGradient(d,S),B=[this.getControllerVisual(d[0],"symbolSize",S),this.getControllerVisual(d[1],"symbolSize",S)],k=this._createBarPoints(p,B);return{barColor:new F(0,0,0,1,R),barPoints:k,handlesColor:[R[0].color,R[R.length-1].color]}},_makeColorGradient:function(d,y){var p=100,w=[],S=(d[1]-d[0])/p;w.push({color:this.getControllerVisual(d[0],"color",y),offset:0});for(var R=1;R<p;R++){var B=d[0]+S*R;if(B>d[1])break;w.push({color:this.getControllerVisual(B,"color",y),offset:R/p})}return w.push({color:this.getControllerVisual(d[1],"color",y),offset:1}),w},_createBarPoints:function(d,y){var p=this.visualMapModel.itemSize;return[[p[0]-y[0],d[0]],[p[0],d[0]],[p[0],d[1]],[p[0]-y[1],d[1]]]},_createBarGroup:function(d){var y=this._orient,p=this.visualMapModel.get("inverse");return new b.Group(y==="horizontal"&&!p?{scale:d==="bottom"?[1,1]:[-1,1],rotation:Math.PI/2}:y==="horizontal"&&p?{scale:d==="bottom"?[-1,1]:[1,1],rotation:-Math.PI/2}:y==="vertical"&&!p?{scale:d==="left"?[1,-1]:[-1,-1]}:{scale:d==="left"?[1,1]:[-1,1]})},_updateHandle:function(d,y){if(this._useHandle){var p=this._shapes,w=this.visualMapModel,S=p.handleThumbs,R=p.handleLabels;m([0,1],function(B){var k=S[B];k.setStyle("fill",y.handlesColor[B]),k.position[1]=d[B];var P=b.applyTransform(p.handleLabelPoints[B],b.getTransform(k,this.group));R[B].setStyle({x:P[0],y:P[1],text:w.formatValueText(this._dataInterval[B]),textVerticalAlign:"middle",textAlign:this._applyTransform(this._orient==="horizontal"?B===0?"bottom":"top":"left",p.barGroup)})},this)}},_showIndicator:function(d,y,p,w){var S=this.visualMapModel,R=S.getExtent(),B=S.itemSize,k=[0,B[1]],P=v(d,R,k,!0),D=this._shapes,A=D.indicator;if(A){A.position[1]=P,A.attr("invisible",!1),A.setShape("points",a(!!p,w,P,B[1]));var N={convertOpacityToAlpha:!0},I=this.getControllerVisual(d,"color",N);A.setStyle("fill",I);var G=b.applyTransform(D.indicatorLabelPoint,b.getTransform(A,this.group)),W=D.indicatorLabel;W.attr("invisible",!1);var Z=this._applyTransform("left",D.barGroup),H=this._orient;W.setStyle({text:(p||"")+S.formatValueText(y),textVerticalAlign:H==="horizontal"?Z:"middle",textAlign:H==="horizontal"?"center":Z,x:G[0],y:G[1]})}},_enableHoverLinkToSeries:function(){var d=this;this._shapes.barGroup.on("mousemove",function(y){if(d._hovering=!0,!d._dragging){var p=d.visualMapModel.itemSize,w=d._applyTransform([y.offsetX,y.offsetY],d._shapes.barGroup,!0,!0);w[1]=o(h(0,w[1]),p[1]),d._doHoverLinkToSeries(w[1],0<=w[0]&&w[0]<=p[0])}}).on("mouseout",function(){d._hovering=!1,!d._dragging&&d._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var d=this.api.getZr();this.visualMapModel.option.hoverLink?(d.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),d.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(d,y){var p=this.visualMapModel,w=p.itemSize;if(p.option.hoverLink){var S=[0,w[1]],R=p.getExtent();d=o(h(S[0],d),S[1]);var B=i(p,R,S),k=[d-B,d+B],P=v(d,S,R,!0),D=[v(k[0],S,R,!0),v(k[1],S,R,!0)];k[0]<S[0]&&(D[0]=-1/0),k[1]>S[1]&&(D[1]=1/0),y&&(D[0]===-1/0?this._showIndicator(P,D[1],"< ",B):D[1]===1/0?this._showIndicator(P,D[0],"> ",B):this._showIndicator(P,P,"\u2248 ",B));var A=this._hoverLinkDataIndices,N=[];(y||n(p))&&(N=this._hoverLinkDataIndices=p.findTargetDataIndices(D));var I=f.compressBatches(A,N);this._dispatchHighDown("downplay",C.makeHighDownBatch(I[0],p)),this._dispatchHighDown("highlight",C.makeHighDownBatch(I[1],p))}},_hoverLinkFromSeriesMouseOver:function(d){var y=d.target,p=this.visualMapModel;if(!(!y||y.dataIndex==null)){var w=this.ecModel.getSeriesByIndex(y.seriesIndex);if(p.isTargetSeries(w)){var S=w.getData(y.dataType),R=S.get(p.getDataDimension(S),y.dataIndex,!0);isNaN(R)||this._showIndicator(R,R)}}},_hideIndicator:function(){var d=this._shapes;d.indicator&&d.indicator.attr("invisible",!0),d.indicatorLabel&&d.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var d=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",C.makeHighDownBatch(d,this.visualMapModel)),d.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var d=this.api.getZr();d.off("mouseover",this._hoverLinkFromSeriesMouseOver),d.off("mouseout",this._hideIndicator)},_applyTransform:function(d,y,p,w){var S=b.getTransform(y,w?null:this.group);return b[E.isArray(d)?"applyTransform":"transformDirection"](d,S,p)},_dispatchHighDown:function(d,y){y&&y.length&&this.api.dispatchAction({type:d,batch:y})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function c(d,y,p,w){return new b.Polygon({shape:{points:d},draggable:!!p,cursor:y,drift:p,onmousemove:function(S){O.stop(S.event)},ondragend:w})}function x(d,y){return d===0?[[0,0],[y,0],[y,-y]]:[[0,0],[y,0],[y,y]]}function a(d,y,p,w){return d?[[0,-o(y,h(p,0))],[r,0],[0,o(y,h(w-p,0))]]:[[0,0],[5,-5],[5,5]]}function i(d,y,p){var w=l/2,S=d.get("hoverLinkDataSize");return S&&(w=v(S,y,p,!0)/2),w}function n(d){var y=d.get("hoverLinkOnHandle");return!!(y??d.get("realtime"))}function u(d){return d==="vertical"?"ns-resize":"ew-resize"}var g=s;X.exports=g},400457:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(617886),b=e(658796),L=e(819508),T=e(748354),C=T.reformIntervals,f=M.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(h,l){f.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var r=this._mode=this._determineMode();v[this._mode].call(this),this._resetSelected(h,l);var s=this.option.categories;this.resetVisual(function(c,x){r==="categories"?(c.mappingMethod="category",c.categories=O.clone(s)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=O.map(this._pieceList,function(i){var i=O.clone(i);return x!=="inRange"&&(i.visual=null),i}))})},completeVisualOption:function(){var h=this.option,l={},r=b.listVisualTypes(),s=this.isCategory();O.each(h.pieces,function(x){O.each(r,function(a){x.hasOwnProperty(a)&&(l[a]=1)})}),O.each(l,function(x,a){var i=0;O.each(this.stateList,function(n){i|=c(h,n,a)||c(h.target,n,a)},this),!i&&O.each(this.stateList,function(n){(h[n]||(h[n]={}))[a]=L.get(a,n==="inRange"?"active":"inactive",s)})},this);function c(x,a,i){return x&&x[a]&&(O.isObject(x[a])?x[a].hasOwnProperty(i):x[a]===i)}M.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(h,l){var r=this.option,s=this._pieceList,c=(l?r:h).selected||{};if(r.selected=c,O.each(s,function(a,i){var n=this.getSelectedMapKey(a);c.hasOwnProperty(n)||(c[n]=!0)},this),r.selectedMode==="single"){var x=!1;O.each(s,function(a,i){var n=this.getSelectedMapKey(a);c[n]&&(x?c[n]=!1:x=!0)},this)}},getSelectedMapKey:function(h){return this._mode==="categories"?h.value+"":h.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var h=this.option;return h.pieces&&h.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(h){this.option.selected=O.clone(h)},getValueState:function(h){var l=b.findPieceIndex(h,this._pieceList);return l!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[l])]?"inRange":"outOfRange"},findTargetDataIndices:function(h){var l=[];return this.eachTargetSeries(function(r){var s=[],c=r.getData();c.each(this.getDataDimension(c),function(x,a){var i=b.findPieceIndex(x,this._pieceList);i===h&&s.push(a)},this),l.push({seriesId:r.id,dataIndex:s})},this),l},getRepresentValue:function(h){var l;if(this.isCategory())l=h.value;else if(h.value!=null)l=h.value;else{var r=h.interval||[];l=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return l},getVisualMeta:function(h){if(this.isCategory())return;var l=[],r=[],s=this;function c(n,u){var g=s.getRepresentValue({interval:n});u||(u=s.getValueState(g));var d=h(g,u);n[0]===-1/0?r[0]=d:n[1]===1/0?r[1]=d:l.push({value:n[0],color:d},{value:n[1],color:d})}var x=this._pieceList.slice();if(!x.length)x.push({interval:[-1/0,1/0]});else{var a=x[0].interval[0];a!==-1/0&&x.unshift({interval:[-1/0,a]}),a=x[x.length-1].interval[1],a!==1/0&&x.push({interval:[a,1/0]})}var i=-1/0;return O.each(x,function(n){var u=n.interval;u&&(u[0]>i&&c([i,u[0]],"outOfRange"),c(u.slice()),i=u[1])},this),{stops:l,outerColors:r}}}),v={splitNumber:function(){var h=this.option,l=this._pieceList,r=Math.min(h.precision,20),s=this.getExtent(),c=h.splitNumber;c=Math.max(parseInt(c,10),1),h.splitNumber=c;for(var x=(s[1]-s[0])/c;+x.toFixed(r)!==x&&r<5;)r++;h.precision=r,x=+x.toFixed(r),h.minOpen&&l.push({interval:[-1/0,s[0]],close:[0,0]});for(var a=0,i=s[0];a<c;i+=x,a++){var n=a===c-1?s[1]:i+x;l.push({interval:[i,n],close:[1,1]})}h.maxOpen&&l.push({interval:[s[1],1/0],close:[0,0]}),C(l),O.each(l,function(u,g){u.index=g,u.text=this.formatValueText(u.interval)},this)},categories:function(){var h=this.option;O.each(h.categories,function(l){this._pieceList.push({text:this.formatValueText(l,!0),value:l})},this),m(h,this._pieceList)},pieces:function(){var h=this.option,l=this._pieceList;O.each(h.pieces,function(r,s){O.isObject(r)||(r={value:r});var c={text:"",index:s};if(r.label!=null&&(c.text=r.label),r.hasOwnProperty("value")){var x=c.value=r.value;c.interval=[x,x],c.close=[1,1]}else{for(var a=c.interval=[],i=c.close=[0,0],n=[1,0,1],u=[-1/0,1/0],g=[],d=0;d<2;d++){for(var y=[["gte","gt","min"],["lte","lt","max"]][d],p=0;p<3&&a[d]==null;p++)a[d]=r[y[p]],i[d]=n[p],g[d]=p===2;a[d]==null&&(a[d]=u[d])}g[0]&&a[1]===1/0&&(i[0]=0),g[1]&&a[0]===-1/0&&(i[1]=0),a[0]===a[1]&&i[0]&&i[1]&&(c.value=a[0])}c.visual=b.retrieveVisuals(r),l.push(c)},this),m(h,l),C(l),O.each(l,function(r){var s=r.close,c=[["<","\u2264"][s[1]],[">","\u2265"][s[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,c)},this)}};function m(h,l){var r=h.inverse;(h.orient==="vertical"?!r:r)&&l.reverse()}var o=f;X.exports=o},659930:function(X,z,e){var E=e(131879),F=e(317320),O=e(248070),M=e(435730),b=M.createSymbol,L=e(930871),T=e(906690),C=F.extend({type:"visualMap.piecewise",doRender:function(){var v=this.group;v.removeAll();var m=this.visualMapModel,o=m.get("textGap"),h=m.textStyleModel,l=h.getFont(),r=h.getTextColor(),s=this._getItemAlign(),c=m.itemSize,x=this._getViewData(),a=x.endsText,i=E.retrieve(m.get("showLabel",!0),!a);a&&this._renderEndsText(v,a[0],c,i,s),E.each(x.viewPieceList,n,this),a&&this._renderEndsText(v,a[1],c,i,s),L.box(m.get("orient"),v,m.get("itemGap")),this.renderBackground(v),this.positionGroup(v);function n(u){var g=u.piece,d=new O.Group;d.onclick=E.bind(this._onItemClick,this,g),this._enableHoverLink(d,u.indexInModelPieceList);var y=m.getRepresentValue(g);if(this._createItemSymbol(d,y,[0,0,c[0],c[1]]),i){var p=this.visualMapModel.getValueState(y);d.add(new O.Text({style:{x:s==="right"?-o:c[0]+o,y:c[1]/2,text:g.text,textVerticalAlign:"middle",textAlign:s,textFont:l,textFill:r,opacity:p==="outOfRange"?.5:1}}))}v.add(d)}},_enableHoverLink:function(v,m){v.on("mouseover",E.bind(o,this,"highlight")).on("mouseout",E.bind(o,this,"downplay"));function o(h){var l=this.visualMapModel;l.option.hoverLink&&this.api.dispatchAction({type:h,batch:T.makeHighDownBatch(l.findTargetDataIndices(m),l)})}},_getItemAlign:function(){var v=this.visualMapModel,m=v.option;if(m.orient==="vertical")return T.getItemAlign(v,this.api,v.itemSize);var o=m.align;return(!o||o==="auto")&&(o="left"),o},_renderEndsText:function(v,m,o,h,l){if(m){var r=new O.Group,s=this.visualMapModel.textStyleModel;r.add(new O.Text({style:{x:h?l==="right"?o[0]:0:o[0]/2,y:o[1]/2,textVerticalAlign:"middle",textAlign:h?l:"center",text:m,textFont:s.getFont(),textFill:s.getTextColor()}})),v.add(r)}},_getViewData:function(){var v=this.visualMapModel,m=E.map(v.getPieceList(),function(r,s){return{piece:r,indexInModelPieceList:s}}),o=v.get("text"),h=v.get("orient"),l=v.get("inverse");return(h==="horizontal"?l:!l)?m.reverse():o&&(o=o.slice().reverse()),{viewPieceList:m,endsText:o}},_createItemSymbol:function(v,m,o){v.add(b(this.getControllerVisual(m,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(m,"color")))},_onItemClick:function(v){var m=this.visualMapModel,o=m.option,h=E.clone(o.selected),l=m.getSelectedMapKey(v);o.selectedMode==="single"?(h[l]=!0,E.each(h,function(r,s){h[s]=s===l})):h[l]=!h[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:h})}}),f=C;X.exports=f},617886:function(X,z,e){var E=e(3440),F=e(131879),O=e(358020),M=e(819508),b=e(658796),L=e(236193),T=e(835454),C=e(748354),f=b.mapVisual,v=b.eachVisual,m=F.isArray,o=F.each,h=C.asc,l=C.linearMap,r=F.noop,s=E.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(x,a,i){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(x,i)},optionUpdated:function(x,a){var i=this.option;O.canvasSupported||(i.realtime=!1),!a&&L.replaceVisualOption(i,x,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(x){var a=this.stateList;x=F.bind(x,this),this.controllerVisuals=L.createVisualMappings(this.option.controller,a,x),this.targetVisuals=L.createVisualMappings(this.option.target,a,x)},getTargetSeriesIndices:function(){var x=this.option.seriesIndex,a=[];return x==null||x==="all"?this.ecModel.eachSeries(function(i,n){a.push(n)}):a=T.normalizeToArray(x),a},eachTargetSeries:function(x,a){F.each(this.getTargetSeriesIndices(),function(i){x.call(a,this.ecModel.getSeriesByIndex(i))},this)},isTargetSeries:function(x){var a=!1;return this.eachTargetSeries(function(i){i===x&&(a=!0)}),a},formatValueText:function(x,a,i){var n=this.option,u=n.precision,g=this.dataBound,d=n.formatter,y,p;if(i=i||["<",">"],F.isArray(x)&&(x=x.slice(),y=!0),p=a?x:y?[w(x[0]),w(x[1])]:w(x),F.isString(d))return d.replace("{value}",y?p[0]:p).replace("{value2}",y?p[1]:p);if(F.isFunction(d))return y?d(x[0],x[1]):d(x);if(y)return x[0]===g[0]?i[0]+" "+p[1]:x[1]===g[1]?i[1]+" "+p[0]:p[0]+" - "+p[1];return p;function w(S){return S===g[0]?"min":S===g[1]?"max":(+S).toFixed(Math.min(u,20))}},resetExtent:function(){var x=this.option,a=h([x.min,x.max]);this._dataExtent=a},getDataDimension:function(x){var a=this.option.dimension,i=x.dimensions;if(!(a==null&&!i.length)){if(a!=null)return x.getDimension(a);for(var n=x.dimensions,u=n.length-1;u>=0;u--){var g=n[u],d=x.getDimensionInfo(g);if(!d.isCalculationCoord)return g}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var x=this.ecModel,a=this.option,i={inRange:a.inRange,outOfRange:a.outOfRange},n=a.target||(a.target={}),u=a.controller||(a.controller={});F.merge(n,i),F.merge(u,i);var g=this.isCategory();d.call(this,n),d.call(this,u),y.call(this,n,"inRange","outOfRange"),p.call(this,u);function d(w){m(a.color)&&!w.inRange&&(w.inRange={color:a.color.slice().reverse()}),w.inRange=w.inRange||{color:x.get("gradientColor")},o(this.stateList,function(S){var R=w[S];if(F.isString(R)){var B=M.get(R,"active",g);B?(w[S]={},w[S][R]=B):delete w[S]}},this)}function y(w,S,R){var B=w[S],k=w[R];B&&!k&&(k=w[R]={},o(B,function(P,D){if(b.isValidType(D)){var A=M.get(D,"inactive",g);A!=null&&(k[D]=A,D==="color"&&!k.hasOwnProperty("opacity")&&!k.hasOwnProperty("colorAlpha")&&(k.opacity=[0,0]))}}))}function p(w){var S=(w.inRange||{}).symbol||(w.outOfRange||{}).symbol,R=(w.inRange||{}).symbolSize||(w.outOfRange||{}).symbolSize,B=this.get("inactiveColor");o(this.stateList,function(k){var P=this.itemSize,D=w[k];D||(D=w[k]={color:g?B:[B]}),D.symbol==null&&(D.symbol=S&&F.clone(S)||(g?"roundRect":["roundRect"])),D.symbolSize==null&&(D.symbolSize=R&&F.clone(R)||(g?P[0]:[P[0],P[0]])),D.symbol=f(D.symbol,function(I){return I==="none"||I==="square"?"roundRect":I});var A=D.symbolSize;if(A!=null){var N=-1/0;v(A,function(I){I>N&&(N=I)}),D.symbolSize=f(A,function(I){return l(I,[0,N],[0,P[0]],!0)})}},this)}},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:r,getValueState:r,getVisualMeta:r}),c=s;X.exports=c},317320:function(X,z,e){var E=e(3440),F=e(131879),O=e(248070),M=e(317795),b=e(930871),L=e(658796),T=E.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(C,f){this.ecModel=C,this.api=f,this.visualMapModel},render:function(C,f,v,m){if(this.visualMapModel=C,C.get("show")===!1){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(C){var f=this.visualMapModel,v=M.normalizeCssArray(f.get("padding")||0),m=C.getBoundingRect();C.add(new O.Rect({z2:-1,silent:!0,shape:{x:m.x-v[3],y:m.y-v[0],width:m.width+v[3]+v[1],height:m.height+v[0]+v[2]},style:{fill:f.get("backgroundColor"),stroke:f.get("borderColor"),lineWidth:f.get("borderWidth")}}))},getControllerVisual:function(C,f,v){v=v||{};var m=v.forceState,o=this.visualMapModel,h={};if(f==="symbol"&&(h.symbol=o.get("itemSymbol")),f==="color"){var l=o.get("contentColor");h.color=l}function r(a){return h[a]}function s(a,i){h[a]=i}var c=o.controllerVisuals[m||o.getValueState(C)],x=L.prepareVisualTypes(c);return F.each(x,function(a){var i=c[a];v.convertOpacityToAlpha&&a==="opacity"&&(a="colorAlpha",i=c.__alphaForOpacity),L.dependsOn(a,f)&&i&&i.applyVisual(C,r,s)}),h[f]},positionGroup:function(C){var f=this.visualMapModel,v=this.api;b.positionElement(C,f.getBoxLayoutParams(),{width:v.getWidth(),height:v.getHeight()})},doRender:F.noop});X.exports=T},906690:function(X,z,e){var E=e(131879),F=e(930871),O=F.getLayoutRect;function M(L,T,C){var f=L.option,v=f.align;if(v!=null&&v!=="auto")return v;for(var m={width:T.getWidth(),height:T.getHeight()},o=f.orient==="horizontal"?1:0,h=[["left","right","width"],["top","bottom","height"]],l=h[o],r=[0,null,10],s={},c=0;c<3;c++)s[h[1-o][c]]=r[c],s[l[c]]=c===2?C[0]:f[l[c]];var x=[["x","width",3],["y","height",0]][o],a=O(s,m,f.padding);return l[(a.margin[x[2]]||0)+a[x[0]]+a[x[1]]*.5<m[x[1]]*.5?0:1]}function b(L,T){return E.each(L||[],function(C){C.dataIndex!=null&&(C.dataIndexInside=C.dataIndex,C.dataIndex=null),C.highlightKey="visualMap"+(T?T.componentIndex:"")}),L}z.getItemAlign=M,z.makeHighDownBatch=b},964144:function(X,z,e){var E=e(131879),F=E.each;function O(b){var L=b&&b.visualMap;E.isArray(L)||(L=L?[L]:[]),F(L,function(T){if(T){M(T,"splitList")&&!M(T,"pieces")&&(T.pieces=T.splitList,delete T.splitList);var C=T.pieces;C&&E.isArray(C)&&F(C,function(f){E.isObject(f)&&(M(f,"start")&&!M(f,"min")&&(f.min=f.start),M(f,"end")&&!M(f,"max")&&(f.max=f.end))})}})}function M(b,L){return b&&b.hasOwnProperty&&b.hasOwnProperty(L)}X.exports=O},715421:function(X,z,e){var E=e(360684);E.registerSubTypeDefaulter("visualMap",function(F){return!F.categories&&(!(F.pieces?F.pieces.length>0:F.splitNumber>0)||F.calculable)?"continuous":"piecewise"})},848545:function(X,z,e){var E=e(3440),F=e(131879),O=e(236193),M=e(658796),b=E.PRIORITY.VISUAL.COMPONENT;E.registerVisual(b,{createOnAllSeries:!0,reset:function(T,C){var f=[];return C.eachComponent("visualMap",function(v){var m=T.pipelineContext;!v.isTargetSeries(T)||m&&m.large||f.push(O.incrementalApplyVisual(v.stateList,v.targetVisuals,F.bind(v.getValueState,v),v.getDataDimension(T.getData())))}),f}}),E.registerVisual(b,{createOnAllSeries:!0,reset:function(T,C){var f=T.getData(),v=[];C.eachComponent("visualMap",function(m){if(m.isTargetSeries(T)){var o=m.getVisualMeta(F.bind(L,null,T,m))||{stops:[],outerColors:[]},h=m.getDataDimension(f),l=f.getDimensionInfo(h);l!=null&&(o.dimension=l.index,v.push(o))}}),T.getData().setVisual("visualMeta",v)}});function L(T,C,f,v){for(var m=C.targetVisuals[v],o=M.prepareVisualTypes(m),h={color:T.getData().getVisual("color")},l=0,r=o.length;l<r;l++){var s=o[l],c=m[s==="opacity"?"__alphaForOpacity":s];c&&c.applyVisual(f,x,a)}return h.color;function x(i){return h[i]}function a(i,n){h[i]=n}}},455418:function(X,z,e){var E=e(3440),F={type:"selectDataRange",event:"dataRangeSelected",update:"update"};E.registerAction(F,function(O,M){M.eachComponent({mainType:"visualMap",query:O},function(b){b.setSelected(O.selected)})})},550617:function(X,z,e){var E;typeof window<"u"?E=window.__DEV__:typeof e.g<"u"&&(E=e.g.__DEV__),typeof E>"u"&&(E=!0);var F=E;z.__DEV__=F},536492:function(X,z,e){var E=e(131879),F=E.each,O=E.map,M=e(748354),b=M.linearMap,L=M.getPixelPrecision,T=M.round,C=e(280047),f=C.createAxisTicks,v=C.createAxisLabels,m=C.calculateCategoryInterval,o=[0,1],h=function(c,x,a){this.dim=c,this.scale=x,this._extent=a||[0,0],this.inverse=!1,this.onBand=!1};h.prototype={constructor:h,contain:function(c){var x=this._extent,a=Math.min(x[0],x[1]),i=Math.max(x[0],x[1]);return c>=a&&c<=i},containData:function(c){return this.scale.contain(c)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(c){return L(c||this.scale.getExtent(),this._extent)},setExtent:function(c,x){var a=this._extent;a[0]=c,a[1]=x},dataToCoord:function(c,x){var a=this._extent,i=this.scale;return c=i.normalize(c),this.onBand&&i.type==="ordinal"&&(a=a.slice(),l(a,i.count())),b(c,o,a,x)},coordToData:function(c,x){var a=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(a=a.slice(),l(a,i.count()));var n=b(c,a,o,x);return this.scale.scale(n)},pointToData:function(c,x){},getTicksCoords:function(c){c=c||{};var x=c.tickModel||this.getTickModel(),a=f(this,x),i=a.ticks,n=O(i,function(g){return{coord:this.dataToCoord(g),tickValue:g}},this),u=x.get("alignWithLabel");return r(this,n,u,c.clamp),n},getMinorTicksCoords:function(){if(this.scale.type==="ordinal")return[];var c=this.model.getModel("minorTick"),x=c.get("splitNumber");x>0&&x<100||(x=5);var a=this.scale.getMinorTicks(x),i=O(a,function(n){return O(n,function(u){return{coord:this.dataToCoord(u),tickValue:u}},this)},this);return i},getViewLabels:function(){return v(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var c=this._extent,x=this.scale.getExtent(),a=x[1]-x[0]+(this.onBand?1:0);a===0&&(a=1);var i=Math.abs(c[1]-c[0]);return Math.abs(i)/a},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return m(this)}};function l(c,x){var a=c[1]-c[0],i=x,n=a/i/2;c[0]+=n,c[1]-=n}function r(c,x,a,i){var n=x.length;if(!c.onBand||a||!n)return;var u=c.getExtent(),g,d;if(n===1)x[0].coord=u[0],g=x[1]={coord:u[0]};else{var y=x[n-1].tickValue-x[0].tickValue,p=(x[n-1].coord-x[0].coord)/y;F(x,function(B){B.coord-=p/2});var w=c.scale.getExtent();d=1+w[1]-x[n-1].tickValue,g={coord:x[n-1].coord+p*d},x.push(g)}var S=u[0]>u[1];R(x[0].coord,u[0])&&(i?x[0].coord=u[0]:x.shift()),i&&R(u[0],x[0].coord)&&x.unshift({coord:u[0]}),R(u[1],g.coord)&&(i?g.coord=u[1]:x.pop()),i&&R(g.coord,u[1])&&x.push({coord:u[1]});function R(B,k){return B=T(B),k=T(k),S?B>k:B<k}}var s=h;X.exports=s},665176:function(X,z,e){var E=e(131879),F=e(912072),O=e(343970),M=e(795946),b=e(451218),L=F.applyTransform;function T(){b.call(this)}E.mixin(T,b);function C(m){this.name=m,this.zoomLimit,b.call(this),this._roamTransformable=new T,this._rawTransformable=new T,this._center,this._zoom}C.prototype={constructor:C,type:"view",dimensions:["x","y"],setBoundingRect:function(m,o,h,l){return this._rect=new M(m,o,h,l),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(m,o,h,l){this.transformTo(m,o,h,l),this._viewRect=new M(m,o,h,l)},transformTo:function(m,o,h,l){var r=this.getBoundingRect(),s=this._rawTransformable;s.transform=r.calculateTransform(new M(m,o,h,l)),s.decomposeTransform(),this._updateTransform()},setCenter:function(m){m&&(this._center=m,this._updateCenterAndZoom())},setZoom:function(m){m=m||1;var o=this.zoomLimit;o&&(o.max!=null&&(m=Math.min(o.max,m)),o.min!=null&&(m=Math.max(o.min,m))),this._zoom=m,this._updateCenterAndZoom()},getDefaultCenter:function(){var m=this.getBoundingRect(),o=m.x+m.width/2,h=m.y+m.height/2;return[o,h]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var m=this._rawTransformable.getLocalTransform(),o=this._roamTransformable,h=this.getDefaultCenter(),l=this.getCenter(),r=this.getZoom();l=F.applyTransform([],l,m),h=F.applyTransform([],h,m),o.origin=l,o.position=[h[0]-l[0],h[1]-l[1]],o.scale=[r,r],this._updateTransform()},_updateTransform:function(){var m=this._roamTransformable,o=this._rawTransformable;o.parent=m,m.updateTransform(),o.updateTransform(),O.copy(this.transform||(this.transform=[]),o.transform||O.create()),this._rawTransform=o.getLocalTransform(),this.invTransform=this.invTransform||[],O.invert(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var m=this._roamTransformable.transform,o=this._rawTransformable;return{roamTransform:m?E.slice(m):O.create(),rawScale:E.slice(o.scale),rawPosition:E.slice(o.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var m=this.getBoundingRect().clone();return m.applyTransform(this.transform),m},dataToPoint:function(m,o,h){var l=o?this._rawTransform:this.transform;return h=h||[],l?L(h,m,l):F.copy(h,m)},pointToData:function(m){var o=this.invTransform;return o?L([],m,o):[m[0],m[1]]},convertToPixel:E.curry(f,"dataToPoint"),convertFromPixel:E.curry(f,"pointToData"),containPoint:function(m){return this.getViewRectAfterRoam().contain(m[0],m[1])}},E.mixin(C,b);function f(m,o,h,l){var r=h.seriesModel,s=r?r.coordinateSystem:null;return s===this?s[m](l):null}var v=C;X.exports=v},143655:function(X,z,e){var E=e(131879),F={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},O={};O.categoryAxis=E.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},F),O.valueAxis=E.merge({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},F),O.timeAxis=E.defaults({scale:!0,min:"dataMin",max:"dataMax"},O.valueAxis),O.logAxis=E.defaults({scale:!0,logBase:10},O.valueAxis);var M=O;X.exports=M},799538:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(892969),b=e(952740),L=e(341977),T=e(748354),C=e(919641),f=C.prepareLayoutBarSeries,v=C.makeColumnLayout,m=C.retrieveColumnLayout,o=e(795946);e(680377),e(213536);function h(d,y){var p=d.type,w=y.getMin(),S=y.getMax(),R=d.getExtent(),B,k,P;p==="ordinal"?B=y.getCategories().length:(k=y.get("boundaryGap"),O.isArray(k)||(k=[k||0,k||0]),typeof k[0]=="boolean"&&(k=[0,0]),k[0]=T.parsePercent(k[0],1),k[1]=T.parsePercent(k[1],1),P=R[1]-R[0]||Math.abs(R[0])),w==="dataMin"?w=R[0]:typeof w=="function"&&(w=w({min:R[0],max:R[1]})),S==="dataMax"?S=R[1]:typeof S=="function"&&(S=S({min:R[0],max:R[1]}));var D=w!=null,A=S!=null;w==null&&(w=p==="ordinal"?B?0:NaN:R[0]-k[0]*P),S==null&&(S=p==="ordinal"?B?B-1:NaN:R[1]+k[1]*P),(w==null||!isFinite(w))&&(w=NaN),(S==null||!isFinite(S))&&(S=NaN),d.setBlank(O.eqNaN(w)||O.eqNaN(S)||p==="ordinal"&&!d.getOrdinalMeta().categories.length),y.getNeedCrossZero()&&(w>0&&S>0&&!D&&(w=0),w<0&&S<0&&!A&&(S=0));var N=y.ecModel;if(N&&p==="time"){var I=f("bar",N),G;if(O.each(I,function(H){G|=H.getBaseAxis()===y.axis}),G){var W=v(I),Z=l(w,S,y,W);w=Z.min,S=Z.max}}return{extent:[w,S],fixMin:D,fixMax:A}}function l(d,y,p,w){var S=p.axis.getExtent(),R=S[1]-S[0],B=m(w,p.axis);if(B===void 0)return{min:d,max:y};var k=1/0;O.each(B,function(G){k=Math.min(G.offset,k)});var P=-1/0;O.each(B,function(G){P=Math.max(G.offset+G.width,P)}),k=Math.abs(k),P=Math.abs(P);var D=k+P,A=y-d,N=1-(k+P)/R,I=A/N-A;return y+=I*(P/D),d-=I*(k/D),{min:d,max:y}}function r(d,y){var p=h(d,y),w=p.extent,S=y.get("splitNumber");d.type==="log"&&(d.base=y.get("logBase"));var R=d.type;d.setExtent(w[0],w[1]),d.niceExtent({splitNumber:S,fixMin:p.fixMin,fixMax:p.fixMax,minInterval:R==="interval"||R==="time"?y.get("minInterval"):null,maxInterval:R==="interval"||R==="time"?y.get("maxInterval"):null});var B=y.get("interval");B!=null&&d.setInterval&&d.setInterval(B)}function s(d,y){if(y=y||d.get("type"),y)switch(y){case"category":return new M(d.getOrdinalMeta?d.getOrdinalMeta():d.getCategories(),[1/0,-1/0]);case"value":return new b;default:return(L.getClass(y)||b).create(d)}}function c(d){var y=d.scale.getExtent(),p=y[0],w=y[1];return!(p>0&&w>0||p<0&&w<0)}function x(d){var y=d.getLabelModel().get("formatter"),p=d.type==="category"?d.scale.getExtent()[0]:null;return typeof y=="string"?(y=function(w){return function(S){return S=d.scale.getLabel(S),w.replace("{value}",S??"")}}(y),y):typeof y=="function"?function(w,S){return p!=null&&(S=w-p),y(a(d,w),S)}:function(w){return d.scale.getLabel(w)}}function a(d,y){return d.type==="category"?d.scale.getLabel(y):y}function i(d){var y=d.model,p=d.scale;if(!(!y.get("axisLabel.show")||p.isBlank())){var w=d.type==="category",S,R,B=p.getExtent();w?R=p.count():(S=p.getTicks(),R=S.length);var k=d.getLabelModel(),P=x(d),D,A=1;R>40&&(A=Math.ceil(R/40));for(var N=0;N<R;N+=A){var I=S?S[N]:B[0]+N,G=P(I),W=k.getTextRect(G),Z=n(W,k.get("rotate")||0);D?D.union(Z):D=Z}return D}}function n(d,y){var p=y*Math.PI/180,w=d.plain(),S=w.width,R=w.height,B=S*Math.abs(Math.cos(p))+Math.abs(R*Math.sin(p)),k=S*Math.abs(Math.sin(p))+Math.abs(R*Math.cos(p)),P=new o(w.x,w.y,B,k);return P}function u(d){var y=d.get("interval");return y??"auto"}function g(d){return d.type==="category"&&u(d.getLabelModel())===0}z.getScaleExtent=h,z.niceScaleExtent=r,z.createScaleByModel=s,z.ifAxisCrossZero=c,z.makeLabelFormatter=x,z.getAxisRawValue=a,z.estimateLabelUnionRect=i,z.getOptionCategoryInterval=u,z.shouldShowAllLabels=g},142544:function(X,z,e){var E=e(131879),F={getMin:function(O){var M=this.option,b=!O&&M.rangeStart!=null?M.rangeStart:M.min;return this.axis&&b!=null&&b!=="dataMin"&&typeof b!="function"&&!E.eqNaN(b)&&(b=this.axis.scale.parse(b)),b},getMax:function(O){var M=this.option,b=!O&&M.rangeEnd!=null?M.rangeEnd:M.max;return this.axis&&b!=null&&b!=="dataMax"&&typeof b!="function"&&!E.eqNaN(b)&&(b=this.axis.scale.parse(b)),b},getNeedCrossZero:function(){var O=this.option;return O.rangeStart!=null||O.rangeEnd!=null?!1:!O.scale},getCoordSysModel:E.noop,setRange:function(O,M){this.option.rangeStart=O,this.option.rangeEnd=M},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};X.exports=F},973794:function(X,z,e){var E=e(131879),F=e(143655),O=e(360684),M=e(930871),b=M.getLayoutParams,L=M.mergeLayoutParam,T=e(584116),C=["value","category","time","log"];function f(v,m,o,h){E.each(C,function(l){m.extend({type:v+"Axis."+l,mergeDefaultAndTheme:function(r,s){var c=this.layoutMode,x=c?b(r):{},a=s.getTheme();E.merge(r,a.get(l+"Axis")),E.merge(r,this.getDefaultOption()),r.type=o(v,r),c&&L(r,x,c)},optionUpdated:function(){var r=this.option;r.type==="category"&&(this.__ordinalMeta=T.createByAxisModel(this))},getCategories:function(r){var s=this.option;if(s.type==="category")return r?s.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:E.mergeAll([{},F[l+"Axis"],h],!0)})}),O.registerSubTypeDefaulter(v+"Axis",E.curry(o,v))}X.exports=f},280047:function(X,z,e){var E=e(131879),F=e(872113),O=e(835454),M=O.makeInner,b=e(799538),L=b.makeLabelFormatter,T=b.getOptionCategoryInterval,C=b.shouldShowAllLabels,f=M();function v(d){return d.type==="category"?o(d):r(d)}function m(d,y){return d.type==="category"?l(d,y):{ticks:d.scale.getTicks()}}function o(d){var y=d.getLabelModel(),p=h(d,y);return!y.get("show")||d.scale.isBlank()?{labels:[],labelCategoryInterval:p.labelCategoryInterval}:p}function h(d,y){var p=s(d,"labels"),w=T(y),S=c(p,w);if(S)return S;var R,B;return E.isFunction(w)?R=g(d,w):(B=w==="auto"?a(d):w,R=u(d,B)),x(p,w,{labels:R,labelCategoryInterval:B})}function l(d,y){var p=s(d,"ticks"),w=T(y),S=c(p,w);if(S)return S;var R,B;if((!y.get("show")||d.scale.isBlank())&&(R=[]),E.isFunction(w))R=g(d,w,!0);else if(w==="auto"){var k=h(d,d.getLabelModel());B=k.labelCategoryInterval,R=E.map(k.labels,function(P){return P.tickValue})}else B=w,R=u(d,B,!0);return x(p,w,{ticks:R,tickCategoryInterval:B})}function r(d){var y=d.scale.getTicks(),p=L(d);return{labels:E.map(y,function(w,S){return{formattedLabel:p(w,S),rawLabel:d.scale.getLabel(w),tickValue:w}})}}function s(d,y){return f(d)[y]||(f(d)[y]=[])}function c(d,y){for(var p=0;p<d.length;p++)if(d[p].key===y)return d[p].value}function x(d,y,p){return d.push({key:y,value:p}),p}function a(d){var y=f(d).autoInterval;return y??(f(d).autoInterval=d.calculateCategoryInterval())}function i(d){var y=n(d),p=L(d),w=(y.axisRotate-y.labelRotate)/180*Math.PI,S=d.scale,R=S.getExtent(),B=S.count();if(R[1]-R[0]<1)return 0;var k=1;B>40&&(k=Math.max(1,Math.floor(B/40)));for(var P=R[0],D=d.dataToCoord(P+1)-d.dataToCoord(P),A=Math.abs(D*Math.cos(w)),N=Math.abs(D*Math.sin(w)),I=0,G=0;P<=R[1];P+=k){var W=0,Z=0,H=F.getBoundingRect(p(P),y.font,"center","top");W=H.width*1.3,Z=H.height*1.3,I=Math.max(I,W,7),G=Math.max(G,Z,7)}var U=I/A,V=G/N;isNaN(U)&&(U=1/0),isNaN(V)&&(V=1/0);var Y=Math.max(0,Math.floor(Math.min(U,V))),$=f(d.model),K=d.getExtent(),J=$.lastAutoInterval,Q=$.lastTickCount;return J!=null&&Q!=null&&Math.abs(J-Y)<=1&&Math.abs(Q-B)<=1&&J>Y&&$.axisExtend0===K[0]&&$.axisExtend1===K[1]?Y=J:($.lastTickCount=B,$.lastAutoInterval=Y,$.axisExtend0=K[0],$.axisExtend1=K[1]),Y}function n(d){var y=d.getLabelModel();return{axisRotate:d.getRotate?d.getRotate():d.isHorizontal&&!d.isHorizontal()?90:0,labelRotate:y.get("rotate")||0,font:y.getFont()}}function u(d,y,p){var w=L(d),S=d.scale,R=S.getExtent(),B=d.getLabelModel(),k=[],P=Math.max((y||0)+1,1),D=R[0],A=S.count();D!==0&&P>1&&A/P>2&&(D=Math.round(Math.ceil(D/P)*P));var N=C(d),I=B.get("showMinLabel")||N,G=B.get("showMaxLabel")||N;I&&D!==R[0]&&Z(R[0]);for(var W=D;W<=R[1];W+=P)Z(W);G&&W-P!==R[1]&&Z(R[1]);function Z(H){k.push(p?H:{formattedLabel:w(H),rawLabel:S.getLabel(H),tickValue:H})}return k}function g(d,y,p){var w=d.scale,S=L(d),R=[];return E.each(w.getTicks(),function(B){var k=w.getLabel(B);y(B,k)&&R.push(p?B:{formattedLabel:S(B),rawLabel:k,tickValue:B})}),R}z.createAxisLabels=v,z.createAxisTicks=m,z.calculateCategoryInterval=i},265728:function(X,z,e){var E=e(131879),F=e(930871),O=e(748354),M=e(348642),b=864e5;function L(f,v,m){this._model=f}L.prototype={constructor:L,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(f){f=O.parseDate(f);var v=f.getFullYear(),m=f.getMonth()+1;m=m<10?"0"+m:m;var o=f.getDate();o=o<10?"0"+o:o;var h=f.getDay();return h=Math.abs((h+7-this.getFirstDayOfWeek())%7),{y:v,m,d:o,day:h,time:f.getTime(),formatedDate:v+"-"+m+"-"+o,date:f}},getNextNDay:function(f,v){return v=v||0,v===0?this.getDateInfo(f):(f=new Date(this.getDateInfo(f).time),f.setDate(f.getDate()+v),this.getDateInfo(f))},update:function(f,v){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var m=this._rangeInfo.weeks||1,o=["width","height"],h=this._model.get("cellSize").slice(),l=this._model.getBoxLayoutParams(),r=this._orient==="horizontal"?[m,7]:[7,m];E.each([0,1],function(a){x(h,a)&&(l[o[a]]=h[a]*r[a])});var s={width:v.getWidth(),height:v.getHeight()},c=this._rect=F.getLayoutRect(l,s);E.each([0,1],function(a){x(h,a)||(h[a]=c[o[a]]/r[a])});function x(a,i){return a[i]!=null&&a[i]!=="auto"}this._sw=h[0],this._sh=h[1]},dataToPoint:function(f,v){E.isArray(f)&&(f=f[0]),v==null&&(v=!0);var m=this.getDateInfo(f),o=this._rangeInfo,h=m.formatedDate;if(v&&!(m.time>=o.start.time&&m.time<o.end.time+b))return[NaN,NaN];var l=m.day,r=this._getRangeInfo([o.start.time,h]).nthWeek;return this._orient==="vertical"?[this._rect.x+l*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]:[this._rect.x+r*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]},pointToData:function(f){var v=this.pointToDate(f);return v&&v.time},dataToRect:function(f,v){var m=this.dataToPoint(f,v);return{contentShape:{x:m[0]-(this._sw-this._lineWidth)/2,y:m[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:m,tl:[m[0]-this._sw/2,m[1]-this._sh/2],tr:[m[0]+this._sw/2,m[1]-this._sh/2],br:[m[0]+this._sw/2,m[1]+this._sh/2],bl:[m[0]-this._sw/2,m[1]+this._sh/2]}},pointToDate:function(f){var v=Math.floor((f[0]-this._rect.x)/this._sw)+1,m=Math.floor((f[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(m,v-1,o):this._getDateByWeeksAndDay(v,m-1,o)},convertToPixel:E.curry(T,"dataToPoint"),convertFromPixel:E.curry(T,"pointToData"),_initRangeOption:function(){var f=this._model.get("range"),v=f;if(E.isArray(v)&&v.length===1&&(v=v[0]),/^\d{4}$/.test(v)&&(f=[v+"-01-01",v+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(v)){var m=this.getDateInfo(v),o=m.date;o.setMonth(o.getMonth()+1);var h=this.getNextNDay(o,-1);f=[m.formatedDate,h.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(v)&&(f=[v,v]);var l=this._getRangeInfo(f);return l.start.time>l.end.time&&f.reverse(),f},_getRangeInfo:function(f){f=[this.getDateInfo(f[0]),this.getDateInfo(f[1])];var v;f[0].time>f[1].time&&(v=!0,f.reverse());var m=Math.floor(f[1].time/b)-Math.floor(f[0].time/b)+1,o=new Date(f[0].time),h=o.getDate(),l=f[1].date.getDate();o.setDate(h+m-1);var r=o.getDate();if(r!==l)for(var s=o.getTime()-f[1].time>0?1:-1;(r=o.getDate())!==l&&(o.getTime()-f[1].time)*s>0;)m-=s,o.setDate(r-s);var c=Math.floor((m+f[0].day+6)/7),x=v?-c+1:c-1;return v&&f.reverse(),{range:[f[0].formatedDate,f[1].formatedDate],start:f[0],end:f[1],allDay:m,weeks:c,nthWeek:x,fweek:f[0].day,lweek:f[1].day}},_getDateByWeeksAndDay:function(f,v,m){var o=this._getRangeInfo(m);if(f>o.weeks||f===0&&v<o.fweek||f===o.weeks&&v>o.lweek)return!1;var h=(f-1)*7-o.fweek+v,l=new Date(o.start.time);return l.setDate(o.start.d+h),this.getDateInfo(l)}},L.dimensions=L.prototype.dimensions,L.getDimensionsInfo=L.prototype.getDimensionsInfo,L.create=function(f,v){var m=[];return f.eachComponent("calendar",function(o){var h=new L(o,f,v);m.push(h),o.coordinateSystem=h}),f.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=m[o.get("calendarIndex")||0])}),m};function T(f,v,m,o){var h=m.calendarModel,l=m.seriesModel,r=h?h.coordinateSystem:l?l.coordinateSystem:null;return r===this?r[f](o):null}M.register("calendar",L);var C=L;X.exports=C},53336:function(X,z,e){var E=e(131879),F=e(360684),O=e(930871),M=O.getLayoutParams,b=O.sizeCalculable,L=O.mergeLayoutParam,T=F.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(v,m,o,h){var l=M(v);T.superApply(this,"init",arguments),C(v,l)},mergeOption:function(v,m){T.superApply(this,"mergeOption",arguments),C(this.option,v)}});function C(v,m){var o=v.cellSize;E.isArray(o)?o.length===1&&(o[1]=o[0]):o=v.cellSize=[o,o];var h=E.map([0,1],function(l){return b(m,l)&&(o[l]="auto"),o[l]!=null&&o[l]!=="auto"});L(v,m,{type:"box",ignoreSize:h})}var f=T;X.exports=f},870535:function(X){function z(e){var E=e.getRect(),F=e.getRangeInfo();return{coordSys:{type:"calendar",x:E.x,y:E.y,width:E.width,height:E.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:F.start,end:F.end,weeks:F.weeks,dayCount:F.allDay}},api:{coord:function(O,M){return e.dataToPoint(O,M)}}}}X.exports=z},741242:function(X,z,e){var E=e(131879),F=e(536492),O=function(b,L,T,C,f){F.call(this,b,L,T),this.type=C||"value",this.position=f||"bottom"};O.prototype={constructor:O,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var b=this.position;return b==="top"||b==="bottom"},getGlobalExtent:function(b){var L=this.getExtent();return L[0]=this.toGlobalCoord(L[0]),L[1]=this.toGlobalCoord(L[1]),b&&L[0]>L[1]&&L.reverse(),L},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(b,L){return this.coordToData(this.toLocalCoord(b[this.dim==="x"?0:1]),L)},toLocalCoord:null,toGlobalCoord:null},E.inherits(O,F);var M=O;X.exports=M},600152:function(X,z,e){var E=e(131879),F=e(360684),O=e(973794),M=e(142544),b=F.extend({type:"cartesian2dAxis",axis:null,init:function(){b.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){b.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){b.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function L(f,v){return v.type||(v.data?"category":"value")}E.merge(b.prototype,M);var T={offset:0};O("x",b,L,T),O("y",b,L,T);var C=b;X.exports=C},81395:function(X,z,e){var E=e(131879);function F(b){return this._axes[b]}var O=function(b){this._axes={},this._dimList=[],this.name=b||""};O.prototype={constructor:O,type:"cartesian",getAxis:function(b){return this._axes[b]},getAxes:function(){return E.map(this._dimList,F,this)},getAxesByScale:function(b){return b=b.toLowerCase(),E.filter(this.getAxes(),function(L){return L.scale.type===b})},addAxis:function(b){var L=b.dim;this._axes[L]=b,this._dimList.push(L)},dataToCoord:function(b){return this._dataCoordConvert(b,"dataToCoord")},coordToData:function(b){return this._dataCoordConvert(b,"coordToData")},_dataCoordConvert:function(b,L){for(var T=this._dimList,C=b instanceof Array?[]:{},f=0;f<T.length;f++){var v=T[f],m=this._axes[v];C[v]=m[L](b[v])}return C}};var M=O;X.exports=M},893746:function(X,z,e){var E=e(131879),F=e(795946),O=e(81395);function M(L){O.call(this,L)}M.prototype={constructor:M,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(L){var T=this.getAxis("x"),C=this.getAxis("y");return T.contain(T.toLocalCoord(L[0]))&&C.contain(C.toLocalCoord(L[1]))},containData:function(L){return this.getAxis("x").containData(L[0])&&this.getAxis("y").containData(L[1])},dataToPoint:function(L,T,C){var f=this.getAxis("x"),v=this.getAxis("y");return C=C||[],C[0]=f.toGlobalCoord(f.dataToCoord(L[0])),C[1]=v.toGlobalCoord(v.dataToCoord(L[1])),C},clampData:function(L,T){var C=this.getAxis("x").scale,f=this.getAxis("y").scale,v=C.getExtent(),m=f.getExtent(),o=C.parse(L[0]),h=f.parse(L[1]);return T=T||[],T[0]=Math.min(Math.max(Math.min(v[0],v[1]),o),Math.max(v[0],v[1])),T[1]=Math.min(Math.max(Math.min(m[0],m[1]),h),Math.max(m[0],m[1])),T},pointToData:function(L,T){var C=this.getAxis("x"),f=this.getAxis("y");return T=T||[],T[0]=C.coordToData(C.toLocalCoord(L[0])),T[1]=f.coordToData(f.toLocalCoord(L[1])),T},getOtherAxis:function(L){return this.getAxis(L.dim==="x"?"y":"x")},getArea:function(){var L=this.getAxis("x").getGlobalExtent(),T=this.getAxis("y").getGlobalExtent(),C=Math.min(L[0],L[1]),f=Math.min(T[0],T[1]),v=Math.max(L[0],L[1])-C,m=Math.max(T[0],T[1])-f,o=new F(C,f,v,m);return o}},E.inherits(M,O);var b=M;X.exports=b},909145:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=O.isObject,b=O.each,L=O.map,T=O.indexOf,C=O.retrieve,f=e(930871),v=f.getLayoutRect,m=e(799538),o=m.createScaleByModel,h=m.ifAxisCrossZero,l=m.niceScaleExtent,r=m.estimateLabelUnionRect,s=e(893746),c=e(741242),x=e(348642),a=e(553618),i=a.getStackedDimension;e(211680);function n(k,P,D){return k.getCoordSysModel()===P}function u(k,P,D){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(k,P,D),this.model=k}var g=u.prototype;g.type="grid",g.axisPointerEnabled=!0,g.getRect=function(){return this._rect},g.update=function(k,P){var D=this._axesMap;this._updateScale(k,this.model),b(D.x,function(N){l(N.scale,N.model)}),b(D.y,function(N){l(N.scale,N.model)});var A={};b(D.x,function(N){d(D,"y",N,A)}),b(D.y,function(N){d(D,"x",N,A)}),this.resize(this.model,P)};function d(k,P,D,A){D.getAxesOnZeroOf=function(){return I?[I]:[]};var N=k[P],I,G=D.model,W=G.get("axisLine.onZero"),Z=G.get("axisLine.onZeroAxisIndex");if(!W)return;if(Z!=null)y(N[Z])&&(I=N[Z]);else for(var H in N)if(N.hasOwnProperty(H)&&y(N[H])&&!A[U(N[H])]){I=N[H];break}I&&(A[U(I)]=!0);function U(V){return V.dim+"_"+V.index}}function y(k){return k&&k.type!=="category"&&k.type!=="time"&&h(k)}g.resize=function(k,P,D){var A=v(k.getBoxLayoutParams(),{width:P.getWidth(),height:P.getHeight()});this._rect=A;var N=this._axesList;I(),!D&&k.get("containLabel")&&(b(N,function(G){if(!G.model.get("axisLabel.inside")){var W=r(G);if(W){var Z=G.isHorizontal()?"height":"width",H=G.model.get("axisLabel.margin");A[Z]-=W[Z]+H,G.position==="top"?A.y+=W.height+H:G.position==="left"&&(A.x+=W.width+H)}}}),I());function I(){b(N,function(G){var W=G.isHorizontal(),Z=W?[0,A.width]:[0,A.height],H=G.inverse?1:0;G.setExtent(Z[H],Z[1-H]),p(G,W?A.x:A.y)})}},g.getAxis=function(k,P){var D=this._axesMap[k];if(D!=null){if(P==null){for(var A in D)if(D.hasOwnProperty(A))return D[A]}return D[P]}},g.getAxes=function(){return this._axesList.slice()},g.getCartesian=function(k,P){if(k!=null&&P!=null){var D="x"+k+"y"+P;return this._coordsMap[D]}M(k)&&(P=k.yAxisIndex,k=k.xAxisIndex);for(var A=0,N=this._coordsList;A<N.length;A++)if(N[A].getAxis("x").index===k||N[A].getAxis("y").index===P)return N[A]},g.getCartesians=function(){return this._coordsList.slice()},g.convertToPixel=function(k,P,D){var A=this._findConvertTarget(k,P);return A.cartesian?A.cartesian.dataToPoint(D):A.axis?A.axis.toGlobalCoord(A.axis.dataToCoord(D)):null},g.convertFromPixel=function(k,P,D){var A=this._findConvertTarget(k,P);return A.cartesian?A.cartesian.pointToData(D):A.axis?A.axis.coordToData(A.axis.toLocalCoord(D)):null},g._findConvertTarget=function(k,P){var D=P.seriesModel,A=P.xAxisModel||D&&D.getReferringComponents("xAxis")[0],N=P.yAxisModel||D&&D.getReferringComponents("yAxis")[0],I=P.gridModel,G=this._coordsList,W,Z;if(D)W=D.coordinateSystem,T(G,W)<0&&(W=null);else if(A&&N)W=this.getCartesian(A.componentIndex,N.componentIndex);else if(A)Z=this.getAxis("x",A.componentIndex);else if(N)Z=this.getAxis("y",N.componentIndex);else if(I){var H=I.coordinateSystem;H===this&&(W=this._coordsList[0])}return{cartesian:W,axis:Z}},g.containPoint=function(k){var P=this._coordsList[0];if(P)return P.containPoint(k)},g._initCartesian=function(k,P,D){var A={left:!1,right:!1,top:!1,bottom:!1},N={x:{},y:{}},I={x:0,y:0};if(P.eachComponent("xAxis",G("x"),this),P.eachComponent("yAxis",G("y"),this),!I.x||!I.y){this._axesMap={},this._axesList=[];return}this._axesMap=N,b(N.x,function(W,Z){b(N.y,function(H,U){var V="x"+Z+"y"+U,Y=new s(V);Y.grid=this,Y.model=k,this._coordsMap[V]=Y,this._coordsList.push(Y),Y.addAxis(W),Y.addAxis(H)},this)},this);function G(W){return function(Z,H){if(n(Z,k,P)){var U=Z.get("position");W==="x"?U!=="top"&&U!=="bottom"&&(U=A.bottom?"top":"bottom"):U!=="left"&&U!=="right"&&(U=A.left?"right":"left"),A[U]=!0;var V=new c(W,o(Z),[0,0],Z.get("type"),U),Y=V.type==="category";V.onBand=Y&&Z.get("boundaryGap"),V.inverse=Z.get("inverse"),Z.axis=V,V.model=Z,V.grid=this,V.index=H,this._axesList.push(V),N[W][H]=V,I[W]++}}}},g._updateScale=function(k,P){b(this._axesList,function(A){A.scale.setExtent(1/0,-1/0)}),k.eachSeries(function(A){if(R(A)){var N=S(A,k),I=N[0],G=N[1];if(!n(I,P,k)||!n(G,P,k))return;var W=this.getCartesian(I.componentIndex,G.componentIndex),Z=A.getData(),H=W.getAxis("x"),U=W.getAxis("y");Z.type==="list"&&(D(Z,H,A),D(Z,U,A))}},this);function D(A,N,I){b(A.mapDimension(N.dim,!0),function(G){N.scale.unionExtentFromData(A,i(A,G))})}},g.getTooltipAxes=function(k){var P=[],D=[];return b(this.getCartesians(),function(A){var N=k!=null&&k!=="auto"?A.getAxis(k):A.getBaseAxis(),I=A.getOtherAxis(N);T(P,N)<0&&P.push(N),T(D,I)<0&&D.push(I)}),{baseAxes:P,otherAxes:D}};function p(k,P){var D=k.getExtent(),A=D[0]+D[1];k.toGlobalCoord=k.dim==="x"?function(N){return N+P}:function(N){return A-N+P},k.toLocalCoord=k.dim==="x"?function(N){return N-P}:function(N){return A-N+P}}var w=["xAxis","yAxis"];function S(k,P){return L(w,function(D){var A=k.getReferringComponents(D)[0];return A})}function R(k){return k.get("coordinateSystem")==="cartesian2d"}u.create=function(k,P){var D=[];return k.eachComponent("grid",function(A,N){var I=new u(A,k,P);I.name="grid_"+N,I.resize(A,P,!0),A.coordinateSystem=I,D.push(I)}),k.eachSeries(function(A){if(R(A)){var N=S(A,k),I=N[0],G=N[1],W=I.getCoordSysModel(),Z=W.coordinateSystem;A.coordinateSystem=Z.getCartesian(I.componentIndex,G.componentIndex)}}),D},u.dimensions=u.prototype.dimensions=s.prototype.dimensions,x.register("cartesian2d",u);var B=u;X.exports=B},211680:function(X,z,e){e(600152);var E=e(360684),F=E.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});X.exports=F},999495:function(X,z,e){var E=e(131879);function F(O,M,b){b=b||{};var L=O.coordinateSystem,T=M.axis,C={},f=T.getAxesOnZeroOf()[0],v=T.position,m=f?"onZero":v,o=T.dim,h=L.getRect(),l=[h.x,h.x+h.width,h.y,h.y+h.height],r={left:0,right:1,top:0,bottom:1,onZero:2},s=M.get("offset")||0,c=o==="x"?[l[2]-s,l[3]+s]:[l[0]-s,l[1]+s];if(f){var x=f.toGlobalCoord(f.dataToCoord(0));c[r.onZero]=Math.max(Math.min(x,c[1]),c[0])}C.position=[o==="y"?c[r[m]]:l[0],o==="x"?c[r[m]]:l[3]],C.rotation=Math.PI/2*(o==="x"?0:1);var a={top:-1,bottom:1,left:-1,right:1};C.labelDirection=C.tickDirection=C.nameDirection=a[v],C.labelOffset=f?c[r[v]]-c[r.onZero]:0,M.get("axisTick.inside")&&(C.tickDirection=-C.tickDirection),E.retrieve(b.labelInside,M.get("axisLabel.inside"))&&(C.labelDirection=-C.labelDirection);var i=M.get("axisLabel.rotate");return C.labelRotate=m==="top"?-i:i,C.z2=1,C}z.layout=F},73684:function(X,z,e){var E=e(131879);function F(M,b){return b=b||[0,0],E.map(["x","y"],function(L,T){var C=this.getAxis(L),f=b[T],v=M[T]/2;return C.type==="category"?C.getBandWidth():Math.abs(C.dataToCoord(f-v)-C.dataToCoord(f+v))},this)}function O(M){var b=M.grid.getRect();return{coordSys:{type:"cartesian2d",x:b.x,y:b.y,width:b.width,height:b.height},api:{coord:function(L){return M.dataToPoint(L)},size:E.bind(F,M)}}}X.exports=O},144780:function(X,z,e){var E=e(131879),F=e(795946),O=e(665176),M=e(308590);function b(C,f,v,m){O.call(this,C),this.map=f;var o=M.load(f,v);this._nameCoordMap=o.nameCoordMap,this._regionsMap=o.regionsMap,this._invertLongitute=m??!0,this.regions=o.regions,this._rect=o.boundingRect}b.prototype={constructor:b,type:"geo",dimensions:["lng","lat"],containCoord:function(C){for(var f=this.regions,v=0;v<f.length;v++)if(f[v].contain(C))return!0;return!1},transformTo:function(C,f,v,m){var o=this.getBoundingRect(),h=this._invertLongitute;o=o.clone(),h&&(o.y=-o.y-o.height);var l=this._rawTransformable;if(l.transform=o.calculateTransform(new F(C,f,v,m)),l.decomposeTransform(),h){var r=l.scale;r[1]=-r[1]}l.updateTransform(),this._updateTransform()},getRegion:function(C){return this._regionsMap.get(C)},getRegionByCoord:function(C){for(var f=this.regions,v=0;v<f.length;v++)if(f[v].contain(C))return f[v]},addGeoCoord:function(C,f){this._nameCoordMap.set(C,f)},getGeoCoord:function(C){return this._nameCoordMap.get(C)},getBoundingRect:function(){return this._rect},dataToPoint:function(C,f,v){if(typeof C=="string"&&(C=this.getGeoCoord(C)),C)return O.prototype.dataToPoint.call(this,C,f,v)},convertToPixel:E.curry(L,"dataToPoint"),convertFromPixel:E.curry(L,"pointToData")},E.mixin(b,O);function L(C,f,v,m){var o=v.geoModel,h=v.seriesModel,l=o?o.coordinateSystem:h?h.coordinateSystem||(h.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return l===this?l[C](m):null}var T=b;X.exports=T},658526:function(X,z,e){var E=e(131879),F=e(835454),O=e(360684),M=e(56785),b=e(314748),L=e(727547),T=O.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(f){O.prototype.init.apply(this,arguments),F.defaultEmphasis(f,"label",["show"])},optionUpdated:function(){var f=this.option,v=this;f.regions=L.getFilledRegions(f.regions,f.map,f.nameMap),this._optionModelMap=E.reduce(f.regions||[],function(m,o){return o.name&&m.set(o.name,new M(o,v)),m},E.createHashMap()),this.updateSelectedMap(f.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(f){return this._optionModelMap.get(f)||new M(null,this,this.ecModel)},getFormattedLabel:function(f,v){v=v||"normal";var m=this.getRegionModel(f),o=m.get((v==="normal"?"":v+".")+"label.formatter"),h={name:f};if(typeof o=="function")return h.status=v,o(h);if(typeof o=="string")return o.replace("{a}",f??"")},setZoom:function(f){this.option.zoom=f},setCenter:function(f){this.option.center=f}});E.mixin(T,b);var C=T;X.exports=C},955411:function(X,z,e){var E=e(795946),F=e(18644),O=e(912072),M=e(274898);function b(T,C,f){if(this.name=T,this.geometries=C,f)f=[f[0],f[1]];else{var v=this.getBoundingRect();f=[v.x+v.width/2,v.y+v.height/2]}this.center=f}b.prototype={constructor:b,properties:null,getBoundingRect:function(){var T=this._rect;if(T)return T;for(var C=Number.MAX_VALUE,f=[C,C],v=[-C,-C],m=[],o=[],h=this.geometries,l=0;l<h.length;l++)if(h[l].type==="polygon"){var r=h[l].exterior;F.fromPoints(r,m,o),O.min(f,f,m),O.max(v,v,o)}return l===0&&(f[0]=f[1]=v[0]=v[1]=0),this._rect=new E(f[0],f[1],v[0]-f[0],v[1]-f[1])},contain:function(T){var C=this.getBoundingRect(),f=this.geometries;if(!C.contain(T[0],T[1]))return!1;t:for(var v=0,m=f.length;v<m;v++)if(f[v].type==="polygon"){var o=f[v].exterior,h=f[v].interiors;if(M.contain(o,T[0],T[1])){for(var l=0;l<(h?h.length:0);l++)if(M.contain(h[l]))continue t;return!0}}return!1},transformTo:function(T,C,f,v){var m=this.getBoundingRect(),o=m.width/m.height;f?v||(v=f/o):f=o*v;for(var h=new E(T,C,f,v),l=m.calculateTransform(h),r=this.geometries,s=0;s<r.length;s++)if(r[s].type==="polygon"){for(var c=r[s].exterior,x=r[s].interiors,a=0;a<c.length;a++)O.applyTransform(c[a],c[a],l);for(var i=0;i<(x?x.length:0);i++)for(var a=0;a<x[i].length;a++)O.applyTransform(x[i][a],x[i][a],l)}m=this._rect,m.copy(h),this.center=[m.x+m.width/2,m.y+m.height/2]},cloneShallow:function(T){T==null&&(T=this.name);var C=new b(T,this.geometries,this.center);return C._rect=this._rect,C.transformTo=null,C}};var L=b;X.exports=L},517824:function(X){var z=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function e(E,F){E==="china"&&F.name==="\u53F0\u6E7E"&&F.geometries.push({type:"polygon",exterior:z[0]})}X.exports=e},123941:function(X){var z={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function e(E,F){if(E==="world"){var O=z[F.name];if(O){var M=F.center;M[0]=O[0],M[1]=O[1]}}}X.exports=e},583297:function(X,z,e){for(var E=e(131879),F=e(955411),O=[126,25],M=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],b=0;b<M.length;b++)for(var L=0;L<M[b].length;L++)M[b][L][0]/=10.5,M[b][L][1]/=-10.5/.75,M[b][L][0]+=O[0],M[b][L][1]+=O[1];function T(C,f){C==="china"&&f.push(new F("\u5357\u6D77\u8BF8\u5C9B",E.map(M,function(v){return{type:"polygon",exterior:v}}),O))}X.exports=T},923278:function(X){var z={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function e(E,F){if(E==="china"){var O=z[F.name];if(O){var M=F.center;M[0]+=O[0]/10.5,M[1]+=-O[1]/(10.5/.75)}}}X.exports=e},727547:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(3440),M=e(131879),b=e(144780),L=e(930871),T=e(748354),C=e(308590),f=e(352310);function v(l,r){var s=l.get("boundingCoords");if(s!=null){var c=s[0],x=s[1];isNaN(c[0])||isNaN(c[1])||isNaN(x[0])||isNaN(x[1])||this.setBoundingRect(c[0],c[1],x[0]-c[0],x[1]-c[1])}var a=this.getBoundingRect(),i,n=l.get("layoutCenter"),u=l.get("layoutSize"),g=r.getWidth(),d=r.getHeight(),y=a.width/a.height*this.aspectScale,p=!1;n&&u&&(n=[T.parsePercent(n[0],g),T.parsePercent(n[1],d)],u=T.parsePercent(u,Math.min(g,d)),!isNaN(n[0])&&!isNaN(n[1])&&!isNaN(u)&&(p=!0));var w;if(p){var w={};y>1?(w.width=u,w.height=u/y):(w.height=u,w.width=u*y),w.y=n[1]-w.height/2,w.x=n[0]-w.width/2}else i=l.getBoxLayoutParams(),i.aspect=y,w=L.getLayoutRect(i,{width:g,height:d});this.setViewRect(w.x,w.y,w.width,w.height),this.setCenter(l.get("center")),this.setZoom(l.get("zoom"))}function m(l,r){M.each(r.get("geoCoord"),function(s,c){l.addGeoCoord(c,s)})}var o={dimensions:b.prototype.dimensions,create:function(l,r){var s=[];l.eachComponent("geo",function(x,a){var i=x.get("map"),n=x.get("aspectScale"),u=!0,g=f.retrieveMap(i);g&&g[0]&&g[0].type==="svg"?(n==null&&(n=1),u=!1):n==null&&(n=.75);var d=new b(i+a,i,x.get("nameMap"),u);d.aspectScale=n,d.zoomLimit=x.get("scaleLimit"),s.push(d),m(d,x),x.coordinateSystem=d,d.model=x,d.resize=v,d.resize(x,r)}),l.eachSeries(function(x){var a=x.get("coordinateSystem");if(a==="geo"){var i=x.get("geoIndex")||0;x.coordinateSystem=s[i]}});var c={};return l.eachSeriesByType("map",function(x){if(!x.getHostGeoModel()){var a=x.getMapType();c[a]=c[a]||[],c[a].push(x)}}),M.each(c,function(x,a){var i=M.map(x,function(u){return u.get("nameMap")}),n=new b(a,a,M.mergeAll(i));n.zoomLimit=M.retrieve.apply(null,M.map(x,function(u){return u.get("scaleLimit")})),s.push(n),n.resize=v,n.aspectScale=x[0].get("aspectScale"),n.resize(x[0],r),M.each(x,function(u){u.coordinateSystem=n,m(n,u)})}),s},getFilledRegions:function(l,r,s){for(var c=(l||[]).slice(),x=M.createHashMap(),a=0;a<c.length;a++)x.set(c[a].name,c[a]);var i=C.load(r,s);return M.each(i.regions,function(n){var u=n.name;!x.get(u)&&c.push({name:u})}),c}};O.registerCoordinateSystem("geo",o);var h=o;X.exports=h},863487:function(X,z,e){var E=e(131879),F=E.each,O=e(147731),M=e(835454),b=M.makeInner,L=e(583297),T=e(923278),C=e(123941),f=e(517824),v=b(),m={load:function(h,l,r){var s=v(l).parsed;if(s)return s;var c=l.specialAreas||{},x=l.geoJSON,a;try{a=x?O(x,r):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return L(h,a),F(a,function(i){var n=i.name;T(h,i),C(h,i),f(h,i);var u=c[n];u&&i.transformTo(u.left,u.top,u.width,u.height)}),v(l).parsed={regions:a,boundingRect:o(a)}}};function o(h){for(var l,r=0;r<h.length;r++){var s=h[r].getBoundingRect();l=l||s.clone(),l.union(s)}return l}X.exports=m},172583:function(X,z,e){var E=e(601595),F=E.parseSVG,O=E.makeViewBoxTransform,M=e(827146),b=e(668518),L=e(131879),T=L.assert,C=L.createHashMap,f=e(795946),v=e(835454),m=v.makeInner,o=m(),h={load:function(r,s){var c=o(s).originRoot;if(c)return{root:c,boundingRect:o(s).boundingRect};var x=l(s);return o(s).originRoot=x.root,o(s).boundingRect=x.boundingRect,x},makeGraphic:function(r,s,c){var x=o(s),a=x.rootMap||(x.rootMap=C()),i=a.get(c);if(i)return i;var n=x.originRoot,u=x.boundingRect;return x.originRootHostKey?i=l(s,u).root:(x.originRootHostKey=c,i=n),a.set(c,i)},removeGraphic:function(r,s,c){var x=o(s),a=x.rootMap;a&&a.removeKey(c),c===x.originRootHostKey&&(x.originRootHostKey=null)}};function l(r,s){var c=r.svgXML,x,a;try{x=c&&F(c,{ignoreViewBox:!0,ignoreRootClip:!0})||{},a=x.root,T(a!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var i=x.width,n=x.height,u=x.viewBoxRect;if(s||(s=i==null||n==null?a.getBoundingRect():new f(0,0,0,0),i!=null&&(s.width=i),n!=null&&(s.height=n)),u){var g=O(u,s.width,s.height),d=a;a=new M,a.add(d),d.scale=g.scale,d.position=g.position}return a.setClipPath(new b({shape:s.plain()})),{root:a,boundingRect:s}}X.exports=h},308590:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=O.each,b=O.createHashMap,L=e(352310),T=e(863487),C=e(172583),f=e(795946),v={geoJSON:T,svg:C},m={load:function(r,s,c){var x=[],a=b(),i=b(),n,u=l(r);return M(u,function(g){var d=v[g.type].load(r,g,c);M(d.regions,function(p){var w=p.name;s&&s.hasOwnProperty(w)&&(p=p.cloneShallow(w=s[w])),x.push(p),a.set(w,p),i.set(w,p.center)});var y=d.boundingRect;y&&(n?n.union(y):n=y.clone())}),{regions:x,regionsMap:a,nameCoordMap:i,boundingRect:n||new f(0,0,0,0)}},makeGraphic:o("makeGraphic"),removeGraphic:o("removeGraphic")};function o(r){return function(s,c){var x=l(s),a=[];return M(x,function(i){var n=v[i.type][r];n&&a.push(n(s,i,c))}),a}}function h(r){}function l(r){var s=L.retrieveMap(r)||[];return s}X.exports=m},352310:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=O.createHashMap,b=O.isString,L=O.isArray,T=O.each,C=O.assert,f=e(601595),v=f.parseXML,m=M(),o={registerMap:function(l,r,s){var c;return L(r)?c=r:r.svg?c=[{type:"svg",source:r.svg,specialAreas:r.specialAreas}]:(r.geoJson&&!r.features&&(s=r.specialAreas,r=r.geoJson),c=[{type:"geoJSON",source:r,specialAreas:s}]),T(c,function(x){var a=x.type;a==="geoJson"&&(a=x.type="geoJSON");var i=h[a];i(x)}),m.set(l,c)},retrieveMap:function(l){return m.get(l)}},h={geoJSON:function(l){var r=l.source;l.geoJSON=b(r)?typeof JSON<"u"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r},svg:function(l){l.svgXML=v(l.source)}};X.exports=o},147731:function(X,z,e){var E=e(131879),F=e(955411);function O(L){if(!L.UTF8Encoding)return L;var T=L.UTF8Scale;T==null&&(T=1024);for(var C=L.features,f=0;f<C.length;f++)for(var v=C[f],m=v.geometry,o=m.coordinates,h=m.encodeOffsets,l=0;l<o.length;l++){var r=o[l];if(m.type==="Polygon")o[l]=M(r,h[l],T);else if(m.type==="MultiPolygon")for(var s=0;s<r.length;s++){var c=r[s];r[s]=M(c,h[l][s],T)}}return L.UTF8Encoding=!1,L}function M(L,T,C){for(var f=[],v=T[0],m=T[1],o=0;o<L.length;o+=2){var h=L.charCodeAt(o)-64,l=L.charCodeAt(o+1)-64;h=h>>1^-(h&1),l=l>>1^-(l&1),h+=v,l+=m,v=h,m=l,f.push([h/C,l/C])}return f}function b(L,T){return O(L),E.map(E.filter(L.features,function(C){return C.geometry&&C.properties&&C.geometry.coordinates.length>0}),function(C){var f=C.properties,v=C.geometry,m=v.coordinates,o=[];v.type==="Polygon"&&o.push({type:"polygon",exterior:m[0],interiors:m.slice(1)}),v.type==="MultiPolygon"&&E.each(m,function(l){l[0]&&o.push({type:"polygon",exterior:l[0],interiors:l.slice(1)})});var h=new F(f[T||"name"],o,f.cp);return h.properties=f,h})}X.exports=b},222782:function(X,z,e){var E=e(131879);function F(M,b){return b=b||[0,0],E.map([0,1],function(L){var T=b[L],C=M[L]/2,f=[],v=[];return f[L]=T-C,v[L]=T+C,f[1-L]=v[1-L]=b[1-L],Math.abs(this.dataToPoint(f)[L]-this.dataToPoint(v)[L])},this)}function O(M){var b=M.getBoundingRect();return{coordSys:{type:"geo",x:b.x,y:b.y,width:b.width,height:b.height,zoom:M.getZoom()},api:{coord:function(L){return M.dataToPoint(L)},size:E.bind(F,M)}}}X.exports=O},484696:function(X,z,e){var E=e(131879),F=e(360684),O=e(769003),M=e(973794),b=e(748354),L=e(142544),T=F.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return O([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(m){var o=this.activeIntervals=E.clone(m);if(o)for(var h=o.length-1;h>=0;h--)b.asc(o[h])},getActiveState:function(m){var o=this.activeIntervals;if(!o.length)return"normal";if(m==null||isNaN(m))return"inactive";if(o.length===1){var h=o[0];if(h[0]<=m&&m<=h[1])return"active"}else for(var l=0,r=o.length;l<r;l++)if(o[l][0]<=m&&m<=o[l][1])return"active";return"inactive"}}),C={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};E.merge(T.prototype,L);function f(m,o){return o.type||(o.data?"category":"value")}M("parallel",T,f,C);var v=T;X.exports=v},498613:function(X,z,e){var E=e(131879),F=e(343970),O=e(930871),M=e(799538),b=e(938343),L=e(248070),T=e(748354),C=e(438289),f=E.each,v=Math.min,m=Math.max,o=Math.floor,h=Math.ceil,l=T.round,r=Math.PI;function s(n,u,g){this._axesMap=E.createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._rect,this._model=n,this._init(n,u,g)}s.prototype={type:"parallel",constructor:s,_init:function(n,u,g){var d=n.dimensions,y=n.parallelAxisIndex;f(d,function(p,w){var S=y[w],R=u.getComponent("parallelAxis",S),B=this._axesMap.set(p,new b(p,M.createScaleByModel(R),[0,0],R.get("type"),S)),k=B.type==="category";B.onBand=k&&R.get("boundaryGap"),B.inverse=R.get("inverse"),R.axis=B,B.model=R,B.coordinateSystem=R.coordinateSystem=this},this)},update:function(n,u){this._updateAxesFromSeries(this._model,n)},containPoint:function(n){var u=this._makeLayoutInfo(),g=u.axisBase,d=u.layoutBase,y=u.pixelDimIndex,p=n[1-y],w=n[y];return p>=g&&p<=g+u.axisLength&&w>=d&&w<=d+u.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(n,u){u.eachSeries(function(g){if(n.contains(g,u)){var d=g.getData();f(this.dimensions,function(y){var p=this._axesMap.get(y);p.scale.unionExtentFromData(d,d.mapDimension(y)),M.niceScaleExtent(p.scale,p.model)},this)}},this)},resize:function(n,u){this._rect=O.getLayoutRect(n.getBoxLayoutParams(),{width:u.getWidth(),height:u.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var n=this._model,u=this._rect,g=["x","y"],d=["width","height"],y=n.get("layout"),p=y==="horizontal"?0:1,w=u[d[p]],S=[0,w],R=this.dimensions.length,B=c(n.get("axisExpandWidth"),S),k=c(n.get("axisExpandCount")||0,[0,R]),P=n.get("axisExpandable")&&R>3&&R>k&&k>1&&B>0&&w>0,D=n.get("axisExpandWindow"),A;if(D)A=c(D[1]-D[0],S),D[1]=D[0]+A;else{A=c(B*(k-1),S);var N=n.get("axisExpandCenter")||o(R/2);D=[B*N-A/2],D[1]=D[0]+A}var I=(w-A)/(R-k);I<3&&(I=0);var G=[o(l(D[0]/B,1))+1,h(l(D[1]/B,1))-1],W=I/B*D[0];return{layout:y,pixelDimIndex:p,layoutBase:u[g[p]],layoutLength:w,axisBase:u[g[1-p]],axisLength:u[d[1-p]],axisExpandable:P,axisExpandWidth:B,axisCollapseWidth:I,axisExpandWindow:D,axisCount:R,winInnerIndices:G,axisExpandWindow0Pos:W}},_layoutAxes:function(){var n=this._rect,u=this._axesMap,g=this.dimensions,d=this._makeLayoutInfo(),y=d.layout;u.each(function(p){var w=[0,d.axisLength],S=p.inverse?1:0;p.setExtent(w[S],w[1-S])}),f(g,function(p,w){var S=(d.axisExpandable?a:x)(w,d),R={horizontal:{x:S.position,y:d.axisLength},vertical:{x:0,y:S.position}},B={horizontal:r/2,vertical:0},k=[R[y].x+n.x,R[y].y+n.y],P=B[y],D=F.create();F.rotate(D,D,P),F.translate(D,D,k),this._axesLayout[p]={position:k,rotation:P,transform:D,axisNameAvailableWidth:S.axisNameAvailableWidth,axisLabelShow:S.axisLabelShow,nameTruncateMaxWidth:S.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(n){return this._axesMap.get(n)},dataToPoint:function(n,u){return this.axisCoordToPoint(this._axesMap.get(u).dataToCoord(n),u)},eachActiveState:function(n,u,g,d){g==null&&(g=0),d==null&&(d=n.count());var y=this._axesMap,p=this.dimensions,w=[],S=[];E.each(p,function(I){w.push(n.mapDimension(I)),S.push(y.get(I).model)});for(var R=this.hasAxisBrushed(),B=g;B<d;B++){var k;if(!R)k="normal";else{k="active";for(var P=n.getValues(w,B),D=0,A=p.length;D<A;D++){var N=S[D].getActiveState(P[D]);if(N==="inactive"){k="inactive";break}}}u(k,B)}},hasAxisBrushed:function(){for(var n=this.dimensions,u=this._axesMap,g=!1,d=0,y=n.length;d<y;d++)u.get(n[d]).model.getActiveState()!=="normal"&&(g=!0);return g},axisCoordToPoint:function(n,u){var g=this._axesLayout[u];return L.applyTransform([n,0],g.transform)},getAxisLayout:function(n){return E.clone(this._axesLayout[n])},getSlidedAxisExpandWindow:function(n){var u=this._makeLayoutInfo(),g=u.pixelDimIndex,d=u.axisExpandWindow.slice(),y=d[1]-d[0],p=[0,u.axisExpandWidth*(u.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:d};var w=n[g]-u.layoutBase-u.axisExpandWindow0Pos,S,R="slide",B=u.axisCollapseWidth,k=this._model.get("axisExpandSlideTriggerArea"),P=k[0]!=null;if(B)P&&B&&w<y*k[0]?(R="jump",S=w-y*k[2]):P&&B&&w>y*(1-k[0])?(R="jump",S=w-y*(1-k[2])):(S=w-y*k[1])>=0&&(S=w-y*(1-k[1]))<=0&&(S=0),S*=u.axisExpandWidth/B,S?C(S,d,p,"all"):R="none";else{var y=d[1]-d[0],D=p[1]*w/y;d=[m(0,D-y/2)],d[1]=v(p[1],d[0]+y),d[0]=d[1]-y}return{axisExpandWindow:d,behavior:R}}};function c(n,u){return v(m(n,u[0]),u[1])}function x(n,u){var g=u.layoutLength/(u.axisCount-1);return{position:g*n,axisNameAvailableWidth:g,axisLabelShow:!0}}function a(n,u){var g=u.layoutLength,d=u.axisExpandWidth,y=u.axisCount,p=u.axisCollapseWidth,w=u.winInnerIndices,S,R=p,B=!1,k;return n<w[0]?(S=n*p,k=p):n<=w[1]?(S=u.axisExpandWindow0Pos+n*d-u.axisExpandWindow[0],R=d,B=!0):(S=g-(y-1-n)*p,k=p),{position:S,axisNameAvailableWidth:R,axisLabelShow:B,nameTruncateMaxWidth:k}}var i=s;X.exports=i},938343:function(X,z,e){var E=e(131879),F=e(536492),O=function(b,L,T,C,f){F.call(this,b,L,T),this.type=C||"value",this.axisIndex=f};O.prototype={constructor:O,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"}},E.inherits(O,F);var M=O;X.exports=M},254084:function(X,z,e){var E=e(131879),F=e(360684);e(484696);var O=F.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){F.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(M){var b=this.option;M&&E.merge(b,M,!0),this._initDimensions()},contains:function(M,b){var L=M.get("parallelIndex");return L!=null&&b.getComponent("parallel",L)===this},setAxisExpand:function(M){E.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(b){M.hasOwnProperty(b)&&(this.option[b]=M[b])},this)},_initDimensions:function(){var M=this.dimensions=[],b=this.parallelAxisIndex=[],L=E.filter(this.dependentModels.parallelAxis,function(T){return(T.get("parallelIndex")||0)===this.componentIndex},this);E.each(L,function(T){M.push("dim"+T.get("dim")),b.push(T.componentIndex)})}});X.exports=O},39302:function(X,z,e){var E=e(498613),F=e(348642);function O(M,b){var L=[];return M.eachComponent("parallel",function(T,C){var f=new E(T,M,b);f.name="parallel_"+C,f.resize(T,b),T.coordinateSystem=f,f.model=T,L.push(f)}),M.eachSeries(function(T){if(T.get("coordinateSystem")==="parallel"){var C=M.queryComponents({mainType:"parallel",index:T.get("parallelIndex"),id:T.get("parallelId")})[0];T.coordinateSystem=C.coordinateSystem}}),L}F.register("parallel",{create:O})},449224:function(X,z,e){var E=e(131879),F=e(835454);function O(L){M(L),b(L)}function M(L){if(!L.parallel){var T=!1;E.each(L.series,function(C){C&&C.type==="parallel"&&(T=!0)}),T&&(L.parallel=[{}])}}function b(L){var T=F.normalizeToArray(L.parallelAxis);E.each(T,function(C){if(E.isObject(C)){var f=C.parallelIndex||0,v=F.normalizeToArray(L.parallel)[f];v&&v.parallelAxisDefault&&E.merge(C,v.parallelAxisDefault,!1)}})}X.exports=O},935566:function(X,z,e){var E=e(131879),F=e(872113),O=e(536492),M=e(835454),b=M.makeInner,L=b();function T(f,v){v=v||[0,360],O.call(this,"angle",f,v),this.type="category"}T.prototype={constructor:T,pointToData:function(f,v){return this.polar.pointToData(f,v)[this.dim==="radius"?0:1]},dataToAngle:O.prototype.dataToCoord,angleToData:O.prototype.coordToData,calculateCategoryInterval:function(){var f=this,v=f.getLabelModel(),m=f.scale,o=m.getExtent(),h=m.count();if(o[1]-o[0]<1)return 0;var l=o[0],r=f.dataToCoord(l+1)-f.dataToCoord(l),s=Math.abs(r),c=F.getBoundingRect(l,v.getFont(),"center","top"),x=Math.max(c.height,7),a=x/s;isNaN(a)&&(a=1/0);var i=Math.max(0,Math.floor(a)),n=L(f.model),u=n.lastAutoInterval,g=n.lastTickCount;return u!=null&&g!=null&&Math.abs(u-i)<=1&&Math.abs(g-h)<=1&&u>i?i=u:(n.lastTickCount=h,n.lastAutoInterval=i),i}},E.inherits(T,O);var C=T;X.exports=C},741470:function(X,z,e){var E=e(131879),F=e(360684),O=e(973794),M=e(142544),b=F.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});E.merge(b.prototype,M);var L={angle:{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};function T(C,f){return f.type||(f.data?"category":"value")}O("angle",b,T,L.angle),O("radius",b,T,L.radius)},299127:function(X,z,e){var E=e(156042),F=e(935566),O=function(b){this.name=b||"",this.cx=0,this.cy=0,this._radiusAxis=new E,this._angleAxis=new F,this._radiusAxis.polar=this._angleAxis.polar=this};O.prototype={type:"polar",axisPointerEnabled:!0,constructor:O,dimensions:["radius","angle"],model:null,containPoint:function(b){var L=this.pointToCoord(b);return this._radiusAxis.contain(L[0])&&this._angleAxis.contain(L[1])},containData:function(b){return this._radiusAxis.containData(b[0])&&this._angleAxis.containData(b[1])},getAxis:function(b){return this["_"+b+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(b){var L=[],T=this._angleAxis,C=this._radiusAxis;return T.scale.type===b&&L.push(T),C.scale.type===b&&L.push(C),L},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(b){var L=this._angleAxis;return b===L?this._radiusAxis:L},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(b){var L=b!=null&&b!=="auto"?this.getAxis(b):this.getBaseAxis();return{baseAxes:[L],otherAxes:[this.getOtherAxis(L)]}},dataToPoint:function(b,L){return this.coordToPoint([this._radiusAxis.dataToRadius(b[0],L),this._angleAxis.dataToAngle(b[1],L)])},pointToData:function(b,L){var T=this.pointToCoord(b);return[this._radiusAxis.radiusToData(T[0],L),this._angleAxis.angleToData(T[1],L)]},pointToCoord:function(b){var L=b[0]-this.cx,T=b[1]-this.cy,C=this.getAngleAxis(),f=C.getExtent(),v=Math.min(f[0],f[1]),m=Math.max(f[0],f[1]);C.inverse?v=m-360:m=v+360;var o=Math.sqrt(L*L+T*T);L/=o,T/=o;for(var h=Math.atan2(-T,L)/Math.PI*180,l=h<v?1:-1;h<v||h>m;)h+=l*360;return[o,h]},coordToPoint:function(b){var L=b[0],T=b[1]/180*Math.PI,C=Math.cos(T)*L+this.cx,f=-Math.sin(T)*L+this.cy;return[C,f]},getArea:function(){var b=this.getAngleAxis(),L=this.getRadiusAxis(),T=L.getExtent().slice();T[0]>T[1]&&T.reverse();var C=b.getExtent(),f=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:T[0],r:T[1],startAngle:-C[0]*f,endAngle:-C[1]*f,clockwise:b.inverse,contain:function(v,m){var o=v-this.cx,h=m-this.cy,l=o*o+h*h,r=this.r,s=this.r0;return l<=r*r&&l>=s*s}}}};var M=O;X.exports=M},546822:function(X,z,e){var E=e(3440);e(741470);var F=E.extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(O){var M,b=this.ecModel;return b.eachComponent(O,function(L){L.getCoordSysModel()===this&&(M=L)},this),M},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});X.exports=F},156042:function(X,z,e){var E=e(131879),F=e(536492);function O(b,L){F.call(this,"radius",b,L),this.type="category"}O.prototype={constructor:O,pointToData:function(b,L){return this.polar.pointToData(b,L)[this.dim==="radius"?0:1]},dataToRadius:F.prototype.dataToCoord,radiusToData:F.prototype.coordToData},E.inherits(O,F);var M=O;X.exports=M},68137:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(299127),b=e(748354),L=b.parsePercent,T=e(799538),C=T.createScaleByModel,f=T.niceScaleExtent,v=e(348642),m=e(553618),o=m.getStackedDimension;e(546822);function h(c,x,a){var i=x.get("center"),n=a.getWidth(),u=a.getHeight();c.cx=L(i[0],n),c.cy=L(i[1],u);var g=c.getRadiusAxis(),d=Math.min(n,u)/2,y=x.get("radius");y==null?y=[0,"100%"]:O.isArray(y)||(y=[0,y]),y=[L(y[0],d),L(y[1],d)],g.inverse?g.setExtent(y[1],y[0]):g.setExtent(y[0],y[1])}function l(c,x){var a=this,i=a.getAngleAxis(),n=a.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),c.eachSeries(function(d){if(d.coordinateSystem===a){var y=d.getData();O.each(y.mapDimension("radius",!0),function(p){n.scale.unionExtentFromData(y,o(y,p))}),O.each(y.mapDimension("angle",!0),function(p){i.scale.unionExtentFromData(y,o(y,p))})}}),f(i.scale,i.model),f(n.scale,n.model),i.type==="category"&&!i.onBand){var u=i.getExtent(),g=360/i.scale.count();i.inverse?u[1]+=g:u[1]-=g,i.setExtent(u[0],u[1])}}function r(c,x){if(c.type=x.get("type"),c.scale=C(x),c.onBand=x.get("boundaryGap")&&c.type==="category",c.inverse=x.get("inverse"),x.mainType==="angleAxis"){c.inverse^=x.get("clockwise");var a=x.get("startAngle");c.setExtent(a,a+(c.inverse?-360:360))}x.axis=c,c.model=x}var s={dimensions:M.prototype.dimensions,create:function(c,x){var a=[];return c.eachComponent("polar",function(i,n){var u=new M(n);u.update=l;var g=u.getRadiusAxis(),d=u.getAngleAxis(),y=i.findAxisModel("radiusAxis"),p=i.findAxisModel("angleAxis");r(g,y),r(d,p),h(u,i,x),a.push(u),i.coordinateSystem=u,u.model=i}),c.eachSeries(function(i){if(i.get("coordinateSystem")==="polar"){var n=c.queryComponents({mainType:"polar",index:i.get("polarIndex"),id:i.get("polarId")})[0];i.coordinateSystem=n.coordinateSystem}}),a}};v.register("polar",s)},694914:function(X,z,e){var E=e(131879);function F(M,b){return E.map(["Radius","Angle"],function(L,T){var C=this["get"+L+"Axis"](),f=b[T],v=M[T]/2,m="dataTo"+L,o=C.type==="category"?C.getBandWidth():Math.abs(C[m](f-v)-C[m](f+v));return L==="Angle"&&(o=o*Math.PI/180),o},this)}function O(M){var b=M.getRadiusAxis(),L=M.getAngleAxis(),T=b.getExtent();return T[0]>T[1]&&T.reverse(),{coordSys:{type:"polar",cx:M.cx,cy:M.cy,r:T[1],r0:T[0]},api:{coord:E.bind(function(C){var f=b.dataToRadius(C[0]),v=L.dataToAngle(C[1]),m=M.coordToPoint([f,v]);return m.push(f,v*Math.PI/180),m}),size:E.bind(F,M)}}}X.exports=O},623961:function(X,z,e){var E=e(131879),F=e(536492);function O(b,L,T){F.call(this,b,L,T),this.type="value",this.angle=0,this.name="",this.model}E.inherits(O,F);var M=O;X.exports=M},925390:function(X,z,e){var E=e(131879),F=e(623961),O=e(952740),M=e(748354),b=e(799538),L=b.getScaleExtent,T=b.niceScaleExtent,C=e(348642),f=e(213536);function v(o,h,l){this._model=o,this.dimensions=[],this._indicatorAxes=E.map(o.getIndicatorModels(),function(r,s){var c="indicator_"+s,x=new F(c,r.get("axisType")==="log"?new f:new O);return x.name=r.get("name"),x.model=r,r.axis=x,this.dimensions.push(c),x},this),this.resize(o,l),this.cx,this.cy,this.r,this.r0,this.startAngle}v.prototype.getIndicatorAxes=function(){return this._indicatorAxes},v.prototype.dataToPoint=function(o,h){var l=this._indicatorAxes[h];return this.coordToPoint(l.dataToCoord(o),h)},v.prototype.coordToPoint=function(o,h){var l=this._indicatorAxes[h],r=l.angle,s=this.cx+o*Math.cos(r),c=this.cy-o*Math.sin(r);return[s,c]},v.prototype.pointToData=function(o){var h=o[0]-this.cx,l=o[1]-this.cy,r=Math.sqrt(h*h+l*l);h/=r,l/=r;for(var s=Math.atan2(-l,h),c=1/0,x,a=-1,i=0;i<this._indicatorAxes.length;i++){var n=this._indicatorAxes[i],u=Math.abs(s-n.angle);u<c&&(x=n,a=i,c=u)}return[a,+(x&&x.coordToData(r))]},v.prototype.resize=function(o,h){var l=o.get("center"),r=h.getWidth(),s=h.getHeight(),c=Math.min(r,s)/2;this.cx=M.parsePercent(l[0],r),this.cy=M.parsePercent(l[1],s),this.startAngle=o.get("startAngle")*Math.PI/180;var x=o.get("radius");(typeof x=="string"||typeof x=="number")&&(x=[0,x]),this.r0=M.parsePercent(x[0],c),this.r=M.parsePercent(x[1],c),E.each(this._indicatorAxes,function(a,i){a.setExtent(this.r0,this.r);var n=this.startAngle+i*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),a.angle=n},this)},v.prototype.update=function(o,h){var l=this._indicatorAxes,r=this._model;E.each(l,function(x){x.scale.setExtent(1/0,-1/0)}),o.eachSeriesByType("radar",function(x,a){if(!(x.get("coordinateSystem")!=="radar"||o.getComponent("radar",x.get("radarIndex"))!==r)){var i=x.getData();E.each(l,function(n){n.scale.unionExtentFromData(i,i.mapDimension(n.dim))})}},this);var s=r.get("splitNumber");function c(x){var a=Math.pow(10,Math.floor(Math.log(x)/Math.LN10)),i=x/a;return i===2?i=5:i*=2,i*a}E.each(l,function(x,a){var i=L(x.scale,x.model).extent;T(x.scale,x.model);var n=x.model,u=x.scale,g=n.getMin(),d=n.getMax(),y=u.getInterval();if(g!=null&&d!=null)u.setExtent(+g,+d),u.setInterval((d-g)/s);else if(g!=null){var p;do p=g+y*s,u.setExtent(+g,p),u.setInterval(y),y=c(y);while(p<i[1]&&isFinite(p)&&isFinite(i[1]))}else if(d!=null){var w;do w=d-y*s,u.setExtent(w,+d),u.setInterval(y),y=c(y);while(w>i[0]&&isFinite(w)&&isFinite(i[0]))}else{var S=u.getTicks().length-1;S>s&&(y=c(y));var p=Math.ceil(i[1]/y)*y,w=M.round(p-y*s);u.setExtent(w,p),u.setInterval(y)}})},v.dimensions=[],v.create=function(o,h){var l=[];return o.eachComponent("radar",function(r){var s=new v(r,o,h);l.push(s),r.coordinateSystem=s}),o.eachSeriesByType("radar",function(r){r.get("coordinateSystem")==="radar"&&(r.coordinateSystem=l[r.get("radarIndex")||0])}),l},C.register("radar",v);var m=v;X.exports=m},396034:function(X,z,e){var E=e(3440),F=e(131879),O=e(143655),M=e(56785),b=e(142544),L=O.valueAxis;function T(v,m){return F.defaults({show:m},v)}var C=E.extendComponentModel({type:"radar",optionUpdated:function(){var v=this.get("boundaryGap"),m=this.get("splitNumber"),o=this.get("scale"),h=this.get("axisLine"),l=this.get("axisTick"),r=this.get("axisType"),s=this.get("axisLabel"),c=this.get("name"),x=this.get("name.show"),a=this.get("name.formatter"),i=this.get("nameGap"),n=this.get("triggerEvent"),u=F.map(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var d=c;if(g.color!=null&&(d=F.defaults({color:g.color},c)),g=F.merge(F.clone(g),{boundaryGap:v,splitNumber:m,scale:o,axisLine:h,axisTick:l,axisType:r,axisLabel:s,name:g.text,nameLocation:"end",nameGap:i,nameTextStyle:d,triggerEvent:n},!1),x||(g.name=""),typeof a=="string"){var y=g.name;g.name=a.replace("{value}",y??"")}else typeof a=="function"&&(g.name=a(g.name,g));var p=F.extend(new M(g,null,this.ecModel),b);return p.mainType="radar",p.componentIndex=this.componentIndex,p},this);this.getIndicatorModels=function(){return u}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:F.merge({lineStyle:{color:"#bbb"}},L.axisLine),axisLabel:T(L.axisLabel,!1),axisTick:T(L.axisTick,!1),axisType:"interval",splitLine:T(L.splitLine,!0),splitArea:T(L.splitArea,!0),indicator:[]}}),f=C;X.exports=f},352639:function(X,z,e){var E=e(131879),F=e(360684),O=e(973794),M=e(142544),b=F.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}}),L={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}};function T(f,v){return v.type||(v.data?"category":"value")}E.merge(b.prototype,M),O("single",b,T,L);var C=b;X.exports=C},620436:function(X,z,e){var E=e(284957),F=e(799538),O=e(930871),M=O.getLayoutRect,b=e(131879),L=b.each;function T(f,v,m){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(f,v,m),this.model=f}T.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:T,_init:function(f,v,m){var o=this.dimension,h=new E(o,F.createScaleByModel(f),[0,0],f.get("type"),f.get("position")),l=h.type==="category";h.onBand=l&&f.get("boundaryGap"),h.inverse=f.get("inverse"),h.orient=f.get("orient"),f.axis=h,h.model=f,h.coordinateSystem=this,this._axis=h},update:function(f,v){f.eachSeries(function(m){if(m.coordinateSystem===this){var o=m.getData();L(o.mapDimension(this.dimension,!0),function(h){this._axis.scale.unionExtentFromData(o,h)},this),F.niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(f,v){this._rect=M({left:f.get("left"),top:f.get("top"),right:f.get("right"),bottom:f.get("bottom"),width:f.get("width"),height:f.get("height")},{width:v.getWidth(),height:v.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var f=this._rect,v=this._axis,m=v.isHorizontal(),o=m?[0,f.width]:[0,f.height],h=v.reverse?1:0;v.setExtent(o[h],o[1-h]),this._updateAxisTransform(v,m?f.x:f.y)},_updateAxisTransform:function(f,v){var m=f.getExtent(),o=m[0]+m[1],h=f.isHorizontal();f.toGlobalCoord=h?function(l){return l+v}:function(l){return o-l+v},f.toLocalCoord=h?function(l){return l-v}:function(l){return o-l+v}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(f){var v=this.getRect(),m=this.getAxis(),o=m.orient;return o==="horizontal"?m.contain(m.toLocalCoord(f[0]))&&f[1]>=v.y&&f[1]<=v.y+v.height:m.contain(m.toLocalCoord(f[1]))&&f[0]>=v.y&&f[0]<=v.y+v.height},pointToData:function(f){var v=this.getAxis();return[v.coordToData(v.toLocalCoord(f[v.orient==="horizontal"?0:1]))]},dataToPoint:function(f){var v=this.getAxis(),m=this.getRect(),o=[],h=v.orient==="horizontal"?0:1;return f instanceof Array&&(f=f[0]),o[h]=v.toGlobalCoord(v.dataToCoord(+f)),o[1-h]=h===0?m.y+m.height/2:m.x+m.width/2,o}};var C=T;X.exports=C},284957:function(X,z,e){var E=e(131879),F=e(536492),O=function(b,L,T,C,f){F.call(this,b,L,T),this.type=C||"value",this.position=f||"bottom",this.orient=null};O.prototype={constructor:O,model:null,isHorizontal:function(){var b=this.position;return b==="top"||b==="bottom"},pointToData:function(b,L){return this.coordinateSystem.pointToData(b,L)[0]},toGlobalCoord:null,toLocalCoord:null},E.inherits(O,F);var M=O;X.exports=M},76966:function(X,z,e){var E=e(131879);function F(M,b){var L=this.getAxis(),T=b instanceof Array?b[0]:b,C=(M instanceof Array?M[0]:M)/2;return L.type==="category"?L.getBandWidth():Math.abs(L.dataToCoord(T-C)-L.dataToCoord(T+C))}function O(M){var b=M.getRect();return{coordSys:{type:"singleAxis",x:b.x,y:b.y,width:b.width,height:b.height},api:{coord:function(L){return M.dataToPoint(L)},size:E.bind(F,M)}}}X.exports=O},160367:function(X,z,e){var E=e(131879);function F(O,M){M=M||{};var b=O.coordinateSystem,L=O.axis,T={},C=L.position,f=L.orient,v=b.getRect(),m=[v.x,v.x+v.width,v.y,v.y+v.height],o={horizontal:{top:m[2],bottom:m[3]},vertical:{left:m[0],right:m[1]}};T.position=[f==="vertical"?o.vertical[C]:m[0],f==="horizontal"?o.horizontal[C]:m[3]];var h={horizontal:0,vertical:1};T.rotation=Math.PI/2*h[f];var l={top:-1,bottom:1,right:1,left:-1};T.labelDirection=T.tickDirection=T.nameDirection=l[C],O.get("axisTick.inside")&&(T.tickDirection=-T.tickDirection),E.retrieve(M.labelInside,O.get("axisLabel.inside"))&&(T.labelDirection=-T.labelDirection);var r=M.rotate;return r==null&&(r=O.get("axisLabel.rotate")),T.labelRotation=C==="top"?-r:r,T.z2=1,T}z.layout=F},365178:function(X,z,e){var E=e(620436),F=e(348642);function O(M,b){var L=[];return M.eachComponent("singleAxis",function(T,C){var f=new E(T,M,b);f.name="single_"+C,f.resize(T,b),T.coordinateSystem=f,L.push(f)}),M.eachSeries(function(T){if(T.get("coordinateSystem")==="singleAxis"){var C=M.queryComponents({mainType:"singleAxis",index:T.get("singleAxisIndex"),id:T.get("singleAxisId")})[0];T.coordinateSystem=C&&C.coordinateSystem}}),L}F.register("single",{create:O,dimensions:E.prototype.dimensions})},865453:function(X){function z(O){return O}function e(O,M,b,L,T){this._old=O,this._new=M,this._oldKeyGetter=b||z,this._newKeyGetter=L||z,this.context=T}e.prototype={constructor:e,add:function(O){return this._add=O,this},update:function(O){return this._update=O,this},remove:function(O){return this._remove=O,this},execute:function(){var O=this._old,M=this._new,b={},L={},T=[],C=[],f;for(E(O,b,T,"_oldKeyGetter",this),E(M,L,C,"_newKeyGetter",this),f=0;f<O.length;f++){var v=T[f],m=L[v];if(m!=null){var o=m.length;o?(o===1&&(L[v]=null),m=m.shift()):L[v]=null,this._update&&this._update(m,f)}else this._remove&&this._remove(f)}for(var f=0;f<C.length;f++){var v=C[f];if(L.hasOwnProperty(v)){var m=L[v];if(m==null)continue;if(!m.length)this._add&&this._add(m);else for(var h=0,o=m.length;h<o;h++)this._add&&this._add(m[h])}}}};function E(O,M,b,L,T){for(var C=0;C<O.length;C++){var f="_ec_"+T[L](O[C],C),v=M[f];v==null?(b.push(f),M[f]=C):(v.length||(M[f]=v=[v]),v.push(C))}}var F=e;X.exports=F},138166:function(X,z,e){var E=e(131879);function F(M){M!=null&&E.extend(this,M),this.otherDims={}}var O=F;X.exports=O},131517:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(28108),b=M.enableClassCheck;function L(h){return"_EC_"+h}var T=function(h){this._directed=h||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},C=T.prototype;C.type="graph",C.isDirected=function(){return this._directed},C.addNode=function(h,l){h=h==null?""+l:""+h;var r=this._nodesMap;if(!r[L(h)]){var s=new f(h,l);return s.hostGraph=this,this.nodes.push(s),r[L(h)]=s,s}},C.getNodeByIndex=function(h){var l=this.data.getRawIndex(h);return this.nodes[l]},C.getNodeById=function(h){return this._nodesMap[L(h)]},C.addEdge=function(h,l,r){var s=this._nodesMap,c=this._edgesMap;if(typeof h=="number"&&(h=this.nodes[h]),typeof l=="number"&&(l=this.nodes[l]),f.isInstance(h)||(h=s[L(h)]),f.isInstance(l)||(l=s[L(l)]),!(!h||!l)){var x=h.id+"-"+l.id,a=new v(h,l,r);return a.hostGraph=this,this._directed&&(h.outEdges.push(a),l.inEdges.push(a)),h.edges.push(a),h!==l&&l.edges.push(a),this.edges.push(a),c[x]=a,a}},C.getEdgeByIndex=function(h){var l=this.edgeData.getRawIndex(h);return this.edges[l]},C.getEdge=function(h,l){f.isInstance(h)&&(h=h.id),f.isInstance(l)&&(l=l.id);var r=this._edgesMap;return this._directed?r[h+"-"+l]:r[h+"-"+l]||r[l+"-"+h]},C.eachNode=function(h,l){for(var r=this.nodes,s=r.length,c=0;c<s;c++)r[c].dataIndex>=0&&h.call(l,r[c],c)},C.eachEdge=function(h,l){for(var r=this.edges,s=r.length,c=0;c<s;c++)r[c].dataIndex>=0&&r[c].node1.dataIndex>=0&&r[c].node2.dataIndex>=0&&h.call(l,r[c],c)},C.breadthFirstTraverse=function(h,l,r,s){if(f.isInstance(l)||(l=this._nodesMap[L(l)]),!!l){for(var c=r==="out"?"outEdges":r==="in"?"inEdges":"edges",x=0;x<this.nodes.length;x++)this.nodes[x].__visited=!1;if(!h.call(s,l,null))for(var a=[l];a.length;)for(var i=a.shift(),n=i[c],x=0;x<n.length;x++){var u=n[x],g=u.node1===i?u.node2:u.node1;if(!g.__visited){if(h.call(s,g,i))return;a.push(g),g.__visited=!0}}}},C.update=function(){for(var h=this.data,l=this.edgeData,r=this.nodes,s=this.edges,c=0,x=r.length;c<x;c++)r[c].dataIndex=-1;for(var c=0,x=h.count();c<x;c++)r[h.getRawIndex(c)].dataIndex=c;l.filterSelf(function(a){var i=s[l.getRawIndex(a)];return i.node1.dataIndex>=0&&i.node2.dataIndex>=0});for(var c=0,x=s.length;c<x;c++)s[c].dataIndex=-1;for(var c=0,x=l.count();c<x;c++)s[l.getRawIndex(c)].dataIndex=c},C.clone=function(){for(var h=new T(this._directed),l=this.nodes,r=this.edges,s=0;s<l.length;s++)h.addNode(l[s].id,l[s].dataIndex);for(var s=0;s<r.length;s++){var c=r[s];h.addEdge(c.node1.id,c.node2.id,c.dataIndex)}return h};function f(h,l){this.id=h??"",this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=l??-1}f.prototype={constructor:f,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(h){if(!(this.dataIndex<0)){var l=this.hostGraph,r=l.data.getItemModel(this.dataIndex);return r.getModel(h)}}};function v(h,l,r){this.node1=h,this.node2=l,this.dataIndex=r??-1}v.prototype.getModel=function(h){if(!(this.dataIndex<0)){var l=this.hostGraph,r=l.edgeData.getItemModel(this.dataIndex);return r.getModel(h)}};var m=function(h,l){return{getValue:function(r){var s=this[h][l];return s.get(s.getDimension(r||"value"),this.dataIndex)},setVisual:function(r,s){this.dataIndex>=0&&this[h][l].setItemVisual(this.dataIndex,r,s)},getVisual:function(r,s){return this[h][l].getItemVisual(this.dataIndex,r,s)},setLayout:function(r,s){this.dataIndex>=0&&this[h][l].setItemLayout(this.dataIndex,r,s)},getLayout:function(){return this[h][l].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[h][l].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[h][l].getRawIndex(this.dataIndex)}}};O.mixin(f,m("hostGraph","data")),O.mixin(v,m("hostGraph","edgeData")),T.Node=f,T.Edge=v,b(f),b(v);var o=T;X.exports=o},58677:function(X,z,e){var E=e(149500),F=e(550617),O=F.__DEV__,M=e(131879),b=e(56785),L=e(865453),T=e(304345),C=e(858708),f=C.defaultDimValueGetters,v=C.DefaultDataProvider,m=e(317071),o=m.summarizeDimensions,h=e(138166),l=M.isObject,r="undefined",s=-1,c="e\0\0",x={float:typeof Float64Array===r?Array:Float64Array,int:typeof Int32Array===r?Array:Int32Array,ordinal:Array,number:Array,time:Array},a=typeof Uint32Array===r?Array:Uint32Array,i=typeof Int32Array===r?Array:Int32Array,n=typeof Uint16Array===r?Array:Uint16Array;function u(V){return V._rawCount>65535?a:n}function g(V){var Y=V.constructor;return Y===Array?V.slice():new Y(V)}var d=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],y=["_extent","_approximateExtent","_rawExtent"];function p(V,Y){M.each(d.concat(Y.__wrappedMethods||[]),function($){Y.hasOwnProperty($)&&(V[$]=Y[$])}),V.__wrappedMethods=Y.__wrappedMethods,M.each(y,function($){V[$]=M.clone(Y[$])}),V._calculationInfo=M.extend(Y._calculationInfo)}var w=function(V,Y){V=V||["x","y"];for(var $={},K=[],J={},Q=0;Q<V.length;Q++){var et=V[Q];M.isString(et)?et=new h({name:et}):et instanceof h||(et=new h(et));var nt=et.name;et.type=et.type||"float",et.coordDim||(et.coordDim=nt,et.coordDimIndex=0),et.otherDims=et.otherDims||{},K.push(nt),$[nt]=et,et.index=Q,et.createInvertedIndices&&(J[nt]=[])}this.dimensions=K,this._dimensionInfos=$,this.hostModel=Y,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=o(this),this._invertedIndicesMap=J,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},S=w.prototype;S.type="list",S.hasItemOption=!0,S.getDimension=function(V){return(typeof V=="number"||!isNaN(V)&&!this._dimensionInfos.hasOwnProperty(V))&&(V=this.dimensions[V]),V},S.getDimensionInfo=function(V){return this._dimensionInfos[this.getDimension(V)]},S.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},S.mapDimension=function(V,Y){var $=this._dimensionsSummary;if(Y==null)return $.encodeFirstDimNotExtra[V];var K=$.encode[V];return Y===!0?(K||[]).slice():K&&K[Y]},S.initData=function(V,Y,$){var K=T.isInstance(V)||M.isArrayLike(V);K&&(V=new v(V,this.dimensions.length)),this._rawData=V,this._storage={},this._indices=null,this._nameList=Y||[],this._idList=[],this._nameRepeatCount={},$||(this.hasItemOption=!1),this.defaultDimValueGetter=f[this._rawData.getSource().sourceFormat],this._dimValueGetter=$=$||this.defaultDimValueGetter,this._dimValueGetterArrayRows=f.arrayRows,this._rawExtent={},this._initDataFromProvider(0,V.count()),V.pure&&(this.hasItemOption=!1)},S.getProvider=function(){return this._rawData},S.appendData=function(V){var Y=this._rawData,$=this.count();Y.appendData(V);var K=Y.count();Y.persistent||(K+=$),this._initDataFromProvider($,K)},S.appendValues=function(V,Y){for(var $=this._chunkSize,K=this._storage,J=this.dimensions,Q=J.length,et=this._rawExtent,nt=this.count(),st=nt+Math.max(V.length,Y?Y.length:0),ut=this._chunkCount,rt=0;rt<Q;rt++){var ht=J[rt];et[ht]||(et[ht]=Z()),K[ht]||(K[ht]=[]),R(K,this._dimensionInfos[ht],$,ut,st),this._chunkCount=K[ht].length}for(var Pt=new Array(Q),wt=nt;wt<st;wt++){for(var Mt=wt-nt,Ft=Math.floor(wt/$),Dt=wt%$,Rt=0;Rt<Q;Rt++){var ht=J[Rt],Tt=this._dimValueGetterArrayRows(V[Mt]||Pt,ht,Mt,Rt);K[ht][Ft][Dt]=Tt;var mt=et[ht];Tt<mt[0]&&(mt[0]=Tt),Tt>mt[1]&&(mt[1]=Tt)}Y&&(this._nameList[wt]=Y[Mt])}this._rawCount=this._count=st,this._extent={},B(this)},S._initDataFromProvider=function(V,Y){if(!(V>=Y)){for(var $=this._chunkSize,K=this._rawData,J=this._storage,Q=this.dimensions,et=Q.length,nt=this._dimensionInfos,st=this._nameList,ut=this._idList,rt=this._rawExtent,ht=this._nameRepeatCount={},Pt,wt=this._chunkCount,Mt=0;Mt<et;Mt++){var Ft=Q[Mt];rt[Ft]||(rt[Ft]=Z());var Dt=nt[Ft];Dt.otherDims.itemName===0&&(Pt=this._nameDimIdx=Mt),Dt.otherDims.itemId===0&&(this._idDimIdx=Mt),J[Ft]||(J[Ft]=[]),R(J,Dt,$,wt,Y),this._chunkCount=J[Ft].length}for(var Rt=new Array(et),Tt=V;Tt<Y;Tt++){Rt=K.getItem(Tt,Rt);for(var mt=Math.floor(Tt/$),Nt=Tt%$,ct=0;ct<et;ct++){var Ft=Q[ct],vt=J[Ft][mt],Lt=this._dimValueGetter(Rt,Ft,Tt,ct);vt[Nt]=Lt;var Ct=rt[Ft];Lt<Ct[0]&&(Ct[0]=Lt),Lt>Ct[1]&&(Ct[1]=Lt)}if(!K.pure){var jt=st[Tt];if(Rt&&jt==null){if(Rt.name!=null)st[Tt]=jt=Rt.name;else if(Pt!=null){var zt=Q[Pt],Yt=J[zt][mt];if(Yt){jt=Yt[Nt];var Zt=nt[zt].ordinalMeta;Zt&&Zt.categories.length&&(jt=Zt.categories[jt])}}}var ft=Rt==null?null:Rt.id;ft==null&&jt!=null&&(ht[jt]=ht[jt]||0,ft=jt,ht[jt]>0&&(ft+="__ec__"+ht[jt]),ht[jt]++),ft!=null&&(ut[Tt]=ft)}}!K.persistent&&K.clean&&K.clean(),this._rawCount=this._count=Y,this._extent={},B(this)}};function R(V,Y,$,K,J){var Q=x[Y.type],et=K-1,nt=Y.name,st=V[nt][et];if(st&&st.length<$){for(var ut=new Q(Math.min(J-et*$,$)),rt=0;rt<st.length;rt++)ut[rt]=st[rt];V[nt][et]=ut}for(var ht=K*$;ht<J;ht+=$)V[nt].push(new Q(Math.min(J-ht,$)))}function B(V){var Y=V._invertedIndicesMap;M.each(Y,function($,K){var J=V._dimensionInfos[K],Q=J.ordinalMeta;if(Q){$=Y[K]=new i(Q.categories.length);for(var et=0;et<$.length;et++)$[et]=s;for(var et=0;et<V._count;et++)$[V.get(K,et)]=et}})}function k(V,Y,$){var K;if(Y!=null){var J=V._chunkSize,Q=Math.floor($/J),et=$%J,nt=V.dimensions[Y],st=V._storage[nt][Q];if(st){K=st[et];var ut=V._dimensionInfos[nt].ordinalMeta;ut&&ut.categories.length&&(K=ut.categories[K])}}return K}S.count=function(){return this._count},S.getIndices=function(){var V,Y=this._indices;if(Y){var $=Y.constructor,K=this._count;if($===Array){V=new $(K);for(var J=0;J<K;J++)V[J]=Y[J]}else V=new $(Y.buffer,0,K)}else for(var $=u(this),V=new $(this.count()),J=0;J<V.length;J++)V[J]=J;return V},S.get=function(V,Y){if(!(Y>=0&&Y<this._count))return NaN;var $=this._storage;if(!$[V])return NaN;Y=this.getRawIndex(Y);var K=Math.floor(Y/this._chunkSize),J=Y%this._chunkSize,Q=$[V][K],et=Q[J];return et},S.getByRawIndex=function(V,Y){if(!(Y>=0&&Y<this._rawCount))return NaN;var $=this._storage[V];if(!$)return NaN;var K=Math.floor(Y/this._chunkSize),J=Y%this._chunkSize,Q=$[K];return Q[J]},S._getFast=function(V,Y){var $=Math.floor(Y/this._chunkSize),K=Y%this._chunkSize,J=this._storage[V][$];return J[K]},S.getValues=function(V,Y){var $=[];M.isArray(V)||(Y=V,V=this.dimensions);for(var K=0,J=V.length;K<J;K++)$.push(this.get(V[K],Y));return $},S.hasValue=function(V){for(var Y=this._dimensionsSummary.dataDimsOnCoord,$=0,K=Y.length;$<K;$++)if(isNaN(this.get(Y[$],V)))return!1;return!0},S.getDataExtent=function(V){V=this.getDimension(V);var Y=this._storage[V],$=Z();if(!Y)return $;var K=this.count(),J=!this._indices,Q;if(J)return this._rawExtent[V].slice();if(Q=this._extent[V],Q)return Q.slice();Q=$;for(var et=Q[0],nt=Q[1],st=0;st<K;st++){var ut=this._getFast(V,this.getRawIndex(st));ut<et&&(et=ut),ut>nt&&(nt=ut)}return Q=[et,nt],this._extent[V]=Q,Q},S.getApproximateExtent=function(V){return V=this.getDimension(V),this._approximateExtent[V]||this.getDataExtent(V)},S.setApproximateExtent=function(V,Y){Y=this.getDimension(Y),this._approximateExtent[Y]=V.slice()},S.getCalculationInfo=function(V){return this._calculationInfo[V]},S.setCalculationInfo=function(V,Y){l(V)?M.extend(this._calculationInfo,V):this._calculationInfo[V]=Y},S.getSum=function(V){var Y=this._storage[V],$=0;if(Y)for(var K=0,J=this.count();K<J;K++){var Q=this.get(V,K);isNaN(Q)||($+=Q)}return $},S.getMedian=function(V){var Y=[];this.each(V,function(J,Q){isNaN(J)||Y.push(J)});var $=[].concat(Y).sort(function(J,Q){return J-Q}),K=this.count();return K===0?0:K%2===1?$[(K-1)/2]:($[K/2]+$[K/2-1])/2},S.rawIndexOf=function(V,Y){var $=V&&this._invertedIndicesMap[V],K=$[Y];return K==null||isNaN(K)?s:K},S.indexOfName=function(V){for(var Y=0,$=this.count();Y<$;Y++)if(this.getName(Y)===V)return Y;return-1},S.indexOfRawIndex=function(V){if(V>=this._rawCount||V<0)return-1;if(!this._indices)return V;var Y=this._indices,$=Y[V];if($!=null&&$<this._count&&$===V)return V;for(var K=0,J=this._count-1;K<=J;){var Q=(K+J)/2|0;if(Y[Q]<V)K=Q+1;else if(Y[Q]>V)J=Q-1;else return Q}return-1},S.indicesOfNearest=function(V,Y,$){var K=this._storage,J=K[V],Q=[];if(!J)return Q;$==null&&($=1/0);for(var et=1/0,nt=-1,st=0,ut=0,rt=this.count();ut<rt;ut++){var ht=Y-this.get(V,ut),Pt=Math.abs(ht);Pt<=$&&((Pt<et||Pt===et&&ht>=0&&nt<0)&&(et=Pt,nt=ht,st=0),ht===nt&&(Q[st++]=ut))}return Q.length=st,Q},S.getRawIndex=P;function P(V){return V}function D(V){return V<this._count&&V>=0?this._indices[V]:-1}S.getRawDataItem=function(V){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(V));for(var Y=[],$=0;$<this.dimensions.length;$++){var K=this.dimensions[$];Y.push(this.get(K,V))}return Y},S.getName=function(V){var Y=this.getRawIndex(V);return this._nameList[Y]||k(this,this._nameDimIdx,Y)||""},S.getId=function(V){return A(this,this.getRawIndex(V))};function A(V,Y){var $=V._idList[Y];return $==null&&($=k(V,V._idDimIdx,Y)),$==null&&($=c+Y),$}function N(V){return M.isArray(V)||(V=[V]),V}function I(V,Y){for(var $=0;$<Y.length;$++)V._dimensionInfos[Y[$]]||E.error("Unkown dimension "+Y[$])}S.each=function(V,Y,$,K){"use strict";if(this._count){typeof V=="function"&&(K=$,$=Y,Y=V,V=[]),$=$||K||this,V=M.map(N(V),this.getDimension,this);for(var J=V.length,Q=0;Q<this.count();Q++)switch(J){case 0:Y.call($,Q);break;case 1:Y.call($,this.get(V[0],Q),Q);break;case 2:Y.call($,this.get(V[0],Q),this.get(V[1],Q),Q);break;default:for(var et=0,nt=[];et<J;et++)nt[et]=this.get(V[et],Q);nt[et]=Q,Y.apply($,nt)}}},S.filterSelf=function(V,Y,$,K){"use strict";if(this._count){typeof V=="function"&&(K=$,$=Y,Y=V,V=[]),$=$||K||this,V=M.map(N(V),this.getDimension,this);for(var J=this.count(),Q=u(this),et=new Q(J),nt=[],st=V.length,ut=0,rt=V[0],ht=0;ht<J;ht++){var Pt,wt=this.getRawIndex(ht);if(st===0)Pt=Y.call($,ht);else if(st===1){var Mt=this._getFast(rt,wt);Pt=Y.call($,Mt,ht)}else{for(var Ft=0;Ft<st;Ft++)nt[Ft]=this._getFast(rt,wt);nt[Ft]=ht,Pt=Y.apply($,nt)}Pt&&(et[ut++]=wt)}return ut<J&&(this._indices=et),this._count=ut,this._extent={},this.getRawIndex=this._indices?D:P,this}},S.selectRange=function(V){"use strict";if(this._count){var Y=[];for(var $ in V)V.hasOwnProperty($)&&Y.push($);var K=Y.length;if(K){var J=this.count(),Q=u(this),et=new Q(J),nt=0,st=Y[0],ut=V[st][0],rt=V[st][1],ht=!1;if(!this._indices){var Pt=0;if(K===1){for(var wt=this._storage[Y[0]],Mt=0;Mt<this._chunkCount;Mt++)for(var Ft=wt[Mt],Dt=Math.min(this._count-Mt*this._chunkSize,this._chunkSize),Rt=0;Rt<Dt;Rt++){var Tt=Ft[Rt];(Tt>=ut&&Tt<=rt||isNaN(Tt))&&(et[nt++]=Pt),Pt++}ht=!0}else if(K===2){for(var wt=this._storage[st],mt=this._storage[Y[1]],Nt=V[Y[1]][0],ct=V[Y[1]][1],Mt=0;Mt<this._chunkCount;Mt++)for(var Ft=wt[Mt],vt=mt[Mt],Dt=Math.min(this._count-Mt*this._chunkSize,this._chunkSize),Rt=0;Rt<Dt;Rt++){var Tt=Ft[Rt],Lt=vt[Rt];(Tt>=ut&&Tt<=rt||isNaN(Tt))&&(Lt>=Nt&&Lt<=ct||isNaN(Lt))&&(et[nt++]=Pt),Pt++}ht=!0}}if(!ht)if(K===1)for(var Rt=0;Rt<J;Rt++){var Ct=this.getRawIndex(Rt),Tt=this._getFast(st,Ct);(Tt>=ut&&Tt<=rt||isNaN(Tt))&&(et[nt++]=Ct)}else for(var Rt=0;Rt<J;Rt++){for(var jt=!0,Ct=this.getRawIndex(Rt),Mt=0;Mt<K;Mt++){var zt=Y[Mt],Tt=this._getFast($,Ct);(Tt<V[zt][0]||Tt>V[zt][1])&&(jt=!1)}jt&&(et[nt++]=this.getRawIndex(Rt))}return nt<J&&(this._indices=et),this._count=nt,this._extent={},this.getRawIndex=this._indices?D:P,this}}},S.mapArray=function(V,Y,$,K){"use strict";typeof V=="function"&&(K=$,$=Y,Y=V,V=[]),$=$||K||this;var J=[];return this.each(V,function(){J.push(Y&&Y.apply(this,arguments))},$),J};function G(V,Y){var $=V.dimensions,K=new w(M.map($,V.getDimensionInfo,V),V.hostModel);p(K,V);for(var J=K._storage={},Q=V._storage,et=0;et<$.length;et++){var nt=$[et];Q[nt]&&(M.indexOf(Y,nt)>=0?(J[nt]=W(Q[nt]),K._rawExtent[nt]=Z(),K._extent[nt]=null):J[nt]=Q[nt])}return K}function W(V){for(var Y=new Array(V.length),$=0;$<V.length;$++)Y[$]=g(V[$]);return Y}function Z(){return[1/0,-1/0]}S.map=function(V,Y,$,K){"use strict";$=$||K||this,V=M.map(N(V),this.getDimension,this);var J=G(this,V);J._indices=this._indices,J.getRawIndex=J._indices?D:P;for(var Q=J._storage,et=[],nt=this._chunkSize,st=V.length,ut=this.count(),rt=[],ht=J._rawExtent,Pt=0;Pt<ut;Pt++){for(var wt=0;wt<st;wt++)rt[wt]=this.get(V[wt],Pt);rt[st]=Pt;var Mt=Y&&Y.apply($,rt);if(Mt!=null){typeof Mt!="object"&&(et[0]=Mt,Mt=et);for(var Ft=this.getRawIndex(Pt),Dt=Math.floor(Ft/nt),Rt=Ft%nt,Tt=0;Tt<Mt.length;Tt++){var mt=V[Tt],Nt=Mt[Tt],ct=ht[mt],vt=Q[mt];vt&&(vt[Dt][Rt]=Nt),Nt<ct[0]&&(ct[0]=Nt),Nt>ct[1]&&(ct[1]=Nt)}}}return J},S.downSample=function(V,Y,$,K){for(var J=G(this,[V]),Q=J._storage,et=[],nt=Math.floor(1/Y),st=Q[V],ut=this.count(),rt=this._chunkSize,ht=J._rawExtent[V],Pt=new(u(this))(ut),wt=0,Mt=0;Mt<ut;Mt+=nt){nt>ut-Mt&&(nt=ut-Mt,et.length=nt);for(var Ft=0;Ft<nt;Ft++){var Dt=this.getRawIndex(Mt+Ft),Rt=Math.floor(Dt/rt),Tt=Dt%rt;et[Ft]=st[Rt][Tt]}var mt=$(et),Nt=this.getRawIndex(Math.min(Mt+K(et,mt)||0,ut-1)),ct=Math.floor(Nt/rt),vt=Nt%rt;st[ct][vt]=mt,mt<ht[0]&&(ht[0]=mt),mt>ht[1]&&(ht[1]=mt),Pt[wt++]=Nt}return J._count=wt,J._indices=Pt,J.getRawIndex=D,J},S.getItemModel=function(V){var Y=this.hostModel;return new b(this.getRawDataItem(V),Y,Y&&Y.ecModel)},S.diff=function(V){var Y=this;return new L(V?V.getIndices():[],this.getIndices(),function($){return A(V,$)},function($){return A(Y,$)})},S.getVisual=function(V){var Y=this._visual;return Y&&Y[V]},S.setVisual=function(V,Y){if(l(V)){for(var $ in V)V.hasOwnProperty($)&&this.setVisual($,V[$]);return}this._visual=this._visual||{},this._visual[V]=Y},S.setLayout=function(V,Y){if(l(V)){for(var $ in V)V.hasOwnProperty($)&&this.setLayout($,V[$]);return}this._layout[V]=Y},S.getLayout=function(V){return this._layout[V]},S.getItemLayout=function(V){return this._itemLayouts[V]},S.setItemLayout=function(V,Y,$){this._itemLayouts[V]=$?M.extend(this._itemLayouts[V]||{},Y):Y},S.clearItemLayouts=function(){this._itemLayouts.length=0},S.getItemVisual=function(V,Y,$){var K=this._itemVisuals[V],J=K&&K[Y];return J==null&&!$?this.getVisual(Y):J},S.setItemVisual=function(V,Y,$){var K=this._itemVisuals[V]||{},J=this.hasItemVisual;if(this._itemVisuals[V]=K,l(Y)){for(var Q in Y)Y.hasOwnProperty(Q)&&(K[Q]=Y[Q],J[Q]=!0);return}K[Y]=$,J[Y]=!0},S.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var H=function(V){V.seriesIndex=this.seriesIndex,V.dataIndex=this.dataIndex,V.dataType=this.dataType};S.setItemGraphicEl=function(V,Y){var $=this.hostModel;Y&&(Y.dataIndex=V,Y.dataType=this.dataType,Y.seriesIndex=$&&$.seriesIndex,Y.type==="group"&&Y.traverse(H,Y)),this._graphicEls[V]=Y},S.getItemGraphicEl=function(V){return this._graphicEls[V]},S.eachItemGraphicEl=function(V,Y){M.each(this._graphicEls,function($,K){$&&V&&V.call(Y,$,K)})},S.cloneShallow=function(V){if(!V){var Y=M.map(this.dimensions,this.getDimensionInfo,this);V=new w(Y,this.hostModel)}if(V._storage=this._storage,p(V,this),this._indices){var $=this._indices.constructor;V._indices=new $(this._indices)}else V._indices=null;return V.getRawIndex=V._indices?D:P,V},S.wrapMethod=function(V,Y){var $=this[V];typeof $=="function"&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(V),this[V]=function(){var K=$.apply(this,arguments);return Y.apply(this,[K].concat(M.slice(arguments)))})},S.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],S.CHANGABLE_METHODS=["filterSelf","selectRange"];var U=w;X.exports=U},584116:function(X,z,e){var E=e(131879),F=E.createHashMap,O=E.isObject,M=E.map;function b(v){this.categories=v.categories||[],this._needCollect=v.needCollect,this._deduplication=v.deduplication,this._map}b.createByAxisModel=function(v){var m=v.option,o=m.data,h=o&&M(o,C);return new b({categories:h,needCollect:!h,deduplication:m.dedplication!==!1})};var L=b.prototype;L.getOrdinal=function(v){return T(this).get(v)},L.parseAndCollect=function(v){var m,o=this._needCollect;if(typeof v!="string"&&!o)return v;if(o&&!this._deduplication)return m=this.categories.length,this.categories[m]=v,m;var h=T(this);return m=h.get(v),m==null&&(o?(m=this.categories.length,this.categories[m]=v,h.set(v,m)):m=NaN),m};function T(v){return v._map||(v._map=F(v.categories))}function C(v){return O(v)&&v.value!=null?v.value:v+""}var f=b;X.exports=f},304345:function(X,z,e){var E=e(131879),F=E.createHashMap,O=E.isTypedArray,M=e(28108),b=M.enableClassCheck,L=e(317233),T=L.SOURCE_FORMAT_ORIGINAL,C=L.SERIES_LAYOUT_BY_COLUMN,f=L.SOURCE_FORMAT_UNKNOWN,v=L.SOURCE_FORMAT_TYPED_ARRAY,m=L.SOURCE_FORMAT_KEYED_COLUMNS;function o(l){this.fromDataset=l.fromDataset,this.data=l.data||(l.sourceFormat===m?{}:[]),this.sourceFormat=l.sourceFormat||f,this.seriesLayoutBy=l.seriesLayoutBy||C,this.dimensionsDefine=l.dimensionsDefine,this.encodeDefine=l.encodeDefine&&F(l.encodeDefine),this.startIndex=l.startIndex||0,this.dimensionsDetectCount=l.dimensionsDetectCount}o.seriesDataToSource=function(l){return new o({data:l,sourceFormat:O(l)?v:T,fromDataset:!1})},b(o);var h=o;X.exports=h},575174:function(X,z,e){var E=e(131879),F=e(185567),O=e(58677),M=e(480554),b=function(f,v){this.name=f||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=v};b.prototype={constructor:b,isRemoved:function(){return this.dataIndex<0},eachNode:function(f,v,m){typeof f=="function"&&(m=v,v=f,f=null),f=f||{},E.isString(f)&&(f={order:f});var o=f.order||"preorder",h=this[f.attr||"children"],l;o==="preorder"&&(l=v.call(m,this));for(var r=0;!l&&r<h.length;r++)h[r].eachNode(f,v,m);o==="postorder"&&v.call(m,this)},updateDepthAndHeight:function(f){var v=0;this.depth=f;for(var m=0;m<this.children.length;m++){var o=this.children[m];o.updateDepthAndHeight(f+1),o.height>v&&(v=o.height)}this.height=v+1},getNodeById:function(f){if(this.getId()===f)return this;for(var v=0,m=this.children,o=m.length;v<o;v++){var h=m[v].getNodeById(f);if(h)return h}},contains:function(f){if(f===this)return!0;for(var v=0,m=this.children,o=m.length;v<o;v++){var h=m[v].contains(f);if(h)return h}},getAncestors:function(f){for(var v=[],m=f?this:this.parentNode;m;)v.push(m),m=m.parentNode;return v.reverse(),v},getValue:function(f){var v=this.hostTree.data;return v.get(v.getDimension(f||"value"),this.dataIndex)},setLayout:function(f,v){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,f,v)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(f){if(!(this.dataIndex<0)){var v=this.hostTree,m=v.data.getItemModel(this.dataIndex);return m.getModel(f)}},setVisual:function(f,v){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,f,v)},getVisual:function(f,v){return this.hostTree.data.getItemVisual(this.dataIndex,f,v)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(f){for(var v=f.parentNode;v;){if(v===this)return!0;v=v.parentNode}return!1},isDescendantOf:function(f){return f!==this&&f.isAncestorOf(this)}};function L(f){this.root,this.data,this._nodes=[],this.hostModel=f}L.prototype={constructor:L,type:"tree",eachNode:function(f,v,m){this.root.eachNode(f,v,m)},getNodeByDataIndex:function(f){var v=this.data.getRawIndex(f);return this._nodes[v]},getNodeByName:function(f){return this.root.getNodeByName(f)},update:function(){for(var f=this.data,v=this._nodes,m=0,o=v.length;m<o;m++)v[m].dataIndex=-1;for(var m=0,o=f.count();m<o;m++)v[f.getRawIndex(m)].dataIndex=m},clearLayouts:function(){this.data.clearItemLayouts()}},L.createTree=function(f,v,m){var o=new L(v),h=[],l=1;r(f);function r(x,a){var i=x.value;l=Math.max(l,E.isArray(i)?i.length:1),h.push(x);var n=new b(x.name,o);a?T(n,a):o.root=n,o._nodes.push(n);var u=x.children;if(u)for(var g=0;g<u.length;g++)r(u[g],n)}o.root.updateDepthAndHeight(0);var s=M(h,{coordDimensions:["value"],dimensionsCount:l}),c=new O(s,v);return c.initData(h),m&&m(c),F({mainData:c,struct:o,structAttr:"tree"}),o.update(),o};function T(f,v){var m=v.children;f.parentNode!==v&&(m.push(f),f.parentNode=v)}var C=L;X.exports=C},972993:function(X,z,e){var E=e(131879),F=E.createHashMap,O=E.each,M=E.isString,b=E.defaults,L=E.extend,T=E.isObject,C=E.clone,f=e(835454),v=f.normalizeToArray,m=e(543036),o=m.guessOrdinal,h=m.BE_ORDINAL,l=e(304345),r=e(317071),s=r.OTHER_DIMENSIONS,c=e(138166);function x(u,g,d){l.isInstance(g)||(g=l.seriesDataToSource(g)),d=d||{},u=(u||[]).slice();for(var y=(d.dimsDef||[]).slice(),p=F(),w=F(),S=[],R=a(g,u,y,d.dimCount),B=0;B<R;B++){var k=y[B]=L({},T(y[B])?y[B]:{name:y[B]}),P=k.name,D=S[B]=new c;P!=null&&p.get(P)==null&&(D.name=D.displayName=P,p.set(P,B)),k.type!=null&&(D.type=k.type),k.displayName!=null&&(D.displayName=k.displayName)}var A=d.encodeDef;!A&&d.encodeDefaulter&&(A=d.encodeDefaulter(g,R)),A=F(A),A.each(function(Y,$){if(Y=v(Y).slice(),Y.length===1&&!M(Y[0])&&Y[0]<0){A.set($,!1);return}var K=A.set($,[]);O(Y,function(J,Q){M(J)&&(J=p.get(J)),J!=null&&J<R&&(K[Q]=J,I(S[J],$,Q))})});var N=0;O(u,function(J,$){var K,J,Q,et;if(M(J))K=J,J={};else{K=J.name;var nt=J.ordinalMeta;J.ordinalMeta=null,J=C(J),J.ordinalMeta=nt,Q=J.dimsDef,et=J.otherDims,J.name=J.coordDim=J.coordDimIndex=J.dimsDef=J.otherDims=null}var st=A.get(K);if(st!==!1){var st=v(st);if(!st.length)for(var ut=0;ut<(Q&&Q.length||1);ut++){for(;N<S.length&&S[N].coordDim!=null;)N++;N<S.length&&st.push(N++)}O(st,function(rt,ht){var Pt=S[rt];if(I(b(Pt,J),K,ht),Pt.name==null&&Q){var wt=Q[ht];!T(wt)&&(wt={name:wt}),Pt.name=Pt.displayName=wt.name,Pt.defaultTooltip=wt.defaultTooltip}et&&b(Pt.otherDims,et)})}});function I(Y,$,K){s.get($)!=null?Y.otherDims[$]=K:(Y.coordDim=$,Y.coordDimIndex=K,w.set($,!0))}var G=d.generateCoord,W=d.generateCoordCount,Z=W!=null;W=G?W||1:0;for(var H=G||"value",U=0;U<R;U++){var D=S[U]=S[U]||new c,V=D.coordDim;V==null&&(D.coordDim=i(H,w,Z),D.coordDimIndex=0,(!G||W<=0)&&(D.isExtraCoord=!0),W--),D.name==null&&(D.name=i(D.coordDim,p)),D.type==null&&(o(g,U,D.name)===h.Must||D.isExtraCoord&&(D.otherDims.itemName!=null||D.otherDims.seriesName!=null))&&(D.type="ordinal")}return S}function a(u,g,d,y){var p=Math.max(u.dimensionsDetectCount||1,g.length,d.length,y||0);return O(g,function(w){var S=w.dimsDef;S&&(p=Math.max(p,S.length))}),p}function i(u,g,d){if(d||g.get(u)!=null){for(var y=0;g.get(u+y)!=null;)y++;u+=y}return g.set(u,!0),u}var n=x;X.exports=n},480554:function(X,z,e){var E=e(972993);function F(O,M){return M=M||{},E(M.coordDimensions||[],O,{dimsDef:M.dimensionsDefine||O.dimensionsDefine,encodeDef:M.encodeDefine||O.encodeDefine,dimCount:M.dimensionsCount,encodeDefaulter:M.encodeDefaulter,generateCoord:M.generateCoord,generateCoordCount:M.generateCoordCount})}X.exports=F},858708:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=O.isTypedArray,b=O.extend,L=O.assert,T=O.each,C=O.isObject,f=e(835454),v=f.getDataItemValue,m=f.isDataItemOption,o=e(748354),h=o.parseDate,l=e(304345),r=e(317233),s=r.SOURCE_FORMAT_TYPED_ARRAY,c=r.SOURCE_FORMAT_ARRAY_ROWS,x=r.SOURCE_FORMAT_ORIGINAL,a=r.SOURCE_FORMAT_OBJECT_ROWS;function i(D,A){l.isInstance(D)||(D=l.seriesDataToSource(D)),this._source=D;var N=this._data=D.data,I=D.sourceFormat;I===s&&(this._offset=0,this._dimSize=A,this._data=N);var G=u[I===c?I+"_"+D.seriesLayoutBy:I];b(this,G)}var n=i.prototype;n.pure=!1,n.persistent=!0,n.getSource=function(){return this._source};var u={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(D){return this._data[D+this._source.startIndex]},appendData:y},arrayRows_row:{pure:!0,count:function(){var D=this._data[0];return D?Math.max(0,D.length-this._source.startIndex):0},getItem:function(D){D+=this._source.startIndex;for(var A=[],N=this._data,I=0;I<N.length;I++){var G=N[I];A.push(G?G[D]:null)}return A},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:g,getItem:d,appendData:y},keyedColumns:{pure:!0,count:function(){var D=this._source.dimensionsDefine[0].name,A=this._data[D];return A?A.length:0},getItem:function(D){for(var A=[],N=this._source.dimensionsDefine,I=0;I<N.length;I++){var G=this._data[N[I].name];A.push(G?G[D]:null)}return A},appendData:function(D){var A=this._data;T(D,function(N,I){for(var G=A[I]||(A[I]=[]),W=0;W<(N||[]).length;W++)G.push(N[W])})}},original:{count:g,getItem:d,appendData:y},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(D,A){D=D-this._offset,A=A||[];for(var N=this._dimSize*D,I=0;I<this._dimSize;I++)A[I]=this._data[N+I];return A},appendData:function(D){this._data=D},clean:function(){this._offset+=this.count(),this._data=null}}};function g(){return this._data.length}function d(D){return this._data[D]}function y(D){for(var A=0;A<D.length;A++)this._data.push(D[A])}var p={arrayRows:w,objectRows:function(D,A,N,I){return N!=null?D[I]:D},keyedColumns:w,original:function(D,A,N,I){var G=v(D);return N==null||!(G instanceof Array)?G:G[N]},typedArray:w};function w(D,A,N,I){return N!=null?D[N]:D}var S={arrayRows:R,objectRows:function(D,A,N,I){return B(D[A],this._dimensionInfos[A])},keyedColumns:R,original:function(D,A,N,I){var G=D&&(D.value==null?D:D.value);return!this._rawData.pure&&m(D)&&(this.hasItemOption=!0),B(G instanceof Array?G[I]:G,this._dimensionInfos[A])},typedArray:function(D,A,N,I){return D[I]}};function R(D,A,N,I){return B(D[I],this._dimensionInfos[A])}function B(D,A){var N=A&&A.type;if(N==="ordinal"){var I=A&&A.ordinalMeta;return I?I.parseAndCollect(D):D}return N==="time"&&typeof D!="number"&&D!=null&&D!=="-"&&(D=+h(D)),D==null||D===""?NaN:+D}function k(D,A,N){if(D){var I=D.getRawDataItem(A);if(I!=null){var G=D.getProvider().getSource().sourceFormat,W,Z,H=D.getDimensionInfo(N);return H&&(W=H.name,Z=H.index),p[G](I,A,Z,W)}}}function P(D,A,N){if(D){var I=D.getProvider().getSource().sourceFormat;if(!(I!==x&&I!==a)){var G=D.getRawDataItem(A);if(I===x&&!C(G)&&(G=null),G)return G[N]}}}z.DefaultDataProvider=i,z.defaultDimValueGetters=S,z.retrieveRawValue=k,z.retrieveRawAttr=P},553618:function(X,z,e){var E=e(131879),F=E.each,O=E.isString;function M(T,C,f){f=f||{};var v=f.byIndex,m=f.stackedCoordDimension,o=!!(T&&T.get("stack")),h,l,r,s;if(F(C,function(i,n){O(i)&&(C[n]=i={name:i}),o&&!i.isExtraCoord&&(!v&&!h&&i.ordinalMeta&&(h=i),!l&&i.type!=="ordinal"&&i.type!=="time"&&(!m||m===i.coordDim)&&(l=i))}),l&&!v&&!h&&(v=!0),l){r="__\0ecstackresult",s="__\0ecstackedover",h&&(h.createInvertedIndices=!0);var c=l.coordDim,x=l.type,a=0;F(C,function(i){i.coordDim===c&&a++}),C.push({name:r,coordDim:c,coordDimIndex:a,type:x,isExtraCoord:!0,isCalculationCoord:!0}),a++,C.push({name:s,coordDim:s,coordDimIndex:a,type:x,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:l&&l.name,stackedByDimension:h&&h.name,isStackedByIndex:v,stackedOverDimension:s,stackResultDimension:r}}function b(T,C){return!!C&&C===T.getCalculationInfo("stackedDimension")}function L(T,C){return b(T,C)?T.getCalculationInfo("stackResultDimension"):C}z.enableDataStack=M,z.isDimensionStacked=b,z.getStackedDimension=L},317071:function(X,z,e){var E=e(131879),F=E.each,O=E.createHashMap,M=E.assert,b=e(550617),L=b.__DEV__,T=O(["tooltip","label","itemName","itemId","seriesName"]);function C(o){var h={},l=h.encode={},r=O(),s=[],c=[],x=h.userOutput={dimensionNames:o.dimensions.slice(),encode:{}};F(o.dimensions,function(g){var d=o.getDimensionInfo(g),y=d.coordDim;if(y){var p=d.coordDimIndex;f(l,y)[p]=g,d.isExtraCoord||(r.set(y,1),m(d.type)&&(s[0]=g),f(x.encode,y)[p]=d.index),d.defaultTooltip&&c.push(g)}T.each(function(w,S){var R=f(l,S),B=d.otherDims[S];B!=null&&B!==!1&&(R[B]=d.name)})});var a=[],i={};r.each(function(g,d){var y=l[d];i[d]=y[0],a=a.concat(y)}),h.dataDimsOnCoord=a,h.encodeFirstDimNotExtra=i;var n=l.label;n&&n.length&&(s=n.slice());var u=l.tooltip;return u&&u.length?c=u.slice():c.length||(c=s.slice()),l.defaultedLabel=s,l.defaultedTooltip=c,h}function f(o,h){return o.hasOwnProperty(h)||(o[h]=[]),o[h]}function v(o){return o==="category"?"ordinal":o==="time"?"time":"float"}function m(o){return!(o==="ordinal"||o==="time")}z.OTHER_DIMENSIONS=T,z.summarizeDimensions=C,z.getDimensionTypeByAxis=v},185567:function(X,z,e){var E=e(131879),F=E.each,O="\0__link_datas",M="\0__link_mainData";function b(l){var r=l.mainData,s=l.datas;s||(s={main:r},l.datasAttr={main:"data"}),l.datas=l.mainData=null,m(r,s,l),F(s,function(c){F(r.TRANSFERABLE_METHODS,function(x){c.wrapMethod(x,E.curry(L,l))})}),r.wrapMethod("cloneShallow",E.curry(C,l)),F(r.CHANGABLE_METHODS,function(c){r.wrapMethod(c,E.curry(T,l))}),E.assert(s[r.dataType]===r)}function L(l,r){if(v(this)){var s=E.extend({},this[O]);s[this.dataType]=r,m(r,s,l)}else o(r,this.dataType,this[M],l);return r}function T(l,r){return l.struct&&l.struct.update(this),r}function C(l,r){return F(r[O],function(s,c){s!==r&&o(s.cloneShallow(),c,r,l)}),r}function f(l){var r=this[M];return l==null||r==null?r:r[O][l]}function v(l){return l[M]===l}function m(l,r,s){l[O]={},F(r,function(c,x){o(c,x,l,s)})}function o(l,r,s,c){s[O][r]=l,l[M]=s,l.dataType=r,c.struct&&(l[c.structAttr]=c.struct,c.struct[c.datasAttr[r]]=l),l.getLinkedData=f}var h=b;X.exports=h},543036:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(835454),M=O.makeInner,b=O.getDataItemValue,L=e(131879),T=L.createHashMap,C=L.each,f=L.map,v=L.isArray,m=L.isString,o=L.isObject,h=L.isTypedArray,l=L.isArrayLike,r=L.extend,s=L.assert,c=e(304345),x=e(317233),a=x.SOURCE_FORMAT_ORIGINAL,i=x.SOURCE_FORMAT_ARRAY_ROWS,n=x.SOURCE_FORMAT_OBJECT_ROWS,u=x.SOURCE_FORMAT_KEYED_COLUMNS,g=x.SOURCE_FORMAT_UNKNOWN,d=x.SOURCE_FORMAT_TYPED_ARRAY,y=x.SERIES_LAYOUT_BY_ROW,p={Must:1,Might:2,Not:3},w=M();function S(U){var V=U.option.source,Y=g;if(h(V))Y=d;else if(v(V)){V.length===0&&(Y=i);for(var $=0,K=V.length;$<K;$++){var J=V[$];if(J!=null){if(v(J)){Y=i;break}else if(o(J)){Y=n;break}}}}else if(o(V)){for(var Q in V)if(V.hasOwnProperty(Q)&&l(V[Q])){Y=u;break}}else if(V!=null)throw new Error("Invalid data");w(U).sourceFormat=Y}function R(U){return w(U).source}function B(U){w(U).datasetMap=T()}function k(U){var V=U.option,Y=V.data,$=h(Y)?d:a,K=!1,J=V.seriesLayoutBy,Q=V.sourceHeader,et=V.dimensions,nt=W(U);if(nt){var st=nt.option;Y=st.source,$=w(nt).sourceFormat,K=!0,J=J||st.seriesLayoutBy,Q==null&&(Q=st.sourceHeader),et=et||st.dimensions}var ut=P(Y,$,J,Q,et);w(U).source=new c({data:Y,fromDataset:K,seriesLayoutBy:J,sourceFormat:$,dimensionsDefine:ut.dimensionsDefine,startIndex:ut.startIndex,dimensionsDetectCount:ut.dimensionsDetectCount,encodeDefine:V.encode})}function P(U,V,Y,$,K){if(!U)return{dimensionsDefine:D(K)};var J,Q;if(V===i)$==="auto"||$==null?A(function(nt){nt!=null&&nt!=="-"&&(m(nt)?Q==null&&(Q=1):Q=0)},Y,U,10):Q=$?1:0,!K&&Q===1&&(K=[],A(function(nt,st){K[st]=nt??""},Y,U)),J=K?K.length:Y===y?U.length:U[0]?U[0].length:null;else if(V===n)K||(K=N(U));else if(V===u)K||(K=[],C(U,function(nt,st){K.push(st)}));else if(V===a){var et=b(U[0]);J=v(et)&&et.length||1}return{startIndex:Q,dimensionsDefine:D(K),dimensionsDetectCount:J}}function D(U){if(U){var V=T();return f(U,function(Y,$){if(Y=r({},o(Y)?Y:{name:Y}),Y.name==null)return Y;Y.name+="",Y.displayName==null&&(Y.displayName=Y.name);var K=V.get(Y.name);return K?Y.name+="-"+K.count++:V.set(Y.name,{count:1}),Y})}}function A(U,V,Y,$){if($==null&&($=1/0),V===y)for(var K=0;K<Y.length&&K<$;K++)U(Y[K]?Y[K][0]:null,K);else for(var J=Y[0]||[],K=0;K<J.length&&K<$;K++)U(J[K],K)}function N(U){for(var V=0,Y;V<U.length&&!(Y=U[V++]););if(Y){var $=[];return C(Y,function(K,J){$.push(J)}),$}}function I(U,V,Y){var $={},K=W(V);if(!K||!U)return $;var J=[],Q=[],et=V.ecModel,nt=w(et).datasetMap,st=K.uid+"_"+Y.seriesLayoutBy,ut,rt;U=U.slice(),C(U,function(Mt,Ft){!o(Mt)&&(U[Ft]={name:Mt}),Mt.type==="ordinal"&&ut==null&&(ut=Ft,rt=wt(U[Ft])),$[Mt.name]=[]});var ht=nt.get(st)||nt.set(st,{categoryWayDim:rt,valueWayDim:0});C(U,function(Mt,Ft){var Dt=Mt.name,Rt=wt(Mt);if(ut==null){var Tt=ht.valueWayDim;Pt($[Dt],Tt,Rt),Pt(Q,Tt,Rt),ht.valueWayDim+=Rt}else if(ut===Ft)Pt($[Dt],0,Rt),Pt(J,0,Rt);else{var Tt=ht.categoryWayDim;Pt($[Dt],Tt,Rt),Pt(Q,Tt,Rt),ht.categoryWayDim+=Rt}});function Pt(Mt,Ft,Dt){for(var Rt=0;Rt<Dt;Rt++)Mt.push(Ft+Rt)}function wt(Mt){var Ft=Mt.dimsDef;return Ft?Ft.length:1}return J.length&&($.itemName=J),Q.length&&($.seriesName=Q),$}function G(U,V,Y){var $={},K=W(U);if(!K)return $;var J=V.sourceFormat,Q=V.dimensionsDefine,et;(J===n||J===u)&&C(Q,function(ut,rt){(o(ut)?ut.name:ut)==="name"&&(et=rt)});var nt=function(){for(var ut={},rt={},ht=[],Pt=0,wt=Math.min(5,Y);Pt<wt;Pt++){var Mt=H(V.data,J,V.seriesLayoutBy,Q,V.startIndex,Pt);ht.push(Mt);var Ft=Mt===p.Not;if(Ft&&ut.v==null&&Pt!==et&&(ut.v=Pt),(ut.n==null||ut.n===ut.v||!Ft&&ht[ut.n]===p.Not)&&(ut.n=Pt),Dt(ut)&&ht[ut.n]!==p.Not)return ut;Ft||(Mt===p.Might&&rt.v==null&&Pt!==et&&(rt.v=Pt),(rt.n==null||rt.n===rt.v)&&(rt.n=Pt))}function Dt(Rt){return Rt.v!=null&&Rt.n!=null}return Dt(ut)?ut:Dt(rt)?rt:null}();if(nt){$.value=nt.v;var st=et??nt.n;$.itemName=[st],$.seriesName=[st]}return $}function W(U){var V=U.option,Y=V.data;if(!Y)return U.ecModel.getComponent("dataset",V.datasetIndex||0)}function Z(U,V){return H(U.data,U.sourceFormat,U.seriesLayoutBy,U.dimensionsDefine,U.startIndex,V)}function H(U,V,Y,$,K,J){var Q,et=5;if(h(U))return p.Not;var nt,st;if($){var ut=$[J];o(ut)?(nt=ut.name,st=ut.type):m(ut)&&(nt=ut)}if(st!=null)return st==="ordinal"?p.Must:p.Not;if(V===i)if(Y===y){for(var rt=U[J],ht=0;ht<(rt||[]).length&&ht<et;ht++)if((Q=Ft(rt[K+ht]))!=null)return Q}else for(var ht=0;ht<U.length&&ht<et;ht++){var Pt=U[K+ht];if(Pt&&(Q=Ft(Pt[J]))!=null)return Q}else if(V===n){if(!nt)return p.Not;for(var ht=0;ht<U.length&&ht<et;ht++){var wt=U[ht];if(wt&&(Q=Ft(wt[nt]))!=null)return Q}}else if(V===u){if(!nt)return p.Not;var rt=U[nt];if(!rt||h(rt))return p.Not;for(var ht=0;ht<rt.length&&ht<et;ht++)if((Q=Ft(rt[ht]))!=null)return Q}else if(V===a)for(var ht=0;ht<U.length&&ht<et;ht++){var wt=U[ht],Mt=b(wt);if(!v(Mt))return p.Not;if((Q=Ft(Mt[J]))!=null)return Q}function Ft(Dt){var Rt=m(Dt);if(Dt!=null&&isFinite(Dt)&&Dt!=="")return Rt?p.Might:p.Not;if(Rt&&Dt!=="-")return p.Must}return p.Not}z.BE_ORDINAL=p,z.detectSourceFormat=S,z.getSource=R,z.resetSourceDefaulter=B,z.prepareSource=k,z.makeSeriesEncodeForAxisCoordSys=I,z.makeSeriesEncodeForNameBased=G,z.guessOrdinal=Z},317233:function(X,z){var e="original",E="arrayRows",F="objectRows",O="keyedColumns",M="unknown",b="typedArray",L="column",T="row";z.SOURCE_FORMAT_ORIGINAL=e,z.SOURCE_FORMAT_ARRAY_ROWS=E,z.SOURCE_FORMAT_OBJECT_ROWS=F,z.SOURCE_FORMAT_KEYED_COLUMNS=O,z.SOURCE_FORMAT_UNKNOWN=M,z.SOURCE_FORMAT_TYPED_ARRAY=b,z.SERIES_LAYOUT_BY_COLUMN=L,z.SERIES_LAYOUT_BY_ROW=T},3440:function(X,z,e){var E=e(149500),F=e(550617),O=F.__DEV__,M=e(523593),b=e(131879),L=e(994819),T=e(358020),C=e(493318),f=e(291212),v=e(664527),m=e(903868),o=e(348642),h=e(177369),l=e(722637),r=e(715933),s=e(360684),c=e(502365),x=e(653646),a=e(901911),i=e(248070),n=e(835454),u=e(601655),g=u.throttle,d=e(964155),y=e(359117),p=e(193253),w=e(564014),S=e(499465),R=e(977383);e(118841);var B=e(352310),k=b.assert,P=b.each,D=b.isFunction,A=b.isObject,N=s.parseClassType,I="4.9.0",G={zrender:"4.3.2"},W=1,Z=1e3,H=800,U=900,V=5e3,Y=1e3,$=1100,K=2e3,J=3e3,Q=3500,et=4e3,nt=5e3,st={PROCESSOR:{FILTER:Z,SERIES_FILTER:H,STATISTIC:V},VISUAL:{LAYOUT:Y,PROGRESSIVE_LAYOUT:$,GLOBAL:K,CHART:J,POST_CHART_LAYOUT:Q,COMPONENT:et,BRUSH:nt}},ut="__flagInMainProcess",rt="__optionUpdated",ht=/^[a-zA-Z0-9_]+$/;function Pt(Vt,qt){return function(ae,ve,xe){if(!qt&&this._disposed){this.id;return}ae=ae&&ae.toLowerCase(),f.prototype[Vt].call(this,ae,ve,xe)}}function wt(){f.call(this)}wt.prototype.on=Pt("on",!0),wt.prototype.off=Pt("off",!0),wt.prototype.one=Pt("one",!0),b.mixin(wt,f);function Mt(Vt,ye,ae){ae=ae||{},typeof ye=="string"&&(ye=oe[ye]),this.id,this.group,this._dom=Vt;var ve="canvas",xe=this._zr=M.init(Vt,{renderer:ae.renderer||ve,devicePixelRatio:ae.devicePixelRatio,width:ae.width,height:ae.height});this._throttledZrFlush=g(b.bind(xe.flush,xe),17);var ye=b.clone(ye);ye&&l(ye,!0),this._theme=ye,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new o;var De=this._api=Ot(this);function Ne(we,ze){return we.__prio-ze.__prio}C(ie,Ne),C(Kt,Ne),this._scheduler=new w(this,De,Kt,ie),f.call(this,this._ecEventProcessor=new St),this._messageCenter=new wt,this._initEvents(),this.resize=b.bind(this.resize,this),this._pendingActions=[],xe.animation.on("frame",this._onframe,this),Ct(xe,this),b.setAsPrimitive(this)}var Ft=Mt.prototype;Ft._onframe=function(){if(!this._disposed){var Vt=this._scheduler;if(this[rt]){var qt=this[rt].silent;this[ut]=!0,Tt(this),Rt.update.call(this),this[ut]=!1,this[rt]=!1,vt.call(this,qt),Lt.call(this,qt)}else if(Vt.unfinished){var ae=W,ve=this._model,xe=this._api;Vt.unfinished=!1;do{var ye=+new Date;Vt.performSeriesTasks(ve),Vt.performDataProcessorTasks(ve),Nt(this,ve),Vt.performVisualTasks(ve),ft(this,this._model,xe,"remain"),ae-=+new Date-ye}while(ae>0&&Vt.unfinished);Vt.unfinished||this._zr.flush()}}},Ft.getDom=function(){return this._dom},Ft.getZr=function(){return this._zr},Ft.setOption=function(Vt,qt,ae){if(this._disposed){this.id;return}var ve;if(A(qt)&&(ae=qt.lazyUpdate,ve=qt.silent,qt=qt.notMerge),this[ut]=!0,!this._model||qt){var xe=new h(this._api),ye=this._theme,De=this._model=new v;De.scheduler=this._scheduler,De.init(null,null,ye,xe)}this._model.setOption(Vt,Jt),ae?(this[rt]={silent:ve},this[ut]=!1):(Tt(this),Rt.update.call(this),this._zr.flush(),this[rt]=!1,this[ut]=!1,vt.call(this,ve),Lt.call(this,ve))},Ft.setTheme=function(){E.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ft.getModel=function(){return this._model},Ft.getOption=function(){return this._model&&this._model.getOption()},Ft.getWidth=function(){return this._zr.getWidth()},Ft.getHeight=function(){return this._zr.getHeight()},Ft.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},Ft.getRenderedCanvas=function(Vt){if(T.canvasSupported){Vt=Vt||{},Vt.pixelRatio=Vt.pixelRatio||1,Vt.backgroundColor=Vt.backgroundColor||this._model.get("backgroundColor");var qt=this._zr;return qt.painter.getRenderedCanvas(Vt)}},Ft.getSvgDataURL=function(){if(T.svgSupported){var Vt=this._zr,qt=Vt.storage.getDisplayList();return b.each(qt,function(ae){ae.stopAnimation(!0)}),Vt.painter.toDataURL()}},Ft.getDataURL=function(Vt){if(this._disposed){this.id;return}Vt=Vt||{};var qt=Vt.excludeComponents,ae=this._model,ve=[],xe=this;P(qt,function(De){ae.eachComponent({mainType:De},function(Ne){var we=xe._componentsMap[Ne.__viewId];we.group.ignore||(ve.push(we),we.group.ignore=!0)})});var ye=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.getRenderedCanvas(Vt).toDataURL("image/"+(Vt&&Vt.type||"png"));return P(ve,function(De){De.group.ignore=!1}),ye},Ft.getConnectedDataURL=function(Vt){if(this._disposed){this.id;return}if(T.canvasSupported){var qt=Vt.type==="svg",ae=this.group,ve=Math.min,xe=Math.max,ye=1/0;if(ce[ae]){var De=ye,Ne=ye,we=-ye,ze=-ye,Ge=[],We=Vt&&Vt.pixelRatio||1;b.each(ne,function(Ae,Ye){if(Ae.group===ae){var Qe=qt?Ae.getZr().painter.getSvgDom().innerHTML:Ae.getRenderedCanvas(b.clone(Vt)),Ke=Ae.getDom().getBoundingClientRect();De=ve(Ke.left,De),Ne=ve(Ke.top,Ne),we=xe(Ke.right,we),ze=xe(Ke.bottom,ze),Ge.push({dom:Qe,left:Ke.left,top:Ke.top})}}),De*=We,Ne*=We,we*=We,ze*=We;var At=we-De,kt=ze-Ne,$t=b.createCanvas(),le=M.init($t,{renderer:qt?"svg":"canvas"});if(le.resize({width:At,height:kt}),qt){var me="";return P(Ge,function(Ae){var Ye=Ae.left-De,Qe=Ae.top-Ne;me+='<g transform="translate('+Ye+","+Qe+')">'+Ae.dom+"</g>"}),le.painter.getSvgRoot().innerHTML=me,Vt.connectedBackgroundColor&&le.painter.setBackgroundColor(Vt.connectedBackgroundColor),le.refreshImmediately(),le.painter.toDataURL()}else return Vt.connectedBackgroundColor&&le.add(new i.Rect({shape:{x:0,y:0,width:At,height:kt},style:{fill:Vt.connectedBackgroundColor}})),P(Ge,function(Ae){var Ye=new i.Image({style:{x:Ae.left*We-De,y:Ae.top*We-Ne,image:Ae.dom}});le.add(Ye)}),le.refreshImmediately(),$t.toDataURL("image/"+(Vt&&Vt.type||"png"))}else return this.getDataURL(Vt)}},Ft.convertToPixel=b.curry(Dt,"convertToPixel"),Ft.convertFromPixel=b.curry(Dt,"convertFromPixel");function Dt(Vt,qt,ae){if(this._disposed){this.id;return}var ve=this._model,xe=this._coordSysMgr.getCoordinateSystems(),ye;qt=n.parseFinder(ve,qt);for(var De=0;De<xe.length;De++){var Ne=xe[De];if(Ne[Vt]&&(ye=Ne[Vt](ve,qt,ae))!=null)return ye}}Ft.containPixel=function(Vt,qt){if(this._disposed){this.id;return}var ae=this._model,ve;return Vt=n.parseFinder(ae,Vt),b.each(Vt,function(xe,ye){ye.indexOf("Models")>=0&&b.each(xe,function(De){var Ne=De.coordinateSystem;if(Ne&&Ne.containPoint)ve|=!!Ne.containPoint(qt);else if(ye==="seriesModels"){var we=this._chartsMap[De.__viewId];we&&we.containPoint&&(ve|=we.containPoint(qt,De))}},this)},this),!!ve},Ft.getVisual=function(Vt,qt){var ae=this._model;Vt=n.parseFinder(ae,Vt,{defaultMainType:"series"});var ve=Vt.seriesModel,xe=ve.getData(),ye=Vt.hasOwnProperty("dataIndexInside")?Vt.dataIndexInside:Vt.hasOwnProperty("dataIndex")?xe.indexOfRawIndex(Vt.dataIndex):null;return ye!=null?xe.getItemVisual(ye,qt):xe.getVisual(qt)},Ft.getViewOfComponentModel=function(Vt){return this._componentsMap[Vt.__viewId]},Ft.getViewOfSeriesModel=function(Vt){return this._chartsMap[Vt.__viewId]};var Rt={prepareAndUpdate:function(Vt){Tt(this),Rt.update.call(this,Vt)},update:function(Vt){var qt=this._model,ae=this._api,ve=this._zr,xe=this._coordSysMgr,ye=this._scheduler;if(qt){ye.restoreData(qt,Vt),ye.performSeriesTasks(qt),xe.create(qt,ae),ye.performDataProcessorTasks(qt,Vt),Nt(this,qt),xe.update(qt,ae),zt(qt),ye.performVisualTasks(qt,Vt),Yt(this,qt,ae,Vt);var De=qt.get("backgroundColor")||"transparent";if(T.canvasSupported)ve.setBackgroundColor(De);else{var Ne=L.parse(De);De=L.stringify(Ne,"rgb"),Ne[3]===0&&(De="transparent")}gt(qt,ae)}},updateTransform:function(Vt){var qt=this._model,ae=this,ve=this._api;if(qt){var xe=[];qt.eachComponent(function(De,Ne){var we=ae.getViewOfComponentModel(Ne);if(we&&we.__alive)if(we.updateTransform){var ze=we.updateTransform(Ne,qt,ve,Vt);ze&&ze.update&&xe.push(we)}else xe.push(we)});var ye=b.createHashMap();qt.eachSeries(function(De){var Ne=ae._chartsMap[De.__viewId];if(Ne.updateTransform){var we=Ne.updateTransform(De,qt,ve,Vt);we&&we.update&&ye.set(De.uid,1)}else ye.set(De.uid,1)}),zt(qt),this._scheduler.performVisualTasks(qt,Vt,{setDirty:!0,dirtyMap:ye}),ft(ae,qt,ve,Vt,ye),gt(qt,this._api)}},updateView:function(Vt){var qt=this._model;qt&&(a.markUpdateMethod(Vt,"updateView"),zt(qt),this._scheduler.performVisualTasks(qt,Vt,{setDirty:!0}),Yt(this,this._model,this._api,Vt),gt(qt,this._api))},updateVisual:function(Vt){Rt.update.call(this,Vt)},updateLayout:function(Vt){Rt.update.call(this,Vt)}};function Tt(Vt){var qt=Vt._model,ae=Vt._scheduler;ae.restorePipelines(qt),ae.prepareStageTasks(),jt(Vt,"component",qt,ae),jt(Vt,"chart",qt,ae),ae.plan()}function mt(Vt,qt,ae,ve,xe){var ye=Vt._model;if(!ve){P(Vt._componentsViews.concat(Vt._chartsViews),ze);return}var De={};De[ve+"Id"]=ae[ve+"Id"],De[ve+"Index"]=ae[ve+"Index"],De[ve+"Name"]=ae[ve+"Name"];var Ne={mainType:ve,query:De};xe&&(Ne.subType=xe);var we=ae.excludeSeriesId;we!=null&&(we=b.createHashMap(n.normalizeToArray(we))),ye&&ye.eachComponent(Ne,function(Ge){(!we||we.get(Ge.id)==null)&&ze(Vt[ve==="series"?"_chartsMap":"_componentsMap"][Ge.__viewId])},Vt);function ze(Ge){Ge&&Ge.__alive&&Ge[qt]&&Ge[qt](Ge.__model,ye,Vt._api,ae)}}Ft.resize=function(Vt){if(this._disposed){this.id;return}this._zr.resize(Vt);var qt=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!qt){var ae=qt.resetOption("media"),ve=Vt&&Vt.silent;this[ut]=!0,ae&&Tt(this),Rt.update.call(this),this[ut]=!1,vt.call(this,ve),Lt.call(this,ve)}};function Nt(Vt,qt){var ae=Vt._chartsMap,ve=Vt._scheduler;qt.eachSeries(function(xe){ve.updateStreamModes(xe,ae[xe.__viewId])})}Ft.showLoading=function(Vt,qt){if(this._disposed){this.id;return}if(A(Vt)&&(qt=Vt,Vt=""),Vt=Vt||"default",this.hideLoading(),!!he[Vt]){var ae=he[Vt](this._api,qt),ve=this._zr;this._loadingFX=ae,ve.add(ae)}},Ft.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},Ft.makeActionFromEvent=function(Vt){var qt=b.extend({},Vt);return qt.type=Ut[Vt.type],qt},Ft.dispatchAction=function(Vt,qt){if(this._disposed){this.id;return}if(A(qt)||(qt={silent:!!qt}),!!Gt[Vt.type]&&this._model){if(this[ut]){this._pendingActions.push(Vt);return}ct.call(this,Vt,qt.silent),qt.flush?this._zr.flush(!0):qt.flush!==!1&&T.browser.weChat&&this._throttledZrFlush(),vt.call(this,qt.silent),Lt.call(this,qt.silent)}};function ct(Vt,qt){var ae=Vt.type,ve=Vt.escapeConnect,xe=Gt[ae],ye=xe.actionInfo,De=(ye.update||"update").split(":"),Ne=De.pop();De=De[0]!=null&&N(De[0]),this[ut]=!0;var we=[Vt],ze=!1;Vt.batch&&(ze=!0,we=b.map(Vt.batch,function(kt){return kt=b.defaults(b.extend({},kt),Vt),kt.batch=null,kt}));var Ge=[],We,At=ae==="highlight"||ae==="downplay";P(we,function(kt){We=xe.action(kt,this._model,this._api),We=We||b.extend({},kt),We.type=ye.event||We.type,Ge.push(We),At?mt(this,Ne,kt,"series"):De&&mt(this,Ne,kt,De.main,De.sub)},this),Ne!=="none"&&!At&&!De&&(this[rt]?(Tt(this),Rt.update.call(this,Vt),this[rt]=!1):Rt[Ne].call(this,Vt)),ze?We={type:ye.event||ae,escapeConnect:ve,batch:Ge}:We=Ge[0],this[ut]=!1,!qt&&this._messageCenter.trigger(We.type,We)}function vt(Vt){for(var qt=this._pendingActions;qt.length;){var ae=qt.shift();ct.call(this,ae,Vt)}}function Lt(Vt){!Vt&&this.trigger("updated")}function Ct(Vt,qt){Vt.on("rendered",function(){qt.trigger("rendered"),Vt.animation.isFinished()&&!qt[rt]&&!qt._scheduler.unfinished&&!qt._pendingActions.length&&qt.trigger("finished")})}Ft.appendData=function(Vt){if(this._disposed){this.id;return}var qt=Vt.seriesIndex,ae=this.getModel(),ve=ae.getSeriesByIndex(qt);ve.appendData(Vt),this._scheduler.unfinished=!0},Ft.on=Pt("on",!1),Ft.off=Pt("off",!1),Ft.one=Pt("one",!1);function jt(Vt,qt,ae,ve){for(var xe=qt==="component",ye=xe?Vt._componentsViews:Vt._chartsViews,De=xe?Vt._componentsMap:Vt._chartsMap,Ne=Vt._zr,we=Vt._api,ze=0;ze<ye.length;ze++)ye[ze].__alive=!1;xe?ae.eachComponent(function(At,kt){At!=="series"&&Ge(kt)}):ae.eachSeries(Ge);function Ge(At){var kt="_ec_"+At.id+"_"+At.type,$t=De[kt];if(!$t){var le=N(At.type),me=xe?x.getClass(le.main,le.sub):a.getClass(le.sub);$t=new me,$t.init(ae,we),De[kt]=$t,ye.push($t),Ne.add($t.group)}At.__viewId=$t.__id=kt,$t.__alive=!0,$t.__model=At,$t.group.__ecComponentInfo={mainType:At.mainType,index:At.componentIndex},!xe&&ve.prepareView($t,At,ae,we)}for(var ze=0;ze<ye.length;){var We=ye[ze];We.__alive?ze++:(!xe&&We.renderTask.dispose(),Ne.remove(We.group),We.dispose(ae,we),ye.splice(ze,1),delete De[We.__id],We.__id=We.group.__ecComponentInfo=null)}}function zt(Vt){Vt.clearColorPalette(),Vt.eachSeries(function(qt){qt.clearColorPalette()})}function Yt(Vt,qt,ae,ve){Zt(Vt,qt,ae,ve),P(Vt._chartsViews,function(xe){xe.__alive=!1}),ft(Vt,qt,ae,ve),P(Vt._chartsViews,function(xe){xe.__alive||xe.remove(qt,ae)})}function Zt(Vt,qt,ae,ve,xe){P(xe||Vt._componentsViews,function(ye){var De=ye.__model;ye.render(De,qt,ae,ve),yt(De,ye)})}function ft(Vt,qt,ae,ve,xe){var ye=Vt._scheduler,De;qt.eachSeries(function(Ne){var we=Vt._chartsMap[Ne.__viewId];we.__alive=!0;var ze=we.renderTask;ye.updatePayload(ze,ve),xe&&xe.get(Ne.uid)&&ze.dirty(),De|=ze.perform(ye.getPerformArgs(ze)),we.group.silent=!!Ne.get("silent"),yt(Ne,we),it(Ne,we)}),ye.unfinished|=De,ot(Vt,qt),y(Vt._zr.dom,qt)}function gt(Vt,qt){P(te,function(ae){ae(Vt,qt)})}var dt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];Ft._initEvents=function(){P(dt,function(Vt){var qt=function(ae){var ve=this.getModel(),xe=ae.target,ye,De=Vt==="globalout";if(De)ye={};else if(xe&&xe.dataIndex!=null){var Ne=xe.dataModel||ve.getSeriesByIndex(xe.seriesIndex);ye=Ne&&Ne.getDataParams(xe.dataIndex,xe.dataType,xe)||{}}else xe&&xe.eventData&&(ye=b.extend({},xe.eventData));if(ye){var we=ye.componentType,ze=ye.componentIndex;(we==="markLine"||we==="markPoint"||we==="markArea")&&(we="series",ze=ye.seriesIndex);var Ge=we&&ze!=null&&ve.getComponent(we,ze),We=Ge&&this[Ge.mainType==="series"?"_chartsMap":"_componentsMap"][Ge.__viewId];ye.event=ae,ye.type=Vt,this._ecEventProcessor.eventInfo={targetEl:xe,packedEvent:ye,model:Ge,view:We},this.trigger(Vt,ye)}};qt.zrEventfulCallAtLast=!0,this._zr.on(Vt,qt,this)},this),P(Ut,function(Vt,qt){this._messageCenter.on(qt,function(ae){this.trigger(qt,ae)},this)},this)},Ft.isDisposed=function(){return this._disposed},Ft.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},Ft.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0,n.setAttribute(this.getDom(),It,"");var Vt=this._api,qt=this._model;P(this._componentsViews,function(ae){ae.dispose(qt,Vt)}),P(this._chartsViews,function(ae){ae.dispose(qt,Vt)}),this._zr.dispose(),delete ne[this.id]},b.mixin(Mt,f);function lt(Vt){}function ot(Vt,qt){var ae=Vt._zr,ve=ae.storage,xe=0;ve.traverse(function(ye){xe++}),xe>qt.get("hoverLayerThreshold")&&!T.node&&qt.eachSeries(function(ye){if(!ye.preventUsingHoverLayer){var De=Vt._chartsMap[ye.__viewId];De.__alive&&De.group.traverse(function(Ne){Ne.useHoverLayer=!0})}})}function it(Vt,qt){var ae=Vt.get("blendMode")||null;qt.group.traverse(function(ve){ve.isGroup||ve.style.blend!==ae&&ve.setStyle("blend",ae),ve.eachPendingDisplayable&&ve.eachPendingDisplayable(function(xe){xe.setStyle("blend",ae)})})}function yt(Vt,qt){var ae=Vt.get("z"),ve=Vt.get("zlevel");qt.group.traverse(function(xe){xe.type!=="group"&&(ae!=null&&(xe.z=ae),ve!=null&&(xe.zlevel=ve))})}function Ot(Vt){var qt=Vt._coordSysMgr;return b.extend(new m(Vt),{getCoordinateSystems:b.bind(qt.getCoordinateSystems,qt),getComponentByElement:function(ae){for(;ae;){var ve=ae.__ecComponentInfo;if(ve!=null)return Vt._model.getComponent(ve.mainType,ve.index);ae=ae.parent}}})}function St(){this.eventInfo}St.prototype={constructor:St,normalizeQuery:function(Vt){var qt={},ae={},ve={};if(b.isString(Vt)){var xe=N(Vt);qt.mainType=xe.main||null,qt.subType=xe.sub||null}else{var ye=["Index","Name","Id"],De={name:1,dataIndex:1,dataType:1};b.each(Vt,function(Ne,we){for(var ze=!1,Ge=0;Ge<ye.length;Ge++){var We=ye[Ge],At=we.lastIndexOf(We);if(At>0&&At===we.length-We.length){var kt=we.slice(0,At);kt!=="data"&&(qt.mainType=kt,qt[We.toLowerCase()]=Ne,ze=!0)}}De.hasOwnProperty(we)&&(ae[we]=Ne,ze=!0),ze||(ve[we]=Ne)})}return{cptQuery:qt,dataQuery:ae,otherQuery:ve}},filter:function(Vt,qt,ae){var ve=this.eventInfo;if(!ve)return!0;var xe=ve.targetEl,ye=ve.packedEvent,De=ve.model,Ne=ve.view;if(!De||!Ne)return!0;var we=qt.cptQuery,ze=qt.dataQuery;return Ge(we,De,"mainType")&&Ge(we,De,"subType")&&Ge(we,De,"index","componentIndex")&&Ge(we,De,"name")&&Ge(we,De,"id")&&Ge(ze,ye,"name")&&Ge(ze,ye,"dataIndex")&&Ge(ze,ye,"dataType")&&(!Ne.filterForExposedEvent||Ne.filterForExposedEvent(Vt,qt.otherQuery,xe,ye));function Ge(We,At,kt,$t){return We[kt]==null||At[$t||kt]===We[kt]}},afterTrigger:function(){this.eventInfo=null}};var Gt={},Ut={},Kt=[],Jt=[],te=[],ie=[],oe={},he={},ne={},ce={},ge=new Date-0,Me=new Date-0,It="_echarts_instance_";function Wt(Vt){var qt=0,ae=1,ve=2,xe="__connectUpdateStatus";function ye(De,Ne){for(var we=0;we<De.length;we++){var ze=De[we];ze[xe]=Ne}}P(Ut,function(De,Ne){Vt._messageCenter.on(Ne,function(we){if(ce[Vt.group]&&Vt[xe]!==qt){if(we&&we.escapeConnect)return;var ze=Vt.makeActionFromEvent(we),Ge=[];P(ne,function(We){We!==Vt&&We.group===Vt.group&&Ge.push(We)}),ye(Ge,qt),P(Ge,function(We){We[xe]!==ae&&We.dispatchAction(ze)}),ye(Ge,ve)}})})}function _t(Vt,qt,ae){var ve=Pe(Vt);if(ve)return ve;var xe=new Mt(Vt,qt,ae);return xe.id="ec_"+ge++,ne[xe.id]=xe,n.setAttribute(Vt,It,xe.id),Wt(xe),xe}function ee(Vt){if(b.isArray(Vt)){var qt=Vt;Vt=null,P(qt,function(ae){ae.group!=null&&(Vt=ae.group)}),Vt=Vt||"g_"+Me++,P(qt,function(ae){ae.group=Vt})}return ce[Vt]=!0,Vt}function re(Vt){ce[Vt]=!1}var de=re;function Se(Vt){typeof Vt=="string"?Vt=ne[Vt]:Vt instanceof Mt||(Vt=Pe(Vt)),Vt instanceof Mt&&!Vt.isDisposed()&&Vt.dispose()}function Pe(Vt){return ne[n.getAttribute(Vt,It)]}function Le(Vt){return ne[Vt]}function Ie(Vt,qt){oe[Vt]=qt}function pe(Vt){Jt.push(Vt)}function Oe(Vt,qt){Ze(Kt,Vt,qt,Z)}function Fe(Vt){te.push(Vt)}function Ve(Vt,qt,ae){typeof qt=="function"&&(ae=qt,qt="");var ve=A(Vt)?Vt.type:[Vt,Vt={event:qt}][0];Vt.event=(Vt.event||ve).toLowerCase(),qt=Vt.event,k(ht.test(ve)&&ht.test(qt)),Gt[ve]||(Gt[ve]={action:ae,actionInfo:Vt}),Ut[qt]=ve}function be(Vt,qt){o.register(Vt,qt)}function Be(Vt){var qt=o.get(Vt);if(qt)return qt.getDimensionsInfo?qt.getDimensionsInfo():qt.dimensions.slice()}function He(Vt,qt){Ze(ie,Vt,qt,Y,"layout")}function ke(Vt,qt){Ze(ie,Vt,qt,J,"visual")}function Ze(Vt,qt,ae,ve,xe){(D(qt)||A(qt))&&(ae=qt,qt=ve);var ye=w.wrapStageHandler(ae,xe);return ye.__prio=qt,ye.__raw=ae,Vt.push(ye),ye}function _(Vt,qt){he[Vt]=qt}function at(Vt){return s.extend(Vt)}function xt(Vt){return x.extend(Vt)}function bt(Vt){return c.extend(Vt)}function Bt(Vt){return a.extend(Vt)}function Qt(Vt){b.$override("createCanvas",Vt)}function ue(Vt,qt,ae){B.registerMap(Vt,qt,ae)}function Ce(Vt){var qt=B.retrieveMap(Vt);return qt&&qt[0]&&{geoJson:qt[0].geoJSON,specialAreas:qt[0].specialAreas}}ke(K,d),pe(l),Oe(U,r),_("default",p),Ve({type:"highlight",event:"highlight",update:"highlight"},b.noop),Ve({type:"downplay",event:"downplay",update:"downplay"},b.noop),Ie("light",S),Ie("dark",R);var Te={};z.version=I,z.dependencies=G,z.PRIORITY=st,z.init=_t,z.connect=ee,z.disConnect=re,z.disconnect=de,z.dispose=Se,z.getInstanceByDom=Pe,z.getInstanceById=Le,z.registerTheme=Ie,z.registerPreprocessor=pe,z.registerProcessor=Oe,z.registerPostUpdate=Fe,z.registerAction=Ve,z.registerCoordinateSystem=be,z.getCoordinateSystemDimensions=Be,z.registerLayout=He,z.registerVisual=ke,z.registerLoading=_,z.extendComponentModel=at,z.extendComponentView=xt,z.extendSeriesModel=bt,z.extendChartView=Bt,z.setCanvasCreator=Qt,z.registerMap=ue,z.getMap=Ce,z.dataTool=Te;var Ue=e(940451);(function(){for(var Vt in Ue)Ue.hasOwnProperty(Vt)&&(z[Vt]=Ue[Vt])})()},940451:function(X,z,e){var E=e(523593);z.zrender=E;var F=e(343970);z.matrix=F;var O=e(912072);z.vector=O;var M=e(131879),b=e(994819);z.color=b;var L=e(248070),T=e(748354);z.number=T;var C=e(317795);z.format=C;var f=e(601655),v=f.throttle;z.throttle=f.throttle;var m=e(145251);z.helper=m;var o=e(147731);z.parseGeoJSON=o;var h=e(58677);z.List=h;var l=e(56785);z.Model=l;var r=e(536492);z.Axis=r;var s=e(358020);z.env=s;var c=o,x={};M.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(i){x[i]=M[i]});var a={};M.each(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(i){a[i]=L[i]}),z.parseGeoJson=c,z.util=x,z.graphic=a},145251:function(X,z,e){var E=e(131879),F=e(901664),O=e(799538),M=e(142544),b=e(56785),L=e(930871),T=L.getLayoutRect;z.getLayoutRect=L.getLayoutRect;var C=e(553618),f=C.enableDataStack,v=C.isDimensionStacked,m=C.getStackedDimension,o=e(972993);z.completeDimensions=o;var h=e(480554);z.createDimensions=h;var l=e(435730);z.createSymbol=l.createSymbol;function r(a){return F(a.getSource(),a)}var s={isDimensionStacked:v,enableDataStack:f,getStackedDimension:m};function c(a,i){var n=i;b.isInstance(i)||(n=new b(i),E.mixin(n,M));var u=O.createScaleByModel(n);return u.setExtent(a[0],a[1]),O.niceScaleExtent(u,n),u}function x(a){E.mixin(a,M)}z.createList=r,z.dataStack=s,z.createScale=c,z.mixinAxisModelCommonMethods=x},516923:function(X){var z={legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};X.exports=z},919641:function(X,z,e){var E=e(131879),F=e(748354),O=F.parsePercent,M=e(553618),b=M.isDimensionStacked,L=e(250629),T="__ec_stack_",C=.5,f=typeof Float32Array<"u"?Float32Array:Array;function v(g){return g.get("stack")||T+g.seriesIndex}function m(g){return g.dim+g.index}function o(g){var d=[],y=g.axis,p="axis0";if(y.type==="category"){for(var w=y.getBandWidth(),S=0;S<g.count;S++)d.push(E.defaults({bandWidth:w,axisKey:p,stackId:T+S},g));for(var R=s(d),B=[],S=0;S<g.count;S++){var k=R[p][T+S];k.offsetCenter=k.offset+k.width/2,B.push(k)}return B}}function h(g,d){var y=[];return d.eachSeriesByType(g,function(p){i(p)&&!n(p)&&y.push(p)}),y}function l(g){var d={};E.each(g,function(k){var P=k.coordinateSystem,D=P.getBaseAxis();if(!(D.type!=="time"&&D.type!=="value"))for(var A=k.getData(),N=D.dim+"_"+D.index,I=A.mapDimension(D.dim),G=0,W=A.count();G<W;++G){var Z=A.get(I,G);d[N]?d[N].push(Z):d[N]=[Z]}});var y=[];for(var p in d)if(d.hasOwnProperty(p)){var w=d[p];if(w){w.sort(function(k,P){return k-P});for(var S=null,R=1;R<w.length;++R){var B=w[R]-w[R-1];B>0&&(S=S===null?B:Math.min(S,B))}y[p]=S}}return y}function r(g){var d=l(g),y=[];return E.each(g,function(p){var w=p.coordinateSystem,S=w.getBaseAxis(),R=S.getExtent(),B;if(S.type==="category")B=S.getBandWidth();else if(S.type==="value"||S.type==="time"){var k=S.dim+"_"+S.index,P=d[k],D=Math.abs(R[1]-R[0]),A=S.scale.getExtent(),N=Math.abs(A[1]-A[0]);B=P?D/N*P:D}else{var I=p.getData();B=Math.abs(R[1]-R[0])/I.count()}var G=O(p.get("barWidth"),B),W=O(p.get("barMaxWidth"),B),Z=O(p.get("barMinWidth")||1,B),H=p.get("barGap"),U=p.get("barCategoryGap");y.push({bandWidth:B,barWidth:G,barMaxWidth:W,barMinWidth:Z,barGap:H,barCategoryGap:U,axisKey:m(S),stackId:v(p)})}),s(y)}function s(g){var d={};E.each(g,function(p,w){var S=p.axisKey,R=p.bandWidth,B=d[S]||{bandWidth:R,remainedWidth:R,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},k=B.stacks;d[S]=B;var P=p.stackId;k[P]||B.autoWidthCount++,k[P]=k[P]||{width:0,maxWidth:0};var D=p.barWidth;D&&!k[P].width&&(k[P].width=D,D=Math.min(B.remainedWidth,D),B.remainedWidth-=D);var A=p.barMaxWidth;A&&(k[P].maxWidth=A);var N=p.barMinWidth;N&&(k[P].minWidth=N);var I=p.barGap;I!=null&&(B.gap=I);var G=p.barCategoryGap;G!=null&&(B.categoryGap=G)});var y={};return E.each(d,function(p,w){y[w]={};var S=p.stacks,R=p.bandWidth,B=O(p.categoryGap,R),k=O(p.gap,1),P=p.remainedWidth,D=p.autoWidthCount,A=(P-B)/(D+(D-1)*k);A=Math.max(A,0),E.each(S,function(W){var Z=W.maxWidth,H=W.minWidth;if(W.width){var U=W.width;Z&&(U=Math.min(U,Z)),H&&(U=Math.max(U,H)),W.width=U,P-=U+k*U,D--}else{var U=A;Z&&Z<U&&(U=Math.min(Z,P)),H&&H>U&&(U=H),U!==A&&(W.width=U,P-=U+k*U,D--)}}),A=(P-B)/(D+(D-1)*k),A=Math.max(A,0);var N=0,I;E.each(S,function(W,Z){W.width||(W.width=A),I=W,N+=W.width*(1+k)}),I&&(N-=I.width*k);var G=-N/2;E.each(S,function(W,Z){y[w][Z]=y[w][Z]||{bandWidth:R,offset:G,width:W.width},G+=W.width*(1+k)})}),y}function c(g,d,y){if(g&&d){var p=g[m(d)];return p!=null&&y!=null&&(p=p[v(y)]),p}}function x(g,d){var y=h(g,d),p=r(y),w={},S={};E.each(y,function(R){var B=R.getData(),k=R.coordinateSystem,P=k.getBaseAxis(),D=v(R),A=p[m(P)][D],N=A.offset,I=A.width,G=k.getOtherAxis(P),W=R.get("barMinHeight")||0;w[D]=w[D]||[],S[D]=S[D]||[],B.setLayout({bandWidth:A.bandWidth,offset:N,size:I});for(var Z=B.mapDimension(G.dim),H=B.mapDimension(P.dim),U=b(B,Z),V=G.isHorizontal(),Y=u(P,G,U),$=0,K=B.count();$<K;$++){var J=B.get(Z,$),Q=B.get(H,$),et=J>=0?"p":"n",nt=Y;U&&(w[D][Q]||(w[D][Q]={p:Y,n:Y}),nt=w[D][Q][et]);var st,ut,rt,ht;if(V){var Pt=k.dataToPoint([J,Q]);st=nt,ut=Pt[1]+N,rt=Pt[0]-Y,ht=I,Math.abs(rt)<W&&(rt=(rt<0?-1:1)*W),isNaN(rt)||U&&(w[D][Q][et]+=rt)}else{var Pt=k.dataToPoint([Q,J]);st=Pt[0]+N,ut=nt,rt=I,ht=Pt[1]-Y,Math.abs(ht)<W&&(ht=(ht<=0?-1:1)*W),isNaN(ht)||U&&(w[D][Q][et]+=ht)}B.setItemLayout($,{x:st,y:ut,width:rt,height:ht})}},this)}var a={seriesType:"bar",plan:L(),reset:function(g){if(!i(g)||!n(g))return;var d=g.getData(),y=g.coordinateSystem,p=y.grid.getRect(),w=y.getBaseAxis(),S=y.getOtherAxis(w),R=d.mapDimension(S.dim),B=d.mapDimension(w.dim),k=S.isHorizontal(),P=k?0:1,D=c(r([g]),w,g).width;return D>C||(D=C),{progress:A};function A(N,I){for(var G=N.count,W=new f(G*2),Z=new f(G*2),H=new f(G),U,V=[],Y=[],$=0,K=0;(U=N.next())!=null;)Y[P]=I.get(R,U),Y[1-P]=I.get(B,U),V=y.dataToPoint(Y,null,V),Z[$]=k?p.x+p.width:V[0],W[$++]=V[0],Z[$]=k?V[1]:p.y+p.height,W[$++]=V[1],H[K++]=U;I.setLayout({largePoints:W,largeDataIndices:H,largeBackgroundPoints:Z,barWidth:D,valueAxisStart:u(w,S,!1),backgroundStart:k?p.x:p.y,valueAxisHorizontal:k})}}};function i(g){return g.coordinateSystem&&g.coordinateSystem.type==="cartesian2d"}function n(g){return g.pipelineContext&&g.pipelineContext.large}function u(g,d,y){return d.toGlobalCoord(d.dataToCoord(d.type==="log"?1:0))}z.getLayoutOnAxis=o,z.prepareLayoutBarSeries=h,z.makeColumnLayout=r,z.retrieveColumnLayout=c,z.layout=x,z.largeLayout=a},724741:function(X,z,e){var E=e(131879),F=e(748354),O=F.parsePercent,M=e(553618),b=M.isDimensionStacked;function L(m){return m.get("stack")||"__ec_stack_"+m.seriesIndex}function T(m,o){return o.dim+m.model.componentIndex}function C(m,o,h){var l={},r=f(E.filter(o.getSeriesByType(m),function(s){return!o.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));o.eachSeriesByType(m,function(s){if(s.coordinateSystem.type==="polar"){var c=s.getData(),x=s.coordinateSystem,a=x.getBaseAxis(),i=T(x,a),n=L(s),u=r[i][n],g=u.offset,d=u.width,y=x.getOtherAxis(a),p=s.coordinateSystem.cx,w=s.coordinateSystem.cy,S=s.get("barMinHeight")||0,R=s.get("barMinAngle")||0;l[n]=l[n]||[];for(var B=c.mapDimension(y.dim),k=c.mapDimension(a.dim),P=b(c,B),D=a.dim!=="radius"||!s.get("roundCap",!0),A=y.dim==="radius"?y.dataToRadius(0):y.dataToAngle(0),N=0,I=c.count();N<I;N++){var G=c.get(B,N),W=c.get(k,N),Z=G>=0?"p":"n",H=A;P&&(l[n][W]||(l[n][W]={p:A,n:A}),H=l[n][W][Z]);var U,V,Y,$;if(y.dim==="radius"){var K=y.dataToRadius(G)-A,J=a.dataToAngle(W);Math.abs(K)<S&&(K=(K<0?-1:1)*S),U=H,V=H+K,Y=J-g,$=Y-d,P&&(l[n][W][Z]=V)}else{var Q=y.dataToAngle(G,D)-A,et=a.dataToRadius(W);Math.abs(Q)<R&&(Q=(Q<0?-1:1)*R),U=et+g,V=U+d,Y=H,$=H+Q,P&&(l[n][W][Z]=$)}c.setItemLayout(N,{cx:p,cy:w,r0:U,r:V,startAngle:-Y*Math.PI/180,endAngle:-$*Math.PI/180})}}},this)}function f(m,o){var h={};E.each(m,function(r,s){var c=r.getData(),x=r.coordinateSystem,a=x.getBaseAxis(),i=T(x,a),n=a.getExtent(),u=a.type==="category"?a.getBandWidth():Math.abs(n[1]-n[0])/c.count(),g=h[i]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=g.stacks;h[i]=g;var y=L(r);d[y]||g.autoWidthCount++,d[y]=d[y]||{width:0,maxWidth:0};var p=O(r.get("barWidth"),u),w=O(r.get("barMaxWidth"),u),S=r.get("barGap"),R=r.get("barCategoryGap");p&&!d[y].width&&(p=Math.min(g.remainedWidth,p),d[y].width=p,g.remainedWidth-=p),w&&(d[y].maxWidth=w),S!=null&&(g.gap=S),R!=null&&(g.categoryGap=R)});var l={};return E.each(h,function(r,s){l[s]={};var c=r.stacks,x=r.bandWidth,a=O(r.categoryGap,x),i=O(r.gap,1),n=r.remainedWidth,u=r.autoWidthCount,g=(n-a)/(u+(u-1)*i);g=Math.max(g,0),E.each(c,function(w,S){var R=w.maxWidth;R&&R<g&&(R=Math.min(R,n),w.width&&(R=Math.min(R,w.width)),n-=R,w.width=R,u--)}),g=(n-a)/(u+(u-1)*i),g=Math.max(g,0);var d=0,y;E.each(c,function(w,S){w.width||(w.width=g),y=w,d+=w.width*(1+i)}),y&&(d-=y.width*i);var p=-d/2;E.each(c,function(w,S){l[s][S]=l[s][S]||{offset:p,width:w.width},p+=w.width*(1+i)})}),l}var v=C;X.exports=v},275028:function(X,z,e){var E=e(131879),F=E.map,O=e(250629),M=e(553618),b=M.isDimensionStacked;function L(T){return{seriesType:T,plan:O(),reset:function(C){var f=C.getData(),v=C.coordinateSystem,m=C.pipelineContext,o=m.large;if(!v)return;var h=F(v.dimensions,function(c){return f.mapDimension(c)}).slice(0,2),l=h.length,r=f.getCalculationInfo("stackResultDimension");b(f,h[0])&&(h[0]=r),b(f,h[1])&&(h[1]=r);function s(c,x){for(var a=c.end-c.start,i=o&&new Float32Array(a*l),n=c.start,u=0,g=[],d=[];n<c.end;n++){var y;if(l===1){var p=x.get(h[0],n);y=!isNaN(p)&&v.dataToPoint(p,null,d)}else{var p=g[0]=x.get(h[0],n),w=g[1]=x.get(h[1],n);y=!isNaN(p)&&!isNaN(w)&&v.dataToPoint(g,null,d)}o?(i[u++]=y?y[0]:NaN,i[u++]=y?y[1]:NaN):x.setItemLayout(n,y&&y.slice()||[NaN,NaN])}o&&x.setLayout("symbolPoints",i)}return l&&{progress:s}}}}X.exports=L},193253:function(X,z,e){var E=e(131879),F=e(248070),O=e(872113),M=Math.PI;function b(L,T){T=T||{},E.defaults(T,{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var C=new F.Group,f=new F.Rect({style:{fill:T.maskColor},zlevel:T.zlevel,z:1e4});C.add(f);var v=T.fontSize+" sans-serif",m=new F.Rect({style:{fill:"none",text:T.text,font:v,textPosition:"right",textDistance:10,textFill:T.textColor},zlevel:T.zlevel,z:10001});if(C.add(m),T.showSpinner){var o=new F.Arc({shape:{startAngle:-M/2,endAngle:-M/2+.1,r:T.spinnerRadius},style:{stroke:T.color,lineCap:"round",lineWidth:T.lineWidth},zlevel:T.zlevel,z:10001});o.animateShape(!0).when(1e3,{endAngle:M*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:M*3/2}).delay(300).start("circularInOut"),C.add(o)}return C.resize=function(){var h=O.getWidth(T.text,v),l=T.showSpinner?T.spinnerRadius:0,r=(L.getWidth()-l*2-(T.showSpinner&&h?10:0)-h)/2-(T.showSpinner?0:h/2),s=L.getHeight()/2;T.showSpinner&&o.setShape({cx:r,cy:s}),m.setShape({x:r-l,y:s-l,width:l*2,height:l*2}),f.setShape({x:0,y:0,width:L.getWidth(),height:L.getHeight()})},C.resize(),C}X.exports=b},360684:function(X,z,e){var E=e(131879),F=e(56785),O=e(650777),M=e(28108),b=M.enableClassManagement,L=M.parseClassType,T=e(835454),C=T.makeInner,f=e(930871),v=e(453286),m=C(),o=F.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(r,s,c,x){F.call(this,r,s,c,x),this.uid=O.getUID("ec_cpt_model")},init:function(r,s,c,x){this.mergeDefaultAndTheme(r,c)},mergeDefaultAndTheme:function(r,s){var c=this.layoutMode,x=c?f.getLayoutParams(r):{},a=s.getTheme();E.merge(r,a.get(this.mainType)),E.merge(r,this.getDefaultOption()),c&&f.mergeLayoutParam(r,x,c)},mergeOption:function(r,s){E.merge(this.option,r,!0);var c=this.layoutMode;c&&f.mergeLayoutParam(this.option,r,c)},optionUpdated:function(r,s){},getDefaultOption:function(){var r=m(this);if(!r.defaultOption){for(var s=[],c=this.constructor;c;){var x=c.prototype.defaultOption;x&&s.push(x),c=c.superClass}for(var a={},i=s.length-1;i>=0;i--)a=E.merge(a,s[i],!0);r.defaultOption=a}return r.defaultOption},getReferringComponents:function(r){return this.ecModel.queryComponents({mainType:r,index:this.get(r+"Index",!0),id:this.get(r+"Id",!0)})}});b(o,{registerWhenExtend:!0}),O.enableSubTypeDefaulter(o),O.enableTopologicalTravel(o,h);function h(r){var s=[];return E.each(o.getClassesByMainType(r),function(c){s=s.concat(c.prototype.dependencies||[])}),s=E.map(s,function(c){return L(c).main}),r!=="dataset"&&E.indexOf(s,"dataset")<=0&&s.unshift("dataset"),s}E.mixin(o,v);var l=o;X.exports=l},664527:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=O.each,b=O.filter,L=O.map,T=O.isArray,C=O.indexOf,f=O.isObject,v=O.isString,m=O.createHashMap,o=O.assert,h=O.clone,l=O.merge,r=O.extend,s=O.mixin,c=e(835454),x=e(56785),a=e(360684),i=e(417807),n=e(276790),u=e(543036),g=u.resetSourceDefaulter,d="\0_ec_inner",y=x.extend({init:function(N,I,G,W){G=G||{},this.option=null,this._theme=new x(G),this._optionManager=W},setOption:function(N,I){o(!(d in N),"please use chart.getOption()"),this._optionManager.setOption(N,I),this.resetOption(null)},resetOption:function(N){var I=!1,G=this._optionManager;if(!N||N==="recreate"){var W=G.mountOption(N==="recreate");!this.option||N==="recreate"?S.call(this,W):(this.restoreData(),this.mergeOption(W)),I=!0}if((N==="timeline"||N==="media")&&this.restoreData(),!N||N==="recreate"||N==="timeline"){var Z=G.getTimelineOption(this);Z&&(this.mergeOption(Z),I=!0)}if(!N||N==="recreate"||N==="media"){var H=G.getMediaOption(this,this._api);H.length&&M(H,function(U){this.mergeOption(U,I=!0)},this)}return I},mergeOption:function(N){var I=this.option,G=this._componentsMap,W=[];g(this),M(N,function(H,U){H!=null&&(a.hasClass(U)?U&&W.push(U):I[U]=I[U]==null?h(H):l(I[U],H,!0))}),a.topologicalTravel(W,a.getAllClassMainTypes(),Z,this);function Z(H,U){var V=c.normalizeToArray(N[H]),Y=c.mappingToExists(G.get(H),V);c.makeIdAndName(Y),M(Y,function(K,J){var Q=K.option;f(Q)&&(K.keyInfo.mainType=H,K.keyInfo.subType=B(H,Q,K.exist))});var $=R(G,U);I[H]=[],G.set(H,[]),M(Y,function(K,J){var Q=K.exist,et=K.option;if(o(f(et)||Q,"Empty component definition"),!et)Q.mergeOption({},this),Q.optionUpdated({},!1);else{var nt=a.getClass(H,K.keyInfo.subType,!0);if(Q&&Q.constructor===nt)Q.name=K.keyInfo.name,Q.mergeOption(et,this),Q.optionUpdated(et,!1);else{var st=r({dependentModels:$,componentIndex:J},K.keyInfo);Q=new nt(et,this,this,st),r(Q,st),Q.init(et,this,this,st),Q.optionUpdated(null,!0)}}G.get(H)[J]=Q,I[H][J]=Q.option},this),H==="series"&&k(this,G.get("series"))}this._seriesIndicesMap=m(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var N=h(this.option);return M(N,function(I,G){if(a.hasClass(G)){for(var I=c.normalizeToArray(I),W=I.length-1;W>=0;W--)c.isIdInner(I[W])&&I.splice(W,1);N[G]=I}}),delete N[d],N},getTheme:function(){return this._theme},getComponent:function(N,I){var G=this._componentsMap.get(N);if(G)return G[I||0]},queryComponents:function(N){var I=N.mainType;if(!I)return[];var G=N.index,W=N.id,Z=N.name,H=this._componentsMap.get(I);if(!H||!H.length)return[];var U;if(G!=null)T(G)||(G=[G]),U=b(L(G,function($){return H[$]}),function($){return!!$});else if(W!=null){var V=T(W);U=b(H,function($){return V&&C(W,$.id)>=0||!V&&$.id===W})}else if(Z!=null){var Y=T(Z);U=b(H,function($){return Y&&C(Z,$.name)>=0||!Y&&$.name===Z})}else U=H.slice();return P(U,N)},findComponents:function(N){var I=N.query,G=N.mainType,W=H(I),Z=W?this.queryComponents(W):this._componentsMap.get(G);return U(P(Z,N));function H(V){var Y=G+"Index",$=G+"Id",K=G+"Name";return V&&(V[Y]!=null||V[$]!=null||V[K]!=null)?{mainType:G,index:V[Y],id:V[$],name:V[K]}:null}function U(V){return N.filter?b(V,N.filter):V}},eachComponent:function(N,I,G){var W=this._componentsMap;if(typeof N=="function")G=I,I=N,W.each(function(H,U){M(H,function(V,Y){I.call(G,U,V,Y)})});else if(v(N))M(W.get(N),I,G);else if(f(N)){var Z=this.findComponents(N);M(Z,I,G)}},getSeriesByName:function(N){var I=this._componentsMap.get("series");return b(I,function(G){return G.name===N})},getSeriesByIndex:function(N){return this._componentsMap.get("series")[N]},getSeriesByType:function(N){var I=this._componentsMap.get("series");return b(I,function(G){return G.subType===N})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(N,I){M(this._seriesIndices,function(G){var W=this._componentsMap.get("series")[G];N.call(I,W,G)},this)},eachRawSeries:function(N,I){M(this._componentsMap.get("series"),N,I)},eachSeriesByType:function(N,I,G){M(this._seriesIndices,function(W){var Z=this._componentsMap.get("series")[W];Z.subType===N&&I.call(G,Z,W)},this)},eachRawSeriesByType:function(N,I,G){return M(this.getSeriesByType(N),I,G)},isSeriesFiltered:function(N){return this._seriesIndicesMap.get(N.componentIndex)==null},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(N,I){var G=b(this._componentsMap.get("series"),N,I);k(this,G)},restoreData:function(N){var I=this._componentsMap;k(this,I.get("series"));var G=[];I.each(function(W,Z){G.push(Z)}),a.topologicalTravel(G,a.getAllClassMainTypes(),function(W,Z){M(I.get(W),function(H){(W!=="series"||!p(H,N))&&H.restoreData()})})}});function p(N,I){if(I){var G=I.seiresIndex,W=I.seriesId,Z=I.seriesName;return G!=null&&N.componentIndex!==G||W!=null&&N.id!==W||Z!=null&&N.name!==Z}}function w(N,I){var G=N.color&&!N.colorLayer;M(I,function(W,Z){Z==="colorLayer"&&G||a.hasClass(Z)||(typeof W=="object"?N[Z]=N[Z]?l(N[Z],W,!1):h(W):N[Z]==null&&(N[Z]=W))})}function S(N){N=N,this.option={},this.option[d]=1,this._componentsMap=m({series:[]}),this._seriesIndices,this._seriesIndicesMap,w(N,this._theme.option),l(N,i,!1),this.mergeOption(N)}function R(N,I){T(I)||(I=I?[I]:[]);var G={};return M(I,function(W){G[W]=(N.get(W)||[]).slice()}),G}function B(N,I,G){var W=I.type?I.type:G?G.subType:a.determineSubType(N,I);return W}function k(N,I){N._seriesIndicesMap=m(N._seriesIndices=L(I,function(G){return G.componentIndex})||[])}function P(N,I){return I.hasOwnProperty("subType")?b(N,function(G){return G.subType===I.subType}):N}function D(N){}s(y,n);var A=y;X.exports=A},56785:function(X,z,e){var E=e(131879),F=e(358020),O=e(835454),M=O.makeInner,b=e(28108),L=b.enableClassExtend,T=b.enableClassCheck,C=e(182705),f=e(901991),v=e(980463),m=e(340856),o=E.mixin,h=M();function l(x,a,i){this.parentModel=a,this.ecModel=i,this.option=x}l.prototype={constructor:l,init:null,mergeOption:function(x){E.merge(this.option,x,!0)},get:function(x,a){return x==null?this.option:r(this.option,this.parsePath(x),!a&&s(this,x))},getShallow:function(x,a){var i=this.option,n=i==null?i:i[x],u=!a&&s(this,x);return n==null&&u&&(n=u.getShallow(x)),n},getModel:function(x,a){var i=x==null?this.option:r(this.option,x=this.parsePath(x)),n;return a=a||(n=s(this,x))&&n.getModel(x),new l(i,a,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var x=this.constructor;return new x(E.clone(this.option))},setReadOnly:function(x){},parsePath:function(x){return typeof x=="string"&&(x=x.split(".")),x},customizeGetParent:function(x){h(this).getParent=x},isAnimationEnabled:function(){if(!F.node){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}};function r(x,a,i){for(var n=0;n<a.length&&!(a[n]&&(x=x&&typeof x=="object"?x[a[n]]:null,x==null));n++);return x==null&&i&&(x=i.get(a)),x}function s(x,a){var i=h(x).getParent;return i?i.call(x,a):x.parentModel}L(l),T(l),o(l,C),o(l,f),o(l,v),o(l,m);var c=l;X.exports=c},177369:function(X,z,e){var E=e(131879),F=e(835454),O=e(360684),M=E.each,b=E.clone,L=E.map,T=E.merge,C=/^(min|max)?(.+)$/;function f(s){this._api=s,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}f.prototype={constructor:f,setOption:function(s,c){s&&E.each(F.normalizeToArray(s.series),function(i){i&&i.data&&E.isTypedArray(i.data)&&E.setAsPrimitive(i.data)}),s=b(s);var x=this._optionBackup,a=v.call(this,s,c,!x);this._newBaseOption=a.baseOption,x?(l(x.baseOption,a.baseOption),a.timelineOptions.length&&(x.timelineOptions=a.timelineOptions),a.mediaList.length&&(x.mediaList=a.mediaList),a.mediaDefault&&(x.mediaDefault=a.mediaDefault)):this._optionBackup=a},mountOption:function(s){var c=this._optionBackup;return this._timelineOptions=L(c.timelineOptions,b),this._mediaList=L(c.mediaList,b),this._mediaDefault=b(c.mediaDefault),this._currentMediaIndices=[],b(s?c.baseOption:this._newBaseOption)},getTimelineOption:function(s){var c,x=this._timelineOptions;if(x.length){var a=s.getComponent("timeline");a&&(c=b(x[a.getCurrentIndex()],!0))}return c},getMediaOption:function(s){var c=this._api.getWidth(),x=this._api.getHeight(),a=this._mediaList,i=this._mediaDefault,n=[],u=[];if(!a.length&&!i)return u;for(var g=0,d=a.length;g<d;g++)m(a[g].query,c,x)&&n.push(g);return!n.length&&i&&(n=[-1]),n.length&&!h(n,this._currentMediaIndices)&&(u=L(n,function(y){return b(y===-1?i.option:a[y].option)})),this._currentMediaIndices=n,u}};function v(s,c,x){var a=[],i=[],n,u,g=s.timeline;if(s.baseOption&&(u=s.baseOption),(g||s.options)&&(u=u||{},a=(s.options||[]).slice()),s.media){u=u||{};var d=s.media;M(d,function(y){y&&y.option&&(y.query?i.push(y):n||(n=y))})}return u||(u=s),u.timeline||(u.timeline=g),M([u].concat(a).concat(E.map(i,function(y){return y.option})),function(y){M(c,function(p){p(y,x)})}),{baseOption:u,timelineOptions:a,mediaDefault:n,mediaList:i}}function m(s,c,x){var a={width:c,height:x,aspectratio:c/x},i=!0;return E.each(s,function(n,u){var g=u.match(C);if(!(!g||!g[1]||!g[2])){var d=g[1],y=g[2].toLowerCase();o(a[y],n,d)||(i=!1)}}),i}function o(s,c,x){return x==="min"?s>=c:x==="max"?s<=c:s===c}function h(s,c){return s.join(",")===c.join(",")}function l(s,c){c=c||{},M(c,function(x,a){if(x!=null){var i=s[a];if(!O.hasClass(a))s[a]=T(i,x,!0);else{x=F.normalizeToArray(x),i=F.normalizeToArray(i);var n=F.mappingToExists(i,x);s[a]=L(n,function(u){return u.option&&u.exist?T(u.exist,u.option,!0):u.exist||u.option})}}})}var r=f;X.exports=r},502365:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=e(358020),b=e(317795),L=b.formatTime,T=b.encodeHTML,C=b.addCommas,f=b.getTooltipMarker,v=e(835454),m=e(360684),o=e(276790),h=e(482370),l=e(930871),r=l.getLayoutParams,s=l.mergeLayoutParam,c=e(505604),x=c.createTask,a=e(543036),i=a.prepareSource,n=a.getSource,u=e(858708),g=u.retrieveRawValue,d=v.makeInner(),y=m.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(N,I,G,W){this.seriesIndex=this.componentIndex,this.dataTask=x({count:S,reset:R}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(N,G),i(this);var Z=this.getInitialData(N,G);k(Z,this),this.dataTask.context.data=Z,d(this).dataBeforeProcessed=Z,p(this)},mergeDefaultAndTheme:function(N,I){var G=this.layoutMode,W=G?r(N):{},Z=this.subType;m.hasClass(Z)&&(Z+="Series"),O.merge(N,I.getTheme().get(this.subType)),O.merge(N,this.getDefaultOption()),v.defaultEmphasis(N,"label",["show"]),this.fillDataTextStyle(N.data),G&&s(N,W,G)},mergeOption:function(N,I){N=O.merge(this.option,N,!0),this.fillDataTextStyle(N.data);var G=this.layoutMode;G&&s(this.option,N,G),i(this);var W=this.getInitialData(N,I);k(W,this),this.dataTask.dirty(),this.dataTask.context.data=W,d(this).dataBeforeProcessed=W,p(this)},fillDataTextStyle:function(N){if(N&&!O.isTypedArray(N))for(var I=["show"],G=0;G<N.length;G++)N[G]&&N[G].label&&v.defaultEmphasis(N[G],"label",I)},getInitialData:function(){},appendData:function(N){var I=this.getRawData();I.appendData(N.data)},getData:function(N){var I=D(this);if(I){var G=I.context.data;return N==null?G:G.getLinkedData(N)}else return d(this).data},setData:function(N){var I=D(this);if(I){var G=I.context;G.data!==N&&I.modifyOutputEnd&&I.setOutputEnd(N.count()),G.outputData=N,I!==this.dataTask&&(G.data=N)}d(this).data=N},getSource:function(){return n(this)},getRawData:function(){return d(this).dataBeforeProcessed},getBaseAxis:function(){var N=this.coordinateSystem;return N&&N.getBaseAxis&&N.getBaseAxis()},formatTooltip:function(N,I,G,W){var Z=this;W=W||"html";var H=W==="html"?"<br/>":`
`,U=W==="richText",V={},Y=0;function $(Tt){var mt=O.reduce(Tt,function(Ct,jt,zt){var Yt=J.getDimensionInfo(zt);return Ct|=Yt&&Yt.tooltip!==!1&&Yt.displayName!=null},0),Nt=[];Q.length?O.each(Q,function(Ct){ct(g(J,N,Ct),Ct)}):O.each(Tt,ct);function ct(Ct,jt){var zt=J.getDimensionInfo(jt);if(!(!zt||zt.otherDims.tooltip===!1)){var Yt=zt.type,Zt="sub"+Z.seriesIndex+"at"+Y,ft=f({color:ut,type:"subItem",renderMode:W,markerId:Zt}),gt=typeof ft=="string"?ft:ft.content,dt=(mt?gt+T(zt.displayName||"-")+": ":"")+T(Yt==="ordinal"?Ct+"":Yt==="time"?I?"":L("yyyy/MM/dd hh:mm:ss",Ct):C(Ct));dt&&Nt.push(dt),U&&(V[Zt]=ut,++Y)}}var vt=mt?U?`
`:"<br/>":"",Lt=vt+Nt.join(vt||", ");return{renderMode:W,content:Lt,style:V}}function K(Tt){return{renderMode:W,content:T(C(Tt)),style:V}}var J=this.getData(),Q=J.mapDimension("defaultedTooltip",!0),et=Q.length,nt=this.getRawValue(N),st=O.isArray(nt),ut=J.getItemVisual(N,"color");O.isObject(ut)&&ut.colorStops&&(ut=(ut.colorStops[0]||{}).color),ut=ut||"transparent";var rt=et>1||st&&!et?$(nt):K(et?g(J,N,Q[0]):st?nt[0]:nt),ht=rt.content,Pt=Z.seriesIndex+"at"+Y,wt=f({color:ut,type:"item",renderMode:W,markerId:Pt});V[Pt]=ut,++Y;var Mt=J.getName(N),Ft=this.name;v.isNameSpecified(this)||(Ft=""),Ft=Ft?T(Ft)+(I?": ":H):"";var Dt=typeof wt=="string"?wt:wt.content,Rt=I?Dt+Ft+ht:Ft+Dt+(Mt?T(Mt)+": "+ht:ht);return{html:Rt,markers:V}},isAnimationEnabled:function(){if(M.node)return!1;var N=this.getShallow("animation");return N&&this.getData().count()>this.getShallow("animationThreshold")&&(N=!1),N},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(N,I,G){var W=this.ecModel,Z=o.getColorFromPalette.call(this,N,I,G);return Z||(Z=W.getColorFromPalette(N,I,G)),Z},coordDimToDataDim:function(N){return this.getRawData().mapDimension(N,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});O.mixin(y,h),O.mixin(y,o);function p(N){var I=N.name;v.isNameSpecified(N)||(N.name=w(N)||I)}function w(N){var I=N.getRawData(),G=I.mapDimension("seriesName",!0),W=[];return O.each(G,function(Z){var H=I.getDimensionInfo(Z);H.displayName&&W.push(H.displayName)}),W.join(" ")}function S(N){return N.model.getRawData().count()}function R(N){var I=N.model;return I.setData(I.getRawData().cloneShallow()),B}function B(N,I){I.outputData&&N.end>I.outputData.count()&&I.model.getRawData().cloneShallow(I.outputData)}function k(N,I){O.each(N.CHANGABLE_METHODS,function(G){N.wrapMethod(G,O.curry(P,I))})}function P(N){var I=D(N);I&&I.setOutputEnd(this.count())}function D(N){var I=(N.ecModel||{}).scheduler,G=I&&I.getPipeline(N.uid);if(G){var W=G.currentTask;if(W){var Z=W.agentStubMap;Z&&(W=Z.get(N.uid))}return W}}var A=y;X.exports=A},417807:function(X){var z="";typeof navigator<"u"&&(z=navigator.platform||"");var e={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:z.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};X.exports=e},901991:function(X,z,e){var E=e(769003),F=E([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),O={getAreaStyle:function(M,b){return F(this,M,b)}};X.exports=O},453286:function(X){var z={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}};X.exports=z},276790:function(X,z,e){var E=e(835454),F=E.makeInner,O=E.normalizeToArray,M=F();function b(T,C){for(var f=T.length,v=0;v<f;v++)if(T[v].length>C)return T[v];return T[f-1]}var L={clearColorPalette:function(){M(this).colorIdx=0,M(this).colorNameMap={}},getColorFromPalette:function(T,C,f){C=C||this;var v=M(C),m=v.colorIdx||0,o=v.colorNameMap=v.colorNameMap||{};if(o.hasOwnProperty(T))return o[T];var h=O(this.get("color",!0)),l=this.get("colorLayer",!0),r=f==null||!l?h:b(l,f);if(r=r||h,!(!r||!r.length)){var s=r[m];return T&&(o[T]=s),v.colorIdx=(m+1)%r.length,s}}};X.exports=L},482370:function(X,z,e){var E=e(858708),F=E.retrieveRawValue,O=e(317795),M=O.getTooltipMarker,b=O.formatTpl,L=e(835454),T=L.getTooltipRenderMode,C=/\{@(.+?)\}/g,f={getDataParams:function(v,m){var o=this.getData(m),h=this.getRawValue(v,m),l=o.getRawIndex(v),r=o.getName(v),s=o.getRawDataItem(v),c=o.getItemVisual(v,"color"),x=o.getItemVisual(v,"borderColor"),a=this.ecModel.getComponent("tooltip"),i=a&&a.get("renderMode"),n=T(i),u=this.mainType,g=u==="series",d=o.userOutput;return{componentType:u,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:g?this.subType:null,seriesIndex:this.seriesIndex,seriesId:g?this.id:null,seriesName:g?this.name:null,name:r,dataIndex:l,data:s,dataType:m,value:h,color:c,borderColor:x,dimensionNames:d?d.dimensionNames:null,encode:d?d.encode:null,marker:M({color:c,renderMode:n}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(v,m,o,h,l){m=m||"normal";var r=this.getData(o),s=r.getItemModel(v),c=this.getDataParams(v,o);h!=null&&c.value instanceof Array&&(c.value=c.value[h]);var x=s.get(m==="normal"?[l||"label","formatter"]:[m,l||"label","formatter"]);if(typeof x=="function")return c.status=m,c.dimensionIndex=h,x(c);if(typeof x=="string"){var a=b(x,c);return a.replace(C,function(i,n){var u=n.length;return n.charAt(0)==="["&&n.charAt(u-1)==="]"&&(n=+n.slice(1,u-1)),F(r,v,n)})}},getRawValue:function(v,m){return F(this.getData(m),v)},formatTooltip:function(){}};X.exports=f},340856:function(X,z,e){var E=e(769003),F=E([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),O={getItemStyle:function(M,b){var L=F(this,M,b),T=this.getBorderLineDash();return T&&(L.lineDash=T),L},getBorderLineDash:function(){var M=this.get("borderType");return M==="solid"||M==null?null:M==="dashed"?[5,5]:[1,1]}};X.exports=O},182705:function(X,z,e){var E=e(769003),F=E([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),O={getLineStyle:function(M){var b=F(this,M);return b.lineDash=this.getLineDash(b.lineWidth),b},getLineDash:function(M){M==null&&(M=1);var b=this.get("type"),L=Math.max(M,2),T=M*4;return b==="solid"||b==null?!1:b==="dashed"?[T,T]:[L,L]}};X.exports=O},769003:function(X,z,e){var E=e(131879);function F(O){for(var M=0;M<O.length;M++)O[M][1]||(O[M][1]=O[M][0]);return function(b,L,T){for(var C={},f=0;f<O.length;f++){var v=O[f][1];if(!(L&&E.indexOf(L,v)>=0||T&&E.indexOf(T,v)<0)){var m=b.getShallow(v);m!=null&&(C[O[f][0]]=m)}}return C}}X.exports=F},980463:function(X,z,e){var E=e(872113),F=e(248070),O=["textStyle","color"],M={getTextColor:function(b){var L=this.ecModel;return this.getShallow("color")||(!b&&L?L.get(O):null)},getFont:function(){return F.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(b){return E.getBoundingRect(b,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}};X.exports=M},27499:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=O.createHashMap,b=O.retrieve,L=O.each;function T(m){this.coordSysName=m,this.coordSysDims=[],this.axisMap=M(),this.categoryAxisMap=M(),this.firstCategoryDimIndex=null}function C(m){var o=m.get("coordinateSystem"),h=new T(o),l=f[o];if(l)return l(m,h,h.axisMap,h.categoryAxisMap),h}var f={cartesian2d:function(m,o,h,l){var r=m.getReferringComponents("xAxis")[0],s=m.getReferringComponents("yAxis")[0];o.coordSysDims=["x","y"],h.set("x",r),h.set("y",s),v(r)&&(l.set("x",r),o.firstCategoryDimIndex=0),v(s)&&(l.set("y",s),o.firstCategoryDimIndex==null&(o.firstCategoryDimIndex=1))},singleAxis:function(m,o,h,l){var r=m.getReferringComponents("singleAxis")[0];o.coordSysDims=["single"],h.set("single",r),v(r)&&(l.set("single",r),o.firstCategoryDimIndex=0)},polar:function(m,o,h,l){var r=m.getReferringComponents("polar")[0],s=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");o.coordSysDims=["radius","angle"],h.set("radius",s),h.set("angle",c),v(s)&&(l.set("radius",s),o.firstCategoryDimIndex=0),v(c)&&(l.set("angle",c),o.firstCategoryDimIndex==null&&(o.firstCategoryDimIndex=1))},geo:function(m,o,h,l){o.coordSysDims=["lng","lat"]},parallel:function(m,o,h,l){var r=m.ecModel,s=r.getComponent("parallel",m.get("parallelIndex")),c=o.coordSysDims=s.dimensions.slice();L(s.parallelAxisIndex,function(x,a){var i=r.getComponent("parallelAxis",x),n=c[a];h.set(n,i),v(i)&&o.firstCategoryDimIndex==null&&(l.set(n,i),o.firstCategoryDimIndex=a)})}};function v(m){return m.get("type")==="category"}z.getCoordSysInfoBySeries=C},722637:function(X,z,e){var E=e(131879),F=E.each,O=E.isArray,M=E.isObject,b=e(999403),L=e(835454),T=L.normalizeToArray;function C(l,r){r=r.split(",");for(var s=l,c=0;c<r.length&&(s=s&&s[r[c]],s!=null);c++);return s}function f(l,r,s,c){r=r.split(",");for(var x=l,a,i=0;i<r.length-1;i++)a=r[i],x[a]==null&&(x[a]={}),x=x[a];(c||x[r[i]]==null)&&(x[r[i]]=s)}function v(l){F(m,function(r){r[0]in l&&!(r[1]in l)&&(l[r[1]]=l[r[0]])})}var m=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],o=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];function h(l,r){b(l,r),l.series=T(l.series),F(l.series,function(s){if(M(s)){var c=s.type;if(c==="line")s.clipOverflow!=null&&(s.clip=s.clipOverflow);else if(c==="pie"||c==="gauge")s.clockWise!=null&&(s.clockwise=s.clockWise);else if(c==="gauge"){var x=C(s,"pointer.color");x!=null&&f(s,"itemStyle.color",x)}v(s)}}),l.dataRange&&(l.visualMap=l.dataRange),F(o,function(s){var c=l[s];c&&(O(c)||(c=[c]),F(c,function(x){v(x)}))})}X.exports=h},999403:function(X,z,e){var E=e(131879),F=e(835454),O=E.each,M=E.isObject,b=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function L(r){var s=r&&r.itemStyle;if(s)for(var c=0,x=b.length;c<x;c++){var a=b[c],i=s.normal,n=s.emphasis;i&&i[a]&&(r[a]=r[a]||{},r[a].normal?E.merge(r[a].normal,i[a]):r[a].normal=i[a],i[a]=null),n&&n[a]&&(r[a]=r[a]||{},r[a].emphasis?E.merge(r[a].emphasis,n[a]):r[a].emphasis=n[a],n[a]=null)}}function T(r,s,c){if(r&&r[s]&&(r[s].normal||r[s].emphasis)){var x=r[s].normal,a=r[s].emphasis;x&&(c?(r[s].normal=r[s].emphasis=null,E.defaults(r[s],x)):r[s]=x),a&&(r.emphasis=r.emphasis||{},r.emphasis[s]=a)}}function C(r){T(r,"itemStyle"),T(r,"lineStyle"),T(r,"areaStyle"),T(r,"label"),T(r,"labelLine"),T(r,"upperLabel"),T(r,"edgeLabel")}function f(r,s){var c=M(r)&&r[s],x=M(c)&&c.textStyle;if(x)for(var a=0,i=F.TEXT_STYLE_OPTIONS.length;a<i;a++){var s=F.TEXT_STYLE_OPTIONS[a];x.hasOwnProperty(s)&&(c[s]=x[s])}}function v(r){r&&(C(r),f(r,"label"),r.emphasis&&f(r.emphasis,"label"))}function m(r){if(M(r)){L(r),C(r),f(r,"label"),f(r,"upperLabel"),f(r,"edgeLabel"),r.emphasis&&(f(r.emphasis,"label"),f(r.emphasis,"upperLabel"),f(r.emphasis,"edgeLabel"));var i=r.markPoint;i&&(L(i),v(i));var u=r.markLine;u&&(L(u),v(u));var s=r.markArea;s&&v(s);var c=r.data;if(r.type==="graph"){c=c||r.nodes;var x=r.links||r.edges;if(x&&!E.isTypedArray(x))for(var a=0;a<x.length;a++)v(x[a]);E.each(r.categories,function(d){C(d)})}if(c&&!E.isTypedArray(c))for(var a=0;a<c.length;a++)v(c[a]);var i=r.markPoint;if(i&&i.data)for(var n=i.data,a=0;a<n.length;a++)v(n[a]);var u=r.markLine;if(u&&u.data)for(var g=u.data,a=0;a<g.length;a++)E.isArray(g[a])?(v(g[a][0]),v(g[a][1])):v(g[a]);r.type==="gauge"?(f(r,"axisLabel"),f(r,"title"),f(r,"detail")):r.type==="treemap"?(T(r.breadcrumb,"itemStyle"),E.each(r.levels,function(d){C(d)})):r.type==="tree"&&C(r.leaves)}}function o(r){return E.isArray(r)?r:r?[r]:[]}function h(r){return(E.isArray(r)?r[0]:r)||{}}function l(r,s){O(o(r.series),function(x){M(x)&&m(x)});var c=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];s&&c.push("valueAxis","categoryAxis","logAxis","timeAxis"),O(c,function(x){O(o(r[x]),function(a){a&&(f(a,"axisLabel"),f(a.axisPointer,"label"))})}),O(o(r.parallel),function(x){var a=x&&x.parallelAxisDefault;f(a,"axisLabel"),f(a&&a.axisPointer,"label")}),O(o(r.calendar),function(x){T(x,"itemStyle"),f(x,"dayLabel"),f(x,"monthLabel"),f(x,"yearLabel")}),O(o(r.radar),function(x){f(x,"name")}),O(o(r.geo),function(x){M(x)&&(v(x),O(o(x.regions),function(a){v(a)}))}),O(o(r.timeline),function(x){v(x),T(x,"label"),T(x,"itemStyle"),T(x,"controlStyle",!0);var a=x.data;E.isArray(a)&&E.each(a,function(i){E.isObject(i)&&(T(i,"label"),T(i,"itemStyle"))})}),O(o(r.toolbox),function(x){T(x,"iconStyle"),O(x.feature,function(a){T(a,"iconStyle")})}),f(h(r.axisPointer),"label"),f(h(r.tooltip).axisPointer,"label")}X.exports=l},861614:function(X){function z(e){return{seriesType:e,reset:function(E,F){var O=F.findComponents({mainType:"legend"});if(!(!O||!O.length)){var M=E.getData();M.filterSelf(function(b){for(var L=M.getName(b),T=0;T<O.length;T++)if(!O[T].isSelected(L))return!1;return!0})}}}}X.exports=z},33064:function(X){var z={average:function(F){for(var O=0,M=0,b=0;b<F.length;b++)isNaN(F[b])||(O+=F[b],M++);return M===0?NaN:O/M},sum:function(F){for(var O=0,M=0;M<F.length;M++)O+=F[M]||0;return O},max:function(F){for(var O=-1/0,M=0;M<F.length;M++)F[M]>O&&(O=F[M]);return isFinite(O)?O:NaN},min:function(F){for(var O=1/0,M=0;M<F.length;M++)F[M]<O&&(O=F[M]);return isFinite(O)?O:NaN},nearest:function(F){return F[0]}},e=function(F,O){return Math.round(F.length/2)};function E(F){return{seriesType:F,modifyOutputEnd:!0,reset:function(O,M,b){var L=O.getData(),T=O.get("sampling"),C=O.coordinateSystem;if(C.type==="cartesian2d"&&T){var f=C.getBaseAxis(),v=C.getOtherAxis(f),m=f.getExtent(),o=Math.abs(m[1]-m[0]),h=Math.round(L.count()/o);if(h>1){var l;typeof T=="string"?l=z[T]:typeof T=="function"&&(l=T),l&&O.setData(L.downSample(L.mapDimension(v.dim),1/h,l,e))}}}}}X.exports=E},715933:function(X,z,e){var E=e(131879),F=E.createHashMap,O=E.each;function M(L){var T=F();L.eachSeries(function(C){var f=C.get("stack");if(f){var v=T.get(f)||T.set(f,[]),m=C.getData(),o={stackResultDimension:m.getCalculationInfo("stackResultDimension"),stackedOverDimension:m.getCalculationInfo("stackedOverDimension"),stackedDimension:m.getCalculationInfo("stackedDimension"),stackedByDimension:m.getCalculationInfo("stackedByDimension"),isStackedByIndex:m.getCalculationInfo("isStackedByIndex"),data:m,seriesModel:C};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;v.length&&m.setCalculationInfo("stackedOnSeries",v[v.length-1].seriesModel),v.push(o)}}),T.each(b)}function b(L){O(L,function(T,C){var f=[],v=[NaN,NaN],m=[T.stackResultDimension,T.stackedOverDimension],o=T.data,h=T.isStackedByIndex,l=o.map(m,function(r,s,c){var x=o.get(T.stackedDimension,c);if(isNaN(x))return v;var a,i;h?i=o.getRawIndex(c):a=o.get(T.stackedByDimension,c);for(var n=NaN,u=C-1;u>=0;u--){var g=L[u];if(h||(i=g.data.rawIndexOf(g.stackedByDimension,a)),i>=0){var d=g.data.getByRawIndex(g.stackResultDimension,i);if(x>=0&&d>0||x<=0&&d<0){x+=d,n=d;break}}}return f[0]=x,f[1]=n,f});o.hostModel.setData(l),T.data=l})}X.exports=M},952740:function(X,z,e){var E=e(748354),F=e(317795),O=e(341977),M=e(141576),b=E.round,L=O.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(C,f){var v=this._extent;isNaN(C)||(v[0]=parseFloat(C)),isNaN(f)||(v[1]=parseFloat(f))},unionExtent:function(C){var f=this._extent;C[0]<f[0]&&(f[0]=C[0]),C[1]>f[1]&&(f[1]=C[1]),L.prototype.setExtent.call(this,f[0],f[1])},getInterval:function(){return this._interval},setInterval:function(C){this._interval=C,this._niceExtent=this._extent.slice(),this._intervalPrecision=M.getIntervalPrecision(C)},getTicks:function(C){var f=this._interval,v=this._extent,m=this._niceExtent,o=this._intervalPrecision,h=[];if(!f)return h;var l=1e4;v[0]<m[0]&&(C?h.push(b(m[0]-f,o)):h.push(v[0]));for(var r=m[0];r<=m[1]&&(h.push(r),r=b(r+f,o),r!==h[h.length-1]);)if(h.length>l)return[];var s=h.length?h[h.length-1]:m[1];return v[1]>s&&(C?h.push(b(s+f,o)):h.push(v[1])),h},getMinorTicks:function(C){for(var f=this.getTicks(!0),v=[],m=this.getExtent(),o=1;o<f.length;o++){for(var h=f[o],l=f[o-1],r=0,s=[],c=h-l,x=c/C;r<C-1;){var a=E.round(l+(r+1)*x);a>m[0]&&a<m[1]&&s.push(a),r++}v.push(s)}return v},getLabel:function(C,f){if(C==null)return"";var v=f&&f.precision;return v==null?v=E.getPrecisionSafe(C)||0:v==="auto"&&(v=this._intervalPrecision),C=b(C,v,!0),F.addCommas(C)},niceTicks:function(C,f,v){C=C||5;var m=this._extent,o=m[1]-m[0];if(isFinite(o)){o<0&&(o=-o,m.reverse());var h=M.intervalScaleNiceTicks(m,C,f,v);this._intervalPrecision=h.intervalPrecision,this._interval=h.interval,this._niceExtent=h.niceTickExtent}},niceExtent:function(C){var f=this._extent;if(f[0]===f[1])if(f[0]!==0){var v=f[0];C.fixMax||(f[1]+=v/2),f[0]-=v/2}else f[1]=1;var m=f[1]-f[0];isFinite(m)||(f[0]=0,f[1]=1),this.niceTicks(C.splitNumber,C.minInterval,C.maxInterval);var o=this._interval;C.fixMin||(f[0]=b(Math.floor(f[0]/o)*o)),C.fixMax||(f[1]=b(Math.ceil(f[1]/o)*o))}});L.create=function(){return new L};var T=L;X.exports=T},213536:function(X,z,e){var E=e(131879),F=e(341977),O=e(748354),M=e(952740),b=F.prototype,L=M.prototype,T=O.getPrecisionSafe,C=O.round,f=Math.floor,v=Math.ceil,m=Math.pow,o=Math.log,h=F.extend({type:"log",base:10,$constructor:function(){F.apply(this,arguments),this._originalScale=new M},getTicks:function(s){var c=this._originalScale,x=this._extent,a=c.getExtent();return E.map(L.getTicks.call(this,s),function(i){var n=O.round(m(this.base,i));return n=i===x[0]&&c.__fixMin?l(n,a[0]):n,n=i===x[1]&&c.__fixMax?l(n,a[1]):n,n},this)},getMinorTicks:L.getMinorTicks,getLabel:L.getLabel,scale:function(s){return s=b.scale.call(this,s),m(this.base,s)},setExtent:function(s,c){var x=this.base;s=o(s)/o(x),c=o(c)/o(x),L.setExtent.call(this,s,c)},getExtent:function(){var s=this.base,c=b.getExtent.call(this);c[0]=m(s,c[0]),c[1]=m(s,c[1]);var x=this._originalScale,a=x.getExtent();return x.__fixMin&&(c[0]=l(c[0],a[0])),x.__fixMax&&(c[1]=l(c[1],a[1])),c},unionExtent:function(s){this._originalScale.unionExtent(s);var c=this.base;s[0]=o(s[0])/o(c),s[1]=o(s[1])/o(c),b.unionExtent.call(this,s)},unionExtentFromData:function(s,c){this.unionExtent(s.getApproximateExtent(c))},niceTicks:function(s){s=s||10;var c=this._extent,x=c[1]-c[0];if(!(x===1/0||x<=0)){var a=O.quantity(x),i=s/x*a;for(i<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var n=[O.round(v(c[0]/a)*a),O.round(f(c[1]/a)*a)];this._interval=a,this._niceExtent=n}},niceExtent:function(s){L.niceExtent.call(this,s);var c=this._originalScale;c.__fixMin=s.fixMin,c.__fixMax=s.fixMax}});E.each(["contain","normalize"],function(s){h.prototype[s]=function(c){return c=o(c)/o(this.base),b[s].call(this,c)}}),h.create=function(){return new h};function l(s,c){return C(s,T(c))}var r=h;X.exports=r},892969:function(X,z,e){var E=e(131879),F=e(341977),O=e(584116),M=F.prototype,b=F.extend({type:"ordinal",init:function(T,C){(!T||E.isArray(T))&&(T=new O({categories:T})),this._ordinalMeta=T,this._extent=C||[0,T.categories.length-1]},parse:function(T){return typeof T=="string"?this._ordinalMeta.getOrdinal(T):Math.round(T)},contain:function(T){return T=this.parse(T),M.contain.call(this,T)&&this._ordinalMeta.categories[T]!=null},normalize:function(T){return M.normalize.call(this,this.parse(T))},scale:function(T){return Math.round(M.scale.call(this,T))},getTicks:function(){for(var T=[],C=this._extent,f=C[0];f<=C[1];)T.push(f),f++;return T},getLabel:function(T){if(!this.isBlank())return this._ordinalMeta.categories[T]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(T,C){this.unionExtent(T.getApproximateExtent(C))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:E.noop,niceExtent:E.noop});b.create=function(){return new b};var L=b;X.exports=L},341977:function(X,z,e){var E=e(28108);function F(M){this._setting=M||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}F.prototype.parse=function(M){return M},F.prototype.getSetting=function(M){return this._setting[M]},F.prototype.contain=function(M){var b=this._extent;return M>=b[0]&&M<=b[1]},F.prototype.normalize=function(M){var b=this._extent;return b[1]===b[0]?.5:(M-b[0])/(b[1]-b[0])},F.prototype.scale=function(M){var b=this._extent;return M*(b[1]-b[0])+b[0]},F.prototype.unionExtent=function(M){var b=this._extent;M[0]<b[0]&&(b[0]=M[0]),M[1]>b[1]&&(b[1]=M[1])},F.prototype.unionExtentFromData=function(M,b){this.unionExtent(M.getApproximateExtent(b))},F.prototype.getExtent=function(){return this._extent.slice()},F.prototype.setExtent=function(M,b){var L=this._extent;isNaN(M)||(L[0]=M),isNaN(b)||(L[1]=b)},F.prototype.isBlank=function(){return this._isBlank},F.prototype.setBlank=function(M){this._isBlank=M},F.prototype.getLabel=null,E.enableClassExtend(F),E.enableClassManagement(F,{registerWhenExtend:!0});var O=F;X.exports=O},680377:function(X,z,e){var E=e(131879),F=e(748354),O=e(317795),M=e(141576),b=e(952740),L=b.prototype,T=Math.ceil,C=Math.floor,f=1e3,v=f*60,m=v*60,o=m*24,h=function(c,x,a,i){for(;a<i;){var n=a+i>>>1;c[n][1]<x?a=n+1:i=n}return a},l=b.extend({type:"time",getLabel:function(c){var x=this._stepLvl,a=new Date(c);return O.formatTime(x[0],a,this.getSetting("useUTC"))},niceExtent:function(c){var x=this._extent;if(x[0]===x[1]&&(x[0]-=o,x[1]+=o),x[1]===-1/0&&x[0]===1/0){var a=new Date;x[1]=+new Date(a.getFullYear(),a.getMonth(),a.getDate()),x[0]=x[1]-o}this.niceTicks(c.splitNumber,c.minInterval,c.maxInterval);var i=this._interval;c.fixMin||(x[0]=F.round(C(x[0]/i)*i)),c.fixMax||(x[1]=F.round(T(x[1]/i)*i))},niceTicks:function(c,x,a){c=c||10;var i=this._extent,n=i[1]-i[0],u=n/c;x!=null&&u<x&&(u=x),a!=null&&u>a&&(u=a);var g=r.length,d=h(r,u,0,g),y=r[Math.min(d,g-1)],p=y[1];if(y[0]==="year"){var w=n/p,S=F.nice(w/c,!0);p*=S}var R=this.getSetting("useUTC")?0:new Date(+i[0]||+i[1]).getTimezoneOffset()*60*1e3,B=[Math.round(T((i[0]-R)/p)*p+R),Math.round(C((i[1]-R)/p)*p+R)];M.fixExtent(B,i),this._stepLvl=y,this._interval=p,this._niceExtent=B},parse:function(c){return+F.parseDate(c)}});E.each(["contain","normalize"],function(c){l.prototype[c]=function(x){return L[c].call(this,this.parse(x))}});var r=[["hh:mm:ss",f],["hh:mm:ss",f*5],["hh:mm:ss",f*10],["hh:mm:ss",f*15],["hh:mm:ss",f*30],[`hh:mm
MM-dd`,v],[`hh:mm
MM-dd`,v*5],[`hh:mm
MM-dd`,v*10],[`hh:mm
MM-dd`,v*15],[`hh:mm
MM-dd`,v*30],[`hh:mm
MM-dd`,m],[`hh:mm
MM-dd`,m*2],[`hh:mm
MM-dd`,m*6],[`hh:mm
MM-dd`,m*12],[`MM-dd
yyyy`,o],[`MM-dd
yyyy`,o*2],[`MM-dd
yyyy`,o*3],[`MM-dd
yyyy`,o*4],[`MM-dd
yyyy`,o*5],[`MM-dd
yyyy`,o*6],["week",o*7],[`MM-dd
yyyy`,o*10],["week",o*14],["week",o*21],["month",o*31],["week",o*42],["month",o*62],["week",o*70],["quarter",o*95],["month",o*31*4],["month",o*31*5],["half-year",o*380/2],["month",o*31*8],["month",o*31*10],["year",o*380]];l.create=function(c){return new l({useUTC:c.ecModel.get("useUTC")})};var s=l;X.exports=s},141576:function(X,z,e){var E=e(748354),F=E.round;function O(T,C,f,v){var m={},o=T[1]-T[0],h=m.interval=E.nice(o/C,!0);f!=null&&h<f&&(h=m.interval=f),v!=null&&h>v&&(h=m.interval=v);var l=m.intervalPrecision=M(h),r=m.niceTickExtent=[F(Math.ceil(T[0]/h)*h,l),F(Math.floor(T[1]/h)*h,l)];return L(r,T),m}function M(T){return E.getPrecisionSafe(T)+2}function b(T,C,f){T[C]=Math.max(Math.min(T[C],f[1]),f[0])}function L(T,C){!isFinite(T[0])&&(T[0]=C[0]),!isFinite(T[1])&&(T[1]=C[1]),b(T,0,C),b(T,1,C),T[0]>T[1]&&(T[0]=T[1])}z.intervalScaleNiceTicks=O,z.getIntervalPrecision=M,z.fixExtent=L},564014:function(X,z,e){var E=e(131879),F=E.each,O=E.map,M=E.isFunction,b=E.createHashMap,L=E.noop,T=e(505604),C=T.createTask,f=e(650777),v=f.getUID,m=e(664527),o=e(903868),h=e(835454),l=h.normalizeToArray;function r(G,W,U,V){this.ecInstance=G,this.api=W,this.unfinished;var U=this._dataProcessorHandlers=U.slice(),V=this._visualHandlers=V.slice();this._allHandlers=U.concat(V),this._stageTaskMap=b()}var s=r.prototype;s.restoreData=function(G,W){G.restoreData(W),this._stageTaskMap.each(function(Z){var H=Z.overallTask;H&&H.dirty()})},s.getPerformArgs=function(G,W){if(G.__pipeline){var Z=this._pipelineMap.get(G.__pipeline.id),H=Z.context,U=!W&&Z.progressiveEnabled&&(!H||H.progressiveRender)&&G.__idxInPipeline>Z.blockIndex,V=U?Z.step:null,Y=H&&H.modDataCount,$=Y!=null?Math.ceil(Y/V):null;return{step:V,modBy:$,modDataCount:Y}}},s.getPipeline=function(G){return this._pipelineMap.get(G)},s.updateStreamModes=function(G,W){var Z=this._pipelineMap.get(G.uid),H=G.getData(),U=H.count(),V=Z.progressiveEnabled&&W.incrementalPrepareRender&&U>=Z.threshold,Y=G.get("large")&&U>=G.get("largeThreshold"),$=G.get("progressiveChunkMode")==="mod"?U:null;G.pipelineContext=Z.context={progressiveRender:V,modDataCount:$,large:Y}},s.restorePipelines=function(G){var W=this,Z=W._pipelineMap=b();G.eachSeries(function(H){var U=H.getProgressive(),V=H.uid;Z.set(V,{id:V,head:null,tail:null,threshold:H.getProgressiveThreshold(),progressiveEnabled:U&&!(H.preventIncremental&&H.preventIncremental()),blockIndex:-1,step:Math.round(U||700),count:0}),B(W,H,H.dataTask)})},s.prepareStageTasks=function(){var G=this._stageTaskMap,W=this.ecInstance.getModel(),Z=this.api;F(this._allHandlers,function(H){var U=G.get(H.uid)||G.set(H.uid,[]);H.reset&&a(this,H,U,W,Z),H.overallReset&&i(this,H,U,W,Z)},this)},s.prepareView=function(G,W,Z,H){var U=G.renderTask,V=U.context;V.model=W,V.ecModel=Z,V.api=H,U.__block=!G.incrementalPrepareRender,B(this,W,U)},s.performDataProcessorTasks=function(G,W){c(this,this._dataProcessorHandlers,G,W,{block:!0})},s.performVisualTasks=function(G,W,Z){c(this,this._visualHandlers,G,W,Z)};function c(G,W,Z,H,U){U=U||{};var V;F(W,function($,K){if(!(U.visualType&&U.visualType!==$.visualType)){var J=G._stageTaskMap.get($.uid),Q=J.seriesTaskMap,et=J.overallTask;if(et){var nt,st=et.agentStubMap;st.each(function(rt){Y(U,rt)&&(rt.dirty(),nt=!0)}),nt&&et.dirty(),x(et,H);var ut=G.getPerformArgs(et,U.block);st.each(function(rt){rt.perform(ut)}),V|=et.perform(ut)}else Q&&Q.each(function(rt,ht){Y(U,rt)&&rt.dirty();var Pt=G.getPerformArgs(rt,U.block);Pt.skip=!$.performRawSeries&&Z.isSeriesFiltered(rt.context.model),x(rt,H),V|=rt.perform(Pt)})}});function Y($,K){return $.setDirty&&(!$.dirtyMap||$.dirtyMap.get(K.__pipeline.id))}G.unfinished|=V}s.performSeriesTasks=function(G){var W;G.eachSeries(function(Z){W|=Z.dataTask.perform()}),this.unfinished|=W},s.plan=function(){this._pipelineMap.each(function(G){var W=G.tail;do{if(W.__block){G.blockIndex=W.__idxInPipeline;break}W=W.getUpstream()}while(W)})};var x=s.updatePayload=function(G,W){W!=="remain"&&(G.context.payload=W)};function a(G,W,Z,H,U){var V=Z.seriesTaskMap||(Z.seriesTaskMap=b()),Y=W.seriesType,$=W.getTargetSeries;W.createOnAllSeries?H.eachRawSeries(K):Y?H.eachRawSeriesByType(Y,K):$&&$(H,U).each(K);function K(Q){var et=Q.uid,nt=V.get(et)||V.set(et,C({plan:y,reset:p,count:R}));nt.context={model:Q,ecModel:H,api:U,useClearVisual:W.isVisual&&!W.isLayout,plan:W.plan,reset:W.reset,scheduler:G},B(G,Q,nt)}var J=G._pipelineMap;V.each(function(Q,et){J.get(et)||(Q.dispose(),V.removeKey(et))})}function i(G,W,Z,H,U){var V=Z.overallTask=Z.overallTask||C({reset:n});V.context={ecModel:H,api:U,overallReset:W.overallReset,scheduler:G};var Y=V.agentStubMap=V.agentStubMap||b(),$=W.seriesType,K=W.getTargetSeries,J=!0,Q=W.modifyOutputEnd;$?H.eachRawSeriesByType($,et):K?K(H,U).each(et):(J=!1,F(H.getSeries(),et));function et(st){var ut=st.uid,rt=Y.get(ut);rt||(rt=Y.set(ut,C({reset:u,onDirty:d})),V.dirty()),rt.context={model:st,overallProgress:J,modifyOutputEnd:Q},rt.agent=V,rt.__block=J,B(G,st,rt)}var nt=G._pipelineMap;Y.each(function(st,ut){nt.get(ut)||(st.dispose(),V.dirty(),Y.removeKey(ut))})}function n(G){G.overallReset(G.ecModel,G.api,G.payload)}function u(G,W){return G.overallProgress&&g}function g(){this.agent.dirty(),this.getDownstream().dirty()}function d(){this.agent&&this.agent.dirty()}function y(G){return G.plan&&G.plan(G.model,G.ecModel,G.api,G.payload)}function p(G){G.useClearVisual&&G.data.clearAllVisual();var W=G.resetDefines=l(G.reset(G.model,G.ecModel,G.api,G.payload));return W.length>1?O(W,function(Z,H){return S(H)}):w}var w=S(0);function S(G){return function(W,Z){var H=Z.data,U=Z.resetDefines[G];if(U&&U.dataEach)for(var V=W.start;V<W.end;V++)U.dataEach(H,V);else U&&U.progress&&U.progress(W,H)}}function R(G){return G.data.count()}function B(G,W,Z){var H=W.uid,U=G._pipelineMap.get(H);!U.head&&(U.head=Z),U.tail&&U.tail.pipe(Z),U.tail=Z,Z.__idxInPipeline=U.count++,Z.__pipeline=U}r.wrapStageHandler=function(G,W){return M(G)&&(G={overallReset:G,seriesType:k(G)}),G.uid=v("stageHandler"),W&&(G.visualType=W),G};function k(G){A=null;try{G(P,D)}catch{}return A}var P={},D={},A;N(P,m),N(D,o),P.eachSeriesByType=P.eachRawSeriesByType=function(G){A=G},P.eachComponent=function(G){G.mainType==="series"&&G.subType&&(A=G.subType)};function N(G,W){for(var Z in W.prototype)G[Z]=L}var I=r;X.exports=I},505604:function(X,z,e){var E=e(131879),F=E.assert,O=E.isArray,M=e(550617),b=M.__DEV__;function L(o){return new T(o)}function T(o){o=o||{},this._reset=o.reset,this._plan=o.plan,this._count=o.count,this._onDirty=o.onDirty,this._dirty=!0,this.context}var C=T.prototype;C.perform=function(o){var h=this._upstream,l=o&&o.skip;if(this._dirty&&h){var r=this.context;r.data=r.outputData=h.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!l&&(s=this._plan(this.context));var c=n(this._modBy),x=this._modDataCount||0,a=n(o&&o.modBy),i=o&&o.modDataCount||0;(c!==a||x!==i)&&(s="reset");function n(R){return!(R>=1)&&(R=1),R}var u;(this._dirty||s==="reset")&&(this._dirty=!1,u=m(this,l)),this._modBy=a,this._modDataCount=i;var g=o&&o.step;if(h?this._dueEnd=h._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,y=Math.min(g!=null?this._dueIndex+g:1/0,this._dueEnd);if(!l&&(u||d<y)){var p=this._progress;if(O(p))for(var w=0;w<p.length;w++)v(this,p[w],d,y,a,i);else v(this,p,d,y,a,i)}this._dueIndex=y;var S=this._settedOutputEnd!=null?this._settedOutputEnd:y;this._outputDueEnd=S}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var f=function(){var o,h,l,r,s,c={reset:function(i,n,u,g){h=i,o=n,l=u,r=g,s=Math.ceil(r/l),c.next=l>1&&r>0?a:x}};return c;function x(){return h<o?h++:null}function a(){var i=h%s*l+Math.ceil(h/s),n=h>=o?null:i<r?i:h;return h++,n}}();C.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)};function v(o,h,l,r,s,c){f.reset(l,r,s,c),o._callingProgress=h,o._callingProgress({start:l,end:r,count:r-l,next:f.next},o.context)}function m(o,h){o._dueIndex=o._outputDueEnd=o._dueEnd=0,o._settedOutputEnd=null;var l,r;!h&&o._reset&&(l=o._reset(o.context),l&&l.progress&&(r=l.forceFirstProgress,l=l.progress),O(l)&&!l.length&&(l=null)),o._progress=l,o._modBy=o._modDataCount=null;var s=o._downstream;return s&&s.dirty(),r}C.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},C.pipe=function(o){(this._downstream!==o||this._dirty)&&(this._downstream=o,o._upstream=this,o.dirty())},C.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},C.getUpstream=function(){return this._upstream},C.getDownstream=function(){return this._downstream},C.setOutputEnd=function(o){this._outputDueEnd=this._settedOutputEnd=o},z.createTask=L},977383:function(X){var z="#eee",e=function(){return{axisLine:{lineStyle:{color:z}},axisTick:{lineStyle:{color:z}},axisLabel:{textStyle:{color:z}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:z}}}},E=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],F={color:E,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:z},crossStyle:{color:z},label:{color:"#000"}}},legend:{textStyle:{color:z}},textStyle:{color:z},title:{textStyle:{color:z}},toolbox:{iconStyle:{normal:{borderColor:z}}},dataZoom:{textStyle:{color:z}},visualMap:{textStyle:{color:z}},timeline:{lineStyle:{color:z},itemStyle:{normal:{color:E[1]}},label:{normal:{textStyle:{color:z}}},controlStyle:{normal:{color:z,borderColor:z}}},timeAxis:e(),logAxis:e(),valueAxis:e(),categoryAxis:e(),line:{symbol:"circle"},graph:{color:E},gauge:{title:{textStyle:{color:z}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};F.categoryAxis.splitLine.show=!1;var O=F;X.exports=O},499465:function(X){var z=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],e={color:z,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],z]};X.exports=e},957847:function(X,z,e){var E=e(131879);function F(){var O=[],M={},b;return{add:function(L,T,C,f,v){return E.isString(f)&&(v=f,f=0),M[L.id]?!1:(M[L.id]=1,O.push({el:L,target:T,time:C,delay:f,easing:v}),!0)},done:function(L){return b=L,this},start:function(){for(var L=O.length,T=0,C=O.length;T<C;T++){var f=O[T];f.el.animateTo(f.target,f.time,f.delay,f.easing,v)}return this;function v(){L--,L||(O.length=0,M={},b&&b())}}}}z.createWrap=F},28108:function(X,z,e){var E=e(550617),F=E.__DEV__,O=e(131879),M=".",b="___EC__COMPONENT__CONTAINER___";function L(r){var s={main:"",sub:""};return r&&(r=r.split(M),s.main=r[0]||"",s.sub=r[1]||""),s}function T(r){O.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal')}function C(r,s){r.$constructor=r,r.extend=function(c){var x=this,a=function(){c.$constructor?c.$constructor.apply(this,arguments):x.apply(this,arguments)};return O.extend(a.prototype,c),a.extend=this.extend,a.superCall=m,a.superApply=o,O.inherits(a,this),a.superClass=x,a}}var f=0;function v(r){var s=["__\0is_clz",f++,Math.random().toFixed(3)].join("_");r.prototype[s]=!0,r.isInstance=function(c){return!!(c&&c[s])}}function m(r,s){var c=O.slice(arguments,2);return this.superClass.prototype[s].apply(r,c)}function o(r,s,c){return this.superClass.prototype[s].apply(r,c)}function h(r,s){s=s||{};var c={};r.registerClass=function(i,n){if(n){if(T(n),n=L(n),!n.sub)c[n.main]=i;else if(n.sub!==b){var u=x(n);u[n.sub]=i}}return i},r.getClass=function(i,n,u){var g=c[i];if(g&&g[b]&&(g=n?g[n]:null),u&&!g)throw new Error(n?"Component "+i+"."+(n||"")+" not exists. Load it first.":i+".type should be specified.");return g},r.getClassesByMainType=function(i){i=L(i);var n=[],u=c[i.main];return u&&u[b]?O.each(u,function(g,d){d!==b&&n.push(g)}):n.push(u),n},r.hasClass=function(i){return i=L(i),!!c[i.main]},r.getAllClassMainTypes=function(){var i=[];return O.each(c,function(n,u){i.push(u)}),i},r.hasSubTypes=function(i){i=L(i);var n=c[i.main];return n&&n[b]},r.parseClassType=L;function x(i){var n=c[i.main];return(!n||!n[b])&&(n=c[i.main]={},n[b]=!0),n}if(s.registerWhenExtend){var a=r.extend;a&&(r.extend=function(i){var n=a.call(this,i);return r.registerClass(n,i.type)})}return r}function l(r,s){}z.parseClassType=L,z.enableClassExtend=C,z.enableClassCheck=v,z.enableClassManagement=h,z.setReadOnly=l},650777:function(X,z,e){var E=e(131879),F=e(28108),O=F.parseClassType,M=0;function b(C){return[C||"",M++,Math.random().toFixed(5)].join("_")}function L(C){var f={};return C.registerSubTypeDefaulter=function(v,m){v=O(v),f[v.main]=m},C.determineSubType=function(v,m){var o=m.type;if(!o){var h=O(v).main;C.hasSubTypes(v)&&f[h]&&(o=f[h](m))}return o},C}function T(C,f){C.topologicalTravel=function(h,l,r,s){if(!h.length)return;var c=v(l),x=c.graph,a=c.noEntryList,i={};for(E.each(h,function(p){i[p]=!0});a.length;){var n=a.pop(),u=x[n],g=!!i[n];g&&(r.call(s,n,u.originalDeps.slice()),delete i[n]),E.each(u.successor,g?y:d)}E.each(i,function(){throw new Error("Circle dependency may exists")});function d(p){x[p].entryCount--,x[p].entryCount===0&&a.push(p)}function y(p){i[p]=!0,d(p)}};function v(h){var l={},r=[];return E.each(h,function(s){var c=m(l,s),x=c.originalDeps=f(s),a=o(x,h);c.entryCount=a.length,c.entryCount===0&&r.push(s),E.each(a,function(i){E.indexOf(c.predecessor,i)<0&&c.predecessor.push(i);var n=m(l,i);E.indexOf(n.successor,i)<0&&n.successor.push(s)})}),{graph:l,noEntryList:r}}function m(h,l){return h[l]||(h[l]={predecessor:[],successor:[]}),h[l]}function o(h,l){var r=[];return E.each(h,function(s){E.indexOf(l,s)>=0&&r.push(s)}),r}}z.getUID=b,z.enableSubTypeDefaulter=L,z.enableTopologicalTravel=T},317795:function(X,z,e){var E=e(131879),F=e(872113),O=e(748354);function M(u){return isNaN(u)?"-":(u=(u+"").split("."),u[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(u.length>1?"."+u[1]:""))}function b(u,g){return u=(u||"").toLowerCase().replace(/-(.)/g,function(d,y){return y.toUpperCase()}),g&&u&&(u=u.charAt(0).toUpperCase()+u.slice(1)),u}var L=E.normalizeCssArray,T=/([&<>"'])/g,C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function f(u){return u==null?"":(u+"").replace(T,function(g,d){return C[d]})}var v=["a","b","c","d","e","f","g"],m=function(u,g){return"{"+u+(g??"")+"}"};function o(u,g,d){E.isArray(g)||(g=[g]);var y=g.length;if(!y)return"";for(var p=g[0].$vars||[],w=0;w<p.length;w++){var S=v[w];u=u.replace(m(S),m(S,0))}for(var R=0;R<y;R++)for(var B=0;B<p.length;B++){var k=g[R][p[B]];u=u.replace(m(v[B],R),d?f(k):k)}return u}function h(u,g,d){return E.each(g,function(y,p){u=u.replace("{"+p+"}",d?f(y):y)}),u}function l(u,p){u=E.isString(u)?{color:u,extraCssText:p}:u||{};var d=u.color,y=u.type,p=u.extraCssText,w=u.renderMode||"html",S=u.markerId||"X";return d?w==="html"?y==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+f(d)+";"+(p||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+f(d)+";"+(p||"")+'"></span>':{renderMode:w,content:"{marker"+S+"|}  ",style:{color:d}}:""}function r(u,g){return u+="","0000".substr(0,g-u.length)+u}function s(u,g,d){(u==="week"||u==="month"||u==="quarter"||u==="half-year"||u==="year")&&(u=`MM-dd
yyyy`);var y=O.parseDate(g),p=d?"UTC":"",w=y["get"+p+"FullYear"](),S=y["get"+p+"Month"]()+1,R=y["get"+p+"Date"](),B=y["get"+p+"Hours"](),k=y["get"+p+"Minutes"](),P=y["get"+p+"Seconds"](),D=y["get"+p+"Milliseconds"]();return u=u.replace("MM",r(S,2)).replace("M",S).replace("yyyy",w).replace("yy",w%100).replace("dd",r(R,2)).replace("d",R).replace("hh",r(B,2)).replace("h",B).replace("mm",r(k,2)).replace("m",k).replace("ss",r(P,2)).replace("s",P).replace("SSS",r(D,3)),u}function c(u){return u&&u.charAt(0).toUpperCase()+u.substr(1)}var x=F.truncateText;function a(u){return F.getBoundingRect(u.text,u.font,u.textAlign,u.textVerticalAlign,u.textPadding,u.textLineHeight,u.rich,u.truncate)}function i(u,g,d,y,p,w,S,R){return F.getBoundingRect(u,g,d,y,p,R,w,S)}function n(u,g){if(g==="_blank"||g==="blank"){var d=window.open();d.opener=null,d.location=u}else window.open(u,g)}z.addCommas=M,z.toCamelCase=b,z.normalizeCssArray=L,z.encodeHTML=f,z.formatTpl=o,z.formatTplSimple=h,z.getTooltipMarker=l,z.formatTime=s,z.capitalFirst=c,z.truncateText=x,z.getTextBoundingRect=a,z.getTextRect=i,z.windowOpen=n},248070:function(X,z,e){var E=e(131879),F=e(423036),O=e(994819),M=e(343970),b=e(912072),L=e(254904),T=e(451218),C=e(311096);z.Image=C;var f=e(827146);z.Group=f;var v=e(835727);z.Text=v;var m=e(70654);z.Circle=m;var o=e(599315);z.Sector=o;var h=e(819574);z.Ring=h;var l=e(455370);z.Polygon=l;var r=e(162190);z.Polyline=r;var s=e(668518);z.Rect=s;var c=e(13484);z.Line=c;var x=e(631592);z.BezierCurve=x;var a=e(3775);z.Arc=a;var i=e(138096);z.CompoundPath=i;var n=e(808691);z.LinearGradient=n;var u=e(207539);z.RadialGradient=u;var g=e(795946);z.BoundingRect=g;var d=e(672440);z.IncrementalDisplayable=d;var y=e(420538),p=Math.max,w=Math.min,S={},R=1,B={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},k="emphasis",P="normal",D=1,A={},N={};function I(It){return L.extend(It)}function G(It,Wt){return F.extendFromString(It,Wt)}function W(It,Wt){N[It]=Wt}function Z(It){if(N.hasOwnProperty(It))return N[It]}function H(It,Wt,_t,ee){var re=F.createFromString(It,Wt);return _t&&(ee==="center"&&(_t=V(_t,re.getBoundingRect())),$(re,_t)),re}function U(It,Wt,_t){var ee=new C({style:{image:It,x:Wt.x,y:Wt.y,width:Wt.width,height:Wt.height},onload:function(re){if(_t==="center"){var de={width:re.width,height:re.height};ee.setStyle(V(Wt,de))}}});return ee}function V(It,Wt){var _t=Wt.width/Wt.height,ee=It.height*_t,re;ee<=It.width?re=It.height:(ee=It.width,re=ee/_t);var de=It.x+It.width/2,Se=It.y+It.height/2;return{x:de-ee/2,y:Se-re/2,width:ee,height:re}}var Y=F.mergePath;function $(It,Wt){if(It.applyTransform){var _t=It.getBoundingRect(),ee=_t.calculateTransform(Wt);It.applyTransform(ee)}}function K(It){return y.subPixelOptimizeLine(It.shape,It.shape,It.style),It}function J(It){return y.subPixelOptimizeRect(It.shape,It.shape,It.style),It}var Q=y.subPixelOptimize;function et(It){return It!=null&&It!=="none"}var nt=E.createHashMap(),st=0;function ut(It){if(typeof It!="string")return It;var Wt=nt.get(It);return Wt||(Wt=O.lift(It,-.1),st<1e4&&(nt.set(It,Wt),st++)),Wt}function rt(It){if(It.__hoverStlDirty){It.__hoverStlDirty=!1;var Wt=It.__hoverStl;if(!Wt){It.__cachedNormalStl=It.__cachedNormalZ2=null;return}var _t=It.__cachedNormalStl={};It.__cachedNormalZ2=It.z2;var ee=It.style;for(var re in Wt)Wt[re]!=null&&(_t[re]=ee[re]);_t.fill=ee.fill,_t.stroke=ee.stroke}}function ht(It){var Wt=It.__hoverStl;if(!(!Wt||It.__highlighted)){var _t=It.__zr,ee=It.useHoverLayer&&_t&&_t.painter.type==="canvas";if(It.__highlighted=ee?"layer":"plain",!(It.isGroup||!_t&&It.useHoverLayer)){var re=It,de=It.style;ee&&(re=_t.addHover(It),de=re.style),it(de),ee||rt(re),de.extendFrom(Wt),Pt(de,Wt,"fill"),Pt(de,Wt,"stroke"),ot(de),ee||(It.dirty(!1),It.z2+=R)}}}function Pt(It,Wt,_t){!et(Wt[_t])&&et(It[_t])&&(It[_t]=ut(It[_t]))}function wt(It){var Wt=It.__highlighted;if(Wt&&(It.__highlighted=!1,!It.isGroup))if(Wt==="layer")It.__zr&&It.__zr.removeHover(It);else{var _t=It.style,ee=It.__cachedNormalStl;ee&&(it(_t),It.setStyle(ee),ot(_t));var re=It.__cachedNormalZ2;re!=null&&It.z2-re===R&&(It.z2=re)}}function Mt(It,Wt,_t){var ee=P,re=P,de;It.__highlighted&&(ee=k,de=!0),Wt(It,_t),It.__highlighted&&(re=k,de=!0),It.isGroup&&It.traverse(function(Se){!Se.isGroup&&Wt(Se,_t)}),de&&It.__highDownOnUpdate&&It.__highDownOnUpdate(ee,re)}function Ft(It,Wt){Wt=It.__hoverStl=Wt!==!1&&(It.hoverStyle||Wt||{}),It.__hoverStlDirty=!0,It.__highlighted&&(It.__cachedNormalStl=null,wt(It),ht(It))}function Dt(It){!Nt(this,It)&&!this.__highByOuter&&Mt(this,ht)}function Rt(It){!Nt(this,It)&&!this.__highByOuter&&Mt(this,wt)}function Tt(It){this.__highByOuter|=1<<(It||0),Mt(this,ht)}function mt(It){!(this.__highByOuter&=~(1<<(It||0)))&&Mt(this,wt)}function Nt(It,Wt){return It.__highDownSilentOnTouch&&Wt.zrByTouch}function ct(It,Wt){vt(It,!0),Mt(It,Ft,Wt)}function vt(It,Wt){var _t=Wt===!1;if(It.__highDownSilentOnTouch=It.highDownSilentOnTouch,It.__highDownOnUpdate=It.highDownOnUpdate,!_t||It.__highDownDispatcher){var ee=_t?"off":"on";It[ee]("mouseover",Dt)[ee]("mouseout",Rt),It[ee]("emphasis",Tt)[ee]("normal",mt),It.__highByOuter=It.__highByOuter||0,It.__highDownDispatcher=!_t}}function Lt(It){return!!(It&&It.__highDownDispatcher)}function Ct(It){var Wt=A[It];return Wt==null&&D<=32&&(Wt=A[It]=D++),Wt}function jt(It,Wt,_t,ee,re,de,Se){re=re||S;var Pe=re.labelFetcher,Le=re.labelDataIndex,Ie=re.labelDimIndex,pe=re.labelProp,Oe=_t.getShallow("show"),Fe=ee.getShallow("show"),Ve;(Oe||Fe)&&(Pe&&(Ve=Pe.getFormattedLabel(Le,"normal",null,Ie,pe)),Ve==null&&(Ve=E.isFunction(re.defaultText)?re.defaultText(Le,re):re.defaultText));var be=Oe?Ve:null,Be=Fe?E.retrieve2(Pe?Pe.getFormattedLabel(Le,"emphasis",null,Ie,pe):null,Ve):null;(be!=null||Be!=null)&&(Yt(It,_t,de,re),Yt(Wt,ee,Se,re,!0)),It.text=be,Wt.text=Be}function zt(It,Wt,_t){var ee=It.style;Wt&&(it(ee),It.setStyle(Wt),ot(ee)),ee=It.__hoverStl,_t&&ee&&(it(ee),E.extend(ee,_t),ot(ee))}function Yt(It,Wt,_t,ee,re){return ft(It,Wt,ee,re),_t&&E.extend(It,_t),It}function Zt(It,Wt,_t){var ee={isRectText:!0},re;_t===!1?re=!0:ee.autoColor=_t,ft(It,Wt,ee,re)}function ft(It,Wt,_t,ee){if(_t=_t||S,_t.isRectText){var re;_t.getTextPosition?re=_t.getTextPosition(Wt,ee):(re=Wt.getShallow("position")||(ee?null:"inside"),re==="outside"&&(re="top")),It.textPosition=re,It.textOffset=Wt.getShallow("offset");var de=Wt.getShallow("rotate");de!=null&&(de*=Math.PI/180),It.textRotation=de,It.textDistance=E.retrieve2(Wt.getShallow("distance"),ee?null:5)}var Se=Wt.ecModel,Pe=Se&&Se.option.textStyle,Le=gt(Wt),Ie;if(Le){Ie={};for(var pe in Le)if(Le.hasOwnProperty(pe)){var Oe=Wt.getModel(["rich",pe]);dt(Ie[pe]={},Oe,Pe,_t,ee)}}return It.rich=Ie,dt(It,Wt,Pe,_t,ee,!0),_t.forceRich&&!_t.textStyle&&(_t.textStyle={}),It}function gt(It){for(var Wt;It&&It!==It.ecModel;){var _t=(It.option||S).rich;if(_t){Wt=Wt||{};for(var ee in _t)_t.hasOwnProperty(ee)&&(Wt[ee]=1)}It=It.parentModel}return Wt}function dt(It,Wt,_t,ee,re,de){_t=!re&&_t||S,It.textFill=lt(Wt.getShallow("color"),ee)||_t.color,It.textStroke=lt(Wt.getShallow("textBorderColor"),ee)||_t.textBorderColor,It.textStrokeWidth=E.retrieve2(Wt.getShallow("textBorderWidth"),_t.textBorderWidth),re||(de&&(It.insideRollbackOpt=ee,ot(It)),It.textFill==null&&(It.textFill=ee.autoColor)),It.fontStyle=Wt.getShallow("fontStyle")||_t.fontStyle,It.fontWeight=Wt.getShallow("fontWeight")||_t.fontWeight,It.fontSize=Wt.getShallow("fontSize")||_t.fontSize,It.fontFamily=Wt.getShallow("fontFamily")||_t.fontFamily,It.textAlign=Wt.getShallow("align"),It.textVerticalAlign=Wt.getShallow("verticalAlign")||Wt.getShallow("baseline"),It.textLineHeight=Wt.getShallow("lineHeight"),It.textWidth=Wt.getShallow("width"),It.textHeight=Wt.getShallow("height"),It.textTag=Wt.getShallow("tag"),(!de||!ee.disableBox)&&(It.textBackgroundColor=lt(Wt.getShallow("backgroundColor"),ee),It.textPadding=Wt.getShallow("padding"),It.textBorderColor=lt(Wt.getShallow("borderColor"),ee),It.textBorderWidth=Wt.getShallow("borderWidth"),It.textBorderRadius=Wt.getShallow("borderRadius"),It.textBoxShadowColor=Wt.getShallow("shadowColor"),It.textBoxShadowBlur=Wt.getShallow("shadowBlur"),It.textBoxShadowOffsetX=Wt.getShallow("shadowOffsetX"),It.textBoxShadowOffsetY=Wt.getShallow("shadowOffsetY")),It.textShadowColor=Wt.getShallow("textShadowColor")||_t.textShadowColor,It.textShadowBlur=Wt.getShallow("textShadowBlur")||_t.textShadowBlur,It.textShadowOffsetX=Wt.getShallow("textShadowOffsetX")||_t.textShadowOffsetX,It.textShadowOffsetY=Wt.getShallow("textShadowOffsetY")||_t.textShadowOffsetY}function lt(It,Wt){return It!=="auto"?It:Wt&&Wt.autoColor?Wt.autoColor:null}function ot(It){var Wt=It.textPosition,_t=It.insideRollbackOpt,ee;if(_t&&It.textFill==null){var re=_t.autoColor,de=_t.isRectText,Se=_t.useInsideStyle,Pe=Se!==!1&&(Se===!0||de&&Wt&&typeof Wt=="string"&&Wt.indexOf("inside")>=0),Le=!Pe&&re!=null;(Pe||Le)&&(ee={textFill:It.textFill,textStroke:It.textStroke,textStrokeWidth:It.textStrokeWidth}),Pe&&(It.textFill="#fff",It.textStroke==null&&(It.textStroke=re,It.textStrokeWidth==null&&(It.textStrokeWidth=2))),Le&&(It.textFill=re)}It.insideRollback=ee}function it(It){var Wt=It.insideRollback;Wt&&(It.textFill=Wt.textFill,It.textStroke=Wt.textStroke,It.textStrokeWidth=Wt.textStrokeWidth,It.insideRollback=null)}function yt(It,Wt){var _t=Wt&&Wt.getModel("textStyle");return E.trim([It.fontStyle||_t&&_t.getShallow("fontStyle")||"",It.fontWeight||_t&&_t.getShallow("fontWeight")||"",(It.fontSize||_t&&_t.getShallow("fontSize")||12)+"px",It.fontFamily||_t&&_t.getShallow("fontFamily")||"sans-serif"].join(" "))}function Ot(It,Wt,_t,ee,re,de){typeof re=="function"&&(de=re,re=null);var Se=ee&&ee.isAnimationEnabled();if(Se){var Pe=It?"Update":"",Le=ee.getShallow("animationDuration"+Pe),Ie=ee.getShallow("animationEasing"+Pe),pe=ee.getShallow("animationDelay"+Pe);typeof pe=="function"&&(pe=pe(re,ee.getAnimationDelayParams?ee.getAnimationDelayParams(Wt,re):null)),typeof Le=="function"&&(Le=Le(re)),Le>0?Wt.animateTo(_t,Le,pe||0,Ie,de,!!de):(Wt.stopAnimation(),Wt.attr(_t),de&&de())}else Wt.stopAnimation(),Wt.attr(_t),de&&de()}function St(It,Wt,_t,ee,re){Ot(!0,It,Wt,_t,ee,re)}function Gt(It,Wt,_t,ee,re){Ot(!1,It,Wt,_t,ee,re)}function Ut(It,Wt){for(var _t=M.identity([]);It&&It!==Wt;)M.mul(_t,It.getLocalTransform(),_t),It=It.parent;return _t}function Kt(It,Wt,_t){return Wt&&!E.isArrayLike(Wt)&&(Wt=T.getLocalTransform(Wt)),_t&&(Wt=M.invert([],Wt)),b.applyTransform([],It,Wt)}function Jt(It,Wt,_t){var ee=Wt[4]===0||Wt[5]===0||Wt[0]===0?1:Math.abs(2*Wt[4]/Wt[0]),re=Wt[4]===0||Wt[5]===0||Wt[2]===0?1:Math.abs(2*Wt[4]/Wt[2]),de=[It==="left"?-ee:It==="right"?ee:0,It==="top"?-re:It==="bottom"?re:0];return de=Kt(de,Wt,_t),Math.abs(de[0])>Math.abs(de[1])?de[0]>0?"right":"left":de[1]>0?"bottom":"top"}function te(It,Wt,_t,ee){if(!It||!Wt)return;function re(Pe){var Le={};return Pe.traverse(function(Ie){!Ie.isGroup&&Ie.anid&&(Le[Ie.anid]=Ie)}),Le}function de(Pe){var Le={position:b.clone(Pe.position),rotation:Pe.rotation};return Pe.shape&&(Le.shape=E.extend({},Pe.shape)),Le}var Se=re(It);Wt.traverse(function(Pe){if(!Pe.isGroup&&Pe.anid){var Le=Se[Pe.anid];if(Le){var Ie=de(Pe);Pe.attr(de(Le)),St(Pe,Ie,_t,Pe.dataIndex)}}})}function ie(It,Wt){return E.map(It,function(_t){var ee=_t[0];ee=p(ee,Wt.x),ee=w(ee,Wt.x+Wt.width);var re=_t[1];return re=p(re,Wt.y),re=w(re,Wt.y+Wt.height),[ee,re]})}function oe(It,Wt){var _t=p(It.x,Wt.x),ee=w(It.x+It.width,Wt.x+Wt.width),re=p(It.y,Wt.y),de=w(It.y+It.height,Wt.y+Wt.height);if(ee>=_t&&de>=re)return{x:_t,y:re,width:ee-_t,height:de-re}}function he(It,Wt,_t){Wt=E.extend({rectHover:!0},Wt);var ee=Wt.style={strokeNoScale:!0};if(_t=_t||{x:-1,y:-1,width:2,height:2},It)return It.indexOf("image://")===0?(ee.image=It.slice(8),E.defaults(ee,_t),new C(Wt)):H(It.replace("path://",""),Wt,_t,"center")}function ne(It,Wt,_t,ee,re){for(var de=0,Se=re[re.length-1];de<re.length;de++){var Pe=re[de];if(ce(It,Wt,_t,ee,Pe[0],Pe[1],Se[0],Se[1]))return!0;Se=Pe}}function ce(It,Wt,_t,ee,re,de,Se,Pe){var Le=_t-It,Ie=ee-Wt,pe=Se-re,Oe=Pe-de,Fe=ge(pe,Oe,Le,Ie);if(Me(Fe))return!1;var Ve=It-re,be=Wt-de,Be=ge(Ve,be,Le,Ie)/Fe;if(Be<0||Be>1)return!1;var He=ge(Ve,be,pe,Oe)/Fe;return!(He<0||He>1)}function ge(It,Wt,_t,ee){return It*ee-_t*Wt}function Me(It){return It<=1e-6&&It>=-1e-6}W("circle",m),W("sector",o),W("ring",h),W("polygon",l),W("polyline",r),W("rect",s),W("line",c),W("bezierCurve",x),W("arc",a),z.Z2_EMPHASIS_LIFT=R,z.CACHED_LABEL_STYLE_PROPERTIES=B,z.extendShape=I,z.extendPath=G,z.registerShape=W,z.getShapeClass=Z,z.makePath=H,z.makeImage=U,z.mergePath=Y,z.resizePath=$,z.subPixelOptimizeLine=K,z.subPixelOptimizeRect=J,z.subPixelOptimize=Q,z.setElementHoverStyle=Ft,z.setHoverStyle=ct,z.setAsHighDownDispatcher=vt,z.isHighDownDispatcher=Lt,z.getHighlightDigit=Ct,z.setLabelStyle=jt,z.modifyLabelStyle=zt,z.setTextStyle=Yt,z.setText=Zt,z.getFont=yt,z.updateProps=St,z.initProps=Gt,z.getTransform=Ut,z.applyTransform=Kt,z.transformDirection=Jt,z.groupTransition=te,z.clipPointsByRect=ie,z.clipRectByRect=oe,z.createIcon=he,z.linePolygonIntersect=ne,z.lineLineIntersect=ce},930871:function(X,z,e){var E=e(131879),F=e(795946),O=e(748354),M=O.parsePercent,b=e(317795),L=E.each,T=["left","right","top","bottom","width","height"],C=[["width","left","right"],["height","top","bottom"]];function f(i,n,u,g,d){var y=0,p=0;g==null&&(g=1/0),d==null&&(d=1/0);var w=0;n.eachChild(function(S,R){var B=S.position,k=S.getBoundingRect(),P=n.childAt(R+1),D=P&&P.getBoundingRect(),A,N;if(i==="horizontal"){var I=k.width+(D?-D.x+k.x:0);A=y+I,A>g||S.newline?(y=0,A=I,p+=w+u,w=k.height):w=Math.max(w,k.height)}else{var G=k.height+(D?-D.y+k.y:0);N=p+G,N>d||S.newline?(y+=w+u,p=0,N=G,w=k.width):w=Math.max(w,k.width)}S.newline||(B[0]=y,B[1]=p,i==="horizontal"?y=A+u:p=N+u)})}var v=f,m=E.curry(f,"vertical"),o=E.curry(f,"horizontal");function h(i,n,u){var g=n.width,d=n.height,y=M(i.x,g),p=M(i.y,d),w=M(i.x2,g),S=M(i.y2,d);return(isNaN(y)||isNaN(parseFloat(i.x)))&&(y=0),(isNaN(w)||isNaN(parseFloat(i.x2)))&&(w=g),(isNaN(p)||isNaN(parseFloat(i.y)))&&(p=0),(isNaN(S)||isNaN(parseFloat(i.y2)))&&(S=d),u=b.normalizeCssArray(u||0),{width:Math.max(w-y-u[1]-u[3],0),height:Math.max(S-p-u[0]-u[2],0)}}function l(i,n,u){u=b.normalizeCssArray(u||0);var g=n.width,d=n.height,y=M(i.left,g),p=M(i.top,d),w=M(i.right,g),S=M(i.bottom,d),R=M(i.width,g),B=M(i.height,d),k=u[2]+u[0],P=u[1]+u[3],D=i.aspect;switch(isNaN(R)&&(R=g-w-P-y),isNaN(B)&&(B=d-S-k-p),D!=null&&(isNaN(R)&&isNaN(B)&&(D>g/d?R=g*.8:B=d*.8),isNaN(R)&&(R=D*B),isNaN(B)&&(B=R/D)),isNaN(y)&&(y=g-w-R-P),isNaN(p)&&(p=d-S-B-k),i.left||i.right){case"center":y=g/2-R/2-u[3];break;case"right":y=g-R-P;break}switch(i.top||i.bottom){case"middle":case"center":p=d/2-B/2-u[0];break;case"bottom":p=d-B-k;break}y=y||0,p=p||0,isNaN(R)&&(R=g-P-y-(w||0)),isNaN(B)&&(B=d-k-p-(S||0));var A=new F(y+u[3],p+u[0],R,B);return A.margin=u,A}function r(i,n,u,g,d){var y=!d||!d.hv||d.hv[0],p=!d||!d.hv||d.hv[1],w=d&&d.boundingMode||"all";if(!(!y&&!p)){var S;if(w==="raw")S=i.type==="group"?new F(0,0,+n.width||0,+n.height||0):i.getBoundingRect();else if(S=i.getBoundingRect(),i.needLocalTransform()){var R=i.getLocalTransform();S=S.clone(),S.applyTransform(R)}n=l(E.defaults({width:S.width,height:S.height},n),u,g);var B=i.position,k=y?n.x-S.x:0,P=p?n.y-S.y:0;i.attr("position",w==="raw"?[k,P]:[B[0]+k,B[1]+P])}}function s(i,n){return i[C[n][0]]!=null||i[C[n][1]]!=null&&i[C[n][2]]!=null}function c(i,n,u){!E.isObject(u)&&(u={});var g=u.ignoreSize;!E.isArray(g)&&(g=[g,g]);var d=p(C[0],0),y=p(C[1],1);R(C[0],i,d),R(C[1],i,y);function p(B,k){var P={},D=0,A={},N=0,I=2;if(L(B,function(Z){A[Z]=i[Z]}),L(B,function(Z){w(n,Z)&&(P[Z]=A[Z]=n[Z]),S(P,Z)&&D++,S(A,Z)&&N++}),g[k])return S(n,B[1])?A[B[2]]=null:S(n,B[2])&&(A[B[1]]=null),A;if(N===I||!D)return A;if(D>=I)return P;for(var G=0;G<B.length;G++){var W=B[G];if(!w(P,W)&&w(i,W)){P[W]=i[W];break}}return P}function w(B,k){return B.hasOwnProperty(k)}function S(B,k){return B[k]!=null&&B[k]!=="auto"}function R(B,k,P){L(B,function(D){k[D]=P[D]})}}function x(i){return a({},i)}function a(i,n){return n&&i&&L(T,function(u){n.hasOwnProperty(u)&&(i[u]=n[u])}),i}z.LOCATION_PARAMS=T,z.HV_NAMES=C,z.box=v,z.vbox=m,z.hbox=o,z.getAvailableSize=h,z.getLayoutRect=l,z.positionElement=r,z.sizeCalculable=s,z.mergeLayoutParam=c,z.getLayoutParams=x,z.copyLayoutParams=a},835454:function(X,z,e){var E=e(131879),F=e(358020),O=E.each,M=E.isObject,b=E.isArray,L="series\0";function T(p){return p instanceof Array?p:p==null?[]:[p]}function C(p,w,S){if(p){p[w]=p[w]||{},p.emphasis=p.emphasis||{},p.emphasis[w]=p.emphasis[w]||{};for(var R=0,B=S.length;R<B;R++){var k=S[R];!p.emphasis[w].hasOwnProperty(k)&&p[w].hasOwnProperty(k)&&(p.emphasis[w][k]=p[w][k])}}}var f=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function v(p){return M(p)&&!b(p)&&!(p instanceof Date)?p.value:p}function m(p){return M(p)&&!(p instanceof Array)}function o(p,w){w=(w||[]).slice();var S=E.map(p||[],function(R,B){return{exist:R}});return O(w,function(R,B){if(M(R)){for(var k=0;k<S.length;k++)if(!S[k].option&&R.id!=null&&S[k].exist.id===R.id+""){S[k].option=R,w[B]=null;return}for(var k=0;k<S.length;k++){var P=S[k].exist;if(!S[k].option&&(P.id==null||R.id==null)&&R.name!=null&&!r(R)&&!r(P)&&P.name===R.name+""){S[k].option=R,w[B]=null;return}}}}),O(w,function(R,B){if(M(R)){for(var k=0;k<S.length;k++){var P=S[k].exist;if(!S[k].option&&!r(P)&&R.id==null){S[k].option=R;break}}k>=S.length&&S.push({option:R})}}),S}function h(p){var w=E.createHashMap();O(p,function(S,R){var B=S.exist;B&&w.set(B.id,S)}),O(p,function(S,R){var B=S.option;E.assert(!B||B.id==null||!w.get(B.id)||w.get(B.id)===S,"id duplicates: "+(B&&B.id)),B&&B.id!=null&&w.set(B.id,S),!S.keyInfo&&(S.keyInfo={})}),O(p,function(S,R){var B=S.exist,k=S.option,P=S.keyInfo;if(M(k)){if(P.name=k.name!=null?k.name+"":B?B.name:L+R,B)P.id=B.id;else if(k.id!=null)P.id=k.id+"";else{var D=0;do P.id="\0"+P.name+"\0"+D++;while(w.get(P.id))}w.set(P.id,S)}})}function l(p){var w=p.name;return!!(w&&w.indexOf(L))}function r(p){return M(p)&&p.id&&(p.id+"").indexOf("\0_ec_\0")===0}function s(p,w){var S={},R={};return B(p||[],S),B(w||[],R,S),[k(S),k(R)];function B(P,D,A){for(var N=0,I=P.length;N<I;N++)for(var G=P[N].seriesId,W=T(P[N].dataIndex),Z=A&&A[G],H=0,U=W.length;H<U;H++){var V=W[H];Z&&Z[V]?Z[V]=null:(D[G]||(D[G]={}))[V]=1}}function k(P,D){var A=[];for(var N in P)if(P.hasOwnProperty(N)&&P[N]!=null)if(D)A.push(+N);else{var I=k(P[N],!0);I.length&&A.push({seriesId:N,dataIndex:I})}return A}}function c(p,w){if(w.dataIndexInside!=null)return w.dataIndexInside;if(w.dataIndex!=null)return E.isArray(w.dataIndex)?E.map(w.dataIndex,function(S){return p.indexOfRawIndex(S)}):p.indexOfRawIndex(w.dataIndex);if(w.name!=null)return E.isArray(w.name)?E.map(w.name,function(S){return p.indexOfName(S)}):p.indexOfName(w.name)}function x(){var p="__\0ec_inner_"+a+++"_"+Math.random().toFixed(5);return function(w){return w[p]||(w[p]={})}}var a=0;function i(p,w,S){if(E.isString(w)){var R={};R[w+"Index"]=0,w=R}var B=S&&S.defaultMainType;B&&!n(w,B+"Index")&&!n(w,B+"Id")&&!n(w,B+"Name")&&(w[B+"Index"]=0);var k={};return O(w,function(A,D){var A=w[D];if(D==="dataIndex"||D==="dataIndexInside"){k[D]=A;return}var N=D.match(/^(\w+)(Index|Id|Name)$/)||[],I=N[1],G=(N[2]||"").toLowerCase();if(!(!I||!G||A==null||G==="index"&&A==="none"||S&&S.includeMainTypes&&E.indexOf(S.includeMainTypes,I)<0)){var W={mainType:I};(G!=="index"||A!=="all")&&(W[G]=A);var Z=p.queryComponents(W);k[I+"Models"]=Z,k[I+"Model"]=Z[0]}}),k}function n(p,w){return p&&p.hasOwnProperty(w)}function u(p,w,S){p.setAttribute?p.setAttribute(w,S):p[w]=S}function g(p,w){return p.getAttribute?p.getAttribute(w):p[w]}function d(p){return p==="auto"?F.domSupported?"html":"richText":p||"html"}function y(p,w){var S=E.createHashMap(),R=[];return E.each(p,function(B){var k=w(B);(S.get(k)||(R.push(k),S.set(k,[]))).push(B)}),{keys:R,buckets:S}}z.normalizeToArray=T,z.defaultEmphasis=C,z.TEXT_STYLE_OPTIONS=f,z.getDataItemValue=v,z.isDataItemOption=m,z.mappingToExists=o,z.makeIdAndName=h,z.isNameSpecified=l,z.isIdInner=r,z.compressBatches=s,z.queryDataIndex=c,z.makeInner=x,z.parseFinder=i,z.setAttribute=u,z.getAttribute=g,z.getTooltipRenderMode=d,z.groupData=y},748354:function(X,z,e){var E=e(131879),F=1e-4;function O(g){return g.replace(/^\s+|\s+$/g,"")}function M(g,d,y,p){var w=d[1]-d[0],S=y[1]-y[0];if(w===0)return S===0?y[0]:(y[0]+y[1])/2;if(p)if(w>0){if(g<=d[0])return y[0];if(g>=d[1])return y[1]}else{if(g>=d[0])return y[0];if(g<=d[1])return y[1]}else{if(g===d[0])return y[0];if(g===d[1])return y[1]}return(g-d[0])/w*S+y[0]}function b(g,d){switch(g){case"center":case"middle":g="50%";break;case"left":case"top":g="0%";break;case"right":case"bottom":g="100%";break}return typeof g=="string"?O(g).match(/%$/)?parseFloat(g)/100*d:parseFloat(g):g==null?NaN:+g}function L(g,d,y){return d==null&&(d=10),d=Math.min(Math.max(0,d),20),g=(+g).toFixed(d),y?g:+g}function T(g){return g.sort(function(d,y){return d-y}),g}function C(g){if(g=+g,isNaN(g))return 0;for(var d=1,y=0;Math.round(g*d)/d!==g;)d*=10,y++;return y}function f(g){var d=g.toString(),y=d.indexOf("e");if(y>0){var p=+d.slice(y+1);return p<0?-p:0}else{var w=d.indexOf(".");return w<0?0:d.length-1-w}}function v(g,d){var y=Math.log,p=Math.LN10,w=Math.floor(y(g[1]-g[0])/p),S=Math.round(y(Math.abs(d[1]-d[0]))/p),R=Math.min(Math.max(-w+S,0),20);return isFinite(R)?R:20}function m(g,d,y){if(!g[d])return 0;var p=E.reduce(g,function(G,W){return G+(isNaN(W)?0:W)},0);if(p===0)return 0;for(var w=Math.pow(10,y),S=E.map(g,function(G){return(isNaN(G)?0:G)/p*w*100}),R=w*100,B=E.map(S,function(G){return Math.floor(G)}),k=E.reduce(B,function(G,W){return G+W},0),P=E.map(S,function(G,W){return G-B[W]});k<R;){for(var D=Number.NEGATIVE_INFINITY,A=null,N=0,I=P.length;N<I;++N)P[N]>D&&(D=P[N],A=N);++B[A],P[A]=0,++k}return B[d]/w}var o=9007199254740991;function h(g){var d=Math.PI*2;return(g%d+d)%d}function l(g){return g>-F&&g<F}var r=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function s(g){if(g instanceof Date)return g;if(typeof g=="string"){var d=r.exec(g);if(!d)return new Date(NaN);if(d[8]){var y=+d[4]||0;return d[8].toUpperCase()!=="Z"&&(y-=d[8].slice(0,3)),new Date(Date.UTC(+d[1],+(d[2]||1)-1,+d[3]||1,y,+(d[5]||0),+d[6]||0,+d[7]||0))}else return new Date(+d[1],+(d[2]||1)-1,+d[3]||1,+d[4]||0,+(d[5]||0),+d[6]||0,+d[7]||0)}else if(g==null)return new Date(NaN);return new Date(Math.round(g))}function c(g){return Math.pow(10,x(g))}function x(g){if(g===0)return 0;var d=Math.floor(Math.log(g)/Math.LN10);return g/Math.pow(10,d)>=10&&d++,d}function a(g,d){var y=x(g),p=Math.pow(10,y),w=g/p,S;return d?w<1.5?S=1:w<2.5?S=2:w<4?S=3:w<7?S=5:S=10:w<1?S=1:w<2?S=2:w<3?S=3:w<5?S=5:S=10,g=S*p,y>=-20?+g.toFixed(y<0?-y:0):g}function i(g,d){var y=(g.length-1)*d+1,p=Math.floor(y),w=+g[p-1],S=y-p;return S?w+S*(g[p]-w):w}function n(g){g.sort(function(k,P){return B(k,P,0)?-1:1});for(var d=-1/0,y=1,p=0;p<g.length;){for(var w=g[p].interval,S=g[p].close,R=0;R<2;R++)w[R]<=d&&(w[R]=d,S[R]=R?1:1-y),d=w[R],y=S[R];w[0]===w[1]&&S[0]*S[1]!==1?g.splice(p,1):p++}return g;function B(k,P,D){return k.interval[D]<P.interval[D]||k.interval[D]===P.interval[D]&&(k.close[D]-P.close[D]===(D?-1:1)||!D&&B(k,P,1))}}function u(g){return g-parseFloat(g)>=0}z.linearMap=M,z.parsePercent=b,z.round=L,z.asc=T,z.getPrecision=C,z.getPrecisionSafe=f,z.getPixelPrecision=v,z.getPercentWithPrecision=m,z.MAX_SAFE_INTEGER=o,z.remRadian=h,z.isRadianAroundZero=l,z.parseDate=s,z.quantity=c,z.quantityExponent=x,z.nice=a,z.quantile=i,z.reformIntervals=n,z.isNumeric=u},345507:function(X,z,e){var E=e(248070),F=E.extendShape,O=F({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},buildPath:function(M,b){var L=b.cx,T=b.cy,C=Math.max(b.r0||0,0),f=Math.max(b.r,0),v=(f-C)*.5,m=C+v,o=b.startAngle,h=b.endAngle,l=b.clockwise,r=Math.cos(o),s=Math.sin(o),c=Math.cos(h),x=Math.sin(h),a=l?h-o<Math.PI*2:o-h<Math.PI*2;a&&(M.moveTo(r*C+L,s*C+T),M.arc(r*m+L,s*m+T,v,-Math.PI+o,o,!l)),M.arc(L,T,f,o,h,!l),M.moveTo(c*f+L,x*f+T),M.arc(c*m+L,x*m+T,v,h-Math.PI*2,h-Math.PI,!l),C!==0&&(M.arc(L,T,C,h,o,l),M.moveTo(r*C+L,x*C+T)),M.closePath()}});X.exports=O},435730:function(X,z,e){var E=e(131879),F=e(248070),O=e(795946),M=e(872113),b=M.calculateTextPosition,L=F.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(s,c){var x=c.cx,a=c.cy,i=c.width/2,n=c.height/2;s.moveTo(x,a-n),s.lineTo(x+i,a+n),s.lineTo(x-i,a+n),s.closePath()}}),T=F.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(s,c){var x=c.cx,a=c.cy,i=c.width/2,n=c.height/2;s.moveTo(x,a-n),s.lineTo(x+i,a),s.lineTo(x,a+n),s.lineTo(x-i,a),s.closePath()}}),C=F.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(s,c){var x=c.x,a=c.y,i=c.width/5*3,n=Math.max(i,c.height),u=i/2,g=u*u/(n-u),d=a-n+u+g,y=Math.asin(g/u),p=Math.cos(y)*u,w=Math.sin(y),S=Math.cos(y),R=u*.6,B=u*.7;s.moveTo(x-p,d+g),s.arc(x,d,u,Math.PI-y,Math.PI*2+y),s.bezierCurveTo(x+p-w*R,d+g+S*R,x,a-B,x,a),s.bezierCurveTo(x,a-B,x-p+w*R,d+g+S*R,x-p,d+g),s.closePath()}}),f=F.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(s,c){var x=c.height,a=c.width,i=c.x,n=c.y,u=a/3*2;s.moveTo(i,n),s.lineTo(i+u,n+x),s.lineTo(i,n+x/4*3),s.lineTo(i-u,n+x),s.lineTo(i,n),s.closePath()}}),v={line:F.Line,rect:F.Rect,roundRect:F.Rect,square:F.Rect,circle:F.Circle,diamond:T,pin:C,arrow:f,triangle:L},m={line:function(s,c,x,a,i){i.x1=s,i.y1=c+a/2,i.x2=s+x,i.y2=c+a/2},rect:function(s,c,x,a,i){i.x=s,i.y=c,i.width=x,i.height=a},roundRect:function(s,c,x,a,i){i.x=s,i.y=c,i.width=x,i.height=a,i.r=Math.min(x,a)/4},square:function(s,c,x,a,i){var n=Math.min(x,a);i.x=s,i.y=c,i.width=n,i.height=n},circle:function(s,c,x,a,i){i.cx=s+x/2,i.cy=c+a/2,i.r=Math.min(x,a)/2},diamond:function(s,c,x,a,i){i.cx=s+x/2,i.cy=c+a/2,i.width=x,i.height=a},pin:function(s,c,x,a,i){i.x=s+x/2,i.y=c+a/2,i.width=x,i.height=a},arrow:function(s,c,x,a,i){i.x=s+x/2,i.y=c+a/2,i.width=x,i.height=a},triangle:function(s,c,x,a,i){i.cx=s+x/2,i.cy=c+a/2,i.width=x,i.height=a}},o={};E.each(v,function(s,c){o[c]=new s});var h=F.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(s,c,x){var a=b(s,c,x),i=this.shape;return i&&i.symbolType==="pin"&&c.textPosition==="inside"&&(a.y=x.y+x.height*.4),a},buildPath:function(s,c,x){var a=c.symbolType;if(a!=="none"){var i=o[a];i||(a="rect",i=o[a]),m[a](c.x,c.y,c.width,c.height,i.shape),i.buildPath(s,i.shape,x)}}});function l(s,c){if(this.type!=="image"){var x=this.style,a=this.shape;a&&a.symbolType==="line"?x.stroke=s:this.__isEmptyBrush?(x.stroke=s,x.fill=c||"#fff"):(x.fill&&(x.fill=s),x.stroke&&(x.stroke=s)),this.dirty(!1)}}function r(s,c,x,a,i,n,u){var g=s.indexOf("empty")===0;g&&(s=s.substr(5,1).toLowerCase()+s.substr(6));var d;return s.indexOf("image://")===0?d=F.makeImage(s.slice(8),new O(c,x,a,i),u?"center":"cover"):s.indexOf("path://")===0?d=F.makePath(s.slice(7),{},new O(c,x,a,i),u?"center":"cover"):d=new h({shape:{symbolType:s,x:c,y:x,width:a,height:i}}),d.__isEmptyBrush=g,d.setColor=l,d.setColor(n),d}z.createSymbol=r},601655:function(X,z){var e="\0__throttleOriginMethod",E="\0__throttleRate",F="\0__throttleType";function O(L,T,C){var f,v=0,m=0,o=null,h,l,r,s;T=T||0;function c(){m=new Date().getTime(),o=null,L.apply(l,r||[])}var x=function(){f=new Date().getTime(),l=this,r=arguments;var a=s||T,i=s||C;s=null,h=f-(i?v:m)-a,clearTimeout(o),i?o=setTimeout(c,a):h>=0?c():o=setTimeout(c,-h),v=f};return x.clear=function(){o&&(clearTimeout(o),o=null)},x.debounceNextCall=function(a){s=a},x}function M(L,T,C,f){var v=L[T];if(v){var m=v[e]||v,o=v[F],h=v[E];if(h!==C||o!==f){if(C==null||!f)return L[T]=m;v=L[T]=O(m,C,f==="debounce"),v[e]=m,v[F]=f,v[E]=C}return v}}function b(L,T){var C=L[T];C&&C[e]&&(L[T]=C[e])}z.throttle=O,z.createOrUpdate=M,z.clear=b},901911:function(X,z,e){var E=e(131879),F=E.each,O=e(827146),M=e(650777),b=e(28108),L=e(835454),T=e(248070),C=e(505604),f=C.createTask,v=e(250629),m=L.makeInner(),o=v();function h(){this.group=new O,this.uid=M.getUID("viewChart"),this.renderTask=f({plan:c,reset:x}),this.renderTask.context={view:this}}h.prototype={type:"chart",init:function(n,u){},render:function(n,u,g,d){},highlight:function(n,u,g,d){s(n.getData(),d,"emphasis")},downplay:function(n,u,g,d){s(n.getData(),d,"normal")},remove:function(n,u){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var l=h.prototype;l.updateView=l.updateLayout=l.updateVisual=function(n,u,g,d){this.render(n,u,g,d)};function r(n,u,g){if(n&&(n.trigger(u,g),n.isGroup&&!T.isHighDownDispatcher(n)))for(var d=0,y=n.childCount();d<y;d++)r(n.childAt(d),u,g)}function s(n,u,g){var d=L.queryDataIndex(n,u),y=u&&u.highlightKey!=null?T.getHighlightDigit(u.highlightKey):null;d!=null?F(L.normalizeToArray(d),function(p){r(n.getItemGraphicEl(p),g,y)}):n.eachItemGraphicEl(function(p){r(p,g,y)})}b.enableClassExtend(h,["dispose"]),b.enableClassManagement(h,{registerWhenExtend:!0}),h.markUpdateMethod=function(n,u){m(n).updateMethod=u};function c(n){return o(n.model)}function x(n){var u=n.model,g=n.ecModel,d=n.api,y=n.payload,p=u.pipelineContext.progressiveRender,w=n.view,S=y&&m(y).updateMethod,R=p?"incrementalPrepareRender":S&&w[S]?S:"render";return R!=="render"&&w[R](u,g,d,y),a[R]}var a={incrementalPrepareRender:{progress:function(n,u){u.view.incrementalRender(n,u.model,u.ecModel,u.api,u.payload)}},render:{forceFirstProgress:!0,progress:function(n,u){u.view.render(u.model,u.ecModel,u.api,u.payload)}}},i=h;X.exports=i},653646:function(X,z,e){var E=e(827146),F=e(650777),O=e(28108),M=function(){this.group=new E,this.uid=F.getUID("viewComponent")};M.prototype={constructor:M,init:function(T,C){},render:function(T,C,f,v){},dispose:function(){},filterForExposedEvent:null};var b=M.prototype;b.updateView=b.updateLayout=b.updateVisual=function(T,C,f,v){},O.enableClassExtend(M),O.enableClassManagement(M,{registerWhenExtend:!0});var L=M;X.exports=L},389960:function(X){function z(E,F){this.getAllNames=function(){var O=F();return O.mapArray(O.getName)},this.containName=function(O){var M=F();return M.indexOfName(O)>=0},this.indexOfName=function(O){var M=E();return M.indexOfName(O)},this.getItemVisual=function(O,M){var b=E();return b.getItemVisual(O,M)}}var e=z;X.exports=e},658796:function(X,z,e){var E=e(131879),F=e(994819),O=e(748354),M=O.linearMap,b=E.each,L=E.isObject,T=-1,C=function(d){var y=d.mappingMethod,p=d.type,w=this.option=E.clone(d);this.type=p,this.mappingMethod=y,this._normalizeData=n[y];var S=f[p];this.applyVisual=S.applyVisual,this.getColorMapper=S.getColorMapper,this._doMap=S._doMap[y],y==="piecewise"?(o(w),v(w)):y==="category"?w.categories?m(w):o(w,!0):(E.assert(y!=="linear"||w.dataExtent),o(w))};C.prototype={constructor:C,mapValueToVisual:function(d){var y=this._normalizeData(d);return this._doMap(y,d)},getNormalizer:function(){return E.bind(this._normalizeData,this)}};var f=C.visualHandlers={color:{applyVisual:r("color"),getColorMapper:function(){var d=this.option;return E.bind(d.mappingMethod==="category"?function(y,p){return!p&&(y=this._normalizeData(y)),s.call(this,y)}:function(y,p,w){var S=!!w;return!p&&(y=this._normalizeData(y)),w=F.fastLerp(y,d.parsedVisual,w),S?w:F.stringify(w,"rgba")},this)},_doMap:{linear:function(d){return F.stringify(F.fastLerp(d,this.option.parsedVisual),"rgba")},category:s,piecewise:function(d,y){var p=a.call(this,y);return p==null&&(p=F.stringify(F.fastLerp(d,this.option.parsedVisual),"rgba")),p},fixed:c}},colorHue:h(function(d,y){return F.modifyHSL(d,y)}),colorSaturation:h(function(d,y){return F.modifyHSL(d,null,y)}),colorLightness:h(function(d,y){return F.modifyHSL(d,null,null,y)}),colorAlpha:h(function(d,y){return F.modifyAlpha(d,y)}),opacity:{applyVisual:r("opacity"),_doMap:x([0,1])},liftZ:{applyVisual:r("liftZ"),_doMap:{linear:c,category:c,piecewise:c,fixed:c}},symbol:{applyVisual:function(d,y,p){var w=this.mapValueToVisual(d);if(E.isString(w))p("symbol",w);else if(L(w))for(var S in w)w.hasOwnProperty(S)&&p(S,w[S])},_doMap:{linear:l,category:s,piecewise:function(d,y){var p=a.call(this,y);return p==null&&(p=l.call(this,d)),p},fixed:c}},symbolSize:{applyVisual:r("symbolSize"),_doMap:x([0,1])}};function v(d){var y=d.pieceList;d.hasSpecialVisual=!1,E.each(y,function(p,w){p.originIndex=w,p.visual!=null&&(d.hasSpecialVisual=!0)})}function m(d){var y=d.categories,p=d.visual,w=d.categoryMap={};if(b(y,function(B,k){w[B]=k}),!E.isArray(p)){var S=[];E.isObject(p)?b(p,function(B,k){var P=w[k];S[P??T]=B}):S[T]=p,p=i(d,S)}for(var R=y.length-1;R>=0;R--)p[R]==null&&(delete w[y[R]],y.pop())}function o(d,y){var p=d.visual,w=[];E.isObject(p)?b(p,function(R){w.push(R)}):p!=null&&w.push(p);var S={color:1,symbol:1};!y&&w.length===1&&!S.hasOwnProperty(d.type)&&(w[1]=w[0]),i(d,w)}function h(d){return{applyVisual:function(y,p,w){y=this.mapValueToVisual(y),w("color",d(p("color"),y))},_doMap:x([0,1])}}function l(d){var y=this.option.visual;return y[Math.round(M(d,[0,1],[0,y.length-1],!0))]||{}}function r(d){return function(y,p,w){w(d,this.mapValueToVisual(y))}}function s(d){var y=this.option.visual;return y[this.option.loop&&d!==T?d%y.length:d]}function c(){return this.option.visual[0]}function x(d){return{linear:function(y){return M(y,d,this.option.visual,!0)},category:s,piecewise:function(y,p){var w=a.call(this,p);return w==null&&(w=M(y,d,this.option.visual,!0)),w},fixed:c}}function a(d){var y=this.option,p=y.pieceList;if(y.hasSpecialVisual){var w=C.findPieceIndex(d,p),S=p[w];if(S&&S.visual)return S.visual[this.type]}}function i(d,y){return d.visual=y,d.type==="color"&&(d.parsedVisual=E.map(y,function(p){return F.parse(p)})),y}var n={linear:function(d){return M(d,this.option.dataExtent,[0,1],!0)},piecewise:function(d){var y=this.option.pieceList,p=C.findPieceIndex(d,y,!0);if(p!=null)return M(p,[0,y.length-1],[0,1],!0)},category:function(d){var y=this.option.categories?this.option.categoryMap[d]:d;return y??T},fixed:E.noop};C.listVisualTypes=function(){var d=[];return E.each(f,function(y,p){d.push(p)}),d},C.addVisualHandler=function(d,y){f[d]=y},C.isValidType=function(d){return f.hasOwnProperty(d)},C.eachVisual=function(d,y,p){E.isObject(d)?E.each(d,y,p):y.call(p,d)},C.mapVisual=function(d,y,p){var w,S=E.isArray(d)?[]:E.isObject(d)?{}:(w=!0,null);return C.eachVisual(d,function(R,B){var k=y.call(p,R,B);w?S=k:S[B]=k}),S},C.retrieveVisuals=function(d){var y={},p;return d&&b(f,function(w,S){d.hasOwnProperty(S)&&(y[S]=d[S],p=!0)}),p?y:null},C.prepareVisualTypes=function(d){if(L(d)){var y=[];b(d,function(p,w){y.push(w)}),d=y}else if(E.isArray(d))d=d.slice();else return[];return d.sort(function(p,w){return w==="color"&&p!=="color"&&p.indexOf("color")===0?1:-1}),d},C.dependsOn=function(d,y){return y==="color"?!!(d&&d.indexOf(y)===0):d===y},C.findPieceIndex=function(d,y,p){for(var w,S=1/0,R=0,B=y.length;R<B;R++){var k=y[R].value;if(k!=null){if(k===d||typeof k=="string"&&k===d+"")return R;p&&N(k,R)}}for(var R=0,B=y.length;R<B;R++){var P=y[R],D=P.interval,A=P.close;if(D){if(D[0]===-1/0){if(u(A[1],d,D[1]))return R}else if(D[1]===1/0){if(u(A[0],D[0],d))return R}else if(u(A[0],D[0],d)&&u(A[1],d,D[1]))return R;p&&N(D[0],R),p&&N(D[1],R)}}if(p)return d===1/0?y.length-1:d===-1/0?0:w;function N(I,G){var W=Math.abs(I-d);W<S&&(S=W,w=G)}};function u(d,y,p){return d?y<=p:y<p}var g=C;X.exports=g},359117:function(X,z,e){var E=e(131879),F=e(516923),O=e(858708),M=O.retrieveRawValue;function b(L,T){var C=T.getModel("aria");if(C.get("show")){if(C.get("description")){L.setAttribute("aria-label",C.get("description"));return}}else return;var f=0;T.eachSeries(function(n,u){++f},this);var v=C.get("data.maxCount")||10,m=C.get("series.maxCount")||10,o=Math.min(f,m),h;if(f<1)return;var l=a();l?h=c(x("general.withTitle"),{title:l}):h=x("general.withoutTitle");var r=[],s=f>1?"series.multiple.prefix":"series.single.prefix";h+=c(x(s),{seriesCount:f}),T.eachSeries(function(n,u){if(u<o){var g,d=n.get("name"),y="series."+(f>1?"multiple":"single")+".";g=x(d?y+"withName":y+"withoutName"),g=c(g,{seriesId:n.seriesIndex,seriesName:n.get("name"),seriesType:i(n.subType)});var p=n.getData();window.data=p,p.count()>v?g+=c(x("data.partialData"),{displayCnt:v}):g+=x("data.allData");for(var w=[],S=0;S<p.count();S++)if(S<v){var R=p.getName(S),B=M(p,S);w.push(c(x(R?"data.withName":"data.withoutName"),{name:R,value:B}))}g+=w.join(x("data.separator.middle"))+x("data.separator.end"),r.push(g)}}),h+=r.join(x("series.multiple.separator.middle"))+x("series.multiple.separator.end"),L.setAttribute("aria-label",h);function c(n,u){if(typeof n!="string")return n;var g=n;return E.each(u,function(d,y){g=g.replace(new RegExp("\\{\\s*"+y+"\\s*\\}","g"),d)}),g}function x(n){var u=C.get(n);if(u==null){for(var g=n.split("."),d=F.aria,y=0;y<g.length;++y)d=d[g[y]];return d}else return u}function a(){var n=T.getModel("title").option;return n&&n.length&&(n=n[0]),n&&n.text}function i(n){return F.series.typeNames[n]||"\u81EA\u5B9A\u4E49\u56FE"}}X.exports=b},31310:function(X,z,e){var E=e(131879),F=E.createHashMap;function O(M){return{getTargetSeries:function(b){var L={},T=F();return b.eachSeriesByType(M,function(C){C.__paletteScope=L,T.set(C.uid,C)}),T},reset:function(b,L){var T=b.getRawData(),C={},f=b.getData();f.each(function(v){var m=f.getRawIndex(v);C[m]=v}),T.each(function(v){var m=C[v],o=m!=null&&f.getItemVisual(m,"color",!0),h=m!=null&&f.getItemVisual(m,"borderColor",!0),l;if((!o||!h)&&(l=T.getItemModel(v)),!o){var r=l.get("itemStyle.color")||b.getColorFromPalette(T.getName(v)||v+"",b.__paletteScope,T.count());m!=null&&f.setItemVisual(m,"color",r)}if(!h){var s=l.get("itemStyle.borderColor");m!=null&&f.setItemVisual(m,"borderColor",s)}})}}}X.exports=O},964155:function(X,z,e){var E=e(521260),F=e(131879),O=F.isFunction,M={createOnAllSeries:!0,performRawSeries:!0,reset:function(b,L){var T=b.getData(),C=(b.visualColorAccessPath||"itemStyle.color").split("."),f=b.get(C),v=O(f)&&!(f instanceof E)?f:null;(!f||v)&&(f=b.getColorFromPalette(b.name,null,L.getSeriesCount())),T.setVisual("color",f);var m=(b.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),o=b.get(m);if(T.setVisual("borderColor",o),!L.isSeriesFiltered(b)){v&&T.each(function(l){T.setItemVisual(l,"color",v(b.getDataParams(l)))});var h=function(l,r){var s=l.getItemModel(r),c=s.get(C,!0),x=s.get(m,!0);c!=null&&l.setItemVisual(r,"color",c),x!=null&&l.setItemVisual(r,"borderColor",x)};return{dataEach:T.hasItemOption?h:null}}}};X.exports=M},341124:function(X,z,e){var E=e(131879),F=E.isFunction;function O(M,b,L){return{seriesType:M,performRawSeries:!0,reset:function(T,C,f){var v=T.getData(),m=T.get("symbol"),o=T.get("symbolSize"),h=T.get("symbolKeepAspect"),l=T.get("symbolRotate"),r=F(m),s=F(o),c=F(l),x=r||s||c,a=!r&&m?m:b,i=s?null:o,n=c?null:n;if(v.setVisual({legendSymbol:L||a,symbol:a,symbolSize:i,symbolKeepAspect:h,symbolRotate:l}),C.isSeriesFiltered(T))return;function u(g,d){if(x){var y=T.getRawValue(d),p=T.getDataParams(d);r&&g.setItemVisual(d,"symbol",m(y,p)),s&&g.setItemVisual(d,"symbolSize",o(y,p)),c&&g.setItemVisual(d,"symbolRotate",l(y,p))}if(g.hasItemOption){var w=g.getItemModel(d),S=w.getShallow("symbol",!0),R=w.getShallow("symbolSize",!0),B=w.getShallow("symbolRotate",!0),k=w.getShallow("symbolKeepAspect",!0);S!=null&&g.setItemVisual(d,"symbol",S),R!=null&&g.setItemVisual(d,"symbolSize",R),B!=null&&g.setItemVisual(d,"symbolRotate",B),k!=null&&g.setItemVisual(d,"symbolKeepAspect",k)}}return{dataEach:v.hasItemOption||x?u:null}}}}X.exports=O},819508:function(X,z,e){var E=e(131879),F={get:function(b,L,T){var C=E.clone((O[b]||{})[L]);return T&&E.isArray(C)?C[C.length-1]:C}},O={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},M=F;X.exports=M},236193:function(X,z,e){var E=e(131879),F=e(658796),O=E.each;function M(f){if(f){for(var v in f)if(f.hasOwnProperty(v))return!0}}function b(f,v,m){var o={};return O(v,function(l){var r=o[l]=h();O(f[l],function(s,c){if(F.isValidType(c)){var x={type:c,visual:s};m&&m(x,l),r[c]=new F(x),c==="opacity"&&(x=E.clone(x),x.type="colorAlpha",r.__hidden.__alphaForOpacity=new F(x))}})}),o;function h(){var l=function(){};l.prototype.__hidden=l.prototype;var r=new l;return r}}function L(f,v,m){var o;E.each(m,function(h){v.hasOwnProperty(h)&&M(v[h])&&(o=!0)}),o&&E.each(m,function(h){v.hasOwnProperty(h)&&M(v[h])?f[h]=E.clone(v[h]):delete f[h]})}function T(f,v,m,o,h,l){var r={};E.each(f,function(i){var n=F.prepareVisualTypes(v[i]);r[i]=n});var s;function c(i){return m.getItemVisual(s,i)}function x(i,n){m.setItemVisual(s,i,n)}l==null?m.each(a):m.each([l],a);function a(i,n){s=l==null?i:n;var u=m.getRawDataItem(s);if(!(u&&u.visualMap===!1))for(var g=o.call(h,i),d=v[g],y=r[g],p=0,w=y.length;p<w;p++){var S=y[p];d[S]&&d[S].applyVisual(i,c,x)}}}function C(f,v,m,o){var h={};E.each(f,function(r){var s=F.prepareVisualTypes(v[r]);h[r]=s});function l(r,s){o!=null&&(o=s.getDimension(o));function c(S){return s.getItemVisual(a,S)}function x(S,R){s.setItemVisual(a,S,R)}for(var a;(a=r.next())!=null;){var i=s.getRawDataItem(a);if(!(i&&i.visualMap===!1))for(var n=o!=null?s.get(o,a,!0):a,u=m(n),g=v[u],d=h[u],y=0,p=d.length;y<p;y++){var w=d[y];g[w]&&g[w].applyVisual(n,c,x)}}}return{progress:l}}z.createVisualMappings=b,z.replaceVisualOption=L,z.applyVisual=T,z.incrementalApplyVisual=C},336034:function(X,z,e){"use strict";e.r(z),e.d(z,{BasemapLayer:function(){return ce},DynamicMapLayer:function(){return Le},FeatureLayer:function(){return Be},FeatureLayerService:function(){return te},FeatureManager:function(){return be},Find:function(){return ct},Identify:function(){return Ct},IdentifyFeatures:function(){return Yt},IdentifyImage:function(){return gt},ImageMapLayer:function(){return de},ImageService:function(){return Ut},MapService:function(){return Ot},Query:function(){return Tt},RasterLayer:function(){return re},Service:function(){return ot},Support:function(){return M},Task:function(){return Ft},TiledMapLayer:function(){return It},Util:function(){return wt},VERSION:function(){return Ze},basemapLayer:function(){return ge},dynamicMapLayer:function(){return Ie},featureLayer:function(){return He},featureLayerService:function(){return ie},find:function(){return vt},get:function(){return c},identify:function(){return jt},identifyFeatures:function(){return Zt},identifyImage:function(){return dt},imageMapLayer:function(){return Se},imageService:function(){return Kt},mapService:function(){return St},options:function(){return L},post:function(){return h},query:function(){return mt},request:function(){return r},service:function(){return it},task:function(){return Dt},tiledMapLayer:function(){return Wt}});var E={i8:"3.0.12"},F=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,O=document.documentElement.style.pointerEvents==="",M={cors:F,pointerEvents:O},b=null,L={attributionWidthOffset:55},T=null,C=e(303852),f=e(149500),v=0;function m(_){var at="";_.f=_.f||"json";for(var xt in _)if(Object.prototype.hasOwnProperty.call(_,xt)){var bt=_[xt],Bt=Object.prototype.toString.call(bt),Qt;at.length&&(at+="&"),Bt==="[object Array]"?Qt=Object.prototype.toString.call(bt[0])==="[object Object]"?JSON.stringify(bt):bt.join(","):Bt==="[object Object]"?Qt=JSON.stringify(bt):Bt==="[object Date]"?Qt=bt.valueOf():Qt=bt,at+=encodeURIComponent(xt)+"="+encodeURIComponent(Qt)}const ue="%27";return at.replaceAll("'",ue)}function o(_,at){var xt=new window.XMLHttpRequest;return xt.onerror=function(bt){xt.onreadystatechange=C.Util.falseFn,_.call(at,{error:{code:500,message:"XMLHttpRequest error"}},null)},xt.onreadystatechange=function(){var bt,Bt;if(xt.readyState===4){try{bt=JSON.parse(xt.responseText)}catch{bt=null,Bt={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!Bt&&bt.error&&(Bt=bt.error,bt=null),xt.onerror=C.Util.falseFn,_.call(at,Bt,bt)}},xt.ontimeout=function(){this.onerror()},xt}function h(_,at,xt,bt){var Bt=o(xt,bt);return Bt.open("POST",_),typeof bt<"u"&&bt!==null&&typeof bt.options<"u"&&(Bt.timeout=bt.options.timeout),Bt.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),Bt.send(m(at)),Bt}function l(_,at,xt,bt){var Bt=o(xt,bt);return Bt.open("GET",_+"?"+m(at),!0),typeof bt<"u"&&bt!==null&&typeof bt.options<"u"&&(Bt.timeout=bt.options.timeout,bt.options.withCredentials&&(Bt.withCredentials=!0)),Bt.send(null),Bt}function r(_,at,xt,bt){var Bt=m(at),Qt=o(xt,bt),ue=(_+"?"+Bt).length;if(ue<=2e3&&M.cors?Qt.open("GET",_+"?"+Bt):ue>2e3&&M.cors&&(Qt.open("POST",_),Qt.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),typeof bt<"u"&&bt!==null&&typeof bt.options<"u"&&(Qt.timeout=bt.options.timeout,bt.options.withCredentials&&(Qt.withCredentials=!0)),ue<=2e3&&M.cors)Qt.send(null);else if(ue>2e3&&M.cors)Qt.send(Bt);else{if(ue<=2e3&&!M.cors)return s(_,at,xt,bt);x("a request to "+_+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");return}return Qt}function s(_,at,xt,bt){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var Bt="c"+v;at.callback="window._EsriLeafletCallbacks."+Bt,window._EsriLeafletCallbacks[Bt]=function(ue){if(window._EsriLeafletCallbacks[Bt]!==!0){var Ce,Te=Object.prototype.toString.call(ue);Te==="[object Object]"||Te==="[object Array]"||(Ce={error:{code:500,message:"Expected array or object as JSONP response"}},ue=null),!Ce&&ue.error&&(Ce=ue,ue=null),xt.call(bt,Ce,ue),window._EsriLeafletCallbacks[Bt]=!0}};var Qt=C.DomUtil.create("script",null,document.body);return Qt.type="text/javascript",Qt.src=_+"?"+m(at),Qt.id=Bt,Qt.onerror=function(ue){if(ue&&window._EsriLeafletCallbacks[Bt]!==!0){var Ce={error:{code:500,message:"An unknown error occurred"}};xt.call(bt,Ce),window._EsriLeafletCallbacks[Bt]=!0}},C.DomUtil.addClass(Qt,"esri-leaflet-jsonp"),v++,{id:Bt,url:Qt.src,abort:function(){window._EsriLeafletCallbacks._callback[Bt]({code:0,message:"Request aborted."})}}}var c=M.cors?l:s;c.CORS=l,c.JSONP=s;function x(){f&&f.warn&&f.warn.apply(f,arguments)}var a={request:r,get:c,post:h},i=a,n=e(149500);/* @preserve
* @terraformer/arcgis - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:48 GMT-0700 (Pacific Daylight Time)
*/var u=function(at,xt,bt,Bt){var Qt=(Bt[0]-bt[0])*(at[1]-bt[1])-(Bt[1]-bt[1])*(at[0]-bt[0]),ue=(xt[0]-at[0])*(at[1]-bt[1])-(xt[1]-at[1])*(at[0]-bt[0]),Ce=(Bt[1]-bt[1])*(xt[0]-at[0])-(Bt[0]-bt[0])*(xt[1]-at[1]);if(Ce!==0){var Te=Qt/Ce,Ue=ue/Ce;if(Te>=0&&Te<=1&&Ue>=0&&Ue<=1)return!0}return!1},g=function(at,xt){for(var bt=!1,Bt=-1,Qt=at.length,ue=Qt-1;++Bt<Qt;ue=Bt)(at[Bt][1]<=xt[1]&&xt[1]<at[ue][1]||at[ue][1]<=xt[1]&&xt[1]<at[Bt][1])&&xt[0]<(at[ue][0]-at[Bt][0])*(xt[1]-at[Bt][1])/(at[ue][1]-at[Bt][1])+at[Bt][0]&&(bt=!bt);return bt},d=function(at,xt){for(var bt=0;bt<at.length;bt++)if(at[bt]!==xt[bt])return!1;return!0},y=function(at,xt){for(var bt=0;bt<at.length-1;bt++)for(var Bt=0;Bt<xt.length-1;Bt++)if(u(at[bt],at[bt+1],xt[Bt],xt[Bt+1]))return!0;return!1},p=function(at){return d(at[0],at[at.length-1])||at.push(at[0]),at},w=function(at){var xt=0,bt=0,Bt=at.length,Qt=at[bt],ue;for(bt;bt<Bt-1;bt++)ue=at[bt+1],xt+=(ue[0]-Qt[0])*(ue[1]+Qt[1]),Qt=ue;return xt>=0},S=function(at){var xt={};for(var bt in at)at.hasOwnProperty(bt)&&(xt[bt]=at[bt]);return xt},R=function(at,xt){var bt=y(at,xt),Bt=g(at,xt[0]);return!!(!bt&&Bt)},B=function(at){for(var xt=[],bt=[],Bt,Qt,ue,Ce=0;Ce<at.length;Ce++){var Te=p(at[Ce].slice(0));if(!(Te.length<4))if(w(Te)){var Ue=[Te.slice().reverse()];xt.push(Ue)}else bt.push(Te.slice().reverse())}for(var Vt=[];bt.length;){ue=bt.pop();var qt=!1;for(Bt=xt.length-1;Bt>=0;Bt--)if(Qt=xt[Bt][0],R(Qt,ue)){xt[Bt].push(ue),qt=!0;break}qt||Vt.push(ue)}for(;Vt.length;){ue=Vt.pop();var ae=!1;for(Bt=xt.length-1;Bt>=0;Bt--)if(Qt=xt[Bt][0],y(Qt,ue)){xt[Bt].push(ue),ae=!0;break}ae||xt.push([ue.reverse()])}return xt.length===1?{type:"Polygon",coordinates:xt[0]}:{type:"MultiPolygon",coordinates:xt}},k=function(at,xt){for(var bt=xt?[xt,"OBJECTID","FID"]:["OBJECTID","FID"],Bt=0;Bt<bt.length;Bt++){var Qt=bt[Bt];if(Qt in at&&(typeof at[Qt]=="string"||typeof at[Qt]=="number"))return at[Qt]}throw Error("No valid id attribute found")},P=function _(at,xt){var bt={};if(at.features){bt.type="FeatureCollection",bt.features=[];for(var Bt=0;Bt<at.features.length;Bt++)bt.features.push(_(at.features[Bt],xt))}if(typeof at.x=="number"&&typeof at.y=="number"&&(bt.type="Point",bt.coordinates=[at.x,at.y],typeof at.z=="number"&&bt.coordinates.push(at.z)),at.points&&(bt.type="MultiPoint",bt.coordinates=at.points.slice(0)),at.paths&&(at.paths.length===1?(bt.type="LineString",bt.coordinates=at.paths[0].slice(0)):(bt.type="MultiLineString",bt.coordinates=at.paths.slice(0))),at.rings&&(bt=B(at.rings.slice(0))),typeof at.xmin=="number"&&typeof at.ymin=="number"&&typeof at.xmax=="number"&&typeof at.ymax=="number"&&(bt.type="Polygon",bt.coordinates=[[[at.xmax,at.ymax],[at.xmin,at.ymax],[at.xmin,at.ymin],[at.xmax,at.ymin],[at.xmax,at.ymax]]]),(at.geometry||at.attributes)&&(bt.type="Feature",bt.geometry=at.geometry?_(at.geometry):null,bt.properties=at.attributes?S(at.attributes):null,at.attributes))try{bt.id=k(at.attributes,xt)}catch{}return JSON.stringify(bt.geometry)===JSON.stringify({})&&(bt.geometry=null),at.spatialReference&&at.spatialReference.wkid&&at.spatialReference.wkid!==4326&&n.warn("Object converted in non-standard crs - "+JSON.stringify(at.spatialReference)),bt},D=function(at){var xt=[],bt=at.slice(0),Bt=p(bt.shift().slice(0));if(Bt.length>=4){w(Bt)||Bt.reverse(),xt.push(Bt);for(var Qt=0;Qt<bt.length;Qt++){var ue=p(bt[Qt].slice(0));ue.length>=4&&(w(ue)&&ue.reverse(),xt.push(ue))}}return xt},A=function(at){for(var xt=[],bt=0;bt<at.length;bt++)for(var Bt=D(at[bt]),Qt=Bt.length-1;Qt>=0;Qt--){var ue=Bt[Qt].slice(0);xt.push(ue)}return xt},N=function _(at,xt){xt=xt||"OBJECTID";var bt={wkid:4326},Bt={},Qt;switch(at.type){case"Point":Bt.x=at.coordinates[0],Bt.y=at.coordinates[1],at.coordinates[2]!=null&&(Bt.z=at.coordinates[2]),Bt.spatialReference=bt;break;case"MultiPoint":Bt.points=at.coordinates.slice(0),at.coordinates[0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"LineString":Bt.paths=[at.coordinates.slice(0)],at.coordinates[0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"MultiLineString":Bt.paths=at.coordinates.slice(0),at.coordinates[0][0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"Polygon":Bt.rings=D(at.coordinates.slice(0)),at.coordinates[0][0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"MultiPolygon":Bt.rings=A(at.coordinates.slice(0)),at.coordinates[0][0][0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"Feature":at.geometry&&(Bt.geometry=_(at.geometry,xt)),Bt.attributes=at.properties?S(at.properties):{},at.id&&(Bt.attributes[xt]=at.id);break;case"FeatureCollection":for(Bt=[],Qt=0;Qt<at.features.length;Qt++)Bt.push(_(at.features[Qt],xt));break;case"GeometryCollection":for(Bt=[],Qt=0;Qt<at.geometries.length;Qt++)Bt.push(_(at.geometries[Qt],xt));break}return Bt},I='Powered by <a href="https://www.esri.com">Esri</a>';function G(_,at){return N(_,at)}function W(_,at){return P(_,at)}function Z(_){if(_.xmin!=="NaN"&&_.ymin!=="NaN"&&_.xmax!=="NaN"&&_.ymax!=="NaN"){var at=(0,C.latLng)(_.ymin,_.xmin),xt=(0,C.latLng)(_.ymax,_.xmax);return(0,C.latLngBounds)(at,xt)}else return null}function H(_){return _=(0,C.latLngBounds)(_),{xmin:_.getSouthWest().lng,ymin:_.getSouthWest().lat,xmax:_.getNorthEast().lng,ymax:_.getNorthEast().lat,spatialReference:{wkid:4326}}}var U=/^(OBJECTID|FID|OID|ID)$/i;function V(_){var at;if(_.objectIdFieldName)at=_.objectIdFieldName;else if(_.fields){for(var xt=0;xt<=_.fields.length-1;xt++)if(_.fields[xt].type==="esriFieldTypeOID"){at=_.fields[xt].name;break}if(!at){for(xt=0;xt<=_.fields.length-1;xt++)if(_.fields[xt].name.match(U)){at=_.fields[xt].name;break}}}return at}function Y(_){for(var at in _.attributes)if(at.match(U))return at}function $(_,at){var xt,bt=_.features||_.results,Bt=bt&&bt.length;at?xt=at:xt=V(_);var Qt={type:"FeatureCollection",features:[]};if(Bt)for(var ue=bt.length-1;ue>=0;ue--){var Ce=W(bt[ue],xt||Y(bt[ue]));Qt.features.push(Ce)}return Qt}function K(_){return _=C.Util.trim(_),_[_.length-1]!=="/"&&(_+="/"),_}function J(_){if(_.url.indexOf("?")!==-1){_.requestParams=_.requestParams||{};var at=_.url.substring(_.url.indexOf("?")+1);_.url=_.url.split("?")[0],_.requestParams=JSON.parse('{"'+decodeURI(at).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return _.url=K(_.url.split("?")[0]),_}function Q(_){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(_)}function et(_){var at;switch(_){case"Point":at="esriGeometryPoint";break;case"MultiPoint":at="esriGeometryMultipoint";break;case"LineString":at="esriGeometryPolyline";break;case"MultiLineString":at="esriGeometryPolyline";break;case"Polygon":at="esriGeometryPolygon";break;case"MultiPolygon":at="esriGeometryPolygon";break}return at}function nt(_){return _.getSize().x-L.attributionWidthOffset+"px"}function st(_){if(_.attributionControl){if(_.attributionControl._esriAttributionLayerCount||(_.attributionControl._esriAttributionLayerCount=0),_.attributionControl._esriAttributionLayerCount===0){if(!_.attributionControl._esriAttributionAddedOnce){var at=document.createElement("style");at.type="text/css",at.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(at);var xt=document.createElement("style");xt.type="text/css",xt.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+nt(_)+";}",document.getElementsByTagName("head")[0].appendChild(xt),_.on("resize",function(bt){_.attributionControl&&(_.attributionControl._container.style.maxWidth=nt(bt.target))}),_.attributionControl._esriAttributionAddedOnce=!0}C.DomUtil.addClass(_.attributionControl._container,"esri-truncated-attribution:hover"),C.DomUtil.addClass(_.attributionControl._container,"esri-truncated-attribution")}_.attributionControl._esriAttributionLayerCount=_.attributionControl._esriAttributionLayerCount+1}}function ut(_){_.attributionControl&&(_.attributionControl._esriAttributionLayerCount&&_.attributionControl._esriAttributionLayerCount===1&&(C.DomUtil.removeClass(_.attributionControl._container,"esri-truncated-attribution:hover"),C.DomUtil.removeClass(_.attributionControl._container,"esri-truncated-attribution")),_.attributionControl._esriAttributionLayerCount=_.attributionControl._esriAttributionLayerCount-1)}function rt(_){var at={geometry:null,geometryType:null};if(_ instanceof C.LatLngBounds)return at.geometry=H(_),at.geometryType="esriGeometryEnvelope",at;if(_.getLatLng&&(_=_.getLatLng()),_ instanceof C.LatLng&&(_={type:"Point",coordinates:[_.lng,_.lat]}),_ instanceof C.GeoJSON&&(_=_.getLayers()[0].feature.geometry,at.geometry=G(_),at.geometryType=et(_.type)),_.toGeoJSON&&(_=_.toGeoJSON()),_.type==="Feature"&&(_=_.geometry),_.type==="Point"||_.type==="LineString"||_.type==="Polygon"||_.type==="MultiPolygon")return at.geometry=G(_),at.geometryType=et(_.type),at;x("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function ht(_,at){M.cors&&r(_,{},C.Util.bind(function(xt,bt){if(!xt){at._esriAttributions=[];for(var Bt=0;Bt<bt.contributors.length;Bt++)for(var Qt=bt.contributors[Bt],ue=0;ue<Qt.coverageAreas.length;ue++){var Ce=Qt.coverageAreas[ue],Te=(0,C.latLng)(Ce.bbox[0],Ce.bbox[1]),Ue=(0,C.latLng)(Ce.bbox[2],Ce.bbox[3]);at._esriAttributions.push({attribution:Qt.attribution,score:Ce.score,bounds:(0,C.latLngBounds)(Te,Ue),minZoom:Ce.zoomMin,maxZoom:Ce.zoomMax})}at._esriAttributions.sort(function(qt,ae){return ae.score-qt.score});var Vt={target:at};Pt(Vt)}},this))}function Pt(_){var at=_.target,xt=at._esriAttributions;if(!(!at||!at.attributionControl)){var bt=at.attributionControl._container.querySelector(".esri-dynamic-attribution");if(bt&&xt){for(var Bt="",Qt=at.getBounds(),ue=(0,C.latLngBounds)(Qt.getSouthWest().wrap(),Qt.getNorthEast().wrap()),Ce=at.getZoom(),Te=0;Te<xt.length;Te++){var Ue=xt[Te],Vt=Ue.attribution;!Bt.match(Vt)&&Ue.bounds.intersects(ue)&&Ce>=Ue.minZoom&&Ce<=Ue.maxZoom&&(Bt+=", "+Vt)}Bt=I+" | "+Bt.substr(2),bt.innerHTML=Bt,bt.style.maxWidth=nt(at),at.fire("attributionupdated",{attribution:Bt})}}}var wt={warn:x,cleanUrl:K,getUrlParams:J,isArcgisOnline:Q,geojsonTypeToArcGIS:et,responseToFeatureCollection:$,geojsonToArcGIS:G,arcgisToGeoJSON:W,boundsToExtent:H,extentToBounds:Z,calcAttributionWidth:nt,setEsriAttribution:st,removeEsriAttribution:ut,_setGeometry:rt,_getAttributionData:ht,_updateMapAttribution:Pt,_findIdAttributeFromFeature:Y,_findIdAttributeFromResponse:V},Mt=null,Ft=C.Class.extend({options:{proxy:!1,useCors:F},generateSetter:function(_,at){return C.Util.bind(function(xt){return this.params[_]=xt,this},at)},initialize:function(_){if(_.request&&_.options?(this._service=_,C.Util.setOptions(this,_.options)):(C.Util.setOptions(this,_),this.options.url=K(_.url)),this.params=C.Util.extend({},this.params||{}),this.setters)for(var at in this.setters){var xt=this.setters[at];this[at]=this.generateSetter(xt,this)}},token:function(_){return this._service?this._service.authenticate(_):this.params.token=_,this},apikey:function(_){return this.token(_)},format:function(_){return this.params.returnUnformattedValues=!_,this},request:function(_,at){return this.options.requestParams&&C.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,_,at):this._request("request",this.path,this.params,_,at)},_request:function(_,at,xt,bt,Bt){var Qt=this.options.proxy?this.options.proxy+"?"+this.options.url+at:this.options.url+at;return(_==="get"||_==="request")&&!this.options.useCors?i.get.JSONP(Qt,xt,bt,Bt):i[_](Qt,xt,bt,Bt)}});function Dt(_){return _=J(_),new Ft(_)}var Rt=null,Tt=Ft.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(_,at){return _=(0,C.latLng)(_),this.params.geometry=[_.lng,_.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=at,this.params.inSR=4326,this},where:function(_){return this.params.where=_,this},between:function(_,at){return this.params.time=[_.valueOf(),at.valueOf()],this},simplify:function(_,at){var xt=Math.abs(_.getBounds().getWest()-_.getBounds().getEast());return this.params.maxAllowableOffset=xt/_.getSize().y*at,this},orderBy:function(_,at){return at=at||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[_,at].join(" "),this},run:function(_,at){return this._cleanParams(),this.options.isModern||Q(this.options.url)&&this.options.isModern===void 0?(this.params.f="geojson",this.request(function(xt,bt){this._trapSQLerrors(xt),_.call(at,xt,bt,bt)},this)):this.request(function(xt,bt){this._trapSQLerrors(xt),_.call(at,xt,bt&&$(bt),bt)},this)},count:function(_,at){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(xt,bt){_.call(this,xt,bt&&bt.count,bt)},at)},ids:function(_,at){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(xt,bt){_.call(this,xt,bt&&bt.objectIds,bt)},at)},bounds:function(_,at){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(xt,bt){bt&&bt.extent&&Z(bt.extent)?_.call(at,xt,Z(bt.extent),bt):(xt={message:"Invalid Bounds"},_.call(at,xt,null,bt))},at)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(_){var at=(0,C.point)(_);return this.params.pixelSize=[at.x,at.y],this},layer:function(_){return this.path=_+"/query",this},_trapSQLerrors:function(_){_&&_.code==="400"&&x("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(_){this.params.inSR=4326;var at=rt(_);this.params.geometry=at.geometry,this.params.geometryType=at.geometryType}});function mt(_){return new Tt(_)}var Nt=mt,ct=Ft.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(_,at){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[_,at].join(":"),this},simplify:function(_,at){var xt=Math.abs(_.getBounds().getWest()-_.getBounds().getEast());return this.params.maxAllowableOffset=xt/_.getSize().y*at,this},run:function(_,at){return this.request(function(xt,bt){_.call(at,xt,bt&&$(bt),bt)},at)}});function vt(_){return new ct(_)}var Lt=vt,Ct=Ft.extend({path:"identify",between:function(_,at){return this.params.time=[_.valueOf(),at.valueOf()],this}});function jt(_){return new Ct(_)}var zt=null,Yt=Ct.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(_){var at=H(_.getBounds()),xt=_.getSize();return this.params.imageDisplay=[xt.x,xt.y,96],this.params.mapExtent=[at.xmin,at.ymin,at.xmax,at.ymax],this},at:function(_){return _.length===2&&(_=(0,C.latLng)(_)),this._setGeometryParams(_),this},layerDef:function(_,at){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[_,at].join(":"),this},simplify:function(_,at){var xt=Math.abs(_.getBounds().getWest()-_.getBounds().getEast());return this.params.maxAllowableOffset=xt/_.getSize().y*at,this},run:function(_,at){return this.request(function(xt,bt){if(xt)_.call(at,xt,void 0,bt);else{var Bt=$(bt);bt.results=bt.results.reverse();for(var Qt=0;Qt<Bt.features.length;Qt++){var ue=Bt.features[Qt];ue.layerId=bt.results[Qt].layerId}_.call(at,void 0,Bt,bt)}})},_setGeometryParams:function(_){var at=rt(_);this.params.geometry=at.geometry,this.params.geometryType=at.geometryType}});function Zt(_){return new Yt(_)}var ft=Zt,gt=Ct.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(_){return _=(0,C.latLng)(_),this.params.geometry=JSON.stringify({x:_.lng,y:_.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(_,at){return this.request(function(xt,bt){_.call(at,xt,bt&&this._responseToGeoJSON(bt),bt)},this)},_responseToGeoJSON:function(_){var at=_.location,xt=_.catalogItems,bt=_.catalogItemVisibilities,Bt={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[at.x,at.y]},crs:{type:"EPSG",properties:{code:at.spatialReference.wkid}},properties:{OBJECTID:_.objectId,name:_.name,value:_.value},id:_.objectId}};if(_.properties&&_.properties.Values&&(Bt.pixel.properties.values=_.properties.Values),xt&&xt.features&&(Bt.catalogItems=$(xt),bt&&bt.length===Bt.catalogItems.features.length))for(var Qt=bt.length-1;Qt>=0;Qt--)Bt.catalogItems.features[Qt].properties.catalogItemVisibility=bt[Qt];return Bt}});function dt(_){return new gt(_)}var lt=dt,ot=C.Evented.extend({options:{proxy:!1,useCors:F,timeout:0},initialize:function(_){_=_||{},this._requestQueue=[],this._authenticating=!1,C.Util.setOptions(this,_),this.options.url=K(this.options.url)},get:function(_,at,xt,bt){return this._request("get",_,at,xt,bt)},post:function(_,at,xt,bt){return this._request("post",_,at,xt,bt)},request:function(_,at,xt,bt){return this._request("request",_,at,xt,bt)},metadata:function(_,at){return this._request("get","",{},_,at)},authenticate:function(_){return this._authenticating=!1,this.options.token=_,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(_){this.options.timeout=_},_request:function(_,at,xt,bt,Bt){this.fire("requeststart",{url:this.options.url+at,params:xt,method:_},!0);var Qt=this._createServiceCallback(_,at,xt,bt,Bt);if(this.options.token&&(xt.token=this.options.token),this.options.requestParams&&C.Util.extend(xt,this.options.requestParams),this._authenticating)this._requestQueue.push([_,at,xt,bt,Bt]);else{var ue=this.options.proxy?this.options.proxy+"?"+this.options.url+at:this.options.url+at;return(_==="get"||_==="request")&&!this.options.useCors?i.get.JSONP(ue,xt,Qt,Bt):i[_](ue,xt,Qt,Bt)}},_createServiceCallback:function(_,at,xt,bt,Bt){return C.Util.bind(function(Qt,ue){Qt&&(Qt.code===499||Qt.code===498)&&(this._authenticating=!0,this._requestQueue.push([_,at,xt,bt,Bt]),this.fire("authenticationrequired",{authenticate:C.Util.bind(this.authenticate,this)},!0),Qt.authenticate=C.Util.bind(this.authenticate,this)),bt.call(Bt,Qt,ue),Qt?this.fire("requesterror",{url:this.options.url+at,params:xt,message:Qt.message,code:Qt.code,method:_},!0):this.fire("requestsuccess",{url:this.options.url+at,params:xt,response:ue,method:_},!0),this.fire("requestend",{url:this.options.url+at,params:xt,method:_},!0)},this)},_runQueue:function(){for(var _=this._requestQueue.length-1;_>=0;_--){var at=this._requestQueue[_],xt=at.shift();this[xt].apply(this,at)}this._requestQueue=[]}});function it(_){return _=J(_),new ot(_)}var yt=null,Ot=ot.extend({identify:function(){return ft(this)},find:function(){return Lt(this)},query:function(){return Nt(this)}});function St(_){return new Ot(_)}var Gt=St,Ut=ot.extend({query:function(){return Nt(this)},identify:function(){return lt(this)}});function Kt(_){return new Ut(_)}var Jt=Kt,te=ot.extend({options:{idAttribute:"OBJECTID"},query:function(){return Nt(this)},addFeature:function(_,at,xt){this.addFeatures(_,at,xt)},addFeatures:function(_,at,xt){for(var bt=_.features?_.features:[_],Bt=bt.length-1;Bt>=0;Bt--)delete bt[Bt].id;return _=G(_),_=bt.length>1?_:[_],this.post("addFeatures",{features:_},function(Qt,ue){var Ce=ue&&ue.addResults?ue.addResults.length>1?ue.addResults:ue.addResults[0]:void 0;at&&at.call(xt,Qt||ue.addResults[0].error,Ce)},xt)},updateFeature:function(_,at,xt){this.updateFeatures(_,at,xt)},updateFeatures:function(_,at,xt){var bt=_.features?_.features:[_];return _=G(_,this.options.idAttribute),_=bt.length>1?_:[_],this.post("updateFeatures",{features:_},function(Bt,Qt){var ue=Qt&&Qt.updateResults?Qt.updateResults.length>1?Qt.updateResults:Qt.updateResults[0]:void 0;at&&at.call(xt,Bt||Qt.updateResults[0].error,ue)},xt)},deleteFeature:function(_,at,xt){this.deleteFeatures(_,at,xt)},deleteFeatures:function(_,at,xt){return this.post("deleteFeatures",{objectIds:_},function(bt,Bt){var Qt=Bt&&Bt.deleteResults?Bt.deleteResults.length>1?Bt.deleteResults:Bt.deleteResults[0]:void 0;at&&at.call(xt,bt||Bt.deleteResults[0].error,Qt)},xt)}});function ie(_){return new te(_)}var oe=ie,he=e(149500),ne=window.location.protocol!=="https:"?"http:":"https:",ce=C.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:ne+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:O?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:O?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:O?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:O?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:O?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:O?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:O?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:ne+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:ne+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:ne+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(_,at){var xt;if(typeof _=="object"&&_.urlTemplate&&_.options)xt=_;else if(typeof _=="string"&&ce.TILES[_])xt=ce.TILES[_];else throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');var bt=C.Util.extend(xt.options,at);C.Util.setOptions(this,bt),this.options.ignoreDeprecationWarning||he.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&xt.urlTemplate.indexOf("token=")===-1&&(xt.urlTemplate+="?token="+this.options.token),this.options.proxy&&(xt.urlTemplate=this.options.proxy+"?"+xt.urlTemplate),C.TileLayer.prototype.initialize.call(this,xt.urlTemplate,bt)},onAdd:function(_){st(_),this.options.pane==="esri-labels"&&this._initPane(),this.options.attributionUrl&&ht((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,_),_.on("moveend",Pt),C.TileLayer.prototype.onAdd.call(this,_)},onRemove:function(_){ut(_),_.off("moveend",Pt),C.TileLayer.prototype.onRemove.call(this,_)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var _=this._map.createPane(this.options.pane);_.style.pointerEvents="none",_.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var _='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return _}});function ge(_,at){return new ce(_,at)}var Me=null,It=C.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(_){_=C.Util.setOptions(this,_),_=J(_),this.tileUrl=(_.proxy?_.proxy+"?":"")+_.url+"tile/{z}/{y}/{x}"+(_.requestParams&&Object.keys(_.requestParams).length>0?C.Util.getParamString(_.requestParams):""),_.url.indexOf("{s}")!==-1&&_.subdomains&&(_.url=_.url.replace("{s}",_.subdomains[0])),this.service=Gt(_),this.service.addEventParent(this);var at=new RegExp(/tiles.arcgis(online)?\.com/g);at.test(_.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),_.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),C.TileLayer.prototype.initialize.call(this,this.tileUrl,_)},getTileUrl:function(_){var at=this._getZoomForUrl();return C.Util.template(this.tileUrl,C.Util.extend({s:this._getSubdomain(_),x:_.x,y:_.y,z:this._lodMap&&this._lodMap[at]!==void 0?this._lodMap[at]:at},this.options))},createTile:function(_,at){var xt=document.createElement("img");return C.DomEvent.on(xt,"load",C.Util.bind(this._tileOnLoad,this,at,xt)),C.DomEvent.on(xt,"error",C.Util.bind(this._tileOnError,this,at,xt)),this.options.crossOrigin&&(xt.crossOrigin=""),xt.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]!==void 0?xt.src=this.getTileUrl(_):this.once("lodmap",function(){xt.src=this.getTileUrl(_)},this),xt},onAdd:function(_){st(_),this._lodMap||this.metadata(function(at,xt){if(!at&&xt.spatialReference){var bt=xt.spatialReference.latestWkid||xt.spatialReference.wkid;if(!this.options.attribution&&_.attributionControl&&xt.copyrightText&&(this.options.attribution=xt.copyrightText,_.attributionControl.addAttribution(this.getAttribution())),_.options.crs===C.CRS.EPSG3857&&(bt===102100||bt===3857)){this._lodMap={};for(var Bt=xt.tileInfo.lods,Qt=It.MercatorZoomLevels,ue=0;ue<Bt.length;ue++){var Ce=Bt[ue];for(var Te in Qt){var Ue=Qt[Te];if(this._withinPercentage(Ce.resolution,Ue,this.options.zoomOffsetAllowance)){this._lodMap[Te]=Ce.level;break}}}this.fire("lodmap")}else _.options.crs&&_.options.crs.code&&_.options.crs.code.indexOf(bt)>-1||x("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/")}},this),C.TileLayer.prototype.onAdd.call(this,_)},onRemove:function(_){ut(_),C.TileLayer.prototype.onRemove.call(this,_)},metadata:function(_,at){return this.service.metadata(_,at),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(_){var at="?token="+_;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,at):this.tileUrl+at,this.options.token=_,this.service.authenticate(_),this},_withinPercentage:function(_,at,xt){var bt=Math.abs(_/at-1);return bt<xt}});function Wt(_,at){return new It(_,at)}var _t=null,ee=C.ImageOverlay.extend({onAdd:function(_){this._topLeft=_.getPixelBounds().min,C.ImageOverlay.prototype.onAdd.call(this,_)},_reset:function(){this._map.options.crs===C.CRS.EPSG3857?C.ImageOverlay.prototype._reset.call(this):C.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),re=C.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:F,attribution:null,interactive:!1,alt:""},onAdd:function(_){st(_),this.options.zIndex&&(this.options.position=null),this._update=C.Util.throttle(this._update,this.options.updateInterval,this),_.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?_.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(at,xt){!at&&!this.options.attribution&&_.attributionControl&&xt.copyrightText&&(this.options.attribution=xt.copyrightText,_.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(_){ut(_),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(_,at){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=(0,C.popup)(at),this._popupFunction=_,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(_){return this.options.zIndex=_,this._currentImage&&this._currentImage.setZIndex(_),this},_setAutoZIndex:function(_){if(this._currentImage){for(var at=this._currentImage.getPane().children,xt=-_(-1/0,1/0),bt=0,Bt=at.length,Qt;bt<Bt;bt++)Qt=at[bt].style.zIndex,at[bt]!==this._currentImage._image&&Qt&&(xt=_(xt,+Qt));isFinite(xt)&&(this.options.zIndex=xt+_(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(_){return this.options.opacity=_,this._currentImage&&this._currentImage.setOpacity(_),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(_,at){return this.options.from=_,this.options.to=at,this._update(),this},metadata:function(_,at){return this.service.metadata(_,at),this},authenticate:function(_){return this.service.authenticate(_),this},redraw:function(){this._update()},_renderImage:function(_,at,xt){if(this._map){if(xt&&(_="data:"+xt+";base64,"+_),!_)return;var bt=new ee(_,at,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),Bt=function(){this._map.removeLayer(bt),this.fire("error"),bt.off("load",Qt,this)},Qt=function(ue){if(bt.off("error",Bt,this),this._map){var Ce=ue.target,Te=this._currentImage;Ce._bounds.equals(at)&&Ce._bounds.equals(this._map.getBounds())?(this._currentImage=Ce,this.options.position==="front"?this.bringToFront():this.options.position==="back"&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),Te&&this._map&&this._map.removeLayer(Te),Te&&Te._map&&Te._map.removeLayer(Te)):this._map.removeLayer(Ce)}this.fire("load",{bounds:at})};bt.once("error",Bt,this),bt.once("load",Qt,this)}},_update:function(){if(this._map){var _=this._map.getZoom(),at=this._map.getBounds();if(!this._animatingZoom&&!(this._map._panTransition&&this._map._panTransition._inProgress)){if(_>this.options.maxZoom||_<this.options.minZoom){this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);return}var xt=this._buildExportParams();C.Util.extend(xt,this.options.requestParams),xt?(this._requestExport(xt,at),this.fire("loading",{bounds:at})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(_,at,xt,bt){if(_=(0,C.latLng)(_),this._shouldRenderPopup&&this._lastClick.equals(_)){var Bt=this._popupFunction(at,xt,bt);Bt&&this._popup.setLatLng(_).setContent(Bt).openOn(this._map)}},_resetPopupState:function(_){this._shouldRenderPopup=!1,this._lastClick=_.latlng},_calculateBbox:function(){var _=this._map.getPixelBounds(),at=this._map.unproject(_.getBottomLeft()),xt=this._map.unproject(_.getTopRight()),bt=this._map.options.crs.project(xt),Bt=this._map.options.crs.project(at),Qt=(0,C.bounds)(bt,Bt);return[Qt.getBottomLeft().x,Qt.getBottomLeft().y,Qt.getTopRight().x,Qt.getTopRight().y].join(",")},_calculateImageSize:function(){var _=this._map.getPixelBounds(),at=this._map.getSize(),xt=this._map.unproject(_.getBottomLeft()),bt=this._map.unproject(_.getTopRight()),Bt=this._map.latLngToLayerPoint(bt).y,Qt=this._map.latLngToLayerPoint(xt).y;return(Bt>0||Qt<at.y)&&(at.y=Qt-Bt),at.x+","+at.y}}),de=re.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(_){_=J(_),this.service=Jt(_),this.service.addEventParent(this),C.Util.setOptions(this,_)},setPixelType:function(_){return this.options.pixelType=_,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(_){return C.Util.isArray(_)?this.options.bandIds=_.join(","):this.options.bandIds=_.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(_,at){return C.Util.isArray(_)?this.options.noData=_.join(","):this.options.noData=_.toString(),at&&(this.options.noDataInterpretation=at),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(_){this.options.renderingRule=_,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(_){this.options.mosaicRule=_,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(_){var at=C.Util.bind(function(bt,Bt,Qt){bt||setTimeout(C.Util.bind(function(){this._renderPopup(_.latlng,bt,Bt,Qt)},this),300)},this),xt=this.identify().at(_.latlng);this.options.mosaicRule&&xt.setMosaicRule(this.options.mosaicRule),xt.run(at),this._shouldRenderPopup=!0,this._lastClick=_.latlng},_buildExportParams:function(){var _=parseInt(this._map.options.crs.code.split(":")[1],10),at={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:_,imageSR:_};return this.options.from&&this.options.to&&(at.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(at.pixelType=this.options.pixelType),this.options.interpolation&&(at.interpolation=this.options.interpolation),this.options.compressionQuality&&(at.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(at.bandIds=this.options.bandIds),(this.options.noData===0||this.options.noData)&&(at.noData=this.options.noData),this.options.noDataInterpretation&&(at.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(at.token=this.service.options.token),this.options.renderingRule&&(at.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(at.mosaicRule=JSON.stringify(this.options.mosaicRule)),at},_requestExport:function(_,at){if(this.options.f==="json")this.service.request("exportImage",_,function(bt,Bt){bt||(this.options.token&&(Bt.href+="?token="+this.options.token),this.options.proxy&&(Bt.href=this.options.proxy+"?"+Bt.href),this._renderImage(Bt.href,at))},this);else{_.f="image";var xt=this.options.url+"exportImage"+C.Util.getParamString(_);this.options.proxy&&(xt=this.options.proxy+"?"+xt),this._renderImage(xt,at)}}});function Se(_,at){return new de(_,at)}var Pe=null,Le=re.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(_){_=J(_),this.service=Gt(_),this.service.addEventParent(this),C.Util.setOptions(this,_)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(_){return this.options.dynamicLayers=_,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(_){return this.options.layers=_,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(_){return this.options.layerDefs=_,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(_){return this.options.timeOptions=_,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(_){var at=C.Util.bind(function(Bt,Qt,ue){Bt||setTimeout(C.Util.bind(function(){this._renderPopup(_.latlng,Bt,Qt,ue)},this),300)},this),xt;if(this.options.popup?xt=this.options.popup.on(this._map).at(_.latlng):xt=this.identify().on(this._map).at(_.latlng),xt.params.maxAllowableOffset||xt.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?xt.layers("visible:"+this.options.layers.join(",")):xt.layers("visible")),this.options.layerDefs&&typeof this.options.layerDefs!="string"&&!xt.params.layerDefs)for(var bt in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,bt)&&xt.layerDef(bt,this.options.layerDefs[bt]);xt.run(at),this._shouldRenderPopup=!0,this._lastClick=_.latlng},_buildExportParams:function(){var _=parseInt(this._map.options.crs.code.split(":")[1],10),at={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:_,imageSR:_};if(this.options.dynamicLayers&&(at.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(this.options.layers.length===0)return;at.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(at.layerDefs=typeof this.options.layerDefs=="string"?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(at.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(at.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(at.token=this.service.options.token),this.options.proxy&&(at.proxy=this.options.proxy),this.options.disableCache&&(at._ts=Date.now()),at},_requestExport:function(_,at){if(this.options.f==="json")this.service.request("export",_,function(bt,Bt){bt||(this.options.token&&Bt.href&&(Bt.href+="?token="+this.options.token),this.options.proxy&&Bt.href&&(Bt.href=this.options.proxy+"?"+Bt.href),Bt.href?this._renderImage(Bt.href,at):this._renderImage(Bt.imageData,at,Bt.contentType))},this);else{_.f="image";var xt=this.options.url+"export"+C.Util.getParamString(_);this.options.proxy&&(xt=this.options.proxy+"?"+xt),this._renderImage(xt,at)}}});function Ie(_,at){return new Le(_,at)}var pe=null,Oe=C.Layer.extend({options:{cellSize:512,updateWhenIdle:C.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(_){C.Util.setOptions(this,_)},onAdd:function(_){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(_){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var _={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=C.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),_.move=this._onMove),_},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var _=this.options.cellSize;return _ instanceof C.Point?_:new C.Point(_,_)},_pruneCells:function(){if(this._map){var _,at;for(_ in this._cells)at=this._cells[_],at.retain=at.current;for(_ in this._cells)if(at=this._cells[_],at.current&&!at.active){var xt=at.coords;this._retainParent(xt.x,xt.y,xt.z,xt.z-5)||this._retainChildren(xt.x,xt.y,xt.z,xt.z+2)}for(_ in this._cells)this._cells[_].retain||this._removeCell(_)}},_removeAllCells:function(){for(var _ in this._cells)this._removeCell(_)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(_,at,xt,bt){var Bt=Math.floor(_/2),Qt=Math.floor(at/2),ue=xt-1,Ce=new C.Point(+Bt,+Qt);Ce.z=+ue;var Te=this._cellCoordsToKey(Ce),Ue=this._cells[Te];return Ue&&Ue.active?(Ue.retain=!0,!0):(Ue&&Ue.loaded&&(Ue.retain=!0),ue>bt?this._retainParent(Bt,Qt,ue,bt):!1)},_retainChildren:function(_,at,xt,bt){for(var Bt=2*_;Bt<2*_+2;Bt++)for(var Qt=2*at;Qt<2*at+2;Qt++){var ue=new C.Point(Bt,Qt);ue.z=xt+1;var Ce=this._cellCoordsToKey(ue),Te=this._cells[Ce];if(Te&&Te.active){Te.retain=!0;continue}else Te&&Te.loaded&&(Te.retain=!0);xt+1<bt&&this._retainChildren(Bt,Qt,xt+1,bt)}},_resetView:function(_){var at=_&&(_.pinch||_.flyTo);at||this._setView(this._map.getCenter(),this._map.getZoom(),at,at)},_setView:function(_,at,xt,bt){var Bt=Math.round(at);bt||(this._cellZoom=Bt,this._abortLoading&&this._abortLoading(),this._resetGrid(),Bt!==void 0&&this._update(_),xt||this._pruneCells(),this._noPrune=!!xt)},_resetGrid:function(){var _=this._map,at=_.options.crs,xt=this._cellSize=this.getCellSize(),bt=this._cellZoom,Bt=this._map.getPixelWorldBounds(this._cellZoom);Bt&&(this._globalCellRange=this._pxBoundsToCellRange(Bt)),this._wrapX=at.wrapLng&&!this.options.noWrap&&[Math.floor(_.project([0,at.wrapLng[0]],bt).x/xt.x),Math.ceil(_.project([0,at.wrapLng[1]],bt).x/xt.y)],this._wrapY=at.wrapLat&&!this.options.noWrap&&[Math.floor(_.project([at.wrapLat[0],0],bt).y/xt.x),Math.ceil(_.project([at.wrapLat[1],0],bt).y/xt.y)]},_onMoveEnd:function(_){var at=_&&(_.pinch||_.flyTo);at||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(_){var at=this._map,xt=at._animatingZoom?Math.max(at._animateToZoom,at.getZoom()):at.getZoom(),bt=at.getZoomScale(xt,this._cellZoom),Bt=at.project(_,this._cellZoom).floor(),Qt=at.getSize().divideBy(bt*2);return new C.Bounds(Bt.subtract(Qt),Bt.add(Qt))},_update:function(_){var at=this._map;if(at){var xt=Math.round(at.getZoom());_===void 0&&(_=at.getCenter());var bt=this._getCelldPixelBounds(_),Bt=this._pxBoundsToCellRange(bt),Qt=Bt.getCenter(),ue=[],Ce=this.options.keepBuffer,Te=new C.Bounds(Bt.getBottomLeft().subtract([Ce,-Ce]),Bt.getTopRight().add([Ce,-Ce]));if(!(isFinite(Bt.min.x)&&isFinite(Bt.min.y)&&isFinite(Bt.max.x)&&isFinite(Bt.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var Ue in this._cells){var Vt=this._cells[Ue].coords;(Vt.z!==this._cellZoom||!Te.contains(new C.Point(Vt.x,Vt.y)))&&(this._cells[Ue].current=!1)}if(Math.abs(xt-this._cellZoom)>1){this._setView(_,xt);return}for(var qt=Bt.min.y;qt<=Bt.max.y;qt++)for(var ae=Bt.min.x;ae<=Bt.max.x;ae++){var ve=new C.Point(ae,qt);if(ve.z=this._cellZoom,!!this._isValidCell(ve)){var xe=this._cells[this._cellCoordsToKey(ve)];xe?xe.current=!0:ue.push(ve)}}if(ue.sort(function(Ne,we){return Ne.distanceTo(Qt)-we.distanceTo(Qt)}),ue.length!==0)for(this._loading||(this._loading=!0),ae=0;ae<ue.length;ae++){var ye=this._cellCoordsToKey(ue[ae]),De=this._keyToCellCoords(ye);this._activeCells[De]?this._reuseCell(ue[ae]):this._createCell(ue[ae])}}},_isValidCell:function(_){var at=this._map.options.crs;if(!at.infinite){var xt=this._globalCellRange;if(!at.wrapLng&&(_.x<xt.min.x||_.x>xt.max.x)||!at.wrapLat&&(_.y<xt.min.y||_.y>xt.max.y))return!1}if(!this.options.bounds)return!0;var bt=this._cellCoordsToBounds(_);return(0,C.toLatLngBounds)(this.options.bounds).overlaps(bt)},_keyToBounds:function(_){return this._cellCoordsToBounds(this._keyToCellCoords(_))},_cellCoordsToNwSe:function(_){var at=this._map,xt=this.getCellSize(),bt=_.scaleBy(xt),Bt=bt.add(xt),Qt=at.unproject(bt,_.z),ue=at.unproject(Bt,_.z);return[Qt,ue]},_cellCoordsToBounds:function(_){var at=this._cellCoordsToNwSe(_),xt=new C.LatLngBounds(at[0],at[1]);return this.options.noWrap||(xt=this._map.wrapLatLngBounds(xt)),xt},_cellCoordsToKey:function(_){return _.x+":"+_.y+":"+_.z},_keyToCellCoords:function(_){var at=_.split(":"),xt=new C.Point(+at[0],+at[1]);return xt.z=+at[2],xt},_removeCell:function(_){var at=this._cells[_];if(at){var xt=this._keyToCellCoords(_),bt=this._wrapCoords(xt),Bt=this._cellCoordsToBounds(this._wrapCoords(xt));at.current=!1,delete this._cells[_],this._activeCells[_]=at,this.cellLeave(Bt,bt,_),this.fire("cellleave",{key:_,coords:bt,bounds:Bt})}},_reuseCell:function(_){var at=this._cellCoordsToKey(_);this._cells[at]=this._activeCells[at],this._cells[at].current=!0;var xt=this._wrapCoords(_),bt=this._cellCoordsToBounds(this._wrapCoords(_));this.cellEnter(bt,xt,at),this.fire("cellenter",{key:at,coords:xt,bounds:bt})},_createCell:function(_){var at=this._cellCoordsToKey(_),xt=this._wrapCoords(_),bt=this._cellCoordsToBounds(this._wrapCoords(_));this.createCell(bt,xt,at),this.fire("cellcreate",{key:at,coords:xt,bounds:bt}),this._cells[at]={coords:_,current:!0},C.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(_,at,xt){var bt=this._cellCoordsToKey(_);xt=this._cells[bt],xt&&(xt.loaded=+new Date,xt.active=!0)},_getCellPos:function(_){return _.scaleBy(this.getCellSize())},_wrapCoords:function(_){var at=new C.Point(this._wrapX?C.Util.wrapNum(_.x,this._wrapX):_.x,this._wrapY?C.Util.wrapNum(_.y,this._wrapY):_.y);return at.z=_.z,at},_pxBoundsToCellRange:function(_){var at=this.getCellSize();return new C.Bounds(_.min.unscaleBy(at).floor(),_.max.unscaleBy(at).ceil().subtract([1,1]))}});function Fe(_){this.values=[].concat(_||[])}Fe.prototype.query=function(_){var at=this.getIndex(_);return this.values[at]},Fe.prototype.getIndex=function(at){this.dirty&&this.sort();for(var xt=0,bt=this.values.length-1,Bt,Qt;xt<=bt;)if(Bt=(xt+bt)/2|0,Qt=this.values[Math.round(Bt)],+Qt.value<+at)xt=Bt+1;else if(+Qt.value>+at)bt=Bt-1;else return Bt;return Math.abs(~bt)},Fe.prototype.between=function(at,xt){var bt=this.getIndex(at),Bt=this.getIndex(xt);if(bt===0&&Bt===0)return[];for(;this.values[bt-1]&&this.values[bt-1].value===at;)bt--;for(;this.values[Bt+1]&&this.values[Bt+1].value===xt;)Bt++;return this.values[Bt]&&this.values[Bt].value===xt&&this.values[Bt+1]&&Bt++,this.values.slice(bt,Bt)},Fe.prototype.insert=function(at){return this.values.splice(this.getIndex(at.value),0,at),this},Fe.prototype.bulkAdd=function(at,xt){return this.values=this.values.concat([].concat(at||[])),xt?this.sort():this.dirty=!0,this},Fe.prototype.sort=function(){return this.values.sort(function(at,xt){return+xt.value-+at.value}).reverse(),this.dirty=!1,this};var Ve=Fe,be=Oe.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(_){if(Oe.prototype.initialize.call(this,_),_=J(_),_=C.Util.setOptions(this,_),this.service=oe(_),this.service.addEventParent(this),this.options.fields[0]!=="*"){for(var at=!1,xt=0;xt<this.options.fields.length;xt++)this.options.fields[xt].match(/^(OBJECTID|FID|OID|ID)$/i)&&(at=!0);at===!1&&x("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Ve,this._endTimeIndex=new Ve):this.options.timeField&&(this._timeIndex=new Ve),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(_){return st(_),this.service.metadata(function(at,xt){if(!at){var bt=xt.supportedQueryFormats,Bt=!1;(this.service.options.isModern===!1||this.options.fetchAllFeatures)&&(Bt=!0),!Bt&&bt&&bt.indexOf("geoJSON")!==-1&&(this.service.options.isModern=!0),xt.objectIdField&&(this.service.options.idAttribute=xt.objectIdField),!this.options.attribution&&_.attributionControl&&xt.copyrightText&&(this.options.attribution=xt.copyrightText,_.attributionControl.addAttribution(this.getAttribution()))}},this),_.on("zoomend",this._handleZoomChange,this),Oe.prototype.onAdd.call(this,_)},onRemove:function(_){return ut(_),_.off("zoomend",this._handleZoomChange,this),Oe.prototype.onRemove.call(this,_)},getAttribution:function(){return this.options.attribution},createCell:function(_,at){this._visibleZoom()&&this._requestFeatures(_,at)},_requestFeatures:function(_,at,xt,bt){this._activeRequests++,bt=bt||0;var Bt=this.options.where;return this._activeRequests===1&&this.fire("loading",{bounds:_},!0),this._buildQuery(_,bt).run(function(Qt,ue,Ce){Ce&&Ce.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===Bt&&(!Qt&&ue&&ue.features.length&&C.Util.requestAnimFrame(C.Util.bind(function(){this._addFeatures(ue.features,at),this._postProcessFeatures(_)},this)),!Qt&&ue&&!ue.features.length&&this._postProcessFeatures(_),Qt&&this._postProcessFeatures(_),xt&&xt.call(this,Qt,ue),Ce&&(Ce.exceededTransferLimit||Ce.properties&&Ce.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(_,at,xt,bt+ue.features.length))},this)},_postProcessFeatures:function(_){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:_})},_cacheKey:function(_){return _.z+":"+_.x+":"+_.y},_addFeatures:function(_,at){if(at){var xt=this._cacheKey(at);this._cache[xt]=this._cache[xt]||[]}for(var bt=_.length-1;bt>=0;bt--){var Bt=_[bt].id;this._currentSnapshot.indexOf(Bt)===-1&&this._currentSnapshot.push(Bt),typeof xt<"u"&&this._cache[xt].indexOf(Bt)===-1&&this._cache[xt].push(Bt)}this.options.timeField&&this._buildTimeIndexes(_),this.createLayers(_)},_buildQuery:function(_,at){var xt=this.service.query().intersects(_).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(at))&&(xt=xt.offset(at)),xt.params.resultType="tile",this.options.requestParams&&C.Util.extend(xt.params,this.options.requestParams),this.options.simplifyFactor&&xt.simplify(this._map,this.options.simplifyFactor),this.options.timeFilterMode==="server"&&this.options.from&&this.options.to&&xt.between(this.options.from,this.options.to),xt},setWhere:function(_,at,xt){this.options.where=_&&_.length?_:"1=1";for(var bt=[],Bt=[],Qt=0,ue=null,Ce=C.Util.bind(function(ae,ve){if(ae&&(ue=ae),ve)for(var xe=ve.features.length-1;xe>=0;xe--)Bt.push(ve.features[xe].id);Qt--,Qt<=0&&this._visibleZoom()&&_===this.options.where&&(this._currentSnapshot=Bt,C.Util.requestAnimFrame(C.Util.bind(function(){this.removeLayers(bt),this.addLayers(Bt),at&&at.call(xt,ue)},this)))},this),Te=this._currentSnapshot.length-1;Te>=0;Te--)bt.push(this._currentSnapshot[Te]);this._cache={};for(var Ue in this._cells){Qt++;var Vt=this._keyToCellCoords(Ue),qt=this._cellCoordsToBounds(Vt);this._requestFeatures(qt,Vt,Ce)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(_,at,xt,bt){var Bt=this.options.from,Qt=this.options.to,ue=0,Ce=null,Te=C.Util.bind(function(ae){ae&&(Ce=ae),this._filterExistingFeatures(Bt,Qt,_,at),ue--,xt&&ue<=0&&xt.call(bt,Ce)},this);if(this.options.from=_,this.options.to=at,this._filterExistingFeatures(Bt,Qt,_,at),this.options.timeFilterMode==="server")for(var Ue in this._cells){ue++;var Vt=this._keyToCellCoords(Ue),qt=this._cellCoordsToBounds(Vt);this._requestFeatures(qt,Vt,Te)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(_,at,xt,bt){var Bt=_&&at?this._getFeaturesInTimeRange(_,at):this._currentSnapshot,Qt=this._getFeaturesInTimeRange(xt,bt);if(Qt.indexOf)for(var ue=0;ue<Qt.length;ue++){var Ce=Bt.indexOf(Qt[ue]);Ce>=0&&Bt.splice(Ce,1)}C.Util.requestAnimFrame(C.Util.bind(function(){this.removeLayers(Bt),this.addLayers(Qt)},this))},_getFeaturesInTimeRange:function(_,at){var xt=[],bt;if(this.options.timeField.start&&this.options.timeField.end){var Bt=this._startTimeIndex.between(_,at),Qt=this._endTimeIndex.between(_,at);bt=Bt.concat(Qt)}else if(this._timeIndex)bt=this._timeIndex.between(_,at);else return x("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];for(var ue=bt.length-1;ue>=0;ue--)xt.push(bt[ue].id);return xt},_buildTimeIndexes:function(_){var at,xt;if(this.options.timeField.start&&this.options.timeField.end){var bt=[],Bt=[];for(at=_.length-1;at>=0;at--)xt=_[at],bt.push({id:xt.id,value:new Date(xt.properties[this.options.timeField.start])}),Bt.push({id:xt.id,value:new Date(xt.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(bt),this._endTimeIndex.bulkAdd(Bt)}else{var Qt=[];for(at=_.length-1;at>=0;at--)xt=_[at],Qt.push({id:xt.id,value:new Date(xt.properties[this.options.timeField])});this._timeIndex.bulkAdd(Qt)}},_featureWithinTimeRange:function(_){if(!this.options.from||!this.options.to)return!0;var at=+this.options.from.valueOf(),xt=+this.options.to.valueOf();if(typeof this.options.timeField=="string"){var bt=+_.properties[this.options.timeField];return bt>=at&&bt<=xt}if(this.options.timeField.start&&this.options.timeField.end){var Bt=+_.properties[this.options.timeField.start],Qt=+_.properties[this.options.timeField.end];return Bt>=at&&Bt<=xt||Qt>=at&&Qt<=xt||Bt<=at&&Qt>=xt}},_visibleZoom:function(){if(!this._map)return!1;var _=this._map.getZoom();return!(_>this.options.maxZoom||_<this.options.minZoom)},_handleZoomChange:function(){if(!this._visibleZoom())this.removeLayers(this._currentSnapshot),this._currentSnapshot=[];else for(var _ in this._cells){var at=this._cells[_].coords,xt=this._cacheKey(at);this._cache[xt]&&this.addLayers(this._cache[xt])}},authenticate:function(_){return this.service.authenticate(_),this},metadata:function(_,at){return this.service.metadata(_,at),this},query:function(){return this.service.query()},_getMetadata:function(_){if(this._metadata){var at;_(at,this._metadata)}else this.metadata(C.Util.bind(function(xt,bt){this._metadata=bt,_(xt,this._metadata)},this))},addFeature:function(_,at,xt){this.addFeatures(_,at,xt)},addFeatures:function(_,at,xt){this._getMetadata(C.Util.bind(function(bt,Bt){if(bt){at&&at.call(this,bt,null);return}var Qt=_.features?_.features:[_];this.service.addFeatures(_,C.Util.bind(function(ue,Ce){if(!ue){for(var Te=Qt.length-1;Te>=0;Te--)Qt[Te].properties[Bt.objectIdField]=Qt.length>1?Ce[Te].objectId:Ce.objectId,Qt[Te].id=Qt.length>1?Ce[Te].objectId:Ce.objectId;this._addFeatures(Qt)}at&&at.call(xt,ue,Ce)},this))},this))},updateFeature:function(_,at,xt){this.updateFeatures(_,at,xt)},updateFeatures:function(_,at,xt){var bt=_.features?_.features:[_];this.service.updateFeatures(_,function(Bt,Qt){if(!Bt){for(var ue=bt.length-1;ue>=0;ue--)this.removeLayers([bt[ue].id],!0);this._addFeatures(bt)}at&&at.call(xt,Bt,Qt)},this)},deleteFeature:function(_,at,xt){this.deleteFeatures(_,at,xt)},deleteFeatures:function(_,at,xt){return this.service.deleteFeatures(_,function(bt,Bt){var Qt=Bt.length?Bt:[Bt];if(!bt&&Qt.length>0)for(var ue=Qt.length-1;ue>=0;ue--)this.removeLayers([Qt[ue].objectId],!0);at&&at.call(xt,bt,Bt)},this)}}),Be=be.extend({options:{cacheLayers:!0},initialize:function(_){_.apikey&&(_.token=_.apikey),be.prototype.initialize.call(this,_),this._originalStyle=this.options.style,this._layers={}},onRemove:function(_){for(var at in this._layers)_.removeLayer(this._layers[at]),this.fire("removefeature",{feature:this._layers[at].feature,permanent:!1},!0);return be.prototype.onRemove.call(this,_)},createNewLayer:function(_){var at=C.GeoJSON.geometryToLayer(_,this.options);return at&&(at.defaultOptions=at.options),at},_updateLayer:function(_,at){var xt=[],bt=this.options.coordsToLatLng||C.GeoJSON.coordsToLatLng;switch(at.properties&&(_.feature.properties=at.properties),at.geometry.type){case"Point":xt=C.GeoJSON.coordsToLatLng(at.geometry.coordinates),_.setLatLng(xt);break;case"LineString":xt=C.GeoJSON.coordsToLatLngs(at.geometry.coordinates,0,bt),_.setLatLngs(xt);break;case"MultiLineString":xt=C.GeoJSON.coordsToLatLngs(at.geometry.coordinates,1,bt),_.setLatLngs(xt);break;case"Polygon":xt=C.GeoJSON.coordsToLatLngs(at.geometry.coordinates,1,bt),_.setLatLngs(xt);break;case"MultiPolygon":xt=C.GeoJSON.coordsToLatLngs(at.geometry.coordinates,2,bt),_.setLatLngs(xt);break}this.redraw(_.feature.id)},createLayers:function(_){for(var at=_.length-1;at>=0;at--){var xt=_[at],bt=this._layers[xt.id],Bt;this._visibleZoom()&&bt&&!this._map.hasLayer(bt)&&(!this.options.timeField||this._featureWithinTimeRange(xt))&&(this._map.addLayer(bt),this.fire("addfeature",{feature:bt.feature},!0)),bt&&(bt.setLatLngs||bt.setLatLng)&&this._updateLayer(bt,xt),bt||(Bt=this.createNewLayer(xt),Bt?(Bt.feature=xt,Bt.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(Bt.feature,Bt),this._layers[Bt.feature.id]=Bt,this.setFeatureStyle(Bt.feature.id,this.options.style),this.fire("createfeature",{feature:Bt.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(xt))&&this._map.addLayer(Bt)):x("invalid GeoJSON encountered"))}},addLayers:function(_){for(var at=_.length-1;at>=0;at--){var xt=this._layers[_[at]];xt&&(!this.options.timeField||this._featureWithinTimeRange(xt.feature))&&(this._map.addLayer(xt),this.fire("addfeature",{feature:xt.feature},!0))}},removeLayers:function(_,at){for(var xt=_.length-1;xt>=0;xt--){var bt=_[xt],Bt=this._layers[bt];Bt&&(this.fire("removefeature",{feature:Bt.feature,permanent:at},!0),this._map.removeLayer(Bt)),Bt&&at&&delete this._layers[bt]}},cellEnter:function(_,at){this._visibleZoom()&&!this._zooming&&this._map&&C.Util.requestAnimFrame(C.Util.bind(function(){var xt=this._cacheKey(at),bt=this._cellCoordsToKey(at),Bt=this._cache[xt];this._activeCells[bt]&&Bt&&this.addLayers(Bt)},this))},cellLeave:function(_,at){this._zooming||C.Util.requestAnimFrame(C.Util.bind(function(){if(this._map){var xt=this._cacheKey(at),bt=this._cellCoordsToKey(at),Bt=this._cache[xt],Qt=this._map.getBounds();if(!this._activeCells[bt]&&Bt){for(var ue=!0,Ce=0;Ce<Bt.length;Ce++){var Te=this._layers[Bt[Ce]];Te&&Te.getBounds&&Qt.intersects(Te.getBounds())&&(ue=!1)}ue&&this.removeLayers(Bt,!this.options.cacheLayers),!this.options.cacheLayers&&ue&&(delete this._cache[xt],delete this._cells[bt],delete this._activeCells[bt])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(_){this.resetFeatureStyle(_.feature.id)},this),this},setStyle:function(_){return this.options.style=_,this.eachFeature(function(at){this.setFeatureStyle(at.feature.id,_)},this),this},resetFeatureStyle:function(_){var at=this._layers[_],xt=this._originalStyle||C.Path.prototype.options;return at&&(C.Util.extend(at.options,at.defaultOptions),this.setFeatureStyle(_,xt)),this},setFeatureStyle:function(_,at){var xt=this._layers[_];return typeof at=="function"&&(at=at(xt.feature)),xt.setStyle&&xt.setStyle(at),this},eachActiveFeature:function(_,at){if(this._map){var xt=this._map.getBounds();for(var bt in this._layers)this._currentSnapshot.indexOf(this._layers[bt].feature.id)!==-1&&(typeof this._layers[bt].getLatLng=="function"&&xt.contains(this._layers[bt].getLatLng())?_.call(at,this._layers[bt]):typeof this._layers[bt].getBounds=="function"&&xt.intersects(this._layers[bt].getBounds())&&_.call(at,this._layers[bt]))}return this},eachFeature:function(_,at){for(var xt in this._layers)_.call(at,this._layers[xt]);return this},getFeature:function(_){return this._layers[_]},bringToBack:function(){this.eachFeature(function(_){_.bringToBack&&_.bringToBack()})},bringToFront:function(){this.eachFeature(function(_){_.bringToFront&&_.bringToFront()})},redraw:function(_){return _&&this._redraw(_),this},_redraw:function(_){var at=this._layers[_],xt=at.feature;if(at&&at.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var bt=this.options.pointToLayer(xt,(0,C.latLng)(xt.geometry.coordinates[1],xt.geometry.coordinates[0])),Bt=bt.options.icon;at.setIcon(Bt)}if(at&&at.setStyle&&this.options.pointToLayer){var Qt=this.options.pointToLayer(xt,(0,C.latLng)(xt.geometry.coordinates[1],xt.geometry.coordinates[0])),ue=Qt.options;this.setFeatureStyle(xt.id,ue)}at&&at.setStyle&&this.options.style&&this.resetFeatureStyle(xt.id)},openPopup(_){return this._popup&&this._popup._prepareOpen(_||this._latlng)&&this._popup.openOn(this._map),this},openTooltip(_){return this._tooltip&&this._tooltip._prepareOpen(_)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this}});function He(_){return new Be(_)}var ke=null,Ze=E.i8},111553:function(X,z,e){var E;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(F,O,M,b){"use strict";var L=["","webkit","Moz","MS","ms","o"],T=O.createElement("div"),C="function",f=Math.round,v=Math.abs,m=Date.now;function o(At,kt,$t){return setTimeout(i(At,$t),kt)}function h(At,kt,$t){return Array.isArray(At)?(l(At,$t[kt],$t),!0):!1}function l(At,kt,$t){var le;if(At)if(At.forEach)At.forEach(kt,$t);else if(At.length!==b)for(le=0;le<At.length;)kt.call($t,At[le],le,At),le++;else for(le in At)At.hasOwnProperty(le)&&kt.call($t,At[le],le,At)}function r(At,kt,$t){var le="DEPRECATED METHOD: "+kt+`
`+$t+` AT 
`;return function(){var me=new Error("get-stack-trace"),Ae=me&&me.stack?me.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ye=F.console&&(F.console.warn||F.console.log);return Ye&&Ye.call(F.console,le,Ae),At.apply(this,arguments)}}var s;typeof Object.assign!="function"?s=function(kt){if(kt===b||kt===null)throw new TypeError("Cannot convert undefined or null to object");for(var $t=Object(kt),le=1;le<arguments.length;le++){var me=arguments[le];if(me!==b&&me!==null)for(var Ae in me)me.hasOwnProperty(Ae)&&($t[Ae]=me[Ae])}return $t}:s=Object.assign;var c=r(function(kt,$t,le){for(var me=Object.keys($t),Ae=0;Ae<me.length;)(!le||le&&kt[me[Ae]]===b)&&(kt[me[Ae]]=$t[me[Ae]]),Ae++;return kt},"extend","Use `assign`."),x=r(function(kt,$t){return c(kt,$t,!0)},"merge","Use `assign`.");function a(At,kt,$t){var le=kt.prototype,me;me=At.prototype=Object.create(le),me.constructor=At,me._super=le,$t&&s(me,$t)}function i(At,kt){return function(){return At.apply(kt,arguments)}}function n(At,kt){return typeof At==C?At.apply(kt&&kt[0]||b,kt):At}function u(At,kt){return At===b?kt:At}function g(At,kt,$t){l(w(kt),function(le){At.addEventListener(le,$t,!1)})}function d(At,kt,$t){l(w(kt),function(le){At.removeEventListener(le,$t,!1)})}function y(At,kt){for(;At;){if(At==kt)return!0;At=At.parentNode}return!1}function p(At,kt){return At.indexOf(kt)>-1}function w(At){return At.trim().split(/\s+/g)}function S(At,kt,$t){if(At.indexOf&&!$t)return At.indexOf(kt);for(var le=0;le<At.length;){if($t&&At[le][$t]==kt||!$t&&At[le]===kt)return le;le++}return-1}function R(At){return Array.prototype.slice.call(At,0)}function B(At,kt,$t){for(var le=[],me=[],Ae=0;Ae<At.length;){var Ye=kt?At[Ae][kt]:At[Ae];S(me,Ye)<0&&le.push(At[Ae]),me[Ae]=Ye,Ae++}return $t&&(kt?le=le.sort(function(Ke,qe){return Ke[kt]>qe[kt]}):le=le.sort()),le}function k(At,kt){for(var $t,le,me=kt[0].toUpperCase()+kt.slice(1),Ae=0;Ae<L.length;){if($t=L[Ae],le=$t?$t+me:kt,le in At)return le;Ae++}return b}var P=1;function D(){return P++}function A(At){var kt=At.ownerDocument||At;return kt.defaultView||kt.parentWindow||F}var N=/mobile|tablet|ip(ad|hone|od)|android/i,I="ontouchstart"in F,G=k(F,"PointerEvent")!==b,W=I&&N.test(navigator.userAgent),Z="touch",H="pen",U="mouse",V="kinect",Y=25,$=1,K=2,J=4,Q=8,et=1,nt=2,st=4,ut=8,rt=16,ht=nt|st,Pt=ut|rt,wt=ht|Pt,Mt=["x","y"],Ft=["clientX","clientY"];function Dt(At,kt){var $t=this;this.manager=At,this.callback=kt,this.element=At.element,this.target=At.options.inputTarget,this.domHandler=function(le){n(At.options.enable,[At])&&$t.handler(le)},this.init()}Dt.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(A(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(A(this.element),this.evWin,this.domHandler)}};function Rt(At){var kt,$t=At.options.inputClass;return $t?kt=$t:G?kt=Gt:W?kt=ne:I?kt=It:kt=ot,new kt(At,Tt)}function Tt(At,kt,$t){var le=$t.pointers.length,me=$t.changedPointers.length,Ae=kt&$&&le-me===0,Ye=kt&(J|Q)&&le-me===0;$t.isFirst=!!Ae,$t.isFinal=!!Ye,Ae&&(At.session={}),$t.eventType=kt,mt(At,$t),At.emit("hammer.input",$t),At.recognize($t),At.session.prevInput=$t}function mt(At,kt){var $t=At.session,le=kt.pointers,me=le.length;$t.firstInput||($t.firstInput=vt(kt)),me>1&&!$t.firstMultiple?$t.firstMultiple=vt(kt):me===1&&($t.firstMultiple=!1);var Ae=$t.firstInput,Ye=$t.firstMultiple,Qe=Ye?Ye.center:Ae.center,Ke=kt.center=Lt(le);kt.timeStamp=m(),kt.deltaTime=kt.timeStamp-Ae.timeStamp,kt.angle=Yt(Qe,Ke),kt.distance=zt(Qe,Ke),Nt($t,kt),kt.offsetDirection=jt(kt.deltaX,kt.deltaY);var qe=Ct(kt.deltaTime,kt.deltaX,kt.deltaY);kt.overallVelocityX=qe.x,kt.overallVelocityY=qe.y,kt.overallVelocity=v(qe.x)>v(qe.y)?qe.x:qe.y,kt.scale=Ye?ft(Ye.pointers,le):1,kt.rotation=Ye?Zt(Ye.pointers,le):0,kt.maxPointers=$t.prevInput?kt.pointers.length>$t.prevInput.maxPointers?kt.pointers.length:$t.prevInput.maxPointers:kt.pointers.length,ct($t,kt);var ii=At.element;y(kt.srcEvent.target,ii)&&(ii=kt.srcEvent.target),kt.target=ii}function Nt(At,kt){var $t=kt.center,le=At.offsetDelta||{},me=At.prevDelta||{},Ae=At.prevInput||{};(kt.eventType===$||Ae.eventType===J)&&(me=At.prevDelta={x:Ae.deltaX||0,y:Ae.deltaY||0},le=At.offsetDelta={x:$t.x,y:$t.y}),kt.deltaX=me.x+($t.x-le.x),kt.deltaY=me.y+($t.y-le.y)}function ct(At,kt){var $t=At.lastInterval||kt,le=kt.timeStamp-$t.timeStamp,me,Ae,Ye,Qe;if(kt.eventType!=Q&&(le>Y||$t.velocity===b)){var Ke=kt.deltaX-$t.deltaX,qe=kt.deltaY-$t.deltaY,ii=Ct(le,Ke,qe);Ae=ii.x,Ye=ii.y,me=v(ii.x)>v(ii.y)?ii.x:ii.y,Qe=jt(Ke,qe),At.lastInterval=kt}else me=$t.velocity,Ae=$t.velocityX,Ye=$t.velocityY,Qe=$t.direction;kt.velocity=me,kt.velocityX=Ae,kt.velocityY=Ye,kt.direction=Qe}function vt(At){for(var kt=[],$t=0;$t<At.pointers.length;)kt[$t]={clientX:f(At.pointers[$t].clientX),clientY:f(At.pointers[$t].clientY)},$t++;return{timeStamp:m(),pointers:kt,center:Lt(kt),deltaX:At.deltaX,deltaY:At.deltaY}}function Lt(At){var kt=At.length;if(kt===1)return{x:f(At[0].clientX),y:f(At[0].clientY)};for(var $t=0,le=0,me=0;me<kt;)$t+=At[me].clientX,le+=At[me].clientY,me++;return{x:f($t/kt),y:f(le/kt)}}function Ct(At,kt,$t){return{x:kt/At||0,y:$t/At||0}}function jt(At,kt){return At===kt?et:v(At)>=v(kt)?At<0?nt:st:kt<0?ut:rt}function zt(At,kt,$t){$t||($t=Mt);var le=kt[$t[0]]-At[$t[0]],me=kt[$t[1]]-At[$t[1]];return Math.sqrt(le*le+me*me)}function Yt(At,kt,$t){$t||($t=Mt);var le=kt[$t[0]]-At[$t[0]],me=kt[$t[1]]-At[$t[1]];return Math.atan2(me,le)*180/Math.PI}function Zt(At,kt){return Yt(kt[1],kt[0],Ft)+Yt(At[1],At[0],Ft)}function ft(At,kt){return zt(kt[0],kt[1],Ft)/zt(At[0],At[1],Ft)}var gt={mousedown:$,mousemove:K,mouseup:J},dt="mousedown",lt="mousemove mouseup";function ot(){this.evEl=dt,this.evWin=lt,this.pressed=!1,Dt.apply(this,arguments)}a(ot,Dt,{handler:function(kt){var $t=gt[kt.type];$t&$&&kt.button===0&&(this.pressed=!0),$t&K&&kt.which!==1&&($t=J),this.pressed&&($t&J&&(this.pressed=!1),this.callback(this.manager,$t,{pointers:[kt],changedPointers:[kt],pointerType:U,srcEvent:kt}))}});var it={pointerdown:$,pointermove:K,pointerup:J,pointercancel:Q,pointerout:Q},yt={2:Z,3:H,4:U,5:V},Ot="pointerdown",St="pointermove pointerup pointercancel";F.MSPointerEvent&&!F.PointerEvent&&(Ot="MSPointerDown",St="MSPointerMove MSPointerUp MSPointerCancel");function Gt(){this.evEl=Ot,this.evWin=St,Dt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a(Gt,Dt,{handler:function(kt){var $t=this.store,le=!1,me=kt.type.toLowerCase().replace("ms",""),Ae=it[me],Ye=yt[kt.pointerType]||kt.pointerType,Qe=Ye==Z,Ke=S($t,kt.pointerId,"pointerId");Ae&$&&(kt.button===0||Qe)?Ke<0&&($t.push(kt),Ke=$t.length-1):Ae&(J|Q)&&(le=!0),!(Ke<0)&&($t[Ke]=kt,this.callback(this.manager,Ae,{pointers:$t,changedPointers:[kt],pointerType:Ye,srcEvent:kt}),le&&$t.splice(Ke,1))}});var Ut={touchstart:$,touchmove:K,touchend:J,touchcancel:Q},Kt="touchstart",Jt="touchstart touchmove touchend touchcancel";function te(){this.evTarget=Kt,this.evWin=Jt,this.started=!1,Dt.apply(this,arguments)}a(te,Dt,{handler:function(kt){var $t=Ut[kt.type];if($t===$&&(this.started=!0),!!this.started){var le=ie.call(this,kt,$t);$t&(J|Q)&&le[0].length-le[1].length===0&&(this.started=!1),this.callback(this.manager,$t,{pointers:le[0],changedPointers:le[1],pointerType:Z,srcEvent:kt})}}});function ie(At,kt){var $t=R(At.touches),le=R(At.changedTouches);return kt&(J|Q)&&($t=B($t.concat(le),"identifier",!0)),[$t,le]}var oe={touchstart:$,touchmove:K,touchend:J,touchcancel:Q},he="touchstart touchmove touchend touchcancel";function ne(){this.evTarget=he,this.targetIds={},Dt.apply(this,arguments)}a(ne,Dt,{handler:function(kt){var $t=oe[kt.type],le=ce.call(this,kt,$t);le&&this.callback(this.manager,$t,{pointers:le[0],changedPointers:le[1],pointerType:Z,srcEvent:kt})}});function ce(At,kt){var $t=R(At.touches),le=this.targetIds;if(kt&($|K)&&$t.length===1)return le[$t[0].identifier]=!0,[$t,$t];var me,Ae,Ye=R(At.changedTouches),Qe=[],Ke=this.target;if(Ae=$t.filter(function(qe){return y(qe.target,Ke)}),kt===$)for(me=0;me<Ae.length;)le[Ae[me].identifier]=!0,me++;for(me=0;me<Ye.length;)le[Ye[me].identifier]&&Qe.push(Ye[me]),kt&(J|Q)&&delete le[Ye[me].identifier],me++;if(Qe.length)return[B(Ae.concat(Qe),"identifier",!0),Qe]}var ge=2500,Me=25;function It(){Dt.apply(this,arguments);var At=i(this.handler,this);this.touch=new ne(this.manager,At),this.mouse=new ot(this.manager,At),this.primaryTouch=null,this.lastTouches=[]}a(It,Dt,{handler:function(kt,$t,le){var me=le.pointerType==Z,Ae=le.pointerType==U;if(!(Ae&&le.sourceCapabilities&&le.sourceCapabilities.firesTouchEvents)){if(me)Wt.call(this,$t,le);else if(Ae&&ee.call(this,le))return;this.callback(kt,$t,le)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Wt(At,kt){At&$?(this.primaryTouch=kt.changedPointers[0].identifier,_t.call(this,kt)):At&(J|Q)&&_t.call(this,kt)}function _t(At){var kt=At.changedPointers[0];if(kt.identifier===this.primaryTouch){var $t={x:kt.clientX,y:kt.clientY};this.lastTouches.push($t);var le=this.lastTouches,me=function(){var Ae=le.indexOf($t);Ae>-1&&le.splice(Ae,1)};setTimeout(me,ge)}}function ee(At){for(var kt=At.srcEvent.clientX,$t=At.srcEvent.clientY,le=0;le<this.lastTouches.length;le++){var me=this.lastTouches[le],Ae=Math.abs(kt-me.x),Ye=Math.abs($t-me.y);if(Ae<=Me&&Ye<=Me)return!0}return!1}var re=k(T.style,"touchAction"),de=re!==b,Se="compute",Pe="auto",Le="manipulation",Ie="none",pe="pan-x",Oe="pan-y",Fe=Be();function Ve(At,kt){this.manager=At,this.set(kt)}Ve.prototype={set:function(At){At==Se&&(At=this.compute()),de&&this.manager.element.style&&Fe[At]&&(this.manager.element.style[re]=At),this.actions=At.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var At=[];return l(this.manager.recognizers,function(kt){n(kt.options.enable,[kt])&&(At=At.concat(kt.getTouchAction()))}),be(At.join(" "))},preventDefaults:function(At){var kt=At.srcEvent,$t=At.offsetDirection;if(this.manager.session.prevented){kt.preventDefault();return}var le=this.actions,me=p(le,Ie)&&!Fe[Ie],Ae=p(le,Oe)&&!Fe[Oe],Ye=p(le,pe)&&!Fe[pe];if(me){var Qe=At.pointers.length===1,Ke=At.distance<2,qe=At.deltaTime<250;if(Qe&&Ke&&qe)return}if(!(Ye&&Ae)&&(me||Ae&&$t&ht||Ye&&$t&Pt))return this.preventSrc(kt)},preventSrc:function(At){this.manager.session.prevented=!0,At.preventDefault()}};function be(At){if(p(At,Ie))return Ie;var kt=p(At,pe),$t=p(At,Oe);return kt&&$t?Ie:kt||$t?kt?pe:Oe:p(At,Le)?Le:Pe}function Be(){if(!de)return!1;var At={},kt=F.CSS&&F.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function($t){At[$t]=kt?F.CSS.supports("touch-action",$t):!0}),At}var He=1,ke=2,Ze=4,_=8,at=_,xt=16,bt=32;function Bt(At){this.options=s({},this.defaults,At||{}),this.id=D(),this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=He,this.simultaneous={},this.requireFail=[]}Bt.prototype={defaults:{},set:function(At){return s(this.options,At),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(At){if(h(At,"recognizeWith",this))return this;var kt=this.simultaneous;return At=Ce(At,this),kt[At.id]||(kt[At.id]=At,At.recognizeWith(this)),this},dropRecognizeWith:function(At){return h(At,"dropRecognizeWith",this)?this:(At=Ce(At,this),delete this.simultaneous[At.id],this)},requireFailure:function(At){if(h(At,"requireFailure",this))return this;var kt=this.requireFail;return At=Ce(At,this),S(kt,At)===-1&&(kt.push(At),At.requireFailure(this)),this},dropRequireFailure:function(At){if(h(At,"dropRequireFailure",this))return this;At=Ce(At,this);var kt=S(this.requireFail,At);return kt>-1&&this.requireFail.splice(kt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(At){return!!this.simultaneous[At.id]},emit:function(At){var kt=this,$t=this.state;function le(me){kt.manager.emit(me,At)}$t<_&&le(kt.options.event+Qt($t)),le(kt.options.event),At.additionalEvent&&le(At.additionalEvent),$t>=_&&le(kt.options.event+Qt($t))},tryEmit:function(At){if(this.canEmit())return this.emit(At);this.state=bt},canEmit:function(){for(var At=0;At<this.requireFail.length;){if(!(this.requireFail[At].state&(bt|He)))return!1;At++}return!0},recognize:function(At){var kt=s({},At);if(!n(this.options.enable,[this,kt])){this.reset(),this.state=bt;return}this.state&(at|xt|bt)&&(this.state=He),this.state=this.process(kt),this.state&(ke|Ze|_|xt)&&this.tryEmit(kt)},process:function(At){},getTouchAction:function(){},reset:function(){}};function Qt(At){return At&xt?"cancel":At&_?"end":At&Ze?"move":At&ke?"start":""}function ue(At){return At==rt?"down":At==ut?"up":At==nt?"left":At==st?"right":""}function Ce(At,kt){var $t=kt.manager;return $t?$t.get(At):At}function Te(){Bt.apply(this,arguments)}a(Te,Bt,{defaults:{pointers:1},attrTest:function(At){var kt=this.options.pointers;return kt===0||At.pointers.length===kt},process:function(At){var kt=this.state,$t=At.eventType,le=kt&(ke|Ze),me=this.attrTest(At);return le&&($t&Q||!me)?kt|xt:le||me?$t&J?kt|_:kt&ke?kt|Ze:ke:bt}});function Ue(){Te.apply(this,arguments),this.pX=null,this.pY=null}a(Ue,Te,{defaults:{event:"pan",threshold:10,pointers:1,direction:wt},getTouchAction:function(){var At=this.options.direction,kt=[];return At&ht&&kt.push(Oe),At&Pt&&kt.push(pe),kt},directionTest:function(At){var kt=this.options,$t=!0,le=At.distance,me=At.direction,Ae=At.deltaX,Ye=At.deltaY;return me&kt.direction||(kt.direction&ht?(me=Ae===0?et:Ae<0?nt:st,$t=Ae!=this.pX,le=Math.abs(At.deltaX)):(me=Ye===0?et:Ye<0?ut:rt,$t=Ye!=this.pY,le=Math.abs(At.deltaY))),At.direction=me,$t&&le>kt.threshold&&me&kt.direction},attrTest:function(At){return Te.prototype.attrTest.call(this,At)&&(this.state&ke||!(this.state&ke)&&this.directionTest(At))},emit:function(At){this.pX=At.deltaX,this.pY=At.deltaY;var kt=ue(At.direction);kt&&(At.additionalEvent=this.options.event+kt),this._super.emit.call(this,At)}});function Vt(){Te.apply(this,arguments)}a(Vt,Te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(At){return this._super.attrTest.call(this,At)&&(Math.abs(At.scale-1)>this.options.threshold||this.state&ke)},emit:function(At){if(At.scale!==1){var kt=At.scale<1?"in":"out";At.additionalEvent=this.options.event+kt}this._super.emit.call(this,At)}});function qt(){Bt.apply(this,arguments),this._timer=null,this._input=null}a(qt,Bt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pe]},process:function(At){var kt=this.options,$t=At.pointers.length===kt.pointers,le=At.distance<kt.threshold,me=At.deltaTime>kt.time;if(this._input=At,!le||!$t||At.eventType&(J|Q)&&!me)this.reset();else if(At.eventType&$)this.reset(),this._timer=o(function(){this.state=at,this.tryEmit()},kt.time,this);else if(At.eventType&J)return at;return bt},reset:function(){clearTimeout(this._timer)},emit:function(At){this.state===at&&(At&&At.eventType&J?this.manager.emit(this.options.event+"up",At):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}});function ae(){Te.apply(this,arguments)}a(ae,Te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(At){return this._super.attrTest.call(this,At)&&(Math.abs(At.rotation)>this.options.threshold||this.state&ke)}});function ve(){Te.apply(this,arguments)}a(ve,Te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ht|Pt,pointers:1},getTouchAction:function(){return Ue.prototype.getTouchAction.call(this)},attrTest:function(At){var kt=this.options.direction,$t;return kt&(ht|Pt)?$t=At.overallVelocity:kt&ht?$t=At.overallVelocityX:kt&Pt&&($t=At.overallVelocityY),this._super.attrTest.call(this,At)&&kt&At.offsetDirection&&At.distance>this.options.threshold&&At.maxPointers==this.options.pointers&&v($t)>this.options.velocity&&At.eventType&J},emit:function(At){var kt=ue(At.offsetDirection);kt&&this.manager.emit(this.options.event+kt,At),this.manager.emit(this.options.event,At)}});function xe(){Bt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}a(xe,Bt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Le]},process:function(At){var kt=this.options,$t=At.pointers.length===kt.pointers,le=At.distance<kt.threshold,me=At.deltaTime<kt.time;if(this.reset(),At.eventType&$&&this.count===0)return this.failTimeout();if(le&&me&&$t){if(At.eventType!=J)return this.failTimeout();var Ae=this.pTime?At.timeStamp-this.pTime<kt.interval:!0,Ye=!this.pCenter||zt(this.pCenter,At.center)<kt.posThreshold;this.pTime=At.timeStamp,this.pCenter=At.center,!Ye||!Ae?this.count=1:this.count+=1,this._input=At;var Qe=this.count%kt.taps;if(Qe===0)return this.hasRequireFailures()?(this._timer=o(function(){this.state=at,this.tryEmit()},kt.interval,this),ke):at}return bt},failTimeout:function(){return this._timer=o(function(){this.state=bt},this.options.interval,this),bt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==at&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ye(At,kt){return kt=kt||{},kt.recognizers=u(kt.recognizers,ye.defaults.preset),new we(At,kt)}ye.VERSION="2.0.7",ye.defaults={domEvents:!1,touchAction:Se,enable:!0,inputTarget:null,inputClass:null,preset:[[ae,{enable:!1}],[Vt,{enable:!1},["rotate"]],[ve,{direction:ht}],[Ue,{direction:ht},["swipe"]],[xe],[xe,{event:"doubletap",taps:2},["tap"]],[qt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var De=1,Ne=2;function we(At,kt){this.options=s({},ye.defaults,kt||{}),this.options.inputTarget=this.options.inputTarget||At,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=At,this.input=Rt(this),this.touchAction=new Ve(this,this.options.touchAction),ze(this,!0),l(this.options.recognizers,function($t){var le=this.add(new $t[0]($t[1]));$t[2]&&le.recognizeWith($t[2]),$t[3]&&le.requireFailure($t[3])},this)}we.prototype={set:function(At){return s(this.options,At),At.touchAction&&this.touchAction.update(),At.inputTarget&&(this.input.destroy(),this.input.target=At.inputTarget,this.input.init()),this},stop:function(At){this.session.stopped=At?Ne:De},recognize:function(At){var kt=this.session;if(!kt.stopped){this.touchAction.preventDefaults(At);var $t,le=this.recognizers,me=kt.curRecognizer;(!me||me&&me.state&at)&&(me=kt.curRecognizer=null);for(var Ae=0;Ae<le.length;)$t=le[Ae],kt.stopped!==Ne&&(!me||$t==me||$t.canRecognizeWith(me))?$t.recognize(At):$t.reset(),!me&&$t.state&(ke|Ze|_)&&(me=kt.curRecognizer=$t),Ae++}},get:function(At){if(At instanceof Bt)return At;for(var kt=this.recognizers,$t=0;$t<kt.length;$t++)if(kt[$t].options.event==At)return kt[$t];return null},add:function(At){if(h(At,"add",this))return this;var kt=this.get(At.options.event);return kt&&this.remove(kt),this.recognizers.push(At),At.manager=this,this.touchAction.update(),At},remove:function(At){if(h(At,"remove",this))return this;if(At=this.get(At),At){var kt=this.recognizers,$t=S(kt,At);$t!==-1&&(kt.splice($t,1),this.touchAction.update())}return this},on:function(At,kt){if(At!==b&&kt!==b){var $t=this.handlers;return l(w(At),function(le){$t[le]=$t[le]||[],$t[le].push(kt)}),this}},off:function(At,kt){if(At!==b){var $t=this.handlers;return l(w(At),function(le){kt?$t[le]&&$t[le].splice(S($t[le],kt),1):delete $t[le]}),this}},emit:function(At,kt){this.options.domEvents&&Ge(At,kt);var $t=this.handlers[At]&&this.handlers[At].slice();if(!(!$t||!$t.length)){kt.type=At,kt.preventDefault=function(){kt.srcEvent.preventDefault()};for(var le=0;le<$t.length;)$t[le](kt),le++}},destroy:function(){this.element&&ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ze(At,kt){var $t=At.element;if($t.style){var le;l(At.options.cssProps,function(me,Ae){le=k($t.style,Ae),kt?(At.oldCssProps[le]=$t.style[le],$t.style[le]=me):$t.style[le]=At.oldCssProps[le]||""}),kt||(At.oldCssProps={})}}function Ge(At,kt){var $t=O.createEvent("Event");$t.initEvent(At,!0,!0),$t.gesture=kt,kt.target.dispatchEvent($t)}s(ye,{INPUT_START:$,INPUT_MOVE:K,INPUT_END:J,INPUT_CANCEL:Q,STATE_POSSIBLE:He,STATE_BEGAN:ke,STATE_CHANGED:Ze,STATE_ENDED:_,STATE_RECOGNIZED:at,STATE_CANCELLED:xt,STATE_FAILED:bt,DIRECTION_NONE:et,DIRECTION_LEFT:nt,DIRECTION_RIGHT:st,DIRECTION_UP:ut,DIRECTION_DOWN:rt,DIRECTION_HORIZONTAL:ht,DIRECTION_VERTICAL:Pt,DIRECTION_ALL:wt,Manager:we,Input:Dt,TouchAction:Ve,TouchInput:ne,MouseInput:ot,PointerEventInput:Gt,TouchMouseInput:It,SingleTouchInput:te,Recognizer:Bt,AttrRecognizer:Te,Tap:xe,Pan:Ue,Swipe:ve,Pinch:Vt,Rotate:ae,Press:qt,on:g,off:d,each:l,merge:x,extend:c,assign:s,inherit:a,bindFn:i,prefixed:k});var We=typeof F<"u"?F:typeof self<"u"?self:{};We.Hammer=ye,E=function(){return ye}.call(z,e,z,X),E!==b&&(X.exports=E)})(window,document,"Hammer")},84973:function(X,z,e){"use strict";function E(i){var n=Array.prototype.slice.call(arguments,1);return n.forEach(function(u){u&&Object.keys(u).forEach(function(g){i[g]=u[g]})}),i}function F(i){return Object.prototype.toString.call(i)}function O(i){return F(i)==="[object String]"}function M(i){return F(i)==="[object Object]"}function b(i){return F(i)==="[object RegExp]"}function L(i){return F(i)==="[object Function]"}function T(i){return i.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var C={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function f(i){return Object.keys(i||{}).reduce(function(n,u){return n||C.hasOwnProperty(u)},!1)}var v={"http:":{validate:function(i,n,u){var g=i.slice(n);return u.re.http||(u.re.http=new RegExp("^\\/\\/"+u.re.src_auth+u.re.src_host_port_strict+u.re.src_path,"i")),u.re.http.test(g)?g.match(u.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(i,n,u){var g=i.slice(n);return u.re.no_http||(u.re.no_http=new RegExp("^"+u.re.src_auth+"(?:localhost|(?:(?:"+u.re.src_domain+")\\.)+"+u.re.src_domain_root+")"+u.re.src_port+u.re.src_host_terminator+u.re.src_path,"i")),u.re.no_http.test(g)?n>=3&&i[n-3]===":"||n>=3&&i[n-3]==="/"?0:g.match(u.re.no_http)[0].length:0}},"mailto:":{validate:function(i,n,u){var g=i.slice(n);return u.re.mailto||(u.re.mailto=new RegExp("^"+u.re.src_email_name+"@"+u.re.src_host_strict,"i")),u.re.mailto.test(g)?g.match(u.re.mailto)[0].length:0}}},m="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",o="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function h(i){i.__index__=-1,i.__text_cache__=""}function l(i){return function(n,u){var g=n.slice(u);return i.test(g)?g.match(i)[0].length:0}}function r(){return function(i,n){n.normalize(i)}}function s(i){var n=i.re=e(197066)(i.__opts__),u=i.__tlds__.slice();i.onCompile(),i.__tlds_replaced__||u.push(m),u.push(n.src_xn),n.src_tlds=u.join("|");function g(w){return w.replace("%TLDS%",n.src_tlds)}n.email_fuzzy=RegExp(g(n.tpl_email_fuzzy),"i"),n.link_fuzzy=RegExp(g(n.tpl_link_fuzzy),"i"),n.link_no_ip_fuzzy=RegExp(g(n.tpl_link_no_ip_fuzzy),"i"),n.host_fuzzy_test=RegExp(g(n.tpl_host_fuzzy_test),"i");var d=[];i.__compiled__={};function y(w,S){throw new Error('(LinkifyIt) Invalid schema "'+w+'": '+S)}Object.keys(i.__schemas__).forEach(function(w){var S=i.__schemas__[w];if(S!==null){var R={validate:null,link:null};if(i.__compiled__[w]=R,M(S)){b(S.validate)?R.validate=l(S.validate):L(S.validate)?R.validate=S.validate:y(w,S),L(S.normalize)?R.normalize=S.normalize:S.normalize?y(w,S):R.normalize=r();return}if(O(S)){d.push(w);return}y(w,S)}}),d.forEach(function(w){i.__compiled__[i.__schemas__[w]]&&(i.__compiled__[w].validate=i.__compiled__[i.__schemas__[w]].validate,i.__compiled__[w].normalize=i.__compiled__[i.__schemas__[w]].normalize)}),i.__compiled__[""]={validate:null,normalize:r()};var p=Object.keys(i.__compiled__).filter(function(w){return w.length>0&&i.__compiled__[w]}).map(T).join("|");i.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+n.src_ZPCc+"))("+p+")","i"),i.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+n.src_ZPCc+"))("+p+")","ig"),i.re.pretest=RegExp("("+i.re.schema_test.source+")|("+i.re.host_fuzzy_test.source+")|@","i"),h(i)}function c(i,n){var u=i.__index__,g=i.__last_index__,d=i.__text_cache__.slice(u,g);this.schema=i.__schema__.toLowerCase(),this.index=u+n,this.lastIndex=g+n,this.raw=d,this.text=d,this.url=d}function x(i,n){var u=new c(i,n);return i.__compiled__[u.schema].normalize(u,i),u}function a(i,n){if(!(this instanceof a))return new a(i,n);n||f(i)&&(n=i,i={}),this.__opts__=E({},C,n),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=E({},v,i),this.__compiled__={},this.__tlds__=o,this.__tlds_replaced__=!1,this.re={},s(this)}a.prototype.add=function(n,u){return this.__schemas__[n]=u,s(this),this},a.prototype.set=function(n){return this.__opts__=E(this.__opts__,n),this},a.prototype.test=function(n){if(this.__text_cache__=n,this.__index__=-1,!n.length)return!1;var u,g,d,y,p,w,S,R,B;if(this.re.schema_test.test(n)){for(S=this.re.schema_search,S.lastIndex=0;(u=S.exec(n))!==null;)if(y=this.testSchemaAt(n,u[2],S.lastIndex),y){this.__schema__=u[2],this.__index__=u.index+u[1].length,this.__last_index__=u.index+u[0].length+y;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(R=n.search(this.re.host_fuzzy_test),R>=0&&(this.__index__<0||R<this.__index__)&&(g=n.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(p=g.index+g[1].length,(this.__index__<0||p<this.__index__)&&(this.__schema__="",this.__index__=p,this.__last_index__=g.index+g[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(B=n.indexOf("@"),B>=0&&(d=n.match(this.re.email_fuzzy))!==null&&(p=d.index+d[1].length,w=d.index+d[0].length,(this.__index__<0||p<this.__index__||p===this.__index__&&w>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=p,this.__last_index__=w))),this.__index__>=0},a.prototype.pretest=function(n){return this.re.pretest.test(n)},a.prototype.testSchemaAt=function(n,u,g){return this.__compiled__[u.toLowerCase()]?this.__compiled__[u.toLowerCase()].validate(n,g,this):0},a.prototype.match=function(n){var u=0,g=[];this.__index__>=0&&this.__text_cache__===n&&(g.push(x(this,u)),u=this.__last_index__);for(var d=u?n.slice(u):n;this.test(d);)g.push(x(this,u)),d=d.slice(this.__last_index__),u+=this.__last_index__;return g.length?g:null},a.prototype.tlds=function(n,u){return n=Array.isArray(n)?n:[n],u?(this.__tlds__=this.__tlds__.concat(n).sort().filter(function(g,d,y){return g!==y[d-1]}).reverse(),s(this),this):(this.__tlds__=n.slice(),this.__tlds_replaced__=!0,s(this),this)},a.prototype.normalize=function(n){n.schema||(n.url="http://"+n.url),n.schema==="mailto:"&&!/^mailto:/i.test(n.url)&&(n.url="mailto:"+n.url)},a.prototype.onCompile=function(){},X.exports=a},197066:function(X,z,e){"use strict";X.exports=function(E){var F={};F.src_Any=e(550757).source,F.src_Cc=e(118436).source,F.src_Z=e(287613).source,F.src_P=e(597942).source,F.src_ZPCc=[F.src_Z,F.src_P,F.src_Cc].join("|"),F.src_ZCc=[F.src_Z,F.src_Cc].join("|");var O="[><\uFF5C]";return F.src_pseudo_letter="(?:(?!"+O+"|"+F.src_ZPCc+")"+F.src_Any+")",F.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",F.src_auth="(?:(?:(?!"+F.src_ZCc+"|[@/\\[\\]()]).)+@)?",F.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",F.src_host_terminator="(?=$|"+O+"|"+F.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+F.src_ZPCc+"))",F.src_path="(?:[/?#](?:(?!"+F.src_ZCc+"|"+O+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+F.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+F.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+F.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+F.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+F.src_ZCc+"|[']).)+\\'|\\'(?="+F.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+F.src_ZCc+"|[.]).|"+(E&&E["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+F.src_ZCc+").|\\!(?!"+F.src_ZCc+"|[!]).|\\?(?!"+F.src_ZCc+"|[?]).)+|\\/)?",F.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',F.src_xn="xn--[a-z0-9\\-]{1,59}",F.src_domain_root="(?:"+F.src_xn+"|"+F.src_pseudo_letter+"{1,63})",F.src_domain="(?:"+F.src_xn+"|(?:"+F.src_pseudo_letter+")|(?:"+F.src_pseudo_letter+"(?:-|"+F.src_pseudo_letter+"){0,61}"+F.src_pseudo_letter+"))",F.src_host="(?:(?:(?:(?:"+F.src_domain+")\\.)*"+F.src_domain+"))",F.tpl_host_fuzzy="(?:"+F.src_ip4+"|(?:(?:(?:"+F.src_domain+")\\.)+(?:%TLDS%)))",F.tpl_host_no_ip_fuzzy="(?:(?:(?:"+F.src_domain+")\\.)+(?:%TLDS%))",F.src_host_strict=F.src_host+F.src_host_terminator,F.tpl_host_fuzzy_strict=F.tpl_host_fuzzy+F.src_host_terminator,F.src_host_port_strict=F.src_host+F.src_port+F.src_host_terminator,F.tpl_host_port_fuzzy_strict=F.tpl_host_fuzzy+F.src_port+F.src_host_terminator,F.tpl_host_port_no_ip_fuzzy_strict=F.tpl_host_no_ip_fuzzy+F.src_port+F.src_host_terminator,F.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+F.src_ZPCc+"|>|$))",F.tpl_email_fuzzy="(^|"+O+'|"|\\(|'+F.src_ZCc+")("+F.src_email_name+"@"+F.tpl_host_fuzzy_strict+")",F.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+F.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+F.tpl_host_port_fuzzy_strict+F.src_path+")",F.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+F.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+F.tpl_host_port_no_ip_fuzzy_strict+F.src_path+")",F}},6448:function(X){"use strict";X.exports=function(e,E){var F=e.linkify,O=e.utils.escapeHtml,M='<a\\s([^<>]*href="[^"<>]*"[^<>]*)\\s?>',b=RegExp(M,"i"),L='<img\\s([^<>]*src="[^"<>]*"[^<>]*)\\s?\\/?>',T=RegExp(L,"i"),C=/^(?:https?:)?\/\//i,f=/^(?:https?:\/\/|ftp:\/\/|\/\/|mailto:|xmpp:)/i;E=E||{};var v=typeof E.removeUnknown<"u"?E.removeUnknown:!1,m=typeof E.removeUnbalanced<"u"?E.removeUnbalanced:!1,o=typeof E.imageClass<"u"?E.imageClass:"",h=!1,l,r=["a","b","blockquote","code","em","h1","h2","h3","h4","h5","h6","li","ol","p","pre","s","sub","sup","strong","ul"],s=new Array(r.length),c=new Array(r.length);for(l=0;l<r.length;l++)s[l]=0;for(l=0;l<r.length;l++)c[l]=!1;function x(u){var g=F.match(u);return g&&g.length===1&&g[0].index===0&&g[0].lastIndex===u.length?g[0].url:null}function a(u){return u=u.replace(/<[^<>]*>?/gi,function(g){var d,y,p,w,S,R;return/(^<->|^<-\s|^<3\s)/.test(g)?g:(d=g.match(T),d&&(y=d[1],p=x(y.match(/src="([^"<>]*)"/i)[1]),w=y.match(/alt="([^"<>]*)"/i),w=w&&typeof w[1]<"u"?w[1]:"",S=y.match(/title="([^"<>]*)"/i),S=S&&typeof S[1]<"u"?S[1]:"",p&&C.test(p))?o!==""?'<img src="'+p+'" alt="'+w+'" title="'+S+'" class="'+o+'">':'<img src="'+p+'" alt="'+w+'" title="'+S+'">':(R=r.indexOf("a"),d=g.match(b),d&&(y=d[1],p=x(y.match(/href="([^"<>]*)"/i)[1]),S=y.match(/title="([^"<>]*)"/i),S=S&&typeof S[1]<"u"?S[1]:"",p&&f.test(p))?(h=!0,s[R]+=1,'<a href="'+p+'" title="'+S+'" target="_blank">'):(d=/<\/a>/i.test(g),d?(h=!0,s[R]-=1,s[R]<0&&(c[R]=!0),"</a>"):(d=g.match(/<(br|hr)\s?\/?>/i),d?"<"+d[1].toLowerCase()+">":(d=g.match(/<(\/?)(b|blockquote|code|em|h[1-6]|li|ol(?: start="\d+")?|p|pre|s|sub|sup|strong|ul)>/i),d&&!/<\/ol start="\d+"/i.test(g)?(h=!0,R=r.indexOf(d[2].toLowerCase().split(" ")[0]),d[1]==="/"?s[R]-=1:s[R]+=1,s[R]<0&&(c[R]=!0),"<"+d[1]+d[2].toLowerCase()+">"):v===!0?"":O(g))))))}),u}function i(u){var g,d,y;for(l=0;l<r.length;l++)s[l]=0;for(l=0;l<r.length;l++)c[l]=!1;for(h=!1,d=0;d<u.tokens.length;d++)if(u.tokens[d].type==="html_block"&&(u.tokens[d].content=a(u.tokens[d].content)),u.tokens[d].type==="inline")for(y=u.tokens[d].children,g=0;g<y.length;g++)y[g].type==="html_inline"&&(y[g].content=a(y[g].content))}function n(u){if(h===!1)return;var g,d;function y(w,S){var R,B;return S==="a"?R=RegExp('<a href="[^"<>]*" title="[^"<>]*" target="_blank">',"g"):S==="ol"?R=/<ol(?: start="\d+")?>/g:R=RegExp("<"+S+">","g"),B=RegExp("</"+S+">","g"),m===!0?(w=w.replace(R,""),w=w.replace(B,"")):(w=w.replace(R,function(k){return O(k)}),w=w.replace(B,function(k){return O(k)})),w}function p(w){var S;for(S=0;S<r.length;S++)c[S]===!0&&(w=y(w,r[S]));return w}for(l=0;l<r.length;l++)s[l]!==0&&(c[l]=!0);for(g=0;g<u.tokens.length;g++){if(u.tokens[g].type==="html_block"){u.tokens[g].content=p(u.tokens[g].content);continue}if(u.tokens[g].type==="inline")for(d=u.tokens[g].children,l=0;l<d.length;l++)d[l].type==="html_inline"&&(d[l].content=p(d[l].content))}}e.core.ruler.after("linkify","sanitize_inline",i),e.core.ruler.after("sanitize_inline","sanitize_balance",n)}},330479:function(X,z,e){"use strict";X.exports=e(157125)},690923:function(X,z,e){"use strict";X.exports=e(573267)},972785:function(X){"use strict";X.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},478392:function(X){"use strict";var z="[a-zA-Z_:][a-zA-Z0-9:._-]*",e="[^\"'=<>`\\x00-\\x20]+",E="'[^']*'",F='"[^"]*"',O="(?:"+e+"|"+E+"|"+F+")",M="(?:\\s+"+z+"(?:\\s*=\\s*"+O+")?)",b="<[A-Za-z][A-Za-z0-9\\-]*"+M+"*\\s*\\/?>",L="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",T="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",C="<[?].*?[?]>",f="<![A-Z]+\\s+[^>]*>",v="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",m=new RegExp("^(?:"+b+"|"+L+"|"+T+"|"+C+"|"+f+"|"+v+")"),o=new RegExp("^(?:"+b+"|"+L+")");X.exports.n=m,X.exports.q=o},117200:function(X,z,e){"use strict";function E(B){return Object.prototype.toString.call(B)}function F(B){return E(B)==="[object String]"}var O=Object.prototype.hasOwnProperty;function M(B,k){return O.call(B,k)}function b(B){var k=Array.prototype.slice.call(arguments,1);return k.forEach(function(P){if(P){if(typeof P!="object")throw new TypeError(P+"must be object");Object.keys(P).forEach(function(D){B[D]=P[D]})}}),B}function L(B,k,P){return[].concat(B.slice(0,k),P,B.slice(k+1))}function T(B){return!(B>=55296&&B<=57343||B>=64976&&B<=65007||(B&65535)===65535||(B&65535)===65534||B>=0&&B<=8||B===11||B>=14&&B<=31||B>=127&&B<=159||B>1114111)}function C(B){if(B>65535){B-=65536;var k=55296+(B>>10),P=56320+(B&1023);return String.fromCharCode(k,P)}return String.fromCharCode(B)}var f=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,v=/&([a-z#][a-z0-9]{1,31});/gi,m=new RegExp(f.source+"|"+v.source,"gi"),o=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,h=e(690923);function l(B,k){var P=0;return M(h,k)?h[k]:k.charCodeAt(0)===35&&o.test(k)&&(P=k[1].toLowerCase()==="x"?parseInt(k.slice(2),16):parseInt(k.slice(1),10),T(P))?C(P):B}function r(B){return B.indexOf("\\")<0?B:B.replace(f,"$1")}function s(B){return B.indexOf("\\")<0&&B.indexOf("&")<0?B:B.replace(m,function(k,P,D){return P||l(k,D)})}var c=/[&<>"]/,x=/[&<>"]/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function i(B){return a[B]}function n(B){return c.test(B)?B.replace(x,i):B}var u=/[.?*+^$[\]\\(){}|-]/g;function g(B){return B.replace(u,"\\$&")}function d(B){switch(B){case 9:case 32:return!0}return!1}function y(B){if(B>=8192&&B<=8202)return!0;switch(B){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var p=e(597942);function w(B){return p.test(B)}function S(B){switch(B){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function R(B){return B.trim().replace(/\s+/g," ").toUpperCase()}z.lib={},z.lib.mdurl=e(12449),z.lib.ucmicro=e(221977),z.assign=b,z.isString=F,z.has=M,z.unescapeMd=r,z.unescapeAll=s,z.isValidEntityCode=T,z.fromCodePoint=C,z.escapeHtml=n,z.arrayReplaceAt=L,z.isSpace=d,z.isWhiteSpace=y,z.isMdAsciiPunct=S,z.isPunctChar=w,z.escapeRE=g,z.normalizeReference=R},388361:function(X,z,e){"use strict";z.parseLinkLabel=e(664299),z.parseLinkDestination=e(927668),z.parseLinkTitle=e(164298)},927668:function(X,z,e){"use strict";var E=e(117200).isSpace,F=e(117200).unescapeAll;X.exports=function(M,b,L){var T,C,f=0,v=b,m={ok:!1,pos:0,lines:0,str:""};if(M.charCodeAt(b)===60){for(b++;b<L;){if(T=M.charCodeAt(b),T===10||E(T))return m;if(T===62)return m.pos=b+1,m.str=F(M.slice(v+1,b)),m.ok=!0,m;if(T===92&&b+1<L){b+=2;continue}b++}return m}for(C=0;b<L&&(T=M.charCodeAt(b),!(T===32||T<32||T===127));){if(T===92&&b+1<L){b+=2;continue}if(T===40&&C++,T===41){if(C===0)break;C--}b++}return v===b||C!==0||(m.str=F(M.slice(v,b)),m.lines=f,m.pos=b,m.ok=!0),m}},664299:function(X){"use strict";X.exports=function(e,E,F){var O,M,b,L,T=-1,C=e.posMax,f=e.pos;for(e.pos=E+1,O=1;e.pos<C;){if(b=e.src.charCodeAt(e.pos),b===93&&(O--,O===0)){M=!0;break}if(L=e.pos,e.md.inline.skipToken(e),b===91){if(L===e.pos-1)O++;else if(F)return e.pos=f,-1}}return M&&(T=e.pos),e.pos=f,T}},164298:function(X,z,e){"use strict";var E=e(117200).unescapeAll;X.exports=function(O,M,b){var L,T,C=0,f=M,v={ok:!1,pos:0,lines:0,str:""};if(M>=b||(T=O.charCodeAt(M),T!==34&&T!==39&&T!==40))return v;for(M++,T===40&&(T=41);M<b;){if(L=O.charCodeAt(M),L===T)return v.pos=M+1,v.lines=C,v.str=E(O.slice(f+1,M)),v.ok=!0,v;L===10?C++:L===92&&M+1<b&&(M++,O.charCodeAt(M)===10&&C++),M++}return v}},157125:function(X,z,e){"use strict";var E=e(117200),F=e(388361),O=e(458311),M=e(218676),b=e(334680),L=e(586125),T=e(84973),C=e(12449),f=e(467290),v={default:e(973635),zero:e(279881),commonmark:e(203545)},m=/^(vbscript|javascript|file|data):/,o=/^data:image\/(gif|png|jpeg|webp);/;function h(x){var a=x.trim().toLowerCase();return m.test(a)?!!o.test(a):!0}var l=["http:","https:","mailto:"];function r(x){var a=C.parse(x,!0);if(a.hostname&&(!a.protocol||l.indexOf(a.protocol)>=0))try{a.hostname=f.toASCII(a.hostname)}catch{}return C.encode(C.format(a))}function s(x){var a=C.parse(x,!0);if(a.hostname&&(!a.protocol||l.indexOf(a.protocol)>=0))try{a.hostname=f.toUnicode(a.hostname)}catch{}return C.decode(C.format(a))}function c(x,a){if(!(this instanceof c))return new c(x,a);a||E.isString(x)||(a=x||{},x="default"),this.inline=new L,this.block=new b,this.core=new M,this.renderer=new O,this.linkify=new T,this.validateLink=h,this.normalizeLink=r,this.normalizeLinkText=s,this.utils=E,this.helpers=E.assign({},F),this.options={},this.configure(x),a&&this.set(a)}c.prototype.set=function(x){return E.assign(this.options,x),this},c.prototype.configure=function(x){var a=this,i;if(E.isString(x)&&(i=x,x=v[i],!x))throw new Error('Wrong `markdown-it` preset "'+i+'", check name');if(!x)throw new Error("Wrong `markdown-it` preset, can't be empty");return x.options&&a.set(x.options),x.components&&Object.keys(x.components).forEach(function(n){x.components[n].rules&&a[n].ruler.enableOnly(x.components[n].rules),x.components[n].rules2&&a[n].ruler2.enableOnly(x.components[n].rules2)}),this},c.prototype.enable=function(x,a){var i=[];Array.isArray(x)||(x=[x]),["core","block","inline"].forEach(function(u){i=i.concat(this[u].ruler.enable(x,!0))},this),i=i.concat(this.inline.ruler2.enable(x,!0));var n=x.filter(function(u){return i.indexOf(u)<0});if(n.length&&!a)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},c.prototype.disable=function(x,a){var i=[];Array.isArray(x)||(x=[x]),["core","block","inline"].forEach(function(u){i=i.concat(this[u].ruler.disable(x,!0))},this),i=i.concat(this.inline.ruler2.disable(x,!0));var n=x.filter(function(u){return i.indexOf(u)<0});if(n.length&&!a)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},c.prototype.use=function(x){var a=[this].concat(Array.prototype.slice.call(arguments,1));return x.apply(x,a),this},c.prototype.parse=function(x,a){if(typeof x!="string")throw new Error("Input data should be a String");var i=new this.core.State(x,this,a);return this.core.process(i),i.tokens},c.prototype.render=function(x,a){return a=a||{},this.renderer.render(this.parse(x,a),this.options,a)},c.prototype.parseInline=function(x,a){var i=new this.core.State(x,this,a);return i.inlineMode=!0,this.core.process(i),i.tokens},c.prototype.renderInline=function(x,a){return a=a||{},this.renderer.render(this.parseInline(x,a),this.options,a)},X.exports=c},334680:function(X,z,e){"use strict";var E=e(185100),F=[["table",e(363361),["paragraph","reference"]],["code",e(722734)],["fence",e(931625),["paragraph","reference","blockquote","list"]],["blockquote",e(770628),["paragraph","reference","blockquote","list"]],["hr",e(517312),["paragraph","reference","blockquote","list"]],["list",e(618304),["paragraph","reference","blockquote"]],["reference",e(383880)],["heading",e(19505),["paragraph","reference","blockquote"]],["lheading",e(1568)],["html_block",e(257694),["paragraph","reference","blockquote"]],["paragraph",e(361864)]];function O(){this.ruler=new E;for(var M=0;M<F.length;M++)this.ruler.push(F[M][0],F[M][1],{alt:(F[M][2]||[]).slice()})}O.prototype.tokenize=function(M,b,L){for(var T,C,f=this.ruler.getRules(""),v=f.length,m=b,o=!1,h=M.md.options.maxNesting;m<L&&(M.line=m=M.skipEmptyLines(m),!(m>=L||M.sCount[m]<M.blkIndent));){if(M.level>=h){M.line=L;break}for(C=0;C<v&&(T=f[C](M,m,L,!1),!T);C++);M.tight=!o,M.isEmpty(M.line-1)&&(o=!0),m=M.line,m<L&&M.isEmpty(m)&&(o=!0,m++,M.line=m)}},O.prototype.parse=function(M,b,L,T){var C;M&&(C=new this.State(M,b,L,T),this.tokenize(C,C.line,C.lineMax))},O.prototype.State=e(804412),X.exports=O},218676:function(X,z,e){"use strict";var E=e(185100),F=[["normalize",e(66834)],["block",e(683218)],["inline",e(185e3)],["linkify",e(384496)],["replacements",e(384896)],["smartquotes",e(758062)]];function O(){this.ruler=new E;for(var M=0;M<F.length;M++)this.ruler.push(F[M][0],F[M][1])}O.prototype.process=function(M){var b,L,T;for(T=this.ruler.getRules(""),b=0,L=T.length;b<L;b++)T[b](M)},O.prototype.State=e(623406),X.exports=O},586125:function(X,z,e){"use strict";var E=e(185100),F=[["text",e(188623)],["newline",e(707370)],["escape",e(520095)],["backticks",e(689247)],["strikethrough",e(577202).w],["emphasis",e(766881).w],["link",e(913676)],["image",e(77711)],["autolink",e(6066)],["html_inline",e(692573)],["entity",e(215969)]],O=[["balance_pairs",e(938349)],["strikethrough",e(577202).g],["emphasis",e(766881).g],["text_collapse",e(990823)]];function M(){var b;for(this.ruler=new E,b=0;b<F.length;b++)this.ruler.push(F[b][0],F[b][1]);for(this.ruler2=new E,b=0;b<O.length;b++)this.ruler2.push(O[b][0],O[b][1])}M.prototype.skipToken=function(b){var L,T,C=b.pos,f=this.ruler.getRules(""),v=f.length,m=b.md.options.maxNesting,o=b.cache;if(typeof o[C]<"u"){b.pos=o[C];return}if(b.level<m)for(T=0;T<v&&(b.level++,L=f[T](b,!0),b.level--,!L);T++);else b.pos=b.posMax;L||b.pos++,o[C]=b.pos},M.prototype.tokenize=function(b){for(var L,T,C=this.ruler.getRules(""),f=C.length,v=b.posMax,m=b.md.options.maxNesting;b.pos<v;){if(b.level<m)for(T=0;T<f&&(L=C[T](b,!1),!L);T++);if(L){if(b.pos>=v)break;continue}b.pending+=b.src[b.pos++]}b.pending&&b.pushPending()},M.prototype.parse=function(b,L,T,C){var f,v,m,o=new this.State(b,L,T,C);for(this.tokenize(o),v=this.ruler2.getRules(""),m=v.length,f=0;f<m;f++)v[f](o)},M.prototype.State=e(643717),X.exports=M},203545:function(X){"use strict";X.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},973635:function(X){"use strict";X.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},279881:function(X){"use strict";X.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},458311:function(X,z,e){"use strict";var E=e(117200).assign,F=e(117200).unescapeAll,O=e(117200).escapeHtml,M={};M.code_inline=function(L,T,C,f,v){var m=L[T];return"<code"+v.renderAttrs(m)+">"+O(L[T].content)+"</code>"},M.code_block=function(L,T,C,f,v){var m=L[T];return"<pre"+v.renderAttrs(m)+"><code>"+O(L[T].content)+`</code></pre>
`},M.fence=function(L,T,C,f,v){var m=L[T],o=m.info?F(m.info).trim():"",h="",l,r,s,c;return o&&(h=o.split(/\s+/g)[0]),C.highlight?l=C.highlight(m.content,h)||O(m.content):l=O(m.content),l.indexOf("<pre")===0?l+`
`:o?(r=m.attrIndex("class"),s=m.attrs?m.attrs.slice():[],r<0?s.push(["class",C.langPrefix+h]):s[r][1]+=" "+C.langPrefix+h,c={attrs:s},"<pre><code"+v.renderAttrs(c)+">"+l+`</code></pre>
`):"<pre><code"+v.renderAttrs(m)+">"+l+`</code></pre>
`},M.image=function(L,T,C,f,v){var m=L[T];return m.attrs[m.attrIndex("alt")][1]=v.renderInlineAsText(m.children,C,f),v.renderToken(L,T,C)},M.hardbreak=function(L,T,C){return C.xhtmlOut?`<br />
`:`<br>
`},M.softbreak=function(L,T,C){return C.breaks?C.xhtmlOut?`<br />
`:`<br>
`:`
`},M.text=function(L,T){return O(L[T].content)},M.html_block=function(L,T){return L[T].content},M.html_inline=function(L,T){return L[T].content};function b(){this.rules=E({},M)}b.prototype.renderAttrs=function(T){var C,f,v;if(!T.attrs)return"";for(v="",C=0,f=T.attrs.length;C<f;C++)v+=" "+O(T.attrs[C][0])+'="'+O(T.attrs[C][1])+'"';return v},b.prototype.renderToken=function(T,C,f){var v,m="",o=!1,h=T[C];return h.hidden?"":(h.block&&h.nesting!==-1&&C&&T[C-1].hidden&&(m+=`
`),m+=(h.nesting===-1?"</":"<")+h.tag,m+=this.renderAttrs(h),h.nesting===0&&f.xhtmlOut&&(m+=" /"),h.block&&(o=!0,h.nesting===1&&C+1<T.length&&(v=T[C+1],(v.type==="inline"||v.hidden||v.nesting===-1&&v.tag===h.tag)&&(o=!1))),m+=o?`>
`:">",m)},b.prototype.renderInline=function(L,T,C){for(var f,v="",m=this.rules,o=0,h=L.length;o<h;o++)f=L[o].type,typeof m[f]<"u"?v+=m[f](L,o,T,C,this):v+=this.renderToken(L,o,T);return v},b.prototype.renderInlineAsText=function(L,T,C){for(var f="",v=0,m=L.length;v<m;v++)L[v].type==="text"?f+=L[v].content:L[v].type==="image"&&(f+=this.renderInlineAsText(L[v].children,T,C));return f},b.prototype.render=function(L,T,C){var f,v,m,o="",h=this.rules;for(f=0,v=L.length;f<v;f++)m=L[f].type,m==="inline"?o+=this.renderInline(L[f].children,T,C):typeof h[m]<"u"?o+=h[L[f].type](L,f,T,C,this):o+=this.renderToken(L,f,T,C);return o},X.exports=b},185100:function(X){"use strict";function z(){this.__rules__=[],this.__cache__=null}z.prototype.__find__=function(e){for(var E=0;E<this.__rules__.length;E++)if(this.__rules__[E].name===e)return E;return-1},z.prototype.__compile__=function(){var e=this,E=[""];e.__rules__.forEach(function(F){F.enabled&&F.alt.forEach(function(O){E.indexOf(O)<0&&E.push(O)})}),e.__cache__={},E.forEach(function(F){e.__cache__[F]=[],e.__rules__.forEach(function(O){O.enabled&&(F&&O.alt.indexOf(F)<0||e.__cache__[F].push(O.fn))})})},z.prototype.at=function(e,E,F){var O=this.__find__(e),M=F||{};if(O===-1)throw new Error("Parser rule not found: "+e);this.__rules__[O].fn=E,this.__rules__[O].alt=M.alt||[],this.__cache__=null},z.prototype.before=function(e,E,F,O){var M=this.__find__(e),b=O||{};if(M===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(M,0,{name:E,enabled:!0,fn:F,alt:b.alt||[]}),this.__cache__=null},z.prototype.after=function(e,E,F,O){var M=this.__find__(e),b=O||{};if(M===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(M+1,0,{name:E,enabled:!0,fn:F,alt:b.alt||[]}),this.__cache__=null},z.prototype.push=function(e,E,F){var O=F||{};this.__rules__.push({name:e,enabled:!0,fn:E,alt:O.alt||[]}),this.__cache__=null},z.prototype.enable=function(e,E){Array.isArray(e)||(e=[e]);var F=[];return e.forEach(function(O){var M=this.__find__(O);if(M<0){if(E)return;throw new Error("Rules manager: invalid rule name "+O)}this.__rules__[M].enabled=!0,F.push(O)},this),this.__cache__=null,F},z.prototype.enableOnly=function(e,E){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(F){F.enabled=!1}),this.enable(e,E)},z.prototype.disable=function(e,E){Array.isArray(e)||(e=[e]);var F=[];return e.forEach(function(O){var M=this.__find__(O);if(M<0){if(E)return;throw new Error("Rules manager: invalid rule name "+O)}this.__rules__[M].enabled=!1,F.push(O)},this),this.__cache__=null,F},z.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]},X.exports=z},770628:function(X,z,e){"use strict";var E=e(117200).isSpace;X.exports=function(O,M,b,L){var T,C,f,v,m,o,h,l,r,s,c,x,a,i,n,u,g,d,y,p,w=O.lineMax,S=O.bMarks[M]+O.tShift[M],R=O.eMarks[M];if(O.sCount[M]-O.blkIndent>=4||O.src.charCodeAt(S++)!==62)return!1;if(L)return!0;for(v=r=O.sCount[M]+S-(O.bMarks[M]+O.tShift[M]),O.src.charCodeAt(S)===32?(S++,v++,r++,T=!1,u=!0):O.src.charCodeAt(S)===9?(u=!0,(O.bsCount[M]+r)%4===3?(S++,v++,r++,T=!1):T=!0):u=!1,s=[O.bMarks[M]],O.bMarks[M]=S;S<R&&(C=O.src.charCodeAt(S),E(C));){C===9?r+=4-(r+O.bsCount[M]+(T?1:0))%4:r++;S++}for(c=[O.bsCount[M]],O.bsCount[M]=O.sCount[M]+1+(u?1:0),o=S>=R,i=[O.sCount[M]],O.sCount[M]=r-v,n=[O.tShift[M]],O.tShift[M]=S-O.bMarks[M],d=O.md.block.ruler.getRules("blockquote"),a=O.parentType,O.parentType="blockquote",p=!1,l=M+1;l<b&&(O.sCount[l]<O.blkIndent&&(p=!0),S=O.bMarks[l]+O.tShift[l],R=O.eMarks[l],!(S>=R));l++){if(O.src.charCodeAt(S++)===62&&!p){for(v=r=O.sCount[l]+S-(O.bMarks[l]+O.tShift[l]),O.src.charCodeAt(S)===32?(S++,v++,r++,T=!1,u=!0):O.src.charCodeAt(S)===9?(u=!0,(O.bsCount[l]+r)%4===3?(S++,v++,r++,T=!1):T=!0):u=!1,s.push(O.bMarks[l]),O.bMarks[l]=S;S<R&&(C=O.src.charCodeAt(S),E(C));){C===9?r+=4-(r+O.bsCount[l]+(T?1:0))%4:r++;S++}o=S>=R,c.push(O.bsCount[l]),O.bsCount[l]=O.sCount[l]+1+(u?1:0),i.push(O.sCount[l]),O.sCount[l]=r-v,n.push(O.tShift[l]),O.tShift[l]=S-O.bMarks[l];continue}if(o)break;for(g=!1,f=0,m=d.length;f<m;f++)if(d[f](O,l,b,!0)){g=!0;break}if(g){O.lineMax=l,O.blkIndent!==0&&(s.push(O.bMarks[l]),c.push(O.bsCount[l]),n.push(O.tShift[l]),i.push(O.sCount[l]),O.sCount[l]-=O.blkIndent);break}s.push(O.bMarks[l]),c.push(O.bsCount[l]),n.push(O.tShift[l]),i.push(O.sCount[l]),O.sCount[l]=-1}for(x=O.blkIndent,O.blkIndent=0,y=O.push("blockquote_open","blockquote",1),y.markup=">",y.map=h=[M,0],O.md.block.tokenize(O,M,l),y=O.push("blockquote_close","blockquote",-1),y.markup=">",O.lineMax=w,O.parentType=a,h[1]=O.line,f=0;f<n.length;f++)O.bMarks[f+M]=s[f],O.tShift[f+M]=n[f],O.sCount[f+M]=i[f],O.bsCount[f+M]=c[f];return O.blkIndent=x,!0}},722734:function(X){"use strict";X.exports=function(e,E,F){var O,M,b;if(e.sCount[E]-e.blkIndent<4)return!1;for(M=O=E+1;O<F;){if(e.isEmpty(O)){O++;continue}if(e.sCount[O]-e.blkIndent>=4){O++,M=O;continue}break}return e.line=M,b=e.push("code_block","code",0),b.content=e.getLines(E,M,4+e.blkIndent,!0),b.map=[E,e.line],!0}},931625:function(X){"use strict";X.exports=function(e,E,F,O){var M,b,L,T,C,f,v,m=!1,o=e.bMarks[E]+e.tShift[E],h=e.eMarks[E];if(e.sCount[E]-e.blkIndent>=4||o+3>h||(M=e.src.charCodeAt(o),M!==126&&M!==96)||(C=o,o=e.skipChars(o,M),b=o-C,b<3)||(v=e.src.slice(C,o),L=e.src.slice(o,h),L.indexOf(String.fromCharCode(M))>=0))return!1;if(O)return!0;for(T=E;T++,!(T>=F||(o=C=e.bMarks[T]+e.tShift[T],h=e.eMarks[T],o<h&&e.sCount[T]<e.blkIndent));)if(e.src.charCodeAt(o)===M&&!(e.sCount[T]-e.blkIndent>=4)&&(o=e.skipChars(o,M),!(o-C<b)&&(o=e.skipSpaces(o),!(o<h)))){m=!0;break}return b=e.sCount[E],e.line=T+(m?1:0),f=e.push("fence","code",0),f.info=L,f.content=e.getLines(E+1,T,b,!0),f.markup=v,f.map=[E,e.line],!0}},19505:function(X,z,e){"use strict";var E=e(117200).isSpace;X.exports=function(O,M,b,L){var T,C,f,v,m=O.bMarks[M]+O.tShift[M],o=O.eMarks[M];if(O.sCount[M]-O.blkIndent>=4||(T=O.src.charCodeAt(m),T!==35||m>=o))return!1;for(C=1,T=O.src.charCodeAt(++m);T===35&&m<o&&C<=6;)C++,T=O.src.charCodeAt(++m);return C>6||m<o&&!E(T)?!1:(L||(o=O.skipSpacesBack(o,m),f=O.skipCharsBack(o,35,m),f>m&&E(O.src.charCodeAt(f-1))&&(o=f),O.line=M+1,v=O.push("heading_open","h"+String(C),1),v.markup="########".slice(0,C),v.map=[M,O.line],v=O.push("inline","",0),v.content=O.src.slice(m,o).trim(),v.map=[M,O.line],v.children=[],v=O.push("heading_close","h"+String(C),-1),v.markup="########".slice(0,C)),!0)}},517312:function(X,z,e){"use strict";var E=e(117200).isSpace;X.exports=function(O,M,b,L){var T,C,f,v,m=O.bMarks[M]+O.tShift[M],o=O.eMarks[M];if(O.sCount[M]-O.blkIndent>=4||(T=O.src.charCodeAt(m++),T!==42&&T!==45&&T!==95))return!1;for(C=1;m<o;){if(f=O.src.charCodeAt(m++),f!==T&&!E(f))return!1;f===T&&C++}return C<3?!1:(L||(O.line=M+1,v=O.push("hr","hr",0),v.map=[M,O.line],v.markup=Array(C+1).join(String.fromCharCode(T))),!0)}},257694:function(X,z,e){"use strict";var E=e(972785),F=e(478392).q,O=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+E.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(F.source+"\\s*$"),/^$/,!1]];X.exports=function(b,L,T,C){var f,v,m,o,h=b.bMarks[L]+b.tShift[L],l=b.eMarks[L];if(b.sCount[L]-b.blkIndent>=4||!b.md.options.html||b.src.charCodeAt(h)!==60)return!1;for(o=b.src.slice(h,l),f=0;f<O.length&&!O[f][0].test(o);f++);if(f===O.length)return!1;if(C)return O[f][2];if(v=L+1,!O[f][1].test(o)){for(;v<T&&!(b.sCount[v]<b.blkIndent);v++)if(h=b.bMarks[v]+b.tShift[v],l=b.eMarks[v],o=b.src.slice(h,l),O[f][1].test(o)){o.length!==0&&v++;break}}return b.line=v,m=b.push("html_block","",0),m.map=[L,v],m.content=b.getLines(L,v,b.blkIndent,!0),!0}},1568:function(X){"use strict";X.exports=function(e,E,F){var O,M,b,L,T,C,f,v,m,o=E+1,h,l=e.md.block.ruler.getRules("paragraph");if(e.sCount[E]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";o<F&&!e.isEmpty(o);o++)if(!(e.sCount[o]-e.blkIndent>3)){if(e.sCount[o]>=e.blkIndent&&(C=e.bMarks[o]+e.tShift[o],f=e.eMarks[o],C<f&&(m=e.src.charCodeAt(C),(m===45||m===61)&&(C=e.skipChars(C,m),C=e.skipSpaces(C),C>=f)))){v=m===61?1:2;break}if(!(e.sCount[o]<0)){for(M=!1,b=0,L=l.length;b<L;b++)if(l[b](e,o,F,!0)){M=!0;break}if(M)break}}return v?(O=e.getLines(E,o,e.blkIndent,!1).trim(),e.line=o+1,T=e.push("heading_open","h"+String(v),1),T.markup=String.fromCharCode(m),T.map=[E,e.line],T=e.push("inline","",0),T.content=O,T.map=[E,e.line-1],T.children=[],T=e.push("heading_close","h"+String(v),-1),T.markup=String.fromCharCode(m),e.parentType=h,!0):!1}},618304:function(X,z,e){"use strict";var E=e(117200).isSpace;function F(b,L){var T,C,f,v;return C=b.bMarks[L]+b.tShift[L],f=b.eMarks[L],T=b.src.charCodeAt(C++),T!==42&&T!==45&&T!==43||C<f&&(v=b.src.charCodeAt(C),!E(v))?-1:C}function O(b,L){var T,C=b.bMarks[L]+b.tShift[L],f=C,v=b.eMarks[L];if(f+1>=v||(T=b.src.charCodeAt(f++),T<48||T>57))return-1;for(;;){if(f>=v)return-1;if(T=b.src.charCodeAt(f++),T>=48&&T<=57){if(f-C>=10)return-1;continue}if(T===41||T===46)break;return-1}return f<v&&(T=b.src.charCodeAt(f),!E(T))?-1:f}function M(b,L){var T,C,f=b.level+2;for(T=L+2,C=b.tokens.length-2;T<C;T++)b.tokens[T].level===f&&b.tokens[T].type==="paragraph_open"&&(b.tokens[T+2].hidden=!0,b.tokens[T].hidden=!0,T+=2)}X.exports=function(L,T,C,f){var v,m,o,h,l,r,s,c,x,a,i,n,u,g,d,y,p,w,S,R,B,k,P,D,A,N,I,G,W=!1,Z=!0;if(L.sCount[T]-L.blkIndent>=4)return!1;if(f&&L.parentType==="paragraph"&&L.tShift[T]>=L.blkIndent&&(W=!0),(P=O(L,T))>=0){if(s=!0,A=L.bMarks[T]+L.tShift[T],u=Number(L.src.substr(A,P-A-1)),W&&u!==1)return!1}else if((P=F(L,T))>=0)s=!1;else return!1;if(W&&L.skipSpaces(P)>=L.eMarks[T])return!1;if(n=L.src.charCodeAt(P-1),f)return!0;for(i=L.tokens.length,s?(G=L.push("ordered_list_open","ol",1),u!==1&&(G.attrs=[["start",u]])):G=L.push("bullet_list_open","ul",1),G.map=a=[T,0],G.markup=String.fromCharCode(n),d=T,D=!1,I=L.md.block.ruler.getRules("list"),S=L.parentType,L.parentType="list";d<C;){for(k=P,g=L.eMarks[d],r=y=L.sCount[d]+P-(L.bMarks[T]+L.tShift[T]);k<g;){if(v=L.src.charCodeAt(k),v===9)y+=4-(y+L.bsCount[d])%4;else if(v===32)y++;else break;k++}if(m=k,m>=g?l=1:l=y-r,l>4&&(l=1),h=r+l,G=L.push("list_item_open","li",1),G.markup=String.fromCharCode(n),G.map=c=[T,0],p=L.blkIndent,B=L.tight,R=L.tShift[T],w=L.sCount[T],L.blkIndent=h,L.tight=!0,L.tShift[T]=m-L.bMarks[T],L.sCount[T]=y,m>=g&&L.isEmpty(T+1)?L.line=Math.min(L.line+2,C):L.md.block.tokenize(L,T,C,!0),(!L.tight||D)&&(Z=!1),D=L.line-T>1&&L.isEmpty(L.line-1),L.blkIndent=p,L.tShift[T]=R,L.sCount[T]=w,L.tight=B,G=L.push("list_item_close","li",-1),G.markup=String.fromCharCode(n),d=T=L.line,c[1]=d,m=L.bMarks[T],d>=C||L.sCount[d]<L.blkIndent)break;for(N=!1,o=0,x=I.length;o<x;o++)if(I[o](L,d,C,!0)){N=!0;break}if(N)break;if(s){if(P=O(L,d),P<0)break}else if(P=F(L,d),P<0)break;if(n!==L.src.charCodeAt(P-1))break}return s?G=L.push("ordered_list_close","ol",-1):G=L.push("bullet_list_close","ul",-1),G.markup=String.fromCharCode(n),a[1]=d,L.line=d,L.parentType=S,Z&&M(L,i),!0}},361864:function(X){"use strict";X.exports=function(e,E){var F,O,M,b,L,T,C=E+1,f=e.md.block.ruler.getRules("paragraph"),v=e.lineMax;for(T=e.parentType,e.parentType="paragraph";C<v&&!e.isEmpty(C);C++)if(!(e.sCount[C]-e.blkIndent>3)&&!(e.sCount[C]<0)){for(O=!1,M=0,b=f.length;M<b;M++)if(f[M](e,C,v,!0)){O=!0;break}if(O)break}return F=e.getLines(E,C,e.blkIndent,!1).trim(),e.line=C,L=e.push("paragraph_open","p",1),L.map=[E,e.line],L=e.push("inline","",0),L.content=F,L.map=[E,e.line],L.children=[],L=e.push("paragraph_close","p",-1),e.parentType=T,!0}},383880:function(X,z,e){"use strict";var E=e(117200).normalizeReference,F=e(117200).isSpace;X.exports=function(M,b,L,T){var C,f,v,m,o,h,l,r,s,c,x,a,i,n,u,g,d=0,y=M.bMarks[b]+M.tShift[b],p=M.eMarks[b],w=b+1;if(M.sCount[b]-M.blkIndent>=4||M.src.charCodeAt(y)!==91)return!1;for(;++y<p;)if(M.src.charCodeAt(y)===93&&M.src.charCodeAt(y-1)!==92){if(y+1===p||M.src.charCodeAt(y+1)!==58)return!1;break}for(m=M.lineMax,u=M.md.block.ruler.getRules("reference"),c=M.parentType,M.parentType="reference";w<m&&!M.isEmpty(w);w++)if(!(M.sCount[w]-M.blkIndent>3)&&!(M.sCount[w]<0)){for(n=!1,h=0,l=u.length;h<l;h++)if(u[h](M,w,m,!0)){n=!0;break}if(n)break}for(i=M.getLines(b,w,M.blkIndent,!1).trim(),p=i.length,y=1;y<p;y++){if(C=i.charCodeAt(y),C===91)return!1;if(C===93){s=y;break}else C===10?d++:C===92&&(y++,y<p&&i.charCodeAt(y)===10&&d++)}if(s<0||i.charCodeAt(s+1)!==58)return!1;for(y=s+2;y<p;y++)if(C=i.charCodeAt(y),C===10)d++;else if(!F(C))break;if(x=M.md.helpers.parseLinkDestination(i,y,p),!x.ok||(o=M.md.normalizeLink(x.str),!M.md.validateLink(o)))return!1;for(y=x.pos,d+=x.lines,f=y,v=d,a=y;y<p;y++)if(C=i.charCodeAt(y),C===10)d++;else if(!F(C))break;for(x=M.md.helpers.parseLinkTitle(i,y,p),y<p&&a!==y&&x.ok?(g=x.str,y=x.pos,d+=x.lines):(g="",y=f,d=v);y<p&&(C=i.charCodeAt(y),!!F(C));)y++;if(y<p&&i.charCodeAt(y)!==10&&g)for(g="",y=f,d=v;y<p&&(C=i.charCodeAt(y),!!F(C));)y++;return y<p&&i.charCodeAt(y)!==10||(r=E(i.slice(1,s)),!r)?!1:(T||(typeof M.env.references>"u"&&(M.env.references={}),typeof M.env.references[r]>"u"&&(M.env.references[r]={title:g,href:o}),M.parentType=c,M.line=b+d+1),!0)}},804412:function(X,z,e){"use strict";var E=e(932043),F=e(117200).isSpace;function O(M,b,L,T){var C,f,v,m,o,h,l,r;for(this.src=M,this.md=b,this.env=L,this.tokens=T,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.parentType="root",this.level=0,this.result="",f=this.src,r=!1,v=m=h=l=0,o=f.length;m<o;m++){if(C=f.charCodeAt(m),!r)if(F(C)){h++,C===9?l+=4-l%4:l++;continue}else r=!0;(C===10||m===o-1)&&(C!==10&&m++,this.bMarks.push(v),this.eMarks.push(m),this.tShift.push(h),this.sCount.push(l),this.bsCount.push(0),r=!1,h=0,l=0,v=m+1)}this.bMarks.push(f.length),this.eMarks.push(f.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}O.prototype.push=function(M,b,L){var T=new E(M,b,L);return T.block=!0,L<0&&this.level--,T.level=this.level,L>0&&this.level++,this.tokens.push(T),T},O.prototype.isEmpty=function(b){return this.bMarks[b]+this.tShift[b]>=this.eMarks[b]},O.prototype.skipEmptyLines=function(b){for(var L=this.lineMax;b<L&&!(this.bMarks[b]+this.tShift[b]<this.eMarks[b]);b++);return b},O.prototype.skipSpaces=function(b){for(var L,T=this.src.length;b<T&&(L=this.src.charCodeAt(b),!!F(L));b++);return b},O.prototype.skipSpacesBack=function(b,L){if(b<=L)return b;for(;b>L;)if(!F(this.src.charCodeAt(--b)))return b+1;return b},O.prototype.skipChars=function(b,L){for(var T=this.src.length;b<T&&this.src.charCodeAt(b)===L;b++);return b},O.prototype.skipCharsBack=function(b,L,T){if(b<=T)return b;for(;b>T;)if(L!==this.src.charCodeAt(--b))return b+1;return b},O.prototype.getLines=function(b,L,T,C){var f,v,m,o,h,l,r,s=b;if(b>=L)return"";for(l=new Array(L-b),f=0;s<L;s++,f++){for(v=0,r=o=this.bMarks[s],s+1<L||C?h=this.eMarks[s]+1:h=this.eMarks[s];o<h&&v<T;){if(m=this.src.charCodeAt(o),F(m))m===9?v+=4-(v+this.bsCount[s])%4:v++;else if(o-r<this.tShift[s])v++;else break;o++}v>T?l[f]=new Array(v-T+1).join(" ")+this.src.slice(o,h):l[f]=this.src.slice(o,h)}return l.join("")},O.prototype.Token=E,X.exports=O},363361:function(X,z,e){"use strict";var E=e(117200).isSpace;function F(M,b){var L=M.bMarks[b]+M.blkIndent,T=M.eMarks[b];return M.src.substr(L,T-L)}function O(M){var b=[],L=0,T=M.length,C,f=0,v=0,m=!1,o=0;for(C=M.charCodeAt(L);L<T;)C===96?m?(m=!1,o=L):f%2===0&&(m=!0,o=L):C===124&&f%2===0&&!m&&(b.push(M.substring(v,L)),v=L+1),C===92?f++:f=0,L++,L===T&&m&&(m=!1,L=o+1),C=M.charCodeAt(L);return b.push(M.substring(v)),b}X.exports=function(b,L,T,C){var f,v,m,o,h,l,r,s,c,x,a,i;if(L+2>T||(h=L+1,b.sCount[h]<b.blkIndent)||b.sCount[h]-b.blkIndent>=4||(m=b.bMarks[h]+b.tShift[h],m>=b.eMarks[h])||(f=b.src.charCodeAt(m++),f!==124&&f!==45&&f!==58))return!1;for(;m<b.eMarks[h];){if(f=b.src.charCodeAt(m),f!==124&&f!==45&&f!==58&&!E(f))return!1;m++}for(v=F(b,L+1),l=v.split("|"),c=[],o=0;o<l.length;o++){if(x=l[o].trim(),!x){if(o===0||o===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(x))return!1;x.charCodeAt(x.length-1)===58?c.push(x.charCodeAt(0)===58?"center":"right"):x.charCodeAt(0)===58?c.push("left"):c.push("")}if(v=F(b,L).trim(),v.indexOf("|")===-1||b.sCount[L]-b.blkIndent>=4||(l=O(v.replace(/^\||\|$/g,"")),r=l.length,r>c.length))return!1;if(C)return!0;for(s=b.push("table_open","table",1),s.map=a=[L,0],s=b.push("thead_open","thead",1),s.map=[L,L+1],s=b.push("tr_open","tr",1),s.map=[L,L+1],o=0;o<l.length;o++)s=b.push("th_open","th",1),s.map=[L,L+1],c[o]&&(s.attrs=[["style","text-align:"+c[o]]]),s=b.push("inline","",0),s.content=l[o].trim(),s.map=[L,L+1],s.children=[],s=b.push("th_close","th",-1);for(s=b.push("tr_close","tr",-1),s=b.push("thead_close","thead",-1),s=b.push("tbody_open","tbody",1),s.map=i=[L+2,0],h=L+2;h<T&&!(b.sCount[h]<b.blkIndent||(v=F(b,h).trim(),v.indexOf("|")===-1)||b.sCount[h]-b.blkIndent>=4);h++){for(l=O(v.replace(/^\||\|$/g,"")),s=b.push("tr_open","tr",1),o=0;o<r;o++)s=b.push("td_open","td",1),c[o]&&(s.attrs=[["style","text-align:"+c[o]]]),s=b.push("inline","",0),s.content=l[o]?l[o].trim():"",s.children=[],s=b.push("td_close","td",-1);s=b.push("tr_close","tr",-1)}return s=b.push("tbody_close","tbody",-1),s=b.push("table_close","table",-1),a[1]=i[1]=h,b.line=h,!0}},683218:function(X){"use strict";X.exports=function(e){var E;e.inlineMode?(E=new e.Token("inline","",0),E.content=e.src,E.map=[0,1],E.children=[],e.tokens.push(E)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},185e3:function(X){"use strict";X.exports=function(e){var E=e.tokens,F,O,M;for(O=0,M=E.length;O<M;O++)F=E[O],F.type==="inline"&&e.md.inline.parse(F.content,e.md,e.env,F.children)}},384496:function(X,z,e){"use strict";var E=e(117200).arrayReplaceAt;function F(M){return/^<a[>\s]/i.test(M)}function O(M){return/^<\/a\s*>/i.test(M)}X.exports=function(b){var L,T,C,f,v,m,o,h,l,r,s,c,x,a,i,n,u=b.tokens,g;if(b.md.options.linkify){for(T=0,C=u.length;T<C;T++)if(!(u[T].type!=="inline"||!b.md.linkify.pretest(u[T].content)))for(f=u[T].children,x=0,L=f.length-1;L>=0;L--){if(m=f[L],m.type==="link_close"){for(L--;f[L].level!==m.level&&f[L].type!=="link_open";)L--;continue}if(m.type==="html_inline"&&(F(m.content)&&x>0&&x--,O(m.content)&&x++),!(x>0)&&m.type==="text"&&b.md.linkify.test(m.content)){for(l=m.content,g=b.md.linkify.match(l),o=[],c=m.level,s=0,h=0;h<g.length;h++)a=g[h].url,i=b.md.normalizeLink(a),b.md.validateLink(i)&&(n=g[h].text,g[h].schema?g[h].schema==="mailto:"&&!/^mailto:/i.test(n)?n=b.md.normalizeLinkText("mailto:"+n).replace(/^mailto:/,""):n=b.md.normalizeLinkText(n):n=b.md.normalizeLinkText("http://"+n).replace(/^http:\/\//,""),r=g[h].index,r>s&&(v=new b.Token("text","",0),v.content=l.slice(s,r),v.level=c,o.push(v)),v=new b.Token("link_open","a",1),v.attrs=[["href",i]],v.level=c++,v.markup="linkify",v.info="auto",o.push(v),v=new b.Token("text","",0),v.content=n,v.level=c,o.push(v),v=new b.Token("link_close","a",-1),v.level=--c,v.markup="linkify",v.info="auto",o.push(v),s=g[h].lastIndex);s<l.length&&(v=new b.Token("text","",0),v.content=l.slice(s),v.level=c,o.push(v)),u[T].children=f=E(f,L,o)}}}}},66834:function(X){"use strict";var z=/\r[\n\u0085]?|[\u2424\u2028\u0085]/g,e=/\u0000/g;X.exports=function(F){var O;O=F.src.replace(z,`
`),O=O.replace(e,"\uFFFD"),F.src=O}},384896:function(X){"use strict";var z=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,e=/\((c|tm|r|p)\)/i,E=/\((c|tm|r|p)\)/ig,F={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function O(L,T){return F[T.toLowerCase()]}function M(L){var T,C,f=0;for(T=L.length-1;T>=0;T--)C=L[T],C.type==="text"&&!f&&(C.content=C.content.replace(E,O)),C.type==="link_open"&&C.info==="auto"&&f--,C.type==="link_close"&&C.info==="auto"&&f++}function b(L){var T,C,f=0;for(T=L.length-1;T>=0;T--)C=L[T],C.type==="text"&&!f&&z.test(C.content)&&(C.content=C.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1\u2014$2").replace(/(^|\s)--(\s|$)/mg,"$1\u2013$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1\u2013$2")),C.type==="link_open"&&C.info==="auto"&&f--,C.type==="link_close"&&C.info==="auto"&&f++}X.exports=function(T){var C;if(T.md.options.typographer)for(C=T.tokens.length-1;C>=0;C--)T.tokens[C].type==="inline"&&(e.test(T.tokens[C].content)&&M(T.tokens[C].children),z.test(T.tokens[C].content)&&b(T.tokens[C].children))}},758062:function(X,z,e){"use strict";var E=e(117200).isWhiteSpace,F=e(117200).isPunctChar,O=e(117200).isMdAsciiPunct,M=/['"]/,b=/['"]/g,L="\u2019";function T(f,v,m){return f.substr(0,v)+m+f.substr(v+1)}function C(f,v){var m,o,h,l,r,s,c,x,a,i,n,u,g,d,y,p,w,S,R,B,k;for(R=[],m=0;m<f.length;m++){for(o=f[m],c=f[m].level,w=R.length-1;w>=0&&!(R[w].level<=c);w--);if(R.length=w+1,o.type==="text"){h=o.content,r=0,s=h.length;t:for(;r<s&&(b.lastIndex=r,l=b.exec(h),!!l);){if(y=p=!0,r=l.index+1,S=l[0]==="'",a=32,l.index-1>=0)a=h.charCodeAt(l.index-1);else for(w=m-1;w>=0&&!(f[w].type==="softbreak"||f[w].type==="hardbreak");w--)if(f[w].type==="text"){a=f[w].content.charCodeAt(f[w].content.length-1);break}if(i=32,r<s)i=h.charCodeAt(r);else for(w=m+1;w<f.length&&!(f[w].type==="softbreak"||f[w].type==="hardbreak");w++)if(f[w].type==="text"){i=f[w].content.charCodeAt(0);break}if(n=O(a)||F(String.fromCharCode(a)),u=O(i)||F(String.fromCharCode(i)),g=E(a),d=E(i),d?y=!1:u&&(g||n||(y=!1)),g?p=!1:n&&(d||u||(p=!1)),i===34&&l[0]==='"'&&a>=48&&a<=57&&(p=y=!1),y&&p&&(y=!1,p=u),!y&&!p){S&&(o.content=T(o.content,l.index,L));continue}if(p){for(w=R.length-1;w>=0&&(x=R[w],!(R[w].level<c));w--)if(x.single===S&&R[w].level===c){x=R[w],S?(B=v.md.options.quotes[2],k=v.md.options.quotes[3]):(B=v.md.options.quotes[0],k=v.md.options.quotes[1]),o.content=T(o.content,l.index,k),f[x.token].content=T(f[x.token].content,x.pos,B),r+=k.length-1,x.token===m&&(r+=B.length-1),h=o.content,s=h.length,R.length=w;continue t}}y?R.push({token:m,pos:l.index,single:S,level:c}):p&&S&&(o.content=T(o.content,l.index,L))}}}}X.exports=function(v){var m;if(v.md.options.typographer)for(m=v.tokens.length-1;m>=0;m--)v.tokens[m].type!=="inline"||!M.test(v.tokens[m].content)||C(v.tokens[m].children,v)}},623406:function(X,z,e){"use strict";var E=e(932043);function F(O,M,b){this.src=O,this.env=b,this.tokens=[],this.inlineMode=!1,this.md=M}F.prototype.Token=E,X.exports=F},6066:function(X){"use strict";var z=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,e=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;X.exports=function(F,O){var M,b,L,T,C,f,v=F.pos;return F.src.charCodeAt(v)!==60||(M=F.src.slice(v),M.indexOf(">")<0)?!1:e.test(M)?(b=M.match(e),T=b[0].slice(1,-1),C=F.md.normalizeLink(T),F.md.validateLink(C)?(O||(f=F.push("link_open","a",1),f.attrs=[["href",C]],f.markup="autolink",f.info="auto",f=F.push("text","",0),f.content=F.md.normalizeLinkText(T),f=F.push("link_close","a",-1),f.markup="autolink",f.info="auto"),F.pos+=b[0].length,!0):!1):z.test(M)?(L=M.match(z),T=L[0].slice(1,-1),C=F.md.normalizeLink("mailto:"+T),F.md.validateLink(C)?(O||(f=F.push("link_open","a",1),f.attrs=[["href",C]],f.markup="autolink",f.info="auto",f=F.push("text","",0),f.content=F.md.normalizeLinkText(T),f=F.push("link_close","a",-1),f.markup="autolink",f.info="auto"),F.pos+=L[0].length,!0):!1):!1}},689247:function(X){"use strict";X.exports=function(e,E){var F,O,M,b,L,T,C=e.pos,f=e.src.charCodeAt(C);if(f!==96)return!1;for(F=C,C++,O=e.posMax;C<O&&e.src.charCodeAt(C)===96;)C++;for(M=e.src.slice(F,C),b=L=C;(b=e.src.indexOf("`",L))!==-1;){for(L=b+1;L<O&&e.src.charCodeAt(L)===96;)L++;if(L-b===M.length)return E||(T=e.push("code_inline","code",0),T.markup=M,T.content=e.src.slice(C,b).replace(/[ \n]+/g," ").trim()),e.pos=L,!0}return E||(e.pending+=M),e.pos+=M.length,!0}},938349:function(X){"use strict";X.exports=function(e){var E,F,O,M,b=e.delimiters,L=e.delimiters.length;for(E=0;E<L;E++)if(O=b[E],!!O.close)for(F=E-O.jump-1;F>=0;){if(M=b[F],M.open&&M.marker===O.marker&&M.end<0&&M.level===O.level){var T=(M.close||O.open)&&typeof M.length<"u"&&typeof O.length<"u"&&(M.length+O.length)%3===0;if(!T){O.jump=E-F,O.open=!1,M.end=E,M.jump=0;break}}F-=M.jump+1}}},766881:function(X){"use strict";X.exports.w=function(e,E){var F,O,M,b=e.pos,L=e.src.charCodeAt(b);if(E||L!==95&&L!==42)return!1;for(O=e.scanDelims(e.pos,L===42),F=0;F<O.length;F++)M=e.push("text","",0),M.content=String.fromCharCode(L),e.delimiters.push({marker:L,length:O.length,jump:F,token:e.tokens.length-1,level:e.level,end:-1,open:O.can_open,close:O.can_close});return e.pos+=O.length,!0},X.exports.g=function(e){var E,F,O,M,b,L,T=e.delimiters,C=e.delimiters.length;for(E=C-1;E>=0;E--)F=T[E],!(F.marker!==95&&F.marker!==42)&&F.end!==-1&&(O=T[F.end],L=E>0&&T[E-1].end===F.end+1&&T[E-1].token===F.token-1&&T[F.end+1].token===O.token+1&&T[E-1].marker===F.marker,b=String.fromCharCode(F.marker),M=e.tokens[F.token],M.type=L?"strong_open":"em_open",M.tag=L?"strong":"em",M.nesting=1,M.markup=L?b+b:b,M.content="",M=e.tokens[O.token],M.type=L?"strong_close":"em_close",M.tag=L?"strong":"em",M.nesting=-1,M.markup=L?b+b:b,M.content="",L&&(e.tokens[T[E-1].token].content="",e.tokens[T[F.end+1].token].content="",E--))}},215969:function(X,z,e){"use strict";var E=e(690923),F=e(117200).has,O=e(117200).isValidEntityCode,M=e(117200).fromCodePoint,b=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,L=/^&([a-z][a-z0-9]{1,31});/i;X.exports=function(C,f){var v,m,o,h=C.pos,l=C.posMax;if(C.src.charCodeAt(h)!==38)return!1;if(h+1<l){if(v=C.src.charCodeAt(h+1),v===35){if(o=C.src.slice(h).match(b),o)return f||(m=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),C.pending+=O(m)?M(m):M(65533)),C.pos+=o[0].length,!0}else if(o=C.src.slice(h).match(L),o&&F(E,o[1]))return f||(C.pending+=E[o[1]]),C.pos+=o[0].length,!0}return f||(C.pending+="&"),C.pos++,!0}},520095:function(X,z,e){"use strict";for(var E=e(117200).isSpace,F=[],O=0;O<256;O++)F.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(M){F[M.charCodeAt(0)]=1}),X.exports=function(b,L){var T,C=b.pos,f=b.posMax;if(b.src.charCodeAt(C)!==92)return!1;if(C++,C<f){if(T=b.src.charCodeAt(C),T<256&&F[T]!==0)return L||(b.pending+=b.src[C]),b.pos+=2,!0;if(T===10){for(L||b.push("hardbreak","br",0),C++;C<f&&(T=b.src.charCodeAt(C),!!E(T));)C++;return b.pos=C,!0}}return L||(b.pending+="\\"),b.pos++,!0}},692573:function(X,z,e){"use strict";var E=e(478392).n;function F(O){var M=O|32;return M>=97&&M<=122}X.exports=function(M,b){var L,T,C,f,v=M.pos;return!M.md.options.html||(C=M.posMax,M.src.charCodeAt(v)!==60||v+2>=C)||(L=M.src.charCodeAt(v+1),L!==33&&L!==63&&L!==47&&!F(L))||(T=M.src.slice(v).match(E),!T)?!1:(b||(f=M.push("html_inline","",0),f.content=M.src.slice(v,v+T[0].length)),M.pos+=T[0].length,!0)}},77711:function(X,z,e){"use strict";var E=e(117200).normalizeReference,F=e(117200).isSpace;X.exports=function(M,b){var L,T,C,f,v,m,o,h,l,r,s,c,x,a="",i=M.pos,n=M.posMax;if(M.src.charCodeAt(M.pos)!==33||M.src.charCodeAt(M.pos+1)!==91||(m=M.pos+2,v=M.md.helpers.parseLinkLabel(M,M.pos+1,!1),v<0))return!1;if(o=v+1,o<n&&M.src.charCodeAt(o)===40){for(o++;o<n&&(T=M.src.charCodeAt(o),!(!F(T)&&T!==10));o++);if(o>=n)return!1;for(x=o,l=M.md.helpers.parseLinkDestination(M.src,o,M.posMax),l.ok&&(a=M.md.normalizeLink(l.str),M.md.validateLink(a)?o=l.pos:a=""),x=o;o<n&&(T=M.src.charCodeAt(o),!(!F(T)&&T!==10));o++);if(l=M.md.helpers.parseLinkTitle(M.src,o,M.posMax),o<n&&x!==o&&l.ok)for(r=l.str,o=l.pos;o<n&&(T=M.src.charCodeAt(o),!(!F(T)&&T!==10));o++);else r="";if(o>=n||M.src.charCodeAt(o)!==41)return M.pos=i,!1;o++}else{if(typeof M.env.references>"u")return!1;if(o<n&&M.src.charCodeAt(o)===91?(x=o+1,o=M.md.helpers.parseLinkLabel(M,o),o>=0?f=M.src.slice(x,o++):o=v+1):o=v+1,f||(f=M.src.slice(m,v)),h=M.env.references[E(f)],!h)return M.pos=i,!1;a=h.href,r=h.title}return b||(C=M.src.slice(m,v),M.md.inline.parse(C,M.md,M.env,c=[]),s=M.push("image","img",0),s.attrs=L=[["src",a],["alt",""]],s.children=c,s.content=C,r&&L.push(["title",r])),M.pos=o,M.posMax=n,!0}},913676:function(X,z,e){"use strict";var E=e(117200).normalizeReference,F=e(117200).isSpace;X.exports=function(M,b){var L,T,C,f,v,m,o,h,l,r,s="",c=M.pos,x=M.posMax,a=M.pos,i=!0;if(M.src.charCodeAt(M.pos)!==91||(v=M.pos+1,f=M.md.helpers.parseLinkLabel(M,M.pos,!0),f<0))return!1;if(m=f+1,m<x&&M.src.charCodeAt(m)===40){for(i=!1,m++;m<x&&(T=M.src.charCodeAt(m),!(!F(T)&&T!==10));m++);if(m>=x)return!1;for(a=m,o=M.md.helpers.parseLinkDestination(M.src,m,M.posMax),o.ok&&(s=M.md.normalizeLink(o.str),M.md.validateLink(s)?m=o.pos:s=""),a=m;m<x&&(T=M.src.charCodeAt(m),!(!F(T)&&T!==10));m++);if(o=M.md.helpers.parseLinkTitle(M.src,m,M.posMax),m<x&&a!==m&&o.ok)for(l=o.str,m=o.pos;m<x&&(T=M.src.charCodeAt(m),!(!F(T)&&T!==10));m++);else l="";(m>=x||M.src.charCodeAt(m)!==41)&&(i=!0),m++}if(i){if(typeof M.env.references>"u")return!1;if(m<x&&M.src.charCodeAt(m)===91?(a=m+1,m=M.md.helpers.parseLinkLabel(M,m),m>=0?C=M.src.slice(a,m++):m=f+1):m=f+1,C||(C=M.src.slice(v,f)),h=M.env.references[E(C)],!h)return M.pos=c,!1;s=h.href,l=h.title}return b||(M.pos=v,M.posMax=f,r=M.push("link_open","a",1),r.attrs=L=[["href",s]],l&&L.push(["title",l]),M.md.inline.tokenize(M),r=M.push("link_close","a",-1)),M.pos=m,M.posMax=x,!0}},707370:function(X,z,e){"use strict";var E=e(117200).isSpace;X.exports=function(O,M){var b,L,T=O.pos;if(O.src.charCodeAt(T)!==10)return!1;for(b=O.pending.length-1,L=O.posMax,M||(b>=0&&O.pending.charCodeAt(b)===32?b>=1&&O.pending.charCodeAt(b-1)===32?(O.pending=O.pending.replace(/ +$/,""),O.push("hardbreak","br",0)):(O.pending=O.pending.slice(0,-1),O.push("softbreak","br",0)):O.push("softbreak","br",0)),T++;T<L&&E(O.src.charCodeAt(T));)T++;return O.pos=T,!0}},643717:function(X,z,e){"use strict";var E=e(932043),F=e(117200).isWhiteSpace,O=e(117200).isPunctChar,M=e(117200).isMdAsciiPunct;function b(L,T,C,f){this.src=L,this.env=C,this.md=T,this.tokens=f,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[]}b.prototype.pushPending=function(){var L=new E("text","",0);return L.content=this.pending,L.level=this.pendingLevel,this.tokens.push(L),this.pending="",L},b.prototype.push=function(L,T,C){this.pending&&this.pushPending();var f=new E(L,T,C);return C<0&&this.level--,f.level=this.level,C>0&&this.level++,this.pendingLevel=this.level,this.tokens.push(f),f},b.prototype.scanDelims=function(L,T){var C=L,f,v,m,o,h,l,r,s,c,x=!0,a=!0,i=this.posMax,n=this.src.charCodeAt(L);for(f=L>0?this.src.charCodeAt(L-1):32;C<i&&this.src.charCodeAt(C)===n;)C++;return m=C-L,v=C<i?this.src.charCodeAt(C):32,r=M(f)||O(String.fromCharCode(f)),c=M(v)||O(String.fromCharCode(v)),l=F(f),s=F(v),s?x=!1:c&&(l||r||(x=!1)),l?a=!1:r&&(s||c||(a=!1)),T?(o=x,h=a):(o=x&&(!a||r),h=a&&(!x||c)),{can_open:o,can_close:h,length:m}},b.prototype.Token=E,X.exports=b},577202:function(X){"use strict";X.exports.w=function(e,E){var F,O,M,b,L,T=e.pos,C=e.src.charCodeAt(T);if(E||C!==126||(O=e.scanDelims(e.pos,!0),b=O.length,L=String.fromCharCode(C),b<2))return!1;for(b%2&&(M=e.push("text","",0),M.content=L,b--),F=0;F<b;F+=2)M=e.push("text","",0),M.content=L+L,e.delimiters.push({marker:C,jump:F,token:e.tokens.length-1,level:e.level,end:-1,open:O.can_open,close:O.can_close});return e.pos+=O.length,!0},X.exports.g=function(e){var E,F,O,M,b,L=[],T=e.delimiters,C=e.delimiters.length;for(E=0;E<C;E++)O=T[E],O.marker===126&&O.end!==-1&&(M=T[O.end],b=e.tokens[O.token],b.type="s_open",b.tag="s",b.nesting=1,b.markup="~~",b.content="",b=e.tokens[M.token],b.type="s_close",b.tag="s",b.nesting=-1,b.markup="~~",b.content="",e.tokens[M.token-1].type==="text"&&e.tokens[M.token-1].content==="~"&&L.push(M.token-1));for(;L.length;){for(E=L.pop(),F=E+1;F<e.tokens.length&&e.tokens[F].type==="s_close";)F++;F--,E!==F&&(b=e.tokens[F],e.tokens[F]=e.tokens[E],e.tokens[E]=b)}}},188623:function(X){"use strict";function z(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}X.exports=function(E,F){for(var O=E.pos;O<E.posMax&&!z(E.src.charCodeAt(O));)O++;return O===E.pos?!1:(F||(E.pending+=E.src.slice(E.pos,O)),E.pos=O,!0)}},990823:function(X){"use strict";X.exports=function(e){var E,F,O=0,M=e.tokens,b=e.tokens.length;for(E=F=0;E<b;E++)O+=M[E].nesting,M[E].level=O,M[E].type==="text"&&E+1<b&&M[E+1].type==="text"?M[E+1].content=M[E].content+M[E+1].content:(E!==F&&(M[F]=M[E]),F++);E!==F&&(M.length=F)}},426230:function(X,z,e){"use strict";var E=e(291005).assign,F=e(549491),O=e(824186),M=e(579134),b={};E(b,F,O,M),X.exports=b},549491:function(X,z,e){"use strict";var E=e(70018),F=e(291005),O=e(852533),M=e(28679),b=e(355172),L=Object.prototype.toString,T=0,C=4,f=0,v=1,m=2,o=-1,h=0,l=8;function r(a){if(!(this instanceof r))return new r(a);this.options=F.assign({level:o,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},a||{});var i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var n=E.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(n!==f)throw new Error(M[n]);if(i.header&&E.deflateSetHeader(this.strm,i.header),i.dictionary){var u;if(typeof i.dictionary=="string"?u=O.string2buf(i.dictionary):L.call(i.dictionary)==="[object ArrayBuffer]"?u=new Uint8Array(i.dictionary):u=i.dictionary,n=E.deflateSetDictionary(this.strm,u),n!==f)throw new Error(M[n]);this._dict_set=!0}}r.prototype.push=function(a,i){var n=this.strm,u=this.options.chunkSize,g,d;if(this.ended)return!1;d=i===~~i?i:i===!0?C:T,typeof a=="string"?n.input=O.string2buf(a):L.call(a)==="[object ArrayBuffer]"?n.input=new Uint8Array(a):n.input=a,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new F.Buf8(u),n.next_out=0,n.avail_out=u),g=E.deflate(n,d),g!==v&&g!==f)return this.onEnd(g),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(d===C||d===m))&&(this.options.to==="string"?this.onData(O.buf2binstring(F.shrinkBuf(n.output,n.next_out))):this.onData(F.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&g!==v);return d===C?(g=E.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===f):(d===m&&(this.onEnd(f),n.avail_out=0),!0)},r.prototype.onData=function(a){this.chunks.push(a)},r.prototype.onEnd=function(a){a===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=F.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function s(a,i){var n=new r(i);if(n.push(a,!0),n.err)throw n.msg||M[n.err];return n.result}function c(a,i){return i=i||{},i.raw=!0,s(a,i)}function x(a,i){return i=i||{},i.gzip=!0,s(a,i)}z.Deflate=r,z.deflate=s,z.deflateRaw=c,z.gzip=x},824186:function(X,z,e){"use strict";var E=e(909245),F=e(291005),O=e(852533),M=e(579134),b=e(28679),L=e(355172),T=e(65561),C=Object.prototype.toString;function f(o){if(!(this instanceof f))return new f(o);this.options=F.assign({chunkSize:16384,windowBits:0,to:""},o||{});var h=this.options;h.raw&&h.windowBits>=0&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),h.windowBits>=0&&h.windowBits<16&&!(o&&o.windowBits)&&(h.windowBits+=32),h.windowBits>15&&h.windowBits<48&&(h.windowBits&15||(h.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L,this.strm.avail_out=0;var l=E.inflateInit2(this.strm,h.windowBits);if(l!==M.Z_OK)throw new Error(b[l]);if(this.header=new T,E.inflateGetHeader(this.strm,this.header),h.dictionary&&(typeof h.dictionary=="string"?h.dictionary=O.string2buf(h.dictionary):C.call(h.dictionary)==="[object ArrayBuffer]"&&(h.dictionary=new Uint8Array(h.dictionary)),h.raw&&(l=E.inflateSetDictionary(this.strm,h.dictionary),l!==M.Z_OK)))throw new Error(b[l])}f.prototype.push=function(o,h){var l=this.strm,r=this.options.chunkSize,s=this.options.dictionary,c,x,a,i,n,u=!1;if(this.ended)return!1;x=h===~~h?h:h===!0?M.Z_FINISH:M.Z_NO_FLUSH,typeof o=="string"?l.input=O.binstring2buf(o):C.call(o)==="[object ArrayBuffer]"?l.input=new Uint8Array(o):l.input=o,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new F.Buf8(r),l.next_out=0,l.avail_out=r),c=E.inflate(l,M.Z_NO_FLUSH),c===M.Z_NEED_DICT&&s&&(c=E.inflateSetDictionary(this.strm,s)),c===M.Z_BUF_ERROR&&u===!0&&(c=M.Z_OK,u=!1),c!==M.Z_STREAM_END&&c!==M.Z_OK)return this.onEnd(c),this.ended=!0,!1;l.next_out&&(l.avail_out===0||c===M.Z_STREAM_END||l.avail_in===0&&(x===M.Z_FINISH||x===M.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=O.utf8border(l.output,l.next_out),i=l.next_out-a,n=O.buf2string(l.output,a),l.next_out=i,l.avail_out=r-i,i&&F.arraySet(l.output,l.output,a,i,0),this.onData(n)):this.onData(F.shrinkBuf(l.output,l.next_out))),l.avail_in===0&&l.avail_out===0&&(u=!0)}while((l.avail_in>0||l.avail_out===0)&&c!==M.Z_STREAM_END);return c===M.Z_STREAM_END&&(x=M.Z_FINISH),x===M.Z_FINISH?(c=E.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===M.Z_OK):(x===M.Z_SYNC_FLUSH&&(this.onEnd(M.Z_OK),l.avail_out=0),!0)},f.prototype.onData=function(o){this.chunks.push(o)},f.prototype.onEnd=function(o){o===M.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=F.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function v(o,h){var l=new f(h);if(l.push(o,!0),l.err)throw l.msg||b[l.err];return l.result}function m(o,h){return h=h||{},h.raw=!0,v(o,h)}z.Inflate=f,z.inflate=v,z.inflateRaw=m,z.ungzip=v},852533:function(X,z,e){"use strict";var E=e(291005),F=!0,O=!0;try{String.fromCharCode.apply(null,[0])}catch{F=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{O=!1}for(var M=new E.Buf8(256),b=0;b<256;b++)M[b]=b>=252?6:b>=248?5:b>=240?4:b>=224?3:b>=192?2:1;M[254]=M[254]=1,z.string2buf=function(T){var C,f,v,m,o,h=T.length,l=0;for(m=0;m<h;m++)f=T.charCodeAt(m),(f&64512)===55296&&m+1<h&&(v=T.charCodeAt(m+1),(v&64512)===56320&&(f=65536+(f-55296<<10)+(v-56320),m++)),l+=f<128?1:f<2048?2:f<65536?3:4;for(C=new E.Buf8(l),o=0,m=0;o<l;m++)f=T.charCodeAt(m),(f&64512)===55296&&m+1<h&&(v=T.charCodeAt(m+1),(v&64512)===56320&&(f=65536+(f-55296<<10)+(v-56320),m++)),f<128?C[o++]=f:f<2048?(C[o++]=192|f>>>6,C[o++]=128|f&63):f<65536?(C[o++]=224|f>>>12,C[o++]=128|f>>>6&63,C[o++]=128|f&63):(C[o++]=240|f>>>18,C[o++]=128|f>>>12&63,C[o++]=128|f>>>6&63,C[o++]=128|f&63);return C};function L(T,C){if(C<65534&&(T.subarray&&O||!T.subarray&&F))return String.fromCharCode.apply(null,E.shrinkBuf(T,C));for(var f="",v=0;v<C;v++)f+=String.fromCharCode(T[v]);return f}z.buf2binstring=function(T){return L(T,T.length)},z.binstring2buf=function(T){for(var C=new E.Buf8(T.length),f=0,v=C.length;f<v;f++)C[f]=T.charCodeAt(f);return C},z.buf2string=function(T,C){var f,v,m,o,h=C||T.length,l=new Array(h*2);for(v=0,f=0;f<h;){if(m=T[f++],m<128){l[v++]=m;continue}if(o=M[m],o>4){l[v++]=65533,f+=o-1;continue}for(m&=o===2?31:o===3?15:7;o>1&&f<h;)m=m<<6|T[f++]&63,o--;if(o>1){l[v++]=65533;continue}m<65536?l[v++]=m:(m-=65536,l[v++]=55296|m>>10&1023,l[v++]=56320|m&1023)}return L(l,v)},z.utf8border=function(T,C){var f;for(C=C||T.length,C>T.length&&(C=T.length),f=C-1;f>=0&&(T[f]&192)===128;)f--;return f<0||f===0?C:f+M[T[f]]>C?f:C}},65561:function(X){"use strict";function z(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}X.exports=z},255145:function(X,z,e){"use strict";var E=e(187647),F={},O=new E.Cartographic,M=new E.Ray;F.getCameraFocus=function(b,L,T){var C=b.scene,f=C.camera;if(C.mode!==E.SceneMode.MORPHING&&((0,E.defined)(T)||(T=new E.Cartesian3),(0,E.defined)(b.trackedEntity)?T=b.trackedEntity.position.getValue(b.clock.currentTime,T):(M.origin=f.positionWC,M.direction=f.directionWC,T=C.globe.pick(M,C,T)),!!(0,E.defined)(T)))return C.mode===E.SceneMode.SCENE2D||C.mode===E.SceneMode.COLUMBUS_VIEW?(T=f.worldToCameraCoordinatesPoint(T,T),L&&(T=C.globe.ellipsoid.cartographicToCartesian(C.mapProjection.unproject(T,O),T))):L||(T=f.worldToCameraCoordinatesPoint(T,T)),T},z.Z=F},394791:function(X,z,e){"use strict";e.d(z,{Z:function(){return L}});var E=e(187647),O=function(T){var C=document.createElement("div");C.innerHTML=T;for(var f=document.createDocumentFragment();C.firstChild;)f.appendChild(C.firstChild);return f},M=E.knockout,b=function(T,C,f){C=(0,E.getElement)(C);var v=O(T),m=[],o;for(o=0;o<v.childNodes.length;++o)m.push(v.childNodes[o]);for(C.appendChild(v),o=0;o<m.length;++o){var h=m[o];(h.nodeType===1||h.nodeType===8)&&M.applyBindings(f,h)}return m},L=b},819563:function(X,z,e){"use strict";e.r(z);var E=e(187647),F=e(394791),O=E.knockout,M=function(C){if(!(0,E.defined)(C)||!(0,E.defined)(C.terria))throw new E.DeveloperError("options.terria is required.");this.terria=C.terria,this._removeSubscription=void 0,this._lastLegendUpdate=void 0,this.eventHelper=new E.EventHelper,this.distanceLabel=void 0,this.barWidth=void 0,this.enableDistanceLegend=(0,E.defined)(C.enableDistanceLegend)?C.enableDistanceLegend:!0,O.track(this,["distanceLabel","barWidth"]),this.eventHelper.add(this.terria.afterWidgetChanged,function(){(0,E.defined)(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0)},this);var f=this;function v(){if((0,E.defined)(f.terria)){var m=f.terria.scene;f._removeSubscription=m.postRender.addEventListener(function(){T(this,m)},f)}}v(),this.eventHelper.add(this.terria.afterWidgetChanged,function(){v()},this)};M.prototype.destroy=function(){this.eventHelper.removeAll()},M.prototype.show=function(C){var f;this.enableDistanceLegend?f=`<div class="distance-legend" data-bind="visible: distanceLabel && barWidth"><div class="distance-legend-label" data-bind="text: distanceLabel"></div><div class="distance-legend-scale-bar" data-bind="style: { width: barWidth + 'px', left: (5 + (125 - barWidth) / 2) + 'px' }"></div></div>`:f=`<div class="distance-legend"  style="display: none;" data-bind="visible: distanceLabel && barWidth"><div class="distance-legend-label"  data-bind="text: distanceLabel"></div><div class="distance-legend-scale-bar"  data-bind="style: { width: barWidth + 'px', left: (5 + (125 - barWidth) / 2) + 'px' }"></div></div>`,(0,F.Z)(f,C,this)},M.create=function(C){var f=new M(C);return f.show(C.container),f};var b=new E.EllipsoidGeodesic,L=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7];function T(C,f){if(!C.enableDistanceLegend){C.barWidth=void 0,C.distanceLabel=void 0;return}var v=(0,E.getTimestamp)();if(!(v<C._lastLegendUpdate+250)){C._lastLegendUpdate=v;var m=f.canvas.clientWidth,o=f.canvas.clientHeight,h=f.camera.getPickRay(new E.Cartesian2(m/2|0,o-1)),l=f.camera.getPickRay(new E.Cartesian2(1+m/2|0,o-1));if(!(!h&&!l)){var r=f.globe,s=r.pick(h,f),c=r.pick(l,f);if(!(0,E.defined)(s)||!(0,E.defined)(c)){C.barWidth=void 0,C.distanceLabel=void 0;return}var x=r.ellipsoid.cartesianToCartographic(s),a=r.ellipsoid.cartesianToCartographic(c);b.setEndPoints(x,a);for(var i=b.surfaceDistance,n=100,u,g=L.length-1;!(0,E.defined)(u)&&g>=0;--g)L[g]/i<n&&(u=L[g]);if((0,E.defined)(u)){var d;u>=1e3?d=(u/1e3).toString()+" km":d=u.toString()+" m",C.barWidth=u/i|0,C.distanceLabel=d}else C.barWidth=void 0,C.distanceLabel=void 0}}}z.default=M},65821:function(X,z,e){"use strict";e.d(z,{Z:function(){return L}});var E=e(187647),F=E.knockout,O=function(T){if(!(0,E.defined)(T))throw new E.DeveloperError("terria is required");this._terria=T,this.name="Unnamed Control",this.text=void 0,this.svgIcon=void 0,this.svgHeight=void 0,this.svgWidth=void 0,this.cssClass=void 0,this.isActive=!1,F.track(this,["name","svgIcon","svgHeight","svgWidth","cssClass","isActive"])};Object.defineProperties(O.prototype,{terria:{get:function(){return this._terria}},hasText:{get:function(){return(0,E.defined)(this.text)&&typeof this.text=="string"}}}),O.prototype.activate=function(){throw new E.DeveloperError("activate must be implemented in the derived class.")};var M=O,b=function(T){M.apply(this,arguments)};b.prototype=Object.create(M.prototype);var L=b},699290:function(X,z,e){"use strict";e.r(z),e.d(z,{default:function(){return a}});var E=e(187647),F=e(394791),O="M 7.5,0 C 3.375,0 0,3.375 0,7.5 0,11.625 3.375,15 7.5,15 c 3.46875,0 6.375,-2.4375 7.21875,-5.625 l -1.96875,0 C 12,11.53125 9.9375,13.125 7.5,13.125 4.40625,13.125 1.875,10.59375 1.875,7.5 1.875,4.40625 4.40625,1.875 7.5,1.875 c 1.59375,0 2.90625,0.65625 3.9375,1.6875 l -3,3 6.5625,0 L 15,0 12.75,2.25 C 11.4375,0.84375 9.5625,0 7.5,0 z",M=O,b=e(65821),L=e(149500),T=function(i){b.Z.apply(this,arguments),this.name="\u91CD\u7F6E\u89C6\u56FE",this.navigationLocked=!1,this.svgIcon=M,this.svgHeight=15,this.svgWidth=15,this.cssClass="navigation-control-icon-reset"};T.prototype=Object.create(b.Z.prototype),T.prototype.setNavigationLocked=function(i){this.navigationLocked=i},T.prototype.resetView=function(){if(!this.navigationLocked){var i=this.terria.scene,n=i.screenSpaceCameraController;if(n.enableInputs){this.isActive=!0;var u=i.camera;if((0,E.defined)(this.terria.trackedEntity)){var g=this.terria.trackedEntity;this.terria.trackedEntity=void 0,this.terria.trackedEntity=g}else if(this.terria.options.defaultResetView){if(this.terria.options.defaultResetView&&this.terria.options.defaultResetView instanceof E.Cartographic)u.flyTo({destination:i.globe.ellipsoid.cartographicToCartesian(this.terria.options.defaultResetView)});else if(this.terria.options.defaultResetView&&this.terria.options.defaultResetView instanceof E.Rectangle)try{E.Rectangle.validate(this.terria.options.defaultResetView),u.flyTo({destination:this.terria.options.defaultResetView,orientation:{heading:E.Math.toRadians(5.729578)}})}catch{L.log("Cesium-navigation/ResetViewNavigationControl:   options.defaultResetView Cesium rectangle is  invalid!")}}else typeof u.flyHome=="function"?u.flyHome(1):u.flyTo({destination:E.Camera.DEFAULT_VIEW_RECTANGLE,duration:1});this.isActive=!1}}},T.prototype.activate=function(){this.resetView()};var C=T,f=e(229406),v=e(255145),m=E.knockout,o=function(i){this.terria=i.terria,this.eventHelper=new E.EventHelper,this.enableZoomControls=(0,E.defined)(i.enableZoomControls)?i.enableZoomControls:!0,this.enableCompass=(0,E.defined)(i.enableCompass)?i.enableCompass:!0,this.navigationLocked=!1,this.controls=i.controls,(0,E.defined)(this.controls)||(this.controls=[new f.default(this.terria,!0),new C(this.terria),new f.default(this.terria,!1)]),this.showCompass=(0,E.defined)(this.terria)&&this.enableCompass,this.heading=this.showCompass?this.terria.scene.camera.heading:0,this.isOrbiting=!1,this.orbitCursorAngle=0,this.orbitCursorOpacity=0,this.orbitLastTimestamp=0,this.orbitFrame=void 0,this.orbitIsLook=!1,this.orbitMouseMoveFunction=void 0,this.orbitMouseUpFunction=void 0,this.isRotating=!1,this.rotateInitialCursorAngle=void 0,this.rotateFrame=void 0,this.rotateIsLook=!1,this.rotateMouseMoveFunction=void 0,this.rotateMouseUpFunction=void 0,this._unsubcribeFromPostRender=void 0,m.track(this,["controls","showCompass","heading","isOrbiting","orbitCursorAngle","isRotating"]);var n=this;o.prototype.setNavigationLocked=function(g){this.navigationLocked=g,this.controls&&this.controls.length>1&&this.controls[1].setNavigationLocked(this.navigationLocked)};function u(){(0,E.defined)(n.terria)?(n._unsubcribeFromPostRender&&(n._unsubcribeFromPostRender(),n._unsubcribeFromPostRender=void 0),n.showCompass=n.enableCompass,n._unsubcribeFromPostRender=n.terria.scene.postRender.addEventListener(function(){n.heading=n.terria.scene.camera.heading})):(n._unsubcribeFromPostRender&&(n._unsubcribeFromPostRender(),n._unsubcribeFromPostRender=void 0),n.showCompass=!1)}this.eventHelper.add(this.terria.afterWidgetChanged,u,this),u()};o.prototype.destroy=function(){this.eventHelper.removeAll()},o.prototype.show=function(i){var n;this.enableZoomControls&&this.enableCompass?n=`<div class="compass" title="\u6309\u4E0B\u9F20\u6807\u5DE6\u952E\u5E76\u5411\u56DB\u5468\u62D6\u62FD\u4E0D\u91CA\u653E \u53EF\u4FEE\u6539\u89C6\u56FE\u89D2\u5EA6\u3002\u53CC\u51FB:\u91CD\u7F6E\u89C6\u56FE\u3002" data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity } "></div> <div class="compass-outer-ring" title="\u5355\u51FB\u5E76\u62D6\u62FD\u65CB\u8F6C\uFF0C\u4FEE\u6539\u89C6\u89D2\u65B9\u5411\u3002" data-bind="style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' }, "></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind=" css: { 'compass-gyro-active': isOrbiting }"></div></div><div class="navigation-controls"><!-- ko foreach: controls --><div data-bind="click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' ">   <!-- ko if: $data.hasText -->   <div data-bind="text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind="  css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>  <!-- /ko --> </div> <!-- /ko --></div>`:!this.enableZoomControls&&this.enableCompass?n=`<div class="compass" title="\u6309\u4E0B\u9F20\u6807\u5DE6\u952E\u5E76\u5411\u56DB\u5468\u62D6\u62FD\u4E0D\u91CA\u653E \u53EF\u4FEE\u6539\u89C6\u56FE\u89D2\u5EA6\u3002\u53CC\u51FB:\u91CD\u7F6E\u89C6\u56FE\u3002" data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity }"></div> <div class="compass-outer-ring" title="\u5355\u51FB\u5E76\u62D6\u62FD\u65CB\u8F6C\uFF0C\u4FEE\u6539\u89C6\u89D2\u65B9\u5411\u3002" data-bind="style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' } "></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind=" css: { 'compass-gyro-active': isOrbiting }"></div></div><div class="navigation-controls"  style="display: none;" ><!-- ko foreach: controls --><div data-bind="click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' ">   <!-- ko if: $data.hasText -->   <div data-bind="text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind="  css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>  <!-- /ko --> </div> <!-- /ko --></div>`:this.enableZoomControls&&!this.enableCompass?n=`<div class="compass"  style="display: none;" title="\u6309\u4E0B\u9F20\u6807\u5DE6\u952E\u5E76\u5411\u56DB\u5468\u62D6\u62FD\u4E0D\u91CA\u653E \u53EF\u4FEE\u6539\u89C6\u56FE\u89D2\u5EA6\u3002\u53CC\u51FB:\u91CD\u7F6E\u89C6\u56FE\u3002" data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity } "></div> <div class="compass-outer-ring" title="\u5355\u51FB\u5E76\u62D6\u62FD\u65CB\u8F6C\uFF0C\u4FEE\u6539\u89C6\u89D2\u65B9\u5411\u3002" data-bind="style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' } "></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind=" css: { 'compass-gyro-active': isOrbiting }"></div></div><div class="navigation-controls"    ><!-- ko foreach: controls --><div data-bind="click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' ">   <!-- ko if: $data.hasText -->   <div data-bind="text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind="  css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>  <!-- /ko --> </div> <!-- /ko --></div>`:!this.enableZoomControls&&!this.enableCompass&&(n=`<div class="compass"  style="display: none;" title=\u6309\u4E0B\u9F20\u6807\u5DE6\u952E\u5E76\u5411\u56DB\u5468\u62D6\u62FD\u4E0D\u91CA\u653E \u53EF\u4FEE\u6539\u89C6\u56FE\u89D2\u5EA6\u3002\u53CC\u51FB:\u91CD\u7F6E\u89C6\u56FE\u3002" data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity } "></div> <div class="compass-outer-ring" title="\u5355\u51FB\u5E76\u62D6\u62FD\u65CB\u8F6C\uFF0C\u4FEE\u6539\u89C6\u89D2\u65B9\u5411\u3002" data-bind="style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' } "></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind="  css: { 'compass-gyro-active': isOrbiting }"></div></div><div class="navigation-controls"   style="display: none;" ><!-- ko foreach: controls --><div data-bind="click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' ">   <!-- ko if: $data.hasText -->   <div data-bind="text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind="  css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>  <!-- /ko --> </div> <!-- /ko --></div>`),(0,F.Z)(n,i,this)},o.prototype.add=function(i){this.controls.push(i)},o.prototype.remove=function(i){this.controls.remove(i)},o.prototype.isLastControl=function(i){return i===this.controls[this.controls.length-1]};var h=new E.Cartesian2;o.prototype.handleMouseDown=function(i,n){var u=this.terria.scene;if(u.mode===E.SceneMode.MORPHING||i.navigationLocked)return!0;var g=n.currentTarget,d=n.currentTarget.getBoundingClientRect(),y=d.width/2,p=new E.Cartesian2((d.right-d.left)/2,(d.bottom-d.top)/2),w=new E.Cartesian2(n.clientX-d.left,n.clientY-d.top),S=E.Cartesian2.subtract(w,p,h),R=E.Cartesian2.magnitude(S),B=R/y,k=145,P=50;if(B<P/k)c(this,g,S);else if(B<1)x(this,g,S);else return!0};var l=new E.Matrix4,r=new E.Matrix4,s=new E.Cartesian3;o.prototype.handleDoubleClick=function(i,n){var u=i.terria.scene,g=u.camera,d=u.screenSpaceCameraController;if(u.mode===E.SceneMode.MORPHING||!d.enableInputs||i.navigationLocked)return!0;if(!(u.mode===E.SceneMode.COLUMBUS_VIEW&&!d.enableTranslate)&&!((u.mode===E.SceneMode.SCENE3D||u.mode===E.SceneMode.COLUMBUS_VIEW)&&(!d.enableLook||u.mode===E.SceneMode.SCENE3D&&!d.enableRotate))){var y=v.Z.getCameraFocus(i.terria,!0,s);if(!(0,E.defined)(y)){this.controls[1].resetView();return}var p=u.globe.ellipsoid.cartographicToCartesian(g.positionCartographic,new E.Cartesian3),w=u.globe.ellipsoid.geodeticSurfaceNormal(y),S=new E.BoundingSphere(y,0);g.flyToBoundingSphere(S,{offset:new E.HeadingPitchRange(0,E.Math.PI_OVER_TWO-E.Cartesian3.angleBetween(w,g.directionWC),E.Cartesian3.distance(p,y)),duration:1.5})}},o.create=function(i){var n=new o(i);return n.show(i.container),n};function c(i,n,u){var g=i.terria.scene,d=g.screenSpaceCameraController;if(g.mode===E.SceneMode.MORPHING||!d.enableInputs)return;if(i.navigationLocked)return!0;switch(g.mode){case E.SceneMode.COLUMBUS_VIEW:if(d.enableLook)break;if(!d.enableTranslate||!d.enableTilt)return;break;case E.SceneMode.SCENE3D:if(d.enableLook)break;if(!d.enableTilt||!d.enableRotate)return;break;case E.SceneMode.SCENE2D:if(!d.enableTranslate)return;break}document.removeEventListener("mousemove",i.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",i.orbitMouseUpFunction,!1),(0,E.defined)(i.orbitTickFunction)&&i.terria.clock.onTick.removeEventListener(i.orbitTickFunction),i.orbitMouseMoveFunction=void 0,i.orbitMouseUpFunction=void 0,i.orbitTickFunction=void 0,i.isOrbiting=!0,i.orbitLastTimestamp=(0,E.getTimestamp)();var y=g.camera;if((0,E.defined)(i.terria.trackedEntity))i.orbitFrame=void 0,i.orbitIsLook=!1;else{var p=v.Z.getCameraFocus(i.terria,!0,s);(0,E.defined)(p)?(i.orbitFrame=E.Transforms.eastNorthUpToFixedFrame(p,g.globe.ellipsoid,r),i.orbitIsLook=!1):(i.orbitFrame=E.Transforms.eastNorthUpToFixedFrame(y.positionWC,g.globe.ellipsoid,r),i.orbitIsLook=!0)}i.orbitTickFunction=function(S){var R=(0,E.getTimestamp)(),B=R-i.orbitLastTimestamp,k=(i.orbitCursorOpacity-.5)*2.5/1e3,P=B*k,D=i.orbitCursorAngle+E.Math.PI_OVER_TWO,A=Math.cos(D)*P,N=Math.sin(D)*P,I;if(i.navigationLocked)return!0;(0,E.defined)(i.orbitFrame)&&(I=E.Matrix4.clone(y.transform,l),y.lookAtTransform(i.orbitFrame)),g.mode===E.SceneMode.SCENE2D?y.move(new E.Cartesian3(A,N,0),Math.max(g.canvas.clientWidth,g.canvas.clientHeight)/100*y.positionCartographic.height*P):i.orbitIsLook?(y.look(E.Cartesian3.UNIT_Z,-A),y.look(y.right,-N)):(y.rotateLeft(A),y.rotateUp(N)),(0,E.defined)(i.orbitFrame)&&y.lookAtTransform(I),i.orbitLastTimestamp=R};function w(S,R){var B=Math.atan2(-S.y,S.x);i.orbitCursorAngle=E.Math.zeroToTwoPi(B-E.Math.PI_OVER_TWO);var k=E.Cartesian2.magnitude(S),P=R/2,D=Math.min(k/P,1),A=.5*D*D+.5;i.orbitCursorOpacity=A}i.orbitMouseMoveFunction=function(S){var R=n.getBoundingClientRect(),B=new E.Cartesian2((R.right-R.left)/2,(R.bottom-R.top)/2),k=new E.Cartesian2(S.clientX-R.left,S.clientY-R.top),P=E.Cartesian2.subtract(k,B,h);w(P,R.width)},i.orbitMouseUpFunction=function(S){i.isOrbiting=!1,document.removeEventListener("mousemove",i.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",i.orbitMouseUpFunction,!1),(0,E.defined)(i.orbitTickFunction)&&i.terria.clock.onTick.removeEventListener(i.orbitTickFunction),i.orbitMouseMoveFunction=void 0,i.orbitMouseUpFunction=void 0,i.orbitTickFunction=void 0},document.addEventListener("mousemove",i.orbitMouseMoveFunction,!1),document.addEventListener("mouseup",i.orbitMouseUpFunction,!1),i.terria.clock.onTick.addEventListener(i.orbitTickFunction),w(u,n.getBoundingClientRect().width)}function x(i,n,u){var g=i.terria.scene,d=g.camera,y=g.screenSpaceCameraController;if(!(g.mode===E.SceneMode.MORPHING||g.mode===E.SceneMode.SCENE2D||!y.enableInputs)){if(i.navigationLocked)return!0;if(!(!y.enableLook&&(g.mode===E.SceneMode.COLUMBUS_VIEW||g.mode===E.SceneMode.SCENE3D&&!y.enableRotate))){if(document.removeEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",i.rotateMouseUpFunction,!1),i.rotateMouseMoveFunction=void 0,i.rotateMouseUpFunction=void 0,i.isRotating=!0,i.rotateInitialCursorAngle=Math.atan2(-u.y,u.x),(0,E.defined)(i.terria.trackedEntity))i.rotateFrame=void 0,i.rotateIsLook=!1;else{var p=v.Z.getCameraFocus(i.terria,!0,s);!(0,E.defined)(p)||g.mode===E.SceneMode.COLUMBUS_VIEW&&!y.enableLook&&!y.enableTranslate?(i.rotateFrame=E.Transforms.eastNorthUpToFixedFrame(d.positionWC,g.globe.ellipsoid,r),i.rotateIsLook=!0):(i.rotateFrame=E.Transforms.eastNorthUpToFixedFrame(p,g.globe.ellipsoid,r),i.rotateIsLook=!1)}var w;(0,E.defined)(i.rotateFrame)&&(w=E.Matrix4.clone(d.transform,l),d.lookAtTransform(i.rotateFrame)),i.rotateInitialCameraAngle=-d.heading,(0,E.defined)(i.rotateFrame)&&d.lookAtTransform(w),i.rotateMouseMoveFunction=function(S){var R=n.getBoundingClientRect(),B=new E.Cartesian2((R.right-R.left)/2,(R.bottom-R.top)/2),k=new E.Cartesian2(S.clientX-R.left,S.clientY-R.top),P=E.Cartesian2.subtract(k,B,h),D=Math.atan2(-P.y,P.x),A=D-i.rotateInitialCursorAngle,N=E.Math.zeroToTwoPi(i.rotateInitialCameraAngle-A),I=i.terria.scene.camera,G;(0,E.defined)(i.rotateFrame)&&(G=E.Matrix4.clone(I.transform,l),I.lookAtTransform(i.rotateFrame));var W=-I.heading;I.rotateRight(N-W),(0,E.defined)(i.rotateFrame)&&I.lookAtTransform(G)},i.rotateMouseUpFunction=function(S){i.isRotating=!1,document.removeEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",i.rotateMouseUpFunction,!1),i.rotateMouseMoveFunction=void 0,i.rotateMouseUpFunction=void 0},document.addEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.addEventListener("mouseup",i.rotateMouseUpFunction,!1)}}}var a=o},229406:function(X,z,e){"use strict";e.r(z);var E=e(187647),F=e(65821),O=e(255145),M=function(L,T){F.Z.apply(this,arguments),this.name="Zoom "+(T?"In":"Out"),this.text=T?"+":"-",this.cssClass="navigation-control-icon-zoom-"+(T?"in":"out"),this.relativeAmount=2,T&&(this.relativeAmount=1/this.relativeAmount)};M.prototype.relativeAmount=1,M.prototype=Object.create(F.Z.prototype),M.prototype.activate=function(){this.zoom(this.relativeAmount)};var b=new E.Cartesian3;M.prototype.zoom=function(L){if(this.isActive=!0,(0,E.defined)(this.terria)){var T=this.terria.scene,C=T.screenSpaceCameraController;if(!C.enableInputs||!C.enableZoom)return;var f=T.camera,v;switch(T.mode){case E.SceneMode.MORPHING:break;case E.SceneMode.SCENE2D:f.zoomIn(f.positionCartographic.height*(1-this.relativeAmount));break;default:var m;if((0,E.defined)(this.terria.trackedEntity)?m=new E.Cartesian3:m=O.Z.getCameraFocus(this.terria,!1),(0,E.defined)(m))v={direction:f.direction,up:f.up};else{var o=new E.Ray(f.worldToCameraCoordinatesPoint(T.globe.ellipsoid.cartographicToCartesian(f.positionCartographic)),f.directionWC);m=E.IntersectionTests.grazingAltitudeLocation(o,T.globe.ellipsoid),v={heading:f.heading,pitch:f.pitch,roll:f.roll}}var h=E.Cartesian3.subtract(f.position,m,b),l=E.Cartesian3.multiplyByScalar(h,L,h),r=E.Cartesian3.add(m,l,m);(0,E.defined)(this.terria.trackedEntity)||T.mode===E.SceneMode.COLUMBUS_VIEW?f.position=r:f.flyTo({destination:r,orientation:v,duration:.5,convert:!1})}}this.isActive=!1},z.default=M},106509:function(X,z,e){"use strict";e.r(z),e.d(z,{default:function(){return S}});var E=e(187647),F=e(6448),O=e.n(F),M=e(330479),b=e.n(M),L=/<html(.|\s)*>(.|\s)*<\/html>/im,T=new(b())({html:!0,linkify:!0});T.use(O(),{imageClass:"",removeUnbalanced:!1,removeUnknown:!1});var C={register:function(R){R.bindingHandlers.markdown={init:function(){return{controlsDescendantBindings:!0}},update:function(B,k){for(;B.firstChild;)R.removeNode(B.firstChild);var P=R.unwrap(k()),D;L.test(P)?D=P:D=T.render(P);var A=R.utils.parseHtmlFragment(D,B);B.className=B.className+" markdown";for(var N=0;N<A.length;++N){var I=A[N];f(I),B.appendChild(I)}}}}};function f(R){if(R instanceof HTMLAnchorElement&&(R.target="_blank"),R.childNodes&&R.childNodes.length>0)for(var B=0;B<R.childNodes.length;++B)f(R.childNodes[B])}var v=C,m=e(111553),o=e.n(m),h=null,l={register:function(R){R.bindingHandlers.swipeLeft={init:function(B,k,P,D,A){var N=R.unwrap(k());new(o())(B).on("swipeleft",function(I){var G=A.$data;N.apply(G,arguments)})}},R.bindingHandlers.swipeRight={init:function(B,k,P,D,A){var N=R.unwrap(k());new(o())(B).on("swiperight",function(I){var G=A.$data;N.apply(G,arguments)})}}}},r=l,s=E.knockout,c=function(){E.SvgPathBindingHandler.register(s),v.register(s),r.register(s),s.bindingHandlers.embeddedComponent={init:function(R,B,k,P,D){var A=s.unwrap(B());return A.show(R),{controlsDescendantBindings:!0}},update:function(R,B,k,P,D){}}},x=c,a=e(819563),i=e(699290),n=E.Event,u=null,g=function(R){d.apply(this,arguments),this._onDestroyListeners=[]};g.prototype.distanceLegendViewModel=void 0,g.prototype.navigationViewModel=void 0,g.prototype.navigationDiv=void 0,g.prototype.distanceLegendDiv=void 0,g.prototype.terria=void 0,g.prototype.container=void 0,g.prototype._onDestroyListeners=void 0,g.prototype._navigationLocked=!1,g.prototype.setNavigationLocked=function(R){this._navigationLocked=R,this.navigationViewModel.setNavigationLocked(this._navigationLocked)},g.prototype.getNavigationLocked=function(){return this._navigationLocked},g.prototype.destroy=function(){(0,E.defined)(this.navigationViewModel)&&this.navigationViewModel.destroy(),(0,E.defined)(this.distanceLegendViewModel)&&this.distanceLegendViewModel.destroy(),(0,E.defined)(this.navigationDiv)&&this.navigationDiv.parentNode.removeChild(this.navigationDiv),delete this.navigationDiv,(0,E.defined)(this.distanceLegendDiv)&&this.distanceLegendDiv.parentNode.removeChild(this.distanceLegendDiv),delete this.distanceLegendDiv,(0,E.defined)(this.container)&&this.container.parentNode.removeChild(this.container),delete this.container;for(var R=0;R<this._onDestroyListeners.length;R++)this._onDestroyListeners[R]()},g.prototype.addOnDestroyListener=function(R){typeof R=="function"&&this._onDestroyListeners.push(R)};function d(R,B){if(!(0,E.defined)(R))throw new E.DeveloperError("CesiumWidget or Viewer is required.");var k=(0,E.defined)(R.cesiumWidget)?R.cesiumWidget:R,P=document.createElement("div");P.className="cesium-widget-cesiumNavigationContainer",k.container.appendChild(P),this.terria=R,this.terria.options=(0,E.defined)(B)?B:{},this.terria.afterWidgetChanged=new n,this.terria.beforeWidgetChanged=new n,this.container=P,x(),(!(0,E.defined)(this.terria.options.enableDistanceLegend)||this.terria.options.enableDistanceLegend)&&(this.distanceLegendDiv=document.createElement("div"),P.appendChild(this.distanceLegendDiv),this.distanceLegendDiv.setAttribute("id","distanceLegendDiv"),this.distanceLegendViewModel=a.default.create({container:this.distanceLegendDiv,terria:this.terria,mapElement:P,enableDistanceLegend:!0})),(!(0,E.defined)(this.terria.options.enableZoomControls)||this.terria.options.enableZoomControls)&&(!(0,E.defined)(this.terria.options.enableCompass)||this.terria.options.enableCompass)?(this.navigationDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","navigationDiv"),P.appendChild(this.navigationDiv),this.navigationViewModel=i.default.create({container:this.navigationDiv,terria:this.terria,enableZoomControls:!0,enableCompass:!0})):(0,E.defined)(this.terria.options.enableZoomControls)&&!this.terria.options.enableZoomControls&&(!(0,E.defined)(this.terria.options.enableCompass)||this.terria.options.enableCompass)?(this.navigationDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","navigationDiv"),P.appendChild(this.navigationDiv),this.navigationViewModel=i.default.create({container:this.navigationDiv,terria:this.terria,enableZoomControls:!1,enableCompass:!0})):(!(0,E.defined)(this.terria.options.enableZoomControls)||this.terria.options.enableZoomControls)&&(0,E.defined)(this.terria.options.enableCompass)&&!this.terria.options.enableCompass?(this.navigationDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","navigationDiv"),P.appendChild(this.navigationDiv),this.navigationViewModel=i.default.create({container:this.navigationDiv,terria:this.terria,enableZoomControls:!0,enableCompass:!1})):(0,E.defined)(this.terria.options.enableZoomControls)&&!this.terria.options.enableZoomControls&&(0,E.defined)(this.terria.options.enableCompass)&&this.terria.options.enableCompass}var y=g;function p(R,B){if(!(0,E.defined)(R))throw new E.DeveloperError("viewer is required.");var k=w(R,B);k.addOnDestroyListener(function(P){return function(){delete P.cesiumNavigation}}(R)),Object.defineProperties(R,{cesiumNavigation:{configurable:!0,get:function(){return R.cesiumWidget.cesiumNavigation}}})}p.mixinWidget=function(R,B){return w.apply(void 0,arguments)};var w=function(R,B){var k=new y(R,B),P=(0,E.defined)(R.cesiumWidget)?R.cesiumWidget:R;return Object.defineProperties(P,{cesiumNavigation:{configurable:!0,get:function(){return k}}}),k.addOnDestroyListener(function(D){return function(){delete D.cesiumNavigation}}(P)),k},S=p},642786:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(985208),M=e(659791),b=e(22466),L=e(183393),T=e(105077),C=e(787879),f=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.register=z.Draw=void 0;var v=f(e(22466)),m=f(e(985208)),o=f(e(581806)),h=f(e(298924)),l=f(e(53267)),r=f(e(520314)),s=f(e(452909)),c=f(e(636583)),x=f(e(543389)),a=f(e(29870)),i=f(e(122777)),n=f(e(42762)),u=f(e(342579)),g=rt(e(187647)),d=e(606386),y=e(870317),p=rt(e(580823)),w=rt(e(936161)),S=rt(e(469973)),R=e(104997),B=e(841471),k=e(737583),P=e(802235),D=e(971350),A=e(541054),N=e(659575),I=e(729092),G=e(30625),W=e(963622),Z=e(476477),H=e(594688),U=e(952273),V=e(376863),Y=e(394818),$=e(708008),K=e(431320),J=e(711171),Q=e(432325),et=e(974385),nt=e(439705),st=void 0;function ut(Tt){if(typeof C!="function")return null;var mt=new C,Nt=new C;return(ut=function(vt){return vt?Nt:mt})(Tt)}function rt(Tt,mt){if(!mt&&Tt&&Tt.__esModule)return Tt;if(Tt===null||F(Tt)!=="object"&&typeof Tt!="function")return{default:Tt};var Nt=ut(mt);if(Nt&&Nt.has(Tt))return Nt.get(Tt);var ct={},vt=Object.defineProperty&&L;for(var Lt in Tt)if(Lt!=="default"&&Object.prototype.hasOwnProperty.call(Tt,Lt)){var Ct=vt?L(Tt,Lt):null;Ct&&(Ct.get||Ct.set)?Object.defineProperty(ct,Lt,Ct):ct[Lt]=Tt[Lt]}return ct.default=Tt,Nt&&Nt.set(Tt,ct),ct}function ht(Tt,mt){var Nt=O(Tt);if(M){var ct=M(Tt);mt&&(ct=b(ct).call(ct,function(vt){return L(Tt,vt).enumerable})),Nt.push.apply(Nt,ct)}return Nt}function Pt(Tt){for(var mt=1;mt<arguments.length;mt++){var Nt=arguments[mt]!=null?arguments[mt]:{};mt%2?ht(Object(Nt),!0).forEach(function(ct){(0,x.default)(Tt,ct,Nt[ct])}):T?Object.defineProperties(Tt,T(Nt)):ht(Object(Nt)).forEach(function(ct){Object.defineProperty(Tt,ct,L(Nt,ct))})}return Tt}var wt={},Mt=function(mt,Nt){(0,u.default)(this,st),wt[mt]=Nt}.bind(void 0);z.register=Mt;var Ft=function(){function Tt(){var mt=this,Nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:200;(0,i.default)(this,Tt),this.step=Nt,this.timer=null,this.callback=function(){(0,u.default)(this,mt),E.warn("\u8BF7\u8BBE\u7F6E\u9632\u6296\u7684\u56DE\u8C03\u51FD\u6570")}.bind(this)}return(0,n.default)(Tt,[{key:"active",value:function(Nt){var ct=this;clearTimeout(this.timer),this.callback=Nt||this.callback,this.timer=setTimeout(function(){(0,u.default)(this,ct),this.callback()}.bind(this),this.step)}}]),Tt}(),Dt=new Ft,Rt=d.Evented.extend({collection:null,dataSource:null,primitives:null,groundPrimitives:null,drawCtrl:null,initialize:function(mt,Nt){this.drawToolType="DrawAll",this.viewer=mt,this.id=g.createGuid(),this.options=Nt||{};var ct=this.viewer.shine.getLayer(Nt.id,"id");!ct&&(ct=this.viewer.shine.getLayer("temporaryDrawLayer","id")),this.collection=ct,this.dataSource=this.collection.dataSource,this.primitives=this.collection.primitiveCollection,this.groundPrimitives=this.collection.groundPrimitiveCollection,this.tooltip=new y.Tooltip(this.viewer.container);var vt={viewer:this.viewer,dataSource:this.dataSource,primitives:this.primitives,groundPrimitives:this.groundPrimitives,tooltip:this.tooltip,drawTool:this};this.drawCtrl={},this.drawCtrl.point=new B.DrawPoint(vt),this.drawCtrl.billboard=new k.DrawBillboard(vt),this.drawCtrl.label=new D.DrawLabel(vt),this.drawCtrl.model=new A.DrawModel(vt),this.drawCtrl.polyline=new N.DrawPolyline(vt),this.drawCtrl.curve=new I.DrawCurve(vt),this.drawCtrl.polylineVolume=new G.DrawPolylineVolume(vt),this.drawCtrl.corridor=new W.DrawCorridor(vt),this.drawCtrl.polygon=new Z.DrawPolygon(vt),this.drawCtrl.rectangle=new H.DrawRectangle(vt),this.drawCtrl.ellipse=new U.DrawCircle(vt),this.drawCtrl.circle=this.drawCtrl.ellipse,this.drawCtrl.cylinder=new V.DrawCylinder(vt),this.drawCtrl.ellipsoid=new Y.DrawEllipsoid(vt),this.drawCtrl.wall=new $.DrawWall(vt),this.drawCtrl.plotting=new Q.DrawPlotting(vt),this.drawCtrl.videoProjection=new et.DrawVideoProjection(vt),this.drawCtrl["model-p"]=new K.DrawPModel(vt),this.drawCtrl.cloud=new P.DrawCloud(vt);for(var Lt in wt)this.drawCtrl[Lt]=new wt[Lt](vt);g.defaultValue(this.options.removeScreenSpaceEvent,!![])&&(this.viewer.screenSpaceEventHandler.removeInputAction(g.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.viewer.screenSpaceEventHandler.removeInputAction(g.ScreenSpaceEventType.LEFT_CLICK),this.viewer.screenSpaceEventHandler.removeInputAction(g.ScreenSpaceEventType.MOUSE_MOVE));var Ct=this;for(var jt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,jt)&&(this.drawCtrl[jt]._fire=function(zt,Yt,Zt){Ct.fire(zt,Yt,Zt)});this.on(S.DrawCreated,function(zt){this.startEditing(zt.entity),this.fire("change:active",{active:![]})},this)},setDrawTypes:function(mt){var Nt,ct=this,vt=(0,v.default)(Nt=(0,m.default)(this._drawTool.drawCtrl)).call(Nt,function(Lt){return(0,u.default)(this,ct),(0,o.default)(mt).call(mt,Lt)}.bind(this)).reduce(function(Lt,Ct){return(0,u.default)(this,ct),Lt[Ct]=this._drawTool.drawCtrl[Ct],Lt}.bind(this),{});this._drawTool.drawCtrl=vt},setEditLayer:function(mt,Nt){var ct=this.viewer.shine.getLayer(mt,"id");!ct&&(ct=this.viewer.shine.getLayer("temporaryDrawLayer","id")),this.collection=ct,this.dataSource=this.collection.dataSource,this.primitives=this.collection.primitiveCollection,this.groundPrimitives=this.collection.groundPrimitiveCollection,this.drawCtrl.point.setLayer(this.collection),this.drawCtrl.billboard.setLayer(this.collection),this.drawCtrl.label.setLayer(this.collection),this.drawCtrl.model.setLayer(this.collection),this.drawCtrl.polyline.setLayer(this.collection),this.drawCtrl.curve.setLayer(this.collection),this.drawCtrl.polylineVolume.setLayer(this.collection),this.drawCtrl.corridor.setLayer(this.collection),this.drawCtrl.polygon.setLayer(this.collection),this.drawCtrl.rectangle.setLayer(this.collection),this.drawCtrl.ellipse.setLayer(this.collection),this.drawCtrl.circle=this.drawCtrl.ellipse,this.drawCtrl.cylinder.setLayer(this.collection),this.drawCtrl.ellipsoid.setLayer(this.collection),this.drawCtrl.wall.setLayer(this.collection),this.drawCtrl.plotting.setLayer(this.collection),this.drawCtrl.videoProjection.setLayer(this.collection),this.drawCtrl["model-p"].setLayer(this.collection),this.drawCtrl.cloud.setLayer(this.collection);for(var vt in wt)this.drawCtrl[vt].setLayer(this.collection);this.hasEdit(g.defaultValue(Nt,this._hasEdit))},_activateCollection:function(mt){this.dataSource=mt.dataSource;for(var Nt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,Nt)&&(this.drawCtrl[Nt].dataSource=this.dataSource)},_resetCollection:function(){for(var mt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,mt)&&(this.drawCtrl[mt].dataSource=this.dataSource)},changeMode:function(mt){mt==null&&(mt=(0,h.default)(this.drawCtrl)[0].mode,mt=mt==="entity"?"primitive":"entity"),mt=mt==="entity"?"entity":"primitive";for(var Nt in this.drawCtrl)if(Object.prototype.hasOwnProperty.call(this.drawCtrl,Nt)){var ct=this.drawCtrl[Nt];ct.mode=mt}return mt},startDraw:function(mt){if(typeof mt=="string")mt={drawtype:mt};else if(mt==null||mt.drawtype==null){E.error("\u9700\u8981\u4F20\u5165\u6307\u5B9A\u7ED8\u5236\u7684type\u7C7B\u578B\uFF01");return}var Nt=mt.drawtype;if(this.drawCtrl[Nt]==null){E.error("\u4E0D\u80FD\u8FDB\u884Ctype\u4E3A\u3010"+Nt+"\u3011\u7684\u7ED8\u5236\uFF0C\u65E0\u8BE5\u7C7B\u578B\uFF01");return}var ct;mt.success&&(ct=mt.success,delete mt.success),mt=w.addGeoJsonDefVal(mt),this.stopDraw();var vt=this.drawCtrl[Nt].activate(mt,ct);return this.bindDeleteContextmenu(vt),this.fire("change:active",{active:!![],drawtype:mt.edittype}),vt},endDraw:function(){for(var mt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,mt)&&this.drawCtrl[mt].endDraw&&this.drawCtrl[mt].endDraw();return this},stopDraw:function(){this.stopEditing();for(var mt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,mt)&&this.drawCtrl[mt].disable(!![]);return this.fire("change:active",{active:![]}),this},clearDraw:function(){return this.stopDraw(),this.collection.deleteFeatures(),this},currEditFeature:null,getCurrentEntity:function(){return this.currEditFeature},_hasEdit:![],hasEdit:function(mt){if(!(this._hasEdit!==null&&this._hasEdit===mt))if(this._hasEdit=mt,mt)this.bindSelectEvent();else{var Nt,ct;(Nt=this.currEditFeature)!==null&&Nt!==void 0&&(ct=Nt.editing)!==null&&ct!==void 0&&ct.disable&&this.stopEditing(),this.destroySelectEvent()}},bindSelectEvent:function(){var mt=this,Nt=new g.ScreenSpaceEventHandler(this.viewer.scene.canvas);Nt.setInputAction(function(ct){var vt,Lt=mt.viewer.scene.drillPick(ct.position);if(Lt.length){for(var Ct=0;Ct<Lt.length;Ct++)if(vt=Lt[Ct],g.defined(vt)){var jt=vt.id||vt.primitive.id||vt.primitive;if(jt&&mt.isMyEntity(jt)&&!jt._noMousePosition){if(mt.currEditFeature&&mt.currEditFeature===jt)return;if(!g.defaultValue(jt.inProgress,![])){jt&&jt.attribute&&jt.attribute.kzedit?mt.stopEditing():(mt.startEditing(jt),setTimeout(function(){mt.tooltip.showAt(ct.endPosition,y.message.edit.start)},100));return}}}}mt.stopEditing()},g.ScreenSpaceEventType.LEFT_CLICK),Nt.setInputAction(function(ct){var vt=this;mt._hasEdit&&((0,l.default)(mt.dataSource.entities).length===0&&mt.primitives._primitives.length===0||(mt.tooltip._div.style.display!=="none"&&mt.tooltip.setVisible(![]),Dt.active(function(){(0,u.default)(this,vt);var Lt,Ct=mt.viewer.scene.drillPick(ct.endPosition);if(Ct.length)for(var jt=function(){if(Lt=Ct[zt],g.defined(Lt)){var ft=Lt.id||Lt.primitive.id||Lt.primitive;if(ft&&mt.isMyEntity(ft)){if(mt.currEditFeature&&mt.currEditFeature===ft)return{v:void 0};if(!g.defaultValue(ft.inProgress,![])){var gt=mt.tooltip,dt=y.message.edit.start;ft._isDragger&&(dt=ft.draw_tooltip),ft&&ft.attribute&&ft.attribute.kzedit&&(dt=y.message.del.end),setTimeout(function(){gt.showAt(ct.endPosition,dt)},100)}return{v:void 0}}}},zt=0;zt<Ct.length;zt++){var Yt=jt();if((0,a.default)(Yt)==="object")return Yt.v}}.bind(this))))},g.ScreenSpaceEventType.MOUSE_MOVE),Nt.setInputAction(function(ct){if(mt._hasEdit){mt.tooltip.setVisible(![]);var vt,Lt=mt.viewer.scene.drillPick(ct.position);if(Lt.length)for(var Ct=function(){if(vt=Lt[jt],g.defined(vt)){var Zt=vt.id||vt.primitive.id||vt.primitive;if(Zt&&mt.isMyEntity(Zt))return mt.currEditFeature&&mt.currEditFeature===Zt?{v:void 0}:(!g.defaultValue(Zt.inProgress,![])&&(Zt&&Zt.editing&&Zt._isDragger&&Zt.movepoint&&(mt.deleteEntity(Zt),mt.viewer.shine.popup.close()),Zt&&Zt.editing&&!g.defaultValue(Zt.inProgress,![])&&mt.isMyEntity(Zt)&&setTimeout(function(){if(mt.deleteEntity(Zt),mt.options.calbackdel&&mt.options.calbackdel(Zt),Zt._exline&&mt.dataSource.entities.remove(Zt._exline),Zt._arrLables)for(var ft=0;ft<Zt._arrLables.length;ft++)Zt._arrLables[ft].show=![];Zt._totalLable&&(Zt._totalLable.show=![])},100)),{v:void 0})}},jt=0;jt<Lt.length;jt++){var zt=Ct();if((0,a.default)(zt)==="object")return zt.v}}},g.ScreenSpaceEventType.RIGHT_CLICK),this.selectHandler=Nt},destroySelectEvent:function(){this.selectHandler&&this.selectHandler.destroy(),this.selectHandler=void 0},startEditing:function(mt){this.stopEditing(),!(mt==null||!this._hasEdit)&&(mt.editing&&mt.editing.activate&&mt.editing.activate(),this.currEditFeature=mt)},stopEditing:function(){var mt,Nt;(mt=this.currEditFeature)!==null&&mt!==void 0&&(Nt=mt.editing)!==null&&Nt!==void 0&&Nt.disable&&this.currEditFeature.editing.disable(),this.currEditFeature=null},updateAttribute:function(mt,Nt){if(Nt==null&&(Nt=this.currEditFeature),!(Nt==null||mt==null)){mt.style=mt.style||{},mt.attr=mt.attr||{};var ct=Nt.attribute.drawtype;if(this.drawCtrl[ct].style2Entity(mt.style,Nt),Nt[ct]&&(Nt[ct].isTrueGraphic=!![]),Nt.attribute=Pt(Pt({},Nt.attribute),mt),this.drawCtrl[ct].bindOutline&&this.drawCtrl[ct].bindOutline(Nt),this.checkEditing(Nt),Nt.editing&&(Nt.editing.updateAttrForEditing&&Nt.editing.updateAttrForEditing(),Nt.editing.updateDraggers&&Nt.editing.updateDraggers()),this.options.nameTooltip){var vt=this;Nt.attribute.attr&&Nt.attribute.attr.name?Nt.tooltip={html:Nt.attribute.attr.name,check:function(){return!vt._hasEdit}}:Nt.tooltip=null}return Nt}},checkEditing:function(mt){var Nt=mt.attribute.drawtype;if(mt.editing.type!==Nt){var ct=mt.editing._enabled;mt.editing.disable(),mt.editing=this.drawCtrl[Nt].getEditClass(mt),ct&&mt.editing.activate()}},setCoordinates:function(mt,Nt){return mt=w.lonlats2cartesians(mt),this.setPositions(mt,Nt)},setPositions:function(mt,Nt){if(Nt==null&&(Nt=this.currEditFeature),!(Nt==null||mt==null))return Nt.editing&&(Nt.editing.setPositions(mt),Nt.editing.updateDraggers()),Nt},bindDeleteContextmenu:function(mt){var Nt=this;mt.contextmenuItems=mt.contextmenuItems||[],mt.contextmenuItems.push({text:"\u5220\u9664\u5BF9\u8C61",iconCls:"fa fa-trash-o",visible:function(){return Nt._hasEdit},calback:function(vt){var Lt=vt.target;Lt.editing&&Lt.editing.disable&&Lt.editing.disable(),Nt.deleteEntity(Lt)}})},deleteEntity:function(mt){var Nt=this;if(mt=mt||this.currEditFeature,mt!=null){mt.editing&&mt.editing.disable();var ct=this.primitives._primitives;if(mt instanceof g.Entity)if(mt.id.match(/_multi[0-9]/)){var vt,Lt=(0,r.default)(vt=mt.id).call(vt,0,mt.id.indexOf("_multi"));(0,c.default)(this.getEntitys()).forEach(function(Zt){var ft;(0,u.default)(this,Nt),!((ft=Zt.id)===null||ft===void 0)&&ft.match(Lt)&&this.dataSource.entities.remove(Zt),Zt.id===Lt+"_multi0"&&this.fire("delete-feature",Zt)}.bind(this));return}else this.dataSource.entities.remove(mt);else if(this.primitives.contains(mt))this.primitives.remove(mt);else if(mt instanceof g.PointPrimitive){var Ct=(0,s.default)(ct).call(ct,function(Zt){return(0,u.default)(this,Nt),Zt instanceof g.PointPrimitiveCollection}.bind(this));Ct.remove(mt)}else if(mt instanceof g.Label){var jt=(0,s.default)(ct).call(ct,function(Zt){return(0,u.default)(this,Nt),Zt instanceof g.LabelCollection}.bind(this));jt.remove(mt)}else if(mt instanceof g.Billboard){var zt=(0,s.default)(ct).call(ct,function(Zt){return(0,u.default)(this,Nt),Zt instanceof g.BillboardCollection}.bind(this));zt.remove(mt)}else if(mt instanceof g.Polyline){var Yt=(0,s.default)(ct).call(ct,function(Zt){return(0,u.default)(this,Nt),Zt instanceof g.PolylineCollection}.bind(this));Yt.remove(mt)}this.fire("delete-feature",mt)}},isMyEntity:function(mt){var Nt=this;if(typeof mt=="string")return![];if(mt instanceof g.Entity&&this.dataSource.entities.contains(mt))return!![];if(this.primitives.contains(mt))return!![];var ct=this.primitives._primitives;if(mt instanceof g.PointPrimitive){var vt=(0,s.default)(ct).call(ct,function(Yt){return(0,u.default)(this,Nt),Yt instanceof g.PointPrimitiveCollection}.bind(this));return vt?.contains(mt)}else if(mt instanceof g.Label){var Lt=(0,s.default)(ct).call(ct,function(Yt){return(0,u.default)(this,Nt),Yt instanceof g.LabelCollection}.bind(this));return Lt?.contains(mt)}else if(mt instanceof g.Billboard){var Ct=(0,s.default)(ct).call(ct,function(Yt){return(0,u.default)(this,Nt),Yt instanceof g.BillboardCollection}.bind(this));return Ct?.contains(mt)}else if(mt instanceof g.Polyline){var jt=(0,s.default)(ct).call(ct,function(Yt){return(0,u.default)(this,Nt),Yt instanceof g.PolylineCollection}.bind(this));return jt?.contains(mt)}else if(mt instanceof g.CumulusCloud){var zt=(0,s.default)(ct).call(ct,function(Yt){return(0,u.default)(this,Nt),Yt instanceof g.CloudCollection}.bind(this));return zt?.contains(mt)}return![]},deleteAll:function(){this.clearDraw();var mt=this.collection.id;this.viewer.shine.removeLayer({id:mt})},toGeoJSON:function(mt){if(this.stopDraw(),mt==null){var Nt=this.getEntitys();if(Nt.length===0)return null;for(var ct=[],vt=0,Lt=Nt.length;vt<Lt;vt++){var Ct=Nt[vt];if(!(Ct.attribute==null||Ct.attribute.drawtype==null)){Ct.attribute.attr.layerId=Ct.entityCollection.owner.name;var jt=Ct.attribute.drawtype,zt=this.drawCtrl[jt].toGeoJSON(Ct);zt!=null&&(zt=w.removeGeoJsonDefVal(zt),ct.push(zt))}}return ct.length>0?{type:"FeatureCollection",features:ct}:null}else{var Yt=mt.attribute.drawtype,Zt=this.drawCtrl[Yt].toGeoJSON(mt);return Zt=w.removeGeoJsonDefVal(Zt),Zt}},toGeoJSONEx:function(mt){if(g.defined(mt)){var Nt=[];if(mt.position){var ct=this.drawCtrl.point.toGeoJSON(mt);Nt.push(ct)}if(mt.polyline){var vt=this.drawCtrl.polyline.toGeoJSON(mt);Nt.push(vt)}if(mt.polygon){var Lt=this.drawCtrl.polygon.toGeoJSON(mt);Nt.push(Lt)}if(mt.rectangle){var Ct=this.drawCtrl.rectangle.toGeoJSON(mt);Nt.push(Ct)}if(mt.ellipsoid){var jt=this.drawCtrl.ellipsoid.toGeoJSON(mt);Nt.push(jt)}if(mt.wall){var zt=this.drawCtrl.wall.toGeoJSON(mt);Nt.push(zt)}if(mt.circle){var Yt=this.drawCtrl.ellipse.toGeoJSON(mt);Nt.push(Yt)}if(Nt.length>1)return{type:"FeatureCollection",features:Nt};if(Nt.length===1)return Nt[0]}},loadJson:function(mt,Nt){var ct=this,vt=Nt.isClear,Lt=Nt.isFlash,Ct=Nt.layerId;Ct&&this.setEditLayer(Ct,![]);try{p.isString(mt)&&(mt=JSON.parse(mt))}catch(ot){p.alert(ot.name+": "+ot.message+` 
\u8BF7\u786E\u8BA4json\u6587\u4EF6\u683C\u5F0F\u6B63\u786E!!!`);return}var jt=mt;vt&&this.clearDraw();var zt=[],Yt;jt.type!=="FeatureCollection"&&(Yt=jt.properties);var Zt=(0,nt.getFeaturesFromGeoJson)(jt,{featureProjection:"EPSG:4326"});Yt&&Zt[0].setProperties(Yt);var ft=(0,h.default)(this.drawCtrl)[0].mode,gt;Zt.length>5e3&&(gt=!![],this.changeMode("primitive"));var dt=this;(function ot(it){for(var yt=function(){var Kt,Jt=it[Ot];if(Jt.getGeometry().getType()==="MultiPolygon"){var te,ie=[];te=Jt.getGeometry().getPolygons();for(var oe=0;oe<te.length;oe++){var he=te[oe],ne=Jt.clone();ne.setGeometry(he),ne.set("brotherId","_multi"+oe),ie.push(ne)}return ot(ie),{v:void 0}}if(!Jt.getProperties().drawtype)switch(Jt.getGeometry().getType()){case"Polygon":Jt.set("drawtype","polygon");break;case"MultiLineString":case"LineString":Jt.set("drawtype","polyline");break;case"MultiPoint":case"Point":Jt.set("drawtype","point");break}var ce=Jt.getProperties().drawtype;if(dt.drawCtrl[ce]==null)return E.error("\u6570\u636E\u65E0\u6CD5\u8BC6\u522B\u6216\u8005\u6570\u636E\u7684["+ce+"]\u7C7B\u578B\u53C2\u6570\u6709\u8BEF"),"continue";Jt.set("style",g.defaultValue(Jt.getProperties().style,{}));var ge=((Kt=Jt.getProperties().attr)===null||Kt===void 0?void 0:Kt.id)||g.createGuid();if(Jt.getProperties().brotherId&&(ge=ge.replace("_multi0",""),ge+=Jt.getProperties().brotherId),Jt.set("attr",Pt(Pt({},Jt.getProperties().attr||{}),{},{id:ge})),Jt.setProperties(w.addGeoJsonDefVal(Jt.getProperties())),gt&&dt.drawCtrl[ce].loadJson){var Me=(0,nt.getGeoJsonFromFeatures)([Jt]);Me=JSON.parse(Me).features;var It=dt.drawCtrl[ce].loadJson(Me);return It.attribute={drawtype:ce,attr:Me[0].properties.attr,style:Me[0].properties.style},dt.setGeojsonFeatureId(_t),{v:It}}var Wt=(0,nt.getGeoJsonFromFeatures)([Jt]);Wt=JSON.parse(Wt).features[0];var _t=dt.drawCtrl[ce].jsonToEntity(Wt);if(dt.setGeojsonFeatureId(_t),dt.setGeojsonFeatureLayerId(_t),dt.bindDeleteContextmenu(_t),dt.options.nameTooltip)if(_t.attribute.attr&&_t.attribute.attr.name){var ee=ee;_t.tooltip={html:_t.attribute.attr.name,check:function(){return!ee._hasEdit}}}else _t.tooltip=null;zt.push(_t)},Ot=0,St=it.length;Ot<St;Ot++){var Gt=yt();if(Gt!=="continue"&&(0,a.default)(Gt)==="object")return Gt.v}})(Zt),Zt.length>5e3&&this.changeMode(ft);var lt=this.viewer.shine.getLayer(Ct,"id");return Lt&&(this.viewer._zoomPromise?this.viewer._zoomPromise.then(function(){(0,u.default)(this,ct),this.flashing(lt)}.bind(this)):this.flashing(lt)),zt},setGeojsonFeatureId:function(mt){if(mt instanceof g.Entity){var Nt=mt.attribute.attr.id;!Nt&&(mt.attribute.attr.id=mt.id)}else mt instanceof g.Primitive&&E.warn("")},setGeojsonFeatureLayerId:function(mt){if(mt instanceof g.Entity){var Nt=mt.attribute.attr.layerId;!Nt&&(mt.attribute.attr.layerId=mt.entityCollection.owner.name)}else mt instanceof g.Primitive&&E.warn("")},attributeToEntity:function(mt,Nt){return this.drawCtrl[mt.drawtype].attributeToEntity(mt,Nt)},bindExtraEntity:function(mt,Nt){mt=this.drawCtrl[Nt.drawtype].attributeToEntity(mt,Nt),this.dataSource.entities.add(mt)},_visible:!![],setVisible:function(mt){this._visible=mt,!mt&&this.stopDraw(),this.dataSource.show=mt,this.primitives.show=mt},flashing:function(mt){var Nt=this,ct=0,vt=this,Lt=this._visible;if(mt){if(mt=this.getCollection(mt)||mt,!(mt instanceof Object))return;this._activateCollection(mt)}else zt=function(ft){(0,u.default)(this,Nt),this.setVisible(ft);for(var gt=this.getCollections(),dt=0;dt<gt.length;dt++){var lt=gt[dt];lt.dataSource.show=ft}}.bind(this);Ct();function Ct(){zt(![]),Yt(jt,100)}function jt(){zt(!![]),ct++,ct<4?Yt(Ct,200):zt(Lt)}function zt(Zt){vt.setVisible(Zt)}function Yt(Zt,ft){var gt=this,dt=vt.viewer.myClock.currentTime.secondsOfDay,lt=function(it){(0,u.default)(this,gt);var yt=it.currentTime.secondsOfDay-dt;yt>=ft*.001&&(vt.viewer.myClock.onTick.removeEventListener(lt),Zt())}.bind(this);vt.viewer.myClock.onTick.addEventListener(lt)}},hasDraw:function(){return this.getEntitys().length>0},getEntitys:function(){var mt=this.collection.getFeatures();return mt},getFeaturesByLayerId:function(mt){var Nt=this.viewer.shine.getLayer(mt,"id"),ct=Nt.getFeatures();return ct},getFeatureById:function(mt,Nt){var ct=this.viewer.shine.getLayer(Nt,"id"),vt=ct.getFeatureById(mt);return vt},deleteFeatureById:function(mt,Nt){var ct=this.viewer.shine.getLayer(Nt,"id");ct.deleteFeatureById(mt)},deleteFeaturesByLayerId:function(mt){var Nt=this.viewer.shine.getLayer(mt,"id");Nt.deleteFeatures()},getDataSource:function(){return this.dataSource},getEntityById:function(mt){for(var Nt=this.getEntitys(),ct=0,vt=Nt.length;ct<vt;ct++){var Lt,Ct,jt=Nt[ct];if(mt===((Lt=jt.attribute)===null||Lt===void 0||(Ct=Lt.attr)===null||Ct===void 0?void 0:Ct.id))return jt}return null},getCoordinates:function(mt){var Nt,ct,vt=mt==null||(Nt=mt.attribute)===null||Nt===void 0?void 0:Nt.drawtype;return(ct=this.drawCtrl[vt])===null||ct===void 0?void 0:ct.getCoordinates(mt)},getPositions:function(mt){var Nt,ct,vt=mt==null||(Nt=mt.attribute)===null||Nt===void 0?void 0:Nt.drawtype;return(ct=this.drawCtrl[vt])===null||ct===void 0?void 0:ct.getPositions(mt)},destroy:function(){this.stopDraw(),this.hasEdit(![]),this.clearDraw();var mt=this.collection.id;this.viewer.shine.removeLayer({id:mt})}});z.Draw=Rt,Rt.Base=R.DrawBase,Rt.Billboard=k.DrawBillboard,Rt.Circle=U.DrawCircle,Rt.Cloud=P.DrawCloud,Rt.Cylinder=V.DrawCylinder,Rt.Corridor=W.DrawCorridor,Rt.Curve=I.DrawCurve,Rt.Ellipsoid=Y.DrawEllipsoid,Rt.Label=D.DrawLabel,Rt.Model=A.DrawModel,Rt.Point=B.DrawPoint,Rt.Polygon=Z.DrawPolygon,Rt.Polyline=N.DrawPolyline,Rt.PolylineVolume=G.DrawPolylineVolume,Rt.Rectangle=H.DrawRectangle,Rt.Wall=$.DrawWall,Rt.Plotting=Q.DrawPlotting,Rt.PModel=K.DrawPModel,Rt.PolygonEx=J.DrawPolygonEx},592118:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.register=z.DrawBase=void 0;var L=b(e(298924)),T=b(e(53267)),C=b(e(452909)),f=b(e(29870)),v=b(e(122777)),m=b(e(42762)),o=b(e(342579)),h=y(e(187647)),l=e(606386),r=e(870317),s=y(e(580823)),c=y(e(936161)),x=y(e(469973)),a=e(841471),i=e(659575),n=e(476477),u=e(439705),g=void 0;function d(k){if(typeof O!="function")return null;var P=new O,D=new O;return(d=function(N){return N?D:P})(k)}function y(k,P){if(!P&&k&&k.__esModule)return k;if(k===null||F(k)!=="object"&&typeof k!="function")return{default:k};var D=d(P);if(D&&D.has(k))return D.get(k);var A={},N=Object.defineProperty&&M;for(var I in k)if(I!=="default"&&Object.prototype.hasOwnProperty.call(k,I)){var G=N?M(k,I):null;G&&(G.get||G.set)?Object.defineProperty(A,I,G):A[I]=k[I]}return A.default=k,D&&D.set(k,A),A}var p={},w=function(P,D){(0,o.default)(this,g),p[P]=D}.bind(void 0);z.register=w;var S=function(){function k(){var P=this,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:200;(0,v.default)(this,k),this.step=D,this.timer=null,this.callback=function(){(0,o.default)(this,P),E.warn("\u8BF7\u8BBE\u7F6E\u9632\u6296\u7684\u56DE\u8C03\u51FD\u6570")}.bind(this)}return(0,m.default)(k,[{key:"active",value:function(D){var A=this;clearTimeout(this.timer),this.callback=D||this.callback,this.timer=setTimeout(function(){(0,o.default)(this,A),this.callback()}.bind(this),this.step)}}]),k}(),R=new S,B=l.Evented.extend({collection:null,dataSource:null,primitives:null,groundPrimitives:null,drawCtrl:null,initialize:function(P,D){this.drawToolType="DrawAllBase",this.viewer=P,this.id=h.createGuid(),this.options=D||{};var A=this.viewer.shine.getLayer(D.id,"id");!A&&(A=this.viewer.shine.getLayer("temporaryDrawLayer","id")),this.collection=A,this.dataSource=this.collection.dataSource,this.primitives=this.collection.primitiveCollection,this.groundPrimitives=this.collection.groundPrimitiveCollection,this.tooltip=new r.Tooltip(this.viewer.container);var N={viewer:this.viewer,dataSource:this.dataSource,primitives:this.primitives,groundPrimitives:this.groundPrimitives,tooltip:this.tooltip,drawTool:this};this.drawCtrl={},this.drawCtrl.point=new a.DrawPoint(N),this.drawCtrl.polyline=new i.DrawPolyline(N),this.drawCtrl.polygon=new n.DrawPolygon(N);for(var I in p)this.drawCtrl[I]=new p[I](N);h.defaultValue(this.options.removeScreenSpaceEvent,!![])&&(this.viewer.screenSpaceEventHandler.removeInputAction(h.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.viewer.screenSpaceEventHandler.removeInputAction(h.ScreenSpaceEventType.LEFT_CLICK),this.viewer.screenSpaceEventHandler.removeInputAction(h.ScreenSpaceEventType.MOUSE_MOVE));var G=this;for(var W in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,W)&&(this.drawCtrl[W]._fire=function(Z,H,U){G.fire(Z,H,U)});this.on(x.DrawCreated,function(Z){this.startEditing(Z.entity),this.fire("change:active",{active:![]})},this)},setEditLayer:function(P,D){var A=this.viewer.shine.getLayer(P,"id");!A&&(A=this.viewer.shine.getLayer("temporaryDrawLayer","id")),this.collection=A,this.dataSource=this.collection.dataSource,this.primitives=this.collection.primitiveCollection,this.groundPrimitives=this.collection.groundPrimitiveCollection,this.drawCtrl.point.setLayer(this.collection),this.drawCtrl.polyline.setLayer(this.collection),this.drawCtrl.polygon.setLayer(this.collection);for(var N in p)this.drawCtrl[N].setLayer(this.collection);this.hasEdit(h.defaultValue(D,this._hasEdit))},_activateCollection:function(P){this.dataSource=P.dataSource;for(var D in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,D)&&(this.drawCtrl[D].dataSource=this.dataSource)},_resetCollection:function(){for(var P in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,P)&&(this.drawCtrl[P].dataSource=this.dataSource)},changeMode:function(P){P==null&&(P=(0,L.default)(this.drawCtrl)[0].mode,P=P==="entity"?"primitive":"entity"),P=P==="entity"?"entity":"primitive";for(var D in this.drawCtrl)if(Object.prototype.hasOwnProperty.call(this.drawCtrl,D)){var A=this.drawCtrl[D];A.mode=P}return P},startDraw:function(P){if(typeof P=="string")P={drawtype:P};else if(P==null||P.drawtype==null){E.error("\u9700\u8981\u4F20\u5165\u6307\u5B9A\u7ED8\u5236\u7684type\u7C7B\u578B\uFF01");return}var D=P.drawtype;if(this.drawCtrl[D]==null){E.error("\u4E0D\u80FD\u8FDB\u884Ctype\u4E3A\u3010"+D+"\u3011\u7684\u7ED8\u5236\uFF0C\u65E0\u8BE5\u7C7B\u578B\uFF01");return}var A;P.success&&(A=P.success,delete P.success),P=c.addGeoJsonDefVal(P),this.stopDraw();var N=this.drawCtrl[D].activate(P,A);return this.bindDeleteContextmenu(N),this.fire("change:active",{active:!![],drawtype:P.edittype}),N},endDraw:function(){for(var P in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,P)&&this.drawCtrl[P].endDraw&&this.drawCtrl[P].endDraw();return this},stopDraw:function(){this.stopEditing();for(var P in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,P)&&this.drawCtrl[P].disable(!![]);return this.fire("change:active",{active:![]}),this},clearDraw:function(){return this.stopDraw(),this.collection.deleteFeatures(),this},currEditFeature:null,getCurrentEntity:function(){return this.currEditFeature},_hasEdit:![],hasEdit:function(P){if(!(this._hasEdit!==null&&this._hasEdit===P))if(this._hasEdit=P,P)this.bindSelectEvent();else{var D,A;(D=this.currEditFeature)!==null&&D!==void 0&&(A=D.editing)!==null&&A!==void 0&&A.disable&&this.stopEditing(),this.destroySelectEvent()}},bindSelectEvent:function(){var P=this,D=new h.ScreenSpaceEventHandler(this.viewer.scene.canvas);D.setInputAction(function(A){var N,I=P.viewer.scene.drillPick(A.position);if(I.length){for(var G=0;G<I.length;G++)if(N=I[G],h.defined(N)){var W=N.id||N.primitive.id||N.primitive;if(W&&P.isMyEntity(W)){if(P.currEditFeature&&P.currEditFeature===W)return;if(!h.defaultValue(W.inProgress,![])){W&&W.attribute&&W.attribute.kzedit?P.stopEditing():(P.startEditing(W),setTimeout(function(){P.tooltip.showAt(A.endPosition,r.message.edit.start)},100));return}}}}P.stopEditing()},h.ScreenSpaceEventType.LEFT_CLICK),D.setInputAction(function(A){var N=this;P._hasEdit&&((0,T.default)(P.dataSource.entities).length===0&&P.primitives._primitives.length===0||(P.tooltip._div.style.display!=="none"&&P.tooltip.setVisible(![]),R.active(function(){(0,o.default)(this,N);var I,G=P.viewer.scene.drillPick(A.endPosition);if(G.length)for(var W=function(){if(I=G[Z],h.defined(I)){var V=I.id||I.primitive.id||I.primitive;if(V&&P.isMyEntity(V)){if(P.currEditFeature&&P.currEditFeature===V)return{v:void 0};if(!h.defaultValue(V.inProgress,![])){var Y=P.tooltip,$=r.message.edit.start;V._isDragger&&($=V.draw_tooltip),V&&V.attribute&&V.attribute.kzedit&&($=r.message.del.end),setTimeout(function(){Y.showAt(A.endPosition,$)},100)}return{v:void 0}}}},Z=0;Z<G.length;Z++){var H=W();if((0,f.default)(H)==="object")return H.v}}.bind(this))))},h.ScreenSpaceEventType.MOUSE_MOVE),D.setInputAction(function(A){if(P._hasEdit){P.tooltip.setVisible(![]);var N,I=P.viewer.scene.drillPick(A.position);if(I.length)for(var G=function(){if(N=I[W],h.defined(N)){var U=N.id||N.primitive.id||N.primitive;if(U&&P.isMyEntity(U))return P.currEditFeature&&P.currEditFeature===U?{v:void 0}:(!h.defaultValue(U.inProgress,![])&&(U&&U.editing&&U._isDragger&&U.movepoint&&(P.deleteEntity(U),P.viewer.shine.popup.close()),U&&U.editing&&!h.defaultValue(U.inProgress,![])&&P.isMyEntity(U)&&setTimeout(function(){if(P.deleteEntity(U),P.options.calbackdel&&P.options.calbackdel(U),U._exline&&P.dataSource.entities.remove(U._exline),U._arrLables)for(var V=0;V<U._arrLables.length;V++)U._arrLables[V].show=![];U._totalLable&&(U._totalLable.show=![])},100)),{v:void 0})}},W=0;W<I.length;W++){var Z=G();if((0,f.default)(Z)==="object")return Z.v}}},h.ScreenSpaceEventType.RIGHT_CLICK),this.selectHandler=D},destroySelectEvent:function(){this.selectHandler&&this.selectHandler.destroy(),this.selectHandler=void 0},startEditing:function(P){this.stopEditing(),!(P==null||!this._hasEdit)&&(P.editing&&P.editing.activate&&P.editing.activate(),this.currEditFeature=P)},stopEditing:function(){var P,D;(P=this.currEditFeature)!==null&&P!==void 0&&(D=P.editing)!==null&&D!==void 0&&D.disable&&this.currEditFeature.editing.disable(),this.currEditFeature=null},updateAttribute:function(P,D){if(D==null&&(D=this.currEditFeature),!(D==null||P==null)){P.style=P.style||{},P.attr=P.attr||{};var A=D.attribute.drawtype;if(this.drawCtrl[A].style2Entity(P.style,D),D.attribute=P,this.drawCtrl[A].bindOutline&&this.drawCtrl[A].bindOutline(D),D.editing&&(D.editing.updateAttrForEditing&&D.editing.updateAttrForEditing(),D.editing.updateDraggers&&D.editing.updateDraggers()),this.options.nameTooltip){var N=this;D.attribute.attr&&D.attribute.attr.name?D.tooltip={html:D.attribute.attr.name,check:function(){return!N._hasEdit}}:D.tooltip=null}return D}},setCoordinates:function(P,D){return P=c.lonlats2cartesians(P),this.setPositions(P,D)},setPositions:function(P,D){if(D==null&&(D=this.currEditFeature),!(D==null||P==null))return D.editing&&(D.editing.setPositions(P),D.editing.updateDraggers()),D},bindDeleteContextmenu:function(P){var D=this;P.contextmenuItems=P.contextmenuItems||[],P.contextmenuItems.push({text:"\u5220\u9664\u5BF9\u8C61",iconCls:"fa fa-trash-o",visible:function(){return D._hasEdit},calback:function(N){var I=N.target;I.editing&&I.editing.disable&&I.editing.disable(),D.deleteEntity(I)}})},deleteEntity:function(P){var D=this;if(P=P||this.currEditFeature,P!=null){this.fire("delete-feature",P),P.editing&&P.editing.disable();var A=this.primitives._primitives;if(P instanceof h.Entity)this.dataSource.entities.remove(P);else if(this.primitives.contains(P))this.primitives.remove(P);else if(P instanceof h.PointPrimitive){var N=(0,C.default)(A).call(A,function(Z){return(0,o.default)(this,D),Z instanceof h.PointPrimitiveCollection}.bind(this));N.remove(P)}else if(P instanceof h.Label){var I=(0,C.default)(A).call(A,function(Z){return(0,o.default)(this,D),Z instanceof h.LabelCollection}.bind(this));I.remove(P)}else if(P instanceof h.Billboard){var G=(0,C.default)(A).call(A,function(Z){return(0,o.default)(this,D),Z instanceof h.BillboardCollection}.bind(this));G.remove(P)}else if(P instanceof h.Polyline){var W=(0,C.default)(A).call(A,function(Z){return(0,o.default)(this,D),Z instanceof h.PolylineCollection}.bind(this));W.remove(P)}}},isMyEntity:function(P){var D=this;if(typeof P=="string")return![];if(P instanceof h.Entity&&this.dataSource.entities.contains(P))return!![];if(this.primitives.contains(P))return!![];var A=this.primitives._primitives;if(P instanceof h.PointPrimitive){var N=(0,C.default)(A).call(A,function(H){return(0,o.default)(this,D),H instanceof h.PointPrimitiveCollection}.bind(this));return N?.contains(P)}else if(P instanceof h.Label){var I=(0,C.default)(A).call(A,function(H){return(0,o.default)(this,D),H instanceof h.LabelCollection}.bind(this));return I?.contains(P)}else if(P instanceof h.Billboard){var G=(0,C.default)(A).call(A,function(H){return(0,o.default)(this,D),H instanceof h.BillboardCollection}.bind(this));return G?.contains(P)}else if(P instanceof h.Polyline){var W=(0,C.default)(A).call(A,function(H){return(0,o.default)(this,D),H instanceof h.PolylineCollection}.bind(this));return W?.contains(P)}else if(P instanceof h.CumulusCloud){var Z=(0,C.default)(A).call(A,function(H){return(0,o.default)(this,D),H instanceof h.CloudCollection}.bind(this));return Z?.contains(P)}return![]},deleteAll:function(){this.clearDraw();var P=this.collection.id;this.viewer.shine.removeLayer({id:P})},toGeoJSON:function(P){if(this.stopDraw(),P==null){var D=this.getEntitys();if(D.length===0)return null;for(var A=[],N=0,I=D.length;N<I;N++){var G=D[N];if(!(G.attribute==null||G.attribute.drawtype==null)){G.attribute.attr.layerId=G.entityCollection.owner.name;var W=G.attribute.drawtype,Z=this.drawCtrl[W].toGeoJSON(G);Z!=null&&(Z=c.removeGeoJsonDefVal(Z),A.push(Z))}}return A.length>0?{type:"FeatureCollection",features:A}:null}else{var H=P.attribute.drawtype,U=this.drawCtrl[H].toGeoJSON(P);return U=c.removeGeoJsonDefVal(U),U}},toGeoJSONEx:function(P){if(h.defined(P)){var D=[];if(P.position){var A=this.drawCtrl.point.toGeoJSON(P);D.push(A)}if(P.polyline){var N=this.drawCtrl.polyline.toGeoJSON(P);D.push(N)}if(P.polygon){var I=this.drawCtrl.polygon.toGeoJSON(P);D.push(I)}if(P.rectangle){var G=this.drawCtrl.rectangle.toGeoJSON(P);D.push(G)}if(P.ellipsoid){var W=this.drawCtrl.ellipsoid.toGeoJSON(P);D.push(W)}if(P.wall){var Z=this.drawCtrl.wall.toGeoJSON(P);D.push(Z)}if(P.circle){var H=this.drawCtrl.ellipse.toGeoJSON(P);D.push(H)}if(D.length>1)return{type:"FeatureCollection",features:D};if(D.length===1)return D[0]}},loadJson:function(P,D){var A=this,N=D.isClear,I=D.isFly,G=D.isFlash,W=D.layerId;W&&this.setEditLayer(W,![]);try{s.isString(P)&&(P=JSON.parse(P))}catch(et){s.alert(et.name+": "+et.message+` 
\u8BF7\u786E\u8BA4json\u6587\u4EF6\u683C\u5F0F\u6B63\u786E!!!`);return}var Z=P;N&&this.clearDraw();var H=[],U;Z.type!=="FeatureCollection"&&(U=Z.properties);var V=(0,u.getFeaturesFromGeoJson)(Z,{featureProjection:"EPSG:4326"});U&&V[0].setProperties(U);var Y=(0,L.default)(this.drawCtrl)[0].mode,$;V.length>5e3&&($=!![],this.changeMode("primitive"));var K=this,J;(function et(nt){for(var st=function(){var wt=this,Mt=nt[ut];if(!Mt.getProperties().drawtype){var Ft,Dt=[];switch(Mt.getGeometry().getType()){case"MultiPolygon":Ft=Mt.getGeometry().getPolygons();for(var Rt=0;Rt<Ft.length;Rt++){var Tt=Ft[Rt],mt=Mt.clone();mt.setGeometry(Tt),Dt.push(mt)}return et(Dt),{v:void 0};case"Polygon":Mt.set("drawtype","polygon");break;case"MultiLineString":case"LineString":Mt.set("drawtype","polyline");break;case"MultiPoint":case"Point":Mt.set("drawtype","point");break}}var Nt=Mt.getProperties().drawtype;if(K.drawCtrl[Nt]==null)return E.error("\u6570\u636E\u65E0\u6CD5\u8BC6\u522B\u6216\u8005\u6570\u636E\u7684["+Nt+"]\u7C7B\u578B\u53C2\u6570\u6709\u8BEF"),"continue";if(Mt.set("style",h.defaultValue(Mt.getProperties().style,{})),Mt.set("attr",Mt.getProperties().attr||{}),Mt.setProperties(c.addGeoJsonDefVal(Mt.getProperties())),$&&K.drawCtrl[Nt].loadJson){var ct=(0,u.getGeoJsonFromFeatures)([Mt]);ct=JSON.parse(ct).features;var vt=K.drawCtrl[Nt].loadJson(ct);return vt.attribute={drawtype:Nt,attr:ct[0].properties.attr,style:ct[0].properties.style},K.setGeojsonFeatureId(Ct),I&&vt.readyPromise.then(function(zt){(0,o.default)(this,wt),zt._boundingSpheres[0]&&K.viewer.scene.camera.flyToBoundingSphere(zt._boundingSpheres[0])}.bind(this)),{v:vt}}var Lt=(0,u.getGeoJsonFromFeatures)([Mt]);J=Mt.getProperties().style.clampToGround,Lt=JSON.parse(Lt).features[0];var Ct=K.drawCtrl[Nt].jsonToEntity(Lt);if(K.setGeojsonFeatureId(Ct),K.setGeojsonFeatureLayerId(Ct),K.bindDeleteContextmenu(Ct),K.options.nameTooltip)if(Ct.attribute.attr&&Ct.attribute.attr.name){var jt=jt;Ct.tooltip={html:Ct.attribute.attr.name,check:function(){return!jt._hasEdit}}}else Ct.tooltip=null;H.push(Ct)},ut=0,rt=nt.length;ut<rt;ut++){var ht=st();if(ht!=="continue"&&(0,f.default)(ht)==="object")return ht.v}})(V),V.length>5e3&&this.changeMode(Y),I&&(J?this.viewer.flyTo(H,{offset:new h.HeadingPitchRange(0,h.Math.toRadians(-90),0)}):this.viewer.flyTo(H));var Q=this.viewer.shine.getLayer(W,"id");return G&&(this.viewer._zoomPromise?this.viewer._zoomPromise.then(function(){(0,o.default)(this,A),this.flashing(Q)}.bind(this)):this.flashing(Q)),H},setGeojsonFeatureId:function(P){if(P instanceof h.Entity){var D=P.attribute.attr.id;!D&&(P.attribute.attr.id=P.id)}else P instanceof h.Primitive&&E.warn("")},setGeojsonFeatureLayerId:function(P){if(P instanceof h.Entity){var D=P.attribute.attr.layerId;!D&&(P.attribute.attr.layerId=P.entityCollection.owner.name)}else P instanceof h.Primitive&&E.warn("")},attributeToEntity:function(P,D){return this.drawCtrl[P.drawtype].attributeToEntity(P,D)},bindExtraEntity:function(P,D){P=this.drawCtrl[D.drawtype].attributeToEntity(P,D),this.dataSource.entities.add(P)},_visible:!![],setVisible:function(P){this._visible=P,!P&&this.stopDraw(),this.dataSource.show=P,this.primitives.show=P},flashing:function(P){var D=this,A=0,N=this,I=this._visible;if(P){if(P=this.getCollection(P)||P,!(P instanceof Object))return;this._activateCollection(P)}else Z=function(V){(0,o.default)(this,D),this.setVisible(V);for(var Y=this.getCollections(),$=0;$<Y.length;$++){var K=Y[$];K.dataSource.show=V}}.bind(this);G();function G(){Z(![]),H(W,100)}function W(){Z(!![]),A++,A<4?H(G,200):Z(I)}function Z(U){N.setVisible(U)}function H(U,V){var Y=this,$=N.viewer.myClock.currentTime.secondsOfDay,K=function(Q){(0,o.default)(this,Y);var et=Q.currentTime.secondsOfDay-$;et>=V*.001&&(N.viewer.myClock.onTick.removeEventListener(K),U())}.bind(this);N.viewer.myClock.onTick.addEventListener(K)}},hasDraw:function(){return this.getEntitys().length>0},getEntitys:function(){this.stopDraw();var P=this.collection.getFeatures();return P},getFeaturesByLayerId:function(P){var D=this.viewer.shine.getLayer(P,"id"),A=D.getFeatures();return A},getFeatureById:function(P,D){var A=this.viewer.shine.getLayer(D,"id"),N=A.getFeatureById(P);return N},deleteFeatureById:function(P,D){var A=this.viewer.shine.getLayer(D,"id");A.deleteFeatureById(P)},deleteFeaturesByLayerId:function(P){var D=this.viewer.shine.getLayer(P,"id");D.deleteFeatures()},getDataSource:function(){return this.dataSource},getEntityById:function(P){for(var D=this.getEntitys(),A=0,N=D.length;A<N;A++){var I,G,W=D[A];if(P===((I=W.attribute)===null||I===void 0||(G=I.attr)===null||G===void 0?void 0:G.id))return W}return null},getCoordinates:function(P){var D,A,N=P==null||(D=P.attribute)===null||D===void 0?void 0:D.drawtype;return(A=this.drawCtrl[N])===null||A===void 0?void 0:A.getCoordinates(P)},getPositions:function(P){var D,A,N=P==null||(D=P.attribute)===null||D===void 0?void 0:D.drawtype;return(A=this.drawCtrl[N])===null||A===void 0?void 0:A.getPositions(P)},destroy:function(){this.stopDraw(),this.hasEdit(![]),this.clearDraw();var P=this.collection.id;this.viewer.shine.removeLayer({id:P})}});z.DrawBase=B,B.Point=a.DrawPoint,B.Polyline=i.DrawPolyline,B.Polygon=n.DrawPolygon},104997:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawBase=void 0;var b=m(e(187647)),L=e(779651),T=m(e(936161)),C=m(e(469973)),f=e(870317);function v(h){if(typeof O!="function")return null;var l=new O,r=new O;return(v=function(c){return c?r:l})(h)}function m(h,l){if(!l&&h&&h.__esModule)return h;if(h===null||F(h)!=="object"&&typeof h!="function")return{default:h};var r=v(l);if(r&&r.has(h))return r.get(h);var s={},c=Object.defineProperty&&M;for(var x in h)if(x!=="default"&&Object.prototype.hasOwnProperty.call(h,x)){var a=c?M(h,x):null;a&&(a.get||a.set)?Object.defineProperty(s,x,a):s[x]=h[x]}return s.default=h,r&&r.set(h,s),s}var o=L.Class.extend({type:null,dataSource:null,initialize:function(l){this.drawTool=l.drawTool,this.viewer=l.viewer,this.dataSource=l.dataSource,this.primitives=l.primitives,this.groundPrimitives=l.groundPrimitives,this.tooltip=l.tooltip||new f.Tooltip(this.viewer.container)},setLayer:function(l){this.dataSource=l.dataSource,this.primitives=l.primitiveCollection,this.groundPrimitives=l.groundPrimitiveCollection},fire:function(l,r,s){this._fire&&this._fire(l,r,s)},formatNum:function(l,r){return T.formatNum(l,r)},activate:function(l,r){if(this._enabled)return this;this._enabled=!![],this.drawOkCalback=r;var s=this.createFeature(l);return this.setFeatureId(s),this.setFeatureLayerId(s),this.entity.inProgress=!![],this.setCursor(!![]),this.bindEvent(),this.fire(C.DrawStart,{drawtype:this.type,entity:this.entity}),this.entity},disable:function(l){return this._enabled?(this._enabled=![],this.setCursor(![]),l&&this.entity.inProgress?(this.dataSource&&this.dataSource.entities.contains(this.entity)&&this.dataSource.entities.remove(this.entity),this.primitives&&this.primitives.contains(this.entity)&&this.primitives.remove(this.entity)):(this.entity.inProgress=![],this.finish(),this.drawOkCalback&&(this.drawOkCalback(this.entity),delete this.drawOkCalback),this.fire(C.DrawCreated,{drawtype:this.type,entity:this.entity,geojson:this.toGeoJSON(this.entity)})),this.destroyHandler(),this._positions_draw=null,this.entity=null,this.tooltip.setVisible(![]),this):this},createFeature:function(){},getHandler:function(){return(!this.handler||this.handler.isDestroyed())&&(this.handler=new b.ScreenSpaceEventHandler(this.viewer.scene.canvas)),this.handler},destroyHandler:function(){this.handler&&this.handler.destroy(),this.handler=void 0},setCursor:function(l){this.viewer._container.style.cursor=l?"crosshair":""},bindEvent:function(){},_positions_draw:null,getDrawPosition:function(){return this._positions_draw},editClass:null,getEditClass:function(l){if(l.isDrawEntity=!![],this.editClass==null)return null;var r=new this.editClass({entity:l,viewer:this.viewer,dataSource:this.dataSource});return this._minPointNum!=null&&(r._minPointNum=this._minPointNum),this._maxPointNum!=null&&(r._maxPointNum=this._maxPointNum),r._fire=this._fire,r.tooltip=this.tooltip,r.type=this.type,r.toGeoJSON=this.attrClass.toGeoJSON,r},updateAttrForDrawing:function(){},finish:function(){},attrClass:null,getCoordinates:function(l){return this.attrClass.getCoordinates(l)},getPositions:function(l){return this.attrClass.getPositions(l)},toGeoJSON:function(l){return this.attrClass.toGeoJSON(l)},attributeToEntity:function(l,r){var s=this.createFeature(l);return this._positions_draw=r,this.updateAttrForDrawing(!![]),this.finish(),s},jsonToEntity:function(l){var r=l.properties,s=T.getPositionByGeoJSON(l);return this.attributeToEntity(r,s)},setFeatureId:function(l){if(l instanceof b.Entity){var r=l.attribute.attr.id;!r&&(l.attribute.attr.id=l.id)}else l instanceof b.Primitive&&E.warn("")},setFeatureLayerId:function(l){if(l instanceof b.Entity){var r=l.attribute.attr.layerId;!r&&(l.attribute.attr.layerId=l.entityCollection.owner.name)}else l instanceof b.Primitive&&E.warn("")},bindExtraEntity:function(l,r){return r&&r.style&&this.style2Entity(r.style,l),this._positions_draw=this.getPositions(l),this.updateAttrForDrawing(!![]),this.finish(),l}});z.DrawBase=o},737583:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawBillboard=void 0;var L=b(e(452909)),T=b(e(985208)),C=b(e(342579)),f=b(e(122777)),v=b(e(42762)),m=b(e(330044)),o=b(e(299085)),h=b(e(234009)),l=a(e(187647)),r=a(e(980790)),s=a(e(721617)),c=e(841471);function x(d){if(typeof O!="function")return null;var y=new O,p=new O;return(x=function(S){return S?p:y})(d)}function a(d,y){if(!y&&d&&d.__esModule)return d;if(d===null||E(d)!=="object"&&typeof d!="function")return{default:d};var p=x(y);if(p&&p.has(d))return p.get(d);var w={},S=Object.defineProperty&&M;for(var R in d)if(R!=="default"&&Object.prototype.hasOwnProperty.call(d,R)){var B=S?M(d,R):null;B&&(B.get||B.set)?Object.defineProperty(w,R,B):w[R]=d[R]}return w.default=d,p&&p.set(d,w),w}function i(d){var y=n();return function(){var w=(0,h.default)(d),S;if(y){var R=(0,h.default)(this).constructor;S=F(w,arguments,R)}else S=w.apply(this,arguments);return(0,o.default)(this,S)}}function n(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}function u(d,y,p,w){Object.defineProperty(d,y,{enumerable:!![],configurable:!![],get:function(){return p},set:function(R){y in w&&(w[y]=R,p=R)}})}var g=function(d){(0,m.default)(p,d);var y=i(p);function p(w){var S;return(0,f.default)(this,p),w=w||{},S=y.call(this,w),S.type="billboard",S.attrClass=r,S}return(0,v.default)(p,[{key:"createFeature",value:function(S){var R=this;if(this.mode==="primitive"){var B=this.primitives._primitives,k=(0,L.default)(B).call(B,function(N){return(0,C.default)(this,R),N instanceof l.BillboardCollection}.bind(this));k=k||this.primitives.add(new l.BillboardCollection);var P=k.add(r.style2Entity(S.style));return P.attribute=S,P.billboard=r.style2Entity(S.style),(0,T.default)(P.billboard).forEach(function(N){(0,C.default)(this,R),Object.hasOwnProperty.call(P.billboard,N)&&u(P.billboard,N,P.billboard[N],P)}.bind(this)),this.entity=P,P}else{this._positions_draw=null;var D=this,A={show:![],position:new l.CallbackProperty(function(){return D.getDrawPosition()},![]),attribute:S};return S.style&&S.style.label&&(A.label=s.style2Entity(S.style.label)),this.entity=this.dataSource.entities.add(A),this.entity.billboard=r.style2Entity(S.style,this.entity.billboard,this.viewer,this.entity),this.entity.billboard.isTrueGraphic=!![],this.updateAttrForDrawing(),this.entity}}},{key:"style2Entity",value:function(S,R){return this.updateImg(S,R),S&&S.label&&s.style2Entity(S.label,R.label),r.style2Entity(S,R.billboard,this.viewer,R)}},{key:"updateAttrForDrawing",value:function(){this.updateImg(this.entity.attribute.style,this.entity)}},{key:"updateImg",value:function(){}}]),p}(c.DrawPoint);z.DrawBillboard=g},952273:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCircle=void 0;var L=b(e(53267)),T=b(e(122777)),C=b(e(42762)),f=b(e(330044)),v=b(e(299085)),m=b(e(234009)),o=c(e(187647)),h=c(e(102402)),l=e(659575),r=e(343889);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,m.default)(n),y;if(u){var p=(0,m.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,v.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,f.default)(g,n);var u=x(g);function g(d){var y;return(0,T.default)(this,g),d=d||{},y=u.call(this,d),y.type="ellipse",y._minPointNum=2,y._maxPointNum=2,y.editClass=r.EditCircle,y.attrClass=h,y}return(0,C.default)(g,[{key:"getShowPosition",value:function(){return this._positions_draw&&this._positions_draw.length>1?this._positions_draw[0]:null}},{key:"createFeature",value:function(y){this._positions_draw=[],this.type=y.drawtype,y.drawtype==="ellipse"?this._maxPointNum=3:this._maxPointNum=2;var p=this,w={position:new o.CallbackProperty(function(S){return p.getShowPosition(S)},![]),ellipse:h.style2Entity(y.style),attribute:y};return w.polyline={clampToGround:y.style.clampToGround,show:![]},this.entity=this.dataSource.entities.add(w),this.entity.mark311=this.drawTool.id,y.style.fillType=="zoomCircle"&&(this.entity.ellipse=h.style2Entity(y.style,null,this.entity)),this.bindOutline(this.entity),this.entity}},{key:"bindOutline",value:function(y){y.polyline.show=new o.CallbackProperty(function(p){return y.ellipse.outline&&y.ellipse.outline.getValue(p)&&y.ellipse.outlineWidth&&y.ellipse.outlineWidth.getValue(p)>1},![]),y.polyline.width=new o.CallbackProperty(function(p){return y.ellipse.outlineWidth&&y.ellipse.outlineWidth.getValue(p)},![]),y.polyline.clampToGround=new o.CallbackProperty(function(){return y.attribute.style.clampToGround},![]),y.polyline.zIndex=new o.CallbackProperty(function(){return y.ellipse.zIndex&&y.ellipse.zIndex.getValue()},![]),y.polyline.material=new o.ColorMaterialProperty(new o.CallbackProperty(function(p){return y.ellipse.outlineColor.getValue(p)||o.Color.WHITE},![])),y.polyline.positions=new o.CallbackProperty(function(){var p,w,S,R,B;if(p=y.position.getValue(),w=y.ellipse.semiMajorAxis&&y.ellipse.semiMajorAxis.getValue(),S=y.ellipse.semiMinorAxis&&y.ellipse.semiMinorAxis.getValue(),R=y.ellipse.height&&y.ellipse.height.getValue(),B=y.ellipse.rotation&&y.ellipse.rotation.getValue(),!(!p||!w||!S)){for(var k=new o.EllipseOutlineGeometry({center:p,semiMajorAxis:w,semiMinorAxis:S,height:R,rotation:B}),P=o.EllipseOutlineGeometry.createGeometry(k),D=[],A=P.indices.length/2,N=(0,L.default)(P.attributes.position),I=0;I<A;I++){var G={x:N[3*I],y:N[3*I+1],z:N[3*I+2]};D[I]=G}return D.push(D[0]),D}},![])}},{key:"style2Entity",value:function(y,p){if(y.clampToGround===![]){var w,S;p.position=(w=p.position)===null||w===void 0||(S=w.getValue)===null||S===void 0?void 0:S.call(w)}return h.style2Entity(y,p.ellipse,p)}},{key:"updateAttrForDrawing",value:function(y){if(this._positions_draw){if(y){this.addPositionsForRadius(this._positions_draw);return}if(!(this._positions_draw.length<2)){var p=this.entity.attribute.style;if(!p.clampToGround){var w=this.formatNum(o.Cartographic.fromCartesian(this._positions_draw[0]).height,2);this.entity.ellipse.height=w,p.height=w,p.extrudedHeight&&(this.entity.ellipse.extrudedHeight=w+Number(p.extrudedHeight))}var S=this.formatNum(o.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);if(this.entity.ellipse.semiMinorAxis=S,this._maxPointNum===3){var R;this._positions_draw.length===3?R=this.formatNum(o.Cartesian3.distance(this._positions_draw[0],this._positions_draw[2]),2):R=S,this.entity.ellipse.semiMajorAxis=Math.max(S,R),p.semiMajorAxis=Math.max(S,R),p.semiMinorAxis=Math.min(S,R)}else this.entity.ellipse.semiMajorAxis=S,p.radius=S}}}},{key:"addPositionsForRadius",value:function(y){this._positions_draw=[y];var p=this.entity.attribute.style,w=o.EllipseGeometryLibrary.computeEllipsePositions({center:y,semiMajorAxis:this.entity.ellipse.semiMajorAxis.getValue(this.viewer.clock.currentTime),semiMinorAxis:this.entity.ellipse.semiMinorAxis.getValue(this.viewer.clock.currentTime),rotation:o.Math.toRadians(Number(p.rotation||0)),granularity:2},!![],![]),S=new o.Cartesian3(w.positions[0],w.positions[1],w.positions[2]);if(this._positions_draw.push(S),this._maxPointNum===3){var R=new o.Cartesian3(w.positions[3],w.positions[4],w.positions[5]);this._positions_draw.push(R)}}},{key:"finish",value:function(){var y=this.entity;y.editing=this.getEditClass(y),y._positions_draw=this._positions_draw,y.position=new o.CallbackProperty(function(){return y._positions_draw&&y._positions_draw.length>0?y._positions_draw[0]:null},![])}}]),g}(l.DrawPolyline);z.DrawCircle=i},802235:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCloud=void 0;var L=b(e(452909)),T=b(e(342579)),C=b(e(122777)),f=b(e(42762)),v=b(e(330044)),m=b(e(299085)),o=b(e(234009)),h=c(e(187647)),l=c(e(608326)),r=e(841471);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,o.default)(n),y;if(u){var p=(0,o.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,m.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,v.default)(g,n);var u=x(g);function g(d){var y;return(0,C.default)(this,g),d=d||{},y=u.call(this,d),y.type="cloud",y.attrClass=l,y}return(0,f.default)(g,[{key:"createFeature",value:function(y){var p=this,w=this.primitives._primitives,S=(0,L.default)(w).call(w,function(B){return(0,T.default)(this,p),B instanceof h.CloudCollection}.bind(this));S=S||this.primitives.add(new h.CloudCollection);var R=S.add(l.style2Entity(y.style));return R.attribute=y,R.cloud=l.style2Entity(y.style),this.entity=R,R}},{key:"style2Entity",value:function(y,p){return l.style2Entity(y,p)}}]),g}(r.DrawPoint);z.DrawCloud=i},963622:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCorridor=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=c(e(187647)),o=e(659575),h=e(792672),l=c(e(269033)),r=e(245691);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,v.default)(n),y;if(u){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var u=x(g);function g(d){var y;return(0,L.default)(this,g),d=d||{},y=u.call(this,d),y.type="corridor",y._minPointNum=2,y._maxPointNum=9999,y.editClass=r.EditCorridor,y.attrClass=l,y}return(0,T.default)(g,[{key:"createFeature",value:function(y){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),y.config?(this._minPointNum=y.config.minPointNum||this._minPointNum_def,this._maxPointNum=y.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def);var p=this,w={corridor:l.style2Entity(y.style),attribute:y};return w.corridor.positions=new m.CallbackProperty(function(){return p.getDrawPosition()},![]),this.entity=this.dataSource.entities.add(w),this.entity.mark311=this.drawTool.id,this.entity._positions_draw=this._positions_draw,this.entity}},{key:"style2Entity",value:function(y,p){return l.style2Entity(y,p.corridor)}},{key:"updateAttrForDrawing",value:function(){var y=this.entity.attribute.style;if(!y.clampToGround){var p=(0,h.getMaxHeight)(this.getDrawPosition());p!==0&&(this.entity.corridor.height=p,y.height=p,y.extrudedHeight&&(this.entity.corridor.extrudedHeight=p+Number(y.extrudedHeight)))}}},{key:"finish",value:function(){var y=this.entity;y.editing=this.getEditClass(y),y._positions_draw=this.getDrawPosition(),y.corridor.positions=new m.CallbackProperty(function(){return y._positions_draw},![])}}]),g}(o.DrawPolyline);z.DrawCorridor=i},729092:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCurve=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=s(e(187647)),o=e(659575),h=e(669471),l=e(839670);function r(i){if(typeof O!="function")return null;var n=new O,u=new O;return(r=function(d){return d?u:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=r(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&M;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?M(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}function c(i){var n=x();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,C.default)(u,i);var n=c(u);function u(g){var d;return(0,L.default)(this,u),g=g||{},d=n.call(this,g),d.type="curve",d.editClass=l.EditCurve,d._positions_show=null,d}return(0,T.default)(u,[{key:"getDrawPosition",value:function(){return this._positions_show}},{key:"updateAttrForDrawing",value:function(){if(this._positions_draw==null||this._positions_draw.length<3){this._positions_show=this._positions_draw;return}this._positions_show=(0,h.line2curve)(this._positions_draw,this.entity.attribute.style.closure)}},{key:"finish",value:function(){var d=this.entity;d._positions_draw=this._positions_draw,d._positions_show=this._positions_show,d.editing=this.getEditClass(d),d.polyline.positions=new m.CallbackProperty(function(){return d._positions_show},![]),this._positions_show=null}}]),u}(o.DrawPolyline);z.DrawCurve=a},376863:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCylinder=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=c(e(187647)),o=c(e(311988)),h=e(659575),l=e(792672),r=e(232783);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,v.default)(n),y;if(u){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var u=x(g);function g(d){var y;return(0,L.default)(this,g),d=d||{},y=u.call(this,d),y.type="cylinder",y._minPointNum=2,y._maxPointNum=2,y.editClass=r.EditCylinder,y.attrClass=o,y}return(0,T.default)(g,[{key:"getShowPosition",value:function(y){return this._positions_draw&&this._positions_draw.length>1?(0,l.addPositionsHeight)(this._positions_draw[0],this.entity.cylinder.length.getValue(y)/2):null}},{key:"createFeature",value:function(y){this._positions_draw=[];var p=this,w={position:new m.CallbackProperty(function(S){return p.getShowPosition(S)},![]),cylinder:o.style2Entity(y.style),attribute:y};return this.entity=this.dataSource.entities.add(w),this.entity.mark311=this.drawTool.id,this.entity}},{key:"style2Entity",value:function(y,p){return o.style2Entity(y,p.cylinder)}},{key:"updateAttrForDrawing",value:function(y){if(this._positions_draw){if(y){this.addPositionsForRadius(this._positions_draw);return}this._positions_draw.length<2||(this.entity.cylinder.bottomRadius=this.formatNum(m.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2))}}},{key:"addPositionsForRadius",value:function(y){this._positions_draw=[y];var p=this.entity.cylinder.bottomRadius.getValue(this.viewer.clock.currentTime),w=m.EllipseGeometryLibrary.computeEllipsePositions({center:y,semiMajorAxis:p,semiMinorAxis:p,rotation:0,granularity:2},!![],![]),S=new m.Cartesian3(w.positions[0],w.positions[1],w.positions[2]);this._positions_draw.push(S)}},{key:"finish",value:function(){var y=this.entity;y.editing=this.getEditClass(y),y._positions_draw=this._positions_draw,y.position=new m.CallbackProperty(function(p){return y._positions_draw&&y._positions_draw.length>0?(0,l.addPositionsHeight)(y._positions_draw[0],y.cylinder.length.getValue(p)/2):null},![])}}]),g}(h.DrawPolyline);z.DrawCylinder=i},394818:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawEllipsoid=void 0;var L=b(e(342579)),T=b(e(122777)),C=b(e(42762)),f=b(e(330044)),v=b(e(299085)),m=b(e(234009)),o=x(e(187647)),h=e(659575),l=x(e(999698)),r=e(138766),s=e(478288);function c(u){if(typeof O!="function")return null;var g=new O,d=new O;return(c=function(p){return p?d:g})(u)}function x(u,g){if(!g&&u&&u.__esModule)return u;if(u===null||E(u)!=="object"&&typeof u!="function")return{default:u};var d=c(g);if(d&&d.has(u))return d.get(u);var y={},p=Object.defineProperty&&M;for(var w in u)if(w!=="default"&&Object.prototype.hasOwnProperty.call(u,w)){var S=p?M(u,w):null;S&&(S.get||S.set)?Object.defineProperty(y,w,S):y[w]=u[w]}return y.default=u,d&&d.set(u,y),y}function a(u){var g=i();return function(){var y=(0,m.default)(u),p;if(g){var w=(0,m.default)(this).constructor;p=F(y,arguments,w)}else p=y.apply(this,arguments);return(0,v.default)(this,p)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var n=function(u){(0,f.default)(d,u);var g=a(d);function d(y){var p;return(0,T.default)(this,d),y=y||{},p=g.call(this,y),p.type="ellipsoid",p._minPointNum=2,p._maxPointNum=3,p.editClass=r.EditEllipsoid,p.attrClass=l,p}return(0,C.default)(d,[{key:"getShowPosition",value:function(){return this._positions_draw&&this._positions_draw.length>0?this._positions_draw[0]:null}},{key:"createFeature",value:function(p){this._positions_draw=[];var w=this,S={position:new o.CallbackProperty(function(R){return w.getShowPosition(R)},![]),ellipsoid:l.style2Entity(p.style),attribute:p};return this.entity=this.dataSource.entities.add(S),this.entity.mark311=this.drawTool.id,this.entity}},{key:"style2Entity",value:function(p,w){return l.style2Entity(p,w.ellipsoid)}},{key:"updateAttrForDrawing",value:function(p){if(this._positions_draw){if(p){this.addPositionsForRadius(this._positions_draw);return}if(!(this._positions_draw.length<2)){var w=this.entity.attribute.style,S=this.formatNum(o.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);w.extentRadii=S,w.heightRadii=S;var R;this._positions_draw.length===3?R=this.formatNum(o.Cartesian3.distance(this._positions_draw[0],this._positions_draw[2]),2):R=S,w.widthRadii=R,this.updateRadii(w)}}}},{key:"updateRadii",value:function(p){this.entity.ellipsoid.radii.setValue(new o.Cartesian3(p.extentRadii,p.widthRadii,p.heightRadii))}},{key:"addPositionsForRadius",value:function(p){this._positions_draw=[p];var w=this.entity.attribute.style,S=o.EllipseGeometryLibrary.computeEllipsePositions({center:p,semiMajorAxis:Number(w.extentRadii),semiMinorAxis:Number(w.widthRadii),rotation:o.Math.toRadians(Number(w.rotation||0)),granularity:2},!![],![]),R=new o.Cartesian3(S.positions[0],S.positions[1],S.positions[2]);this._positions_draw.push(R);var B=new o.Cartesian3(S.positions[3],S.positions[4],S.positions[5]);this._positions_draw.push(B)}},{key:"finish",value:function(){this.entity.editing=this.getEditClass(this.entity),this.entity._positions_draw=this._positions_draw,this.entity.position=this.getShowPosition()}},{key:"setDynamicEllipseGraphics",value:function(p,w){var S=this;if(p&&p.center){var R=w,B=p.center,k=p.radius||800,P=p.rotateAmount||.05,D=0,A=p.height||1,N=0,I=0,G=0,W=p.scale||null,Z=p.scale2||null,H=p.material||new o.ImageMaterialProperty({image:p.imge||"Assets3D/Textures/circle_bg.png",transparent:!![]});R.position=new o.CallbackProperty(function(){return(0,s.transformWGS84ToCartesian)(B)},![]),R.orientation=new o.CallbackProperty(function(){return o.Transforms.headingPitchRollQuaternion((0,s.transformWGS84ToCartesian)(B),new o.HeadingPitchRoll(o.Math.toRadians(N),o.Math.toRadians(I),o.Math.toRadians(G)))},![]);var U=k,V=![],Y=function(){(0,L.default)(this,S),(k>=W||k<=U)&&(V=!V),V?k+=2:k-=2}.bind(this),$=function(){(0,L.default)(this,S),Z>=k?k+=2:k=U}.bind(this);R.ellipse={material:H,height:A,semiMajorAxis:new o.CallbackProperty(function(){return k},![]),semiMinorAxis:new o.CallbackProperty(function(){return k},![]),stRotation:new o.CallbackProperty(function(){return P>0&&(D+=P,D>=360&&(D=0)),W&&Y(),Z&&$(),D},![])}}}},{key:"setDynamicBlinkEllipseGraphics",value:function(p,w){if(p&&p.position){var S=w,R=p.alp||1,B=p.flog||!![];S.position=p.position,S.ellipse={semiMinorAxis:p.semiMinorAxis||2e3,semiMajorAxis:p.semiMajorAxis||2e3,height:p.height||10,material:new o.ColorMaterialProperty(new o.CallbackProperty(function(){return B?(R=R-.05,R<=0&&(B=![])):(R=R+.05,R>=1&&(B=!![])),o.Color.RED.withAlpha(R)},![]))}}}}]),d}(h.DrawPolyline);z.DrawEllipsoid=n},971350:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawLabel=void 0;var L=b(e(452909)),T=b(e(985208)),C=b(e(342579)),f=b(e(122777)),v=b(e(42762)),m=b(e(330044)),o=b(e(299085)),h=b(e(234009)),l=x(e(187647)),r=x(e(721617)),s=e(841471);function c(g){if(typeof O!="function")return null;var d=new O,y=new O;return(c=function(w){return w?y:d})(g)}function x(g,d){if(!d&&g&&g.__esModule)return g;if(g===null||E(g)!=="object"&&typeof g!="function")return{default:g};var y=c(d);if(y&&y.has(g))return y.get(g);var p={},w=Object.defineProperty&&M;for(var S in g)if(S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)){var R=w?M(g,S):null;R&&(R.get||R.set)?Object.defineProperty(p,S,R):p[S]=g[S]}return p.default=g,y&&y.set(g,p),p}function a(g){var d=i();return function(){var p=(0,h.default)(g),w;if(d){var S=(0,h.default)(this).constructor;w=F(p,arguments,S)}else w=p.apply(this,arguments);return(0,o.default)(this,w)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}function n(g,d,y,p){Object.defineProperty(g,d,{enumerable:!![],configurable:!![],get:function(){return y},set:function(S){d in p&&(p[d]=S,y=S)}})}var u=function(g){(0,m.default)(y,g);var d=a(y);function y(p){var w;return(0,f.default)(this,y),p=p||{},w=d.call(this,p),w.type="label",w.attrClass=r,w}return(0,v.default)(y,[{key:"createFeature",value:function(w){var S=this;if(this.mode==="primitive"){var R=this.primitives._primitives,B=(0,L.default)(R).call(R,function(A){return(0,C.default)(this,S),A instanceof l.LabelCollection}.bind(this));B=B||this.primitives.add(new l.LabelCollection);var k=B.add(r.style2Entity(w.style));return k.attribute=w,k.label=r.style2Entity(w.style),(0,T.default)(k.label).forEach(function(A){(0,C.default)(this,S),Object.hasOwnProperty.call(k.label,A)&&n(k.label,A,k.label[A],k)}.bind(this)),this.entity=k,k}else{this._positions_draw=null;var P=this,D={show:![],position:new l.CallbackProperty(function(){return P.getDrawPosition()},![]),label:r.style2Entity(w.style),attribute:w};return this.entity=this.dataSource.entities.add(D),this.entity.label.isTrueGraphic=!![],this.entity.mark311=this.drawTool.id,this.entity}}},{key:"style2Entity",value:function(w,S){return r.style2Entity(w,S.label)}}]),y}(s.DrawPoint);z.DrawLabel=u},541054:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawModel=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=c(e(187647)),o=c(e(721617)),h=c(e(131490)),l=e(841471),r=e(478288);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,v.default)(n),y;if(u){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var u=x(g);function g(d){var y;return(0,L.default)(this,g),d=d||{},y=u.call(this,d),y.type="model",y.attrClass=h,y}return(0,T.default)(g,[{key:"createFeature",value:function(y){this._positions_draw=null;var p=this,w={position:new m.CallbackProperty(function(){return p.getDrawPosition()},![]),model:h.style2Entity(y.style),attribute:y};return y.style&&y.style.label&&(w.label=o.style2Entity(y.style.label)),this.entity=this.dataSource.entities.add(w),this.entity.mark311=this.drawTool.id,this.entity}},{key:"style2Entity",value:function(y,p){return this.updateOrientation(y,p),y&&y.label&&o.style2Entity(y.label,p.label),h.style2Entity(y,p.model)}},{key:"updateAttrForDrawing",value:function(){this.updateOrientation(this.entity.attribute.style,this.entity)}},{key:"updateOrientation",value:function(y,p){var w=p.position.getValue(this.viewer.clock.currentTime);if(w!=null){var S=m.Math.toRadians(Number(y.heading||0)),R=m.Math.toRadians(Number(y.pitch||0)),B=m.Math.toRadians(Number(y.roll||0)),k=new m.HeadingPitchRoll(S,R,B);p.orientation=m.Transforms.headingPitchRollQuaternion(w,k)}}},{key:"setGraphicsRotate",value:function(y,p){if(y&&p){var w=p,S=y.rotateAmount,R=(0,r.transformCartesianToWGS84)(w.position.getValue(this.viewer.clock.currentTime));R.heading=0,R.pitch=0,R.roll=0,w.position=new m.CallbackProperty(function(){return(0,r.transformWGS84ToCartesian)(R)},![]),w.orientation=new m.CallbackProperty(function(){return S>0&&(R.heading+=S,R.heading===360&&(R.heading=0)),m.Transforms.headingPitchRollQuaternion((0,r.transformWGS84ToCartesian)(R),new m.HeadingPitchRoll(m.Math.toRadians(R.heading),m.Math.toRadians(R.pitch),m.Math.toRadians(R.roll)))},![])}}},{key:"setGraphicsFloat",value:function(y,p){if(y&&p){var w=p,S=y.minHeiht||5,R=y.maxHeiht||100,B=y.speed||.06,k=S,P=![],D=w.position.getValue(this.viewer.clock.currentTime);D.length?w.positions=new m.CallbackProperty(function(){var A=(0,r.transformCartesianArrayToWGS84Array)(D);for(var N in A){var I=A[N];(S>=R||S<=k)&&(P=!P),P?S+=B:S-=B,I.alt=S}return(0,r.transformWGS84ArrayToCartesianArray)(A)},![]):w.position=new m.CallbackProperty(function(){var A=(0,r.transformCartesianToWGS84)(D);return(S>=R||S<=k)&&(P=!P),P?S+=B:S-=B,A.alt=S,(0,r.transformWGS84ToCartesian)(A)},![])}}}]),g}(l.DrawPoint);z.DrawModel=i},431320:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPModel=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=x(e(187647)),o=x(e(131490)),h=e(104997),l=e(792672),r=e(870317),s=e(633843);function c(u){if(typeof O!="function")return null;var g=new O,d=new O;return(c=function(p){return p?d:g})(u)}function x(u,g){if(!g&&u&&u.__esModule)return u;if(u===null||E(u)!=="object"&&typeof u!="function")return{default:u};var d=c(g);if(d&&d.has(u))return d.get(u);var y={},p=Object.defineProperty&&M;for(var w in u)if(w!=="default"&&Object.prototype.hasOwnProperty.call(u,w)){var S=p?M(u,w):null;S&&(S.get||S.set)?Object.defineProperty(y,w,S):y[w]=u[w]}return y.default=u,d&&d.set(u,y),y}function a(u){var g=i();return function(){var y=(0,v.default)(u),p;if(g){var w=(0,v.default)(this).constructor;p=F(y,arguments,w)}else p=y.apply(this,arguments);return(0,f.default)(this,p)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var n=function(u){(0,C.default)(d,u);var g=a(d);function d(y){var p;return(0,L.default)(this,d),y=y||{},p=g.call(this,y),p.type="point",p.editClass=s.EditPModel,p.attrClass=o,p}return(0,T.default)(d,[{key:"createFeature",value:function(p){var w=this;this._positions_draw=m.Cartesian3.ZERO;var S=p.style,R=this.primitives.add(m.Model.fromGltf({url:S.modelUrl,modelMatrix:this.getModelMatrix(S),minimumPixelSize:m.defaultValue(S.minimumPixelSize,0),scale:m.defaultValue(S.scale,1)}));return R.readyPromise.then(function(){w.style2Entity(S,w.entity)}),R.attribute=p,this.entity=R,this.entity}},{key:"getModelMatrix",value:function(p,w){var S=new m.HeadingPitchRoll(m.Math.toRadians(p.heading||0),m.Math.toRadians(p.pitch||0),m.Math.toRadians(p.roll||0)),R=m.Transforms.eastNorthUpToFixedFrame,B=m.Transforms.headingPitchRollToFixedFrame(w||this._positions_draw,S,this.viewer.scene.globe.ellipsoid,R);return B}},{key:"style2Entity",value:function(p,w){return w.modelMatrix=this.getModelMatrix(p,w.position),o.style2Entity(p,w)}},{key:"bindEvent",value:function(){var p=this;this.getHandler().setInputAction(function(w){var S=(0,l.getCurrentMousePosition)(p.viewer.scene,w.endPosition,p.entity);S&&(p._positions_draw=S,p.entity.modelMatrix=p.getModelMatrix(p.entity.attribute.style)),p.tooltip.showAt(w.endPosition,r.message.draw.point.start)},m.ScreenSpaceEventType.MOUSE_MOVE),this.getHandler().setInputAction(function(w){var S=(0,l.getCurrentMousePosition)(p.viewer.scene,w.position,p.entity);S&&(p._positions_draw=S,p.disable())},m.ScreenSpaceEventType.LEFT_CLICK)}},{key:"finish",value:function(){this.entity.modelMatrix=this.getModelMatrix(this.entity.attribute.style),this.entity.editing=this.getEditClass(this.entity),this.entity.position=this.getDrawPosition()}}]),d}(h.DrawBase);z.DrawPModel=n},432325:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.PlottingType=z.DrawPlotting=void 0,z.generatePolygonHierarchy=R;var L=b(e(99245)),T=b(e(342579)),C=b(e(122777)),f=b(e(42762)),v=b(e(330044)),m=b(e(299085)),o=b(e(234009)),h=b(e(113288)),l=b(e(705146)),r=b(e(828866)),s=e(116407),c=e(115998),x=d(e(187647)),a=d(e(242116)),i=e(866488),n=e(659575),u=e(792672);function g(B){if(typeof O!="function")return null;var k=new O,P=new O;return(g=function(A){return A?P:k})(B)}function d(B,k){if(!k&&B&&B.__esModule)return B;if(B===null||E(B)!=="object"&&typeof B!="function")return{default:B};var P=g(k);if(P&&P.has(B))return P.get(B);var D={},A=Object.defineProperty&&M;for(var N in B)if(N!=="default"&&Object.prototype.hasOwnProperty.call(B,N)){var I=A?M(B,N):null;I&&(I.get||I.set)?Object.defineProperty(D,N,I):D[N]=B[N]}return D.default=B,P&&P.set(B,D),D}function y(B){var k=p();return function(){var D=(0,o.default)(B),A;if(k){var N=(0,o.default)(this).constructor;A=F(D,arguments,N)}else A=D.apply(this,arguments);return(0,m.default)(this,A)}}function p(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var w={STRAIGHT_ARROW:1,FINE_ARROW:"arrow",ATTACK_ARROW_PW:"arrow-attack",ATTACK_ARROW_YW:4,DOUBLE_ARROW:"arrow-pincerlike",CLOSED_CURVE:"surface-closed",GATHERING_PLACE:"assembly-site"};z.PlottingType=w,(0,h.default)(w);var S=function(B){(0,v.default)(P,B);var k=y(P);function P(D){var A;return(0,C.default)(this,P),D=D||{},A=k.call(this,D),A.type="plotting",A._minPointNum=2,A._maxPointNum=2,A.editClass=i.EditPlotting,A.attrClass=a,A}return(0,f.default)(P,[{key:"createFeature",value:function(A){var N;this._positions_draw=[],this.plottingType=A.plottingType||w.STRAIGHT_ARROW,this.plottingType===w.STRAIGHT_ARROW||this.plottingType===w.FINE_ARROW?(this._minPointNum=2,this._maxPointNum=2):this.plottingType===w.DOUBLE_ARROW?(this._minPointNum=3,this._maxPointNum=5):this.plottingType===w.GATHERING_PLACE?(this._minPointNum=2,this._maxPointNum=3):(this._minPointNum=3,this._maxPointNum=Number.POSITIVE_INFINITY);var I=this,G={polygon:a.style2Entity(A.style),attribute:A};return G.polyline={clampToGround:A==null||(N=A.style)===null||N===void 0?void 0:N.clampToGround,show:![]},this.entity=this.dataSource.entities.add(G),this.entity.polygon.hierarchy=new x.CallbackProperty(R(I,I),![]),this.bindOutline(this.entity),this.entity}},{key:"style2Entity",value:function(A,N){return a.style2Entity(A,N.polygon)}},{key:"bindOutline",value:function(A){A.polyline.show=new x.CallbackProperty(function(N){var I=a.getPositions(A,!![]);return I&&I.length<3?!![]:A.polygon.outline&&A.polygon.outline.getValue(N)&&A.polygon.outlineWidth&&A.polygon.outlineWidth.getValue(N)>1},![]),A.polyline.positions=new x.CallbackProperty(function(N){if(!A.polyline.show.getValue(N))return null;var I=a.getPositions(A,!![]);return I&&I.length<3?I:I==null?void 0:(0,l.default)(I).call(I,[I[0]])},![]),A.polyline.width=new x.CallbackProperty(function(){var N=a.getPositions(A,!![]);return N&&N.length<3?2:A.polygon.outlineWidth&&A.polygon.outlineWidth.getValue()},![]),A.polyline.zIndex=new x.CallbackProperty(function(){return A.polygon.zIndex&&A.polygon.zIndex.getValue()},![]),A.polyline.material=new x.ColorMaterialProperty(new x.CallbackProperty(function(N){var I=a.getPositions(A,!![]);return I&&I.length<3?A.polygon.material.color?A.polygon.material.color.getValue(N):x.Color.YELLOW:A.polygon.outlineColor.getValue(N)},![]))}},{key:"updateAttrForDrawing",value:function(){var A,N=(A=this.entity.attribute)===null||A===void 0?void 0:A.style;if(N!=null&&N.extrudedHeight){var I=(0,u.getMaxHeight)(this.getDrawPosition());this.entity.polygon.extrudedHeight=I+Number(N.extrudedHeight)}}},{key:"finish",value:function(){var A=this.entity;A.editing=this.getEditClass(A),A.editing.plottingType=this.plottingType,A._positions_draw=this.getDrawPosition();var N=this;A.polygon.hierarchy=R(A,N)(),A.editing.changePositionsToCallback(![])}},{key:"toGeoJSON",value:function(A){return this.attrClass.toGeoJSON(A)}}]),P}(n.DrawPolyline);z.DrawPlotting=S;function R(B,k){var P=this;return function(){var D=this;(0,T.default)(this,P);var A=B._positions_draw,N=new x.PolygonHierarchy;if(k.plottingType===w.STRAIGHT_ARROW||k.plottingType===w.FINE_ARROW){if(A instanceof Array&&A.length===2){var I=k.plottingType===w.FINE_ARROW?.15:.05;s.plotUtil.fineArrowDefualParam.tailWidthFactor=I;var G=(0,L.default)(A,2),W=G[0],Z=G[1];W=c.Utils.cartesianToLonLatHeight(W),Z=c.Utils.cartesianToLonLatHeight(Z);var H=s.plotUtil.algorithm.fineArrow(W,Z);N.positions=H}}else if(k.plottingType===w.ATTACK_ARROW_YW||k.plottingType===w.ATTACK_ARROW_PW){if(A instanceof Array&&A.length>=3){var U=k.plottingType===w.ATTACK_ARROW_PW?0:1;s.plotUtil.tailedAttackArrowDefualParam.swallowTailFactor=U;var V=(0,r.default)(A).call(A,function(st){return(0,T.default)(this,D),c.Utils.cartesianToLonLatHeight(st)}.bind(this)),Y=s.plotUtil.algorithm.tailedAttackArrow(V);N.positions=Y.polygonalPoint}A instanceof Array&&A.length===2&&(N.positions=A)}else if(k.plottingType===w.DOUBLE_ARROW){if(A instanceof Array&&A.length>=3){var $=(0,r.default)(A).call(A,function(st){return(0,T.default)(this,D),c.Utils.cartesianToLonLatHeight(st)}.bind(this)),K=s.plotUtil.algorithm.doubleArrow($);N.positions=K.polygonalPoint}A instanceof Array&&A.length===2&&(N.positions=A)}else if(k.plottingType===w.GATHERING_PLACE){if(A instanceof Array&&A.length>=2){var J=(0,r.default)(A).call(A,function(st){return(0,T.default)(this,D),c.Utils.cartesianToLonLatHeight(st)}.bind(this)),Q=s.plotUtil.algorithm.gatheringPlace(J);N.positions=Q}}else if(k.plottingType===w.CLOSED_CURVE&&A instanceof Array&&A.length>=2){var et=(0,r.default)(A).call(A,function(st){return(0,T.default)(this,D),c.Utils.cartesianToLonLatHeight(st)}.bind(this)),nt=s.plotUtil.algorithm.closedCurve(et);N.positions=nt}return N}.bind(this)}},841471:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPoint=void 0,z.defineReactive=p;var L=b(e(452909)),T=b(e(985208)),C=b(e(342579)),f=b(e(122777)),v=b(e(42762)),m=b(e(330044)),o=b(e(299085)),h=b(e(234009)),l=g(e(187647)),r=g(e(469973)),s=g(e(411257)),c=g(e(721617)),x=e(104997),a=e(792672),i=e(870317),n=e(656248);function u(S){if(typeof O!="function")return null;var R=new O,B=new O;return(u=function(P){return P?B:R})(S)}function g(S,R){if(!R&&S&&S.__esModule)return S;if(S===null||E(S)!=="object"&&typeof S!="function")return{default:S};var B=u(R);if(B&&B.has(S))return B.get(S);var k={},P=Object.defineProperty&&M;for(var D in S)if(D!=="default"&&Object.prototype.hasOwnProperty.call(S,D)){var A=P?M(S,D):null;A&&(A.get||A.set)?Object.defineProperty(k,D,A):k[D]=S[D]}return k.default=S,B&&B.set(S,k),k}function d(S){var R=y();return function(){var k=(0,h.default)(S),P;if(R){var D=(0,h.default)(this).constructor;P=F(k,arguments,D)}else P=k.apply(this,arguments);return(0,o.default)(this,P)}}function y(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}function p(S,R,B,k){Object.defineProperty(S,R,{enumerable:!![],configurable:!![],get:function(){return B},set:function(D){R in k&&(k[R]=D,B=D)}})}var w=function(S){(0,m.default)(B,S);var R=d(B);function B(k){var P;return(0,f.default)(this,B),k=k||{},P=R.call(this,k),P.type="point",P.editClass=n.EditPoint,P.attrClass=s,P}return(0,v.default)(B,[{key:"createFeature",value:function(P){var D=this;if(this.mode==="primitive"){var A=this.primitives._primitives,N=(0,L.default)(A).call(A,function(Z){return(0,C.default)(this,D),Z instanceof l.PointPrimitiveCollection}.bind(this));N=N||this.primitives.add(new l.PointPrimitiveCollection);var I=N.add(s.style2Entity(P.style));return I.attribute=P,I.point=s.style2Entity(P.style),I.point.outline=void 0,(0,T.default)(I.point).forEach(function(Z){(0,C.default)(this,D),Object.hasOwnProperty.call(I.point,Z)&&p(I.point,Z,I.point[Z],I)}.bind(this)),this.entity=I,I}else{this._positions_draw=null;var G=this,W={show:![],position:new l.CallbackProperty(function(){return G.getDrawPosition()},![]),point:s.style2Entity(P.style),attribute:P};return P.style&&P.style.label&&(W.label=c.style2Entity(P.style.label)),this.entity=this.dataSource.entities.add(W),this.entity.point.isTrueGraphic=!![],this.entity.mark311=this.drawTool.id,this.entity}}},{key:"handleVisibleDistance",value:function(P){var D=P.attribute.style;if(D!=null&&D.label){var A=l.Cartesian3.distance(this.viewer.camera.position,P.position.getValue(),new l.Cartesian3);D.label.distanceDisplayCondition_far=(A*1.3).toFixed()}var N=l.Cartesian3.distance(this.viewer.camera.position,P.position.getValue(),new l.Cartesian3);D.distanceDisplayCondition_far=(N*1.3).toFixed()}},{key:"style2Entity",value:function(P,D){return P!=null&&P.label&&c.style2Entity(P.label,D.label,this.viewer,D),s.style2Entity(P,D.point)}},{key:"bindEvent",value:function(){var P=this;this.getHandler().setInputAction(function(D){var A=(0,a.getCurrentMousePosition)(P.viewer.scene,D.endPosition,P.entity);A&&(P.mode==="primitive"?P.entity.position=A:P._positions_draw=A),P.tooltip.showAt(D.endPosition,i.message.draw.point.start),P.fire(r.DrawMouseMove,{drawtype:P.type,entity:P.entity,position:A})},l.ScreenSpaceEventType.MOUSE_MOVE),this.getHandler().setInputAction(function(D){var A=(0,a.getCurrentMousePosition)(P.viewer.scene,D.position,P.entity);A&&(P.mode==="primitive"?(P.entity.position=A,P._positions_draw=A,P.disable()):(P._positions_draw=A,P.disable()))},l.ScreenSpaceEventType.LEFT_CLICK)}},{key:"finish",value:function(){this.entity.show=!![],this.handleVisibleDistance(this.entity),this.entity.editing=this.getEditClass(this.entity),this.entity.position=this.getDrawPosition(),this.entity._positions_draw=this.getDrawPosition()}}]),B}(x.DrawBase);z.DrawPoint=w},476477:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPolygon=void 0;var L=b(e(705146)),T=b(e(122777)),C=b(e(42762)),f=b(e(330044)),v=b(e(299085)),m=b(e(234009)),o=a(e(187647)),h=a(e(496535)),l=e(781983),r=e(659575),s=e(792672),c=a(e(936161));function x(g){if(typeof O!="function")return null;var d=new O,y=new O;return(x=function(w){return w?y:d})(g)}function a(g,d){if(!d&&g&&g.__esModule)return g;if(g===null||E(g)!=="object"&&typeof g!="function")return{default:g};var y=x(d);if(y&&y.has(g))return y.get(g);var p={},w=Object.defineProperty&&M;for(var S in g)if(S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)){var R=w?M(g,S):null;R&&(R.get||R.set)?Object.defineProperty(p,S,R):p[S]=g[S]}return p.default=g,y&&y.set(g,p),p}function i(g){var d=n();return function(){var p=(0,m.default)(g),w;if(d){var S=(0,m.default)(this).constructor;w=F(p,arguments,S)}else w=p.apply(this,arguments);return(0,v.default)(this,w)}}function n(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var u=function(g){(0,f.default)(y,g);var d=i(y);function y(p){var w;return(0,T.default)(this,y),p=p||{},w=d.call(this,p),w.type="polygon",w._minPointNum=3,w._maxPointNum=9999,w.editClass=l.EditPolygon,w.attrClass=h,w}return(0,C.default)(y,[{key:"createFeature",value:function(w){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),w.config?(this._minPointNum=w.config.minPointNum||this._minPointNum_def,this._maxPointNum=w.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def);var S=this,R={id:w.attr.id||o.createGuid(),polygon:h.style2Entity(w.style),attribute:w};return R.polygon.hierarchy=new o.CallbackProperty(function(){var B=S.getDrawPosition();return new o.PolygonHierarchy(B)},![]),R.polyline={clampToGround:w.style.clampToGround,show:![]},this.entity=this.dataSource.entities.add(R),this.entity.mark311=this.drawTool.id,this.bindOutline(this.entity),this.entity}},{key:"loadJson",value:function(w){for(var S,R,B,k,P=[],D=h.style2Entity(w[0].properties.style),A=((S=(R=D.material).getValue)===null||S===void 0?void 0:S.call(R))||D.material,N=((B=A.getType)===null||B===void 0?void 0:B.call(A))||"Color",I=((k=A.getValue)===null||k===void 0?void 0:k.call(A))||{color:A},G=new o.MaterialAppearance({material:new o.Material({fabric:{type:N,uniforms:I}})}),W=0;W<w.length;W++){var Z=w[W],H=Z.properties,U=c.getPositionByGeoJSON(Z),V=h.style2Entity(H.style),Y=new o.GeometryInstance({geometry:new o.PolygonGeometry({polygonHierarchy:new o.PolygonHierarchy(U),extrudedHeight:V.extrudedHeight,height:V.height,perPositionHeight:V.perPositionHeight})});P.push(Y)}var $=this.primitives.add(new o.Primitive({geometryInstances:P,appearance:G}));return $}},{key:"getDrawPosition",value:function(){var w=this.entity.attribute.style;return w.height&&this.entity.polygon.perPositionHeight==![]&&(this._positions_draw=(0,s.setPositionsHeight)(this._positions_draw,w.height)),this._positions_draw}},{key:"style2Entity",value:function(w,S){return h.style2Entity(w,S.polygon)}},{key:"bindOutline",value:function(w){w.polyline.show=new o.CallbackProperty(function(S){var R=h.getPositions(w);return R&&R.length<3?!![]:!!(w.polygon.outline&&w.polygon.outline.getValue(S)&&w.polygon.outlineWidth&&w.polygon.outlineWidth.getValue(S)>1&&!w.polygon.extrudedHeight)},![]),w.polyline.clampToGround=new o.CallbackProperty(function(){var S,R;return(S=w.attribute)===null||S===void 0||(R=S.style)===null||R===void 0?void 0:R.clampToGround},![]),w.polyline.positions=new o.CallbackProperty(function(S){var R;if(((R=w.polyline.show)===null||R===void 0?void 0:R.getValue(S))===![])return null;var B=h.getPositions(w);return B&&B.length<3?B:(w.polygon.height&&(B=(0,s.setPositionsHeight)(B,w.polygon.height)),(0,L.default)(B).call(B,[B[0]]))},![]),w.polyline.width=new o.CallbackProperty(function(){var S=h.getPositions(w);return S&&S.length<3?2:parseInt(w.polygon.outlineWidth&&w.polygon.outlineWidth.getValue())},![]),w.polyline.zIndex=w.polygon.zIndex&&w.polygon.zIndex.getValue(),w.polyline.material=new o.ColorMaterialProperty(new o.CallbackProperty(function(S){var R,B=h.getPositions(w);return B&&B.length<3?w.polygon.material.color?w.polygon.material.color.getValue(S):o.Color.YELLOW:((R=w.polygon.outlineColor)===null||R===void 0?void 0:R.getValue(S))||o.Color.YELLOW},!![]))}},{key:"updateAttrForDrawing",value:function(){var w=this.entity.attribute.style,S=(0,s.getMaxHeight)(this.getDrawPosition());if(w.height&&this.entity.polygon.perPositionHeight==![]){S=w.height;for(var R=(0,s.setPositionsHeight)(this._positions_draw,w.height),B=0;B<this._positions_draw.length;B++)this._positions_draw[B]=R[B]}w.extrudedHeight&&(this.entity.polygon.extrudedHeight=S+Number(w.extrudedHeight||0))}},{key:"finish",value:function(){var w=this.entity;w._positions_draw=this.getDrawPosition(),w.editing=this.getEditClass(w),w.editing.changePositionsToCallback(![]),this._positions_draw=null}},{key:"toGeoJSON",value:function(w){var S;return(S=w.attribute)!==null&&S!==void 0&&S.plottingType?this.drawTool.drawCtrl.plotting.toGeoJSON(w):this.attrClass.toGeoJSON(w)}},{key:"jsonToEntity",value:function(w){var S,R=w.properties,B=0;R!=null&&(S=R.style)!==null&&S!==void 0&&S.height&&(B=R.style.height);var k=c.getPositionByGeoJSON(w,B);return this.attributeToEntity(R,k)}}]),y}(r.DrawPolyline);z.DrawPolygon=u},711171:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPolygonEx=void 0;var L=b(e(669033)),T=b(e(122777)),C=b(e(42762)),f=b(e(330044)),v=b(e(299085)),m=b(e(234009)),o=r(e(187647)),h=e(476477);function l(a){if(typeof O!="function")return null;var i=new O,n=new O;return(l=function(g){return g?n:i})(a)}function r(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||E(a)!=="object"&&typeof a!="function")return{default:a};var n=l(i);if(n&&n.has(a))return n.get(a);var u={},g=Object.defineProperty&&M;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?M(a,d):null;y&&(y.get||y.set)?Object.defineProperty(u,d,y):u[d]=a[d]}return u.default=a,n&&n.set(a,u),u}function s(a){var i=c();return function(){var u=(0,m.default)(a),g;if(i){var d=(0,m.default)(this).constructor;g=F(u,arguments,d)}else g=u.apply(this,arguments);return(0,v.default)(this,g)}}function c(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var x=function(a){(0,f.default)(n,a);var i=s(n);function n(u){var g;return(0,T.default)(this,n),u=u||{},g=i.call(this,u),g._positions_show=null,g}return(0,C.default)(n,[{key:"getDrawPosition",value:function(){return this._positions_show}},{key:"updateAttrForDrawing",value:function(){if(this._positions_draw==null||this._positions_draw.length<this._minPointNum){this._positions_show=this._positions_draw;return}this._positions_show=this.getShowPositions(this._positions_draw,this.entity.attribute)}},{key:"getShowPositions",value:function(g){return g}},{key:"finish",value:function(){var g,d=this.entity;d.editing=this.getEditClass(d),this._positions_draw.length>this._maxPointNum&&(0,L.default)(g=this._positions_draw).call(g,this._maxPointNum,this._positions_draw.length-this._maxPointNum),this.entity._positions_draw=this._positions_draw,this.entity._positions_show=this._positions_show,d.polygon.hierarchy=new o.CallbackProperty(function(){var y=d._positions_show;return new o.PolygonHierarchy(y)},![]),this._positions_draw=null,this._positions_show=null}},{key:"toGeoJSON",value:function(g){return this.attrClass.toGeoJSON(g,!![])}}]),n}(h.DrawPolygon);z.DrawPolygonEx=x},659575:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPolyline=void 0;var L=b(e(669033)),T=b(e(122777)),C=b(e(42762)),f=b(e(330044)),v=b(e(299085)),m=b(e(234009)),o=n(e(187647)),h=n(e(469973)),l=n(e(669471)),r=e(792672),s=e(870317),c=e(104997),x=e(111478),a=n(e(936161));function i(y){if(typeof O!="function")return null;var p=new O,w=new O;return(i=function(R){return R?w:p})(y)}function n(y,p){if(!p&&y&&y.__esModule)return y;if(y===null||E(y)!=="object"&&typeof y!="function")return{default:y};var w=i(p);if(w&&w.has(y))return w.get(y);var S={},R=Object.defineProperty&&M;for(var B in y)if(B!=="default"&&Object.prototype.hasOwnProperty.call(y,B)){var k=R?M(y,B):null;k&&(k.get||k.set)?Object.defineProperty(S,B,k):S[B]=y[B]}return S.default=y,w&&w.set(y,S),S}function u(y){var p=g();return function(){var S=(0,m.default)(y),R;if(p){var B=(0,m.default)(this).constructor;R=F(S,arguments,B)}else R=S.apply(this,arguments);return(0,v.default)(this,R)}}function g(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var d=function(y){(0,f.default)(w,y);var p=u(w);function w(S){var R;return(0,T.default)(this,w),S=S||{},R=p.call(this,S),R.type="polyline",R._minPointNum=2,R._maxPointNum=9999,R.editClass=x.EditPolyline,R.attrClass=l,R.geometryInstances=[],R.polylinePrimitive,R}return(0,C.default)(w,[{key:"createFeature",value:function(R){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),R.config?(this._minPointNum=R.config.minPointNum||this._minPointNum_def,this._maxPointNum=R.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def);var B=this,k={polyline:l.style2Entity(R.style),attribute:R};return k.polyline.positions=new o.CallbackProperty(function(){return B.getDrawPosition()},![]),this.entity=this.dataSource.entities.add(k),this.entity._positions_draw=this._positions_draw,this.entity}},{key:"loadJson",value:function(R){for(var B,k,P,D,A=[],N=l.style2Entity(R[0].properties.style),I=((B=(k=N.material).getValue)===null||B===void 0?void 0:B.call(k))||N.material,G=((P=I.getType)===null||P===void 0?void 0:P.call(I))||"Color",W=((D=I.getValue)===null||D===void 0?void 0:D.call(I))||{color:I},Z=new o.PolylineMaterialAppearance({material:new o.Material({fabric:{type:G,uniforms:W}})}),H=0;H<R.length;H++){var U=R[H],V=U.properties,Y=a.getPositionByGeoJSON(U),$=l.style2Entity(V.style),K=new o.GeometryInstance({geometry:new o.PolylineGeometry({positions:Y,width:$.width||2,vertexFormat:o.PolylineMaterialAppearance.VERTEX_FORMAT})});A.push(K)}var J=this.primitives.add(new o.Primitive({geometryInstances:A,appearance:Z}));return J}},{key:"style2Entity",value:function(R,B){return l.style2Entity(R,B.polyline)}},{key:"bindEvent",value:function(){var R=this,B=![];this.getHandler().setInputAction(function(k){var P=(0,r.getCurrentMousePosition)(R.viewer.scene,k.position,R.entity);if(P){if(B&&R._positions_draw.pop(),B=![],R.entity.attribute&&R.entity.attribute.config&&R.entity.attribute.config.addHeight&&(P=(0,r.addPositionsHeight)(P,R.entity.attribute.config.addHeight)),R.entity.attribute&&R.entity.attribute.config&&R.entity.attribute.config.isSameHeight&&R._positions_draw.length>=1){var D=o.Cartographic.fromCartesian(R._positions_draw[0]);P=(0,r.setPositionsHeight)(P,D.height)}R._positions_draw.push(P),R.entity.attribute&&R.entity.attribute.config&&R.entity.attribute.config.isBox&&R._positions_draw.length===4&&(R._positions_draw=(0,a.computeRectanglePoints)(R._positions_draw[0],P)),R.updateAttrForDrawing(),R.fire(h.DrawAddPoint,{drawtype:R.type,entity:R.entity,position:P,positions:R._positions_draw}),R._positions_draw.length>=R._maxPointNum&&R.disable()}},o.ScreenSpaceEventType.LEFT_CLICK),this.getHandler().setInputAction(function(k){R._positions_draw.pop();var P=(0,r.getCurrentMousePosition)(R.viewer.scene,k.position,R.entity);P&&(B&&R._positions_draw.pop(),B=!![],R.fire(h.DrawRemovePoint,{drawtype:R.type,entity:R.entity,position:P,positions:R._positions_draw}),R._positions_draw.push(P),R.updateAttrForDrawing())},o.ScreenSpaceEventType.RIGHT_CLICK),this.getHandler().setInputAction(function(k){var P;R._positions_draw.length<=1?R.tooltip.showAt(k.endPosition,s.message.draw.polyline.start):R._positions_draw.length<R._minPointNum?R.tooltip.showAt(k.endPosition,s.message.draw.polyline.cont):R._positions_draw.length>=R._maxPointNum?R.tooltip.showAt(k.endPosition,s.message.draw.polyline.end2):R.tooltip.showAt(k.endPosition,s.message.draw.polyline.end);var D=(0,r.getCurrentMousePosition)(R.viewer.scene,k.endPosition,R.entity),A=(P=R.entity.attribute.config)===null||P===void 0?void 0:P.isContour;if(A&&R._positions_draw.length===2){var N=R.entity.wall.maximumHeights.getValue(),I=R.entity.wall.minimumHeights.getValue();R.entity.wall.maximumHeights=[N[0],N[0]],R.entity.wall.minimumHeights=[I[0],I[0]]}if(D){var G,W,Z,H;if(B){var U,V;if((U=R.entity.attribute)!==null&&U!==void 0&&(V=U.config)!==null&&V!==void 0&&V.isBox&&R._positions_draw.length===4){var Y;(0,L.default)(Y=R._positions_draw).call(Y,2,1)}else R._positions_draw.pop()}B=!![],(G=R.entity.attribute)!==null&&G!==void 0&&(W=G.config)!==null&&W!==void 0&&W.isBox&&R._positions_draw.length===3?R._positions_draw=(0,a.computeRectanglePoints)(R._positions_draw[0],D):R._positions_draw.push(D),(Z=R.entity.attribute)!==null&&Z!==void 0&&(H=Z.config)!==null&&H!==void 0&&H.isBox&&R._positions_draw.length===2&&(R._positions_draw=(0,a.computeRectanglePoints)(R._positions_draw[0],R._positions_draw[1])),R.updateAttrForDrawing(),R.fire(h.DrawMouseMove,{drawtype:R.type,entity:R.entity,position:D,positions:R._positions_draw})}},o.ScreenSpaceEventType.MOUSE_MOVE),this.getHandler().setInputAction(function(){R._positions_draw.pop(),R.endDraw()},o.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"endDraw",value:function(){if(!this._enabled)return this;this._positions_draw.length<this._minPointNum||(this.viewer.paid&&this._positions_draw.pop(),this.updateAttrForDrawing(),this.disable())}},{key:"finish",value:function(){var R=this.entity;R._positions_draw=this.getDrawPosition(),R.editing=this.getEditClass(R),R.editing.changePositionsToCallback(![]),this._positions_draw=null}}]),w}(c.DrawBase);z.DrawPolyline=d},30625:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPolylineVolume=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=s(e(187647)),o=s(e(161775)),h=e(659575),l=e(125018);function r(i){if(typeof O!="function")return null;var n=new O,u=new O;return(r=function(d){return d?u:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=r(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&M;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?M(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}function c(i){var n=x();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,C.default)(u,i);var n=c(u);function u(g){var d;return(0,L.default)(this,u),g=g||{},d=n.call(this,g),d.type="polylineVolume",d._minPointNum=2,d._maxPointNum=9999,d.editClass=l.EditPolylineVolume,d.attrClass=o,d}return(0,T.default)(u,[{key:"createFeature",value:function(d){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),d.config?(this._minPointNum=d.config.minPointNum||this._minPointNum_def,this._maxPointNum=d.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def);var y=this,p={polylineVolume:o.style2Entity(d.style),attribute:d};return p.polylineVolume.positions=new m.CallbackProperty(function(){return y.getDrawPosition()},![]),this.entity=this.dataSource.entities.add(p),this.entity.mark311=this.drawTool.id,this.entity._positions_draw=this._positions_draw,this.entity}},{key:"style2Entity",value:function(d,y){return o.style2Entity(d,y.polylineVolume)}},{key:"updateAttrForDrawing",value:function(){}},{key:"finish",value:function(){var d=this.entity;d.editing=this.getEditClass(d),d._positions_draw=this.getDrawPosition(),d.polylineVolume.positions=new m.CallbackProperty(function(){return d._positions_draw},![])}}]),u}(h.DrawPolyline);z.DrawPolylineVolume=a},594688:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawRectangle=void 0;var L=b(e(53267)),T=b(e(122777)),C=b(e(42762)),f=b(e(330044)),v=b(e(299085)),m=b(e(234009)),o=x(e(187647)),h=x(e(592288)),l=e(659575),r=e(792672),s=e(191537);function c(u){if(typeof O!="function")return null;var g=new O,d=new O;return(c=function(p){return p?d:g})(u)}function x(u,g){if(!g&&u&&u.__esModule)return u;if(u===null||E(u)!=="object"&&typeof u!="function")return{default:u};var d=c(g);if(d&&d.has(u))return d.get(u);var y={},p=Object.defineProperty&&M;for(var w in u)if(w!=="default"&&Object.prototype.hasOwnProperty.call(u,w)){var S=p?M(u,w):null;S&&(S.get||S.set)?Object.defineProperty(y,w,S):y[w]=u[w]}return y.default=u,d&&d.set(u,y),y}function a(u){var g=i();return function(){var y=(0,m.default)(u),p;if(g){var w=(0,m.default)(this).constructor;p=F(y,arguments,w)}else p=y.apply(this,arguments);return(0,v.default)(this,p)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var n=function(u){(0,f.default)(d,u);var g=a(d);function d(y){var p;return(0,T.default)(this,d),y=y||{},p=g.call(this,y),p.type="rectangle",p._minPointNum=2,p._maxPointNum=2,p.editClass=s.EditRectangle,p.attrClass=h,p}return(0,C.default)(d,[{key:"getRectangle",value:function(){var p=this.getDrawPosition();return p.length<2?null:o.Rectangle.fromCartesianArray(p)}},{key:"createFeature",value:function(p){this._positions_draw=[];var w=this,S={rectangle:h.style2Entity(p.style),attribute:p};return S.rectangle.coordinates=new o.CallbackProperty(function(){return w.getRectangle()},![]),S.polyline={clampToGround:p.style.clampToGround,arcType:o.ArcType.RHUMB,show:![]},this.entity=this.dataSource.entities.add(S),this.entity.mark311=this.drawTool.id,this.entity._draw_positions=this._positions_draw,this.bindOutline(this.entity),this.entity}},{key:"style2Entity",value:function(p,w){return h.style2Entity(p,w.rectangle)}},{key:"bindOutline",value:function(p){p.polyline.show=new o.CallbackProperty(function(w){var S,R;return((S=p.rectangle.outline)===null||S===void 0?void 0:S.getValue(w))&&((R=p.rectangle.outlineWidth)===null||R===void 0?void 0:R.getValue(w))>1},![]),p.polyline.clampToGround=new o.CallbackProperty(function(){return p.attribute.style.clampToGround},![]),p.polyline.positions=new o.CallbackProperty(function(w){var S;if(((S=p.polyline.show)===null||S===void 0?void 0:S.getValue(w))===![])return null;var R=p._positions_draw;if(!R)return null;var B=p.rectangle.height?p.rectangle.height.getValue(w):0,k=o.Rectangle.fromCartesianArray(R),P=o.Cartesian3.fromRadians(k.west,k.south,B),D=o.Cartesian3.fromRadians(k.east,k.south,B),A=o.Cartesian3.fromRadians(k.east,k.north,B),N=o.Cartesian3.fromRadians(k.west,k.north,B),I=p.rectangle.rotation;if(I=o.Math.toDegrees(I),o.defined(I)&&I!==0){var G=o.Math.toRadians(I),W=new o.RectangleOutlineGeometry({ellipsoid:o.Ellipsoid.WGS84,rectangle:k,height:B,rotation:G}),Z=o.RectangleOutlineGeometry.createGeometry(W),H=Z.indices.length/2,U=(0,L.default)(Z.attributes.position),V={x:U[0],y:U[1],z:U[2]},Y={x:U[3],y:U[4],z:U[5]},$={x:U[6],y:U[7],z:U[8]},K={x:U[9],y:U[10],z:U[11]},J={x:U[12],y:U[13],z:U[14]};if(H===4)P=V,D=Y,A=$,N=K;else if(H===6)P=V,D=Y,A=K,N=J;else{for(var Q=[],et=0;et<H;et++){var nt={x:U[3*et],y:U[3*et+1],z:U[3*et+2]};Q[et]=nt}return Q.push(Q[0]),Q}}return[P,D,A,N,P]},![]),p.polyline.width=new o.CallbackProperty(function(w){var S;return(S=p.rectangle.outlineWidth)===null||S===void 0?void 0:S.getValue(w)},![]),p.polyline.zIndex=new o.CallbackProperty(function(){var w;return(w=p.rectangle.zIndex)===null||w===void 0?void 0:w.getValue()},![]),p.polyline.material=new o.ColorMaterialProperty(new o.CallbackProperty(function(w){var S;return(S=p.rectangle.outlineColor)===null||S===void 0?void 0:S.getValue(w)},![]))}},{key:"updateAttrForDrawing",value:function(){var p=this.entity.attribute.style;if(!p.clampToGround){var w=(0,r.getMaxHeight)(this.getDrawPosition());w!==0&&(this.entity.rectangle.height=w,p.height=w,p.extrudedHeight&&(this.entity.rectangle.extrudedHeight=w+Number(p.extrudedHeight)))}}},{key:"finish",value:function(){var p=this.entity;p._positions_draw=this._positions_draw,p.editing=this.getEditClass(p),p.rectangle.coordinates=new o.CallbackProperty(function(){return p._positions_draw.length<2?null:o.Rectangle.fromCartesianArray(p._positions_draw)},![])}}]),d}(l.DrawPolyline);z.DrawRectangle=n},974385:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawVideoProjection=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=c(e(187647)),o=c(e(789188)),h=c(e(721617)),l=e(841471),r=e(528769);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,v.default)(n),y;if(u){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var u=x(g);function g(d){var y;return(0,L.default)(this,g),d=d||{},y=u.call(this,d),y.type="videoProjection",y.editClass=r.EditVideoProjection,y.attrClass=o,y}return(0,T.default)(g,[{key:"createFeature",value:function(y){this._positions_draw=null;var p=this,w={show:![],position:new m.CallbackProperty(function(){return p.getDrawPosition()},![]),attribute:y};return y.style&&y.style.label&&(w.label=h.style2Entity(y.style.label)),this.entity=this.dataSource.entities.add(w),this.entity.billboard=o.style2Entity(y.style,this.entity.billboard,this.viewer,this.entity),this.entity.label.isTrueGraphic=!![],this.updateAttrForDrawing(),this.entity}},{key:"style2Entity",value:function(y,p){return y&&y.label&&h.style2Entity(y.label,p.label),o.style2Entity(y,p.billboard,this.viewer,p)}},{key:"updateAttrForDrawing",value:function(){}}]),g}(l.DrawPoint);z.DrawVideoProjection=i},708008:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawWall=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=s(e(187647)),o=s(e(688343)),h=e(659575),l=e(592386);function r(i){if(typeof O!="function")return null;var n=new O,u=new O;return(r=function(d){return d?u:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=r(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&M;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?M(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}function c(i){var n=x();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,C.default)(u,i);var n=c(u);function u(g){var d;return(0,L.default)(this,u),g=g||{},d=n.call(this,g),d.type="wall",d._minPointNum=2,d._maxPointNum=9999,d.editClass=l.EditWall,d.attrClass=o,d.maximumHeights=null,d.minimumHeights=null,d}return(0,T.default)(u,[{key:"createFeature",value:function(d){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),d.config?(this._minPointNum=d.config.minPointNum||this._minPointNum_def,this._maxPointNum=d.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def),this.maximumHeights=[],this.minimumHeights=[];var y=this,p={wall:o.style2Entity(d.style),attribute:d};return p.wall.positions=new m.CallbackProperty(function(){return y.getDrawPosition()},![]),p.wall.minimumHeights=new m.CallbackProperty(function(){return y.getMinimumHeights()},![]),p.wall.maximumHeights=new m.CallbackProperty(function(){return y.getMaximumHeights()},![]),this.entity=this.dataSource.entities.add(p),this.entity.mark311=this.drawTool.id,this.entity}},{key:"style2Entity",value:function(d,y){return o.style2Entity(d,y.wall)}},{key:"getMaximumHeights",value:function(){return this.maximumHeights}},{key:"getMinimumHeights",value:function(){return this.minimumHeights}},{key:"updateAttrForDrawing",value:function(){var d=this.entity.attribute.style,y=this.getDrawPosition(),p=y.length;this.maximumHeights=new Array(p),this.minimumHeights=new Array(p);for(var w=0;w<p;w++){var S=m.Cartographic.fromCartesian(y[w]).height;this.minimumHeights[w]=S,this.maximumHeights[w]=S+Number(d.extrudedHeight)}}},{key:"finish",value:function(){var d=this.entity;d.editing=this.getEditClass(d),d._positions_draw=this.getDrawPosition(),d.wall.positions=new m.CallbackProperty(function(){return d._positions_draw},![]),d._minimumHeights=this.getMinimumHeights(),d.wall.minimumHeights=new m.CallbackProperty(function(){return d._minimumHeights},![]),d._maximumHeights=this.getMaximumHeights(),d.wall.maximumHeights=new m.CallbackProperty(function(){return d._maximumHeights},![])}}]),u}(h.DrawPolyline);z.DrawWall=a},608326:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.toGeoJSON=z.style2Entity=z.getPositions=z.getCoordinates=void 0;var b=M(e(520314)),L=M(e(342579)),T=m(e(187647)),C=e(936161),f=void 0;function v(s){if(typeof F!="function")return null;var c=new F,x=new F;return(v=function(i){return i?x:c})(s)}function m(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||E(s)!=="object"&&typeof s!="function")return{default:s};var x=v(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&O;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var u=i?O(s,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}var o=function(c,x){(0,L.default)(this,f),c=c||{},x==null&&(x={});var a={scaleX:25,scaleY:12,maximumSizeX:25,maximumSizeY:12,maximumSizeZ:15,renderSlice:!![],slice:.36,brightness:1};for(var i in a)Object.hasOwnProperty.call(a,i)&&(c[i]=c[i]||a[i]);return x.scale=new T.Cartesian2(c.scaleX,c.scaleY),x.maximumSize=new T.Cartesian3(c.maximumSizeX,c.maximumSizeY,c.maximumSizeZ),x.slice=c.renderSlice?(0,b.default)(c):-1,x.brightness=c.brightness,x}.bind(void 0);z.style2Entity=o;var h=function(c){return(0,L.default)(this,f),[c.position]}.bind(void 0);z.getPositions=h;var l=function(c){(0,L.default)(this,f);var x=h(c);return(0,C.cartesians2lonlats)(x)}.bind(void 0);z.getCoordinates=l;var r=function(c){(0,L.default)(this,f);var x=l(c);return{type:"Feature",properties:c.attribute||{},geometry:{type:"Point",coordinates:x[0]}}}.bind(void 0);z.toGeoJSON=r},242116:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.toGeoJSON=z.style2Entity=z.getPositions=z.getCoordinates=void 0;var b=M(e(342579)),L=o(e(187647)),T=o(e(936161)),C=e(792672),f=e(984100),v=void 0;function m(c){if(typeof F!="function")return null;var x=new F,a=new F;return(m=function(n){return n?a:x})(c)}function o(c,x){if(!x&&c&&c.__esModule)return c;if(c===null||E(c)!=="object"&&typeof c!="function")return{default:c};var a=m(x);if(a&&a.has(c))return a.get(c);var i={},n=Object.defineProperty&&O;for(var u in c)if(u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)){var g=n?O(c,u):null;g&&(g.get||g.set)?Object.defineProperty(i,u,g):i[u]=c[u]}return i.default=c,a&&a.set(c,i),i}var h=function(x,a){(0,b.default)(this,v),x=x||{};var i;a==null?a={}:i=!![],x.clampToGround&&(Object.hasOwnProperty.call(x,"height")&&delete x.height,Object.hasOwnProperty.call(x,"extrudedHeight")&&delete x.extrudedHeight);for(var n in x){var u=x[n];switch(n){default:a[n]=u;break;case"color":case"opacity":case"outlineOpacity":case"grid_lineCount":case"grid_lineThickness":case"grid_cellAlpha":case"checkerboard_repeat":case"checkerboard_oddcolor":case"stripe_oddcolor":case"stripe_repeat":case"animationDuration":case"animationImage":case"animationRepeatX":case"animationRepeatY":case"animationAxisY":case"animationGradient":case"animationCount":case"randomColor":break;case"outlineColor":a.outlineColor=new L.Color.fromCssColorString(u||x.color||"#FFFF00").withAlpha(L.defaultValue(x.outlineOpacity,L.defaultValue(x.opacity,1)));break;case"extrudedHeight":{var g=0;if(a.hierarchy){var d=l({polygon:a});g=(0,C.getMaxHeight)(d)}a.extrudedHeight=Number(u)+g;break}case"clampToGround":a.perPositionHeight=!u;break;case"stRotation":a.stRotation=L.Math.toRadians(u);break}}if(x.hasOwnProperty("clampToGround")&&i){var y,p;a.hierarchy=(y=a.hierarchy)===null||y===void 0||(p=y.getValue)===null||p===void 0?void 0:p.call(y),x.clampToGround?(a.height=a.extrudedHeight=void 0,a.perPositionHeight=![]):x.clampToGround===![]&&(x.perPositionHeight?a.perPositionHeight=!![]:(a.height=x.height||0,a.perPositionHeight=![]))}return(0,f.setFillMaterial)(a,x),a}.bind(void 0);z.style2Entity=h;var l=function(x,a){var i;if((0,b.default)(this,v),!a&&((i=x._positions_draw)===null||i===void 0?void 0:i.length)>0)return x._positions_draw;var n=x.polygon.hierarchy.getValue();return n instanceof L.PolygonHierarchy?n.positions:n}.bind(void 0);z.getPositions=l;var r=function(x){(0,b.default)(this,v);var a=l(x);return T.cartesians2lonlats(a)}.bind(void 0);z.getCoordinates=r;var s=function(x){(0,b.default)(this,v);var a=r(x),i={type:"Feature",properties:x.attribute||{},geometry:{type:"MultiPoint",coordinates:a}};return i}.bind(void 0);z.toGeoJSON=s},789188:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.toGeoJSON=z.style2Entity=z.getPositions=z.getCoordinates=void 0;var b=M(e(342579)),L=m(e(187647)),T=e(936161),C=e(580823),f=void 0;function v(x){if(typeof F!="function")return null;var a=new F,i=new F;return(v=function(u){return u?i:a})(x)}function m(x,a){if(!a&&x&&x.__esModule)return x;if(x===null||E(x)!=="object"&&typeof x!="function")return{default:x};var i=v(a);if(i&&i.has(x))return i.get(x);var n={},u=Object.defineProperty&&O;for(var g in x)if(g!=="default"&&Object.prototype.hasOwnProperty.call(x,g)){var d=u?O(x,g):null;d&&(d.get||d.set)?Object.defineProperty(n,g,d):n[g]=x[g]}return n.default=x,i&&i.set(x,n),n}var o=function(a,i,n,u){(0,b.default)(this,f),a=a||{},i==null&&(i={scale:1,horizontalOrigin:L.HorizontalOrigin.CENTER,verticalOrigin:L.VerticalOrigin.BOTTOM});var g=function(p){var w=this,S,R,B=a[p];switch(p){default:i[p]=B;break;case"image":if(a.scale=a.scale||1,i.scale=a.scale,typeof B=="string")if(B.match(/^(data|http)/))i[p]=B;else if(B.match(/Assets/))i[p]=B;else try{var k=document.createElement("canvas"),P=k.getContext("2d"),D=new Image;D.src=e(308890)("./".concat(B)),i.scale=1,D.onload=function(){(0,b.default)(this,w);var A,N,I=a.scale*(n?.resolutionScale||window.devicePixelRatio);k.width=A=D.width*I,k.height=N=D.height*I,D.width>0?P.drawImage(D,0,0,A,N):P.drawImage(D,0,0),u.billboard[p]=k}.bind(this)}catch{i[p]=e(933862)}else i[p]=B;break;case"scale":case"scaleByDistance_near":case"scaleByDistance_nearValue":case"scaleByDistance_far":case"scaleByDistance_farValue":case"distanceDisplayCondition_far":case"distanceDisplayCondition_near":break;case"color":case"opacity":i.color=new L.Color.fromCssColorString("#FFFFFF").withAlpha(L.defaultValue(a.opacity,1));break;case"rotation":i.rotation=L.Math.toRadians(B);break;case"scaleByDistance":B?i.scaleByDistance=new L.NearFarScalar(Number(L.defaultValue(a.scaleByDistance_near,1e3)),Number(L.defaultValue(a.scaleByDistance_nearValue,1)),Number(L.defaultValue(a.scaleByDistance_far,1e6)),Number(L.defaultValue(a.scaleByDistance_farValue,.1))):i.scaleByDistance=null;break;case"distanceDisplayCondition":B?i.distanceDisplayCondition=new L.DistanceDisplayCondition(Number(L.defaultValue(a.distanceDisplayCondition_near,0)),Number(L.defaultValue(a.distanceDisplayCondition_far,1e5))):i.distanceDisplayCondition=null;break;case"clampToGround":B?i.heightReference=L.HeightReference.CLAMP_TO_GROUND:i.heightReference=L.HeightReference.NONE;break;case"heightReference":switch(B){case"NONE":i.heightReference=L.HeightReference.NONE;break;case"CLAMP_TO_GROUND":i.heightReference=L.HeightReference.CLAMP_TO_GROUND;break;case"RELATIVE_TO_GROUND":i.heightReference=L.HeightReference.RELATIVE_TO_GROUND;break;default:i.heightReference=B;break}break;case"horizontalOrigin":switch(B){case"CENTER":i.horizontalOrigin=L.HorizontalOrigin.CENTER;break;case"LEFT":i.horizontalOrigin=L.HorizontalOrigin.LEFT;break;case"RIGHT":i.horizontalOrigin=L.HorizontalOrigin.RIGHT;break;default:i.horizontalOrigin=B;break}break;case"verticalOrigin":switch(B){case"CENTER":i.verticalOrigin=L.VerticalOrigin.CENTER;break;case"TOP":i.verticalOrigin=L.VerticalOrigin.TOP;break;case"BOTTOM":i.verticalOrigin=L.VerticalOrigin.BOTTOM;break;default:i.verticalOrigin=B;break}break;case"visibleDepth":a.visibleDepth=(S=a.visibleDepth)!==null&&S!==void 0?S:50,i.disableDepthTestDistance=a.visibleDepth/100*((R=a.distanceDisplayCondition_far)!==null&&R!==void 0?R:2e3);break;case"bounce":B&&u?!u.isbounce&&h(n,u):!B&&u&&u.isbounce==!![]&&l(n,u);break}};for(var d in a)g(d);return i}.bind(void 0);z.style2Entity=o;var h=function(a,i){(0,b.default)(this,f);var n=(0,T.cartesian2lonlat)(i.position.getValue())[2],u={maxHeight:n+50,minHeight:n,heightDelta:.5},g=u.minHeight,d=u.maxHeight,y=u.heightDelta,p=(0,T.cartesian2lonlat)(i.position.getValue())[0],w=(0,T.cartesian2lonlat)(i.position.getValue())[1];a.scene.preUpdate.addEventListener(function(){n+=y,i.position=L.Cartesian3.fromDegrees(p,w,n);var S=i.position.getValue(),R=L.Cartographic.fromCartesian(S,L.Ellipsoid.WGS84);(R.height>=d||R.height<=g)&&(y*=-1)}),i.isbounce=!![]}.bind(void 0),l=function(a,i){(0,b.default)(this,f),a.scene.preUpdate.addEventListener(function(){i.position=i._positions_draw}),i.isbounce=![]}.bind(void 0),r=function(a){return(0,b.default)(this,f),[a.position.getValue((0,C.currentTime)())]}.bind(void 0);z.getPositions=r;var s=function(a){(0,b.default)(this,f);var i=r(a);return(0,T.cartesians2lonlats)(i)}.bind(void 0);z.getCoordinates=s;var c=function(a){(0,b.default)(this,f);var i=s(a);return{type:"Feature",properties:a.attribute||{},geometry:{type:"Point",coordinates:i[0]}}}.bind(void 0);z.toGeoJSON=c},469973:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.EditStop=z.EditStart=z.EditRemovePoint=z.EditMovePoint=z.DrawStart=z.DrawRemovePoint=z.DrawMouseMove=z.DrawCreated=z.DrawAddPoint=void 0;var e="draw-start";z.DrawStart=e;var E="draw-add-point";z.DrawAddPoint=E;var F="draw-remove-lastpoint";z.DrawRemovePoint=F;var O="draw-mouse-move";z.DrawMouseMove=O;var M="draw-created";z.DrawCreated=M;var b="edit-start";z.EditStart=b;var L="edit-move-point";z.EditMovePoint=L;var T="edit-remove-point";z.EditRemovePoint=T;var C="edit-stop";z.EditStop=C},116407:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.plotUtil=void 0;var b=M(e(342579)),L=M(e(705146)),T=M(e(520314)),C=M(e(22466)),f=M(e(304083)),v=o(e(187647));function m(l){if(typeof F!="function")return null;var r=new F,s=new F;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||E(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&O;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?O(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var h=function(l){var r={version:"1.0.0"};r.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},r.PlotUtils={},r.PlotUtils.distance=function(i,n){return Math.sqrt(Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2))},r.PlotUtils.wholeDistance=function(i){for(var n=0,u=0;u<i.length-1;u++)n+=r.PlotUtils.distance(i[u],i[u+1]);return n},r.PlotUtils.getBaseLength=function(i){return Math.pow(r.PlotUtils.wholeDistance(i),.99)},r.PlotUtils.mid=function(i,n){return[(i[0]+n[0])/2,(i[1]+n[1])/2]},r.PlotUtils.getCircleCenterOfThreePoints=function(i,n,u){var g=[(i[0]+n[0])/2,(i[1]+n[1])/2],d=[g[0]-i[1]+n[1],g[1]+i[0]-n[0]],y=[(i[0]+u[0])/2,(i[1]+u[1])/2],p=[y[0]-i[1]+u[1],y[1]+i[0]-u[0]];return r.PlotUtils.getIntersectPoint(g,d,y,p)},r.PlotUtils.getIntersectPoint=function(i,n,u,g){if(i[1]==n[1]){var d=(g[0]-u[0])/(g[1]-u[1]),y=d*(i[1]-u[1])+u[0],p=i[1];return[y,p]}if(u[1]==g[1]){var w=(n[0]-i[0])/(n[1]-i[1]);return y=w*(u[1]-i[1])+i[0],p=u[1],[y,p]}return w=(n[0]-i[0])/(n[1]-i[1]),d=(g[0]-u[0])/(g[1]-u[1]),p=(w*i[1]-i[0]-d*u[1]+u[0])/(w-d),y=w*p-w*i[1]+i[0],[y,p]},r.PlotUtils.getAzimuth=function(i,n){var u,g=Math.asin(Math.abs(n[1]-i[1])/r.PlotUtils.distance(i,n));return n[1]>=i[1]&&n[0]>=i[0]?u=g+Math.PI:n[1]>=i[1]&&n[0]<i[0]?u=r.Constants.TWO_PI-g:n[1]<i[1]&&n[0]<i[0]?u=g:n[1]<i[1]&&n[0]>=i[0]&&(u=Math.PI-g),u},r.PlotUtils.getAngleOfThreePoints=function(i,n,u){var g=r.PlotUtils.getAzimuth(n,i)-r.PlotUtils.getAzimuth(n,u);return 0>g?g+r.Constants.TWO_PI:g},r.PlotUtils.isClockWise=function(i,n,u){return(u[1]-i[1])*(n[0]-i[0])>(n[1]-i[1])*(u[0]-i[0])},r.PlotUtils.getPointOnLine=function(i,n,u){var g=n[0]+i*(u[0]-n[0]),d=n[1]+i*(u[1]-n[1]);return[g,d]},r.PlotUtils.getCubicValue=function(i,n,u,g,d){i=Math.max(Math.min(i,1),0);var y=1-i,p=i*i,w=p*i,S=y*y,R=S*y,B=R*n[0]+3*S*i*u[0]+3*y*p*g[0]+w*d[0],k=R*n[1]+3*S*i*u[1]+3*y*p*g[1]+w*d[1];return[B,k]},r.PlotUtils.getThirdPoint=function(i,n,u,g,d){var y=r.PlotUtils.getAzimuth(i,n),p=d?y+u:y-u,w=g*Math.cos(p),S=g*Math.sin(p);return[n[0]+w,n[1]+S]},r.PlotUtils.getArcPoints=function(i,n,u,g){var d,y,p=[],w=g-u;w=0>w?w+r.Constants.TWO_PI:w;for(var S=0;S<=r.Constants.FITTING_COUNT;S++){var R=u+w*S/r.Constants.FITTING_COUNT;d=i[0]+n*Math.cos(R),y=i[1]+n*Math.sin(R),p.push([d,y])}return p},r.PlotUtils.getBisectorNormals=function(i,n,u,g){var d=r.PlotUtils.getNormal(n,u,g),y=Math.sqrt(d[0]*d[0]+d[1]*d[1]),p=d[0]/y,w=d[1]/y,S=r.PlotUtils.distance(n,u),R=r.PlotUtils.distance(u,g);if(y>r.Constants.ZERO_TOLERANCE)if(r.PlotUtils.isClockWise(n,u,g)){var B=i*S,k=u[0]-B*w,P=u[1]+B*p,D=[k,P];B=i*R,k=u[0]+B*w,P=u[1]-B*p;var A=[k,P]}else B=i*S,k=u[0]+B*w,P=u[1]-B*p,D=[k,P],B=i*R,k=u[0]-B*w,P=u[1]+B*p,A=[k,P];else k=u[0]+i*(n[0]-u[0]),P=u[1]+i*(n[1]-u[1]),D=[k,P],k=u[0]+i*(g[0]-u[0]),P=u[1]+i*(g[1]-u[1]),A=[k,P];return[D,A]},r.PlotUtils.getNormal=function(i,n,u){var g=i[0]-n[0],d=i[1]-n[1],y=Math.sqrt(g*g+d*d);g/=y,d/=y;var p=u[0]-n[0],w=u[1]-n[1],S=Math.sqrt(p*p+w*w);p/=S,w/=S;var R=g+p,B=d+w;return[R,B]},r.PlotUtils.getCurvePoints=function(i,n){for(var u=r.PlotUtils.getLeftMostControlPoint(n),g=[u],d=0;d<n.length-2;d++){var y=n[d],p=n[d+1],w=n[d+2],S=r.PlotUtils.getBisectorNormals(i,y,p,w);g=(0,L.default)(g).call(g,S)}var R=r.PlotUtils.getRightMostControlPoint(n);g.push(R);var B=[];for(d=0;d<n.length-1;d++){y=n[d],p=n[d+1],B.push(y);for(var i=0;i<r.Constants.FITTING_COUNT;i++){var k=r.PlotUtils.getCubicValue(i/r.Constants.FITTING_COUNT,y,g[2*d],g[2*d+1],p);B.push(k)}B.push(p)}return B},r.PlotUtils.getLeftMostControlPoint=function(i){var n=i[0],u=i[1],g=i[2],d=r.PlotUtils.getBisectorNormals(0,n,u,g),y=d[0],p=r.PlotUtils.getNormal(n,u,g),w=Math.sqrt(p[0]*p[0]+p[1]*p[1]);if(w>r.Constants.ZERO_TOLERANCE)var S=r.PlotUtils.mid(n,u),R=n[0]-S[0],B=n[1]-S[1],k=r.PlotUtils.distance(n,u),P=2/k,D=-P*B,A=P*R,N=D*D-A*A,I=2*D*A,G=A*A-D*D,W=y[0]-S[0],Z=y[1]-S[1],H=S[0]+N*W+I*Z,U=S[1]+I*W+G*Z;else H=n[0]+t*(u[0]-n[0]),U=n[1]+t*(u[1]-n[1]);return[H,U]},r.PlotUtils.getRightMostControlPoint=function(i){var n=i.length,u=i[n-3],g=i[n-2],d=i[n-1],y=r.PlotUtils.getBisectorNormals(0,u,g,d),p=y[1],w=r.PlotUtils.getNormal(u,g,d),S=Math.sqrt(w[0]*w[0]+w[1]*w[1]);if(S>r.Constants.ZERO_TOLERANCE)var R=r.PlotUtils.mid(g,d),B=d[0]-R[0],k=d[1]-R[1],P=r.PlotUtils.distance(g,d),D=2/P,A=-D*k,N=D*B,I=A*A-N*N,G=2*A*N,W=N*N-A*A,Z=p[0]-R[0],H=p[1]-R[1],U=R[0]+I*Z+G*H,V=R[1]+G*Z+W*H;else U=d[0]+t*(g[0]-d[0]),V=d[1]+t*(g[1]-d[1]);return[U,V]},r.PlotUtils.getBezierPoints=function(i){if(i.length<=2)return i;for(var n=[],u=i.length-1,g=0;1>=g;g+=.01){for(var d=0,y=0,p=0;u>=p;p++){var w=r.PlotUtils.getBinomialFactor(u,p),S=Math.pow(g,p),R=Math.pow(1-g,u-p);d+=w*S*R*i[p][0],y+=w*S*R*i[p][1]}n.push([d,y])}return n.push(i[u]),n},r.PlotUtils.getBinomialFactor=function(i,n){return r.PlotUtils.getFactorial(i)/(r.PlotUtils.getFactorial(n)*r.PlotUtils.getFactorial(i-n))},r.PlotUtils.getFactorial=function(i){if(1>=i)return 1;if(i==2)return 2;if(i==3)return 6;if(i==4)return 24;if(i==5)return 120;for(var n=1,u=1;i>=u;u++)n*=u;return n},r.PlotUtils.getQBSplinePoints=function(i){if(i.length<=2)return i;var n=2,u=[],g=i.length-n-1;u.push(i[0]);for(var d=0;g>=d;d++)for(var y=0;1>=y;y+=.05){for(var p=0,w=0,S=0;n>=S;S++){var R=r.PlotUtils.getQuadricBSplineFactor(S,y);p+=R*i[d+S][0],w+=R*i[d+S][1]}u.push([p,w])}return u.push(i[i.length-1]),u},r.PlotUtils.getQuadricBSplineFactor=function(i,n){return i==0?Math.pow(n-1,2)/2:i==1?(-2*Math.pow(n,2)+2*n+1)/2:i==2?Math.pow(n,2)/2:0};var s={type:"doublearrow",headHeightFactor:.25,headWidthFactor:.3,neckHeightFactor:.85,fixPointCount:4,neckWidthFactor:.15},c={headHeightFactor:.18,headWidthFactor:.3,neckHeightFactor:.85,neckWidthFactor:.15,tailWidthFactor:.1,headTailFactor:.8,swallowTailFactor:0},x={tailWidthFactor:.05,neckWidthFactor:.2,headWidthFactor:.25,headAngle:Math.PI/8.5,neckAngle:Math.PI/13},a={version:"1.0.0",createTime:"2018.9.27",author:"muyao"};return a.fineArrowDefualParam=x,a.tailedAttackArrowDefualParam=c,a.doubleArrowDefualParam=s,a.algorithm={},a.algorithm.doubleArrow=function(i){this.connPoint=null,this.tempPoint4=null,this.points=i;var n={controlPoint:null,polygonalPoint:null},u=i.length;if(!(2>u)){if(u==2)return i;var g=this.points[0],d=this.points[1],y=this.points[2],u=i.length;u==3?this.tempPoint4=a.algorithm.getTempPoint4(g,d,y):this.tempPoint4=this.points[3],u==3||u==4?this.connPoint=r.PlotUtils.mid(g,d):this.connPoint=this.points[4];var p,w;r.PlotUtils.isClockWise(g,d,y)?(p=a.algorithm.getArrowPoints(g,this.connPoint,this.tempPoint4,!1),w=a.algorithm.getArrowPoints(this.connPoint,d,y,!0)):(p=a.algorithm.getArrowPoints(d,this.connPoint,y,!1),w=a.algorithm.getArrowPoints(this.connPoint,g,this.tempPoint4,!0));var S=p.length,R=(S-5)/2,B=(0,T.default)(p).call(p,0,R),k=(0,T.default)(p).call(p,R,R+5),P=(0,T.default)(p).call(p,R+5,S),D=(0,T.default)(w).call(w,0,R),A=(0,T.default)(w).call(w,R,R+5),N=(0,T.default)(w).call(w,R+5,S);D=r.PlotUtils.getBezierPoints(D);var I=r.PlotUtils.getBezierPoints((0,L.default)(N).call(N,(0,T.default)(B).call(B,1)));P=r.PlotUtils.getBezierPoints(P);var G=(0,L.default)(D).call(D,A,I,k,P),W=a.algorithm.array2Dto1D(G);n.controlPoint=[g,d,y,this.tempPoint4,this.connPoint],n.polygonalPoint=v.Cartesian3.fromDegreesArray(W)}return n},a.algorithm.getTempPoint4=function(i,n,u,g){var d;this.type=s.type,this.headHeightFactor=s.headHeightFactor,this.headWidthFactor=s.headWidthFactor,this.neckHeightFactor=s.neckHeightFactor,this.neckWidthFactor=s.neckWidthFactor;var y=r.PlotUtils.mid(i,n),p=r.PlotUtils.distance(y,u),w=r.PlotUtils.getThirdPoint(u,y,0,.3*p,!0),S=r.PlotUtils.getThirdPoint(u,y,0,.5*p,!0);w=r.PlotUtils.getThirdPoint(y,w,r.Constants.HALF_PI,p/5,g),S=r.PlotUtils.getThirdPoint(y,S,r.Constants.HALF_PI,p/4,g);var R=[y,w,S,u],B=a.algorithm.getArrowHeadPoints(R,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),k=B[0],P=B[4],D=r.PlotUtils.distance(i,n)/r.PlotUtils.getBaseLength(R)/2,A=a.algorithm.getArrowBodyPoints(R,k,P,D),N=A.length,I=(0,T.default)(A).call(A,0,N/2),G=(0,T.default)(A).call(A,N/2,N);return I.push(k),G.push(P),I=I.reverse(),I.push(n),G=G.reverse(),G.push(i),(0,L.default)(d=I.reverse()).call(d,B,G)},a.algorithm.array2Dto1D=function(i){var n=[];return i.forEach(function(u){n.push(u[0]),n.push(u[1])}),n},a.algorithm.getArrowPoints=function(i,n,u,g){var d;this.type=s.type,this.headHeightFactor=s.headHeightFactor,this.headWidthFactor=s.headWidthFactor,this.neckHeightFactor=s.neckHeightFactor,this.neckWidthFactor=s.neckWidthFactor;var y=r.PlotUtils.mid(i,n),p=r.PlotUtils.distance(y,u),w=r.PlotUtils.getThirdPoint(u,y,0,.3*p,!0),S=r.PlotUtils.getThirdPoint(u,y,0,.5*p,!0);w=r.PlotUtils.getThirdPoint(y,w,r.Constants.HALF_PI,p/5,g),S=r.PlotUtils.getThirdPoint(y,S,r.Constants.HALF_PI,p/4,g);var R=[y,w,S,u],B=a.algorithm.getArrowHeadPoints(R,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),k=B[0],P=B[4],D=r.PlotUtils.distance(i,n)/r.PlotUtils.getBaseLength(R)/2,A=a.algorithm.getArrowBodyPoints(R,k,P,D),N=A.length,I=(0,T.default)(A).call(A,0,N/2),G=(0,T.default)(A).call(A,N/2,N);return I.push(k),G.push(P),I=I.reverse(),I.push(n),G=G.reverse(),G.push(i),(0,L.default)(d=I.reverse()).call(d,B,G)},a.algorithm.getArrowHeadPoints=function(i,n,u){this.type=s.type,this.headHeightFactor=s.headHeightFactor,this.headWidthFactor=s.headWidthFactor,this.neckHeightFactor=s.neckHeightFactor,this.neckWidthFactor=s.neckWidthFactor;var g=r.PlotUtils.getBaseLength(i),d=g*this.headHeightFactor,y=i[i.length-1],p=(r.PlotUtils.distance(n,u),d*this.headWidthFactor),w=d*this.neckWidthFactor,S=d*this.neckHeightFactor,R=r.PlotUtils.getThirdPoint(i[i.length-2],y,0,d,!0),B=r.PlotUtils.getThirdPoint(i[i.length-2],y,0,S,!0),k=r.PlotUtils.getThirdPoint(y,R,r.Constants.HALF_PI,p,!1),P=r.PlotUtils.getThirdPoint(y,R,r.Constants.HALF_PI,p,!0),D=r.PlotUtils.getThirdPoint(y,B,r.Constants.HALF_PI,w,!1),A=r.PlotUtils.getThirdPoint(y,B,r.Constants.HALF_PI,w,!0);return[D,k,y,P,A]},a.algorithm.getArrowBodyPoints=function(i,n,u,g){for(var d=r.PlotUtils.wholeDistance(i),y=r.PlotUtils.getBaseLength(i),p=y*g,w=r.PlotUtils.distance(n,u),S=(p-w)/2,R=0,B=[],k=[],P=1;P<i.length-1;P++){var D=r.PlotUtils.getAngleOfThreePoints(i[P-1],i[P],i[P+1])/2;R+=r.PlotUtils.distance(i[P-1],i[P]);var A=(p/2-R/d*S)/Math.sin(D),N=r.PlotUtils.getThirdPoint(i[P-1],i[P],Math.PI-D,A,!0),I=r.PlotUtils.getThirdPoint(i[P-1],i[P],D,A,!1);B.push(N),k.push(I)}return(0,L.default)(B).call(B,k)},a.algorithm.getTempPoint4=function(i,n,u){var g,d,y,p,w=r.PlotUtils.mid(i,n),S=r.PlotUtils.distance(w,u),R=r.PlotUtils.getAngleOfThreePoints(i,w,u);return R<r.Constants.HALF_PI?(d=S*Math.sin(R),y=S*Math.cos(R),p=r.PlotUtils.getThirdPoint(i,w,r.Constants.HALF_PI,d,!1),g=r.PlotUtils.getThirdPoint(w,p,r.Constants.HALF_PI,y,!0)):R>=r.Constants.HALF_PI&&R<Math.PI?(d=S*Math.sin(Math.PI-R),y=S*Math.cos(Math.PI-R),p=r.PlotUtils.getThirdPoint(i,w,r.Constants.HALF_PI,d,!1),g=r.PlotUtils.getThirdPoint(w,p,r.Constants.HALF_PI,y,!1)):R>=Math.PI&&R<1.5*Math.PI?(d=S*Math.sin(R-Math.PI),y=S*Math.cos(R-Math.PI),p=r.PlotUtils.getThirdPoint(i,w,r.Constants.HALF_PI,d,!0),g=r.PlotUtils.getThirdPoint(w,p,r.Constants.HALF_PI,y,!0)):(d=S*Math.sin(2*Math.PI-R),y=S*Math.cos(2*Math.PI-R),p=r.PlotUtils.getThirdPoint(i,w,r.Constants.HALF_PI,d,!0),g=r.PlotUtils.getThirdPoint(w,p,r.Constants.HALF_PI,y,!1)),g},a.algorithm.tailedAttackArrow=function(i){i=a.algorithm.dereplication(i),this.tailWidthFactor=c.tailWidthFactor,this.swallowTailFactor=c.swallowTailFactor,this.swallowTailPnt=c.swallowTailPnt;var n={controlPoint:null,polygonalPoint:null};n.controlPoint=i;var u=i.length;if(!(2>u)){var g,d,y;if(i.length==2)return n.polygonalPoint=i,n;var p=i,w=p[0],S=p[1];r.PlotUtils.isClockWise(p[0],p[1],p[2])&&(w=p[1],S=p[0]);var R=r.PlotUtils.mid(w,S),B=(0,L.default)(g=[R]).call(g,(0,T.default)(p).call(p,2)),k=a.algorithm.getAttackArrowHeadPoints(B,w,S,c),P=k[0],D=k[4],A=r.PlotUtils.distance(w,S),N=r.PlotUtils.getBaseLength(B),I=N*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=r.PlotUtils.getThirdPoint(B[1],B[0],0,I,!0);var G=A/N,W=a.algorithm.getAttackArrowBodyPoints(B,P,D,G),u=W.length,Z=(0,L.default)(d=[w]).call(d,(0,T.default)(W).call(W,0,u/2));Z.push(P);var H=(0,L.default)(y=[S]).call(y,(0,T.default)(W).call(W,u/2,u)),U=[];H.push(D),Z=r.PlotUtils.getQBSplinePoints(Z),H=r.PlotUtils.getQBSplinePoints(H),U=a.algorithm.array2Dto1D((0,L.default)(Z).call(Z,k,H.reverse(),[this.swallowTailPnt,Z[0]])),n.polygonalPoint=v.Cartesian3.fromDegreesArray(U)}return n},a.algorithm.getAttackArrowHeadPoints=function(i,n,u,g){this.headHeightFactor=g.headHeightFactor,this.headTailFactor=g.headTailFactor,this.headWidthFactor=g.headWidthFactor,this.neckWidthFactor=g.neckWidthFactor,this.neckHeightFactor=g.neckHeightFactor;var d=r.PlotUtils.getBaseLength(i),y=d*this.headHeightFactor,p=i[i.length-1];d=r.PlotUtils.distance(p,i[i.length-2]);var w=r.PlotUtils.distance(n,u);y>w*this.headTailFactor&&(y=w*this.headTailFactor);var S=y*this.headWidthFactor,R=y*this.neckWidthFactor;y=y>d?d:y;var B=y*this.neckHeightFactor,k=r.PlotUtils.getThirdPoint(i[i.length-2],p,0,y,!0),P=r.PlotUtils.getThirdPoint(i[i.length-2],p,0,B,!0),D=r.PlotUtils.getThirdPoint(p,k,r.Constants.HALF_PI,S,!1),A=r.PlotUtils.getThirdPoint(p,k,r.Constants.HALF_PI,S,!0),N=r.PlotUtils.getThirdPoint(p,P,r.Constants.HALF_PI,R,!1),I=r.PlotUtils.getThirdPoint(p,P,r.Constants.HALF_PI,R,!0);return[N,D,p,A,I]},a.algorithm.getAttackArrowBodyPoints=function(i,n,u,g){for(var d=r.PlotUtils.wholeDistance(i),y=r.PlotUtils.getBaseLength(i),p=y*g,w=r.PlotUtils.distance(n,u),S=(p-w)/2,R=0,B=[],k=[],P=1;P<i.length-1;P++){var D=r.PlotUtils.getAngleOfThreePoints(i[P-1],i[P],i[P+1])/2;R+=r.PlotUtils.distance(i[P-1],i[P]);var A=(p/2-R/d*S)/Math.sin(D),N=r.PlotUtils.getThirdPoint(i[P-1],i[P],Math.PI-D,A,!0),I=r.PlotUtils.getThirdPoint(i[P-1],i[P],D,A,!1);B.push(N),k.push(I)}return(0,L.default)(B).call(B,k)},a.algorithm.dereplication=function(i){var n=i[i.length-1],u=![],g=[];return g=(0,C.default)(i).call(i,function(d){if(d[0]!=n[0]&&d[1]!=n[1])return d;u=!![]}),u&&g.push(n),g},a.algorithm.fineArrow=function(i,n){if(!(i.length<2||n.length<2)){var u=i.length==3?i[2]:0,g=n.length==3?n[2]:0,d=x.tailWidthFactor,y=x.neckWidthFactor,p=x.headWidthFactor,w=x.headAngle,S=x.neckAngle,R=[];R[0]=i,R[1]=n;var B=R[0],k=R[1],P=r.PlotUtils.getBaseLength(R),D=P*d,A=P*y,N=P*p,I=r.PlotUtils.getThirdPoint(k,B,r.Constants.HALF_PI,D,!0),G=r.PlotUtils.getThirdPoint(k,B,r.Constants.HALF_PI,D,!1),W=r.PlotUtils.getThirdPoint(B,k,w,N,!1),Z=r.PlotUtils.getThirdPoint(B,k,w,N,!0),H=r.PlotUtils.getThirdPoint(B,k,S,A,!1),U=r.PlotUtils.getThirdPoint(B,k,S,A,!0),V=[];return V.push(I[0],I[1],u,H[0],H[1],g,W[0],W[1],g,k[0],k[1],g,Z[0],Z[1],g,U[0],U[1],g,G[0],G[1],u,B[0],B[1],u),v.Cartesian3.fromDegreesArrayHeights(V)}},a.algorithm.gatheringPlace=function(i){var n=this;if(i.forEach(function(W){return(0,b.default)(this,n),W.length=2}.bind(this)),i.length<2)return[];var u;if(i.length===2){var g=r.PlotUtils.mid(i[0],i[1]),d=r.PlotUtils.distance(i[0],g)/.9,y=r.PlotUtils.getThirdPoint(i[0],g,r.Constants.HALF_PI,d,!![]);i=[i[0],y,i[1]]}var p=r.PlotUtils.mid(i[0],i[2]);i.push(p,i[0],i[1]);for(var w=[],S=void 0,R=void 0,B=void 0,k=[],P=0;P<i.length-2;P++){S=i[P],R=i[P+1],B=i[P+2];var D=r.PlotUtils.getBisectorNormals(.4,S,R,B);w=(0,L.default)(w).call(w,D)}var A=w.length;w=(0,L.default)(u=[w[A-1]]).call(u,(0,T.default)(w).call(w,0,A-1));for(var N=0;N<i.length-2;N++){S=i[N],R=i[N+1],k.push(S);for(var I=0;I<=r.Constants.FITTING_COUNT;I++){var G=r.PlotUtils.getCubicValue(I/r.Constants.FITTING_COUNT,S,w[N*2],w[N*2+1],R);k.push(G)}k.push(R)}return k=(0,f.default)(k).call(k,function(W){return(0,b.default)(this,n),W.length=2,W}.bind(this)),v.Cartesian3.fromDegreesArray(k)},a.algorithm.closedCurve=function(i){var n=this;if(i.forEach(function(I){return(0,b.default)(this,n),I.length=2}.bind(this)),i.length<2)return[];var u;if(i.length===2){var g=r.PlotUtils.mid(i[0],i[1]),d=r.PlotUtils.distance(i[0],g)/.9,y=r.PlotUtils.getThirdPoint(i[0],g,r.Constants.HALF_PI,d,!![]);i=[i[0],y,i[1]]}i.push(i[0],i[1]);for(var p=[],w=[],S=0;S<i.length-2;S++){var R=r.PlotUtils.getBisectorNormals(.4,i[S],i[S+1],i[S+2]);p=(0,L.default)(p).call(p,R)}var B=p.length;p=(0,L.default)(u=[p[B-1]]).call(u,(0,T.default)(p).call(p,0,B-1));for(var k=0;k<i.length-2;k++){var P=i[k],D=i[k+1];w.push(P);for(var A=0;A<=r.Constants.FITTING_COUNT;A++){var N=r.PlotUtils.getCubicValue(A/r.Constants.FITTING_COUNT,P,p[k*2],p[k*2+1],D);w.push(N)}w.push(D)}return w=(0,f.default)(w).call(w,function(I){return(0,b.default)(this,n),I.length=2,I}.bind(this)),v.Cartesian3.fromDegreesArray(w)},a}(window);z.plotUtil=h},10614:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.getAttrForType=z.createDragger=z.PointType=z.PointColor=z.PixelSize=void 0;var b=M(e(342579)),L=v(e(187647)),T=e(870317),C=void 0;function f(s){if(typeof F!="function")return null;var c=new F,x=new F;return(f=function(i){return i?x:c})(s)}function v(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||E(s)!=="object"&&typeof s!="function")return{default:s};var x=f(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&O;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var u=i?O(s,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}var m=12;z.PixelSize=m;var o={Control:1,AddMidPoint:2,MoveHeight:3,EditAttr:4,EditRotation:5,MoveAbout:6,MoveAround:7,MoveLevel:8};z.PointType=o;var h={Control:new L.Color.fromCssColorString("#1c197d"),MoveHeight:new L.Color.fromCssColorString("#9500eb"),EditAttr:new L.Color.fromCssColorString("#f73163"),AddMidPoint:new L.Color.fromCssColorString("#04c2c9").withAlpha(.3)};z.PointColor=h;var l=function(c,x){switch((0,b.default)(this,C),c){case o.AddMidPoint:x.color=h.AddMidPoint,x.outlineColor=new L.Color.fromCssColorString("#ffffff").withAlpha(.4);break;case o.MoveHeight:x.color=h.MoveHeight;break;case o.EditAttr:x.color=h.EditAttr;break;case o.Control:default:x.color=h.Control;break}return x}.bind(void 0);z.getAttrForType=l;var r=function(c,x){(0,b.default)(this,C);var a;if(x.dragger)a=x.dragger;else{var i={scale:1,pixelSize:m,outlineColor:new L.Color.fromCssColorString("#ffffff").withAlpha(.5),outlineWidth:2,scaleByDistance:new L.NearFarScalar(1e3,1,1e6,.5),disableDepthTestDistance:Number.POSITIVE_INFINITY};i=l(x.type,i),a=c.entities.add({position:L.defaultValue(x.position,L.Cartesian3.ZERO),point:i,draw_tooltip:x.tooltip||T.message.dragger.def})}return a._isDragger=!![],a.isDrawEntity||(a._noMousePosition=!![]),a._pointType=x.type||o.Control,a.onDragStart=L.defaultValue(x.onDragStart,null),a.onDrag=L.defaultValue(x.onDrag,null),a.onDragEnd=L.defaultValue(x.onDragEnd,null),a.onRightDown=L.defaultValue(x.onRightDown,null),a.onRightUp=L.defaultValue(x.onRightUp,null),a}.bind(void 0);z.createDragger=r},308817:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditBase=void 0;var L=b(e(669033)),T=b(e(342579)),C=b(e(122777)),f=b(e(42762)),v=x(e(187647)),m=x(e(469973)),o=x(e(936161)),h=x(e(10614)),l=e(779651),r=e(870317),s=e(792672);function c(y){if(typeof O!="function")return null;var p=new O,w=new O;return(c=function(R){return R?w:p})(y)}function x(y,p){if(!p&&y&&y.__esModule)return y;if(y===null||F(y)!=="object"&&typeof y!="function")return{default:y};var w=c(p);if(w&&w.has(y))return w.get(y);var S={},R=Object.defineProperty&&M;for(var B in y)if(B!=="default"&&Object.prototype.hasOwnProperty.call(y,B)){var k=R?M(y,B):null;k&&(k.get||k.set)?Object.defineProperty(S,B,k):S[B]=y[B]}return S.default=y,w&&w.set(y,S),S}var a=v.Color.DARKORANGE.clone(),i=v.Color.DEEPSKYBLUE.clone(),n=v.Color.RED.clone(),u=function(){function y(){var p=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;(0,C.default)(this,y),this.step=w,this.timer=null,this.callback=function(){(0,T.default)(this,p),E.warn("\u8BF7\u8BBE\u7F6E\u9632\u6296\u7684\u56DE\u8C03\u51FD\u6570")}.bind(this)}return(0,f.default)(y,[{key:"active",value:function(w){var S=this;clearTimeout(this.timer),this.callback=w||this.callback,this.timer=setTimeout(function(){(0,T.default)(this,S),this.callback()}.bind(this),this.step)}}]),y}(),g=new u,d=l.Class.extend({_dataSource:null,_minPointNum:1,_maxPointNum:9999,initialize:function(p){var w=p.entity,S=p.viewer,R=p.dataSource;this.entity=w,this.viewer=S,this.dataSource=R,this._positions_draw=w._positions_draw,this.draggers=[]},fire:function(p,w,S){this._fire&&this._fire(p,w,S)},formatNum:function(p,w){return o.formatNum(p,w)},setCursor:function(p){this.viewer._container.style.cursor=p?"crosshair":""},activate:function(){var p;return this._enabled?this:(this._enabled=!![],this.entity.inProgress=!![],this.getPositionsFromEntity(),this.changePositionsToCallback(),this.bindDraggers(),this.bindEvent(),this.fire(m.EditStart,{drawtype:(p=this.entity.attribute)===null||p===void 0?void 0:p.drawtype,entity:this.entity,geojson:this.toGeoJSON(this.entity)}),this)},getPositionsFromEntity:function(){this._positions_draw=this.entity._positions_draw},disable:function(){var p;return this._enabled?(this._enabled=![],this.destroyEvent(),this.destroyDraggers(),this.finish(),this.entity.inProgress=![],this.fire(m.EditStop,{drawtype:(p=this.entity.attribute)===null||p===void 0?void 0:p.drawtype,entity:this.entity}),this.tooltip.setVisible(![]),this):this},changePositionsToCallback:function(){},finish:function(){},bindEvent:function(){var p=this,w=new v.BoundingSphere,S=new v.Cartesian3,R=new v.ScreenSpaceEventHandler(this.viewer.canvas);R.dragger=null;var B,k=![];R.setInputAction(function(P){var D=p.viewer.scene.pick(P.position);if(v.defined(D)){var A=D.id||D.primitive.id||D.primitive;if(A&&v.defaultValue(A._isDragger,![])&&(p.viewer.scene.screenSpaceCameraController.enableRotate=![],p.viewer.scene.screenSpaceCameraController.enableTilt=![],p.viewer.scene.screenSpaceCameraController.enableTranslate=![],p.viewer.scene.screenSpaceCameraController.enableInputs=![],p.viewer.mars&&p.viewer.mars.popup.close(A),k=!![],R.dragger=A,(R.dragger.point||R.dragger.ellipsoid)&&(R.dragger.show=![]),p.setCursor(!![]),R.dragger.onDragStart)){E.warn("points have been added");var N=R.dragger.position;N&&N.getValue?N=N.getValue(p.viewer.clock.currentTime):N=(0,s.getCurrentMousePosition)(p.viewer.scene,P.position),R.dragger.onDragStart(R.dragger,N)}}},v.ScreenSpaceEventType.LEFT_DOWN),R.setInputAction(function(P){var D=p.viewer.scene.pick(P.position);if(v.defined(D)){var A=D.id||D.primitive.id||D.primitive;if(A!=null&&A._isDragger&&(p.viewer.scene.screenSpaceCameraController.enableRotate=![],p.viewer.scene.screenSpaceCameraController.enableTilt=![],p.viewer.scene.screenSpaceCameraController.enableTranslate=![],p.viewer.scene.screenSpaceCameraController.enableInputs=![],p.viewer.mars&&p.viewer.mars.popup.close(A),R.dragger=A,p.setCursor(!![]),R.dragger.onRightDown)){var N=R.dragger.position;N&&N.getValue&&(N=N.getValue(p.viewer.clock.currentTime)),R.dragger.onRightDown(R.dragger,N)}}},v.ScreenSpaceEventType.RIGHT_DOWN),R.setInputAction(function(P){var D=this;if(B&&!k)switch(B.draggerName){case"arrow_horizontal":case"arrow_vertical":{B.appearance.material.uniforms.color=i,B=void 0;break}case"circle":{B.appearance.material.uniforms.color=a,B=void 0;break}case"plane":{B.appearance.material.uniforms.color=a,B=void 0;break}default:B=void 0}var A=p.viewer.scene.pick(P.endPosition);if(v.defined(A)){var N=A.id||A.primitive.id||A.primitive;if(N!=null&&N._isDragger&&!k)switch(N.draggerName){case"arrow_horizontal":case"arrow_vertical":{N.appearance.material.uniforms.color=n,B=N;break}case"circle":{N.appearance.material.uniforms.color=n,B=N;break}case"plane":{N.appearance.material.uniforms.color=n,B=N;break}default:B=void 0}}var I=R.dragger;if(I)switch(I._pointType){case h.PointType.MoveHeight:{var G=P.endPosition.y-P.startPosition.y,W=I.position;W&&W.getValue&&(W=W.getValue(p.viewer.clock.currentTime));var Z=new v.EllipsoidTangentPlane(W);w.center=W,w.radius=1;var H=p.viewer.scene.frameState.camera.getPixelSize(w,p.viewer.scene.frameState.context.drawingBufferWidth,p.viewer.scene.frameState.context.drawingBufferHeight)*1.5;v.Cartesian3.multiplyByScalar(Z.zAxis,-G*H,S);var U=v.Cartesian3.clone(W);v.Cartesian3.add(W,S,U),I.position=U,I.onDrag&&I.onDrag(I,U,W),p.updateAttrForEditing();break}case h.PointType.MoveAbout:{var V=P.endPosition.x-P.startPosition.x,Y=P.endPosition.y-P.startPosition.y,$=I.position;$&&$.getValue&&($=$.getValue(p.viewer.clock.currentTime));var K=new v.EllipsoidTangentPlane($);w.center=$,w.radius=1;var J=p.viewer.scene.frameState.camera.getPixelSize(w,p.viewer.scene.frameState.context.drawingBufferWidth,p.viewer.scene.frameState.context.drawingBufferHeight)*1,Q=(0,s.getCameraView)(p.viewer).heading;Q>45&&Q<=135?v.Cartesian3.multiplyByScalar(K.xAxis,-Y*J,S):Q>135&&Q<=225?v.Cartesian3.multiplyByScalar(K.xAxis,-V*J,S):Q>225&&Q<=315?v.Cartesian3.multiplyByScalar(K.xAxis,Y*J,S):v.Cartesian3.multiplyByScalar(K.xAxis,V*J,S);var et=v.Cartesian3.clone($);v.Cartesian3.add($,S,et),I.position=et,I.onDrag&&I.onDrag(I,et,$),p.updateAttrForEditing();break}case h.PointType.MoveAround:{var nt=P.endPosition.x-P.startPosition.x,st=P.endPosition.y-P.startPosition.y,ut=I.position;ut&&ut.getValue&&(ut=ut.getValue(p.viewer.clock.currentTime));var rt=new v.EllipsoidTangentPlane(ut);w.center=ut,w.radius=1;var ht=p.viewer.scene.frameState.camera.getPixelSize(w,p.viewer.scene.frameState.context.drawingBufferWidth,p.viewer.scene.frameState.context.drawingBufferHeight)*1,Pt=(0,s.getCameraView)(p.viewer).heading;Pt>45&&Pt<=135?v.Cartesian3.multiplyByScalar(rt.yAxis,-nt*ht,S):Pt>135&&Pt<=225?v.Cartesian3.multiplyByScalar(rt.yAxis,st*ht,S):Pt>225&&Pt<=315?v.Cartesian3.multiplyByScalar(rt.yAxis,nt*ht,S):v.Cartesian3.multiplyByScalar(rt.yAxis,-st*ht,S);var wt=v.Cartesian3.clone(ut);v.Cartesian3.add(ut,S,wt),I.position=wt,I.onDrag&&I.onDrag(I,wt,ut),p.updateAttrForEditing();break}case h.PointType.MoveLevel:{p.tooltip.showAt(P.endPosition,r.message.edit.end);var Mt=(0,s.getCurrentMousePosition)(p.viewer.scene,P.endPosition,p.entity),Ft=p.viewer.camera.getPickRay(P.endPosition);Mt=p.viewer.scene.globe.pick(Ft,p.viewer.scene,new v.Cartesian3),Mt&&(I.position=Mt,I.onDrag&&I.onDrag(I,Mt),p.updateAttrForEditing());break}default:{p.tooltip.showAt(P.endPosition,r.message.edit.end);var Dt=(0,s.getCurrentMousePosition)(p.viewer.scene,P.endPosition,p.entity);Dt&&(I.position=Dt,I.onDrag&&I.onDrag(I,Dt),p.updateAttrForEditing());break}}else{if(p.entity.attribute.attr.isClip)return;g.active(function(){(0,T.default)(this,D),p.tooltip.setVisible(![]);var Rt=p.viewer.scene.pick(P.endPosition);if(v.defined(Rt)){var Tt=Rt.id;Tt&&v.defaultValue(Tt._isDragger,![])&&Tt.draw_tooltip&&Tt.movepoint&&h.PointType.Control===Tt._pointType&&p._positions_draw&&p._positions_draw.length&&p._positions_draw.length>p._minPointNum&&p.tooltip.showAt(P.endPosition)}}.bind(this))}},v.ScreenSpaceEventType.MOUSE_MOVE),R.setInputAction(function(){var P=R.dragger;if(P){p.setCursor(![]),P.show=!![];var D=P.position;D&&D.getValue&&(D=D.getValue(p.viewer.clock.currentTime)),P.onDragEnd&&P.onDragEnd(P,D);var A=p.entity;p.entity.attribute.drawtype==="point"&&(A=P);var N=p.toGeoJSON(A);p.fire(m.EditMovePoint,{geojson:N,drawtype:p.entity.attribute.drawtype,entity:A,position:D}),R.dragger=null,p.viewer.scene.screenSpaceCameraController.enableRotate=!![],p.viewer.scene.screenSpaceCameraController.enableTilt=!![],p.viewer.scene.screenSpaceCameraController.enableTranslate=!![],p.viewer.scene.screenSpaceCameraController.enableInputs=!![]}k=![]},v.ScreenSpaceEventType.LEFT_UP),R.setInputAction(function(){var P=R.dragger;if(P){p.setCursor(![]),P.show=!![];var D=P.position;D&&D.getValue&&(D=D.getValue(p.viewer.clock.currentTime)),P.onRightUp&&P.onRightUp(R.dragger,D),p.entity.attribute.attr.onDragEndCallback&&p.entity.attribute.attr.onDragEndCallback(p.entity);var A=p.entity;p.entity.attribute.drawtype==="point"&&(A=P);var N=p.toGeoJSON(A);p.fire(m.EditMovePoint,{geojson:N,drawtype:p.entity.attribute.drawtype,entity:A,position:D}),R.dragger=null,p.viewer.scene.screenSpaceCameraController.enableRotate=!![],p.viewer.scene.screenSpaceCameraController.enableTilt=!![],p.viewer.scene.screenSpaceCameraController.enableTranslate=!![],p.viewer.scene.screenSpaceCameraController.enableInputs=!![]}},v.ScreenSpaceEventType.RIGHT_UP),R.setInputAction(function(P){var D=p.viewer.scene.pick(P.position);if(v.defined(D)){var A=D.id;if(A&&v.defaultValue(A._isDragger,![])&&h.PointType.Control===A._pointType){var N=p.deletePointForDragger(A,P.position);if(N){var I=p.toGeoJSON(p.entity);p.fire(m.EditRemovePoint,{geojson:I,drawtype:p.entity.attribute.drawtype,entity:p.entity})}}}},v.ScreenSpaceEventType.RIGHT_CLICK),this.draggerHandler=R},destroyEvent:function(){this.viewer.scene.screenSpaceCameraController.enableRotate=!![],this.viewer.scene.screenSpaceCameraController.enableTilt=!![],this.viewer.scene.screenSpaceCameraController.enableTranslate=!![],this.viewer.scene.screenSpaceCameraController.enableInputs=!![],this.setCursor(![]),this.draggerHandler&&(this.draggerHandler.dragger&&(this.draggerHandler.dragger.show=!![]),this.draggerHandler.destroy(),this.draggerHandler=null)},bindDraggers:function(){},updateDraggers:function(){if(!this._enabled)return this;this.destroyDraggers(),this.bindDraggers()},destroyDraggers:function(){for(var p=0,w=this.draggers.length;p<w;p++)this.dataSource.entities.remove(this.draggers[p]);this.viewer.scene.primitives.remove(this.draggers_pri),this.draggers_pri=null,this.draggers=[]},deletePointForDragger:function(p,w){if(this._positions_draw){if(this._positions_draw.length-1<this._minPointNum)return this.tooltip.showAt(w,r.message.del.min+this._minPointNum),![];var S=p.index;if(S>=0&&S<this._positions_draw.length){var R;return(0,L.default)(R=this._positions_draw).call(R,S,1),this.updateDraggers(),this.updateAttrForEditing(),!![]}else return![]}},updateAttrForEditing:function(){}});z.EditBase=d},343889:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditCircle=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=c(e(187647)),o=c(e(10614)),h=e(781983),l=e(870317),r=e(792672);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,v.default)(n),y;if(u){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var u=x(g);function g(d){return(0,L.default)(this,g),u.call(this,d)}return(0,T.default)(g,[{key:"getGraphic",value:function(){return this.entity.ellipse}},{key:"getPositionsFromEntity",value:function(){this._positions_draw=this.entity._positions_draw}},{key:"changePositionsToCallback",value:function(){}},{key:"finish",value:function(){this.entity._positions_draw=this._positions_draw}},{key:"isClampToGround",value:function(){return this.entity.attribute.style.clampToGround}},{key:"setPositions",value:function(y){y=y[0]||y;var p=this.getPosition()||[],w=this.entity.attribute.style,S=m.EllipseGeometryLibrary.computeEllipsePositions({center:y,semiMajorAxis:this.getGraphic().semiMajorAxis.getValue(),semiMinorAxis:this.getGraphic().semiMinorAxis.getValue(),rotation:m.Math.toRadians(Number(w.rotation||0)),granularity:2},!![],![]);p[0]=y,p[1]=new m.Cartesian3(S.positions[0],S.positions[1],S.positions[2]),this._maxPointNum===3&&(p[2]=new m.Cartesian3(S.positions[3],S.positions[4],S.positions[5])),this._positions_draw=p,this.entity._positions_draw=p,this.entity.position=y}},{key:"getPosition",value:function(){if(this.getGraphic().height!==void 0)for(var y=this.getGraphic().height.getValue(this.viewer.clock.currentTime),p=0,w=this._positions_draw.length;p<w;p++)this._positions_draw[p]=(0,r.setPositionsHeight)(this._positions_draw[p],y);return this._positions_draw}},{key:"bindDraggers",value:function(){var y=this,p=this.isClampToGround(),w=this.getPosition(),S=new m.Cartesian3,R=new m.Cartesian3,B=this.entity.attribute.style,k=w[0];p&&(k=(0,r.updateHeightForClampToGround)(this.viewer,k),w[0]=k);var P=o.createDragger(this.dataSource,{position:k,onDrag:function(U,V){var Y;if(m.Cartesian3.subtract(V,w[U.index],S),w[U.index]=V,((Y=y.entity)===null||Y===void 0?void 0:Y.position)instanceof m.ConstantPositionProperty&&(y.entity.position=V),!B.clampToGround){var $=y.formatNum(m.Cartographic.fromCartesian(V).height,2);y.getGraphic().height=$,B.height=$}var K=y.viewer.clock.currentTime;m.Cartesian3.add(U.majorDragger.position.getValue(K),S,R),U.majorDragger.position=R,U.minorDragger&&(m.Cartesian3.add(U.minorDragger.position.getValue(K),S,R),U.minorDragger.position=R),y.entity.attribute.style.extrudedHeight!==void 0&&y.updateDraggers()}});P.index=0,this.draggers.push(P);var D=this.viewer.clock.currentTime,A=m.EllipseGeometryLibrary.computeEllipsePositions({center:k,semiMajorAxis:this.getGraphic().semiMajorAxis.getValue(D),semiMinorAxis:this.getGraphic().semiMinorAxis.getValue(D),rotation:m.Math.toRadians(Number(B.rotation||0)),granularity:2},!![],![]),N=new m.Cartesian3(A.positions[0],A.positions[1],A.positions[2]);p&&(N=(0,r.updateHeightForClampToGround)(this.viewer,N)),w[1]=N;var I=o.createDragger(this.dataSource,{position:N,type:o.PointType.EditAttr,tooltip:l.message.dragger.editRadius,onDrag:function(U,V){if(y.getGraphic().height!==void 0){var Y=y.getGraphic().height.getValue(D);V=(0,r.setPositionsHeight)(V,Y),U.position=V}w[U.index]=V;var $=y.formatNum(m.Cartesian3.distance(w[0],V),2)||.001;y.getGraphic().semiMajorAxis=$,B.radius?(y.getGraphic().semiMinorAxis=$,B.radius=$):(y.getGraphic().semiMajorAxis<y.getGraphic().semiMinorAxis&&(y.getGraphic().semiMinorAxis=y.getGraphic().semiMajorAxis,y.getGraphic().semiMajorAxis=$),B.semiMajorAxis=$),y.entity.attribute.style.extrudedHeight!==void 0&&y.updateDraggers()}});if(I.index=1,P.majorDragger=I,this.draggers.push(I),this._maxPointNum===3){var G=new m.Cartesian3(A.positions[3],A.positions[4],A.positions[5]);p&&(G=(0,r.updateHeightForClampToGround)(this.viewer,G)),w[2]=G;var W=o.createDragger(this.dataSource,{position:G,type:o.PointType.EditAttr,tooltip:l.message.dragger.editRadius,onDrag:function(U,V){if(y.getGraphic().height!==void 0){var Y=y.getGraphic().height.getValue(D);V=(0,r.setPositionsHeight)(V,Y),U.position=V}w[U.index]=V;var $=y.formatNum(m.Cartesian3.distance(w[0],V),2)||.001;y.getGraphic().semiMinorAxis=$,B.radius?(y.getGraphic().semiMajorAxis=$,B.radius=$):(y.getGraphic().semiMajorAxis<y.getGraphic().semiMinorAxis&&(y.getGraphic().semiMajorAxis=$,y.getGraphic().semiMinorAxis=$),B.semiMinorAxis=$),y.entity.attribute.style.extrudedHeight!==void 0&&y.updateDraggers()}});W.index=2,P.minorDragger=W,this.draggers.push(W)}if(this.getGraphic().extrudedHeight){var Z=this._maxPointNum===3?[w[1],w[2]]:[w[1]];this.bindHeightDraggers(Z)}}}]),g}(h.EditPolygon);z.EditCircle=i},245691:function(X,z,e){"use strict";var E=e(465557),F=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditCorridor=void 0;var O=F(e(122777)),M=F(e(42762)),b=F(e(330044)),L=F(e(299085)),T=F(e(234009)),C=e(111478),f=e(792672);function v(h){var l=m();return function(){var s=(0,T.default)(h),c;if(l){var x=(0,T.default)(this).constructor;c=E(s,arguments,x)}else c=s.apply(this,arguments);return(0,L.default)(this,c)}}function m(){if(typeof Reflect>"u"||!E)return![];if(E.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(E(Boolean,[],function(){})),!![]}catch{return![]}}var o=function(h){(0,b.default)(r,h);var l=v(r);function r(s){return(0,O.default)(this,r),l.call(this,s)}return(0,M.default)(r,[{key:"getGraphic",value:function(){return this.entity.corridor}},{key:"updatePositionsHeightByAttr",value:function(c){if(this.getGraphic().height!==void 0){var x=this.getGraphic().height.getValue(this.viewer.clock.currentTime);c=(0,f.setPositionsHeight)(c,x)}return c}}]),r}(C.EditPolyline);z.EditCorridor=o},839670:function(X,z,e){"use strict";var E=e(465557),F=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditCurve=void 0;var O=F(e(122777)),M=F(e(42762)),b=F(e(330044)),L=F(e(299085)),T=F(e(234009)),C=e(669471),f=e(111478);function v(h){var l=m();return function(){var s=(0,T.default)(h),c;if(l){var x=(0,T.default)(this).constructor;c=E(s,arguments,x)}else c=s.apply(this,arguments);return(0,L.default)(this,c)}}function m(){if(typeof Reflect>"u"||!E)return![];if(E.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(E(Boolean,[],function(){})),!![]}catch{return![]}}var o=function(h){(0,b.default)(r,h);var l=v(r);function r(s){return(0,O.default)(this,r),l.call(this,s)}return(0,M.default)(r,[{key:"getPositionsFromEntity",value:function(){this._positions_draw=this.entity._positions_draw,this._positions_show=this.entity._positions_show||this.getGraphic().positions.getValue()}},{key:"changePositionsToCallback",value:function(){}},{key:"updateAttrForEditing",value:function(){if(this._positions_draw==null||this._positions_draw.length<3){this._positions_show=this._positions_draw,this.entity._positions_show=this._positions_show;return}this._positions_show=(0,C.line2curve)(this._positions_draw,this.entity.attribute.style.closure),this.entity._positions_show=this._positions_show}},{key:"finish",value:function(){this.entity._positions_show=this._positions_show,this.entity._positions_draw=this._positions_draw}}]),r}(f.EditPolyline);z.EditCurve=o},232783:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditCylinder=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=c(e(187647)),o=c(e(10614)),h=e(781983),l=e(870317),r=e(792672);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,v.default)(n),y;if(u){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var u=x(g);function g(d){return(0,L.default)(this,g),u.call(this,d)}return(0,T.default)(g,[{key:"getGraphic",value:function(){return this.entity.cylinder}},{key:"changePositionsToCallback",value:function(){var y=this.viewer.clock.currentTime,p=this;this.attr_bottomRadius=this.getGraphic().bottomRadius.getValue(y),this.getGraphic().bottomRadius=new m.CallbackProperty(function(){return p.attr_bottomRadius},![]),this.attr_length=this.getGraphic().length.getValue(y),this.getGraphic().length=new m.CallbackProperty(function(){return p.attr_length},![])}},{key:"finish",value:function(){this.entity._positions_draw=this._positions_draw,this.getGraphic().bottomRadius=this.attr_bottomRadius,this.getGraphic().length=this.attr_length}},{key:"bindDraggers",value:function(){var y=this,p=this.getPosition(),w=new m.Cartesian3,S=this.entity.attribute.style;D=p[0];var R=o.createDragger(this.dataSource,{position:D,onDrag:function(I,G){m.Cartesian3.subtract(G,p[I.index],w),p[I.index]=G,y.updateDraggers()}});R.index=0,this.draggers.push(R);var B=m.EllipseGeometryLibrary.computeEllipsePositions({center:D,semiMajorAxis:this.attr_bottomRadius,semiMinorAxis:this.attr_bottomRadius,rotation:m.Math.toRadians(Number(S.rotation||0)),granularity:2},!![],![]),k=new m.Cartesian3(B.positions[0],B.positions[1],B.positions[2]);p[1]=k;var P=o.createDragger(this.dataSource,{position:k,type:o.PointType.EditAttr,tooltip:l.message.dragger.editRadius,onDrag:function(I,G){p[I.index]=G;var W=y.formatNum(m.Cartesian3.distance(p[0],G),2);y.attr_bottomRadius=W,S.bottomRadius=W,y.updateDraggers()}});this.draggers.push(P);var D=(0,r.addPositionsHeight)(p[0],this.attr_length),A=o.createDragger(this.dataSource,{position:D,type:o.PointType.MoveHeight,tooltip:l.message.dragger.moveHeight,onDrag:function(I,G){var W=y.formatNum(m.Cartesian3.distance(p[0],G),2);y.attr_length=W,S.length=W,y.updateDraggers()}});this.draggers.push(A)}}]),g}(h.EditPolygon);z.EditCylinder=i},138766:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditEllipsoid=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=c(e(187647)),o=c(e(10614)),h=e(870317),l=e(308817),r=e(792672);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,v.default)(n),y;if(u){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var u=x(g);function g(d){var y;return(0,L.default)(this,g),y=u.call(this,d),y._positions_draw=null,y}return(0,T.default)(g,[{key:"getGraphic",value:function(){return this.entity.ellipsoid}},{key:"getPositionsFromEntity",value:function(){this._positions_draw=this.entity._positions_draw[0]}},{key:"setPositions",value:function(y){this.entity.position=y[0]||y}},{key:"finish",value:function(){this._positions_draw=null}},{key:"updateRadii",value:function(y){var p=new m.Cartesian3(Number(y.extentRadii),Number(y.widthRadii),Number(y.heightRadii));this.entity.ellipsoid.radii.setValue(p)}},{key:"bindDraggers",value:function(){var y=this,p=this.entity.attribute.style,w=this.entity.position.getValue(this.viewer.clock.currentTime),S=o.createDragger(this.dataSource,{position:(0,r.addPositionsHeight)(w,p.heightRadii),onDrag:function(N,I){this._positions_draw=I,y.entity.position.setValue(I),y.updateDraggers()}});this.draggers.push(S);var R=m.EllipseGeometryLibrary.computeEllipsePositions({center:w,semiMajorAxis:Number(p.extentRadii),semiMinorAxis:Number(p.widthRadii),rotation:m.Math.toRadians(Number(p.rotation||0)),granularity:2},!![],![]),B=new m.Cartesian3(R.positions[0],R.positions[1],R.positions[2]),k=o.createDragger(this.dataSource,{position:B,type:o.PointType.EditAttr,tooltip:h.message.dragger.editRadius,onDrag:function(N,I){var G=m.Cartographic.fromCartesian(y._positions_draw).height;I=(0,r.setPositionsHeight)(I,G),N.position=I,p.extentRadii=y.formatNum(m.Cartesian3.distance(y._positions_draw,I),2),y.updateRadii(p),y.updateDraggers()}});S.majorDragger=k,this.draggers.push(k);var P=new m.Cartesian3(R.positions[3],R.positions[4],R.positions[5]),D=o.createDragger(this.dataSource,{position:P,type:o.PointType.EditAttr,tooltip:h.message.dragger.editRadius,onDrag:function(N,I){var G=m.Cartographic.fromCartesian(y._positions_draw).height;I=(0,r.setPositionsHeight)(I,G),N.position=I,p.widthRadii=y.formatNum(m.Cartesian3.distance(y._positions_draw,I),2),y.updateRadii(p),y.updateDraggers()}});S.minorDragger=D,this.draggers.push(D)}}]),g}(l.EditBase);z.EditEllipsoid=i},633843:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPModel=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=x(e(187647)),o=x(e(10614)),h=x(e(102402)),l=e(792672),r=e(308817),s=e(870317);function c(u){if(typeof O!="function")return null;var g=new O,d=new O;return(c=function(p){return p?d:g})(u)}function x(u,g){if(!g&&u&&u.__esModule)return u;if(u===null||E(u)!=="object"&&typeof u!="function")return{default:u};var d=c(g);if(d&&d.has(u))return d.get(u);var y={},p=Object.defineProperty&&M;for(var w in u)if(w!=="default"&&Object.prototype.hasOwnProperty.call(u,w)){var S=p?M(u,w):null;S&&(S.get||S.set)?Object.defineProperty(y,w,S):y[w]=u[w]}return y.default=u,d&&d.set(u,y),y}function a(u){var g=i();return function(){var y=(0,v.default)(u),p;if(g){var w=(0,v.default)(this).constructor;p=F(y,arguments,w)}else p=y.apply(this,arguments);return(0,f.default)(this,p)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var n=function(u){(0,C.default)(d,u);var g=a(d);function d(y){return(0,L.default)(this,d),g.call(this,y)}return(0,T.default)(d,[{key:"setPositions",value:function(p){this.entity.position=p,this.entity.modelMatrix=this.getModelMatrix()}},{key:"getModelMatrix",value:function(p){var w=this.entity.attribute.style,S=new m.HeadingPitchRoll(m.Math.toRadians(w.heading||0),m.Math.toRadians(w.pitch||0),m.Math.toRadians(w.roll||0)),R=m.Transforms.eastNorthUpToFixedFrame,B=m.Transforms.headingPitchRollToFixedFrame(p||this.entity.position,S,this.viewer.scene.globe.ellipsoid,R);return B}},{key:"bindDraggers",value:function(){if(!this.entity.ready){var p=this;this.entity.readyPromise.then(function(){p.bindDraggers()});return}var w=this;this.entity.draw_tooltip=s.message.dragger.def,o.createDragger(this.dataSource,{dragger:this.entity,onDrag:function(G,W){w.entity.position=W,w.entity.modelMatrix=w.getModelMatrix(W),w.updateDraggers()}});var S=this.entity.attribute.style,R=this.entity.position,B=m.Cartographic.fromCartesian(R).height,k=this.entity.boundingSphere.radius;this.entityAngle=this.dataSource.entities.add({name:"\u89D2\u5EA6\u8C03\u6574\u5E95\u90E8\u5706",position:new m.CallbackProperty(function(){return w.entity.position},![]),ellipse:h.style2Entity({fill:![],outline:!![],outlineColor:"#ffff00",outlineOpacity:.8,radius:k,height:B})});var P=this.getHeadingPosition(),D=o.createDragger(this.dataSource,{position:P,type:o.PointType.EditAttr,tooltip:s.message.dragger.editHeading,onDrag:function(G,W){var Z=w.getHeading(w.entity.position,W);S.heading=w.formatNum(Z,1),w.entity.modelMatrix=w.getModelMatrix(),G.position=w.getHeadingPosition()}});this.draggers.push(D);var A=(0,l.addPositionsHeight)(R,k),N=o.createDragger(this.dataSource,{position:A,type:o.PointType.MoveHeight,tooltip:s.message.dragger.editScale,onDrag:function(G,W){var Z=m.Cartesian3.distance(W,R),H=G.radius/S.scale,U=Z/H;G.radius=Z,S.scale=w.formatNum(U,2),w.entity.scale=S.scale,w.updateDraggers()}});N.radius=k,this.draggers.push(N)}},{key:"destroyDraggers",value:function(){r.EditBase.prototype.destroyDraggers.call(this),this.entityAngle&&(this.dataSource.entities.remove(this.entityAngle),delete this.entityAngle),this.entityBox&&(this.dataSource.entities.remove(this.entityBox),delete this.entityBox)}},{key:"finish",value:function(){this.entity.draw_tooltip=null}},{key:"getHeadingPosition",value:function(){var p=this.entity.position,w=this.entity.boundingSphere.radius,S=-Number(this.entity.attribute.style.heading||0),R=new m.Cartesian3(w,0,0),B=m.Transforms.eastNorthUpToFixedFrame(p),k=m.Matrix4.fromRotationTranslation(m.Matrix3.fromRotationZ(m.Math.toRadians(S)));return m.Matrix4.multiply(B,k,B),B=m.Matrix4.getMatrix3(B,new m.Matrix3),R=m.Matrix3.multiplyByVector(B,R,R),R=m.Cartesian3.add(p,R,R),R}},{key:"getHeading",value:function(p,w){var S=m.Transforms.eastNorthUpToFixedFrame(p);S=m.Matrix4.getMatrix3(S,new m.Matrix3);var R=m.Matrix3.getColumn(S,0,new m.Cartesian3),B=m.Matrix3.getColumn(S,1,new m.Cartesian3),k=m.Matrix3.getColumn(S,2,new m.Cartesian3),P=m.Cartesian3.subtract(w,p,new m.Cartesian3);P=m.Cartesian3.cross(P,k,P),P=m.Cartesian3.cross(k,P,P),P=m.Cartesian3.normalize(P,P);var D=m.Cartesian3.angleBetween(R,P),A=m.Cartesian3.angleBetween(B,P);return A>Math.PI*.5&&(D=2*Math.PI-D),-m.Math.toDegrees(D)}}]),d}(r.EditBase);z.EditPModel=n},866488:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPlotting=void 0;var L=b(e(705146)),T=b(e(122777)),C=b(e(42762)),f=b(e(330044)),v=b(e(299085)),m=b(e(234009)),o=c(e(496535)),h=c(e(187647)),l=e(432325),r=e(781983);function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,m.default)(n),y;if(u){var p=(0,m.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,v.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,f.default)(g,n);var u=x(g);function g(d){var y;return(0,T.default)(this,g),y=u.call(this,d),y.hasClosure=!![],y}return(0,C.default)(g,[{key:"getGraphic",value:function(){return this.entity.polygon}},{key:"setPositions",value:function(y){var p=this;this.entity._positions_draw=y,this._positions_draw=y,this.entity.polygon.hierarchy instanceof h.ConstantProperty&&(this.entity.polygon.hierarchy=new h.ConstantProperty((0,l.generatePolygonHierarchy)(this.entity,p)()),this.entity.polyline.positions=new h.ConstantProperty(function(w){if(!p.entity.polyline.show.getValue(w))return null;var S=o.getPositions(p.entity,!![]);return S&&S.length<3?S:(0,L.default)(S).call(S,[S[0]])}()))}},{key:"changePositionsToCallback",value:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],p=this,w=this.entity;w instanceof h.Entity&&(y?(w.polygon.hierarchy=new h.CallbackProperty((0,l.generatePolygonHierarchy)(w,p),![]),w.polyline.show=new h.CallbackProperty(function(S){var R=o.getPositions(w,!![]);return R&&R.length<3?!![]:w.polygon.outline&&w.polygon.outline.getValue(S)&&w.polygon.outlineWidth&&w.polygon.outlineWidth.getValue(S)>1},![]),w.polyline.positions=new h.CallbackProperty(function(S){if(!w.polyline.show.getValue(S))return null;var R=o.getPositions(w,!![]);return R&&R.length<3?R:(0,L.default)(R).call(R,[R[0]])},![]),w.polyline.width=new h.CallbackProperty(function(){var S=o.getPositions(w,!![]);return S&&S.length<3?2:w.polygon.outlineWidth&&w.polygon.outlineWidth.getValue()},![]),w.polyline.zIndex=new h.CallbackProperty(function(){return w.polygon.zIndex&&w.polygon.zIndex.getValue()},![]),w.polyline.material=new h.ColorMaterialProperty(new h.CallbackProperty(function(S){var R=o.getPositions(w,!![]);return R&&R.length<3?w.polygon.material.color?w.polygon.material.color.getValue(S):h.Color.YELLOW:w.polygon.outlineColor.getValue(S)},![]))):(this.entity.polygon.hierarchy=new h.ConstantProperty((0,l.generatePolygonHierarchy)(w,p)()),w.polyline.show=w.polyline.show.getValue(),w.polyline.positions=w.polyline.positions.getValue(),w.polyline.width=w.polyline.width.getValue(),w.polyline.zIndex=w.polyline.zIndex.getValue(),w.polyline.material=new h.ColorMaterialProperty(w.polyline.material.getValue().color)))}},{key:"finish",value:function(){this.changePositionsToCallback(![])}},{key:"isClampToGround",value:function(){return Object.hasOwnProperty.call(this.entity.attribute.style,"clampToGround")?this.entity.attribute.style.clampToGround:!this.entity.attribute.style.perPositionHeight}}]),g}(r.EditPolygon);z.EditPlotting=i},656248:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPoint=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=c(e(10614)),o=e(308817),h=e(870317),l=e(936161),r=c(e(187647));function s(n){if(typeof O!="function")return null;var u=new O,g=new O;return(s=function(y){return y?g:u})(n)}function c(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=s(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&M;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?M(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var u=a();return function(){var d=(0,v.default)(n),y;if(u){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var u=x(g);function g(d){var y;return(0,L.default)(this,g),y=u.call(this,d),y.viewer=d.viewer,y}return(0,T.default)(g,[{key:"getGraphic",value:function(){return this.entity.point}},{key:"getPosition",value:function(){return this.entity.position.getValue?this.entity.position.getValue():this.entity.position}},{key:"setPositions",value:function(y){this.entity.position=y[0]||y}},{key:"bindDraggers",value:function(){var y=this;this.entity.draw_tooltip=h.message.dragger.def,m.createDragger(this.dataSource,{dragger:this.entity,onDrag:function(w,S){y.setPositions(S),y.entity.isbounce==!![]&&y.addAnimate(y.viewer,y.entity)}})}},{key:"addAnimate",value:function(y,p){var w=(0,l.cartesian2lonlat)(p.position.getValue())[2],S={maxHeight:w+50,minHeight:w,heightDelta:.5},R=S.minHeight,B=S.maxHeight,k=S.heightDelta,P=(0,l.cartesian2lonlat)(p.position.getValue())[0],D=(0,l.cartesian2lonlat)(p.position.getValue())[1];y.scene.preUpdate.addEventListener(function(){w+=k,p.position=r.Cartesian3.fromDegrees(P,D,w);var A=p.position.getValue(),N=r.Cartographic.fromCartesian(A,r.Ellipsoid.WGS84);(N.height>=B||N.height<=R)&&(k*=-1)})}},{key:"finish",value:function(){this.entity.draw_tooltip=null}}]),g}(o.EditBase);z.EditPoint=i},781983:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPolygon=void 0;var L=b(e(705146)),T=b(e(669033)),C=b(e(22466)),f=b(e(99245)),v=b(e(342579)),m=b(e(636583)),o=b(e(122777)),h=b(e(42762)),l=b(e(330044)),r=b(e(299085)),s=b(e(234009)),c=y(e(496535)),x=e(111478),a=y(e(187647)),i=y(e(10614)),n=e(792672),u=e(870317),g=e(936161);function d(B){if(typeof O!="function")return null;var k=new O,P=new O;return(d=function(A){return A?P:k})(B)}function y(B,k){if(!k&&B&&B.__esModule)return B;if(B===null||E(B)!=="object"&&typeof B!="function")return{default:B};var P=d(k);if(P&&P.has(B))return P.get(B);var D={},A=Object.defineProperty&&M;for(var N in B)if(N!=="default"&&Object.prototype.hasOwnProperty.call(B,N)){var I=A?M(B,N):null;I&&(I.get||I.set)?Object.defineProperty(D,N,I):D[N]=B[N]}return D.default=B,P&&P.set(B,D),D}function p(B){var k=w();return function(){var D=(0,s.default)(B),A;if(k){var N=(0,s.default)(this).constructor;A=F(D,arguments,N)}else A=D.apply(this,arguments);return(0,r.default)(this,A)}}function w(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var S=a.Cartesian3,R=function(B){(0,l.default)(P,B);var k=p(P);function P(D){var A;return(0,o.default)(this,P),A=k.call(this,D),A.hasClosure=!![],A}return(0,h.default)(P,[{key:"getGraphic",value:function(){return this.entity.polygon}},{key:"getPosition",value:function(){return this._positions_draw}},{key:"setPositions",value:function(A){if(this.entity._positions_draw=A,this._positions_draw=A,this.getGraphic().hierarchy instanceof a.ConstantProperty){this.entity.polygon.hierarchy=new a.ConstantProperty(new a.PolygonHierarchy((0,m.default)(A)));var N=(0,m.default)(A);N=this.updatePositionsHeightByAttr(N),N.push(N[0]),this.entity.polyline.positions=new a.ConstantProperty(N)}}},{key:"changePositionsToCallback",value:function(){var A=this,N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],I=this.entity,G=this;if(I instanceof a.Entity)if(N)I.polygon.hierarchy=new a.CallbackProperty(function(){(0,v.default)(this,A);var H=I._positions_draw;return new a.PolygonHierarchy(H)}.bind(this),![]),I.polyline.show=new a.CallbackProperty(function(H){var U=c.getPositions(I);return U&&U.length<3?!![]:!!(I.polygon.outline&&I.polygon.outline.getValue(H)&&I.polygon.outlineWidth&&I.polygon.outlineWidth.getValue(H)>1&&!I.polygon.extrudedHeight)},![]),I.polyline.positions=new a.CallbackProperty(function(H){var U;if(((U=I.polyline.show)===null||U===void 0?void 0:U.getValue(H))===![])return null;var V=c.getPositions(I);return V&&V.length<3?V:(V=G.updatePositionsHeightByAttr(V),(0,L.default)(V).call(V,[V[0]]))},![]),I.polyline.width=new a.CallbackProperty(function(){var H=c.getPositions(I);return H&&H.length<3?2:I.polygon.outlineWidth&&I.polygon.outlineWidth.getValue()},![]),I.polyline.zIndex=new a.CallbackProperty(function(){return I.polygon.zIndex&&I.polygon.zIndex.getValue()},![]),I.polyline.material=new a.ColorMaterialProperty(new a.CallbackProperty(function(H){var U=c.getPositions(I);return U&&U.length<3?I.polygon.material.color?I.polygon.material.color.getValue(H):a.Color.YELLOW:I.polygon.outlineColor.getValue(H)},![]));else{var W,Z=this.entity._positions_draw;this.entity.polygon.hierarchy=new a.ConstantProperty(new a.PolygonHierarchy(Z)),I.polyline.show=I.polyline.show.getValue(),I.polyline.positions=I.polyline.positions.getValue(),I.polyline.width=I.polyline.width.getValue(),I.polyline.zIndex=(W=I.polyline.zIndex)===null||W===void 0?void 0:W.getValue(),I.polyline.material=new a.ColorMaterialProperty(I.polyline.material.getValue().color)}}},{key:"finish",value:function(){this.changePositionsToCallback(![])}},{key:"isClampToGround",value:function(){return Object.hasOwnProperty.call(this.entity.attribute.style,"clampToGround")?this.entity.attribute.style.clampToGround:!this.entity.attribute.style.perPositionHeight}},{key:"updatePositionsHeightByAttr",value:function(A){if(this.getGraphic().height!==void 0&&this.getGraphic().perPositionHeight!=!![]){var N=this.getGraphic().height.getValue(this.viewer.clock.currentTime);A=(0,n.setPositionsHeight)(A,N)}return A}},{key:"bindDraggers",value:function(){for(var A=this,N,I=this,G=this.getPosition(),W=this.isClampToGround(),Z=this.hasMidPoint(),H=function(rt){var ht=this,Pt=G[U];Pt=A.updatePositionsHeightByAttr(Pt),W&&(Pt=(0,n.updateHeightForClampToGround)(A.viewer,Pt),G[U]=Pt);var wt=i.createDragger(A.dataSource,{position:Pt,onDragStart:function(Tt,mt){(0,v.default)(this,ht),I.fire("drag-start",Tt,mt)}.bind(this),onDrag:function(Tt,mt){if(mt=I.updatePositionsHeightByAttr(mt),Tt.position=mt,G[Tt.index]=mt,I.getGraphic().hierarchy instanceof a.ConstantProperty&&I.setPositions(G),Tt.callback&&Tt.callback(G),I.heightDraggers&&I.heightDraggers.length>0){var Nt=I.getGraphic().extrudedHeight.getValue(I.viewer.clock.currentTime);I.heightDraggers[Tt.index].position=(0,n.setPositionsHeight)(mt,Nt)}if(Z){var ct,vt;if(I.hasClosure||!I.hasClosure&&Tt.index!==0){Tt.index===0?(ct=rt*2-1,vt=rt-1):(ct=Tt.index*2-1,vt=Tt.index-1);var Lt=G[vt],Ct=S.midpoint(mt,Lt,new S);Ct=I.updatePositionsHeightByAttr(Ct),W&&(Ct=(0,n.updateHeightForClampToGround)(I.viewer,Ct)),I.draggers[ct].position=Ct}if(I.hasClosure||!I.hasClosure&&Tt.index!==rt-1){Tt.index===rt-1?(ct=Tt.index*2+1,vt=0):(ct=Tt.index*2+1,vt=Tt.index+1);var jt=S.midpoint(mt,G[vt],new S);jt=I.updatePositionsHeightByAttr(jt),W&&(jt=(0,n.updateHeightForClampToGround)(I.viewer,jt)),I.draggers[ct].position=jt}}I.fire("drag",Tt,mt)},onDragEnd:function(Tt,mt){I.fire("drag-end",Tt,mt)}});if(wt.index=U,A.draggers.push(wt),Z&&(A.hasClosure||!A.hasClosure&&U<rt-1)){var Mt=(U+1)%rt,Ft=S.midpoint(Pt,G[Mt],new S);Ft=I.updatePositionsHeightByAttr(Ft),W&&(Ft=(0,n.updateHeightForClampToGround)(A.viewer,Ft));var Dt=i.createDragger(A.dataSource,{position:Ft,type:i.PointType.AddMidPoint,tooltip:u.message.dragger.addMidPoint,onDragStart:function(Tt,mt){(0,T.default)(G).call(G,Tt.index,0,mt),I.entity.thisIdx=Tt.index,I.fire("drag-start",Tt,mt)},onDrag:function(Tt,mt){G[Tt.index]=mt,I.getGraphic().hierarchy instanceof a.ConstantProperty&&I.setPositions(G),Tt.callback&&Tt.callback(G),I.fire("drag",Tt,mt)},onDragEnd:function(Tt,mt){I.updateDraggers(),I.fire("drag-end",Tt,mt)}});Dt.index=Mt,Dt._isMidPoint=!![],A.draggers.push(Dt)}},U=0,V=G.length;U<V;U++)H(V);if(this.setPositions(G),!this.draggers){var Y=(0,n.centerOfMass)(G);W&&(Y=(0,n.updateHeightForClampToGround)(this.viewer,Y));var $,K,J,Q,et="",nt,st=i.createDragger(this.dataSource,{position:Y,onDragStart:function(rt,ht){et="left",$=ht},onDrag:function(rt,ht){if(ht=I.updatePositionsHeightByAttr(ht),rt.position=ht,et==="left"){K=ht.x-$.x,J=ht.y-$.y,Q=ht.z-$.z;for(var Pt={x:K,y:J,z:Q},wt=0;wt<G.length;wt++)G[wt]=S.add(G[wt],Pt,new S);for(var Mt=0;Mt<I.draggers.length;Mt++){var Ft=I.draggers[Mt];Ft.position=S.add(Ft.position.getValue(),Pt,new S)}$=ht}else if(et==="right"){K=ht.x-$.x,J=ht.y-$.y,Q=ht.z-$.z;for(var Dt={x:K,y:J,z:Q},Rt=0;Rt<G.length;Rt++)G[Rt]=S.add(G[Rt],Dt,new S),G[Rt]=(0,n.setPositionsHeight)(G[Rt],nt);for(var Tt=0;Tt<I.draggers.length;Tt++){var mt=I.draggers[Tt];mt.position=S.add(mt.position.getValue(),Dt,new S),mt.position=(0,n.setPositionsHeight)(mt.position.getValue(),nt)}$=ht}},onDragEnd:function(){$=null,et=""},onRightDown:function(rt,ht){et="right",nt=(0,g.cartesian2lonlat)(ht)[2],$=ht},onRightUp:function(){et="",$=null}});st.index=this.draggers.length,this.draggers.push(st)}this.entity.attribute.style.isCompositeDragger&&this.bindCompositeDraggers(),(N=this.getGraphic())!==null&&N!==void 0&&N.extrudedHeight&&this.bindHeightDraggers(),this.entity.attribute.style.isDragBelow&&this.bindBelowHeightDraggers(),this.entity.attribute.config&&this.entity.attribute.config.isBox&&this.bindBoxDraggers()}},{key:"bindHeightDraggers",value:function(A){var N=this;this.heightDraggers=[],A=A||this.getPosition();for(var I=N.getGraphic().extrudedHeight.getValue(this.viewer.clock.currentTime),G=0,W=A.length;G<W;G++){var Z=A[G];Z=(0,n.setPositionsHeight)(Z,I);var H=i.createDragger(this.dataSource,{position:Z,type:i.PointType.MoveHeight,tooltip:u.message.dragger.moveHeight,onDrag:function(V,Y){var $=a.Cartographic.fromCartesian(Y).height,K=(0,n.getMaxHeight)(N.getPosition());$<=K&&($=K),N.getGraphic().extrudedHeight=$,N.entity.attribute.style.extrudedHeight=N.formatNum($-K,2),N.updateHeightDraggers($)}});this.draggers.push(H),this.heightDraggers.push(H)}}},{key:"bindBelowHeightDraggers",value:function(){for(var A=0,N=this.draggers.length;A<N;A++)this.dataSource.entities.remove(this.draggers[A]);var I=this,G=this.getPosition(),W=I.getGraphic().extrudedHeight.getValue(this.viewer.clock.currentTime),Z=(0,n.centerOfMass)(G),H,U=i.createDragger(this.dataSource,{position:Z,type:i.PointType.MoveHeight,tooltip:u.message.dragger.moveHeight,onDrag:function(K,J){var Q=this,et=a.Cartographic.fromCartesian(J).height,nt=a.Cartographic.fromCartesian(Y.position.getValue()).height;if(et<nt){var st,ut;H=H||J;for(var rt=et-a.Cartographic.fromCartesian(H).height,ht=(0,C.default)(st=I.draggers).call(st,function(Tt){return(0,v.default)(this,Q),Tt._pointType===1||Tt._pointType===2}.bind(this)),Pt=0;Pt<ht.length;Pt++){var wt=ht[Pt],Mt=(0,n.setPositionsHeight)(wt.position.getValue(I.viewer.clock.currentTime),et+rt);wt.position.setValue(Mt)}for(var Ft=[],Dt=(0,C.default)(ut=I.draggers).call(ut,function(Tt){return(0,v.default)(this,Q),Tt._pointType===1}.bind(this)),Rt=0;Rt<Dt.length;Rt++)Ft.push(Dt[Rt].position.getValue());I.setPositions(Ft),H=J,K.callback&&K.callback(J,"polygon-2")}else U.position=(0,n.setPositionsHeight)(J,nt)},onDragEnd:function(){H=null}}),V=(0,n.setPositionsHeight)(Z,W),Y=i.createDragger(this.dataSource,{position:V,type:i.PointType.MoveHeight,tooltip:u.message.dragger.moveHeight,onDrag:function(K,J){var Q=a.Cartographic.fromCartesian(J).height,et=a.Cartographic.fromCartesian(U.position.getValue()).height;if(et<Q){I.getGraphic().extrudedHeight=Q;var nt=(0,n.getMaxHeight)(I.getPosition());I.entity.attribute.style.extrudedHeight=I.formatNum(Q-nt,2),I.updateHeightDraggers(Q),K.callback&&K.callback(J,"polygon-1")}else Y.position=(0,n.setPositionsHeight)(J,et)}});this.draggers.push(U,Y)}},{key:"bindFlattenHeightDraggers",value:function(){for(var A=0,N=this.draggers.length;A<N;A++)this.dataSource.entities.remove(this.draggers[A]);var I=this,G=this.getPosition(),W=(0,n.centerOfMass)(G),Z,H=i.createDragger(this.dataSource,{position:W,type:i.PointType.MoveHeight,tooltip:u.message.dragger.moveHeight,onDrag:function(V,Y){var $,K=this,J;Z=Z||Y;for(var Q=a.Cartographic.fromCartesian(Y).height,et=Q-a.Cartographic.fromCartesian(Z).height,nt=(0,C.default)($=I.draggers).call($,function(Mt){return(0,v.default)(this,K),Mt._pointType===1||Mt._pointType===2}.bind(this)),st=0;st<nt.length;st++){var ut=nt[st],rt=(0,n.setPositionsHeight)(ut.position.getValue(I.viewer.clock.currentTime),Q+et);ut.position.setValue(rt)}for(var ht=[],Pt=(0,C.default)(J=I.draggers).call(J,function(Mt){return(0,v.default)(this,K),Mt._pointType===1}.bind(this)),wt=0;wt<Pt.length;wt++)ht.push(Pt[wt].position.getValue());I.setPositions(ht),Z=Y,V.callback&&V.callback(Y,"flatten")},onDragEnd:function(){Z=null}});this.draggers.push(H)}},{key:"bindBoxDraggers",value:function(){for(var A=this,N=0,I=this.draggers.length;N<I;N++)this.dataSource.entities.remove(this.draggers[N]);this.draggers=[];var G=this,W=this.getPosition(),Z=G.getGraphic().extrudedHeight.getValue(this.viewer.clock.currentTime),H=W[0],U=W[1],V=W[2],Y=W[3];G._positions_draw=[H,U,V,Y];var $=S.midpoint(H,V,H.clone()),K=(0,n.setPositionsHeight)($,Z),J=S.midpoint($,K,$.clone()),Q=a.Cartographic.fromCartesian(J).height,et=S.midpoint(V,Y,V.clone()),nt=(0,n.setPositionsHeight)(et,Q),st=S.midpoint(U,V,U.clone()),ut=(0,n.setPositionsHeight)(st,Q),rt=S.midpoint(H,U,H.clone()),ht=(0,n.setPositionsHeight)(rt,Q),Pt=S.midpoint(H,Y,H.clone()),wt=(0,n.setPositionsHeight)(Pt,Q);G.entity.polygon.hierarchy=new a.CallbackProperty(function(){return new a.PolygonHierarchy([H,U,V,Y])},![]);var Mt=this.createDraggerFun(nt,[H,Y]);Mt.update=function(ct){(0,v.default)(this,A),V=S.add(V,ct,new S),Y=S.add(Y,ct,new S),G._positions_draw=[H,U,V,Y],nt=S.add(nt,ct,new S),Mt.callback&&Mt.callback(nt,"box-1"),Nt()}.bind(this);var Ft=this.createDraggerFun(ut,[H,U]);Ft.update=function(ct){(0,v.default)(this,A),U=S.add(U,ct,new S),V=S.add(V,ct,new S),G._positions_draw=[H,U,V,Y],ut=S.add(ut,ct,new S),Ft.callback&&Ft.callback(ut,"box-2"),Nt()}.bind(this);var Dt=this.createDraggerFun(ht,[Y,H]);Dt.update=function(ct){(0,v.default)(this,A),H=S.add(H,ct,new S),U=S.add(U,ct,new S),G._positions_draw=[H,U,V,Y],ht=S.add(ht,ct,new S),Dt.callback&&Dt.callback(ht,"box-3"),Nt()}.bind(this);var Rt=this.createDraggerFun(wt,[U,H]);Rt.update=function(ct){(0,v.default)(this,A),H=S.add(H,ct,new S),Y=S.add(Y,ct,new S),G._positions_draw=[H,U,V,Y],wt=S.add(wt,ct,new S),Rt.callback&&Rt.callback(wt,"box-4"),Nt()}.bind(this);var Tt=i.createDragger(this.dataSource,{position:K,type:i.PointType.MoveHeight,tooltip:u.message.dragger.moveHeight,onDrag:function(vt,Lt){var Ct=a.Cartographic.fromCartesian(Lt).height,jt=a.Cartographic.fromCartesian(mt.position.getValue()).height;if(jt<Ct){G.getGraphic().extrudedHeight=Ct;var zt=(0,n.getMaxHeight)(G.getPosition());G.entity.attribute.style.extrudedHeight=G.formatNum(Ct-zt,2),G.updateHeightDraggers(Ct),vt.callback&&vt.callback(Lt,"box-5"),Z=Ct,Nt()}else Tt.position=(0,n.setPositionsHeight)(Lt,jt)}}),mt=i.createDragger(this.dataSource,{position:$,type:i.PointType.MoveHeight,tooltip:u.message.dragger.moveHeight,onDrag:function(vt,Lt){var Ct=a.Cartographic.fromCartesian(Lt).height,jt=a.Cartographic.fromCartesian(Tt.position.getValue()).height;Ct<jt?(H=(0,n.setPositionsHeight)(H,Ct),U=(0,n.setPositionsHeight)(U,Ct),V=(0,n.setPositionsHeight)(V,Ct),Y=(0,n.setPositionsHeight)(Y,Ct),vt.callback&&vt.callback(Lt,"box-6"),Nt()):mt.position=(0,n.setPositionsHeight)(Lt,jt)}});this.draggers.push(Mt,Ft,Dt,Rt,Tt,mt),Nt();function Nt(){Z=G.getGraphic().extrudedHeight.getValue(G.viewer.clock.currentTime),$=S.midpoint(H,V,H.clone()),K=(0,n.setPositionsHeight)($,Z),J=S.midpoint($,K,$.clone()),Q=a.Cartographic.fromCartesian(J).height,et=S.midpoint(V,Y,V.clone()),nt=(0,n.setPositionsHeight)(et,Q),st=S.midpoint(U,V,U.clone()),ut=(0,n.setPositionsHeight)(st,Q),rt=S.midpoint(H,U,H.clone()),ht=(0,n.setPositionsHeight)(rt,Q),Pt=S.midpoint(H,Y,H.clone()),wt=(0,n.setPositionsHeight)(Pt,Q),Mt.position.setValue(nt),Ft.position.setValue(ut),Dt.position.setValue(ht),Rt.position.setValue(wt),Tt.position.setValue(K),mt.position.setValue($),G.entity.editing._positions_draw=[H,U,V,Y]}}},{key:"createDraggerFun",value:function(A,N){var I,G=(0,f.default)(N,2),W=G[0],Z=G[1],H=i.createDragger(this.dataSource,{position:A,type:i.PointType.MoveLevel,tooltip:u.message.dragger.moveHeight,onDrag:function(V,Y){I=I||Y;var $;$=S.subtract(I,Y,new S),I=Y;var K=S.subtract(Z,W,new S),J=S.normalize(K,new S),Q=S.projectVector($,J,new S);Q=S.multiplyByScalar(Q,-1,new S),V.update&&V.update(Q)},onDragEnd:function(){I=null}});return H}},{key:"bindMoveHeightDraggers",value:function(){for(var A=0,N=this.draggers.length;A<N;A++)this.dataSource.entities.remove(this.draggers[A]);this.draggers=[];var I=this;this.heightDraggers=[];var G=this.entity.rectangle&&this.entity.rectangle.coordinates.getValue(),W=a.Rectangle.center(G);W.height=this.entity.rectangle.height&&this.entity.rectangle.height.getValue(),W=a.Cartographic.toCartesian(W);var Z=i.createDragger(this.dataSource,{position:W,type:i.PointType.MoveHeight,tooltip:u.message.dragger.moveHeight,onDrag:function(U,V){var Y=a.Cartographic.fromCartesian(V).height;I.getGraphic().height.setValue(Y),I.entity.attribute.style.height=Y,I.updateHeightDraggers(Y),U.callback&&U.callback(V,0)}});this.draggers.push(Z),this.heightDraggers.push(Z)}},{key:"updateHeightDraggers",value:function(A){for(var N=0;N<this.heightDraggers.length;N++){var I=this.heightDraggers[N],G=(0,n.setPositionsHeight)(I.position.getValue(this.viewer.clock.currentTime),A);I.position.setValue(G)}}}]),P}(x.EditPolyline);z.EditPolygon=R},84236:function(X,z,e){"use strict";var E=e(465557),F=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPolygonEx=void 0;var O=F(e(122777)),M=F(e(42762)),b=F(e(330044)),L=F(e(299085)),T=F(e(234009)),C=e(781983);function f(o){var h=v();return function(){var r=(0,T.default)(o),s;if(h){var c=(0,T.default)(this).constructor;s=E(r,arguments,c)}else s=r.apply(this,arguments);return(0,L.default)(this,s)}}function v(){if(typeof Reflect>"u"||!E)return![];if(E.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(E(Boolean,[],function(){})),!![]}catch{return![]}}var m=function(o){(0,b.default)(l,o);var h=f(l);function l(r){var s;return(0,O.default)(this,l),s=h.call(this,r),s._hasMidPoint=![],s}return(0,M.default)(l,[{key:"changePositionsToCallback",value:function(){this._positions_draw=this.entity._positions_draw,this._positions_show=this.entity._positions_show}},{key:"updateAttrForEditing",value:function(){if(this._positions_draw==null||this._positions_draw.length<this._minPointNum){this._positions_show=this._positions_draw;return}this._positions_show=this.getShowPositions(this._positions_draw,this.entity.attribute),this.entity._positions_show=this._positions_show}},{key:"getShowPositions",value:function(s){return s}},{key:"finish",value:function(){this.entity._positions_show=this._positions_show,this.entity._positions_draw=this._positions_draw}}]),l}(C.EditPolygon);z.EditPolygonEx=m},111478:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPolyline=void 0;var L=b(e(53267)),T=b(e(669033)),C=b(e(636583)),f=b(e(330044)),v=b(e(299085)),m=b(e(234009)),o=b(e(99245)),h=b(e(342579)),l=b(e(122777)),r=b(e(42762)),s=y(e(187647)),c=e(308817),x=e(792672),a=y(e(10614)),i=e(870317),n=y(e(125794)),u=e(580823),g=e(936161);function d(D){if(typeof O!="function")return null;var A=new O,N=new O;return(d=function(G){return G?N:A})(D)}function y(D,A){if(!A&&D&&D.__esModule)return D;if(D===null||E(D)!=="object"&&typeof D!="function")return{default:D};var N=d(A);if(N&&N.has(D))return N.get(D);var I={},G=Object.defineProperty&&M;for(var W in D)if(W!=="default"&&Object.prototype.hasOwnProperty.call(D,W)){var Z=G?M(D,W):null;Z&&(Z.get||Z.set)?Object.defineProperty(I,W,Z):I[W]=D[W]}return I.default=D,N&&N.set(D,I),I}function p(D){var A=w();return function(){var I=(0,m.default)(D),G;if(A){var W=(0,m.default)(this).constructor;G=F(I,arguments,W)}else G=I.apply(this,arguments);return(0,v.default)(this,G)}}function w(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var S=s.Cartesian3,R=s.Color.DARKORANGE.clone(),B=s.Color.DEEPSKYBLUE.clone(),k=function(){function D(){(0,l.default)(this,D)}return(0,r.default)(D,[{key:"create",value:function(N){var I=this,G=0;N.forEach(function(ie){(0,h.default)(this,I),G+=(0,g.cartesian2lonlat)(ie)[2]}.bind(this)),G/=N.length;var W=(0,x.centerOfMass)(N,G),Z=(0,g.cartesian2lonlat)(W),H;if(N.length>=3){var U=(0,u.getArea)(N),V=Math.sqrt(U/Math.PI)*2;H=V*2/111e3}else{var Y=(0,g.cartesians2lonlats)(N),$=n.featureCollection([n.lineString(Y)]),K=n.envelope($),J=(0,o.default)(K.bbox,4),Q=J[0],et=J[1],nt=J[2],st=J[3];H=Math.min(nt-Q,st-et)}var ut=[Z[0]-H/16,Z[1]-H/16,G],rt=[ut[0]+H/8,ut[1],G],ht=[ut[0],ut[1]+H/8,G],Pt=[ut[0]+H/8,ut[1]+H/8,G],wt=S.fromDegrees.apply(void 0,ut),Mt=S.fromDegrees.apply(void 0,rt),Ft=S.fromDegrees.apply(void 0,ht),Dt=S.fromDegrees.apply(void 0,Pt),Rt=s.Transforms.eastNorthUpToFixedFrame(W),Tt=s.Matrix4.inverse(Rt,new s.Matrix4);function mt(ie){return s.Matrix4.multiplyByPoint(Tt,ie,new S)}var Nt=mt(wt),ct=mt(Mt),vt=mt(Ft),Lt=mt(Dt),Ct=new s.GeometryInstance({geometry:new s.PolylineGeometry({positions:[Nt.clone(),ct.clone()],width:12,arcType:s.ArcType.NONE,vertexFormat:s.PolylineMaterialAppearance.VERTEX_FORMAT})}),jt=new s.GeometryInstance({geometry:new s.PolylineGeometry({positions:[Nt.clone(),vt.clone()],width:12,vertexFormat:s.PolylineMaterialAppearance.VERTEX_FORMAT})}),zt=S.distance(W,Mt),Yt=new s.CircleOutlineGeometry({center:W,radius:zt*1.2,granularity:.01});Yt=s.CircleOutlineGeometry.createGeometry(Yt);for(var Zt=[],ft=Yt.indices.length/2,gt=(0,L.default)(Yt.attributes.position),dt=0;dt<ft;dt++){var lt={x:gt[3*dt],y:gt[3*dt+1],z:gt[3*dt+2]};lt=(0,x.setPositionsHeight)(lt,G);var ot=mt(lt);Zt[dt]=ot}Zt.push(Zt[0]),Yt=new s.GeometryInstance({geometry:new s.PolylineGeometry({positions:Zt,width:6,arcType:s.ArcType.NONE,vertexFormat:s.PolylineMaterialAppearance.VERTEX_FORMAT})});var it=new s.PolygonGeometry({polygonHierarchy:new s.PolygonHierarchy([Nt.clone(),ct.clone(),Lt.clone(),vt.clone()])}),yt=new s.PlaneGeometry({vertexFormat:s.MaterialAppearance.VERTEX_FORMAT}),Ot=new s.Cartesian3(S.distance(wt,Mt),S.distance(wt,Ft),1),St=s.Matrix4.fromScale(Ot);it=new s.GeometryInstance({modelMatrix:St,geometry:yt});var Gt=new s.Primitive({geometryInstances:Ct,asynchronous:!![],modelMatrix:Rt,appearance:new s.PolylineMaterialAppearance({renderState:{depthTest:{enabled:![]}},material:new s.Material({fabric:{type:"PolylineArrow",uniforms:{color:B}}})})}),Ut=new s.Primitive({geometryInstances:jt,asynchronous:!![],modelMatrix:Rt,appearance:new s.PolylineMaterialAppearance({renderState:{depthTest:{enabled:![]}},material:new s.Material({fabric:{type:"PolylineArrow",uniforms:{color:B}}})})});Gt.draggerName="arrow_horizontal",Ut.draggerName="arrow_vertical";var Kt=new s.Primitive({geometryInstances:Yt,asynchronous:!![],modelMatrix:Rt,releaseGeometryInstances:![],appearance:new s.PolylineMaterialAppearance({renderState:{depthTest:{enabled:![]}},material:new s.Material({fabric:{type:"Color",uniforms:{color:R}}})})});Kt.draggerName="circle";var Jt=new s.Primitive({geometryInstances:it,asynchronous:!![],modelMatrix:Rt,appearance:new s.MaterialAppearance({material:new s.Material({fabric:{type:"Color",uniforms:{color:R}}}),renderState:{depthTest:{enabled:![]}}})});Jt.draggerName="plane";var te=new s.PrimitiveCollection;return te.add(Gt),te.add(Ut),te.add(Kt),te.add(Jt),te._origin=W,te}}]),D}(),P=function(D){(0,f.default)(N,D);var A=p(N);function N(I){var G;return(0,l.default)(this,N),G=A.call(this,I),G._positions_draw=I.entity._positions_draw,G._hasMidPoint=!![],G.hasClosure=![],G.heightDraggers=null,G}return(0,r.default)(N,[{key:"getGraphic",value:function(){return this.entity.polyline}},{key:"getPosition",value:function(){return this._positions_draw||this.entity._positions_draw}},{key:"setPositions",value:function(G){var W;this._positions_draw=G,this.entity._positions_draw=G,!(((W=this.entity.polyline)===null||W===void 0?void 0:W.positions)instanceof s.CallbackProperty)&&(this.entity.polyline.positions=new s.ConstantProperty(G)),this.updateAttrForEditing()}},{key:"changePositionsToCallback",value:function(){var G=this,W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],Z=this.entity;if(!(Z instanceof s.Entity)){Z.positions=Z._positions_draw;return}W?this.getGraphic().positions=new s.CallbackProperty(function(){return(0,h.default)(this,G),Z._positions_draw}.bind(this),![]):this.getGraphic().positions=Z._positions_draw}},{key:"finish",value:function(){this.changePositionsToCallback(![])}},{key:"isClampToGround",value:function(){return this.entity.attribute.style.clampToGround}},{key:"hasMidPoint",value:function(){return this._hasMidPoint&&this.getPosition().length<this._maxPointNum}},{key:"updatePositionsHeightByAttr",value:function(G){return G}},{key:"updateAttrForEditing",value:function(){this.entity instanceof s.Polyline&&(this.entity.positions=this.getPosition())}},{key:"bindDraggers",value:function(){for(var G=this,W=this,Z=this.getPosition(),H=this.isClampToGround(),U=this.hasMidPoint(),V=function(J){var Q=this,et=Z[Y];et=G.updatePositionsHeightByAttr(et),H&&(et=(0,x.updateHeightForClampToGround)(G.viewer,et),Z[Y]=et);var nt=a.createDragger(G.dataSource,{position:et,onDragStart:function(Pt,wt){(0,h.default)(this,Q),W.fire("drag-start",Pt,wt)}.bind(this),onDrag:function(Pt,wt){if(wt=W.updatePositionsHeightByAttr(wt),Pt.position=wt,Z[Pt.index]=wt,Pt.callback&&Pt.callback(Z),W.heightDraggers&&W.heightDraggers.length>0){var Mt=W.getGraphic().extrudedHeight.getValue(W.viewer.clock.currentTime);W.heightDraggers[Pt.index].position=(0,x.setPositionsHeight)(wt,Mt)}if(U){var Ft,Dt;if(W.hasClosure||!W.hasClosure&&Pt.index!==0){Pt.index===0?(Ft=J*2-1,Dt=J-1):(Ft=Pt.index*2-1,Dt=Pt.index-1);var Rt=Z[Dt],Tt=S.midpoint(wt,Rt,new S);Tt=W.updatePositionsHeightByAttr(Tt),H&&(Tt=(0,x.updateHeightForClampToGround)(W.viewer,Tt)),W.draggers[Ft].position=Tt}if(W.hasClosure||!W.hasClosure&&Pt.index!==J-1){Pt.index===J-1?(Ft=Pt.index*2+1,Dt=0):(Ft=Pt.index*2+1,Dt=Pt.index+1);var mt=S.midpoint(wt,Z[Dt],new S);mt=W.updatePositionsHeightByAttr(mt),H&&(mt=(0,x.updateHeightForClampToGround)(W.viewer,mt)),W.draggers[Ft].position=mt}}W.fire("drag",Pt,wt)},onDragEnd:function(Pt,wt){W.fire("drag-end",Pt,wt)}});if(nt.index=Y,G.draggers.push(nt),U&&(G.hasClosure||!G.hasClosure&&Y<J-1)){var st=(Y+1)%J,ut=S.midpoint(et,Z[st],new S);ut=W.updatePositionsHeightByAttr(ut),H&&(ut=(0,x.updateHeightForClampToGround)(G.viewer,ut));var rt=a.createDragger(G.dataSource,{position:ut,type:a.PointType.AddMidPoint,tooltip:i.message.dragger.addMidPoint,onDragStart:function(Pt,wt){(0,T.default)(Z).call(Z,Pt.index,0,wt),W.entity.thisIdx=Pt.index,W.fire("drag-start",Pt,wt)},onDrag:function(Pt,wt){Z[Pt.index]=wt,Pt.callback&&Pt.callback(Z),W.fire("drag",Pt,wt)},onDragEnd:function(Pt,wt){W.updateDraggers(),W.fire("drag-end",Pt,wt)}});rt.index=st,rt._isMidPoint=!![],G.draggers.push(rt)}},Y=0,$=Z.length;Y<$;Y++)V($);this.entity.attribute.style.isCompositeDragger&&this.bindCompositeDraggers()}},{key:"bindCompositeDraggers",value:function(){var G,W=this,Z=this,H=this.getPosition(),U=(G=this.getGraphic().extrudedHeight)===null||G===void 0?void 0:G.getValue();if(U)return;var V=new k;this.draggers_pri=V.create(H),this.viewer.scene.primitives.add(this.draggers_pri);function Y(){var rt=this,ht,Pt,wt,Mt,Ft=Z.getPosition(),Dt=0;Ft.forEach(function(Tt){(0,h.default)(this,rt),Dt+=(0,g.cartesian2lonlat)(Tt)[2]}.bind(this)),Dt/=Ft.length;var Rt=(0,x.centerOfMass)(Ft,Dt);return wt=s.Transforms.eastNorthUpToFixedFrame(Rt),Mt=s.Matrix4.inverse(wt,new s.Matrix4),ht=s.Matrix4.multiplyByPoint(wt,new S(1,0,0),new S),Pt=s.Matrix4.multiplyByPoint(wt,new S(0,1,0),new S),S.subtract(Rt,ht,ht),S.subtract(Rt,Pt,Pt),S.normalize(ht,ht),S.normalize(Pt,Pt),[ht,Pt,wt,Mt]}var $=Y(),K=(0,o.default)($,4),J=K[0],Q=K[1],et=K[2],nt=K[3];function st(rt){return s.Matrix4.multiplyByPoint(nt,rt,new S)}function ut(rt){return s.Matrix4.multiplyByPoint(et,rt,new S)}this.draggers_pri._primitives.forEach(function(rt){var ht=this;(0,h.default)(this,W);var Pt,wt=new S,Mt=new S,Ft,Dt,Rt;a.createDragger(this.dataSource,{dragger:rt,onDragStart:function(mt,Nt){(0,h.default)(this,ht),Rt=mt.draggerName,Pt=Nt;var ct=this.getPosition(),vt=(0,x.centerOfMass)(ct);Ft=s.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,vt),s.Matrix4.multiplyByPoint(nt,Nt,Mt)}.bind(this),onDrag:function(mt,Nt){(0,h.default)(this,ht),s.Matrix4.multiplyByPoint(nt,Nt,wt);var ct=S.subtract(wt,Mt,new S);switch(Rt){case"arrow_horizontal":{S.projectVector(ct,S.UNIT_X,ct);break}case"arrow_vertical":{S.projectVector(ct,s.Cartesian3.UNIT_Y,ct);break}case"circle":{Dt=Dt||s.SceneTransforms.wgs84ToWindowCoordinates(Z.viewer.scene,Pt);var vt=s.SceneTransforms.wgs84ToWindowCoordinates(Z.viewer.scene,Nt),Lt=S.subtract(Dt,Ft,new S),Ct=S.subtract(vt,Ft,new S);if(Dt=vt,Lt.z=Ct.z=0,S.magnitude(Lt)===0)return;var jt=S.angleBetween(Lt,Ct),zt=s.Cartesian3.cross(Ct,Lt,new S);zt=zt.z/Math.abs(zt.z),jt*=zt;for(var Yt=s.Matrix3.fromRotationZ(jt),Zt=this.getPosition(),ft=0;ft<Zt.length;ft++){var gt=s.Matrix4.multiplyByPoint(nt,Zt[ft],new S),dt=s.Matrix3.multiplyByVector(Yt,gt,new s.Cartesian3),lt=s.Matrix4.multiplyByPoint(et,dt,new S);Zt[ft]=lt,Z.setPositions((0,C.default)(Zt))}for(var ot=0;ot<this.draggers_pri.length;ot++){var it=this.draggers_pri.get(ot);s.Matrix4.multiplyByMatrix3(it.modelMatrix,Yt,it.modelMatrix)}s.Matrix3.multiplyByVector(Yt,J,J),s.Matrix3.multiplyByVector(Yt,Q,Q),Pt=Nt.clone(),Z.updateDraggerPositions();return}}for(var yt=s.Matrix4.fromTranslation(ct,new s.Matrix4),Ot=this.getPosition(),St=0;St<Ot.length;St++){var Gt=st(Ot[St]);s.Matrix4.multiplyByPoint(yt,Gt,Gt);var Ut=ut(Gt);Ot[St]=Ut}Z.setPositions((0,C.default)(Ot));for(var Kt=0;Kt<this.draggers_pri.length;Kt++){var Jt=this.draggers_pri.get(Kt);s.Matrix4.multiply(Jt.modelMatrix,yt,Jt.modelMatrix)}Pt=Nt.clone(),et=this.draggers_pri.get(0).modelMatrix.clone(),nt=s.Matrix4.inverse(et,new s.Matrix4),s.Matrix4.multiplyByPoint(nt,Nt,Mt),Z.updateDraggerPositions()}.bind(this),onDragEnd:function(){(0,h.default)(this,ht),Dt=Pt=Rt=void 0}.bind(this)})}.bind(this))}},{key:"updateDraggerPositions",value:function(){if(!this._enabled)return this;for(var G=this.getPosition(),W=this.draggers,Z=0,H=W.length;Z<H;Z++){var U=W[Z],V=Math.floor(Z/2);if(!U._isMidPoint)U.position=G[V];else{var Y=[G[V],G[V+1]||G[0]],$=Y[0],K=Y[1],J=S.midpoint($,K,new S);J=this.updatePositionsHeightByAttr(J),U.position=J}}}}]),N}(c.EditBase);z.EditPolyline=P},125018:function(X,z,e){"use strict";var E=e(465557),F=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPolylineVolume=void 0;var O=F(e(122777)),M=F(e(42762)),b=F(e(330044)),L=F(e(299085)),T=F(e(234009)),C=e(111478);function f(o){var h=v();return function(){var r=(0,T.default)(o),s;if(h){var c=(0,T.default)(this).constructor;s=E(r,arguments,c)}else s=r.apply(this,arguments);return(0,L.default)(this,s)}}function v(){if(typeof Reflect>"u"||!E)return![];if(E.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(E(Boolean,[],function(){})),!![]}catch{return![]}}var m=function(o){(0,b.default)(l,o);var h=f(l);function l(r){return(0,O.default)(this,l),h.call(this,r)}return(0,M.default)(l,[{key:"getGraphic",value:function(){return this.entity.polylineVolume}},{key:"changePositionsToCallback",value:function(){this._positions_draw=this.entity._positions_draw}}]),l}(C.EditPolyline);z.EditPolylineVolume=m},191537:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditRectangle=void 0;var L=b(e(122777)),T=b(e(42762)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=e(781983),o=e(792672),h=e(10614),l=s(e(187647));function r(i){if(typeof O!="function")return null;var n=new O,u=new O;return(r=function(d){return d?u:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=r(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&M;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?M(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}function c(i){var n=x();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,C.default)(u,i);var n=c(u);function u(g){return(0,L.default)(this,u),n.call(this,g)}return(0,T.default)(u,[{key:"getGraphic",value:function(){return this.entity.rectangle}},{key:"setPositions",value:function(d){this.entity._positions_draw=d,this._positions_draw=d,this.getGraphic().coordinates instanceof l.ConstantProperty&&(this.getGraphic().coordinates=new l.ConstantProperty(l.Rectangle.fromCartesianArray(d)))}},{key:"getPositionsFromEntity",value:function(){this._positions_draw=this.entity._positions_draw}},{key:"changePositionsToCallback",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],y=this.entity;d?y.rectangle.coordinates=new l.CallbackProperty(function(){return y._positions_draw.length<2?null:l.Rectangle.fromCartesianArray(y._positions_draw)},![]):y.rectangle.coordinates=y.rectangle.coordinates.getValue()}},{key:"finish",value:function(){this.entity._positions_draw=this._positions_draw,this.changePositionsToCallback(![])}},{key:"isClampToGround",value:function(){return this.entity.attribute.style.clampToGround}},{key:"bindDraggers",value:function(){for(var d=this,y=this.isClampToGround(),p=this.getPosition(),w=0,S=p.length;w<S;w++){var R=p[w];if(this.getGraphic().height!==void 0){var B=this.getGraphic().height.getValue(this.viewer.clock.currentTime);R=(0,o.setPositionsHeight)(R,B)}y&&(R=(0,o.updateHeightForClampToGround)(this.viewer,R));var k=(0,h.createDragger)(this.dataSource,{position:R,onDrag:function(D,A){if(d.getGraphic().height!==void 0){var N=d.getGraphic().height.getValue(d.viewer.clock.currentTime);A=(0,o.setPositionsHeight)(A,N),D.position=A}if(p[D.index]=A,d.getGraphic().coordinates instanceof l.ConstantProperty&&(d.getGraphic().coordinates=l.Rectangle.fromCartesianArray(p)),d.heightDraggers&&d.heightDraggers.length>0){var I=d.getGraphic().extrudedHeight.getValue(d.viewer.clock.currentTime);d.heightDraggers[D.index].position=(0,o.setPositionsHeight)(A,I)}}});k.index=w,this.draggers.push(k)}this.getGraphic().extrudedHeight&&this.bindHeightDraggers(),this.entity.attribute.style.isMoveHeightPlane&&this.bindMoveHeightDraggers(),this.entity.attribute.style.isBoxbelow&&this.bindBoxDraggers()}}]),u}(m.EditPolygon);z.EditRectangle=a},528769:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(985208),M=e(659791),b=e(22466),L=e(183393),T=e(105077),C=e(787879),f=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditVideoProjection=void 0;var v=f(e(543389)),m=f(e(342579)),o=f(e(122777)),h=f(e(42762)),l=f(e(330044)),r=f(e(299085)),s=f(e(234009)),c=d(e(187647)),x=d(e(10614)),a=e(308817),i=e(870317),n=e(936161),u=f(e(456865));function g(k){if(typeof C!="function")return null;var P=new C,D=new C;return(g=function(N){return N?D:P})(k)}function d(k,P){if(!P&&k&&k.__esModule)return k;if(k===null||E(k)!=="object"&&typeof k!="function")return{default:k};var D=g(P);if(D&&D.has(k))return D.get(k);var A={},N=Object.defineProperty&&L;for(var I in k)if(I!=="default"&&Object.prototype.hasOwnProperty.call(k,I)){var G=N?L(k,I):null;G&&(G.get||G.set)?Object.defineProperty(A,I,G):A[I]=k[I]}return A.default=k,D&&D.set(k,A),A}function y(k,P){var D=O(k);if(M){var A=M(k);P&&(A=b(A).call(A,function(N){return L(k,N).enumerable})),D.push.apply(D,A)}return D}function p(k){for(var P=1;P<arguments.length;P++){var D=arguments[P]!=null?arguments[P]:{};P%2?y(Object(D),!0).forEach(function(A){(0,v.default)(k,A,D[A])}):T?Object.defineProperties(k,T(D)):y(Object(D)).forEach(function(A){Object.defineProperty(k,A,L(D,A))})}return k}function w(k){var P=S();return function(){var A=(0,s.default)(k),N;if(P){var I=(0,s.default)(this).constructor;N=F(A,arguments,I)}else N=A.apply(this,arguments);return(0,r.default)(this,N)}}function S(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var R=function(k){(0,l.default)(D,k);var P=w(D);function D(A){var N;return(0,o.default)(this,D),N=P.call(this,A),N.viewer=A.viewer,N}return(0,h.default)(D,[{key:"activate",value:function(){var N;return this._enabled?this:(this._enabled=!![],this.entity.inProgress=!![],this.getPositionsFromEntity(),this.changePositionsToCallback(),this.bindDraggers(),this.bindEvent(),this.fire("edit-start",{drawtype:(N=this.entity.attribute)===null||N===void 0?void 0:N.drawtype,entity:this.entity,geojson:this.toGeoJSON(this.entity)}),this)}},{key:"disable",value:function(){var N;return this._enabled?(this._enabled=![],this.destroyEvent(),this.destroyDraggers(),this.finish(),this.destroyVideoProjection(),this.entity.inProgress=![],this.fire("edit-stop",{drawtype:(N=this.entity.attribute)===null||N===void 0?void 0:N.drawtype,entity:this.entity}),this.tooltip.setVisible(![]),this):this}},{key:"destroyVideoProjection",value:function(){this.VideoProjection&&(this.VideoProjection.destroy(),this.VideoProjection=null)}},{key:"updateAttrForEditing",value:function(){this.entity.attribute.style.getPrmFromScene&&this.getParamaterFromScene();var N=this.entity.attribute.style;N.viewPosition=this.getPosition(),this.VideoProjection=new u.default({viewer:this.viewer},N),this.VideoProjection.execute(),(N.getDistance||N.getHeading)&&this.getParamaterFromClick()}},{key:"getParamaterFromClick",value:function(){var N=this,I=this.entity.attribute.style,G={drawtype:"point",success:function(Z){var H=this;(0,m.default)(this,N),this._enabled=!![];var U=this.getPosition(),V=Z.position.getValue();if(I.getDistance){var Y=c.Cartesian3.distance(U,V);I.viewDistance=Number(Y.toFixed(2))}else if(I.getHeading){var $=B(U,V);I.viewHeading=Number($.toFixed(2))}I.getDistance=![],I.getHeading=![],this.updateAttrForEditing();var K=this.toGeoJSON(this.entity);this.fire("edit-move-point",{geojson:K,drawtype:this.entity.attribute.drawtype,entity:this.entity,position:U}),setTimeout(function(){(0,m.default)(this,H),this.viewer.shine.draw.deleteFeatureById(Z.id,"temporaryDrawLayer")}.bind(this),2e3)}.bind(this)};this._enabled=![],this.viewer.shine.draw.startDraw(G)}},{key:"getParamaterFromScene",value:function(){var N=this.entity.attribute.style;N.getPrmFromScene=![];var I=this.viewer.camera,G=I.position;this.setPositions(G);var W=(0,n.formatNum)(c.Math.toDegrees(I.heading),2),Z=(0,n.formatNum)(c.Math.toDegrees(I.pitch),2),H=I.positionCartographic.height/Math.sin(Math.abs(I.pitch));H=(0,n.formatNum)(H,2);var U=(0,n.formatNum)(c.Math.toDegrees(I.frustum.fov),2),V=(0,n.formatNum)(c.Math.toDegrees(I.frustum.fovy),2);this.entity.attribute.style=p(p({},N),{},{viewPosition:G,viewHeading:W,viewPitch:Z,viewDistance:H,horizontalViewAngle:U,verticalViewAngle:V});var Y=this.toGeoJSON(this.entity);this.fire("edit-move-point",{geojson:Y,drawtype:this.entity.attribute.drawtype,entity:this.entity})}},{key:"getGraphic",value:function(){return this.entity.point}},{key:"getPosition",value:function(){return this.entity.position.getValue?this.entity.position.getValue():this.entity.position}},{key:"setPositions",value:function(N){this.entity.position=N[0]||N,this.updateAttrForEditing()}},{key:"bindDraggers",value:function(){var N=this;this.entity.draw_tooltip=i.message.dragger.def,x.createDragger(this.dataSource,{dragger:this.entity,onDrag:function(G,W){N.setPositions(W),N.entity.isbounce==!![]&&N.addAnimate(N.viewer,N.entity)}})}},{key:"addAnimate",value:function(N,I){var G=(0,n.cartesian2lonlat)(I.position.getValue())[2],W={maxHeight:G+50,minHeight:G,heightDelta:.5},Z=W.minHeight,H=W.maxHeight,U=W.heightDelta,V=(0,n.cartesian2lonlat)(I.position.getValue())[0],Y=(0,n.cartesian2lonlat)(I.position.getValue())[1];N.scene.preUpdate.addEventListener(function(){G+=U,I.position=c.Cartesian3.fromDegrees(V,Y,G);var $=I.position.getValue(),K=c.Cartographic.fromCartesian($,c.Ellipsoid.WGS84);(K.height>=H||K.height<=Z)&&(U*=-1)})}},{key:"finish",value:function(){this.entity.draw_tooltip=null}}]),D}(a.EditBase);z.EditVideoProjection=R;function B(k,P){var D=new c.Cartesian3,A=c.Transforms.eastNorthUpToFixedFrame(k);return c.Matrix4.inverse(A,A),c.Matrix4.multiplyByPoint(A,P,D),c.Cartesian3.normalize(D,D),c.Math.toDegrees(Math.atan2(D.x,D.y))}},592386:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditWall=void 0;var L=b(e(669033)),T=b(e(99245)),C=b(e(122777)),f=b(e(42762)),v=b(e(330044)),m=b(e(299085)),o=b(e(234009)),h=i(e(187647)),l=i(e(10614)),r=e(111478),s=e(870317),c=e(792672),x=e(936161);function a(d){if(typeof O!="function")return null;var y=new O,p=new O;return(a=function(S){return S?p:y})(d)}function i(d,y){if(!y&&d&&d.__esModule)return d;if(d===null||E(d)!=="object"&&typeof d!="function")return{default:d};var p=a(y);if(p&&p.has(d))return p.get(d);var w={},S=Object.defineProperty&&M;for(var R in d)if(R!=="default"&&Object.prototype.hasOwnProperty.call(d,R)){var B=S?M(d,R):null;B&&(B.get||B.set)?Object.defineProperty(w,R,B):w[R]=d[R]}return w.default=d,p&&p.set(d,w),w}function n(d){var y=u();return function(){var w=(0,o.default)(d),S;if(y){var R=(0,o.default)(this).constructor;S=F(w,arguments,R)}else S=w.apply(this,arguments);return(0,m.default)(this,S)}}function u(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var g=function(d){(0,v.default)(p,d);var y=n(p);function p(w){var S;return(0,C.default)(this,p),S=y.call(this,w),S._maximumHeights=null,S._minimumHeights=null,S.heightDraggers=null,S}return(0,f.default)(p,[{key:"getGraphic",value:function(){return this.entity.wall}},{key:"getPositionsFromEntity",value:function(){var S,R,B=this.viewer.clock.currentTime;this._positions_draw=this.entity._positions_draw||this.getGraphic().positions.getValue(B),this._minimumHeights=this.entity._minimumHeights||((S=this.getGraphic().minimumHeights)===null||S===void 0?void 0:S.getValue(B)),this._maximumHeights=this.entity._maximumHeights||((R=this.getGraphic().maximumHeights)===null||R===void 0?void 0:R.getValue(B))}},{key:"updateAttrForEditing",value:function(){var S=this.entity.attribute.style,R=this.getPosition(),B=R.length;this._maximumHeights=new Array(B),this._minimumHeights=new Array(B);for(var k=0;k<B;k++){var P=h.Cartographic.fromCartesian(R[k]).height;this._minimumHeights[k]=P,this._maximumHeights[k]=P+Number(S.extrudedHeight)}this.entity._maximumHeights=this._maximumHeights,this.entity._minimumHeights=this._minimumHeights,this.getGraphic().maximumHeights=this._maximumHeights,this.getGraphic().minimumHeights=this._minimumHeights}},{key:"setPositions",value:function(S){this._positions_draw=S,this.entity._positions_draw=S,!(this.getGraphic().positions instanceof h.CallbackProperty)&&(this.entity.wall.positions=new h.ConstantProperty(S)),this.updateAttrForEditing()}},{key:"finish",value:function(){this.entity._positions_draw=this._positions_draw,this.entity._maximumHeights=this._maximumHeights,this.entity._minimumHeights=this._minimumHeights}},{key:"bindDraggers",value:function(){for(var S=this,R=this.isClampToGround(),B=this.getPosition(),k=this.entity.attribute.style,P=B.length<this._maxPointNum,D=0,A=B.length;D<A;D++){var N=B[D],I=l.createDragger(this.dataSource,{position:N,clampToGround:R,onDrag:function(U,V){B[U.index]=V,S.heightDraggers&&S.heightDraggers.length>0&&(S.heightDraggers[U.index].position=(0,c.addPositionsHeight)(V,k.extrudedHeight)),P&&(U.index>0&&(S.draggers[U.index*2-1].position=h.Cartesian3.midpoint(V,B[U.index-1],new h.Cartesian3)),U.index<B.length-1&&(S.draggers[U.index*2+1].position=h.Cartesian3.midpoint(V,B[U.index+1],new h.Cartesian3)))}});if(I.index=D,this.draggers.push(I),P){var G=D+1;if(G<A){var W=h.Cartesian3.midpoint(N,B[G],new h.Cartesian3),Z=l.createDragger(this.dataSource,{position:W,type:l.PointType.AddMidPoint,tooltip:s.message.dragger.addMidPoint,clampToGround:R,onDragStart:function(U,V){(0,L.default)(B).call(B,U.index,0,V),S.updateAttrForEditing()},onDrag:function(U,V){B[U.index]=V},onDragEnd:function(){S.updateDraggers()}});Z.index=G,this.draggers.push(Z)}}}this.bindHeightDraggers(),this.entity.attribute.config&&this.entity.attribute.config.isContour&&this.bindMoveHorizontalDraggers(B)}},{key:"bindHeightDraggers",value:function(){var S=this;this.heightDraggers=[];for(var R=this.getPosition(),B=this.entity.attribute.style,k=Number(B.extrudedHeight),P=0,D=R.length;P<D;P++){var A=(0,c.addPositionsHeight)(R[P],k),N=l.createDragger(this.dataSource,{position:A,type:l.PointType.MoveHeight,tooltip:s.message.dragger.moveHeight,onDrag:function(G,W){var Z=h.Cartographic.fromCartesian(W).height;B.extrudedHeight=S.formatNum(Z-S._minimumHeights[G.index],2);for(var H=0;H<R.length;H++)H!==G.index&&(S.heightDraggers[H].position=(0,c.addPositionsHeight)(R[H],B.extrudedHeight));S.updateAttrForEditing()}});N.index=P,this.draggers.push(N),this.heightDraggers.push(N)}}},{key:"bindMoveHorizontalDraggers",value:function(S){for(var R=this,B=0,k=this.draggers.length;B<k;B++)this.dataSource.entities.remove(this.draggers[B]);this.draggers=[],this.heightDraggers=[],S=this.entity.wall.positions.getValue();var P=S,D=(0,T.default)(P,2),A=D[0],N=D[1],I=h.Cartesian3.midpoint(A,N,A.clone()),G=(0,x.cartesian2lonlat)(I),W=this.entity.attribute.style.extrudedHeight/2;G=h.Cartesian3.fromDegrees(G[0],G[1],G[2]+W);var Z,H=l.createDragger(this.dataSource,{position:G,type:l.PointType.MoveLevel,tooltip:"\u9F20\u6807\u62D6\u62FD\u5207\u9762",onDrag:function(ht,Pt){var wt=R.entity.wall.positions.getValue(),Mt=(0,T.default)(wt,2),Ft=Mt[0],Dt=Mt[1],Rt=h.Cartesian3.subtract(Ft,Dt,new h.Cartesian3),Tt=h.Cartesian3.midpoint(Ft,Dt,new h.Cartesian3),mt=Pt,Nt;Z=Z||Pt,Nt=h.Cartesian3.subtract(Z,mt,new h.Cartesian3),Z=Pt;var ct=h.Cartographic.fromCartesian(Tt);ct.height=50;var vt=h.Cartographic.toCartesian(ct),Lt=h.Cartesian3.subtract(Tt,vt,new h.Cartesian3),Ct=h.Cartesian3.cross(Rt,Lt,new h.Cartesian3);Ct=h.Cartesian3.normalize(Ct,new h.Cartesian3);var jt=h.Cartesian3.projectVector(Nt,Ct,new h.Cartesian3);jt=h.Cartesian3.multiplyByScalar(jt,-1,new h.Cartesian3),Ft=h.Cartesian3.add(Ft,jt,new h.Cartesian3),Dt=h.Cartesian3.add(Dt,jt,new h.Cartesian3),R.entity.wall.positions=[Ft,Dt],R._positions_draw=[Ft,Dt],ut(),ht.callback&&ht.callback([Ft,Dt],"facade1")},onDragEnd:function(){Z=null}}),U=this.entity.attribute.style,V=h.Cartesian3.midpoint(A,N,A.clone()),Y=(0,c.addPositionsHeight)(V,Number(U.extrudedHeight)),$=l.createDragger(this.dataSource,{position:Y,type:l.PointType.MoveHeight,tooltip:s.message.dragger.moveHeight,onDrag:function(ht,Pt){var wt=h.Cartographic.fromCartesian(Pt).height,Mt=h.Cartographic.fromCartesian(J.position.getValue()).height;Mt<wt?(U.extrudedHeight=R.formatNum(wt-R._minimumHeights[0],2),$.position=Pt,R.updateAttrForEditing(),ut(),ht.callback&&ht.callback(Pt,"facade4")):$.position=(0,c.setPositionsHeight)(Pt,Mt)}}),K,J=l.createDragger(this.dataSource,{position:I,type:l.PointType.MoveHeight,tooltip:s.message.dragger.moveHeight,onDrag:function(ht,Pt){var wt=h.Cartographic.fromCartesian(Pt).height,Mt=h.Cartographic.fromCartesian($.position.getValue()).height;if(wt<Mt){K=K||Pt;var Ft=h.Cartographic.fromCartesian(K).height-h.Cartographic.fromCartesian(Pt).height;U.extrudedHeight+=Ft;for(var Dt=R._positions_draw,Rt=[],Tt=0;Tt<Dt.length;Tt++)Rt.push((0,c.setPositionsHeight)(Dt[Tt],wt));R._positions_draw=Rt,R.entity.wall.positions=Rt,et.position=Rt[0],st.position=Rt[1],J.position=Pt,ut(),ht.callback&&ht.callback(Pt,"facade5"),K=Pt}else J.position=(0,c.setPositionsHeight)(Pt,Mt)}}),Q,et=l.createDragger(this.dataSource,{position:A,type:l.PointType.MoveLevel,tooltip:s.message.dragger.moveHeight,onDrag:function(ht,Pt){var wt=R.entity.wall.positions.getValue(),Mt=(0,T.default)(wt,2),Ft=Mt[0],Dt=Mt[1];Q=Q||Pt;var Rt;Rt=h.Cartesian3.subtract(Q,Pt,new h.Cartesian3),Q=Pt;var Tt=h.Cartesian3.subtract(Ft,Dt,new h.Cartesian3),mt=h.Cartesian3.normalize(Tt,new h.Cartesian3),Nt=h.Cartesian3.projectVector(Rt,mt,new h.Cartesian3);Nt=h.Cartesian3.multiplyByScalar(Nt,-1,new h.Cartesian3),Ft=h.Cartesian3.add(Ft,Nt,new h.Cartesian3),R._positions_draw=[Ft,Dt],R.entity.wall.positions=[Ft,Dt],R.updateAttrForEditing(),ut(),ht.callback&&ht.callback([Ft,Dt],"facade2")},onDragEnd:function(){Q=null}}),nt,st=l.createDragger(this.dataSource,{position:N,type:l.PointType.MoveLevel,tooltip:s.message.dragger.moveHeight,onDrag:function(ht,Pt){var wt=R.entity.wall.positions.getValue(),Mt=(0,T.default)(wt,2),Ft=Mt[0],Dt=Mt[1];nt=nt||Pt;var Rt;Rt=h.Cartesian3.subtract(nt,Pt,new h.Cartesian3),nt=Pt;var Tt=h.Cartesian3.subtract(Ft,Dt,new h.Cartesian3),mt=h.Cartesian3.normalize(Tt,new h.Cartesian3),Nt=h.Cartesian3.projectVector(Rt,mt,new h.Cartesian3);Nt=h.Cartesian3.multiplyByScalar(Nt,-1,new h.Cartesian3),Dt=h.Cartesian3.add(Dt,Nt,new h.Cartesian3),R._positions_draw=[Ft,Dt],R.entity.wall.positions=[Ft,Dt],R.updateAttrForEditing(),ut(),ht.callback&&ht.callback([Ft,Dt],"facade3")},onDragEnd:function(){nt=null}});H.point.color=new h.Color.fromCssColorString("#f00"),et.point.color=new h.Color.fromCssColorString("#1c197d"),st.point.color=new h.Color.fromCssColorString("#1c197d"),this.draggers.push(H,$,et,st,J),this.heightDraggers.push($),this.horizontalDraggers=this.horizontalDraggers?this.horizontalDraggers:[],this.horizontalDraggers.push(H);function ut(){var rt=(0,T.default)(R._positions_draw,2),ht=rt[0],Pt=rt[1],wt=h.Cartesian3.midpoint(ht,Pt,ht.clone());$.position=(0,c.addPositionsHeight)(wt,Number(U.extrudedHeight)),et.position=ht,st.position=Pt;var Mt=h.Cartesian3.midpoint(ht,Pt,ht.clone());J.position=Mt,H.position=h.Cartesian3.midpoint(Mt,$.position.getValue(),Mt.clone())}}},{key:"updateHorizontalDraggers",value:function(){var S=this.entity.wall.positions.getValue(),R=(0,T.default)(S,2),B=R[0],k=R[1],P=h.Cartesian3.midpoint(B,k,B.clone()),D=(0,x.cartesian2lonlat)(P),A=this.entity.attribute.style.extrudedHeight/2;D=h.Cartesian3.fromDegrees(D[0],D[1],D[2]+A),this.horizontalDraggers[0].position=D}}]),p}(r.EditPolyline);z.EditWall=g},408974:function(X,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),Object.defineProperty(z,"EditBase",{enumerable:!![],get:function(){return E.EditBase}}),Object.defineProperty(z,"EditCircle",{enumerable:!![],get:function(){return o.EditCircle}}),Object.defineProperty(z,"EditCorridor",{enumerable:!![],get:function(){return f.EditCorridor}}),Object.defineProperty(z,"EditCurve",{enumerable:!![],get:function(){return m.EditCurve}}),Object.defineProperty(z,"EditCylinder",{enumerable:!![],get:function(){return M.EditCylinder}}),Object.defineProperty(z,"EditEllipsoid",{enumerable:!![],get:function(){return b.EditEllipsoid}}),Object.defineProperty(z,"EditPModel",{enumerable:!![],get:function(){return F.EditPModel}}),Object.defineProperty(z,"EditPoint",{enumerable:!![],get:function(){return h.EditPoint}}),Object.defineProperty(z,"EditPolygon",{enumerable:!![],get:function(){return T.EditPolygon}}),Object.defineProperty(z,"EditPolygonEx",{enumerable:!![],get:function(){return l.EditPolygonEx}}),Object.defineProperty(z,"EditPolyline",{enumerable:!![],get:function(){return O.EditPolyline}}),Object.defineProperty(z,"EditPolylineVolume",{enumerable:!![],get:function(){return v.EditPolylineVolume}}),Object.defineProperty(z,"EditRectangle",{enumerable:!![],get:function(){return C.EditRectangle}}),Object.defineProperty(z,"EditWall",{enumerable:!![],get:function(){return L.EditWall}});var E=e(308817),F=e(633843),O=e(111478),M=e(232783),b=e(138766),L=e(592386),T=e(781983),C=e(191537),f=e(245691),v=e(125018),m=e(839670),o=e(343889),h=e(656248),l=e(84236)},325074:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Cesium=z.AnimationLineMaterialProperty=void 0,Object.defineProperty(z,"CircleFadeMaterial",{enumerable:!![],get:function(){return d.CircleFadeMaterial}}),Object.defineProperty(z,"Class",{enumerable:!![],get:function(){return L.Class}}),Object.defineProperty(z,"DivPoint",{enumerable:!![],get:function(){return g.DivPoint}}),Object.defineProperty(z,"Draw",{enumerable:!![],get:function(){return c.Draw}}),z.L=z.Handle=z.ElliposidFadeMaterialProperty=z.DrawEdit=void 0,Object.defineProperty(z,"Layer",{enumerable:!![],get:function(){return f.Layer}}),Object.defineProperty(z,"LineFlowMaterial",{enumerable:!![],get:function(){return y.LineFlowMaterial}}),z.Map=void 0,Object.defineProperty(z,"MapVLayer",{enumerable:!![],get:function(){return s.MapVLayer}}),z.Matrix=void 0,Object.defineProperty(z,"Measure",{enumerable:!![],get:function(){return k.Measure}}),Object.defineProperty(z,"OLCesium",{enumerable:!![],get:function(){return P.default}}),z.Util=z.Tileset=z.PointConvert=z.Point=void 0,Object.defineProperty(z,"ViewerEx",{enumerable:!![],get:function(){return C.ViewerEx}}),z.website=z.version=z.update=z.name=z.latlng=z.draw=z.author=void 0;var b=A(e(187647));z.Cesium=b;var L=e(779651),T=A(e(195367));z.Map=T;var C=e(461805),f=e(566828),v=A(e(194777));z.PointConvert=v;var m=A(e(580823));z.Util=m;var o=A(e(42038));z.Handle=o;var h=A(e(268821));z.Tileset=h;var l=A(e(171746));z.Matrix=l;var r=A(e(792672));z.Point=r;var s=e(375211),c=e(642786),x=A(e(931984)),a=A(e(142795)),i=A(e(870317)),n=A(e(936161)),u=A(e(10614)),g=e(696789),d=e(746817),y=e(658570),p=A(e(303852)),w=A(e(336034)),S=e(628579),R=e(439613),B=e(408974),k=e(186712),P=M(e(864828));function D(J){if(typeof F!="function")return null;var Q=new F,et=new F;return(D=function(st){return st?et:Q})(J)}function A(J,Q){if(!Q&&J&&J.__esModule)return J;if(J===null||E(J)!=="object"&&typeof J!="function")return{default:J};var et=D(Q);if(et&&et.has(J))return et.get(J);var nt={},st=Object.defineProperty&&O;for(var ut in J)if(ut!=="default"&&Object.prototype.hasOwnProperty.call(J,ut)){var rt=st?O(J,ut):null;rt&&(rt.get||rt.set)?Object.defineProperty(nt,ut,rt):nt[ut]=J[ut]}return nt.default=J,et&&et.set(J,nt),nt}var N="";z.name=N;var I="";z.version=I;var G="";z.update=G;var W="";z.author=W;var Z="";z.website=Z;var H={};z.draw=H,H.register=c.Draw.register,H.util=n,H.event=a,H.tooltip=i.message,H.dragger=u,H.attr=x;var U={Base:B.EditBase,Circle:B.EditCircle,Corridor:B.EditCorridor,Curve:B.EditCurve,Ellipsoid:B.EditEllipsoid,Point:B.EditPoint,Polygon:B.EditPolygon,PolygonEx:B.EditPolygonEx,Polyline:B.EditPolyline,PolylineVolume:B.EditPolylineVolume,Rectangle:B.EditRectangle,Wall:B.EditWall,PModel:B.EditPModel,Cylinder:B.EditCylinder};z.DrawEdit=U;var V=p;z.L=V,V.esri=w,f.Layer.ArcFeatureLayer=S.ArcFeatureLayer,f.Layer.regLayerForConfig("arcgis_feature2",S.ArcFeatureLayer),f.Layer.ArcFeatureGridLayer=R.ArcFeatureGridLayer,f.Layer.regLayerForConfig("arcgis_feature",R.ArcFeatureGridLayer);var Y=y.LineFlowMaterial;z.AnimationLineMaterialProperty=Y;var $=d.CircleFadeMaterial;z.ElliposidFadeMaterialProperty=$;var K=r;z.latlng=K},566828:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(985208),M=e(659791),b=e(22466),L=e(183393),T=e(105077),C=e(520314),f=e(426352),v=e(230551),m=e(43586),o=e(787879),h=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Layer=void 0;var l=h(e(543389)),r=h(e(22466)),s=h(e(66273)),c=h(e(581806)),x=h(e(869257)),a=ut(e(187647)),i=ut(e(580823)),n=e(414666),u=e(635816),g=e(470334),d=e(500963),y=e(400058),p=e(792636),w=e(346307),S=e(347184),R=e(402008),B=e(856474),k=e(887358),P=e(480691),D=e(248720),A=e(574410),N=e(116474),I=e(540266),G=e(508397),W=e(381218),Z=e(421548),H=e(739258),U=e(132634),V=e(609045),Y=e(628579),$=e(439613),K=e(946482),J=e(867040),Q=e(878033),et=e(300631),nt=e(439432);function st(ct){if(typeof o!="function")return null;var vt=new o,Lt=new o;return(st=function(jt){return jt?Lt:vt})(ct)}function ut(ct,vt){if(!vt&&ct&&ct.__esModule)return ct;if(ct===null||F(ct)!=="object"&&typeof ct!="function")return{default:ct};var Lt=st(vt);if(Lt&&Lt.has(ct))return Lt.get(ct);var Ct={},jt=Object.defineProperty&&L;for(var zt in ct)if(zt!=="default"&&Object.prototype.hasOwnProperty.call(ct,zt)){var Yt=jt?L(ct,zt):null;Yt&&(Yt.get||Yt.set)?Object.defineProperty(Ct,zt,Yt):Ct[zt]=ct[zt]}return Ct.default=ct,Lt&&Lt.set(ct,Ct),Ct}function rt(ct,vt){var Lt=typeof v<"u"&&m(ct)||ct["@@iterator"];if(!Lt){if(Array.isArray(ct)||(Lt=ht(ct))||vt&&ct&&typeof ct.length=="number"){Lt&&(ct=Lt);var Ct=0,jt=function(){};return{s:jt,n:function(){return Ct>=ct.length?{done:!![]}:{done:![],value:ct[Ct++]}},e:function(gt){throw gt},f:jt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zt=!![],Yt=![],Zt;return{s:function(){Lt=Lt.call(ct)},n:function(){var gt=Lt.next();return zt=gt.done,gt},e:function(gt){Yt=!![],Zt=gt},f:function(){try{!zt&&Lt.return!=null&&Lt.return()}finally{if(Yt)throw Zt}}}}function ht(ct,vt){var Lt;if(ct){if(typeof ct=="string")return Pt(ct,vt);var Ct=C(Lt=Object.prototype.toString.call(ct)).call(Lt,8,-1);if(Ct==="Object"&&ct.constructor&&(Ct=ct.constructor.name),Ct==="Map"||Ct==="Set")return f(ct);if(Ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ct))return Pt(ct,vt)}}function Pt(ct,vt){(vt==null||vt>ct.length)&&(vt=ct.length);for(var Lt=0,Ct=new Array(vt);Lt<vt;Lt++)Ct[Lt]=ct[Lt];return Ct}function wt(ct,vt){var Lt=O(ct);if(M){var Ct=M(ct);vt&&(Ct=b(Ct).call(Ct,function(jt){return L(ct,jt).enumerable})),Lt.push.apply(Lt,Ct)}return Lt}function Mt(ct){for(var vt=1;vt<arguments.length;vt++){var Lt=arguments[vt]!=null?arguments[vt]:{};vt%2?wt(Object(Lt),!0).forEach(function(Ct){(0,l.default)(ct,Ct,Lt[Ct])}):T?Object.defineProperties(ct,T(Lt)):wt(Object(Lt)).forEach(function(Ct){Object.defineProperty(ct,Ct,L(Lt,Ct))})}return ct}var Ft={};function Dt(ct){var vt=Math.floor(Math.random()*ct.length+1)-1;return ct[vt]}var Rt=function(vt,Lt){Ft[vt]=Lt},Tt=function ct(vt,Lt,Ct,jt){var zt;switch(vt.url&&(Ct&&(vt.url=vt.url.replace("$serverURL$",Ct)),vt.url=vt.url.replace("$hostname$",location.hostname).replace("$host$",location.host)),(vt.key===null||vt.key===void 0||vt.key.length===0)&&(vt.key=jt),vt.type){case"group":if(vt.layers&&vt.layers.length>0){for(var Yt=[],Zt=0;Zt<vt.layers.length;Zt++){var ft=ct(vt.layers[Zt],Lt,Ct);ft!=null&&Yt.push(ft)}vt._layers=Yt,zt=new u.GroupLayer(vt,Lt)}break;case"www_bing":case"www_osm":case"www_google":case"www_gaode":case"gaode":case"www_baidu":case"baidu":case"www_tdt":case"mapbox":case"www_mapbox":case"arcgis_cache":case"arcgis":case"tiled":case"arcgis_tile":case"sm_img":case"supermap_img":case"wmts":case"wmts_tdt":case"tms":case"wms":case"xyz":case"tile":case"single":case"image":case"gee":case"custom_tilecoord":case"custom_grid":case"tdt":case"geoserver-wms":case"geoserver-wmts":case"tdt-sd":zt=new g.TileLayer(vt,Lt),zt.isTile=!![];break;case"geoserver-vectorTiled":zt=new et.MapboxVectorTileLayer(vt,Lt);break;case"arcgis_dynamic":case"dynamic":vt.imagerygrid==!![]?(vt.layerDefs&&(vt.where=typeof vt.layerDefs=="string"?JSON.parse(vt.layerDefs):vt.layerDefs),vt.minimumLevel=a.defaultValue(vt.minimumLevel>7?vt.minimumLevel:7,7),zt=new K.ArcFeatureImageGridLayer(vt,Lt),zt._layerDefs=vt?.where||void 0):(zt=new g.TileLayer(vt,Lt),zt.isTile=!![]);break;case"feature":case"feature-pbf":vt.layerDefs&&typeof vt.layerDefs=="string"&&(vt.layerDefs=JSON.parse(vt.layerDefs)),zt=new $.ArcFeatureGridLayer(vt,Lt);break;case"feature-pbf_old":if(vt.originId){var gt=Lt.shine.getLayer(vt.originId,"id");gt&&(gt.layer.show=![])}vt.styletest?(vt.symbol={},vt.symbol.styleOptions=vt.styletest,zt=new $.ArcFeatureGridLayer(vt,Lt)):(Lt.shine.removeLayer(vt,"id"),zt=new g.TileLayer(vt,Lt),zt.isTile=!![]);break;case"www_poi":zt=new S.POILayer(vt,Lt);break;case"custom_featuregrid":zt=new y.CustomFeatureGridLayer(vt,Lt);break;case"geoserver-wfs":(0,r.default)(vt)&&(vt.where=(0,r.default)(vt)),zt=new w.GeoServerWFSLayer(vt,Lt);break;case"custom_graticule":zt=new d.GraticuleLayer(vt,Lt);break;case"3dtiles":case"3DTile":vt.maximumScreenSpaceError==null&&(vt.maximumScreenSpaceError=16),vt.skipLevelOfDetail==null&&(vt.skipLevelOfDetail=!![]),zt=new k.Tiles3dLayer(vt,Lt);break;case"S3M":zt=new P.S3MLayer(vt,Lt);break;case"I3S":zt=new D.I3SLayer(vt,Lt);break;case"osmbuild":zt=new U.OSMBuildLayer(vt,Lt);break;case"gltf":(!vt.position||!vt.position.x)&&(vt.position={x:120,y:30,z:10,heading:0,pitch:0,roll:0}),zt=new B.GltfLayer(vt,Lt);break;case"geojson":case"geoJson":zt=new R.GeoJsonLayer(vt,Lt);break;case"geojson-draw":zt=new G.DrawLayer(vt,Lt);break;case"kml":zt=new A.KmlLayer(vt,Lt);break;case"czml":zt=new N.CzmlLayer(vt,Lt);break;case"terrain":zt=new I.TerrainLayer(vt,Lt);break;default:Ft[vt.type]&&(zt=new Ft[vt.type](vt,Lt)),zt==null&&E.error("\u914D\u7F6E\u4E2D\u7684\u56FE\u5C42\u672A\u5904\u7406\uFF1A"+(0,s.default)(vt));break}return zt},mt=function(vt,Lt){vt.url&&(Lt&&(vt.url=vt.url.replace("$serverURL$",Lt)),vt.url=vt.url.replace("$hostname$",location.hostname).replace("$host$",location.host));var Ct={};for(var jt in vt)if(vt.hasOwnProperty(jt)){var zt=vt[jt];if(zt==null)continue;switch(jt){default:Ct[jt]=zt;break;case"crs":zt=="4326"||zt.toUpperCase()=="EPSG4326"||zt.toUpperCase()=="EPSG:4326"?Ct.tilingScheme=new a.GeographicTilingScheme({numberOfLevelZeroTilesX:vt.numberOfLevelZeroTilesX||2,numberOfLevelZeroTilesY:vt.numberOfLevelZeroTilesY||1}):Ct.tilingScheme=new a.WebMercatorTilingScheme({numberOfLevelZeroTilesX:vt.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:vt.numberOfLevelZeroTilesY||1});break;case"rectangle":Ct.rectangle=a.Rectangle.fromDegrees(zt.xmin,zt.ymin,zt.xmax,zt.ymax);break}}Ct.url&&Ct.proxy&&(Ct=i.getProxyUrl(Ct));var Yt;switch(Ct.type_new||Ct.type){case"single":case"image":Yt=new a.SingleTileImageryProvider(Ct);break;case"xyz":Ct.customTags=Ct.customTags||{},Ct.customTags["z&1"]=function(He,ke,Ze,_){return _+1},Yt=new a.UrlTemplateImageryProvider(Ct);break;case"tile":case"tiled":case"arcgis_tile":if(Ct.crs){Ct=Mt(Mt({},vt),{},{url:(0,J.appendPath)(vt.url,"/tile/{myZ}/{y}/{x}")}),Ct.customTags=Ct.customTags||{},Ct.crs==="4326"?(Ct.customTags.myZ=function(He,ke,Ze,_){return _+1},Ct.tilingScheme=new a.GeographicTilingScheme({ellipsoid:a.Ellipsoid.WGS84})):Ct.customTags.myZ=function(He,ke,Ze,_){return _},Yt=new a.UrlTemplateImageryProvider(Ct);break}else{if(Ct._options.projection==="EPSG:4490"||Ct._options.projection==="EPSG:4326"){Yt=new nt.ArcGisMapServerCGCS2000ImageryProvider(Ct);break}if(Ct._options.projection==="EPSG:3857"){Yt=new a.ArcGisMapServerImageryProvider(Ct);break}}E.error("\u4E0D\u53D7\u652F\u6301\u7684\u5207\u7247\u53C2\u8003\u5750\u6807\u7CFB\uFF0C\u5EFA\u8BAE\u589E\u52A0crs\u9AD8\u7EA7\u53C2\u6570\u518D\u8BD5\u8BD5\u770B");break;case"wms":case"geoserver-wms":{Ct.parameters={format:"image/png",transparent:"true"};var Zt=Ct.visibleLayers.join();Ct.layers=Zt,Yt=new a.WebMapServiceImageryProvider(Ct)}break;case"tms":Ct.url||(Ct.url=a.buildModuleUrl("Assets/Textures/NaturalEarthII")),Yt=new a.TileMapServiceImageryProvider(Ct);break;case"wmts":{var ft,gt=Ct.url;if(!(gt!=null&&(ft=gt.toUpperCase())!==null&&ft!==void 0&&ft.match(/WMTS\/?$/))&&(Ct.url=(0,J.appendPath)(gt,"WMTS")),Ct.authkey){var dt;(0,c.default)(dt=Ct.url).call(dt,"?")?Ct.url+="&authkey="+Ct.authkey:Ct.url+="?authkey="+Ct.authkey}var lt=(0,V.getWMTSCapabilities)(Ct.url,Ct.name,"arcgis",Ct.tileMatrixLabels);lt.url=lt.RestfulUrl||lt.KvpUrl,vt.WMTSparams=lt,lt.url?(Yt=new a.WebMapTileServiceImageryProvider(lt),Ct.special_wmts&&(Yt.special_wmts=!![])):Yt=void 0}break;case"geoserver-wmts_old":{if(Ct.authkey){var ot;(0,c.default)(ot=Ct.url).call(ot,"?")?Ct.url+="&SERVICE=WMTS&request=getCapabilities&authkey="+Ct.authkey:Ct.url+="?SERVICE=WMTS&request=getCapabilities&authkey="+Ct.authkey}else{var it;(0,c.default)(it=Ct.url).call(it,"?")?Ct.url+="&SERVICE=WMTS&request=getCapabilities":Ct.url+="?SERVICE=WMTS&request=getCapabilities"}var yt=(0,V.getWMTSCapabilities)(Ct.url,Ct.visibleLayers[0],"geoserver",Ct.tileMatrixLabels);yt.KvpUrl||yt.RestfulUrl?(yt.url=yt.KvpUrl||yt.RestfulUrl,vt.WMTSparams=yt,Yt=new a.WebMapTileServiceImageryProvider(yt)):E.error("\u7F3A\u5C11WMTS\u74E6\u7247\u8BF7\u6C42\u5730\u5740")}break;case"geoserver-wmts":{var Ot=(0,J.getUrlParams)(Ct.url);if(Ot?.length>0){var St=rt(Ot),Gt;try{for(St.s();!(Gt=St.n()).done;){var Ut=Gt.value;Ct.url=(0,J.addParamToUrl)(Ct.url,Ut.name,Ut.value)}}catch(He){St.e(He)}finally{St.f()}}if(Ct.authkey){var Kt;(0,c.default)(Kt=Ct.url).call(Kt,"?")?Ct.url+="&SERVICE=WMTS&request=getCapabilities&authkey="+Ct.authkey:Ct.url+="?SERVICE=WMTS&request=getCapabilities&authkey="+Ct.authkey}else{var Jt;(0,c.default)(Jt=Ct.url).call(Jt,"?")?Ct.url+="&SERVICE=WMTS&request=getCapabilities":Ct.url+="?SERVICE=WMTS&request=getCapabilities"}var te=(0,V.getWMTSCapabilities)(Ct.url,Ct.visibleLayers[0],"geoserver",Ct.tileMatrixLabels,Ct.matrixSet);te.KvpUrl||te.RestfulUrl?(te.url=te.KvpUrl||te.RestfulUrl,vt.WMTSparams=te,Yt=new a.WebMapTileServiceImageryProvider(te)):E.error("\u7F3A\u5C11WMTS\u74E6\u7247\u8BF7\u6C42\u5730\u5740")}break;case"geoserver-vectorTiled":Yt=new Q.MapboxVectorTileImageryProvider(Ct);break;case"mapbox":case"www_mapbox":Yt=new a.MapboxImageryProvider(Ct);break;case"arcgis":case"arcgis_dynamic":case"dynamic":{Ct.dynamicForced=Ct.dynamicForced||!![];var ie=Ct.visibleLayers.join();Ct.layers=ie,Ct.layerDefs&&(Ct.layerDefs=typeof vt.layerDefs=="string"?vt.layerDefs:(0,s.default)(vt.layerDefs)),vt.imagerygrid==!![]?Yt=new W.FeatureGridImageryProvider(Ct):vt._options.projection==="EPSG:4490"?Yt=new nt.ArcGisMapServerCGCS2000ImageryProvider(Ct):Yt=new a.ArcGisMapServerImageryProvider(Ct),Ct.special_arcgis&&(Yt.special_arcgis=!![])}break;case"feature-pbf_old":if(Ct.styletest)Yt=new W.FeatureGridImageryProvider(Ct);else{var oe=Ct.mapServerUrl;if(oe){var he=(0,x.default)({},Ct);he.url=oe,Yt=new a.ArcGisMapServerImageryProvider(he)}else return}break;case"arcgis_cache":!a.UrlTemplateImageryProvider.prototype.padLeft0&&(a.UrlTemplateImageryProvider.prototype.padLeft0=function(He,ke){He=String(He);for(var Ze=He.length;Ze<ke;)He="0"+He,Ze++;return He}),Ct.customTags={arc_x:function(ke,Ze){return ke.padLeft0(Ze.toString(16),8)},arc_y:function(ke,Ze,_){return ke.padLeft0(_.toString(16),8)},arc_z:function(ke,Ze,_,at){return ke.padLeft0(at.toString(),2)},arc_X:function(ke,Ze){return ke.padLeft0(Ze.toString(16),8).toUpperCase()},arc_Y:function(ke,Ze,_){return ke.padLeft0(_.toString(16),8).toUpperCase()},arc_Z:function(ke,Ze,_,at){return ke.padLeft0(at.toString(),2).toUpperCase()}},Yt=new a.UrlTemplateImageryProvider(Ct);break;case"www_tdt":case"tdt":case"tdt-sd":{var ne,ce,ge,Me,It,Wt=18;Ct.maxLevel?ce=Ct.maxLevel:ce=Wt,Ct.visibleLayers[0]?ne=Ct.visibleLayers[0]:Ct.layerIdentifier?ne=Ct.layerIdentifier:Ct.url.indexOf("vec_c")!=-1?ne="vec":Ct.url.indexOf("vec_z")!=-1||Ct.url.indexOf("cva_c")!=-1?ne="cva":Ct.url.indexOf("vec_w")!=-1?ne="vec":Ct.url.indexOf("img_c")!=-1||Ct.url.indexOf("img_w")!=-1?ne="img":Ct.url.indexOf("img_z")!=-1||Ct.url.indexOf("cia_w")!=-1||Ct.url.indexOf("cia_c")!=-1?ne="cia":Ct.url.indexOf("ter_d")!=-1?ne="ter":Ct.url.indexOf("ibo_w")!=-1||Ct.url.indexOf("ibo_c")!=-1?ne="ibo":Ct.url.indexOf("ter_z")!=-1&&(ne="cta"),Ct.tileMatrixSetName?ge=Ct.tileMatrixSetName:Ct.tileMatrixSetIdentifier&&(ge=Ct.tileMatrixSetIdentifier),Ct.layerStyle&&(Me=Ct.layerStyle),Ct.layerFormat&&(It=Ct.layerFormat);var _t=Ct.url+"&service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer="+ne+"&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}";Ct.proxy&&(_t=i.getProxyUrl({url:_t.replace("{s}","0"),proxy:Ct.proxy}).url),Ct.authkey&&(Ct.url=(0,J.addParamToUrl)(Ct.url,"authkey",Ct.authkey));for(var ee=new Array(ce),re=0;re<=ce;re++)ee[re]=(re+1).toString();if(vt.crs==="4326"){for(var de=new Array(ce),Se=0;Se<=ce;Se++)de[Se]=(Se+1).toString();Yt=new a.WebMapTileServiceImageryProvider({url:_t,layer:ne,style:Me||"default",format:It||"tiles",tileMatrixSetID:ge||"c",subdomains:["0","1","2","3","4","5","6","7"],tileMatrixLabels:de,tilingScheme:new a.GeographicTilingScheme,maximumLevel:ce})}else{for(var Pe=new Array(ce),Le=0;Le<=ce;Le++)Pe[Le]=Le.toString();Yt=new a.WebMapTileServiceImageryProvider({url:_t,layer:ne,style:Me||"default",format:It||"tiles",tileMatrixSetID:ge||"w",subdomains:["0","1","2","3","4","5","6","7"],tileMatrixLabels:Pe,tilingScheme:new a.WebMercatorTilingScheme,maximumLevel:ce})}}break;case"www_gaode":case"gaode":{var Ie=(0,x.default)({},Ct),pe=i.expandUrl(Ie.url);pe.subdomainsArray&&(Ie.subdomains=pe.subdomainsArray),Ie.url=pe.url,Yt=new Z.AmapImageryProvider(Ie)}break;case"www_baidu":case"baidu":Yt=new H.BaiduImageryProvider(Ct);break;case"www_google":{var Oe;if(vt.crs==="4326"||vt.crs==="wgs84")switch(Ct.layer){default:case"img_d":Oe="//www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}";break}else switch(Ct.layer){case"vec":default:Oe="//mt{s}.google.cn/vt/lyrs=m@207000000&hl=zh-CN&gl=CN&src=app&x={x}&y={y}&z={z}&s=Galile";break;case"img_d":Oe="//mt{s}.google.cn/vt/lyrs=s&hl=zh-CN&gl=CN&x={x}&y={y}&z={z}&s=Gali";break;case"img_z":Oe="//mt{s}.google.cn/vt/imgtp=png32&lyrs=h@207000000&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}&s=Galil";break;case"ter":Oe="//mt{s}.google.cn/vt/lyrs=t@131,r@227000000&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}&s=Galile";break}Ct.proxy&&(Oe=i.getProxyUrl({url:Oe.replace("{s}","1"),proxy:Ct.proxy}).url),Yt=new a.UrlTemplateImageryProvider({url:Oe,subdomains:["1","2","3"],maximumLevel:20})}break;case"www_osm":{var Fe="//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";Ct.proxy&&(Fe=i.getProxyUrl({url:Fe.replace("{s}","a"),proxy:Ct.proxy}).url),Yt=new a.UrlTemplateImageryProvider({url:Fe,subdomains:"abc",maximumLevel:18})}break;case"www_bing":{var Ve;Array.isArray(Ct.key)?Ve=Dt(Ct.key):Ve=Ct.key.www_bing;var be="https://dev.virtualearth.net";Ct.proxy&&(be=i.getProxyUrl({url:be,proxy:Ct.proxy}).url);var Be=Ct.layer||a.BingMapsStyle.Aerial;Yt=new a.BingMapsImageryProvider({url:be,key:Ve,mapStyle:Be})}break;case"custom_grid":Ct.cells=Ct.cells||2,Ct.color=a.Color.fromCssColorString(Ct.color||"rgba(255,255,255,0.5)"),Ct.glowWidth=Ct.glowWidth||3,Ct.glowColor=a.Color.fromCssColorString(Ct.glowColor||"rgba(255,255,255,0.1)"),Ct.backgroundColor=a.Color.fromCssColorString(Ct.backgroundColor||"rgba(0,0,0,0)"),Yt=new a.GridImageryProvider(Ct);break;case"custom_tilecoord":Yt=new a.TileCoordinatesImageryProvider(Ct);break;case"custom_featuregrid":case"feature":case"geoserver-wfs":case"feature-pbf":Yt=new W.FeatureGridImageryProvider(Ct);break;case"s3m":break;default:E.error("config\u914D\u7F6E\u56FE\u5C42\u672A\u5904\u7406:"+vt);break}return Yt&&(Yt.config=Ct),Yt},Nt={BaseLayer:n.BaseLayer,GroupLayer:u.GroupLayer,TileLayer:g.TileLayer,GraticuleLayer:d.GraticuleLayer,ArcFeatureLayer:Y.ArcFeatureLayer,ArcFeatureGridLayer:$.ArcFeatureGridLayer,ArcFeatureImageGridLayer:K.ArcFeatureImageGridLayer,CustomFeatureGridLayer:y.CustomFeatureGridLayer,CustomFeatureImageGridLayer:p.CustomFeatureImageGridLayer,GeoServerWFSLayer:w.GeoServerWFSLayer,POILayer:S.POILayer,GeoJsonLayer:R.GeoJsonLayer,GltfLayer:B.GltfLayer,Tiles3dLayer:k.Tiles3dLayer,S3MLayer:P.S3MLayer,KmlLayer:A.KmlLayer,CzmlLayer:N.CzmlLayer,TerrainLayer:I.TerrainLayer,DrawLayer:G.DrawLayer,BaiduImageryProvider:H.BaiduImageryProvider,AmapImageryProvider:Z.AmapImageryProvider,FeatureGridImageryProvider:W.FeatureGridImageryProvider,regLayerForConfig:Rt,createLayer:Tt,createImageryProvider:mt};z.Layer=Nt},494225:function(X,z,e){"use strict";var E=e(149500),F=e(520314),O=e(426352),M=e(230551),b=e(43586),L=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.LayerManager=void 0;var T=L(e(452909)),C=L(e(66273)),f=L(e(669033)),v=L(e(578756)),m=L(e(611323)),o=L(e(342579)),h=L(e(934749)),l=e(606386),r=e(566828),s=L(e(173081));function c(u,g){var d=typeof M<"u"&&b(u)||u["@@iterator"];if(!d){if(Array.isArray(u)||(d=x(u))||g&&u&&typeof u.length=="number"){d&&(u=d);var y=0,p=function(){};return{s:p,n:function(){return y>=u.length?{done:!![]}:{done:![],value:u[y++]}},e:function(k){throw k},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=!![],S=![],R;return{s:function(){d=d.call(u)},n:function(){var k=d.next();return w=k.done,k},e:function(k){S=!![],R=k},f:function(){try{!w&&d.return!=null&&d.return()}finally{if(S)throw R}}}}function x(u,g){var d;if(u){if(typeof u=="string")return a(u,g);var y=F(d=Object.prototype.toString.call(u)).call(d,8,-1);if(y==="Object"&&u.constructor&&(y=u.constructor.name),y==="Map"||y==="Set")return O(u);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return a(u,g)}}function a(u,g){(g==null||g>u.length)&&(g=u.length);for(var d=0,y=new Array(g);d<g;d++)y[d]=u[d];return y}var i={BEFOREADDLAYER:"beforeAddLayer",AFTERADD3DLAYER:"afterAddLayer",BEFOREREMOVELAYER:"beforeRemoveLayer",AFTERREMOVELAYER:"afterRemoveLayer",ADDLAYERERROR:"addLayerError"},n=l.Evented.extend({initialize:function(g){this.viewer=g.viewer,this.config=g.config,this._isFlyAnimation=![],this.arrOperationallayers=[],this.arrBasemaps=[],this.arrDrawLayers=[],this.arrInitLayers=[],this.idProp=void 0,this.visualizationLayer=void 0,this.tildLayer=[],this.checkedLayers=[],this.tocData=[],this.editLayer=void 0},addLayer:function(g){var d=this.getLayer(g.id,"id");if(d){E.warn("\u8BE5id\u56FE\u5C42\u5DF2\u7ECF\u5B58\u5728");return}try{var y;this.fire(i.BEFOREADDLAYER,{data:g}),g!=null&&g.isBaseMapLayer&&g.isBaseMapLayer===!![]||g!=null&&g.isInitLayer&&g.isInitLayer===!![]?g.group==="1"?(this.config.basemaps.push(g),y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrBasemaps.push(y)):g.group==="2"&&(this.config.operationallayers.push(g),y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrOperationallayers.push(y)):g.group==="1"?(this.config.basemaps.push(g),y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrBasemaps.push(y)):g.group==="2"&&(this.config.operationallayers.push(g),y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrOperationallayers.push(y)),g.type=="geojson-draw"&&(y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrDrawLayers.push(y)),this.fire(i.AFTERADD3DLAYER,{data:g,layer:y}),g.isFit&&this.viewer.container.style.display!=="none"&&this.isLayerFit(y,g)}catch(p){this.fire(i.ADDLAYERERROR,g),E.warn(p)}},isLayerFit:function(g,d){var y=this;return(0,h.default)(m.default.mark(function p(){var w;return m.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:d.camera?y.centerAt(d.camera):(w=d?.duration,g.centerAt(w));case 1:case"end":return R.stop()}},p)}))()},filterLayer:function(g,d){var y,p=this,w,S,R;if(S=(0,T.default)(y=this.arrBasemaps).call(y,function(D){var A;return(0,o.default)(this,p),((A=D.config)===null||A===void 0?void 0:A.id)===g}.bind(this)),S=S||(0,T.default)(w=this.arrOperationallayers).call(w,function(D){var A;return(0,o.default)(this,p),((A=D.config)===null||A===void 0?void 0:A.id)===g}.bind(this)),!S){E.warn("\u8BE5id\u56FE\u5C42\u4E0D\u5B58\u5728");return}switch(R=S.config.type,R){default:case"dynamic":{var B=typeof d=="string"?JSON.parse(d):d;if(S.config.imagerygrid===!![]){S._layerDefs=B,S.setWhere(d);break}B=(0,C.default)(B),S.layer.imageryProvider.layers,S.layer._imageryProvider._layerDefs=B,S.layer.imageryProvider._ready&&S.layer.imageryProvider._reload();break}case"feature-pbf":case"feature":{var k=typeof d=="string"?JSON.parse(d):d;S.setLayerDefs(k);break}case"geoserver-wfs":{var P=this.getLayer(S.config.id,"id");P&&(P.setVisible(![]),setTimeout(function(){(0,o.default)(this,p),S.setWhere(d),P.setVisible(!![])}.bind(this),250))}}},getLayer:function(g,d){d==null&&(d="name");var y=this.arrBasemaps;if(y&&y.length>0)for(var p=0;p<y.length;p++){var w=y[p];if(!(w==null||w.config[d]!==g))return w}var S=this.arrOperationallayers;if(S&&S.length>0)for(var R=0;R<S.length;R++){var B=S[R];if(!(B==null||B.config[d]!==g))return B}var k=this.arrDrawLayers;if(k&&k.length>0)for(var P=0;P<k.length;P++){var D=k[P];if(!(D==null||D.config[d]!==g))return D}},removeLayer:function(g){var d=this.getLayer(g.id,"id"),y=this.getLayer(g.id+"temp","id");this.fire(i.BEFOREREMOVELAYER,{data:g,a:d}),d&&d.setVisible(![]),y&&y.setVisible(![]);var p=this.arrBasemaps;if(p&&p.length>0)for(var w=0;w<p.length;w++){var S=p[w];if(S==null||S.config.id===g.id){var R;(0,f.default)(R=this.arrBasemaps).call(R,w,1);break}}if(p=this.arrOperationallayers,p&&p.length>0)for(var B=0;B<p.length;B++){var k=p[B];if(k==null||k.config.id===g.id){var P;(0,f.default)(P=this.arrOperationallayers).call(P,B,1);break}}if(p=this.arrDrawLayers,p&&p.length>0)for(var D=0;D<p.length;D++){var A=p[D];if(A==null||A.config.id===g.id){var N;(0,f.default)(N=this.arrDrawLayers).call(N,D,1);break}}if(p=this.config.operationallayers,p&&p.length>0)for(var I=0;I<p.length;I++){var G=p[I];if(G==null||G.id===g.id){var W;(0,f.default)(W=this.config.operationallayers).call(W,I,1);break}}this.fire(i.AFTERREMOVELAYER,{data:g})},setTocData:function(g){this.tocData=g},getLayerDataById:function(g){var d=c(this.tocData),y;try{for(d.s();!(y=d.n()).done;){var p=y.value;if(p.children&&p.children.length>0)return this.queryTocData(p,"id",g);if(p.url&&p.url!==""&&p.id===g)return p}}catch(w){d.e(w)}finally{d.f()}},queryTocData:function(g,d,y){if(g.children&&g.children.length>0){var p=c(g.children),w;try{for(p.s();!(w=p.n()).done;){var S=w.value;if(S.children&&S.children.length>0){var R=this.queryTocData(S,d,y);if(R)return R}else if(S[d]===y)return S}}catch(B){p.e(B)}finally{p.f()}}},addCheckedLayers:function(g){var d=this;return new v.default(function(y,p){var w=this;(0,o.default)(this,d),(0,s.default)(g).then(function(S){(0,o.default)(this,w),g._options=S,g.visible=!![],this.checkedLayers=this.getCheckedLayers();var R=this.checkedLayers;if(R.length===0)R.push(g);else for(var B=0,k=R.length;B<k;B++){if(g.mapIndex>=R[B].mapIndex){(0,f.default)(R).call(R,B,0,g);break}B===R.length-1&&R.push(g)}this.addLayer(g),y()}.bind(this)).catch(function(S){(0,o.default)(this,w),E.error(S),this.fire(i.ADD3DLAYERERROR,g),p("\u52A0\u8F7D'".concat(g.label,"'\u56FE\u5C42\u670D\u52A1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5730\u5740\u548C\u8FD0\u7EF4\u7AEF\u914D\u7F6E\u9879\u662F\u5426\u6B63\u786E\u3002"))}.bind(this))}.bind(this))},getCheckedLayers:function(){return this.checkedLayers},getDrawLayers:function(){return this.arrDrawLayers},getDrawLayerInfos:function(){for(var g=this.arrDrawLayers,d=[],y=0,p=g.length;y<p;y++)d.push(g[y].config);return d},removeCheckedLayers:function(g){for(var d=this.getCheckedLayers(),y=0,p=d.length;y<p;y++)if(d[y].id===g.id){(0,f.default)(d).call(d,y,1),this.removeLayer(g);break}this.checkedLayers=d},getLayerOpacity:function(){},setLayerOpacity:function(g,d){var y=this.getLayer(g,"id");y&&y.setOpacity(d/100)},zoomToLayer:function(g){if(g.camera)this.centerAt(g.camera);else{var d=g.id,y=this.getLayer(d,"id");y&&y.centerAt(g.duration||2)}},centerAt:function(g,d){this.viewer.shine.centerAt(g,d)},setLayerTop:function(g){var d=this.getLayer(g,"id");if(d){var y=0,p=d.config.group,w=this.arrOperationallayers,S=c(w),R;try{for(S.s();!(R=S.n()).done;){var B=R.value,k=B.config.group?B.config.group:null;if(k===p){var P=B.config.mapIndex?B.config.mapIndex:0;y=Math.max(y,P)}}}catch(D){S.e(D)}finally{S.f()}d.setZIndex(y+1)}},updateLayer:function(g){if(g.id&&this.getLayer(g.id,"id")){var d=this.getLayer(g.id,"id");d.config.type=="geojson-draw"?d.setProperties(g):E.warn("\u8BE5\u56FE\u5C42\u4E0D\u662F\u7ED8\u5236\u56FE\u5C42\uFF0C\u65E0\u6CD5\u66F4\u65B0")}}});z.LayerManager=n},439613:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.ArcFeatureGridLayer=void 0;var L=b(e(53267)),T=h(e(187647)),C=h(e(630009)),f=h(e(705236)),v=e(400058),m=e(101117);function o(r){if(typeof O!="function")return null;var s=new O,c=new O;return(o=function(a){return a?c:s})(r)}function h(r,s){if(!s&&r&&r.__esModule)return r;if(r===null||F(r)!=="object"&&typeof r!="function")return{default:r};var c=o(s);if(c&&c.has(r))return c.get(r);var x={},a=Object.defineProperty&&M;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var n=a?M(r,i):null;n&&(n.get||n.set)?Object.defineProperty(x,i,n):x[i]=r[i]}return x.default=r,c&&c.set(r,x),x}var l=v.CustomFeatureGridLayer.extend({getDataForGrid:function(s,c){var x=this,a=this.config.url;this.config.visibleLayers&&this.config.visibleLayers.length>0&&(a+="/"+this.config.visibleLayers[0]);var i=f.query({url:a}),n=C.toLatLngBounds(C.toLatLng(s.rectangle.ymin,s.rectangle.xmin),C.toLatLng(s.rectangle.ymax,s.rectangle.xmax));this.config.where&&i.where(this.config.where),this.config.layerDefs&&i.where(this.config.layerDefs[this.config.visibleLayers[0]]),i.intersects(n),i.run(function(u,g){if(!(!x._visible||!x._cacheGrid[s.key])){if(u!=null&&u.code>0){E.error("arcgis\u670D\u52A1\u8BBF\u95EE\u51FA\u9519"+u.message);return}g!=null&&(g.type==="Feature"&&(g={type:"FeatureCollection",features:[g]}),c(g.features))}})},createEntity:function(s,c,x){var a=this,i,n;this.config.symbol.styleOptions&&(i=this.config.symbol.styleOptions.clampToGround,n=this.config.symbol.styleOptions.classificationType);var u=T.GeoJsonDataSource.load(c,{clampToGround:i||!![],classificationType:n||0});return u.then(function(g){if(!a.checkHasBreak[s.key]){if((0,L.default)(g.entities).length===0)return null;var d=(0,L.default)(g.entities);if(d.length>1)for(var y=(0,m.v4)(),p=0;p<=d.length;p++){var w=(0,L.default)(g.entities)[p];w&&w.id&&(w._id=a.config.id+"_"+w.id,w.siblingId=y,w.geojsondata=c,w.geojsondata.siblingId=y,a._addEntity(w,x))}else{var S=(0,L.default)(g.entities)[0];S&&S.id&&(S._id=a.config.id+"_"+S.id,S.geojsondata=c,a._addEntity(S,x))}}}).catch(function(g){a.showError("\u670D\u52A1\u51FA\u9519",g)}),null},createPrimitive:function(s,c,x){var a=this,i,n;this.config.symbol.styleOptions&&(i=this.config.symbol.styleOptions.clampToGround,n=this.config.symbol.styleOptions.classificationType);var u=T.GeoJsonDataSource.load(c,{clampToGround:i||!![],classificationType:n||0});return u.then(function(g){if(!a.checkHasBreak[s.key]){if((0,L.default)(g.entities).length===0)return null;var d=(0,L.default)(g.entities)[0];d._id=a.config.id+"_"+d.id,a._addPrimitive(d,x)}}).catch(function(g){a.showError("\u670D\u52A1\u51FA\u9519",g)}),null},_addPrimitive:function(s,c){var x;if(s.polygon){var a=new T.PolygonGeometry({polygonHierarchy:s.polygon.hierarchy.getValue()});this.config.symbol.volumeStyle?x=new T.ClassificationPrimitive({id:s._id,appearance:new T.EllipsoidSurfaceAppearance({material:new T.Material({fabric:{type:"Color",uniforms:{color:new T.Color(1,1,1,1)}}})}),geometryInstances:new T.GeometryInstance({geometry:a}),asynchronous:![],compressVertices:![],releaseGeometryInstances:![],allowPicking:![],classificationType:T.ClassificationType.CESIUM_3D_TILE}):x=new T.GroundPrimitive({id:s._id,appearance:new T.EllipsoidSurfaceAppearance({material:new T.Material({fabric:{type:"Color",uniforms:{color:new T.Color(1,1,1,1)}}})}),geometryInstances:new T.GeometryInstance({geometry:a}),asynchronous:![],compressVertices:![],releaseGeometryInstances:![],allowPicking:!![],classificationType:T.ClassificationType.NONE}),x.properties=s.properties,this.config.symbol&&this.setPrimitiveConfigSymbol(x,this.config.symbol),!this.primitives.contains(x)&&this.primitives.add(x),c(x)}},_addEntity:function(s,c){var x=this.config.symbol;x&&(typeof x=="function"?x(s,s.properties):x==="default"?this.setDefSymbol(s):this.setConfigSymbol(s,x)),this.bindMourseEvnet(s),this.dataSource.entities.getById(s._id)||this.dataSource.entities.add(s),c(s)},setWhere:function(s){this.config.where=s,this.reload()},setLayerDefs:function(s){this.config.layerDefs=s,this._removeAllImageryCache(),this.reload()}});z.ArcFeatureGridLayer=l},946482:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.ArcFeatureImageGridLayer=void 0;var L=b(e(237561)),T=b(e(342579)),C=o(e(187647)),f=e(792636),v=b(e(377019));function m(l){if(typeof O!="function")return null;var r=new O,s=new O;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||F(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&M;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?M(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var h=f.CustomFeatureImageGridLayer.extend({_layerDefs:void 0,_requestCount:0,createEntity:function(r,s,c){var x=this,a=this.config.url+"/export?bbox="+r.rectangle.xmin+","+r.rectangle.ymin+","+r.rectangle.xmax+","+r.rectangle.ymax+",&bboxSR=4326&layers=show:0&transparent=true&format=png32&size=512,512&imageSR=4326&f=image",i=new C.ImageMaterialProperty({image:a,repeat:C.Cartesian2(1,1),transparent:!![],color:C.Color.WHITE.withAlpha(x.config.opacity)}),n=new C.RectangleGraphics({coordinates:C.Rectangle.fromDegrees(r.rectangle.xmin,r.rectangle.ymin,r.rectangle.xmax,r.rectangle.ymax),material:i}),u=this.dataSource.entities.add({rectangle:n,name:x.config.id+"_"+r.key});return c(u),null},createPrimitive:function(r,s,c){var x=this,a=this,i=this.config.url+"/export?bbox="+r.rectangle.xmin+","+r.rectangle.ymin+","+r.rectangle.xmax+","+r.rectangle.ymax+",&bboxSR=4326&layers=show:"+a.config.visibleLayers.join(",")+"&transparent=true&format=png32&DPI=90&size=256,256&imageSR=4326&f=image",n={};this._layerDefs&&(n.layerDefs=this._layerDefs),this._requestCount++,v.default.get(i,{params:n,responseType:"arraybuffer"}).then(function(u){var g=this;if((0,T.default)(this,x),this._requestCount--,this._clean){c(void 0);return}var d=L.default.createObjectURL(new Blob([u.data],{type:u.headers["content-type"]})),y=new C.RectangleGeometry({rectangle:C.Rectangle.fromDegrees(r.rectangle.xmin,r.rectangle.ymin,r.rectangle.xmax,r.rectangle.ymax),vertexFormat:C.EllipsoidSurfaceAppearance.VERTEX_FORMAT}),p=new C.GeometryInstance({id:a.config.id+"_"+r.key,geometry:y}),w=new C.GroundPrimitive({geometryInstances:p,appearance:new C.EllipsoidSurfaceAppearance({translucent:!![],material:new C.Material({fabric:{type:"Image",uniforms:{image:d,color:C.Color.WHITE.withAlpha(a._opacity)}}})}),asynchronous:![],compressVertices:![],releaseGeometryInstances:![],allowPicking:!![],imageReady:!![],classificationType:C.ClassificationType.BOTH});this.primitives.add(w).readyPromise.then(function(S){if((0,T.default)(this,g),this._clean){c(void 0);return}c(S)}.bind(this))}.bind(this)).catch(function(u){a._requestCount--,E.error(u)})},_addEntity:function(r,s){this.bindMourseEvnet(r),s(r)},setWhere:function(r){var s=this;this._clean=!![],this.config.where=r;var c=setInterval(function(){(0,T.default)(this,s),this._requestCount==0&&(this._removeAllImageryCache(),this._clean=![],this.reload(),clearInterval(c))}.bind(this),1e3)}});z.ArcFeatureImageGridLayer=h},628579:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.ArcFeatureLayer=void 0;var b=f(e(187647)),L=f(e(705236)),T=e(402008);function C(m){if(typeof O!="function")return null;var o=new O,h=new O;return(C=function(r){return r?h:o})(m)}function f(m,o){if(!o&&m&&m.__esModule)return m;if(m===null||F(m)!=="object"&&typeof m!="function")return{default:m};var h=C(o);if(h&&h.has(m))return h.get(m);var l={},r=Object.defineProperty&&M;for(var s in m)if(s!=="default"&&Object.prototype.hasOwnProperty.call(m,s)){var c=r?M(m,s):null;c&&(c.get||c.set)?Object.defineProperty(l,s,c):l[s]=m[s]}return l.default=m,h&&h.set(m,l),l}var v=T.GeoJsonLayer.extend({queryData:function(){this.dataSource&&(this.viewer.dataSources.remove(this.dataSource),this.dataSource=null);var o=this,h=this.config.url;this.config.layers&&this.config.layers.length>0&&(h+="/"+this.config.layers[0]);var l=L.default.query({url:h});this.config.where&&l.where(this.config.where),l.run(function(r,s){if(r!=null&&r.code>0){E.error(r.message,"\u670D\u52A1\u8BBF\u95EE\u51FA\u9519");return}if(s==null||s.features.length===0)E.error("\u672A\u627E\u5230\u7B26\u5408\u67E5\u8BE2\u6761\u4EF6\u7684\u8981\u7D20\uFF01");else{for(var c=[],x=0;x<s.features.length;x++){var a=s.features[x];a==null||a.geometry==null||a.geometry.coordinates&&a.geometry.coordinates.length===0||c.push(a)}s.features=c;var i=new b.GeoJsonDataSource,n=b.GeoJsonDataSource.load(s,{clampToGround:!![]});n.then(function(){o.showResult(i)}).catch(function(u){o.showError("\u670D\u52A1\u51FA\u9519",u)})}})},setWhere:function(o){this.config.where=o,this.queryData()}});z.ArcFeatureLayer=v},439432:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.ArcGisMapServerCGCS2000ImageryProvider=void 0;var L=b(e(578756)),T=b(e(705146)),C=b(e(122777)),f=b(e(42762)),v=b(e(330044)),m=b(e(299085)),o=b(e(234009)),h=s(e(187647)),l=e(142501);function r(i){if(typeof O!="function")return null;var n=new O,u=new O;return(r=function(d){return d?u:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=r(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&M;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?M(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}function c(i){var n=x();return function(){var g=(0,o.default)(i),d;if(n){var y=(0,o.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,m.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,v.default)(u,i);var n=c(u);function u(){var g,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,C.default)(this,u),g=n.call(this,d),g.options=d,g.init(),g}return(0,f.default)(u,[{key:"init",value:function(){}},{key:"metadataSuccess",value:function(d){var y;this._dpi=this.options.dpi||(d==null||(y=d.tileInfo)===null||y===void 0?void 0:y.dpi)||this._dpi;var p=d.tileInfo;if(this._useTiles=![],this._wkid=d.spatialReference.wkid,(d.spatialReference.wkid===4490||d.spatialReference.wkid===4326)&&p&&!this._dynamicForced){var w=this.options;if(w){if(d.spatialReference.wkid===4490||d.spatialReference.wkid===4326){var S=new l.GeographicTilingSchemeCGCS2000({ellipsoid:w.ellipsoid,tileInfo:p});this._tilingScheme=S}this._maximumLevel=p.lods.length-1,this._useTiles=!![],h.defined(d.fullExtent)?h.defined(d.fullExtent.spatialReference)&&h.defined(d.fullExtent.spatialReference.wkid)&&(d.spatialReference.wkid===4490||d.spatialReference.wkid===4326)&&(this._rectangle=h.Rectangle.fromDegrees(d.fullExtent.xmin,d.fullExtent.ymin,d.fullExtent.xmax,d.fullExtent.ymax)):this._rectangle=this._tilingScheme.rectangle,!h.defined(this._tileDiscardPolicy)&&(this._tileDiscardPolicy=new h.DiscardMissingTileImagePolicy({missingImageUrl:this.buildImageResource(this,0,0,this._maximumLevel).url,pixelsToCheck:[new h.Cartesian2(0,0),new h.Cartesian2(200,20),new h.Cartesian2(20,200),new h.Cartesian2(80,110),new h.Cartesian2(160,130)],disableCheckIfAllPixelsAreTransparent:!![]}))}}return h.defined(d.copyrightText)&&d.copyrightText.length>0&&(this._credit=new h.Credit(d.copyrightText)),this._ready=!![],L.default.resolve(!![])}},{key:"buildImageResource",value:function(d,y,p,w,S){var R;if(d._useTiles)R=d._resource.getDerivedResource({url:"tile/"+w+"/"+p+"/"+y,request:S});else{var B=d._tilingScheme.tileXYToNativeRectangle(y,p,w),k=B.west+","+B.south+","+B.east+","+B.north,P={bbox:k,size:d._tileWidth+","+d._tileHeight,dpi:d._dpi,format:"png32",transparent:!![],f:"image"};if(d._tilingScheme.projection instanceof h.GeographicProjection){var D=d._wkid;D!==4490&&(D=4326),P.bboxSR=D,P.imageSR=D}else P.bboxSR=3857,P.imageSR=3857;d.layers&&(P.layers="show:"+d.layers),d.layerDefs&&(P.layerDefs=d.layerDefs),R=d._resource.getDerivedResource({url:"export",request:S,queryParameters:P})}return R}}]),u}(h.ArcGisMapServerImageryProvider);z.ArcGisMapServerCGCS2000ImageryProvider=a,a.prototype.requestImage=function(i,n,u,g){if(!this._ready)throw new h.DeveloperError("requestImage must not be called before the imagery provider is ready.");return h.ImageryProvider.loadImage(this,this.buildImageResource(this,i,n,u,g))},a.prototype.pickFeatures=function(i,n,u,g,d){var y,p,w,S,R;if(!this._ready)throw new h.DeveloperError("pickFeatures must not be called before the imagery provider is ready.");if(this.enablePickFeatures){var B=this._tilingScheme.tileXYToNativeRectangle(i,n,u),k,P,D;if(this._tilingScheme.projection instanceof h.GeographicProjection)k=h.Math.toDegrees(g),P=h.Math.toDegrees(d),D=this._wkid||"4326";else{var A=this._tilingScheme.projection.project(new h.Cartographic(g,d,0));k=A.x,P=A.y,D=this._wkid||"3857"}var N="visible";h.defined(this._layers)&&(N+=":".concat(this._layers));var I={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:(0,T.default)(y="".concat(k,",")).call(y,P),mapExtent:(0,T.default)(p=(0,T.default)(w=(0,T.default)(S="".concat(B.west,",")).call(S,B.south,",")).call(w,B.east,",")).call(p,B.north),imageDisplay:(0,T.default)(R="".concat(this._tileWidth,",")).call(R,this._tileHeight,",96"),sr:D,layers:N};h.defined(this._layerDefs)&&(I.layerDefs=this._layerDefs);var G=this._resource.getDerivedResource({url:"identify",queryParameters:I});return G.fetchJson().then(function(W){var Z=[],H=W.results;if(!h.defined(H))return Z;for(var U=0;U<H.length;++U){var V=H[U],Y=new h.ImageryLayerFeatureInfo;if(Y.data=V,Y.name=V.value,Y.properties=V.attributes,Y.configureDescriptionFromProperties(V.attributes),V.geometryType==="esriGeometryPoint"&&V.geometry){var $=V.geometry.spatialReference&&V.geometry.spatialReference.wkid?V.geometry.spatialReference.wkid:4326;if($===4326||$===4283||$===4490)Y.position=h.Cartographic.fromDegrees(V.geometry.x,V.geometry.y,V.geometry.z);else if($===102100||$===900913||$===3857){var K=new h.WebMercatorProjection;Y.position=K.unproject(new h.Cartesian3(V.geometry.x,V.geometry.y,V.geometry.z))}}Z.push(Y)}return Z})}}},400058:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.CustomFeatureGridLayer=void 0;var b=M(e(66273)),L=M(e(669033)),T=x(e(187647)),C=M(e(202692)),f=x(e(580823)),v=e(162344),m=x(e(980790)),o=x(e(721617)),h=x(e(669471)),l=x(e(496535)),r=x(e(131490)),s=e(792672);function c(i){if(typeof F!="function")return null;var n=new F,u=new F;return(c=function(d){return d?u:n})(i)}function x(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=c(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&O;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?O(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}var a=v.FeatureGridLayer.extend({_cacheGrid:{},_cacheFeature:{},_addImageryCache:function(n){this._cacheGrid[n.key]={opts:n,isLoading:!![]};var u=this;this.getDataForGrid(n,function(g){u._visible&&(u.config.primitiveRender?u._showPrimitiveData(n,g):u._showData(n,g))})},getDataForGrid:function(n,u){this.config.getDataForGrid&&this.config.getDataForGrid(n,u)},checkHasBreak:function(n){return!this._visible||!this._cacheGrid[n]?!![]:![]},_showData:function(n,u){var g=this,d=n.key;if(!this.checkHasBreak[d]){for(var y=this,p=[],w=function(){var k=u[S],P=k.properties[g.config.IdName?g.config.IdName:g.config.keyfield]||k.id,D=g._cacheFeature[P];if(D)D.grid.push(d),g.updateEntity(D.entity,k);else{var A=g.createEntity(n,k,function(N){y.config.debuggerTileInfo&&(N._temp_id=P,N.popup=function(I){return(0,b.default)(y._cacheFeature[I._temp_id].grid)}),y._cacheFeature[P]={grid:[d],entity:N}});A!=null&&(y.config.debuggerTileInfo&&(A._temp_id=P,A.popup=function(N){return(0,b.default)(y._cacheFeature[N._temp_id].grid)}),y._cacheFeature[P]={grid:[d],entity:A})}p.push(P)},S=0,R=u.length;S<R;S++)w();this._cacheGrid[d]=this._cacheGrid[d]||{},this._cacheGrid[d].ids=p,this._cacheGrid[d].isLoading=![]}},_showPrimitiveData:function(n,u){var g=this,d=n.key;if(!this.checkHasBreak[d]){for(var y=this,p=[],w=function(){var k=u[S],P=k.properties[g.config.IdName?g.config.IdName:g.config.keyfield]||k.id,D=g._cacheFeature[P];if(D)D.grid.push(d),g.updateEntity(D.entity,k);else{var A=g.createPrimitive(n,k,function(N){y.config.debuggerTileInfo&&(N._temp_id=P,N.popup=function(I){return(0,b.default)(y._cacheFeature[I._temp_id].grid)}),y._cacheFeature[P]={grid:[d],primitive:N}});A!=null&&(y.config.debuggerTileInfo&&(A._temp_id=P,A.popup=function(N){return(0,b.default)(y._cacheFeature[N._temp_id].grid)}),y._cacheFeature[P]={grid:[d],entity:A})}p.push(P)},S=0,R=u.length;S<R;S++)w();this._cacheGrid[d]=this._cacheGrid[d]||{},this._cacheGrid[d].ids=p,this._cacheGrid[d].isLoading=![]}},createEntity:function(n,u,g){return this.config.createEntity?this.config.createEntity(n,u,g):null},updateEntity:function(n,u){this.config.updateEntity&&this.config.updateEntity(n,u)},removeEntity:function(n){this.config.removeEntity?this.config.removeEntity(n):this.dataSource.entities.remove(n)},removePrimitive:function(n){this.config.removePrimitive?this.config.removePrimitive(n):this.primitives.remove(n)},_removeImageryCache:function(n){var u=n.key,g=this._cacheGrid[u];if(g){if(g.ids)for(var d=0;d<g.ids.length;d++){var y=g.ids[d],p=this._cacheFeature[y];p&&(this.customRemove(p.grid,u),p.grid.length===0&&(delete this._cacheFeature[y],this.removeEntity(p.entity),this.removePrimitive(p.primitive)))}delete this._cacheGrid[u]}},_removeAllImageryCache:function(){this.config.removeAllEntity?this.config.removeAllEntity():(this.dataSource.entities.removeAll(),this.primitives.removeAll());for(var n in this._cacheFeature)delete this._cacheFeature[n]},removeEx:function(){this.config.removeAllEntity?this.config.removeAllEntity():(this.dataSource.entities.removeAll(),this.primitives.removeAll());for(var n in this._cacheFeature)delete this._cacheFeature[n];for(var u in this._cacheGrid)delete this._cacheGrid[u]},reload:function(){var n=this,u=this,g=function(){var w=n._cacheGrid[d];if(w==null||w.opts==null||w.isLoading)return"continue";var S=w.opts;n.getDataForGrid(S,function(R){u._showData(S,R)})};for(var d in this._cacheGrid)var y=g()},hasOpacity:!![],_opacity:1,setOpacity:function(n){this._opacity=n;for(var u in this._cacheFeature){var g=this._cacheFeature[u].entity,d=this._cacheFeature[u].primitive;if(d!=null&&d._primitive&&this._updatePrimitiveAlpha(d._primitive.appearance.material.uniforms.color,this._opacity),g!=null&&(g.polygon&&g.polygon.material&&g.polygon.material.color&&(this._updatEntityAlpha(g.polygon.material.color,this._opacity),g.polygon.outlineColor&&this._updatEntityAlpha(g.polygon.outlineColor,this._opacity)),g.polyline&&g.polyline.material&&g.polyline.material.color&&this._updatEntityAlpha(g.polyline.material.color,this._opacity),g.billboard&&(g.billboard.color=new T.Color.fromCssColorString("#FFFFFF").withAlpha(this._opacity)),g.model&&(g.model.color=new T.Color.fromCssColorString("#FFFFFF").withAlpha(this._opacity)),g.label)){var y=this._opacity;g.attribute&&g.attribute.label&&g.attribute.label.opacity&&(y=g.attribute.label.opacity),g.label.fillColor&&this._updatEntityAlpha(g.label.fillColor,y),g.label.outlineColor&&this._updatEntityAlpha(g.label.outlineColor,y),g.label.backgroundColor&&this._updatEntityAlpha(g.label.backgroundColor,y)}}},_updatEntityAlpha:function(n,u){if(n){var g=n.getValue(this.viewer.clock.currentTime);if(!g||!g.withAlpha)return n;g=g.withAlpha(u),n.setValue(g)}},_updatePrimitiveAlpha:function(n,u){n.alpha=u},bindMourseEvnet:function(n){var u,g=this;(this.config.columns||this.config.popup||(u=this.config.identifyField[0])!==null&&u!==void 0&&u.popup3d)&&(n.popup={html:function(y){var p=g.getEntityAttr(y);return f.isString(p)?p:f.getPopupForConfig(g.config,p)},anchor:this.config.popupAnchor||[0,-15]}),this.config.tooltip&&(n.tooltip={html:function(y){var p=g.getEntityAttr(y);return f.isString(p)?p:f.getPopupForConfig({popup:g.config.tooltip},p)},anchor:this.config.tooltipAnchor||[0,-15]}),this.config.click&&(n.click=this.config.click),this.config.mouseover&&(n.mouseover=this.config.mouseover),this.config.mouseout&&(n.mouseout=this.config.mouseout)},getEntityAttr:function(n){return f.getAttrVal(n.properties)},colorHash:{},setDefSymbol:function(n){var u=this.getEntityAttr(n)||{};if(n.polygon){var g=u.id||u.OBJECTID||0,d=this.colorHash[g];!d&&(d=T.Color.fromRandom({minimumGreen:.75,maximumBlue:.75,alpha:this._opacity}),this.colorHash[g]=d),n.polygon.material=d,n.polygon.outline=!![],n.polygon.outlineColor=T.Color.WHITE}else if(n.polyline){var y=u.id||u.OBJECTID||0,p=this.colorHash[y];!p&&(p=T.Color.fromRandom({minimumGreen:.75,maximumBlue:.75,alpha:this._opacity}),this.colorHash[y]=p),n.polyline.material=p,n.polyline.width=2}else n.billboard&&(n.billboard.scale=.5,n.billboard.horizontalOrigin=T.HorizontalOrigin.CENTER,n.billboard.verticalOrigin=T.VerticalOrigin.BOTTOM)},setConfigSymbol:function(n,u){var g=this.getEntityAttr(n)||{},d=u.styleOptions;if(d.opacity&&(d.opacity=this._opacity===1?d.opacity*this._opacity:this._opacity),u.styleField){if(u.styleFieldOptions){var y=g[u.styleField],p=u.styleFieldOptions[y];p!=null&&(p.opacity=this._opacity,p.outlineOpacity=this._opacity,d=f.clone(d),d=C.default.extend(d,p))}else if(u.styleStepOptions){var w=u.minValue;w===null&&(w=Number.MIN_VALUE);var S=g[u.styleField],R=this.getIndexByValue(u.styleStepOptions,w,S);if(R!=null){var B=u.styleStepOptions[R].style;B.opacity=this._opacity,B.outlineOpacity=this._opacity,d=f.clone(d),d=C.default.extend(d,B)}}}if(typeof u.calback=="function"){var k=u.calback(g,n,u);if(!k)return;d=f.clone(d),d=C.default.extend(d,k)}if(d=d||{},n.polyline&&(h.style2Entity(d,n.polyline),d.label&&d.label.field)){d.label.heightReference=T.defaultValue(d.label.heightReference,T.HeightReference.CLAMP_TO_GROUND);var P=o.style2Entity(d.label);P.text=g[d.label.field]||P.text||"";var D=h.getPositions(n),A=D[Math.floor(D.length/2)];d.label.position&&(d.label.position==="center"?A=(0,s.centerOfMass)(D):f.isNumber(d.label.position)&&(A=D[d.label.position])),n.position=A,n.label=P}if(n.polygon){if(d.classificationType===void 0&&(d.classificationType=T.ClassificationType.BOTH),l.style2Entity(d,n.polygon),d.outlineWidth&&d.outlineWidth<1&&(d.outlineWidth=1),d.outlineWidth&&d.outlineWidth>1||d.classificationType!=T.ClassificationType.NONE)if(u.volumeStyle&&!u.volumeStyle.render2d)d.outlineWidth=1;else{n.polygon.outline=![];var N={color:d.outlineColor,width:d.outlineWidth,opacity:d.outlineOpacity,lineType:"solid",clampToGround:!![],classificationType:d.classificationType,outline:![]},I=h.style2Entity(N);I.positions=l.getPositions(n),n.polyline=I}if(d.label&&d.label.field){d.label.heightReference=T.defaultValue(d.label.heightReference,T.HeightReference.CLAMP_TO_GROUND);var G=o.style2Entity(d.label);G.text=g[d.label.field]||G.text||"",n.position=(0,s.pointOnPolygon)(l.getPositions(n),l.getHoles(n)),n.label=G}if(u.volumeStyle){var W=Number(g[u.volumeStyle.cloumn]||1),Z=u.volumeStyle.storeyheight||3.5;if(f.isString(Z)&&(Z=g[Z]||3.5),u.volumeStyle.Updownheight){var H=u.volumeStyle.Updownheight.down,U=u.volumeStyle.Updownheight.up;f.isNumber(H)?n.polygon.height=H:f.isString(H)&&(n.polygon.height=g[H]||0),f.isNumber(U)?n.polygon.extrudedHeight=U:f.isString(U)?n.polygon.extrudedHeight=g[U]||n.polygon.height+(Z||3.5):U==null&&(n.polygon.extrudedHeight=n.polygon.height+(Z||3.5))}else n.polygon.extrudedHeight=W*Z;if(u.volumeStyle.outlineWidth!==void 0&&u.volumeStyle.outlineWidth==![]&&(n.polygon.outline=![]),u.volumeStyle.clampToGround&&(n.polygon.heightReference=T.HeightReference.CLAMP_TO_GROUND),d.label&&d.label.field){var V,Y;n.position=(0,s.setPositionsHeight)(n.position.getValue(),(V=n.polygon)===null||V===void 0||(Y=V.extrudedHeight)===null||Y===void 0?void 0:Y.getValue())}}}if(n.label&&(d.label=d.label||d||{},d.label.heightReference=T.defaultValue(d.label.heightReference,T.HeightReference.CLAMP_TO_GROUND),o.style2Entity(d.label,n.label),d.label.field&&(n.label.text=g[d.label.field]||n.label.text||"")),n.billboard){if(d.heightReference=T.defaultValue(d.heightReference,T.HeightReference.CLAMP_TO_GROUND),m.style2Entity(d,n.billboard),d.label&&d.label.field&&!n.label){d.label.heightReference=T.defaultValue(d.label.heightReference,T.HeightReference.CLAMP_TO_GROUND);var $=o.style2Entity(d.label);$.text=g[d.label.field]||$.text||"",n.label=$}if(d.model){d.model.heightReference=T.defaultValue(d.model.heightReference,T.HeightReference.CLAMP_TO_GROUND);var K=r.style2Entity(d.model);n.model=K}}if((d.heightReference===T.HeightReference.NONE||d.heightReference===T.HeightReference.RELATIVE_TO_GROUND)&&(n.label||n.billboard)&&d.annotationheightField){var J=d.annotationheightField;f.isString(J)&&(J=Number(g[J])),f.isNumber(J)&&(n.position=(0,s.setPositionsHeight)(n.position.getValue(),J))}n.attribute=d},setPrimitiveConfigSymbol:function(n,u){var g=this.getEntityAttr(n)||{},d=u.styleOptions;if(d.opacity&&(d.opacity=this._opacity),u.styleField){if(u.styleFieldOptions){var y=g[u.styleField],p=u.styleFieldOptions[y];p!=null&&(p.opacity=this._opacity,p.outlineOpacity=this._opacity,d=f.clone(d),d=C.default.extend(d,p))}else if(u.styleStepOptions){var w=u.minValue;w===null&&(w=Number.MIN_VALUE);var S=g[u.styleField],R=this.getIndexByValue(u.styleStepOptions,w,S);if(R!=null){var B=u.styleStepOptions[R].style;B.opacity=this._opacity,B.outlineOpacity=this._opacity,d=f.clone(d),d=C.default.extend(d,B)}}}var k=n.geometryInstances.geometry;if(k instanceof T.PolygonGeometry&&(!d.classificationType&&(d.classificationType=T.ClassificationType.BOTH),l.style2Primitive(d,n),u.volumeStyle)){var P=Number(g[u.volumeStyle.cloumn]||1),D=u.volumeStyle.storeyheight||3.5;if(f.isString(D)&&(D=g[D]||3.5),u.volumeStyle.Updownheight){var A=u.volumeStyle.Updownheight.down,N=u.volumeStyle.Updownheight.up;f.isNumber(A)?k._height=A:f.isString(A)&&(k._height=g[A]||0),f.isNumber(N)?k.extrudedHeight=N:f.isString(N)?k._extrudedHeight=g[N]||k._height+(D||3.5):N==null&&(k._extrudedHeight=k._height+(D||3.5))}else k._extrudedHeight=P*D}},arrayRemove:function(n,u){for(var g=0;g<n.length;g++)if(this[g]==u){var d;(0,L.default)(d=this).call(d,g,1);break}},getIndexByValue:function(n,u,g){for(var d in n){var y=n[d].value;if(g>=u&&g<=y)return d;u=y}},customRemove:function(n,u){for(var g=0;g<n.length;g++)if(n[g]==u){(0,L.default)(n).call(n,g,1);break}return n}});z.CustomFeatureGridLayer=a},792636:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.CustomFeatureImageGridLayer=void 0;var b=M(e(66273)),L=M(e(669033)),T=M(e(342579)),C=m(e(187647)),f=e(162344);function v(h){if(typeof F!="function")return null;var l=new F,r=new F;return(v=function(c){return c?r:l})(h)}function m(h,l){if(!l&&h&&h.__esModule)return h;if(h===null||E(h)!=="object"&&typeof h!="function")return{default:h};var r=v(l);if(r&&r.has(h))return r.get(h);var s={},c=Object.defineProperty&&O;for(var x in h)if(x!=="default"&&Object.prototype.hasOwnProperty.call(h,x)){var a=c?O(h,x):null;a&&(a.get||a.set)?Object.defineProperty(s,x,a):s[x]=h[x]}return s.default=h,r&&r.set(h,s),s}var o=f.FeatureGridLayer.extend({_cacheGrid:{},_cacheFeature:{},_clean:![],_update:!![],_helper:void 0,_addImageryCache:function(l){this._cacheGrid[l.key]={opts:l,isLoading:!![]};var r=this;l.level<r.config.minimumLevel||r._visible&&(r._update&&(r._helper=new C.EventHelper,r._helper&&(r._update=![]),r._helper.add(r.viewer.scene.globe.tileLoadProgressEvent,function(s){s===0&&r._updatePrimitiveLayers()})),r._showData(l,null))},_updatePrimitiveLayers:function(){for(var l=this,r=this.primitives,s=r.length,c=0;c<s;++c){var x=r.get(c);x.show=![]}this.viewer.scene.globe._surface._tilesToRender.forEach(function(a){(0,T.default)(this,l);var i=a._level+"_x"+a._x+"_y"+a._y,n=this===null||this===void 0?void 0:this._cacheFeature[i];n&&(n.primitive.show=!![])}.bind(this))},getDataForGrid:function(l,r){this.config.getDataForGrid&&this.config.getDataForGrid(l,r)},checkHasBreak:function(l){return!this._visible||!this._cacheGrid[l]?!![]:![]},_showData:function(l,r){var s=l.key;if(!this.checkHasBreak[s]){var c=this,x=[],a=l.key,i=this._cacheFeature[a];if(!c._clean&&!i){var n;this.createPrimitive(l,r,function(d){var y;if(!c._clean){if(c.config.debuggerTileInfo&&(d.popup=function(p){return(0,b.default)(c._cacheFeature[p._temp_id].grid)}),!c._cacheGrid[s]){c.removePrimitive(d);return}(l==null||(y=l.imagery)===null||y===void 0?void 0:y.referenceCount)>1&&(d.show=![]),c._cacheFeature[l.key]={grid:[l.key],primitive:d}}}),x.push(a),this._cacheGrid[s]=this._cacheGrid[s]||{},this._cacheGrid[s].ids=x,this._cacheGrid[s].isLoading=![];var u=l==null||(n=l.imagery)===null||n===void 0?void 0:n.parent,g=u?.level+"_x"+u?.x+"_y"+u?.y;u?.referenceCount>1&&this._cacheFeature[g]&&(this._cacheFeature[g].primitive.show=![])}}},removePrimitive:function(l){l instanceof C.GroundPrimitive&&(this.config.removePrimitive?this.config.removePrimitive(l):this.primitives.remove(l))},_removeImageryCache:function(l){var r=l.key,s=this._cacheGrid[r];if(s){if(s.ids)for(var c=0;c<s.ids.length;c++){var x=s.ids[c],a=this._cacheFeature[x];if(a&&(this.customRemove(a.grid,r),a.grid.length===0)){delete this._cacheFeature[x],this.removePrimitive(a.primitive);var i=l.imagery.parent,n=i.level+"_x"+i.x+"_y"+i.y;i.referenceCount<5&&this._cacheFeature[n]&&(this._cacheFeature[n].primitive.show=!![])}}this._cacheFeature[r]&&delete this._cacheFeature[r],delete this._cacheGrid[r]}},_removeAllImageryCache:function(){this.config.removeAllPrimitive?this.config.removeAllPrimitive():this.primitives.removeAll();for(var l in this._cacheFeature)delete this._cacheFeature[l]},removeEx:function(){this._helper.removeAll(),this._clean=!![],this.config.removeAllPrimitive?this.config.removeAllPrimitive():this.primitives.removeAll();for(var l in this._cacheFeature)delete this._cacheFeature[l];for(var r in this._cacheGrid)delete this._cacheGrid[r]},reload:function(){var l=this;for(var r in this._cacheGrid){var s=this._cacheGrid[r];if(!(s==null||s.opts==null||s.isLoading)){var c=s.opts;l._showData(c,null)}}},hasOpacity:!![],_opacity:1,setOpacity:function(l){this._opacity=l;for(var r in this._cacheFeature){var s=this._cacheFeature[r].primitive;s!=null&&s._primitive&&this._updatePrimitiveAlpha(s._primitive.appearance.material.uniforms.color,this._opacity)}},_updatePrimitiveAlpha:function(l,r){l.alpha=r},customRemove:function(l,r){for(var s=0;s<l.length;s++)if(l[s]==r){(0,L.default)(l).call(l,s,1);break}return l}});z.CustomFeatureImageGridLayer=o},421548:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.AmapImageryProvider=void 0;var L=b(e(42762)),T=b(e(122777)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=e(895340),o=l(e(187647));function h(x){if(typeof O!="function")return null;var a=new O,i=new O;return(h=function(u){return u?i:a})(x)}function l(x,a){if(!a&&x&&x.__esModule)return x;if(x===null||E(x)!=="object"&&typeof x!="function")return{default:x};var i=h(a);if(i&&i.has(x))return i.get(x);var n={},u=Object.defineProperty&&M;for(var g in x)if(g!=="default"&&Object.prototype.hasOwnProperty.call(x,g)){var d=u?M(x,g):null;d&&(d.get||d.set)?Object.defineProperty(n,g,d):n[g]=x[g]}return n.default=x,i&&i.set(x,n),n}function r(x){var a=s();return function(){var n=(0,v.default)(x),u;if(a){var g=(0,v.default)(this).constructor;u=F(n,arguments,g)}else u=n.apply(this,arguments);return(0,f.default)(this,u)}}function s(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var c=function(x){(0,C.default)(i,x);var a=r(i);function i(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,T.default)(this,i),n.tilingScheme=new m.AmapMercatorTilingScheme,a.call(this,n)}return(0,L.default)(i)}(o.UrlTemplateImageryProvider);z.AmapImageryProvider=c},739258:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.BaiduImageryProvider=void 0;var b=M(e(122777)),L=M(e(42762)),T=e(895340),C=v(e(187647));function f(o){if(typeof F!="function")return null;var h=new F,l=new F;return(f=function(s){return s?l:h})(o)}function v(o,h){if(!h&&o&&o.__esModule)return o;if(o===null||E(o)!=="object"&&typeof o!="function")return{default:o};var l=f(h);if(l&&l.has(o))return l.get(o);var r={},s=Object.defineProperty&&O;for(var c in o)if(c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)){var x=s?O(o,c):null;x&&(x.get||x.set)?Object.defineProperty(r,c,x):r[c]=o[c]}return r.default=o,l&&l.set(o,r),r}var m=function(){function o(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if((0,b.default)(this,o),this._url=h.url,this._labelStyle=h.labelStyle||"web2D",this._tileWidth=256,this._tileHeight=256,this._maximumLevel=18,this._crs="WGS84",h.crs==="WGS84"){for(var l=[],r=0;r<19;r++)l[r]=256*Math.pow(2,18-r);this._tilingScheme=new T.BaiduMercatorTilingScheme({resolutions:l,rectangleSouthwestInMeters:new C.Cartesian2(-2003772637e-2,-1247410417e-2),rectangleNortheastInMeters:new C.Cartesian2(2003772637e-2,1247410417e-2)})}else this._tilingScheme=new C.WebMercatorTilingScheme({rectangleSouthwestInMeters:new C.Cartesian2(-33554054,-33746824),rectangleNortheastInMeters:new C.Cartesian2(33554054,33746824)});this._rectangle=this._tilingScheme.rectangle,this._credit=void 0,this._token=void 0,this._style=h.style||"normal"}return(0,L.default)(o,[{key:"url",get:function(){return this._url}},{key:"token",get:function(){return this._token}},{key:"tileWidth",get:function(){if(!this.ready)throw new C.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},{key:"tileHeight",get:function(){if(!this.ready)throw new C.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},{key:"maximumLevel",get:function(){if(!this.ready)throw new C.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},{key:"minimumLevel",get:function(){if(!this.ready)throw new C.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return 0}},{key:"tilingScheme",get:function(){if(!this.ready)throw new C.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},{key:"rectangle",get:function(){if(!this.ready)throw new C.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},{key:"ready",get:function(){return!!this._url}},{key:"credit",get:function(){return this._credit}},{key:"hasAlphaChannel",get:function(){return!![]}},{key:"getTileCredits",value:function(){}},{key:"requestImage",value:function(l,r,s){if(!this.ready)throw new C.DeveloperError("requestImage must not be called before the imagery provider is ready.");var c=this._tilingScheme.getNumberOfXTilesAtLevel(s),x=this._tilingScheme.getNumberOfYTilesAtLevel(s),a=this._url.replace("{z}",s).replace("{s}",String(1)).replace("{style}",this._style).replace("{labelStyle}",this._labelStyle).replace("{time}",String(new Date().getTime()));return this._crs==="WGS84"?a=a.replace("{x}",String(l)).replace("{y}",String(-r)):a=a.replace("{x}",String(l-c/2)).replace("{y}",String(x/2-r-1)),C.ImageryProvider.loadImage(this,a)}}]),o}();z.BaiduImageryProvider=m},202004:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=E(e(122777)),O=E(e(42762)),M=637099681e-2,b=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],L=[75,60,45,30,15,0],T=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],C=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],f=function(){function m(){(0,F.default)(this,m),this.isWgs84=![]}return(0,O.default)(m,[{key:"getDistanceByMC",value:function(h,l){if(!h||!l||(h=this.convertMC2LL(h),!h))return 0;var r=this.toRadians(h.lng),s=this.toRadians(h.lat);if(l=this.convertMC2LL(l),!l)return 0;var c=this.toRadians(l.lng),x=this.toRadians(l.lat);return this.getDistance(r,c,s,x)}},{key:"getDistanceByLL",value:function(h,l){if(!h||!l)return 0;h.lng=this.getLoop(h.lng,-180,180),h.lat=this.getRange(h.lat,-74,74),l.lng=this.getLoop(l.lng,-180,180),l.lat=this.getRange(l.lat,-74,74);var r=this.toRadians(h.lng),s=this.toRadians(h.lat),c=this.toRadians(l.lng),x=this.toRadians(l.lat);return this.getDistance(r,c,s,x)}},{key:"convertMC2LL",value:function(h){if(!h)return{lng:0,lat:0};var l={};if(this.isWgs84){l.lng=h.lng/2003750834e-2*180;var r=h.lat/2003750834e-2*180;return l.lat=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2),{lng:l.lng.toFixed(6),lat:l.lat.toFixed(6)}}for(var s={lng:Math.abs(h.lng),lat:Math.abs(h.lat)},c,x=0;x<b.length;x++)if(s.lat>=b[x]){c=T[x];break}return l=this.convertor(h,c),{lng:l.lng.toFixed(6),lat:l.lat.toFixed(6)}}},{key:"convertLL2MC",value:function(h){if(!h)return{lng:0,lat:0};if(h.lng>180||h.lng<-180||h.lat>90||h.lat<-90)return h;if(this.isWgs84){var l={},r=6378137;l.lng=h.lng*Math.PI/180*r;var s=h.lat*Math.PI/180;return l.lat=r/2*Math.log((1+Math.sin(s))/(1-Math.sin(s))),{lng:parseFloat(l.lng.toFixed(2)),lat:parseFloat(l.lat.toFixed(2))}}h.lng=this.getLoop(h.lng,-180,180),h.lat=this.getRange(h.lat,-74,74);for(var c={lng:h.lng,lat:h.lat},x,a=0;a<L.length;a++)if(c.lat>=L[a]){x=C[a];break}if(!x){for(var i=0;i<L.length;i++)if(c.lat<=-L[i]){x=C[i];break}}var n=this.convertor(h,x);return{lng:parseFloat(n.lng.toFixed(2)),lat:parseFloat(n.lat.toFixed(2))}}},{key:"convertor",value:function(h,l){if(!h||!l)return{lng:0,lat:0};var r=l[0]+l[1]*Math.abs(h.lng),s=Math.abs(h.lat)/l[9],c=l[2]+l[3]*s+l[4]*s*s+l[5]*s*s*s+l[6]*s*s*s*s+l[7]*s*s*s*s*s+l[8]*s*s*s*s*s*s;return r*=h.lng<0?-1:1,c*=h.lat<0?-1:1,{lng:r,lat:c}}},{key:"getDistance",value:function(h,l,r,s){return M*Math.acos(Math.sin(r)*Math.sin(s)+Math.cos(r)*Math.cos(s)*Math.cos(l-h))}},{key:"toRadians",value:function(h){return Math.PI*h/180}},{key:"toDegrees",value:function(h){return 180*h/Math.PI}},{key:"getRange",value:function(h,l,r){return l!=null&&(h=Math.max(h,l)),r!=null&&(h=Math.min(h,r)),h}},{key:"getLoop",value:function(h,l,r){for(;h>r;)h-=r-l;for(;h<l;)h+=r-l;return h}},{key:"lngLatToMercator",value:function(h){return this.convertLL2MC(h)}},{key:"lngLatToPoint",value:function(h){var l=this.convertLL2MC(h);return{x:l.lng,y:l.lat}}},{key:"mercatorToLngLat",value:function(h){return this.convertMC2LL(h)}},{key:"pointToLngLat",value:function(h){var l={lng:h.x,lat:h.y};return this.convertMC2LL(l)}},{key:"pointToPixel",value:function(h,l,r,s){if(!h)return{x:0,y:0};h=this.lngLatToMercator(h);var c=this.getZoomUnits(l),x=Math.round((h.lng-r.lng)/c+s.width/2),a=Math.round((r.lat-h.lat)/c+s.height/2);return{x,y:a}}},{key:"pixelToPoint",value:function(h,l,r,s){if(!h)return{lng:0,lat:0};var c=this.getZoomUnits(l),x=r.lng+c*(h.x-s.width/2),a=r.lat-c*(h.y-s.height/2),i={lng:x,lat:a};return this.mercatorToLngLat(i)}},{key:"getZoomUnits",value:function(h){return Math.pow(2,18-h)}}]),m}(),v=f;z.default=v},895340:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.BaiduMercatorTilingScheme=z.AmapMercatorTilingScheme=void 0;var L=b(e(42762)),T=b(e(122777)),C=b(e(330044)),f=b(e(299085)),v=b(e(234009)),m=b(e(202004)),o=r(e(187647)),h=r(e(110565));function l(i){if(typeof O!="function")return null;var n=new O,u=new O;return(l=function(d){return d?u:n})(i)}function r(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=l(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&M;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?M(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}function s(i){var n=c();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function c(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var x=function(i){(0,C.default)(u,i);var n=s(u);function u(g){var d;(0,T.default)(this,u),d=n.call(this,g);var y=new o.WebMercatorProjection;return d._projection.project=function(p,w){return w=h.wgs84togcj02(o.Math.toDegrees(p.longitude),o.Math.toDegrees(p.latitude)),w=y.project(new o.Cartographic(o.Math.toRadians(w[0]),o.Math.toRadians(w[1]))),new o.Cartesian2(w.x,w.y)},d._projection.unproject=function(p,w){var S=y.unproject(p);return w=h.gcj02towgs84(o.Math.toDegrees(S.longitude),o.Math.toDegrees(S.latitude)),new o.Cartographic(o.Math.toRadians(w[0]),o.Math.toRadians(w[1]))},d}return(0,L.default)(u)}(o.WebMercatorTilingScheme);z.AmapMercatorTilingScheme=x;var a=function(i){(0,C.default)(u,i);var n=s(u);function u(g){var d;(0,T.default)(this,u),d=n.call(this,g);var y=new m.default;return d._projection.project=function(p,w){return w=w||{},w=h.wgs84togcj02(o.Math.toDegrees(p.longitude),o.Math.toDegrees(p.latitude)),w=h.gcj02tobd09(w[0],w[1]),w[0]=Math.min(w[0],180),w[0]=Math.max(w[0],-180),w[1]=Math.min(w[1],74.000022),w[1]=Math.max(w[1],-71.988531),w=y.lngLatToPoint({lng:w[0],lat:w[1]}),new o.Cartesian2(w.x,w.y)},d._projection.unproject=function(p,w){return w=w||{},w=y.mercatorToLngLat({lng:p.x,lat:p.y}),w=h.bd09togcj02(w.lng,w.lat),w=h.gcj02towgs84(w[0],w[1]),new o.Cartographic(o.Math.toRadians(w[0]),o.Math.toRadians(w[1]))},d.resolutions=g.resolutions||[],d}return(0,L.default)(u,[{key:"tileXYToNativeRectangle",value:function(d,y,p,w){var S=this.resolutions[p],R=d*S,B=(d+1)*S,k=((y=-y)+1)*S,P=y*S;return o.defined(w)?(w.west=R,w.south=P,w.east=B,w.north=k,w):new o.Rectangle(R,P,B,k)}},{key:"positionToTileXY",value:function(d,y,p){var w=this._rectangle;if(o.Rectangle.contains(w,d)){var S=this._projection,R=S.project(d);if(o.defined(R)){var B=this.resolutions[y],k=Math.floor(R.x/B),P=-Math.floor(R.y/B);return o.defined(p)?(p.x=k,p.y=P,p):new o.Cartesian2(k,P)}}}}]),u}(o.WebMercatorTilingScheme);z.BaiduMercatorTilingScheme=a},116474:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.CzmlLayer=void 0;var M=C(e(187647)),b=e(402008),L=C(e(580823));function T(v){if(typeof F!="function")return null;var m=new F,o=new F;return(T=function(l){return l?o:m})(v)}function C(v,m){if(!m&&v&&v.__esModule)return v;if(v===null||E(v)!=="object"&&typeof v!="function")return{default:v};var o=T(m);if(o&&o.has(v))return o.get(v);var h={},l=Object.defineProperty&&O;for(var r in v)if(r!=="default"&&Object.prototype.hasOwnProperty.call(v,r)){var s=l?O(v,r):null;s&&(s.get||s.set)?Object.defineProperty(h,r,s):h[r]=v[r]}return h.default=v,o&&o.set(v,h),h}var f=b.GeoJsonLayer.extend({queryData:function(){var m=this,o=L.getProxyUrl(this.config),h=M.CzmlDataSource.load(o.url,o);h.then(function(l){m.showResult(l)}).catch(function(l){m.showError("\u670D\u52A1\u51FA\u9519",l)})},getEntityAttr:function(m){if(m.description&&m.description.getValue)return m.description.getValue(this.viewer.clock.currentTime)}});z.CzmlLayer=f},508397:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(985208),M=e(659791),b=e(22466),L=e(183393),T=e(105077),C=e(787879),f=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawLayer=void 0;var v=f(e(53267)),m=f(e(705146)),o=f(e(520314)),h=f(e(452909)),l=f(e(342579)),r=f(e(636583)),s=f(e(543389)),c=f(e(202692)),x=e(414666),a=u(e(580823)),i=u(e(187647));function n(p){if(typeof C!="function")return null;var w=new C,S=new C;return(n=function(B){return B?S:w})(p)}function u(p,w){if(!w&&p&&p.__esModule)return p;if(p===null||F(p)!=="object"&&typeof p!="function")return{default:p};var S=n(w);if(S&&S.has(p))return S.get(p);var R={},B=Object.defineProperty&&L;for(var k in p)if(k!=="default"&&Object.prototype.hasOwnProperty.call(p,k)){var P=B?L(p,k):null;P&&(P.get||P.set)?Object.defineProperty(R,k,P):R[k]=p[k]}return R.default=p,S&&S.set(p,R),R}function g(p,w){var S=O(p);if(M){var R=M(p);w&&(R=b(R).call(R,function(B){return L(p,B).enumerable})),S.push.apply(S,R)}return S}function d(p){for(var w=1;w<arguments.length;w++){var S=arguments[w]!=null?arguments[w]:{};w%2?g(Object(S),!0).forEach(function(R){(0,s.default)(p,R,S[R])}):T?Object.defineProperties(p,T(S)):g(Object(S)).forEach(function(R){Object.defineProperty(p,R,L(S,R))})}return p}var y=x.BaseLayer.extend({id:"",name:"",layerTag:"",dataSource:null,show:![],primitiveCollection:null,groundPrimitiveCollection:null,createSource:function(){this.id=this.config.id,this.name=this.config.label,this.layerTag=this.config.layerTag,this.dataSource=new i.CustomDataSource(this.config.id),this.primitiveCollection=new i.PrimitiveCollection,this.groundPrimitiveCollection=new i.PrimitiveCollection},setLayerVisible:function(w){this.dataSource.show=w,this.primitiveCollection.show=w,this.groundPrimitiveCollection.show=w,this.show=w},setProperties:function(w){this.config=d(d({},this.config),w),this.name=this.config.label,this.layerTag=this.config.layerTag},setFeatureVisible:function(w,S){w.show=S},getFeatures:function(){for(var w=(0,v.default)(this.dataSource.entities),S=0;S<this.primitiveCollection._primitives.length;S++){var R=this.primitiveCollection._primitives[S];R instanceof i.PointPrimitiveCollection?w=(0,m.default)(w).call(w,R._pointPrimitives):R instanceof i.LabelCollection?w=(0,m.default)(w).call(w,R._labels):R instanceof i.BillboardCollection?w=(0,m.default)(w).call(w,R._billboards):R instanceof i.CloudCollection?w=(0,m.default)(w).call(w,R._clouds):w.push(R)}return w},getFeatureById:function(w){for(var S=this.getFeatures(),R=0,B=S.length;R<B;R++){var k,P=S[R];if(w===((k=P.attribute)===null||k===void 0?void 0:k.attr.id))return P}},addFeature:function(w){w instanceof i.Entity&&this.dataSource.entities.add(w)},deleteFeatures:function(){this.dataSource.entities.removeAll(),this.primitiveCollection.removeAll(),this.groundPrimitiveCollection.removeAll()},deleteFeatureById:function(w){var S=this,R=this.getFeatureById(w),B=this.primitiveCollection._primitives;if(R instanceof i.Entity)if(R.id.match(/_multi[0-9]/)){var k,P=(0,o.default)(k=R.id).call(k,0,R.id.indexOf("_multi"));(0,r.default)(this.getFeatures()).forEach(function(G){var W;(0,l.default)(this,S),!((W=G.id)===null||W===void 0)&&W.match(P)&&this.dataSource.entities.remove(G)}.bind(this));return}else this.dataSource.entities.remove(R);else if(this.primitiveCollection.contains(R))this.primitiveCollection.remove(R);else if(R instanceof i.PointPrimitive){var D=(0,h.default)(B).call(B,function(G){return(0,l.default)(this,S),G instanceof i.PointPrimitiveCollection}.bind(this));D.remove(R)}else if(R instanceof i.Label){var A=(0,h.default)(B).call(B,function(G){return(0,l.default)(this,S),G instanceof i.LabelCollection}.bind(this));A.remove(R)}else if(R instanceof i.Billboard){var N=(0,h.default)(B).call(B,function(G){return(0,l.default)(this,S),G instanceof i.BillboardCollection}.bind(this));N.remove(R)}else if(R instanceof i.CumulusCloud){var I=(0,h.default)(B).call(B,function(G){return(0,l.default)(this,S),G instanceof i.CloudCollection}.bind(this));I.remove(R)}},add:function(){this.createSource(),this.viewer.dataSources.add(this.dataSource),this.viewer.scene.primitives.add(this.primitiveCollection),this.viewer.scene.groundPrimitives.add(this.groundPrimitiveCollection),this.show=!![]},remove:function(){this.viewer.dataSources.remove(this.dataSource),this.viewer.scene.primitives.remove(this.primitiveCollection),this.viewer.scene.groundPrimitives.remove(this.groundPrimitiveCollection)},centerAt:function(w){var S=this.drawControl.getEntitys();this.viewer.flyTo(S,{duration:w})},hasOpacity:![],setOpacity:function(){},_loadData_:function(){var w=this;c.default.default.ajax({type:"get",dataType:"json",url:this.config.url,timeout:1e4,success:function(R){w._isload=!![];var B=w.drawControl.loadJson(R,{isClear:!![],isFly:w.config.flyTo});w._bindEntityConfig(B)},error:function(){E.error("Json\u6587\u4EF6"+w.config.url+"\u52A0\u8F7D\u5931\u8D25\uFF01")}})},_loadData:function(){},_bindEntityConfig:function(w){for(var S=this,R=0,B=w.length;R<B;R++){var k=w[R];(this.config.columns||this.config.popup)&&(k.popup={html:function(D){var A=D.attribute.attr;return A.layer_name=S.config.name,A.draw_type=D.attribute.drawtype,A.draw_typename=D.attribute.name,a.getPopupForConfig(S.config,A)},anchor:this.config.popupAnchor||[0,-15]}),this.config.tooltip&&(k.tooltip={html:function(D){var A=D.attribute.attr;return A.layer_name=S.config.name,A.draw_type=D.attribute.drawtype,A.draw_typename=D.attribute.name,a.getPopupForConfig({popup:S.config.tooltip},A)},anchor:this.config.tooltipAnchor||[0,-15]}),this.config.click&&(k.click=this.config.click),this.config.mouseover&&(k.mouseover=this.config.mouseover),this.config.mouseout&&(k.mouseout=this.config.mouseout)}}});z.DrawLayer=y},381218:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.FeatureGridImageryProvider=f;var b=M(e(578756)),L=C(e(187647));function T(v){if(typeof F!="function")return null;var m=new F,o=new F;return(T=function(l){return l?o:m})(v)}function C(v,m){if(!m&&v&&v.__esModule)return v;if(v===null||E(v)!=="object"&&typeof v!="function")return{default:v};var o=T(m);if(o&&o.has(v))return o.get(v);var h={},l=Object.defineProperty&&O;for(var r in v)if(r!=="default"&&Object.prototype.hasOwnProperty.call(v,r)){var s=l?O(v,r):null;s&&(s.get||s.set)?Object.defineProperty(h,r,s):h[r]=v[r]}return h.default=v,o&&o.set(v,h),h}function f(v){if(v=L.defaultValue(v,L.defaultValue.EMPTY_OBJECT),this.options=v,this._tileWidth=L.defaultValue(v.tileWidth,256),this._tileHeight=L.defaultValue(v.tileHeight,256),this._minimumLevel=L.defaultValue(v.minimumLevel,16),this._maximumLevel=v.maximumLevel,v.initExtent&&v.initExtent.length==4){var m={xmin:v.initExtent[0],ymin:v.initExtent[1],xmax:v.initExtent[2],ymax:v.initExtent[3]};v.rectangle=m}if(v.rectangle&&v.rectangle.xmin&&v.rectangle.xmax&&v.rectangle.ymin&&v.rectangle.ymax){var o=v.rectangle.xmin,h=v.rectangle.xmax,l=v.rectangle.ymin,r=v.rectangle.ymax;v.rectangle=L.Rectangle.fromDegrees(o,l,h,r)}this._tilingScheme=L.defaultValue(v.tilingScheme,new L.GeographicTilingScheme({ellipsoid:v.ellipsoid})),this._rectangle=L.defaultValue(v.rectangle,this._tilingScheme.rectangle),this._rectangle=L.Rectangle.intersection(this._rectangle,this._tilingScheme.rectangle),this._hasAlphaChannel=L.defaultValue(v.hasAlphaChannel,!![]),this._errorEvent=new L.Event,this._readyPromise=b.default.resolve(!![]),this._credit=void 0,this._ready=!![]}Object.defineProperties(f.prototype,{url:{get:function(){return this._url}},token:{get:function(){return this._token}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){if(!this._ready)throw new L.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new L.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new L.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new L.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new L.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new L.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new L.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!![]}},layers:{get:function(){return this._layers}}}),f.prototype.getTileCredits=function(){},f.prototype.requestImage=function(v,m,o){var h=document.createElement("canvas");if(h.width=256,h.height=256,o<this._minimumLevel)return b.default.resolve(h);if(this.options.debuggerTileInfo){var l=h.getContext("2d");l.strokeStyle="#ffff00",l.lineWidth=2,l.strokeRect(1,1,255,255);var r="L"+o+"X"+v+"Y"+m;l.font="bold 25px Arial",l.textAlign="center",l.fillStyle="black",l.fillText(r,127,127),l.fillStyle="#ffff00",l.fillText(r,124,124)}return b.default.resolve(h)},f.prototype._getGridKey=function(v){return v.level+"_x"+v.x+"_y"+v.y},f.prototype.addImageryCache=function(v){v.level<this._minimumLevel||v.level<v.maxLevel-1||this.options.addImageryCache&&(v.key=this._getGridKey(v),this.options.addImageryCache(v))},f.prototype.removeImageryCache=function(v){v.maxLevel<this._minimumLevel&&this.options.removeAllImageryCache&&this.options.removeAllImageryCache(),!(v.level<this._minimumLevel)&&this.options.removeImageryCache&&(v.key=this._getGridKey(v),this.options.removeImageryCache(v))}},162344:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.FeatureGridLayer=void 0;var b=M(e(53267)),L=f(e(187647)),T=e(470334);function C(m){if(typeof F!="function")return null;var o=new F,h=new F;return(C=function(r){return r?h:o})(m)}function f(m,o){if(!o&&m&&m.__esModule)return m;if(m===null||E(m)!=="object"&&typeof m!="function")return{default:m};var h=C(o);if(h&&h.has(m))return h.get(m);var l={},r=Object.defineProperty&&O;for(var s in m)if(s!=="default"&&Object.prototype.hasOwnProperty.call(m,s)){var c=r?O(m,s):null;c&&(c.get||c.set)?Object.defineProperty(l,s,c):l[s]=m[s]}return l.default=m,h&&h.set(m,l),l}var v=T.TileLayer.extend({dataSource:null,hasOpacity:![],create:function(){var o=this;this.dataSource=new L.CustomDataSource(this.config.id),this.primitives=new L.PrimitiveCollection(this.config.id),this.config.buildings=L.defaultValue(this.config.buildings,{cloumn:"floor"}),this.config.symbol=L.defaultValue(this.config.symbol,{styleOptions:{color:"#f8fafa",outlineColor:"#0d3685",outlineWidth:5,opacity:.7}}),this.config.addImageryCache=function(h){return o._addImageryCache(h)},this.config.removeImageryCache=function(h){return o._removeImageryCache(h)},this.config.removeAllImageryCache=function(h){return o._removeAllImageryCache(h)}},getLength:function(){return this.primitives.length+(0,b.default)(this.dataSource.entities).length},addEx:function(){this.viewer.dataSources.add(this.dataSource),this.viewer.scene.primitives.add(this.primitives)},removeEx:function(){this.viewer.dataSources.remove(this.dataSource),this.viewer.scene.primitives.remove(this.primitives)},_addImageryCache:function(){},_removeImageryCache:function(){},_removeAllImageryCache:function(){}});z.FeatureGridLayer=v},346307:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.GeoServerWFSLayer=void 0;var L=b(e(53267)),T=b(e(342579)),C=l(e(187647)),f=e(400058),v=b(e(51462)),m=l(e(419026)),o=b(e(683605));function h(s){if(typeof O!="function")return null;var c=new O,x=new O;return(h=function(i){return i?x:c})(s)}function l(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||F(s)!=="object"&&typeof s!="function")return{default:s};var x=h(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&M;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var u=i?M(s,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}var r=f.CustomFeatureGridLayer.extend({getDataForGrid:function(c,x){var a=this,i=this.config.url,n=this.config.where?this.config.where:null,u={srsName:"EPSG:4490",featureTypes:this.config.visibleLayers,bbox:[c.rectangle.xmin,c.rectangle.ymin,c.rectangle.xmax,c.rectangle.ymax],geometryName:this.config.geoStr||"the_geom",outputFormat:"application/json"};n&&(u.filter=new o.default().read(n));var g=new v.default().writeGetFeature(u),d=i;c.authkey&&(d=d+"?authkey="+c.authkey),fetch(d,{method:"POST",body:new XMLSerializer().serializeToString(g)}).then(function(y){return(0,T.default)(this,a),y.json()}.bind(this)).then(function(y){(0,T.default)(this,a),x(y.features)}.bind(this)).catch(function(y){(0,T.default)(this,a),E.error(y)}.bind(this))},createEntity:function(c,x,a){var i=this,n=C.GeoJsonDataSource.load(x,{clampToGround:!![],classificationType:2});return n.then(function(u){if(!i.checkHasBreak[c.key]){if((0,L.default)(u.entities).length===0)return null;var g=(0,L.default)(u.entities)[0];g._id=i.config.id+"_"+g.id,i._addEntity(g,a)}}).catch(function(u){i.showError("\u670D\u52A1\u51FA\u9519",u)}),null},_addEntity:function(c,x){var a=this.config.symbol;a&&(typeof a=="function"?a(c,c.properties):a==="default"?this.setDefSymbol(c):this.setConfigSymbol(c,a)),this.bindMourseEvnet(c),!this.dataSource.entities.getById(c._id)&&this.dataSource.entities.add(c),x(c)},setWhere:function(c){this.config.where=c,this.reload()},parseFilter:function(c){if(!c.type){E.warn("type\u5B57\u6BB5\u4E0D\u5B58\u5728");return}if(!c.param){E.warn("param\u5B57\u6BB5\u4E0D\u5B58\u5728");return}var x=[];switch(c.type.toLowerCase()){case"and":for(var a=0;a<c.param.length;a++){var i=this.parseFilter(c.param[a]);x.push(i)}return m.and.apply(null,x);case"or":for(var n=0;n<c.param.length;n++){var u=this.parseFilter(c.param[n]);x.push(u)}return m.or.apply(null,x);case"not":for(var g=0;g<c.param.length;g++){var d=this.parseFilter(c.param[g]);x.push(d)}return m.not.apply(null,x);case"=":return m.equalTo(c.param[0],c.param[1]);case"!==":return m.notEqualTo(c.param[0],c.param[1]);case">":return m.greaterThan(c.param[0],c.param[1]);case"<":return m.lessThan(c.param[0],c.param[1]);case">=":return m.greaterThanOrEqualTo(c.param[0],c.param[1]);case"<=":return m.lessThanOrEqualTo(c.param[0],c.param[1]);case"between":return m.between(c.param[0],c.param[1],c.param[2])}}});z.GeoServerWFSLayer=r},142501:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.GeographicTilingSchemeCGCS2000=void 0;var L=b(e(22466)),T=b(e(122777)),C=b(e(42762)),f=b(e(387507)),v=b(e(330044)),m=b(e(299085)),o=b(e(234009)),h=b(e(543389)),l=s(e(187647));function r(i){if(typeof O!="function")return null;var n=new O,u=new O;return(r=function(d){return d?u:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=r(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&M;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?M(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}function c(i){var n=x();return function(){var g=(0,o.default)(i),d;if(n){var y=(0,o.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,m.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,v.default)(u,i);var n=c(u);function u(g){var d;return(0,T.default)(this,u),d=n.call(this,g),(0,h.default)((0,f.default)(d),"options",void 0),d.options=g,d.init(),d._ellipsoid=l.Ellipsoid.WGS84,d}return(0,C.default)(u,[{key:"init",value:function(){var d=this.options;d.tileInfo.spatialReference.wkid===4490&&(this._ellipsoid=l.Ellipsoid.CGCS2000),l.defined(d.tileInfo)&&l.defined(d.tileInfo.spatialReference)&&l.defined(d.tileInfo.spatialReference.wkid)&&(d.tileInfo.spatialReference.wkid==4490||d.tileInfo.spatialReference.wkid==4326)&&(this._tileInfo=d.tileInfo,this._ellipsoid=l.defaultValue(d.ellipsoid,this._ellipsoid),this._rectangle=l.defaultValue(d.rectangle,l.Rectangle.fromDegrees(-180,-90,180,90)),this._numberOfLevelZeroTilesX=l.defaultValue(d.numberOfLevelZeroTilesX,4),this._numberOfLevelZeroTilesY=l.defaultValue(d.numberOfLevelZeroTilesY,2)),this._projection=new l.GeographicProjection(this._ellipsoid)}},{key:"getNumberOfXTilesAtLevel",value:function(d){if(l.defined(this._tileInfo)){var y,p=(0,L.default)(y=this._tileInfo.lods).call(y,function(S){return S.level===d}),w=p[0].resolution;return Math.round(l.Math.toDegrees(l.Math.TWO_PI)/(this._tileInfo.rows*w))}else return this._numberOfLevelZeroTilesX<<d}},{key:"getNumberOfYTilesAtLevel",value:function(d){var y;if(!l.defined(this._tileInfo))return this._numberOfLevelZeroTilesY<<d;var p=(0,L.default)(y=this._tileInfo.lods).call(y,function(S){return S.level===d}),w=p[0].resolution;return Math.round(l.Math.toDegrees(l.Math.PI)/(this._tileInfo.cols*w))}},{key:"rectangleToNativeRectangle",value:function(d,y){var p=l.Math.toDegrees(d.west),w=l.Math.toDegrees(d.south),S=l.Math.toDegrees(d.east),R=l.Math.toDegrees(d.north);return l.defined(y)?(y.west=p,y.south=w,y.east=S,y.north=R,y):new l.Rectangle(p,w,S,R)}},{key:"tileXYToNativeRectangle",value:function(d,y,p,w){var S=this.tileXYToRectangle(d,y,p,w);return S.west=l.Math.toDegrees(S.west),S.south=l.Math.toDegrees(S.south),S.east=l.Math.toDegrees(S.east),S.north=l.Math.toDegrees(S.north),S}},{key:"tileXYToRectangle",value:function(d,y,p,w){var S=this._rectangle,R=0,B=0,k=0,P=0;if(l.defined(this._tileInfo)){var D,A=(0,L.default)(D=this._tileInfo.lods).call(D,function(H){return H.level===p}),N=A[0].resolution;k=this._tileInfo.origin.y-y*(this._tileInfo.cols*N),R=this._tileInfo.origin.x+d*(this._tileInfo.rows*N),P=this._tileInfo.origin.y-(y+1)*(this._tileInfo.cols*N),B=this._tileInfo.origin.x+(d+1)*(this._tileInfo.rows*N),R=l.Math.toRadians(R),k=l.Math.toRadians(k),B=l.Math.toRadians(B),P=l.Math.toRadians(P)}else{var I=this.getNumberOfXTilesAtLevel(p),G=this.getNumberOfYTilesAtLevel(p),W=S.width/I;R=d*W+S.west,B=(d+1)*W+S.west;var Z=S.height/G;k=S.north-y*Z,P=S.north-(y+1)*Z}return!l.defined(w)&&(w=new l.Rectangle(R,P,B,k)),w.west=R,w.south=P,w.east=B,w.north=k,w}},{key:"positionToTileXY",value:function(d,y,p){var w=this._rectangle;if(l.Rectangle.contains(w,d)){if(l.defined(this._tileInfo)){var S,R=(0,L.default)(S=this._tileInfo.lods).call(S,function(V){return V.level===y}),B=R[0].resolution,k=l.Math.toDegrees(d.longitude),P=l.Math.toDegrees(d.latitude),D=Math.floor((k-this._tileInfo.origin.x)/(this._tileInfo.rows*B)),A=Math.floor((this._tileInfo.origin.y-P)/(this._tileInfo.cols*B));return new l.Cartesian2(D,A)}var N=this.getNumberOfXTilesAtLevel(y),I=this.getNumberOfYTilesAtLevel(y),G=w.width/N,W=w.height/I,Z=d.longitude;w.east<w.west&&(Z+=l.Math.TWO_PI);var H=(Z-w.west)/G|0;H>=N&&(H=N-1);var U=(w.north-d.latitude)/W|0;return U>=I&&(U=I-1),l.defined(p)?(p.x=H,p.y=U,p):new l.Cartesian2(H,U)}}}]),u}(l.GeographicTilingScheme);z.GeographicTilingSchemeCGCS2000=a},856474:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.GltfLayer=void 0;var b=M(e(581806)),L=v(e(187647)),T=e(414666),C=v(e(580823));function f(o){if(typeof F!="function")return null;var h=new F,l=new F;return(f=function(s){return s?l:h})(o)}function v(o,h){if(!h&&o&&o.__esModule)return o;if(o===null||E(o)!=="object"&&typeof o!="function")return{default:o};var l=f(h);if(l&&l.has(o))return l.get(o);var r={},s=Object.defineProperty&&O;for(var c in o)if(c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)){var x=s?O(o,c):null;x&&(x.get||x.set)?Object.defineProperty(r,c,x):r[c]=o[c]}return r.default=o,l&&l.set(o,r),r}var m=T.BaseLayer.extend({model:null,dataSource:null,add:function(){!this.config.reload&&this.dataSource?this.viewer.dataSources.add(this.dataSource):(this.dataSource=new L.CustomDataSource(this.config.name),this.viewer.dataSources.add(this.dataSource),this.initData())},remove:function(){this.viewer.dataSources.remove(this.dataSource)},centerAt:function(h){if(this.model!=null)if(this.config.extent||this.config.center)this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:h,isWgs84:!![]});else if(this.config.camera){var l=this.config.camera;this.viewer.shine.centerAt(l,{duration:h,isWgs84:!![]});return}else{var r=this.config.position;r.z=400,r.heading=0,r.pitch=-90,r.roll=0,this.viewer.shine.centerAt(r,{duration:h,isWgs84:!![]})}},initData:function(){var h=this.config.position;h=this.viewer.shine.point2map(h);var l=this.config.scale||1,r=L.Cartesian3.fromDegrees(h.x,h.y,h.z||0),s=L.Math.toRadians(h.heading||0),c=L.Math.toRadians(h.pitch||0),x=L.Math.toRadians(h.roll||0),a=new L.HeadingPitchRoll(s,c,x),i=L.Transforms.headingPitchRollQuaternion(r,a),n=this.config;if(n.authkey){var u;(0,b.default)(u=n.url).call(u,"?")?n.url+="&authkey="+n.authkey:n.url+="?authkey="+n.authkey}n=C.getProxyUrl(n);var g={uri:n.url,scale:l};for(var d in this.config)if(this.config.hasOwnProperty(d)){if(d==="url"||d==="name"||d==="position"||d==="center"||d==="tooltip"||d==="popup")continue;g[d]=this.config[d]}this.model=this.dataSource.entities.add({name:this.config.name,position:r,orientation:i,model:g,_config:this.config,tooltip:this.config.tooltip,popup:this.config.popup})},hasOpacity:!![],setOpacity:function(h){this.model!=null&&(this.model.model.color=new L.Color.fromCssColorString("#FFFFFF").withAlpha(h))}});z.GltfLayer=m},500963:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.GraticuleLayer=void 0;var M=T(e(187647)),b=e(414666);function L(f){if(typeof F!="function")return null;var v=new F,m=new F;return(L=function(h){return h?m:v})(f)}function T(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||E(f)!=="object"&&typeof f!="function")return{default:f};var m=L(v);if(m&&m.has(f))return m.get(f);var o={},h=Object.defineProperty&&O;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=h?O(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}var C=b.BaseLayer.extend({model:null,add:function(){this.model==null&&this.initData(),this.model.setVisible(!![])},remove:function(){this.model!=null&&this.model.setVisible(![])},initData:function(){function v(r,s){r=r||{},this._tilingScheme=r.tilingScheme||new M.GeographicTilingScheme,this._color=r.color||new M.Color(1,1,1,.4),this._tileWidth=r.tileWidth||256,this._tileHeight=r.tileHeight||256,this._ready=!![],this._sexagesimal=r.sexagesimal||![],this._numLines=r.numLines||50,this._scene=s,this._labels=new M.LabelCollection,s.primitives.add(this._labels),this._polylines=new M.PolylineCollection,s.primitives.add(this._polylines),this._ellipsoid=s.globe.ellipsoid;var c=document.createElement("canvas");c.width=256,c.height=256,this._canvas=c;var x=this;s.camera.moveEnd.addEventListener(function(){x._show&&(x._polylines.removeAll(),x._labels.removeAll(),x._currentExtent=null,x._drawGrid(x._getExtentView()))}),s.imageryLayers.addImageryProvider(this)}var m=function(){try{return"x"in Object.defineProperty({},"x",{})}catch{return![]}}(),o=Object.defineProperties;(!m||!o)&&(o=function(s){return s}),o(v.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!![]}}}),v.prototype.makeLabel=function(r,s,c,x){this._labels.add({position:this._ellipsoid.cartographicToCartesian(new M.Cartographic(r,s,10)),text:c,font:"normal small-caps normal 16px \u6977\u4F53",style:M.LabelStyle.FILL_AND_OUTLINE,fillColor:M.Color.AZURE,outlineColor:M.Color.BLACK,outlineWidth:2,pixelOffset:new M.Cartesian2(5,x?5:-5),eyeOffset:M.Cartesian3.ZERO,horizontalOrigin:M.HorizontalOrigin.LEFT,verticalOrigin:x?M.VerticalOrigin.BOTTOM:M.VerticalOrigin.TOP,scale:1})},v.prototype._drawGrid=function(r){if(!(this._currentExtent&&this._currentExtent.equals(r))){this._currentExtent=r,this._polylines.removeAll(),this._labels.removeAll();var s=0,c=0,x;for(x=0;x<l.length&&s<(r.north-r.south)/10;x++)s=l[x];for(x=0;x<l.length&&c<(r.east-r.west)/10;x++)c=l[x];var a=(r.west<0?Math.ceil(r.west/c):Math.floor(r.west/c))*c,i=(r.south<0?Math.ceil(r.south/s):Math.floor(r.south/s))*s,n=(r.east<0?Math.ceil(r.east/s):Math.floor(r.east/s))*s,u=(r.north<0?Math.ceil(r.north/c):Math.floor(r.north/c))*c;a=Math.max(a-2*c,-Math.PI),n=Math.min(n+2*c,Math.PI),i=Math.max(i-2*s,-Math.PI/2),u=Math.min(u+2*c,Math.PI/2);var g=this._ellipsoid,d,y,p=M.Math.toRadians(1),w=i+Math.floor((u-i)/s/2)*s;for(y=a;y<n;y+=c){var S=[];for(d=i;d<u;d+=p)S.push(new M.Cartographic(y,d));S.push(new M.Cartographic(y,u)),this._polylines.add({positions:g.cartographicArrayToCartesianArray(S),width:1});var R=M.Math.toDegrees(y);this.makeLabel(y,w,this._sexagesimal?this._decToSex(R):R.toFixed(h(c)),![])}var B=a+Math.floor((n-a)/c/2)*c;for(d=i;d<u;d+=s){var k=[];for(y=a;y<n;y+=p)k.push(new M.Cartographic(y,d));k.push(new M.Cartographic(n,d)),this._polylines.add({positions:g.cartographicArrayToCartesianArray(k),width:1});var P=M.Math.toDegrees(d);this.makeLabel(B,d,this._sexagesimal?this._decToSex(P):P.toFixed(h(s)),!![])}}},v.prototype.requestImage=function(){return this._show&&this._drawGrid(this._getExtentView()),this._canvas},v.prototype.setVisible=function(r){this._show=r,r?(this._currentExtent=null,this._drawGrid(this._getExtentView())):(this._polylines.removeAll(),this._labels.removeAll())},v.prototype.isVisible=function(){return this._show},v.prototype._decToSex=function(r){var s=Math.floor(r),c=((Math.abs(r)-s)*60).toFixed(2);return c==="60.00"&&(s+=1,c="0.00"),[s,":",c].join("")},v.prototype._getExtentView=function(){for(var r=this._scene.camera,s=this._scene.canvas,c=[r.pickEllipsoid(new M.Cartesian2(0,0),this._ellipsoid),r.pickEllipsoid(new M.Cartesian2(s.width,0),this._ellipsoid),r.pickEllipsoid(new M.Cartesian2(0,s.height),this._ellipsoid),r.pickEllipsoid(new M.Cartesian2(s.width,s.height),this._ellipsoid)],x=0;x<4;x++)if(c[x]===void 0)return M.Rectangle.MAX_VALUE;return M.Rectangle.fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(c))};function h(r){return r<.01?2:r<.1?1:(r<1,0)}var l=[M.Math.toRadians(.05),M.Math.toRadians(.1),M.Math.toRadians(.2),M.Math.toRadians(.5),M.Math.toRadians(1),M.Math.toRadians(2),M.Math.toRadians(5),M.Math.toRadians(10)];this.model=new v({numLines:10},this.viewer.scene)}});z.GraticuleLayer=C},635816:function(X,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.GroupLayer=void 0;var E=e(414666),F=E.BaseLayer.extend({create:function(){var M=this.config._layers;this._layers=M;for(var b=0,L=M.length;b<L;b++)this.hasOpacity=M[b].hasOpacity,this.hasZIndex=M[b].hasZIndex},setVisible:function(M){this._visible=M;for(var b=this.config._layers,L=0,T=b.length;L<T;L++)b[L].setVisible(M)},add:function(){this._visible=!![];for(var M=this.config._layers,b=0,L=M.length;b<L;b++)M[b].setVisible(!![])},remove:function(){this._visible=![];for(var M=this.config._layers,b=0,L=M.length;b<L;b++)M[b].setVisible(![])},centerAt:function(M){for(var b=this.config._layers,L=0,T=b.length;L<T;L++)b[L].centerAt(M)},setOpacity:function(M){for(var b=this.config._layers,L=0,T=b.length;L<T;L++)b[L].hasOpacity&&b[L].setOpacity(M)}});z.GroupLayer=F},248720:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.I3SLayer=void 0;var b=M(e(611323)),L=M(e(342579)),T=M(e(934749)),C=h(e(187647)),f=e(414666),v=h(e(268821)),m=h(e(792672));function o(r){if(typeof F!="function")return null;var s=new F,c=new F;return(o=function(a){return a?c:s})(r)}function h(r,s){if(!s&&r&&r.__esModule)return r;if(r===null||E(r)!=="object"&&typeof r!="function")return{default:r};var c=o(s);if(c&&c.has(r))return c.get(r);var x={},a=Object.defineProperty&&O;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var n=a?O(r,i):null;n&&(n.get||n.set)?Object.defineProperty(x,i,n):x[i]=r[i]}return x.default=r,c&&c.set(r,x),x}var l=f.BaseLayer.extend({provider:null,model:null,center:null,originalCenter:null,positionCenter:null,boundingSphere:null,add:function(){this.provider?this.viewer.scene.primitives.contains(this.provider)||this.viewer.scene.primitives.add(this.provider):this.initData()},remove:function(){C.defined(this.config.visibleDistanceMax)&&this.viewer.scene.camera.changed.removeEventListener(this.updateVisibleDistance,this),this.viewer.scene.primitives.contains(this.provider)&&this.viewer.scene.primitives.remove(this.provider),delete this.model,delete this.provider,delete this.boundingSphere},centerAt:function(){var r=(0,T.default)(b.default.mark(function c(x){var a=this;return b.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.config.extent||this.config.center)){n.next=4;break}this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:x,isWgs84:!![]}),n.next=6;break;case 4:return n.next=6,this.provider.readyPromise.then(function(){(0,L.default)(this,a),this.boundingSphere?this.viewer.camera.flyToBoundingSphere(this.boundingSphere,{offset:new C.HeadingPitchRange(0,-.5,this.boundingSphere.radius*2),duration:x}):this.center&&this.viewer.camera.setView({destination:C.Ellipsoid.WGS84.cartographicToCartesian(this.center)})}.bind(this));case 6:case"end":return n.stop()}},c,this)}));function s(c){return r.apply(this,arguments)}return s}(),initData:function(){var s=this;this.config.skipLevelOfDetail=this.config.skipLevelOfDetail?this.config.skipLevelOfDetail:![],this.config.debugShowBoundingVolume=![];var c=new C.CustomShader({lightingModel:C.LightingModel.UNLIT,uniforms:{u_backLightColor:{type:C.UniformType.VEC4,value:C.Color.GRAY},u_toneMappingMode:{type:C.UniformType.INT,value:0}},fragmentShaderText:`
      vec3 computeLighting(czm_modelMaterial inputMaterial, vec3 positionEC, vec3 lightDirectionEC, vec3 lightColorHdr)
      {
        czm_pbrParameters pbrParameters;
        pbrParameters.diffuseColor = inputMaterial.diffuse;
        pbrParameters.f0 = inputMaterial.specular;//vec3(0.5);
        pbrParameters.roughness = inputMaterial.roughness;//0.5;

        vec3 color = inputMaterial.diffuse;
        color = czm_pbrLighting(
          positionEC,
          inputMaterial.normalEC,
          lightDirectionEC,
          lightColorHdr,
          pbrParameters
        );

        color += imageBasedLightingStage(
          positionEC,
          inputMaterial.normalEC,
          lightDirectionEC,
          lightColorHdr,
          pbrParameters
        );

        //color *= inputMaterial.occlusion;
        //color += inputMaterial.emissive;

        //color = czm_acesTonemapping(color);

        return color;
      }

      vec3 CEToneMapping(vec3 color, float adapted_lum)
      {
        return vec3(1.0) - exp(-adapted_lum * color);
      }

      vec3 FilmicToneMapping(vec3 x)
      {
        const float A = 0.22;
        const float B = 0.30;
        const float C = 0.10;
        const float D = 0.20;
        const float E = 0.01;
        const float F = 0.30;

        return ((x * (A * x + C * B) + D * E) / (x * (A * x + B) + D * F)) - E / F;
      }

      vec3 Uncharted2ToneMapping(vec3 color, float adapted_lum)
      {
        const float WHITE = 11.2;
        return FilmicToneMapping(1.6 * adapted_lum * color) / FilmicToneMapping(vec3(WHITE));
      }

      vec3 ACESToneMapping(vec3 color, float adapted_lum)
      {
        const float A = 2.51;
        const float B = 0.03;
        const float C = 2.43;
        const float D = 0.59;
        const float E = 0.14;

        color *= adapted_lum;
        return (color * (A * color + B)) / (color * (C * color + D) + E);
      }

      void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)
      {
        vec3 positionEC = fsInput.attributes.positionEC;
        vec3 lightColorHdr = czm_lightColorHdr;
        vec3 lightDirectionEC = czm_lightDirectionEC;
        vec3 ligth1Color0 = computeLighting(material, positionEC, lightDirectionEC, lightColorHdr);

        vec3 lightDirectionECN = lightDirectionEC * (- 1.0);
        vec3 backLigth1Color = computeLighting(material, positionEC, lightDirectionECN, u_backLightColor.rgb);

        vec3 finalColor = ligth1Color0.rgb + backLigth1Color.rgb*0.2;

        finalColor *= material.occlusion;
        finalColor += material.emissive;

        if (0 == u_toneMappingMode) {
          finalColor = ACESToneMapping(finalColor, 1.0);
          finalColor = clamp(finalColor, 0.0, 1.0);
        } else if (1== u_toneMappingMode) {
          finalColor = Uncharted2ToneMapping(finalColor,1.0);
          finalColor = clamp(finalColor, 0.0, 1.0);
        } else if (2== u_toneMappingMode) {
          finalColor = CEToneMapping(finalColor,1.0);
           finalColor = clamp(finalColor, 0.0, 1.0);
        } else {
          finalColor = czm_acesTonemapping(finalColor);
        }

        material.diffuse = finalColor;
      }
     `}),x=this.config;this.config.customShader&&(x.customShader=c);var a={url:this.config.url,name:this.config.label,traceFetches:![],cesium3dTilesetOptions:x},i=new C.I3SDataProvider(a);this.provider=this.viewer.scene.primitives.add(i),this.provider.layerID=this.config.id,this.provider.readyPromise.then(function(n){(0,L.default)(this,s),this.readyPromise&&this.readyPromise(n),this.hasOpacity&&this._opacity!==1&&this.setOpacity(this._opacity);var u,g=n.layers[0],d=g._data.layerType;if(d=="3DObject"?u=g.tileset:d=="Building"?(this.center=C.Rectangle.center(n.extent),this.center.height=500):d=="IntegratedMesh"&&(u=g.tileset),!!u){var y=u.boundingSphere;this.boundingSphere=y,this.model=u,u._root&&u._root.transform&&(this.orginMatrixInverse=C.Matrix4.inverse(C.Matrix4.fromArray(u._root.transform),new C.Matrix4),this.config.scale>0&&this.config.scale!==1&&(u._root.transform=C.Matrix4.multiplyByUniformScale(u._root.transform,this.config.scale,u._root.transform)));var p=y.center;this.positionCenter=p;var w=C.Cartographic.fromCartesian(p),S=Number(w.height.toFixed(2)),R=Number(C.Math.toDegrees(w.longitude).toFixed(6)),B=Number(C.Math.toDegrees(w.latitude).toFixed(6));this.originalCenter={x:R,y:B,z:S};var k=this.viewer.shine.point2map(this.originalCenter);if(k.x!==this.originalCenter.x||k.y!==this.originalCenter.y||this.config.offset!=null){this.config.offset=this.config.offset||{},this.config.offset.x&&this.config.offset.y&&(this.config.offset=this.viewer.shine.point2map(this.config.offset));var P={x:this.config.offset.x||k.x,y:this.config.offset.y||k.y,z:this.config.offset.z||0,heading:this.config.offset.heading,axis:this.config.axis,scale:this.config.scale,transform:this.config.offset.hasOwnProperty("transform")?this.config.offset.transform:this.config.offset.heading!=null};this.config.offset.z==="-height"?(P.z=-S+5,this.updateMatrix(P)):this.config.offset.z==="auto"?this.autoHeight(p,P):this.updateMatrix(P)}this.config.clippingPolygonPoints&&v.addClippingPolygon(u,this.config.clippingPolygonPoints),!this.viewer.shine.isFlyAnimation()&&this.config.flyTo&&this.centerAt(),this.config.calback&&this.config.calback(u),C.defined(this.config.visibleDistanceMax)&&this.bindVisibleDistance()}}.bind(this))},autoHeight:function(s,c){var x=this;m.terrainPolyline({viewer:this.viewer,positions:[s,s],calback:function(i,n){if(!(i==null||i.length===0||n)){var u=u.formatPosition(i[0]),g=u.z-x.originalCenter.z+1;c.z=g,x.updateMatrix(c)}}})},updateMatrix:function(s){this.model!=null&&(this.positionCenter=C.Cartesian3.fromDegrees(s.x,s.y,s.z),v.updateMatrix(this.model,s))},hasOpacity:!![],setOpacity:function(s){this._opacity=s;var c=this;if(this.config.onSetOpacity&&window.color_type)this.config.onSetOpacity(s);else{var x=window.color_type,a,i,n,u;if(u=s,this.provider)if(!c.config.style)c.model.style=new C.Cesium3DTileStyle({color:"color() *vec4("+s+")"});else{if(this.config.style.color&&typeof this.config.style.color=="string"){var g=C.Color.fromAlpha(C.Color.fromCssColorString(c.config.style.color),u),d=g.toCssColorString();c.model.style=new C.Cesium3DTileStyle({color:d})}if(this.config.style.color.conditions){for(var y=this.config.style.color.conditions,p=0;p<y.length;p++){var w=y[p],S=C.Color.fromAlpha(C.Color.fromCssColorString(w[1]),u);w[1]=S.toCssColorString()}var R=new C.Cesium3DTileStyle;R.color={conditions:y},c.model.style=R}if(this.config.style.colorty){for(var B=c.config.style.colorty,k=c.config.style.proID,P=[],D=0;D<x[B].type.length;D++){var A=x[B].type[D];a=x[B].color[A][0],i=x[B].color[A][1],n=x[B].color[A][2];var N="rgba("+a+","+i+","+n+","+u+")",I="${"+k+"} === '"+A+"'",G=[I,N];P.push(G)}P.push(["true","rgba(255,235,175,"+u+")"]);var W=new C.Cesium3DTileStyle;W.color={conditions:P},c.model.style=W}}}},showClickFeature:function(s){this.provider?this.provider._config.showClickFeature=s:this.config.showClickFeature=s},bindVisibleDistance:function(){this.viewer.scene.camera.changed.addEventListener(this.updateVisibleDistance,this)},updateVisibleDistance:function(){if(this._visible&&this.viewer.scene.mode===C.SceneMode.SCENE3D&&!(!this.provider||!this.boundingSphere||!this.positionCenter)){var s=C.Cartesian3.distance(this.positionCenter,this.viewer.camera.position);if(s>this.config.visibleDistanceMax+1e5)this.provider.show=![];else{var c=m.pickCenterPoint(this.viewer.scene);if(C.defined(c)){var x=C.Cartesian3.distance(c,this.viewer.camera.position);this.provider.show=x<this.config.visibleDistanceMax}else this.provider.show=!![]}}}});z.I3SLayer=l},574410:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.KmlLayer=void 0;var M=C(e(187647)),b=e(402008),L=C(e(580823));function T(v){if(typeof F!="function")return null;var m=new F,o=new F;return(T=function(l){return l?o:m})(v)}function C(v,m){if(!m&&v&&v.__esModule)return v;if(v===null||E(v)!=="object"&&typeof v!="function")return{default:v};var o=T(m);if(o&&o.has(v))return o.get(v);var h={},l=Object.defineProperty&&O;for(var r in v)if(r!=="default"&&Object.prototype.hasOwnProperty.call(v,r)){var s=l?O(v,r):null;s&&(s.get||s.set)?Object.defineProperty(h,r,s):h[r]=v[r]}return h.default=v,o&&o.set(v,h),h}var f=b.GeoJsonLayer.extend({queryData:function(){var m=this,o=L.getProxyUrl(this.config);if(o.symbol&&o.symbol.styleOptions){var h=o.symbol.styleOptions;M.defined(h.clampToGround)&&(o.clampToGround=h.clampToGround)}var l=M.KmlDataSource.load(o.url,{camera:this.viewer.scene.camera,canvas:this.viewer.scene.canvas,clampToGround:o.clampToGround});l.then(function(r){m.showResult(r)}).catch(function(r){m.showError("\u670D\u52A1\u51FA\u9519",r)})},getEntityAttr:function(m){var o={name:m.name,description:m.description},h=m._kml.extendedData;for(var l in h)h.hasOwnProperty(l)&&(o[l]=h[l].value);return o=L.getAttrVal(o),o.description&&(o.description=o.description.replace(/<div[^>]+>/g,"")),o}});z.KmlLayer=f},878033:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.MapboxVectorTileImageryProvider=P;var L=b(e(342579)),T=b(e(985208)),C=b(e(578756)),f=b(e(53267)),v=b(e(518853)),m=b(e(705146)),o=S(e(187647)),h=e(199996),l=b(e(263713)),r=b(e(96542)),s=b(e(957526)),c=e(172413),x=b(e(122305)),a=b(e(202692)),i=S(e(580823)),n=S(e(980790)),u=S(e(721617)),g=S(e(669471)),d=S(e(496535)),y=S(e(131490)),p=e(792672);function w(H){if(typeof O!="function")return null;var U=new O,V=new O;return(w=function($){return $?V:U})(H)}function S(H,U){if(!U&&H&&H.__esModule)return H;if(H===null||F(H)!=="object"&&typeof H!="function")return{default:H};var V=w(U);if(V&&V.has(H))return V.get(H);var Y={},$=Object.defineProperty&&M;for(var K in H)if(K!=="default"&&Object.prototype.hasOwnProperty.call(H,K)){var J=$?M(H,K):null;J&&(J.get||J.set)?Object.defineProperty(Y,K,J):Y[K]=H[K]}return Y.default=H,V&&V.set(H,Y),Y}var R=3;function B(H){for(var U=H.length,V=H[U-1].x*(H[0].y-H[U-2].y)+H[0].x*(H[1].y-H[U-1].y),Y=1;Y<=U-2;Y++)V+=H[Y].x*(H[Y+1].y-H[Y-1].y);if(isNaN(V))throw new o.DeveloperError("map.computeRingWindingOrder.devError");return V>0?o.WindingOrder.COUNTER_CLOCKWISE:o.WindingOrder.CLOCKWISE}function k(H){var U=o.Resource.createIfNeeded(H);return U.fetchArrayBuffer()}function P(H){var U,V;if(H._options.requestUrl&&(H.url=H._options.requestUrl?H._options.requestUrl:H.requestUrl),H.requestUrl&&(H.url=H.requestUrl?H.requestUrl:H._options.requestUrl),this._viewer=void 0,this._dataSource=new o.CustomDataSource(H.id),this._imageryGridPrimitives=new o.PrimitiveCollection(H.id),this._gridCache={},this._renderMode=H.renderMode||"canvas",this._uriTemplate=new s.default(H.url),typeof H.name!="string")throw new o.DeveloperError("map.mapboxVectorTileImageryProvider.requireLayerName");if(this._layerName=H.visibleLayers[0],this._subdomains=o.defaultValue(H.subdomains,[]),this._styleFunc=H.styleFunc||c.getRealSymbolByAsync,H.tilingScheme=H.tilingScheme||H._options.tilingScheme||"geodetic",o.defined(H.tilingScheme)){var Y=H.tilingScheme;Y==="geodetic"||Y==="global-geodetic"?this._tilingScheme=new o.GeographicTilingScheme({ellipsoid:H.ellipsoid}):(Y==="mercator"||Y==="global-mercator")&&(this._tilingScheme=new o.WebMercatorTilingScheme({ellipsoid:H.ellipsoid}))}else E.error("\u672A\u83B7\u53D6\u5230\u51C6\u786E\u7684\u6295\u5F71\u5750\u6807\u7CFB\u4FE1\u606F");if(this._opacity=H.opacity||.8,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=1,this._miniNativemumLevel=o.defaultValue(H.minimumLevel,3),this._maximumLevel=o.defaultValue(H.maximumLevel,1/0),this._maximumNativeLevel=o.defaultValue(H.maximumNativeZoom,this._maximumLevel),H.initExtent=H.initExtent||((U=H._options)===null||U===void 0||(V=U.initExtent)===null||V===void 0?void 0:V.length)===4?H._options.initExtent:[-180,-90,180,90],H.initExtent&&H.initExtent.length==4){var $={xmin:H.initExtent[0],ymin:H.initExtent[1],xmax:H.initExtent[2],ymax:H.initExtent[3]};H.rectangle=$}if(H.rectangle&&H.rectangle.xmin&&H.rectangle.xmax&&H.rectangle.ymin&&H.rectangle.ymax){var K=H.rectangle.xmin,J=H.rectangle.xmax,Q=H.rectangle.ymin,et=H.rectangle.ymax;H.rectangle=o.Rectangle.fromDegrees(K,Q,J,et)}this._rectangle=o.defined(H.rectangle)?o.Rectangle.intersection(H.rectangle,this._tilingScheme.rectangle):this._tilingScheme.rectangle,this._errorEvent=new o.Event,this._ready=!![],this._credit=H.credit,this._geojsonCollection=[],this._clean=![]}Object.defineProperties(P.prototype,{url:{get:function(){return this._uriTemplate.expression}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},hasAlphaChannel:{get:function(){return!![]}},credit:{get:function(){var U=this._credit;if(U!==void 0)return typeof U=="string"&&(U=new o.Credit(U)),U}}}),P.prototype._updatePrimitiveLayers=function(){var H=this;if((0,T.default)(this===null||this===void 0?void 0:this._gridCache).length){for(var U in this===null||this===void 0?void 0:this._gridCache)if(Object.hasOwnProperty.call(this===null||this===void 0?void 0:this._gridCache,U)){var V=this===null||this===void 0?void 0:this._gridCache[U];V!=null&&V.primitive&&(V.primitive.show=![])}this._clean||this._viewer.scene.globe._surface._tilesToRender.forEach(function(Y){(0,L.default)(this,H);var $=Y.x+"_"+Y.y+"_"+Y.level,K=this===null||this===void 0?void 0:this._gridCache[$];K!=null&&K.primitive&&(K.primitive.show=!![])}.bind(this))}},P.prototype._getSubdomain=function(H,U,V){if(this._subdomains.length!==0){var Y=(H+U+V)%this._subdomains.length;return this._subdomains[Y]}},P.prototype._buildImageUrl=function(H,U,V){return this._uriTemplate.expand({z:V,x:H,y:U,s:this._getSubdomain(H,U,V)})},P.prototype.requestImage=function(H,U,V){var Y=document.createElement("canvas");return Y.width=this._tileWidth,Y.height=this._tileHeight,V<this._miniNativemumLevel?C.default.resolve(Y):this._requestImage(H,U,V,Y)},P.prototype._requestImage=function(H,U,V,Y){var $={x:H,y:U,level:V},K;if(V>this._maximumNativeLevel){var J=V-this._maximumNativeLevel;K={x:H>>J,y:U>>J,level:this._maximumNativeLevel}}else K=$;var Q=this._buildImageUrl(K.x,K.y,K.level),et=this;return k(Q).then(function(nt){var st=new l.default(nt),ut=new h.VectorTile(st);return et._drawTile($,K,ut,Y)})};function D(H,U,V,Y){var $=Y.level-U.level;if($===0)return H;for(var K=[],J=V*(Y.x-(U.x<<$)),Q=V*(Y.y-(U.y<<$)),et=0;et<H.length;et++){for(var nt=[],st=0;st<H[et].length;st++)nt.push(H[et][st].sub(new r.default(J,Q)));K.push(nt)}return K}P.prototype._drawTile=function(H,U,V,Y){var $=this,K=V.layers[this._layerName];if(!o.defined(K)||this._clean)return Y;var J=Y.getContext("2d");J.strokeStyle="black",J.lineWidth=1;for(var Q,et=Y.width/K.extent,nt={type:"FeatureCollection",features:[]},st=[],ut=function(){var wt=this,Mt=K.feature(rt);if($._renderMode==="geojson"){var Ft=G(H.x,H.y,H.level,Mt);if(!Ft)return"continue";nt.features.push(Ft)}if(h.VectorTileFeature.types[Mt.type]==="Polygon"&&$._renderMode!=="geojson"){var Dt,Rt;$.config.symbol.styleFilterOptions&&$.config.symbol.styleFilterOptions.length>0||$.config.symbol===void 0?Rt=$==null||(Dt=$._styleFunc)===null||Dt===void 0?void 0:Dt.call($,$.config.symbol,Mt.properties):Rt=C.default.resolve($.getConfigSymbol($.config.symbol,Mt.properties)),st.push(Rt),Rt.then(function(Nt){(0,L.default)(this,wt),Rt=Nt,$.cavansRender(J,Rt,U,H,Mt,K,et,Y,Q)}.bind(this)).catch(function(){(0,L.default)(this,wt)}.bind(this))}else if(h.VectorTileFeature.types[Mt.type]==="Point"&&$._renderMode!=="geojson"){var Tt,mt;$.config.symbol.styleFilterOptions&&$.config.symbol.styleFilterOptions.length>0||$.config.symbol===void 0?mt=$==null||(Tt=$._styleFunc)===null||Tt===void 0?void 0:Tt.call($,$.config.symbol,Mt.properties):mt=C.default.resolve($.getConfigSymbol($.config.symbol,Mt.properties)),st.push(mt),mt.then(function(Nt){(0,L.default)(this,wt),mt=Nt,$.cavansPointRender(J,mt,U,H,Mt,K,et,Y,Q)}.bind(this)).catch(function(){(0,L.default)(this,wt)}.bind(this))}else E.warn("Unexpected geometry type: "+Mt.type+" in region map on tile "+[H.level,H.x,H.y].join("/"))},rt=0;rt<K.length;rt++)var ht=ut();return this._renderMode==="geojson"&&this.config.symbol.type==="point"?this.pointsCollectionProgress(nt,H,J,Y):st.length?C.default.all(st).then(function(){var Pt=this;if((0,L.default)(this,$),nt?.features.length>0&&this._renderMode==="geojson"){var wt=o.GeoJsonDataSource.load(nt,{stroke:o.Color.YELLOW,fill:o.Color.PINK.withAlpha(.5),strokeWidth:3});return wt.then(function(Mt){if((0,L.default)(this,Pt),!Mt||this._clean)return document.createElement("canvas");for(var Ft=(0,f.default)(Mt.entities),Dt=0;Dt<Ft.length;Dt++){var Rt=Ft[Dt];if(!this._dataSource.entities.getById(Rt._id)){var Tt=o.Color.fromRandom({alpha:.8});Rt._id=H.x+"_"+H.y+"_"+H.level+"_"+Rt._id,Rt.polygon.material=Tt,Rt.polygon.outline=!![],Rt.polygon.height=50,this._dataSource.entities.add(Rt)}}this._geojsonCollection[H.x+"_"+H.y+"_"+H.level]=Ft}.bind(this)),document.createElement("canvas")}return this._renderMode==="imagerygrid"?this.imageryGridProgress(H,Y):Y}.bind(this)).catch(function(){return(0,L.default)(this,$),document.createElement("canvas")}.bind(this)):Y},P.prototype.cavansRender=function(H,U,V,Y,$,K,J,Q,et){if(H.fillStyle=U!=null&&(0,v.default)(U)?(0,x.default)(U?.color).alpha(Number(U?.opacity)||1).hexa()||"#FFFFFF33":" #FFFFFF33",U!=null&&U.image){var nt=document.createElement("canvas"),st=nt.getContext("2d");nt.width=Q.width/U.repeatX,nt.height=Q.height/U.repeatY;var ut=new Image;ut.src=U.image,st.globalAlpha=U.opacity,st.drawImage(ut,0,0,nt.width,nt.height),H.fillStyle=H.createPattern(nt,"repeat")}H.strokeStyle=U!=null&&U.outline&&(0,x.default)(U?.outlineColor).alpha(Number(U?.outlineOpacity)||1).hexa()||"#01BFFFFF",H.lineWidth=U!=null&&U.outline&&U?.outlineWidth||1,H.beginPath();var rt;if(V.level!==Y.level){var ht=$.bbox(),Pt=new o.BoundingRectangle(ht[0],ht[1],ht[2]-ht[0],ht[3]-ht[1]),wt=Y.level-V.level,Mt=K.extent>>wt;if(Mt<16)throw new o.DeveloperError("map.mapboxVectorTileImageryProvider.maxLevelError");var Ft=Mt*(Y.x-(V.x<<wt)),Dt=Mt*(Y.y-(V.y<<wt)),Rt=new o.BoundingRectangle(Ft,Dt,Mt,Mt);if(o.BoundingRectangle.intersect(Pt,Rt)===o.Intersect.OUTSIDE)return;J=Q.width/Mt,rt=D($.loadGeometry(),V,Mt,Y)}else rt=$.loadGeometry();for(var Tt=0;Tt<rt.length;Tt++){et=rt[Tt][0],H.moveTo(et.x*J,et.y*J);for(var mt=1;mt<rt[Tt].length;mt++)et=rt[Tt][mt],H.lineTo(et.x*J,et.y*J)}H.stroke(),(0,v.default)(H).call(H)},P.prototype.cavansPointRender=function(H,U,V,Y,$,K,J,Q,et){H.fillStyle=U!=null&&(0,v.default)(U)?(0,x.default)(U?.color).alpha(Number(U?.opacity)||1).hexa()||"#FFFFFF33":" #FFFFFF33",H.strokeStyle=U!=null&&U.outline&&(0,x.default)(U?.outlineColor).alpha(Number(U?.outlineOpacity)||1).hexa()||"#01BFFFFF",H.beginPath();var nt;if(V.level!==Y.level){var st=$.bbox(),ut=new o.BoundingRectangle(st[0],st[1],st[2]-st[0],st[3]-st[1]),rt=Y.level-V.level,ht=K.extent>>rt;if(ht<16)throw new o.DeveloperError("map.mapboxVectorTileImageryProvider.maxLevelError");var Pt=ht*(Y.x-(V.x<<rt)),wt=ht*(Y.y-(V.y<<rt)),Mt=new o.BoundingRectangle(Pt,wt,ht,ht);if(o.BoundingRectangle.intersect(ut,Mt)===o.Intersect.OUTSIDE)return;J=Q.width/ht,nt=D($.loadGeometry(),V,ht,Y)}else nt=$.loadGeometry();U.image=void 0;for(var Ft=0;Ft<nt.length;Ft++){if(et=nt[Ft][0],U!=null&&U.image){var Dt=new Image;Dt.src=U.image,H.drawImage(Dt,et.x*J,et.y*J)}else H.arc(et.x*J,et.y*J,U.pixelSize||2,0,2*Math.PI);if(U!=null&&U.label){var Rt=U.label,Tt=Rt.font_size?Rt.font_size:12,mt=Rt.font_family?Rt.font_family:"SimHei",Nt=Tt+"px "+mt;H.fillcol,H.fillStyle=Rt!=null&&Rt.color?(0,x.default)(Rt?.color).alpha(Number(Rt?.opacity)||1).hexa()||"#FFFFFF33":" #FFFFFF33",H.font=Nt,H.textBaseline="bottom",H.textAlign="left",H.fillText($.properties[Rt.field]||"",et.x*J,et.y*J)}}H.stroke(),(0,v.default)(H).call(H)},P.prototype.pointsCollectionProgress=function(H,U,V,Y){var $=this;if(H.features.length>0){var K=o.GeoJsonDataSource.load(H,{clampToGround:!![]});K.then(function(J){if((0,L.default)(this,$),!J||this._clean)return document.createElement("canvas");for(var Q=(0,f.default)(J.entities),et=0;et<Q.length;et++){var nt,st=Q[et],ut=(0,m.default)(nt="".concat(this.config.id,"_")).call(nt,st._id);this._dataSource.entities.getById(ut)||(this.config.symbol&&this.setEntityConfigSymbol(st,this.config.symbol),st._id=ut,this._dataSource.entities.add(st))}return this._geojsonCollection[U.x+"_"+U.y+"_"+U.level]=Q,document.createElement("canvas")}.bind(this)).catch(function(J){var Q;return E.error((0,m.default)(Q="".concat(J,":Unexpected in region map on tile ")).call(Q,[U.level,U.x,U.y].join("/"))),Y})}return Y},P.prototype.imageryGridProgress=function(H,U){var V,Y,$=this._gridCache[H.x+"_"+H.y+"_"+H.level].rectangle,K=new o.RectangleGeometry({rectangle:o.Rectangle.fromDegrees($.xmin,$.ymin,$.xmax,$.ymax),vertexFormat:o.EllipsoidSurfaceAppearance.VERTEX_FORMAT}),J=new o.GeometryInstance({id:H.x+"_"+H.y+"_"+H.level,geometry:K}),Q=U.toDataURL("image/png"),et=new o.GroundPrimitive({geometryInstances:J,appearance:new o.EllipsoidSurfaceAppearance({translucent:!![],material:new o.Material({fabric:{type:"Image",uniforms:{image:Q,color:o.Color.WHITE.withAlpha(this._opacity||.8)}}})}),asynchronous:![],compressVertices:![],releaseGeometryInstances:![],allowPicking:!![],imageReady:!![],classificationType:o.ClassificationType.BOTH}),nt=this._gridCache[H.x+"_"+H.y+"_"+H.level];if(nt.primitive=et,!et||this._clean)return document.createElement("canvas");this._imageryGridPrimitives.add(et);var st=nt.imagery.parent,ut=st.x+"_"+st.y+"_"+st.level;return st.referenceCount>1&&this!==null&&this!==void 0&&(V=this._gridCache[ut])!==null&&V!==void 0&&V.primitive&&this!==null&&this!==void 0&&(Y=this._gridCache[ut])!==null&&Y!==void 0&&Y.primitive.show&&(this._gridCache[ut].primitive.show=![]),document.createElement("canvas")};function A(H){var U=B(H);return U===o.WindingOrder.COUNTER_CLOCKWISE}function N(H,U){for(var V=H.x,Y=H.y,$=![],K=0,J=U.length-1;K<U.length;J=K++){var Q=U[K].x,et=U[K].y,nt=U[J].x,st=U[J].y,ut=et>Y!=st>Y&&V<(nt-Q)*(Y-et)/(st-et)+Q;ut&&($=!$)}return $}function I(H,U){for(var V=0;V<H.length;V++)if(N(U,H[V])){for(var Y=![];V+1<H.length&&!A(H[V+1]);)V++,!Y&&N(U,H[V])&&(Y=!![]);if(!Y)return!![]}return![]}function G(H,U,V,Y){var $=Y.extent*Math.pow(2,V),K=Y.extent*H,J=Y.extent*U,Q=Y.loadGeometry(),et=h.VectorTileFeature.types[Y.type],nt,st;function ut(Pt){for(var wt=0;wt<Pt.length;wt++){var Mt=Pt[wt],Ft=90-(Mt.y+J)*180/$;Pt[wt]=[(Mt.x+K)*360/2/$-180,Ft]}}switch(Y.type){case 1:var rt=[];for(nt=0;nt<Q.length;nt++)rt[nt]=Q[nt][0];Q=rt,ut(Q);break;case 2:for(nt=0;nt<Q.length;nt++)ut(Q[nt]);break;case 3:for(Q=W(Q),nt=0;nt<Q.length;nt++)for(st=0;st<Q[nt].length;st++)ut(Q[nt][st]);break}Q.length===1?Q=Q[0]:et="Multi"+et;var ht={type:"Feature",geometry:{type:et,coordinates:Q},properties:Y.properties};return"id"in Y&&(ht.id=Y.id),ht}function W(H){var U=H.length;if(U<=1)return[H];for(var V=[],Y,$,K=0;K<U;K++){var J=Z(H[K]);J!==0&&($===void 0&&($=J<0),$===J<0?(Y&&V.push(Y),Y=[H[K]]):Y.push(H[K]))}return Y&&V.push(Y),V}function Z(H){for(var U=0,V=0,Y=H.length,$=Y-1,K,J;V<Y;$=V++)K=H[V],J=H[$],U+=(J.x-K.x)*(K.y+J.y);return U}P.prototype.pickFeatures=function(H,U,V,Y,$){var K,J,Q={x:H,y:U,level:V};V>this._maximumNativeLevel?(J=V-this._maximumNativeLevel,K={x:H>>J,y:U>>J,level:this._maximumNativeLevel}):K={x:H,y:U,level:V};var et=this,nt=this._buildImageUrl(K.x,K.y,K.level);return k(nt).then(function(st){var ut=new h.VectorTile(new l.default(st)).layers[et._layerName];if(!o.defined(ut))return[];var rt=[0,(ut.extent>>J)-1],ht=et._tilingScheme.tileXYToNativeRectangle(H,U,V),Pt=[ht.west,ht.east],wt=[ht.north,ht.south],Mt=function(vt,Lt,Ct,jt,zt){var Yt=new o.Cartesian2;o.Cartesian2.subtract(vt,new o.Cartesian2(Lt[0],Ct[0]),Yt);var Zt=new o.Cartesian2((jt[1]-jt[0])/(Lt[1]-Lt[0]),(zt[1]-zt[0])/(Ct[1]-Ct[0]));return o.Cartesian2.add(o.Cartesian2.multiplyComponents(Yt,Zt,new o.Cartesian2),new o.Cartesian2(jt[0],zt[0]),new o.Cartesian2)},Ft=o.Cartesian2.fromCartesian3(et._tilingScheme.projection.project(new o.Cartographic(Y,$)));Ft=Mt(Ft,Pt,wt,rt,rt);for(var Dt=new r.default(Ft.x,Ft.y),Rt=[],Tt=0;Tt<ut.length;Tt++){var mt=ut.feature(Tt);if(mt.type===R&&I(D(mt.loadGeometry(),K,ut.extent>>J,Q),Dt)){var Nt=et._featureInfoFunc(mt);o.defined(Nt)&&Rt.push(Nt)}}return Rt})},P.prototype.addImageryCache=function(H){H.level>this._minimumLevel&&H.level<this._maximumLevel&&(this._gridCache[H.x+"_"+H.y+"_"+H.level]=H)},P.prototype.removeImageryCache=function(H){var U,V,Y,$=this._gridCache[H.x+"_"+H.y+"_"+H.level];this._imageryGridPrimitives.remove($?.primitive);var K=$==null||(U=$.imagery)===null||U===void 0?void 0:U.parent,J=K?.x+"_"+K?.y+"_"+K?.level;if(K?.referenceCount<5&&this!==null&&this!==void 0&&(V=this._gridCache[J])!==null&&V!==void 0&&V.primitive&&!(this!==null&&this!==void 0&&(Y=this._gridCache[J])!==null&&Y!==void 0&&Y.primitive.show)&&(this._gridCache[J].primitive.show=!![]),delete this._gridCache[H.x+"_"+H.y+"_"+H.level],this._geojsonCollection[H.x+"_"+H.y+"_"+H.level])for(var Q=this._geojsonCollection[H.x+"_"+H.y+"_"+H.level],et=0;et<Q.length;et++){var nt=Q[et];this._dataSource.entities.remove(nt)}},P.prototype.createHighlightImageryProvider=function(H){var U=this,V=function(K){if(H===K){var J=U._styleFunc(K);if(o.defined(J))return J.fillStyle="rgba(0,0,0,0)",J.lineJoin="round",J.lineWidth=Math.floor(1.5*o.defaultValue(J.lineWidth,1)+1),J}},Y=new P({url:this._uriTemplate.expression,layerName:this._layerName,subdomains:this._subdomains,rectangle:this._rectangle,minimumZoom:this._minimumLevel,maximumNativeZoom:this._maximumNativeLevel,maximumZoom:this._maximumLevel,uniqueIdProp:this._uniqueIdProp,styleFunc:V});return Y.pickFeatures=function(){},Y},P.prototype.getConfigSymbol=function(H,U){var V=i.getAttrVal(U)||{},Y=H.styleOptions;if(H.styleField){if(H.styleFieldOptions){var $=V[H.styleField],K=H.styleFieldOptions[$];K!=null&&(K.opacity=this._opacity,K.outlineOpacity=this._opacity,Y=i.clone(Y),Y=a.default.extend(Y,K))}else if(H.styleStepOptions){var J=H.minValue;J===null&&(J=Number.MIN_VALUE);var Q=V[H.styleField],et=this.getIndexByValue(H.styleStepOptions,J,Q);if(et!=null){var nt=H.styleStepOptions[et].style;nt.opacity=this._opacity,nt.outlineOpacity=this._opacity,Y=i.clone(Y),Y=a.default.extend(Y,nt)}}}return Y},P.prototype.setEntityConfigSymbol=function(H,U){var V=i.getAttrVal(H.properties)||{},Y=U.styleOptions;if(U.styleField){if(U.styleFieldOptions){var $=V[U.styleField],K=U.styleFieldOptions[$];K!=null&&(K.opacity=this._opacity,K.outlineOpacity=this._opacity,Y=i.clone(Y),Y=a.default.extend(Y,K))}else if(U.styleStepOptions){var J=U.minValue;J===null&&(J=Number.MIN_VALUE);var Q=V[U.styleField],et=this.getIndexByValue(U.styleStepOptions,J,Q);if(et!=null){var nt=U.styleStepOptions[et].style;nt.opacity=this._opacity,nt.outlineOpacity=this._opacity,Y=i.clone(Y),Y=a.default.extend(Y,nt)}}}if(typeof U.calback=="function"){var st=U.calback(V,H,U);if(!st)return;Y=i.clone(Y),Y=a.default.extend(Y,st)}if(Y=Y||{},H.polyline&&(g.style2Entity(Y,H.polyline),Y.label&&Y.label.field)){Y.label.heightReference=o.defaultValue(Y.label.heightReference,o.HeightReference.CLAMP_TO_GROUND);var ut=u.style2Entity(Y.label);ut.text=V[Y.label.field]||ut.text||"";var rt=g.getPositions(H),ht=rt[Math.floor(rt.length/2)];Y.label.position&&(Y.label.position==="center"?ht=(0,p.centerOfMass)(rt):i.isNumber(Y.label.position)&&(ht=rt[Y.label.position])),H.position=ht,H.label=ut}if(H.polygon){if(!Y.classificationType&&(Y.classificationType=o.ClassificationType.BOTH),d.style2Entity(Y,H.polygon),Y.outlineWidth&&Y.outlineWidth<1&&(Y.outlineWidth=1),Y.outlineWidth&&Y.outlineWidth>1||Y.classificationType!=o.ClassificationType.NONE)if(U.volumeStyle&&!U.volumeStyle.render2d)Y.outlineWidth=1;else{H.polygon.outline=![];var Pt={color:Y.outlineColor,width:Y.outlineWidth,opacity:Y.outlineOpacity,lineType:"solid",clampToGround:!![],classificationType:Y.classificationType,outline:![]},wt=g.style2Entity(Pt);wt.positions=d.getPositions(H),H.polyline=wt}if(Y.label&&Y.label.field){Y.label.heightReference=o.defaultValue(Y.label.heightReference,o.HeightReference.CLAMP_TO_GROUND);var Mt=u.style2Entity(Y.label);Mt.text=V[Y.label.field]||Mt.text||"",H.position=(0,p.pointOnPolygon)(d.getPositions(H),d.getHoles(H)),H.label=Mt}if(U.volumeStyle){var Ft=Number(V[U.volumeStyle.cloumn]||1),Dt=U.volumeStyle.storeyheight||3.5;if(i.isString(Dt)&&(Dt=V[Dt]||3.5),U.volumeStyle.Updownheight){var Rt=U.volumeStyle.Updownheight.down,Tt=U.volumeStyle.Updownheight.up;i.isNumber(Rt)?H.polygon.height=Rt:i.isString(Rt)&&(H.polygon.height=V[Rt]||0),i.isNumber(Tt)?H.polygon.extrudedHeight=Tt:i.isString(Tt)?H.polygon.extrudedHeight=V[Tt]||H.polygon.height+(Dt||3.5):Tt==null&&(H.polygon.extrudedHeight=H.polygon.height+(Dt||3.5))}else H.polygon.extrudedHeight=Ft*Dt;U.volumeStyle.outlineWidth!==void 0&&U.volumeStyle.outlineWidth==![]&&(H.polygon.outline=![]),U.volumeStyle.clampToGround&&(H.polygon.heightReference=o.HeightReference.CLAMP_TO_GROUND)}}if(H.label&&(Y.label=Y.label||Y||{},Y.label.heightReference=o.defaultValue(Y.label.heightReference,o.HeightReference.CLAMP_TO_GROUND),u.style2Entity(Y.label,H.label),Y.label.field&&(H.label.text=V[Y.label.field]||H.label.text||"")),H.billboard){if(Y.heightReference=o.defaultValue(Y.heightReference,o.HeightReference.CLAMP_TO_GROUND),n.style2Entity(Y,H.billboard),Y.label&&Y.label.field&&!H.label){Y.label.heightReference=o.defaultValue(Y.label.heightReference,o.HeightReference.CLAMP_TO_GROUND);var mt=u.style2Entity(Y.label);mt.text=V[Y.label.field]||mt.text||"",H.label=mt}if(H.billboard&&Y.label.heightfield&&Number(V[Y.label.heightfield])&&(H.position=(0,p.setPositionsHeight)(H.position.getValue(),Number(V[Y.label.heightfield]))),Y.model){Y.model.heightReference=o.defaultValue(Y.model.heightReference,o.HeightReference.CLAMP_TO_GROUND);var Nt=y.style2Entity(Y.model);H.model=Nt}}H.attribute=Y}},300631:function(X,z,e){"use strict";var E=e(29870),F=e(520314),O=e(426352),M=e(230551),b=e(43586),L=e(787879),T=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.MapboxVectorTileLayer=void 0;var C=e(470334),f=m(e(187647));function v(s){if(typeof L!="function")return null;var c=new L,x=new L;return(v=function(i){return i?x:c})(s)}function m(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||E(s)!=="object"&&typeof s!="function")return{default:s};var x=v(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&T;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var u=i?T(s,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}function o(s,c){var x=typeof M<"u"&&b(s)||s["@@iterator"];if(!x){if(Array.isArray(s)||(x=h(s))||c&&s&&typeof s.length=="number"){x&&(s=x);var a=0,i=function(){};return{s:i,n:function(){return a>=s.length?{done:!![]}:{done:![],value:s[a++]}},e:function(y){throw y},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n=!![],u=![],g;return{s:function(){x=x.call(s)},n:function(){var y=x.next();return n=y.done,y},e:function(y){u=!![],g=y},f:function(){try{!n&&x.return!=null&&x.return()}finally{if(u)throw g}}}}function h(s,c){var x;if(s){if(typeof s=="string")return l(s,c);var a=F(x=Object.prototype.toString.call(s)).call(x,8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return O(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(s,c)}}function l(s,c){(c==null||c>s.length)&&(c=s.length);for(var x=0,a=new Array(c);x<c;x++)a[x]=s[x];return a}var r=C.TileLayer.extend({layer:void 0,add:function(){var c=new C.TileLayer(this.config,this.viewer);this.layer=c.layer,this.layer.imageryProvider._viewer=this.viewer,this.viewer.dataSources.add(this.layer.imageryProvider._dataSource),this.viewer.scene.primitives.add(this.layer.imageryProvider._imageryGridPrimitives),this._helper=new f.EventHelper;var x=this;return this._helper.add(x.viewer.scene.globe.tileLoadProgressEvent,function(a){a===0&&x.layer.imageryProvider._updatePrimitiveLayers()}),c},removeEx:function(){this._helper.removeAll(),this.layer._imageryProvider._clean=!![],this.layer._imageryProvider._dataSource._entityCollection.removeAll(),this.layer._imageryProvider._dataSource.update(),this.layer._imageryProvider._imageryGridPrimitives.removeAll()},hasOpacity:!![],_opacity:1,setOpacity:function(c){this._opacity=c,this.layer._imageryProvider._opacity=this._opacity;var x=this.layer._imageryProvider._imageryGridPrimitives._primitives,a=o(x),i;try{for(a.s();!(i=a.n()).done;){var n=i.value;n.appearance.material.uniforms.color.alpha=this._opacity}}catch(u){a.e(u)}finally{a.f()}}});z.MapboxVectorTileLayer=r},132634:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.OSMBuildLayer=void 0;var M=T(e(187647)),b=e(887358);function L(f){if(typeof F!="function")return null;var v=new F,m=new F;return(L=function(h){return h?m:v})(f)}function T(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||E(f)!=="object"&&typeof f!="function")return{default:f};var m=L(v);if(m&&m.has(f))return m.get(f);var o={},h=Object.defineProperty&&O;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=h?O(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}var C=b.Tiles3dLayer.extend({model:null,originalCenter:null,positionCenter:null,add:function(){if(!this.model&&!this.viewer.scene.primitives.contains(this.model)){var v=M.createOsmBuildings();v&&(this.model=this.viewer.scene.primitives.add(v))}},remove:function(){this.viewer.scene.primitives.contains(this.model)&&this.viewer.scene.primitives.remove(this.model),delete this.model}});z.OSMBuildLayer=C},347184:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.POILayer=void 0;var L=b(e(22466)),T=r(e(187647)),C=b(e(202692)),f=r(e(194777)),v=e(400058),m=r(e(980790)),o=r(e(411257)),h=r(e(721617));function l(c){if(typeof O!="function")return null;var x=new O,a=new O;return(l=function(n){return n?a:x})(c)}function r(c,x){if(!x&&c&&c.__esModule)return c;if(c===null||F(c)!=="object"&&typeof c!="function")return{default:c};var a=l(x);if(a&&a.has(c))return a.get(c);var i={},n=Object.defineProperty&&M;for(var u in c)if(u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)){var g=n?M(c,u):null;g&&(g.get||g.set)?Object.defineProperty(i,u,g):i[u]=c[u]}return i.default=c,a&&a.set(c,i),i}var s=v.CustomFeatureGridLayer.extend({_keys:null,_key_index:0,getKey:function(){!this._keys&&(this._keys=this.config.key||["c95467d0ed2a3755836e37dc27369f97","4320dda936d909d73ab438b4e29cf2a2","e64a96ed7e361cbdc0ebaeaf3818c564","df3247b7df64434adecb876da94755d7","d4375ec477cb0a473c448fb1f83be781","13fdd7b2b90a9d326ae96867ebcc34ce","c34502450ae556f42b21760faf6695a0","57f8ebe12797a73fc5b87f5d4ef859b1"]);var x=this._key_index++%this._keys.length;return this._keys[x]},getDataForGrid:function(x,a){var i=f.wgs2gcj([x.rectangle.xmin,x.rectangle.ymax]),n=f.wgs2gcj([x.rectangle.xmax,x.rectangle.ymin]),u=i[0]+","+i[1]+"|"+n[0]+","+n[1],g=(0,L.default)(this.config)||{};g.output="json",g.key=this.getKey(),g.polygon=u,g.offset||(g.offset=25),g.types||(g.types="120000|130000|190000"),C.default.default.ajax({url:"http://restapi.amap.com/v3/place/polygon",type:"get",dataType:"json",timeout:"5000",data:g,success:function(y){if(y.infocode!=="10000"){E.error("POI \u8BF7\u6C42\u5931\u8D25("+y.infocode+")\uFF1A"+y.info);return}var p=y.pois;a(p)},error:function(y){E.error("POI \u8BF7\u6C42\u51FA\u9519("+y.status+")\uFF1A"+y.statusText)}})},createEntity:function(x,a){var i="<div>\u540D\u79F0\uFF1A"+a.name+"</div><div>\u5730\u5740\uFF1A"+a.address+"</div><div>\u533A\u57DF\uFF1A"+a.pname+a.cityname+a.adname+"</div><div>\u7C7B\u522B\uFF1A"+a.type+"</div>",n=a.location.split(",");n=f.gcj2wgs(n);var u=this.viewer.shine.point2map({x:n[0],y:n[1]}),g={name:a.name,position:T.Cartesian3.fromDegrees(u.x,u.y,this.config.height||3),popup:{html:i,anchor:[0,-15]},properties:a},d=this.config.symbol;if(d){var y=d.styleOptions;if(d.styleField){var p=a[d.styleField],w=d.styleFieldOptions[p];w!=null&&(y=C.default.default.extend({},y),y=C.default.default.extend(y,w))}y=y||{},y.image?(g.billboard=(0,m.style2Entity)(y),g.billboard.heightReference=T.HeightReference.RELATIVE_TO_GROUND):g.point=(0,o.style2Entity)(y),y.label&&(g.label=(0,h.style2Entity)(y.label),g.label.heightReference=T.HeightReference.RELATIVE_TO_GROUND,g.label.text=a.name)}else g.point={color:new T.Color.fromCssColorString("#3388ff"),pixelSize:10,outlineColor:new T.Color.fromCssColorString("#ffffff"),outlineWidth:2,heightReference:T.HeightReference.RELATIVE_TO_GROUND,scaleByDistance:new T.NearFarScalar(1e3,1,2e4,.5)},g.label={text:a.name,font:"normal small-caps normal 16px \u6977\u4F53",style:T.LabelStyle.FILL_AND_OUTLINE,fillColor:T.Color.AZURE,outlineColor:T.Color.BLACK,outlineWidth:2,horizontalOrigin:T.HorizontalOrigin.CENTER,verticalOrigin:T.VerticalOrigin.BOTTOM,pixelOffset:new T.Cartesian2(0,-15),heightReference:T.HeightReference.RELATIVE_TO_GROUND,scaleByDistance:new T.NearFarScalar(1e3,1,5e3,.8),distanceDisplayCondition:new T.DistanceDisplayCondition(0,5e3)};var S=this.dataSource.entities.add(g);return S}});z.POILayer=s},480691:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.S3MLayer=void 0;var L=b(e(342579)),T=o(e(187647)),C=e(887358),f=e(36054),v=o(e(580823));function m(l){if(typeof O!="function")return null;var r=new O,s=new O;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||F(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&M;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?M(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var h=C.Tiles3dLayer.extend({model:null,originalCenter:null,positionCenter:null,boundingSphere:null,add:function(){this.model?this.viewer.scene.primitives.contains(this.model)||this.viewer.scene.primitives.add(this.model):this.initData()},remove:function(){this.viewer.scene.primitives.contains(this.model)&&this.viewer.scene.primitives.remove(this.model),delete this.model},centerAt:function(r){this.config.extent||this.config.center?this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:r,isWgs84:!![]}):this.boundingSphere&&this.viewer.camera.flyToBoundingSphere(this.boundingSphere,{offset:new T.HeadingPitchRange(0,-.5,this.boundingSphere.radius*2),duration:r})},initData:function(){var r=this,s=v.getProxyUrl(this.config).url;this.model=this.viewer.scene.primitives.add(new f.S3MTilesLayerProvider({context:this.viewer.scene._context,url:s})),this.model.readyPromise.then(function(c){(0,L.default)(this,r),this.readyPromise&&this.readyPromise(c);var x=c.boundingSphere;this.boundingSphere=x,c._root&&c._root.transform&&(this.orginMatrixInverse=T.Matrix4.inverse(T.Matrix4.fromArray(c._root.transform),new T.Matrix4),this.config.scale>0&&this.config.scale!==1&&(c._root.transform=T.Matrix4.multiplyByUniformScale(c._root.transform,this.config.scale,c._root.transform)));var a=x.center;this.positionCenter=a;var i=T.Cartographic.fromCartesian(a),n=Number(i.height.toFixed(2)),u=Number(T.Math.toDegrees(i.longitude).toFixed(6)),g=Number(T.Math.toDegrees(i.latitude).toFixed(6));this.originalCenter={x:u,y:g,z:n};var d=this.viewer.shine.point2map(this.originalCenter);if(d.x!==this.originalCenter.x||d.y!==this.originalCenter.y||this.config.offset!=null){this.config.offset=this.config.offset||{},this.config.offset.x&&this.config.offset.y&&(this.config.offset=this.viewer.shine.point2map(this.config.offset));var y={x:this.config.offset.x||d.x,y:this.config.offset.y||d.y,z:this.config.offset.z||0,heading:this.config.offset.heading,axis:this.config.axis,scale:this.config.scale,transform:this.config.offset.hasOwnProperty("transform")?this.config.offset.transform:this.config.offset.heading!=null};this.config.offset.z==="-height"?(y.z=-n+5,this.updateMatrix(y)):this.config.offset.z==="auto"?this.autoHeight(a,y):this.updateMatrix(y)}!this.viewer.shine.isFlyAnimation()&&this.config.flyTo&&this.centerAt(),this.config.calback&&this.config.calback(c),T.defined(this.config.visibleDistanceMax)&&this.bindVisibleDistance()}.bind(this)).otherwise(function(c){(0,L.default)(this,r),E.error(c)}.bind(this)),this.viewer.scene.camera.setView({destination:new T.Cartesian3(-2182469166141913e-9,4.3865790994979935e6,4069925783807108e-9),orientation:{heading:5.213460518239332,pitch:-.5150671720144846}})}});z.S3MLayer=h},540266:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.TerrainLayer=void 0;var M=e(414666),b=T(e(580823));function L(f){if(typeof F!="function")return null;var v=new F,m=new F;return(L=function(h){return h?m:v})(f)}function T(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||E(f)!=="object"&&typeof f!="function")return{default:f};var m=L(v);if(m&&m.has(f))return m.get(f);var o={},h=Object.defineProperty&&O;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=h?O(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}var C=M.BaseLayer.extend({terrain:null,add:function(){!this.terrain&&(this.terrain=b.getTerrainProvider(this.config)),this.viewer.terrainProvider=this.terrain},remove:function(){this.viewer.terrainProvider=b.getEllipsoidTerrain()}});z.TerrainLayer=C},470334:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.TileLayer=void 0;var L=b(e(342579)),T=b(e(22466)),C=b(e(578756)),f=b(e(705146)),v=c(e(187647)),m=e(414666),o=e(566828),h=e(110563),l=b(e(202692)),r=e(632002);function s(a){if(typeof O!="function")return null;var i=new O,n=new O;return(s=function(g){return g?n:i})(a)}function c(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||F(a)!=="object"&&typeof a!="function")return{default:a};var n=s(i);if(n&&n.has(a))return n.get(a);var u={},g=Object.defineProperty&&M;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?M(a,d):null;y&&(y.get||y.set)?Object.defineProperty(u,d,y):u[d]=a[d]}return u.default=a,n&&n.set(a,u),u}var x=m.BaseLayer.extend({layer:null,add:function(){this.layer!=null&&this.remove(),this.addEx();var i=this.createImageryProvider(this.config);if(v.defined(i)){var n=this.config,u={show:!![],alpha:this._opacity};if(v.defined(n.rectangle)&&v.defined(n.rectangle.xmin)&&v.defined(n.rectangle.xmax)&&v.defined(n.rectangle.ymin)&&v.defined(n.rectangle.ymax)){var g=n.rectangle.xmin,d=n.rectangle.xmax,y=n.rectangle.ymin,p=n.rectangle.ymax,w=v.Rectangle.fromDegrees(g,y,d,p);this.rectangle=w,u.rectangle=w}v.defined(n.brightness)&&(u.brightness=n.brightness),v.defined(n.contrast)&&(u.contrast=n.contrast),v.defined(n.hue)&&(u.hue=n.hue),v.defined(n.saturation)&&(u.saturation=n.saturation),v.defined(n.gamma)&&(u.gamma=n.gamma),v.defined(n.maximumAnisotropy)&&(u.maximumAnisotropy=n.maximumAnisotropy),v.defined(n.minimumTerrainLevel)&&(u.minimumTerrainLevel=n.minimumTerrainLevel),v.defined(n.maximumTerrainLevel)&&(u.maximumTerrainLevel=n.maximumTerrainLevel),this.layer=new v.ImageryLayer(i,u),this.layer.config=this.config,this.viewer.imageryLayers.add(this.layer),this.layer.config.group==1,this.setZIndex(this.config.mapIndex)}},createImageryProvider:function(i){return o.Layer.createImageryProvider(i)},addEx:function(){},remove:function(){this.layer!=null&&(this.removeEx(),this.viewer.imageryLayers.remove(this.layer,!![]),this.layer=null)},removeEx:function(){},centerAt:function(i){var n,u,g=this;if(this.layer!=null)if(this.config.extent||this.config.center)this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:i,isWgs84:!![]});else if(((n=this.config)===null||n===void 0||(u=n._options)===null||u===void 0?void 0:u.initExtent.length)===4){var d=this.config._options.initExtent,y={xmin:d[0],ymin:d[1],xmax:d[2],ymax:d[3]};this.viewer.shine.centerAt(y,{duration:i,isWgs84:!![]})}else if(v.defined(this.rectangle))this.viewer.camera.flyTo({destination:this.rectangle,duration:i});else{var p=null,w="",S="",R="",B="",k=this;if(this.layer.config.type==="geoserver-wms")l.default.ajax({type:"GET",url:this.layer.config.url+"?service=WMS&request=GetCapabilities",async:![],success:function(Y){var $=this,K=(0,h.xmlToJson)(Y),J;if(Array.isArray(K.WMS_Capabilities.Capability.Layer)){var Q;J=(0,T.default)(Q=K.WMS_Capabilities.Capability.Layer.Layer).call(Q,function(nt){if((0,L.default)(this,$),nt.Name["#text"]==k.layer.config.visibleLayers||nt.Name["#text"]==k.layer.config.name)return nt}.bind(this))}else J=K.WMS_Capabilities.Capability.Layer.Layer;if(J){Array.isArray(J[0].BoundingBox)?(w=J[0].BoundingBox[0]["@attributes"].minx,S=J[0].BoundingBox[0]["@attributes"].miny,R=J[0].BoundingBox[0]["@attributes"].maxx,B=J[0].BoundingBox[0]["@attributes"].maxy):(w=J[0].BoundingBox["@attributes"].minx,S=J[0].BoundingBox["@attributes"].miny,R=J[0].BoundingBox["@attributes"].maxx,B=J[0].BoundingBox["@attributes"].maxy);var et=1.8*(B-S);p=new v.Rectangle.fromDegrees(w,S-et,R,B-et)}else E.error("Invalid positioning layer!")},error:function(){E.error("Failed to request Boundbox of layer!")}});else if(this.layer.config.type==="geoserver-wmts"){var P=this.config.WMTSparams,D=P.position.split(" ");if(P.ServiceType==="geoserver"){var A=1.8*(D[3]-D[1]);p=new v.Rectangle.fromDegrees(D[0],D[1]-A,D[2],D[3]-A)}else{var N=1.8*(D[2]-D[0]);p=new v.Rectangle.fromDegrees(D[1],D[0]-N,D[3],D[2]-N)}}else if(this.layer.config.type==="wmts"){var I=this.config.WMTSparams,G=I.position.split(" ");if(I.ServiceType==="geoserver"){var W=1.8*(G[3]-G[1]);p=new v.Rectangle.fromDegrees(G[0],G[1]-W,G[2],G[3]-W)}else{var Z=1.8*(G[2]-G[0]);p=new v.Rectangle.fromDegrees(G[1],G[0]-Z,G[3],G[2]-Z)}}else if(this.layer.imageryProvider.ready&&this.layer.imageryProvider.rectangle){p=(0,r.cloneDeep)(this.layer.imageryProvider.rectangle);var H=1.8*(p.north-p.south);p.north=p.north-H,p.south=p.south-H}else{var U=C.default.resolve(this.layer.imageryProvider.readyPromise);U.then(function(){(0,L.default)(this,g),p=(0,r.cloneDeep)(this.layer.imageryProvider.rectangle),v.defined(p)&&p!==v.Rectangle.MAX_VALUE&&p.west>0&&p.south>0&&p.east>0&&p.north>0&&this.viewer.camera.flyTo({destination:p,duration:i})}.bind(this)).catch(function(V){var Y;(0,L.default)(this,g),E.error((0,f.default)(Y="There was an error while creating ".concat(this.layer.name,". ")).call(Y,V))}.bind(this))}v.defined(p)&&p!==v.Rectangle.MAX_VALUE&&p.west>0&&p.south>0&&p.east>0&&p.north>0&&this.viewer.camera.flyTo({destination:p,duration:i,orientation:{heading:v.Math.toRadians(0),pitch:v.Math.toRadians(-45),roll:0}})}},hasOpacity:!![],_opacity:1,setOpacity:function(i){this._opacity=i,this.layer!=null&&(this.layer.alpha=i)},hasZIndex:!![],setZIndex:function(i){if(!(this.layer==null||i==null)){this.viewer.imageryLayers.raiseToTop(this.layer);for(var n=this.viewer.imageryLayers._layers,u=n.length-1;u>=0;u--)if(n[u]!=this.layer){var g=n[u].config;g&&g.mapIndex&&i<g.mapIndex&&this.viewer.imageryLayers.lower(this.layer)}}}});z.TileLayer=x},887358:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Tiles3dLayer=void 0;var b=M(e(581806)),L=M(e(611323)),T=M(e(342579)),C=M(e(934749)),f=r(e(187647)),v=e(414666),m=r(e(580823)),o=r(e(268821)),h=r(e(792672));function l(c){if(typeof F!="function")return null;var x=new F,a=new F;return(l=function(n){return n?a:x})(c)}function r(c,x){if(!x&&c&&c.__esModule)return c;if(c===null||E(c)!=="object"&&typeof c!="function")return{default:c};var a=l(x);if(a&&a.has(c))return a.get(c);var i={},n=Object.defineProperty&&O;for(var u in c)if(u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)){var g=n?O(c,u):null;g&&(g.get||g.set)?Object.defineProperty(i,u,g):i[u]=c[u]}return i.default=c,a&&a.set(c,i),i}var s=v.BaseLayer.extend({model:null,originalCenter:null,positionCenter:null,boundingSphere:null,add:function(){this.model?this.viewer.scene.primitives.contains(this.model)||this.viewer.scene.primitives.add(this.model):this.initData()},remove:function(){f.defined(this.config.visibleDistanceMax)&&this.viewer.scene.camera.changed.removeEventListener(this.updateVisibleDistance,this),this.viewer.scene.primitives.contains(this.model)&&this.viewer.scene.primitives.remove(this.model),delete this.model,delete this.boundingSphere},centerAt:function(){var c=(0,C.default)(L.default.mark(function a(i){var n=this;return L.default.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.config.extent||this.config.center)){g.next=4;break}this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:i,isWgs84:!![]}),g.next=6;break;case 4:return g.next=6,this.model.readyPromise.then(function(){(0,T.default)(this,n),this.boundingSphere&&this.viewer.camera.flyToBoundingSphere(this.boundingSphere,{offset:new f.HeadingPitchRange(0,-.5,this.boundingSphere.radius*2),duration:i})}.bind(this));case 6:case"end":return g.stop()}},a,this)}));function x(a){return c.apply(this,arguments)}return x}(),initData:function(){var x=this;this.config.maximumScreenSpaceError=this.config.maximumScreenSpaceError||2,this.config.maximumMemoryUsage=this.config.maximumMemoryUsage||512;var a=this.config;if(a.authkey){var i;(0,b.default)(i=a.url).call(i,"?")?a.url+="&authkey="+a.authkey:a.url+="?authkey="+a.authkey}if(a=m.getProxyUrl(a),this.model=this.viewer.scene.primitives.add(new f.Cesium3DTileset(a)),!this.config.dthurl){this.model._config=this.config;for(var n in this.config)if(this.config.hasOwnProperty(n)){if(n==="url"||n==="type"||n==="style"||n==="classificationType")continue;try{this.model[n]=this.config[n]}catch{}}}this.config.style&&(this.model.style=new f.Cesium3DTileStyle(this.config.style));var u=this;if(this.config.dthurl){u.viewer.dthTileset,u.viewer.dthTileset=new f.Cesium3DTileset({url:u.config.dthurl,classificationType:f.ClassificationType.CESIUM_3D_TILE}),u.viewer.dthTileset.style=new f.Cesium3DTileStyle({color:"rgba(255, 255, 255, 0.01)"}),u.sthModel=u.viewer.scene.primitives.add(u.viewer.dthTileset),u.sthModel._config=u.config;for(var g in u.config)if(u.config.hasOwnProperty(g)){if(g==="url"||g==="type"||g==="style"||g==="classificationType")continue;try{this.sthModel[g]=u.config[g]}catch{}}u.viewer.cx&&(u.viewer.dthTileset.show=!![])}if(this.config.style&&this.config.style.colorty&&window.color_type){for(var d=window.color_type,y,p,w,S=u.config.style.colorty,R=u.config.style.proID,B=[],k=0;k<d[S].type.length;k++){var P=d[S].type[k];y=d[S].color[P][0],p=d[S].color[P][1],w=d[S].color[P][2];var D="rgba("+y+","+p+","+w+",1)",A="${"+R+"} === '"+P+"'",N=[A,D];B.push(N)}B.push(["true","rgba(255,235,175,1)"]),u.model.style=new f.Cesium3DTileStyle({color:{conditions:B}})}this.model.readyPromise.then(function(I){(0,T.default)(this,x),this.readyPromise&&this.readyPromise(I),this.hasOpacity&&this._opacity!==1&&this.setOpacity(this._opacity);var G=I.boundingSphere;this.boundingSphere=G,I._root&&I._root.transform&&(this.orginMatrixInverse=f.Matrix4.inverse(f.Matrix4.fromArray(I._root.transform),new f.Matrix4),this.config.scale>0&&this.config.scale!==1&&(I._root.transform=f.Matrix4.multiplyByUniformScale(I._root.transform,this.config.scale,I._root.transform)));var W=G.center;this.positionCenter=W;var Z=f.Cartographic.fromCartesian(W),H=Number(Z.height.toFixed(2)),U=Number(f.Math.toDegrees(Z.longitude).toFixed(6)),V=Number(f.Math.toDegrees(Z.latitude).toFixed(6));this.originalCenter={x:U,y:V,z:H};var Y=this.viewer.shine.point2map(this.originalCenter);if(Y.x!==this.originalCenter.x||Y.y!==this.originalCenter.y||this.config.offset!=null){this.config.offset=this.config.offset||{},this.config.offset.x&&this.config.offset.y&&(this.config.offset=this.viewer.shine.point2map(this.config.offset));var $={x:this.config.offset.x||Y.x,y:this.config.offset.y||Y.y,z:this.config.offset.z||0,heading:this.config.offset.heading,axis:this.config.axis,scale:this.config.scale,transform:this.config.offset.hasOwnProperty("transform")?this.config.offset.transform:this.config.offset.heading!=null};this.config.offset.z==="-height"?($.z=-H+5,this.updateMatrix($)):this.config.offset.z==="auto"?this.autoHeight(W,$):this.updateMatrix($)}this.config.clippingPolygonPoints&&o.addClippingPolygon(I,this.config.clippingPolygonPoints),!this.viewer.shine.isFlyAnimation()&&this.config.flyTo&&this.centerAt(),this.config.calback&&this.config.calback(I),f.defined(this.config.visibleDistanceMax)&&this.bindVisibleDistance()}.bind(this))},autoHeight:function(x,a){var i=this;h.terrainPolyline({viewer:this.viewer,positions:[x,x],calback:function(u,g){if(!(u==null||u.length===0||g)){var d=d.formatPosition(u[0]),y=d.z-i.originalCenter.z+1;a.z=y,i.updateMatrix(a)}}})},updateMatrix:function(x){this.model!=null&&(this.positionCenter=f.Cartesian3.fromDegrees(x.x,x.y,x.z),o.updateMatrix(this.model,x))},hasOpacity:!![],setOpacity:function(x){this._opacity=x;var a=this;if(this.config.onSetOpacity&&window.color_type)this.config.onSetOpacity(x);else{var i=window.color_type,n,u,g,d;if(d=x,this.model)if(!a.config.style)a.model.style=new f.Cesium3DTileStyle({color:"color() *vec4("+x+")"});else{if(this.config.style.color&&typeof this.config.style.color=="string"){var y=f.Color.fromAlpha(f.Color.fromCssColorString(a.config.style.color),d),p=y.toCssColorString();a.model.style=new f.Cesium3DTileStyle({color:p})}if(this.config.style.color.conditions){for(var w=this.config.style.color.conditions,S=0;S<w.length;S++){var R=w[S],B=f.Color.fromAlpha(f.Color.fromCssColorString(R[1]),d);R[1]=B.toCssColorString()}var k=new f.Cesium3DTileStyle;k.color={conditions:w},a.model.style=k}if(this.config.style.colorty){for(var P=a.config.style.colorty,D=a.config.style.proID,A=[],N=0;N<i[P].type.length;N++){var I=i[P].type[N];n=i[P].color[I][0],u=i[P].color[I][1],g=i[P].color[I][2];var G="rgba("+n+","+u+","+g+","+d+")",W="${"+D+"} === '"+I+"'",Z=[W,G];A.push(Z)}A.push(["true","rgba(255,235,175,"+d+")"]);var H=new f.Cesium3DTileStyle;H.color={conditions:A},a.model.style=H}}}},showClickFeature:function(x){this.model?this.model._config.showClickFeature=x:this.config.showClickFeature=x},bindVisibleDistance:function(){this.viewer.scene.camera.changed.addEventListener(this.updateVisibleDistance,this)},updateVisibleDistance:function(){if(this._visible&&this.viewer.scene.mode===f.SceneMode.SCENE3D&&!(!this.model||!this.boundingSphere||!this.positionCenter)){var x=f.Cartesian3.distance(this.positionCenter,this.viewer.camera.position);if(x>this.config.visibleDistanceMax+1e5)this.model.show=![];else{var a=h.pickCenterPoint(this.viewer.scene);if(f.defined(a)){var i=f.Cartesian3.distance(a,this.viewer.camera.position);this.model.show=i<this.config.visibleDistanceMax}else this.model.show=!![]}}}});z.Tiles3dLayer=s},268821:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.addClippingPolygon=m,z.getCenter=C,z.getInverseTransform=o,z.getOriginCoordinateSystemPoint=h,z.updateMatrix=v;var M=T(e(187647)),b=e(580823);function L(l){if(typeof F!="function")return null;var r=new F,s=new F;return(L=function(x){return x?s:r})(l)}function T(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||E(l)!=="object"&&typeof l!="function")return{default:l};var s=L(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&O;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?O(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}function C(l,r){var s={},c=l.boundingSphere,x=c.center,a=M.Cartographic.fromCartesian(x),i=Number(a.height.toFixed(2)),n=Number(M.Math.toDegrees(a.longitude).toFixed(6)),u=Number(M.Math.toDegrees(a.latitude).toFixed(6));if(s={x:n,y:u,z:i},r){var g=M.Matrix4.fromArray(l._root.transform),d=M.Matrix4.getTranslation(g,new M.Cartesian3),y=M.Cartographic.fromCartesian(d);if(M.defined(y)){s.x=Number(M.Math.toDegrees(y.longitude).toFixed(6)),s.y=Number(M.Math.toDegrees(y.latitude).toFixed(6)),s.z=Number(y.height.toFixed(2));var p=M.Matrix4.getMatrix3(g,new M.Matrix3),w=M.Matrix4.getMatrix3(M.Transforms.eastNorthUpToFixedFrame(d),new M.Matrix3),S=M.Matrix3.getColumn(w,0,new M.Cartesian3),R=M.Matrix3.getColumn(w,1,new M.Cartesian3),B=M.Matrix3.getColumn(w,2,new M.Cartesian3),k=M.Matrix3.getColumn(p,0,new M.Cartesian3);k=M.Cartesian3.cross(k,B,k),k=M.Cartesian3.cross(B,k,k),k=M.Cartesian3.normalize(k,k);var P=M.Cartesian3.angleBetween(S,k),D=M.Cartesian3.angleBetween(R,k);D>Math.PI*.5&&(P=2*Math.PI-P),s.heading=Number(M.Math.toDegrees(P).toFixed(1))}}return s}function f(l,r){if(r==null)return l;var s;switch(r.toUpperCase()){case"Y_UP_TO_Z_UP":s=M.Axis.Y_UP_TO_Z_UP;break;case"Z_UP_TO_Y_UP":s=M.Axis.Z_UP_TO_Y_UP;break;case"X_UP_TO_Z_UP":s=M.Axis.X_UP_TO_Z_UP;break;case"Z_UP_TO_X_UP":s=M.Axis.Z_UP_TO_X_UP;break;case"X_UP_TO_Y_UP":s=M.Axis.X_UP_TO_Y_UP;break;case"Y_UP_TO_X_UP":s=M.Axis.Y_UP_TO_X_UP;break}return s==null?l:M.Matrix4.multiplyTransformation(l,s,l)}function v(l,r){var s;if(M.defined(l._root)&&M.defined(l._root.transform)&&r.transform){var c=M.Cartesian3.fromDegrees(r.x,r.y,r.z);s=M.Transforms.eastNorthUpToFixedFrame(c);var x=M.Matrix4.fromRotationTranslation(M.Matrix3.fromRotationZ(M.Math.toRadians(r.heading||0)));M.Matrix4.multiply(s,x,s),r.scale>0&&r.scale!==1&&M.Matrix4.multiplyByUniformScale(s,r.scale,s),r.axis&&(s=f(s,r.axis)),l._root.transform=s}else{var a=l.boundingSphere,i=M.Cartographic.fromCartesian(a.center),n=M.Cartesian3.fromRadians(i.longitude,i.latitude,0),u=M.Cartesian3.fromDegrees(r.x,r.y,r.z),g=M.Cartesian3.subtract(u,n,new M.Cartesian3);s=M.Matrix4.fromTranslation(g),l.modelMatrix=s}return s}function m(l,r){if(r.length>2){var s,c=[],x;switch(!![]){case r[0]instanceof M.Cartesian3:c=r,s=(0,b.ringIsClockwise)(c);break;case r[0]instanceof M.Cartographic:x=[];for(var a=0;a<r.length;a++){var i=r[a];c.push(M.Cartesian3.fromDegrees(i.longitude,i.latitude,i.height));var n=[2];n[0]=i.longitude,n[1]=i.latitude,x.push(n)}s=(0,b.ringIsClockwise)(x);break;default:for(var u=0;u<r.length;u++){var g=r[u];c.push(M.Cartesian3.fromDegrees(g[0],g[1],g[2]))}s=(0,b.ringIsClockwise)(r)}for(var d=[],y=c.length,p=o(l),w=s,S=0;S<y;++S){var R=(S+1)%y,B=new M.Cartesian3(0,0,10),k=void 0;w?k=M.Cartesian3.subtract(h(c[S],p),h(c[R],p),new M.Cartesian3):k=M.Cartesian3.subtract(h(c[R],p),h(c[S],p),new M.Cartesian3),k=M.Cartesian3.normalize(k,k);var P=M.Cartesian3.cross(k,B,new M.Cartesian3);P=M.Cartesian3.normalize(P,P),d.push(new M.ClippingPlane.fromPlane(M.Plane.fromPointNormal(h(c[S],p),P)))}l.clippingPlanes=new M.ClippingPlaneCollection({planes:d,edgeWidth:0,edgeColor:M.Color.RED,enabled:!![],unionClippingRegions:![]})}}function o(l){var r;if(l.root){var s=l.root.transform;s&&s.equals(M.Matrix4.IDENTITY)||!s?r=M.Transforms.eastNorthUpToFixedFrame(l.boundingSphere.center):r=l.root.computedTransform}else l.modelMatrix?r=l.modelMatrix:r=l.computeModelMatrix(M.JulianDate.now());return M.Matrix4.inverseTransformation(r,new M.Matrix4)}function h(l,r){return M.Matrix4.multiplyByPoint(r,l,new M.Cartesian3(0,0,0))}},195367:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var console=__webpack_require__(149500),_typeof=__webpack_require__(29870),_WeakMap=__webpack_require__(787879),_Object$getOwnPropertyDescriptor=__webpack_require__(183393),_interopRequireDefault=__webpack_require__(419534);Object.defineProperty(exports,"__esModule",{value:!![]}),exports.createMap=createMap,exports.initMap=initMap;var _stringify=_interopRequireDefault(__webpack_require__(66273)),Cesium=_interopRequireWildcard(__webpack_require__(187647)),_jquery=_interopRequireDefault(__webpack_require__(202692)),Util=_interopRequireWildcard(__webpack_require__(580823)),_ViewerEx=__webpack_require__(461805),_Layer=__webpack_require__(566828);function _getRequireWildcardCache(X){if(typeof _WeakMap!="function")return null;var z=new _WeakMap,e=new _WeakMap;return(_getRequireWildcardCache=function(F){return F?e:z})(X)}function _interopRequireWildcard(X,z){if(!z&&X&&X.__esModule)return X;if(X===null||_typeof(X)!=="object"&&typeof X!="function")return{default:X};var e=_getRequireWildcardCache(z);if(e&&e.has(X))return e.get(X);var E={},F=Object.defineProperty&&_Object$getOwnPropertyDescriptor;for(var O in X)if(O!=="default"&&Object.prototype.hasOwnProperty.call(X,O)){var M=F?_Object$getOwnPropertyDescriptor(X,O):null;M&&(M.get||M.set)?Object.defineProperty(E,O,M):E[O]=X[O]}return E.default=X,e&&e.set(X,E),E}function createMap(X){if(X.url)return _jquery.default.ajax({type:"get",dataType:"json",url:X.url,timeout:0,success:function(E){E.serverURL&&(X.serverURL=E.serverURL),X.configStyle&&X.configStyle(E);var F=initMap(E.map3d,X);X.success&&X.success(F,E,E)},error:function(){console.error(X.url+"\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25\uFF01"),Util.alert(X.url+"\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25\uFF01")}}),null;var z=initMap(X.data,X);return X.success&&X.success(z,X.data),z}function initMap(X,z){var e=z.id;window.localAndProjectPath=Util.getRootPath();var E=new Cesium.Clock,F={animation:![],timeline:![],fullscreenButton:!![],vrButton:![],geocoder:![],sceneModePicker:![],homeButton:!![],navigationHelpButton:!![],navigationInstructionsInitiallyVisible:![],infoBox:!![],selectionIndicator:![],shouldAnimate:!![],showRenderLoopErrors:!![],baseLayerPicker:![],contextmenu:!![],clockViewModel:new Cesium.ClockViewModel(E)};for(var O in X)X.hasOwnProperty(O)&&(F[O]=X[O]);if(F){for(var M in z)if(z.hasOwnProperty(M)){if(M==="id"||M==="success")continue;F[M]=z[M]}}Cesium.Ion&&(F.ionToken||F.defaultKey)&&(Cesium.Ion.defaultAccessToken=F.ionToken||F.defaultKey.CesiumionToken),Cesium.AnimationViewModel.defaultTicks=F.animationTicks||[.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600];var b;F.terrain&&F.terrain.visible?b=Util.getTerrainProvider(F.terrain,F.serverURL):b=Util.getEllipsoidTerrain(),F.terrainProvider=b;var L=![];if(F.baseLayerPicker){if(!F.imageryProviderViewModels&&F.basemaps&&F.basemaps.length>0){var T=getImageryProviderArr(F.basemaps);F.imageryProviderViewModels=T.imageryProviderViewModels,F.selectedImageryProviderViewModel=T.imageryProviderViewModels[T.index]}!F.terrainProviderViewModels&&(F.terrainProviderViewModels=getTerrainProviderViewModelsArr(F.terrain,F.serverURL),F.selectedTerrainProviderViewModel=F.terrainProviderViewModels[0],b instanceof Cesium.EllipsoidTerrainProvider&&(b=F.selectedTerrainProviderViewModel.creationCommand(),F.terrainProvider=b))}else F.imageryProvider==null&&(L=!![],F.imageryProvider=new Cesium.TileMapServiceImageryProvider({url:Cesium.buildModuleUrl("Assets/Textures/NaturalEarthII")}));var C=new Cesium.Viewer(e,F);if(L)for(var f=C.imageryLayers,v=f.length,m=0;m<v;m++){var o=f.get(0);f.remove(o,!![])}return delete F.geocoder,delete F.imageryProviderViewModels,delete F.selectedImageryProviderViewModel,delete F.terrainProviderViewModels,delete F.selectedTerrainProviderViewModel,delete F.terrainProvider,delete F.imageryProvider,C.shine=new _ViewerEx.ViewerEx(C,F),C.shine.terrainProvider=b,C.gisdata={config:C.shine.config},C}function getTerrainProvider(X,z){return X&&X.url&&(z&&(X.url=X.url.replace("$serverURL$",z)),X.url=X.url.replace("$hostname$",location.hostname).replace("$host$",location.host)),Util.getTerrainProvider(X)}function getImageryProviderArr(_0xfde793){var _0x5096f4=[],_0x31b3f7=0;window._temp_createImageryProvider=_Layer.Layer.createImageryProvider;for(var _0x281cdf=0;_0x281cdf<_0xfde793.length;_0x281cdf++){var _0x4689f9=_0xfde793[_0x281cdf];if(!(_0x4689f9.type==="group"&&_0x4689f9.layers==null)){_0x4689f9.visible&&(_0x31b3f7=_0x5096f4.length);var _0x35cafb="window._temp_basemaps"+_0x281cdf+" = function () {                        let item = "+(0,_stringify.default)(_0x4689f9)+'                        if (item.type == "group") {                            let arrVec = []                            for (let index = 0; index < item.layers.length; index++) {                                let temp = window._temp_createImageryProvider(item.layers[index])                                if (temp == null) continue                                arrVec.push(temp)                            }                            return arrVec                        }                        else {                            return window._temp_createImageryProvider(item)                        }                     }';eval(_0x35cafb);var _0x4817c9=new Cesium.ProviderViewModel({name:_0x4689f9.name||"\u672A\u547D\u540D",tooltip:_0x4689f9.name||"\u672A\u547D\u540D",iconUrl:_0x4689f9.icon||"",creationFunction:eval("window._temp_basemaps"+_0x281cdf)});_0x5096f4.push(_0x4817c9)}}return{imageryProviderViewModels:_0x5096f4,index:_0x31b3f7}}function getTerrainProviderViewModelsArr(X,z){return[new Cesium.ProviderViewModel({name:"\u4E2D\u56FD\u5730\u5F62(20\u7248\u5185\u7F51)",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"\u7531\u603B\u90E8\u5185\u7F51\u63D0\u4F9B\u7684\u5168\u56FD30\u7C73\u5730\u5F62\u670D\u52A1\uFF0C\u53EF\u5728\u603B\u90E8\u5185\u7F51\u6216VPN\u6A21\u5F0F\u4E0B\u8BBF\u95EE",category:"",creationFunction:function(){return getTerrainProvider({url:"http://192.168.20.117:8087/static/DEM/china_TIF"},z)}}),new Cesium.ProviderViewModel({name:"\u4E2D\u56FD\u5730\u5F62(20\u7248\u5916\u7F51)",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"\u7531\u603B\u90E8\u63D0\u4F9B\u7684\u5168\u56FD30\u7C73\u5730\u5F62\u670D\u52A1\uFF0C\u5B58\u5728\u4E00\u5B9A\u7684\u4E0D\u7A33\u5B9A\u6027",category:"",creationFunction:function(){return getTerrainProvider({url:"http://ework.gisquest.com:20129/internetdata/china2020dem"},z)}}),new Cesium.ProviderViewModel({name:"\u5168\u7403\u5730\u5F62",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"Cesium\u5B98\u65B9 \u63D0\u4F9B\u7684\u9AD8\u5206\u8FA8\u7387\u5168\u7403\u5730\u5F62",category:"",creationFunction:function(){return Util.getTerrainProvider({type:"ion"})}}),new Cesium.ProviderViewModel({name:"ESRI\u5730\u5F62",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"\u7531ESRI\u5728\u7EBF\u63D0\u4F9B\u7684ArcGISTiledElevationTerrainProvider",category:"",creationFunction:function(){return Util.getTerrainProvider({type:"arcgis",url:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"})}}),new Cesium.ProviderViewModel({name:"\u65E0\u5730\u5F62",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84\u6807\u51C6\u692D\u7403\uFF0C\u5373 EPSG:4326",category:"",creationFunction:function(){return Util.getEllipsoidTerrain()}})]}},186712:function(X,z,e){"use strict";var E=e(29870),F=e(985208),O=e(659791),M=e(22466),b=e(183393),L=e(105077),T=e(787879),C=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Measure=void 0;var f=C(e(705146)),v=C(e(22466)),m=C(e(53267)),o=C(e(581806)),h=C(e(669033)),l=C(e(869257)),r=C(e(543389)),s=C(e(342579)),c=C(e(636583)),x=C(e(99245)),a=k(e(187647)),i=k(e(469973)),n=k(e(721617)),u=k(e(580823)),g=e(642786),d=e(792672),y=e(171746),p=e(259039),w=k(e(496535)),S=k(e(669471)),R=k(e(10614));function B(I){if(typeof T!="function")return null;var G=new T,W=new T;return(B=function(H){return H?W:G})(I)}function k(I,G){if(!G&&I&&I.__esModule)return I;if(I===null||E(I)!=="object"&&typeof I!="function")return{default:I};var W=B(G);if(W&&W.has(I))return W.get(I);var Z={},H=Object.defineProperty&&b;for(var U in I)if(U!=="default"&&Object.prototype.hasOwnProperty.call(I,U)){var V=H?b(I,U):null;V&&(V.get||V.set)?Object.defineProperty(Z,U,V):Z[U]=I[U]}return Z.default=I,W&&W.set(I,Z),Z}function P(I,G){var W=F(I);if(O){var Z=O(I);G&&(Z=M(Z).call(Z,function(H){return b(I,H).enumerable})),W.push.apply(W,Z)}return W}function D(I){for(var G=1;G<arguments.length;G++){var W=arguments[G]!=null?arguments[G]:{};G%2?P(Object(W),!0).forEach(function(Z){(0,r.default)(I,Z,W[Z])}):L?Object.defineProperties(I,L(W)):P(Object(W)).forEach(function(Z){Object.defineProperty(I,Z,b(W,Z))})}return I}var A=a.Cartesian3,N=function(G){var W=G.viewer,Z=new p.PointPopup(W),H={color:"#ffffff",font_family:"\u6977\u4F53",font_size:20,border:!![],border_color:"#000000",border_width:3,background:!![],background_color:"#000000",background_opacity:.5,scaleByDistance:!![],scaleByDistance_far:8e5,scaleByDistance_farValue:.5,scaleByDistance_near:1e3,scaleByDistance_nearValue:1,pixelOffset:[0,-15],disableDepthTestDistance:Number.POSITIVE_INFINITY},U=S.style2Entity({lineType:"dash",color:"red",outlineOpacity:"0",width:2}),V=S.style2Entity({color:"red",width:2});if(a.defined(G.label))for(var Y in G.label)Object.hasOwnProperty.call(G.label,Y)&&(H[Y]=G.label[Y]);var $="",K={visible:!![],id:"measureLayer",type:"geojson-draw"},J=W.shine.getLayer(K.id,"id");!J&&W.shine.addLayer(K);var Q=new g.Draw(W,{name:G.name||"measure",hasEdit:!![],removeScreenSpaceEvent:G.removeScreenSpaceEvent});Q.setEditLayer(K.id);var et;Q.on(i.DrawAddPoint,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Lt.showAddPointLength(et);break;case"area":Ct.showAddPointLength(et);break;case"volume":jt.showAddPointLength(et);break;case"height":ft.showAddPointLength(et);break;case"super_height":gt.showAddPointLength(et);break;case"angle":dt.showAddPointLength(et);break}}),Q.on(i.DrawRemovePoint,function(ot){switch($=ot.entity.attribute.attr.thisType,$){case"length":case"section":Lt.showRemoveLastPointLength(ot);break;case"area":Ct.showRemoveLastPointLength(ot);break;case"volume":jt.showRemoveLastPointLength(ot);break;case"height":ft.showRemoveLastPointLength(ot);break;case"super_height":gt.showRemoveLastPointLength(ot);break;case"angle":dt.showRemoveLastPointLength(ot);break}}),Q.on(i.DrawMouseMove,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Lt.showMoveDrawing(et);break;case"area":Ct.showMoveDrawing(et);break;case"volume":jt.showMoveDrawing(et);break;case"height":ft.showMoveDrawing(et);break;case"super_height":gt.showMoveDrawing(et);break;case"angle":dt.showMoveDrawing(et);break}}),Q.on(i.DrawCreated,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Lt.showDrawEnd(et);break;case"area":Ct.showDrawEnd(et);break;case"volume":jt.showDrawEnd(et);break;case"height":ft.showDrawEnd(et);break;case"super_height":gt.showDrawEnd(et);break;case"angle":dt.showDrawEnd(et);break;case"point":lt.showDrawEnd(et);break}et=null}),Q.on(i.EditMovePoint,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Lt.EditPoint(et);break;case"area":Ct.EditPoint(et);break;case"height":ft.EditPoint(et);break;case"point":lt.showDrawEnd(et);break}et=null}),Q.on(i.EditRemovePoint,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Lt.EditPoint(et);break;case"area":Ct.EditPoint(et);break;case"height":ft.EditPoint(et);break;case"point":lt.showDrawEnd(et);break}et=null}),Q.on(i.EditStart,function(ot){var it=ot.entity;$=ot.entity.attribute.attr.thisType;var yt=ot.entity.attribute.detailedMeasureType;switch($){case"length":{var Ot=Q.getPositions(ot.entity);if(Ot.length===2&&yt==="ctgDis"){var St=nt(it,Ot),Gt=(0,x.default)(St,3),Ut=Gt[0],Kt=Gt[1],Jt=Gt[2];it.hDragger=R.createDragger(st,{type:R.PointType.MoveHeight,position:A.midpoint(Kt,Jt,new A),onDrag:function(ie,oe){var he=a.Cartographic.fromCartesian(oe).height;it.dis=(he-Ut)*3,nt(it,Ot)}})}}break;case"default":break}}),Q.on(i.EditStop,function(ot){var it=ot.entity;$=ot.entity.attribute.attr.thisType;var yt=ot.entity.attribute.detailedMeasureType;switch($){case"length":yt==="ctgDis"&&(st.entities.remove(it.hDragger),it.hDragger=null);break;case"default":break}});function nt(ot,it){var yt,Ot,St,Gt,Ut=ot.dis||A.distance.apply(A,(0,f.default)(yt=(0,c.default)(it)).call(yt,[new A])),Kt=a.Cartographic.fromCartesian(it[0]),Jt=a.Cartographic.fromCartesian(it[1]);if(Ot=Math.max(Kt.height,Jt.height),St=A.fromRadians(Kt.longitude,Kt.latitude,Ot+Ut/3),Gt=A.fromRadians(Jt.longitude,Jt.latitude,Ot+Ut/3),ot.l0){ot.l0.polyline.positions=[it[0],St],ot.l1.polyline.positions=[it[1],Gt],ot.l2.polyline.positions=[St,Gt];var te=A.distance(St,Gt,new A);ot.hLabel.label.text="\u5E73\u9762\u95F4\u8DDD\uFF1A"+u.formatLength(te),ot.hLabel.position=A.midpoint(St,Gt,new A)}return ot.hDragger&&(ot.hDragger.position=A.midpoint(St,Gt,new A)),[Ot,St,Gt]}var st=Q.getDataSource();function ut(ot){Rt(),$="length",ot=ot||{},ot.type=$,Object.hasOwnProperty.call(ot,"terrain")||(ot.terrain=!![]),Lt.start(ot)}function rt(){Q.endDraw()}function ht(ot){Rt(),$="section",ot=ot||{},ot.type=$,ot.terrain=!![],ot.splitNum=a.defaultValue(ot.splitNum,6),Lt.start(ot)}function Pt(ot){Rt(),$="area",ot=ot||{},ot.type=$,Ct.start(ot)}function wt(ot){Rt(),$="volume",ot=ot||{},ot.type=$,jt.start(ot)}function Mt(ot){Rt(),ot=ot||{},Object.hasOwnProperty.call(ot,"isSuper")&&!ot.isSuper?($="height",ot.type=$,ft.start(ot)):($="super_height",ot.type=$,gt.start(ot))}function Ft(ot){Rt(),$="angle",ot=ot||{},ot.type=$,dt.start(ot)}function Dt(ot){Rt(),$="point",ot=ot||{},ot.type=$,lt.start(ot)}function Rt(){Lt.clearLastNoEnd(),Ct.clearLastNoEnd(),jt.clearLastNoEnd(),ft.clearLastNoEnd(),gt.clearLastNoEnd(),dt.clearLastNoEnd(),lt.clearLastNoEnd(),Q.stopDraw()}function Tt(){if(et!=null){switch($){case"length":case"section":Lt.showMoveDrawing(et);break;case"area":Ct.showMoveDrawing(et);break;case"height":ft.showMoveDrawing(et);break;case"super_height":gt.showMoveDrawing(et);break;case"angle":dt.showMoveDrawing(et);break}Q.endDraw(),et=null}}function mt(){$="",Rt(),Q.clearDraw()}function Nt(ot){Rt();var it=st.entities.getById(ot);it&&Q.deleteEntity(it)}function ct(ot){var it,yt,Ot=this,St=ot==null||(it=ot._id)===null||it===void 0?void 0:it.replace(/suffix\S*/,""),Gt=st==null?void 0:(0,v.default)(yt=(0,m.default)(st.entities)).call(yt,function(Ut){var Kt;return(0,s.default)(this,Ot),(0,o.default)(Kt=Ut.id).call(Kt,St)&&Ut.id!==St}.bind(this));return Gt}function vt(ot,it){var yt=(0,m.default)(st.entities);ot==="area"?Ct.options.unit=it:Lt.options.unit=it;for(var Ot in yt){var St=yt[Ot];if(St.label&&St.isMarsMeasureLabel&&St.attribute&&St.attribute.value){if(St.attribute.drawtype!==ot)continue;ot==="area"?St.label.text._value=(St.attribute.textEx||"")+u.formatArea(St.attribute.value,it):St._label.text._value=(St.attribute.textEx||"")+u.formatLength(St.attribute.value,it)}}}var Lt={options:null,arrLables:[],totalLable:null,disTerrainScale:1.2,clearLastNoEnd:function(){var it=this,yt=ct(this.totalLable);yt.forEach(function(Ot){(0,s.default)(this,it),st.entities.remove(Ot)}.bind(this)),this.totalLable=null,this.arrLables=[]},start:function(it){this.options=it;var yt=this.options.terrain?"ctgDis":"spatialDis";this.en=Q.startDraw({drawtype:"polyline",kzedit:![],config:{addHeight:it.addHeight},attr:{thisType:this.options.type},detailedMeasureType:yt,style:it.style||{color:"#FFFF00",width:3,clampToGround:this.options.type==="section"||this.options.terrain,depthFailMaterial:new a.Color.fromCssColorString("#FFFF00").withAlpha(.4)}});var Ot=n.style2Entity(H,{horizontalOrigin:a.HorizontalOrigin.LEFT,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_label",mark311:Q.id,label:Ot,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),this.arrLables=[]},showAddPointLength:function(it){var yt=Q.getPositions(it),Ot=n.style2Entity(H,{horizontalOrigin:a.HorizontalOrigin.LEFT,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:!![]}),St=st.entities.add({id:it.id+"suffix_"+yt.length+"label",mark311:Q.id,position:yt[yt.length-1],label:Ot,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}});if(yt.length===1)St.label.text="\u8D77\u70B9";else{var Gt=u.getLength(yt),Ut=u.formatLength(Gt,this.options.unit);St.label.text=Ut,St.attribute.value=Gt,u.getLength([yt[yt.length-2],yt[yt.length-1]])<5&&(St.show=![])}this.arrLables.push(St)},showRemoveLastPointLength:function(it){var yt=this.arrLables.pop();st.entities.remove(yt),this.showMoveDrawing(it.entity),this.totalLable.position=it.position},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length<2){this.totalLable.label.show=![];return}var Ot=u.getLength(yt),St=u.formatLength(Ot,this.options.unit);W.paid?this.totalLable.position=yt[yt.length-2]:this.totalLable.position=yt[yt.length-1],this.totalLable.label.text="\u603B\u957F:"+St,this.totalLable.label.show=!![],this.totalLable.attribute.value=Ot,this.totalLable.attribute.textEx="\u603B\u957F:",this.options.calback&&this.options.calback(St,Ot)},showDrawEnd:function(it){var yt=Q.getPositions(it),Ot=this.arrLables.length-yt.length;if(Ot>=0){for(var St,Gt=this.arrLables.length-1;Gt>=yt.length-1;Gt--)st.entities.remove(this.arrLables[Gt]);(0,h.default)(St=this.arrLables).call(St,yt.length-1,Ot+1)}if(it._totalLable=this.totalLable,it._arrLables=this.arrLables,this.totalLable=null,this.arrLables=[],it.polyline!=null){this.options.type==="section"?this.updateSectionForTerrain(it):this.options.terrain?this.updateLengthForTerrain(it):this.EditPoint(it);var Ut=it._totalLable.attribute.value,Kt=u.formatLength(Ut,this.options.unit);this.options.calbackresult&&this.options.calbackresult(Kt,it);var Jt=it.attribute.detailedMeasureType;if(yt.length===2&&Jt==="ctgDis"){if(!st.entities.getById(it.id+"suffix_l0")){it.l0=st.entities.add({id:it.id+"suffix_l0",polyline:D(D({},U),{},{depthFailMaterial:U.material})}),it.l1=st.entities.add({id:it.id+"suffix_l1",polyline:D(D({},U),{},{depthFailMaterial:U.material})}),it.l2=st.entities.add({id:it.id+"suffix_l2",polyline:D(D({},V),{},{depthFailMaterial:V.material})});var te=n.style2Entity(H,{distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:!![]});it.hLabel=st.entities.add({id:it.id+"suffix_hLabel",label:te})}nt(it,yt)}}},EditPoint:function(it){var yt=Q.getPositions(it),Ot=u.getLength(yt),St=u.formatLength(Ot,this.options.unit);it._totalLable.show=![];for(var Gt=0;Gt<it._positions_draw.length;Gt++){it._arrLables[Gt]&&(it._arrLables[Gt].show=![]);var Ut=n.style2Entity(H,{horizontalOrigin:a.HorizontalOrigin.LEFT,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),verticalOrigin:a.VerticalOrigin.BOTTOM,show:!![]}),Kt=st.entities.add({id:it.id+"suffix_"+a.createGuid()+"label",mark311:Q.id,position:yt[Gt],label:Ut,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),Jt=[];if(Gt===0)Kt.label.text="\u8D77\u70B9",this.arrLables.push(Kt);else if(Gt===it._positions_draw.length-1){Kt.label.text="\u603B\u957F:"+St;var te=u.getLength(yt);Kt.attribute.value=te,this.totalLable=Kt}else{Jt.push(yt[Gt-1]),Jt.push(yt[Gt]);var ie=u.getLength(Jt);Kt.attribute.value=ie,Kt.label.text=u.formatLength(ie,this.options.unit),this.arrLables.push(Kt)}}it._totalLable=this.totalLable,it._arrLables=this.arrLables,this.totalLable=null,this.arrLables=[];var oe=it.attribute.detailedMeasureType;if(oe==="ctgDis")if(yt.length===2){if(!st.entities.getById(it.id+"suffix_l0")){it.l0=st.entities.add({id:it.id+"suffix_l0",polyline:D(D({},U),{},{depthFailMaterial:U.material})}),it.l1=st.entities.add({id:it.id+"suffix_l1",polyline:D(D({},U),{},{depthFailMaterial:U.material})}),it.l2=st.entities.add({id:it.id+"suffix_l2",polyline:D(D({},V),{},{depthFailMaterial:V.material})});var he=n.style2Entity(H,{distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:!![]});it.hLabel=st.entities.add({id:it.id+"suffix_hLabel",label:he})}nt(it,yt),it.hDragger&&(it.hDragger.show=!![])}else st.entities.getById(it.id+"suffix_l0")&&(st.entities.removeById(it.id+"suffix_l0"),st.entities.removeById(it.id+"suffix_l1"),st.entities.removeById(it.id+"suffix_l2"),st.entities.removeById(it.id+"suffix_hLabel"),it.hDragger&&(it.hDragger.show=![]));this.options.type==="section"?this.updateSectionForTerrain(it):this.options.terrain&&this.updateLengthForTerrain(it),this.options.calback&&this.options.calback(St,Ot),this.options.calbackresult&&this.options.calbackresult(St,it)},updateLengthForTerrain:function(it){var yt=this,Ot=it.polyline.positions.getValue(W.clock.currentTime),St=it._arrLables,Gt=it._totalLable,Ut=Gt&&Gt.attribute&&Gt.attribute.unit;this.options.onStart&&this.options.onStart();var Kt=0,Jt=0;function te(){if(Kt++,Kt>=Ot.length&&Gt){var ie=u.formatLength(Jt,Ut);Gt.label.text="\u603B\u957F:"+ie,Gt.attribute.value=Jt,yt.options.calback&&yt.options.calback(ie,Jt),yt.options.calbackresult&&yt.options.calbackresult(ie,it),yt.options.onStop&&yt.options.onStop();return}var oe=[Ot[Kt-1],Ot[Kt]];(0,d.terrainPolyline)({viewer:W,positions:oe,splitNum:yt.options.splitNum,calback:function(ne,ce){var ge=u.getLength(ne);ce&&(ge=ge*yt.disTerrainScale);var Me=St[Kt];if(Me){var It=u.formatLength(ge,Ut);Me.label.text=It,Me.attribute.value=ge}Jt+=ge,te()}})}te()},updateSectionForTerrain:function(it){var yt=it.polyline.positions.getValue(W.clock.currentTime);if(yt.length<2)return;var Ot=it._arrLables,St=it._totalLable,Gt=St&&St.attribute&&St.attribute.unit,Ut=0,Kt=[],Jt=0,te=[],ie=[],oe=[],he=[];this.options.onStart&&this.options.onStart();var ne=this;function ce(){Ut++;var ge=[yt[Ut-1],yt[Ut]];(0,d.terrainPolyline)({viewer:W,positions:ge,splitNum:ne.options.splitNum,calback:function(It,Wt){Wt?Ut===1?Kt=(0,f.default)(Kt).call(Kt,ge):Kt=(0,f.default)(Kt).call(Kt,[yt[Ut]]):Kt=(0,f.default)(Kt).call(Kt,It);for(var _t=a.Cartographic.fromCartesian(yt[Ut-1]).height,ee=a.Cartographic.fromCartesian(yt[Ut]).height,re=(ee-_t)/It.length,de=0;de<It.length;de++){de!==0&&(Jt+=A.distance(It[de],It[de-1])),te.push(Number(Jt.toFixed(1)));var Se=(0,d.formatPosition)(It[de]);ie.push(Se.z),he.push(Se);var Pe=Number((_t+re*de).toFixed(1));oe.push(Pe)}if(Ut>=yt.length-1){var Le=u.getLength(Kt),Ie=u.formatLength(Le,Gt);St&&(St.label.text="\u603B\u957F:"+Ie,St.attribute.value=Le),ne.options.calback&&ne.options.calback({distancestr:Ie,distance:Le,arrLen:te,arrLX:oe,arrHB:ie,arrPoint:he,id:it?.id}),ne.options.onStop&&ne.options.onStop()}else{var pe=u.getLength(It),Oe=u.formatLength(pe,Gt),Fe=Ot[Ut];Fe.label.text=Oe,Fe.attribute.value=pe,ce()}}})}ce()}},Ct={options:null,totalLable:null,clearLastNoEnd:function(){this.totalLable!=null&&st.entities.remove(this.totalLable),this.totalLable=null},start:function(it){this.options=it,this.en=Q.startDraw({drawtype:"polygon",kzedit:![],detailedMeasureType:"measureArea",attr:{thisType:this.options.type},style:it.style||{color:"#00fff2",outline:!![],outlineColor:"#fafa5a",outlineWidth:1,opacity:.4,clampToGround:!![]}});var yt=n.style2Entity(D(D({},H),{},{clampToGround:!![]}),{horizontalOrigin:a.HorizontalOrigin.CENTER,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_label",mark311:Q.id,label:yt,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}})},showAddPointLength:function(it){this.showMoveDrawing(it)},showRemoveLastPointLength:function(it){var yt=Q.getPositions(it.entity);yt.length<3&&(this.totalLable.label.show=![])},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length<3){this.totalLable.label.show=![];return}var Ot=u.getArea(yt),St=u.formatArea(Ot,this.options.unit),Gt=(0,d.centerOfMass)(yt);this.totalLable.position=Gt,this.totalLable.label.text="\u9762\u79EF:"+St,this.totalLable.label.show=!![],this.totalLable.attribute.value=Ot,this.totalLable.attribute.textEx="\u9762\u79EF:",this.options.calback&&this.options.calback(St,Ot)},showDrawEnd:function(it){if(it.polygon!=null){it._totalLable=this.totalLable,this.totalLable=null;var yt=it._totalLable.attribute.value,Ot=u.formatArea(yt,this.options.unit);this.options.calbackresult&&this.options.calbackresult(Ot,it)}},EditPoint:function(it){var yt=Q.getPositions(it),Ot=u.getArea(yt),St=u.formatArea(Ot,this.options.unit),Gt=(0,d.centerOfMass)(yt);it._totalLable.position._value=Gt,it._totalLable.label.text="\u9762\u79EF:"+St,it._totalLable.label.show=!![],it._totalLable.attribute.value=Ot,it._totalLable.attribute.textEx="\u9762\u79EF:",this.options.calback&&this.options.calback(St,Ot),this.options.calbackresult&&this.options.calbackresult(St,it)}},jt={options:null,totalLable:null,prevEntity:null,clearLastNoEnd:function(){this.totalLable!=null&&st.entities.remove(this.totalLable),this.totalLable=null,this.prevEntity!=null&&st.entities.remove(this.prevEntity),this.prevEntity=null},start:function(it){this.options=it;var yt=n.style2Entity(H,{horizontalOrigin:a.HorizontalOrigin.CENTER,verticalOrigin:a.VerticalOrigin.BOTTOM,show:![]});this.totalLable=st.entities.add({label:yt,mark311:Q.id,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),Q.startDraw({drawtype:"polygon",kzedit:![],style:it.style||{color:"#00fff2",outline:!![],outlineColor:"#fafa5a",outlineWidth:1,opacity:.4,clampToGround:!![]}})},showAddPointLength:function(){},showRemoveLastPointLength:function(){},showMoveDrawing:function(){},showDrawEnd:function(it){if(it.polygon!=null){var yt=w.getPositions(it),Ot=this.computeCutVolume(yt),St=Ot.maxHeight,Gt=Ot.totalCutVolume,Ut=Gt.toFixed(2)+"\u7ACB\u65B9\u7C73",Kt=(0,d.centerOfMass)(yt,St+10);this.totalLable.position=Kt,this.totalLable.label.text="\u6316\u65B9\u4F53\u79EF:"+Ut,this.totalLable.label.show=!![],this.totalLable.attribute.value=Gt,this.totalLable.attribute.textEx="\u6316\u65B9\u4F53\u79EF:";var Jt="";this.options.calback&&this.options.calback(Jt,Gt),st.entities.remove(it),it=st.entities.add({mark311:Q.id,polygon:{hierarchy:{positions:yt},extrudedHeight:St,closeTop:![],closeBottom:![],material:new a.Color.fromCssColorString("#00fff2").withAlpha(.5),outline:!![],outlineColor:new a.Color.fromCssColorString("#fafa5a").withAlpha(.4),outlineWidth:1}}),it._totalLable=this.totalLable,this.totalLable=null}},computeCutVolume:function(it){for(var yt=15e3,Ot=0;Ot<it.length;Ot++){var St=a.Cartographic.fromCartesian(it[Ot]),Gt=W.scene.globe.getHeight(St);yt>Gt&&(yt=Gt)}var Ut=Math.PI/Math.pow(2,11);Ut=Ut/64;for(var Kt=new a.PolygonGeometry.fromPositions({positions:it,vertexFormat:a.PerInstanceColorAppearance.FLAT_VERTEX_FORMAT,granularity:Ut}),Jt=new a.PolygonGeometry.createGeometry(Kt),te=0,ie=0,oe,he,ne,ce,ge,Me,It,Wt,_t,ee,re,de=0;de<Jt.indices.length;de+=3){oe=Jt.indices[de],he=Jt.indices[de+1],ne=Jt.indices[de+2],_t=new A((0,m.default)(Jt.attributes.position)[oe*3],(0,m.default)(Jt.attributes.position)[oe*3+1],(0,m.default)(Jt.attributes.position)[oe*3+2]),ee=a.Cartographic.fromCartesian(_t),ce=W.scene.globe.getHeight(ee),It=A.fromRadians(ee.longitude,ee.latitude,0),ie<ce&&(ie=ce),_t=new A((0,m.default)(Jt.attributes.position)[he*3],(0,m.default)(Jt.attributes.position)[he*3+1],(0,m.default)(Jt.attributes.position)[he*3+2]),ee=a.Cartographic.fromCartesian(_t),ge=W.scene.globe.getHeight(ee);var Se=A.fromRadians(ee.longitude,ee.latitude,0);ie<ge&&(ie=ge),_t=new A((0,m.default)(Jt.attributes.position)[ne*3],(0,m.default)(Jt.attributes.position)[ne*3+1],(0,m.default)(Jt.attributes.position)[ne*3+2]),ee=a.Cartographic.fromCartesian(_t),Me=W.scene.globe.getHeight(ee),Wt=A.fromRadians(ee.longitude,ee.latitude,0),ie<Me&&(ie=Me),re=this.computeAreaOfTriangle(It,Se,Wt),te=te+re*(ce-yt+ge-yt+Me-yt)/3}return{maxHeight:ie,totalCutVolume:te}},computeAreaOfTriangle:function(it,yt,Ot){var St=A.distance(it,yt),Gt=A.distance(yt,Ot),Ut=A.distance(Ot,it),Kt=(St+Gt+Ut)/2;return Math.sqrt(Kt*(Kt-St)*(Kt-Gt)*(Kt-Ut))}},zt,Yt,Zt,ft={options:null,totalLable:null,_arrLables:null,exline1:null,exline2:null,clearLastNoEnd:function(){var it=this;if(this.totalLable!=null){var yt=ct(this.totalLable);yt.forEach(function(Ot){(0,s.default)(this,it),st.entities.remove(Ot)}.bind(this)),this.exline1=this.exline2=this.exline3=null,this.totalLable=null}},start:function(it){this.options=it,this.en=Q.startDraw({drawtype:"polyline",kzedit:![],config:{maxPointNum:2},detailedMeasureType:"measureHeight",attr:{thisType:this.options.type},style:it.style||{lineType:"dash",color:"#FFFF00",outlineOpacity:"0",width:3,clampToGround:![],depthFailMaterial:new a.Color.fromCssColorString("#FFFF00").withAlpha(.4)}});var yt=n.style2Entity(H,{pixelOffset:new a.Cartesian2(0,0),distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_label",mark311:Q.id,label:yt,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),this.exline1=st.entities.add({id:this.en.id+"suffix_exline1",polyline:D(D({},U),{},{depthFailMaterial:U.material})}),this.exline2=st.entities.add({id:this.en.id+"suffix_exline2",polyline:D(D({},U),{},{depthFailMaterial:U.material})}),this.exline3=st.entities.add({id:this.en.id+"suffix_exline3",polyline:D(D({},V),{},{depthFailMaterial:V.material})})},showAddPointLength:function(it){this.showMoveDrawing(it)},showRemoveLastPointLength:function(){this.totalLable&&(this.totalLable.label.show=![],this.exline1.polyline.show=this.exline2.polyline.show=this.exline3.polyline.show=![])},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length<2){this.totalLable.label.show=![],this.exline1.polyline.show=this.exline2.polyline.show=this.exline3.polyline.show=![],zt=Yt=Zt=null;return}!zt&&(zt=a.Transforms.eastNorthUpToFixedFrame(yt[0]),Yt=a.Matrix4.inverse(zt,new a.Matrix4),Zt=function(Me){return a.Matrix4.multiplyByPoint(Yt,Me,new A)});var Ot=a.Cartographic.fromCartesian(yt[0]),St=a.Cartographic.fromCartesian(yt[1]),Gt=Math.abs(St.height-Ot.height),Ut=u.formatLength(Gt,this.options.unit);this.totalLable.label.text="\u9AD8\u5EA6\u5DEE:"+Ut,this.totalLable.label.show=!![],this.totalLable.attribute.value=Gt,this.totalLable.attribute.textEx="\u9AD8\u5EA6\u5DEE:";var Kt,Jt,te,ie,oe;Jt=Zt(yt[1]);var he=A.magnitude(Jt)/5,ne=A.normalize(new A(-Jt.x,-Jt.y,0),new A);te=A.multiplyByScalar(ne,he,new A),te.z=Jt.z,Kt=A.multiplyByScalar(ne,he,new A),ie=A.midpoint(new A(0,0,Jt.z),te,new A),oe=new A(Kt.x/2,Kt.y/2,0),Kt=a.Matrix4.multiplyByPoint(zt,Kt,new A),te=a.Matrix4.multiplyByPoint(zt,te,new A),ie=a.Matrix4.multiplyByPoint(zt,ie,new A),oe=a.Matrix4.multiplyByPoint(zt,oe,new A),this.exline1.polyline.show=this.exline2.polyline.show=this.exline3.polyline.show=!![],this.exline1.polyline.positions=[yt[0],Kt],this.exline2.polyline.positions=[yt[1],te],this.exline3.polyline.positions=[ie,oe];var ce=A.midpoint(ie,oe,new A);this.totalLable.position=ce,this.options.calback&&this.options.calback(Ut,Gt)},showDrawEnd:function(it){it._totalLable=this.totalLable,it._arrLables=[this.exline1,this.exline2,this.exline3],this.totalLable=null,this.exline1=this.exline2=this.exline3=null;var yt=Math.abs(it._totalLable.attribute.value),Ot=u.formatLength(yt,this.options.unit);this.options.calbackresult&&this.options.calbackresult(Ot,it)},EditPoint:function(it){var yt=Q.getPositions(it),Ot=a.Cartographic.fromCartesian(yt[0]),St=a.Cartographic.fromCartesian(yt[1]),Gt=Math.abs(St.height-Ot.height),Ut=u.formatLength(Gt,this.options.unit);it._totalLable.label.text="\u9AD8\u5EA6\u5DEE:"+Ut,it._totalLable.label.show=!![],it._totalLable.attribute.value=Gt,it._totalLable.attribute.textEx="\u9AD8\u5EA6\u5DEE:",zt=a.Transforms.eastNorthUpToFixedFrame(yt[0]),Yt=a.Matrix4.inverse(zt,new a.Matrix4),Zt=function(Me){return a.Matrix4.multiplyByPoint(Yt,Me,new A)};var Kt,Jt,te,ie,oe;Jt=Zt(yt[1]);var he=A.magnitude(Jt)/5,ne=A.normalize(new A(-Jt.x,-Jt.y,0),new A);te=A.multiplyByScalar(ne,he,new A),te.z=Jt.z,Kt=A.multiplyByScalar(ne,he,new A),ie=A.midpoint(new A(0,0,Jt.z),te,new A),oe=new A(Kt.x/2,Kt.y/2,0),Kt=a.Matrix4.multiplyByPoint(zt,Kt,new A),te=a.Matrix4.multiplyByPoint(zt,te,new A),ie=a.Matrix4.multiplyByPoint(zt,ie,new A),oe=a.Matrix4.multiplyByPoint(zt,oe,new A),it._arrLables[0].polyline.positions=[yt[0],Kt],it._arrLables[1].polyline.positions=[yt[1],te],it._arrLables[2].polyline.positions=[ie,oe];var ce=A.midpoint(ie,oe,new A);it._totalLable.position=ce,this.options.calback&&this.options.calback(Ut,Gt),this.options.calbackresult&&this.options.calbackresult(Ut,it)}},gt={options:null,totalLable:null,xLable:null,hLable:null,exline:null,clearLastNoEnd:function(){var it=this,yt=ct(this.totalLable);yt.forEach(function(Ot){(0,s.default)(this,it),st.entities.remove(Ot)}.bind(this)),this.totalLable=null,this.xLable=null,this.hLable=null},start:function(it){this.options=it,this.en=Q.startDraw({drawtype:"polyline",kzedit:!![],config:{maxPointNum:2},detailedMeasureType:"superHeight",attr:{thisType:this.options.type},style:it.style||{color:"#FFFF00",width:3,clampToGround:![],depthFailMaterial:new a.Color.fromCssColorString("#FFFF00").withAlpha(.4)}});var yt=n.style2Entity(H,{horizontalOrigin:a.HorizontalOrigin.RIGHT,verticalOrigin:a.VerticalOrigin.CENTER,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_total_label",mark311:Q.id,label:yt,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}});var Ot=n.style2Entity(H,{horizontalOrigin:a.HorizontalOrigin.CENTER,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});Ot.pixelOffset=new a.Cartesian2(0,0),this.xLable=st.entities.add({id:this.en.id+"suffix_x_label",mark311:Q.id,label:Ot,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),this.hLable=st.entities.add({id:this.en.id+"suffix_h_label",mark311:Q.id,label:Ot,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),Q._hasEdit=![]},showAddPointLength:function(it){var yt=Q.getPositions(it);if(yt.length===4){var Ot=yt[3].clone();yt.pop(),yt.pop(),yt.pop(),yt.push(Ot)}if(yt.length===2){var St=this.getZHeightPosition(yt[0],yt[1]),Gt=this.getHDistance(yt[0],yt[1]);Gt>3&&(yt.push(St),yt.push(yt[0]))}this.showSuperHeight(yt)},showRemoveLastPointLength:function(it){var yt=Q.getPositions(it.entity);yt.length===2&&(yt.pop(),yt.pop(),this.totalLable.label.show=![],this.hLable.label.show=![],this.xLable.label.show=![])},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length===4){var Ot=yt[3].clone();yt.pop(),yt.pop(),yt.pop(),yt.push(Ot)}if(yt.length===2){var St=this.getZHeightPosition(yt[0],yt[1]),Gt=this.getHDistance(yt[0],yt[1]);Gt>3&&(yt.push(St),yt.push(yt[0]))}this.showSuperHeight(yt)},showDrawEnd:function(it){it._arrLables=[this.totalLable,this.hLable,this.xLable],it._exline=this.exline,this.totalLable=null,this.hLable=null,this.xLable=null,this.exline=null;var yt=u.formatLength(it._arrLables[0].attribute.value,this.options.unit);this.options.calbackresult&&this.options.calbackresult(yt,it),Q._hasEdit=!![]},showSuperHeight:function(it){var yt,Ot,St,Gt;if(it.length===4){var Ut=A.midpoint(it[0],it[1],new A),Kt,Jt,te=a.Cartographic.fromCartesian(it[0]),ie=a.Cartographic.fromCartesian(it[1]),oe=a.Cartographic.fromCartesian(it[2]),he=ie.height-oe.height;Gt=ie.height-te.height,St=A.distance(it[0],it[1]);var ne=A.distance(it[0],it[2]),ce=A.distance(it[1],it[2]),ge=Math.min(ne,ce),Me=A.normalize(A.subtract(it[0],it[2],new A),new A),It=A.normalize(A.subtract(it[1],it[2],new A),new A),Wt=A.add(it[2],A.multiplyByScalar(Me,ge/8,new A),new A),_t=A.add(it[2],A.multiplyByScalar(It,ge/8,new A),new A),ee=A.add(Wt,A.multiplyByScalar(It,ge/8,new A),new A);this.exline?this.exline.polyline.positions=[Wt,ee,_t]:this.exline=st.entities.add({polyline:{positions:[Wt,ee,_t],width:5,material:a.Color.YELLOW}}),Gt>-1&&Gt<1?(Jt=it[1],this.updateSuperHeightLabel(this.totalLable,Jt,"\u9AD8\u5EA6\u5DEE:",Gt),this.updateSuperHeightLabel(this.hLable,Ut,"\u7A7A\u95F4\u5DEE:",St),yt=Gt):(he>-.1&&he<.1?(Kt=A.midpoint(it[2],it[1],new A),Jt=A.midpoint(it[2],it[3],new A),Ot=A.distance(it[1],it[2]),yt=A.distance(it[3],it[2])):(Jt=A.midpoint(it[2],it[1],new A),Kt=A.midpoint(it[2],it[3],new A),Ot=A.distance(it[3],it[2]),yt=A.distance(it[1],it[2])),this.updateSuperHeightLabel(this.totalLable,Jt,"\u9AD8\u5EA6\u5DEE:",yt),this.updateSuperHeightLabel(this.xLable,Kt,"\u6C34\u5E73\u5DEE:",Ot),this.updateSuperHeightLabel(this.hLable,Ut,"\u7A7A\u95F4\u5DEE:",St))}else if(it.length===2){yt=A.distance(it[1],it[0]);var re=A.midpoint(it[0],it[1],new A);this.xLable&&this.xLable.label.show&&(this.xLable.label.show=![],this.hLable.label.show=![]),this.updateSuperHeightLabel(this.totalLable,re,"\u9AD8\u5EA6\u5DEE:",yt)}var de=u.formatLength(yt,this.options.unit);this.options.calback&&this.options.calback(de,yt)},updateSuperHeightLabel:function(it,yt,Ot,St){it!=null&&(it.position=yt,it.label.text=Ot+u.formatLength(St,this.options.unit),it.label.show=!![],it.attribute.value=St,it.attribute.textEx=Ot)},getZHeightPosition:function(it,yt){var Ot=a.Cartographic.fromCartesian(it),St=Number(a.Math.toDegrees(Ot.longitude)),Gt=Number(a.Math.toDegrees(Ot.latitude)),Ut=Number(Ot.height.toFixed(2)),Kt=a.Cartographic.fromCartesian(yt),Jt=Number(a.Math.toDegrees(Kt.longitude)),te=Number(a.Math.toDegrees(Kt.latitude)),ie=Number(Kt.height.toFixed(2));return Ut>ie?A.fromDegrees(Jt,te,Ut):A.fromDegrees(St,Gt,ie)},getHDistance:function(it,yt){var Ot=this.getZHeightPosition(it,yt),St=a.Cartographic.fromCartesian(yt),Gt=a.Cartographic.fromCartesian(Ot),Ut=A.distance(it,Ot);return Math.abs(Number(Gt.height)-Number(St.height))<.01&&(Ut=A.distance(yt,Ot)),Ut}},dt={options:null,totalLable:null,exLine:null,exLineArrow:null,exLineText:null,clearLastNoEnd:function(){var it=this,yt=ct(this.totalLable);yt.forEach(function(Ot){(0,s.default)(this,it),st.entities.remove(Ot)}.bind(this)),this.totalLable=this.exLine=this.exLineArrow=this.exLineText=null},start:function(it){this.options=it,this.en=Q.startDraw({drawtype:"polyline",kzedit:!![],config:{maxPointNum:2},detailedMeasureType:"measureAngle",attr:{thisType:this.options.type},style:it.style||{lineType:"arrow",color:"#FFFF00",width:9,clampToGround:!![],depthFailMaterial:new a.Color.fromCssColorString("#FFFF00").withAlpha(.4)}});var yt=n.style2Entity(H,{horizontalOrigin:a.HorizontalOrigin.LEFT,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_label",mark311:Q.id,label:yt,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),Q._hasEdit=![]},showAddPointLength:function(it){this.showMoveDrawing(it)},showRemoveLastPointLength:function(){this.exLine&&(this.exLine.polyline.show=![]),this.totalLable&&(this.totalLable.label.show=![]),this.exLineArrow&&(this.exLineArrow.polyline.show=![]),this.exLineText&&(this.exLineText.label.show=![])},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length<2){this.totalLable.label.show=![];return}var Ot=A.distance(yt[0],yt[1]),St=u.getAngle(yt[0],yt[1]),Gt=(0,y.getRotateCenterPoint)(yt[0],yt[1],-St);this.updateExLine([yt[0],Gt]);var Ut;if(0<St&&St<45)Ut="\u6B63\u5317\u504F\u4E1C"+St+"\xB0";else if(45<St&&St<90)Ut="\u6B63\u4E1C\u504F\u5317"+(90-St)+"\xB0";else if(90<St&&St<135)Ut="\u6B63\u4E1C\u504F\u5357"+(St-90)+"\xB0";else if(135<St&&St<180)Ut="\u6B63\u5357\u504F\u4E1C"+(180-St)+"\xB0";else if(-180<St&&St<-135)Ut="\u6B63\u5357\u504F\u897F"+(St+180)+"\xB0";else if(-135<St&&St<-90)Ut="\u6B63\u897F\u504F\u5357"+(-St-90)+"\xB0";else if(-90<St&&St<-45)Ut="\u6B63\u897F\u504F\u5317"+(90+St)+"\xB0";else if(-45<St&&St<0)Ut="\u6B63\u5317\u504F\u897F"+-St+"\xB0";else switch(St){case 0:Ut="\u6B63\u5317";break;case 45:Ut="\u6B63\u4E1C\u5317";break;case 90:Ut="\u6B63\u4E1C";break;case 135:Ut="\u6B63\u4E1C\u897F";break;case 180:Ut="\u6B63\u5357";break;case-180:Ut="\u6B63\u5357";break;case-135:Ut="\u6B63\u897F\u5357";break;case-90:Ut="\u6B63\u897F";break;case-45:Ut="\u6B63\u897F\u5317";break}this.totalLable.position=yt[1],this.totalLable.label.text="\u65B9\u4F4D\uFF1A"+Ut+`
\u89D2\u5EA6\uFF1A`+St+`\xB0
\u8DDD\u79BB\uFF1A`+u.formatLength(Ot),this.totalLable.label.show=!![],this.totalLable.attribute.value=Ut,this.totalLable.attribute.textEx="\u89D2\u5EA6:",this.options.calback&&this.options.calback(St+"\xB0",St)},updateExLine:function(it){var yt=A.multiplyByScalar(A.subtract(it[1],it[0],new A),.1,new A),Ot=A.add(it[1],yt,new A);if(this.exLine)this.exLine.polyline.show=!![],this.exLine.polyline.positions.setValue(it),this.exLineArrow.polyline.positions.setValue([it[1],Ot]),this.exLineText.position=it[1];else{this.exLineArrow=st.entities.add({id:this.en.id+"suffix_exLineArrow",mark311:Q.id,polyline:{positions:[it[1],Ot],width:8,clampToGround:!![],material:new a.PolylineArrowMaterialProperty(a.Color.RED)}});var St=n.style2Entity(D(D({},H),{},{font_size:14,background:![],color:"red",text:"\u5317",pixelOffset:[7,0]}),{distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4)});this.exLineText=st.entities.add({id:this.en.id+"suffix_exLineText",mark311:Q.id,position:it[1],label:St}),this.exLine=st.entities.add({id:this.en.id+"suffix_exLine",mark311:Q.id,polyline:{positions:it,width:3,clampToGround:!![],material:new a.PolylineDashMaterialProperty({color:a.Color.RED})}})}},showDrawEnd:function(it){it._totalLable=this.totalLable,it._exline=this.exLine,it._arrLables=[this.exLineArrow,this.exLineText],this.totalLable=null,this.exLine=null,this.exLineArrow=null,this.exLineText=null;var yt=it._totalLable.attribute.value;this.options.calbackresult&&this.options.calbackresult(yt,it),Q._hasEdit=!![]}},lt={options:null,totalLable:null,clearLastNoEnd:function(){},start:function(it){this.options=it;var yt=(0,l.default)({pixelSize:10,color:"#3388ff",opacity:1,outline:!![],outlineColor:"#ffffff",outlineOpacity:.6,outlineWidth:2,scaleByDistance:![],scaleByDistance_far:1e6,scaleByDistance_farValue:.1,scaleByDistance_near:1e3,scaleByDistance_nearValue:1,distanceDisplayCondition:![],distanceDisplayCondition_far:1e4,distanceDisplayCondition_near:0,clampToGround:![],visibleDepth:!![]},it.style);Q.startDraw({drawtype:"point",detailedMeasureType:"measurePoint",attr:{thisType:this.options.type},style:yt})},showDrawEnd:function(it){var yt,Ot,St=Q.getPositions(it)[0],Gt=(0,d.formatPosition)(St),Ut=u.formatDegree(Gt.x),Kt=u.formatDegree(Gt.y),Jt=(0,f.default)(yt=(0,f.default)(Ot=`<div class="mars-popup-titile">\u5750\u6807\u6D4B\u91CF</div>
                <div class="mars-popup-content">
                    <div><label>\u7ECF\u5EA6</label>`.concat(Ut,`</div>
                    <div><label>\u7EAC\u5EA6</label>`)).call(Ot,Kt,`</div>
                    <div><label>\u6D77\u62D4</label>`)).call(yt,Gt.z,`\u7C73</div>
                </div>`);it.popup={html:Jt,anchor:[0,-15]},Z._isOnly=![],Z.show(it),it.movepoint=!![],this.options.calbackresult&&this.options.calbackresult("<label>\u6D77\u62D4</label>".concat(Gt.z,"\u7C73"),it)}};return{_popup:Z,dataSource:st,clearMeasureById:Nt,getAuxiliaryEnities:ct,measureLength:ut,measureHeight:Mt,measureArea:Pt,measureAngle:Ft,paidStop:rt,measureVolume:wt,measureSection:ht,measurePoint:Dt,updateUnit:vt,clearMeasure:mt,formatArea:u.formatArea,formatLength:u.formatLength,draw:function(){return Q},endDraw:Tt}};z.Measure=N},259039:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.PointPopup=void 0;var L=b(e(29870)),T=b(e(122777)),C=b(e(42762)),f=r(e(187647)),v=b(e(202692)),m=r(e(792672)),o=r(e(580823)),h=e(931984);function l(c){if(typeof O!="function")return null;var x=new O,a=new O;return(l=function(n){return n?a:x})(c)}function r(c,x){if(!x&&c&&c.__esModule)return c;if(c===null||F(c)!=="object"&&typeof c!="function")return{default:c};var a=l(x);if(a&&a.has(c))return a.get(c);var i={},n=Object.defineProperty&&M;for(var u in c)if(u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)){var g=n?M(c,u):null;g&&(g.get||g.set)?Object.defineProperty(i,u,g):i[u]=c[u]}return i.default=c,a&&a.set(c,i),i}var s=function(){function c(x,a){(0,T.default)(this,c),this.viewer=x,this.options=a||{},this._isOnly=!![],this._enable=!![],this.pickOpen=![],this._depthTest=!![],this.viewerid=x._container.id,this.popupShow=!![],this.objPopup={},this._pickFeatureProperties=void 0,this._pickType=0,this.identifyTasks3d=[],this.highlighted={feature:void 0,originalColor:new f.Color},this.defaultHighlightedClrCss="#ff0000",this.getPopupForConfig=o.getPopupForConfig,this.getPopup=o.getPopup,this.currentEleId=void 0,this.result=void 0;var i='<div id="'+this.viewerid+'pupup-all-view" ></div>',n='<div id="'+this.viewerid+'mypupup-all-view" ></div>';(0,v.default)("#"+this.viewerid).append(i),(0,v.default)("#"+this.viewerid).append(n),this.viewer.scene.postRender.addEventListener(this.bind2scene,this)}return(0,C.default)(c,[{key:"show",value:function(a,i,n){if(!(a==null||a.popup==null)){!i&&(i=(0,h.getCenterPosition)(a));var u=a.billboard||a.label||a.point||a.model;u&&u.heightReference&&(i=this.getPositionValue(i),u.heightReference._value===f.HeightReference.CLAMP_TO_GROUND?i=m.updateHeightForClampToGround(this.viewer,i):u.heightReference._value===f.HeightReference.RELATIVE_TO_GROUND&&(i=m.updateHeightForClampToGround(this.viewer,i,!![])));var g=this.getPopupId(a);this.close(g),this.objPopup[g]={id:a.id,popup:a.popup,entity:a,cartesian:i,viewPoint:n};var d;if((0,L.default)(a.popup)==="object"?d=a.popup.html:d=a.popup,!!d){var y=this;typeof d=="function"&&(d=d(a,i,function(p){y._showHtml(p,g,a,i,n)})),d&&this._showHtml(d,g,a,i,n)}}}},{key:"_showHtml",value:function(a,i,n,u,g){(0,v.default)("#"+this.viewerid+"pupup-all-view").append('<div id="'+i+'" class="cesium-popup">            <a id="'+i+'-popup-close" data-id="'+i+'" class="cesium-popup-close-button cesium-popup-color" >\xD7</a>            <div class="cesium-popup-content-wrapper cesium-popup-background">                <div class="cesium-popup-content cesium-popup-color">'+a+'</div>            </div>            <div class="cesium-popup-tip-container"><div class="cesium-popup-tip cesium-popup-background"></div></div>        </div>'),(0,v.default)("#"+i)[0].style.zIndex=0;var d=this;(0,v.default)("#"+i+"-popup-close").click(function(){var p=(0,v.default)(this).attr("data-id");d.close(p,!![]);try{n.entityCollection.remove(n)}catch{E.error("")}});var y=this.updateViewPoint(i,u,n.popup,g);!y&&this._depthTest&&this.close(i)}},{key:"getPositionValue",value:function(a){if(!a)return a;var i;return a instanceof f.Cartesian3?i=a:typeof a.getValue=="function"?i=a.getValue(this.viewer.clock.currentTime):a._value&&a._value instanceof f.Cartesian3&&(i=a._value),i}},{key:"updateViewPoint",value:function(a,i,n,u){var g=this.getPositionValue(i);if(!f.defined(g))return![];var d=f.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,g);if(f.defined(d)&&(u=d,this.objPopup[a]&&(this.objPopup[a].viewPoint=d)),!f.defined(u))return E.error("wgs84ToWindowCoordinates\u65E0\u6CD5\u8F6C\u6362\u4E3A\u5C4F\u5E55\u5750\u6807"),![];var y=this.viewer.scene;if(this._depthTest&&y.mode===f.SceneMode.SCENE3D){var p=y.camera.getPickRay(u),w=y.globe.pick(p,y);if(w){var S=f.Cartesian3.distance(g,w);if(S>1e3*1e3)return![]}}if((typeof n>"u"?"undefined":(0,L.default)(n))==="object"&&n.timeRender&&n.html&&typeof n.html=="function"){var R=n.html(this.objPopup[a]&&this.objPopup[a].entity,g);(0,v.default)("#"+a+" .cesium-popup-content").html(R)}var B=(0,v.default)("#"+a),k=u.x-B.width()/2,P=u.y-B.height();return n&&(typeof n>"u"?"undefined":(0,L.default)(n))==="object"&&n.anchor&&(k+=n.anchor[0],P+=n.anchor[1]),B.css("transform","translate3d("+k+"px,"+P+"px, 0)"),!![]}},{key:"bind2scene",value:function(){for(var a in this.objPopup)if(Object.hasOwnProperty.call(this.objPopup,a)){var i=this.objPopup[a],n=i.entity instanceof f.Entity;if(n&&!i.entity.entityCollection.contains(i.entity)){i.entity=null,this.close(a);continue}i.cartesian=i.entity.position.getValue(),this.updateViewPoint(a,i.cartesian,i.popup,i.viewPoint)}}},{key:"getPopupId",value:function(a){return this.viewerid+"popup_"+((a.id||"")+"").replace(new RegExp("[^0-9a-zA-Z_]","gm"),"_")}},{key:"close",value:function(a){if(!this._isOnly&&a){(typeof a>"u"?"undefined":(0,L.default)(a))==="object"&&(a=this.getPopupId(a));for(var i in this.objPopup)if(Object.hasOwnProperty.call(this.objPopup,i)&&(a===this.objPopup[i].id||a===i)){(0,v.default)("#"+i).remove(),delete this.objPopup[i];break}}else(0,v.default)("#"+this.viewerid+"pupup-all-view").empty(),this.objPopup={}}},{key:"destroy",value:function(){this.close(),this.viewer.scene.postRender.removeEventListener(this.bind2scene,this),(0,v.default)("#"+this.viewerid+"pupup-all-view").remove()}},{key:"isOnly",get:function(){return this._isOnly},set:function(a){this._isOnly=a}},{key:"enable",get:function(){return this._enable},set:function(a){this._enable=a,!a&&this.close()}},{key:"depthTest",get:function(){return this._depthTest},set:function(a){this._depthTest=a}}]),c}();z.PointPopup=s},445192:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var M=L(e(187647));function b(v){if(typeof F!="function")return null;var m=new F,o=new F;return(b=function(l){return l?o:m})(v)}function L(v,m){if(!m&&v&&v.__esModule)return v;if(v===null||E(v)!=="object"&&typeof v!="function")return{default:v};var o=b(m);if(o&&o.has(v))return o.get(v);var h={},l=Object.defineProperty&&O;for(var r in v)if(r!=="default"&&Object.prototype.hasOwnProperty.call(v,r)){var s=l?O(v,r):null;s&&(s.get||s.set)?Object.defineProperty(h,r,s):h[r]=v[r]}return h.default=v,o&&o.set(v,h),h}function T(v,m,o){var h=v._gl;this.id=m,this._size=o.imageBuffer.length,this._context=v,this._width=o.width,this._height=o.height,this._texture=null,this._internalFormat=o.internalFormat,this._wrapS=M.defaultValue(o.wrapS,M.TextureWrap.CLAMP_TO_EDGE),this._wrapT=M.defaultValue(o.wrapT,M.TextureWrap.CLAMP_TO_EDGE),this.id=m,this._target=h.TEXTURE_2D,this._texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this._texture);var l=0,r=0,s=C(o.imageBuffer,this._internalFormat,this._width,this._height),c=this._width,x=this._height;do{var a=M.PixelFormat.compressedTextureSizeInBytes(this._internalFormat,c,x),i=new Uint8Array(o.imageBuffer.buffer,o.imageBuffer.byteOffset+l,a);h.compressedTexImage2D(h.TEXTURE_2D,r++,this._internalFormat,c,x,0,i),c=Math.max(c>>1,1),x=Math.max(x>>1,1),l+=a}while(l<o.imageBuffer.length&&s);r>1?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR_MIPMAP_LINEAR)):(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR)),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,this._wrapS),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,this._wrapT),h.bindTexture(h.TEXTURE_2D,null)}function C(v,m,o,h){for(var l=v.length,r=o,s=h,c=0;;){var x=M.PixelFormat.compressedTextureSizeInBytes(m,r,s);if(c+=x,r=r>>1,s=s>>1,r===0&&s===0)break;r=Math.max(r,1),s=Math.max(s,1)}return c===l}T.prototype.enable=function(){var v=this._context._gl;v.activeTexture(this._gl.TEXTURE0),v.bindTexture(this._target,this._texture)},T.prototype.disable=function(){var v=this._context._gl;v.bindTexture(this._target,null)},T.prototype.isDestroyed=function(){return![]},T.prototype.destroy=function(){var v=this._context._gl;v.deleteTexture(this._texture),this._texture=null,this.id=0,M.destroyObject(this)};var f=T;z.default=f},613254:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=E(e(113288)),O={UNLOADED:0,LOADING:1,PARSING:2,READY:3,FAILED:4},M=(0,F.default)(O);z.default=M},946140:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=E(e(113288)),O={encNONE:0,enrS3TCDXTN:14,enrPVRTPF_PVRTC2:19,enrPVRTPF_PVRTC:20,enrPVRTPF_PVRTC_4bpp:21,enrPVRTPF_ETC1:22},M=(0,F.default)(O);z.default=M},811276:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=E(e(113288)),O={LUMINANCE_8:1,LUMINANCE_16:2,ALPHA:3,ALPHA_4_LUMINANCE_4:4,LUMINANCE_ALPHA:5,RGB_565:6,BGR565:7,RGB:10,BGR:11,ARGB:12,ABGR:13,BGRA:14,WEBP:25,RGBA:28,DXT1:17,DXT2:18,DXT3:19,DXT4:20,DXT5:21},M=(0,F.default)(O);z.default=M},398065:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=E(e(113288)),O={SVC_Vertex:1,SVC_Normal:2,SVC_VertexColor:4,SVC_SecondColor:8,SVC_TexutreCoord:16,SVC_TexutreCoordIsW:32},M=(0,F.default)(O);z.default=M},558824:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=f(e(187647)),L=M(e(169177)),T=M(e(516842));function C(s){if(typeof F!="function")return null;var c=new F,x=new F;return(C=function(i){return i?x:c})(s)}function f(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||E(s)!=="object"&&typeof s!="function")return{default:s};var x=C(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&O;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var u=i?O(s,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}function v(s){this.layer=s.layer,this.vertexPackage=s.vertexPackage,this.arrIndexPackage=s.arrIndexPackage,this.vertexBufferToCreate=new b.Queue,this.indexBufferToCreate=new b.Queue;var c,x;for(c=0,x=this.vertexPackage.vertexAttributes.length;c<x;c++)this.vertexBufferToCreate.enqueue(c);for(c=0,x=this.arrIndexPackage.length;c<x;c++)this.indexBufferToCreate.enqueue(c);this.boundingVolume=s.boundingVolume,this.material=s.material,this.modelMatrix=s.modelMatrix,this.shaderProgram=void 0,this.vertexArray=void 0,this.colorCommand=void 0,this.ready=![],this._pickInfo=s.pickInfo,this._selectionInfoMap=void 0,this._batchTable=void 0,this._attributeLocations=void 0,this._instanceCount=0}var m=new L.default,o=new T.default;function h(s,c){for(var x=s.layer.context,a=s.vertexBufferToCreate;a.length;){var i=a.peek();if(m.set(x,s,i),!c.jobScheduler.execute(m,b.JobType.BUFFER))break;a.dequeue()}}function l(s,c){for(var x=s.layer.context,a=s.indexBufferToCreate;a.length;){var i=a.peek();if(o.set(x,s,i),!c.jobScheduler.execute(o,b.JobType.BUFFER))break;a.dequeue()}}v.prototype.createBuffers=function(s){h(this,s),l(this,s)},v.prototype.createCommand=b.DeveloperError.throwInstantiationError,v.prototype.update=b.DeveloperError.throwInstantiationError,v.prototype.isDestroyed=b.DeveloperError.throwInstantiationError,v.prototype.destroy=b.DeveloperError.throwInstantiationError;var r=v;z.default=r},803416:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=M(e(985208)),L=M(e(828866)),T=M(e(669033)),C=h(e(187647)),f=M(e(617090)),v=M(e(375974)),m=M(e(558824));function o(A){if(typeof F!="function")return null;var N=new F,I=new F;return(o=function(W){return W?I:N})(A)}function h(A,N){if(!N&&A&&A.__esModule)return A;if(A===null||E(A)!=="object"&&typeof A!="function")return{default:A};var I=o(N);if(I&&I.has(A))return I.get(A);var G={},W=Object.defineProperty&&O;for(var Z in A)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(A,Z)){var H=W?O(A,Z):null;H&&(H.get||H.set)?Object.defineProperty(G,Z,H):G[Z]=A[Z]}return G.default=A,I&&I.set(A,G),G}function l(A){m.default.call(this,A),this._clippingPlanes=void 0,this.clippingPlanes=A.clippingPlanes,this._clippingPlanesEnable=![],this._clippingPlanesMatrix=C.Matrix4.clone(C.Matrix4.IDENTITY),this.referenceMatrix=void 0,this._defaultTexture=void 0,this._flattenPolygons=void 0,this.flattenPolygons=A.flattenPolygons,this._flattenPolygonsClippingReady=![],this._flattenPolygonsFlattenReady=![]}Object.defineProperties(l.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(N){N!==this._clippingPlanes&&C.ClippingPlaneCollection.setOwner(N,this,"_clippingPlanes")}},flattenPolygons:{get:function(){return this._flattenPolygons},set:function(N){N!==this._flattenPolygons&&C.FlattenPolygonCollection.setOwner(N,this,"_flattenPolygons")}}}),l.prototype=Object.create(m.default.prototype),l.prototype.constructor=m.default;function r(A,N,I,G){var W=new C.ShaderSource({sources:[f.default]}),Z=new C.ShaderSource({sources:[v.default]});return C.defined(N.aNormal)&&(W.defines.push("VertexNormal"),Z.defines.push("VertexNormal")),I.textures.length>0&&(W.defines.push("TexCoord"),Z.defines.push("TexCoord")),I.textures.length==2&&(W.defines.push("TexCoord2"),Z.defines.push("TexCoord2")),G.instanceIndex>-1&&G.instanceMode===17&&W.defines.push("Instance"),C.ShaderProgram.fromCache({context:A,vertexShaderSource:W,fragmentShaderSource:Z,attributeLocations:N})}function s(){return C.RenderState.fromCache({cull:{enabled:!![]},depthTest:{enabled:!![],func:C.DepthFunction.LESS_OR_EQUAL}})}function c(){return C.RenderState.fromCache({cull:{enabled:!![]},depthTest:{enabled:!![],func:C.DepthFunction.LESS_OR_EQUAL},blending:C.BlendingState.ALPHA_BLEND})}var x=new C.Cartesian2,a=new C.Matrix4;function i(A,N,I){return{uTexture:function(){return C.defined(A.textures[0])?A.textures[0]:N.context.defaultTexture},uTextureWidth:function(){return C.defined(A.textures[0])?A.textures[0]._width:1},uTexture2:function(){return A.textures[1]},uTexture2Width:function(){return A.textures[1]._width},uDiffuseColor:function(){return A.diffuseColor},uAmbientColor:function(){return A.ambientColor},uTexture0Width:function(){return C.defined(A.textures[0])?A.textures[0]._width:1},uTexture1Width:function(){return C.defined(A.textures[1])?A.textures[1]._width:1},s3m_clippingPlanes:function(){var W=I.clippingPlanes;return!C.defined(W)||!W.enabled?I._defaultTexture:W.texture},s3m_clippingPlanesEdgeStyle:function(){var W=I.clippingPlanes;if(!C.defined(W))return C.Color.WHITE.withAlpha(0);var Z=C.Color.clone(W.edgeColor);return Z.alpha=W.edgeWidth,Z},s3m_clippingPlanesMatrix:function(){var W=I.clippingPlanes,Z=a;if(C.defined(W)&&W.enabled){var H=C.defaultValue(I.referenceMatrix,I.modelMatrix);Z=C.Matrix4.multiply(N.context.uniformState.view3D,H,Z),Z=C.Matrix4.multiply(Z,W.modelMatrix,Z),this._clippingPlanesMatrix=C.Matrix4.inverseTranspose(Z,I._clippingPlanesMatrix)}return I._clippingPlanesMatrix},s3m_width:function(){var W=I.clippingPlanes;return!C.defined(W)||!W.enabled?1:C.ClippingPlaneCollection.getTextureResolution(W,N.context,x).x},s3m_height:function(){var W=I.clippingPlanes;return!C.defined(W)||!W.enabled?1:C.ClippingPlaneCollection.getTextureResolution(W,N.context,x).y},s3m_clippingPlanesLength:function(){var W=I.clippingPlanes;return!C.defined(W)||!W.enabled?0:I.clippingPlanes.length},s3m_flattenPolygonsTexture:function(){var W=I.flattenPolygons;return!C.defined(W)||!W.enabled?I._defaultTexture:W.flattenPolygonsTexture},s3m_flattenPolygonsViewProjectionMatrix:function(){var W=I.flattenPolygons,Z=new C.Matrix4;return C.defined(W)&&W.enabled&&(C.Matrix4.clone(W.flattenPolygonsCamera.getViewProjection(),Z),C.Matrix4.multiply(Z,N.context.uniformState.model,Z)),Z},s3m_flattenPolygonsInverseViewProjectionMatrix:function(){var W=I.flattenPolygons,Z=new C.Matrix4;return C.defined(W)&&W.enabled&&(C.Matrix4.clone(W.flattenPolygonsCamera.getInverseViewProjection(),Z),C.Matrix4.multiply(N.context.uniformState.view3D,Z,Z)),Z},s3m_clippingPolygonsTexture:function(){var W=I.flattenPolygons;return!C.defined(W)||!W.enabled?I._defaultTexture:W.clippingPolygonsTexture},s3m_toClippingPolygonsTexture:function(){var W=I.flattenPolygons,Z=new C.Matrix4;return C.defined(W)&&W.enabled&&C.Matrix4.clone(W.clippingPolygonsCamera.getViewProjection(),Z),Z}}}l.prototype.createCommand=function(){if(!C.defined(this.colorCommand)){var A=this.layer,N=A.context,I=this.vertexPackage;this._attributeLocations=I.attrLocation,this._instanceCount=I.instanceCount;var G=this.arrIndexPackage,W=I.vertexAttributes,Z=I.attrLocation;if(!(G.length<1)){var H=G[0],U=this.material;this.shaderProgram=r(N,Z,U,I),this.vertexArray=new C.VertexArray({context:N,attributes:W,indexBuffer:H.indexBuffer}),this.colorCommand=new C.DrawCommand({primitiveType:H.primitiveType,modelMatrix:this.modelMatrix,boundingVolume:C.BoundingSphere.clone(this.boundingVolume),pickId:"vSecondColor",vertexArray:this.vertexArray,shaderProgram:this.shaderProgram,pass:U.bTransparentSorting?C.Pass.TRANSLUCENT:C.Pass.CESIUM_3D_TILE,renderState:U.bTransparentSorting?c():s(),instanceCount:I.instanceCount}),this.colorCommand.uniformMap=i(U,A,this),this.vertexPackage=null,this.arrIndexPackage=null,this.ready=!![]}}};function n(A){var N=A._pickInfo;if(C.defined(N)){A._selectionInfoMap=new C.AssociativeArray;for(var I in N)N.hasOwnProperty(I)&&A._selectionInfoMap.set(I,N[I])}}var u=new C.Cartesian3;function g(A){var N=A.vertexPackage;if(!(!C.defined(N)||N.instanceIndex===-1||!C.defined(N.instanceBounds))){var I=N.instanceBounds,G=new C.Cartesian3(I[0],I[1],I[2]),W=new C.Cartesian3(I[3],I[4],I[5]),Z=C.Cartesian3.lerp(G,W,.5,u),H=C.Cartesian3.distance(Z,G),U=new C.Cartesian3;C.Matrix4.multiplyByPoint(A.modelMatrix,Z,U),A.boundingVolume.center=U,A.boundingVolume.radius=H>A.boundingVolume.radius?H:A.boundingVolume.radius,N.instanceBounds=void 0}}function d(A,N){var I=[];I.push({functionName:"batchTable_pickColor",componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!![]});var G=N._pickInfo,W=(0,b.default)(G),Z=N._instanceCount>0?N._instanceCount:W.length,H=new C.BatchTable(A,I,Z);N._batchTable=H}var y=new C.Cartesian4;function p(A,N,I){var G=N._batchTable,W=N._selectionInfoMap,Z=W._hash;for(var H in Z)if(Z.hasOwnProperty(H)){var U=W.get(H),V=void 0;!C.defined(V)&&(V=A.createPickId({primitive:I,id:H}));var Y=V.color;y.x=C.Color.floatToByte(Y.red),y.y=C.Color.floatToByte(Y.green),y.z=C.Color.floatToByte(Y.blue),y.w=C.Color.floatToByte(Y.alpha);var $=U.instanceIds;if(N._instanceCount>0)(0,L.default)($).call($,function(J){G.setBatchedAttribute(J,0,y)});else{var K=U[0].batchId;G.setBatchedAttribute(K,0,y)}}}function w(A){var N=A.clippingPlanes;return C.defined(N)&&N.enabled&&N.length!==0}function S(A){var N=A.flattenPolygons;return C.defined(N)&&N.enabled&&N.length!==0}function R(A,N){var I=N.shaderProgram.vertexShaderSource,G=N.shaderProgram.fragmentShaderSource,W=I.sources[0],Z=N._attributeLocations;W=N._batchTable.getVertexShaderCallback()(W),I=new C.ShaderSource({defines:I.defines,sources:[W]}),I.defines.indexOf("BatchTable")===-1&&I.defines.push("BatchTable"),N.shaderProgram=N.shaderProgram&&N.shaderProgram.destroy(),N.shaderProgram=C.ShaderProgram.fromCache({context:A,vertexShaderSource:I,fragmentShaderSource:G,attributeLocations:Z}),N.colorCommand.shaderProgram=N.shaderProgram}function B(A,N){var I=N.shaderProgram.vertexShaderSource,G=N.shaderProgram.fragmentShaderSource,W=I.sources[0],Z=N._attributeLocations,H=w(N);if(H){if(G.defines.indexOf("clippingPlane")===-1&&G.defines.push("clippingPlane"),C.ClippingPlaneCollection.useFloatTexture(A))G.defines.indexOf("clippingPlanesUsingFloatTexture")===-1&&G.defines.push("clippingPlanesUsingFloatTexture");else{var U=G.defines.indexOf("clippingPlanesUsingFloatTexture");if(U!==-1){var V;(0,T.default)(V=G.defines).call(V,U,1)}}if(N.clippingPlanes.unionClippingRegions)G.defines.indexOf("unionClippingRegions")===-1&&G.defines.push("unionClippingRegions");else{var Y=G.defines.indexOf("unionClippingRegions");if(Y!==-1){var $;(0,T.default)($=G.defines).call($,Y,1)}}}else{var K=G.defines.indexOf("clippingPlane");if(K!==-1){var J;(0,T.default)(J=G.defines).call(J,K,1)}}N.shaderProgram=N.shaderProgram&&N.shaderProgram.destroy(),N.shaderProgram=C.ShaderProgram.fromCache({context:A,vertexShaderSource:I,fragmentShaderSource:G,attributeLocations:Z}),N.colorCommand.shaderProgram=N.shaderProgram}function k(A,N){var I=N.shaderProgram.vertexShaderSource,G=N.shaderProgram.fragmentShaderSource,W=I.sources[0],Z=N._attributeLocations,H=S(N);if(H&&N.flattenPolygons.clippingPolygonsReady)G.defines.indexOf("clippingPolygon")===-1&&G.defines.push("clippingPolygon");else{var U=G.defines.indexOf("clippingPolygon");if(U!==-1){var V;(0,T.default)(V=G.defines).call(V,U,1)}}if(H&&N.flattenPolygons.flattenPolygonsReady)I.defines.indexOf("flattenPolygon")===-1&&I.defines.push("flattenPolygon");else{var Y=G.defines.indexOf("flattenPolygon");if(Y!==-1){var $;(0,T.default)($=I.defines).call($,Y,1)}}N.shaderProgram=N.shaderProgram&&N.shaderProgram.destroy(),N.shaderProgram=C.ShaderProgram.fromCache({context:A,vertexShaderSource:I,fragmentShaderSource:G,attributeLocations:Z}),N.colorCommand.shaderProgram=N.shaderProgram}function P(A){var N=A._batchTable,I=A.colorCommand;I.uniformMap=N.getUniformMapCallback()(A.colorCommand.uniformMap)}l.prototype.update=function(A,N){if(!this.ready){n(this),g(this),this.createBuffers(A),this.createCommand(A);return}!C.defined(this._batchTable)&&(d(A.context,this),R(A.context,this),P(this),p(A.context,this,N));var I=A.context;this._defaultTexture=I.defaultTexture;var G=this.clippingPlanes,W=C.defined(G)&&G.enabled;this._clippingPlanesEnable!=W&&(this._clippingPlanesState=W,B(A.context,this));var Z=this.flattenPolygons,H=C.defined(Z)&&Z.enabled&&Z.clippingPolygonsReady;this._flattenPolygonsClippingReady!=H&&(this._flattenPolygonsClippingReady=H,k(A.context,this));var U=C.defined(Z)&&Z.enabled&&Z.flattenPolygonsReady;this._flattenPolygonsFlattenReady!=U&&(this._flattenPolygonsFlattenReady=U,k(A.context,this)),A.commandList.push(this.colorCommand),this._batchTable.update(A)},l.prototype.isDestroyed=function(){return![]},l.prototype.destroy=function(){return this.shaderProgram=this.shaderProgram&&!this.shaderProgram.isDestroyed()&&this.shaderProgram.destroy(),this.vertexArray=this.vertexArray&&!this.vertexArray.isDestroyed()&&this.vertexArray.destroy(),this.colorCommand=void 0,this.vertexPackage=null,this.arrIndexPackage=null,C.destroyObject(this)};var D=l;z.default=D},825025:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=E(e(803416)),O={OSGBFile:function(L){return new F.default(L)},OSGBCacheFile:function(L){return new F.default(L)}},M=O;z.default=M},508219:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var M=L(e(187647));function b(f){if(typeof F!="function")return null;var v=new F,m=new F;return(b=function(h){return h?m:v})(f)}function L(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||E(f)!=="object"&&typeof f!="function")return{default:f};var m=b(v);if(m&&m.has(f))return m.get(f);var o={},h=Object.defineProperty&&O;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=h?O(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}function T(){this.ambientColor=new M.Color,this.diffuseColor=new M.Color,this.specularColor=new M.Color(0,0,0,0),this.shininess=50,this.bTransparentSorting=![],this.textures=[]}T.prototype.isDestroyed=function(){return![]},T.prototype.destroy=function(){return destroyObject(this)};var C=T;z.default=C},915904:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=m(e(187647)),L=M(e(445192)),T=M(e(508219)),C=M(e(825025)),f=M(e(398065));function v(n){if(typeof F!="function")return null;var u=new F,g=new F;return(v=function(y){return y?g:u})(n)}function m(n,u){if(!u&&n&&n.__esModule)return n;if(n===null||E(n)!=="object"&&typeof n!="function")return{default:n};var g=v(u);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&O;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?O(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function o(){}function h(n,u){for(var g={},d=u.materials.material,y=0,p=d.length;y<p;y++){var w=d[y].material,S=w.id,R=new T.default;g[S]=R;var B=w.ambient;R.ambientColor=new b.Color(B.r,B.g,B.b,B.a);var k=w.diffuse;R.diffuseColor=new b.Color(k.r,k.g,k.b,k.a);var P=w.specular;R.specularColor=new b.Color(P.r,P.g,P.b,P.a),R.shininess=w.shininess,R.bTransparentSorting=w.transparentsorting;for(var D=w.textureunitstates,A=D.length,N=0;N<A;N++){var I=D[N].textureunitstate,G=I.id,W=I.addressmode.u===0?b.TextureWrap.REPEAT:b.TextureWrap.CLAMP_TO_EDGE,Z=I.addressmode.v===0?b.TextureWrap.REPEAT:b.TextureWrap.CLAMP_TO_EDGE;R.texMatrix=b.Matrix4.unpack(I.texmodmatrix);var H=u.texturePackage[G];if(b.defined(H)&&H.imageBuffer.byteLength>0){H.wrapS=W,H.wrapT=Z;var U=new L.default(n,G,H);R.textures.push(U)}}}return g}function l(n){var u=new b.BoundingSphere,g=new b.Cartesian3,d=n.vertexAttributes[0],y=d.componentsPerAttribute,p=b.defined(n.nCompressOptions)&&(n.nCompressOptions&f.default.SVC_Vertex)===f.default.SVC_Vertex,w=1,S,R;p?(w=n.vertCompressConstant,S=new b.Cartesian3(n.minVerticesValue.x,n.minVerticesValue.y,n.minVerticesValue.z),R=new Uint16Array(d.typedArray.buffer,d.typedArray.byteOffset,d.typedArray.byteLength/2)):R=new Float32Array(d.typedArray.buffer,d.typedArray.byteOffset,d.typedArray.byteLength/4);for(var B=[],k=0;k<n.verticesCount;k++)b.Cartesian3.fromArray(R,y*k,g),p&&(g=b.Cartesian3.multiplyByScalar(g,w,g),g=b.Cartesian3.add(g,S,g)),B.push(b.Cartesian3.clone(g));return b.BoundingSphere.fromPoints(B,u),B.length=0,u}var r=new b.Cartesian3;function s(n){var u=new b.BoundingSphere,g=n.instanceBounds;if(!b.defined(g))return u;var d=new b.Cartesian3(g[0],g[1],g[2]),y=new b.Cartesian3(g[3],g[4],g[5]),p=new b.Cartesian3.lerp(d,y,.5,r),w=new b.Cartesian3.distance(p,d);return u.center=p,u.radius=w,u}function c(n){n.instanceIndex>-1?s(n):l(n)}function x(n,u,g,d,y){for(var p={},w=d.geodes,S=0,R=w.length;S<R;S++){var B=w[S],k=B.matrix,P=b.Matrix4.multiply(n.modelMatrix,k,new b.Matrix4),D=void 0;b.defined(y.boundingVolume)&&(D=new b.BoundingSphere(y.boundingVolume.sphere.center,y.boundingVolume.sphere.radius),b.BoundingSphere.transform(D,n.modelMatrix,D));for(var A=B.skeletonNames,N=0,I=A.length;N<I;N++){var G=A[N],W=u.geoPackage[G],Z=W.vertexPackage,H=W.arrIndexPackage,U=W.pickInfo,V=void 0;H.length>0&&(V=g[H[0].materialCode]);var Y=b.defined(D)?D:c(Z);p[G]=C.default[n.fileType]({layer:n,vertexPackage:Z,arrIndexPackage:H,pickInfo:U,modelMatrix:P,boundingVolume:Y,material:V})}}if(!b.defined(y.boundingVolume)){var $=[];for(var K in p)p.hasOwnProperty(K)&&$.push(p[K].boundingVolume);y.boundingVolume=b.BoundingSphere.fromBoundingSpheres($)}y.geoMap=p}function a(n,u,g){for(var d=u.groupNode,y=[],p=0,w=d.pageLods.length;p<w;p++){var S={},R=d.pageLods[p];S.rangeMode=R.rangeMode,S.rangeDataList=R.childTile,S.rangeList=R.rangeList;var B=R.boundingSphere.center,k=R.boundingSphere.radius;S.rangeDataList!==""?S.boundingVolume={sphere:{center:new b.Cartesian3(B.x,B.y,B.z),radius:k}}:S.isLeafTile=!![],x(n,u,g,R,S),y.push(S)}return y}o.parse=function(n,u){if(b.defined(u)){var g=h(n.context,u),d=a(n,u,g);return d}};var i=o;z.default=i},516842:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var M=L(e(187647));function b(f){if(typeof F!="function")return null;var v=new F,m=new F;return(b=function(h){return h?m:v})(f)}function L(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||E(f)!=="object"&&typeof f!="function")return{default:f};var m=b(v);if(m&&m.has(f))return m.get(f);var o={},h=Object.defineProperty&&O;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=h?O(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}function T(){this.model=void 0,this.context=void 0,this.index=0}T.prototype.set=function(f,v,m){this.model=v,this.context=f,this.index=m},T.prototype.execute=function(){var f=this.context,v=this.model.arrIndexPackage[this.index],m=this.model.vertexPackage.verticesCount;if(!M.defined(v))throw new M.DeveloperError("index package is null");if(!M.defined(v.indexBuffer)){if(!M.defined(v.indicesTypedArray))throw new M.DeveloperError("index buffer is null");var o=M.IndexDatatype.UNSIGNED_SHORT;(v.indexType===1||m>=M.Math.SIXTY_FOUR_KILOBYTES)&&f.elementIndexUint&&(o=M.IndexDatatype.UNSIGNED_INT),!M.defined(v.indexBuffer)&&(v.indexBuffer=M.Buffer.createIndexBuffer({context:f,typedArray:v.indicesTypedArray,usage:M.BufferUsage.STATIC_DRAW,indexDatatype:o})),v.indicesTypedArray=null,delete v.indicesTypedArray}};var C=T;z.default=C},169177:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var M=L(e(187647));function b(f){if(typeof F!="function")return null;var v=new F,m=new F;return(b=function(h){return h?m:v})(f)}function L(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||E(f)!=="object"&&typeof f!="function")return{default:f};var m=b(v);if(m&&m.has(f))return m.get(f);var o={},h=Object.defineProperty&&O;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=h?O(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}function T(){this.context=void 0,this.model=void 0,this.index=void 0}T.prototype.set=function(f,v,m){this.context=f,this.model=v,this.index=m},T.prototype.execute=function(){var f=this.context,v=this.index,m=this.model.vertexPackage,o=m.vertexAttributes[v];if(!M.defined(o))throw new M.DeveloperError("attribute is null");if(m.instanceIndex!==-1&&!M.defined(this.model.instanceBuffer)){if(!M.defined(m.instanceBuffer))throw new M.DeveloperError("instance buffer is null");this.model.instanceBuffer=M.Buffer.createVertexBuffer({context:f,typedArray:m.instanceBuffer,usage:M.BufferUsage.STATIC_DRAW})}if(o.instanceDivisor===1&&!M.defined(o.typedArray)){o.vertexBuffer=this.model.instanceBuffer;return}!M.defined(o.vertexBuffer)&&(!M.defined(o.vertexBuffer)&&(o.vertexBuffer=M.Buffer.createVertexBuffer({context:f,typedArray:o.typedArray,usage:M.BufferUsage.STATIC_DRAW})),o.typedArray=null,delete o.typedArray)};var C=T;z.default=C},322331:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var L=b(e(669033)),T=f(e(187647));function C(o){if(typeof O!="function")return null;var h=new O,l=new O;return(C=function(s){return s?l:h})(o)}function f(o,h){if(!h&&o&&o.__esModule)return o;if(o===null||F(o)!=="object"&&typeof o!="function")return{default:o};var l=C(h);if(l&&l.has(o))return l.get(o);var r={},s=Object.defineProperty&&M;for(var c in o)if(c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)){var x=s?M(o,c):null;x&&(x.get||x.set)?Object.defineProperty(r,c,x):r[c]=o[c]}return r.default=o,l&&l.set(o,r),r}function v(){this._list=new T.DoublyLinkedList,this._sentinel=this._list.add(),this._trimTiles=![]}v.prototype.reset=function(){var o;(0,L.default)(o=this._list).call(o,this._list.tail,this._sentinel)},v.prototype.touch=function(o){var h=o.cacheNode;if(T.defined(h)){var l;(0,L.default)(l=this._list).call(l,this._sentinel,h)}},v.prototype.add=function(o){!T.defined(o.cacheNode)&&(o.cacheNode=this._list.add(o))},v.prototype.unloadTile=function(o,h,l){var r=h.cacheNode;T.defined(r)&&(this._list.remove(r),h.cacheNode=void 0,l(o,h))},v.prototype.unloadTiles=function(o,h){var l=this._trimTiles;this._trimTiles=![];for(var r=this._list,s=o.maximumMemoryUsage*1024*1024,c=this._sentinel,x=r.head;x!==c&&(o.totalMemoryUsageInBytes>s||l);){var a=x.item;x=x.next,a.isDestroyed()&&E.log(a),this.unloadTile(o,a,h)}},v.prototype.trim=function(){this._trimTiles=!![]};var m=v;z.default=m},335290:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=M(e(728954)),L=f(e(187647)),T=M(e(613254));function C(a){if(typeof F!="function")return null;var i=new F,n=new F;return(C=function(g){return g?n:i})(a)}function f(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||E(a)!=="object"&&typeof a!="function")return{default:a};var n=C(i);if(n&&n.has(a))return n.get(a);var u={},g=Object.defineProperty&&O;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?O(a,d):null;y&&(y.get||y.set)?Object.defineProperty(u,d,y):u[d]=a[d]}return u.default=a,n&&n.set(a,u),u}function v(){this._stack=[]}function m(a,i,n){i.length=0;for(var u=0,g=a._rootTiles.length;u<g;u++){var d=a._rootTiles[u];d.updateVisibility(n),d.visible&&i.push(d)}}function o(a,i){return a.distanceToCamera-i.distanceToCamera}function h(a,i,n,u){var g,d=i.children,y=d.length;for(g=0;g<y;++g)d[g].updateVisibility(u);for((0,b.default)(d).call(d,o),g=0;g<y;++g){var p=d[g];p.visible&&n.push(p)}}function l(a,i,n){i.renderable&&(a._selectedTiles.push(i),i.selectedFrame=n.frameNumber)}function r(a,i,n){i.requestedFrame===n.frameNumber||i.contentState!==T.default.UNLOADED||i.isLeafTile||(a._requestTiles.push(i),i.requestedFrame=n.frameNumber)}function s(a,i,n){i.touchedFrame!==n.frameNumber&&(a._cache.touch(i),i.touchedFrame=n.frameNumber)}function c(a,i,n){for(;i.length;){var u=i.pop();if(u.visible){if(s(a,u,n),u.canTraverse()){h(a,u,i,n);continue}l(a,u,n),r(a,u,n)}}}v.prototype.scheduler=function(a,i){a._requestTiles.length=0,a._selectedTiles.length=0;var n=this._stack;m(a,n,i),c(a,n,i)};var x=v;z.default=x},894436:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=v(e(187647)),L=M(e(613254)),T=M(e(895347)),C=M(e(915904));function f(i){if(typeof F!="function")return null;var n=new F,u=new F;return(f=function(d){return d?u:n})(i)}function v(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||E(i)!=="object"&&typeof i!="function")return{default:i};var u=f(n);if(u&&u.has(i))return u.get(i);var g={},d=Object.defineProperty&&O;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?O(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,u&&u.set(i,g),g}function m(i,n,u,g,d,y,p){this.layer=i,this.parent=n,this.fileName=g,this.isLeafTile=b.defaultValue(p,![]),this.transform=i.modelMatrix,this.boundingVolume=this.createBoundingVolume(u,i.modelMatrix);var w=b.Resource.createIfNeeded(i._baseResource);if(b.defined(n))this.baseUri=n.baseUri;else{var S=new b.Resource(g);this.baseUri=S.getBaseUri()}this.contentResource=w.getDerivedResource({url:g}),this.serverKey=b.RequestScheduler.getServerKey(this.contentResource.getUrlComponent()),this.request=void 0,this.cacheNode=void 0,this.distanceToCamera=0,this.pixel=0,this.visibilityPlaneMask=0,this.visible=![],this.children=[],this.lodRangeData=d,this.renderEntityMap=y,this.contentState=L.default.UNLOADED,this.readerable=![],this.touchedFrame=0,this.requestedFrame=0,this.selectedFrame=0,this.priority=0,this._isClipped=!![]}Object.defineProperties(m.prototype,{renderable:{get:function(){return b.defined(this.renderEntityMap)}}});var o=new b.Cartesian3;function h(i,n){var u=b.Cartesian3.clone(i.center),g=i.radius;u=b.Matrix4.multiplyByPoint(n,u,u);var d=b.Matrix4.getScale(n,o),y=b.Cartesian3.maximumComponent(d);return g*=y,new b.TileBoundingSphere(u,g)}function l(i,n){var u=new b.Cartesian3(i.min.x,i.min.y,i.min.z);b.Matrix4.multiplyByPoint(n,u,u);var g=new b.Cartesian3(i.max.x,i.max.y,i.max.z);b.Matrix4.multiplyByPoint(n,g,g);var d=b.BoundingSphere.fromCornerPoints(u,g,new b.BoundingSphere),y=d.center,p=d.radius,w=b.Matrix4.getScale(n,o),S=b.Cartesian3.maximumComponent(w);return p*=S,new b.TileBoundingSphere(y,p)}m.prototype.createBoundingVolume=function(i,n){if(this.isLeafTile)return new b.TileBoundingSphere(i.center,i.radius);if(b.defined(i.sphere))return h(i.sphere,n);if(b.defined(i.box))return l(i.box,n)},m.prototype.canTraverse=function(){return this.children.length===0||this.isLeafTile?![]:b.defined(this.lodRangeData)?this.pixel>this.lodRangeData:!![]};function r(i,n){return i.boundingVolume}m.prototype.getPixel=function(i){var n=this.boundingVolume,u=n.radius,g=n.center,d=b.Cartesian3.distance(i.camera.positionWC,g),y=i.context.drawingBufferHeight,p=i.camera.frustum._fovy*.5,w=y*.5,S=w/Math.tan(p);return S*u/d},m.prototype.distanceToTile=function(i){var n=r(this,i);return n.distanceToCamera(i)},m.prototype.visibility=function(i,n){var u=r(this,i),g=this.layer,d=g.clippingPlanes;if(b.defined(d)&&d.enabled){var y=d.computeIntersectionWithBoundingVolume(u,g.clippingPlanesOriginMatrix);if(this._isClipped=y!==b.Intersect.INSIDE,y===b.Intersect.OUTSIDE)return b.CullingVolume.MASK_OUTSIDE}return i.cullingVolume.computeVisibilityWithPlaneMask(u,n)},m.prototype.updateVisibility=function(i){var n=this.parent,u=b.defined(n)?n.visibilityPlaneMask:b.CullingVolume.MASK_INDETERMINATE;this.distanceToCamera=this.distanceToTile(i),this.pixel=this.getPixel(i),this.visibilityPlaneMask=this.visibility(i,u),this.visible=this.visibilityPlaneMask!==b.CullingVolume.MASK_OUTSIDE};function s(i){return function(){return i.priority}}function c(i){return function(n){i.contentState=L.default.FAILED,i.contentReadyPromise.reject(n)}}function x(i,n){for(var u=i.layer,g=n.length,d=0;d<g;d++){var y=n[d],p=y.boundingVolume,w=y.rangeDataList;w=i.baseUri+w;var S=y.rangeList,R=y.geoMap,B=new m(u,i,p,w,S,R,y.isLeafTile);i.children.push(B),i.layer._cache.add(B)}}m.prototype.requestContent=function(){var i=this,n=this.layer,u=this.contentResource.clone(),g=new b.Request({throttle:!![],throttleByServer:!![],type:b.RequestType.TILES3D,priorityFunction:s(this),serverKey:this.serverKey});this.request=g,u.request=g;var d=u.fetchArrayBuffer();if(!b.defined(d))return![];this.contentState=L.default.LOADING,this.contentReadyPromise=b.defer();var y=c(this);return d.then(function(p){if(i.isDestroyed()){y();return}var w=T.default.parseBuffer(p),S=C.default.parse(i.layer,w);x(i,S),i.selectedFrame=0,i.contentState=L.default.READY,i.contentReadyPromise.resolve(w)}).catch(function(p){if(g.state===b.RequestState.CANCELLED){i.contentState=L.default.UNLOADED;return}return y(p)}),!![]},m.prototype.update=function(i,n){var u=this.renderEntityMap;for(var g in u)if(u.hasOwnProperty(g)){var d=n.clippingPlanes;u[g].referenceMatrix=n.clippingPlanesOriginMatrix,b.defined(d)&&!b.defined(u[g].clippingPlanes)&&(u[g].clippingPlanes=d.enabled&&this._isClipped?d:void 0),b.defined(d)&&b.defined(u[g].clippingPlanes)&&u[g].clippingPlanes!==d&&(u[g].clippingPlanes=d);var y=n.flattenPolygons;b.defined(y)&&!b.defined(u[g].flattenPolygons)&&(u[g].flattenPolygons=y.enabled?y:void 0),b.defined(y)&&b.defined(u[g].flattenPolygons)&&u[g].flattenPolygons!==y&&(u[g].flattenPolygons=y),u[g].update(i,n)}},m.prototype.free=function(){for(var i=0,n=this.children.length;i<n;i++){var u=this.children[i];u.destroy()}this.children.length=0,this.contentState=L.default.UNLOADED},m.prototype.isDestroyed=function(){return![]},m.prototype.destroy=function(){for(var i in this.renderEntityMap)this.renderEntityMap.hasOwnProperty(i)&&this.renderEntityMap[i].destroy();this.renderEntityMap=void 0;for(var n=0,u=this.children.length;n<u;n++){var g=this.children[n];g.destroy()}return this.children.length=0,b.destroyObject(this)};var a=m;z.default=a},895347:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=M(e(520314)),L=o(e(187647)),T=M(e(811276)),C=M(e(946140)),f=M(e(398065)),v=M(e(426230));function m(H){if(typeof F!="function")return null;var U=new F,V=new F;return(m=function($){return $?V:U})(H)}function o(H,U){if(!U&&H&&H.__esModule)return H;if(H===null||E(H)!=="object"&&typeof H!="function")return{default:H};var V=m(U);if(V&&V.has(H))return V.get(H);var Y={},$=Object.defineProperty&&O;for(var K in H)if(K!=="default"&&Object.prototype.hasOwnProperty.call(H,K)){var J=$?O(H,K):null;J&&(J.get||J.set)?Object.defineProperty(Y,K,J):Y[K]=H[K]}return Y.default=H,V&&V.set(H,Y),Y}function h(){}var l={SV_Unkown:0,SV_Standard:1,SV_Compressed:2};function r(H,U){var V=new Uint8Array(H,U);return v.default.inflate(V).buffer}function s(H,U,V){var Y=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var $=new Uint8Array(H,V,Y),K=L.getStringFromTypedArray($);return V+=Y,{string:K,bytesOffset:V}}function c(H,U,V,Y){for(var $={},K=[],J=new Array(16),Q=0;Q<16;Q++)J[Q]=U.getFloat64(V,!![]),V+=Float64Array.BYTES_PER_ELEMENT;$.matrix=J,$.skeletonNames=K;var et=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var nt=0;nt<et;nt++){var st=s(H,U,V);K.push(st.string),V=st.bytesOffset}return Y.push($),V}function x(H,U,V,Y){var $={};$.rangeList=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,$.rangeMode=U.getUint16(V,!![]),V+=Uint16Array.BYTES_PER_ELEMENT;var K={};K.x=U.getFloat64(V,!![]),V+=Float64Array.BYTES_PER_ELEMENT,K.y=U.getFloat64(V,!![]),V+=Float64Array.BYTES_PER_ELEMENT,K.z=U.getFloat64(V,!![]),V+=Float64Array.BYTES_PER_ELEMENT;var J=U.getFloat64(V,!![]);V+=Float64Array.BYTES_PER_ELEMENT,$.boundingSphere={center:K,radius:J};var Q=s(H,U,V),et=Q.string;V=Q.bytesOffset;var nt=et.indexOf("Geometry");if(nt!==-1){var st=et.substring(nt);et=et.replace(st,"")}$.childTile=et,$.geodes=[];var ut=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var rt=0;rt<ut;rt++)V=c(H,U,V,$.geodes);return Y.push($),V}function a(H,U,V,Y){var $={},K=[],J=[],Q=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var et=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var nt=0;nt<et;nt++)V=x(H,U,V,J);$.pageLods=J;var st=V%4;return st!==0&&(V+=4-st),Y.groupNode=$,V}function i(H,U,V,Y){var $=U.getUint32(V,!![]);if(Y.verticesCount=$,V+=Uint32Array.BYTES_PER_ELEMENT,V<=0)return V;var K=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var J=U.getUint16(V,!![]);J=K*Float32Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;var Q=$*K*Float32Array.BYTES_PER_ELEMENT,et=new Uint8Array(H,V,Q);V+=Q;var nt=Y.vertexAttributes,st=Y.attrLocation;return st.aPosition=nt.length,nt.push({index:st.aPosition,typedArray:et,componentsPerAttribute:K,componentDatatype:L.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:J,normalize:![]}),V}function n(H,U,V,Y){var $=U.getUint32(V,!![]);if(V+=Uint32Array.BYTES_PER_ELEMENT,$<=0)return V;var K=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var J=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var Q=$*K*Float32Array.BYTES_PER_ELEMENT,et=new Uint8Array(H,V,Q);V+=Q;var nt=Y.vertexAttributes,st=Y.attrLocation;return st.aNormal=nt.length,nt.push({index:st.aNormal,typedArray:et,componentsPerAttribute:K,componentDatatype:L.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:J,normalize:![]}),V}function u(H,U,V,Y){var $=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var K=Y.verticesCount,J;if($>0){var Q=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT*2;var et=$*Uint8Array.BYTES_PER_ELEMENT*4,nt=new Uint8Array(H,V,et);J=(0,b.default)(nt).call(nt,0,et),V+=et}else{J=new Uint8Array(4*K);for(var st=0;st<K;st++)J[st*4]=255,J[st*4+1]=255,J[st*4+2]=255,J[st*4+3]=255}var ut=Y.vertexAttributes,rt=Y.attrLocation;return rt.aColor=ut.length,ut.push({index:rt.aColor,typedArray:J,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!![]}),Y.vertexColor=J,V}function g(H,U,V,Y){var $=U.getUint32(V,!![]);if(V+=Uint32Array.BYTES_PER_ELEMENT,$<=0)return V;var K=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT*2;var J=$*Uint8Array.BYTES_PER_ELEMENT*4,Q=new Uint8Array(H,V,J);V+=J;var et=Y.vertexAttributes,nt=Y.attrLocation;return nt.aSecondColor=et.length,et.push({index:nt.aSecondColor,typedArray:Q,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!![]}),V}function d(H,U,V,Y){var $=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;for(var K=0;K<$;K++){var J=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Q=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var et=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var nt=J*Q*Float32Array.BYTES_PER_ELEMENT,st=new Uint8Array(H,V,nt);V+=nt;var ut="aTexCoord"+K,rt=Y.vertexAttributes,ht=Y.attrLocation;ht[ut]=rt.length,rt.push({index:ht[ut],typedArray:st,componentsPerAttribute:Q,componentDatatype:L.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Q*Float32Array.BYTES_PER_ELEMENT,normalize:![]})}return V}function y(H,U,V,Y){var $=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;for(var K=Y.vertexAttributes,J=Y.attrLocation,Q=0;Q<$;Q++){var et=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var nt=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var st=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var ut=et*nt*Float32Array.BYTES_PER_ELEMENT;if(nt===17||nt===29){var rt=new Uint8Array(H,V,ut);Y.instanceCount=et,Y.instanceMode=nt,Y.instanceBuffer=rt,Y.instanceIndex=1;var ht=nt*et*4,Pt=(0,b.default)(rt).call(rt,0,ht);Y.vertexColorInstance=Pt;var wt=void 0;nt===17?(wt=Float32Array.BYTES_PER_ELEMENT*17,J.uv2=K.length,K.push({index:J.uv2,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:0,strideInBytes:wt,instanceDivisor:1}),J.uv3=K.length,K.push({index:J.uv3,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv4=K.length,K.push({index:J.uv4,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.secondary_colour=K.length,K.push({index:J.secondary_colour,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv6=K.length,K.push({index:J.uv6,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.UNSIGNED_BYTE,normalize:!![],offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1})):nt===29&&(wt=Float32Array.BYTES_PER_ELEMENT*29,J.uv1=K.length,K.push({index:J.uv1,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:0,strideInBytes:wt,instanceDivisor:1,byteLength:ut}),J.uv2=K.length,K.push({index:J.uv2,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv3=K.length,K.push({index:J.uv3,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv4=K.length,K.push({index:J.uv4,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv5=K.length,K.push({index:J.uv5,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv6=K.length,K.push({index:J.uv6,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv7=K.length,K.push({index:J.uv7,componentsPerAttribute:3,componentDatatype:L.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.secondary_colour=K.length,K.push({index:J.secondary_colour,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.UNSIGNED_BYTE,normalize:!![],offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv9=K.length,K.push({index:J.uv9,componentsPerAttribute:4,componentDatatype:L.ComponentDatatype.UNSIGNED_BYTE,normalize:!![],offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}))}else{var Mt=et*nt;Y.instanceBounds=new Float32Array(Mt);for(var Ft=0;Ft<Mt;Ft++)Y.instanceBounds[Ft]=U.getFloat32(V+Ft*Float32Array.BYTES_PER_ELEMENT,!![])}V+=ut}return V}function p(H,U,V,Y){var $=U.getUint32(V,!![]);if(Y.verticesCount=$,V+=Uint32Array.BYTES_PER_ELEMENT,V<=0)return V;var K=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var J=U.getUint16(V,!![]);J=K*Int16Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;var Q=U.getFloat32(V,!![]);V+=Float32Array.BYTES_PER_ELEMENT;var et={};et.x=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,et.y=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,et.z=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,et.w=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,Y.vertCompressConstant=Q,Y.minVerticesValue=et;var nt=$*K*Int16Array.BYTES_PER_ELEMENT,st=new Uint8Array(H,V,nt);V+=nt;var ut=Y.vertexAttributes,rt=Y.attrLocation;return rt.aPosition=ut.length,ut.push({index:rt.aPosition,typedArray:st,componentsPerAttribute:K,componentDatatype:L.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:J,normalize:![]}),V}function w(H,U,V,Y){var $=U.getUint32(V,!![]);if(V+=Uint32Array.BYTES_PER_ELEMENT,$<=0)return V;var K=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var J=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var Q=$*2*Int16Array.BYTES_PER_ELEMENT,et=new Uint8Array(H,V,Q);V+=Q;var nt=Y.vertexAttributes,st=Y.attrLocation;return st.aNormal=nt.length,nt.push({index:st.aNormal,typedArray:et,componentsPerAttribute:2,componentDatatype:L.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:J,normalize:![]}),V}function S(H,U,V,Y){Y.texCoordCompressConstant=[],Y.minTexCoordValue=[];var $=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;for(var K=0;K<$;K++){var J=U.getUint8(V,!![]);V+=Uint8Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT*3;var Q=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var et=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var nt=U.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var st=U.getFloat32(V,!![]);V+=Float32Array.BYTES_PER_ELEMENT,Y.texCoordCompressConstant.push(st);var ut={};ut.x=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,ut.y=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,ut.z=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,ut.w=U.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,Y.minTexCoordValue.push(ut);var rt=Q*et*Int16Array.BYTES_PER_ELEMENT,ht=new Uint8Array(H,V,rt);V+=rt;var Pt=V%4;Pt!==0&&(V+=4-Pt);var wt="aTexCoord"+K,Mt=Y.vertexAttributes,Ft=Y.attrLocation;if(Ft[wt]=Mt.length,Mt.push({index:Ft[wt],typedArray:ht,componentsPerAttribute:et,componentDatatype:L.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:et*Int16Array.BYTES_PER_ELEMENT,normalize:![]}),J){rt=Q*Float32Array.BYTES_PER_ELEMENT;var Dt=new Uint8Array(H,V,rt);V+=rt,Y.texCoordZMatrix=!![],wt="aTexCoordZ"+K,Ft[wt]=Mt.length,Mt.push({index:Ft[wt],typedArray:Dt,componentsPerAttribute:1,componentDatatype:L.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:![]})}}return V}function R(H,U,V,Y){return V=i(H,U,V,Y),V=n(H,U,V,Y),V=u(H,U,V,Y),V=g(H,U,V,Y),V=d(H,U,V,Y),V=y(H,U,V,Y),V}function B(H,U,V,Y){var $=U.getUint32(V,!![]);return Y.compressOptions=$,V+=Uint32Array.BYTES_PER_ELEMENT,($&f.default.SVC_Vertex)===f.default.SVC_Vertex?V=p(H,U,V,Y):V=i(H,U,V,Y),($&f.default.SVC_Normal)===f.default.SVC_Normal?V=w(H,U,V,Y):V=n(H,U,V,Y),V=u(H,U,V,Y),V=g(H,U,V,Y),($&f.default.SVC_TexutreCoord)===f.default.SVC_TexutreCoord?V=S(H,U,V,Y):V=d(H,U,V,Y),($&f.default.SVC_TexutreCoordIsW)===f.default.SVC_TexutreCoordIsW&&(Y.textureCoordIsW=!![]),V=y(H,U,V,Y),V}function k(H,U,V,Y){var $=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var K=0;K<$;K++){var J={},Q=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var et=U.getUint8(V,!![]);V+=Uint8Array.BYTES_PER_ELEMENT;var nt=U.getUint8(V,!![]);V+=Uint8Array.BYTES_PER_ELEMENT;var st=U.getUint8(V,!![]);if(V+=Uint8Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT,Q>0){var ut=null,rt=void 0;et===1||et===3?(rt=Q*Uint32Array.BYTES_PER_ELEMENT,ut=new Uint8Array(H,V,rt)):(rt=Q*Uint16Array.BYTES_PER_ELEMENT,ut=new Uint8Array(H,V,rt),Q%2!==0&&(rt+=2)),J.indicesTypedArray=ut,V+=rt}J.indicesCount=Q,J.indexType=et,J.primitiveType=st;var ht=[],Pt=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var wt=0;wt<Pt;wt++){var Mt=s(H,U,V),Ft=Mt.string;V=Mt.bytesOffset,ht.push(Ft),J.materialCode=Ft}var Dt=V%4;if(Dt!==0){var Rt=4-V%4;V+=Rt}Y.push(J)}return V}function P(H,U,V,Y){var $=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var K=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var J=0;J<K;J++){var Q=s(H,U,V),et=Q.string;V=Q.bytesOffset;var nt=V%4;nt!==0&&(V+=4-nt);var st=U.getUint32(V,!![]);V+=Int32Array.BYTES_PER_ELEMENT;var ut={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1};st===l.SV_Standard?V=R(H,U,V,ut):st===l.SV_Compressed&&(V=B(H,U,V,ut));var rt=[];V=k(H,U,V,rt),Y[et]={vertexPackage:ut,arrIndexPackage:rt}}var ht=U.getUint32(V,!![]);return V+=ht,V+=Uint32Array.BYTES_PER_ELEMENT,V}function D(H,U,V,Y){var $=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var K=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var J=0;J<K;J++){var Q=s(H,U,V),et=Q.string;V=Q.bytesOffset;var nt=V%4;nt!==0&&(V+=4-nt);var st=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var ut=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var rt=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var ht=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Pt=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var wt=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Mt=new Uint8Array(H,V,Pt);V+=Pt,Y[et]={id:et,width:ut,height:rt,compressType:ht,nFormat:wt,internalFormat:L.PixelFormat.RGBA_DXT5,imageBuffer:Mt}}return V}function A(H,U,V,Y){var $=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var K=new Uint8Array(H,V,$),J=L.getStringFromTypedArray(K);return V+=$,Y.materials=JSON.parse(J),V}var N=new L.Color,I=65536;function G(H,U,V,Y,$,K){if((Y&1)===1){var J=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Q=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var et=0;et<Q;et++){var nt=s(H,U,V),st=nt.string;V=nt.bytesOffset;var ut=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var rt={};$[st].pickInfo=rt;var ht=$[st].vertexPackage.instanceIndex;if(ht==-1){for(var Pt=new Float32Array($[st].vertexPackage.verticesCount),wt=0;wt<ut;wt++){var Mt=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Ft=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var Dt=[],Rt=0;Rt<Ft;Rt++){var Tt=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var mt=1;ht===-1&&(mt=U.getUint32(V,!![]),V+=Uint32Array.BYTES_PER_ELEMENT),Dt.push({vertexColorOffset:Tt,vertexColorCount:mt,batchId:wt})}rt[Mt]=Dt}W($[st].vertexPackage,Pt,void 0)}else{for(var Nt=$[st].vertexPackage.instanceCount,ct=$[st].vertexPackage.instanceBuffer,vt=$[st].vertexPackage.instanceMode,Lt=new Float32Array(Nt),Ct=[],jt=0;jt<ut;jt++){var zt=U.getUint32(V,!![]);Ct.push(zt),V+=Uint32Array.BYTES_PER_ELEMENT;var Yt=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var Zt=0;Zt<Yt;Zt++){var ft=U.getUint32(V,!![]);if(V+=Uint32Array.BYTES_PER_ELEMENT,K==2){var gt=U.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT}}}var dt=vt===17?16:28;dt*=Float32Array.BYTES_PER_ELEMENT;for(var lt=0;lt<Nt;lt++){Lt[lt]=lt;var ot=lt*vt*Float32Array.BYTES_PER_ELEMENT+dt;L.Color.unpack(ct,ot,N);var it=K===2?Ct[lt]:N.red+N.green*256+N.blue*I;rt[it]===void 0&&(rt[it]={vertexColorCount:1,instanceIds:[],vertexColorOffset:lt}),rt[it].instanceIds.push(lt)}W($[st].vertexPackage,Lt,1)}}}return V}function W(H,U,V){var Y=H.vertexAttributes,$=H.attrLocation,K=Y.length,J=V===1?"instanceId":"batchId";$[J]=K,Y.push({index:K,typedArray:U,componentsPerAttribute:1,componentDatatype:L.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,instanceDivisor:V})}h.parseBuffer=function(H){var U=0,V={version:void 0,groupNode:void 0,geoPackage:{},matrials:void 0,texturePackage:{}},Y=new DataView(H);V.version=Y.getFloat32(U,!![]),U+=Float32Array.BYTES_PER_ELEMENT;var $=Y.getUint32(U,!![]);U+=Uint32Array.BYTES_PER_ELEMENT;var K=r(H,U);Y=new DataView(K),U=0;var J=Y.getUint32(U,!![]);return U+=Uint32Array.BYTES_PER_ELEMENT,U=a(K,Y,U,V),U=P(K,Y,U,V.geoPackage),U=D(K,Y,U,V.texturePackage),U=A(K,Y,U,V),G(K,Y,U,J,V.geoPackage,V.version),V};var Z=h;z.default=Z},375974:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var e=`
        #extension GL_OES_standard_derivatives : enable
        uniform vec4 uDiffuseColor;
        uniform vec4 uAmbientColor;
        varying vec4 vColor;
        varying vec4 vSecondColor;
        uniform sampler2D uTexture;
        varying vec4 vTexCoord;
        varying vec4 vTexCoordTransform;
        uniform float uTexture0Width;
        varying vec4 vTexMatrix;
    #ifdef TexCoord2
        uniform sampler2D uTexture2;
        uniform float uTexture1Width;
        varying vec4 vTexMatrix2;
    #endif
        void calculateMipLevel(in vec2 inTexCoord, in float vecTile, in float fMaxMip, inout float mipLevel)
        {
            vec2 dx = dFdx(inTexCoord * vecTile);
            vec2 dy = dFdy(inTexCoord * vecTile);
            float dotX = dot(dx, dx);
            float dotY = dot(dy, dy);
            float dMax = max(dotX, dotY);
            float dMin = min(dotX, dotY);
            float offset = (dMax - dMin) / (dMax + dMin);
            offset = clamp(offset, 0.0, 1.0);
            float d = dMax * (1.0 - offset) + dMin * offset;
            mipLevel = 0.5 * log2(d);
            mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);
        }

        void calculateMipLevel(in vec2 inTexCoord, in vec2 vecTile, in float fMaxMip, inout float mipLevel)
        {
            vec2 dx = dFdx(inTexCoord * vecTile.x);
            vec2 dy = dFdy(inTexCoord * vecTile.y);
            float dotX = dot(dx, dx);
            float dotY = dot(dy, dy);
            float dMax = max(dotX, dotY);
            float dMin = min(dotX, dotY);
            float offset = (dMax - dMin) / (dMax + dMin);
            offset = clamp(offset, 0.0, 1.0);
            float d = dMax * (1.0 - offset) + dMin * offset;
            mipLevel = 0.5 * log2(d);
            mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);
        }

        void calculateTexCoord(in vec3 inTexCoord, in float scale, in float XTran, in float YTran, in float fTile, in float mipLevel, inout vec2 outTexCoord)
        {
            if(inTexCoord.z < -9000.0)
            {
                outTexCoord = inTexCoord.xy;
            }
            else
            {
                vec2 fTexCoord = fract(inTexCoord.xy);
                float offset = 1.0 * pow(2.0, mipLevel) / fTile;
                fTexCoord = clamp(fTexCoord, offset, 1.0 - offset);
                outTexCoord.x = (fTexCoord.x + XTran) * scale;
                outTexCoord.y = (fTexCoord.y + YTran) * scale;
            }
        }

        vec4 getTexColorForS3M(sampler2D curTexture, vec3 oriTexCoord, float texTileWidth, float fMaxMipLev, float fTexCoordScale, vec2 vecTexCoordTranslate)
        {
            vec4 color = vec4(1.0);
            float mipLevel = 0.0;
        #ifdef GL_OES_standard_derivatives
            calculateMipLevel(oriTexCoord.xy, texTileWidth, fMaxMipLev, mipLevel);
        #endif
            vec2 realTexCoord;
            calculateTexCoord(oriTexCoord, fTexCoordScale, vecTexCoordTranslate.x, vecTexCoordTranslate.y, texTileWidth, mipLevel, realTexCoord);
            if(oriTexCoord.z < -9000.0)
            {
                color = texture2D(curTexture, realTexCoord.xy);
            }
            else
            {
                #ifdef GL_EXT_shader_texture_lod
                    color = texture2DLodEXT(curTexture, realTexCoord.xy, mipLevel);
                #else
                    color = texture2D(curTexture, realTexCoord.xy, mipLevel);
                #endif
            }
            return color;
        }

        vec4 getTextureColor()
        {
            if(vTexMatrix.z < 0.0)
            {
                return vec4(1.0);
            }
            float texTileWidth0 = vTexMatrix.z * uTexture0Width;
            vec3 realTexCoord = vec3(vTexCoord.xy, vTexCoordTransform.x);
            vec4 FColor = getTexColorForS3M(uTexture, realTexCoord, texTileWidth0, vTexMatrix.w, vTexMatrix.z, vTexMatrix.xy);
        #ifdef TexCoord2
            float texTileWidth1 = vTexMatrix2.z * uTexture1Width;
            realTexCoord = vec3(vTexCoord.zw, vTexCoordTransform.y);
            vec4 SColor = getTexColorForS3M(uTexture2, realTexCoord, texTileWidth1, vTexMatrix2.w, vTexMatrix2.z, vTexMatrix2.xy);
            SColor.r = clamp(SColor.r, 0.0, 1.0);
            SColor.g = clamp(SColor.g, 0.0, 1.0);
            SColor.b = clamp(SColor.b, 0.0, 1.0);
            return FColor * SColor;
        #else
            return FColor;
        #endif
        }

    #ifdef clippingPlane
    #ifdef clippingPlanesUsingFloatTexture
        vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform, int width, int height)
        {
            int pixY = clippingPlaneNumber / width;
            int pixX = clippingPlaneNumber - (pixY * width);
            float u = (float(pixX) + 0.5) / float(width);
            float v = (float(pixY) + 0.5) / float(height);
            vec4 plane = texture2D(packedClippingPlanes, vec2(u, v));
            return czm_transformPlane(plane, transform);
        }
    #else
        vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform, int width, int height)
        {
            int clippingPlaneStartIndex = clippingPlaneNumber * 2;
            int pixY = clippingPlaneStartIndex / width;
            int pixX = clippingPlaneStartIndex - (pixY * width);
            float u = (float(pixX) + 0.5) / float(width);
            float v = (float(pixY) + 0.5) / float(height);
            vec4 oct32 = texture2D(packedClippingPlanes, vec2(u, v)) * 255.0;
            vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);
            vec4 plane;
            plane.xyz = czm_octDecode(oct, 65535.0);
            plane.w = czm_unpackFloat(texture2D(packedClippingPlanes, vec2(u + pixelWidthString, v)));
            return czm_transformPlane(plane, transform);
        }
    #endif
    #ifdef unionClippingRegions
        float clip(vec4 fragCoord, highp sampler2D clippingPlanes, mat4 clippingPlanesMatrix, int width, int height, int clippingPlanesLength)
        {
            vec4 position = czm_windowToEyeCoordinates(fragCoord);
            vec3 clipNormal = vec3(0.0);
            vec3 clipPosition = vec3(0.0);
            float clipAmount;
            float pixelWidth = czm_metersPerPixel(position);
            bool breakAndDiscard = false;
            for (int i = 0; i < 1000; ++i)
            {
                if (i >= clippingPlanesLength)
                {
                    break;
                }
                vec4 clippingPlanei = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix, width, height);
                clipNormal = clippingPlanei.xyz;
                clipPosition = -clippingPlanei.w * clipNormal;
                float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;
                clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));
                if (amount <= 0.0)
                {
                   breakAndDiscard = true;
                   break;
                }
            }
            if (breakAndDiscard) {
                discard;
            }
            return clipAmount;
        }
    #else
        float clip(vec4 fragCoord, highp sampler2D clippingPlanes, mat4 clippingPlanesMatrix, int width, int height, int clippingPlanesLength)
        {
            bool clipped = true;
            vec4 position = czm_windowToEyeCoordinates(fragCoord);
            vec3 clipNormal = vec3(0.0);
            vec3 clipPosition = vec3(0.0);
            float clipAmount = 0.0;
            float pixelWidth = czm_metersPerPixel(position);
            for (int i = 0; i < 1000; ++i)
            {
                if (i >= clippingPlanesLength)
                {
                    break;
                }
                vec4 clippingPlanei = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix, width, height);
                clipNormal = clippingPlanei.xyz;
                clipPosition = -clippingPlanei.w * clipNormal;
                float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;
                clipAmount = max(amount, clipAmount);
                clipped = clipped && (amount <= 0.0);
            }
            if (clipped)
            {
                discard;
            }
            return clipAmount;
        }
    #endif
        uniform highp sampler2D s3m_clippingPlanes;
        uniform mat4 s3m_clippingPlanesMatrix;
        uniform vec4 s3m_clippingPlanesEdgeStyle;
        uniform int s3m_width;
        uniform int s3m_height;
        uniform int s3m_clippingPlanesLength;
    #endif
    #ifdef clippingPolygon
        uniform highp sampler2D s3m_clippingPolygonsTexture;
        uniform mat4 s3m_toClippingPolygonsTexture;
    #endif
        void main()
        {
            vec4 color = getTextureColor() * vColor;
            gl_FragColor = czm_gammaCorrect(color);

        #ifdef clippingPlane
            float clipDistance = clip(gl_FragCoord, s3m_clippingPlanes, s3m_clippingPlanesMatrix, s3m_width, s3m_height, s3m_clippingPlanesLength);
            vec4 clippingPlanesEdgeColor = vec4(1.0);
            clippingPlanesEdgeColor.rgb = s3m_clippingPlanesEdgeStyle.rgb;
            float clippingPlanesEdgeWidth = s3m_clippingPlanesEdgeStyle.a;
            if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth)
            {
                gl_FragColor = clippingPlanesEdgeColor;
            }
        #endif
        
        #ifdef clippingPolygon
            vec4 ec = czm_windowToEyeCoordinates(gl_FragCoord);
            vec4 wc = czm_inverseView * ec;
            wc /= wc.w;
            vec4 tc = s3m_toClippingPolygonsTexture * wc;
            vec2 tc2 = tc.xy/tc.w;
            if (tc2.x > 0.0 && tc2.x < 1.0 && tc2.y > 0.0 && tc2.y < 1.0)
            {
               vec4 color = texture2D(s3m_clippingPolygonsTexture, tc2);
               if (color.r > 0.0)
                {
                    discard;
                }
            }
        #endif
        }
    `;z.default=e},617090:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var e=`
        attribute vec4 aPosition;
        attribute vec4 aColor;
        attribute vec4 aTexCoord0;
        uniform float uTexture0Width;
        varying vec4 vTexMatrix;
        varying vec4 vTexCoordTransform;
        varying vec4 vSecondColor;
    #ifdef BatchTable
      #ifdef Instance
        attribute float instanceId;
      #else
        attribute float batchId;
      #endif 
    #endif    
    #ifdef TexCoord2
        attribute vec4 aTexCoord1;
        uniform float uTexture1Width;
        varying vec4 vTexMatrix2;
    #endif
    #ifdef Instance
        attribute vec4 uv2;
        attribute vec4 uv3;
        attribute vec4 uv4;
        attribute vec4 secondary_colour;
        attribute vec4 uv6;   
    #endif
        varying vec4 vTexCoord;
        varying vec4 vColor;
        const float SHIFT_LEFT8 = 256.0;
        const float SHIFT_RIGHT8 = 1.0 / 256.0;
        const float SHIFT_RIGHT4 = 1.0 / 16.0;
        const float SHIFT_LEFT4 = 16.0;
        void getTextureMatrixFromZValue(in float nZ, inout float XTran, inout float YTran, inout float scale)
        {
            if(nZ <= 0.0)
            {
                return;
            }
            float nDel8 = floor(nZ * SHIFT_RIGHT8);
            float nDel16 = floor(nDel8 * SHIFT_RIGHT8);
            float nDel20 = floor(nDel16 * SHIFT_RIGHT4);
            YTran = nZ - nDel8 * SHIFT_LEFT8;
            XTran = nDel8 - nDel16 * SHIFT_LEFT8;
            float nLevel = nDel16 - nDel20 * SHIFT_LEFT4;
            scale = 1.0 / pow(2.0, nLevel);
        }
    #ifdef flattenPolygon
        uniform highp sampler2D s3m_flattenPolygonsTexture;
        uniform mat4 s3m_flattenPolygonsViewProjectionMatrix;
        uniform mat4 s3m_flattenPolygonsInverseViewProjectionMatrix;
    #endif
        
        void main()
        {
            vTexCoord.xy = aTexCoord0.xy;
        #ifdef TexCoord2
            vTexCoord.zw = aTexCoord1.xy;
        #endif
            vTexMatrix = vec4(0.0,0.0,1.0,0.0);
            vTexCoordTransform.x = aTexCoord0.z;
            if(vTexCoordTransform.x < -90000.0)
            {
                vTexMatrix.z = -1.0;
            }
            getTextureMatrixFromZValue(floor(vTexCoordTransform.x), vTexMatrix.x, vTexMatrix.y, vTexMatrix.z);
            vTexMatrix.w = log2(uTexture0Width * vTexMatrix.z);
        #ifdef TexCoord2
            vTexMatrix2 = vec4(0.0,0.0,1.0,0.0);
            vTexCoordTransform.y = aTexCoord1.z;
            getTextureMatrixFromZValue(floor(vTexCoordTransform.y), vTexMatrix2.x, vTexMatrix2.y, vTexMatrix2.z);
            vTexMatrix2.w = log2(uTexture1Width * vTexMatrix.z);
        #endif
        vec4 vertexPos = aPosition;
        vec4 vertexColor = aColor;
        #ifdef Instance
            mat4 worldMatrix;
            worldMatrix[0] = uv2;
            worldMatrix[1] = uv3;
            worldMatrix[2] = uv4;
            worldMatrix[3] = vec4(0, 0, 0, 1);
            vertexPos = vec4(vertexPos.xyz,1.0)*worldMatrix;
            vertexColor *= secondary_colour; 
        #endif
        #ifdef BatchTable
        #ifdef Instance  
           float index = instanceId;
        #else
           float index = batchId;
        #endif  
          vSecondColor = batchTable_pickColor(index);
        #endif    
            vColor = vertexColor;
            gl_Position = czm_modelViewProjection * vec4(vertexPos.xyz, 1.0);
            
        #ifdef flattenPolygon
            vec4 fp_position = vec4(vertexPos.xyz,1.0);
            vec4 tc = s3m_flattenPolygonsViewProjectionMatrix * fp_position;
            vec2 tc2 = tc.xy/tc.w;
            if (tc2.x > 0.0 && tc2.x < 1.0 && tc2.y > 0.0 && tc2.y < 1.0)
            {
                vec4 color = texture2D(s3m_flattenPolygonsTexture, tc2);
                if (color.r > 0.0)
                {
                    vec4 cc = vec4(tc2.xy,color.r,1.0);
                    gl_Position = czm_projection * s3m_flattenPolygonsInverseViewProjectionMatrix * cc;
                }
            }
        #endif
        }
    `;z.default=e},36054:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.S3MTilesLayerProvider=h;var b=M(e(578756)),L=M(e(728954)),T=o(e(187647)),C=M(e(894436)),f=M(e(335290)),v=M(e(322331));function m(a){if(typeof F!="function")return null;var i=new F,n=new F;return(m=function(g){return g?n:i})(a)}function o(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||E(a)!=="object"&&typeof a!="function")return{default:a};var n=m(i);if(n&&n.has(a))return n.get(a);var u={},g=Object.defineProperty&&O;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?O(a,d):null;y&&(y.get||y.set)?Object.defineProperty(u,d,y):u[d]=a[d]}return u.default=a,n&&n.set(a,u),u}function h(a){a=T.defaultValue(a,T.defaultValue.EMPTY_OBJECT),T.Check.defined("options.url",a.url),T.Check.defined("options.context",a.context),this.context=a.context,this._url=void 0,this._basePath=void 0,this._baseResource=void 0,this.modelMatrix=void 0,this.fileType=void 0,this._position=void 0,this._rectangle=void 0,this._root=void 0,this._rootTiles=[],this._schuduler=new f.default,this._requestTiles=[],this._selectedTiles=[],this._cache=new v.default,this._maximumMemoryUsage=-1,this._totalMemoryUsageInBytes=0,this._readyPromise=void 0,this.loadConfig(a.url),this._initialClippingPlanesOriginMatrix=T.Matrix4.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!![],this._clippingPlanes=void 0,this.clippingPlanes=a.clippingPlanes,this._flattenPolygons=void 0,this.flattenPolygons=a.flattenPolygons}Object.defineProperties(h.prototype,{ready:{get:function(){return this._rootTiles.length>0}},readyPromise:{get:function(){return this._readyPromise}},rectangle:{get:function(){return this._rectangle}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes},set:function(i){this._totalMemoryUsageInBytes=i}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(i){this._maximumMemoryUsage=i}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(i){T.ClippingPlaneCollection.setOwner(i,this,"_clippingPlanes")}},clippingPlanesOriginMatrix:{get:function(){return T.defined(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(this._initialClippingPlanesOriginMatrix=T.Matrix4.clone(this.modelMatrix),this._clippingPlanesOriginMatrix=T.Matrix4.clone(this._initialClippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=![]),this._clippingPlanesOriginMatrix):T.Matrix4.IDENTITY}},flattenPolygons:{get:function(){return this._flattenPolygons},set:function(i){T.FlattenPolygonCollection.setOwner(i,this,"_flattenPolygons")}}}),h.prototype.loadConfig=function(a){var i=this;this._readyPromise=b.default.resolve(a).then(function(n){var u,g=T.Resource.createIfNeeded(n);return u=g.getBaseUri(!![]),i._url=g.url,i._basePath=u,i._baseResource=g,g.fetchJson()}).then(function(n){var u=n.extensions;i.fileType=u["s3m:FileType"];var g=n.position.x,d=n.position.y,y=n.position.z;i._position=T.Cartesian3.fromDegrees(g,d,y),i.modelMatrix=T.Transforms.eastNorthUpToFixedFrame(i._position),i._rectangle=T.Rectangle.fromDegrees(n.geoBounds.left,n.geoBounds.bottom,n.geoBounds.right,n.geoBounds.top);for(var p=0,w=n.tiles.length;p<w;p++){var S=n.tiles[p].url,R={box:n.tiles[p].boundingbox},B=new C.default(i,void 0,R,S);i._root=B,i._cache.add(B),i._rootTiles.push(B)}return i._initialClippingPlanesOriginMatrix=T.Matrix4.clone(i.modelMatrix),i._clippingPlanesOriginMatrix=T.Matrix4.clone(i._initialClippingPlanesOriginMatrix),i})};function l(a,i){return a.priority-i.priority}function r(a){var i=a._requestTiles,n=i.length;(0,L.default)(i).call(i,l);for(var u=0;u<n;++u){var g=i[u];g.requestContent()}}function s(a,i){for(var n=a._selectedTiles,u=n.length,g=0;g<u;g++)n[g].update(i,a)}function c(a,i){}function x(a){a._cache.unloadTiles(a,c)}h.prototype.prePassesUpdate=function(a){if(this.ready){var i=this.clippingPlanes;this._clippingPlanesOriginMatrixDirty=!![],T.defined(i)&&i.enabled&&i.update(a);var n=this.flattenPolygons;T.defined(n)&&n.enabled&&n.update(a),a.newFrame&&this._cache.reset()}},h.prototype.update=function(a){this.ready&&(this._schuduler.scheduler(this,a),r(this),s(this,a),x(this))},h.prototype.destroy=function(){return this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._flattenPolygons=this._flattenPolygons&&this._flattenPolygons.destroy(),T.destroyObject(this)}},478288:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.flyTo=n,z.getCameraPosition=R,z.getCatesian3FromPX=S,z.getHandelPosition=P,z.saveSceneImages=D,z.setBloomLightScenen=a,z.setBlurBloom=l,z.setCameraEotateHeading=p,z.setDarkEffect=h,z.setDefSceneConfig=x,z.setFogEffect=c,z.setOneSkyBox=v,z.setRainEffect=r,z.setSnowEffect=s,z.setThreeSkyBox=o,z.setTwoSkyBox=m,z.setView=i,z.transformCartesianArrayToWGS84Array=y,z.transformCartesianToWGS84=u,z.transformWGS84ArrayToCartesianArray=g,z.transformWGS84ToCartesian=d,z.transformWGS84ToCartographic=w,z.updateCameraState=B;var b=M(e(828866)),L=M(e(237561)),T=f(e(187647));function C(A){if(typeof F!="function")return null;var N=new F,I=new F;return(C=function(W){return W?I:N})(A)}function f(A,N){if(!N&&A&&A.__esModule)return A;if(A===null||E(A)!=="object"&&typeof A!="function")return{default:A};var I=C(N);if(I&&I.has(A))return I.get(A);var G={},W=Object.defineProperty&&O;for(var Z in A)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(A,Z)){var H=W?O(A,Z):null;H&&(H.get||H.set)?Object.defineProperty(G,Z,H):G[Z]=A[Z]}return G.default=A,I&&I.set(A,G),G}function v(){return new T.SkyBox({sources:{positiveX:"Assets3D/SkyBox/00h+00.jpg",negativeX:"Assets3D/SkyBox/12h+00.jpg",positiveY:"Assets3D/SkyBox/06h+00.jpg",negativeY:"Assets3D/SkyBox/18h+00.jpg",positiveZ:"Assets3D/SkyBox/06h+90.jpg",negativeZ:"Assets3D/SkyBox/06h-90.jpg"}})}function m(){return new T.SkyBox({sources:{positiveX:"Assets3D/SkyBox/Version2_dark_px.jpg",negativeX:"Assets3D/SkyBox/Version2_dark_mx.jpg",positiveY:"Assets3D/SkyBox/Version2_dark_py.jpg",negativeY:"Assets3D/SkyBox/Version2_dark_my.jpg",positiveZ:"Assets3D/SkyBox/Version2_dark_pz.jpg",negativeZ:"Assets3D/SkyBox/Version2_dark_mz.jpg"}})}function o(){return new T.SkyBox({sources:{positiveX:"Assets3D/SkyBox/tycho2t3_80_pxs.jpg",negativeX:"Assets3D/SkyBox/tycho2t3_80_mxs.jpg",positiveY:"Assets3D/SkyBox/tycho2t3_80_pys.jpg",negativeY:"Assets3D/SkyBox/tycho2t3_80_mys.jpg",positiveZ:"Assets3D/SkyBox/tycho2t3_80_pzs.jpg",negativeZ:"Assets3D/SkyBox/tycho2t3_80_mzs.jpg"}})}function h(A){A=A||{};var N=`uniform sampler2D colorTexture;
varying vec2 v_textureCoordinates;
uniform float scale;
uniform vec3 offset;
void main() {
 // vec4 color = texture2D(colorTexture, v_textureCoordinates);
 vec4 color = texture2D(colorTexture, v_textureCoordinates);
 // float gray = 0.2989*color.r+0.5870*color.g+0.1140*color.b;
 // gl_FragColor = vec4(gray,gray,2.0*(gray+1.0), 1.0);
 gl_FragColor = vec4(color.r*0.2,color.g * 0.4,color.b*0.6, 1.0);
}
`;return this._viewer.scene.postProcessStages.add(new T.PostProcessStage({name:"darkEffect",fragmentShader:N,uniforms:{scale:1,offset:function(){return A.offset||new T.Cartesian3(.1,.2,.3)}}}))}function l(A){if(this._viewer&&A){var N=`uniform float height;
uniform float width;
uniform sampler2D colorTexture1;

varying vec2 v_textureCoordinates;

const int SAMPLES = 9;
void main()
{
vec2 st = v_textureCoordinates;
float wr = float(1.0 / width);
float hr = float(1.0 / height);
vec4 result = vec4(0.0);
int count = 0;
for(int i = -SAMPLES; i <= SAMPLES; ++i){
for(int j = -SAMPLES; j <= SAMPLES; ++j){
vec2 offset = vec2(float(i) * wr, float(j) * hr);
result += texture2D(colorTexture1, st + offset);
}
}
result = result / float(count);
gl_FragColor = result;
}
`;return this._viewer.scene.postProcessStages.add(new T.PostProcessStage({name:"blur_x_direction",fragmentShader:N,uniforms:{width:A.width,height:A.height,colorTexture1:"Bright"}}))}}function r(){if(this._viewer){var A=`uniform sampler2D colorTexture;
                varying vec2 v_textureCoordinates;
                
                float hash(float x){
                return fract(sin(x*23.3)*13.13);
                }
                
                void main(){
                    float time = czm_frameNumber / 60.0;
                    vec2 resolution = czm_viewport.zw;
                    vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);
                    vec3 c=vec3(.6,.7,.8);
                    float a=-.4;
                    float si=sin(a),co=cos(a);
                    uv*=mat2(co,-si,si,co);
                    uv*=length(uv+vec2(0,4.9))*.3+1.;
                    float v=1.-sin(hash(floor(uv.x*100.))*2.);
                    float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;
                    c*=v*b;
                    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c, 1), 0.2);
                }
                `;return this._viewer.scene.postProcessStages.add(new T.PostProcessStage({name:"rainEffect",fragmentShader:A}))}}function s(){if(this._viewer){var A=`uniform sampler2D colorTexture;
                    varying vec2 v_textureCoordinates;
                    
                    float snow(vec2 uv,float scale){
                        float time = czm_frameNumber / 60.0;
                        float w=smoothstep(1.,0.,-uv.y*(scale/10.));
                        if(w<.1)return 0.;
                        uv+=time/scale;
                        uv.y+=time*2./scale;
                        uv.x+=sin(uv.y+time*.5)/scale;
                        uv*=scale;
                        vec2 s=floor(uv),f=fract(uv),p;
                        float k=3.,d;
                        p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;
                        d=length(p);
                        k=min(d,k);
                        k=smoothstep(0.,k,sin(f.x+f.y)*0.01);
                        return k*w;
                    }
                    
                    void main(){
                        vec2 resolution = czm_viewport.zw;
                        vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);
                        vec3 finalColor=vec3(0);
                        float c = 0.0;
                        c+=snow(uv,30.)*.0;
                        c+=snow(uv,20.)*.0;
                        c+=snow(uv,15.)*.0;
                        c+=snow(uv,10.);
                        c+=snow(uv,8.);
                        c+=snow(uv,6.);
                        c+=snow(uv,5.);
                        finalColor=(vec3(c));
                        gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.3);
                        
                    }
                    `;return this._viewer.scene.postProcessStages.add(new T.PostProcessStage({name:"snowEffect",fragmentShader:A}))}}function c(){if(this._viewer){var A=`float getDistance(sampler2D depthTexture, vec2 texCoords) 
{ 
    float depth = czm_unpackDepth(texture2D(depthTexture, texCoords)); 
    if (depth == 0.0) { 
        return czm_infinity; 
    } 
    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depth); 
    return -eyeCoordinate.z / eyeCoordinate.w; 
} 
float interpolateByDistance(vec4 nearFarScalar, float distance) 
{ 
    float startDistance = nearFarScalar.x; 
    float startValue = nearFarScalar.y; 
    float endDistance = nearFarScalar.z; 
    float endValue = nearFarScalar.w; 
    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0); 
    return mix(startValue, endValue, t); 
} 
vec4 alphaBlend(vec4 sourceColor, vec4 destinationColor) 
{ 
    return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a); 
} 
uniform sampler2D colorTexture; 
uniform sampler2D depthTexture; 
uniform vec4 fogByDistance; 
uniform vec4 fogColor; 
varying vec2 v_textureCoordinates; 
void main(void) 
{ 
    float distance = getDistance(depthTexture, v_textureCoordinates); 
    vec4 sceneColor = texture2D(colorTexture, v_textureCoordinates); 
    float blendAmount = interpolateByDistance(fogByDistance, distance); 
    vec4 finalFogColor = vec4(fogColor.rgb, fogColor.a * blendAmount); 
    gl_FragColor = alphaBlend(finalFogColor, sceneColor); 
} 
`;return this._viewer.scene.postProcessStages.add(new T.PostProcessStage({fragmentShader:A,uniforms:{fogByDistance:new T.Cartesian4(10,0,200,1),fogColor:T.Color.BLACK}}))}}function x(){this._viewer&&(this._viewer.scene.sun.show=![],this._viewer.scene.moon.show=![],this._viewer.scene.fxaa=!![],this._viewer.scene.globe.depthTestAgainstTerrain=!![],this._viewer.scene.undergroundMode=![],this._viewer.scene.terrainProvider.isCreateSkirt=![],this._viewer.scene.skyAtmosphere.show=![],this._viewer.scene.globe.showGroundAtmosphere=![],this._viewer.scene.globe.enableLighting=!![],this._viewer.scene.fog.enabled=![],this._viewer.cesiumWidget.creditContainer.style.display="none")}function a(){this._viewer&&(this._viewer.scene.postProcessStages.bloom.enabled=!![],this._viewer.scene.postProcessStages.bloom.uniforms.contrast=119,this._viewer.scene.postProcessStages.bloom.uniforms.brightness=-.4,this._viewer.scene.postProcessStages.bloom.uniforms.glowOnly=![],this._viewer.scene.postProcessStages.bloom.uniforms.delta=.9,this._viewer.scene.postProcessStages.bloom.uniforms.sigma=3.78,this._viewer.scene.postProcessStages.bloom.uniforms.stepSize=5,this._viewer.scene.postProcessStages.bloom.uniforms.isSelected=![])}function i(A,N){if(A&&N&&N.position){if(N.distance){var I=new T.Cartesian3(0,N.distance,opt.distance);N.position=T.Cartesian3.add(N.position,I,new T.Cartesian3)}A.scene.camera.setView({destination:N.position,orientation:N.orientation||{heading:T.Math.toRadians(90),pitch:T.Math.toRadians(90),roll:T.Math.toRadians(0)}})}}function n(A,N){if(A&&N&&N.position){if(N.distance){var I=new T.Cartesian3(0,N.distance,N.distance);N.position=T.Cartesian3.add(N.position,I,new T.Cartesian3)}A.scene.camera.flyTo({destination:N.position,orientation:N.orientation||{heading:T.Math.toRadians(90),pitch:T.Math.toRadians(90),roll:T.Math.toRadians(0)},easingFunction:N.easingFunction||T.EasingFunction.LINEAR_NONE,duration:N.duration||3,complete:N.callback})}}function u(A){if(A){var N=T.Ellipsoid.WGS84,I=N.cartesianToCartographic(A);return{lng:T.Math.toDegrees(I.longitude),lat:T.Math.toDegrees(I.latitude),alt:I.height}}}function g(A,N){if(A){var I=this;return A?(0,b.default)(A).call(A,function(G){return d(G,N)}):[]}}function d(A,N){return A?T.Cartesian3.fromDegrees(A.lng||A.lon,A.lat,A.alt=N||A.alt,T.Ellipsoid.WGS84):T.Cartesian3.ZERO}function y(A){var N=this;return A?(0,b.default)(A).call(A,function(I){return N.transformCartesianToWGS84(I)}):[]}function p(A,N){if(N){var I=T.Cartesian3.fromDegrees(N.lng,N.lat,N.height),G=T.Math.toRadians(-30),W=360/30,Z=5e3,H=T.JulianDate.fromDate(new Date);A.clock.startTime=H.clone(),A.clock.currentTime=H.clone(),A.clock.clockRange=T.ClockRange.CLAMPED,A.clock.clockStep=T.ClockStep.SYSTEM_CLOCK;var U=A.camera.heading,V=function(){var $=T.JulianDate.secondsDifference(A.clock.currentTime,A.clock.startTime),K=T.Math.toRadians($*W)+U;A.scene.camera.setView({destination:I,orientation:{heading:K,pitch:G}}),A.scene.camera.moveBackward(Z),T.JulianDate.compare(A.clock.currentTime,A.clock.stopTime)>=0&&A.clock.onTick.removeEventListener(V)};A.clock.onTick.addEventListener(V)}}function w(A){return A?T.Cartographic.fromDegrees(A.lng||A.lon,A.lat,A.alt):T.Cartographic.ZERO}function S(A,N){if(A&&N){var I=A.scene.pick(N),G=null,W=![],Z=![];if(I instanceof T.Cesium3DTileFeature&&(W=!![]),W&&(G=A.scene.pickPosition(N),G)){var H=T.Cartographic.fromCartesian(G);H.height<0&&(H.height=0);var U=T.Math.toDegrees(H.longitude),V=T.Math.toDegrees(H.latitude),Y=H.height;G=this.transformWGS84ToCartesian({lng:U,lat:V,alt:Y})}if(!I&&!A.terrainProvide instanceof T.EllipsoidTerrainProvider){var $=A.scene.camera.getPickRay(N);if(!$)return null;G=A.scene.globe.pick($,A.scene),Z=!![]}if(!W&&!Z&&(G=A.scene.camera.pickEllipsoid(N,A.scene.globe.ellipsoid)),G){var K=this.transformCartesianToWGS84(G);return K.alt<0&&(G=this.transformWGS84ToCartesian(K,.1)),G}return![]}}function R(A){if(A){var N=A.scene.camera.pickEllipsoid(new T.Cartesian2(A.canvas.clientWidth/2,A.canvas.clientHeight/2));if(N){var I=T.Ellipsoid.WGS84.cartesianToCartographic(N),G=I.longitude*180/Math.PI,W=I.latitude*180/Math.PI,Z=A.camera._direction,H=T.Math.toDegrees(Z.x),U=T.Math.toDegrees(Z.y),V=T.Math.toDegrees(Z.z),Y=A.camera.positionCartographic.height,$=T.Math.toDegrees(A.camera.heading),K=T.Math.toDegrees(A.camera.pitch),J=T.Math.toDegrees(A.camera.roll),Q=A.camera.computeViewRectangle(),et=Q.west/Math.PI*180,nt=Q.north/Math.PI*180,st=Q.east/Math.PI*180,ut=Q.south/Math.PI*180,rt=(et+st)/2,ht=(nt+ut)/2;return{lon:G,lat:W,height:Y,heading:$,pitch:K,roll:J,position:A.camera.position,center:{x:rt,y:ht},direction:new T.Cartesian3(H,U,V)}}}}function B(A,N){A.scene._screenSpaceCameraController.enableRotate=N,A.scene._screenSpaceCameraController.enableTranslate=N,A.scene._screenSpaceCameraController.enableZoom=N,A.scene._screenSpaceCameraController.enableTilt=N,A.scene._screenSpaceCameraController.enableLook=N}function k(A,N,I,G){if(A){var W=new T.ScreenSpaceEventHandler(A.canvas);W.setInputAction(function(Z){N&&N(Z,W)},T.ScreenSpaceEventType.LEFT_CLICK),W.setInputAction(function(Z){I&&I(Z,W)},T.ScreenSpaceEventType.MOUSE_MOVE),W.setInputAction(function(Z){G&&G(Z,W)},T.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}}function P(A,N){if(A){var I=new T.ScreenSpaceEventHandler(A.scene.canvas),G=this;I.setInputAction(function(W){var Z=A.scene.camera.pickEllipsoid(W.endPosition,A.scene.globe.ellipsoid);typeof N=="function"&&N(G.transformCartesianToWGS84(Z),I)},T.ScreenSpaceEventType.MOUSE_MOVE)}}function D(A){if(A){let U=function(V){for(var Y=V.split(","),$=Y[0].match(/:(.*?);/)[1],K=atob(Y[1]),J=K.length,Q=new Uint8Array(J);J--;)Q[J]=K.charCodeAt(J);return new Blob([Q],{type:$})};var N=A.scene.canvas,I=N.toDataURL("image/png").replace("image/png","image/octet-stream"),G=document.createElement("a"),W=I.substr(22,I.length),Z=U(I),H=L.default.createObjectURL(Z);G.download="scene.png",G.href=H,G.click()}}},456865:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var L=b(e(636583)),T=b(e(342579)),C=b(e(122777)),f=b(e(42762)),v=b(e(520314)),m=b(e(869257)),o=s(e(187647)),h=b(e(875420));e(835156);var l;function r(Q){if(typeof O!="function")return null;var et=new O,nt=new O;return(r=function(ut){return ut?nt:et})(Q)}function s(Q,et){if(!et&&Q&&Q.__esModule)return Q;if(Q===null||F(Q)!=="object"&&typeof Q!="function")return{default:Q};var nt=r(et);if(nt&&nt.has(Q))return nt.get(Q);var st={},ut=Object.defineProperty&&M;for(var rt in Q)if(rt!=="default"&&Object.prototype.hasOwnProperty.call(Q,rt)){var ht=ut?M(Q,rt):null;ht&&(ht.get||ht.set)?Object.defineProperty(st,rt,ht):st[rt]=Q[rt]}return st.default=Q,nt&&nt.set(Q,st),st}var c=o.defined,x=o.createGuid,a=o.Color,i=o.Cartesian3,n=o.Material,u=o.Matrix3,g=o.Matrix4,d=o.Transforms,y=o.Camera,p=o.Quaternion,w=o.GeometryInstance,S=o.FrustumOutlineGeometry,R=o.ColorGeometryInstanceAttribute,B=o.ShowGeometryInstanceAttribute,k=o.Primitive,P=o.PerInstanceColorAppearance,D=o.HeadingPitchRoll,A="videoContainer"+(0,v.default)(l=x()).call(l,0,4),N=`
<video-js id="`.concat(A,`" class="video-js" style="position:absolute;bottom: 175px;right: 517px;width:320px;height: 180px">
</video-js>
`),I,G,W,Z,H=function(){function Q(et,nt){(0,C.default)(this,Q),this.earth=et,this.options=nt}return(0,f.default)(Q,[{key:"videoPlayer",get:function(){return I}},{key:"videoProjection",get:function(){return G}},{key:"frustumOutline",get:function(){return W}},{key:"sketch",get:function(){return Z}},{key:"openVideo",value:function(){var nt=this;this.closeVideo();var st=this.options,ut=st.videoUrl,rt=st.showPlayer;ut=ut||"http://vjs.zencdn.net/v/oceans.mp4";var ht=this.earth.viewer.container,Pt=new DOMParser,wt=Pt.parseFromString(N,"text/xml");wt=wt.children[0];var Mt=document.getElementById(A);!Mt&&ht.appendChild(wt);var Ft={autoplay:!![],controls:!![],loop:!![],muted:![],resizeManager:!![],html5:{vhs:{withCredentials:![]}},sources:[{src:ut}]};I=(0,h.default)(A,Ft),I.controlBar.hide(),I.bigPlayButton.hide(),I.show=function(){(0,T.default)(this,nt),document.getElementById("".concat(A,"_html5_api")).style.display="block"}.bind(this),I.hide=function(){(0,T.default)(this,nt),document.getElementById("".concat(A,"_html5_api")).style.display="none"}.bind(this),document.getElementById("".concat(A,"_html5_api")).setAttribute("crossorigin","anonymous"),rt||I.hide()}},{key:"closeVideo",value:function(){var nt;(nt=I)===null||nt===void 0||nt.dispose(),I=null}},{key:"parameterValidation",value:function(){var nt=!![],st=this.options,ut=st.viewPosition,rt=st.viewEndPosition,ht=st.viewDistance,Pt=st.viewHeading,wt=st.viewPitch,Mt=st.horizontalViewAngle,Ft=st.verticalViewAngle,Dt=st.aspectRatio;return ut||(nt=![]),ut=$(ut),c(ht)&&c(Pt)&&c(wt)||(rt?(rt=$(rt),ht=i.distance(ut,rt),Pt=V(ut,rt),wt=Y(ut,rt),rt=K(rt)):nt=![]),!!Mt+!!Ft+!!Dt>=2?(Mt=Mt||Ft*Dt,Ft=Ft||Mt/Dt):nt=![],!nt&&E.error("\u53C2\u6570\u9519\u8BEF",this.options),(0,m.default)(this.options,{viewPosition:ut,viewEndPosition:rt,viewDistance:ht,viewHeading:Pt,viewPitch:wt,horizontalViewAngle:Mt,verticalViewAngle:Ft}),nt}},{key:"execute",value:function(){if(this.destroy(),this.openVideo(),!!this.parameterValidation()){var nt=this.options,st=nt.viewPosition,ut=nt.viewDistance,rt=nt.viewHeading,ht=nt.viewPitch,Pt=nt.horizontalViewAngle,wt=nt.verticalViewAngle,Mt=nt.showFrustumOutline,Ft=nt.showSketch,Dt=nt.projection;Ft&&this.drawSketch(),Mt&&this.drawFrustumOutline();var Rt=n.fromType("Image");Rt.uniforms.image=document.getElementById("".concat(A,"_html5_api")),G&&G.clear(),Dt&&(G=new o.VideoProjection(this.earth.viewer,{viewPosition:st,viewDistance:ut,viewHeading:rt,viewPitch:ht,horizontalViewAngle:Pt,verticalViewAngle:wt,material:Rt})),this.options.viewPosition=K(st)}}},{key:"destroy",value:function(){var nt;this.closeVideo(),(nt=G)===null||nt===void 0||nt.clear(),Z&&this.earth.viewer.entities.removeById(Z.id),W&&this.earth.viewer.scene.primitives.remove(W),G=Z=W=null}},{key:"drawFrustumOutline",value:function(){this.clearFrustumOutline();var nt=U(this.earth.viewer,this.options),st=new i,ut=new u,rt=new p,ht=nt.directionWC,Pt=nt.upWC,wt=nt.rightWC;wt=i.negate(wt,st);var Mt=ut;u.setColumn(Mt,0,wt,Mt),u.setColumn(Mt,1,Pt,Mt),u.setColumn(Mt,2,ht,Mt);var Ft=p.fromRotationMatrix(Mt,rt),Dt=new w({geometry:new S({frustum:nt.frustum,origin:this.options.viewPosition,orientation:Ft}),id:x(),attributes:{color:R.fromColor(a.YELLOWGREEN),show:new B(!![])}});W=this.earth.viewer.scene.primitives.add(new k({geometryInstances:[Dt],appearance:new P({flat:!![],translucent:![]})}))}},{key:"clearFrustumOutline",value:function(){W&&this.earth.viewer.scene.primitives.remove(W),W=null}},{key:"drawSketch",value:function(){this.clearSketch();var nt=this.options,st=nt.viewDistance,ut=nt.viewPosition,rt=nt.horizontalViewAngle,ht=nt.verticalViewAngle,Pt=nt.viewHeading,wt=nt.viewPitch;Z=this.earth.viewer.entities.add({name:"sketch",position:ut,orientation:d.headingPitchRollQuaternion(ut,D.fromDegrees(Pt-90,wt,0)),ellipsoid:{radii:new i(st,st,st),minimumClock:o.Math.toRadians(-rt/2),maximumClock:o.Math.toRadians(rt/2),minimumCone:o.Math.toRadians(ht+7.75),maximumCone:o.Math.toRadians(180-ht-7.75),fill:![],outline:!![],subdivisions:256,stackPartitions:64,slicePartitions:64,outlineColor:a.YELLOWGREEN}})}},{key:"clearSketch",value:function(){Z&&this.earth.viewer.entities.removeById(Z.id),Z=null}}]),Q}();function U(Q,et){var nt=new y(Q.scene),st=et.viewDistance,ut=et.viewPosition,rt=et.viewPositionEnd,ht=et.horizontalViewAngle,Pt=et.verticalViewAngle,wt=et.viewHeading,Mt=et.viewPitch;if(nt.position=ut,rt){var Ft=i.normalize(i.subtract(rt,ut,new i),new i);nt.direction=Ft}nt.frustum.near=st*.001,nt.frustum.far=st;var Dt=o.Math.toRadians(ht),Rt=o.Math.toRadians(Pt),Tt=Math.tan(Dt/2)/Math.tan(Rt/2);return nt.frustum.aspectRatio=Tt,nt.frustum.fov=Rt,nt.frustum.adaptFov=![],nt.setView({destination:ut,orientation:{heading:o.Math.toRadians(wt||0),pitch:o.Math.toRadians(Mt||0),roll:0}}),nt}function V(Q,et){var nt=new i,st=d.eastNorthUpToFixedFrame(Q);return g.inverse(st,st),g.multiplyByPoint(st,et,nt),i.normalize(nt,nt),o.Math.toDegrees(Math.atan2(nt.x,nt.y))}function Y(Q,et){var nt=new i,st=d.eastNorthUpToFixedFrame(Q);return g.inverse(st,st),g.multiplyByPoint(st,et,nt),i.normalize(nt,nt),o.Math.toDegrees(Math.asin(nt.z))}function $(Q){return Array.isArray(Q)&&(Q=i.fromDegrees.apply(i,(0,L.default)(Q))),Q instanceof i?Q:![]}function K(Q){if(Q instanceof i){var et=o.Ellipsoid.WGS84,nt=et.cartesianToCartographic(Q);return[o.Math.toDegrees(nt.longitude),o.Math.toDegrees(nt.latitude),nt.height]}}var J=H;z.default=J},705236:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=z.VERSION=z.Task=z.Support=z.Query=z.Identify=z.Find=z.EsriUtil=z.ESRI=void 0,z.find=Ct,z.get=void 0,z.identify=zt,z.options=void 0,z.query=vt,z.request=d,z.task=Nt,z.xmlHttpPost=u;var L=b(e(66273)),T=b(e(520314)),C=b(e(181360)),f=b(e(728954)),v=o(e(630009));function m(ft){if(typeof O!="function")return null;var gt=new O,dt=new O;return(m=function(ot){return ot?dt:gt})(ft)}function o(ft,gt){if(!gt&&ft&&ft.__esModule)return ft;if(ft===null||F(ft)!=="object"&&typeof ft!="function")return{default:ft};var dt=m(gt);if(dt&&dt.has(ft))return dt.get(ft);var lt={},ot=Object.defineProperty&&M;for(var it in ft)if(it!=="default"&&Object.prototype.hasOwnProperty.call(ft,it)){var yt=ot?M(ft,it):null;yt&&(yt.get||yt.set)?Object.defineProperty(lt,it,yt):lt[it]=ft[it]}return lt.default=ft,dt&&dt.set(ft,lt),lt}var h;z.VERSION=h;var l="2.1.4";z.VERSION=h=l;var r=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,s=document.documentElement.style.pointerEvents==="",c={cors:r,pointerEvents:s};z.Support=c;var x={attributionWidthOffset:55};z.options=x;var a=0;function i(ft){var gt="";ft.f=ft.f||"json";for(var dt in ft)if(ft.hasOwnProperty(dt)){var lt=ft[dt],ot=Object.prototype.toString.call(lt),it=void 0;gt.length&&(gt+="&"),ot==="[object Array]"?it=Object.prototype.toString.call(lt[0])==="[object Object]"?(0,L.default)(lt):lt.join(","):ot==="[object Object]"?it=(0,L.default)(lt):ot==="[object Date]"?it=lt.valueOf():it=lt,gt+=encodeURIComponent(dt)+"="+encodeURIComponent(it)}return gt}function n(ft,gt){var dt=new window.XMLHttpRequest;return dt.onerror=function(lt){dt.onreadystatechange=v.Util.falseFn,ft.call(gt,{error:{code:500,message:"XMLHttpRequest error"}},null)},dt.onreadystatechange=function(){var lt,ot;if(dt.readyState===4){try{lt=JSON.parse(dt.responseText)}catch{lt=null,ot={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!ot&&lt.error&&(ot=lt.error,lt=null),dt.onerror=v.Util.falseFn,ft.call(gt,ot,lt)}},dt.ontimeout=function(){this.onerror()},dt}function u(ft,gt,dt,lt){var ot=n(dt,lt);return ot.open("POST",ft),typeof lt<"u"&&lt!==null&&typeof lt.options<"u"&&(ot.timeout=lt.options.timeout),ot.setRequestHeader("Content-Type","application/x-www-form-urlencoded charset=UTF-8"),ot.send(i(gt)),ot}function g(ft,gt,dt,lt){var ot=n(dt,lt);return ot.open("GET",ft+"?"+i(gt),!![]),typeof lt<"u"&&lt!==null&&typeof lt.options<"u"&&(ot.timeout=lt.options.timeout),ot.send(null),ot}function d(ft,gt,dt,lt){var ot=i(gt),it=n(dt,lt),yt=(ft+"?"+ot).length;if(yt<=2e3&&c.cors?it.open("GET",ft+"?"+ot):yt>2e3&&c.cors&&(it.open("POST",ft),it.setRequestHeader("Content-Type","application/x-www-form-urlencoded charset=UTF-8")),typeof lt<"u"&&lt!==null&&typeof lt.options<"u"&&(it.timeout=lt.options.timeout),yt<=2e3&&c.cors)it.send(null);else if(yt>2e3&&c.cors)it.send(ot);else{if(yt<=2e3&&!c.cors)return y(ft,gt,dt,lt);Pt("a request to "+ft+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");return}return it}function y(ft,gt,dt,lt){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var ot="c"+a;gt.callback="window._EsriLeafletCallbacks."+ot,window._EsriLeafletCallbacks[ot]=function(yt){if(window._EsriLeafletCallbacks[ot]!==!![]){var Ot,St=Object.prototype.toString.call(yt);!(St==="[object Object]"||St==="[object Array]")&&(Ot={error:{code:500,message:"Expected array or object as JSONP response"}},yt=null),!Ot&&yt.error&&(Ot=yt,yt=null),dt.call(lt,Ot,yt),window._EsriLeafletCallbacks[ot]=!![]}};var it=v.DomUtil.create("script",null,document.body);return it.type="text/javascript",it.src=ft+"?"+i(gt),it.id=ot,v.DomUtil.addClass(it,"esri-leaflet-jsonp"),a++,{id:ot,url:it.src,abort:function(){window._EsriLeafletCallbacks._callback[ot]({code:0,message:"Request aborted."})}}}var p=c.cors?g:y;z.get=p,p.CORS=g,p.JSONP=y;var w={request:d,get:p,post:u};function S(ft,gt){for(var dt=0;dt<ft.length;dt++)if(ft[dt]!==gt[dt])return![];return!![]}function R(ft){return!S(ft[0],ft[ft.length-1])&&ft.push(ft[0]),ft}function B(ft){var gt=0,dt=0,lt=ft.length,ot=ft[dt],it;for(dt;dt<lt-1;dt++)it=ft[dt+1],gt+=(it[0]-ot[0])*(it[1]+ot[1]),ot=it;return gt>=0}function k(ft,gt,dt,lt){var ot=(lt[0]-dt[0])*(ft[1]-dt[1])-(lt[1]-dt[1])*(ft[0]-dt[0]),it=(gt[0]-ft[0])*(ft[1]-dt[1])-(gt[1]-ft[1])*(ft[0]-dt[0]),yt=(lt[1]-dt[1])*(gt[0]-ft[0])-(lt[0]-dt[0])*(gt[1]-ft[1]);if(yt!==0){var Ot=ot/yt,St=it/yt;if(Ot>=0&&Ot<=1&&St>=0&&St<=1)return!![]}return![]}function P(ft,gt){for(var dt=0;dt<ft.length-1;dt++)for(var lt=0;lt<gt.length-1;lt++)if(k(ft[dt],ft[dt+1],gt[lt],gt[lt+1]))return!![];return![]}function D(ft,gt){for(var dt=![],lt=-1,ot=ft.length,it=ot-1;++lt<ot;it=lt)(ft[lt][1]<=gt[1]&&gt[1]<ft[it][1]||ft[it][1]<=gt[1]&&gt[1]<ft[lt][1])&&gt[0]<(ft[it][0]-ft[lt][0])*(gt[1]-ft[lt][1])/(ft[it][1]-ft[lt][1])+ft[lt][0]&&(dt=!dt);return dt}function A(ft,gt){var dt=P(ft,gt),lt=D(ft,gt[0]);return!dt&&lt?!![]:![]}function N(ft){for(var gt=[],dt=[],lt,ot,it,yt=0;yt<ft.length;yt++){var Ot,St=R((0,T.default)(Ot=ft[yt]).call(Ot,0));if(!(St.length<4))if(B(St)){var Gt=[(0,T.default)(St).call(St).reverse()];gt.push(Gt)}else dt.push((0,T.default)(St).call(St).reverse())}for(var Ut=[];dt.length;){it=dt.pop();var Kt=![];for(lt=gt.length-1;lt>=0;lt--)if(ot=gt[lt][0],A(ot,it)){gt[lt].push(it),Kt=!![];break}!Kt&&Ut.push(it)}for(;Ut.length;){it=Ut.pop();var Jt=![];for(lt=gt.length-1;lt>=0;lt--)if(ot=gt[lt][0],P(ot,it)){gt[lt].push(it),Jt=!![];break}!Jt&&gt.push([it.reverse()])}return gt.length===1?{type:"Polygon",coordinates:gt[0]}:{type:"MultiPolygon",coordinates:gt}}function I(ft){var gt,dt=[],lt=(0,T.default)(ft).call(ft,0),ot=R((0,T.default)(gt=lt.shift()).call(gt,0));if(ot.length>=4){!B(ot)&&ot.reverse(),dt.push(ot);for(var it=0;it<lt.length;it++){var yt,Ot=R((0,T.default)(yt=lt[it]).call(yt,0));Ot.length>=4&&(B(Ot)&&Ot.reverse(),dt.push(Ot))}}return dt}function G(ft){for(var gt=[],dt=0;dt<ft.length;dt++)for(var lt=I(ft[dt]),ot=lt.length-1;ot>=0;ot--){var it,yt=(0,T.default)(it=lt[ot]).call(it,0);gt.push(yt)}return gt}function W(ft){var gt={};for(var dt in ft)ft.hasOwnProperty(dt)&&(gt[dt]=ft[dt]);return gt}function Z(ft,gt){for(var dt=gt?[gt,"OBJECTID","FID"]:["OBJECTID","FID"],lt=0;lt<dt.length;lt++){var ot=dt[lt];if(ot in ft&&(typeof ft[ot]=="string"||typeof ft[ot]=="number"))return ft[ot]}throw Error("No valid id attribute found")}function H(ft,gt){var dt={};if(typeof ft.x=="number"&&typeof ft.y=="number"&&(dt.type="Point",dt.coordinates=[ft.x,ft.y],typeof ft.z=="number"&&dt.coordinates.push(ft.z)),ft.points){var lt;dt.type="MultiPoint",dt.coordinates=(0,T.default)(lt=ft.points).call(lt,0)}if(ft.paths)if(ft.paths.length===1){var ot;dt.type="LineString",dt.coordinates=(0,T.default)(ot=ft.paths[0]).call(ot,0)}else{var it;dt.type="MultiLineString",dt.coordinates=(0,T.default)(it=ft.paths).call(it,0)}if(ft.rings){var yt;dt=N((0,T.default)(yt=ft.rings).call(yt,0))}if((ft.geometry||ft.attributes)&&(dt.type="Feature",dt.geometry=ft.geometry?H(ft.geometry):null,dt.properties=ft.attributes?W(ft.attributes):null,ft.attributes))try{dt.id=Z(ft.attributes,gt)}catch{}return(0,L.default)(dt.geometry)===(0,L.default)({})&&(dt.geometry=null),ft.spatialReference&&ft.spatialReference.wkid&&ft.spatialReference.wkid!==4326&&E.warn("Object converted in non-standard crs - "+(0,L.default)(ft.spatialReference)),dt}function U(ft,gt){var dt,lt,ot,it,yt;gt=gt||"OBJECTID";var Ot={wkid:4326},St={},Gt;switch(ft.type){case"Point":St.x=ft.coordinates[0],St.y=ft.coordinates[1],St.spatialReference=Ot;break;case"MultiPoint":St.points=(0,T.default)(dt=ft.coordinates).call(dt,0),St.spatialReference=Ot;break;case"LineString":St.paths=[(0,T.default)(lt=ft.coordinates).call(lt,0)],St.spatialReference=Ot;break;case"MultiLineString":St.paths=(0,T.default)(ot=ft.coordinates).call(ot,0),St.spatialReference=Ot;break;case"Polygon":St.rings=I((0,T.default)(it=ft.coordinates).call(it,0)),St.spatialReference=Ot;break;case"MultiPolygon":St.rings=G((0,T.default)(yt=ft.coordinates).call(yt,0)),St.spatialReference=Ot;break;case"Feature":ft.geometry&&(St.geometry=U(ft.geometry,gt)),St.attributes=ft.properties?W(ft.properties):{},ft.id&&(St.attributes[gt]=ft.id);break;case"FeatureCollection":for(St=[],Gt=0;Gt<ft.features.length;Gt++)St.push(U(ft.features[Gt],gt));break;case"GeometryCollection":for(St=[],Gt=0;Gt<ft.geometries.length;Gt++)St.push(U(ft.geometries[Gt],gt));break}return St}function V(ft,gt){return U(ft,gt)}function Y(ft,gt){return H(ft,gt)}function $(ft){if(ft.xmin!=="NaN"&&ft.ymin!=="NaN"&&ft.xmax!=="NaN"&&ft.ymax!=="NaN"){var gt=v.LatLng(ft.ymin,ft.xmin),dt=v.LatLng(ft.ymax,ft.xmax);return v.toLatLngBounds(gt,dt)}else return null}function K(ft){return ft=v.toLatLngBounds(ft),{xmin:ft.getSouthWest().lng,ymin:ft.getSouthWest().lat,xmax:ft.getNorthEast().lng,ymax:ft.getNorthEast().lat,spatialReference:{wkid:4326}}}var J=/^(OBJECTID|FID|OID|ID)$/i;function Q(ft){var gt;if(ft.objectIdFieldName)gt=ft.objectIdFieldName;else if(ft.fields){for(var dt=0;dt<=ft.fields.length-1;dt++)if(ft.fields[dt].type==="esriFieldTypeOID"){gt=ft.fields[dt].name;break}if(!gt){for(j=0;j<=ft.fields.length-1;j++)if(ft.fields[j].name.match(J)){gt=ft.fields[j].name;break}}}return gt}function et(ft){for(var gt in ft.attributes)if(gt.match(J))return gt}function nt(ft,gt){var dt,lt=ft.features||ft.results,ot=lt.length;gt?dt=gt:dt=Q(ft);var it={type:"FeatureCollection",features:[]};if(ot)for(var yt=lt.length-1;yt>=0;yt--){var Ot=Y(lt[yt],dt||et(lt[yt]));it.features.push(Ot)}return it}function st(ft){var gt;return ft=(0,C.default)(gt=v.Util).call(gt,ft),ft[ft.length-1]!=="/"&&(ft+="/"),ft}function ut(ft){if(ft.url.indexOf("?")!==-1){ft.requestParams=ft.requestParams||{};var gt=ft.url.substring(ft.url.indexOf("?")+1);ft.url=ft.url.split("?")[0],ft.requestParams=JSON.parse('{"'+decodeURI(gt).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return ft.url=st(ft.url.split("?")[0]),ft}function rt(ft){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(ft)}function ht(ft){var gt;switch(ft){case"Point":gt="esriGeometryPoint";break;case"MultiPoint":gt="esriGeometryMultipoint";break;case"LineString":gt="esriGeometryPolyline";break;case"MultiLineString":gt="esriGeometryPolyline";break;case"Polygon":gt="esriGeometryPolygon";break;case"MultiPolygon":gt="esriGeometryPolygon";break}return gt}function Pt(){E&&E.warn&&E.warn.apply(E,arguments)}function wt(ft){return ft.getSize().x-x.attributionWidthOffset+"px"}function Mt(ft){if(ft.attributionControl&&!ft.attributionControl._esriAttributionAdded){ft.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>');var gt=document.createElement("style");gt.type="text/css",gt.innerHTML=".esri-truncated-attribution:hover {white-space: normal}",document.getElementsByTagName("head")[0].appendChild(gt),v.DomUtil.addClass(ft.attributionControl._container,"esri-truncated-attribution:hover");var dt=document.createElement("style");dt.type="text/css",dt.innerHTML=".esri-truncated-attribution {vertical-align: -3pxwhite-space: nowrapoverflow: hiddentext-overflow: ellipsisdisplay: inline-blocktransition: 0s white-spacetransition-delay: 1smax-width: "+wt(ft)+"}",document.getElementsByTagName("head")[0].appendChild(dt),v.DomUtil.addClass(ft.attributionControl._container,"esri-truncated-attribution"),ft.on("resize",function(lt){ft.attributionControl._container.style.maxWidth=wt(lt.target)}),ft.on("unload",function(){gt.parentNode.removeChild(gt),dt.parentNode.removeChild(dt);for(var lt=document.querySelectorAll(".esri-leaflet-jsonp"),ot=0;ot<lt.length;ot++)lt.item(ot).parentNode.removeChild(lt.item(ot))}),ft.attributionControl._esriAttributionAdded=!![]}}function Ft(ft){var gt={geometry:null,geometryType:null};if(ft instanceof v.toLatLngBounds||ft instanceof v.LatLngBounds)return gt.geometry=K(ft),gt.geometryType="esriGeometryEnvelope",gt;if(ft.getLatLng&&(ft=ft.getLatLng()),ft instanceof v.LatLng&&(ft={type:"Point",coordinates:[ft.lng,ft.lat]}),ft instanceof v.GeoJSON&&(ft=ft.getLayers()[0].feature.geometry,gt.geometry=V(ft),gt.geometryType=ht(ft.type)),ft.toGeoJSON&&(ft=ft.toGeoJSON()),ft.type==="Feature"&&(ft=ft.geometry),ft.type==="Point"||ft.type==="LineString"||ft.type==="Polygon"||ft.type==="MultiPolygon")return gt.geometry=V(ft),gt.geometryType=ht(ft.type),gt;Pt("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function Dt(ft,gt){y(ft,{},v.Util.bind(function(dt,lt){var ot;if(!dt){gt._esriAttributions=[];for(var it=0;it<lt.contributors.length;it++)for(var yt=lt.contributors[it],Ot=0;Ot<yt.coverageAreas.length;Ot++){var St=yt.coverageAreas[Ot],Gt=v.LatLng(St.bbox[0],St.bbox[1]),Ut=v.LatLng(St.bbox[2],St.bbox[3]);gt._esriAttributions.push({attribution:yt.attribution,score:St.score,bounds:v.toLatLngBounds(Gt,Ut),minZoom:St.zoomMin,maxZoom:St.zoomMax})}(0,f.default)(ot=gt._esriAttributions).call(ot,function(Jt,te){return te.score-Jt.score});var Kt={target:gt};Rt(Kt)}},this))}function Rt(ft){var gt=ft.target,dt=gt._esriAttributions;if(gt&&gt.attributionControl&&dt){for(var lt="",ot=gt.getBounds(),it=v.toLatLngBounds(ot.getSouthWest().wrap(),ot.getNorthEast().wrap()),yt=gt.getZoom(),Ot=0;Ot<dt.length;Ot++){var St=dt[Ot],Gt=St.attribution;!lt.match(Gt)&&St.bounds.intersects(it)&&yt>=St.minZoom&&yt<=St.maxZoom&&(lt+=", "+Gt)}lt=lt.substr(2);var Ut=gt.attributionControl._container.querySelector(".esri-dynamic-attribution");Ut.innerHTML=lt,Ut.style.maxWidth=wt(gt),gt.fire("attributionupdated",{attribution:lt})}}var Tt={warn:Pt,cleanUrl:st,getUrlParams:ut,isArcgisOnline:rt,geojsonTypeToArcGIS:ht,responseToFeatureCollection:nt,geojsonToArcGIS:V,arcgisToGeoJSON:Y,boundsToExtent:K,extentToBounds:$,calcAttributionWidth:wt,setEsriAttribution:Mt,_setGeometry:Ft,_getAttributionData:Dt,_updateMapAttribution:Rt,_findIdAttributeFromFeature:et,_findIdAttributeFromResponse:Q};z.EsriUtil=Tt;var mt=v.Class.extend({options:{proxy:![],useCors:r},generateSetter:function(gt,dt){return v.Util.bind(function(lt){return this.params[gt]=lt,this},dt)},initialize:function(gt){if(gt.request&&gt.options?(this._service=gt,v.Util.setOptions(this,gt.options)):(v.Util.setOptions(this,gt),this.options.url=st(gt.url)),this.params=v.Util.extend({},this.params||{}),this.setters)for(var dt in this.setters){var lt=this.setters[dt];this[dt]=this.generateSetter(lt,this)}},token:function(gt){return this._service?this._service.authenticate(gt):this.params.token=gt,this},format:function(gt){return this.params.returnUnformattedValues=!gt,this},request:function(gt,dt){return this.options.requestParams&&v.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,gt,dt):this._request("request",this.path,this.params,gt,dt)},_request:function(gt,dt,lt,ot,it){var yt=this.options.proxy?this.options.proxy+"?"+this.options.url+dt:this.options.url+dt;return(gt==="get"||gt==="request")&&!this.options.useCors?w.get.JSONP(yt,lt,ot,it):w[gt](yt,lt,ot,it)}});z.Task=mt;function Nt(ft){return ft=ut(ft),new mt(ft)}var ct=mt.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",returnZ:"returnZ",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!![],returnZ:!![],where:"1=1",outSR:4326,outFields:"*"},within:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(gt,dt){return gt=v.LatLng(gt),this.params.geometry=[gt.lng,gt.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=dt,this.params.inSR=4326,this},where:function(gt){return this.params.where=gt,this},between:function(gt,dt){return this.params.time=[gt.valueOf(),dt.valueOf()],this},simplify:function(gt,dt){var lt=Math.abs(gt.getBounds().getWest()-gt.getBounds().getEast());return this.params.maxAllowableOffset=lt/gt.getSize().y*dt,this},orderBy:function(gt,dt){return dt=dt||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[gt,dt].join(" "),this},run:function(gt,dt){return this._cleanParams(),this.options.isModern||rt(this.options.url)?(this.params.f="geojson",this.request(function(lt,ot){this._trapSQLerrors(lt),gt.call(dt,lt,ot,ot)},this)):this.request(function(lt,ot){this._trapSQLerrors(lt),gt.call(dt,lt,ot&&nt(ot),ot)},this)},count:function(gt,dt){return this._cleanParams(),this.params.returnCountOnly=!![],this.request(function(lt,ot){gt.call(this,lt,ot&&ot.count,ot)},dt)},ids:function(gt,dt){return this._cleanParams(),this.params.returnIdsOnly=!![],this.request(function(lt,ot){gt.call(this,lt,ot&&ot.objectIds,ot)},dt)},bounds:function(gt,dt){return this._cleanParams(),this.params.returnExtentOnly=!![],this.request(function(lt,ot){ot&&ot.extent&&$(ot.extent)?gt.call(dt,lt,$(ot.extent),ot):(lt={message:"Invalid Bounds"},gt.call(dt,lt,null,ot))},dt)},distinct:function(){return this.params.returnGeometry=![],this.params.returnDistinctValues=!![],this},pixelSize:function(gt){var dt=v.Point(gt);return this.params.pixelSize=[dt.x,dt.y],this},layer:function(gt){return this.path=gt+"/query",this},_trapSQLerrors:function(gt){gt&&gt.code==="400"&&Pt("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(gt){this.params.inSR=4326;var dt=Ft(gt);this.params.geometry=dt.geometry,this.params.geometryType=dt.geometryType}});z.Query=ct;function vt(ft){return new ct(ft)}var Lt=mt.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!![],returnGeometry:!![],returnZ:!![],returnM:![]},layerDefs:function(gt,dt){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+"":"",this.params.layerDefs+=[gt,dt].join(":"),this},simplify:function(gt,dt){var lt=Math.abs(gt.getBounds().getWest()-gt.getBounds().getEast());return this.params.maxAllowableOffset=lt/gt.getSize().y*dt,this},run:function(gt,dt){return this.request(function(lt,ot){gt.call(dt,lt,ot&&nt(ot),ot)},dt)}});z.Find=Lt;function Ct(ft){return new Lt(ft)}var jt=mt.extend({path:"identify",between:function(gt,dt){return this.params.time=[gt.valueOf(),dt.valueOf()],this}});z.Identify=jt;function zt(ft){return new jt(ft)}var Yt={VERSION:l,Support:c,options:x,Util:Tt,get:p,post:u,request:d,Task:mt,task:Nt,Query:ct,Find:Lt,find:Ct,Identify:jt,identify:zt};z.ESRI=Yt;var Zt={};z.default=Zt},630009:function(X,z,e){"use strict";var E=e(149500),F=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Bounds=Q,z.CRS=z.Browser=void 0,z.Class=H,z.L=z.Handler=z.GeoJSON=z.Evented=z.Draggable=z.DomUtil=z.DomEvent=void 0,z.LatLng=ut,z.LatLngBounds=nt,z.Mixin=z.LineUtil=void 0,z.Point=$,z.PosAnimation=z.PolyUtil=void 0,z.Transformation=Mt,z.Util=void 0,z.bind=s,z.extend=l,z.geoJSON=cr,z.index=z.geoJson=void 0,z.setOptions=y,z.stamp=x,z.toBounds=et,z.toLatLng=rt,z.toLatLngBounds=st,z.toPoint=J,z.toTransformation=Ft,z.version=void 0;var O=F(e(29870)),M=F(e(113288)),b=F(e(520314)),L=F(e(705146)),T=F(e(181360)),C=F(e(581806)),f=F(e(669033)),v=F(e(194221)),m=F(e(22466)),o="1.3.4";z.version=o;var h=M.default;Object.freeze=function(tt){return tt};function l(tt){var q,pt,Et,Ht;for(pt=1,Et=arguments.length;pt<Et;pt++){Ht=arguments[pt];for(q in Ht)tt[q]=Ht[q]}return tt}var r=Object.create||function(){function tt(){}return function(q){return tt.prototype=q,new tt}}();function s(tt,q){var pt=(0,b.default)(Array.prototype);if(tt.bind)return tt.bind.apply(tt,pt.call(arguments,1));var Et=pt.call(arguments,2);return function(){return tt.apply(q,Et.length?(0,L.default)(Et).call(Et,pt.call(arguments)):arguments)}}var c=0;function x(tt){return tt._leaflet_id=tt._leaflet_id||++c,tt._leaflet_id}function a(tt,q,pt){var Et,Ht,Xt,se;return se=function(){Et=![],Ht&&(Xt.apply(pt,Ht),Ht=![])},Xt=function(){Et?Ht=arguments:(tt.apply(pt,arguments),setTimeout(se,q),Et=!![])},Xt}function i(tt,q,pt){var Et=q[1],Ht=q[0],Xt=Et-Ht;return tt===Et&&pt?tt:((tt-Ht)%Xt+Xt)%Xt+Ht}function n(){return![]}function u(tt,q){var pt=Math.pow(10,q===void 0?6:q);return Math.round(tt*pt)/pt}function g(tt){return(0,T.default)(tt)?(0,T.default)(tt).call(tt):tt.replace(/^\s+|\s+$/g,"")}function d(tt){return g(tt).split(/\s+/)}function y(tt,q){!tt.hasOwnProperty("options")&&(tt.options=tt.options?r(tt.options):{});for(var pt in q)tt.options[pt]=q[pt];return tt.options}function p(tt,q,pt){var Et=[];for(var Ht in tt)Et.push(encodeURIComponent(pt?Ht.toUpperCase():Ht)+"="+encodeURIComponent(tt[Ht]));return(!q||q.indexOf("?")===-1?"?":"&")+Et.join("&")}var w=/\{ *([\w_-]+) *\}/g;function S(tt,q){return tt.replace(w,function(pt,Et){var Ht=q[Et];if(Ht===void 0)throw new Error("No value provided for variable "+pt);return typeof Ht=="function"&&(Ht=Ht(q)),Ht})}var R=Array.isArray||function(tt){return Object.prototype.toString.call(tt)==="[object Array]"};function B(tt,q){for(var pt=0;pt<tt.length;pt++)if(tt[pt]===q)return pt;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(tt){return window["webkit"+tt]||window["moz"+tt]||window["ms"+tt]}var D=0;function A(tt){var q=+new Date,pt=Math.max(0,16-(q-D));return D=q+pt,window.setTimeout(tt,pt)}var N=window.requestAnimationFrame||P("RequestAnimationFrame")||A,I=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(tt){window.clearTimeout(tt)};function G(tt,q,pt){if(pt&&N===A)tt.call(q);else return N.call(window,s(tt,q))}function W(tt){tt&&I.call(window,tt)}var Z=(M.default||Object)({freeze:h,extend:l,create:r,bind:s,lastId:c,stamp:x,throttle:a,wrapNum:i,falseFn:n,formatNum:u,trim:g,splitWords:d,setOptions:y,getParamString:p,template:S,isArray:R,indexOf:B,emptyImageUrl:k,requestFn:N,cancelFn:I,requestAnimFrame:G,cancelAnimFrame:W});z.Util=Z;function H(){}H.extend=function(tt){var q=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},pt=q.__super__=this.prototype,Et=r(pt);Et.constructor=q,q.prototype=Et;for(var Ht in this)this.hasOwnProperty(Ht)&&Ht!=="prototype"&&Ht!=="__super__"&&(q[Ht]=this[Ht]);if(tt.statics&&(l(q,tt.statics),delete tt.statics),(0,C.default)(tt)){var Xt;U((0,C.default)(tt)),l.apply(null,(0,L.default)(Xt=[Et]).call(Xt,(0,C.default)(tt))),delete tt.includes}return Et.options&&(tt.options=l(r(Et.options),tt.options)),l(Et,tt),Et._initHooks=[],Et.callInitHooks=function(){if(!this._initHooksCalled){pt.callInitHooks&&pt.callInitHooks.call(this),this._initHooksCalled=!![];for(var se=0,fe=Et._initHooks.length;se<fe;se++)Et._initHooks[se].call(this)}},q},H.include=function(tt){return l(this.prototype,tt),this},H.mergeOptions=function(tt){return l(this.prototype.options,tt),this},H.addInitHook=function(tt){var q=(0,b.default)(Array.prototype).call(arguments,1),pt=typeof tt=="function"?tt:function(){this[tt].apply(this,q)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(pt),this};function U(tt){if(!(typeof Mi>"u"||!Mi||!Mi.Mixin)){tt=R(tt)?tt:[tt];for(var q=0;q<tt.length;q++)tt[q]===Mi.Mixin.Events&&E.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(q,pt,Et){if((typeof q>"u"?"undefined":(0,O.default)(q))==="object")for(var Ht in q)this._on(Ht,q[Ht],pt);else{q=d(q);for(var Xt=0,se=q.length;Xt<se;Xt++)this._on(q[Xt],pt,Et)}return this},off:function(q,pt,Et){if(!q)delete this._events;else if((typeof q>"u"?"undefined":(0,O.default)(q))==="object")for(var Ht in q)this._off(Ht,q[Ht],pt);else{q=d(q);for(var Xt=0,se=q.length;Xt<se;Xt++)this._off(q[Xt],pt,Et)}return this},_on:function(q,pt,Et){this._events=this._events||{};var Ht=this._events[q];!Ht&&(Ht=[],this._events[q]=Ht),Et===this&&(Et=void 0);for(var Xt={fn:pt,ctx:Et},se=Ht,fe=0,Ee=se.length;fe<Ee;fe++)if(se[fe].fn===pt&&se[fe].ctx===Et)return;se.push(Xt)},_off:function(q,pt,Et){var Ht,Xt,se;if(this._events&&(Ht=this._events[q],!!Ht)){if(!pt){for(Xt=0,se=Ht.length;Xt<se;Xt++)Ht[Xt].fn=n;delete this._events[q];return}if(Et===this&&(Et=void 0),Ht)for(Xt=0,se=Ht.length;Xt<se;Xt++){var fe=Ht[Xt];if(fe.ctx===Et&&fe.fn===pt){fe.fn=n,this._firingCount&&(this._events[q]=Ht=(0,b.default)(Ht).call(Ht)),(0,f.default)(Ht).call(Ht,Xt,1);return}}}},fire:function(q,pt,Et){if(!this.listens(q,Et))return this;var Ht=l({},pt,{type:q,target:this,sourceTarget:pt&&pt.sourceTarget||this});if(this._events){var Xt=this._events[q];if(Xt){this._firingCount=this._firingCount+1||1;for(var se=0,fe=Xt.length;se<fe;se++){var Ee=Xt[se];Ee.fn.call(Ee.ctx||this,Ht)}this._firingCount--}}return Et&&this._propagateEvent(Ht),this},listens:function(q,pt){var Et=this._events&&this._events[q];if(Et&&Et.length)return!![];if(pt){for(var Ht in this._eventParents)if(this._eventParents[Ht].listens(q,pt))return!![]}return![]},once:function(q,pt,Et){if((typeof q>"u"?"undefined":(0,O.default)(q))==="object"){for(var Ht in q)this.once(Ht,q[Ht],pt);return this}var Xt=s(function(){this.off(q,pt,Et).off(q,Xt,Et)},this);return this.on(q,pt,Et).on(q,Xt,Et)},addEventParent:function(q){return this._eventParents=this._eventParents||{},this._eventParents[x(q)]=q,this},removeEventParent:function(q){return this._eventParents&&delete this._eventParents[x(q)],this},_propagateEvent:function(q){for(var pt in this._eventParents)this._eventParents[pt].fire(q.type,l({layer:q.target,propagatedFrom:q.target},q),!![])}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var Y=H.extend(V);z.Evented=Y;function $(tt,q,pt){this.x=pt?Math.round(tt):tt,this.y=pt?Math.round(q):q}var K=v.default||function(tt){return tt>0?Math.floor(tt):Math.ceil(tt)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(q){return this.clone()._add(J(q))},_add:function(q){return this.x+=q.x,this.y+=q.y,this},subtract:function(q){return this.clone()._subtract(J(q))},_subtract:function(q){return this.x-=q.x,this.y-=q.y,this},divideBy:function(q){return this.clone()._divideBy(q)},_divideBy:function(q){return this.x/=q,this.y/=q,this},multiplyBy:function(q){return this.clone()._multiplyBy(q)},_multiplyBy:function(q){return this.x*=q,this.y*=q,this},scaleBy:function(q){return new $(this.x*q.x,this.y*q.y)},unscaleBy:function(q){return new $(this.x/q.x,this.y/q.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(q){q=J(q);var pt=q.x-this.x,Et=q.y-this.y;return Math.sqrt(pt*pt+Et*Et)},equals:function(q){return q=J(q),q.x===this.x&&q.y===this.y},contains:function(q){return q=J(q),Math.abs(q.x)<=Math.abs(this.x)&&Math.abs(q.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}};function J(tt,q,pt){return tt instanceof $?tt:R(tt)?new $(tt[0],tt[1]):tt==null?tt:(typeof tt>"u"?"undefined":(0,O.default)(tt))==="object"&&"x"in tt&&"y"in tt?new $(tt.x,tt.y):new $(tt,q,pt)}function Q(tt,q){if(tt)for(var pt=q?[tt,q]:tt,Et=0,Ht=pt.length;Et<Ht;Et++)this.extend(pt[Et])}Q.prototype={extend:function(q){return q=J(q),!this.min&&!this.max?(this.min=q.clone(),this.max=q.clone()):(this.min.x=Math.min(q.x,this.min.x),this.max.x=Math.max(q.x,this.max.x),this.min.y=Math.min(q.y,this.min.y),this.max.y=Math.max(q.y,this.max.y)),this},getCenter:function(q){return new $((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,q)},getBottomLeft:function(){return new $(this.min.x,this.max.y)},getTopRight:function(){return new $(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(q){var pt,Et;return typeof q[0]=="number"||q instanceof $?q=J(q):q=et(q),q instanceof Q?(pt=q.min,Et=q.max):pt=Et=q,pt.x>=this.min.x&&Et.x<=this.max.x&&pt.y>=this.min.y&&Et.y<=this.max.y},intersects:function(q){q=et(q);var pt=this.min,Et=this.max,Ht=q.min,Xt=q.max,se=Xt.x>=pt.x&&Ht.x<=Et.x,fe=Xt.y>=pt.y&&Ht.y<=Et.y;return se&&fe},overlaps:function(q){q=et(q);var pt=this.min,Et=this.max,Ht=q.min,Xt=q.max,se=Xt.x>pt.x&&Ht.x<Et.x,fe=Xt.y>pt.y&&Ht.y<Et.y;return se&&fe},isValid:function(){return!!(this.min&&this.max)}};function et(tt,q){return!tt||tt instanceof Q?tt:new Q(tt,q)}function nt(tt,q){if(tt)for(var pt=q?[tt,q]:tt,Et=0,Ht=pt.length;Et<Ht;Et++)this.extend(pt[Et])}nt.prototype={extend:function(q){var pt=this._southWest,Et=this._northEast,Ht,Xt;if(q instanceof ut)Ht=q,Xt=q;else if(q instanceof nt){if(Ht=q._southWest,Xt=q._northEast,!Ht||!Xt)return this}else return q?this.extend(rt(q)||st(q)):this;return!pt&&!Et?(this._southWest=new ut(Ht.lat,Ht.lng),this._northEast=new ut(Xt.lat,Xt.lng)):(pt.lat=Math.min(Ht.lat,pt.lat),pt.lng=Math.min(Ht.lng,pt.lng),Et.lat=Math.max(Xt.lat,Et.lat),Et.lng=Math.max(Xt.lng,Et.lng)),this},pad:function(q){var pt=this._southWest,Et=this._northEast,Ht=Math.abs(pt.lat-Et.lat)*q,Xt=Math.abs(pt.lng-Et.lng)*q;return new nt(new ut(pt.lat-Ht,pt.lng-Xt),new ut(Et.lat+Ht,Et.lng+Xt))},getCenter:function(){return new ut((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ut(this.getNorth(),this.getWest())},getSouthEast:function(){return new ut(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(q){typeof q[0]=="number"||q instanceof ut||"lat"in q?q=rt(q):q=st(q);var pt=this._southWest,Et=this._northEast,Ht,Xt;return q instanceof nt?(Ht=q.getSouthWest(),Xt=q.getNorthEast()):Ht=Xt=q,Ht.lat>=pt.lat&&Xt.lat<=Et.lat&&Ht.lng>=pt.lng&&Xt.lng<=Et.lng},intersects:function(q){q=st(q);var pt=this._southWest,Et=this._northEast,Ht=q.getSouthWest(),Xt=q.getNorthEast(),se=Xt.lat>=pt.lat&&Ht.lat<=Et.lat,fe=Xt.lng>=pt.lng&&Ht.lng<=Et.lng;return se&&fe},overlaps:function(q){q=st(q);var pt=this._southWest,Et=this._northEast,Ht=q.getSouthWest(),Xt=q.getNorthEast(),se=Xt.lat>pt.lat&&Ht.lat<Et.lat,fe=Xt.lng>pt.lng&&Ht.lng<Et.lng;return se&&fe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(q,pt){return q?(q=st(q),this._southWest.equals(q.getSouthWest(),pt)&&this._northEast.equals(q.getNorthEast(),pt)):![]},isValid:function(){return!!(this._southWest&&this._northEast)}};function st(tt,q){return tt instanceof nt?tt:new nt(tt,q)}function ut(tt,q,pt){if(isNaN(tt)||isNaN(q))throw new Error("Invalid LatLng object: ("+tt+", "+q+")");this.lat=+tt,this.lng=+q,pt!==void 0&&(this.alt=+pt)}ut.prototype={equals:function(q,pt){if(!q)return![];q=rt(q);var Et=Math.max(Math.abs(this.lat-q.lat),Math.abs(this.lng-q.lng));return Et<=(pt===void 0?1e-9:pt)},toString:function(q){return"LatLng("+u(this.lat,q)+", "+u(this.lng,q)+")"},distanceTo:function(q){return Pt.distance(this,rt(q))},wrap:function(){return Pt.wrapLatLng(this)},toBounds:function(q){var pt=180*q/40075017,Et=pt/Math.cos(Math.PI/180*this.lat);return st([this.lat-pt,this.lng-Et],[this.lat+pt,this.lng+Et])},clone:function(){return new ut(this.lat,this.lng,this.alt)}};function rt(tt,q,pt){return tt instanceof ut?tt:R(tt)&&(0,O.default)(tt[0])!=="object"?tt.length===3?new ut(tt[0],tt[1],tt[2]):tt.length===2?new ut(tt[0],tt[1]):null:tt==null?tt:(typeof tt>"u"?"undefined":(0,O.default)(tt))==="object"&&"lat"in tt?new ut(tt.lat,"lng"in tt?tt.lng:tt.lon,tt.alt):q===void 0?null:new ut(tt,q,pt)}var ht={latLngToPoint:function(q,pt){var Et=this.projection.project(q),Ht=this.scale(pt);return this.transformation._transform(Et,Ht)},pointToLatLng:function(q,pt){var Et=this.scale(pt),Ht=this.transformation.untransform(q,Et);return this.projection.unproject(Ht)},project:function(q){return this.projection.project(q)},unproject:function(q){return this.projection.unproject(q)},scale:function(q){return 256*Math.pow(2,q)},zoom:function(q){return Math.log(q/256)/Math.LN2},getProjectedBounds:function(q){if(this.infinite)return null;var pt=this.projection.bounds,Et=this.scale(q),Ht=this.transformation.transform(pt.min,Et),Xt=this.transformation.transform(pt.max,Et);return new Q(Ht,Xt)},infinite:![],wrapLatLng:function(q){var pt=this.wrapLng?i(q.lng,this.wrapLng,!![]):q.lng,Et=this.wrapLat?i(q.lat,this.wrapLat,!![]):q.lat,Ht=q.alt;return new ut(Et,pt,Ht)},wrapLatLngBounds:function(q){var pt=q.getCenter(),Et=this.wrapLatLng(pt),Ht=pt.lat-Et.lat,Xt=pt.lng-Et.lng;if(Ht===0&&Xt===0)return q;var se=q.getSouthWest(),fe=q.getNorthEast(),Ee=new ut(se.lat-Ht,se.lng-Xt),Re=new ut(fe.lat-Ht,fe.lng-Xt);return new nt(Ee,Re)}};z.CRS=ht;var Pt=l({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(q,pt){var Et=Math.PI/180,Ht=q.lat*Et,Xt=pt.lat*Et,se=Math.sin((pt.lat-q.lat)*Et/2),fe=Math.sin((pt.lng-q.lng)*Et/2),Ee=se*se+Math.cos(Ht)*Math.cos(Xt)*fe*fe,Re=2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee));return this.R*Re}}),wt={R:6378137,MAX_LATITUDE:85.0511287798,project:function(q){var pt=Math.PI/180,Et=this.MAX_LATITUDE,Ht=Math.max(Math.min(Et,q.lat),-Et),Xt=Math.sin(Ht*pt);return new $(this.R*q.lng*pt,this.R*Math.log((1+Xt)/(1-Xt))/2)},unproject:function(q){var pt=180/Math.PI;return new ut((2*Math.atan(Math.exp(q.y/this.R))-Math.PI/2)*pt,q.x*pt/this.R)},bounds:function(){var tt=6378137*Math.PI;return new Q([-tt,-tt],[tt,tt])}()};function Mt(tt,q,pt,Et){if(R(tt)){this._a=tt[0],this._b=tt[1],this._c=tt[2],this._d=tt[3];return}this._a=tt,this._b=q,this._c=pt,this._d=Et}Mt.prototype={transform:function(q,pt){return this._transform(q.clone(),pt)},_transform:function(q,pt){return pt=pt||1,q.x=pt*(this._a*q.x+this._b),q.y=pt*(this._c*q.y+this._d),q},untransform:function(q,pt){return pt=pt||1,new $((q.x/pt-this._b)/this._a,(q.y/pt-this._d)/this._c)}};function Ft(tt,q,pt,Et){return new Mt(tt,q,pt,Et)}var Dt=l({},Pt,{code:"EPSG:3857",projection:wt,transformation:function(){var tt=.5/(Math.PI*wt.R);return Ft(tt,.5,-tt,.5)}()}),Rt=l({},Dt,{code:"EPSG:900913"});function Tt(tt){return document.createElementNS("http://www.w3.org/2000/svg",tt)}function mt(tt,q){var pt="",Et,Ht,Xt,se,fe,Ee;for(Et=0,Xt=tt.length;Et<Xt;Et++){for(fe=tt[Et],Ht=0,se=fe.length;Ht<se;Ht++)Ee=fe[Ht],pt+=(Ht?"L":"M")+Ee.x+" "+Ee.y;pt+=q?It?"z":"x":""}return pt||"M0 0"}var Nt=document.documentElement.style,ct="ActiveXObject"in window,vt=ct&&!document.addEventListener,Lt="msLaunchUri"in navigator&&!("documentMode"in document),Ct=_t("webkit"),jt=_t("android"),zt=_t("android 2")||_t("android 3"),Yt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Zt=jt&&_t("Google")&&Yt<537&&!("AudioNode"in window),ft=!!window.opera,gt=_t("chrome"),dt=_t("gecko")&&!Ct&&!ft&&!ct,lt=!gt&&_t("safari"),ot=_t("phantom"),it="OTransition"in Nt,yt=navigator.platform.indexOf("Win")===0,Ot=ct&&"transition"in Nt,St="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zt,Gt="MozPerspective"in Nt,Ut=!window.L_DISABLE_3D&&(Ot||St||Gt)&&!it&&!ot,Kt=typeof orientation<"u"||_t("mobile"),Jt=Kt&&Ct,te=Kt&&St,ie=!window.PointerEvent&&window.MSPointerEvent,oe=!!(window.PointerEvent||ie),he=!window.L_NO_TOUCH&&(oe||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),ne=Kt&&ft,ce=Kt&&dt,ge=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Me=function(){return!!document.createElement("canvas").getContext}(),It=!!(document.createElementNS&&Tt("svg").createSVGRect),Wt=!It&&function(){try{var tt=document.createElement("div");tt.innerHTML='<v:shape adj="1"/>';var q=tt.firstChild;return q.style.behavior="url(#default#VML)",q&&(0,O.default)(q.adj)==="object"}catch{return![]}}();function _t(tt){return navigator.userAgent.toLowerCase().indexOf(tt)>=0}var ee=(M.default||Object)({ie:ct,ielt9:vt,edge:Lt,webkit:Ct,android:jt,android23:zt,androidStock:Zt,opera:ft,chrome:gt,gecko:dt,safari:lt,phantom:ot,opera12:it,win:yt,ie3d:Ot,webkit3d:St,gecko3d:Gt,any3d:Ut,mobile:Kt,mobileWebkit:Jt,mobileWebkit3d:te,msPointer:ie,pointer:oe,touch:he,mobileOpera:ne,mobileGecko:ce,retina:ge,canvas:Me,svg:It,vml:Wt});z.Browser=ee;var re=ie?"MSPointerDown":"pointerdown",de=ie?"MSPointerMove":"pointermove",Se=ie?"MSPointerUp":"pointerup",Pe=ie?"MSPointerCancel":"pointercancel",Le=["INPUT","SELECT","OPTION"],Ie={},pe=![],Oe=0;function Fe(tt,q,pt,Et){return q==="touchstart"?be(tt,pt,Et):q==="touchmove"?_(tt,pt,Et):q==="touchend"&&at(tt,pt,Et),this}function Ve(tt,q,pt){var Et=tt["_leaflet_"+q+pt];return q==="touchstart"?tt.removeEventListener(re,Et,![]):q==="touchmove"?tt.removeEventListener(de,Et,![]):q==="touchend"&&(tt.removeEventListener(Se,Et,![]),tt.removeEventListener(Pe,Et,![])),this}function be(tt,q,pt){var Et=s(function(Ht){if(Ht.pointerType!=="mouse"&&Ht.MSPOINTER_TYPE_MOUSE&&Ht.pointerType!==Ht.MSPOINTER_TYPE_MOUSE)if(Le.indexOf(Ht.target.tagName)<0)ui(Ht);else return;Ze(Ht,q)});tt["_leaflet_touchstart"+pt]=Et,tt.addEventListener(re,Et,![]),!pe&&(document.documentElement.addEventListener(re,Be,!![]),document.documentElement.addEventListener(de,He,!![]),document.documentElement.addEventListener(Se,ke,!![]),document.documentElement.addEventListener(Pe,ke,!![]),pe=!![])}function Be(tt){Ie[tt.pointerId]=tt,Oe++}function He(tt){Ie[tt.pointerId]&&(Ie[tt.pointerId]=tt)}function ke(tt){delete Ie[tt.pointerId],Oe--}function Ze(tt,q){tt.touches=[];for(var pt in Ie)tt.touches.push(Ie[pt]);tt.changedTouches=[tt],q(tt)}function _(tt,q,pt){var Et=function(Xt){(Xt.pointerType===Xt.MSPOINTER_TYPE_MOUSE||Xt.pointerType==="mouse")&&Xt.buttons===0||Ze(Xt,q)};tt["_leaflet_touchmove"+pt]=Et,tt.addEventListener(de,Et,![])}function at(tt,q,pt){var Et=function(Xt){Ze(Xt,q)};tt["_leaflet_touchend"+pt]=Et,tt.addEventListener(Se,Et,![]),tt.addEventListener(Pe,Et,![])}var xt=ie?"MSPointerDown":oe?"pointerdown":"touchstart",bt=ie?"MSPointerUp":oe?"pointerup":"touchend",Bt="_leaflet_";function Qt(tt,q,pt){var Et,Ht,Xt=![],se=250;function fe(Re){var je;if(oe){if(!Lt||Re.pointerType==="mouse")return;je=Oe}else je=Re.touches.length;if(!(je>1)){var Je=Date.now(),_e=Je-(Et||Je);Ht=Re.touches?Re.touches[0]:Re,Xt=_e>0&&_e<=se,Et=Je}}function Ee(Re){if(Xt&&!Ht.cancelBubble){if(oe){if(!Lt||Re.pointerType==="mouse")return;var je={},Je,_e;for(_e in Ht)Je=Ht[_e],je[_e]=Je&&Je.bind?Je.bind(Ht):Je;Ht=je}Ht.type="dblclick",q(Ht),Et=null}}return tt[Bt+xt+pt]=fe,tt[Bt+bt+pt]=Ee,tt[Bt+"dblclick"+pt]=q,tt.addEventListener(xt,fe,![]),tt.addEventListener(bt,Ee,![]),tt.addEventListener("dblclick",q,![]),this}function ue(tt,q){var pt=tt[Bt+xt+q],Et=tt[Bt+bt+q],Ht=tt[Bt+"dblclick"+q];return tt.removeEventListener(xt,pt,![]),tt.removeEventListener(bt,Et,![]),!Lt&&tt.removeEventListener("dblclick",Ht,![]),this}var Ce=$t(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Te=$t(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ue=Te==="webkitTransition"||Te==="OTransition"?Te+"End":"transitionend";function Vt(tt){return typeof tt=="string"?document.getElementById(tt):tt}function qt(tt,q){var pt=tt.style[q]||tt.currentStyle&&tt.currentStyle[q];if((!pt||pt==="auto")&&document.defaultView){var Et=document.defaultView.getComputedStyle(tt,null);pt=Et?Et[q]:null}return pt==="auto"?null:pt}function ae(tt,q,pt){var Et=document.createElement(tt);return Et.className=q||"",pt&&pt.appendChild(Et),Et}function ve(tt){var q=tt.parentNode;q&&q.removeChild(tt)}function xe(tt){for(;tt.firstChild;)tt.removeChild(tt.firstChild)}function ye(tt){var q=tt.parentNode;q.lastChild!==tt&&q.appendChild(tt)}function De(tt){var q=tt.parentNode;q.firstChild!==tt&&q.insertBefore(tt,q.firstChild)}function Ne(tt,q){if(tt.classList!==void 0)return tt.classList.contains(q);var pt=We(tt);return pt.length>0&&new RegExp("(^|\\s)"+q+"(\\s|$)").test(pt)}function we(tt,q){if(tt.classList!==void 0)for(var pt=d(q),Et=0,Ht=pt.length;Et<Ht;Et++)tt.classList.add(pt[Et]);else if(!Ne(tt,q)){var Xt=We(tt);Ge(tt,(Xt?Xt+" ":"")+q)}}function ze(tt,q){tt.classList!==void 0?tt.classList.remove(q):Ge(tt,g((" "+We(tt)+" ").replace(" "+q+" "," ")))}function Ge(tt,q){tt.className.baseVal===void 0?tt.className=q:tt.className.baseVal=q}function We(tt){return tt.className.baseVal===void 0?tt.className:tt.className.baseVal}function At(tt,q){"opacity"in tt.style?tt.style.opacity=q:"filter"in tt.style&&kt(tt,q)}function kt(tt,q){var pt=![],Et="DXImageTransform.Microsoft.Alpha";try{pt=tt.filters.item(Et)}catch{if(q===1)return}q=Math.round(q*100),pt?(pt.Enabled=q!==100,pt.Opacity=q):tt.style.filter+=" progid:"+Et+"(opacity="+q+")"}function $t(tt){for(var q=document.documentElement.style,pt=0;pt<tt.length;pt++)if(tt[pt]in q)return tt[pt];return![]}function le(tt,q,pt){var Et=q||new $(0,0);tt.style[Ce]=(Ot?"translate("+Et.x+"px,"+Et.y+"px)":"translate3d("+Et.x+"px,"+Et.y+"px,0)")+(pt?" scale("+pt+")":"")}function me(tt,q){tt._leaflet_pos=q,Ut?le(tt,q):(tt.style.left=q.x+"px",tt.style.top=q.y+"px")}function Ae(tt){return tt._leaflet_pos||new $(0,0)}var Ye,Qe,Ke;if("onselectstart"in document)Ye=function(){ni(window,"selectstart",ui)},Qe=function(){si(window,"selectstart",ui)};else{var qe=$t(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ye=function(){if(qe){var q=document.documentElement.style;Ke=q[qe],q[qe]="none"}},Qe=function(){qe&&(document.documentElement.style[qe]=Ke,Ke=void 0)}}function ii(){ni(window,"dragstart",ui)}function Ai(){si(window,"dragstart",ui)}var li,$e;function Xe(tt){for(;tt.tabIndex===-1;)tt=tt.parentNode;tt.style&&(ei(),li=tt,$e=tt.style.outline,tt.style.outline="none",ni(window,"keydown",ei))}function ei(){li&&(li.style.outline=$e,li=void 0,$e=void 0,si(window,"keydown",ei))}function ri(tt){do tt=tt.parentNode;while((!tt.offsetWidth||!tt.offsetHeight)&&tt!==document.body);return tt}function ai(tt){var q=tt.getBoundingClientRect();return{x:q.width/tt.offsetWidth||1,y:q.height/tt.offsetHeight||1,boundingClientRect:q}}var hi=(M.default||Object)({TRANSFORM:Ce,TRANSITION:Te,TRANSITION_END:Ue,get:Vt,getStyle:qt,create:ae,remove:ve,empty:xe,toFront:ye,toBack:De,hasClass:Ne,addClass:we,removeClass:ze,setClass:Ge,getClass:We,setOpacity:At,testProp:$t,setTransform:le,setPosition:me,getPosition:Ae,disableTextSelection:Ye,enableTextSelection:Qe,disableImageDrag:ii,enableImageDrag:Ai,preventOutline:Xe,restoreOutline:ei,getSizedParentNode:ri,getScale:ai});z.DomUtil=hi;function ni(tt,q,pt,Et){if((typeof q>"u"?"undefined":(0,O.default)(q))==="object")for(var Ht in q)ci(tt,Ht,q[Ht],pt);else{q=d(q);for(var Xt=0,se=q.length;Xt<se;Xt++)ci(tt,q[Xt],pt,Et)}return this}var ti="_leaflet_events";function si(tt,q,pt,Et){if((typeof q>"u"?"undefined":(0,O.default)(q))==="object")for(var Ht in q)oi(tt,Ht,q[Ht],pt);else if(q){q=d(q);for(var Xt=0,se=q.length;Xt<se;Xt++)oi(tt,q[Xt],pt,Et)}else{for(var fe in tt[ti])oi(tt,fe,tt[ti][fe]);delete tt[ti]}return this}function ci(tt,q,pt,Et){var Ht=q+x(pt)+(Et?"_"+x(Et):"");if(tt[ti]&&tt[ti][Ht])return this;var Xt=function(Ee){return pt.call(Et||tt,Ee||window.event)},se=Xt;oe&&q.indexOf("touch")===0?Fe(tt,q,Xt,Ht):he&&q==="dblclick"&&Qt&&!(oe&&gt)?Qt(tt,Xt,Ht):"addEventListener"in tt?q==="mousewheel"?tt.addEventListener("onwheel"in tt?"wheel":"mousewheel",Xt,![]):q==="mouseenter"||q==="mouseleave"?(Xt=function(Ee){Ee=Ee||window.event,Ji(tt,Ee)&&se(Ee)},tt.addEventListener(q==="mouseenter"?"mouseover":"mouseout",Xt,![])):(q==="click"&&jt&&(Xt=function(Ee){fr(Ee,se)}),tt.addEventListener(q,Xt,![])):"attachEvent"in tt&&tt.attachEvent("on"+q,Xt),tt[ti]=tt[ti]||{},tt[ti][Ht]=Xt}function oi(tt,q,pt,Et){var Ht=q+x(pt)+(Et?"_"+x(Et):""),Xt=tt[ti]&&tt[ti][Ht];if(!Xt)return this;oe&&q.indexOf("touch")===0?Ve(tt,q,Ht):he&&q==="dblclick"&&ue&&!(oe&&gt)?ue(tt,Ht):"removeEventListener"in tt?q==="mousewheel"?tt.removeEventListener("onwheel"in tt?"wheel":"mousewheel",Xt,![]):tt.removeEventListener(q==="mouseenter"?"mouseover":q==="mouseleave"?"mouseout":q,Xt,![]):"detachEvent"in tt&&tt.detachEvent("on"+q,Xt),tt[ti][Ht]=null}function di(tt){return tt.stopPropagation?tt.stopPropagation():tt.originalEvent?tt.originalEvent._stopped=!![]:tt.cancelBubble=!![],Li(tt),this}function gi(tt){return ci(tt,"mousewheel",di),this}function Ki(tt){return ni(tt,"mousedown touchstart dblclick",di),ci(tt,"click",Pi),this}function ui(tt){return tt.preventDefault?tt.preventDefault():tt.returnValue=![],this}function Ei(tt){return ui(tt),di(tt),this}function yi(tt,q){if(!q)return new $(tt.clientX,tt.clientY);var pt=ai(q),Et=pt.boundingClientRect;return new $((tt.clientX-Et.left)/pt.x-q.clientLeft,(tt.clientY-Et.top)/pt.y-q.clientTop)}var Ci=yt&&gt?2*window.devicePixelRatio:dt?window.devicePixelRatio:1;function pi(tt){return Lt?tt.wheelDeltaY/2:tt.deltaY&&tt.deltaMode===0?-tt.deltaY/Ci:tt.deltaY&&tt.deltaMode===1?-tt.deltaY*20:tt.deltaY&&tt.deltaMode===2?-tt.deltaY*60:tt.deltaX||tt.deltaZ?0:tt.wheelDelta?(tt.wheelDeltaY||tt.wheelDelta)/2:tt.detail&&Math.abs(tt.detail)<32765?-tt.detail*20:tt.detail?tt.detail/-32765*60:0}var wi={};function Pi(tt){wi[tt.type]=!![]}function Li(tt){var q=wi[tt.type];return wi[tt.type]=![],q}function Ji(tt,q){var pt=q.relatedTarget;if(!pt)return!![];try{for(;pt&&pt!==tt;)pt=pt.parentNode}catch{return![]}return pt!==tt}var Fi;function fr(tt,q){var pt=tt.timeStamp||tt.originalEvent&&tt.originalEvent.timeStamp,Et=Fi&&pt-Fi;if(Et&&Et>100&&Et<500||tt.target._simulatedClick&&!tt._simulated){Ei(tt);return}Fi=pt,q(tt)}var dr=(M.default||Object)({on:ni,off:si,stopPropagation:di,disableScrollPropagation:gi,disableClickPropagation:Ki,preventDefault:ui,stop:Ei,getMousePosition:yi,getWheelDelta:pi,fakeStop:Pi,skipped:Li,isExternalTarget:Ji,addListener:ni,removeListener:si});z.DomEvent=dr;var vr=Y.extend({run:function(q,pt,Et,Ht){this.stop(),this._el=q,this._inProgress=!![],this._duration=Et||.25,this._easeOutPower=1/Math.max(Ht||.5,.2),this._startPos=Ae(q),this._offset=pt.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!![]),this._complete())},_animate:function(){this._animId=G(this._animate,this),this._step()},_step:function(q){var pt=+new Date-this._startTime,Et=this._duration*1e3;pt<Et?this._runFrame(this._easeOut(pt/Et),q):(this._runFrame(1),this._complete())},_runFrame:function(q,pt){var Et=this._startPos.add(this._offset.multiplyBy(q));pt&&Et._round(),me(this._el,Et),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=![],this.fire("end")},_easeOut:function(q){return 1-Math.pow(1-q,this._easeOutPower)}});z.PosAnimation=vr;var Bi=H.extend({initialize:function(q){this._map=q},enable:function(){return this._enabled?this:(this._enabled=!![],this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=![],this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});z.Handler=Bi,Bi.addTo=function(tt,q){return tt.addHandler(q,this),this};var gr={Events:V};z.Mixin=gr;var Qi=he?"touchstart mousedown":"mousedown",qi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ki={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},mi=Y.extend({options:{clickTolerance:3},initialize:function(q,pt,Et,Ht){y(this,Ht),this._element=q,this._dragStartTarget=pt||q,this._preventOutline=Et},enable:function(){this._enabled||(ni(this._dragStartTarget,Qi,this._onDown,this),this._enabled=!![])},disable:function(){this._enabled&&(mi._dragging===this&&this.finishDrag(),si(this._dragStartTarget,Qi,this._onDown,this),this._enabled=![],this._moved=![])},_onDown:function(q){if(!(q._simulated||!this._enabled)&&(this._moved=![],!Ne(this._element,"leaflet-zoom-anim")&&!(mi._dragging||q.shiftKey||q.which!==1&&q.button!==1&&!q.touches)&&(mi._dragging=this,this._preventOutline&&Xe(this._element),ii(),Ye(),!this._moving))){this.fire("down");var pt=q.touches?q.touches[0]:q,Et=ri(this._element);this._startPoint=new $(pt.clientX,pt.clientY),this._parentScale=ai(Et),ni(document,ki[q.type],this._onMove,this),ni(document,qi[q.type],this._onUp,this)}},_onMove:function(q){if(!(q._simulated||!this._enabled)){if(q.touches&&q.touches.length>1){this._moved=!![];return}var pt=q.touches&&q.touches.length===1?q.touches[0]:q,Et=new $(pt.clientX,pt.clientY)._subtract(this._startPoint);!Et.x&&!Et.y||Math.abs(Et.x)+Math.abs(Et.y)<this.options.clickTolerance||(Et.x/=this._parentScale.x,Et.y/=this._parentScale.y,ui(q),!this._moved&&(this.fire("dragstart"),this._moved=!![],this._startPos=Ae(this._element).subtract(Et),we(document.body,"leaflet-dragging"),this._lastTarget=q.target||q.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(Et),this._moving=!![],W(this._animRequest),this._lastEvent=q,this._animRequest=G(this._updatePosition,this,!![]))}},_updatePosition:function(){var q={originalEvent:this._lastEvent};this.fire("predrag",q),me(this._element,this._newPos),this.fire("drag",q)},_onUp:function(q){q._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){ze(document.body,"leaflet-dragging"),this._lastTarget&&(ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var q in ki)si(document,ki[q],this._onMove,this),si(document,qi[q],this._onUp,this);Ai(),Qe(),this._moved&&this._moving&&(W(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=![],mi._dragging=![]}});z.Draggable=mi;function _i(tt,q){if(!q||!tt.length)return(0,b.default)(tt).call(tt);var pt=q*q;return tt=mr(tt,pt),tt=xr(tt,pt),tt}function tr(tt,q,pt){return Math.sqrt(Si(tt,q,pt,!![]))}function pr(tt,q,pt){return Si(tt,q,pt)}function xr(tt,q){var pt=tt.length,Et=(typeof Uint8Array>"u"||typeof Uint8Array>"u"?"undefined":(0,O.default)(Uint8Array))!==void 0+""?Uint8Array:Array,Ht=new Et(pt);Ht[0]=Ht[pt-1]=1,zi(tt,Ht,q,0,pt-1);var Xt,se=[];for(Xt=0;Xt<pt;Xt++)Ht[Xt]&&se.push(tt[Xt]);return se}function zi(tt,q,pt,Et,Ht){var Xt=0,se,fe,Ee;for(fe=Et+1;fe<=Ht-1;fe++)Ee=Si(tt[fe],tt[Et],tt[Ht],!![]),Ee>Xt&&(se=fe,Xt=Ee);Xt>pt&&(q[se]=1,zi(tt,q,pt,Et,se),zi(tt,q,pt,se,Ht))}function mr(tt,q){for(var pt=[tt[0]],Et=1,Ht=0,Xt=tt.length;Et<Xt;Et++)yr(tt[Et],tt[Ht])>q&&(pt.push(tt[Et]),Ht=Et);return Ht<Xt-1&&pt.push(tt[Xt-1]),pt}var er;function ir(tt,q,pt,Et,Ht){var Xt=Et?er:xi(tt,pt),se=xi(q,pt),fe,Ee,Re;for(er=se;[];){if(!(Xt|se))return[tt,q];if(Xt&se)return![];fe=Xt||se,Ee=Di(tt,q,fe,pt,Ht),Re=xi(Ee,pt),fe===Xt?(tt=Ee,Xt=Re):(q=Ee,se=Re)}}function Di(tt,q,pt,Et,Ht){var Xt=q.x-tt.x,se=q.y-tt.y,fe=Et.min,Ee=Et.max,Re,je;return pt&8?(Re=tt.x+Xt*(Ee.y-tt.y)/se,je=Ee.y):pt&4?(Re=tt.x+Xt*(fe.y-tt.y)/se,je=fe.y):pt&2?(Re=Ee.x,je=tt.y+se*(Ee.x-tt.x)/Xt):pt&1&&(Re=fe.x,je=tt.y+se*(fe.x-tt.x)/Xt),new $(Re,je,Ht)}function xi(tt,q){var pt=0;return tt.x<q.min.x?pt|=1:tt.x>q.max.x&&(pt|=2),tt.y<q.min.y?pt|=4:tt.y>q.max.y&&(pt|=8),pt}function yr(tt,q){var pt=q.x-tt.x,Et=q.y-tt.y;return pt*pt+Et*Et}function Si(tt,q,pt,Et){var Ht=q.x,Xt=q.y,se=pt.x-Ht,fe=pt.y-Xt,Ee=se*se+fe*fe,Re;return Ee>0&&(Re=((tt.x-Ht)*se+(tt.y-Xt)*fe)/Ee,Re>1?(Ht=pt.x,Xt=pt.y):Re>0&&(Ht+=se*Re,Xt+=fe*Re)),se=tt.x-Ht,fe=tt.y-Xt,Et?se*se+fe*fe:new $(Ht,Xt)}function fi(tt){return!R(tt[0])||(0,O.default)(tt[0][0])!=="object"&&typeof tt[0][0]<"u"}function rr(tt){return E.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fi(tt)}var Cr=(M.default||Object)({simplify:_i,pointToSegmentDistance:tr,closestPointOnSegment:pr,clipSegment:ir,_getEdgeIntersection:Di,_getBitCode:xi,_sqClosestPointOnSegment:Si,isFlat:fi,_flat:rr});z.LineUtil=Cr;function nr(tt,q,pt){var Et,Ht=[1,4,2,8],Xt,se,fe,Ee,Re,je,Je,_e;for(Xt=0,je=tt.length;Xt<je;Xt++)tt[Xt]._code=xi(tt[Xt],q);for(fe=0;fe<4;fe++){for(Je=Ht[fe],Et=[],Xt=0,je=tt.length,se=je-1;Xt<je;se=Xt++)Ee=tt[Xt],Re=tt[se],Ee._code&Je?!(Re._code&Je)&&(_e=Di(Re,Ee,Je,q,pt),_e._code=xi(_e,q),Et.push(_e)):(Re._code&Je&&(_e=Di(Re,Ee,Je,q,pt),_e._code=xi(_e,q),Et.push(_e)),Et.push(Ee));tt=Et}return tt}var wr=(M.default||Object)({clipPolygon:nr});z.PolyUtil=wr;var Vi={project:function(q){return new $(q.lng,q.lat)},unproject:function(q){return new ut(q.y,q.x)},bounds:new Q([-180,-90],[180,90])},Gi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(q){var pt=Math.PI/180,Et=this.R,Ht=q.lat*pt,Xt=this.R_MINOR/Et,se=Math.sqrt(1-Xt*Xt),fe=se*Math.sin(Ht),Ee=Math.tan(Math.PI/4-Ht/2)/Math.pow((1-fe)/(1+fe),se/2);return Ht=-Et*Math.log(Math.max(Ee,1e-10)),new $(q.lng*pt*Et,Ht)},unproject:function(q){for(var pt=180/Math.PI,Et=this.R,Ht=this.R_MINOR/Et,Xt=Math.sqrt(1-Ht*Ht),se=Math.exp(-q.y/Et),fe=Math.PI/2-2*Math.atan(se),Ee=0,Re=.1,je;Ee<15&&Math.abs(Re)>1e-7;Ee++)je=Xt*Math.sin(fe),je=Math.pow((1-je)/(1+je),Xt/2),Re=Math.PI/2-2*Math.atan(se*je)-fe,fe+=Re;return new ut(fe*pt,q.x*pt/Et)}},Pr=(M.default||Object)({LonLat:Vi,Mercator:Gi,SphericalMercator:wt});z.index=Pr;var Sr=l({},Pt,{code:"EPSG:3395",projection:Gi,transformation:function(){var tt=.5/(Math.PI*Gi.R);return Ft(tt,.5,-tt,.5)}()}),Tr=l({},Pt,{code:"EPSG:4326",projection:Vi,transformation:Ft(1/180,1,-1/180,.5)}),br=l({},ht,{projection:Vi,transformation:Ft(1,0,-1,0),scale:function(q){return Math.pow(2,q)},zoom:function(q){return Math.log(q)/Math.LN2},distance:function(q,pt){var Et=pt.lng-q.lng,Ht=pt.lat-q.lat;return Math.sqrt(Et*Et+Ht*Ht)},infinite:!![]});ht.Earth=Pt,ht.EPSG3395=Sr,ht.EPSG3857=Dt,ht.EPSG900913=Rt,ht.EPSG4326=Tr,ht.Simple=br;var Hi=Y.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!![]},addTo:function(q){return q.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(q){return q&&q.removeLayer(this),this},getPane:function(q){return this._map.getPane(q?this.options[q]||q:this.options.pane)},addInteractiveTarget:function(q){return this._map._targets[x(q)]=this,this},removeInteractiveTarget:function(q){return delete this._map._targets[x(q)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(q){var pt=q.target;if(pt.hasLayer(this)){if(this._map=pt,this._zoomAnimated=pt._zoomAnimated,this.getEvents){var Et=this.getEvents();pt.on(Et,this),this.once("remove",function(){pt.off(Et,this)},this)}this.onAdd(pt),this.getAttribution&&pt.attributionControl&&pt.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),pt.fire("layeradd",{layer:this})}}}),Ti=Hi.extend({initialize:function(q,pt){y(this,pt),this._layers={};var Et,Ht;if(q)for(Et=0,Ht=q.length;Et<Ht;Et++)this.addLayer(q[Et])},addLayer:function(q){var pt=this.getLayerId(q);return this._layers[pt]=q,this._map&&this._map.addLayer(q),this},removeLayer:function(q){var pt=q in this._layers?q:this.getLayerId(q);return this._map&&this._layers[pt]&&this._map.removeLayer(this._layers[pt]),delete this._layers[pt],this},hasLayer:function(q){return!!q&&(q in this._layers||this.getLayerId(q)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(q){var pt=(0,b.default)(Array.prototype).call(arguments,1),Et,Ht;for(Et in this._layers)Ht=this._layers[Et],Ht[q]&&Ht[q].apply(Ht,pt);return this},onAdd:function(q){this.eachLayer(q.addLayer,q)},onRemove:function(q){this.eachLayer(q.removeLayer,q)},eachLayer:function(q,pt){for(var Et in this._layers)q.call(pt,this._layers[Et]);return this},getLayer:function(q){return this._layers[q]},getLayers:function(){var q=[];return this.eachLayer(q.push,q),q},setZIndex:function(q){return this.invoke("setZIndex",q)},getLayerId:function(q){return x(q)}}),Ar=function(q,pt){return new Ti(q,pt)},Ii=Ti.extend({addLayer:function(q){return this.hasLayer(q)?this:(q.addEventParent(this),Ti.prototype.addLayer.call(this,q),this.fire("layeradd",{layer:q}))},removeLayer:function(q){return this.hasLayer(q)?(q in this._layers&&(q=this._layers[q]),q.removeEventParent(this),Ti.prototype.removeLayer.call(this,q),this.fire("layerremove",{layer:q})):this},setStyle:function(q){return this.invoke("setStyle",q)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var q=new nt;for(var pt in this._layers){var Et=this._layers[pt];q.extend(Et.getBounds?Et.getBounds():Et.getLatLng())}return q}}),Er=function(q){return new Ii(q)},Ui=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(q){y(this,q)},createIcon:function(q){return this._createIcon("icon",q)},createShadow:function(q){return this._createIcon("shadow",q)},_createIcon:function(q,pt){var Et=this._getIconUrl(q);if(!Et){if(q==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var Ht=this._createImg(Et,pt&&pt.tagName==="IMG"?pt:null);return this._setIconStyles(Ht,q),Ht},_setIconStyles:function(q,pt){var Et=this.options,Ht=Et[pt+"Size"];typeof Ht=="number"&&(Ht=[Ht,Ht]);var Xt=J(Ht),se=J(pt==="shadow"&&Et.shadowAnchor||Et.iconAnchor||Xt&&Xt.divideBy(2,!![]));q.className="leaflet-marker-"+pt+" "+(Et.className||""),se&&(q.style.marginLeft=-se.x+"px",q.style.marginTop=-se.y+"px"),Xt&&(q.style.width=Xt.x+"px",q.style.height=Xt.y+"px")},_createImg:function(q,pt){return pt=pt||document.createElement("img"),pt.src=q,pt},_getIconUrl:function(q){return ge&&this.options[q+"RetinaUrl"]||this.options[q+"Url"]}});function Lr(tt){return new Ui(tt)}var Ri=Ui.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(q){return!Ri.imagePath&&(Ri.imagePath=this._detectIconPath()),(this.options.imagePath||Ri.imagePath)+Ui.prototype._getIconUrl.call(this,q)},_detectIconPath:function(){var q=ae("div","leaflet-default-icon-path",document.body),pt=qt(q,"background-image")||qt(q,"backgroundImage");return document.body.removeChild(q),pt===null||pt.indexOf("url")!==0?pt="":pt=pt.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),pt}}),ar=Bi.extend({initialize:function(q){this._marker=q},addHooks:function(){var q=this._marker._icon;!this._draggable&&(this._draggable=new mi(q,q,!![])),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(q,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(q){var pt=this._marker,Et=pt._map,Ht=this._marker.options.autoPanSpeed,Xt=this._marker.options.autoPanPadding,se=Ae(pt._icon),fe=Et.getPixelBounds(),Ee=Et.getPixelOrigin(),Re=et(fe.min._subtract(Ee).add(Xt),fe.max._subtract(Ee).subtract(Xt));if(!Re.contains(se)){var je=J((Math.max(Re.max.x,se.x)-Re.max.x)/(fe.max.x-Re.max.x)-(Math.min(Re.min.x,se.x)-Re.min.x)/(fe.min.x-Re.min.x),(Math.max(Re.max.y,se.y)-Re.max.y)/(fe.max.y-Re.max.y)-(Math.min(Re.min.y,se.y)-Re.min.y)/(fe.min.y-Re.min.y)).multiplyBy(Ht);Et.panBy(je,{animate:![]}),this._draggable._newPos._add(je),this._draggable._startPos._add(je),me(pt._icon,this._draggable._newPos),this._onDrag(q),this._panRequest=G(this._adjustPan.bind(this,q))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(q){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=G(this._adjustPan.bind(this,q)))},_onDrag:function(q){var pt=this._marker,Et=pt._shadow,Ht=Ae(pt._icon),Xt=pt._map.layerPointToLatLng(Ht);Et&&me(Et,Ht),pt._latlng=Xt,q.latlng=Xt,q.oldLatLng=this._oldLatLng,pt.fire("move",q).fire("drag",q)},_onDragEnd:function(q){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",q)}}),Oi=Hi.extend({options:{icon:new Ri,interactive:!![],keyboard:!![],title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:![],riseOffset:250,pane:"markerPane",bubblingMouseEvents:![],draggable:![],autoPan:![],autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(q,pt){y(this,pt),this._latlng=rt(q)},onAdd:function(q){this._zoomAnimated=this._zoomAnimated&&q.options.markerZoomAnimation,this._zoomAnimated&&q.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(q){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!![],this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&q.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(q){var pt=this._latlng;return this._latlng=rt(q),this.update(),this.fire("move",{oldLatLng:pt,latlng:this._latlng})},setZIndexOffset:function(q){return this.options.zIndexOffset=q,this.update()},setIcon:function(q){return this.options.icon=q,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var q=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(q)}return this},_initIcon:function(){var q=this.options,pt="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),Et=q.icon.createIcon(this._icon),Ht=![];Et!==this._icon&&(this._icon&&this._removeIcon(),Ht=!![],q.title&&(Et.title=q.title),Et.tagName==="IMG"&&(Et.alt=q.alt||"")),we(Et,pt),q.keyboard&&(Et.tabIndex="0"),this._icon=Et,q.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var Xt=q.icon.createShadow(this._shadow),se=![];Xt!==this._shadow&&(this._removeShadow(),se=!![]),Xt&&(we(Xt,pt),Xt.alt=""),this._shadow=Xt,q.opacity<1&&this._updateOpacity(),Ht&&this.getPane().appendChild(this._icon),this._initInteraction(),Xt&&se&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ve(this._shadow),this._shadow=null},_setPos:function(q){me(this._icon,q),this._shadow&&me(this._shadow,q),this._zIndex=q.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(q){this._icon.style.zIndex=this._zIndex+q},_animateZoom:function(q){var pt=this._map._latLngToNewLayerPoint(this._latlng,q.zoom,q.center).round();this._setPos(pt)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ar)){var q=this.options.draggable;this.dragging&&(q=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ar(this),q&&this.dragging.enable()}},setOpacity:function(q){return this.options.opacity=q,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var q=this.options.opacity;At(this._icon,q),this._shadow&&At(this._shadow,q)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Dr(tt,q){return new Oi(tt,q)}var Ni=Hi.extend({options:{stroke:!![],color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:![],fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!![],bubblingMouseEvents:!![]},beforeAdd:function(q){this._renderer=q.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(q){return y(this,q),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Wi=Ni.extend({options:{fill:!![],radius:10},initialize:function(q,pt){y(this,pt),this._latlng=rt(q),this._radius=this.options.radius},setLatLng:function(q){return this._latlng=rt(q),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(q){return this.options.radius=this._radius=q,this.redraw()},getRadius:function(){return this._radius},setStyle:function(q){var pt=q&&q.radius||this._radius;return Ni.prototype.setStyle.call(this,q),this.setRadius(pt),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var q=this._radius,pt=this._radiusY||q,Et=this._clickTolerance(),Ht=[q+Et,pt+Et];this._pxBounds=new Q(this._point.subtract(Ht),this._point.add(Ht))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(q){return q.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ir(tt,q){return new Wi(tt,q)}var or=Wi.extend({initialize:function(q,pt,Et){if(typeof pt=="number"&&(pt=l({},Et,{radius:pt})),y(this,pt),this._latlng=rt(q),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(q){return this._mRadius=q,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var q=[this._radius,this._radiusY||this._radius];return new nt(this._map.layerPointToLatLng(this._point.subtract(q)),this._map.layerPointToLatLng(this._point.add(q)))},setStyle:Ni.prototype.setStyle,_project:function(){var q=this._latlng.lng,pt=this._latlng.lat,Et=this._map,Ht=Et.options.crs;if(Ht.distance===Pt.distance){var Xt=Math.PI/180,se=this._mRadius/Pt.R/Xt,fe=Et.project([pt+se,q]),Ee=Et.project([pt-se,q]),Re=fe.add(Ee).divideBy(2),je=Et.unproject(Re).lat,Je=Math.acos((Math.cos(se*Xt)-Math.sin(pt*Xt)*Math.sin(je*Xt))/(Math.cos(pt*Xt)*Math.cos(je*Xt)))/Xt;(isNaN(Je)||Je===0)&&(Je=se/Math.cos(Math.PI/180*pt)),this._point=Re.subtract(Et.getPixelOrigin()),this._radius=isNaN(Je)?0:Re.x-Et.project([je,q-Je]).x,this._radiusY=Re.y-fe.y}else{var _e=Ht.unproject(Ht.project(this._latlng).subtract([this._mRadius,0]));this._point=Et.latLngToLayerPoint(this._latlng),this._radius=this._point.x-Et.latLngToLayerPoint(_e).x}this._updateBounds()}});function Rr(tt,q,pt){return new or(tt,q,pt)}var vi=Ni.extend({options:{smoothFactor:1,noClip:![]},initialize:function(q,pt){y(this,pt),this._setLatLngs(q)},getLatLngs:function(){return this._latlngs},setLatLngs:function(q){return this._setLatLngs(q),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(q){for(var pt=1/0,Et=null,Ht=Si,Xt,se,fe=0,Ee=this._parts.length;fe<Ee;fe++)for(var Re=this._parts[fe],je=1,Je=Re.length;je<Je;je++){Xt=Re[je-1],se=Re[je];var _e=Ht(q,Xt,se,!![]);_e<pt&&(pt=_e,Et=Ht(q,Xt,se))}return Et&&(Et.distance=Math.sqrt(pt)),Et},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var q,pt,Et,Ht,Xt,se,fe,Ee=this._rings[0],Re=Ee.length;if(!Re)return null;for(q=0,pt=0;q<Re-1;q++)pt+=Ee[q].distanceTo(Ee[q+1])/2;if(pt===0)return this._map.layerPointToLatLng(Ee[0]);for(q=0,Ht=0;q<Re-1;q++)if(Xt=Ee[q],se=Ee[q+1],Et=Xt.distanceTo(se),Ht+=Et,Ht>pt)return fe=(Ht-pt)/Et,this._map.layerPointToLatLng([se.x-fe*(se.x-Xt.x),se.y-fe*(se.y-Xt.y)])},getBounds:function(){return this._bounds},addLatLng:function(q,pt){return pt=pt||this._defaultShape(),q=rt(q),pt.push(q),this._bounds.extend(q),this.redraw()},_setLatLngs:function(q){this._bounds=new nt,this._latlngs=this._convertLatLngs(q)},_defaultShape:function(){return fi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(q){for(var pt=[],Et=fi(q),Ht=0,Xt=q.length;Ht<Xt;Ht++)Et?(pt[Ht]=rt(q[Ht]),this._bounds.extend(pt[Ht])):pt[Ht]=this._convertLatLngs(q[Ht]);return pt},_project:function(){var q=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,q);var pt=this._clickTolerance(),Et=new $(pt,pt);this._bounds.isValid()&&q.isValid()&&(q.min._subtract(Et),q.max._add(Et),this._pxBounds=q)},_projectLatlngs:function(q,pt,Et){var Ht=q[0]instanceof ut,Xt=q.length,se,fe;if(Ht){for(fe=[],se=0;se<Xt;se++)fe[se]=this._map.latLngToLayerPoint(q[se]),Et.extend(fe[se]);pt.push(fe)}else for(se=0;se<Xt;se++)this._projectLatlngs(q[se],pt,Et)},_clipPoints:function(){var q=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(q))){if(this.options.noClip){this._parts=this._rings;return}var pt=this._parts,Et,Ht,Xt,se,fe,Ee,Re;for(Et=0,Xt=0,se=this._rings.length;Et<se;Et++)for(Re=this._rings[Et],Ht=0,fe=Re.length;Ht<fe-1;Ht++)Ee=ir(Re[Ht],Re[Ht+1],q,Ht,!![]),Ee&&(pt[Xt]=pt[Xt]||[],pt[Xt].push(Ee[0]),(Ee[1]!==Re[Ht+1]||Ht===fe-2)&&(pt[Xt].push(Ee[1]),Xt++))}},_simplifyPoints:function(){for(var q=this._parts,pt=this.options.smoothFactor,Et=0,Ht=q.length;Et<Ht;Et++)q[Et]=_i(q[Et],pt)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(q,pt){var Et,Ht,Xt,se,fe,Ee,Re=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(q))return![];for(Et=0,se=this._parts.length;Et<se;Et++)for(Ee=this._parts[Et],Ht=0,fe=Ee.length,Xt=fe-1;Ht<fe;Xt=Ht++)if(!(!pt&&Ht===0)&&tr(q,Ee[Xt],Ee[Ht])<=Re)return!![];return![]}});function Or(tt,q){return new vi(tt,q)}vi._flat=rr;var ji=vi.extend({options:{fill:!![]},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var q,pt,Et,Ht,Xt,se,fe,Ee,Re,je=this._rings[0],Je=je.length;if(!Je)return null;for(se=fe=Ee=0,q=0,pt=Je-1;q<Je;pt=q++)Et=je[q],Ht=je[pt],Xt=Et.y*Ht.x-Ht.y*Et.x,fe+=(Et.x+Ht.x)*Xt,Ee+=(Et.y+Ht.y)*Xt,se+=Xt*3;return se===0?Re=je[0]:Re=[fe/se,Ee/se],this._map.layerPointToLatLng(Re)},_convertLatLngs:function(q){var pt=vi.prototype._convertLatLngs.call(this,q),Et=pt.length;return Et>=2&&pt[0]instanceof ut&&pt[0].equals(pt[Et-1])&&pt.pop(),pt},_setLatLngs:function(q){vi.prototype._setLatLngs.call(this,q),fi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var q=this._renderer._bounds,pt=this.options.weight,Et=new $(pt,pt);if(q=new Q(q.min.subtract(Et),q.max.add(Et)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(q))){if(this.options.noClip){this._parts=this._rings;return}for(var Ht=0,Xt=this._rings.length,se;Ht<Xt;Ht++)se=nr(this._rings[Ht],q,!![]),se.length&&this._parts.push(se)}},_updatePath:function(){this._renderer._updatePoly(this,!![])},_containsPoint:function(q){var pt=![],Et,Ht,Xt,se,fe,Ee,Re,je;if(!this._pxBounds||!this._pxBounds.contains(q))return![];for(se=0,Re=this._parts.length;se<Re;se++)for(Et=this._parts[se],fe=0,je=Et.length,Ee=je-1;fe<je;Ee=fe++)Ht=Et[fe],Xt=Et[Ee],Ht.y>q.y!=Xt.y>q.y&&q.x<(Xt.x-Ht.x)*(q.y-Ht.y)/(Xt.y-Ht.y)+Ht.x&&(pt=!pt);return pt||vi.prototype._containsPoint.call(this,q,!![])}});function Nr(tt,q){return new ji(tt,q)}var sr=Ii.extend({initialize:function(q,pt){y(this,pt),this._layers={},q&&this.addData(q)},addData:function(q){var pt=R(q)?q:q.features,Et,Ht,Xt;if(pt){for(Et=0,Ht=pt.length;Et<Ht;Et++)Xt=pt[Et],(Xt.geometries||Xt.geometry||Xt.features||Xt.coordinates)&&this.addData(Xt);return this}var se=this.options;if((0,m.default)(se)&&!(0,m.default)(se).call(se,q))return this;var fe=lr(q,se);return fe?(fe.feature=$i(q),fe.defaultOptions=fe.options,this.resetStyle(fe),se.onEachFeature&&se.onEachFeature(q,fe),this.addLayer(fe)):this},resetStyle:function(q){return q.options=l({},q.defaultOptions),this._setLayerStyle(q,this.options.style),this},setStyle:function(q){return this.eachLayer(function(pt){this._setLayerStyle(pt,q)},this)},_setLayerStyle:function(q,pt){typeof pt=="function"&&(pt=pt(q.feature)),q.setStyle&&q.setStyle(pt)}});z.GeoJSON=sr;function lr(tt,q){var pt=tt.type==="Feature"?tt.geometry:tt,Et=pt?pt.coordinates:null,Ht=[],Xt=q&&q.pointToLayer,se=q&&q.coordsToLatLng||ur,fe,Ee,Re,je;if(!Et&&!pt)return null;switch(pt.type){case"Point":return fe=se(Et),Xt?Xt(tt,fe):new Oi(fe);case"MultiPoint":for(Re=0,je=Et.length;Re<je;Re++)fe=se(Et[Re]),Ht.push(Xt?Xt(tt,fe):new Oi(fe));return new Ii(Ht);case"LineString":case"MultiLineString":return Ee=Zi(Et,pt.type==="LineString"?0:1,se),new vi(Ee,q);case"Polygon":case"MultiPolygon":return Ee=Zi(Et,pt.type==="Polygon"?1:2,se),new ji(Ee,q);case"GeometryCollection":for(Re=0,je=pt.geometries.length;Re<je;Re++){var Je=lr({geometry:pt.geometries[Re],type:"Feature",properties:tt.properties},q);Je&&Ht.push(Je)}return new Ii(Ht);default:throw new Error("Invalid GeoJSON object.")}}function ur(tt){return new ut(tt[1],tt[0],tt[2])}function Zi(tt,q,pt){for(var Et=[],Ht=0,Xt=tt.length,se;Ht<Xt;Ht++)se=q?Zi(tt[Ht],q-1,pt):(pt||ur)(tt[Ht]),Et.push(se);return Et}function hr(tt,q){return q=typeof q=="number"?q:6,tt.alt!==void 0?[u(tt.lng,q),u(tt.lat,q),u(tt.alt,q)]:[u(tt.lng,q),u(tt.lat,q)]}function Yi(tt,q,pt,Et){for(var Ht=[],Xt=0,se=tt.length;Xt<se;Xt++)Ht.push(q?Yi(tt[Xt],q-1,pt,Et):hr(tt[Xt],Et));return!q&&pt&&Ht.push(Ht[0]),Ht}function bi(tt,q){return tt.feature?l({},tt.feature,{geometry:q}):$i(q)}function $i(tt){return tt.type==="Feature"||tt.type==="FeatureCollection"?tt:{type:"Feature",properties:{},geometry:tt}}var Xi={toGeoJSON:function(q){return bi(this,{type:"Point",coordinates:hr(this.getLatLng(),q)})}};Oi.include(Xi),or.include(Xi),Wi.include(Xi),vi.include({toGeoJSON:function(q){var pt=!fi(this._latlngs),Et=Yi(this._latlngs,pt?1:0,![],q);return bi(this,{type:(pt?"Multi":"")+"LineString",coordinates:Et})}}),ji.include({toGeoJSON:function(q){var pt=!fi(this._latlngs),Et=pt&&!fi(this._latlngs[0]),Ht=Yi(this._latlngs,Et?2:pt?1:0,!![],q);return!pt&&(Ht=[Ht]),bi(this,{type:(Et?"Multi":"")+"Polygon",coordinates:Ht})}}),Ti.include({toMultiPoint:function(q){var pt=[];return this.eachLayer(function(Et){pt.push(Et.toGeoJSON(q).geometry.coordinates)}),bi(this,{type:"MultiPoint",coordinates:pt})},toGeoJSON:function(q){var pt=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(pt==="MultiPoint")return this.toMultiPoint(q);var Et=pt==="GeometryCollection",Ht=[];return this.eachLayer(function(Xt){if(Xt.toGeoJSON){var se=Xt.toGeoJSON(q);if(Et)Ht.push(se.geometry);else{var fe=$i(se);fe.type==="FeatureCollection"?Ht.push.apply(Ht,fe.features):Ht.push(fe)}}}),Et?bi(this,{geometries:Ht,type:"GeometryCollection"}):{type:"FeatureCollection",features:Ht}}});function cr(tt,q){return new sr(tt,q)}var Mr=cr;z.geoJson=Mr,Object.freeze=h;var Mi=window.L;z.L=Mi},375211:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.MapVLayer=void 0;var L=b(e(828866)),T=b(e(122777)),C=b(e(42762)),f=o(e(187647)),v=e(548795);function m(l){if(typeof O!="function")return null;var r=new O,s=new O;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||F(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&M;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?M(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var h=function(){function l(r,s,c,x){(0,T.default)(this,l),this.map=r,this.scene=r.scene,this.mapvBaseLayer=new v.MapVRenderer(r,s,c,this),this.mapVOptions=c,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),x!=null?(this.container=x,x.appendChild(this.canvas)):(this.container=r.container,this.addInnerContainer()),this.bindEvent(),this._reset()}return(0,C.default)(l,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addInnerContainer",value:function(){this.container.appendChild(this.canvas)}},{key:"bindEvent",value:function(){var s=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.scene.camera.moveStart.addEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd,this);var c=new f.ScreenSpaceEventHandler(this.canvas);c.setInputAction(function(x){s.innerMoveEnd()},f.ScreenSpaceEventType.LEFT_UP),c.setInputAction(function(x){s.innerMoveEnd()},f.ScreenSpaceEventType.MIDDLE_UP),this.handler=c}},{key:"unbindEvent",value:function(){this.scene.camera.moveStart.removeEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd,this),this.scene.postRender.removeEventListener(this._reset,this),this.handler&&(this.handler.destroy(),this.handler=null)}},{key:"moveStartEvent",value:function(){this.mapvBaseLayer&&this.mapvBaseLayer.animatorMovestartEvent(),this.scene.postRender.addEventListener(this._reset,this),E.log("mapv moveStartEvent")}},{key:"moveEndEvent",value:function(){this.scene.postRender.removeEventListener(this._reset,this),this.mapvBaseLayer&&this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),E.log("mapv moveEndEvent")}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"addData",value:function(s,c){this.mapvBaseLayer!=null&&this.mapvBaseLayer.addData(s,c)}},{key:"updateData",value:function(s,c){this.mapvBaseLayer!=null&&this.mapvBaseLayer.updateData(s,c)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(s){this.mapvBaseLayer!=null&&this.mapvBaseLayer&&this.mapvBaseLayer.removeData(s)}},{key:"removeAllData",value:function(){this.mapvBaseLayer!=null&&this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block"}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none"}},{key:"_createCanvas",value:function(){var s=document.createElement("canvas");s.id=this.mapVOptions.layerid||"mapv"+divId++,s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.pointerEvents="none",s.style.zIndex=this.mapVOptions.zIndex||100,s.width=parseInt((0,L.default)(this).canvas.width),s.height=parseInt((0,L.default)(this).canvas.height),s.style.width=(0,L.default)(this).canvas.style.width,s.style.height=(0,L.default)(this).canvas.style.height;var c=this.devicePixelRatio;return this.mapVOptions.context=="2d"&&s.getContext(this.mapVOptions.context).scale(c,c),s}},{key:"_reset",value:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()}},{key:"draw",value:function(){this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"destroy",value:function(){this.unbindEvent(),this.remove()}},{key:"remove",value:function(){this.mapvBaseLayer!=null&&(this.removeAllData(),this.mapvBaseLayer.destroy(),this.mapvBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas))}},{key:"update",value:function(s){s!=null&&this.updateData(s.data,s.options)}},{key:"resizeCanvas",value:function(){if(this.canvas!=null&&this.canvas!=null){var s=this.canvas;s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.width=parseInt((0,L.default)(this).canvas.width),s.height=parseInt((0,L.default)(this).canvas.height),s.style.width=(0,L.default)(this).canvas.style.width,s.style.height=(0,L.default)(this).canvas.style.height}}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"render",value:function(){this.mapvBaseLayer!=null&&this.mapvBaseLayer._canvasUpdate()}}]),l}();z.MapVLayer=h},548795:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.MapVRenderer=void 0;var b=M(e(42762)),L=M(e(122777)),T=f(e(187647));function C(o){if(typeof F!="function")return null;var h=new F,l=new F;return(C=function(s){return s?l:h})(o)}function f(o,h){if(!h&&o&&o.__esModule)return o;if(o===null||E(o)!=="object"&&typeof o!="function")return{default:o};var l=C(h);if(l&&l.has(o))return l.get(o);var r={},s=Object.defineProperty&&O;for(var c in o)if(c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)){var x=s?O(o,c):null;x&&(x.get||x.set)?Object.defineProperty(r,c,x):r[c]=o[c]}return r.default=o,l&&l.set(o,r),r}var v=T.Math.toRadians(80),m=(0,b.default)(function o(){(0,L.default)(this,o)});z.MapVRenderer=m},88589:function(X,z,e){"use strict";var E=e(149500),F=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var O=F(e(669033)),M=F(e(705146)),b=F(e(636583)),L=F(e(342579)),T=F(e(122777)),C=F(e(42762)),f=e(407165),v=F(e(627482)),m=e(266342),o=function(){function l(r,s){(0,T.default)(this,l),this.map=r,this.view=r.getView(),this.scene=s,this.olLayers=r.getLayerGroup().getLayers(),this.mapLayerGroup=r.getLayerGroup(),this.layerMap={},this.olLayerListenKeys={},this.olGroupListenKeys_={}}return(0,C.default)(l,[{key:"synchronize",value:function(){this.destroyAll(),this.addLayers_(this.mapLayerGroup)}},{key:"orderLayers",value:function(){}},{key:"addLayers_",value:function(s){for(var c=this,x=[{layer:s,parents:[]}],a=function(){var n=this,u=(0,O.default)(x).call(x,0,1)[0],g=u.layer,d,y=(0,m.getUid)(g).toString();c.olLayerListenKeys[y]=[],E.assert(!c.layerMap[y]);var p=null;if(g instanceof v.default)c.listenForGroupChanges_(g),g!==c.mapLayerGroup&&(p=c.createSingleLayerCounterparts(u)),!p&&g.getLayers().forEach(function(B){if((0,L.default)(this,n),B){var k,P={layer:B,parents:g===c.mapLayerGroup?[]:(0,M.default)(k=[u.layer]).call(k,u.parents)};x.push(P)}}.bind(this));else if(u.layer.values_.id=="xzqNavigateLayer"&&(p=c.createSingleLayerCounterparts(u),d=u.layer.values_.info,!p)){var w=y,S=u,R=function(k){(0,L.default)(this,n);var P=c.createSingleLayerCounterparts(S);P&&(S.layer.un("change",R),d&&d.hasOwnProperty("isBaseMapLayer")&&d.isBaseMapLayer==1?E.log("\u56FE\u5C42\u6765\u81EAbaseMap"):c.addCesiumObjects_(P,w,S.layer),c.orderLayers())}.bind(this);c.olLayerListenKeys[y].push((0,m.olcsListen)(S.layer,"change",R))}p&&(d&&d.hasOwnProperty("isBaseMapLayer")&&d.isBaseMapLayer==1?E.log("\u56FE\u5C42\u6765\u81EAbaseMap"):c.addCesiumObjects_(p,y,g))};x.length>0;)a();this.orderLayers()}},{key:"addCesiumObjects_",value:function(s,c,x){var a=this;this.layerMap[c]=s,this.olLayerListenKeys[c].push((0,m.olcsListen)(x,"change:zIndex",function(){return(0,L.default)(this,a),this.orderLayers()}.bind(this))),s.forEach(function(i){(0,L.default)(this,a),this.addCesiumObject(i)}.bind(this))}},{key:"removeAndDestroySingleLayer_",value:function(s){var c=this,x=(0,m.getUid)(s).toString(),a=this.layerMap[x];return a&&(a.forEach(function(i){(0,L.default)(this,c),this.removeSingleCesiumObject(i,![]),this.destroyCesiumObject(i)}.bind(this)),this.olLayerListenKeys[x].forEach(f.unByKey),delete this.olLayerListenKeys[x]),delete this.layerMap[x],!!a}},{key:"unlistenSingleGroup_",value:function(s){var c=this;if(s!==this.mapLayerGroup){var x=(0,m.getUid)(s).toString(),a=this.olGroupListenKeys_[x];a.forEach(function(i){(0,L.default)(this,c),(0,f.unByKey)(i)}.bind(this)),delete this.olGroupListenKeys_[x],delete this.layerMap[x]}}},{key:"removeLayer_",value:function(s){var c=this;if(s)for(var x=[s];x.length>0;){var a=(0,O.default)(x).call(x,0,1)[0],i=this.removeAndDestroySingleLayer_(a);a instanceof v.default&&(this.unlistenSingleGroup_(a),!i&&a.getLayers().forEach(function(n){(0,L.default)(this,c),x.push(n)}.bind(this)))}}},{key:"listenForGroupChanges_",value:function(s){var c=this,x=(0,m.getUid)(s).toString();E.assert(this.olGroupListenKeys_[x]===void 0);var a=[];this.olGroupListenKeys_[x]=a;var i=[],n=function(){var u=this,g=s.getLayers();g&&(i=[g.on("add",function(d){(0,L.default)(this,u),d.element.values_.hasOwnProperty("info")?(!d.element.values_.info.hasOwnProperty("isBaseMapLayer")||!d.element.values_.info.isBaseMapLayer)&&this.addLayers_(d.element):this.addLayers_(d.element)}.bind(this)),g.on("remove",function(d){(0,L.default)(this,u),this.removeLayer_(d.element)}.bind(this))],a.push.apply(a,(0,b.default)(i)))}.bind(this);n(),a.push(s.on("change:layers",function(u){var g=this;(0,L.default)(this,c),i.forEach(function(d){(0,L.default)(this,g);var y=a.indexOf(d);y>=0&&(0,O.default)(a).call(a,y,1),(0,f.unByKey)(d)}.bind(this)),n()}.bind(this)))}},{key:"destroyAll",value:function(){this.removeAllCesiumObjects(!![]);var s;for(s in this.olGroupListenKeys_){var c=this.olGroupListenKeys_[s];c.forEach(f.unByKey)}for(s in this.olLayerListenKeys)this.olLayerListenKeys[s].forEach(f.unByKey);this.olGroupListenKeys_={},this.olLayerListenKeys={},this.layerMap={}}},{key:"addCesiumObject",value:function(s){}},{key:"destroyCesiumObject",value:function(s){}},{key:"removeSingleCesiumObject",value:function(s,c){}},{key:"removeAllCesiumObjects",value:function(s){}},{key:"createSingleLayerCounterparts",value:function(s){}}]),l}(),h=o;z.default=h},878280:function(X,z,e){"use strict";var E=e(520314),F=e(426352),O=e(230551),M=e(43586),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var L=b(e(122777)),T=b(e(42762));function C(h,l){var r=typeof O<"u"&&M(h)||h["@@iterator"];if(!r){if(Array.isArray(h)||(r=f(h))||l&&h&&typeof h.length=="number"){r&&(h=r);var s=0,c=function(){};return{s:c,n:function(){return s>=h.length?{done:!![]}:{done:![],value:h[s++]}},e:function(u){throw u},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x=!![],a=![],i;return{s:function(){r=r.call(h)},n:function(){var u=r.next();return x=u.done,u},e:function(u){a=!![],i=u},f:function(){try{!x&&r.return!=null&&r.return()}finally{if(a)throw i}}}}function f(h,l){var r;if(h){if(typeof h=="string")return v(h,l);var s=E(r=Object.prototype.toString.call(h)).call(r,8,-1);if(s==="Object"&&h.constructor&&(s=h.constructor.name),s==="Map"||s==="Set")return F(h);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return v(h,l)}}function v(h,l){(l==null||l>h.length)&&(l=h.length);for(var r=0,s=new Array(l);r<l;r++)s[r]=h[r];return s}var m=function(){function h(l){(0,L.default)(this,h),this.ol3d=l,this.scene_=l.getCesiumScene(),this.canvas_=this.scene_.canvas,this._boundNotifyRepaintRequired=this.notifyRepaintRequired.bind(this),this.repaintEventNames_=["mousemove","mousedown","mouseup","touchstart","touchend","touchmove","pointerdown","pointerup","pointermove","wheel"],this.enable()}return(0,T.default)(h,[{key:"enable",value:function(){this.scene_.requestRenderMode=!![],this.scene_.maximumRenderTimeChange=1e3;var r=C(this.repaintEventNames_),s;try{for(r.s();!(s=r.n()).done;){var c=s.value;this.canvas_.addEventListener(c,this._boundNotifyRepaintRequired,![])}}catch(x){r.e(x)}finally{r.f()}window.addEventListener("resize",this._boundNotifyRepaintRequired,![]),this.ol3d.getOlMap().getLayerGroup().on("change",this._boundNotifyRepaintRequired)}},{key:"disable",value:function(){var r=C(this.repaintEventNames_),s;try{for(r.s();!(s=r.n()).done;){var c=s.value;this.canvas_.removeEventListener(c,this._boundNotifyRepaintRequired,![])}}catch(x){r.e(x)}finally{r.f()}window.removeEventListener("resize",this._boundNotifyRepaintRequired,![]),this.ol3d.getOlMap().getLayerGroup().un("change",this._boundNotifyRepaintRequired),this.scene_.requestRenderMode=![]}},{key:"restartRenderLoop",value:function(){this.notifyRepaintRequired()}},{key:"notifyRepaintRequired",value:function(){this.scene_.requestRender()}}]),h}(),o=m;z.default=o},971175:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var L=b(e(342579)),T=b(e(122777)),C=b(e(42762)),f=r(e(187647)),v=e(407165),m=e(523030),o=e(972233),h=r(e(405015));function l(x){if(typeof O!="function")return null;var a=new O,i=new O;return(l=function(u){return u?i:a})(x)}function r(x,a){if(!a&&x&&x.__esModule)return x;if(x===null||F(x)!=="object"&&typeof x!="function")return{default:x};var i=l(a);if(i&&i.has(x))return i.get(x);var n={},u=Object.defineProperty&&M;for(var g in x)if(g!=="default"&&Object.prototype.hasOwnProperty.call(x,g)){var d=u?M(x,g):null;d&&(d.get||d.set)?Object.defineProperty(n,g,d):n[g]=x[g]}return n.default=x,i&&i.set(x,n),n}var s=function(){function x(a,i){var n=this;(0,T.default)(this,x),this.scene_=a,this.cam_=a.camera,this.map_=i,this.view_=null,this.viewListenKey_=null,this.toLonLat_=x.identityProjection,this.fromLonLat_=x.identityProjection,this.tilt_=0,this.distance_=0,this.lastCameraViewMatrix_=null,this.viewUpdateInProgress_=![],this.map_.on("change:view",function(u){(0,L.default)(this,n),this.setView_(this.map_.getView())}.bind(this)),this.setView_(this.map_.getView())}return(0,C.default)(x,[{key:"setView_",value:function(i){var n=this;if(this.view_&&((0,v.unByKey)(this.viewListenKey_),this.viewListenKey_=null),this.view_=i,i){var u=(0,o.getTransform)(i.getProjection(),"EPSG:4326"),g=(0,o.getTransform)("EPSG:4326",i.getProjection());E.assert(u&&g),this.toLonLat_=u,this.fromLonLat_=g,this.viewListenKey_=i.on("propertychange",function(d){return(0,L.default)(this,n),this.handleViewEvent_(d)}.bind(this)),this.readFromView()}else this.toLonLat_=x.identityProjection,this.fromLonLat_=x.identityProjection}},{key:"handleViewEvent_",value:function(i){!this.viewUpdateInProgress_&&this.readFromView()}},{key:"setHeading",value:function(i){this.view_&&this.view_.setRotation(i)}},{key:"getHeading",value:function(){if(this.view_){var i=this.view_.getRotation();return i||0}}},{key:"setTilt",value:function(i){this.tilt_=i,this.updateCamera_()}},{key:"getTilt",value:function(){return this.tilt_}},{key:"setDistance",value:function(i){this.distance_=i,this.updateCamera_(),this.updateView()}},{key:"getDistance",value:function(){return this.distance_}},{key:"setCenter",value:function(i){this.view_&&this.view_.setCenter(i)}},{key:"getCenter",value:function(){if(this.view_)return this.view_.getCenter()}},{key:"setPosition",value:function(i){if(this.toLonLat_){var n=this.toLonLat_(i);E.assert(n);var u=new f.Cartographic((0,m.toRadians)(n[0]),(0,m.toRadians)(n[1]),this.getAltitude());this.cam_.setView({destination:f.Ellipsoid.WGS84.cartographicToCartesian(u)}),this.updateView()}}},{key:"getPosition",value:function(){if(this.fromLonLat_){var i=f.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position),n=this.fromLonLat_([(0,m.toDegrees)(i.longitude),(0,m.toDegrees)(i.latitude)]);return E.assert(n),n}}},{key:"setAltitude",value:function(i){var n=f.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);n.height=i,this.cam_.position=f.Ellipsoid.WGS84.cartographicToCartesian(n),this.updateView()}},{key:"getAltitude",value:function(){var i=f.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);return i.height}},{key:"updateCamera_",value:function(){if(!(!this.view_||!this.toLonLat_)){var i=this.view_.getCenter();if(!(!i||!i[0])){var n=this.toLonLat_(i);E.assert(n);var u=new f.Cartographic((0,m.toRadians)(n[0]),(0,m.toRadians)(n[1]));if(this.scene_.globe){var g=this.scene_.globe.getHeight(u);u.height=g||0}var d=f.Ellipsoid.WGS84.cartographicToCartesian(u),y,p=this.tilt_-f.Math.PI_OVER_TWO;p-f.Math.toRadians(-90)==0||(p=f.Math.toRadians(-90)),y=p+f.Math.toRadians(45);var w={pitch:this.tilt_-f.Math.PI_OVER_TWO,heading:-this.view_.getRotation(),roll:void 0};this.cam_.setView({destination:d,orientation:w}),this.cam_.moveBackward(this.distance_),this.checkCameraChange(!![])}}}},{key:"readFromView",value:function(){if(!(!this.view_||!this.toLonLat_)){var i=this.view_.getCenter();if(i!=null){var n=this.toLonLat_(i);E.assert(n);var u=this.view_.getResolution();this.distance_=this.calcDistanceForResolution(u||0,(0,m.toRadians)(n[1])),this.updateCamera_()}}}},{key:"updateView",value:function(){if(!(!this.view_||!this.fromLonLat_)){this.viewUpdateInProgress_=!![];var i=f.Ellipsoid.WGS84,n=this.scene_,u=h.default.pickCenterPoint(n),g=u;if(!g){var d=n.globe,y=this.cam_.positionCartographic.clone(),p=d.getHeight(y);y.height=p||0,g=f.Ellipsoid.WGS84.cartographicToCartesian(y)}this.distance_=f.Cartesian3.distance(g,this.cam_.position);var w=i.cartesianToCartographic(g);if(this.view_.setCenter(this.fromLonLat_([(0,m.toDegrees)(w.longitude),(0,m.toDegrees)(w.latitude)])),this.view_.setResolution(this.calcResolutionForDistance(this.distance_,w?w.latitude:0)),u){var S=this.cam_.position,R=new f.Cartesian3;i.geocentricSurfaceNormal(u,R);var B=new f.Cartesian3;f.Cartesian3.subtract(S,u,B),f.Cartesian3.normalize(B,B);var k=this.cam_.up,P=this.cam_.right,D=new f.Cartesian3(-u.y,u.x,0),A=f.Cartesian3.angleBetween(P,D),N=f.Cartesian3.cross(u,k,new f.Cartesian3),I=N.z;this.view_.setRotation(I<0?A:-A);var G=Math.acos(f.Cartesian3.dot(R,B));this.tilt_=isNaN(G)?0:G}else this.view_.setRotation(this.cam_.heading),this.tilt_=-this.cam_.pitch+Math.PI/2;this.viewUpdateInProgress_=![]}}},{key:"checkCameraChange",value:function(i){var n=this.lastCameraViewMatrix_,u=this.cam_.viewMatrix;(!n||!f.Matrix4.equalsEpsilon(n,u,1e-5))&&(this.lastCameraViewMatrix_=u.clone(),i!==!![]&&this.updateView())}},{key:"calcDistanceForResolution",value:function(i,n){return(0,h.calcDistanceForResolution)(i,n,this.scene_,this.view_.getProjection())}},{key:"calcResolutionForDistance",value:function(i,n){return(0,h.calcResolutionForDistance)(i,n,this.scene_,this.view_.getProjection())}}],[{key:"identityProjection",value:function(i,n,u){var g=u||i.length;if(n)for(var d=0;d<g;++d)n[d]=i[d];return i}}]),x}(),c=s;z.default=c},172013:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(520314),M=e(426352),b=e(230551),L=e(43586),T=e(787879),C=e(183393),f=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var v=f(e(520314)),m=f(e(869257)),o=f(e(342579)),h=f(e(122777)),l=f(e(42762)),r=w(e(187647)),s=f(e(561128)),c=f(e(137107)),x=f(e(692405)),a=f(e(187653)),i=e(54896),n=e(692086),u=f(e(301304)),g=f(e(405015)),d=f(e(473635)),y=w(e(266342));function p(D){if(typeof T!="function")return null;var A=new T,N=new T;return(p=function(G){return G?N:A})(D)}function w(D,A){if(!A&&D&&D.__esModule)return D;if(D===null||F(D)!=="object"&&typeof D!="function")return{default:D};var N=p(A);if(N&&N.has(D))return N.get(D);var I={},G=Object.defineProperty&&C;for(var W in D)if(W!=="default"&&Object.prototype.hasOwnProperty.call(D,W)){var Z=G?C(D,W):null;Z&&(Z.get||Z.set)?Object.defineProperty(I,W,Z):I[W]=D[W]}return I.default=D,N&&N.set(D,I),I}function S(D,A){var N=typeof b<"u"&&L(D)||D["@@iterator"];if(!N){if(Array.isArray(D)||(N=R(D))||A&&D&&typeof D.length=="number"){N&&(D=N);var I=0,G=function(){};return{s:G,n:function(){return I>=D.length?{done:!![]}:{done:![],value:D[I++]}},e:function(V){throw V},f:G}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!![],Z=![],H;return{s:function(){N=N.call(D)},n:function(){var V=N.next();return W=V.done,V},e:function(V){Z=!![],H=V},f:function(){try{!W&&N.return!=null&&N.return()}finally{if(Z)throw H}}}}function R(D,A){var N;if(D){if(typeof D=="string")return B(D,A);var I=O(N=Object.prototype.toString.call(D)).call(N,8,-1);if(I==="Object"&&D.constructor&&(I=D.constructor.name),I==="Map"||I==="Set")return M(D);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return B(D,A)}}function B(D,A){(A==null||A>D.length)&&(A=D.length);for(var N=0,I=new Array(A);N<A;N++)I[N]=D[N];return I}var k=function(){function D(A){(0,h.default)(this,D),this.scene=A,this.boundOnRemoveOrClearFeatureListener_=this.onRemoveOrClearFeature_.bind(this),this.defaultBillboardEyeOffset_=new r.Cartesian3(0,0,10)}return(0,l.default)(D,[{key:"onRemoveOrClearFeature_",value:function(N){var I=N.target;E.assert(I instanceof x.default);var G=y.default.obj(I).olcs_cancellers;if(G){var W=N.feature;if(W){var Z=(0,y.getUid)(W),H=G[Z];H&&(H(),delete G[Z])}else{for(var U in G)G.hasOwnProperty(U)&&G[U]();y.default.obj(I).olcs_cancellers={}}}}},{key:"setReferenceForPicking",value:function(N,I,G){G.olLayer=N,G.olFeature=I}},{key:"createColoredPrimitive",value:function(N,I,G,W,Z,H){var U=function(nt,st){var ut=new r.GeometryInstance({geometry:nt});return st&&!(st instanceof r.ImageMaterialProperty)&&(ut.attributes={color:r.ColorGeometryInstanceAttribute.fromColor(st)}),ut},V={flat:!![],renderState:{depthTest:{enabled:!![]}}};H!==void 0&&(!V.renderState&&(V.renderState={}),V.renderState.lineWidth=Math.min(H,this.scene.maximumAliasedLineWidth));var Y=U(W,Z),$=this.getHeightReference(N,I,G),K;if($===r.HeightReference.CLAMP_TO_GROUND){var J=Y.geometry.constructor;if(J&&!J.createShadowVolume)return null;K=new r.GroundPrimitive({geometryInstances:Y})}else K=new r.Primitive({geometryInstances:Y});if(Z instanceof r.ImageMaterialProperty){var Q=Z.image.getValue().toDataURL();K.appearance=new r.MaterialAppearance({flat:!![],renderState:{depthTest:{enabled:!![]}},material:new r.Material({fabric:{type:"Image",uniforms:{image:Q}}})})}else K.appearance=new r.PerInstanceColorAppearance(V);return this.setReferenceForPicking(N,I,K),K}},{key:"extractColorFromOlStyle",value:function(N,I){var G=N.getFill()?N.getFill().getColor():null,W=N.getStroke()?N.getStroke().getColor():null,Z="black";return W&&I?Z=W:G&&(Z=G),g.default.convertColorToCesium(Z)}},{key:"extractLineWidthFromOlStyle",value:function(N){var I=N.getStroke()?N.getStroke().getWidth():void 0;return I!==void 0?I:1}},{key:"wrapFillAndOutlineGeometries",value:function(N,I,G,W,Z,H){var U=this.extractColorFromOlStyle(H,![]),V=this.extractColorFromOlStyle(H,!![]),Y=new r.PrimitiveCollection;if(H.getFill()){var $=this.createColoredPrimitive(N,I,G,W,U);E.assert(!!$),Y.add($)}if(H.getStroke()&&Z){var K=this.extractLineWidthFromOlStyle(H),J=this.createColoredPrimitive(N,I,G,Z,V,K);J&&Y.add(J)}return Y}},{key:"addTextStyle",value:function(N,I,G,W,Z){var H;if(Z instanceof r.PrimitiveCollection?H=Z:(H=new r.PrimitiveCollection,H.add(Z)),!W.getText())return H;var U=W.getText(),V=this.olGeometry4326TextPartToCesium(N,I,G,U);return V&&H.add(V),H}},{key:"csAddBillboard",value:function(N,I,G,W,Z,H){!I.eyeOffset&&(I.eyeOffset=this.defaultBillboardEyeOffset_);var U=N.add(I);return this.setReferenceForPicking(G,W,U),U}},{key:"olCircleGeometryToCesium",value:function(N,I,G,W,Z){var H=this;G=g.default.olGeometryCloneTo4326(G,W),E.assert(G.getType()=="Circle");var U=G.getCenter(),V=U.length==3?U[2]:0,Y=(0,v.default)(U).call(U);Y[0]+=G.getRadius(),U=g.default.ol4326CoordinateToCesiumCartesian(U),Y=g.default.ol4326CoordinateToCesiumCartesian(Y);var $=r.Cartesian3.distance(U,Y),K=new r.CircleGeometry({center:U,radius:$,height:V}),J,Q;if(this.getHeightReference(N,I,G)===r.HeightReference.CLAMP_TO_GROUND){var et=this.extractLineWidthFromOlStyle(Z);if(et){var nt=(0,i.circular)(G.getCenter(),$),st=g.default.ol4326CoordinateArrayToCsCartesians(nt.getLinearRing(0).getCoordinates());if((0,y.isGroundPolylinePrimitiveSupported)(this.scene))J=new r.GroundPolylinePrimitive({geometryInstances:new r.GeometryInstance({geometry:new r.GroundPolylineGeometry({positions:st,width:et})}),appearance:new r.PolylineMaterialAppearance({material:this.olStyleToCesium(I,Z,!![])}),classificationType:r.ClassificationType.TERRAIN}),J.readyPromise.then(function(){(0,o.default)(this,H),this.setReferenceForPicking(N,I,J._primitive)}.bind(this));else{var ut=this.extractColorFromOlStyle(Z,!![]);J=this.createStackedGroundCorridors(N,I,et,ut,st)}}}else Q=new r.CircleOutlineGeometry({center:U,radius:$,extrudedHeight:V,height:V});var rt=this.wrapFillAndOutlineGeometries(N,I,G,K,Q,Z);return J&&rt.add(J),this.addTextStyle(N,I,G,Z,rt)}},{key:"createStackedGroundCorridors",value:function(N,I,G,W,Z){!Array.isArray(Z[0])&&(Z=[Z]),G=Math.max(3,G);for(var H=[],U=0,V=0,Y=[1e3,4e3,16e3,64e3,254e3,1e6,1e7];V<Y.length;V++){var $=Y[V];G*=2.14;var K={width:G,vertexFormat:r.VertexFormat.POSITION_ONLY},J=S(Z),Q;try{for(J.s();!(Q=J.n()).done;){var et=Q.value;K.positions=et,H.push(new r.GeometryInstance({geometry:new r.CorridorGeometry(K),attributes:{color:r.ColorGeometryInstanceAttribute.fromColor(W),distanceDisplayCondition:new r.DistanceDisplayConditionGeometryInstanceAttribute(U,$-1)}}))}}catch(nt){J.e(nt)}finally{J.f()}U=$}return new r.GroundPrimitive({geometryInstances:H})}},{key:"olLineStringGeometryToCesium",value:function(N,I,G,W,Z){var H=this;G=g.default.olGeometryCloneTo4326(G,W),E.assert(G.getType()=="LineString");var U=g.default.ol4326CoordinateArrayToCsCartesians(G.getCoordinates()),V=this.extractLineWidthFromOlStyle(Z),Y,$=this.getHeightReference(N,I,G);if($===r.HeightReference.CLAMP_TO_GROUND&&!(0,y.isGroundPolylinePrimitiveSupported)(this.scene)){var K=this.extractColorFromOlStyle(Z,!![]);Y=this.createStackedGroundCorridors(N,I,V,K,U)}else{var J=new r.PolylineMaterialAppearance({material:this.olStyleToCesium(I,Z,!![])}),Q={positions:U,width:V},et={appearance:J};if($===r.HeightReference.CLAMP_TO_GROUND){var nt=new r.GroundPolylineGeometry(Q);et.geometryInstances=new r.GeometryInstance({geometry:nt}),Y=new r.GroundPolylinePrimitive(et),Y.readyPromise.then(function(){(0,o.default)(this,H),this.setReferenceForPicking(N,I,Y._primitive)}.bind(this))}else{Q.vertexFormat=J.vertexFormat;var st=new r.PolylineGeometry(Q);et.geometryInstances=new r.GeometryInstance({geometry:st}),Y=new r.Primitive(et)}}return this.setReferenceForPicking(N,I,Y),this.addTextStyle(N,I,G,Z,Y)}},{key:"olPolygonGeometryToCesium",value:function(N,I,G,W,Z){var H=this;G=g.default.olGeometryCloneTo4326(G,W),E.assert(G.getType()=="Polygon");var U=this.getHeightReference(N,I,G),V,Y,$;if(G.getCoordinates()[0]&&G.getCoordinates()[0].length==5&&I.getGeometry().get("olcs.polygon_kind")==="rectangle"){var K=G.getCoordinates()[0],J=(0,n.boundingExtent)(K),Q=r.Rectangle.fromDegrees(J[0],J[1],J[2],J[3]),et=0;if(K[0].length==3)for(var nt=0;nt<K.length;nt++)et=Math.max(et,K[nt][2]);V=new r.RectangleGeometry({ellipsoid:r.Ellipsoid.WGS84,rectangle:Q,height:et}),Y=new r.RectangleOutlineGeometry({ellipsoid:r.Ellipsoid.WGS84,rectangle:Q,height:et})}else{var st=G.getLinearRings(),ut={},rt=ut;E.assert(st.length>0);for(var ht=0;ht<st.length;++ht){var Pt=st[ht].getCoordinates(),wt=g.default.ol4326CoordinateArrayToCsCartesians(Pt);E.assert(wt&&wt.length>0),ht==0?ut.positions=wt:(!ut.holes&&(ut.holes=[]),ut.holes.push({positions:wt}))}if(V=new r.PolygonGeometry({polygonHierarchy:rt,perPositionHeight:!![]}),U===r.HeightReference.CLAMP_TO_GROUND){var Mt=this.extractLineWidthFromOlStyle(Z);if(Mt>0){var Ft=[ut.positions];if(ut.holes)for(var Dt=0;Dt<ut.holes.length;++Dt)Ft.push(ut.holes[Dt].positions);if((0,y.isGroundPolylinePrimitiveSupported)(this.scene)){var Tt=new r.PolylineMaterialAppearance({material:this.olStyleToCesium(I,Z,!![])}),mt=[],Nt=S(Ft),ct;try{for(Nt.s();!(ct=Nt.n()).done;){var vt=ct.value,Lt=new r.GroundPolylineGeometry({positions:vt,width:Mt});mt.push(new r.GeometryInstance({geometry:Lt}))}}catch(zt){Nt.e(zt)}finally{Nt.f()}var Ct={appearance:Tt,geometryInstances:mt};$=new r.GroundPolylinePrimitive(Ct),$.readyPromise.then(function(){(0,o.default)(this,H),this.setReferenceForPicking(N,I,$._primitive)}.bind(this))}else{var Rt=this.extractColorFromOlStyle(Z,!![]);$=this.createStackedGroundCorridors(N,I,Mt,Rt,Ft)}}}else Y=new r.PolygonOutlineGeometry({polygonHierarchy:ut,perPositionHeight:!![]})}var jt=this.wrapFillAndOutlineGeometries(N,I,G,V,Y,Z);return $&&jt.add($),this.addTextStyle(N,I,G,Z,jt)}},{key:"getHeightReference",value:function(N,I,G){var W=G.get("altitudeMode");W===void 0&&(W=I.get("altitudeMode")),W===void 0&&(W=N.get("altitudeMode"));var Z=r.HeightReference.CLAMP_TO_GROUND;return W==="clampToGround"?Z=r.HeightReference.CLAMP_TO_GROUND:W==="relativeToGround"&&(Z=r.HeightReference.RELATIVE_TO_GROUND),Z}},{key:"createBillboardFromImage",value:function(N,I,G,W,Z,H,U,V){H instanceof c.default&&H.load();var Y=H.getImage(1),$=function(ht){return ht.src!=""&&ht.naturalHeight!=0&&ht.naturalWidth!=0&&ht.complete},K=function(){if(Y&&(Y instanceof HTMLCanvasElement||Y instanceof Image||Y instanceof HTMLImageElement)){var rt=G.getCoordinates(),ht=g.default.ol4326CoordinateToCesiumCartesian(rt),Pt,wt=H.getOpacity();wt!==void 0&&(Pt=new r.Color(1,1,1,wt));var Mt=H.getScale(),Ft=this.getHeightReference(N,I,G),Dt={image:Y,color:Pt,scale:Mt,heightReference:Ft,position:ht};if((0,m.default)(Dt,I.get("cesiumOptions")),H instanceof c.default){var Rt=H.getAnchor();Rt&&(Dt.pixelOffset=new r.Cartesian2((Y.width/2-Rt[0])*Mt,(Y.height/2-Rt[1])*Mt))}var Tt=this.csAddBillboard(U,Dt,N,I,G,Z);V&&V(Tt)}}.bind(this);if(Y instanceof Image&&!$(Y)){var J=![],Q=N.getSource(),et=function(){J=!![]};Q.on(["removefeature","clear"],this.boundOnRemoveOrClearFeatureListener_);var nt=y.default.obj(Q).olcs_cancellers;!nt&&(nt=y.default.obj(Q).olcs_cancellers={});var st=(0,y.getUid)(I);nt[st]&&nt[st](),nt[st]=et;var ut=function rt(){Y.removeEventListener("load",rt),!U.isDestroyed()&&!J&&K()};Y.addEventListener("load",ut)}else K()}},{key:"olPointGeometryToCesium",value:function(N,I,G,W,Z,H,U){E.assert(G.getType()=="Point"),G=g.default.olGeometryCloneTo4326(G,W);var V=null,Y=Z.getImage();if(Y){var $=G.get("olcs_model")||I.get("olcs_model");if($){var K=$(),J=(0,m.default)({},{scene:this.scene},K.cesiumOptions),Q=r.Model.fromGltf(J);V=new r.PrimitiveCollection,V.add(Q),K.debugModelMatrix&&V.add(new r.DebugModelMatrixPrimitive({modelMatrix:K.debugModelMatrix}))}else this.createBillboardFromImage(N,I,G,W,Z,Y,H,U)}return Z.getText()?this.addTextStyle(N,I,G,Z,V||new r.Primitive):V}},{key:"olMultiGeometryToCesium",value:function(N,I,G,W,Z,H,U){var V=this,Y=function(Q,et){var nt=this,st=new r.PrimitiveCollection;return Q.forEach(function(ut){(0,o.default)(this,nt),st.add(et(N,I,ut,W,Z))}.bind(this)),st},$;switch(G.getType()){case"MultiPoint":if(G=G,$=G.getPoints(),Z.getText()){var K=new r.PrimitiveCollection;return $.forEach(function(J){(0,o.default)(this,V),E.assert(J);var Q=this.olPointGeometryToCesium(N,I,J,W,Z,H,U);Q&&K.add(Q)}.bind(this)),K}else return $.forEach(function(J){(0,o.default)(this,V),E.assert(J),this.olPointGeometryToCesium(N,I,J,W,Z,H,U)}.bind(this)),null;case"MultiLineString":return G=G,$=G.getLineStrings(),Y($,this.olLineStringGeometryToCesium.bind(this));case"MultiPolygon":return G=G,$=G.getPolygons(),Y($,this.olPolygonGeometryToCesium.bind(this));default:E.assert(![],"Unhandled multi geometry type".concat(G.getType()))}}},{key:"olGeometry4326TextPartToCesium",value:function(N,I,G,W){var Z=W.getText();if(!Z)return null;var H=new r.LabelCollection({scene:this.scene}),U=(0,n.getCenter)(G.getExtent());if(G instanceof u.default){var V=G.getFirstCoordinate();U[2]=V.length==3?V[2]:0}var Y={};Y.position=g.default.ol4326CoordinateToCesiumCartesian(U),Y.text=Z,Y.heightReference=this.getHeightReference(N,I,G);var $=W.getOffsetX(),K=W.getOffsetY();if($!=0&&K!=0){var J=new r.Cartesian2($,K);Y.pixelOffset=J}Y.font=W.getFont()||"10px sans-serif";var Q=void 0;W.getFill()&&(Y.fillColor=this.extractColorFromOlStyle(W,![]),Q=r.LabelStyle.FILL),W.getStroke()&&(Y.outlineWidth=this.extractLineWidthFromOlStyle(W),Y.outlineColor=this.extractColorFromOlStyle(W,!![]),Q=r.LabelStyle.OUTLINE),W.getFill()&&W.getStroke()&&(Q=r.LabelStyle.FILL_AND_OUTLINE),Y.style=Q;var et;switch(W.getTextAlign()){case"left":et=r.HorizontalOrigin.LEFT;break;case"right":et=r.HorizontalOrigin.RIGHT;break;case"center":default:et=r.HorizontalOrigin.CENTER}if(Y.horizontalOrigin=et,W.getTextBaseline()){var nt;switch(W.getTextBaseline()){case"top":nt=r.VerticalOrigin.TOP;break;case"middle":nt=r.VerticalOrigin.CENTER;break;case"bottom":nt=r.VerticalOrigin.BOTTOM;break;case"alphabetic":nt=r.VerticalOrigin.TOP;break;case"hanging":nt=r.VerticalOrigin.BOTTOM;break;default:E.assert(![],"unhandled baseline ".concat(W.getTextBaseline()))}Y.verticalOrigin=nt}var st=H.add(Y);return this.setReferenceForPicking(N,I,st),H}},{key:"olStyleToCesium",value:function(N,I,G){var W=I.getFill(),Z=I.getStroke();if(G&&!Z||!G&&!W)return null;var H=G?Z.getColor():W.getColor();return H=g.default.convertColorToCesium(H),G&&Z.getLineDash()?r.Material.fromType("Stripe",{horizontal:![],repeat:500,evenColor:H,oddColor:new r.Color(0,0,0,0)}):r.Material.fromType("Color",{color:H})}},{key:"computePlainStyle",value:function(N,I,G,W){var Z=I.getStyleFunction(),H=null;return Z&&(H=Z(I,W)),!H&&G&&(H=G(I,W)),H?Array.isArray(H)?H:[H]:null}},{key:"getGeometryFromFeature",value:function(N,I,G){if(G)return G;var W=N.get("olcs.3d_geometry");if(W&&W instanceof s.default)return W;if(I){var Z=I.getGeometryFunction()(N);if(Z instanceof s.default)return Z}return N.getGeometry()}},{key:"olFeatureToCesium",value:function(N,I,G,W,Z){var H=this,U=this.getGeometryFromFeature(I,G,Z);if(!U)return null;var V=W.projection,Y=function(st){var ut=W.featureToCesiumMap[(0,y.getUid)(I)];ut instanceof Array?ut.push(st):W.featureToCesiumMap[(0,y.getUid)(I)]=[st]};switch(U.getType()){case"GeometryCollection":var $=new r.PrimitiveCollection,K=U;return K.getGeometries().forEach(function(nt){if((0,o.default)(this,H),nt){var st=this.olFeatureToCesium(N,I,G,W,nt);st&&$.add(st)}}.bind(this)),$;case"Point":U=U;var J=W.billboards,Q=this.olPointGeometryToCesium(N,I,U,V,G,J,Y);return Q||null;case"Circle":return U=U,this.olCircleGeometryToCesium(N,I,U,V,G);case"LineString":return U=U,this.olLineStringGeometryToCesium(N,I,U,V,G);case"Polygon":return U=U,this.olPolygonGeometryToCesium(N,I,U,V,G);case"MultiPoint":case"MultiLineString":case"MultiPolygon":var et=this.olMultiGeometryToCesium(N,I,U,V,G,W.billboards,Y);return et||null;case"LinearRing":throw new Error("LinearRing should only be part of polygon.");default:throw new Error("Ol geom type not handled : ".concat(U.getType()))}}},{key:"olVectorLayerToCesium",value:function(N,I,G){var W=I.getProjection(),Z=I.getResolution();if(Z===void 0||!W)throw E.assert(![],"View not ready"),new Error("View not ready");var H=N.getSource();H instanceof a.default&&(H=H.getSource()),E.assert(H instanceof x.default);for(var U=H.getFeatures(),V=new d.default(W,this.scene),Y=V.context,$=0;$<U.length;++$){var K=U[$];if(K){var J=N.getStyleFunction(),Q=this.computePlainStyle(N,K,J,Z);if(!(!Q||!Q.length)){for(var et=null,nt=0;nt<Q.length;nt++){var st=this.olFeatureToCesium(N,K,Q[nt],Y);if(st){if(!et)et=st;else if(st)for(var ut=0,rt=void 0;rt=st.get(ut);)et.add(rt),ut++}}et&&(G[(0,y.getUid)(K)]=et,V.getRootPrimitive().add(et))}}}return V}},{key:"convert",value:function(N,I,G,W){var Z=I.getProjection(),H=I.getResolution();if(H==null||!Z)return null;var U=N.getStyleFunction(),V=this.computePlainStyle(N,G,U,H);if(!V||!V.length)return null;W.projection=Z;for(var Y=null,$=0;$<V.length;$++){var K=this.olFeatureToCesium(N,G,V[$],W);if(!Y)Y=K;else if(K)for(var J=0,Q=void 0;Q=K.get(J);)Y.add(Q),J++}return Y}}]),D}(),P=k;z.default=P},786048:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var L=b(e(578756)),T=b(e(705146)),C=b(e(342579)),f=b(e(122777)),v=b(e(42762)),m=i(e(187647)),o=b(e(726988)),h=b(e(339211)),l=b(e(167026)),r=e(183254),s=e(972233),c=e(875907),x=b(e(615161));function a(d){if(typeof O!="function")return null;var y=new O,p=new O;return(a=function(S){return S?p:y})(d)}function i(d,y){if(!y&&d&&d.__esModule)return d;if(d===null||F(d)!=="object"&&typeof d!="function")return{default:d};var p=a(y);if(p&&p.has(d))return p.get(d);var w={},S=Object.defineProperty&&M;for(var R in d)if(R!=="default"&&Object.prototype.hasOwnProperty.call(d,R)){var B=S?M(d,R):null;B&&(B.get||B.set)?Object.defineProperty(w,R,B):w[R]=d[R]}return w.default=d,p&&p.set(d,w),w}var n=new o.default,u=[new h.default({stroke:new l.default({color:"blue",width:2})})],g=function(){function d(y){var p=this;(0,f.default)(this,d),this.urls=y.urls,this.ready=!![],this.readyPromise=L.default.resolve(!![]),this.tileWidth=256,this.tileHeight=256,this.maximumLevel=y.maximumLevel||20,this.minimumLevel=y.minimumLevel||0,this.tilingScheme=new m.WebMercatorTilingScheme,this.rectangle=y.rectangle||this.tilingScheme.rectangle,this.errorEvent=new m.Event,this.credit=y.credit,this.hasAlphaChannel=!![],this.styleFunction_=y.styleFunction||function(){return(0,C.default)(this,p),u}.bind(this),this.projection_=(0,s.get)("EPSG:3857"),this.emptyCanvas_=document.createElement("canvas"),this.emptyCanvas_.width=1,this.emptyCanvas_.height=1,this.tileRectangle_=new m.Rectangle;var w=y.cacheSize!==void 0?y.cacheSize:50;this.tileCache=new x.default(w),this.featureCache=y.featureCache||new x.default(w)}return(0,v.default)(d,[{key:"getTileCredits",value:function(){return[]}},{key:"pickFeatures",value:function(){}},{key:"getTileFeatures",value:function(p,w,S){var R=this,B=this.getCacheKey_(p,w,S),k;if(this.featureCache.containsKey(B)&&(k=this.featureCache.get(B)),!k){var P=this.getUrl_(p,w,S);if(k=fetch(P).then(function(D){return(0,C.default)(this,R),D.ok?D:L.default.reject(D)}.bind(this)).then(function(D){return(0,C.default)(this,R),D.arrayBuffer()}.bind(this)).then(function(D){return(0,C.default)(this,R),this.readFeaturesFromBuffer(D)}.bind(this)),this.featureCache.set(B,k),this.featureCache.getCount()>2*this.featureCache.highWaterMark)for(;this.featureCache.canExpireCache();)this.featureCache.pop()}return k}},{key:"readFeaturesFromBuffer",value:function(p){var w=this,S;c.VERSION<="6.4.4"&&(S={extent:[0,0,4096,4096],dataProjection:n.dataProjection,featureProjection:n.dataProjection});var R=n.readFeatures(p,S),B=this.tileWidth/4096;return R.forEach(function(k){(0,C.default)(this,w);for(var P=k.getFlatCoordinates(),D=![],A=0;A<P.length;++A)P[A]*=B,D&&(P[A]=this.tileWidth-P[A]),c.VERSION<="6.4.4"&&(D=!D)}.bind(this)),R}},{key:"getUrl_",value:function(p,w,S){var R=this.urls[0].replace("{x}",w).replace("{y}",S).replace("{z}",p);return R}},{key:"getCacheKey_",value:function(p,w,S){var R,B;return(0,T.default)(R=(0,T.default)(B="".concat(p,"_")).call(B,w,"_")).call(R,S)}},{key:"requestImage",value:function(p,w,S,R){var B=this;if(S<this.minimumLevel)return this.emptyCanvas_;try{var k=this.getCacheKey_(S,p,w),P;if(this.tileCache.containsKey(k)&&(P=this.tileCache.get(k)),!P&&(P=this.getTileFeatures(S,p,w).then(function(D){(0,C.default)(this,B),this.tilingScheme.tileXYToNativeRectangle(p,w,S,this.tileRectangle_);var A=(this.tileRectangle_.east-this.tileRectangle_.west)/this.tileWidth;return this.rasterizeFeatures(D,this.styleFunction_,A)}.bind(this)),this.tileCache.set(k,P),this.tileCache.getCount()>2*this.tileCache.highWaterMark))for(;this.tileCache.canExpireCache();)this.tileCache.pop();return P}catch(D){E.trace(D),this.raiseEvent("could not render pbf to tile",D)}}},{key:"rasterizeFeatures",value:function(p,w,S){var R=this,B=document.createElement("canvas"),k=(0,r.toContext)(B.getContext("2d"),{size:[this.tileWidth,this.tileHeight]});return p.forEach(function(P){var D=this;(0,C.default)(this,R);var A=w(P,S);A&&A.forEach(function(N){(0,C.default)(this,D),k.setStyle(N),k.drawGeometry(P)}.bind(this))}.bind(this)),B}}]),d}();z.default=g},864828:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var L=b(e(828866)),T=b(e(22466)),C=b(e(705146)),f=b(e(342579)),v=b(e(122777)),m=b(e(42762)),o=y(e(187647)),h=b(e(223378)),l=e(972233),r=b(e(266342)),s=b(e(405015)),c=b(e(878280)),x=b(e(971175)),a=b(e(764580)),i=b(e(352120)),n=b(e(574923)),u=b(e(349162)),g=b(e(692405));function d(S){if(typeof O!="function")return null;var R=new O,B=new O;return(d=function(P){return P?B:R})(S)}function y(S,R){if(!R&&S&&S.__esModule)return S;if(S===null||F(S)!=="object"&&typeof S!="function")return{default:S};var B=d(R);if(B&&B.has(S))return B.get(S);var k={},P=Object.defineProperty&&M;for(var D in S)if(D!=="default"&&Object.prototype.hasOwnProperty.call(S,D)){var A=P?M(S,D):null;A&&(A.get||A.set)?Object.defineProperty(k,D,A):k[D]=S[D]}return k.default=S,B&&B.set(S,k),k}var p=function(){function S(R){var B=this;(0,v.default)(this,S),this.isBaseMap=R.isBaseMap?R.isBaseMap:![],this.autoRenderLoop_=null,this.options_=R,this.map_=(0,L.default)(R),this.time_=R.time||function(){return o.JulianDate.now()},this.to4326Transform_=(0,l.getTransform)(this.map_.getView().getProjection(),"EPSG:4326"),this.resolutionScale_=1,this.canvasClientWidth_=0,this.canvasClientHeight_=0,this.resolutionScaleChanged_=!![];var k="position:absolute;top:0;left:0;width:100%;height:100%;";if(this.scene_=R.scene_c,this.scene_){var P=R.target||this.map_.getViewport();if(typeof P=="string"&&(P=document.getElementById(P)),this.container_=document.querySelector(".cesium-widget"),this.isOverMap_=!R.target,this.isOverMap_&&R.stopOpenLayersEventsPropagation)for(var D=["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"],A=0,N=D.length;A<N;++A)this.container_.addEventListener(D[A],function(Q){return(0,f.default)(this,B),Q.stopPropagation()}.bind(this));this.canvas_=document.getElementsByTagName("canvas")[0],this.enabled_=![],this.pausedInteractions_=[],this.hiddenRootGroup_=null}else{this.container_=document.createElement("DIV666");var I=document.createAttribute("style");I.value="".concat(k,"visibility:hidden;"),this.container_.setAttributeNode(I);var G=R.target||this.map_.getViewport();if(typeof G=="string"&&(G=document.getElementById(G)),G.appendChild(this.container_),this.isOverMap_=!R.target,this.isOverMap_&&R.stopOpenLayersEventsPropagation)for(var W=["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"],Z=0,H=W.length;Z<H;++Z)this.container_.addEventListener(W[Z],function(Q){return(0,f.default)(this,B),Q.stopPropagation()}.bind(this));this.canvas_=document.createElement("CANVAS");var U=document.createAttribute("style");U.value=k,this.canvas_.setAttributeNode(U),r.default.supportsImageRenderingPixelated()&&(this.canvas_.style.imageRendering=r.default.imageRenderingValue()),this.canvas_.oncontextmenu=function(){return![]},this.canvas_.onselectstart=function(){return![]},this.container_.appendChild(this.canvas_),this.enabled_=![],this.pausedInteractions_=[],this.hiddenRootGroup_=null;var V=R.sceneOptions!==void 0?R.sceneOptions:{};V.canvas=this.canvas_,V.scene3DOnly=!![],this.scene_=new o.Scene(V)}var Y=this.scene_.screenSpaceCameraController;Y.tiltEventTypes.push({eventType:o.CameraEventType.LEFT_DRAG,modifier:o.KeyboardEventModifier.SHIFT}),Y.tiltEventTypes.push({eventType:o.CameraEventType.LEFT_DRAG,modifier:o.KeyboardEventModifier.ALT}),this.scene_.camera.constrainedAxis=o.Cartesian3.UNIT_Z,this.camera_=new x.default(this.scene_,this.map_),this.globe_=this.scene_.globe;var $=new o.SingleTileImageryProvider({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",rectangle:o.Rectangle.fromDegrees(0,0,1,1)});if(this.globe_.imageryLayers.addImageryProvider($,0),this.dataSourceCollection_=new o.DataSourceCollection,this.dataSourceDisplay_=new o.DataSourceDisplay({scene:this.scene_,dataSourceCollection:this.dataSourceCollection_}),this.isBaseMap==![]){this.synchronizers=R.createSynchronizers?R.createSynchronizers(this.map_,this.scene_,this.dataSourceCollection_):[new a.default(this.map_,this.scene_),new i.default(this.map_,this.scene_),new n.default(this.map_,this.scene_)],this.handleResize_();for(var K=this.synchronizers.length-1;K>=0;--K)this.synchronizers[K].synchronize()}this.lastFrameTime_=0,this.renderId_=void 0,this.targetFrameRate_=Number.POSITIVE_INFINITY,this.blockCesiumRendering_=![],this.warmingUp_=![],this.trackedFeature_=null,this.trackedEntity_=null,this.entityView_=null,this.needTrackedEntityUpdate_=![],this.boundingSphereScratch_=new o.BoundingSphere;var J=new o.EventHelper;J.add(this.scene_.preRender,S.prototype.updateTrackedEntity_,this),o.Camera.enableSuspendTerrainAdjustment=![]}return(0,m.default)(S,[{key:"update",value:function(B){B&&(this.map_.isSplit=B),this.synchronizers=this.options_.createSynchronizers?this.options_.createSynchronizers(this.map_,this.scene_,this.dataSourceCollection_):[new a.default(this.map_,this.scene_),new i.default(this.map_,this.scene_),new n.default(this.map_,this.scene_)],this.handleResize_();for(var k=this.synchronizers.length-1;k>=0;--k)this.synchronizers[k].synchronize();this.render_()}},{key:"render_",value:function(){this.renderId_!==void 0&&(cancelAnimationFrame(this.renderId_),this.renderId_=void 0),(this.enabled_||this.warmingUp_)&&!this.blockCesiumRendering_&&(this.renderId_=requestAnimationFrame(this.onAnimationFrame_.bind(this)))}},{key:"onAnimationFrame_",value:function(B){this.renderId_=void 0;var k=1e3/this.targetFrameRate_,P=B-this.lastFrameTime_;if(P<k){this.render_();return}this.lastFrameTime_=B;var D=this.time_();if(this.scene_.initializeFrame(),this.handleResize_(),this.dataSourceDisplay_.update(D),this.entityView_){var A=this.trackedEntity_,N=this.dataSourceDisplay_.getBoundingSphere(A,![],this.boundingSphereScratch_);N===o.BoundingSphereState.DONE&&(this.boundingSphereScratch_.radius=1,this.entityView_.update(D,this.boundingSphereScratch_))}this.scene_.render(D),this.camera_.checkCameraChange(),this.render_()}},{key:"updateTrackedEntity_",value:function(){if(this.needTrackedEntityUpdate_){var B=this.trackedEntity_,k=this.scene_,P=this.dataSourceDisplay_.getBoundingSphere(B,![],this.boundingSphereScratch_);if(P!==o.BoundingSphereState.PENDING){k.screenSpaceCameraController.enableTilt=![];var D=P!==o.BoundingSphereState.FAILED?this.boundingSphereScratch_:void 0;D&&(D.radius=1),this.entityView_=new o.EntityView(B,k,k.mapProjection.ellipsoid),this.entityView_.update(this.time_(),D),this.needTrackedEntityUpdate_=![]}}}},{key:"handleResize_",value:function(){var B=this.canvas_.clientWidth,k=this.canvas_.clientHeight;if(!(B===0|k===0)&&!(B===this.canvasClientWidth_&&k===this.canvasClientHeight_&&!this.resolutionScaleChanged_)){var P=this.resolutionScale_;!r.default.supportsImageRenderingPixelated()&&(P*=window.devicePixelRatio||1),this.resolutionScaleChanged_=![],this.canvasClientWidth_=B,this.canvasClientHeight_=k,B*=P,k*=P,this.canvas_.width=B,this.canvas_.height=k,this.scene_.camera.frustum.aspectRatio=B/k}}},{key:"getCamera",value:function(){return this.camera_}},{key:"getOlMap",value:function(){return this.map_}},{key:"getOlView",value:function(){var B=this.map_.getView();return E.assert(B),B}},{key:"getCesiumScene",value:function(){return this.scene_}},{key:"getDataSources",value:function(){return this.dataSourceCollection_}},{key:"getDataSourceDisplay",value:function(){return this.dataSourceDisplay_}},{key:"getEnabled",value:function(){return this.enabled_}},{key:"setEnabled",value:function(B,k){var P=this;if(this.enabled_!==B){this.enabled_=B,this.container_.style.visibility=this.enabled_?"visible":"hidden";var D;if(this.enabled_){if(this.throwOnUnitializedMap_(),this.isOverMap_){D=this.map_.getInteractions(),D.forEach(function(N,I,G){(0,f.default)(this,P),this.pausedInteractions_.push(N)}.bind(this)),D.clear(),this.map_.addInteraction=function(N){return(0,f.default)(this,P),this.pausedInteractions_.push(N)}.bind(this),this.map_.removeInteraction=function(N){var I,G=this;return(0,f.default)(this,P),this.pausedInteractions_=(0,T.default)(I=this.pausedInteractions_).call(I,function(W){return(0,f.default)(this,G),W!==N}.bind(this))}.bind(this);var A=this.map_.getLayerGroup();A.getVisible()&&(this.hiddenRootGroup_=A,this.hiddenRootGroup_.setVisible(k?!![]:![])),this.map_.getOverlayContainer().classList.add("olcs-hideoverlay")}this.camera_.readFromView(),this.render_()}else this.isOverMap_&&(D=this.map_.getInteractions(),this.pausedInteractions_.forEach(function(N){(0,f.default)(this,P),D.push(N)}.bind(this)),this.pausedInteractions_.length=0,this.map_.addInteraction=function(N){return(0,f.default)(this,P),this.map_.getInteractions().push(N)}.bind(this),this.map_.removeInteraction=function(N){return(0,f.default)(this,P),this.map_.getInteractions().remove(N)}.bind(this),this.map_.getOverlayContainer().classList.remove("olcs-hideoverlay"),this.hiddenRootGroup_&&(this.hiddenRootGroup_.setVisible(!![]),this.hiddenRootGroup_=null)),this.camera_.updateView()}}},{key:"warmUp",value:function(B,k){var P=this;if(!this.enabled_){this.throwOnUnitializedMap_(),this.camera_.readFromView();var D=this.globe_.ellipsoid,A=this.scene_.camera,N=D.cartesianToCartographic(A.position);N.height<B&&(N.height=B,A.position=D.cartographicToCartesian(N)),this.warmingUp_=!![],this.render_(),setTimeout(function(){(0,f.default)(this,P),this.warmingUp_=![]}.bind(this),k)}}},{key:"setBlockCesiumRendering",value:function(B){this.blockCesiumRendering_!==B&&(this.blockCesiumRendering_=B,this.render_())}},{key:"enableAutoRenderLoop",value:function(){!this.autoRenderLoop_&&(this.autoRenderLoop_=new c.default(this))}},{key:"getAutoRenderLoop",value:function(){return this.autoRenderLoop_}},{key:"setResolutionScale",value:function(B){B=Math.max(0,B),B!==this.resolutionScale_&&(this.resolutionScale_=Math.max(0,B),this.resolutionScaleChanged_=!![],this.autoRenderLoop_&&this.autoRenderLoop_.restartRenderLoop())}},{key:"setTargetFrameRate",value:function(B){this.targetFrameRate_!==B&&(this.targetFrameRate_=B,this.render_())}},{key:"throwOnUnitializedMap_",value:function(){var B=this.map_,k=B.getView(),P=k.getCenter();if(!k.isDef()||isNaN(P[0])||isNaN(P[1])){var D;throw new Error((0,C.default)(D="The OpenLayers map is not properly initialized: ".concat(P," / ")).call(D,k.getResolution()))}}},{key:"trackedFeature",get:function(){return this.trackedFeature_},set:function(B){var k=this;if(this.trackedFeature_!==B){var P=this.scene_;if(!B||!B.getGeometry()){this.needTrackedEntityUpdate_=![],P.screenSpaceCameraController.enableTilt=!![],this.trackedEntity_&&this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_),this.trackedEntity_=null,this.trackedFeature_=null,this.entityView_=null,P.camera.lookAtTransform(o.Matrix4.IDENTITY);return}this.trackedFeature_=B,this.needTrackedEntityUpdate_=!![];var D=this.to4326Transform_,A=function(){var G=B.getGeometry();E.assert(G instanceof h.default);var W=G.getCoordinates(),Z=D(W,void 0,W.length);return s.default.ol4326CoordinateToCesiumCartesian(Z)},N={position:new o.CallbackProperty(function(I,G){return(0,f.default)(this,k),A()}.bind(this),![]),point:{pixelSize:1,color:o.Color.TRANSPARENT}};this.trackedEntity_=this.dataSourceDisplay_.defaultDataSource.entities.add(N)}}}]),S}(),w=p;z.default=w},574923:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=E(e(828866)),O=E(e(985208)),M=E(e(342579)),b=E(e(122777)),L=E(e(42762)),T=E(e(32e3)),C=e(266342),f=function(){function m(o,h){var l=this;(0,b.default)(this,m),this.map=o,this.overlays_=(0,F.default)(this).getOverlays(),this.scene=h,this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";var r=["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"];r.forEach(function(s){var c=this;(0,M.default)(this,l),this.overlayContainerStopEvent_.addEventListener(s,function(x){return(0,M.default)(this,c),x.stopPropagation()}.bind(this))}.bind(this)),this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_),this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.scene.canvas.parentElement.appendChild(this.overlayContainer_),this.overlayMap_={}}return(0,L.default)(m,[{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"synchronize",value:function(){this.destroyAll(),this.addOverlays(),this.overlays_.on("add",this.addOverlayFromEvent_.bind(this)),this.overlays_.on("remove",this.removeOverlayFromEvent_.bind(this))}},{key:"addOverlayFromEvent_",value:function(h){var l=h.element;this.addOverlay(l)}},{key:"addOverlays",value:function(){var h=this;this.overlays_.forEach(function(l){(0,M.default)(this,h),this.addOverlay(l)}.bind(this))}},{key:"addOverlay",value:function(h){if(h){var l=new T.default({scene:this.scene,synchronizer:this,parent:h}),r=(0,C.getUid)(h).toString();this.overlayMap_[r]=l}}},{key:"removeOverlayFromEvent_",value:function(h){var l=h.element;this.removeOverlay(l)}},{key:"removeOverlay",value:function(h){var l=(0,C.getUid)(h).toString(),r=this.overlayMap_[l];r&&(r.destroy(),delete this.overlayMap_[l])}},{key:"destroyAll",value:function(){var h=this;(0,O.default)(this.overlayMap_).forEach(function(l){(0,M.default)(this,h);var r=this.overlayMap_[l];r.destroy(),delete this.overlayMap_[l]}.bind(this))}}]),m}(),v=f;z.default=v},764580:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(465557),M=e(787879),b=e(183393),L=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=L(e(828866)),C=L(e(705146)),f=L(e(669033)),v=L(e(636583)),m=L(e(342579)),o=L(e(122777)),h=L(e(42762)),l=L(e(330044)),r=L(e(299085)),s=L(e(234009)),c=g(e(187647)),x=L(e(627482)),a=e(266342),i=L(e(88589)),n=L(e(405015));function u(S){if(typeof M!="function")return null;var R=new M,B=new M;return(u=function(P){return P?B:R})(S)}function g(S,R){if(!R&&S&&S.__esModule)return S;if(S===null||F(S)!=="object"&&typeof S!="function")return{default:S};var B=u(R);if(B&&B.has(S))return B.get(S);var k={},P=Object.defineProperty&&b;for(var D in S)if(D!=="default"&&Object.prototype.hasOwnProperty.call(S,D)){var A=P?b(S,D):null;A&&(A.get||A.set)?Object.defineProperty(k,D,A):k[D]=S[D]}return k.default=S,B&&B.set(S,k),k}function d(S){var R=y();return function(){var k=(0,s.default)(S),P;if(R){var D=(0,s.default)(this).constructor;P=O(k,arguments,D)}else P=k.apply(this,arguments);return(0,r.default)(this,P)}}function y(){if(typeof Reflect>"u"||!O)return![];if(O.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(O(Boolean,[],function(){})),!![]}catch{return![]}}var p=function(S){(0,l.default)(B,S);var R=d(B);function B(k,P){var D;return(0,o.default)(this,B),D=R.call(this,k,P),D.cesiumLayers_=P.imageryLayers,D.ourLayers_=new c.ImageryLayerCollection,D}return(0,h.default)(B,[{key:"addCesiumObject",value:function(P){this.cesiumLayers_.add(P),this.ourLayers_.add(P)}},{key:"destroyCesiumObject",value:function(P){P.destroy()}},{key:"removeSingleCesiumObject",value:function(P,D){this.cesiumLayers_.remove(P,D),this.ourLayers_.remove(P,![])}},{key:"removeAllCesiumObjects",value:function(P){for(var D=0;D<this.ourLayers_.length;++D)this.cesiumLayers_.remove(this.ourLayers_.get(D),P);this.ourLayers_.removeAll(![])}},{key:"convertLayerToCesiumImageries",value:function(P,D){var A=n.default.tileLayerToImageryLayer((0,T.default)(this),P,D);return A?[A]:null}},{key:"createSingleLayerCounterparts",value:function(P){var D=this,A=P.layer,N=(0,a.getUid)(A).toString(),I=this.view.getProjection();E.assert(I);var G=this.convertLayerToCesiumImageries(A,I),W=(0,T.default)(this).isSplit;if(W)return Array.isArray(G)?G:null;if(G){var Z,H,U=[];if((0,C.default)(Z=[P.layer]).call(Z,P.parents).forEach(function($){var K=this;(0,m.default)(this,D),U.push($.on(["change:opacity","change:visible"],function(){(0,m.default)(this,K),E.assert(G);for(var J=0;J<G.length;++J)n.default.updateCesiumLayerProperties(P,G[J])}.bind(this)))}.bind(this)),A.getStyleFunction){var V=A.getStyleFunction();U.push(A.on("change",function(){(0,m.default)(this,D);var $=A.getStyleFunction();if(V!==$){V=$;for(var K=0;K<G.length;++K){var J=G[K];J._imageryCache&&J.imageryProvider.cache_&&(J._imageryCache={},J.imageryProvider.cache_={},J.imageryProvider.styleFunction_=$)}this.scene.requestRender()}}.bind(this)))}for(var Y=0;Y<G.length;++Y)n.default.updateCesiumLayerProperties(P,G[Y]);U.push(A.on("change:extent",function($){(0,m.default)(this,D);for(var K=0;K<G.length;++K)this.cesiumLayers_.remove(G[K],!![]),this.ourLayers_.remove(G[K],![]);delete this.layerMap[(0,a.getUid)(A)],this.synchronize()}.bind(this))),U.push(A.on("change",function($){(0,m.default)(this,D);for(var K=0;K<G.length;++K){var J=this.cesiumLayers_.indexOf(G[K]);J>=0&&(this.cesiumLayers_.remove(G[K],![]),this.cesiumLayers_.add(G[K],J))}}.bind(this))),(H=this.olLayerListenKeys[N]).push.apply(H,U)}return Array.isArray(G)?G:null}},{key:"orderLayers",value:function(){for(var P=this,D=[],A={},N=[this.mapLayerGroup];N.length>0;){var I=(0,f.default)(N).call(N,0,1)[0];if(D.push(I),A[(0,a.getUid)(I)]=I.getZIndex()||0,I instanceof x.default){var G=I.getLayers();G&&N.unshift.apply(N,(0,v.default)(G.getArray()))}}(0,a.stableSort)(D,function(W,Z){return(0,m.default)(this,P),A[(0,a.getUid)(W)]-A[(0,a.getUid)(Z)]}.bind(this)),D.forEach(function(W){var Z=this;(0,m.default)(this,P);var H=(0,a.getUid)(W).toString(),U=this.layerMap[H];U&&U.forEach(function(V){(0,m.default)(this,Z),this.raiseToTop(V)}.bind(this))}.bind(this))}},{key:"raiseToTop",value:function(P){this.cesiumLayers_.raiseToTop(P)}}]),B}(i.default),w=p;z.default=w},32e3:function(X,z,e){"use strict";var E=e(29870),F=e(465557),O=e(520314),M=e(426352),b=e(230551),L=e(43586),T=e(787879),C=e(183393),f=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var v=f(e(669033)),m=f(e(342579)),o=f(e(122777)),h=f(e(42762)),l=f(e(387507)),r=f(e(330044)),s=f(e(299085)),c=f(e(234009)),x=d(e(187647)),a=f(e(342369)),i=e(972233),n=e(266342),u=e(407165);function g(P){if(typeof T!="function")return null;var D=new T,A=new T;return(g=function(I){return I?A:D})(P)}function d(P,D){if(!D&&P&&P.__esModule)return P;if(P===null||E(P)!=="object"&&typeof P!="function")return{default:P};var A=g(D);if(A&&A.has(P))return A.get(P);var N={},I=Object.defineProperty&&C;for(var G in P)if(G!=="default"&&Object.prototype.hasOwnProperty.call(P,G)){var W=I?C(P,G):null;W&&(W.get||W.set)?Object.defineProperty(N,G,W):N[G]=P[G]}return N.default=P,A&&A.set(P,N),N}function y(P,D){var A=typeof b<"u"&&L(P)||P["@@iterator"];if(!A){if(Array.isArray(P)||(A=p(P))||D&&P&&typeof P.length=="number"){A&&(P=A);var N=0,I=function(){};return{s:I,n:function(){return N>=P.length?{done:!![]}:{done:![],value:P[N++]}},e:function(U){throw U},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var G=!![],W=![],Z;return{s:function(){A=A.call(P)},n:function(){var U=A.next();return G=U.done,U},e:function(U){W=!![],Z=U},f:function(){try{!G&&A.return!=null&&A.return()}finally{if(W)throw Z}}}}function p(P,D){var A;if(P){if(typeof P=="string")return w(P,D);var N=O(A=Object.prototype.toString.call(P)).call(A,8,-1);if(N==="Object"&&P.constructor&&(N=P.constructor.name),N==="Map"||N==="Set")return M(P);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return w(P,D)}}function w(P,D){(D==null||D>P.length)&&(D=P.length);for(var A=0,N=new Array(D);A<D;A++)N[A]=P[A];return N}function S(P){var D=R();return function(){var N=(0,c.default)(P),I;if(D){var G=(0,c.default)(this).constructor;I=F(N,arguments,G)}else I=N.apply(this,arguments);return(0,s.default)(this,I)}}function R(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var B=function(P){(0,r.default)(A,P);var D=S(A);function A(N){var I=this,G;(0,o.default)(this,A);var W=N.parent;G=D.call(this,W.getOptions()),G.scenePostRenderListenerRemover_=null,G.scene_=N.scene,G.synchronizer_=N.synchronizer,G.parent_=W,G.positionWGS84_=void 0,G.observer_=new MutationObserver(G.handleElementChanged.bind((0,l.default)(G))),G.attributeObserver_=[],G.listenerKeys_=[];var Z=function(U){return(0,m.default)(this,I),G.setPropertyFromEvent_(U)}.bind(this);return G.listenerKeys_.push(G.parent_.on("change:position",Z)),G.listenerKeys_.push(G.parent_.on("change:element",Z)),G.listenerKeys_.push(G.parent_.on("change:offset",Z)),G.listenerKeys_.push(G.parent_.on("change:position",Z)),G.listenerKeys_.push(G.parent_.on("change:positioning",Z)),G.setProperties(G.parent_.getProperties()),G.handleMapChanged(),G.handleElementChanged(),G}return(0,h.default)(A,[{key:"observeTarget_",value:function(I){var G=this;if(this.observer_){this.observer_.disconnect(),this.observer_.observe(I,{attributes:![],childList:!![],characterData:!![],subtree:!![]}),this.attributeObserver_.forEach(function(U){(0,m.default)(this,G),U.disconnect()}.bind(this)),this.attributeObserver_.length=0;for(var W=0;W<I.childNodes.length;W++){var Z=I.childNodes[W];if(Z.nodeType===1){var H=new MutationObserver(this.handleElementChanged.bind(this));H.observe(Z,{attributes:!![],subtree:!![]}),this.attributeObserver_.push(H)}}}}},{key:"setPropertyFromEvent_",value:function(I){I.target&&I.key&&this.set(I.key,I.target.get(I.key))}},{key:"getScene",value:function(){return this.scene_}},{key:"handleMapChanged",value:function(){this.scenePostRenderListenerRemover_&&(this.scenePostRenderListenerRemover_(),(0,n.removeNode)(this.element)),this.scenePostRenderListenerRemover_=null;var I=this.getScene();if(I){this.scenePostRenderListenerRemover_=I.postRender.addEventListener(this.updatePixelPosition.bind(this)),this.updatePixelPosition();var G=this.stopEvent?this.synchronizer_.getOverlayContainerStopEvent():this.synchronizer_.getOverlayContainer();this.insertFirst?G.insertBefore(this.element,G.childNodes[0]||null):G.appendChild(this.element)}}},{key:"handlePositionChanged",value:function(){var I=this.getPosition();if(I){var G=this.parent_.getMap().getView().getProjection();this.positionWGS84_=(0,i.transform)(I,G,"EPSG:4326")}else this.positionWGS84_=void 0;this.updatePixelPosition()}},{key:"handleElementChanged",value:function(){function I(V,Y){var $=this,K=V.cloneNode();Y&&Y.appendChild(K),V.nodeType!=Node.TEXT_NODE&&K.addEventListener("click",function(et){(0,m.default)(this,$),V.dispatchEvent(new MouseEvent("click",et)),et.stopPropagation()}.bind(this));for(var J=V.childNodes,Q=0;Q<J.length;Q++)J[Q]&&I(J[Q],K);return K}(0,n.removeChildren)(this.element);var G=this.getElement();if(G&&G.parentNode&&G.parentNode.childNodes){var W=y(G.parentNode.childNodes),Z;try{for(W.s();!(Z=W.n()).done;){var H=Z.value,U=I(H,null);this.element.appendChild(U)}}catch(V){W.e(V)}finally{W.f()}}G.parentNode&&this.observeTarget_(G.parentNode)}},{key:"updatePixelPosition",value:function(){var I=this.positionWGS84_;if(!this.scene_||!I){this.setVisible(![]);return}var G=0;if(I.length===2){var W=this.scene_.globe.getHeight(x.Cartographic.fromDegrees(I[0],I[1]));W&&this.scene_.globe.tilesLoaded&&(I[2]=W),W&&(G=W)}else G=I[2];var Z=x.Cartesian3.fromDegrees(I[0],I[1],G),H=this.scene_.camera,U=new x.BoundingSphere(new x.Cartesian3,6356752),V=new x.Occluder(U,H.position);if(!V.isPointVisible(Z)){this.setVisible(![]);return}var Y=H.frustum.computeCullingVolume(H.position,H.direction,H.up);if(Y.computeVisibility(new x.BoundingSphere(Z))!==1){this.setVisible(![]);return}this.setVisible(!![]);var $=this.scene_.cartesianToCanvasCoordinates(Z),K=[$.x,$.y],J=[this.scene_.canvas.width,this.scene_.canvas.height];this.updateRenderedPosition(K,J)}},{key:"destroy",value:function(){var I;this.scenePostRenderListenerRemover_&&this.scenePostRenderListenerRemover_(),this.observer_&&this.observer_.disconnect(),(0,u.unByKey)(this.listenerKeys_),(0,v.default)(I=this.listenerKeys_).call(I,0),this.element.removeNode?this.element.removeNode(!![]):this.element.remove(),this.element=null}}]),A}(a.default),k=B;z.default=k},352120:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(465557),M=e(787879),b=e(183393),L=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=L(e(705146)),C=L(e(342579)),f=L(e(122777)),v=L(e(42762)),m=L(e(330044)),o=L(e(299085)),h=L(e(234009)),l=y(e(187647)),r=L(e(692405)),s=L(e(321639)),c=L(e(187653)),x=L(e(186619)),a=e(266342),i=L(e(505085)),n=L(e(233964)),u=L(e(88589)),g=L(e(172013));function d(B){if(typeof M!="function")return null;var k=new M,P=new M;return(d=function(A){return A?P:k})(B)}function y(B,k){if(!k&&B&&B.__esModule)return B;if(B===null||F(B)!=="object"&&typeof B!="function")return{default:B};var P=d(k);if(P&&P.has(B))return P.get(B);var D={},A=Object.defineProperty&&b;for(var N in B)if(N!=="default"&&Object.prototype.hasOwnProperty.call(B,N)){var I=A?b(B,N):null;I&&(I.get||I.set)?Object.defineProperty(D,N,I):D[N]=B[N]}return D.default=B,P&&P.set(B,D),D}function p(B){var k=w();return function(){var D=(0,h.default)(B),A;if(k){var N=(0,h.default)(this).constructor;A=O(D,arguments,N)}else A=D.apply(this,arguments);return(0,o.default)(this,A)}}function w(){if(typeof Reflect>"u"||!O)return![];if(O.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(O(Boolean,[],function(){})),!![]}catch{return![]}}var S=function(B){(0,m.default)(P,B);var k=p(P);function P(D,A,N){var I;return(0,f.default)(this,P),I=k.call(this,D,A),I.converter=N||new g.default(A),I.csAllPrimitives_=new l.PrimitiveCollection,A.primitives.add(I.csAllPrimitives_),I.csAllPrimitives_.destroyPrimitives=![],I}return(0,v.default)(P,[{key:"addCesiumObject",value:function(A){E.assert(A),A.getRootPrimitive().counterpart=A,this.csAllPrimitives_.add(A.getRootPrimitive())}},{key:"destroyCesiumObject",value:function(A){A.getRootPrimitive().destroy()}},{key:"removeSingleCesiumObject",value:function(A,N){A.destroy(),this.csAllPrimitives_.destroyPrimitives=N,this.csAllPrimitives_.remove(A.getRootPrimitive()),this.csAllPrimitives_.destroyPrimitives=![]}},{key:"removeAllCesiumObjects",value:function(A){if(this.csAllPrimitives_.destroyPrimitives=A,A)for(var N=0;N<this.csAllPrimitives_.length;++N)this.csAllPrimitives_.get(N).counterpart.destroy();this.csAllPrimitives_.removeAll(),this.csAllPrimitives_.destroyPrimitives=![]}},{key:"updateLayerVisibility",value:function(A,N){var I,G=this,W=!![];(0,T.default)(I=[A.layer]).call(I,A.parents).forEach(function(Z){(0,C.default)(this,G);var H=Z.getVisible();H!==void 0?W&=H:W=![]}.bind(this)),N.show=W}},{key:"createSingleLayerCounterparts",value:function(A){var N,I=this,G=A.layer;if(!(G instanceof i.default)||G instanceof n.default)return null;E.assert(G instanceof s.default);var W=G.getSource();if(W instanceof c.default&&(W=W.getSource()),!W)return null;E.assert(W instanceof r.default),E.assert(this.view);var Z=this.view,H={},U=this.converter.olVectorLayerToCesium(G,Z,H),V=U.getRootPrimitive(),Y=U.olListenKeys;(0,T.default)(N=[A.layer]).call(N,A.parents).forEach(function(J){var Q=this;(0,C.default)(this,I),Y.push((0,a.olcsListen)(J,"change:visible",function(){(0,C.default)(this,Q),this.updateLayerVisibility(A,V)}.bind(this)))}.bind(this)),this.updateLayerVisibility(A,V);var $=function(J){E.assert(G instanceof i.default||G instanceof x.default);var Q=U.context,et=this.converter.convert(G,Z,J,Q);et&&(H[(0,a.getUid)(J)]=et,V.add(et))}.bind(this),K=function(J){var Q=this,et=(0,a.getUid)(J),nt=U.context,st=nt.featureToCesiumMap[et];st&&(delete nt.featureToCesiumMap[et],st.forEach(function(rt){(0,C.default)(this,Q),rt instanceof l.Billboard&&nt.billboards.remove(rt)}.bind(this)));var ut=H[et];delete H[et],ut&&V.remove(ut)}.bind(this);return Y.push((0,a.olcsListen)(W,"addfeature",function(J){(0,C.default)(this,I),E.assert(J.feature),$(J.feature)}.bind(this),this)),Y.push((0,a.olcsListen)(W,"removefeature",function(J){(0,C.default)(this,I),E.assert(J.feature),K(J.feature)}.bind(this),this)),Y.push((0,a.olcsListen)(W,"changefeature",function(J){(0,C.default)(this,I);var Q=J.feature;E.assert(Q),K(Q),$(Q)}.bind(this),this)),U?[U]:null}}]),P}(u.default),R=S;z.default=R},405015:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.attributionsFunctionToCredits=B,z.calcDistanceForResolution=P,z.calcResolutionForDistance=D,z.default=void 0;var L=b(e(828866)),T=b(e(705146)),C=b(e(578756)),f=b(e(342579)),v=S(e(187647)),m=e(333917),o=b(e(361483)),h=b(e(186619)),l=e(972233),r=b(e(346581)),s=b(e(327472)),c=b(e(217655)),x=b(e(397054)),a=b(e(933792)),i=b(e(463206)),n=e(435583),u=b(e(338938)),g=b(e(266342)),d=b(e(786048)),y=b(e(233964)),p=e(692086);function w(A){if(typeof O!="function")return null;var N=new O,I=new O;return(w=function(W){return W?I:N})(A)}function S(A,N){if(!N&&A&&A.__esModule)return A;if(A===null||F(A)!=="object"&&typeof A!="function")return{default:A};var I=w(N);if(I&&I.has(A))return I.get(A);var G={},W=Object.defineProperty&&M;for(var Z in A)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(A,Z)){var H=W?M(A,Z):null;H&&(H.get||H.set)?Object.defineProperty(G,Z,H):G[Z]=A[Z]}return G.default=A,I&&I.set(A,G),G}var R={};R.computePixelSizeAtCoordinate=function(A,N){var I=A.camera,G=A.canvas,W=I.frustum,Z=v.Cartesian3.magnitude(v.Cartesian3.subtract(I.position,N,new v.Cartesian3));return W.getPixelDimensions(G.clientWidth,G.clientHeight,Z,A.pixelRatio,new v.Cartesian2)},R.computeBoundingBoxAtTarget=function(A,N,I){var G=R.computePixelSizeAtCoordinate(A,N),W=v.Transforms.eastNorthUpToFixedFrame(N),Z=v.Matrix4.multiplyByPoint(W,new v.Cartesian3(-G.x*I,-G.y*I,0),new v.Cartesian3),H=v.Matrix4.multiplyByPoint(W,new v.Cartesian3(G.x*I,G.y*I,0),new v.Cartesian3);return v.Ellipsoid.WGS84.cartesianArrayToCartographicArray([Z,H])},R.applyHeightOffsetToGeometry=function(A,N){var I=this;A.applyTransform(function(G,W,Z){if((0,f.default)(this,I),E.assert(G===W),Z!==void 0&&Z>=3)for(var H=0;H<W.length;H+=Z)W[H+2]=W[H+2]+N;return W}.bind(this))},R.createMatrixAtCoordinates=function(A){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.Cartesian3.ZERO,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new v.Cartesian3(1,1,1),W=R.ol4326CoordinateToCesiumCartesian(A),Z=v.Transforms.eastNorthUpToFixedFrame(W),H=v.Quaternion.fromAxisAngle(v.Cartesian3.UNIT_Z,-N),U=v.Matrix4.fromTranslationQuaternionRotationScale(I,H,G);return v.Matrix4.multiply(Z,U,new v.Matrix4)},R.rotateAroundAxis=function(A,N,I,G,W){var Z=v.Math.clamp,H=v.defaultValue,U=W||{},V=H(U.duration,500),Y=H(U.easing,m.linear),$=U.callback,K=0,J=new v.Matrix4,Q=Date.now(),et=function nt(){var st=Date.now(),ut=st-Q,rt=Y(Z(ut/V,0,1));E.assert(rt>=K),A.transform.clone(J);var ht=(rt-K)*N;K=rt,A.lookAtTransform(G),A.rotate(I,ht),A.lookAtTransform(J),rt<1?window.requestAnimationFrame(nt):$&&$()};window.requestAnimationFrame(et)},R.setHeadingUsingBottomCenter=function(A,N,I,G){var W=A.camera,Z=R.computeAngleToZenith(A,I),H=W.right,U=v.Quaternion.fromAxisAngle(H,Z),V=v.Matrix3.fromQuaternion(U),Y=new v.Cartesian3;v.Cartesian3.subtract(W.position,I,Y);var $=new v.Cartesian3;v.Matrix3.multiplyByVector(V,Y,$),v.Cartesian3.add($,I,$);var K=v.Matrix4.fromTranslation($),J=R.rotateAroundAxis;J(W,N,$,K,G)},R.pickOnTerrainOrEllipsoid=function(A,N){var I=A.camera.getPickRay(N),G=A.globe.pick(I,A);return G||A.camera.pickEllipsoid(N)},R.pickBottomPoint=function(A){var N=A.canvas,I=new v.Cartesian2(N.clientWidth/2,N.clientHeight);return R.pickOnTerrainOrEllipsoid(A,I)},R.pickCenterPoint=function(A){var N=A.canvas,I=new v.Cartesian2(N.clientWidth/2,N.clientHeight/2);return R.pickOnTerrainOrEllipsoid(A,I)},R.computeSignedTiltAngleOnGlobe=function(A){var N=A.camera,I=new v.Ray(N.position,N.direction),G=A.globe.pick(I,A);if(!G){var W=v.Ellipsoid.WGS84,Z=v.IntersectionTests.rayEllipsoid(I,W);Z&&(G=v.Ray.getPoint(I,Z.start))}if(G){var H=new v.Cartesian3;v.Ellipsoid.WGS84.geocentricSurfaceNormal(G,H);var U=R.signedAngleBetween,V=U(N.direction,H,N.right)-Math.PI;return v.Math.convertLongitudeRange(V)}},R.bottomFovRay=function(A){var N=A.camera,I=N.frustum.fovy/2,G=N.direction,W=v.Quaternion.fromAxisAngle(N.right,I),Z=v.Matrix3.fromQuaternion(W),H=new v.Cartesian3;return v.Matrix3.multiplyByVector(Z,G,H),new v.Ray(N.position,H)},R.signedAngleBetween=function(A,N,I){var G=new v.Cartesian3,W=new v.Cartesian3,Z=new v.Cartesian3;v.Cartesian3.normalize(A,G),v.Cartesian3.normalize(N,W),v.Cartesian3.cross(G,W,Z);var H=v.Cartesian3.dot(G,W),U=v.Cartesian3.magnitude(Z),V=v.Cartesian3.dot(I,Z),Y=Math.atan2(U,H);return V>=0?Y:-Y},R.computeAngleToZenith=function(A,N){var I=A.camera,G=I.frustum.fovy/2,W=R.bottomFovRay(A),Z=v.Cartesian3.clone(W.direction);v.Cartesian3.negate(Z,Z);var H=new v.Cartesian3;v.Ellipsoid.WGS84.geocentricSurfaceNormal(N,H);var U=new v.Cartesian3;v.Cartesian3.negate(I.right,U);var V=R.signedAngleBetween(H,Z,U);return V+G},R.extentToRectangle=function(A,N){if(A&&N){var I=(0,l.transformExtent)(A,N,"EPSG:4326");return v.Rectangle.fromDegrees(I[0],I[1],I[2],I[3])}else return null},R.sourceToImageryProvider=function(A,N,I,G){var W=this,Z=N.get("olcs_skip");if(Z)return null;var H,U=null;if(N instanceof s.default&&N.getUrl()&&N.getImageLoadFunction()===n.defaultImageLoadFunction){var V={"olcs.proxy":N.get("olcs.proxy"),"olcs.extent":N.get("olcs.extent"),"olcs.projection":N.get("olcs.projection"),"olcs.imagesource":N};N=new a.default({url:N.getUrl(),attributions:N.getAttributions(),projection:N.getProjection(),params:N.getParams()}),N.setProperties(V)}if(N instanceof c.default){var Y=g.default.getSourceProjection(N);if(!Y&&(Y=I),R.isCesiumProjection(Y))if(N.layer_)U=new u.default(A,N,I);else{var $=N.key_,K=$.match(/LAYERS-(\S*)\/VERSION-1.1.0/)[1],J=N.getUrls()[0],Q={};Q.url=J,Q.parameters={format:"image/png",transparent:"true"},Q.layers=K,U=new v.WebMapServiceImageryProvider(Q)}else return null}else if(N instanceof r.default){var et=g.default.getSourceProjection(N);if(!et&&(et=I),R.isCesiumProjection(et))U=new v.SingleTileImageryProvider({url:N.getUrl(),rectangle:new v.Rectangle.fromDegrees(N.getImageExtent()[0],N.getImageExtent()[1],N.getImageExtent()[2],N.getImageExtent()[3])});else return null}else if(N instanceof i.default){var nt=g.default.getSourceProjection(N);if(!nt&&(nt=I),Z===![]){var st,ut=nt.getCode().split(":")[1],rt=(0,L.default)(st=N.urls).call(st,function(Tt){return(0,f.default)(this,W),Tt.replace(ut,"3857")}.bind(this)),ht=G.getExtent(),Pt=R.extentToRectangle(ht,nt),wt=N.get("olcs_minimumLevel"),Mt=N.getAttributions(),Ft=G.getStyleFunction(),Dt;if(ht&&Mt){var Rt=(0,p.getCenter)(ht);Dt=B(Mt,0,Rt,ht)[0]}return U=new d.default({credit:Dt,rectangle:Pt,minimumLevel:wt,styleFunction:Ft,urls:rt}),U}return null}else return null;return U},R.tileLayerToImageryLayer=function(A,N,I){if(!(N instanceof o.default)&&!(N instanceof h.default)&&!(N instanceof y.default))return null;var G=N.getSource(),W=G.get("olcs_provider");if(!W&&(W=this.sourceToImageryProvider(A,G,I,N)),!W)return null;var Z={},H=N.get("olcs.extent"),U=H||N.getExtent();U&&(Z.rectangle=R.extentToRectangle(U,I));var V=new v.ImageryLayer(W,Z);return V},R.updateCesiumLayerProperties=function(A,N){var I,G=this,W=1,Z=!![];(0,T.default)(I=[A.layer]).call(I,A.parents).forEach(function(H){(0,f.default)(this,G);var U=H.getOpacity();U!==void 0&&(W*=U);var V=H.getVisible();V!==void 0&&(Z&=V)}.bind(this)),N.alpha=W,N.show=Z},R.ol4326CoordinateToCesiumCartesian=function(A){var N=A;if(A[0]>180){var I=new v.WebMercatorProjection,G=N.length>2?I.unproject({x:N[0],y:N[1],z:N[2]}):I.unproject({x:N[0],y:N[1]}),W=v.Cartographic.toCartesian(G);return W}return N.length>2?v.Cartesian3.fromDegrees(N[0],N[1],N[2]):v.Cartesian3.fromDegrees(N[0],N[1])},R.ol4326CoordinateArrayToCsCartesians=function(A){E.assert(A!==null);for(var N=R.ol4326CoordinateToCesiumCartesian,I=[],G=0;G<A.length;++G)I.push(N(A[G]));return I},R.olGeometryCloneTo4326=function(A,N){E.assert(N);var I=(0,l.get)("EPSG:4326"),G=(0,l.get)(N);if(G!==I){var W=A.getProperties();A=A.clone(),A.transform(G,I),A.setProperties(W)}return A},R.convertColorToCesium=function(A){if(A=A||"black",Array.isArray(A))return new v.Color(v.Color.byteToFloat(A[0]),v.Color.byteToFloat(A[1]),v.Color.byteToFloat(A[2]),A[3]);if(typeof A=="string")return v.Color.fromCssColorString(A);if(A instanceof CanvasPattern||A instanceof CanvasGradient){var N=document.createElement("canvas"),I=N.getContext("2d");return N.width=N.height=256,I.fillStyle=A,I.fillRect(0,0,N.width,N.height),new v.ImageMaterialProperty({image:N})}E.assert(![],"impossible")},R.convertUrlToCesium=function(A){var N="",I=/\{(\d|[a-z])-(\d|[a-z])\}/,G=I.exec(A);if(G){A=A.replace(I,"{s}");var W=G[1].charCodeAt(0),Z=G[2].charCodeAt(0),H;for(H=W;H<=Z;++H)N+=String.fromCharCode(H)}return{url:A,subdomains:N}},R.resetToNorthZenith=function(A,N){var I=this;return new C.default(function(G,W){var Z=this;(0,f.default)(this,I);var H=N.camera,U=R.pickBottomPoint(N);if(!U){W("Could not get bottom pivot");return}var V=A.getView().getRotation();if(V===void 0){W("The view is not initialized");return}var Y=R.computeAngleToZenith(N,U);R.setHeadingUsingBottomCenter(N,V,U);var $=v.Matrix4.fromTranslation(U),K=H.right,J={callback:function(){(0,f.default)(this,Z);var et=A.getView();R.normalizeView(et),G()}.bind(this)};R.rotateAroundAxis(H,-Y,K,$,J)}.bind(this))},R.rotateAroundBottomCenter=function(A,N){var I=this;return new C.default(function(G,W){(0,f.default)(this,I);var Z=A.camera,H=R.pickBottomPoint(A);if(!H){W("could not get bottom pivot");return}var U={callback:G},V=v.Matrix4.fromTranslation(H),Y=Z.right,$=R.rotateAroundAxis;$(Z,-N,Y,V,U)}.bind(this))},R.normalizeView=function(A){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=A.getResolution();A.setRotation(N),A.constrainResolution?A.setResolution(A.constrainResolution(I)):A.setResolution(A.getConstrainedResolution(I))},R.isCesiumProjection=function(A){var N=A===(0,l.get)("EPSG:3857"),I=A===(0,l.get)("EPSG:4326"),G=A===(0,l.get)("EPSG:4490");return N||I||G};function B(A,N,I,G){var W=this,Z={viewState:{zoom:N,center:I},extent:G};if(!A)return[];var H=A(Z);return!Array.isArray(H)&&(H=[H]),(0,L.default)(H).call(H,function(U){return(0,f.default)(this,W),new v.Credit(U,!![])}.bind(this))}var k=R;z.default=k;function P(A,N,I,G){var W=I.canvas,Z=I.camera,H=Z.frustum.fovy;E.assert(!isNaN(H));var U=G.getMetersPerUnit(),V=A*W.clientHeight,Y=Math.cos(Math.abs(N)),$=V*U*Y,K=$/2/Math.tan(H/2);return K}function D(A,N,I,G){var W=I.canvas,Z=I.camera,H=Z.frustum.fovy;E.assert(!isNaN(H));var U=G.getMetersPerUnit(),V=2*A*Math.tan(H/2),Y=Math.cos(Math.abs(N)),$=V/U/Y,K=$/W.clientHeight;return K}},338938:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=M(e(99245)),L=M(e(342579)),T=M(e(122777)),C=M(e(42762)),f=r(e(187647)),v=e(972233),m=M(e(266342)),o=e(365094),h=e(405015);function l(a){if(typeof F!="function")return null;var i=new F,n=new F;return(l=function(g){return g?n:i})(a)}function r(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||E(a)!=="object"&&typeof a!="function")return{default:a};var n=l(i);if(n&&n.has(a))return n.get(a);var u={},g=Object.defineProperty&&O;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?O(a,d):null;y&&(y.get||y.set)?Object.defineProperty(u,d,y):u[d]=a[d]}return u.default=a,n&&n.set(a,u),u}var s=function(){var a=new o.Tile({projection:"EPSG:3857",wrapX:!![]}),i=a.getTileCoordForTileUrlFunction([6,-31,22]);return i&&i[1]===33&&i[2]===22}(),c=function(){function a(i,n,u){var g=this;(0,T.default)(this,a),this.source_=n,this.projection_=null,this.fallbackProj_=u||null,this.ready_=![],this.tilingScheme_=null,this.rectangle_=null,this.map_=i,this.shouldRequestNextLevel=![];var d=this.source_.get("olcs.proxy");d&&(typeof d=="function"?this.proxy_={getURL:d}:typeof d=="string"&&(this.proxy_=new f.DefaultProxy(d))),this.errorEvent_=new f.Event,this.emptyCanvas_=document.createElement("canvas"),this.emptyCanvas_.width=1,this.emptyCanvas_.height=1,this.source_.on("change",function(y){(0,L.default)(this,g),this.handleSourceChanged_()}.bind(this)),this.handleSourceChanged_()}return(0,C.default)(a,[{key:"handleSourceChanged_",value:function(n){var u=this;if(!this.ready_&&this.source_.getState()=="ready"){this.projection_=m.default.getSourceProjection(this.source_)||this.fallbackProj_;var g={numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1};if(this.source_.tileGrid!==null&&this.source_.tileGrid.forEachTileCoord(this.projection_.getExtent(),0,function(d){(0,L.default)(this,u);var y=(0,b.default)(d,3),p=y[0],w=y[1],S=y[2];g.numberOfLevelZeroTilesX=w+1,g.numberOfLevelZeroTilesY=S+1}.bind(this)),this.projection_==(0,v.get)("EPSG:4326"))this.shouldRequestNextLevel=g.numberOfLevelZeroTilesX===1&&g.numberOfLevelZeroTilesY===1,this.tilingScheme_=new f.GeographicTilingScheme(g);else if(this.projection_==(0,v.get)("EPSG:3857"))this.shouldRequestNextLevel=![],this.tilingScheme_=new f.WebMercatorTilingScheme(g);else return;this.rectangle_=this.tilingScheme_.rectangle,this.ready_=!![]}}},{key:"getTileCredits",value:function(n,u,g){var d=this.source_.getAttributions();if(!d)return[];var y=this.map_.getView().calculateExtent(this.map_.getSize()),p=this.map_.getView().getCenter(),w=this.shouldRequestNextLevel?g+1:g;return(0,h.attributionsFunctionToCredits)(d,w,p,y)}},{key:"requestImage",value:function(n,u,g){var d=this.source_.getTileUrlFunction();if(d&&this.projection_){var y=this.shouldRequestNextLevel?g+1:g,p=u;!s&&(p=-u-1);var w=d.call(this.source_,[y,n,p],1,this.projection_);return this.proxy_&&(w=this.proxy_.getURL(w)),w?f.ImageryProvider.loadImage(this,w):this.emptyCanvas_}else return this.emptyCanvas_}}]),a}();Object.defineProperties(c.prototype,{ready:{get:function(){return this.ready_}},rectangle:{get:function(){return this.rectangle_}},tileWidth:{get:function(){var i=this.source_.getTileGrid();return i?Array.isArray(i.getTileSize(0))?i.getTileSize(0)[0]:i.getTileSize(0):256}},tileHeight:{get:function(){var i=this.source_.getTileGrid();return i?Array.isArray(i.getTileSize(0))?i.getTileSize(0)[1]:i.getTileSize(0):256}},maximumLevel:{get:function(){var i=this.source_.getTileGrid();return i?i.getMaxZoom():18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this.tilingScheme_}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this.errorEvent_}},proxy:{get:function(){return this.proxy_}},hasAlphaChannel:{get:function(){return!![]}},pickFeatures:{get:function(){}}});var x=c;z.default=x},473635:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=M(e(122777)),L=M(e(42762)),T=v(e(187647)),C=e(407165);function f(h){if(typeof F!="function")return null;var l=new F,r=new F;return(f=function(c){return c?r:l})(h)}function v(h,l){if(!l&&h&&h.__esModule)return h;if(h===null||E(h)!=="object"&&typeof h!="function")return{default:h};var r=f(l);if(r&&r.has(h))return r.get(h);var s={},c=Object.defineProperty&&O;for(var x in h)if(x!=="default"&&Object.prototype.hasOwnProperty.call(h,x)){var a=c?O(h,x):null;a&&(a.get||a.set)?Object.defineProperty(s,x,a):s[x]=h[x]}return s.default=h,r&&r.set(h,s),s}var m=function(){function h(l,r){(0,b.default)(this,h);var s=new T.BillboardCollection({scene:r}),c=new T.PrimitiveCollection;this.olListenKeys=[],this.rootCollection_=new T.PrimitiveCollection,this.context={projection:l,billboards:s,featureToCesiumMap:{},primitives:c},this.rootCollection_.add(s),this.rootCollection_.add(c)}return(0,L.default)(h,[{key:"destroy",value:function(){this.olListenKeys.forEach(C.unByKey),this.olListenKeys.length=0}},{key:"getRootPrimitive",value:function(){return this.rootCollection_}}]),h}(),o=m;z.default=o},523030:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.toDegrees=e,z.toRadians=E;function e(F){return F*180/Math.PI}function E(F){return F*Math.PI/180}},266342:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0,z.getUid=h,z.isGroundPolylinePrimitiveSupported=c,z.olcsListen=m,z.removeChildren=s,z.removeNode=r,z.stableSort=l;var b=M(e(342579)),L=M(e(728954)),T=f(e(187647));function C(a){if(typeof F!="function")return null;var i=new F,n=new F;return(C=function(g){return g?n:i})(a)}function f(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||E(a)!=="object"&&typeof a!="function")return{default:a};var n=C(i);if(n&&n.has(a))return n.get(a);var u={},g=Object.defineProperty&&O;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?O(a,d):null;y&&(y.get||y.set)?Object.defineProperty(u,d,y):u[d]=a[d]}return u.default=a,n&&n.set(a,u),u}var v={};v.obj=function(a){return a},v.supportsImageRenderingPixelatedResult_=void 0,v.imageRenderingValueResult_=void 0,v.supportsImageRenderingPixelated=function(){if(v.supportsImageRenderingPixelatedResult_===void 0){var a=document.createElement("canvas");a.setAttribute("style","image-rendering: -moz-crisp-edges; image-rendering: pixelated;");var i=a.style.imageRendering;v.supportsImageRenderingPixelatedResult_=!!i,v.supportsImageRenderingPixelatedResult_&&(v.imageRenderingValueResult_=i)}return v.supportsImageRenderingPixelatedResult_},v.imageRenderingValue=function(){return v.supportsImageRenderingPixelated(),v.imageRenderingValueResult_||""},v.getSourceProjection=function(a){return a.get("olcs.projection")||a.getProjection()};function m(a,i,n){return a.on(i,n)}var o=0;function h(a){return a.olcs_uid||(a.olcs_uid=++o)}function l(a,i){for(var n=this,u=a.length,g=Array(a.length),d=0;d<u;d++)g[d]={index:d,value:a[d]};(0,L.default)(g).call(g,function(p,w){return(0,b.default)(this,n),i(p.value,w.value)||p.index-w.index}.bind(this));for(var y=0;y<a.length;y++)a[y]=g[y].value}function r(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function s(a){for(;a.lastChild;)a.removeChild(a.lastChild)}function c(a){var i=T.GroundPolylinePrimitive;return i&&i.isSupported(a)}var x=v;z.default=x},696789:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DivPoint=void 0;var b=M(e(122777)),L=M(e(42762)),T=o(e(187647)),C=M(e(202692)),f=e(792672),v=e(936161);function m(l){if(typeof F!="function")return null;var r=new F,s=new F;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||E(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&O;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?O(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var h=function(){function l(r,s){(0,b.default)(this,l),this.viewer=r,this.position=null,this.position_original=s.position,this.anchor=s.anchor,this.offset=s.offset,(s.visibleDistanceMin||s.visibleDistanceMax)&&(s.distanceDisplayCondition=new T.DistanceDisplayCondition(s.visibleDistanceMin||0,s.visibleDistanceMax||1e5)),this._distanceDisplayCondition=s.distanceDisplayCondition,this._heightReference=T.defaultValue(s.heightReference,T.HeightReference.NONE),this.opts=s,this._visible=!![],this._depthTest=!![],this.$view=(0,C.default)("<div></div>"),this.$view.append(s.html),this.$view.css({position:"absolute",left:"0",top:"0"}),this.$view.attr("id",s.id||"customDom"),this.$view.appendTo("#"+r._container.id);var c=this;(s.click||s.popup)&&this.$view.click(function(x){s.popup&&r.shine.popup.show(s,c.position),s.click&&s.click(s,c,x)}),s.tooltip&&this.$view.hover(function(){r.shine.tooltip.show(s,c.position)},function(){r.shine.tooltip.close()}),this.$view.on("mousewheel",function(){}),r.scene.postRender.addEventListener(this.updateViewPoint,this)}return(0,L.default)(l,[{key:"dom",get:function(){return this.$view}},{key:"visible",get:function(){return this._visible},set:function(s){this._visible=s,s?this.$view.show():this.$view.hide()}},{key:"depthTest",get:function(){return this._depthTest},set:function(s){this._depthTest=s}},{key:"getPositionValue",value:function(s){if(!s)return s;var c;return s instanceof T.Cartesian3?c=s:typeof s.getValue=="function"?c=s.getValue(this.viewer.clock.currentTime):s._value&&s._value instanceof T.Cartesian3&&(c=s._value),c}},{key:"updateViewPoint",value:function(){if(this._visible){if(!this.position_original){this.$view.hide();return}this._heightReference===T.HeightReference.CLAMP_TO_GROUND?this.position=(0,f.updateHeightForClampToGround)(this.viewer,this.position_original):this._heightReference===T.HeightReference.RELATIVE_TO_GROUND?this.position=(0,f.updateHeightForClampToGround)(this.viewer,this.position_original,!![]):this.position=this.getPositionValue(this.position_original);var s=this.viewer.scene,c=T.SceneTransforms.wgs84ToWindowCoordinates(s,this.position),x;if(s.mode===T.SceneMode.SCENE3D?x=T.Cartesian3.distance(this.position,this.viewer.camera.position):x=this.viewer.camera.positionCartographic.height,c==null||this._distanceDisplayCondition&&(this._distanceDisplayCondition.near>x||this._distanceDisplayCondition.far<x)){this.$view.is(":visible")&&this.$view.hide();return}if(this._depthTest&&s.mode===T.SceneMode.SCENE3D){var a=s.camera.getPickRay(c),i=s.globe.pick(a,s);if(i){var n=T.Cartesian3.distance(this.position,i);if(n>1e3*1e3){this.$view.is(":visible")&&this.$view.hide();return}}}var u=this.$view.height(),g=this.$view.width(),d=c.x,y=c.y-u;this.anchor?(this.anchor[0]=="center"?d-=g/2:d+=this.anchor[0],y+=this.anchor[1]):d-=g/2,this.offset&&(d+=this.offset[0],y+=this.offset[1]),!this.$view.is(":visible")&&this.$view.show();var p=1;if(this.opts.scaleByDistance){var w=this.opts.scaleByDistance;x<=w.near?p=w.nearValue:x>w.near&&x<w.far?p=w.nearValue+(w.farValue-w.nearValue)*(x-w.near)/(w.far-w.near):p=w.farValue}var S="matrix("+p+",0,0,"+p+","+d+","+y+")",R="left bottom 0";this.$view.css({transform:S,"transform-origin":R,"-ms-transform":S,"-ms-transform-origin":R,"-webkit-transform":S,"-webkit-transform-origin":R,"-moz-transform":S,"-moz-transform-origin":R,"-o-transform":S,"-o-transform-origin":R}),this.opts.postRender&&this.opts.postRender({x:d,y,height:u,width:g,distance:x})}}},{key:"setVisible",value:function(s){this._visible=s,s?this.$view.show():this.$view.hide()}},{key:"setPosition",value:function(s){this.position_original=s,this.updateViewPoint()}},{key:"setLonlat",value:function(s){this.position_original=s&&(0,v.lonlat2cartesian)(s),this.updateViewPoint()}},{key:"destroy",value:function(){this.viewer.scene.postRender.removeEventListener(this.updateViewPoint,this),this.$view.remove(),this.$view=null,this.position=null,this.anchor=null,this.viewer=null}}]),l}();z.DivPoint=h},606386:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Events=z.Evented=void 0;var b=M(e(520314)),L=M(e(669033)),T=M(e(29870)),C=e(779651),f=m(e(936161));function v(l){if(typeof F!="function")return null;var r=new F,s=new F;return(v=function(x){return x?s:r})(l)}function m(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||E(l)!=="object"&&typeof l!="function")return{default:l};var s=v(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&O;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?O(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var o={on:function(r,s,c){if((typeof r>"u"?"undefined":(0,T.default)(r))==="object")for(var x in r)r.hasOwnProperty(x)&&this._on(x,r[x],s);else{r=f.splitWords(r);for(var a=0,i=r.length;a<i;a++)this._on(r[a],s,c)}return this},off:function(r,s,c){if(!r)delete this._events;else if((typeof r>"u"?"undefined":(0,T.default)(r))==="object")for(var x in r)r.hasOwnProperty(x)&&this._off(x,r[x],s);else{r=f.splitWords(r);for(var a=0,i=r.length;a<i;a++)this._off(r[a],s,c)}return this},un:function(r,s,c){if(!r)delete this._events;else if((typeof r>"u"?"undefined":(0,T.default)(r))==="object")for(var x in r)r.hasOwnProperty(x)&&this._off(x,r[x],s);else{r=f.splitWords(r);for(var a=0,i=r.length;a<i;a++)this._off(r[a],s,c)}return this},_on:function(r,s,c){this._events=this._events||{};var x=this._events[r];!x&&(x=[],this._events[r]=x),c===this&&(c=void 0);for(var a={fn:s,ctx:c},i=x,n=0,u=i.length;n<u;n++)if(i[n].fn===s&&i[n].ctx===c)return;i.push(a)},_off:function(r,s,c){var x,a,i;if(this._events&&(x=this._events[r],!!x)){if(!s){for(a=0,i=x.length;a<i;a++)x[a].fn=f.falseFn;delete this._events[r];return}if(c===this&&(c=void 0),x)for(a=0,i=x.length;a<i;a++){var n=x[a];if(n.ctx===c&&n.fn===s){n.fn=f.falseFn,this._firingCount&&(this._events[r]=x=(0,b.default)(x).call(x)),(0,L.default)(x).call(x,a,1);return}}}},fire:function(r,s,c){if(!this.listens(r,c))return this;var x=f.extend({},s,{type:r,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var a=this._events[r];if(a){this._firingCount=this._firingCount+1||1;for(var i=0,n=a.length;i<n;i++){var u=a[i];u.fn.call(u.ctx||this,x)}this._firingCount--}}return c&&this._propagateEvent(x),this},listens:function(r,s){var c=this._events&&this._events[r];if(c&&c.length)return!![];if(s){for(var x in this._eventParents)if(this._eventParents.hasOwnProperty(x)&&this._eventParents[x].listens(r,s))return!![]}return![]},once:function(r,s,c){if((typeof r>"u"?"undefined":(0,T.default)(r))==="object"){for(var x in r)r.hasOwnProperty(x)&&this.once(x,r[x],s);return this}var a=f.bind(function(){this.off(r,s,c).off(r,a,c)},this);return this.on(r,s,c).on(r,a,c)},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[f.stamp(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[f.stamp(r)],this},_propagateEvent:function(r){for(var s in this._eventParents)this._eventParents.hasOwnProperty(s)&&this._eventParents[s].fire(r.type,f.extend({layer:r.target,propagatedFrom:r.target},r),!![])}};z.Events=o,o.addEventListener=o.on,o.removeEventListener=o.clearAllEventListeners=o.off,o.addOneTimeEventListener=o.once,o.fireEvent=o.fire,o.hasEventListeners=o.listens;var h=C.Class.extend(o);z.Evented=h},142795:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.EditStop=z.EditStart=z.EditRemovePoint=z.EditMovePoint=z.DrawStart=z.DrawRemovePoint=z.DrawMouseMove=z.DrawCreated=z.DrawAddPoint=void 0;var e="draw-start";z.DrawStart=e;var E="draw-add-point";z.DrawAddPoint=E;var F="draw-remove-lastpoint";z.DrawRemovePoint=F;var O="draw-mouse-move";z.DrawMouseMove=O;var M="draw-created";z.DrawCreated=M;var b="edit-start";z.EditStart=b;var L="edit-move-point";z.EditMovePoint=L;var T="edit-remove-point";z.EditRemovePoint=T;var C="edit-stop";z.EditStop=C},42038:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.handle=f,z.initQuery=v,z.quitQuery=C;var M=L(e(187647));function b(m){if(typeof F!="function")return null;var o=new F,h=new F;return(b=function(r){return r?h:o})(m)}function L(m,o){if(!o&&m&&m.__esModule)return m;if(m===null||E(m)!=="object"&&typeof m!="function")return{default:m};var h=b(o);if(h&&h.has(m))return h.get(m);var l={},r=Object.defineProperty&&O;for(var s in m)if(s!=="default"&&Object.prototype.hasOwnProperty.call(m,s)){var c=r?O(m,s):null;c&&(c.get||c.set)?Object.defineProperty(l,s,c):l[s]=m[s]}return l.default=m,h&&h.set(m,l),l}var T;function C(){}function f(){}function v(m){T=m;var o=new M.ScreenSpaceEventHandler(T.scene.canvas);o.setInputAction(function(h){var l=T.scene.pick(h.position);l&&l.content},M.defaultValue(this.popupEventType,M.ScreenSpaceEventType.MIDDLE_CLICK))}},170489:function(X,z,e){"use strict";e(23497),e(23497);var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.speedRatio=z.rotateStep=z.minPitch=z.maxPitch=z.dirStep=z.KeyboardRoam=void 0;var b=M(e(367146)),L=M(e(122777)),T=M(e(42762)),C=m(e(187647)),f=m(e(792672));function v(a){if(typeof F!="function")return null;var i=new F,n=new F;return(v=function(g){return g?n:i})(a)}function m(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||E(a)!=="object"&&typeof a!="function")return{default:a};var n=v(i);if(n&&n.has(a))return n.get(a);var u={},g=Object.defineProperty&&O;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?O(a,d):null;y&&(y.get||y.set)?Object.defineProperty(u,d,y):u[d]=a[d]}return u.default=a,n&&n.set(a,u),u}var o=150;z.speedRatio=o;var h=25;z.dirStep=h;var l=1;z.rotateStep=l;var r=.1;z.minPitch=r;var s=.95;z.maxPitch=s;var c={ENLARGE:0,NARROW:1,LEFT_ROTATE:2,RIGHT_ROTATE:3,TOP_ROTATE:4,BOTTOM_ROTATE:5},x=function(){function a(i){(0,L.default)(this,a),this.viewer=i,this.flags={moveForward:![],moveBackward:![],moveUp:![],moveDown:![],moveLeft:![],moveRight:![]},this.defaultKeyCode={moveForward:"W".charCodeAt(0),moveBackward:"S".charCodeAt(0),moveRight:"D".charCodeAt(0),moveLeft:"A".charCodeAt(0),moveUp:"Q".charCodeAt(0),moveDown:"E".charCodeAt(0),ENLARGE:"I".charCodeAt(0),NARROW:"K".charCodeAt(0),LEFT_ROTATE:"J".charCodeAt(0),RIGHT_ROTATE:"L".charCodeAt(0),TOP_ROTATE:"U".charCodeAt(0),BOTTOM_ROTATE:"O".charCodeAt(0)};var n=i.scene.canvas;n.setAttribute("tabindex","0"),n.onclick=function(){n.focus()};var u=this;document.addEventListener("keydown",function(g){if(u._enable){var d=document.activeElement.nodeName;if(!(d==="INPUT"||d==="TEXTAREA")){var y=u.getFlagForKeyCode(g.keyCode);typeof y<"u"&&((0,b.default)(u)[y]=!![])}}},![]),document.addEventListener("keyup",function(g){if(u._enable){var d=u.getFlagForKeyCode(g.keyCode);typeof d<"u"&&((0,b.default)(u)[d]=![])}},![]),this.handler=new C.ScreenSpaceEventHandler(i.scene.canvas)}return(0,T.default)(a,[{key:"bind",value:function(n){this._enable||(this._enable=!![],C.defined(n)&&(this.defaultKeyCode=n.KeyCode),this.viewer.clock.onTick.removeEventListener(this.cameraFunc,this),this.viewer.clock.onTick.addEventListener(this.cameraFunc,this))}},{key:"unbind",value:function(){this._enable&&(this._enable=![],this.viewer.clock.onTick.removeEventListener(this.cameraFunc,this))}},{key:"destroy",value:function(){this.unbind(),this.handler.destroy()}},{key:"getFlagForKeyCode",value:function(n){switch(n){case this.defaultKeyCode.moveForward:return"moveForward";case this.defaultKeyCode.moveBackward:return"moveBackward";case this.defaultKeyCode.moveRight:return"moveRight";case this.defaultKeyCode.moveLeft:return"moveLeft";case this.defaultKeyCode.moveUp:return"moveUp";case this.defaultKeyCode.moveDown:return"moveDown";case 38:this.rotateCamera(c.TOP_ROTATE);break;case 37:this.rotateCamera(c.LEFT_ROTATE);break;case 39:this.rotateCamera(c.RIGHT_ROTATE);break;case 40:this.rotateCamera(c.BOTTOM_ROTATE);break;case this.defaultKeyCode.ENLARGE:case 104:this.moveCamera(c.ENLARGE);break;case this.defaultKeyCode.NARROW:case 101:this.moveCamera(c.NARROW);break;case this.defaultKeyCode.LEFT_ROTATE:case 100:this.moveCamera(c.LEFT_ROTATE);break;case this.defaultKeyCode.RIGHT_ROTATE:case 102:this.moveCamera(c.RIGHT_ROTATE);break;case this.defaultKeyCode.TOP_ROTATE:case 103:this.moveCamera(c.TOP_ROTATE);break;case this.defaultKeyCode.BOTTOM_ROTATE:case 105:this.moveCamera(c.BOTTOM_ROTATE);break;default:break}}},{key:"moveForward",value:function(n){var u=this.viewer.camera,g=u.direction,d=C.Cartesian3.normalize(u.position,new C.Cartesian3),y=C.Cartesian3.cross(g,d,new C.Cartesian3);g=C.Cartesian3.cross(d,y,new C.Cartesian3),g=C.Cartesian3.normalize(g,g),g=C.Cartesian3.multiplyByScalar(g,n,g),u.position=C.Cartesian3.add(u.position,g,u.position)}},{key:"cameraFunc",value:function(){var n=this.viewer.camera,u=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(n.position).height,g=u/o;(0,b.default)(this).moveForward&&this.moveForward(g),(0,b.default)(this).moveBackward&&this.moveForward(-g),(0,b.default)(this).moveUp&&n.moveUp(g),(0,b.default)(this).moveDown&&n.moveDown(g),(0,b.default)(this).moveLeft&&n.moveLeft(g),(0,b.default)(this).moveRight&&n.moveRight(g)}},{key:"resetCameraPos",value:function(n){n&&(this.viewer.scene.camera.position=n.position,this.viewer.scene.camera.direction=n.direction,this.viewer.scene.camera.right=n.right,this.viewer.scene.camera.up=n.up)}},{key:"limitAngle",value:function(n,u,g){var d=C.Cartesian3.dot(n,C.Cartesian3.normalize(u,new C.Cartesian3));return g==="up"&&d<r?![]:!(g==="down"&&d>s)}},{key:"computedNewPos",value:function(n,u,g){var d=n.position,y=(0,f.getCenter)(this.viewer);if(y){var p=C.Cartesian3.fromDegrees(y.x,y.y,y.z);if(p){var w=C.Cartesian3.distance(p,d),S=w/100;S=g?S*l:S;var R={},B=new C.Ray(d,u);if(R.position=C.Ray.getPoint(B,S),R.direction=n.direction,R.right=n.right,R.up=n.up,g){var k=C.Cartesian3.normalize(C.Cartesian3.subtract(R.position,p,new C.Cartesian3),new C.Cartesian3);B=new C.Ray(p,k),R.position=C.Ray.getPoint(B,w),R.direction=C.Cartesian3.negate(k,new C.Cartesian3),R.up=C.Cartesian3.normalize(R.position,new C.Cartesian3),R.right=C.Cartesian3.cross(R.direction,R.up,new C.Cartesian3)}return R}}}},{key:"moveCamera",value:function(n){var u=this.viewer.scene.camera,g;switch(n){case c.ENLARGE:g=this.computedNewPos(u,u.direction);break;case c.NARROW:g=this.computedNewPos(u,C.Cartesian3.negate(u.direction,new C.Cartesian3));break;case c.LEFT_ROTATE:g=this.computedNewPos(u,C.Cartesian3.negate(u.right,new C.Cartesian3),!![]);break;case c.RIGHT_ROTATE:g=this.computedNewPos(u,u.right,!![]);break;case c.TOP_ROTATE:{var d=this.limitAngle(C.clone(u.up),C.clone(u.position),"up");if(!d)return;g=this.computedNewPos(u,C.clone(u.up),!![]);break}case c.BOTTOM_ROTATE:{var y=this.limitAngle(C.clone(u.up),C.clone(u.position),"down");if(!y)return;g=this.computedNewPos(u,C.Cartesian3.negate(u.up,new C.Cartesian3),!![]);break}}g&&this.resetCameraPos(g)}},{key:"rotateCamera",value:function(n){var u=[0,0],g=this.viewer.scene.canvas.clientWidth,d=this.viewer.scene.canvas.clientHeight,y=(g+d)/h;switch(n){case c.LEFT_ROTATE:u=[-y*g/d,0];break;case c.RIGHT_ROTATE:u=[y*g/d,0];break;case c.TOP_ROTATE:u=[0,y];break;case c.BOTTOM_ROTATE:u=[0,-y];break;default:return}var p=u[0]/g,w=u[1]/d,S=.05,R=this.viewer.camera;R.lookRight(p*S),R.lookUp(w*S);var B=R.direction,k=C.Cartesian3.normalize(R.position,new C.Cartesian3),P=C.Cartesian3.cross(B,k,new C.Cartesian3);k=C.Cartesian3.cross(P,B,new C.Cartesian3),R.up=k,R.right=P}},{key:"enable",get:function(){return this._enable},set:function(n){n?this.unbind():this.bind()}}]),a}();z.KeyboardRoam=x},395512:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Location=void 0;var b=M(e(122777)),L=M(e(42762)),T=o(e(187647)),C=M(e(202692)),f=o(e(792672)),v=o(e(580823));function m(l){if(typeof F!="function")return null;var r=new F,s=new F;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||E(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&O;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?O(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var h=function(){function l(r,s){(0,b.default)(this,l),this.viewer=r,this.options=s,this.containerid=r._container.id+"_location_shine_jwd",this.locationFormat=s.format||"<div>\u89C6\u9AD8\uFF1A{height}\u7C73</div><div>\u4FEF\u4EF0\u89D2\uFF1A{pitch}\u5EA6</div><div>\u65B9\u5411\uFF1A{heading}\u5EA6</div><div>\u6D77\u62D4\uFF1A{z}\u7C73</div><div>\u7EAC\u5EA6:{y}</div><div>\u7ECF\u5EA6:{x}</div>",this.inhtml='<div id="'+this.containerid+'"  class="location-bar animation-slide-bottom no-print" ></div>',(0,C.default)("#"+r._container.id).prepend(this.inhtml),s.style?(0,C.default)("#"+this.containerid).css(s.style):(0,C.default)("#"+this.containerid).css({left:r.animation?"170px":"0",right:"0",bottom:r.timeline?"25px":"0"}),this.locationData={},this.locationData.height=f.formatNum(r.camera.positionCartographic.height,1),this.locationData.heading=f.formatNum(T.Math.toDegrees(r.camera.heading),0),this.locationData.pitch=f.formatNum(T.Math.toDegrees(r.camera.pitch),0),this.locationData.screenjd=f.formatNum(T.Math.toDegrees(this.viewer.camera.positionCartographic.longitude),4),this.locationData.screenwd=f.formatNum(T.Math.toDegrees(this.viewer.camera.positionCartographic.latitude),4),r.scene.camera.changed.addEventListener(this.updaeCamera,this)}return(0,L.default)(l,[{key:"updateData",value:function(s){var c=f.getCurrentMousePosition(this.viewer.scene,s.endPosition);if(c){var x=T.Cartographic.fromCartesian(c);this.locationData.z=f.formatNum(x.height/this.viewer.scene.terrainExaggeration,1);var a=T.Math.toDegrees(x.longitude),i=T.Math.toDegrees(x.latitude);switch(this.options.crs){default:{var n=this.options.hasOwnProperty("toFixed")?this.options.toFixed:6;this.locationData.x=f.formatNum(a,n),this.locationData.y=f.formatNum(i,n);break}case"degree":this.locationData.x=v.formatDegree(a),this.locationData.y=v.formatDegree(i);break;case"project":{var u=this.options.hasOwnProperty("toFixed")?this.options.toFixed:0;this.locationData.x=f.formatNum(c.x,u),this.locationData.y=f.formatNum(c.y,u);break}case"wgs":{var g=this.options.hasOwnProperty("toFixed")?this.options.toFixed:6,d=this.viewer.shine.point2wgs({x:a,y:i});this.locationData.x=f.formatNum(d.x,g),this.locationData.y=f.formatNum(d.y,g);break}case"wgs-degree":{var y=this.viewer.shine.point2wgs({x:a,y:i});this.locationData.x=v.formatDegree(y.x),this.locationData.y=v.formatDegree(y.y);break}}var p;typeof this.locationFormat=="function"?p=this.locationFormat(this.locationData):p=v.template(this.locationFormat,this.locationData),(0,C.default)("#"+this.containerid).html(p)}}},{key:"updaeCamera",value:function(){this.locationData.height=f.formatNum(this.viewer.camera.positionCartographic.height,1),this.locationData.heading=f.formatNum(T.Math.toDegrees(this.viewer.camera.heading),0),this.locationData.pitch=f.formatNum(T.Math.toDegrees(this.viewer.camera.pitch),0),this.locationData.screenjd=f.formatNum(T.Math.toDegrees(this.viewer.camera.positionCartographic.longitude),4),this.locationData.screenwd=f.formatNum(T.Math.toDegrees(this.viewer.camera.positionCartographic.latitude),4),this.viewer.shine.popup;var s;typeof this.locationFormat=="function"?s=this.locationFormat(this.locationData):s=v.template(this.locationFormat,this.locationData),(0,C.default)("#"+this.containerid).html(s)}},{key:"destroy",value:function(){this.viewer.scene.camera.changed.removeEventListener(this.updaeCamera,this),this.handler&&(this.handler.destroy(),delete this.handler),(0,C.default)("#"+this.containerid).remove()}}]),l}();z.Location=h},171746:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393);Object.defineProperty(z,"__esModule",{value:!![]}),z.computedOffsetData=x,z.getHeadingPitchRollByMatrix=v,z.getHeadingPitchRollByMatrixOld=m,z.getHeadingPitchRollByOrientation=f,z.getHeadingPitchRollForLine=l,z.getOffsetLine=c,z.getPositionTranslation=s,z.getRotateCenterPoint=r;var M=L(e(187647));function b(a){if(typeof F!="function")return null;var i=new F,n=new F;return(b=function(g){return g?n:i})(a)}function L(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||E(a)!=="object"&&typeof a!="function")return{default:a};var n=b(i);if(n&&n.has(a))return n.get(a);var u={},g=Object.defineProperty&&O;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?O(a,d):null;y&&(y.get||y.set)?Object.defineProperty(u,d,y):u[d]=a[d]}return u.default=a,n&&n.set(a,u),u}var T=new M.Matrix3,C=new M.Matrix4;function f(a,i,n,u){if(!M.defined(i)||!M.defined(a))return new M.HeadingPitchRoll;var g=M.Matrix4.fromRotationTranslation(M.Matrix3.fromQuaternion(i,T),a,C);return v(g,n,u)}function v(a,i,n,u){return M.Transforms.fixedFrameToHeadingPitchRoll(a,i,n,u)}function m(a,i,n,u){u=u||M.Transforms.eastNorthUpToFixedFrame;var g=u(a,n,new M.Matrix4),d=M.Matrix4.multiply(M.Matrix4.inverse(g,new M.Matrix4),i,new M.Matrix4),y=M.Matrix4.getMatrix3(d,new M.Matrix3),p=M.Quaternion.fromRotationMatrix(y);return M.HeadingPitchRoll.fromQuaternion(p)}var o=new M.Cartesian3;C=new M.Matrix4;var h=new M.Matrix3;function l(a,i,n,u){n=n||M.Ellipsoid.WGS84;var g=M.Cartesian3.normalize(M.Cartesian3.subtract(i,a,o),o);M.Transforms.rotationMatrixFromPositionVelocity(a,g,n,h);var d=M.Matrix4.fromRotationTranslation(h,a,C);return M.Matrix4.multiplyTransformation(d,M.Axis.Z_UP_TO_X_UP,d),v(d,n,u)}function r(a,i,n){var u=M.Cartographic.fromCartesian(a);u.height=-1e5;var g=M.Cartographic.toCartesian(u),d=M.Cartesian3.normalize(M.Cartesian3.subtract(g,a,new M.Cartesian3),new M.Cartesian3),y=M.Quaternion.fromAxisAngle(d,M.Math.toRadians(n)),p=M.Matrix3.fromQuaternion(y),w=M.Matrix4.fromRotationTranslation(p),S=M.Cartesian3.subtract(i,a,new M.Cartesian3),R=M.Matrix4.multiplyByPoint(w,S,new M.Cartesian3);return M.Cartesian3.add(R,a,new M.Cartesian3)}function s(a,i,n,u,g){n=n||0,u=u||"z",g=g||M.Transforms.eastNorthUpToFixedFrame;var d=M.Math.toRadians(-n);u="UNIT_"+u.toUpperCase();var y=M.Quaternion.fromAxisAngle(M.Cartesian3[u],d),p=M.Matrix3.fromQuaternion(y),w=new M.Cartesian3(i.x,i.y,i.z),S=M.Matrix4.fromRotationTranslation(p,M.Cartesian3.ZERO);M.Matrix4.multiplyByTranslation(S,w,S);var R=M.Ellipsoid.WGS84.cartographicToCartesian(M.Cartographic.fromCartesian(a)),B=g(R);M.Matrix4.multiplyTransformation(B,S,S);var k=new M.Cartesian3;return M.Matrix4.getTranslation(S,k),k}function c(a,i){for(var n=[],u=1;u<a.length;u++){var g=a[u-1],d=a[u],y=M.Cartesian3.subtract(g,d,new M.Cartesian3),p=M.Cartesian3.cross(g,y,new M.Cartesian3),w=x(g,p,i*1e3),S=x(d,p,i*1e3);u===1&&n.push(w),n.push(S)}return n}function x(a,i,n){var u=new M.Ray(a,i);return M.Ray.getPoint(u,n,new M.Cartesian3)}},74913:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.MouseZoomStyle=void 0;var b=f(e(187647)),L=M(e(202692)),T=e(792672);function C(h){if(typeof F!="function")return null;var l=new F,r=new F;return(C=function(c){return c?r:l})(h)}function f(h,l){if(!l&&h&&h.__esModule)return h;if(h===null||E(h)!=="object"&&typeof h!="function")return{default:h};var r=C(l);if(r&&r.has(h))return r.get(h);var s={},c=Object.defineProperty&&O;for(var x in h)if(x!=="default"&&Object.prototype.hasOwnProperty.call(h,x)){var a=c?O(h,x):null;a&&(a.get||a.set)?Object.defineProperty(s,x,a):s[x]=h[x]}return s.default=h,r&&r.set(h,s),s}var v=function(){function h(l,r){for(var s=0;s<r.length;s++){var c=r[s];c.enumerable=c.enumerable||![],c.configurable=!![],"value"in c&&(c.writable=!![]),Object.defineProperty(l,c.key,c)}}return function(l,r,s){return r&&h(l.prototype,r),s&&h(l,s),l}}();function m(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function(){function h(l,r){m(this,h),this.viewer=l,this.options=r;var s=l._container.id+"-mousezoom";this.containerid=s,(0,L.default)("#"+l._container.id).append('<div id="'+this.containerid+'" class="cesium-mousezoom"><div class="zoomimg"/></div>');var c=-1,x=new b.ScreenSpaceEventHandler(this.viewer.scene.canvas);x.setInputAction(function(){(0,L.default)("#"+s).addClass("cesium-mousezoom-visible"),clearTimeout(c),c=setTimeout(function(){(0,L.default)("#"+s).removeClass("cesium-mousezoom-visible")},200)},b.ScreenSpaceEventType.WHEEL),x.setInputAction(function(a){var i=(0,T.getCurrentMousePosition)(l.scene,a.position);i&&(l.camera.positionCartographic.height>l.scene.screenSpaceCameraController.minimumCollisionTerrainHeight||(x.removeInputAction(b.ScreenSpaceEventType.MOUSE_MOVE),clearTimeout(c),(0,L.default)("#"+s).css({top:a.position.y+"px",left:a.position.x+"px"}),(0,L.default)("#"+s).addClass("cesium-mousezoom-visible")))},b.ScreenSpaceEventType.MIDDLE_DOWN),x.setInputAction(function(){(0,L.default)("#"+s).removeClass("cesium-mousezoom-visible"),x.setInputAction(function(a){(0,L.default)("#"+s).css({top:a.endPosition.y+"px",left:a.endPosition.x+"px"})},b.ScreenSpaceEventType.MOUSE_MOVE)},b.ScreenSpaceEventType.MIDDLE_UP),this.handler=x}return v(h,[{key:"destroy",value:function(){this.handler&&(this.handler.destroy(),delete this.handler),(0,L.default)("#"+this.containerid).remove()}}]),h}();z.MouseZoomStyle=o},194777:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.wgs2gcj=z.wgs2bd=z.mct2jwd=z.jwd2mct=z.gcj2wgs=z.gcj2bd=z.bd2wgs=z.bd2gcj=void 0;var F=E(e(342579)),O=void 0,M=3.141592653589793*3e3/180,b=3.141592653589793,L=6378245,T=.006693421622965943,C=function(i,n){(0,F.default)(this,O);var u=-100+2*i+3*n+.2*n*n+.1*i*n+.2*Math.sqrt(Math.abs(i));return u+=(20*Math.sin(6*i*b)+20*Math.sin(2*i*b))*2/3,u+=(20*Math.sin(n*b)+40*Math.sin(n/3*b))*2/3,u+=(160*Math.sin(n/12*b)+320*Math.sin(n*b/30))*2/3,u}.bind(void 0),f=function(i,n){(0,F.default)(this,O);var u=300+i+2*n+.1*i*i+.1*i*n+.1*Math.sqrt(Math.abs(i));return u+=(20*Math.sin(6*i*b)+20*Math.sin(2*i*b))*2/3,u+=(20*Math.sin(i*b)+40*Math.sin(i/3*b))*2/3,u+=(150*Math.sin(i/12*b)+300*Math.sin(i/30*b))*2/3,u}.bind(void 0),v=function(i,n){return(0,F.default)(this,O),i<72.004||i>137.8347||n<.8293||n>55.8271||![]}.bind(void 0),m=function(i){(0,F.default)(this,O);var n=Number(i[0]),u=Number(i[1]),g=3.141592653589793*3e3/180,d=n-.0065,y=u-.006,p=Math.sqrt(d*d+y*y)-2e-5*Math.sin(y*g),w=Math.atan2(y,d)-3e-6*Math.cos(d*g),S=p*Math.cos(w),R=p*Math.sin(w);return S=Number(S.toFixed(6)),R=Number(R.toFixed(6)),[S,R]}.bind(void 0);z.bd2gcj=m;var o=function(i){(0,F.default)(this,O);var n=Number(i[0]),u=Number(i[1]),g=Math.sqrt(n*n+u*u)+2e-5*Math.sin(u*M),d=Math.atan2(u,n)+3e-6*Math.cos(n*M),y=g*Math.cos(d)+.0065,p=g*Math.sin(d)+.006;return y=Number(y.toFixed(6)),p=Number(p.toFixed(6)),[y,p]}.bind(void 0);z.gcj2bd=o;var h=function(i){(0,F.default)(this,O);var n=Number(i[0]),u=Number(i[1]);if(v(n,u))return[n,u];var g=C(n-105,u-35),d=f(n-105,u-35),y=u/180*b,p=Math.sin(y);p=1-T*p*p;var w=Math.sqrt(p);g=g*180/(L*(1-T)/(p*w)*b),d=d*180/(L/w*Math.cos(y)*b);var S=u+g,R=n+d;return R=Number(R.toFixed(6)),S=Number(S.toFixed(6)),[R,S]}.bind(void 0);z.wgs2gcj=h;var l=function(i){(0,F.default)(this,O);var n=Number(i[0]),u=Number(i[1]);if(v(n,u))return[n,u];var g=C(n-105,u-35),d=f(n-105,u-35),y=u/180*b,p=Math.sin(y);p=1-T*p*p;var w=Math.sqrt(p);g=g*180/(L*(1-T)/(p*w)*b),d=d*180/(L/w*Math.cos(y)*b);var S=u+g,R=n+d,B=n*2-R,k=u*2-S;return B=Number(B.toFixed(6)),k=Number(k.toFixed(6)),[B,k]}.bind(void 0);z.gcj2wgs=l;var r=function(i){return(0,F.default)(this,O),l(m(i))}.bind(void 0);z.bd2wgs=r;var s=function(i){return(0,F.default)(this,O),o(h(i))}.bind(void 0);z.wgs2bd=s;var c=function(i){(0,F.default)(this,O);var n=Number(i[0]),u=Number(i[1]),g=n*2003750834e-2/180,d=Math.log(Math.tan((90+u)*b/360))/(b/180);return d=d*2003750834e-2/180,g=Number(g.toFixed(2)),d=Number(d.toFixed(2)),[g,d]}.bind(void 0);z.jwd2mct=c;var x=function(i){(0,F.default)(this,O);var n=Number(i[0]),u=Number(i[1]),g=n/2003750834e-2*180,d=u/2003750834e-2*180;return d=180/b*(2*Math.atan(Math.exp(d*b/180))-b/2),g=Number(g.toFixed(6)),d=Number(d.toFixed(6)),[g,d]}.bind(void 0);z.mct2jwd=x},385219:function(X,z,e){"use strict";var E=e(29870),F=e(787879),O=e(183393),M=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Tooltip=void 0;var b=M(e(29870)),L=M(e(122777)),T=M(e(42762)),C=h(e(187647)),f=M(e(202692)),v=h(e(792672)),m=h(e(580823));function o(r){if(typeof F!="function")return null;var s=new F,c=new F;return(o=function(a){return a?c:s})(r)}function h(r,s){if(!s&&r&&r.__esModule)return r;if(r===null||E(r)!=="object"&&typeof r!="function")return{default:r};var c=o(s);if(c&&c.has(r))return c.get(r);var x={},a=Object.defineProperty&&O;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var n=a?O(r,i):null;n&&(n.get||n.set)?Object.defineProperty(x,i,n):x[i]=r[i]}return x.default=r,c&&c.set(r,x),x}var l=function(){function r(s,c){(0,L.default)(this,r);var x=this;this.viewer=s,this.options=c||{},this._enable=!![],this.viewerid=s._container.id,this.highlighted={feature:void 0,originalColor:new C.Color},this.defaultHighlightedClr=new C.Color.fromCssColorString("#95e40c"),this.getTooltipForConfig=m.getTooltipForConfig;var a='<div id="'+this.viewerid+'tooltip-view" class="cesium-popup" style="display:none">     <div class="cesium-popup-content-wrapper  cesium-popup-background">         <div id="'+this.viewerid+'tooltip-content" class="cesium-popup-content cesium-popup-color"></div>     </div>     <div class="cesium-popup-tip-container"><div class="cesium-popup-tip  cesium-popup-background"></div></div></div> ';(0,f.default)("#"+this.viewerid).append(a),this.handler=new C.ScreenSpaceEventHandler(s.scene.canvas),this.handler.setInputAction(function(i){x.options.onMouseMove&&x.options.onMouseMove(i)},C.ScreenSpaceEventType.MOUSE_MOVE)}return(0,T.default)(r,[{key:"mouseMovingPicking",value:function(c){var x=this;if(this._enable){if((0,f.default)(".cesium-viewer").css("cursor",""),this.viewer.scene.screenSpaceCameraController.enableRotate===![]||this.viewer.scene.screenSpaceCameraController.enableTilt===![]||this.viewer.scene.screenSpaceCameraController.enableTranslate===![]){this.close();return}var a=c.endPosition,i,n;try{n=this.viewer.scene.pick(a,5,5)}catch{}if(C.defined(n)&&C.defined(n.id)&&n.id instanceof C.Entity)i=n.id;else if(C.defined(n)&&C.defined(n.tileset)&&C.defined(n.getProperty)){var u=n.tileset._config;if(u){for(var g={},d=n.getPropertyIds(),y=0;y<d.length;y++){var p=d[y];if(n.hasProperty(p)){var w=n.getProperty(p);w!=null&&(g[p]=w)}}i={id:n._batchId,tooltip:{html:(0,m.getTooltipForConfig)(u,g),anchor:u.popupAnchor||[0,-15]},attr:g,feature:n},u.noMouseMove||(u.mouseover&&(i.mouseover=u.mouseover),u.mouseover&&(i.mouseover=u.mouseover)),u.showMoveFeature&&this.highlighPick(n,u.moveFeatureColor)}}else n&&C.defined(n.primitive)&&(i=n.primitive);if(i)if((i.popup||i.click||i.cursorCSS)&&(0,f.default)(".cesium-viewer").css("cursor",i.cursorCSS||"pointer"),!i.noMouseMove&&(clearTimeout(this.lastTime),this.lastTime=setTimeout(function(){x.activateMouseOver(i,a)},20)),i.tooltip){var S=(0,v.getCurrentMousePosition)(this.viewer.scene,a);this.show(i,S,a)}else this.close();else this.close(),clearTimeout(this.lastTime),this.lastTime=setTimeout(function(){x.activateMouseOut()},20)}}},{key:"show",value:function(c,x,a){if(!(c==null||c.tooltip==null)){if(a==null&&(a=C.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,x)),a==null){this.close();return}var i=(0,f.default)("#"+this.viewerid+"tooltip-view"),n;if((0,b.default)(c.tooltip)==="object"){if(n=c.tooltip.html,c.tooltip.check&&!c.tooltip.check()){this.close();return}}else n=c.tooltip;if(typeof n=="function"&&(n=n(c,x)),!!n){(0,f.default)("#"+this.viewerid+"tooltip-content").html(n),i.show();var u=a.x-i.width()/2,g=a.y-i.height(),d=c.tooltip;d&&(typeof d>"u"?"undefined":(0,b.default)(d))==="object"&&d.anchor?(u+=d.anchor[0],g+=d.anchor[1]):g-=15,i.css("transform","translate3d("+u+"px,"+g+"px, 0)")}}}},{key:"close",value:function(){(0,f.default)("#"+this.viewerid+"tooltip-content").empty(),(0,f.default)("#"+this.viewerid+"tooltip-view").hide(),this.unHighlighPick()}},{key:"activateMouseOver",value:function(c,x){this.lastEntity!==c&&(this.activateMouseOut(),c.mouseover&&typeof c.mouseover=="function"&&c.mouseover(c,x),this.lastEntity=c)}},{key:"activateMouseOut",value:function(){this.lastEntity!=null&&(this.lastEntity.mouseout&&typeof this.lastEntity.mouseout=="function"&&this.lastEntity.mouseout(this.lastEntity),this.lastEntity=null)}},{key:"unHighlighPick",value:function(){if(C.defined(this.highlighted.feature)){try{this.highlighted.feature.color=this.highlighted.originalColor}catch{}this.highlighted.feature=void 0}}},{key:"highlighPick",value:function(c,x){this.unHighlighPick(),this.highlighted.feature=c,C.Color.clone(c.color,this.highlighted.originalColor),x&&typeof x=="string"&&(x=new C.Color.fromCssColorString(x)),c.color=x||this.defaultHighlightedClr}},{key:"destroy",value:function(){this.close(),this.handler.destroy(),delete this.handler,(0,f.default)("#"+this.viewerid+"tooltip-view").remove()}},{key:"enable",get:function(){return this._enable},set:function(c){this._enable=c,!c&&this.close()}}]),r}();z.Tooltip=l},870317:function(X,z,e){"use strict";var E=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Tooltip=M,z.message=void 0;var F=E(e(202692)),O={draw:{point:{start:"\u5355\u51FB \u5B8C\u6210\u7ED8\u5236"},polyline:{start:"\u5355\u51FB \u5F00\u59CB\u7ED8\u5236",cont:"\u5355\u51FB\u589E\u52A0\u70B9\uFF0C\u53F3\u51FB\u5220\u9664\u70B9",end:"\u5355\u51FB\u589E\u52A0\u70B9\uFF0C\u53F3\u51FB\u5220\u9664\u70B9<br/>\u53CC\u51FB\u5B8C\u6210\u7ED8\u5236",end2:"\u5355\u51FB\u5B8C\u6210\u7ED8\u5236"}},edit:{start:"\u5355\u51FB\u540E \u6FC0\u6D3B\u7F16\u8F91<br/>\u53F3\u51FB \u5220\u9664\u5BF9\u8C61",end:"\u91CA\u653E\u540E \u5B8C\u6210\u4FEE\u6539"},dragger:{def:"\u62D6\u52A8 \u4FEE\u6539\u4F4D\u7F6E",addMidPoint:"\u62D6\u52A8 \u589E\u52A0\u70B9",moveHeight:"\u62D6\u52A8 \u4FEE\u6539\u9AD8\u5EA6",editRadius:"\u62D6\u52A8 \u4FEE\u6539\u534A\u5F84",editHeading:"\u62D6\u52A8 \u4FEE\u6539\u65B9\u5411",editScale:"\u62D6\u52A8 \u4FEE\u6539\u7F29\u653E\u6BD4\u4F8B"},del:{def:"<br/>\u53F3\u51FB \u5220\u9664\u8BE5\u70B9",end:"\u53F3\u51FB \u5220\u9664\u5BF9\u8C61",min:"\u65E0\u6CD5\u5220\u9664\uFF0C\u70B9\u6570\u91CF\u4E0D\u80FD\u5C11\u4E8E"}};z.message=O;function M(b){var L=document.createElement("DIV");L.className="draw-tooltip right";var T=document.createElement("DIV");T.className="draw-tooltip-arrow",L.appendChild(T);var C=document.createElement("DIV");C.className="draw-tooltip-inner",L.appendChild(C),this._div=L,this._title=C,b.appendChild(L),(0,F.default)(".draw-tooltip").mouseover(function(){(0,F.default)(this).hide()})}M.prototype.setVisible=function(b){this._div.style.display=b?"block":"none"},M.prototype.showAt=function(b,L){b&&L?(this.setVisible(!![]),this._title.innerHTML!==L&&(this._title.innerHTML=L),this._div.style.top=b.y-this._div.clientHeight/2+"px",this._div.style.left=b.x+30+"px"):this.setVisible(![])}},609045:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(787879),M=e(183393),b=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.getWMTSCapabilities=h;var L=b(e(342579)),T=e(110563),C=b(e(202692)),f=o(e(187647)),v=e(555616);function m(l){if(typeof O!="function")return null;var r=new O,s=new O;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||F(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&M;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?M(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}function h(l,r,s,c,x){if(!l||l===""){E.error("The url was not provided or it is invalid!");return}var a={RestfulUrl:"",KvpUrl:"",layer:"",style:"",format:"",tileMatrixSetID:"",maximumLevel:null,tileMatrixLabels:[],tilingScheme:null,position:"",ServiceType:""};return C.default.ajax({url:l,type:"GET",async:![],timeout:3e3,success:function(n){var u=this,g=(0,T.xmlToJson)(n);if(s==="geoserver"?a.ServiceType="geoserver":a.ServiceType="arcgisserver",a.ServiceType==="geoserver"&&!r)E.error("params error! layer name from Geoserver is required !");else if(a.ServiceType==="geoserver"&&r)if(Array.isArray(g.Capabilities["ows:OperationsMetadata"]["ows:Operation"][1]["ows:DCP"]["ows:HTTP"]["ows:Get"])?a.KvpUrl=g.Capabilities["ows:OperationsMetadata"]["ows:Operation"][1]["ows:DCP"]["ows:HTTP"]["ows:Get"][1]["@attributes"]["xlink:href"]:a.KvpUrl=g.Capabilities["ows:OperationsMetadata"]["ows:Operation"][1]["ows:DCP"]["ows:HTTP"]["ows:Get"]["@attributes"]["xlink:href"],g.Capabilities.Contents.Layer instanceof Array)g.Capabilities.Contents.Layer.forEach(function(Z){var H=this;(0,L.default)(this,u),Z["ows:Identifier"]["#text"]===r&&(a.tilingScheme=new f.GeographicTilingScheme,a.format="image/png",a.RestfulUrl=Z.ResourceURL[0]["@attributes"].template,Z["ows:WGS84BoundingBox"]&&(a.position=Z["ows:WGS84BoundingBox"]["ows:LowerCorner"]["#text"]+" "+Z["ows:WGS84BoundingBox"]["ows:UpperCorner"]["#text"]),a.layer=r,Z.Style["ows:Identifier"]=={}?a.style="":a.style=Z.Style["ows:Identifier"]["#text"]||"",Array.isArray(Z.TileMatrixSetLink)===!![]?(a.maximumLevel=Z.TileMatrixSetLink[0].TileMatrixSetLimits.TileMatrixLimits.length,a.tileMatrixSetID=Z.TileMatrixSetLink[1].TileMatrixSet["#text"],Z.TileMatrixSetLink[1].TileMatrixSetLimits.TileMatrixLimits.forEach(function(U){(0,L.default)(this,H);var V=U.TileMatrix["#text"];return a.tileMatrixLabels.push(V)}.bind(this))):(a.maximumLevel=Z.TileMatrixSetLink.TileMatrixSetLimits.TileMatrixLimits.length,a.tileMatrixSetID=Z.TileMatrixSetLink.TileMatrixSet["#text"],Z.TileMatrixSetLink.TileMatrixSetLimits.TileMatrixLimits.forEach(function(U){(0,L.default)(this,H);var V=U.TileMatrix["#text"];return a.tileMatrixLabels.push(V)}.bind(this))),a.RestfulUrl===""&&E.error("layer name may incorrect,please check it!"))}.bind(this));else{var d=g.Capabilities.Contents.Layer;if(d["ows:Identifier"]["#text"]===r){if(a.tilingScheme=new f.GeographicTilingScheme,a.format="image/png",a.RestfulUrl=d.ResourceURL[0]["@attributes"].template,d["ows:WGS84BoundingBox"]&&(a.position=d["ows:WGS84BoundingBox"]["ows:LowerCorner"]["#text"]+" "+d["ows:WGS84BoundingBox"]["ows:UpperCorner"]["#text"]),a.layer=r,d.Style["ows:Identifier"]=={}?a.style="":a.style=d.Style["ows:Identifier"]["#text"]||"",Array.isArray(d.TileMatrixSetLink)===!![]){var y,p,w,S=(y=d.TileMatrixSetLink[0])===null||y===void 0||(p=y.TileMatrixSetLimits)===null||p===void 0||(w=p.TileMatrixLimits)===null||w===void 0?void 0:w.length;S?a.maximumLevel=S:a.maximumLevel=18,x?a.tileMatrixSetID=x:a.tileMatrixSetID=d.TileMatrixSetLink[1].TileMatrixSet["#text"],d.TileMatrixSetLink[1].TileMatrixSetLimits.TileMatrixLimits.forEach(function(Z){(0,L.default)(this,u);var H=Z.TileMatrix["#text"];return a.tileMatrixLabels.push(H)}.bind(this))}else a.maximumLevel=d.TileMatrixSetLink.TileMatrixSetLimits.TileMatrixLimits.length,a.tileMatrixSetID=d.TileMatrixSetLink.TileMatrixSet["#text"],d.TileMatrixSetLink.TileMatrixSetLimits.TileMatrixLimits.forEach(function(Z){(0,L.default)(this,u);var H=Z.TileMatrix["#text"];return a.tileMatrixLabels.push(H)}.bind(this));a.RestfulUrl===""&&E.error("layer name may incorrect,please check it!")}}else{if(g.Capabilities.Contents.Layer.ResourceURL&&(a.RestfulUrl=g.Capabilities.Contents.Layer.ResourceURL["@attributes"].template),a.KvpUrl=g.Capabilities["ows:OperationsMetadata"]["ows:Operation"][1]["ows:DCP"]["ows:HTTP"]["ows:Get"][1]["@attributes"]["xlink:href"],a.layer=g.Capabilities["ows:ServiceIdentification"]["ows:Title"]["#text"],a.format="image/png",a.style=g.Capabilities.Contents.Layer.Style["ows:Identifier"]["#text"],a.TileMatrixSet=g.Capabilities.Contents.TileMatrixSet,g.Capabilities.Contents.Layer["ows:BoundingBox"]){a.position=g.Capabilities.Contents.Layer["ows:BoundingBox"]["ows:LowerCorner"]["#text"]+" "+g.Capabilities.Contents.Layer["ows:BoundingBox"]["ows:UpperCorner"]["#text"];var R=g.Capabilities.Contents.Layer["ows:BoundingBox"]["@attributes"].crs.toString(),B=new RegExp("urn:ogc:def:crs:EPSG::","g");R=R.replace(B,"")}var k=["4490","4610","4214","4510","4511","4512","4528"];if(Array.isArray(g.Capabilities.Contents.TileMatrixSet))if(a.TileMatrix=g.Capabilities.Contents.TileMatrixSet[0].TileMatrix,a.tileMatrixSetID=g.Capabilities.Contents.Layer.TileMatrixSetLink[0].TileMatrixSet["#text"],a.maximumLevel=g.Capabilities.Contents.TileMatrixSet[0].TileMatrix.length-1,k.indexOf(R)!==-1){a.tilingScheme=new f.GeographicTilingScheme;for(var P=g.Capabilities.Contents.TileMatrixSet[0].TileMatrix,D=0;D<P.length;D++)if(P[D].MatrixHeight["#text"]=="1"&&P[D].MatrixWidth["#text"]=="2")for(var A=D;A<P.length;A++)a.tileMatrixLabels.push(P[A]["ows:Identifier"]["#text"])}else a.tilingScheme=null,g.Capabilities.Contents.TileMatrixSet[0].TileMatrix.forEach(function(Z){return(0,L.default)(this,u),a.tileMatrixLabels.push(Z["ows:Identifier"]["#text"])}.bind(this));else if(a.TileMatrix=g.Capabilities.Contents.TileMatrixSet.TileMatrix,a.tileMatrixSetID=g.Capabilities.Contents.Layer.TileMatrixSetLink.TileMatrixSet["#text"],a.maximumLevel=g.Capabilities.Contents.TileMatrixSet.TileMatrix.length-1,k.indexOf(R)!==-1){a.tilingScheme=new f.GeographicTilingScheme;for(var N=g.Capabilities.Contents.TileMatrixSet.TileMatrix,I=0;I<N.length;I++)if(N[I].MatrixHeight["#text"]=="1"&&N[I].MatrixWidth["#text"]=="2")for(var G=I;G<N.length;G++)a.tileMatrixLabels.push(N[G]["ows:Identifier"]["#text"]);else if(N[I].MatrixHeight["#text"]=="2"&&N[I].MatrixWidth["#text"]=="2")for(var W=I;W<N.length;W++)a.tileMatrixLabels.push(N[W]["ows:Identifier"]["#text"])}else a.tilingScheme=null,g.Capabilities.Contents.TileMatrixSet.TileMatrix.forEach(function(Z){return(0,L.default)(this,u),a.tileMatrixLabels.push(Z["ows:Identifier"]["#text"])}.bind(this))}c&&Array.isArray(c)&&c.length>0&&(a.tileMatrixLabels=[],a.tileMatrixLabels=c)},error:function(){E.error("faild to request WMTS Capabilities xml !")},complete:function(n,u){u==="timeout"&&(0,v.Message)("request WMTS Capabilities time out!")}}),a}},461805:function(X,z,e){"use strict";var E=e(29870),F=e(985208),O=e(659791),M=e(22466),b=e(183393),L=e(105077),T=e(787879),C=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.ViewerEx=void 0;var f=C(e(543389)),v=C(e(122777)),m=C(e(42762)),o=w(e(187647)),h=C(e(202692)),l=e(592118),r=e(494225),s=e(170489),c=e(385219),x=e(395512),a=e(74913),i=w(e(580823)),n=w(e(792672)),u=w(e(194777)),g=C(e(106509)),d=C(e(864828)),y=e(936161);function p(k){if(typeof T!="function")return null;var P=new T,D=new T;return(p=function(N){return N?D:P})(k)}function w(k,P){if(!P&&k&&k.__esModule)return k;if(k===null||E(k)!=="object"&&typeof k!="function")return{default:k};var D=p(P);if(D&&D.has(k))return D.get(k);var A={},N=Object.defineProperty&&b;for(var I in k)if(I!=="default"&&Object.prototype.hasOwnProperty.call(k,I)){var G=N?b(k,I):null;G&&(G.get||G.set)?Object.defineProperty(A,I,G):A[I]=k[I]}return A.default=k,D&&D.set(k,A),A}function S(k,P){var D=F(k);if(O){var A=O(k);P&&(A=M(A).call(A,function(N){return b(k,N).enumerable})),D.push.apply(D,A)}return D}function R(k){for(var P=1;P<arguments.length;P++){var D=arguments[P]!=null?arguments[P]:{};P%2?S(Object(D),!0).forEach(function(A){(0,f.default)(k,A,D[A])}):L?Object.defineProperties(k,L(D)):S(Object(D)).forEach(function(A){Object.defineProperty(k,A,b(D,A))})}return k}var B=function(){function k(P,D){(0,v.default)(this,k),o.Camera.DEFAULT_VIEW_RECTANGLE=o.Rectangle.fromDegrees(89.5,20.4,110.4,61.2),this.viewer=P,this.viewer.scene.camera.percentageChanged=.1,this.config=o.defaultValue(D,{}),this.viewer.shine=this,this._isFlyAnimation=![],this.crs=o.defaultValue(this.config.crs,"3857"),this.idProp=void 0,this.tildLayer=[],this.editLayer=void 0,this._drawControl=null,this.layerContexts=[],this._optimization(),this._initForOpts(),this.config.is2d===1&&(this.ol3d=new d.default({map:this.config.map2d,scene_c:this.viewer.scene,isBaseMap:!![]})),this.layerManager=new r.LayerManager(this),this._addControls()}return(0,m.default)(k,[{key:"_optimization",value:function(){if(this.viewer.sceneModePicker&&(this.viewer.sceneModePicker.viewModel.duration=0),this.viewer.clockViewModel&&(this.viewer.myClock=this.viewer.clockViewModel.clock),o.VERSION<1.63&&(this.viewer._cesiumWidget._supportsImageRenderingPixelated=o.FeatureDetection.supportsImageRenderingPixelated(),this.viewer._cesiumWidget._forceResize=!![],o.FeatureDetection.supportsImageRenderingPixelated())){for(var D=window.devicePixelRatio;D>=2;)D/=2;this.viewer.resolutionScale=D}}},{key:"_initForOpts",value:function(){var D=this;this.viewer.cesiumWidget.creditContainer.style.display="none",this.viewer.homeButton&&this.viewer.homeButton.viewModel.command.beforeExecute.addEventListener(function(I){D.centerAt(),I.cancel=!![]}),this.centerAt(this.config.center,{duration:this.config.duration||0});var A=this.viewer.scene;if(A.globe.baseColor=new o.Color.fromCssColorString(this.config.baseColor||"#546a53"),this.config.backgroundColor&&(A.backgroundColor=new o.Color.fromCssColorString(this.config.backgroundColor)),this.config.style){A.debugShowFramesPerSecond=this.config.style.debugShowFramesPerSecond;var N=this.config.style.resolutionScale?window.devicePixelRatio:1;this.viewer.resolutionScale=N,A.globe.depthTestAgainstTerrain=this.config.style.testTerrain,A.globe.enableLighting=this.config.style.lighting,A.skyAtmosphere.show=this.config.style.atmosphere,A.globe.showGroundAtmosphere=this.config.style.atmosphere,A.fog.enabled=this.config.style.fog,A.globe.show=o.defaultValue(this.config.style.globe,!![]),A.moon.show=o.defaultValue(this.config.style.moon,A.globe.show),A.sun.show=o.defaultValue(this.config.style.sun,A.globe.show),A.skyBox.show=o.defaultValue(this.config.style.skyBox,A.globe.show)}A.canvas.addEventListener("webglcontextlost",function(I){I.preventDefault()},![]),A.canvas.addEventListener("webglcontextrestored",function(){A.initializeFrame()},![]),A.screenSpaceCameraController.maximumZoomDistance=o.defaultValue(this.config.maxzoom,2e7),A.screenSpaceCameraController.minimumZoomDistance=o.defaultValue(this.config.minzoom,1),A.screenSpaceCameraController.enableCollisionDetection=!![],A.screenSpaceCameraController._zoomFactor=2,A.screenSpaceCameraController.minimumCollisionTerrainHeight=15e6}},{key:"_addControls",value:function(){var D={id:"temporaryDrawLayer",type:"geojson-draw",visible:!![]};this.addLayer(D),this._drawControl==null&&(this._drawControl=new l.DrawBase(this.viewer,{id:"temporaryDrawLayer",hasEdit:![]})),this._tooltip=new c.Tooltip(this.viewer,{onMouseMove:function(){}}),this._keyboardRoam=new s.KeyboardRoam(this.viewer),this.config.location&&(this.config.location.bindEvent=![],this._location=new x.Location(this.viewer,this.config.location)),!i.isPCBroswer()&&(this.viewer.targetFrameRate=20,this.viewer.requestRenderMode=!![],this.viewer.scene.fog.enable=![],this.viewer.scene.skyAtmosphere.show=![],this.viewer.scene.fxaa=![]),this.config.mouseZoom&&i.isPCBroswer()&&(this._mouseZoomStyle=new a.MouseZoomStyle(this.viewer,this.config.mouseZoom))}},{key:"addLayer",value:function(D){this.layerManager.addLayer(D)}},{key:"filterLayer",value:function(D,A){this.layerManager.filterLayer(D,A)}},{key:"getConfig",value:function(){return i.clone(this.config,5)}},{key:"getCenter",value:function(D){return n.getCenter(this.viewer,D)}},{key:"getExtent",value:function(D){return n.getExtent(this.viewer,D)}},{key:"getCameraView",value:function(D){return n.getCameraView(this.viewer,D)}},{key:"getHeight",value:function(D,A){return n.updateHeightForClampToGround(this.viewer,D,A)}},{key:"keyboard",value:function(D,A){D?this._keyboardRoam.bind(A):this._keyboardRoam.unbind()}},{key:"keyboardAuto",value:function(){return this._keyboardRoam.enable=!this._keyboardRoam.enable}},{key:"getLayer",value:function(D,A){return this.layerManager.getLayer(D,A)}},{key:"getLevel",value:function(D){var A=3252.745,N=.0009198301,I=52977.61,G=-3228.107;return G+(A-G)/(1+Math.pow(D/I,N))}},{key:"levelToHeight",value:function(D){return 48e6/Math.pow(2,D-1)}},{key:"removeLayer",value:function(D){this.layerManager.removeLayer(D)}},{key:"hasTerrain",value:function(){return this.terrainProvider==null?![]:i.hasTerrain(this.viewer)}},{key:"updateTerrainProvider",value:function(D){if(D){if(this.terrainProvider==null){var A=this.config.terrain;A.url&&(this.config.serverURL&&(A.url=A.url.replace("$serverURL$",this.config.serverURL)),A.url=A.url.replace("$hostname$",location.hostname).replace("$host$",location.host)),this.terrainProvider=i.getTerrainProvider(A)}this.viewer.terrainProvider=this.terrainProvider}else this.viewer.terrainProvider=i.getEllipsoidTerrain()}},{key:"getCrs",value:function(){return this.crs}},{key:"point2map",value:function(D){if(this.crs==="gcj"){var A=i.clone(D),N=u.wgs2gcj([A.x,A.y]);return A.x=N[0],A.y=N[1],A}else if(this.crs==="baidu"){var I=i.clone(D),G=u.wgs2bd([I.x,I.y]);return I.x=G[0],I.y=G[1],I}else return D}},{key:"point2wgs",value:function(D){if(this.crs==="gcj"){var A=i.clone(D),N=u.gcj2wgs([A.x,A.y]);return A.x=N[0],A.y=N[1],A}else if(this.crs==="baidu"){var I=i.clone(D),G=u.bd2gcj([I.x,I.y]);return I.x=G[0],I.y=G[1],I}else return D}},{key:"centerAtArr",value:function(D,A){this.cancelCenterAt(),this.arrCenterTemp=D,this._isCenterAtArr=!![],this._centerAtArrItem(0,A)}},{key:"_centerAtArrItem",value:function(D,A){var N=this;if(!this._isCenterAtArr||D<0||D>=this.arrCenterTemp.length){this._isCenterAtArr=![],A&&A();return}var I=this.arrCenterTemp[D];I.onStart&&I.onStart(),this.centerAt(I,{duration:I.duration,complete:function(){I.onEnd&&I.onEnd();var W=o.defaultValue(I.stop,1);setTimeout(function(){N._centerAtArrItem(++D,A)},W*1e3)},cancle:function(){this._isCenterAtArr=![],A&&A()}})}},{key:"cancelCenterAt",value:function(){this._isCenterAtArr=![],this.viewer.camera.cancelFlight()}},{key:"centerAt",value:function(D,A){A==null?A={}:i.isNumber(A)&&(A={duration:A}),D==null&&(A.isWgs84=!![],D=this.config.extent||this.config.center||{y:17.196575,x:114.184276,z:9377198,heading:0,pitch:-80,roll:0});var N={};for(var I in A)N[I]=A[I];if(D.xmin&&D.xmax&&D.ymin&&D.ymax){var G=D.xmin,W=D.xmax,Z=D.ymin,H=D.ymax;if(N.isWgs84){var U=this.point2map({x:G,y:Z});G=U.x,Z=U.y;var V=this.point2map({x:W,y:H});W=V.x,H=V.y}N.rectangle=o.Rectangle.fromDegrees(G,Z,W,H),this.viewer.camera.flyTo(R(R({},N),{},{destination:N.rectangle}))}else{N.isWgs84&&(D=this.point2map(D));var Y=o.defaultValue(N.minz,2500);if(this.viewer.camera.positionCartographic.height<Y&&(Y=this.viewer.camera.positionCartographic.height),D.z!=null&&D.z!==0&&(Y=D.z),N.destination=o.Cartesian3.fromDegrees(D.x,D.y,Y),N.orientation={heading:o.Math.toRadians(o.defaultValue(D.heading,0)),pitch:o.Math.toRadians(o.defaultValue(D.pitch,-90)),roll:o.Math.toRadians(o.defaultValue(D.roll,0))},N.isFly){var $=this;$._isFlyAnimation=!![],this.viewer.camera.flyTo(R(R({},N),{},{complete:function(){var J;$._isFlyAnimation=![],(J=$._location)===null||J===void 0||J.updaeCamera()}}))}else this.viewer.camera.flyTo(N)}}},{key:"getGraphicExtent",value:function(D){var A=D[0].x?D:(0,y.lonlats2cartesians)(D),N=o.Rectangle.fromCartesianArray(A),I={xmin:o.Math.toDegrees(N.west),ymin:o.Math.toDegrees(N.south),xmax:o.Math.toDegrees(N.east),ymax:o.Math.toDegrees(N.north)};return I}},{key:"centerPoint",value:function(D,A){A==null&&(A={});var N={};for(var I in A)N[I]=A[I];N.isWgs84&&(D=this.point2map(D));var G;D instanceof o.Cartesian3?G=D:G=o.Cartesian3.fromDegrees(D.x,D.y,o.defaultValue(D.z,0));var W=o.defaultValue(A.radius,5e3);N.offset={heading:o.Math.toRadians(o.defaultValue(A.heading,0)),pitch:o.Math.toRadians(o.defaultValue(A.pitch,-60)),range:o.defaultValue(A.range,0)},this.viewer.camera.flyToBoundingSphere(new o.BoundingSphere(G,W),N)}},{key:"isFlyAnimation",value:function(){return this._isFlyAnimation}},{key:"openFlyAnimation",value:function(D,A){var N=this,I=this.viewer,G=A||n.getCameraView(I);this._isFlyAnimation=!![],I.camera.setView({destination:o.Cartesian3.fromDegrees(-85.16,13.71,23e6)}),I.camera.flyTo({destination:o.Cartesian3.fromDegrees(G.x,G.y,23e6),duration:2,easingFunction:o.EasingFunction.LINEAR_NONE,complete:function(){var Z=o.defaultValue(G.z,9e4);Z<2e5&&G.pitch!==-90?(Z=Z*1.2+8e3,I.camera.flyTo({destination:o.Cartesian3.fromDegrees(G.x,G.y,Z),complete:function(){N.centerAt(G,{duration:2,complete:function(){N._isFlyAnimation=![],D&&D()}})}})):N.centerAt(G,{complete:function(){N._isFlyAnimation=![],D&&D()}})}})}},{key:"rotateAnimation",value:function(D,A){var N=this.viewer,I=n.getCameraView(N),G=A/3;N.camera.flyTo({destination:o.Cartesian3.fromDegrees(I.x+120,I.y,I.z),orientation:{heading:o.Math.toRadians(I.heading),pitch:o.Math.toRadians(I.pitch),roll:o.Math.toRadians(I.roll)},duration:G,easingFunction:o.EasingFunction.LINEAR_NONE,complete:function(){N.camera.flyTo({destination:o.Cartesian3.fromDegrees(I.x+240,I.y,I.z),orientation:{heading:o.Math.toRadians(I.heading),pitch:o.Math.toRadians(I.pitch),roll:o.Math.toRadians(I.roll)},duration:G,easingFunction:o.EasingFunction.LINEAR_NONE,complete:function(){N.camera.flyTo({destination:o.Cartesian3.fromDegrees(I.x,I.y,I.z),orientation:{heading:o.Math.toRadians(I.heading),pitch:o.Math.toRadians(I.pitch),roll:o.Math.toRadians(I.roll)},duration:G,easingFunction:o.EasingFunction.LINEAR_NONE,complete:function(){D&&D()}})}})}})}},{key:"_addNavigationWidget",value:function(D){this.viewer.extend(g.default,{defaultResetView:o.Rectangle.fromDegrees(110,20,120,30),enableZoomControls:!![]}),D.legend?(0,h.default)(".distance-legend").css(D.legend):(0,h.default)(".distance-legend").remove(),D.compass?(0,h.default)(".compass").css(D.compass):(0,h.default)(".compass").remove(),D.zoom?(0,h.default)(".navigation-controls").css(D.zoom):(0,h.default)(".navigation-controls").remove()}},{key:"destroy",value:function(){this._tooltip.destroy(),this._keyboardRoam&&(this._keyboardRoam.destroy(),this._keyboardRoam=null),this._location&&(this._location.destroy(),this._location=null),this._mouseZoomStyle&&(this._mouseZoomStyle.destroy(),this._mouseZoomStyle=null)}},{key:"tooltip",get:function(){return this._tooltip}},{key:"draw",get:function(){return this._drawControl}},{key:"setDraw",value:function(D){this._drawControl=D}},{key:"setTocData",value:function(D){this.layerManager.setTocData(D)}},{key:"getLayerDataById",value:function(D){return this.layerManager.getLayerDataById(D)}},{key:"queryTocData",value:function(D,A,N){this.layerManager.queryTocData(D,A,N)}},{key:"addCheckedLayers",value:function(D){this.layerManager.addCheckedLayers(D)}},{key:"getCheckedLayers",value:function(){return this.layerManager.getCheckedLayers()}},{key:"getDrawLayers",value:function(){return this.layerManager.getDrawLayers()}},{key:"getDrawLayerInfos",value:function(){return this.layerManager.getDrawLayerInfos()}},{key:"removeCheckedLayers",value:function(D){this.layerManager.removeCheckedLayers(D)}},{key:"getLayerOpacity",value:function(){}},{key:"setLayerOpacity",value:function(D,A){this.layerManager.setLayerOpacity(D,A)}},{key:"zoomToLayer",value:function(D){this.layerManager.zoomToLayer(D)}},{key:"setLayerTop",value:function(D){this.layerManager.setLayerTop(D)}},{key:"groundUnder",value:function(D){D.isUnderGround===![]?this.viewer.scene.screenSpaceCameraController.enableCollisionDetection=![]:this.viewer.scene.screenSpaceCameraController.enableCollisionDetection=!![]}},{key:"groundTranslucency",value:function(D){var A;D.isTranslucency===!![]?this.viewer.scene.globe.translucency.enabled=!![]:D.isTranslucency===![]&&(this.viewer.scene.globe.translucency.enabled=![]),this.viewer.scene.globe.translucency.frontFaceAlphaByDistance=new o.NearFarScalar(400,0,1800,1),D.alpha?A=D.alpha:A=.5,this.viewer.scene.globe.translucency.frontFaceAlphaByDistance.nearValue=A,this.viewer.scene.globe.translucency.frontFaceAlphaByDistance.farValue=D.fadeByDistance?1:A}},{key:"useTranslucencyRectangle",value:function(D){var A=this.viewer.scene.globe;A.translucency.enabled=!![],A.undergroundColor=void 0,A.translucency.frontFaceAlpha=.25,D?A.translucency.rectangle=o.Rectangle.fromDegrees(D):A.translucency.rectangle=o.Rectangle.fromDegrees(120,30,120.5,30.5)}},{key:"useTranslucencyMask",value:function(){var D=this.viewer.scene.globe,A=this.viewer.scene.imageryLayers.get(0);D.showGroundAtmosphere=![],D.baseColor=o.Color.TRANSPARENT,D.translucency.enabled=!![],D.undergroundColor=void 0,A.colorToAlpha=new o.Color(0,.016,.059),A.colorToAlphaThreshold=.2}},{key:"add3DMask",value:function(D,A){for(var N=[],I=D.coordinates,G=0;G<I.length;G++)for(var W=[],Z=I[G],H=0;H<Z.length;H++){for(var U=Z[H],V=0;V<U.length;V++)W.push(U[V][0],U[V][1]);var Y={positions:o.Cartesian3.fromDegreesArray(W)};N.push(Y)}var $=A?new o.Color(A.r,A.g,A.b,A.alpha?A.alpha:1):o.Color.WHITE.withAlpha(.5);this.viewer.entities.add({id:"my3dMask",name:"3dMask",polygon:{hierarchy:{positions:o.Cartesian3.fromDegreesArray([50,0,160,0,160,70,50,70]),holes:N},heightReference:o.HeightReference.CLAMP_TO_GROUND,material:$,outline:!![]}})}},{key:"remove3DMask",value:function(){var D=this.viewer.entities.getById("my3dMask");D&&this.viewer.entities.removeById("my3dMask")}}]),k}();z.ViewerEx=B},115998:function(X,z,e){"use strict";var E=e(149500),F=e(29870),O=e(465557),M=e(520314),b=e(426352),L=e(230551),T=e(43586),C=e(787879),f=e(183393),v=e(419534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Weather=z.VisibleAnalysis=z.ViewShedAnalysis=z.Utils=z.TerrainAnalysis=z.SunAnalysis=z.SkyLineAnalysis=z.ShadowRatioAnalysis=z.FloodAnalysis=z.ControlHeightAnalysis=z.ClipAnalysis=void 0;var m=v(e(611323)),o=v(e(869257)),h=v(e(828866)),l=v(e(708138)),r=v(e(705146)),s=v(e(666426)),c=v(e(53267)),x=v(e(66273)),a=v(e(326541)),i=v(e(669033)),n=v(e(124990)),u=v(e(581806)),g=v(e(36047)),d=v(e(520314)),y=v(e(22466)),p=v(e(728954)),w=v(e(934749)),S=v(e(99245)),R=v(e(636583)),B=v(e(342579)),k=v(e(330044)),P=v(e(299085)),D=v(e(234009)),A=v(e(122777)),N=v(e(42762)),I=et(e(187647)),G=e(469973),W=e(496535),Z=e(792672),H=v(e(607974)),U=et(e(125794)),V=e(325074),Y=et(e(596376)),$=e(870317),K=e(555616),J=e(259039);function Q(Zt){if(typeof C!="function")return null;var ft=new C,gt=new C;return(Q=function(lt){return lt?gt:ft})(Zt)}function et(Zt,ft){if(!ft&&Zt&&Zt.__esModule)return Zt;if(Zt===null||F(Zt)!=="object"&&typeof Zt!="function")return{default:Zt};var gt=Q(ft);if(gt&&gt.has(Zt))return gt.get(Zt);var dt={},lt=Object.defineProperty&&f;for(var ot in Zt)if(ot!=="default"&&Object.prototype.hasOwnProperty.call(Zt,ot)){var it=lt?f(Zt,ot):null;it&&(it.get||it.set)?Object.defineProperty(dt,ot,it):dt[ot]=Zt[ot]}return dt.default=Zt,gt&&gt.set(Zt,dt),dt}function nt(Zt,ft){var gt=typeof L<"u"&&T(Zt)||Zt["@@iterator"];if(!gt){if(Array.isArray(Zt)||(gt=st(Zt))||ft&&Zt&&typeof Zt.length=="number"){gt&&(Zt=gt);var dt=0,lt=function(){};return{s:lt,n:function(){return dt>=Zt.length?{done:!![]}:{done:![],value:Zt[dt++]}},e:function(St){throw St},f:lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ot=!![],it=![],yt;return{s:function(){gt=gt.call(Zt)},n:function(){var St=gt.next();return ot=St.done,St},e:function(St){it=!![],yt=St},f:function(){try{!ot&&gt.return!=null&&gt.return()}finally{if(it)throw yt}}}}function st(Zt,ft){var gt;if(Zt){if(typeof Zt=="string")return ut(Zt,ft);var dt=M(gt=Object.prototype.toString.call(Zt)).call(gt,8,-1);if(dt==="Object"&&Zt.constructor&&(dt=Zt.constructor.name),dt==="Map"||dt==="Set")return b(Zt);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return ut(Zt,ft)}}function ut(Zt,ft){(ft==null||ft>Zt.length)&&(ft=Zt.length);for(var gt=0,dt=new Array(ft);gt<ft;gt++)dt[gt]=Zt[gt];return dt}function rt(Zt){var ft=ht();return function(){var dt=(0,D.default)(Zt),lt;if(ft){var ot=(0,D.default)(this).constructor;lt=O(dt,arguments,ot)}else lt=dt.apply(this,arguments);return(0,P.default)(this,lt)}}function ht(){if(typeof Reflect>"u"||!O)return![];if(O.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(O(Boolean,[],function(){})),!![]}catch{return![]}}var Pt=I.Cartesian3,wt={JulianDate:I.JulianDate,cartesianToLonLatHeight:function(ft){var gt=I.Cartographic.fromCartesian(ft),dt=I.Math.toDegrees(gt.longitude),lt=I.Math.toDegrees(gt.latitude);return[dt,lt,gt.height]},getCartographicWithCartesian3:function(ft,gt){return ft.scene.globe.ellipsoid.cartesianToCartographic(gt)},upPosition:function(ft,gt,dt){var lt=this.getCartographicWithCartesian3(ft,gt);return lt.height+=dt,I.Cartographic.toCartesian(lt)},setPositionHeight:function(ft,gt,dt){var lt=this.getCartographicWithCartesian3(ft,gt);return lt.height=dt,I.Cartographic.toCartesian(lt)},distance:function(ft,gt){var dt=new I.EllipsoidGeodesic;return dt.setEndPoints(I.Cartographic.fromCartesian(ft),I.Cartographic.fromCartesian(gt)),dt.surfaceDistance},getColor:function(ft){return I.Color[ft]},isCesiumProperty:function(ft,gt){return ft instanceof I[gt]}};z.Utils=wt;var Mt=function(){function Zt(ft){var gt;(0,A.default)(this,Zt),this.prop=ft||{};var dt=this.prop,lt=dt.viewer,ot=dt.dataSource,it=dt.type,yt=dt.drawConfig,Ot=dt.name;if(!I.defined(lt)){E.warn("\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u8BBE\u7F6E\u3010viewer\u3011");return}if(!I.defined(it)){E.warn("\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u8BBE\u7F6E\u3010type\u3011");return}var St="".concat(it,"AnalysisLayer");if(yt){var Gt={visible:!![],id:"spatialAnalysisLayer",type:"geojson-draw"},Ut=lt.shine.getLayer(Gt.id,"id");!Ut&&lt.shine.addLayer(Gt),yt.type==="measure"?(this.drawControl=new V.Measure((0,o.default)({viewer:lt,name:Ot||St},yt)),this.prop.dataSource=this.drawControl.draw().dataSource):(this.drawControl=new V.Draw(lt,(0,o.default)({hasEdit:![],name:Ot||St},yt)),this.drawControl.setEditLayer(Gt.id,![]),this.prop.dataSource=this.drawControl.dataSource)}else this.prop.dataSource=ot||new I.CustomDataSource(Ot||St),lt.dataSources.add(this.prop.dataSource);(gt=this.init)===null||gt===void 0||gt.call(this)}return(0,N.default)(Zt,[{key:"init",value:function(){}},{key:"clearDraw",value:function(){var gt=this.prop.drawConfig;this.drawControl&&(gt.type==="measure"?this.drawControl.clearMeasure():this.drawControl.clearDraw())}},{key:"start",value:function(){}},{key:"destroy",value:function(){}},{key:"clear",value:function(){}}]),Zt}(),Ft=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,A.default)(this,gt),dt=dt||{},dt.type="visible",dt.drawConfig=!![],ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){var lt=this.prop.depthFailMaterial;this.depthFailMaterial=lt,this.obHeight=1.7,this.viewStart=[],this.viewEnd=null}},{key:"_checkStart",value:function(lt){var ot=this;if(lt instanceof Array){var it=!![];return lt&&lt.forEach(function(yt){(0,B.default)(this,ot),!this._isCartesian3(yt)&&(it=![])}.bind(this)),it||"not all array element are Cartesian3, please check"}else return"not a Array"}},{key:"_checkEnd",value:function(lt){return lt===void 0||lt instanceof I.Cartesian3?!![]:"not Cartesian3,please check"}},{key:"_isCartesian3",value:function(lt){return!!(I.defined(lt)&&lt instanceof I.Cartesian3)}},{key:"_checkStartAndEnd",value:function(){return this._checkStart(this.viewStart)===!![]&&this._checkEnd(this.viewEnd)===!![]}},{key:"setViewStart",value:function(lt){var ot=this._checkStart(lt);typeof ot=="string"?E.warn(ot):(lt=lt||[],this.viewStart=lt)}},{key:"setViewEnd",value:function(lt){var ot=this._checkEnd(lt);lt===void 0||typeof ot!="string"?this.viewEnd=lt:E.warn(ot)}},{key:"drawPoint",value:function(lt){var ot=this;this.drawControl.startDraw({drawtype:"point",success:function(yt){return(0,B.default)(this,ot),lt(yt)}.bind(this)})}},{key:"drawLine",value:function(){var lt=this;this.clear(),this.drawControl.startDraw({drawtype:"polyline",config:{maxPointNum:2},success:function(it){(0,B.default)(this,lt);var yt=it.polyline.positions.getValue(),Ot=[yt[0]],St=yt[1];this.start(Ot,St)}.bind(this)})}},{key:"refresh",value:function(){this.start()}},{key:"start",value:function(lt,ot){if(lt&&this.setViewStart(lt),ot&&this.setViewEnd(ot),this._checkStartAndEnd()){this.liveModeStart(this.viewStart,this.viewEnd);var it=this.viewStart[this.viewStart.length-1],yt=I.Cartographic.fromCartesian(it).height;this.obAltitude=yt,this.callback&&this.callback()}else E.warn("one of [viewStart] and [viewEnd] is not available,please check")}},{key:"clear",value:function(){var lt=this.prop.dataSource;this.clearDraw(),lt.entities.removeAll()}},{key:"destroy",value:function(){var lt=this.prop,ot=lt.viewer,it=lt.dataSource;ot.dataSources.contains(it)&&ot.dataSources.remove(it)}},{key:"liveModeStart",value:function(lt,ot){var it=this;this.clear(),this.timeout&&clearTimeout(this.timeout),lt=(0,h.default)(lt).call(lt,function(yt){(0,B.default)(this,it);var Ot=wt.upPosition(this.prop.viewer,yt.clone(),this.obHeight||0);return this._dL(yt,Ot,I.Color.YELLOW,!![]),Ot}.bind(this)),this.timeout=setTimeout(function(){var yt=this;return(0,B.default)(this,it),lt.forEach(function(Ot){return(0,B.default)(this,yt),this.sight(Ot,ot)}.bind(this))}.bind(this),0)}},{key:"sight",value:function(lt,ot){var it=this.prop.viewer,yt=wt.cartesianToLonLatHeight(lt),Ot=wt.cartesianToLonLatHeight(ot),St=I.Cartesian3.fromDegrees(yt[0],yt[1],yt[2]),Gt=I.Cartesian3.fromDegrees(Ot[0],Ot[1],Ot[2]),Ut=I.Cartesian3.normalize(I.Cartesian3.subtract(Gt,St,new I.Cartesian3),new I.Cartesian3),Kt=new I.Ray(St,Ut),Jt=it.scene.pickFromRay(Kt);I.defined(Jt)&&(I.defined(Jt.position)&&this._dP(Jt.position,I.Color.YELLOW),this._dpOb(St),this._dL(St,Jt.position,I.Color.GREEN),this._dL(Jt.position,Gt,I.Color.RED))}},{key:"_dpOb",value:function(lt){var ot=this.prop,it=ot.dataSource,yt=ot.viewer,Ot=new I.Entity({position:lt,label:{text:"\u89C2\u5BDF\u70B9",font:"30px sans-serif",scale:.5,distanceDisplayCondition:new I.DistanceDisplayCondition(5,1e4),verticalOrigin:I.VerticalOrigin.BOTTOM,pixelOffset:{x:0,y:-3}}});it.entities.add(Ot)}},{key:"_dP",value:function(lt,ot){var it=this.prop,yt=it.dataSource,Ot=it.viewer,St=new I.Entity({position:lt,point:{color:ot,pixelSize:10}});yt.entities.add(St)}},{key:"_dL",value:function(lt,ot,it){var yt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:![],Ot=this.prop.dataSource;I.defined(lt)&&I.defined(ot)&&Ot.entities.add({polyline:{depthFailMaterial:this.depthFailMaterial,positions:[lt,ot],width:4,material:yt?new I.PolylineDashMaterialProperty({color:it}):it}})}}]),gt}(Mt);z.VisibleAnalysis=Ft;var Dt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,A.default)(this,gt),dt=dt||{},dt.type="viewShed",dt.drawConfig=!![],ft.call(this,dt)}return(0,N.default)(gt,[{key:"__makeTemplateObject",value:function(lt,ot){return Object.defineProperty?Object.defineProperty(lt,"raw",{value:ot}):lt.raw=ot,lt}},{key:"glsl",value:function(lt){return lt.toString()}},{key:"init",value:function(){var lt=this.prop.viewer;this.enabled=!![],this.softShadows=![],this.direction=0,this.pitch=0,this.horizontalViewAngle=90,this.verticalViewAngle=30,this.visibleAreaColor=I.Color.GREEN,this.invisibleAreaColor=I.Color.RED,this.cueLineColor=I.Color.DODGERBLUE,this.visualRange=1e3,this.size=2048,this.originShadowMap=lt.scene.shadowMap}},{key:"_isCartesian3",value:function(lt){return!!(I.defined(lt)&&lt instanceof I.Cartesian3)}},{key:"start",value:function(lt,ot){if(this._isCartesian3(lt)&&this._isCartesian3(ot)){var it=this.setParamWithStartAndEnd(lt,ot);this.setParam(it)}else E.warn("param not available")}},{key:"clear",value:function(){var lt=this.prop.viewer;this.pyramid&&(lt.entities.removeById(this.pyramid.id),this.pyramid=null),this.postStage&&(lt.scene.postProcessStages.remove(this.postStage),this.postStage=null),this.frustumOutline&&lt.scene.primitives.remove(this.frustumOutline),lt.scene.shadowMap=this.originShadowMap}},{key:"destroy",value:function(){this.clear(),this.clearDraw()}},{key:"computeCorseAngle",value:function(lt,ot){var it=I.Transforms.eastNorthUpToFixedFrame(lt),yt=I.Matrix4.inverse(it,new I.Matrix4),Ot=I.Matrix4.multiplyByPoint(yt,lt,new I.Cartesian3),St=I.Matrix4.multiplyByPoint(yt,ot,new I.Cartesian3),Gt=Math.atan2(St.y-Ot.y,St.x-Ot.x),Ut=Gt*(180/Math.PI);return Ut=90-Ut,Ut<0&&(Ut=Ut+360),Ut}},{key:"computePitchAngle",value:function(lt,ot){var it=I.Transforms.eastNorthUpToFixedFrame(lt),yt=I.Matrix4.inverse(it,new I.Matrix4),Ot=I.Matrix4.multiplyByPoint(yt,lt,new I.Cartesian3),St=I.Matrix4.multiplyByPoint(yt,ot,new I.Cartesian3),Gt=Math.sqrt(Math.pow(St.x-Ot.x,2)+Math.pow(St.y-Ot.y,2)),Ut=wt.cartesianToLonLatHeight(lt)[2]-wt.cartesianToLonLatHeight(ot)[2],Kt=0;Gt!==0&&(Kt=(0,l.default)(Ut/Gt));var Jt=Kt*(180/Math.PI);return Math.abs(Jt)}},{key:"drawLine",value:function(lt){var ot=this;this.drawControl.startDraw({drawtype:"polyline",config:{maxPointNum:2},style:{width:0},success:function(Ut){return(0,B.default)(this,ot),lt(Ut)}.bind(this)});var it=this.drawControl.drawCtrl.polyline,yt=it.getHandler(),Ot=this,St=![];yt.setInputAction(function(Gt){var Ut=(0,Z.getCurrentMousePosition)(it.viewer.scene,Gt.position,it.entity);Ut&&(St&&it._positions_draw.pop(),St=![],it.entity.attribute&&it.entity.attribute.config&&it.entity.attribute.config.addHeight&&(Ut=addPositionsHeight(Ut,it.entity.attribute.config.addHeight)),it._positions_draw.push(Ut),it._positions_draw.length>=it._maxPointNum&&it.disable())},2),yt.removeInputAction(7),yt.setInputAction(function(Gt){it._positions_draw.length<=1?it.tooltip.showAt(Gt.endPosition,$.message.draw.polyline.start):it._positions_draw.length<it._minPointNum?it.tooltip.showAt(Gt.endPosition,$.message.draw.polyline.cont):it._positions_draw.length>=it._maxPointNum?it.tooltip.showAt(Gt.endPosition,$.message.draw.polyline.end2):it.tooltip.showAt(Gt.endPosition,$.message.draw.polyline.end);var Ut=(0,Z.getCurrentMousePosition)(it.viewer.scene,Gt.endPosition,it.entity);if(Ut&&(St&&it._positions_draw.pop(),St=!![],it._positions_draw.push(Ut),it._positions_draw.length==2)){var Kt=it._positions_draw[0],Jt=it._positions_draw[1],te=Ot.setParamWithStartAndEnd(Kt,Jt),ie=Ot.prop.viewer,oe=Ot.pyramid&&ie.entities.contains(Ot.pyramid);if(oe){var he=te||{},ne=he.direction,ce=ne===void 0?Ot.direction:ne,ge=he.pitch,Me=ge===void 0?Ot.pitch:ge,It=he.visualRange,Wt=It===void 0?Ot.visualRange:It,_t=he.viewPosition,ee=he.horizontalViewAngle,re=ee===void 0?Ot.horizontalViewAngle:ee,de=he.verticalViewAngle,Se=de===void 0?Ot.verticalViewAngle:de,Pe=he.invisibleAreaColor,Le=Pe===void 0?Ot.invisibleAreaColor:Pe,Ie=he.visibleAreaColor,pe=Ie===void 0?Ot.visibleAreaColor:Ie;Ot.viewPosition=_t,Ot.direction=ce%360,Ot.pitch=Me,Ot.visualRange=Wt,Ot.horizontalViewAngle=re,Ot.verticalViewAngle=Se,Ot.invisibleAreaColor=Le,Ot.visibleAreaColor=pe,Ot._getVisualPyramidEllipsoid()}else te.onlyDrawPyramid=!![],Ot.setParam(te)}},15)}},{key:"setParamWithStartAndEnd",value:function(lt,ot){var it=this.computeCorseAngle(lt,ot).toFixed(0),yt=this.computePitchAngle(lt,ot).toFixed(2)*2,Ot={direction:Number(it),horizontalViewAngle:90,verticalViewAngle:Number(yt),visualRange:Number(wt.distance(lt,ot).toFixed(0)),viewPosition:lt};return Ot}},{key:"setParam",value:function(lt){var ot=lt||{},it=ot.direction,yt=it===void 0?this.direction:it,Ot=ot.pitch,St=Ot===void 0?this.pitch:Ot,Gt=ot.visualRange,Ut=Gt===void 0?this.visualRange:Gt,Kt=ot.viewPosition,Jt=ot.horizontalViewAngle,te=Jt===void 0?this.horizontalViewAngle:Jt,ie=ot.verticalViewAngle,oe=ie===void 0?this.verticalViewAngle:ie,he=ot.invisibleAreaColor,ne=he===void 0?this.invisibleAreaColor:he,ce=ot.visibleAreaColor,ge=ce===void 0?this.visibleAreaColor:ce;Kt&&(this.viewPosition=Kt,this.direction=yt%360,this.pitch=St,this.visualRange=Ut,this.horizontalViewAngle=te,this.verticalViewAngle=oe,this.invisibleAreaColor=ne,this.visibleAreaColor=ge,!this.pyramid&&this._setVisualPyramid(),!lt.onlyDrawPyramid&&(!this.lightCamera&&this._setLightCamera(),this.pyramid.ellipsoid=this._getVisualPyramidEllipsoid(),this._setCameraParams(),this._updateViewShed()))}},{key:"_getVisualPyramidEllipsoid",value:function(){var lt=this,ot=I.Color.fromCssColorString;return this.innerRange=this.visualRange*.001,this.halfClock=this.horizontalViewAngle/2,this.halfCone=this.verticalViewAngle/2,this.ellipsoid=this.ellipsoid||new I.EllipsoidGraphics({innerRadii:new I.CallbackProperty(function(){(0,B.default)(this,lt);var it=this.visualRange*.001||.001;return new I.Cartesian3(it,it,it)}.bind(this),![]),radii:new I.CallbackProperty(function(){(0,B.default)(this,lt);var it=this.visualRange||.1;return new I.Cartesian3(it,it,it)}.bind(this),![]),minimumClock:new I.CallbackProperty(function(){return(0,B.default)(this,lt),I.Math.toRadians(90-this.direction-this.halfClock)}.bind(this),![]),maximumClock:new I.CallbackProperty(function(){return(0,B.default)(this,lt),I.Math.toRadians(90-this.direction+this.halfClock)}.bind(this),![]),minimumCone:new I.CallbackProperty(function(){return(0,B.default)(this,lt),I.Math.toRadians(90-this.pitch-this.halfCone)}.bind(this),![]),maximumCone:new I.CallbackProperty(function(){return(0,B.default)(this,lt),I.Math.toRadians(90-this.pitch+this.halfCone)}.bind(this),![]),fill:![],outline:!![],outlineColor:new I.CallbackProperty(function(){(0,B.default)(this,lt);var it=this.cueLineColor;return typeof it=="string"?it=ot(it):!it instanceof I.Color&&(it=I.Color.BLUE),it}.bind(this),![]),subdivisions:256,stackPartitions:64,slicePartitions:64}),this.ellipsoid}},{key:"_setVisualPyramid",value:function(){var lt=this.prop.viewer,ot=new I.Entity({position:this.viewPosition,ellipsoid:this._getVisualPyramidEllipsoid(),label:{text:"\u89C2\u5BDF\u70B9",font:"120px sans-serif",scale:.125,distanceDisplayCondition:new I.DistanceDisplayCondition(5,1e4),verticalOrigin:I.VerticalOrigin.BOTTOM,pixelOffset:{x:0,y:-3}}});this.pyramid=lt.entities.add(ot)}},{key:"_setLightCamera",value:function(){var lt=this.prop.viewer;this.lightCamera=new I.Camera(lt.scene),this.lightCamera.position=this.viewPosition}},{key:"_setShadowMap",value:function(){var lt=this.prop.viewer;this.shadowMap=new I.ShadowMap({context:lt.scene.context,lightCamera:this.lightCamera,enabled:this.enabled,isPointLight:!![],pointLightRadius:this.visualRange,cascadesEnabled:![],size:this.size,softShadows:this.softShadows,normalOffset:![],fromLightSource:![]}),this.shadowMap._pointBias.depthBias=.005,lt.scene.shadowMap=this.shadowMap}},{key:"_updateViewShed",value:function(){this.clear(),this._setVisualPyramid(),this._setLightCamera(),this._setCameraParams(),this._setShadowMap(),this._setVisibleAreaColor(),this._setPostStage()}},{key:"_setCameraParams",value:function(){this.visualRange<=0&&(this.visualRange=1),this.lightCamera.frustum.near=.001*this.visualRange,this.lightCamera.frustum.far=this.visualRange;var lt=I.Math.toRadians(this.horizontalViewAngle),ot=I.Math.toRadians(this.verticalViewAngle),it=this.visualRange*Math.tan(lt/2)*2/(this.visualRange*Math.tan(ot/2)*2);this.lightCamera.frustum.aspectRatio=it,lt>ot?this.lightCamera.frustum.fov=lt:this.lightCamera.frustum.fov=ot,this.lightCamera.setView({destination:this.viewPosition,orientation:{heading:I.Math.toRadians(this.direction||0),pitch:I.Math.toRadians(this.pitch||0),roll:0}})}},{key:"_setPostStage",value:function(){var lt,ot=this.prop.viewer,it=this,yt=this.glsl(this.__makeTemplateObject([`
    #define USE_CUBE_MAP_SHADOW true
uniform sampler2D colorTexture;
// \u6DF1\u5EA6\u7EB9\u7406
uniform sampler2D depthTexture;
// \u7EB9\u7406\u5750\u6807
varying vec2 v_textureCoordinates;

uniform mat4 camera_projection_matrix;

uniform mat4 camera_view_matrix;
// \u89C2\u6D4B\u8DDD\u79BB
uniform float far;
//\u9634\u5F71
uniform samplerCube shadowMap_textureCube;

uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;

struct zx_shadowParameters
{
    vec3 texCoords;
    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};

float czm_shadowVisibility(samplerCube shadowMap, zx_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}

vec4 getPositionEC(){
  return czm_windowToEyeCoordinates(gl_FragCoord);
}

vec3 getNormalEC(){
    return vec3(1.);
  }

  vec4 toEye(in vec2 uv,in float depth){
    vec2 xy=vec2((uv.x*2.-1.),(uv.y*2.-1.));
    vec4 posInCamera=czm_inverseProjection*vec4(xy,depth,1.);
    posInCamera=posInCamera/posInCamera.w;
    return posInCamera;
  }

  vec3 pointProjectOnPlane(in vec3 planeNormal,in vec3 planeOrigin,in vec3 point){
    vec3 v01=point-planeOrigin;
    float d=dot(planeNormal,v01);
    return(point-planeNormal*d);
  }

  float getDepth(in vec4 depth){
    float z_window=czm_unpackDepth(depth);
    z_window=czm_reverseLogDepth(z_window);
    float n_range=czm_depthRange.near;
    float f_range=czm_depthRange.far;
    return(2.*z_window-n_range-f_range)/(f_range-n_range);
  }

  float shadow( in vec4 positionEC ){
    vec3 normalEC=getNormalEC();
    zx_shadowParameters shadowParameters;
    shadowParameters.texelStepSize=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
    shadowParameters.depthBias=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
    shadowParameters.normalShadingSmooth=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
    shadowParameters.darkness=shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
    vec3 directionEC=positionEC.xyz-shadowMap_lightPositionEC.xyz;
    float distance=length(directionEC);
    directionEC=normalize(directionEC);
    float radius=shadowMap_lightPositionEC.w;
    if(distance>radius)
    {
      return 2.0;
    }
    vec3 directionWC=czm_inverseViewRotation*directionEC;

    shadowParameters.depth=distance/radius-0.0003;
    shadowParameters.nDotL=clamp(dot(normalEC,-directionEC),0.,1.);

    shadowParameters.texCoords=directionWC;
    float visibility=czm_shadowVisibility(shadowMap_textureCube,shadowParameters);
    return visibility;
  }

  bool visible(in vec4 result)
  {
    result.x/=result.w;
    result.y/=result.w;
    result.z/=result.w;
    return result.x>=-1.&&result.x<=1.&&result.y>=-1.&&result.y<=1.&&result.z>=-1.&&result.z<=1.;
  }

  void main(){
    // \u5F97\u5230\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u5F69\u8272\u7EB9\u7406,\u7EB9\u7406\u5750\u6807)
    gl_FragColor=texture2D(colorTexture,v_textureCoordinates);
    // \u6DF1\u5EA6 = (\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u6DF1\u5EA6\u7EB9\u7406,\u7EB9\u7406\u5750\u6807))
    float depth=getDepth(texture2D(depthTexture,v_textureCoordinates));
    // \u89C6\u89D2 = (\u7EB9\u7406\u5750\u6807,\u6DF1\u5EA6)
    vec4 viewPos=toEye(v_textureCoordinates,depth);
    //\u4E16\u754C\u5750\u6807
    vec4 wordPos=czm_inverseView*viewPos;
    // \u865A\u62DF\u76F8\u673A\u4E2D\u5750\u6807
    vec4 vcPos=camera_view_matrix*wordPos;
    float near=.001*far;
    float dis=length(vcPos.xyz);
    if(dis>near&&dis<far){
      //\u900F\u89C6\u6295\u5F71
      vec4 posInEye=camera_projection_matrix*vcPos;
      // \u53EF\u89C6\u533A\u989C\u8272
      vec4 v_color=vec4(0.,1.,0.,.5);
      vec4 inv_color=vec4(1.,0.,0.,.5);
      if(visible(posInEye)){
        float vis=shadow(viewPos);
        if(vis>0.3){
          gl_FragColor=mix(gl_FragColor,v_color,.5);
        } else{
          gl_FragColor=mix(gl_FragColor,inv_color,.5);
        }
      }
    }
  }
`],[`
    #define USE_CUBE_MAP_SHADOW true
uniform sampler2D colorTexture;
// \u6DF1\u5EA6\u7EB9\u7406
uniform sampler2D depthTexture;
// \u7EB9\u7406\u5750\u6807
varying vec2 v_textureCoordinates;

uniform mat4 camera_projection_matrix;

uniform mat4 camera_view_matrix;
// \u89C2\u6D4B\u8DDD\u79BB
uniform float far;
//\u9634\u5F71
uniform samplerCube shadowMap_textureCube;

uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;

struct zx_shadowParameters
{
    vec3 texCoords;
    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};

float czm_shadowVisibility(samplerCube shadowMap, zx_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}

vec4 getPositionEC(){
  return czm_windowToEyeCoordinates(gl_FragCoord);
}

vec3 getNormalEC(){
    return vec3(1.);
  }

  vec4 toEye(in vec2 uv,in float depth){
    vec2 xy=vec2((uv.x*2.-1.),(uv.y*2.-1.));
    vec4 posInCamera=czm_inverseProjection*vec4(xy,depth,1.);
    posInCamera=posInCamera/posInCamera.w;
    return posInCamera;
  }

  vec3 pointProjectOnPlane(in vec3 planeNormal,in vec3 planeOrigin,in vec3 point){
    vec3 v01=point-planeOrigin;
    float d=dot(planeNormal,v01);
    return(point-planeNormal*d);
  }

  float getDepth(in vec4 depth){
    float z_window=czm_unpackDepth(depth);
    z_window=czm_reverseLogDepth(z_window);
    float n_range=czm_depthRange.near;
    float f_range=czm_depthRange.far;
    return(2.*z_window-n_range-f_range)/(f_range-n_range);
  }

  float shadow( in vec4 positionEC ){
    vec3 normalEC=getNormalEC();
    zx_shadowParameters shadowParameters;
    shadowParameters.texelStepSize=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
    shadowParameters.depthBias=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
    shadowParameters.normalShadingSmooth=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
    shadowParameters.darkness=shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
    vec3 directionEC=positionEC.xyz-shadowMap_lightPositionEC.xyz;
    float distance=length(directionEC);
    directionEC=normalize(directionEC);
    float radius=shadowMap_lightPositionEC.w;
    if(distance>radius)
    {
      return 2.0;
    }
    vec3 directionWC=czm_inverseViewRotation*directionEC;

    shadowParameters.depth=distance/radius-0.0003;
    shadowParameters.nDotL=clamp(dot(normalEC,-directionEC),0.,1.);

    shadowParameters.texCoords=directionWC;
    float visibility=czm_shadowVisibility(shadowMap_textureCube,shadowParameters);
    return visibility;
  }

  bool visible(in vec4 result)
  {
    result.x/=result.w;
    result.y/=result.w;
    result.z/=result.w;
    return result.x>=-1.&&result.x<=1.&&result.y>=-1.&&result.y<=1.&&result.z>=-1.&&result.z<=1.;
  }

  void main(){
    // \u5F97\u5230\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u5F69\u8272\u7EB9\u7406,\u7EB9\u7406\u5750\u6807)
    gl_FragColor=texture2D(colorTexture,v_textureCoordinates);
    // \u6DF1\u5EA6 = (\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u6DF1\u5EA6\u7EB9\u7406,\u7EB9\u7406\u5750\u6807))
    float depth=getDepth(texture2D(depthTexture,v_textureCoordinates));
    // \u89C6\u89D2 = (\u7EB9\u7406\u5750\u6807,\u6DF1\u5EA6)
    vec4 viewPos=toEye(v_textureCoordinates,depth);
    //\u4E16\u754C\u5750\u6807
    vec4 wordPos=czm_inverseView*viewPos;
    // \u865A\u62DF\u76F8\u673A\u4E2D\u5750\u6807
    vec4 vcPos=camera_view_matrix*wordPos;
    float near=.001*far;
    float dis=length(vcPos.xyz);
    if(dis>near&&dis<far){
      //\u900F\u89C6\u6295\u5F71
      vec4 posInEye=camera_projection_matrix*vcPos;
      // \u53EF\u89C6\u533A\u989C\u8272
      vec4 v_color=vec4(0.,1.,0.,.5);
      vec4 inv_color=vec4(1.,0.,0.,.5);
      if(visible(posInEye)){
        float vis=shadow(viewPos);
        if(vis>0.3){
          gl_FragColor=mix(gl_FragColor,v_color,.5);
        } else{
          gl_FragColor=mix(gl_FragColor,inv_color,.5);
        }
      }
    }
  }
`])),Ot=this.v_color||"(0.,1.,0.,.5)",St=this.inv_color||"(1., 0., 0., .5)",Gt=(0,r.default)(lt=`
    #define USE_CUBE_MAP_SHADOW true
uniform sampler2D colorTexture;
// \u6DF1\u5EA6\u7EB9\u7406
uniform sampler2D depthTexture;
// \u7EB9\u7406\u5750\u6807
varying vec2 v_textureCoordinates;

uniform mat4 camera_projection_matrix;

uniform mat4 camera_view_matrix;
// \u89C2\u6D4B\u8DDD\u79BB
uniform float far;
//\u9634\u5F71
uniform samplerCube shadowMap_textureCube;

uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;

struct zx_shadowParameters
{
    vec3 texCoords;
    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};

float czm_shadowVisibility(samplerCube shadowMap, zx_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}

vec4 getPositionEC(){
  return czm_windowToEyeCoordinates(gl_FragCoord);
}

vec3 getNormalEC(){
    return vec3(1.);
  }

  vec4 toEye(in vec2 uv,in float depth){
    vec2 xy=vec2((uv.x*2.-1.),(uv.y*2.-1.));
    vec4 posInCamera=czm_inverseProjection*vec4(xy,depth,1.);
    posInCamera=posInCamera/posInCamera.w;
    return posInCamera;
  }

  vec3 pointProjectOnPlane(in vec3 planeNormal,in vec3 planeOrigin,in vec3 point){
    vec3 v01=point-planeOrigin;
    float d=dot(planeNormal,v01);
    return(point-planeNormal*d);
  }

  float getDepth(in vec4 depth){
    float z_window=czm_unpackDepth(depth);
    z_window=czm_reverseLogDepth(z_window);
    float n_range=czm_depthRange.near;
    float f_range=czm_depthRange.far;
    return(2.*z_window-n_range-f_range)/(f_range-n_range);
  }

  float shadow( in vec4 positionEC ){
    vec3 normalEC=getNormalEC();
    zx_shadowParameters shadowParameters;
    shadowParameters.texelStepSize=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
    shadowParameters.depthBias=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
    shadowParameters.normalShadingSmooth=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
    shadowParameters.darkness=shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
    vec3 directionEC=positionEC.xyz-shadowMap_lightPositionEC.xyz;
    float distance=length(directionEC);
    directionEC=normalize(directionEC);
    float radius=shadowMap_lightPositionEC.w;
    if(distance>radius)
    {
      return 2.0;
    }
    vec3 directionWC=czm_inverseViewRotation*directionEC;

    shadowParameters.depth=distance/radius-0.0003;
    shadowParameters.nDotL=clamp(dot(normalEC,-directionEC),0.,1.);

    shadowParameters.texCoords=directionWC;
    float visibility=czm_shadowVisibility(shadowMap_textureCube,shadowParameters);
    return visibility;
  }

  bool visible(in vec4 result)
  {
    result.x/=result.w;
    result.y/=result.w;
    result.z/=result.w;
    return result.x>=-1.&&result.x<=1.&&result.y>=-1.&&result.y<=1.&&result.z>=-1.&&result.z<=1.;
  }

  void main(){
    // \u5F97\u5230\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u5F69\u8272\u7EB9\u7406,\u7EB9\u7406\u5750\u6807)
    gl_FragColor=texture2D(colorTexture,v_textureCoordinates);
    // \u6DF1\u5EA6 = (\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u6DF1\u5EA6\u7EB9\u7406,\u7EB9\u7406\u5750\u6807))
    float depth=getDepth(texture2D(depthTexture,v_textureCoordinates));
    // \u89C6\u89D2 = (\u7EB9\u7406\u5750\u6807,\u6DF1\u5EA6)
    vec4 viewPos=toEye(v_textureCoordinates,depth);
    //\u4E16\u754C\u5750\u6807
    vec4 wordPos=czm_inverseView*viewPos;
    // \u865A\u62DF\u76F8\u673A\u4E2D\u5750\u6807
    vec4 vcPos=camera_view_matrix*wordPos;
    float near=.001*far;
    float dis=length(vcPos.xyz);
    if(dis>near&&dis<far){
      //\u900F\u89C6\u6295\u5F71
      vec4 posInEye=camera_projection_matrix*vcPos;
      // \u53EF\u89C6\u533A\u989C\u8272
      vec4 v_color=vec4`.concat(Ot,`;
      vec4 inv_color=vec4`)).call(lt,St,`;
      if(visible(posInEye)){
        float vis=shadow(viewPos);
        if(vis>0.3){
          gl_FragColor=mix(gl_FragColor,v_color,v_color.w);
        } else{
          gl_FragColor=mix(gl_FragColor,inv_color,inv_color.w);
        }
      }
    }
  }
`),Ut=new I.PostProcessStage({fragmentShader:Gt,uniforms:{camera_projection_matrix:this.lightCamera.frustum.projectionMatrix,camera_view_matrix:this.lightCamera.viewMatrix,far:function(){return it.visualRange},shadowMap_textureCube:function(){return it.shadowMap.update((0,s.default)(ot.scene,"_frameState")),(0,s.default)(it.shadowMap,"_shadowMapTexture")},shadowMap_matrix:function(){return it.shadowMap.update((0,s.default)(ot.scene,"_frameState")),(0,s.default)(it.shadowMap,"_shadowMapMatrix")},shadowMap_lightPositionEC:function(){return it.shadowMap.update((0,s.default)(ot.scene,"_frameState")),(0,s.default)(it.shadowMap,"_lightPositionEC")},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){it.shadowMap.update((0,s.default)(ot.scene,"_frameState"));var Jt=it.shadowMap._pointBias;return I.Cartesian4.fromElements(Jt.normalOffsetScale,it.shadowMap._distance,it.shadowMap.maximumDistance,0,new I.Cartesian4)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){it.shadowMap.update((0,s.default)(ot.scene,"_frameState"));var Jt=it.shadowMap._pointBias,te=new I.Cartesian2,ie=te;return ie.x=1/it.shadowMap._textureSize.x,ie.y=1/it.shadowMap._textureSize.y,I.Cartesian4.fromElements(ie.x,ie.y,Jt.depthBias,Jt.normalShadingSmooth,new I.Cartesian4)}}});this.postStage=ot.scene.postProcessStages.add(Ut)}},{key:"drawViewCentrum",value:function(){var lt=this.prop.viewer,ot=new I.Cartesian3,it=new I.Matrix3,yt=new I.Quaternion,Ot=this.lightCamera.positionWC,St=this.lightCamera.directionWC,Gt=this.lightCamera.upWC,Ut=this.lightCamera.rightWC;Ut=I.Cartesian3.negate(Ut,ot);var Kt=it;I.Matrix3.setColumn(Kt,0,Ut,Kt),I.Matrix3.setColumn(Kt,1,Gt,Kt),I.Matrix3.setColumn(Kt,2,St,Kt);var Jt=I.Quaternion.fromRotationMatrix(Kt,yt),te=new I.GeometryInstance({geometry:new I.FrustumOutlineGeometry({frustum:this.lightCamera.frustum,origin:this.viewPosition,orientation:Jt}),id:Math.random().toString(36).substr(2),attributes:{color:I.ColorGeometryInstanceAttribute.fromColor(I.Color.RED),show:new I.ShowGeometryInstanceAttribute(!![])}});this.frustumOutline=lt.scene.primitives.add(new I.Primitive({geometryInstances:[te],appearance:new I.PerInstanceColorAppearance({flat:!![],translucent:![]})}))}},{key:"_setVisibleAreaColor",value:function(){var lt,ot,it,yt,Ot,St,Gt,Ut,Kt=this.visibleAreaColor||I.Color.GREEN,Jt=this.invisibleAreaColor||I.Color.RED,te=[Kt.red,Kt.green,Kt.blue,Kt.alpha],ie=te[0],oe=te[1],he=te[2],ne=te[3],ce=[Jt.red,Jt.green,Jt.blue,Jt.alpha],ge=ce[0],Me=ce[1],It=ce[2],Wt=ce[3];ne=ne==0?0:.5,Wt=Wt==0?0:.5,Gt=(0,r.default)(lt=(0,r.default)(ot=(0,r.default)(it="(".concat(ie.toFixed(2),",")).call(it,oe.toFixed(2),",")).call(ot,he.toFixed(2),",")).call(lt,ne.toFixed(1),")"),Ut=(0,r.default)(yt=(0,r.default)(Ot=(0,r.default)(St="(".concat(ge.toFixed(2),",")).call(St,Me.toFixed(2),",")).call(Ot,It.toFixed(2),",")).call(yt,Wt.toFixed(1),")"),this.v_color=Gt,this.inv_color=Ut}}]),gt}(Mt);z.ViewShedAnalysis=Dt;var Rt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,A.default)(this,gt),dt=dt||{},dt.type="sun",ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){this.sunTime={startTime:"2020-12-31",endTime:"2021-01-01"};var lt=this.prop.viewer,ot=this;this._sun=function(){var it=I.JulianDate.addHours(lt.clock.currentTime,8,new I.JulianDate);it=I.JulianDate.toGregorianDate(it);var yt=Ot(it.hour)+":"+Ot(it.minute);ot.ctime=yt,ot.isoTime=I.JulianDate.toDate(lt.clock.currentTime.clone()),ot.foo&&lt.clock.shouldAnimate&&ot.foo();function Ot(St){return St<10?"0"+St.toString():St.toString()}}}},{key:"sunStop",value:function(){var lt=this.prop.viewer;lt.clock.shouldAnimate=![],lt.clock.onTick.removeEventListener(this._sun)}},{key:"start",value:function(lt){var ot=this.prop.viewer;if(lt){var it=I.JulianDate.fromDate(new Date(this.sunTime.startTime)),yt=I.JulianDate.fromDate(new Date(this.sunTime.endTime)),Ot;if(Ot=I.JulianDate.compare(yt,it),Ot<=0){E.error("\u65F6\u95F4\u8BBE\u7F6E\u5931\u8D25\uFF0C\u8D77\u70B9\u9700\u5728\u7EC8\u70B9\u524D");return}ot.clock.startTime=it,ot.clock.currentTime=it,ot.clock.stopTime=yt,ot.clock.clockRange=I.ClockRange.LOOP_STOP,ot.clock.clockStep=I.ClockStep.SYSTEM_CLOCK_MULTIPLIER,this.sunStop(),ot.clock.shouldAnimate=!![],ot.clock.onTick.addEventListener(this._sun)}else this.clear()}},{key:"clear",value:function(){this.sunStop()}},{key:"destroy",value:function(){}},{key:"setTime",value:function(lt){var ot=lt||{},it=ot.start,yt=ot.end;it&&(this.sunTime.startTime=it),yt&&(this.sunTime.endTime=yt)}},{key:"setTerrainShade",value:function(lt){var ot=this.prop.viewer;ot.scene.globe.shadows=lt?I.ShadowMode.ENABLED:I.ShadowMode.DISABLED}},{key:"setShadowMode",value:function(lt){var ot=this.prop.viewer;ot.shadows=!!lt,ot.scene.globe.enableLighting=!!lt}},{key:"setTimeMultiplier",value:function(lt,ot){var it=this.prop.viewer;return ot?it.clock.multiplier+=lt:it.clock.multiplier=lt,it.clock.multiplier}}]),gt}(Mt);z.SunAnalysis=Rt;var Tt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,A.default)(this,gt),dt=dt||{},dt.type="height",dt.drawConfig={hasEdit:![]},ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){var lt=this;this.entityLabel=null,this.curEnt=null,this.warningShow=!![],this.drawControl.on(G.EditStart,function(ot){(0,B.default)(this,lt),this.curEnt=ot.entity}.bind(this)),this.drawControl.on(G.EditMovePoint,function(ot){(0,B.default)(this,lt);var it=ot.entity.polygon.extrudedHeight&&ot.entity.polygon.extrudedHeight.getValue();this.addLabel(ot.entity,it),this.addWarningVolumn(ot.entity)}.bind(this)),this.drawControl.on(G.EditStop,function(ot){(0,B.default)(this,lt),this.curEnt=ot.entity}.bind(this)),this.drawControl.on("delete-feature",function(ot){(0,B.default)(this,lt),ot._name==="controlMajor"&&this.clear()}.bind(this))}},{key:"addLabel",value:function(lt,ot){lt=lt||this.curEnt;var it=this.prop.dataSource,yt=lt.polygon.hierarchy.getValue().positions,Ot=lt.polygon.extrudedHeight&&lt.polygon.extrudedHeight.getValue(),St=Ot.toFixed(2),Gt=(0,Z.getMaxHeight)(yt),Ut="\u6D77\u62D4\u9AD8\u5EA6\uFF1A"+St+`\u7C73
\u5730\u576A\u9AD8\u5EA6\uFF1A`+Gt+"\u7C73";this.height1=St,this.height2=Gt;var Kt=(0,W.toGeoJSON)(lt),Jt=U.centerOfMass(Kt);if(!(Jt==null||Jt.geometry==null||Jt.geometry.coordinates==null||Jt.geometry.coordinates.length<2)){var te=I.Cartesian3.fromDegrees(Jt.geometry.coordinates[0],Jt.geometry.coordinates[1],Ot+20);this._removeLabel(),this.entityLabel=it.entities.add({position:te,label:{text:Ut,scale:.6,font:"30px \u6977\u4F53",showBackground:!![],horizontalOrigin:I.HorizontalOrigin.CENTER,verticalOrigin:I.VerticalOrigin.BOTTOM,heightReference:I.HeightReference.RELATIVE_TO_GROUND,distanceDisplayCondition:new I.DistanceDisplayCondition(0,5e3),disableDepthTestDistance:5e3}})}}},{key:"addWarningVolumn",value:function(lt){var ot=this,it=this.prop.viewer;it.scene.primitives.remove(this.primitive),this.primitive=null;var yt=lt._attribute.style.extrudedHeight,Ot=lt.polygon.extrudedHeight&&lt.polygon.extrudedHeight.getValue(),St=lt.polygon.hierarchy.getValue().positions,Gt=[];St.forEach(function(Jt,te){(0,B.default)(this,ot),Gt[te]=Jt.clone()}.bind(this));var Ut=new I.PolygonGeometry({polygonHierarchy:new I.PolygonHierarchy(St),extrudedHeight:400,height:Ot}),Kt=I.PolygonGeometry.createGeometry(Ut);Gt.forEach(function(Jt,te){(0,B.default)(this,ot),lt._positions_draw[te]=Jt.clone(),lt.editing._positions_draw[te]=Jt.clone()}.bind(this)),this.primitive=it.scene.primitives.add(new I.ClassificationPrimitive({show:this.warningShow,geometryInstances:new I.GeometryInstance({geometry:Kt,attributes:{color:I.ColorGeometryInstanceAttribute.fromColor(I.Color.fromCssColorString("#f00f").withAlpha(.5)),show:new I.ShowGeometryInstanceAttribute(!![])}}),asynchronous:![],classificationType:I.ClassificationType.CESIUM_3D_TILE}))}},{key:"setWarningShow",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![];this.warningShow=lt,this.primitive&&(this.primitive.show=lt)}},{key:"start",value:function(lt){var ot=this,it=this.prop.viewer,yt=this.extrudedHeight||30;lt?(this.drawControl.hasEdit(!![]),this.drawControl.startDraw({drawtype:"polygon",name:"pol",style:{color:"#0047ab",opacity:.6,extrudedHeight:yt},success:function(St){(0,B.default)(this,ot),St.name="controlMajor",this.addLabel(St,yt),this.addWarningVolumn(St)}.bind(this)})):this.clear()}},{key:"_removeLabel",value:function(){var lt=this.prop.dataSource;this.entityLabel&&lt.entities.remove(this.entityLabel)}},{key:"clear",value:function(){var lt=this.prop.viewer;this.drawControl.hasEdit(![]),this._removeLabel(),this.clearDraw(),this.curEnt=null,lt.scene.primitives.remove(this.primitive),this.primitive=null}},{key:"destroy",value:function(){this.clear()}},{key:"getHeight",value:function(){if(this.curEnt)return this.curEnt.polygon.extrudedHeight}},{key:"setHeight",value:function(lt){if(this.curEnt)if(I.defined(lt)&&typeof lt=="number"){var ot=lt-this.curEnt._attribute.style.extrudedHeight;this.curEnt._attribute.style.extrudedHeight=lt,this.curEnt.polygon.extrudedHeight=this.curEnt.polygon.extrudedHeight+ot,this.addLabel(null,lt),this.addWarningVolumn(this.curEnt)}else E.warn("param [height] should be [number]")}}]),gt}(Mt);z.ControlHeightAnalysis=Tt;var mt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,A.default)(this,gt),dt=dt||{},dt.type="terrain",dt.drawConfig={hasEdit:![]},ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){var lt=this,ot=I.Cartesian3.fromDegreesArray([120,30,120.001,30,120.001,30.001,120,30.001]);this._smallRegion=new I.PolygonHierarchy(ot),this.drawControl.on(G.DrawAddPoint,function(it){var yt=this;if((0,B.default)(this,lt),it.positions.length==1){var Ot=(0,c.default)(this.drawControl.dataSource.entities),St=this.drawControl.dataSource.entities,Gt=it.entity.id;Ot.forEach(function(Ut){(0,B.default)(this,yt),Ut.id!=Gt&&St.remove(Ut)}.bind(this))}}.bind(this)),this.contourWidth=2,this.contourSpacing=50,this._terrainLegend={elevation:void 0,slope:void 0,aspect:void 0},this._terrainLegendSample={slope:{stop:[0,2,6,15,25],color:["#55e700","#fffb00","#ffd992","#ffb600","#ff2500"],unit:"(\u5355\u4F4D\uFF1A\u5EA6)"},aspect:{stop:[0,.125,.25,.375,.5,.625,.75,.875,1],color:["#34AF00","#AAFF14","#AEE900","#E9E932","#E9E990","#FFAA00","#FF780A","#FF320A","#f00"],unit:"",direction:["\u5317","\u897F\u5317","\u897F","\u897F\u5357","\u5357","\u4E1C\u5357","\u4E1C","\u4E1C\u5317","\u5317"]},elevation:{stop:[0,.045,.1,.15,.37,.54,1],color:["#000000","#2747E0","#D33B7D","#D33038","#FF9742","#ffd700","#ffffff"],unit:"(\u5355\u4F4D\uFF1A\u7C73)"}},this._material={getElevationContourMaterial:function(){return(0,B.default)(this,lt),new I.Material({fabric:{type:"ElevationColorContour",materials:{contourMaterial:{type:"ElevationContour"},elevationRampMaterial:{type:"ElevationRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? elevationRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, elevationRampMaterial.alpha)"}},translucent:![]})}.bind(this),getSlopeContourMaterial:function(){return(0,B.default)(this,lt),new I.Material({fabric:{type:"SlopeColorContour",materials:{contourMaterial:{type:"ElevationContour"},slopeRampMaterial:{type:"SlopeRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? slopeRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, slopeRampMaterial.alpha)"}},translucent:![]})}.bind(this),getAspectContourMaterial:function(){return(0,B.default)(this,lt),new I.Material({fabric:{type:"AspectColorContour",materials:{contourMaterial:{type:"ElevationContour"},aspectRampMaterial:{type:"AspectRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? aspectRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, aspectRampMaterial.alpha)"}},translucent:![]})}.bind(this)}}},{key:"start",value:function(lt){this.updateMaterial(lt)}},{key:"setLegend",value:function(lt,ot){var it=JSON.parse((0,x.default)(ot));this._terrainLegend[lt]=it}},{key:"drawPolygon",value:function(){var lt=this,ot=this,it={fill:!![],fillType:"color",color:"#ffff00",opacity:.6,outlineWidth:3,outlineColor:"#0dd624",outlineOpacity:.6,clampToGround:!![]},yt=function(St){var Gt=this,Ut=St.id,Kt=ot.prop.viewer.scene.globe;if(I.defined(Kt.material)){var Jt,te=(0,h.default)(Jt=Kt.material.regionPolygons._polygons).call(Jt,function(ie){if((0,B.default)(this,Gt),ie._polygonHierarchy.id!==Ut)return ie._polygonHierarchy}.bind(this));Kt.material.regionPolygons=new I.RegionPolygonCollection({polygons:te,enabled:!![]}),ot.hierarchys=te}};this.drawControl.startDraw({drawtype:"polygon",style:it,success:function(St){var Gt=this;(0,B.default)(this,lt);var Ut=St,Kt=Ut.polygon.material.color.getValue();Kt.alpha=0,Ut.polygon.material.color.setValue(Kt);var Jt=this.prop.viewer.scene.globe,te=Ut.polygon.hierarchy.getValue();if(I.defined(Jt.material)){var ie,oe=(0,h.default)(ie=Jt.material.regionPolygons._polygons).call(ie,function(he){return(0,B.default)(this,Gt),he._polygonHierarchy}.bind(this));te.id=Ut.id,oe.push(te),Jt.material.regionPolygons=new I.RegionPolygonCollection({polygons:oe,enabled:!![]}),this.hierarchys=oe}}.bind(this)})}},{key:"updateMaterial",value:function(lt){var ot=this.prop.viewer,it=lt||{},yt=it.shadingUniforms,Ot=yt===void 0?{}:yt,St=it.hasContour,Gt=St===void 0?![]:St,Ut=it.selectedShading,Kt=it.minHeight,Jt=Kt===void 0?-414:Kt,te=it.maxHeight,ie=te===void 0?8777:te,oe=it.contourWidth,he=oe===void 0?2:oe,ne=it.contourSpacing,ce=ne===void 0?50:ne,ge=it.contourColor,Me=ge===void 0?I.Color.RED.clone():ge,It=ot.scene.globe,Wt,_t;Gt?(Ut==="elevation"?(Wt=this._material.getElevationContourMaterial(),Ot=Wt.materials.elevationRampMaterial.uniforms,Ot.minimumHeight=Jt,Ot.maximumHeight=ie,_t=Wt.materials.contourMaterial.uniforms):Ut==="slope"?(Wt=this._material.getSlopeContourMaterial(),Ot=Wt.materials.slopeRampMaterial.uniforms,_t=Wt.materials.contourMaterial.uniforms):Ut==="aspect"?(Wt=this._material.getAspectContourMaterial(),Ot=Wt.materials.aspectRampMaterial.uniforms,_t=Wt.materials.contourMaterial.uniforms):(Wt=I.Material.fromType("ElevationContour"),_t=Wt.uniforms),_t.width=he,_t.spacing=ce,_t.color=Me):Ut==="elevation"?(Wt=I.Material.fromType("ElevationRamp"),Ot=Wt.uniforms,Ot.minimumHeight=Jt,Ot.maximumHeight=ie):Ut==="slope"?(Wt=I.Material.fromType("SlopeRamp"),Ot=Wt.uniforms):Ut==="aspect"&&(Wt=I.Material.fromType("AspectRamp"),Ot=Wt.uniforms),Ut&&Ut!=="none"&&(Ot.image=this._getImage(Ut)),It.material=Wt,I.defined(It.material)&&Ut!="none"&&(It.material.regionPolygons=new I.RegionPolygonCollection({polygons:this.hierarchys,enabled:this.regionPolygonsEnabled}))}},{key:"clear",value:function(){this.updateMaterial({hasContour:![],selectedShading:"none"}),this._terrainLight(![]),this.drawControl.clearDraw(),this.drawControl.hasEdit(![])}},{key:"destroy",value:function(){}},{key:"_customColorRamp",value:function(lt){if(lt.unit=="(\u5355\u4F4D\uFF1A\u5EA6)"||lt.unit=="(\u5355\u4F4D\uFF1A\u7C73)"){var ot=this._customColorRamp2(lt);return ot}var it=document.createElement("canvas");it.width=100,it.height=1;var yt=it.getContext("2d"),Ot=yt.createLinearGradient(0,0,100,0),St=lt.stop,Gt=lt.color,Ut=St[St.length-1],Kt=lt.opacity===void 0?.6:lt.opacity,Jt=I.Color.fromCssColorString;for(var te in Gt)if(Gt.hasOwnProperty(te)){var ie=Jt(Gt[te]),oe=ie.alpha;oe!==0&&(ie=ie.withAlpha(Kt)),Gt[te]=ie.toCssHexString()}Gt[8]=Gt[0];for(var he in St)if(St.hasOwnProperty(he)){var ne=St[he]/Ut,ce=ne+.25;ce=ce>1?ce-1:ce,Ot.addColorStop(ce,Gt[he])}return yt.fillStyle=Ot,yt.fillRect(0,0,100,1),it}},{key:"_customColorRamp2",value:function(lt){var ot=this,it=I.Color.fromCssColorString,yt=document.createElement("canvas");yt.width=100,yt.height=1;var Ot=yt.getContext("2d"),St=Ot.createLinearGradient(0,0,100,0),Gt=lt.stop,Ut=lt.color;Gt=JSON.parse((0,x.default)(Gt)),Ut=JSON.parse((0,x.default)(Ut));var Kt=lt.opacity||.6;for(var Jt in Ut)if(Ut.hasOwnProperty(Jt)){var te=it(Ut[Jt]).withAlpha(Kt);Ut[Jt]=te.toCssHexString()}lt.unit=="(\u5355\u4F4D\uFF1A\u5EA6)"?Gt=(0,h.default)(Gt).call(Gt,function(he){return(0,B.default)(this,ot),he/90}.bind(this)):Gt=(0,h.default)(Gt).call(Gt,function(he){return(0,B.default)(this,ot),(he+395)/8777}.bind(this)),St.addColorStop(0,"#0000"),St.addColorStop(1,"#0000"),Gt.unshift(Gt[0]),Gt.push(Gt[Gt.length-1]),Ut.unshift(it(Ut[0]).withAlpha(0).toCssHexString()),Ut.push(it(Ut[Ut.length-1]).withAlpha(0).toCssHexString());for(var ie in Gt)if(Gt.hasOwnProperty(ie)){var oe=Gt[ie];St.addColorStop(oe,Ut[ie])}return Ot.fillStyle=St,Ot.fillRect(0,0,100,1),yt}},{key:"_getImage",value:function(lt){var ot={elevation:[0,.045,.1,.15,.37,.54,1],slope:[0,.29,.5,Math.sqrt(2)/2,.87,.91,1],aspect:[0,.2,.4,.6,.8,.9,1]};function it(yt){var Ot=document.createElement("canvas");Ot.width=100,Ot.height=1;var St=Ot.getContext("2d"),Gt=St.createLinearGradient(0,0,100,0),Ut=ot[yt];return Gt.addColorStop(Ut[0],"#000000"),Gt.addColorStop(Ut[1],"#2747E0"),Gt.addColorStop(Ut[2],"#D33B7D"),Gt.addColorStop(Ut[3],"#D33038"),Gt.addColorStop(Ut[4],"#FF9742"),Gt.addColorStop(Ut[5],"#ffd700"),Gt.addColorStop(Ut[6],"#ffffff"),St.fillStyle=Gt,St.fillRect(0,0,100,1),Ot}return this._terrainLegend[lt]?this._customColorRamp(this._terrainLegend[lt]):it(lt)}},{key:"_terrainLight",value:function(lt){var ot=this.prop.viewer;ot.scene.globe.enableLighting=!!lt,lt?(ot.scene.light=new I.DirectionalLight({direction:ot.scene.camera.directionWC}),ot.scene.globe.dynamicAtmosphereLighting=![]):(ot.scene.light=new I.SunLight,ot.scene.globe.dynamicAtmosphereLighting=!![],ot.scene.globe.dynamicAtmosphereLightingFromSun=![])}}]),gt}(Mt);z.TerrainAnalysis=mt;var Nt=function(){function Zt(ft){(0,A.default)(this,Zt),ft=ft||{},this.entities=[],this.water=ft.water,this.waters=ft.waters,this.positions=ft.positions,this.waterObjs=ft.waterObjs,this.dataSource=ft.dataSource,this.floodInstance=ft.floodInstance}return(0,N.default)(Zt,[{key:"changeFlood",value:function(gt){var dt=gt.height,lt=gt.color;if(this.positions&&this.waters&&this.water){this.clearpropup();var ot=this.water.id,it=this.water.geometryInstances.id,yt;if(!I.defined(dt))yt=this.water.geometryInstances;else{var Ot=new I.PolygonGeometry({polygonHierarchy:new I.PolygonHierarchy(this.positions),extrudedHeight:dt});yt=new I.GeometryInstance({geometry:Ot,id:it,attributes:{color:new I.ColorGeometryInstanceAttribute(0,1,1,.5)}})}var St;if(!lt)St=this.water.appearance;else{E.log("target"),lt=lt===""?"#5e7666":lt;var Gt=I.Color.fromCssColorString(lt);Gt.alpha===1&&(Gt=Gt.withAlpha(.8)),this.baseWaterColor=Gt;var Ut=new I.Material({fabric:{type:"Water",uniforms:{baseWaterColor:Gt,blendColor:I.Color.SKYBLUE,normalMap:H.default,frequency:2e3,animationSpeed:.01,amplitude:10,specularIntensity:2,fadeFactor:2}}});St=new I.EllipsoidSurfaceAppearance({material:Ut})}this.waters.remove(this.water),this.water=this.waters.add(new I.Primitive({geometryInstances:yt,appearance:St,releaseGeometryInstances:![]})),this.water.id=ot}}},{key:"setHeight",value:function(gt){if(this.positions&&this.waters&&this.water){this.clearpropup();var dt=this.water.id,lt=this.water.geometryInstances.id,ot=new I.PolygonGeometry({polygonHierarchy:new I.PolygonHierarchy(this.positions),extrudedHeight:gt}),it=new I.GeometryInstance({geometry:ot,id:lt,attributes:{color:new I.ColorGeometryInstanceAttribute(0,1,1,.5)}}),yt=this.water.appearance;this.waters.remove(this.water),this.water=this.waters.add(new I.Primitive({geometryInstances:it,appearance:yt,releaseGeometryInstances:![]})),this.water.id=dt}}},{key:"_clearWater",value:function(){var gt=this;this.waters.remove(this.water);var dt=this.waterObjs,lt=this.water.geometryInstances.id,ot=(0,a.default)(dt).call(dt,function(it){return(0,B.default)(this,gt),it.water.geometryInstances.id==lt}.bind(this));(0,i.default)(dt).call(dt,ot,1),this.water=null}},{key:"clearpropup",value:function(){var gt=this,dt=this.dataSource,lt=this.entities;lt.forEach(function(ot){(0,B.default)(this,gt),dt.entities.remove(ot)}.bind(this)),this.entities=[]}},{key:"clearAll",value:function(){this._clearWater(),this.clearpropup(),this.water=null,this.waters=null,this.positions=null,this.waterObjs=null}}]),Zt}(),ct=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,A.default)(this,gt),dt=dt||{},dt.type="flood",dt.drawConfig=!![],ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){this.oceanPrimitive=null,this.positions=null,this.height=50,this.color="#5e7666",this.prop.ellipsoid=this.prop.viewer.scene.globe.ellipsoid,this.prop.waters=new I.PrimitiveCollection,this.prop.waterObjs=[],this.prop.viewer.scene.primitives.add(this.prop.waters);var lt=new J.PointPopup(this.prop.viewer);lt._isOnly=![],this.prop.popup=lt}},{key:"_getWindowPosition",value:function(lt){var ot=this.prop.viewer,it=ot.scene.cartesianToCanvasCoordinates(lt);return ot.scene.globe.pick(ot.camera.getPickRay(it),ot.scene)}},{key:"setWaterProp",value:function(lt){var ot=this,it=lt.height,yt=lt.color,Ot=this.prop.waterObjs;I.defined(it)&&(this.height=it),I.defined(yt)&&(this.color=yt),Ot.forEach(function(St){(0,B.default)(this,ot),St.changeFlood({height:it,color:yt})}.bind(this))}},{key:"setHeight",value:function(lt){var ot=this,it=this.prop.waterObjs;I.defined(lt)&&typeof lt=="number"?(this.height=lt,it.forEach(function(yt){(0,B.default)(this,ot),yt.setHeight({height:lt})}.bind(this))):E.warn("param [height] should be [number]")}},{key:"floodDraw",value:function(lt){var ot=this,it=this.prop.ellipsoid;lt=lt||{};var yt=lt||{},Ot=yt.style,St=Ot===void 0?{color:"#0047ab",opacity:.6,extrudedHeight:this.height}:Ot;this.drawControl.startDraw({drawtype:"polygon",style:St,success:function(Ut){(0,B.default)(this,ot);var Kt=Ut.polygon.hierarchy.getValue().positions,Jt=(0,W.toGeoJSON)(Ut),te=U.centerOfMass(Jt),ie=te.geometry.coordinates,oe=I.Cartesian3.fromDegrees(ie[0],ie[1]),he=it.geodeticSurfaceNormal(oe,new Pt);this.prop.normal=he;var ne=(0,Z.getMaxHeight)(Ut._positions_draw);this.height=ne+50,this.clearDraw(),this._addFlood({positions:Kt})}.bind(this)})}},{key:"generateFlood",value:function(){var lt=this,ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[120,30,120.1,30,120.1,30.1,120,30.1],it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100,Ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"\u6C34\u9762-1";this.height=it;var St=this.prop.ellipsoid,Gt=ot instanceof Array,Ut;if(Gt)if(ot[0]instanceof I.Cartesian3)Ut=ot;else{if(ot[0]instanceof Array)return;if(typeof ot[0]=="number"&&!isNaN(ot[0])){var Kt=ot.length/2;if(Kt>=2){var Jt=I.Cartesian3.fromDegreesArray(ot);Ut=Jt}else{var te=(0,U.point)(ot),ie=(0,U.buffer)(te,yt,{units:"meters"});if(!ie)return;var oe=ie.geometry.coordinates[0];oe.pop();var he=(0,h.default)(oe).call(oe,function(_t){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,_t)}.bind(this));Ut=he}}}else if(ot instanceof I.Cartesian3){var ne=wt.cartesianToLonLatHeight(ot);ne.length=2;var te=(0,U.point)(ne),ie=(0,U.buffer)(te,yt,{units:"meters"});if(!ie)return;var ce=ie.geometry.coordinates[0];ce.pop();var ge=(0,h.default)(ce).call(ce,function(re){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,re)}.bind(this));Ut=ge}var Me=Ut[0],It=St.geodeticSurfaceNormal(Me,new Pt);this.prop.normal=It;var Wt=this._addFlood({positions:Ut,name:Ot});return Wt}},{key:"generateFlood_copy",value:function(){var lt=this,ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[120.8788,29.999],it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100;this.height=it;var Ot=this.prop.ellipsoid,St=ot instanceof Array,Gt;if(St){if(ot[0]instanceof I.Cartesian3)Gt=ot;else if(ot[0]instanceof Array){var Ut=(0,h.default)(ot).call(ot,function(It){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,It)}.bind(this));Gt=Ut}else if(!isNaN(ot[0])){var Kt=(0,U.point)(ot),Jt=(0,U.buffer)(Kt,yt,{units:"meters"});if(!Jt)return;var te=Jt.geometry.coordinates[0];te.pop();var ie=(0,h.default)(te).call(te,function(It){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,It)}.bind(this));Gt=ie}}else if(ot instanceof I.Cartesian3){var oe=wt.cartesianToLonLatHeight(ot);oe.length=2;var Kt=(0,U.point)(oe),Jt=(0,U.buffer)(Kt,yt,{units:"meters"});if(!Jt)return;var he=Jt.geometry.coordinates[0];he.pop();var ne=(0,h.default)(he).call(he,function(_t){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,_t)}.bind(this));Gt=ne}var ce=Gt[0],ge=Ot.geodeticSurfaceNormal(ce,new Pt);this.prop.normal=ge;var Me=this._addFlood({positions:Gt});return Me}},{key:"start",value:function(lt){lt?this.floodDraw():this.clear()}},{key:"_addFlood",value:function(lt){var ot=this.prop,it=ot.waters,yt=ot.waterObjs,Ot=ot.dataSource,St=lt||{},Gt=St.positions,Ut=St.height,Kt=Ut===void 0?this.height:Ut,Jt=St.name,te=lt||{},ie=te.color,oe=ie===void 0?this.color:ie;oe=oe===""?"#5e7666":oe;var he=new I.PolygonGeometry({polygonHierarchy:new I.PolygonHierarchy(Gt),extrudedHeight:Kt}),ne=I.Color.fromCssColorString(oe);ne.alpha==1&&(ne=ne.withAlpha(.8));var ce=new I.Material({fabric:{type:"Water",uniforms:{baseWaterColor:ne,blendColor:I.Color.SKYBLUE,normalMap:H.default,frequency:2e3,animationSpeed:.01,amplitude:10,specularIntensity:2,fadeFactor:2}}}),ge=new I.GeometryInstance({geometry:he,id:I.createGuid(),attributes:{color:new I.ColorGeometryInstanceAttribute(0,1,1,.5)}}),Me=I.createGuid(),It=it.add(new I.Primitive({geometryInstances:ge,appearance:new I.EllipsoidSurfaceAppearance({material:ce}),releaseGeometryInstances:![]}));It.id=Jt;var Wt=new Nt({water:It,waters:it,waterObjs:yt,positions:Gt,dataSource:Ot,floodInstance:this});return yt.push(Wt),Wt}},{key:"clearWater",value:function(lt){var ot=this.prop,it=ot.waters,yt=ot.areas,Ot=lt.id;yt[Ot]&&delete yt[Ot],it.remove(lt)}},{key:"removeWaterById",value:function(lt){var ot=this,it=this.prop.waterObjs,yt=(0,R.default)(it);yt.forEach(function(Ot){(0,B.default)(this,ot),Ot.water.id==lt&&Ot.clearAll()}.bind(this))}},{key:"clear",value:function(){this.clearDraw();var lt=this.prop,ot=lt.dataSource,it=lt.waters,yt=lt.waterObjs;ot.entities.removeAll(),it.removeAll(),yt.length=0,this.pickWaterDepth(![])}},{key:"destroy",value:function(){}},{key:"removeAllPopup",value:function(){var lt=this.prop,ot=lt.dataSource,it=lt.popup;it&&it.close(),ot.entities.removeAll()}},{key:"pickWaterDepth",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],ot=this.drawControl.drawCtrl.billboard.getHandler();if(!lt){ot.removeInputAction(2);return}var it=this.prop,yt=it.viewer,Ot=it.normal,St=Ot===void 0?new Pt:Ot,Gt=it.waters,Ut=it.waterObjs,Kt=this;ot.setInputAction(function(Jt){var te=Kt.positions;if(Gt.length){var ie=(0,Z.getCurrentMousePosition)(yt.scene,Jt.position);if(ie){for(var oe=I.Cartographic.fromCartesian(ie),he=[I.Math.toDegrees(oe.longitude),I.Math.toDegrees(oe.latitude)],ne=(0,U.point)(he),ce=0,ge=(0,n.default)(Ut);ce<ge.length;ce++){var Me=(0,S.default)(ge[ce],2),It=Me[0],Wt=Me[1];Wt=Wt.positions;var _t=[],ee=nt(Wt),re;try{for(ee.s();!(re=ee.n()).done;){var de=re.value,Se=wt.cartesianToLonLatHeight(de);_t.push([Se[0],Se[1]])}}catch(pe){ee.e(pe)}finally{ee.f()}var Pe=wt.cartesianToLonLatHeight(Wt[0]);_t.push([Pe[0],Pe[1]]);var Le=(0,U.polygon)([_t]),Ie=(0,U.booleanContains)(Le,ne);if(Ie){Kt._sampleWaterDepth(ie,It);return}}(0,K.Message)({message:"\u8BF7\u70B9\u51FB\u6C34\u57DF\u8303\u56F4\u5185",type:"warning"})}}},2)}},{key:"_dP",value:function(lt){var ot=this.prop.dataSource,it=new I.Entity({position:lt,point:{pixelSize:6}});return ot.entities.add(it),it}},{key:"_sampleWaterDepth",value:function(){var dt=(0,w.default)(m.default.mark(function ot(it,yt){var Ot=this,St,Gt,Ut,Kt,Jt,te,ie,oe,he,ne,ce,ge,Me,It,Wt,_t,ee,re,de,Se,Pe,Le,Ie,pe;return m.default.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Ut=this.prop,Kt=Ut.viewer,Jt=Ut.waters,te=Ut.waterObjs,ie=Ut.popup,oe=Kt.scene.globe.ellipsoid,he=I.Cartographic.fromCartesian(it),ne=oe.geodeticSurfaceNormal(it,new Pt),ce=Pt.subtract(new Pt,ne,new Pt),ge=new I.Ray(it,ce),Me=I.Ray.getPoint(ge,-1e3,new Pt),ge.origin=Me,Fe.next=10,Kt.scene.drillPickFromRayMostDetailed(ge);case 10:return It=Fe.sent,It.length&&(it=It[0].position),Wt=[],_t=[],It.forEach(function(Ve){(0,B.default)(this,Ot),Ve.object&&Ve.object.primitive&&Ve.object.primitive instanceof I.Cesium3DTileset&&!(0,u.default)(_t).call(_t,Ve.object.primitive)&&(_t.push(Ve.object.primitive),Wt.push(Ve.object.primitive))}.bind(this)),Fe.next=16,Kt.scene.sampleHeightMostDetailed([he],Wt);case 16:return ee=Fe.sent,ee=ee[0].height,re=Jt._primitives,this.pick_method=="ground"?re=(0,r.default)(re).call(re,Wt):this.pick_method=="model",Fe.next=22,Kt.scene.sampleHeightMostDetailed([he],re);case 22:de=Fe.sent,de=de[0].height||0,ee-de<.01&&(ee=te[yt].water.geometryInstances.geometry._height,it=wt.setPositionHeight(Kt,it,ee)),Se=(ee-de).toFixed(4),Pe=this._dP(it),te[yt]&&te[yt].entities.push(Pe),Pe.popup=ie,Le=Se>=.01?Se+"\u7C73":"\u65E0\u79EF\u6C34",Ie=[I.Math.toDegrees(he.longitude),I.Math.toDegrees(he.latitude)],pe=(0,r.default)(St=(0,r.default)(Gt=`<div class="mars-popup-titile"></div>
                  <div class="mars-popup-content">
                      <div><label>\u7ECF\u5EA6</label>`.concat(Ie[0].toFixed(6),`</div>
                      <div><label>\u7EAC\u5EA6</label>`)).call(Gt,Ie[1].toFixed(6),`</div>
                      <div><label>\u79EF\u6C34\u6DF1\u5EA6</label>`)).call(St,Le,`</div>
                  </div>`),Pe.popup={html:pe,anchor:[0,-15]},ie.show(Pe,it);case 34:case"end":return Fe.stop()}},ot,this)}));function lt(ot,it){return dt.apply(this,arguments)}return lt}()}]),gt}(Mt);z.FloodAnalysis=ct;var vt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,A.default)(this,gt),dt=dt||{},dt.type="clip",dt.drawConfig={type:"measure"},ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){var lt=this.drawControl.draw();lt.hasEdit(![])}},{key:"start",value:function(lt){}},{key:"drawLine",value:function(lt,ot){var it=this.drawControl.draw();it.hasEdit(!![]),this.drawControl.measureSection({calback:lt,calbackresult:ot})}},{key:"getEChart",value:function(lt){if(!lt)return;function ot(Ot){var St=Number(Ot);return St<1e3?St.toFixed(2)+"\u7C73":(St/1e3).toFixed(2)+"\u5343\u7C73"}var it=lt.arrPoint,yt={grid:{left:10,right:10,bottom:10,containLabel:!![]},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",formatter:function(St){var Gt="";if(St.length===0)return Gt;var Ut=St[0].value,Kt=it[St[0].dataIndex];return Gt+="\u6240\u5728\u4F4D\u7F6E&nbsp;"+Kt.x+","+Kt.y+"<br />\u8DDD\u8D77\u70B9&nbsp;<label>"+ot(St[0].axisValue)+"</label><br />"+St[0].seriesName+"&nbsp;<label style='color:"+St[0].color+";'>"+ot(St[0].value)+"</label><br />",Gt}},xAxis:[{name:"\u884C\u7A0B",type:"category",boundaryGap:![],axisLine:{show:![]},axisLabel:{show:![]},data:lt.arrLen}],yAxis:[{type:"value",axisLabel:{rotate:60,formatter:"{value} \u7C73"}}],series:[{name:"\u9AD8\u7A0B\u503C",type:"line",smooth:!![],symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(255, 70, 131)"}},areaStyle:{normal:{color:new Y.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}},data:lt.arrHB}]};return yt}},{key:"clear",value:function(){var lt=this.drawControl.draw();lt.hasEdit(![]),this.clearDraw()}},{key:"destroy",value:function(){}},{key:"openChart",value:function(){}}]),gt}(Mt);z.ClipAnalysis=vt;var Lt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,A.default)(this,gt),dt=dt||{},dt.type="skyline",ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){this.cfg={pg:{name:"czm_skylinetemp",fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D depthTexture;varying vec2 v_textureCoordinates;void main(void){float depth = czm_readDepth(depthTexture, v_textureCoordinates);vec4 color = texture2D(colorTexture, v_textureCoordinates);if(depth<1.0 - 0.000001){gl_FragColor = color;}else{gl_FragColor = vec4(1.0,0.0,0.0,1.0);}}"},pg1:{name:"czm_skylinetemp1",fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D redTexture;uniform sampler2D silhouetteTexture;varying vec2 v_textureCoordinates;void main(void){vec4 redcolor=texture2D(redTexture, v_textureCoordinates);vec4 silhouetteColor = texture2D(silhouetteTexture, v_textureCoordinates);vec4 color = texture2D(colorTexture, v_textureCoordinates);if(redcolor.r == 1.0){gl_FragColor = mix(color, vec4(1.0,0.0,0.0,1.0), silhouetteColor.a);}else{gl_FragColor = color;}}"}}}},{key:"start",value:function(lt){var ot=this.prop.viewer,it=this.cfg;if(lt){var yt=ot.scene.postProcessStages,Ot=I.PostProcessStageLibrary.createEdgeDetectionStage(),St=new I.PostProcessStage(it.pg),Gt=new I.PostProcessStage((0,o.default)(it.pg1,{uniforms:{redTexture:St.name,silhouetteTexture:Ot.name}}));!this.skyLinePPS&&(this.skyLinePPS=yt.add(new I.PostProcessStageComposite({name:"czm_skyline",inputPreviousStageTexture:![],stages:[Ot,St,Gt],uniforms:Ot.uniforms}))),this.skyLinePPS.enabled=!![]}else this.skyLinePPS&&(this.skyLinePPS.enabled=![])}},{key:"clear",value:function(){this.start(![])}},{key:"destroy",value:function(){}}]),gt}(Mt);z.SkyLineAnalysis=Lt;var Ct=[I.Color.BLUE,I.Color.CYAN,I.Color.GREEN,I.Color.YELLOW,I.Color.RED];function jt(Zt){var ft=parseInt(Zt/.2);ft=ft==5?4:ft;var gt=Ct[ft];return gt}var zt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){var lt;(0,A.default)(this,gt),dt=dt||{},dt.type="shadowRatio",dt.drawConfig={hasEdit:![]},lt=ft.call(this,dt),lt.primitives=[];for(var ot=0;ot<5;ot++){var it=new I.PointPrimitiveCollection({blendOption:I.BlendOption.OPAQUE});lt.primitives.push(it),lt.prop.viewer.scene.primitives.add(it)}return lt}return(0,N.default)(gt,[{key:"init",value:function(){this.period=[I.JulianDate.fromIso8601("2021-08-09T09:00:00+08:00"),I.JulianDate.fromIso8601("2021-08-09T15:00:00+08:00")],this.timeInterval=90,this.spacing=15}},{key:"start",value:function(lt){var ot=this.prop.viewer,it=this.cfg}},{key:"drawPolygon",value:function(lt){var ot=this;this.clear();var it=this.prop.viewer;this.drawControl.startDraw({drawtype:"polygon",style:{extrudedHeight:50,fill:![],outline:!![]},success:function(){var yt=(0,w.default)(m.default.mark(function St(Gt){var Ut=this,Kt,Jt,te,ie,oe,he,ne,ce,ge,Me,It,Wt;return m.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:for(E.time("\u65B0\u7B97\u6CD5\u603B\u8FD0\u7B97"),window.score=0,window.time=0,Kt=Gt.polygon.hierarchy.getValue().positions,te=wt.upPosition(it,Kt[0],100),ot.normal=I.Cartesian3.normalize(I.Cartesian3.subtract(te,Kt[0],new I.Cartesian3),new I.Cartesian3),(0,h.default)(Kt).call(Kt,function(re){(0,B.default)(this,Ut);var de=wt.cartesianToLonLatHeight(re)[2];Jt=de>Jt?Jt:de}.bind(this)),ie=Gt.polygon.extrudedHeight.getValue(),ot.bottomHeight=Jt,ot.topHeight=ie,oe=Gt.polygon.hierarchy.getValue().positions,E.time("\u6784\u9020\u70B9\u9635\u82B1\u8D39\u65F6\u95F4"),he=ot.constructPoints(oe),E.timeEnd("\u6784\u9020\u70B9\u9635\u82B1\u8D39\u65F6\u95F4"),ot.points=he,E.time("blockHeight"),ne=0,ce=[],ge=0,Me=he.length;ge<=Me-1;ge++)It=I.Cartographic.fromCartesian(he[ge]),Wt=it.scene.sampleHeight(It),ce[ge]=Wt,ne=Wt>ne?Wt:ne;ot.blockHeight=ne,ot.heights=ce,E.timeEnd("blockHeight"),ot._pointShow(![]),ot.computeShadowRatio(),ot._pointShow(!![]),ot.activatedPick(lt);case 25:case"end":return ee.stop()}},St,this)}));function Ot(St){return yt.apply(this,arguments)}return Ot}()})}},{key:"drawPolygon_rawAlgorithm",value:function(){var lt=this,ot=this.prop.viewer;this.drawControl.startDraw({drawtype:"polygon",style:{extrudedHeight:30,fill:![],outline:!![]},success:function(yt){(0,B.default)(this,lt),E.time("\u8001\u7B97\u6CD5\u603B\u8FD0\u7B97"),window.score=0;var Ot=yt.polygon.hierarchy.getValue().positions,St,Gt=wt.upPosition(ot,Ot[0],100);this.normal=I.Cartesian3.normalize(I.Cartesian3.subtract(Gt,Ot[0],new I.Cartesian3),new I.Cartesian3);var Ut=nt(Ot),Kt;try{for(Ut.s();!(Kt=Ut.n()).done;){var Jt=Kt.value,te=wt.cartesianToLonLatHeight(Jt)[2];St=te>St?St:te}}catch(Ve){Ut.e(Ve)}finally{Ut.f()}var ie=yt.polygon.extrudedHeight.getValue(),oe=yt.polygon.hierarchy.getValue().positions,he=this.constructPoints(oe);E.time("blockHeight");var ne=0,ce=[],ge=nt((0,g.default)(he).call(he)),Me;try{for(ge.s();!(Me=ge.n()).done;){var It=(0,S.default)(Me.value,2),Wt=It[0],_t=It[1],ee=I.Cartographic.fromCartesian(_t),re=ot.scene.sampleHeight(ee);if(ce[Wt]=re,ne=re>ne?re:ne,ne>ie)break}}catch(Ve){ge.e(Ve)}finally{ge.f()}E.timeEnd("blockHeight");for(var de=[],Se=St;Se<=ie;Se+=this.spacing){var Pe=nt((0,g.default)(he).call(he)),Le;try{for(Pe.s();!(Le=Pe.n()).done;){var Ie=(0,S.default)(Le.value,2),pe=Ie[0],Oe=Ie[1];if(Oe=wt.setPositionHeight(ot,Oe,Se),Se<ce[pe]){this._dP(Oe,0);continue}if(de[pe]==1||Se>=ne){this._dP(Oe,1);continue}var Fe=this.foo(Oe);de[pe]=Fe,this._dP(Oe,Fe)}}catch(Ve){Pe.e(Ve)}finally{Pe.f()}}E.timeEnd("\u8001\u7B97\u6CD5\u603B\u8FD0\u7B97"),this.activatedPick()}.bind(this)})}},{key:"activatedPick",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ot=this.prop.viewer,it=this,yt=this.drawControl.drawCtrl.billboard.getHandler();yt.setInputAction(function(Ot){E.time("\u5355\u70B9\u6D4B\u65E5\u7167\u7387"),it.lastSelectPoint&&(it.lastSelectPoint.pixelSize=10,it.lastSelectPoint.outlineWidth=0);var St=ot.scene.pick(Ot.position)||{};if(St.primitive instanceof I.PointPrimitive){var Gt,Ut=St.primitive.id.indexOf("**:")+3,Kt=(0,d.default)(Gt=St.primitive.id).call(Gt,Ut),Jt=parseFloat(Kt).toFixed(2);if(lt._isVue){var te=wt.cartesianToLonLatHeight(St.primitive.position);lt.formInfo.data.height_sr=te[2].toFixed(2),lt.formInfo.data.position_sr=te[0].toFixed(5)+", "+te[1].toFixed(5),lt.formInfo.data.sunshineRatio=Jt}it._pointShow(![]),St.collection&&St.collection.remove(St.primitive),it.detectShadowPeriod(St.primitive.position,lt.formInfo.data,Jt),it._pointShow(!![])}else lt.formInfo.data.height_sr=null,lt.formInfo.data.position_sr=null,lt.formInfo.data.sunshineRatio=null,lt.formInfo.data.sunshinePeriod=null;E.timeEnd("\u5355\u70B9\u6D4B\u65E5\u7167\u7387")},2)}},{key:"drawPoint",value:function(){var lt=this;this.drawControl.startDraw({drawtype:"point",success:function(it){(0,B.default)(this,lt),this.foo(it)}.bind(this)})}},{key:"constructPoints",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ot=[],it=[],yt=nt(lt),Ot;try{for(yt.s();!(Ot=yt.n()).done;){var St=Ot.value,Gt=wt.cartesianToLonLatHeight(St);ot.push([Gt[0],Gt[1]])}}catch(Se){yt.e(Se)}finally{yt.f()}var Ut=wt.cartesianToLonLatHeight(lt[0]);ot.push([Ut[0],Ut[1]]);var Kt=(0,U.polygon)([ot]);this.polygon_turf=Kt;var Jt=(0,U.bbox)(Kt),te=new I.WebMercatorProjection,ie=I.Cartographic.fromDegrees(Jt[0],Jt[1]),oe=I.Cartographic.fromDegrees(Jt[2],Jt[3]),he=te.project(ie),ne=te.project(oe),ce={coor:[(he.x+ne.x)/2,(he.y+ne.y)/2],childNode:{}};ce.extends={x:ne.x-he.x,y:ne.y-he.y};var ge=te.unproject({x:ce.coor[0],y:ce.coor[1]}),Me=I.Cartographic.toCartesian(ge);ce.coor=Me,this.mid_root=ce;for(var It=he.x;It<=ne.x;It+=this.spacing)for(var Wt=he.y;Wt<=ne.y;Wt+=this.spacing){var _t=te.unproject({x:It,y:Wt}),ee=[I.Math.toDegrees(_t.longitude),I.Math.toDegrees(_t.latitude)],re=(0,U.point)(ee),de=(0,U.booleanContains)(Kt,re);de&&it.push(I.Cartographic.toCartesian(_t))}return it}},{key:"foo",value:function(lt){var ot,it=this.prop.viewer;if(this.timeArr=this.timeArr||[],this.planetaryDirections=this.planetaryDirections||[],this.timeArr.length==0)for(var yt=this.period[0].clone();I.JulianDate.lessThanOrEquals(yt,this.period[1]);)this.timeArr.push(yt.clone()),I.JulianDate.addMinutes(yt,this.timeInterval,yt);var Ot=0,St=nt((0,g.default)(ot=this.timeArr).call(ot)),Gt;try{for(St.s();!(Gt=St.n()).done;){var Ut=(0,S.default)(Gt.value,2),Kt=Ut[0],Jt=Ut[1];window.score++;var te=this.planetaryDirections[Kt];if(!te){var ie=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(Jt),oe=I.Transforms.computeIcrfToFixedMatrix(Jt);I.Matrix3.multiplyByVector(oe,ie,ie),te=I.Cartesian3.normalize(ie,new I.Cartesian3),this.planetaryDirections[Kt]=te}var he=I.Cartesian3.dot(te,this.normal);if(!(he<=.25881904510252074)){var ne=new I.Ray(lt,te),ce=it.scene.pickFromRay(ne);ce&&ce.position&&Ot++}}}catch(Me){St.e(Me)}finally{St.f()}var ge=1-Ot/this.timeArr.length;return ge}},{key:"detectShadowPeriod",value:function(lt,ot,it){var yt=this,Ot=this.prop.viewer,St=Ot.scene.globe.ellipsoid,Gt=St.geodeticSurfaceNormal(lt,new I.Cartesian3),Ut=[],Kt=I.JulianDate.daysDifference(this.period[1],this.period[0]),Jt=7.5;Kt>3&&(Jt=Kt/14*24*60);for(var te=this.period[0].clone(),ie=0;I.JulianDate.lessThanOrEquals(te,this.period[1]);ie++)Ut[ie]={},Ut[ie].time=te.clone(),Ut[ie].shadow=re(lt,te),I.JulianDate.addMinutes(te,Jt,te);for(var oe=[],he=![],ne=[],ce=0,ge=0,Me=Ut.length,It;ge<Me;ge++){if(It=Ut[ge],It.shadow&&ce++,It.shadow&&he){oe.push(ne),ne=[],he=![];continue}It.shadow?(he=![],ne=[]):(he=!![],ne.push(It))}var Wt=ce/Ut.length;ot.sunshineRatio=(1-Wt).toFixed(2),this._dP(lt,it,!![]),ne.length>=2&&oe.push(ne);var _t="",ee=de;oe=(0,y.default)(oe).call(oe,function(Se){(0,B.default)(this,yt);var Pe=Se.length&&I.JulianDate.compare(Se[Se.length-1].time,Se[0].time)>=3600;if(Pe){var Le=I.JulianDate.toGregorianDate(Se[0].time),Ie=I.JulianDate.toGregorianDate(Se[Se.length-1].time);return _t+=ee(Le.month)+"\u6708"+ee(Le.day)+"\u65E5 "+ee(Le.hour+8)+":"+ee(Le.minute),_t+="\u5230"+ee(Ie.month)+"\u6708"+ee(Ie.day)+"\u65E5 "+ee(Ie.hour+8)+":"+ee(Ie.minute)+`
`,!![]}}.bind(this)),ot.sunshinePeriod=_t;function re(Se,Pe){var Le=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(Pe),Ie=I.Transforms.computeIcrfToFixedMatrix(Pe);I.Matrix3.multiplyByVector(Ie,Le,Le);var pe=I.Cartesian3.normalize(Le,new I.Cartesian3),Oe=I.Cartesian3.angleBetween(pe,Gt);if(Oe>=Math.PI/2)return!![];var Fe=new I.Ray(Se,pe),Ve=Ot.scene.pickFromRay(Fe);return Ve&&Ve.position?!![]:![]}function de(Se){return Se>9?Se:"0"+Se}}},{key:"computeShadowRatio",value:function(){var lt=this,ot,it=this.prop.viewer,yt=Math.min(5e3,this.spacing/2),Ot=I.JulianDate.secondsDifference(it.clock.stopTime,it.clock.startTime)==86400;!Ot&&(this.period=[it.clock.startTime,it.clock.stopTime]),this.timeArr=[];var St,Gt=I.JulianDate.daysDifference(this.period[1],this.period[0]);if(Gt>3)for(St=this.period[0].clone();I.JulianDate.lessThanOrEquals(St,this.period[1]);)this.timeArr.push(St.clone()),I.JulianDate.addDays(St,Gt/10,St);else for(St=this.period[0].clone();I.JulianDate.lessThanOrEquals(St,this.period[1]);)this.timeArr.push(St.clone()),I.JulianDate.addMinutes(St,this.timeInterval,St);var Ut=[],Kt,Jt=function(){var ie,oe=this,he=[],ne=Kt>=lt.blockHeight;(0,h.default)(ie=lt.points).call(ie,function(ce,ge){(0,B.default)(this,oe);var Me=Kt<=lt.heights[ge];ce=wt.setPositionHeight(it,ce,Kt),ce.index=ge,ce.level=(Kt-lt.bottomHeight)/lt.spacing+1,ce.SScondition=[],Me&&(ce.underBuilding=!![]),ne?ne&&lt._dP(ce,1):he.push(ce)}.bind(this)),!ne&&Ut.push(he)};for(Kt=this.bottomHeight;Kt<=this.topHeight;Kt+=this.spacing)Jt();Ut.reverse(),window.points_3d=Ut,(0,h.default)(ot=this.timeArr).call(ot,function(te,ie){var oe=this;(0,B.default)(this,lt),E.time("\u70B9\u7684\u8FD0\u7B97");var he=ie,ne=[],ce=[],ge,Me=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(te),It=I.Transforms.computeIcrfToFixedMatrix(te);I.Matrix3.multiplyByVector(It,Me,Me),ge=I.Cartesian3.normalize(Me,new I.Cartesian3);var Wt=I.Cartesian3.subtract(new I.Cartesian3,ge,new I.Cartesian3),_t=I.Cartesian3.angleBetween(this.normal,ge),ee=I.Math.toDegrees(_t),re=Math.abs(this.spacing/Math.cos(_t));if(!(_t>=Math.PI/2)){for(var de=[],Se=function(Be,He){if(Be=Ut[He],He==Ut.length-1){for(var ke=0,Ze,_=Be.length;ke<_;ke++)Ze=Be[ke],!Ze.id&&de.push([Ze]);return Le=Be,"break"}for(var at=function(Ce){var Te=this;if(Ce=Be[xt],Ce.id)return bt=Ce,"continue";var Ue=[];Ue.push(Ce),Ce.id=I.createGuid();for(var Vt=new I.Ray(Ce,Wt),qt=[],ae=1;ae<=Ut.length-He-1;ae++){var ve=I.Ray.getPoint(Vt,re*ae,new I.Cartesian3),xe=wt.cartesianToLonLatHeight(ve);xe.length=2;var ye=(0,U.point)(xe),De=(0,U.booleanContains)(oe.polygon_turf,ye);if(De)qt.push(ve);else break}(0,h.default)(qt).call(qt,function(Ne,we){(0,B.default)(this,Te);for(var ze=0,Ge,We=Be.length;ze<We;ze++){Ge=Be[ze];var At=wt.upPosition(it,Ge,-oe.spacing*(we+1)),kt=I.Cartesian3.distance(At,Ne);if(!(kt>oe.spacing/2)&&kt<yt){var $t=Ut[He+1+we][ze];if($t&&$t.id)continue;Ue.push($t),$t.id=Ce.id;break}}}.bind(this)),de.push(Ue),bt=Ce},xt=0,bt,Bt=Be.length;xt<Bt;xt++)var Qt=at(bt);Le=Be},Pe=0,Le,Ie=Ut.length;Pe<Ie;Pe++){var pe=Se(Le,Pe);if(pe==="break")break}(0,h.default)(Ut).call(Ut,function(be){var Be=this;(0,B.default)(this,oe),(0,h.default)(be).call(be,function(He){(0,B.default)(this,Be),He.id&&delete He.id}.bind(this))}.bind(this));var Oe=0;de.forEach(function(be){var Be=this;(0,B.default)(this,oe),be.forEach(function(He){(0,B.default)(this,Be),++Oe}.bind(this))}.bind(this));var Fe=(0,y.default)(de).call(de,function(be){return(0,B.default)(this,oe),be.length==1}.bind(this)),Ve=[];Fe.forEach(function(be){(0,B.default)(this,oe),Ve.push(be[0])}.bind(this)),de=(0,y.default)(de).call(de,function(be){return(0,B.default)(this,oe),be.length>1}.bind(this)),(0,h.default)(de).call(de,function(be){var Be=this;if((0,B.default)(this,oe),be[0].underBuilding){(0,h.default)(be).call(be,function(Qt){(0,B.default)(this,Be),Qt.shadow=Qt.shadow?++Qt.shadow:1,Qt.SScondition[he]=0}.bind(this));return}else{var He=be[be.length-1];if(He.level>ne[He.index]){(0,h.default)(be).call(be,function(Qt){(0,B.default)(this,Be),Qt.sunshine=Qt.sunshine?++Qt.sunshine:1,Qt.SScondition[he]=1}.bind(this));return}else if(be[0].level<ce[be[0].index]){(0,h.default)(be).call(be,function(Qt){(0,B.default)(this,Be),Qt.shadow=Qt.shadow?++Qt.shadow:1,Qt.SScondition[he]=0}.bind(this));return}}var ke=new I.Ray(be[0],ge);ke.skip=!![];var Ze=I.Ray.getPoint(ke,150,new I.Cartesian3),_=new I.Ray(Ze,Wt),at=new Date().getTime(),xt=it.scene.pickFromRay(_,null,1),bt=new Date().getTime();if(window.time+=bt-at,window.score++,xt&&xt.position){var Bt=wt.cartesianToLonLatHeight(xt.position)[2];(0,h.default)(be).call(be,function(Qt){(0,B.default)(this,Be);var ue=wt.cartesianToLonLatHeight(Qt)[2],Ce=Qt.index,Te=Qt.level;ue<Bt?(Qt.shadow=Qt.shadow?++Qt.shadow:1,Qt.SScondition[he]=0,ce[Ce]=Math.max(Te,ce[Ce]||1)):(Qt.sunshine=Qt.sunshine?++Qt.sunshine:1,Qt.SScondition[he]=1,ne[Ce]=Math.min(Te,ne[Ce]||100))}.bind(this))}}.bind(this)),(0,h.default)(Ve).call(Ve,function(be){if((0,B.default)(this,oe),be.underBuilding){be.shadow=be.shadow?++be.shadow:1,be.SScondition[he]=0;return}else if(be.level>ne[be.index]){be.sunshine=be.sunshine?++be.sunshine:1,be.SScondition[he]=1;return}else if(be.level<ce[be.index]){be.shadow=be.shadow?++be.shadow:1,be.SScondition[he]=0;return}var Be=new I.Ray(be,ge);Be.skip=!![];var He=new Date().getTime(),ke=it.scene.pickFromRay(Be,null,1),Ze=new Date().getTime();window.time+=Ze-He,window.score++;var _=be.index,at=be.level;ke&&ke.position?(be.shadow=be.shadow?++be.shadow:1,be.SScondition[he]=0,ce[_]=Math.max(at,ce[_]||0)):(be.sunshine=be.sunshine?++be.sunshine:1,be.SScondition[he]=1,ne[_]=Math.min(at,ne[_]||100))}.bind(this)),E.timeEnd("\u70B9\u7684\u8FD0\u7B97")}}.bind(this)),(0,h.default)(Ut).call(Ut,function(te){var ie=this;(0,B.default)(this,lt),(0,h.default)(te).call(te,function(oe){(0,B.default)(this,ie);var he=(parseInt(oe.sunshine)||0)/this.timeArr.length;this._dP(oe,he)}.bind(this))}.bind(this)),E.timeEnd("\u65B0\u7B97\u6CD5\u603B\u8FD0\u7B97")}},{key:"computeShadowRatio_solarAltitude",value:function(){var lt,ot=this,it=this.mid_root;this.points_enu=(0,h.default)(lt=this.points).call(lt,function(St){return(0,B.default)(this,ot),I.Cartesian3.subtract(St,it.coor,new I.Cartesian3)}.bind(this));var yt={root:{coord:{x:0,y:0},extends:{x:it.extends.x,y:it.extends.y},level:0,content:this.points_enu}},Ot={creatChileNode:function(Gt){var Ut,Kt=Gt.coord,Jt=Gt.extends,te=Jt.x,ie=Jt.y,oe=new Array(4),he=nt((0,g.default)(oe).call(oe)),ne;try{for(he.s();!(ne=he.n()).done;){var ce=(0,S.default)(ne.value,2),ge=ce[0],Me=ce[1];oe[ge]={},oe[ge].level=Gt.level+1,oe[ge].extends={x:te/2,y:ie/2},oe[ge].content=[]}}catch(pe){he.e(pe)}finally{he.f()}oe[0].coord={x:Kt.x+te/4,y:Kt.y+ie/4},oe[1].coord={x:Kt.x-te/4,y:Kt.y+ie/4},oe[2].coord={x:Kt.x-te/4,y:Kt.y-ie/4},oe[3].coord={x:Kt.x+te/4,y:Kt.y-ie/4};var It=nt((0,g.default)(Ut=this.points_enu).call(Ut)),Wt;try{for(It.s();!(Wt=It.n()).done;){var _t=(0,S.default)(Wt.value,2),ee=_t[0],re=_t[1],de=void 0,Se=void 0;de=re.x-te,Se=re.y-ie,(de>0&&Se>0||de<0&&Se>0||de<0&&Se<0||de>0&&Se<0)&&oe[0].content.push(re)}}catch(pe){It.e(pe)}finally{It.f()}Gt.childNodes=oe;for(var Pe=0,Le=oe;Pe<Le.length;Pe++){var Ie=Le[Pe];if(Ie.level>=4)return;Ot.creatChileNode(Ie)}}};Ot.creatChileNode(yt.root)}},{key:"computeShadowRatio_Octree",value:function(){var lt=this,ot,it=this.prop.viewer,yt=this,Ot=I.JulianDate.secondsDifference(it.clock.stopTime,it.clock.startTime)==86400;!Ot&&(this.period=[it.clock.startTime,it.clock.stopTime]),this.timeArr=[];var St;for(St=this.period[0].clone();I.JulianDate.lessThanOrEquals(St,this.period[1]);)this.timeArr.push(St.clone()),I.JulianDate.addMinutes(St,this.timeInterval,St);var Gt=this.mid_root,Ut=this.topHeight-this.bottomHeight;Gt.coor=wt.upPosition(it,Gt.coor,Ut/2),Gt.extends.z=Ut;var Kt=Math.max(Gt.extends.x,Gt.extends.y);Gt.extends.x=Gt.extends.y=Kt;var Jt=[],te,ie=function(){var Pe,Le=this,Ie=[],pe=te>=lt.blockHeight;(0,h.default)(Pe=lt.points).call(Pe,function(Oe,Fe){(0,B.default)(this,Le),Oe=wt.setPositionHeight(it,Oe,te),Oe.index=Fe,Oe.level=(te-lt.bottomHeight)/lt.spacing+1,Oe.SScondition=[],pe?pe&&lt._dP(Oe,1):Ie.push(Oe)}.bind(this)),!pe&&Jt.push(Ie)};for(te=this.bottomHeight;te<=this.topHeight;te+=this.spacing)ie();Jt.reverse();var oe=I.Transforms.eastNorthUpToFixedFrame(Gt.coor),he=I.Matrix4.inverse(oe,new I.Matrix4),ne=[],ce=[],ge=Jt,Me=(0,h.default)(Jt).call(Jt,function(Se){var Pe=this;return(0,B.default)(this,lt),(0,h.default)(Se).call(Se,function(Le){(0,B.default)(this,Pe);var Ie=I.Matrix4.multiplyByPoint(he,Le,new I.Cartesian3);return ne.push(Ie),Ie}.bind(this))}.bind(this)),It={root:{coord:{x:0,y:0,z:0},extends:{x:Gt.extends.x,y:Gt.extends.y,z:Gt.extends.z},level:0,content:ne}};It.points_3d_enu=Me,It.points_3d_raw=ge,It.coordCollectionByLevel=ce;var Wt={creatChileNode:function(Pe){var Le,Ie=this,pe=Pe.coord,Oe=Pe.extends,Fe=Oe.x,Ve=Oe.y,be=Oe.z,Be=new Array(8),He=nt((0,g.default)(Be).call(Be)),ke;try{for(He.s();!(ke=He.n()).done;){var Ze=(0,S.default)(ke.value,2),_=Ze[0],at=Ze[1];Be[_]={},Be[_].level=Pe.level+1,Be[_].extends={x:Fe/2,y:Ve/2,z:be/2},Be[_].content=[],Be[_].parent=Pe}}catch(Vt){He.e(Vt)}finally{He.f()}ce[Pe.level+1]=ce[Pe.level+1]||[],Be[0].coord={x:pe.x+Fe/4,y:pe.y+Ve/4,z:pe.z+be/4},Be[1].coord={x:pe.x-Fe/4,y:pe.y+Ve/4,z:pe.z+be/4},Be[2].coord={x:pe.x-Fe/4,y:pe.y-Ve/4,z:pe.z+be/4},Be[3].coord={x:pe.x+Fe/4,y:pe.y-Ve/4,z:pe.z+be/4},Be[4].coord={x:pe.x+Fe/4,y:pe.y+Ve/4,z:pe.z-be/4},Be[5].coord={x:pe.x-Fe/4,y:pe.y+Ve/4,z:pe.z-be/4},Be[6].coord={x:pe.x-Fe/4,y:pe.y-Ve/4,z:pe.z-be/4},Be[7].coord={x:pe.x+Fe/4,y:pe.y-Ve/4,z:pe.z-be/4},(0,h.default)(Le=Pe.content).call(Le,function(Vt){(0,B.default)(this,Ie);var qt,ae,ve;qt=Vt.x-pe.x,ae=Vt.y-pe.y,ve=Vt.z-pe.z,ve>0?qt>0&&ae>0?Be[0].content.push(Vt):qt<0&&ae>0?Be[1].content.push(Vt):qt<0&&ae<0?Be[2].content.push(Vt):qt>0&&ae<0&&Be[3].content.push(Vt):qt>0&&ae>0?Be[4].content.push(Vt):qt<0&&ae>0?Be[5].content.push(Vt):qt<0&&ae<0?Be[6].content.push(Vt):qt>0&&ae<0&&Be[7].content.push(Vt)}.bind(this));for(var xt=0,bt=Be;xt<bt.length;xt++)var Bt=bt[xt],Qt=I.Matrix4.multiplyByPoint(oe,Bt.coord,new I.Cartesian3),ue={x:Bt.extends.x,y:Bt.extends.y,z:Bt.extends.z};Pe.childNodes=Be;for(var Ce=0,Te=Be;Ce<Te.length;Ce++){var Ue=Te[Ce];Ue.content.length&&ce[Ue.level].push(Ue),!(Ue.content.length<=1)&&Wt.creatChileNode(Ue)}}};Wt.creatChileNode(It.root),this.tree=It,(0,h.default)(ot=this.timeArr).call(ot,function(Se,Pe){(0,B.default)(this,lt),E.time("\u70B9\u7684\u8FD0\u7B97");var Le,Ie=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(Se),pe=I.Transforms.computeIcrfToFixedMatrix(Se);I.Matrix3.multiplyByVector(pe,Ie,Ie),Le=I.Cartesian3.normalize(Ie,new I.Cartesian3);var Oe=I.Cartesian3.subtract(new I.Cartesian3,Le,new I.Cartesian3),Fe=I.Matrix4.multiplyByPoint(he,Le,new I.Cartesian3),Ve=I.Matrix4.multiplyByPoint(he,new I.Cartesian3,new I.Cartesian3),be=I.Cartesian3.subtract(Fe,Ve,new I.Cartesian3);be=I.Cartesian3.normalize(be,new I.Cartesian3);var Be=I.Cartesian3.subtract(new I.Cartesian3,be,new I.Cartesian3),He=I.Cartesian3.angleBetween(this.normal,Le),ke=I.Math.toDegrees(He);if(He>=Math.PI/2)return;var Ze=It.coordCollectionByLevel[4];E.time("\u6574\u9897\u6811\u7684\u8FD0\u7B97"),_.bind(this)(Ze),E.timeEnd("\u6574\u9897\u6811\u7684\u8FD0\u7B97");function _(at){var xt=this;if(at[0].extends.x<=5){for(var bt,Bt=0,Qt=at.length;Bt<Qt;Bt++)bt=at[Bt],bt.content.forEach(function($e){(0,B.default)(this,xt),$e.shadow=$e.shadow?++$e.shadow:1}.bind(this));return}this.clear();for(var ue=[],Ce=at[0].extends.x/2,Te=[],Ue=function(Xe){var ei=this;Xe=at[Vt];var ri=(0,a.default)(Te).call(Te,function(ai){return(0,B.default)(this,ei),ai==Xe.coord.z}.bind(this));ri==-1?(Te.push(Xe.coord.z),ue.push([Xe])):ue[ri].push(Xe),qt=Xe},Vt=0,qt,ae=at.length;Vt<ae;Vt++)Ue(qt);(0,p.default)(Te).call(Te,function($e,Xe){return Xe-$e}),(0,p.default)(ue).call(ue,function($e,Xe){return(0,B.default)(this,xt),Xe[0].coord.z-$e[0].coord.z}.bind(this));for(var ve=[],xe=0,ye=Te.length;xe<ye-1;xe++){var De=Te[xe]-Te[xe+1],Ne=Math.abs(De/Math.cos(He));ve.push(Ne)}for(var we=[],ze=0,Ge,We=ue.length;ze<We;ze++){if(Ge=ue[ze],ze==ue.length-1){for(var At=0,kt,$t=Ge.length;At<$t;At++)kt=Ge[At],!kt.id&&we.push([kt]);break}for(var le=function(Xe){var ei=this;if(Xe=Ge[me],Xe.id)return Ae=Xe,"continue";var ri=[];ri.push(Xe),Xe.id=I.createGuid();for(var ai=new I.Ray(Xe.coord,Be),hi=[],ni=0;ni<ue.length-ze-1;ni++){var ti=I.Ray.getPoint(ai,ve[ni+ze],new I.Cartesian3);ai.origin=ti;var si=I.Matrix4.multiplyByPoint(oe,ti,new I.Cartesian3),ci=wt.cartesianToLonLatHeight(si);ci.length=2;var oi=(0,U.point)(ci),di=(0,U.booleanContains)(xt.polygon_turf,oi);if(di)hi.push(ti);else break}(0,h.default)(hi).call(hi,function(gi,Ki){var ui=this;(0,B.default)(this,ei);var Ei=(0,a.default)(Te).call(Te,function(Li){return(0,B.default)(this,ui),I.Math.equalsEpsilon(Li,gi.z,I.Math.EPSILON1)}.bind(this)),yi=ue[Ei];E.assert(yi instanceof Array,"\u6B64\u65F6arr\u4E0D\u662F\u6570\u7EC4\u3002",ue,Te,gi.z);for(var Ci=0,pi,wi=yi.length;Ci<wi;Ci++){pi=yi[Ci];var Pi=I.Cartesian3.distance(pi.coord,gi);if(!(Pi>=Ce)&&Pi<Ce){if(pi.id)continue;ri.push(pi),pi.id=Xe.id;break}}}.bind(this)),we.push(ri),Ae=Xe},me=0,Ae,Ye=Ge.length;me<Ye;me++)var Qe=le(Ae)}(0,h.default)(at).call(at,function($e){(0,B.default)(this,xt),$e.id&&delete $e.id}.bind(this));var Ke=0;we.forEach(function($e){var Xe=this;(0,B.default)(this,xt),$e.forEach(function(ei){(0,B.default)(this,Xe),++Ke}.bind(this))}.bind(this)),E.assert(Ke==at.length,"\u5E76\u672A\u5C06\u6240\u6709\u70B9\u6309\u592A\u9633\u5149\u7EBF\u4E32\u8054\u8D77");var qe=(0,y.default)(we).call(we,function($e){return(0,B.default)(this,xt),$e.length==1}.bind(this)),ii=[];qe.forEach(function($e){(0,B.default)(this,xt),ii.push($e[0])}.bind(this)),we=(0,y.default)(we).call(we,function($e){return(0,B.default)(this,xt),$e.length>1}.bind(this)),we.forEach(function($e){var Xe=this;(0,B.default)(this,xt);var ei=(0,h.default)($e).call($e,function(ri){return(0,B.default)(this,Xe),I.Matrix4.multiplyByPoint(oe,ri.coord,new I.Cartesian3)}.bind(this))}.bind(this)),(0,h.default)(we).call(we,function($e){var Xe=this;(0,B.default)(this,xt);var ei=I.Matrix4.multiplyByPoint(oe,$e[0].coord,new I.Cartesian3),ri=new I.Ray(ei,Le),ai=I.Ray.getPoint(ri,150,new I.Cartesian3),hi=new I.Ray(ai,Oe),ni=new Date().getTime(),ti=it.scene.pickFromRay(hi,null,1),si=new Date().getTime();if(window.time+=si-ni,window.score++,ti&&ti.position){var ci=wt.cartesianToLonLatHeight(ti.position)[2];(0,h.default)($e).call($e,function(oi){(0,B.default)(this,Xe);var di=I.Matrix4.multiplyByPoint(oe,oi.coord,new I.Cartesian3),gi=wt.cartesianToLonLatHeight(di)[2];gi<ci?oi.shadow=oi.shadow?++oi.shadow:1:oi.sunshine=oi.sunshine?++oi.sunshine:1}.bind(this))}}.bind(this)),(0,h.default)(ii).call(ii,function($e){(0,B.default)(this,xt);var Xe=I.Matrix4.multiplyByPoint(oe,$e.coord,new I.Cartesian3),ei=new I.Ray(Xe,Le),ri=new Date().getTime(),ai=it.scene.pickFromRay(ei,null,1),hi=new Date().getTime();window.time+=hi-ri,window.score++,ai&&ai.position?$e.shadow=$e.shadow?++$e.shadow:1:$e.sunshine=$e.sunshine?++$e.sunshine:1}.bind(this));var Ai=[],li=[];Ai.forEach(function($e){var Xe=this;(0,B.default)(this,xt),$e.childNodes&&$e.childNodes.length&&(li=(0,r.default)(li).call(li,$e.childNodes)),!$e.childNodes&&$e.content.length>=1&&(E.assert($e.content.length==1,"\u8282\u70B9\u8FD8\u53EF\u5206\uFF0Ccontent\u4E0D\u4E3A1"),$e.content.forEach(function(ei){(0,B.default)(this,Xe),ei.shadow=ei.shadow?++ei.shadow:1}.bind(this)))}.bind(this)),li.length&&_.bind(this)(li)}E.timeEnd("\u70B9\u7684\u8FD0\u7B97")}.bind(this)),this.clear();var _t=nt(It.root.content),ee;try{for(_t.s();!(ee=_t.n()).done;){var re=ee.value,de=I.Matrix4.multiplyByPoint(oe,re,new I.Cartesian3);re.shadow?this._dP(de,re.shadow/this.timeArr.length):this._dP(de,1)}}catch(Se){_t.e(Se)}finally{_t.f()}E.timeEnd("\u65B0\u7B97\u6CD5\u603B\u8FD0\u7B97")}},{key:"computeShadowRatio_copy",value:function(){var lt=this,ot,it=this.prop.viewer,yt=Math.min(5e3,this.spacing/2);if(this.timeArr=this.timeArr||[],this.planetaryDirections=this.planetaryDirections||[],this.timeArr.length==0)for(var Ot=this.period[0].clone();I.JulianDate.lessThanOrEquals(Ot,this.period[1]);)this.timeArr.push(Ot.clone()),I.JulianDate.addMinutes(Ot,this.timeInterval,Ot);for(var St=[],Gt=function(Jt){var te,ie=this,oe=[],he=Jt>=lt.blockHeight;(0,h.default)(te=lt.points).call(te,function(ne,ce){(0,B.default)(this,ie);var ge=Jt<=lt.heights[ce];ne=wt.setPositionHeight(it,ne,Jt),ne.SScondition=[],ge&&(ne.underBuilding=!![]),he?he&&lt._dP(ne,1):oe.push(ne)}.bind(this)),!he&&St.push(oe)},Ut=this.bottomHeight;Ut<=this.topHeight;Ut+=this.spacing)Gt(Ut);St.reverse(),window.points_3d=St,(0,h.default)(ot=this.timeArr).call(ot,function(Kt,Jt){var te=this;(0,B.default)(this,lt);var ie=Jt,oe=this.planetaryDirections[Jt];if(!oe){var he=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(Kt),ne=I.Transforms.computeIcrfToFixedMatrix(Kt);I.Matrix3.multiplyByVector(ne,he,he),oe=I.Cartesian3.normalize(he,new I.Cartesian3),this.planetaryDirections[Jt]=oe}var ce=I.Cartesian3.subtract(new I.Cartesian3,oe,new I.Cartesian3),ge=I.Cartesian3.angleBetween(this.normal,oe),Me=I.Math.toDegrees(ge),It=Math.abs(this.spacing/Math.cos(ge));if(!(ge>=Math.PI)){E.time("\u70B9\u7684\u8FD0\u7B97");for(var Wt=[],_t=function(Oe,Fe){if(Oe=St[Fe],Fe==St.length-1){for(var Ve=0,be,Be=Oe.length;Ve<Be;Ve++)be=Oe[Ve],!be.id&&Wt.push([be]);return re=Oe,"break"}for(var He=function(bt){var Bt=this;if(bt=Oe[ke],bt.id)return Ze=bt,"continue";var Qt=[];Qt.push(bt),bt.id=I.createGuid();for(var ue=new I.Ray(bt,ce),Ce=[],Te=1;Te<=St.length-Fe-1;Te++){var Ue=I.Ray.getPoint(ue,It*Te,new I.Cartesian3),Vt=wt.cartesianToLonLatHeight(Ue);Vt.length=2;var qt=(0,U.point)(Vt),ae=(0,U.booleanContains)(te.polygon_turf,qt);if(ae)Ce.push(Ue);else break}(0,h.default)(Ce).call(Ce,function(ve,xe){(0,B.default)(this,Bt);for(var ye=0,De,Ne=Oe.length;ye<Ne;ye++){De=Oe[ye];var we=wt.upPosition(it,De,-te.spacing*(xe+1)),ze=I.Cartesian3.distance(we,ve);if(!(ze>te.spacing/2)&&ze<yt){var Ge=St[Fe+1+xe][ye];if(Ge&&Ge.id)continue;Qt.push(Ge),Ge.id=bt.id;break}}}.bind(this)),Wt.push(Qt),Ze=bt},ke=0,Ze,_=Oe.length;ke<_;ke++)var at=He(Ze);re=Oe},ee=0,re,de=St.length;ee<de;ee++){var Se=_t(re,ee);if(Se==="break")break}(0,h.default)(St).call(St,function(pe){var Oe=this;(0,B.default)(this,te),(0,h.default)(pe).call(pe,function(Fe){(0,B.default)(this,Oe),Fe.id&&delete Fe.id}.bind(this))}.bind(this));var Pe=0;Wt.forEach(function(pe){var Oe=this;(0,B.default)(this,te),pe.forEach(function(Fe){(0,B.default)(this,Oe),++Pe}.bind(this))}.bind(this));var Le=(0,y.default)(Wt).call(Wt,function(pe){return(0,B.default)(this,te),pe.length==1}.bind(this)),Ie=[];Le.forEach(function(pe){(0,B.default)(this,te),Ie.push(pe[0])}.bind(this)),Wt=(0,y.default)(Wt).call(Wt,function(pe){return(0,B.default)(this,te),pe.length>1}.bind(this)),(0,h.default)(Wt).call(Wt,function(pe){var Oe=this;if((0,B.default)(this,te),pe[0].underBuilding){(0,h.default)(pe).call(pe,function(ke){(0,B.default)(this,Oe),ke.shadow=ke.shadow?++ke.shadow:1,ke.SScondition[ie]=0}.bind(this));return}var Fe=new I.Ray(pe[0],oe),Ve=I.Ray.getPoint(Fe,150,new I.Cartesian3),be=new I.Ray(Ve,ce),Be=it.scene.pickFromRay(be);if(window.score++,Be&&Be.position){var He=wt.cartesianToLonLatHeight(Be.position)[2];(0,h.default)(pe).call(pe,function(ke){(0,B.default)(this,Oe);var Ze=wt.cartesianToLonLatHeight(ke)[2];Ze<He?(ke.shadow=ke.shadow?++ke.shadow:1,ke.SScondition[ie]=0):(ke.sunshine=ke.sunshine?++ke.sunshine:1,ke.SScondition[ie]=1)}.bind(this))}}.bind(this)),(0,h.default)(Ie).call(Ie,function(pe){if((0,B.default)(this,te),pe.underBuilding){pe.shadow=pe.shadow?++pe.shadow:1,pe.SScondition[ie]=0;return}var Oe=new I.Ray(pe,oe),Fe=it.scene.pickFromRay(Oe);window.score++,Fe&&Fe.position?(pe.shadow=pe.shadow?++pe.shadow:1,pe.SScondition[ie]=0):(pe.sunshine=pe.sunshine?++pe.sunshine:1,pe.SScondition[ie]=1)}.bind(this)),E.timeEnd("\u70B9\u7684\u8FD0\u7B97")}}.bind(this)),ter.clear(),(0,h.default)(St).call(St,function(Kt){var Jt=this;(0,B.default)(this,lt),(0,h.default)(Kt).call(Kt,function(te){(0,B.default)(this,Jt);var ie=(parseInt(te.sunshine)||0)/this.timeArr.length;this._dP(te,ie)}.bind(this))}.bind(this)),E.timeEnd("\u65B0\u7B97\u6CD5\u603B\u8FD0\u7B97")}},{key:"_dL",value:function(lt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:![],yt=parseInt(ot/.2);yt=yt==5?4:yt;var Ot=jt(yt/4),St=this.prop.dataSource;St.entities.add({polyline:{positions:lt,width:3,material:Ot}})}},{key:"_dP",value:function(lt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:![];E.assert(ot>=0&&ot<=1,"\u5149\u7167\u7387\u5728\u533A\u95F4\u5916\uFF0C".concat(ot));var yt=jt(ot),Ot=parseInt(ot/.2);Ot=Ot==5?4:Ot;var St=this.primitives[Ot],Gt=St&&St.add({position:lt,color:yt,pixelSize:it?20:null,outlineWidth:it?2:null,id:I.createGuid()+"**:"+ot});it&&(this.lastSelectPoint=Gt)}},{key:"_dB",value:function(lt,ot){var it=ot.x,yt=ot.y,Ot=ot.z,St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Gt=this.prop.dataSource,Ut=new I.Cartesian3(it,yt,Ot);Gt.entities.add({position:lt,box:{dimensions:Ut,fill:![],outline:!![],outlineColor:I.Color.WHITE,outlineWidth:St}})}},{key:"_pointShow",value:function(lt){var ot,it=this;(0,h.default)(ot=this.primitives).call(ot,function(yt){(0,B.default)(this,it),yt.show=lt}.bind(this))}},{key:"setPeriod",value:function(lt,ot){var it,yt;if(lt instanceof Date&&ot instanceof Date){var Ot=I.JulianDate.fromDate;it=Ot(lt,it),yt=Ot(ot,yt)}else if(lt instanceof I.JulianDate&&ot instanceof I.JulianDate)it=lt,yt=ot;else{E.error("encounter error in settimeInterval");return}var St=I.JulianDate.greaterThan(yt,it);St?this.period=[it,yt]:E.error("start should great than end in time")}},{key:"clear",value:function(){var lt=this.prop.dataSource,ot=this.primitives;this.drawControl.clearDraw(),lt.entities.removeAll();var it=nt(ot),yt;try{for(it.s();!(yt=it.n()).done;){var Ot=yt.value;Ot.removeAll()}}catch(Gt){it.e(Gt)}finally{it.f()}var St=this.drawControl.drawCtrl.billboard.getHandler();St.removeInputAction(2)}},{key:"destroy",value:function(){}}]),gt}(Mt);z.ShadowRatioAnalysis=zt;var Yt=function(){function Zt(ft){(0,A.default)(this,Zt),this.viewer=ft,this.lastStage=null,this.speed_r=2,this.speed_s=2,this.size=0,this.depth=.9,this.density=7,this.brightness_r=.35,this.brightness_s=.35,this.hidden=![]}return(0,N.default)(Zt,[{key:"showSnow",value:function(){var gt=this;if(!this.snowStage){var dt=new I.PostProcessStage({name:"czm_snow",uniforms:{speed:function(){return(0,B.default)(this,gt),this.speed_s}.bind(this),size:function(){return(0,B.default)(this,gt),this.size}.bind(this),depth:function(){return(0,B.default)(this,gt),this.depth}.bind(this),brightness:function(){return(0,B.default)(this,gt),this.brightness_s}.bind(this),hidden:function(){return(0,B.default)(this,gt),this.hidden?0:1}.bind(this)},fragmentShader:this.getSnowShader()});this.viewer.scene.postProcessStages.add(dt),this.snowStage=dt,this.addHeightDetect()}}},{key:"showRain",value:function(){var gt=this;if(!this.rainStage){var dt=new I.PostProcessStage({name:"czm_rain",uniforms:{speed:function(){return(0,B.default)(this,gt),this.speed_r}.bind(this),density:function(){return(0,B.default)(this,gt),this.density}.bind(this),brightness:function(){return(0,B.default)(this,gt),this.brightness_r}.bind(this),hidden:function(){return(0,B.default)(this,gt),this.hidden?0:1}.bind(this)},fragmentShader:this.getRainShader()});this.viewer.scene.postProcessStages.add(dt),this.rainStage=dt,this.addHeightDetect()}}},{key:"addHeightDetect",value:function(){var gt=this.viewer.scene.camera.positionCartographic,dt=gt.height;dt>5e4||!dt?this.hidden=!![]:this.hidden=![];var lt=this;Object.defineProperty(this.viewer.scene.camera,"_positionCartographic",{get:function(){return this.__positionCartographic},set:function(it){this.__positionCartographic=it,it?.height<5e4?lt.hidden=![]:lt.hidden=!![]}}),this.viewer.scene.camera._positionCartographic=gt}},{key:"removeHeightDetect",value:function(){Object.defineProperty(this.viewer.scene.camera,"_positionCartographic",{get:function(){return this.__positionCartographic},set:function(dt){this.__positionCartographic=dt}})}},{key:"rainfall",value:function(gt){this.showRain(),gt==1?(this.speed_r=.5,this.density=20):gt==2?(this.speed_r=2,this.density=7):gt==3?(this.speed_r=3,this.density=4.5):(this.speed_r=4,this.density=2)}},{key:"snowfall",value:function(gt){this.showSnow(),gt==1?(this.speed_s=1,this.size=0,this.depth=0,this.brightness_s=.35):gt==2?(this.speed_s=2,this.size=0,this.depth=0,this.brightness_s=.45):gt==3?(this.speed_s=3,this.size=.02,this.depth=.8,this.brightness_s=.5):(this.speed_s=4,this.size=.03,this.depth=.9,this.brightness_s=.5)}},{key:"removeRainStage",value:function(){this.viewer.scene.postProcessStages.remove(this.rainStage),this.rainStage=null,!this.rainStage&&!this.snowStage&&this.removeHeightDetect()}},{key:"removeSnowStage",value:function(){this.viewer.scene.postProcessStages.remove(this.snowStage),this.snowStage=null,!this.rainStage&&!this.snowStage&&this.removeHeightDetect()}},{key:"removeStage",value:function(){this.removeRainStage(),this.removeSnowStage()}},{key:"getSnowShader",value:function(){return`uniform sampler2D colorTexture;
                          varying vec2 v_textureCoordinates;
                          uniform float speed;
                          uniform float size;
                          uniform float depth;
                          uniform float brightness;
                          uniform float hidden;
                      
                          float snow(vec2 uv,float scale)
                          {
                              float time = czm_frameNumber / 160.0 *speed;
                              float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;
                              uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;
                              uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;
                              p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);
                              k=smoothstep(size,k,sin(f.x+f.y)*0.01);
                              return k*w;
                          }
                      
                          void main(void){
                              vec2 resolution = czm_viewport.zw;
                              vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);
                              vec3 finalColor=vec3(0);
                              float c = 0.0;
                              c+=snow(uv,30.)*.0;
                              c+=snow(uv,20.)*depth*0.5;
                              c+=snow(uv,15.)*depth;
                              c+=snow(uv,10.);
                              c+=snow(uv,8.);
                          c+=snow(uv,6.);
                              c+=snow(uv,5.);
                              finalColor=(vec3(c)); 
                              gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), brightness*hidden); 
                      
                          }
                      `}},{key:"getRainShader",value:function(){return`uniform sampler2D colorTexture;
                   varying vec2 v_textureCoordinates;
                   uniform float speed;
                   uniform float density;
                   uniform float brightness;
                   uniform float hidden;
               
                   float hash(float x){
                       return fract(sin(x*133.3)*13.13);
               }
               
               void main(void){
               
                   float time = czm_frameNumber /160.0 * speed;
               vec2 resolution = czm_viewport.zw;
               
               vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);
               vec3 c=vec3(.6,.7,.8);
               
               float a=-.4;
               float si=sin(a),co=cos(a);
               uv*=mat2(co,-si,si,co);
               uv*=length(uv+vec2(0,4.9))*.3+1.;
               
               float v=1.-clamp(sin(hash(floor(uv.x*100.))*2.) * density,-1.,1.);
               float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.98,0.,1.)*50.;
               c*=v*b; 
               
               gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c,1), brightness*hidden);  
               }
               `}}]),Zt}();z.Weather=Yt},516261:function(X,z,e){var E,F;/*!
* URI.js - Mutating URLs
* IPv6 Support
*
* Version: 1.19.11
*
* Author: Rodney Rehm
* Web: http://medialize.github.io/URI.js/
*
* Licensed under
*   MIT License http://www.opensource.org/licenses/mit-license
*
*/(function(O,M){"use strict";X.exports?X.exports=M():(E=M,F=typeof E=="function"?E.call(z,e,z,X):E,F!==void 0&&(X.exports=F))})(this,function(O){"use strict";var M=O&&O.IPv6;function b(T){var C=T.toLowerCase(),f=C.split(":"),v=f.length,m=8;f[0]===""&&f[1]===""&&f[2]===""?(f.shift(),f.shift()):f[0]===""&&f[1]===""?f.shift():f[v-1]===""&&f[v-2]===""&&f.pop(),v=f.length,f[v-1].indexOf(".")!==-1&&(m=7);var o;for(o=0;o<v&&f[o]!=="";o++);if(o<m)for(f.splice(o,1,"0000");f.length<m;)f.splice(o,0,"0000");for(var h,l=0;l<m;l++){h=f[l].split("");for(var r=0;r<3&&(h[0]==="0"&&h.length>1);r++)h.splice(0,1);f[l]=h.join("")}var s=-1,c=0,x=0,a=-1,i=!1;for(l=0;l<m;l++)i?f[l]==="0"?x+=1:(i=!1,x>c&&(s=a,c=x)):f[l]==="0"&&(i=!0,a=l,x=1);x>c&&(s=a,c=x),c>1&&f.splice(s,c,""),v=f.length;var n="";for(f[0]===""&&(n=":"),l=0;l<v&&(n+=f[l],l!==v-1);l++)n+=":";return f[v-1]===""&&(n+=":"),n}function L(){return O.IPv6===this&&(O.IPv6=M),this}return{best:b,noConflict:L}})},68776:function(X,z,e){var E,F;/*!
* URI.js - Mutating URLs
* Second Level Domain (SLD) Support
*
* Version: 1.19.11
*
* Author: Rodney Rehm
* Web: http://medialize.github.io/URI.js/
*
* Licensed under
*   MIT License http://www.opensource.org/licenses/mit-license
*
*/(function(O,M){"use strict";X.exports?X.exports=M():(E=M,F=typeof E=="function"?E.call(z,e,z,X):E,F!==void 0&&(X.exports=F))})(this,function(O){"use strict";var M=O&&O.SecondLevelDomains,b={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(L){var T=L.lastIndexOf(".");if(T<=0||T>=L.length-1)return!1;var C=L.lastIndexOf(".",T-1);if(C<=0||C>=T-1)return!1;var f=b.list[L.slice(T+1)];return f?f.indexOf(" "+L.slice(C+1,T)+" ")>=0:!1},is:function(L){var T=L.lastIndexOf(".");if(T<=0||T>=L.length-1)return!1;var C=L.lastIndexOf(".",T-1);if(C>=0)return!1;var f=b.list[L.slice(T+1)];return f?f.indexOf(" "+L.slice(0,T)+" ")>=0:!1},get:function(L){var T=L.lastIndexOf(".");if(T<=0||T>=L.length-1)return null;var C=L.lastIndexOf(".",T-1);if(C<=0||C>=T-1)return null;var f=b.list[L.slice(T+1)];return!f||f.indexOf(" "+L.slice(C+1,T)+" ")<0?null:L.slice(C+1)},noConflict:function(){return O.SecondLevelDomains===this&&(O.SecondLevelDomains=M),this}};return b})},736812:function(X,z,e){var E,F,O;/*!
* URI.js - Mutating URLs
*
* Version: 1.19.11
*
* Author: Rodney Rehm
* Web: http://medialize.github.io/URI.js/
*
* Licensed under
*   MIT License http://www.opensource.org/licenses/mit-license
*
*/(function(M,b){"use strict";X.exports?X.exports=b(e(904344),e(516261),e(68776)):(F=[e(904344),e(516261),e(68776)],E=b,O=typeof E=="function"?E.apply(z,F):E,O!==void 0&&(X.exports=O))})(this,function(M,b,L,T){"use strict";var C=T&&T.URI;function f(P,D){var A=arguments.length>=1,N=arguments.length>=2;if(!(this instanceof f))return A?N?new f(P,D):new f(P):new f;if(P===void 0){if(A)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?P=location.href+"":P=""}if(P===null&&A)throw new TypeError("null is not a valid argument for URI");return this.href(P),D!==void 0?this.absoluteTo(D):this}function v(P){return/^[0-9]+$/.test(P)}f.version="1.19.11";var m=f.prototype,o=Object.prototype.hasOwnProperty;function h(P){return P.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function l(P){return P===void 0?"Undefined":String(Object.prototype.toString.call(P)).slice(8,-1)}function r(P){return l(P)==="Array"}function s(P,D){var A={},N,I;if(l(D)==="RegExp")A=null;else if(r(D))for(N=0,I=D.length;N<I;N++)A[D[N]]=!0;else A[D]=!0;for(N=0,I=P.length;N<I;N++){var G=A&&A[P[N]]!==void 0||!A&&D.test(P[N]);G&&(P.splice(N,1),I--,N--)}return P}function c(P,D){var A,N;if(r(D)){for(A=0,N=D.length;A<N;A++)if(!c(P,D[A]))return!1;return!0}var I=l(D);for(A=0,N=P.length;A<N;A++)if(I==="RegExp"){if(typeof P[A]=="string"&&P[A].match(D))return!0}else if(P[A]===D)return!0;return!1}function x(P,D){if(!r(P)||!r(D)||P.length!==D.length)return!1;P.sort(),D.sort();for(var A=0,N=P.length;A<N;A++)if(P[A]!==D[A])return!1;return!0}function a(P){var D=/^\/+|\/+$/g;return P.replace(D,"")}f._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:f.preventInvalidHostname,duplicateQueryParameters:f.duplicateQueryParameters,escapeQuerySpace:f.escapeQuerySpace}},f.preventInvalidHostname=!1,f.duplicateQueryParameters=!1,f.escapeQuerySpace=!0,f.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,f.idn_expression=/[^a-z0-9\._-]/i,f.punycode_expression=/(xn--)/i,f.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,f.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,f.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},f.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,f.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,f.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},f.hostProtocols=["http","https"],f.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,f.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},f.getDomAttribute=function(P){if(!(!P||!P.nodeName)){var D=P.nodeName.toLowerCase();if(!(D==="input"&&P.type!=="image"))return f.domAttributes[D]}};function i(P){return escape(P)}function n(P){return encodeURIComponent(P).replace(/[!'()*]/g,i).replace(/\*/g,"%2A")}f.encode=n,f.decode=decodeURIComponent,f.iso8859=function(){f.encode=escape,f.decode=unescape},f.unicode=function(){f.encode=n,f.decode=decodeURIComponent},f.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},f.encodeQuery=function(P,D){var A=f.encode(P+"");return D===void 0&&(D=f.escapeQuerySpace),D?A.replace(/%20/g,"+"):A},f.decodeQuery=function(P,D){P+="",D===void 0&&(D=f.escapeQuerySpace);try{return f.decode(D?P.replace(/\+/g,"%20"):P)}catch{return P}};var u={encode:"encode",decode:"decode"},g,d=function(P,D){return function(A){try{return f[D](A+"").replace(f.characters[P][D].expression,function(N){return f.characters[P][D].map[N]})}catch{return A}}};for(g in u)f[g+"PathSegment"]=d("pathname",u[g]),f[g+"UrnPathSegment"]=d("urnpath",u[g]);var y=function(P,D,A){return function(N){var I;A?I=function(H){return f[D](f[A](H))}:I=f[D];for(var G=(N+"").split(P),W=0,Z=G.length;W<Z;W++)G[W]=I(G[W]);return G.join(P)}};f.decodePath=y("/","decodePathSegment"),f.decodeUrnPath=y(":","decodeUrnPathSegment"),f.recodePath=y("/","encodePathSegment","decode"),f.recodeUrnPath=y(":","encodeUrnPathSegment","decode"),f.encodeReserved=d("reserved","encode"),f.parse=function(P,D){var A;return D||(D={preventInvalidHostname:f.preventInvalidHostname}),P=P.replace(f.leading_whitespace_expression,""),P=P.replace(f.ascii_tab_whitespace,""),A=P.indexOf("#"),A>-1&&(D.fragment=P.substring(A+1)||null,P=P.substring(0,A)),A=P.indexOf("?"),A>-1&&(D.query=P.substring(A+1)||null,P=P.substring(0,A)),P=P.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),P=P.replace(/^[/\\]{2,}/i,"//"),P.substring(0,2)==="//"?(D.protocol=null,P=P.substring(2),P=f.parseAuthority(P,D)):(A=P.indexOf(":"),A>-1&&(D.protocol=P.substring(0,A)||null,D.protocol&&!D.protocol.match(f.protocol_expression)?D.protocol=void 0:P.substring(A+1,A+3).replace(/\\/g,"/")==="//"?(P=P.substring(A+3),P=f.parseAuthority(P,D)):(P=P.substring(A+1),D.urn=!0))),D.path=P,D},f.parseHost=function(P,D){P||(P=""),P=P.replace(/\\/g,"/");var A=P.indexOf("/"),N,I;if(A===-1&&(A=P.length),P.charAt(0)==="[")N=P.indexOf("]"),D.hostname=P.substring(1,N)||null,D.port=P.substring(N+2,A)||null,D.port==="/"&&(D.port=null);else{var G=P.indexOf(":"),W=P.indexOf("/"),Z=P.indexOf(":",G+1);Z!==-1&&(W===-1||Z<W)?(D.hostname=P.substring(0,A)||null,D.port=null):(I=P.substring(0,A).split(":"),D.hostname=I[0]||null,D.port=I[1]||null)}return D.hostname&&P.substring(A).charAt(0)!=="/"&&(A++,P="/"+P),D.preventInvalidHostname&&f.ensureValidHostname(D.hostname,D.protocol),D.port&&f.ensureValidPort(D.port),P.substring(A)||"/"},f.parseAuthority=function(P,D){return P=f.parseUserinfo(P,D),f.parseHost(P,D)},f.parseUserinfo=function(P,D){var A=P,N=P.indexOf("\\");N!==-1&&(P=P.replace(/\\/g,"/"));var I=P.indexOf("/"),G=P.lastIndexOf("@",I>-1?I:P.length-1),W;return G>-1&&(I===-1||G<I)?(W=P.substring(0,G).split(":"),D.username=W[0]?f.decode(W[0]):null,W.shift(),D.password=W[0]?f.decode(W.join(":")):null,P=A.substring(G+1)):(D.username=null,D.password=null),P},f.parseQuery=function(P,D){if(!P)return{};if(P=P.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!P)return{};for(var A={},N=P.split("&"),I=N.length,G,W,Z,H=0;H<I;H++)G=N[H].split("="),W=f.decodeQuery(G.shift(),D),Z=G.length?f.decodeQuery(G.join("="),D):null,W!=="__proto__"&&(o.call(A,W)?((typeof A[W]=="string"||A[W]===null)&&(A[W]=[A[W]]),A[W].push(Z)):A[W]=Z);return A},f.build=function(P){var D="",A=!1;return P.protocol&&(D+=P.protocol+":"),!P.urn&&(D||P.hostname)&&(D+="//",A=!0),D+=f.buildAuthority(P)||"",typeof P.path=="string"&&(P.path.charAt(0)!=="/"&&A&&(D+="/"),D+=P.path),typeof P.query=="string"&&P.query&&(D+="?"+P.query),typeof P.fragment=="string"&&P.fragment&&(D+="#"+P.fragment),D},f.buildHost=function(P){var D="";if(P.hostname)f.ip6_expression.test(P.hostname)?D+="["+P.hostname+"]":D+=P.hostname;else return"";return P.port&&(D+=":"+P.port),D},f.buildAuthority=function(P){return f.buildUserinfo(P)+f.buildHost(P)},f.buildUserinfo=function(P){var D="";return P.username&&(D+=f.encode(P.username)),P.password&&(D+=":"+f.encode(P.password)),D&&(D+="@"),D},f.buildQuery=function(P,D,A){var N="",I,G,W,Z;for(G in P)if(G!=="__proto__"&&o.call(P,G))if(r(P[G]))for(I={},W=0,Z=P[G].length;W<Z;W++)P[G][W]!==void 0&&I[P[G][W]+""]===void 0&&(N+="&"+f.buildQueryParameter(G,P[G][W],A),D!==!0&&(I[P[G][W]+""]=!0));else P[G]!==void 0&&(N+="&"+f.buildQueryParameter(G,P[G],A));return N.substring(1)},f.buildQueryParameter=function(P,D,A){return f.encodeQuery(P,A)+(D!==null?"="+f.encodeQuery(D,A):"")},f.addQuery=function(P,D,A){if(typeof D=="object")for(var N in D)o.call(D,N)&&f.addQuery(P,N,D[N]);else if(typeof D=="string"){if(P[D]===void 0){P[D]=A;return}else typeof P[D]=="string"&&(P[D]=[P[D]]);r(A)||(A=[A]),P[D]=(P[D]||[]).concat(A)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},f.setQuery=function(P,D,A){if(typeof D=="object")for(var N in D)o.call(D,N)&&f.setQuery(P,N,D[N]);else if(typeof D=="string")P[D]=A===void 0?null:A;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},f.removeQuery=function(P,D,A){var N,I,G;if(r(D))for(N=0,I=D.length;N<I;N++)P[D[N]]=void 0;else if(l(D)==="RegExp")for(G in P)D.test(G)&&(P[G]=void 0);else if(typeof D=="object")for(G in D)o.call(D,G)&&f.removeQuery(P,G,D[G]);else if(typeof D=="string")A!==void 0?l(A)==="RegExp"?!r(P[D])&&A.test(P[D])?P[D]=void 0:P[D]=s(P[D],A):P[D]===String(A)&&(!r(A)||A.length===1)?P[D]=void 0:r(P[D])&&(P[D]=s(P[D],A)):P[D]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},f.hasQuery=function(P,D,A,N){switch(l(D)){case"String":break;case"RegExp":for(var I in P)if(o.call(P,I)&&D.test(I)&&(A===void 0||f.hasQuery(P,I,A)))return!0;return!1;case"Object":for(var G in D)if(o.call(D,G)&&!f.hasQuery(P,G,D[G]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(l(A)){case"Undefined":return D in P;case"Boolean":var W=!!(r(P[D])?P[D].length:P[D]);return A===W;case"Function":return!!A(P[D],D,P);case"Array":if(!r(P[D]))return!1;var Z=N?c:x;return Z(P[D],A);case"RegExp":return r(P[D])?N?c(P[D],A):!1:!!(P[D]&&P[D].match(A));case"Number":A=String(A);case"String":return r(P[D])?N?c(P[D],A):!1:P[D]===A;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},f.joinPaths=function(){for(var P=[],D=[],A=0,N=0;N<arguments.length;N++){var I=new f(arguments[N]);P.push(I);for(var G=I.segment(),W=0;W<G.length;W++)typeof G[W]=="string"&&D.push(G[W]),G[W]&&A++}if(!D.length||!A)return new f("");var Z=new f("").segment(D);return(P[0].path()===""||P[0].path().slice(0,1)==="/")&&Z.path("/"+Z.path()),Z.normalize()},f.commonPath=function(P,D){var A=Math.min(P.length,D.length),N;for(N=0;N<A;N++)if(P.charAt(N)!==D.charAt(N)){N--;break}return N<1?P.charAt(0)===D.charAt(0)&&P.charAt(0)==="/"?"/":"":((P.charAt(N)!=="/"||D.charAt(N)!=="/")&&(N=P.substring(0,N).lastIndexOf("/")),P.substring(0,N+1))},f.withinString=function(P,D,A){A||(A={});var N=A.start||f.findUri.start,I=A.end||f.findUri.end,G=A.trim||f.findUri.trim,W=A.parens||f.findUri.parens,Z=/[a-z0-9-]=["']?$/i;for(N.lastIndex=0;;){var H=N.exec(P);if(!H)break;var U=H.index;if(A.ignoreHtml){var V=P.slice(Math.max(U-3,0),U);if(V&&Z.test(V))continue}for(var Y=U+P.slice(U).search(I),$=P.slice(U,Y),K=-1;;){var J=W.exec($);if(!J)break;var Q=J.index+J[0].length;K=Math.max(K,Q)}if(K>-1?$=$.slice(0,K)+$.slice(K).replace(G,""):$=$.replace(G,""),!($.length<=H[0].length)&&!(A.ignore&&A.ignore.test($))){Y=U+$.length;var et=D($,U,Y,P);if(et===void 0){N.lastIndex=Y;continue}et=String(et),P=P.slice(0,U)+et+P.slice(Y),N.lastIndex=U+et.length}}return N.lastIndex=0,P},f.ensureValidHostname=function(P,D){var A=!!P,N=!!D,I=!1;if(N&&(I=c(f.hostProtocols,D)),I&&!A)throw new TypeError("Hostname cannot be empty, if protocol is "+D);if(P&&P.match(f.invalid_hostname_characters)){if(!M)throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(M.toASCII(P).match(f.invalid_hostname_characters))throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-:_]')}},f.ensureValidPort=function(P){if(P){var D=Number(P);if(!(v(D)&&D>0&&D<65536))throw new TypeError('Port "'+P+'" is not a valid port')}},f.noConflict=function(P){if(P){var D={URI:this.noConflict()};return T.URITemplate&&typeof T.URITemplate.noConflict=="function"&&(D.URITemplate=T.URITemplate.noConflict()),T.IPv6&&typeof T.IPv6.noConflict=="function"&&(D.IPv6=T.IPv6.noConflict()),T.SecondLevelDomains&&typeof T.SecondLevelDomains.noConflict=="function"&&(D.SecondLevelDomains=T.SecondLevelDomains.noConflict()),D}else T.URI===this&&(T.URI=C);return this},m.build=function(P){return P===!0?this._deferred_build=!0:(P===void 0||this._deferred_build)&&(this._string=f.build(this._parts),this._deferred_build=!1),this},m.clone=function(){return new f(this)},m.valueOf=m.toString=function(){return this.build(!1)._string};function p(P){return function(D,A){return D===void 0?this._parts[P]||"":(this._parts[P]=D||null,this.build(!A),this)}}function w(P,D){return function(A,N){return A===void 0?this._parts[P]||"":(A!==null&&(A=A+"",A.charAt(0)===D&&(A=A.substring(1))),this._parts[P]=A,this.build(!N),this)}}m.protocol=p("protocol"),m.username=p("username"),m.password=p("password"),m.hostname=p("hostname"),m.port=p("port"),m.query=w("query","?"),m.fragment=w("fragment","#"),m.search=function(P,D){var A=this.query(P,D);return typeof A=="string"&&A.length?"?"+A:A},m.hash=function(P,D){var A=this.fragment(P,D);return typeof A=="string"&&A.length?"#"+A:A},m.pathname=function(P,D){if(P===void 0||P===!0){var A=this._parts.path||(this._parts.hostname?"/":"");return P?(this._parts.urn?f.decodeUrnPath:f.decodePath)(A):A}else return this._parts.urn?this._parts.path=P?f.recodeUrnPath(P):"":this._parts.path=P?f.recodePath(P):"/",this.build(!D),this},m.path=m.pathname,m.href=function(P,D){var A;if(P===void 0)return this.toString();this._string="",this._parts=f._parts();var N=P instanceof f,I=typeof P=="object"&&(P.hostname||P.path||P.pathname);if(P.nodeName){var G=f.getDomAttribute(P);P=P[G]||"",I=!1}if(!N&&I&&P.pathname!==void 0&&(P=P.toString()),typeof P=="string"||P instanceof String)this._parts=f.parse(String(P),this._parts);else if(N||I){var W=N?P._parts:P;for(A in W)A!=="query"&&o.call(this._parts,A)&&(this._parts[A]=W[A]);W.query&&this.query(W.query,!1)}else throw new TypeError("invalid input");return this.build(!D),this},m.is=function(P){var D=!1,A=!1,N=!1,I=!1,G=!1,W=!1,Z=!1,H=!this._parts.urn;switch(this._parts.hostname&&(H=!1,A=f.ip4_expression.test(this._parts.hostname),N=f.ip6_expression.test(this._parts.hostname),D=A||N,I=!D,G=I&&L&&L.has(this._parts.hostname),W=I&&f.idn_expression.test(this._parts.hostname),Z=I&&f.punycode_expression.test(this._parts.hostname)),P.toLowerCase()){case"relative":return H;case"absolute":return!H;case"domain":case"name":return I;case"sld":return G;case"ip":return D;case"ip4":case"ipv4":case"inet4":return A;case"ip6":case"ipv6":case"inet6":return N;case"idn":return W;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return Z}return null};var S=m.protocol,R=m.port,B=m.hostname;m.protocol=function(P,D){if(P&&(P=P.replace(/:(\/\/)?$/,""),!P.match(f.protocol_expression)))throw new TypeError('Protocol "'+P+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return S.call(this,P,D)},m.scheme=m.protocol,m.port=function(P,D){return this._parts.urn?P===void 0?"":this:(P!==void 0&&(P===0&&(P=null),P&&(P+="",P.charAt(0)===":"&&(P=P.substring(1)),f.ensureValidPort(P))),R.call(this,P,D))},m.hostname=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(P!==void 0){var A={preventInvalidHostname:this._parts.preventInvalidHostname},N=f.parseHost(P,A);if(N!=="/")throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-]');P=A.hostname,this._parts.preventInvalidHostname&&f.ensureValidHostname(P,this._parts.protocol)}return B.call(this,P,D)},m.origin=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(P===void 0){var A=this.protocol(),N=this.authority();return N?(A?A+"://":"")+this.authority():""}else{var I=f(P);return this.protocol(I.protocol()).authority(I.authority()).build(!D),this}},m.host=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(P===void 0)return this._parts.hostname?f.buildHost(this._parts):"";var A=f.parseHost(P,this._parts);if(A!=="/")throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-]');return this.build(!D),this},m.authority=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(P===void 0)return this._parts.hostname?f.buildAuthority(this._parts):"";var A=f.parseAuthority(P,this._parts);if(A!=="/")throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-]');return this.build(!D),this},m.userinfo=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(P===void 0){var A=f.buildUserinfo(this._parts);return A&&A.substring(0,A.length-1)}else return P[P.length-1]!=="@"&&(P+="@"),f.parseUserinfo(P,this._parts),this.build(!D),this},m.resource=function(P,D){var A;return P===void 0?this.path()+this.search()+this.hash():(A=f.parse(P),this._parts.path=A.path,this._parts.query=A.query,this._parts.fragment=A.fragment,this.build(!D),this)},m.subdomain=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(P===void 0){if(!this._parts.hostname||this.is("IP"))return"";var A=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,A)||""}else{var N=this._parts.hostname.length-this.domain().length,I=this._parts.hostname.substring(0,N),G=new RegExp("^"+h(I));if(P&&P.charAt(P.length-1)!=="."&&(P+="."),P.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return P&&f.ensureValidHostname(P,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(G,P),this.build(!D),this}},m.domain=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(typeof P=="boolean"&&(D=P,P=void 0),P===void 0){if(!this._parts.hostname||this.is("IP"))return"";var A=this._parts.hostname.match(/\./g);if(A&&A.length<2)return this._parts.hostname;var N=this._parts.hostname.length-this.tld(D).length-1;return N=this._parts.hostname.lastIndexOf(".",N-1)+1,this._parts.hostname.substring(N)||""}else{if(!P)throw new TypeError("cannot set domain empty");if(P.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(f.ensureValidHostname(P,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=P;else{var I=new RegExp(h(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(I,P)}return this.build(!D),this}},m.tld=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(typeof P=="boolean"&&(D=P,P=void 0),P===void 0){if(!this._parts.hostname||this.is("IP"))return"";var A=this._parts.hostname.lastIndexOf("."),N=this._parts.hostname.substring(A+1);return D!==!0&&L&&L.list[N.toLowerCase()]&&L.get(this._parts.hostname)||N}else{var I;if(P)if(P.match(/[^a-zA-Z0-9-]/))if(L&&L.is(P))I=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(I,P);else throw new TypeError('TLD "'+P+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");I=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(I,P)}else throw new TypeError("cannot set TLD empty");return this.build(!D),this}},m.directory=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(P===void 0||P===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var A=this._parts.path.length-this.filename().length-1,N=this._parts.path.substring(0,A)||(this._parts.hostname?"/":"");return P?f.decodePath(N):N}else{var I=this._parts.path.length-this.filename().length,G=this._parts.path.substring(0,I),W=new RegExp("^"+h(G));return this.is("relative")||(P||(P="/"),P.charAt(0)!=="/"&&(P="/"+P)),P&&P.charAt(P.length-1)!=="/"&&(P+="/"),P=f.recodePath(P),this._parts.path=this._parts.path.replace(W,P),this.build(!D),this}},m.filename=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(typeof P!="string"){if(!this._parts.path||this._parts.path==="/")return"";var A=this._parts.path.lastIndexOf("/"),N=this._parts.path.substring(A+1);return P?f.decodePathSegment(N):N}else{var I=!1;P.charAt(0)==="/"&&(P=P.substring(1)),P.match(/\.?\//)&&(I=!0);var G=new RegExp(h(this.filename())+"$");return P=f.recodePath(P),this._parts.path=this._parts.path.replace(G,P),I?this.normalizePath(D):this.build(!D),this}},m.suffix=function(P,D){if(this._parts.urn)return P===void 0?"":this;if(P===void 0||P===!0){if(!this._parts.path||this._parts.path==="/")return"";var A=this.filename(),N=A.lastIndexOf("."),I,G;return N===-1?"":(I=A.substring(N+1),G=/^[a-z0-9%]+$/i.test(I)?I:"",P?f.decodePathSegment(G):G)}else{P.charAt(0)==="."&&(P=P.substring(1));var W=this.suffix(),Z;if(W)P?Z=new RegExp(h(W)+"$"):Z=new RegExp(h("."+W)+"$");else{if(!P)return this;this._parts.path+="."+f.recodePath(P)}return Z&&(P=f.recodePath(P),this._parts.path=this._parts.path.replace(Z,P)),this.build(!D),this}},m.segment=function(P,D,A){var N=this._parts.urn?":":"/",I=this.path(),G=I.substring(0,1)==="/",W=I.split(N);if(P!==void 0&&typeof P!="number"&&(A=D,D=P,P=void 0),P!==void 0&&typeof P!="number")throw new Error('Bad segment "'+P+'", must be 0-based integer');if(G&&W.shift(),P<0&&(P=Math.max(W.length+P,0)),D===void 0)return P===void 0?W:W[P];if(P===null||W[P]===void 0)if(r(D)){W=[];for(var Z=0,H=D.length;Z<H;Z++)!D[Z].length&&(!W.length||!W[W.length-1].length)||(W.length&&!W[W.length-1].length&&W.pop(),W.push(a(D[Z])))}else(D||typeof D=="string")&&(D=a(D),W[W.length-1]===""?W[W.length-1]=D:W.push(D));else D?W[P]=a(D):W.splice(P,1);return G&&W.unshift(""),this.path(W.join(N),A)},m.segmentCoded=function(P,D,A){var N,I,G;if(typeof P!="number"&&(A=D,D=P,P=void 0),D===void 0){if(N=this.segment(P,D,A),!r(N))N=N!==void 0?f.decode(N):void 0;else for(I=0,G=N.length;I<G;I++)N[I]=f.decode(N[I]);return N}if(!r(D))D=typeof D=="string"||D instanceof String?f.encode(D):D;else for(I=0,G=D.length;I<G;I++)D[I]=f.encode(D[I]);return this.segment(P,D,A)};var k=m.query;return m.query=function(P,D){if(P===!0)return f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof P=="function"){var A=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace),N=P.call(this,A);return this._parts.query=f.buildQuery(N||A,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!D),this}else return P!==void 0&&typeof P!="string"?(this._parts.query=f.buildQuery(P,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!D),this):k.call(this,P,D)},m.setQuery=function(P,D,A){var N=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof P=="string"||P instanceof String)N[P]=D!==void 0?D:null;else if(typeof P=="object")for(var I in P)o.call(P,I)&&(N[I]=P[I]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=f.buildQuery(N,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof P!="string"&&(A=D),this.build(!A),this},m.addQuery=function(P,D,A){var N=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return f.addQuery(N,P,D===void 0?null:D),this._parts.query=f.buildQuery(N,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof P!="string"&&(A=D),this.build(!A),this},m.removeQuery=function(P,D,A){var N=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return f.removeQuery(N,P,D),this._parts.query=f.buildQuery(N,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof P!="string"&&(A=D),this.build(!A),this},m.hasQuery=function(P,D,A){var N=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return f.hasQuery(N,P,D,A)},m.setSearch=m.setQuery,m.addSearch=m.addQuery,m.removeSearch=m.removeQuery,m.hasSearch=m.hasQuery,m.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},m.normalizeProtocol=function(P){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!P)),this},m.normalizeHostname=function(P){return this._parts.hostname&&(this.is("IDN")&&M?this._parts.hostname=M.toASCII(this._parts.hostname):this.is("IPv6")&&b&&(this._parts.hostname=b.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!P)),this},m.normalizePort=function(P){return typeof this._parts.protocol=="string"&&this._parts.port===f.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!P)),this},m.normalizePath=function(P){var D=this._parts.path;if(!D)return this;if(this._parts.urn)return this._parts.path=f.recodeUrnPath(this._parts.path),this.build(!P),this;if(this._parts.path==="/")return this;D=f.recodePath(D);var A,N="",I,G;for(D.charAt(0)!=="/"&&(A=!0,D="/"+D),(D.slice(-3)==="/.."||D.slice(-2)==="/.")&&(D+="/"),D=D.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),A&&(N=D.substring(1).match(/^(\.\.\/)+/)||"",N&&(N=N[0]));I=D.search(/\/\.\.(\/|$)/),I!==-1;){if(I===0){D=D.substring(3);continue}G=D.substring(0,I).lastIndexOf("/"),G===-1&&(G=I),D=D.substring(0,G)+D.substring(I+3)}return A&&this.is("relative")&&(D=N+D.substring(1)),this._parts.path=D,this.build(!P),this},m.normalizePathname=m.normalizePath,m.normalizeQuery=function(P){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(f.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!P)),this},m.normalizeFragment=function(P){return this._parts.fragment||(this._parts.fragment=null,this.build(!P)),this},m.normalizeSearch=m.normalizeQuery,m.normalizeHash=m.normalizeFragment,m.iso8859=function(){var P=f.encode,D=f.decode;f.encode=escape,f.decode=decodeURIComponent;try{this.normalize()}finally{f.encode=P,f.decode=D}return this},m.unicode=function(){var P=f.encode,D=f.decode;f.encode=n,f.decode=unescape;try{this.normalize()}finally{f.encode=P,f.decode=D}return this},m.readable=function(){var P=this.clone();P.username("").password("").normalize();var D="";if(P._parts.protocol&&(D+=P._parts.protocol+"://"),P._parts.hostname&&(P.is("punycode")&&M?(D+=M.toUnicode(P._parts.hostname),P._parts.port&&(D+=":"+P._parts.port)):D+=P.host()),P._parts.hostname&&P._parts.path&&P._parts.path.charAt(0)!=="/"&&(D+="/"),D+=P.path(!0),P._parts.query){for(var A="",N=0,I=P._parts.query.split("&"),G=I.length;N<G;N++){var W=(I[N]||"").split("=");A+="&"+f.decodeQuery(W[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),W[1]!==void 0&&(A+="="+f.decodeQuery(W[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}D+="?"+A.substring(1)}return D+=f.decodeQuery(P.hash(),!0),D},m.absoluteTo=function(P){var D=this.clone(),A=["protocol","username","password","hostname","port"],N,I,G;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(P instanceof f||(P=new f(P)),D._parts.protocol||(D._parts.protocol=P._parts.protocol,this._parts.hostname))return D;for(I=0;G=A[I];I++)D._parts[G]=P._parts[G];return D._parts.path?(D._parts.path.substring(-2)===".."&&(D._parts.path+="/"),D.path().charAt(0)!=="/"&&(N=P.directory(),N=N||(P.path().indexOf("/")===0?"/":""),D._parts.path=(N?N+"/":"")+D._parts.path,D.normalizePath())):(D._parts.path=P._parts.path,D._parts.query||(D._parts.query=P._parts.query)),D.build(),D},m.relativeTo=function(P){var D=this.clone().normalize(),A,N,I,G,W;if(D._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(P=new f(P).normalize(),A=D._parts,N=P._parts,G=D.path(),W=P.path(),G.charAt(0)!=="/")throw new Error("URI is already relative");if(W.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(A.protocol===N.protocol&&(A.protocol=null),A.username!==N.username||A.password!==N.password||A.protocol!==null||A.username!==null||A.password!==null)return D.build();if(A.hostname===N.hostname&&A.port===N.port)A.hostname=null,A.port=null;else return D.build();if(G===W)return A.path="",D.build();if(I=f.commonPath(G,W),!I)return D.build();var Z=N.path.substring(I.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return A.path=Z+A.path.substring(I.length)||"./",D.build()},m.equals=function(P){var D=this.clone(),A=new f(P),N={},I={},G={},W,Z,H;if(D.normalize(),A.normalize(),D.toString()===A.toString())return!0;if(W=D.query(),Z=A.query(),D.query(""),A.query(""),D.toString()!==A.toString()||W.length!==Z.length)return!1;N=f.parseQuery(W,this._parts.escapeQuerySpace),I=f.parseQuery(Z,this._parts.escapeQuerySpace);for(H in N)if(o.call(N,H)){if(r(N[H])){if(!x(N[H],I[H]))return!1}else if(N[H]!==I[H])return!1;G[H]=!0}for(H in I)if(o.call(I,H)&&!G[H])return!1;return!0},m.preventInvalidHostname=function(P){return this._parts.preventInvalidHostname=!!P,this},m.duplicateQueryParameters=function(P){return this._parts.duplicateQueryParameters=!!P,this},m.escapeQuerySpace=function(P){return this._parts.escapeQuerySpace=!!P,this},f})},957526:function(X,z,e){var E,F,O;/*!
* URI.js - Mutating URLs
* URI Template Support - http://tools.ietf.org/html/rfc6570
*
* Version: 1.19.11
*
* Author: Rodney Rehm
* Web: http://medialize.github.io/URI.js/
*
* Licensed under
*   MIT License http://www.opensource.org/licenses/mit-license
*
*/(function(M,b){"use strict";X.exports?X.exports=b(e(736812)):(F=[e(736812)],E=b,O=typeof E=="function"?E.apply(z,F):E,O!==void 0&&(X.exports=O))})(this,function(M,b){"use strict";var L=b&&b.URITemplate,T=Object.prototype.hasOwnProperty;function C(o){return C._cache[o]?C._cache[o]:this instanceof C?(this.expression=o,C._cache[o]=this,this):new C(o)}function f(o){this.data=o,this.cache={}}var v=C.prototype,m={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return C._cache={},C.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,C.VARIABLE_PATTERN=/^([^*:.](?:\.?[^*:.])*)((\*)|:(\d+))?$/,C.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_.]/,C.LITERAL_PATTERN=/[<>{}"`^| \\]/,C.expand=function(o,h,l){var r=m[o.operator],s=r.named?"Named":"Unnamed",c=o.variables,x=[],a,i,n;for(n=0;i=c[n];n++){if(a=h.get(i.name),a.type===0&&l&&l.strict)throw new Error('Missing expansion value for variable "'+i.name+'"');if(!a.val.length){a.type&&x.push("");continue}if(a.type>1&&i.maxlength)throw new Error('Invalid expression: Prefix modifier not applicable to variable "'+i.name+'"');x.push(C["expand"+s](a,r,i.explode,i.explode&&r.separator||",",i.maxlength,i.name))}return x.length?r.prefix+x.join(r.separator):""},C.expandNamed=function(o,h,l,r,s,c){var x="",a=h.encode,i=h.empty_name_separator,n=!o[a].length,u=o.type===2?"":M[a](c),g,d,y;for(d=0,y=o.val.length;d<y;d++)s?(g=M[a](o.val[d][1].substring(0,s)),o.type===2&&(u=M[a](o.val[d][0].substring(0,s)))):n?(g=M[a](o.val[d][1]),o.type===2?(u=M[a](o.val[d][0]),o[a].push([u,g])):o[a].push([void 0,g])):(g=o[a][d][1],o.type===2&&(u=o[a][d][0])),x&&(x+=r),l?x+=u+(i||g?"=":"")+g:(d||(x+=M[a](c)+(i||g?"=":"")),o.type===2&&(x+=u+","),x+=g);return x},C.expandUnnamed=function(o,h,l,r,s){var c="",x=h.encode,a=h.empty_name_separator,i=!o[x].length,n,u,g,d;for(g=0,d=o.val.length;g<d;g++)s?u=M[x](o.val[g][1].substring(0,s)):i?(u=M[x](o.val[g][1]),o[x].push([o.type===2?M[x](o.val[g][0]):void 0,u])):u=o[x][g][1],c&&(c+=r),o.type===2&&(s?n=M[x](o.val[g][0].substring(0,s)):n=o[x][g][0],c+=n,l?c+=a||u?"=":"":c+=","),c+=u;return c},C.noConflict=function(){return b.URITemplate===C&&(b.URITemplate=L),C},v.expand=function(o,h){var l="";(!this.parts||!this.parts.length)&&this.parse(),o instanceof f||(o=new f(o));for(var r=0,s=this.parts.length;r<s;r++)l+=typeof this.parts[r]=="string"?this.parts[r]:C.expand(this.parts[r],o,h);return l},v.parse=function(){var o=this.expression,h=C.EXPRESSION_PATTERN,l=C.VARIABLE_PATTERN,r=C.VARIABLE_NAME_PATTERN,s=C.LITERAL_PATTERN,c=[],x=0,a,i,n,u=function(y){if(y.match(s))throw new Error('Invalid Literal "'+y+'"');return y};for(h.lastIndex=0;;){if(i=h.exec(o),i===null){c.push(u(o.substring(x)));break}else c.push(u(o.substring(x,i.index))),x=i.index+i[0].length;if(m[i[1]]){if(!i[3])throw new Error('Unclosed Expression "'+i[0]+'"')}else throw new Error('Unknown Operator "'+i[1]+'" in "'+i[0]+'"');a=i[2].split(",");for(var g=0,d=a.length;g<d;g++){if(n=a[g].match(l),n===null)throw new Error('Invalid Variable "'+a[g]+'" in "'+i[0]+'"');if(n[1].match(r))throw new Error('Invalid Variable Name "'+n[1]+'" in "'+i[0]+'"');a[g]={name:n[1],explode:!!n[3],maxlength:n[4]&&parseInt(n[4],10)}}if(!a.length)throw new Error('Expression Missing Variable(s) "'+i[0]+'"');c.push({expression:i[0],operator:i[1],variables:a})}return c.length||c.push(u(o)),this.parts=c,this},f.prototype.get=function(o){var h=this.data,l={type:0,val:[],encode:[],encodeReserved:[]},r,s,c;if(this.cache[o]!==void 0)return this.cache[o];if(this.cache[o]=l,String(Object.prototype.toString.call(h))==="[object Function]"?c=h(o):String(Object.prototype.toString.call(h[o]))==="[object Function]"?c=h[o](o):c=h[o],c==null)return l;if(String(Object.prototype.toString.call(c))==="[object Array]"){for(r=0,s=c.length;r<s;r++)c[r]!==void 0&&c[r]!==null&&l.val.push([void 0,String(c[r])]);l.val.length&&(l.type=3)}else if(String(Object.prototype.toString.call(c))==="[object Object]"){for(r in c)T.call(c,r)&&c[r]!==void 0&&c[r]!==null&&l.val.push([r,String(c[r])]);l.val.length&&(l.type=2)}else l.type=1,l.val.push([void 0,String(c)]);return l},M.expand=function(o,h){var l=new C(o),r=l.expand(h);return new M(r)},C})},904344:function(X,z,e){X=e.nmd(X);var E;/*! https://mths.be/punycode v1.4.0 by @mathias */(function(F){var O=z&&!z.nodeType&&z,M=X&&!X.nodeType&&X,b=typeof e.g=="object"&&e.g;(b.global===b||b.window===b||b.self===b)&&(F=b);var L,T=2147483647,C=36,f=1,v=26,m=38,o=700,h=72,l=128,r="-",s=/^xn--/,c=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,a={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},i=C-f,n=Math.floor,u=String.fromCharCode,g;function d(I){throw new RangeError(a[I])}function y(I,G){for(var W=I.length,Z=[];W--;)Z[W]=G(I[W]);return Z}function p(I,G){var W=I.split("@"),Z="";W.length>1&&(Z=W[0]+"@",I=W[1]),I=I.replace(x,".");var H=I.split("."),U=y(H,G).join(".");return Z+U}function w(I){for(var G=[],W=0,Z=I.length,H,U;W<Z;)H=I.charCodeAt(W++),H>=55296&&H<=56319&&W<Z?(U=I.charCodeAt(W++),(U&64512)==56320?G.push(((H&1023)<<10)+(U&1023)+65536):(G.push(H),W--)):G.push(H);return G}function S(I){return y(I,function(G){var W="";return G>65535&&(G-=65536,W+=u(G>>>10&1023|55296),G=56320|G&1023),W+=u(G),W}).join("")}function R(I){return I-48<10?I-22:I-65<26?I-65:I-97<26?I-97:C}function B(I,G){return I+22+75*(I<26)-((G!=0)<<5)}function k(I,G,W){var Z=0;for(I=W?n(I/o):I>>1,I+=n(I/G);I>i*v>>1;Z+=C)I=n(I/i);return n(Z+(i+1)*I/(I+m))}function P(I){var G=[],W=I.length,Z,H=0,U=l,V=h,Y,$,K,J,Q,et,nt,st,ut;for(Y=I.lastIndexOf(r),Y<0&&(Y=0),$=0;$<Y;++$)I.charCodeAt($)>=128&&d("not-basic"),G.push(I.charCodeAt($));for(K=Y>0?Y+1:0;K<W;){for(J=H,Q=1,et=C;K>=W&&d("invalid-input"),nt=R(I.charCodeAt(K++)),(nt>=C||nt>n((T-H)/Q))&&d("overflow"),H+=nt*Q,st=et<=V?f:et>=V+v?v:et-V,!(nt<st);et+=C)ut=C-st,Q>n(T/ut)&&d("overflow"),Q*=ut;Z=G.length+1,V=k(H-J,Z,J==0),n(H/Z)>T-U&&d("overflow"),U+=n(H/Z),H%=Z,G.splice(H++,0,U)}return S(G)}function D(I){var G,W,Z,H,U,V,Y,$,K,J,Q,et=[],nt,st,ut,rt;for(I=w(I),nt=I.length,G=l,W=0,U=h,V=0;V<nt;++V)Q=I[V],Q<128&&et.push(u(Q));for(Z=H=et.length,H&&et.push(r);Z<nt;){for(Y=T,V=0;V<nt;++V)Q=I[V],Q>=G&&Q<Y&&(Y=Q);for(st=Z+1,Y-G>n((T-W)/st)&&d("overflow"),W+=(Y-G)*st,G=Y,V=0;V<nt;++V)if(Q=I[V],Q<G&&++W>T&&d("overflow"),Q==G){for($=W,K=C;J=K<=U?f:K>=U+v?v:K-U,!($<J);K+=C)rt=$-J,ut=C-J,et.push(u(B(J+rt%ut,0))),$=n(rt/ut);et.push(u(B($,0))),U=k(W,st,Z==H),W=0,++Z}++W,++G}return et.join("")}function A(I){return p(I,function(G){return s.test(G)?P(G.slice(4).toLowerCase()):G})}function N(I){return p(I,function(G){return c.test(G)?"xn--"+D(G):G})}L={version:"1.3.2",ucs2:{decode:w,encode:S},decode:P,encode:D,toASCII:N,toUnicode:A},E=function(){return L}.call(z,e,z,X),E!==void 0&&(X.exports=E)})(this)},54498:function(X,z,e){var E=e(788242),F=e(291212),O=e(451218),M=e(849950),b=e(131879),L=function(C){O.call(this,C),F.call(this,C),M.call(this,C),this.id=C.id||E()};L.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(C,f){switch(this.draggable){case"horizontal":f=0;break;case"vertical":C=0;break}var v=this.transform;v||(v=this.transform=[1,0,0,1,0,0]),v[4]+=C,v[5]+=f,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(C,f){},attrKV:function(C,f){if(C==="position"||C==="scale"||C==="origin"){if(f){var v=this[C];v||(v=this[C]=[]),v[0]=f[0],v[1]=f[1]}}else this[C]=f},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(C,f){if(typeof C=="string")this.attrKV(C,f);else if(b.isObject(C))for(var v in C)C.hasOwnProperty(v)&&this.attrKV(v,C[v]);return this.dirty(!1),this},setClipPath:function(C){var f=this.__zr;f&&C.addSelfToZr(f),this.clipPath&&this.clipPath!==C&&this.removeClipPath(),this.clipPath=C,C.__zr=f,C.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var C=this.clipPath;C&&(C.__zr&&C.removeSelfFromZr(C.__zr),C.__zr=null,C.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(C){this.__zr=C;var f=this.animators;if(f)for(var v=0;v<f.length;v++)C.animation.addAnimator(f[v]);this.clipPath&&this.clipPath.addSelfToZr(C)},removeSelfFromZr:function(C){this.__zr=null;var f=this.animators;if(f)for(var v=0;v<f.length;v++)C.animation.removeAnimator(f[v]);this.clipPath&&this.clipPath.removeSelfFromZr(C)}},b.mixin(L,M),b.mixin(L,O),b.mixin(L,F);var T=L;X.exports=T},806113:function(X,z,e){var E=e(131879),F=e(912072),O=e(886281),M=e(291212),b=e(519756),L=e(994548),T="silent";function C(s,c,x){return{type:s,event:x,target:c.target,topTarget:c.topTarget,cancelBubble:!1,offsetX:x.zrX,offsetY:x.zrY,gestureEvent:x.gestureEvent,pinchX:x.pinchX,pinchY:x.pinchY,pinchScale:x.pinchScale,wheelDelta:x.zrDelta,zrByTouch:x.zrByTouch,which:x.which,stop:f}}function f(){b.stop(this.event)}function v(){}v.prototype.dispose=function(){};var m=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],o=function(s,c,x,a){M.call(this),this.storage=s,this.painter=c,this.painterRoot=a,x=x||new v,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,O.call(this),this.setHandlerProxy(x)};o.prototype={constructor:o,setHandlerProxy:function(s){this.proxy&&this.proxy.dispose(),s&&(E.each(m,function(c){s.on&&s.on(c,this[c],this)},this),s.handler=this),this.proxy=s},mousemove:function(s){var c=s.zrX,x=s.zrY,a=l(this,c,x),i=this._hovered,n=i.target;n&&!n.__zr&&(i=this.findHover(i.x,i.y),n=i.target);var u=this._hovered=a?{x:c,y:x}:this.findHover(c,x),g=u.target,d=this.proxy;d.setCursor&&d.setCursor(g?g.cursor:"default"),n&&g!==n&&this.dispatchToElement(i,"mouseout",s),this.dispatchToElement(u,"mousemove",s),g&&g!==n&&this.dispatchToElement(u,"mouseover",s)},mouseout:function(s){var c=s.zrEventControl,x=s.zrIsToLocalDOM;c!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",s),c!=="no_globalout"&&!x&&this.trigger("globalout",{type:"globalout",event:s})},resize:function(s){this._hovered={}},dispatch:function(s,c){var x=this[s];x&&x.call(this,c)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(s){var c=this.proxy;c.setCursor&&c.setCursor(s)},dispatchToElement:function(s,c,x){s=s||{};var a=s.target;if(!(a&&a.silent)){for(var i="on"+c,n=C(c,s,x);a&&(a[i]&&(n.cancelBubble=a[i].call(a,n)),a.trigger(c,n),a=a.parent,!n.cancelBubble););n.cancelBubble||(this.trigger(c,n),this.painter&&this.painter.eachOtherLayer(function(u){typeof u[i]=="function"&&u[i].call(u,n),u.trigger&&u.trigger(c,n)}))}},findHover:function(s,c,x){for(var a=this.storage.getDisplayList(),i={x:s,y:c},n=a.length-1;n>=0;n--){var u;if(a[n]!==x&&!a[n].ignore&&(u=h(a[n],s,c))&&(!i.topTarget&&(i.topTarget=a[n]),u!==T)){i.target=a[n];break}}return i},processGesture:function(s,c){this._gestureMgr||(this._gestureMgr=new L);var x=this._gestureMgr;c==="start"&&x.clear();var a=x.recognize(s,this.findHover(s.zrX,s.zrY,null).target,this.proxy.dom);if(c==="end"&&x.clear(),a){var i=a.type;s.gestureEvent=i,this.dispatchToElement({target:a.target},i,a.event)}}},E.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(s){o.prototype[s]=function(c){var x=c.zrX,a=c.zrY,i=l(this,x,a),n,u;if((s!=="mouseup"||!i)&&(n=this.findHover(x,a),u=n.target),s==="mousedown")this._downEl=u,this._downPoint=[c.zrX,c.zrY],this._upEl=u;else if(s==="mouseup")this._upEl=u;else if(s==="click"){if(this._downEl!==this._upEl||!this._downPoint||F.dist(this._downPoint,[c.zrX,c.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,s,c)}});function h(s,c,x){if(s[s.rectHover?"rectContain":"contain"](c,x)){for(var a=s,i;a;){if(a.clipPath&&!a.clipPath.contain(c,x))return!1;a.silent&&(i=!0),a=a.parent}return i?T:!0}return!1}function l(s,c,x){var a=s.painter;return c<0||c>a.getWidth()||x<0||x>a.getHeight()}E.mixin(o,M),E.mixin(o,O);var r=o;X.exports=r},930811:function(X,z,e){var E=e(131879),F=e(656570),O=F.devicePixelRatio,M=e(792199),b=e(908805);function L(){return!1}function T(v,m,o){var h=E.createCanvas(),l=m.getWidth(),r=m.getHeight(),s=h.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=l+"px",s.height=r+"px",h.setAttribute("data-zr-dom-id",v)),h.width=l*o,h.height=r*o,h}var C=function(v,m,o){var h;o=o||O,typeof v=="string"?h=T(v,m,o):E.isObject(v)&&(h=v,v=h.id),this.id=v,this.dom=h;var l=h.style;l&&(h.onselectstart=L,l["-webkit-user-select"]="none",l["user-select"]="none",l["-webkit-touch-callout"]="none",l["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",l.padding=0,l.margin=0,l["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=m,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=o};C.prototype={constructor:C,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var v=this.dpr;this.domBack=T("back-"+this.id,this.painter,v),this.ctxBack=this.domBack.getContext("2d"),v!==1&&this.ctxBack.scale(v,v)},resize:function(v,m){var o=this.dpr,h=this.dom,l=h.style,r=this.domBack;l&&(l.width=v+"px",l.height=m+"px"),h.width=v*o,h.height=m*o,r&&(r.width=v*o,r.height=m*o,o!==1&&this.ctxBack.scale(o,o))},clear:function(v,s){var o=this.dom,h=this.ctx,l=o.width,r=o.height,s=s||this.clearColor,c=this.motionBlur&&!v,x=this.lastFrameAlpha,a=this.dpr;if(c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,l/a,r/a)),h.clearRect(0,0,l,r),s&&s!=="transparent"){var i;s.colorStops?(i=s.__canvasGradient||M.getGradient(h,s,{x:0,y:0,width:l,height:r}),s.__canvasGradient=i):s.image&&(i=b.prototype.getCanvasPattern.call(s,h)),h.save(),h.fillStyle=i||s,h.fillRect(0,0,l,r),h.restore()}if(c){var n=this.domBack;h.save(),h.globalAlpha=x,h.drawImage(n,0,0,l,r),h.restore()}}};var f=C;X.exports=f},137200:function(X,z,e){var E=e(149500),F=e(656570),O=F.devicePixelRatio,M=e(131879),b=e(34081),L=e(795946),T=e(493318),C=e(930811),f=e(529208),v=e(311096),m=e(358020),o=1e5,h=314159,l=.01,r=.001;function s(p){return parseInt(p,10)}function c(p){return p?p.__builtin__?!0:!(typeof p.resize!="function"||typeof p.refresh!="function"):!1}var x=new L(0,0,0,0),a=new L(0,0,0,0);function i(p,w,S){return x.copy(p.getBoundingRect()),p.transform&&x.applyTransform(p.transform),a.width=w,a.height=S,!x.intersect(a)}function n(p,w){if(p===w)return!1;if(!p||!w||p.length!==w.length)return!0;for(var S=0;S<p.length;S++)if(p[S]!==w[S])return!0;return!1}function u(p,w){for(var S=0;S<p.length;S++){var R=p[S];R.setTransform(w),w.beginPath(),R.buildPath(w,R.shape),w.clip(),R.restoreTransform(w)}}function g(p,w){var S=document.createElement("div");return S.style.cssText=["position:relative","width:"+p+"px","height:"+w+"px","padding:0","margin:0","border-width:0"].join(";")+";",S}var d=function(p,w,S){this.type="canvas";var R=!p.nodeName||p.nodeName.toUpperCase()==="CANVAS";this._opts=S=M.extend({},S||{}),this.dpr=S.devicePixelRatio||O,this._singleCanvas=R,this.root=p;var B=p.style;B&&(B["-webkit-tap-highlight-color"]="transparent",B["-webkit-user-select"]=B["user-select"]=B["-webkit-touch-callout"]="none",p.innerHTML=""),this.storage=w;var k=this._zlevelList=[],P=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,R){var A=p.width,N=p.height;S.width!=null&&(A=S.width),S.height!=null&&(N=S.height),this.dpr=S.devicePixelRatio||1,p.width=A*this.dpr,p.height=N*this.dpr,this._width=A,this._height=N;var I=new C(p,this,this.dpr);I.__builtin__=!0,I.initContext(),P[h]=I,I.zlevel=h,k.push(h),this._domRoot=p}else{this._width=this._getSize(0),this._height=this._getSize(1);var D=this._domRoot=g(this._width,this._height);p.appendChild(D)}this._hoverlayer=null,this._hoverElements=[]};d.prototype={constructor:d,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var p=this.getViewportRoot();if(p)return{offsetLeft:p.offsetLeft||0,offsetTop:p.offsetTop||0}},refresh:function(p){var w=this.storage.getDisplayList(!0),S=this._zlevelList;this._redrawId=Math.random(),this._paintList(w,p,this._redrawId);for(var R=0;R<S.length;R++){var B=S[R],k=this._layers[B];if(!k.__builtin__&&k.refresh){var P=R===0?this._backgroundColor:null;k.refresh(P)}}return this.refreshHover(),this},addHover:function(p,w){if(!p.__hoverMir){var S=new p.constructor({style:p.style,shape:p.shape,z:p.z,z2:p.z2,silent:p.silent});return S.__from=p,p.__hoverMir=S,w&&S.setStyle(w),this._hoverElements.push(S),S}},removeHover:function(p){var w=p.__hoverMir,S=this._hoverElements,R=M.indexOf(S,w);R>=0&&S.splice(R,1),p.__hoverMir=null},clearHover:function(p){for(var w=this._hoverElements,S=0;S<w.length;S++){var R=w[S].__from;R&&(R.__hoverMir=null)}w.length=0},refreshHover:function(){var p=this._hoverElements,w=p.length,S=this._hoverlayer;if(S&&S.clear(),!!w){T(p,this.storage.displayableSortFunc),S||(S=this._hoverlayer=this.getLayer(o));var R={};S.ctx.save();for(var B=0;B<w;){var k=p[B],P=k.__from;if(!(P&&P.__zr)){p.splice(B,1),P.__hoverMir=null,w--;continue}B++,P.invisible||(k.transform=P.transform,k.invTransform=P.invTransform,k.__clipPaths=P.__clipPaths,this._doPaintEl(k,S,!0,R))}S.ctx.restore()}},getHoverLayer:function(){return this.getLayer(o)},_paintList:function(p,w,S){if(this._redrawId===S){w=w||!1,this._updateLayerStatus(p);var R=this._doPaintList(p,w);if(this._needsManuallyCompositing&&this._compositeManually(),!R){var B=this;f(function(){B._paintList(p,w,S)})}}},_compositeManually:function(){var p=this.getLayer(h).ctx,w=this._domRoot.width,S=this._domRoot.height;p.clearRect(0,0,w,S),this.eachBuiltinLayer(function(R){R.virtual&&p.drawImage(R.dom,0,0,w,S)})},_doPaintList:function(p,w){for(var S=[],R=0;R<this._zlevelList.length;R++){var B=this._zlevelList[R],k=this._layers[B];k.__builtin__&&k!==this._hoverlayer&&(k.__dirty||w)&&S.push(k)}for(var P=!0,D=0;D<S.length;D++){var k=S[D],A=k.ctx,N={};A.save();var I=w?k.__startIndex:k.__drawIndex,G=!w&&k.incremental&&Date.now,W=G&&Date.now(),Z=k.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(k.__startIndex===k.__endIndex)k.clear(!1,Z);else if(I===k.__startIndex){var H=p[I];(!H.incremental||!H.notClear||w)&&k.clear(!1,Z)}I===-1&&(E.error("For some unknown reason. drawIndex is -1"),I=k.__startIndex);for(var U=I;U<k.__endIndex;U++){var V=p[U];if(this._doPaintEl(V,k,w,N),V.__dirty=V.__dirtyText=!1,G){var Y=Date.now()-W;if(Y>15)break}}k.__drawIndex=U,k.__drawIndex<k.__endIndex&&(P=!1),N.prevElClipPaths&&A.restore(),A.restore()}return m.wxa&&M.each(this._layers,function($){$&&$.ctx&&$.ctx.draw&&$.ctx.draw()}),P},_doPaintEl:function(p,w,S,R){var B=w.ctx,k=p.transform;if((w.__dirty||S)&&!p.invisible&&p.style.opacity!==0&&!(k&&!k[0]&&!k[3])&&!(p.culling&&i(p,this._width,this._height))){var P=p.__clipPaths,D=R.prevElClipPaths;(!D||n(P,D))&&(D&&(B.restore(),R.prevElClipPaths=null,R.prevEl=null),P&&(B.save(),u(P,B),R.prevElClipPaths=P)),p.beforeBrush&&p.beforeBrush(B),p.brush(B,R.prevEl||null),R.prevEl=p,p.afterBrush&&p.afterBrush(B)}},getLayer:function(p,w){this._singleCanvas&&!this._needsManuallyCompositing&&(p=h);var S=this._layers[p];return S||(S=new C("zr_"+p,this,this.dpr),S.zlevel=p,S.__builtin__=!0,this._layerConfig[p]?M.merge(S,this._layerConfig[p],!0):this._layerConfig[p-l]&&M.merge(S,this._layerConfig[p-l],!0),w&&(S.virtual=w),this.insertLayer(p,S),S.initContext()),S},insertLayer:function(p,w){var S=this._layers,R=this._zlevelList,B=R.length,k=null,P=-1,D=this._domRoot;if(S[p]){b("ZLevel "+p+" has been used already");return}if(!c(w)){b("Layer of zlevel "+p+" is not valid");return}if(B>0&&p>R[0]){for(P=0;P<B-1&&!(R[P]<p&&R[P+1]>p);P++);k=S[R[P]]}if(R.splice(P+1,0,p),S[p]=w,!w.virtual)if(k){var A=k.dom;A.nextSibling?D.insertBefore(w.dom,A.nextSibling):D.appendChild(w.dom)}else D.firstChild?D.insertBefore(w.dom,D.firstChild):D.appendChild(w.dom)},eachLayer:function(p,w){var S=this._zlevelList,R,B;for(B=0;B<S.length;B++)R=S[B],p.call(w,this._layers[R],R)},eachBuiltinLayer:function(p,w){var S=this._zlevelList,R,B,k;for(k=0;k<S.length;k++)B=S[k],R=this._layers[B],R.__builtin__&&p.call(w,R,B)},eachOtherLayer:function(p,w){var S=this._zlevelList,R,B,k;for(k=0;k<S.length;k++)B=S[k],R=this._layers[B],R.__builtin__||p.call(w,R,B)},getLayers:function(){return this._layers},_updateLayerStatus:function(p){this.eachBuiltinLayer(function(N,I){N.__dirty=N.__used=!1});function w(N){B&&(B.__endIndex!==N&&(B.__dirty=!0),B.__endIndex=N)}if(this._singleCanvas)for(var S=1;S<p.length;S++){var R=p[S];if(R.zlevel!==p[S-1].zlevel||R.incremental){this._needsManuallyCompositing=!0;break}}for(var B=null,k=0,P,S=0;S<p.length;S++){var R=p[S],D=R.zlevel,A;P!==D&&(P=D,k=0),R.incremental?(A=this.getLayer(D+r,this._needsManuallyCompositing),A.incremental=!0,k=1):A=this.getLayer(D+(k>0?l:0),this._needsManuallyCompositing),A.__builtin__||b("ZLevel "+D+" has been used by unkown layer "+A.id),A!==B&&(A.__used=!0,A.__startIndex!==S&&(A.__dirty=!0),A.__startIndex=S,A.incremental?A.__drawIndex=-1:A.__drawIndex=S,w(S),B=A),R.__dirty&&(A.__dirty=!0,A.incremental&&A.__drawIndex<0&&(A.__drawIndex=S))}w(S),this.eachBuiltinLayer(function(N,I){!N.__used&&N.getElementCount()>0&&(N.__dirty=!0,N.__startIndex=N.__endIndex=N.__drawIndex=0),N.__dirty&&N.__drawIndex<0&&(N.__drawIndex=N.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(p){p.clear()},setBackgroundColor:function(p){this._backgroundColor=p},configLayer:function(p,w){if(w){var S=this._layerConfig;S[p]?M.merge(S[p],w,!0):S[p]=w;for(var R=0;R<this._zlevelList.length;R++){var B=this._zlevelList[R];if(B===p||B===p+l){var k=this._layers[B];M.merge(k,S[p],!0)}}}},delLayer:function(p){var w=this._layers,S=this._zlevelList,R=w[p];R&&(R.dom.parentNode.removeChild(R.dom),delete w[p],S.splice(M.indexOf(S,p),1))},resize:function(p,w){if(this._domRoot.style){var S=this._domRoot;S.style.display="none";var R=this._opts;if(p!=null&&(R.width=p),w!=null&&(R.height=w),p=this._getSize(0),w=this._getSize(1),S.style.display="",this._width!==p||w!==this._height){S.style.width=p+"px",S.style.height=w+"px";for(var B in this._layers)this._layers.hasOwnProperty(B)&&this._layers[B].resize(p,w);M.each(this._progressiveLayers,function(k){k.resize(p,w)}),this.refresh(!0)}this._width=p,this._height=w}else{if(p==null||w==null)return;this._width=p,this._height=w,this.getLayer(h).resize(p,w)}return this},clearLayer:function(p){var w=this._layers[p];w&&w.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(p){if(p=p||{},this._singleCanvas&&!this._compositeManually)return this._layers[h].dom;var w=new C("image",this,p.pixelRatio||this.dpr);if(w.initContext(),w.clear(!1,p.backgroundColor||this._backgroundColor),p.pixelRatio<=this.dpr){this.refresh();var S=w.dom.width,R=w.dom.height,B=w.ctx;this.eachLayer(function(N){N.__builtin__?B.drawImage(N.dom,0,0,S,R):N.renderToCanvas&&(w.ctx.save(),N.renderToCanvas(w.ctx),w.ctx.restore())})}else for(var k={},P=this.storage.getDisplayList(!0),D=0;D<P.length;D++){var A=P[D];this._doPaintEl(A,w,!0,k)}return w.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(p){var w=this._opts,S=["width","height"][p],R=["clientWidth","clientHeight"][p],B=["paddingLeft","paddingTop"][p],k=["paddingRight","paddingBottom"][p];if(w[S]!=null&&w[S]!=="auto")return parseFloat(w[S]);var P=this.root,D=document.defaultView.getComputedStyle(P);return(P[R]||s(D[S])||s(P.style[S]))-(s(D[B])||0)-(s(D[k])||0)|0},pathToImage:function(p,w){w=w||this.dpr;var S=document.createElement("canvas"),R=S.getContext("2d"),B=p.getBoundingRect(),k=p.style,P=k.shadowBlur*w,D=k.shadowOffsetX*w,A=k.shadowOffsetY*w,N=k.hasStroke()?k.lineWidth:0,I=Math.max(N/2,-D+P),G=Math.max(N/2,D+P),W=Math.max(N/2,-A+P),Z=Math.max(N/2,A+P),H=B.width+I+G,U=B.height+W+Z;S.width=H*w,S.height=U*w,R.scale(w,w),R.clearRect(0,0,H,U),R.dpr=w;var V={position:p.position,rotation:p.rotation,scale:p.scale};p.position=[I-B.x,W-B.y],p.rotation=0,p.scale=[1,1],p.updateTransform(),p&&p.brush(R);var Y=v,$=new Y({style:{x:0,y:0,image:S}});return V.position!=null&&($.position=p.position=V.position),V.rotation!=null&&($.rotation=p.rotation=V.rotation),V.scale!=null&&($.scale=p.scale=V.scale),$}};var y=d;X.exports=y},402970:function(X,z,e){var E=e(131879),F=e(358020),O=e(827146),M=e(493318);function b(C,f){return C.zlevel===f.zlevel?C.z===f.z?C.z2-f.z2:C.z-f.z:C.zlevel-f.zlevel}var L=function(){this._roots=[],this._displayList=[],this._displayListLen=0};L.prototype={constructor:L,traverse:function(C,f){for(var v=0;v<this._roots.length;v++)this._roots[v].traverse(C,f)},getDisplayList:function(C,f){return f=f||!1,C&&this.updateDisplayList(f),this._displayList},updateDisplayList:function(C){this._displayListLen=0;for(var f=this._roots,v=this._displayList,m=0,o=f.length;m<o;m++)this._updateAndAddDisplayable(f[m],null,C);v.length=this._displayListLen,F.canvasSupported&&M(v,b)},_updateAndAddDisplayable:function(C,f,v){if(!(C.ignore&&!v)){C.beforeUpdate(),C.__dirty&&C.update(),C.afterUpdate();var m=C.clipPath;if(m){f?f=f.slice():f=[];for(var o=m,h=C;o;)o.parent=h,o.updateTransform(),f.push(o),h=o,o=o.clipPath}if(C.isGroup){for(var l=C._children,r=0;r<l.length;r++){var s=l[r];C.__dirty&&(s.__dirty=!0),this._updateAndAddDisplayable(s,f,v)}C.__dirty=!1}else C.__clipPaths=f,this._displayList[this._displayListLen++]=C}},addRoot:function(C){C.__storage!==this&&(C instanceof O&&C.addChildrenToStorage(this),this.addToStorage(C),this._roots.push(C))},delRoot:function(C){if(C==null){for(var f=0;f<this._roots.length;f++){var v=this._roots[f];v instanceof O&&v.delChildrenFromStorage(this)}this._roots=[],this._displayList=[],this._displayListLen=0;return}if(C instanceof Array){for(var f=0,m=C.length;f<m;f++)this.delRoot(C[f]);return}var o=E.indexOf(this._roots,C);o>=0&&(this.delFromStorage(C),this._roots.splice(o,1),C instanceof O&&C.delChildrenFromStorage(this))},addToStorage:function(C){return C&&(C.__storage=this,C.dirty(!1)),this},delFromStorage:function(C){return C&&(C.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:b};var T=L;X.exports=T},233491:function(X,z,e){var E=e(131879),F=e(519756),O=F.Dispatcher,M=e(529208),b=e(588503),L=function(C){C=C||{},this.stage=C.stage||{},this.onframe=C.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,O.call(this)};L.prototype={constructor:L,addClip:function(C){this._clips.push(C)},addAnimator:function(C){C.animation=this;for(var f=C.getClips(),v=0;v<f.length;v++)this.addClip(f[v])},removeClip:function(C){var f=E.indexOf(this._clips,C);f>=0&&this._clips.splice(f,1)},removeAnimator:function(C){for(var f=C.getClips(),v=0;v<f.length;v++)this.removeClip(f[v]);C.animation=null},_update:function(){for(var C=new Date().getTime()-this._pausedTime,f=C-this._time,v=this._clips,m=v.length,o=[],h=[],l=0;l<m;l++){var r=v[l],s=r.step(C,f);s&&(o.push(s),h.push(r))}for(var l=0;l<m;)v[l]._needsRemove?(v[l]=v[m-1],v.pop(),m--):l++;m=o.length;for(var l=0;l<m;l++)h[l].fire(o[l]);this._time=C,this.onframe(f),this.trigger("frame",f),this.stage.update&&this.stage.update()},_startLoop:function(){var C=this;this._running=!0;function f(){C._running&&(M(f),!C._paused&&C._update())}M(f)},start:function(){this._time=new Date().getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=new Date().getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=new Date().getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(C,f){f=f||{};var v=new b(C,f.loop,f.getter,f.setter);return this.addAnimator(v),v}},E.mixin(L,O);var T=L;X.exports=T},588503:function(X,z,e){var E=e(63612),F=e(994819),O=e(131879),M=O.isArrayLike,b=Array.prototype.slice;function L(n,u){return n[u]}function T(n,u,g){n[u]=g}function C(n,u,g){return(u-n)*g+n}function f(n,u,g){return g>.5?u:n}function v(n,u,g,d,y){var p=n.length;if(y===1)for(var w=0;w<p;w++)d[w]=C(n[w],u[w],g);else for(var S=p&&n[0].length,w=0;w<p;w++)for(var R=0;R<S;R++)d[w][R]=C(n[w][R],u[w][R],g)}function m(n,u,g){var d=n.length,y=u.length;if(d!==y){var p=d>y;if(p)n.length=y;else for(var w=d;w<y;w++)n.push(g===1?u[w]:b.call(u[w]))}for(var S=n[0]&&n[0].length,w=0;w<n.length;w++)if(g===1)isNaN(n[w])&&(n[w]=u[w]);else for(var R=0;R<S;R++)isNaN(n[w][R])&&(n[w][R]=u[w][R])}function o(n,u,g){if(n===u)return!0;var d=n.length;if(d!==u.length)return!1;if(g===1){for(var y=0;y<d;y++)if(n[y]!==u[y])return!1}else for(var p=n[0].length,y=0;y<d;y++)for(var w=0;w<p;w++)if(n[y][w]!==u[y][w])return!1;return!0}function h(n,u,g,d,y,p,w,S,R){var B=n.length;if(R===1)for(var k=0;k<B;k++)S[k]=l(n[k],u[k],g[k],d[k],y,p,w);else for(var P=n[0].length,k=0;k<B;k++)for(var D=0;D<P;D++)S[k][D]=l(n[k][D],u[k][D],g[k][D],d[k][D],y,p,w)}function l(n,u,g,d,y,p,w){var S=(g-n)*.5,R=(d-u)*.5;return(2*(u-g)+S+R)*w+(-3*(u-g)-2*S-R)*p+S*y+u}function r(n){if(M(n)){var u=n.length;if(M(n[0])){for(var g=[],d=0;d<u;d++)g.push(b.call(n[d]));return g}return b.call(n)}return n}function s(n){return n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.floor(n[2]),"rgba("+n.join(",")+")"}function c(n){var u=n[n.length-1].value;return M(u&&u[0])?2:1}function x(n,u,g,d,y,p){var w=n._getter,S=n._setter,R=u==="spline",B=d.length;if(B){var k=d[0].value,P=M(k),D=!1,A=!1,N=P?c(d):0,I;d.sort(function(Mt,Ft){return Mt.time-Ft.time}),I=d[B-1].time;for(var G=[],W=[],Z=d[0].value,H=!0,U=0;U<B;U++){G.push(d[U].time/I);var V=d[U].value;if(P&&o(V,Z,N)||!P&&V===Z||(H=!1),Z=V,typeof V=="string"){var Y=F.parse(V);Y?(V=Y,D=!0):A=!0}W.push(V)}if(!(!p&&H)){for(var $=W[B-1],U=0;U<B-1;U++)P?m(W[U],$,N):isNaN(W[U])&&!isNaN($)&&!A&&!D&&(W[U]=$);P&&m(w(n._target,y),$,N);var K=0,J=0,Q,et,nt,st,ut,rt;if(D)var ht=[0,0,0,0];var Pt=function(Mt,Ft){var Dt;if(Ft<0)Dt=0;else if(Ft<J){for(Q=Math.min(K+1,B-1),Dt=Q;Dt>=0&&!(G[Dt]<=Ft);Dt--);Dt=Math.min(Dt,B-2)}else{for(Dt=K;Dt<B&&!(G[Dt]>Ft);Dt++);Dt=Math.min(Dt-1,B-2)}K=Dt,J=Ft;var Rt=G[Dt+1]-G[Dt];if(Rt!==0)if(et=(Ft-G[Dt])/Rt,R)if(st=W[Dt],nt=W[Dt===0?Dt:Dt-1],ut=W[Dt>B-2?B-1:Dt+1],rt=W[Dt>B-3?B-1:Dt+2],P)h(nt,st,ut,rt,et,et*et,et*et*et,w(Mt,y),N);else{var Tt;if(D)Tt=h(nt,st,ut,rt,et,et*et,et*et*et,ht,1),Tt=s(ht);else{if(A)return f(st,ut,et);Tt=l(nt,st,ut,rt,et,et*et,et*et*et)}S(Mt,y,Tt)}else if(P)v(W[Dt],W[Dt+1],et,w(Mt,y),N);else{var Tt;if(D)v(W[Dt],W[Dt+1],et,ht,1),Tt=s(ht);else{if(A)return f(W[Dt],W[Dt+1],et);Tt=C(W[Dt],W[Dt+1],et)}S(Mt,y,Tt)}},wt=new E({target:n._target,life:I,loop:n._loop,delay:n._delay,onframe:Pt,ondestroy:g});return u&&u!=="spline"&&(wt.easing=u),wt}}}var a=function(n,u,g,d){this._tracks={},this._target=n,this._loop=u||!1,this._getter=g||L,this._setter=d||T,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};a.prototype={when:function(n,u){var g=this._tracks;for(var d in u)if(u.hasOwnProperty(d)){if(!g[d]){g[d]=[];var y=this._getter(this._target,d);if(y==null)continue;n!==0&&g[d].push({time:0,value:r(y)})}g[d].push({time:n,value:u[d]})}return this},during:function(n){return this._onframeList.push(n),this},pause:function(){for(var n=0;n<this._clipList.length;n++)this._clipList[n].pause();this._paused=!0},resume:function(){for(var n=0;n<this._clipList.length;n++)this._clipList[n].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var n=this._doneList,u=n.length,g=0;g<u;g++)n[g].call(this)},start:function(n,u){var g=this,d=0,y=function(){d--,d||g._doneCallback()},p;for(var w in this._tracks)if(this._tracks.hasOwnProperty(w)){var S=x(this,n,y,this._tracks[w],w,u);S&&(this._clipList.push(S),d++,this.animation&&this.animation.addClip(S),p=S)}if(p){var R=p.onframe;p.onframe=function(B,k){R(B,k);for(var P=0;P<g._onframeList.length;P++)g._onframeList[P](B,k)}}return d||this._doneCallback(),this},stop:function(n){for(var u=this._clipList,g=this.animation,d=0;d<u.length;d++){var y=u[d];n&&y.onframe(this._target,1),g&&g.removeClip(y)}u.length=0},delay:function(n){return this._delay=n,this},done:function(n){return n&&this._doneList.push(n),this},getClips:function(){return this._clipList}};var i=a;X.exports=i},63612:function(X,z,e){var E=e(29680);function F(M){this._target=M.target,this._life=M.life||1e3,this._delay=M.delay||0,this._initialized=!1,this.loop=M.loop==null?!1:M.loop,this.gap=M.gap||0,this.easing=M.easing||"Linear",this.onframe=M.onframe,this.ondestroy=M.ondestroy,this.onrestart=M.onrestart,this._pausedTime=0,this._paused=!1}F.prototype={constructor:F,step:function(M,b){if(this._initialized||(this._startTime=M+this._delay,this._initialized=!0),this._paused){this._pausedTime+=b;return}var L=(M-this._startTime-this._pausedTime)/this._life;if(!(L<0)){L=Math.min(L,1);var T=this.easing,C=typeof T=="string"?E[T]:T,f=typeof C=="function"?C(L):L;return this.fire("frame",f),L===1?this.loop?(this.restart(M),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(M){var b=(M-this._startTime-this._pausedTime)%this._life;this._startTime=M-b+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(M,b){M="on"+M,this[M]&&this[M](this._target,b)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var O=F;X.exports=O},29680:function(X){var z={linear:function(E){return E},quadraticIn:function(E){return E*E},quadraticOut:function(E){return E*(2-E)},quadraticInOut:function(E){return(E*=2)<1?.5*E*E:-.5*(--E*(E-2)-1)},cubicIn:function(E){return E*E*E},cubicOut:function(E){return--E*E*E+1},cubicInOut:function(E){return(E*=2)<1?.5*E*E*E:.5*((E-=2)*E*E+2)},quarticIn:function(E){return E*E*E*E},quarticOut:function(E){return 1- --E*E*E*E},quarticInOut:function(E){return(E*=2)<1?.5*E*E*E*E:-.5*((E-=2)*E*E*E-2)},quinticIn:function(E){return E*E*E*E*E},quinticOut:function(E){return--E*E*E*E*E+1},quinticInOut:function(E){return(E*=2)<1?.5*E*E*E*E*E:.5*((E-=2)*E*E*E*E+2)},sinusoidalIn:function(E){return 1-Math.cos(E*Math.PI/2)},sinusoidalOut:function(E){return Math.sin(E*Math.PI/2)},sinusoidalInOut:function(E){return .5*(1-Math.cos(Math.PI*E))},exponentialIn:function(E){return E===0?0:Math.pow(1024,E-1)},exponentialOut:function(E){return E===1?1:1-Math.pow(2,-10*E)},exponentialInOut:function(E){return E===0?0:E===1?1:(E*=2)<1?.5*Math.pow(1024,E-1):.5*(-Math.pow(2,-10*(E-1))+2)},circularIn:function(E){return 1-Math.sqrt(1-E*E)},circularOut:function(E){return Math.sqrt(1- --E*E)},circularInOut:function(E){return(E*=2)<1?-.5*(Math.sqrt(1-E*E)-1):.5*(Math.sqrt(1-(E-=2)*E)+1)},elasticIn:function(E){var F,O=.1,M=.4;return E===0?0:E===1?1:(!O||O<1?(O=1,F=M/4):F=M*Math.asin(1/O)/(2*Math.PI),-(O*Math.pow(2,10*(E-=1))*Math.sin((E-F)*(2*Math.PI)/M)))},elasticOut:function(E){var F,O=.1,M=.4;return E===0?0:E===1?1:(!O||O<1?(O=1,F=M/4):F=M*Math.asin(1/O)/(2*Math.PI),O*Math.pow(2,-10*E)*Math.sin((E-F)*(2*Math.PI)/M)+1)},elasticInOut:function(E){var F,O=.1,M=.4;return E===0?0:E===1?1:(!O||O<1?(O=1,F=M/4):F=M*Math.asin(1/O)/(2*Math.PI),(E*=2)<1?-.5*(O*Math.pow(2,10*(E-=1))*Math.sin((E-F)*(2*Math.PI)/M)):O*Math.pow(2,-10*(E-=1))*Math.sin((E-F)*(2*Math.PI)/M)*.5+1)},backIn:function(E){var F=1.70158;return E*E*((F+1)*E-F)},backOut:function(E){var F=1.70158;return--E*E*((F+1)*E+F)+1},backInOut:function(E){var F=2.5949095;return(E*=2)<1?.5*(E*E*((F+1)*E-F)):.5*((E-=2)*E*((F+1)*E+F)+2)},bounceIn:function(E){return 1-z.bounceOut(1-E)},bounceOut:function(E){return E<.36363636363636365?7.5625*E*E:E<.7272727272727273?7.5625*(E-=.5454545454545454)*E+.75:E<.9090909090909091?7.5625*(E-=.8181818181818182)*E+.9375:7.5625*(E-=.9545454545454546)*E+.984375},bounceInOut:function(E){return E<.5?z.bounceIn(E*2)*.5:z.bounceOut(E*2-1)*.5+.5}},e=z;X.exports=e},529208:function(X){var z=typeof window<"u"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)};X.exports=z},656570:function(X,z){var e=1;typeof window<"u"&&(e=Math.max(window.devicePixelRatio||1,1));var E=0,F=e;z.debugMode=E,z.devicePixelRatio=F},436882:function(X,z,e){var E=e(188649),F=E.normalizeRadian,O=Math.PI*2;function M(b,L,T,C,f,v,m,o,h){if(m===0)return!1;var l=m;o-=b,h-=L;var r=Math.sqrt(o*o+h*h);if(r-l>T||r+l<T)return!1;if(Math.abs(C-f)%O<1e-4)return!0;if(v){var s=C;C=F(f),f=F(s)}else C=F(C),f=F(f);C>f&&(f+=O);var c=Math.atan2(h,o);return c<0&&(c+=O),c>=C&&c<=f||c+O>=C&&c+O<=f}z.containStroke=M},848544:function(X,z,e){var E=e(890723);function F(O,M,b,L,T,C,f,v,m,o,h){if(m===0)return!1;var l=m;if(h>M+l&&h>L+l&&h>C+l&&h>v+l||h<M-l&&h<L-l&&h<C-l&&h<v-l||o>O+l&&o>b+l&&o>T+l&&o>f+l||o<O-l&&o<b-l&&o<T-l&&o<f-l)return!1;var r=E.cubicProjectPoint(O,M,b,L,T,C,f,v,o,h,null);return r<=l/2}z.containStroke=F},84142:function(X,z){function e(E,F,O,M,b,L,T){if(b===0)return!1;var C=b,f=0,v=E;if(T>F+C&&T>M+C||T<F-C&&T<M-C||L>E+C&&L>O+C||L<E-C&&L<O-C)return!1;if(E!==O)f=(F-M)/(E-O),v=(E*M-O*F)/(E-O);else return Math.abs(L-E)<=C/2;var m=f*L-T+v,o=m*m/(f*f+1);return o<=C/2*C/2}z.containStroke=e},932150:function(X,z,e){var E=e(722407),F=e(84142),O=e(848544),M=e(159188),b=e(436882),L=e(188649),T=L.normalizeRadian,C=e(890723),f=e(99376),v=E.CMD,m=Math.PI*2,o=1e-4;function h(g,d){return Math.abs(g-d)<o}var l=[-1,-1,-1],r=[-1,-1];function s(){var g=r[0];r[0]=r[1],r[1]=g}function c(g,d,y,p,w,S,R,B,k,P){if(P>d&&P>p&&P>S&&P>B||P<d&&P<p&&P<S&&P<B)return 0;var D=C.cubicRootAt(d,p,S,B,P,l);if(D===0)return 0;for(var A=0,N=-1,I,G,W=0;W<D;W++){var Z=l[W],H=Z===0||Z===1?.5:1,U=C.cubicAt(g,y,w,R,Z);U<k||(N<0&&(N=C.cubicExtrema(d,p,S,B,r),r[1]<r[0]&&N>1&&s(),I=C.cubicAt(d,p,S,B,r[0]),N>1&&(G=C.cubicAt(d,p,S,B,r[1]))),N===2?Z<r[0]?A+=I<d?H:-H:Z<r[1]?A+=G<I?H:-H:A+=B<G?H:-H:Z<r[0]?A+=I<d?H:-H:A+=B<I?H:-H)}return A}function x(g,d,y,p,w,S,R,B){if(B>d&&B>p&&B>S||B<d&&B<p&&B<S)return 0;var k=C.quadraticRootAt(d,p,S,B,l);if(k===0)return 0;var P=C.quadraticExtremum(d,p,S);if(P>=0&&P<=1){for(var D=0,A=C.quadraticAt(d,p,S,P),N=0;N<k;N++){var I=l[N]===0||l[N]===1?.5:1,G=C.quadraticAt(g,y,w,l[N]);G<R||(l[N]<P?D+=A<d?I:-I:D+=S<A?I:-I)}return D}else{var I=l[0]===0||l[0]===1?.5:1,G=C.quadraticAt(g,y,w,l[0]);return G<R?0:S<d?I:-I}}function a(g,d,y,p,w,S,R,B){if(B-=d,B>y||B<-y)return 0;var k=Math.sqrt(y*y-B*B);l[0]=-k,l[1]=k;var P=Math.abs(p-w);if(P<1e-4)return 0;if(P%m<1e-4){p=0,w=m;var D=S?1:-1;return R>=l[0]+g&&R<=l[1]+g?D:0}if(S){var k=p;p=T(w),w=T(k)}else p=T(p),w=T(w);p>w&&(w+=m);for(var A=0,N=0;N<2;N++){var I=l[N];if(I+g>R){var G=Math.atan2(B,I),D=S?1:-1;G<0&&(G=m+G),(G>=p&&G<=w||G+m>=p&&G+m<=w)&&(G>Math.PI/2&&G<Math.PI*1.5&&(D=-D),A+=D)}}return A}function i(g,d,y,p,w){for(var S=0,R=0,B=0,k=0,P=0,D=0;D<g.length;){var A=g[D++];switch(A===v.M&&D>1&&(y||(S+=f(R,B,k,P,p,w))),D===1&&(R=g[D],B=g[D+1],k=R,P=B),A){case v.M:k=g[D++],P=g[D++],R=k,B=P;break;case v.L:if(y){if(F.containStroke(R,B,g[D],g[D+1],d,p,w))return!0}else S+=f(R,B,g[D],g[D+1],p,w)||0;R=g[D++],B=g[D++];break;case v.C:if(y){if(O.containStroke(R,B,g[D++],g[D++],g[D++],g[D++],g[D],g[D+1],d,p,w))return!0}else S+=c(R,B,g[D++],g[D++],g[D++],g[D++],g[D],g[D+1],p,w)||0;R=g[D++],B=g[D++];break;case v.Q:if(y){if(M.containStroke(R,B,g[D++],g[D++],g[D],g[D+1],d,p,w))return!0}else S+=x(R,B,g[D++],g[D++],g[D],g[D+1],p,w)||0;R=g[D++],B=g[D++];break;case v.A:var N=g[D++],I=g[D++],G=g[D++],W=g[D++],Z=g[D++],H=g[D++];D+=1;var U=1-g[D++],K=Math.cos(Z)*G+N,J=Math.sin(Z)*W+I;D>1?S+=f(R,B,K,J,p,w):(k=K,P=J);var V=(p-N)*W/G+N;if(y){if(b.containStroke(N,I,W,Z,Z+H,U,d,V,w))return!0}else S+=a(N,I,W,Z,Z+H,U,V,w);R=Math.cos(Z+H)*G+N,B=Math.sin(Z+H)*W+I;break;case v.R:k=R=g[D++],P=B=g[D++];var Y=g[D++],$=g[D++],K=k+Y,J=P+$;if(y){if(F.containStroke(k,P,K,P,d,p,w)||F.containStroke(K,P,K,J,d,p,w)||F.containStroke(K,J,k,J,d,p,w)||F.containStroke(k,J,k,P,d,p,w))return!0}else S+=f(K,P,K,J,p,w),S+=f(k,J,k,P,p,w);break;case v.Z:if(y){if(F.containStroke(R,B,k,P,d,p,w))return!0}else S+=f(R,B,k,P,p,w);R=k,B=P;break}}return!y&&!h(B,P)&&(S+=f(R,B,k,P,p,w)||0),S!==0}function n(g,d,y){return i(g,0,!1,d,y)}function u(g,d,y,p){return i(g,d,!0,y,p)}z.contain=n,z.containStroke=u},274898:function(X,z,e){var E=e(99376),F=1e-8;function O(b,L){return Math.abs(b-L)<F}function M(b,L,T){var C=0,f=b[0];if(!f)return!1;for(var v=1;v<b.length;v++){var m=b[v];C+=E(f[0],f[1],m[0],m[1],L,T),f=m}var o=b[0];return(!O(f[0],o[0])||!O(f[1],o[1]))&&(C+=E(f[0],f[1],o[0],o[1],L,T)),C!==0}z.contain=M},159188:function(X,z,e){var E=e(890723),F=E.quadraticProjectPoint;function O(M,b,L,T,C,f,v,m,o){if(v===0)return!1;var h=v;if(o>b+h&&o>T+h&&o>f+h||o<b-h&&o<T-h&&o<f-h||m>M+h&&m>L+h&&m>C+h||m<M-h&&m<L-h&&m<C-h)return!1;var l=F(M,b,L,T,C,f,m,o,null);return l<=h/2}z.containStroke=O},872113:function(X,z,e){var E=e(795946),F=e(60330),O=e(131879),M=O.getContext,b=O.extend,L=O.retrieve2,T=O.retrieve3,C=O.trim,f={},v=0,m=5e3,o=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,h="12px sans-serif",l={};function r(A,N){l[A]=N}function s(A,N){N=N||h;var I=A+":"+N;if(f[I])return f[I];for(var G=(A+"").split(`
`),W=0,Z=0,H=G.length;Z<H;Z++)W=Math.max(R(G[Z],N).width,W);return v>m&&(v=0,f={}),v++,f[I]=W,W}function c(A,N,I,G,W,Z,H,U){return H?a(A,N,I,G,W,Z,H,U):x(A,N,I,G,W,Z,U)}function x(A,N,I,G,W,Z,H){var U=B(A,N,W,Z,H),V=s(A,N);W&&(V+=W[1]+W[3]);var Y=U.outerHeight,$=i(0,V,I),K=n(0,Y,G),J=new E($,K,V,Y);return J.lineHeight=U.lineHeight,J}function a(A,N,I,G,W,Z,H,U){var V=k(A,{rich:H,truncate:U,font:N,textAlign:I,textPadding:W,textLineHeight:Z}),Y=V.outerWidth,$=V.outerHeight,K=i(0,Y,I),J=n(0,$,G);return new E(K,J,Y,$)}function i(A,N,I){return I==="right"?A-=N:I==="center"&&(A-=N/2),A}function n(A,N,I){return I==="middle"?A-=N/2:I==="bottom"&&(A-=N),A}function u(A,N,I){var G=N.textPosition,W=N.textDistance,Z=I.x,H=I.y;W=W||0;var U=I.height,V=I.width,Y=U/2,$="left",K="top";switch(G){case"left":Z-=W,H+=Y,$="right",K="middle";break;case"right":Z+=W+V,H+=Y,K="middle";break;case"top":Z+=V/2,H-=W,$="center",K="bottom";break;case"bottom":Z+=V/2,H+=U+W,$="center";break;case"inside":Z+=V/2,H+=Y,$="center",K="middle";break;case"insideLeft":Z+=W,H+=Y,K="middle";break;case"insideRight":Z+=V-W,H+=Y,$="right",K="middle";break;case"insideTop":Z+=V/2,H+=W,$="center";break;case"insideBottom":Z+=V/2,H+=U-W,$="center",K="bottom";break;case"insideTopLeft":Z+=W,H+=W;break;case"insideTopRight":Z+=V-W,H+=W,$="right";break;case"insideBottomLeft":Z+=W,H+=U-W,K="bottom";break;case"insideBottomRight":Z+=V-W,H+=U-W,$="right",K="bottom";break}return A=A||{},A.x=Z,A.y=H,A.textAlign=$,A.textVerticalAlign=K,A}function g(A,N,I){var G={textPosition:A,textDistance:I};return u({},G,N)}function d(A,N,I,G,W){if(!N)return"";var Z=(A+"").split(`
`);W=y(N,I,G,W);for(var H=0,U=Z.length;H<U;H++)Z[H]=p(Z[H],W);return Z.join(`
`)}function y(A,N,W,G){G=b({},G),G.font=N;var W=L(W,"...");G.maxIterations=L(G.maxIterations,2);var Z=G.minChar=L(G.minChar,0);G.cnCharWidth=s("\u56FD",N);var H=G.ascCharWidth=s("a",N);G.placeholder=L(G.placeholder,"");for(var U=A=Math.max(0,A-1),V=0;V<Z&&U>=H;V++)U-=H;var Y=s(W,N);return Y>U&&(W="",Y=0),U=A-Y,G.ellipsis=W,G.ellipsisWidth=Y,G.contentWidth=U,G.containerWidth=A,G}function p(A,N){var I=N.containerWidth,G=N.font,W=N.contentWidth;if(!I)return"";var Z=s(A,G);if(Z<=I)return A;for(var H=0;;H++){if(Z<=W||H>=N.maxIterations){A+=N.ellipsis;break}var U=H===0?w(A,W,N.ascCharWidth,N.cnCharWidth):Z>0?Math.floor(A.length*W/Z):0;A=A.substr(0,U),Z=s(A,G)}return A===""&&(A=N.placeholder),A}function w(A,N,I,G){for(var W=0,Z=0,H=A.length;Z<H&&W<N;Z++){var U=A.charCodeAt(Z);W+=0<=U&&U<=127?I:G}return Z}function S(A){return s("\u56FD",A)}function R(A,N){return l.measureText(A,N)}l.measureText=function(A,N){var I=M();return I.font=N||h,I.measureText(A)};function B(A,N,I,G,W){A!=null&&(A+="");var Z=L(G,S(N)),H=A?A.split(`
`):[],U=H.length*Z,V=U,Y=!0;if(I&&(V+=I[0]+I[2]),A&&W){Y=!1;var $=W.outerHeight,K=W.outerWidth;if($!=null&&V>$)A="",H=[];else if(K!=null)for(var J=y(K-(I?I[1]+I[3]:0),N,W.ellipsis,{minChar:W.minChar,placeholder:W.placeholder}),Q=0,et=H.length;Q<et;Q++)H[Q]=p(H[Q],J)}return{lines:H,height:U,outerHeight:V,lineHeight:Z,canCacheByTextString:Y}}function k(A,N){var I={lines:[],width:0,height:0};if(A!=null&&(A+=""),!A)return I;for(var G=o.lastIndex=0,W;(W=o.exec(A))!=null;){var Z=W.index;Z>G&&P(I,A.substring(G,Z)),P(I,W[2],W[1]),G=o.lastIndex}G<A.length&&P(I,A.substring(G,A.length));var H=I.lines,U=0,V=0,Y=[],$=N.textPadding,K=N.truncate,J=K&&K.outerWidth,Q=K&&K.outerHeight;$&&(J!=null&&(J-=$[1]+$[3]),Q!=null&&(Q-=$[0]+$[2]));for(var et=0;et<H.length;et++){for(var nt=H[et],st=0,ut=0,rt=0;rt<nt.tokens.length;rt++){var ht=nt.tokens[rt],Pt=ht.styleName&&N.rich[ht.styleName]||{},wt=ht.textPadding=Pt.textPadding,Mt=ht.font=Pt.font||N.font,Ft=ht.textHeight=L(Pt.textHeight,S(Mt));if(wt&&(Ft+=wt[0]+wt[2]),ht.height=Ft,ht.lineHeight=T(Pt.textLineHeight,N.textLineHeight,Ft),ht.textAlign=Pt&&Pt.textAlign||N.textAlign,ht.textVerticalAlign=Pt&&Pt.textVerticalAlign||"middle",Q!=null&&U+ht.lineHeight>Q)return{lines:[],width:0,height:0};ht.textWidth=s(ht.text,Mt);var Dt=Pt.textWidth,Rt=Dt==null||Dt==="auto";if(typeof Dt=="string"&&Dt.charAt(Dt.length-1)==="%")ht.percentWidth=Dt,Y.push(ht),Dt=0;else{if(Rt){Dt=ht.textWidth;var Tt=Pt.textBackgroundColor,mt=Tt&&Tt.image;mt&&(mt=F.findExistImage(mt),F.isImageReady(mt)&&(Dt=Math.max(Dt,mt.width*Ft/mt.height)))}var Nt=wt?wt[1]+wt[3]:0;Dt+=Nt;var ct=J!=null?J-ut:null;ct!=null&&ct<Dt&&(!Rt||ct<Nt?(ht.text="",ht.textWidth=Dt=0):(ht.text=d(ht.text,ct-Nt,Mt,K.ellipsis,{minChar:K.minChar}),ht.textWidth=s(ht.text,Mt),Dt=ht.textWidth+Nt))}ut+=ht.width=Dt,Pt&&(st=Math.max(st,ht.lineHeight))}nt.width=ut,nt.lineHeight=st,U+=st,V=Math.max(V,ut)}I.outerWidth=I.width=L(N.textWidth,V),I.outerHeight=I.height=L(N.textHeight,U),$&&(I.outerWidth+=$[1]+$[3],I.outerHeight+=$[0]+$[2]);for(var et=0;et<Y.length;et++){var ht=Y[et],vt=ht.percentWidth;ht.width=parseInt(vt,10)/100*V}return I}function P(A,N,I){for(var G=N==="",W=N.split(`
`),Z=A.lines,H=0;H<W.length;H++){var U=W[H],V={styleName:I,text:U,isLineHolder:!U&&!G};if(H)Z.push({tokens:[V]});else{var Y=(Z[Z.length-1]||(Z[0]={tokens:[]})).tokens,$=Y.length;$===1&&Y[0].isLineHolder?Y[0]=V:(U||!$||G)&&Y.push(V)}}}function D(A){var N=(A.fontSize||A.fontFamily)&&[A.fontStyle,A.fontWeight,(A.fontSize||12)+"px",A.fontFamily||"sans-serif"].join(" ");return N&&C(N)||A.textFont||A.font}z.DEFAULT_FONT=h,z.$override=r,z.getWidth=s,z.getBoundingRect=c,z.adjustTextX=i,z.adjustTextY=n,z.calculateTextPosition=u,z.adjustTextPositionOnRect=g,z.truncateText=d,z.getLineHeight=S,z.measureText=R,z.parsePlainText=B,z.parseRichText=k,z.makeFont=D},188649:function(X,z){var e=Math.PI*2;function E(F){return F%=e,F<0&&(F+=e),F}z.normalizeRadian=E},99376:function(X){function z(e,E,F,O,M,b){if(b>E&&b>O||b<E&&b<O||O===E)return 0;var L=O<E?1:-1,T=(b-E)/(O-E);(T===1||T===0)&&(L=O<E?.5:-.5);var C=T*(F-e)+e;return C===M?1/0:C>M?L:0}X.exports=z},827146:function(X,z,e){var E=e(131879),F=e(54498),O=e(795946),M=function(L){L=L||{},F.call(this,L);for(var T in L)L.hasOwnProperty(T)&&(this[T]=L[T]);this._children=[],this.__storage=null,this.__dirty=!0};M.prototype={constructor:M,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(L){return this._children[L]},childOfName:function(L){for(var T=this._children,C=0;C<T.length;C++)if(T[C].name===L)return T[C]},childCount:function(){return this._children.length},add:function(L){return L&&L!==this&&L.parent!==this&&(this._children.push(L),this._doAdd(L)),this},addBefore:function(L,T){if(L&&L!==this&&L.parent!==this&&T&&T.parent===this){var C=this._children,f=C.indexOf(T);f>=0&&(C.splice(f,0,L),this._doAdd(L))}return this},_doAdd:function(L){L.parent&&L.parent.remove(L),L.parent=this;var T=this.__storage,C=this.__zr;T&&T!==L.__storage&&(T.addToStorage(L),L instanceof M&&L.addChildrenToStorage(T)),C&&C.refresh()},remove:function(L){var T=this.__zr,C=this.__storage,f=this._children,v=E.indexOf(f,L);return v<0?this:(f.splice(v,1),L.parent=null,C&&(C.delFromStorage(L),L instanceof M&&L.delChildrenFromStorage(C)),T&&T.refresh(),this)},removeAll:function(){var L=this._children,T=this.__storage,C,f;for(f=0;f<L.length;f++)C=L[f],T&&(T.delFromStorage(C),C instanceof M&&C.delChildrenFromStorage(T)),C.parent=null;return L.length=0,this},eachChild:function(L,T){for(var C=this._children,f=0;f<C.length;f++){var v=C[f];L.call(T,v,f)}return this},traverse:function(L,T){for(var C=0;C<this._children.length;C++){var f=this._children[C];L.call(T,f),f.type==="group"&&f.traverse(L,T)}return this},addChildrenToStorage:function(L){for(var T=0;T<this._children.length;T++){var C=this._children[T];L.addToStorage(C),C instanceof M&&C.addChildrenToStorage(L)}},delChildrenFromStorage:function(L){for(var T=0;T<this._children.length;T++){var C=this._children[T];L.delFromStorage(C),C instanceof M&&C.delChildrenFromStorage(L)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(L){for(var T=null,C=new O(0,0,0,0),f=L||this._children,v=[],m=0;m<f.length;m++){var o=f[m];if(!(o.ignore||o.invisible)){var h=o.getBoundingRect(),l=o.getLocalTransform(v);l?(C.copy(h),C.applyTransform(l),T=T||C.clone(),T.union(C)):(T=T||h.clone(),T.union(h))}}return T||C}},E.inherits(M,F);var b=M;X.exports=b},795946:function(X,z,e){var E=e(912072),F=e(343970),O=E.applyTransform,M=Math.min,b=Math.max;function L(C,f,v,m){v<0&&(C=C+v,v=-v),m<0&&(f=f+m,m=-m),this.x=C,this.y=f,this.width=v,this.height=m}L.prototype={constructor:L,union:function(C){var f=M(C.x,this.x),v=M(C.y,this.y);this.width=b(C.x+C.width,this.x+this.width)-f,this.height=b(C.y+C.height,this.y+this.height)-v,this.x=f,this.y=v},applyTransform:function(){var C=[],f=[],v=[],m=[];return function(o){if(o){C[0]=v[0]=this.x,C[1]=m[1]=this.y,f[0]=m[0]=this.x+this.width,f[1]=v[1]=this.y+this.height,O(C,C,o),O(f,f,o),O(v,v,o),O(m,m,o),this.x=M(C[0],f[0],v[0],m[0]),this.y=M(C[1],f[1],v[1],m[1]);var h=b(C[0],f[0],v[0],m[0]),l=b(C[1],f[1],v[1],m[1]);this.width=h-this.x,this.height=l-this.y}}}(),calculateTransform:function(C){var f=this,v=C.width/f.width,m=C.height/f.height,o=F.create();return F.translate(o,o,[-f.x,-f.y]),F.scale(o,o,[v,m]),F.translate(o,o,[C.x,C.y]),o},intersect:function(C){if(!C)return!1;C instanceof L||(C=L.create(C));var f=this,v=f.x,m=f.x+f.width,o=f.y,h=f.y+f.height,l=C.x,r=C.x+C.width,s=C.y,c=C.y+C.height;return!(m<l||r<v||h<s||c<o)},contain:function(C,f){var v=this;return C>=v.x&&C<=v.x+v.width&&f>=v.y&&f<=v.y+v.height},clone:function(){return new L(this.x,this.y,this.width,this.height)},copy:function(C){this.x=C.x,this.y=C.y,this.width=C.width,this.height=C.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},L.create=function(C){return new L(C.x,C.y,C.width,C.height)};var T=L;X.exports=T},994548:function(X,z,e){var E=e(519756),F=function(){this._track=[]};F.prototype={constructor:F,recognize:function(T,C,f){return this._doTrack(T,C,f),this._recognize(T)},clear:function(){return this._track.length=0,this},_doTrack:function(T,C,f){var v=T.touches;if(v){for(var m={points:[],touches:[],target:C,event:T},o=0,h=v.length;o<h;o++){var l=v[o],r=E.clientToLocal(f,l,{});m.points.push([r.zrX,r.zrY]),m.touches.push(l)}this._track.push(m)}},_recognize:function(T){for(var C in b)if(b.hasOwnProperty(C)){var f=b[C](this._track,T);if(f)return f}}};function O(T){var C=T[1][0]-T[0][0],f=T[1][1]-T[0][1];return Math.sqrt(C*C+f*f)}function M(T){return[(T[0][0]+T[1][0])/2,(T[0][1]+T[1][1])/2]}var b={pinch:function(T,C){var f=T.length;if(f){var v=(T[f-1]||{}).points,m=(T[f-2]||{}).points||v;if(m&&m.length>1&&v&&v.length>1){var o=O(v)/O(m);!isFinite(o)&&(o=1),C.pinchScale=o;var h=M(v);return C.pinchX=h[0],C.pinchY=h[1],{type:"pinch",target:T[0].target,event:C}}}}},L=F;X.exports=L},221311:function(X){var z=function(){this.head=null,this.tail=null,this._len=0},e=z.prototype;e.insert=function(b){var L=new E(b);return this.insertEntry(L),L},e.insertEntry=function(b){this.head?(this.tail.next=b,b.prev=this.tail,b.next=null,this.tail=b):this.head=this.tail=b,this._len++},e.remove=function(b){var L=b.prev,T=b.next;L?L.next=T:this.head=T,T?T.prev=L:this.tail=L,b.next=b.prev=null,this._len--},e.len=function(){return this._len},e.clear=function(){this.head=this.tail=null,this._len=0};var E=function(b){this.value=b,this.next,this.prev},F=function(b){this._list=new z,this._map={},this._maxSize=b||10,this._lastRemovedEntry=null},O=F.prototype;O.put=function(b,L){var T=this._list,C=this._map,f=null;if(C[b]==null){var v=T.len(),m=this._lastRemovedEntry;if(v>=this._maxSize&&v>0){var o=T.head;T.remove(o),delete C[o.key],f=o.value,this._lastRemovedEntry=o}m?m.value=L:m=new E(L),m.key=b,T.insertEntry(m),C[b]=m}return f},O.get=function(b){var L=this._map[b],T=this._list;if(L!=null)return L!==T.tail&&(T.remove(L),T.insertEntry(L)),L.value},O.clear=function(){this._list.clear(),this._map={}};var M=F;X.exports=M},722407:function(X,z,e){var E=e(890723),F=e(912072),O=e(18644),M=e(795946),b=e(656570),L=b.devicePixelRatio,T={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},C=[],f=[],v=[],m=[],o=Math.min,h=Math.max,l=Math.cos,r=Math.sin,s=Math.sqrt,c=Math.abs,x=typeof Float32Array<"u",a=function(n){this._saveData=!n,this._saveData&&(this.data=[]),this._ctx=null};a.prototype={constructor:a,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(n,u,g){g=g||0,this._ux=c(g/L/n)||0,this._uy=c(g/L/u)||0},getContext:function(){return this._ctx},beginPath:function(n){return this._ctx=n,n&&n.beginPath(),n&&(this.dpr=n.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(n,u){return this.addData(T.M,n,u),this._ctx&&this._ctx.moveTo(n,u),this._x0=n,this._y0=u,this._xi=n,this._yi=u,this},lineTo:function(n,u){var g=c(n-this._xi)>this._ux||c(u-this._yi)>this._uy||this._len<5;return this.addData(T.L,n,u),this._ctx&&g&&(this._needsDash()?this._dashedLineTo(n,u):this._ctx.lineTo(n,u)),g&&(this._xi=n,this._yi=u),this},bezierCurveTo:function(n,u,g,d,y,p){return this.addData(T.C,n,u,g,d,y,p),this._ctx&&(this._needsDash()?this._dashedBezierTo(n,u,g,d,y,p):this._ctx.bezierCurveTo(n,u,g,d,y,p)),this._xi=y,this._yi=p,this},quadraticCurveTo:function(n,u,g,d){return this.addData(T.Q,n,u,g,d),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(n,u,g,d):this._ctx.quadraticCurveTo(n,u,g,d)),this._xi=g,this._yi=d,this},arc:function(n,u,g,d,y,p){return this.addData(T.A,n,u,g,g,d,y-d,0,p?0:1),this._ctx&&this._ctx.arc(n,u,g,d,y,p),this._xi=l(y)*g+n,this._yi=r(y)*g+u,this},arcTo:function(n,u,g,d,y){return this._ctx&&this._ctx.arcTo(n,u,g,d,y),this},rect:function(n,u,g,d){return this._ctx&&this._ctx.rect(n,u,g,d),this.addData(T.R,n,u,g,d),this},closePath:function(){this.addData(T.Z);var n=this._ctx,u=this._x0,g=this._y0;return n&&(this._needsDash()&&this._dashedLineTo(u,g),n.closePath()),this._xi=u,this._yi=g,this},fill:function(n){n&&n.fill(),this.toStatic()},stroke:function(n){n&&n.stroke(),this.toStatic()},setLineDash:function(n){if(n instanceof Array){this._lineDash=n,this._dashIdx=0;for(var u=0,g=0;g<n.length;g++)u+=n[g];this._dashSum=u}return this},setLineDashOffset:function(n){return this._dashOffset=n,this},len:function(){return this._len},setData:function(n){var u=n.length;!(this.data&&this.data.length===u)&&x&&(this.data=new Float32Array(u));for(var g=0;g<u;g++)this.data[g]=n[g];this._len=u},appendPath:function(n){n instanceof Array||(n=[n]);for(var u=n.length,g=0,d=this._len,y=0;y<u;y++)g+=n[y].len();x&&this.data instanceof Float32Array&&(this.data=new Float32Array(d+g));for(var y=0;y<u;y++)for(var p=n[y].data,w=0;w<p.length;w++)this.data[d++]=p[w];this._len=d},addData:function(n){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var g=0;g<arguments.length;g++)u[this._len++]=arguments[g];this._prevCmd=n}},_expandData:function(){if(!(this.data instanceof Array)){for(var n=[],u=0;u<this._len;u++)n[u]=this.data[u];this.data=n}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(n,u){var g=this._dashSum,d=this._dashOffset,y=this._lineDash,p=this._ctx,w=this._xi,S=this._yi,R=n-w,B=u-S,k=s(R*R+B*B),P=w,D=S,A,N=y.length,I;for(R/=k,B/=k,d<0&&(d=g+d),d%=g,P-=d*R,D-=d*B;R>0&&P<=n||R<0&&P>=n||R===0&&(B>0&&D<=u||B<0&&D>=u);)I=this._dashIdx,A=y[I],P+=R*A,D+=B*A,this._dashIdx=(I+1)%N,!(R>0&&P<w||R<0&&P>w||B>0&&D<S||B<0&&D>S)&&p[I%2?"moveTo":"lineTo"](R>=0?o(P,n):h(P,n),B>=0?o(D,u):h(D,u));R=P-n,B=D-u,this._dashOffset=-s(R*R+B*B)},_dashedBezierTo:function(n,u,g,d,y,p){var w=this._dashSum,S=this._dashOffset,R=this._lineDash,B=this._ctx,k=this._xi,P=this._yi,D,A,N,I=E.cubicAt,G=0,W=this._dashIdx,Z=R.length,H,U,V=0;for(S<0&&(S=w+S),S%=w,D=0;D<1;D+=.1)A=I(k,n,g,y,D+.1)-I(k,n,g,y,D),N=I(P,u,d,p,D+.1)-I(P,u,d,p,D),G+=s(A*A+N*N);for(;W<Z&&(V+=R[W],!(V>S));W++);for(D=(V-S)/G;D<=1;)H=I(k,n,g,y,D),U=I(P,u,d,p,D),W%2?B.moveTo(H,U):B.lineTo(H,U),D+=R[W]/G,W=(W+1)%Z;W%2!==0&&B.lineTo(y,p),A=y-H,N=p-U,this._dashOffset=-s(A*A+N*N)},_dashedQuadraticTo:function(n,u,g,d){var y=g,p=d;g=(g+2*n)/3,d=(d+2*u)/3,n=(this._xi+2*n)/3,u=(this._yi+2*u)/3,this._dashedBezierTo(n,u,g,d,y,p)},toStatic:function(){var n=this.data;n instanceof Array&&(n.length=this._len,x&&(this.data=new Float32Array(n)))},getBoundingRect:function(){C[0]=C[1]=v[0]=v[1]=Number.MAX_VALUE,f[0]=f[1]=m[0]=m[1]=-Number.MAX_VALUE;for(var n=this.data,u=0,g=0,d=0,y=0,p=0;p<n.length;){var w=n[p++];switch(p===1&&(u=n[p],g=n[p+1],d=u,y=g),w){case T.M:d=n[p++],y=n[p++],u=d,g=y,v[0]=d,v[1]=y,m[0]=d,m[1]=y;break;case T.L:O.fromLine(u,g,n[p],n[p+1],v,m),u=n[p++],g=n[p++];break;case T.C:O.fromCubic(u,g,n[p++],n[p++],n[p++],n[p++],n[p],n[p+1],v,m),u=n[p++],g=n[p++];break;case T.Q:O.fromQuadratic(u,g,n[p++],n[p++],n[p],n[p+1],v,m),u=n[p++],g=n[p++];break;case T.A:var S=n[p++],R=n[p++],B=n[p++],k=n[p++],P=n[p++],D=n[p++]+P;p+=1;var A=1-n[p++];p===1&&(d=l(P)*B+S,y=r(P)*k+R),O.fromArc(S,R,B,k,P,D,A,v,m),u=l(D)*B+S,g=r(D)*k+R;break;case T.R:d=u=n[p++],y=g=n[p++];var N=n[p++],I=n[p++];O.fromLine(d,y,d+N,y+I,v,m);break;case T.Z:u=d,g=y;break}F.min(C,C,v),F.max(f,f,m)}return p===0&&(C[0]=C[1]=f[0]=f[1]=0),new M(C[0],C[1],f[0]-C[0],f[1]-C[1])},rebuildPath:function(n){for(var u=this.data,g,d,y,p,w,S,R=this._ux,B=this._uy,k=this._len,P=0;P<k;){var D=u[P++];switch(P===1&&(y=u[P],p=u[P+1],g=y,d=p),D){case T.M:g=y=u[P++],d=p=u[P++],n.moveTo(y,p);break;case T.L:w=u[P++],S=u[P++],(c(w-y)>R||c(S-p)>B||P===k-1)&&(n.lineTo(w,S),y=w,p=S);break;case T.C:n.bezierCurveTo(u[P++],u[P++],u[P++],u[P++],u[P++],u[P++]),y=u[P-2],p=u[P-1];break;case T.Q:n.quadraticCurveTo(u[P++],u[P++],u[P++],u[P++]),y=u[P-2],p=u[P-1];break;case T.A:var A=u[P++],N=u[P++],I=u[P++],G=u[P++],W=u[P++],Z=u[P++],H=u[P++],U=u[P++],V=I>G?I:G,Y=I>G?1:I/G,$=I>G?G/I:1,K=Math.abs(I-G)>.001,J=W+Z;K?(n.translate(A,N),n.rotate(H),n.scale(Y,$),n.arc(0,0,V,W,J,1-U),n.scale(1/Y,1/$),n.rotate(-H),n.translate(-A,-N)):n.arc(A,N,V,W,J,1-U),P===1&&(g=l(W)*I+A,d=r(W)*G+N),y=l(J)*I+A,p=r(J)*G+N;break;case T.R:g=y=u[P],d=p=u[P+1],n.rect(u[P++],u[P++],u[P++],u[P++]);break;case T.Z:n.closePath(),y=g,p=d}}}},a.CMD=T;var i=a;X.exports=i},614107:function(X){function z(){}z.prototype={diff:function(M,b,L){L||(L=function(x,a){return x===a}),this.equals=L;var T=this;M=M.slice(),b=b.slice();var C=b.length,f=M.length,v=1,m=C+f,o=[{newPos:-1,components:[]}],h=this.extractCommon(o[0],b,M,0);if(o[0].newPos+1>=C&&h+1>=f){for(var l=[],r=0;r<b.length;r++)l.push(r);return[{indices:l,count:b.length}]}function s(){for(var x=-1*v;x<=v;x+=2){var a,i=o[x-1],n=o[x+1],u=(n?n.newPos:0)-x;i&&(o[x-1]=void 0);var g=i&&i.newPos+1<C,d=n&&0<=u&&u<f;if(!g&&!d){o[x]=void 0;continue}if(!g||d&&i.newPos<n.newPos?(a=E(n),T.pushComponent(a.components,void 0,!0)):(a=i,a.newPos++,T.pushComponent(a.components,!0,void 0)),u=T.extractCommon(a,b,M,x),a.newPos+1>=C&&u+1>=f)return e(T,a.components,b,M);o[x]=a}v++}for(;v<=m;){var c=s();if(c)return c}},pushComponent:function(M,b,L){var T=M[M.length-1];T&&T.added===b&&T.removed===L?M[M.length-1]={count:T.count+1,added:b,removed:L}:M.push({count:1,added:b,removed:L})},extractCommon:function(M,b,L,T){for(var C=b.length,f=L.length,v=M.newPos,m=v-T,o=0;v+1<C&&m+1<f&&this.equals(b[v+1],L[m+1]);)v++,m++,o++;return o&&M.components.push({count:o}),M.newPos=v,m},tokenize:function(M){return M.slice()},join:function(M){return M.slice()}};function e(M,b,L,T){for(var C=0,f=b.length,v=0,m=0;C<f;C++){var o=b[C];if(o.removed){for(var h=[],l=m;l<m+o.count;l++)h.push(l);o.indices=h,m+=o.count}else{for(var h=[],l=v;l<v+o.count;l++)h.push(l);o.indices=h,v+=o.count,o.added||(m+=o.count)}}return b}function E(M){return{newPos:M.newPos,components:M.components.slice(0)}}var F=new z;function O(M,b,L){return F.diff(M,b,L)}X.exports=O},18644:function(X,z,e){var E=e(912072),F=e(890723),O=Math.min,M=Math.max,b=Math.sin,L=Math.cos,T=Math.PI*2,C=E.create(),f=E.create(),v=E.create();function m(x,a,i){if(x.length!==0){var n=x[0],u=n[0],g=n[0],d=n[1],y=n[1],p;for(p=1;p<x.length;p++)n=x[p],u=O(u,n[0]),g=M(g,n[0]),d=O(d,n[1]),y=M(y,n[1]);a[0]=u,a[1]=d,i[0]=g,i[1]=y}}function o(x,a,i,n,u,g){u[0]=O(x,i),u[1]=O(a,n),g[0]=M(x,i),g[1]=M(a,n)}var h=[],l=[];function r(x,a,i,n,u,g,d,y,p,w){var S=F.cubicExtrema,R=F.cubicAt,B,k=S(x,i,u,d,h);for(p[0]=1/0,p[1]=1/0,w[0]=-1/0,w[1]=-1/0,B=0;B<k;B++){var P=R(x,i,u,d,h[B]);p[0]=O(P,p[0]),w[0]=M(P,w[0])}for(k=S(a,n,g,y,l),B=0;B<k;B++){var D=R(a,n,g,y,l[B]);p[1]=O(D,p[1]),w[1]=M(D,w[1])}p[0]=O(x,p[0]),w[0]=M(x,w[0]),p[0]=O(d,p[0]),w[0]=M(d,w[0]),p[1]=O(a,p[1]),w[1]=M(a,w[1]),p[1]=O(y,p[1]),w[1]=M(y,w[1])}function s(x,a,i,n,u,g,d,y){var p=F.quadraticExtremum,w=F.quadraticAt,S=M(O(p(x,i,u),1),0),R=M(O(p(a,n,g),1),0),B=w(x,i,u,S),k=w(a,n,g,R);d[0]=O(x,u,B),d[1]=O(a,g,k),y[0]=M(x,u,B),y[1]=M(a,g,k)}function c(x,a,i,n,u,g,d,y,p){var w=E.min,S=E.max,R=Math.abs(u-g);if(R%T<1e-4&&R>1e-4){y[0]=x-i,y[1]=a-n,p[0]=x+i,p[1]=a+n;return}if(C[0]=L(u)*i+x,C[1]=b(u)*n+a,f[0]=L(g)*i+x,f[1]=b(g)*n+a,w(y,C,f),S(p,C,f),u=u%T,u<0&&(u=u+T),g=g%T,g<0&&(g=g+T),u>g&&!d?g+=T:u<g&&d&&(u+=T),d){var B=g;g=u,u=B}for(var k=0;k<g;k+=Math.PI/2)k>u&&(v[0]=L(k)*i+x,v[1]=b(k)*n+a,w(y,v,y),S(p,v,p))}z.fromPoints=m,z.fromLine=o,z.fromCubic=r,z.fromQuadratic=s,z.fromArc=c},890723:function(X,z,e){var E=e(912072),F=E.create,O=E.distSquare,M=Math.pow,b=Math.sqrt,L=1e-8,T=1e-4,C=b(3),f=1/3,v=F(),m=F(),o=F();function h(w){return w>-L&&w<L}function l(w){return w>L||w<-L}function r(w,S,R,B,k){var P=1-k;return P*P*(P*w+3*k*S)+k*k*(k*B+3*P*R)}function s(w,S,R,B,k){var P=1-k;return 3*(((S-w)*P+2*(R-S)*k)*P+(B-R)*k*k)}function c(w,S,R,B,k,P){var D=B+3*(S-R)-w,A=3*(R-S*2+w),N=3*(S-w),I=w-k,G=A*A-3*D*N,W=A*N-9*D*I,Z=N*N-3*A*I,H=0;if(h(G)&&h(W))if(h(A))P[0]=0;else{var U=-N/A;U>=0&&U<=1&&(P[H++]=U)}else{var V=W*W-4*G*Z;if(h(V)){var Y=W/G,U=-A/D+Y,$=-Y/2;U>=0&&U<=1&&(P[H++]=U),$>=0&&$<=1&&(P[H++]=$)}else if(V>0){var K=b(V),J=G*A+1.5*D*(-W+K),Q=G*A+1.5*D*(-W-K);J<0?J=-M(-J,f):J=M(J,f),Q<0?Q=-M(-Q,f):Q=M(Q,f);var U=(-A-(J+Q))/(3*D);U>=0&&U<=1&&(P[H++]=U)}else{var et=(2*G*A-3*D*W)/(2*b(G*G*G)),nt=Math.acos(et)/3,st=b(G),ut=Math.cos(nt),U=(-A-2*st*ut)/(3*D),$=(-A+st*(ut+C*Math.sin(nt)))/(3*D),rt=(-A+st*(ut-C*Math.sin(nt)))/(3*D);U>=0&&U<=1&&(P[H++]=U),$>=0&&$<=1&&(P[H++]=$),rt>=0&&rt<=1&&(P[H++]=rt)}}return H}function x(w,S,R,B,k){var P=6*R-12*S+6*w,D=9*S+3*B-3*w-9*R,A=3*S-3*w,N=0;if(h(D)){if(l(P)){var I=-A/P;I>=0&&I<=1&&(k[N++]=I)}}else{var G=P*P-4*D*A;if(h(G))k[0]=-P/(2*D);else if(G>0){var W=b(G),I=(-P+W)/(2*D),Z=(-P-W)/(2*D);I>=0&&I<=1&&(k[N++]=I),Z>=0&&Z<=1&&(k[N++]=Z)}}return N}function a(w,S,R,B,k,P){var D=(S-w)*k+w,A=(R-S)*k+S,N=(B-R)*k+R,I=(A-D)*k+D,G=(N-A)*k+A,W=(G-I)*k+I;P[0]=w,P[1]=D,P[2]=I,P[3]=W,P[4]=W,P[5]=G,P[6]=N,P[7]=B}function i(w,S,R,B,k,P,D,A,N,I,G){var W,Z=.005,H=1/0,U,V,Y,$;v[0]=N,v[1]=I;for(var K=0;K<1;K+=.05)m[0]=r(w,R,k,D,K),m[1]=r(S,B,P,A,K),Y=O(v,m),Y<H&&(W=K,H=Y);H=1/0;for(var J=0;J<32&&!(Z<T);J++)U=W-Z,V=W+Z,m[0]=r(w,R,k,D,U),m[1]=r(S,B,P,A,U),Y=O(m,v),U>=0&&Y<H?(W=U,H=Y):(o[0]=r(w,R,k,D,V),o[1]=r(S,B,P,A,V),$=O(o,v),V<=1&&$<H?(W=V,H=$):Z*=.5);return G&&(G[0]=r(w,R,k,D,W),G[1]=r(S,B,P,A,W)),b(H)}function n(w,S,R,B){var k=1-B;return k*(k*w+2*B*S)+B*B*R}function u(w,S,R,B){return 2*((1-B)*(S-w)+B*(R-S))}function g(w,S,R,B,k){var P=w-2*S+R,D=2*(S-w),A=w-B,N=0;if(h(P)){if(l(D)){var I=-A/D;I>=0&&I<=1&&(k[N++]=I)}}else{var G=D*D-4*P*A;if(h(G)){var I=-D/(2*P);I>=0&&I<=1&&(k[N++]=I)}else if(G>0){var W=b(G),I=(-D+W)/(2*P),Z=(-D-W)/(2*P);I>=0&&I<=1&&(k[N++]=I),Z>=0&&Z<=1&&(k[N++]=Z)}}return N}function d(w,S,R){var B=w+R-2*S;return B===0?.5:(w-S)/B}function y(w,S,R,B,k){var P=(S-w)*B+w,D=(R-S)*B+S,A=(D-P)*B+P;k[0]=w,k[1]=P,k[2]=A,k[3]=A,k[4]=D,k[5]=R}function p(w,S,R,B,k,P,D,A,N){var I,G=.005,W=1/0;v[0]=D,v[1]=A;for(var Z=0;Z<1;Z+=.05){m[0]=n(w,R,k,Z),m[1]=n(S,B,P,Z);var H=O(v,m);H<W&&(I=Z,W=H)}W=1/0;for(var U=0;U<32&&!(G<T);U++){var V=I-G,Y=I+G;m[0]=n(w,R,k,V),m[1]=n(S,B,P,V);var H=O(m,v);if(V>=0&&H<W)I=V,W=H;else{o[0]=n(w,R,k,Y),o[1]=n(S,B,P,Y);var $=O(o,v);Y<=1&&$<W?(I=Y,W=$):G*=.5}}return N&&(N[0]=n(w,R,k,I),N[1]=n(S,B,P,I)),b(W)}z.cubicAt=r,z.cubicDerivativeAt=s,z.cubicRootAt=c,z.cubicExtrema=x,z.cubicSubdivide=a,z.cubicProjectPoint=i,z.quadraticAt=n,z.quadraticDerivativeAt=u,z.quadraticRootAt=g,z.quadraticExtremum=d,z.quadraticSubdivide=y,z.quadraticProjectPoint=p},771659:function(X,z,e){var E=e(358020),F=e(709991),O=F.buildTransformer,M="___zrEVENTSAVED",b=[];function L(m,o,h,l,r){return T(b,o,l,r,!0)&&T(m,h,b[0],b[1])}function T(m,o,h,l,r){if(o.getBoundingClientRect&&E.domSupported&&!v(o)){var s=o[M]||(o[M]={}),c=C(o,s),x=f(c,s,r);if(x)return x(m,h,l),!0}return!1}function C(m,o){var h=o.markers;if(h)return h;h=o.markers=[];for(var l=["left","right"],r=["top","bottom"],s=0;s<4;s++){var c=document.createElement("div"),x=c.style,a=s%2,i=(s>>1)%2;x.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",l[a]+":0",r[i]+":0",l[1-a]+":auto",r[1-i]+":auto",""].join("!important;"),m.appendChild(c),h.push(c)}return h}function f(m,o,h){for(var l=h?"invTrans":"trans",r=o[l],s=o.srcCoords,c=!0,x=[],a=[],i=0;i<4;i++){var n=m[i].getBoundingClientRect(),u=2*i,g=n.left,d=n.top;x.push(g,d),c=c&&s&&g===s[u]&&d===s[u+1],a.push(m[i].offsetLeft,m[i].offsetTop)}return c&&r?r:(o.srcCoords=x,o[l]=h?O(a,x):O(x,a))}function v(m){return m.nodeName.toUpperCase()==="CANVAS"}z.transformLocalCoord=L,z.transformCoordWithViewport=T,z.isCanvasEl=v},358020:function(X){var z={};typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?z={browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:typeof document>"u"&&typeof self<"u"?z={browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:typeof navigator>"u"?z={browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:z=E(navigator.userAgent);var e=z;function E(F){var O={},M={},b=F.match(/Firefox\/([\d.]+)/),L=F.match(/MSIE\s([\d.]+)/)||F.match(/Trident\/.+?rv:(([\d.]+))/),T=F.match(/Edge\/([\d.]+)/),C=/micromessenger/i.test(F);return b&&(M.firefox=!0,M.version=b[1]),L&&(M.ie=!0,M.version=L[1]),T&&(M.edge=!0,M.version=T[1]),C&&(M.weChat=!0),{browser:M,os:O,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect<"u",touchEventsSupported:"ontouchstart"in window&&!M.ie&&!M.edge,pointerEventsSupported:"onpointerdown"in window&&(M.edge||M.ie&&M.version>=11),domSupported:typeof document<"u"}}X.exports=e},519756:function(X,z,e){var E=e(291212);z.Dispatcher=E;var F=e(358020),O=e(771659),M=O.isCanvasEl,b=O.transformCoordWithViewport,L=typeof window<"u"&&!!window.addEventListener,T=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,C=[];function f(x,a,i,n){return i=i||{},n||!F.canvasSupported?v(x,a,i):F.browser.firefox&&a.layerX!=null&&a.layerX!==a.offsetX?(i.zrX=a.layerX,i.zrY=a.layerY):a.offsetX!=null?(i.zrX=a.offsetX,i.zrY=a.offsetY):v(x,a,i),i}function v(x,a,i){if(F.domSupported&&x.getBoundingClientRect){var n=a.clientX,u=a.clientY;if(M(x)){var g=x.getBoundingClientRect();i.zrX=n-g.left,i.zrY=u-g.top;return}else if(b(C,x,n,u)){i.zrX=C[0],i.zrY=C[1];return}}i.zrX=i.zrY=0}function m(x){return x||window.event}function o(x,a,i){if(a=m(a),a.zrX!=null)return a;var n=a.type,u=n&&n.indexOf("touch")>=0;if(!u)f(x,a,a,i),a.zrDelta=a.wheelDelta?a.wheelDelta/120:-(a.detail||0)/3;else{var g=n!=="touchend"?a.targetTouches[0]:a.changedTouches[0];g&&f(x,g,a,i)}var d=a.button;return a.which==null&&d!==void 0&&T.test(a.type)&&(a.which=d&1?1:d&2?3:d&4?2:0),a}function h(x,a,i,n){L?x.addEventListener(a,i,n):x.attachEvent("on"+a,i)}function l(x,a,i,n){L?x.removeEventListener(a,i,n):x.detachEvent("on"+a,i)}var r=L?function(x){x.preventDefault(),x.stopPropagation(),x.cancelBubble=!0}:function(x){x.returnValue=!1,x.cancelBubble=!0};function s(x){return x.which===2||x.which===3}function c(x){return x.which>1}z.clientToLocal=f,z.getNativeEvent=m,z.normalizeEvent=o,z.addEventListener=h,z.removeEventListener=l,z.stop=r,z.isMiddleOrRightButtonOnMouseUpDown=s,z.notLeftMouse=c},709991:function(X,z){var e=Math.log(2);function E(O,M,b,L,T,C){var f=L+"-"+T,v=O.length;if(C.hasOwnProperty(f))return C[f];if(M===1){var m=Math.round(Math.log((1<<v)-1&~T)/e);return O[b][m]}for(var o=L|1<<b,h=b+1;L&1<<h;)h++;for(var l=0,r=0,s=0;r<v;r++){var c=1<<r;c&T||(l+=(s%2?-1:1)*O[b][r]*E(O,M-1,h,o,T|c,C),s++)}return C[f]=l,l}function F(O,M){var b=[[O[0],O[1],1,0,0,0,-M[0]*O[0],-M[0]*O[1]],[0,0,0,O[0],O[1],1,-M[1]*O[0],-M[1]*O[1]],[O[2],O[3],1,0,0,0,-M[2]*O[2],-M[2]*O[3]],[0,0,0,O[2],O[3],1,-M[3]*O[2],-M[3]*O[3]],[O[4],O[5],1,0,0,0,-M[4]*O[4],-M[4]*O[5]],[0,0,0,O[4],O[5],1,-M[5]*O[4],-M[5]*O[5]],[O[6],O[7],1,0,0,0,-M[6]*O[6],-M[6]*O[7]],[0,0,0,O[6],O[7],1,-M[7]*O[6],-M[7]*O[7]]],L={},T=E(b,8,0,0,0,L);if(T!==0){for(var C=[],f=0;f<8;f++)for(var v=0;v<8;v++)C[v]==null&&(C[v]=0),C[v]+=((f+v)%2?-1:1)*E(b,7,f===0?1:0,1<<f,1<<v,L)/T*M[f];return function(m,o,h){var l=o*C[6]+h*C[7]+1;m[0]=(o*C[0]+h*C[1]+C[2])/l,m[1]=(o*C[3]+h*C[4]+C[5])/l}}}z.buildTransformer=F},788242:function(X){var z=2311;function e(){return z++}X.exports=e},34081:function(X,z,e){var E=e(149500),F=e(656570),O=F.debugMode,M=function(){};O===1&&(M=E.error);var b=M;X.exports=b},343970:function(X,z){var e=typeof Float32Array>"u"?Array:Float32Array;function E(){var v=new e(6);return F(v),v}function F(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=1,v[4]=0,v[5]=0,v}function O(v,m){return v[0]=m[0],v[1]=m[1],v[2]=m[2],v[3]=m[3],v[4]=m[4],v[5]=m[5],v}function M(v,m,o){var h=m[0]*o[0]+m[2]*o[1],l=m[1]*o[0]+m[3]*o[1],r=m[0]*o[2]+m[2]*o[3],s=m[1]*o[2]+m[3]*o[3],c=m[0]*o[4]+m[2]*o[5]+m[4],x=m[1]*o[4]+m[3]*o[5]+m[5];return v[0]=h,v[1]=l,v[2]=r,v[3]=s,v[4]=c,v[5]=x,v}function b(v,m,o){return v[0]=m[0],v[1]=m[1],v[2]=m[2],v[3]=m[3],v[4]=m[4]+o[0],v[5]=m[5]+o[1],v}function L(v,m,o){var h=m[0],l=m[2],r=m[4],s=m[1],c=m[3],x=m[5],a=Math.sin(o),i=Math.cos(o);return v[0]=h*i+s*a,v[1]=-h*a+s*i,v[2]=l*i+c*a,v[3]=-l*a+i*c,v[4]=i*r+a*x,v[5]=i*x-a*r,v}function T(v,m,o){var h=o[0],l=o[1];return v[0]=m[0]*h,v[1]=m[1]*l,v[2]=m[2]*h,v[3]=m[3]*l,v[4]=m[4]*h,v[5]=m[5]*l,v}function C(v,m){var o=m[0],h=m[2],l=m[4],r=m[1],s=m[3],c=m[5],x=o*s-r*h;return x?(x=1/x,v[0]=s*x,v[1]=-r*x,v[2]=-h*x,v[3]=o*x,v[4]=(h*c-s*l)*x,v[5]=(r*l-o*c)*x,v):null}function f(v){var m=E();return O(m,v),m}z.create=E,z.identity=F,z.copy=O,z.mul=M,z.translate=b,z.rotate=L,z.scale=T,z.invert=C,z.clone=f},493318:function(X){var z=32,e=7,E=256;function F(v){for(var m=0;v>=z;)m|=v&1,v>>=1;return v+m}function O(v,m,o,h){var l=m+1;if(l===o)return 1;if(h(v[l++],v[m])<0){for(;l<o&&h(v[l],v[l-1])<0;)l++;M(v,m,l)}else for(;l<o&&h(v[l],v[l-1])>=0;)l++;return l-m}function M(v,m,o){for(o--;m<o;){var h=v[m];v[m++]=v[o],v[o--]=h}}function b(v,m,o,h,l){for(h===m&&h++;h<o;h++){for(var r=v[h],s=m,c=h,x;s<c;)x=s+c>>>1,l(r,v[x])<0?c=x:s=x+1;var a=h-s;switch(a){case 3:v[s+3]=v[s+2];case 2:v[s+2]=v[s+1];case 1:v[s+1]=v[s];break;default:for(;a>0;)v[s+a]=v[s+a-1],a--}v[s]=r}}function L(v,m,o,h,l,r){var s=0,c=0,x=1;if(r(v,m[o+l])>0){for(c=h-l;x<c&&r(v,m[o+l+x])>0;)s=x,x=(x<<1)+1,x<=0&&(x=c);x>c&&(x=c),s+=l,x+=l}else{for(c=l+1;x<c&&r(v,m[o+l-x])<=0;)s=x,x=(x<<1)+1,x<=0&&(x=c);x>c&&(x=c);var a=s;s=l-x,x=l-a}for(s++;s<x;){var i=s+(x-s>>>1);r(v,m[o+i])>0?s=i+1:x=i}return x}function T(v,m,o,h,l,r){var s=0,c=0,x=1;if(r(v,m[o+l])<0){for(c=l+1;x<c&&r(v,m[o+l-x])<0;)s=x,x=(x<<1)+1,x<=0&&(x=c);x>c&&(x=c);var a=s;s=l-x,x=l-a}else{for(c=h-l;x<c&&r(v,m[o+l+x])>=0;)s=x,x=(x<<1)+1,x<=0&&(x=c);x>c&&(x=c),s+=l,x+=l}for(s++;s<x;){var i=s+(x-s>>>1);r(v,m[o+i])<0?x=i:s=i+1}return x}function C(v,m){var o=e,h=0,l=E,r=0,s,c,x=0;h=v.length,h<2*E&&(l=h>>>1);var a=[];r=h<120?5:h<1542?10:h<119151?19:40,s=[],c=[];function i(p,w){s[x]=p,c[x]=w,x+=1}function n(){for(;x>1;){var p=x-2;if(p>=1&&c[p-1]<=c[p]+c[p+1]||p>=2&&c[p-2]<=c[p]+c[p-1])c[p-1]<c[p+1]&&p--;else if(c[p]>c[p+1])break;g(p)}}function u(){for(;x>1;){var p=x-2;p>0&&c[p-1]<c[p+1]&&p--,g(p)}}function g(p){var w=s[p],S=c[p],R=s[p+1],B=c[p+1];c[p]=S+B,p===x-3&&(s[p+1]=s[p+2],c[p+1]=c[p+2]),x--;var k=T(v[R],v,w,S,0,m);w+=k,S-=k,S!==0&&(B=L(v[w+S-1],v,R,B,B-1,m),B!==0&&(S<=B?d(w,S,R,B):y(w,S,R,B)))}function d(p,w,S,R){var B=0;for(B=0;B<w;B++)a[B]=v[p+B];var k=0,P=S,D=p;if(v[D++]=v[P++],--R===0){for(B=0;B<w;B++)v[D+B]=a[k+B];return}if(w===1){for(B=0;B<R;B++)v[D+B]=v[P+B];v[D+R]=a[k];return}for(var A=o,N,I,G;;){N=0,I=0,G=!1;do if(m(v[P],a[k])<0){if(v[D++]=v[P++],I++,N=0,--R===0){G=!0;break}}else if(v[D++]=a[k++],N++,I=0,--w===1){G=!0;break}while((N|I)<A);if(G)break;do{if(N=T(v[P],a,k,w,0,m),N!==0){for(B=0;B<N;B++)v[D+B]=a[k+B];if(D+=N,k+=N,w-=N,w<=1){G=!0;break}}if(v[D++]=v[P++],--R===0){G=!0;break}if(I=L(a[k],v,P,R,0,m),I!==0){for(B=0;B<I;B++)v[D+B]=v[P+B];if(D+=I,P+=I,R-=I,R===0){G=!0;break}}if(v[D++]=a[k++],--w===1){G=!0;break}A--}while(N>=e||I>=e);if(G)break;A<0&&(A=0),A+=2}if(o=A,o<1&&(o=1),w===1){for(B=0;B<R;B++)v[D+B]=v[P+B];v[D+R]=a[k]}else{if(w===0)throw new Error;for(B=0;B<w;B++)v[D+B]=a[k+B]}}function y(p,w,S,R){var B=0;for(B=0;B<R;B++)a[B]=v[S+B];var k=p+w-1,P=R-1,D=S+R-1,A=0,N=0;if(v[D--]=v[k--],--w===0){for(A=D-(R-1),B=0;B<R;B++)v[A+B]=a[B];return}if(R===1){for(D-=w,k-=w,N=D+1,A=k+1,B=w-1;B>=0;B--)v[N+B]=v[A+B];v[D]=a[P];return}for(var I=o;;){var G=0,W=0,Z=!1;do if(m(a[P],v[k])<0){if(v[D--]=v[k--],G++,W=0,--w===0){Z=!0;break}}else if(v[D--]=a[P--],W++,G=0,--R===1){Z=!0;break}while((G|W)<I);if(Z)break;do{if(G=w-T(a[P],v,p,w,w-1,m),G!==0){for(D-=G,k-=G,w-=G,N=D+1,A=k+1,B=G-1;B>=0;B--)v[N+B]=v[A+B];if(w===0){Z=!0;break}}if(v[D--]=a[P--],--R===1){Z=!0;break}if(W=R-L(v[k],a,0,R,R-1,m),W!==0){for(D-=W,P-=W,R-=W,N=D+1,A=P+1,B=0;B<W;B++)v[N+B]=a[A+B];if(R<=1){Z=!0;break}}if(v[D--]=v[k--],--w===0){Z=!0;break}I--}while(G>=e||W>=e);if(Z)break;I<0&&(I=0),I+=2}if(o=I,o<1&&(o=1),R===1){for(D-=w,k-=w,N=D+1,A=k+1,B=w-1;B>=0;B--)v[N+B]=v[A+B];v[D]=a[P]}else{if(R===0)throw new Error;for(A=D-(R-1),B=0;B<R;B++)v[A+B]=a[B]}}this.mergeRuns=n,this.forceMergeRuns=u,this.pushRun=i}function f(v,m,o,h){o||(o=0),h||(h=v.length);var l=h-o;if(!(l<2)){var r=0;if(l<z){r=O(v,o,h,m),b(v,o,h,o+r,m);return}var s=new C(v,m),c=F(l);do{if(r=O(v,o,h,m),r<c){var x=l;x>c&&(x=c),b(v,o,o+x,o+r,m),r=x}s.pushRun(o,r),s.mergeRuns(),l-=r,o+=r}while(l!==0);s.forceMergeRuns()}}X.exports=f},131879:function(X,z){var e={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},E={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},F=Object.prototype.toString,O=Array.prototype,M=O.forEach,b=O.filter,L=O.slice,T=O.map,C=O.reduce,f={};function v(rt,ht){rt==="createCanvas"&&(c=null),f[rt]=ht}function m(rt){if(rt==null||typeof rt!="object")return rt;var ht=rt,Pt=F.call(rt);if(Pt==="[object Array]"){if(!Q(rt)){ht=[];for(var wt=0,Mt=rt.length;wt<Mt;wt++)ht[wt]=m(rt[wt])}}else if(E[Pt]){if(!Q(rt)){var Ft=rt.constructor;if(rt.constructor.from)ht=Ft.from(rt);else{ht=new Ft(rt.length);for(var wt=0,Mt=rt.length;wt<Mt;wt++)ht[wt]=m(rt[wt])}}}else if(!e[Pt]&&!Q(rt)&&!I(rt)){ht={};for(var Dt in rt)rt.hasOwnProperty(Dt)&&(ht[Dt]=m(rt[Dt]))}return ht}function o(rt,ht,Pt){if(!D(ht)||!D(rt))return Pt?m(ht):rt;for(var wt in ht)if(ht.hasOwnProperty(wt)){var Mt=rt[wt],Ft=ht[wt];D(Ft)&&D(Mt)&&!B(Ft)&&!B(Mt)&&!I(Ft)&&!I(Mt)&&!A(Ft)&&!A(Mt)&&!Q(Ft)&&!Q(Mt)?o(Mt,Ft,Pt):(Pt||!(wt in rt))&&(rt[wt]=m(ht[wt],!0))}return rt}function h(rt,ht){for(var Pt=rt[0],wt=1,Mt=rt.length;wt<Mt;wt++)Pt=o(Pt,rt[wt],ht);return Pt}function l(rt,ht){for(var Pt in ht)ht.hasOwnProperty(Pt)&&(rt[Pt]=ht[Pt]);return rt}function r(rt,ht,Pt){for(var wt in ht)ht.hasOwnProperty(wt)&&(Pt?ht[wt]!=null:rt[wt]==null)&&(rt[wt]=ht[wt]);return rt}var s=function(){return f.createCanvas()};f.createCanvas=function(){return document.createElement("canvas")};var c;function x(){return c||(c=s().getContext("2d")),c}function a(rt,ht){if(rt){if(rt.indexOf)return rt.indexOf(ht);for(var Pt=0,wt=rt.length;Pt<wt;Pt++)if(rt[Pt]===ht)return Pt}return-1}function i(rt,ht){var Pt=rt.prototype;function wt(){}wt.prototype=ht.prototype,rt.prototype=new wt;for(var Mt in Pt)Pt.hasOwnProperty(Mt)&&(rt.prototype[Mt]=Pt[Mt]);rt.prototype.constructor=rt,rt.superClass=ht}function n(rt,ht,Pt){rt="prototype"in rt?rt.prototype:rt,ht="prototype"in ht?ht.prototype:ht,r(rt,ht,Pt)}function u(rt){if(rt)return typeof rt=="string"?!1:typeof rt.length=="number"}function g(rt,ht,Pt){if(rt&&ht)if(rt.forEach&&rt.forEach===M)rt.forEach(ht,Pt);else if(rt.length===+rt.length)for(var wt=0,Mt=rt.length;wt<Mt;wt++)ht.call(Pt,rt[wt],wt,rt);else for(var Ft in rt)rt.hasOwnProperty(Ft)&&ht.call(Pt,rt[Ft],Ft,rt)}function d(rt,ht,Pt){if(rt&&ht){if(rt.map&&rt.map===T)return rt.map(ht,Pt);for(var wt=[],Mt=0,Ft=rt.length;Mt<Ft;Mt++)wt.push(ht.call(Pt,rt[Mt],Mt,rt));return wt}}function y(rt,ht,Pt,wt){if(rt&&ht){if(rt.reduce&&rt.reduce===C)return rt.reduce(ht,Pt,wt);for(var Mt=0,Ft=rt.length;Mt<Ft;Mt++)Pt=ht.call(wt,Pt,rt[Mt],Mt,rt);return Pt}}function p(rt,ht,Pt){if(rt&&ht){if(rt.filter&&rt.filter===b)return rt.filter(ht,Pt);for(var wt=[],Mt=0,Ft=rt.length;Mt<Ft;Mt++)ht.call(Pt,rt[Mt],Mt,rt)&&wt.push(rt[Mt]);return wt}}function w(rt,ht,Pt){if(rt&&ht){for(var wt=0,Mt=rt.length;wt<Mt;wt++)if(ht.call(Pt,rt[wt],wt,rt))return rt[wt]}}function S(rt,ht){var Pt=L.call(arguments,2);return function(){return rt.apply(ht,Pt.concat(L.call(arguments)))}}function R(rt){var ht=L.call(arguments,1);return function(){return rt.apply(this,ht.concat(L.call(arguments)))}}function B(rt){return F.call(rt)==="[object Array]"}function k(rt){return typeof rt=="function"}function P(rt){return F.call(rt)==="[object String]"}function D(rt){var ht=typeof rt;return ht==="function"||!!rt&&ht==="object"}function A(rt){return!!e[F.call(rt)]}function N(rt){return!!E[F.call(rt)]}function I(rt){return typeof rt=="object"&&typeof rt.nodeType=="number"&&typeof rt.ownerDocument=="object"}function G(rt){return rt!==rt}function W(rt){for(var ht=0,Pt=arguments.length;ht<Pt;ht++)if(arguments[ht]!=null)return arguments[ht]}function Z(rt,ht){return rt??ht}function H(rt,ht,Pt){return rt??ht??Pt}function U(){return Function.call.apply(L,arguments)}function V(rt){if(typeof rt=="number")return[rt,rt,rt,rt];var ht=rt.length;return ht===2?[rt[0],rt[1],rt[0],rt[1]]:ht===3?[rt[0],rt[1],rt[2],rt[1]]:rt}function Y(rt,ht){if(!rt)throw new Error(ht)}function $(rt){return rt==null?null:typeof rt.trim=="function"?rt.trim():rt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var K="__ec_primitive__";function J(rt){rt[K]=!0}function Q(rt){return rt[K]}function et(rt){var ht=B(rt);this.data={};var Pt=this;rt instanceof et?rt.each(wt):rt&&g(rt,wt);function wt(Mt,Ft){ht?Pt.set(Mt,Ft):Pt.set(Ft,Mt)}}et.prototype={constructor:et,get:function(rt){return this.data.hasOwnProperty(rt)?this.data[rt]:null},set:function(rt,ht){return this.data[rt]=ht},each:function(rt,ht){ht!==void 0&&(rt=S(rt,ht));for(var Pt in this.data)this.data.hasOwnProperty(Pt)&&rt(this.data[Pt],Pt)},removeKey:function(rt){delete this.data[rt]}};function nt(rt){return new et(rt)}function st(rt,ht){for(var Pt=new rt.constructor(rt.length+ht.length),wt=0;wt<rt.length;wt++)Pt[wt]=rt[wt];var Mt=rt.length;for(wt=0;wt<ht.length;wt++)Pt[wt+Mt]=ht[wt];return Pt}function ut(){}z.$override=v,z.clone=m,z.merge=o,z.mergeAll=h,z.extend=l,z.defaults=r,z.createCanvas=s,z.getContext=x,z.indexOf=a,z.inherits=i,z.mixin=n,z.isArrayLike=u,z.each=g,z.map=d,z.reduce=y,z.filter=p,z.find=w,z.bind=S,z.curry=R,z.isArray=B,z.isFunction=k,z.isString=P,z.isObject=D,z.isBuiltInObject=A,z.isTypedArray=N,z.isDom=I,z.eqNaN=G,z.retrieve=W,z.retrieve2=Z,z.retrieve3=H,z.slice=U,z.normalizeCssArray=V,z.assert=Y,z.trim=$,z.setAsPrimitive=J,z.isPrimitive=Q,z.createHashMap=nt,z.concatArray=st,z.noop=ut},912072:function(X,z){var e=typeof Float32Array>"u"?Array:Float32Array;function E(p,w){var S=new e(2);return p==null&&(p=0),w==null&&(w=0),S[0]=p,S[1]=w,S}function F(p,w){return p[0]=w[0],p[1]=w[1],p}function O(p){var w=new e(2);return w[0]=p[0],w[1]=p[1],w}function M(p,w,S){return p[0]=w,p[1]=S,p}function b(p,w,S){return p[0]=w[0]+S[0],p[1]=w[1]+S[1],p}function L(p,w,S,R){return p[0]=w[0]+S[0]*R,p[1]=w[1]+S[1]*R,p}function T(p,w,S){return p[0]=w[0]-S[0],p[1]=w[1]-S[1],p}function C(p){return Math.sqrt(v(p))}var f=C;function v(p){return p[0]*p[0]+p[1]*p[1]}var m=v;function o(p,w,S){return p[0]=w[0]*S[0],p[1]=w[1]*S[1],p}function h(p,w,S){return p[0]=w[0]/S[0],p[1]=w[1]/S[1],p}function l(p,w){return p[0]*w[0]+p[1]*w[1]}function r(p,w,S){return p[0]=w[0]*S,p[1]=w[1]*S,p}function s(p,w){var S=C(w);return S===0?(p[0]=0,p[1]=0):(p[0]=w[0]/S,p[1]=w[1]/S),p}function c(p,w){return Math.sqrt((p[0]-w[0])*(p[0]-w[0])+(p[1]-w[1])*(p[1]-w[1]))}var x=c;function a(p,w){return(p[0]-w[0])*(p[0]-w[0])+(p[1]-w[1])*(p[1]-w[1])}var i=a;function n(p,w){return p[0]=-w[0],p[1]=-w[1],p}function u(p,w,S,R){return p[0]=w[0]+R*(S[0]-w[0]),p[1]=w[1]+R*(S[1]-w[1]),p}function g(p,w,S){var R=w[0],B=w[1];return p[0]=S[0]*R+S[2]*B+S[4],p[1]=S[1]*R+S[3]*B+S[5],p}function d(p,w,S){return p[0]=Math.min(w[0],S[0]),p[1]=Math.min(w[1],S[1]),p}function y(p,w,S){return p[0]=Math.max(w[0],S[0]),p[1]=Math.max(w[1],S[1]),p}z.create=E,z.copy=F,z.clone=O,z.set=M,z.add=b,z.scaleAndAdd=L,z.sub=T,z.len=C,z.length=f,z.lenSquare=v,z.lengthSquare=m,z.mul=o,z.div=h,z.dot=l,z.scale=r,z.normalize=s,z.distance=c,z.dist=x,z.distanceSquare=a,z.distSquare=i,z.negate=n,z.lerp=u,z.applyTransform=g,z.min=d,z.max=y},235641:function(X,z,e){var E=e(519756),F=E.addEventListener,O=E.removeEventListener,M=E.normalizeEvent,b=E.getNativeEvent,L=e(131879),T=e(291212),C=e(358020),f=300,v=C.domSupported,m=function(){var P=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],D=["touchstart","touchend","touchmove"],A={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},N=L.map(P,function(I){var G=I.replace("mouse","pointer");return A.hasOwnProperty(G)?G:I});return{mouse:P,touch:D,pointer:N}}(),o={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]};function h(P){return P==="mousewheel"&&C.browser.firefox?"DOMMouseScroll":P}function l(P){var D=P.pointerType;return D==="pen"||D==="touch"}function r(P){P.touching=!0,P.touchTimer!=null&&(clearTimeout(P.touchTimer),P.touchTimer=null),P.touchTimer=setTimeout(function(){P.touching=!1,P.touchTimer=null},700)}function s(P){P&&(P.zrByTouch=!0)}function c(P,D){return M(P.dom,new a(P,D),!0)}function x(P,D){for(var A=D,N=!1;A&&A.nodeType!==9&&!(N=A.domBelongToZr||A!==D&&A===P.painterRoot);)A=A.parentNode;return N}function a(P,D){this.type=D.type,this.target=this.currentTarget=P.dom,this.pointerType=D.pointerType,this.clientX=D.clientX,this.clientY=D.clientY}var i=a.prototype;i.stopPropagation=i.stopImmediatePropagation=i.preventDefault=L.noop;var n={mousedown:function(P){P=M(this.dom,P),this._mayPointerCapture=[P.zrX,P.zrY],this.trigger("mousedown",P)},mousemove:function(P){P=M(this.dom,P);var D=this._mayPointerCapture;D&&(P.zrX!==D[0]||P.zrY!==D[1])&&w(this,!0),this.trigger("mousemove",P)},mouseup:function(P){P=M(this.dom,P),w(this,!1),this.trigger("mouseup",P)},mouseout:function(P){P=M(this.dom,P),this._pointerCapturing&&(P.zrEventControl="no_globalout");var D=P.toElement||P.relatedTarget;P.zrIsToLocalDOM=x(this,D),this.trigger("mouseout",P)},touchstart:function(P){P=M(this.dom,P),s(P),this._lastTouchMoment=new Date,this.handler.processGesture(P,"start"),n.mousemove.call(this,P),n.mousedown.call(this,P)},touchmove:function(P){P=M(this.dom,P),s(P),this.handler.processGesture(P,"change"),n.mousemove.call(this,P)},touchend:function(P){P=M(this.dom,P),s(P),this.handler.processGesture(P,"end"),n.mouseup.call(this,P),+new Date-this._lastTouchMoment<f&&n.click.call(this,P)},pointerdown:function(P){n.mousedown.call(this,P)},pointermove:function(P){l(P)||n.mousemove.call(this,P)},pointerup:function(P){n.mouseup.call(this,P)},pointerout:function(P){l(P)||n.mouseout.call(this,P)}};L.each(["click","mousewheel","dblclick","contextmenu"],function(P){n[P]=function(D){D=M(this.dom,D),this.trigger(P,D)}});var u={pointermove:function(P){l(P)||u.mousemove.call(this,P)},pointerup:function(P){u.mouseup.call(this,P)},mousemove:function(P){this.trigger("mousemove",P)},mouseup:function(P){var D=this._pointerCapturing;w(this,!1),this.trigger("mouseup",P),D&&(P.zrEventControl="only_globalout",this.trigger("mouseout",P))}};function g(P,D){var A=D.domHandlers;C.pointerEventsSupported?L.each(m.pointer,function(N){y(D,N,function(I){A[N].call(P,I)})}):(C.touchEventsSupported&&L.each(m.touch,function(N){y(D,N,function(I){A[N].call(P,I),r(D)})}),L.each(m.mouse,function(N){y(D,N,function(I){I=b(I),D.touching||A[N].call(P,I)})}))}function d(P,D){C.pointerEventsSupported?L.each(o.pointer,A):C.touchEventsSupported||L.each(o.mouse,A);function A(N){function I(G){G=b(G),x(P,G.target)||(G=c(P,G),D.domHandlers[N].call(P,G))}y(D,N,I,{capture:!0})}}function y(P,D,A,N){P.mounted[D]=A,P.listenerOpts[D]=N,F(P.domTarget,h(D),A,N)}function p(P){var D=P.mounted;for(var A in D)D.hasOwnProperty(A)&&O(P.domTarget,h(A),D[A],P.listenerOpts[A]);P.mounted={}}function w(P,D){if(P._mayPointerCapture=null,v&&P._pointerCapturing^D){P._pointerCapturing=D;var A=P._globalHandlerScope;D?d(P,A):p(A)}}function S(P,D){this.domTarget=P,this.domHandlers=D,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function R(P,D){T.call(this),this.dom=P,this.painterRoot=D,this._localHandlerScope=new S(P,n),v&&(this._globalHandlerScope=new S(document,u)),this._pointerCapturing=!1,this._mayPointerCapture=null,g(this,this._localHandlerScope)}var B=R.prototype;B.dispose=function(){p(this._localHandlerScope),v&&p(this._globalHandlerScope)},B.setCursor=function(P){this.dom.style&&(this.dom.style.cursor=P||"default")},L.mixin(R,T);var k=R;X.exports=k},138096:function(X,z,e){var E=e(254904),F=E.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var O=this.__dirtyPath,M=this.shape.paths,b=0;b<M.length;b++)O=O||M[b].__dirtyPath;this.__dirtyPath=O,this.__dirty=this.__dirty||O},beforeBrush:function(){this._updatePathDirty();for(var O=this.shape.paths||[],M=this.getGlobalScale(),b=0;b<O.length;b++)O[b].path||O[b].createPathProxy(),O[b].path.setScale(M[0],M[1],O[b].segmentIgnoreThreshold)},buildPath:function(O,M){for(var b=M.paths||[],L=0;L<b.length;L++)b[L].buildPath(O,b[L].shape,!0)},afterBrush:function(){for(var O=this.shape.paths||[],M=0;M<O.length;M++)O[M].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),E.prototype.getBoundingRect.call(this)}});X.exports=F},567033:function(X,z,e){var E=e(131879),F=e(792199),O=e(54498),M=e(284423);function b(T){T=T||{},O.call(this,T);for(var C in T)T.hasOwnProperty(C)&&C!=="style"&&(this[C]=T[C]);this.style=new F(T.style,this),this._rect=null,this.__clipPaths=null}b.prototype={constructor:b,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(T){},afterBrush:function(T){},brush:function(T,C){},getBoundingRect:function(){},contain:function(T,C){return this.rectContain(T,C)},traverse:function(T,C){T.call(C,this)},rectContain:function(T,C){var f=this.transformCoordToLocal(T,C),v=this.getBoundingRect();return v.contain(f[0],f[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(T){return this.animate("style",T)},attrKV:function(T,C){T!=="style"?O.prototype.attrKV.call(this,T,C):this.style.set(C)},setStyle:function(T,C){return this.style.set(T,C),this.dirty(!1),this},useStyle:function(T){return this.style=new F(T,this),this.dirty(!1),this},calculateTextPosition:null},E.inherits(b,O),E.mixin(b,M);var L=b;X.exports=L},521260:function(X){var z=function(E){this.colorStops=E||[]};z.prototype={constructor:z,addColorStop:function(E,F){this.colorStops.push({offset:E,color:F})}};var e=z;X.exports=e},311096:function(X,z,e){var E=e(567033),F=e(795946),O=e(131879),M=e(60330);function b(T){E.call(this,T)}b.prototype={constructor:b,type:"image",brush:function(T,C){var f=this.style,v=f.image;f.bind(T,this,C);var m=this._image=M.createOrUpdateImage(v,this._image,this,this.onload);if(!(!m||!M.isImageReady(m))){var o=f.x||0,h=f.y||0,l=f.width,r=f.height,s=m.width/m.height;if(l==null&&r!=null?l=r*s:r==null&&l!=null?r=l/s:l==null&&r==null&&(l=m.width,r=m.height),this.setTransform(T),f.sWidth&&f.sHeight){var c=f.sx||0,x=f.sy||0;T.drawImage(m,c,x,f.sWidth,f.sHeight,o,h,l,r)}else if(f.sx&&f.sy){var c=f.sx,x=f.sy,a=l-c,i=r-x;T.drawImage(m,c,x,a,i,o,h,l,r)}else T.drawImage(m,o,h,l,r);f.text!=null&&(this.restoreTransform(T),this.drawRectText(T,this.getBoundingRect()))}},getBoundingRect:function(){var T=this.style;return this._rect||(this._rect=new F(T.x||0,T.y||0,T.width||0,T.height||0)),this._rect}},O.inherits(b,E);var L=b;X.exports=L},672440:function(X,z,e){var E=e(131879),F=E.inherits,O=e(567033),M=e(795946);function b(C){O.call(this,C),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}b.prototype.incremental=!0,b.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},b.prototype.addDisplayable=function(C,f){f?this._temporaryDisplayables.push(C):this._displayables.push(C),this.dirty()},b.prototype.addDisplayables=function(C,f){f=f||!1;for(var v=0;v<C.length;v++)this.addDisplayable(C[v],f)},b.prototype.eachPendingDisplayable=function(C){for(var f=this._cursor;f<this._displayables.length;f++)C&&C(this._displayables[f]);for(var f=0;f<this._temporaryDisplayables.length;f++)C&&C(this._temporaryDisplayables[f])},b.prototype.update=function(){this.updateTransform();for(var C=this._cursor;C<this._displayables.length;C++){var f=this._displayables[C];f.parent=this,f.update(),f.parent=null}for(var C=0;C<this._temporaryDisplayables.length;C++){var f=this._temporaryDisplayables[C];f.parent=this,f.update(),f.parent=null}},b.prototype.brush=function(C,f){for(var v=this._cursor;v<this._displayables.length;v++){var m=this._displayables[v];m.beforeBrush&&m.beforeBrush(C),m.brush(C,v===this._cursor?null:this._displayables[v-1]),m.afterBrush&&m.afterBrush(C)}this._cursor=v;for(var v=0;v<this._temporaryDisplayables.length;v++){var m=this._temporaryDisplayables[v];m.beforeBrush&&m.beforeBrush(C),m.brush(C,v===0?null:this._temporaryDisplayables[v-1]),m.afterBrush&&m.afterBrush(C)}this._temporaryDisplayables=[],this.notClear=!0};var L=[];b.prototype.getBoundingRect=function(){if(!this._rect){for(var C=new M(1/0,1/0,-1/0,-1/0),f=0;f<this._displayables.length;f++){var v=this._displayables[f],m=v.getBoundingRect().clone();v.needLocalTransform()&&m.applyTransform(v.getLocalTransform(L)),C.union(m)}this._rect=C}return this._rect},b.prototype.contain=function(C,f){var v=this.transformCoordToLocal(C,f),m=this.getBoundingRect();if(m.contain(v[0],v[1]))for(var o=0;o<this._displayables.length;o++){var h=this._displayables[o];if(h.contain(C,f))return!0}return!1},F(b,O);var T=b;X.exports=T},808691:function(X,z,e){var E=e(131879),F=e(521260),O=function(b,L,T,C,f,v){this.x=b??0,this.y=L??0,this.x2=T??1,this.y2=C??0,this.type="linear",this.global=v||!1,F.call(this,f)};O.prototype={constructor:O},E.inherits(O,F);var M=O;X.exports=M},254904:function(X,z,e){var E=e(567033),F=e(131879),O=e(722407),M=e(932150),b=e(908805),L=b.prototype.getCanvasPattern,T=Math.abs,C=new O(!0);function f(m){E.call(this,m),this.path=null}f.prototype={constructor:f,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(m,o){var h=this.style,l=this.path||C,r=h.hasStroke(),s=h.hasFill(),c=h.fill,x=h.stroke,a=s&&!!c.colorStops,i=r&&!!x.colorStops,n=s&&!!c.image,u=r&&!!x.image;if(h.bind(m,this,o),this.setTransform(m),this.__dirty){var g;a&&(g=g||this.getBoundingRect(),this._fillGradient=h.getGradient(m,c,g)),i&&(g=g||this.getBoundingRect(),this._strokeGradient=h.getGradient(m,x,g))}a?m.fillStyle=this._fillGradient:n&&(m.fillStyle=L.call(c,m)),i?m.strokeStyle=this._strokeGradient:u&&(m.strokeStyle=L.call(x,m));var d=h.lineDash,y=h.lineDashOffset,p=!!m.setLineDash,w=this.getGlobalScale();if(l.setScale(w[0],w[1],this.segmentIgnoreThreshold),this.__dirtyPath||d&&!p&&r?(l.beginPath(m),d&&!p&&(l.setLineDash(d),l.setLineDashOffset(y)),this.buildPath(l,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(m.beginPath(),this.path.rebuildPath(m)),s)if(h.fillOpacity!=null){var S=m.globalAlpha;m.globalAlpha=h.fillOpacity*h.opacity,l.fill(m),m.globalAlpha=S}else l.fill(m);if(d&&p&&(m.setLineDash(d),m.lineDashOffset=y),r)if(h.strokeOpacity!=null){var S=m.globalAlpha;m.globalAlpha=h.strokeOpacity*h.opacity,l.stroke(m),m.globalAlpha=S}else l.stroke(m);d&&p&&m.setLineDash([]),h.text!=null&&(this.restoreTransform(m),this.drawRectText(m,this.getBoundingRect()))},buildPath:function(m,o,h){},createPathProxy:function(){this.path=new O},getBoundingRect:function(){var m=this._rect,o=this.style,h=!m;if(h){var l=this.path;l||(l=this.path=new O),this.__dirtyPath&&(l.beginPath(),this.buildPath(l,this.shape,!1)),m=l.getBoundingRect()}if(this._rect=m,o.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=m.clone());if(this.__dirty||h){r.copy(m);var s=o.lineWidth,c=o.strokeNoScale?this.getLineScale():1;o.hasFill()||(s=Math.max(s,this.strokeContainThreshold||4)),c>1e-10&&(r.width+=s/c,r.height+=s/c,r.x-=s/c/2,r.y-=s/c/2)}return r}return m},contain:function(m,o){var h=this.transformCoordToLocal(m,o),l=this.getBoundingRect(),r=this.style;if(m=h[0],o=h[1],l.contain(m,o)){var s=this.path.data;if(r.hasStroke()){var c=r.lineWidth,x=r.strokeNoScale?this.getLineScale():1;if(x>1e-10&&(r.hasFill()||(c=Math.max(c,this.strokeContainThreshold)),M.containStroke(s,c/x,m,o)))return!0}if(r.hasFill())return M.contain(s,m,o)}return!1},dirty:function(m){m==null&&(m=!0),m&&(this.__dirtyPath=m,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(m){return this.animate("shape",m)},attrKV:function(m,o){m==="shape"?(this.setShape(o),this.__dirtyPath=!0,this._rect=null):E.prototype.attrKV.call(this,m,o)},setShape:function(m,o){var h=this.shape;if(h){if(F.isObject(m))for(var l in m)m.hasOwnProperty(l)&&(h[l]=m[l]);else h[m]=o;this.dirty(!0)}return this},getLineScale:function(){var m=this.transform;return m&&T(m[0]-1)>1e-10&&T(m[3]-1)>1e-10?Math.sqrt(T(m[0]*m[3]-m[2]*m[1])):1}},f.extend=function(m){var o=function(l){f.call(this,l),m.style&&this.style.extendFrom(m.style,!1);var r=m.shape;if(r){this.shape=this.shape||{};var s=this.shape;for(var c in r)!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&(s[c]=r[c])}m.init&&m.init.call(this,l)};F.inherits(o,f);for(var h in m)h!=="style"&&h!=="shape"&&(o.prototype[h]=m[h]);return o},F.inherits(f,E);var v=f;X.exports=v},908805:function(X){var z=function(E,F){this.image=E,this.repeat=F,this.type="pattern"};z.prototype.getCanvasPattern=function(E){return E.createPattern(this.image,this.repeat||"repeat")};var e=z;X.exports=e},207539:function(X,z,e){var E=e(131879),F=e(521260),O=function(b,L,T,C,f){this.x=b??.5,this.y=L??.5,this.r=T??.5,this.type="radial",this.global=f||!1,F.call(this,C)};O.prototype={constructor:O},E.inherits(O,F);var M=O;X.exports=M},792199:function(X,z,e){var E=e(679321),F=e(549609),O=F.ContextCachedBy,M=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],b=function(o){this.extendFrom(o,!1)};function L(o,h,l){var r=h.x==null?0:h.x,s=h.x2==null?1:h.x2,c=h.y==null?0:h.y,x=h.y2==null?0:h.y2;h.global||(r=r*l.width+l.x,s=s*l.width+l.x,c=c*l.height+l.y,x=x*l.height+l.y),r=isNaN(r)?0:r,s=isNaN(s)?1:s,c=isNaN(c)?0:c,x=isNaN(x)?0:x;var a=o.createLinearGradient(r,c,s,x);return a}function T(o,h,l){var r=l.width,s=l.height,c=Math.min(r,s),x=h.x==null?.5:h.x,a=h.y==null?.5:h.y,i=h.r==null?.5:h.r;h.global||(x=x*r+l.x,a=a*s+l.y,i=i*c);var n=o.createRadialGradient(x,a,0,x,a,i);return n}b.prototype={constructor:b,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(o,h,l){var r=this,s=l&&l.style,c=!s||o.__attrCachedBy!==O.STYLE_BIND;o.__attrCachedBy=O.STYLE_BIND;for(var x=0;x<M.length;x++){var a=M[x],i=a[0];(c||r[i]!==s[i])&&(o[i]=E(o,i,r[i]||a[1]))}if((c||r.fill!==s.fill)&&(o.fillStyle=r.fill),(c||r.stroke!==s.stroke)&&(o.strokeStyle=r.stroke),(c||r.opacity!==s.opacity)&&(o.globalAlpha=r.opacity==null?1:r.opacity),(c||r.blend!==s.blend)&&(o.globalCompositeOperation=r.blend||"source-over"),this.hasStroke()){var n=r.lineWidth;o.lineWidth=n/(this.strokeNoScale&&h&&h.getLineScale?h.getLineScale():1)}},hasFill:function(){var o=this.fill;return o!=null&&o!=="none"},hasStroke:function(){var o=this.stroke;return o!=null&&o!=="none"&&this.lineWidth>0},extendFrom:function(o,h){if(o)for(var l in o)o.hasOwnProperty(l)&&(h===!0||(h===!1?!this.hasOwnProperty(l):o[l]!=null))&&(this[l]=o[l])},set:function(o,h){typeof o=="string"?this[o]=h:this.extendFrom(o,!0)},clone:function(){var o=new this.constructor;return o.extendFrom(this,!0),o},getGradient:function(o,h,l){for(var r=h.type==="radial"?T:L,s=r(o,h,l),c=h.colorStops,x=0;x<c.length;x++)s.addColorStop(c[x].offset,c[x].color);return s}};for(var C=b.prototype,f=0;f<M.length;f++){var v=M[f];v[0]in C||(C[v[0]]=v[1])}b.getGradient=C.getGradient;var m=b;X.exports=m},835727:function(X,z,e){var E=e(567033),F=e(131879),O=e(872113),M=e(938630),b=e(549609),L=b.ContextCachedBy,T=function(f){E.call(this,f)};T.prototype={constructor:T,type:"text",brush:function(f,v){var m=this.style;this.__dirty&&M.normalizeTextStyle(m,!0),m.fill=m.stroke=m.shadowBlur=m.shadowColor=m.shadowOffsetX=m.shadowOffsetY=null;var o=m.text;if(o!=null&&(o+=""),!M.needDrawText(o,m)){f.__attrCachedBy=L.NONE;return}this.setTransform(f),M.renderText(this,f,o,m,null,v),this.restoreTransform(f)},getBoundingRect:function(){var f=this.style;if(this.__dirty&&M.normalizeTextStyle(f,!0),!this._rect){var v=f.text;v!=null?v+="":v="";var m=O.getBoundingRect(f.text+"",f.font,f.textAlign,f.textVerticalAlign,f.textPadding,f.textLineHeight,f.rich);if(m.x+=f.x||0,m.y+=f.y||0,M.getStroke(f.textStroke,f.textStrokeWidth)){var o=f.textStrokeWidth;m.x-=o/2,m.y-=o/2,m.width+=o,m.height+=o}this._rect=m}return this._rect}},F.inherits(T,E);var C=T;X.exports=C},549609:function(X,z){var e={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},E=9;z.ContextCachedBy=e,z.WILL_BE_RESTORED=E},207805:function(X,z,e){var E=e(358020),F=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];function O(M){return E.browser.ie&&E.browser.version>=11?function(){var b=this.__clipPaths,L=this.style,T;if(b)for(var C=0;C<b.length;C++){var f=b[C],v=f&&f.shape,m=f&&f.type;if(v&&(m==="sector"&&v.startAngle===v.endAngle||m==="rect"&&(!v.width||!v.height))){for(var o=0;o<F.length;o++)F[o][2]=L[F[o][0]],L[F[o][0]]=F[o][1];T=!0;break}}if(M.apply(this,arguments),T)for(var o=0;o<F.length;o++)L[F[o][0]]=F[o][2]}:M}X.exports=O},679321:function(X){var z={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};function e(E,F,O){return z.hasOwnProperty(F)?O*=E.dpr:O}X.exports=e},60330:function(X,z,e){var E=e(221311),F=new E(50);function O(T){if(typeof T=="string"){var C=F.get(T);return C&&C.image}else return T}function M(T,C,f,v,m){if(T)if(typeof T=="string"){if(C&&C.__zrImageSrc===T||!f)return C;var o=F.get(T),h={hostEl:f,cb:v,cbPayload:m};return o?(C=o.image,!L(C)&&o.pending.push(h)):(C=new Image,C.onload=C.onerror=b,F.put(T,C.__cachedImgObj={image:C,pending:[h]}),C.src=C.__zrImageSrc=T),C}else return T;else return C}function b(){var T=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var C=0;C<T.pending.length;C++){var f=T.pending[C],v=f.cb;v&&v(this,f.cbPayload),f.hostEl.dirty()}T.pending.length=0}function L(T){return T&&T.width&&T.height}z.findExistImage=O,z.createOrUpdateImage=M,z.isImageReady=L},93729:function(X,z,e){var E=e(386312),F=e(856181);function O(M,b,L){var T=b.points,C=b.smooth;if(T&&T.length>=2){if(C&&C!=="spline"){var f=F(T,C,L,b.smoothConstraint);M.moveTo(T[0][0],T[0][1]);for(var v=T.length,m=0;m<(L?v:v-1);m++){var o=f[m*2],h=f[m*2+1],l=T[(m+1)%v];M.bezierCurveTo(o[0],o[1],h[0],h[1],l[0],l[1])}}else{C==="spline"&&(T=E(T,L)),M.moveTo(T[0][0],T[0][1]);for(var m=1,r=T.length;m<r;m++)M.lineTo(T[m][0],T[m][1])}L&&M.closePath()}}z.buildPath=O},61798:function(X,z){function e(E,F){var O=F.x,M=F.y,b=F.width,L=F.height,T=F.r,C,f,v,m;b<0&&(O=O+b,b=-b),L<0&&(M=M+L,L=-L),typeof T=="number"?C=f=v=m=T:T instanceof Array?T.length===1?C=f=v=m=T[0]:T.length===2?(C=v=T[0],f=m=T[1]):T.length===3?(C=T[0],f=m=T[1],v=T[2]):(C=T[0],f=T[1],v=T[2],m=T[3]):C=f=v=m=0;var o;C+f>b&&(o=C+f,C*=b/o,f*=b/o),v+m>b&&(o=v+m,v*=b/o,m*=b/o),f+v>L&&(o=f+v,f*=L/o,v*=L/o),C+m>L&&(o=C+m,C*=L/o,m*=L/o),E.moveTo(O+C,M),E.lineTo(O+b-f,M),f!==0&&E.arc(O+b-f,M+f,f,-Math.PI/2,0),E.lineTo(O+b,M+L-v),v!==0&&E.arc(O+b-v,M+L-v,v,0,Math.PI/2),E.lineTo(O+m,M+L),m!==0&&E.arc(O+m,M+L-m,m,Math.PI/2,Math.PI),E.lineTo(O,M+C),C!==0&&E.arc(O+C,M+C,C,Math.PI,Math.PI*1.5)}z.buildPath=e},856181:function(X,z,e){var E=e(912072),F=E.min,O=E.max,M=E.scale,b=E.distance,L=E.add,T=E.clone,C=E.sub;function f(v,m,o,h){var l=[],r=[],s=[],c=[],x,a,i,n;if(h){i=[1/0,1/0],n=[-1/0,-1/0];for(var u=0,g=v.length;u<g;u++)F(i,i,v[u]),O(n,n,v[u]);F(i,i,h[0]),O(n,n,h[1])}for(var u=0,g=v.length;u<g;u++){var d=v[u];if(o)x=v[u?u-1:g-1],a=v[(u+1)%g];else if(u===0||u===g-1){l.push(T(v[u]));continue}else x=v[u-1],a=v[u+1];C(r,a,x),M(r,r,m);var y=b(d,x),p=b(d,a),w=y+p;w!==0&&(y/=w,p/=w),M(s,r,-y),M(c,r,p);var S=L([],d,s),R=L([],d,c);h&&(O(S,S,i),F(S,S,n),O(R,R,i),F(R,R,n)),l.push(S),l.push(R)}return o&&l.push(l.shift()),l}X.exports=f},386312:function(X,z,e){var E=e(912072),F=E.distance;function O(b,L,T,C,f,v,m){var o=(T-b)*.5,h=(C-L)*.5;return(2*(L-T)+o+h)*m+(-3*(L-T)-2*o-h)*v+o*f+L}function M(b,L){for(var T=b.length,C=[],f=0,v=1;v<T;v++)f+=F(b[v-1],b[v]);var m=f/2;m=m<T?T:m;for(var v=0;v<m;v++){var o=v/(m-1)*(L?T:T-1),h=Math.floor(o),l=o-h,r,s=b[h%T],c,x;L?(r=b[(h-1+T)%T],c=b[(h+1)%T],x=b[(h+2)%T]):(r=b[h===0?h:h-1],c=b[h>T-2?T-1:h+1],x=b[h>T-3?T-1:h+2]);var a=l*l,i=l*a;C.push([O(r[0],s[0],c[0],x[0],l,a,i),O(r[1],s[1],c[1],x[1],l,a,i)])}return C}X.exports=M},420538:function(X,z){var e=Math.round;function E(M,b,L){if(b){var T=b.x1,C=b.x2,f=b.y1,v=b.y2;M.x1=T,M.x2=C,M.y1=f,M.y2=v;var m=L&&L.lineWidth;m&&(e(T*2)===e(C*2)&&(M.x1=M.x2=O(T,m,!0)),e(f*2)===e(v*2)&&(M.y1=M.y2=O(f,m,!0)))}}function F(M,b,L){if(b){var T=b.x,C=b.y,f=b.width,v=b.height;M.x=T,M.y=C,M.width=f,M.height=v;var m=L&&L.lineWidth;m&&(M.x=O(T,m,!0),M.y=O(C,m,!0),M.width=Math.max(O(T+f,m,!1)-M.x,f===0?0:1),M.height=Math.max(O(C+v,m,!1)-M.y,v===0?0:1))}}function O(M,b,L){if(!b)return M;var T=e(M*2);return(T+e(b))%2===0?T/2:(T+(L?1:-1))/2}z.subPixelOptimizeLine=E,z.subPixelOptimizeRect=F,z.subPixelOptimize=O},938630:function(X,z,e){var E=e(131879),F=E.retrieve2,O=E.retrieve3,M=E.each,b=E.normalizeCssArray,L=E.isString,T=E.isObject,C=e(872113),f=e(61798),v=e(60330),m=e(679321),o=e(549609),h=o.ContextCachedBy,l=o.WILL_BE_RESTORED,r=C.DEFAULT_FONT,s={left:1,right:1,center:1},c={top:1,bottom:1,middle:1},x=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],a={},i={};function n(Z){return u(Z),M(Z.rich,u),Z}function u(Z){if(Z){Z.font=C.makeFont(Z);var H=Z.textAlign;H==="middle"&&(H="center"),Z.textAlign=H==null||s[H]?H:"left";var U=Z.textVerticalAlign||Z.textBaseline;U==="center"&&(U="middle"),Z.textVerticalAlign=U==null||c[U]?U:"top";var V=Z.textPadding;V&&(Z.textPadding=b(Z.textPadding))}}function g(Z,H,U,V,Y,$){V.rich?y(Z,H,U,V,Y,$):d(Z,H,U,V,Y,$)}function d(Z,H,U,V,Y,$){"use strict";var K=R(V),J,Q=!1,et=H.__attrCachedBy===h.PLAIN_TEXT;$!==l?($&&(J=$.style,Q=!K&&et&&J),H.__attrCachedBy=K?h.NONE:h.PLAIN_TEXT):et&&(H.__attrCachedBy=h.NONE);var nt=V.font||r;(!Q||nt!==(J.font||r))&&(H.font=nt);var st=Z.__computedFont;Z.__styleFont!==nt&&(Z.__styleFont=nt,st=Z.__computedFont=H.font);var ut=V.textPadding,rt=V.textLineHeight,ht=Z.__textCotentBlock;(!ht||Z.__dirtyText)&&(ht=Z.__textCotentBlock=C.parsePlainText(U,st,ut,rt,V.truncate));var Pt=ht.outerHeight,wt=ht.lines,Mt=ht.lineHeight,Ft=P(i,Z,V,Y),Dt=Ft.baseX,Rt=Ft.baseY,Tt=Ft.textAlign||"left",mt=Ft.textVerticalAlign;w(H,V,Y,Dt,Rt);var Nt=C.adjustTextY(Rt,Pt,mt),ct=Dt,vt=Nt;if(K||ut){var Lt=C.getWidth(U,st),Ct=Lt;ut&&(Ct+=ut[1]+ut[3]);var jt=C.adjustTextX(Dt,Ct,Tt);K&&B(Z,H,V,jt,Nt,Ct,Pt),ut&&(ct=G(Dt,Tt,ut),vt+=ut[0])}H.textAlign=Tt,H.textBaseline="middle",H.globalAlpha=V.opacity||1;for(var zt=0;zt<x.length;zt++){var Yt=x[zt],Zt=Yt[0],ft=Yt[1],gt=V[Zt];(!Q||gt!==J[Zt])&&(H[ft]=m(H,ft,gt||Yt[2]))}vt+=Mt/2;var dt=V.textStrokeWidth,lt=Q?J.textStrokeWidth:null,ot=!Q||dt!==lt,it=!Q||ot||V.textStroke!==J.textStroke,yt=A(V.textStroke,dt),Ot=N(V.textFill);if(yt&&(ot&&(H.lineWidth=dt),it&&(H.strokeStyle=yt)),Ot&&(!Q||V.textFill!==J.textFill)&&(H.fillStyle=Ot),wt.length===1)yt&&H.strokeText(wt[0],ct,vt),Ot&&H.fillText(wt[0],ct,vt);else for(var zt=0;zt<wt.length;zt++)yt&&H.strokeText(wt[zt],ct,vt),Ot&&H.fillText(wt[zt],ct,vt),vt+=Mt}function y(Z,H,U,V,Y,$){$!==l&&(H.__attrCachedBy=h.NONE);var K=Z.__textCotentBlock;(!K||Z.__dirtyText)&&(K=Z.__textCotentBlock=C.parseRichText(U,V)),p(Z,H,K,V,Y)}function p(Z,H,U,V,Y){var $=U.width,K=U.outerWidth,J=U.outerHeight,Q=V.textPadding,et=P(i,Z,V,Y),nt=et.baseX,st=et.baseY,ut=et.textAlign,rt=et.textVerticalAlign;w(H,V,Y,nt,st);var ht=C.adjustTextX(nt,K,ut),Pt=C.adjustTextY(st,J,rt),wt=ht,Mt=Pt;Q&&(wt+=Q[3],Mt+=Q[0]);var Ft=wt+$;R(V)&&B(Z,H,V,ht,Pt,K,J);for(var Dt=0;Dt<U.lines.length;Dt++){for(var Rt=U.lines[Dt],Tt=Rt.tokens,mt=Tt.length,Nt=Rt.lineHeight,ct=Rt.width,vt=0,Lt=wt,Ct=Ft,jt=mt-1,zt;vt<mt&&(zt=Tt[vt],!zt.textAlign||zt.textAlign==="left");)S(Z,H,zt,V,Nt,Mt,Lt,"left"),ct-=zt.width,Lt+=zt.width,vt++;for(;jt>=0&&(zt=Tt[jt],zt.textAlign==="right");)S(Z,H,zt,V,Nt,Mt,Ct,"right"),ct-=zt.width,Ct-=zt.width,jt--;for(Lt+=($-(Lt-wt)-(Ft-Ct)-ct)/2;vt<=jt;)zt=Tt[vt],S(Z,H,zt,V,Nt,Mt,Lt+zt.width/2,"center"),Lt+=zt.width,vt++;Mt+=Nt}}function w(Z,H,U,V,Y){if(U&&H.textRotation){var $=H.textOrigin;$==="center"?(V=U.width/2+U.x,Y=U.height/2+U.y):$&&(V=$[0]+U.x,Y=$[1]+U.y),Z.translate(V,Y),Z.rotate(-H.textRotation),Z.translate(-V,-Y)}}function S(Z,H,U,V,Y,$,K,J){var Q=V.rich[U.styleName]||{};Q.text=U.text;var et=U.textVerticalAlign,nt=$+Y/2;et==="top"?nt=$+U.height/2:et==="bottom"&&(nt=$+Y-U.height/2),!U.isLineHolder&&R(Q)&&B(Z,H,Q,J==="right"?K-U.width:J==="center"?K-U.width/2:K,nt-U.height/2,U.width,U.height);var st=U.textPadding;st&&(K=G(K,J,st),nt-=U.height/2-st[2]-U.textHeight/2),D(H,"shadowBlur",O(Q.textShadowBlur,V.textShadowBlur,0)),D(H,"shadowColor",Q.textShadowColor||V.textShadowColor||"transparent"),D(H,"shadowOffsetX",O(Q.textShadowOffsetX,V.textShadowOffsetX,0)),D(H,"shadowOffsetY",O(Q.textShadowOffsetY,V.textShadowOffsetY,0)),D(H,"textAlign",J),D(H,"textBaseline","middle"),D(H,"font",U.font||r);var ut=A(Q.textStroke||V.textStroke,ht),rt=N(Q.textFill||V.textFill),ht=F(Q.textStrokeWidth,V.textStrokeWidth);ut&&(D(H,"lineWidth",ht),D(H,"strokeStyle",ut),H.strokeText(U.text,K,nt)),rt&&(D(H,"fillStyle",rt),H.fillText(U.text,K,nt))}function R(Z){return!!(Z.textBackgroundColor||Z.textBorderWidth&&Z.textBorderColor)}function B(Z,H,U,V,Y,$,K){var J=U.textBackgroundColor,Q=U.textBorderWidth,et=U.textBorderColor,nt=L(J);if(D(H,"shadowBlur",U.textBoxShadowBlur||0),D(H,"shadowColor",U.textBoxShadowColor||"transparent"),D(H,"shadowOffsetX",U.textBoxShadowOffsetX||0),D(H,"shadowOffsetY",U.textBoxShadowOffsetY||0),nt||Q&&et){H.beginPath();var st=U.textBorderRadius;st?f.buildPath(H,{x:V,y:Y,width:$,height:K,r:st}):H.rect(V,Y,$,K),H.closePath()}if(nt)if(D(H,"fillStyle",J),U.fillOpacity!=null){var ut=H.globalAlpha;H.globalAlpha=U.fillOpacity*U.opacity,H.fill(),H.globalAlpha=ut}else H.fill();else if(T(J)){var rt=J.image;rt=v.createOrUpdateImage(rt,null,Z,k,J),rt&&v.isImageReady(rt)&&H.drawImage(rt,V,Y,$,K)}if(Q&&et)if(D(H,"lineWidth",Q),D(H,"strokeStyle",et),U.strokeOpacity!=null){var ut=H.globalAlpha;H.globalAlpha=U.strokeOpacity*U.opacity,H.stroke(),H.globalAlpha=ut}else H.stroke()}function k(Z,H){H.image=Z}function P(Z,H,U,V){var Y=U.x||0,$=U.y||0,K=U.textAlign,J=U.textVerticalAlign;if(V){var Q=U.textPosition;if(Q instanceof Array)Y=V.x+I(Q[0],V.width),$=V.y+I(Q[1],V.height);else{var et=H&&H.calculateTextPosition?H.calculateTextPosition(a,U,V):C.calculateTextPosition(a,U,V);Y=et.x,$=et.y,K=K||et.textAlign,J=J||et.textVerticalAlign}var nt=U.textOffset;nt&&(Y+=nt[0],$+=nt[1])}return Z=Z||{},Z.baseX=Y,Z.baseY=$,Z.textAlign=K,Z.textVerticalAlign=J,Z}function D(Z,H,U){return Z[H]=m(Z,H,U),Z[H]}function A(Z,H){return Z==null||H<=0||Z==="transparent"||Z==="none"?null:Z.image||Z.colorStops?"#000":Z}function N(Z){return Z==null||Z==="none"?null:Z.image||Z.colorStops?"#000":Z}function I(Z,H){return typeof Z=="string"?Z.lastIndexOf("%")>=0?parseFloat(Z)/100*H:parseFloat(Z):Z}function G(Z,H,U){return H==="right"?Z-U[1]:H==="center"?Z+U[3]/2-U[1]/2:Z+U[3]}function W(Z,H){return Z!=null&&(Z||H.textBackgroundColor||H.textBorderWidth&&H.textBorderColor||H.textPadding)}z.normalizeTextStyle=n,z.renderText=g,z.getBoxPosition=P,z.getStroke=A,z.getFill=N,z.parsePercent=I,z.needDrawText=W},284423:function(X,z,e){var E=e(938630),F=e(795946),O=e(549609),M=O.WILL_BE_RESTORED,b=new F,L=function(){};L.prototype={constructor:L,drawRectText:function(C,f){var v=this.style;f=v.textRect||f,this.__dirty&&E.normalizeTextStyle(v,!0);var m=v.text;if(m!=null&&(m+=""),!!E.needDrawText(m,v)){C.save();var o=this.transform;v.transformText?this.setTransform(C):o&&(b.copy(f),b.applyTransform(o),f=b),E.renderText(this,C,m,v,f,M),C.restore()}}};var T=L;X.exports=T},3775:function(X,z,e){var E=e(254904),F=E.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(O,M){var b=M.cx,L=M.cy,T=Math.max(M.r,0),C=M.startAngle,f=M.endAngle,v=M.clockwise,m=Math.cos(C),o=Math.sin(C);O.moveTo(m*T+b,o*T+L),O.arc(b,L,T,C,f,!v)}});X.exports=F},631592:function(X,z,e){var E=e(254904),F=e(912072),O=e(890723),M=O.quadraticSubdivide,b=O.cubicSubdivide,L=O.quadraticAt,T=O.cubicAt,C=O.quadraticDerivativeAt,f=O.cubicDerivativeAt,v=[];function m(h,l,r){var s=h.cpx2,c=h.cpy2;return s===null||c===null?[(r?f:T)(h.x1,h.cpx1,h.cpx2,h.x2,l),(r?f:T)(h.y1,h.cpy1,h.cpy2,h.y2,l)]:[(r?C:L)(h.x1,h.cpx1,h.x2,l),(r?C:L)(h.y1,h.cpy1,h.y2,l)]}var o=E.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(h,l){var r=l.x1,s=l.y1,c=l.x2,x=l.y2,a=l.cpx1,i=l.cpy1,n=l.cpx2,u=l.cpy2,g=l.percent;g!==0&&(h.moveTo(r,s),n==null||u==null?(g<1&&(M(r,a,c,g,v),a=v[1],c=v[2],M(s,i,x,g,v),i=v[1],x=v[2]),h.quadraticCurveTo(a,i,c,x)):(g<1&&(b(r,a,n,c,g,v),a=v[1],n=v[2],c=v[3],b(s,i,u,x,g,v),i=v[1],u=v[2],x=v[3]),h.bezierCurveTo(a,i,n,u,c,x)))},pointAt:function(h){return m(this.shape,h,!1)},tangentAt:function(h){var l=m(this.shape,h,!0);return F.normalize(l,l)}});X.exports=o},70654:function(X,z,e){var E=e(254904),F=E.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(O,M,b){b&&O.moveTo(M.cx+M.r,M.cy),O.arc(M.cx,M.cy,M.r,0,Math.PI*2,!0)}});X.exports=F},489886:function(X,z,e){var E=e(254904),F=E.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(O,M){var b=.5522848,L=M.cx,T=M.cy,C=M.rx,f=M.ry,v=C*b,m=f*b;O.moveTo(L-C,T),O.bezierCurveTo(L-C,T-m,L-v,T-f,L,T-f),O.bezierCurveTo(L+v,T-f,L+C,T-m,L+C,T),O.bezierCurveTo(L+C,T+m,L+v,T+f,L,T+f),O.bezierCurveTo(L-v,T+f,L-C,T+m,L-C,T),O.closePath()}});X.exports=F},13484:function(X,z,e){var E=e(254904),F=e(420538),O=F.subPixelOptimizeLine,M={},b=E.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(L,T){var C,f,v,m;this.subPixelOptimize?(O(M,T,this.style),C=M.x1,f=M.y1,v=M.x2,m=M.y2):(C=T.x1,f=T.y1,v=T.x2,m=T.y2);var o=T.percent;o!==0&&(L.moveTo(C,f),o<1&&(v=C*(1-o)+v*o,m=f*(1-o)+m*o),L.lineTo(v,m))},pointAt:function(L){var T=this.shape;return[T.x1*(1-L)+T.x2*L,T.y1*(1-L)+T.y2*L]}});X.exports=b},455370:function(X,z,e){var E=e(254904),F=e(93729),O=E.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(M,b){F.buildPath(M,b,!0)}});X.exports=O},162190:function(X,z,e){var E=e(254904),F=e(93729),O=E.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(M,b){F.buildPath(M,b,!1)}});X.exports=O},668518:function(X,z,e){var E=e(254904),F=e(61798),O=e(420538),M=O.subPixelOptimizeRect,b={},L=E.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(T,C){var f,v,m,o;this.subPixelOptimize?(M(b,C,this.style),f=b.x,v=b.y,m=b.width,o=b.height,b.r=C.r,C=b):(f=C.x,v=C.y,m=C.width,o=C.height),C.r?F.buildPath(T,C):T.rect(f,v,m,o),T.closePath()}});X.exports=L},819574:function(X,z,e){var E=e(254904),F=E.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(O,M){var b=M.cx,L=M.cy,T=Math.PI*2;O.moveTo(b+M.r,L),O.arc(b,L,M.r,0,T,!1),O.moveTo(b+M.r0,L),O.arc(b,L,M.r0,0,T,!0)}});X.exports=F},599315:function(X,z,e){var E=e(254904),F=e(207805),O=E.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},brush:F(E.prototype.brush),buildPath:function(M,b){var L=b.cx,T=b.cy,C=Math.max(b.r0||0,0),f=Math.max(b.r,0),v=b.startAngle,m=b.endAngle,o=b.clockwise,h=Math.cos(v),l=Math.sin(v);M.moveTo(h*C+L,l*C+T),M.lineTo(h*f+L,l*f+T),M.arc(L,T,f,v,m,!o),M.lineTo(Math.cos(m)*C+L,Math.sin(m)*C+T),C!==0&&M.arc(L,T,C,m,v,o),M.closePath()}});X.exports=O},849950:function(X,z,e){var E=e(588503),F=e(34081),O=e(131879),M=O.isString,b=O.isFunction,L=O.isObject,T=O.isArrayLike,C=O.indexOf,f=function(){this.animators=[]};f.prototype={constructor:f,animate:function(l,r){var s,c=!1,x=this,a=this.__zr;if(l){var i=l.split("."),n=x;c=i[0]==="shape";for(var u=0,g=i.length;u<g;u++)n&&(n=n[i[u]]);n&&(s=n)}else s=x;if(!s){F('Property "'+l+'" is not existed in element '+x.id);return}var d=x.animators,y=new E(s,r);return y.during(function(p){x.dirty(c)}).done(function(){d.splice(C(d,y),1)}),d.push(y),a&&a.animation.addAnimator(y),y},stopAnimation:function(l){for(var r=this.animators,s=r.length,c=0;c<s;c++)r[c].stop(l);return r.length=0,this},animateTo:function(l,r,s,c,x,a){v(this,l,r,s,c,x,a)},animateFrom:function(l,r,s,c,x,a){v(this,l,r,s,c,x,a,!0)}};function v(l,r,s,c,x,a,i,n){M(c)?(a=x,x=c,c=0):b(x)?(a=x,x="linear",c=0):b(c)?(a=c,c=0):b(s)?(a=s,s=500):s||(s=500),l.stopAnimation(),m(l,"",l,r,s,c,n);var u=l.animators.slice(),g=u.length;function d(){g--,g||a&&a()}g||a&&a();for(var y=0;y<u.length;y++)u[y].done(d).start(x,i)}function m(l,r,s,c,x,a,i){var n={},u=0;for(var g in c)c.hasOwnProperty(g)&&(s[g]!=null?L(c[g])&&!T(c[g])?m(l,r?r+"."+g:g,s[g],c[g],x,a,i):(i?(n[g]=s[g],o(l,r,g,c[g])):n[g]=c[g],u++):c[g]!=null&&!i&&o(l,r,g,c[g]));u>0&&l.animate(r,!1).when(x??500,n).delay(a||0)}function o(l,r,s,c){if(!r)l.attr(s,c);else{var x={};x[r]={},x[r][s]=c,l.attr(x)}}var h=f;X.exports=h},886281:function(X){function z(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}z.prototype={constructor:z,_dragStart:function(F){for(var O=F.target;O&&!O.draggable;)O=O.parent;O&&(this._draggingTarget=O,O.dragging=!0,this._x=F.offsetX,this._y=F.offsetY,this.dispatchToElement(e(O,F),"dragstart",F.event))},_drag:function(F){var O=this._draggingTarget;if(O){var M=F.offsetX,b=F.offsetY,L=M-this._x,T=b-this._y;this._x=M,this._y=b,O.drift(L,T,F),this.dispatchToElement(e(O,F),"drag",F.event);var C=this.findHover(M,b,O).target,f=this._dropTarget;this._dropTarget=C,O!==C&&(f&&C!==f&&this.dispatchToElement(e(f,F),"dragleave",F.event),C&&C!==f&&this.dispatchToElement(e(C,F),"dragenter",F.event))}},_dragEnd:function(F){var O=this._draggingTarget;O&&(O.dragging=!1),this.dispatchToElement(e(O,F),"dragend",F.event),this._dropTarget&&this.dispatchToElement(e(this._dropTarget,F),"drop",F.event),this._draggingTarget=null,this._dropTarget=null}};function e(F,O){return{target:F,topTarget:O&&O.topTarget}}var E=z;X.exports=E},291212:function(X){var z=Array.prototype.slice,e=function(M){this._$handlers={},this._$eventProcessor=M};e.prototype={constructor:e,one:function(M,b,L,T){return F(this,M,b,L,T,!0)},on:function(M,b,L,T){return F(this,M,b,L,T,!1)},isSilent:function(M){var b=this._$handlers;return!b[M]||!b[M].length},off:function(M,b){var L=this._$handlers;if(!M)return this._$handlers={},this;if(b){if(L[M]){for(var T=[],C=0,f=L[M].length;C<f;C++)L[M][C].h!==b&&T.push(L[M][C]);L[M]=T}L[M]&&L[M].length===0&&delete L[M]}else delete L[M];return this},trigger:function(M){var b=this._$handlers[M],L=this._$eventProcessor;if(b){var T=arguments,C=T.length;C>3&&(T=z.call(T,1));for(var f=b.length,v=0;v<f;){var m=b[v];if(L&&L.filter&&m.query!=null&&!L.filter(M,m.query)){v++;continue}switch(C){case 1:m.h.call(m.ctx);break;case 2:m.h.call(m.ctx,T[1]);break;case 3:m.h.call(m.ctx,T[1],T[2]);break;default:m.h.apply(m.ctx,T);break}m.one?(b.splice(v,1),f--):v++}}return L&&L.afterTrigger&&L.afterTrigger(M),this},triggerWithContext:function(M){var b=this._$handlers[M],L=this._$eventProcessor;if(b){var T=arguments,C=T.length;C>4&&(T=z.call(T,1,T.length-1));for(var f=T[T.length-1],v=b.length,m=0;m<v;){var o=b[m];if(L&&L.filter&&o.query!=null&&!L.filter(M,o.query)){m++;continue}switch(C){case 1:o.h.call(f);break;case 2:o.h.call(f,T[1]);break;case 3:o.h.call(f,T[1],T[2]);break;default:o.h.apply(f,T);break}o.one?(b.splice(m,1),v--):m++}}return L&&L.afterTrigger&&L.afterTrigger(M),this}};function E(M,b){var L=M._$eventProcessor;return b!=null&&L&&L.normalizeQuery&&(b=L.normalizeQuery(b)),b}function F(M,b,L,T,C,f){var v=M._$handlers;if(typeof L=="function"&&(C=T,T=L,L=null),!T||!b)return M;L=E(M,L),v[b]||(v[b]=[]);for(var m=0;m<v[b].length;m++)if(v[b][m].h===T)return M;var o={h:T,one:f,query:L,ctx:C||M,callAtLast:T.zrEventfulCallAtLast},h=v[b].length-1,l=v[b][h];return l&&l.callAtLast?v[b].splice(h,0,o):v[b].push(o),M}var O=e;X.exports=O},451218:function(X,z,e){var E=e(343970),F=e(912072),O=E.identity,M=5e-5;function b(o){return o>M||o<-M}var L=function(o){o=o||{},o.position||(this.position=[0,0]),o.rotation==null&&(this.rotation=0),o.scale||(this.scale=[1,1]),this.origin=this.origin||null},T=L.prototype;T.transform=null,T.needLocalTransform=function(){return b(this.rotation)||b(this.position[0])||b(this.position[1])||b(this.scale[0]-1)||b(this.scale[1]-1)};var C=[];T.updateTransform=function(){var o=this.parent,h=o&&o.transform,l=this.needLocalTransform(),r=this.transform;if(!(l||h)){r&&O(r);return}r=r||E.create(),l?this.getLocalTransform(r):O(r),h&&(l?E.mul(r,o.transform,r):E.copy(r,o.transform)),this.transform=r;var s=this.globalScaleRatio;if(s!=null&&s!==1){this.getGlobalScale(C);var c=C[0]<0?-1:1,x=C[1]<0?-1:1,a=((C[0]-c)*s+c)/C[0]||0,i=((C[1]-x)*s+x)/C[1]||0;r[0]*=a,r[1]*=a,r[2]*=i,r[3]*=i}this.invTransform=this.invTransform||E.create(),E.invert(this.invTransform,r)},T.getLocalTransform=function(o){return L.getLocalTransform(this,o)},T.setTransform=function(o){var h=this.transform,l=o.dpr||1;h?o.setTransform(l*h[0],l*h[1],l*h[2],l*h[3],l*h[4],l*h[5]):o.setTransform(l,0,0,l,0,0)},T.restoreTransform=function(o){var h=o.dpr||1;o.setTransform(h,0,0,h,0,0)};var f=[],v=E.create();T.setLocalTransform=function(o){if(o){var h=o[0]*o[0]+o[1]*o[1],l=o[2]*o[2]+o[3]*o[3],r=this.position,s=this.scale;b(h-1)&&(h=Math.sqrt(h)),b(l-1)&&(l=Math.sqrt(l)),o[0]<0&&(h=-h),o[3]<0&&(l=-l),r[0]=o[4],r[1]=o[5],s[0]=h,s[1]=l,this.rotation=Math.atan2(-o[1]/l,o[0]/h)}},T.decomposeTransform=function(){if(this.transform){var o=this.parent,h=this.transform;o&&o.transform&&(E.mul(f,o.invTransform,h),h=f);var l=this.origin;l&&(l[0]||l[1])&&(v[4]=l[0],v[5]=l[1],E.mul(f,h,v),f[4]-=l[0],f[5]-=l[1],h=f),this.setLocalTransform(h)}},T.getGlobalScale=function(o){var h=this.transform;return o=o||[],h?(o[0]=Math.sqrt(h[0]*h[0]+h[1]*h[1]),o[1]=Math.sqrt(h[2]*h[2]+h[3]*h[3]),h[0]<0&&(o[0]=-o[0]),h[3]<0&&(o[1]=-o[1]),o):(o[0]=1,o[1]=1,o)},T.transformCoordToLocal=function(o,h){var l=[o,h],r=this.invTransform;return r&&F.applyTransform(l,l,r),l},T.transformCoordToGlobal=function(o,h){var l=[o,h],r=this.transform;return r&&F.applyTransform(l,l,r),l},L.getLocalTransform=function(o,h){h=h||[],O(h);var l=o.origin,r=o.scale||[1,1],s=o.rotation||0,c=o.position||[0,0];return l&&(h[4]-=l[0],h[5]-=l[1]),E.scale(h,h,r),s&&E.rotate(h,h,s),l&&(h[4]+=l[0],h[5]+=l[1]),h[4]+=c[0],h[5]+=c[1],h};var m=L;X.exports=m},258744:function(X,z,e){var E=e(800865),F=E.createElement,O=e(131879),M=e(34081),b=e(254904),L=e(311096),T=e(835727),C=e(614107),f=e(124438),v=e(536057),m=e(571830),o=e(272698),h=o.path,l=o.image,r=o.text;function s(w){return parseInt(w,10)}function c(w){return w instanceof b?h:w instanceof L?l:w instanceof T?r:h}function x(w,S){return S&&w&&S.parentNode!==w}function a(w,S,R){if(x(w,S)&&R){var B=R.nextSibling;B?w.insertBefore(S,B):w.appendChild(S)}}function i(w,S){if(x(w,S)){var R=w.firstChild;R?w.insertBefore(S,R):w.appendChild(S)}}function n(w,S){S&&w&&S.parentNode===w&&w.removeChild(S)}function u(w){return w.__textSvgEl}function g(w){return w.__svgEl}var d=function(w,S,R,B){this.root=w,this.storage=S,this._opts=R=O.extend({},R||{});var k=F("svg");k.setAttribute("xmlns","http://www.w3.org/2000/svg"),k.setAttribute("version","1.1"),k.setAttribute("baseProfile","full"),k.style.cssText="user-select:none;position:absolute;left:0;top:0;";var P=F("g");k.appendChild(P);var D=F("g");k.appendChild(D),this.gradientManager=new f(B,D),this.clipPathManager=new v(B,D),this.shadowManager=new m(B,D);var A=document.createElement("div");A.style.cssText="overflow:hidden;position:relative",this._svgDom=k,this._svgRoot=D,this._backgroundRoot=P,this._viewport=A,w.appendChild(A),A.appendChild(k),this.resize(R.width,R.height),this._visibleList=[]};d.prototype={constructor:d,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var w=this.getViewportRoot();if(w)return{offsetLeft:w.offsetLeft||0,offsetTop:w.offsetTop||0}},refresh:function(){var w=this.storage.getDisplayList(!0);this._paintList(w)},setBackgroundColor:function(w){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var S=F("rect");S.setAttribute("width",this.getWidth()),S.setAttribute("height",this.getHeight()),S.setAttribute("x",0),S.setAttribute("y",0),S.setAttribute("id",0),S.style.fill=w,this._backgroundRoot.appendChild(S),this._backgroundNode=S},_paintList:function(w){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var S=this._svgRoot,R=this._visibleList,B=w.length,k=[],P;for(P=0;P<B;P++){var D=w[P],A=c(D),N=g(D)||u(D);D.invisible||(D.__dirty&&(A&&A.brush(D),this.clipPathManager.update(D),D.style&&(this.gradientManager.update(D.style.fill),this.gradientManager.update(D.style.stroke),this.shadowManager.update(N,D)),D.__dirty=!1),k.push(D))}var I=C(R,k),G;for(P=0;P<I.length;P++){var W=I[P];if(W.removed)for(var Z=0;Z<W.count;Z++){var D=R[W.indices[Z]],N=g(D),H=u(D);n(S,N),n(S,H)}}for(P=0;P<I.length;P++){var W=I[P];if(W.added)for(var Z=0;Z<W.count;Z++){var D=k[W.indices[Z]],N=g(D),H=u(D);G?a(S,N,G):i(S,N),N?a(S,H,N):G?a(S,H,G):i(S,H),a(S,H,N),G=H||N||G,this.gradientManager.addWithoutUpdate(N||H,D),this.shadowManager.addWithoutUpdate(N||H,D),this.clipPathManager.markUsed(D)}else if(!W.removed)for(var Z=0;Z<W.count;Z++){var D=k[W.indices[Z]],N=g(D),H=u(D),N=g(D),H=u(D);this.gradientManager.markUsed(D),this.gradientManager.addWithoutUpdate(N||H,D),this.shadowManager.markUsed(D),this.shadowManager.addWithoutUpdate(N||H,D),this.clipPathManager.markUsed(D),H&&a(S,H,N),G=N||H||G}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=k},_getDefs:function(w){var S=this._svgDom,R=S.getElementsByTagName("defs");if(R.length===0)if(w){var R=S.insertBefore(F("defs"),S.firstChild);return R.contains||(R.contains=function(k){var P=R.children;if(!P)return!1;for(var D=P.length-1;D>=0;--D)if(P[D]===k)return!0;return!1}),R}else return null;else return R[0]},resize:function(w,S){var R=this._viewport;R.style.display="none";var B=this._opts;if(w!=null&&(B.width=w),S!=null&&(B.height=S),w=this._getSize(0),S=this._getSize(1),R.style.display="",this._width!==w||this._height!==S){this._width=w,this._height=S;var k=R.style;k.width=w+"px",k.height=S+"px";var P=this._svgDom;P.setAttribute("width",w),P.setAttribute("height",S)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",w),this._backgroundNode.setAttribute("height",S))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(w){var S=this._opts,R=["width","height"][w],B=["clientWidth","clientHeight"][w],k=["paddingLeft","paddingTop"][w],P=["paddingRight","paddingBottom"][w];if(S[R]!=null&&S[R]!=="auto")return parseFloat(S[R]);var D=this.root,A=document.defaultView.getComputedStyle(D);return(D[B]||s(A[R])||s(D.style[R]))-(s(A[k])||0)-(s(A[P])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){this.refresh();var w=encodeURIComponent(this._svgDom.outerHTML.replace(/></g,`>
\r<`));return"data:image/svg+xml;charset=UTF-8,"+w}};function y(w){return function(){M('In SVG mode painter not support method "'+w+'"')}}O.each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(w){d.prototype[w]=y(w)});var p=d;X.exports=p},800865:function(X,z){var e="http://www.w3.org/2000/svg";function E(F){return document.createElementNS(e,F)}z.createElement=E},272698:function(X,z,e){var E=e(800865),F=E.createElement,O=e(722407),M=e(795946),b=e(343970),L=e(872113),T=e(938630),C=e(835727),f=O.CMD,v=Array.prototype.join,m="none",o=Math.round,h=Math.sin,l=Math.cos,r=Math.PI,s=Math.PI*2,c=180/r,x=1e-4;function a(H){return o(H*1e4)/1e4}function i(H){return H<x&&H>-x}function n(H,U){var V=U?H.textFill:H.fill;return V!=null&&V!==m}function u(H,U){var V=U?H.textStroke:H.stroke;return V!=null&&V!==m}function g(H,U){U&&d(H,"transform","matrix("+v.call(U,",")+")")}function d(H,U,V){(!V||V.type!=="linear"&&V.type!=="radial")&&H.setAttribute(U,V)}function y(H,U,V){H.setAttributeNS("http://www.w3.org/1999/xlink",U,V)}function p(H,U,V,Y){if(n(U,V)){var $=V?U.textFill:U.fill;$=$==="transparent"?m:$,d(H,"fill",$),d(H,"fill-opacity",U.fillOpacity!=null?U.fillOpacity*U.opacity:U.opacity)}else d(H,"fill",m);if(u(U,V)){var K=V?U.textStroke:U.stroke;K=K==="transparent"?m:K,d(H,"stroke",K);var J=V?U.textStrokeWidth:U.lineWidth,Q=!V&&U.strokeNoScale?Y.getLineScale():1;d(H,"stroke-width",J/Q),d(H,"paint-order",V?"stroke":"fill"),d(H,"stroke-opacity",U.strokeOpacity!=null?U.strokeOpacity:U.opacity);var et=U.lineDash;et?(d(H,"stroke-dasharray",U.lineDash.join(",")),d(H,"stroke-dashoffset",o(U.lineDashOffset||0))):d(H,"stroke-dasharray",""),U.lineCap&&d(H,"stroke-linecap",U.lineCap),U.lineJoin&&d(H,"stroke-linejoin",U.lineJoin),U.miterLimit&&d(H,"stroke-miterlimit",U.miterLimit)}else d(H,"stroke",m)}function w(H){for(var U=[],V=H.data,Y=H.len(),$=0;$<Y;){var K=V[$++],J="",Q=0;switch(K){case f.M:J="M",Q=2;break;case f.L:J="L",Q=2;break;case f.Q:J="Q",Q=4;break;case f.C:J="C",Q=6;break;case f.A:var et=V[$++],nt=V[$++],st=V[$++],ut=V[$++],rt=V[$++],ht=V[$++],Pt=V[$++],wt=V[$++],Mt=Math.abs(ht),Ft=i(Mt-s)||(wt?ht>=s:-ht>=s),Dt=ht>0?ht%s:ht%s+s,Rt=!1;Ft?Rt=!0:i(Mt)?Rt=!1:Rt=Dt>=r==!!wt;var Tt=a(et+st*l(rt)),mt=a(nt+ut*h(rt));Ft&&(wt?ht=s-1e-4:ht=-s+1e-4,Rt=!0,$===9&&U.push("M",Tt,mt));var Nt=a(et+st*l(rt+ht)),ct=a(nt+ut*h(rt+ht));U.push("A",a(st),a(ut),o(Pt*c),+Rt,+wt,Nt,ct);break;case f.Z:J="Z";break;case f.R:var Nt=a(V[$++]),ct=a(V[$++]),vt=a(V[$++]),Lt=a(V[$++]);U.push("M",Nt,ct,"L",Nt+vt,ct,"L",Nt+vt,ct+Lt,"L",Nt,ct+Lt,"L",Nt,ct);break}J&&U.push(J);for(var Ct=0;Ct<Q;Ct++)U.push(a(V[$++]))}return U.join(" ")}var S={};S.brush=function(H){var U=H.style,V=H.__svgEl;V||(V=F("path"),H.__svgEl=V),H.path||H.createPathProxy();var Y=H.path;if(H.__dirtyPath){Y.beginPath(),Y.subPixelOptimize=!1,H.buildPath(Y,H.shape),H.__dirtyPath=!1;var $=w(Y);$.indexOf("NaN")<0&&d(V,"d",$)}p(V,U,!1,H),g(V,H.transform),U.text!=null?N(H,H.getBoundingRect()):Z(H)};var R={};R.brush=function(H){var U=H.style,V=U.image;if(V instanceof HTMLImageElement){var Y=V.src;V=Y}if(V){var $=U.x||0,K=U.y||0,J=U.width,Q=U.height,et=H.__svgEl;et||(et=F("image"),H.__svgEl=et),V!==H.__imageSrc&&(y(et,"href",V),H.__imageSrc=V),d(et,"width",J),d(et,"height",Q),d(et,"x",$),d(et,"y",K),g(et,H.transform),U.text!=null?N(H,H.getBoundingRect()):Z(H)}};var B={},k=new M,P={},D=[],A={left:"start",right:"end",center:"middle",middle:"middle"},N=function(H,U){var V=H.style,Y=H.transform,$=H instanceof C||V.transformText;H.__dirty&&T.normalizeTextStyle(V,!0);var K=V.text;if(K!=null&&(K+=""),!!T.needDrawText(K,V)){K==null&&(K=""),!$&&Y&&(k.copy(U),k.applyTransform(Y),U=k);var J=H.__textSvgEl;J||(J=F("text"),H.__textSvgEl=J);var Q=J.style,et=V.font||L.DEFAULT_FONT,nt=J.__computedFont;et!==J.__styleFont&&(Q.font=J.__styleFont=et,nt=J.__computedFont=Q.font);var st=V.textPadding,ut=V.textLineHeight,rt=H.__textCotentBlock;(!rt||H.__dirtyText)&&(rt=H.__textCotentBlock=L.parsePlainText(K,nt,st,ut,V.truncate));var ht=rt.outerHeight,Pt=rt.lineHeight;T.getBoxPosition(P,H,V,U);var wt=P.baseX,Mt=P.baseY,Ft=P.textAlign||"left",Dt=P.textVerticalAlign;I(J,$,Y,V,U,wt,Mt);var Rt=L.adjustTextY(Mt,ht,Dt),Tt=wt,mt=Rt;st&&(Tt=G(wt,Ft,st),mt+=st[0]),mt+=Pt/2,p(J,V,!0,H);var Nt=rt.canCacheByTextString,ct=H.__tspanList||(H.__tspanList=[]),vt=ct.length;if(Nt&&H.__canCacheByTextString&&H.__text===K){if(H.__dirtyText&&vt)for(var Lt=0;Lt<vt;++Lt)W(ct[Lt],Ft,Tt,mt+Lt*Pt)}else{H.__text=K,H.__canCacheByTextString=Nt;for(var Ct=rt.lines,jt=Ct.length,Lt=0;Lt<jt;Lt++){var zt=ct[Lt],Yt=Ct[Lt];zt?zt.__zrText!==Yt&&(zt.innerHTML="",zt.appendChild(document.createTextNode(Yt))):(zt=ct[Lt]=F("tspan"),J.appendChild(zt),zt.appendChild(document.createTextNode(Yt))),W(zt,Ft,Tt,mt+Lt*Pt)}if(vt>jt){for(;Lt<vt;Lt++)J.removeChild(ct[Lt]);ct.length=jt}}}};function I(H,U,V,Y,$,K,J){b.identity(D),U&&V&&b.copy(D,V);var Q=Y.textRotation;if($&&Q){var et=Y.textOrigin;et==="center"?(K=$.width/2+$.x,J=$.height/2+$.y):et&&(K=et[0]+$.x,J=et[1]+$.y),D[4]-=K,D[5]-=J,b.rotate(D,D,Q),D[4]+=K,D[5]+=J}g(H,D)}function G(H,U,V){return U==="right"?H-V[1]:U==="center"?H+V[3]/2-V[1]/2:H+V[3]}function W(H,U,V,Y){d(H,"dominant-baseline","middle"),d(H,"text-anchor",A[U]),d(H,"x",V),d(H,"y",Y)}function Z(H){H&&H.__textSvgEl&&(H.__textSvgEl.parentNode&&H.__textSvgEl.parentNode.removeChild(H.__textSvgEl),H.__textSvgEl=null,H.__tspanList=[],H.__text=null)}B.drawRectText=N,B.brush=function(H){var U=H.style;U.text!=null?N(H,!1):Z(H)},z.path=S,z.image=R,z.text=B},536057:function(X,z,e){var E=e(624035),F=e(131879),O=e(343970);function M(L,T){E.call(this,L,T,"clipPath","__clippath_in_use__")}F.inherits(M,E),M.prototype.update=function(L){var T=this.getSvgElement(L);T&&this.updateDom(T,L.__clipPaths,!1);var C=this.getTextSvgElement(L);C&&this.updateDom(C,L.__clipPaths,!0),this.markUsed(L)},M.prototype.updateDom=function(L,T,C){if(T&&T.length>0){var f=this.getDefs(!0),v=T[0],m,o,h=C?"_textDom":"_dom";v[h]?(o=v[h].getAttribute("id"),m=v[h],f.contains(m)||f.appendChild(m)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,m=this.createElement("clipPath"),m.setAttribute("id",o),f.appendChild(m),v[h]=m);var l=this.getSvgProxy(v);if(v.transform&&v.parent.invTransform&&!C){var r=Array.prototype.slice.call(v.transform);O.mul(v.transform,v.parent.invTransform,v.transform),l.brush(v),v.transform=r}else l.brush(v);var s=this.getSvgElement(v);m.innerHTML="",m.appendChild(s.cloneNode()),L.setAttribute("clip-path","url(#"+o+")"),T.length>1&&this.updateDom(m,T.slice(1),C)}else L&&L.setAttribute("clip-path","none")},M.prototype.markUsed=function(L){var T=this;L.__clipPaths&&F.each(L.__clipPaths,function(C){C._dom&&E.prototype.markUsed.call(T,C._dom),C._textDom&&E.prototype.markUsed.call(T,C._textDom)})};var b=M;X.exports=b},624035:function(X,z,e){var E=e(800865),F=E.createElement,O=e(131879),M=e(254904),b=e(311096),L=e(835727),T=e(272698),C=T.path,f=T.image,v=T.text,m="0",o="1";function h(r,s,c,x,a){this._zrId=r,this._svgRoot=s,this._tagNames=typeof c=="string"?[c]:c,this._markLabel=x,this._domName=a||"_dom",this.nextId=0}h.prototype.createElement=F,h.prototype.getDefs=function(r){var s=this._svgRoot,c=this._svgRoot.getElementsByTagName("defs");return c.length===0?r?(c=s.insertBefore(this.createElement("defs"),s.firstChild),c.contains||(c.contains=function(x){var a=c.children;if(!a)return!1;for(var i=a.length-1;i>=0;--i)if(a[i]===x)return!0;return!1}),c):null:c[0]},h.prototype.update=function(r,s){if(r){var c=this.getDefs(!1);if(r[this._domName]&&c.contains(r[this._domName]))typeof s=="function"&&s(r);else{var x=this.add(r);x&&(r[this._domName]=x)}}},h.prototype.addDom=function(r){var s=this.getDefs(!0);s.appendChild(r)},h.prototype.removeDom=function(r){var s=this.getDefs(!1);s&&r[this._domName]&&(s.removeChild(r[this._domName]),r[this._domName]=null)},h.prototype.getDoms=function(){var r=this.getDefs(!1);if(!r)return[];var s=[];return O.each(this._tagNames,function(c){var x=r.getElementsByTagName(c);s=s.concat([].slice.call(x))}),s},h.prototype.markAllUnused=function(){var r=this.getDoms(),s=this;O.each(r,function(c){c[s._markLabel]=m})},h.prototype.markUsed=function(r){r&&(r[this._markLabel]=o)},h.prototype.removeUnused=function(){var r=this.getDefs(!1);if(r){var s=this.getDoms(),c=this;O.each(s,function(x){x[c._markLabel]!==o&&r.removeChild(x)})}},h.prototype.getSvgProxy=function(r){return r instanceof M?C:r instanceof b?f:r instanceof L?v:C},h.prototype.getTextSvgElement=function(r){return r.__textSvgEl},h.prototype.getSvgElement=function(r){return r.__svgEl};var l=h;X.exports=l},124438:function(X,z,e){var E=e(624035),F=e(131879),O=e(34081),M=e(994819);function b(T,C){E.call(this,T,C,["linearGradient","radialGradient"],"__gradient_in_use__")}F.inherits(b,E),b.prototype.addWithoutUpdate=function(T,C){if(C&&C.style){var f=this;F.each(["fill","stroke"],function(v){if(C.style[v]&&(C.style[v].type==="linear"||C.style[v].type==="radial")){var m=C.style[v],o=f.getDefs(!0),h;m._dom?(h=m._dom,o.contains(m._dom)||f.addDom(h)):h=f.add(m),f.markUsed(C);var l=h.getAttribute("id");T.setAttribute(v,"url(#"+l+")")}})}},b.prototype.add=function(T){var C;if(T.type==="linear")C=this.createElement("linearGradient");else if(T.type==="radial")C=this.createElement("radialGradient");else return O("Illegal gradient type."),null;return T.id=T.id||this.nextId++,C.setAttribute("id","zr"+this._zrId+"-gradient-"+T.id),this.updateDom(T,C),this.addDom(C),C},b.prototype.update=function(T){var C=this;E.prototype.update.call(this,T,function(){var f=T.type,v=T._dom.tagName;f==="linear"&&v==="linearGradient"||f==="radial"&&v==="radialGradient"?C.updateDom(T,T._dom):(C.removeDom(T),C.add(T))})},b.prototype.updateDom=function(T,C){if(T.type==="linear")C.setAttribute("x1",T.x),C.setAttribute("y1",T.y),C.setAttribute("x2",T.x2),C.setAttribute("y2",T.y2);else if(T.type==="radial")C.setAttribute("cx",T.x),C.setAttribute("cy",T.y),C.setAttribute("r",T.r);else{O("Illegal gradient type.");return}T.global?C.setAttribute("gradientUnits","userSpaceOnUse"):C.setAttribute("gradientUnits","objectBoundingBox"),C.innerHTML="";for(var f=T.colorStops,v=0,m=f.length;v<m;++v){var o=this.createElement("stop");o.setAttribute("offset",f[v].offset*100+"%");var h=f[v].color;if(h.indexOf("rgba")>-1){var l=M.parse(h)[3],r=M.toHex(h);o.setAttribute("stop-color","#"+r),o.setAttribute("stop-opacity",l)}else o.setAttribute("stop-color",f[v].color);C.appendChild(o)}T._dom=C},b.prototype.markUsed=function(T){if(T.style){var C=T.style.fill;C&&C._dom&&E.prototype.markUsed.call(this,C._dom),C=T.style.stroke,C&&C._dom&&E.prototype.markUsed.call(this,C._dom)}};var L=b;X.exports=L},571830:function(X,z,e){var E=e(624035),F=e(131879);function O(L,T){E.call(this,L,T,["filter"],"__filter_in_use__","_shadowDom")}F.inherits(O,E),O.prototype.addWithoutUpdate=function(L,T){if(T&&M(T.style)){var C;if(T._shadowDom){C=T._shadowDom;var f=this.getDefs(!0);f.contains(T._shadowDom)||this.addDom(C)}else C=this.add(T);this.markUsed(T);var v=C.getAttribute("id");L.style.filter="url(#"+v+")"}},O.prototype.add=function(L){var T=this.createElement("filter");return L._shadowDomId=L._shadowDomId||this.nextId++,T.setAttribute("id","zr"+this._zrId+"-shadow-"+L._shadowDomId),this.updateDom(L,T),this.addDom(T),T},O.prototype.update=function(L,T){var C=T.style;if(M(C)){var f=this;E.prototype.update.call(this,T,function(){f.updateDom(T,T._shadowDom)})}else this.remove(L,T)},O.prototype.remove=function(L,T){T._shadowDomId!=null&&(this.removeDom(L),L.style.filter="")},O.prototype.updateDom=function(L,T){var C=T.getElementsByTagName("feDropShadow");C.length===0?C=this.createElement("feDropShadow"):C=C[0];var f=L.style,v=L.scale&&L.scale[0]||1,m=L.scale&&L.scale[1]||1,o,h,l,r;if(f.shadowBlur||f.shadowOffsetX||f.shadowOffsetY)o=f.shadowOffsetX||0,h=f.shadowOffsetY||0,l=f.shadowBlur,r=f.shadowColor;else if(f.textShadowBlur)o=f.textShadowOffsetX||0,h=f.textShadowOffsetY||0,l=f.textShadowBlur,r=f.textShadowColor;else{this.removeDom(T,f);return}C.setAttribute("dx",o/v),C.setAttribute("dy",h/m),C.setAttribute("flood-color",r);var s=l/2/v,c=l/2/m,x=s+" "+c;C.setAttribute("stdDeviation",x),T.setAttribute("x","-100%"),T.setAttribute("y","-100%"),T.setAttribute("width",Math.ceil(l/2*200)+"%"),T.setAttribute("height",Math.ceil(l/2*200)+"%"),T.appendChild(C),L._shadowDom=T},O.prototype.markUsed=function(L){L._shadowDom&&E.prototype.markUsed.call(this,L._shadowDom)};function M(L){return L&&(L.shadowBlur||L.shadowOffsetX||L.shadowOffsetY||L.textShadowBlur||L.textShadowOffsetX||L.textShadowOffsetY)}var b=O;X.exports=b},530690:function(X,z,e){e(272698);var E=e(523593),F=E.registerPainter,O=e(258744);F("svg",O)},994819:function(X,z,e){var E=e(221311),F={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function O(w){return w=Math.round(w),w<0?0:w>255?255:w}function M(w){return w=Math.round(w),w<0?0:w>360?360:w}function b(w){return w<0?0:w>1?1:w}function L(w){return w.length&&w.charAt(w.length-1)==="%"?O(parseFloat(w)/100*255):O(parseInt(w,10))}function T(w){return w.length&&w.charAt(w.length-1)==="%"?b(parseFloat(w)/100):b(parseFloat(w))}function C(w,S,R){return R<0?R+=1:R>1&&(R-=1),R*6<1?w+(S-w)*R*6:R*2<1?S:R*3<2?w+(S-w)*(2/3-R)*6:w}function f(w,S,R){return w+(S-w)*R}function v(w,S,R,B,k){return w[0]=S,w[1]=R,w[2]=B,w[3]=k,w}function m(w,S){return w[0]=S[0],w[1]=S[1],w[2]=S[2],w[3]=S[3],w}var o=new E(20),h=null;function l(w,S){h&&m(h,S),h=o.put(w,h||S.slice())}function r(w,S){if(w){S=S||[];var R=o.get(w);if(R)return m(S,R);w=w+"";var B=w.replace(/ /g,"").toLowerCase();if(B in F)return m(S,F[B]),l(w,S),S;if(B.charAt(0)==="#"){if(B.length===4){var k=parseInt(B.substr(1),16);if(!(k>=0&&k<=4095)){v(S,0,0,0,1);return}return v(S,(k&3840)>>4|(k&3840)>>8,k&240|(k&240)>>4,k&15|(k&15)<<4,1),l(w,S),S}else if(B.length===7){var k=parseInt(B.substr(1),16);if(!(k>=0&&k<=16777215)){v(S,0,0,0,1);return}return v(S,(k&16711680)>>16,(k&65280)>>8,k&255,1),l(w,S),S}return}var P=B.indexOf("("),D=B.indexOf(")");if(P!==-1&&D+1===B.length){var A=B.substr(0,P),N=B.substr(P+1,D-(P+1)).split(","),I=1;switch(A){case"rgba":if(N.length!==4){v(S,0,0,0,1);return}I=T(N.pop());case"rgb":if(N.length!==3){v(S,0,0,0,1);return}return v(S,L(N[0]),L(N[1]),L(N[2]),I),l(w,S),S;case"hsla":if(N.length!==4){v(S,0,0,0,1);return}return N[3]=T(N[3]),s(N,S),l(w,S),S;case"hsl":if(N.length!==3){v(S,0,0,0,1);return}return s(N,S),l(w,S),S;default:return}}v(S,0,0,0,1)}}function s(w,S){var R=(parseFloat(w[0])%360+360)%360/360,B=T(w[1]),k=T(w[2]),P=k<=.5?k*(B+1):k+B-k*B,D=k*2-P;return S=S||[],v(S,O(C(D,P,R+1/3)*255),O(C(D,P,R)*255),O(C(D,P,R-1/3)*255),1),w.length===4&&(S[3]=w[3]),S}function c(w){if(w){var S=w[0]/255,R=w[1]/255,B=w[2]/255,k=Math.min(S,R,B),P=Math.max(S,R,B),D=P-k,A=(P+k)/2,N,I;if(D===0)N=0,I=0;else{A<.5?I=D/(P+k):I=D/(2-P-k);var G=((P-S)/6+D/2)/D,W=((P-R)/6+D/2)/D,Z=((P-B)/6+D/2)/D;S===P?N=Z-W:R===P?N=1/3+G-Z:B===P&&(N=2/3+W-G),N<0&&(N+=1),N>1&&(N-=1)}var H=[N*360,I,A];return w[3]!=null&&H.push(w[3]),H}}function x(w,S){var R=r(w);if(R){for(var B=0;B<3;B++)S<0?R[B]=R[B]*(1-S)|0:R[B]=(255-R[B])*S+R[B]|0,R[B]>255?R[B]=255:w[B]<0&&(R[B]=0);return p(R,R.length===4?"rgba":"rgb")}}function a(w){var S=r(w);if(S)return((1<<24)+(S[0]<<16)+(S[1]<<8)+ +S[2]).toString(16).slice(1)}function i(w,S,R){if(!(!(S&&S.length)||!(w>=0&&w<=1))){R=R||[];var B=w*(S.length-1),k=Math.floor(B),P=Math.ceil(B),D=S[k],A=S[P],N=B-k;return R[0]=O(f(D[0],A[0],N)),R[1]=O(f(D[1],A[1],N)),R[2]=O(f(D[2],A[2],N)),R[3]=b(f(D[3],A[3],N)),R}}var n=i;function u(w,S,R){if(!(!(S&&S.length)||!(w>=0&&w<=1))){var B=w*(S.length-1),k=Math.floor(B),P=Math.ceil(B),D=r(S[k]),A=r(S[P]),N=B-k,I=p([O(f(D[0],A[0],N)),O(f(D[1],A[1],N)),O(f(D[2],A[2],N)),b(f(D[3],A[3],N))],"rgba");return R?{color:I,leftIndex:k,rightIndex:P,value:B}:I}}var g=u;function d(w,S,R,B){if(w=r(w),w)return w=c(w),S!=null&&(w[0]=M(S)),R!=null&&(w[1]=T(R)),B!=null&&(w[2]=T(B)),p(s(w),"rgba")}function y(w,S){if(w=r(w),w&&S!=null)return w[3]=b(S),p(w,"rgba")}function p(w,S){if(!(!w||!w.length)){var R=w[0]+","+w[1]+","+w[2];return(S==="rgba"||S==="hsva"||S==="hsla")&&(R+=","+w[3]),S+"("+R+")"}}z.parse=r,z.lift=x,z.toHex=a,z.fastLerp=i,z.fastMapToColor=n,z.lerp=u,z.mapToColor=g,z.modifyHSL=d,z.modifyAlpha=y,z.stringify=p},601595:function(X,z,e){var E=e(149500),F=e(827146),O=e(311096),M=e(835727),b=e(70654),L=e(668518),T=e(489886),C=e(13484),f=e(254904),v=e(455370),m=e(162190),o=e(808691),h=e(792199),l=e(343970),r=e(423036),s=r.createFromString,c=e(131879),x=c.isString,a=c.extend,i=c.defaults,n=c.trim,u=c.each,g=/[\s,]+/;function d(U){if(x(U)){var V=new DOMParser;U=V.parseFromString(U,"text/xml")}for(U.nodeType===9&&(U=U.firstChild);U.nodeName.toLowerCase()!=="svg"||U.nodeType!==1;)U=U.nextSibling;return U}function y(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}y.prototype.parse=function(U,V){V=V||{};var Y=d(U);if(!Y)throw new Error("Illegal svg");var $=new F;this._root=$;var K=Y.getAttribute("viewBox")||"",J=parseFloat(Y.getAttribute("width")||V.width),Q=parseFloat(Y.getAttribute("height")||V.height);isNaN(J)&&(J=null),isNaN(Q)&&(Q=null),P(Y,$,null,!0);for(var et=Y.firstChild;et;)this._parseNode(et,$),et=et.nextSibling;var nt,st;if(K){var ut=n(K).split(g);ut.length>=4&&(nt={x:parseFloat(ut[0]||0),y:parseFloat(ut[1]||0),width:parseFloat(ut[2]),height:parseFloat(ut[3])})}if(nt&&J!=null&&Q!=null&&(st=Z(nt,J,Q),!V.ignoreViewBox)){var rt=$;$=new F,$.add(rt),rt.scale=st.scale.slice(),rt.position=st.position.slice()}return!V.ignoreRootClip&&J!=null&&Q!=null&&$.setClipPath(new L({shape:{x:0,y:0,width:J,height:Q}})),{root:$,width:J,height:Q,viewBoxRect:nt,viewBoxTransform:st}},y.prototype._parseNode=function(U,V){var Y=U.nodeName.toLowerCase();Y==="defs"?this._isDefine=!0:Y==="text"&&(this._isText=!0);var $;if(this._isDefine){var K=w[Y];if(K){var J=K.call(this,U),Q=U.getAttribute("id");Q&&(this._defs[Q]=J)}}else{var K=p[Y];K&&($=K.call(this,U,V),V.add($))}for(var et=U.firstChild;et;)et.nodeType===1&&this._parseNode(et,$),et.nodeType===3&&this._isText&&this._parseText(et,$),et=et.nextSibling;Y==="defs"?this._isDefine=!1:Y==="text"&&(this._isText=!1)},y.prototype._parseText=function(U,V){if(U.nodeType===1){var Y=U.getAttribute("dx")||0,$=U.getAttribute("dy")||0;this._textX+=parseFloat(Y),this._textY+=parseFloat($)}var K=new M({style:{text:U.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});R(V,K),P(U,K,this._defs);var J=K.style.fontSize;J&&J<9&&(K.style.fontSize=9,K.scale=K.scale||[1,1],K.scale[0]*=J/9,K.scale[1]*=J/9);var Q=K.getBoundingRect();return this._textX+=Q.width,V.add(K),K};var p={g:function(U,V){var Y=new F;return R(V,Y),P(U,Y,this._defs),Y},rect:function(U,V){var Y=new L;return R(V,Y),P(U,Y,this._defs),Y.setShape({x:parseFloat(U.getAttribute("x")||0),y:parseFloat(U.getAttribute("y")||0),width:parseFloat(U.getAttribute("width")||0),height:parseFloat(U.getAttribute("height")||0)}),Y},circle:function(U,V){var Y=new b;return R(V,Y),P(U,Y,this._defs),Y.setShape({cx:parseFloat(U.getAttribute("cx")||0),cy:parseFloat(U.getAttribute("cy")||0),r:parseFloat(U.getAttribute("r")||0)}),Y},line:function(U,V){var Y=new C;return R(V,Y),P(U,Y,this._defs),Y.setShape({x1:parseFloat(U.getAttribute("x1")||0),y1:parseFloat(U.getAttribute("y1")||0),x2:parseFloat(U.getAttribute("x2")||0),y2:parseFloat(U.getAttribute("y2")||0)}),Y},ellipse:function(U,V){var Y=new T;return R(V,Y),P(U,Y,this._defs),Y.setShape({cx:parseFloat(U.getAttribute("cx")||0),cy:parseFloat(U.getAttribute("cy")||0),rx:parseFloat(U.getAttribute("rx")||0),ry:parseFloat(U.getAttribute("ry")||0)}),Y},polygon:function(U,V){var Y=U.getAttribute("points");Y&&(Y=B(Y));var $=new v({shape:{points:Y||[]}});return R(V,$),P(U,$,this._defs),$},polyline:function(U,V){var Y=new f;R(V,Y),P(U,Y,this._defs);var $=U.getAttribute("points");$&&($=B($));var K=new m({shape:{points:$||[]}});return K},image:function(U,V){var Y=new O;return R(V,Y),P(U,Y,this._defs),Y.setStyle({image:U.getAttribute("xlink:href"),x:U.getAttribute("x"),y:U.getAttribute("y"),width:U.getAttribute("width"),height:U.getAttribute("height")}),Y},text:function(U,V){var Y=U.getAttribute("x")||0,$=U.getAttribute("y")||0,K=U.getAttribute("dx")||0,J=U.getAttribute("dy")||0;this._textX=parseFloat(Y)+parseFloat(K),this._textY=parseFloat($)+parseFloat(J);var Q=new F;return R(V,Q),P(U,Q,this._defs),Q},tspan:function(U,V){var Y=U.getAttribute("x"),$=U.getAttribute("y");Y!=null&&(this._textX=parseFloat(Y)),$!=null&&(this._textY=parseFloat($));var K=U.getAttribute("dx")||0,J=U.getAttribute("dy")||0,Q=new F;return R(V,Q),P(U,Q,this._defs),this._textX+=K,this._textY+=J,Q},path:function(U,V){var Y=U.getAttribute("d")||"",$=s(Y);return R(V,$),P(U,$,this._defs),$}},w={lineargradient:function(U){var V=parseInt(U.getAttribute("x1")||0,10),Y=parseInt(U.getAttribute("y1")||0,10),$=parseInt(U.getAttribute("x2")||10,10),K=parseInt(U.getAttribute("y2")||0,10),J=new o(V,Y,$,K);return S(U,J),J},radialgradient:function(U){}};function S(U,V){for(var Y=U.firstChild;Y;){if(Y.nodeType===1){var $=Y.getAttribute("offset");$.indexOf("%")>0?$=parseInt($,10)/100:$?$=parseFloat($):$=0;var K=Y.getAttribute("stop-color")||"#000000";V.addColorStop($,K)}Y=Y.nextSibling}}function R(U,V){U&&U.__inheritedStyle&&(V.__inheritedStyle||(V.__inheritedStyle={}),i(V.__inheritedStyle,U.__inheritedStyle))}function B(U){for(var V=n(U).split(g),Y=[],$=0;$<V.length;$+=2){var K=parseFloat(V[$]),J=parseFloat(V[$+1]);Y.push([K,J])}return Y}var k={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function P(U,V,Y,$){var K=V.__inheritedStyle||{},J=V.type==="text";if(U.nodeType===1&&(I(U,V),a(K,W(U)),!$)){for(var Q in k)if(k.hasOwnProperty(Q)){var et=U.getAttribute(Q);et!=null&&(K[k[Q]]=et)}}var nt=J?"textFill":"fill",st=J?"textStroke":"stroke";V.style=V.style||new h;var ut=V.style;K.fill!=null&&ut.set(nt,A(K.fill,Y)),K.stroke!=null&&ut.set(st,A(K.stroke,Y)),u(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(rt){var ht=rt==="lineWidth"&&J?"textStrokeWidth":rt;K[rt]!=null&&ut.set(ht,parseFloat(K[rt]))}),(!K.textBaseline||K.textBaseline==="auto")&&(K.textBaseline="alphabetic"),K.textBaseline==="alphabetic"&&(K.textBaseline="bottom"),K.textAlign==="start"&&(K.textAlign="left"),K.textAlign==="end"&&(K.textAlign="right"),u(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(rt){K[rt]!=null&&ut.set(rt,K[rt])}),K.lineDash&&(V.style.lineDash=n(K.lineDash).split(g)),ut[st]&&ut[st]!=="none"&&(V[st]=!0),V.__inheritedStyle=K}var D=/url\(\s*#(.*?)\)/;function A(U,V){var Y=V&&U&&U.match(D);if(Y){var $=n(Y[1]),K=V[$];return K}return U}var N=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;function I(U,V){var Y=U.getAttribute("transform");if(Y){Y=Y.replace(/,/g," ");var $=null,K=[];Y.replace(N,function(nt,st,ut){K.push(st,ut)});for(var J=K.length-1;J>0;J-=2){var Q=K[J],et=K[J-1];switch($=$||l.create(),et){case"translate":Q=n(Q).split(g),l.translate($,$,[parseFloat(Q[0]),parseFloat(Q[1]||0)]);break;case"scale":Q=n(Q).split(g),l.scale($,$,[parseFloat(Q[0]),parseFloat(Q[1]||Q[0])]);break;case"rotate":Q=n(Q).split(g),l.rotate($,$,parseFloat(Q[0]));break;case"skew":Q=n(Q).split(g),E.warn("Skew transform is not supported yet");break;case"matrix":var Q=n(Q).split(g);$[0]=parseFloat(Q[0]),$[1]=parseFloat(Q[1]),$[2]=parseFloat(Q[2]),$[3]=parseFloat(Q[3]),$[4]=parseFloat(Q[4]),$[5]=parseFloat(Q[5]);break}}V.setLocalTransform($)}}var G=/([^\s:;]+)\s*:\s*([^:;]+)/g;function W(U){var V=U.getAttribute("style"),Y={};if(!V)return Y;var $={};G.lastIndex=0;for(var K;(K=G.exec(V))!=null;)$[K[1]]=K[2];for(var J in k)k.hasOwnProperty(J)&&$[J]!=null&&(Y[k[J]]=$[J]);return Y}function Z(U,V,Y){var $=V/U.width,K=Y/U.height,J=Math.min($,K),Q=[J,J],et=[-(U.x+U.width/2)*J+V/2,-(U.y+U.height/2)*J+Y/2];return{scale:Q,position:et}}function H(U,V){var Y=new y;return Y.parse(U,V)}z.parseXML=d,z.makeViewBoxTransform=Z,z.parseSVG=H},423036:function(X,z,e){var E=e(254904),F=e(722407),O=e(864239),M=Math.sqrt,b=Math.sin,L=Math.cos,T=Math.PI,C=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},f=function(a,i){return(a[0]*i[0]+a[1]*i[1])/(C(a)*C(i))},v=function(a,i){return(a[0]*i[1]<a[1]*i[0]?-1:1)*Math.acos(f(a,i))};function m(a,i,n,u,g,d,y,p,w,S,R){var B=w*(T/180),k=L(B)*(a-n)/2+b(B)*(i-u)/2,P=-1*b(B)*(a-n)/2+L(B)*(i-u)/2,D=k*k/(y*y)+P*P/(p*p);D>1&&(y*=M(D),p*=M(D));var A=(g===d?-1:1)*M((y*y*(p*p)-y*y*(P*P)-p*p*(k*k))/(y*y*(P*P)+p*p*(k*k)))||0,N=A*y*P/p,I=A*-p*k/y,G=(a+n)/2+L(B)*N-b(B)*I,W=(i+u)/2+b(B)*N+L(B)*I,Z=v([1,0],[(k-N)/y,(P-I)/p]),H=[(k-N)/y,(P-I)/p],U=[(-1*k-N)/y,(-1*P-I)/p],V=v(H,U);f(H,U)<=-1&&(V=T),f(H,U)>=1&&(V=0),d===0&&V>0&&(V=V-2*T),d===1&&V<0&&(V=V+2*T),R.addData(S,G,W,y,p,Z,V,B,d)}var o=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,h=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function l(a){if(!a)return new F;for(var i=0,n=0,u=i,g=n,d,y=new F,p=F.CMD,w=a.match(o),S=0;S<w.length;S++){for(var R=w[S],B=R.charAt(0),k,P=R.match(h)||[],D=P.length,A=0;A<D;A++)P[A]=parseFloat(P[A]);for(var N=0;N<D;){var I,G,W,Z,H,U,V,Y=i,$=n;switch(B){case"l":i+=P[N++],n+=P[N++],k=p.L,y.addData(k,i,n);break;case"L":i=P[N++],n=P[N++],k=p.L,y.addData(k,i,n);break;case"m":i+=P[N++],n+=P[N++],k=p.M,y.addData(k,i,n),u=i,g=n,B="l";break;case"M":i=P[N++],n=P[N++],k=p.M,y.addData(k,i,n),u=i,g=n,B="L";break;case"h":i+=P[N++],k=p.L,y.addData(k,i,n);break;case"H":i=P[N++],k=p.L,y.addData(k,i,n);break;case"v":n+=P[N++],k=p.L,y.addData(k,i,n);break;case"V":n=P[N++],k=p.L,y.addData(k,i,n);break;case"C":k=p.C,y.addData(k,P[N++],P[N++],P[N++],P[N++],P[N++],P[N++]),i=P[N-2],n=P[N-1];break;case"c":k=p.C,y.addData(k,P[N++]+i,P[N++]+n,P[N++]+i,P[N++]+n,P[N++]+i,P[N++]+n),i+=P[N-2],n+=P[N-1];break;case"S":I=i,G=n;var K=y.len(),J=y.data;d===p.C&&(I+=i-J[K-4],G+=n-J[K-3]),k=p.C,Y=P[N++],$=P[N++],i=P[N++],n=P[N++],y.addData(k,I,G,Y,$,i,n);break;case"s":I=i,G=n;var K=y.len(),J=y.data;d===p.C&&(I+=i-J[K-4],G+=n-J[K-3]),k=p.C,Y=i+P[N++],$=n+P[N++],i+=P[N++],n+=P[N++],y.addData(k,I,G,Y,$,i,n);break;case"Q":Y=P[N++],$=P[N++],i=P[N++],n=P[N++],k=p.Q,y.addData(k,Y,$,i,n);break;case"q":Y=P[N++]+i,$=P[N++]+n,i+=P[N++],n+=P[N++],k=p.Q,y.addData(k,Y,$,i,n);break;case"T":I=i,G=n;var K=y.len(),J=y.data;d===p.Q&&(I+=i-J[K-4],G+=n-J[K-3]),i=P[N++],n=P[N++],k=p.Q,y.addData(k,I,G,i,n);break;case"t":I=i,G=n;var K=y.len(),J=y.data;d===p.Q&&(I+=i-J[K-4],G+=n-J[K-3]),i+=P[N++],n+=P[N++],k=p.Q,y.addData(k,I,G,i,n);break;case"A":W=P[N++],Z=P[N++],H=P[N++],U=P[N++],V=P[N++],Y=i,$=n,i=P[N++],n=P[N++],k=p.A,m(Y,$,i,n,U,V,W,Z,H,k,y);break;case"a":W=P[N++],Z=P[N++],H=P[N++],U=P[N++],V=P[N++],Y=i,$=n,i+=P[N++],n+=P[N++],k=p.A,m(Y,$,i,n,U,V,W,Z,H,k,y);break}}(B==="z"||B==="Z")&&(k=p.Z,y.addData(k),i=u,n=g),d=k}return y.toStatic(),y}function r(a,i){var n=l(a);return i=i||{},i.buildPath=function(u){if(u.setData){u.setData(n.data);var g=u.getContext();g&&u.rebuildPath(g)}else{var g=u;n.rebuildPath(g)}},i.applyTransform=function(u){O(n,u),this.dirty(!0)},i}function s(a,i){return new E(r(a,i))}function c(a,i){return E.extend(r(a,i))}function x(a,i){for(var n=[],u=a.length,g=0;g<u;g++){var d=a[g];d.path||d.createPathProxy(),d.__dirtyPath&&d.buildPath(d.path,d.shape,!0),n.push(d.path)}var y=new E(i);return y.createPathProxy(),y.buildPath=function(p){p.appendPath(n);var w=p.getContext();w&&p.rebuildPath(w)},y}z.createFromString=s,z.extendFromString=c,z.mergePath=x},864239:function(X,z,e){var E=e(722407),F=e(912072),O=F.applyTransform,M=E.CMD,b=[[],[],[]],L=Math.sqrt,T=Math.atan2;function C(f,v){var m=f.data,o,h,l,r,s,c,x=M.M,a=M.C,i=M.L,n=M.R,u=M.A,g=M.Q;for(l=0,r=0;l<m.length;){switch(o=m[l++],r=l,h=0,o){case x:h=1;break;case i:h=1;break;case a:h=3;break;case g:h=2;break;case u:var d=v[4],y=v[5],p=L(v[0]*v[0]+v[1]*v[1]),w=L(v[2]*v[2]+v[3]*v[3]),S=T(-v[1]/w,v[0]/p);m[l]*=p,m[l++]+=d,m[l]*=w,m[l++]+=y,m[l++]*=p,m[l++]*=w,m[l++]+=S,m[l++]+=S,l+=2,r=l;break;case n:c[0]=m[l++],c[1]=m[l++],O(c,c,v),m[r++]=c[0],m[r++]=c[1],c[0]+=m[l++],c[1]+=m[l++],O(c,c,v),m[r++]=c[0],m[r++]=c[1]}for(s=0;s<h;s++){var c=b[s];c[0]=m[l++],c[1]=m[l++],O(c,c,v),m[r++]=c[0],m[r++]=c[1]}}}X.exports=C},94916:function(X,z,e){var E=e(34081),F=e(161577),O=e(131879),M=O.each;function b(f){return parseInt(f,10)}function L(f,v){F.initVML(),this.root=f,this.storage=v;var m=document.createElement("div"),o=document.createElement("div");m.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",o.style.cssText="position:absolute;left:0;top:0;",f.appendChild(m),this._vmlRoot=o,this._vmlViewport=m,this.resize();var h=v.delFromStorage,l=v.addToStorage;v.delFromStorage=function(r){h.call(v,r),r&&r.onRemove&&r.onRemove(o)},v.addToStorage=function(r){r.onAdd&&r.onAdd(o),l.call(v,r)},this._firstPaint=!0}L.prototype={constructor:L,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var f=this.getViewportRoot();if(f)return{offsetLeft:f.offsetLeft||0,offsetTop:f.offsetTop||0}},refresh:function(){var f=this.storage.getDisplayList(!0,!0);this._paintList(f)},_paintList:function(f){for(var v=this._vmlRoot,m=0;m<f.length;m++){var o=f[m];o.invisible||o.ignore?(o.__alreadyNotVisible||o.onRemove(v),o.__alreadyNotVisible=!0):(o.__alreadyNotVisible&&o.onAdd(v),o.__alreadyNotVisible=!1,o.__dirty&&(o.beforeBrush&&o.beforeBrush(),(o.brushVML||o.brush).call(o,v),o.afterBrush&&o.afterBrush())),o.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(v),this._firstPaint=!1)},resize:function(m,o){var m=m??this._getWidth(),o=o??this._getHeight();if(this._width!==m||this._height!==o){this._width=m,this._height=o;var h=this._vmlViewport.style;h.width=m+"px",h.height=o+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var f=this.root,v=f.currentStyle;return(f.clientWidth||b(v.width))-b(v.paddingLeft)-b(v.paddingRight)|0},_getHeight:function(){var f=this.root,v=f.currentStyle;return(f.clientHeight||b(v.height))-b(v.paddingTop)-b(v.paddingBottom)|0}};function T(f){return function(){E('In IE8.0 VML mode painter not support method "'+f+'"')}}M(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(f){L.prototype[f]=T(f)});var C=L;X.exports=C},161577:function(X,z,e){var E=e(358020),F="urn:schemas-microsoft-com:vml",O=typeof window>"u"?null:window,M=!1,b=O&&O.document;function L(f){return T(f)}var T;if(b&&!E.canvasSupported)try{!b.namespaces.zrvml&&b.namespaces.add("zrvml",F),T=function(f){return b.createElement("<zrvml:"+f+' class="zrvml">')}}catch{T=function(v){return b.createElement("<"+v+' xmlns="'+F+'" class="zrvml">')}}function C(){if(!(M||!b)){M=!0;var f=b.styleSheets;f.length<31?b.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):f[0].addRule(".zrvml","behavior:url(#default#VML)")}}z.doc=b,z.createNode=L,z.initVML=C},98805:function(X,z,e){var E=e(358020),F=e(912072),O=F.applyTransform,M=e(795946),b=e(994819),L=e(872113),T=e(938630),C=e(284423),f=e(567033),v=e(311096),m=e(835727),o=e(254904),h=e(722407),l=e(521260),r=e(161577),s=h.CMD,c=Math.round,x=Math.sqrt,a=Math.abs,i=Math.cos,n=Math.sin,u=Math.max;if(!E.canvasSupported){var g=",",d="progid:DXImageTransform.Microsoft",y=21600,p=y/2,w=1e5,S=1e3,R=function(Dt){Dt.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",Dt.coordsize=y+","+y,Dt.coordorigin="0,0"},B=function(Dt){return String(Dt).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},k=function(Dt,Rt,Tt){return"rgb("+[Dt,Rt,Tt].join(",")+")"},P=function(Dt,Rt){Rt&&Dt&&Rt.parentNode!==Dt&&Dt.appendChild(Rt)},D=function(Dt,Rt){Rt&&Dt&&Rt.parentNode===Dt&&Dt.removeChild(Rt)},A=function(Dt,Rt,Tt){return(parseFloat(Dt)||0)*w+(parseFloat(Rt)||0)*S+Tt},N=T.parsePercent,I=function(Dt,Rt,Tt){var mt=b.parse(Rt);Tt=+Tt,isNaN(Tt)&&(Tt=1),mt&&(Dt.color=k(mt[0],mt[1],mt[2]),Dt.opacity=Tt*mt[3])},G=function(Dt){var Rt=b.parse(Dt);return[k(Rt[0],Rt[1],Rt[2]),Rt[3]]},W=function(Dt,Rt,Tt){var mt=Rt.fill;if(mt!=null)if(mt instanceof l){var Nt,ct=0,vt=[0,0],Lt=0,Ct=1,jt=Tt.getBoundingRect(),zt=jt.width,Yt=jt.height;if(mt.type==="linear"){Nt="gradient";var Zt=Tt.transform,ft=[mt.x*zt,mt.y*Yt],gt=[mt.x2*zt,mt.y2*Yt];Zt&&(O(ft,ft,Zt),O(gt,gt,Zt));var dt=gt[0]-ft[0],lt=gt[1]-ft[1];ct=Math.atan2(dt,lt)*180/Math.PI,ct<0&&(ct+=360),ct<1e-6&&(ct=0)}else{Nt="gradientradial";var ft=[mt.x*zt,mt.y*Yt],Zt=Tt.transform,ot=Tt.scale,it=zt,yt=Yt;vt=[(ft[0]-jt.x)/it,(ft[1]-jt.y)/yt],Zt&&O(ft,ft,Zt),it/=ot[0]*y,yt/=ot[1]*y;var Ot=u(it,yt);Lt=2*0/Ot,Ct=2*mt.r/Ot-Lt}var St=mt.colorStops.slice();St.sort(function(ge,Me){return ge.offset-Me.offset});for(var Gt=St.length,Ut=[],Kt=[],Jt=0;Jt<Gt;Jt++){var te=St[Jt],ie=G(te.color);Kt.push(te.offset*Ct+Lt+" "+ie[0]),(Jt===0||Jt===Gt-1)&&Ut.push(ie)}if(Gt>=2){var oe=Ut[0][0],he=Ut[1][0],ne=Ut[0][1]*Rt.opacity,ce=Ut[1][1]*Rt.opacity;Dt.type=Nt,Dt.method="none",Dt.focus="100%",Dt.angle=ct,Dt.color=oe,Dt.color2=he,Dt.colors=Kt.join(","),Dt.opacity=ce,Dt.opacity2=ne}Nt==="radial"&&(Dt.focusposition=vt.join(","))}else I(Dt,mt,Rt.opacity)},Z=function(Dt,Rt){Rt.lineDash&&(Dt.dashstyle=Rt.lineDash.join(" ")),Rt.stroke!=null&&!(Rt.stroke instanceof l)&&I(Dt,Rt.stroke,Rt.opacity)},H=function(Dt,Rt,Tt,mt){var Nt=Rt==="fill",ct=Dt.getElementsByTagName(Rt)[0];Tt[Rt]!=null&&Tt[Rt]!=="none"&&(Nt||!Nt&&Tt.lineWidth)?(Dt[Nt?"filled":"stroked"]="true",Tt[Rt]instanceof l&&D(Dt,ct),ct||(ct=r.createNode(Rt)),Nt?W(ct,Tt,mt):Z(ct,Tt),P(Dt,ct)):(Dt[Nt?"filled":"stroked"]="false",D(Dt,ct))},U=[[],[],[]],V=function(Dt,Rt){var Tt=s.M,mt=s.C,Nt=s.L,ct=s.A,vt=s.Q,Lt=[],Ct,jt,zt,Yt,Zt,ft,gt=Dt.data,dt=Dt.len();for(Yt=0;Yt<dt;){switch(zt=gt[Yt++],jt="",Ct=0,zt){case Tt:jt=" m ",Ct=1,Zt=gt[Yt++],ft=gt[Yt++],U[0][0]=Zt,U[0][1]=ft;break;case Nt:jt=" l ",Ct=1,Zt=gt[Yt++],ft=gt[Yt++],U[0][0]=Zt,U[0][1]=ft;break;case vt:case mt:jt=" c ",Ct=3;var It=gt[Yt++],Wt=gt[Yt++],lt=gt[Yt++],ot=gt[Yt++],it,yt;zt===vt?(it=lt,yt=ot,lt=(lt+2*It)/3,ot=(ot+2*Wt)/3,It=(Zt+2*It)/3,Wt=(ft+2*Wt)/3):(it=gt[Yt++],yt=gt[Yt++]),U[0][0]=It,U[0][1]=Wt,U[1][0]=lt,U[1][1]=ot,U[2][0]=it,U[2][1]=yt,Zt=it,ft=yt;break;case ct:var Ot=0,St=0,Gt=1,Ut=1,Kt=0;Rt&&(Ot=Rt[4],St=Rt[5],Gt=x(Rt[0]*Rt[0]+Rt[1]*Rt[1]),Ut=x(Rt[2]*Rt[2]+Rt[3]*Rt[3]),Kt=Math.atan2(-Rt[1]/Ut,Rt[0]/Gt));var Jt=gt[Yt++],te=gt[Yt++],ie=gt[Yt++],oe=gt[Yt++],he=gt[Yt++]+Kt,ne=gt[Yt++]+he+Kt;Yt++;var ce=gt[Yt++],ge=Jt+i(he)*ie,Me=te+n(he)*oe,It=Jt+i(ne)*ie,Wt=te+n(ne)*oe,_t=ce?" wa ":" at ";Math.abs(ge-It)<1e-4&&(Math.abs(ne-he)>.01?ce&&(ge+=270/y):Math.abs(Me-te)<1e-4?ce&&ge<Jt||!ce&&ge>Jt?Wt-=270/y:Wt+=270/y:ce&&Me<te||!ce&&Me>te?It+=270/y:It-=270/y),Lt.push(_t,c(((Jt-ie)*Gt+Ot)*y-p),g,c(((te-oe)*Ut+St)*y-p),g,c(((Jt+ie)*Gt+Ot)*y-p),g,c(((te+oe)*Ut+St)*y-p),g,c((ge*Gt+Ot)*y-p),g,c((Me*Ut+St)*y-p),g,c((It*Gt+Ot)*y-p),g,c((Wt*Ut+St)*y-p)),Zt=It,ft=Wt;break;case s.R:var ee=U[0],re=U[1];ee[0]=gt[Yt++],ee[1]=gt[Yt++],re[0]=ee[0]+gt[Yt++],re[1]=ee[1]+gt[Yt++],Rt&&(O(ee,ee,Rt),O(re,re,Rt)),ee[0]=c(ee[0]*y-p),re[0]=c(re[0]*y-p),ee[1]=c(ee[1]*y-p),re[1]=c(re[1]*y-p),Lt.push(" m ",ee[0],g,ee[1]," l ",re[0],g,ee[1]," l ",re[0],g,re[1]," l ",ee[0],g,re[1]);break;case s.Z:Lt.push(" x ")}if(Ct>0){Lt.push(jt);for(var de=0;de<Ct;de++){var Se=U[de];Rt&&O(Se,Se,Rt),Lt.push(c(Se[0]*y-p),g,c(Se[1]*y-p),de<Ct-1?g:"")}}}return Lt.join("")};o.prototype.brushVML=function(Dt){var Rt=this.style,Tt=this._vmlEl;Tt||(Tt=r.createNode("shape"),R(Tt),this._vmlEl=Tt),H(Tt,"fill",Rt,this),H(Tt,"stroke",Rt,this);var mt=this.transform,Nt=mt!=null,ct=Tt.getElementsByTagName("stroke")[0];if(ct){var vt=Rt.lineWidth;if(Nt&&!Rt.strokeNoScale){var Lt=mt[0]*mt[3]-mt[1]*mt[2];vt*=x(a(Lt))}ct.weight=vt+"px"}var Ct=this.path||(this.path=new h);this.__dirtyPath&&(Ct.beginPath(),Ct.subPixelOptimize=!1,this.buildPath(Ct,this.shape),Ct.toStatic(),this.__dirtyPath=!1),Tt.path=V(Ct,this.transform),Tt.style.zIndex=A(this.zlevel,this.z,this.z2),P(Dt,Tt),Rt.text!=null?this.drawRectText(Dt,this.getBoundingRect()):this.removeRectText(Dt)},o.prototype.onRemove=function(Dt){D(Dt,this._vmlEl),this.removeRectText(Dt)},o.prototype.onAdd=function(Dt){P(Dt,this._vmlEl),this.appendRectText(Dt)};var Y=function(Dt){return typeof Dt=="object"&&Dt.tagName&&Dt.tagName.toUpperCase()==="IMG"};v.prototype.brushVML=function(Dt){var Rt=this.style,Tt=Rt.image,mt,Nt;if(Y(Tt)){var ct=Tt.src;if(ct===this._imageSrc)mt=this._imageWidth,Nt=this._imageHeight;else{var vt=Tt.runtimeStyle,Lt=vt.width,Ct=vt.height;vt.width="auto",vt.height="auto",mt=Tt.width,Nt=Tt.height,vt.width=Lt,vt.height=Ct,this._imageSrc=ct,this._imageWidth=mt,this._imageHeight=Nt}Tt=ct}else Tt===this._imageSrc&&(mt=this._imageWidth,Nt=this._imageHeight);if(Tt){var jt=Rt.x||0,zt=Rt.y||0,Yt=Rt.width,Zt=Rt.height,ft=Rt.sWidth,gt=Rt.sHeight,dt=Rt.sx||0,lt=Rt.sy||0,ot=ft&&gt,it=this._vmlEl;it||(it=r.doc.createElement("div"),R(it),this._vmlEl=it);var yt=it.style,Ot=!1,St,Gt=1,Ut=1;if(this.transform&&(St=this.transform,Gt=x(St[0]*St[0]+St[1]*St[1]),Ut=x(St[2]*St[2]+St[3]*St[3]),Ot=St[1]||St[2]),Ot){var Kt=[jt,zt],Jt=[jt+Yt,zt],te=[jt,zt+Zt],ie=[jt+Yt,zt+Zt];O(Kt,Kt,St),O(Jt,Jt,St),O(te,te,St),O(ie,ie,St);var oe=u(Kt[0],Jt[0],te[0],ie[0]),he=u(Kt[1],Jt[1],te[1],ie[1]),ne=[];ne.push("M11=",St[0]/Gt,g,"M12=",St[2]/Ut,g,"M21=",St[1]/Gt,g,"M22=",St[3]/Ut,g,"Dx=",c(jt*Gt+St[4]),g,"Dy=",c(zt*Ut+St[5])),yt.padding="0 "+c(oe)+"px "+c(he)+"px 0",yt.filter=d+".Matrix("+ne.join("")+", SizingMethod=clip)"}else St&&(jt=jt*Gt+St[4],zt=zt*Ut+St[5]),yt.filter="",yt.left=c(jt)+"px",yt.top=c(zt)+"px";var ce=this._imageEl,ge=this._cropEl;ce||(ce=r.doc.createElement("div"),this._imageEl=ce);var Me=ce.style;if(ot){if(mt&&Nt)Me.width=c(Gt*mt*Yt/ft)+"px",Me.height=c(Ut*Nt*Zt/gt)+"px";else{var It=new Image,Wt=this;It.onload=function(){It.onload=null,mt=It.width,Nt=It.height,Me.width=c(Gt*mt*Yt/ft)+"px",Me.height=c(Ut*Nt*Zt/gt)+"px",Wt._imageWidth=mt,Wt._imageHeight=Nt,Wt._imageSrc=Tt},It.src=Tt}ge||(ge=r.doc.createElement("div"),ge.style.overflow="hidden",this._cropEl=ge);var _t=ge.style;_t.width=c((Yt+dt*Yt/ft)*Gt),_t.height=c((Zt+lt*Zt/gt)*Ut),_t.filter=d+".Matrix(Dx="+-dt*Yt/ft*Gt+",Dy="+-lt*Zt/gt*Ut+")",ge.parentNode||it.appendChild(ge),ce.parentNode!==ge&&ge.appendChild(ce)}else Me.width=c(Gt*Yt)+"px",Me.height=c(Ut*Zt)+"px",it.appendChild(ce),ge&&ge.parentNode&&(it.removeChild(ge),this._cropEl=null);var ee="",re=Rt.opacity;re<1&&(ee+=".Alpha(opacity="+c(re*100)+") "),ee+=d+".AlphaImageLoader(src="+Tt+", SizingMethod=scale)",Me.filter=ee,it.style.zIndex=A(this.zlevel,this.z,this.z2),P(Dt,it),Rt.text!=null&&this.drawRectText(Dt,this.getBoundingRect())}},v.prototype.onRemove=function(Dt){D(Dt,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(Dt)},v.prototype.onAdd=function(Dt){P(Dt,this._vmlEl),this.appendRectText(Dt)};var $="normal",K={},J=0,Q=100,et=document.createElement("div"),nt=function(Dt){var Rt=K[Dt];if(!Rt){J>Q&&(J=0,K={});var Tt=et.style,mt;try{Tt.font=Dt,mt=Tt.fontFamily.split(",")[0]}catch{}Rt={style:Tt.fontStyle||$,variant:Tt.fontVariant||$,weight:Tt.fontWeight||$,size:parseFloat(Tt.fontSize||12)|0,family:mt||"Microsoft YaHei"},K[Dt]=Rt,J++}return Rt},st;L.$override("measureText",function(Dt,Rt){var Tt=r.doc;st||(st=Tt.createElement("div"),st.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",r.doc.body.appendChild(st));try{st.style.font=Rt}catch{}return st.innerHTML="",st.appendChild(Tt.createTextNode(Dt)),{width:st.offsetWidth}});for(var ut=new M,rt=function(Dt,Rt,Tt,mt){var Nt=this.style;this.__dirty&&T.normalizeTextStyle(Nt,!0);var ct=Nt.text;if(ct!=null&&(ct+=""),!!ct){if(Nt.rich){var vt=L.parseRichText(ct,Nt);ct=[];for(var Lt=0;Lt<vt.lines.length;Lt++){for(var Ct=vt.lines[Lt].tokens,jt=[],zt=0;zt<Ct.length;zt++)jt.push(Ct[zt].text);ct.push(jt.join(""))}ct=ct.join(`
`)}var Yt,Zt,ft=Nt.textAlign,gt=Nt.textVerticalAlign,dt=nt(Nt.font),lt=dt.style+" "+dt.variant+" "+dt.weight+" "+dt.size+'px "'+dt.family+'"';Tt=Tt||L.getBoundingRect(ct,lt,ft,gt,Nt.textPadding,Nt.textLineHeight);var ot=this.transform;if(ot&&!mt&&(ut.copy(Rt),ut.applyTransform(ot),Rt=ut),mt)Yt=Rt.x,Zt=Rt.y;else{var it=Nt.textPosition;if(it instanceof Array)Yt=Rt.x+N(it[0],Rt.width),Zt=Rt.y+N(it[1],Rt.height),ft=ft||"left";else{var yt=this.calculateTextPosition?this.calculateTextPosition({},Nt,Rt):L.calculateTextPosition({},Nt,Rt);Yt=yt.x,Zt=yt.y,ft=ft||yt.textAlign,gt=gt||yt.textVerticalAlign}}Yt=L.adjustTextX(Yt,Tt.width,ft),Zt=L.adjustTextY(Zt,Tt.height,gt),Zt+=Tt.height/2;var Ot=r.createNode,St=this._textVmlEl,Gt,Ut,Kt;St?(Kt=St.firstChild,Gt=Kt.nextSibling,Ut=Gt.nextSibling):(St=Ot("line"),Gt=Ot("path"),Ut=Ot("textpath"),Kt=Ot("skew"),Ut.style["v-text-align"]="left",R(St),Gt.textpathok=!0,Ut.on=!0,St.from="0 0",St.to="1000 0.05",P(St,Kt),P(St,Gt),P(St,Ut),this._textVmlEl=St);var Jt=[Yt,Zt],te=St.style;ot&&mt?(O(Jt,Jt,ot),Kt.on=!0,Kt.matrix=ot[0].toFixed(3)+g+ot[2].toFixed(3)+g+ot[1].toFixed(3)+g+ot[3].toFixed(3)+",0,0",Kt.offset=(c(Jt[0])||0)+","+(c(Jt[1])||0),Kt.origin="0 0",te.left="0px",te.top="0px"):(Kt.on=!1,te.left=c(Yt)+"px",te.top=c(Zt)+"px"),Ut.string=B(ct);try{Ut.style.font=lt}catch{}H(St,"fill",{fill:Nt.textFill,opacity:Nt.opacity},this),H(St,"stroke",{stroke:Nt.textStroke,opacity:Nt.opacity,lineDash:Nt.lineDash||null},this),St.style.zIndex=A(this.zlevel,this.z,this.z2),P(Dt,St)}},ht=function(Dt){D(Dt,this._textVmlEl),this._textVmlEl=null},Pt=function(Dt){P(Dt,this._textVmlEl)},wt=[C,f,v,o,m],Mt=0;Mt<wt.length;Mt++){var Ft=wt[Mt].prototype;Ft.drawRectText=rt,Ft.removeRectText=ht,Ft.appendRectText=Pt}m.prototype.brushVML=function(Dt){var Rt=this.style;Rt.text!=null?this.drawRectText(Dt,{x:Rt.x||0,y:Rt.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(Dt)},m.prototype.onRemove=function(Dt){this.removeRectText(Dt)},m.prototype.onAdd=function(Dt){this.appendRectText(Dt)}}},432041:function(X,z,e){e(98805);var E=e(523593),F=E.registerPainter,O=e(94916);F("vml",O)},523593:function(X,z,e){var E=e(788242),F=e(358020),O=e(131879),M=e(806113),b=e(402970),L=e(137200),T=e(233491),C=e(235641);/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var f=!F.canvasSupported,v={canvas:L},m={},o="4.3.2";function h(a,i){var n=new x(E(),a,i);return m[n.id]=n,n}function l(a){if(a)a.dispose();else{for(var i in m)m.hasOwnProperty(i)&&m[i].dispose();m={}}return this}function r(a){return m[a]}function s(a,i){v[a]=i}function c(a){delete m[a]}var x=function(a,i,n){n=n||{},this.dom=i,this.id=a;var u=this,g=new b,d=n.renderer;if(f){if(!v.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");d="vml"}else(!d||!v[d])&&(d="canvas");var y=new v[d](i,g,n,a);this.storage=g,this.painter=y;var p=!F.node&&!F.worker?new C(y.getViewportRoot(),y.root):null;this.handler=new M(g,y,p,y.root),this.animation=new T({stage:{update:O.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var w=g.delFromStorage,S=g.addToStorage;g.delFromStorage=function(R){w.call(g,R),R&&R.removeSelfFromZr(u)},g.addToStorage=function(R){S.call(g,R),R.addSelfToZr(u)}};x.prototype={constructor:x,getId:function(){return this.id},add:function(a){this.storage.addRoot(a),this._needsRefresh=!0},remove:function(a){this.storage.delRoot(a),this._needsRefresh=!0},configLayer:function(a,i){this.painter.configLayer&&this.painter.configLayer(a,i),this._needsRefresh=!0},setBackgroundColor:function(a){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(a),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var a;this._needsRefresh&&(a=!0,this.refreshImmediately()),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately()),a&&this.trigger("rendered")},addHover:function(a,i){if(this.painter.addHover){var n=this.painter.addHover(a,i);return this.refreshHover(),n}},removeHover:function(a){this.painter.removeHover&&(this.painter.removeHover(a),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(a){a=a||{},this.painter.resize(a.width,a.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(a,i){return this.painter.pathToImage(a,i)},setCursorStyle:function(a){this.handler.setCursorStyle(a)},findHover:function(a,i){return this.handler.findHover(a,i)},on:function(a,i,n){this.handler.on(a,i,n)},off:function(a,i){this.handler.off(a,i)},trigger:function(a,i){this.handler.trigger(a,i)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,c(this.id)}},z.version=o,z.init=h,z.dispose=l,z.getInstance=r,z.registerPainter=s},607974:function(X,z,e){"use strict";X.exports=e.p+"static/img/waterNormals.ebf32d47.jpg"},367146:function(X,z,e){X.exports=e(287010)},304083:function(X,z,e){X.exports=e(121048)},708138:function(X,z,e){X.exports=e(193605)},194221:function(X,z,e){X.exports=e(198100)},666426:function(X,z,e){X.exports=e(425538)},25077:function(X,z,e){"use strict";e(26714),e(281522);var E=e(318893);X.exports=E("Array","flatMap")},147174:function(X,z,e){"use strict";var E=e(832242),F=e(799112),O=RegExp.prototype;X.exports=function(M){return M===O||E(O,M)?F(M):M.flags}},229586:function(X,z,e){"use strict";var E=e(832242),F=e(25077),O=Array.prototype;X.exports=function(M){var b=M.flatMap;return M===O||E(O,M)&&b===O.flatMap?F:b}},997803:function(X,z,e){"use strict";e(529992);var E=e(594388);X.exports=E.Math.tanh},719057:function(X,z,e){"use strict";e(621431);var E=e(594388);X.exports=E.Math.trunc},799112:function(X,z,e){"use strict";e(66420);var E=e(875899);X.exports=E},528779:function(X,z,e){"use strict";var E=e(267170),F=e(961159),O=e(733965),M=e(791492),b=function(L,T,C,f,v,m,o,h){for(var l=v,r=0,s=o?M(o,h):!1,c,x;r<f;)r in C&&(c=s?s(C[r],r,T):C[r],m>0&&E(c)?(x=F(c),l=b(L,T,c,x,l,m-1)-1):(O(l+1),L[l]=c),l++),r++;return l};X.exports=b},575169:function(X){"use strict";var z=Math.expm1,e=Math.exp;X.exports=!z||z(10)>22025.465794806718||z(10)<22025.465794806718||z(-2e-17)!==-2e-17?function(F){var O=+F;return O===0?O:O>-1e-6&&O<1e-6?O+O*O/2:e(O)-1}:z},26714:function(X,z,e){"use strict";var E=e(190434),F=e(528779),O=e(986735),M=e(619449),b=e(961159),L=e(235552);E({target:"Array",proto:!0},{flatMap:function(C){var f=M(this),v=b(f),m;return O(C),m=L(f,0),m.length=F(m,f,f,v,0,1,C,arguments.length>1?arguments[1]:void 0),m}})},281522:function(X,z,e){"use strict";var E=e(959747);E("flatMap")},529992:function(X,z,e){"use strict";var E=e(190434),F=e(575169),O=Math.exp;E({target:"Math",stat:!0},{tanh:function(b){var L=+b,T=F(L),C=F(-L);return T===1/0?1:C===1/0?-1:(T-C)/(O(L)+O(-L))}})},621431:function(X,z,e){"use strict";var E=e(190434),F=e(101686);E({target:"Math",stat:!0},{trunc:F})},66420:function(){},287010:function(X,z,e){"use strict";var E=e(147174);X.exports=E},121048:function(X,z,e){"use strict";var E=e(229586);X.exports=E},193605:function(X,z,e){"use strict";var E=e(997803);X.exports=E},198100:function(X,z,e){"use strict";var E=e(719057);X.exports=E}}]);
