"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[92021],{56279:function(y,r,i){i.d(r,{P:function(){return s}});var a=i(386892),d=i(149500);const s={mixins:[a.D],created(){},methods:{lifecycleBeforeChartsLoad(c){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&d.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),d.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let u=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[c]);if(u)return u}return c},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&d.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),d.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(y,r,i){i.d(r,{X:function(){return a},b:function(){return d}});let a={versions:function(){var s=navigator.userAgent;return{trident:s.indexOf("Trident")>-1,presto:s.indexOf("Presto")>-1,webKit:s.indexOf("AppleWebKit")>-1,gecko:s.indexOf("Gecko")>-1&&s.indexOf("KHTML")==-1,mobile:!!s.match(/AppleWebKit.*Mobile.*/),ios:!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:s.indexOf("Android")>-1,iPhone:s.indexOf("iPhone")>-1,iPad:s.indexOf("iPad")>-1,webApp:s.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},d;a.versions.mobile||a.versions.ios||a.versions.android||a.versions.iPhone||a.versions.iPad?d=!1:d=!0},844513:function(y,r,i){i.d(r,{Z:function(){return m}});var a=function(){var n=this,f=n._self._c;return n.attr.buttonHide?f("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(I){return n.onHide()}}},[n.openTooltip?f("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[f("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):f("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},d=[],s=i(752246),c={props:["attr"],name:"hide-button",data(){return{isPc:s.b}},computed:{openTooltip:function(){let h=!1,n=this.attr.buttonHideTooltipContent;return s.b&&n&&n!=null&&n.trim()!=""&&(h=!0),h}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},p=c,u=i(768141),b=(0,u.Z)(p,a,d,!1,null,"bf399b9a",null),m=b.exports},392021:function(y,r,i){i.r(r),i.d(r,{default:function(){return T}});var a=function(){var o=this,e=o._self._c;return e("div",{ref:"comButton",style:{width:o.widgetInfo.attr.w+"px",height:o.widgetInfo.attr.hh+"px",overflow:"hidden"}},[e("hide-button",{attrs:{attr:o.widgetInfo.attr}}),e("div",{staticClass:"btn-block",style:o.getButtonStyle(),on:{click:o.onClick}},[o.widgetInfo.config.buttonStyle.iconType!==""?[o.widgetInfo.config.buttonStyle.iconType=="icon"?e("span",{class:o.widgetInfo.config.buttonStyle.iconClass,style:{color:o.widgetInfo.config.buttonStyle.iconColor,fontSize:o.widgetInfo.config.buttonStyle.iconFontSize+"px"}}):e("span",[e("img",{style:{width:o.widgetInfo.config.buttonStyle.urlW+"px",verticalAlign:"baseline",height:o.widgetInfo.config.buttonStyle.urlH+"px"},attrs:{src:o.getUrl(o.widgetInfo.config.buttonStyle.url)}})])]:o._e(),o._v(" "+o._s(o.textInfo)+" ")],2)],1)},d=[],s=i(844513),c=i(927966),p=i(126711),u=i(445061),b=i(56279),m=i(555616),h=i(148836),n=i(275770),f=i(321300),I=i(67157);const v={mixins:[I.c],data(){return{config_extend:{},filter_config:{buttonStyle:{borderColor:"#4C84FF",color:"#ffffff",backgroundColor:"#4C84FF",fontFamily:"alibabaPuHuiTiRegular",iconColor:"rgba(255, 255, 255, 1)"}}}},methods:{filterPredefineColoursSchemeConfig(t,o){this.getNewConfigWithArrary(t,o,this.filter_config)}}};var w=i(149500),S={props:["widgetInfo"],name:"com-button",components:{HideButton:s.Z},mixins:[p.H,u.u,b.P,v],computed:{...(0,h.Se)(["getCanvasSettingInfo","getCanvasSetting"]),lockX(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedW},lockY(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedH}},data(){return{textInfo:"",content:"",widgetStatus:"leave",popWidgetStatus:"leave",actionType:JSON.parse(JSON.stringify(n.default)),permissionDisabled:!1}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(t){t.dataset[t.dataset.type]&&t.dataset[t.dataset.type].dimensions&&t.dataset[t.dataset.type].dimensions.length>0?this.textInfo=this.getFieldVal(t.dataset[t.dataset.type].source[0],t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].encode.text):this.textInfo=t.dataset[t.dataset.type].encode.text,this.lifecycleAfterLoad()},reLoadInfo(t){t&&(this.$refs.comButton.style.width=t.attr.w+"px",this.$refs.comButton.style.height=t.attr.hh+"px"),this.loadInfo(t)},getUrl(t){return t&&t!=""?f.appendImageBaseURL(t):null},getButtonStyle(){let t={cursor:"pointer",userSelect:"none",width:this.widgetInfo.config.buttonStyle.width+"px",height:this.widgetInfo.config.buttonStyle.height+"px",backgroundColor:this.widgetInfo.config.buttonStyle.backgroundColor,lineHeight:this.widgetInfo.config.buttonStyle.height+"px",margin:this.widgetInfo.global.marginTop+"px 0 0 "+this.widgetInfo.global.marginLeft+"px",borderRadius:this.widgetInfo.config.buttonStyle.borderRadius+"px",color:this.widgetInfo.config.buttonStyle.color,fontSize:this.widgetInfo.config.buttonStyle.fontSize+"px",fontFamily:this.widgetInfo.config.buttonStyle.fontFamily,fontWeight:this.widgetInfo.config.buttonStyle.fontWeight,fontStyle:this.widgetInfo.config.buttonStyle.fontStyle,textDecoration:this.widgetInfo.config.buttonStyle.textDecoration,textAlign:this.widgetInfo.config.buttonStyle.textAlign,border:this.widgetInfo.config.buttonStyle.borderWidth+"px solid "+this.widgetInfo.config.buttonStyle.borderColor};return this.permissionDisabled=f.getWidgetPermissionDisabled(this.widgetInfo,"disabled"),this.permissionDisabled==!0&&(t.cursor="not-allowed",t.filter="opacity(50%)"),t},initAction(t){this.actionReceive(t)},onClick(){if(this.permissionDisabled==!0)return;let t=this,o=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(o,e=>{if(e.enabled&&e.code==t.actionType.click.code){let g=e.code+"_"+t.widgetInfo.id,l={text:t.textInfo};if(e.paramsExtend&&e.paramsExtend.length>0){let x=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(x=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(l,e.paramsExtend,x,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(w.log("Execute script for "+this.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){m.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),l=this.customScript(l)}c.Z.$emit(g,l),e.postMessage&&this.doPostMessage(l),this.actionNameList.push(g)}else if(e.enabled&&e.code==t.actionType.openLink.code){let g={text:t.textInfo};if(e.paramsExtend&&e.paramsExtend.length>0){let l=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(l=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(g,e.paramsExtend,l,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(w.log("Execute script for "+e.name+" action"),e.script.content==""){m.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),g=this.customScript(g)}e.type===this.$$global_editor.linkType.dynamic.code&&(e[t.$$global_editor.linkType.dynamic.code].url=t.getActionUrl(e,t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0],t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)),this.openLinkAction(e,g)}})}}},C=S,L=i(768141),H=(0,L.Z)(C,a,d,!1,null,"bb8ef9f6",null),T=H.exports}}]);
