"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[9505],{56279:function(N,k,l){l.d(k,{P:function(){return g}});var m=l(386892),b=l(149500);const g={mixins:[m.D],created(){},methods:{lifecycleBeforeChartsLoad(v){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&b.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),b.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let h=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[v]);if(h)return h}return v},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&b.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),b.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(N,k,l){l.d(k,{X:function(){return m},b:function(){return b}});let m={versions:function(){var g=navigator.userAgent;return{trident:g.indexOf("Trident")>-1,presto:g.indexOf("Presto")>-1,webKit:g.indexOf("AppleWebKit")>-1,gecko:g.indexOf("Gecko")>-1&&g.indexOf("KHTML")==-1,mobile:!!g.match(/AppleWebKit.*Mobile.*/),ios:!!g.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:g.indexOf("Android")>-1,iPhone:g.indexOf("iPhone")>-1,iPad:g.indexOf("iPad")>-1,webApp:g.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},b;m.versions.mobile||m.versions.ios||m.versions.android||m.versions.iPhone||m.versions.iPad?b=!1:b=!0},134580:function(N,k,l){l.d(k,{Z:function(){return $}});var m=function(){var s=this,w=s._self._c;return w("span",[s._v(" "+s._s(s.displayValue)+" ")])},b=[];let g=0;const v="webkit moz ms o".split(" ");let p,h;if(typeof window>"u")p=function(){},h=function(){};else{p=window.requestAnimationFrame,h=window.cancelAnimationFrame;let d;for(let s=0;s<v.length&&!(p&&h);s++)d=v[s],p=p||window[d+"RequestAnimationFrame"],h=h||window[d+"CancelAnimationFrame"]||window[d+"CancelRequestAnimationFrame"];(!p||!h)&&(p=function(s){const w=new Date().getTime(),y=Math.max(0,16-(w-g)),C=window.setTimeout(()=>{s(w+y)},y);return g=w+y,C},h=function(s){window.clearTimeout(s)})}var A={name:"count-to",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:2,validator(d){return d>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(d,s,w,y){return w*(-Math.pow(2,-10*d/y)+1)*1024/1023+s}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{decimals(){this.start()},startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=p(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){h(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,p(this.count)},reset(){this.startTime=null,h(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(d){this.startTime||(this.startTime=d),this.timestamp=d;const s=d-this.startTime;this.remaining=this.localDuration-s,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(s,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(s,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(s/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(s/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),s<this.localDuration?this.rAF=p(this.count):this.$emit("callback")},isNumber(d){return!isNaN(parseFloat(d))},formatNumber(d){d=d.toFixed(this.decimals),d+="";const s=d.split(".");let w=s[0];const y=s.length>1?this.decimal+s[1]:"",C=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;C.test(w);)w=w.replace(C,"$1"+this.separator+"$2");return this.prefix+w+y+this.suffix}},destroyed(){h(this.rAF)}},I=A,c=l(768141),S=(0,c.Z)(I,m,b,!1,null,"696c34af",null),$=S.exports},844513:function(N,k,l){l.d(k,{Z:function(){return A}});var m=function(){var c=this,S=c._self._c;return c.attr.buttonHide?S("div",{style:{position:"absolute",right:c.attr.buttonHideRight+"px",top:c.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function($){return c.onHide()}}},[c.openTooltip?S("el-tooltip",{attrs:{"open-delay":1e3,content:c.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[S("el-button",{class:c.attr.buttonHideIconClass&&c.attr.buttonHideIconClass!=""?c.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:c.attr.buttonHideColor,fontSize:c.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):S("el-button",{class:c.attr.buttonHideIconClass&&c.attr.buttonHideIconClass!=""?c.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:c.attr.buttonHideColor,fontSize:c.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):c._e()},b=[],g=l(752246),v={props:["attr"],name:"hide-button",data(){return{isPc:g.b}},computed:{openTooltip:function(){let I=!1,c=this.attr.buttonHideTooltipContent;return g.b&&c&&c!=null&&c.trim()!=""&&(I=!0),I}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},p=v,h=l(768141),z=(0,h.Z)(p,m,b,!1,null,"bf399b9a",null),A=z.exports},409505:function(N,k,l){l.r(k),l.d(k,{default:function(){return E}});var m=function(){var i=this,e=i._self._c;return e("div",{ref:"listPaneText",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px",overflow:i.widgetInfo.config.global.openNextPage?"auto":"hidden"}},[e("hide-button",{attrs:{attr:i.widgetInfo.attr}}),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:i.resolveScroll,expression:"resolveScroll"}],staticClass:"list-pane-content",style:{overflow:i.widgetInfo.config.global.openNextPage?"auto":"",paddingLeft:i.mUtils.getNewPxW(i.widgetInfo.config.global.padding.left,i.widgetInfo)+"px",paddingTop:i.mUtils.getNewPxH(i.widgetInfo.config.global.padding.top,i.widgetInfo)+"px"}},i._l(i.totalListInfo,function(n,a){return e("div",{key:a,ref:"contentArea",refInFor:!0,style:i.getContentAreaStyle(i.widgetInfo.config.contentArea),on:{mouseenter:function(o){return i.setContentAreaStyle("enter",a)},mouseleave:function(o){return i.setContentAreaStyle("leave",a)}}},[e("div",{style:i.getTitleAreaStyle(i.widgetInfo.config.contentArea.title,i.widgetInfo.action,"",a),on:{click:function(o){i.onClick("areaTitle",n.area.title!=null?n.area.title:i.widgetInfo.config.contentArea.title.text,a)}}},[e("div",{class:"tspan-"+a,style:i.getTitleSpanStyle(i.widgetInfo.config.contentArea.title)},[e("span",[i._v(i._s(n.area.title!=null?n.area.title:i.widgetInfo.config.contentArea.title.text)+" ")])])]),i._l(i.widgetInfo.config.content,function(o,r){return e("div",{key:r,style:i.getContentStyle(o,i.widgetInfo.action,o.id,a),on:{click:function(u){i.onClick(o.id,i.$$lib__.isNaN(n.content[o.id].number)?"":n.content[o.id].number,a)}}},[e("div",{class:"title-"+a+"-"+r,style:i.getContentTitleStyle(o.title)},[e("span",[i._v(i._s(n.content[o.id].title!=null?n.content[o.id].title:o.title.text)+" ")])]),e("div",[e("div",{class:"prefix-"+a+"-"+r,style:i.getStylePrefix(o.prefix)},[e("span",[i._v(" "+i._s(o.prefix.lable)+" ")])]),e("el-tooltip",{attrs:{disabled:i.getShowTooltip(o.number,n.content[o.id].number),"open-delay":200,content:n.content[o.id].number+"",effect:o.number.effect,placement:"top"}},[i.$$lib__.isNaN(parseFloat(n.content[o.id].number))?e("div",[e("div",{class:"number-"+a+"-"+r,style:i.getStyleNumber(o.number)},[e("span",{directives:[{name:"show",rawName:"v-show",value:!!n.content[o.id].number,expression:"Boolean(li.content[con.id].number) "}]},[i._v(i._s(n.content[o.id].number))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!n.content[o.id].number,expression:"!Boolean(li.content[con.id].number)"}]},[i._v("-")])])]):e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:o.number.text,expression:"con.number.text"}]},[e("div",{class:"number-"+a+"-"+r,style:i.getStyleNumber(o.number)},[e("count-to",{directives:[{name:"show",rawName:"v-show",value:!i.$$lib__.isNaN(parseFloat(n.content[o.id].number)),expression:"! $$lib__.isNaN(parseFloat(li.content[con.id].number))"}],ref:"countTo",refInFor:!0,attrs:{endVal:parseFloat(n.content[o.id].number),duration:o.number.duration,decimals:o.number.decimals}}),e("span",{directives:[{name:"show",rawName:"v-show",value:i.$$lib__.isNaN(parseFloat(n.content[o.id].number)),expression:"$$lib__.isNaN(parseFloat(li.content[con.id].number))"}]},[i._v("-")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:!o.number.text,expression:"!con.number.text"}]},[e("div",{class:"number-"+a+"-"+r,style:i.getStyleNumber(o.number)},[o.number.scriptEnabled==!0?[e("span",{domProps:{innerHTML:i._s(i.getHtml(o,n.content[o.id].number))}})]:[e("span",{directives:[{name:"show",rawName:"v-show",value:!!n.content[o.id].number,expression:"Boolean(li.content[con.id].number) "}]},[i._v(i._s(n.content[o.id].number))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!n.content[o.id].number,expression:"!Boolean(li.content[con.id].number)"}]},[i._v("-")])]],2)])])]),e("div",{class:"suffix-"+a+"-"+r,style:i.getStyleSuffix(o.suffix)},[e("span",[i._v(" "+i._s(o.suffix.lable)+" ")])])],1)])})],2)}),0)],1)},b=[],g=l(42160),v=l(321300),p=l(134580),h=l(927966),z=l(193575),A=l(445061),I=l(126711),c=l(56279),S=l(8662),$=l(844513),d=l(616033),s=l(555616),w=l(67157);const y={mixins:[w.c],data(){return{config_extend:{config:{contentArea:{title:{hide:!0}},content:[{title:{left:12,top:5},prefix:{w:30}}]}},filter_config:{contentArea:{opacity:1,title:{opacity:1,label:{fontFamily:"Microsoft Yahei",color:"rgba(63, 67, 74, 1)",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}}},content:[{title:{opacity:1,label:{fontFamily:"alibabaPuHuiTiRegular",color:"#303133",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}},prefix:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"},number:{fontFamily:"alibabaPuHuiTiMedium",color:"#4C84FF",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"},suffix:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}}]}}},methods:{filterPredefineColoursSchemeConfig(t,i){this.getNewConfigWithArrary(t,i,this.filter_config)}}};var C=l(148836),x=l(149500),H={name:"list-pane-text",props:["widgetInfo"],components:{CountTo:p.Z,HideButton:$.Z},mixins:[d.baseConfig,A.u,I.H,c.P,z.E,y,S.j],data(){return{current:null,pageData:[],isLoading:!1,clickArea:{index:-1,selected:!1},widgetsList:[]}},computed:{...(0,C.Se)(["getCanvasSettingInfo","getCanvasSetting","getWidgets"]),totalListInfo:function(){return this.widgetInfo.config.global.openNextPage?[...this.pageData,...this.listInfo]:this.listInfo},listInfo:function(){return this.getListInfo(this.widgetInfo.dataset[this.widgetInfo.dataset.type],this.widgetInfo.config.contentArea,this.widgetInfo.config.content)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)},listInfo:function(t,i){this.isLoading&&(this.pageData=[...this.pageData,...i],this.isLoading=!1)}},methods:{loadInfo(t){this.sendTotal(t),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.widgetsList=this.getWidgetsList(),this.actionReceive(t);let i=t.action.receive.activeArea;i&&i.enabled&&this.doActiveArea(i.activeList,t)},doActiveArea(t,i){this.$$lib__.each(t,e=>{let n=e[0][0],a=e[0][1],o=e[0][2];if(o){let r=o.indexOf("|");r>-1&&(o=e[0][2].substring(r+1))}h.Z.$on(a,r=>{r||(r={}),r.widget_key=n,r.widget_name=this.getNameByKey(n),r.action_key=a,r.action_name=this.getNameByKey(a),i.action.receive.activeArea.script&&i.action.receive.activeArea.script.enabled?(x.log("Execute the script to execute model to the "+i.name+" component"),new Function("selfInfo","bizInfo","listInfo",i.action.receive.activeArea.script.content).apply(this,[i,r,this.totalListInfo])):this.activeArea(i,r,this.totalListInfo)})})},activeArea(t,i,e){let n=this;i.areaId&&e.forEach(function(a,o){a.area.key==i.areaId&&n.setContentAreaStyle("active",o)})},getListInfo(t,i,e){let n=[];return t.source.length||(t.source=[""]),this.$$lib__.each(t.source,a=>{let o={area:{title:"",key:""},content:{}};o.area.title=this.getFieldVal(a,t.dimensions,i.title.encode.field),i.title.encode.key!=""&&(o.area.key=this.getFieldVal(a,t.dimensions,i.title.encode.key)),this.$$lib__.each(e,r=>{let u={title:"",number:""};u.title=this.getFieldVal(a,t.dimensions,r.title.encode.field);let F=this.getFieldVal(a,t.dimensions,r.number.encode.field);u.number=F,g.default.set(o.content,r.id,u)}),n.push(o)}),n},resolveScroll(){this.widgetInfo.config.global.openNextPage&&this.widgetInfo.dataset.type!==this.$$global_editor.dataSourcType.static.code&&(this.isLoading||this.widgetInfo.dataset.dynamic.query.page.pageNum*this.widgetInfo.dataset.dynamic.query.page.pageSize>=this.widgetInfo.dataset.dynamic.total||(this.widgetInfo.dataset.dynamic.query.page.pageNum+=1,this.isLoading=!0,this.$emit("doGetPreviewData",this.widgetInfo)))},getContentAreaStyle(t){return{float:"left",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",height:this.mUtils.getNewPxH(t.h,this.widgetInfo)+"px",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",opacity:t.opacity,backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(t.backgroundImage),backgroundSize:t.backgroundSize}},getTitleAreaStyle(t,i,e,n){let a={height:this.mUtils.getNewPxH(t.h,this.widgetInfo)+"px",opacity:t.opacity,display:t.hide==!0?"none":"",paddingLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",paddingTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(t.backgroundImage),backgroundSize:t.backgroundSize,cursor:this.getCursor(i,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code,e)};return e+n===this.current&&(this.widgetInfo.config.contentArea.activeBackground.backgroundColor||this.widgetInfo.config.contentArea.activeBackground.backgroundImage)&&(a.backgroundColor=this.widgetInfo.config.contentArea.activeBackground.backgroundColor,a.backgroundImage=this.getImageUrl(this.widgetInfo.config.contentArea.activeBackground.backgroundImage),a.backgroundSize=this.widgetInfo.config.contentArea.activeBackground.backgroundSize),a},getTitleSpanStyle(t){let i={fontSize:this.mUtils.getNewFontSize(t.label.fontSize)+"px",fontFamily:t.label.fontFamily,color:t.label.color,fontWeight:t.label.fontWeight,fontStyle:t.label.fontStyle,textDecoration:t.label.textDecoration,textAlign:t.label.horizontalAlignment},e=t.label;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getContentStyle(t,i,e,n){let a={float:"left",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",height:this.mUtils.getNewPxH(t.h,this.widgetInfo)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(t.backgroundImage),backgroundSize:t.backgroundSize,cursor:this.getCursor(i,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code,e)};return e+n===this.current&&(this.widgetInfo.config.contentArea.activeBackground.backgroundColor||this.widgetInfo.config.contentArea.activeBackground.backgroundImage)&&(a.backgroundColor=this.widgetInfo.config.contentArea.activeBackground.backgroundColor,a.backgroundImage=this.getImageUrl(this.widgetInfo.config.contentArea.activeBackground.backgroundImage),a.backgroundSize=this.widgetInfo.config.contentArea.activeBackground.backgroundSize),a},getContentTitleStyle(t){let i={height:this.mUtils.getNewPxH(t.h,this.widgetInfo)+"px",opacity:t.opacity,display:t.hide==!0?"none":"",paddingLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",paddingTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(t.backgroundImage),backgroundSize:t.backgroundSize,fontSize:this.mUtils.getNewFontSize(t.label.fontSize)+"px",fontFamily:t.label.fontFamily,color:t.label.color,fontWeight:t.label.fontWeight,fontStyle:t.label.fontStyle,textDecoration:t.label.textDecoration,textAlign:t.label.horizontalAlignment},e=t.label;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStylePrefix(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleNumber(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"keep-all"},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleSuffix(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getShowTooltip(t,i){if(t.showTooltip){let e=0;return t.text&&!isNaN(parseFloat(i))?e=parseInt(i).toString().length+t.decimals:e=i.toString().length,isNaN(parseFloat(i))?t.w-e*t.fontSize>0:t.w-e*t.fontSize/3*2>0}else return!0},onClick(t,i,e){let n=this,a=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(a,o=>{if(o.enabled&&(t=="areaTitle"||o.contentId==t)&&o.code.indexOf(n.$$global_editor.actionType.click.code)>-1){n.widgetInfo.config.contentArea.activeCancel&&n.current==t+e?n.current="":n.current=t+e;let r=o.code+"_"+n.widgetInfo.id,u={text:i};if(u.checked=n.current!="",o.paramsExtend&&o.paramsExtend.length>0&&n.getExtendParams(u,o.paramsExtend,n.widgetInfo.dataset[n.widgetInfo.dataset.type].source[e],n.widgetInfo.dataset[n.widgetInfo.dataset.type].dimensions),o.script&&o.script.enabled){if(x.log("Execute script for "+o.name+" component to "+o.script.title+" component"),o.script.content==""){s.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}n.customScript_actionSend_clickParam=new Function("params",o.script.content),u=n.customScript_actionSend_clickParam(u)}x.log(u),h.Z.$emit(r,u),o.postMessage&&n.doPostMessage(u),n.actionNameList.push(r)}else if(o.enabled&&(t=="areaTitle"||o.contentId==t)&&o.code.indexOf(n.$$global_editor.actionType.openLink.code)>-1){n.widgetInfo.config.contentArea.activeCancel&&n.current==t+e?n.current="":n.current=t+e;let r={};if(r.checked=n.current!="",o.paramsExtend&&o.paramsExtend.length>0&&n.getExtendParams(r,o.paramsExtend,n.widgetInfo.dataset[n.widgetInfo.dataset.type].source[e],n.widgetInfo.dataset[n.widgetInfo.dataset.type].dimensions),o.type===this.$$global_editor.linkType.dynamic.code&&(o[n.$$global_editor.linkType.dynamic.code].url=n.getActionUrl(o,n.widgetInfo.dataset[n.widgetInfo.dataset.type].source[e],n.widgetInfo.dataset[n.widgetInfo.dataset.type].dimensions)),o.script&&o.script.enabled){if(x.log("Execute script for "+o.name+" component to "+o.script.title+" component"),o.script.content==""){s.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}n.customScript_actionSend_clickParam=new Function("params",o.script.content),r=n.customScript_actionSend_clickParam(r)}n.openLinkAction(o,r)}}),this.$nextTick(function(){n.setContentAreaStyle("active",e)})},replaceEmptyStyle(){let t=this.widgetInfo.config.contentArea;(!t.backgroundColor||t.backgroundColor==null)&&(t.backgroundColor=""),(!t.backgroundImage||t.backgroundImage==null)&&(t.backgroundImage=""),(!t.backgroundSize||t.backgroundSize==null)&&(t.backgroundSize=""),t.activeBackground||(t.activeBackground={}),(!t.activeBackground.backgroundColor||t.activeBackground.backgroundColor==null)&&(t.activeBackground.backgroundColor=""),(!t.activeBackground.backgroundImage||t.activeBackground.backgroundImage==null)&&(t.activeBackground.backgroundImage=""),(!t.activeBackground.backgroundSize||t.activeBackground.backgroundSize==null)&&(t.activeBackground.backgroundSize=""),t.allActiveBackground||(t.allActiveBackground={}),(!t.allActiveBackground.backgroundColor||t.allActiveBackground.backgroundColor==null)&&(t.allActiveBackground.backgroundColor=""),(!t.allActiveBackground.backgroundImage||t.allActiveBackground.backgroundImage==null)&&(t.allActiveBackground.backgroundImage=""),(!t.allActiveBackground.backgroundSize||t.allActiveBackground.backgroundSize==null)&&(t.allActiveBackground.backgroundSize=""),t.hoverStyle||(t.hoverStyle={}),(!t.hoverStyle.backgroundColor||t.hoverStyle.backgroundColor==null)&&(t.hoverStyle.backgroundColor=""),(!t.hoverStyle.backgroundImage||t.hoverStyle.backgroundImage==null)&&(t.hoverStyle.backgroundImage=""),(!t.hoverStyle.backgroundSize||t.hoverStyle.backgroundSize==null)&&(t.hoverStyle.backgroundSize=""),(!t.hoverStyle.color||t.hoverStyle.color==null)&&(t.hoverStyle.color="")},setContentAreaStyle(t,i){this.replaceEmptyStyle();let e=this.widgetInfo.config.contentArea;if(t=="active")for(let a=0;a<this.$refs.contentArea.length;a++){let o=this.$refs.contentArea[a];a==i?(this.clickArea.index!=i||!this.clickArea.selected?(e.allActiveBackground.backgroundColor!=""&&(o.style.backgroundColor=e.allActiveBackground.backgroundColor),e.allActiveBackground.backgroundImage!=""&&(o.style.backgroundImage=this.getImageUrl(e.allActiveBackground.backgroundImage)),e.allActiveBackground.backgroundSize!=""&&(o.style.backgroundSize=e.allActiveBackground.backgroundSize),this.clickArea.selected=!0):e.activeCancel&&(o.style.backgroundColor=e.backgroundColor,o.style.backgroundImage=this.getImageUrl(e.backgroundImage),o.style.backgroundSize=e.backgroundSize,this.clickArea.selected=!1),this.clickArea.index=i):(o.style.backgroundColor=e.backgroundColor,o.style.backgroundImage=this.getImageUrl(e.backgroundImage),o.style.backgroundSize=e.backgroundSize),this.setHoverFontColor(!1,o,i)}let n=!1;if(e.hoverStyle&&(e.hoverStyle.backgroundColor!=""||e.hoverStyle.backgroundImage!=""||e.hoverStyle.backgroundSize!=""||e.hoverStyle.color!="")&&(n=!0),n){for(let a=0;a<this.$refs.contentArea.length;a++){let o=this.$refs.contentArea[a];t=="enter"&&a==i?(e.hoverStyle.backgroundColor!=""&&(o.style.backgroundColor=e.hoverStyle.backgroundColor),e.hoverStyle.backgroundImage!=""&&(o.style.backgroundImage=this.getImageUrl(e.hoverStyle.backgroundImage)),e.hoverStyle.backgroundSize!=""&&(o.style.backgroundSize=e.hoverStyle.backgroundSize),e.hoverStyle.color!=""&&this.setHoverFontColor(!0,o,i)):this.clickArea.index!=a&&(o.style.backgroundColor=e.backgroundColor,o.style.backgroundImage=this.getImageUrl(e.backgroundImage),o.style.backgroundSize=e.backgroundSize,this.setHoverFontColor(!1,o,i))}t=="leave"&&(this.clickArea.index==i&&this.clickArea.selected?(e.allActiveBackground.backgroundColor!=""?this.$refs.contentArea[i].style.backgroundColor=e.allActiveBackground.backgroundColor:this.$refs.contentArea[i].style.backgroundColor=e.backgroundColor,e.allActiveBackground.backgroundImage!=""?this.$refs.contentArea[i].style.backgroundImage=this.getImageUrl(e.allActiveBackground.backgroundImage):this.$refs.contentArea[i].style.backgroundImage=this.getImageUrl(e.backgroundImage),e.allActiveBackground.backgroundSize!=""?this.$refs.contentArea[i].style.backgroundSize=e.allActiveBackground.backgroundSize:this.$refs.contentArea[i].style.backgroundSize=e.backgroundSize):(this.$refs.contentArea[i].style.backgroundColor=e.backgroundColor,this.$refs.contentArea[i].style.backgroundImage=this.getImageUrl(e.backgroundImage),this.$refs.contentArea[i].style.backgroundSize=e.backgroundSize),this.setHoverFontColor(!1,this.$refs.contentArea[i],i))}},setHoverFontColor(t,i,e){this.replaceEmptyStyle();let n=this.widgetInfo.config.contentArea;if(n.hoverStyle&&n.hoverStyle.color!="")for(let a=0;a<this.widgetInfo.config.content.length;a++){let o=this.widgetInfo.config.content[a],r=i.querySelectorAll(".suffix-"+e+"-"+a),u=i.querySelectorAll(".number-"+e+"-"+a),F=i.querySelectorAll(".prefix-"+e+"-"+a),U=i.querySelectorAll(".title-"+e+"-"+a),V=i.querySelectorAll(".tspan-"+e),T="",_="",B="",L="",P="";t?T=_=B=L=P=n.hoverStyle.color:(T=o.suffix.color,_=o.number.color,B=o.prefix.color,L=P=o.title.label.color);for(let f=0;f<r.length;f++)r[f].style.color=T;for(let f=0;f<u.length;f++)u[f].style.color=_;for(let f=0;f<F.length;f++)F[f].style.color=B;for(let f=0;f<U.length;f++)U[f].style.color=L;for(let f=0;f<V.length;f++)V[f].style.color=P}},getCursor(t,i,e,n){let a="default";if(t==null||t.sendOut==null||t.sendOut.actionList==null)return a;let o=t.sendOut.actionList;return this.$$lib__.find(o,u=>u.contentId==n&&(u.code.indexOf(i)>-1||u.code.indexOf(e)>-1)&&u.enabled)&&(a="pointer"),a},getImageUrl(t){return t&&t!=""?"url("+v.appendImageBaseURL(t)+")":""},getHtml(t,i){(!t.number.scriptContent||t.number.scriptContent=="")&&x.warn("\u5185\u5BB9\uFF1A"+t.lable+"\u7684\u811A\u672C\u4E3A\u7A7A"),x.info("\u6267\u884C\u5185\u5BB9\uFF1A"+t.lable+"\u7684\u811A\u672C\u4E3A\u7A7A");let n=new Function("content","text",t.number.scriptContent).apply(this,[t,i]);return n||i},getWidgetsList(){let t=[];for(let i in this.getWidgets){let e=this.getWidgets[i];if(e.action&&e.action.sendOut&&e.action.sendOut.actionList){let n=[];this.$$lib__.each(e.action.sendOut.actionList,a=>{let o={value:a.code+"_"+i,label:a.name};if(this.is_bind_param){o.children=[];for(let r in a.params)o.children.push({value:a.code+"_"+i+"|"+r,label:r})}n.push(o)}),n.length>0&&t.push({value:e.id,label:e.name,children:n})}}if(this.getCanvasSetting.action&&this.getCanvasSetting.action.sendOut){let i=[];this.$$lib__.each(this.getCanvasSetting.action.sendOut.actionList,e=>{let n={value:e.code+"_canvas",label:e.name};if(this.is_bind_param){n.children=[];for(let a in e.params)n.children.push({value:e.code+"_canvas|"+a,label:a})}i.push(n)}),i.length>0&&t.push({value:this.$$global.sysGuid.datavisual.canvasId,label:this.$$global.sysGuid.datavisual.canvasName,children:i})}return t},getNameByKey(t){x.log(this.widgetsList);let i="";return this.widgetsList.forEach(function(e){e.value==t&&(i=e.label),i==""&&e.children.forEach(function(n){n.value==t&&(i=n.label)})}),i}}},W=H,D=l(768141),O=(0,D.Z)(W,m,b,!1,null,"7f7671f5",null),E=O.exports}}]);
