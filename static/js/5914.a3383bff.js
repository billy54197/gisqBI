"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[5914],{56279:function(_,I,d){d.d(I,{P:function(){return S}});var A=d(86892),k=d(49500);const S={mixins:[A.D],created(){},methods:{lifecycleBeforeChartsLoad(x){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&k.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),k.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let m=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[x]);if(m)return m}return x},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&k.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),k.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},34580:function(_,I,d){d.d(I,{Z:function(){return z}});var A=function(){var g=this,y=g._self._c;return y("span",[g._v(" "+g._s(g.displayValue)+" ")])},k=[];let S=0;const x="webkit moz ms o".split(" ");let p,m;if(typeof window>"u")p=function(){},m=function(){};else{p=window.requestAnimationFrame,m=window.cancelAnimationFrame;let h;for(let g=0;g<x.length&&!(p&&m);g++)h=x[g],p=p||window[h+"RequestAnimationFrame"],m=m||window[h+"CancelAnimationFrame"]||window[h+"CancelRequestAnimationFrame"];(!p||!m)&&(p=function(g){const y=new Date().getTime(),w=Math.max(0,16-(y-S)),T=window.setTimeout(()=>{g(y+w)},w);return S=y+w,T},m=function(g){window.clearTimeout(g)})}var B={name:"count-to",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:2,validator(h){return h>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(h,g,y,w){return y*(-Math.pow(2,-10*h/w)+1)*1024/1023+g}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{decimals(){this.start()},startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=p(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){m(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,p(this.count)},reset(){this.startTime=null,m(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(h){this.startTime||(this.startTime=h),this.timestamp=h;const g=h-this.startTime;this.remaining=this.localDuration-g,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(g,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(g,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(g/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(g/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),g<this.localDuration?this.rAF=p(this.count):this.$emit("callback")},isNumber(h){return!isNaN(parseFloat(h))},formatNumber(h){h=h.toFixed(this.decimals),h+="";const g=h.split(".");let y=g[0];const w=g.length>1?this.decimal+g[1]:"",T=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;T.test(y);)y=y.replace(T,"$1"+this.separator+"$2");return this.prefix+y+w+this.suffix}},destroyed(){m(this.rAF)}},N=B,f=d(68141),C=(0,f.Z)(N,A,k,!1,null,"696c34af",null),z=C.exports},44513:function(_,I,d){d.d(I,{Z:function(){return B}});var A=function(){var f=this,C=f._self._c;return f.attr.buttonHide?C("div",{style:{position:"absolute",right:f.attr.buttonHideRight+"px",top:f.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(z){return f.onHide()}}},[f.openTooltip?C("el-tooltip",{attrs:{"open-delay":1e3,content:f.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[C("el-button",{class:f.attr.buttonHideIconClass&&f.attr.buttonHideIconClass!=""?f.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:f.attr.buttonHideColor,fontSize:f.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):C("el-button",{class:f.attr.buttonHideIconClass&&f.attr.buttonHideIconClass!=""?f.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:f.attr.buttonHideColor,fontSize:f.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):f._e()},k=[],S=d(52246),x={props:["attr"],name:"hide-button",data(){return{isPc:S.b}},computed:{openTooltip:function(){let N=!1,f=this.attr.buttonHideTooltipContent;return S.b&&f&&f!=null&&f.trim()!=""&&(N=!0),N}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},p=x,m=d(68141),P=(0,m.Z)(p,A,k,!1,null,"bf399b9a",null),B=P.exports},15914:function(_,I,d){d.r(I),d.d(I,{default:function(){return H}});var A=function(){var i=this,e=i._self._c;return e("div",{ref:"listPaneText",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px",overflow:"hidden"}},[e("hide-button",{attrs:{attr:i.widgetInfo.attr}}),e("el-carousel",{ref:"myCarousel",attrs:{height:i.widgetInfo.attr.hh+"px",autoplay:i.widgetInfo.config.carouselAttr.autoplay,interval:i.widgetInfo.config.carouselAttr.interval*1e3,trigger:i.widgetInfo.config.carouselAttr.trigger,indicatorPosition:i.widgetInfo.config.carouselAttr.indicatorPosition,arrow:i.widgetInfo.config.carouselAttr.arrow,type:i.widgetInfo.config.carouselAttr.type,loop:i.widgetInfo.config.carouselAttr.loop,direction:i.widgetInfo.config.carouselAttr.direction},on:{change:i.onChangeAction}},i._l(i.carouselItem,function(n,o){return e("el-carousel-item",{key:o,attrs:{label:i.widgetInfo.config.carouselAttr.label&&i.widgetInfo.config.carouselAttr.indicatorType!="diamond"?n.label:" "}},[e("div",{style:{paddingLeft:i.mUtils.getNewPxW(i.widgetInfo.config.global.padding.left)+"px",paddingTop:i.mUtils.getNewPxH(i.widgetInfo.config.global.padding.top)+"px"}},i._l(n.listInfo,function(r,l){return e("div",{key:l,ref:"contentArea",refInFor:!0,style:i.getContentAreaStyle(i.widgetInfo.config.contentArea,r.area.areaImage),attrs:{index:o+"-"+l}},[e("div",{style:i.getTitleAreaStyle(i.widgetInfo.config.contentArea.title,i.widgetInfo.action,"",r.area.areaTitleImage,o,l),on:{click:function(a){return i.onClick("areaTitle",r.area.title!=null?r.area.title:i.widgetInfo.config.contentArea.title.text,o,l)}}},[e("span",[i._v(i._s(r.area.title!=null?r.area.title:i.widgetInfo.config.contentArea.title.text)+" ")])]),i._l(i.widgetInfo.config.content,function(a,s){return e("div",{key:s,style:i.getContentStyle(a,i.widgetInfo.action,a.id,r.content[a.id].contentImage,o,l),on:{click:function(c){i.onClick(a.id,i.lib_.isNaN(r.content[a.id].number)?"":r.content[a.id].number,o,l)}}},[e("div",{class:"title-"+o+"-"+l+"-"+s,style:i.getContentTitleStyle(a.title,r.content[a.id].contentTitleImage)},[e("span",[i._v(i._s(r.content[a.id].title!=null?r.content[a.id].title:a.title.text)+" ")])]),e("div",[e("div",{class:"prefix-"+o+"-"+l+"-"+s,style:i.getStylePrefix(a.prefix)},[e("span",[i._v(" "+i._s(a.prefix.lable)+" ")])]),e("el-tooltip",{attrs:{disabled:i.getShowTooltip(a.number,r.content[a.id].number),"open-delay":200,content:r.content[a.id].number+"",effect:a.number.effect,placement:"top"}},[i.lib_.isNaN(parseFloat(r.content[a.id].number))?e("div",[e("div",{class:"number-"+o+"-"+l+"-"+s,style:i.getStyleNumber(a.number,r.content[a.id],o,l)},[e("span",{directives:[{name:"show",rawName:"v-show",value:!!r.content[a.id].number,expression:"Boolean(li.content[con.id].number)"}]},[i._v(i._s(r.content[a.id].number))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!r.content[a.id].number,expression:"!Boolean(li.content[con.id].number)"}]},[i._v("-")])])]):e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:a.number.text,expression:"con.number.text"}]},[e("div",{class:"number-"+o+"-"+l+"-"+s,style:i.getStyleNumber(a.number,r.content[a.id],o,l)},[e("count-to",{directives:[{name:"show",rawName:"v-show",value:!i.lib_.isNaN(parseFloat(r.content[a.id].number)),expression:"!lib_.isNaN(parseFloat(li.content[con.id].number))"}],ref:"countTo",refInFor:!0,attrs:{endVal:parseFloat(r.content[a.id].number),duration:a.number.duration,decimals:a.number.decimals}}),e("span",{directives:[{name:"show",rawName:"v-show",value:i.lib_.isNaN(parseFloat(r.content[a.id].number)),expression:"lib_.isNaN(parseFloat(li.content[con.id].number))"}]},[i._v("-")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:!a.number.text,expression:"!con.number.text"}]},[e("div",{class:"number-"+o+"-"+l+"-"+s,style:i.getStyleNumber(a.number,r.content[a.id])},[a.number.scriptEnabled==!0?[e("span",{domProps:{innerHTML:i._s(i.getHtml(a,r.content[a.id].number))}})]:[e("span",{directives:[{name:"show",rawName:"v-show",value:!!r.content[a.id].number,expression:"Boolean(li.content[con.id].number)"}]},[i._v(i._s(r.content[a.id].number))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!r.content[a.id].number,expression:"!Boolean(li.content[con.id].number)"}]},[i._v("-")])]],2)])])]),e("div",{class:"suffix-"+o+"-"+l+"-"+s,style:i.getStyleSuffix(a.suffix)},[e("span",[i._v(" "+i._s(a.suffix.lable)+" ")])])],1)])})],2)}),0)])}),1)],1)},k=[],S=d(42160),x=d(21300),p=d(34580),m=d(27966),P=d(45061),B=d(26711),N=d(56279),f=d(8662),C=d(44513),z=d(66059),h=d(55616),g=d(67157);const y={mixins:[g.c],data(){return{config_extend:{config:{global:{padding:{left:53}},carouselAttr:{indicatorActiveBgc:"#4C84FF"},contentArea:{top:10,left:5,title:{hide:!0}},content:[{left:1,title:{left:11,top:2}}]}},filter_config:{carouselAttr:{indicatorBgc:"#C4C4C4",indicatorActiveBgc:"#4C84FF"},contentArea:{opacity:1,title:{opacity:1,label:{fontFamily:"Microsoft Yahei",color:"rgba(63, 67, 74, 1)",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}},backgroundColor:"rgba(255,255,255,0)"},content:[{borderColor:"",activeBorderColor:"",title:{opacity:1,label:{fontFamily:"alibabaPuHuiTiRegular",color:"#303133",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}},prefix:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"},number:{fontFamily:"alibabaPuHuiTiMedium",color:"#4C84FF",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"},suffix:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}}]}}},methods:{filterPredefineColoursSchemeConfig(t,i){this.getNewConfigWithArrary(t,i,this.filter_config)}}};var w=d(49500),T={name:"list-carousel-text",props:["widgetInfo"],components:{CountTo:p.Z,HideButton:C.Z},mixins:[z.u,P.u,B.H,y,N.P,f.j],data(){return{current:null,clickArea:{index:-1,selected:!1},lib_:this.$$lib__}},computed:{carouselItem:function(){return this.getListInfo(this.widgetInfo.dataset[this.widgetInfo.dataset.type],this.widgetInfo.config.contentArea,this.widgetInfo.config.content,this.widgetInfo.config.global.pageSize)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(t){this.sendTotal(t),this.setArrowStyle(t),this.setIndicatorPosition(t),setTimeout(()=>{this.setIndicatorStyle(t,0)},500),this.$nextTick(()=>{this.widgetInfo.config.carouselAttr.touchable&&this.slideBanner()}),w.debug(t),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.actionReceive(t)},setArrowStyle(t){let i=this.$refs.myCarousel.$el.childNodes[0].childNodes;i[0].className&&i[0].className.indexOf("el-carousel__arrow--left")>-1&&(i[0].style.left=this.mUtils.getNewPxW(t.config.global.leftArrowL)+"px",i[0].style.top=this.mUtils.getNewPxH(t.config.global.leftArrowT)+"px"),i[1].className&&i[1].className.indexOf("el-carousel__arrow--right")>-1&&(i[1].style.right=this.mUtils.getNewPxW(t.config.global.rightArrowL)+"px",i[1].style.top=this.mUtils.getNewPxH(t.config.global.rightArrowT)+"px")},setIndicatorPosition(t){let i=this.$refs.myCarousel.$el,e=this.$refs.myCarousel.$el.childNodes[1];i.className&&i.className.indexOf("el-carousel")>-1&&e.className&&e.className.indexOf("el-carousel__indicators")>-1&&(t.config.carouselAttr.indicatorPosition==="custom"?(i.parentNode.style.position="relative",i.style.position="static",e.style.bottom=this.mUtils.getNewPxH(t.config.carouselAttr.indicatorBottom)+"px",e.style.left=this.mUtils.getNewPxW(t.config.carouselAttr.indicatorLeft)+"px",e.style.top="auto",e.style.right="auto",e.style.transform="none",e.style.position="absolute"):t.config.carouselAttr.indicatorPosition==="\u2014"&&t.config.carouselAttr.direction==="vertical"?(e.style.bottom="auto",e.style.left="auto",e.style.transform="translateY(-50%)"):e.style="")},setIndicatorStyle(t,i){let e=5;t.config.carouselAttr.pagerCount&&(e=t.config.carouselAttr.pagerCount);let n=(e-1)/2;if(t.config.carouselAttr.indicatorPosition==="none")return;let o=this.$refs.myCarousel.$el.childNodes;if(o&&o[1]&&o[1].className&&o[1].className.indexOf("el-carousel__indicators")>-1){let r=o[1].childNodes,l=r.length;for(let a=0;a<l;a++){let s=r[a];this.setNode(t,s,i,a),l>e&&(i==0?a<e-1||a==l-1?(s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):a==e-1?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px",s.style.display=""):s.style.display="none":i==l-1?a>l-e||a==0?(s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):a==l-e?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px",s.style.display=""):s.style.display="none":i<e-1?a<e-1||a==l-1?(s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):a==e-1?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px"):s.style.display="none":i>l-e?a>l-e||a==0?(s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):a==l-e?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px"):s.style.display="none":a==0||a==l-1||a>=i-n&&a<=i+n?(a==i-n||a==i+n?(s.childNodes[0].childNodes[0].textContent="...",s.style.width="30px"):s.childNodes[0].childNodes[0].textContent=a+1,s.style.display=""):s.style.display="none")}}},setNode(t,i,e,n){let o=i.childNodes[0];i.style.padding="6px "+this.mUtils.getNewPxW(t.config.carouselAttr.indicatorSpacing)+"px",o.style.backgroundColor=t.config.carouselAttr.indicatorBgc,o.style.opacity=1,o.style.color=t.config.carouselAttr.inactiveColor,o.style.width="100%",o.style.height="100%",o.style.textAlign="center",o.style.padding="2px 0",t.config.carouselAttr.indicatorType=="react"?(i.style.width=this.mUtils.getNewPxW(t.config.carouselAttr.indicatorW)+"px",i.style.height=this.mUtils.getNewPxH(t.config.carouselAttr.indicatorH)+"px",o.style.borderRadius="0px",o.style.transform="skew(0deg, 0deg)"):t.config.carouselAttr.indicatorType=="circle"?(i.style.width=this.mUtils.getNewPxW(t.config.carouselAttr.indicatorSize)+"px",i.style.height=this.mUtils.getNewPxH(t.config.carouselAttr.indicatorSize)+"px",o.style.borderRadius=t.config.carouselAttr.indicatorSize+"px",o.style.transform="skew(0deg, 0deg)"):t.config.carouselAttr.indicatorType=="diamond"&&(i.style.width=this.mUtils.getNewPxW(t.config.carouselAttr.indicatorW)+"px",i.style.height=this.mUtils.getNewPxH(t.config.carouselAttr.indicatorH)+"px",o.style.borderRadius="0px",o.style.transform="skew(-50deg, 0deg)"),e>=0?e===n&&(o.style.color=t.config.carouselAttr.activeColor,o.style.backgroundColor=t.config.carouselAttr.indicatorActiveBgc):i.className.indexOf("is-active")>-1&&(o.style.color=t.config.carouselAttr.activeColor,o.style.backgroundColor=t.config.carouselAttr.indicatorActiveBgc)},getListInfo(t,i,e,n){let o=0,r=0,l=this.setCarouselItem(t.source.length,n);return t.source.length||(t.source=[""]),this.lib_.each(t.source,a=>{let s=this.getFieldVal2(a,t.dimensions,{areaTitle:i.title.encode.field,areaTitleImage:i.title.encode.image,areaImage:i.imageField}),c={area:{title:s.areaTitle,areaTitleImage:s.areaTitleImage,areaImage:s.areaImage},content:{}};this.lib_.each(e,u=>{let v=this.getFieldVal2(a,t.dimensions,{title:u.title.encode.field,number:u.number.encode.field,contentTitleImage:u.title.encode.image,contentImage:u.imageField,numberImage:u.number.imageField}),F={title:v.title,number:v.number,contentTitleImage:v.contentTitleImage,contentImage:v.contentImage,numberImage:v.numberImage};S.default.set(c.content,u.id,F)}),l[r]&&l[r].listInfo.push(JSON.parse(JSON.stringify(c))),o+1==n?(r++,o=0):o++}),l},setCarouselItem(t,i){let e=[],n=Math.ceil(t/i),o="",r="";this.widgetInfo.config.carouselAttr.indicatorPrefix&&(o=this.widgetInfo.config.carouselAttr.indicatorPrefix),this.widgetInfo.config.carouselAttr.indicatorSuffix&&(r=this.widgetInfo.config.carouselAttr.indicatorSuffix);for(let l=0;l<n;l++)e.push({name:l,label:o+(l+1)+r,listInfo:[]});return e},getContentAreaStyle(t,i){return{float:"left",width:this.mUtils.getNewPxW(t.w)+"px",height:this.mUtils.getNewPxH(t.h)+"px",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",opacity:t.opacity,backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(i??t.backgroundImage),backgroundSize:t.backgroundSize}},replaceEmptyStyle(){let t=this.widgetInfo.config.contentArea;(!t.backgroundColor||t.backgroundColor==null)&&(t.backgroundColor=""),(!t.backgroundImage||t.backgroundImage==null)&&(t.backgroundImage=""),(!t.backgroundSize||t.backgroundSize==null)&&(t.backgroundSize=""),t.activeBackground||(t.activeBackground={}),(!t.activeBackground.backgroundColor||t.activeBackground.backgroundColor==null)&&(t.activeBackground.backgroundColor=""),(!t.activeBackground.backgroundImage||t.activeBackground.backgroundImage==null)&&(t.activeBackground.backgroundImage=""),(!t.activeBackground.backgroundSize||t.activeBackground.backgroundSize==null)&&(t.activeBackground.backgroundSize=""),t.allActiveBackground||(t.allActiveBackground={}),(!t.allActiveBackground.backgroundColor||t.allActiveBackground.backgroundColor==null)&&(t.allActiveBackground.backgroundColor=""),(!t.allActiveBackground.backgroundImage||t.allActiveBackground.backgroundImage==null)&&(t.allActiveBackground.backgroundImage=""),(!t.allActiveBackground.backgroundSize||t.allActiveBackground.backgroundSize==null)&&(t.allActiveBackground.backgroundSize=""),t.hoverStyle||(t.hoverStyle={}),(!t.hoverStyle.backgroundColor||t.hoverStyle.backgroundColor==null)&&(t.hoverStyle.backgroundColor=""),(!t.hoverStyle.backgroundImage||t.hoverStyle.backgroundImage==null)&&(t.hoverStyle.backgroundImage=""),(!t.hoverStyle.backgroundSize||t.hoverStyle.backgroundSize==null)&&(t.hoverStyle.backgroundSize=""),(!t.hoverStyle.color||t.hoverStyle.color==null)&&(t.hoverStyle.color="")},setContentAreaStyle(t,i){this.replaceEmptyStyle();let e=this.widgetInfo.config.contentArea;if(t=="active")for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o],l=r.getAttribute("index"),a="";if(l&&l!=""&&l.split("-").length==2){let s=parseInt(l.split("-")[0]),c=parseInt(l.split("-")[1]);this.carouselItem[s]&&this.carouselItem[s].listInfo[c]&&(a=this.carouselItem[s].listInfo[c].area.areaImage)}l==i?(this.clickArea.index!=i||!this.clickArea.selected?(e.allActiveBackground.backgroundColor!=""&&(r.style.backgroundColor=e.allActiveBackground.backgroundColor),e.allActiveBackground.backgroundImage!=""&&(r.style.backgroundImage=this.getImageUrl(e.allActiveBackground.backgroundImage)),e.allActiveBackground.backgroundSize!=""&&(r.style.backgroundSize=e.allActiveBackground.backgroundSize),this.clickArea.selected=!0):e.activeCancel&&(r.style.backgroundColor=e.backgroundColor,r.style.backgroundImage=this.getImageUrl(a&&a!=""?a:e.backgroundImage),r.style.backgroundSize=e.backgroundSize,this.clickArea.selected=!1),this.clickArea.index=i):(r.style.backgroundColor=e.backgroundColor,r.style.backgroundImage=this.getImageUrl(a&&a!=""?a:e.backgroundImage),r.style.backgroundSize=e.backgroundSize),this.setHoverFontColor(!1,r,i)}let n=!1;if(e.hoverStyle&&(e.hoverStyle.backgroundColor!=""||e.hoverStyle.backgroundImage!=""||e.hoverStyle.backgroundSize!=""||e.hoverStyle.color!="")&&(n=!0),n){for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o],l=r.getAttribute("index");t=="enter"&&l==i?(e.hoverStyle.backgroundColor!=""&&(r.style.backgroundColor=e.hoverStyle.backgroundColor),e.hoverStyle.backgroundImage!=""&&(r.style.backgroundImage=this.getImageUrl(e.hoverStyle.backgroundImage)),e.hoverStyle.backgroundSize!=""&&(r.style.backgroundSize=e.hoverStyle.backgroundSize),e.hoverStyle.color!=""&&this.setHoverFontColor(!0,r,i)):this.clickArea.index!=l&&(r.style.backgroundColor=e.backgroundColor,r.style.backgroundImage=this.getImageUrl(e.backgroundImage),r.style.backgroundSize=e.backgroundSize,this.setHoverFontColor(!1,r,i))}if(t=="leave"){if(this.clickArea.index==i&&this.clickArea.selected)for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o];r.getAttribute("index")==i&&(e.allActiveBackground.backgroundColor!=""?r.style.backgroundColor=e.allActiveBackground.backgroundColor:r.style.backgroundColor=e.backgroundColor,e.allActiveBackground.backgroundImage!=""?r.style.backgroundImage=this.getImageUrl(e.allActiveBackground.backgroundImage):r.style.backgroundImage=this.getImageUrl(e.backgroundImage),e.allActiveBackground.backgroundSize!=""?r.style.backgroundSize=e.allActiveBackground.backgroundSize:r.style.backgroundSize=e.backgroundSize)}else for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o];r.getAttribute("index")==i&&(r.style.backgroundColor=e.backgroundColor,r.style.backgroundImage=this.getImageUrl(e.backgroundImage),r.style.backgroundSize=e.backgroundSize)}for(let o=0;o<this.$refs.contentArea.length;o++){let r=this.$refs.contentArea[o];r.getAttribute("index")==i&&this.setHoverFontColor(!1,r,i)}}}},setHoverFontColor(t,i,e){this.replaceEmptyStyle();let n=this.widgetInfo.config.contentArea;if(n.hoverStyle&&n.hoverStyle.color!="")for(let o=0;o<this.widgetInfo.config.content.length;o++){let r=this.widgetInfo.config.content[o],l=i.querySelectorAll(".suffix-"+e+"-"+o),a=i.querySelectorAll(".number-"+e+"-"+o),s=i.querySelectorAll(".prefix-"+e+"-"+o),c=i.querySelectorAll(".title-"+e+"-"+o),u="",v="",F="",$="";t?u=v=F=$=n.hoverStyle.color:(u=r.suffix.color,v=r.number.color,F=r.prefix.color);for(let b=0;b<l.length;b++)l[b].style.color=u;for(let b=0;b<a.length;b++)a[b].style.color=v;for(let b=0;b<s.length;b++)s[b].style.color=F;for(let b=0;b<c.length;b++)c[b].style.color=$}},getTitleAreaStyle(t,i,e,n,o,r){let l={height:this.mUtils.getNewPxH(t.h)+"px",opacity:t.opacity,display:t.hide==!0?"none":"",paddingLeft:this.mUtils.getNewPxW(t.left)+"px",paddingTop:this.mUtils.getNewPxH(t.top)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(n??t.backgroundImage),backgroundSize:t.backgroundSize,fontSize:this.mUtils.getNewFontSize(t.label.fontSize)+"px",fontFamily:t.label.fontFamily,color:t.label.color,fontWeight:t.label.fontWeight,fontStyle:t.label.fontStyle,textDecoration:t.label.textDecoration,textAlign:t.label.horizontalAlignment,cursor:this.getCursor(i,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code,e)},a=t.label;return a.textShadow&&(l.textShadow=a.hShadow+"px "+a.vShadow+"px "+a.textShadowBlur+"px "+a.textShadowColor||"rgba(0,0,0,0)"),a.textStroke&&(l.webkitTextStrokeWidth=a.textStrokeWidth+"px",l.webkitTextStrokeColor=a.textStrokeColor),a.gradient&&(l.backgroundImage="linear-gradient("+a.angle+"deg,"+a.startColor+","+a.endColor+")",l.webkitBackgroundClip="text",l.webkitTextFillColor="transparent"),e+o+r===this.current&&(this.widgetInfo.config.contentArea.activeBackground.backgroundColor||this.widgetInfo.config.contentArea.activeBackground.backgroundImage)&&(l.backgroundColor=this.widgetInfo.config.contentArea.activeBackground.backgroundColor,l.backgroundImage=this.getImageUrl(this.widgetInfo.config.contentArea.activeBackground.backgroundImage),l.backgroundSize=this.widgetInfo.config.contentArea.activeBackground.backgroundSize),l},getContentStyle(t,i,e,n,o,r){let l={float:"left",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",width:this.mUtils.getNewPxW(t.w)+"px",height:this.mUtils.getNewPxH(t.h)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(n??t.backgroundImage),backgroundSize:t.backgroundSize,cursor:this.getCursor(i,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code,e)};return t.openBorder&&(l.border=`solid ${t.borderWidth}px ${t.borderColor}`,l.borderRadius=t.borderRadius+"px",e+o+r===this.current&&(l.border=`solid ${t.activeBorderWidth}px ${t.activeBorderColor}`,l.borderRadius=t.activeBorderRadius+"px")),e+o+r===this.current&&(this.widgetInfo.config.contentArea.activeBackground.backgroundColor||this.widgetInfo.config.contentArea.activeBackground.backgroundImage)&&(l.backgroundColor=this.widgetInfo.config.contentArea.activeBackground.backgroundColor,l.backgroundImage=this.getImageUrl(this.widgetInfo.config.contentArea.activeBackground.backgroundImage),l.backgroundSize=this.widgetInfo.config.contentArea.activeBackground.backgroundSize),l},getContentTitleStyle(t,i){let e={height:this.mUtils.getNewPxH(t.h)+"px",opacity:t.opacity,display:t.hide==!0?"none":"",paddingLeft:this.mUtils.getNewPxW(t.left)+"px",paddingTop:this.mUtils.getNewPxH(t.top)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(i??t.backgroundImage),backgroundSize:t.backgroundSize,fontSize:this.mUtils.getNewFontSize(t.label.fontSize)+"px",fontFamily:t.label.fontFamily,color:t.label.color,fontWeight:t.label.fontWeight,fontStyle:t.label.fontStyle,textDecoration:t.label.textDecoration,textAlign:t.label.horizontalAlignment},n=t.label;return n.textShadow&&(e.textShadow=n.hShadow+"px "+n.vShadow+"px "+n.textShadowBlur+"px "+n.textShadowColor||"rgba(0,0,0,0)"),n.textStroke&&(e.webkitTextStrokeWidth=n.textStrokeWidth+"px",e.webkitTextStrokeColor=n.textStrokeColor),n.gradient&&(e.backgroundImage="linear-gradient("+n.angle+"deg,"+n.startColor+","+n.endColor+")",e.webkitBackgroundClip="text",e.webkitTextFillColor="transparent"),e},getStylePrefix(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w)+"px",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleNumber(t,i){let e={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":t.lineFeed?"-webkit-box":"",width:this.mUtils.getNewPxW(t.w)+"px",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment,textIndent:this.mUtils.getNewPxW(t.textIndent)+"px",lineHeight:this.mUtils.getNewPxW(t.lineHeight)+"px",overflow:"hidden",textOverflow:"ellipsis",webkitLineClamp:t.maxRow,webkitBoxOrient:t.maxRow?"vertical":1,whiteSpace:t.lineFeed?"pre-wrap":"nowrap"},n=t;n.textShadow&&(e.textShadow=n.hShadow+"px "+n.vShadow+"px "+n.textShadowBlur+"px "+n.textShadowColor||"rgba(0,0,0,0)"),n.textStroke&&(e.webkitTextStrokeWidth=n.textStrokeWidth+"px",e.webkitTextStrokeColor=n.textStrokeColor),n.gradient&&(e.backgroundImage="linear-gradient("+n.angle+"deg,"+n.startColor+","+n.endColor+")",e.webkitBackgroundClip="text",e.webkitTextFillColor="transparent");let o=i.numberImage;return/(.jpg|.png|.jpeg|.gif|.svg|.JPG|.PNG|.GIF|.bmp|.BMP)/g.test(o)&&(e.backgroundImage=this.getImageUrl(o),e.backgroundRepeat="no-repeat",e.backgroundPosition=t.horizontalAlignment+" center"),e},getStyleSuffix(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w)+"px",marginLeft:this.mUtils.getNewPxW(t.left)+"px",marginTop:this.mUtils.getNewPxH(t.top)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getShowTooltip(t,i){if(t.showTooltip){let e=0;return t.text&&!isNaN(parseFloat(i))?e=parseInt(i).toString().length+t.decimals:e=i.toString().length,isNaN(parseFloat(i))?t.w-e*t.fontSize>0:t.w-e*t.fontSize/3*2>0}else return!0},onClick(t,i,e,n){let o=this,r=this.widgetInfo.action.sendOut.actionList,l=e*this.widgetInfo.config.global.pageSize+n;this.$$lib__.each(r,a=>{if(a.enabled&&(t=="areaTitle"||a.contentId==t)&&a.code.indexOf(o.$$global_editor.actionType.click.code)>-1){o.widgetInfo.config.contentArea.activeCancel&&o.current==t+e+n?o.current="":o.current=t+e+n;let s=a.code+"_"+o.widgetInfo.id,c={text:i};if(c.checked=o.current!="",a.paramsExtend&&a.paramsExtend.length>0&&this.getExtendParams(c,a.paramsExtend,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[l],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions),a.script&&a.script.enabled){if(w.log("Execute script for "+o.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){h.Message.warning({message:a.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",a.script.content),c=this.customScript_actionSend_clickParam(c)}m.Z.$emit(s,c),a.postMessage&&this.doPostMessage(c),this.actionNameList.push(s)}else if(a.enabled&&(t=="areaTitle"||a.contentId==t)&&a.code.indexOf(o.$$global_editor.actionType.openLink.code)>-1){o.widgetInfo.config.contentArea.activeCancel&&o.current==t+e+n?o.current="":o.current=t+e+n;let s={};if(s.checked=o.current!="",a.paramsExtend&&a.paramsExtend.length>0&&this.getExtendParams(s,a.paramsExtend,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[l],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions),a.type===this.$$global_editor.linkType.dynamic.code&&(a[this.$$global_editor.linkType.dynamic.code].url=this.getActionUrl(a,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[l],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions)),a.script&&a.script.enabled){if(w.log("Execute script for "+o.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){h.Message.warning({message:a.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_openLinkParam=new Function("param",a.script.content),s=this.customScript_actionSend_openLinkParam(s)}this.openLinkAction(a,s)}}),this.$nextTick(function(){this.setContentAreaStyle("active",e+"-"+n)})},onChangeAction(t){if(this.widgetInfo.action.sendOut&&this.widgetInfo.action.sendOut.actionList)for(let i=this.widgetInfo.action.sendOut.actionList.length-1;i>-1;--i){let e=this.widgetInfo.action.sendOut.actionList[i];if(e.enabled&&e.code==this.$$global_editor.actionType.carouselChange.code){let n=this.$$global_editor.actionType.carouselChange.code+"_"+this.widgetInfo.id,o=this.$refs.myCarousel.activeIndex,r=0;for(let u=0;u<o;++u)r+=this.carouselItem[u].listInfo.length;let l=r+this.carouselItem[o].listInfo.length,a=this.widgetInfo.dataset[this.widgetInfo.dataset.type],s=[];for(let u=r;u<l;++u)a.source[u]&&s.push(a.source[u]);let c={index:o,data:s};if(e.paramsExtend&&e.paramsExtend.length>0&&this.getParamsExtend(c,e.paramsExtend,this.widgetInfo),e.script&&e.script.enabled&&e.script.content)try{this.customScript_actionSend_clickParam=new Function("param",e.script.content),c=this.customScript_actionSend_clickParam(c)}catch(u){w.log("custom script error in list-carousel-text event carouselChange :"+u.message)}m.Z.$emit(n,c),e.postMessage&&this.doPostMessage(c)}}this.setIndicatorStyle(this.widgetInfo,t)},getCursor(t,i,e,n){let o="default";if(t==null||t.sendOut==null||t.sendOut.actionList==null)return o;let r=t.sendOut.actionList;return this.$$lib__.find(r,a=>a.contentId==n&&(a.code.indexOf(i)>-1||a.code.indexOf(e)>-1)&&a.enabled)&&(o="pointer"),o},getFieldVal2(t,i,e){let n={};if(t&&t.length>0)for(let o=0;o<i.length;o++)i[o]==e.areaTitle&&(n.areaTitle=t[o]),i[o]==e.title&&(n.title=t[o]),i[o]==e.number&&(n.number=t[o]),i[o]==e.areaImage&&(n.areaImage=t[o]),i[o]==e.areaTitleImage&&(n.areaTitleImage=t[o]),i[o]==e.contentTitleImage&&(n.contentTitleImage=t[o]),i[o]==e.contentImage&&(n.contentImage=t[o]),i[o]==e.numberImage&&(n.numberImage=t[o]);return n},getImageUrl(t){return t&&t!=""?"url("+x.appendImageBaseURL(t)+")":""},getHtml(t,i){(!t.number.scriptContent||t.number.scriptContent=="")&&w.warn("\u5185\u5BB9\uFF1A"+t.lable+"\u7684\u811A\u672C\u4E3A\u7A7A"),w.info("\u6267\u884C\u5185\u5BB9\uFF1A"+t.lable+"\u7684\u811A\u672C\u4E3A\u7A7A");let n=new Function("content","text",t.number.scriptContent).apply(this,[t,i]);return n||i},slideBanner(){let t=this.$el.querySelectorAll(".el-carousel__container")[0],i=0,e=0,n=0,o=Array.from(this.$el.querySelectorAll(".el-carousel__item"));if(o.length===0)return;let r=function(){i=0,n=0,e=0};t.addEventListener("touchstart",l=>{i=l.changedTouches[0].pageX,n=l.changedTouches[0].pageX,e=l.changedTouches[0].pageX}),t.addEventListener("touchmove",l=>{if(l.changedTouches[0].target.classList[0]==="el-icon-arrow-left"||l.changedTouches[0].target.classList[0]==="el-icon-arrow-right"||o.length===1)return;let a;e=l.changedTouches[0].pageX,a=e-n;for(let s=0;s<o.length;s++){let c=o[s],u=Number(c.style.transform.split("X(")[1].split(") s")[0].split("px")[0])+a;if(s===0&&u>0&&!this.widgetInfo.config.carouselAttr.loop||s===o.length-1&&u<0&&!this.widgetInfo.config.carouselAttr.loop)break;c.classList.remove("is-animating"),c.style.transform=c.style.transform.replace(/translateX\(([^(])*\)/,`translateX(${u}px)`)}n=e}),t.addEventListener("touchend",l=>{if(o.forEach(c=>{c.classList.add("is-animating")}),i-e===0){r();return}let a;e-i<0&&(a=Math.floor((i-e)/o[0].offsetWidth),(i-e)%o[0].offsetWidth>o[0].offsetWidth/3&&(a+=1)),e-i>0&&(a=-Math.floor((e-i)/o[0].offsetWidth),(e-i)%o[0].offsetWidth>o[0].offsetWidth/3&&(a-=1));let s=this.$refs.myCarousel.activeIndex+a;if(a==0){o.forEach((c,u)=>{c.style.transform=c.style.transform.replace(/translateX\(([^(])*\)/,`translateX(${-o[0].offsetWidth*s+u*o[0].offsetWidth}px)`)}),r();return}if(!this.widgetInfo.config.carouselAttr.loop){s>=0&&s<=o.length-1&&(this.$refs.myCarousel.setActiveItem(s),r());return}this.$refs.myCarousel.setActiveItem(s),r()})}}},U=T,W=d(68141),L=(0,W.Z)(U,A,k,!1,null,"016e1dc2",null),H=L.exports}}]);
