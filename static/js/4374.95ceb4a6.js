"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[4374],{56279:function(m,d,i){i.d(d,{P:function(){return c}});var g=i(86892),o=i(49500);const c={mixins:[g.D],created(){},methods:{lifecycleBeforeChartsLoad(r){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&o.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),o.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let l=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[r]);if(l)return l}return r},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&o.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),o.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},44513:function(m,d,i){i.d(d,{Z:function(){return u}});var g=function(){var e=this,f=e._self._c;return e.attr.buttonHide?f("div",{style:{position:"absolute",right:e.attr.buttonHideRight+"px",top:e.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(_){return e.onHide()}}},[e.openTooltip?f("el-tooltip",{attrs:{"open-delay":1e3,content:e.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[f("el-button",{class:e.attr.buttonHideIconClass&&e.attr.buttonHideIconClass!=""?e.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:e.attr.buttonHideColor,fontSize:e.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):f("el-button",{class:e.attr.buttonHideIconClass&&e.attr.buttonHideIconClass!=""?e.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:e.attr.buttonHideColor,fontSize:e.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):e._e()},o=[],c=i(52246),r={props:["attr"],name:"hide-button",data(){return{isPc:c.b}},computed:{openTooltip:function(){let s=!1,e=this.attr.buttonHideTooltipContent;return c.b&&e&&e!=null&&e.trim()!=""&&(s=!0),s}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},h=r,l=i(68141),p=(0,l.Z)(h,g,o,!1,null,"bf399b9a",null),u=p.exports},54374:function(m,d,i){i.r(d),i.d(d,{default:function(){return C}});var g=function(){var n=this,a=n._self._c;return a("div",{style:{width:n.widgetInfo.attr.w+"px",height:n.widgetInfo.attr.hh+"px",overflow:"hidden"}},[a("hide-button",{attrs:{attr:n.widgetInfo.attr},on:{sendButtonHide:n.sendButtonHide}}),a("background-svg",{ref:"refBackgroundSvg",attrs:{svg_info:n.svg_info,svg_info_extend:n.svg_info_extend,"widget-info":n.widgetInfo}})],1)},o=[],c=i(21109),r=i(26711),h=i(45061),l=function(){var n=this,a=n._self._c;return a("div",{staticClass:"my_class",style:n.svgStyle(),domProps:{innerHTML:n._s(n.html_svg)}})},p=[],u=i(21300),s=i(49500),e={name:"background-svg",props:{svg_info:{},svg_info_extend:{},widgetInfo:{},mounted_load:{type:Boolean,default:!1}},data(){return{html_svg:"",svg_attribute:{},dimensionsAliasEx:null,negative:null}},mounted(){this.mounted_load&&this.getHtmlSvg()},methods:{resize(){this.getHtmlSvg()},getHtmlSvg(){if(this.html_svg="",this.svg_attribute=this.$$lib__.extend(this.svg_info,this.svg_info_extend),this.svg_attribute.svg_content)try{let t=new Function("svg_attribute","widgetInfo",this.svg_attribute.svg_content);this.html_svg=t.apply(this,[this.svg_attribute,this.widgetInfo])}catch(t){this.widgetInfo&&this.widgetInfo.name?s.error("\u7EC4\u4EF6\uFF1A"+this.widgetInfo.name+" \u7684\u88C5\u9970\u80CC\u666F\uFF0CSVG\u4EE3\u7801\u6267\u884C\u62A5\u9519\uFF1A"+t.message):s.error("SVG\u4EE3\u7801\u6267\u884C\u62A5\u9519\uFF1A"+t.message)}else this.widgetInfo&&this.widgetInfo.name?s.error("\u7EC4\u4EF6\uFF1A"+this.widgetInfo.name+" \u7684\u88C5\u9970\u80CC\u666F\uFF0CSVG\u4EE3\u7801\u4E3A\u7A7A"):s.error("SVG\u4EE3\u7801\u4E3A\u7A7A")},svgStyle(){let t={width:this.svg_attribute.width+"px",height:this.svg_attribute.height+"px"};return this.svg_attribute.turn==!0&&(t.mozTransform="scale(1,-1)",t.webkitTransform="scale(1,-1)",t.oTransform="scale(1,-1)",t.transform="scale(1,-1)",t.filter="FlipV"),t},getText(){let t=this.getDataSourceList();return t&&t.length>0?t[0][this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.text]:""},getDataSourceList(){let t=[];if(this.widgetInfo&&this.widgetInfo.dataset[this.widgetInfo.dataset.type]&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions.length>0)for(let n=0;n<this.widgetInfo.dataset[this.widgetInfo.dataset.type].source.length;n++){let a={};for(let v=0;v<this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions.length;v++)a[this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions[v]]=this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[n][v];t.push(a)}return t},getRandom(t){return u.randomString(t)},colorToRgb(t){return u.colorToRgb(t)}}},f=e,_=i(68141),I=(0,_.Z)(f,l,p,!1,null,"826862c2",null),w=I.exports,b=i(44513),y=i(56279),x={name:"DecorateBackground",components:{HideButton:b.Z,BackgroundSvg:w},mixins:[c.u,r.H,h.u,y.P],props:["widgetInfo"],data(){return{svg_info:{},svg_info_extend:{}}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{loadInfo(t){this.svg_info={},this.svg_info_extend={},this.svg_info=JSON.parse(JSON.stringify(t.config.svg)),this.svg_info_extend.width=t.attr.widgetW,this.svg_info_extend.height=t.attr.h,this.$nextTick(()=>{this.svg_info.svgType&&this.svg_info.svgType!=""&&this.$refs.refBackgroundSvg.getHtmlSvg()}),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.actionReceive(t)},resize(){this.loadInfo(this.widgetInfo)}}},S=x,H=(0,_.Z)(S,g,o,!1,null,"14297b60",null),C=H.exports}}]);
