"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[57539],{56279:function(h,s,t){t.d(s,{P:function(){return l}});var r=t(386892),n=t(149500);const l={mixins:[r.D],created(){},methods:{lifecycleBeforeChartsLoad(d){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&n.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),n.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let g=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[d]);if(g)return g}return d},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&n.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),n.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},596471:function(h,s,t){t.d(s,{A:function(){return n}});var r=t(149500);/Version/.test(navigator.userAgent)&&document.addEventListener("plusready",()=>{r.log("plusReady---------")});const n=function(){if(window.plus)return window.plus;try{return window.top.plus}catch{return null}}},657539:function(h,s,t){t.r(s),t.d(s,{default:function(){return b}});var r=function(){var i=this,c=i._self._c;return c("div",{directives:[{name:"show",rawName:"v-show",value:i.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],staticStyle:{width:"100px",height:"100px","text-align":"center","line-height":"100px"}},[i._v("\u5730\u56FE\u5BFC\u822A")])},n=[],l=t(927966),d=t(445061),u=t(126711),g=t(56279),m=t(723400),v=t(547361),w=t(67157);const I={mixins:[w.c],data(){return{config_extend:{config:{}},filter_config:{}}},methods:{filterPredefineColoursSchemeConfig(e,i){this.getNewConfigWithArrary(e,i,this.filter_config)}}};var y=t(148836),L=t(596471),C=t(555616),x=t(149500),P={name:"navigation-map.vue",props:["widgetInfo","currentWidget"],mixins:[v.baseConfig,I,d.u,u.H,g.P,m.j],watch:{"currentWidget.id":{deep:!0,handler:function(e){if(!this.currentWidget.id){this.widgetInfo.attr.hide=!0;return}e===this.widgetInfo.id||this.currentWidget.parentId===this.widgetInfo.id?this.widgetInfo.attr.hide=!1:this.widgetInfo.attr.hide=!0}},"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},data(){return{dbClick:!0,prefix:{widget:"widget_"},actionList:{},getPlus:L.A}},computed:{...(0,y.Se)(["isView"])},mounted(){this.initAction(this.widgetInfo),this.isView&&(this.widgetInfo.attr.hide=!0),this.loadInfo()},methods:{loadInfo(){this.lifecycleAfterLoad()},reLoadInfo(){},initAction(e){this.actionReceive(e)},actionReceive(e){e.action===void 0||e.action.receive===void 0||e.action.receive.mapNavigation&&this.$$lib__.each(e.action.receive.mapNavigation.widgetList,i=>{let c=i[0][1]+"_"+i[0][0];i[0][1].indexOf("_")>-1&&(c=i[0][1]);let a=i[0][2];if(a){let o=a.indexOf("|");o>-1&&(a=i[0][2].substring(o+1))}l.Z.$on(c,o=>{if(e.action.receive.mapNavigation.script&&e.action.receive.mapNavigation.script.enabled){if(x.log("Execute script for "+this.widgetInfo.name+" component to "+i.name+" component"),e.action.receive.mapNavigation.script.content==""){C.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.custom_mapNavigation_script=new Function("param","param_key",e.action.receive.mapNavigation.script.content),this.custom_mapNavigation_script(o,a);return}this.navigation(o)})})},navigation(e){const{startLng:i,startLat:c,endLng:a,endLat:o,desc:p}=e,f=this.getPlus();if(!f){this.$message({message:"\u5F53\u524D\u73AF\u5883\u65E0\u6CD5\u8C03\u7528plus",type:"error"});return}this.$message.info("\u8BF7\u786E\u4FDD\u5DF2\u5B89\u88C5\u9AD8\u5FB7\u5730\u56FE"),setTimeout(()=>{if(this.widgetInfo.config.type==="navi"){const S=new f.maps.Point(a,o),E=new f.maps.Point(120,30);f.maps.openSysMap(S,p,E)}else f.runtime.openURL(`androidamap://route?sourceApplication=amap&slat=${c}&slon=${i}&dlat=${o}&dlon=${a}&dname=${p}&dev=0&t=1`)},1500)}}},N=P,A=t(768141),$=(0,A.Z)(N,r,n,!1,null,"a4cb2402",null),b=$.exports}}]);
