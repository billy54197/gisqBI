(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[30052],{352426:function(nt,O,d){"use strict";var o=d(419534);Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var g=o(d(581806)),u=o(d(705146)),x=o(d(342579)),c={bind:function(D){var P=this,W=D.querySelector(".el-card__header");W.style.cssText+=";cursor:move;";var Q=function(){var H=this;return window.document.currentStyle?function(r,z){return(0,x.default)(this,H),r.currentStyle[z]}.bind(this):function(r,z){return(0,x.default)(this,H),getComputedStyle(r,!1)[z]}.bind(this)}();W.onmousedown=function(H){(0,x.default)(this,P);var r=D,z=H.clientX-W.offsetLeft,B=H.clientY-W.offsetTop,V=document.body.clientWidth,v=document.body.clientHeight,I=r.offsetWidth,T=r.offsetHeight,N=r.offsetLeft,w=V-r.offsetLeft-I,b=r.offsetTop,s=v-r.offsetTop-T,l=Q(r,"left"),f=Q(r,"top");(0,g.default)(l).call(l,"%")?(l=+document.body.clientWidth*(+l.replace(/%/g,"")/100),f=+document.body.clientHeight*(+f.replace(/%/g,"")/100)):(l=+l.replace(/\px/g,""),f=+f.replace(/\px/g,"")),isNaN(l)&&(l=0),isNaN(f)&&(f=0),document.onmousemove=function(y){var p,S=D,E=y.clientX-z,k=y.clientY-B;-E>N?E=-N:E>w&&(E=w),-k>b?k=-b:k>s&&(k=s),S.style.cssText+=(0,u.default)(p=";left:".concat(E+l,"px;top:")).call(p,k+f,"px;")},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}.bind(this)}},$=c;O.default=$},295560:function(nt,O,d){"use strict";var o=d(149500),g=d(29870),u=d(787879),x=d(183393),c=d(419534);Object.defineProperty(O,"__esModule",{value:!![]}),O.RoamFly=void 0;var $=c(d(520314)),A=c(d(669033)),D=c(d(342579)),P=c(d(636583)),W=c(d(122777)),Q=c(d(42762)),H=T(d(125794)),r=d(325074),z=d(580823),B=d(792672),V=T(d(688343)),v=c(d(202692));function I(w){if(typeof u!="function")return null;var b=new u,s=new u;return(I=function(f){return f?s:b})(w)}function T(w,b){if(!b&&w&&w.__esModule)return w;if(w===null||g(w)!=="object"&&typeof w!="function")return{default:w};var s=I(b);if(s&&s.has(w))return s.get(w);var l={},f=Object.defineProperty&&x;for(var y in w)if(y!=="default"&&Object.prototype.hasOwnProperty.call(w,y)){var p=f?x(w,y):null;p&&(p.get||p.set)?Object.defineProperty(l,y,p):l[y]=w[y]}return l.default=w,s&&s.set(w,l),l}var N=function(){function w(b){(0,W.default)(this,w),this.prop=b||{},this.firstHpr=null,this.timesAtPoint=[],this.isPause=![],this.isBackWard="",this.flyEntity=null,this.isActivate=!![],this.orientationScratch=new r.Cesium.Quaternion,this.scratch=new r.Cesium.Matrix4,this.positionScratch=new r.Cesium.Cartesian3,this.recoverTime=void 0,this.init(),this.clock=this.prop.viewer.myClock}return(0,Q.default)(w,[{key:"init",value:function(){var s,l,f,y=this.prop,p=y.route,S=y.viewer;this.hpr=p.properties.hpr;var E=p.geometry.coordinates[0],k=(0,$.default)(E).call(E,0);k[2]+=p.properties.attr.followedZ;var C=p.geometry.coordinates[1],L=p.properties.attr.followedZ;this.firstHpr=this.setOrientation((s=r.Cesium.Cartesian3).fromDegrees.apply(s,(0,P.default)(k)),(l=r.Cesium.Cartesian3).fromDegrees.apply(l,(0,P.default)(C))),this.firstHpr.pitch=-Math.atan2(L,L*2),S.camera.flyTo({destination:(f=r.Cesium.Cartesian3).fromDegrees.apply(f,(0,P.default)(k)),orientation:this.firstHpr})}},{key:"setRoute",value:function(s){this.prop.route=s}},{key:"start",value:function(s){s&&this.setRoute(s),this.stop(),this._startFly()}},{key:"stop",value:function(){var s=this.prop.viewer;s.trackedEntity=void 0,s.scene.preRender.removeEventListener(this.preRender_eventHandler,this),this.flyEntity&&(s.entities.remove(this.flyEntity),this.flyEntity=null),this.wallEntity&&(s.entities.remove(this.wallEntity),this.wallEntity=null),this.isBackWard="",this.isStart=![]}},{key:"forward",value:function(){this.isBackWard=![]}},{key:"backward",value:function(){this.isBackWard=!![]}},{key:"getAttr",value:function(){var s=this.prop.route;return s.properties.attr}},{key:"updateAttr",value:function(s){for(var l in s)s.hasOwnProperty(l)&&this.flyEntity&&(this.flyEntity.data.properties.attr[l]=s[l])}},{key:"realTime",value:function(s){var l=this.flyEntity.data.properties.attr,f=(0,B.formatPosition)(s),y=this.getFlyOkPoints(s);l.showShadow&&this.updateWall(y.positions);var p=this;(0,B.terrainPolyline)({viewer:p.viewer,positions:[s,s],calback:function(E,k){if(p.isActivate){if(E==null||E.length===0||k){p.viewWindow.showHeightInfo(null);return}var C=(0,B.formatPosition)(E[0]).z,L=f.z,U=L-C,J=(0,z.formatLength)(L),G=(0,z.formatLength)(U),R="\u6F2B\u6E38\u9AD8\u7A0B\uFF1A"+J;l.showHeightWarn&&l.warnHeight?(R+=`
\u79BB\u5730\u8DDD\u79BB\uFF1A`+G,U<=l.warnHeight&&(R+="\u3010\u4F4E\u4E8E\u62A5\u8B66\u9AD8\u5EA6\u3011")):R+=`
\u5730\u9762\u9AD8\u7A0B\uFF1A`+C,p.flyEntity.label&&(p.flyEntity.label.text=p.flyEntity.data.name+`
`+R)}}})}},{key:"showHeightChars",value:function(){if(this.charsCacheData)this.updateCharsWidge(this.charsCacheData);else{var s=this;this.getTerrainHeight(function(l){s.charsCacheData=l,s.updateCharsWidge(l)})}}},{key:"updateCharsWidge",value:function(){}},{key:"updateCharsWidgeFlyOk",value:function(s){var l=mars3d.widget.getClass(this.charsWidgetUri);l&&l.isActivate&&l.changeFlyOk(s)}},{key:"getTerrainHeight",value:function(s){var l=this.prop.viewer,f=this.arrLinePoint,y=this.flyEntity.data.properties.attr,p=0,S=[],E=[],k=[],C=[],L;y.showHeightWarn&&y.warnHeight&&(L=[]);var U=0;function J(){var G=this;U++;var R=[f[U-1],f[U]];(0,B.terrainPolyline)({viewer:l,positions:R,calback:function(Z,lt){if((0,D.default)(this,G),!!this.isActivate){for(var it=f[U-1].lonlat[2],tt=f[U].lonlat[2],rt=(tt-it)/Z.length,et=0;et<Z.length;et++){et!==0&&(p+=r.Cesium.Cartesian3.distance(Z[et],Z[et-1])),S.push(Number(p.toFixed(1)));var ut=(0,B.formatPosition)(Z[et]);C.push(ut);var ht=lt?0:ut.z;E.push(ht);var st=Number((it+rt*et).toFixed(1));k.push(st),L&&L.push(ht+y.warnHeight)}U>=f.length-1?s({arrLength:S,arrFxgd:k,arrHbgd:E,arrPoint:C,arrBjgd:L}):J()}}.bind(this)})}J()}},{key:"_startFly",value:function(){var s=this.prop,l=s.route,f=s.viewer;this.isStart=!![],this.timesAtPoint.length=0;var y=l.properties.attr,p=new r.Cesium.SampledPositionProperty,S=r.Cesium.JulianDate.fromIso8601("2013-12-25"),E,k=l.geometry.coordinates;if(k.length<2){o.warn("\u8DEF\u7EBF\u65E0\u5750\u6807\u6570\u636E\uFF0C\u65E0\u6CD5\u6F2B\u6E38\uFF01");return}var C=l.properties.speed;Array.isArray(C)&&C.length==0&&(C=100);var L=!(0,z.isNumber)(C);if(k.length===2){var U=this.getPointForLineAlong(k[0],k[1],0,.5);(0,A.default)(k).call(k,1,0,U),C&&L&&(0,A.default)(C).call(C,1,0,C[0])}for(var J=500,G=0,R,ft=[],Z=0,lt=k.length;Z<lt;Z++){var it=k[Z],tt=r.Cesium.Cartesian3.fromDegrees(it[0],it[1],it[2]||0);if(tt.lonlat=it,Z===0){var rt=r.Cesium.JulianDate.addSeconds(S,G,new r.Cesium.JulianDate);tt.time=rt,this.timesAtPoint.push(rt),p.addSample(rt,tt),R=tt}else if(Z===k.length-1){var et=L?C?C[Z-1]:J:C||J,ut=r.Cesium.Cartesian3.distance(tt,R)/1e3,ht=ut/et*3600;G+=ht;var st=r.Cesium.JulianDate.addSeconds(S,G,new r.Cesium.JulianDate);this.timesAtPoint.push(st),tt.time=st,p.addSample(st,tt)}else for(var Ct=L?C?C[Z-1]:J:C||J,gt=this.getBezierSpline(k[Z-1],it,k[Z+1]),dt=0;dt<gt.length;dt++){var mt=gt[dt],It=r.Cesium.Cartesian3.distance(mt,R)/1e3,yt=It/Ct*3600;G+=yt;var X=r.Cesium.JulianDate.addSeconds(S,G,new r.Cesium.JulianDate);dt===0&&this.timesAtPoint.push(X),tt.time=X,p.addSample(X,mt),R=mt}ft.push(tt)}this.arrLinePoint=ft,E=r.Cesium.JulianDate.addSeconds(S,G,new r.Cesium.JulianDate),this.clock.startTime=S.clone(),this.clock.stopTime=E.clone(),this.clock.currentTime=S.clone(),this.clock.multiplier=1,this.clock.shouldAnimate=!![],y.clockRange?this.clock.clockRange=r.Cesium.ClockRange.LOOP_STOP:this.clock.clockRange=r.Cesium.ClockRange.CLAMPED,f.timeline?f.timeline.zoomTo(S,E):this.timeline&&this.timeline.zoomTo(S,E);var K={id:l.id,availability:new r.Cesium.TimeIntervalCollection([new r.Cesium.TimeInterval({start:S,stop:E})]),position:p,orientation:new r.Cesium.VelocityOrientationProperty(p),data:l};switch(y.showLabel&&(K.label={text:l.name,font:"14px Helvetica",style:r.Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:r.Cesium.Color.AZURE,outlineColor:r.Cesium.Color.BLACK,outlineWidth:2,horizontalOrigin:r.Cesium.HorizontalOrigin.LEFT,verticalOrigin:r.Cesium.VerticalOrigin.BOTTOM,scaleByDistance:new r.Cesium.NearFarScalar(1e3,1,5e5,.5),distanceDisplayCondition:new r.Cesium.DistanceDisplayCondition(0,5e5)}),y.showLine&&(K.path={material:new r.Cesium.Color.fromCssColorString(l.properties.style.color).withAlpha(.4),resolution:1,width:1.5,leadTime:0,trailTime:G}),y.point){case"point":K.point={color:new r.Cesium.Color.fromCssColorString(l.properties.style.color).withAlpha(.8),pixelSize:6},K.label&&(K.label.pixelOffset=new r.Cesium.Cartesian2(10,-30));break;case"model_car":K.model={uri:"Assets3D/model/car.gltf",scale:.2,minimumPixelSize:50},K.label&&(K.label.pixelOffset=new r.Cesium.Cartesian2(70,-30));break;case"model_air":K.model={uri:"Assets3D/model/plane.glb",scale:.2,minimumPixelSize:50},K.label&&(K.label.pixelOffset=new r.Cesium.Cartesian2(60,-30));break;case"model_weixin":K.model={uri:"Assets3D/model/satelight.gltf",scale:1,minimumPixelSize:100},K.label&&(K.label.pixelOffset=new r.Cesium.Cartesian2(60,-30));break;default:K.point={color:new r.Cesium.Color.fromCssColorString("#ffffff").withAlpha(.01),pixelSize:1};break}this.flyEntity=f.entities.add(K),this.flyEntity.position.setInterpolationOptions({interpolationDegree:2,interpolationAlgorithm:r.Cesium.HermitePolynomialApproximation}),f.trackedEntity=this.flyEntity,this.currentView=this.flyEntity.position.getValue(this.timesAtPoint[0]),this.idxOfTimes=1,f.scene.preRender.addEventListener(this.preRender_eventHandler,this)}},{key:"getFlyOkPoints",value:function(s){for(var l=[],f=0,y=this.clock.currentTime,p=this.arrLinePoint,S=0,E=p.length;S<E;S++){var k=p[S];if(k.time.dayNumber>y.dayNumber||k.time.secondsOfDay>y.secondsOfDay){var C=r.Cesium.Cartesian3.distance(s,S===0?k:p[S-1]);f+=C;break}if(S>0){var L=r.Cesium.Cartesian3.distance(k,p[S-1]);f+=L}l.push(k)}return l.push(s),{positions:l,len:f}}},{key:"recordPause",value:function(){this.recoverTime=this.clock.currentTime}},{key:"createTimeLine",value:function(){var s=this.prop.viewer,l=s._element;if(!s.animation){var f=document.createElement("div");f.className="cesium-viewer-animationContainer",l.appendChild(f);var y=new r.Cesium.Animation(f,new r.Cesium.AnimationViewModel(this.clockViewModel));this.animation=y}if(!s.timeline){var p=document.createElement("div");p.className="cesium-viewer-timelineContainer",p.style.right="0px",l.appendChild(p);var S=new r.Cesium.Timeline(p,this.clock);S.addEventListener("settime",this.onTimelineScrubfunction,![]),S.zoomTo(this.clock.startTime,this.clock.stopTime),this.timeline=S}this.locationOldCss=(0,v.default)("#location_mars_jwd").css(["left","bottom"]),(0,v.default)("#location_mars_jwd").css({left:"170px",bottom:"25px"}),this.legendOldCss=(0,v.default)(".distance-legend").css(["left","bottom"]),(0,v.default)(".distance-legend").css({left:"150px",bottom:"25px"})}},{key:"removeTimeLine",value:function(){var s=this.prop.viewer;this.timeline&&this.timeline.removeEventListener("settime",this.onTimelineScrubfunction,![]);try{var l=s._element;this.animation&&(l.removeChild(this.animation.container),this.animation.destroy(),this.animation=null),this.timeline&&(l.removeChild(this.timeline.container),this.timeline.destroy(),this.timeline=null),(0,v.default)("#location_mars_jwd").css(this.locationOldCss),(0,v.default)(".distance-legend").css(this.legendOldCss)}catch(f){o.error(f)}}},{key:"onTimelineScrubfunction",value:function(s){var l=s.clock;l.currentTime=s.timeJulian,l.shouldAnimate=![]}},{key:"updateWall",value:function(s){for(var l=this,f=this.prop.viewer,y=[],p=[],S=[],E=0;E<s.length;E++){y.push(s[E].clone());var k=r.Cesium.Cartographic.fromCartesian(s[E]);p.push(0),S.push(k.height)}if(this._wall_positions=y,this._wall_minimumHeights=p,this._wall_maximumHeights=S,!this.wallEntity){var C=V.style2Entity({color:"#d7e600",outline:![],opacity:.5});C.minimumHeights=new r.Cesium.CallbackProperty(function(){return(0,D.default)(this,l),this._wall_minimumHeights}.bind(this),![]),C.maximumHeights=new r.Cesium.CallbackProperty(function(){return(0,D.default)(this,l),this._wall_maximumHeights}.bind(this),![]),C.positions=new r.Cesium.CallbackProperty(function(){(0,D.default)(this,l);var L=r.Cesium.Property.getValueOrUndefined(this.flyEntity.position,this.clock.currentTime,this.positionScratch);return this._wall_positions[this._wall_positions.length-1]=L,this._wall_positions}.bind(this),![]),this.wallEntity=f.entities.add({wall:C})}}},{key:"setOrientation",value:function(s,l){var f=r.Cesium.Cartesian3.distance(s,l),y=(0,z.getAngle)(s,l)*Math.PI/180;s=r.Cesium.Cartographic.fromCartesian(s),l=r.Cesium.Cartographic.fromCartesian(l);var p=Math.asin((l.height-s.height)/f);return(f===0||l.height-s.height===0)&&(p=0),{heading:y,pitch:p,roll:0}}},{key:"onTimeEnd",value:function(){this.stop(),this.prop.timeEnd&&this.prop.timeEnd(),this.clock.clockRange=r.Cesium.ClockRange.UNBOUNDED}},{key:"preRender_eventHandler",value:function(){var s=this.prop.viewer;if(!(!this.isActivate||this.flyEntity==null)){if(r.Cesium.JulianDate.compare(this.clock.currentTime,this.clock.stopTime)>=0)return this.onTimeEnd();this.isPause?this.clock.currentTime=this.recoverTime:typeof this.isBackWard=="boolean"&&(this.isBackWard?(this.idxOfTimes==1&&(this.idxOfTimes=2),this.clock.currentTime=this.timesAtPoint[this.idxOfTimes-2],this.isBackWard=""):(this.clock.currentTime=this.timesAtPoint[this.idxOfTimes],this.isBackWard="")),!this.currentOrientation&&(this.currentOrientation=this.firstHpr);var l=this.flyEntity.data.properties.attr;if(r.Cesium.JulianDate.compare(this.clock.currentTime,this.timesAtPoint[this.idxOfTimes])>=0){var f=this.currentView;this.currentView=this.flyEntity.position.getValue(this.timesAtPoint[this.idxOfTimes]),this.currentOrientation=this.setOrientation(f,this.currentView),++this.idxOfTimes}else r.Cesium.JulianDate.compare(this.clock.currentTime,this.timesAtPoint[this.idxOfTimes-1])<=0&&--this.idxOfTimes;var y=l.followedZ;switch(l.cameraType){default:break;case"ys":case"gs":s.trackedEntity!==this.flyEntity&&(s.trackedEntity=this.flyEntity),this.flyEntity.model&&(this.flyEntity.model.show=!![]);break;case"dy":s.trackedEntity!==this.flyEntity&&(s.trackedEntity=this.flyEntity),this.getModelMatrix(s.trackedEntity,this.clock.currentTime,this.scratch),s.scene.camera.lookAtTransform(this.scratch,new r.Cesium.Cartesian3(-l.followedX,0,l.followedZ)),this.flyEntity.model&&(this.flyEntity.model.show=y!==0);break;case"sd":s.trackedEntity!==this.flyEntity&&(s.trackedEntity=this.flyEntity),this.getModelMatrix(s.trackedEntity,this.clock.currentTime,this.scratch),s.zoomTo(s.trackedEntity,new r.Cesium.HeadingPitchRange(this.currentOrientation.heading,-3.14*.166667,y*2)),this.flyEntity.model&&(this.flyEntity.model.show=!![]);break}var p=r.Cesium.Property.getValueOrUndefined(this.flyEntity.position,this.clock.currentTime,this.positionScratch),S=this.getFlyOkPoints(p);l.showShadow&&this.updateWall(S.positions)}}},{key:"getModelMatrix",value:function(s,l,f){if(s==null)return f;var y=r.Cesium.Property.getValueOrUndefined(s.position,l,this.positionScratch);if(r.Cesium.defined(y)){var p=r.Cesium.Property.getValueOrUndefined(s.orientation,l,this.orientationScratch);return r.Cesium.defined(p)?f=r.Cesium.Matrix4.fromRotationTranslation(r.Cesium.Matrix3.fromQuaternion(p,this.matrix3Scratch),y,f):f=r.Cesium.Transforms.eastNorthUpToFixedFrame(y,void 0,f),f}}},{key:"getPointForLineAlong",value:function(s,l,f,y){var p=r.Cesium.Cartesian3.fromDegrees(s[0],s[1],s[2]||0),S=r.Cesium.Cartesian3.fromDegrees(l[0],l[1],l[2]||0),E=r.Cesium.Cartesian3.distance(p,S);(f===0||f>=E*y)&&(f=E*y);var k=H.lineString([s,l]),C=H.along(k,f/1e3,{units:"kilometers"}),L=C.geometry.coordinates[0],U=C.geometry.coordinates[1],J=s[2],G=l[2],R=J+(G-J)*f/E;return[L,U,R]}},{key:"getBezierSpline",value:function(s,l,f){for(var y=this.getPointForLineAlong(l,s,300,.2),p=this.getPointForLineAlong(l,s,200,.1),S=this.getPointForLineAlong(l,f,200,.1),E=this.getPointForLineAlong(l,f,300,.2),k=H.lineString([y,p,l,S,E]),C=H.bezierSpline(k,{sharpness:.5}),L=[],U=l[2],J=0;J<C.geometry.coordinates.length;J++){var G=C.geometry.coordinates[J];L.push(Number(G[0])),L.push(Number(G[1])),L.push(U)}var R=r.Cesium.Cartesian3.fromDegreesArrayHeights(L);return R}}]),w}();O.RoamFly=N},147806:function(nt,O,d){"use strict";var o=d(419534);Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var g=o(d(452909)),u=o(d(342579)),x=void 0,c={inject:{generalCardThemeStyle:{default:null}},props:{styleConfig:{type:Object,default:function(){(0,u.default)(this,x)}.bind(void 0)},position:{type:Object,default:function(){return(0,u.default)(this,x),{type:"absolute",top:"100px",right:"135px"}}.bind(void 0)},themeStyle:{type:Object},imgSrc:{type:String},title:{type:String},isShow:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},dragEnable:{type:Boolean,default:!0},onlyContainer:{type:Boolean,default:!1}},data:function(){return{visible:this.isShow,theme:"light"}},watch:{currentView:{handler:function(D){D==="earth"?this.theme="dark":this.theme="light"},immediate:!0},isShow:function(D){this.visible=D}},computed:{cardThemeStyle:function(){return this.themeStyle||this.generalCardThemeStyle}},mounted:function(){var D,P=this;this.$_mixin_generalCard=(0,g.default)(D=this.$children).call(D,function(W){return(0,u.default)(this,P),W.$options.name==="ShGeneralCard"}.bind(this))},methods:{changeShow:function(D){var P;if((P=this.$_mixin_generalCard)===null||P===void 0||P.changeShow(D),D===!1||D!==!0&&this.visible){var W;(W=this.deactivate)===null||W===void 0||W.call(this)}},changeStatus:function(D){var P;(P=this.$_mixin_generalCard)===null||P===void 0||P.changeStatus(D)},getPosition:function(){var D;return(D=this.$_mixin_generalCard)===null||D===void 0?void 0:D.getPosition()}}},$=c;O.default=$},823860:function(nt,O,d){nt.exports=function(o){var g={};function u(x){if(g[x])return g[x].exports;var c=g[x]={i:x,l:!1,exports:{}};return o[x].call(c.exports,c,c.exports,u),c.l=!0,c.exports}return u.m=o,u.c=g,u.d=function(x,c,$){u.o(x,c)||Object.defineProperty(x,c,{enumerable:!0,get:$})},u.r=function(x){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},u.t=function(x,c){if(c&1&&(x=u(x)),c&8||c&4&&typeof x=="object"&&x&&x.__esModule)return x;var $=Object.create(null);if(u.r($),Object.defineProperty($,"default",{enumerable:!0,value:x}),c&2&&typeof x!="string")for(var A in x)u.d($,A,function(D){return x[D]}.bind(null,A));return $},u.n=function(x){var c=x&&x.__esModule?function(){return x.default}:function(){return x};return u.d(c,"a",c),c},u.o=function(x,c){return Object.prototype.hasOwnProperty.call(x,c)},u.p="/dist/",u(u.s=756)}({0:function(o,g){o.exports=d(342579)},1:function(o,g){o.exports=d(828866)},10:function(o,g){o.exports=d(42762)},104:function(o,g){o.exports=d(237561)},13:function(o,g){o.exports=d(66273)},17:function(o,g){o.exports=d(985208)},18:function(o,g){o.exports=d(659791)},19:function(o,g){o.exports=d(183393)},2:function(o,g,u){"use strict";u.d(g,"a",function(){return x});function x(c,$,A,D,P,W,Q,H){var r=typeof c=="function"?c.options:c;$&&(r.render=$,r.staticRenderFns=A,r._compiled=!0),D&&(r.functional=!0),W&&(r._scopeId="data-v-"+W);var z;if(Q?(z=function(v){v=v||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!v&&typeof __VUE_SSR_CONTEXT__<"u"&&(v=__VUE_SSR_CONTEXT__),P&&P.call(this,v),v&&v._registeredComponents&&v._registeredComponents.add(Q)},r._ssrRegister=z):P&&(z=H?function(){P.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:P),z)if(r.functional){r._injectStyles=z;var B=r.render;r.render=function(I,T){return z.call(T),B(I,T)}}else{var V=r.beforeCreate;r.beforeCreate=V?[].concat(V,z):[z]}return{exports:c,options:r}}},20:function(o,g){o.exports=d(105077)},21:function(o,g){o.exports=d(581806)},22:function(o,g){o.exports=d(669033)},25:function(o,g){o.exports=d(543389)},27:function(o,g){o.exports=d(578756)},28:function(o,g){o.exports=d(132726)},30:function(o,g){o.exports=d(832569)},32:function(o,g){o.exports=d(417745)},366:function(o,g){o.exports=d(352426)},37:function(o,g){o.exports=d(159602)},4:function(o,g){o.exports=d(555616)},43:function(o,g){o.exports=d(147806)},471:function(o,g){o.exports=d(295560)},6:function(o,g){o.exports=d(783574)},63:function(o,g){o.exports=d(936161)},7:function(o,g){o.exports=d(17249)},756:function(o,g,u){"use strict";u.r(g);var x=u(0),c=u.n(x),$=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShow,expression:"shouldShow"}],staticClass:"sh-roam3d"},[e("general-container",{ref:"container",attrs:{"is-show":t.visible,title:t.title?t.title:"\u98DE\u884C\u6F2B\u6E38","img-src":t.imgSrc?t.imgSrc:"roam3d","style-config":t.cardStyleConfig,position:t.position,theme:t.theme,"drag-enable":t.dragEnable,"theme-style":t.cardThemeStyle,"only-container":t.onlyContainer,"append-to-body":t.appendToBody},on:{"update:isShow":function(a){t.visible=a},"update:is-show":function(a){t.visible=a},"change:isShow":t.onChangeIsShow}},[e("div",{staticClass:"roma_content"},[t.selectIndex===0?e("div",{staticClass:"roma_plot"},[e("div",{staticClass:"btnBox"},[e("div",{staticClass:"bffbtn",on:{click:function(a){return t.draw()}}},[t._v("\u65B0\u589E\u8DEF\u7EBF")]),e("div",{staticClass:"bffbtn",on:{click:function(a){return t.download()}}},[t._v("\u4E0B\u8F7D\u8DEF\u7EBF")]),e("div",{staticClass:"bffbtn",on:{click:function(a){return t.delFlyIds()}}},[t._v("\u5220\u9664\u8DEF\u7EBF")])]),e("el-table",{attrs:{data:t.tableData,border:"","min-height":"420","row-class-name":t.tableRowClassName},on:{"row-click":t.rowClick,"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{prop:"name",label:"\u8DEF\u7EBF\u540D\u79F0","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"\u64CD\u4F5C",align:"center",width:"60","class-name":"small-padding fixed-width cell-img"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{attrs:{title:"\u98DE\u884C"}},[e("icon-svg",{staticStyle:{cursor:"pointer"},attrs:{"icon-class":"roam3d"},nativeOn:{click:function(h){return h.stopPropagation(),t.fly(a.row.id)}}})],1),e("span",{staticStyle:{"margin-left":"5px"},attrs:{title:"\u7F16\u8F91"}},[e("icon-svg",{staticStyle:{cursor:"pointer"},attrs:{"icon-class":"edit"},nativeOn:{click:function(h){return h.stopPropagation(),t.editFly(a.row.id)}}})],1)]}}],null,!1,1633177591)})],1),e("div",{staticClass:"page"},[e("el-pagination",{attrs:{small:"",background:"",layout:"total, prev, pager, next","hide-on-single-page":!0,"current-page":t.pageNum,"pager-count":5,"page-size":t.pageSize,total:t.total},on:{"current-change":t.changeList}})],1)],1):t._e(),t.isDisable?t._e():e("div",{staticClass:"roma_info"},[e("div",{staticClass:"roma_title"},[e("span",{staticClass:"goback",on:{click:function(a){return t.select(0)}}},[t._v("\u8FD4\u56DE")]),e("span",{staticClass:"curr_name",attrs:{title:t.curr_line}},[t._v("\u5F53\u524D\u8DEF\u7EBF\uFF1A"+t._s(t.curr_line))])]),e("div",{staticClass:"roma_tab"},[e("div",{class:{tab_item:!0,active:t.selectIndex===2},on:{click:function(a){return t.select(2)}}},[t._v(`
            \u5C5E\u6027
          `)]),e("div",{class:{tab_item:!0,active:t.selectIndex===1},on:{click:function(a){return t.select(1)}}},[t._v(`
            \u70B9\u4F4D
          `)])]),t.selectIndex===1?e("div",{staticClass:"roma_latlng"},[e("Page-form",{attrs:{"ref-obj":t.formInfo.ref,data:t.formInfo.data,"field-list":t.formInfo.fieldList,rules:t.formInfo.rules,"label-width":t.formInfo.labelWidth},on:{"update:refObj":function(a){return t.$set(t.formInfo,"ref",a)},"update:ref-obj":function(a){return t.$set(t.formInfo,"ref",a)},handleClick:t.handleClick,handleEvent:t.handleEvent},scopedSlots:t._u([{key:"form-temslot",fn:function(){return[e("div",{staticClass:"temp"},[e("Page-form",{attrs:{"point-index":t.pointIndex,"ref-obj":t.formInfo.ref,data:t.formInfo.temArr,showdel:!0,"field-list":t.formInfo.addtem,rules:t.formInfo.rules,"label-width":"46px"},on:{"update:refObj":function(a){return t.$set(t.formInfo,"ref",a)},"update:ref-obj":function(a){return t.$set(t.formInfo,"ref",a)},handleClick:t.handleClick,handleEvent:t.handleEvent}})],1)]},proxy:!0}],null,!1,2100680801)})],1):t._e(),t.selectIndex===2?e("div",{staticClass:"roma_attr"},[e("Page-form",{attrs:{"ref-obj":t.formInfo1.ref,data:t.formInfo1.data,"field-list":t.formInfo1.fieldList,rules:t.formInfo1.rules,"label-width":t.formInfo1.labelWidth},on:{"update:refObj":function(a){return t.$set(t.formInfo1,"ref",a)},"update:ref-obj":function(a){return t.$set(t.formInfo1,"ref",a)},handleClick:t.handleClick,handleEvent:t.handleEvent}}),e("div",{staticClass:"btnBox"},[e("div",{staticClass:"bffbtn",on:{click:function(a){return t.startFly()}}},[t._v("\u5F00\u59CB\u6F2B\u6E38")]),e("div",{staticClass:"bffbtn",on:{click:function(a){return t.delFly(t.roamId)}}},[t._v("\u5220\u9664\u8DEF\u7EBF")])])],1):t._e()])])]),e("Fly",{ref:"fly",on:{setRoamView:t.setRoamView}})],1)},A=[];$._withStripped=!0;var D=u(17),P=u.n(D),W=u(18),Q=u.n(W),H=u(8),r=u.n(H),z=u(19),B=u.n(z),V=u(20),v=u.n(V),I=u(10),T=u.n(I),N=u(9),w=u.n(N),b=u(25),s=u.n(b),l=u(1),f=u.n(l),y=u(27),p=u.n(y),S=u(21),E=u.n(S),k=u(13),C=u.n(k),L=u(22),U=u.n(L),J=u(104),G=u.n(J),R=u(4),ft=u(32),Z=u.n(ft),lt=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-form",{ref:"form",staticClass:"page-form",class:t.className,attrs:{model:t.data,rules:t.rules,"label-width":t.labelWidth}},t._l(t.getConfigList(),function(a,h){return e("div",{key:h,class:{highlight:h==t.pointIndex},attrs:{id:h==t.pointIndex?"light"+t.pointIndex:"nolight"}},[a.title?e("div",{staticClass:"Collapse",on:{click:function(n){n.preventDefault(),a.title.showList=!a.title.showList}}},[t.showdel?e("i",{class:a.title.showList?"el-icon-caret-bottom":"el-icon-caret-right"}):e("i",{class:a.title.showList?"el-icon-arrow-down":"el-icon-arrow-right"}),t._v(`
      `+t._s(a.title.name)+`
      `),t.showdel?e("div",{on:{click:function(n){return n.stopPropagation(),t.handleClick("addtem",h)}}},[e("div",{staticStyle:{width:"16px",height:"16px","line-height":"14px",background:"#467cf3","border-radius":"50%",color:"#fff",position:"absolute",right:"36px",top:"5px","text-align":"center"}},[t._v(`
          +
        `)])]):t._e(),t.showdel?e("div",{on:{click:function(n){return n.stopPropagation(),t.handleClick("deltem",h)}}},[e("div",{staticStyle:{width:"16px",height:"16px","line-height":"14px",background:"#ff5e67","border-radius":"50%",color:"#fff",position:"absolute",right:"10px",top:"5px","text-align":"center"}},[t._v(`
          -
        `)])]):t._e()]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:a.title.showList,expression:"ConfigList.title.showList"}]},[a.title.addTemp?[t._t("form-"+a.slotprop)]:t._e(),t._l(a.formList,function(n,F){return e("el-form-item",{key:F,class:n.className,attrs:{prop:n.value,label:n.label}},[n.type==="slot"?[t._t("form-"+n.value)]:t._e(),n.type==="input"||n.type==="password"?e("el-input",{attrs:{type:n.type,disabled:n.disabled,placeholder:t.getPlaceholder(n),clearable:""},on:{change:function(m){return t.handleEvent()}},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}}):t._e(),n.type==="textarea"?e("el-input",{attrs:{type:n.type,resize:"none",disabled:n.disabled,placeholder:t.getPlaceholder(n),autosize:n.autosize||{minRows:2,maxRows:10}},on:{change:function(m){return t.handleEvent()}},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,typeof m=="string"?m.trim():m)},expression:"data[item.value]"}}):t._e(),n.type==="inputNumber"?e("el-input-number",{attrs:{"controls-position":"right",min:n.min,max:n.max,step:n.step},on:{change:function(m){return t.handleEvent(n.value)}},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}}):t._e(),n.type==="select"?e("el-select",{attrs:{disabled:n.disabled,clearable:n.clearable,filterable:n.filterable,placeholder:t.getPlaceholder(n)},on:{change:function(m){return t.handleEvent()}},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}},t._l(n.list,function(m,j){return e("el-option",{key:j,attrs:{label:m.label,value:m.value}})}),1):t._e(),n.type==="ColorPicker"?e("div",{staticClass:"divContent"},[e("el-input",{staticClass:"colorInput",attrs:{placeholder:""},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}}),e("el-color-picker",{model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}})],1):t._e(),n.type==="switch"?e("el-switch",{attrs:{"active-color":"#0486FE"},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}}):t._e(),n.type==="slider"?e("div",{staticStyle:{display:"flex"}},[e("el-slider",{staticStyle:{width:"60%","margin-right":"10px"},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}}),e("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:""},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}},[e("template",{slot:"suffix"},[t._v(" % ")])],2)],1):t._e(),n.type==="checkBoxGroup"?e("el-checkbox-group",{model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}},t._l(n.list,function(m){return e("el-checkbox",{key:m.key,attrs:{label:m.key}},[t._v(t._s(m.value))])}),1):t._e(),n.type=="radioGroup"?e("el-radio-group",{on:{change:function(m){return t.handleEvent()}},model:{value:t.data[n.value],callback:function(m){t.$set(t.data,n.value,m)},expression:"data[item.value]"}},t._l(n.list,function(m,j){return e("el-radio",{key:j,attrs:{label:m.key}},[t._v(t._s(m.value))])}),1):t._e()],2)})],2)])}),0)},it=[];lt._withStripped=!0;var tt={name:"PageForm",props:{pointIndex:{type:Number,default:null},className:{type:String},showdel:{type:Boolean,default:!1},data:{type:Object},fieldList:{type:Array},rules:{type:Object},listTypeInfo:{type:Object},labelWidth:{type:String,default:"120px"},refObj:{type:Object}},data:function(){return{activeNames:["1"]}},watch:{data:{handler:function(){this.$emit("update:refObj",this.$refs.form)},deep:!0}},mounted:function(){this.$emit("update:refObj",this.$refs.form)},methods:{handleChange:function(){},getConfigList:function(){var i,e=this;return r()(i=this.fieldList).call(i,function(a){return c()(this,e),!a.hasOwnProperty("show")||a.hasOwnProperty("show")&&a.show}.bind(this))},getPlaceholder:function(i){var e;return i.type==="input"||i.type==="textarea"?e="\u8BF7\u8F93\u5165"+i.label:i.type==="select"||i.type==="time"||i.type==="date"?e="\u8BF7\u9009\u62E9"+i.label:e=i.label,e},handleEvent:function(i){this.$emit("handleEvent",this.data,i)},handleClick:function(i,e){this.getConfigList().length===2?Object(R.Message)({type:"warning",message:"\u65E0\u6CD5\u5220\u9664\uFF0C\u70B9\u6570\u91CF\u4E0D\u80FD\u5C11\u4E8E2"}):this.$emit("handleClick",i,e,this.data)}}},rt=tt,et=u(2),ut=Object(et.a)(rt,lt,it,!1,null,null,null),ht=ut.exports,st=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("general-container",{attrs:{"only-container":"","is-show":t.flyShow,position:t.position,theme:"dark"},on:{"update:isShow":function(a){t.flyShow=a},"update:is-show":function(a){t.flyShow=a}}},[e("div",{staticClass:"fly_content el-card__header",staticStyle:{"pointer-events":"all"}},[e("div",{staticClass:"fly_l"},[e("span",{attrs:{title:"\u4E0A\u4E00\u8282\u70B9"}},[e("icon-svg",{staticStyle:{cursor:"pointer"},attrs:{"icon-class":"left"},nativeOn:{click:function(a){return t.backward()}}})],1),e("span",[t.isPlay?e("icon-svg",{staticStyle:{cursor:"pointer"},attrs:{"icon-class":"play"},nativeOn:{click:function(a){return t.start()}}}):e("icon-svg",{staticStyle:{cursor:"pointer"},attrs:{"icon-class":"pause"},nativeOn:{click:function(a){return t.suspend()}}})],1),e("span",{attrs:{title:"\u4E0B\u4E00\u8282\u70B9"}},[e("icon-svg",{staticStyle:{cursor:"pointer"},attrs:{"icon-class":"right"},nativeOn:{click:function(a){return t.forward()}}})],1),e("span",{attrs:{title:"\u505C\u6B62\u6F2B\u6E38"}},[e("icon-svg",{staticStyle:{cursor:"pointer"},attrs:{"icon-class":"play2"},nativeOn:{click:function(a){return t.stop()}}})],1)]),e("div",{staticClass:"fly_r"},[e("el-select",{on:{change:function(a){return t.selectCamera()}},model:{value:t.cameraType,callback:function(a){t.cameraType=a},expression:"cameraType"}},t._l(t.cameraTypeList,function(a,h){return e("el-option",{key:h,attrs:{label:a.label,value:a.value}})}),1),e("div",{staticClass:"back"},[e("span",{attrs:{title:"\u8FD4\u56DE\u5217\u8868"}},[e("icon-svg",{staticStyle:{cursor:"pointer"},attrs:{width:"14px",height:"14px","icon-class":"close"},nativeOn:{click:function(a){return t.signOut()}}})],1)])],1)])])},Ct=[];st._withStripped=!0;var gt=u(471),dt=u(366),mt=u.n(dt),It=u(30),yt=u.n(It),X,K={name:"Fly",directives:{cardDrag:mt.a},components:{IconSvg:Z.a,GeneralContainer:yt.a},data:function(){return{position:{type:"absolute",left:"500px",bottom:"500px"},flyShow:!1,cameraTypeList:[{label:"\u65E0",value:"0"},{label:"\u81EA\u7531\u89C6\u89D2",value:"gs"},{label:"\u9501\u5B9A\u89C6\u89D2",value:"dy"},{label:"\u4E0A\u5E1D\u89C6\u89D2",value:"sd"}],cameraType:"dy",flyData:null,isPlay:!0,isStart:!0}},mounted:function(){this.position={type:"absolute",left:document.body.offsetWidth*.5-140+"px",bottom:"50px"}},methods:{init:function(i,e){if(!i){R.Message.error("\u5F53\u524D\u6CA1\u6709\u6F2B\u6E38\u8DEF\u7EBF\u6570\u636E\uFF01");return}this.flyShow&&this.stop(),this.flyData=i,this.flyShow=!0,X=new gt.RoamFly({route:i,viewer:e,timeEnd:this._timeEnd}),this.cameraType=i.properties.attr.cameraType,this.start()},setComponentShow:function(i){this.flyShow=i},cameraTypeChange:function(i){X.updateAttr({cameraType:i})},selectCamera:function(){this.cameraTypeChange(this.cameraType)},start:function(){this.isPlay=!1,this.isStart?X.start(this.flyData):this.play()},play:function(){X.isPause=!1},stop:function(){X.stop(),this.isPlay=!0,this.isStart=!0,X.isPause=!1},suspend:function(){X.recordPause(),this.isPlay=!0,this.isStart=!1,X.isPause=!0},backward:function(){X.backward()},forward:function(){X.forward()},_timeEnd:function(){this.isPlay=!0,this.isStart=!0},signOut:function(){this.flyShow=!1,this.isStart=!0;var i={isShow:!0,isMin:!1,roamId:null,selectIndex:0,isDisable:!0,isRemove:!0};this.$emit("setRoamView",i),X&&X.stop()},closeView:function(){this.flyShow=!1,this.isStart=!0,X&&X.stop()}}},Ot=K,Pt=Object(et.a)(Ot,st,Ct,!1,null,null,null),At=Pt.exports,Lt=u(80),pt=u(90),xt=u(63),$t=u(6),Rt=u.n($t),Ft=u(43),jt=u.n(Ft),zt=u(7),Bt=u.n(zt),bt=u(37);function St(t,i){var e=P()(t);if(Q.a){var a=Q()(t);i&&(a=r()(a).call(a,function(h){return B()(t,h).enumerable})),e.push.apply(e,a)}return e}function kt(t){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?St(Object(e),!0).forEach(function(a){s()(t,a,e[a])}):v.a?Object.defineProperties(t,v()(e)):St(Object(e)).forEach(function(a){Object.defineProperty(t,a,B()(e,a))})}return t}var Nt=function(){function t(i,e,a,h){w()(this,t),this.baseUrl=i,this.token=e,this.applicationId=a,this.schemeId=h}return T()(t,[{key:"get",value:function(e,a){var h=this;return new p.a(function(n,F){var m=this;c()(this,h),Object(bt.getFromAdmin)(this.baseUrl+e,{params:kt({schemeId:this.schemeId},a),token:this.token,applicationId:this.applicationId}).then(function(j){c()(this,m);var Y=Object(bt.parseResult)(j);Y.success?n(Y.data):R.Message.error(Y.message)}.bind(this)).catch(function(j){c()(this,m),F(j.data)}.bind(this))}.bind(this))}},{key:"post",value:function(e,a){var h=this;return new p.a(function(n,F){var m=this;c()(this,h),Object(bt.postFromAdmin)(this.baseUrl+e,C()(kt({schemeId:this.schemeId},a)),{token:this.token,applicationId:this.applicationId}).then(function(j){c()(this,m);var Y=Object(bt.parseResult)(j);Y.success?n(Y.data):R.Message.error(Y.message)}.bind(this)).catch(function(j){c()(this,m),F(j.data)}.bind(this))}.bind(this))}},{key:"getRoamList",value:function(e){return this.get("/roam/list",e)}},{key:"addRoam",value:function(e){return this.post("/roam/add",e)}},{key:"roamDetail",value:function(e){return this.get("/roam/details/"+e)}},{key:"delRoam",value:function(e){return this.get("/roam/del/"+e)}},{key:"editRoam",value:function(e){return this.post("/roam/modify",e)}}]),t}();function Tt(t,i){var e=P()(t);if(Q.a){var a=Q()(t);i&&(a=r()(a).call(a,function(h){return B()(t,h).enumerable})),e.push.apply(e,a)}return e}function Dt(t){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?Tt(Object(e),!0).forEach(function(a){s()(t,a,e[a])}):v.a?Object.defineProperties(t,v()(e)):Tt(Object(e)).forEach(function(a){Object.defineProperty(t,a,B()(e,a))})}return t}var Mt=[{label:"\u6279\u91CF\u52A0\u9AD8\u7A0B",value:"batch",type:"inputNumber"},{label:"\u7EDF\u4E00\u6539\u9AD8\u7A0B",value:"unified",type:"inputNumber"},{label:"\u901F\u5EA6 (km/h)",value:"speed",type:"inputNumber"}],Et=[{label:"\u540D\u79F0",value:"name",type:"input"},{label:"\u6F2B\u6E38\u5BF9\u8C61",value:"point",type:"select",list:[{label:"\u65E0",value:"0"},{label:"\u5706\u70B9",value:"point"},{label:"\u6C7D\u8F66\u6A21\u578B",value:"model_car"},{label:"\u98DE\u673A\u6A21\u578B",value:"model_air"},{label:"\u536B\u661F\u6A21\u578B",value:"model_weixin"}]},{label:"\u663E\u793A\u6CE8\u8BB0",value:"showLabel",type:"radioGroup",list:[{key:!0,value:"\u662F"},{key:!1,value:"\u5426"}]},{label:"\u663E\u793A\u8DEF\u7EBF",value:"showLine",type:"radioGroup",list:[{key:!0,value:"\u662F"},{key:!1,value:"\u5426"}]},{label:"\u663E\u793A\u6295\u5F71",value:"showShadow",type:"radioGroup",list:[{key:!0,value:"\u662F"},{key:!1,value:"\u5426"}]},{label:"\u89C6\u89D2",value:"cameraType",type:"select",list:[{label:"\u65E0",value:"0"},{label:"\u81EA\u7531\u89C6\u89D2",value:"gs"},{label:"\u9501\u5B9A\u89C6\u89D2",value:"dy"},{label:"\u4E0A\u5E1D\u89C6\u89D2",value:"sd"}]},{label:"\u9501\u5B9A\u8DDD\u79BB",value:"followedX",type:"inputNumber",className:"bfshow"},{label:"\u9501\u5B9A\u9AD8\u5EA6",value:"followedZ",type:"inputNumber",className:"bfshow"},{label:"\u5FAA\u73AF\u6F2B\u6E38",value:"clockRange",type:"radioGroup",list:[{key:!0,value:"\u662F"},{key:!1,value:"\u5426"}]},{label:"\u5907\u6CE8",value:"remark",type:"textarea",className:"textarea"}],ot,M,q,at,Vt={name:"ShRoam3d",components:{PageForm:ht,Fly:At,GeneralContainer:yt.a,IconSvg:Z.a},mixins:[Rt.a,jt.a,Bt.a],props:{url:{type:String},schemeId:{type:String}},data:function(){return{shouldShow:!1,typeConfig:{size:{radius:"4px",width:"275px",height:"568px"}},selectIndex:0,tableData:[],total:0,pageSize:10,pageNum:1,formInfo:{ref:null,data:{batch:0,unified:0,speed:100},temArr:{},fieldList:[{title:{name:"\u6279\u91CF\u4FEE\u6539",showList:!0},formList:Mt},{title:{name:"\u5750\u6807\u5217\u8868",addTemp:!0,showList:!0},slotprop:"temslot"}],addtem:[],rules:{},labelWidth:"70px"},formInfo1:{ref:null,data:{name:null,point:"point",showLabel:!1,showLine:!0,showShadow:!1,cameraType:"dy",followedX:300,followedZ:200,clockRange:!1,remark:""},fieldList:[{title:{name:"\u5C5E\u6027\u4FE1\u606F",showList:!0},formList:Et}],rules:{},labelWidth:"65px"},drawStyle:{lineType:"solid",animationDuration:2e3,animationImage:"img/textures/lineClr.png",color:"#ffff00",width:4,clampToGround:!1,outline:!1,outlineColor:"#ffffff",outlineWidth:2,opacity:1,zIndex:0},flyData:null,oldBatch:0,isDisable:!0,isBookmark:!1,roamId:null,updateSpeed:[],pointIndex:null,timer:null,curr_line:null,currId:null,isLonLat:!1,delData:[]}},computed:{cardStyleConfig:function(){return Dt(Dt({},this.typeConfig),this.styleConfig)}},watch:{currentView:{handler:function(i){if(this.shouldShow=i==="earth",i!=="earth"){var e;(e=this.$refs.fly)===null||e===void 0||e.closeView()}},immediate:!0}},created:function(){},mounted:function(){var i=this;this.$earth&&setTimeout(function(){c()(this,i),this.begin()}.bind(this),0),this.subscribe.$on("book-mark3d:roamAdd",function(){c()(this,i),this.draw(!0)}.bind(this)),this.subscribe.$on("book-mark3d:roamFly",function(e){c()(this,i),this.fly(e)}.bind(this)),this.subscribe.$on("book-mark3d:roamEdit",function(e){c()(this,i),this.editFly(e);var a={isShow:!0,roamId:e,selectIndex:2,isDisable:!1,isRemove:!1};this.setRoamView(a)}.bind(this))},beforeDestroy:function(){var i;M.clearDraw(),(i=this.$refs.fly)===null||i===void 0||i.closeView()},methods:{init:function(){at=new Nt(this.url,this.token,this.fastApplicationId,this.schemeId),this.getList()},onChangeIsShow:function(i){this.$emit("change:isShow",i),i||(M.clearDraw(),this.$refs.fly.closeView(),this.stopDraw())},begin:function(){ot=this.$earth.viewer,this.initDraw(),this.init()},handleSelectionChange:function(i){this.delData=i},getList:function(){var i=this,e={current:this.pageNum,size:this.pageSize};at.getRoamList(e).then(function(a){c()(this,i),this.tableData=a.records,this.total=a.total,this.tableData.length===0&&this.total!==0&&(this.pageNum=this.pageNum-1,this.getList())}.bind(this))},setRoamView:function(i){this.currId=i.roamId,this.changeShow(i.isShow),this.roamId=i.roamId,this.selectIndex=i.selectIndex,this.isDisable=i.isDisable,i.isRemove&&this.removeAll()},select:function(i){i!==0&&this.isDisable||(this.selectIndex=i,this.selectIndex===1&&(this.isLonLat=!0),i===0&&this.roamId&&(this.saveData(),this.isLonLat=!1,this.isDisable=!0))},initDraw:function(){var i=this,e={hasEdit:!0,horizontalBar:!1,labelShow:!0,polygonShow:!0,polylineShow:!0,showToolbar:!0,verticalBar:!0};M=new Lt.Draw(ot,e),window.viewer=ot;var a={visible:!0,id:"roam",type:"geojson-draw"};ot.shine.addLayer(a),M.hasEdit(!0),M.on("change:active",function(n){c()(this,i),this.$emit("change:active",n.active)}.bind(this));var h=this;M.on(pt.DrawCreated,function(n){(n.entity._attribute.attr.id===null||n.entity._attribute.attr.id==="")&&(n.entity._attribute.attr.id=h.getCurrTime()),q=n.entity,h.setTem(n.entity.editing.getPosition(),!1),h.selectIndex=2,h.isDisable=!1,h.saveData(!0),h.startEditing(n.entity),h.currId=null}),M.on(pt.EditStart,function(n){q=n.entity,h.setTem(n.entity.editing.getPosition(),!1),h.selectIndex=2,h.isLonLat&&(h.selectIndex=1),h.isDisable=!1,h.$refs.fly.closeView(),h.startEditing(n.entity)}),M.on(pt.EditMovePoint,function(n){q=n.entity,h.setTem(n.entity.editing.getPosition(),!1),h.startEditing(n.entity)}),M.on(pt.EditRemovePoint,function(n){q=n.entity,h.setTem(n.entity.editing.getPosition(),!1),h.startEditing(n.entity),h.pointIndex=void 0}),M.on(pt.EditStop,function(n){q=n.entity,h.selectIndex=0,h.isDisable=!0,h.roamId&&h.saveData()}),M.on("delete-feature",function(){var n=this;c()(this,i),at.delRoam(this.currId).then(function(){c()(this,n),Object(R.Message)({message:"\u5DF2\u5220\u9664\u5F53\u524D\u8DEF\u7EBF\uFF01",type:"success"}),this.currId=null,this.roamId=null,this.selectIndex=0,this.isDisable=!0,this.getList()}.bind(this))}.bind(this))},changeList:function(i){this.pageNum=i,this.getList()},draw:function(i){this.removeAll(),this.roamId=null,this.isBookmark=!!i,this.formInfo1.data={name:null,point:"point",showLabel:!1,showLine:!0,showShadow:!1,cameraType:"dy",followedX:300,followedZ:200,clockRange:!1,remark:""},this.formInfo.data={batch:0,unified:0,speed:100},this.updateSpeed=[];var e=this.formInfo1.data;e.name=this.formInfo1.data.name||""+this.getCurrTime(),M.startDraw({attr:e,drawtype:"polyline",style:this.drawStyle,speed:this.formInfo.data.speed})},startEditing:function(i){var e=this,a=this,h=i.editing.draggers;h.forEach(function(n){var F=this;c()(this,e),n._pointType===1&&(n.onDragStart=function(m){a.pointIndex=m.index}),n.onDragEnd=function(){var m=this;c()(this,F);var j=document.getElementById("light"+this.pointIndex);j&&j.scrollIntoView(),window.clearTimeout(this.timer),this.timer=setTimeout(function(){c()(this,m),this.pointIndex=null}.bind(this),1e4)}.bind(this)}.bind(this)),M.startEditing(i)},stopDraw:function(){M&&M.stopDraw()},removeAll:function(){M.clearDraw()},fly:function(i,e){var a=this;e?this.$refs.fly.init(i,ot):(this.currId=i,this.removeAll(),at.roamDetail(i).then(function(h){c()(this,a),this.flyData={geometry:JSON.parse(h.geometry),name:h.name,id:h.id,properties:JSON.parse(h.properties),type:"Feature"},this.curr_line=h.name,this.$refs.fly.init(this.flyData,ot)}.bind(this)))},startFly:function(){this.removeAll(),this.saveData(),this.$refs.fly.init(this.flyData,ot),this.$emit("changeBookView",!1)},editFly:function(i){var e=this;this.currId=i,this.roamId=i,this.isDisable=!1,at.roamDetail(i).then(function(a){if(c()(this,e),!a){R.Message.error("\u5F53\u524D\u6CA1\u6709\u6F2B\u6E38\u8DEF\u7EBF\u6570\u636E\uFF01");return}this.flyData={geometry:JSON.parse(a.geometry),name:a.name,id:a.id,properties:JSON.parse(a.properties),type:"Feature"},this.curr_line=a.name,q=M.loadJson(this.flyData,{isClear:!1,isFly:!0})[0],this.updateSpeed=this.flyData.properties.speed,this.formInfo.data={batch:0,unified:0,speed:100},this.formInfo1.data=this.flyData.properties.attr,M.startEditing(q)}.bind(this))},delFlyIds:function(){var i=this;if(this.delData.length===0){Object(R.Message)({message:"\u8BF7\u52FE\u9009\u5220\u9664\u6570\u636E\uFF01",type:"warning"});return}this.$confirm("\u662F\u5426\u786E\u5B9A\u5220\u9664\u8DEF\u7EBF?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){var e,a=this;c()(this,i);var h=[],n=f()(e=this.delData).call(e,function(F){return c()(this,a),F.id}.bind(this));n.forEach(function(F){c()(this,a),h.push(at.delRoam(F))}.bind(this)),p.a.all(h).then(function(){c()(this,a),E()(n).call(n,this.currId)&&(this.currId=null,this.$refs.fly.closeView()),this.roamId=null,this.removeAll(),this.selectIndex=0,this.isDisable=!0,this.getList()}.bind(this))}.bind(this)).catch(function(){c()(this,i),Object(R.Message)({message:"\u5DF2\u53D6\u6D88\u5220\u9664!",type:"info"})}.bind(this))},delFly:function(i){var e=this;this.$confirm("\u662F\u5426\u786E\u5B9A\u5220\u9664\u8DEF\u7EBF?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){var a=this;c()(this,e),at.delRoam(i).then(function(){c()(this,a),i===this.currId&&(this.currId=null,this.$refs.fly.closeView()),this.roamId=null,this.removeAll(),this.selectIndex=0,this.isDisable=!0,this.getList()}.bind(this))}.bind(this)).catch(function(){c()(this,e),Object(R.Message)({message:"\u5DF2\u53D6\u6D88\u5220\u9664!",type:"info"})}.bind(this))},handleClick:function(i,e,a){var h=JSON.parse(C()(a));switch(i){case"addtem":{var n=this.objToArray(h),F=n[e],m,j,Y,_;e+1===n.length?(m=n[e-1],j=1.5*F[0]-m[0]/2,Y=1.5*F[1]-m[1]/2,_=1.5*F[2]-m[2]/2):(m=n[e+1],j=(F[0]+m[0])/2,Y=(F[1]+m[1])/2,_=(F[2]+m[2])/2);var vt=[Number(j.toFixed(6)),Number(Y.toFixed(6)),Number(_.toFixed(2))];U()(n).call(n,e+1,0,vt),M.setPositions(Object(xt.lonlats2cartesians)(n),q),this.setTem(n,!0);break}case"deltem":{var ct=this.objToArray(h);U()(ct).call(ct,e,1),M.setPositions(Object(xt.lonlats2cartesians)(ct),q),this.setTem(ct,!0);break}}},handleEvent:function(i,e){if(this.selectIndex===1){var a=JSON.parse(C()(this.formInfo.temArr));switch(e){case"speed":if(!i.speed)return;this.isLonLat=!0,this.formInfo.data.speed=i.speed;for(var h in a)h.indexOf("speed")!==-1&&(a[h]=i.speed);this.formInfo.temArr=a,this.updatelatlng(this.formInfo.temArr);break;case"batch":if(!i.batch)return;this.formInfo.data.batch=i.batch,this.formInfo.data.unified=0;for(var n in a)n.indexOf("z")!==-1&&(a[n]+=i.batch);this.formInfo.temArr=a,this.updatelatlng(a);break;case"unified":if(!i.unified)return;this.formInfo.data.unified=i.unified,this.formInfo.data.batch=0;for(var F in a)F.indexOf("z")!==-1&&(a[F]=i.unified);this.formInfo.temArr=a,this.updatelatlng(a);break;default:this.formInfo.temArr=i,this.updatelatlng(i);break}}else this.selectIndex===2&&(this.formInfo1.data=i,this.updateAttr(),this.changeShowRoam(i.showHeightWarn,"warnHeight"),this.changeShowRoam(i.cameraType==="dy","followedX"),this.changeShowRoam(i.cameraType==="dy"||i.cameraType==="sd","followedZ"))},updateAttr:function(){var i={attr:this.formInfo1.data,drawtype:"polyline",style:this.drawStyle,speed:this.updateSpeed};q=M.updateAttribute(i,q)},updatelatlng:function(i){var e=this.objToArray(i);this.updateSpeed=this.speedToArray(i),this.updateAttr();var a=Object(xt.lonlats2cartesians)(e);M.setPositions(a,q),M.startEditing(q)},getCurrTime:function(){var i=new Date,e=i.getMonth()+1,a=i.getDate(),h=i.getHours(),n=i.getMinutes(),F=i.getSeconds(),m=this.zeroFill(e)+""+this.zeroFill(a)+this.zeroFill(h)+this.zeroFill(n)+this.zeroFill(F);return m},zeroFill:function(i){return Number(i)<10?"0"+i:i},changeShowRoam:function(i,e){var a=this;Et.forEach(function(h){c()(this,a),h.value===e&&i?h.className="bfshow":h.value===e&&!i&&(h.className="bfhide")}.bind(this))},objToArray:function(i){var e=[];for(var a in i)if(a.indexOf("x")!==-1){var h=a.replace("x",""),n=[i[a],i["y".concat(h)],i["z".concat(h)]];e.push(n)}return e},speedToArray:function(i){var e=[];for(var a in i)a.indexOf("speed")!==-1&&e.push(i[a]);return e},setTem:function(i,e){var a=this,h=i;e||(h=Object(xt.cartesians2lonlats)(i));var n=T()(function Y(){w()(this,Y),this.title={name:"",showList:!1},this.formList=[]});if(this.updateSpeed.length>0&&this.updateSpeed.length<h.length)for(var F in h.length-this.updateSpeed.length)this.updateSpeed.push(this.formInfo.data.speed);var m=[],j={};h.forEach(function(Y,_){if(c()(this,a),this.formInfo.addtem.length===0||this.formInfo.addtem.length!==h.length){var vt=new n;vt.title={name:"\u7B2C".concat(_+1,"\u70B9"),showList:!1};var ct={label:"\u7ECF\u5EA6",value:"x".concat(_+1),type:"inputNumber",required:!0,step:1e-6},Xt={label:"\u7EAC\u5EA6",value:"y".concat(_+1),type:"inputNumber",required:!0,step:1e-6},Kt={label:"\u9AD8\u7A0B",value:"z".concat(_+1),type:"inputNumber",required:!0,step:.01},Yt={label:`\u901F\u5EA6 
 km/h`,value:"speed".concat(_+1),type:"inputNumber",required:!0,step:1};vt.formList.push(ct,Xt,Kt,Yt),m.push(vt)}else m=this.formInfo.addtem;j["x".concat(_+1)]=Y[0],j["y".concat(_+1)]=Y[1],j["z".concat(_+1)]=Y[2],j["speed".concat(_+1)]=this.updateSpeed.length>0?this.updateSpeed[_]:this.formInfo.data.speed}.bind(this)),this.formInfo.temArr=j,this.formInfo.addtem=m},saveData:function(i){var e=this;this.flyData=M.toGeoJSON(q),this.flyData.properties.attr.name||(this.flyData.properties.attr.name=""+this.getCurrTime()),this.flyData.name=this.flyData.properties.attr.name;var a={geometry:C()(this.flyData.geometry),name:this.flyData.name,properties:C()(this.flyData.properties),type:this.flyData.geometry.type};this.curr_line=this.flyData.name,i?at.addRoam(a).then(function(h){if(c()(this,e),this.getList(),this.roamId=h,this.isBookmark){this.$emit("addFly",this.roamId,this.flyData.name);var n={isShow:!0,roamId:this.roamId,selectIndex:2,isDisable:!1,isRemove:!1};this.setRoamView(n)}}.bind(this)):(a.id=this.roamId,at.editRoam(a).then(function(){c()(this,e),this.getList()}.bind(this)))},download:function(){this.flyData===null||this.roamId===null?R.Message.error("\u5F53\u524D\u6CA1\u6709\u6F2B\u6E38\u8DEF\u7EBF\u6570\u636E\uFF01"):this.funDownload(C()(this.flyData),this.flyData.name+"\u8DEF\u7EBF\u6570\u636E.json")},funDownload:function(i,e){var a=document.createElement("a");a.download=e,a.style.display="none";var h=new Blob([i]);a.href=G.a.createObjectURL(h),document.body.appendChild(a),a.click(),document.body.removeChild(a)},closeView:function(){this.changeShow(!1)},openView:function(){this.changeShow(this.isShow)},tableRowClassName:function(i){var e=i.row;return e.id===this.currId?"highlight-row":""},rowClick:function(i){this.editFly(i.id)},start:function(){this.$refs.fly.start()},suspend:function(){this.$refs.fly.suspend()},stop:function(){this.$refs.fly.stop()},backward:function(){this.$refs.fly.backward()},forward:function(){this.$refs.fly.forward()},cameraTypeChange:function(i){this.$refs.fly.cameraTypeChange(i)},setComponentShow:function(i){this.$refs.fly.setComponentShow(i)}}},Wt=Vt,Ht=Object(et.a)(Wt,$,A,!1,null,null,null),Ut=Ht.exports,Jt=u(28),Gt=u.n(Jt),Zt=void 0,wt=Gt()(Ut,{transform:function(i,e,a){c()(this,Zt);var h=i.show,n=i.label,F=i.position,m=a.url,j=a.schemeId;return{isShow:h,title:n,position:F,url:m,schemeId:j}}.bind(void 0)});wt.install=function(t){t.component(wt.name,wt)};var Qt=g.default=wt},8:function(o,g){o.exports=d(22466)},80:function(o,g){o.exports=d(325074)},9:function(o,g){o.exports=d(122777)},90:function(o,g){o.exports=d(469973)}})},159602:function(nt,O,d){"use strict";var o=d(419534);Object.defineProperty(O,"__esModule",{value:!0}),O.get=P,O.getFromAdmin=Q,O.imgUrlConvert=V,O.parseError=z,O.parseGaResult=B,O.parseResult=r,O.post=W,O.postFromAdmin=H;var g=o(d(342579)),u=o(d(578756)),x=o(d(66273)),c=o(d(143939)),$=o(d(705146)),A=o(d(10299)),D="Bearer";function P(v,I){var T=this;return new u.default(function(N,w){var b=this;(0,g.default)(this,T),A.default.get(v,{params:I}).then(function(s){(0,g.default)(this,b),N(s.data)}.bind(this)).catch(function(s){(0,g.default)(this,b),w(s.data)}.bind(this))}.bind(this))}function W(v,I){var T=this;return new u.default(function(N,w){var b=this;(0,g.default)(this,T),A.default.post(v,(0,x.default)(I)).then(function(s){(0,g.default)(this,b),N(s.data)}.bind(this)).catch(function(s){(0,g.default)(this,b),w(s.data)}.bind(this))}.bind(this))}function Q(v,I){return I.headers||(I.headers={"Content-Type":"application/json"}),I.token&&(I.headers["X-Gisq-Token"]=D+" "+I.token),I.shinegaDatabaseId&&(I.headers.dataid=I.shinegaDatabaseId),I.applicationId&&(I.headers.ApplicationId=I.applicationId),A.default.get(v,I)}function H(v,I,T){return T.headers||(T.headers={"Content-Type":"application/json"}),T.token&&(T.headers["X-Gisq-Token"]=D+" "+T.token),T.shinegaDatabaseId&&(T.headers.dataid=T.shinegaDatabaseId),T.applicationId&&(T.headers.ApplicationId=T.applicationId),A.default.post(v,I,T)}function r(v){if(v.data.code==="0000"||v.data.code===200){var I=v.data;return{success:!0,data:I.result?I.result:I.data}}else{var T=v.data.description?v.data.description:v.data.message;return{success:!1,message:T}}}function z(v){var I=v.response,T=I.data.description?I.data.description:I.data.message,N;return I.status===401?N=T||"\u7528\u6237\u6821\u9A8C\u5931\u8D25":N=T||"\u672A\u77E5\u9519\u8BEF, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",N}function B(v){var I=this;v=v.headers?v.data:v;var T=!0;if(v.code?T=v.code==="0000":v.message&&(T=v.message==="success"),T){var N=v.result?v.result:v.data;if(N.error)return{success:!1,message:N.error};if(N.IsSucess===!1){var w="";return N.EditErrors.forEach(function(s){(0,g.default)(this,I),w+=s.ErrorMsg+"<br/>"}.bind(this)),{success:!1,message:w}}else return{success:!0,data:N}}else{var b=v.description?v.description:v.message;return{success:!1,message:b}}}function V(v,I,T){var N,w=v,b="[adminserverstatic]";if(((N=w)===null||N===void 0?void 0:N.indexOf(b))>-1)if(w=w.replace(b,""),T){var s,l,f,y="app_"+(0,c.default)(s=T.toLowerCase()).call(s,"-","");w=(0,$.default)(l=(0,$.default)(f="".concat(I,"/files/")).call(f,y,"/")).call(l,w)}else{var p;w=(0,$.default)(p="".concat(I,"/files/shinegisclient/")).call(p,w)}return w}},242709:function(nt,O,d){"use strict";var o=d(148836);const g={data(){return this.map=null,this.timer="",{isEditor:window.location.href.indexOf("editor.html")>0}},inject:{reactiveViewMode:{default:function(){return()=>"23D"}}},computed:{viewMode(){return this.isSetMap_common?this.$_viewMode:this.reactiveViewMode()}},mounted(){!this.widgetInfo.parentId&&this.isEditor&&this.widgetInfo.action.gisMapId&&this.$nextTick(function(){this.updateWidgetParentId({widgetId:this.widgetInfo.id,parentId:this.widgetInfo.action.gisMapId,keepPosition:!0})})},methods:{...(0,o.nv)(["updateWidgetParentId"]),getBindMap(){typeof this.widgetInfo.action.gisMapId<"u"}}};O.Z=g},476010:function(nt,O){"use strict";const d={data(){return{isSpecial:!1,isEditor:window.location.href.indexOf("editor.html")>0}},computed:{isBindToPage(){return this.widgetInfo.config.styleConfig.dragEnable||this.isSpecial},position(){return this.isEditor||!this.isBindToPage?{type:"absolute",top:"0px",left:"0px",bottom:"unset",right:"unset",zIndex:this.widgetInfo.attr.z}:{type:"absolute",top:this.widgetInfo.attr.y+"px",left:this.widgetInfo.attr.x+"px",zIndex:this.widgetInfo.attr.z}},styleConfig(){return{isShowBtn:this.widgetInfo.config.styleConfig.isShowBtn,isStartFix:this.isEditor,titleBar:{miniBtn:!0,maxBtn:!1,closeBtn:!1,fixBtn:!this.isEditor,title:!0},autoVisible:!1,btnSize:{size:this.widgetInfo.config.styleConfig.btnSize.size+"px",padding:this.widgetInfo.config.styleConfig.btnSize.padding+"px",radius:this.widgetInfo.config.styleConfig.btnSize.radius+"px"},size:{radius:this.widgetInfo.config.styleConfig.size.radius+"px",width:this.widgetInfo.attr.w>150?this.widgetInfo.attr.w+"px":"275px",height:this.widgetInfo.attr.hh>100?this.widgetInfo.attr.hh+"px":"80vh"},toolBtnSize:{size:this.widgetInfo.config.styleConfig.toolBtnSize.size+"px",margin:(this.widgetInfo.config.styleConfig.btnSize.size-this.widgetInfo.config.styleConfig.toolBtnSize.size)/2+"px"}}},themeConfig(){let o=this.widgetInfo.config.themeStyle.light;return{light:{title:{backgroundImage:"url('"+o.title.backgroundImage+"')",backgroundColor:o.title.backgroundColor?o.title.backgroundColor:o.floatButton.fillcolor,backgroundSize:o.title.backgroundSize,fontSize:o.title.fontSize+"px",color:o.title.fontColor},primaryFont:{fontSize:o.primaryFont.fontSize+"px",fontColor:o.primaryFont.fontColor},toolButton:{color:o.toolButton.color},panel:{backgroundImage:"url('"+o.panel.backgroundImage+"')",backgroundColor:o.panel.fillcolor,backgroundSize:o.panel.backgroundSize,border:o.panel.border},floatButton:{backgroundColor:o.floatButton.fillcolor,shadowColor:o.floatButton.shadowColor,border:o.floatButton.border}}}}},methods:{bindToPage(o){o&&this.isBindToPage&&(o.parentElement.remove(o),document.getElementById("page_"+this.widgetInfo.pageId).append(o),o.style.pointerEvents="auto",document.getElementById("container_child_"+this.widgetInfo.id).remove())}}};O.Z=d},383915:function(nt,O,d){"use strict";d.r(O),d.d(O,{default:function(){return z}});var o=function(){var V=this,v=V._self._c;return v("div",{directives:[{name:"show",rawName:"v-show",value:V.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],ref:"content",style:{width:V.widgetInfo.attr.w+"px",height:V.widgetInfo.attr.hh+"px"}},[V.viewMode!=="2D"?v("Roam3d",{ref:"roam3d",attrs:{position:V.position,"is-show":!0,url:V.roamUrl,"scheme-id":V.schemeId,"theme-style":V.themeConfig,"style-config":V.styleConfig,"drag-enable":V.widgetInfo.config.styleConfig.dragEnable}}):V._e()],1)},g=[],u=d(823860),x=d.n(u),c=d(386892),$=d(476010),A=d(445061),D=d(126711),P=d(242709),W={name:"GisRoam3d",components:{Roam3d:x()},mixins:[c.D,$.Z,A.u,D.H,P.Z],props:["widgetInfo"],data(){return{timer:"",mapAction:this.widgetInfo.action,btnAttr:this.widgetInfo.attr,roamUrl:this.widgetInfo.config.url,schemeId:this.widgetInfo.config.schemeId}},mounted(){this.viewMode==="2D"&&this.$message("\u7EAF\u4E8C\u7EF4\u6A21\u5F0F\u65E0\u6CD5\u52A0\u8F7D'\u98DE\u884C\u6F2B\u6E38'\u7EC4\u4EF6"),this.isEditor||this.$nextTick(()=>{let B=this.$refs.roam3d.$el;this.bindToPage(B)}),this.initAction(this.widgetInfo)},methods:{reLoadInfo(B){this.btnAttr=B.attr},initAction(B){this.registerAction(B,"configMap","mapList",this.doConfigMap),this.actionReceive(B)}}},Q=W,H=d(768141),r=(0,H.Z)(Q,o,g,!1,null,null,null),z=r.exports}}]);
