(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[2810],{81362:function(Z,j,l){Z.exports=function(e){var s={};function a(u){if(s[u])return s[u].exports;var o=s[u]={i:u,l:!1,exports:{}};return e[u].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=s,a.d=function(u,o,g){a.o(u,o)||Object.defineProperty(u,o,{enumerable:!0,get:g})},a.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},a.t=function(u,o){if(o&1&&(u=a(u)),o&8||o&4&&typeof u=="object"&&u&&u.__esModule)return u;var g=Object.create(null);if(a.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:u}),o&2&&typeof u!="string")for(var b in u)a.d(g,b,function(S){return u[S]}.bind(null,b));return g},a.n=function(u){var o=u&&u.__esModule?function(){return u.default}:function(){return u};return a.d(o,"a",o),o},a.o=function(u,o){return Object.prototype.hasOwnProperty.call(u,o)},a.p="/dist/",a(a.s=787)}({0:function(e,s){e.exports=l(342579)},101:function(e,s){e.exports=l(691)},102:function(e,s){e.exports=l(170017)},103:function(e,s){e.exports=l(260706)},109:function(e,s){e.exports=l(580823)},125:function(e,s){e.exports=l(596376)},17:function(e,s){e.exports=l(985208)},18:function(e,s){e.exports=l(659791)},19:function(e,s){e.exports=l(183393)},2:function(e,s,a){"use strict";a.d(s,"a",function(){return u});function u(o,g,b,S,C,E,O,B){var m=typeof o=="function"?o.options:o;g&&(m.render=g,m.staticRenderFns=b,m._compiled=!0),S&&(m.functional=!0),E&&(m._scopeId="data-v-"+E);var y;if(O?(y=function(I){I=I||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!I&&typeof __VUE_SSR_CONTEXT__<"u"&&(I=__VUE_SSR_CONTEXT__),C&&C.call(this,I),I&&I._registeredComponents&&I._registeredComponents.add(O)},m._ssrRegister=y):C&&(y=B?function(){C.call(this,(m.functional?this.parent:this).$root.$options.shadowRoot)}:C),y)if(m.functional){m._injectStyles=y;var x=m.render;m.render=function(K,Q){return y.call(Q),x(K,Q)}}else{var v=m.beforeCreate;m.beforeCreate=v?[].concat(v,y):[y]}return{exports:o,options:m}}},20:function(e,s){e.exports=l(105077)},21:function(e,s){e.exports=l(581806)},22:function(e,s){e.exports=l(669033)},24:function(e,s){e.exports=l(452909)},25:function(e,s){e.exports=l(543389)},28:function(e,s){e.exports=l(132726)},30:function(e,s){e.exports=l(832569)},38:function(e,s){e.exports=l(326541)},6:function(e,s){e.exports=l(783574)},69:function(e,s){e.exports=l(99245)},7:function(e,s){e.exports=l(17249)},721:function(e,s){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uL2Jhc2UvdHJhc2gyPC90aXRsZT4NCiAgICA8ZyBpZD0iaWNvbi9iYXNlL3RyYXNoMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy4wMDAwMDAsIDEuMDAwMDAwKSIgZmlsbD0iI0ZGNUU2NyIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxwYXRoIGQ9Ik04Ljk1ODQzODUzLDQuMzc0OTY0NDkgQzkuNDE2NDkyMzQsNC4zNzQ5NjQ0OSA5Ljc1NzkyODc4LDQuNzY3MTk3MDMgOS43MTY0NTE0Nyw1LjI0NjUzNjI1IEw5LjcxNjQ1MTQ3LDUuMjQ2NTM2MjUgTDkuMDMzNjk4ODEsMTMuMTI4NDI4MiBDOC45OTI1ODIxNywxMy42MDc3Njc1IDguNTgzMjE5MTIsMTQgOC4xMjUwNDUwOCwxNCBMOC4xMjUwNDUwOCwxNCBMMS44NzUwNzUxNCwxNCBDMS40MTY5MDExLDE0IDEuMDA3NTM4MDUsMTMuNjA3ODkzNyAwLjk2NjQyMTQxLDEzLjEyODQyODIgTDAuOTY2NDIxNDEsMTMuMTI4NDI4MiBMMC4yODM2Njg3NTksNS4yNDY1MzYyNSBDMC4yNDIxOTE0NDUsNC43NjcxOTcwMyAwLjU4MzUwNzY1OCw0LjM3NDk2NDQ5IDEuMDQxNjgxNjksNC4zNzQ5NjQ0OSBMMS4wNDE2ODE2OSw0LjM3NDk2NDQ5IFogTTguMzMzMzkzNDUsNi4xMjUwNTEyOSBMNi42NjY3MjY3OCw2LjEyNTA1MTI5IEw2LjY2NjcyNjc4LDEyLjI1MDAzOTUgTDcuOTE2Njk2NzIsMTIuMjUwMDM5NSBMOC4zMzMzOTM0NSw2LjEyNTA1MTI5IFogTTUuODMzMzMzMzMsNi4xMjUwNTEyOSBMNC4xNjY3ODY4OSw2LjEyNTA1MTI5IEw0LjE2Njc4Njg5LDEyLjI1MDAzOTUgTDUuODMzMzMzMzMsMTIuMjUwMDM5NSBMNS44MzMzMzMzMyw2LjEyNTA1MTI5IFogTTMuMzMzMzkzNDUsNi4xMjUwNTEyOSBMMS42NjY3MjY3OCw2LjEyNTA1MTI5IEwyLjA4MzMwMzI4LDEyLjI1MDAzOTUgTDMuMzMzMzkzNDUsMTIuMjUwMDM5NSBMMy4zMzMzOTM0NSw2LjEyNTA1MTI5IFogTTYuNjY2NjY2NjcsMS40MjEwODU0N2UtMTQgQzcuMDEwNTA3NTksMS40MjEwODU0N2UtMTQgNy4zMzA0MjM5MSwwLjI5MjI0OTIxOSA3LjM3ODAzMjY1LDAuNjQ5NzY1MzI2IEw3LjM3ODAzMjY1LDAuNjQ5NzY1MzI2IEw3LjUyNDQ2NTYsMS43NDk5NjA1NSBMOC43NTAwMzAwNiwxLjc0OTk2MDU1IEM5LjQ0MDQ3NzA1LDEuNzQ5OTYwNTUgMTAsMi4zMzc0ODg3OCAxMCwzLjA2MjQ5NDA4IEwxMCwzLjA2MjQ5NDA4IEwxMCwzLjUwMDA0NzM0IEwwLDMuNTAwMDQ3MzQgTDAsMy4wNjI0OTQwOCBDMCwyLjMzNzQ4ODc4IDAuNTU5NTIyOTUxLDEuNzQ5OTYwNTUgMS4yNDk5Njk5NCwxLjc0OTk2MDU1IEwxLjI0OTk2OTk0LDEuNzQ5OTYwNTUgTDIuNDc1MjkzOTUsMS43NDk5NjA1NSBMMi42MjE3MjY5LDAuNjUwMjcwMjkyIEMyLjY2OTY5NjMxLDAuMjkyMjQ5MjE5IDIuOTg5NjEyNjQsMS40MjEwODU0N2UtMTQgMy4zMzMzMzMzMywxLjQyMTA4NTQ3ZS0xNCBMMy4zMzMzMzMzMywxLjQyMTA4NTQ3ZS0xNCBaIE02LjU2NjY0MDIyLDAuODc0OTgwMjc1IEwzLjQzMzQ4MDAxLDAuODc0OTgwMjc1IEwzLjMxNjk4Mjg2LDEuNzQ5OTYwNTUgTDYuNjgzMTM3MzcsMS43NDk5NjA1NSBMNi41NjY2NDAyMiwwLjg3NDk4MDI3NSBaIiBpZD0i5b2i54q257uT5ZCIIj48L3BhdGg+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},787:function(e,s,a){"use strict";a.r(s);var u=a(0),o=a.n(u),g=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShow,expression:"shouldShow"}],staticClass:"sh-map-measure3d"},[n("general-container",{ref:"container",attrs:{"is-show":!1,"style-config":t.cardStyleConfig,title:t.titleStr,position:t.panelPosition,"img-src":t.panelImgSrc?t.panelImgSrc:"map-measure3d",theme:t.theme},on:{"change:isShow":t.changeCard}},[n("div",{staticClass:"measure_top",class:{light:t.theme==="light"}},[n("div",{staticClass:"measure_t_l"},[n("el-input",{staticClass:"input-with-select",model:{value:t.formInfo.data.text,callback:function(r){t.$set(t.formInfo.data,"text",r)},expression:"formInfo.data.text"}},[n("el-select",{staticClass:"smallModify",attrs:{slot:"append",value:t.unitText,placeholder:""},on:{change:function(r){return t.handleEvent(r)}},slot:"append"},t._l(t.formInfo.units,function(r,f){return n("el-option",{key:f,attrs:{label:r.key,value:[r.value,r.type,r.key],disabled:!t.unitDisable}})}),1)],1)],1),n("div",{staticClass:"measure_del",on:{click:t.remove}},[t._v("\u6E05\u7A7A")])]),n("div",{staticClass:"measure_table measure_result",class:{light:t.theme==="light"}},[t.measure_record.length>-1?n("div",{staticClass:"measure_item first"},[n("div",{staticClass:"item_l"},[t._v("\u6D4B\u91CF\u7C7B\u578B")]),n("div",{staticClass:"item_r"},[t._v("\u6D4B\u91CF\u503C")]),n("div",{staticClass:"item_d"},[t._v("\u64CD\u4F5C\xA0")])]):t._e(),n("div",{staticClass:"measure_result"},t._l(t.measure_record,function(r,f){return n("div",{key:f,staticClass:"measure_item"},[n("div",{staticClass:"item_l"},[t._v(t._s(r.measureType))]),n("div",{staticClass:"item_r"},[t._v(t._s(r.measureValue))]),n("img",{staticClass:"delete item_d",staticStyle:{"object-fit":"scale-down"},attrs:{src:a(721)},on:{click:function(c){return c.stopPropagation(),t.handleEvent("deleteMea",r)}}})])}),0)])]),n("general-bar",{attrs:{mode:t.mode,"drag-enable":t.dragEnable,"is-show":t.visible,position:t.position,options:t.toolOptions,"active-index":t.activeIndex,theme:t.theme,"theme-style":t.barThemeStyle},on:{"update:isShow":function(r){t.visible=r},"update:is-show":function(r){t.visible=r},select:t.select,unselect:t.unselect,"change:isShow":t.onChangeIsShow}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show_charts_mm,expression:"show_charts_mm"}],attrs:{id:"charts_mm"}},[n("div",{ref:"echartsView_mm",attrs:{id:"echartsView_mm"}}),n("div",{staticClass:"echartsView-closeBotton",on:{click:t.closeEchartsView}})])],1)},b=[];g._withStripped=!0;var S=a(17),C=a.n(S),E=a(18),O=a.n(E),B=a(8),m=a.n(B),y=a(19),x=a.n(y),v=a(20),I=a.n(v),K=a(69),Q=a.n(K),rt=a(25),ot=a.n(rt),st=a(21),V=a.n(st),lt=a(24),$=a.n(lt),ut=a(38),q=a.n(ut),dt=a(22),it=a.n(dt),ft=a(88),ht=a.n(ft),ct=a(6),gt=a.n(ct),mt=a(103),vt=a.n(mt),pt=a(7),Mt=a.n(pt),yt=a(80),Y=a(109),at=a(125),It=a(30),Nt=a.n(It),xt=a(101),Dt=a.n(xt),wt=a(102),Tt=a.n(wt),Ct=void 0;function nt(t,i){var n=C()(t);if(O.a){var r=O()(t);i&&(r=m()(r).call(r,function(f){return x()(t,f).enumerable})),n.push.apply(n,r)}return n}function _(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?nt(Object(n),!0).forEach(function(r){ot()(t,r,n[r])}):I.a?Object.defineProperties(t,I()(n)):nt(Object(n)).forEach(function(r){Object.defineProperty(t,r,x()(n,r))})}return t}var G={length:[{key:"\u7C73",value:"m",type:"length"},{key:"\u516C\u91CC",value:"km",type:"length"},{key:"\u6D77\u91CC",value:"mile",type:"length"},{key:"\u4E08",value:"zhang",type:"length"}],area:[{key:"\u5E73\u65B9\u7C73",value:"m",type:"area"},{key:"\u5E73\u65B9\u516C\u91CC",value:"km",type:"area"},{key:"\u4EA9",value:"mu",type:"area"},{key:"\u516C\u9877",value:"ha",type:"area"}]},w,F,tt,jt={name:"ShMapMeasure3d",components:{GeneralContainer:Nt.a,GeneralBar:Tt.a},directives:{dialogDrag:Dt.a},mixins:[gt.a,vt.a,Mt.a],props:{panelCardProps:{type:Object,default:function(){o()(this,Ct)}.bind(void 0)}},data:function(){return{defaultLayerName:"tempMeasureLayer",titleStr:"\u56FE\u4E0A\u91CF\u6D4B",header:!1,measure_record:[],toolOptions:[{key:"spatialDis",img:"spatial-dis",name:"\u7A7A\u95F4\u8DDD\u79BB"},{key:"ctgDis",img:"clamp-ground-dis",name:"\u8D34\u5730\u8DDD\u79BB"},{key:"measureArea",img:"measure-area",name:"\u9762\u79EF\u6D4B\u91CF"},{key:"measureAngle",img:"measure-angle",name:"\u65B9\u4F4D\u6D4B\u91CF"},{key:"measureHeight",img:"measure-height",name:"\u9AD8\u5EA6\u6D4B\u91CF"},{key:"superHeight",img:"super-height",name:"\u4E09\u89D2\u6D4B\u91CF"},{key:"measurePoint",img:"measure-point",name:"\u5750\u6807\u6D4B\u91CF"}],activeIndex:[],unitText:"\u7C73",unitDisable:!0,unitType:"length",formInfo:{data:{text:"",value:null},unit:"",units:[{key:"\u7C73",value:"m"},{key:"\u516C\u91CC",value:"km"},{key:"\u6D77\u91CC",value:"mile"},{key:"\u4E08",value:"zhang"}],fieldList:{}},show_charts_mm:!1}},computed:{shouldShow:function(){return this.currentView==="earth"},cardStyleConfig:function(){return _(_({},this.typeConfig),this.styleConfig)},panelStyleConfig:function(){var i;return(i=this.panelCardProps)===null||i===void 0?void 0:i.styleConfig},panelPosition:function(){var i;return((i=this.panelCardProps)===null||i===void 0?void 0:i.position)||{type:"absolute",top:"100px",left:"35px"}},panelImgSrc:function(){var i;return(i=this.panelCardProps)===null||i===void 0?void 0:i.imgSrc}},watch:{currentInteraction:function(i){if(i!==this.$options.name&&i!==""){var n;(n=w)===null||n===void 0||n.clearMeasureById(0)}}},mounted:function(){var i=this;this.$earth&&(setTimeout(function(){o()(this,i),this.begin()}.bind(this),0),this.activeIndex=[])},methods:{onChangeIsShow:function(i){this.$emit("change:isShow",i)},changeCard:function(i){i||(this.remove(),this.closeEchartsView())},begin:function(){var i;i=this.$earth.viewer,this.initMeasure(i,{name:this.defaultLayerName})},initMeasure:function(i,n){var r=this;w=w||new yt.Measure(_({viewer:i},n)),this.$emit("inited",w);var f=w.draw();f.on("change:active",function(d){if(o()(this,r),d.active){var h;!V()(h=this.activeIndex).call(h,d.drawtype)&&this.activeIndex.push(d.drawtype)}else this.activeIndex=[];this.$emit("change:active",d.active)}.bind(this));var c=this;f.startEditing=function(h){this.stopEditing(),!(h===void 0||!this._hasEdit)&&(h.editing&&h.editing.activate&&h.editing.activate(),this.currEditFeature=h,F=h,c.setUnits(h))},f.stopEditing=function(){this.currEditFeature&&this.currEditFeature.editing&&this.currEditFeature.editing.disable&&this.currEditFeature.editing.disable(),this.currEditFeature=null,F=null},f.on("delete-feature",function(d){var h=this,p,D,T;o()(this,r);var N=f.dataSource.entities,M=w.getAuxiliaryEnities(d);M.forEach(function(z){o()(this,h),N.remove(z)}.bind(this));var L=$()(p=this.measure_record).call(p,function(z){return o()(this,h),z.id===d._id}.bind(this));L&&V()(D=L.measureValue).call(D,this.formInfo.data.text)&&(this.formInfo.data.text=null);var U=q()(T=this.measure_record).call(T,function(z){return o()(this,h),z.id===d._id}.bind(this));if(U>-1){var k;it()(k=this.measure_record).call(k,U,1)}}.bind(this))},activate:function(i){var n,r=this,f,c=this;this.$refs.container.changeShow(!0);var d,h=$()(n=this.toolOptions).call(n,function(T){return o()(this,r),T.key===i}.bind(this)).name,p={unit:"\u516C\u91CC",terrain:!1,isSuper:!1,calback:function(){o()(this,r)}.bind(this),calbackresult:function(N,M){var L,U=this;o()(this,r),d==="length"&&(h=M.attribute.style.clampToGround?"\u8D34\u5730\u8DDD\u79BB":"\u7A7A\u95F4\u8DDD\u79BB"),V()(d).call(d,"oint")&&(N=N.replace("<label>\u6D77\u62D4</label>",""));var k=M._totalLable&&M._totalLable.attribute.value;this.formInfo.data.value=k,M.distanceStr=N;var z,H,J=this.splitNumberAndUnit(N),X=Q()(J,2);z=X[0],H=X[1],this.unitText=H,this.formInfo.data.text=z;var A=M.id,P=q()(L=this.measure_record).call(L,function(et){return o()(this,U),et.id===A}.bind(this)),W=M._totalLable&&M._totalLable.attribute.value;P>-1?(this.measure_record[P].measureType=h,this.measure_record[P].measureValue=N,this.measure_record[P].value=W):this.measure_record.unshift({measureType:h,measureValue:N,value:W,id:A}),d=d.replace("measure",""),d=d.toLowerCase(),d==="height"&&(d=p.isSuper?"super_height":"height"),M.unitType=d,this.setUnits(M)}.bind(this)};switch(this.unitDisable=!0,d=i,p.terrain=!0,i){case"spatialDis":{d="measureLength",p.addHeight=1,p.terrain=!1;break}case"ctgDis":{d="measureLength",p.terrain=!0;break}case"superHeight":{d="measureHeight",p.isSuper=!0;break}case"measureSection":{h="\u5256\u9762\u8DDD\u79BB",d="measureSection",p.calback=function(N){N.arrHB&&N.arrHB.length&&c.setEchartsData(N)};break}case"measurePoint":{this.unitDisable=!1;break}case"measureAngle":this.unitDisable=!1}this.formInfo.units=i==="measureArea"?G.area:G.length;var D=$()(f=this.formInfo.units).call(f,function(T){return o()(this,r),T.value===this.formInfo.unit}.bind(this));this.unitText=D?D.key:this.formInfo.units[0].key,D=D?D.value:this.formInfo.units[0].value,p.unit=D,tt={msType:d,options:p},w[d](p)},select:function(i){var n,r=this,f=$()(n=this.toolOptions).call(n,function(c){return o()(this,r),c.key===i}.bind(this)).name;this.titleStr="\u56FE\u4E0A\u91CF\u6D4B:"+f,this.imgSrc=f,this.formInfo.data.text="",this.activate(i)},unselect:function(){this.activeIndex=[],this.deactivate()},remove:function(){w.clearMeasure(),this.formInfo.data.text="",this.measure_record=[],this.closeEchartsView()},handleEvent:function(i,n){var r=this;if(i==="deleteMea"){var f,c,d,h=n.id,p=V()(f=n.measureValue).call(f,this.formInfo.data.text);p&&(this.formInfo.data.text=null);var D=q()(c=this.measure_record).call(c,function(T){return o()(this,r),T.id===h}.bind(this));it()(d=this.measure_record).call(d,D,1),w.clearMeasureById(h);return}this.changeUnit(i)},changeUnit:function(i){var n=this;this.formInfo.unit=i[0];var r=i[1];this.unitText=i[2],i=i[0];var f=w.draw(),c=f.drawCtrl.polyline,d=f.drawCtrl.polygon;if(tt&&(c._enabled||d._enabled)){var h=tt,p=h.msType,D=h.options;D.unit=i,w[p](D)}if(w.updateUnit(r,i),F){var T=F,N=T._totalLable.attribute.value,M,L,U;if(r==="area"){M=Object(Y.formatArea)(N,i);var k=this.splitNumberAndUnit(M),z=Q()(k,2);L=z[0],U=z[1]}else{M=Object(Y.formatLength)(N,i);var H=this.splitNumberAndUnit(M),J=Q()(H,2);L=J[0],U=J[1]}this.formInfo.data.text=L,this.unitText=U}var X=this.measure_record;X.forEach(function(A){var P;if(o()(this,n),V()(P=A.measureType).call(P,"\u8DDD\u79BB")&&r==="length"){var W=A.value;A.measureValue=Object(Y.formatLength)(W,i)}else if(A.measureType==="\u9762\u79EF\u6D4B\u91CF"&&r==="area"){var et=A.value;A.measureValue=Object(Y.formatArea)(et,i)}}.bind(this))},setEchartsData:function(i){this.show_charts_mm=!0,this.myChart==null&&(this.myChart=at.init(this.$refs.echartsView_mm,"dark"));var n=i.arrPoint,r={backgroundColor:"rgba(0, 0, 0, 0.7)",grid:{left:10,right:10,bottom:10,containLabel:!0},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",formatter:function(c){var d="";if(c.length===0)return d;var h=n[c[0].dataIndex];return c[0].axisValue=Number(c[0].axisValue),c[0].value=Number(c[0].value),d+="\u6240\u5728\u4F4D\u7F6E&nbsp;"+h.x+","+h.y+"<br />\u8DDD\u8D77\u70B9&nbsp;<label>"+Object(Y.formatLength)(c[0].axisValue)+"</label><br />"+c[0].seriesName+"&nbsp;<label style='color:"+c[0].color+";'>"+Object(Y.formatLength)(c[0].value)+"</label><br />",d}},xAxis:[{name:"\u884C\u7A0B",type:"category",boundaryGap:!1,axisLine:{show:!1},axisLabel:{show:!1},data:i.arrLen}],yAxis:[{type:"value",axisLabel:{rotate:60,formatter:"{value} \u7C73"}}],series:[{name:"\u9AD8\u7A0B\u503C",type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(255, 70, 131)"}},areaStyle:{normal:{color:new at.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}},data:i.arrHB}]};this.myChart.setOption(r)},closeEchartsView:function(){this.myChart&&this.myChart.dispose(),this.myChart=void 0,this.show_charts_mm=!1},closeMeasure:function(){this.$refs.container.changeShow(!1),this.remove()},deactivate:function(){var i=w.draw();i.stopDraw()},setUnits:function(i){if(i){var n=this.splitNumberAndUnit(i.distanceStr),r=Q()(n,2),f=r[0],c=r[1];this.formInfo.data.text=f,this.unitText=c,this.formInfo.data.value=i._totalLable&&i._totalLable.attribute.value,this.unitDisable=!0,this.formInfo.units=i.attribute.type==="polygon"?G.area:G.length,(i.attribute.type==="point"||i.unitType==="angle")&&(this.unitDisable=!1)}},splitNumberAndUnit:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"12.65\u516C\u91CC",n,r;return n=ht()(i).call(i,/[\u4e00-\u9fa5]/g,""),r=i.replace(n,""),[n,r]}}},zt=jt,bt=a(2),St=Object(bt.a)(zt,g,b,!1,null,null,null),Et=St.exports,Ot=a(28),Lt=a.n(Ot),At=void 0,R=Lt()(Et,{transform:function(i){o()(this,At);var n=i.show,r=i.label,f=i.position;return{isShow:n,title:r,position:f}}.bind(void 0)});R.install=function(t){t.component(R.name,R)};var Ut=s.default=R},8:function(e,s){e.exports=l(22466)},80:function(e,s){e.exports=l(325074)},88:function(e,s){e.exports=l(143939)}})},691:function(Z,j,l){"use strict";var e=l(419534);Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var s=e(l(342579)),a={inserted:function(g){var b=this,S=g.querySelector(".fold"),C=g;S.style.cursor="move",S.onmousedown=function(E){var O=this;(0,s.default)(this,b),E.stopPropagation();var B=E.clientX-C.offsetLeft,m=E.clientY-C.offsetTop;document.onmousemove=function(y){(0,s.default)(this,O);var x=y.clientX-B,v=y.clientY-m;g.style.left=x+"px",g.style.top=v+"px"}.bind(this),document.onmouseup=function(){(0,s.default)(this,O),document.onmousemove=null,document.onmouseup=null}.bind(this)}.bind(this)}},u=a;j.default=u},242709:function(Z,j,l){"use strict";var e=l(148836);const s={data(){return this.map=null,this.timer="",{isEditor:window.location.href.indexOf("editor.html")>0}},inject:{reactiveViewMode:{default:function(){return()=>"23D"}}},computed:{viewMode(){return this.isSetMap_common?this.$_viewMode:this.reactiveViewMode()}},mounted(){!this.widgetInfo.parentId&&this.isEditor&&this.widgetInfo.action.gisMapId&&this.$nextTick(function(){this.updateWidgetParentId({widgetId:this.widgetInfo.id,parentId:this.widgetInfo.action.gisMapId,keepPosition:!0})})},methods:{...(0,e.nv)(["updateWidgetParentId"]),getBindMap(){typeof this.widgetInfo.action.gisMapId<"u"}}};j.Z=s},476010:function(Z,j){"use strict";const l={data(){return{isSpecial:!1,isEditor:window.location.href.indexOf("editor.html")>0}},computed:{isBindToPage(){return this.widgetInfo.config.styleConfig.dragEnable||this.isSpecial},position(){return this.isEditor||!this.isBindToPage?{type:"absolute",top:"0px",left:"0px",bottom:"unset",right:"unset",zIndex:this.widgetInfo.attr.z}:{type:"absolute",top:this.widgetInfo.attr.y+"px",left:this.widgetInfo.attr.x+"px",zIndex:this.widgetInfo.attr.z}},styleConfig(){return{isShowBtn:this.widgetInfo.config.styleConfig.isShowBtn,isStartFix:this.isEditor,titleBar:{miniBtn:!0,maxBtn:!1,closeBtn:!1,fixBtn:!this.isEditor,title:!0},autoVisible:!1,btnSize:{size:this.widgetInfo.config.styleConfig.btnSize.size+"px",padding:this.widgetInfo.config.styleConfig.btnSize.padding+"px",radius:this.widgetInfo.config.styleConfig.btnSize.radius+"px"},size:{radius:this.widgetInfo.config.styleConfig.size.radius+"px",width:this.widgetInfo.attr.w>150?this.widgetInfo.attr.w+"px":"275px",height:this.widgetInfo.attr.hh>100?this.widgetInfo.attr.hh+"px":"80vh"},toolBtnSize:{size:this.widgetInfo.config.styleConfig.toolBtnSize.size+"px",margin:(this.widgetInfo.config.styleConfig.btnSize.size-this.widgetInfo.config.styleConfig.toolBtnSize.size)/2+"px"}}},themeConfig(){let e=this.widgetInfo.config.themeStyle.light;return{light:{title:{backgroundImage:"url('"+e.title.backgroundImage+"')",backgroundColor:e.title.backgroundColor?e.title.backgroundColor:e.floatButton.fillcolor,backgroundSize:e.title.backgroundSize,fontSize:e.title.fontSize+"px",color:e.title.fontColor},primaryFont:{fontSize:e.primaryFont.fontSize+"px",fontColor:e.primaryFont.fontColor},toolButton:{color:e.toolButton.color},panel:{backgroundImage:"url('"+e.panel.backgroundImage+"')",backgroundColor:e.panel.fillcolor,backgroundSize:e.panel.backgroundSize,border:e.panel.border},floatButton:{backgroundColor:e.floatButton.fillcolor,shadowColor:e.floatButton.shadowColor,border:e.floatButton.border}}}}},methods:{bindToPage(e){e&&this.isBindToPage&&(e.parentElement.remove(e),document.getElementById("page_"+this.widgetInfo.pageId).append(e),e.style.pointerEvents="auto",document.getElementById("container_child_"+this.widgetInfo.id).remove())}}};j.Z=l},277913:function(Z,j,l){"use strict";l.r(j),l.d(j,{default:function(){return y}});var e=function(){var v=this,I=v._self._c;return I("div",{directives:[{name:"show",rawName:"v-show",value:v.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],ref:"content",style:{width:v.widgetInfo.attr.w+"px",height:v.widgetInfo.attr.hh+"px"}},[v.viewMode!=="2D"?I("MapMeasure3d",{ref:"mapMeasure3d",attrs:{position:v.position,"is-show":!0,"theme-style":v.themeConfig,"style-config":v.styleConfig,"drag-enable":v.widgetInfo.config.styleConfig.dragEnable}}):v._e()],1)},s=[],a=l(81362),u=l.n(a),o=l(386892),g=l(476010),b=l(445061),S=l(126711),C=l(242709),E={name:"GisMapMeasure3d",components:{MapMeasure3d:u()},mixins:[o.D,g.Z,b.u,S.H,C.Z],props:["widgetInfo"],data(){return{timer:"",mapAction:this.widgetInfo.action,btnAttr:this.widgetInfo.attr}},mounted(){this.viewMode==="2D"&&this.$message("\u7EAF\u4E8C\u7EF4\u6A21\u5F0F\u65E0\u6CD5\u52A0\u8F7D'\u4E09\u7EF4\u91CF\u6D4B'\u7EC4\u4EF6"),this.isSpecial=!0,this.isEditor||this.$nextTick(()=>{let x=this.$refs.mapMeasure3d.$el;this.bindToPage(x)}),this.initAction(this.widgetInfo)},methods:{reLoadInfo(x){this.btnAttr=x.attr},initAction(x){this.registerAction(x,"configMap","mapList",this.doConfigMap),this.actionReceive(x)}}},O=E,B=l(768141),m=(0,B.Z)(O,e,s,!1,null,null,null),y=m.exports}}]);
