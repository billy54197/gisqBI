(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[61474],{542324:function(W){var S;(function(f,y){W.exports=y()})(this,function(){function f(o){this.mode=C.MODE_8BIT_BYTE,this.data=o,this.parsedData=[];for(var s=0,n=this.data.length;s<n;s++){var a=[],r=this.data.charCodeAt(s);r>65536?(a[0]=240|(r&1835008)>>>18,a[1]=128|(r&258048)>>>12,a[2]=128|(r&4032)>>>6,a[3]=128|r&63):r>2048?(a[0]=224|(r&61440)>>>12,a[1]=128|(r&4032)>>>6,a[2]=128|r&63):r>128?(a[0]=192|(r&1984)>>>6,a[1]=128|r&63):a[0]=r,this.parsedData.push(a)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}f.prototype={getLength:function(o){return this.parsedData.length},write:function(o){for(var s=0,n=this.parsedData.length;s<n;s++)o.put(this.parsedData[s],8)}};function y(o,s){this.typeNumber=o,this.errorCorrectLevel=s,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}y.prototype={addData:function(o){var s=new f(o);this.dataList.push(s),this.dataCache=null},isDark:function(o,s){if(o<0||this.moduleCount<=o||s<0||this.moduleCount<=s)throw new Error(o+","+s);return this.modules[o][s]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(o,s){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[n][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(o,s),this.typeNumber>=7&&this.setupTypeNumber(o),this.dataCache==null&&(this.dataCache=y.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,s)},setupPositionProbePattern:function(o,s){for(var n=-1;n<=7;n++)if(!(o+n<=-1||this.moduleCount<=o+n))for(var a=-1;a<=7;a++)s+a<=-1||this.moduleCount<=s+a||(0<=n&&n<=6&&(a==0||a==6)||0<=a&&a<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=a&&a<=4?this.modules[o+n][s+a]=!0:this.modules[o+n][s+a]=!1)},getBestMaskPattern:function(){for(var o=0,s=0,n=0;n<8;n++){this.makeImpl(!0,n);var a=_.getLostPoint(this);(n==0||o>a)&&(o=a,s=n)}return s},createMovieClip:function(o,s,n){var a=o.createEmptyMovieClip(s,n),r=1;this.make();for(var g=0;g<this.modules.length;g++)for(var h=g*r,d=0;d<this.modules[g].length;d++){var u=d*r,b=this.modules[g][d];b&&(a.beginFill(0,100),a.moveTo(u,h),a.lineTo(u+r,h),a.lineTo(u+r,h+r),a.lineTo(u,h+r),a.endFill())}return a},setupTimingPattern:function(){for(var o=8;o<this.moduleCount-8;o++)this.modules[o][6]==null&&(this.modules[o][6]=o%2==0);for(var s=8;s<this.moduleCount-8;s++)this.modules[6][s]==null&&(this.modules[6][s]=s%2==0)},setupPositionAdjustPattern:function(){for(var o=_.getPatternPosition(this.typeNumber),s=0;s<o.length;s++)for(var n=0;n<o.length;n++){var a=o[s],r=o[n];if(this.modules[a][r]==null)for(var g=-2;g<=2;g++)for(var h=-2;h<=2;h++)g==-2||g==2||h==-2||h==2||g==0&&h==0?this.modules[a+g][r+h]=!0:this.modules[a+g][r+h]=!1}},setupTypeNumber:function(o){for(var s=_.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var a=!o&&(s>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a}for(var n=0;n<18;n++){var a=!o&&(s>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},setupTypeInfo:function(o,s){for(var n=this.errorCorrectLevel<<3|s,a=_.getBCHTypeInfo(n),r=0;r<15;r++){var g=!o&&(a>>r&1)==1;r<6?this.modules[r][8]=g:r<8?this.modules[r+1][8]=g:this.modules[this.moduleCount-15+r][8]=g}for(var r=0;r<15;r++){var g=!o&&(a>>r&1)==1;r<8?this.modules[8][this.moduleCount-r-1]=g:r<9?this.modules[8][15-r-1+1]=g:this.modules[8][15-r-1]=g}this.modules[this.moduleCount-8][8]=!o},mapData:function(o,s){for(var n=-1,a=this.moduleCount-1,r=7,g=0,h=this.moduleCount-1;h>0;h-=2)for(h==6&&h--;;){for(var d=0;d<2;d++)if(this.modules[a][h-d]==null){var u=!1;g<o.length&&(u=(o[g]>>>r&1)==1);var b=_.getMask(s,a,h-d);b&&(u=!u),this.modules[a][h-d]=u,r--,r==-1&&(g++,r=7)}if(a+=n,a<0||this.moduleCount<=a){a-=n,n=-n;break}}}},y.PAD0=236,y.PAD1=17,y.createData=function(o,s,n){for(var a=B.getRSBlocks(o,s),r=new v,g=0;g<n.length;g++){var h=n[g];r.put(h.mode,4),r.put(h.getLength(),_.getLengthInBits(h.mode,o)),h.write(r)}for(var d=0,g=0;g<a.length;g++)d+=a[g].dataCount;if(r.getLengthInBits()>d*8)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+d*8+")");for(r.getLengthInBits()+4<=d*8&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=d*8||(r.put(y.PAD0,8),r.getLengthInBits()>=d*8));)r.put(y.PAD1,8);return y.createBytes(r,a)},y.createBytes=function(o,s){for(var n=0,a=0,r=0,g=new Array(s.length),h=new Array(s.length),d=0;d<s.length;d++){var u=s[d].dataCount,b=s[d].totalCount-u;a=Math.max(a,u),r=Math.max(r,b),g[d]=new Array(u);for(var m=0;m<g[d].length;m++)g[d][m]=255&o.buffer[m+n];n+=u;var M=_.getErrorCorrectPolynomial(b),N=new $(g[d],M.getLength()-1),R=N.mod(M);h[d]=new Array(M.getLength()-1);for(var m=0;m<h[d].length;m++){var k=m+R.getLength()-h[d].length;h[d][m]=k>=0?R.get(k):0}}for(var D=0,m=0;m<s.length;m++)D+=s[m].totalCount;for(var K=new Array(D),V=0,m=0;m<a;m++)for(var d=0;d<s.length;d++)m<g[d].length&&(K[V++]=g[d][m]);for(var m=0;m<r;m++)for(var d=0;d<s.length;d++)m<h[d].length&&(K[V++]=h[d][m]);return K};for(var C={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},x={L:1,M:0,Q:3,H:2},p={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},_={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(o){for(var s=o<<10;_.getBCHDigit(s)-_.getBCHDigit(_.G15)>=0;)s^=_.G15<<_.getBCHDigit(s)-_.getBCHDigit(_.G15);return(o<<10|s)^_.G15_MASK},getBCHTypeNumber:function(o){for(var s=o<<12;_.getBCHDigit(s)-_.getBCHDigit(_.G18)>=0;)s^=_.G18<<_.getBCHDigit(s)-_.getBCHDigit(_.G18);return o<<12|s},getBCHDigit:function(o){for(var s=0;o!=0;)s++,o>>>=1;return s},getPatternPosition:function(o){return _.PATTERN_POSITION_TABLE[o-1]},getMask:function(o,s,n){switch(o){case p.PATTERN000:return(s+n)%2==0;case p.PATTERN001:return s%2==0;case p.PATTERN010:return n%3==0;case p.PATTERN011:return(s+n)%3==0;case p.PATTERN100:return(Math.floor(s/2)+Math.floor(n/3))%2==0;case p.PATTERN101:return s*n%2+s*n%3==0;case p.PATTERN110:return(s*n%2+s*n%3)%2==0;case p.PATTERN111:return(s*n%3+(s+n)%2)%2==0;default:throw new Error("bad maskPattern:"+o)}},getErrorCorrectPolynomial:function(o){for(var s=new $([1],0),n=0;n<o;n++)s=s.multiply(new $([1,I.gexp(n)],0));return s},getLengthInBits:function(o,s){if(1<=s&&s<10)switch(o){case C.MODE_NUMBER:return 10;case C.MODE_ALPHA_NUM:return 9;case C.MODE_8BIT_BYTE:return 8;case C.MODE_KANJI:return 8;default:throw new Error("mode:"+o)}else if(s<27)switch(o){case C.MODE_NUMBER:return 12;case C.MODE_ALPHA_NUM:return 11;case C.MODE_8BIT_BYTE:return 16;case C.MODE_KANJI:return 10;default:throw new Error("mode:"+o)}else if(s<41)switch(o){case C.MODE_NUMBER:return 14;case C.MODE_ALPHA_NUM:return 13;case C.MODE_8BIT_BYTE:return 16;case C.MODE_KANJI:return 12;default:throw new Error("mode:"+o)}else throw new Error("type:"+s)},getLostPoint:function(o){for(var s=o.getModuleCount(),n=0,a=0;a<s;a++)for(var r=0;r<s;r++){for(var g=0,h=o.isDark(a,r),d=-1;d<=1;d++)if(!(a+d<0||s<=a+d))for(var u=-1;u<=1;u++)r+u<0||s<=r+u||d==0&&u==0||h==o.isDark(a+d,r+u)&&g++;g>5&&(n+=3+g-5)}for(var a=0;a<s-1;a++)for(var r=0;r<s-1;r++){var b=0;o.isDark(a,r)&&b++,o.isDark(a+1,r)&&b++,o.isDark(a,r+1)&&b++,o.isDark(a+1,r+1)&&b++,(b==0||b==4)&&(n+=3)}for(var a=0;a<s;a++)for(var r=0;r<s-6;r++)o.isDark(a,r)&&!o.isDark(a,r+1)&&o.isDark(a,r+2)&&o.isDark(a,r+3)&&o.isDark(a,r+4)&&!o.isDark(a,r+5)&&o.isDark(a,r+6)&&(n+=40);for(var r=0;r<s;r++)for(var a=0;a<s-6;a++)o.isDark(a,r)&&!o.isDark(a+1,r)&&o.isDark(a+2,r)&&o.isDark(a+3,r)&&o.isDark(a+4,r)&&!o.isDark(a+5,r)&&o.isDark(a+6,r)&&(n+=40);for(var m=0,r=0;r<s;r++)for(var a=0;a<s;a++)o.isDark(a,r)&&m++;var M=Math.abs(100*m/s/s-50)/5;return n+=M*10,n}},I={glog:function(o){if(o<1)throw new Error("glog("+o+")");return I.LOG_TABLE[o]},gexp:function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return I.EXP_TABLE[o]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},L=0;L<8;L++)I.EXP_TABLE[L]=1<<L;for(var L=8;L<256;L++)I.EXP_TABLE[L]=I.EXP_TABLE[L-4]^I.EXP_TABLE[L-5]^I.EXP_TABLE[L-6]^I.EXP_TABLE[L-8];for(var L=0;L<255;L++)I.LOG_TABLE[I.EXP_TABLE[L]]=L;function $(o,s){if(o.length==null)throw new Error(o.length+"/"+s);for(var n=0;n<o.length&&o[n]==0;)n++;this.num=new Array(o.length-n+s);for(var a=0;a<o.length-n;a++)this.num[a]=o[a+n]}$.prototype={get:function(o){return this.num[o]},getLength:function(){return this.num.length},multiply:function(o){for(var s=new Array(this.getLength()+o.getLength()-1),n=0;n<this.getLength();n++)for(var a=0;a<o.getLength();a++)s[n+a]^=I.gexp(I.glog(this.get(n))+I.glog(o.get(a)));return new $(s,0)},mod:function(o){if(this.getLength()-o.getLength()<0)return this;for(var s=I.glog(this.get(0))-I.glog(o.get(0)),n=new Array(this.getLength()),a=0;a<this.getLength();a++)n[a]=this.get(a);for(var a=0;a<o.getLength();a++)n[a]^=I.gexp(I.glog(o.get(a))+s);return new $(n,0).mod(o)}};function B(o,s){this.totalCount=o,this.dataCount=s}B.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],B.getRSBlocks=function(o,s){var n=B.getRsBlockTable(o,s);if(n==null)throw new Error("bad rs block @ typeNumber:"+o+"/errorCorrectLevel:"+s);for(var a=n.length/3,r=[],g=0;g<a;g++)for(var h=n[g*3+0],d=n[g*3+1],u=n[g*3+2],b=0;b<h;b++)r.push(new B(d,u));return r},B.getRsBlockTable=function(o,s){switch(s){case x.L:return B.RS_BLOCK_TABLE[(o-1)*4+0];case x.M:return B.RS_BLOCK_TABLE[(o-1)*4+1];case x.Q:return B.RS_BLOCK_TABLE[(o-1)*4+2];case x.H:return B.RS_BLOCK_TABLE[(o-1)*4+3];default:return}};function v(){this.buffer=[],this.length=0}v.prototype={get:function(o){var s=Math.floor(o/8);return(this.buffer[s]>>>7-o%8&1)==1},put:function(o,s){for(var n=0;n<s;n++)this.putBit((o>>>s-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(o){var s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),o&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var A=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function O(){return typeof CanvasRenderingContext2D<"u"}function z(){var o=!1,s=navigator.userAgent;if(/android/i.test(s)){o=!0;var n=s.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(o=parseFloat(n[1]))}return o}var E=function(){var o=function(s,n){this._el=s,this._htOption=n};return o.prototype.draw=function(s){var n=this._htOption,a=this._el,r=s.getModuleCount(),g=Math.floor(n.width/r),h=Math.floor(n.height/r);this.clear();function d(N,R){var k=document.createElementNS("http://www.w3.org/2000/svg",N);for(var D in R)R.hasOwnProperty(D)&&k.setAttribute(D,R[D]);return k}var u=d("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:n.colorLight});u.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),a.appendChild(u),u.appendChild(d("rect",{fill:n.colorLight,width:"100%",height:"100%"})),u.appendChild(d("rect",{fill:n.colorDark,width:"1",height:"1",id:"template"}));for(var b=0;b<r;b++)for(var m=0;m<r;m++)if(s.isDark(b,m)){var M=d("use",{x:String(m),y:String(b)});M.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),u.appendChild(M)}},o.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},o}(),Q=document.documentElement.tagName.toLowerCase()==="svg",Z=Q?E:O()?function(){function o(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var s=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(g,h,d,u,b,m,M,N,R){if("nodeName"in g&&/img/i.test(g.nodeName))for(var k=arguments.length-1;k>=1;k--)arguments[k]=arguments[k]*s;else typeof N>"u"&&(arguments[1]*=s,arguments[2]*=s,arguments[3]*=s,arguments[4]*=s);n.apply(this,arguments)}}function a(g,h){var d=this;if(d._fFail=h,d._fSuccess=g,d._bSupportDataURI===null){var u=document.createElement("img"),b=function(){d._bSupportDataURI=!1,d._fFail&&d._fFail.call(d)},m=function(){d._bSupportDataURI=!0,d._fSuccess&&d._fSuccess.call(d)};u.onabort=b,u.onerror=b,u.onload=m,u.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";return}else d._bSupportDataURI===!0&&d._fSuccess?d._fSuccess.call(d):d._bSupportDataURI===!1&&d._fFail&&d._fFail.call(d)}var r=function(g,h){this._bIsPainted=!1,this._android=z(),this._htOption=h,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=h.width,this._elCanvas.height=h.height,g.appendChild(this._elCanvas),this._el=g,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return r.prototype.draw=function(g){var h=this._elImage,d=this._oContext,u=this._htOption,b=g.getModuleCount(),m=u.width/b,M=u.height/b,N=Math.round(m),R=Math.round(M);h.style.display="none",this.clear();for(var k=0;k<b;k++)for(var D=0;D<b;D++){var K=g.isDark(k,D),V=D*m,X=k*M;d.strokeStyle=K?u.colorDark:u.colorLight,d.lineWidth=1,d.fillStyle=K?u.colorDark:u.colorLight,d.fillRect(V,X,m,M),d.strokeRect(Math.floor(V)+.5,Math.floor(X)+.5,N,R),d.strokeRect(Math.ceil(V)-.5,Math.ceil(X)-.5,N,R)}this._bIsPainted=!0},r.prototype.makeImage=function(){this._bIsPainted&&a.call(this,o)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(g){return g&&Math.floor(g*1e3)/1e3},r}():function(){var o=function(s,n){this._el=s,this._htOption=n};return o.prototype.draw=function(s){for(var n=this._htOption,a=this._el,r=s.getModuleCount(),g=Math.floor(n.width/r),h=Math.floor(n.height/r),d=['<table style="border:0;border-collapse:collapse;">'],u=0;u<r;u++){d.push("<tr>");for(var b=0;b<r;b++)d.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+g+"px;height:"+h+"px;background-color:"+(s.isDark(u,b)?n.colorDark:n.colorLight)+';"></td>');d.push("</tr>")}d.push("</table>"),a.innerHTML=d.join("");var m=a.childNodes[0],M=(n.width-m.offsetWidth)/2,N=(n.height-m.offsetHeight)/2;M>0&&N>0&&(m.style.margin=N+"px "+M+"px")},o.prototype.clear=function(){this._el.innerHTML=""},o}();function J(o,s){for(var n=1,a=Y(o),r=0,g=A.length;r<=g;r++){var h=0;switch(s){case x.L:h=A[r][0];break;case x.M:h=A[r][1];break;case x.Q:h=A[r][2];break;case x.H:h=A[r][3];break}if(a<=h)break;n++}if(n>A.length)throw new Error("Too long data");return n}function Y(o){var s=encodeURI(o).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return s.length+(s.length!=o?3:0)}return S=function(o,s){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:x.H},typeof s=="string"&&(s={text:s}),s)for(var n in s)this._htOption[n]=s[n];typeof o=="string"&&(o=document.getElementById(o)),this._htOption.useSVG&&(Z=E),this._android=z(),this._el=o,this._oQRCode=null,this._oDrawing=new Z(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},S.prototype.makeCode=function(o){this._oQRCode=new y(J(o,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(o),this._oQRCode.make(),this._el.title=o,this._oDrawing.draw(this._oQRCode),this.makeImage()},S.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},S.prototype.clear=function(){this._oDrawing.clear()},S.CorrectLevel=x,S})},727377:function(W,S,f){"use strict";f.d(S,{y:function(){return _}});var y=f(231954),C=f(555616),x=f.n(C),p=f(935051);let _={getClientInfo(){return(0,p.getRequest)("/public/getClientInfo")},getCodeValuePropertysByKeys(I){return(0,p.postRequest)("/public/thirdparty/platform/getCodeValuePropertysByKeys",I)},sendMobileCode(I){return y.Z.baseConfig.isPlatform?(0,p.getRequest)("/public/thirdparty/platform/sendMobileCode/"+I):(C.Message.error({message:"\u672A\u4E0E\u7535\u5B50\u653F\u52A1\u5E73\u53F0\u96C6\u6210\u4F7F\u7528\uFF0C\u65E0\u6CD5\u83B7\u53D6\u77ED\u4FE1\u9A8C\u8BC1\u7801",offset:60}),(0,p.getRequest)(""))},sendMobileCodeByUsername(I){return y.Z.baseConfig.isPlatform?(0,p.getRequest)("/public/thirdparty/platform/sendMobileCodeByUsername/"+encodeURIComponent(I)):(C.Message.error({message:"\u672A\u4E0E\u7535\u5B50\u653F\u52A1\u5E73\u53F0\u96C6\u6210\u4F7F\u7528\uFF0C\u65E0\u6CD5\u83B7\u53D6\u77ED\u4FE1\u9A8C\u8BC1\u7801",offset:60}),(0,p.getRequest)(""))}}},56279:function(W,S,f){"use strict";f.d(S,{P:function(){return x}});var y=f(386892),C=f(149500);const x={mixins:[y.D],created(){},methods:{lifecycleBeforeChartsLoad(p){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&C.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),C.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let I=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[p]);if(I)return I}return p},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&C.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),C.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},833264:function(W,S,f){"use strict";f.d(S,{t:function(){return x}});var y=f(470709),C=f(321300);const x={created(){},methods:{getConfigForPublic(p){return(0,y.M0)("/visual/boardPublish/getConfigForPublic",p)},savePublicWidgetDataApi(p){return(0,y.M0)("/visual/boardPublish/savePublicWidgetData",p)},getAggregateDataEx(p){return(0,y.M0)("/dashboard/editor/getAggregateDataEx",(0,C.enc)(p))},getDataLocalByDatalocalId(p){return(0,y.xV)("/data/local/getDataLocalByDatalocalId/"+p)},getAggregateDataForExcel(p){return(0,y.Fb)("/dashboard/editor/getAggregateDataForExcel",(0,C.enc)(p))}}}},752246:function(W,S,f){"use strict";f.d(S,{X:function(){return y},b:function(){return C}});let y={versions:function(){var x=navigator.userAgent;return{trident:x.indexOf("Trident")>-1,presto:x.indexOf("Presto")>-1,webKit:x.indexOf("AppleWebKit")>-1,gecko:x.indexOf("Gecko")>-1&&x.indexOf("KHTML")==-1,mobile:!!x.match(/AppleWebKit.*Mobile.*/),ios:!!x.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:x.indexOf("Android")>-1,iPhone:x.indexOf("iPhone")>-1,iPad:x.indexOf("iPad")>-1,webApp:x.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},C;y.versions.mobile||y.versions.ios||y.versions.android||y.versions.iPhone||y.versions.iPad?C=!1:C=!0},844513:function(W,S,f){"use strict";f.d(S,{Z:function(){return $}});var y=function(){var v=this,A=v._self._c;return v.attr.buttonHide?A("div",{style:{position:"absolute",right:v.attr.buttonHideRight+"px",top:v.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(O){return v.onHide()}}},[v.openTooltip?A("el-tooltip",{attrs:{"open-delay":1e3,content:v.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[A("el-button",{class:v.attr.buttonHideIconClass&&v.attr.buttonHideIconClass!=""?v.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:v.attr.buttonHideColor,fontSize:v.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):A("el-button",{class:v.attr.buttonHideIconClass&&v.attr.buttonHideIconClass!=""?v.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:v.attr.buttonHideColor,fontSize:v.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):v._e()},C=[],x=f(752246),p={props:["attr"],name:"hide-button",data(){return{isPc:x.b}},computed:{openTooltip:function(){let B=!1,v=this.attr.buttonHideTooltipContent;return x.b&&v&&v!=null&&v.trim()!=""&&(B=!0),B}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},_=p,I=f(768141),L=(0,I.Z)(_,y,C,!1,null,"bf399b9a",null),$=L.exports},261474:function(W,S,f){"use strict";f.r(S),f.d(S,{default:function(){return ie}});var y=function(){var e=this,i=e._self._c;return i("div",{ref:"titleFlip",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px",overflow:"hidden",position:"relative"}},[i("hide-button",{attrs:{attr:e.widgetInfo.attr}}),e.login_type.length>1?i("div",{directives:[{name:"show",rawName:"v-show",value:!e.widgetInfo.config.global.hideTypeBtn,expression:"!widgetInfo.config.global.hideTypeBtn"}],staticClass:"qrcode-button",on:{click:e.changeLoginType}},[i("i",{class:e.qrCodeButtonCls,style:e.typeBtnStyle(e.widgetInfo.config.global)})]):e._e(),i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.login_type[e.login_type_index]=="account",expression:"login_type[login_type_index] == 'account'"}],ref:"form",staticClass:"login-class",style:e.formStyle(e.widgetInfo.config.global),attrs:{size:e.widgetInfo.config.global.size,model:e.account,rules:e.rules},nativeOn:{submit:function(l){l.preventDefault()}}},[i("div",{staticStyle:{color:"#f56c6c","text-align":"center","margin-bottom":"5px","font-weight":"bolder",width:"100%",height:"25px"}},[i("el-tooltip",{attrs:{disabled:!e.message,effect:"light"}},[i("div",{staticStyle:{"max-width":"320px"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.message))]),i("span",{staticClass:"message-span"},[e._v(e._s(e.message))])])],1),e.widgetInfo.config.chinesename.show?i("el-form-item",{staticClass:"chinesename",style:"marginBottom: "+e.mUtils.getNewPxH(22,e.widgetInfo.attr.lockedH)+"px",attrs:{label:e.widgetInfo.config.chinesename.text.show==!0?e.widgetInfo.config.chinesename.text.text:"","label-width":e.getLabelWidth(e.widgetInfo.config.chinesename.text.show,e.widgetInfo.config.chinesename.text.width)}},[i("el-input",{staticClass:"chinesenameInput",attrs:{readonly:e.widgetInfo.config.chinesename.readonly,placeholder:e.widgetInfo.config.chinesename.placeholder},model:{value:e.account.chinesename,callback:function(l){e.$set(e.account,"chinesename",l)},expression:"account.chinesename"}})],1):e._e(),e.widgetInfo.config.username.hide!=!0?i("el-form-item",{staticClass:"username",style:"marginBottom: "+e.mUtils.getNewPxH(22,e.widgetInfo.attr.lockedH)+"px",attrs:{prop:"username",label:e.widgetInfo.config.username.text.show==!0?e.widgetInfo.config.username.text.text:"","label-width":e.getLabelWidth(e.widgetInfo.config.username.text.show,e.widgetInfo.config.username.text.width)}},[i("el-input",{staticClass:"usernameInput",attrs:{placeholder:e.widgetInfo.config.username.placeholder},model:{value:e.account.username,callback:function(l){e.$set(e.account,"username",l)},expression:"account.username"}},[e.widgetInfo.config.username.iconType=="img"?i("img",{style:{width:e.widgetInfo.config.username.imageWidth?e.mUtils.getNewPxW(e.widgetInfo.config.username.imageWidth,e.widgetInfo.attr.lockedW)+"px":e.mUtils.getNewPxW(14,e.widgetInfo.attr.lockedW)+"px",height:e.widgetInfo.config.username.imageHeight?e.mUtils.getNewPxH(e.widgetInfo.config.username.imageHeight,e.widgetInfo.attr.lockedH)+"px":e.mUtils.getNewPxW(14,e.widgetInfo.attr.lockedW)+"px",verticalAlign:"middle"},attrs:{slot:"prefix",src:e.getImageUrl(e.widgetInfo.config.username.image),alt:""},slot:"prefix"}):e._e(),e.widgetInfo.config.username.iconType=="icon"?i("i",{class:e.widgetInfo.config.username.iconClass,style:{backgroundColor:e.widgetInfo.config.username.iconBgColor,color:e.widgetInfo.config.username.iconColor,fontSize:e.mUtils.getNewPxW(e.widgetInfo.config.username.iconSize,e.widgetInfo.attr.lockedW)+"px",verticalAlign:"middle"},attrs:{slot:"prefix"},slot:"prefix"}):e._e()])],1):e._e(),i("el-form-item",{staticClass:"password",style:"marginBottom: "+e.mUtils.getNewPxH(22,e.widgetInfo.attr.lockedH)+"px",attrs:{prop:"password",label:e.widgetInfo.config.password.text.show==!0?e.widgetInfo.config.password.text.text:"","label-width":e.getLabelWidth(e.widgetInfo.config.password.text.show,e.widgetInfo.config.password.text.width)}},[i("el-input",{ref:"inputPassword",staticClass:"passwordInput",attrs:{"show-password":e.showPassword,placeholder:e.widgetInfo.config.password.placeholder},nativeOn:{input:function(l){e.widgetInfo.config.password.forceNoTip&&e.changecc()}},model:{value:e.account.password,callback:function(l){e.$set(e.account,"password",l)},expression:"account.password"}},[e.widgetInfo.config.password.iconType=="img"?i("img",{style:{width:e.widgetInfo.config.password.imageWidth?e.mUtils.getNewPxW(e.widgetInfo.config.password.imageWidth,e.widgetInfo.attr.lockedW)+"px":e.mUtils.getNewPxW(14,e.widgetInfo.attr.lockedW)+"px",height:e.widgetInfo.config.password.imageHeight?e.mUtils.getNewPxW(e.widgetInfo.config.password.imageHeight,e.widgetInfo.attr.lockedW)+"px":e.mUtils.getNewPxW(14,e.widgetInfo.attr.lockedW)+"px",verticalAlign:"middle"},attrs:{slot:"prefix",src:e.getImageUrl(e.widgetInfo.config.password.image),alt:""},slot:"prefix"}):e._e(),e.widgetInfo.config.password.iconType=="icon"?i("i",{class:e.widgetInfo.config.password.iconClass,style:{backgroundColor:e.widgetInfo.config.password.iconBgColor,color:e.widgetInfo.config.password.iconColor,fontSize:e.mUtils.getNewPxW(e.widgetInfo.config.password.iconSize,e.widgetInfo.attr.lockedW)+"px",verticalAlign:"middle"},attrs:{slot:"prefix"},slot:"prefix"}):e._e()]),e.widgetInfo.config.password.forceNoTip?i("input",{directives:[{name:"show",rawName:"v-show",value:!e.account.password||e.account.password.length<1,expression:"!account.password || account.password.length < 1"},{name:"model",rawName:"v-model",value:e.account.password,expression:"account.password"}],ref:"inputPasswordMask",staticStyle:{opacity:"0",height:"100%",width:"100%",position:"absolute",top:"0",left:"0"},attrs:{id:"my-input",type:"text"},domProps:{value:e.account.password},on:{focus:e.maskfocue,input:function(l){l.target.composing||e.$set(e.account,"password",l.target.value)}}}):e._e()],1),e.widgetInfo.config.imageCode.show?i("el-form-item",{staticClass:"imageCode",attrs:{label:e.widgetInfo.config.imageCode.text.show==!0?e.widgetInfo.config.imageCode.text.text:"","label-width":e.getLabelWidth(e.widgetInfo.config.imageCode.text.show,e.widgetInfo.config.imageCode.text.width)}},[i("table",{directives:[{name:"show",rawName:"v-show",value:!e.widgetInfo.config.imageCode.code.inside,expression:"!widgetInfo.config.imageCode.code.inside"}],staticStyle:{width:"100%"}},[i("tr",[i("td",[i("el-input",{staticClass:"imageCodeInputOutside",attrs:{placeholder:e.widgetInfo.config.imageCode.placeholder},model:{value:e.imageCode,callback:function(l){e.imageCode=l},expression:"imageCode"}},[e.widgetInfo.config.imageCode.iconType=="img"?i("img",{style:{width:e.widgetInfo.config.imageCode.imageWidth?e.mUtils.getNewPxW(e.widgetInfo.config.imageCode.imageWidth,e.widgetInfo.attr.lockedW)+"px":e.mUtils.getNewPxW(14,e.widgetInfo.attr.lockedW)+"px",height:e.widgetInfo.config.imageCode.imageHeight?e.mUtils.getNewPxH(e.widgetInfo.config.imageCode.imageHeight,e.widgetInfo.attr.lockedH)+"px":e.mUtils.getNewPxH(14,e.widgetInfo.attr.lockedH)+"px",verticalAlign:"middle"},attrs:{slot:"prefix",src:e.getImageUrl(e.widgetInfo.config.imageCode.image),alt:""},slot:"prefix"}):e._e(),e.widgetInfo.config.imageCode.iconType=="icon"?i("i",{class:e.widgetInfo.config.imageCode.iconClass,style:{color:e.widgetInfo.config.imageCode.iconColor,fontSize:e.mUtils.getNewPxW(e.widgetInfo.config.imageCode.iconSize,e.widgetInfo.attr.lockedW)+"px",verticalAlign:"middle"},attrs:{slot:"prefix"},slot:"prefix"}):e._e()])],1),i("td",{style:e.getImgCodeStyle()},[i("img",{staticStyle:{"vertical-align":"middle",float:"right"},style:e.getImgCodeStyle(),attrs:{src:e.imgContent},on:{click:e.loadImageCode}})])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.config.imageCode.code.inside,expression:"widgetInfo.config.imageCode.code.inside"}],staticStyle:{width:"100%"}},[i("el-input",{staticClass:"imageCodeInputInside",attrs:{placeholder:e.widgetInfo.config.imageCode.placeholder},model:{value:e.imageCode,callback:function(l){e.imageCode=l},expression:"imageCode"}},[e.widgetInfo.config.imageCode.iconType=="img"?i("img",{style:{width:e.widgetInfo.config.imageCode.imageWidth?e.mUtils.getNewPxW(e.widgetInfo.config.imageCode.imageWidth,e.widgetInfo.attr.lockedW)+"px":e.mUtils.getNewPxW(14,e.widgetInfo.attr.lockedW)+"px",height:e.widgetInfo.config.imageCode.imageHeight?e.mUtils.getNewPxH(e.widgetInfo.config.imageCode.imageHeight,e.widgetInfo.attr.lockedH)+"px":e.mUtils.getNewPxH(14,e.widgetInfo.attr.lockedH)+"px",verticalAlign:"middle"},attrs:{slot:"prefix",src:e.getImageUrl(e.widgetInfo.config.imageCode.image),alt:""},slot:"prefix"}):e._e(),e.widgetInfo.config.imageCode.iconType=="icon"?i("i",{class:e.widgetInfo.config.imageCode.iconClass,style:{color:e.widgetInfo.config.imageCode.iconColor,fontSize:e.mUtils.getNewPxW(e.widgetInfo.config.imageCode.iconSize,e.widgetInfo.attr.lockedW)+"px",verticalAlign:"middle"},attrs:{slot:"prefix"},slot:"prefix"}):e._e(),i("img",{style:e.getImgCodeStyle(),attrs:{slot:"suffix",src:e.imgContent},on:{click:e.loadImageCode},slot:"suffix"})])],1)]):e._e(),e.widgetInfo.config.rememberPassword.show?i("el-form-item",{staticClass:"rememberPassword",style:e.rememberPasswordStyle(e.widgetInfo.config.rememberPassword)},[i("el-checkbox",{model:{value:e.rememberPassword,callback:function(l){e.rememberPassword=l},expression:"rememberPassword"}},[e._v("\u8BB0\u4F4F\u5BC6\u7801")])],1):e._e(),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{style:e.buttonStyle(e.widgetInfo.config.button),attrs:{type:"primary",round:"",loading:e.isLoading,disabled:e.isLoading,id:"button"},on:{click:e.onLogin}},[e._v(" "+e._s(e.widgetInfo.config.button.text.text)+" ")])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.login_type[e.login_type_index]=="dingd",expression:"login_type[login_type_index] == 'dingd'"}]},[i("el-row",{staticStyle:{height:"50px"}},[e.widgetInfo.config.dingd.image&&e.widgetInfo.config.dingd.image!="none"?i("img",{staticStyle:{height:"30px"},attrs:{src:e.widgetInfo.config.dingd.image}}):e._e()]),i("el-row",[i("el-col",{staticStyle:{color:"#f56c6c","text-align":"center","margin-bottom":"5px","font-weight":"bolder"},attrs:{span:24}},[i("span",[e._v(e._s(e.qrMessage))])])],1),i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{staticStyle:{height:"100%",width:"100%"}},[i("div",{staticClass:"mock",style:e.qrFrameConStyle},[i("iframe",{style:e.qrFrameStyle,attrs:{frameborder:"none",src:e.qrCodeUrl}})])])])],1)],1),i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.login_type[e.login_type_index]=="mobileCode",expression:"login_type[login_type_index] == 'mobileCode'"}],ref:"form_mobileCode",staticClass:"login-class",style:e.formStyle(e.widgetInfo.config.global),attrs:{rules:e.rulesPhone,size:e.widgetInfo.config.global.size,model:e.mobileCode}},[i("div",{staticStyle:{color:"#f56c6c","text-align":"center","margin-bottom":"5px","font-weight":"bolder",width:"100%",height:"25px"}},[i("el-tooltip",{attrs:{disabled:!e.message,effect:"light"}},[i("div",{staticStyle:{"max-width":"320px"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.message))]),i("span",{staticClass:"message-span"},[e._v(e._s(e.message))])])],1),i("el-form-item",{staticClass:"mobile",style:"marginBottom: "+e.mUtils.getNewPxH(22,e.widgetInfo.attr.lockedH)+"px",attrs:{prop:"mobile",label:e.widgetInfo.config.mobileCode.number.text.show==!0?e.widgetInfo.config.mobileCode.number.text.text:"","label-width":e.getLabelWidth(e.widgetInfo.config.mobileCode.number.text.show,e.widgetInfo.config.mobileCode.number.text.width)}},[i("el-input",{staticClass:"mobileInput",attrs:{placeholder:e.widgetInfo.config.mobileCode.number.placeholder},model:{value:e.mobileCode.mobile,callback:function(l){e.$set(e.mobileCode,"mobile",l)},expression:"mobileCode.mobile"}},[e.widgetInfo.config.mobileCode.number.iconType=="img"?i("img",{style:{width:e.widgetInfo.config.mobileCode.number.imageWidth?e.mUtils.getNewPxW(e.widgetInfo.config.mobileCode.number.imageWidth,e.widgetInfo.attr.lockedW)+"px":e.mUtils.getNewPxW(14,e.widgetInfo.attr.lockedW)+"px",height:e.widgetInfo.config.mobileCode.number.imageHeight?e.mUtils.getNewPxH(e.widgetInfo.config.mobileCode.number.imageHeight,e.widgetInfo.attr.lockedH)+"px":e.mUtils.getNewPxW(14,e.widgetInfo.attr.lockedW)+"px",verticalAlign:"middle"},attrs:{slot:"prefix",src:e.getImageUrl(e.widgetInfo.config.mobileCode.number.image),alt:""},slot:"prefix"}):e._e(),e.widgetInfo.config.mobileCode.number.iconType=="icon"?i("i",{class:e.widgetInfo.config.mobileCode.number.iconClass,style:{color:e.widgetInfo.config.mobileCode.number.iconColor,fontSize:e.mUtils.getNewPxW(e.widgetInfo.config.mobileCode.number.iconSize,e.widgetInfo.attr.lockedW)+"px",verticalAlign:"middle"},attrs:{slot:"prefix"},slot:"prefix"}):e._e()])],1),i("el-form-item",{staticClass:"code",style:"marginBottom: "+e.mUtils.getNewPxH(22,e.widgetInfo.attr.lockedH)+"px",attrs:{prop:"code",label:e.widgetInfo.config.mobileCode.code.text.show==!0?e.widgetInfo.config.mobileCode.code.text.text:"","label-width":e.getLabelWidth(e.widgetInfo.config.mobileCode.code.text.show,e.widgetInfo.config.mobileCode.code.text.width)}},[i("el-input",{staticClass:"codeInput",attrs:{placeholder:e.widgetInfo.config.mobileCode.code.placeholder},model:{value:e.mobileCode.code,callback:function(l){e.$set(e.mobileCode,"code",l)},expression:"mobileCode.code"}},[i("div",{attrs:{slot:"append"},on:{click:e.sendMobileCode},slot:"append"},[e._v(" "+e._s(e.widgetInfo.config.mobileCode.code.button.text)+" ")])])],1),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{style:e.buttonStyle(e.widgetInfo.config.button),attrs:{type:"primary",round:"",loading:e.isLoading,disabled:e.isLoading,id:"button2"},on:{click:e.onLoginPhone}},[e._v(" "+e._s(e.widgetInfo.config.button.text.text)+" ")])],1)],1),i("login-multi",{ref:"otp",attrs:{"login-type":e.multiLoginType,username:e.account.username},on:{login:e.onMultiLogin,error:e.onMultiError}})],1)},C=[],x=f(844513),p=f(321300),_=f(117231),I=f(587485),L=f(126711),$=f(445061),B=f(833264),v=f(555616),A=f(148836),O=f(902412),z=f(727377),E=f(231954),Q=f(927966),Z=f(67157);const J={mixins:[Z.c],data(){return{config_extend:{config:{username:{iconSize:16,textColor:"#303133",txtLeft:30,marginTop:4,borderRadius:0,borderBottom:1,borderColorBottom:"#DBDFE6",backgroundColor:"rgba(4, 26, 62, 0)",hide:!1,opacity:!1},password:{iconSize:16,textColor:"#303133",txtLeft:30,marginTop:0,borderRadius:0,borderBottom:1,borderColorBottom:"#DBDFE6",backgroundColor:"rgba(4, 26, 62, 0)"},rememberPassword:{fontStyle:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14,color:"#616266"}},button:{marginTop:-15,borderRadius:4}}},filter_config:{username:{iconBgColor:"",textColor:"#303133",borderColorBottom:"#DBDFE6",backgroundColor:"rgba(4, 26, 62, 0)"},password:{iconBgColor:"",textColor:"#303133",borderColorBottom:"#DBDFE6",backgroundColor:"rgba(4, 26, 62, 0)"},rememberPassword:{fontStyle:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266"}},button:{color:"#4C84FF",text:{color:"rgba(255, 255, 255, 1)"},borderColor:"#4C84FF",colorType:"pureColor",topColor:"#46BFFF",bottomColor:"#196FFF",leftColor:"#46BFFF",rightColor:"#196FFF",colorDirection:"toBottom",shadowColor:"rgba(76, 132, 255, 0.5)"},mobileCode:{code:{button:{color:"#196FFF"}}}}}},methods:{filterPredefineColoursSchemeConfig(t,e){this.getNewConfigWithArrary(t,e,this.filter_config)}}};var Y=f(56279),o=function(){var e=this,i=e._self._c;return i("div",[i("el-dialog",{ref:"dialogBind",attrs:{"custom-class":"login-otp-dialog otp-bind",center:"","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisibleBind,width:"460px",top:"15vh"},on:{"update:visible":function(l){e.dialogVisibleBind=l}}},[i("div",{staticClass:"bind-container"},[i("div",{staticClass:"bind-logo-div"},[i("img",{staticClass:"bind-logo",attrs:{src:f(316292)}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.status==="bind",expression:"status === 'bind'"}],staticClass:"bind-text-div"},[i("div",{staticClass:"bind-text-title"},[e._v("\u7ED1\u5B9A\u8D26\u53F7")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.bindMode=="ali",expression:"bindMode == 'ali'"}]},[e._v(" 1.\u8BF7\u5728\u5404\u5927\u5E94\u7528\u5E02\u573A\u4E2D\u641C\u7D22\u5B89\u88C5\u201C\u963F\u91CC\u4E91\u201DAPP\uFF0C\u6216\u626B\u63CF "),i("el-tooltip",{attrs:{effect:"light"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("qrcode-img",{staticStyle:{height:"150px",width:"150px"},attrs:{content:"https://hd.m.aliyun.com/act/download.html","qr-style":{height:150,width:150}}})],1),i("span",{staticClass:"text-info pointer"},[e._v("\u4E8C\u7EF4\u7801->")])]),e._v(" (\u5E0C\u671B\u4F7F\u7528\u8C37\u6B4C\u9A8C\u8BC1\u5668?"),i("span",{staticClass:"text-info pointer",on:{click:function(l){e.bindMode="google"}}},[e._v("\u70B9\u51FB\u8FD9\u91CC->")]),e._v(") ")],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.bindMode=="ali",expression:"bindMode == 'ali'"}]},[e._v(" 2.\u8FDB\u5165\u963F\u91CC\u4E91APP\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u7684\u201CMFA\u201D\u56FE\u6807\uFF0C\u8FDB\u5165\u865A\u62DFMFA\u754C\u9762\uFF0C\u7136\u540E\u70B9\u51FB\u201C\u626B\u7801\u6DFB\u52A0\u201D\u6309\u94AE\uFF0C\u626B\u63CF\u4E0B\u65B9\u4E8C\u7EF4\u7801\u6216\u8005\u9009\u62E9\u201C\u624B\u52A8\u6DFB\u52A0\u201D\u8F93\u5165\u4E0B\u65B9\u5BC6\u94A5\u8FDB\u884C\u8D26\u53F7\u7ED1\u5B9A ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.bindMode!="ali",expression:"bindMode != 'ali'"}]},[e._v(" 1.\u4E0B\u8F7D\u5E76\u5B89\u88C5\u201CGoogle Authenticator(\u8C37\u6B4C\u8EAB\u4EFD\u9A8C\u8BC1\u5668)\u201DAPP\uFF0C\u6216\u626B\u63CF "),i("el-tooltip",{attrs:{effect:"light"}},[i("div",{staticStyle:{display:"flex","text-align":"center"},attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{"margin-right":"20px"}},[i("qrcode-img",{staticStyle:{height:"150px",width:"150px"},attrs:{content:"http://m.2265.com/down/396575.html","qr-style":{height:150,width:150}}}),e._v(" \u5B89\u5353/\u9E3F\u8499 ")],1),i("div",[i("qrcode-img",{staticStyle:{height:"150px",width:"150px"},attrs:{content:"https://apps.apple.com/cn/app/google-authenticator/id388497605","qr-style":{height:150,width:150}}}),e._v(" iOS ")],1)]),i("span",{staticClass:"text-info pointer"},[e._v("\u4E8C\u7EF4\u7801->")])]),e._v(" (\u5E0C\u671B\u4F7F\u7528\u963F\u91CC\u4E91APP?"),i("span",{staticClass:"text-info pointer",on:{click:function(l){e.bindMode="ali"}}},[e._v("\u70B9\u51FB\u8FD9\u91CC->")]),e._v(") ")],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.bindMode!="ali",expression:"bindMode != 'ali'"}]},[e._v(' 2.\u5728APP\u4E2D\uFF0C\u70B9\u51FB\u201C\u5F00\u59CB\u4F7F\u7528\u201D,\u70B9\u51FB\u201C\u4E0D\u767B\u5F55\u8D26\u53F7\uFF0C\u76F4\u63A5\u4F7F\u7528Authenticator"\uFF0C\u70B9\u51FB\u201C\u6DFB\u52A0\u52A8\u6001\u5BC6\u7801\u201D;\u626B\u63CF\u4E0B\u65B9\u4E8C\u7EF4\u7801\u6216\u8005\u9009\u62E9"\u8F93\u5165\u8BBE\u7F6E\u5BC6\u7801"\u8F93\u5165\u4E0B\u65B9\u5BC6\u94A5\u8FDB\u884C\u8D26\u53F7\u7ED1\u5B9A ')]),i("div",{staticClass:"qrcode"},[i("el-tooltip",{attrs:{effect:"light"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("qrcode-img",{attrs:{content:e.qrCodeImg,"qr-style":e.qrBigStyle}})],1),i("qrcode-img",{staticClass:"qrcode-img",attrs:{content:e.qrCodeImg,"qr-style":e.qrStyle}})],1),i("div",{staticClass:"qrcode-content"},[i("span",[e._v("\u5BC6\u94A5:")]),i("span",{ref:"qrcodeKey",staticClass:"text-important"},[e._v(" "+e._s(e.qrcodeKey)+" "),i("el-button",{staticClass:"el-button--info",attrs:{type:"text"},on:{click:e.copyQrcodeKey}},[e._v(" \u590D\u5236 ")])],1)])],1),i("div",{staticClass:"otp-dialog-button"},[i("el-button",{attrs:{type:"text"},on:{click:e.cancelBind}},[e._v("\u53D6\u6D88")]),i("el-button",{attrs:{type:"text"},on:{click:e.bindNext}},[e._v("\u4E0B\u4E00\u6B65")])],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.status==="bind2",expression:"status === 'bind2'"}],staticClass:"bind-text-div"},[i("div",{staticClass:"bind-text-title"},[e._v("\u8F93\u5165\u9A8C\u8BC1\u7801")]),i("div",[e._v("\u8F93\u5165\u60A8\u5728APP\u4E2D\u770B\u5230\u76846\u4F4D\u52A8\u6001\u53E3\u4EE4")]),i("div",{staticClass:"text-info",staticStyle:{"margin-top":"30px"}},[e._v("\u8BF7\u8F93\u52A8\u6001\u53E3\u4EE4")]),i("el-input",{class:`input-code ${e.code?"":"empty"}`,attrs:{placeholder:"\u52A8\u6001\u53E3\u4EE4"},on:{input:e.inputCodeChange},model:{value:e.code,callback:function(l){e.code=l},expression:"code"}}),i("div",{staticClass:"text-error"},[e._v(" "+e._s(e.errorMsg)+" ")]),i("div",{staticStyle:{height:"50px"}}),i("div",{staticClass:"otp-dialog-button"},[i("el-button",{attrs:{type:"text"},on:{click:e.bindPrevious}},[e._v("\u4E0A\u4E00\u6B65")]),i("el-button",{attrs:{type:"text"},on:{click:e.bindOtp}},[e._v("\u786E\u5B9A")])],1)],1)])]),i("el-dialog",{ref:"dialogLogin",attrs:{"custom-class":"login-otp-dialog otp-login",width:"300px",top:"35vh",center:"","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisibleLogin},on:{"update:visible":function(l){e.dialogVisibleLogin=l}}},[i("div",{staticClass:"bind-text-div"},[i("div",{staticClass:"bind-text-title"},[e._v("\u52A8\u6001\u53E3\u4EE4\u8BA4\u8BC1")]),i("el-input",{ref:"otpCodeInput",class:`input-code ${e.code?"":"empty"}`,attrs:{placeholder:"\u8BF7\u8F93\u5165\u52A8\u6001\u53E3\u4EE4"},on:{input:e.inputCodeChange},model:{value:e.code,callback:function(l){e.code=l},expression:"code"}}),i("div",{staticClass:"text-error"},[e._v(" "+e._s(e.errorMsg)+" ")]),i("el-button",{staticClass:"btn-login",attrs:{type:"primary"},on:{click:e.bindOtp}},[e._v("\u786E\u5B9A")])],1)]),i("el-dialog",{ref:"dialogLogin",attrs:{"custom-class":"login-otp-dialog phone-login",width:"300px",top:"35vh",center:"","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisibleLoginPhone},on:{"update:visible":function(l){e.dialogVisibleLoginPhone=l}}},[i("div",{staticClass:"bind-text-div"},[i("div",{staticClass:"bind-text-title"},[e._v("\u77ED\u4FE1\u9A8C\u8BC1\u7801\u9A8C\u8BC1")]),i("div",{staticClass:"phone-login-input"},[i("el-input",{ref:"phoneCodeInput",class:`input-code ${e.code?"":"empty"}`,attrs:{placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801"},on:{input:e.inputCodeChange},model:{value:e.code,callback:function(l){e.code=l},expression:"code"}}),i("el-button",{staticClass:"btn-login",staticStyle:{width:"100px"},attrs:{size:"mini",type:"primary",disabled:e.phoneTimer>0},on:{click:e.checkPhoneCode}},[e._v(" \u91CD\u65B0\u83B7\u53D6"+e._s(e.phoneTimer>0?`(${e.phoneTimer})`:"")+" ")])],1),i("div",{staticClass:"text-error"},[e._v(" "+e._s(e.errorMsg)+" ")]),i("el-button",{staticClass:"btn-login",attrs:{type:"primary",disabled:e.phoneLoginBtnDisabled},on:{click:e.mobileLogin}},[e._v("\u786E\u5B9A")])],1)])],1)},s=[],n=function(){var e=this,i=e._self._c;return i("div",{ref:"qrcode"})},a=[],r=f(542324),g=f.n(r);let h=null;var d={name:"qrcode-img",props:{content:{type:String,default:""},qrStyle:{type:Object,default:()=>({height:128,width:128,colorDark:"#000",colorLight:"#FFF",correctLevel:g().CorrectLevel.H})}},mounted(){h=new(g())(this.$refs.qrcode,{text:this.content||"",height:128,width:128,colorDark:"#000",colorLight:"#FFF",correctLevel:g().CorrectLevel.H,...this.qrStyle}),this.$nextTick(function(){this.$refs.qrcode.removeAttribute("title")})},watch:{content(){h.clear(),this.content&&h.makeCode(this.content)}}},u=d,b=f(768141),m=(0,b.Z)(u,n,a,!1,null,"f863e030",null),M=m.exports,N=f(118295),R=f.n(N),k={name:"LoginMulti",components:{QrcodeImg:M},props:{loginType:{default:"otp"}},data(){return{username:"",status:"bind",bindMode:"ali",dialogVisibleBind:!1,dialogVisibleLogin:!1,dialogVisibleLoginPhone:!1,code:"",qrcodeKey:"",errorMsg:"",qrStyle:{height:80,width:80},qrBigStyle:{height:200,width:200},phoneTimer:0,qrCodeImg:"",phoneLoginBtnDisabled:!0}},methods:{showLoading(t){this.MyLoading=this.MyLoading||v.Loading.service({text:t||"\u8BF7\u7A0D\u540E...",fullscreen:!0,background:"rgba(255,255,255,0.3)"})},hideLoading(){this?.MyLoading?.close(),this.MyLoading=null},show(t){this.username=t,this.loginType=="otp"?this.checkBind():this.loginType=="mobileCode"&&this.checkPhoneCode()},hide(){this.username="",this.code="",this.errorMsg="",this.qrcodeKey="",this.dialogVisibleLogin=!1,this.dialogVisibleBind=!1,this.dialogVisibleLoginPhone=!1,this.hideLoading()},checkBind(){this.username&&O.j.checkUserGoogleSecretKey(this.username).then(t=>{t.status===200&&(t.data.secretkey?(this.qrcodeKey=t.data.secretkey,this.qrCodeImg=t.data.qrCode||`otpauth://totp/${this.username}?secret=${this.qrcodeKey}`,this.showBind()):this.showLogin())})},showBind(){this.dialogVisibleLogin=!1,this.dialogVisibleBind=!0,this.dialogVisibleLoginPhone=!1,this.code="",this.errorMsg=""},showLogin(){this.dialogVisibleLogin=!0,this.dialogVisibleBind=!1,this.dialogVisibleLoginPhone=!1,this.code="",this.qrcodeKey="",this.errorMsg="",this.$nextTick(()=>{this.$refs.otpCodeInput.focus()})},showPhone(){this.dialogVisibleLogin=!1,this.dialogVisibleBind=!1,this.dialogVisibleLoginPhone=!0,this.code="",this.qrcodeKey="",this.errorMsg="",this.$nextTick(()=>{this.$refs.phoneCodeInput.focus()})},copyQrcodeKey(){const t=this;let e=new(R())(this.$refs.qrcodeKey,{text:function(){return t.qrcodeKey}});e.on("success",function(){e.destroy(),t.qrcodeKey&&v.Message.success({message:"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",offset:60})})},cancelBind(){this.hide()},bindPrevious(){this.status="bind"},bindNext(){this.status="bind2"},bindOtp(){this.code&&this.code.length>5?(this.showLoading("\u6B63\u5728\u68C0\u6D4B\u52A8\u6001\u53E3\u4EE4,\u8BF7\u7A0D\u540E..."),O.j.loginOtp(this.username,this.code).then(t=>{if(this.hideLoading(),t.status.toString()==="400"){this.errorMsg=t.msg;return}this.$emit("login",t),this.hide()}).catch(t=>{this.$emit("error",t),this.hide()})):this.errorMsg="\u8BF7\u8F93\u5165\u52A8\u6001\u53E3\u4EE4"},inputCodeChange(){this.errorMsg=""},phoneCodeTimer(){this.phoneTimer=60,this.phoneInterval&&clearInterval(this.phoneInterval),this.phoneInterval=setInterval(()=>{this.phoneTimer--,this.phoneTimer<0&&(clearInterval(this.phoneInterval),this.phoneInterval=0)},1e3)},checkPhoneCode(){if(this.code="",this.phoneTimer>0){this.showPhone();return}this.showLoading("\u6B63\u5728\u53D1\u9001\u624B\u673A\u9A8C\u8BC1\u7801,\u8BF7\u7A0D\u540E..."),z.y.sendMobileCodeByUsername(this.username).then(t=>{if(this.hideLoading(),t.status.toString()=="200")this.showPhone(),this.phoneCodeTimer(),this.phoneLoginBtnDisabled=!1;else{this.phoneLoginBtnDisabled=!0;let e=t.msg||t.message;e&&(e=e.split("at com.gisquest")[0]),this.$emit("error",{message:e})}}).catch(t=>{this.$emit("error",t),this.hide()})},mobileLogin(){if(!this.phoneLoginBtnDisabled){if(!(this.code&&this.code.trim().length>3)){this.errorMsg="\u8BF7\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801";return}this.showLoading(),O.j.loginPhoneByUsername(this.code,this.username).then(t=>{if(this.hideLoading(),t&&t.status.toString()==="400"){this.errorMsg=t.msg;return}this.$emit("login",t),this.hide()}).catch(t=>{this.hideLoading(),this.$emit("error",t)})}},isShowing(){return this.dialogVisibleLogin||this.dialogVisibleBind||this.dialogVisibleLoginPhone},onKeyEnter(){this.dialogVisibleLogin?this.bindOtp():this.dialogVisibleBind?this.status=="bind"?this.bindNext():this.status=="bind2"&&this.bindOtp():this.dialogVisibleLoginPhone&&this.mobileLogin()}}},D=k,K=(0,b.Z)(D,o,s,!1,null,null,null),V=K.exports,X=f(155946),q=f(935051);const G="/base/base";let U={loginFactorRule:"loginFactorRule",getKeyPropertyBySubid(t,e){return(0,q.platformGetRequest)(`${G}/sysconfig/getKeyPropertyBySubid/${e}?key=${encodeURIComponent(t)}`)},isKeyExist(t,e){return(0,q.platformPostRequest)(`${G}/sysconfig/isKeyPropertyKeyExist`,{subGuid:e,propertyKey:t})},getKeyValueGroups(t){if(!t)throw new Error("\u6CA1\u6709\u4F20\u5165\u5E94\u7528id");return(0,q.platformGetRequest)(`${G}/sysconfig/keyvaluegroups?subGuid=${t}&start=0&size=999`)},createKeyValueGroup(t){return(0,q.platformPostRequest)(`${G}/sysconfig/keyvaluegroups`,t)},updateKey(t){let e=new FormData;return Object.keys(t).forEach(i=>{e.append(i,t[i])}),(0,q.platformPostRequest)(`${G}/sysconfig/keyvaluepropertys/${t.id}`,e,{headers:{"Content-Type":"multipart/form-data"}})},createKey(t){let e=new FormData;return Object.keys(t).forEach(i=>{e.append(i,t[i])}),(0,q.platformPostRequest)(`${G}/sysconfig/keyvaluepropertys?preview=true&subGuid=${t.subGuid}`,e,{headers:{"Content-Type":"multipart/form-data"}})}};var T=f(149500);let F=null;var j={props:["widgetInfo"],name:"login",mixins:[I.baseConfig,B.t,L.H,$.u,J,Y.P],components:{HideButton:x.Z,LoginMulti:V},data(){return{multiLoginType:"",showPassword:!0,isLoading:!1,message:null,imageCode:null,imgContent:null,rememberPassword:null,rememberPasswordKey:null,account:{chinesename:"",username:"",password:""},mobileCode:{mobile:"",code:""},rules:{username:[{required:!0,message:this.widgetInfo.config.username.placeholder,trigger:"blur"}],password:[{required:!0,message:this.widgetInfo.config.password.placeholder,trigger:"blur"}]},rulesPhone:{mobile:[{required:!0,message:this.widgetInfo.config.mobileCode.number.placeholder,trigger:"blur"}],code:[{required:!0,message:this.widgetInfo.config.mobileCode.code.placeholder,trigger:"blur"}]},qrCodeReload:!0,qrCodeUrl:"",qrMessage:"",dingId:"",codeValuePropertysByKeys:null,login_type:["account"],login_type_index:0,isAddEventListenerMessage:!1}},computed:{...(0,A.Se)(["viewBiId","viewGuid","getCanvasSettingInfo","viewAppId","isView","getApplicationId"]),qrCodeButtonCls(){let t="";switch(this.login_type[(this.login_type_index+1)%this.login_type.length]){case"account":t="iconfont bi_pc2";break;case"dingd":t="iconfont bi_zzd2";break;case"mobileCode":t="iconfont bi_app2";break}return t},qrFrameConStyle(){let t=this.widgetInfo.config.dingd.h-0,e=this.widgetInfo.config.dingd.w-0;return{height:t>0?t+"px":"200px",width:e>0?e+"px":"200px"}},qrFrameStyle(){let t=""+(this.widgetInfo.config.dingd.y-0),e=""+(this.widgetInfo.config.dingd.x-0);return{height:"500px",width:"500px",top:t!="NaN"?t+"px":"-45px",left:e!="NaN"?e+"px":"-20px"}}},created(){let t=this;this.isView&&(document.onkeydown=()=>{let e=window.event.keyCode,i=document.getElementById("myBoardArea");if(e==13&&!i){if(t.$refs?.otp&&t.$refs.otp.isShowing()){t.$refs.otp.onKeyEnter();return}t.login_type[t.login_type_index]=="account"?t.onLogin():t.login_type[t.login_type_index]=="mobileCode"&&t.onLoginPhone()}})},mounted(){this.getCodeValuePropertysByKeys(()=>{this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo),this.loadImageCode(),this.initQrCodeMessage(),this.registerBoardSaveEvent()})},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{...(0,A.nv)(["updateCanvasSettingInfoData"]),changecc(){(!this.account.password||this.account.password.length<1)&&this.$refs.inputPasswordMask.focus()},maskfocue(){let t=this;setTimeout(function(){t.$refs.inputPassword.focus()},5)},loadInfo(t){this.checkImageCode(),this.checkOrSaveMultiConfigToPlatform(!0,t);let e=JSON.parse(p.getStoreUserInfo());t.config.username.hide==!0&&t.config.username.read_current_account&&(this.account.username=e.userCode),t.config.chinesename.show&&t.config.chinesename.read_current_account?this.account.chinesename=e.userName:this.account.chinesename="",this.getRememberPassword(t),this.$nextTick(()=>{this.setStyle(t.config)}),this.setLoginType(t.config),this.showQrCode(),this.lifecycleAfterLoad()},reLoadInfo(t){this.qrCodeReload=!0,this.loadInfo(t)},initAction(t){t.action.receive&&t.action.receive.changeLoginType&&t.action.receive.changeLoginType.enabled&&this.$$lib__.each(t.action.receive.changeLoginType.widgetList,e=>{let i=e[0][1]+"_"+e[0][0];e[0][1].indexOf("_")>-1&&(i=e[0][1]);let l=e.script;Q.Z.$on(i,c=>{let w=e[0][2],P=null;if(w){let H=w.indexOf("|");H>-1&&(w=e[0][2].substring(H+1),P=c[w])}if(l&&l.enabled)if(l.content==""){this.showMessage("\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C");return}else this.doChange=new Function("data","param_key","value",l.content),this.doChange(c,w,P);else{let H=["password","qrcode","message"];""+(P-0)=="NaN"?P=H.indexOf((""+P).toLowerCase()):P=P-0,(P==0||P==1||P==2)&&(this.login_type_index=P,this.showQrCode())}})}),this.actionReceive(t)},checkQrCodeMessageUrl(t){return this.widgetInfo.config.dingd.enabled?!!(t.startsWith("https://login.dg-work.cn")||t.startsWith("https://login-pro.ding.zj.gov.cn")||this.widgetInfo.config.dingd.url&&!/^[\u4e00-\u9fa5]/.test(this.widgetInfo.config.dingd.url)&&this.widgetInfo.config.dingd.url.startsWith(t)):!1},initQrCodeMessage(){let t=this;window.addEventListener("message",function(e){if(e&&t.checkQrCodeMessageUrl(e.origin)&&e.data.code){if(window.qrCodeLoginMessageCode&&window.qrCodeLoginMessageCode==e.data.code)return;window.qrCodeLoginMessageCode=e.data.code,t.mUtils.setStoreDeviceId();let i="";if(t.widgetInfo?.config?.dingd?.url){let l=t.widgetInfo.config.dingd.url.split(/[\?&#]/),c=l.findIndex(w=>w.startsWith("zzdAppCode="));c>-1&&(i="&"+l[c])}O.j.qrLogin(e.data.code,t.widgetInfo.config.dingd.relateDingId,i).then(function(l){if(window.qrCodeLoginMessageCode=null,l)if(l.status=l.status-0,l.status==302)t.qrMessage=l.msg,l.msg.indexOf("\u8D26\u53F7\u672A\u5173\u8054")>-1&&l.dingId&&setTimeout(function(){t.dingId=l.dingId,t.message=t.widgetInfo.config.dingd.autoLoginFailMessage,t.login_type_index=0,t.qrCodeReload=!0},600);else if(l.status==307)t.multiLogin(l,"dingd");else if(l.status==200){let c=l.data;T.info("---\u767B\u5F55\u6210\u529F"),t.biLogin(c.access_token,"login",w=>{w.data&&w.data.code==1?(t.message=null,t.setSystemParams(c),t.doLogin(t)):w.data&&w.data.msg?v.Message.error({message:w.data.msg,offset:60,duration:0,showClose:!0}):v.Message.error({message:"\u7528\u6237\u4FE1\u606F\u5199\u5165localStorage\u5931\u8D25",offset:60,duration:0,showClose:!0})})}else v.Message.error({message:l.msg||"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\u6216\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458",offset:60,duration:0,showClose:!0})}).catch(function(l){T.log(l),window.qrCodeLoginMessageCode=null})}})},showQrCode(){if(this.showMessage(null),this.dingId="",this.login_type[this.login_type_index]=="dingd"&&(!this.qrCodeUrl||this.qrCodeReload))if(this.widgetInfo.config.dingd.url&&!/^[\u4e00-\u9fa5]/.test(this.widgetInfo.config.dingd.url))this.qrCodeUrl=this.widgetInfo.config.dingd.url,this.qrMessage=this.widgetInfo.config.dingd.message;else{let t=this.widgetInfo.config.dingd.clientId,e=this.widgetInfo.config.dingd.redirectUrl;t&&e?(this.qrCodeUrl=`https://login.dg-work.cn/oauth2/auth.htm?${Math.random()}&response_type=code&client_id=${t}&scope=get_user_info&authType=QRCODE&embedMode=true&redirect_uri=${e}`,this.qrMessage=this.widgetInfo.config.dingd.message,this.qrCodeReload=!1):this.showMessage("\u672A\u914D\u7F6E\u653F\u52A1\u9489\u9489\u7684clientId \u548C redirectUrl\uFF0C\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458")}},onLogin(){if(this.isLoading){T.info("\u767B\u5F55\u4E2D\uFF0C\u8BF7\u52FF\u91CD\u590D\u64CD\u4F5C...");return}this.$refs.form.validate(t=>{if(t){this.isLoading=!0;let e={username:this.account.username,password:this.account.password};this.dingId&&(e.dingId=this.dingId);let i=_.Z.encrypt(JSON.stringify(e)),l=null;if(this.widgetInfo.config.imageCode.show&&(l=this.imageCode,this.imageCode==null||this.imageCode=="")){this.showMessage("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"),this.isLoading=!1;return}p.setStoreDeviceId(),O.j.login(i,l).then(c=>{if(this.isLoading=!1,E.Z.baseConfig.isPlatform){if(c.status.toString()!=="200"){if(!this.multiLogin(c,"password"))return;c.message=="Bad credentials"?this.showMessage("\u8D26\u53F7\u5BC6\u7801\u6709\u8BEF"):this.showMessage(c.msg||c.message||`\u767B\u5F55\u5931\u8D25(${c.status})\u3002`),this.loadImageCode();return}T.info("---\u767B\u5F55\u6210\u529F"),this.biLogin(c.access_token,"login",w=>{w.data&&w.data.code==1?(this.showMessage(null),this.setSystemParams(c),this.setRememberPassword(),this.account.password=null,this.doLogin()):w.data&&w.data.msg?(this.showMessage(w.data.msg),this.loadImageCode()):(this.showMessage("\u7528\u6237\u4FE1\u606F\u5199\u5165\u5931\u8D25"),this.loadImageCode())})}else{if(c&&c.status!==200){this.showMessage(c.msg);return}p.setStoreUserInfo(c.data.userInfo),p.setStoreToken(c.data.token),this.showMessage(null),this.setSystemParams(c.data),this.setRememberPassword(),this.account.password=null,this.doLogin()}}).catch(c=>{T.error(c),this.isLoading=!1})}})},onLoginPhone(){if(this.isLoading){T.info("\u767B\u5F55\u4E2D\uFF0C\u8BF7\u52FF\u91CD\u590D\u64CD\u4F5C...");return}this.$refs.form_mobileCode.validate(t=>{t&&(this.isLoading=!0,p.setStoreDeviceId(),O.j.loginPhone(this.mobileCode.code,this.mobileCode.mobile).then(e=>{if(this.isLoading=!1,e.status.toString()!=="200"){if(!this.multiLogin(e,"mobileCode"))return;e.message=="Bad credentials"?this.showMessage("\u8D26\u53F7\u5BC6\u7801\u6709\u8BEF"):this.showMessage(e.msg||e.message||`\u767B\u5F55\u5931\u8D25(${e.status})\u3002`);return}T.info("---\u767B\u5F55\u6210\u529F"),this.biLogin(e.access_token,"login",i=>{i.data&&i.data.code==1?(this.showMessage(null),this.setSystemParams(e),this.doLogin()):i.data&&i.data.msg?this.showMessage(i.data.msg):this.showMessage("\u7528\u6237\u4FE1\u606F\u5199\u5165localStorage\u5931\u8D25")})}).catch(e=>{T.error(e),this.isLoading=!1}))})},biLogin(t,e,i){this.isLoading=!0;let l=this.widgetInfo.action.sendOut.actionList,c=E.Z.baseConfig.isPlatform&&(!l||l.length==0||l.findIndex(P=>P.enabled)==-1),w=`${E.Z.baseConfig.domain}?${Math.random()}#/bilogin?refresh=${c?"true":"false"}&subGuid=${this.viewAppId}&logintype=${e}&token=${t}`;if(T.info("iframe\u5730\u5740",w),F&&(document.body.removeChild(F),F=null),F=document.createElement("iframe"),F.src=w,F.style.height="0",F.style.width="0",F.style.border="none",document.body.appendChild(F),e!="loginout"&&this.isAddEventListenerMessage==!1){const P=this;window.addEventListener("message",H=>{T.info("\u76D1\u542C\u5230iframe\u6D88\u606F",H),H&&H.source.origin==H.target.origin&&(P.isLoading=!1,i&&i(H.data))}),this.isAddEventListenerMessage=!0}},loadImageCode(){this.widgetInfo.config.imageCode.show&&E.Z.baseConfig.isPlatform&&(p.setStoreDeviceId(),O.j.loadImageCode().then(t=>{let e=new window.FileReader;e.readAsDataURL(t),e.onload=()=>{this.imgContent=e.result}}))},getImgCodeStyle(){let t={},e=this.widgetInfo.config.imageCode.code;return e.inside?(t.width=this.mUtils.getNewPxW(e.width,this.widgetInfo.attr.lockedW)+"px",t.height=this.mUtils.getNewPxH(e.height,this.widgetInfo.attr.lockedH)+"px",t.marginRight=this.mUtils.getNewPxW(e.right,this.widgetInfo.attr.lockedW)+"px",t.marginTop=this.mUtils.getNewPxH(e.top,this.widgetInfo.attr.lockedH)+"px",t.verticalAlign="top",t.borderRadius=e.borderRadius+"px"):(t.width=this.mUtils.getNewPxW(e.width,this.widgetInfo.attr.lockedW)+"px",t.height=this.mUtils.getNewPxH(e.height,this.widgetInfo.attr.lockedH)+"px",t.marginLeft=this.mUtils.getNewPxW(e.left,this.widgetInfo.attr.lockedW)+"px",t.marginTop=this.mUtils.getNewPxH(e.top,this.widgetInfo.attr.lockedH)+"px",t.verticalAlign="top",t.borderRadius=e.borderRadius+"px"),t},getRememberPassword(t){if(t.config.username.hide!=!0){this.viewGuid?this.rememberPasswordKey=this.viewBiId+"_"+this.viewGuid:this.rememberPasswordKey=this.viewBiId;let e=p.getStoreRememberPassword(this.rememberPasswordKey);e&&(this.account=e,this.rememberPassword=!0)}},setRememberPassword(){this.widgetInfo.config.rememberPassword.show&&(this.rememberPassword?p.setStoreRememberPassword(this.rememberPasswordKey,this.account.username,this.account.password):p.removeStoreRememberPassword(this.rememberPasswordKey))},doLogin(){let t=this.widgetInfo.action.sendOut.actionList;(!t||t.length==0)&&(E.Z.baseConfig.isPlatform?window.parent==window&&this.showMessage('\u767B\u5F55\u6210\u529F\uFF0C\u4F46\u672A\u80FD\u8DF3\u8F6C\u3002\u8BF7\u914D\u7F6E\u767B\u5F55\u7EC4\u4EF6\u7684"\u767B\u5F55\u8DF3\u8F6C"\u4E8B\u4EF6\uFF0C\u6216\u53D1\u5E03\u540E\u76F4\u63A5\u9884\u89C8\u5E94\u7528'):this.showMessage("\u672A\u914D\u7F6E\u767B\u5F55\u7EC4\u4EF6\u7684\u201C\u70B9\u51FB\u767B\u5F55\u201D\u4E8B\u4EF6")),this.$$lib__.each(t,e=>{if(e.code==this.$$global_editor.actionType.login.code)if(e.enabled){let i={};if(e.paramsExtend&&e.paramsExtend.length>0&&this.getExtendParams(i,e.paramsExtend,this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[0],this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions),e.type===this.$$global_editor.linkType.dynamic.code&&(e[this.$$global_editor.linkType.dynamic.code].url=this.getActionUrl(e,this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[0],this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions)),e.script&&e.script.enabled){if(T.log("Execute script for "+e.name+" action"),e.script.content==""){this.showMessage("\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C");return}this.customScript=new Function("param",e.script.content),i=this.customScript(i)}this.openLinkAction(e,i)}else this.showMessage("\u672A\u5F00\u542F\u201C\u70B9\u51FB\u767B\u5F55\u201D\u4E8B\u4EF6");else if(e.code==this.$$global_editor.actionType.signIn.code)if(e.enabled){let i=e.code+"_"+this.widgetInfo.id,l={};if(e.paramsExtend&&e.paramsExtend.length>0&&this.getExtendParams(l,e.paramsExtend,this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[0],this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions),e.script&&e.script.enabled){if(T.log("Execute script for "+e.name+" action"),e.script.content==""){this.showMessage("\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C");return}this.customScript=new Function("param",e.script.content),l=this.customScript(l)}Q.Z.$emit(i,l),e.postMessage&&this.doPostMessage(l)}else this.showMessage("\u672A\u5F00\u542F\u201C\u70B9\u51FB\u767B\u5F55\u201D\u4E8B\u4EF6")})},setSystemParams(t){if(!t)return;t.token=t.access_token||t.token,t.userId=t.user_id||t.userInfo.userId,t.userName=t.user_name||t.userInfo.userCode,t.staffName=decodeURIComponent(t.user_nickname||t.userInfo.userName);let e=this.getCanvasSettingInfo;e.data&&e.data.globalParams&&e.data.globalParams.paramsValue&&(this.$$lib__.each(e.data.globalParams.paramsValue,i=>{if(i.type==this.$$global_editor.globalParamsType.systemParams.code)switch(i.systemParams){case this.$$global_editor.systemParamsType.tokenNoHead.code:e.data.globalParams.params[i.paramName]=t.token;break;case this.$$global_editor.systemParamsType.token.code:e.data.globalParams.params[i.paramName]="Bearer "+t.token;break;case this.$$global_editor.systemParamsType.userId.code:e.data.globalParams.params[i.paramName]=t.userId;break;case this.$$global_editor.systemParamsType.userName.code:e.data.globalParams.params[i.paramName]=t.userName;break;case this.$$global_editor.systemParamsType.staffName.code:e.data.globalParams.params[i.paramName]=t.staffName;break}}),this.updateCanvasSettingInfoData(JSON.parse(JSON.stringify(e.data))))},formStyle(t){return this.$nextTick(function(){this.formFix(this.$refs.form),this.formFix(this.$refs.form_mobileCode)}),{paddingTop:this.mUtils.getNewPxH(t.paddingTop,this.widgetInfo.attr.lockedH)+"px",paddingLeft:this.mUtils.getNewPxW(t.paddingLeft,this.widgetInfo.attr.lockedW)+"px",paddingRight:this.mUtils.getNewPxW(t.paddingRight,this.widgetInfo.attr.lockedW)+"px"}},formFix(t){t&&this.mUtils.getNewPxH(10,this.widgetInfo.attr.lockedH)!=10&&this.$$lib__.each(t.$el,e=>{(e.offsetHeight==36||e.offsetHeight==38)&&(e.style.height=this.mUtils.getNewPxH(e.offsetHeight,this.widgetInfo.attr.lockedH)+"px",e.style.lineHeight=this.mUtils.getNewPxH(e.offsetHeight,this.widgetInfo.attr.lockedH)+"px",this.$$lib__.each(document.querySelectorAll(".login-class span.el-input__prefix"),i=>{i.style.height=this.mUtils.getNewPxH(36,this.widgetInfo.attr.lockedH)+"px",i.style.lineHeight=this.mUtils.getNewPxH(36,this.widgetInfo.attr.lockedH)+"px"}),this.$$lib__.each(document.querySelectorAll(".login-class .el-form-item--medium .el-form-item__content"),i=>{i.style.lineHeight=this.mUtils.getNewPxH(36,this.widgetInfo.attr.lockedH)+"px",i.childNodes[0].id=="button"&&(i.childNodes[0].style.lineHeight="100%"),i.childNodes[0].id=="button2"&&(i.childNodes[0].style.lineHeight="100%")}))})},rememberPasswordStyle(t){return{textAlign:t.textAlign,fontSize:this.mUtils.getNewFontSize(t.fontStyle.fontSize,this.widgetInfo.attr.lockedW)+"px",fontFamily:t.fontStyle.fontFamily,color:t.fontStyle.color,marginBottom:this.mUtils.getNewPxH(22,this.widgetInfo.attr.lockedH)+"px"}},buttonStyle(t){let e=null;t.colorType=="pureColor"?e=t.color:t.colorDirection=="toRight"?e="linear-gradient(to right, "+t.leftColor+" 0%,"+t.rightColor+" 100%)":e="linear-gradient(to bottom, "+t.topColor+" 0%,"+t.bottomColor+" 100%)";let i=0,l=this.mUtils.getNewPxW(this.widgetInfo.config.button.width,this.widgetInfo.attr.lockedW),c=parseFloat(this.widgetInfo.config.global.paddingLeft),w=parseFloat(this.widgetInfo.config.global.paddingRight);return l+c+w>this.widgetInfo.attr.w?i=this.widgetInfo.attr.w-c-w:i=this.mUtils.getNewPxW(this.widgetInfo.config.button.width,this.widgetInfo.attr.lockedW),{width:i+"px",background:e,fontFamily:t.text.fontFamily,fontSize:this.mUtils.getNewFontSize(t.text.fontSize,this.widgetInfo.attr.lockedW)+"px",color:t.text.color,borderRadius:t.borderRadius+"px",border:t.border>=0?t.border+"px solid "+t.borderColor:"",letterSpacing:t.text.letterSpace+"px",boxShadow:t.shadowOffsetX+"px "+t.shadowOffsetY+"px "+t.shadowBlur+"px "+(t.shadowColor?t.shadowColor:"rgba(0,0,0,0)")}},setStyle(t){let e=this.$refs.form;if(t.chinesename.show&&this.setInputStyle(e,t.chinesename,".chinesename",".chinesenameInput"),t.username.hide!=!0&&this.setInputStyle(e,t.username,".username",".usernameInput"),this.setInputStyle(e,t.password,".password",".passwordInput"),t.mobileCode.enabled==!0){let l=this.$refs.form_mobileCode;this.setInputStyle(l,t.mobileCode.number,".mobile",".mobileInput"),this.setInputStyle(l,t.mobileCode.code,".code",".codeInput"),this.setInputButtonStyle(l,t.mobileCode.code)}if(t.rememberPassword.show){let l=e.$el.querySelector(".rememberPassword").children[0].children[0].children[0];l.children[0].style.borderColor=t.rememberPassword.checkboxColor}t.imageCode.show&&(t.imageCode.code.inside?this.setInputStyle(e,t.imageCode,".imageCode",".imageCodeInputInside"):this.setInputStyle(e,t.imageCode,".imageCode",".imageCodeInputOutside"));let i=e.$el.querySelector("#button");i.style.marginTop=this.mUtils.getNewPxH(t.button.marginTop)+"px",i.children[0].style.marginRight="-"+this.mUtils.getNewPxW(t.button.text.letterSpace,this.widgetInfo.attr.lockedW)+"px"},setInputStyle(t,e,i,l){if(!t)return;if(e.text.show){let H=t.$el.querySelector(i);H.children[0].style.color=e.text.color}let c=t.$el.querySelector(l);c.style.marginTop=this.mUtils.getNewPxH(e.marginTop)+"px",e.opacity?(c.children[0].classList.add("transparent"),e.textAlign&&(c.children[0].style.textAlign=e.textAlign)):(c.children[0].classList.remove("transparent"),c.children[0].style.backgroundColor=e.backgroundColor,e.textAlign&&(c.children[0].style.textAlign=e.textAlign)),e.txtLeft&&(c.children[0].style.paddingLeft=this.mUtils.getNewPxW(e.txtLeft,this.widgetInfo.attr.lockedW)+"px");let w="";w+=e.borderTop>0?e.borderTop+"px ":"0px ",w+=e.borderRight>0?e.borderRight+"px ":"0px ",w+=e.borderBottom>0?e.borderBottom+"px ":"0px ",w+=e.borderLeft>0?e.borderLeft+"px":0,c.children[0].style.borderWidth=w,c.children[0].style.color=e.textColor;let P="";P+=e.borderColorTop?e.borderColorTop+" ":"transparent ",P+=e.borderColorRight?e.borderColorRight+" ":"transparent ",P+=e.borderColorBottom?e.borderColorBottom+" ":"transparent ",P+=e.borderColorLeft?e.borderColorLeft+" ":"transparent ",c.children[0].style.borderColor=P,i==".code"?(c.children[0].style.borderTopLeftRadius=e.borderRadius+"px",c.children[0].style.borderBottomLeftRadius=e.borderRadius+"px"):c.children[0].style.borderRadius=e.borderRadius+"px"},setInputButtonStyle(t,e){if(!t)return;let i=t.$el.querySelector(".el-input-group__append");i.style.cursor="pointer",i.style.border=e.button.border>=0?e.button.border+"px solid "+e.button.borderColor:"0px",i.style.letterSpacing=e.button.letterSpace+"px",i.style.fontFamily=e.button.fontFamily,i.style.fontSize=this.mUtils.getNewFontSize(e.button.fontSize,this.widgetInfo.attr.lockedW)+"px",i.style.color=e.button.color,e.button.backgroundColor?i.style.background=e.button.backgroundColor:i.style.background="#F5F7FA",e.borderRadius&&(i.style.borderTopRightRadius=e.borderRadius+"px",i.style.borderBottomRightRadius=e.borderRadius+"px")},getLabelWidth(t,e){return t?this.mUtils.getNewPxW(e,this.widgetInfo.attr.lockedW)+"px":"0px"},getImageUrl(t){if(t&&t!="")return p.appendImageBaseURL(t)},getCodeValuePropertysByKeys(t){E.Z.baseConfig.isPlatform?z.y.getCodeValuePropertysByKeys({}).then(e=>{e&&e.status==200?this.codeValuePropertysByKeys=e.data:this.showMessage(e.msg),t&&t()}):t&&t()},checkImageCode(){if(E.Z.baseConfig.isPlatform){let t=null,e=this.$$lib__.find(this.codeValuePropertysByKeys,l=>l?.key?.toLowerCase()=="isCodeValueUse".toLowerCase());e&&(t=p.stringToBoolean(e.value));let i=null;t==!0&&this.widgetInfo.config.imageCode.show!=!0?i="\u5F53\u524D\u5E94\u7528\u767B\u5F55\u7CFB\u7EDF\uFF0C\u9700\u8981\u9A8C\u8BC1\u7801\uFF0C\u8BF7\u5C06\u767B\u5F55\u7EC4\u4EF6\u4E2D\u7684\u9A8C\u8BC1\u7801\u5F00\u542F":t!=!0&&this.widgetInfo.config.imageCode.show==!0&&(i="\u5F53\u524D\u5E94\u7528\u767B\u5F55\u7CFB\u7EDF\uFF0C\u4E0D\u9700\u8981\u9A8C\u8BC1\u7801\uFF0C\u8BF7\u5C06\u767B\u5F55\u7EC4\u4EF6\u4E2D\u9A8C\u8BC1\u7801\u7981\u7528"),i!=null&&this.showMessage(i)}},changeLoginType(){this.login_type_index=(this.login_type_index+1)%this.login_type.length,this.showQrCode()},setLoginType(t){this.login_type=["account"],this.login_type_index=0,t.dingd.enabled==!0&&(this.login_type.push("dingd"),t.dingd.default==!0&&(this.login_type_index=this.login_type.length-1)),t.mobileCode.enabled==!0&&(this.login_type.push("mobileCode"),t.mobileCode.default==!0&&(this.login_type_index=this.login_type.length-1))},sendMobileCode(){z.y.sendMobileCode(this.mobileCode.mobile).then(t=>{t&&t.status==200?v.Message.success({message:t.data,offset:60}):this.showMessage(t.msg)})},showMessage(t){T.info("--------",this.widgetInfo.config.button.message.type),this.widgetInfo.config.button.message.type=="text"?this.message=t:this.widgetInfo.config.button.message.type=="box"&&t&&t!=""&&v.Message.error({message:t,offset:60})},typeBtnStyle(t){let e={};return t.typeBtnSize&&t.typeBtnSize!=""&&t.typeBtnSize!=0&&(e.fontSize=t.typeBtnSize+"pt"),t.typeBtnColor&&t.typeBtnColor!=""&&(e.color=t.typeBtnColor),e},multiLogin(t,e){if(t.status.toString()==="302")return!1;if(t.status.toString()==="307"){t.data&&t.data.username&&(this.account.username=t.data.username);let i=this.$$lib__.find(this.codeValuePropertysByKeys,c=>c?.key?.toLowerCase()==U.loginFactorRule.toLowerCase()),l=i&&i.value&&i.value.match(/(?<=;).*(?=:2)/g);return this.multiLoginType=l?.length>0?l[0]:this.widgetInfo.config.multi.type,(!l?.length||this.multiLoginType!=this.widgetInfo.config.multi.type)&&this.showMessage("\u7CFB\u7EDF\u914D\u7F6E\u5F02\u5E38(\u524D\u540E\u7AEF\u914D\u7F6E\u4E0D\u4E00\u81F4)\uFF0C\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458\u3002"),this.$nextTick(()=>{this.showMultiLogin()}),!1}return!0},showMultiLogin(){this.$refs.otp.show(this.account.username)},onMultiLogin(t){if(t.status.toString()!=="200"){t.message=="Bad credentials"?this.showMessage("\u8D26\u53F7\u5BC6\u7801\u6709\u8BEF"):this.showMessage(t.msg||t.message||`\u767B\u5F55\u5931\u8D25(${t.status})\u3002`);return}T.info("---\u767B\u5F55\u6210\u529F(multi)");let e=t.data||t;this.biLogin(e.access_token,"login",i=>{i.data&&i.data.code==1?(this.showMessage(null),this.setSystemParams(e),this.doLogin()):i.data&&i.data.msg?this.showMessage(i.data.msg):this.showMessage("\u7528\u6237\u4FE1\u606F\u5199\u5165localStorage\u5931\u8D25")})},onMultiError(t){v.Message.error(t.message)},registerBoardSaveEvent(){!this.isView&&E.Z.baseConfig.isPlatform&&Q.Z.$emit("register-save-event",{widget:this,handler:this.checkOrSaveMultiConfigToPlatform})},getMultiConfigValue(t){let e="";return t.config.username.hide||(e+="accountPassword:1;"),t.config.dingd.enabled&&(e+="zzdScanCode:1;"),t.config.mobileCode.enabled&&(e+="mobileCode:1;"),t.config.multi.enabled&&t.config.multi.type&&(t.config.multi.type=="otp"?e+="otp:2;":t.config.multi.type=="mobileCode"&&(e+="mobileCode:2;")),e},checkOrSaveMultiConfigToPlatform(t,e){e||(e=this.widgetInfo);let i="";if(E.Z.baseConfig.isPlatform&&!this.isView){let l=this.$$lib__.find(this.codeValuePropertysByKeys,P=>P?.key?.toLowerCase()==U.loginFactorRule.toLowerCase()),c=this.getMultiConfigValue(e),w=l&&l.value&&l.value.indexOf(":2")>-1;if(!w&&!e.config.multi.enabled)return;w!=e.config.multi.enabled?i=e.config.multi.enabled?"\u770B\u677F\u4FDD\u5B58\u540E\u7CFB\u7EDF\u4F1A\u81EA\u52A8\u5F00\u542F\u591A\u56E0\u5B50\u767B\u5F55":"\u770B\u677F\u4FDD\u5B58\u540E\u7CFB\u7EDF\u4F1A\u81EA\u52A8\u5173\u95ED\u591A\u56E0\u5B50\u767B\u5F55":w&&e.config.multi.enabled&&l.value.indexOf(`${e.config.multi.type}:2;`)==-1&&(i=`\u770B\u677F\u4FDD\u5B58\u540E\u7CFB\u7EDF\u4F1A\u542F\u7528[${e.config.multi.type=="otp"?"\u52A8\u6001\u53E3\u4EE4":"\u77ED\u4FE1\u767B\u5F55"}]\u4F5C\u4E3A\u591A\u56E0\u5B50\u767B\u5F55\u65B9\u5F0F`),i&&(t&&!this.isView?i!==this._multiLoginMessage&&(this._multiLoginMessage=i,v.Message.info({message:i,offset:60})):this.saveConfigToPlatform(c))}},saveConfigToPlatform(t){U.getKeyPropertyBySubid(U.loginFactorRule,this.getApplicationId).then(e=>{if(e.status.toString()=="200"&&e.data.total>0){let i=e.data.data[0];i.value=t,this.insertOrUpdateConfig(i)}else U.getKeyValueGroups(this.getApplicationId).then(i=>{if(i.status.toString()=="200"&&i.data.size>0){let l=i.data.data.find(c=>c.type=="\u8FD0\u7EF4\u5E73\u53F0\u53D8\u91CF");if(l)this.insertOrUpdateConfig({value:t},l);else{let c=i.data.data.find(w=>w.parent=="-1");c?U.createKeyValueGroup({caption:"\u8FD0\u7EF4\u5E73\u53F0\u53D8\u91CF",type:"\u8FD0\u7EF4\u5E73\u53F0\u53D8\u91CF",parent:c.id,subGuid:this.getApplicationId,parentGroupName:c.caption}).then(w=>{w.status.toString()=="200"?this.insertOrUpdateConfig({value:t},w.data):this.errorOnUpdateConfig("\u521B\u5EFA\u8FD0\u7EF4\u5E73\u53F0\u53D8\u91CF\u5206\u7EC4\u65F6\u5931\u8D25\uFF1A"+w.msg||0,t)}):this.errorOnUpdateConfig("\u672A\u80FD\u627E\u5230\u7CFB\u7EDF\u914D\u7F6E\u6839\u5206\u7EC4",t)}}else this.errorOnUpdateConfig("\u672A\u80FD\u627E\u5230\u7CFB\u7EDF\u914D\u7F6E\u6839\u5206\u7EC4",t)})})},insertOrUpdateConfig(t,e){T.log("insertOrUpdateConfig",t,e),t&&t.id?(t.subGuid=this.getApplicationId,t.fieldtype&&(t.fieldType=t.fieldtype,delete t.fieldtype),U.updateKey(t).then(i=>{T.log("updateKey",i);let l=this.$$lib__.find(this.codeValuePropertysByKeys,c=>c?.key?.toLowerCase()==U.loginFactorRule.toLowerCase());l?l.value=i.data.value:this.codeValuePropertysByKeys.push(i.data)})):U.createKey({caption:"\u591A\u56E0\u5B50\u767B\u5F55\u89C4\u5219",fieldType:"string",groupId:e.id,key:U.loginFactorRule,subGuid:this.getApplicationId,value:t.value}).then(i=>{T.log("insertKey",i);let l=this.$$lib__.find(this.codeValuePropertysByKeys,c=>c?.key?.toLowerCase()==U.loginFactorRule.toLowerCase());l?l.value=i.data.value:this.codeValuePropertysByKeys.push(i.data)})},errorOnUpdateConfig(t,e){this.updateConfigMessage&&this.updateConfigMessage.close(),this.updateConfigMessage=v.Message.warning({duration:0,showClose:!0,dangerouslyUseHTMLString:!0,message:`<div style="line-height:1.2;">
\u81EA\u52A8\u66F4\u65B0\u7CFB\u7EDF\u914D\u7F6E\u5931\u8D25:
<div style="width:100%;display:inline-block;overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;" title="${t}">${t}</div>
<br/>
\u8BF7\u6309\u7167\u8BF4\u660E\u8FDB\u884C\u540E\u7AEF\u914D\u7F6E:<br/>
1. \u6253\u5F00 \u5E94\u7528\u8BBE\u8BA1\u9875\u9762\uFF0C\u9009\u62E9 \u5E94\u7528\u914D\u7F6E/\u53D8\u91CF\u8BBE\u7F6E \u83DC\u5355:<br/>
2. \u6DFB\u52A0\u53D8\u91CF\u914D\u7F6E\u5206\u7EC4 \u8FD0\u7EF4\u5E73\u53F0\u53D8\u91CF (\u5982\u679C\u5206\u7EC4\u5DF2\u5B58\u5728\u5219\u4E0D\u9700\u8981\u6DFB\u52A0)<br/>
3. \u6DFB\u52A0\u6216\u4FEE\u6539\u914D\u7F6E\u9879\uFF1A<br/><br/>
&nbsp;&nbsp;\u952E(key): ${U.loginFactorRule}<br/>
&nbsp;&nbsp;\u952E\u540D\u79F0: \u591A\u56E0\u5B50\u767B\u5F55\u89C4\u5219<br/>
&nbsp;&nbsp;\u503C(value): ${e}
  <br/><br/>
  \u914D\u7F6E\u5B8C\u6210\u540E\uFF0C\u8BF7\u5237\u65B0\u672C\u9875\u9762
</div>
`})}}},ee=j,te=(0,b.Z)(ee,y,C,!1,null,"2f149589",null),ie=te.exports},316292:function(W,S,f){"use strict";W.exports=f.p+"static/img/google-logo.84bf09c1.svg"}}]);
