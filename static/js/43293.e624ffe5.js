"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[43293],{459738:function(_,d,r){r.d(d,{OW:function(){return h},m3:function(){return v},nm:function(){return c},vP:function(){return m},xC:function(){return g}});var p=r(153258);function h(a,n,i){let o=a;const l=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(f=>(0,p.mf)(o[f]));if(!(0,p.mf)(o[l]))return!1;do{if(o[l](n))return!0;if(o===i)return!1;o=o.parentNode}while(o);return!1}function c(a){const n=window.getComputedStyle(a);return[parseFloat(n.getPropertyValue("width"),10),parseFloat(n.getPropertyValue("height"),10)]}function m(a,n,i){a&&(a.attachEvent?a.attachEvent("on"+n,i):a.addEventListener?a.addEventListener(n,i,!0):a["on"+n]=i)}function g(a,n,i){a&&(a.detachEvent?a.detachEvent("on"+n,i):a.removeEventListener?a.removeEventListener(n,i,!0):a["on"+n]=null)}function v(a,n,i,o){var l=0,f=setInterval(()=>{l<i?(l++,a()):(clearInterval(f),o&&o())},n);return f}},997556:function(_,d,r){r.r(d),r.d(d,{default:function(){return L}});var p=function(){var e=this,s=e._self._c;return s("div",[s("ShineMap",{ref:"gismap",staticStyle:{"pointer-events":"none"},attrs:{"widget-info":e.widgetInfo},scopedSlots:e._u([{key:"default",fn:function(t){return[s("EditorContainer",{ref:"container",attrs:{"widget-info":t.widgetInfo,"widget-arr":e.getWidgetAllArr}})]}}])})],1)},h=[],c=r(148836),m=r(509848),g=function(){var e=this,s=e._self._c;return s("div",{ref:"container"},e._l(e.orgWidget(e.widgetInfo.config.widgets),function(t){return s("Draggable",{directives:[{name:"show",rawName:"v-show",value:t.attr.hideEditor!==!0,expression:"widget.attr.hideEditor !== true"}],key:e.prefix.widget+t.id,ref:e.prefix.widget+t.id,refInFor:!0,attrs:{id:e.prefix.widget+t.id,rotatable:!0,resizable:!t.attr.locked,draggable:!t.attr.locked,snap:!0,x:t.attr.x,y:t.attr.y,z:e.getZ(t),r:t.attr.deg,h:e.getdraggableHW(t).h,w:e.getdraggableHW(t).w,minw:t.attr.minw,minh:t.attr.minh,"deselect-cancel":".unboardArea",active:e.onActive(t)},on:{onClicked:e.onClicked,dragstop:e.onDragstop,resizestop:e.onResizstop,rotatestop:e.onRotatestop}},[s("widget-action-icon",{attrs:{widget:t}}),s("div",{style:e.getDraggableMouseOver(t)}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:e.getDraggableStyle(t)},[s("external-frame-svg",{ref:"comp_frame_"+t.id,refInFor:!0,attrs:{"widget-info":t}}),t.title.position==="top"||t.title.position==="left"?s("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(t),on:{click:function(W){return e.openLink(t)}}},[s("div",{style:{marginLeft:t.title.label.left+"px",marginTop:t.title.label.top+"px"}},[s("span",{ref:"title_"+t.id,refInFor:!0,style:e.getTitleSpanStyle(t)})])]):e._e(),s("draggable-component-container",{ref:"comp_"+t.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:e.getInfoStyle(t),attrs:{"widget-data":t,"current-widget":e.getCurrentWidget}}),t.title.position==="bottom"||t.title.position==="right"?s("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(t),on:{click:function(W){return e.openLink(t)}}},[s("div",{style:{marginLeft:t.title.label.left+"px",marginTop:t.title.label.top+"px"}},[s("span",{ref:"title_"+t.id,refInFor:!0,style:e.getTitleSpanStyle(t)})])]):e._e()],1)],1)}),1)},v=[],a=r(787479),n=r(980512),i=r(723400),o=r(483577),l=r(213743),f=r(386892),b=r(629466),S={name:"EditorContainer",components:{Draggable:a.Z,DraggableComponentContainer:n.Z,ExternalFrameSvg:l.Z,WidgetActionIcon:b.Z},mixins:[i.j,f.D,o.i],props:["widgetInfo","widgetArr"],data(){return{prefix:{widget:"widget_"}}},computed:{...(0,c.Se)(["getWidgets"])},beforeDestroy(){this.$refs.container.remove()},mounted(){document.getElementById("page_"+this.widgetInfo.pageId).appendChild(this.$refs.container)},methods:{...(0,c.nv)(["setCurrentWidget"]),doSetCurrentWidgetId(u){this.$nextTick(()=>{this.setCurrentWidget(u)})},loadInfo(){}}},I=S,y=r(768141),w=(0,y.Z)(I,g,v,!1,null,null,null),E=w.exports,C=r(149500),D={name:"GisMap",components:{ShineMap:m.Z,EditorContainer:E},props:{widgetInfo:{type:Object,default:()=>({})}},data(){return{}},computed:{...(0,c.Se)(["getWidgetAllArr"])},methods:{reLoadInfo(u){this.$refs.container&&this.$refs.container.reLoadInfo(u),this.$refs.gismap.reLoadInfo(u)},getMap(){return this.$refs.gismap.$refs.gismap.map},getEarth(){return this.$refs.gismap.$refs.gismap.earth}},mounted(){C.log("gis-map mounted")}},x=D,A=(0,y.Z)(x,p,h,!1,null,null,null),L=A.exports},629466:function(_,d,r){r.d(d,{Z:function(){return a}});var p=function(){var i=this,o=i._self._c;return i.action_info.is_action?o("div",{staticClass:"widget-action-icon"},[o("el-tooltip",{attrs:{"open-delay":1e3,effect:"light",placement:"top"}},[o("div",{attrs:{slot:"content"},slot:"content"},[o("el-table",{attrs:{data:i.action_info.tableData,"span-method":i.objectSpanMethod,border:"",size:"mini",stripe:""}},[o("el-table-column",{attrs:{label:"\u4E8B\u4EF6\u7C7B\u578B",prop:"action_type"}}),o("el-table-column",{attrs:{label:"\u4E8B\u4EF6\u540D\u79F0",prop:"action_name"}})],1)],1),o("i",{staticClass:"iconfont bi_jh"})])],1):i._e()},h=[],c={name:"widget-action-icon",props:["widget"],data(){return{action_info:{is_action:!1,tableData:[]},position:0,rowSpanArr:[]}},watch:{widget:{deep:!0,handler:function(){this.initInfo()}}},mounted(){this.initInfo()},methods:{initInfo(){if(this.action_info.is_action=!1,this.action_info.tableData=[],this.widget&&this.widget.action){if(this.widget.action.lifecycle)for(let n in this.widget.action.lifecycle)this.widget.action.lifecycle[n].enabled&&(this.action_info.is_action=!0,this.action_info.tableData.push({action_type:"\u751F\u547D\u5468\u671F",action_name:this.widget.action.lifecycle[n].name}));if(this.widget.action.sendOut&&this.widget.action.sendOut.actionList&&this.$$lib__.each(this.widget.action.sendOut.actionList,n=>{n.enabled==!0&&(this.action_info.is_action=!0,this.action_info.tableData.push({action_type:"\u53D1\u9001\u4E8B\u4EF6",action_name:n.name}))}),this.widget.action.receive)for(let n in this.widget.action.receive)this.widget.action.receive[n].enabled&&(this.action_info.is_action=!0,this.action_info.tableData.push({action_type:"\u63A5\u6536\u4E8B\u4EF6",action_name:this.widget.action.receive[n].name}))}this.rowSpanArr=[],this.action_info.tableData.forEach((n,i)=>{i==0?(this.rowSpanArr.push(1),this.position=0):this.action_info.tableData[i].action_type==this.action_info.tableData[i-1].action_type?(this.rowSpanArr[this.position]+=1,this.rowSpanArr.push(0),this.action_info.tableData[i].action_type=this.action_info.tableData[i-1].action_type):(this.rowSpanArr.push(1),this.position=i)})},objectSpanMethod({row:n,column:i,rowIndex:o,columnIndex:l}){if(l!=1)return{rowspan:this.rowSpanArr[o],colspan:1}}}},m=c,g=r(768141),v=(0,g.Z)(m,p,h,!1,null,"cd1e86ee",null),a=v.exports}}]);
