"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[9505],{56279:function(F,y,l){l.d(y,{P:function(){return w}});var S=l(86892),m=l(49500);const w={mixins:[S.D],created(){},methods:{lifecycleBeforeChartsLoad(b){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&m.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),m.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let f=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[b]);if(f)return f}return b},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&m.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),m.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},34580:function(F,y,l){l.d(y,{Z:function(){return z}});var S=function(){var s=this,p=s._self._c;return p("span",[s._v(" "+s._s(s.displayValue)+" ")])},m=[];let w=0;const b="webkit moz ms o".split(" ");let h,f;if(typeof window>"u")h=function(){},f=function(){};else{h=window.requestAnimationFrame,f=window.cancelAnimationFrame;let d;for(let s=0;s<b.length&&!(h&&f);s++)d=b[s],h=h||window[d+"RequestAnimationFrame"],f=f||window[d+"CancelAnimationFrame"]||window[d+"CancelRequestAnimationFrame"];(!h||!f)&&(h=function(s){const p=new Date().getTime(),k=Math.max(0,16-(p-w)),C=window.setTimeout(()=>{s(p+k)},k);return w=p+k,C},f=function(s){window.clearTimeout(s)})}var A={name:"count-to",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:2,validator(d){return d>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(d,s,p,k){return p*(-Math.pow(2,-10*d/k)+1)*1024/1023+s}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{decimals(){this.start()},startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=h(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){f(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,h(this.count)},reset(){this.startTime=null,f(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(d){this.startTime||(this.startTime=d),this.timestamp=d;const s=d-this.startTime;this.remaining=this.localDuration-s,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(s,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(s,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(s/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(s/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),s<this.localDuration?this.rAF=h(this.count):this.$emit("callback")},isNumber(d){return!isNaN(parseFloat(d))},formatNumber(d){d=d.toFixed(this.decimals),d+="";const s=d.split(".");let p=s[0];const k=s.length>1?this.decimal+s[1]:"",C=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;C.test(p);)p=p.replace(C,"$1"+this.separator+"$2");return this.prefix+p+k+this.suffix}},destroyed(){f(this.rAF)}},I=A,c=l(68141),v=(0,c.Z)(I,S,m,!1,null,"696c34af",null),z=v.exports},44513:function(F,y,l){l.d(y,{Z:function(){return A}});var S=function(){var c=this,v=c._self._c;return c.attr.buttonHide?v("div",{style:{position:"absolute",right:c.attr.buttonHideRight+"px",top:c.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(z){return c.onHide()}}},[c.openTooltip?v("el-tooltip",{attrs:{"open-delay":1e3,content:c.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[v("el-button",{class:c.attr.buttonHideIconClass&&c.attr.buttonHideIconClass!=""?c.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:c.attr.buttonHideColor,fontSize:c.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):v("el-button",{class:c.attr.buttonHideIconClass&&c.attr.buttonHideIconClass!=""?c.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:c.attr.buttonHideColor,fontSize:c.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):c._e()},m=[],w=l(52246),b={props:["attr"],name:"hide-button",data(){return{isPc:w.b}},computed:{openTooltip:function(){let I=!1,c=this.attr.buttonHideTooltipContent;return w.b&&c&&c!=null&&c.trim()!=""&&(I=!0),I}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},h=b,f=l(68141),N=(0,f.Z)(h,S,m,!1,null,"bf399b9a",null),A=N.exports},9099:function(F,y,l){l.r(y),l.d(y,{default:function(){return O}});var S=function(){var i=this,e=i._self._c;return e("div",{ref:"listPaneText",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px",overflow:i.widgetInfo.config.global.openNextPage?"auto":"hidden"}},[e("hide-button",{attrs:{attr:i.widgetInfo.attr}}),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:i.resolveScroll,expression:"resolveScroll"}],staticClass:"list-pane-content",style:{overflow:i.widgetInfo.config.global.openNextPage?"auto":"",paddingLeft:i.mUtils.getNewPxW(i.widgetInfo.config.global.padding.left,i.widgetInfo)+"px",paddingTop:i.mUtils.getNewPxH(i.widgetInfo.config.global.padding.top,i.widgetInfo)+"px"}},i._l(i.totalListInfo,function(a,n){return e("div",{key:n,ref:"contentArea",refInFor:!0,style:i.getContentAreaStyle(i.widgetInfo.config.contentArea),on:{mouseenter:function(o){return i.setContentAreaStyle("enter",n)},mouseleave:function(o){return i.setContentAreaStyle("leave",n)}}},[e("div",{style:i.getTitleAreaStyle(i.widgetInfo.config.contentArea.title,i.widgetInfo.action,"",n),on:{click:function(o){i.onClick("areaTitle",a.area.title!=null?a.area.title:i.widgetInfo.config.contentArea.title.text,n)}}},[e("div",{class:"tspan-"+n,style:i.getTitleSpanStyle(i.widgetInfo.config.contentArea.title)},[e("span",[i._v(i._s(a.area.title!=null?a.area.title:i.widgetInfo.config.contentArea.title.text)+" ")])])]),i._l(i.widgetInfo.config.content,function(o,r){return e("div",{key:r,style:i.getContentStyle(o,i.widgetInfo.action,o.id,n),on:{click:function(g){i.onClick(o.id,i.$$lib__.isNaN(a.content[o.id].number)?"":a.content[o.id].number,n)}}},[e("div",{class:"title-"+n+"-"+r,style:i.getContentTitleStyle(o.title)},[e("span",[i._v(i._s(a.content[o.id].title!=null?a.content[o.id].title:o.title.text)+" ")])]),e("div",[e("div",{class:"prefix-"+n+"-"+r,style:i.getStylePrefix(o.prefix)},[e("span",[i._v(" "+i._s(o.prefix.lable)+" ")])]),e("el-tooltip",{attrs:{disabled:i.getShowTooltip(o.number,a.content[o.id].number),"open-delay":200,content:a.content[o.id].number+"",effect:o.number.effect,placement:"top"}},[i.$$lib__.isNaN(parseFloat(a.content[o.id].number))?e("div",[e("div",{class:"number-"+n+"-"+r,style:i.getStyleNumber(o.number)},[e("span",{directives:[{name:"show",rawName:"v-show",value:!!a.content[o.id].number,expression:"Boolean(li.content[con.id].number) "}]},[i._v(i._s(a.content[o.id].number))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!a.content[o.id].number,expression:"!Boolean(li.content[con.id].number)"}]},[i._v("-")])])]):e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:o.number.text,expression:"con.number.text"}]},[e("div",{class:"number-"+n+"-"+r,style:i.getStyleNumber(o.number)},[e("count-to",{directives:[{name:"show",rawName:"v-show",value:!i.$$lib__.isNaN(parseFloat(a.content[o.id].number)),expression:"! $$lib__.isNaN(parseFloat(li.content[con.id].number))"}],ref:"countTo",refInFor:!0,attrs:{endVal:parseFloat(a.content[o.id].number),duration:o.number.duration,decimals:o.number.decimals}}),e("span",{directives:[{name:"show",rawName:"v-show",value:i.$$lib__.isNaN(parseFloat(a.content[o.id].number)),expression:"$$lib__.isNaN(parseFloat(li.content[con.id].number))"}]},[i._v("-")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:!o.number.text,expression:"!con.number.text"}]},[e("div",{class:"number-"+n+"-"+r,style:i.getStyleNumber(o.number)},[o.number.scriptEnabled==!0?[e("span",{domProps:{innerHTML:i._s(i.getHtml(o,a.content[o.id].number))}})]:[e("span",{directives:[{name:"show",rawName:"v-show",value:!!a.content[o.id].number,expression:"Boolean(li.content[con.id].number) "}]},[i._v(i._s(a.content[o.id].number))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!a.content[o.id].number,expression:"!Boolean(li.content[con.id].number)"}]},[i._v("-")])]],2)])])]),e("div",{class:"suffix-"+n+"-"+r,style:i.getStyleSuffix(o.suffix)},[e("span",[i._v(" "+i._s(o.suffix.lable)+" ")])])],1)])})],2)}),0)],1)},m=[],w=l(42160),b=l(21300),h=l(34580),f=l(27966),N=l(93575),A=l(45061),I=l(26711),c=l(56279),v=l(8662),z=l(44513),d=l(16033),s=l(55616),p=l(67157);const k={mixins:[p.c],data(){return{config_extend:{config:{contentArea:{title:{hide:!0}},content:[{title:{left:12,top:5},prefix:{w:30}}]}},filter_config:{contentArea:{opacity:1,title:{opacity:1,label:{fontFamily:"Microsoft Yahei",color:"rgba(63, 67, 74, 1)",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}}},content:[{title:{opacity:1,label:{fontFamily:"alibabaPuHuiTiRegular",color:"#303133",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}},prefix:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"},number:{fontFamily:"alibabaPuHuiTiMedium",color:"#4C84FF",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"},suffix:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}}]}}},methods:{filterPredefineColoursSchemeConfig(t,i){this.getNewConfigWithArrary(t,i,this.filter_config)}}};var C=l(48836),x=l(49500),H={name:"list-pane-text",props:["widgetInfo"],components:{CountTo:h.Z,HideButton:z.Z},mixins:[d.u,A.u,I.H,c.P,N.E,k,v.j],data(){return{current:null,pageData:[],isLoading:!1,clickArea:{index:-1,selected:!1},widgetsList:[]}},computed:{...(0,C.Se)(["getCanvasSettingInfo","getCanvasSetting","getWidgets"]),totalListInfo:function(){return this.widgetInfo.config.global.openNextPage?[...this.pageData,...this.listInfo]:this.listInfo},listInfo:function(){return this.getListInfo(this.widgetInfo.dataset[this.widgetInfo.dataset.type],this.widgetInfo.config.contentArea,this.widgetInfo.config.content)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)},listInfo:function(t,i){this.isLoading&&(this.pageData=[...this.pageData,...i],this.isLoading=!1)}},methods:{loadInfo(t){this.sendTotal(t),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.widgetsList=this.getWidgetsList(),this.actionReceive(t);let i=t.action.receive.activeArea;i&&i.enabled&&this.doActiveArea(i.activeList,t)},doActiveArea(t,i){this.$$lib__.each(t,e=>{let a=e[0][0],n=e[0][1],o=e[0][2];if(o){let r=o.indexOf("|");r>-1&&(o=e[0][2].substring(r+1))}f.Z.$on(n,r=>{r||(r={}),r.widget_key=a,r.widget_name=this.getNameByKey(a),r.action_key=n,r.action_name=this.getNameByKey(n),i.action.receive.activeArea.script&&i.action.receive.activeArea.script.enabled?(x.log("Execute the script to execute model to the "+i.name+" component"),new Function("selfInfo","bizInfo","listInfo",i.action.receive.activeArea.script.content).apply(this,[i,r,this.totalListInfo])):this.activeArea(i,r,this.totalListInfo)})})},activeArea(t,i,e){let a=this;i.areaId&&e.forEach(function(n,o){n.area.key==i.areaId&&a.setContentAreaStyle("active",o)})},getListInfo(t,i,e){let a=[];return t.source.length||(t.source=[""]),this.$$lib__.each(t.source,n=>{let o={area:{title:"",key:""},content:{}};o.area.title=this.getFieldVal(n,t.dimensions,i.title.encode.field),i.title.encode.key!=""&&(o.area.key=this.getFieldVal(n,t.dimensions,i.title.encode.key)),this.$$lib__.each(e,r=>{let g={title:"",number:""};g.title=this.getFieldVal(n,t.dimensions,r.title.encode.field);let $=this.getFieldVal(n,t.dimensions,r.number.encode.field);g.number=$,w.default.set(o.content,r.id,g)}),a.push(o)}),a},resolveScroll(){this.widgetInfo.config.global.openNextPage&&this.widgetInfo.dataset.type!==this.$$global_editor.dataSourcType.static.code&&(this.isLoading||this.widgetInfo.dataset.dynamic.query.page.pageNum*this.widgetInfo.dataset.dynamic.query.page.pageSize>=this.widgetInfo.dataset.dynamic.total||(this.widgetInfo.dataset.dynamic.query.page.pageNum+=1,this.isLoading=!0,this.$emit("doGetPreviewData",this.widgetInfo)))},getContentAreaStyle(t){return{float:"left",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",height:this.mUtils.getNewPxH(t.h,this.widgetInfo)+"px",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",opacity:t.opacity,backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(t.backgroundImage),backgroundSize:t.backgroundSize}},getTitleAreaStyle(t,i,e,a){let n={height:this.mUtils.getNewPxH(t.h,this.widgetInfo)+"px",opacity:t.opacity,display:t.hide==!0?"none":"",paddingLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",paddingTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(t.backgroundImage),backgroundSize:t.backgroundSize,cursor:this.getCursor(i,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code,e)};return e+a===this.current&&(this.widgetInfo.config.contentArea.activeBackground.backgroundColor||this.widgetInfo.config.contentArea.activeBackground.backgroundImage)&&(n.backgroundColor=this.widgetInfo.config.contentArea.activeBackground.backgroundColor,n.backgroundImage=this.getImageUrl(this.widgetInfo.config.contentArea.activeBackground.backgroundImage),n.backgroundSize=this.widgetInfo.config.contentArea.activeBackground.backgroundSize),n},getTitleSpanStyle(t){let i={fontSize:this.mUtils.getNewFontSize(t.label.fontSize)+"px",fontFamily:t.label.fontFamily,color:t.label.color,fontWeight:t.label.fontWeight,fontStyle:t.label.fontStyle,textDecoration:t.label.textDecoration,textAlign:t.label.horizontalAlignment},e=t.label;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getContentStyle(t,i,e,a){let n={float:"left",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",height:this.mUtils.getNewPxH(t.h,this.widgetInfo)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(t.backgroundImage),backgroundSize:t.backgroundSize,cursor:this.getCursor(i,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code,e)};return e+a===this.current&&(this.widgetInfo.config.contentArea.activeBackground.backgroundColor||this.widgetInfo.config.contentArea.activeBackground.backgroundImage)&&(n.backgroundColor=this.widgetInfo.config.contentArea.activeBackground.backgroundColor,n.backgroundImage=this.getImageUrl(this.widgetInfo.config.contentArea.activeBackground.backgroundImage),n.backgroundSize=this.widgetInfo.config.contentArea.activeBackground.backgroundSize),n},getContentTitleStyle(t){let i={height:this.mUtils.getNewPxH(t.h,this.widgetInfo)+"px",opacity:t.opacity,display:t.hide==!0?"none":"",paddingLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",paddingTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",backgroundColor:t.backgroundColor,backgroundImage:this.getImageUrl(t.backgroundImage),backgroundSize:t.backgroundSize,fontSize:this.mUtils.getNewFontSize(t.label.fontSize)+"px",fontFamily:t.label.fontFamily,color:t.label.color,fontWeight:t.label.fontWeight,fontStyle:t.label.fontStyle,textDecoration:t.label.textDecoration,textAlign:t.label.horizontalAlignment},e=t.label;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStylePrefix(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleNumber(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"keep-all"},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleSuffix(t){let i={wordWrap:"break-word",float:"left",display:t.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.w,this.widgetInfo)+"px",marginLeft:this.mUtils.getNewPxW(t.left,this.widgetInfo)+"px",marginTop:this.mUtils.getNewPxH(t.top,this.widgetInfo)+"px",fontSize:this.mUtils.getNewFontSize(t.fontSize)+"px",color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,textDecoration:t.textDecoration,textAlign:t.horizontalAlignment},e=t;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getShowTooltip(t,i){if(t.showTooltip){let e=0;return t.text&&!isNaN(parseFloat(i))?e=parseInt(i).toString().length+t.decimals:e=i.toString().length,isNaN(parseFloat(i))?t.w-e*t.fontSize>0:t.w-e*t.fontSize/3*2>0}else return!0},onClick(t,i,e){let a=this,n=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(n,o=>{if(o.enabled&&(t=="areaTitle"||o.contentId==t)&&o.code.indexOf(a.$$global_editor.actionType.click.code)>-1){a.widgetInfo.config.contentArea.activeCancel&&a.current==t+e?a.current="":a.current=t+e;let r=o.code+"_"+a.widgetInfo.id,g={text:i};if(g.checked=a.current!="",o.paramsExtend&&o.paramsExtend.length>0&&a.getExtendParams(g,o.paramsExtend,a.widgetInfo.dataset[a.widgetInfo.dataset.type].source[e],a.widgetInfo.dataset[a.widgetInfo.dataset.type].dimensions),o.script&&o.script.enabled){if(x.log("Execute script for "+o.name+" component to "+o.script.title+" component"),o.script.content==""){s.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}a.customScript_actionSend_clickParam=new Function("params",o.script.content),g=a.customScript_actionSend_clickParam(g)}x.log(g),f.Z.$emit(r,g),o.postMessage&&a.doPostMessage(g),a.actionNameList.push(r)}else if(o.enabled&&(t=="areaTitle"||o.contentId==t)&&o.code.indexOf(a.$$global_editor.actionType.openLink.code)>-1){a.widgetInfo.config.contentArea.activeCancel&&a.current==t+e?a.current="":a.current=t+e;let r={};if(r.checked=a.current!="",o.paramsExtend&&o.paramsExtend.length>0&&a.getExtendParams(r,o.paramsExtend,a.widgetInfo.dataset[a.widgetInfo.dataset.type].source[e],a.widgetInfo.dataset[a.widgetInfo.dataset.type].dimensions),o.type===this.$$global_editor.linkType.dynamic.code&&(o[a.$$global_editor.linkType.dynamic.code].url=a.getActionUrl(o,a.widgetInfo.dataset[a.widgetInfo.dataset.type].source[e],a.widgetInfo.dataset[a.widgetInfo.dataset.type].dimensions)),o.script&&o.script.enabled){if(x.log("Execute script for "+o.name+" component to "+o.script.title+" component"),o.script.content==""){s.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}a.customScript_actionSend_clickParam=new Function("params",o.script.content),r=a.customScript_actionSend_clickParam(r)}a.openLinkAction(o,r)}}),this.$nextTick(function(){a.setContentAreaStyle("active",e)})},replaceEmptyStyle(){let t=this.widgetInfo.config.contentArea;(!t.backgroundColor||t.backgroundColor==null)&&(t.backgroundColor=""),(!t.backgroundImage||t.backgroundImage==null)&&(t.backgroundImage=""),(!t.backgroundSize||t.backgroundSize==null)&&(t.backgroundSize=""),t.activeBackground||(t.activeBackground={}),(!t.activeBackground.backgroundColor||t.activeBackground.backgroundColor==null)&&(t.activeBackground.backgroundColor=""),(!t.activeBackground.backgroundImage||t.activeBackground.backgroundImage==null)&&(t.activeBackground.backgroundImage=""),(!t.activeBackground.backgroundSize||t.activeBackground.backgroundSize==null)&&(t.activeBackground.backgroundSize=""),t.allActiveBackground||(t.allActiveBackground={}),(!t.allActiveBackground.backgroundColor||t.allActiveBackground.backgroundColor==null)&&(t.allActiveBackground.backgroundColor=""),(!t.allActiveBackground.backgroundImage||t.allActiveBackground.backgroundImage==null)&&(t.allActiveBackground.backgroundImage=""),(!t.allActiveBackground.backgroundSize||t.allActiveBackground.backgroundSize==null)&&(t.allActiveBackground.backgroundSize=""),t.hoverStyle||(t.hoverStyle={}),(!t.hoverStyle.backgroundColor||t.hoverStyle.backgroundColor==null)&&(t.hoverStyle.backgroundColor=""),(!t.hoverStyle.backgroundImage||t.hoverStyle.backgroundImage==null)&&(t.hoverStyle.backgroundImage=""),(!t.hoverStyle.backgroundSize||t.hoverStyle.backgroundSize==null)&&(t.hoverStyle.backgroundSize=""),(!t.hoverStyle.color||t.hoverStyle.color==null)&&(t.hoverStyle.color="")},setContentAreaStyle(t,i){this.replaceEmptyStyle();let e=this.widgetInfo.config.contentArea;if(t=="active")for(let n=0;n<this.$refs.contentArea.length;n++){let o=this.$refs.contentArea[n];n==i?(this.clickArea.index!=i||!this.clickArea.selected?(e.allActiveBackground.backgroundColor!=""&&(o.style.backgroundColor=e.allActiveBackground.backgroundColor),e.allActiveBackground.backgroundImage!=""&&(o.style.backgroundImage=this.getImageUrl(e.allActiveBackground.backgroundImage)),e.allActiveBackground.backgroundSize!=""&&(o.style.backgroundSize=e.allActiveBackground.backgroundSize),this.clickArea.selected=!0):e.activeCancel&&(o.style.backgroundColor=e.backgroundColor,o.style.backgroundImage=this.getImageUrl(e.backgroundImage),o.style.backgroundSize=e.backgroundSize,this.clickArea.selected=!1),this.clickArea.index=i):(o.style.backgroundColor=e.backgroundColor,o.style.backgroundImage=this.getImageUrl(e.backgroundImage),o.style.backgroundSize=e.backgroundSize),this.setHoverFontColor(!1,o,i)}let a=!1;if(e.hoverStyle&&(e.hoverStyle.backgroundColor!=""||e.hoverStyle.backgroundImage!=""||e.hoverStyle.backgroundSize!=""||e.hoverStyle.color!="")&&(a=!0),a){for(let n=0;n<this.$refs.contentArea.length;n++){let o=this.$refs.contentArea[n];t=="enter"&&n==i?(e.hoverStyle.backgroundColor!=""&&(o.style.backgroundColor=e.hoverStyle.backgroundColor),e.hoverStyle.backgroundImage!=""&&(o.style.backgroundImage=this.getImageUrl(e.hoverStyle.backgroundImage)),e.hoverStyle.backgroundSize!=""&&(o.style.backgroundSize=e.hoverStyle.backgroundSize),e.hoverStyle.color!=""&&this.setHoverFontColor(!0,o,i)):this.clickArea.index!=n&&(o.style.backgroundColor=e.backgroundColor,o.style.backgroundImage=this.getImageUrl(e.backgroundImage),o.style.backgroundSize=e.backgroundSize,this.setHoverFontColor(!1,o,i))}t=="leave"&&(this.clickArea.index==i&&this.clickArea.selected?(e.allActiveBackground.backgroundColor!=""?this.$refs.contentArea[i].style.backgroundColor=e.allActiveBackground.backgroundColor:this.$refs.contentArea[i].style.backgroundColor=e.backgroundColor,e.allActiveBackground.backgroundImage!=""?this.$refs.contentArea[i].style.backgroundImage=this.getImageUrl(e.allActiveBackground.backgroundImage):this.$refs.contentArea[i].style.backgroundImage=this.getImageUrl(e.backgroundImage),e.allActiveBackground.backgroundSize!=""?this.$refs.contentArea[i].style.backgroundSize=e.allActiveBackground.backgroundSize:this.$refs.contentArea[i].style.backgroundSize=e.backgroundSize):(this.$refs.contentArea[i].style.backgroundColor=e.backgroundColor,this.$refs.contentArea[i].style.backgroundImage=this.getImageUrl(e.backgroundImage),this.$refs.contentArea[i].style.backgroundSize=e.backgroundSize),this.setHoverFontColor(!1,this.$refs.contentArea[i],i))}},setHoverFontColor(t,i,e){this.replaceEmptyStyle();let a=this.widgetInfo.config.contentArea;if(a.hoverStyle&&a.hoverStyle.color!="")for(let n=0;n<this.widgetInfo.config.content.length;n++){let o=this.widgetInfo.config.content[n],r=i.querySelectorAll(".suffix-"+e+"-"+n),g=i.querySelectorAll(".number-"+e+"-"+n),$=i.querySelectorAll(".prefix-"+e+"-"+n),V=i.querySelectorAll(".title-"+e+"-"+n),U=i.querySelectorAll(".tspan-"+e),B="",T="",_="",L="",P="";t?B=T=_=L=P=a.hoverStyle.color:(B=o.suffix.color,T=o.number.color,_=o.prefix.color,L=P=o.title.label.color);for(let u=0;u<r.length;u++)r[u].style.color=B;for(let u=0;u<g.length;u++)g[u].style.color=T;for(let u=0;u<$.length;u++)$[u].style.color=_;for(let u=0;u<V.length;u++)V[u].style.color=L;for(let u=0;u<U.length;u++)U[u].style.color=P}},getCursor(t,i,e,a){let n="default";if(t==null||t.sendOut==null||t.sendOut.actionList==null)return n;let o=t.sendOut.actionList;return this.$$lib__.find(o,g=>g.contentId==a&&(g.code.indexOf(i)>-1||g.code.indexOf(e)>-1)&&g.enabled)&&(n="pointer"),n},getImageUrl(t){return t&&t!=""?"url("+b.appendImageBaseURL(t)+")":""},getHtml(t,i){(!t.number.scriptContent||t.number.scriptContent=="")&&x.warn("\u5185\u5BB9\uFF1A"+t.lable+"\u7684\u811A\u672C\u4E3A\u7A7A"),x.info("\u6267\u884C\u5185\u5BB9\uFF1A"+t.lable+"\u7684\u811A\u672C\u4E3A\u7A7A");let a=new Function("content","text",t.number.scriptContent).apply(this,[t,i]);return a||i},getWidgetsList(){let t=[];for(let i in this.getWidgets){let e=this.getWidgets[i];if(e.action&&e.action.sendOut&&e.action.sendOut.actionList){let a=[];this.$$lib__.each(e.action.sendOut.actionList,n=>{let o={value:n.code+"_"+i,label:n.name};if(this.is_bind_param){o.children=[];for(let r in n.params)o.children.push({value:n.code+"_"+i+"|"+r,label:r})}a.push(o)}),a.length>0&&t.push({value:e.id,label:e.name,children:a})}}if(this.getCanvasSetting.action&&this.getCanvasSetting.action.sendOut){let i=[];this.$$lib__.each(this.getCanvasSetting.action.sendOut.actionList,e=>{let a={value:e.code+"_canvas",label:e.name};if(this.is_bind_param){a.children=[];for(let n in e.params)a.children.push({value:e.code+"_canvas|"+n,label:n})}i.push(a)}),i.length>0&&t.push({value:this.$$global.sysGuid.datavisual.canvasId,label:this.$$global.sysGuid.datavisual.canvasName,children:i})}return t},getNameByKey(t){x.log(this.widgetsList);let i="";return this.widgetsList.forEach(function(e){e.value==t&&(i=e.label),i==""&&e.children.forEach(function(a){a.value==t&&(i=a.label)})}),i}}},W=H,D=l(68141),E=(0,D.Z)(W,S,m,!1,null,"7f7671f5",null),O=E.exports}}]);
