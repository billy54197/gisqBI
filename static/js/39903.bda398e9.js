"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[39903],{339903:function(f,r,n){n.r(r),n.d(r,{default:function(){return p}});var i=function(){var e=this,a=e._self._c;return a("div",[a("el-form",{ref:"form",attrs:{size:"mini","label-width":"70px","label-position":"right",model:e.currentWidget.dataset}},[a("el-form-item",{attrs:{label:"\u6570\u636E\u7C7B\u578B"}},[a("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"},on:{change:e.changeDatasetType},model:{value:e.currentWidget.dataset.type,callback:function(t){e.$set(e.currentWidget.dataset,"type",t)},expression:"currentWidget.dataset.type"}},e._l(this.$$global_editor.dataSourcTypeList3,function(t){return a("el-option",{key:t.value,attrs:{disabled:t.disabled,label:t.label,value:t.value}})}),1)],1),a("el-form-item",{attrs:{label:"\u6587\u672C\u5185\u5BB9"}},[e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias&&e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias.length>0?a("el-select",{attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u6587\u672C\u6620\u5C04\u7684\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.text,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"text",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.text"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1):a("el-input",{staticStyle:{width:"195px"},on:{change:e.getConfigData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.text,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"text",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.text"}})],1),a("setting-dataset",{ref:"settingDataset",attrs:{currentWidget:e.currentWidget},on:{getDataSetData:e.getConfigData,clearDynamicEncode:e.clearDynamicEncode}})],1),a("el-collapse",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.enabled==!0,expression:"currentWidget.config.alarm.enabled == true"}],model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{attrs:{name:"alarm"}},[a("template",{slot:"title"},[a("div",{staticClass:"my-title"},[e._v("\u544A\u8B66")])]),a("vue-lazy-component",{staticClass:"my-collapse-chart"},[a("el-form",{ref:"form",attrs:{size:"mini",model:e.currentWidget.config.alarm,"label-width":"75px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"\u544A\u8B66\u5B57\u6BB5"}},[a("el-select",{staticStyle:{width:"205px"},attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u7ED1\u5B9A\u5B57\u6BB5"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.field,callback:function(t){e.$set(e.currentWidget.config.alarm,"field",t)},expression:"currentWidget.config.alarm.field"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u6BD4\u8F83\u89C4\u5219"}},[a("el-select",{staticStyle:{width:"205px"},attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6BD4\u8F83\u89C4\u5219"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.rule,callback:function(t){e.$set(e.currentWidget.config.alarm,"rule",t)},expression:"currentWidget.config.alarm.rule"}},e._l(e.ruleList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("el-form-item",{attrs:{label:"\u544A\u8B66\u7EBF"}},[a("el-input",{staticStyle:{width:"205px"},attrs:{placeholder:"\u544A\u8B66\u7EBF"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.limit,callback:function(t){e.$set(e.currentWidget.config.alarm,"limit",t)},expression:"currentWidget.config.alarm.limit"}})],1),a("el-form-item",{attrs:{label:"\u811A\u672C\u542F\u7528"}},[a("el-row",[a("el-col",{attrs:{span:19}},[a("el-switch",{on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.script.enabled,callback:function(t){e.$set(e.currentWidget.config.alarm.script,"enabled",t)},expression:"currentWidget.config.alarm.script.enabled"}})],1),a("el-col",{attrs:{span:5}},[a("el-tooltip",{attrs:{"open-delay":1e3,content:"\u7F16\u8F91\u8981\u6267\u884C\u7684\u811A\u672C\u5185\u5BB9",effect:"dark",placement:"top"}},[a("common-custom-script",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.script.enabled,expression:"currentWidget.config.alarm.script.enabled"}],attrs:{options:e.options.scriptContent,"current-widget":e.currentWidget},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.script,callback:function(t){e.$set(e.currentWidget.config.alarm,"script",t)},expression:"currentWidget.config.alarm.script"}})],1)],1)],1)],1)],1)],1)],2)],1)],1)},l=[],s=n(723400),c=n(589908),o=n(406627),d={name:"title-general-data",components:{SettingDataset:c.Z,CommonCustomScript:o.default},props:["currentWidget"],mixins:[s.j],data(){return{activeName:"alarm",ruleList:[{label:"\u5927\u4E8E",value:"greater"},{label:"\u7B49\u4E8E",value:"equal"},{label:"\u5C0F\u4E8E",value:"less"}],options:{scriptContent:{attribute_script_content:"scriptContent",title:"\u544A\u8B66\u811A\u672C",script_examples:`/*\u5F53\u524D\u65B9\u6CD5\u4E2D\u53EF\u4F7F\u7528\u7684\u53C2\u6570
info  \u5F53\u524D\u7EC4\u4EF6\u4FE1\u606F
info.config.alarm  \u544A\u8B66\u914D\u7F6E\u4FE1\u606F
info.dataset[info.dataset.type]  \u5F53\u524D\u7EC4\u4EF6\u7684\u6570\u636E\u4FE1\u606F
*/
//\u8FD4\u56DEtrue\u6216false\u63A7\u5236\u662F\u5426\u544A\u8B66
return true;`}}}},mounted(){this.dialogWidth=window.innerWidth-170+"px",this.divH=window.innerHeight-160},methods:{changeDatasetType(){this.currentWidget.dataset.type!=this.$$global_editor.dataSourcType.static.code&&this.$refs.settingDataset.loadPreview(),this.getConfigData()},clearDynamicEncode(){this.currentWidget.dataset[this.currentWidget.dataset.type].encode.text=""}}},u=d,g=n(768141),m=(0,g.Z)(u,i,l,!1,null,"7995450d",null),p=m.exports}}]);
