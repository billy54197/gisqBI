"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[7121],{56279:function(A,x,a){a.d(x,{P:function(){return v}});var D=a(86892),g=a(49500);const v={mixins:[D.D],created(){},methods:{lifecycleBeforeChartsLoad(p){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&g.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),g.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let S=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[p]);if(S)return S}return p},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&g.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),g.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},77121:function(A,x,a){a.r(x),a.d(x,{default:function(){return R}});var D=function(){var e=this,i=e._self._c;return i("div",{style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}},[i("hide-button",{attrs:{attr:e.widgetInfo.attr}}),i("div",{ref:"lineThreeDimensional",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}})],1)},g=[],v=a(44513),p=a(27966),N=a(32475),S=a(67157),h=a(50666);const J={mixins:[S.c],data(){return{config_extend:{config:{series:[{itemStyle:{color:"#222227"}},{itemStyle:{color:"#29CC97"}}]}},filter_config:{title:JSON.parse(JSON.stringify(h.Z.charts.title)),legend:JSON.parse(JSON.stringify(h.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(h.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(h.Z.charts.toolbox)),xAxis3D:JSON.parse(JSON.stringify(h.Z.charts.xAxis3D)),yAxis3D:JSON.parse(JSON.stringify(h.Z.charts.yAxis3D)),zAxis3D:JSON.parse(JSON.stringify(h.Z.charts.zAxis3D)),visualMap:{inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},series:{label:{textStyle:{color:""}},itemStyle:{opacity:1,color:""},emphasis:{itemStyle:{color:""},label:{textStyle:{color:""}}}}}}},methods:{filterPredefineColoursSchemeConfig(t,e){this.getNewConfigWithArrary(t,e,this.filter_config),this.getNewConfig_charts_visualMap_inRange_color(t.visualMap,e.visualMap)}}};var b=a(56279),L=a(45061),M=a(26711),z=a(99349),B=a(8925),w=a(75770),C=a(55616),$=a(49500);const O=a(29426);var T={props:["widgetInfo"],name:"line-three-dimensional",components:{HideButton:v.Z},mixins:[N.u,J,b.P,L.u,M.H,z.P],data(){return{dimensionsEx:null,dimensionsAliasEx:null}},destroyed(){this.echarts.dispose()},mounted(){this.echarts=O.init(this.$refs.lineThreeDimensional,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(t){let e=this.getData(t.dataset[t.dataset.type].encode,t.dataset[t.dataset.type].dimensionsAlias,t.dataset[t.dataset.type].source),i=this.getTooltip(t.config.tooltip),l=JSON.parse(JSON.stringify(t.config.xAxis3D));l.data=Array.from(new Set(e.xData));let s=JSON.parse(JSON.stringify(t.config.yAxis3D));s.data=Array.from(new Set(e.yData));let c=JSON.parse(JSON.stringify(t.config.zAxis3D));c.data=Array.from(new Set(e.zData));let o=JSON.parse(JSON.stringify(t.config.grid3D)),r=JSON.parse(JSON.stringify(t.config.series)),n=JSON.parse(JSON.stringify(t.config.visualMap));n.seriesIndex=n.show?0:-1;let I=JSON.parse(JSON.stringify(t.config.toolbox)),d=t.dataset[t.dataset.type].encode;t.config.visualMap.visualMapMin=="dataMin"&&(n.min=this.getVisualmapData(t,d.z)[0]),t.config.visualMap.visualMapMax=="dataMax"&&(n.max=this.getVisualmapData(t,d.z)[1]);let y={tooltip:i,toolbox:I,visualMap:this.getVisualMap(n),xAxis3D:l,yAxis3D:s,zAxis3D:c,grid3D:o,series:[{type:"line3D",coordinateSystem:"cartesian3D",symbol:"circle",symbolSize:12,animationDurationUpdate:500,blendMode:"source-over",progressive:1e5,progressiveThreshold:1e5,data:e.data.map(function(f){return{value:[f[0],f[1],f[2]]}}),shading:"lambert",label:this.getLabelStyle(r.label),lineStyle:r.itemStyle,emphasis:r.emphasis}]};this.echarts.dispose(),this.echarts=O.init(this.$refs.lineThreeDimensional,null,{devicePixelRatio:2}),this.echarts.setOption(this.lifecycleBeforeChartsLoad(y),{notMerge:!1})},reLoadInfo(t){t&&(this.$refs.lineThreeDimensional.style.width=t.attr.w+"px",this.$refs.lineThreeDimensional.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},getData(t,e,i){let l,s,c,o={xData:[],yData:[],zData:[],data:[]};return this.$$lib__.each(e,(r,n)=>{t.x&&r.name==t.x&&(l=n),t.y&&r.name==t.y&&(s=n),t.z&&r.name==t.z&&(c=n)}),this.$$lib__.each(i,r=>{l>=0?o.xData.push(r[l]):o.xData.push(0),s>=0?o.yData.push(r[s]):o.xData.push(0),c>=0?o.zData.push(r[c]):o.xData.push(0);let n=[];l>=0?n.push(r[l]):n.push(0),s>=0?n.push(r[s]):n.push(0),c>=0?n.push(r[c]):n.push(0),o.data.push(n)}),o.data=this.changeSourceType(o.data,o.xData,o.yData,o.zData),o},changeSourceType(t,e,i,l){let s=Array.from(new Set(e)),c=Array.from(new Set(i)),o=Array.from(new Set(l)),r=this.widgetInfo.config.xAxis3D.type,n=this.widgetInfo.config.yAxis3D.type,I=this.widgetInfo.config.zAxis3D.type,d=JSON.parse(JSON.stringify(t));return this.$$lib__.each(t,(y,f)=>{r=="category"&&this.$$lib__.each(s,(u,m)=>{y[0]==u&&(d[f][0]=m)}),n=="category"&&this.$$lib__.each(c,(u,m)=>{y[1]==u&&(d[f][1]=m)}),I=="category"&&this.$$lib__.each(o,(u,m)=>{y[2]==u&&(d[f][2]=m)})}),d},initAction(t){this.actionSendout(t),this.actionReceive(t)},actionSendout(t){let e=this;this.$$lib__.each(t.action.sendOut.actionList,i=>{if(i.enabled){let l=i.code+"_"+t.id;if(i.paramsExtend&&i.paramsExtend.length>0){let s={};this.getParamsExtend(s,i.paramsExtend,t)}i.code==w.Z.click.code&&e.onClick(l,i)}})},onClick(t,e){let i=this;i.echarts.on("click",l=>{let s={};if(s.x=l.value[0],s.y=l.value[1],s.z=l.value[2],e.script&&e.script.enabled){if($.log("Execute script for "+i.widgetInfo.name+" component to "+w.Z[e.code].name+" component"),e.script.content==""){C.Message.warning({message:w.Z[e.code].name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),s=this.customScript(s)}p.Z.$emit(t,s),e.postMessage&&i.doPostMessage(s),i.actionNameList.push(t)})}}},Z=T,E=a(68141),P=(0,E.Z)(Z,D,g,!1,null,"2ef9eb48",null),R=P.exports}}]);
