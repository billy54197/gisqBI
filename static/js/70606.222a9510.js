"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[70606],{56279:function(b,u,n){n.d(u,{P:function(){return o}});var c=n(386892),l=n(149500);const o={mixins:[c.D],created(){},methods:{lifecycleBeforeChartsLoad(h){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&l.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),l.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let p=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[h]);if(p)return p}return h},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&l.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),l.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(b,u,n){n.d(u,{X:function(){return c},b:function(){return l}});let c={versions:function(){var o=navigator.userAgent;return{trident:o.indexOf("Trident")>-1,presto:o.indexOf("Presto")>-1,webKit:o.indexOf("AppleWebKit")>-1,gecko:o.indexOf("Gecko")>-1&&o.indexOf("KHTML")==-1,mobile:!!o.match(/AppleWebKit.*Mobile.*/),ios:!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:o.indexOf("Android")>-1,iPhone:o.indexOf("iPhone")>-1,iPad:o.indexOf("iPad")>-1,webApp:o.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},l;c.versions.mobile||c.versions.ios||c.versions.android||c.versions.iPhone||c.versions.iPad?l=!1:l=!0},844513:function(b,u,n){n.d(u,{Z:function(){return v}});var c=function(){var i=this,g=i._self._c;return i.attr.buttonHide?g("div",{style:{position:"absolute",right:i.attr.buttonHideRight+"px",top:i.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(w){return i.onHide()}}},[i.openTooltip?g("el-tooltip",{attrs:{"open-delay":1e3,content:i.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[g("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):g("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):i._e()},l=[],o=n(752246),h={props:["attr"],name:"hide-button",data(){return{isPc:o.b}},computed:{openTooltip:function(){let y=!1,i=this.attr.buttonHideTooltipContent;return o.b&&i&&i!=null&&i.trim()!=""&&(y=!0),y}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},I=h,p=n(768141),x=(0,p.Z)(I,c,l,!1,null,"bf399b9a",null),v=x.exports},870606:function(b,u,n){n.r(u),n.d(u,{default:function(){return S}});var c=function(){var t=this,s=t._self._c;return s("div",{ref:"pictureSingle",style:t.style},[s("hide-button",{attrs:{attr:t.widgetInfo.attr}}),t.flag?s("LivePlayer",{ref:"livePlayer",staticClass:"my-livePlayer",attrs:{videoUrl:t.src,autoplay:t.widgetInfo.config.autoplay,controls:t.widgetInfo.config.controls,muted:t.widgetInfo.config.muted,loop:t.widgetInfo.config.loop,stretch:t.widgetInfo.config.stretch,aspect:"fullscreen",fluent:"",live:""},on:{snapOutside:t.snapOutside}}):t._e()],1)},l=[],o=n(321300),h=n(844513),I=n(6061),p=n(445061),x=n(56279),v=n(927966),y=n(148836),i=n(149500),g={props:["widgetInfo"],name:"video-single",async beforeCreate(){await o.registerScript("./js/liveplayer-lib.min.js").then(()=>{this.flag=!0})},components:{HideButton:h.Z,LivePlayer:()=>n.e(40430).then(n.t.bind(n,726806,23))},mixins:[I.baseConfig,p.u,x.P],data(){return{flag:!1,style:{},src:""}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.getStyle(this.widgetInfo),this.$emit("attrChange",this.widgetInfo)}},methods:{...(0,y.nv)(["addChildInitFinish"]),loadInfo(e){this.getStyle(e),this.lifecycleAfterLoad()},reLoadInfo(e){this.loadInfo(e)},snap:function(){this.$refs.livePlayer.snap()},snapOutside:function(e){i.log(e)},initAction(e){i.info(e),this.actionReceiveInit(e)},actionReceiveInit(e){e.action==null||e.action.receive==null||(this.doReceive(e),this.addChildInitFinish(),this.actionReceive(e))},doReceive(e){e.action&&e.action.receive&&e.action.receive.play&&e.action.receive.play.enabled&&e.action.receive.play.playList&&e.action.receive.play.playList.length>0&&this.doPlay(e.action.receive.play.playList,e.action.receive.play.value),e.action&&e.action.receive&&e.action.receive.pause&&e.action.receive.pause.enabled&&e.action.receive.pause.pauseList&&e.action.receive.pause.pauseList.length>0&&this.doPause(e.action.receive.pause.pauseList,e.action.receive.pause.value),e.action&&e.action.receive&&e.action.receive.receiveSrc&&e.action.receive.receiveSrc.enabled&&e.action.receive.receiveSrc.receiveSrcList&&e.action.receive.receiveSrc.receiveSrcList.length>0&&this.doReceiveSrc(e.action.receive.receiveSrc.receiveSrcList)},doPlay(e,t){let s=this;this.$$lib__.each(e,a=>{let r=a[0][1]+"_"+a[0][0];a[0][1].indexOf("_")>-1&&(r=a[0][1]),v.Z.$on(r,f=>{if(t==null||t==""||t==null)s.doAction(!0);else{let d=a[0][2],m=d.indexOf("|");m>-1&&(d=a[0][2].substring(m+1)),t==f[d]&&s.doAction(!0)}})})},doPause(e,t){let s=this;this.$$lib__.each(e,a=>{let r=a[0][1]+"_"+a[0][0];a[0][1]&&a[0][1].indexOf("_")>-1&&(r=a[0][1]),v.Z.$on(r,f=>{if(t==null||t==""||t==null)s.doAction(!1);else{let d=a[0][2],m=d.indexOf("|");m>-1&&(d=a[0][2].substring(m+1)),t==f[d]&&s.doAction(!1)}})})},doReceiveSrc(e){let t=this;this.$$lib__.each(e,s=>{let a=s[0][1]+"_"+s[0][0];s[0][1].indexOf("_")>-1&&(a=s[0][1]),i.info(a),v.Z.$on(a,r=>{i.info(r);let f=s[0][2],d=f.indexOf("|");d>-1&&(f=s[0][2].substring(d+1)),r[f].indexOf("http")==-1?t.src=this.getImageUrl(r[f]):t.src=r[f]})})},doAction(e){let t=this.$refs.livePlayer;e?t&&t.play():t&&t.pause()},getStyle(e){if(this.style={width:e.attr.w+"px",height:e.attr.hh+"px",display:e.attr.hide==!0?"none":"",opacity:e.config.opacity,position:"relative"},e.dataset[e.dataset.type].encode&&e.dataset[e.dataset.type].encode.url){let t=this.getData(e.dataset[e.dataset.type].encode,e.dataset[e.dataset.type].dimensions,e.dataset[e.dataset.type].source);this.src=this.getImageUrl(t)}else this.src=this.getImageUrl(e.config.src)?this.getImageUrl(e.config.src):""},getData(e,t,s){let a=-1;for(let r=0;r<t.length;r++)if(t[r]==e.url){a=r;break}return s[0]?s[0][a]:""},getImageUrl(e){if(e&&e!="")return o.appendImageBaseURL(e)}}},w=g,L=n(768141),C=(0,L.Z)(w,c,l,!1,null,"487cf3fe",null),S=C.exports}}]);
