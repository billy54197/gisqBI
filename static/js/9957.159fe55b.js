(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[9957],{19457:function(Q,j,r){"use strict";var P=r(19534);Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var a=P(r(52909)),f=P(r(42579)),i=void 0,h={props:{isShow:{type:Boolean,default:!0},position:{type:Object,default:function(){return(0,f.default)(this,i),{type:"absolute",top:"1px",left:"1px"}}.bind(void 0)},isColumn:{type:Boolean,default:!1},title:{type:String},iconClass:{type:String},dragEnable:{type:Boolean,default:!1},showImg:{type:Boolean,default:!0},showLabel:{type:Boolean,default:!0},themeStyle:{type:Object}},data:function(){return{theme:"light"}},watch:{currentView:{handler:function(x){x==="earth"?this.theme="dark":this.theme="light"},immediate:!0}},mounted:function(){var x,w=this;this.$_mixin_generalButton=(0,a.default)(x=this.$children).call(x,function(O){return(0,f.default)(this,w),O.$options.name==="ShGeneralButton"}.bind(this))},methods:{getPosition:function(){var x;return(x=this.$_mixin_generalButton)===null||x===void 0?void 0:x.getPosition()}}},o=h;j.default=o},32726:function(Q,j,r){"use strict";var P=r(49500),a=r(85208),f=r(59791),i=r(22466),h=r(83393),o=r(5077),d=r(19534);Object.defineProperty(j,"__esModule",{value:!0}),j.default=U;var x=d(r(11323)),w=d(r(43389)),O=d(r(34749)),B=d(r(42579)),A=d(r(85208)),G=d(r(28866)),p=d(r(22466)),g=d(r(81806)),R=d(r(5146));function N(C,E){var $=a(C);if(f){var I=f(C);E&&(I=i(I).call(I,function(V){return h(C,V).enumerable})),$.push.apply($,I)}return $}function S(C){for(var E=1;E<arguments.length;E++){var $=arguments[E]!=null?arguments[E]:{};E%2?N(Object($),!0).forEach(function(I){(0,w.default)(C,I,$[I])}):o?Object.defineProperties(C,o($)):N(Object($)).forEach(function(I){Object.defineProperty(C,I,h($,I))})}return C}function H(C,E){for(var $=!1,I=C,V=function(){var F=this;I=I.$parent;var T=I.$refs;T&&(0,A.default)(T).forEach(function(W){(0,B.default)(this,F),T[W]===C&&(T[W]=E,$=!0)}.bind(this))};I.$parent&&!$;)V()}function U(C){var E,$,I=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=V.configName,F=V.componentName,T=V.transform,W=(0,G.default)(E=(0,p.default)($=C.mixins||[]).call($,function(D){return(0,B.default)(this,I),!!D.props}.bind(this))).call(E,function(D){return(0,B.default)(this,I),{props:D.props}}.bind(this));return{name:F||C.name,props:C.props,mixins:W,inject:{reactiveConfigInstance:{default:function(){var L=this;return function(){return(0,B.default)(this,L),null}.bind(this)}}},data:function(){return this.$configInfo={},{ready:!1}},computed:{configInstance:function(){return this.reactiveConfigInstance()}},mounted:function(){this.initConfig()},methods:{initConfig:function(){var L=this;return(0,O.default)(x.default.mark(function K(){var z,b;return x.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!L.configInstance){m.next=17;break}return z=L.$options.name.replace("Sh",""),b={},m.prev=3,m.next=6,L.configInstance.getWidgetInfoByTag(X||z);case 6:b=m.sent,m.next=13;break;case 9:return m.prev=9,m.t0=m.catch(3),P.error(m.t0),m.abrupt("return");case 13:if(b.stat){m.next=15;break}return m.abrupt("return");case 15:typeof T=="function"&&b.data?b=T(b.data,L.configInstance.widgetInfo.mapConfig,{url:L.configInstance.url.replace("/role/getResources",""),schemeId:L.configInstance.schemeId}):b=b.data,L.$configInfo=S({},b);case 17:L.ready=!0;case 18:case"end":return m.stop()}},K,null,[[3,9]])}))()},forwordRef:function(){var L;H(this._self,this._self.$children[0]),(L=this._self.$children[0])===null||L===void 0||L.$emit("mounted",this._self.$children[0])}},render:function(L){var K,z=this,b;if((0,g.default)(K=(0,A.default)(this.$listeners)).call(K,"hook:mounted")){var J;b=S(S({},this.$listeners),{},{"hook:mounted":(0,R.default)(J=[this.forwordRef]).call(J,this.$listeners["hook:mounted"])})}else b=S(S({},this.$listeners),{},{"hook:mounted":this.forwordRef});var m=this.$options.propsData;return(0,A.default)(m).forEach(function(k){(0,B.default)(this,z),m[k]===void 0&&delete m[k]}.bind(this)),this.ready?L(C,{on:b,scopedSlots:this.$scopedSlots,props:S(S({},this.$configInfo),m),attrs:this.$attrs},this.$slots.default):null}}}},81531:function(Q,j,r){var P=r(49500);Q.exports=function(a){var f={};function i(h){if(f[h])return f[h].exports;var o=f[h]={i:h,l:!1,exports:{}};return a[h].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=a,i.c=f,i.d=function(h,o,d){i.o(h,o)||Object.defineProperty(h,o,{enumerable:!0,get:d})},i.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},i.t=function(h,o){if(o&1&&(h=i(h)),o&8||o&4&&typeof h=="object"&&h&&h.__esModule)return h;var d=Object.create(null);if(i.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:h}),o&2&&typeof h!="string")for(var x in h)i.d(d,x,function(w){return h[w]}.bind(null,x));return d},i.n=function(h){var o=h&&h.__esModule?function(){return h.default}:function(){return h};return i.d(o,"a",o),o},i.o=function(h,o){return Object.prototype.hasOwnProperty.call(h,o)},i.p="/dist/",i(i.s=793)}({0:function(a,f){a.exports=r(42579)},110:function(a,f){a.exports=r(46769)},16:function(a,f){a.exports=r(91873)},17:function(a,f){a.exports=r(85208)},18:function(a,f){a.exports=r(59791)},19:function(a,f){a.exports=r(83393)},2:function(a,f,i){"use strict";i.d(f,"a",function(){return h});function h(o,d,x,w,O,B,A,G){var p=typeof o=="function"?o.options:o;d&&(p.render=d,p.staticRenderFns=x,p._compiled=!0),w&&(p.functional=!0),B&&(p._scopeId="data-v-"+B);var g;if(A?(g=function(S){S=S||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!S&&typeof __VUE_SSR_CONTEXT__<"u"&&(S=__VUE_SSR_CONTEXT__),O&&O.call(this,S),S&&S._registeredComponents&&S._registeredComponents.add(A)},p._ssrRegister=g):O&&(g=G?function(){O.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:O),g)if(p.functional){p._injectStyles=g;var R=p.render;p.render=function(H,U){return g.call(U),R(H,U)}}else{var N=p.beforeCreate;p.beforeCreate=N?[].concat(N,g):[g]}return{exports:o,options:p}}},20:function(a,f){a.exports=r(5077)},21:function(a,f){a.exports=r(81806)},25:function(a,f){a.exports=r(43389)},28:function(a,f){a.exports=r(32726)},30:function(a,f){a.exports=r(32569)},35:function(a,f){a.exports=r(49162)},36:function(a,f){a.exports=r(59269)},4:function(a,f){a.exports=r(55616)},47:function(a,f){a.exports=r(10563)},491:function(a,f){a.exports=r(59037)},58:function(a,f){a.exports=r(65594)},6:function(a,f){a.exports=r(83574)},60:function(a,f){a.exports=r(8421)},61:function(a,f){a.exports=r(19457)},65:function(a,f){a.exports=r(92405)},66:function(a,f){a.exports=r(37029)},67:function(a,f){a.exports=r(31694)},7:function(a,f){a.exports=r(17249)},793:function(a,f,i){"use strict";i.r(f);var h=i(0),o=i.n(h),d=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShow,expression:"shouldShow"}],staticClass:"sh-union-tool"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticStyle:{width:"100%",height:"100%"}},[t.$slots.default?e("span",{staticStyle:{width:"100%",height:"100%"},on:{click:t.activate}},[t._t("default")],2):e("general-button",{attrs:{position:t.position,"is-column":t.isColumn,"icon-class":t.iconClass?t.iconClass:"union-tool","show-img":t.showImg,"show-label":t.showLabel,"drag-enable":t.dragEnable,"theme-style":t.themeStyle,title:t.title?t.title:"\u5408\u5E76"},on:{click:t.activate}})],1),t.dialogVisible?e("general-container",{ref:"container",staticClass:"sh-union-tool",attrs:{title:t.showList?"\u786E\u5B9A\u5408\u5E76\u56FE\u6591?":"\u63D0\u793A","style-config":t.cardStyleConfig,position:t.panelPosition,"append-to-body":!0,"img-src":t.iconClass?t.iconClass:"union",theme:"light"},on:{afterClose:t.revoke}},[e("div",[e("div",{staticClass:"diaBody"},[t.showList?e("div",{staticStyle:{width:"100%"}},[e("div",{staticStyle:{"margin-bottom":"5px","margin-left":"5px"}},[t._v("\u9009\u62E9\u76EE\u6807\u56FE\u73ED")]),e("div",{staticClass:"left"},[e("div",{staticClass:"tableHeader"},[t._v("\u56FE\u73ED\u5217\u8868")]),e("div",{staticClass:"tableBody"},t._l(t.featureList,function(n,l){return e("div",{key:"DK_"+l,class:"DK_btn DK_"+l,on:{click:function(u){return t.setAttrList(l)}}},[t._v(`
                \u56FE\u73ED-`+t._s(l+1)+`
              `)])}),0)]),e("div",{staticClass:"right"},[e("div",{staticClass:"tableHeader"},[e("div",{staticClass:"blockDiv"},[e("div",{staticClass:"nameDiv"},[t._v("\u5B57\u6BB5\u540D\u79F0")]),e("div",{staticClass:"valueDiv"},[t._v("\u5B57\u6BB5\u503C")])])]),e("div",{staticClass:"tableBody"},t._l(t.attArr,function(n,l){return e("div",{key:l,staticClass:"blockDiv"},[e("div",{staticClass:"nameDiv"},[t._v(t._s(l))]),e("div",{staticClass:"valueDiv"},[t._v(t._s(n))])])}),0)])]):e("div",{staticStyle:{width:"100%"}},[e("div",{staticClass:"textTip"},[t._v("\u786E\u5B9A\u5408\u5E76\u56FE\u6591?")])])]),e("div",{staticClass:"btns"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmPanel}},[t._v("\u5408\u5E76")]),e("el-button",{attrs:{type:"warning",size:"small"},on:{click:t.revoke}},[t._v("\u53D6\u6D88")])],1)])]):t._e()],1)},x=[];d._withStripped=!0;var w=i(17),O=i.n(w),B=i(18),A=i.n(B),G=i(8),p=i.n(G),g=i(19),R=i.n(g),N=i(20),S=i.n(N),H=i(25),U=i.n(H),C=i(21),E=i.n(C),$=i(6),I=i.n($),V=i(7),X=i.n(V),F=i(4),T=i(16),W=i(65),D=i.n(W),L=i(66),K=i.n(L),z=i(491),b=i.n(z),J=i(110),m=i(67),k=i.n(m),nt=i(47),st=i(60),at=i.n(st),ot=i(30),rt=i.n(ot),lt=i(61),ft=i.n(lt),ht=i(35),ut=i.n(ht),dt=i(58),_=i.n(dt),Z=i(36),tt=void 0;function et(t,s){var e=O()(t);if(A.a){var n=A()(t);s&&(n=p()(n).call(n,function(l){return R()(t,l).enumerable})),e.push.apply(e,n)}return e}function it(t){for(var s=1;s<arguments.length;s++){var e=arguments[s]!=null?arguments[s]:{};s%2?et(Object(e),!0).forEach(function(n){U()(t,n,e[n])}):S.a?Object.defineProperties(t,S()(e)):et(Object(e)).forEach(function(n){Object.defineProperty(t,n,R()(e,n))})}return t}var ct={name:"ShUnionTool",components:{GeneralButton:at.a,GeneralContainer:rt.a},mixins:[I.a,X.a,ft.a],props:{position:{type:Object,default:function(){return o()(this,tt),{type:"absolute",top:"1px",left:"560px"}}.bind(void 0)},url:{type:String},showList:{type:Boolean,default:!1},autoSave:{type:Boolean,default:!1},autoExecute:{type:Boolean,default:!0},panelPosition:{type:Object,default:function(){return o()(this,tt),{type:"absolute",top:"40vh",left:"40vw",zIndex:9999}}.bind(void 0)},panelStyleConfig:{type:Object,default:function(){o()(this,tt)}.bind(void 0)}},data:function(){return{shouldShow:!1,typeConfig:{isShowBtn:!1,isStartFix:!1,titleBar:{miniBtn:!1,maxBtn:!1,closeBtn:!0,fixBtn:!1,title:!0},autoVisible:!1,size:{radius:"4px",width:"300px",height:"300px"}},dialogVisible:!1,baseUrl:"",featureList:[],flashLayer:null,attArr:{},featureIndex:0,geoJSON:null,wktFormat:new k.a,deleteIds:[],active:!1,newFeatures:[],originFeatures:[],unionCount:0,reovkeIndex:0}},computed:{cardStyleConfig:function(){return it(it({},this.typeConfig),this.panelStyleConfig)}},watch:{currentView:{handler:function(s){this.shouldShow=s==="map"},immediate:!0},currentInteraction:function(s){s!==this.$options.name&&this.active&&this.deactivate()}},mounted:function(){var s=this;this.$map&&setTimeout(function(){o()(this,s),this.begin()}.bind(this),0)},methods:{begin:function(){this.geoJSON=new ut.a,this.baseUrl=this.url?this.url:this.shinegaUrl},activate:function(){this.active=!0,this.showList?this.dialogbodyheight=3e3:this.dialogbodyheight=50,this.showDialog()},deactivate:function(){this.dialogVisible=!1,this.active=!1},_getWkid:function(){var s="EPSG:4490",e=4490;return this.$map&&(s=this.$map.getView().getProjection().getCode(),e=E()(s).call(s,":")?s.split(":")[1]:s),{projection:s,spatialReference:e}},showDialog:function(){this.flashLayer||this._createFlashLayer(),this.dialogVisible?this.dialogVisible=!1:(this.dialogVisible=this._getSelectFeatures(),this.dialogVisible===!0?(this.dialogVisible=!0,this.autoExecute&&!this.showList&&this._startUnoin()):this.dialogVisible==="one"?(this.dialogVisible=!1,F.Message.info("\u8BF7\u7EE7\u7EED\u9009\u62E9\u56FE\u5F62"),this.$emit("change:isStayAdd",!0)):F.Message.warning("\u8BF7\u9009\u62E9\u4E24\u4E2A\u76F8\u90BB\u56FE\u5F62"))},confirmPanel:function(){var s=this;if(this.dialogVisible=!1,this.showList){var e="\u662F\u5426\u786E\u5B9A\u5408\u5E76\u5F53\u524D\u9009\u4E2D\u56FE\u5F62,\u5E76\u7EE7\u627F\u3010\u56FE\u5F62-".concat(this.featureIndex+1,"\u3011\u7684\u5C5E\u6027?");F.MessageBox.confirm(e,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){o()(this,s),this._startUnoin()}.bind(this)).catch(function(n){o()(this,s),P.error(n),this.dialogVisible=!0,this.setAttrList(this.featureIndex)}.bind(this))}else this.autoExecute||this._startUnoin(),this.confirmSave()},_startUnoin:function(){var s=this;this.flashSource.clear(),this.unionCount+=1,this.reovkeIndex=this.unionCount,this.newFeatures=[];var e=this.featureList,n=[];e.forEach(function(Y){o()(this,s),n.push(Y.clone())}.bind(this));var l={id:this.unionCount,features:n};this.originFeatures.push(l);var u=this._unionGeometry(e),c=this.geoJSON.readFeature(u.geometry),v=c.getGeometry();if(e[this.featureIndex].setGeometry(v),this.newFeatures.push(e[this.featureIndex]),e.forEach(function(Y,It){o()(this,s),It!==this.featureIndex&&this.$map.getLayerById(Z.BASE_DRAWLAYER_ID).getSource().removeFeature(Y)}.bind(this)),this.autoSave){var y=this.wktFormat.writeGeometry(v),M=this._setParams(y);M&&this._save([M])}},_setParams:function(s){var e=this.featureList[this.featureIndex];this.needDeleteFeature=[];for(var n=0;n<this.featureList.length;n++)n!==this.featureIndex&&this.needDeleteFeature.push(this.featureList[n]);var l=e.values_;l=l||{};var u=[],c={};for(var v in l)if(v!=="geometry"&&v!=="isSelected"&&v!=="tempSelected"){var y=l[v];typeof y=="string"&&Object(nt.strDateTime)(y)&&(y=""+y.substr(0,y.length-1)),u.push({name:v,value:y})}var M=this._getEditLayerInfo();return M?(c.attribute=u,c.featureClass=M.layerTable,c.topological=!0,c.checkLevel=0,c.geometry=s,c.spatialReference=this._getWkid().spatialReference,c.filter=""):c=null,c},_save:function(s){var e,n=this,l=this._Loading();new _.a(this.baseUrl,this.shinegaDatabaseId).save({features:s,options:(e=this.options)===null||e===void 0?void 0:e.saveOptions,ruleOptions:this.ruleOptions,token:this.token}).then(function(u){if(o()(this,n),l.close(),u.success){var c=this.$map.getLayerById(Z.BASE_DRAWLAYER_ID);c.getSource().clear(),F.Message.success("\u56FE\u5F62\u5408\u5E76\u6210\u529F"),this.$emit("change:isStayAdd",!1),this._clearLayer(),this._delete(),this.$map.refresh()}else F.Message.error("\u56FE\u5F62\u5408\u5E76\u5931\u8D25")}.bind(this)).catch(function(u){o()(this,n),l.close(),F.Message.error("\u56FE\u5F62\u5408\u5E76\u5931\u8D25:"+u)}.bind(this))},_delete:function(){var s=this,e=this._getEditLayerInfo();new _.a(this.baseUrl,this.shinegaDatabaseId).getPrimaryKey({layerTable:e.layerTable,token:this.token}).then(function(n){var l=this;if(o()(this,s),n.success){this.primaryKey=n.data.key,this.primaryType=n.data.type;var u="",c=[];this.needDeleteFeature.forEach(function(v){o()(this,l);var y=v.values_[this.primaryKey];c.push(v),this.primaryType==="bigint"||this.primaryType==="smallint"||this.primaryType==="integer"?u+=y+",":u+="'"+y+"',"}.bind(this)),u=u.substring(0,u.length-1),new _.a(this.baseUrl,this.shinegaDatabaseId).delete({featureClass:e.layerTable,filterWhere:this.primaryKey+" in ("+u+")",token:this.token}).then(function(v){if(o()(this,l),v.success){var y=e.id,M=this.$map.getLayerById(y);M.getSource().refresh(),this.$map.refresh()}else F.Message.error("\u79FB\u9664\u539F\u56FE\u5F62\u5931\u8D25")}.bind(this)).catch(function(v){o()(this,l),P.error(v),F.Message.error("\u79FB\u9664\u539F\u56FE\u5F62\u5931\u8D25")}.bind(this))}}.bind(this)).catch(function(n){o()(this,s),P.error(n)}.bind(this))},_getEditLayerInfo:function(){this.layerManager||(this.layerManager=this.$map.layerManager);var s=this.layerManager.getEditLayer(),e=s?s.metadata:void 0;return!e||!e.layerTable?(Object(F.Message)({message:"\u5F53\u524D\u56FE\u5C42\u6CA1\u6709\u914D\u7F6E\u6570\u636E\u6E90",type:"warning",offset:30}),null):e},_unionGeometry:function(s){var e=this,n=null;return s.forEach(function(l){o()(this,e);var u=l.getGeometry();if(u){var c=null,v=u.getType(),y=u.getCoordinates();v==="MultiPolygon"?c=Object(J.multiPolygon)(y):v==="Polygon"&&(c=Object(J.polygon)(y)),c&&(n=n?b()(n,c):c)}}.bind(this)),n},_getSelectFeatures:function(){var s=this,e=!1,n=this.$map.getSelectFeatures();return!n||n.length<1?e=!1:n.length===1?e="one":(this.featureList=n,this.setAttrList(0),e=!0,this.deleteIds=[],n.forEach(function(l){o()(this,s);var u=l.id_?l.id_:l.ol_uid,c=u.split("."),v=c[1]?c[1]:c[0];this.deleteIds.push(v)}.bind(this))),e},setAttrList:function(s){var e=this;this.featureIndex=s;var n=this.featureList[s],l=n.values_;l=l||{},this.attArr={};for(var u in l)u!=="geometry"&&u!=="isSelected"&&u!=="tempSelected"&&this.$set(this.attArr,u,l[u]);var c=setInterval(function(){o()(this,e);var v=document.getElementsByClassName("DK_btn");if(v.length>0){clearInterval(c);for(var y=0;y<v.length;y++){var M=v[y],Y=M.style;y===s?Y.color="#409eff":Y.color="#000"}}}.bind(this));this.flashGraphic(n)},flashGraphic:function(s){var e=this,n=0,l=this;function u(){var v=this;n++,l.flashSource.addFeature(s),setTimeout(function(){o()(this,v),c()}.bind(this),400)}function c(){var v=this;l.flashSource.removeFeature(s),n<3&&setTimeout(function(){o()(this,v),u()}.bind(this),400)}setTimeout(function(){o()(this,e),u()}.bind(this),100)},_createFlashLayer:function(){var s=this,e=this.$map.getLayers().getArray(),n=null;e.forEach(function(l){o()(this,s),l.values_.id==="flashTempLayer"&&(n=l)}.bind(this)),n?this.flashSource=n.getSource():(this.flashSource=new D.a,this.flashLayer=new K.a({source:this.flashSource,id:"flashTempLayer",zIndex:9999999,style:new T.Style({fill:new T.Fill({color:"#f8f404"}),stroke:new T.Stroke({color:"#03f82c",width:2})})}),this.$map.addLayer(this.flashLayer))},_clearLayer:function(){var s=this,e=this.$map.getLayers().getArray();e.length>0&&e.forEach(function(n){o()(this,s),n.values_.id==="flashTempLayer"&&(this.$map.removeLayer(n),this.flashLayer=null)}.bind(this))},_Loading:function(){return this.loadingInstance||(this.loadingInstance=F.Loading.service({target:this.$map.getTargetElement(),lock:!0,text:"\u5408\u5E76\u4E2D...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})),this.loadingInstance},revoke:function(){var s=this;if(this.reovkeIndex>0){var e=!1;if(this.newFeatures.forEach(function(n){if(o()(this,s),this.$map.getLayerById(Z.BASE_DRAWLAYER_ID).getSource().hasFeature(n)){e=!0;return}}.bind(this)),!e){this.dialogVisible=!1;return}this.newFeatures.forEach(function(n){o()(this,s);try{this.$map.getLayerById(Z.BASE_DRAWLAYER_ID).getSource().removeFeature(n)}catch(l){P.error(l)}}.bind(this)),this.newFeatures=[],this.originFeatures.forEach(function(n){var l=this;o()(this,s),n.id===this.reovkeIndex&&(this.$map.getLayerById(Z.BASE_DRAWLAYER_ID).getSource().addFeatures(n.features),this.originFeatures.pop(n),n.features.forEach(function(u){o()(this,l),this.newFeatures.push(u)}.bind(this)))}.bind(this)),this.reovkeIndex-=1,this.unionCount=this.reovkeIndex,this.featureIndex=-1}this.dialogVisible=!1},confirmSave:function(){if(this.featureIndex!==-1){var s=this.$map.getSelectFeatures()[0],e=this.wktFormat.writeGeometry(s.getGeometry()),n=this._setParams(e);n?(this._save([n]),this.unionCount=0,this.reovkeIndex=0,this.featureIndex=-1,this.featureList=[]):this.dialogVisible=!0}}}},vt=ct,gt=i(2),pt=Object(gt.a)(vt,d,x,!1,null,null,null),mt=pt.exports,yt=i(28),xt=i.n(yt),St=void 0,q=xt()(mt,{transform:function(s){o()(this,St);var e=s.show,n=s.label,l=s.position;return{isShow:e,title:n,position:l}}.bind(void 0)});q.install=function(t){t.component(q.name,q)};var Ct=f.default=q},8:function(a,f){a.exports=r(22466)}})},99957:function(Q,j,r){"use strict";r.r(j),r.d(j,{default:function(){return G}});var P=function(){var g=this,R=g._self._c;return R("div",{directives:[{name:"show",rawName:"v-show",value:g.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],ref:"gisBase",staticClass:"my-gisBase",style:{width:g.widgetInfo.attr.w+"px",height:g.widgetInfo.attr.hh+"px"}},[R("UnionTool",g._b({style:{width:g.widgetInfo.attr.w+"px",height:g.widgetInfo.attr.hh+"px"},attrs:{"theme-style":g.themeConfig,panelPosition:g.position,position:g.btnPosition,"style-config":g.styleConfig}},"UnionTool",g.widgetInfo.config.btnConfig,!1))],1)},a=[],f=r(81531),i=r.n(f),h=r(86892),o=r(45061),d=r(50681),x=r(49500),w={name:"GisUnion",components:{UnionTool:i()},mixins:[h.D,o.u,d.Z],props:["widgetInfo"],data(){return{width:"16px",height:"16px",fontSize:"12px;"}},computed:{position(){return{type:"absolute",top:this.widgetInfo.config.dialog.top,left:this.widgetInfo.config.dialog.left}},styleConfig(){return{size:{radius:"4px",width:this.widgetInfo.config.dialog.width,height:"200px"}}}},mounted(){this.initAction(this.widgetInfo)},methods:{reLoadInfo(p){x.log("reLoadInfo",this.widgetInfo),this.btnAttr=p.attr},initAction(p){this.actionReceive(p)}}},O=w,B=r(68141),A=(0,B.Z)(O,P,a,!1,null,null,null),G=A.exports}}]);
