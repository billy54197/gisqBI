"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[76662],{774289:function(F,h,a){a.r(h),a.d(h,{default:function(){return Z}});var v=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],staticClass:"vue-grid-container",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px",overflow:e.widgetInfo.config.scroll?"visible":"hidden"},on:{click:e.onClick}},[i("hide-button",{attrs:{attr:e.widgetInfo.attr}}),i("splitpanes",{ref:"splitpanes",staticClass:"default-theme",attrs:{"splitter-style":e.widgetInfo.config.splitterStyle,horizontal:e.widgetInfo.config.pane.d=="h"},on:{resized:e.onSplitMoved}},e._l(e.widgetInfo.config.pane.children,function(r,l){return i("pane",{key:l,ref:"pane_"+l,refInFor:!0,attrs:{size:r.s}},e._l(e.orgWidget(r.widgets),function(t){return i("draggable",{key:e.prefix.widget+t.id,ref:e.prefix.widget+t.id,refInFor:!0,attrs:{id:e.prefix.widget+t.id,rotatable:!0,resizable:!t.attr.locked,draggable:!t.attr.locked,snap:!0,x:t.attr.x,y:t.attr.y,z:e.getZ(t),r:t.attr.deg,h:t.attr.h,w:t.attr.widgetW?t.attr.widgetW:t.attr.w,minw:t.attr.minw,minh:t.attr.minh,"deselect-cancel":".unboardArea",active:e.onActive(t)},on:{onClicked:e.onClicked,dragstop:e.onDragstop,dragging:e.dragging,resizestop:e.onResizstop,rotatestop:e.onRotatestop,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}},[i("widget-action-icon",{attrs:{widget:t}}),i("div",{style:e.getDraggableMouseOver(t)}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:e.getDraggableStyle(t)},[i("external-frame-svg",{ref:"comp_frame_"+t.id,refInFor:!0,attrs:{"widget-info":t}}),t.title.position==="top"||t.title.position==="left"?i("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(t),on:{click:function(s){return e.openLink(t)}}},[i("div",{style:{marginLeft:t.title.label.left+"px",marginTop:t.title.label.top+"px"}},[i("span",{ref:"title_"+t.id,refInFor:!0,style:e.getTitleSpanStyle(t)})])]):e._e(),i("draggable-component-container",{ref:"comp_"+t.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:e.getInfoStyle(t),attrs:{"widget-data":t,"current-widget":e.getCurrentWidget}}),t.title.position==="bottom"||t.title.position==="right"?i("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(t),on:{click:function(s){return e.openLink(t)}}},[i("div",{style:{marginLeft:t.title.label.left+"px",marginTop:t.title.label.top+"px"}},[i("span",{ref:"title_"+t.id,refInFor:!0,style:e.getTitleSpanStyle(t)})])]):e._e()],1)],1)}),1)}),1)],1)},u=[],m=a(787479),y=a(980512),I=a(513229),w=a(723400),W=a(483577),S=a(661174),c=a(148836),p=a(168530),x=a(927966),C=a(213743),D=a(844513),M=a(56279),z=a(629466),d=a(149500),b={name:"ContainerSplit",components:{WidgetActionIcon:z.Z,ExternalFrameSvg:C.Z,Pane:p.X,Splitpanes:p.F,draggable:m.Z,DraggableComponentContainer:y.Z,HideButton:D.Z},extends:I.Z,mixins:[S.baseConfig,w.j,W.i,M.P],props:["widgetInfo","widgetArr","currentWidget"],computed:{...(0,c.Se)(["getCopyWidgetList","getCanvasSetting","getApplication","getWidgetAllArr","getSelectMultiple"]),gridWidgets(){let n=this.widgetInfo.config.widgets,e=[];for(let i=0;i<n.length;++i)e.push({grid:n[i],widgetData:this.widgetArr.find(r=>r.id==n[i].widget)});return e},widgetsList(){return this.orgWidget(this.widgetInfo.config.widgets)},myPanes(){}},data(){return{myPane:[{},{}],layout:{d:"h",w:"",h:"",panes:[{d:"v"}]}}},watch:{getCurrentWidget:{deep:!0,handler:function(){this.$nextTick(()=>{this.setTitleText("widgets",this.widgetInfo.config.pane.children)})}}},mounted(){x.Z.$emit("register-save-event",{widget:this,handler:this.onSaved}),this.loadInfo(this.widgetInfo)},methods:{...(0,c.nv)(["updateWidgetInfoById"]),onSaved(){let n=this.getWidgetAllArr.find(e=>e.id==this.widgetInfo.id);if(n){let e=n.config.pane.children;for(let i in this.$refs)if(i.indexOf("pane_")>-1){let r=this.$refs[i][0].$el.clientHeight,l=this.$refs[i][0].$el.clientWidth,t=i.split("_")[1]-0,s=e[t];if(s.widgets&&s.widgets.length>0)for(let f=0;f<s.widgets.length;++f){let o=s.widgets[f],g=this.getWidgets[o.id];o.x=g.attr.x/l,o.w=g.attr.w/l,o.widgetW=g.attr.widgetW/l,o.y=g.attr.y/r,o.h=g.attr.h/r,o.hh=g.attr.hh/r}}this.updateWidgetInfoById(JSON.parse(JSON.stringify(n)))}},onSplitMoved(n){let e=this.widgetInfo.config.pane.children;for(let i=n.length-1;i>-1;--i)e[i].s=n[i].size},onResizeConfig(n){d.log("onResizeConfig:",n)},resize(){d.log("resize: container-split")},itemClick(n){d.log("item click"),d.log(n)},itemMoved(n,e,i){d.log("MOVED i="+n+", X="+e+", Y="+i)},itemResize(n,e,i,r,l){let t=this.gridWidgets.find(s=>s.grid.i==n);if(t){let s=t.widgetData.attr.h-t.widgetData.attr.hh;t.widgetData.attr.h=r,t.widgetData.attr.hh=r-s;let f=t.widgetData.attr.w-t.widgetData.attr.widgetW;t.widgetData.attr.w=l,t.widgetData.attr.widgetW=l-f;let o=this.$refs["com_"+t.widgetData.id];o&&o.length>0&&o[0].reLoadInfo(t.widgetData)}d.log("RESIZED i="+n+", H="+e+", W="+i+", H(px)="+r+", W(px)="+l)},loadInfo(n){this.lifecycleAfterLoad()},onClick(n){typeof n.target.className=="string"&&n.target.className.indexOf("my-screen")>-1&&(this.getKeydown.ctrlKey?(this.setSelectMultiple(!0),this.getMultipleWidget[this.widgetInfo.id]?this.removeMultipleWidget(this.widgetInfo.id):(this.$$lib__.each(this.widgetInfo.config.widgets,e=>{this.removeMultipleWidget(e.id)}),this.addMultipleWidget(this.widgetInfo.id))):this.setCurrentWidget(this.widgetInfo.id))},onHide(){this.widgetInfo.attr.hide=!0}}},$=b,A=a(768141),L=(0,A.Z)($,v,u,!1,null,"f1e14336",null),Z=L.exports}}]);
