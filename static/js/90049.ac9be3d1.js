"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[90049],{690049:function(v,o,s){s.r(o),s.d(o,{default:function(){return b}});var c=function(){var e=this,t=e._self._c;return t("el-collapse",{staticClass:"widget-list",model:{value:e.activeNames,callback:function(a){e.activeNames=a},expression:"activeNames"}},[t("el-form",{ref:"form",attrs:{"label-width":"90px"}},[t("el-form-item",{attrs:{label:"\u884C\u653F\u533A"}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"\u884C\u653F\u533A\u4EE3\u7801",size:"mini"},on:{change:e.getInput},model:{value:e.searchXZQ,callback:function(a){e.searchXZQ=a},expression:"searchXZQ"}})],1)],1)],1)],1),t("el-collapse-item",{attrs:{name:"1"}},[t("template",{slot:"title"},[t("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[t("span",{staticClass:"my-title"},[e._v("\u641C\u7D22\u670D\u52A1\u8BBE\u7F6E")]),t("i",{staticClass:"el-icon-plus",staticStyle:{color:"tomato",cursor:"pointer","margin-right":"4px","text-align":"center","line-height":"48px"},attrs:{title:"\u589E\u52A0"},on:{click:e.opendialog}})])]),e._l(e.currentWidget.config.baseserver,function(a,r){return t("el-row",{key:r,staticStyle:{"margin-top":"10px",border:"1px solid #0c605c !important",padding:"8px"},nativeOn:{click:function(n){return e.editBaseserver(a,r)}}},[t("el-col",{staticStyle:{height:"100%"},attrs:{span:14}},[t("span",{staticStyle:{"text-align":"center","line-height":"40px","font-size":"18px"}},[e._v(e._s(a.name))])]),t("i",{staticClass:"el-icon-delete",staticStyle:{color:"tomato",cursor:"pointer",position:"absolute",right:"4px",top:"4px"},on:{click:function(n){return n.stopPropagation(),e.deleteBase(r)}}})],1)})],2),t("el-dialog",{staticClass:"searchform",attrs:{title:"\u67E5\u8BE2\u670D\u52A1\u8BBE\u7F6E",visible:e.dialogFormVisible,modal:!1,"append-to-body":!0},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[t("el-form",{staticClass:"searchform",attrs:{model:e.searchConfig}},[t("el-form-item",{attrs:{label:"\u670D\u52A1\u540D\u79F0","label-width":e.formLabelWidth}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"\u670D\u52A1\u540D\u79F0",size:"mini"},model:{value:e.searchConfig.name,callback:function(a){e.$set(e.searchConfig,"name",a)},expression:"searchConfig.name"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u670D\u52A1\u7C7B\u578B","label-width":e.formLabelWidth}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9"},model:{value:e.searchConfig.type,callback:function(a){e.$set(e.searchConfig,"type",a)},expression:"searchConfig.type"}},[t("el-option",{attrs:{label:"\u9AD8\u5FB7\u5730\u56FE",value:"gaode"}}),t("el-option",{attrs:{label:"\u767E\u5EA6\u5730\u56FE",value:"baidu"}}),t("el-option",{attrs:{label:"\u5929\u5730\u56FE",value:"tdt"}}),t("el-option",{attrs:{label:"geoserver",value:"geoserver"}}),t("el-option",{attrs:{label:"arcgis",value:"arcgis"}}),t("el-option",{attrs:{label:"\u79C1\u6709\u670D\u52A1",value:"xzq"}})],1)],1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isshow,expression:"!isshow"}],attrs:{label:"key","label-width":e.formLabelWidth}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"\u7533\u8BF7\u7684key",size:"mini"},model:{value:e.searchConfig.key,callback:function(a){e.$set(e.searchConfig,"key",a)},expression:"searchConfig.key"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u662F\u5426\u542F\u7528","label-width":e.formLabelWidth}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.searchConfig.enable,callback:function(a){e.$set(e.searchConfig,"enable",a)},expression:"searchConfig.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isshow,expression:"isshow"}],attrs:{label:"\u670D\u52A1\u5730\u5740","label-width":e.formLabelWidth}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"\u670D\u52A1\u5730\u5740",size:"mini"},model:{value:e.searchConfig.url,callback:function(a){e.$set(e.searchConfig,"url",a)},expression:"searchConfig.url"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u670D\u52A1\u6700\u5927\u8FD4\u56DE\u6761\u6570","label-width":e.formLabelWidth}},[t("el-input-number",{attrs:{size:"mini","controls-position":"right",min:1,max:100},on:{change:e.getConfigData},model:{value:e.searchConfig.maxcount,callback:function(a){e.$set(e.searchConfig,"maxcount",a)},expression:"searchConfig.maxcount"}})],1),t("el-form-item",{attrs:{label:"\u56FE\u5C42\u540D\u79F0","label-width":e.formLabelWidth}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"\u56FE\u5C42\u540D\u79F0",size:"mini"},model:{value:e.searchConfig.layerName,callback:function(a){e.$set(e.searchConfig,"layerName",a)},expression:"searchConfig.layerName"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u67E5\u8BE2\u5B57\u6BB5","label-width":e.formLabelWidth}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"\u67E5\u8BE2\u5B57\u6BB5",size:"mini"},on:{change:e.fieldNameChange},model:{value:e.searchConfig.fieldName,callback:function(a){e.$set(e.searchConfig,"fieldName",a)},expression:"searchConfig.fieldName"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5730\u5740\u5339\u914D\u5B57\u6BB5","label-width":e.formLabelWidth}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{placeholder:"\u5730\u5740\u5339\u914D\u5B57\u6BB5",size:"mini"},on:{change:e.addressFieldChange},model:{value:e.searchConfig.addressField,callback:function(a){e.$set(e.searchConfig,"addressField",a)},expression:"searchConfig.addressField"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialogFormVisible=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.getScheme}},[e._v("\u786E \u5B9A")])],1)],1)],1)},h=[],d=s(723400),f=s(110563),l=s(149500),g={name:"GisPlaceSearchData",mixins:[d.j],props:["currentWidget"],data(){return{activeNames:["1"],searchXZQ:"330100",dialogFormVisible:!1,searchConfig:{name:"",type:"",key:"",enable:!0,url:"",maxcount:10,layerName:"",fieldName:"",addressField:"",fieldArray:[]},formLabelWidth:"150px"}},computed:{isshow:function(){var i=!0;return(this.searchConfig.type==="gaode"||this.searchConfig.type==="baidu"||this.searchConfig.type==="tdt")&&(i=!1),this.searchConfig.type==="gaode"?this.searchConfig.url="https://restapi.amap.com/v3/place/text?":this.searchConfig.type==="baidu"?this.searchConfig.url="https://api.map.baidu.com/place/v2/search?":this.searchConfig.type==="tdt"&&(this.searchConfig.url="http://api.tianditu.gov.cn/v2/search?&type=query"),i}},mounted(){l.log("mounted")},methods:{getInput(){this.currentWidget.config.searchXZQ=this.searchXZQ,l.log("getInput",this.currentWidget.config)},resetsearchConfig(){this.searchConfig={id:"",name:"",type:"",key:"",enable:!0,url:"",maxcount:10,layerName:"",fieldName:"",fieldArray:[]}},opendialog(){this.resetsearchConfig(),this.dialogFormVisible=!0},editBaseserver(i,e){l.log("---edit----",this.currentWidget.config.baseserver[e]),this.searchConfig={...this.searchConfig,...this.currentWidget.config.baseserver[e]},this.dialogFormVisible=!0},getScheme(){if(l.log("getScheme",this.searchConfig),this.searchConfig.id===""){let i=this.searchConfig;i.id=(0,f.newGuid)(),this.currentWidget.config.baseserver.push(i),l.log("add",this.currentWidget.config.baseserver)}else this.currentWidget.config.baseserver.forEach((i,e)=>{i.id===this.searchConfig.id&&(this.currentWidget.config.baseserver[e]=this.searchConfig)});this.dialogFormVisible=!1},deleteBase(i){this.currentWidget.config.baseserver.splice(i,1)},fieldNameChange(){this.searchConfig.fieldOnMap=this.searchConfig.fieldName},addressFieldChange(){this.searchConfig.fieldArray=[{label:"\u5730\u5740",value:this.searchConfig.addressField}]}}},m=g,p=s(768141),u=(0,p.Z)(m,c,h,!1,null,null,null),b=u.exports}}]);
