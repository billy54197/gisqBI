(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[9096],{45317:function(H){"use strict";H.exports=b;function b(e,c){for(var w=new Array(arguments.length-1),S=0,v=2,u=!0;v<arguments.length;)w[S++]=arguments[v++];return new Promise(function(s,F){w[S]=function(I){if(u)if(u=!1,I)F(I);else{for(var x=new Array(arguments.length-1),E=0;E<x.length;)x[E++]=arguments[E];s.apply(null,x)}};try{e.apply(c||null,w)}catch(g){u&&(u=!1,F(g))}})}},98660:function(H,b){"use strict";var e=b;e.length=function(a){var s=a.length;if(!s)return 0;for(var F=0;--s%4>1&&a.charAt(s)==="=";)++F;return Math.ceil(a.length*3)/4-F};for(var c=new Array(64),w=new Array(123),S=0;S<64;)w[c[S]=S<26?S+65:S<52?S+71:S<62?S-4:S-59|43]=S++;e.encode=function(a,s,F){for(var g=null,I=[],x=0,E=0,f;s<F;){var l=a[s++];switch(E){case 0:I[x++]=c[l>>2],f=(l&3)<<4,E=1;break;case 1:I[x++]=c[f|l>>4],f=(l&15)<<2,E=2;break;case 2:I[x++]=c[f|l>>6],I[x++]=c[l&63],E=0;break}x>8191&&((g||(g=[])).push(String.fromCharCode.apply(String,I)),x=0)}return E&&(I[x++]=c[f],I[x++]=61,E===1&&(I[x++]=61)),g?(x&&g.push(String.fromCharCode.apply(String,I.slice(0,x))),g.join("")):String.fromCharCode.apply(String,I.slice(0,x))};var v="invalid encoding";e.decode=function(a,s,F){for(var g=F,I=0,x,E=0;E<a.length;){var f=a.charCodeAt(E++);if(f===61&&I>1)break;if((f=w[f])===void 0)throw Error(v);switch(I){case 0:x=f,I=1;break;case 1:s[F++]=x<<2|(f&48)>>4,x=f,I=2;break;case 2:s[F++]=(x&15)<<4|(f&60)>>2,x=f,I=3;break;case 3:s[F++]=(x&3)<<6|f,I=0;break}}if(I===1)throw Error(v);return F-g},e.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}},23745:function(H){"use strict";H.exports=b;function b(){this._listeners={}}b.prototype.on=function(c,w,S){return(this._listeners[c]||(this._listeners[c]=[])).push({fn:w,ctx:S||this}),this},b.prototype.off=function(c,w){if(c===void 0)this._listeners={};else if(w===void 0)this._listeners[c]=[];else for(var S=this._listeners[c],v=0;v<S.length;)S[v].fn===w?S.splice(v,1):++v;return this},b.prototype.emit=function(c){var w=this._listeners[c];if(w){for(var S=[],v=1;v<arguments.length;)S.push(arguments[v++]);for(v=0;v<w.length;)w[v].fn.apply(w[v++].ctx,S)}return this}},19059:function(H){"use strict";H.exports=b(b);function b(v){return typeof Float32Array<"u"?function(){var u=new Float32Array([-0]),a=new Uint8Array(u.buffer),s=a[3]===128;function F(E,f,l){u[0]=E,f[l]=a[0],f[l+1]=a[1],f[l+2]=a[2],f[l+3]=a[3]}function g(E,f,l){u[0]=E,f[l]=a[3],f[l+1]=a[2],f[l+2]=a[1],f[l+3]=a[0]}v.writeFloatLE=s?F:g,v.writeFloatBE=s?g:F;function I(E,f){return a[0]=E[f],a[1]=E[f+1],a[2]=E[f+2],a[3]=E[f+3],u[0]}function x(E,f){return a[3]=E[f],a[2]=E[f+1],a[1]=E[f+2],a[0]=E[f+3],u[0]}v.readFloatLE=s?I:x,v.readFloatBE=s?x:I}():function(){function u(s,F,g,I){var x=F<0?1:0;if(x&&(F=-F),F===0)s(1/F>0?0:2147483648,g,I);else if(isNaN(F))s(2143289344,g,I);else if(F>34028234663852886e22)s((x<<31|2139095040)>>>0,g,I);else if(F<11754943508222875e-54)s((x<<31|Math.round(F/1401298464324817e-60))>>>0,g,I);else{var E=Math.floor(Math.log(F)/Math.LN2),f=Math.round(F*Math.pow(2,-E)*8388608)&8388607;s((x<<31|E+127<<23|f)>>>0,g,I)}}v.writeFloatLE=u.bind(null,e),v.writeFloatBE=u.bind(null,c);function a(s,F,g){var I=s(F,g),x=(I>>31)*2+1,E=I>>>23&255,f=I&8388607;return E===255?f?NaN:x*(1/0):E===0?x*1401298464324817e-60*f:x*Math.pow(2,E-150)*(f+8388608)}v.readFloatLE=a.bind(null,w),v.readFloatBE=a.bind(null,S)}(),typeof Float64Array<"u"?function(){var u=new Float64Array([-0]),a=new Uint8Array(u.buffer),s=a[7]===128;function F(E,f,l){u[0]=E,f[l]=a[0],f[l+1]=a[1],f[l+2]=a[2],f[l+3]=a[3],f[l+4]=a[4],f[l+5]=a[5],f[l+6]=a[6],f[l+7]=a[7]}function g(E,f,l){u[0]=E,f[l]=a[7],f[l+1]=a[6],f[l+2]=a[5],f[l+3]=a[4],f[l+4]=a[3],f[l+5]=a[2],f[l+6]=a[1],f[l+7]=a[0]}v.writeDoubleLE=s?F:g,v.writeDoubleBE=s?g:F;function I(E,f){return a[0]=E[f],a[1]=E[f+1],a[2]=E[f+2],a[3]=E[f+3],a[4]=E[f+4],a[5]=E[f+5],a[6]=E[f+6],a[7]=E[f+7],u[0]}function x(E,f){return a[7]=E[f],a[6]=E[f+1],a[5]=E[f+2],a[4]=E[f+3],a[3]=E[f+4],a[2]=E[f+5],a[1]=E[f+6],a[0]=E[f+7],u[0]}v.readDoubleLE=s?I:x,v.readDoubleBE=s?x:I}():function(){function u(s,F,g,I,x,E){var f=I<0?1:0;if(f&&(I=-I),I===0)s(0,x,E+F),s(1/I>0?0:2147483648,x,E+g);else if(isNaN(I))s(0,x,E+F),s(2146959360,x,E+g);else if(I>17976931348623157e292)s(0,x,E+F),s((f<<31|2146435072)>>>0,x,E+g);else{var l;if(I<22250738585072014e-324)l=I/5e-324,s(l>>>0,x,E+F),s((f<<31|l/4294967296)>>>0,x,E+g);else{var d=Math.floor(Math.log(I)/Math.LN2);d===1024&&(d=1023),l=I*Math.pow(2,-d),s(l*4503599627370496>>>0,x,E+F),s((f<<31|d+1023<<20|l*1048576&1048575)>>>0,x,E+g)}}}v.writeDoubleLE=u.bind(null,e,0,4),v.writeDoubleBE=u.bind(null,c,4,0);function a(s,F,g,I,x){var E=s(I,x+F),f=s(I,x+g),l=(f>>31)*2+1,d=f>>>20&2047,O=4294967296*(f&1048575)+E;return d===2047?O?NaN:l*(1/0):d===0?l*5e-324*O:l*Math.pow(2,d-1075)*(O+4503599627370496)}v.readDoubleLE=a.bind(null,w,0,4),v.readDoubleBE=a.bind(null,S,4,0)}(),v}function e(v,u,a){u[a]=v&255,u[a+1]=v>>>8&255,u[a+2]=v>>>16&255,u[a+3]=v>>>24}function c(v,u,a){u[a]=v>>>24,u[a+1]=v>>>16&255,u[a+2]=v>>>8&255,u[a+3]=v&255}function w(v,u){return(v[u]|v[u+1]<<8|v[u+2]<<16|v[u+3]<<24)>>>0}function S(v,u){return(v[u]<<24|v[u+1]<<16|v[u+2]<<8|v[u+3])>>>0}},50491:function(module){"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(H){}return null}},93646:function(H){"use strict";H.exports=b;function b(e,c,w){var S=w||8192,v=S>>>1,u=null,a=S;return function(F){if(F<1||F>v)return e(F);a+F>S&&(u=e(S),a=0);var g=c.call(u,a,a+=F);return a&7&&(a=(a|7)+1),g}}},68375:function(H,b){"use strict";var e=b;e.length=function(w){for(var S=0,v=0,u=0;u<w.length;++u)v=w.charCodeAt(u),v<128?S+=1:v<2048?S+=2:(v&64512)===55296&&(w.charCodeAt(u+1)&64512)===56320?(++u,S+=4):S+=3;return S},e.read=function(w,S,v){var u=v-S;if(u<1)return"";for(var a=null,s=[],F=0,g;S<v;)g=w[S++],g<128?s[F++]=g:g>191&&g<224?s[F++]=(g&31)<<6|w[S++]&63:g>239&&g<365?(g=((g&7)<<18|(w[S++]&63)<<12|(w[S++]&63)<<6|w[S++]&63)-65536,s[F++]=55296+(g>>10),s[F++]=56320+(g&1023)):s[F++]=(g&15)<<12|(w[S++]&63)<<6|w[S++]&63,F>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),F=0);return a?(F&&a.push(String.fromCharCode.apply(String,s.slice(0,F))),a.join("")):String.fromCharCode.apply(String,s.slice(0,F))},e.write=function(w,S,v){for(var u=v,a,s,F=0;F<w.length;++F)a=w.charCodeAt(F),a<128?S[v++]=a:a<2048?(S[v++]=a>>6|192,S[v++]=a&63|128):(a&64512)===55296&&((s=w.charCodeAt(F+1))&64512)===56320?(a=65536+((a&1023)<<10)+(s&1023),++F,S[v++]=a>>18|240,S[v++]=a>>12&63|128,S[v++]=a>>6&63|128,S[v++]=a&63|128):(S[v++]=a>>12|224,S[v++]=a>>6&63|128,S[v++]=a&63|128);return v-u}},62446:function(H,b,e){"use strict";var c=e(52393)(!0);H.exports=function(w,S,v){return S+(v?c(w,S).length:1)}},66677:function(H){H.exports=function(b,e,c,w){if(!(b instanceof e)||w!==void 0&&w in b)throw TypeError(c+": incorrect invocation!");return b}},89555:function(H,b,e){"use strict";var c=e(21687),w=e(83334),S=e(76929);H.exports=[].copyWithin||function(u,a){var s=c(this),F=S(s.length),g=w(u,F),I=w(a,F),x=arguments.length>2?arguments[2]:void 0,E=Math.min((x===void 0?F:w(x,F))-I,F-g),f=1;for(I<g&&g<I+E&&(f=-1,I+=E-1,g+=E-1);E-- >0;)I in s?s[g]=s[I]:delete s[g],g+=f,I+=f;return s}},24039:function(H,b,e){"use strict";var c=e(21687),w=e(83334),S=e(76929);H.exports=function(u){for(var a=c(this),s=S(a.length),F=arguments.length,g=w(F>1?arguments[1]:void 0,s),I=F>2?arguments[2]:void 0,x=I===void 0?s:w(I,s);x>g;)a[g++]=u;return a}},45960:function(H,b,e){var c=e(53120),w=e(46276),S=e(21687),v=e(76929),u=e(81031);H.exports=function(a,s){var F=a==1,g=a==2,I=a==3,x=a==4,E=a==6,f=a==5||E,l=s||u;return function(d,O,m){for(var p=S(d),o=w(p),h=c(O,m,3),r=v(o.length),y=0,R=F?l(d,r):g?l(d,0):void 0,D,B;r>y;y++)if((f||y in o)&&(D=o[y],B=h(D,y,p),a)){if(F)R[y]=B;else if(B)switch(a){case 3:return!0;case 5:return D;case 6:return y;case 2:R.push(D)}else if(x)return!1}return E?-1:I||x?x:R}}},10694:function(H,b,e){var c=e(64620),w=e(16321),S=e(25079)("species");H.exports=function(v){var u;return w(v)&&(u=v.constructor,typeof u=="function"&&(u===Array||w(u.prototype))&&(u=void 0),c(u)&&(u=u[S],u===null&&(u=void 0))),u===void 0?Array:u}},81031:function(H,b,e){var c=e(10694);H.exports=function(w,S){return new(c(w))(S)}},35379:function(H,b,e){var c=e(5757),w=e(25079)("toStringTag"),S=c(function(){return arguments}())=="Arguments",v=function(u,a){try{return u[a]}catch{}};H.exports=function(u){var a,s,F;return u===void 0?"Undefined":u===null?"Null":typeof(s=v(a=Object(u),w))=="string"?s:S?c(a):(F=c(a))=="Object"&&typeof a.callee=="function"?"Arguments":F}},38577:function(H,b,e){"use strict";var c=e(78944).f,w=e(83727),S=e(48327),v=e(53120),u=e(66677),a=e(11317),s=e(75633),F=e(74010),g=e(40575),I=e(63382),x=e(11629).fastKey,E=e(75941),f=I?"_s":"size",l=function(d,O){var m=x(O),p;if(m!=="F")return d._i[m];for(p=d._f;p;p=p.n)if(p.k==O)return p};H.exports={getConstructor:function(d,O,m,p){var o=d(function(h,r){u(h,o,O,"_i"),h._t=O,h._i=w(null),h._f=void 0,h._l=void 0,h[f]=0,r!=null&&a(r,m,h[p],h)});return S(o.prototype,{clear:function(){for(var r=E(this,O),y=r._i,R=r._f;R;R=R.n)R.r=!0,R.p&&(R.p=R.p.n=void 0),delete y[R.i];r._f=r._l=void 0,r[f]=0},delete:function(h){var r=E(this,O),y=l(r,h);if(y){var R=y.n,D=y.p;delete r._i[y.i],y.r=!0,D&&(D.n=R),R&&(R.p=D),r._f==y&&(r._f=R),r._l==y&&(r._l=D),r[f]--}return!!y},forEach:function(r){E(this,O);for(var y=v(r,arguments.length>1?arguments[1]:void 0,3),R;R=R?R.n:this._f;)for(y(R.v,R.k,this);R&&R.r;)R=R.p},has:function(r){return!!l(E(this,O),r)}}),I&&c(o.prototype,"size",{get:function(){return E(this,O)[f]}}),o},def:function(d,O,m){var p=l(d,O),o,h;return p?p.v=m:(d._l=p={i:h=x(O,!0),k:O,v:m,p:o=d._l,n:void 0,r:!1},d._f||(d._f=p),o&&(o.n=p),d[f]++,h!=="F"&&(d._i[h]=p)),d},getEntry:l,setStrong:function(d,O,m){s(d,O,function(p,o){this._t=E(p,O),this._k=o,this._l=void 0},function(){for(var p=this,o=p._k,h=p._l;h&&h.r;)h=h.p;return!p._t||!(p._l=h=h?h.n:p._t._f)?(p._t=void 0,F(1)):o=="keys"?F(0,h.k):o=="values"?F(0,h.v):F(0,[h.k,h.v])},m?"entries":"values",!m,!0),g(O)}}},88628:function(H,b,e){"use strict";var c=e(58727),w=e(764),S=e(63408),v=e(48327),u=e(11629),a=e(11317),s=e(66677),F=e(64620),g=e(15930),I=e(91685),x=e(2376),E=e(87889);H.exports=function(f,l,d,O,m,p){var o=c[f],h=o,r=m?"set":"add",y=h&&h.prototype,R={},D=function(et){var ut=y[et];S(y,et,et=="delete"?function(dt){return p&&!F(dt)?!1:ut.call(this,dt===0?0:dt)}:et=="has"?function(it){return p&&!F(it)?!1:ut.call(this,it===0?0:it)}:et=="get"?function(it){return p&&!F(it)?void 0:ut.call(this,it===0?0:it)}:et=="add"?function(it){return ut.call(this,it===0?0:it),this}:function(it,gt){return ut.call(this,it===0?0:it,gt),this})};if(typeof h!="function"||!(p||y.forEach&&!g(function(){new h().entries().next()})))h=O.getConstructor(l,f,m,r),v(h.prototype,d),u.NEED=!0;else{var B=new h,lt=B[r](p?{}:-0,1)!=B,st=g(function(){B.has(1)}),Y=I(function(et){new h(et)}),yt=!p&&g(function(){for(var et=new h,ut=5;ut--;)et[r](ut,ut);return!et.has(-0)});Y||(h=l(function(et,ut){s(et,h,f);var dt=E(new o,et,h);return ut!=null&&a(ut,m,dt[r],dt),dt}),h.prototype=y,y.constructor=h),(st||yt)&&(D("delete"),D("has"),m&&D("get")),(yt||lt)&&D(r),p&&y.clear&&delete y.clear}return x(h,f),R[f]=h,w(w.G+w.W+w.F*(h!=o),R),p||O.setStrong(h,f,m),h}},46176:function(H,b,e){"use strict";e(12027);var c=e(63408),w=e(65836),S=e(15930),v=e(24833),u=e(25079),a=e(1158),s=u("species"),F=!S(function(){var I=/./;return I.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(I,"$<a>")!=="7"}),g=function(){var I=/(?:)/,x=I.exec;I.exec=function(){return x.apply(this,arguments)};var E="ab".split(I);return E.length===2&&E[0]==="a"&&E[1]==="b"}();H.exports=function(I,x,E){var f=u(I),l=!S(function(){var h={};return h[f]=function(){return 7},""[I](h)!=7}),d=l?!S(function(){var h=!1,r=/a/;return r.exec=function(){return h=!0,null},I==="split"&&(r.constructor={},r.constructor[s]=function(){return r}),r[f](""),!h}):void 0;if(!l||!d||I==="replace"&&!F||I==="split"&&!g){var O=/./[f],m=E(v,f,""[I],function(r,y,R,D,B){return y.exec===a?l&&!B?{done:!0,value:O.call(y,R,D)}:{done:!0,value:r.call(R,y,D)}:{done:!1}}),p=m[0],o=m[1];c(String.prototype,I,p),w(RegExp.prototype,f,x==2?function(h,r){return o.call(h,this,r)}:function(h){return o.call(h,this)})}}},87894:function(H,b,e){"use strict";var c=e(72462);H.exports=function(){var w=c(this),S="";return w.global&&(S+="g"),w.ignoreCase&&(S+="i"),w.multiline&&(S+="m"),w.unicode&&(S+="u"),w.sticky&&(S+="y"),S}},11317:function(H,b,e){var c=e(53120),w=e(20501),S=e(15478),v=e(72462),u=e(76929),a=e(89576),s={},F={},g=H.exports=function(I,x,E,f,l){var d=l?function(){return I}:a(I),O=c(E,f,x?2:1),m=0,p,o,h,r;if(typeof d!="function")throw TypeError(I+" is not iterable!");if(S(d)){for(p=u(I.length);p>m;m++)if(r=x?O(v(o=I[m])[0],o[1]):O(I[m]),r===s||r===F)return r}else for(h=d.call(I);!(o=h.next()).done;)if(r=w(h,O,o.value,x),r===s||r===F)return r};g.BREAK=s,g.RETURN=F},87889:function(H,b,e){var c=e(64620),w=e(19368).set;H.exports=function(S,v,u){var a=v.constructor,s;return a!==u&&typeof a=="function"&&(s=a.prototype)!==u.prototype&&c(s)&&w&&w(S,s),S}},15478:function(H,b,e){var c=e(47894),w=e(25079)("iterator"),S=Array.prototype;H.exports=function(v){return v!==void 0&&(c.Array===v||S[w]===v)}},16321:function(H,b,e){var c=e(5757);H.exports=Array.isArray||function(S){return c(S)=="Array"}},16190:function(H,b,e){var c=e(64620),w=e(5757),S=e(25079)("match");H.exports=function(v){var u;return c(v)&&((u=v[S])!==void 0?!!u:w(v)=="RegExp")}},20501:function(H,b,e){var c=e(72462);H.exports=function(w,S,v,u){try{return u?S(c(v)[0],v[1]):S(v)}catch(s){var a=w.return;throw a!==void 0&&c(a.call(w)),s}}},91685:function(H,b,e){var c=e(25079)("iterator"),w=!1;try{var S=[7][c]();S.return=function(){w=!0},Array.from(S,function(){throw 2})}catch{}H.exports=function(v,u){if(!u&&!w)return!1;var a=!1;try{var s=[7],F=s[c]();F.next=function(){return{done:a=!0}},s[c]=function(){return F},v(s)}catch{}return a}},11629:function(H,b,e){var c=e(27174)("meta"),w=e(64620),S=e(89191),v=e(78944).f,u=0,a=Object.isExtensible||function(){return!0},s=!e(15930)(function(){return a(Object.preventExtensions({}))}),F=function(f){v(f,c,{value:{i:"O"+ ++u,w:{}}})},g=function(f,l){if(!w(f))return typeof f=="symbol"?f:(typeof f=="string"?"S":"P")+f;if(!S(f,c)){if(!a(f))return"F";if(!l)return"E";F(f)}return f[c].i},I=function(f,l){if(!S(f,c)){if(!a(f))return!0;if(!l)return!1;F(f)}return f[c].w},x=function(f){return s&&E.NEED&&a(f)&&!S(f,c)&&F(f),f},E=H.exports={KEY:c,NEED:!1,fastKey:g,getWeak:I,onFreeze:x}},96184:function(H,b,e){var c=e(48318),w=e(47908),S=e(92904),v=e(53443),u=e(89191),a=e(79287),s=Object.getOwnPropertyDescriptor;b.f=e(63382)?s:function(g,I){if(g=S(g),I=v(I,!0),a)try{return s(g,I)}catch{}if(u(g,I))return w(!c.f.call(g,I),g[I])}},20441:function(H,b,e){var c=e(30277),w=e(49003).concat("length","prototype");b.f=Object.getOwnPropertyNames||function(v){return c(v,w)}},48318:function(H,b){b.f={}.propertyIsEnumerable},48327:function(H,b,e){var c=e(63408);H.exports=function(w,S,v){for(var u in S)c(w,u,S[u],v);return w}},2241:function(H,b,e){"use strict";var c=e(35379),w=RegExp.prototype.exec;H.exports=function(S,v){var u=S.exec;if(typeof u=="function"){var a=u.call(S,v);if(typeof a!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if(c(S)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return w.call(S,v)}},1158:function(H,b,e){"use strict";var c=e(87894),w=RegExp.prototype.exec,S=String.prototype.replace,v=w,u="lastIndex",a=function(){var g=/a/,I=/b*/g;return w.call(g,"a"),w.call(I,"a"),g[u]!==0||I[u]!==0}(),s=/()??/.exec("")[1]!==void 0,F=a||s;F&&(v=function(I){var x=this,E,f,l,d;return s&&(f=new RegExp("^"+x.source+"$(?!\\s)",c.call(x))),a&&(E=x[u]),l=w.call(x,I),a&&l&&(x[u]=x.global?l.index+l[0].length:E),s&&l&&l.length>1&&S.call(l[0],f,function(){for(d=1;d<arguments.length-2;d++)arguments[d]===void 0&&(l[d]=void 0)}),l}),H.exports=v},19368:function(H,b,e){var c=e(64620),w=e(72462),S=function(v,u){if(w(v),!c(u)&&u!==null)throw TypeError(u+": can't set as prototype!")};H.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(v,u,a){try{a=e(53120)(Function.call,e(96184).f(Object.prototype,"__proto__").set,2),a(v,[]),u=!(v instanceof Array)}catch{u=!0}return function(F,g){return S(F,g),u?F.__proto__=g:a(F,g),F}}({},!1):void 0),check:S}},40575:function(H,b,e){"use strict";var c=e(58727),w=e(78944),S=e(63382),v=e(25079)("species");H.exports=function(u){var a=c[u];S&&a&&!a[v]&&w.f(a,v,{configurable:!0,get:function(){return this}})}},70849:function(H,b,e){var c=e(72462),w=e(147),S=e(25079)("species");H.exports=function(v,u){var a=c(v).constructor,s;return a===void 0||(s=c(a)[S])==null?u:w(s)}},8537:function(H,b,e){"use strict";var c=e(15930);H.exports=function(w,S){return!!w&&c(function(){S?w.call(null,function(){},1):w.call(null)})}},52393:function(H,b,e){var c=e(98434),w=e(24833);H.exports=function(S){return function(v,u){var a=String(w(v)),s=c(u),F=a.length,g,I;return s<0||s>=F?S?"":void 0:(g=a.charCodeAt(s),g<55296||g>56319||s+1===F||(I=a.charCodeAt(s+1))<56320||I>57343?S?a.charAt(s):g:S?a.slice(s,s+2):(g-55296<<10)+(I-56320)+65536)}}},9943:function(H,b,e){var c=e(98434),w=e(76929);H.exports=function(S){if(S===void 0)return 0;var v=c(S),u=w(v);if(v!==u)throw RangeError("Wrong length!");return u}},37912:function(H,b,e){"use strict";if(e(63382)){var c=e(69379),w=e(58727),S=e(15930),v=e(764),u=e(85564),a=e(76416),s=e(53120),F=e(66677),g=e(47908),I=e(65836),x=e(48327),E=e(98434),f=e(76929),l=e(9943),d=e(83334),O=e(53443),m=e(89191),p=e(35379),o=e(64620),h=e(21687),r=e(15478),y=e(83727),R=e(5904),D=e(20441).f,B=e(89576),lt=e(27174),st=e(25079),Y=e(45960),yt=e(23512),et=e(70849),ut=e(60404),dt=e(47894),it=e(91685),gt=e(40575),Pt=e(24039),ft=e(89555),St=e(78944),At=e(96184),It=St.f,wt=At.f,_=w.RangeError,rt=w.TypeError,Q=w.Uint8Array,tt="ArrayBuffer",xt="Shared"+tt,ot="BYTES_PER_ELEMENT",nt="prototype",V=Array[nt],G=a.ArrayBuffer,T=a.DataView,N=Y(0),k=Y(2),$=Y(3),ht=Y(4),q=Y(5),j=Y(6),W=yt(!0),Z=yt(!1),z=ut.values,X=ut.keys,K=ut.entries,vt=V.lastIndexOf,ct=V.reduce,Mt=V.reduceRight,J=V.join,Tt=V.sort,jt=V.slice,zt=V.toString,$t=V.toLocaleString,Jt=st("iterator"),Wt=st("toStringTag"),te=lt("typed_constructor"),oe=lt("def_constructor"),ve=u.CONSTR,Qt=u.TYPED,Dt=u.VIEW,le="Wrong length!",Me=Y(1,function(Bt,Ft){return ie(et(Bt,Bt[oe]),Ft)}),Xt=S(function(){return new Q(new Uint16Array([1]).buffer)[0]===1}),Se=!!Q&&!!Q[nt].set&&S(function(){new Q(1).set({})}),re=function(Bt,Ft){var Gt=E(Bt);if(Gt<0||Gt%Ft)throw _("Wrong offset!");return Gt},Vt=function(Bt){if(o(Bt)&&Qt in Bt)return Bt;throw rt(Bt+" is not a typed array!")},ie=function(Bt,Ft){if(!(o(Bt)&&te in Bt))throw rt("It is not a typed array constructor!");return new Bt(Ft)},fe=function(Bt,Ft){return qt(et(Bt,Bt[oe]),Ft)},qt=function(Bt,Ft){for(var Gt=0,Ut=Ft.length,Nt=ie(Bt,Ut);Ut>Gt;)Nt[Gt]=Ft[Gt++];return Nt},ue=function(Bt,Ft,Gt){It(Bt,Ft,{get:function(){return this._d[Gt]}})},ge=function(Ft){var Gt=h(Ft),Ut=arguments.length,Nt=Ut>1?arguments[1]:void 0,ye=Nt!==void 0,Le=B(Gt),bt,me,De,we,We,se;if(Le!=null&&!r(Le)){for(se=Le.call(Gt),De=[],bt=0;!(We=se.next()).done;bt++)De.push(We.value);Gt=De}for(ye&&Ut>2&&(Nt=s(Nt,arguments[2],2)),bt=0,me=f(Gt.length),we=ie(this,me);me>bt;bt++)we[bt]=ye?Nt(Gt[bt],bt):Gt[bt];return we},er=function(){for(var Ft=0,Gt=arguments.length,Ut=ie(this,Gt);Gt>Ft;)Ut[Ft]=arguments[Ft++];return Ut},be=!!Q&&S(function(){$t.call(new Q(1))}),Ee=function(){return $t.apply(be?jt.call(Vt(this)):Vt(this),arguments)},Ce={copyWithin:function(Ft,Gt){return ft.call(Vt(this),Ft,Gt,arguments.length>2?arguments[2]:void 0)},every:function(Ft){return ht(Vt(this),Ft,arguments.length>1?arguments[1]:void 0)},fill:function(Ft){return Pt.apply(Vt(this),arguments)},filter:function(Ft){return fe(this,k(Vt(this),Ft,arguments.length>1?arguments[1]:void 0))},find:function(Ft){return q(Vt(this),Ft,arguments.length>1?arguments[1]:void 0)},findIndex:function(Ft){return j(Vt(this),Ft,arguments.length>1?arguments[1]:void 0)},forEach:function(Ft){N(Vt(this),Ft,arguments.length>1?arguments[1]:void 0)},indexOf:function(Ft){return Z(Vt(this),Ft,arguments.length>1?arguments[1]:void 0)},includes:function(Ft){return W(Vt(this),Ft,arguments.length>1?arguments[1]:void 0)},join:function(Ft){return J.apply(Vt(this),arguments)},lastIndexOf:function(Ft){return vt.apply(Vt(this),arguments)},map:function(Ft){return Me(Vt(this),Ft,arguments.length>1?arguments[1]:void 0)},reduce:function(Ft){return ct.apply(Vt(this),arguments)},reduceRight:function(Ft){return Mt.apply(Vt(this),arguments)},reverse:function(){for(var Ft=this,Gt=Vt(Ft).length,Ut=Math.floor(Gt/2),Nt=0,ye;Nt<Ut;)ye=Ft[Nt],Ft[Nt++]=Ft[--Gt],Ft[Gt]=ye;return Ft},some:function(Ft){return $(Vt(this),Ft,arguments.length>1?arguments[1]:void 0)},sort:function(Ft){return Tt.call(Vt(this),Ft)},subarray:function(Ft,Gt){var Ut=Vt(this),Nt=Ut.length,ye=d(Ft,Nt);return new(et(Ut,Ut[oe]))(Ut.buffer,Ut.byteOffset+ye*Ut.BYTES_PER_ELEMENT,f((Gt===void 0?Nt:d(Gt,Nt))-ye))}},Ke=function(Ft,Gt){return fe(this,jt.call(Vt(this),Ft,Gt))},ze=function(Ft){Vt(this);var Gt=re(arguments[1],1),Ut=this.length,Nt=h(Ft),ye=f(Nt.length),Le=0;if(ye+Gt>Ut)throw _(le);for(;Le<ye;)this[Gt+Le]=Nt[Le++]},Re={entries:function(){return K.call(Vt(this))},keys:function(){return X.call(Vt(this))},values:function(){return z.call(Vt(this))}},Ge=function(Bt,Ft){return o(Bt)&&Bt[Qt]&&typeof Ft!="symbol"&&Ft in Bt&&String(+Ft)==String(Ft)},Ie=function(Ft,Gt){return Ge(Ft,Gt=O(Gt,!0))?g(2,Ft[Gt]):wt(Ft,Gt)},Ue=function(Ft,Gt,Ut){return Ge(Ft,Gt=O(Gt,!0))&&o(Ut)&&m(Ut,"value")&&!m(Ut,"get")&&!m(Ut,"set")&&!Ut.configurable&&(!m(Ut,"writable")||Ut.writable)&&(!m(Ut,"enumerable")||Ut.enumerable)?(Ft[Gt]=Ut.value,Ft):It(Ft,Gt,Ut)};ve||(At.f=Ie,St.f=Ue),v(v.S+v.F*!ve,"Object",{getOwnPropertyDescriptor:Ie,defineProperty:Ue}),S(function(){zt.call({})})&&(zt=$t=function(){return J.call(this)});var Pe=x({},Ce);x(Pe,Re),I(Pe,Jt,Re.values),x(Pe,{slice:Ke,set:ze,constructor:function(){},toString:zt,toLocaleString:Ee}),ue(Pe,"buffer","b"),ue(Pe,"byteOffset","o"),ue(Pe,"byteLength","l"),ue(Pe,"length","e"),It(Pe,Wt,{get:function(){return this[Qt]}}),H.exports=function(Bt,Ft,Gt,Ut){Ut=!!Ut;var Nt=Bt+(Ut?"Clamped":"")+"Array",ye="get"+Bt,Le="set"+Bt,bt=w[Nt],me=bt||{},De=bt&&R(bt),we=!bt||!u.ABV,We={},se=bt&&bt[nt],Mr=function(he,Ht){var ce=he._d;return ce.v[ye](Ht*Ft+ce.o,Xt)},fr=function(he,Ht,ce){var Oe=he._d;Ut&&(ce=(ce=Math.round(ce))<0?0:ce>255?255:ce&255),Oe.v[Le](Ht*Ft+Oe.o,ce,Xt)},hr=function(he,Ht){It(he,Ht,{get:function(){return Mr(this,Ht)},set:function(ce){return fr(this,Ht,ce)},enumerable:!0})};we?(bt=Gt(function(he,Ht,ce,Oe){F(he,bt,Nt,"_d");var Xe=0,Je=0,Be,Ae,Ne,dr;if(!o(Ht))Ne=l(Ht),Ae=Ne*Ft,Be=new G(Ae);else if(Ht instanceof G||(dr=p(Ht))==tt||dr==xt){Be=Ht,Je=re(ce,Ft);var nr=Ht.byteLength;if(Oe===void 0){if(nr%Ft||(Ae=nr-Je,Ae<0))throw _(le)}else if(Ae=f(Oe)*Ft,Ae+Je>nr)throw _(le);Ne=Ae/Ft}else return Qt in Ht?qt(bt,Ht):ge.call(bt,Ht);for(I(he,"_d",{b:Be,o:Je,l:Ae,e:Ne,v:new T(Be)});Xe<Ne;)hr(he,Xe++)}),se=bt[nt]=y(Pe),I(se,"constructor",bt)):(!S(function(){bt(1)})||!S(function(){new bt(-1)})||!it(function(he){new bt,new bt(null),new bt(1.5),new bt(he)},!0))&&(bt=Gt(function(he,Ht,ce,Oe){F(he,bt,Nt);var Xe;return o(Ht)?Ht instanceof G||(Xe=p(Ht))==tt||Xe==xt?Oe!==void 0?new me(Ht,re(ce,Ft),Oe):ce!==void 0?new me(Ht,re(ce,Ft)):new me(Ht):Qt in Ht?qt(bt,Ht):ge.call(bt,Ht):new me(l(Ht))}),N(De!==Function.prototype?D(me).concat(D(De)):D(me),function(he){he in bt||I(bt,he,me[he])}),bt[nt]=se,c||(se.constructor=bt));var Ze=se[Jt],rr=!!Ze&&(Ze.name=="values"||Ze.name==null),cr=Re.values;I(bt,te,!0),I(se,Qt,Nt),I(se,Dt,!0),I(se,oe,bt),(Ut?new bt(1)[Wt]!=Nt:!(Wt in se))&&It(se,Wt,{get:function(){return Nt}}),We[Nt]=bt,v(v.G+v.W+v.F*(bt!=me),We),v(v.S,Nt,{BYTES_PER_ELEMENT:Ft}),v(v.S+v.F*S(function(){me.of.call(bt,1)}),Nt,{from:ge,of:er}),ot in se||I(se,ot,Ft),v(v.P,Nt,Ce),gt(Nt),v(v.P+v.F*Se,Nt,{set:ze}),v(v.P+v.F*!rr,Nt,Re),!c&&se.toString!=zt&&(se.toString=zt),v(v.P+v.F*S(function(){new bt(1).slice()}),Nt,{slice:Ke}),v(v.P+v.F*(S(function(){return[1,2].toLocaleString()!=new bt([1,2]).toLocaleString()})||!S(function(){se.toLocaleString.call([1,2])})),Nt,{toLocaleString:Ee}),dt[Nt]=rr?Ze:cr,!c&&!rr&&I(se,Jt,cr)}}else H.exports=function(){}},76416:function(H,b,e){"use strict";var c=e(58727),w=e(63382),S=e(69379),v=e(85564),u=e(65836),a=e(48327),s=e(15930),F=e(66677),g=e(98434),I=e(76929),x=e(9943),E=e(20441).f,f=e(78944).f,l=e(24039),d=e(2376),O="ArrayBuffer",m="DataView",p="prototype",o="Wrong length!",h="Wrong index!",r=c[O],y=c[m],R=c.Math,D=c.RangeError,B=c.Infinity,lt=r,st=R.abs,Y=R.pow,yt=R.floor,et=R.log,ut=R.LN2,dt="buffer",it="byteLength",gt="byteOffset",Pt=w?"_b":dt,ft=w?"_l":it,St=w?"_o":gt;function At(q,j,W){var Z=new Array(W),z=W*8-j-1,X=(1<<z)-1,K=X>>1,vt=j===23?Y(2,-24)-Y(2,-77):0,ct=0,Mt=q<0||q===0&&1/q<0?1:0,J,Tt,jt;for(q=st(q),q!=q||q===B?(Tt=q!=q?1:0,J=X):(J=yt(et(q)/ut),q*(jt=Y(2,-J))<1&&(J--,jt*=2),J+K>=1?q+=vt/jt:q+=vt*Y(2,1-K),q*jt>=2&&(J++,jt/=2),J+K>=X?(Tt=0,J=X):J+K>=1?(Tt=(q*jt-1)*Y(2,j),J=J+K):(Tt=q*Y(2,K-1)*Y(2,j),J=0));j>=8;Z[ct++]=Tt&255,Tt/=256,j-=8);for(J=J<<j|Tt,z+=j;z>0;Z[ct++]=J&255,J/=256,z-=8);return Z[--ct]|=Mt*128,Z}function It(q,j,W){var Z=W*8-j-1,z=(1<<Z)-1,X=z>>1,K=Z-7,vt=W-1,ct=q[vt--],Mt=ct&127,J;for(ct>>=7;K>0;Mt=Mt*256+q[vt],vt--,K-=8);for(J=Mt&(1<<-K)-1,Mt>>=-K,K+=j;K>0;J=J*256+q[vt],vt--,K-=8);if(Mt===0)Mt=1-X;else{if(Mt===z)return J?NaN:ct?-B:B;J=J+Y(2,j),Mt=Mt-X}return(ct?-1:1)*J*Y(2,Mt-j)}function wt(q){return q[3]<<24|q[2]<<16|q[1]<<8|q[0]}function _(q){return[q&255]}function rt(q){return[q&255,q>>8&255]}function Q(q){return[q&255,q>>8&255,q>>16&255,q>>24&255]}function tt(q){return At(q,52,8)}function xt(q){return At(q,23,4)}function ot(q,j,W){f(q[p],j,{get:function(){return this[W]}})}function nt(q,j,W,Z){var z=+W,X=x(z);if(X+j>q[ft])throw D(h);var K=q[Pt]._b,vt=X+q[St],ct=K.slice(vt,vt+j);return Z?ct:ct.reverse()}function V(q,j,W,Z,z,X){var K=+W,vt=x(K);if(vt+j>q[ft])throw D(h);for(var ct=q[Pt]._b,Mt=vt+q[St],J=Z(+z),Tt=0;Tt<j;Tt++)ct[Mt+Tt]=J[X?Tt:j-Tt-1]}if(!v.ABV)r=function(j){F(this,r,O);var W=x(j);this._b=l.call(new Array(W),0),this[ft]=W},y=function(j,W,Z){F(this,y,m),F(j,r,m);var z=j[ft],X=g(W);if(X<0||X>z)throw D("Wrong offset!");if(Z=Z===void 0?z-X:I(Z),X+Z>z)throw D(o);this[Pt]=j,this[St]=X,this[ft]=Z},w&&(ot(r,it,"_l"),ot(y,dt,"_b"),ot(y,it,"_l"),ot(y,gt,"_o")),a(y[p],{getInt8:function(j){return nt(this,1,j)[0]<<24>>24},getUint8:function(j){return nt(this,1,j)[0]},getInt16:function(j){var W=nt(this,2,j,arguments[1]);return(W[1]<<8|W[0])<<16>>16},getUint16:function(j){var W=nt(this,2,j,arguments[1]);return W[1]<<8|W[0]},getInt32:function(j){return wt(nt(this,4,j,arguments[1]))},getUint32:function(j){return wt(nt(this,4,j,arguments[1]))>>>0},getFloat32:function(j){return It(nt(this,4,j,arguments[1]),23,4)},getFloat64:function(j){return It(nt(this,8,j,arguments[1]),52,8)},setInt8:function(j,W){V(this,1,j,_,W)},setUint8:function(j,W){V(this,1,j,_,W)},setInt16:function(j,W){V(this,2,j,rt,W,arguments[2])},setUint16:function(j,W){V(this,2,j,rt,W,arguments[2])},setInt32:function(j,W){V(this,4,j,Q,W,arguments[2])},setUint32:function(j,W){V(this,4,j,Q,W,arguments[2])},setFloat32:function(j,W){V(this,4,j,xt,W,arguments[2])},setFloat64:function(j,W){V(this,8,j,tt,W,arguments[2])}});else{if(!s(function(){r(1)})||!s(function(){new r(-1)})||s(function(){return new r,new r(1.5),new r(NaN),r.name!=O})){r=function(j){return F(this,r),new lt(x(j))};for(var G=r[p]=lt[p],T=E(lt),N=0,k;T.length>N;)(k=T[N++])in r||u(r,k,lt[k]);S||(G.constructor=r)}var $=new y(new r(2)),ht=y[p].setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),($.getInt8(0)||!$.getInt8(1))&&a(y[p],{setInt8:function(j,W){ht.call(this,j,W<<24>>24)},setUint8:function(j,W){ht.call(this,j,W<<24>>24)}},!0)}d(r,O),d(y,m),u(y[p],v.VIEW,!0),b[O]=r,b[m]=y},85564:function(H,b,e){for(var c=e(58727),w=e(65836),S=e(27174),v=S("typed_array"),u=S("view"),a=!!(c.ArrayBuffer&&c.DataView),s=a,F=0,g=9,I,x="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");F<g;)(I=c[x[F++]])?(w(I.prototype,v,!0),w(I.prototype,u,!0)):s=!1;H.exports={ABV:a,CONSTR:s,TYPED:v,VIEW:u}},75941:function(H,b,e){var c=e(64620);H.exports=function(w,S){if(!c(w)||w._t!==S)throw TypeError("Incompatible receiver, "+S+" required!");return w}},89576:function(H,b,e){var c=e(35379),w=e(25079)("iterator"),S=e(47894);H.exports=e(9191).getIteratorMethod=function(v){if(v!=null)return v[w]||v["@@iterator"]||S[c(v)]}},54673:function(H,b,e){"use strict";var c=e(764),w=e(23512)(!1),S=[].indexOf,v=!!S&&1/[1].indexOf(1,-0)<0;c(c.P+c.F*(v||!e(8537)(S)),"Array",{indexOf:function(a){return v?S.apply(this,arguments)||0:w(this,a,arguments[1])}})},27855:function(H,b,e){"use strict";var c=e(38577),w=e(75941),S="Map";H.exports=e(88628)(S,function(v){return function(){return v(this,arguments.length>0?arguments[0]:void 0)}},{get:function(u){var a=c.getEntry(w(this,S),u);return a&&a.v},set:function(u,a){return c.def(w(this,S),u===0?0:u,a)}},c,!0)},12027:function(H,b,e){"use strict";var c=e(1158);e(764)({target:"RegExp",proto:!0,forced:c!==/./.exec},{exec:c})},32107:function(H,b,e){"use strict";var c=e(72462),w=e(21687),S=e(76929),v=e(98434),u=e(62446),a=e(2241),s=Math.max,F=Math.min,g=Math.floor,I=/\$([$&`']|\d\d?|<[^>]*>)/g,x=/\$([$&`']|\d\d?)/g,E=function(f){return f===void 0?f:String(f)};e(46176)("replace",2,function(f,l,d,O){return[function(o,h){var r=f(this),y=o?.[l];return y!==void 0?y.call(o,r,h):d.call(String(r),o,h)},function(p,o){var h=O(d,p,this,o);if(h.done)return h.value;var r=c(p),y=String(this),R=typeof o=="function";R||(o=String(o));var D=r.global;if(D){var B=r.unicode;r.lastIndex=0}for(var lt=[];;){var st=a(r,y);if(st===null||(lt.push(st),!D))break;var Y=String(st[0]);Y===""&&(r.lastIndex=u(y,S(r.lastIndex),B))}for(var yt="",et=0,ut=0;ut<lt.length;ut++){st=lt[ut];for(var dt=String(st[0]),it=s(F(v(st.index),y.length),0),gt=[],Pt=1;Pt<st.length;Pt++)gt.push(E(st[Pt]));var ft=st.groups;if(R){var St=[dt].concat(gt,it,y);ft!==void 0&&St.push(ft);var At=String(o.apply(void 0,St))}else At=m(dt,y,it,gt,ft,o);it>=et&&(yt+=y.slice(et,it)+At,et=it+dt.length)}return yt+y.slice(et)}];function m(p,o,h,r,y,R){var D=h+p.length,B=r.length,lt=x;return y!==void 0&&(y=w(y),lt=I),d.call(R,lt,function(st,Y){var yt;switch(Y.charAt(0)){case"$":return"$";case"&":return p;case"`":return o.slice(0,h);case"'":return o.slice(D);case"<":yt=y[Y.slice(1,-1)];break;default:var et=+Y;if(et===0)return st;if(et>B){var ut=g(et/10);return ut===0?st:ut<=B?r[ut-1]===void 0?Y.charAt(1):r[ut-1]+Y.charAt(1):st}yt=r[et-1]}return yt===void 0?"":yt})}})},76118:function(H,b,e){"use strict";var c=e(16190),w=e(72462),S=e(70849),v=e(62446),u=e(76929),a=e(2241),s=e(1158),F=e(15930),g=Math.min,I=[].push,x="split",E="length",f="lastIndex",l=4294967295,d=!F(function(){RegExp(l,"y")});e(46176)("split",2,function(O,m,p,o){var h;return"abbc"[x](/(b)*/)[1]=="c"||"test"[x](/(?:)/,-1)[E]!=4||"ab"[x](/(?:ab)*/)[E]!=2||"."[x](/(.?)(.?)/)[E]!=4||"."[x](/()()/)[E]>1||""[x](/.?/)[E]?h=function(r,y){var R=String(this);if(r===void 0&&y===0)return[];if(!c(r))return p.call(R,r,y);for(var D=[],B=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(r.sticky?"y":""),lt=0,st=y===void 0?l:y>>>0,Y=new RegExp(r.source,B+"g"),yt,et,ut;(yt=s.call(Y,R))&&(et=Y[f],!(et>lt&&(D.push(R.slice(lt,yt.index)),yt[E]>1&&yt.index<R[E]&&I.apply(D,yt.slice(1)),ut=yt[0][E],lt=et,D[E]>=st)));)Y[f]===yt.index&&Y[f]++;return lt===R[E]?(ut||!Y.test(""))&&D.push(""):D.push(R.slice(lt)),D[E]>st?D.slice(0,st):D}:"0"[x](void 0,0)[E]?h=function(r,y){return r===void 0&&y===0?[]:p.call(this,r,y)}:h=p,[function(y,R){var D=O(this),B=y?.[m];return B!==void 0?B.call(y,D,R):h.call(String(D),y,R)},function(r,y){var R=o(h,r,this,y,h!==p);if(R.done)return R.value;var D=w(r),B=String(this),lt=S(D,RegExp),st=D.unicode,Y=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.unicode?"u":"")+(d?"y":"g"),yt=new lt(d?D:"^(?:"+D.source+")",Y),et=y===void 0?l:y>>>0;if(et===0)return[];if(B.length===0)return a(yt,B)===null?[B]:[];for(var ut=0,dt=0,it=[];dt<B.length;){yt.lastIndex=d?dt:0;var gt=a(yt,d?B:B.slice(dt)),Pt;if(gt===null||(Pt=g(u(yt.lastIndex+(d?0:dt)),B.length))===ut)dt=v(B,dt,st);else{if(it.push(B.slice(ut,dt)),it.length===et)return it;for(var ft=1;ft<=gt.length-1;ft++)if(it.push(gt[ft]),it.length===et)return it;dt=ut=Pt}}return it.push(B.slice(ut)),it}]})},68883:function(H,b,e){"use strict";var c=e(52393)(!0);e(75633)(String,"String",function(w){this._t=String(w),this._i=0},function(){var w=this._t,S=this._i,v;return S>=w.length?{value:void 0,done:!0}:(v=c(w,S),this._i+=v.length,{value:v,done:!1})})},87266:function(H,b,e){e(37912)("Uint8",1,function(c){return function(S,v,u){return c(this,S,v,u)}})},11154:function(H,b,e){var c=e(49500);(function(w,S){S(b,e(51524),e(3073),e(22276),e(90583),e(72966),e(87266),e(37564),e(32107),e(54673),e(55089),e(76118),e(117),e(68883),e(27855),e(12542),e(73608),e(76094),e(72449),e(2487),e(13927),e(13910),e(44138))})(this,function(w,S,v,u,a,s,F,g,I,x,E,f,l,d,O,m,p,o,h,r,y,R,D){"use strict";function B(G){return G&&typeof G=="object"&&"default"in G?G:{default:G}}var lt=B(S),st=B(v),Y=B(g),yt=B(E),et=B(m),ut=B(p),dt=B(h),it=B(r),gt=B(y),Pt=B(R),ft=B(D),St={};(function(){var G={resolutions:{res4490:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953125,858306884765629e-19,429153442382814e-19,214576721191407e-19,107288360595703e-19,536441802978515e-20,268220901489258e-20,134110450744629e-20],res3857:[156543.03392804097,78271.51696402048,39135.75848201024,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.8740565703525,76.43702828517625,38.21851414258813,19.109257071294063,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395],res4326:[.703913007855028,.35195650392751515,.17597825196375638,.08798912598187819,.043994562990939096,.021997281495469548,.010998640747734774,.005499320373868577,.0027496601869330985,.001374830093467739,.0006874150467326798,.0003437075233663399,.00017185376168316996,8592688084158498e-20,4296344042198222e-20,2148172021099111e-20,10740860104305824e-21,53704300533426425e-22,2685215025481591e-21]},registerProj:function(){st.default.defs("EPSG:4490","+proj=longlat +ellps=GRS80 +no_defs"),st.default.defs("EPSG:4528","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),st.default.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs"),u.register(st.default)},transform:function(z,X,K){return a.transform(z,X,K)},getCustomProj:function(z,X,K,vt,ct){this.proj=new lt.default({code:z,extent,units:K,origin:vt}),a.addProjection(this.proj),this.extent=this.proj.getExtent(),this.resolutions=ct}},T=function(){this.proj=a.get("EPSG:4528"),this.extent=this.proj.getExtent()},N=function(){this.proj=new lt.default({code:"EPSG:4490",extent:[-180,-90,180,90],units:"degrees",worldExtent:[-180,-90,180,90]}),a.addProjection(this.proj),this.extent=this.proj.getExtent(),this.resolutions=G.resolutions.res4490},k=function(){this.proj=new a.get("EPSG:4326"),this.extent=this.proj.getExtent(),this.resolutions=G.resolutions.res4326},$=function(){this.proj=new a.get("EPSG:3857"),this.extent=this.proj.getExtent(),this.resolutions=G.resolutions.res3857};G.registerProj(),St=G;var ht=new T,q=new N,j=new k,W=new $;St.proj4528=ht,St.proj4490=q,St.proj4326=j,St.proj3857=W})();var At=St,It=function(){var G=function T(){var N=new s.Circle({radius:5,fill:null,stroke:new s.Stroke({color:"red",width:1})}),k={Point:new s.Style({image:N}),LineString:new s.Style({stroke:new s.Stroke({color:"green",width:1})}),MultiLineString:new s.Style({stroke:new s.Stroke({color:"green",width:1})}),MultiPoint:new s.Style({image:N}),MultiPolygon:new s.Style({stroke:new s.Stroke({color:"yellow",width:2}),fill:new s.Fill({color:"rgba(255, 255, 0, 0.1)"})}),Polygon:new s.Style({stroke:new s.Stroke({color:"blue",lineDash:[4],width:3}),fill:new s.Fill({color:"rgba(0, 0, 255, 0.1)"})}),GeometryCollection:new s.Style({stroke:new s.Stroke({color:"magenta",width:2}),fill:new s.Fill({color:"magenta"}),image:new s.Circle({radius:10,fill:null,stroke:new s.Stroke({color:"magenta"})})}),Circle:new s.Style({stroke:new s.Stroke({color:"#ff0000",width:2}),fill:new s.Fill({color:"#ff0000"})})},$=function(q){return k[q.getGeometry().getType()]};T.prototype.styles=k,T.prototype.styleFunction=$};return G}(),wt={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(T){var N=T.length/4*3,k=new ArrayBuffer(N);return this.decode(T,k),k},removePaddingChars:function(T){var N=this._keyStr.indexOf(T.charAt(T.length-1));return N==64?T.substring(0,T.length-1):T},decode:function(T,N){T=this.removePaddingChars(T),T=this.removePaddingChars(T);var k=parseInt(T.length/4*3,10),$,ht,q,j,W,Z,z,X,K=0,vt=0;for(N?$=new Uint8Array(N):$=new Uint8Array(k),T=T.replace(/[^A-Za-z0-9\+\/\=]/g,""),K=0;K<k;K+=3)W=this._keyStr.indexOf(T.charAt(vt++)),Z=this._keyStr.indexOf(T.charAt(vt++)),z=this._keyStr.indexOf(T.charAt(vt++)),X=this._keyStr.indexOf(T.charAt(vt++)),ht=W<<2|Z>>4,q=(Z&15)<<4|z>>2,j=(z&3)<<6|X,$[K]=ht,z!=64&&($[K+1]=q),X!=64&&($[K+2]=j);return $}},_=function(){function G(T){this.options={},this.options.path=T.path,this.options.featureName=T.featureName,this.options.projection=T.projection,c.log(this.options.projection)}return G.prototype.addShpLayer=function(T){if(yt.default&&typeof plus<"u"){var N=plus.android.importClass("com.zjzs.gisq.layer.ShpMapServiceLayer"),k=new N(this.options.path,this.options.featureName),$=k.getShpBinary(),ht=k.getDbfBinary(),q;if(wt){q=wt.decode($),wt.decode(ht);var j=this.options.projection,W=function(X){c.log(111);var K=new Y.default({dataProjection:j,featureProjection:"EPSG:3857"}).readFeatures(X);T.addFeatures(K)},Z=new Promise(function(z){var X=yt.default.combine([yt.default.parseShp(q),[]]);c.log(X),z(X)});Z.then(W)}}else c.log("Hbuilder app and has shpjs lib?")},G}(),rt=function(){var G=new Map,T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",N,k=At.proj3857;function $(ht,q){this.path=ht,this.options={};var j=k.proj;q&&(this.options.resolutions=q.resolutions||k.resolutions,this.options.projection=q.projection||j,this.options.origin=q.origin,this.options.tileType=q.tileType),typeof plus<"u"&&plus!=null&&(this.MbTilesMapServiceLayer=plus.android.importClass("com.zjzs.gisq.layer.MbTilesMapServiceLayer"),N=new this.MbTilesMapServiceLayer(this.path,"",this.options.tileType))}return $.prototype.getTileGrid=function(){var ht=this.options.projection.getExtent(),q=this.options.origin||o.getTopLeft(ht),j=new et.default({resolutions:this.options.resolutions,tileSize:[256,256],extent:ht,origin:q});return j},$.prototype.getMbTiles=function(ht,q,j){return new Promise(function(W,Z){if((typeof plus>"u"||!plus)&&Z(T),G&&G.size>1024)for(var z=0;z<512;z++)G.delete(G.keys().next());var X=q+","+ht+","+j;if(G&&G.has(X)){var K=G.get(X);W("data:image/png;base64,"+K)}else{var K=plus.android.invoke(N,"getTile",q,ht,j);K?(G&&G.set(X,K),W("data:image/png;base64,"+K)):Z(T)}})},$.prototype.getTileSource=function(){var ht=this,q=new ut.default({tileUrlFunction:function(W){var Z=W[0],z=W[1],X=Math.abs(W[2]);return z+"/"+X+"/"+Z},tileLoadFunction:function(W,Z){if(Z){var z=Z.split("/");if(z&&z.length==3){var X=ht.getMbTiles(parseInt(z[0]),parseInt(z[1]),parseInt(z[2]));X.then(function(K){W.getImage().src=K},function(K){W.getImage().src=K})}}},tileGrid:this.getTileGrid(),projection:this.options.projection});return q},$}(),Q=function(){var G=new Map,T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",N,k=At.proj3857;function $(ht,q){this.path=ht,this.options={};var j=k.proj;q&&(this.options.resolutions=q.resolutions||k.resolutions,this.options.projection=q.projection||j,this.options.origin=q.origin),typeof plus<"u"&&plus!=null&&(this.SqliteMapServiceLayer=plus.android.importClass("com.zjzs.gisq.layer.SqliteMapServiceLayer"),N=new this.SqliteMapServiceLayer(this.path,""))}return $.prototype.getTileGrid=function(){var ht=this.options.projection.getExtent(),q=this.options.origin||o.getTopLeft(ht),j=new et.default({resolutions:this.options.resolutions,tileSize:[256,256],extent:ht,origin:q});return j},$.prototype.getMbTiles=function(ht,q,j){return new Promise(function(W,Z){if((typeof plus>"u"||!plus)&&Z(T),G&&G.size>1024)for(var z=0;z<512;z++)G.delete(G.keys().next());var X=q+","+ht+","+j;if(G&&G.has(X)){var K=G.get(X);W("data:image/png;base64,"+K)}else{var K=plus.android.invoke(N,"getTile",q,ht,j);K?(G&&G.set(X,K),W("data:image/png;base64,"+K)):Z(T)}})},$.prototype.getTileSource=function(){var ht=this,q=new ut.default({tileUrlFunction:function(W){var Z=W[0],z=W[1],X=Math.abs(W[2]);return z+"/"+X+"/"+Z},tileLoadFunction:function(W,Z){if(Z){var z=Z.split("/");if(z&&z.length==3){var X=ht.getMbTiles(parseInt(z[0]),parseInt(z[1]),parseInt(z[2]));X.then(function(K){W.getImage().src=K},function(K){W.getImage().src=K})}}},tileGrid:this.getTileGrid(),projection:this.options.projection});return q},$}(),tt=function(){function G(T){T=T||{},this.path=T.path,this.featureName=T.featureName,this.tilesource=new it.default({wrapX:!1}),this.projection=T.projection,this.addShpLayerCallback=new _({path:this.path,featureName:this.featureName,projection:this.projection})}return G.prototype.getLayer=function(){return this.addShpLayerCallback.addShpLayer(this.tilesource),new dt.default({source:this.tilesource,projection:this.projection,style:new It().styleFunction})},G}(),xt=function(){var G=At.proj3857;function T(k){T.TABLE_TYPE_MBTILES="mbtiles",T.TABLE_TYPE_ARCGIS="arcgis",k=k||{},this.path=k.path,this.projection=k.projection||"EPSG:3857",this.resolutions=k.resolutions||G.resolutions,this.origin=k.origin,this.tileType=k.tileType||T.TABLE_TYPE_MBTILES;var $=new rt(this.path,{projection:this.projection,resolutions:this.resolutions,origin:this.origin,tileType:this.tileType});this.tilesource=$.getTileSource()}T.prototype.getLayer=function(){return new gt.default({source:this.tilesource,projection:this.projection})};function N(k){if(typeof plus>"u"||!plus)return"";var $=plus.android.importClass("com.zjzs.gisq.layer.MbTilesMapServiceLayer"),ht=new $(k,""),q=plus.android.invoke(ht,"getConfig");return q}return T.getMedata=N,T}(),ot=function(){var G=At.proj3857;function T(k){k=k||{},this.path=k.path,this.projection=k.projection||"EPSG:3857",this.resolutions=k.resolutions||G.resolutions,this.origin=k.origin;var $=new Q(this.path,{projection:this.projection,resolutions:this.resolutions,origin:this.origin});this.tilesource=$.getTileSource()}T.prototype.getLayer=function(){return new gt.default({source:this.tilesource,projection:this.projection})};function N(k){if(typeof plus>"u"||!plus)return"";var $=plus.android.importClass("com.zjzs.gisq.layer.SqliteMapServiceLayer"),ht=new $(k,""),q=plus.android.invoke(ht,"getConfig");return q}return T.getMedata=N,T}(),nt=function(){var G=At.proj3857;function T(k){var k=k||{};this.path=k.path,this.resolutions=k.resolutions||G.resolutions,this.dataProjection=k.dataProjection||"EPSG:3857",this.featureProjection=k.featureProjection||"EPSG:3857",this.sqlKey=k.sqlKey||""}return T.prototype.getTileGrid=function(){var N=this.featureProjection.getExtent(),k=new et.default({resolutions:G.resolutions,tileSize:[256,256],extent:N,origin:o.getTopLeft(N)});return k},T.prototype.getSources=function(){var N=this,k=new ft.default({format:new Y.default,tileUrlFunction:function(ht){var q=ht[0],j=ht[1],W=Math.abs(ht[2]);return j+"/"+W+"/"+q},tileLoadFunction:function(ht,q){var j=q.split("/");if(j&&j.length==3){var W=ht.getFormat(),Z=this.projection,z=N.getGeoJsonTiles(parseInt(j[0]),parseInt(j[1]),parseInt(j[2]),W,Z);z.then(function(X,K){ht.onLoad(X,K)},function(X){c.log("error="+X),ht.onError()})}else ht.onError()},tileGrid:this.getTileGrid(),projection:"EPSG:3857"});return k},T.prototype.getGeoJsonTiles=function(N,k,$,ht,q){var j=this;return new Promise(function(W,Z){(typeof plus>"u"||!plus)&&Z("is Hbuilder app?");var z=plus.android.importClass("com.zjzs.gisq.layer.GeoJsonMapServiceLayer"),X=new z(j.path,j.sqlKey),K=plus.android.invoke(X,"getGeoJsonTile",k,N,$);if(K){c.log("XYZ=="+N+","+k+","+$);var vt=ht.readFeatures(K,{dataProjection:j.dataProjection,featureProjection:q}),ct=ht.readProjection(K);W(vt,ct)}else Z("\u6682\u65E0\u6570\u636E")})},T}(),V=function(){var G=At.proj3857;function T(k){var k=k||{};this.path=k.path;var $=k.dataProjection||"EPSG:3857",ht=k.featureProjection||"EPSG:3857";this.resolutions=k.resolutions||G.resolutions,this.layerProjection=ht,this.jsonDataProjection=$,this.sqlKey=k.sqlKey||""}return T.prototype.getLayer=function(){if(typeof plus>"u")return null;var N=plus.android.importClass("com.zjzs.gisq.layer.GeoJsonMapServiceLayer"),k=new N(this.path),$=plus.android.invoke(k,"getGeoJson"),ht=new Y.default().readFeatures($,{dataProjection:this.jsonDataProjection,featureProjection:this.layerProjection}),q=new it.default({features:ht});return new dt.default({source:q,projection:this.layerProjection||"EPSG:3857",style:new It().styleFunction})},T.prototype.getVectorTileLayer=function(){if(typeof plus>"u")throw"is Hbuilder app?";var N=new nt({path:this.path,resolutions:this.resolutions,dataProjection:this.jsonDataProjection,featureProjection:this.layerProjection,sqlKey:this.sqlKey});return new Pt.default({source:N.getSources(),projection:this.layerProjection||"EPSG:3857",style:new It().styleFunction})},T}();w.GisqMobileMbTileSource=rt,w.GisqMobileSqliteSource=Q,w.GisqOfflineGeoJsonLayer=V,w.GisqOfflineMbTilesLayer=xt,w.GisqOfflineShpLayer=tt,w.GisqOfflineSqliteLayer=ot,w.gisqOlMobileProj=At,w.gisqOlMobileShp=_,w.gisqOlMobileStyle=It,Object.defineProperty(w,"__esModule",{value:!0})})},36893:function(H,b,e){"use strict";var c=e.g.MutationObserver||e.g.WebKitMutationObserver,w;if(c){var S=0,v=new c(g),u=e.g.document.createTextNode("");v.observe(u,{characterData:!0}),w=function(){u.data=S=++S%2}}else if(!e.g.setImmediate&&typeof e.g.MessageChannel<"u"){var a=new e.g.MessageChannel;a.port1.onmessage=g,w=function(){a.port2.postMessage(0)}}else"document"in e.g&&"onreadystatechange"in e.g.document.createElement("script")?w=function(){var x=e.g.document.createElement("script");x.onreadystatechange=function(){g(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},e.g.document.documentElement.appendChild(x)}:w=function(){setTimeout(g,0)};var s,F=[];function g(){s=!0;for(var x,E,f=F.length;f;){for(E=F,F=[],x=-1;++x<f;)E[x]();f=F.length}s=!1}H.exports=I;function I(x){F.push(x)===1&&!s&&w()}},84127:function(H,b,e){"use strict";var c=e(36893);function w(){}var S={},v=["REJECTED"],u=["FULFILLED"],a=["PENDING"];H.exports=s;function s(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,m!==w&&x(this,m)}s.prototype.finally=function(m){if(typeof m!="function")return this;var p=this.constructor;return this.then(o,h);function o(r){function y(){return r}return p.resolve(m()).then(y)}function h(r){function y(){throw r}return p.resolve(m()).then(y)}},s.prototype.catch=function(m){return this.then(null,m)},s.prototype.then=function(m,p){if(typeof m!="function"&&this.state===u||typeof p!="function"&&this.state===v)return this;var o=new this.constructor(w);if(this.state!==a){var h=this.state===u?m:p;g(o,h,this.outcome)}else this.queue.push(new F(o,m,p));return o};function F(m,p,o){this.promise=m,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof o=="function"&&(this.onRejected=o,this.callRejected=this.otherCallRejected)}F.prototype.callFulfilled=function(m){S.resolve(this.promise,m)},F.prototype.otherCallFulfilled=function(m){g(this.promise,this.onFulfilled,m)},F.prototype.callRejected=function(m){S.reject(this.promise,m)},F.prototype.otherCallRejected=function(m){g(this.promise,this.onRejected,m)};function g(m,p,o){c(function(){var h;try{h=p(o)}catch(r){return S.reject(m,r)}h===m?S.reject(m,new TypeError("Cannot resolve promise with itself")):S.resolve(m,h)})}S.resolve=function(m,p){var o=E(I,p);if(o.status==="error")return S.reject(m,o.value);var h=o.value;if(h)x(m,h);else{m.state=u,m.outcome=p;for(var r=-1,y=m.queue.length;++r<y;)m.queue[r].callFulfilled(p)}return m},S.reject=function(m,p){m.state=v,m.outcome=p;for(var o=-1,h=m.queue.length;++o<h;)m.queue[o].callRejected(p);return m};function I(m){var p=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof p=="function")return function(){p.apply(m,arguments)}}function x(m,p){var o=!1;function h(D){o||(o=!0,S.reject(m,D))}function r(D){o||(o=!0,S.resolve(m,D))}function y(){p(r,h)}var R=E(y);R.status==="error"&&h(R.value)}function E(m,p){var o={};try{o.value=m(p),o.status="success"}catch(h){o.status="error",o.value=h}return o}s.resolve=f;function f(m){return m instanceof this?m:S.resolve(new this(w),m)}s.reject=l;function l(m){var p=new this(w);return S.reject(p,m)}s.all=d;function d(m){var p=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var o=m.length,h=!1;if(!o)return this.resolve([]);for(var r=new Array(o),y=0,R=-1,D=new this(w);++R<o;)B(m[R],R);return D;function B(lt,st){p.resolve(lt).then(Y,function(yt){h||(h=!0,S.reject(D,yt))});function Y(yt){r[st]=yt,++y===o&&!h&&(h=!0,S.resolve(D,r))}}}s.race=O;function O(m){var p=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var o=m.length,h=!1;if(!o)return this.resolve([]);for(var r=-1,y=new this(w);++r<o;)R(m[r]);return y;function R(D){p.resolve(D).then(function(B){h||(h=!0,S.resolve(y,B))},function(B){h||(h=!0,S.reject(y,B))})}}},60309:function(H,b,e){var c=e(49500);(function(){H.exports?H.exports=a:this.LRUCache=a;function w(l,d){return Object.prototype.hasOwnProperty.call(l,d)}function S(){return 1}var v=!1;function u(l){!v&&typeof l!="string"&&typeof l!="number"&&(v=!0,c.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof l).stack))}function a(l){if(!(this instanceof a))return new a(l);typeof l=="number"&&(l={max:l}),l||(l={}),this._max=l.max,(!this._max||typeof this._max!="number"||this._max<=0)&&(this._max=1/0),this._lengthCalculator=l.length||S,typeof this._lengthCalculator!="function"&&(this._lengthCalculator=S),this._allowStale=l.stale||!1,this._maxAge=l.maxAge||null,this._dispose=l.dispose,this.reset()}Object.defineProperty(a.prototype,"max",{set:function(l){(!l||typeof l!="number"||l<=0)&&(l=1/0),this._max=l,this._length>this._max&&I(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(a.prototype,"lengthCalculator",{set:function(l){if(typeof l!="function"){this._lengthCalculator=S,this._length=this._itemCount;for(var d in this._cache)this._cache[d].length=1}else{this._lengthCalculator=l,this._length=0;for(var d in this._cache)this._cache[d].length=this._lengthCalculator(this._cache[d].value),this._length+=this._cache[d].length}this._length>this._max&&I(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(a.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),a.prototype.forEach=function(l,d){d=d||this;for(var O=0,m=this._itemCount,p=this._mru-1;p>=0&&O<m;p--)if(this._lruList[p]){O++;var o=this._lruList[p];F(this,o)&&(E(this,o),this._allowStale||(o=void 0)),o&&l.call(d,o.value,o.key,this)}},a.prototype.keys=function(){for(var l=new Array(this._itemCount),d=0,O=this._mru-1;O>=0&&d<this._itemCount;O--)if(this._lruList[O]){var m=this._lruList[O];l[d++]=m.key}return l},a.prototype.values=function(){for(var l=new Array(this._itemCount),d=0,O=this._mru-1;O>=0&&d<this._itemCount;O--)if(this._lruList[O]){var m=this._lruList[O];l[d++]=m.value}return l},a.prototype.reset=function(){if(this._dispose&&this._cache)for(var l in this._cache)this._dispose(l,this._cache[l].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},a.prototype.dump=function(){for(var l=[],d=0,O=this._mru-1;O>=0&&d<this._itemCount;O--)if(this._lruList[O]){var m=this._lruList[O];F(this,m)||(++d,l.push({k:m.key,v:m.value,e:m.now+(m.maxAge||0)}))}return l},a.prototype.dumpLru=function(){return this._lruList},a.prototype.set=function(l,d,O){O=O||this._maxAge,u(l);var m=O?Date.now():0,p=this._lengthCalculator(d);if(w(this._cache,l))return p>this._max?(E(this,this._cache[l]),!1):(this._dispose&&this._dispose(l,this._cache[l].value),this._cache[l].now=m,this._cache[l].maxAge=O,this._cache[l].value=d,this._length+=p-this._cache[l].length,this._cache[l].length=p,this.get(l),this._length>this._max&&I(this),!0);var o=new f(l,d,this._mru++,p,m,O);return o.length>this._max?(this._dispose&&this._dispose(l,d),!1):(this._length+=o.length,this._lruList[o.lu]=this._cache[l]=o,this._itemCount++,this._length>this._max&&I(this),!0)},a.prototype.has=function(l){if(u(l),!w(this._cache,l))return!1;var d=this._cache[l];return!F(this,d)},a.prototype.get=function(l){return u(l),s(this,l,!0)},a.prototype.peek=function(l){return u(l),s(this,l,!1)},a.prototype.pop=function(){var l=this._lruList[this._lru];return E(this,l),l||null},a.prototype.del=function(l){u(l),E(this,this._cache[l])},a.prototype.load=function(l){this.reset();for(var d=Date.now(),O=l.length-1;O>=0;O--){var m=l[O];u(m.k);var p=m.e||0;if(p===0)this.set(m.k,m.v);else{var o=p-d;o>0&&this.set(m.k,m.v,o)}}};function s(l,d,O){u(d);var m=l._cache[d];return m&&(F(l,m)?(E(l,m),l._allowStale||(m=void 0)):O&&g(l,m),m&&(m=m.value)),m}function F(l,d){if(!d||!d.maxAge&&!l._maxAge)return!1;var O=!1,m=Date.now()-d.now;return d.maxAge?O=m>d.maxAge:O=l._maxAge&&m>l._maxAge,O}function g(l,d){x(l,d),d.lu=l._mru++,l._lruList[d.lu]=d}function I(l){for(;l._lru<l._mru&&l._length>l._max;)E(l,l._lruList[l._lru])}function x(l,d){for(delete l._lruList[d.lu];l._lru<l._mru&&!l._lruList[l._lru];)l._lru++}function E(l,d){d&&(l._dispose&&l._dispose(d.key,d.value),l._length-=d.length,l._itemCount--,delete l._cache[d.key],x(l,d))}function f(l,d,O,m,p,o){this.key=l,this.value=d,this.lu=O,this.length=m,this.now=p,o&&(this.maxAge=o)}})()},93227:function(H,b,e){e(77332);var c=e(72699).s;function w(u){var a=new c,s=a.write(u)+a.end();return s.replace(/\0/g,"").trim()}H.exports=v;var S=/^(?:ANSI\s)?(\d+)$/m;function v(u,a){if(!u)return w;try{new TextDecoder(u.trim())}catch{var s=S.exec(u);return s&&!a?v("windows-"+s[1],!0):w}return F;function F(g){var I=new TextDecoder(u),x=I.decode(g,{stream:!0})+I.decode();return x.replace(/\0/g,"").trim()}}},9518:function(H,b,e){var c=e(93227);function w(a){var s={};return s.lastUpdated=new Date(a.readUInt8(1)+1900,a.readUInt8(2),a.readUInt8(3)),s.records=a.readUInt32LE(4),s.headerLen=a.readUInt16LE(8),s.recLen=a.readUInt16LE(10),s}function S(a,s,F){for(var g=[],I=32;I<s&&(g.push({name:F(a.slice(I,I+11)),dataType:String.fromCharCode(a.readUInt8(I+11)),len:a.readUInt8(I+16),decimal:a.readUInt8(I+17)}),a.readUInt8(I+32)!==13);)I+=32;return g}function v(a,s,F,g,I){var x=a.slice(s,s+F),E=I(x);switch(g){case"N":case"F":case"O":return parseFloat(E,10);case"D":return new Date(E.slice(0,4),parseInt(E.slice(4,6),10)-1,E.slice(6,8));case"L":return E.toLowerCase()==="y"||E.toLowerCase()==="t";default:return E}}function u(a,s,F,g){for(var I={},x=0,E=F.length,f,l;x<E;)l=F[x],f=v(a,s,l.len,l.dataType,g),s+=l.len,typeof f<"u"&&(I[l.name]=f),x++;return I}H.exports=function(a,s){for(var F=c(s),g=w(a),I=S(a,g.headerLen-1,F),x=(I.length+1<<5)+2,E=g.recLen,f=g.records,l=[];f;)l.push(u(a,x,I,F)),x+=E,f--;return l}},30339:function(H,b,e){"use strict";e.r(b),e.d(b,{default:function(){return za}});function c(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var w=1,S=2,v=3,u=4,a=5,s=6378137,F=6356752314e-3,g=.0066943799901413165,I=484813681109536e-20,x=Math.PI/2,E=.16666666666666666,f=.04722222222222222,l=.022156084656084655,d=1e-10,O=.017453292519943295,m=57.29577951308232,p=Math.PI/4,o=Math.PI*2,h=3.14159265359,r={};r.greenwich=0,r.lisbon=-9.131906111111,r.paris=2.337229166667,r.bogota=-74.080916666667,r.madrid=-3.687938888889,r.rome=12.452333333333,r.bern=7.439583333333,r.jakarta=106.807719444444,r.ferro=-17.666666666667,r.brussels=4.367975,r.stockholm=18.058277777778,r.athens=23.7163375,r.oslo=10.722916666667;var y={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},R=/[\s_\-\/\(\)]/g;function D(t,n){if(t[n])return t[n];for(var i=Object.keys(t),M=n.toLowerCase().replace(R,""),P=-1,L,A;++P<i.length;)if(L=i[P],A=L.toLowerCase().replace(R,""),A===M)return t[L]}function B(t){var n={},i=t.split("+").map(function(C){return C.trim()}).filter(function(C){return C}).reduce(function(C,U){var at=U.split("=");return at.push(!0),C[at[0].toLowerCase()]=at[1],C},{}),M,P,L,A={proj:"projName",datum:"datumCode",rf:function(C){n.rf=parseFloat(C)},lat_0:function(C){n.lat0=C*O},lat_1:function(C){n.lat1=C*O},lat_2:function(C){n.lat2=C*O},lat_ts:function(C){n.lat_ts=C*O},lon_0:function(C){n.long0=C*O},lon_1:function(C){n.long1=C*O},lon_2:function(C){n.long2=C*O},alpha:function(C){n.alpha=parseFloat(C)*O},gamma:function(C){n.rectified_grid_angle=parseFloat(C)},lonc:function(C){n.longc=C*O},x_0:function(C){n.x0=parseFloat(C)},y_0:function(C){n.y0=parseFloat(C)},k_0:function(C){n.k0=parseFloat(C)},k:function(C){n.k0=parseFloat(C)},a:function(C){n.a=parseFloat(C)},b:function(C){n.b=parseFloat(C)},r_a:function(){n.R_A=!0},zone:function(C){n.zone=parseInt(C,10)},south:function(){n.utmSouth=!0},towgs84:function(C){n.datum_params=C.split(",").map(function(U){return parseFloat(U)})},to_meter:function(C){n.to_meter=parseFloat(C)},units:function(C){n.units=C;var U=D(y,C);U&&(n.to_meter=U.to_meter)},from_greenwich:function(C){n.from_greenwich=C*O},pm:function(C){var U=D(r,C);n.from_greenwich=(U||parseFloat(C))*O},nadgrids:function(C){C==="@null"?n.datumCode="none":n.nadgrids=C},axis:function(C){var U="ewnsud";C.length===3&&U.indexOf(C.substr(0,1))!==-1&&U.indexOf(C.substr(1,1))!==-1&&U.indexOf(C.substr(2,1))!==-1&&(n.axis=C)},approx:function(){n.approx=!0}};for(M in i)P=i[M],M in A?(L=A[M],typeof L=="function"?L(P):n[L]=P):n[M]=P;return typeof n.datumCode=="string"&&n.datumCode!=="WGS84"&&(n.datumCode=n.datumCode.toLowerCase()),n}var lt=e(65370),st=e(49500);function Y(t){var n=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?Y[t]=B(arguments[1]):Y[t]=(0,lt.Z)(arguments[1]):Y[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(M){Array.isArray(M)?Y.apply(n,M):Y(M)});if(typeof t=="string"){if(t in Y)return Y[t]}else"EPSG"in t?Y["EPSG:"+t.EPSG]=t:"ESRI"in t?Y["ESRI:"+t.ESRI]=t:"IAU2000"in t?Y["IAU2000:"+t.IAU2000]=t:st.log(t);return}}c(Y);var yt=Y;function et(t){return typeof t=="string"}function ut(t){return t in yt}var dt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function it(t){return dt.some(function(n){return t.indexOf(n)>-1})}var gt=["3857","900913","3785","102113"];function Pt(t){var n=D(t,"authority");if(n){var i=D(n,"epsg");return i&&gt.indexOf(i)>-1}}function ft(t){var n=D(t,"extension");if(n)return D(n,"proj4")}function St(t){return t[0]==="+"}function At(t){if(et(t)){if(ut(t))return yt[t];if(it(t)){var n=(0,lt.Z)(t);if(Pt(n))return yt["EPSG:3857"];var i=ft(n);return i?B(i):n}if(St(t))return B(t)}else return t}var It=At;function wt(t,n){t=t||{};var i,M;if(!n)return t;for(M in n)i=n[M],i!==void 0&&(t[M]=i);return t}function _(t,n,i){var M=t*n;return i/Math.sqrt(1-M*M)}function rt(t){return t<0?-1:1}function Q(t){return Math.abs(t)<=h?t:t-rt(t)*o}function tt(t,n,i){var M=t*i,P=.5*t;return M=Math.pow((1-M)/(1+M),P),Math.tan(.5*(x-n))/M}function xt(t,n){for(var i=.5*t,M,P,L=x-2*Math.atan(n),A=0;A<=15;A++)if(M=t*Math.sin(L),P=x-2*Math.atan(n*Math.pow((1-M)/(1+M),i))-L,L+=P,Math.abs(P)<=1e-10)return L;return-9999}function ot(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=_(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function nt(t){var n=t.x,i=t.y;if(i*m>90&&i*m<-90&&n*m>180&&n*m<-180)return null;var M,P;if(Math.abs(Math.abs(i)-x)<=d)return null;if(this.sphere)M=this.x0+this.a*this.k0*Q(n-this.long0),P=this.y0+this.a*this.k0*Math.log(Math.tan(p+.5*i));else{var L=Math.sin(i),A=tt(this.e,i,L);M=this.x0+this.a*this.k0*Q(n-this.long0),P=this.y0-this.a*this.k0*Math.log(A)}return t.x=M,t.y=P,t}function V(t){var n=t.x-this.x0,i=t.y-this.y0,M,P;if(this.sphere)P=x-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var L=Math.exp(-i/(this.a*this.k0));if(P=xt(this.e,L),P===-9999)return null}return M=Q(this.long0+n/(this.a*this.k0)),t.x=M,t.y=P,t}var G=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],T={init:ot,forward:nt,inverse:V,names:G};function N(){}function k(t){return t}var $=["longlat","identity"],ht={init:N,forward:k,inverse:k,names:$},q=e(49500),j=[T,ht],W={},Z=[];function z(t,n){var i=Z.length;return t.names?(Z[i]=t,t.names.forEach(function(M){W[M.toLowerCase()]=i}),this):(q.log(n),!0)}function X(t){if(!t)return!1;var n=t.toLowerCase();if(typeof W[n]<"u"&&Z[W[n]])return Z[W[n]]}function K(){j.forEach(z)}var vt={start:K,add:z,get:X},ct={};ct.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},ct.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},ct.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},ct.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},ct.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},ct.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},ct.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},ct.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},ct.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},ct.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},ct.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},ct.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},ct.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},ct.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},ct.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},ct.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},ct.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},ct.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},ct.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},ct.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},ct.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},ct.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},ct.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},ct.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},ct.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},ct.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},ct.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},ct.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},ct.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},ct.hough={a:6378270,rf:297,ellipseName:"Hough"},ct.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},ct.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},ct.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},ct.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},ct.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},ct.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},ct.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},ct.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},ct.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},ct.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},ct.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},ct.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Mt=ct.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ct.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function J(t,n,i,M){var P=t*t,L=n*n,A=(P-L)/P,C=0;M?(t*=1-A*(E+A*(f+A*l)),P=t*t,A=0):C=Math.sqrt(A);var U=(P-L)/L;return{es:A,e:C,ep2:U}}function Tt(t,n,i,M,P){if(!t){var L=D(ct,M);L||(L=Mt),t=L.a,n=L.b,i=L.rf}return i&&!n&&(n=(1-1/i)*t),(i===0||Math.abs(t-n)<d)&&(P=!0,n=t),{a:t,b:n,rf:i,sphere:P}}var jt={};jt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},jt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},jt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},jt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},jt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},jt.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},jt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},jt.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},jt.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},jt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},jt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},jt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},jt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},jt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},jt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},jt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},jt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},jt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function zt(t,n,i,M,P,L,A){var C={};return t===void 0||t==="none"?C.datum_type=a:C.datum_type=u,n&&(C.datum_params=n.map(parseFloat),(C.datum_params[0]!==0||C.datum_params[1]!==0||C.datum_params[2]!==0)&&(C.datum_type=w),C.datum_params.length>3&&(C.datum_params[3]!==0||C.datum_params[4]!==0||C.datum_params[5]!==0||C.datum_params[6]!==0)&&(C.datum_type=S,C.datum_params[3]*=I,C.datum_params[4]*=I,C.datum_params[5]*=I,C.datum_params[6]=C.datum_params[6]/1e6+1)),A&&(C.datum_type=v,C.grids=A),C.a=i,C.b=M,C.es=P,C.ep2=L,C}var $t=zt,Jt=e(49500),Wt={};function te(t,n){var i=new DataView(n),M=Dt(i),P=le(i,M),L=Xt(i,P,M),A={header:P,subgrids:L};return Wt[t]=A,A}function oe(t){if(t===void 0)return null;var n=t.split(",");return n.map(ve)}function ve(t){if(t.length===0)return null;var n=t[0]==="@";return n&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!n,grid:null,isNull:!0}:{name:t,mandatory:!n,grid:Wt[t]||null,isNull:!1}}function Qt(t){return t/3600*Math.PI/180}function Dt(t){var n=t.getInt32(8,!1);return n===11?!1:(n=t.getInt32(8,!0),n!==11&&Jt.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function le(t,n){return{nFields:t.getInt32(8,n),nSubgridFields:t.getInt32(24,n),nSubgrids:t.getInt32(40,n),shiftType:Me(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,n),fromSemiMinorAxis:t.getFloat64(136,n),toSemiMajorAxis:t.getFloat64(152,n),toSemiMinorAxis:t.getFloat64(168,n)}}function Me(t,n,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(n,i)))}function Xt(t,n,i){for(var M=176,P=[],L=0;L<n.nSubgrids;L++){var A=re(t,M,i),C=Vt(t,M,A,i),U=Math.round(1+(A.upperLongitude-A.lowerLongitude)/A.longitudeInterval),at=Math.round(1+(A.upperLatitude-A.lowerLatitude)/A.latitudeInterval);P.push({ll:[Qt(A.lowerLongitude),Qt(A.lowerLatitude)],del:[Qt(A.longitudeInterval),Qt(A.latitudeInterval)],lim:[U,at],count:A.gridNodeCount,cvs:Se(C)}),M+=176+A.gridNodeCount*16}return P}function Se(t){return t.map(function(n){return[Qt(n.longitudeShift),Qt(n.latitudeShift)]})}function re(t,n,i){return{name:Me(t,n+8,n+16).trim(),parent:Me(t,n+24,n+24+8).trim(),lowerLatitude:t.getFloat64(n+72,i),upperLatitude:t.getFloat64(n+88,i),lowerLongitude:t.getFloat64(n+104,i),upperLongitude:t.getFloat64(n+120,i),latitudeInterval:t.getFloat64(n+136,i),longitudeInterval:t.getFloat64(n+152,i),gridNodeCount:t.getInt32(n+168,i)}}function Vt(t,n,i,M){for(var P=n+176,L=16,A=[],C=0;C<i.gridNodeCount;C++){var U={latitudeShift:t.getFloat32(P+C*L,M),longitudeShift:t.getFloat32(P+C*L+4,M),latitudeAccuracy:t.getFloat32(P+C*L+8,M),longitudeAccuracy:t.getFloat32(P+C*L+12,M)};A.push(U)}return A}function ie(t,n){if(!(this instanceof ie))return new ie(t);n=n||function(at){if(at)throw at};var i=It(t);if(typeof i!="object"){n(t);return}var M=ie.projections.get(i.projName);if(!M){n(t);return}if(i.datumCode&&i.datumCode!=="none"){var P=D(jt,i.datumCode);P&&(i.datum_params=i.datum_params||(P.towgs84?P.towgs84.split(","):null),i.ellps=P.ellipse,i.datumName=P.datumName?P.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var L=Tt(i.a,i.b,i.rf,i.ellps,i.sphere),A=J(L.a,L.b,L.rf,i.R_A),C=oe(i.nadgrids),U=i.datum||$t(i.datumCode,i.datum_params,L.a,L.b,A.es,A.ep2,C);wt(this,i),wt(this,M),this.a=L.a,this.b=L.b,this.rf=L.rf,this.sphere=L.sphere,this.es=A.es,this.e=A.e,this.ep2=A.ep2,this.datum=U,this.init(),n(null,this)}ie.projections=vt,ie.projections.start();var fe=ie;function qt(t,n){return t.datum_type!==n.datum_type||t.a!==n.a||Math.abs(t.es-n.es)>5e-11?!1:t.datum_type===w?t.datum_params[0]===n.datum_params[0]&&t.datum_params[1]===n.datum_params[1]&&t.datum_params[2]===n.datum_params[2]:t.datum_type===S?t.datum_params[0]===n.datum_params[0]&&t.datum_params[1]===n.datum_params[1]&&t.datum_params[2]===n.datum_params[2]&&t.datum_params[3]===n.datum_params[3]&&t.datum_params[4]===n.datum_params[4]&&t.datum_params[5]===n.datum_params[5]&&t.datum_params[6]===n.datum_params[6]:!0}function ue(t,n,i){var M=t.x,P=t.y,L=t.z?t.z:0,A,C,U,at;if(P<-x&&P>-1.001*x)P=-x;else if(P>x&&P<1.001*x)P=x;else{if(P<-x)return{x:-1/0,y:-1/0,z:t.z};if(P>x)return{x:1/0,y:1/0,z:t.z}}return M>Math.PI&&(M-=2*Math.PI),C=Math.sin(P),at=Math.cos(P),U=C*C,A=i/Math.sqrt(1-n*U),{x:(A+L)*at*Math.cos(M),y:(A+L)*at*Math.sin(M),z:(A*(1-n)+L)*C}}function ge(t,n,i,M){var P=1e-12,L=P*P,A=30,C,U,at,pt,mt,Et,Lt,Ot,Ct,Rt,kt,ae,Zt,_t=t.x,Yt=t.y,ee=t.z?t.z:0,Fe,de,je;if(C=Math.sqrt(_t*_t+Yt*Yt),U=Math.sqrt(_t*_t+Yt*Yt+ee*ee),C/i<P){if(Fe=0,U/i<P)return de=x,je=-M,{x:t.x,y:t.y,z:t.z}}else Fe=Math.atan2(Yt,_t);at=ee/U,pt=C/U,mt=1/Math.sqrt(1-n*(2-n)*pt*pt),Ot=pt*(1-n)*mt,Ct=at*mt,Zt=0;do Zt++,Lt=i/Math.sqrt(1-n*Ct*Ct),je=C*Ot+ee*Ct-Lt*(1-n*Ct*Ct),Et=n*Lt/(Lt+je),mt=1/Math.sqrt(1-Et*(2-Et)*pt*pt),Rt=pt*(1-Et)*mt,kt=at*mt,ae=kt*Ot-Rt*Ct,Ot=Rt,Ct=kt;while(ae*ae>L&&Zt<A);return de=Math.atan(kt/Math.abs(Rt)),{x:Fe,y:de,z:je}}function er(t,n,i){if(n===w)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(n===S){var M=i[0],P=i[1],L=i[2],A=i[3],C=i[4],U=i[5],at=i[6];return{x:at*(t.x-U*t.y+C*t.z)+M,y:at*(U*t.x+t.y-A*t.z)+P,z:at*(-C*t.x+A*t.y+t.z)+L}}}function be(t,n,i){if(n===w)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(n===S){var M=i[0],P=i[1],L=i[2],A=i[3],C=i[4],U=i[5],at=i[6],pt=(t.x-M)/at,mt=(t.y-P)/at,Et=(t.z-L)/at;return{x:pt+U*mt-C*Et,y:-U*pt+mt+A*Et,z:C*pt-A*mt+Et}}}var Ee=e(49500);function Ce(t){return t===w||t===S}function Ke(t,n,i){if(qt(t,n)||t.datum_type===a||n.datum_type===a)return i;var M=t.a,P=t.es;if(t.datum_type===v){var L=ze(t,!1,i);if(L!==0)return;M=s,P=g}var A=n.a,C=n.b,U=n.es;if(n.datum_type===v&&(A=s,C=F,U=g),P===U&&M===A&&!Ce(t.datum_type)&&!Ce(n.datum_type))return i;if(i=ue(i,P,M),Ce(t.datum_type)&&(i=er(i,t.datum_type,t.datum_params)),Ce(n.datum_type)&&(i=be(i,n.datum_type,n.datum_params)),i=ge(i,U,A,C),n.datum_type===v){var at=ze(n,!0,i);if(at!==0)return}return i}function ze(t,n,i){if(t.grids===null||t.grids.length===0)return Ee.log("Grid shift grids not found"),-1;var M={x:-i.x,y:i.y},P={x:Number.NaN,y:Number.NaN},L=!1,A=[];t:for(var C=0;C<t.grids.length;C++){var U=t.grids[C];if(A.push(U.name),U.isNull){P=M;break}if(L=U.mandatory,U.grid===null){if(U.mandatory)return Ee.log("Unable to find mandatory grid '"+U.name+"'"),-1;continue}for(var at=U.grid.subgrids,pt=0,mt=at.length;pt<mt;pt++){var Et=at[pt],Lt=(Math.abs(Et.del[1])+Math.abs(Et.del[0]))/1e4,Ot=Et.ll[0]-Lt,Ct=Et.ll[1]-Lt,Rt=Et.ll[0]+(Et.lim[0]-1)*Et.del[0]+Lt,kt=Et.ll[1]+(Et.lim[1]-1)*Et.del[1]+Lt;if(!(Ct>M.y||Ot>M.x||kt<M.y||Rt<M.x)&&(P=Re(M,n,Et),!isNaN(P.x)))break t}}return isNaN(P.x)?(Ee.log("Failed to find a grid shift table for location '"+-M.x*m+" "+M.y*m+" tried: '"+A+"'"),-1):(i.x=-P.x,i.y=P.y,0)}function Re(t,n,i){var M={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return M;var P={x:t.x,y:t.y};P.x-=i.ll[0],P.y-=i.ll[1],P.x=Q(P.x-Math.PI)+Math.PI;var L=Ge(P,i);if(n){if(isNaN(L.x))return M;L.x=P.x-L.x,L.y=P.y-L.y;var A=9,C=1e-12,U,at;do{if(at=Ge(L,i),isNaN(at.x)){Ee.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}U={x:P.x-(at.x+L.x),y:P.y-(at.y+L.y)},L.x+=U.x,L.y+=U.y}while(A--&&Math.abs(U.x)>C&&Math.abs(U.y)>C);if(A<0)return Ee.log("Inverse grid shift iterator failed to converge."),M;M.x=Q(L.x+i.ll[0]),M.y=L.y+i.ll[1]}else isNaN(L.x)||(M.x=t.x+L.x,M.y=t.y+L.y);return M}function Ge(t,n){var i={x:t.x/n.del[0],y:t.y/n.del[1]},M={x:Math.floor(i.x),y:Math.floor(i.y)},P={x:i.x-1*M.x,y:i.y-1*M.y},L={x:Number.NaN,y:Number.NaN},A;if(M.x<0||M.x>=n.lim[0]||M.y<0||M.y>=n.lim[1])return L;A=M.y*n.lim[0]+M.x;var C={x:n.cvs[A][0],y:n.cvs[A][1]};A++;var U={x:n.cvs[A][0],y:n.cvs[A][1]};A+=n.lim[0];var at={x:n.cvs[A][0],y:n.cvs[A][1]};A--;var pt={x:n.cvs[A][0],y:n.cvs[A][1]},mt=P.x*P.y,Et=P.x*(1-P.y),Lt=(1-P.x)*(1-P.y),Ot=(1-P.x)*P.y;return L.x=Lt*C.x+Et*U.x+Ot*pt.x+mt*at.x,L.y=Lt*C.y+Et*U.y+Ot*pt.y+mt*at.y,L}function Ie(t,n,i){var M=i.x,P=i.y,L=i.z||0,A,C,U,at={};for(U=0;U<3;U++)if(!(n&&U===2&&i.z===void 0))switch(U===0?(A=M,"ew".indexOf(t.axis[U])!==-1?C="x":C="y"):U===1?(A=P,"ns".indexOf(t.axis[U])!==-1?C="y":C="x"):(A=L,C="z"),t.axis[U]){case"e":at[C]=A;break;case"w":at[C]=-A;break;case"n":at[C]=A;break;case"s":at[C]=-A;break;case"u":i[C]!==void 0&&(at.z=A);break;case"d":i[C]!==void 0&&(at.z=-A);break;default:return null}return at}function Ue(t){var n={x:t[0],y:t[1]};return t.length>2&&(n.z=t[2]),t.length>3&&(n.m=t[3]),n}function Pe(t){Bt(t.x),Bt(t.y)}function Bt(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ft(t,n){return(t.datum.datum_type===w||t.datum.datum_type===S||t.datum.datum_type===v)&&n.datumCode!=="WGS84"||(n.datum.datum_type===w||n.datum.datum_type===S||n.datum.datum_type===v)&&t.datumCode!=="WGS84"}function Gt(t,n,i,M){var P;Array.isArray(i)?i=Ue(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var L=i.z!==void 0;if(Pe(i),t.datum&&n.datum&&Ft(t,n)&&(P=new fe("WGS84"),i=Gt(t,P,i,M),t=P),M&&t.axis!=="enu"&&(i=Ie(t,!1,i)),t.projName==="longlat")i={x:i.x*O,y:i.y*O,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),i=t.inverse(i),!i)return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=Ke(t.datum,n.datum,i),!!i)return n.from_greenwich&&(i={x:i.x-n.from_greenwich,y:i.y,z:i.z||0}),n.projName==="longlat"?i={x:i.x*m,y:i.y*m,z:i.z||0}:(i=n.forward(i),n.to_meter&&(i={x:i.x/n.to_meter,y:i.y/n.to_meter,z:i.z||0})),M&&n.axis!=="enu"?Ie(n,!0,i):(i&&!L&&delete i.z,i)}var Ut=fe("WGS84");function Nt(t,n,i,M){var P,L,A;return Array.isArray(i)?(P=Gt(t,n,i,M)||{x:NaN,y:NaN},i.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"?typeof P.z=="number"?[P.x,P.y,P.z].concat(i.splice(3)):[P.x,P.y,i[2]].concat(i.splice(3)):[P.x,P.y].concat(i.splice(2)):[P.x,P.y]):(L=Gt(t,n,i,M),A=Object.keys(i),A.length===2||A.forEach(function(C){if(typeof t.name<"u"&&t.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"){if(C==="x"||C==="y"||C==="z")return}else if(C==="x"||C==="y")return;L[C]=i[C]}),L)}function ye(t){return t instanceof fe?t:t.oProj?t.oProj:fe(t)}function Le(t,n,i){t=ye(t);var M=!1,P;return typeof n>"u"?(n=t,t=Ut,M=!0):(typeof n.x<"u"||Array.isArray(n))&&(i=n,n=t,t=Ut,M=!0),n=ye(n),i?Nt(t,n,i):(P={forward:function(L,A){return Nt(t,n,L,A)},inverse:function(L,A){return Nt(n,t,L,A)}},M&&(P.oProj=n),P)}var bt=Le,me=e(18857),De=e(49500);function we(t,n,i){if(!(this instanceof we))return new we(t,n,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof n>"u"){var M=t.split(",");this.x=parseFloat(M[0],10),this.y=parseFloat(M[1],10),this.z=parseFloat(M[2],10)||0}else this.x=t,this.y=n,this.z=i||0;De.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}we.fromMGRS=function(t){return new we((0,me.jt)(t))},we.prototype.toMGRS=function(t){return(0,me.eH)([this.x,this.y],t)};var We=we,se=1,Mr=.25,fr=.046875,hr=.01953125,Ze=.01068115234375,rr=.75,cr=.46875,he=.013020833333333334,Ht=.007120768229166667,ce=.3645833333333333,Oe=.005696614583333333,Xe=.3076171875;function Je(t){var n=[];n[0]=se-t*(Mr+t*(fr+t*(hr+t*Ze))),n[1]=t*(rr-t*(fr+t*(hr+t*Ze)));var i=t*t;return n[2]=i*(cr-t*(he+t*Ht)),i*=t,n[3]=i*(ce-t*Oe),n[4]=i*t*Xe,n}function Be(t,n,i,M){return i*=n,n*=n,M[0]*t-i*(M[1]+n*(M[2]+n*(M[3]+n*M[4])))}var Ae=20;function Ne(t,n,i){for(var M=1/(1-n),P=t,L=Ae;L;--L){var A=Math.sin(P),C=1-n*A*A;if(C=(Be(P,A,Math.cos(P),i)-t)*(C*Math.sqrt(C))*M,P-=C,Math.abs(C)<d)return P}return P}function dr(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Je(this.es),this.ml0=Be(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function nr(t){var n=t.x,i=t.y,M=Q(n-this.long0),P,L,A,C=Math.sin(i),U=Math.cos(i);if(this.es){var pt=U*M,mt=Math.pow(pt,2),Et=this.ep2*Math.pow(U,2),Lt=Math.pow(Et,2),Ot=Math.abs(U)>d?Math.tan(i):0,Ct=Math.pow(Ot,2),Rt=Math.pow(Ct,2);P=1-this.es*Math.pow(C,2),pt=pt/Math.sqrt(P);var kt=Be(i,C,U,this.en);L=this.a*(this.k0*pt*(1+mt/6*(1-Ct+Et+mt/20*(5-18*Ct+Rt+14*Et-58*Ct*Et+mt/42*(61+179*Rt-Rt*Ct-479*Ct)))))+this.x0,A=this.a*(this.k0*(kt-this.ml0+C*M*pt/2*(1+mt/12*(5-Ct+9*Et+4*Lt+mt/30*(61+Rt-58*Ct+270*Et-330*Ct*Et+mt/56*(1385+543*Rt-Rt*Ct-3111*Ct))))))+this.y0}else{var at=U*Math.sin(M);if(Math.abs(Math.abs(at)-1)<d)return 93;if(L=.5*this.a*this.k0*Math.log((1+at)/(1-at))+this.x0,A=U*Math.cos(M)/Math.sqrt(1-Math.pow(at,2)),at=Math.abs(A),at>=1){if(at-1>d)return 93;A=0}else A=Math.acos(A);i<0&&(A=-A),A=this.a*this.k0*(A-this.lat0)+this.y0}return t.x=L,t.y=A,t}function Ar(t){var n,i,M,P,L=(t.x-this.x0)*(1/this.a),A=(t.y-this.y0)*(1/this.a);if(this.es)if(n=this.ml0+A/this.k0,i=Ne(n,this.es,this.en),Math.abs(i)<x){var mt=Math.sin(i),Et=Math.cos(i),Lt=Math.abs(Et)>d?Math.tan(i):0,Ot=this.ep2*Math.pow(Et,2),Ct=Math.pow(Ot,2),Rt=Math.pow(Lt,2),kt=Math.pow(Rt,2);n=1-this.es*Math.pow(mt,2);var ae=L*Math.sqrt(n)/this.k0,Zt=Math.pow(ae,2);n=n*Lt,M=i-n*Zt/(1-this.es)*.5*(1-Zt/12*(5+3*Rt-9*Ot*Rt+Ot-4*Ct-Zt/30*(61+90*Rt-252*Ot*Rt+45*kt+46*Ot-Zt/56*(1385+3633*Rt+4095*kt+1574*kt*Rt)))),P=Q(this.long0+ae*(1-Zt/6*(1+2*Rt+Ot-Zt/20*(5+28*Rt+24*kt+8*Ot*Rt+6*Ot-Zt/42*(61+662*Rt+1320*kt+720*kt*Rt))))/Et)}else M=x*rt(A),P=0;else{var C=Math.exp(L/this.k0),U=.5*(C-1/C),at=this.lat0+A/this.k0,pt=Math.cos(at);n=Math.sqrt((1-Math.pow(pt,2))/(1+Math.pow(U,2))),M=Math.asin(n),A<0&&(M=-M),U===0&&pt===0?P=0:P=Q(Math.atan2(U,pt)+this.long0)}return t.x=P,t.y=M,t}var jr=["Fast_Transverse_Mercator","Fast Transverse Mercator"],vr={init:dr,forward:nr,inverse:Ar,names:jr};function wr(t){var n=Math.exp(t);return n=(n-1/n)/2,n}function Te(t,n){t=Math.abs(t),n=Math.abs(n);var i=Math.max(t,n),M=Math.min(t,n)/(i||1);return i*Math.sqrt(1+Math.pow(M,2))}function Rr(t){var n=1+t,i=n-1;return i===0?t:t*Math.log(n)/i}function Br(t){var n=Math.abs(t);return n=Rr(n*(1+n/(Te(1,n)+1))),t<0?-n:n}function Sr(t,n){for(var i=2*Math.cos(2*n),M=t.length-1,P=t[M],L=0,A;--M>=0;)A=-L+i*P+t[M],L=P,P=A;return n+A*Math.sin(2*n)}function br(t,n){for(var i=2*Math.cos(n),M=t.length-1,P=t[M],L=0,A;--M>=0;)A=-L+i*P+t[M],L=P,P=A;return Math.sin(n)*A}function Gr(t){var n=Math.exp(t);return n=(n+1/n)/2,n}function Tr(t,n,i){for(var M=Math.sin(n),P=Math.cos(n),L=wr(i),A=Gr(i),C=2*P*A,U=-2*M*L,at=t.length-1,pt=t[at],mt=0,Et=0,Lt=0,Ot,Ct;--at>=0;)Ot=Et,Ct=mt,Et=pt,mt=Lt,pt=-Ot+C*Et-U*mt+t[at],Lt=-Ct+U*Et+C*mt;return C=M*A,U=P*L,[C*pt-U*Lt,C*Lt+U*pt]}function Dr(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(vr.init.apply(this),this.forward=vr.forward,this.inverse=vr.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),n=t/(2-t),i=n;this.cgb[0]=n*(2+n*(-2/3+n*(-2+n*(116/45+n*(26/45+n*(-2854/675)))))),this.cbg[0]=n*(-2+n*(2/3+n*(4/3+n*(-82/45+n*(32/45+n*(4642/4725)))))),i=i*n,this.cgb[1]=i*(7/3+n*(-8/5+n*(-227/45+n*(2704/315+n*(2323/945))))),this.cbg[1]=i*(5/3+n*(-16/15+n*(-13/9+n*(904/315+n*(-1522/945))))),i=i*n,this.cgb[2]=i*(56/15+n*(-136/35+n*(-1262/105+n*(73814/2835)))),this.cbg[2]=i*(-26/15+n*(34/21+n*(8/5+n*(-12686/2835)))),i=i*n,this.cgb[3]=i*(4279/630+n*(-332/35+n*(-399572/14175))),this.cbg[3]=i*(1237/630+n*(-12/5+n*(-24832/14175))),i=i*n,this.cgb[4]=i*(4174/315+n*(-144838/6237)),this.cbg[4]=i*(-734/315+n*(109598/31185)),i=i*n,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(n,2),this.Qn=this.k0/(1+n)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=n*(-.5+n*(2/3+n*(-37/96+n*(1/360+n*(81/512+n*(-96199/604800)))))),this.gtu[0]=n*(.5+n*(-2/3+n*(5/16+n*(41/180+n*(-127/288+n*(7891/37800)))))),this.utg[1]=i*(-1/48+n*(-1/15+n*(437/1440+n*(-46/105+n*(1118711/3870720))))),this.gtu[1]=i*(13/48+n*(-3/5+n*(557/1440+n*(281/630+n*(-1983433/1935360))))),i=i*n,this.utg[2]=i*(-17/480+n*(37/840+n*(209/4480+n*(-5569/90720)))),this.gtu[2]=i*(61/240+n*(-103/140+n*(15061/26880+n*(167603/181440)))),i=i*n,this.utg[3]=i*(-4397/161280+n*(11/504+n*(830251/7257600))),this.gtu[3]=i*(49561/161280+n*(-179/168+n*(6601661/7257600))),i=i*n,this.utg[4]=i*(-4583/161280+n*(108847/3991680)),this.gtu[4]=i*(34729/80640+n*(-3418889/1995840)),i=i*n,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var M=Sr(this.cbg,this.lat0);this.Zb=-this.Qn*(M+br(this.gtu,2*M))}function Nr(t){var n=Q(t.x-this.long0),i=t.y;i=Sr(this.cbg,i);var M=Math.sin(i),P=Math.cos(i),L=Math.sin(n),A=Math.cos(n);i=Math.atan2(M,A*P),n=Math.atan2(L*P,Te(M,P*A)),n=Br(Math.tan(n));var C=Tr(this.gtu,2*i,2*n);i=i+C[0],n=n+C[1];var U,at;return Math.abs(n)<=2.623395162778?(U=this.a*(this.Qn*n)+this.x0,at=this.a*(this.Qn*i+this.Zb)+this.y0):(U=1/0,at=1/0),t.x=U,t.y=at,t}function kr(t){var n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,n=n/this.Qn;var M,P;if(Math.abs(n)<=2.623395162778){var L=Tr(this.utg,2*i,2*n);i=i+L[0],n=n+L[1],n=Math.atan(wr(n));var A=Math.sin(i),C=Math.cos(i),U=Math.sin(n),at=Math.cos(n);i=Math.atan2(A*at,Te(U,at*C)),n=Math.atan2(U,at*C),M=Q(n+this.long0),P=Sr(this.cgb,i)}else M=1/0,P=1/0;return t.x=M,t.y=P,t}var Vr=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],yr={init:Dr,forward:Nr,inverse:kr,names:Vr};function zr(t,n){if(t===void 0){if(t=Math.floor((Q(n)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Ur="etmerc";function Wr(){var t=zr(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*O,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,yr.init.apply(this),this.forward=yr.forward,this.inverse=yr.inverse}var Zr=["Universal Transverse Mercator System","utm"],Xr={init:Wr,names:Zr,dependsOn:Ur};function Pr(t,n){return Math.pow((1-t)/(1+t),n)}var Jr=20;function Qr(){var t=Math.sin(this.lat0),n=Math.cos(this.lat0);n*=n,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*n*n/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+p)/(Math.pow(Math.tan(.5*this.lat0+p),this.C)*Pr(this.e*t,this.ratexp))}function Hr(t){var n=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+p),this.C)*Pr(this.e*Math.sin(i),this.ratexp))-x,t.x=this.C*n,t}function Kr(t){for(var n=1e-14,i=t.x/this.C,M=t.y,P=Math.pow(Math.tan(.5*M+p)/this.K,1/this.C),L=Jr;L>0&&(M=2*Math.atan(P*Pr(this.e*Math.sin(t.y),-.5*this.e))-x,!(Math.abs(M-t.y)<n));--L)t.y=M;return L?(t.x=i,t.y=M,t):null}var Yr=["gauss"],Er={init:Qr,forward:Hr,inverse:Kr,names:Yr};function $r(){Er.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function qr(t){var n,i,M,P;return t.x=Q(t.x-this.long0),Er.forward.apply(this,[t]),n=Math.sin(t.y),i=Math.cos(t.y),M=Math.cos(t.x),P=this.k0*this.R2/(1+this.sinc0*n+this.cosc0*i*M),t.x=P*i*Math.sin(t.x),t.y=P*(this.cosc0*n-this.sinc0*i*M),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function _r(t){var n,i,M,P,L;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,L=Te(t.x,t.y)){var A=2*Math.atan2(L,this.R2);n=Math.sin(A),i=Math.cos(A),P=Math.asin(i*this.sinc0+t.y*n*this.cosc0/L),M=Math.atan2(t.x*n,L*this.cosc0*i-t.y*this.sinc0*n)}else P=this.phic0,M=0;return t.x=M,t.y=P,Er.inverse.apply(this,[t]),t.x=Q(t.x+this.long0),t}var tn=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],en={init:$r,forward:qr,inverse:_r,names:tn};function rn(t,n,i){return n*=i,Math.tan(.5*(x+t))*Math.pow((1-n)/(1+n),.5*i)}function nn(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=d&&(this.k0=.5*(1+rt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=d&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=d&&Math.abs(Math.cos(this.lat_ts))>d&&(this.k0=.5*this.cons*_(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=_(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-x,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function an(t){var n=t.x,i=t.y,M=Math.sin(i),P=Math.cos(i),L,A,C,U,at,pt,mt=Q(n-this.long0);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=d&&Math.abs(i+this.lat0)<=d?(t.x=NaN,t.y=NaN,t):this.sphere?(L=2*this.k0/(1+this.sinlat0*M+this.coslat0*P*Math.cos(mt)),t.x=this.a*L*P*Math.sin(mt)+this.x0,t.y=this.a*L*(this.coslat0*M-this.sinlat0*P*Math.cos(mt))+this.y0,t):(A=2*Math.atan(this.ssfn_(i,M,this.e))-x,U=Math.cos(A),C=Math.sin(A),Math.abs(this.coslat0)<=d?(at=tt(this.e,i*this.con,this.con*M),pt=2*this.a*this.k0*at/this.cons,t.x=this.x0+pt*Math.sin(n-this.long0),t.y=this.y0-this.con*pt*Math.cos(n-this.long0),t):(Math.abs(this.sinlat0)<d?(L=2*this.a*this.k0/(1+U*Math.cos(mt)),t.y=L*C):(L=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*C+this.cosX0*U*Math.cos(mt))),t.y=L*(this.cosX0*C-this.sinX0*U*Math.cos(mt))+this.y0),t.x=L*U*Math.sin(mt)+this.x0,t))}function sn(t){t.x-=this.x0,t.y-=this.y0;var n,i,M,P,L,A=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var C=2*Math.atan(A/(2*this.a*this.k0));return n=this.long0,i=this.lat0,A<=d?(t.x=n,t.y=i,t):(i=Math.asin(Math.cos(C)*this.sinlat0+t.y*Math.sin(C)*this.coslat0/A),Math.abs(this.coslat0)<d?this.lat0>0?n=Q(this.long0+Math.atan2(t.x,-1*t.y)):n=Q(this.long0+Math.atan2(t.x,t.y)):n=Q(this.long0+Math.atan2(t.x*Math.sin(C),A*this.coslat0*Math.cos(C)-t.y*this.sinlat0*Math.sin(C))),t.x=n,t.y=i,t)}else if(Math.abs(this.coslat0)<=d){if(A<=d)return i=this.lat0,n=this.long0,t.x=n,t.y=i,t;t.x*=this.con,t.y*=this.con,M=A*this.cons/(2*this.a*this.k0),i=this.con*xt(this.e,M),n=this.con*Q(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else P=2*Math.atan(A*this.cosX0/(2*this.a*this.k0*this.ms1)),n=this.long0,A<=d?L=this.X0:(L=Math.asin(Math.cos(P)*this.sinX0+t.y*Math.sin(P)*this.cosX0/A),n=Q(this.long0+Math.atan2(t.x*Math.sin(P),A*this.cosX0*Math.cos(P)-t.y*this.sinX0*Math.sin(P)))),i=-1*xt(this.e,Math.tan(.5*(x+L)));return t.x=n,t.y=i,t}var on=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ln={init:nn,forward:an,inverse:sn,names:on,ssfn_:rn};function un(){var t=this.lat0;this.lambda0=this.long0;var n=Math.sin(t),i=this.a,M=this.rf,P=1/M,L=2*P-Math.pow(P,2),A=this.e=Math.sqrt(L);this.R=this.k0*i*Math.sqrt(1-L)/(1-L*Math.pow(n,2)),this.alpha=Math.sqrt(1+L/(1-L)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(n/this.alpha);var C=Math.log(Math.tan(Math.PI/4+this.b0/2)),U=Math.log(Math.tan(Math.PI/4+t/2)),at=Math.log((1+A*n)/(1-A*n));this.K=C-this.alpha*U+this.alpha*A/2*at}function fn(t){var n=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),M=-this.alpha*(n+i)+this.K,P=2*(Math.atan(Math.exp(M))-Math.PI/4),L=this.alpha*(t.x-this.lambda0),A=Math.atan(Math.sin(L)/(Math.sin(this.b0)*Math.tan(P)+Math.cos(this.b0)*Math.cos(L))),C=Math.asin(Math.cos(this.b0)*Math.sin(P)-Math.sin(this.b0)*Math.cos(P)*Math.cos(L));return t.y=this.R/2*Math.log((1+Math.sin(C))/(1-Math.sin(C)))+this.y0,t.x=this.R*A+this.x0,t}function hn(t){for(var n=t.x-this.x0,i=t.y-this.y0,M=n/this.R,P=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),L=Math.asin(Math.cos(this.b0)*Math.sin(P)+Math.sin(this.b0)*Math.cos(P)*Math.cos(M)),A=Math.atan(Math.sin(M)/(Math.cos(this.b0)*Math.cos(M)-Math.sin(this.b0)*Math.tan(P))),C=this.lambda0+A/this.alpha,U=0,at=L,pt=-1e3,mt=0;Math.abs(at-pt)>1e-7;){if(++mt>20)return;U=1/this.alpha*(Math.log(Math.tan(Math.PI/4+L/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(at))/2)),pt=at,at=2*Math.atan(Math.exp(U))-Math.PI/2}return t.x=C,t.y=at,t}var cn=["somerc"],dn={init:un,forward:fn,inverse:hn,names:cn},Ye=1e-7;function vn(t){var n=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||n.indexOf(i)!==-1}function yn(){var t,n,i,M,P,L,A,C,U,at,pt=0,mt,Et=0,Lt=0,Ot=0,Ct=0,Rt=0,kt=0,ae;this.no_off=vn(this),this.no_rot="no_rot"in this;var Zt=!1;"alpha"in this&&(Zt=!0);var _t=!1;if("rectified_grid_angle"in this&&(_t=!0),Zt&&(kt=this.alpha),_t&&(pt=this.rectified_grid_angle*O),Zt||_t)Et=this.longc;else if(Lt=this.long1,Ct=this.lat1,Ot=this.long2,Rt=this.lat2,Math.abs(Ct-Rt)<=Ye||(t=Math.abs(Ct))<=Ye||Math.abs(t-x)<=Ye||Math.abs(Math.abs(this.lat0)-x)<=Ye||Math.abs(Math.abs(Rt)-x)<=Ye)throw new Error;var Yt=1-this.es;n=Math.sqrt(Yt),Math.abs(this.lat0)>d?(C=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*C*C,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/Yt),this.A=this.B*this.k0*n/t,M=this.B*n/(i*Math.sqrt(t)),P=M*M-1,P<=0?P=0:(P=Math.sqrt(P),this.lat0<0&&(P=-P)),this.E=P+=M,this.E*=Math.pow(tt(this.e,this.lat0,C),this.B)):(this.B=1/n,this.A=this.k0,this.E=M=P=1),Zt||_t?(Zt?(mt=Math.asin(Math.sin(kt)/M),_t||(pt=kt)):(mt=pt,kt=Math.asin(M*Math.sin(mt))),this.lam0=Et-Math.asin(.5*(P-1/P)*Math.tan(mt))/this.B):(L=Math.pow(tt(this.e,Ct,Math.sin(Ct)),this.B),A=Math.pow(tt(this.e,Rt,Math.sin(Rt)),this.B),P=this.E/L,U=(A-L)/(A+L),at=this.E*this.E,at=(at-A*L)/(at+A*L),t=Lt-Ot,t<-Math.pi?Ot-=o:t>Math.pi&&(Ot+=o),this.lam0=Q(.5*(Lt+Ot)-Math.atan(at*Math.tan(.5*this.B*(Lt-Ot))/U)/this.B),mt=Math.atan(2*Math.sin(this.B*Q(Lt-this.lam0))/(P-1/P)),pt=kt=Math.asin(M*Math.sin(mt))),this.singam=Math.sin(mt),this.cosgam=Math.cos(mt),this.sinrot=Math.sin(pt),this.cosrot=Math.cos(pt),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,ae=this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(M*M-1)/Math.cos(kt))),this.lat0<0&&(this.u_0=-this.u_0)),P=.5*mt,this.v_pole_n=this.ArB*Math.log(Math.tan(p-P)),this.v_pole_s=this.ArB*Math.log(Math.tan(p+P))}function gn(t){var n={},i,M,P,L,A,C,U,at;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-x)>d){if(A=this.E/Math.pow(tt(this.e,t.y,Math.sin(t.y)),this.B),C=1/A,i=.5*(A-C),M=.5*(A+C),L=Math.sin(this.B*t.x),P=(i*this.singam-L*this.cosgam)/M,Math.abs(Math.abs(P)-1)<d)throw new Error;at=.5*this.ArB*Math.log((1-P)/(1+P)),C=Math.cos(this.B*t.x),Math.abs(C)<Ye?U=this.A*t.x:U=this.ArB*Math.atan2(i*this.cosgam+L*this.singam,C)}else at=t.y>0?this.v_pole_n:this.v_pole_s,U=this.ArB*t.y;return this.no_rot?(n.x=U,n.y=at):(U-=this.u_0,n.x=at*this.cosrot+U*this.sinrot,n.y=U*this.cosrot-at*this.sinrot),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function mn(t){var n,i,M,P,L,A,C,U={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,n=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,n=t.y*this.cosrot+t.x*this.sinrot+this.u_0),M=Math.exp(-this.BrA*i),P=.5*(M-1/M),L=.5*(M+1/M),A=Math.sin(this.BrA*n),C=(A*this.cosgam+P*this.singam)/L,Math.abs(Math.abs(C)-1)<d)U.x=0,U.y=C<0?-x:x;else{if(U.y=this.E/Math.sqrt((1+C)/(1-C)),U.y=xt(this.e,Math.pow(U.y,1/this.B)),U.y===1/0)throw new Error;U.x=-this.rB*Math.atan2(P*this.cosgam-A*this.singam,Math.cos(this.BrA*n))}return U.x+=this.lam0,U}var xn=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],pn={init:yn,forward:gn,inverse:mn,names:xn};function Mn(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<d)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var n=Math.sin(this.lat1),i=Math.cos(this.lat1),M=_(this.e,n,i),P=tt(this.e,this.lat1,n),L=Math.sin(this.lat2),A=Math.cos(this.lat2),C=_(this.e,L,A),U=tt(this.e,this.lat2,L),at=tt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>d?this.ns=Math.log(M/C)/Math.log(P/U):this.ns=n,isNaN(this.ns)&&(this.ns=n),this.f0=M/(this.ns*Math.pow(P,this.ns)),this.rh=this.a*this.f0*Math.pow(at,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Sn(t){var n=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=d&&(i=rt(i)*(x-2*d));var M=Math.abs(Math.abs(i)-x),P,L;if(M>d)P=tt(this.e,i,Math.sin(i)),L=this.a*this.f0*Math.pow(P,this.ns);else{if(M=i*this.ns,M<=0)return null;L=0}var A=this.ns*Q(n-this.long0);return t.x=this.k0*(L*Math.sin(A))+this.x0,t.y=this.k0*(this.rh-L*Math.cos(A))+this.y0,t}function Pn(t){var n,i,M,P,L,A=(t.x-this.x0)/this.k0,C=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(n=Math.sqrt(A*A+C*C),i=1):(n=-Math.sqrt(A*A+C*C),i=-1);var U=0;if(n!==0&&(U=Math.atan2(i*A,i*C)),n!==0||this.ns>0){if(i=1/this.ns,M=Math.pow(n/(this.a*this.f0),i),P=xt(this.e,M),P===-9999)return null}else P=-x;return L=Q(U/this.ns+this.long0),t.x=L,t.y=P,t}var En=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],In={init:Mn,forward:Sn,inverse:Pn,names:En};function wn(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Tn(t){var n,i,M,P,L,A,C,U=t.x,at=t.y,pt=Q(U-this.long0);return n=Math.pow((1+this.e*Math.sin(at))/(1-this.e*Math.sin(at)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(at/2+this.s45),this.alfa)/n)-this.s45),M=-pt*this.alfa,P=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(M)),L=Math.asin(Math.cos(i)*Math.sin(M)/Math.cos(P)),A=this.n*L,C=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(P/2+this.s45),this.n),t.y=C*Math.cos(A)/1,t.x=C*Math.sin(A)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Fn(t){var n,i,M,P,L,A,C,U,at=t.x;t.x=t.y,t.y=at,this.czech||(t.y*=-1,t.x*=-1),A=Math.sqrt(t.x*t.x+t.y*t.y),L=Math.atan2(t.y,t.x),P=L/Math.sin(this.s0),M=2*(Math.atan(Math.pow(this.ro0/A,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),n=Math.asin(Math.cos(this.ad)*Math.sin(M)-Math.sin(this.ad)*Math.cos(M)*Math.cos(P)),i=Math.asin(Math.cos(M)*Math.sin(P)/Math.cos(n)),t.x=this.long0-i/this.alfa,C=n,U=0;var pt=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(n/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(C))/(1-this.e*Math.sin(C)),this.e/2))-this.s45),Math.abs(C-t.y)<1e-10&&(U=1),C=t.y,pt+=1;while(U===0&&pt<15);return pt>=15?null:t}var Ln=["Krovak","krovak"],Cn={init:wn,forward:Tn,inverse:Fn,names:Ln};function pe(t,n,i,M,P){return t*P-n*Math.sin(2*P)+i*Math.sin(4*P)-M*Math.sin(6*P)}function ir(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ar(t){return .375*t*(1+.25*t*(1+.46875*t))}function sr(t){return .05859375*t*t*(1+.75*t)}function or(t){return t*t*t*(35/3072)}function $e(t,n,i){var M=n*i;return t/Math.sqrt(1-M*M)}function qe(t){return Math.abs(t)<x?t:t-rt(t)*Math.PI}function gr(t,n,i,M,P){var L,A;L=t/n;for(var C=0;C<15;C++)if(A=(t-(n*L-i*Math.sin(2*L)+M*Math.sin(4*L)-P*Math.sin(6*L)))/(n-2*i*Math.cos(2*L)+4*M*Math.cos(4*L)-6*P*Math.cos(6*L)),L+=A,Math.abs(A)<=1e-10)return L;return NaN}function On(){this.sphere||(this.e0=ir(this.es),this.e1=ar(this.es),this.e2=sr(this.es),this.e3=or(this.es),this.ml0=this.a*pe(this.e0,this.e1,this.e2,this.e3,this.lat0))}function An(t){var n,i,M=t.x,P=t.y;if(M=Q(M-this.long0),this.sphere)n=this.a*Math.asin(Math.cos(P)*Math.sin(M)),i=this.a*(Math.atan2(Math.tan(P),Math.cos(M))-this.lat0);else{var L=Math.sin(P),A=Math.cos(P),C=$e(this.a,this.e,L),U=Math.tan(P)*Math.tan(P),at=M*Math.cos(P),pt=at*at,mt=this.es*A*A/(1-this.es),Et=this.a*pe(this.e0,this.e1,this.e2,this.e3,P);n=C*at*(1-pt*U*(1/6-(8-U+8*mt)*pt/120)),i=Et-this.ml0+C*L/A*pt*(.5+(5-U+6*mt)*pt/24)}return t.x=n+this.x0,t.y=i+this.y0,t}function jn(t){t.x-=this.x0,t.y-=this.y0;var n=t.x/this.a,i=t.y/this.a,M,P;if(this.sphere){var L=i+this.lat0;M=Math.asin(Math.sin(L)*Math.cos(n)),P=Math.atan2(Math.tan(n),Math.cos(L))}else{var A=this.ml0/this.a+i,C=gr(A,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(C)-x)<=d)return t.x=this.long0,t.y=x,i<0&&(t.y*=-1),t;var U=$e(this.a,this.e,Math.sin(C)),at=U*U*U/this.a/this.a*(1-this.es),pt=Math.pow(Math.tan(C),2),mt=n*this.a/U,Et=mt*mt;M=C-U*Math.tan(C)/at*mt*mt*(.5-(1+3*pt)*mt*mt/24),P=mt*(1-Et*(pt/3+(1+3*pt)*pt*Et/15))/Math.cos(C)}return t.x=Q(P+this.long0),t.y=qe(M),t}var Rn=["Cassini","Cassini_Soldner","cass"],Bn={init:On,forward:An,inverse:jn,names:Rn};function ke(t,n){var i;return t>1e-7?(i=t*n,(1-t*t)*(n/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*n}var bn=1,Gn=2,Dn=3,Nn=4;function kn(){var t=Math.abs(this.lat0);if(Math.abs(t-x)<d?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<d?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var n;switch(this.qp=ke(this.e,1),this.mmf=.5/(1-this.es),this.apa=Hn(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),n=Math.sin(this.lat0),this.sinb1=ke(this.e,n)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*n*n)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Vn(t){var n,i,M,P,L,A,C,U,at,pt,mt=t.x,Et=t.y;if(mt=Q(mt-this.long0),this.sphere){if(L=Math.sin(Et),pt=Math.cos(Et),M=Math.cos(mt),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+pt*M:1+this.sinph0*L+this.cosph0*pt*M,i<=d)return null;i=Math.sqrt(2/i),n=i*pt*Math.sin(mt),i*=this.mode===this.EQUIT?L:this.cosph0*L-this.sinph0*pt*M}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(M=-M),Math.abs(Et+this.lat0)<d)return null;i=p-Et*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),n=i*Math.sin(mt),i*=M}}else{switch(C=0,U=0,at=0,M=Math.cos(mt),P=Math.sin(mt),L=Math.sin(Et),A=ke(this.e,L),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(C=A/this.qp,U=Math.sqrt(1-C*C)),this.mode){case this.OBLIQ:at=1+this.sinb1*C+this.cosb1*U*M;break;case this.EQUIT:at=1+U*M;break;case this.N_POLE:at=x+Et,A=this.qp-A;break;case this.S_POLE:at=Et-x,A=this.qp+A;break}if(Math.abs(at)<d)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:at=Math.sqrt(2/at),this.mode===this.OBLIQ?i=this.ymf*at*(this.cosb1*C-this.sinb1*U*M):i=(at=Math.sqrt(2/(1+U*M)))*C*this.ymf,n=this.xmf*at*U*P;break;case this.N_POLE:case this.S_POLE:A>=0?(n=(at=Math.sqrt(A))*P,i=M*(this.mode===this.S_POLE?at:-at)):n=i=0;break}}return t.x=this.a*n+this.x0,t.y=this.a*i+this.y0,t}function zn(t){t.x-=this.x0,t.y-=this.y0;var n=t.x/this.a,i=t.y/this.a,M,P,L,A,C,U,at;if(this.sphere){var pt=0,mt,Et=0;if(mt=Math.sqrt(n*n+i*i),P=mt*.5,P>1)return null;switch(P=2*Math.asin(P),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Et=Math.sin(P),pt=Math.cos(P)),this.mode){case this.EQUIT:P=Math.abs(mt)<=d?0:Math.asin(i*Et/mt),n*=Et,i=pt*mt;break;case this.OBLIQ:P=Math.abs(mt)<=d?this.lat0:Math.asin(pt*this.sinph0+i*Et*this.cosph0/mt),n*=Et*this.cosph0,i=(pt-Math.sin(P)*this.sinph0)*mt;break;case this.N_POLE:i=-i,P=x-P;break;case this.S_POLE:P-=x;break}M=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(n,i)}else{if(at=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n/=this.dd,i*=this.dd,U=Math.sqrt(n*n+i*i),U<d)return t.x=this.long0,t.y=this.lat0,t;A=2*Math.asin(.5*U/this.rq),L=Math.cos(A),n*=A=Math.sin(A),this.mode===this.OBLIQ?(at=L*this.sinb1+i*A*this.cosb1/U,C=this.qp*at,i=U*this.cosb1*L-i*this.sinb1*A):(at=i*A/U,C=this.qp*at,i=U*L)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),C=n*n+i*i,!C)return t.x=this.long0,t.y=this.lat0,t;at=1-C/this.qp,this.mode===this.S_POLE&&(at=-at)}M=Math.atan2(n,i),P=Kn(Math.asin(at),this.apa)}return t.x=Q(this.long0+M),t.y=P,t}var Un=.3333333333333333,Wn=.17222222222222222,Zn=.10257936507936508,Xn=.06388888888888888,Jn=.0664021164021164,Qn=.016415012942191543;function Hn(t){var n,i=[];return i[0]=t*Un,n=t*t,i[0]+=n*Wn,i[1]=n*Xn,n*=t,i[0]+=n*Zn,i[1]+=n*Jn,i[2]=n*Qn,i}function Kn(t,n){var i=t+t;return t+n[0]*Math.sin(i)+n[1]*Math.sin(i+i)+n[2]*Math.sin(i+i+i)}var Yn=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],$n={init:kn,forward:Vn,inverse:zn,names:Yn,S_POLE:bn,N_POLE:Gn,EQUIT:Dn,OBLIQ:Nn};function Ve(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function qn(){Math.abs(this.lat1+this.lat2)<d||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=_(this.e3,this.sin_po,this.cos_po),this.qs1=ke(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=_(this.e3,this.sin_po,this.cos_po),this.qs2=ke(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ke(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>d?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function _n(t){var n=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var M=ke(this.e3,this.sin_phi),P=this.a*Math.sqrt(this.c-this.ns0*M)/this.ns0,L=this.ns0*Q(n-this.long0),A=P*Math.sin(L)+this.x0,C=this.rh-P*Math.cos(L)+this.y0;return t.x=A,t.y=C,t}function ti(t){var n,i,M,P,L,A;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),M=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),M=-1),P=0,n!==0&&(P=Math.atan2(M*t.x,M*t.y)),M=n*this.ns0/this.a,this.sphere?A=Math.asin((this.c-M*M)/(2*this.ns0)):(i=(this.c-M*M)/this.ns0,A=this.phi1z(this.e3,i)),L=Q(P/this.ns0+this.long0),t.x=L,t.y=A,t}function ei(t,n){var i,M,P,L,A,C=Ve(.5*n);if(t<d)return C;for(var U=t*t,at=1;at<=25;at++)if(i=Math.sin(C),M=Math.cos(C),P=t*i,L=1-P*P,A=.5*L*L/M*(n/(1-U)-i/L+.5/t*Math.log((1-P)/(1+P))),C=C+A,Math.abs(A)<=1e-7)return C;return null}var ri=["Albers_Conic_Equal_Area","Albers","aea"],ni={init:qn,forward:_n,inverse:ti,names:ri,phi1z:ei};function ii(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function ai(t){var n,i,M,P,L,A,C,U,at=t.x,pt=t.y;return M=Q(at-this.long0),n=Math.sin(pt),i=Math.cos(pt),P=Math.cos(M),A=this.sin_p14*n+this.cos_p14*i*P,L=1,A>0||Math.abs(A)<=d?(C=this.x0+this.a*L*i*Math.sin(M)/A,U=this.y0+this.a*L*(this.cos_p14*n-this.sin_p14*i*P)/A):(C=this.x0+this.infinity_dist*i*Math.sin(M),U=this.y0+this.infinity_dist*(this.cos_p14*n-this.sin_p14*i*P)),t.x=C,t.y=U,t}function si(t){var n,i,M,P,L,A;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(n=Math.sqrt(t.x*t.x+t.y*t.y))?(P=Math.atan2(n,this.rc),i=Math.sin(P),M=Math.cos(P),A=Ve(M*this.sin_p14+t.y*i*this.cos_p14/n),L=Math.atan2(t.x*i,n*this.cos_p14*M-t.y*this.sin_p14*i),L=Q(this.long0+L)):(A=this.phic0,L=0),t.x=L,t.y=A,t}var oi=["gnom"],li={init:ii,forward:ai,inverse:si,names:oi};function ui(t,n){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(n)-i)<1e-6)return n<0?-1*x:x;for(var M=Math.asin(.5*n),P,L,A,C,U=0;U<30;U++)if(L=Math.sin(M),A=Math.cos(M),C=t*L,P=Math.pow(1-C*C,2)/(2*A)*(n/(1-t*t)-L/(1-C*C)+.5/t*Math.log((1-C)/(1+C))),M+=P,Math.abs(P)<=1e-10)return M;return NaN}function fi(){this.sphere||(this.k0=_(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function hi(t){var n=t.x,i=t.y,M,P,L=Q(n-this.long0);if(this.sphere)M=this.x0+this.a*L*Math.cos(this.lat_ts),P=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var A=ke(this.e,Math.sin(i));M=this.x0+this.a*this.k0*L,P=this.y0+this.a*A*.5/this.k0}return t.x=M,t.y=P,t}function ci(t){t.x-=this.x0,t.y-=this.y0;var n,i;return this.sphere?(n=Q(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=ui(this.e,2*t.y*this.k0/this.a),n=Q(this.long0+t.x/(this.a*this.k0))),t.x=n,t.y=i,t}var di=["cea"],vi={init:fi,forward:hi,inverse:ci,names:di};function yi(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function gi(t){var n=t.x,i=t.y,M=Q(n-this.long0),P=qe(i-this.lat0);return t.x=this.x0+this.a*M*this.rc,t.y=this.y0+this.a*P,t}function mi(t){var n=t.x,i=t.y;return t.x=Q(this.long0+(n-this.x0)/(this.a*this.rc)),t.y=qe(this.lat0+(i-this.y0)/this.a),t}var xi=["Equirectangular","Equidistant_Cylindrical","eqc"],pi={init:yi,forward:gi,inverse:mi,names:xi},Fr=20;function Mi(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ir(this.es),this.e1=ar(this.es),this.e2=sr(this.es),this.e3=or(this.es),this.ml0=this.a*pe(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Si(t){var n=t.x,i=t.y,M,P,L,A=Q(n-this.long0);if(L=A*Math.sin(i),this.sphere)Math.abs(i)<=d?(M=this.a*A,P=-1*this.a*this.lat0):(M=this.a*Math.sin(L)/Math.tan(i),P=this.a*(qe(i-this.lat0)+(1-Math.cos(L))/Math.tan(i)));else if(Math.abs(i)<=d)M=this.a*A,P=-1*this.ml0;else{var C=$e(this.a,this.e,Math.sin(i))/Math.tan(i);M=C*Math.sin(L),P=this.a*pe(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+C*(1-Math.cos(L))}return t.x=M+this.x0,t.y=P+this.y0,t}function Pi(t){var n,i,M,P,L,A,C,U,at;if(M=t.x-this.x0,P=t.y-this.y0,this.sphere)if(Math.abs(P+this.a*this.lat0)<=d)n=Q(M/this.a+this.long0),i=0;else{A=this.lat0+P/this.a,C=M*M/this.a/this.a+A*A,U=A;var pt;for(L=Fr;L;--L)if(pt=Math.tan(U),at=-1*(A*(U*pt+1)-U-.5*(U*U+C)*pt)/((U-A)/pt-1),U+=at,Math.abs(at)<=d){i=U;break}n=Q(this.long0+Math.asin(M*Math.tan(U)/this.a)/Math.sin(i))}else if(Math.abs(P+this.ml0)<=d)i=0,n=Q(this.long0+M/this.a);else{A=(this.ml0+P)/this.a,C=M*M/this.a/this.a+A*A,U=A;var mt,Et,Lt,Ot,Ct;for(L=Fr;L;--L)if(Ct=this.e*Math.sin(U),mt=Math.sqrt(1-Ct*Ct)*Math.tan(U),Et=this.a*pe(this.e0,this.e1,this.e2,this.e3,U),Lt=this.e0-2*this.e1*Math.cos(2*U)+4*this.e2*Math.cos(4*U)-6*this.e3*Math.cos(6*U),Ot=Et/this.a,at=(A*(mt*Ot+1)-Ot-.5*mt*(Ot*Ot+C))/(this.es*Math.sin(2*U)*(Ot*Ot+C-2*A*Ot)/(4*mt)+(A-Ot)*(mt*Lt-2/Math.sin(2*U))-Lt),U-=at,Math.abs(at)<=d){i=U;break}mt=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),n=Q(this.long0+Math.asin(M*mt/this.a)/Math.sin(i))}return t.x=n,t.y=i,t}var Ei=["Polyconic","poly"],Ii={init:Mi,forward:Si,inverse:Pi,names:Ei},Wa=1;function wi(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Ti(t){var n,i=t.x,M=t.y,P=M-this.lat0,L=i-this.long0,A=P/I*1e-5,C=L,U=1,at=0;for(n=1;n<=10;n++)U=U*A,at=at+this.A[n]*U;var pt=at,mt=C,Et=1,Lt=0,Ot,Ct,Rt=0,kt=0;for(n=1;n<=6;n++)Ot=Et*pt-Lt*mt,Ct=Lt*pt+Et*mt,Et=Ot,Lt=Ct,Rt=Rt+this.B_re[n]*Et-this.B_im[n]*Lt,kt=kt+this.B_im[n]*Et+this.B_re[n]*Lt;return t.x=kt*this.a+this.x0,t.y=Rt*this.a+this.y0,t}function Fi(t){var n,i=t.x,M=t.y,P=i-this.x0,L=M-this.y0,A=L/this.a,C=P/this.a,U=1,at=0,pt,mt,Et=0,Lt=0;for(n=1;n<=6;n++)pt=U*A-at*C,mt=at*A+U*C,U=pt,at=mt,Et=Et+this.C_re[n]*U-this.C_im[n]*at,Lt=Lt+this.C_im[n]*U+this.C_re[n]*at;for(var Ot=0;Ot<this.iterations;Ot++){var Ct=Et,Rt=Lt,kt,ae,Zt=A,_t=C;for(n=2;n<=6;n++)kt=Ct*Et-Rt*Lt,ae=Rt*Et+Ct*Lt,Ct=kt,Rt=ae,Zt=Zt+(n-1)*(this.B_re[n]*Ct-this.B_im[n]*Rt),_t=_t+(n-1)*(this.B_im[n]*Ct+this.B_re[n]*Rt);Ct=1,Rt=0;var Yt=this.B_re[1],ee=this.B_im[1];for(n=2;n<=6;n++)kt=Ct*Et-Rt*Lt,ae=Rt*Et+Ct*Lt,Ct=kt,Rt=ae,Yt=Yt+n*(this.B_re[n]*Ct-this.B_im[n]*Rt),ee=ee+n*(this.B_im[n]*Ct+this.B_re[n]*Rt);var Fe=Yt*Yt+ee*ee;Et=(Zt*Yt+_t*ee)/Fe,Lt=(_t*Yt-Zt*ee)/Fe}var de=Et,je=Lt,Qe=1,He=0;for(n=1;n<=9;n++)Qe=Qe*de,He=He+this.D[n]*Qe;var pr=this.lat0+He*I*1e5,Ua=this.long0+je;return t.x=Ua,t.y=pr,t}var Li=["New_Zealand_Map_Grid","nzmg"],Ci={init:wi,forward:Ti,inverse:Fi,names:Li};function Oi(){}function Ai(t){var n=t.x,i=t.y,M=Q(n-this.long0),P=this.x0+this.a*M,L=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=P,t.y=L,t}function ji(t){t.x-=this.x0,t.y-=this.y0;var n=Q(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=n,t.y=i,t}var Ri=["Miller_Cylindrical","mill"],Bi={init:Oi,forward:Ai,inverse:ji,names:Ri},bi=20;function Gi(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Je(this.es)}function Di(t){var n,i,M=t.x,P=t.y;if(M=Q(M-this.long0),this.sphere){if(!this.m)P=this.n!==1?Math.asin(this.n*Math.sin(P)):P;else for(var L=this.n*Math.sin(P),A=bi;A;--A){var C=(this.m*P+Math.sin(P)-L)/(this.m+Math.cos(P));if(P-=C,Math.abs(C)<d)break}n=this.a*this.C_x*M*(this.m+Math.cos(P)),i=this.a*this.C_y*P}else{var U=Math.sin(P),at=Math.cos(P);i=this.a*Be(P,U,at,this.en),n=this.a*M*at/Math.sqrt(1-this.es*U*U)}return t.x=n,t.y=i,t}function Ni(t){var n,i,M,P;return t.x-=this.x0,M=t.x/this.a,t.y-=this.y0,n=t.y/this.a,this.sphere?(n/=this.C_y,M=M/(this.C_x*(this.m+Math.cos(n))),this.m?n=Ve((this.m*n+Math.sin(n))/this.n):this.n!==1&&(n=Ve(Math.sin(n)/this.n)),M=Q(M+this.long0),n=qe(n)):(n=Ne(t.y/this.a,this.es,this.en),P=Math.abs(n),P<x?(P=Math.sin(n),i=this.long0+t.x*Math.sqrt(1-this.es*P*P)/(this.a*Math.cos(n)),M=Q(i)):P-d<x&&(M=this.long0)),t.x=M,t.y=n,t}var ki=["Sinusoidal","sinu"],Vi={init:Gi,forward:Di,inverse:Ni,names:ki};function zi(){}function Ui(t){for(var n=t.x,i=t.y,M=Q(n-this.long0),P=i,L=Math.PI*Math.sin(i);;){var A=-(P+Math.sin(P)-L)/(1+Math.cos(P));if(P+=A,Math.abs(A)<d)break}P/=2,Math.PI/2-Math.abs(i)<d&&(M=0);var C=.900316316158*this.a*M*Math.cos(P)+this.x0,U=1.4142135623731*this.a*Math.sin(P)+this.y0;return t.x=C,t.y=U,t}function Wi(t){var n,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),n=Math.asin(i);var M=Q(this.long0+t.x/(.900316316158*this.a*Math.cos(n)));M<-Math.PI&&(M=-Math.PI),M>Math.PI&&(M=Math.PI),i=(2*n+Math.sin(2*n))/Math.PI,Math.abs(i)>1&&(i=1);var P=Math.asin(i);return t.x=M,t.y=P,t}var Zi=["Mollweide","moll"],Xi={init:zi,forward:Ui,inverse:Wi,names:Zi};function Ji(){Math.abs(this.lat1+this.lat2)<d||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ir(this.es),this.e1=ar(this.es),this.e2=sr(this.es),this.e3=or(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=_(this.e,this.sinphi,this.cosphi),this.ml1=pe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<d?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=_(this.e,this.sinphi,this.cosphi),this.ml2=pe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=pe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Qi(t){var n=t.x,i=t.y,M;if(this.sphere)M=this.a*(this.g-i);else{var P=pe(this.e0,this.e1,this.e2,this.e3,i);M=this.a*(this.g-P)}var L=this.ns*Q(n-this.long0),A=this.x0+M*Math.sin(L),C=this.y0+this.rh-M*Math.cos(L);return t.x=A,t.y=C,t}function Hi(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var n,i,M,P;this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1);var L=0;if(i!==0&&(L=Math.atan2(n*t.x,n*t.y)),this.sphere)return P=Q(this.long0+L/this.ns),M=qe(this.g-i/this.a),t.x=P,t.y=M,t;var A=this.g-i/this.a;return M=gr(A,this.e0,this.e1,this.e2,this.e3),P=Q(this.long0+L/this.ns),t.x=P,t.y=M,t}var Ki=["Equidistant_Conic","eqdc"],Yi={init:Ji,forward:Qi,inverse:Hi,names:Ki};function $i(){this.R=this.a}function qi(t){var n=t.x,i=t.y,M=Q(n-this.long0),P,L;Math.abs(i)<=d&&(P=this.x0+this.R*M,L=this.y0);var A=Ve(2*Math.abs(i/Math.PI));(Math.abs(M)<=d||Math.abs(Math.abs(i)-x)<=d)&&(P=this.x0,i>=0?L=this.y0+Math.PI*this.R*Math.tan(.5*A):L=this.y0+Math.PI*this.R*-Math.tan(.5*A));var C=.5*Math.abs(Math.PI/M-M/Math.PI),U=C*C,at=Math.sin(A),pt=Math.cos(A),mt=pt/(at+pt-1),Et=mt*mt,Lt=mt*(2/at-1),Ot=Lt*Lt,Ct=Math.PI*this.R*(C*(mt-Ot)+Math.sqrt(U*(mt-Ot)*(mt-Ot)-(Ot+U)*(Et-Ot)))/(Ot+U);M<0&&(Ct=-Ct),P=this.x0+Ct;var Rt=U+mt;return Ct=Math.PI*this.R*(Lt*Rt-C*Math.sqrt((Ot+U)*(U+1)-Rt*Rt))/(Ot+U),i>=0?L=this.y0+Ct:L=this.y0-Ct,t.x=P,t.y=L,t}function _i(t){var n,i,M,P,L,A,C,U,at,pt,mt,Et,Lt;return t.x-=this.x0,t.y-=this.y0,mt=Math.PI*this.R,M=t.x/mt,P=t.y/mt,L=M*M+P*P,A=-Math.abs(P)*(1+L),C=A-2*P*P+M*M,U=-2*A+1+2*P*P+L*L,Lt=P*P/U+(2*C*C*C/U/U/U-9*A*C/U/U)/27,at=(A-C*C/3/U)/U,pt=2*Math.sqrt(-at/3),mt=3*Lt/at/pt,Math.abs(mt)>1&&(mt>=0?mt=1:mt=-1),Et=Math.acos(mt)/3,t.y>=0?i=(-pt*Math.cos(Et+Math.PI/3)-C/3/U)*Math.PI:i=-(-pt*Math.cos(Et+Math.PI/3)-C/3/U)*Math.PI,Math.abs(M)<d?n=this.long0:n=Q(this.long0+Math.PI*(L-1+Math.sqrt(1+2*(M*M-P*P)+L*L))/2/M),t.x=n,t.y=i,t}var ta=["Van_der_Grinten_I","VanDerGrinten","vandg"],ea={init:$i,forward:qi,inverse:_i,names:ta};function ra(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function na(t){var n=t.x,i=t.y,M=Math.sin(t.y),P=Math.cos(t.y),L=Q(n-this.long0),A,C,U,at,pt,mt,Et,Lt,Ot,Ct,Rt,kt,ae,Zt,_t,Yt,ee,Fe,de,je,Qe,He,pr;return this.sphere?Math.abs(this.sin_p12-1)<=d?(t.x=this.x0+this.a*(x-i)*Math.sin(L),t.y=this.y0-this.a*(x-i)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=d?(t.x=this.x0+this.a*(x+i)*Math.sin(L),t.y=this.y0+this.a*(x+i)*Math.cos(L),t):(Fe=this.sin_p12*M+this.cos_p12*P*Math.cos(L),Yt=Math.acos(Fe),ee=Yt?Yt/Math.sin(Yt):1,t.x=this.x0+this.a*ee*P*Math.sin(L),t.y=this.y0+this.a*ee*(this.cos_p12*M-this.sin_p12*P*Math.cos(L)),t):(A=ir(this.es),C=ar(this.es),U=sr(this.es),at=or(this.es),Math.abs(this.sin_p12-1)<=d?(pt=this.a*pe(A,C,U,at,x),mt=this.a*pe(A,C,U,at,i),t.x=this.x0+(pt-mt)*Math.sin(L),t.y=this.y0-(pt-mt)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=d?(pt=this.a*pe(A,C,U,at,x),mt=this.a*pe(A,C,U,at,i),t.x=this.x0+(pt+mt)*Math.sin(L),t.y=this.y0+(pt+mt)*Math.cos(L),t):(Et=M/P,Lt=$e(this.a,this.e,this.sin_p12),Ot=$e(this.a,this.e,M),Ct=Math.atan((1-this.es)*Et+this.es*Lt*this.sin_p12/(Ot*P)),Rt=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(Ct)-this.sin_p12*Math.cos(L)),Rt===0?de=Math.asin(this.cos_p12*Math.sin(Ct)-this.sin_p12*Math.cos(Ct)):Math.abs(Math.abs(Rt)-Math.PI)<=d?de=-Math.asin(this.cos_p12*Math.sin(Ct)-this.sin_p12*Math.cos(Ct)):de=Math.asin(Math.sin(L)*Math.cos(Ct)/Math.sin(Rt)),kt=this.e*this.sin_p12/Math.sqrt(1-this.es),ae=this.e*this.cos_p12*Math.cos(Rt)/Math.sqrt(1-this.es),Zt=kt*ae,_t=ae*ae,je=de*de,Qe=je*de,He=Qe*de,pr=He*de,Yt=Lt*de*(1-je*_t*(1-_t)/6+Qe/8*Zt*(1-2*_t)+He/120*(_t*(4-7*_t)-3*kt*kt*(1-7*_t))-pr/48*Zt),t.x=this.x0+Yt*Math.sin(Rt),t.y=this.y0+Yt*Math.cos(Rt),t))}function ia(t){t.x-=this.x0,t.y-=this.y0;var n,i,M,P,L,A,C,U,at,pt,mt,Et,Lt,Ot,Ct,Rt,kt,ae,Zt,_t,Yt,ee,Fe,de;return this.sphere?(n=Math.sqrt(t.x*t.x+t.y*t.y),n>2*x*this.a?void 0:(i=n/this.a,M=Math.sin(i),P=Math.cos(i),L=this.long0,Math.abs(n)<=d?A=this.lat0:(A=Ve(P*this.sin_p12+t.y*M*this.cos_p12/n),C=Math.abs(this.lat0)-x,Math.abs(C)<=d?this.lat0>=0?L=Q(this.long0+Math.atan2(t.x,-t.y)):L=Q(this.long0-Math.atan2(-t.x,t.y)):L=Q(this.long0+Math.atan2(t.x*M,n*this.cos_p12*P-t.y*this.sin_p12*M))),t.x=L,t.y=A,t)):(U=ir(this.es),at=ar(this.es),pt=sr(this.es),mt=or(this.es),Math.abs(this.sin_p12-1)<=d?(Et=this.a*pe(U,at,pt,mt,x),n=Math.sqrt(t.x*t.x+t.y*t.y),Lt=Et-n,A=gr(Lt/this.a,U,at,pt,mt),L=Q(this.long0+Math.atan2(t.x,-1*t.y)),t.x=L,t.y=A,t):Math.abs(this.sin_p12+1)<=d?(Et=this.a*pe(U,at,pt,mt,x),n=Math.sqrt(t.x*t.x+t.y*t.y),Lt=n-Et,A=gr(Lt/this.a,U,at,pt,mt),L=Q(this.long0+Math.atan2(t.x,t.y)),t.x=L,t.y=A,t):(n=Math.sqrt(t.x*t.x+t.y*t.y),Rt=Math.atan2(t.x,t.y),Ot=$e(this.a,this.e,this.sin_p12),kt=Math.cos(Rt),ae=this.e*this.cos_p12*kt,Zt=-ae*ae/(1-this.es),_t=3*this.es*(1-Zt)*this.sin_p12*this.cos_p12*kt/(1-this.es),Yt=n/Ot,ee=Yt-Zt*(1+Zt)*Math.pow(Yt,3)/6-_t*(1+3*Zt)*Math.pow(Yt,4)/24,Fe=1-Zt*ee*ee/2-Yt*ee*ee*ee/6,Ct=Math.asin(this.sin_p12*Math.cos(ee)+this.cos_p12*Math.sin(ee)*kt),L=Q(this.long0+Math.asin(Math.sin(Rt)*Math.sin(ee)/Math.cos(Ct))),de=Math.sin(Ct),A=Math.atan2((de-this.es*Fe*this.sin_p12)*Math.tan(Ct),de*(1-this.es)),t.x=L,t.y=A,t))}var aa=["Azimuthal_Equidistant","aeqd"],sa={init:ra,forward:na,inverse:ia,names:aa};function oa(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function la(t){var n,i,M,P,L,A,C,U,at=t.x,pt=t.y;return M=Q(at-this.long0),n=Math.sin(pt),i=Math.cos(pt),P=Math.cos(M),A=this.sin_p14*n+this.cos_p14*i*P,L=1,(A>0||Math.abs(A)<=d)&&(C=this.a*L*i*Math.sin(M),U=this.y0+this.a*L*(this.cos_p14*n-this.sin_p14*i*P)),t.x=C,t.y=U,t}function ua(t){var n,i,M,P,L,A,C;return t.x-=this.x0,t.y-=this.y0,n=Math.sqrt(t.x*t.x+t.y*t.y),i=Ve(n/this.a),M=Math.sin(i),P=Math.cos(i),A=this.long0,Math.abs(n)<=d?(C=this.lat0,t.x=A,t.y=C,t):(C=Ve(P*this.sin_p14+t.y*M*this.cos_p14/n),L=Math.abs(this.lat0)-x,Math.abs(L)<=d?(this.lat0>=0?A=Q(this.long0+Math.atan2(t.x,-t.y)):A=Q(this.long0-Math.atan2(-t.x,t.y)),t.x=A,t.y=C,t):(A=Q(this.long0+Math.atan2(t.x*M,n*this.cos_p14*P-t.y*this.sin_p14*M)),t.x=A,t.y=C,t))}var fa=["ortho"],ha={init:oa,forward:la,inverse:ua,names:fa},ne={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Kt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function ca(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=x-p/2?this.face=ne.TOP:this.lat0<=-(x-p/2)?this.face=ne.BOTTOM:Math.abs(this.long0)<=p?this.face=ne.FRONT:Math.abs(this.long0)<=x+p?this.face=this.long0>0?ne.RIGHT:ne.LEFT:this.face=ne.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function da(t){var n={x:0,y:0},i,M,P,L,A,C,U={value:0};if(t.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):i=t.y,M=t.x,this.face===ne.TOP)L=x-i,M>=p&&M<=x+p?(U.value=Kt.AREA_0,P=M-x):M>x+p||M<=-(x+p)?(U.value=Kt.AREA_1,P=M>0?M-h:M+h):M>-(x+p)&&M<=-p?(U.value=Kt.AREA_2,P=M+x):(U.value=Kt.AREA_3,P=M);else if(this.face===ne.BOTTOM)L=x+i,M>=p&&M<=x+p?(U.value=Kt.AREA_0,P=-M+x):M<p&&M>=-p?(U.value=Kt.AREA_1,P=-M):M<-p&&M>=-(x+p)?(U.value=Kt.AREA_2,P=-M-x):(U.value=Kt.AREA_3,P=M>0?-M+h:-M-h);else{var at,pt,mt,Et,Lt,Ot,Ct;this.face===ne.RIGHT?M=_e(M,+x):this.face===ne.BACK?M=_e(M,+h):this.face===ne.LEFT&&(M=_e(M,-x)),Et=Math.sin(i),Lt=Math.cos(i),Ot=Math.sin(M),Ct=Math.cos(M),at=Lt*Ct,pt=Lt*Ot,mt=Et,this.face===ne.FRONT?(L=Math.acos(at),P=mr(L,mt,pt,U)):this.face===ne.RIGHT?(L=Math.acos(pt),P=mr(L,mt,-at,U)):this.face===ne.BACK?(L=Math.acos(-at),P=mr(L,mt,-pt,U)):this.face===ne.LEFT?(L=Math.acos(-pt),P=mr(L,mt,at,U)):(L=P=0,U.value=Kt.AREA_0)}return C=Math.atan(12/h*(P+Math.acos(Math.sin(P)*Math.cos(p))-x)),A=Math.sqrt((1-Math.cos(L))/(Math.cos(C)*Math.cos(C))/(1-Math.cos(Math.atan(1/Math.cos(P))))),U.value===Kt.AREA_1?C+=x:U.value===Kt.AREA_2?C+=h:U.value===Kt.AREA_3&&(C+=1.5*h),n.x=A*Math.cos(C),n.y=A*Math.sin(C),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,t.x=n.x,t.y=n.y,t}function va(t){var n={lam:0,phi:0},i,M,P,L,A,C,U,at,pt,mt={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,M=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?mt.value=Kt.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(mt.value=Kt.AREA_1,i-=x):t.x<0&&-t.x>=Math.abs(t.y)?(mt.value=Kt.AREA_2,i=i<0?i+h:i-h):(mt.value=Kt.AREA_3,i+=x),pt=h/12*Math.tan(i),A=Math.sin(pt)/(Math.cos(pt)-1/Math.sqrt(2)),C=Math.atan(A),P=Math.cos(i),L=Math.tan(M),U=1-P*P*L*L*(1-Math.cos(Math.atan(1/Math.cos(C)))),U<-1?U=-1:U>1&&(U=1),this.face===ne.TOP)at=Math.acos(U),n.phi=x-at,mt.value===Kt.AREA_0?n.lam=C+x:mt.value===Kt.AREA_1?n.lam=C<0?C+h:C-h:mt.value===Kt.AREA_2?n.lam=C-x:n.lam=C;else if(this.face===ne.BOTTOM)at=Math.acos(U),n.phi=at-x,mt.value===Kt.AREA_0?n.lam=-C+x:mt.value===Kt.AREA_1?n.lam=-C:mt.value===Kt.AREA_2?n.lam=-C-x:n.lam=C<0?-C-h:-C+h;else{var Et,Lt,Ot;Et=U,pt=Et*Et,pt>=1?Ot=0:Ot=Math.sqrt(1-pt)*Math.sin(C),pt+=Ot*Ot,pt>=1?Lt=0:Lt=Math.sqrt(1-pt),mt.value===Kt.AREA_1?(pt=Lt,Lt=-Ot,Ot=pt):mt.value===Kt.AREA_2?(Lt=-Lt,Ot=-Ot):mt.value===Kt.AREA_3&&(pt=Lt,Lt=Ot,Ot=-pt),this.face===ne.RIGHT?(pt=Et,Et=-Lt,Lt=pt):this.face===ne.BACK?(Et=-Et,Lt=-Lt):this.face===ne.LEFT&&(pt=Et,Et=Lt,Lt=-pt),n.phi=Math.acos(-Ot)-x,n.lam=Math.atan2(Lt,Et),this.face===ne.RIGHT?n.lam=_e(n.lam,-x):this.face===ne.BACK?n.lam=_e(n.lam,-h):this.face===ne.LEFT&&(n.lam=_e(n.lam,+x))}if(this.es!==0){var Ct,Rt,kt;Ct=n.phi<0?1:0,Rt=Math.tan(n.phi),kt=this.b/Math.sqrt(Rt*Rt+this.one_minus_f_squared),n.phi=Math.atan(Math.sqrt(this.a*this.a-kt*kt)/(this.one_minus_f*kt)),Ct&&(n.phi=-n.phi)}return n.lam+=this.long0,t.x=n.lam,t.y=n.phi,t}function mr(t,n,i,M){var P;return t<d?(M.value=Kt.AREA_0,P=0):(P=Math.atan2(n,i),Math.abs(P)<=p?M.value=Kt.AREA_0:P>p&&P<=x+p?(M.value=Kt.AREA_1,P-=x):P>x+p||P<=-(x+p)?(M.value=Kt.AREA_2,P=P>=0?P-h:P+h):(M.value=Kt.AREA_3,P+=x)),P}function _e(t,n){var i=t+n;return i<-h?i+=o:i>+h&&(i-=o),i}var ya=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],ga={init:ca,forward:da,inverse:va,names:ya},Ir=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],lr=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Lr=.8487,Cr=1.3523,Or=m/5,ma=1/Or,tr=18,xr=function(t,n){return t[0]+n*(t[1]+n*(t[2]+n*t[3]))},xa=function(t,n){return t[1]+n*(2*t[2]+n*3*t[3])};function pa(t,n,i,M){for(var P=n;M;--M){var L=t(P);if(P-=L,Math.abs(L)<i)break}return P}function Ma(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Sa(t){var n=Q(t.x-this.long0),i=Math.abs(t.y),M=Math.floor(i*Or);M<0?M=0:M>=tr&&(M=tr-1),i=m*(i-ma*M);var P={x:xr(Ir[M],i)*n,y:xr(lr[M],i)};return t.y<0&&(P.y=-P.y),P.x=P.x*this.a*Lr+this.x0,P.y=P.y*this.a*Cr+this.y0,P}function Pa(t){var n={x:(t.x-this.x0)/(this.a*Lr),y:Math.abs(t.y-this.y0)/(this.a*Cr)};if(n.y>=1)n.x/=Ir[tr][0],n.y=t.y<0?-x:x;else{var i=Math.floor(n.y*tr);for(i<0?i=0:i>=tr&&(i=tr-1);;)if(lr[i][0]>n.y)--i;else if(lr[i+1][0]<=n.y)++i;else break;var M=lr[i],P=5*(n.y-M[0])/(lr[i+1][0]-M[0]);P=pa(function(L){return(xr(M,L)-n.y)/xa(M,L)},P,d,100),n.x/=xr(Ir[i],P),n.y=(5*i+P)*O,t.y<0&&(n.y=-n.y)}return n.x=Q(n.x+this.long0),n}var Ea=["Robinson","robin"],Ia={init:Ma,forward:Sa,inverse:Pa,names:Ea};function wa(){this.name="geocent"}function Ta(t){var n=ue(t,this.es,this.a);return n}function Fa(t){var n=ge(t,this.es,this.a,this.b);return n}var La=["Geocentric","geocentric","geocent","Geocent"],Ca={init:wa,forward:Ta,inverse:Fa,names:La},xe={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},ur={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Oa(){if(Object.keys(ur).forEach(function(i){if(typeof this[i]>"u")this[i]=ur[i].def;else{if(ur[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);ur[i].num&&(this[i]=parseFloat(this[i]))}ur[i].degrees&&(this[i]=this[i]*O)}.bind(this)),Math.abs(Math.abs(this.lat0)-x)<d?this.mode=this.lat0<0?xe.S_POLE:xe.N_POLE:Math.abs(this.lat0)<d?this.mode=xe.EQUIT:(this.mode=xe.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,n=this.azi;this.cg=Math.cos(n),this.sg=Math.sin(n),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Aa(t){t.x-=this.long0;var n=Math.sin(t.y),i=Math.cos(t.y),M=Math.cos(t.x),P,L;switch(this.mode){case xe.OBLIQ:L=this.sinph0*n+this.cosph0*i*M;break;case xe.EQUIT:L=i*M;break;case xe.S_POLE:L=-n;break;case xe.N_POLE:L=n;break}switch(L=this.pn1/(this.p-L),P=L*i*Math.sin(t.x),this.mode){case xe.OBLIQ:L*=this.cosph0*n-this.sinph0*i*M;break;case xe.EQUIT:L*=n;break;case xe.N_POLE:L*=-(i*M);break;case xe.S_POLE:L*=i*M;break}var A,C;return A=L*this.cg+P*this.sg,C=1/(A*this.sw*this.h1+this.cw),P=(P*this.cg-L*this.sg)*this.cw*C,L=A*C,t.x=P*this.a,t.y=L*this.a,t}function ja(t){t.x/=this.a,t.y/=this.a;var n={x:t.x,y:t.y},i,M,P;P=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*P,M=this.pn1*t.y*this.cw*P,t.x=i*this.cg+M*this.sg,t.y=M*this.cg-i*this.sg;var L=Te(t.x,t.y);if(Math.abs(L)<d)n.x=0,n.y=t.y;else{var A,C;switch(C=1-L*L*this.pfact,C=(this.p-Math.sqrt(C))/(this.pn1/L+L/this.pn1),A=Math.sqrt(1-C*C),this.mode){case xe.OBLIQ:n.y=Math.asin(A*this.sinph0+t.y*C*this.cosph0/L),t.y=(A-this.sinph0*Math.sin(n.y))*L,t.x*=C*this.cosph0;break;case xe.EQUIT:n.y=Math.asin(t.y*C/L),t.y=A*L,t.x*=C;break;case xe.N_POLE:n.y=Math.asin(A),t.y=-t.y;break;case xe.S_POLE:n.y=-Math.asin(A);break}n.x=Math.atan2(t.x,t.y)}return t.x=n.x+this.long0,t.y=n.y,t}var Ra=["Tilted_Perspective","tpers"],Ba={init:Oa,forward:Aa,inverse:ja,names:Ra};function ba(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,n=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=n,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Ga(t){var n=t.x,i=t.y,M,P,L,A;if(n=n-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var C=this.radius_p/Te(this.radius_p*Math.cos(i),Math.sin(i));if(P=C*Math.cos(n)*Math.cos(i),L=C*Math.sin(n)*Math.cos(i),A=C*Math.sin(i),(this.radius_g-P)*P-L*L-A*A*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;M=this.radius_g-P,this.flip_axis?(t.x=this.radius_g_1*Math.atan(L/Te(A,M)),t.y=this.radius_g_1*Math.atan(A/M)):(t.x=this.radius_g_1*Math.atan(L/M),t.y=this.radius_g_1*Math.atan(A/Te(L,M)))}else this.shape==="sphere"&&(M=Math.cos(i),P=Math.cos(n)*M,L=Math.sin(n)*M,A=Math.sin(i),M=this.radius_g-P,this.flip_axis?(t.x=this.radius_g_1*Math.atan(L/Te(A,M)),t.y=this.radius_g_1*Math.atan(A/M)):(t.x=this.radius_g_1*Math.atan(L/M),t.y=this.radius_g_1*Math.atan(A/Te(L,M))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Da(t){var n=-1,i=0,M=0,P,L,A,C;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(M=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Te(1,M)):(i=Math.tan(t.x/this.radius_g_1),M=Math.tan(t.y/this.radius_g_1)*Te(1,i));var U=M/this.radius_p;if(P=i*i+U*U+n*n,L=2*this.radius_g*n,A=L*L-4*P*this.C,A<0)return t.x=Number.NaN,t.y=Number.NaN,t;C=(-L-Math.sqrt(A))/(2*P),n=this.radius_g+C*n,i*=C,M*=C,t.x=Math.atan2(i,n),t.y=Math.atan(M*Math.cos(t.x)/n),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(M=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+M*M)):(i=Math.tan(t.x/this.radius_g_1),M=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+i*i)),P=i*i+M*M+n*n,L=2*this.radius_g*n,A=L*L-4*P*this.C,A<0)return t.x=Number.NaN,t.y=Number.NaN,t;C=(-L-Math.sqrt(A))/(2*P),n=this.radius_g+C*n,i*=C,M*=C,t.x=Math.atan2(i,n),t.y=Math.atan(M*Math.cos(t.x)/n)}return t.x=t.x+this.long0,t}var Na=["Geostationary Satellite View","Geostationary_Satellite","geos"],ka={init:ba,forward:Ga,inverse:Da,names:Na};function Va(t){t.Proj.projections.add(vr),t.Proj.projections.add(yr),t.Proj.projections.add(Xr),t.Proj.projections.add(en),t.Proj.projections.add(ln),t.Proj.projections.add(dn),t.Proj.projections.add(pn),t.Proj.projections.add(In),t.Proj.projections.add(Cn),t.Proj.projections.add(Bn),t.Proj.projections.add($n),t.Proj.projections.add(ni),t.Proj.projections.add(li),t.Proj.projections.add(vi),t.Proj.projections.add(pi),t.Proj.projections.add(Ii),t.Proj.projections.add(Ci),t.Proj.projections.add(Bi),t.Proj.projections.add(Vi),t.Proj.projections.add(Xi),t.Proj.projections.add(Yi),t.Proj.projections.add(ea),t.Proj.projections.add(sa),t.Proj.projections.add(ha),t.Proj.projections.add(ga),t.Proj.projections.add(Ia),t.Proj.projections.add(Ca),t.Proj.projections.add(Ba),t.Proj.projections.add(ka)}bt.defaultDatum="WGS84",bt.Proj=fe,bt.WGS84=new bt.Proj("WGS84"),bt.Point=We,bt.toPoint=Ue,bt.defs=yt,bt.nadgrid=te,bt.transform=Gt,bt.mgrs=me.ZP,bt.version="__VERSION__",Va(bt);var za=bt},3842:function(H,b,e){var c=e(11889).$,w=e(92043),S=Math.PI,v=S*3e3/180,u=b.toGCJ02=c(function(s,F,g){var I=s[g]-.0065,x=s[g+1]-.006,E=Math.sqrt(I*I+x*x)-2e-5*Math.sin(x*v),f=Math.atan2(x,I)-3e-6*Math.cos(I*v);return F[g]=E*Math.cos(f),F[g+1]=E*Math.sin(f),F}),a=b.fromGCJ02=c(function(s,F,g){var I=s[g],x=s[g+1],E=Math.sqrt(I*I+x*x)+2e-5*Math.sin(x*v),f=Math.atan2(x,I)+3e-6*Math.cos(I*v);return F[g]=E*Math.cos(f)+.0065,F[g+1]=E*Math.sin(f)+.006,F});b.toWGS84=function(s,F,g){var I=u(s,F,g);return w.toWGS84(I,I,g)},b.fromWGS84=function(s,F,g){var I=w.fromWGS84(s,F,g);return a(I,I,g)}},92043:function(H,b,e){var c=e(11889).$,w=Math.PI,S=6378245,v=.006693421622965943;function u(g,I){var x=s(g-105,I-35),E=F(g-105,I-35),f=I/180*w,l=Math.sin(f);l=1-v*l*l;var d=Math.sqrt(l);return x=x*180/(S*(1-v)/(l*d)*w),E=E*180/(S/d*Math.cos(f)*w),[E,x]}function a(g,I){return g<72.004||g>137.8347||I<.8293||I>55.8271}function s(g,I){var x=-100+2*g+3*I+.2*I*I+.1*g*I+.2*Math.sqrt(Math.abs(g));return x+=(20*Math.sin(6*g*w)+20*Math.sin(2*g*w))*2/3,x+=(20*Math.sin(I*w)+40*Math.sin(I/3*w))*2/3,x+=(160*Math.sin(I/12*w)+320*Math.sin(I*w/30))*2/3,x}function F(g,I){var x=300+g+2*I+.1*g*g+.1*g*I+.1*Math.sqrt(Math.abs(g));return x+=(20*Math.sin(6*g*w)+20*Math.sin(2*g*w))*2/3,x+=(20*Math.sin(g*w)+40*Math.sin(g/3*w))*2/3,x+=(150*Math.sin(g/12*w)+300*Math.sin(g/30*w))*2/3,x}b.toWGS84=c(function(g,I,x){var E=g[x],f=g[x+1];if(!a(E,f)){var l=u(E,f);E=E-l[0],f=f-l[1]}I[x]=E,I[x+1]=f}),b.fromWGS84=c(function(g,I,x){var E=g[x],f=g[x+1];if(!a(E,f)){var l=u(E,f);E=E+l[0],f=f+l[1]}I[x]=E,I[x+1]=f})},75019:function(H,b,e){b.bd09=e(3842),b.gcj02=e(92043)},5621:function(H,b,e){var c=e(45374),w=e(75019);b.smerc2bmerc=function(S,v,u){var a=c.sphericalMercator.inverse(S,v,u);return a=w.bd09.fromWGS84(a,a,u),c.baiduMercator.forward(a,a,u)},b.bmerc2smerc=function(S,v,u){var a=c.baiduMercator.inverse(S,v,u);return a=w.bd09.toWGS84(a,a,u),c.sphericalMercator.forward(a,a,u)},b.bmerc2ll=function(S,v,u){var a=c.baiduMercator.inverse(S,v,u);return w.bd09.toWGS84(a,a,u)},b.ll2bmerc=function(S,v,u){var a=w.bd09.fromWGS84(S,v,u);return c.baiduMercator.forward(a,a,u)},b.ll2smerc=c.sphericalMercator.forward,b.smerc2ll=c.sphericalMercator.inverse,b.datum=w,b.projection=c},33754:function(H,b,e){var c=e(11889).$,w=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],S=[75,60,45,30,15,0],v=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],u=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function a(g,I,x){return g=Math.max(g,I),g=Math.min(g,x),g}function s(g,I,x){for(var E=x-I;g>x;)g-=E;for(;g<I;)g+=E;return g}function F(g,I,x,E){var f=g[x],l=g[x+1],d=E[0]+E[1]*Math.abs(f),O=Math.abs(l)/E[9],m=E[2]+E[3]*O+E[4]*O*O+E[5]*O*O*O+E[6]*O*O*O*O+E[7]*O*O*O*O*O+E[8]*O*O*O*O*O*O;I[x]=d*(f<0?-1:1),I[x+1]=m*(l<0?-1:1)}b.forward=c(function(g,I,x){var E=s(g[x],-180,180),f=a(g[x+1],-74,74),l=null,d;for(d=0;d<S.length;++d)if(f>=S[d]){l=u[d];break}if(l===null){for(d=S.length-1;d>=0;--d)if(f<=-S[d]){l=u[d];break}}I[x]=E,I[x+1]=f,F(I,I,x,l)}),b.inverse=c(function(g,I,x){for(var E=Math.abs(g[x+1]),f=null,l=0;l<w.length;l++)if(E>=w[l]){f=v[l];break}F(g,I,x,f)})},45374:function(H,b,e){b.baiduMercator=e(33754),b.sphericalMercator=e(99324)},99324:function(H,b,e){var c=e(11889).$,w=6378137,S=85.0511287798,v=Math.PI/180;b.forward=c(function(u,a,s){var F=Math.max(Math.min(S,u[s+1]),-S),g=Math.sin(F*v);a[s]=w*u[s]*v,a[s+1]=w*Math.log((1+g)/(1-g))/2}),b.inverse=c(function(u,a,s){a[s]=u[s]/w/v,a[s+1]=(2*Math.atan(Math.exp(u[s+1]/w))-Math.PI/2)/v})},11889:function(H,b){b.$=function(e){return function(c,w,S){var v=c.length,u=S||2,a;w?a=w:u!==2?a=c.slice():a=new Array(v);for(var s=0;s<v;s+=u)e(c,a,s);return a}}},54061:function(H,b,e){"use strict";H.exports=e(26039)},26039:function(H,b,e){"use strict";var c=b;c.build="minimal",c.Writer=e(16495),c.BufferWriter=e(90396),c.Reader=e(4199),c.BufferReader=e(19242),c.util=e(67032),c.rpc=e(63497),c.roots=e(5473),c.configure=w;function w(){c.util._configure(),c.Writer._configure(c.BufferWriter),c.Reader._configure(c.BufferReader)}w()},4199:function(H,b,e){"use strict";H.exports=a;var c=e(67032),w,S=c.LongBits,v=c.utf8;function u(E,f){return RangeError("index out of range: "+E.pos+" + "+(f||1)+" > "+E.len)}function a(E){this.buf=E,this.pos=0,this.len=E.length}var s=typeof Uint8Array<"u"?function(f){if(f instanceof Uint8Array||Array.isArray(f))return new a(f);throw Error("illegal buffer")}:function(f){if(Array.isArray(f))return new a(f);throw Error("illegal buffer")},F=function(){return c.Buffer?function(l){return(a.create=function(O){return c.Buffer.isBuffer(O)?new w(O):s(O)})(l)}:s};a.create=F(),a.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice,a.prototype.uint32=function(){var f=4294967295;return function(){if(f=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(f=(f|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(f=(f|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return f;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return f}}(),a.prototype.int32=function(){return this.uint32()|0},a.prototype.sint32=function(){var f=this.uint32();return f>>>1^-(f&1)|0};function g(){var E=new S(0,0),f=0;if(this.len-this.pos>4){for(;f<4;++f)if(E.lo=(E.lo|(this.buf[this.pos]&127)<<f*7)>>>0,this.buf[this.pos++]<128)return E;if(E.lo=(E.lo|(this.buf[this.pos]&127)<<28)>>>0,E.hi=(E.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return E;f=0}else{for(;f<3;++f){if(this.pos>=this.len)throw u(this);if(E.lo=(E.lo|(this.buf[this.pos]&127)<<f*7)>>>0,this.buf[this.pos++]<128)return E}return E.lo=(E.lo|(this.buf[this.pos++]&127)<<f*7)>>>0,E}if(this.len-this.pos>4){for(;f<5;++f)if(E.hi=(E.hi|(this.buf[this.pos]&127)<<f*7+3)>>>0,this.buf[this.pos++]<128)return E}else for(;f<5;++f){if(this.pos>=this.len)throw u(this);if(E.hi=(E.hi|(this.buf[this.pos]&127)<<f*7+3)>>>0,this.buf[this.pos++]<128)return E}throw Error("invalid varint encoding")}a.prototype.bool=function(){return this.uint32()!==0};function I(E,f){return(E[f-4]|E[f-3]<<8|E[f-2]<<16|E[f-1]<<24)>>>0}a.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return I(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return I(this.buf,this.pos+=4)|0};function x(){if(this.pos+8>this.len)throw u(this,8);return new S(I(this.buf,this.pos+=4),I(this.buf,this.pos+=4))}a.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var f=c.float.readFloatLE(this.buf,this.pos);return this.pos+=4,f},a.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var f=c.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,f},a.prototype.bytes=function(){var f=this.uint32(),l=this.pos,d=this.pos+f;if(d>this.len)throw u(this,f);return this.pos+=f,Array.isArray(this.buf)?this.buf.slice(l,d):l===d?new this.buf.constructor(0):this._slice.call(this.buf,l,d)},a.prototype.string=function(){var f=this.bytes();return v.read(f,0,f.length)},a.prototype.skip=function(f){if(typeof f=="number"){if(this.pos+f>this.len)throw u(this,f);this.pos+=f}else do if(this.pos>=this.len)throw u(this);while(this.buf[this.pos++]&128);return this},a.prototype.skipType=function(E){switch(E){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(E=this.uint32()&7)!==4;)this.skipType(E);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+E+" at offset "+this.pos)}return this},a._configure=function(E){w=E,a.create=F(),w._configure();var f=c.Long?"toLong":"toNumber";c.merge(a.prototype,{int64:function(){return g.call(this)[f](!1)},uint64:function(){return g.call(this)[f](!0)},sint64:function(){return g.call(this).zzDecode()[f](!1)},fixed64:function(){return x.call(this)[f](!0)},sfixed64:function(){return x.call(this)[f](!1)}})}},19242:function(H,b,e){"use strict";H.exports=S;var c=e(4199);(S.prototype=Object.create(c.prototype)).constructor=S;var w=e(67032);function S(v){c.call(this,v)}S._configure=function(){w.Buffer&&(S.prototype._slice=w.Buffer.prototype.slice)},S.prototype.string=function(){var u=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+u,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+u,this.len))},S._configure()},5473:function(H){"use strict";H.exports={}},63497:function(H,b,e){"use strict";var c=b;c.Service=e(6120)},6120:function(H,b,e){"use strict";H.exports=w;var c=e(67032);(w.prototype=Object.create(c.EventEmitter.prototype)).constructor=w;function w(S,v,u){if(typeof S!="function")throw TypeError("rpcImpl must be a function");c.EventEmitter.call(this),this.rpcImpl=S,this.requestDelimited=!!v,this.responseDelimited=!!u}w.prototype.rpcCall=function S(v,u,a,s,F){if(!s)throw TypeError("request must be specified");var g=this;if(!F)return c.asPromise(S,g,v,u,a,s);if(!g.rpcImpl){setTimeout(function(){F(Error("already ended"))},0);return}try{return g.rpcImpl(v,u[g.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(x,E){if(x)return g.emit("error",x,v),F(x);if(E===null){g.end(!0);return}if(!(E instanceof a))try{E=a[g.responseDelimited?"decodeDelimited":"decode"](E)}catch(f){return g.emit("error",f,v),F(f)}return g.emit("data",E,v),F(null,E)})}catch(I){g.emit("error",I,v),setTimeout(function(){F(I)},0);return}},w.prototype.end=function(v){return this.rpcImpl&&(v||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},48215:function(H,b,e){"use strict";H.exports=w;var c=e(67032);function w(a,s){this.lo=a>>>0,this.hi=s>>>0}var S=w.zero=new w(0,0);S.toNumber=function(){return 0},S.zzEncode=S.zzDecode=function(){return this},S.length=function(){return 1};var v=w.zeroHash="\0\0\0\0\0\0\0\0";w.fromNumber=function(s){if(s===0)return S;var F=s<0;F&&(s=-s);var g=s>>>0,I=(s-g)/4294967296>>>0;return F&&(I=~I>>>0,g=~g>>>0,++g>4294967295&&(g=0,++I>4294967295&&(I=0))),new w(g,I)},w.from=function(s){if(typeof s=="number")return w.fromNumber(s);if(c.isString(s))if(c.Long)s=c.Long.fromString(s);else return w.fromNumber(parseInt(s,10));return s.low||s.high?new w(s.low>>>0,s.high>>>0):S},w.prototype.toNumber=function(s){if(!s&&this.hi>>>31){var F=~this.lo+1>>>0,g=~this.hi>>>0;return F||(g=g+1>>>0),-(F+g*4294967296)}return this.lo+this.hi*4294967296},w.prototype.toLong=function(s){return c.Long?new c.Long(this.lo|0,this.hi|0,!!s):{low:this.lo|0,high:this.hi|0,unsigned:!!s}};var u=String.prototype.charCodeAt;w.fromHash=function(s){return s===v?S:new w((u.call(s,0)|u.call(s,1)<<8|u.call(s,2)<<16|u.call(s,3)<<24)>>>0,(u.call(s,4)|u.call(s,5)<<8|u.call(s,6)<<16|u.call(s,7)<<24)>>>0)},w.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},w.prototype.zzEncode=function(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},w.prototype.zzDecode=function(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},w.prototype.length=function(){var s=this.lo,F=(this.lo>>>28|this.hi<<4)>>>0,g=this.hi>>>24;return g===0?F===0?s<16384?s<128?1:2:s<2097152?3:4:F<16384?F<128?5:6:F<2097152?7:8:g<128?9:10}},67032:function(H,b,e){"use strict";var c=b;c.asPromise=e(45317),c.base64=e(98660),c.EventEmitter=e(23745),c.float=e(19059),c.inquire=e(50491),c.utf8=e(68375),c.pool=e(93646),c.LongBits=e(48215),c.isNode=!!(typeof e.g<"u"&&e.g&&e.g.process&&e.g.process.versions&&e.g.process.versions.node),c.global=c.isNode&&e.g||typeof window<"u"&&window||typeof self<"u"&&self||this,c.emptyArray=Object.freeze?Object.freeze([]):[],c.emptyObject=Object.freeze?Object.freeze({}):{},c.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},c.isString=function(u){return typeof u=="string"||u instanceof String},c.isObject=function(u){return u&&typeof u=="object"},c.isset=c.isSet=function(u,a){var s=u[a];return s!=null&&u.hasOwnProperty(a)?typeof s!="object"||(Array.isArray(s)?s.length:Object.keys(s).length)>0:!1},c.Buffer=function(){try{var v=c.inquire("buffer").Buffer;return v.prototype.utf8Write?v:null}catch{return null}}(),c._Buffer_from=null,c._Buffer_allocUnsafe=null,c.newBuffer=function(u){return typeof u=="number"?c.Buffer?c._Buffer_allocUnsafe(u):new c.Array(u):c.Buffer?c._Buffer_from(u):typeof Uint8Array>"u"?u:new Uint8Array(u)},c.Array=typeof Uint8Array<"u"?Uint8Array:Array,c.Long=c.global.dcodeIO&&c.global.dcodeIO.Long||c.global.Long||c.inquire("long"),c.key2Re=/^true|false|0|1$/,c.key32Re=/^-?(?:0|[1-9][0-9]*)$/,c.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,c.longToHash=function(u){return u?c.LongBits.from(u).toHash():c.LongBits.zeroHash},c.longFromHash=function(u,a){var s=c.LongBits.fromHash(u);return c.Long?c.Long.fromBits(s.lo,s.hi,a):s.toNumber(!!a)};function w(v,u,a){for(var s=Object.keys(u),F=0;F<s.length;++F)(v[s[F]]===void 0||!a)&&(v[s[F]]=u[s[F]]);return v}c.merge=w,c.lcFirst=function(u){return u.charAt(0).toLowerCase()+u.substring(1)};function S(v){function u(a,s){if(!(this instanceof u))return new u(a,s);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,u):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&w(this,s)}return(u.prototype=Object.create(Error.prototype)).constructor=u,Object.defineProperty(u.prototype,"name",{get:function(){return v}}),u.prototype.toString=function(){return this.name+": "+this.message},u}c.newError=S,c.ProtocolError=S("ProtocolError"),c.oneOfGetter=function(u){for(var a={},s=0;s<u.length;++s)a[u[s]]=1;return function(){for(var F=Object.keys(this),g=F.length-1;g>-1;--g)if(a[F[g]]===1&&this[F[g]]!==void 0&&this[F[g]]!==null)return F[g]}},c.oneOfSetter=function(u){return function(a){for(var s=0;s<u.length;++s)u[s]!==a&&delete this[u[s]]}},c.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},c._configure=function(){var v=c.Buffer;if(!v){c._Buffer_from=c._Buffer_allocUnsafe=null;return}c._Buffer_from=v.from!==Uint8Array.from&&v.from||function(a,s){return new v(a,s)},c._Buffer_allocUnsafe=v.allocUnsafe||function(a){return new v(a)}}},16495:function(H,b,e){"use strict";H.exports=g;var c=e(67032),w,S=c.LongBits,v=c.base64,u=c.utf8;function a(m,p,o){this.fn=m,this.len=p,this.next=void 0,this.val=o}function s(){}function F(m){this.head=m.head,this.tail=m.tail,this.len=m.len,this.next=m.states}function g(){this.len=0,this.head=new a(s,0,0),this.tail=this.head,this.states=null}var I=function(){return c.Buffer?function(){return(g.create=function(){return new w})()}:function(){return new g}};g.create=I(),g.alloc=function(p){return new c.Array(p)},c.Array!==Array&&(g.alloc=c.pool(g.alloc,c.Array.prototype.subarray)),g.prototype._push=function(p,o,h){return this.tail=this.tail.next=new a(p,o,h),this.len+=o,this};function x(m,p,o){p[o]=m&255}function E(m,p,o){for(;m>127;)p[o++]=m&127|128,m>>>=7;p[o]=m}function f(m,p){this.len=m,this.next=void 0,this.val=p}f.prototype=Object.create(a.prototype),f.prototype.fn=E,g.prototype.uint32=function(p){return this.len+=(this.tail=this.tail.next=new f((p=p>>>0)<128?1:p<16384?2:p<2097152?3:p<268435456?4:5,p)).len,this},g.prototype.int32=function(p){return p<0?this._push(l,10,S.fromNumber(p)):this.uint32(p)},g.prototype.sint32=function(p){return this.uint32((p<<1^p>>31)>>>0)};function l(m,p,o){for(;m.hi;)p[o++]=m.lo&127|128,m.lo=(m.lo>>>7|m.hi<<25)>>>0,m.hi>>>=7;for(;m.lo>127;)p[o++]=m.lo&127|128,m.lo=m.lo>>>7;p[o++]=m.lo}g.prototype.uint64=function(p){var o=S.from(p);return this._push(l,o.length(),o)},g.prototype.int64=g.prototype.uint64,g.prototype.sint64=function(p){var o=S.from(p).zzEncode();return this._push(l,o.length(),o)},g.prototype.bool=function(p){return this._push(x,1,p?1:0)};function d(m,p,o){p[o]=m&255,p[o+1]=m>>>8&255,p[o+2]=m>>>16&255,p[o+3]=m>>>24}g.prototype.fixed32=function(p){return this._push(d,4,p>>>0)},g.prototype.sfixed32=g.prototype.fixed32,g.prototype.fixed64=function(p){var o=S.from(p);return this._push(d,4,o.lo)._push(d,4,o.hi)},g.prototype.sfixed64=g.prototype.fixed64,g.prototype.float=function(p){return this._push(c.float.writeFloatLE,4,p)},g.prototype.double=function(p){return this._push(c.float.writeDoubleLE,8,p)};var O=c.Array.prototype.set?function(p,o,h){o.set(p,h)}:function(p,o,h){for(var r=0;r<p.length;++r)o[h+r]=p[r]};g.prototype.bytes=function(p){var o=p.length>>>0;if(!o)return this._push(x,1,0);if(c.isString(p)){var h=g.alloc(o=v.length(p));v.decode(p,h,0),p=h}return this.uint32(o)._push(O,o,p)},g.prototype.string=function(p){var o=u.length(p);return o?this.uint32(o)._push(u.write,o,p):this._push(x,1,0)},g.prototype.fork=function(){return this.states=new F(this),this.head=this.tail=new a(s,0,0),this.len=0,this},g.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(s,0,0),this.len=0),this},g.prototype.ldelim=function(){var p=this.head,o=this.tail,h=this.len;return this.reset().uint32(h),h&&(this.tail.next=p.next,this.tail=o,this.len+=h),this},g.prototype.finish=function(){for(var p=this.head.next,o=this.constructor.alloc(this.len),h=0;p;)p.fn(p.val,o,h),h+=p.len,p=p.next;return o},g._configure=function(m){w=m,g.create=I(),w._configure()}},90396:function(H,b,e){"use strict";H.exports=S;var c=e(16495);(S.prototype=Object.create(c.prototype)).constructor=S;var w=e(67032);function S(){c.call(this)}S._configure=function(){S.alloc=w._Buffer_allocUnsafe,S.writeBytesBuffer=w.Buffer&&w.Buffer.prototype instanceof Uint8Array&&w.Buffer.prototype.set.name==="set"?function(a,s,F){s.set(a,F)}:function(a,s,F){if(a.copy)a.copy(s,F,0,a.length);else for(var g=0;g<a.length;)s[F++]=a[g++]}},S.prototype.bytes=function(a){w.isString(a)&&(a=w._Buffer_from(a,"base64"));var s=a.length>>>0;return this.uint32(s),s&&this._push(S.writeBytesBuffer,s,a),this};function v(u,a,s){u.length<40?w.utf8.write(u,a,s):a.utf8Write?a.utf8Write(u,s):a.write(u,s)}S.prototype.string=function(a){var s=w.Buffer.byteLength(a);return this.uint32(s),s&&this._push(v,s,a),this},S._configure()},4151:function(H,b,e){"use strict";const c=e(84127),w=e(62927),S=e(55872).Buffer;H.exports=v;function v(u,a){return new c(function(s,F){const g=w(u,a),I=new XMLHttpRequest;I.open("GET",g,!0),a!=="prj"&&a!=="cpg"&&(I.responseType="arraybuffer"),I.addEventListener("load",function(){return I.status>399?a==="prj"||a==="cpg"?s(!1):F(new Error(I.status)):s(a!=="prj"&&a!=="cpg"?S.from(I.response):I.response)},!1),I.send()})}},61999:function(H,b,e){"use strict";const c=e(4151),w=e(62927),S=e(55872).Buffer;H.exports=async function(u,a){if(!e.g.fetch)return c(u,a);const s=w(u,a),F=a==="prj"||a==="cpg";try{const g=await fetch(s);if(g.status>399)throw new Error(g.statusText);if(F)return g.text();const I=await g.arrayBuffer();return S.from(I)}catch(g){if(F)return!1;throw g}}},62927:function(H,b,e){const c=e.g.URL;H.exports=(w,S)=>{if(!S)return w;const v=new c(w);return v.pathname=`${v.pathname}.${S}`,v.href}},55089:function(H,b,e){"use strict";let c=e(30339);c.default&&(c=c.default);const w=e(15850),S=e(61999),v=e(86673),u=e(9518),a=e(84127),s=e(60309),F=e(55872).Buffer,g=e.g.URL,I=new s({max:20});function x(m){if(!m)throw new Error("forgot to pass buffer");if(F.isBuffer(m))return m;if(m instanceof e.g.ArrayBuffer)return F.from(m);if(m.buffer instanceof e.g.ArrayBuffer)return m.BYTES_PER_ELEMENT===1?F.from(m):F.from(m.buffer)}function E(m,p){return typeof m=="string"&&I.has(m)?a.resolve(I.get(m)):E.getShapefile(m,p).then(function(o){return typeof m=="string"&&I.set(m,o),o})}E.combine=function(m){const p={};p.type="FeatureCollection",p.features=[];let o=0;const h=m[0].length;for(;o<h;)p.features.push({type:"Feature",geometry:m[0][o],properties:m[1][o]}),o++;return p},E.parseZip=async function(m,p){let o;m=x(m);const h=await w(m),r=[];p=p||[];for(o in h)o.indexOf("__MACOSX")===-1&&(o.slice(-3).toLowerCase()==="shp"?(r.push(o.slice(0,-4)),h[o.slice(0,-3)+o.slice(-3).toLowerCase()]=h[o]):o.slice(-3).toLowerCase()==="prj"?h[o.slice(0,-3)+o.slice(-3).toLowerCase()]=c(h[o]):o.slice(-4).toLowerCase()==="json"||p.indexOf(o.split(".").pop())>-1?r.push(o.slice(0,-3)+o.slice(-3).toLowerCase()):(o.slice(-3).toLowerCase()==="dbf"||o.slice(-3).toLowerCase()==="cpg")&&(h[o.slice(0,-3)+o.slice(-3).toLowerCase()]=h[o]));if(!r.length)throw new Error("no layers founds");const y=r.map(function(R){let D,B;const lt=R.lastIndexOf(".");return lt>-1&&R.slice(lt).indexOf("json")>-1?(D=JSON.parse(h[R]),D.fileName=R.slice(0,lt)):p.indexOf(R.slice(lt+1))>-1?(D=h[R],D.fileName=R):(h[R+".dbf"]&&(B=u(h[R+".dbf"],h[R+".cpg"])),D=E.combine([v(h[R+".shp"],h[R+".prj"]),B]),D.fileName=R),D});return y.length===1?y[0]:y};async function f(m,p){const o=await S(m);return E.parseZip(o,p)}const l=async m=>{const p=await a.all([S(m,"shp"),S(m,"prj")]);let o=!1;try{p[1]&&(o=c(p[1]))}catch{o=!1}return v(p[0],o)},d=async m=>{const[p,o]=await a.all([S(m,"dbf"),S(m,"cpg")]);return u(p,o)},O=(m,p)=>new g(m).pathname.slice(-4).toLowerCase()===p;E.getShapefile=async function(m,p){if(typeof m!="string")return E.parseZip(m);if(O(m,".zip"))return f(m,p);const o=await a.all([l(m),d(m)]);return E.combine(o)},E.parseShp=function(m,p){if(m=x(m),F.isBuffer(p)&&(p=p.toString()),typeof p=="string")try{p=c(p)}catch{p=!1}return v(m,p)},E.parseDbf=function(m,p){return m=x(m),u(m,p)},H.exports=E},86673:function(H){"use strict";function b(v){let u=0,a=1;const s=v.length;let F,g;for(;a<s;)F=g||v[0],g=v[a],u+=(g[0]-F[0])*(g[1]+F[1]),a++;return u>0}function e(v,u){return b(u)||!v.length?v.push([u]):v[v.length-1].push(u),v}S.prototype.parsePoint=function(v){return{type:"Point",coordinates:this.parseCoord(v,0)}},S.prototype.parseZPoint=function(v){const u=this.parsePoint(v);return u.coordinates.push(v.readDoubleLE(16)),u},S.prototype.parsePointArray=function(v,u,a){const s=[];let F=0;for(;F<a;)s.push(this.parseCoord(v,u)),u+=16,F++;return s},S.prototype.parseZPointArray=function(v,u,a,s){let F=0;for(;F<a;)s[F].push(v.readDoubleLE(u)),F++,u+=8;return s},S.prototype.parseArrayGroup=function(v,u,a,s,F){const g=[];let I=0,x,E=0,f;for(;I<s;)I++,a+=4,x=E,I===s?E=F:E=v.readInt32LE(a),f=E-x,f&&(g.push(this.parsePointArray(v,u,f)),u+=f<<4);return g},S.prototype.parseZArrayGroup=function(v,u,a,s){let F=0;for(;F<a;)s[F]=this.parseZPointArray(v,u,s[F].length,s[F]),u+=s[F].length<<3,F++;return s},S.prototype.parseMultiPoint=function(v){const u={},a=this.parseCoord(v,0),s=this.parseCoord(v,16);u.bbox=[a[0],a[1],s[0],s[1]];const F=v.readInt32LE(32,!0),g=36;return F===1?(u.type="Point",u.coordinates=this.parseCoord(v,g)):(u.type="MultiPoint",u.coordinates=this.parsePointArray(v,g,F)),u},S.prototype.parseZMultiPoint=function(v){const u=this.parseMultiPoint(v);let a;if(u.type==="Point")return u.coordinates.push(v.readDoubleLE(72)),u;a=u.coordinates.length;const s=52+(a<<4);return u.coordinates=this.parseZPointArray(v,s,a,u.coordinates),u},S.prototype.parsePolyline=function(v){const u={},a=this.parseCoord(v,0),s=this.parseCoord(v,16);u.bbox=[a[0],a[1],s[0],s[1]];const F=v.readInt32LE(32),g=v.readInt32LE(36);let I,x;return F===1?(u.type="LineString",I=44,u.coordinates=this.parsePointArray(v,I,g)):(u.type="MultiLineString",I=40+(F<<2),x=40,u.coordinates=this.parseArrayGroup(v,I,x,F,g)),u},S.prototype.parseZPolyline=function(v){const u=this.parsePolyline(v),a=u.coordinates.length;let s;return u.type==="LineString"?(s=60+(a<<4),u.coordinates=this.parseZPointArray(v,s,a,u.coordinates),u):(s=56+(u.coordinates.reduce(function(g,I){return g+I.length},0)<<4)+(a<<2),u.coordinates=this.parseZArrayGroup(v,s,a,u.coordinates),u)},S.prototype.polyFuncs=function(v){return v.type==="LineString"?(v.type="Polygon",v.coordinates=[v.coordinates],v):(v.coordinates=v.coordinates.reduce(e,[]),v.coordinates.length===1?(v.type="Polygon",v.coordinates=v.coordinates[0],v):(v.type="MultiPolygon",v))},S.prototype.parsePolygon=function(v){return this.polyFuncs(this.parsePolyline(v))},S.prototype.parseZPolygon=function(v){return this.polyFuncs(this.parseZPolyline(v))};const c={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function w(v){return v?function(u,a){return v.inverse([u.readDoubleLE(a),u.readDoubleLE(a+8)])}:function(u,a){return[u.readDoubleLE(a),u.readDoubleLE(a+8)]}}function S(v,u){if(!(this instanceof S))return new S(v,u);this.buffer=v,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(u),this.rows=this.getRows()}S.prototype.shpFuncs=function(v){let u=this.headers.shpCode;if(u>20&&(u-=20),!(u in c))throw new Error("I don't know that shp type");this.parseFunc=this[c[u]],this.parseCoord=w(v)},S.prototype.getShpCode=function(){return this.parseHeader().shpCode},S.prototype.parseHeader=function(){const v=this.buffer.slice(0,100);return{length:v.readInt32BE(24)<<1,version:v.readInt32LE(28),shpCode:v.readInt32LE(32),bbox:[v.readDoubleLE(36),v.readDoubleLE(44),v.readDoubleLE(52),v.readDoubleLE(52)]}},S.prototype.getRows=function(){let v=100;const u=this.buffer.byteLength,a=[];let s;for(;v<u&&(s=this.getRow(v),!!s);)v+=8,v+=s.len,s.type?a.push(this.parseFunc(s.data)):a.push(null);return a},S.prototype.getRow=function(v){const u=this.buffer.slice(v,v+12),a=u.readInt32BE(4)<<1,s=u.readInt32BE(0);return a===0?{id:s,len:a,type:0}:{id:s,len:a,data:this.buffer.slice(v+12,v+a+8),type:u.readInt32LE(8)}},H.exports=function(v,u){return new S(v,u).rows}},15850:function(H,b,e){"use strict";const c=e(29597);H.exports=async w=>{const S=new c;await S.loadAsync(w);const v=S.file(/.+/),u={};return await Promise.all(v.map(async a=>{let s;a.name.slice(-3).toLowerCase()==="shp"||a.name.slice(-3).toLowerCase()==="dbf"?s=await a.async("nodebuffer"):s=await a.async("text"),u[a.name]=s})),u}},77332:function(H,b,e){H.exports=e(34785)},34785:function(H,b,e){var c=e(49500);(function(w){"use strict";H.exports&&!w["encoding-indexes"]&&e(14653);function S(j,W,Z){return W<=j&&j<=Z}function v(j,W){return j.indexOf(W)!==-1}var u=Math.floor;function a(j){if(j===void 0)return{};if(j===Object(j))return j;throw TypeError("Could not convert argument to dictionary")}function s(j){for(var W=String(j),Z=W.length,z=0,X=[];z<Z;){var K=W.charCodeAt(z);if(K<55296||K>57343)X.push(K);else if(56320<=K&&K<=57343)X.push(65533);else if(55296<=K&&K<=56319)if(z===Z-1)X.push(65533);else{var vt=W.charCodeAt(z+1);if(56320<=vt&&vt<=57343){var ct=K&1023,Mt=vt&1023;X.push(65536+(ct<<10)+Mt),z+=1}else X.push(65533)}z+=1}return X}function F(j){for(var W="",Z=0;Z<j.length;++Z){var z=j[Z];z<=65535?W+=String.fromCharCode(z):(z-=65536,W+=String.fromCharCode((z>>10)+55296,(z&1023)+56320))}return W}function g(j){return 0<=j&&j<=127}var I=g,x=-1;function E(j){this.tokens=[].slice.call(j),this.tokens.reverse()}E.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():x},prepend:function(j){if(Array.isArray(j))for(var W=j;W.length;)this.tokens.push(W.pop());else this.tokens.push(j)},push:function(j){if(Array.isArray(j))for(var W=j;W.length;)this.tokens.unshift(W.shift());else this.tokens.unshift(j)}};var f=-1;function l(j,W){if(j)throw TypeError("Decoder error");return W||65533}function d(j){throw TypeError("The code point "+j+" could not be encoded.")}function O(){}O.prototype={handler:function(j,W){}};function m(){}m.prototype={handler:function(j,W){}};function p(j){return j=String(j).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(h,j)?h[j]:null}var o=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],h={};o.forEach(function(j){j.encodings.forEach(function(W){W.labels.forEach(function(Z){h[Z]=W})})});var r={},y={};function R(j,W){return W&&W[j]||null}function D(j,W){var Z=W.indexOf(j);return Z===-1?null:Z}function B(j){if(!("encoding-indexes"in w))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return w["encoding-indexes"][j]}function lt(j){if(j>39419&&j<189e3||j>1237575)return null;if(j===7457)return 59335;var W=0,Z=0,z=B("gb18030-ranges"),X;for(X=0;X<z.length;++X){var K=z[X];if(K[0]<=j)W=K[0],Z=K[1];else break}return Z+j-W}function st(j){if(j===59335)return 7457;var W=0,Z=0,z=B("gb18030-ranges"),X;for(X=0;X<z.length;++X){var K=z[X];if(K[1]<=j)W=K[1],Z=K[0];else break}return Z+j-W}function Y(j){yt=yt||B("jis0208").map(function(Z,z){return S(z,8272,8835)?null:Z});var W=yt;return W.indexOf(j)}var yt;function et(j){ut=ut||B("big5").map(function(Z,z){return z<(161-129)*157?null:Z});var W=ut;return j===9552||j===9566||j===9569||j===9578||j===21313||j===21317?W.lastIndexOf(j):D(j,W)}var ut,dt="utf-8";function it(j,W){if(!(this instanceof it))throw TypeError("Called as a function. Did you forget 'new'?");j=j!==void 0?String(j):dt,W=a(W),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var Z=p(j);if(Z===null||Z.name==="replacement")throw RangeError("Unknown encoding: "+j);if(!y[Z.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var z=this;return z._encoding=Z,W.fatal&&(z._error_mode="fatal"),W.ignoreBOM&&(z._ignoreBOM=!0),Object.defineProperty||(this.encoding=z._encoding.name.toLowerCase(),this.fatal=z._error_mode==="fatal",this.ignoreBOM=z._ignoreBOM),z}Object.defineProperty&&(Object.defineProperty(it.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(it.prototype,"fatal",{get:function(){return this._error_mode==="fatal"}}),Object.defineProperty(it.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),it.prototype.decode=function(W,Z){var z;typeof W=="object"&&W instanceof ArrayBuffer?z=new Uint8Array(W):typeof W=="object"&&"buffer"in W&&W.buffer instanceof ArrayBuffer?z=new Uint8Array(W.buffer,W.byteOffset,W.byteLength):z=new Uint8Array(0),Z=a(Z),this._do_not_flush||(this._decoder=y[this._encoding.name]({fatal:this._error_mode==="fatal"}),this._BOMseen=!1),this._do_not_flush=!!Z.stream;for(var X=new E(z),K=[],vt;;){var ct=X.read();if(ct===x||(vt=this._decoder.handler(X,ct),vt===f))break;vt!==null&&(Array.isArray(vt)?K.push.apply(K,vt):K.push(vt))}if(!this._do_not_flush){do{if(vt=this._decoder.handler(X,X.read()),vt===f)break;vt!==null&&(Array.isArray(vt)?K.push.apply(K,vt):K.push(vt))}while(!X.endOfStream());this._decoder=null}function Mt(J){return v(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)&&!this._ignoreBOM&&!this._BOMseen&&(J.length>0&&J[0]===65279?(this._BOMseen=!0,J.shift()):J.length>0&&(this._BOMseen=!0)),F(J)}return Mt.call(this,K)};function gt(j,W){if(!(this instanceof gt))throw TypeError("Called as a function. Did you forget 'new'?");W=a(W),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=W.fatal?"fatal":"replacement";var Z=this;if(W.NONSTANDARD_allowLegacyEncoding){j=j!==void 0?String(j):dt;var z=p(j);if(z===null||z.name==="replacement")throw RangeError("Unknown encoding: "+j);if(!r[z.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");Z._encoding=z}else Z._encoding=p("utf-8"),j!==void 0&&"console"in w&&c.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=Z._encoding.name.toLowerCase()),Z}Object.defineProperty&&Object.defineProperty(gt.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),gt.prototype.encode=function(W,Z){W=W===void 0?"":String(W),Z=a(Z),this._do_not_flush||(this._encoder=r[this._encoding.name]({fatal:this._fatal==="fatal"})),this._do_not_flush=!!Z.stream;for(var z=new E(s(W)),X=[],K;;){var vt=z.read();if(vt===x||(K=this._encoder.handler(z,vt),K===f))break;Array.isArray(K)?X.push.apply(X,K):X.push(K)}if(!this._do_not_flush){for(;K=this._encoder.handler(z,z.read()),K!==f;)Array.isArray(K)?X.push.apply(X,K):X.push(K);this._encoder=null}return new Uint8Array(X)};function Pt(j){var W=j.fatal,Z=0,z=0,X=0,K=128,vt=191;this.handler=function(ct,Mt){if(Mt===x&&X!==0)return X=0,l(W);if(Mt===x)return f;if(X===0){if(S(Mt,0,127))return Mt;if(S(Mt,194,223))X=1,Z=Mt&31;else if(S(Mt,224,239))Mt===224&&(K=160),Mt===237&&(vt=159),X=2,Z=Mt&15;else if(S(Mt,240,244))Mt===240&&(K=144),Mt===244&&(vt=143),X=3,Z=Mt&7;else return l(W);return null}if(!S(Mt,K,vt))return Z=X=z=0,K=128,vt=191,ct.prepend(Mt),l(W);if(K=128,vt=191,Z=Z<<6|Mt&63,z+=1,z!==X)return null;var J=Z;return Z=X=z=0,J}}function ft(j){var W=j.fatal;this.handler=function(Z,z){if(z===x)return f;if(I(z))return z;var X,K;S(z,128,2047)?(X=1,K=192):S(z,2048,65535)?(X=2,K=224):S(z,65536,1114111)&&(X=3,K=240);for(var vt=[(z>>6*X)+K];X>0;){var ct=z>>6*(X-1);vt.push(128|ct&63),X-=1}return vt}}r["UTF-8"]=function(j){return new ft(j)},y["UTF-8"]=function(j){return new Pt(j)};function St(j,W){var Z=W.fatal;this.handler=function(z,X){if(X===x)return f;if(g(X))return X;var K=j[X-128];return K===null?l(Z):K}}function At(j,W){var Z=W.fatal;this.handler=function(z,X){if(X===x)return f;if(I(X))return X;var K=D(X,j);return K===null&&d(X),K+128}}(function(){"encoding-indexes"in w&&o.forEach(function(j){j.heading==="Legacy single-byte encodings"&&j.encodings.forEach(function(W){var Z=W.name,z=B(Z.toLowerCase());y[Z]=function(X){return new St(z,X)},r[Z]=function(X){return new At(z,X)}})})})(),y.GBK=function(j){return new It(j)},r.GBK=function(j){return new wt(j,!0)};function It(j){var W=j.fatal,Z=0,z=0,X=0;this.handler=function(K,vt){if(vt===x&&Z===0&&z===0&&X===0)return f;vt===x&&(Z!==0||z!==0||X!==0)&&(Z=0,z=0,X=0,l(W));var ct;if(X!==0){ct=null,S(vt,48,57)&&(ct=lt((((Z-129)*10+z-48)*126+X-129)*10+vt-48));var Mt=[z,X,vt];return Z=0,z=0,X=0,ct===null?(K.prepend(Mt),l(W)):ct}if(z!==0)return S(vt,129,254)?(X=vt,null):(K.prepend([z,vt]),Z=0,z=0,l(W));if(Z!==0){if(S(vt,48,57))return z=vt,null;var J=Z,Tt=null;Z=0;var jt=vt<127?64:65;return(S(vt,64,126)||S(vt,128,254))&&(Tt=(J-129)*190+(vt-jt)),ct=Tt===null?null:R(Tt,B("gb18030")),ct===null&&g(vt)&&K.prepend(vt),ct===null?l(W):ct}return g(vt)?vt:vt===128?8364:S(vt,129,254)?(Z=vt,null):l(W)}}function wt(j,W){var Z=j.fatal;this.handler=function(z,X){if(X===x)return f;if(I(X))return X;if(X===58853)return d(X);if(W&&X===8364)return 128;var K=D(X,B("gb18030"));if(K!==null){var vt=u(K/190)+129,ct=K%190,Mt=ct<63?64:65;return[vt,ct+Mt]}if(W)return d(X);K=st(X);var J=u(K/10/126/10);K=K-J*10*126*10;var Tt=u(K/10/126);K=K-Tt*10*126;var jt=u(K/10),zt=K-jt*10;return[J+129,Tt+48,jt+129,zt+48]}}r.gb18030=function(j){return new wt(j)},y.gb18030=function(j){return new It(j)};function _(j){var W=j.fatal,Z=0;this.handler=function(z,X){if(X===x&&Z!==0)return Z=0,l(W);if(X===x&&Z===0)return f;if(Z!==0){var K=Z,vt=null;Z=0;var ct=X<127?64:98;switch((S(X,64,126)||S(X,161,254))&&(vt=(K-129)*157+(X-ct)),vt){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var Mt=vt===null?null:R(vt,B("big5"));return Mt===null&&g(X)&&z.prepend(X),Mt===null?l(W):Mt}return g(X)?X:S(X,129,254)?(Z=X,null):l(W)}}function rt(j){var W=j.fatal;this.handler=function(Z,z){if(z===x)return f;if(I(z))return z;var X=et(z);if(X===null)return d(z);var K=u(X/157)+129;if(K<161)return d(z);var vt=X%157,ct=vt<63?64:98;return[K,vt+ct]}}r.Big5=function(j){return new rt(j)},y.Big5=function(j){return new _(j)};function Q(j){var W=j.fatal,Z=!1,z=0;this.handler=function(X,K){if(K===x&&z!==0)return z=0,l(W);if(K===x&&z===0)return f;if(z===142&&S(K,161,223))return z=0,65377-161+K;if(z===143&&S(K,161,254))return Z=!0,z=K,null;if(z!==0){var vt=z;z=0;var ct=null;return S(vt,161,254)&&S(K,161,254)&&(ct=R((vt-161)*94+(K-161),B(Z?"jis0212":"jis0208"))),Z=!1,S(K,161,254)||X.prepend(K),ct===null?l(W):ct}return g(K)?K:K===142||K===143||S(K,161,254)?(z=K,null):l(W)}}function tt(j){var W=j.fatal;this.handler=function(Z,z){if(z===x)return f;if(I(z))return z;if(z===165)return 92;if(z===8254)return 126;if(S(z,65377,65439))return[142,z-65377+161];z===8722&&(z=65293);var X=D(z,B("jis0208"));if(X===null)return d(z);var K=u(X/94)+161,vt=X%94+161;return[K,vt]}}r["EUC-JP"]=function(j){return new tt(j)},y["EUC-JP"]=function(j){return new Q(j)};function xt(j){var W=j.fatal,Z={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},z=Z.ASCII,X=Z.ASCII,K=0,vt=!1;this.handler=function(ct,Mt){switch(z){default:case Z.ASCII:return Mt===27?(z=Z.EscapeStart,null):S(Mt,0,127)&&Mt!==14&&Mt!==15&&Mt!==27?(vt=!1,Mt):Mt===x?f:(vt=!1,l(W));case Z.Roman:return Mt===27?(z=Z.EscapeStart,null):Mt===92?(vt=!1,165):Mt===126?(vt=!1,8254):S(Mt,0,127)&&Mt!==14&&Mt!==15&&Mt!==27&&Mt!==92&&Mt!==126?(vt=!1,Mt):Mt===x?f:(vt=!1,l(W));case Z.Katakana:return Mt===27?(z=Z.EscapeStart,null):S(Mt,33,95)?(vt=!1,65377-33+Mt):Mt===x?f:(vt=!1,l(W));case Z.LeadByte:return Mt===27?(z=Z.EscapeStart,null):S(Mt,33,126)?(vt=!1,K=Mt,z=Z.TrailByte,null):Mt===x?f:(vt=!1,l(W));case Z.TrailByte:if(Mt===27)return z=Z.EscapeStart,l(W);if(S(Mt,33,126)){z=Z.LeadByte;var J=(K-33)*94+Mt-33,Tt=R(J,B("jis0208"));return Tt===null?l(W):Tt}return Mt===x?(z=Z.LeadByte,ct.prepend(Mt),l(W)):(z=Z.LeadByte,l(W));case Z.EscapeStart:return Mt===36||Mt===40?(K=Mt,z=Z.Escape,null):(ct.prepend(Mt),vt=!1,z=X,l(W));case Z.Escape:var jt=K;K=0;var zt=null;if(jt===40&&Mt===66&&(zt=Z.ASCII),jt===40&&Mt===74&&(zt=Z.Roman),jt===40&&Mt===73&&(zt=Z.Katakana),jt===36&&(Mt===64||Mt===66)&&(zt=Z.LeadByte),zt!==null){z=z=zt;var $t=vt;return vt=!0,$t?l(W):null}return ct.prepend([jt,Mt]),vt=!1,z=X,l(W)}}}function ot(j){var W=j.fatal,Z={ASCII:0,Roman:1,jis0208:2},z=Z.ASCII;this.handler=function(X,K){if(K===x&&z!==Z.ASCII)return X.prepend(K),z=Z.ASCII,[27,40,66];if(K===x&&z===Z.ASCII)return f;if((z===Z.ASCII||z===Z.Roman)&&(K===14||K===15||K===27))return d(65533);if(z===Z.ASCII&&I(K))return K;if(z===Z.Roman&&(I(K)&&K!==92&&K!==126||K==165||K==8254)){if(I(K))return K;if(K===165)return 92;if(K===8254)return 126}if(I(K)&&z!==Z.ASCII)return X.prepend(K),z=Z.ASCII,[27,40,66];if((K===165||K===8254)&&z!==Z.Roman)return X.prepend(K),z=Z.Roman,[27,40,74];K===8722&&(K=65293);var vt=D(K,B("jis0208"));if(vt===null)return d(K);if(z!==Z.jis0208)return X.prepend(K),z=Z.jis0208,[27,36,66];var ct=u(vt/94)+33,Mt=vt%94+33;return[ct,Mt]}}r["ISO-2022-JP"]=function(j){return new ot(j)},y["ISO-2022-JP"]=function(j){return new xt(j)};function nt(j){var W=j.fatal,Z=0;this.handler=function(z,X){if(X===x&&Z!==0)return Z=0,l(W);if(X===x&&Z===0)return f;if(Z!==0){var K=Z,vt=null;Z=0;var ct=X<127?64:65,Mt=K<160?129:193;if((S(X,64,126)||S(X,128,252))&&(vt=(K-Mt)*188+X-ct),S(vt,8836,10715))return 57344-8836+vt;var J=vt===null?null:R(vt,B("jis0208"));return J===null&&g(X)&&z.prepend(X),J===null?l(W):J}return g(X)||X===128?X:S(X,161,223)?65377-161+X:S(X,129,159)||S(X,224,252)?(Z=X,null):l(W)}}function V(j){var W=j.fatal;this.handler=function(Z,z){if(z===x)return f;if(I(z)||z===128)return z;if(z===165)return 92;if(z===8254)return 126;if(S(z,65377,65439))return z-65377+161;z===8722&&(z=65293);var X=Y(z);if(X===null)return d(z);var K=u(X/188),vt=K<31?129:193,ct=X%188,Mt=ct<63?64:65;return[K+vt,ct+Mt]}}r.Shift_JIS=function(j){return new V(j)},y.Shift_JIS=function(j){return new nt(j)};function G(j){var W=j.fatal,Z=0;this.handler=function(z,X){if(X===x&&Z!==0)return Z=0,l(W);if(X===x&&Z===0)return f;if(Z!==0){var K=Z,vt=null;Z=0,S(X,65,254)&&(vt=(K-129)*190+(X-65));var ct=vt===null?null:R(vt,B("euc-kr"));return vt===null&&g(X)&&z.prepend(X),ct===null?l(W):ct}return g(X)?X:S(X,129,254)?(Z=X,null):l(W)}}function T(j){var W=j.fatal;this.handler=function(Z,z){if(z===x)return f;if(I(z))return z;var X=D(z,B("euc-kr"));if(X===null)return d(z);var K=u(X/190)+129,vt=X%190+65;return[K,vt]}}r["EUC-KR"]=function(j){return new T(j)},y["EUC-KR"]=function(j){return new G(j)};function N(j,W){var Z=j>>8,z=j&255;return W?[Z,z]:[z,Z]}function k(j,W){var Z=W.fatal,z=null,X=null;this.handler=function(K,vt){if(vt===x&&(z!==null||X!==null))return l(Z);if(vt===x&&z===null&&X===null)return f;if(z===null)return z=vt,null;var ct;if(j?ct=(z<<8)+vt:ct=(vt<<8)+z,z=null,X!==null){var Mt=X;return X=null,S(ct,56320,57343)?65536+(Mt-55296)*1024+(ct-56320):(K.prepend(N(ct,j)),l(Z))}return S(ct,55296,56319)?(X=ct,null):S(ct,56320,57343)?l(Z):ct}}function $(j,W){var Z=W.fatal;this.handler=function(z,X){if(X===x)return f;if(S(X,0,65535))return N(X,j);var K=N((X-65536>>10)+55296,j),vt=N((X-65536&1023)+56320,j);return K.concat(vt)}}r["UTF-16BE"]=function(j){return new $(!0,j)},y["UTF-16BE"]=function(j){return new k(!0,j)},r["UTF-16LE"]=function(j){return new $(!1,j)},y["UTF-16LE"]=function(j){return new k(!1,j)};function ht(j){var W=j.fatal;this.handler=function(Z,z){return z===x?f:g(z)?z:63360+z-128}}function q(j){var W=j.fatal;this.handler=function(Z,z){return z===x?f:I(z)?z:S(z,63360,63487)?z-63360+128:d(z)}}r["x-user-defined"]=function(j){return new q(j)},y["x-user-defined"]=function(j){return new ht(j)},w.TextEncoder||(w.TextEncoder=gt),w.TextDecoder||(w.TextDecoder=it),H.exports&&(H.exports={TextEncoder:w.TextEncoder,TextDecoder:w.TextDecoder,EncodingIndexes:w["encoding-indexes"]})})(this||{})},13890:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(26541)),S=c(e(28866)),v=c(e(38006)),u=c(e(42579)),a=c(e(22777)),s=c(e(42762)),F=c(e(63379)),g=function(){function x(E){(0,a.default)(this,x),this.interactions=[],this.map=E,this.currentInteraction={}}return(0,s.default)(x,[{key:"openInteraction",value:function(f,l,d){var O,m=this;this.currentInteraction=void 0;var p=(0,w.default)(O=this.interactions).call(O,function(o){return(0,u.default)(this,m),o.name===f}.bind(this));return p<0&&this.addInteraction(l),this.interactions.forEach(function(o){(0,u.default)(this,m),o.name===f?this.currentInteraction=o:o.setActive(![])}.bind(this)),this.currentInteraction&&!this.currentInteraction.active&&(d?this.currentInteraction.setActive(!![],d):this.currentInteraction.setActive(!![],l),(0,F.default)((0,S.default)(this).getViewport()).on("pointerdown",this.mapMouseEvent.bind(this))),this.currentInteraction}},{key:"closeInteraction",value:function(){var f=this;this.currentInteraction=void 0,this.interactions.forEach(function(l){(0,u.default)(this,f),l.setActive(![])}.bind(this))}},{key:"addInteraction",value:function(f){this.interactions.push(f)}},{key:"mapMouseEvent",value:function(f){var l=f.button;l===2&&this.currentInteraction.setActive(![])}},{key:"getInteractionByName",value:function(f){for(var l=0,d=this.interactions.length;l<d;l++)if(this.interactions[l].name===f)return this.interactions[l]}}],[{key:"getInstance",value:function(f){!x.instanceMap&&(x.instanceMap=new v.default);var l=f.mapid;if(!x.instanceMap.get(l)){var d=new x(f);x.instanceMap.set(l,d)}return x.instanceMap.get(l)}}]),x}(),I=g;b.default=I},91968:function(H,b,e){"use strict";var c=e(49500),w=e(52909),S=e(20314),v=e(26352),u=e(40639),a=e(43586),s=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var F=s(e(28866)),g=s(e(78756)),I=s(e(85208)),x=s(e(35700)),E=s(e(96802)),f=s(e(42579)),l=s(e(22777)),d=s(e(42762)),O=e(72233),m=e(83062),p=e(74183),o=e(97054),h=e(67040),r=s(e(60031)),y=s(e(33964)),R=s(e(63206)),D=s(e(83266)),B=s(e(66016)),lt=e(96529),st=e(30149),Y=e(21401),yt=s(e(26988)),et=e(92086),ut=s(e(91488)),dt=e(81534),it=e(42584),gt=e(42422),Pt=s(e(17655)),ft=s(e(35569)),St=s(e(15126)),At=s(e(24758)),It=s(e(77597)),wt=s(e(95459)),_=e(97149),rt=s(e(53071)),Q=s(e(42553)),tt=s(e(73925)),xt=s(e(20736)),ot=s(e(23032)),nt=s(e(93235)),V=e(72233),G=s(e(67625)),T=s(e(19112)),N=s(e(49917)),k=s(e(39600)),$=s(e(18094)),ht=s(e(83841)),q=s(e(78221)),j=s(e(97152)),W=s(e(88095));function Z(ct,Mt){var J=typeof u<"u"&&a(ct)||ct["@@iterator"];if(!J){if(Array.isArray(ct)||(J=z(ct))||Mt&&ct&&typeof ct.length=="number"){J&&(ct=J);var Tt=0,jt=function(){};return{s:jt,n:function(){return Tt>=ct.length?{done:!![]}:{done:![],value:ct[Tt++]}},e:function(te){throw te},f:jt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zt=!![],$t=![],Jt;return{s:function(){J=J.call(ct)},n:function(){var te=J.next();return zt=te.done,te},e:function(te){$t=!![],Jt=te},f:function(){try{!zt&&J.return!=null&&J.return()}finally{if($t)throw Jt}}}}function z(ct,Mt){var J;if(ct){if(typeof ct=="string")return X(ct,Mt);var Tt=S(J=Object.prototype.toString.call(ct)).call(J,8,-1);if(Tt==="Object"&&ct.constructor&&(Tt=ct.constructor.name),Tt==="Map"||Tt==="Set")return v(ct);if(Tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Tt))return X(ct,Mt)}}function X(ct,Mt){(Mt==null||Mt>ct.length)&&(Mt=ct.length);for(var J=0,Tt=new Array(Mt);J<Mt;J++)Tt[J]=ct[J];return Tt}var K=function(){function ct(Mt){(0,l.default)(this,ct),this.map=Mt}return(0,d.default)(ct,[{key:"generate",value:function(J,Tt){var jt,zt=this;return J.type==="tiled"?new j.default(J,Tt):J.type==="geoserver-vectorTiled"?new wt.default((0,F.default)(this),J,Tt):J.type==="geoway_tile"?new W.default((0,F.default)(this),J,Tt):J.type==="tms"?this.createGeoServerTMSLayer(J,Tt):J.type==="wms"?new St.default(J,Tt):J.type==="geoserver-wms"?new St.default(J,Tt):J.type==="tdt"?this.createTDTLayer(J,Tt):J.type==="ckytdt"?new rt.default().generate(J):J.type==="tdt-sd"?new T.default(J,Tt):J.type==="dynamic"?new ft.default(J,Tt):J.type==="feature"?new nt.default((0,F.default)(this),J,Tt):J.type==="feature-zj"?new At.default((0,F.default)(this)).generate(J,Tt):J.type==="geoserver-wfs"?new G.default((0,F.default)(this),J,Tt):J.type==="geoserver-wmts"?new It.default((0,F.default)(this),J,Tt):J.type==="wmts"||J.type==="arcgis-wmts"?this.createArcGISWMTSLayer(J,Tt):J.type==="vectorTiled"?new ot.default((0,F.default)(this),J,Tt):J.type==="feature-pbf"?new xt.default((0,F.default)(this),J,Tt):J.type==="arcgis-wfs"||J.type==="wfs"?this.createArcGISWFSLayer(J,Tt):J.type==="gaode"?new $.default((0,F.default)(this),J):J.type==="baidu"?new ht.default((0,F.default)(this),J):J.type==="baidu_vector"?this.createBaiDuVectorLayer(J):J.type==="baidu_image"?this.createBaiDuImageLayer(J):J.type==="baidu_road"?this.createBaiDuRoadLayer(J):J.type==="offline"?new Q.default(J):((jt=J.type)===null||jt===void 0?void 0:jt.toLowerCase())==="geojson"?new k.default((0,F.default)(this),J,Tt):J.type==="arcgis-wmts-gd"?new tt.default(J,Tt):J.type==="xyz"?new m.Tile({id:J.id,info:J,layerTag:J.layerTag,opacity:J.opacity,zIndex:J.mapIndex,isFit:typeof J.isFit=="boolean"?J.isFit:![],source:new p.XYZ({zDirection:J.zDirection,crossOrigin:"anonymous",url:J.url})}):new g.default(function($t,Jt){(0,f.default)(this,zt),Jt(new Error('\u56FE\u5C42"'+J.label+'"\u52A0\u8F7D\u5931\u8D25,\u6CA1\u6709\u5339\u914D\u7684\u7C7B\u578B!'))}.bind(this))}},{key:"createGeoServerTMSLayer",value:function(J,Tt){var jt=(0,h.appendPath)(J.url,Tt.extUrl);J.authkey&&(jt=(0,h.addParamToUrl)(jt,"authkey",J.authkey));var zt=new m.Tile({id:J.id,info:J,layerTag:J.layerTag,opacity:J.opacity,zIndex:J.mapIndex,initExtent:Tt.initExtent,minResolution:J.minResolution,maxResolution:J.maxResolution?J.maxResolution:Tt.resolutions[0]*2,isFit:typeof J.isFit=="boolean"?J.isFit:![],source:new p.XYZ({crossOrigin:"anonymous",declutter:!![],url:jt})});return zt}},{key:"createGeoServerVectorTileLayer",value:function(J,Tt){this.idProp=J.idProp,(0,dt.registerProj)(Tt.projCode);var jt=J.url+Tt.extUrl;J.authkey&&(jt=(0,h.addParamToUrl)(jt,"authkey",J.authkey));var zt=new y.default({id:J.id,info:J,layerTag:J.layerTag,opacity:J.opacity,zIndex:J.mapIndex,initExtent:Tt.initExtent,minResolution:J.minResolution,maxResolution:J.maxResolution?J.maxResolution:Tt.resolutions[0]*2,isFit:typeof J.isFit=="boolean"?J.isFit:![],declutter:!![],source:new R.default({projection:Tt.projCode,crossOrigin:"anonymous",format:new yt.default,tileGrid:new D.default({extent:Tt.extent,origin:Tt.origin,resolutions:Tt.resolutions,tileSize:Tt.tileSize}),url:jt})});return zt}},{key:"createTDTLayer",value:function(J,Tt){var jt=this,zt=(0,_.replaceWktProj)(Tt.CapabilitiesXml),$t=[],Jt=new r.default,Wt=Jt.read(zt),te=Wt.Contents.Layer,oe=w(gt)(te,function(Bt){return J.visibleLayers&&J.visibleLayers.length>0&&Bt.Identifier===J.visibleLayers[0]?J.visibleLayers[0]:J.name});$t=oe.WGS84BoundingBox;var ve=oe.Identifier,Qt=Wt.Contents.TileMatrixSet[0].SupportedCRS.replace("urn:ogc:def:crs:","").replace("::",":");(0,dt.registerProj)(Qt);var Dt;try{Dt=(0,o.optionsFromCapabilities)(Wt,{layer:ve,matrixSet:J.matrixSet,requestEncoding:"KVP"})}catch{try{var le=Wt.Contents.TileMatrixSet[0].Identifier;Dt=(0,o.optionsFromCapabilities)(Wt,{layer:ve,matrixSet:le,requestEncoding:"KVP"})}catch(Ft){throw c.error("\u56FE\u5C42"+J.label+"\u5207\u7247\u65B9\u6848\u6709\u8BEF:"+Ft),new Error("\u56FE\u5C42"+J.label+"\u5207\u7247\u65B9\u6848\u6709\u8BEF")}}Dt.crossOrigin="anonymous",Dt.wrapX=!![];for(var Me=0;Me<Dt.tileGrid.origins_.length;Me++)Dt.tileGrid.origins_[Me].reverse();if(Dt.urls[0]=J.url,J.isUseTdt){for(var Xt=[],Se=[],re=18,Vt=0;Vt<=re;++Vt)Xt[Vt]=(0,et.getWidth)([-180,-90,180,90])/256/Math.pow(2,Vt),Se[Vt]=Vt,Dt.tileGrid.origins_[Vt]=[-180,90],Dt.tileGrid.tileSizes_[Vt]=[256,256];Dt.tileGrid.extent_=$t,Dt.tileGrid.resolutions_=Xt,Dt.tileGrid.matrixIds_=Se,Dt.tileGrid.fullTileRanges_=[],Dt.tileGrid.maxZoom=re}else if(J.url.indexOf("?tk=")>-1){var ie=Math.floor(Math.random()*4);J.url=J.url.replace(/t[0-9]./,"t"+ie+".");for(var fe=[],qt=[],ue=18,ge=0;ge<=ue;++ge)fe[ge]=(0,et.getWidth)($t)/Dt.tileGrid.tileSizes_[0]/Math.pow(2,ge),qt[ge]=ge,Dt.tileGrid.origins_[ge]=Dt.tileGrid.origins_[0],Dt.tileGrid.tileSizes_[ge]=Dt.tileGrid.tileSizes_[0];Dt.tileGrid.extent_=$t,Dt.tileGrid.resolutions_=fe,Dt.tileGrid.matrixIds_=qt,Dt.tileGrid.maxZoom=ue,Dt.urls[0]=J.url}else{var er=(0,_.getTdtTileGride)(Dt.projection.code_);Dt.tileGrid=er}J.authkey&&(Dt.urls[0]=(0,h.addParamToUrl)(Dt.urls[0],"authkey",J.authkey));var be=J.mapIndex?J.mapIndex:-1;if(be<0&&(be=J.zIndex?J.zIndex:-1),J.resolutions){var Ee=(0,I.default)(J.resolutions);if(Ee&&Ee.length>0){for(var Ce=Ee[0],Ke=Number(Ce),ze=J.resolutions[Ce]*Math.pow(2,Ke),Re=[],Ge=[],Ie=1;Ie<19;++Ie)Re[Ie]=ze/Math.pow(2,Ie),Ge[Ie]=Ie;Dt.tileGrid.resolutions_=Re,Dt.tileGrid.matrixIds_=Ge}}J.isOverLimt&&(Dt.tileGrid.fullTileRanges_=[]);var Ue=new N.default;(J.theme==="dark"||J.theme==="blue")&&(Dt.tileLoadFunction=function(Bt,Ft){var Gt=this;(0,f.default)(this,jt);var Ut=N.default[J.theme],Nt=new Image;Nt.crossOrigin="anonymous",Nt.src=Ft,Nt.width=256,Nt.height=256,Nt.onload=function(){(0,f.default)(this,Gt);var ye=Ue.filterImage(Ut,Nt);Bt.setImage(ye)}.bind(this)}.bind(this));var Pe=new m.Tile({id:J.id,info:J,layerTag:J.layerTag,opacity:1,initExtent:Tt.initExtent,minResolution:J.minResolution,maxResolution:J.maxResolution,isFit:typeof J.isFit=="boolean"?J.isFit:![],source:new p.WMTS(Dt)});return be>-1&&Pe.setZIndex(be),Pe}},{key:"createArcGISWMTSLayer",value:function(J,Tt){var jt=new r.default,zt=jt.read(Tt.CapabilitiesXml),$t=zt.Contents.TileMatrixSet[0],Jt=$t.SupportedCRS.replace("urn:ogc:def:crs:","").replace("::",":");(0,dt.registerProj)(Jt);var Wt=Tt.WMTSSourceOptions,te=(0,O.get)(Wt.projection.code_),oe=[];try{var ve=zt.Contents.Layer,Qt=w(gt)(ve,function(Xt){return J.visibleLayers&&J.visibleLayers.length>0&&Xt.Identifier===J.visibleLayers[0]?J.visibleLayers[0]:J.name});oe=(0,V.transformExtent)(Qt.WGS84BoundingBox,"EPSG:4326",Wt.projection.code_)}catch{oe=Wt.tileGrid.extent_}var Dt=Wt.tileGrid.origins_[0];J.origin?Dt=J.origin:Dt[0]===90&&Dt[1]===-180&&(Dt=[Dt[1],Dt[0]]);var le=new p.WMTS({urls:Wt.urls,requestEncoding:Wt.requestEncoding,layer:Wt.layer,tileLoadFunction:function(Se,re){var Vt=(0,h.getUrlParams)(J.url);if(Vt?.length>0){var ie=Z(Vt),fe;try{for(ie.s();!(fe=ie.n()).done;){var qt=fe.value;re=(0,h.addParamToUrl)(re,qt.name,qt.value)}}catch(ge){ie.e(ge)}finally{ie.f()}}var ue=re.indexOf("jsp?");ue!==-1&&re.indexOf("token")===-1&&re.indexOf("tk")===-1?Se.getImage().src=re.replace("&","?"):Se.getImage().src=re},matrixSet:Wt.matrixSet,format:Wt.format,projection:te,tileGrid:new B.default({origin:Dt,resolutions:J.resolutions?J.resolutions:Wt.tileGrid.resolutions_,matrixIds:J.matrixIds?J.matrixIds:Wt.tileGrid.matrixIds_,extent:oe}),style:Wt.style,wrapX:!![]}),Me=new m.Tile({id:J.id,info:J,layerTag:J.layerTag,opacity:J.opacity,zIndex:J.mapIndex,source:le,isFit:typeof J.isFit=="boolean"?J.isFit:![],initExtent:(0,V.transformExtent)(oe,te,"EPSG:4326")});return Me.projection=Jt,Me}},{key:"createArcGISWFSLayer",value:function(J,Tt){var jt=this,zt=new m.Vector({id:J.id,info:J,layerTag:J.layerTag,opacity:J.opacity,zIndex:J.mapIndex,initExtent:Tt.initExtent,minResolution:J.minResolution,maxResolution:J.maxResolution,isFit:typeof J.isFit=="boolean"?J.isFit:![],source:new p.Vector({format:new ut.default,url:function(Jt){return(0,f.default)(this,jt),J.url+"?service=WFS&version=1.1.0&request=GetFeature&typename="+J.visibleLayers+"&outputFormat=gml3&srsname="+(0,F.default)(this).getView().getProjection().getCode()+"&bbox="+Jt.join(",")}.bind(this),strategy:it.bbox})});return this.styleManager=new q.default((0,F.default)(this)),this.styleManager.bindLayer(zt),zt}},{key:"createBaiDuLayer",value:function(){for(var J=[],Tt=18,jt=0;jt<=Tt+1;jt++)J[jt]=Math.pow(2,Tt-jt);var zt=new D.default({origin:[0,0],resolutions:J}),$t=new Pt.default({tileGrid:zt,tileUrlFunction:function(te){var oe=te[0],ve=te[1],Qt=te[2];return ve<0&&(ve="M"+-ve),Qt<0&&(Qt="M"+-Qt),"http://online"+Number(Math.random()*10)+".map.bdimg.com/onlinelabel/?qt=tile&x="+ve+"&y="+Qt+"&z="+oe+"&styles=pl&udt=20170620&scaler=1&p=1"}}),Jt=new m.Tile({source:$t});return Jt}},{key:"scientificNotationToString",value:function(J){var Tt=String(J),jt=/e/.test(Tt);if(!jt)return J;var zt=!![];/e-/.test(Tt)&&(zt=![]);var $t=Number(Tt.match(/\d+$/)[0]),Jt=Tt.match(/^[\d.]+/)[0].replace(/\./,"");return zt?(0,x.default)(Jt).call(Jt,$t+1,0):(0,E.default)(Jt).call(Jt,$t+Jt.length,0).replace(/^0/,"0.")}},{key:"createBaiDuVectorLayer",value:function(){var J=(0,lt.BaiduVector)({});return J}},{key:"createBaiDuImageLayer",value:function(){var J=(0,st.BaiduImage)({});return J}},{key:"createBaiDuRoadLayer",value:function(){var J=(0,Y.BaiduRoad)({});return J}}]),ct}(),vt=K;b.default=vt},1865:function(H,b,e){"use strict";var c=e(49500),w=e(65557),S=e(20314),v=e(26352),u=e(40639),a=e(43586),s=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=b.LayerManagerEvent=void 0;var F=s(e(38006)),g=s(e(78756)),I=s(e(70515)),x=s(e(69033)),E=s(e(28866)),f=s(e(22466)),l=s(e(82793)),d=s(e(42579)),O=s(e(42762)),m=s(e(22777)),p=s(e(30044)),o=s(e(99085)),h=s(e(34009)),r=e(83062),y=s(e(33964)),R=s(e(91968)),D=e(72233),B=s(e(27482)),lt=s(e(7165)),st=s(e(12207)),Y=e(92086),yt=e(32002),et=e(59269),ut=e(1117),dt=e(83062),it=s(e(18187)),gt=s(e(73081));function Pt(tt,xt){var ot=typeof u<"u"&&a(tt)||tt["@@iterator"];if(!ot){if(Array.isArray(tt)||(ot=ft(tt))||xt&&tt&&typeof tt.length=="number"){ot&&(tt=ot);var nt=0,V=function(){};return{s:V,n:function(){return nt>=tt.length?{done:!![]}:{done:![],value:tt[nt++]}},e:function($){throw $},f:V}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var G=!![],T=![],N;return{s:function(){ot=ot.call(tt)},n:function(){var $=ot.next();return G=$.done,$},e:function($){T=!![],N=$},f:function(){try{!G&&ot.return!=null&&ot.return()}finally{if(T)throw N}}}}function ft(tt,xt){var ot;if(tt){if(typeof tt=="string")return St(tt,xt);var nt=S(ot=Object.prototype.toString.call(tt)).call(ot,8,-1);if(nt==="Object"&&tt.constructor&&(nt=tt.constructor.name),nt==="Map"||nt==="Set")return v(tt);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return St(tt,xt)}}function St(tt,xt){(xt==null||xt>tt.length)&&(xt=tt.length);for(var ot=0,nt=new Array(xt);ot<xt;ot++)nt[ot]=tt[ot];return nt}function At(tt){var xt=It();return function(){var nt=(0,h.default)(tt),V;if(xt){var G=(0,h.default)(this).constructor;V=w(nt,arguments,G)}else V=nt.apply(this,arguments);return(0,o.default)(this,V)}}function It(){if(typeof Reflect>"u"||!w)return![];if(w.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(w(Boolean,[],function(){})),!![]}catch{return![]}}var wt={BEFOREADDLAYER:"beforeAddLayer",AFTERADDLAYER:"afterAddLayer",BEFOREREMOVELAYER:"beforeRemoveLayer",AFTERREMOVELAYER:"afterRemoveLayer",ADDLAYERERROR:"addLayerError"},_=function(tt){(0,p.default)(ot,tt);var xt=At(ot);function ot(nt,V,G){var T;return(0,m.default)(this,ot),T=xt.call(this,nt),T.layer=V,T.payload=G,T}return(0,O.default)(ot)}(st.default);b.LayerManagerEvent=_;var rt=function(tt){(0,p.default)(ot,tt);var xt=At(ot);function ot(nt){var V;return(0,m.default)(this,ot),V=xt.call(this),V.map=nt,V.checkedLayers=[],V.isAutoTop=![],V.tocData=[],V.checkedLayers=[],V.dataMap=new F.default,V.promiseMap=new F.default,V.editLayer=void 0,V.layerContexts=[],V.layerGenerater=new R.default(nt),V}return(0,O.default)(ot,[{key:"setMap",value:function(V){this.map=V}},{key:"getCheckedLayers",value:function(){return this.checkedLayers}},{key:"getEditLayer",value:function(){if(this.editLayer&&this.editLayer.metadata&&this.editLayer.metadata.editing)return this.editLayer}},{key:"setEditLayerById",value:function(V){var G=this.getLayerById(V.id);return G?(G.metadata=G.values_.info,this.getEditLayer()&&(this.getEditLayer().metadata.editing=![]),this.setEditLayer(G),G.metadata.editing=!![],!![]):![]}},{key:"setEditLayer",value:function(V){this.editLayer=V}},{key:"setTocData",value:function(V){this.tocData=V}},{key:"addLayer",value:function(V){var G=this;return this.beforeAddOperation&&(V=this.beforeAddOperation(V)),new g.default(function(T,N){var k=this;(0,d.default)(this,G),(0,gt.default)(V).then(function($){var ht=this;(0,d.default)(this,k),V._options=$;var q=(0,yt.cloneDeep)(V);if(V.isProxy){var j=q.proxyPath?q.proxyPath:"/gisqBI/api/gis/proxy?";q.url=(0,I.default)(j).call(j,"?")?j+q.url:j+"?"+q.url}var W=this.layerGenerater.generate(q,$);W instanceof g.default?W.then(function(Z){(0,d.default)(this,ht),this.addLayerToMap(Z),T(Z)}.bind(this)):(this.addLayerToMap(W),T(W))}.bind(this)).catch(function($){(0,d.default)(this,k),$.name==="DeveloperError"||$.stack.indexOf("earth-core")>-1||$.stack.indexOf("ImageryProvider")>-1?c.error("\u4E09\u7EF4",$):(c.error($),this.dispatchEvent(new _(wt.ADDLAYERERROR,V,$)),this.removeCheckedLayers(V),N("\u52A0\u8F7D'".concat(V.label,"'\u56FE\u5C42\u670D\u52A1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5730\u5740\u548C\u8FD0\u7EF4\u7AEF\u914D\u7F6E\u9879\u662F\u5426\u6B63\u786E\u3002")))}.bind(this))}.bind(this))}},{key:"addCheckedLayers",value:function(V){if(this.checkedLayers.length===0)this.checkedLayers.push(V);else{var G=Pt(this.checkedLayers),T;try{for(G.s();!(T=G.n()).done;){var N=T.value;if(N.id===V.id)return g.default.reject(new Error("\u5730\u56FE\u4E2D\u5DF2\u52A0\u8F7Did\u4E3A".concat(V.id,"\u56FE\u5C42")))}}catch(q){G.e(q)}finally{G.f()}for(var k=0,$=this.checkedLayers.length;k<$;k++){if(V.mapIndex>=this.checkedLayers[k].mapIndex){var ht;(0,x.default)(ht=this.checkedLayers).call(ht,k,0,V);break}k===this.checkedLayers.length-1&&this.checkedLayers.push(V)}}return this.addLayer(V)}},{key:"removeCheckedLayers",value:function(V){for(var G=this.getCheckedLayers(),T=0,N=G.length;T<N;T++)if(G[T].id===V.id){(0,x.default)(G).call(G,T,1),this.removeLayer(V);break}this.checkedLayers=G}},{key:"indexOfCheckedLayers",value:function(V){for(var G=this.getCheckedLayers(),T=0,N=G.length;T<N;T++)if(G[T].id===V.id)return T;return-1}},{key:"removeLayer",value:function(V){this.clearSelectFeaturesByTag(V.layerTag);var G=V.id?V.id:V.get("id"),T=this.getAllLayerById(G),N=Pt(T),k;try{for(N.s();!(k=N.n()).done;){var $=k.value;this.dispatchEvent(new _(wt.BEFOREREMOVELAYER,$)),(0,E.default)(this).removeLayer($),this.dispatchEvent(new _(wt.AFTERREMOVELAYER,$))}}catch(ht){N.e(ht)}finally{N.f()}}},{key:"addLayerToMap",value:function(V){var G=this;this.checkedLayers.some(function(T){return(0,d.default)(this,G),T.id===V.get("id")}.bind(this))&&((0,E.default)(this).mask&&V.addFilter((0,E.default)(this).mask),this.dispatchEvent(new _(wt.BEFOREADDLAYER,V,V.values_.info)),(0,E.default)(this).addLayer(V),this.dispatchEvent(new _(wt.AFTERADDLAYER,V,V.values_.info)),V.get("isFit")&&V.get("initExtent")&&this.fitToLayer(V),V.on("postrender",function(T){(0,d.default)(this,G),this.layerContexts.push(T)}.bind(this)),this.initFilter(V))}},{key:"initFilter",value:function(V){var G=this,T=(0,E.default)(this).get("params");V.getSource&&V.getSource().updateParams&&T&&(0,f.default)(T)&&(0,f.default)(T).forEach(function(N){(0,d.default)(this,G),V.values_.layerTag===N.layerTag&&V.getSource().updateParams({CQL_FILTER:N.where})}.bind(this))}},{key:"fitToLayer",value:function(V){if(!V.get("initExtent")){c.warn("\u8BE5\u56FE\u5C42\u4E0D\u5B58\u5728\u521D\u59CB\u8303\u56F4");return}if(V instanceof r.Tile||V instanceof y.default){var G=(0,D.transformExtent)(V.get("initExtent"),"EPSG:4326",(0,E.default)(this).getView().getProjection().getCode());(0,E.default)(this).getView().fit(G,(0,E.default)(this).getSize()),V.getMaxResolution()!==1/0&&(0,E.default)(this).getView().getResolutionForExtent(V.get("initExtent")>V.getMaxResolution()/2)&&(0,E.default)(this).getView().setResolution(V.getMaxResolution()/2)}else(0,E.default)(this).getView().fit((0,D.transformExtent)(V.get("initExtent"),"EPSG:4326",(0,E.default)(this).getView().getProjection().getCode()),(0,E.default)(this).getSize())}},{key:"setMinAndMaxZoom",value:function(V,G){if((0,E.default)(this).getView().getResolution()){var T=(0,E.default)(this).options?(0,E.default)(this).options.minZoom:![],N=(0,E.default)(this).options?(0,E.default)(this).options.maxZoom:![];(!T||(0,E.default)(this).getView().getMinZoom()>V)&&((0,E.default)(this).getView().getResolution()[V]===void 0&&(V=V+1),(0,E.default)(this).getView().setMinZoom(V)),(!N||(0,E.default)(this).getView().getMaxZoom()<G)&&(0,E.default)(this).getView().setMaxZoom(G)}}},{key:"changeLayerOpacity",value:function(V){(0,E.default)(this).getLayerById(V.id)&&(0,E.default)(this).getLayerById(V.id).setOpacity(V.opacity)}},{key:"getLayerById",value:function(V){for(var G,T=(0,E.default)(this).getLayers().getArray(),N=0;N<T.length;N++){var k=T[N].get("id");if(k===V){G=T[N];break}}return G}},{key:"getAllLayerById",value:function(V){for(var G=[],T=(0,E.default)(this).getLayers().getArray(),N=0;N<T.length;N++){var k=T[N].get("id");k===V&&G.push(T[N])}return G}},{key:"getLayerDataById",value:function(V){var G=Pt(this.tocData),T;try{for(G.s();!(T=G.n()).done;){var N=T.value;if(N.children&&N.children.length>0){var k=this.queryTocData(N,"id",V);if(k)return k}else if(N.url&&N.url!==""&&N.id===V)return N}}catch($){G.e($)}finally{G.f()}}},{key:"getLayerDataByLayerTag",value:function(V){var G=Pt(this.tocData),T;try{for(G.s();!(T=G.n()).done;){var N=T.value;if(N.children&&N.children.length>0){var k=this.queryTocData(N,"layerTag",V);if(k)return k}else if(N.url&&N.url!==""&&N.layerTag===V)return N}}catch($){G.e($)}finally{G.f()}}},{key:"queryTocData",value:function(V,G,T){if(V.children&&V.children.length>0){var N=Pt(V.children),k;try{for(N.s();!(k=N.n()).done;){var $=k.value;if($.children&&$.children.length>0){var ht=this.queryTocData($,G,T);if(ht)return ht}else if($[G]===T)return $}}catch(q){N.e(q)}finally{N.f()}}}},{key:"getLayerOpacity",value:function(V){var G=this.getLayerById(V);return G?G.getOpacity():-1}},{key:"setLayerOpacity",value:function(V,G){var T=this.getLayerById(V);if(T){if(T instanceof B.default){var N=T.getLayers().getArray(),k=Pt(N),$;try{for(k.s();!($=k.n()).done;){var ht=$.value;ht.setOpacity(G/100)}}catch(q){k.e(q)}finally{k.f()}}T.setOpacity(G/100)}}},{key:"setLayerTop",value:function(V){var G=this,T=this.getLayerById(V);if(T){var N=0,k=(0,E.default)(this).getLayers().getArray();k.forEach(function($){var ht,q;(0,d.default)(this,G);var j=(ht=$.values_)===null||ht===void 0||(q=ht.info)===null||q===void 0?void 0:q.group;if(j){var W=$.getZIndex()||0;N=Math.max(N,W)}}.bind(this)),T.setZIndex(N+1)}}},{key:"zoomToLayer",value:function(V){var G=this.getLayerById(V);G&&this.fitToLayer(G)}},{key:"zoomToLayers",value:function(V){var G,T=Pt(V),N;try{for(T.s();!(N=T.n()).done;){var k=N.value,$=this.getLayerById(k.id);if($){var ht=(0,D.transformExtent)($.get("initExtent"),"EPSG:4326",(0,E.default)(this).getView().getProjection().getCode());G?G=(0,Y.extend)(G,ht):G=ht}}}catch(q){T.e(q)}finally{T.f()}G&&(0,E.default)(this).getView().fit(G,(0,E.default)(this).getSize())}},{key:"setLayerIndex",value:function(V,G){var T=this.getLayerById(V);if(T instanceof B.default){var N=T.getLayers().getArray();T.setZIndex(G);var k=Pt(N),$;try{for(k.s();!($=k.n()).done;){var ht=$.value;!(0,l.default)(ht.values_.info.mapIndex)&&(G=G-.001),this._changeLayerZoom(ht,G)}}catch(q){k.e(q)}finally{k.f()}}else this._changeLayerZoom(T,G)}},{key:"_changeLayerZoom",value:function(V,G){V.setZIndex(G)}},{key:"setData",value:function(V){this.dataMap.set(V.id,V)}},{key:"setBeforeAddOperation",value:function(V){this.beforeAddOperation=V}},{key:"clearSelectFeaturesByTag",value:function(V){var G=(0,E.default)(this).getSelectFeatures(),T=(0,E.default)(this).getLayerById(et.BASE_DRAWLAYER_ID).getSource(),N=Pt(G),k;try{for(N.s();!(k=N.n()).done;){var $=k.value;$.values_.layerTag===V&&T.removeFeature($)}}catch(ht){N.e(ht)}finally{N.f()}}},{key:"createDrawLayer",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},G=V.drawLayerType,T=G===void 0?et.BASE_DRAWLAYER_TYPE:G,N=V.id,k=N===void 0?(0,ut.v4)():N,$=V.label,ht=$===void 0?et.BASE_DRAWLAYER_ID:$,q=V.layerTag,j=V.isPop,W=j===void 0?![]:j,Z=V.mapIndex,z=Z===void 0?99999:Z,X;return(0,E.default)(this).getLayerById(k)?X=(0,E.default)(this).getLayerById(k):(X=new dt.Vector({id:k,drawLayerType:T,layerTag:q,label:ht,isPop:W,zIndex:z,source:new it.default}),(0,E.default)(this).addLayer(X)),X}},{key:"updateLayer",value:function(V){if(V.id&&(0,E.default)(this).getLayerById(V.id)){var G=(0,E.default)(this).getLayerById(V.id);G&&G.setProperties(V)}}},{key:"getAllDrawLayer",value:function(){var V=this,G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:et.BASE_DRAWLAYER_TYPE,T=[],N=(0,E.default)(this).getLayers().getArray();return N.forEach(function(k){(0,d.default)(this,V);var $=k.get("drawLayerType");$&&G===$&&T.push(k)}.bind(this)),T}}]),ot}(lt.default),Q=rt;b.default=Q},44175:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(11323)),S=c(e(78756)),v=c(e(28866)),u=c(e(38006)),a=c(e(53267)),s=c(e(42579)),F=c(e(34749)),g=c(e(22777)),I=c(e(42762)),x=c(e(49162)),E=c(e(37318)),f=e(91873),l=c(e(77384)),d=function(){function m(p){(0,g.default)(this,m),this.map=p,this.mask=null}return(0,I.default)(m,[{key:"addMask",value:function(){var p=(0,F.default)(w.default.mark(function h(r){var y=this,R;return w.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:R=this,r&&(this.maskOptions=r),this.maskPromise=new S.default(function(lt){var st=this;(0,s.default)(this,y),(0,l.default)((0,v.default)(this).getView().getProjection().getCode(),this.maskOptions).then(function(Y){var yt=this;(0,s.default)(this,st);var et=new x.default().readFeature(Y);if(et!=null){var ut=new E.default({feature:et,inner:![],fill:new f.Fill({color:[255,255,255,1]})});R.mask=ut,(0,v.default)(R).mask=R.mask}(0,v.default)(R).getLayers().forEach(function(dt){(0,s.default)(this,yt),et!=null&&dt.addFilter(R.mask)}.bind(this)),lt()}.bind(this))}.bind(this));case 3:case"end":return B.stop()}},h,this)}));function o(h){return p.apply(this,arguments)}return o}()},{key:"refresh",value:function(){var o=this;this.maskOptions&&this.maskPromise&&this.maskPromise.then(function(){(0,s.default)(this,o),this.clear(),this.addMask(this.maskOptions)}.bind(this))}},{key:"clear",value:function(){var o=this;this.mask&&((0,v.default)(this).getLayers().forEach(function(h){(0,s.default)(this,o),h.removeFilter(this.mask)}.bind(this)),(0,v.default)(this).mask=void 0)}}],[{key:"getInstance",value:function(o){if(!m.instanceMap&&(m.instanceMap=new u.default),o){var h=o.mapid;if(!m.instanceMap.get(h)){var r=new m(o);m.instanceMap.set(h,r)}return m.instanceMap.get(h)}else{var y;return(0,a.default)(y=m.instanceMap).call(y).next().value}}}]),m}(),O=d;b.default=O},27604:function(H,b,e){"use strict";var c=e(49500),w=e(20314),S=e(26352),v=e(40639),u=e(43586),a=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var s=a(e(28866)),F=a(e(5146)),g=a(e(22466)),I=a(e(81360)),x=a(e(38006)),E=a(e(42579)),f=a(e(22777)),l=a(e(42762)),d=a(e(41739)),O=a(e(63379)),m=e(92086),p=a(e(36001)),o=a(e(94401)),h=e(5775),r=a(e(39211)),y=a(e(37107)),R=a(e(86220)),D=a(e(24497)),B=a(e(67026)),lt=a(e(94770)),st=e(72233),Y=a(e(14660)),yt=a(e(47598)),et=a(e(49162)),ut=e(97149),dt=e(10563),it=e(59269);function gt(It,wt){var _=typeof v<"u"&&u(It)||It["@@iterator"];if(!_){if(Array.isArray(It)||(_=Pt(It))||wt&&It&&typeof It.length=="number"){_&&(It=_);var rt=0,Q=function(){};return{s:Q,n:function(){return rt>=It.length?{done:!![]}:{done:![],value:It[rt++]}},e:function(V){throw V},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tt=!![],xt=![],ot;return{s:function(){_=_.call(It)},n:function(){var V=_.next();return tt=V.done,V},e:function(V){xt=!![],ot=V},f:function(){try{!tt&&_.return!=null&&_.return()}finally{if(xt)throw ot}}}}function Pt(It,wt){var _;if(It){if(typeof It=="string")return ft(It,wt);var rt=w(_=Object.prototype.toString.call(It)).call(_,8,-1);if(rt==="Object"&&It.constructor&&(rt=It.constructor.name),rt==="Map"||rt==="Set")return S(It);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return ft(It,wt)}}function ft(It,wt){(wt==null||wt>It.length)&&(wt=It.length);for(var _=0,rt=new Array(wt);_<wt;_++)rt[_]=It[_];return rt}var St=function(){function It(wt){(0,f.default)(this,It),this.map=wt,this.mapid=wt.mapid,this.tocData=[],this.transform=st.transform,this.customFeatues=[],this.parames=new Y.default,this.mapSource=(0,s.default)(this).getLayerById(it.BASE_DRAWLAYER_ID)}return(0,l.default)(It,[{key:"setMap",value:function(_){this.map=_}},{key:"setTocData",value:function(_){var rt;this.tocData=(0,F.default)(rt=this.tocData).call(rt,_)}},{key:"search",value:function(_,rt){var Q=this;Q.callback=rt,Q.clickObj={},Q.tableName="",Q.isStopFlashHlight=![],Q.isLocate=!![];var tt=!![];if(!_.isStayFeature&&this.mapSource.getSource().clear(),_.express)try{_.express=decodeURIComponent(_.express)}catch(T){c.warn(T)}(!_.tag||!_.express)&&alert("\u7F3A\u5C11\u56FE\u5C42\u6807\u8BC6\u6216\u8005\u67E5\u8BE2\u6761\u4EF6"),Q.optionStyle=_.flashStyle,Q.mapLayers=(0,s.default)(Q).layerManager.getCheckedLayers();var xt=O.default.grep(Q.mapLayers,function(T){return T.layerTag===_.tag});if(xt.length<1&&(tt=![],this.tocData&&this.tocData.length>0)){xt=[];var ot=gt(this.tocData),nt;try{for(ot.s();!(nt=ot.n()).done;){var V=nt.value;if(V.children&&V.children.length>0){var G=this.queryTocData(V,"layerTag",_.tag);G&&xt.push(G)}else V.url&&V.url!==""&&V.layerTag===_.tag&&xt.push(V)}}catch(T){ot.e(T)}finally{ot.f()}}Q.searchAndLocate(xt,_,tt)}},{key:"searchAndLocate",value:function(_,rt,Q){var tt=this,xt=this;if(_.length>0){var ot=_[0];xt.layerTag=ot.layerTag,ot.layerTable&&ot.layerTable!==""&&(rt.table=rt.table?rt.table:ot.layerTable),xt.isStopFlashHlight=rt.isStopFlashHlight,rt.isLocate!==void 0&&(xt.isLocate=rt.isLocate),rt.isSelect===void 0&&(rt.isSelect=!![]),xt.option=rt,xt.label=ot.label;var nt=rt.isAddLayer===void 0,V=0;!Q&&nt&&(d.default.$emit("setLayerChecked",ot.id,!![],null,(0,s.default)(this).mapid),V=500);var G=(0,dt.setIntervalCount)(function(){if((0,E.default)(this,tt),(0,g.default)(rt)===!![]){var T=O.default.grep((0,s.default)(xt).getLayers().getArray(),function(N){return N.get("id")===ot.id});T&&T.length>0&&(clearInterval(G),T[0].values_.info._filter=rt.express,T[0].getSource().updateParams({cql_filter:rt.express}))}else clearInterval(G)}.bind(this),V,10);setTimeout(function(){(0,E.default)(this,tt);var T=ot.type;xt.customFeatues=[],T.indexOf("geoserver")!==-1||ot.url.indexOf("geoserver")!==-1?(!rt.table&&xt.queryCallback(![],ot.label+":\u8BF7\u914D\u7F6E\u6570\u636E\u6E90"),xt.tableName=rt.table,xt._geoserverHandle(ot,rt)):(T.indexOf("dynamic")!==-1||ot.url.indexOf("arcgis")!==-1)&&xt._arcgisServerHandle(ot,rt)}.bind(this),V),d.default.$emit("mapSearch",![])}else alert("\u627E\u4E0D\u5230\u5B9A\u4F4D\u56FE\u5C42!")}},{key:"searchFromLayer",value:function(_,rt){var Q=this;_.layerTable&&_.layerTable!==""&&(rt.table=_.layerTable),Q.label=_.label;var tt=_.type;tt.indexOf("geoserver")!==-1||_.url.indexOf("geoserver")!==-1?(!rt.table&&Q.queryCallback(![],_.label+":\u8BF7\u914D\u7F6E\u6570\u636E\u6E90"),Q.tableName=rt.table,Q._geoserverHandle(_,rt)):(tt.indexOf("dynamic")!==-1||_.url.indexOf("arcgis")!==-1)&&Q._arcgisServerHandle(_,rt)}},{key:"_geoserverQueryPromise",value:function(_,rt){var Q,tt=this,xt=_.visibleLayers;if(xt.length<1){alert("\u672A\u914D\u7F6E\u53EF\u89C1\u56FE\u5C42");return}if(tt.parames.where=(0,I.default)(Q=rt.express).call(Q),rt.table)if(rt.table.split(":").length===1){var ot;if(_.visibleLayers[0].split(":").length>1)ot=_.visibleLayers[0].split(":")[0];else{var nt=_.url.split("/");ot=nt[nt.length-2]}tt.parames.tableName=ot+":"+rt.table}else tt.parames.tableName=rt.table;tt.parames.srsName=(0,s.default)(tt).getView().getProjection().getCode(),tt.parames.token=rt.token;var V=new p.default(_);V.execute(tt.parames).then(function(G){G=G.headers?G.data:G,G&&G.features&&G.features.length>0?tt._geoserverResponse(G,rt.popTag,rt):tt.queryCallback(![],"\u5730\u56FE\u5B9A\u4F4D\u672A\u67E5\u8BE2\u5230\u6570\u636E")})}},{key:"_geoserverHandle",value:function(_,rt){var Q,tt=this,xt=_.visibleLayers;if(xt.length<1){alert("\u672A\u914D\u7F6E\u53EF\u89C1\u56FE\u5C42");return}if(tt.parames.where=(0,I.default)(Q=rt.express).call(Q),rt.table)if(rt.table.split(":").length===1){var ot;if(_.visibleLayers[0].split(":").length>1)ot=_.visibleLayers[0].split(":")[0];else{var nt=_.url.split("/");ot=nt[nt.length-2]}tt.parames.tableName=ot+":"+rt.table}else tt.parames.tableName=rt.table;tt.parames.srsName=(0,s.default)(tt).getView().getProjection().getCode(),tt.parames.propertyName=rt.propertyName,tt.parames.token=rt.token;var V=new p.default(_);V.execute(tt.parames).then(function(G){G=G.headers?G.data:G,G&&G.features&&G.features.length>0?tt._geoserverResponse(G,rt.popTag,rt):tt.queryCallback(![],"\u5730\u56FE\u5B9A\u4F4D\u672A\u67E5\u8BE2\u5230\u6570\u636E")})}},{key:"_geoserverResponse",value:function(_,rt,Q){var tt=this;if(_&&_.features&&_.features.length>0){var xt=_.features,ot=[],nt=null,V="";if(Q.propertyName)ot=xt,tt.queryCallback(!![],ot,!![]);else if(xt.length>0){for(var G=0;G<xt.length;G++){var T=xt[G].geometry,N=T.type,k=null,$=[],ht=[];if(N==="Point")$=T.coordinates;else if(N==="MultiPoint")$=T.coordinates;else if(N==="MultiPolygon")for(var q=0;q<T.coordinates.length;q++)for(var j=0;j<T.coordinates[q].length;j++){var W=O.default.grep(T.coordinates[q][j],function(le){return le[0]>0&&le[1]>0});ht=[W],$.push(ht)}else $=T.coordinates;V=N,N==="MultiPolygon"?k=new h.MultiPolygon($):N==="Polygon"?k=new h.Polygon($):N==="LineString"?k=new h.LineString($):N==="MultiLineString"?k=new h.MultiLineString($):N==="Point"?k=new h.Point($):N==="MultiPoint"?k=new h.MultiPoint($):N==="GeometryCollection"&&(k=new et.default().readGeometryFromObject(T));var Z=new yt.default(k);Z.setProperties(xt[G].properties),Z.set("isSelected",!!tt.option.isSelect),Z.set("isQuery",!![]),Z.set("layerTag",tt.layerTag),Z.set("id",xt[G].properties.id),tt.flashGeometry(Z),ot.push(Z),nt===null?N!=="Point"&&N!=="MultiPoint"&&(nt=k.getExtent()):N!=="Point"&&N!=="MultiPoint"&&(nt=(0,m.extend)(nt,k.getExtent()))}if(V!=="Point"&&V!=="MultiPoint"){var z=(0,s.default)(tt).getView().getResolutionForExtent(nt)*2;this.animateMap((0,m.getCenter)(nt),z)}else{var X=[],K=gt(xt),vt;try{for(K.s();!(vt=K.n()).done;){var ct=vt.value,Mt=ct.geometry.coordinates;if(ct.geometry.type==="MultiPoint"&&(Mt=Mt[0]),X.push(Mt),Q.drawBuffer===!![]){var J=new jsts.io.OL3Parser;J.inject(h.Point,h.LineString,h.LinearRing,h.Polygon,h.MultiPoint,h.MultiLineString,h.MultiPolygon);var Tt=new yt.default,jt=new h.Point([Mt[0],Mt[1]]),zt=J.read(jt),$t=(0,s.default)(tt).getView().getProjection(),Jt=$t.getUnits(),Wt=new jsts.operation.buffer.BufferOp(zt),te=parseInt(Q.bufferWidth,10);Jt.toString()==="degrees"&&(te=te/(2*Math.PI*6371004)*360);var oe=Wt.getResultGeometry(te);Tt.setGeometry(J.write(oe)),(0,s.default)(tt).getLayerById(it.BASE_DRAWLAYER_ID).getSource().addFeatures([Tt])}}}catch(le){K.e(le)}finally{K.f()}if(X.length===1){var ve=(0,s.default)(tt).getView().getResolutionForZoom((0,s.default)(tt).getView().getMaxZoom()-3);this.animateMap(X[0],ve)}else{var Qt=new h.MultiPoint(X).getExtent(),Dt=(0,s.default)(tt).getView().getResolutionForExtent(Qt)*2;this.animateMap((0,m.getCenter)(Qt),Dt)}}tt.queryCallback(!![],ot)}}else tt.queryCallback(![],"\u5730\u56FE\u5B9A\u4F4D\u672A\u67E5\u8BE2\u5230\u6570\u636E")}},{key:"_loacteCurrentGraphical",value:function(_){var rt=this;if(rt.isLocate){if(!_||_.length===0){rt.queryCallback(![],"\u5730\u56FE\u5B9A\u4F4D\u672A\u67E5\u8BE2\u5230\u6570\u636E");return}var Q=rt._getMaxMinXY(_);Q.maxX===Q.minX&&Q.maxY===Q.minY&&(Q=rt._setPointBuffer([Q.maxX,Q.maxY],8e3));var tt=[];tt.push([Q.maxX,Q.maxY]),tt.push([Q.maxX,Q.minY]),tt.push([Q.minX,Q.maxY]),tt.push([Q.minX,Q.minY]),tt.push([Q.maxX,Q.maxY]);var xt=new h.Polygon([tt]),ot=(0,s.default)(rt).getView().getResolutionForExtent(xt.getExtent())*2;this.animateMap(this._getAnchorOrigin(xt),ot)}}},{key:"_getAnchorOrigin",value:function(_){var rt=this,Q=_.getExtent(),tt=(0,m.getCenter)(Q);if(rt.option.anchorOrigin)switch(rt.option.anchorOrigin){case"top-left":{tt=[Q[0],Q[3]];break}case"top-right":{tt=[Q[2],Q[3]];break}case"bottom-left":{tt=[Q[0],Q[1]];break}case"bottom-right":{tt=[Q[2],Q[1]];break}default:break}return tt}},{key:"_setPointBuffer",value:function(_,rt){var Q,tt=this,xt=(0,s.default)(tt).getView().getProjection().getCode(),ot="EPSG:3857",nt=[],V=[],G=[],T=tt.transform(_,xt,ot);V.push(T[0]+rt),V.push(T[1]+rt),G.push(T[0]-rt),G.push(T[1]-rt);var N=tt.transform(V,ot,xt),k=tt.transform(G,ot,xt);nt=(0,F.default)(Q=(0,F.default)(nt).call(nt,N)).call(Q,k);var $={};return $.maxX=nt[0],$.maxY=nt[1],$.minX=nt[2],$.minY=nt[3],$}},{key:"_getMultiPolygonArr",value:function(_,rt,Q){var tt=this,xt=[],ot=new yt.default({geometry:_,id:rt,isQuery:!![],layerTag:tt.layerTag});tt.flashGeometry(ot),tt.customFeatues.push(ot);var nt=tt._coordVerteHandle(_);xt=(0,F.default)(xt).call(xt,nt);var V=[];V.push((nt[0]+nt[2])/2),V.push((nt[1]+nt[3])/2);var G=tt._setSymbol(V,rt);return tt.clickObj[ot.olUid]={label:tt.label,newGeometry:_,id:rt,properties:Q,iconFeature:G,centerPoint:V},(_ instanceof h.Polygon||_ instanceof h.MultiPolygon)&&(tt.mapSource.getSource().addFeature(G),tt.customFeatues.push(G)),xt}},{key:"featureFlash",value:function(_,rt,Q){this.mapSource.getSource().addFeature(_),this.optionStyle&&this.optionStyle.fillColor&&(rt=this.optionStyle.fillColor),this.optionStyle&&this.optionStyle.strokeColor&&(Q=this.optionStyle.strokeColor);var tt=this,xt=0,ot=new r.default({fill:new D.default({color:"rgba(0,0,0,0)"}),stroke:""}),nt=function(){_.setStyle(ot),setTimeout(V,300)},V=function(){var T=_.getGeometry();T instanceof h.Point?_.setStyle(tt._getStyle(rt,Q,xt*2+3)):_.setStyle(tt._getStyle(rt,Q)),xt++,xt<4?setTimeout(nt,300):!tt.option.isShow&&(_.setStyle(ot),tt.mapSource.getSource().removeFeature(_))};nt()}},{key:"_getStyle",value:function(_,rt,Q){var tt=[255,0,0,0],xt=[255,0,0,.3],ot=5;_&&(tt=_),rt&&(xt=rt),Q&&(ot=Q);var nt=new D.default({color:tt}),V=new B.default({color:xt,width:2}),G=new r.default({image:new lt.default({fill:nt,stroke:V,radius:ot}),fill:nt,stroke:V});return G}},{key:"_setSymbol",value:function(_,rt){var Q=this,tt=new h.Point(_),xt=new yt.default({geometry:tt,id:rt,isQuery:!![],layerTag:Q.layerTag});return xt.setStyle(Q.setIcon(rt)),xt}},{key:"_mapClick",value:function(){var _=this;_.clickObj={},(0,s.default)(_).on("click",function(rt){var Q=![];if(Q){var tt=(0,s.default)(_).getEventPixel(rt.originalEvent),xt=(0,s.default)(_).getFeaturesAtPixel(tt);if(xt)for(var ot=0;ot<xt.length;ot++){var nt=xt[ot],V=nt.olUid,G=_.clickObj[V];if(G){_.label=G.label,_.setOverLay(G);break}}}})}},{key:"setIcon",value:function(_){return new r.default({image:new y.default({anchor:[.5,.1],anchorOrigin:"bottom-left",anchorXUnits:"fraction",anchorYUnits:"fraction",offsetOrigin:"top-right",opacity:.75,src:"images/location.png"}),text:new R.default({textAlign:"center",offsetX:0,offsetY:-16,textBaseline:"middle",font:"normal 12px \u5FAE\u8F6F\u96C5\u9ED1",text:_+"",fill:new D.default({color:"#ffffff"})})})}},{key:"_coordVerteHandle",value:function(_){var rt=[],Q=_.getExtent();return rt.push(Q[2]),rt.push(Q[3]),rt.push(Q[0]),rt.push(Q[1]),rt}},{key:"_getMaxMinXY",value:function(_){for(var rt=-1/0,Q=1/0,tt=-1/0,xt=1/0,ot=0;ot<_.length;ot++){var nt=_[ot];ot%2===0?(nt>rt&&(rt=nt),nt<Q&&(Q=nt)):(nt>tt&&(tt=nt),nt<xt&&(xt=nt))}var V={maxX:rt,minX:Q,maxY:tt,minY:xt};return V}},{key:"animateMap",value:function(_,rt){if(this.isLocate){var Q=this.option.resolution?this.option.resolution:rt;Q=this.option.zoom?(0,s.default)(this).getView().getResolutionForZoom(this.option.zoom):Q,this.option.isShowFullFeature?rt=rt>Q?rt:Q:rt=Q,this.option.zoomScale&&(rt=rt*this.option.zoomScale),(0,ut.getMapScale)((0,s.default)(this),rt)<550&&(rt=(0,ut.getResolutionFromScale)((0,s.default)(this),550));var tt=(0,s.default)(this).getView().getResolutionForZoom((0,s.default)(this).getView().getMaxZoom());rt=rt>tt?rt:tt,(0,s.default)(this).getView().animate({center:_,resolution:rt})}}},{key:"flashGeometry",value:function(_){var rt=this;_.set("isSelected",!!rt.option.isSelect),_.set("isQuery",!![]),_.set("layerTag",rt.layerTag);var Q=_.getGeometry(),tt=null,xt="#00FFFF";rt.isStopFlashHlight?rt.option.isShow&&(this.mapSource.getSource().addFeature(_),this.optionStyle&&this.optionStyle.fillColor&&(tt=this.optionStyle.fillColor),this.optionStyle&&this.optionStyle.strokeColor&&(xt=this.optionStyle.strokeColor),_.setStyle(rt._getStyle(tt,xt))):Q instanceof h.LineString||Q instanceof h.MultiLineString?(_.setStyle(rt._getStyle(tt,xt)),rt.featureFlash(_,tt,xt)):Q instanceof h.Point||Q instanceof h.MultiPoint?rt.featureFlash(_,tt,xt):(Q instanceof h.Polygon||Q instanceof h.MultiPolygon,_.setStyle(rt._getStyle(tt,xt)),rt.featureFlash(_,tt,xt))}},{key:"_arcgisServerHandle",value:function(_,rt){var Q,tt=(0,s.default)(this).getView().getProjection().getCode(),xt=new o.default(_.url+"/"+rt.subLayerId,{outSR:tt,returnGeometry:!![],where:(0,I.default)(Q=rt.express).call(Q),envelope:rt.envelope,outFields:"*",returnZ:![],returnM:![]}),ot=this;xt.run(function(nt,V){var G=this,T=V.features,N=[];T.forEach(function(k){(0,E.default)(this,G),k.set("isSelected",!!ot.option.isSelect),k.set("isQuery",!![]),ot.flashGeometry(k);var $=ot._coordVerteHandle(k.getGeometry());N=(0,F.default)(N).call(N,$)}.bind(this)),ot._loacteCurrentGraphical(N),ot.queryCallback(!![],T)},this)}},{key:"queryTocData",value:function(_,rt,Q){if(_.children&&_.children.length>0){var tt=gt(_.children),xt;try{for(tt.s();!(xt=tt.n()).done;){var ot=xt.value;if(ot.children&&ot.children.length>0){var nt=this.queryTocData(ot,rt,Q);if(nt)return nt}else if(ot[rt]===Q)return ot}}catch(V){tt.e(V)}finally{tt.f()}}}},{key:"queryCallback",value:function(_,rt,Q){if(this.callback){var tt=!_||Q?rt:(0,s.default)(this).transformGeo(rt);this.callback(_,tt,rt.length)}_?this.option.success&&this.option.success(rt):(c.error(rt),this.option.failed&&this.option.failed(rt))}}],[{key:"getInstance",value:function(_){!It.instanceMap&&(It.instanceMap=new x.default);var rt=_.mapid;if(!It.instanceMap.get(rt)){var Q=new It(_);It.instanceMap.set(rt,Q)}return It.instanceMap.get(rt)}}]),It}(),At=St;b.default=At},99096:function(H,b,e){"use strict";var c=e(65557),w=e(20314),S=e(26352),v=e(40639),u=e(43586),a=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=b.ShineMapEventType=b.MapLinkEvent=void 0;var s=a(e(85208)),F=a(e(52909)),g=a(e(66273)),I=a(e(42579)),x=a(e(87507)),E=a(e(53144)),f=a(e(42762)),l=a(e(22777)),d=a(e(30044)),O=a(e(99085)),m=a(e(34009)),p=a(e(32132)),o=e(12768),h=a(e(41739)),r=a(e(13890)),y=a(e(1865)),R=a(e(27604)),D=a(e(44175)),B=e(97149),lt=e(81534),st=a(e(49162)),Y=a(e(31694)),yt=e(72233),et=e(92086),ut=e(5775),dt=a(e(19830)),it=e(46769),gt=a(e(59037)),Pt=a(e(12207)),ft=e(59269);function St(ot,nt){var V=typeof v<"u"&&u(ot)||ot["@@iterator"];if(!V){if(Array.isArray(ot)||(V=At(ot))||nt&&ot&&typeof ot.length=="number"){V&&(ot=V);var G=0,T=function(){};return{s:T,n:function(){return G>=ot.length?{done:!![]}:{done:![],value:ot[G++]}},e:function(q){throw q},f:T}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N=!![],k=![],$;return{s:function(){V=V.call(ot)},n:function(){var q=V.next();return N=q.done,q},e:function(q){k=!![],$=q},f:function(){try{!N&&V.return!=null&&V.return()}finally{if(k)throw $}}}}function At(ot,nt){var V;if(ot){if(typeof ot=="string")return It(ot,nt);var G=w(V=Object.prototype.toString.call(ot)).call(V,8,-1);if(G==="Object"&&ot.constructor&&(G=ot.constructor.name),G==="Map"||G==="Set")return S(ot);if(G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return It(ot,nt)}}function It(ot,nt){(nt==null||nt>ot.length)&&(nt=ot.length);for(var V=0,G=new Array(nt);V<nt;V++)G[V]=ot[V];return G}function wt(ot){var nt=_();return function(){var G=(0,m.default)(ot),T;if(nt){var N=(0,m.default)(this).constructor;T=c(G,arguments,N)}else T=G.apply(this,arguments);return(0,O.default)(this,T)}}function _(){if(typeof Reflect>"u"||!c)return![];if(c.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(c(Boolean,[],function(){})),!![]}catch{return![]}}var rt={AFTERADDMAPLINK:"afterAddMapLink",AFTERREMOVEMAPLINK:"afterRemoveMapLink"};b.ShineMapEventType=rt;var Q=function(ot){(0,d.default)(V,ot);var nt=wt(V);function V(G,T){var N;return(0,l.default)(this,V),N=nt.call(this,G),N.element=T,N}return(0,f.default)(V)}(Pt.default);b.MapLinkEvent=Q;var tt=function(ot){(0,d.default)(V,ot);var nt=wt(V);function V(G){var T;return(0,l.default)(this,V),T=nt.call(this,G),T._selectFeatures=[],T._checkedLayers=[],T.linkMap=[],T._currentEditLayer=void 0,T.animateEnable=!![],T.mapid=G.mapid,T.layerManager=new y.default((0,x.default)(T)),T.interactionManager=new r.default((0,x.default)(T)),T.queryManager=R.default.getInstance((0,x.default)(T)),T.maskManager=D.default.getInstance(T.$map),T.transformProjection=G.transformProjection,T}return(0,f.default)(V,[{key:"setStatus",value:function(T){var N=this;(0,s.default)(T).forEach(function(k){var $=this;switch((0,I.default)(this,N),typeof T[k]=="boolean"&&(this[k]=T[k]),k){case"mouseWheelZoomEnable":{var ht,q=(0,F.default)(ht=this.getInteractions().getArray()).call(ht,function(X){return(0,I.default)(this,$),X instanceof o.MouseWheelZoom}.bind(this));q?.setActive(T[k]);break}case"doubleClickZoomEnable":{var j,W=(0,F.default)(j=this.getInteractions().getArray()).call(j,function(X){return(0,I.default)(this,$),X instanceof o.DoubleClickZoom}.bind(this));W?.setActive(T[k]);break}case"dragPanEnable":{var Z,z=(0,F.default)(Z=this.getInteractions().getArray()).call(Z,function(X){return(0,I.default)(this,$),X instanceof o.DragPan}.bind(this));z?.setActive(T[k]);break}}}.bind(this))}},{key:"setTransformProjection",value:function(T){(0,lt.registerProj)(T),this.transformProjection=T}},{key:"getLayerById",value:function(T){for(var N,k=this.getLayers().getArray(),$=0;$<k.length;$++){var ht=k[$].get("id");if(ht===T){N=k[$];break}}return N}},{key:"getLayerByLayerTag",value:function(T){for(var N,k=this.getLayers().getArray(),$=0;$<k.length;$++){var ht=k[$].get("layerTag");if(ht===T){N=k[$];break}}return N}},{key:"clearSelectFeatures",value:function(){var T=this.getSelectFeatures(),N=this.getLayerById(ft.BASE_DRAWLAYER_ID).getSource(),k=St(T),$;try{for(k.s();!($=k.n()).done;){var ht=$.value;N.removeFeature(ht)}}catch(q){k.e(q)}finally{k.f()}this._selectFeatures=[]}},{key:"getSelectFeatures",value:function(){var T=this,N=[],k,$=this.getLayers().getArray();return $.forEach(function(ht){var q=this;(0,I.default)(this,T),ht.get("id")===ft.BASE_DRAWLAYER_ID&&(k=ht.getSource().getFeatures(),k.forEach(function(j){(0,I.default)(this,q),(j.get("tempSelected")||j.get("isSelected"))&&N.push(j)}.bind(this)))}.bind(this)),N}},{key:"getSelectGeoJson",value:function(T,N){var k=this.getSelectFeatures(),$={};if(T){N&&(0,lt.registerProj)(N);var ht=this.getView().getProjection().getCode();N=N||this.transformProjection,$={dataProjection:N,featureProjection:ht}}return N=N||this.getView().getProjection().getCode(),(0,B.addCrsToGeojson)(new st.default($).writeFeatures(k),N)}},{key:"getSelectWkt",value:function(T,N){var k=this.getSelectFeatures(),$={};if(T){N&&(0,lt.registerProj)(N);var ht=this.getView().getProjection().getCode();N=N||this.transformProjection,$={dataProjection:N,featureProjection:ht}}var q="",j=St(k),W;try{for(j.s();!(W=j.n()).done;){var Z=W.value;q+=new Y.default($).writeFeatures([Z],$)+";"}}catch(z){j.e(z)}finally{j.f()}return q.substring(0,q.length-1)}},{key:"setSelectFeatures",value:function(T){this._selectFeatures=T}},{key:"getCheckedLayers",value:function(){return this._checkedLayers}},{key:"getCurrentEditLayer",value:function(){return this._currentEditLayer}},{key:"setCurrentEditLayer",value:function(T){this._currentEditLayer=T}},{key:"clearCurrentEditLayer",value:function(){this._currentEditLayer=void 0}},{key:"linkWithMap",value:function(T){T.setView(this.getView())}},{key:"updateMapSize",value:function(){this.updateSize()}},{key:"search",value:function(T,N){var k=R.default.getInstance(this),$=new R.default(this);$.setTocData(k.tocData),$.search(T,N),h.default.$emit("mapSearch",!![])}},{key:"findLayer",value:function(){}},{key:"locateGeoJson",value:function(T){return(0,B.locateGeoJson)(this,T,this.transformProjection)}},{key:"addGeoJson",value:function(T){return(0,B.addGeoJson)(this,T,this.transformProjection)}},{key:"flashFeatures",value:function(T,N){(0,B.flashFeatures)(this,T,N)}},{key:"locateTempGraphic",value:function(T){(0,B.locateTempGraphic)(this,T)}},{key:"getMapScale",value:function(){return(0,B.getMapScale)(this)}},{key:"setMapScale",value:function(T){(0,B.setScale)(this,T)}},{key:"getResolutionFromScale",value:function(T){return(0,B.getResolutionFromScale)(this,T)}},{key:"drawGraphic",value:function(T){var N=T.wktCRS?T.wktCRS:this.transformProjection;return T.wktCRS=N,(0,B.drawGraphic)(this,T)}},{key:"deleteGraphic",value:function(T){return(0,B.deleteGraphic)(this,T)}},{key:"locateGraphic",value:function(T){return(0,B.locateGraphic)(this,T)}},{key:"zoomTo",value:function(T,N,k){k&&(0,lt.registerProj)(k),k=k||this.transformProjection,(0,B.zoomTo)(this,k,T,N)}},{key:"setCenter",value:function(T,N){var k=T;N&&((0,lt.registerProj)(N),k=(0,yt.transform)(k,N,this.getView().getProjection())),this.animateEnable?this.getView().animate({center:k,duration:2e3}):this.getView().setCenter(k)}},{key:"setZoom",value:function(T){this.animateEnable?this.getView().animate({zoom:T,duration:2e3}):this.getView().setZoom(T)}},{key:"setZoomAndCenter",value:function(T,N,k){var $=N;k&&((0,lt.registerProj)(k),$=(0,yt.transform)($,k,this.getView().getProjection())),this.animateEnable?this.getView().animate({center:$,zoom:T,duration:2e3}):(this.getView().setCenter($),this.getView().setZoom(T))}},{key:"animate",value:function(T){T.inCrs&&(0,lt.registerProj)(T.inCrs),T.inCrs=T.inCrs?T.inCrs:this.transformProjection,(0,B.animate)(this,T)}},{key:"transformGeo",value:function(T,N,k){return k&&(0,lt.registerProj)(k),N=N||this.getView().getProjection().getCode(),k=k||this.transformProjection,k=k||N,(0,B.transformGeo)(this,T,N,k)}},{key:"transformPoint",value:function(T,N,k){return k&&(0,lt.registerProj)(k),N&&(0,lt.registerProj)(N),N=N||this.getView().getProjection().getCode(),k=k||this.transformProjection,(0,B.transformPoint)(this,T,N,k)}},{key:"setLocate",value:function(T){T&&(!T.src&&(T.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADN0lEQVRYR8WWTWwNURTH/+e+Sr15lIXGR1g3VERY0BmiFV+JBfHxpm0aIWzsfFYiEWUh8dGKnY02mkbfPBEWFlgg6ZuhGxJRiVhYEITYtH0zqt4cmeervDsz9z2L3uX7n/M/v3vOvfcNYZIXTXJ9lAWwMpNflhAJHfCbAKqD7y8obkCINwC/BMSDgl9wHjennqhuTBnAsLwzAB8CUB1jPgZQl20mj6tAKAEYlvsUwFIVw98xhOt2WkvH5cQCGFb+I0C1cUZSXQEiEsDIulkwdlZU/FdSDEQogGG5BwF0/VfxP8mHbFO7KPOSAqzo45rEFG+IgPmhAET3wP7Lok6iDswbwmIZeFsYT9YPttHwvzFSgAZrdKOAuBNq6PMppyXVMVHXLe8kgf/6baLuw9/0yJx2VwlA7893kKCTUgBGu92snZdpRsY9CsI5mcYS6GLzpEZZrwfMu2WaoET9QLr6hUxbnR1b5HNhSA7OV+zm1D6lDhhZ9wEYjSVGREN2Ork46mAaWe85mOtLC9HdnJncpASgW+41AlokhbyRseHaZ7vm5GUQS3o/pKZX13wCkJQUyuRMrcRTOgLdci8QcFg6S+CYY2rSOeuW207A2ZC8TsfUjih1oMHKbxWgm2GtFlXJeQPb6f1EffUNnut/896F5RBhWy6tlXhKO7Chl1P5au8tgJlRV1EIKr4Dvs91obcmOOkMJ9esGTKvqJcweLkORB04dY1222byalkAK/o+11RNSd4HsFy9UGkkg7sdM7U3dDRR5nr2y2Zi/3alAEx4VfiKtYNtWjBO6Yr9O15luWcZaK8EgoDWnKn1R+XGAjT2vJ46rs0ORtFQHgRfts3U/ricWIDAwMh+WQ/278WZ/daZh4TQmgbSFDxKkUsJoAhx3TsNn0/EGQY6AzscU7uhEqsMgI4OoS9sv0/AmihjJlxy0pry9VUHCLqQcVcy8R0CzQg50oMYya+399aOqOw+iCkLIEjQM6N7iES3pECB/MK6XMv0h6rFKwIIkmRXk4AjOVPrLKd4xQA/boZ7C4wtPw9dv2NqreUW/y+AxmvDs8YTVT++G0fzTeXMfSJo2Wegkl1G5Uw6wHeXphEwQy3ECAAAAABJRU5ErkJggg=="),T.id=T.id?T.id:"locate-marker",this.addMarker(T))}},{key:"addMarker",value:function(T){if(T=JSON.parse((0,g.default)(T)),T){var N=T.point,k=T.inCrs,$=this.transformPoint(N,k,this.getView().getProjection().getCode());T.point=$,(0,B.addMarker)(this,T),T.flashSrc&&this.flashMarker(T),T.isLocate&&this.animate({center:$,zoom:T.zoom,inCrs:k})}}},{key:"flashMarker",value:function(T){var N=this;this.lastMarkerOptions&&(clearInterval(this.markerFlashTimer),(0,B.getMarkerById)(this,this.lastMarkerOptions.id)&&(0,B.addMarker)(this,this.lastMarkerOptions)),T=JSON.parse((0,g.default)(T)),this.lastMarkerOptions=JSON.parse((0,g.default)(T));var k=T.src,$=T.flashCount?T.flashCount*2:8,ht=0;this.markerFlashTimer=setInterval(function(){(0,I.default)(this,N),ht<$?(ht%2===0?T.src=T.flashSrc:T.src=k,ht++):(T.src=T.flashSrc,clearInterval(this.markerFlashTimer)),(0,B.addMarker)(this,T)}.bind(this),300)}},{key:"addMarkers",value:function(T){if(T&&T.data&&T.data.length>0){var N=St(T.data),k;try{for(N.s();!(k=N.n()).done;){var $=k.value;$.inCrs=T.inCrs,this.addMarker($)}}catch(ct){N.e(ct)}finally{N.f()}if(T.isLocate){var ht=65565,q=65565,j=0,W=0,Z=St(T.data),z;try{for(Z.s();!(z=Z.n()).done;){var X=z.value,K=X.point;ht=Math.min(ht,K[0]),j=Math.max(j,K[0]),q=Math.min(q,K[1]),W=Math.max(W,K[1])}}catch(ct){Z.e(ct)}finally{Z.f()}var vt=[ht,q,j,W];T.inCrs&&((0,lt.registerProj)(T.inCrs),vt=(0,yt.transformExtent)(vt,T.inCrs,this.getView().getProjection().getCode())),this.getView().fit(vt,this.getSize())}}}},{key:"removeMarker",value:function(T){var N=this.getLayerById("locateLayer").getSource(),k=N.getFeatureById(T);N.removeFeature(k)}},{key:"clearMarker",value:function(){this.markerFlashTimer&&clearInterval(this.markerFlashTimer);var T=this.getLayerById("locateLayer").getSource();T.clear()}},{key:"markerClick",value:function(T,N){var k=this,$=this.getLayerById("locateLayer").getSource();this.on("click",function(ht){(0,I.default)(this,k);var q=this.getCoordinateFromPixel(ht.pixel),j=N||36,W=[j,j],Z=(0,et.getForViewAndSize)(q,this.getView().getResolution(),0,W),z=$.getFeaturesInExtent(Z);T(z)}.bind(this))}},{key:"getExtent",value:function(){var T=this.getCoordinateFromPixel([0,0]),N=this.getCoordinateFromPixel(this.getSize());return[T[0],N[1],N[0],T[1]]}},{key:"filterLayer",value:function(T,N,k){(0,B.filterLayer)(this,T,N,k)}},{key:"getCenter",value:function(T){return(0,B.getCenterOfMass)(T)}},{key:"refresh",value:function(){var T=this.getView().getResolution();this.getView().setResolution(T-1e-11)}},{key:"parseWktArray",value:function(T,N){var k=new Y.default,$=[],ht=St(T),q;try{for(ht.s();!(q=ht.n()).done;){var j=q.value,W=k.readFeature(j);$.push(W)}}catch(z){ht.e(z)}finally{ht.f()}var Z=new st.default().writeFeatures($);return N&&(Z=(0,B.addCrsToGeojson)(Z,N)),Z}},{key:"unionFeature",value:function(T){var N=this,k;return T.forEach(function($){(0,I.default)(this,N);var ht=$.getGeometry(),q=ht.getCoordinates(),j=null;ht instanceof ut.MultiPolygon?j=(0,it.multiPolygon)(q):j=(0,it.polygon)(q),k?k=(0,gt.default)(k,j):k=j}.bind(this)),new st.default().readFeature(k.geometry)}},{key:"getFeatureByWkt",value:function(T,N){var k=new Y.default,$;return N&&((0,lt.registerProj)(N),$={dataProjection:N,featureProjection:this.getView().getProjection().getCode()}),k.readFeature(T,$)}},{key:"unionFeatureFromWktArray",value:function(T,N){if(T&&T.length>0){var k=[],$=St(T),ht;try{for($.s();!(ht=$.n()).done;){var q=ht.value;k.push(this.getFeatureByWkt(q,N))}}catch(j){$.e(j)}finally{$.f()}return this.unionFeature(k)}}},{key:"parseWkt",value:function(T,N){var k=new Y.default,$=k.readFeature(T),ht=new st.default().writeFeature($);return N&&(ht=(0,B.addCrsToGeojson)(ht,N)),ht}},{key:"convertWkt",value:function(T){!T.type&&(T=JSON.parse(T));var N=new st.default().readFeatures(T),k=new Y.default,$=[],ht=St(N),q;try{for(ht.s();!(q=ht.n()).done;){var j=q.value,W=k.writeFeature(j);$.push(W)}}catch(X){ht.e(X)}finally{ht.f()}var Z=T.crs,z;return Z&&(z=Z.properties.name.replace("urn:ogc:def:crs:","").replace("::",":")),{wkt:$,inCrs:z}}},{key:"writeFeatureToWkt",value:function(T,N){var k={};if(N){(0,lt.registerProj)(N);var $=this.getView().getProjection().getCode();k={dataProjection:N,featureProjection:$}}if(T instanceof Array)if(T.length>0){var ht=this.unionFeature(T);return new Y.default(k).writeFeature(ht,k)}else return"";else return new Y.default(k).writeFeature(T,k)}},{key:"getFeatureById",value:function(T){return(0,B.getFeatureById)(this,T)}},{key:"updateFeatureById",value:function(T){return(0,B.updateFeatureById)(this,T)}},{key:"clearTempFeature",value:function(){var T=this.getLayerById(ft.BASE_DRAWLAYER_ID);T&&T.getSource().clear();var N=this.getLayerById("popTempLayer");N&&N.getSource().clear()}},{key:"nearestPointOnGeometry",value:function(T,N){return(0,B.nearestPointOnGeometry)(T,N)}},{key:"addTrail",value:function(T){(0,B.addTrail)(this,T)}},{key:"getFullFigure",value:function(){var T=this.initFullFigureConfig(),N=[],k="";if(T.isShow)N[0]=T.minCoordinateX,N[1]=T.minCoordinateY,N[2]=T.maxCoordinateX,N[3]=T.maxCoordinateY;else{k=T.layerName;var $=this.getLayers().getArray(),ht=St($),q;try{for(ht.s();!(q=ht.n()).done;){var j=q.value;j.values_.layerTag===k&&(N=j.values_.initExtent)}}catch(W){ht.e(W)}finally{ht.f()}}this.getView().fit(N,this.getSize())}},{key:"clearConver",value:function(){this.maskManager.clear()}},{key:"addConver",value:function(T){this.maskManager.addMask(T)}},{key:"addLayer",value:function(T){T instanceof dt.default?(0,E.default)((0,m.default)(V.prototype),"addLayer",this).call(this,T):this.layerManager.addLayer(T)}},{key:"removeLayer",value:function(T){T instanceof dt.default?(0,E.default)((0,m.default)(V.prototype),"removeLayer",this).call(this,T):this.layerManager.removeLayer(T)}},{key:"setLayerIndex",value:function(T,N){this.layerManager.setLayerIndex(T,N)}},{key:"setLayerTop",value:function(T){this.layerManager.setLayerTop(T)}},{key:"setLayerOpacity",value:function(T,N){this.layerManager.setLayerOpacity(T,N)}},{key:"addTargetLayer",value:function(T){var N=T.layerTag,k=T.layerFilter,$=this.layerManager.getLayerDataById(N);!$&&($=this.layerManager.getLayerDataByLayerTag(N)),$&&($.filter=k,$=JSON.parse((0,g.default)($)),$.isFit=!!T.isZoom,h.default.$emit("setLayerChecked",$,!![],null,this.mapid))}},{key:"registerProj",value:function(T){(0,lt.registerProj)(T)}}]),V}(p.default),xt=tt;b.default=xt},78221:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(38006)),S=c(e(28866)),v=c(e(22777)),u=c(e(42762)),a=e(91873),s=e(3206),F=e(36374),g=function(){function I(x){(0,v.default)(this,I),this.map=x,this.defaultSymbol={type:"polygon",styleOptions:{fill:!![],color:"rgb(255, 255, 255)",opacity:.2,outline:!![],outlineColor:"rgb(1, 191, 255)",outlineWidth:1,outlineOpacity:1}}}return(0,u.default)(I,[{key:"bindLayer",value:function(E){var f,l,d=this;this.keyField=E==null||(f=E.values_)===null||f===void 0||(l=f.info)===null||l===void 0?void 0:l.keyField,E.setLayerStyle=function(O){if(O){E.symbol=O;var m=d.getLayerStyle(E.symbol);m&&E.setStyle(m)}else E.setStyle(new a.Style({fill:new a.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new a.Stroke({color:"rgb(1, 191, 255)",width:1}),image:new a.Circle({radius:3,fill:new a.Fill({color:"rgb(1, 191, 255)"}),stroke:new a.Stroke({color:"#FED976",width:1})})}))},E.getLayerStyle=function(){return E.symbol?E.symbol:d.defaultSymbol},E.setLayerStyle()}},{key:"getLayerStyle",value:function(E){var f=this,l=new w.default,d=new w.default;return E?function(O,m){var p=O.getProperties(),o=f.keyField?p[f.keyField]:null,h;o&&d.get(o)?h=d.get(o):(h=(0,F.getRealSymbol)(E,p),o&&h&&d.set(o,h));var r=h.symbol,y=h.filedIndex;if(y&&!f.isDynamicStyle(r)&&l.get(y))return l.get(y);var R=(0,s.getStyle)(E.type,r,O,m,(0,S.default)(f));return y&&l.set(y,R),R}:(0,s.getStyle)("polygon",this.defaultSymbol)}},{key:"isDynamicStyle",value:function(E){return E.distanceDisplayCondition_far||E.distanceDisplayCondition_near?!![]:E.label&&(E.label.distanceDisplayCondition_far||E.label.distanceDisplayCondition_near)?!![]:![]}}]),I}();b.default=g},53071:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(22777)),S=c(e(42762)),v=e(92086),u=c(e(66016)),a=e(74183),s=c(e(61483)),F=e(72233),g=function(){function x(){(0,w.default)(this,x)}return(0,S.default)(x,[{key:"generate",value:function(f){for(var l=(0,F.get)("EPSG:4490"),d=l.getExtent(),O=d?(0,v.getTopLeft)(d):[-180,90],m=(0,F.getTransform)("EPSG:4326",l),p=d?(0,v.getWidth)(d):(0,v.getWidth)((0,v.applyTransform)([-180,-90,180,90],m)),o=[],h=[],r=1;r<19;r++)o[r]=p/(256*Math.pow(2,r)),h[r]=r;var y=new u.default({origin:O,resolutions:o,matrixIds:h}),R=new a.XYZ({crossOrigin:"anonymous",projection:"EPSG:4490",tileGrid:y,url:f.url+"?x={x}&y={y}&l={z}&styleId="+f.visibleLayers[0]+"&tilesize=256",wrapX:!![]}),D=new s.default({id:f.id,info:f,layerTag:f.layerTag,opacity:1,zIndex:f.mapIndex,isFit:typeof f.isFit=="boolean"?f.isFit:![],source:R});return D}}]),x}(),I=g;b.default=I},97152:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(99245)),S=c(e(22777)),v=c(e(42762)),u=e(83062),a=e(74183),s=e(67040),F=c(e(83266)),g=function(){function x(E,f){return(0,S.default)(this,x),this.createArcGISTileLayer(E,f)}return(0,v.default)(x,[{key:"createArcGISTileLayer",value:function(f,l){var d=this,O=(0,s.appendPath)(f.url,l.extUrl);f.authkey&&(O=(0,s.addParamToUrl)(O,"authkey",f.authkey));var m;l.zDirection>0&&(m=function(h,r){var y=d.extractXYZFromURL(r),R=y.x,D=y.y,B=y.z;B=Number(B)+l.zDirection,h.getImage().src=h.key.replace("{x}",R).replace("{y}",D).replace("{z}",B)});var p=new u.Tile({id:f.id,info:f,layerTag:f.layerTag,opacity:f.opacity,zIndex:f.mapIndex,initExtent:l.initExtent,minZoom:f.minZoom,maxZoom:f.maxZoom,minResolution:f.minResolution,maxResolution:f.maxResolution?f.maxResolution:l.resolutions[0]*2,isFit:typeof f.isFit=="boolean"?f.isFit:![],source:new a.XYZ({projection:l.projection,crossOrigin:"anonymous",declutter:!![],tileGrid:new F.default({extent:l.extent,origin:l.origin,resolutions:l.resolutions,tileSize:l.tileSize}),url:O,tileLoadFunction:m})});return p}},{key:"extractXYZFromURL",value:function(f){var l=/\/(\d+)\/(\d+)\/(\d+)$/,d=f.match(l);if(d){var O=(0,w.default)(d,4),m=O[1],p=O[2],o=O[3];return{x:o,y:p,z:m}}return null}}]),x}(),I=g;b.default=I},35569:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(66273)),S=c(e(22777)),v=c(e(42762)),u=e(83062),a=e(74183),s=e(67040),F=e(44537),g=function(){function x(E,f){return(0,S.default)(this,x),this.createArcGISDynamicLayer(E,f)}return(0,v.default)(x,[{key:"createArcGISDynamicLayer",value:function(f,l){var d={LAYERS:"show:"+f.visibleLayers.join(",")};f.layerDefs&&(d.layerDefs=typeof f.layerDefs=="string"?f.layerDefs:(0,w.default)(f.layerDefs)),f.authkey&&(d.authkey=f.authkey);var O=typeof f.isFit=="boolean"?f.isFit:![];a.ImageArcGISRest.prototype.getRequestUrl_=function(p,o,h,r,y){var R=r.getCode().split(/:(?=\d+$)/).pop();y.SIZE=o[0]+","+o[1],y.BBOX=p.join(","),y.BBOXSR=R,y.IMAGESR=R,y.DPI=Math.round(90*h);var D=this.url_,B=D.indexOf("ImageServer")>-1?"exportImage":"export",lt=(0,s.appendPath)(D,B);return(0,F.appendParams)(lt,y)};var m=new u.Image({id:f.id,layerTag:f.layerTag,opacity:f.opacity,zIndex:f.mapIndex,info:f,initExtent:l.initExtent,minZoom:f.minZoom,maxZoom:f.maxZoom,minResolution:f.minResolution,maxResolution:f.maxResolution,isFit:O,source:new a.ImageArcGISRest({crossOrigin:"anonymous",ratio:1,imageLoadFunction:function(o,h){h.indexOf("jsp?")!==-1?o.getImage().src=h.replace("&","?"):o.getImage().src=h},url:f.url,params:d})});return m}}]),x}(),I=g;b.default=I},93235:function(H,b,e){"use strict";var c=e(49500),w=e(20314),S=e(26352),v=e(40639),u=e(43586),a=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var s=a(e(28866)),F=a(e(69033)),g=a(e(5146)),I=a(e(42579)),x=a(e(22777)),E=a(e(42762)),f=e(83062),l=e(74183),d=a(e(27482)),O=a(e(15550)),m=a(e(63379)),p=e(42584),o=e(15398),h=a(e(78221)),r=a(e(59037)),y=e(46769),R=a(e(60075)),D=a(e(90698));function B(ut,dt){var it=typeof v<"u"&&u(ut)||ut["@@iterator"];if(!it){if(Array.isArray(ut)||(it=lt(ut))||dt&&ut&&typeof ut.length=="number"){it&&(ut=it);var gt=0,Pt=function(){};return{s:Pt,n:function(){return gt>=ut.length?{done:!![]}:{done:![],value:ut[gt++]}},e:function(wt){throw wt},f:Pt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ft=!![],St=![],At;return{s:function(){it=it.call(ut)},n:function(){var wt=it.next();return ft=wt.done,wt},e:function(wt){St=!![],At=wt},f:function(){try{!ft&&it.return!=null&&it.return()}finally{if(St)throw At}}}}function lt(ut,dt){var it;if(ut){if(typeof ut=="string")return st(ut,dt);var gt=w(it=Object.prototype.toString.call(ut)).call(it,8,-1);if(gt==="Object"&&ut.constructor&&(gt=ut.constructor.name),gt==="Map"||gt==="Set")return S(ut);if(gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gt))return st(ut,dt)}}function st(ut,dt){(dt==null||dt>ut.length)&&(dt=ut.length);for(var it=0,gt=new Array(dt);it<dt;it++)gt[it]=ut[it];return gt}var Y=0,yt=function(){function ut(dt,it,gt){(0,x.default)(this,ut),this.map=dt,this.styleManager=new h.default((0,s.default)(this));var Pt=[],ft=B(it.visibleLayers),St;try{for(ft.s();!(St=ft.n()).done;){var At=St.value,It=this.createArcGISFeatureLayer(it,At,gt);Pt.push(It)}}catch(_){ft.e(_)}finally{ft.f()}var wt=new d.default({id:it.id,info:it,layerTag:it.layerTag,opacity:it.opacity,zIndex:it.mapIndex,initExtent:gt.initExtent,minResolution:it.minResolution,maxResolution:it.maxResolution,isFit:typeof it.isFit=="boolean"?it.isFit:![],layers:Pt});return wt}return(0,E.default)(ut,[{key:"createArcGISFeatureLayer",value:function(it,gt,Pt){var ft=this,St=this,At=new O.default,It=(0,s.default)(this).getView().getProjection().getCode(),wt=It.split(":")[1],_=[],rt;(0,s.default)(this).on("moveend",function(){if((0,I.default)(this,ft),_.length>0)for(var ot=_.length-1;ot>=0;ot--){var nt=_[ot];if((0,s.default)(this).getView().getResolution()>=nt.resolution)return;if((0,F.default)(_).call(_,ot,1),rt){var V=this.createTurfPolygonFromExtent(nt.extent),G=(0,R.default)(rt,V);if(G&&(0,D.default)(G)===(0,D.default)(G))continue}var T=B(nt.features),N;try{for(T.s();!(N=T.n()).done;){var k=N.value;tt.removeFeature(k)}}catch($){T.e($)}finally{T.f()}tt.removeLoadedExtent(nt.extent)}}.bind(this));var Q=(0,s.default)(this).getView().getMaxResolution(),tt=new l.Vector({loader:function(nt,V,G,T,N){var k=it.layerDefs;if(k){var $=typeof k=="string"?JSON.parse(k):k;this.where=$[gt]}var ht=this.where?this.where:"1=1",q=it.url+"/"+gt+"/query/?f=json&where="+encodeURIComponent(ht)+"&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+nt[0]+',"ymin":'+nt[1]+',"xmax":'+nt[2]+',"ymax":'+nt[3]+',"spatialReference":{"wkid":'+wt+"}}")+"&geometryType=esriGeometryEnvelope&inSR="+wt+"&outFields=*&outSR="+wt;it.authkey&&(q+="&authkey="+it.authkey),m.default.ajax({url:q,dataType:"jsonp",success:function(W){var Z=this,z=tt.where?tt.where:"1=1";if(ht===z)if(W.error)T([]),c.error(W.error.message+`
`+W.error.details.join(`
`));else{var X=At.readFeatures(W,{featureProjection:G});if(T(),X.length>0&&(tt.addFeatures((0,s.default)(X).call(X,function(K){var vt,ct;(0,I.default)(this,Z);var Mt=(vt=K.get(it.keyField))!==null&&vt!==void 0?vt:Y++;return K.setId((0,g.default)(ct="".concat(gt,".")).call(ct,Mt)),K}.bind(this))),X.length===Pt.maxRecordCount)){_.push({extent:nt,resolution:V,features:X});return}rt=St.unionFeature(rt,nt)}},error:function(){tt.removeLoadedExtent(nt),N()}})},strategy:(0,p.tile)((0,o.createXYZ)({maxResolution:Q,tileSize:512}))});tt.updateParams=function(ot){var nt=ot.layerDefs,V=JSON.parse(nt);this.where=V[gt],this.refresh()};var xt=new f.Vector({id:it.id,info:it,layerTag:it.layerTag,zIndex:it.mapIndex,initExtent:Pt.initExtent,minZoom:it.minZoom,maxZoom:it.maxZoom,minResolution:it.minResolution,maxResolution:it.maxResolution,isFit:typeof it.isFit=="boolean"?it.isFit:![],source:tt});return this.styleManager.bindLayer(xt),it.symbol&&xt.setLayerStyle(it.symbol),xt}},{key:"unionFeature",value:function(it,gt){return it?(0,r.default)(it,this.createTurfPolygonFromExtent(gt)):this.createTurfPolygonFromExtent(gt)}},{key:"createTurfPolygonFromExtent",value:function(it){var gt=[];return gt.push([it[0],it[1]]),gt.push([it[0],it[3]]),gt.push([it[2],it[3]]),gt.push([it[2],it[1]]),gt.push([it[0],it[1]]),(0,y.polygon)([gt])}}]),ut}(),et=yt;b.default=et},73925:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(22777)),S=c(e(42762)),v=e(83062),u=e(81534),a=e(72233),s=e(74183),F=e(10563),g=c(e(60031)),I=e(97054),x=c(e(66016)),E=function(){function l(d,O){return(0,w.default)(this,l),this.createArcGISWMTSLayer(d,O)}return(0,S.default)(l,[{key:"createArcGISWMTSLayer",value:function(O,m){var p=new g.default,o=p.read(m.xml),h=o.Contents.TileMatrixSet[0];h.SupportedCRS="EPSG:454700";var r=h.SupportedCRS;(0,u.registerProj)(r);var y=(0,I.optionsFromCapabilities)(o,{layer:O.visibleLayers[0]}),R=[];if(y.tileGrid.extent_&&y.tileGrid.extent_.length>0)R=y.tileGrid.extent_;else try{var D=(0,F.LoadXmlText)(D),B=D.getElementsByTagName("ows:LowerCorner")[0].textContent.split(" "),lt=D.getElementsByTagName("ows:UpperCorner")[0].textContent.split(" ");R=[B[0]*1,B[1]*1,lt[0]*1,lt[1]*1]}catch{}var st=(0,a.get)(y.projection.code_);st.setExtent(R),y.format="image/png",y.crossOrigin="anonymous";var Y=new s.WMTS({urls:y.urls,requestEncoding:y.requestEncoding,layer:y.layer,tileLoadFunction:function(ut,dt){dt.indexOf("jsp?")!==-1&&dt.indexOf("token")===-1&&dt.indexOf("tk")===-1?ut.getImage().src=dt.replace("&","?"):ut.getImage().src=dt},matrixSet:y.matrixSet,format:y.format,crossOrigin:y.crossOrigin,projection:st,tileGrid:new x.default({origin:O.origin?O.origin:y.tileGrid.origins_[0],resolutions:O.resolutions?O.resolutions:y.tileGrid.resolutions_,matrixIds:O.matrixIds?O.matrixIds:y.tileGrid.matrixIds_,extent:R}),style:y.style,wrapX:!![]}),yt=new v.Tile({id:O.id,info:O,layerTag:O.layerTag,opacity:O.opacity,zIndex:O.mapIndex,source:Y,isFit:typeof O.isFit=="boolean"?O.isFit:![],initExtent:R});return yt.projection=r,yt}}]),l}(),f=E;b.default=f},20736:function(H,b,e){"use strict";var c=e(20314),w=e(26352),S=e(40639),v=e(43586),u=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var a=u(e(28866)),s=u(e(5146)),F=u(e(85208)),g=u(e(22466)),I=u(e(42579)),x=u(e(22777)),E=u(e(42762)),f=u(e(63206)),l=e(29615),d=u(e(78221)),O=u(e(27482)),m=e(71766),p=u(e(82293));function o(B,lt){var st=typeof S<"u"&&v(B)||B["@@iterator"];if(!st){if(Array.isArray(B)||(st=h(B))||lt&&B&&typeof B.length=="number"){st&&(B=st);var Y=0,yt=function(){};return{s:yt,n:function(){return Y>=B.length?{done:!![]}:{done:![],value:B[Y++]}},e:function(gt){throw gt},f:yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var et=!![],ut=![],dt;return{s:function(){st=st.call(B)},n:function(){var gt=st.next();return et=gt.done,gt},e:function(gt){ut=!![],dt=gt},f:function(){try{!et&&st.return!=null&&st.return()}finally{if(ut)throw dt}}}}function h(B,lt){var st;if(B){if(typeof B=="string")return r(B,lt);var Y=c(st=Object.prototype.toString.call(B)).call(st,8,-1);if(Y==="Object"&&B.constructor&&(Y=B.constructor.name),Y==="Map"||Y==="Set")return w(B);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return r(B,lt)}}function r(B,lt){(lt==null||lt>B.length)&&(lt=B.length);for(var st=0,Y=new Array(lt);st<lt;st++)Y[st]=B[st];return Y}var y=0,R=function(){function B(lt,st,Y){(0,x.default)(this,B),this.map=lt,this.styleManager=new d.default((0,a.default)(this));var yt=[],et=o(st.visibleLayers),ut;try{for(et.s();!(ut=et.n()).done;){var dt=ut.value,it=this.createPbfFeatureLayer(st,dt,Y);yt.push(it)}}catch(Pt){et.e(Pt)}finally{et.f()}var gt=new O.default({id:st.id,info:st,layerTag:st.layerTag,opacity:st.opacity,zIndex:st.mapIndex,initExtent:Y.initExtent,isFit:typeof st.isFit=="boolean"?st.isFit:![],layers:yt});return gt}return(0,E.default)(B,[{key:"createPbfFeatureLayer",value:function(st,Y,yt){var et=yt.initExtent,ut=(0,a.default)(this).getView().getMaxResolution();st.maxResolution?ut=st.maxResolution:st.maxScale&&(ut=(0,a.default)(this).getResolutionFromScale(st.maxScale));var dt=new f.default({projection:(0,a.default)(this).getView().getProjection(),tileSize:[256,256],crossOrigin:"anonymous",wrapX:!![],url:st.url+"{x}{y}{z}",maxResolution:ut,tileLoadFunction:function(Pt){var ft=dt.where?dt.where:"1=1";st.where=ft,Pt.setLoader(function(St,At,It){var wt=this;(0,l.queryFeatureByPbf)({data:st,visibleLayer:Y,f:st.supportedQueryFormat?st.supportedQueryFormat:"json",extent:St,geometry:St,resolution:At,projection:It,returnExceededLimitFeatures:![]}).then(function(_){var rt=this;(0,I.default)(this,wt);var Q=st.layerDefs;if(Q){var tt=typeof Q=="string"?JSON.parse(Q):Q;dt.where=tt[Y]}var xt=dt.where?dt.where:"1=1";if(ft!==xt){Pt.setFeatures([]);return}var ot=[];if(_ instanceof Array){var nt=o(_),V;try{for(nt.s();!(V=nt.n()).done;){var G=V.value,T=new m.GeoJSON().readFeatures(G);ot=(0,s.default)(ot).call(ot,T)}}catch(k){nt.e(k)}finally{nt.f()}}else ot=new m.GeoJSON().readFeatures(_);if(ot&&ot.length>0){if(!it.get("attrKeys")){var N=(0,F.default)(ot[0].getProperties());N=(0,g.default)(N).call(N,function(k){return(0,I.default)(this,rt),!(k==="geometry"||k==="shape"||k==="shape_leng"||k==="SHAPE__Length"||k==="SHAPE__Area")}.bind(this)),it.set("attrKeys",N)}Pt.setFeatures((0,a.default)(ot).call(ot,function(k){var $,ht;(0,I.default)(this,rt);var q=($=k.get(st.keyField))!==null&&$!==void 0?$:y++;return k.setId((0,s.default)(ht="".concat(Y,".")).call(ht,q)),k}.bind(this)))}else Pt.setFeatures([])}.bind(this))})}});dt.updateParams=function(gt){var Pt=gt.layerDefs,ft=JSON.parse(Pt);this.where=ft[Y],this.refresh()};var it=new p.default({id:st.id,info:st,layerTag:st.layerTag,zIndex:st.mapIndex,initExtent:et,minZoom:st.minZoom,maxZoom:st.maxZoom,isFit:typeof st.isFit=="boolean"?st.isFit:![],declutter:!![],updateWhileInteracting:!![],source:dt});return this.styleManager.bindLayer(it),st.symbol&&it.setLayerStyle(st.symbol),it.set("initExtent",et),it}}]),B}(),D=R;b.default=D},23032:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(28866)),S=c(e(22777)),v=c(e(42762)),u=e(67040),a=c(e(83266)),s=c(e(33964)),F=c(e(63206)),g=c(e(26988)),I=c(e(78221)),x=function(){function f(l,d,O){return(0,S.default)(this,f),this.map=l,this.styleManager=new I.default((0,w.default)(this)),this.createArcGISVectorTiledLayer(d,O)}return(0,v.default)(f,[{key:"createArcGISVectorTiledLayer",value:function(d,O){var m=(0,u.appendPath)(d.url,O.extUrl);d.authkey&&(m=(0,u.addParamToUrl)(m,"authkey",d.authkey));var p=new s.default({id:d.id,info:d,layerTag:d.layerTag,opacity:d.opacity,zIndex:d.mapIndex,initExtent:O.initExtent,minZoom:d.minZoom,maxZoom:d.maxZoom,minResolution:d.minResolution,maxResolution:d.maxResolution?d.maxResolution:O.resolutions[0]*2,isFit:typeof d.isFit=="boolean"?d.isFit:![],source:new F.default({projection:O.projection,format:new g.default,crossOrigin:"anonymous",tileGrid:new a.default({extent:O.extent,origin:O.origin,resolutions:O.resolutions,tileSize:O.tileSize}),url:m})});return this.styleManager.bindLayer(p),d.symbol&&p.setLayerStyle(d.symbol),p}}]),f}(),E=x;b.default=E},24758:function(H,b,e){"use strict";var c=e(49500),w=e(20314),S=e(26352),v=e(40639),u=e(43586),a=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var s=a(e(78756)),F=a(e(66273)),g=a(e(28866)),I=a(e(5146)),x=a(e(38006)),E=a(e(42579)),f=a(e(22777)),l=a(e(42762)),d=e(83062),O=a(e(27482)),m=a(e(15550)),p=e(74183),o=a(e(63379)),h=e(65816),r=a(e(1865)),y=a(e(35569));function R(Y,yt){var et=typeof v<"u"&&u(Y)||Y["@@iterator"];if(!et){if(Array.isArray(Y)||(et=D(Y))||yt&&Y&&typeof Y.length=="number"){et&&(Y=et);var ut=0,dt=function(){};return{s:dt,n:function(){return ut>=Y.length?{done:!![]}:{done:![],value:Y[ut++]}},e:function(St){throw St},f:dt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var it=!![],gt=![],Pt;return{s:function(){et=et.call(Y)},n:function(){var St=et.next();return it=St.done,St},e:function(St){gt=!![],Pt=St},f:function(){try{!it&&et.return!=null&&et.return()}finally{if(gt)throw Pt}}}}function D(Y,yt){var et;if(Y){if(typeof Y=="string")return B(Y,yt);var ut=w(et=Object.prototype.toString.call(Y)).call(et,8,-1);if(ut==="Object"&&Y.constructor&&(ut=Y.constructor.name),ut==="Map"||ut==="Set")return S(Y);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return B(Y,yt)}}function B(Y,yt){(yt==null||yt>Y.length)&&(yt=Y.length);for(var et=0,ut=new Array(yt);et<yt;et++)ut[et]=Y[et];return ut}var lt=function(){function Y(yt){(0,f.default)(this,Y),this.map=yt}return(0,l.default)(Y,[{key:"generate",value:function(et,ut){var dt=this,it=this;return new s.default(function(gt){var Pt=this;if((0,E.default)(this,dt),et.visibleLayers&&et.visibleLayers.length>0){var ft=[],St=[],At=R(et.visibleLayers),It;try{for(At.s();!(It=At.n()).done;){var wt=It.value,_=this.createArcGISFeatureLayer(et,wt,ut);St.push(_)}}catch(tt){At.e(tt)}finally{At.f()}var rt=JSON.parse((0,F.default)(et));rt.mapIndex=rt.mapIndex-.1;var Q=new y.default((0,g.default)(this)).generate(rt);St.push(Q),s.default.all(St).then(function(tt){var xt=this;if((0,E.default)(this,Pt),tt&&tt.length>0){tt.forEach(function(V){(0,E.default)(this,xt),ft=(0,I.default)(ft).call(ft,V)}.bind(this));var ot=et.isZoomToLayer?et.isZoomToLayer:![],nt=new O.default({id:et.id,info:et,layerTag:et.layerTag,opacity:et.opacity,zIndex:et.mapIndex,initExtent:ut.initExtent,minResolution:et.minResolution,maxResolution:et.maxResolution,isFit:ot,layers:ft,updateParams:function(G,T){(0,E.default)(this,xt),it.updateParams(et,G,T)}.bind(this)});gt(nt)}}.bind(this)).catch(function(tt){(0,E.default)(this,Pt),c.error(tt)}.bind(this))}}.bind(this))}},{key:"createArcGISFeatureLayer",value:function(et,ut,dt){var it=this;return new s.default(function(gt){(0,E.default)(this,it);var Pt=this,ft=[],St=new x.default,At=new m.default,It=(0,g.default)(this).getView().getProjection().getCode(),wt=It.split(":")[1],_=dt.initExtent,rt=et.zjFilter?et.zjFilter:"1=1",Q=typeof et.isFit=="boolean"?et.isFit:![],tt=et.url+"/"+ut+"/query/?f=json&where="+encodeURIComponent(rt)+"&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+_[0]+',"ymin":'+_[1]+',"xmax":'+_[2]+',"ymax":'+_[3]+',"spatialReference":{"wkid":4326}}')+"&geometryType=esriGeometryEnvelope&inSR=4326&outFields=*&outSR="+wt;et.authkey&&(tt+="&authkey="+et.authkey),o.default.ajax({url:tt,dataType:"jsonp",success:function(ot){var nt=this;if(ot.error)c.error(ot.error.message+`
`+ot.error.details.join(`
`));else{var V=At.readFeatures(ot,{featureProjection:It});V.length>0&&(V.forEach(function(G){(0,E.default)(this,nt);var T=G.getProperties(),N=T.fscale?T.fscale:T.FSCALE,k=T.xzqmc?T.xzqmc:T.XZQMC,$=T.name?T.name:T.NAME;if(k=k||$,!St.get(N)){var ht=new p.Vector,q=new d.Vector({id:et.id,layerTag:et.layerTag,opacity:et.opacity,zIndex:et.mapIndex,info:et,initExtent:dt.initExtent,minResolution:et.minResolution,maxResolution:et.maxResolution,isFit:Q,source:ht});ft.push(q),St.set(N,q)}var j=(0,h.getLabelStyle)(et.zjOptions,k);G.setStyle(j),et.translate&&et.translate[k]&&G.getGeometry().setCoordinates(et.translate[k]),St.get(N).getSource().addFeature(G)}.bind(this)),Pt.changeVisible(St),(0,g.default)(Pt).on("moveend",function(){Pt.changeVisible(St)}))}gt(ft)},error:function(){gt(ft)}})}.bind(this))}},{key:"changeVisible",value:function(et){var ut=(0,g.default)(this).getView().getZoom();et.forEach(function(dt,it){it?ut>=it?dt.setVisible(!![]):dt.setVisible(![]):dt.setVisible(!![])})}},{key:"updateParams",value:function(et,ut,dt){et.zjFilter=ut,et.filter=dt;var it=r.default.getInstance((0,g.default)(this));it.removeLayer(et),it.addLayer(et)}}]),Y}(),st=lt;b.default=st},65816:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.getLabelStyle=void 0;var w=c(e(42579)),S=e(91873),v=c(e(86220)),u=void 0,a=function(F,g){(0,w.default)(this,u);var I=F&&F.fontSize?F.fontSize:18,x=F&&F.fontColor?F.fontColor:"#333",E=F&&F.strokeColor?F.strokeColor:"#fff",f=new S.Style({text:new v.default({font:I+"px serif",text:g,fill:new S.Fill({color:x}),stroke:new S.Stroke({color:E,width:3}),offsetY:-(I/2+8)})});return f}.bind(void 0);b.getLabelStyle=a},30149:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.BaiduImage=s;var w=c(e(61483)),S=c(e(28715)),v=c(e(83266)),u=e(72233),a=c(e(5621));function s(){var F=[-2003772637e-2,-1247410417e-2,2003772637e-2,1247410417e-2],g=new u.Projection({code:"baidu",extent:F,units:"m"});(0,u.addProjection)(g),(0,u.addCoordinateTransforms)("EPSG:4326",g,a.default.ll2bmerc,a.default.bmerc2ll),(0,u.addCoordinateTransforms)("EPSG:3857",g,a.default.smerc2bmerc,a.default.bmerc2smerc);for(var I=new Array(19),x=0;x<19;++x)I[x]=Math.pow(2,18-x);var E=new w.default({source:new S.default({projection:"baidu",maxZoom:18,wrapX:!![],tileUrlFunction:function(l){var d=l[1],O=-l[2]-1,m=l[0];return d<0&&(d="M"+-d),O<0&&(O="M"+-O),"http://shangetu"+parseInt(Math.random()*10)+".map.bdimg.com/it/u=x="+d+";y="+O+";z="+m+";v=009;type=sate&fm=46&udt=20170606"},tileGrid:new v.default({resolutions:I,origin:[0,0]})})});return E}},21401:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.BaiduRoad=F;var w=c(e(28866)),S=c(e(61483)),v=c(e(28715)),u=c(e(83266)),a=e(72233),s=c(e(5621));function F(){var g,I=[-2003772637e-2,-1247410417e-2,2003772637e-2,1247410417e-2],x=new a.Projection({code:"baidu",extent:I,units:"m"});(0,a.addProjection)(x),(0,a.addCoordinateTransforms)("EPSG:4326",x,s.default.ll2bmerc,s.default.bmerc2ll),(0,a.addCoordinateTransforms)("EPSG:3857",x,s.default.smerc2bmerc,s.default.bmerc2smerc);for(var E=new Array(19),f=0;f<19;++f)E[f]=Math.pow(2,18-f);var l=(0,w.default)(g=[0,1,2,3]).call(g,function(O){return"http://maponline"+O+".bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles=sl&showtext=1&v=083&udt=20191119"}),d=new S.default({source:new v.default({projection:"baidu",maxZoom:18,wrapX:!![],tileUrlFunction:function(m){var p=m[1],o=-m[2]-1,h=m[0],r=(p<<h)+o,y=r%l.length;return y=y<0?y+l.length:y,p<0&&(p="M"+-p),o<0&&(o="M"+-o),l[y].replace("{x}",p).replace("{y}",o).replace("{z}",h)},tileGrid:new u.default({resolutions:E,origin:[0,0]})})});return d}},96529:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.BaiduVector=F;var w=c(e(28866)),S=c(e(61483)),v=c(e(28715)),u=c(e(83266)),a=e(72233),s=c(e(5621));function F(){var g,I=[-2003772637e-2,-1247410417e-2,2003772637e-2,1247410417e-2],x=new a.Projection({code:"baidu",extent:I,units:"m"});(0,a.addProjection)(x),(0,a.addCoordinateTransforms)("EPSG:4326",x,s.default.ll2bmerc,s.default.bmerc2ll),(0,a.addCoordinateTransforms)("EPSG:3857",x,s.default.smerc2bmerc,s.default.bmerc2smerc);for(var E=new Array(19),f=0;f<19;++f)E[f]=Math.pow(2,18-f);var l=(0,w.default)(g=[0,1,2,3]).call(g,function(O){return"http://maponline"+O+".bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles=pl&scaler=1&udt=20191119"}),d=new S.default({source:new v.default({projection:"baidu",maxZoom:18,wrapX:!![],tileUrlFunction:function(m){var p=m[1],o=-m[2]-1,h=m[0],r=(p<<h)+o,y=r%l.length;return y=y<0?y+l.length:y,p<0&&(p="M"+-p),o<0&&(o="M"+-o),l[y].replace("{x}",p).replace("{y}",o).replace("{z}",h)},tileGrid:new u.default({resolutions:E,origin:[0,0]})})});return d}},95459:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(28866)),S=c(e(22777)),v=c(e(42762)),u=c(e(63206)),a=c(e(26988)),s=c(e(83266)),F=c(e(78221)),g=c(e(82293)),I=function(){function E(f,l,d){return(0,S.default)(this,E),this.map=f,this.styleManager=new F.default((0,w.default)(this)),this.createVectorTiledLayer(l,d)}return(0,v.default)(E,[{key:"createVectorTiledLayer",value:function(l,d){var O=d.WMTSSourceOptions,m=[],p=new g.default({id:l.id,info:l,layerTag:l.layerTag,opacity:l.opacity,zIndex:l.mapIndex,minZoom:l.minZoom,maxZoom:l.maxZoom,initExtent:d.initExtent,isFit:typeof l.isFit=="boolean"?l.isFit:![],source:new u.default({projection:(0,w.default)(this).getView().getProjection().getCode(),crossOrigin:"anonymous",format:new a.default,wrapX:!![],extent:O.tileGrid.extent_,tileGrid:new s.default({tileSize:O.tileGrid.tileSizes_[0],origin:O.tileGrid.origins_[0],resolutions:O.tileGrid.resolutions_,matrixIds:O.tileGrid.matrixIds_}),url:d.requestUrl})});return d.initExtent?m=d.initExtent:O.tileGrid.extent_&&(m=O.tileGrid.extent_),this.styleManager.bindLayer(p),l.symbol&&p.setLayerStyle(l.symbol),p.set("initExtent",m),p}}]),E}(),x=I;b.default=x},67625:function(H,b,e){"use strict";var c=e(49500),w=e(29870),S=e(87879),v=e(83393),u=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var a=u(e(28866)),s=u(e(22466)),F=u(e(42579)),g=u(e(22777)),I=u(e(42762)),x=e(83062),E=e(74183),f=u(e(51462)),l=u(e(49162)),d=u(e(78221)),O=e(42584),m=h(e(23675)),p=u(e(83605));function o(R){if(typeof S!="function")return null;var D=new S,B=new S;return(o=function(st){return st?B:D})(R)}function h(R,D){if(!D&&R&&R.__esModule)return R;if(R===null||w(R)!=="object"&&typeof R!="function")return{default:R};var B=o(D);if(B&&B.has(R))return B.get(R);var lt={},st=Object.defineProperty&&v;for(var Y in R)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(R,Y)){var yt=st?v(R,Y):null;yt&&(yt.get||yt.set)?Object.defineProperty(lt,Y,yt):lt[Y]=R[Y]}return lt.default=R,B&&B.set(R,lt),lt}var r=function(){function R(D,B,lt){return(0,g.default)(this,R),this.map=D,this.styleManager=new d.default((0,a.default)(this)),this.createGeoServerWFSLayer(B,lt)}return(0,I.default)(R,[{key:"createGeoServerWFSLayer",value:function(B,lt){var st=this,Y=new E.Vector({format:new l.default,loader:function(ut,dt,it,gt,Pt){var ft=this;(0,F.default)(this,st);var St=(0,s.default)(Y)?(0,s.default)(Y):(0,s.default)(B)?(0,s.default)(B):null,At={srsName:it.getCode(),featureTypes:B.visibleLayers,bbox:ut,geometryName:B.geoStr||"the_geom",outputFormat:"application/json"};St&&(typeof St=="string"?At.filter=new p.default().read(St):At.filter=this.parseFilter(St));var It=new f.default().writeGetFeature(At),wt=B.url;B.authkey&&(wt=wt+"?authkey="+B.authkey),fetch(wt,{method:"POST",body:new XMLSerializer().serializeToString(It)}).then(function(_){return(0,F.default)(this,ft),_.json()}.bind(this)).then(function(_){(0,F.default)(this,ft);var rt=(0,s.default)(Y)?(0,s.default)(Y):(0,s.default)(B)?(0,s.default)(B):null;if(St===rt){var Q=new l.default().readFeatures(_);Y.addFeatures(Q),gt(Q)}}.bind(this)).catch(function(){(0,F.default)(this,ft),Y.removeLoadedExtent(ut),Pt()}.bind(this))}.bind(this),strategy:O.bbox});Y.updateParams=function(et){this.filter=et.CQL_FILTER,this.refresh()};var yt=new x.Vector({id:B.id,info:B,layerTag:B.layerTag,opacity:B.opacity,zIndex:B.mapIndex,initExtent:lt.initExtent,minZoom:B.minZoom,maxZoom:B.maxZoom,minResolution:B.minResolution,maxResolution:B.maxResolution,isFit:typeof B.isFit=="boolean"?B.isFit:![],source:Y});return this.styleManager.bindLayer(yt),B.symbol&&yt.setLayerStyle(B.symbol),yt}},{key:"parseFilter",value:function(B){if(!B.type){c.warn("type\u5B57\u6BB5\u4E0D\u5B58\u5728");return}if(!B.param){c.warn("param\u5B57\u6BB5\u4E0D\u5B58\u5728");return}var lt=[];switch(B.type.toLowerCase()){case"and":for(var st=0;st<B.param.length;st++){var Y=this.parseFilter(B.param[st]);lt.push(Y)}return m.and.apply(null,lt);case"or":for(var yt=0;yt<B.param.length;yt++){var et=this.parseFilter(B.param[yt]);lt.push(et)}return m.or.apply(null,lt);case"not":for(var ut=0;ut<B.param.length;ut++){var dt=this.parseFilter(B.param[ut]);lt.push(dt)}return m.not.apply(null,lt);case"=":return m.equalTo(B.param[0],B.param[1]);case"!==":return m.notEqualTo(B.param[0],B.param[1]);case">":return m.greaterThan(B.param[0],B.param[1]);case"<":return m.lessThan(B.param[0],B.param[1]);case">=":return m.greaterThanOrEqualTo(B.param[0],B.param[1]);case"<=":return m.lessThanOrEqualTo(B.param[0],B.param[1]);case"between":return m.between(B.param[0],B.param[1],B.param[2])}}}]),R}(),y=r;b.default=y},15126:function(H,b,e){"use strict";var c=e(20314),w=e(26352),S=e(40639),v=e(43586),u=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var a=u(e(22466)),s=u(e(42579)),F=u(e(22777)),g=u(e(42762)),I=e(83062),x=u(e(77019)),E=e(74183),f=e(10563);function l(o,h){var r=typeof S<"u"&&v(o)||o["@@iterator"];if(!r){if(Array.isArray(o)||(r=d(o))||h&&o&&typeof o.length=="number"){r&&(o=r);var y=0,R=function(){};return{s:R,n:function(){return y>=o.length?{done:!![]}:{done:![],value:o[y++]}},e:function(Y){throw Y},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!![],B=![],lt;return{s:function(){r=r.call(o)},n:function(){var Y=r.next();return D=Y.done,Y},e:function(Y){B=!![],lt=Y},f:function(){try{!D&&r.return!=null&&r.return()}finally{if(B)throw lt}}}}function d(o,h){var r;if(o){if(typeof o=="string")return O(o,h);var y=c(r=Object.prototype.toString.call(o)).call(r,8,-1);if(y==="Object"&&o.constructor&&(y=o.constructor.name),y==="Map"||y==="Set")return w(o);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return O(o,h)}}function O(o,h){(h==null||h>o.length)&&(h=o.length);for(var r=0,y=new Array(h);r<h;r++)y[r]=o[r];return y}var m=function(){function o(h,r){return(0,F.default)(this,o),this.createImageWMSLayer(h,r)}return(0,g.default)(o,[{key:"createImageWMSLayer",value:function(r,y){var R=this,D=y||{},B=D.groupinfo,lt;if(r.url.indexOf("?")>-1)lt=r.url;else{var st=r.url.lastIndexOf("/");lt=r.url.substring(0,st);var Y=r.url.substring(st+1,r.url.length).split(":")[0];lt=lt+"/"+Y+"/wms"}var yt={LAYERS:r.visibleLayers,VERSION:"1.1.0"};(0,a.default)(r)&&(yt.CQL_FILTER=(0,a.default)(r)),r.authkey&&(yt.authkey=r.authkey);var et=new I.Image({id:r.id,info:r,groupinfo:B,layerTag:r.layerTag,opacity:r.opacity,zIndex:r.mapIndex,initExtent:y.initExtent,minZoom:r.minZoom,maxZoom:r.maxZoom,minResolution:r.minResolution,maxResolution:r.maxResolution,isFit:typeof r.isFit=="boolean"?r.isFit:![],source:new E.ImageWMS({crossOrigin:"anonymous",url:lt,params:yt})});if(!r.geoStr){var ut={typeName:r.selectLayer?r.selectLayer:r.visibleLayers[0],service:"wfs",Request:"DescribeFeatureType",authkey:r.authkey};x.default.get(r.url,{params:ut,timeout:5e3,headers:{"content-type":"application/xml"}}).then(function(dt){(0,s.default)(this,R);var it;try{it=(0,f.LoadXmlText)(dt.headers?dt.data:dt)}catch{return}var gt=it.getElementsByTagName("xsd:sequence")[0].children,Pt=l(gt),ft;try{for(Pt.s();!(ft=Pt.n()).done;){var St,At=ft.value;((St=At.getAttribute("type"))===null||St===void 0?void 0:St.indexOf("gml"))>-1&&(r.geoStr=At.getAttribute("name"))}}catch(It){Pt.e(It)}finally{Pt.f()}}.bind(this))}return et}}]),o}(),p=m;b.default=p},77597:function(H,b,e){"use strict";var c=e(52909),w=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var S=w(e(52909)),v=w(e(22777)),u=w(e(42762)),a=e(83062),s=e(74183),F=e(42422),g=w(e(60031)),I=w(e(63379)),x=e(72233),E=function(){function l(d,O,m){return(0,v.default)(this,l),this.map=d,this.createWMTSLayer(O,m)}return(0,u.default)(l,[{key:"createWMTSLayer",value:function(O,m){var p=[],o=new g.default,h;try{h=o.read(m.CapabilitiesXml)}catch{throw new Error("\u5F53\u524D\u7528\u6237\u6CA1\u6743\u9650,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458")}var r=new a.Tile({id:O.id,info:O,layerTag:O.layerTag,opacity:O.opacity,zIndex:O.mapIndex,minZoom:O.minZoom,maxZoom:O.maxZoom,minResolution:O.minResolution,maxResolution:O.maxResolution,isFit:typeof O.isFit=="boolean"?O.isFit:![],source:new s.WMTS(m.WMTSSourceOptions)});if(m.WGS84BoundingBox)p=(0,x.transformExtent)(m.WGS84BoundingBox,"EPSG:4326",m.projection);else if(r.getSource().getTileGrid().extent_)p=r.getSource().getTileGrid().extent_;else{for(var y,R=new DOMParser().parseFromString(m.CapabilitiesXml,"text/xml"),D=(0,S.default)(y=(0,I.default)(R)).call(y,"Layer"),B,lt=0;lt<D.length&&((0,I.default)(D[lt]).children("ows\\:Identifier")[0].innerHTML.toString()===O.visibleLayers[0].toString()&&(B=(0,I.default)(D[lt]).children("TileMatrixSetLink").children("TileMatrixSet")[0].innerHTML),!B);lt++);var st=r.getSource().getTileGrid().origins_[0],Y=r.getSource().getTileGrid().resolutions_[0],yt=h.Contents.TileMatrixSet,et=c(F)(yt,function(Pt){return Pt.Identifier===B}),ut=et.TileMatrix[0].MatrixHeight,dt=et.TileMatrix[0].MatrixWidth,it=et.TileMatrix[0].TileWidth,gt=et.TileMatrix[0].TileHeight;p=[st[0],st[1]-Y*ut*gt,st[0]+Y*dt*it,st[1]]}return r.getSource().urls.length>0&&(r.getSource().urls[0].indexOf("apikey")!==-1||r.getSource().urls[0].indexOf("newmap")!==-1)&&(p=[117.6,35.54,120.87,37.48]),r.set("initExtent",(0,x.transformExtent)(p,m.projection,"EPSG:4326")),r}}]),l}(),f=E;b.default=f},83567:function(H,b,e){"use strict";var c=e(65557),w=e(20314),S=e(26352),v=e(40639),u=e(43586),a=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=b.LegendEvent=void 0;var s=a(e(28866)),F=a(e(38006)),g=a(e(78756)),I=a(e(5146)),x=a(e(67038)),E=a(e(22466)),f=a(e(42579)),l=a(e(42762)),d=a(e(22777)),O=a(e(30044)),m=a(e(99085)),p=a(e(34009)),o=a(e(10299)),h=a(e(12207));function r(Y,yt){var et=typeof v<"u"&&u(Y)||Y["@@iterator"];if(!et){if(Array.isArray(Y)||(et=y(Y))||yt&&Y&&typeof Y.length=="number"){et&&(Y=et);var ut=0,dt=function(){};return{s:dt,n:function(){return ut>=Y.length?{done:!![]}:{done:![],value:Y[ut++]}},e:function(St){throw St},f:dt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var it=!![],gt=![],Pt;return{s:function(){et=et.call(Y)},n:function(){var St=et.next();return it=St.done,St},e:function(St){gt=!![],Pt=St},f:function(){try{!it&&et.return!=null&&et.return()}finally{if(gt)throw Pt}}}}function y(Y,yt){var et;if(Y){if(typeof Y=="string")return R(Y,yt);var ut=w(et=Object.prototype.toString.call(Y)).call(et,8,-1);if(ut==="Object"&&Y.constructor&&(ut=Y.constructor.name),ut==="Map"||ut==="Set")return S(Y);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return R(Y,yt)}}function R(Y,yt){(yt==null||yt>Y.length)&&(yt=Y.length);for(var et=0,ut=new Array(yt);et<yt;et++)ut[et]=Y[et];return ut}function D(Y){var yt=B();return function(){var ut=(0,p.default)(Y),dt;if(yt){var it=(0,p.default)(this).constructor;dt=c(ut,arguments,it)}else dt=ut.apply(this,arguments);return(0,m.default)(this,dt)}}function B(){if(typeof Reflect>"u"||!c)return![];if(c.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(c(Boolean,[],function(){})),!![]}catch{return![]}}var lt=function(Y){(0,O.default)(et,Y);var yt=D(et);function et(ut,dt){var it;return(0,d.default)(this,et),it=yt.call(this,ut),it.legend=dt,it}return(0,l.default)(et)}(h.default);b.LegendEvent=lt;var st=function(){function Y(yt){var et=(0,s.default)(yt),ut=yt.layer,dt=yt.data;(0,d.default)(this,Y),this.map=et,this.layer=ut,this.data=dt,this.lastZoom=-1,!this.layer.legendMap&&(this.layer.legendMap=new F.default)}return(0,l.default)(Y,[{key:"addLegendChangeListener",value:function(){var et=this;this.layer.on("prerender",function(){var ut=this;(0,f.default)(this,et);var dt=Math.round((0,s.default)(this).getView().getZoom());dt!==this.lastZoom&&(this.lastZoom=dt,this.layer.legendMap.get(dt)?this.layer.dispatchEvent(new lt("changeLegend",this.layer.legendMap.get(dt))):this.getLegend(dt).then(function(it){(0,f.default)(this,ut),this.layer.legendMap.set(dt,it),this.layer.dispatchEvent(new lt("changeLegend",it))}.bind(this)))}.bind(this))}},{key:"getLegend",value:function(et){var ut=this,dt=this.data.geowayInfo;return new g.default(function(it){var gt,Pt,ft,St=this;(0,f.default)(this,ut);var At=(0,I.default)(gt=(0,I.default)(Pt=(0,I.default)(ft="".concat(dt.hostUrl,"/styleInfo/")).call(ft,dt.serverName,"/")).call(Pt,dt.styleId,"/")).call(gt,et,"/legend.json");o.default.get(At).then(function(It){var wt,_=this;(0,f.default)(this,St);var rt=It==null||(wt=It.data)===null||wt===void 0?void 0:wt.legends,Q=[];if(rt){var tt=new F.default,xt=r(rt),ot;try{for(xt.s();!(ot=xt.n()).done;){var nt,V=ot.value,G=void 0;if(V.query){var T=/AND \/?$/.exec(V.query);G=T?V.query.substring(0,T.index):V.query}!tt.get(V.layerId)&&tt.set(V.layerId,[]);var N={id:V.id,pid:V.pid,path:V.path,label:V.name,filter:G,imageData:(nt=V.ico)===null||nt===void 0?void 0:nt.replace("data:image/png;base64,",""),contentType:"image/png",height:20,width:20};tt.get(V.layerId).push(N)}}catch(z){xt.e(z)}finally{xt.f()}var k=r((0,x.default)(tt).call(tt)),$;try{for(k.s();!($=k.n()).done;){var ht=$.value;if(this.data.visibleLayers&&this.data.visibleLayers.indexOf(ht)===-1)return;var q=tt.get(ht),j=void 0;q.length>1?(q=(0,E.default)(q).call(q,function(z){return(0,f.default)(this,_),(0,E.default)(z)}.bind(this)),j=!![]):j=![];var W={layerId:ht,isSingleLegend:tt.get(ht).length===1,isExistFilter:j,layerName:ht,legend:q};Q.push(W)}}catch(z){k.e(z)}finally{k.f()}}var Z={isShow:!![],title:this.data.label,layers:Q,type:"arcgis",info:this.data,id:this.data.id,isShowChildFilter:!![]};it(Z)}.bind(this))}.bind(this))}}]),Y}();b.default=st},88095:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(28866)),S=c(e(22777)),v=c(e(42762)),u=e(83062),a=e(74183),s=e(67040),F=c(e(83567)),g=function(){function x(E,f,l){return(0,S.default)(this,x),this.map=E,this.createLayer(f,l)}return(0,v.default)(x,[{key:"createLayer",value:function(f,l){var d=l||{},O=d.requestUrl,m=l.geowayInfo||{},p=m.typeName,o=new u.Tile({id:f.id,info:f,layerTag:f.layerTag,initExtent:f.initExtent,opacity:f.opacity,zIndex:f.mapIndex,isFit:typeof f.isFit=="boolean"?f.isFit:![],source:new a.XYZ({crossOrigin:"anonymous",declutter:!![],url:O,projection:"EPSG:4490"})});return o.filter=function(h){O=(0,s.addParamToUrl)(O,"control",h),this.getSource().setUrl(O),this.getSource().refresh()},p==="vmap"&&new F.default({map:(0,w.default)(this),layer:o,data:f}).addLegendChangeListener(),o}}]),x}(),I=g;b.default=I},42553:function(H,b,e){"use strict";var c=e(20314),w=e(26352),S=e(40639),v=e(43586),u=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var a=u(e(22777)),s=u(e(42762)),F=e(81534),g=e(11154);function I(d,O){var m=typeof S<"u"&&v(d)||d["@@iterator"];if(!m){if(Array.isArray(d)||(m=x(d))||O&&d&&typeof d.length=="number"){m&&(d=m);var p=0,o=function(){};return{s:o,n:function(){return p>=d.length?{done:!![]}:{done:![],value:d[p++]}},e:function(D){throw D},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=!![],r=![],y;return{s:function(){m=m.call(d)},n:function(){var D=m.next();return h=D.done,D},e:function(D){r=!![],y=D},f:function(){try{!h&&m.return!=null&&m.return()}finally{if(r)throw y}}}}function x(d,O){var m;if(d){if(typeof d=="string")return E(d,O);var p=c(m=Object.prototype.toString.call(d)).call(m,8,-1);if(p==="Object"&&d.constructor&&(p=d.constructor.name),p==="Map"||p==="Set")return w(d);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return E(d,O)}}function E(d,O){(O==null||O>d.length)&&(O=d.length);for(var m=0,p=new Array(O);m<O;m++)p[m]=d[m];return p}var f=function(){function d(O){return(0,a.default)(this,d),this.generate(O)}return(0,s.default)(d,[{key:"generate",value:function(m){var p=m.url,o=g.GisqOfflineMbTilesLayer.getMedata(p);typeof o=="string"&&(o=JSON.parse(o)),(0,F.registerProj)(o.srs);var h=(0,F.getProj)(o.srs),r=o.origin.split(","),y=o.bounds.split(","),R=o.resolution.split(";"),D=[],B=I(R),lt;try{for(B.s();!(lt=B.n()).done;){var st=lt.value;if(st&&st.length>0){var Y=parseFloat(st.split("_")[0]);D.push(Y)}}}catch(it){B.e(it)}finally{B.f()}for(var yt in r)r[yt]=parseFloat(r[yt]);for(var et in y)y[et]=parseFloat(y[et]);var ut=new g.GisqOfflineMbTilesLayer({path:p,projection:h,resolutions:D,origin:r,tileType:"arcgis"}),dt=ut.getLayer();return dt.set("id",m.id),dt.set("info",m),dt.set("layerTag",m.layerTag),dt.setOpacity(m.opacity),dt.setZIndex(m.mapIndex),dt.set("isFit",m.isFit),dt.set("initExtent",y),dt}}]),d}(),l=f;b.default=l},82293:function(H,b,e){"use strict";var c=e(65557),w=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var S=w(e(22777)),v=w(e(42762)),u=w(e(30044)),a=w(e(99085)),s=w(e(34009)),F=w(e(33964)),g=w(e(66054));function I(l){var d=x();return function(){var m=(0,s.default)(l),p;if(d){var o=(0,s.default)(this).constructor;p=c(m,arguments,o)}else p=m.apply(this,arguments);return(0,a.default)(this,p)}}function x(){if(typeof Reflect>"u"||!c)return![];if(c.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(c(Boolean,[],function(){})),!![]}catch{return![]}}var E=function(l){(0,u.default)(O,l);var d=I(O);function O(m){(0,S.default)(this,O);var p=m||{};return d.call(this,p)}return(0,v.default)(O,[{key:"createRenderer",value:function(){return new g.default(this)}}]),O}(F.default),f=E;b.default=f},66054:function(H,b,e){"use strict";var c=e(65557),w=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var S=w(e(22777)),v=w(e(42762)),u=w(e(30044)),a=w(e(99085)),s=w(e(34009)),F=w(e(12697)),g=e(75907),I=e(8530),x=w(e(56646));function E(m){var p=f();return function(){var h=(0,s.default)(m),r;if(p){var y=(0,s.default)(this).constructor;r=c(h,arguments,y)}else r=h.apply(this,arguments);return(0,a.default)(this,r)}}function f(){if(typeof Reflect>"u"||!c)return![];if(c.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(c(Boolean,[],function(){})),!![]}catch{return![]}}var l={image:[x.default.POLYGON,x.default.CIRCLE,x.default.LINE_STRING,x.default.IMAGE,x.default.TEXT],hybrid:[x.default.POLYGON,x.default.LINE_STRING],vector:[]},d=function(m){(0,u.default)(o,m);var p=E(o);function o(h){return(0,S.default)(this,o),p.call(this,h)}return(0,v.default)(o,[{key:"renderTileImage_",value:function(r,y){var R=this.getLayer(),D=r.getReplayState(R),B=R.getRevision(),lt=r.executorGroups[(0,g.getUid)(R)];D.renderedTileRevision=B;var st=r.wrappedTileCoord,Y=st[0],yt=R.getSource(),et=y.pixelRatio,ut=y.viewState,dt=ut.projection,it=yt.getTileGridForProjection(dt),gt=it.getResolution(r.tileCoord[0]),Pt=y.pixelRatio/r.wantedResolution*gt,ft=it.getResolution(Y),St=r.getContext(R);et=Math.max(et,Pt/et);var At=yt.getTilePixelSize(Y,et,dt);St.canvas.width=At[0],St.canvas.height=At[1];var It=et/Pt;if(It!==1){var wt=(0,I.reset)(this.tmpTransform_);(0,I.scale)(wt,It,It),St.setTransform.apply(St,wt)}var _=it.getTileCoordExtent(st,this.tmpExtent),rt=Pt/ft,Q=(0,I.reset)(this.tmpTransform_);(0,I.scale)(Q,rt,-rt),(0,I.translate)(Q,-_[0],-_[3]);for(var tt=0,xt=lt.length;tt<xt;++tt){var ot=lt[tt];ot.execute(St,It,Q,0,!![],l[R.getRenderMode()])}D.renderedTileResolution=r.wantedResolution}}]),o}(F.default),O=d;b.default=O},18187:function(H,b,e){"use strict";var c=e(65557),w=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var S=w(e(22777)),v=w(e(42762)),u=w(e(53144)),a=w(e(30044)),s=w(e(99085)),F=w(e(34009)),g=e(74183),I=e(75907),x=w(e(10257));function E(d){var O=f();return function(){var p=(0,F.default)(d),o;if(O){var h=(0,F.default)(this).constructor;o=c(p,arguments,h)}else o=p.apply(this,arguments);return(0,s.default)(this,o)}}function f(){if(typeof Reflect>"u"||!c)return![];if(c.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(c(Boolean,[],function(){})),!![]}catch{return![]}}var l=function(d){(0,a.default)(m,d);var O=E(m);function m(p){var o;(0,S.default)(this,m);var h=p||{};return o=O.call(this,h),o.hideFeatureCollection_=new x.default,o.hideIdIndex_={},o}return(0,v.default)(m,[{key:"setFeatureVisible",value:function(o,h){if(h){var y=this.hideIdIndex_[o.toString()];y&&(this.addFeature(y),this.hideFeatureCollection_.remove(y),delete this.hideIdIndex_[o.toString()])}else{var r=this.getFeatureById(o);r&&(this.hideFeatureCollection_.push(r),this.hideIdIndex_[o.toString()]=r,this.removeFeature(r))}}},{key:"removeFeatureById",value:function(o){var h=this.getFeatureById(o);h&&(0,u.default)((0,F.default)(m.prototype),"removeFeature",this).call(this,h)}},{key:"getResolutions",value:function(){return(0,I.abstract)()}}]),m}(g.Vector);b.default=l},83841:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(22777)),S=c(e(42762)),v=e(83062),u=e(74183),a=e(72233),s=e(5621),F=e(92086),g=c(e(83266)),I=function(){function E(f,l){return(0,w.default)(this,E),this.map=f,this.generate(l)}return(0,S.default)(E,[{key:"generate",value:function(l){var d=[72.004,.8293,137.8347,55.8271];d=(0,F.applyTransform)(d,s.ll2bmerc);var O=new a.Projection({code:"baidu",extent:d,units:"m"});(0,a.addProjection)(O),(0,a.addCoordinateTransforms)("EPSG:4490",O,s.ll2bmerc,s.bmerc2ll),(0,a.addCoordinateTransforms)("EPSG:4326",O,s.ll2bmerc,s.bmerc2ll),(0,a.addCoordinateTransforms)("EPSG:3857",O,s.smerc2bmerc,s.bmerc2smerc);for(var m=[],p=0;p<=18;p++)m[p]=Math.pow(2,18-p);var o=new g.default({origin:[0,0],resolutions:m}),h=new u.TileImage({projection:O,tileGrid:o,tileUrlFunction:function(R){var D=Math.floor(Math.random()*4),B=R[0],lt=R[1],st=-R[2]-1;lt<0&&(lt="M"+-lt),st<0&&(st="M"+-st);var Y=l.url.replace("{s}",D).replace("{x}",lt).replace("{y}",st).replace("{z}",B);return Y}}),r=new v.Tile({id:l.id,info:l,layerTag:l.layerTag,initExtent:d,opacity:l.opacity,zIndex:l.mapIndex,isFit:typeof l.isFit=="boolean"?l.isFit:![],source:h});return r.set("initExtent",d),r}}]),E}(),x=I;b.default=x},18094:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var w=c(e(22777)),S=c(e(42762)),v=e(83062),u=e(74183),a=e(72233),s=e(5621),F=function(){function I(x,E){return(0,w.default)(this,I),this.map=x,this.generate(E)}return(0,S.default)(I,[{key:"generate",value:function(E){var f=[-20037508342789244e-9,-20037508342789244e-9,20037508342789244e-9,20037508342789244e-9],l=new a.Projection({code:"GCJ-02",extent:f,units:"m"});(0,a.addProjection)(l),(0,a.addCoordinateTransforms)("EPSG:4490",l,this.ll2gmerc,this.gmerc2ll),(0,a.addCoordinateTransforms)("EPSG:4326",l,this.ll2gmerc,this.gmerc2ll),(0,a.addCoordinateTransforms)("EPSG:3857",l,this.smerc2gmerc,this.gmerc2smerc);var d=new v.Tile({id:E.id,info:E,layerTag:E.layerTag,initExtent:f,opacity:E.opacity,zIndex:E.mapIndex,isFit:typeof E.isFit=="boolean"?E.isFit:![],source:new u.XYZ({crossOrigin:"anonymous",projection:l,url:E.url})}),O=d.getSource().getTileGrid().getExtent();return d.set("initExtent",O),d}},{key:"ll2gmerc",value:function(E,f,l){var d=s.datum.gcj02.fromWGS84(E,f,l);return(0,s.ll2smerc)(d,d,l)}},{key:"gmerc2ll",value:function(E,f,l){var d=(0,s.smerc2ll)(E,E,l);return s.datum.gcj02.toWGS84(d,f,l)}},{key:"smerc2gmerc",value:function(E,f,l){var d=(0,s.smerc2ll)(E,E,l);return d=s.datum.gcj02.fromWGS84(d,d,l),(0,s.ll2smerc)(d,d,l)}},{key:"gmerc2smerc",value:function(E,f,l){var d=(0,s.smerc2ll)(E,E,l);return d=s.datum.gcj02.toWGS84(d,d,l),(0,s.ll2smerc)(d,d,l)}}]),I}(),g=F;b.default=g},39600:function(H,b,e){"use strict";var c=e(20314),w=e(26352),S=e(40639),v=e(43586),u=e(85208),a=e(59791),s=e(22466),F=e(83393),g=e(5077),I=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var x=I(e(28866)),E=I(e(66273)),f=I(e(18853)),l=I(e(69257)),d=I(e(43389)),O=I(e(22777)),m=I(e(42762)),p=e(83062),o=e(74183),h=I(e(49162)),r=e(5775),y=I(e(27482)),R=I(e(47598)),D=e(91873),B=I(e(22305)),lt=e(91873);function st(gt,Pt){var ft=u(gt);if(a){var St=a(gt);Pt&&(St=s(St).call(St,function(At){return F(gt,At).enumerable})),ft.push.apply(ft,St)}return ft}function Y(gt){for(var Pt=1;Pt<arguments.length;Pt++){var ft=arguments[Pt]!=null?arguments[Pt]:{};Pt%2?st(Object(ft),!0).forEach(function(St){(0,d.default)(gt,St,ft[St])}):g?Object.defineProperties(gt,g(ft)):st(Object(ft)).forEach(function(St){Object.defineProperty(gt,St,F(ft,St))})}return gt}function yt(gt,Pt){var ft=typeof S<"u"&&v(gt)||gt["@@iterator"];if(!ft){if(Array.isArray(gt)||(ft=et(gt))||Pt&&gt&&typeof gt.length=="number"){ft&&(gt=ft);var St=0,At=function(){};return{s:At,n:function(){return St>=gt.length?{done:!![]}:{done:![],value:gt[St++]}},e:function(Q){throw Q},f:At}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It=!![],wt=![],_;return{s:function(){ft=ft.call(gt)},n:function(){var Q=ft.next();return It=Q.done,Q},e:function(Q){wt=!![],_=Q},f:function(){try{!It&&ft.return!=null&&ft.return()}finally{if(wt)throw _}}}}function et(gt,Pt){var ft;if(gt){if(typeof gt=="string")return ut(gt,Pt);var St=c(ft=Object.prototype.toString.call(gt)).call(ft,8,-1);if(St==="Object"&&gt.constructor&&(St=gt.constructor.name),St==="Map"||St==="Set")return w(gt);if(St==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(St))return ut(gt,Pt)}}function ut(gt,Pt){(Pt==null||Pt>gt.length)&&(Pt=gt.length);for(var ft=0,St=new Array(Pt);ft<Pt;ft++)St[ft]=gt[ft];return St}var dt=function(){function gt(Pt,ft,St){return(0,O.default)(this,gt),this.map=Pt,this.generate(ft,St)}return(0,m.default)(gt,[{key:"generate",value:function(ft,St){var At,It,wt,_,rt,Q,tt=St.geojson,xt=(0,x.default)(this).getView().getProjection().getCode(),ot={featureProjection:xt},nt=new h.default(ot).readFeatures(tt),V=[],G=yt(nt),T;try{for(G.s();!(T=G.n()).done;){var N=T.value;if(N.getGeometry()instanceof r.Point){var k=N.getProperties();V.push(new R.default(k))}else{var $=(0,x.default)(this).getCenter(N),ht=N.getProperties();ht.geometry=new r.Point($),V.push(new R.default(ht))}}}catch(ue){G.e(ue)}finally{G.f()}var q={id:ft.id,info:ft,layerTag:ft.layerTag,zIndex:ft.mapIndex,minResolution:ft.minResolution,maxResolution:ft.maxResolution,isFit:typeof ft.isFit=="boolean"?ft.isFit:![]},j=new o.Vector,W=new p.Vector(Y(Y({},q),{},{zIndex:ft.mapIndex+.1,source:j})),Z=new o.Vector,z=new p.Vector(Y(Y({},q),{},{source:Z})),X=[z,W],K=new y.default(Y(Y({},q),{},{layers:X}));if(nt&&nt.length>0){var vt=JSON.parse((0,E.default)(nt[0].getGeometry().getExtent())),ct=yt(nt),Mt;try{for(ct.s();!(Mt=ct.n()).done;){var J=Mt.value,Tt=J.getGeometry().getExtent();vt[0]=Math.min(vt[0],Tt[0]),vt[1]=Math.min(vt[1],Tt[1]),vt[2]=Math.max(vt[2],Tt[2]),vt[3]=Math.max(vt[3],Tt[3])}}catch(ue){ct.e(ue)}finally{ct.f()}K.set("initExtent",vt)}if(j.addFeatures(V),Z.addFeatures(nt),(At=ft.symbol)!==null&&At!==void 0&&(It=At.styleOptions)!==null&&It!==void 0&&(wt=It.label)!==null&&wt!==void 0&&wt.distanceDisplayCondition){var jt=ft.symbol.styleOptions.label,zt=this.getLevel(jt.distanceDisplayCondition_near),$t=this.getLevel(jt.distanceDisplayCondition_far);W.setMaxZoom(zt),W.setMinZoom($t)}if((_=ft.symbol)!==null&&_!==void 0&&(rt=_.styleOptions)!==null&&rt!==void 0&&rt.distanceDisplayCondition){var Jt=ft.symbol.styleOptions,Wt=this.getLevel(Jt.distanceDisplayCondition_near),te=this.getLevel(Jt.distanceDisplayCondition_far);z.setMaxZoom(Wt),z.setMinZoom(te)}var oe=new D.Style({fill:this.getFill("rgba(230,255,0,0.4)"),stroke:new D.Stroke({color:"rgba(255, 255, 0, 1)",width:5})});z.setStyle(oe);var ve=new D.Style({image:new lt.Circle({fill:this.getFill("#00000000"),stroke:new D.Stroke({color:"#00000000"})})});if(W.setStyle(ve),(Q=ft.symbol)!==null&&Q!==void 0&&Q.styleOptions){var Qt=yt(V),Dt;try{for(Qt.s();!(Dt=Qt.n()).done;){var le=Dt.value,Me=this.getStyle(ft.symbol,le.getProperties()),Xt=Me.label;if(Xt){var Se=Xt.field?Xt.field:Xt.text?Xt.text.replace("{","").replace("}",""):"";le.setStyle(new D.Style({text:new D.Text({text:le.getProperties()[Se]?le.getProperties()[Se]:Se,font:Xt.font_size+"px sans-serif",offsetX:Xt.pixelOffset?Xt.pixelOffset[0]:0,offsetY:Xt.pixelOffset?Xt.pixelOffset[1]:0,fill:new D.Fill({color:this.getColor(Xt.color,Xt.opacity)}),stroke:Xt.border?new D.Stroke({color:this.getColor(Xt.border_color,Xt.opacity)}):null,backgroundFill:Xt.background?this.getFill(this.getColor(Xt.background_color,Xt.background_opacity)):null}),image:Xt.image?new D.Icon({src:Xt.image}):null}))}}}catch(ue){Qt.e(ue)}finally{Qt.f()}var re=yt(nt),Vt;try{for(re.s();!(Vt=re.n()).done;){var ie=Vt.value,fe=void 0,qt=this.getStyle(ft.symbol,ie.getProperties());switch(ie.getGeometry().getType()){case"Point":case"MultiPoint":fe=new D.Style({image:qt.image?new D.Icon({src:qt.image}):null});break;case"LineString":case"MultiLineString":fe=new D.Style({stroke:new D.Stroke({color:qt.color?this.getColor(qt.color,qt.opacity):"rgba(255, 255, 0, 1)",width:qt.width?qt.width:5,lineDash:qt.lineType==="dash"?[5,10]:null})});break;case"Polygon":case"MultiPolygon":fe=new D.Style({stroke:new D.Stroke({color:qt.outline?this.getColor(qt.outlineColor,qt.opacity):"rgba(255, 255, 0, 1)",width:qt.outlineWidth?qt.outlineWidth:5}),fill:new D.Fill({color:(0,f.default)(qt)?this.getColor(qt.color,qt.opacity):"rgba(255, 255, 0, 0.4)"})});break}ie.setStyle(fe)}}catch(ue){re.e(ue)}finally{re.f()}}return K}},{key:"getStyle",value:function(ft,St){if(ft.styleFieldOptions&&ft.styleField){var At=St[ft.styleField];if(ft.styleFieldOptions[At]){var It=(0,l.default)(JSON.parse((0,E.default)(ft.styleOptions)),ft.styleFieldOptions[At]);return It.label=(0,l.default)(JSON.parse((0,E.default)(ft.styleOptions.label)),ft.styleFieldOptions[At].label),It}}return ft.styleOptions}},{key:"getFill",value:function(ft){return new D.Fill({color:ft})}},{key:"getColor",value:function(ft,St){return(0,B.default)(ft).alpha(St??1).hexa()}},{key:"getLevel",value:function(ft){return ft>48e6?0:ft>24e6?1:ft>12e6?2:ft>6e6?3:ft>3e6?4:ft>15e5?5:ft>75e4?6:ft>375e3?7:ft>187500?8:ft>93750?9:ft>46875?10:ft>23437.5?11:ft>11718.75?12:ft>5859.38?13:ft>2929.69?14:ft>1464.84?15:ft>732.42?16:ft>366.21?17:20}}]),gt}(),it=dt;b.default=it},19112:function(H,b,e){"use strict";var c=e(49500),w=e(52909),S=e(19534);Object.defineProperty(b,"__esModule",{value:!![]}),b.default=void 0;var v=S(e(22777)),u=S(e(42762)),a=e(83062),s=e(74183),F=e(42422),g=S(e(60031)),I=e(97054),x=e(92086),E=function(){function l(d,O){return(0,v.default)(this,l),this.createTDTLayer(d,O)}return(0,u.default)(l,[{key:"createTDTLayer",value:function(O,m){var p=[],o=new g.default,h=o.read(m.CapabilitiesXml),r=h.Contents.Layer,y=w(F)(r,function(it){return O.visibleLayers&&O.visibleLayers.length>0&&it.Identifier===O.visibleLayers[0]?O.visibleLayers[0]:O.name});p=y.WGS84BoundingBox;var R;try{var D=e(6278),B=o.read(D.default);R=(0,I.optionsFromCapabilities)(B,{layer:"vec",matrixSet:O.matrixSet,requestEncoding:"KVP"})}catch(it){throw c.error(it),new Error("\u56FE\u5C42"+O.label+"\u5207\u7247\u65B9\u6848\u6709\u8BEF")}R.crossOrigin="anonymous";for(var lt=0;lt<R.tileGrid.origins_.length;lt++)R.tileGrid.origins_[lt].reverse();R.urls[0]=O.url;for(var st=[],Y=[],yt=18,et=0;et<=yt;++et)st[et]=(0,x.getWidth)([-180,-90,180,90])/256/Math.pow(2,et),Y[et]=et,R.tileGrid.origins_[et]=R.tileGrid.origins_[0],R.tileGrid.tileSizes_[et]=[256,256];R.tileGrid.extent_=p,R.tileGrid.resolutions_=st,R.tileGrid.matrixIds_=Y,R.layer=O.visibleLayers[0],R.matrixSet=h.Contents.TileMatrixSet[0].Identifier,O.authkey&&(R.urls[0].indexOf("?")!==-1?R.urls[0]=R.urls[0]+"&authkey="+O.authkey:R.urls[0]=R.urls[0]+"?authkey="+O.authkey);var ut=O.mapIndex?O.mapIndex:-1;ut<0&&(ut=O.zIndex?O.zIndex:-1),O.isOverLimt&&(R.tileGrid.fullTileRanges_=[]);var dt=new a.Tile({id:O.id,info:O,layerTag:O.layerTag,opacity:1,initExtent:p,minResolution:O.minResolution,maxResolution:O.maxResolution,isFit:typeof O.isFit=="boolean"?O.isFit:![],source:new s.WMTS(R)});return ut>-1&&dt.setZIndex(ut),dt}}]),l}(),f=E;b.default=f},3206:function(H,b,e){"use strict";Object.defineProperty(b,"__esModule",{value:!![]}),b.defaultSymbol=void 0,b.getPolylineStyle=s,b.getStyle=a;var c=e(4778),w=e(36443),S=e(3262),v=e(91873),u={type:"polygon",styleOptions:{fill:!![],color:"rgb(255, 255, 255)",opacity:.2,outline:!![],outlineColor:"rgb(1, 191, 255)",outlineWidth:1,outlineOpacity:1}};b.defaultSymbol=u;function a(F,g,I,x,E){!g&&(g=u);var f=g.label,l;if(f){var d=f.field?f.field:f.text?f.text.replace("{","").replace("}",""):"";l=I.get(d)}switch(F){case"polygon":return(0,S.getPolygonStyle)(g,l,x,E);case"polyline":return s(g,l,x,E);case"point":return(0,w.getPointStyle)(g,l,x,E);default:return(0,S.getPolygonStyle)(g,l,x,E)}}function s(F,g,I,x){return new v.Style({stroke:new v.Stroke({color:(0,c.getColor)(F.color,F.opacity),width:F.width}),text:(0,c.createTextStyle)(F.label,g,I,x),zIndex:F.zIndex})}},49917:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var w=c(e(22777)),S=c(e(42762)),v=function(){function a(){(0,w.default)(this,a)}return(0,S.default)(a,[{key:"getCanvas",value:function(F,g){var I=document.createElement("canvas");return I.width=F,I.height=g,I}},{key:"getPixels",value:function(F){var g=this.getCanvas(F.width,F.height),I=g.getContext("2d");return I.drawImage(F,0,0),I.getImageData(0,0,g.width,g.height)}},{key:"filterImage",value:function(F,g){for(var I=[this.getPixels(g)],x=2;x<arguments.length;x++)I.push(arguments[x]);var E=F.apply(this,I),f=this.getCanvas(g.width,g.height),l=f.getContext("2d");return l.putImageData(E,0,0),f}}],[{key:"dark",value:function(F){for(var g=F.data,I=0;I<g.length;I+=4){var x=g[I],E=g[I+1],f=g[I+2],l=.2126*x+.7152*E+.0722*f;g[I]=g[I+1]=g[I+2]=l}for(var d=0;d<g.length;d+=4)g[d]=255-g[d]+20,g[d+1]=255-g[d+1]+20,g[d+2]=255-g[d+2]+20;return F}},{key:"blue",value:function(F){for(var g=F.data,I=0;I<g.length;I+=4){var x=g[I],E=g[I+1],f=g[I+2],l=.2126*x+.7152*E+.0722*f;g[I]=g[I+1]=g[I+2]=l,g[I]=55-g[I],g[I+1]=255-g[I+1],g[I+2]=305-g[I+2]}return F}}]),a}(),u=v;b.default=u},12989:function(H,b,e){"use strict";var c=e(19534);Object.defineProperty(b,"__esModule",{value:!0}),b.default=v;var w=c(e(15550)),S=c(e(49162));function v(u){var a="urn:ogc:def:crs:EPSG::"+u.spatialReference.wkid,s={type:"FeatureCollection",features:[],crs:{type:"name",properties:{name:a}}};if(u.features)for(var F=u.features.length,g=0;g<F;g++){var I=u.features[g],x=new w.default().readFeature(I),E=new S.default().writeFeature(x);s.features.push(JSON.parse(E))}return{featureCollection:s,exceededTransferLimit:u.exceededTransferLimit}}},2417:function(H,b,e){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=w;var c=e(47409);function w(l){var d;try{d=c.esriPBuffer.FeatureCollectionPBuffer.decode(new Uint8Array(l))}catch{throw new Error("arcgis-pbf\u89E3\u6790\u9519\u8BEF")}for(var O=d.queryResult.featureResult,m=O.transform,p=O.geometryType,o=O.objectIdFieldName,h=O.fields,r=0;r<h.length;r++){var y=h[r];y.keyName=x(y)}for(var R="urn:ogc:def:crs:EPSG::"+O.spatialReference.wkid,D={type:"FeatureCollection",features:[],crs:{type:"name",properties:{name:R}}},B=S(p),lt=O.features.length,st=0;st<lt;st++){var Y=O.features[st];D.features.push({type:"Feature",id:I(h,Y.attributes,o),properties:g(h,Y.attributes),geometry:B(Y,m)})}return{featureCollection:D,exceededTransferLimit:O.exceededTransferLimit}}function S(l){switch(l){case 3:return a;case 2:return u;case 0:return v;default:return a}}function v(l,d){return{type:"Point",coordinates:E(l.geometry.coords,d)}}function u(l,d){return{type:"LineString",coordinates:F(l.geometry.coords,d,0,l.geometry.lengths[0]*2)}}function a(l,d){var O=l.geometry.lengths.length,m={type:"Polygon",coordinates:[]};if(O===1)m.coordinates.push(F(l.geometry.coords,d,0,l.geometry.lengths[0]*2));else{m.type="MultiPolygon";for(var p=0,o=0;o<O;o++){var h=p+l.geometry.lengths[o]*2,r=F(l.geometry.coords,d,p,h);s(r)?m.coordinates.push([r]):m.coordinates.length>0&&m.coordinates[m.coordinates.length-1].push(r),p=h}}return m}function s(l){var d=0,O=0,m=l.length,p=l[O],o;for(O;O<m-1;O++)o=l[O+1],d+=(o[0]-p[0])*(o[1]+p[1]),p=o;return d>=0}function F(l,d,O,m){var p=[];if(l.length===0)return p;var o=l[O],h=l[O+1];p.push(E([o,h],d));for(var r=o,y=h,R=O+2;R<m;R=R+2){var D=f(r,l[R]),B=f(y,l[R+1]),lt=E([D,B],d);p.push(lt),r=D,y=B}return p}function g(l,d){for(var O={},m=0;m<l.length;m++){var p=l[m];d[m][d[m].valueType]?O[p.name]=d[m][d[m].valueType]:O[p.name]=null}return O}function I(l,d,O){for(var m=0;m<l.length;m++){var p=l[m];if(p.name===O)return d[m][d[m].valueType]}return null}function x(l){switch(l.fieldType){case 1:return"sintValue";case 2:return"floatValue";case 3:return"doubleValue";case 4:return"stringValue";case 5:return"sint64Value";case 6:return"uintValue";default:return null}}function E(l,d){var O=l[0],m=l[1],p=l[2]?l[2]:void 0;d.scale&&(O*=d.scale.xScale,m*=-d.scale.yScale,p!==void 0&&(p*=d.scale.zScale)),d.translate&&(O+=d.translate.xTranslate,m+=d.translate.yTranslate,p!==void 0&&(p+=d.translate.zTranslate));var o=[O,m];return p!==void 0&&o.push(p),o}function f(l,d){return l+d}},47409:function(H,b,e){"use strict";var c=e(29870),w=e(87879),S=e(83393),v=e(19534);Object.defineProperty(b,"__esModule",{value:!0}),b.esriPBuffer=b.default=void 0;var u=v(e(85208)),a=v(e(53267)),s=v(e(29870)),F=v(e(42579)),g=E(e(54061)),I=void 0;function x(m){if(typeof w!="function")return null;var p=new w,o=new w;return(x=function(r){return r?o:p})(m)}function E(m,p){if(!p&&m&&m.__esModule)return m;if(m===null||c(m)!=="object"&&typeof m!="function")return{default:m};var o=x(p);if(o&&o.has(m))return o.get(m);var h={},r=Object.defineProperty&&S;for(var y in m)if(y!=="default"&&Object.prototype.hasOwnProperty.call(m,y)){var R=r?S(m,y):null;R&&(R.get||R.set)?Object.defineProperty(h,y,R):h[y]=m[y]}return h.default=m,o&&o.set(m,h),h}var f=g.Reader,l=g.util,d=g.roots.default||(g.roots.default={});b.default=d;var O=d.esriPBuffer=function(){(0,F.default)(this,I);var m={};return m.FeatureCollectionPBuffer=function(){function p(o){if(o)for(var h=(0,u.default)(o),r=0;r<h.length;++r)o[h[r]]!=null&&(this[h[r]]=o[h[r]])}return p.prototype.version="",p.prototype.queryResult=null,p.decode=function(h,r){h instanceof f||(h=f.create(h));for(var y=r===void 0?h.len:h.pos+r,R=new d.esriPBuffer.FeatureCollectionPBuffer;h.pos<y;){var D=h.uint32();switch(D>>>3){case 1:R.version=h.string();break;case 2:R.queryResult=d.esriPBuffer.FeatureCollectionPBuffer.QueryResult.decode(h,h.uint32());break;default:h.skipType(D&7);break}}return R},p.verify=function(h){if((0,s.default)(h)!=="object"||h===null)return"object expected";if(h.version!=null&&h.hasOwnProperty("version")&&!l.isString(h.version))return"version: string expected";if(h.queryResult!=null&&h.hasOwnProperty("queryResult")){var r=d.esriPBuffer.FeatureCollectionPBuffer.QueryResult.verify(h.queryResult);if(r)return"queryResult."+r}return null},p.GeometryType=function(){var o={},h=Object.create(o);return h[o[0]="esriGeometryTypePoint"]=0,h[o[1]="esriGeometryTypeMultipoint"]=1,h[o[2]="esriGeometryTypePolyline"]=2,h[o[3]="esriGeometryTypePolygon"]=3,h[o[4]="esriGeometryTypeMultipatch"]=4,h[o[127]="esriGeometryTypeNone"]=127,h}(),p.FieldType=function(){var o={},h=Object.create(o);return h[o[0]="esriFieldTypeSmallInteger"]=0,h[o[1]="esriFieldTypeInteger"]=1,h[o[2]="esriFieldTypeSingle"]=2,h[o[3]="esriFieldTypeDouble"]=3,h[o[4]="esriFieldTypeString"]=4,h[o[5]="esriFieldTypeDate"]=5,h[o[6]="esriFieldTypeOID"]=6,h[o[7]="esriFieldTypeGeometry"]=7,h[o[8]="esriFieldTypeBlob"]=8,h[o[9]="esriFieldTypeRaster"]=9,h[o[10]="esriFieldTypeGUID"]=10,h[o[11]="esriFieldTypeGlobalID"]=11,h[o[12]="esriFieldTypeXML"]=12,h}(),p.SQLType=function(){var o={},h=Object.create(o);return h[o[0]="sqlTypeBigInt"]=0,h[o[1]="sqlTypeBinary"]=1,h[o[2]="sqlTypeBit"]=2,h[o[3]="sqlTypeChar"]=3,h[o[4]="sqlTypeDate"]=4,h[o[5]="sqlTypeDecimal"]=5,h[o[6]="sqlTypeDouble"]=6,h[o[7]="sqlTypeFloat"]=7,h[o[8]="sqlTypeGeometry"]=8,h[o[9]="sqlTypeGUID"]=9,h[o[10]="sqlTypeInteger"]=10,h[o[11]="sqlTypeLongNVarchar"]=11,h[o[12]="sqlTypeLongVarbinary"]=12,h[o[13]="sqlTypeLongVarchar"]=13,h[o[14]="sqlTypeNChar"]=14,h[o[15]="sqlTypeNVarchar"]=15,h[o[16]="sqlTypeOther"]=16,h[o[17]="sqlTypeReal"]=17,h[o[18]="sqlTypeSmallInt"]=18,h[o[19]="sqlTypeSqlXml"]=19,h[o[20]="sqlTypeTime"]=20,h[o[21]="sqlTypeTimestamp"]=21,h[o[22]="sqlTypeTimestamp2"]=22,h[o[23]="sqlTypeTinyInt"]=23,h[o[24]="sqlTypeVarbinary"]=24,h[o[25]="sqlTypeVarchar"]=25,h}(),p.QuantizeOriginPostion=function(){var o={},h=Object.create(o);return h[o[0]="upperLeft"]=0,h[o[1]="lowerLeft"]=1,h}(),p.SpatialReference=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.wkid=0,o.prototype.lastestWkid=0,o.prototype.vcsWkid=0,o.prototype.latestVcsWkid=0,o.prototype.wkt="",o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.SpatialReference;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.wkid=r.uint32();break;case 2:D.lastestWkid=r.uint32();break;case 3:D.vcsWkid=r.uint32();break;case 4:D.latestVcsWkid=r.uint32();break;case 5:D.wkt=r.string();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){return(0,s.default)(r)!=="object"||r===null?"object expected":r.wkid!=null&&r.hasOwnProperty("wkid")&&!l.isInteger(r.wkid)?"wkid: integer expected":r.lastestWkid!=null&&r.hasOwnProperty("lastestWkid")&&!l.isInteger(r.lastestWkid)?"lastestWkid: integer expected":r.vcsWkid!=null&&r.hasOwnProperty("vcsWkid")&&!l.isInteger(r.vcsWkid)?"vcsWkid: integer expected":r.latestVcsWkid!=null&&r.hasOwnProperty("latestVcsWkid")&&!l.isInteger(r.latestVcsWkid)?"latestVcsWkid: integer expected":r.wkt!=null&&r.hasOwnProperty("wkt")&&!l.isString(r.wkt)?"wkt: string expected":null},o}(),p.Field=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.name="",o.prototype.fieldType=0,o.prototype.alias="",o.prototype.sqlType=0,o.prototype.domain="",o.prototype.defaultValue="",o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.Field;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.name=r.string();break;case 2:D.fieldType=r.int32();break;case 3:D.alias=r.string();break;case 4:D.sqlType=r.int32();break;case 5:D.domain=r.string();break;case 6:D.defaultValue=r.string();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){if((0,s.default)(r)!=="object"||r===null)return"object expected";if(r.name!=null&&r.hasOwnProperty("name")&&!l.isString(r.name))return"name: string expected";if(r.fieldType!=null&&r.hasOwnProperty("fieldType"))switch(r.fieldType){default:return"fieldType: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:break}if(r.alias!=null&&r.hasOwnProperty("alias")&&!l.isString(r.alias))return"alias: string expected";if(r.sqlType!=null&&r.hasOwnProperty("sqlType"))switch(r.sqlType){default:return"sqlType: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:break}return r.domain!=null&&r.hasOwnProperty("domain")&&!l.isString(r.domain)?"domain: string expected":r.defaultValue!=null&&r.hasOwnProperty("defaultValue")&&!l.isString(r.defaultValue)?"defaultValue: string expected":null},o}(),p.Value=function(){function o(r){if(r)for(var y=(0,u.default)(r),R=0;R<y.length;++R)r[y[R]]!=null&&(this[y[R]]=r[y[R]])}o.prototype.stringValue=null,o.prototype.floatValue=null,o.prototype.doubleValue=null,o.prototype.sintValue=null,o.prototype.uintValue=null,o.prototype.int64Value=null,o.prototype.uint64Value=null,o.prototype.sint64Value=null,o.prototype.boolValue=null;var h;return Object.defineProperty(o.prototype,"valueType",{get:l.oneOfGetter(h=["stringValue","floatValue","doubleValue","sintValue","uintValue","int64Value","uint64Value","sint64Value","boolValue"]),set:l.oneOfSetter(h)}),o.decode=function(y,R){y instanceof f||(y=f.create(y));for(var D=R===void 0?y.len:y.pos+R,B=new d.esriPBuffer.FeatureCollectionPBuffer.Value;y.pos<D;){var lt=y.uint32();switch(lt>>>3){case 1:B.stringValue=y.string();break;case 2:B.floatValue=y.float();break;case 3:B.doubleValue=y.double();break;case 4:B.sintValue=y.sint32();break;case 5:B.uintValue=y.uint32();break;case 6:B.int64Value=y.int64();break;case 7:B.uint64Value=y.uint64();break;case 8:B.sint64Value=y.sint64();break;case 9:B.boolValue=y.bool();break;default:y.skipType(lt&7);break}}return B},o.verify=function(y){if((0,s.default)(y)!=="object"||y===null)return"object expected";var R={};if(y.stringValue!=null&&y.hasOwnProperty("stringValue")&&(R.valueType=1,!l.isString(y.stringValue)))return"stringValue: string expected";if(y.floatValue!=null&&y.hasOwnProperty("floatValue")){if(R.valueType===1)return"valueType: multiple values";if(R.valueType=1,typeof y.floatValue!="number")return"floatValue: number expected"}if(y.doubleValue!=null&&y.hasOwnProperty("doubleValue")){if(R.valueType===1)return"valueType: multiple values";if(R.valueType=1,typeof y.doubleValue!="number")return"doubleValue: number expected"}if(y.sintValue!=null&&y.hasOwnProperty("sintValue")){if(R.valueType===1)return"valueType: multiple values";if(R.valueType=1,!l.isInteger(y.sintValue))return"sintValue: integer expected"}if(y.uintValue!=null&&y.hasOwnProperty("uintValue")){if(R.valueType===1)return"valueType: multiple values";if(R.valueType=1,!l.isInteger(y.uintValue))return"uintValue: integer expected"}if(y.int64Value!=null&&y.hasOwnProperty("int64Value")){if(R.valueType===1)return"valueType: multiple values";if(R.valueType=1,!l.isInteger(y.int64Value)&&!(y.int64Value&&l.isInteger(y.int64Value.low)&&l.isInteger(y.int64Value.high)))return"int64Value: integer|Long expected"}if(y.uint64Value!=null&&y.hasOwnProperty("uint64Value")){if(R.valueType===1)return"valueType: multiple values";if(R.valueType=1,!l.isInteger(y.uint64Value)&&!(y.uint64Value&&l.isInteger(y.uint64Value.low)&&l.isInteger(y.uint64Value.high)))return"uint64Value: integer|Long expected"}if(y.sint64Value!=null&&y.hasOwnProperty("sint64Value")){if(R.valueType===1)return"valueType: multiple values";if(R.valueType=1,!l.isInteger(y.sint64Value)&&!(y.sint64Value&&l.isInteger(y.sint64Value.low)&&l.isInteger(y.sint64Value.high)))return"sint64Value: integer|Long expected"}if(y.boolValue!=null&&y.hasOwnProperty("boolValue")){if(R.valueType===1)return"valueType: multiple values";if(R.valueType=1,typeof y.boolValue!="boolean")return"boolValue: boolean expected"}return null},o}(),p.Geometry=function(){function o(h){if(this.lengths=[],this.coords=[],h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.lengths=l.emptyArray,o.prototype.coords=l.emptyArray,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.Geometry;r.pos<R;){var B=r.uint32();switch(B>>>3){case 2:if(D.lengths&&D.lengths.length||(D.lengths=[]),(B&7)===2)for(var lt=r.uint32()+r.pos;r.pos<lt;)D.lengths.push(r.uint32());else D.lengths.push(r.uint32());break;case 3:if(D.coords&&D.coords.length||(D.coords=[]),(B&7)===2)for(var st=r.uint32()+r.pos;r.pos<st;)D.coords.push(r.sint64());else D.coords.push(r.sint64());break;default:r.skipType(B&7);break}}return D},o.verify=function(r){if((0,s.default)(r)!=="object"||r===null)return"object expected";if(r.lengths!=null&&r.hasOwnProperty("lengths")){if(!Array.isArray(r.lengths))return"lengths: array expected";for(var y=0;y<r.lengths.length;++y)if(!l.isInteger(r.lengths[y]))return"lengths: integer[] expected"}if(r.coords!=null&&r.hasOwnProperty("coords")){if(!Array.isArray(r.coords))return"coords: array expected";for(var R=0;R<r.coords.length;++R)if(!l.isInteger(r.coords[R])&&!(r.coords[R]&&l.isInteger(r.coords[R].low)&&l.isInteger(r.coords[R].high)))return"coords: integer|Long[] expected"}return null},o}(),p.EsriShapeBuffer=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.bytes=l.newBuffer([]),o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.EsriShapeBuffer;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.bytes=r.bytes();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){return(0,s.default)(r)!=="object"||r===null?"object expected":r.bytes!=null&&r.hasOwnProperty("bytes")&&!(r.bytes&&typeof r.bytes.length=="number"||l.isString(r.bytes))?"bytes: buffer expected":null},o}(),p.Feature=function(){function o(r){if(this.attributes=[],r)for(var y=(0,u.default)(r),R=0;R<y.length;++R)r[y[R]]!=null&&(this[y[R]]=r[y[R]])}o.prototype.attributes=l.emptyArray,o.prototype.geometry=null,o.prototype.shapeBuffer=null,o.prototype.centroid=null;var h;return Object.defineProperty(o.prototype,"compressedGeometry",{get:l.oneOfGetter(h=["geometry","shapeBuffer"]),set:l.oneOfSetter(h)}),o.decode=function(y,R){y instanceof f||(y=f.create(y));for(var D=R===void 0?y.len:y.pos+R,B=new d.esriPBuffer.FeatureCollectionPBuffer.Feature;y.pos<D;){var lt=y.uint32();switch(lt>>>3){case 1:B.attributes&&B.attributes.length||(B.attributes=[]),B.attributes.push(d.esriPBuffer.FeatureCollectionPBuffer.Value.decode(y,y.uint32()));break;case 2:B.geometry=d.esriPBuffer.FeatureCollectionPBuffer.Geometry.decode(y,y.uint32());break;case 3:B.shapeBuffer=d.esriPBuffer.FeatureCollectionPBuffer.EsriShapeBuffer.decode(y,y.uint32());break;case 4:B.centroid=d.esriPBuffer.FeatureCollectionPBuffer.Geometry.decode(y,y.uint32());break;default:y.skipType(lt&7);break}}return B},o.verify=function(y){if((0,s.default)(y)!=="object"||y===null)return"object expected";var R={};if(y.attributes!=null&&y.hasOwnProperty("attributes")){if(!Array.isArray(y.attributes))return"attributes: array expected";for(var D=0;D<y.attributes.length;++D){var B=d.esriPBuffer.FeatureCollectionPBuffer.Value.verify(y.attributes[D]);if(B)return"attributes."+B}}if(y.geometry!=null&&y.hasOwnProperty("geometry")){R.compressedGeometry=1;{var lt=d.esriPBuffer.FeatureCollectionPBuffer.Geometry.verify(y.geometry);if(lt)return"geometry."+lt}}if(y.shapeBuffer!=null&&y.hasOwnProperty("shapeBuffer")){if(R.compressedGeometry===1)return"compressedGeometry: multiple values";R.compressedGeometry=1;{var st=d.esriPBuffer.FeatureCollectionPBuffer.EsriShapeBuffer.verify(y.shapeBuffer);if(st)return"shapeBuffer."+st}}if(y.centroid!=null&&y.hasOwnProperty("centroid")){var Y=d.esriPBuffer.FeatureCollectionPBuffer.Geometry.verify(y.centroid);if(Y)return"centroid."+Y}return null},o}(),p.UniqueIdField=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.name="",o.prototype.isSystemMaintained=!1,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.UniqueIdField;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.name=r.string();break;case 2:D.isSystemMaintained=r.bool();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){return(0,s.default)(r)!=="object"||r===null?"object expected":r.name!=null&&r.hasOwnProperty("name")&&!l.isString(r.name)?"name: string expected":r.isSystemMaintained!=null&&r.hasOwnProperty("isSystemMaintained")&&typeof r.isSystemMaintained!="boolean"?"isSystemMaintained: boolean expected":null},o}(),p.GeometryProperties=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.shapeAreaFieldName="",o.prototype.shapeLengthFieldName="",o.prototype.units="",o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.GeometryProperties;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.shapeAreaFieldName=r.string();break;case 2:D.shapeLengthFieldName=r.string();break;case 3:D.units=r.string();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){return(0,s.default)(r)!=="object"||r===null?"object expected":r.shapeAreaFieldName!=null&&r.hasOwnProperty("shapeAreaFieldName")&&!l.isString(r.shapeAreaFieldName)?"shapeAreaFieldName: string expected":r.shapeLengthFieldName!=null&&r.hasOwnProperty("shapeLengthFieldName")&&!l.isString(r.shapeLengthFieldName)?"shapeLengthFieldName: string expected":r.units!=null&&r.hasOwnProperty("units")&&!l.isString(r.units)?"units: string expected":null},o}(),p.ServerGens=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.minServerGen=l.Long?l.Long.fromBits(0,0,!0):0,o.prototype.serverGen=l.Long?l.Long.fromBits(0,0,!0):0,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.ServerGens;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.minServerGen=r.uint64();break;case 2:D.serverGen=r.uint64();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){return(0,s.default)(r)!=="object"||r===null?"object expected":r.minServerGen!=null&&r.hasOwnProperty("minServerGen")&&!l.isInteger(r.minServerGen)&&!(r.minServerGen&&l.isInteger(r.minServerGen.low)&&l.isInteger(r.minServerGen.high))?"minServerGen: integer|Long expected":r.serverGen!=null&&r.hasOwnProperty("serverGen")&&!l.isInteger(r.serverGen)&&!(r.serverGen&&l.isInteger(r.serverGen.low)&&l.isInteger(r.serverGen.high))?"serverGen: integer|Long expected":null},o}(),p.Scale=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.xScale=0,o.prototype.yScale=0,o.prototype.mScale=0,o.prototype.zScale=0,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.Scale;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.xScale=r.double();break;case 2:D.yScale=r.double();break;case 3:D.mScale=r.double();break;case 4:D.zScale=r.double();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){return(0,s.default)(r)!=="object"||r===null?"object expected":r.xScale!=null&&r.hasOwnProperty("xScale")&&typeof r.xScale!="number"?"xScale: number expected":r.yScale!=null&&r.hasOwnProperty("yScale")&&typeof r.yScale!="number"?"yScale: number expected":r.mScale!=null&&r.hasOwnProperty("mScale")&&typeof r.mScale!="number"?"mScale: number expected":r.zScale!=null&&r.hasOwnProperty("zScale")&&typeof r.zScale!="number"?"zScale: number expected":null},o}(),p.Translate=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.xTranslate=0,o.prototype.yTranslate=0,o.prototype.mTranslate=0,o.prototype.zTranslate=0,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.Translate;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.xTranslate=r.double();break;case 2:D.yTranslate=r.double();break;case 3:D.mTranslate=r.double();break;case 4:D.zTranslate=r.double();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){return(0,s.default)(r)!=="object"||r===null?"object expected":r.xTranslate!=null&&r.hasOwnProperty("xTranslate")&&typeof r.xTranslate!="number"?"xTranslate: number expected":r.yTranslate!=null&&r.hasOwnProperty("yTranslate")&&typeof r.yTranslate!="number"?"yTranslate: number expected":r.mTranslate!=null&&r.hasOwnProperty("mTranslate")&&typeof r.mTranslate!="number"?"mTranslate: number expected":r.zTranslate!=null&&r.hasOwnProperty("zTranslate")&&typeof r.zTranslate!="number"?"zTranslate: number expected":null},o}(),p.Transform=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.quantizeOriginPostion=0,o.prototype.scale=null,o.prototype.translate=null,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.Transform;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.quantizeOriginPostion=r.int32();break;case 2:D.scale=d.esriPBuffer.FeatureCollectionPBuffer.Scale.decode(r,r.uint32());break;case 3:D.translate=d.esriPBuffer.FeatureCollectionPBuffer.Translate.decode(r,r.uint32());break;default:r.skipType(B&7);break}}return D},o.verify=function(r){if((0,s.default)(r)!=="object"||r===null)return"object expected";if(r.quantizeOriginPostion!=null&&r.hasOwnProperty("quantizeOriginPostion"))switch(r.quantizeOriginPostion){default:return"quantizeOriginPostion: enum value expected";case 0:case 1:break}if(r.scale!=null&&r.hasOwnProperty("scale")){var y=d.esriPBuffer.FeatureCollectionPBuffer.Scale.verify(r.scale);if(y)return"scale."+y}if(r.translate!=null&&r.hasOwnProperty("translate")){var R=d.esriPBuffer.FeatureCollectionPBuffer.Translate.verify(r.translate);if(R)return"translate."+R}return null},o}(),p.FeatureResult=function(){function o(h){if(this.fields=[],this.values=[],this.features=[],h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.objectIdFieldName="",o.prototype.uniqueIdField=null,o.prototype.globalIdFieldName="",o.prototype.geohashFieldName="",o.prototype.geometryProperties=null,o.prototype.serverGens=null,o.prototype.geometryType=0,o.prototype.spatialReference=null,o.prototype.exceededTransferLimit=!1,o.prototype.hasZ=!1,o.prototype.hasM=!1,o.prototype.transform=null,o.prototype.fields=l.emptyArray,o.prototype.values=l.emptyArray,o.prototype.features=l.emptyArray,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.FeatureResult;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.objectIdFieldName=r.string();break;case 2:D.uniqueIdField=d.esriPBuffer.FeatureCollectionPBuffer.UniqueIdField.decode(r,r.uint32());break;case 3:D.globalIdFieldName=r.string();break;case 4:D.geohashFieldName=r.string();break;case 5:D.geometryProperties=d.esriPBuffer.FeatureCollectionPBuffer.GeometryProperties.decode(r,r.uint32());break;case 6:D.serverGens=d.esriPBuffer.FeatureCollectionPBuffer.ServerGens.decode(r,r.uint32());break;case 7:D.geometryType=r.int32();break;case 8:D.spatialReference=d.esriPBuffer.FeatureCollectionPBuffer.SpatialReference.decode(r,r.uint32());break;case 9:D.exceededTransferLimit=r.bool();break;case 10:D.hasZ=r.bool();break;case 11:D.hasM=r.bool();break;case 12:D.transform=d.esriPBuffer.FeatureCollectionPBuffer.Transform.decode(r,r.uint32());break;case 13:D.fields&&D.fields.length||(D.fields=[]),D.fields.push(d.esriPBuffer.FeatureCollectionPBuffer.Field.decode(r,r.uint32()));break;case 14:(0,a.default)(D)&&(0,a.default)(D).length||(D.values=[]),(0,a.default)(D).push(d.esriPBuffer.FeatureCollectionPBuffer.Value.decode(r,r.uint32()));break;case 15:D.features&&D.features.length||(D.features=[]),D.features.push(d.esriPBuffer.FeatureCollectionPBuffer.Feature.decode(r,r.uint32()));break;default:r.skipType(B&7);break}}return D},o.verify=function(r){if((0,s.default)(r)!=="object"||r===null)return"object expected";if(r.objectIdFieldName!=null&&r.hasOwnProperty("objectIdFieldName")&&!l.isString(r.objectIdFieldName))return"objectIdFieldName: string expected";if(r.uniqueIdField!=null&&r.hasOwnProperty("uniqueIdField")){var y=d.esriPBuffer.FeatureCollectionPBuffer.UniqueIdField.verify(r.uniqueIdField);if(y)return"uniqueIdField."+y}if(r.globalIdFieldName!=null&&r.hasOwnProperty("globalIdFieldName")&&!l.isString(r.globalIdFieldName))return"globalIdFieldName: string expected";if(r.geohashFieldName!=null&&r.hasOwnProperty("geohashFieldName")&&!l.isString(r.geohashFieldName))return"geohashFieldName: string expected";if(r.geometryProperties!=null&&r.hasOwnProperty("geometryProperties")){var R=d.esriPBuffer.FeatureCollectionPBuffer.GeometryProperties.verify(r.geometryProperties);if(R)return"geometryProperties."+R}if(r.serverGens!=null&&r.hasOwnProperty("serverGens")){var D=d.esriPBuffer.FeatureCollectionPBuffer.ServerGens.verify(r.serverGens);if(D)return"serverGens."+D}if(r.geometryType!=null&&r.hasOwnProperty("geometryType"))switch(r.geometryType){default:return"geometryType: enum value expected";case 0:case 1:case 2:case 3:case 4:case 127:break}if(r.spatialReference!=null&&r.hasOwnProperty("spatialReference")){var B=d.esriPBuffer.FeatureCollectionPBuffer.SpatialReference.verify(r.spatialReference);if(B)return"spatialReference."+B}if(r.exceededTransferLimit!=null&&r.hasOwnProperty("exceededTransferLimit")&&typeof r.exceededTransferLimit!="boolean")return"exceededTransferLimit: boolean expected";if(r.hasZ!=null&&r.hasOwnProperty("hasZ")&&typeof r.hasZ!="boolean")return"hasZ: boolean expected";if(r.hasM!=null&&r.hasOwnProperty("hasM")&&typeof r.hasM!="boolean")return"hasM: boolean expected";if(r.transform!=null&&r.hasOwnProperty("transform")){var lt=d.esriPBuffer.FeatureCollectionPBuffer.Transform.verify(r.transform);if(lt)return"transform."+lt}if(r.fields!=null&&r.hasOwnProperty("fields")){if(!Array.isArray(r.fields))return"fields: array expected";for(var st=0;st<r.fields.length;++st){var Y=d.esriPBuffer.FeatureCollectionPBuffer.Field.verify(r.fields[st]);if(Y)return"fields."+Y}}if((0,a.default)(r)!=null&&r.hasOwnProperty("values")){if(!Array.isArray((0,a.default)(r)))return"values: array expected";for(var yt=0;yt<(0,a.default)(r).length;++yt){var et=d.esriPBuffer.FeatureCollectionPBuffer.Value.verify((0,a.default)(r)[yt]);if(et)return"values."+et}}if(r.features!=null&&r.hasOwnProperty("features")){if(!Array.isArray(r.features))return"features: array expected";for(var ut=0;ut<r.features.length;++ut){var dt=d.esriPBuffer.FeatureCollectionPBuffer.Feature.verify(r.features[ut]);if(dt)return"features."+dt}}return null},o}(),p.CountResult=function(){function o(h){if(h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.count=l.Long?l.Long.fromBits(0,0,!0):0,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.CountResult;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.count=r.uint64();break;default:r.skipType(B&7);break}}return D},o.verify=function(r){return(0,s.default)(r)!=="object"||r===null?"object expected":r.count!=null&&r.hasOwnProperty("count")&&!l.isInteger(r.count)&&!(r.count&&l.isInteger(r.count.low)&&l.isInteger(r.count.high))?"count: integer|Long expected":null},o}(),p.ObjectIdsResult=function(){function o(h){if(this.objectIds=[],h)for(var r=(0,u.default)(h),y=0;y<r.length;++y)h[r[y]]!=null&&(this[r[y]]=h[r[y]])}return o.prototype.objectIdFieldName="",o.prototype.serverGens=null,o.prototype.objectIds=l.emptyArray,o.decode=function(r,y){r instanceof f||(r=f.create(r));for(var R=y===void 0?r.len:r.pos+y,D=new d.esriPBuffer.FeatureCollectionPBuffer.ObjectIdsResult;r.pos<R;){var B=r.uint32();switch(B>>>3){case 1:D.objectIdFieldName=r.string();break;case 2:D.serverGens=d.esriPBuffer.FeatureCollectionPBuffer.ServerGens.decode(r,r.uint32());break;case 3:if(D.objectIds&&D.objectIds.length||(D.objectIds=[]),(B&7)===2)for(var lt=r.uint32()+r.pos;r.pos<lt;)D.objectIds.push(r.uint64());else D.objectIds.push(r.uint64());break;default:r.skipType(B&7);break}}return D},o.verify=function(r){if((0,s.default)(r)!=="object"||r===null)return"object expected";if(r.objectIdFieldName!=null&&r.hasOwnProperty("objectIdFieldName")&&!l.isString(r.objectIdFieldName))return"objectIdFieldName: string expected";if(r.serverGens!=null&&r.hasOwnProperty("serverGens")){var y=d.esriPBuffer.FeatureCollectionPBuffer.ServerGens.verify(r.serverGens);if(y)return"serverGens."+y}if(r.objectIds!=null&&r.hasOwnProperty("objectIds")){if(!Array.isArray(r.objectIds))return"objectIds: array expected";for(var R=0;R<r.objectIds.length;++R)if(!l.isInteger(r.objectIds[R])&&!(r.objectIds[R]&&l.isInteger(r.objectIds[R].low)&&l.isInteger(r.objectIds[R].high)))return"objectIds: integer|Long[] expected"}return null},o}(),p.QueryResult=function(){function o(r){if(r)for(var y=(0,u.default)(r),R=0;R<y.length;++R)r[y[R]]!=null&&(this[y[R]]=r[y[R]])}o.prototype.featureResult=null,o.prototype.countResult=null,o.prototype.idsResult=null;var h;return Object.defineProperty(o.prototype,"Results",{get:l.oneOfGetter(h=["featureResult","countResult","idsResult"]),set:l.oneOfSetter(h)}),o.decode=function(y,R){y instanceof f||(y=f.create(y));for(var D=R===void 0?y.len:y.pos+R,B=new d.esriPBuffer.FeatureCollectionPBuffer.QueryResult;y.pos<D;){var lt=y.uint32();switch(lt>>>3){case 1:B.featureResult=d.esriPBuffer.FeatureCollectionPBuffer.FeatureResult.decode(y,y.uint32());break;case 2:B.countResult=d.esriPBuffer.FeatureCollectionPBuffer.CountResult.decode(y,y.uint32());break;case 3:B.idsResult=d.esriPBuffer.FeatureCollectionPBuffer.ObjectIdsResult.decode(y,y.uint32());break;default:y.skipType(lt&7);break}}return B},o.verify=function(y){if((0,s.default)(y)!=="object"||y===null)return"object expected";var R={};if(y.featureResult!=null&&y.hasOwnProperty("featureResult")){R.Results=1;{var D=d.esriPBuffer.FeatureCollectionPBuffer.FeatureResult.verify(y.featureResult);if(D)return"featureResult."+D}}if(y.countResult!=null&&y.hasOwnProperty("countResult")){if(R.Results===1)return"Results: multiple values";R.Results=1;{var B=d.esriPBuffer.FeatureCollectionPBuffer.CountResult.verify(y.countResult);if(B)return"countResult."+B}}if(y.idsResult!=null&&y.hasOwnProperty("idsResult")){if(R.Results===1)return"Results: multiple values";R.Results=1;{var lt=d.esriPBuffer.FeatureCollectionPBuffer.ObjectIdsResult.verify(y.idsResult);if(lt)return"idsResult."+lt}}return null},o}(),p}(),m}.bind(void 0)();b.esriPBuffer=O},29615:function(H,b,e){"use strict";var c=e(20314),w=e(26352),S=e(40639),v=e(43586),u=e(19534);Object.defineProperty(b,"__esModule",{value:!0}),b.queryFeatureByPbf=O;var a=u(e(29870)),s=u(e(42579)),F=u(e(78756)),g=u(e(66273)),I=u(e(20314)),x=u(e(2417)),E=u(e(12989));function f(p,o){var h=typeof S<"u"&&v(p)||p["@@iterator"];if(!h){if(Array.isArray(p)||(h=l(p))||o&&p&&typeof p.length=="number"){h&&(p=h);var r=0,y=function(){};return{s:y,n:function(){return r>=p.length?{done:!0}:{done:!1,value:p[r++]}},e:function(st){throw st},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,D=!1,B;return{s:function(){h=h.call(p)},n:function(){var st=h.next();return R=st.done,st},e:function(st){D=!0,B=st},f:function(){try{!R&&h.return!=null&&h.return()}finally{if(D)throw B}}}}function l(p,o){var h;if(p){if(typeof p=="string")return d(p,o);var r=c(h=Object.prototype.toString.call(p)).call(h,8,-1);if(r==="Object"&&p.constructor&&(r=p.constructor.name),r==="Map"||r==="Set")return w(p);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(p,o)}}function d(p,o){(o==null||o>p.length)&&(o=p.length);for(var h=0,r=new Array(o);h<o;h++)r[h]=p[h];return r}function O(p){var o=this,h=p.data,r=p.visibleLayer,y=p.f,R=p.extent,D=p.geometry,B=p.resolution,lt=p.projection,st=p.returnExceededLimitFeatures;return new F.default(function(Y){(0,s.default)(this,o);var yt=lt.getCode().split(":")[1],et=y==="pbf"?{mode:"view",originPosition:"upperLeft",tolerance:B,extent:{xmin:R[0],ymin:R[1],xmax:R[2],ymax:R[3],spatialReference:{wkid:yt}}}:"",ut={f:y,returnGeometry:!0,spatialRel:"esriSpatialRelIntersects",where:h.where,geometry:{xmin:D[0],ymin:D[1],xmax:D[2],ymax:D[3],spatialReference:{wkid:yt}},geometryType:"esriGeometryEnvelope",inSR:yt,outFields:"*",returnCentroid:"false",returnExceededLimitFeatures:st,outSR:yt,resultType:"tile",quantizationParameters:et};h.authkey&&(ut.authkey=h.authkey);var dt=h.url+"/"+r+"/query?";for(var it in ut)(0,a.default)(ut[it])==="object"&&(ut[it]=encodeURIComponent((0,g.default)(ut[it]))),dt=dt+it+"="+ut[it]+"&";dt=(0,I.default)(dt).call(dt,0,-1);var gt=new XMLHttpRequest;gt.responseType=y==="pbf"?"arraybuffer":"json",gt.open("GET",dt),gt.onload=function(){var Pt=this;if(gt.status===200){var ft=y==="pbf"?(0,x.default)(gt.response):(0,E.default)(gt.response);if(ft.exceededTransferLimit&&!st){var St=m(R),At=[],It=f(St),wt;try{for(It.s();!(wt=It.n()).done;){var _=wt.value;At.push(O({data:h,visibleLayer:r,f:y,extent:R,geometry:_,resolution:B,projection:lt,returnExceededLimitFeatures:!0}))}}catch(rt){It.e(rt)}finally{It.f()}F.default.all(At).then(function(rt){(0,s.default)(this,Pt);var Q=[],tt=f(rt),xt;try{for(tt.s();!(xt=tt.n()).done;){var ot=xt.value;Q.push(ot)}}catch(nt){tt.e(nt)}finally{tt.f()}Y(Q)}.bind(this))}else Y(ft.featureCollection)}},gt.send()}.bind(this))}function m(p){for(var o=p[0],h=p[1],r=p[2],y=p[3],R=(r-o)/3,D=(y-h)/3,B=[],lt=0;lt<3;lt++)for(var st=0;st<3;st++){var Y=o+lt*R,yt=h+st*D,et=o+(lt+1)*R,ut=h+(st+1)*D;B.push([Y,yt,et,ut])}return B}},14653:function(){},67038:function(H,b,e){H.exports=e(68035)},35700:function(H,b,e){H.exports=e(60090)},96802:function(H,b,e){H.exports=e(89020)},82793:function(H,b,e){H.exports=e(35858)},62389:function(H,b,e){"use strict";e(7189),e(51732);var c=e(18893);H.exports=c("Array","keys")},57138:function(H,b,e){"use strict";var c=e(32242),w=e(98825),S=String.prototype;H.exports=function(v){var u=v.padEnd;return typeof v=="string"||v===S||c(S,v)&&u===S.padEnd?w:u}},1609:function(H,b,e){"use strict";var c=e(32242),w=e(77435),S=String.prototype;H.exports=function(v){var u=v.padStart;return typeof v=="string"||v===S||c(S,v)&&u===S.padStart?w:u}},93473:function(H,b,e){"use strict";e(11113);var c=e(94388);H.exports=c.Number.isInteger},98825:function(H,b,e){"use strict";e(28488);var c=e(18893);H.exports=c("String","padEnd")},77435:function(H,b,e){"use strict";e(70245);var c=e(18893);H.exports=c("String","padStart")},14640:function(H,b,e){"use strict";var c=e(42660),w=Math.floor;H.exports=Number.isInteger||function(v){return!c(v)&&isFinite(v)&&w(v)===v}},57475:function(H,b,e){"use strict";var c=e(74906);H.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(c)},20922:function(H,b,e){"use strict";var c=e(36021),w=e(9505),S=e(47482),v=e(40922),u=e(64734),a=c(v),s=c("".slice),F=Math.ceil,g=function(I){return function(x,E,f){var l=S(u(x)),d=w(E),O=l.length,m=f===void 0?" ":S(f),p,o;return d<=O||m===""?l:(p=d-O,o=a(m,F(p/m.length)),o.length>p&&(o=s(o,0,p)),I?l+o:o+l)}};H.exports={start:g(!1),end:g(!0)}},11113:function(H,b,e){"use strict";var c=e(90434),w=e(14640);c({target:"Number",stat:!0},{isInteger:w})},28488:function(H,b,e){"use strict";var c=e(90434),w=e(20922).end,S=e(57475);c({target:"String",proto:!0,forced:S},{padEnd:function(u){return w(this,u,arguments.length>1?arguments[1]:void 0)}})},70245:function(H,b,e){"use strict";var c=e(90434),w=e(20922).start,S=e(57475);c({target:"String",proto:!0,forced:S},{padStart:function(u){return w(this,u,arguments.length>1?arguments[1]:void 0)}})},61858:function(H,b,e){"use strict";var c=e(62389);H.exports=c},68035:function(H,b,e){"use strict";e(90469);var c=e(36220),w=e(79489),S=e(32242),v=e(61858),u=Array.prototype,a={DOMTokenList:!0,NodeList:!0};H.exports=function(s){var F=s.keys;return s===u||S(u,s)&&F===u.keys||w(a,c(s))?v:F}},60090:function(H,b,e){"use strict";var c=e(57138);H.exports=c},89020:function(H,b,e){"use strict";var c=e(1609);H.exports=c},35858:function(H,b,e){"use strict";var c=e(93473);H.exports=c},15130:function(H,b,e){"use strict";var c=e(66583),w=e(89663),S=e(45059),v=function(){var a=function(s,F){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var x in I)Object.prototype.hasOwnProperty.call(I,x)&&(g[x]=I[x])},a(s,F)};return function(s,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");a(s,F);function g(){this.constructor=s}s.prototype=F===null?Object.create(F):(g.prototype=F.prototype,new g)}}(),u=function(a){v(s,a);function s(F){var g=this,I=F||{},x=(0,S.f0)({},I);return delete x.preload,delete x.useInterimTilesOnError,g=a.call(this,x)||this,g.on,g.once,g.un,g.setPreload(I.preload!==void 0?I.preload:0),g.setUseInterimTilesOnError(I.useInterimTilesOnError!==void 0?I.useInterimTilesOnError:!0),g}return s.prototype.getPreload=function(){return this.get(w.Z.PRELOAD)},s.prototype.setPreload=function(F){this.set(w.Z.PRELOAD,F)},s.prototype.getUseInterimTilesOnError=function(){return this.get(w.Z.USE_INTERIM_TILES_ON_ERROR)},s.prototype.setUseInterimTilesOnError=function(F){this.set(w.Z.USE_INTERIM_TILES_ON_ERROR,F)},s.prototype.getData=function(F){return a.prototype.getData.call(this,F)},s}(c.Z);b.Z=u},13927:function(H,b,e){"use strict";e.r(b);var c=e(15130),w=e(27464),S=function(){var u=function(a,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,g){F.__proto__=g}||function(F,g){for(var I in g)Object.prototype.hasOwnProperty.call(g,I)&&(F[I]=g[I])},u(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(a,s);function F(){this.constructor=a}a.prototype=s===null?Object.create(s):(F.prototype=s.prototype,new F)}}(),v=function(u){S(a,u);function a(s){return u.call(this,s)||this}return a.prototype.createRenderer=function(){return new w.Z(this)},a}(c.Z);b.default=v},22276:function(H,b,e){"use strict";e.r(b),e.d(b,{register:function(){return u}});var c=e(51524),w=e(16658),S=e(90583),v=e(84362);function u(a){var s=Object.keys(a.defs),F=s.length,g,I;for(g=0;g<F;++g){var x=s[g];if(!(0,S.get)(x)){var E=a.defs(x),f=E.units;!f&&E.projName==="longlat"&&(f=w.ZP.DEGREES),(0,S.addProjection)(new c.default({code:x,axisOrientation:E.axis,metersPerUnit:E.to_meter,units:f}))}}for(g=0;g<F;++g){var l=s[g],d=(0,S.get)(l);for(I=0;I<F;++I){var O=s[I],m=(0,S.get)(O);if(!(0,v.U2)(l,O))if(a.defs[l]===a.defs[O])(0,S.addEquivalentProjections)([d,m]);else{var p=a(l,O);(0,S.addCoordinateTransforms)(d,m,(0,S.createSafeCoordinateTransform)(d,m,p.forward),(0,S.createSafeCoordinateTransform)(m,d,p.inverse))}}}}},72966:function(H,b,e){"use strict";e.r(b),e.d(b,{Circle:function(){return c.Z},Fill:function(){return w.Z},Icon:function(){return S.Z},IconImage:function(){return v.Z},Image:function(){return u.Z},RegularShape:function(){return a.Z},Stroke:function(){return s.Z},Style:function(){return F.ZP},Text:function(){return g.Z}});var c=e(5689),w=e(68640),S=e(60316),v=e(99072),u=e(22452),a=e(96825),s=e(23230),F=e(82571),g=e(95659)}}]);
