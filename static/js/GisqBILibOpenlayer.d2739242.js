(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[6494],{1345:function(Kr,ct,T){"use strict";T.r(ct),T.d(ct,{default:function(){return G}});var St=function(){var le=this,je=le._self._c;return je("div",{staticStyle:{display:"none"}})},ae=[];const Ne=T(22357),Be=T(45614),Me=T(72966),ge=T(40637),Q=T(26150),xe=T(4535),De=T(90583);var st={name:"GisqBILibOpenlayer",methods:{getLib(){return Ne}},mounted(){Ne.geom=Be,Ne.style=Me,Ne.format=ge,Ne.layer=Q,Ne.source=xe,Ne.proj=De,this.$emit("loaded",{name:"Openlayer",OPENLAYER:Ne})}},ut=st,d=T(68141),$=(0,d.Z)(ut,St,ae,!1,null,null,null),G=$.exports},39179:function(){},75493:function(){},48714:function(){},46642:function(Kr,ct,T){"use strict";T.d(ct,{Ie:function(){return Q},It:function(){return Be},L:function(){return St},L5:function(){return De},P1:function(){return ut},Qb:function(){return st},pd:function(){return xe},sf:function(){return ge}});const St={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ae={};for(const $ in St)St.hasOwnProperty($)&&(ae[St[$]]=parseInt($,10));const Ne={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",297:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",3072:"SHORT",3073:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34665:"LONG",34735:"SHORT",34737:"ASCII",42113:"ASCII"},Be=[ae.BitsPerSample,ae.ExtraSamples,ae.SampleFormat,ae.StripByteCounts,ae.StripOffsets,ae.StripRowCounts,ae.TileByteCounts,ae.TileOffsets,ae.SubIFDs],Me={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ge={};for(const $ in Me)Me.hasOwnProperty($)&&(ge[Me[$]]=parseInt($,10));const Q={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},xe={Unspecified:0,Assocalpha:1,Unassalpha:2},De={Version:0,AddCompression:1},st={None:0,Deflate:1},ut={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},d={};for(const $ in ut)ut.hasOwnProperty($)&&(d[ut[$]]=parseInt($,10))},29672:function(Kr,ct,T){"use strict";var St=T(38431),ae=T(63483),Ne=function(){var Me=function(ge,Q){return Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,De){xe.__proto__=De}||function(xe,De){for(var st in De)Object.prototype.hasOwnProperty.call(De,st)&&(xe[st]=De[st])},Me(ge,Q)};return function(ge,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");Me(ge,Q);function xe(){this.constructor=ge}ge.prototype=Q===null?Object.create(Q):(xe.prototype=Q.prototype,new xe)}}(),Be=function(Me){Ne(ge,Me);function ge(Q){var xe=this,De=ae.Z.IDLE;return xe=Me.call(this,Q.tileCoord,De,{transition:Q.transition,interpolate:Q.interpolate})||this,xe.loader_=Q.loader,xe.data_=null,xe.error_=null,xe.size_=Q.size||[256,256],xe}return ge.prototype.getSize=function(){return this.size_},ge.prototype.getData=function(){return this.data_},ge.prototype.getError=function(){return this.error_},ge.prototype.load=function(){if(!(this.state!==ae.Z.IDLE&&this.state!==ae.Z.ERROR)){this.state=ae.Z.LOADING,this.changed();var Q=this;this.loader_().then(function(xe){Q.data_=xe,Q.state=ae.Z.LOADED,Q.changed()}).catch(function(xe){Q.error_=xe,Q.state=ae.Z.ERROR,Q.changed()})}},ge}(St.Z);ct.Z=Be},77022:function(Kr,ct,T){"use strict";var St=T(78831),ae=T(87710),Ne=function(){var Me=function(ge,Q){return Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,De){xe.__proto__=De}||function(xe,De){for(var st in De)Object.prototype.hasOwnProperty.call(De,st)&&(xe[st]=De[st])},Me(ge,Q)};return function(ge,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");Me(ge,Q);function xe(){this.constructor=ge}ge.prototype=Q===null?Object.create(Q):(xe.prototype=Q.prototype,new xe)}}(),Be=function(Me){Ne(ge,Me);function ge(Q,xe,De,st,ut){var d=this,$=ut!==void 0?ae.Z.IDLE:ae.Z.LOADED;return d=Me.call(this,Q,xe,De,$)||this,d.loader_=ut!==void 0?ut:null,d.canvas_=st,d.error_=null,d}return ge.prototype.getError=function(){return this.error_},ge.prototype.handleLoad_=function(Q){Q?(this.error_=Q,this.state=ae.Z.ERROR):this.state=ae.Z.LOADED,this.changed()},ge.prototype.load=function(){this.state==ae.Z.IDLE&&(this.state=ae.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},ge.prototype.getImage=function(){return this.canvas_},ge}(St.Z);ct.Z=Be},40637:function(Kr,ct,T){"use strict";T.r(ct),T.d(ct,{EsriJSON:function(){return St.Z},GML:function(){return Me},GPX:function(){return vn},GeoJSON:function(){return ae.default},IGC:function(){return xi},IIIFInfo:function(){return rr.Z},KML:function(){return l},MVT:function(){return v.Z},OWS:function(){return x.Z},Polyline:function(){return Ie},TopoJSON:function(){return Rr},WFS:function(){return sr.Z},WKB:function(){return co},WKT:function(){return Ta.Z},WMSCapabilities:function(){return Wn.Z},WMSGetFeatureInfo:function(){return Lo},WMTSCapabilities:function(){return Oo.Z}});var St=T(31751),ae=T(37564),Ne=T(4391),Be=Ne.Z;Be.prototype.writeFeatures,Be.prototype.writeFeaturesNode;var Me=Be,ge=T(13811),Q=T(51154),xe=T(59225),De=T(4889),st=T(13798),ut=T(11310),d=T(99323),$=T(90583),G=T(55631),R=T(27393),le=T(9465),je=function(){var g=function(f,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var S in h)Object.prototype.hasOwnProperty.call(h,S)&&(p[S]=h[S])},g(f,u)};return function(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}(),me=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Tt="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",Rt={rte:Ye,trk:ee,wpt:ve},_r=(0,d.C5)(me,{rte:(0,d.Ei)(Ye),trk:(0,d.Ei)(ee),wpt:(0,d.Ei)(ve)}),br=(0,d.C5)(me,{text:(0,d.Pr)(R.s2,"linkText"),type:(0,d.Pr)(R.s2,"linkType")}),Ar=(0,d.C5)(me,{rte:(0,d.A4)(wt),trk:(0,d.A4)(Te),wpt:(0,d.A4)(Qn)}),gt=function(g){je(f,g);function f(u){var p=g.call(this)||this,h=u||{};return p.dataProjection=(0,$.get)("EPSG:4326"),p.readExtensions_=h.readExtensions,p}return f.prototype.handleReadExtensions_=function(u){u||(u=[]);for(var p=0,h=u.length;p<h;++p){var S=u[p];if(this.readExtensions_){var b=S.get("extensionsNode_")||null;this.readExtensions_(S,b)}S.set("extensionsNode_",void 0)}},f.prototype.readFeatureFromNode=function(u,p){if(!(0,G.q9)(me,u.namespaceURI))return null;var h=Rt[u.localName];if(!h)return null;var S=h(u,[this.getReadOptions(u,p)]);return S?(this.handleReadExtensions_([S]),S):null},f.prototype.readFeaturesFromNode=function(u,p){if(!(0,G.q9)(me,u.namespaceURI))return[];if(u.localName=="gpx"){var h=(0,d.O)([],_r,u,[this.getReadOptions(u,p)]);return h?(this.handleReadExtensions_(h),h):[]}return[]},f.prototype.writeFeaturesNode=function(u,p){p=this.adaptOptions(p);var h=(0,d.c)("http://www.topografix.com/GPX/1/1","gpx"),S="http://www.w3.org/2000/xmlns/";return h.setAttributeNS(S,"xmlns:xsi",d.fJ),h.setAttributeNS(d.fJ,"xsi:schemaLocation",Tt),h.setAttribute("version","1.1"),h.setAttribute("creator","OpenLayers"),(0,d.ZL)({node:h},Ar,dt,u,[p]),h},f}(ut.Z),Nr=(0,d.C5)(me,{name:(0,d.Pr)(R.s2),cmt:(0,d.Pr)(R.s2),desc:(0,d.Pr)(R.s2),src:(0,d.Pr)(R.s2),link:Fe,number:(0,d.Pr)(R.$L),extensions:lt,type:(0,d.Pr)(R.s2),rtept:at}),Mn=(0,d.C5)(me,{ele:(0,d.Pr)(R.fy),time:(0,d.Pr)(R.x7)}),wr=(0,d.C5)(me,{name:(0,d.Pr)(R.s2),cmt:(0,d.Pr)(R.s2),desc:(0,d.Pr)(R.s2),src:(0,d.Pr)(R.s2),link:Fe,number:(0,d.Pr)(R.$L),type:(0,d.Pr)(R.s2),extensions:lt,trkseg:vt}),dn=(0,d.C5)(me,{trkpt:ze}),Fr=(0,d.C5)(me,{ele:(0,d.Pr)(R.fy),time:(0,d.Pr)(R.x7)}),on=(0,d.C5)(me,{ele:(0,d.Pr)(R.fy),time:(0,d.Pr)(R.x7),magvar:(0,d.Pr)(R.fy),geoidheight:(0,d.Pr)(R.fy),name:(0,d.Pr)(R.s2),cmt:(0,d.Pr)(R.s2),desc:(0,d.Pr)(R.s2),src:(0,d.Pr)(R.s2),link:Fe,sym:(0,d.Pr)(R.s2),type:(0,d.Pr)(R.s2),fix:(0,d.Pr)(R.s2),sat:(0,d.Pr)(R.$L),hdop:(0,d.Pr)(R.fy),vdop:(0,d.Pr)(R.fy),pdop:(0,d.Pr)(R.fy),ageofdgpsdata:(0,d.Pr)(R.fy),dgpsid:(0,d.Pr)(R.$L),extensions:lt}),Gr=["text","type"],zr=(0,d.C5)(me,{text:(0,d.A4)(R.bZ),type:(0,d.A4)(R.bZ)}),Xe=(0,d.C5)(me,["name","cmt","desc","src","link","number","type","rtept"]),Ce=(0,d.C5)(me,{name:(0,d.A4)(R.bZ),cmt:(0,d.A4)(R.bZ),desc:(0,d.A4)(R.bZ),src:(0,d.A4)(R.bZ),link:(0,d.A4)(ue),number:(0,d.A4)(R.JD),type:(0,d.A4)(R.bZ),rtept:(0,d.JO)((0,d.A4)(Et))}),V=(0,d.C5)(me,["ele","time"]),z=(0,d.C5)(me,["name","cmt","desc","src","link","number","type","trkseg"]),te=(0,d.C5)(me,{name:(0,d.A4)(R.bZ),cmt:(0,d.A4)(R.bZ),desc:(0,d.A4)(R.bZ),src:(0,d.A4)(R.bZ),link:(0,d.A4)(ue),number:(0,d.A4)(R.JD),type:(0,d.A4)(R.bZ),trkseg:(0,d.JO)((0,d.A4)(Zr))}),X=(0,d.G3)("trkpt"),W=(0,d.C5)(me,{trkpt:(0,d.A4)(Et)}),B=(0,d.C5)(me,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),j=(0,d.C5)(me,{ele:(0,d.A4)(R.f3),time:(0,d.A4)(R.hv),magvar:(0,d.A4)(R.f3),geoidheight:(0,d.A4)(R.f3),name:(0,d.A4)(R.bZ),cmt:(0,d.A4)(R.bZ),desc:(0,d.A4)(R.bZ),src:(0,d.A4)(R.bZ),link:(0,d.A4)(ue),sym:(0,d.A4)(R.bZ),type:(0,d.A4)(R.bZ),fix:(0,d.A4)(R.bZ),sat:(0,d.A4)(R.JD),hdop:(0,d.A4)(R.f3),vdop:(0,d.A4)(R.f3),pdop:(0,d.A4)(R.f3),ageofdgpsdata:(0,d.A4)(R.f3),dgpsid:(0,d.A4)(R.JD)}),Ve={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function dt(g,f,u){var p=g.getGeometry();if(p){var h=Ve[p.getType()];if(h){var S=f[f.length-1].node;return(0,d.c)(S.namespaceURI,h)}}}function tt(g,f,u,p){return g.push(parseFloat(u.getAttribute("lon")),parseFloat(u.getAttribute("lat"))),"ele"in p?(g.push(p.ele),delete p.ele,f.hasZ=!0):g.push(0),"time"in p?(g.push(p.time),delete p.time,f.hasM=!0):g.push(0),g}function ke(g,f,u){var p=Q.Z.XY,h=2;if(g.hasZ&&g.hasM?(p=Q.Z.XYZM,h=4):g.hasZ?(p=Q.Z.XYZ,h=3):g.hasM&&(p=Q.Z.XYM,h=3),h!==4){for(var S=0,b=f.length/4;S<b;S++)f[S*h]=f[S*4],f[S*h+1]=f[S*4+1],g.hasZ&&(f[S*h+2]=f[S*4+2]),g.hasM&&(f[S*h+2]=f[S*4+3]);if(f.length=f.length/4*h,u)for(var S=0,b=u.length;S<b;S++)u[S]=u[S]/4*h}return p}function Fe(g,f){var u=f[f.length-1],p=g.getAttribute("href");p!==null&&(u.link=p),(0,d.T3)(br,g,f)}function lt(g,f){var u=f[f.length-1];u.extensionsNode_=g}function at(g,f){var u=(0,d.O)({},Mn,g,f);if(u){var p=f[f.length-1],h=p.flatCoordinates,S=p.layoutOptions;tt(h,S,g,u)}}function ze(g,f){var u=(0,d.O)({},Fr,g,f);if(u){var p=f[f.length-1],h=p.flatCoordinates,S=p.layoutOptions;tt(h,S,g,u)}}function vt(g,f){var u=f[f.length-1];(0,d.T3)(dn,g,f);var p=u.flatCoordinates,h=u.ends;h.push(p.length)}function Ye(g,f){var u=f[0],p=(0,d.O)({flatCoordinates:[],layoutOptions:{}},Nr,g,f);if(p){var h=p.flatCoordinates;delete p.flatCoordinates;var S=p.layoutOptions;delete p.layoutOptions;var b=ke(S,h),O=new xe.Z(h,b);(0,le.fI)(O,!1,u);var D=new ge.Z(O);return D.setProperties(p,!0),D}}function ee(g,f){var u=f[0],p=(0,d.O)({flatCoordinates:[],ends:[],layoutOptions:{}},wr,g,f);if(p){var h=p.flatCoordinates;delete p.flatCoordinates;var S=p.ends;delete p.ends;var b=p.layoutOptions;delete p.layoutOptions;var O=ke(b,h,S),D=new De.Z(h,O,S);(0,le.fI)(D,!1,u);var J=new ge.Z(D);return J.setProperties(p,!0),J}}function ve(g,f){var u=f[0],p=(0,d.O)({},on,g,f);if(p){var h={},S=tt([],h,g,p),b=ke(h,S),O=new st.Z(S,b);(0,le.fI)(O,!1,u);var D=new ge.Z(O);return D.setProperties(p,!0),D}}function ue(g,f,u){g.setAttribute("href",f);var p=u[u.length-1],h=p.properties,S=[h.linkText,h.linkType];(0,d.ZL)({node:g},zr,d.hg,S,u,Gr)}function Et(g,f,u){var p=u[u.length-1],h=p.node,S=h.namespaceURI,b=p.properties;g.setAttributeNS(null,"lat",String(f[1])),g.setAttributeNS(null,"lon",String(f[0]));var O=p.geometryLayout;switch(O){case Q.Z.XYZM:f[3]!==0&&(b.time=f[3]);case Q.Z.XYZ:f[2]!==0&&(b.ele=f[2]);break;case Q.Z.XYM:f[2]!==0&&(b.time=f[2]);break;default:}var D=g.nodeName=="rtept"?V[S]:B[S],J=(0,d.RA)(b,D);(0,d.ZL)({node:g,properties:b},j,d.hg,J,u,D)}function wt(g,f,u){var p=u[0],h=f.getProperties(),S={node:g};S.properties=h;var b=f.getGeometry();if(b.getType()=="LineString"){var O=(0,le.fI)(b,!0,p);S.geometryLayout=O.getLayout(),h.rtept=O.getCoordinates()}var D=u[u.length-1].node,J=Xe[D.namespaceURI],oe=(0,d.RA)(h,J);(0,d.ZL)(S,Ce,d.hg,oe,u,J)}function Te(g,f,u){var p=u[0],h=f.getProperties(),S={node:g};S.properties=h;var b=f.getGeometry();if(b.getType()=="MultiLineString"){var O=(0,le.fI)(b,!0,p);h.trkseg=O.getLineStrings()}var D=u[u.length-1].node,J=z[D.namespaceURI],oe=(0,d.RA)(h,J);(0,d.ZL)(S,te,d.hg,oe,u,J)}function Zr(g,f,u){var p={node:g};p.geometryLayout=f.getLayout(),p.properties={},(0,d.ZL)(p,W,X,f.getCoordinates(),u)}function Qn(g,f,u){var p=u[0],h=u[u.length-1];h.properties=f.getProperties();var S=f.getGeometry();if(S.getType()=="Point"){var b=(0,le.fI)(S,!0,p);h.geometryLayout=b.getLayout(),Et(g,b.getCoordinates(),u)}}var vn=gt,yn=T(32904),gr=function(){var g=function(f,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var S in h)Object.prototype.hasOwnProperty.call(h,S)&&(p[S]=h[S])},g(f,u)};return function(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}(),yt={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"},Yi=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Dn=/^H.([A-Z]{3}).*?:(.*)/,Ti=/^HFDTE(\d{2})(\d{2})(\d{2})/,mn=/\r\n|\r|\n/,gn=function(g){gr(f,g);function f(u){var p=g.call(this)||this,h=u||{};return p.dataProjection=(0,$.get)("EPSG:4326"),p.altitudeMode_=h.altitudeMode?h.altitudeMode:yt.NONE,p}return f.prototype.readFeatureFromText=function(u,p){var h=this.altitudeMode_,S=u.split(mn),b={},O=[],D=2e3,J=0,oe=1,qe=-1,$e,pt;for($e=0,pt=S.length;$e<pt;++$e){var Ft=S[$e],ot=void 0;if(Ft.charAt(0)=="B"){if(ot=Yi.exec(Ft),ot){var tr=parseInt(ot[1],10),Cr=parseInt(ot[2],10),Vr=parseInt(ot[3],10),Xt=parseInt(ot[4],10)+parseInt(ot[5],10)/6e4;ot[6]=="S"&&(Xt=-Xt);var qt=parseInt(ot[7],10)+parseInt(ot[8],10)/6e4;if(ot[9]=="W"&&(qt=-qt),O.push(qt,Xt),h!=yt.NONE){var Mt=void 0;h==yt.GPS?Mt=parseInt(ot[11],10):h==yt.BAROMETRIC?Mt=parseInt(ot[12],10):Mt=0,O.push(Mt)}var Qt=Date.UTC(D,J,oe,tr,Cr,Vr);Qt<qe&&(Qt=Date.UTC(D,J,oe+1,tr,Cr,Vr)),O.push(Qt/1e3),qe=Qt}}else Ft.charAt(0)=="H"&&(ot=Ti.exec(Ft),ot?(oe=parseInt(ot[1],10),J=parseInt(ot[2],10)-1,D=2e3+parseInt(ot[3],10)):(ot=Dn.exec(Ft),ot&&(b[ot[1]]=ot[2].trim())))}if(O.length===0)return null;var Lt=h==yt.NONE?Q.Z.XYM:Q.Z.XYZM,rn=new xe.Z(O,Lt),yr=new ge.Z((0,le.fI)(rn,!1,p));return yr.setProperties(b,!0),yr},f.prototype.readFeaturesFromText=function(u,p){var h=this.readFeatureFromText(u,p);return h?[h]:[]},f}(yn.Z),xi=gn,rr=T(46410),nr=T(68640),lr=T(72018),sn=T(60316),It=T(12639),Pr=T(32065),fr=T(87710),Ut=T(22683),$n=T(7522),Vt=T(44727),Ur=T(23230),Er=T(82571),Ki=T(95659),Tr=T(99729),Nn=T(12059),Br=T(77767),Yt=function(){var g=function(f,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var S in h)Object.prototype.hasOwnProperty.call(h,S)&&(p[S]=h[S])},g(f,u)};return function(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}(),ir=["http://www.google.com/kml/ext/2.2"],he=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Hr="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ei={fraction:It.Z.FRACTION,pixels:It.Z.PIXELS,insetPixels:It.Z.PIXELS},Hi=(0,d.C5)(he,{ExtendedData:ra,Region:Mi,MultiGeometry:(0,d.Pr)(hr,"geometry"),LineString:(0,d.Pr)(Lr,"geometry"),LinearRing:(0,d.Pr)(en,"geometry"),Point:(0,d.Pr)(zt,"geometry"),Polygon:(0,d.Pr)(dr,"geometry"),Style:(0,d.Pr)(Ci),StyleMap:Ka,address:(0,d.Pr)(R.s2),description:(0,d.Pr)(R.s2),name:(0,d.Pr)(R.s2),open:(0,d.Pr)(R.ud),phoneNumber:(0,d.Pr)(R.s2),styleUrl:(0,d.Pr)(Ii),visibility:(0,d.Pr)(R.ud)},(0,d.C5)(ir,{MultiTrack:(0,d.Pr)($i,"geometry"),Track:(0,d.Pr)(ui,"geometry")})),Ca=(0,d.C5)(he,{ExtendedData:ra,Region:Mi,Link:Di,address:(0,d.Pr)(R.s2),description:(0,d.Pr)(R.s2),name:(0,d.Pr)(R.s2),open:(0,d.Pr)(R.ud),phoneNumber:(0,d.Pr)(R.s2),visibility:(0,d.Pr)(R.ud)}),En=(0,d.C5)(he,{href:(0,d.Pr)(za)}),ti=(0,d.C5)(he,{LatLonAltBox:qa,Lod:$a}),Ma=(0,d.C5)(he,["Document","Placemark"]),Da=(0,d.C5)(he,{Document:(0,d.A4)(Gi),Placemark:(0,d.A4)(Ui)}),Wr,Fn=null;function _o(){return Fn}var ri,Gn,zn,Tn,ni,Jr=null;function Si(){return Jr}var ii,ai=null;function Na(){return ai}var xn,qr=null;function bo(){return qr}var er=null;function wi(){return er}var Ir=null;function Wi(){return Ir}function ar(g){return 32/Math.min(g[0],g[1])}function kr(){Wr=[255,255,255,1],Fn=new nr.Z({color:Wr}),ri=[20,2],Gn=It.Z.PIXELS,zn=It.Z.PIXELS,Tn=[64,64],ni="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Jr=new sn.Z({anchor:ri,anchorOrigin:Pr.Z.BOTTOM_LEFT,anchorXUnits:Gn,anchorYUnits:zn,crossOrigin:"anonymous",rotation:0,scale:ar(Tn),size:Tn,src:ni}),ii="NO_IMAGE",ai=new Ur.Z({color:Wr,width:1}),xn=new Ur.Z({color:[51,51,51,1],width:2}),qr=new Ki.Z({font:"bold 16px Helvetica",fill:Fn,stroke:xn,scale:.8}),er=new Er.ZP({fill:Fn,image:Jr,text:qr,stroke:ai,zIndex:0}),Ir=[er]}var cr;function Fa(g){return g}var Qr=function(g){Yt(f,g);function f(u){var p=g.call(this)||this,h=u||{};return Ir||kr(),p.dataProjection=(0,$.get)("EPSG:4326"),p.defaultStyle_=h.defaultStyle?h.defaultStyle:Ir,p.extractStyles_=h.extractStyles!==void 0?h.extractStyles:!0,p.writeStyles_=h.writeStyles!==void 0?h.writeStyles:!0,p.sharedStyles_={},p.showPointNames_=h.showPointNames!==void 0?h.showPointNames:!0,p.crossOrigin_=h.crossOrigin!==void 0?h.crossOrigin:"anonymous",p.iconUrlFunction_=h.iconUrlFunction?h.iconUrlFunction:Fa,p.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],p}return f.prototype.readDocumentOrFolder_=function(u,p){var h=(0,d.C5)(he,{Document:(0,d.pc)(this.readDocumentOrFolder_,this),Folder:(0,d.pc)(this.readDocumentOrFolder_,this),Placemark:(0,d.Ei)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),S=(0,d.O)([],h,u,p,this);if(S)return S},f.prototype.readPlacemark_=function(u,p){var h=(0,d.O)({geometry:null},Hi,u,p,this);if(h){var S=new ge.Z,b=u.getAttribute("id");b!==null&&S.setId(b);var O=p[0],D=h.geometry;if(D&&(0,le.fI)(D,!1,O),S.setGeometry(D),delete h.geometry,this.extractStyles_){var J=h.Style,oe=h.styleUrl,qe=Zn(J,oe,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);S.setStyle(qe)}return delete h.Style,S.setProperties(h,!0),S}},f.prototype.readSharedStyle_=function(u,p){var h=u.getAttribute("id");if(h!==null){var S=Ci.call(this,u,p);if(S){var b=void 0,O=u.baseURI;if((!O||O=="about:blank")&&(O=window.location.href),O){var D=new URL("#"+h,O);b=D.href}else b="#"+h;this.sharedStyles_[b]=S}}},f.prototype.readSharedStyleMap_=function(u,p){var h=u.getAttribute("id");if(h!==null){var S=$r.call(this,u,p);if(S){var b,O=u.baseURI;if((!O||O=="about:blank")&&(O=window.location.href),O){var D=new URL("#"+h,O);b=D.href}else b="#"+h;this.sharedStyles_[b]=S}}},f.prototype.readFeatureFromNode=function(u,p){if(!(0,G.q9)(he,u.namespaceURI))return null;var h=this.readPlacemark_(u,[this.getReadOptions(u,p)]);return h||null},f.prototype.readFeaturesFromNode=function(u,p){if(!(0,G.q9)(he,u.namespaceURI))return[];var h,S=u.localName;if(S=="Document"||S=="Folder")return h=this.readDocumentOrFolder_(u,[this.getReadOptions(u,p)]),h||[];if(S=="Placemark"){var b=this.readPlacemark_(u,[this.getReadOptions(u,p)]);return b?[b]:[]}else if(S=="kml"){h=[];for(var O=u.firstElementChild;O;O=O.nextElementSibling){var D=this.readFeaturesFromNode(O,p);D&&(0,G.l7)(h,D)}return h}else return[]},f.prototype.readName=function(u){if(u)if(typeof u=="string"){var p=(0,d.Qc)(u);return this.readNameFromDocument(p)}else return(0,d.qk)(u)?this.readNameFromDocument(u):this.readNameFromNode(u);else return},f.prototype.readNameFromDocument=function(u){for(var p=u.firstChild;p;p=p.nextSibling)if(p.nodeType==Node.ELEMENT_NODE){var h=this.readNameFromNode(p);if(h)return h}},f.prototype.readNameFromNode=function(u){for(var p=u.firstElementChild;p;p=p.nextElementSibling)if((0,G.q9)(he,p.namespaceURI)&&p.localName=="name")return(0,R.s2)(p);for(var p=u.firstElementChild;p;p=p.nextElementSibling){var h=p.localName;if((0,G.q9)(he,p.namespaceURI)&&(h=="Document"||h=="Folder"||h=="Placemark"||h=="kml")){var S=this.readNameFromNode(p);if(S)return S}}},f.prototype.readNetworkLinks=function(u){var p=[];if(typeof u=="string"){var h=(0,d.Qc)(u);(0,G.l7)(p,this.readNetworkLinksFromDocument(h))}else(0,d.qk)(u)?(0,G.l7)(p,this.readNetworkLinksFromDocument(u)):(0,G.l7)(p,this.readNetworkLinksFromNode(u));return p},f.prototype.readNetworkLinksFromDocument=function(u){for(var p=[],h=u.firstChild;h;h=h.nextSibling)h.nodeType==Node.ELEMENT_NODE&&(0,G.l7)(p,this.readNetworkLinksFromNode(h));return p},f.prototype.readNetworkLinksFromNode=function(u){for(var p=[],h=u.firstElementChild;h;h=h.nextElementSibling)if((0,G.q9)(he,h.namespaceURI)&&h.localName=="NetworkLink"){var S=(0,d.O)({},Ca,h,[]);p.push(S)}for(var h=u.firstElementChild;h;h=h.nextElementSibling){var b=h.localName;(0,G.q9)(he,h.namespaceURI)&&(b=="Document"||b=="Folder"||b=="kml")&&(0,G.l7)(p,this.readNetworkLinksFromNode(h))}return p},f.prototype.readRegion=function(u){var p=[];if(typeof u=="string"){var h=(0,d.Qc)(u);(0,G.l7)(p,this.readRegionFromDocument(h))}else(0,d.qk)(u)?(0,G.l7)(p,this.readRegionFromDocument(u)):(0,G.l7)(p,this.readRegionFromNode(u));return p},f.prototype.readRegionFromDocument=function(u){for(var p=[],h=u.firstChild;h;h=h.nextSibling)h.nodeType==Node.ELEMENT_NODE&&(0,G.l7)(p,this.readRegionFromNode(h));return p},f.prototype.readRegionFromNode=function(u){for(var p=[],h=u.firstElementChild;h;h=h.nextElementSibling)if((0,G.q9)(he,h.namespaceURI)&&h.localName=="Region"){var S=(0,d.O)({},ti,h,[]);p.push(S)}for(var h=u.firstElementChild;h;h=h.nextElementSibling){var b=h.localName;(0,G.q9)(he,h.namespaceURI)&&(b=="Document"||b=="Folder"||b=="kml")&&(0,G.l7)(p,this.readRegionFromNode(h))}return p},f.prototype.writeFeaturesNode=function(u,p){p=this.adaptOptions(p);var h=(0,d.c)(he[4],"kml"),S="http://www.w3.org/2000/xmlns/";h.setAttributeNS(S,"xmlns:gx",ir[0]),h.setAttributeNS(S,"xmlns:xsi",d.fJ),h.setAttributeNS(d.fJ,"xsi:schemaLocation",Hr);var b={node:h},O={};u.length>1?O.Document=u:u.length==1&&(O.Placemark=u[0]);var D=Ma[h.namespaceURI],J=(0,d.RA)(O,D);return(0,d.ZL)(b,Da,d.hg,J,[p],D,this),h},f}(ut.Z);function Ga(g,f){var u=[0,0],p="start",h=g.getImage();if(h){var S=h.getSize();if(S&&S.length==2){var b=h.getScaleArray(),O=h.getAnchor();u[0]=b[0]*(S[0]-O[0]),u[1]=b[1]*(S[1]/2-O[1]),p="left"}}var D=g.getText();D?(D=D.clone(),D.setFont(D.getFont()||qr.getFont()),D.setScale(D.getScale()||qr.getScale()),D.setFill(D.getFill()||qr.getFill()),D.setStroke(D.getStroke()||xn)):D=qr.clone(),D.setText(f),D.setOffsetX(u[0]),D.setOffsetY(u[1]),D.setTextAlign(p);var J=new Er.ZP({image:h,text:D});return J}function Zn(g,f,u,p,h){return function(S,b){var O=h,D="",J=[];if(O){var oe=S.getGeometry();if(oe)if(oe instanceof lr.Z)J=oe.getGeometriesArrayRecursive().filter(function(ot){var tr=ot.getType();return tr==="Point"||tr==="MultiPoint"}),O=J.length>0;else{var qe=oe.getType();O=qe==="Point"||qe==="MultiPoint"}}O&&(D=S.get("name"),O=O&&!!D,O&&D.search(/&[^&]+;/)>-1&&(cr||(cr=document.createElement("textarea")),cr.innerHTML=D,D=cr.value));var $e=u;if(g?$e=g:f&&($e=pr(f,u,p)),O){var pt=Ga($e[0],D);if(J.length>0){pt.setGeometry(new lr.Z(J));var Ft=new Er.ZP({geometry:$e[0].getGeometry(),image:null,fill:$e[0].getFill(),stroke:$e[0].getStroke(),text:null});return[pt,Ft].concat($e.slice(1))}return pt}return $e}}function pr(g,f,u){return Array.isArray(g)?g:typeof g=="string"?pr(u[g],f,u):f}function oi(g){var f=(0,d.Ve)(g,!1),u=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(f);if(u){var p=u[1];return[parseInt(p.substr(6,2),16),parseInt(p.substr(4,2),16),parseInt(p.substr(2,2),16),parseInt(p.substr(0,2),16)/255]}else return}function Ji(g){var f=(0,d.Ve)(g,!1),u=[];f=f.replace(/\s*,\s*/g,",");for(var p=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i,h;h=p.exec(f);){var S=parseFloat(h[1]),b=parseFloat(h[2]),O=h[3]?parseFloat(h[3]):0;u.push(S,b,O),f=f.substr(h[0].length)}if(f==="")return u}function za(g){var f=(0,d.Ve)(g,!1).trim(),u=g.baseURI;if((!u||u=="about:blank")&&(u=window.location.href),u){var p=new URL(f,u);return p.href}else return f}function Ii(g){var f=(0,d.Ve)(g,!1).trim().replace(/^(?!.*#)/,"#"),u=g.baseURI;if((!u||u=="about:blank")&&(u=window.location.href),u){var p=new URL(f,u);return p.href}else return f}function Ri(g){var f=g.getAttribute("xunits"),u=g.getAttribute("yunits"),p;return f!=="insetPixels"?u!=="insetPixels"?p=Pr.Z.BOTTOM_LEFT:p=Pr.Z.TOP_LEFT:u!=="insetPixels"?p=Pr.Z.BOTTOM_RIGHT:p=Pr.Z.TOP_RIGHT,{x:parseFloat(g.getAttribute("x")),xunits:ei[f],y:parseFloat(g.getAttribute("y")),yunits:ei[u],origin:p}}function si(g){return(0,R.fy)(g)}var qi=(0,d.C5)(he,{Pair:Ya});function $r(g,f){return(0,d.O)(void 0,qi,g,f,this)}var _i=(0,d.C5)(he,{Icon:(0,d.Pr)(Sn),color:(0,d.Pr)(oi),heading:(0,d.Pr)(R.fy),hotSpot:(0,d.Pr)(Ri),scale:(0,d.Pr)(si)});function bi(g,f){var u=(0,d.O)({},_i,g,f);if(u){var p=f[f.length-1],h="Icon"in u?u.Icon:{},S=!("Icon"in u)||Object.keys(h).length>0,b,O=h.href;O?b=O:S&&(b=ni);var D,J,oe,qe=Pr.Z.BOTTOM_LEFT,$e=u.hotSpot;$e?(D=[$e.x,$e.y],J=$e.xunits,oe=$e.yunits,qe=$e.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(b)&&(/pushpin/.test(b)?(D=ri,J=Gn,oe=zn):/arrow-reverse/.test(b)?(D=[54,42],J=Gn,oe=zn):/paddle/.test(b)&&(D=[32,1],J=Gn,oe=zn));var pt,Ft=h.x,ot=h.y;Ft!==void 0&&ot!==void 0&&(pt=[Ft,ot]);var tr,Cr=h.w,Vr=h.h;Cr!==void 0&&Vr!==void 0&&(tr=[Cr,Vr]);var Xt,qt=u.heading;qt!==void 0&&(Xt=(0,Br.Yr)(qt));var Mt=u.scale,Qt=u.color;if(S){b==ni&&(tr=Tn);var Lt=new sn.Z({anchor:D,anchorOrigin:qe,anchorXUnits:J,anchorYUnits:oe,crossOrigin:this.crossOrigin_,offset:pt,offsetOrigin:Pr.Z.BOTTOM_LEFT,rotation:Xt,scale:Mt,size:tr,src:this.iconUrlFunction_(b),color:Qt}),rn=Lt.getScaleArray()[0],yr=Lt.getSize();if(yr===null){var po=Lt.getImageState();if(po===fr.Z.IDLE||po===fr.Z.LOADING){var Co=function(){var Mo=Lt.getImageState();if(!(Mo===fr.Z.IDLE||Mo===fr.Z.LOADING)){var ho=Lt.getSize();if(ho&&ho.length==2){var qo=ar(ho);Lt.setScale(rn*qo)}Lt.unlistenImageChange(Co)}};Lt.listenImageChange(Co),po===fr.Z.IDLE&&Lt.load()}}else if(yr.length==2){var Jo=ar(yr);Lt.setScale(rn*Jo)}p.imageStyle=Lt}else p.imageStyle=ii}}var Za=(0,d.C5)(he,{color:(0,d.Pr)(oi),scale:(0,d.Pr)(si)});function Ua(g,f){var u=(0,d.O)({},Za,g,f);if(u){var p=f[f.length-1],h=new Ki.Z({fill:new nr.Z({color:"color"in u?u.color:Wr}),scale:u.scale});p.textStyle=h}}var Ai=(0,d.C5)(he,{color:(0,d.Pr)(oi),width:(0,d.Pr)(R.fy)});function Pi(g,f){var u=(0,d.O)({},Ai,g,f);if(u){var p=f[f.length-1],h=new Ur.Z({color:"color"in u?u.color:Wr,width:"width"in u?u.width:1});p.strokeStyle=h}}var Li=(0,d.C5)(he,{color:(0,d.Pr)(oi),fill:(0,d.Pr)(R.ud),outline:(0,d.Pr)(R.ud)});function Oi(g,f){var u=(0,d.O)({},Li,g,f);if(u){var p=f[f.length-1],h=new nr.Z({color:"color"in u?u.color:Wr});p.fillStyle=h;var S=u.fill;S!==void 0&&(p.fill=S);var b=u.outline;b!==void 0&&(p.outline=b)}}var Qi=(0,d.C5)(he,{coordinates:(0,d.z)(Ji)});function un(g,f){return(0,d.O)(null,Qi,g,f)}function Ba(g,f){var u=f[f.length-1],p=u.coordinates,h=(0,d.Ve)(g,!1),S=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i,b=S.exec(h);if(b){var O=parseFloat(b[1]),D=parseFloat(b[2]),J=parseFloat(b[3]);p.push([O,D,J])}else p.push([])}var ka=(0,d.C5)(ir,{Track:(0,d.Ei)(ui)});function $i(g,f){var u=(0,d.O)([],ka,g,f);if(u)return new De.Z(u)}var ja=(0,d.C5)(he,{when:ia},(0,d.C5)(ir,{coord:Ba}));function ui(g,f){var u=(0,d.O)({coordinates:[],whens:[]},ja,g,f);if(u){for(var p=[],h=u.coordinates,S=u.whens,b=0,O=Math.min(h.length,S.length);b<O;++b)h[b].length==3&&p.push(h[b][0],h[b][1],h[b][2],S[b]);return new xe.Z(p,Q.Z.XYZM)}}var li=(0,d.C5)(he,{href:(0,d.Pr)(za)},(0,d.C5)(ir,{x:(0,d.Pr)(R.fy),y:(0,d.Pr)(R.fy),w:(0,d.Pr)(R.fy),h:(0,d.Pr)(R.fy)}));function Sn(g,f){var u=(0,d.O)({},li,g,f);return u||null}var Gt=(0,d.C5)(he,{coordinates:(0,d.z)(Ji)});function wn(g,f){return(0,d.O)(null,Gt,g,f)}var or=(0,d.C5)(he,{extrude:(0,d.Pr)(R.ud),tessellate:(0,d.Pr)(R.ud),altitudeMode:(0,d.Pr)(R.s2)});function Lr(g,f){var u=(0,d.O)({},or,g,f),p=wn(g,f);if(p){var h=new xe.Z(p,Q.Z.XYZ);return h.setProperties(u,!0),h}else return}function en(g,f){var u=(0,d.O)({},or,g,f),p=wn(g,f);if(p){var h=new Vt.ZP(p,Q.Z.XYZ,[p.length]);return h.setProperties(u,!0),h}else return}var ln=(0,d.C5)(he,{LineString:(0,d.Ei)(Lr),LinearRing:(0,d.Ei)(en),MultiGeometry:(0,d.Ei)(hr),Point:(0,d.Ei)(zt),Polygon:(0,d.Ei)(dr)});function hr(g,f){var u=(0,d.O)([],ln,g,f);if(!u)return null;if(u.length===0)return new lr.Z(u);for(var p,h=!0,S=u[0].getType(),b,O=1,D=u.length;O<D;++O)if(b=u[O],b.getType()!=S){h=!1;break}if(h){var J=void 0,oe=void 0;if(S=="Point"){var qe=u[0];J=qe.getLayout(),oe=qe.getFlatCoordinates();for(var O=1,D=u.length;O<D;++O)b=u[O],(0,G.l7)(oe,b.getFlatCoordinates());p=new Ut.Z(oe,J),Or(p,u)}else S=="LineString"?(p=new De.Z(u),Or(p,u)):S=="Polygon"?(p=new $n.Z(u),Or(p,u)):S=="GeometryCollection"?p=new lr.Z(u):(0,Nn.h)(!1,37)}else p=new lr.Z(u);return p}function zt(g,f){var u=(0,d.O)({},or,g,f),p=wn(g,f);if(p){var h=new st.Z(p,Q.Z.XYZ);return h.setProperties(u,!0),h}else return}var fn=(0,d.C5)(he,{innerBoundaryIs:to,outerBoundaryIs:tn});function dr(g,f){var u=(0,d.O)({},or,g,f),p=(0,d.O)([null],fn,g,f);if(p&&p[0]){for(var h=p[0],S=[h.length],b=1,O=p.length;b<O;++b)(0,G.l7)(h,p[b]),S.push(h.length);var D=new Vt.ZP(h,Q.Z.XYZ,S);return D.setProperties(u,!0),D}else return}var ea=(0,d.C5)(he,{IconStyle:bi,LabelStyle:Ua,LineStyle:Pi,PolyStyle:Oi});function Ci(g,f){var u=(0,d.O)({},ea,g,f,this);if(!u)return null;var p="fillStyle"in u?u.fillStyle:Fn,h=u.fill;h!==void 0&&!h&&(p=null);var S;"imageStyle"in u?u.imageStyle!=ii&&(S=u.imageStyle):S=Jr;var b="textStyle"in u?u.textStyle:qr,O="strokeStyle"in u?u.strokeStyle:ai,D=u.outline;return D!==void 0&&!D?[new Er.ZP({geometry:function(J){var oe=J.getGeometry(),qe=oe.getType();if(qe==="GeometryCollection"){var $e=oe;return new lr.Z($e.getGeometriesArrayRecursive().filter(function(pt){var Ft=pt.getType();return Ft!=="Polygon"&&Ft!=="MultiPolygon"}))}else if(qe!=="Polygon"&&qe!=="MultiPolygon")return oe},fill:p,image:S,stroke:O,text:b,zIndex:void 0}),new Er.ZP({geometry:function(J){var oe=J.getGeometry(),qe=oe.getType();if(qe==="GeometryCollection"){var $e=oe;return new lr.Z($e.getGeometriesArrayRecursive().filter(function(pt){var Ft=pt.getType();return Ft==="Polygon"||Ft==="MultiPolygon"}))}else if(qe==="Polygon"||qe==="MultiPolygon")return oe},fill:p,stroke:null,zIndex:void 0})]:[new Er.ZP({fill:p,image:S,stroke:O,text:b,zIndex:void 0})]}function Or(g,f){var u=f.length,p=new Array(f.length),h=new Array(f.length),S=new Array(f.length),b,O,D;b=!1,O=!1,D=!1;for(var J=0;J<u;++J){var oe=f[J];p[J]=oe.get("extrude"),h[J]=oe.get("tessellate"),S[J]=oe.get("altitudeMode"),b=b||p[J]!==void 0,O=O||h[J]!==void 0,D=D||S[J]}b&&g.set("extrude",p),O&&g.set("tessellate",h),D&&g.set("altitudeMode",S)}var Xa=(0,d.C5)(he,{displayName:(0,d.Pr)(R.s2),value:(0,d.Pr)(R.s2)});function ta(g,f){var u=g.getAttribute("name");(0,d.T3)(Xa,g,f);var p=f[f.length-1];u&&p.displayName?p[u]={value:p.value,displayName:p.displayName,toString:function(){return p.value}}:u!==null?p[u]=p.value:p.displayName!==null&&(p[p.displayName]=p.value),delete p.value}var Va=(0,d.C5)(he,{Data:ta,SchemaData:Wa});function ra(g,f){(0,d.T3)(Va,g,f)}function Mi(g,f){(0,d.T3)(ti,g,f)}var na=(0,d.C5)(he,{Style:(0,d.Pr)(Ci),key:(0,d.Pr)(R.s2),styleUrl:(0,d.Pr)(Ii)});function Ya(g,f){var u=(0,d.O)({},na,g,f,this);if(u){var p=u.key;if(p&&p=="normal"){var h=u.styleUrl;h&&(f[f.length-1]=h);var S=u.Style;S&&(f[f.length-1]=S)}}}function Ka(g,f){var u=$r.call(this,g,f);if(u){var p=f[f.length-1];Array.isArray(u)?p.Style=u:typeof u=="string"?p.styleUrl=u:(0,Nn.h)(!1,38)}}var Ha=(0,d.C5)(he,{SimpleData:In});function Wa(g,f){(0,d.T3)(Ha,g,f)}function In(g,f){var u=g.getAttribute("name");if(u!==null){var p=(0,R.s2)(g),h=f[f.length-1];h[u]=p}}var Ja=(0,d.C5)(he,{altitudeMode:(0,d.Pr)(R.s2),minAltitude:(0,d.Pr)(R.fy),maxAltitude:(0,d.Pr)(R.fy),north:(0,d.Pr)(R.fy),south:(0,d.Pr)(R.fy),east:(0,d.Pr)(R.fy),west:(0,d.Pr)(R.fy)});function qa(g,f){var u=(0,d.O)({},Ja,g,f);if(u){var p=f[f.length-1],h=[parseFloat(u.west),parseFloat(u.south),parseFloat(u.east),parseFloat(u.north)];p.extent=h,p.altitudeMode=u.altitudeMode,p.minAltitude=parseFloat(u.minAltitude),p.maxAltitude=parseFloat(u.maxAltitude)}}var Qa=(0,d.C5)(he,{minLodPixels:(0,d.Pr)(R.fy),maxLodPixels:(0,d.Pr)(R.fy),minFadeExtent:(0,d.Pr)(R.fy),maxFadeExtent:(0,d.Pr)(R.fy)});function $a(g,f){var u=(0,d.O)({},Qa,g,f);if(u){var p=f[f.length-1];p.minLodPixels=parseFloat(u.minLodPixels),p.maxLodPixels=parseFloat(u.maxLodPixels),p.minFadeExtent=parseFloat(u.minFadeExtent),p.maxFadeExtent=parseFloat(u.maxFadeExtent)}}var eo=(0,d.C5)(he,{LinearRing:(0,d.Ei)(un)});function to(g,f){var u=(0,d.O)([],eo,g,f);if(u.length>0){var p=f[f.length-1];p.push.apply(p,u)}}var cn=(0,d.C5)(he,{LinearRing:(0,d.z)(un)});function tn(g,f){var u=(0,d.O)(void 0,cn,g,f);if(u){var p=f[f.length-1];p[0]=u}}function Di(g,f){(0,d.T3)(En,g,f)}function ia(g,f){var u=f[f.length-1],p=u.whens,h=(0,d.Ve)(g,!1),S=Date.parse(h);p.push(isNaN(S)?0:S)}function Un(g,f){for(var u=(0,Tr._2)(f),p=u.length==4?u[3]:1,h=[p*255,u[2],u[1],u[0]],S=0;S<4;++S){var b=Math.floor(h[S]).toString(16);h[S]=b.length==1?"0"+b:b}(0,R.bZ)(g,h.join(""))}function Ni(g,f,u){var p=u[u.length-1],h=p.layout,S=p.stride,b;h==Q.Z.XY||h==Q.Z.XYM?b=2:h==Q.Z.XYZ||h==Q.Z.XYZM?b=3:(0,Nn.h)(!1,34);var O=f.length,D="";if(O>0){D+=f[0];for(var J=1;J<b;++J)D+=","+f[J];for(var oe=S;oe<O;oe+=S){D+=" "+f[oe];for(var J=1;J<b;++J)D+=","+f[oe+J]}}(0,R.bZ)(g,D)}var fi=(0,d.C5)(he,{Data:(0,d.A4)(jr),value:(0,d.A4)(Rn),displayName:(0,d.A4)(Fi)});function jr(g,f,u){g.setAttribute("name",f.name);var p={node:g},h=f.value;typeof h=="object"?(h!==null&&h.displayName&&(0,d.ZL)(p,fi,d.hg,[h.displayName],u,["displayName"]),h!==null&&h.value&&(0,d.ZL)(p,fi,d.hg,[h.value],u,["value"])):(0,d.ZL)(p,fi,d.hg,[h],u,["value"])}function Fi(g,f){(0,R.xO)(g,f)}function Rn(g,f){(0,R.bZ)(g,f)}var aa=(0,d.C5)(he,{Placemark:(0,d.A4)(Ui)}),ro=function(g,f,u){var p=f[f.length-1].node;return(0,d.c)(p.namespaceURI,"Placemark")};function Gi(g,f,u){var p={node:g};(0,d.ZL)(p,aa,ro,f,u,void 0,this)}var zi=(0,d.G3)("Data");function Bn(g,f,u){for(var p={node:g},h=f.names,S=f.values,b=h.length,O=0;O<b;O++)(0,d.ZL)(p,fi,zi,[{name:h[O],value:S[O]}],u)}var oa=(0,d.C5)(he,["href"],(0,d.C5)(ir,["x","y","w","h"])),kn=(0,d.C5)(he,{href:(0,d.A4)(R.bZ)},(0,d.C5)(ir,{x:(0,d.A4)(R.f3),y:(0,d.A4)(R.f3),w:(0,d.A4)(R.f3),h:(0,d.A4)(R.f3)})),ci=function(g,f,u){return(0,d.c)(ir[0],"gx:"+u)};function jn(g,f,u){var p={node:g},h=u[u.length-1].node,S=oa[h.namespaceURI],b=(0,d.RA)(f,S);(0,d.ZL)(p,kn,d.hg,b,u,S),S=oa[ir[0]],b=(0,d.RA)(f,S),(0,d.ZL)(p,kn,ci,b,u,S)}var no=(0,d.C5)(he,["scale","heading","Icon","color","hotSpot"]),Xn=(0,d.C5)(he,{Icon:(0,d.A4)(jn),color:(0,d.A4)(Un),heading:(0,d.A4)(R.f3),hotSpot:(0,d.A4)(o),scale:(0,d.A4)(hi)});function sa(g,f,u){var p={node:g},h={},S=f.getSrc(),b=f.getSize(),O=f.getImageSize(),D={href:S};if(b){D.w=b[0],D.h=b[1];var J=f.getAnchor(),oe=f.getOrigin();if(oe&&O&&oe[0]!==0&&oe[1]!==b[1]&&(D.x=oe[0],D.y=O[1]-(oe[1]+b[1])),J&&(J[0]!==b[0]/2||J[1]!==b[1]/2)){var qe={x:J[0],xunits:It.Z.PIXELS,y:b[1]-J[1],yunits:It.Z.PIXELS};h.hotSpot=qe}}h.Icon=D;var $e=f.getScaleArray()[0],pt=b;if(pt===null&&(pt=Tn),pt.length==2){var Ft=ar(pt);$e=$e/Ft}$e!==1&&(h.scale=$e);var ot=f.getRotation();ot!==0&&(h.heading=ot);var tr=f.getColor();tr&&(h.color=tr);var Cr=u[u.length-1].node,Vr=no[Cr.namespaceURI],Xt=(0,d.RA)(h,Vr);(0,d.ZL)(p,Xn,d.hg,Xt,u,Vr)}var ua=(0,d.C5)(he,["color","scale"]),la=(0,d.C5)(he,{color:(0,d.A4)(Un),scale:(0,d.A4)(hi)});function Xr(g,f,u){var p={node:g},h={},S=f.getFill();S&&(h.color=S.getColor());var b=f.getScale();b&&b!==1&&(h.scale=b);var O=u[u.length-1].node,D=ua[O.namespaceURI],J=(0,d.RA)(h,D);(0,d.ZL)(p,la,d.hg,J,u,D)}var fa=(0,d.C5)(he,["color","width"]),ca=(0,d.C5)(he,{color:(0,d.A4)(Un),width:(0,d.A4)(R.f3)});function io(g,f,u){var p={node:g},h={color:f.getColor(),width:Number(f.getWidth())||1},S=u[u.length-1].node,b=fa[S.namespaceURI],O=(0,d.RA)(h,b);(0,d.ZL)(p,ca,d.hg,O,u,b)}var ao={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Zi=function(g,f,u){if(g){var p=f[f.length-1].node;return(0,d.c)(p.namespaceURI,ao[g.getType()])}},pa=(0,d.G3)("Point"),_n=(0,d.G3)("LineString"),oo=(0,d.G3)("LinearRing"),so=(0,d.G3)("Polygon"),uo=(0,d.C5)(he,{LineString:(0,d.A4)(bn),Point:(0,d.A4)(bn),Polygon:(0,d.A4)(ki),GeometryCollection:(0,d.A4)(ha)});function ha(g,f,u){var p={node:g},h=f.getType(),S=[],b;h==="GeometryCollection"?(f.getGeometriesArrayRecursive().forEach(function(O){var D=O.getType();D==="MultiPoint"?S=S.concat(O.getPoints()):D==="MultiLineString"?S=S.concat(O.getLineStrings()):D==="MultiPolygon"?S=S.concat(O.getPolygons()):D==="Point"||D==="LineString"||D==="Polygon"?S.push(O):(0,Nn.h)(!1,39)}),b=Zi):h==="MultiPoint"?(S=f.getPoints(),b=pa):h==="MultiLineString"?(S=f.getLineStrings(),b=_n):h==="MultiPolygon"?(S=f.getPolygons(),b=so):(0,Nn.h)(!1,39),(0,d.ZL)(p,uo,b,S,u)}var da=(0,d.C5)(he,{LinearRing:(0,d.A4)(bn)});function Vn(g,f,u){var p={node:g};(0,d.ZL)(p,da,oo,[f],u)}var Yn=(0,d.C5)(he,{ExtendedData:(0,d.A4)(Bn),MultiGeometry:(0,d.A4)(ha),LineString:(0,d.A4)(bn),LinearRing:(0,d.A4)(bn),Point:(0,d.A4)(bn),Polygon:(0,d.A4)(ki),Style:(0,d.A4)(i),address:(0,d.A4)(R.bZ),description:(0,d.A4)(R.bZ),name:(0,d.A4)(R.bZ),open:(0,d.A4)(R.Vi),phoneNumber:(0,d.A4)(R.bZ),styleUrl:(0,d.A4)(R.bZ),visibility:(0,d.A4)(R.Vi)}),lo=(0,d.C5)(he,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),va=(0,d.G3)("ExtendedData");function Ui(g,f,u){var p={node:g};f.getId()&&g.setAttribute("id",f.getId());var h=f.getProperties(),S={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};S[f.getGeometryName()]=1;var b=Object.keys(h||{}).sort().filter(function(Mt){return!S[Mt]}),O=f.getStyleFunction();if(O){var D=O(f,0);if(D){var J=Array.isArray(D)?D:[D],oe=J;if(f.getGeometry()&&(oe=J.filter(function(Mt){var Qt=Mt.getGeometryFunction()(f);if(Qt){var Lt=Qt.getType();return Lt==="GeometryCollection"?Qt.getGeometriesArrayRecursive().filter(function(rn){var yr=rn.getType();return yr==="Point"||yr==="MultiPoint"}).length:Lt==="Point"||Lt==="MultiPoint"}})),this.writeStyles_){var qe=J,$e=J;f.getGeometry()&&(qe=J.filter(function(Mt){var Qt=Mt.getGeometryFunction()(f);if(Qt){var Lt=Qt.getType();return Lt==="GeometryCollection"?Qt.getGeometriesArrayRecursive().filter(function(rn){var yr=rn.getType();return yr==="LineString"||yr==="MultiLineString"}).length:Lt==="LineString"||Lt==="MultiLineString"}}),$e=J.filter(function(Mt){var Qt=Mt.getGeometryFunction()(f);if(Qt){var Lt=Qt.getType();return Lt==="GeometryCollection"?Qt.getGeometriesArrayRecursive().filter(function(rn){var yr=rn.getType();return yr==="Polygon"||yr==="MultiPolygon"}).length:Lt==="Polygon"||Lt==="MultiPolygon"}})),h.Style={pointStyles:oe,lineStyles:qe,polyStyles:$e}}if(oe.length&&h.name===void 0){var pt=oe[0].getText();pt&&(h.name=pt.getText())}}}var Ft=u[u.length-1].node,ot=lo[Ft.namespaceURI],tr=(0,d.RA)(h,ot);if((0,d.ZL)(p,Yn,d.hg,tr,u,ot),b.length>0){var Cr=(0,d.RA)(h,b),Vr={names:b,values:Cr};(0,d.ZL)(p,Yn,va,[Vr],u)}var Xt=u[0],qt=f.getGeometry();qt&&(qt=(0,le.fI)(qt,!0,Xt)),(0,d.ZL)(p,Yn,Zi,[qt],u)}var pi=(0,d.C5)(he,["extrude","tessellate","altitudeMode","coordinates"]),fo=(0,d.C5)(he,{extrude:(0,d.A4)(R.Vi),tessellate:(0,d.A4)(R.Vi),altitudeMode:(0,d.A4)(R.bZ),coordinates:(0,d.A4)(Ni)});function bn(g,f,u){var p=f.getFlatCoordinates(),h={node:g};h.layout=f.getLayout(),h.stride=f.getStride();var S=f.getProperties();S.coordinates=p;var b=u[u.length-1].node,O=pi[b.namespaceURI],D=(0,d.RA)(S,O);(0,d.ZL)(h,fo,d.hg,D,u,O)}var ya=(0,d.C5)(he,["color","fill","outline"]),Bi=(0,d.C5)(he,{outerBoundaryIs:(0,d.A4)(Vn),innerBoundaryIs:(0,d.A4)(Vn)}),Kn=(0,d.G3)("innerBoundaryIs"),ma=(0,d.G3)("outerBoundaryIs");function ki(g,f,u){var p=f.getLinearRings(),h=p.shift(),S={node:g};(0,d.ZL)(S,Bi,Kn,p,u),(0,d.ZL)(S,Bi,ma,[h],u)}var ji=(0,d.C5)(he,{color:(0,d.A4)(Un),fill:(0,d.A4)(R.Vi),outline:(0,d.A4)(R.Vi)});function ga(g,f,u){var p={node:g},h=f.getFill(),S=f.getStroke(),b={color:h?h.getColor():void 0,fill:h?void 0:!1,outline:S?void 0:!1},O=u[u.length-1].node,D=ya[O.namespaceURI],J=(0,d.RA)(b,D);(0,d.ZL)(p,ji,d.hg,J,u,D)}function hi(g,f){(0,R.f3)(g,Math.round(f*1e6)/1e6)}var y=(0,d.C5)(he,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),s=(0,d.C5)(he,{IconStyle:(0,d.A4)(sa),LabelStyle:(0,d.A4)(Xr),LineStyle:(0,d.A4)(io),PolyStyle:(0,d.A4)(ga)});function i(g,f,u){var p={node:g},h={};if(f.pointStyles.length){var S=f.pointStyles[0].getText();S&&(h.LabelStyle=S);var b=f.pointStyles[0].getImage();b&&typeof b.getSrc=="function"&&(h.IconStyle=b)}if(f.lineStyles.length){var O=f.lineStyles[0].getStroke();O&&(h.LineStyle=O)}if(f.polyStyles.length){var O=f.polyStyles[0].getStroke();O&&!h.LineStyle&&(h.LineStyle=O),h.PolyStyle=f.polyStyles[0]}var D=u[u.length-1].node,J=y[D.namespaceURI],oe=(0,d.RA)(h,J);(0,d.ZL)(p,s,d.hg,oe,u,J)}function o(g,f){g.setAttribute("x",String(f.x)),g.setAttribute("y",String(f.y)),g.setAttribute("xunits",f.xunits),g.setAttribute("yunits",f.yunits)}var l=Qr,v=T(25002),x=T(36717);function w(g,f,u,p,h,S){var b,O;h!==void 0?(b=h,O=S!==void 0?S:0):(b=[],O=0);for(var D=f;D<u;){var J=g[D++];b[O++]=g[D++],b[O++]=J;for(var oe=2;oe<p;++oe)b[O++]=g[D++]}return b.length=O,b}var _=T(7115),L=T(97652),M=function(){var g=function(f,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var S in h)Object.prototype.hasOwnProperty.call(h,S)&&(p[S]=h[S])},g(f,u)};return function(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}(),F=function(g){M(f,g);function f(u){var p=g.call(this)||this,h=u||{};return p.dataProjection=(0,$.get)("EPSG:4326"),p.factor_=h.factor?h.factor:1e5,p.geometryLayout_=h.geometryLayout?h.geometryLayout:Q.Z.XY,p}return f.prototype.readFeatureFromText=function(u,p){var h=this.readGeometryFromText(u,p);return new ge.Z(h)},f.prototype.readFeaturesFromText=function(u,p){var h=this.readFeatureFromText(u,p);return[h]},f.prototype.readGeometryFromText=function(u,p){var h=(0,_.tP)(this.geometryLayout_),S=K(u,h,this.factor_);w(S,0,S.length,h,S);var b=(0,L.Ml)(S,0,S.length,h),O=new xe.Z(b,this.geometryLayout_);return(0,le.fI)(O,!1,this.adaptOptions(p))},f.prototype.writeFeatureText=function(u,p){var h=u.getGeometry();return h?this.writeGeometryText(h,p):((0,Nn.h)(!1,40),"")},f.prototype.writeFeaturesText=function(u,p){return this.writeFeatureText(u[0],p)},f.prototype.writeGeometryText=function(u,p){u=(0,le.fI)(u,!0,this.adaptOptions(p));var h=u.getFlatCoordinates(),S=u.getStride();return w(h,0,h.length,S,h),U(h,S,this.factor_)},f}(yn.Z);function U(g,f,u){var p=u||1e5,h,S=new Array(f);for(h=0;h<f;++h)S[h]=0;for(var b=0,O=g.length;b<O;)for(h=0;h<f;++h,++b){var D=g[b],J=D-S[h];S[h]=D,g[b]=J}return Y(g,p)}function K(g,f,u){var p=u||1e5,h,S=new Array(f);for(h=0;h<f;++h)S[h]=0;for(var b=ne(g,p),O=0,D=b.length;O<D;)for(h=0;h<f;++h,++O)S[h]+=b[O],b[O]=S[h];return b}function Y(g,f){for(var u=f||1e5,p=0,h=g.length;p<h;++p)g[p]=Math.round(g[p]*u);return q(g)}function ne(g,f){for(var u=f||1e5,p=pe(g),h=0,S=p.length;h<S;++h)p[h]/=u;return p}function q(g){for(var f=0,u=g.length;f<u;++f){var p=g[f];g[f]=p<0?~(p<<1):p<<1}return ie(g)}function pe(g){for(var f=Ze(g),u=0,p=f.length;u<p;++u){var h=f[u];f[u]=h&1?~(h>>1):h>>1}return f}function ie(g){for(var f="",u=0,p=g.length;u<p;++u)f+=_e(g[u]);return f}function Ze(g){for(var f=[],u=0,p=0,h=0,S=g.length;h<S;++h){var b=g.charCodeAt(h)-63;u|=(b&31)<<p,b<32?(f.push(u),u=0,p=0):p+=5}return f}function _e(g){for(var f,u="";g>=32;)f=(32|g&31)+63,u+=String.fromCharCode(f),g>>=5;return f=g+63,u+=String.fromCharCode(f),u}var Ie=F,Oe=T(73363),Je=function(){var g=function(f,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var S in h)Object.prototype.hasOwnProperty.call(h,S)&&(p[S]=h[S])},g(f,u)};return function(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}(),it=function(g){Je(f,g);function f(u){var p=g.call(this)||this,h=u||{};return p.layerName_=h.layerName,p.layers_=h.layers?h.layers:null,p.dataProjection=(0,$.get)(h.dataProjection?h.dataProjection:"EPSG:4326"),p}return f.prototype.readFeaturesFromObject=function(u,p){if(u.type=="Topology"){var h=u,S=void 0,b=null,O=null;h.transform&&(S=h.transform,b=S.scale,O=S.translate);var D=h.arcs;S&&xt(D,b,O);var J=[],oe=h.objects,qe=this.layerName_,$e=void 0;for(var pt in oe)this.layers_&&this.layers_.indexOf(pt)==-1||(oe[pt].type==="GeometryCollection"?($e=oe[pt],J.push.apply(J,kt($e,D,b,O,qe,pt,p))):($e=oe[pt],J.push(_t($e,D,b,O,qe,pt,p))));return J}else return[]},f.prototype.readProjectionFromObject=function(u){return this.dataProjection},f}(Oe.Z),Ke={Point:He,LineString:Ct,Polygon:At,MultiPoint:Ot,MultiLineString:Zt,MultiPolygon:fe};function ft(g,f){for(var u=[],p,h=0,S=g.length;h<S;++h)if(p=g[h],h>0&&u.pop(),p>=0)for(var b=f[p],O=0,D=b.length;O<D;++O)u.push(b[O].slice(0));else for(var b=f[~p],O=b.length-1;O>=0;--O)u.push(b[O].slice(0));return u}function He(g,f,u){var p=g.coordinates;return f&&u&&Pt(p,f,u),new st.Z(p)}function Ot(g,f,u){var p=g.coordinates;if(f&&u)for(var h=0,S=p.length;h<S;++h)Pt(p[h],f,u);return new Ut.Z(p)}function Ct(g,f){var u=ft(g.arcs,f);return new xe.Z(u)}function Zt(g,f){for(var u=[],p=0,h=g.arcs.length;p<h;++p)u[p]=ft(g.arcs[p],f);return new De.Z(u)}function At(g,f){for(var u=[],p=0,h=g.arcs.length;p<h;++p)u[p]=ft(g.arcs[p],f);return new Vt.ZP(u)}function fe(g,f){for(var u=[],p=0,h=g.arcs.length;p<h;++p){for(var S=g.arcs[p],b=[],O=0,D=S.length;O<D;++O)b[O]=ft(S[O],f);u[p]=b}return new $n.Z(u)}function kt(g,f,u,p,h,S,b){for(var O=g.geometries,D=[],J=0,oe=O.length;J<oe;++J)D[J]=_t(O[J],f,u,p,h,S,b);return D}function _t(g,f,u,p,h,S,b){var O=null,D=g.type;if(D){var J=Ke[D];D==="Point"||D==="MultiPoint"?O=J(g,u,p):O=J(g,f),O=(0,le.fI)(O,!1,b)}var oe=new ge.Z({geometry:O});g.id!==void 0&&oe.setId(g.id);var qe=g.properties;return h&&(qe||(qe={}),qe[h]=S),qe&&oe.setProperties(qe,!0),oe}function xt(g,f,u){for(var p=0,h=g.length;p<h;++p)mt(g[p],f,u)}function mt(g,f,u){for(var p=0,h=0,S=0,b=g.length;S<b;++S){var O=g[S];p+=O[0],h+=O[1],O[0]=p,O[1]=h,Pt(O,f,u)}}function Pt(g,f,u){g[0]=g[0]*f[0]+u[0],g[1]=g[1]*f[1]+u[1]}var Rr=it,sr=T(66023),bt=T(45059),jt=function(){var g=function(f,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var S in h)Object.prototype.hasOwnProperty.call(h,S)&&(p[S]=h[S])},g(f,u)};return function(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}(),Ue={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17},vr=function(){function g(f){this.view_=f,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_=Q.Z.XY}return g.prototype.readUint8=function(){return this.view_.getUint8(this.pos_++)},g.prototype.readUint32=function(f){return this.view_.getUint32((this.pos_+=4)-4,f!==void 0?f:this.isLittleEndian_)},g.prototype.readDouble=function(f){return this.view_.getFloat64((this.pos_+=8)-8,f!==void 0?f:this.isLittleEndian_)},g.prototype.readPoint=function(){var f=[];return f.push(this.readDouble()),f.push(this.readDouble()),this.hasZ_&&f.push(this.readDouble()),this.hasM_&&f.push(this.readDouble()),f},g.prototype.readLineString=function(){for(var f=this.readUint32(),u=[],p=0;p<f;p++)u.push(this.readPoint());return u},g.prototype.readPolygon=function(){for(var f=this.readUint32(),u=[],p=0;p<f;p++)u.push(this.readLineString());return u},g.prototype.readWkbHeader=function(f){var u=this.readUint8(),p=u>0,h=this.readUint32(p),S=Math.floor((h&268435455)/1e3),b=!!(h&2147483648)||S===1||S===3,O=!!(h&1073741824)||S===2||S===3,D=!!(h&536870912),J=(h&268435455)%1e3,oe=["XY",b?"Z":"",O?"M":""].join(""),qe=D?this.readUint32(p):null;if(f!==void 0&&f!==J)throw new Error("Unexpected WKB geometry type "+J);if(this.initialized_){if(this.isLittleEndian_!==p)throw new Error("Inconsistent endian");if(this.layout_!==oe)throw new Error("Inconsistent geometry layout");if(qe&&this.srid_!==qe)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=p,this.hasZ_=b,this.hasM_=O,this.layout_=oe,this.srid_=qe,this.initialized_=!0;return J},g.prototype.readWkbPayload=function(f){switch(f){case Ue.POINT:return this.readPoint();case Ue.LINE_STRING:return this.readLineString();case Ue.POLYGON:case Ue.TRIANGLE:return this.readPolygon();case Ue.MULTI_POINT:return this.readMultiPoint();case Ue.MULTI_LINE_STRING:return this.readMultiLineString();case Ue.MULTI_POLYGON:case Ue.POLYHEDRAL_SURFACE:case Ue.TIN:return this.readMultiPolygon();case Ue.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+f+" is found")}},g.prototype.readWkbBlock=function(f){return this.readWkbPayload(this.readWkbHeader(f))},g.prototype.readWkbCollection=function(f,u){for(var p=this.readUint32(),h=[],S=0;S<p;S++){var b=f.call(this,u);b&&h.push(b)}return h},g.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,Ue.POINT)},g.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,Ue.LINE_STRING)},g.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,Ue.POLYGON)},g.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},g.prototype.readGeometry=function(){var f=this.readWkbHeader(),u=this.readWkbPayload(f);switch(f){case Ue.POINT:return new st.Z(u,this.layout_);case Ue.LINE_STRING:return new xe.Z(u,this.layout_);case Ue.POLYGON:case Ue.TRIANGLE:return new Vt.ZP(u,this.layout_);case Ue.MULTI_POINT:return new Ut.Z(u,this.layout_);case Ue.MULTI_LINE_STRING:return new De.Z(u,this.layout_);case Ue.MULTI_POLYGON:case Ue.POLYHEDRAL_SURFACE:case Ue.TIN:return new $n.Z(u,this.layout_);case Ue.GEOMETRY_COLLECTION:return new lr.Z(u);default:return null}},g.prototype.getSrid=function(){return this.srid_},g}(),xr=function(){function g(f){f=f||{},this.layout_=f.layout,this.isLittleEndian_=f.littleEndian!==!1,this.isEWKB_=f.ewkb!==!1,this.writeQueue_=[],this.nodata_=(0,bt.f0)({X:0,Y:0,Z:0,M:0},f.nodata)}return g.prototype.writeUint8=function(f){this.writeQueue_.push([1,f])},g.prototype.writeUint32=function(f){this.writeQueue_.push([4,f])},g.prototype.writeDouble=function(f){this.writeQueue_.push([8,f])},g.prototype.writePoint=function(f,u){for(var p=bt.f0.apply(null,u.split("").map(function(O,D){var J;return J={},J[O]=f[D],J})),h=0,S=this.layout_;h<S.length;h++){var b=S[h];this.writeDouble(b in p?p[b]:this.nodata_[b])}},g.prototype.writeLineString=function(f,u){this.writeUint32(f.length);for(var p=0;p<f.length;p++)this.writePoint(f[p],u)},g.prototype.writePolygon=function(f,u){this.writeUint32(f.length);for(var p=0;p<f.length;p++)this.writeLineString(f[p],u)},g.prototype.writeWkbHeader=function(f,u){f%=1e3,this.layout_.indexOf("Z")>=0&&(f+=this.isEWKB_?2147483648:1e3),this.layout_.indexOf("M")>=0&&(f+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(u)&&(f|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(f),this.isEWKB_&&Number.isInteger(u)&&this.writeUint32(u)},g.prototype.writeMultiPoint=function(f,u){this.writeUint32(f.length);for(var p=0;p<f.length;p++)this.writeWkbHeader(1),this.writePoint(f[p],u)},g.prototype.writeMultiLineString=function(f,u){this.writeUint32(f.length);for(var p=0;p<f.length;p++)this.writeWkbHeader(2),this.writeLineString(f[p],u)},g.prototype.writeMultiPolygon=function(f,u){this.writeUint32(f.length);for(var p=0;p<f.length;p++)this.writeWkbHeader(3),this.writePolygon(f[p],u)},g.prototype.writeGeometryCollection=function(f){this.writeUint32(f.length);for(var u=0;u<f.length;u++)this.writeGeometry(f[u])},g.prototype.findMinimumLayout=function(f,u){u===void 0&&(u=Q.Z.XYZM);var p=function(b,O){return b===O?b:b===Q.Z.XYZM?O:O===Q.Z.XYZM?b:Q.Z.XY};if(f instanceof _.ZP)return p(f.getLayout(),u);if(f instanceof lr.Z)for(var h=f.getGeometriesArray(),S=0;S<h.length&&u!==Q.Z.XY;S++)u=this.findMinimumLayout(h[S],u);return u},g.prototype.writeGeometry=function(f,u){var p={Point:Ue.POINT,LineString:Ue.LINE_STRING,Polygon:Ue.POLYGON,MultiPoint:Ue.MULTI_POINT,MultiLineString:Ue.MULTI_LINE_STRING,MultiPolygon:Ue.MULTI_POLYGON,GeometryCollection:Ue.GEOMETRY_COLLECTION},h=f.getType(),S=p[h];if(!S)throw new Error("GeometryType "+h+" is not supported");if(this.layout_||(this.layout_=this.findMinimumLayout(f)),this.writeWkbHeader(S,u),f instanceof _.ZP){var b={Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon};b[h].call(this,f.getCoordinates(),f.getLayout())}else f instanceof lr.Z&&this.writeGeometryCollection(f.getGeometriesArray())},g.prototype.getBuffer=function(){var f=this,u=this.writeQueue_.reduce(function(b,O){return b+O[0]},0),p=new ArrayBuffer(u),h=new DataView(p),S=0;return this.writeQueue_.forEach(function(b){switch(b[0]){case 1:h.setUint8(S,b[1]);break;case 4:h.setUint32(S,b[1],f.isLittleEndian_);break;case 8:h.setFloat64(S,b[1],f.isLittleEndian_);break;default:break}S+=b[0]}),p},g}(),ur=function(g){jt(f,g);function f(u){var p=g.call(this)||this,h=u||{};return p.splitCollection=!!h.splitCollection,p.viewCache_=null,p.hex_=h.hex!==!1,p.littleEndian_=h.littleEndian!==!1,p.ewkb_=h.ewkb!==!1,p.layout_=h.geometryLayout,p.nodataZ_=h.nodataZ||0,p.nodataM_=h.nodataM||0,p.srid_=h.srid,p}return f.prototype.getType=function(){return this.hex_?"text":"arraybuffer"},f.prototype.readFeature=function(u,p){return new ge.Z({geometry:this.readGeometry(u,p)})},f.prototype.readFeatures=function(u,p){var h=[],S=this.readGeometry(u,p);return this.splitCollection&&S instanceof lr.Z?h=S.getGeometriesArray():h=[S],h.map(function(b){return new ge.Z({geometry:b})})},f.prototype.readGeometry=function(u,p){var h=Ea(u);if(!h)return null;var S=new vr(h),b=S.readGeometry();this.viewCache_=h;var O=this.getReadOptions(u,p);return this.viewCache_=null,(0,le.fI)(b,!1,O)},f.prototype.readProjection=function(u){var p=this.viewCache_||Ea(u);if(p){var h=new vr(p);return h.readWkbHeader(),h.getSrid()&&(0,$.get)("EPSG:"+h.getSrid())||void 0}},f.prototype.writeFeature=function(u,p){return this.writeGeometry(u.getGeometry(),p)},f.prototype.writeFeatures=function(u,p){return this.writeGeometry(new lr.Z(u.map(function(h){return h.getGeometry()})),p)},f.prototype.writeGeometry=function(u,p){var h=this.adaptOptions(p),S=new xr({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}}),b=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){var O=h.dataProjection&&(0,$.get)(h.dataProjection);if(O){var D=O.getCode();D.indexOf("EPSG:")===0&&(b=Number(D.substring(5)))}}S.writeGeometry((0,le.fI)(u,!0,h),b);var J=S.getBuffer();return this.hex_?Hn(J):J},f}(le.ZP);function Hn(g){var f=new Uint8Array(g);return Array.from(f.values()).map(function(u){return(u<16?"0":"")+Number(u).toString(16).toUpperCase()}).join("")}function di(g){for(var f=new Uint8Array(g.length/2),u=0;u<g.length/2;u++)f[u]=parseInt(g.substr(u*2,2),16);return new DataView(f.buffer)}function Ea(g){return typeof g=="string"?di(g):ArrayBuffer.isView(g)?g instanceof DataView?g:new DataView(g.buffer,g.byteOffset,g.byteLength):g instanceof ArrayBuffer?new DataView(g):null}var co=ur,Ta=T(81078),Wn=T(88821),xa=T(1227),Ho=function(){var g=function(f,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var S in h)Object.prototype.hasOwnProperty.call(h,S)&&(p[S]=h[S])},g(f,u)};return function(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}(),Ao="_feature",Po="_layer",Wo=function(g){Ho(f,g);function f(u){var p=g.call(this)||this,h=u||{};return p.featureNS_="http://mapserver.gis.umn.edu/mapserver",p.gmlFormat_=new xa.Z,p.layers_=h.layers?h.layers:null,p}return f.prototype.getLayers=function(){return this.layers_},f.prototype.setLayers=function(u){this.layers_=u},f.prototype.readFeatures_=function(u,p){u.setAttribute("namespaceURI",this.featureNS_);var h=u.localName,S=[];if(u.childNodes.length===0)return S;if(h=="msGMLOutput")for(var b=0,O=u.childNodes.length;b<O;b++){var D=u.childNodes[b];if(D.nodeType===Node.ELEMENT_NODE){var J=D,oe=p[0],qe=Po,$e=J.localName.replace(qe,"");if(!(this.layers_&&!(0,G.q9)(this.layers_,$e))){var pt=$e+Ao;oe.featureType=pt,oe.featureNS=this.featureNS_;var Ft={};Ft[pt]=(0,d.Ei)(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var ot=(0,d.C5)([oe.featureNS,null],Ft);J.setAttribute("namespaceURI",this.featureNS_);var tr=(0,d.O)([],ot,J,p,this.gmlFormat_);tr&&(0,G.l7)(S,tr)}}}if(h=="FeatureCollection"){var Cr=(0,d.O)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,u,[{}],this.gmlFormat_);Cr&&(S=Cr)}return S},f.prototype.readFeaturesFromNode=function(u,p){var h={};return p&&(0,bt.f0)(h,this.getReadOptions(u,p)),this.readFeatures_(u,[h])},f}(ut.Z),Lo=Wo,Oo=T(54372)},46410:function(Kr,ct,T){"use strict";T.d(ct,{L:function(){return Be}});var St=T(12059),ae=T(55631),Ne=function(G,R,le){if(le||arguments.length===2)for(var je=0,me=R.length,Tt;je<me;je++)(Tt||!(je in R))&&(Tt||(Tt=Array.prototype.slice.call(R,0,je)),Tt[je]=R[je]);return G.concat(Tt||Array.prototype.slice.call(R))},Be={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},Me={};Me[Be.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},Me[Be.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},Me[Be.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},Me.none={none:{supports:[],formats:[],qualities:[]}};var ge=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Q=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,xe=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function De(G){var R=G.getComplianceLevelSupportedFeatures();return R===void 0&&(R=Me[Be.VERSION1].level0),{url:G.imageInfo["@id"]===void 0?void 0:G.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:R.supports,formats:Ne(Ne([],R.formats,!0),[G.imageInfo.formats===void 0?[]:G.imageInfo.formats],!1),qualities:Ne(Ne([],R.qualities,!0),[G.imageInfo.qualities===void 0?[]:G.imageInfo.qualities],!1),resolutions:G.imageInfo.scale_factors,tileSize:G.imageInfo.tile_width!==void 0?G.imageInfo.tile_height!==void 0?[G.imageInfo.tile_width,G.imageInfo.tile_height]:[G.imageInfo.tile_width,G.imageInfo.tile_width]:G.imageInfo.tile_height!=null?[G.imageInfo.tile_height,G.imageInfo.tile_height]:void 0}}function st(G){var R=G.getComplianceLevelSupportedFeatures(),le=Array.isArray(G.imageInfo.profile)&&G.imageInfo.profile.length>1,je=le&&G.imageInfo.profile[1].supports?G.imageInfo.profile[1].supports:[],me=le&&G.imageInfo.profile[1].formats?G.imageInfo.profile[1].formats:[],Tt=le&&G.imageInfo.profile[1].qualities?G.imageInfo.profile[1].qualities:[];return{url:G.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:G.imageInfo.sizes===void 0?void 0:G.imageInfo.sizes.map(function(Rt){return[Rt.width,Rt.height]}),tileSize:G.imageInfo.tiles===void 0?void 0:[G.imageInfo.tiles.map(function(Rt){return Rt.width})[0],G.imageInfo.tiles.map(function(Rt){return Rt.height===void 0?Rt.width:Rt.height})[0]],resolutions:G.imageInfo.tiles===void 0?void 0:G.imageInfo.tiles.map(function(Rt){return Rt.scaleFactors})[0],supports:Ne(Ne([],R.supports,!0),je,!0),formats:Ne(Ne([],R.formats,!0),me,!0),qualities:Ne(Ne([],R.qualities,!0),Tt,!0)}}function ut(G){var R=G.getComplianceLevelSupportedFeatures(),le=G.imageInfo.extraFormats===void 0?R.formats:Ne(Ne([],R.formats,!0),G.imageInfo.extraFormats,!0),je=G.imageInfo.preferredFormats!==void 0&&Array.isArray(G.imageInfo.preferredFormats)&&G.imageInfo.preferredFormats.length>0?G.imageInfo.preferredFormats.filter(function(me){return(0,ae.q9)(["jpg","png","gif"],me)}).reduce(function(me,Tt){return me===void 0&&(0,ae.q9)(le,Tt)?Tt:me},void 0):void 0;return{url:G.imageInfo.id,sizes:G.imageInfo.sizes===void 0?void 0:G.imageInfo.sizes.map(function(me){return[me.width,me.height]}),tileSize:G.imageInfo.tiles===void 0?void 0:[G.imageInfo.tiles.map(function(me){return me.width})[0],G.imageInfo.tiles.map(function(me){return me.height})[0]],resolutions:G.imageInfo.tiles===void 0?void 0:G.imageInfo.tiles.map(function(me){return me.scaleFactors})[0],supports:G.imageInfo.extraFeatures===void 0?R.supports:Ne(Ne([],R.supports,!0),G.imageInfo.extraFeatures,!0),formats:le,qualities:G.imageInfo.extraQualities===void 0?R.qualities:Ne(Ne([],R.qualities,!0),G.imageInfo.extraQualities,!0),preferredFormat:je}}var d={};d[Be.VERSION1]=De,d[Be.VERSION2]=st,d[Be.VERSION3]=ut;var $=function(){function G(R){this.setImageInfo(R)}return G.prototype.setImageInfo=function(R){typeof R=="string"?this.imageInfo=JSON.parse(R):this.imageInfo=R},G.prototype.getImageApiVersion=function(){if(this.imageInfo!==void 0){var R=this.imageInfo["@context"]||"ol-no-context";typeof R=="string"&&(R=[R]);for(var le=0;le<R.length;le++)switch(R[le]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Be.VERSION1;case"http://iiif.io/api/image/2/context.json":return Be.VERSION2;case"http://iiif.io/api/image/3/context.json":return Be.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Be.VERSION1)&&this.imageInfo.identifier)return Be.VERSION1;break;default:}(0,St.h)(!1,61)}},G.prototype.getComplianceLevelEntryFromProfile=function(R){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(R===void 0&&(R=this.getImageApiVersion()),R){case Be.VERSION1:if(ge.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Be.VERSION3:if(xe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Be.VERSION2:if(typeof this.imageInfo.profile=="string"&&Q.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&Q.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break;default:}},G.prototype.getComplianceLevelFromProfile=function(R){var le=this.getComplianceLevelEntryFromProfile(R);if(le!==void 0){var je=le.match(/level[0-2](?:\.json)?$/g);return Array.isArray(je)?je[0].replace(".json",""):void 0}},G.prototype.getComplianceLevelSupportedFeatures=function(){if(this.imageInfo!==void 0){var R=this.getImageApiVersion(),le=this.getComplianceLevelFromProfile(R);return le===void 0?Me.none.none:Me[R][le]}},G.prototype.getTileSourceOptions=function(R){var le=R||{},je=this.getImageApiVersion();if(je!==void 0){var me=je===void 0?void 0:d[je](this);if(me!==void 0)return{url:me.url,version:je,size:[this.imageInfo.width,this.imageInfo.height],sizes:me.sizes,format:le.format!==void 0&&(0,ae.q9)(me.formats,le.format)?le.format:me.preferredFormat!==void 0?me.preferredFormat:"jpg",supports:me.supports,quality:le.quality&&(0,ae.q9)(me.qualities,le.quality)?le.quality:(0,ae.q9)(me.qualities,"native")?"native":"default",resolutions:Array.isArray(me.resolutions)?me.resolutions.sort(function(Tt,Rt){return Rt-Tt}):void 0,tileSize:me.tileSize}}},G}();ct.Z=$},45614:function(Kr,ct,T){"use strict";T.r(ct),T.d(ct,{Circle:function(){return St.Z},Geometry:function(){return ae.Z},GeometryCollection:function(){return Ne.Z},LineString:function(){return Me.Z},LinearRing:function(){return Be.Z},MultiLineString:function(){return ge.Z},MultiPoint:function(){return Q.Z},MultiPolygon:function(){return xe.Z},Point:function(){return De.Z},Polygon:function(){return st.ZP},SimpleGeometry:function(){return ut.ZP}});var St=T(98776),ae=T(16057),Ne=T(72018),Be=T(26604),Me=T(59225),ge=T(4889),Q=T(22683),xe=T(7522),De=T(13798),st=T(44727),ut=T(7115)},22357:function(Kr,ct,T){"use strict";T.r(ct),T.d(ct,{AssertionError:function(){return St.Z},Collection:function(){return ae.Z},Disposable:function(){return Ne.Z},Feature:function(){return Be.Z},Geolocation:function(){return R},Graticule:function(){return le.Z},Image:function(){return je.Z},ImageBase:function(){return me.Z},ImageCanvas:function(){return Tt.Z},ImageTile:function(){return Rt.Z},Kinetic:function(){return _r.Z},Map:function(){return br.Z},MapBrowserEvent:function(){return Ar.Z},MapBrowserEventHandler:function(){return gt.Z},MapEvent:function(){return Nr.Z},Object:function(){return ge.Z},Observable:function(){return Mn.Z},Overlay:function(){return wr.Z},PluggableMap:function(){return dn.Z},Tile:function(){return Fr.Z},TileCache:function(){return on.Z},TileQueue:function(){return Gr.Z},TileRange:function(){return zr.Z},VERSION:function(){return z.q4},VectorRenderTile:function(){return Xe.Z},VectorTile:function(){return Ce.Z},View:function(){return V.ZP},getUid:function(){return z.sq}});var St=T(14734),ae=T(55825),Ne=T(84899),Be=T(13811),Me=T(32450),ge=T(21136),Q=T(2073),xe=T(44727),De=T(90583),st=T(77767),ut=function(){var te=function(X,W){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,j){B.__proto__=j}||function(B,j){for(var Ve in j)Object.prototype.hasOwnProperty.call(j,Ve)&&(B[Ve]=j[Ve])},te(X,W)};return function(X,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");te(X,W);function B(){this.constructor=X}X.prototype=W===null?Object.create(W):(B.prototype=W.prototype,new B)}}(),d={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},$=function(te){ut(X,te);function X(W){var B=te.call(this,Q.Z.ERROR)||this;return B.code=W.code,B.message=W.message,B}return X}(Me.ZP),G=function(te){ut(X,te);function X(W){var B=te.call(this)||this;B.on,B.once,B.un;var j=W||{};return B.position_=null,B.transform_=De.identityTransform,B.watchId_=void 0,B.addChangeListener(d.PROJECTION,B.handleProjectionChanged_),B.addChangeListener(d.TRACKING,B.handleTrackingChanged_),j.projection!==void 0&&B.setProjection(j.projection),j.trackingOptions!==void 0&&B.setTrackingOptions(j.trackingOptions),B.setTracking(j.tracking!==void 0?j.tracking:!1),B}return X.prototype.disposeInternal=function(){this.setTracking(!1),te.prototype.disposeInternal.call(this)},X.prototype.handleProjectionChanged_=function(){var W=this.getProjection();W&&(this.transform_=(0,De.getTransformFromProjections)((0,De.get)("EPSG:4326"),W),this.position_&&this.set(d.POSITION,this.transform_(this.position_)))},X.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var W=this.getTracking();W&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!W&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},X.prototype.positionChange_=function(W){var B=W.coords;this.set(d.ACCURACY,B.accuracy),this.set(d.ALTITUDE,B.altitude===null?void 0:B.altitude),this.set(d.ALTITUDE_ACCURACY,B.altitudeAccuracy===null?void 0:B.altitudeAccuracy),this.set(d.HEADING,B.heading===null?void 0:(0,st.Yr)(B.heading)),this.position_?(this.position_[0]=B.longitude,this.position_[1]=B.latitude):this.position_=[B.longitude,B.latitude];var j=this.transform_(this.position_);this.set(d.POSITION,j),this.set(d.SPEED,B.speed===null?void 0:B.speed);var Ve=(0,xe.iu)(this.position_,B.accuracy);Ve.applyTransform(this.transform_),this.set(d.ACCURACY_GEOMETRY,Ve),this.changed()},X.prototype.positionError_=function(W){this.dispatchEvent(new $(W))},X.prototype.getAccuracy=function(){return this.get(d.ACCURACY)},X.prototype.getAccuracyGeometry=function(){return this.get(d.ACCURACY_GEOMETRY)||null},X.prototype.getAltitude=function(){return this.get(d.ALTITUDE)},X.prototype.getAltitudeAccuracy=function(){return this.get(d.ALTITUDE_ACCURACY)},X.prototype.getHeading=function(){return this.get(d.HEADING)},X.prototype.getPosition=function(){return this.get(d.POSITION)},X.prototype.getProjection=function(){return this.get(d.PROJECTION)},X.prototype.getSpeed=function(){return this.get(d.SPEED)},X.prototype.getTracking=function(){return this.get(d.TRACKING)},X.prototype.getTrackingOptions=function(){return this.get(d.TRACKING_OPTIONS)},X.prototype.setProjection=function(W){this.set(d.PROJECTION,(0,De.get)(W))},X.prototype.setTracking=function(W){this.set(d.TRACKING,W)},X.prototype.setTrackingOptions=function(W){this.set(d.TRACKING_OPTIONS,W)},X}(ge.Z),R=G,le=T(48271),je=T(18421),me=T(78831),Tt=T(77022),Rt=T(73543),_r=T(83450),br=T(24856),Ar=T(21145),gt=T(45999),Nr=T(7679),Mn=T(68433),wr=T(62735),dn=T(20025),Fr=T(38431),on=T(67602),Gr=T(58096),zr=T(19240),Xe=T(41246),Ce=T(8166),V=T(65941),z=T(95232)},26150:function(Kr,ct,T){"use strict";T.r(ct),T.d(ct,{Graticule:function(){return St.Z},Group:function(){return ae.Z},Heatmap:function(){return Ne.Z},Image:function(){return Be.Z},Layer:function(){return Me.Z},MapboxVector:function(){return oe},Tile:function(){return qe.default},Vector:function(){return br.default},VectorImage:function(){return Co},VectorTile:function(){return De.default},WebGLPoints:function(){return Lu},WebGLTile:function(){return Du}});var St=T(48271),ae=T(54583),Ne=T(56828),Be=T(1058),Me=T(66583),ge=T(32450),Q=T(2073),xe=T(25002),De=T(13910),st=T(44138),ut=T(5689),d=T(68640),$=T(60316),G=T(67322),R=T(23230),le=T(82571),je=T(95659),me=T(11155),Tt=T(37564),Rt=T(12542),_r=T(27613),br=T(72449),Ar=T(2487),gt=T(90583),Nr=T(49500),Mn={},wr,dn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Fr(t){return t=Math.round(t),t<0?0:t>255?255:t}function on(t){return t<0?0:t>1?1:t}function Gr(t){return t[t.length-1]==="%"?Fr(parseFloat(t)/100*255):Fr(parseInt(t))}function zr(t){return t[t.length-1]==="%"?on(parseFloat(t)/100):on(parseFloat(t))}function Xe(t,e,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?t+(e-t)*r*6:r*2<1?e:r*3<2?t+(e-t)*(2/3-r)*6:t}function Ce(t){var e=t.replace(/ /g,"").toLowerCase();if(e in dn)return dn[e].slice();if(e[0]==="#"){if(e.length===4){var r=parseInt(e.substr(1),16);return r>=0&&r<=4095?[(r&3840)>>4|(r&3840)>>8,r&240|(r&240)>>4,r&15|(r&15)<<4,1]:null}else if(e.length===7){var r=parseInt(e.substr(1),16);return r>=0&&r<=16777215?[(r&16711680)>>16,(r&65280)>>8,r&255,1]:null}return null}var n=e.indexOf("("),a=e.indexOf(")");if(n!==-1&&a+1===e.length){var c=e.substr(0,n),m=e.substr(n+1,a-(n+1)).split(","),E=1;switch(c){case"rgba":if(m.length!==4)return null;E=zr(m.pop());case"rgb":return m.length!==3?null:[Gr(m[0]),Gr(m[1]),Gr(m[2]),E];case"hsla":if(m.length!==4)return null;E=zr(m.pop());case"hsl":if(m.length!==3)return null;var I=(parseFloat(m[0])%360+360)%360/360,A=zr(m[1]),P=zr(m[2]),C=P<=.5?P*(A+1):P+A-P*A,N=P*2-C;return[Fr(Xe(N,C,I+1/3)*255),Fr(Xe(N,C,I)*255),Fr(Xe(N,C,I-1/3)*255),E];default:return null}}return null}try{wr=Mn.parseCSSColor=Ce}catch{}var V=function(e,r,n,a){a===void 0&&(a=1),this.r=e,this.g=r,this.b=n,this.a=a};V.parse=function(e){if(e){if(e instanceof V)return e;if(typeof e=="string"){var r=wr(e);if(r)return new V(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}},V.prototype.toString=function(){var e=this.toArray(),r=e[0],n=e[1],a=e[2],c=e[3];return"rgba("+Math.round(r)+","+Math.round(n)+","+Math.round(a)+","+c+")"},V.prototype.toArray=function(){var e=this,r=e.r,n=e.g,a=e.b,c=e.a;return c===0?[0,0,0,0]:[r*255/c,n*255/c,a*255/c,c]},V.prototype.toArray01=function(){var e=this,r=e.r,n=e.g,a=e.b,c=e.a;return c===0?[0,0,0,0]:[r/c,n/c,a/c,c]},V.prototype.toArray01PremultipliedAlpha=function(){var e=this,r=e.r,n=e.g,a=e.b,c=e.a;return[r,n,a,c]},V.black=new V(0,0,0,1),V.white=new V(1,1,1,1),V.transparent=new V(0,0,0,0),V.red=new V(1,0,0,1),V.blue=new V(0,0,1,1);function z(t){return typeof t=="object"?["literal",t]:t}function te(t,e){var r=t.stops;if(!r)return X(t,e);var n=r&&typeof r[0][0]=="object",a=n||t.property!==void 0,c=n||!a;return r=r.map(function(m){return!a&&e.tokens&&typeof m[1]=="string"?[m[0],at(m[1])]:[m[0],z(m[1])]}),n?B(t,e,r):c?tt(t,e,r):dt(t,e,r)}function X(t,e){var r=["get",t.property];if(t.default===void 0)return e.type==="string"?["string",r]:r;if(e.type==="enum")return["match",r,Object.keys(e.values),r,t.default];var n=[e.type==="color"?"to-color":e.type,r,z(t.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}function W(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function B(t,e,r){for(var n={},a={},c=[],m=0;m<r.length;m++){var E=r[m],I=E[0].zoom;n[I]===void 0&&(n[I]={zoom:I,type:t.type,property:t.property,default:t.default},a[I]=[],c.push(I)),a[I].push([E[0].value,E[1]])}var A=lt({},e);if(A==="exponential"){for(var P=[W(t),["linear"],["zoom"]],C=0,N=c;C<N.length;C+=1){var Z=N[C],re=dt(n[Z],e,a[Z]);Fe(P,Z,re,!1)}return P}else{for(var H=["step",["zoom"]],k=0,Pe=c;k<Pe.length;k+=1){var Se=Pe[k],Re=dt(n[Se],e,a[Se]);Fe(H,Se,Re,!0)}return ke(H),H}}function j(t,e){if(t!==void 0)return t;if(e!==void 0)return e}function Ve(t,e){var r=z(j(t.default,e.default));return r===void 0&&e.type==="resolvedImage"?"":r}function dt(t,e,r){var n=lt(t,e),a=["get",t.property];if(n==="categorical"&&typeof r[0][0]=="boolean"){for(var c=["case"],m=0,E=r;m<E.length;m+=1){var I=E[m];c.push(["==",a,I[0]],I[1])}return c.push(Ve(t,e)),c}else if(n==="categorical"){for(var A=["match",a],P=0,C=r;P<C.length;P+=1){var N=C[P];Fe(A,N[0],N[1],!1)}return A.push(Ve(t,e)),A}else if(n==="interval"){for(var Z=["step",["number",a]],re=0,H=r;re<H.length;re+=1){var k=H[re];Fe(Z,k[0],k[1],!0)}return ke(Z),t.default===void 0?Z:["case",["==",["typeof",a],"number"],Z,z(t.default)]}else if(n==="exponential"){for(var Pe=t.base!==void 0?t.base:1,Se=[W(t),Pe===1?["linear"]:["exponential",Pe],["number",a]],Re=0,Le=r;Re<Le.length;Re+=1){var Ee=Le[Re];Fe(Se,Ee[0],Ee[1],!1)}return t.default===void 0?Se:["case",["==",["typeof",a],"number"],Se,z(t.default)]}else throw new Error("Unknown property function type "+n)}function tt(t,e,r,n){n===void 0&&(n=["zoom"]);var a=lt(t,e),c,m=!1;if(a==="interval")c=["step",n],m=!0;else if(a==="exponential"){var E=t.base!==void 0?t.base:1;c=[W(t),E===1?["linear"]:["exponential",E],n]}else throw new Error('Unknown zoom function type "'+a+'"');for(var I=0,A=r;I<A.length;I+=1){var P=A[I];Fe(c,P[0],P[1],m)}return ke(c),c}function ke(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function Fe(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&t.length===2||t.push(e),t.push(r))}function lt(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function at(t){for(var e=["concat"],r=/{([^{}]+)}/g,n=0,a=r.exec(t);a!==null;a=r.exec(t)){var c=t.slice(n,r.lastIndex-a[0].length);n=r.lastIndex,c.length>0&&e.push(c),e.push(["get",a[1]])}if(e.length===1)return t;if(n<t.length)e.push(t.slice(n));else if(e.length===2)return["to-string",e[1]];return e}var ze=function(t){function e(r,n){t.call(this,n),this.message=n,this.key=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),vt=function(e,r){r===void 0&&(r=[]),this.parent=e,this.bindings={};for(var n=0,a=r;n<a.length;n+=1){var c=a[n],m=c[0],E=c[1];this.bindings[m]=E}};vt.prototype.concat=function(e){return new vt(this,e)},vt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},vt.prototype.has=function(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1};var Ye={kind:"null"},ee={kind:"number"},ve={kind:"string"},ue={kind:"boolean"},Et={kind:"color"},wt={kind:"object"},Te={kind:"value"},Zr={kind:"error"},Qn={kind:"collator"},vn={kind:"formatted"},yn={kind:"resolvedImage"};function gr(t,e){return{kind:"array",itemType:t,N:e}}function yt(t){if(t.kind==="array"){var e=yt(t.itemType);return typeof t.N=="number"?"array<"+e+", "+t.N+">":t.itemType.kind==="value"?"array":"array<"+e+">"}else return t.kind}var Yi=[Ye,ee,ve,ue,Et,vn,wt,gr(Te),yn];function Dn(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Dn(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value")for(var r=0,n=Yi;r<n.length;r+=1){var a=n[r];if(!Dn(a,e))return null}}return"Expected "+yt(t)+" but found "+yt(e)+" instead."}function Ti(t,e){return e.some(function(r){return r.kind===t.kind})}function mn(t,e){return e.some(function(r){return r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t})}var gn=function(e,r,n){e?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};gn.prototype.compare=function(e,r){return this.collator.compare(e,r)},gn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var xi=function(e,r,n,a,c){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=n,this.fontStack=a,this.textColor=c},rr=function(e){this.sections=e};rr.fromString=function(e){return new rr([new xi(e,null,null,null,null)])},rr.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},rr.factory=function(e){return e instanceof rr?e:rr.fromString(e)},rr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},rr.prototype.serialize=function(){for(var e=["format"],r=0,n=this.sections;r<n.length;r+=1){var a=n[r];if(a.image){e.push(["image",a.image.name]);continue}e.push(a.text);var c={};a.fontStack&&(c["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(c["font-scale"]=a.scale),a.textColor&&(c["text-color"]=["rgba"].concat(a.textColor.toArray())),e.push(c)}return e};var nr=function(e){this.name=e.name,this.available=e.available};nr.prototype.toString=function(){return this.name},nr.fromString=function(e){return e?new nr({name:e,available:!1}):null},nr.prototype.serialize=function(){return["image",this.name]};function lr(t,e,r,n){if(!(typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255)){var a=typeof n=="number"?[t,e,r,n]:[t,e,r];return"Invalid rgba value ["+a.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,r,n].join(", ")+"]: 'a' must be between 0 and 1."}function sn(t){if(t===null)return!0;if(typeof t=="string")return!0;if(typeof t=="boolean")return!0;if(typeof t=="number")return!0;if(t instanceof V)return!0;if(t instanceof gn)return!0;if(t instanceof rr)return!0;if(t instanceof nr)return!0;if(Array.isArray(t)){for(var e=0,r=t;e<r.length;e+=1){var n=r[e];if(!sn(n))return!1}return!0}else if(typeof t=="object"){for(var a in t)if(!sn(t[a]))return!1;return!0}else return!1}function It(t){if(t===null)return Ye;if(typeof t=="string")return ve;if(typeof t=="boolean")return ue;if(typeof t=="number")return ee;if(t instanceof V)return Et;if(t instanceof gn)return Qn;if(t instanceof rr)return vn;if(t instanceof nr)return yn;if(Array.isArray(t)){for(var e=t.length,r,n=0,a=t;n<a.length;n+=1){var c=a[n],m=It(c);if(!r)r=m;else{if(r===m)continue;r=Te;break}}return gr(r||Te,e)}else return wt}function Pr(t){var e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof V||t instanceof rr||t instanceof nr?t.toString():JSON.stringify(t)}var fr=function(e,r){this.type=e,this.value=r};fr.parse=function(e,r){if(e.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!sn(e[1]))return r.error("invalid value");var n=e[1],a=It(n),c=r.expectedType;return a.kind==="array"&&a.N===0&&c&&c.kind==="array"&&(typeof c.N!="number"||c.N===0)&&(a=c),new fr(a,n)},fr.prototype.evaluate=function(){return this.value},fr.prototype.eachChild=function(){},fr.prototype.outputDefined=function(){return!0},fr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof V?["rgba"].concat(this.value.toArray()):this.value instanceof rr?this.value.serialize():this.value};var Ut=function(e){this.name="ExpressionEvaluationError",this.message=e};Ut.prototype.toJSON=function(){return this.message};var $n={string:ve,number:ee,boolean:ue,object:wt},Vt=function(e,r){this.type=e,this.args=r};Vt.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=1,a,c=e[0];if(c==="array"){var m;if(e.length>2){var E=e[1];if(typeof E!="string"||!(E in $n)||E==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);m=$n[E],n++}else m=Te;var I;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);I=e[2],n++}a=gr(m,I)}else a=$n[c];for(var A=[];n<e.length;n++){var P=r.parse(e[n],n,Te);if(!P)return null;A.push(P)}return new Vt(a,A)},Vt.prototype.evaluate=function(e){for(var r=0;r<this.args.length;r++){var n=this.args[r].evaluate(e),a=Dn(this.type,It(n));if(a){if(r===this.args.length-1)throw new Ut("Expected value to be of type "+yt(this.type)+", but found "+yt(It(n))+" instead.")}else return n}return null},Vt.prototype.eachChild=function(e){this.args.forEach(e)},Vt.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Vt.prototype.serialize=function(){var e=this.type,r=[e.kind];if(e.kind==="array"){var n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){r.push(n.kind);var a=e.N;(typeof a=="number"||this.args.length>1)&&r.push(a)}}return r.concat(this.args.map(function(c){return c.serialize()}))};var Ur=function(e){this.type=vn,this.sections=e};Ur.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");for(var a=[],c=!1,m=1;m<=e.length-1;++m){var E=e[m];if(c&&typeof E=="object"&&!Array.isArray(E)){c=!1;var I=null;if(E["font-scale"]&&(I=r.parse(E["font-scale"],1,ee),!I))return null;var A=null;if(E["text-font"]&&(A=r.parse(E["text-font"],1,gr(ve)),!A))return null;var P=null;if(E["text-color"]&&(P=r.parse(E["text-color"],1,Et),!P))return null;var C=a[a.length-1];C.scale=I,C.font=A,C.textColor=P}else{var N=r.parse(e[m],1,Te);if(!N)return null;var Z=N.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");c=!0,a.push({content:N,scale:null,font:null,textColor:null})}}return new Ur(a)},Ur.prototype.evaluate=function(e){var r=function(n){var a=n.content.evaluate(e);return It(a)===yn?new xi("",a,null,null,null):new xi(Pr(a),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)};return new rr(this.sections.map(r))},Ur.prototype.eachChild=function(e){for(var r=0,n=this.sections;r<n.length;r+=1){var a=n[r];e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor)}},Ur.prototype.outputDefined=function(){return!1},Ur.prototype.serialize=function(){for(var e=["format"],r=0,n=this.sections;r<n.length;r+=1){var a=n[r];e.push(a.content.serialize());var c={};a.scale&&(c["font-scale"]=a.scale.serialize()),a.font&&(c["text-font"]=a.font.serialize()),a.textColor&&(c["text-color"]=a.textColor.serialize()),e.push(c)}return e};var Er=function(e){this.type=yn,this.input=e};Er.parse=function(e,r){if(e.length!==2)return r.error("Expected two arguments.");var n=r.parse(e[1],1,ve);return n?new Er(n):r.error("No image name provided.")},Er.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=nr.fromString(r);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(r)>-1),n},Er.prototype.eachChild=function(e){e(this.input)},Er.prototype.outputDefined=function(){return!1},Er.prototype.serialize=function(){return["image",this.input.serialize()]};var Ki={"to-boolean":ue,"to-color":Et,"to-number":ee,"to-string":ve},Tr=function(e,r){this.type=e,this.args=r};Tr.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return r.error("Expected one argument.");for(var a=Ki[n],c=[],m=1;m<e.length;m++){var E=r.parse(e[m],m,Te);if(!E)return null;c.push(E)}return new Tr(a,c)},Tr.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var r,n,a=0,c=this.args;a<c.length;a+=1){var m=c[a];if(r=m.evaluate(e),n=null,r instanceof V)return r;if(typeof r=="string"){var E=e.parseColor(r);if(E)return E}else if(Array.isArray(r)&&(r.length<3||r.length>4?n="Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":n=lr(r[0],r[1],r[2],r[3]),!n))return new V(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Ut(n||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}else if(this.type.kind==="number"){for(var I=null,A=0,P=this.args;A<P.length;A+=1){var C=P[A];if(I=C.evaluate(e),I===null)return 0;var N=Number(I);if(!isNaN(N))return N}throw new Ut("Could not convert "+JSON.stringify(I)+" to number.")}else return this.type.kind==="formatted"?rr.fromString(Pr(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?nr.fromString(Pr(this.args[0].evaluate(e))):Pr(this.args[0].evaluate(e))},Tr.prototype.eachChild=function(e){this.args.forEach(e)},Tr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Tr.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ur([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Er(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(r){e.push(r.serialize())}),e};var Nn=["Unknown","Point","LineString","Polygon"],Br=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};Br.prototype.id=function(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null},Br.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Nn[this.feature.type]:this.feature.type:null},Br.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Br.prototype.canonicalID=function(){return this.canonical},Br.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Br.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,r=this.featureDistanceData.scale,n=this.featureTileCoord,a=n.x,c=n.y,m=a*r-e[0],E=c*r-e[1],I=this.featureDistanceData.bearing[0],A=this.featureDistanceData.bearing[1],P=I*m+A*E;return P}return 0},Br.prototype.parseColor=function(e){var r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=V.parse(e)),r};var Yt=function(e,r,n,a){this.name=e,this.type=r,this._evaluate=n,this.args=a};Yt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Yt.prototype.eachChild=function(e){this.args.forEach(e)},Yt.prototype.outputDefined=function(){return!1},Yt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Yt.parse=function(e,r){var n,a=e[0],c=Yt.definitions[a];if(!c)return r.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var m=Array.isArray(c)?c[0]:c.type,E=Array.isArray(c)?[[c[1],c[2]]]:c.overloads,I=E.filter(function(Bt){var Yr=Bt[0];return!Array.isArray(Yr)||Yr.length===e.length-1}),A=null,P=0,C=I;P<C.length;P+=1){var N=C[P],Z=N[0],re=N[1];A=new kr(r.registry,r.path,null,r.scope);for(var H=[],k=!1,Pe=1;Pe<e.length;Pe++){var Se=e[Pe],Re=Array.isArray(Z)?Z[Pe-1]:Z.type,Le=A.parse(Se,1+H.length,Re);if(!Le){k=!0;break}H.push(Le)}if(!k){if(Array.isArray(Z)&&Z.length!==H.length){A.error("Expected "+Z.length+" arguments, but found "+H.length+" instead.");continue}for(var Ee=0;Ee<H.length;Ee++){var we=Array.isArray(Z)?Z[Ee]:Z.type,We=H[Ee];A.concat(Ee+1).checkSubtype(we,We.type)}if(A.errors.length===0)return new Yt(a,m,re,H)}}if(I.length===1)(n=r.errors).push.apply(n,A.errors);else{for(var et=I.length?I:E,nt=et.map(function(Bt){var Yr=Bt[0];return ir(Yr)}).join(" | "),ht=[],Ht=1;Ht<e.length;Ht++){var nn=r.parse(e[Ht],1+ht.length);if(!nn)return null;ht.push(yt(nn.type))}r.error("Expected arguments of type "+nt+", but found ("+ht.join(", ")+") instead.")}return null},Yt.register=function(e,r){Yt.definitions=r;for(var n in r)e[n]=Yt};function ir(t){return Array.isArray(t)?"("+t.map(yt).join(", ")+")":"("+yt(t.type)+"...)"}var he=function(e,r,n){this.type=Qn,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r};he.parse=function(e,r){if(e.length!==2)return r.error("Expected one argument.");var n=e[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");var a=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,ue);if(!a)return null;var c=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,ue);if(!c)return null;var m=null;return n.locale&&(m=r.parse(n.locale,1,ve),!m)?null:new he(a,c,m)},he.prototype.evaluate=function(e){return new gn(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},he.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},he.prototype.outputDefined=function(){return!1},he.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Hr=8192;function ei(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Hi(t){return(180+t)/360}function Ca(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function En(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ti(t,e){var r=Hi(t[0]),n=Ca(t[1]),a=Math.pow(2,e.z);return[Math.round(r*a*Hr),Math.round(n*a*Hr)]}function Ma(t,e,r){var n=t[0]-e[0],a=t[1]-e[1],c=t[0]-r[0],m=t[1]-r[1];return n*m-c*a===0&&n*c<=0&&a*m<=0}function Da(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function Wr(t,e){for(var r=!1,n=0,a=e.length;n<a;n++)for(var c=e[n],m=0,E=c.length;m<E-1;m++){if(Ma(t,c[m],c[m+1]))return!1;Da(t,c[m],c[m+1])&&(r=!r)}return r}function Fn(t,e){for(var r=0;r<e.length;r++)if(Wr(t,e[r]))return!0;return!1}function _o(t,e){return t[0]*e[1]-t[1]*e[0]}function ri(t,e,r,n){var a=t[0]-r[0],c=t[1]-r[1],m=e[0]-r[0],E=e[1]-r[1],I=n[0]-r[0],A=n[1]-r[1],P=a*A-I*c,C=m*A-I*E;return P>0&&C<0||P<0&&C>0}function Gn(t,e,r,n){var a=[e[0]-t[0],e[1]-t[1]],c=[n[0]-r[0],n[1]-r[1]];return _o(c,a)===0?!1:!!(ri(t,e,r,n)&&ri(r,n,t,e))}function zn(t,e,r){for(var n=0,a=r;n<a.length;n+=1)for(var c=a[n],m=0;m<c.length-1;++m)if(Gn(t,e,c[m],c[m+1]))return!0;return!1}function Tn(t,e){for(var r=0;r<t.length;++r)if(!Wr(t[r],e))return!1;for(var n=0;n<t.length-1;++n)if(zn(t[n],t[n+1],e))return!1;return!0}function ni(t,e){for(var r=0;r<e.length;r++)if(Tn(t,e[r]))return!0;return!1}function Jr(t,e,r){for(var n=[],a=0;a<t.length;a++){for(var c=[],m=0;m<t[a].length;m++){var E=ti(t[a][m],r);ei(e,E),c.push(E)}n.push(c)}return n}function Si(t,e,r){for(var n=[],a=0;a<t.length;a++){var c=Jr(t[a],e,r);n.push(c)}return n}function ii(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){var a=n*.5,c=t[0]-r[0]>a?-n:r[0]-t[0]>a?n:0;c===0&&(c=t[0]-r[2]>a?-n:r[2]-t[0]>a?n:0),t[0]+=c}ei(e,t)}function ai(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function Na(t,e,r,n){var a=Math.pow(2,n.z)*Hr,c=[n.x*Hr,n.y*Hr],m=[];if(!t)return m;for(var E=0,I=t;E<I.length;E+=1)for(var A=I[E],P=0,C=A;P<C.length;P+=1){var N=C[P],Z=[N.x+c[0],N.y+c[1]];ii(Z,e,r,a),m.push(Z)}return m}function xn(t,e,r,n){var a=Math.pow(2,n.z)*Hr,c=[n.x*Hr,n.y*Hr],m=[];if(!t)return m;for(var E=0,I=t;E<I.length;E+=1){for(var A=I[E],P=[],C=0,N=A;C<N.length;C+=1){var Z=N[C],re=[Z.x+c[0],Z.y+c[1]];ei(e,re),P.push(re)}m.push(P)}if(e[2]-e[0]<=a/2){ai(e);for(var H=0,k=m;H<k.length;H+=1)for(var Pe=k[H],Se=0,Re=Pe;Se<Re.length;Se+=1){var Le=Re[Se];ii(Le,e,r,a)}}return m}function qr(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if(!a)return!1;if(e.type==="Polygon"){var c=Jr(e.coordinates,n,a),m=Na(t.geometry(),r,n,a);if(!En(r,n))return!1;for(var E=0,I=m;E<I.length;E+=1){var A=I[E];if(!Wr(A,c))return!1}}if(e.type==="MultiPolygon"){var P=Si(e.coordinates,n,a),C=Na(t.geometry(),r,n,a);if(!En(r,n))return!1;for(var N=0,Z=C;N<Z.length;N+=1){var re=Z[N];if(!Fn(re,P))return!1}}return!0}function bo(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if(!a)return!1;if(e.type==="Polygon"){var c=Jr(e.coordinates,n,a),m=xn(t.geometry(),r,n,a);if(!En(r,n))return!1;for(var E=0,I=m;E<I.length;E+=1){var A=I[E];if(!Tn(A,c))return!1}}if(e.type==="MultiPolygon"){var P=Si(e.coordinates,n,a),C=xn(t.geometry(),r,n,a);if(!En(r,n))return!1;for(var N=0,Z=C;N<Z.length;N+=1){var re=Z[N];if(!ni(re,P))return!1}}return!0}var er=function(e,r){this.type=ue,this.geojson=e,this.geometries=r};er.parse=function(e,r){if(e.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(sn(e[1])){var n=e[1];if(n.type==="FeatureCollection")for(var a=0;a<n.features.length;++a){var c=n.features[a].geometry.type;if(c==="Polygon"||c==="MultiPolygon")return new er(n,n.features[a].geometry)}else if(n.type==="Feature"){var m=n.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new er(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new er(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")},er.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return qr(e,this.geometries);if(e.geometryType()==="LineString")return bo(e,this.geometries)}return!1},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!0},er.prototype.serialize=function(){return["within",this.geojson]};function wi(t){if(t instanceof Yt){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof er)return!1;var e=!0;return t.eachChild(function(r){e&&!wi(r)&&(e=!1)}),e}function Ir(t){if(t instanceof Yt&&t.name==="feature-state")return!1;var e=!0;return t.eachChild(function(r){e&&!Ir(r)&&(e=!1)}),e}function Wi(t,e){if(t instanceof Yt&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild(function(n){r&&!Wi(n,e)&&(r=!1)}),r}var ar=function(e,r){this.type=r.type,this.name=e,this.boundExpression=r};ar.parse=function(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var n=e[1];return r.scope.has(n)?new ar(n,r.scope.get(n)):r.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},ar.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},ar.prototype.eachChild=function(){},ar.prototype.outputDefined=function(){return!1},ar.prototype.serialize=function(){return["var",this.name]};var kr=function(e,r,n,a,c){r===void 0&&(r=[]),a===void 0&&(a=new vt),c===void 0&&(c=[]),this.registry=e,this.path=r,this.key=r.map(function(m){return"["+m+"]"}).join(""),this.scope=a,this.errors=c,this.expectedType=n};kr.prototype.parse=function(e,r,n,a,c){return c===void 0&&(c={}),r?this.concat(r,n,a)._parse(e,c):this._parse(e,c)},kr.prototype._parse=function(e,r){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(P,C,N){return N==="assert"?new Vt(C,[P]):N==="coerce"?new Tr(C,[P]):P}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=e[0];if(typeof a!="string")return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var c=this.registry[a];if(c){var m=c.parse(e,this);if(!m)return null;if(this.expectedType){var E=this.expectedType,I=m.type;if((E.kind==="string"||E.kind==="number"||E.kind==="boolean"||E.kind==="object"||E.kind==="array")&&I.kind==="value")m=n(m,E,r.typeAnnotation||"assert");else if((E.kind==="color"||E.kind==="formatted"||E.kind==="resolvedImage")&&(I.kind==="value"||I.kind==="string"))m=n(m,E,r.typeAnnotation||"coerce");else if(this.checkSubtype(E,I))return null}if(!(m instanceof fr)&&m.type.kind!=="resolvedImage"&&cr(m)){var A=new Br;try{m=new fr(m.type,m.evaluate(A))}catch(P){return this.error(P.message),null}}return m}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},kr.prototype.concat=function(e,r,n){var a=typeof e=="number"?this.path.concat(e):this.path,c=n?this.scope.concat(n):this.scope;return new kr(this.registry,a,r||null,c,this.errors)},kr.prototype.error=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var a=""+this.key+r.map(function(c){return"["+c+"]"}).join("");this.errors.push(new ze(a,e))},kr.prototype.checkSubtype=function(e,r){var n=Dn(e,r);return n&&this.error(n),n};function cr(t){if(t instanceof ar)return cr(t.boundExpression);if(t instanceof Yt&&t.name==="error")return!1;if(t instanceof he)return!1;if(t instanceof er)return!1;var e=t instanceof Tr||t instanceof Vt,r=!0;return t.eachChild(function(n){e?r=r&&cr(n):r=r&&n instanceof fr}),r?wi(t)&&Wi(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Fa(t,e){for(var r=t.length-1,n=0,a=r,c=0,m,E;n<=a;)if(c=Math.floor((n+a)/2),m=t[c],E=t[c+1],m<=e){if(c===r||e<E)return c;n=c+1}else if(m>e)a=c-1;else throw new Ut("Input is not a number.");return 0}var Qr=function(e,r,n){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(var a=0,c=n;a<c.length;a+=1){var m=c[a],E=m[0],I=m[1];this.labels.push(E),this.outputs.push(I)}};Qr.parse=function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");var n=r.parse(e[1],1,ee);if(!n)return null;var a=[],c=null;r.expectedType&&r.expectedType.kind!=="value"&&(c=r.expectedType);for(var m=1;m<e.length;m+=2){var E=m===1?-1/0:e[m],I=e[m+1],A=m,P=m+1;if(typeof E!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(a.length&&a[a.length-1][0]>=E)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);var C=r.parse(I,P,c);if(!C)return null;c=c||C.type,a.push([E,C])}return new Qr(c,n,a)},Qr.prototype.evaluate=function(e){var r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);var a=this.input.evaluate(e);if(a<=r[0])return n[0].evaluate(e);var c=r.length;if(a>=r[c-1])return n[c-1].evaluate(e);var m=Fa(r,a);return n[m].evaluate(e)},Qr.prototype.eachChild=function(e){e(this.input);for(var r=0,n=this.outputs;r<n.length;r+=1){var a=n[r];e(a)}},Qr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Qr.prototype.serialize=function(){for(var e=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e};var Ga=Zn;function Zn(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}Zn.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},Zn.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},Zn.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},Zn.prototype.solveCurveX=function(t,e){typeof e>"u"&&(e=1e-6);var r,n,a,c,m;for(a=t,m=0;m<8;m++){if(c=this.sampleCurveX(a)-t,Math.abs(c)<e)return a;var E=this.sampleCurveDerivativeX(a);if(Math.abs(E)<1e-6)break;a=a-c/E}if(r=0,n=1,a=t,a<r)return r;if(a>n)return n;for(;r<n;){if(c=this.sampleCurveX(a),Math.abs(c-t)<e)return a;t>c?r=a:n=a,a=(n-r)*.5+r}return a},Zn.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};function pr(t,e,r){return t*(1-r)+e*r}function oi(t,e,r){return new V(pr(t.r,e.r,r),pr(t.g,e.g,r),pr(t.b,e.b,r),pr(t.a,e.a,r))}function Ji(t,e,r){return t.map(function(n,a){return pr(n,e[a],r)})}var za=Object.freeze({__proto__:null,number:pr,color:oi,array:Ji}),Ii=.95047,Ri=1,si=1.08883,qi=4/29,$r=6/29,_i=3*$r*$r,bi=$r*$r*$r,Za=Math.PI/180,Ua=180/Math.PI;function Ai(t){return t>bi?Math.pow(t,1/3):t/_i+qi}function Pi(t){return t>$r?t*t*t:_i*(t-qi)}function Li(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Oi(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Qi(t){var e=Oi(t.r),r=Oi(t.g),n=Oi(t.b),a=Ai((.4124564*e+.3575761*r+.1804375*n)/Ii),c=Ai((.2126729*e+.7151522*r+.072175*n)/Ri),m=Ai((.0193339*e+.119192*r+.9503041*n)/si);return{l:116*c-16,a:500*(a-c),b:200*(c-m),alpha:t.a}}function un(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=Ri*Pi(e),r=Ii*Pi(r),n=si*Pi(n),new V(Li(3.2404542*r-1.5371385*e-.4985314*n),Li(-.969266*r+1.8760108*e+.041556*n),Li(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function Ba(t,e,r){return{l:pr(t.l,e.l,r),a:pr(t.a,e.a,r),b:pr(t.b,e.b,r),alpha:pr(t.alpha,e.alpha,r)}}function ka(t){var e=Qi(t),r=e.l,n=e.a,a=e.b,c=Math.atan2(a,n)*Ua;return{h:c<0?c+360:c,c:Math.sqrt(n*n+a*a),l:r,alpha:t.a}}function $i(t){var e=t.h*Za,r=t.c,n=t.l;return un({l:n,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})}function ja(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function ui(t,e,r){return{h:ja(t.h,e.h,r),c:pr(t.c,e.c,r),l:pr(t.l,e.l,r),alpha:pr(t.alpha,e.alpha,r)}}var li={forward:Qi,reverse:un,interpolate:Ba},Sn={forward:ka,reverse:$i,interpolate:ui},Gt=function(e,r,n,a,c){this.type=e,this.operator=r,this.interpolation=n,this.input=a,this.labels=[],this.outputs=[];for(var m=0,E=c;m<E.length;m+=1){var I=E[m],A=I[0],P=I[1];this.labels.push(A),this.outputs.push(P)}};Gt.interpolationFactor=function(e,r,n,a){var c=0;if(e.name==="exponential")c=wn(r,e.base,n,a);else if(e.name==="linear")c=wn(r,1,n,a);else if(e.name==="cubic-bezier"){var m=e.controlPoints,E=new Ga(m[0],m[1],m[2],m[3]);c=E.solve(wn(r,1,n,a))}return c},Gt.parse=function(e,r){var n=e[0],a=e[1],c=e[2],m=e.slice(3);if(!Array.isArray(a)||a.length===0)return r.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){var E=a[1];if(typeof E!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:E}}else if(a[0]==="cubic-bezier"){var I=a.slice(1);if(I.length!==4||I.some(function(Pe){return typeof Pe!="number"||Pe<0||Pe>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:I}}else return r.error("Unknown interpolation type "+String(a[0]),1,0);if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(c=r.parse(c,2,ee),!c)return null;var A=[],P=null;n==="interpolate-hcl"||n==="interpolate-lab"?P=Et:r.expectedType&&r.expectedType.kind!=="value"&&(P=r.expectedType);for(var C=0;C<m.length;C+=2){var N=m[C],Z=m[C+1],re=C+3,H=C+4;if(typeof N!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(A.length&&A[A.length-1][0]>=N)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',re);var k=r.parse(Z,H,P);if(!k)return null;P=P||k.type,A.push([N,k])}return P.kind!=="number"&&P.kind!=="color"&&!(P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number")?r.error("Type "+yt(P)+" is not interpolatable."):new Gt(P,n,a,c,A)},Gt.prototype.evaluate=function(e){var r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);var a=this.input.evaluate(e);if(a<=r[0])return n[0].evaluate(e);var c=r.length;if(a>=r[c-1])return n[c-1].evaluate(e);var m=Fa(r,a),E=r[m],I=r[m+1],A=Gt.interpolationFactor(this.interpolation,a,E,I),P=n[m].evaluate(e),C=n[m+1].evaluate(e);return this.operator==="interpolate"?za[this.type.kind.toLowerCase()](P,C,A):this.operator==="interpolate-hcl"?Sn.reverse(Sn.interpolate(Sn.forward(P),Sn.forward(C),A)):li.reverse(li.interpolate(li.forward(P),li.forward(C),A))},Gt.prototype.eachChild=function(e){e(this.input);for(var r=0,n=this.outputs;r<n.length;r+=1){var a=n[r];e(a)}},Gt.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Gt.prototype.serialize=function(){var e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)r.push(this.labels[n],this.outputs[n].serialize());return r};function wn(t,e,r,n){var a=n-r,c=t-r;return a===0?0:e===1?c/a:(Math.pow(e,c)-1)/(Math.pow(e,a)-1)}var or=function(e,r){this.type=e,this.args=r};or.parse=function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var n=null,a=r.expectedType;a&&a.kind!=="value"&&(n=a);for(var c=[],m=0,E=e.slice(1);m<E.length;m+=1){var I=E[m],A=r.parse(I,1+c.length,n,void 0,{typeAnnotation:"omit"});if(!A)return null;n=n||A.type,c.push(A)}var P=a&&c.some(function(C){return Dn(a,C.type)});return P?new or(Te,c):new or(n,c)},or.prototype.evaluate=function(e){for(var r=null,n=0,a,c=0,m=this.args;c<m.length;c+=1){var E=m[c];if(n++,r=E.evaluate(e),r&&r instanceof nr&&!r.available&&(a||(a=r),r=null,n===this.args.length))return a;if(r!==null)break}return r},or.prototype.eachChild=function(e){this.args.forEach(e)},or.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},or.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Lr=function(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r};Lr.prototype.evaluate=function(e){return this.result.evaluate(e)},Lr.prototype.eachChild=function(e){for(var r=0,n=this.bindings;r<n.length;r+=1){var a=n[r];e(a[1])}e(this.result)},Lr.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],a=1;a<e.length-1;a+=2){var c=e[a];if(typeof c!="string")return r.error("Expected string, but found "+typeof c+" instead.",a);if(/[^a-zA-Z0-9_]/.test(c))return r.error("Variable names must contain only alphanumeric characters or '_'.",a);var m=r.parse(e[a+1],a+1);if(!m)return null;n.push([c,m])}var E=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return E?new Lr(n,E):null},Lr.prototype.outputDefined=function(){return this.result.outputDefined()},Lr.prototype.serialize=function(){for(var e=["let"],r=0,n=this.bindings;r<n.length;r+=1){var a=n[r],c=a[0],m=a[1];e.push(c,m.serialize())}return e.push(this.result.serialize()),e};var en=function(e,r,n){this.type=e,this.index=r,this.input=n};en.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,ee),a=r.parse(e[2],2,gr(r.expectedType||Te));if(!n||!a)return null;var c=a.type;return new en(c.itemType,n,a)},en.prototype.evaluate=function(e){var r=this.index.evaluate(e),n=this.input.evaluate(e);if(r<0)throw new Ut("Array index out of bounds: "+r+" < 0.");if(r>=n.length)throw new Ut("Array index out of bounds: "+r+" > "+(n.length-1)+".");if(r!==Math.floor(r))throw new Ut("Array index must be an integer, but found "+r+" instead.");return n[r]},en.prototype.eachChild=function(e){e(this.index),e(this.input)},en.prototype.outputDefined=function(){return!1},en.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ln=function(e,r){this.type=ue,this.needle=e,this.haystack=r};ln.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,Te),a=r.parse(e[2],2,Te);return!n||!a?null:Ti(n.type,[ue,ve,ee,Ye,Te])?new ln(n,a):r.error("Expected first argument to be of type boolean, string, number or null, but found "+yt(n.type)+" instead")},ln.prototype.evaluate=function(e){var r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!mn(r,["boolean","string","number","null"]))throw new Ut("Expected first argument to be of type boolean, string, number or null, but found "+yt(It(r))+" instead.");if(!mn(n,["string","array"]))throw new Ut("Expected second argument to be of type array or string, but found "+yt(It(n))+" instead.");return n.indexOf(r)>=0},ln.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},ln.prototype.outputDefined=function(){return!0},ln.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var hr=function(e,r,n){this.type=ee,this.needle=e,this.haystack=r,this.fromIndex=n};hr.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,Te),a=r.parse(e[2],2,Te);if(!n||!a)return null;if(!Ti(n.type,[ue,ve,ee,Ye,Te]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+yt(n.type)+" instead");if(e.length===4){var c=r.parse(e[3],3,ee);return c?new hr(n,a,c):null}else return new hr(n,a)},hr.prototype.evaluate=function(e){var r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!mn(r,["boolean","string","number","null"]))throw new Ut("Expected first argument to be of type boolean, string, number or null, but found "+yt(It(r))+" instead.");if(!mn(n,["string","array"]))throw new Ut("Expected second argument to be of type array or string, but found "+yt(It(n))+" instead.");if(this.fromIndex){var a=this.fromIndex.evaluate(e);return n.indexOf(r,a)}return n.indexOf(r)},hr.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var zt=function(e,r,n,a,c,m){this.inputType=e,this.type=r,this.input=n,this.cases=a,this.outputs=c,this.otherwise=m};zt.parse=function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!==1)return r.error("Expected an even number of arguments.");var n,a;r.expectedType&&r.expectedType.kind!=="value"&&(a=r.expectedType);for(var c={},m=[],E=2;E<e.length-1;E+=2){var I=e[E],A=e[E+1];Array.isArray(I)||(I=[I]);var P=r.concat(E);if(I.length===0)return P.error("Expected at least one branch label.");for(var C=0,N=I;C<N.length;C+=1){var Z=N[C];if(typeof Z!="number"&&typeof Z!="string")return P.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return P.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Z=="number"&&Math.floor(Z)!==Z)return P.error("Numeric branch labels must be integer values.");if(!n)n=It(Z);else if(P.checkSubtype(n,It(Z)))return null;if(typeof c[String(Z)]<"u")return P.error("Branch labels must be unique.");c[String(Z)]=m.length}var re=r.parse(A,E,a);if(!re)return null;a=a||re.type,m.push(re)}var H=r.parse(e[1],1,Te);if(!H)return null;var k=r.parse(e[e.length-1],e.length-1,a);return!k||H.type.kind!=="value"&&r.concat(1).checkSubtype(n,H.type)?null:new zt(n,a,H,c,m,k)},zt.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=It(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise;return n.evaluate(e)},zt.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},zt.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},zt.prototype.serialize=function(){for(var e=this,r=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),a=[],c={},m=0,E=n;m<E.length;m+=1){var I=E[m],A=c[this.cases[I]];A===void 0?(c[this.cases[I]]=a.length,a.push([this.cases[I],[I]])):a[A][1].push(I)}for(var P=function(H){return e.inputType.kind==="number"?Number(H):H},C=0,N=a;C<N.length;C+=1){var Z=N[C],A=Z[0],re=Z[1];re.length===1?r.push(P(re[0])):r.push(re.map(P)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var fn=function(e,r,n){this.type=e,this.branches=r,this.otherwise=n};fn.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!==0)return r.error("Expected an odd number of arguments.");var n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);for(var a=[],c=1;c<e.length-1;c+=2){var m=r.parse(e[c],c,ue);if(!m)return null;var E=r.parse(e[c+1],c+1,n);if(!E)return null;a.push([m,E]),n=n||E.type}var I=r.parse(e[e.length-1],e.length-1,n);return I?new fn(n,a,I):null},fn.prototype.evaluate=function(e){for(var r=0,n=this.branches;r<n.length;r+=1){var a=n[r],c=a[0],m=a[1];if(c.evaluate(e))return m.evaluate(e)}return this.otherwise.evaluate(e)},fn.prototype.eachChild=function(e){for(var r=0,n=this.branches;r<n.length;r+=1){var a=n[r],c=a[0],m=a[1];e(c),e(m)}e(this.otherwise)},fn.prototype.outputDefined=function(){return this.branches.every(function(e){e[0];var r=e[1];return r.outputDefined()})&&this.otherwise.outputDefined()},fn.prototype.serialize=function(){var e=["case"];return this.eachChild(function(r){e.push(r.serialize())}),e};var dr=function(e,r,n,a){this.type=e,this.input=r,this.beginIndex=n,this.endIndex=a};dr.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1,Te),a=r.parse(e[2],2,ee);if(!n||!a)return null;if(!Ti(n.type,[gr(Te),ve,Te]))return r.error("Expected first argument to be of type array or string, but found "+yt(n.type)+" instead");if(e.length===4){var c=r.parse(e[3],3,ee);return c?new dr(n.type,n,a,c):null}else return new dr(n.type,n,a)},dr.prototype.evaluate=function(e){var r=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!mn(r,["string","array"]))throw new Ut("Expected first argument to be of type array or string, but found "+yt(It(r))+" instead.");if(this.endIndex){var a=this.endIndex.evaluate(e);return r.slice(n,a)}return r.slice(n)},dr.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},dr.prototype.outputDefined=function(){return!1},dr.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function ea(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Ci(t,e,r){return e===r}function Or(t,e,r){return e!==r}function Xa(t,e,r){return e<r}function ta(t,e,r){return e>r}function Va(t,e,r){return e<=r}function ra(t,e,r){return e>=r}function Mi(t,e,r,n){return n.compare(e,r)===0}function na(t,e,r,n){return!Mi(t,e,r,n)}function Ya(t,e,r,n){return n.compare(e,r)<0}function Ka(t,e,r,n){return n.compare(e,r)>0}function Ha(t,e,r,n){return n.compare(e,r)<=0}function Wa(t,e,r,n){return n.compare(e,r)>=0}function In(t,e,r){var n=t!=="=="&&t!=="!=";return function(){function a(c,m,E){this.type=ue,this.lhs=c,this.rhs=m,this.collator=E,this.hasUntypedArgument=c.type.kind==="value"||m.type.kind==="value"}return a.parse=function(m,E){if(m.length!==3&&m.length!==4)return E.error("Expected two or three arguments.");var I=m[0],A=E.parse(m[1],1,Te);if(!A)return null;if(!ea(I,A.type))return E.concat(1).error('"'+I+`" comparisons are not supported for type '`+yt(A.type)+"'.");var P=E.parse(m[2],2,Te);if(!P)return null;if(!ea(I,P.type))return E.concat(2).error('"'+I+`" comparisons are not supported for type '`+yt(P.type)+"'.");if(A.type.kind!==P.type.kind&&A.type.kind!=="value"&&P.type.kind!=="value")return E.error("Cannot compare types '"+yt(A.type)+"' and '"+yt(P.type)+"'.");n&&(A.type.kind==="value"&&P.type.kind!=="value"?A=new Vt(P.type,[A]):A.type.kind!=="value"&&P.type.kind==="value"&&(P=new Vt(A.type,[P])));var C=null;if(m.length===4){if(A.type.kind!=="string"&&P.type.kind!=="string"&&A.type.kind!=="value"&&P.type.kind!=="value")return E.error("Cannot use collator to compare non-string types.");if(C=E.parse(m[3],3,Qn),!C)return null}return new a(A,P,C)},a.prototype.evaluate=function(m){var E=this.lhs.evaluate(m),I=this.rhs.evaluate(m);if(n&&this.hasUntypedArgument){var A=It(E),P=It(I);if(A.kind!==P.kind||!(A.kind==="string"||A.kind==="number"))throw new Ut('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+A.kind+", "+P.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var C=It(E),N=It(I);if(C.kind!=="string"||N.kind!=="string")return e(m,E,I)}return this.collator?r(m,E,I,this.collator.evaluate(m)):e(m,E,I)},a.prototype.eachChild=function(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var m=[t];return this.eachChild(function(E){m.push(E.serialize())}),m},a}()}var Ja=In("==",Ci,Mi),qa=In("!=",Or,na),Qa=In("<",Xa,Ya),$a=In(">",ta,Ka),eo=In("<=",Va,Ha),to=In(">=",ra,Wa),cn=function(e,r,n,a,c){this.type=ve,this.number=e,this.locale=r,this.currency=n,this.minFractionDigits=a,this.maxFractionDigits=c};cn.parse=function(e,r){if(e.length!==3)return r.error("Expected two arguments.");var n=r.parse(e[1],1,ee);if(!n)return null;var a=e[2];if(typeof a!="object"||Array.isArray(a))return r.error("NumberFormat options argument must be an object.");var c=null;if(a.locale&&(c=r.parse(a.locale,1,ve),!c))return null;var m=null;if(a.currency&&(m=r.parse(a.currency,1,ve),!m))return null;var E=null;if(a["min-fraction-digits"]&&(E=r.parse(a["min-fraction-digits"],1,ee),!E))return null;var I=null;return a["max-fraction-digits"]&&(I=r.parse(a["max-fraction-digits"],1,ee),!I)?null:new cn(n,c,m,E,I)},cn.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},cn.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},cn.prototype.outputDefined=function(){return!1},cn.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var tn=function(e){this.type=ee,this.input=e};tn.parse=function(e,r){if(e.length!==2)return r.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=r.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+yt(n.type)+" instead."):new tn(n):null},tn.prototype.evaluate=function(e){var r=this.input.evaluate(e);if(typeof r=="string")return r.length;if(Array.isArray(r))return r.length;throw new Ut("Expected value to be of type string or array, but found "+yt(It(r))+" instead.")},tn.prototype.eachChild=function(e){e(this.input)},tn.prototype.outputDefined=function(){return!1},tn.prototype.serialize=function(){var e=["length"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Di={"==":Ja,"!=":qa,">":$a,"<":Qa,">=":to,"<=":eo,array:Vt,at:en,boolean:Vt,case:fn,coalesce:or,collator:he,format:Ur,image:Er,in:ln,"index-of":hr,interpolate:Gt,"interpolate-hcl":Gt,"interpolate-lab":Gt,length:tn,let:Lr,literal:fr,match:zt,number:Vt,"number-format":cn,object:Vt,slice:dr,step:Qr,string:Vt,"to-boolean":Tr,"to-color":Tr,"to-number":Tr,"to-string":Tr,var:ar,within:er};function ia(t,e){var r=e[0],n=e[1],a=e[2],c=e[3];r=r.evaluate(t),n=n.evaluate(t),a=a.evaluate(t);var m=c?c.evaluate(t):1,E=lr(r,n,a,m);if(E)throw new Ut(E);return new V(r/255*m,n/255*m,a/255*m,m)}function Un(t,e){return t in e}function Ni(t,e){var r=e[t];return typeof r>"u"?null:r}function fi(t,e,r,n){for(;r<=n;){var a=r+n>>1;if(e[a]===t)return!0;e[a]>t?n=a-1:r=a+1}return!1}function jr(t){return{type:t}}Yt.register(Di,{error:[Zr,[ve],function(t,e){var r=e[0];throw new Ut(r.evaluate(t))}],typeof:[ve,[Te],function(t,e){var r=e[0];return yt(It(r.evaluate(t)))}],"to-rgba":[gr(ee,4),[Et],function(t,e){var r=e[0];return r.evaluate(t).toArray()}],rgb:[Et,[ee,ee,ee],ia],rgba:[Et,[ee,ee,ee,ee],ia],has:{type:ue,overloads:[[[ve],function(t,e){var r=e[0];return Un(r.evaluate(t),t.properties())}],[[ve,wt],function(t,e){var r=e[0],n=e[1];return Un(r.evaluate(t),n.evaluate(t))}]]},get:{type:Te,overloads:[[[ve],function(t,e){var r=e[0];return Ni(r.evaluate(t),t.properties())}],[[ve,wt],function(t,e){var r=e[0],n=e[1];return Ni(r.evaluate(t),n.evaluate(t))}]]},"feature-state":[Te,[ve],function(t,e){var r=e[0];return Ni(r.evaluate(t),t.featureState||{})}],properties:[wt,[],function(t){return t.properties()}],"geometry-type":[ve,[],function(t){return t.geometryType()}],id:[Te,[],function(t){return t.id()}],zoom:[ee,[],function(t){return t.globals.zoom}],pitch:[ee,[],function(t){return t.globals.pitch||0}],"distance-from-center":[ee,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[ee,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[ee,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[ee,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[Te,[],function(t){return t.globals.accumulated===void 0?null:t.globals.accumulated}],"+":[ee,jr(ee),function(t,e){for(var r=0,n=0,a=e;n<a.length;n+=1){var c=a[n];r+=c.evaluate(t)}return r}],"*":[ee,jr(ee),function(t,e){for(var r=1,n=0,a=e;n<a.length;n+=1){var c=a[n];r*=c.evaluate(t)}return r}],"-":{type:ee,overloads:[[[ee,ee],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)-n.evaluate(t)}],[[ee],function(t,e){var r=e[0];return-r.evaluate(t)}]]},"/":[ee,[ee,ee],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)/n.evaluate(t)}],"%":[ee,[ee,ee],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)%n.evaluate(t)}],ln2:[ee,[],function(){return Math.LN2}],pi:[ee,[],function(){return Math.PI}],e:[ee,[],function(){return Math.E}],"^":[ee,[ee,ee],function(t,e){var r=e[0],n=e[1];return Math.pow(r.evaluate(t),n.evaluate(t))}],sqrt:[ee,[ee],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[ee,[ee],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[ee,[ee],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[ee,[ee],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[ee,[ee],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[ee,[ee],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[ee,[ee],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[ee,[ee],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[ee,[ee],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[ee,[ee],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[ee,jr(ee),function(t,e){return Math.min.apply(Math,e.map(function(r){return r.evaluate(t)}))}],max:[ee,jr(ee),function(t,e){return Math.max.apply(Math,e.map(function(r){return r.evaluate(t)}))}],abs:[ee,[ee],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[ee,[ee],function(t,e){var r=e[0],n=r.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[ee,[ee],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[ee,[ee],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[ue,[ve,Te],function(t,e){var r=e[0],n=e[1];return t.properties()[r.value]===n.value}],"filter-id-==":[ue,[Te],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[ue,[ve],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[ue,[ve,Te],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],c=n.value;return typeof a==typeof c&&a<c}],"filter-id-<":[ue,[Te],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n<a}],"filter->":[ue,[ve,Te],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],c=n.value;return typeof a==typeof c&&a>c}],"filter-id->":[ue,[Te],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n>a}],"filter-<=":[ue,[ve,Te],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],c=n.value;return typeof a==typeof c&&a<=c}],"filter-id-<=":[ue,[Te],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n<=a}],"filter->=":[ue,[ve,Te],function(t,e){var r=e[0],n=e[1],a=t.properties()[r.value],c=n.value;return typeof a==typeof c&&a>=c}],"filter-id->=":[ue,[Te],function(t,e){var r=e[0],n=t.id(),a=r.value;return typeof n==typeof a&&n>=a}],"filter-has":[ue,[Te],function(t,e){var r=e[0];return r.value in t.properties()}],"filter-has-id":[ue,[],function(t){return t.id()!==null&&t.id()!==void 0}],"filter-type-in":[ue,[gr(ve)],function(t,e){var r=e[0];return r.value.indexOf(t.geometryType())>=0}],"filter-id-in":[ue,[gr(Te)],function(t,e){var r=e[0];return r.value.indexOf(t.id())>=0}],"filter-in-small":[ue,[ve,gr(Te)],function(t,e){var r=e[0],n=e[1];return n.value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[ue,[ve,gr(Te)],function(t,e){var r=e[0],n=e[1];return fi(t.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:ue,overloads:[[[ue,ue],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)&&n.evaluate(t)}],[jr(ue),function(t,e){for(var r=0,n=e;r<n.length;r+=1){var a=n[r];if(!a.evaluate(t))return!1}return!0}]]},any:{type:ue,overloads:[[[ue,ue],function(t,e){var r=e[0],n=e[1];return r.evaluate(t)||n.evaluate(t)}],[jr(ue),function(t,e){for(var r=0,n=e;r<n.length;r+=1){var a=n[r];if(a.evaluate(t))return!0}return!1}]]},"!":[ue,[ue],function(t,e){var r=e[0];return!r.evaluate(t)}],"is-supported-script":[ue,[ve],function(t,e){var r=e[0],n=t.globals&&t.globals.isSupportedScript;return n?n(r.evaluate(t)):!0}],upcase:[ve,[ve],function(t,e){var r=e[0];return r.evaluate(t).toUpperCase()}],downcase:[ve,[ve],function(t,e){var r=e[0];return r.evaluate(t).toLowerCase()}],concat:[ve,jr(Te),function(t,e){return e.map(function(r){return Pr(r.evaluate(t))}).join("")}],"resolved-locale":[ve,[Qn],function(t,e){var r=e[0];return r.evaluate(t).resolvedLocale()}]});function Fi(t){return{result:"success",value:t}}function Rn(t){return{result:"error",value:t}}function aa(t){return t["property-type"]==="data-driven"||t["property-type"]==="cross-faded-data-driven"}function ro(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Gi(t){return!!t.expression&&t.expression.interpolated}function zi(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var Bn=function(e,r){this.expression=e,this._warningHistory={},this._evaluator=new Br,this._defaultValue=r?ua(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};Bn.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,c,m,E,I){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=a||null,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)},Bn.prototype.evaluate=function(e,r,n,a,c,m,E,I){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=a||null,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=I||null;try{var A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!==A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Ut("Expected value to be one of "+Object.keys(this._enumValues).map(function(P){return JSON.stringify(P)}).join(", ")+", but found "+JSON.stringify(A)+" instead.");return A}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof Nr<"u"&&Nr.warn(P.message)),this._defaultValue}};function oa(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in Di}function kn(t,e){var r=new kr(Di,[],e?sa(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Fi(new Bn(n,e)):Rn(r.errors)}var ci=function(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Ir(r.expression)};ci.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,c,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,a,c,m)},ci.prototype.evaluate=function(e,r,n,a,c,m){return this._styleExpression.evaluate(e,r,n,a,c,m)};var jn=function(e,r,n,a){this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Ir(r.expression),this.interpolationType=a};jn.prototype.evaluateWithoutErrorHandling=function(e,r,n,a,c,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,a,c,m)},jn.prototype.evaluate=function(e,r,n,a,c,m){return this._styleExpression.evaluate(e,r,n,a,c,m)},jn.prototype.interpolationFactor=function(e,r,n){return this.interpolationType?Gt.interpolationFactor(this.interpolationType,e,r,n):0};function no(t,e){if(t=kn(t,e),t.result==="error")return t;var r=t.value.expression,n=wi(r);if(!n&&!aa(e))return Rn([new ze("","data expressions not supported")]);var a=Wi(r,["zoom","pitch","distance-from-center"]);if(!a&&!ro(e))return Rn([new ze("","zoom expressions not supported")]);var c=Xn(r);if(!c&&!a)return Rn([new ze("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(c instanceof ze)return Rn([c]);if(c instanceof Gt&&!Gi(e))return Rn([new ze("",'"interpolate" expressions cannot be used with this property')]);if(!c)return Fi(n?new ci("constant",t.value):new ci("source",t.value));var m=c instanceof Gt?c.interpolation:void 0;return Fi(n?new jn("camera",t.value,c.labels,m):new jn("composite",t.value,c.labels,m))}function Xn(t){var e=null;if(t instanceof Lr)e=Xn(t.result);else if(t instanceof or)for(var r=0,n=t.args;r<n.length;r+=1){var a=n[r];if(e=Xn(a),e)break}else(t instanceof Qr||t instanceof Gt)&&t.input instanceof Yt&&t.input.name==="zoom"&&(e=t);return e instanceof ze||t.eachChild(function(c){var m=Xn(c);m instanceof ze?e=m:!e&&m?e=new ze("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&m&&e!==m&&(e=new ze("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function sa(t){var e={color:Et,string:ve,number:ee,enum:ve,boolean:ue,formatted:vn,resolvedImage:yn};return t.type==="array"?gr(e[t.value]||Te,t.length):e[t.type]}function ua(t){return t.type==="color"&&(zi(t.default)||Array.isArray(t.default))?new V(0,0,0,0):t.type==="color"?V.parse(t.default)||null:t.default===void 0?null:t.default}function la(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Xr(t){if(Array.isArray(t))return t.map(Xr);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=Xr(t[r]);return e}return la(t)}var fa={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function ca(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var n=r[e];if(!ca(n)&&typeof n!="boolean")return!1}return!0;default:return!0}}function io(t,e){if(e===void 0&&(e="fill"),t==null)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};ca(t)||(t=Vn(t));var r=t,n=!0;try{n=ao(r)}catch{Nr.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
`+JSON.stringify(r,null,2)+`
        `)}var a=fa["filter_"+e],c=kn(n,a),m=null;if(c.result==="error")throw new Error(c.value.map(function(C){return C.key+": "+C.message}).join(", "));m=function(C,N,Z){return c.value.evaluate(C,N,{},Z)};var E=null,I=null;if(n!==r){var A=kn(r,a);if(A.result==="error")throw new Error(A.value.map(function(C){return C.key+": "+C.message}).join(", "));E=function(C,N,Z,re,H){return A.value.evaluate(C,N,{},Z,void 0,void 0,re,H)},I=!wi(A.value.expression)}m=m;var P=da(n);return{filter:m,dynamicFilter:E||void 0,needGeometry:P,needFeature:!!I}}function ao(t){if(!_n(t))return t;var e=Xr(t);return pa(e),e=Zi(e),e}function Zi(t){if(!Array.isArray(t))return t;var e=uo(t);return e===!0?e:e.map(function(r){return Zi(r)})}function pa(t){var e=!1,r=[];if(t[0]==="case"){for(var n=1;n<t.length-1;n+=2)e=e||_n(t[n]),r.push(t[n+1]);r.push(t[t.length-1])}else if(t[0]==="match"){e=e||_n(t[1]);for(var a=2;a<t.length-1;a+=2)r.push(t[a+1]);r.push(t[t.length-1])}else if(t[0]==="step"){e=e||_n(t[1]);for(var c=1;c<t.length-1;c+=2)r.push(t[c+1])}e&&(t.length=0,t.push.apply(t,["any"].concat(r)));for(var m=1;m<t.length;m++)pa(t[m])}function _n(t){if(!Array.isArray(t))return!1;if(oo(t[0]))return!0;for(var e=1;e<t.length;e++){var r=t[e];if(_n(r))return!0}return!1}function oo(t){return t==="pitch"||t==="distance-from-center"}var so=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function uo(t){if(so.has(t[0]))for(var e=1;e<t.length;e++){var r=t[e];if(_n(r))return!0}return t}function ha(t,e){return t<e?-1:t>e?1:0}function da(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(var e=1;e<t.length;e++)if(da(t[e]))return!0;return!1}function Vn(t){if(!t)return!0;var e=t[0];if(t.length<=1)return e!=="any";var r=e==="=="?Yn(t[1],t[2],"=="):e==="!="?pi(Yn(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Yn(t[1],t[2],e):e==="any"?lo(t.slice(1)):e==="all"?["all"].concat(t.slice(1).map(Vn)):e==="none"?["all"].concat(t.slice(1).map(Vn).map(pi)):e==="in"?va(t[1],t.slice(2)):e==="!in"?pi(va(t[1],t.slice(2))):e==="has"?Ui(t[1]):e==="!has"?pi(Ui(t[1])):e==="within"?t:!0;return r}function Yn(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function lo(t){return["any"].concat(t.map(Vn))}function va(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(r){return typeof r!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(ha)]]:["filter-in-small",t,["literal",e]]}}function Ui(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function pi(t){return["!",t]}var fo=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function bn(t,e){var r={};for(var n in t)n!=="ref"&&(r[n]=t[n]);return fo.forEach(function(a){a in e&&(r[a]=e[a])}),r}function ya(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=bn(t[n],e[t[n].ref]));return t}var Bi={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},Kn=" ",ma=/(italic|oblique)$/i,ki={},ji=function(t,e,r){var n=ki[t];if(!n){Array.isArray(t)||(t=[t]);for(var a=400,c="normal",m=[],E,I,A=0,P=t.length;A<P;++A){var C=t[A],N=C.split(" "),Z=N[N.length-1].toLowerCase();Z=="normal"||Z=="italic"||Z=="oblique"?(c=I?c:Z,N.pop(),Z=N[N.length-1].toLowerCase()):ma.test(Z)&&(Z=Z.replace(ma,""),c=I?c:N[N.length-1].replace(Z,""));for(var re in Bi){var H=N.length>1?N[N.length-2].toLowerCase():"";if(Z==re||Z==re.replace("-","")||H+"-"+Z==re){a=E?a:Bi[re],N.pop(),H&&re.startsWith(H)&&N.pop();break}}!E&&typeof Z=="number"&&(a=Z);var k=N.join(Kn).replace("Klokantech Noto Sans","Noto Sans");k.indexOf(Kn)!==-1&&(k='"'+k+'"'),m.push(k)}n=ki[t]=[c,a,m]}return n[0]+Kn+n[1]+Kn+e+"px"+(r?"/"+r:"")+Kn+n[2]},ga="https://api.mapbox.com";function hi(t){var e="mapbox://";return t.indexOf(e)!==0?"":t.slice(e.length)}function y(t,e,r){var n=hi(t);if(!n)return decodeURI(new URL(t,r).href);var a="sprites/";if(n.indexOf(a)!==0)throw new Error("unexpected sprites url: "+t);var c=n.slice(a.length);return ga+"/styles/v1/"+c+"/sprite?access_token="+e}function s(t,e){var r=hi(t);if(!r)return decodeURI(new URL(t,location.href).href);var n="styles/";if(r.indexOf(n)!==0)throw new Error("unexpected style url: "+t);var a=r.slice(n.length);return ga+"/styles/v1/"+a+"?&access_token="+e}function i(t,e,r,n){var a=new URL(t,n),c=hi(t);return c?"https://{a-d}.tiles.mapbox.com/v4/"+c+"/{z}/{x}/{y}.vector.pbf?access_token="+e:(e&&a.searchParams.set(r,e),decodeURI(a.href))}function o(t){return t*Math.PI/180}var l=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function v(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);var r=document.createElement("canvas");return r.width=t,r.height=e,r}function x(t,e){for(var r=0,n=e.length;r<n;++r){var a=e[r];if(a<t&&r+1<n){var c=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(c)}}return n-1}var w={};function _(t,e,r){if(r===void 0&&(r={}),e in w)return w[e];var n=r.transformRequest?r.transformRequest(e,t)||new Request(e):new Request(e);n.headers.get("Accept")||n.headers.set("Accept","application/json");var a=fetch(n).then(function(c){return delete w[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(c){return delete w[e],Promise.reject(new Error("Error fetching source "+e))});return w[e]=a,a}function L(t,e){if(typeof t=="string")if(t.trim().startsWith("{"))try{var r=JSON.parse(t);return Promise.resolve(r)}catch(n){return Promise.reject(n)}else return t=s(t,e.accessToken),_("Style",t,e);else return Promise.resolve(t)}var M={};function F(t,e,r){r===void 0&&(r={});var n=[e,JSON.stringify(t)].toString(),a=M[n];if(!a||r.transformRequest){var c=t.url;if(c&&!t.tiles){var m=i(c,r.accessToken,r.accessTokenParam||"access_token",e||location.href);c.startsWith("mapbox://")?a=Promise.resolve(Object.assign({},t,{url:void 0,tiles:m})):a=_("Source",m,r).then(function(E){for(var I=0,A=E.tiles.length;I<A;++I){var P=E.tiles[I];if(r.transformRequest){var C=r.transformRequest(m,"Source");C&&(m=C.url)}var N=i(P,r.accessToken,r.accessTokenParam||"access_token",m);if(r.transformRequest){var Z=r.transformRequest(N,"Tiles");Z instanceof Request&&(N=decodeURI(Z.url))}E.tiles[I]=N}return Promise.resolve(E)})}else t=Object.assign({},t,{tiles:t.tiles.map(function(E){return i(E,r.accessToken,r.accessTokenParam||"access_token",e||location.href)})}),a=Promise.resolve(Object.assign({},t));M[n]=a}return a}var U=Array(256).join("\u200A");function K(t,e){if(e>=.05){for(var r="",n=t.split(`
`),a=U.slice(0,Math.round(e/.1)),c=0,m=n.length;c<m;++c)c>0&&(r+=`
`),r+=n[c].split("").join(a);return r}return t}var Y;function ne(){return Y||(Y=v(1,1).getContext("2d")),Y}function q(t,e){return ne().measureText(t).width+(t.length-1)*e}var pe={};function ie(t,e,r,n){if(t.indexOf(`
`)!==-1){for(var a=t.split(`
`),c=[],m=0,E=a.length;m<E;++m)c.push(ie(a[m],e,r,n));return c.join(`
`)}var I=r+","+e+","+t+","+n,A=pe[I];if(!A){var P=t.split(" ");if(P.length>1){var C=ne();C.font=e;for(var N=C.measureText("M").width,Z=N*r,re="",H=[],k=0,Pe=P.length;k<Pe;++k){var Se=P[k],Re=re+(re?" ":"")+Se;q(Re,n)<=Z?re=Re:(re&&H.push(re),re=Se)}re&&H.push(re);for(var Le=0,Ee=H.length;Le<Ee&&Ee>1;++Le){var we=H[Le];if(q(we,n)<Z*.35){var We=Le>0?q(H[Le-1],n):1/0,et=Le<Ee-1?q(H[Le+1],n):1/0;H.splice(Le,1),Ee-=1,We<et?(H[Le-1]+=" "+we,Le-=1):H[Le]=we+" "+H[Le]}}for(var nt=0,ht=H.length-1;nt<ht;++nt){var Ht=H[nt],nn=H[nt+1];if(q(Ht,n)>Z*.7&&q(nn,n)<Z*.6){var Bt=Ht.split(" "),Yr=Bt.pop();q(Yr,n)<Z*.2&&(H[nt]=Bt.join(" "),H[nt+1]=Yr+" "+nn),ht-=1}}A=H.join(`
`)}else A=t;A=K(A,n),pe[I]=A}return A}var Ze=/font-family: ?([^;]*);/,_e=/("|')/g,Ie;function Oe(t){if(!Ie){Ie={};for(var e=document.styleSheets,r=0,n=e.length;r<n;++r){var a=e[r];try{var c=a.rules||a.cssRules;if(c)for(var m=0,E=c.length;m<E;++m){var I=c[m];if(I.type==5){var A=I.cssText.match(Ze);Ie[A[1].replace(_e,"")]=!0}}}catch{}}}return t in Ie}var Je={};function it(t){var e=t.toString();if(e in Je)return Je[e];for(var r=[],n=0,a=t.length;n<a;++n){t[n]=t[n].replace("Arial Unicode MS","Arial");var c=t[n],m=ji(c,1);(0,me.Qx)(m);var E=m.split(" ");r.push([E.slice(3).join(" ").replace(/"/g,""),E[1],E[0]])}for(var I=0,A=r.length;I<A;++I){var P=r[I],C=P[0];if(!Oe(C)&&me.sG.get(P[2]+`
`+P[1]+` 
`+C)!==100){var N="https://fonts.googleapis.com/css?family="+C.replace(/ /g,"+")+":"+P[1]+P[2];if(!document.querySelector('link[href="'+N+'"]')){var Z=document.createElement("link");Z.href=N,Z.rel="stylesheet",document.head.appendChild(Z)}}}return Je[e]=t,t}var Ke={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},ft={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},He=function(t,e){var r=no(t,e);if(r.result==="error")throw new Error(r.value.map(function(n){return n.key+": "+n.message}).join(", "));return r.value},Ot={},Ct={zoom:0},Zt,At;function fe(t,e,r,n,a,c,m){var E=t.id;c||(c={},Nr.warn("No functionCache provided to getValue()")),c[E]||(c[E]={});var I=c[E];if(!I[r]){var A=(t[e]||Ot)[r],P=fa[e+"_"+t.type][r];A===void 0&&(A=P.default);var C=oa(A);if(!C&&zi(A)&&(A=te(A,P),C=!0),C){var N=He(A,P);I[r]=N.evaluate.bind(N)}else P.type=="color"&&(A=V.parse(A)),I[r]=function(){return A}}return Ct.zoom=n,I[r](Ct,a,m)}function kt(t,e,r,n){var a=fe(t,"layout","icon-allow-overlap",e,r,n);if(!a)return"declutter";var c=fe(t,"layout","icon-ignore-placement",e,r,n);return c?"none":"obstacle"}function _t(t,e,r,n,a){return a||Nr.warn("No filterCache provided to evaluateFilter()"),t in a||(a[t]=io(e).filter),Ct.zoom=n,a[t](Ct,r)}var xt=!1;function mt(t){xt=t}function Pt(t,e){if(t){if(!xt&&(t.a===0||e===0))return;var r=t.a;return e=e===void 0?1:e,r===0?"transparent":"rgba("+Math.round(t.r*255/r)+","+Math.round(t.g*255/r)+","+Math.round(t.b*255/r)+","+r*e+")"}return t}var Rr=/\{[^{}}]*\}/g;function sr(t,e){return t.replace(Rr,function(r){return e[r.slice(1,-1)]||""})}var bt=!1;function jt(t){t===void 0&&(t=!1),bt=t}function Ue(t,e,r,n,a,c,m){if(n===void 0&&(n=l),a===void 0&&(a=void 0),c===void 0&&(c=void 0),m===void 0&&(m=void 0),typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");var E,I;if(c){if(typeof Image<"u"){var A=new Image;A.crossOrigin="anonymous",A.onload=function(){E=A,I=[A.width,A.height],t.changed(),A.onload=null},A.src=c}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var P=self;P.postMessage({action:"loadImage",src:c}),P.addEventListener("message",function(Ln){Ln.data.action==="imageLoaded"&&Ln.data.src===c&&(E=Ln.data.image,I=[E.width,E.height])})}}for(var C=ya(e.layers),N={},Z=[],re={},H={},k={},Pe={},Se,Re=0,Le=C.length;Re<Le;++Re){var Ee=C[Re],we=Ee.id;if(typeof r=="string"&&Ee.source==r||r.indexOf(we)!==-1){var We=Ee["source-layer"];if(Se){if(Ee.source!==Se)throw new Error('Layer "'+we+'" does not use source "'+Se)}else{Se=Ee.source;var et=e.sources[Se];if(!et)throw new Error('Source "'+Se+'" is not defined');var nt=et.type;if(nt!=="vector"&&nt!=="geojson")throw new Error('Source "'+Se+'" is not of type "vector" or "geojson", but "'+nt+'"')}var ht=N[We];ht||(ht=[],N[We]=ht),ht.push({layer:Ee,index:Re}),Z.push(we)}}var Ht=new R.Z,nn=new d.Z,Bt=[],Yr=function(Pn,Ln){var Jn=Pn.getProperties(),yo=N[Jn.layer];if(yo){var be=n.indexOf(Ln);be==-1&&(be=x(Ln,n));for(var $t=Ke[Pn.getGeometry().getType()],Ae={properties:Jn,type:$t},Ge=t.get("mapbox-featurestate")[Pn.getId()],Nt=-1,Xi,mo=0,os=yo.length;mo<os;++mo){var Zo=yo[mo],ye=Zo.layer,ss=ye.id,yi=ye.layout||Ot,On=ye.paint||Ot;if(!(yi.visibility==="none"||"minzoom"in ye&&be<ye.minzoom||"maxzoom"in ye&&be>=ye.maxzoom)){var go=ye.filter;if(!go||_t(ss,go,Ae,be,Pe)){Xi=ye;var Wt=void 0,pn=void 0,Ia=void 0,Mr=void 0,an=void 0,de=void 0,hn=Zo.index;if($t==3&&(ye.type=="fill"||ye.type=="fill-extrusion"))if(pn=fe(ye,"paint",ye.type+"-opacity",be,Ae,k,Ge),ye.type+"-pattern"in On){var Ra=fe(ye,"paint",ye.type+"-pattern",be,Ae,k,Ge);if(Ra){var _a=typeof Ra=="string"?sr(Ra,Jn):Ra.toString();if(E&&a&&a[_a]){++Nt,de=Bt[Nt],(!de||!de.getFill()||de.getStroke()||de.getText())&&(de=new le.ZP({fill:new d.Z}),Bt[Nt]=de),Ia=de.getFill(),de.setZIndex(hn);var Uo=_a+"."+pn,Eo=H[Uo];if(!Eo){var Cn=a[_a],Xs=v(Cn.width,Cn.height),us=Xs.getContext("2d");us.globalAlpha=pn,us.drawImage(E,Cn.x,Cn.y,Cn.width,Cn.height,0,0,Cn.width,Cn.height),Eo=us.createPattern(Xs,"repeat"),H[Uo]=Eo}Ia.setColor(Eo)}}}else Wt=Pt(fe(ye,"paint",ye.type+"-color",be,Ae,k,Ge),pn),ye.type+"-outline-color"in On&&(an=Pt(fe(ye,"paint",ye.type+"-outline-color",be,Ae,k,Ge),pn)),an||(an=Wt),(Wt||an)&&(++Nt,de=Bt[Nt],(!de||Wt&&!de.getFill()||!Wt&&de.getFill()||an&&!de.getStroke()||!an&&de.getStroke()||de.getText())&&(de=new le.ZP({fill:Wt?new d.Z:void 0,stroke:an?new R.Z:void 0}),Bt[Nt]=de),Wt&&(Ia=de.getFill(),Ia.setColor(Wt)),an&&(Mr=de.getStroke(),Mr.setColor(an),Mr.setWidth(.5)),de.setZIndex(hn));if($t!=1&&ye.type=="line"){Wt=!("line-pattern"in On)&&"line-color"in On?Pt(fe(ye,"paint","line-color",be,Ae,k,Ge),fe(ye,"paint","line-opacity",be,Ae,k,Ge)):void 0;var ls=fe(ye,"paint","line-width",be,Ae,k,Ge);Wt&&ls>0&&(++Nt,de=Bt[Nt],(!de||!de.getStroke()||de.getFill()||de.getText())&&(de=new le.ZP({stroke:new R.Z}),Bt[Nt]=de),Mr=de.getStroke(),Mr.setLineCap(fe(ye,"layout","line-cap",be,Ae,k,Ge)),Mr.setLineJoin(fe(ye,"layout","line-join",be,Ae,k,Ge)),Mr.setMiterLimit(fe(ye,"layout","line-miter-limit",be,Ae,k,Ge)),Mr.setColor(Wt),Mr.setWidth(ls),Mr.setLineDash(On["line-dasharray"]?fe(ye,"paint","line-dasharray",be,Ae,k,Ge).map(function(Sr){return Sr*ls}):null),de.setZIndex(hn))}var Bo=!1,Jt=null,Vs=0,ko=void 0,Dr=void 0,fs=void 0;if(($t==1||$t==2)&&"icon-image"in yi){var jo=fe(ye,"layout","icon-image",be,Ae,k,Ge);if(jo){ko=typeof jo=="string"?sr(jo,Jn):jo.toString();var cs=void 0;if(E&&a&&a[ko]){var Ys=fe(ye,"layout","icon-rotation-alignment",be,Ae,k,Ge);if($t==2){var mi=Pn.getGeometry();if(mi.getFlatMidpoint||mi.getFlatMidpoints){var Xo=mi.getExtent(),Nu=Math.sqrt(Math.max(Math.pow((Xo[2]-Xo[0])/Ln,2),Math.pow((Xo[3]-Xo[1])/Ln,2)));if(Nu>150){var ba=mi.getType()==="MultiLineString"?mi.getFlatMidpoints():mi.getFlatMidpoint();At||(Zt=[NaN,NaN],At=new G.ZP("Point",Zt,[],{},null)),cs=At,Zt[0]=ba[0],Zt[1]=ba[1];var Fu=fe(ye,"layout","symbol-placement",be,Ae,k,Ge);if(Fu==="line"&&Ys==="map")for(var Vo=mi.getStride(),To=mi.getFlatCoordinates(),Aa=0,Gu=To.length-Vo;Aa<Gu;Aa+=Vo){var ps=To[Aa],hs=To[Aa+1],ds=To[Aa+Vo],vs=To[Aa+Vo+1],zu=Math.min(ps,ds),Zu=Math.min(hs,vs),Uu=Math.max(ps,ds),Bu=Math.max(hs,vs);if(ba[0]>=zu&&ba[0]<=Uu&&ba[1]>=Zu&&ba[1]<=Bu){Vs=Math.atan2(hs-vs,ds-ps);break}}}}}if($t!==2||cs){var Ks=fe(ye,"layout","icon-size",be,Ae,k,Ge),qn=On["icon-color"]!==void 0?fe(ye,"paint","icon-color",be,Ae,k,Ge):null;if(!qn||qn.a!==0){var ys=ko+"."+Ks;if(qn!==null&&(ys+="."+qn),Dr=re[ys],!Dr){var Pa=a[ko],ku=kt(ye,be,Ae,k);Dr=new $.Z({color:qn?[qn.r*255,qn.g*255,qn.b*255,qn.a]:void 0,img:E,imgSize:I,size:[Pa.width,Pa.height],offset:[Pa.x,Pa.y],rotateWithView:Ys==="map",scale:Ks/Pa.pixelRatio,displacement:"icon-offset"in yi?fe(ye,"layout","icon-offset",be,Ae,k,Ge).map(function(Sr){return-Sr*Pa.pixelRatio}):void 0,declutterMode:ku}),re[ys]=Dr}}Dr&&(++Nt,de=Bt[Nt],(!de||!de.getImage()||de.getFill()||de.getStroke())&&(de=new le.ZP,Bt[Nt]=de),de.setGeometry(cs),Dr.setRotation(Vs+o(fe(ye,"layout","icon-rotate",be,Ae,k,Ge))),Dr.setOpacity(fe(ye,"paint","icon-opacity",be,Ae,k,Ge)),Dr.setAnchor(ft[fe(ye,"layout","icon-anchor",be,Ae,k,Ge)]),de.setImage(Dr),Jt=de.getText(),de.setText(void 0),de.setZIndex(hn),Bo=!0,fs=!1)}else fs=!0}}}if($t==1&&ye.type==="circle"){++Nt,de=Bt[Nt],(!de||!de.getImage()||de.getFill()||de.getStroke())&&(de=new le.ZP,Bt[Nt]=de);var Hs="circle-radius"in On?fe(ye,"paint","circle-radius",be,Ae,k,Ge):5,ms=Pt(fe(ye,"paint","circle-stroke-color",be,Ae,k,Ge),fe(ye,"paint","circle-stroke-opacity",be,Ae,k,Ge)),gs=Pt(fe(ye,"paint","circle-color",be,Ae,k,Ge),fe(ye,"paint","circle-opacity",be,Ae,k,Ge)),Es=fe(ye,"paint","circle-stroke-width",be,Ae,k,Ge),Ws=Hs+"."+ms+"."+gs+"."+Es;Dr=re[Ws],Dr||(Dr=new ut.Z({radius:Hs,stroke:ms&&Es>0?new R.Z({width:Es,color:ms}):void 0,fill:gs?new d.Z({color:gs}):void 0,declutterMode:"none"}),re[Ws]=Dr),de.setImage(Dr),Jt=de.getText(),de.setText(void 0),de.setGeometry(void 0),de.setZIndex(hn),Bo=!0}var mr=void 0,xo=void 0,So=void 0,gi=void 0,wo=void 0,Ts=void 0;if("text-field"in yi){gi=Math.round(fe(ye,"layout","text-size",be,Ae,k,Ge));var xs=fe(ye,"layout","text-font",be,Ae,k,Ge);So=fe(ye,"layout","text-line-height",be,Ae,k,Ge),xo=ji(m?m(xs):xs,gi,So),xo.includes("sans-serif")||(xo+=",sans-serif"),wo=fe(ye,"layout","text-letter-spacing",be,Ae,k,Ge),Ts=fe(ye,"layout","text-max-width",be,Ae,k,Ge);var La=fe(ye,"layout","text-field",be,Ae,k,Ge);typeof La=="object"&&La.sections?La.sections.length===1?mr=La.toString():mr=La.sections.reduce(function(Sr,Ei,Vu){var ru=Ei.fontStack?Ei.fontStack.split(","):xs,bs=ji(m?m(ru):ru,gi*(Ei.scale||1),So),Oa=Ei.text;if(Oa===`
`)return Sr.push(`
`,""),Sr;if($t==2){Sr.push(K(Oa,wo),bs);return}Oa=ie(Oa,bs,Ts,wo).split(`
`);for(var Ko=0,Xu=Oa.length;Ko<Xu;++Ko)Ko>0&&Sr.push(`
`,""),Sr.push(Oa[Ko],bs);return Sr},[]):mr=sr(La,Jn).trim(),pn=fe(ye,"paint","text-opacity",be,Ae,k,Ge)}if(mr&&pn&&!fs){Bo||(++Nt,de=Bt[Nt],(!de||!de.getText()||de.getFill()||de.getStroke())&&(de=new le.ZP,Bt[Nt]=de),de.setImage(void 0),de.setGeometry(void 0)),de.getText()||de.setText(Jt||new je.Z({padding:[2,2,2,2]})),Jt=de.getText();var Js=yi["text-transform"];Js=="uppercase"?mr=Array.isArray(mr)?mr.map(function(Sr,Ei){return Ei%2?Sr:Sr.toUpperCase()}):mr.toUpperCase():Js=="lowercase"&&(mr=Array.isArray(mr)?mr.map(function(Sr,Ei){return Ei%2?Sr:Sr.toLowerCase()}):mr.toLowerCase());var qs=Array.isArray(mr)?mr:$t==2?K(mr,wo):ie(mr,xo,Ts,wo);Jt.setText(qs),Jt.setFont(xo),Jt.setRotation(o(fe(ye,"layout","text-rotate",be,Ae,k,Ge)));var Yo=fe(ye,"layout","text-anchor",be,Ae,k,Ge),Ss=Bo||$t==1?"point":fe(ye,"layout","symbol-placement",be,Ae,k,Ge);Jt.setPlacement(Ss),Jt.setOverflow(Ss==="point");var Vi=fe(ye,"paint","text-halo-width",be,Ae,k,Ge),Qs=fe(ye,"layout","text-offset",be,Ae,k,Ge),$s=fe(ye,"paint","text-translate",be,Ae,k,Ge),ws=0,Is=0;if(Ss=="point"){var Rs="center";Yo.indexOf("left")!==-1?(Rs="left",Is=Vi):Yo.indexOf("right")!==-1&&(Rs="right",Is=-Vi),Jt.setTextAlign(Rs);var ju=fe(ye,"layout","text-rotation-alignment",be,Ae,k,Ge);Jt.setRotateWithView(ju=="map")}else Jt.setMaxAngle(o(fe(ye,"layout","text-max-angle",be,Ae,k,Ge))*mr.length/qs.length),Jt.setTextAlign(),Jt.setRotateWithView(!1);var _s="middle";Yo.indexOf("bottom")==0?(_s="bottom",ws=-Vi-.5*(So-1)*gi):Yo.indexOf("top")==0&&(_s="top",ws=Vi+.5*(So-1)*gi),Jt.setTextBaseline(_s),Jt.setOffsetX(Qs[0]*gi+Is+$s[0]),Jt.setOffsetY(Qs[1]*gi+ws+$s[1]),nn.setColor(Pt(fe(ye,"paint","text-color",be,Ae,k,Ge),pn)),Jt.setFill(nn);var eu=Pt(fe(ye,"paint","text-halo-color",be,Ae,k,Ge),pn);if(eu){Ht.setColor(eu),Vi*=2;var tu=.5*gi;Ht.setWidth(Vi<=tu?Vi:tu),Jt.setStroke(Ht)}else Jt.setStroke(void 0);var Io=fe(ye,"layout","text-padding",be,Ae,k,Ge),Ro=Jt.getPadding();Io!==Ro[0]&&(Ro[0]=Io,Ro[1]=Io,Ro[2]=Io,Ro[3]=Io),de.setZIndex(hn)}}}}if(Nt>-1)return Bt.length=Nt+1,bt&&(typeof Pn.set=="function"?Pn.set("mapbox-layer",Xi):Pn.getProperties()["mapbox-layer"]=Xi),Bt}};return t.setStyle(Yr),t.set("mapbox-source",Se),t.set("mapbox-layers",Z),t.set("mapbox-featurestate",{}),Yr}function vr(t,e){if(!e.accessToken){e=Object.assign({},e);var r=new URL(t).searchParams;r.forEach(function(n,a){e.accessToken=n,e.accessTokenParam=a})}return e}function xr(t,e,r,n,a){r===void 0&&(r=""),n===void 0&&(n={}),a===void 0&&(a=void 0);var c,m,E;return typeof n=="string"?(c=n,E={}):(c=n.styleUrl,E=n),a||(a=E.resolutions),!c&&typeof e=="string"&&!e.trim().startsWith("{")&&(c=e),c&&(c=c.startsWith("data:")?location.href:s(c,E.accessToken),E=vr(c,E)),new Promise(function(I,A){L(e,E).then(function(P){if(P.version!=8)return A(new Error("glStyle version 8 required."));if(!(t instanceof br.default||t instanceof De.default))return A(new Error("Can only apply to VectorLayer or VectorTileLayer"));var C=t instanceof De.default?"vector":"geojson";if(r?Array.isArray(r)?m=P.layers.find(function(Ee){return Ee.id===r[0]}).source:m=r:(m=Object.keys(P.sources).find(function(Ee){return P.sources[Ee].type===C}),r=m),!m)return A(new Error("No "+C+" source found in the glStyle."));function N(){if(t instanceof De.default)return Wn(P.sources[m],c,E).then(function(et){var nt=t.getSource();if(nt?et!==nt&&(nt.setTileUrlFunction(et.getTileUrlFunction()),nt.format_||(nt.format_=et.format_),nt.getAttributions()||nt.setAttributions(et.getAttributions()),nt.getTileLoadFunction()===st.defaultLoadFunction&&nt.setTileLoadFunction(et.getTileLoadFunction()),(0,gt.equivalent)(nt.getProjection(),et.getProjection())&&(nt.tileGrid=et.getTileGrid())):t.setSource(et),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var ht=t.getSource().getTileGrid();t.setMaxResolution(ht.getResolution(ht.getMinZoom()))}});var Ee=P.sources[m],we=t.getSource();(!we||we.get("mapbox-source")!==Ee)&&(we=Po(Ee,c,E));var We=t.getSource();return We?we!==We&&(We.getAttributions()||We.setAttributions(we.getAttributions()),We.format_||(We.format_=we.getFormat()),We.url_=we.getUrl()):t.setSource(we),Promise.resolve()}var Z,re,H,k;function Pe(){!k&&(!P.sprite||re)?(k=Ue(t,P,r,a,re,H,it),t.getStyle()?N().then(I).catch(A):A(new Error("Nothing to show for source ["+m+"]"))):k?(t.setStyle(k),N().then(I).catch(A)):A(new Error("Something went wrong trying to apply style."))}if(P.sprite){var Se=new URL(y(P.sprite,E.accessToken,c||location.href));Z=window.devicePixelRatio>=1.5?.5:1;var Re=Z==.5?"@2x":"",Le=Se.origin+Se.pathname+Re+".json"+Se.search;new Promise(function(Ee,we){_("Sprite",Le,E).then(Ee).catch(function(We){Le=Se.origin+Se.pathname+".json"+Se.search,_("Sprite",Le,E).then(Ee).catch(we)})}).then(function(Ee){if(Ee===void 0&&A(new Error("No sprites found.")),re=Ee,H=Se.origin+Se.pathname+Re+".png"+Se.search,E.transformRequest){var we=E.transformRequest(H,"SpriteImage");we instanceof Request&&(H=encodeURI(we.url))}Pe()}).catch(function(Ee){A(new Error("Sprites cannot be loaded: "+Le+": "+Ee.message))})}else Pe()}).catch(A)})}var ur={};function Hn(t,e){var r={id:e.id,type:e.type},n={};function a(c){var m=e.layout||{},E=e.paint||{};r.paint=E;var I=typeof t.getSource=="function"?t.getSource().getTileGrid().getZForResolution(c):t.getView().getZoom(),A=typeof t.getTargetElement=="function"?t.getTargetElement():void 0,P,C;if(E["background-color"]!==void 0&&(P=fe(r,"paint","background-color",I,ur,n),A&&(A.style.background=V.parse(P).toString())),E["background-opacity"]!==void 0&&(C=fe(r,"paint","background-opacity",I,ur,n),A&&(A.style.opacity=C)),m.visibility=="none"){A&&(A.style.backgroundColor="",A.style.opacity="");return}return Pt(P,C)}if(typeof t.getTargetElement=="function")t.getTargetElement()&&a(),t.on(["change:resolution","change:target"],a);else if(typeof t.setBackground=="function")t.setBackground(a);else throw new Error("Unable to apply background.")}function di(t,e){e.layers.some(function(r){if(r.type==="background")return Hn(t,r),!0})}function Ea(t,e,r){return r===void 0&&(r={}),typeof e=="object"?(di(t,e),Promise.resolve()):L(e,r).then(function(n){di(t,n)})}function co(t,e){var r;return t.some(function(n){if(n.id==e)return r=n.source,!0}),r}function Ta(t){var e=t.bounds;if(e){var r=(0,gt.fromLonLat)([e[0],e[1]]),n=(0,gt.fromLonLat)([e[2],e[3]]);return[r[0],r[1],n[0],n[1]]}}function Wn(t,e,r){return new Promise(function(n,a){F(t,e,r).then(function(c){var m=new _r.Z({tileJSON:c}),E=m.getTileJSON(),I=m.getTileGrid(),A=Ta(E),P=E.minzoom||0,C=E.maxzoom||22,N={attributions:m.getAttributions(),format:new xe.Z,tileGrid:new Rt.default({origin:I.getOrigin(0),extent:A||I.getExtent(),minZoom:P,resolutions:l.slice(0,C+1),tileSize:512})};Array.isArray(E.tiles)?N.urls=E.tiles:N.url=E.tiles,c.olSourceOptions&&Object.assign(N,c.olSourceOptions),n(new st.default(N))}).catch(a)})}function xa(t,e,r){var n=new VectorTileLayer({declutter:!0,visible:!1});return Wn(t,e,r).then(function(a){a.set("mapbox-source",t),n.setSource(a)}).catch(function(a){n.setSource(void 0)}),n}function Ho(t,e,r){var n=new TileLayer;return F(t,e,r).then(function(a){var c=new TileJSON({transition:0,crossOrigin:"anonymous",tileJSON:a}),m=Ta(a),E=c.getTileGrid(),I=t.tileSize||a.tileSize||512,A=a.minzoom||0,P=a.maxzoom||22;c.tileGrid=new TileGrid({origin:E.getOrigin(0),extent:m||E.getExtent(),minZoom:A,resolutions:createXYZ({maxZoom:P,tileSize:I}).getResolutions(),tileSize:I});var C=c.getTileUrlFunction();c.setTileUrlFunction(function(N,Z,re){var H=C(N,Z,re);if(H.indexOf("{bbox-epsg-3857}")!=-1){var k=c.getTileGrid().getTileCoordExtent(N);H=H.replace("{bbox-epsg-3857}",k.toString())}return H}),c.set("mapbox-source",t),n.setSource(c)}).catch(function(a){n.setSource(void 0)}),n}var Ao=new Tt.default;function Po(t,e,r){var n=t.data,a={};if(typeof n=="string"){var c=i(n,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(r.transformRequest){var m=r.transformRequest(c,"GeoJSON");m instanceof Request&&(c=encodeURI(m.url))}a.url=c}else a.features=Ao.readFeatures(n,{featureProjection:(0,gt.getUserProjection)()||"EPSG:3857"});var E=new Ar.default(Object.assign({attributions:t.attribution,format:Ao},a));return E.set("mapbox-source",t),E}function Wo(t,e,r){return new VectorLayer({declutter:!0,source:Po(t,e,r),visible:!1})}function Lo(t,e,r,n){var a=r.getZoom(),c=fe(t,"paint","raster-opacity",a,ur,n);e.setOpacity(c)}function Oo(t,e,r,n){var a=[],c=e.getView();!c.isDef()&&!c.getRotation()&&!c.getResolutions()&&(c=new View(Object.assign(c.getProperties(),{maxResolution:l[0]})),e.setView(c)),"center"in t&&!c.getCenter()&&c.setCenter(fromLonLat(t.center)),"zoom"in t&&c.getZoom()===void 0&&c.setResolution(l[0]/Math.pow(2,t.zoom)),(!c.getCenter()||c.getZoom()===void 0)&&c.fit(c.getProjection().getExtent(),{nearest:!0,size:e.getSize()});for(var m=t.layers,E=[],I,A,P,C,N,Z=0,re=m.length;Z<re;++Z){I=m[Z];var H=I.type;if(H=="heatmap"||H=="hillshade")throw new Error(H+" layers are not supported");if(H=="background")Hn(e,I);else{if(C=I.source||co(m,I.ref),C!=P){if(E.length&&(a.push(f(N,E,t,r,e,n)),E=[]),A=t.sources[C],A.type=="vector")N=xa(A,r,n);else if(A.type=="raster"){N=Ho(A,r,n),N.setVisible(I.layout?I.layout.visibility!=="none":!0);var k={};c.on("change:resolution",Lo.bind(this,I,N,c,k)),Lo(I,N,c,k)}else A.type=="geojson"&&(N=Wo(A,r,n));P=C,N&&N.set("mapbox-source",P)}E.push(I.id)}}return a.push(f(N,E,t,r,e,n)),e.set("mapbox-style",t),Promise.all(a)}function g(t,e,r){r===void 0&&(r={});var n;if((typeof t=="string"||t instanceof HTMLElement)&&(t=new Map({target:t})),typeof e=="string"){var a=e.startsWith("data:")?location.href:s(e,r.accessToken);r=vr(a,r),n=new Promise(function(c,m){L(e,r).then(function(E){Oo(E,t,a,r).then(function(){c(t)}).catch(m)}).catch(function(E){m(new Error("Could not load "+e+": "+E.message))})})}else n=new Promise(function(c,m){Oo(e,t,!r.styleUrl||r.styleUrl.startsWith("data:")?location.href:s(r.styleUrl,r.accessToken),r).then(function(){c(t)}).catch(m)});return n}function f(t,e,r,n,a,c){c===void 0&&(c={});for(var m=24,E=0,I=r.layers,A=0,P=I.length;A<P;++A){var C=I[A];e.indexOf(C.id)!==-1&&(m=Math.min("minzoom"in C?C.minzoom:0,m),E=Math.max("maxzoom"in C?C.maxzoom:24,E))}return new Promise(function(N,Z){var re=function(){var H=t.getSource();if(!H||H.getState()==="error"){Z(new Error("Error accessing data for source "+t.get("mapbox-source")));return}if("getTileGrid"in H){var k=H.getTileGrid();if(k){var Pe=k.getMinZoom();(m>0||Pe>0)&&t.setMaxResolution(Math.min(l[m],k.getResolution(Pe))+1e-9),E<24&&t.setMinResolution(l[E]+1e-9)}}H instanceof VectorSource||H instanceof VectorTileSource?xr(t,r,e,Object.assign({styleUrl:n},c)).then(function(){t.setVisible(!0),N()}).catch(Z):N()};t.set("mapbox-layers",e),a.getLayers().getArray().indexOf(t)===-1&&a.addLayer(t),t.getSource()?re():t.once("change:source",re)})}function u(t,e){for(var r=t.getLayers().getArray(),n=0,a=r.length;n<a;++n){var c=r[n].get("mapbox-layers");if(c&&c.indexOf(e)!==-1)return r[n]}}function p(t,e){for(var r=[],n=t.getAllLayers(),a=0,c=n.length;a<c;++a)n[a].get("mapbox-source")===e&&r.push(n[a]);return r}function h(t,e){for(var r=t.getLayers().getArray(),n=0,a=r.length;n<a;++n){var c=r[n].getSource();if(r[n].get("mapbox-source")===e)return c}}function S(t,e,r){for(var n=("getLayers"in t)?p(t,e.source):[t],a=0,c=n.length;a<c;++a){var m=n[a].get("mapbox-featurestate");if(m)r?m[e.id]=r:delete m[e.id],n[a].changed();else throw new Error('Map or layer for source "'+e.source+'" not found.')}}function b(t,e){for(var r=("getLayers"in t)?p(t,e.source):[t],n=0,a=r.length;n<a;++n){var c=r[n].get("mapbox-featurestate");if(c&&c[e.id])return c[e.id]}return null}var O=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D=function(t){O(e,t);function e(r){var n=t.call(this,Q.Z.ERROR)||this;return n.error=r,n}return e}(ge.ZP),J=function(t){O(e,t);function e(r){var n=this,a="declutter"in r?r.declutter:!0,c=new st.default({state:"loading",format:new xe.Z});n=t.call(this,{source:c,background:r.background,declutter:a,className:r.className,opacity:r.opacity,visible:r.visible,zIndex:r.zIndex,minResolution:r.minResolution,maxResolution:r.maxResolution,minZoom:r.minZoom,maxZoom:r.maxZoom,renderOrder:r.renderOrder,renderBuffer:r.renderBuffer,renderMode:r.renderMode,map:r.map,updateWhileAnimating:r.updateWhileAnimating,updateWhileInteracting:r.updateWhileInteracting,preload:r.preload,useInterimTilesOnError:r.useInterimTilesOnError,properties:r.properties})||this,r.accessToken&&(n.accessToken=r.accessToken);var m=r.styleUrl;return xr(n,m,r.layers||r.source,{accessToken:n.accessToken}).then(function(){c.setState("ready")}).catch(function(E){n.dispatchEvent(new D(E));var I=n.getSource();I.setState("error")}),n.getBackground()===void 0&&Ea(n,r.styleUrl,{accessToken:n.accessToken}),n}return e}(De.default),oe=J,qe=T(13927),$e=T(43092),pt=T(3111),Ft=T(19235),ot=T(77022),tr=T(87710),Cr=T(79204),Vr=T(7244),Xt=T(73226),qt=T(45059),Mt=T(76094),Qt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lt=function(t){Qt(e,t);function e(r){var n=t.call(this,r)||this;return n.vectorRenderer_=new Ft.Z(r),n.layerImageRatio_=r.getImageRatio(),n.coordinateToVectorPixelTransform_=(0,Xt.Ue)(),n.renderedPixelToCoordinateTransform_=null,n}return e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(r){if(!this.vectorRenderer_)return new Promise(function(a){return a([])});var n=(0,Xt.nn)(this.coordinateToVectorPixelTransform_,(0,Xt.nn)(this.renderedPixelToCoordinateTransform_,r.slice()));return this.vectorRenderer_.getFeatures(n)},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(r){var n=r.pixelRatio,a=r.viewState,c=a.resolution,m=r.viewHints,E=this.vectorRenderer_,I=r.extent;this.layerImageRatio_!==1&&(I=I.slice(0),(0,Mt.scaleFromCenter)(I,this.layerImageRatio_));var A=(0,Mt.getWidth)(I)/c,P=(0,Mt.getHeight)(I)/c;if(!m[Vr.Z.ANIMATING]&&!m[Vr.Z.INTERACTING]&&!(0,Mt.isEmpty)(I)){E.useContainer(null,null);var C=E.context,N=r.layerStatesArray[r.layerIndex];C.globalAlpha=N.opacity;var Z=(0,qt.f0)({},N,{opacity:1}),re=(0,qt.f0)({},r,{declutterTree:new Cr(9),extent:I,size:[A,P],viewState:(0,qt.f0)({},r.viewState,{rotation:0}),layerStatesArray:[Z],layerIndex:0}),H=!0,k=new ot.Z(I,c,n,C.canvas,function(Pe){E.prepareFrame(re)&&E.replayGroupChanged&&(E.clipping=!1,E.renderFrame(re,null)&&(E.renderDeclutter(re),H=!1),Pe())});k.addEventListener(Q.Z.CHANGE,function(){if(k.getState()===tr.Z.LOADED){this.image_=H?null:k;var Pe=k.getResolution(),Se=k.getPixelRatio(),Re=Pe*n/Se;this.renderedResolution=Re,this.coordinateToVectorPixelTransform_=(0,Xt.qC)(this.coordinateToVectorPixelTransform_,A/2,P/2,1/Re,-1/Re,0,-a.center[0],-a.center[1])}}.bind(this)),k.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=r.pixelToCoordinateTransform.slice()),!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.renderDeclutter=function(){},e.prototype.forEachFeatureAtCoordinate=function(r,n,a,c,m){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(r,n,a,c,m):t.prototype.forEachFeatureAtCoordinate.call(this,r,n,a,c,m)},e}(pt.Z),rn=Lt,yr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),po=function(t){yr(e,t);function e(r){var n=this,a=r||{},c=(0,qt.f0)({},a);return delete c.imageRatio,n=t.call(this,c)||this,n.imageRatio_=a.imageRatio!==void 0?a.imageRatio:1,n}return e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new rn(this)},e}($e.Z),Co=po,Jo=T(11105),Mo=function(){function t(e,r){this.name=e,this.data=r,this.texture_=null}return t.prototype.getTexture=function(e){if(!this.texture_){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=r}return this.texture_},t}(),ho=Mo,qo=T(90243),nu=T(19240),Sa=T(63483),iu=T(29672),au=T(19964),As=T(73543),ou=T(67044),Ps=T(13584),Do=T(42254),Qo=T(85606),su=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ls(t,e,r){var n=r?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function uu(t,e,r,n){Ls(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}function Os(t,e,r,n,a,c){var m=t.getGL(),E,I;if(r instanceof Float32Array){E=m.FLOAT,t.getExtension("OES_texture_float");var A=t.getExtension("OES_texture_float_linear");I=A!==null}else E=m.UNSIGNED_BYTE,I=!0;Ls(m,e,c&&I);var P=r.byteLength/n[1],C=1;P%8===0?C=8:P%4===0?C=4:P%2===0&&(C=2);var N;switch(a){case 1:{N=m.LUMINANCE;break}case 2:{N=m.LUMINANCE_ALPHA;break}case 3:{N=m.RGB;break}case 4:{N=m.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(a))}var Z=m.getParameter(m.UNPACK_ALIGNMENT);m.pixelStorei(m.UNPACK_ALIGNMENT,C),m.texImage2D(m.TEXTURE_2D,0,N,n[0],n[1],0,N,E,r),m.pixelStorei(m.UNPACK_ALIGNMENT,Z)}var wa=null;function lu(){var t=document.createElement("canvas");t.width=1,t.height=1,wa=t.getContext("2d")}var fu=function(t){su(e,t);function e(r){var n=t.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=(0,Qo.Pq)(r.grid.getTileSize(r.tile.tileCoord[0])),n.gutter_=r.gutter||0,n.bandCount=NaN,n.helper_=r.helper;var a=new Ps.ZP(Do.qO,Do.MB);return a.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(a),n.coords=a,n.setTile(r.tile),n}return e.prototype.setTile=function(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(Q.Z.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===Sa.Z.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof As.Z){var n=r.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}r.addEventListener(Q.Z.CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var r=this.helper_,n=r.getGL(),a=this.tile;if(a instanceof As.Z||a instanceof ou.Z){var c=n.createTexture();this.textures.push(c),this.bandCount=4,uu(n,c,a.getImage(),a.interpolate);return}var m=a.getSize(),E=[m[0]+2*this.gutter_,m[1]+2*this.gutter_],I=a.getData(),A=I instanceof Float32Array,P=E[0]*E[1],C=A?Float32Array:Uint8Array,N=C.BYTES_PER_ELEMENT,Z=I.byteLength/E[1];this.bandCount=Math.floor(Z/N/E[0]);var re=Math.ceil(this.bandCount/4);if(re===1){var c=n.createTexture();this.textures.push(c),Os(r,c,I,E,this.bandCount,a.interpolate);return}for(var H=new Array(re),k=0;k<re;++k){var c=n.createTexture();this.textures.push(c);var Pe=k<re-1?4:this.bandCount%4;H[k]=new C(P*Pe)}for(var Se=0,Re=0,Le=E[0]*this.bandCount,Ee=0;Ee<E[1];++Ee){for(var we=0;we<Le;++we){var We=I[Re+we],et=Math.floor(Se/this.bandCount),nt=we%this.bandCount,k=Math.floor(nt/4),ht=H[k],Pe=ht.length/P,Ht=nt%4;ht[et*Pe+Ht]=We,++Se}Re+=Z/N}for(var k=0;k<re;++k){var c=this.textures[k],ht=H[k],Pe=ht.length/P;Os(r,c,ht,E,Pe,a.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===Sa.Z.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(Q.Z.CHANGE))},e.prototype.disposeInternal=function(){var r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n]);this.tile.removeEventListener(Q.Z.CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(r,n){if(!this.loaded)return null;var a=this.renderSize_[0],c=this.renderSize_[1],m=this.gutter_;if(this.tile instanceof iu.Z){var E=this.tile.getSize(),I=E[0],A=E[1],P=I+2*m,C=A+2*m,N=m+Math.floor(I*(r/a)),Z=m+Math.floor(A*(n/c)),re=this.tile.getData();if(re instanceof DataView){var H=re.byteLength/(P*C),k=H*(Z*P+N),Pe=re.buffer.slice(k,k+H);return new DataView(Pe)}var Se=this.bandCount*(Z*P+N);return re.slice(Se,Se+this.bandCount)}wa||lu(),wa.clearRect(0,0,1,1);var Re=this.tile.getImage(),Le=Re.width,Ee=Re.height,we=Le-2*m,We=Ee-2*m,et=m+Math.floor(we*(r/a)),nt=m+Math.floor(We*(n/c)),ht;try{wa.drawImage(Re,et,nt,1,1,0,0,1,1),ht=wa.getImageData(0,0,1,1).data}catch{return wa=null,null}return ht},e}(au.Z),cu=fu,pu=T(70401),hu=T(63011),Cs=T(17860),vo=T(2692),Ms=T(95232),du=T(55631),vu=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qe={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},No={TEXTURE_COORD:"a_textureCoord"},yu=[{name:No.TEXTURE_COORD,size:2,type:hu.GC.FLOAT}],mu={};function gu(t){return 2*(1-1/(t+1))-1}function Ds(t,e,r){r in t||(t[r]=[]),t[r].push(e)}function $o(t,e){var r=t.layerStatesArray[t.layerIndex];r.extent&&(e=(0,Mt.getIntersection)(e,(0,gt.fromUserExtent)(r.extent,t.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var a=n.getTileGridForProjection(t.viewState.projection).getExtent();a&&(e=(0,Mt.getIntersection)(e,a))}return e}function es(t,e){return"".concat(t.getKey(),",").concat((0,vo.km)(e))}var Eu=function(t){vu(e,t);function e(r,n){var a=t.call(this,r,{uniforms:n.uniforms})||this;a.renderComplete=!1,a.tileTransform_=(0,Xt.Ue)(),a.tempMat4_=(0,Cs.U)(),a.tempTileRange_=new nu.Z(0,0,0,0),a.tempTileCoord_=(0,vo.T9)(0,0,0),a.tempSize_=[0,0],a.program_,a.vertexShader_=n.vertexShader,a.fragmentShader_=n.fragmentShader,a.indices_=new Ps.ZP(Do.cX,Do.MB),a.indices_.fromArray([0,1,3,1,2,3]);var c=n.cacheSize!==void 0?n.cacheSize:512;return a.tileTextureCache_=new qo.Z(c),a.paletteTextures_=n.paletteTextures||[],a.frameState_=null,a}return e.prototype.reset=function(r){t.prototype.reset.call(this,{uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(r){var n=this.getLayer(),a=r.getState(),c=n.getUseInterimTilesOnError();return a==Sa.Z.LOADED||a==Sa.Z.EMPTY||a==Sa.Z.ERROR&&!c},e.prototype.prepareFrameInternal=function(r){var n=this.getLayer(),a=n.getRenderSource();return!a||(0,Mt.isEmpty)($o(r,r.extent))?!1:a.getState()==="ready"},e.prototype.enqueueTiles=function(r,n,a,c){var m=r.viewState,E=this.getLayer(),I=E.getRenderSource(),A=I.getTileGridForProjection(m.projection),P=I.getGutterForProjection(m.projection),C=(0,Ms.sq)(I);C in r.wantedTiles||(r.wantedTiles[C]={});for(var N=r.wantedTiles[C],Z=this.tileTextureCache_,re=Math.max(a-E.getPreload(),A.getMinZoom(),E.getMinZoom()),H=a;H>=re;--H)for(var k=A.getTileRangeForExtentAndZ(n,H,this.tempTileRange_),Pe=A.getResolution(H),Se=k.minX;Se<=k.maxX;++Se)for(var Re=k.minY;Re<=k.maxY;++Re){var Le=(0,vo.T9)(H,Se,Re,this.tempTileCoord_),Ee=es(I,Le),we=void 0,We=void 0;if(Z.containsKey(Ee)&&(we=Z.get(Ee),We=we.tile),!we||we.tile.key!==I.getKey())if(We=I.getTile(H,Se,Re,r.pixelRatio,m.projection),!we)we=new cu({tile:We,grid:A,helper:this.helper,gutter:P}),Z.set(Ee,we);else if(this.isDrawableTile_(We))we.setTile(We);else{var et=We.getInterimTile();we.setTile(et)}Ds(c,we,H);var nt=We.getKey();N[nt]=!0,We.getState()===Sa.Z.IDLE&&(r.tileQueue.isKeyQueued(nt)||r.tileQueue.enqueue([We,C,A.getTileCoordCenter(Le),Pe]))}},e.prototype.renderFrame=function(r){this.frameState_=r,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,r);var a=r.viewState,c=this.getLayer(),m=c.getRenderSource(),E=m.getTileGridForProjection(a.projection),I=m.getGutterForProjection(a.projection),A=$o(r,r.extent),P=E.getZForResolution(a.resolution,m.zDirection),C={};if(r.nextExtent){var N=E.getZForResolution(a.nextResolution,m.zDirection),Z=$o(r,r.nextExtent);this.enqueueTiles(r,Z,N,C)}this.enqueueTiles(r,A,P,C);for(var re={},H=(0,Ms.sq)(this),k=r.time,Pe=!1,Se=C[P],Re=0,Le=Se.length;Re<Le;++Re){var Ee=Se[Re],we=Ee.tile,We=we.tileCoord;if(Ee.loaded){var et=we.getAlpha(H,k);if(et===1){we.endTransition(H);continue}Pe=!0;var nt=(0,vo.km)(We);re[nt]=et}this.renderComplete=!1;var ht=this.findAltTiles_(E,We,P+1,C);if(!ht)for(var Ht=E.getMinZoom(),nn=P-1;nn>=Ht;--nn){var Bt=this.findAltTiles_(E,We,nn,C);if(Bt)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(r,!Pe);for(var Yr=Object.keys(C).map(Number).sort(du.kK),Pn=a.center[0],Ln=a.center[1],Jn=0,yo=Yr.length;Jn<yo;++Jn)for(var be=Yr[Jn],$t=E.getResolution(be),Ae=(0,Qo.Pq)(E.getTileSize(be),this.tempSize_),Ge=E.getOrigin(be),Nt=Ae[0]+2*I,Xi=Ae[1]+2*I,mo=Nt/Xi,os=(Pn-Ge[0])/(Ae[0]*$t),Zo=(Ge[1]-Ln)/(Ae[1]*$t),ye=a.resolution/$t,ss=gu(be),yi=C[be],Re=0,Le=yi.length;Re<Le;++Re){var Ee=yi[Re];if(Ee.loaded){var we=Ee.tile,We=we.tileCoord,nt=(0,vo.km)(We),On=We[1],go=We[2];(0,Xt.mc)(this.tileTransform_),(0,Xt.bA)(this.tileTransform_,2/(r.size[0]*ye/Nt),-2/(r.size[1]*ye/Nt)),(0,Xt.U1)(this.tileTransform_,a.rotation),(0,Xt.bA)(this.tileTransform_,1,1/mo),(0,Xt.Iu)(this.tileTransform_,(Ae[0]*(On-os)-I)/Nt,(Ae[1]*(go-Zo)-I)/Xi),this.helper.setUniformMatrixValue(Qe.TILE_TRANSFORM,(0,Cs.u)(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(Ee.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(yu);for(var Wt=0;Wt<Ee.textures.length;){var pn="TEXTURE"+Wt,Ia="".concat(Qe.TILE_TEXTURE_ARRAY,"[").concat(Wt,"]");n.activeTexture(n[pn]),n.bindTexture(n.TEXTURE_2D,Ee.textures[Wt]),n.uniform1i(this.helper.getUniformLocation(Ia),Wt),++Wt}for(var Mr=0;Mr<this.paletteTextures_.length;++Mr){var an=this.paletteTextures_[Mr];n.activeTexture(n["TEXTURE"+Wt]);var de=an.getTexture(n);n.bindTexture(n.TEXTURE_2D,de),n.uniform1i(this.helper.getUniformLocation(an.name),Wt),++Wt}var et=nt in re?re[nt]:1;et<1&&(r.animate=!0),this.helper.setUniformFloatValue(Qe.TRANSITION_ALPHA,et),this.helper.setUniformFloatValue(Qe.DEPTH,ss),this.helper.setUniformFloatValue(Qe.TEXTURE_PIXEL_WIDTH,Nt),this.helper.setUniformFloatValue(Qe.TEXTURE_PIXEL_HEIGHT,Xi),this.helper.setUniformFloatValue(Qe.TEXTURE_RESOLUTION,$t),this.helper.setUniformFloatValue(Qe.TEXTURE_ORIGIN_X,Ge[0]+On*Ae[0]*$t-I*$t),this.helper.setUniformFloatValue(Qe.TEXTURE_ORIGIN_Y,Ge[1]-go*Ae[1]*$t+I*$t);var hn=A;I>0&&(hn=E.getTileCoordExtent(We),(0,Mt.getIntersection)(hn,A,hn)),this.helper.setUniformFloatVec4(Qe.RENDER_EXTENT,hn),this.helper.setUniformFloatValue(Qe.RESOLUTION,a.resolution),this.helper.setUniformFloatValue(Qe.ZOOM,a.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Ra=this.helper.getCanvas(),_a=this.tileTextureCache_;_a.canExpireCache();){var Ee=_a.pop();Ee.dispose()}var Uo=function(Eo,Cn){m.expireCache(Cn.viewState.projection,mu)};return r.postRenderFunctions.push(Uo),this.postRender(n,r),Ra},e.prototype.getData=function(r){var n=this.helper.getGL();if(!n)return null;var a=this.frameState_;if(!a)return null;var c=this.getLayer(),m=(0,Xt.nn)(a.pixelToCoordinateTransform,r.slice()),E=a.viewState,I=c.getExtent();if(I&&!(0,Mt.containsCoordinate)((0,gt.fromUserExtent)(I,E.projection),m))return null;var A=c.getSources((0,Mt.boundingExtent)([m]),E.resolution),P,C,N;for(P=A.length-1;P>=0;--P)if(C=A[P],C.getState()==="ready"){if(N=C.getTileGridForProjection(E.projection),C.getWrapX())break;var Z=N.getExtent();if(!Z||(0,Mt.containsCoordinate)(Z,m))break}if(P<0)return null;for(var re=this.tileTextureCache_,H=N.getZForResolution(E.resolution);H>=N.getMinZoom();--H){var k=N.getTileCoordForCoordAndZ(m,H),Pe=es(C,k);if(re.containsKey(Pe)){var Se=re.get(Pe);if(Se.loaded){var Re=N.getOrigin(H),Le=(0,Qo.Pq)(N.getTileSize(H)),Ee=N.getResolution(H),we=(m[0]-Re[0])/Ee-k[1]*Le[0],We=(Re[1]-m[1])/Ee-k[2]*Le[1];return Se.getPixelData(we,We)}}}return null},e.prototype.findAltTiles_=function(r,n,a,c){var m=r.getTileRangeForTileCoordAndZ(n,a,this.tempTileRange_);if(!m)return!1;for(var E=!0,I=this.tileTextureCache_,A=this.getLayer().getRenderSource(),P=m.minX;P<=m.maxX;++P)for(var C=m.minY;C<=m.maxY;++C){var N=es(A,[a,P,C]),Z=!1;if(I.containsKey(N)){var re=I.get(N);re.loaded&&(Ds(c,re,a),Z=!0)}Z||(E=!1)}return E},e.prototype.removeHelper=function(){if(this.helper){var r=this.tileTextureCache_;r.forEach(function(n){return n.dispose()}),r.clear()}t.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var r=this.helper;if(r){var n=r.getGL();n.deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)}t.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},e}(pu.ZP),Tu=Eu,ts=T(99729),xu=T(77767),se={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},rt={};function An(t){if(typeof t=="number")return se.NUMBER;if(typeof t=="boolean")return se.BOOLEAN;if(typeof t=="string")return(0,ts.e1)(t)?se.COLOR|se.STRING:se.STRING;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var e=t,r=e.every(function(a){return typeof a=="number"});if(r)return e.length===3||e.length===4?se.COLOR|se.NUMBER_ARRAY:se.NUMBER_ARRAY;if(typeof e[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var n=rt[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.getReturnType(e.slice(1))}function Su(t){return(0,xu.k3)(t)%1===0}function Fo(t){var e=t.toString();return e.indexOf(".")===-1?e+".0":e}function Ns(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(Fo).join(", "),")")}function wu(t){var e=(0,ts._2)(t).slice();return e.length<4&&e.push(1),Ns(e.map(function(r,n){return n<3?r/255:r}))}function Go(t,e){return t.stringLiteralsMap[e]===void 0&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function Iu(t,e){return Fo(Go(t,e))}function ce(t,e,r){if(Array.isArray(e)&&typeof e[0]=="string"){var n=rt[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.toGlsl(t,e.slice(1),r)}var a=An(e);if((a&se.NUMBER)>0)return Fo(e);if((a&se.BOOLEAN)>0)return e.toString();if((a&se.STRING)>0&&(r===void 0||r==se.STRING))return Iu(t,e.toString());if((a&se.COLOR)>0&&(r===void 0||r==se.COLOR))return wu(e);if((a&se.NUMBER_ARRAY)>0)return Ns(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(r,")"))}function Fs(t){if(!(An(t)&se.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function Kt(t){for(var e=0;e<t.length;e++)Fs(t[e])}function Gs(t){if(!(An(t)&se.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function rs(t){if(!(An(t)&se.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function Dt(t,e){if(t.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function vi(t,e){if(t.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function zo(t,e){if(t.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function zs(t){if(t.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function Ru(t){if(t.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}function ns(t,e){if(!Su(e))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}rt.get={getReturnType:function(t){return se.ANY},toGlsl:function(t,e){Dt(e,1),Gs(e[0]);var r=e[0].toString();t.attributes.indexOf(r)===-1&&t.attributes.push(r);var n=t.inFragmentShader?"v_":"a_";return n+r}};function is(t){return"u_var_"+t}rt.var={getReturnType:function(t){return se.ANY},toGlsl:function(t,e){Dt(e,1),Gs(e[0]);var r=e[0].toString();return t.variables.indexOf(r)===-1&&t.variables.push(r),is(r)}};var Zs="u_paletteTextures";rt.palette={getReturnType:function(t){return se.COLOR},toGlsl:function(t,e){Dt(e,2),Fs(e[0]);var r=ce(t,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var a=n.length,c=new Uint8Array(a*4),m=0;m<a;m++){var E=n[m],I=void 0;if(typeof E=="string")I=(0,ts.mL)(E);else{if(!Array.isArray(E))throw new Error("The second argument of palette must be an array of strings or colors");var A=E.length;if(A===4)I=E;else{if(A!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(A));I=[E[0],E[1],E[2],1]}}var P=m*4;c[P]=I[0],c[P+1]=I[1],c[P+2]=I[2],c[P+3]=I[3]*255}t.paletteTextures||(t.paletteTextures=[]);var C="".concat(Zs,"[").concat(t.paletteTextures.length,"]"),N=new ho(C,c);return t.paletteTextures.push(N),"texture2D(".concat(C,", vec2((").concat(r," + 0.5) / ").concat(a,".0, 0.5))")}};var as="getBandValue";rt.band={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){vi(e,1),zo(e,3);var r=e[0];if(!(as in t.functions)){for(var n="",a=t.bandCount||1,c=0;c<a;c++){var m=Math.floor(c/4),E=c%4;E===a-1&&E===1&&(E=3);var I="".concat(Qe.TILE_TEXTURE_ARRAY,"[").concat(m,"]");n+=`
          if (band == `.concat(c+1,`.0) {
            return texture2D(`).concat(I,", v_textureCoord + vec2(dx, dy))[").concat(E,`];
          }
        `)}t.functions[as]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(Qe.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(Qe.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var A=ce(t,r),P=ce(t,e[1]||0),C=ce(t,e[2]||0);return"".concat(as,"(").concat(A,", ").concat(P,", ").concat(C,")")}},rt.time={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,0),"u_time"}},rt.zoom={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,0),"u_zoom"}},rt.resolution={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,0),"u_resolution"}},rt["*"]={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,2),Kt(e),"(".concat(ce(t,e[0])," * ").concat(ce(t,e[1]),")")}},rt["/"]={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,2),Kt(e),"(".concat(ce(t,e[0])," / ").concat(ce(t,e[1]),")")}},rt["+"]={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,2),Kt(e),"(".concat(ce(t,e[0])," + ").concat(ce(t,e[1]),")")}},rt["-"]={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,2),Kt(e),"(".concat(ce(t,e[0])," - ").concat(ce(t,e[1]),")")}},rt.clamp={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){Dt(e,3),Kt(e);var r=ce(t,e[1]),n=ce(t,e[2]);return"clamp(".concat(ce(t,e[0]),", ").concat(r,", ").concat(n,")")}},rt["%"]={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,2),Kt(e),"mod(".concat(ce(t,e[0]),", ").concat(ce(t,e[1]),")")}},rt["^"]={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,2),Kt(e),"pow(".concat(ce(t,e[0]),", ").concat(ce(t,e[1]),")")}},rt.abs={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,1),Kt(e),"abs(".concat(ce(t,e[0]),")")}},rt.floor={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,1),Kt(e),"floor(".concat(ce(t,e[0]),")")}},rt.round={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,1),Kt(e),"floor(".concat(ce(t,e[0])," + 0.5)")}},rt.ceil={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,1),Kt(e),"ceil(".concat(ce(t,e[0]),")")}},rt.sin={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,1),Kt(e),"sin(".concat(ce(t,e[0]),")")}},rt.cos={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return Dt(e,1),Kt(e),"cos(".concat(ce(t,e[0]),")")}},rt.atan={getReturnType:function(t){return se.NUMBER},toGlsl:function(t,e){return vi(e,1),zo(e,2),Kt(e),e.length===2?"atan(".concat(ce(t,e[0]),", ").concat(ce(t,e[1]),")"):"atan(".concat(ce(t,e[0]),")")}},rt[">"]={getReturnType:function(t){return se.BOOLEAN},toGlsl:function(t,e){return Dt(e,2),Kt(e),"(".concat(ce(t,e[0])," > ").concat(ce(t,e[1]),")")}},rt[">="]={getReturnType:function(t){return se.BOOLEAN},toGlsl:function(t,e){return Dt(e,2),Kt(e),"(".concat(ce(t,e[0])," >= ").concat(ce(t,e[1]),")")}},rt["<"]={getReturnType:function(t){return se.BOOLEAN},toGlsl:function(t,e){return Dt(e,2),Kt(e),"(".concat(ce(t,e[0])," < ").concat(ce(t,e[1]),")")}},rt["<="]={getReturnType:function(t){return se.BOOLEAN},toGlsl:function(t,e){return Dt(e,2),Kt(e),"(".concat(ce(t,e[0])," <= ").concat(ce(t,e[1]),")")}};function Us(t){return{getReturnType:function(e){return se.BOOLEAN},toGlsl:function(e,r){Dt(r,2);for(var n=se.ANY,a=0;a<r.length;a++)n&=An(r[a]);if(n===se.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~se.COLOR,"(".concat(ce(e,r[0],n)," ").concat(t," ").concat(ce(e,r[1],n),")")}}}rt["=="]=Us("=="),rt["!="]=Us("!="),rt["!"]={getReturnType:function(t){return se.BOOLEAN},toGlsl:function(t,e){return Dt(e,1),rs(e[0]),"(!".concat(ce(t,e[0]),")")}};function Bs(t){return{getReturnType:function(e){return se.BOOLEAN},toGlsl:function(e,r){vi(r,2);for(var n=0;n<r.length;n++)rs(r[n]);var a="";return a=r.map(function(c){return ce(e,c)}).join(" ".concat(t," ")),a="(".concat(a,")"),a}}}rt.all=Bs("&&"),rt.any=Bs("||"),rt.between={getReturnType:function(t){return se.BOOLEAN},toGlsl:function(t,e){Dt(e,3),Kt(e);var r=ce(t,e[1]),n=ce(t,e[2]),a=ce(t,e[0]);return"(".concat(a," >= ").concat(r," && ").concat(a," <= ").concat(n,")")}},rt.array={getReturnType:function(t){return se.NUMBER_ARRAY},toGlsl:function(t,e){vi(e,2),zo(e,4),Kt(e);var r=e.map(function(n){return ce(t,n,se.NUMBER)});return"vec".concat(e.length,"(").concat(r.join(", "),")")}},rt.color={getReturnType:function(t){return se.COLOR},toGlsl:function(t,e){vi(e,3),zo(e,4),Kt(e);var r=e;e.length===3&&r.push(1);var n=e.map(function(a,c){return ce(t,a,se.NUMBER)+(c<3?" / 255.0":"")});return"vec".concat(e.length,"(").concat(n.join(", "),")")}},rt.interpolate={getReturnType:function(t){for(var e=se.COLOR|se.NUMBER,r=3;r<t.length;r+=2)e=e&An(t[r]);return e},toGlsl:function(t,e,r){zs(e),vi(e,6);var n=e[0],a;switch(n[0]){case"linear":a=1;break;case"exponential":a=n[1];break;default:a=null}if(!a)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(n)));var c=r!==void 0?r:se.ANY,m=rt.interpolate.getReturnType(e)&c;ns(e,m);for(var E=ce(t,e[1]),I=Fo(a),A="",P=2;P<e.length-2;P+=2){var C=ce(t,e[P]),N=A||ce(t,e[P+1],m),Z=ce(t,e[P+2]),re=ce(t,e[P+3],m);A="mix(".concat(N,", ").concat(re,", pow(clamp((").concat(E," - ").concat(C,") / (").concat(Z," - ").concat(C,"), 0.0, 1.0), ").concat(I,"))")}return A}},rt.match={getReturnType:function(t){for(var e=se.ANY,r=2;r<t.length;r+=2)e=e&An(t[r]);return e=e&An(t[t.length-1]),e},toGlsl:function(t,e,r){zs(e),vi(e,4);var n=r!==void 0?r:se.ANY,a=rt.match.getReturnType(e)&n;ns(e,a);for(var c=ce(t,e[0]),m=ce(t,e[e.length-1],a),E=null,I=e.length-3;I>=1;I-=2){var A=ce(t,e[I]),P=ce(t,e[I+1],a);E="(".concat(c," == ").concat(A," ? ").concat(P," : ").concat(E||m,")")}return E}},rt.case={getReturnType:function(t){for(var e=se.ANY,r=1;r<t.length;r+=2)e=e&An(t[r]);return e=e&An(t[t.length-1]),e},toGlsl:function(t,e,r){Ru(e),vi(e,3);var n=r!==void 0?r:se.ANY,a=rt.case.getReturnType(e)&n;ns(e,a);for(var c=0;c<e.length-1;c+=2)rs(e[c]);for(var m=ce(t,e[e.length-1],a),E=null,c=e.length-3;c>=0;c-=2){var I=ce(t,e[c]),A=ce(t,e[c+1],a);E="(".concat(I," ? ").concat(A," : ").concat(E||m,")")}return E}};var _u=function(){function t(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return t.prototype.addUniform=function(e){return this.uniforms.push(e),this},t.prototype.addAttribute=function(e){return this.attributes.push(e),this},t.prototype.addVarying=function(e,r,n){return this.varyings.push({name:e,type:r,expression:n}),this},t.prototype.setSizeExpression=function(e){return this.sizeExpression=e,this},t.prototype.setRotationExpression=function(e){return this.rotationExpression=e,this},t.prototype.setSymbolOffsetExpression=function(e){return this.offsetExpression=e,this},t.prototype.setColorExpression=function(e){return this.colorExpression=e,this},t.prototype.setTextureCoordinateExpression=function(e){return this.texCoordExpression=e,this},t.prototype.setFragmentDiscardExpression=function(e){return this.discardExpression=e,this},t.prototype.setSymbolRotateWithView=function(e){return this.rotateWithView=e,this},t.prototype.getSizeExpression=function(){return this.sizeExpression},t.prototype.getOffsetExpression=function(){return this.offsetExpression},t.prototype.getColorExpression=function(){return this.colorExpression},t.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},t.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},t.prototype.getSymbolVertexShader=function(e){var r=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",n=this.attributes,a=this.varyings;return e&&(n=n.concat("vec4 a_hitColor"),a=a.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),`precision mediump float;
uniform mat4 u_projectionMatrix;
uniform mat4 u_offsetScaleMatrix;
uniform mat4 u_offsetRotateMatrix;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
`.concat(this.uniforms.map(function(c){return"uniform "+c+";"}).join(`
`),`
attribute vec2 a_position;
attribute float a_index;
`).concat(n.map(function(c){return"attribute "+c+";"}).join(`
`),`
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
`).concat(a.map(function(c){return"varying "+c.type+" "+c.name+";"}).join(`
`),`
void main(void) {
  mat4 offsetMatrix = `).concat(r,`;
  vec2 halfSize = `).concat(this.sizeExpression,` * 0.5;
  vec2 offset = `).concat(this.offsetExpression,`;
  float angle = `).concat(this.rotationExpression,`;
  float offsetX;
  float offsetY;
  if (a_index == 0.0) {
    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);
    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);
  } else if (a_index == 1.0) {
    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);
    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);
  } else if (a_index == 2.0) {
    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);
    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);
  } else {
    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);
    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);
  }
  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);
  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;
  vec4 texCoord = `).concat(this.texCoordExpression,`;
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;
  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;
  v_quadCoord = vec2(u, v);
`).concat(a.map(function(c){return"  "+c.name+" = "+c.expression+";"}).join(`
`),`
}`)},t.prototype.getSymbolFragmentShader=function(e){var r=e?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",n=this.varyings;return e&&(n=n.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),`precision mediump float;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
`.concat(this.uniforms.map(function(a){return"uniform "+a+";"}).join(`
`),`
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
`).concat(n.map(function(a){return"varying "+a.type+" "+a.name+";"}).join(`
`),`
void main(void) {
  if (`).concat(this.discardExpression,`) { discard; }
  gl_FragColor = `).concat(this.colorExpression,`;
  gl_FragColor.rgb *= gl_FragColor.a;
`).concat(r,`
}`)},t}();function bu(t){var e=t.symbol,r=e.size!==void 0?e.size:1,n=e.color||"white",a=e.textureCoord||[0,0,1,1],c=e.offset||[0,0],m=e.opacity!==void 0?e.opacity:1,E=e.rotation!==void 0?e.rotation:0,I={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{}},A=ce(I,r,se.NUMBER_ARRAY|se.NUMBER),P=ce(I,c,se.NUMBER_ARRAY),C=ce(I,a,se.NUMBER_ARRAY),N=ce(I,E,se.NUMBER),Z={inFragmentShader:!0,variables:I.variables,attributes:[],stringLiteralsMap:I.stringLiteralsMap,functions:{}},re=ce(Z,n,se.COLOR),H=ce(Z,m,se.NUMBER),k="1.0",Pe="vec2(".concat(ce(Z,r,se.NUMBER_ARRAY|se.NUMBER),").x");switch(e.symbolType){case"square":break;case"image":break;case"circle":k="(1.0-smoothstep(1.-4./".concat(Pe,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");break;case"triangle":var Se="(v_quadCoord*2.-1.)",Re="(atan(".concat(Se,".x,").concat(Se,".y))");k="(1.0-smoothstep(.5-3./".concat(Pe,",.5,cos(floor(.5+").concat(Re,"/2.094395102)*2.094395102-").concat(Re,")*length(").concat(Se,")))");break;default:throw new Error("Unexpected symbol type: "+e.symbolType)}var Le=new _u().setSizeExpression("vec2(".concat(A,")")).setRotationExpression(N).setSymbolOffsetExpression(P).setTextureCoordinateExpression(C).setSymbolRotateWithView(!!e.rotateWithView).setColorExpression("vec4(".concat(re,".rgb, ").concat(re,".a * ").concat(H," * ").concat(k,")"));if(t.filter){var Ee=ce(Z,t.filter,se.BOOLEAN);Le.setFragmentDiscardExpression("!".concat(Ee))}var we={};if(Z.variables.forEach(function(et){var nt=is(et);Le.addUniform("float ".concat(nt)),we[nt]=function(){if(!t.variables||t.variables[et]===void 0)throw new Error("The following variable is missing from the style: ".concat(et));var ht=t.variables[et];return typeof ht=="string"&&(ht=Go(I,ht)),ht!==void 0?ht:-9999999}}),e.symbolType==="image"&&e.src){var We=new Image;We.crossOrigin=e.crossOrigin===void 0?"anonymous":e.crossOrigin,We.src=e.src,Le.addUniform("sampler2D u_texture").setColorExpression(Le.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),we.u_texture=We}return Z.attributes.forEach(function(et){I.attributes.indexOf(et)===-1&&I.attributes.push(et),Le.addVarying("v_".concat(et),"float","a_".concat(et))}),I.attributes.forEach(function(et){Le.addAttribute("float a_".concat(et))}),{builder:Le,attributes:I.attributes.map(function(et){return{name:et,callback:function(nt,ht){var Ht=ht[et];return typeof Ht=="string"&&(Ht=Go(I,Ht)),Ht!==void 0?Ht:-9999999}}}),uniforms:we}}var Au=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pu=function(t){Au(e,t);function e(r){var n=this,a=(0,qt.f0)({},r);return n=t.call(this,a)||this,n.parseResult_=bu(r.style),n.styleVariables_=r.style.variables||{},n.hitDetectionDisabled_=!!r.disableHitDetection,n}return e.prototype.createRenderer=function(){return new Jo.Z(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitVertexShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolFragmentShader(!0),uniforms:this.parseResult_.uniforms,attributes:this.parseResult_.attributes})},e.prototype.updateStyleVariables=function(r){(0,qt.f0)(this.styleVariables_,r),this.changed()},e}(Me.Z),Lu=Pu,Ou=T(15130),Cu=T(94008),Mu=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function ks(t,e){var r=`
    attribute vec2 `.concat(No.TEXTURE_COORD,`;
    uniform mat4 `).concat(Qe.TILE_TRANSFORM,`;
    uniform float `).concat(Qe.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Qe.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Qe.TEXTURE_RESOLUTION,`;
    uniform float `).concat(Qe.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(Qe.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(Qe.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(No.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(Qe.TEXTURE_ORIGIN_X," + ").concat(Qe.TEXTURE_RESOLUTION," * ").concat(Qe.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(Qe.TEXTURE_ORIGIN_Y," - ").concat(Qe.TEXTURE_RESOLUTION," * ").concat(Qe.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(Qe.TILE_TRANSFORM," * vec4(").concat(No.TEXTURE_COORD,", ").concat(Qe.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},a=[];if(t.color!==void 0){var c=ce(n,t.color,se.COLOR);a.push("color = ".concat(c,";"))}if(t.contrast!==void 0){var m=ce(n,t.contrast,se.NUMBER);a.push("color.rgb = clamp((".concat(m," + 1.0) * color.rgb - (").concat(m," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(t.exposure!==void 0){var E=ce(n,t.exposure,se.NUMBER);a.push("color.rgb = clamp((".concat(E," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(t.saturation!==void 0){var I=ce(n,t.saturation,se.NUMBER);a.push(`
      float saturation = `.concat(I,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(t.gamma!==void 0){var A=ce(n,t.gamma,se.NUMBER);a.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(A,"));"))}if(t.brightness!==void 0){var P=ce(n,t.brightness,se.NUMBER);a.push("color.rgb = clamp(color.rgb + ".concat(P,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var C={},N=n.variables.length;if(N>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var Z=function(Re){var Le=n.variables[Re];if(!(Le in t.variables))throw new Error("Missing '".concat(Le,"' in style variables"));var Ee=is(Le);C[Ee]=function(){var we=t.variables[Le];return typeof we=="string"&&(we=Go(n,we)),we!==void 0?we:-9999999}},re=0;re<N;++re)Z(re);var H=Object.keys(C).map(function(Re){return"uniform float ".concat(Re,";")}),k=Math.ceil(e/4);H.push("uniform sampler2D ".concat(Qe.TILE_TEXTURE_ARRAY,"[").concat(k,"];")),n.paletteTextures&&H.push("uniform sampler2D ".concat(Zs,"[").concat(n.paletteTextures.length,"];"));var Pe=Object.keys(n.functions).map(function(Re){return n.functions[Re]}),Se=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(Qe.RENDER_EXTENT,`;
    uniform float `).concat(Qe.TRANSITION_ALPHA,`;
    uniform float `).concat(Qe.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Qe.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Qe.RESOLUTION,`;
    uniform float `).concat(Qe.ZOOM,`;

    `).concat(H.join(`
`),`

    `).concat(Pe.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(Qe.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(Qe.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(Qe.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(Qe.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(Qe.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(a.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(Qe.TRANSITION_ALPHA,`;
    }`);return{vertexShader:r,fragmentShader:Se,uniforms:C,paletteTextures:n.paletteTextures}}var js=function(t){Mu(e,t);function e(r){var n=this,a=r?(0,qt.f0)({},r):{},c=a.style||{};delete a.style;var m=a.cacheSize;return delete a.cacheSize,n=t.call(this,a)||this,n.sources_=a.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=c,n.cacheSize_=m,n.styleVariables_=n.style_.variables||{},n.addChangeListener(Cu.Z.SOURCE,n.handleSourceUpdate_),n}return e.prototype.getSources=function(r,n){var a=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(r,n):this.sources_:a?[a]:[]},e.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},e.prototype.getSourceState=function(){var r=this.getRenderSource();return r?r.getState():"undefined"},e.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},e.prototype.getSourceBandCount_=function(){var r=Number.MAX_SAFE_INTEGER,n=this.getSources([-r,-r,r,r],r);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},e.prototype.createRenderer=function(){var r=ks(this.style_,this.getSourceBandCount_());return new Tu(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})},e.prototype.renderSources=function(r,n){for(var a=this.getRenderer(),c,m=0,E=n.length;m<E;++m)this.renderedSource_=n[m],a.prepareFrame(r)&&(c=a.renderFrame(r));return c},e.prototype.render=function(r,n){var a=this;this.rendered=!0;for(var c=r.viewState,m=this.getSources(r.extent,c.resolution),E=!0,I=function(Z,re){var H=m[Z],k=H.getState();if(k=="loading"){var Pe=function(){H.getState()=="ready"&&(H.removeEventListener("change",Pe),a.changed())};H.addEventListener("change",Pe)}E=E&&k=="ready"},A=0,P=m.length;A<P;++A)I(A,P);var C=this.renderSources(r,m);if(this.getRenderer().renderComplete&&E)return this.renderedResolution_=c.resolution,C;if(this.renderedResolution_>.5*c.resolution){var N=this.getSources(r.extent,this.renderedResolution_).filter(function(Z){return!m.includes(Z)});if(N.length>0)return this.renderSources(r,N)}return C},e.prototype.setStyle=function(r){this.styleVariables_=r.variables||{},this.style_=r;var n=ks(this.style_,this.getSourceBandCount_()),a=this.getRenderer();a.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(r){(0,qt.f0)(this.styleVariables_,r),this.changed()},e}(Ou.Z);js.prototype.dispose;var Du=js},48271:function(Kr,ct,T){"use strict";T.d(ct,{Z:function(){return zr}});var St=T(55825),ae=T(83771),Ne=T(13811),Be=T(68640),Me=T(51154),ge=T(59225),Q=T(13798),xe=T(23230),De=T(82571),st=T(95659),ut=T(72449),d=T(2487),$=T(76094),G=T(45059),R=T(77767),le=T(66884),je=T(90583),me=T(12634),Tt=T(73226),Rt=T(18966);function _r(Xe,Ce){var V=Xe.canvas,z=Ce||{},te=z.pixelRatio||DEVICE_PIXEL_RATIO,X=z.size;X&&(V.width=X[0]*te,V.height=X[1]*te,V.style.width=X[0]+"px",V.style.height=X[1]+"px");var W=[0,0,V.width,V.height],B=scaleTransform(createTransform(),te,te);return new CanvasImmediateRenderer(Xe,te,W,B,0)}function br(Xe){if(!(Xe.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var Ce=Xe.inversePixelTransform[0],V=Xe.frameState,z=(0,Tt.Jp)(Xe.inversePixelTransform.slice(),V.coordinateToPixelTransform),te=(0,Rt.se)(V.viewState.resolution,Ce),X,W=(0,je.getUserProjection)();return W&&(X=(0,je.getTransformFromProjections)(W,V.viewState.projection)),new me.Z(Xe.context,Ce,V.extent,z,V.viewState.rotation,te,X)}function Ar(Xe,Ce){return applyTransform(Xe.inversePixelTransform,Ce.slice(0))}function gt(Xe,Ce,V){for(var z=[],te=Xe(0),X=Xe(1),W=Ce(te),B=Ce(X),j=[X,te],Ve=[B,W],dt=[1,0],tt={},ke=1e5,Fe,lt,at,ze,vt,Ye;--ke>0&&dt.length>0;)at=dt.pop(),te=j.pop(),W=Ve.pop(),Ye=at.toString(),Ye in tt||(z.push(W[0],W[1]),tt[Ye]=!0),ze=dt.pop(),X=j.pop(),B=Ve.pop(),vt=(at+ze)/2,Fe=Xe(vt),lt=Ce(Fe),(0,R.rU)(lt[0],lt[1],W[0],W[1],B[0],B[1])<V?(z.push(B[0],B[1]),Ye=ze.toString(),tt[Ye]=!0):(dt.push(ze,vt,vt,at),Ve.push(B,lt,lt,W),j.push(X,Fe,Fe,te));return z}function Nr(Xe,Ce,V,z,te,X){var W=getProjection("EPSG:4326"),B=Math.cos(toRadians(Ce)),j=Math.sin(toRadians(Ce)),Ve=Math.cos(toRadians(z)),dt=Math.sin(toRadians(z)),tt=Math.cos(toRadians(V-Xe)),ke=Math.sin(toRadians(V-Xe)),Fe=j*dt+B*Ve*tt;return gt(function(lt){if(1<=Fe)return[V,z];var at=lt*Math.acos(Fe),ze=Math.cos(at),vt=Math.sin(at),Ye=ke*Ve,ee=B*dt-j*Ve*tt,ve=Math.atan2(Ye,ee),ue=Math.asin(j*ze+B*vt*Math.cos(ve)),Et=toRadians(Xe)+Math.atan2(Math.sin(ve)*vt*B,ze-j*Math.sin(ue));return[toDegrees(Et),toDegrees(ue)]},getTransform(W,te),X)}function Mn(Xe,Ce,V,z,te){var X=(0,je.get)("EPSG:4326");return gt(function(W){return[Xe,Ce+(V-Ce)*W]},(0,je.getTransform)(X,z),te)}function wr(Xe,Ce,V,z,te){var X=(0,je.get)("EPSG:4326");return gt(function(W){return[Ce+(V-Ce)*W,Xe]},(0,je.getTransform)(X,z),te)}var dn=function(){var Xe=function(Ce,V){return Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,te){z.__proto__=te}||function(z,te){for(var X in te)Object.prototype.hasOwnProperty.call(te,X)&&(z[X]=te[X])},Xe(Ce,V)};return function(Ce,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");Xe(Ce,V);function z(){this.constructor=Ce}Ce.prototype=V===null?Object.create(V):(z.prototype=V.prototype,new z)}}(),Fr=new xe.Z({color:"rgba(0,0,0,0.2)"}),on=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],Gr=function(Xe){dn(Ce,Xe);function Ce(V){var z=this,te=V||{},X=(0,G.f0)({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},te);return delete X.maxLines,delete X.strokeStyle,delete X.targetSize,delete X.showLabels,delete X.lonLabelFormatter,delete X.latLabelFormatter,delete X.lonLabelPosition,delete X.latLabelPosition,delete X.lonLabelStyle,delete X.latLabelStyle,delete X.intervals,z=Xe.call(this,X)||this,z.projection_=null,z.maxLat_=1/0,z.maxLon_=1/0,z.minLat_=-1/0,z.minLon_=-1/0,z.maxX_=1/0,z.maxY_=1/0,z.minX_=-1/0,z.minY_=-1/0,z.targetSize_=te.targetSize!==void 0?te.targetSize:100,z.maxLines_=te.maxLines!==void 0?te.maxLines:100,z.meridians_=[],z.parallels_=[],z.strokeStyle_=te.strokeStyle!==void 0?te.strokeStyle:Fr,z.fromLonLatTransform_=void 0,z.toLonLatTransform_=void 0,z.projectionCenterLonLat_=null,z.bottomLeft_=null,z.bottomRight_=null,z.topLeft_=null,z.topRight_=null,z.meridiansLabels_=null,z.parallelsLabels_=null,te.showLabels&&(z.lonLabelFormatter_=te.lonLabelFormatter==null?le.I8.bind(z,"EW"):te.lonLabelFormatter,z.latLabelFormatter_=te.latLabelFormatter==null?le.I8.bind(z,"NS"):te.latLabelFormatter,z.lonLabelPosition_=te.lonLabelPosition==null?0:te.lonLabelPosition,z.latLabelPosition_=te.latLabelPosition==null?1:te.latLabelPosition,z.lonLabelStyleBase_=new De.ZP({text:te.lonLabelStyle!==void 0?te.lonLabelStyle.clone():new st.Z({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Be.Z({color:"rgba(0,0,0,1)"}),stroke:new xe.Z({color:"rgba(255,255,255,1)",width:3})})}),z.lonLabelStyle_=function(W){var B=W.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(B),this.lonLabelStyleBase_}.bind(z),z.latLabelStyleBase_=new De.ZP({text:te.latLabelStyle!==void 0?te.latLabelStyle.clone():new st.Z({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Be.Z({color:"rgba(0,0,0,1)"}),stroke:new xe.Z({color:"rgba(255,255,255,1)",width:3})})}),z.latLabelStyle_=function(W){var B=W.get("graticule_label");return this.latLabelStyleBase_.getText().setText(B),this.latLabelStyleBase_}.bind(z),z.meridiansLabels_=[],z.parallelsLabels_=[],z.addEventListener(ae.Z.POSTRENDER,z.drawLabels_.bind(z))),z.intervals_=te.intervals!==void 0?te.intervals:on,z.setSource(new d.default({loader:z.loaderFunction.bind(z),strategy:z.strategyFunction.bind(z),features:new St.Z,overlaps:!1,useSpatialIndex:!1,wrapX:te.wrapX})),z.featurePool_=[],z.lineStyle_=new De.ZP({stroke:z.strokeStyle_}),z.loadedExtent_=null,z.renderedExtent_=null,z.renderedResolution_=null,z.setRenderOrder(null),z}return Ce.prototype.strategyFunction=function(V,z){var te=V.slice();return this.projection_&&this.getSource().getWrapX()&&(0,$.wrapX)(te,this.projection_),this.loadedExtent_&&((0,$.approximatelyEquals)(this.loadedExtent_,te,z)?te=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[te]},Ce.prototype.loaderFunction=function(V,z,te){this.loadedExtent_=V;var X=this.getSource(),W=this.getExtent()||[-1/0,-1/0,1/0,1/0],B=(0,$.getIntersection)(W,V);if(!(this.renderedExtent_&&(0,$.equals)(this.renderedExtent_,B)&&this.renderedResolution_===z)&&(this.renderedExtent_=B,this.renderedResolution_=z,!(0,$.isEmpty)(B))){var j=(0,$.getCenter)(B),Ve=z*z/4,dt=!this.projection_||!(0,je.equivalent)(this.projection_,te);dt&&this.updateProjectionInfo_(te),this.createGraticule_(B,j,z,Ve);var tt=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(tt+=this.meridians_.length),this.parallelsLabels_&&(tt+=this.parallels_.length);for(var ke;tt>this.featurePool_.length;)ke=new Ne.Z,this.featurePool_.push(ke);var Fe=X.getFeaturesCollection();Fe.clear();var lt=0,at,ze;for(at=0,ze=this.meridians_.length;at<ze;++at)ke=this.featurePool_[lt++],ke.setGeometry(this.meridians_[at]),ke.setStyle(this.lineStyle_),Fe.push(ke);for(at=0,ze=this.parallels_.length;at<ze;++at)ke=this.featurePool_[lt++],ke.setGeometry(this.parallels_[at]),ke.setStyle(this.lineStyle_),Fe.push(ke)}},Ce.prototype.addMeridian_=function(V,z,te,X,W,B){var j=this.getMeridian_(V,z,te,X,B);if((0,$.intersects)(j.getExtent(),W)){if(this.meridiansLabels_){var Ve=this.lonLabelFormatter_(V);B in this.meridiansLabels_?this.meridiansLabels_[B].text=Ve:this.meridiansLabels_[B]={geom:new Q.Z([]),text:Ve}}this.meridians_[B++]=j}return B},Ce.prototype.addParallel_=function(V,z,te,X,W,B){var j=this.getParallel_(V,z,te,X,B);if((0,$.intersects)(j.getExtent(),W)){if(this.parallelsLabels_){var Ve=this.latLabelFormatter_(V);B in this.parallelsLabels_?this.parallelsLabels_[B].text=Ve:this.parallelsLabels_[B]={geom:new Q.Z([]),text:Ve}}this.parallels_[B++]=j}return B},Ce.prototype.drawLabels_=function(V){var z=V.frameState.viewState.rotation,te=V.frameState.viewState.resolution,X=V.frameState.size,W=V.frameState.extent,B=(0,$.getCenter)(W),j=W;if(z){var Ve=X[0]*te,dt=X[1]*te;j=[B[0]-Ve/2,B[1]-dt/2,B[0]+Ve/2,B[1]+dt/2]}var tt=0,ke=0,Fe=this.latLabelPosition_<.5,lt=this.projection_.getExtent(),at=(0,$.getWidth)(lt);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,$.containsExtent)(lt,W)){tt=Math.floor((W[0]-lt[0])/at),ke=Math.ceil((W[2]-lt[2])/at);var ze=Math.abs(z)>Math.PI/2;Fe=Fe!==ze}for(var vt=br(V),Ye=tt;Ye<=ke;++Ye){var ee=this.meridians_.length+this.parallels_.length,ve=void 0,ue=void 0,Et=void 0,wt=void 0;if(this.meridiansLabels_)for(ue=0,Et=this.meridiansLabels_.length;ue<Et;++ue){var Te=this.meridians_[ue];if(!z&&Ye===0)wt=this.getMeridianPoint_(Te,W,ue);else{var Zr=Te.clone();Zr.translate(Ye*at,0),Zr.rotate(-z,B),wt=this.getMeridianPoint_(Zr,j,ue),wt.rotate(z,B)}ve=this.featurePool_[ee++],ve.setGeometry(wt),ve.set("graticule_label",this.meridiansLabels_[ue].text),vt.drawFeature(ve,this.lonLabelStyle_(ve))}if(this.parallelsLabels_&&(Ye===tt&&Fe||Ye===ke&&!Fe))for(ue=0,Et=this.parallels_.length;ue<Et;++ue){var Te=this.parallels_[ue];if(!z&&Ye===0)wt=this.getParallelPoint_(Te,W,ue);else{var Zr=Te.clone();Zr.translate(Ye*at,0),Zr.rotate(-z,B),wt=this.getParallelPoint_(Zr,j,ue),wt.rotate(z,B)}ve=this.featurePool_[ee++],ve.setGeometry(wt),ve.set("graticule_label",this.parallelsLabels_[ue].text),vt.drawFeature(ve,this.latLabelStyle_(ve))}}},Ce.prototype.createGraticule_=function(V,z,te,X){var W=this.getInterval_(te);if(W==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}var B=!1,j=this.projection_.getExtent(),Ve=(0,$.getWidth)(j);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,$.containsExtent)(j,V)&&((0,$.getWidth)(V)>=Ve?(V[0]=j[0],V[2]=j[2]):B=!0);var dt=[(0,R.uZ)(z[0],this.minX_,this.maxX_),(0,R.uZ)(z[1],this.minY_,this.maxY_)],tt=this.toLonLatTransform_(dt);isNaN(tt[1])&&(tt[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var ke=(0,R.uZ)(tt[0],this.minLon_,this.maxLon_),Fe=(0,R.uZ)(tt[1],this.minLat_,this.maxLat_),lt=this.maxLines_,at,ze,vt,Ye,ee=V;B||(ee=[(0,R.uZ)(V[0],this.minX_,this.maxX_),(0,R.uZ)(V[1],this.minY_,this.maxY_),(0,R.uZ)(V[2],this.minX_,this.maxX_),(0,R.uZ)(V[3],this.minY_,this.maxY_)]);var ve=(0,$.applyTransform)(ee,this.toLonLatTransform_,void 0,8),ue=ve[3],Et=ve[2],wt=ve[1],Te=ve[0];if(B||((0,$.containsCoordinate)(ee,this.bottomLeft_)&&(Te=this.minLon_,wt=this.minLat_),(0,$.containsCoordinate)(ee,this.bottomRight_)&&(Et=this.maxLon_,wt=this.minLat_),(0,$.containsCoordinate)(ee,this.topLeft_)&&(Te=this.minLon_,ue=this.maxLat_),(0,$.containsCoordinate)(ee,this.topRight_)&&(Et=this.maxLon_,ue=this.maxLat_),ue=(0,R.uZ)(ue,Fe,this.maxLat_),Et=(0,R.uZ)(Et,ke,this.maxLon_),wt=(0,R.uZ)(wt,this.minLat_,Fe),Te=(0,R.uZ)(Te,this.minLon_,ke)),ke=Math.floor(ke/W)*W,Ye=(0,R.uZ)(ke,this.minLon_,this.maxLon_),ze=this.addMeridian_(Ye,wt,ue,X,V,0),at=0,B)for(;(Ye-=W)>=Te&&at++<lt;)ze=this.addMeridian_(Ye,wt,ue,X,V,ze);else for(;Ye!=this.minLon_&&at++<lt;)Ye=Math.max(Ye-W,this.minLon_),ze=this.addMeridian_(Ye,wt,ue,X,V,ze);if(Ye=(0,R.uZ)(ke,this.minLon_,this.maxLon_),at=0,B)for(;(Ye+=W)<=Et&&at++<lt;)ze=this.addMeridian_(Ye,wt,ue,X,V,ze);else for(;Ye!=this.maxLon_&&at++<lt;)Ye=Math.min(Ye+W,this.maxLon_),ze=this.addMeridian_(Ye,wt,ue,X,V,ze);for(this.meridians_.length=ze,this.meridiansLabels_&&(this.meridiansLabels_.length=ze),Fe=Math.floor(Fe/W)*W,vt=(0,R.uZ)(Fe,this.minLat_,this.maxLat_),ze=this.addParallel_(vt,Te,Et,X,V,0),at=0;vt!=this.minLat_&&at++<lt;)vt=Math.max(vt-W,this.minLat_),ze=this.addParallel_(vt,Te,Et,X,V,ze);for(vt=(0,R.uZ)(Fe,this.minLat_,this.maxLat_),at=0;vt!=this.maxLat_&&at++<lt;)vt=Math.min(vt+W,this.maxLat_),ze=this.addParallel_(vt,Te,Et,X,V,ze);this.parallels_.length=ze,this.parallelsLabels_&&(this.parallelsLabels_.length=ze)},Ce.prototype.getInterval_=function(V){for(var z=this.projectionCenterLonLat_[0],te=this.projectionCenterLonLat_[1],X=-1,W=Math.pow(this.targetSize_*V,2),B=[],j=[],Ve=0,dt=this.intervals_.length;Ve<dt;++Ve){var tt=(0,R.uZ)(this.intervals_[Ve]/2,0,90),ke=(0,R.uZ)(te,-90+tt,90-tt);B[0]=z-tt,B[1]=ke-tt,j[0]=z+tt,j[1]=ke+tt,this.fromLonLatTransform_(B,B),this.fromLonLatTransform_(j,j);var Fe=Math.pow(j[0]-B[0],2)+Math.pow(j[1]-B[1],2);if(Fe<=W)break;X=this.intervals_[Ve]}return X},Ce.prototype.getMeridian_=function(V,z,te,X,W){var B=Mn(V,z,te,this.projection_,X),j=this.meridians_[W];return j?(j.setFlatCoordinates(Me.Z.XY,B),j.changed()):(j=new ge.Z(B,Me.Z.XY),this.meridians_[W]=j),j},Ce.prototype.getMeridianPoint_=function(V,z,te){var X=V.getFlatCoordinates(),W=1,B=X.length-1;X[W]>X[B]&&(W=B,B=1);var j=Math.max(z[1],X[W]),Ve=Math.min(z[3],X[B]),dt=(0,R.uZ)(z[1]+Math.abs(z[1]-z[3])*this.lonLabelPosition_,j,Ve),tt=X[W-1]+(X[B-1]-X[W-1])*(dt-X[W])/(X[B]-X[W]),ke=[tt,dt],Fe=this.meridiansLabels_[te].geom;return Fe.setCoordinates(ke),Fe},Ce.prototype.getMeridians=function(){return this.meridians_},Ce.prototype.getParallel_=function(V,z,te,X,W){var B=wr(V,z,te,this.projection_,X),j=this.parallels_[W];return j?(j.setFlatCoordinates(Me.Z.XY,B),j.changed()):j=new ge.Z(B,Me.Z.XY),j},Ce.prototype.getParallelPoint_=function(V,z,te){var X=V.getFlatCoordinates(),W=0,B=X.length-2;X[W]>X[B]&&(W=B,B=0);var j=Math.max(z[0],X[W]),Ve=Math.min(z[2],X[B]),dt=(0,R.uZ)(z[0]+Math.abs(z[0]-z[2])*this.latLabelPosition_,j,Ve),tt=X[W+1]+(X[B+1]-X[W+1])*(dt-X[W])/(X[B]-X[W]),ke=[dt,tt],Fe=this.parallelsLabels_[te].geom;return Fe.setCoordinates(ke),Fe},Ce.prototype.getParallels=function(){return this.parallels_},Ce.prototype.updateProjectionInfo_=function(V){var z=(0,je.get)("EPSG:4326"),te=V.getWorldExtent();this.maxLat_=te[3],this.maxLon_=te[2],this.minLat_=te[1],this.minLon_=te[0];var X=(0,je.getTransform)(V,z);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=X;else{var W=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(j,Ve,dt){for(var tt=dt||2,ke=X(j,Ve,tt),Fe=0,lt=ke.length;Fe<lt;Fe+=tt)ke[Fe]<W&&(ke[Fe]+=360);return ke}}this.fromLonLatTransform_=(0,je.getTransform)(z,V);var B=(0,$.applyTransform)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=B[0],this.maxX_=B[2],this.minY_=B[1],this.maxY_=B[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,$.getCenter)(V.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=V},Ce}(ut.default),zr=Gr},4535:function(Kr,ct,T){"use strict";T.r(ct),T.d(ct,{BingMaps:function(){return $},CartoDB:function(){return me},Cluster:function(){return Tt.Z},DataTile:function(){return on},GeoTIFF:function(){return ja},IIIF:function(){return Ci},Image:function(){return Or.ZP},ImageArcGISRest:function(){return Xa.Z},ImageCanvas:function(){return Mi},ImageMapGuide:function(){return In},ImageStatic:function(){return eo},ImageWMS:function(){return to.Z},OSM:function(){return ia},Raster:function(){return Zi},Source:function(){return jr.Z},Stamen:function(){return ha},Tile:function(){return Ar.Z},TileArcGISRest:function(){return da.Z},TileDebug:function(){return lo},TileImage:function(){return Ne.default},TileJSON:function(){return va.Z},TileWMS:function(){return Ui.Z},UTFGrid:function(){return ma},UrlTile:function(){return pi.Z},Vector:function(){return ki.default},VectorTile:function(){return ji.default},WMTS:function(){return ga.Z},XYZ:function(){return G.Z},Zoomify:function(){return ln},sourcesFromTileGrid:function(){return hi}});var St=T(90243),ae=T(76094),Ne=T(73608),Be=T(31973),Me=T(2692),ge=T(94308),Q=T(90583),xe=T(90570),De=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}();function st(y){var s=y[0],i=new Array(s),o=1<<s-1,l,v;for(l=0;l<s;++l)v=48,y[1]&o&&(v+=1),y[2]&o&&(v+=2),i[l]=String.fromCharCode(v),o>>=1;return i.join("")}var ut='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>',d=function(y){De(s,y);function s(i){var o=this,l=i.hidpi!==void 0?i.hidpi:!1,v=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(v=i.interpolate),o=y.call(this,{cacheSize:i.cacheSize,crossOrigin:"anonymous",interpolate:v,opaque:!0,projection:(0,Q.get)("EPSG:3857"),reprojectionErrorThreshold:i.reprojectionErrorThreshold,state:"loading",tileLoadFunction:i.tileLoadFunction,tilePixelRatio:l?2:1,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,o.hidpi_=l,o.culture_=i.culture!==void 0?i.culture:"en-us",o.maxZoom_=i.maxZoom!==void 0?i.maxZoom:-1,o.apiKey_=i.key,o.imagerySet_=i.imagerySet;var x="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+o.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+o.apiKey_+"&c="+o.culture_;return(0,xe.R6)(x,o.handleImageryMetadataResponse.bind(o),void 0,"jsonp"),o}return s.prototype.getApiKey=function(){return this.apiKey_},s.prototype.getImagerySet=function(){return this.imagerySet_},s.prototype.handleImageryMetadataResponse=function(i){if(i.statusCode!=200||i.statusDescription!="OK"||i.authenticationResultCode!="ValidCredentials"||i.resourceSets.length!=1||i.resourceSets[0].resources.length!=1){this.setState("error");return}var o=i.resourceSets[0].resources[0],l=this.maxZoom_==-1?o.zoomMax:this.maxZoom_,v=this.getProjection(),x=(0,ge.Tl)(v),w=this.hidpi_?2:1,_=o.imageWidth==o.imageHeight?o.imageWidth/w:[o.imageWidth/w,o.imageHeight/w],L=(0,ge.dl)({extent:x,minZoom:o.zoomMin,maxZoom:l,tileSize:_});this.tileGrid=L;var M=this.culture_,F=this.hidpi_;if(this.tileUrlFunction=(0,Be.Un)(o.imageUrlSubdomains.map(function(K){var Y=[0,0,0],ne=o.imageUrl.replace("{subdomain}",K).replace("{culture}",M);return function(q,pe,ie){if(q){(0,Me.T9)(q[0],q[1],q[2],Y);var Ze=ne;return F&&(Ze+="&dpi=d1&device=mobile"),Ze.replace("{quadkey}",st(Y))}else return}})),o.imageryProviders){var U=(0,Q.getTransformFromProjections)((0,Q.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(K){var Y=[],ne=K.viewState,q=this.getTileGrid(),pe=q.getZForResolution(ne.resolution,this.zDirection),ie=q.getTileCoordForCoordAndZ(ne.center,pe),Ze=ie[0];return o.imageryProviders.map(function(_e){for(var Ie=!1,Oe=_e.coverageAreas,Je=0,it=Oe.length;Je<it;++Je){var Ke=Oe[Je];if(Ze>=Ke.zoomMin&&Ze<=Ke.zoomMax){var ft=Ke.bbox,He=[ft[1],ft[0],ft[3],ft[2]],Ot=(0,ae.applyTransform)(He,U);if((0,ae.intersects)(Ot,K.extent)){Ie=!0;break}}}Ie&&Y.push(_e.attribution)}),Y.push(ut),Y}.bind(this))}this.setState("ready")},s}(Ne.default),$=d,G=T(86805),R=T(45059),le=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),je=function(y){le(s,y);function s(i){var o=y.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,maxZoom:i.maxZoom!==void 0?i.maxZoom:18,minZoom:i.minZoom,projection:i.projection,transition:i.transition,wrapX:i.wrapX,zDirection:i.zDirection})||this;return o.account_=i.account,o.mapId_=i.map||"",o.config_=i.config||{},o.templateCache_={},o.initializeMap_(),o}return s.prototype.getConfig=function(){return this.config_},s.prototype.updateConfig=function(i){(0,R.f0)(this.config_,i),this.initializeMap_()},s.prototype.setConfig=function(i){this.config_=i||{},this.initializeMap_()},s.prototype.initializeMap_=function(){var i=JSON.stringify(this.config_);if(this.templateCache_[i]){this.applyTemplate_(this.templateCache_[i]);return}var o="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(o+="/named/"+this.mapId_);var l=new XMLHttpRequest;l.addEventListener("load",this.handleInitResponse_.bind(this,i)),l.addEventListener("error",this.handleInitError_.bind(this)),l.open("POST",o),l.setRequestHeader("Content-type","application/json"),l.send(JSON.stringify(this.config_))},s.prototype.handleInitResponse_=function(i,o){var l=o.target;if(!l.status||l.status>=200&&l.status<300){var v=void 0;try{v=JSON.parse(l.responseText)}catch{this.setState("error");return}this.applyTemplate_(v),this.templateCache_[i]=v,this.setState("ready")}else this.setState("error")},s.prototype.handleInitError_=function(i){this.setState("error")},s.prototype.applyTemplate_=function(i){var o="https://"+i.cdn_url.https+"/"+this.account_+"/api/v1/map/"+i.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(o)},s}(G.Z),me=je,Tt=T(60281),Rt=T(29672),_r=T(2073),br=T(80314),Ar=T(39648),gt=T(63483),Nr=T(95232),Mn=T(92249),wr=T(85606),dn=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Fr=function(y){dn(s,y);function s(i){var o=this,l=i.projection===void 0?"EPSG:3857":i.projection,v=i.tileGrid;if(v===void 0&&l&&(v=(0,ge.dl)({extent:(0,ge.Tl)(l),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize})),o=y.call(this,{cacheSize:.1,attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,projection:l,tileGrid:v,opaque:i.opaque,state:i.state,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate})||this,o.gutter_=i.gutter!==void 0?i.gutter:0,o.tileSize_=i.tileSize?(0,wr.Pq)(i.tileSize):null,!o.tileSize_&&i.tilePixelRatio&&v){var x=(0,wr.Pq)(v.getTileSize(0));o.tileSize_=[x[0]*i.tilePixelRatio,x[1]*i.tilePixelRatio]}return o.tileSizes_=null,o.tileLoadingKeys_={},o.loader_=i.loader,o.handleTileChange_=o.handleTileChange_.bind(o),o.bandCount=i.bandCount===void 0?4:i.bandCount,o}return s.prototype.setTileSizes=function(i){this.tileSizes_=i},s.prototype.getTileSize=function(i){if(this.tileSizes_)return this.tileSizes_[i];if(this.tileSize_)return this.tileSize_;var o=this.getTileGrid();return o?(0,wr.Pq)(o.getTileSize(i)):[256,256]},s.prototype.getGutterForProjection=function(i){return this.gutter_},s.prototype.setLoader=function(i){this.loader_=i},s.prototype.getTile=function(i,o,l,v,x){var w=this.getTileSize(i),_=(0,Me.lg)(i,o,l);if(this.tileCache.containsKey(_))return this.tileCache.get(_);var L=this.loader_;function M(){return(0,Mn.Vi)(function(){return L(i,o,l)})}var F=(0,R.f0)({tileCoord:[i,o,l],loader:M,size:w},this.tileOptions),U=new Rt.Z(F);return U.key=this.getKey(),U.addEventListener(_r.Z.CHANGE,this.handleTileChange_),this.tileCache.set(_,U),U},s.prototype.handleTileChange_=function(i){var o=i.target,l=(0,Nr.sq)(o),v=o.getState(),x;v==gt.Z.LOADING?(this.tileLoadingKeys_[l]=!0,x=br.Z.TILELOADSTART):l in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[l],x=v==gt.Z.ERROR?br.Z.TILELOADERROR:v==gt.Z.LOADED?br.Z.TILELOADEND:void 0),x&&this.dispatchEvent(new Ar.s(x,o))},s}(Ar.Z),on=Fr,Gr=T(12542);const zr=new Map;function Xe(y,s){Array.isArray(y)||(y=[y]),y.forEach(i=>zr.set(i,s))}async function Ce(y){const s=zr.get(y.Compression);if(!s)throw new Error(`Unknown compression method identifier: ${y.Compression}`);const i=await s();return new i(y)}Xe([void 0,1],()=>T.e(3225).then(T.bind(T,13225)).then(y=>y.default)),Xe(5,()=>T.e(6279).then(T.bind(T,26279)).then(y=>y.default)),Xe(6,()=>{throw new Error("old style JPEG compression is not supported.")}),Xe(7,()=>T.e(4487).then(T.bind(T,74487)).then(y=>y.default)),Xe([8,32946],()=>Promise.all([T.e(189),T.e(2680)]).then(T.bind(T,22680)).then(y=>y.default)),Xe(32773,()=>T.e(4165).then(T.bind(T,74165)).then(y=>y.default)),Xe(34887,()=>Promise.all([T.e(189),T.e(9536),T.e(5481)]).then(T.bind(T,15481)).then(y=>y.default)),Xe(50001,()=>T.e(5844).then(T.bind(T,55844)).then(y=>y.default));const V=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class z{constructor(s=V,i){this.workers=null,this._awaitingDecoder=null,this.size=s,this.messageId=0,s&&(this._awaitingDecoder=i?Promise.resolve(i):new Promise(o=>{T.e(4281).then(T.bind(T,34281)).then(l=>{o(l.create)})}),this._awaitingDecoder.then(o=>{this._awaitingDecoder=null,this.workers=[];for(let l=0;l<s;l++)this.workers.push({worker:o(),idle:!0})}))}async decode(s,i){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?Ce(s).then(o=>o.decode(s,i)):new Promise(o=>{const l=this.workers.find(w=>w.idle)||this.workers[Math.floor(Math.random()*this.size)];l.idle=!1;const v=this.messageId++,x=w=>{w.data.id===v&&(l.idle=!0,o(w.data.decoded),l.worker.removeEventListener("message",x))};l.worker.addEventListener("message",x),l.worker.postMessage({fileDirectory:s,buffer:i,id:v},[i])})}destroy(){this.workers&&(this.workers.forEach(s=>{s.worker.terminate()}),this.workers=null)}}var te=z,X=T(1545),W=T(80653),B=T(590),j=T(46642);function Ve(y,s){const{width:i,height:o}=y,l=new Uint8Array(i*o*3);let v;for(let x=0,w=0;x<y.length;++x,w+=3)v=256-y[x]/s*256,l[w]=v,l[w+1]=v,l[w+2]=v;return l}function dt(y,s){const{width:i,height:o}=y,l=new Uint8Array(i*o*3);let v;for(let x=0,w=0;x<y.length;++x,w+=3)v=y[x]/s*256,l[w]=v,l[w+1]=v,l[w+2]=v;return l}function tt(y,s){const{width:i,height:o}=y,l=new Uint8Array(i*o*3),v=s.length/3,x=s.length/3*2;for(let w=0,_=0;w<y.length;++w,_+=3){const L=y[w];l[_]=s[L]/65536*256,l[_+1]=s[L+v]/65536*256,l[_+2]=s[L+x]/65536*256}return l}function ke(y){const{width:s,height:i}=y,o=new Uint8Array(s*i*3);for(let l=0,v=0;l<y.length;l+=4,v+=3){const x=y[l],w=y[l+1],_=y[l+2],L=y[l+3];o[v]=255*((255-x)/256)*((255-L)/256),o[v+1]=255*((255-w)/256)*((255-L)/256),o[v+2]=255*((255-_)/256)*((255-L)/256)}return o}function Fe(y){const{width:s,height:i}=y,o=new Uint8ClampedArray(s*i*3);for(let l=0,v=0;l<y.length;l+=3,v+=3){const x=y[l],w=y[l+1],_=y[l+2];o[v]=x+1.402*(_-128),o[v+1]=x-.34414*(w-128)-.71414*(_-128),o[v+2]=x+1.772*(w-128)}return o}const lt=.95047,at=1,ze=1.08883;function vt(y){const{width:s,height:i}=y,o=new Uint8Array(s*i*3);for(let l=0,v=0;l<y.length;l+=3,v+=3){const x=y[l+0],w=y[l+1]<<24>>24,_=y[l+2]<<24>>24;let L=(x+16)/116,M=w/500+L,F=L-_/200,U,K,Y;M=lt*(M*M*M>.008856?M*M*M:(M-16/116)/7.787),L=at*(L*L*L>.008856?L*L*L:(L-16/116)/7.787),F=ze*(F*F*F>.008856?F*F*F:(F-16/116)/7.787),U=M*3.2406+L*-1.5372+F*-.4986,K=M*-.9689+L*1.8758+F*.0415,Y=M*.0557+L*-.204+F*1.057,U=U>.0031308?1.055*U**(1/2.4)-.055:12.92*U,K=K>.0031308?1.055*K**(1/2.4)-.055:12.92*K,Y=Y>.0031308?1.055*Y**(1/2.4)-.055:12.92*Y,o[v]=Math.max(0,Math.min(1,U))*255,o[v+1]=Math.max(0,Math.min(1,K))*255,o[v+2]=Math.max(0,Math.min(1,Y))*255}return o}function Ye(y,s,i,o=1){return new(Object.getPrototypeOf(y)).constructor(s*i*o)}function ee(y,s,i,o,l){const v=s/o,x=i/l;return y.map(w=>{const _=Ye(w,o,l);for(let L=0;L<l;++L){const M=Math.min(Math.round(x*L),i-1);for(let F=0;F<o;++F){const U=Math.min(Math.round(v*F),s-1),K=w[M*s+U];_[L*o+F]=K}}return _})}function ve(y,s,i){return(1-i)*y+i*s}function ue(y,s,i,o,l){const v=s/o,x=i/l;return y.map(w=>{const _=Ye(w,o,l);for(let L=0;L<l;++L){const M=x*L,F=Math.floor(M),U=Math.min(Math.ceil(M),i-1);for(let K=0;K<o;++K){const Y=v*K,ne=Y%1,q=Math.floor(Y),pe=Math.min(Math.ceil(Y),s-1),ie=w[F*s+q],Ze=w[F*s+pe],_e=w[U*s+q],Ie=w[U*s+pe],Oe=ve(ve(ie,Ze,ne),ve(_e,Ie,ne),M%1);_[L*o+K]=Oe}}return _})}function Et(y,s,i,o,l,v="nearest"){switch(v.toLowerCase()){case"nearest":return ee(y,s,i,o,l);case"bilinear":case"linear":return ue(y,s,i,o,l);default:throw new Error(`Unsupported resampling method: '${v}'`)}}function wt(y,s,i,o,l,v){const x=s/o,w=i/l,_=Ye(y,o,l,v);for(let L=0;L<l;++L){const M=Math.min(Math.round(w*L),i-1);for(let F=0;F<o;++F){const U=Math.min(Math.round(x*F),s-1);for(let K=0;K<v;++K){const Y=y[M*s*v+U*v+K];_[L*o*v+F*v+K]=Y}}}return _}function Te(y,s,i,o,l,v){const x=s/o,w=i/l,_=Ye(y,o,l,v);for(let L=0;L<l;++L){const M=w*L,F=Math.floor(M),U=Math.min(Math.ceil(M),i-1);for(let K=0;K<o;++K){const Y=x*K,ne=Y%1,q=Math.floor(Y),pe=Math.min(Math.ceil(Y),s-1);for(let ie=0;ie<v;++ie){const Ze=y[F*s*v+q*v+ie],_e=y[F*s*v+pe*v+ie],Ie=y[U*s*v+q*v+ie],Oe=y[U*s*v+pe*v+ie],Je=ve(ve(Ze,_e,ne),ve(Ie,Oe,ne),M%1);_[L*o*v+K*v+ie]=Je}}}return _}function Zr(y,s,i,o,l,v,x="nearest"){switch(x.toLowerCase()){case"nearest":return wt(y,s,i,o,l,v);case"bilinear":case"linear":return Te(y,s,i,o,l,v);default:throw new Error(`Unsupported resampling method: '${x}'`)}}function Qn(y,s,i){let o=0;for(let l=s;l<i;++l)o+=y[l];return o}function vn(y,s,i){switch(y){case 1:if(s<=8)return new Uint8Array(i);if(s<=16)return new Uint16Array(i);if(s<=32)return new Uint32Array(i);break;case 2:if(s===8)return new Int8Array(i);if(s===16)return new Int16Array(i);if(s===32)return new Int32Array(i);break;case 3:switch(s){case 16:case 32:return new Float32Array(i);case 64:return new Float64Array(i);default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}function yn(y,s){return(y===1||y===2)&&s<=32&&s%8===0?!1:!(y===3&&(s===16||s===32||s===64))}function gr(y,s,i,o,l,v,x){const w=new DataView(y),_=i===2?x*v:x*v*o,L=i===2?1:o,M=vn(s,l,_),F=parseInt("1".repeat(l),2);if(s===1){let U;i===1?U=o*l:U=l;let K=v*U;K&7&&(K=K+7&-8);for(let Y=0;Y<x;++Y){const ne=Y*K;for(let q=0;q<v;++q){const pe=ne+q*L*l;for(let ie=0;ie<L;++ie){const Ze=pe+ie*l,_e=(Y*v+q)*L+ie,Ie=Math.floor(Ze/8),Oe=Ze%8;if(Oe+l<=8)M[_e]=w.getUint8(Ie)>>8-l-Oe&F;else if(Oe+l<=16)M[_e]=w.getUint16(Ie)>>16-l-Oe&F;else if(Oe+l<=24){const Je=w.getUint16(Ie)<<8|w.getUint8(Ie+2);M[_e]=Je>>24-l-Oe&F}else M[_e]=w.getUint32(Ie)>>32-l-Oe&F}}}}return M.buffer}class yt{constructor(s,i,o,l,v,x){this.fileDirectory=s,this.geoKeys=i,this.dataView=o,this.littleEndian=l,this.tiles=v?{}:null,this.isTiled=!s.StripOffsets;const w=s.PlanarConfiguration;if(this.planarConfiguration=typeof w>"u"?1:w,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=x}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(s){return this.isTiled||(s+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-s*this.getTileHeight()}getBytesPerPixel(){let s=0;for(let i=0;i<this.fileDirectory.BitsPerSample.length;++i)s+=this.getSampleByteSize(i);return s}getSampleByteSize(s){if(s>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${s} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[s]/8)}getReaderForSample(s){const i=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[s]:1,o=this.fileDirectory.BitsPerSample[s];switch(i){case 1:if(o<=8)return DataView.prototype.getUint8;if(o<=16)return DataView.prototype.getUint16;if(o<=32)return DataView.prototype.getUint32;break;case 2:if(o<=8)return DataView.prototype.getInt8;if(o<=16)return DataView.prototype.getInt16;if(o<=32)return DataView.prototype.getInt32;break;case 3:switch(o){case 16:return function(l,v){return(0,X.g)(this,l,v)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64;default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(s=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[s]:1}getBitsPerSample(s=0){return this.fileDirectory.BitsPerSample[s]}getArrayForSample(s,i){const o=this.getSampleFormat(s),l=this.getBitsPerSample(s);return vn(o,l,i)}async getTileOrStrip(s,i,o,l,v){const x=Math.ceil(this.getWidth()/this.getTileWidth()),w=Math.ceil(this.getHeight()/this.getTileHeight());let _;const{tiles:L}=this;this.planarConfiguration===1?_=i*x+s:this.planarConfiguration===2&&(_=o*x*w+i*x+s);let M,F;this.isTiled?(M=this.fileDirectory.TileOffsets[_],F=this.fileDirectory.TileByteCounts[_]):(M=this.fileDirectory.StripOffsets[_],F=this.fileDirectory.StripByteCounts[_]);const U=(await this.source.fetch([{offset:M,length:F}],v))[0];let K;return L===null||!L[_]?(K=(async()=>{let Y=await l.decode(this.fileDirectory,U);const ne=this.getSampleFormat(),q=this.getBitsPerSample();return yn(ne,q)&&(Y=gr(Y,ne,this.planarConfiguration,this.getSamplesPerPixel(),q,this.getTileWidth(),this.getBlockHeight(i))),Y})(),L!==null&&(L[_]=K)):K=L[_],{x:s,y:i,sample:o,data:await K}}async _readRaster(s,i,o,l,v,x,w,_,L){const M=this.getTileWidth(),F=this.getTileHeight(),U=this.getWidth(),K=this.getHeight(),Y=Math.max(Math.floor(s[0]/M),0),ne=Math.min(Math.ceil(s[2]/M),Math.ceil(U/M)),q=Math.max(Math.floor(s[1]/F),0),pe=Math.min(Math.ceil(s[3]/F),Math.ceil(K/F)),ie=s[2]-s[0];let Ze=this.getBytesPerPixel();const _e=[],Ie=[];for(let it=0;it<i.length;++it)this.planarConfiguration===1?_e.push(Qn(this.fileDirectory.BitsPerSample,0,i[it])/8):_e.push(0),Ie.push(this.getReaderForSample(i[it]));const Oe=[],{littleEndian:Je}=this;for(let it=q;it<pe;++it)for(let Ke=Y;Ke<ne;++Ke)for(let ft=0;ft<i.length;++ft){const He=ft,Ot=i[ft];this.planarConfiguration===2&&(Ze=this.getSampleByteSize(ft));const Ct=this.getTileOrStrip(Ke,it,Ot,v,L);Oe.push(Ct),Ct.then(Zt=>{const At=Zt.data,fe=new DataView(At),kt=this.getBlockHeight(Zt.y),_t=Zt.y*F,xt=Zt.x*M,mt=_t+kt,Pt=(Zt.x+1)*M,Rr=Ie[He],sr=Math.min(kt,kt-(mt-s[3]),K-_t),bt=Math.min(M,M-(Pt-s[2]),U-xt);for(let jt=Math.max(0,s[1]-_t);jt<sr;++jt)for(let Ue=Math.max(0,s[0]-xt);Ue<bt;++Ue){const vr=(jt*M+Ue)*Ze,xr=Rr.call(fe,vr+_e[He],Je);let ur;l?(ur=(jt+_t-s[1])*ie*i.length+(Ue+xt-s[0])*i.length+He,o[ur]=xr):(ur=(jt+_t-s[1])*ie+Ue+xt-s[0],o[He][ur]=xr)}})}if(await Promise.all(Oe),x&&s[2]-s[0]!==x||w&&s[3]-s[1]!==w){let it;return l?it=Zr(o,s[2]-s[0],s[3]-s[1],x,w,i.length,_):it=Et(o,s[2]-s[0],s[3]-s[1],x,w,_),it.width=x,it.height=w,it}return o.width=x||s[2]-s[0],o.height=w||s[3]-s[1],o}async readRasters({window:s,samples:i=[],interleave:o,pool:l=null,width:v,height:x,resampleMethod:w,fillValue:_,signal:L}={}){const M=s||[0,0,this.getWidth(),this.getHeight()];if(M[0]>M[2]||M[1]>M[3])throw new Error("Invalid subsets");const F=M[2]-M[0],U=M[3]-M[1],K=F*U,Y=this.getSamplesPerPixel();if(!i||!i.length)for(let ie=0;ie<Y;++ie)i.push(ie);else for(let ie=0;ie<i.length;++ie)if(i[ie]>=Y)return Promise.reject(new RangeError(`Invalid sample index '${i[ie]}'.`));let ne;if(o){const ie=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Ze=Math.max.apply(null,this.fileDirectory.BitsPerSample);ne=vn(ie,Ze,K*i.length),_&&ne.fill(_)}else{ne=[];for(let ie=0;ie<i.length;++ie){const Ze=this.getArrayForSample(i[ie],K);Array.isArray(_)&&ie<_.length?Ze.fill(_[ie]):_&&!Array.isArray(_)&&Ze.fill(_),ne.push(Ze)}}const q=l||await Ce(this.fileDirectory);return await this._readRaster(M,i,ne,o,q,v,x,w,L)}async readRGB({window:s,interleave:i=!0,pool:o=null,width:l,height:v,resampleMethod:x,enableAlpha:w=!1,signal:_}={}){const L=s||[0,0,this.getWidth(),this.getHeight()];if(L[0]>L[2]||L[1]>L[3])throw new Error("Invalid subsets");const M=this.fileDirectory.PhotometricInterpretation;if(M===j.Ie.RGB){let pe=[0,1,2];if(this.fileDirectory.ExtraSamples!==j.pd.Unspecified&&w){pe=[];for(let ie=0;ie<this.fileDirectory.BitsPerSample.length;ie+=1)pe.push(ie)}return this.readRasters({window:s,interleave:i,samples:pe,pool:o,width:l,height:v,resampleMethod:x,signal:_})}let F;switch(M){case j.Ie.WhiteIsZero:case j.Ie.BlackIsZero:case j.Ie.Palette:F=[0];break;case j.Ie.CMYK:F=[0,1,2,3];break;case j.Ie.YCbCr:case j.Ie.CIELab:F=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const U={window:L,interleave:!0,samples:F,pool:o,width:l,height:v,resampleMethod:x,signal:_},{fileDirectory:K}=this,Y=await this.readRasters(U),ne=2**this.fileDirectory.BitsPerSample[0];let q;switch(M){case j.Ie.WhiteIsZero:q=Ve(Y,ne);break;case j.Ie.BlackIsZero:q=dt(Y,ne);break;case j.Ie.Palette:q=tt(Y,K.ColorMap);break;case j.Ie.CMYK:q=ke(Y);break;case j.Ie.YCbCr:q=Fe(Y);break;case j.Ie.CIELab:q=vt(Y);break;default:throw new Error("Unsupported photometric interpretation.")}if(!i){const pe=new Uint8Array(q.length/3),ie=new Uint8Array(q.length/3),Ze=new Uint8Array(q.length/3);for(let _e=0,Ie=0;_e<q.length;_e+=3,++Ie)pe[Ie]=q[_e],ie[Ie]=q[_e+1],Ze[Ie]=q[_e+2];q=[pe,ie,Ze]}return q.width=Y.width,q.height=Y.height,q}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const s=[];for(let i=0;i<this.fileDirectory.ModelTiepoint.length;i+=6)s.push({i:this.fileDirectory.ModelTiepoint[i],j:this.fileDirectory.ModelTiepoint[i+1],k:this.fileDirectory.ModelTiepoint[i+2],x:this.fileDirectory.ModelTiepoint[i+3],y:this.fileDirectory.ModelTiepoint[i+4],z:this.fileDirectory.ModelTiepoint[i+5]});return s}getGDALMetadata(s=null){const i={};if(!this.fileDirectory.GDAL_METADATA)return null;const o=this.fileDirectory.GDAL_METADATA;let l=B(o,"Item");s===null?l=l.filter(v=>W(v,"sample")===void 0):l=l.filter(v=>Number(W(v,"sample"))===s);for(let v=0;v<l.length;++v){const x=l[v];i[W(x,"name")]=x.inner}return i}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const s=this.fileDirectory.GDAL_NODATA;return Number(s.substring(0,s.length-1))}getOrigin(){const s=this.fileDirectory.ModelTiepoint,i=this.fileDirectory.ModelTransformation;if(s&&s.length===6)return[s[3],s[4],s[5]];if(i)return[i[3],i[7],i[11]];throw new Error("The image does not have an affine transformation.")}getResolution(s=null){const i=this.fileDirectory.ModelPixelScale,o=this.fileDirectory.ModelTransformation;if(i)return[i[0],-i[1],i[2]];if(o)return[o[0],o[5],o[10]];if(s){const[l,v,x]=s.getResolution();return[l*s.getWidth()/this.getWidth(),v*s.getHeight()/this.getHeight(),x*s.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(){const s=this.getOrigin(),i=this.getResolution(),o=s[0],l=s[1],v=o+i[0]*this.getWidth(),x=l+i[1]*this.getHeight();return[Math.min(o,v),Math.min(l,x),Math.max(o,v),Math.max(l,x)]}}var Yi=yt;class Dn{constructor(s){this._dataView=new DataView(s)}get buffer(){return this._dataView.buffer}getUint64(s,i){const o=this.getUint32(s,i),l=this.getUint32(s+4,i);let v;if(i){if(v=o+2**32*l,!Number.isSafeInteger(v))throw new Error(`${v} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return v}if(v=2**32*o+l,!Number.isSafeInteger(v))throw new Error(`${v} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return v}getInt64(s,i){let o=0;const l=(this._dataView.getUint8(s+(i?7:0))&128)>0;let v=!0;for(let x=0;x<8;x++){let w=this._dataView.getUint8(s+(i?x:7-x));l&&(v?w!==0&&(w=~(w-1)&255,v=!1):w=~w&255),o+=w*256**x}return l&&(o=-o),o}getUint8(s,i){return this._dataView.getUint8(s,i)}getInt8(s,i){return this._dataView.getInt8(s,i)}getUint16(s,i){return this._dataView.getUint16(s,i)}getInt16(s,i){return this._dataView.getInt16(s,i)}getUint32(s,i){return this._dataView.getUint32(s,i)}getInt32(s,i){return this._dataView.getInt32(s,i)}getFloat16(s,i){return(0,X.g)(this._dataView,s,i)}getFloat32(s,i){return this._dataView.getFloat32(s,i)}getFloat64(s,i){return this._dataView.getFloat64(s,i)}}class Ti{constructor(s,i,o,l){this._dataView=new DataView(s),this._sliceOffset=i,this._littleEndian=o,this._bigTiff=l}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(s,i){return this.sliceOffset<=s&&this.sliceTop>=s+i}readUint8(s){return this._dataView.getUint8(s-this._sliceOffset,this._littleEndian)}readInt8(s){return this._dataView.getInt8(s-this._sliceOffset,this._littleEndian)}readUint16(s){return this._dataView.getUint16(s-this._sliceOffset,this._littleEndian)}readInt16(s){return this._dataView.getInt16(s-this._sliceOffset,this._littleEndian)}readUint32(s){return this._dataView.getUint32(s-this._sliceOffset,this._littleEndian)}readInt32(s){return this._dataView.getInt32(s-this._sliceOffset,this._littleEndian)}readFloat32(s){return this._dataView.getFloat32(s-this._sliceOffset,this._littleEndian)}readFloat64(s){return this._dataView.getFloat64(s-this._sliceOffset,this._littleEndian)}readUint64(s){const i=this.readUint32(s),o=this.readUint32(s+4);let l;if(this._littleEndian){if(l=i+2**32*o,!Number.isSafeInteger(l))throw new Error(`${l} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return l}if(l=2**32*i+o,!Number.isSafeInteger(l))throw new Error(`${l} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return l}readInt64(s){let i=0;const o=(this._dataView.getUint8(s+(this._littleEndian?7:0))&128)>0;let l=!0;for(let v=0;v<8;v++){let x=this._dataView.getUint8(s+(this._littleEndian?v:7-v));o&&(l?x!==0&&(x=~(x-1)&255,l=!1):x=~x&255),i+=x*256**v}return o&&(i=-i),i}readOffset(s){return this._bigTiff?this.readUint64(s):this.readUint32(s)}}const mn=`\r
\r
`;function gn(y){if(typeof Object.fromEntries<"u")return Object.fromEntries(y);const s={};for(const[i,o]of y)s[i.toLowerCase()]=o;return s}function xi(y){const s=y.split(`\r
`).map(i=>{const o=i.split(":").map(l=>l.trim());return o[0]=o[0].toLowerCase(),o});return gn(s)}function rr(y){const[s,...i]=y.split(";").map(l=>l.trim()),o=i.map(l=>l.split("="));return{type:s,params:gn(o)}}function nr(y){let s,i,o;return y&&([,s,i,o]=y.match(/bytes (\d+)-(\d+)\/(\d+)/),s=parseInt(s,10),i=parseInt(i,10),o=parseInt(o,10)),{start:s,end:i,total:o}}function lr(y,s){let i=null;const o=new TextDecoder("ascii"),l=[],v=`--${s}`,x=`${v}--`;for(let w=0;w<10;++w)o.decode(new Uint8Array(y,w,v.length))===v&&(i=w);if(i===null)throw new Error("Could not find initial boundary");for(;i<y.byteLength;){const w=o.decode(new Uint8Array(y,i,Math.min(v.length+1024,y.byteLength-i)));if(w.length===0||w.startsWith(x))break;if(!w.startsWith(v))throw new Error("Part does not start with boundary");const _=w.substr(v.length+2);if(_.length===0)break;const L=_.indexOf(mn),M=xi(_.substr(0,L)),{start:F,end:U,total:K}=nr(M["content-range"]),Y=i+v.length+L+mn.length,ne=parseInt(U,10)+1-parseInt(F,10);l.push({headers:M,data:y.slice(Y,Y+ne),offset:F,length:ne,fileSize:K}),i=Y+ne+4}return l}class sn{async fetch(s,i=void 0){return Promise.all(s.map(o=>this.fetchSlice(o,i)))}async fetchSlice(s){throw new Error(`fetching of slice ${s} not possible, not implemented`)}get fileSize(){return null}async close(){}}var It=T(18968);function Pr(y,s){for(const i in s)s.hasOwnProperty(i)&&(y[i]=s[i])}function fr(y,s){const i=[],o=y.length;for(let l=0;l<o;l+=s){const v=[];for(let x=l;x<l+s;x++)v.push(y[x]);i.push(v)}return i}function Ut(y,s){return y.length<s.length?!1:y.substr(y.length-s.length)===s}function $n(y,s){const{length:i}=y;for(let o=0;o<i;o++)s(y[o],o)}function Vt(y){const s={};for(const i in y)if(y.hasOwnProperty(i)){const o=y[i];s[o]=i}return s}function Ur(y){const s=[];for(let i=0;i<y;i++)s.push(i);return s}function Er(y,s){const i=[];for(let o=0;o<y;o++)i.push(s(o));return i}function Ki(y){const s=[],{length:i}=y;for(let o=0;o<i;o++)s.push(y[o]);return s}function Tr(y){return y.length?Ki(y).map(Tr):y}function Nn(y){if(!y)return null;if(typeof y!="string")throw new Error("invalid argument");const s=l=>Number.parseInt(l,10);let i=y.match(/^(\w*) /);const o=i&&i[1];return i=y.match(/(\d+)-(\d+)\/(\d+|\*)/),i?{unit:o,first:s(i[1]),last:s(i[2]),length:i[3]==="*"?null:s(i[3])}:(i=y.match(/(\d+|\*)/),i?{unit:o,first:null,last:null,length:i[1]==="*"?null:s(i[1])}:null)}async function Br(y){return new Promise(s=>setTimeout(s,y))}function Yt(y,s){const i=Array.isArray(y)?y:Array.from(y),o=Array.isArray(s)?s:Array.from(s);return i.map((l,v)=>[l,o[v]])}class ir extends Error{constructor(s){super(s),Error.captureStackTrace&&Error.captureStackTrace(this,ir),this.name="AbortError"}}class he extends Error{constructor(s,i){super(i),this.errors=s,this.message=i,this.name="AggregateError"}}const Hr=he;class ei{constructor(s,i,o=null){this.offset=s,this.length=i,this.data=o}get top(){return this.offset+this.length}}class Hi{constructor(s,i,o){this.offset=s,this.length=i,this.blockIds=o}}class Ca extends sn{constructor(s,{blockSize:i=65536,cacheSize:o=100}={}){super(),this.source=s,this.blockSize=i,this.blockCache=new It({max:o}),this.blockRequests=new Map,this.blockIdsToFetch=new Set}get fileSize(){return this.source.fileSize}async fetch(s,i){const o=new Map,l=new Map,v=new Set;for(const{offset:L,length:M}of s){let F=L+M;const{fileSize:U}=this;U!==null&&(F=Math.min(F,U));const K=Math.floor(L/this.blockSize)*this.blockSize;for(let Y=K;Y<F;Y+=this.blockSize){const ne=Math.floor(Y/this.blockSize);this.blockCache.has(ne)?o.set(ne,this.blockCache.get(ne)):this.blockRequests.has(ne)?l.set(ne,this.blockRequests.get(ne)):(this.blockIdsToFetch.has(ne)||this.blockIdsToFetch.add(ne),v.add(ne))}}await Br(),this.fetchBlocks(i);for(const L of v){const M=this.blockRequests.get(L),F=this.blockCache.get(L);if(M)l.set(L,M);else if(F)o.set(L,F);else throw new Error(`Block ${L} is not in the block requests`)}let x=await Promise.allSettled(Array.from(l.values()));if(x.some(L=>L.status==="rejected")){const L=new Set;for(const[M,F]of Yt(l.keys(),x)){const{rejected:U,reason:K}=F;U&&K.name==="AbortError"&&K.signal!==i&&(this.blockIdsToFetch.add(M),L.add(M))}if(this.blockIdsToFetch.length>0){this.fetchBlocks(i);for(const M of L){const F=this.blockRequests.get(M);if(!F)throw new Error(`Block ${M} is not in the block requests`);l.set(M,F)}x=await Promise.allSettled(Array.from(l.values()))}}if(x.some(L=>L.status==="rejected"))throw i&&i.aborted?new ir("Request was aborted"):new Hr(x.filter(L=>L.status==="rejected").map(L=>L.reason),"Request failed");const w=x.map(L=>L.value),_=new Map(Yt(Array.from(l.keys()),w));for(const[L,M]of o)_.set(L,M);return this.readSliceData(s,_)}fetchBlocks(s){if(this.blockIdsToFetch.size>0){const i=this.groupBlocks(this.blockIdsToFetch),o=this.source.fetch(i,s);for(let l=0;l<i.length;++l){const v=i[l];for(const x of v.blockIds){const w=(async()=>{try{const _=(await o)[l],L=x*this.blockSize,M=L-_.offset,F=Math.min(M+this.blockSize,_.data.byteLength),U=_.data.slice(M,F),K=new ei(L,U.byteLength,U);return this.blockCache.set(x,K),K}catch(_){throw _.name==="AbortError"&&(_.signal=s),_}finally{this.blockRequests.delete(x)}})();this.blockRequests.set(x,w)}}this.blockIdsToFetch.clear()}}groupBlocks(s){const i=Array.from(s).sort((x,w)=>x-w);if(i.length===0)return[];let o=[],l=null;const v=[];for(const x of i)l===null||l+1===x?(o.push(x),l=x):(v.push(new Hi(o[0]*this.blockSize,o.length*this.blockSize,o)),o=[x],l=x);return v.push(new Hi(o[0]*this.blockSize,o.length*this.blockSize,o)),v}readSliceData(s,i){return s.map(o=>{const l=o.offset+o.length,v=Math.floor(o.offset/this.blockSize),x=Math.floor((o.offset+o.length)/this.blockSize),w=new ArrayBuffer(o.length),_=new Uint8Array(w);for(let L=v;L<=x;++L){const M=i.get(L),F=M.offset-o.offset,U=M.top-l;let K=0,Y=0,ne;F<0?K=-F:F>0&&(Y=F),U<0?ne=M.length-K:ne=l-M.offset-K;const q=new Uint8Array(M.data,K,ne);_.set(q,Y)}return w})}}class En{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(s){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class ti{constructor(s){this.url=s}async request({headers:s,credentials:i,signal:o}={}){throw new Error("request is not implemented")}}class Ma extends En{constructor(s){super(),this.response=s}get status(){return this.response.status}getHeader(s){return this.response.headers.get(s)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Da extends ti{constructor(s,i){super(s),this.credentials=i}async request({headers:s,credentials:i,signal:o}={}){const l=await fetch(this.url,{headers:s,credentials:i,signal:o});return new Ma(l)}}class Wr extends En{constructor(s,i){super(),this.xhr=s,this.data=i}get status(){return this.xhr.status}getHeader(s){return this.xhr.getResponseHeader(s)}async getData(){return this.data}}class Fn extends ti{constructRequest(s,i){return new Promise((o,l)=>{const v=new XMLHttpRequest;v.open("GET",this.url),v.responseType="arraybuffer";for(const[x,w]of Object.entries(s))v.setRequestHeader(x,w);v.onload=()=>{const x=v.response;o(new Wr(v,x))},v.onerror=l,v.onabort=()=>l(new ir("Request aborted")),v.send(),i&&(i.aborted&&v.abort(),i.addEventListener("abort",()=>v.abort()))})}async request({headers:s,signal:i}={}){return await this.constructRequest(s,i)}}var _o=T(39179),ri=T(75493),Gn=T(48714),zn=T(55872).Buffer;class Tn extends En{constructor(s,i){super(),this.response=s,this.dataPromise=i}get status(){return this.response.statusCode}getHeader(s){return this.response.headers[s]}async getData(){return await this.dataPromise}}class ni extends ti{constructor(s){super(s),this.parsedUrl=Gn.parse(this.url),this.httpApi=this.parsedUrl.protocol==="http:"?_o:ri}constructRequest(s,i){return new Promise((o,l)=>{const v=this.httpApi.get({...this.parsedUrl,headers:s},x=>{const w=new Promise(_=>{const L=[];x.on("data",M=>{L.push(M)}),x.on("end",()=>{const M=zn.concat(L).buffer;_(M)}),x.on("error",l)});o(new Tn(x,w))});v.on("error",l),i&&(i.aborted&&v.destroy(new ir("Request aborted")),i.addEventListener("abort",()=>v.destroy(new ir("Request aborted"))))})}async request({headers:s,signal:i}={}){return await this.constructRequest(s,i)}}class Jr extends sn{constructor(s,i,o,l){super(),this.client=s,this.headers=i,this.maxRanges=o,this.allowFullFile=l,this._fileSize=null}async fetch(s,i){return this.maxRanges>=s.length?this.fetchSlices(s,i):(this.maxRanges>0&&s.length>1,Promise.all(s.map(o=>this.fetchSlice(o,i))))}async fetchSlices(s,i){const o=await this.client.request({headers:{...this.headers,Range:`bytes=${s.map(({offset:l,length:v})=>`${l}-${l+v}`).join(",")}`},signal:i});if(o.ok)if(o.status===206){const{type:l,params:v}=rr(o.getHeader("content-type"));if(l==="multipart/byteranges"){const F=lr(await o.getData(),v.boundary);return this._fileSize=F[0].fileSize||null,F}const x=await o.getData(),{start:w,end:_,total:L}=nr(o.getHeader("content-range"));this._fileSize=L||null;const M=[{data:x,offset:w,length:_-w}];if(s.length>1){const F=await Promise.all(s.slice(1).map(U=>this.fetchSlice(U,i)));return M.concat(F)}return M}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const l=await o.getData();return this._fileSize=l.byteLength,[{data:l,offset:0,length:l.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(s,i){const{offset:o,length:l}=s,v=await this.client.request({headers:{...this.headers,Range:`bytes=${o}-${o+l}`},signal:i});if(v.ok)if(v.status===206){const x=await v.getData(),{total:w}=nr(v.getHeader("content-range"));return this._fileSize=w||null,{data:x,offset:o,length:l}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const x=await v.getData();return this._fileSize=x.byteLength,{data:x,offset:0,length:x.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Si(y,{blockSize:s,cacheSize:i}){return s===null?y:new Ca(y,s,i)}function ii(y,{headers:s={},credentials:i,maxRanges:o=0,allowFullFile:l=!1,...v}={}){const x=new Da(y,i),w=new Jr(x,s,o,l);return Si(w,v)}function ai(y,{headers:s={},maxRanges:i=0,allowFullFile:o=!1,...l}={}){const v=new Fn(y),x=new Jr(v,s,i,o);return Si(x,l)}function Na(y,{headers:s={},maxRanges:i=0,allowFullFile:o=!1,...l}={}){const v=new ni(y),x=new Jr(v,s,i,o);return Si(x,l)}function xn(y,{forceXHR:s=!1,...i}={}){return typeof fetch=="function"&&!s?ii(y,i):typeof XMLHttpRequest<"u"?ai(y,i):Na(y,i)}class qr extends sn{constructor(s){super(),this.file=s}async fetchSlice(s,i){return new Promise((o,l)=>{const v=this.file.slice(s.offset,s.offset+s.length),x=new FileReader;x.onload=w=>o(w.target.result),x.onerror=l,x.onabort=l,x.readAsArrayBuffer(v),i&&i.addEventListener("abort",()=>x.abort())})}}function bo(y){return new qr(y)}function er(y){switch(y){case j.sf.BYTE:case j.sf.ASCII:case j.sf.SBYTE:case j.sf.UNDEFINED:return 1;case j.sf.SHORT:case j.sf.SSHORT:return 2;case j.sf.LONG:case j.sf.SLONG:case j.sf.FLOAT:case j.sf.IFD:return 4;case j.sf.RATIONAL:case j.sf.SRATIONAL:case j.sf.DOUBLE:case j.sf.LONG8:case j.sf.SLONG8:case j.sf.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${y}`)}}function wi(y){const s=y.GeoKeyDirectory;if(!s)return null;const i={};for(let o=4;o<=s[3]*4;o+=4){const l=j.P1[s[o]],v=s[o+1]?j.L[s[o+1]]:null,x=s[o+2],w=s[o+3];let _=null;if(!v)_=w;else{if(_=y[v],typeof _>"u"||_===null)throw new Error(`Could not get value of geoKey '${l}'.`);typeof _=="string"?_=_.substring(w,w+x-1):_.subarray&&(_=_.subarray(w,w+x),x===1&&(_=_[0]))}i[l]=_}return i}function Ir(y,s,i,o){let l=null,v=null;const x=er(s);switch(s){case j.sf.BYTE:case j.sf.ASCII:case j.sf.UNDEFINED:l=new Uint8Array(i),v=y.readUint8;break;case j.sf.SBYTE:l=new Int8Array(i),v=y.readInt8;break;case j.sf.SHORT:l=new Uint16Array(i),v=y.readUint16;break;case j.sf.SSHORT:l=new Int16Array(i),v=y.readInt16;break;case j.sf.LONG:case j.sf.IFD:l=new Uint32Array(i),v=y.readUint32;break;case j.sf.SLONG:l=new Int32Array(i),v=y.readInt32;break;case j.sf.LONG8:case j.sf.IFD8:l=new Array(i),v=y.readUint64;break;case j.sf.SLONG8:l=new Array(i),v=y.readInt64;break;case j.sf.RATIONAL:l=new Uint32Array(i*2),v=y.readUint32;break;case j.sf.SRATIONAL:l=new Int32Array(i*2),v=y.readInt32;break;case j.sf.FLOAT:l=new Float32Array(i),v=y.readFloat32;break;case j.sf.DOUBLE:l=new Float64Array(i),v=y.readFloat64;break;default:throw new RangeError(`Invalid field type: ${s}`)}if(s===j.sf.RATIONAL||s===j.sf.SRATIONAL)for(let w=0;w<i;w+=2)l[w]=v.call(y,o+w*x),l[w+1]=v.call(y,o+(w*x+4));else for(let w=0;w<i;++w)l[w]=v.call(y,o+w*x);return s===j.sf.ASCII?new TextDecoder("utf-8").decode(l):l}class Wi{constructor(s,i,o){this.fileDirectory=s,this.geoKeyDirectory=i,this.nextIFDByteOffset=o}}class ar extends Error{constructor(s){super(`No image at index ${s}`),this.index=s}}class kr{async readRasters(s={}){const{window:i,width:o,height:l}=s;let{resX:v,resY:x,bbox:w}=s;const _=await this.getImage();let L=_;const M=await this.getImageCount(),F=_.getBoundingBox();if(i&&w)throw new Error('Both "bbox" and "window" passed.');if(o||l){if(i){const[Y,ne]=_.getOrigin(),[q,pe]=_.getResolution();w=[Y+i[0]*q,ne+i[1]*pe,Y+i[2]*q,ne+i[3]*pe]}const K=w||F;if(o){if(v)throw new Error("Both width and resX passed");v=(K[2]-K[0])/o}if(l){if(x)throw new Error("Both width and resY passed");x=(K[3]-K[1])/l}}if(v||x){const K=[];for(let Y=0;Y<M;++Y){const ne=await this.getImage(Y),{SubfileType:q,NewSubfileType:pe}=ne.fileDirectory;(Y===0||q===2||pe&1)&&K.push(ne)}K.sort((Y,ne)=>Y.getWidth()-ne.getWidth());for(let Y=0;Y<K.length;++Y){const ne=K[Y],q=(F[2]-F[0])/ne.getWidth(),pe=(F[3]-F[1])/ne.getHeight();if(L=ne,v&&v>q||x&&x>pe)break}}let U=i;if(w){const[K,Y]=_.getOrigin(),[ne,q]=L.getResolution(_);U=[Math.round((w[0]-K)/ne),Math.round((w[1]-Y)/q),Math.round((w[2]-K)/ne),Math.round((w[3]-Y)/q)],U=[Math.min(U[0],U[2]),Math.min(U[1],U[3]),Math.max(U[0],U[2]),Math.max(U[1],U[3])]}return L.readRasters({...s,window:U})}}class cr extends kr{constructor(s,i,o,l,v={}){super(),this.source=s,this.littleEndian=i,this.bigTiff=o,this.firstIFDOffset=l,this.cache=v.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(s,i){const o=this.bigTiff?4048:1024;return new Ti((await this.source.fetch([{offset:s,length:typeof i<"u"?i:o}]))[0],s,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(s){const i=this.bigTiff?20:12,o=this.bigTiff?8:2;let l=await this.getSlice(s);const v=this.bigTiff?l.readUint64(s):l.readUint16(s),x=v*i+(this.bigTiff?16:6);l.covers(s,x)||(l=await this.getSlice(s,x));const w={};let _=s+(this.bigTiff?8:2);for(let F=0;F<v;_+=i,++F){const U=l.readUint16(_),K=l.readUint16(_+2),Y=this.bigTiff?l.readUint64(_+4):l.readUint32(_+4);let ne,q;const pe=er(K),ie=_+(this.bigTiff?12:8);if(pe*Y<=(this.bigTiff?8:4))ne=Ir(l,K,Y,ie);else{const Ze=l.readOffset(ie),_e=er(K)*Y;if(l.covers(Ze,_e))ne=Ir(l,K,Y,Ze);else{const Ie=await this.getSlice(Ze,_e);ne=Ir(Ie,K,Y,Ze)}}Y===1&&j.It.indexOf(U)===-1&&!(K===j.sf.RATIONAL||K===j.sf.SRATIONAL)?q=ne[0]:q=ne,w[j.L[U]]=q}const L=wi(w),M=l.readOffset(s+o+i*v);return new Wi(w,L,M)}async requestIFD(s){if(this.ifdRequests[s])return this.ifdRequests[s];if(s===0)return this.ifdRequests[s]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[s];if(!this.ifdRequests[s-1])try{this.ifdRequests[s-1]=this.requestIFD(s-1)}catch(i){throw i instanceof ar?new ar(s):i}return this.ifdRequests[s]=(async()=>{const i=await this.ifdRequests[s-1];if(i.nextIFDByteOffset===0)throw new ar(s);return this.parseFileDirectoryAt(i.nextIFDByteOffset)})(),this.ifdRequests[s]}async getImage(s=0){const i=await this.requestIFD(s);return new Yi(i.fileDirectory,i.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let s=0,i=!0;for(;i;)try{await this.requestIFD(s),++s}catch(o){if(o instanceof ar)i=!1;else throw o}return s}async getGhostValues(){const s=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const i="GDAL_STRUCTURAL_METADATA_SIZE=",o=i.length+100;let l=await this.getSlice(s,o);if(i===Ir(l,j.sf.ASCII,i.length,s)){const x=Ir(l,j.sf.ASCII,o,s).split(`
`)[0],w=Number(x.split("=")[1].split(" ")[0])+x.length;w>o&&(l=await this.getSlice(s,w));const _=Ir(l,j.sf.ASCII,w,s);this.ghostValues={},_.split(`
`).filter(L=>L.length>0).map(L=>L.split("=")).forEach(([L,M])=>{this.ghostValues[L]=M})}return this.ghostValues}static async fromSource(s,i,o){const l=(await s.fetch([{offset:0,length:1024}],o))[0],v=new Dn(l),x=v.getUint16(0,0);let w;if(x===18761)w=!0;else if(x===19789)w=!1;else throw new TypeError("Invalid byte order value.");const _=v.getUint16(2,w);let L;if(_===42)L=!1;else if(_===43){if(L=!0,v.getUint16(4,w)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const M=L?v.getUint64(8,w):v.getUint32(4,w);return new cr(s,w,L,M,i)}close(){return typeof this.source.close=="function"?this.source.close():!1}}var Fa=null;class Qr extends kr{constructor(s,i){super(),this.mainFile=s,this.overviewFiles=i,this.imageFiles=[s].concat(i),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const s=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(i=>i.parseFileDirectoryAt(i.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(s),this.fileDirectoriesPerFile}async getImage(s=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let i=0,o=0;for(let l=0;l<this.imageFiles.length;l++){const v=this.imageFiles[l];for(let x=0;x<this.imageCounts[l];x++){if(s===i){const w=await v.requestIFD(o);return new Yi(w.fileDirectory,w.geoKeyDirectory,v.dataView,v.littleEndian,v.cache,v.source)}i++,o++}o=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const s=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(i=>i.getImageCount()));return this.imageCounts=await Promise.all(s),this.imageCount=this.imageCounts.reduce((i,o)=>i+o,0),this.imageCount}}async function Ga(y,s={},i){return cr.fromSource(xn(y,s),i)}async function Zn(y,s){return cr.fromSource(makeBufferSource(y),s)}async function pr(y,s){return cr.fromSource(makeFileSource(y),s)}async function oi(y,s){return cr.fromSource(bo(y),s)}async function Ji(y,s=[],i={},o){const l=await cr.fromSource(xn(y,i),o),v=await Promise.all(s.map(x=>cr.fromSource(xn(x,i))));return new Qr(l,v)}function za(y,s){return writeGeotiff(y,s)}var Ii=T(77767),Ri=T(16658),si=T(49500),qi=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),$r="STATISTICS_MAXIMUM",_i="STATISTICS_MINIMUM",bi;function Za(){return bi||(bi=new te),bi}function Ua(y){try{return y.getBoundingBox()}catch{var s=y.fileDirectory;return[0,0,s.ImageWidth,s.ImageLength]}}function Ai(y){try{return y.getOrigin().slice(0,2)}catch{return[0,y.fileDirectory.ImageLength]}}function Pi(y,s){try{return y.getResolution(s)}catch{return[s.fileDirectory.ImageWidth/y.fileDirectory.ImageWidth,s.fileDirectory.ImageHeight/y.fileDirectory.ImageHeight]}}function Li(y){var s=y.geoKeys;if(!s)return null;if(s.ProjectedCSTypeGeoKey){var i="EPSG:"+s.ProjectedCSTypeGeoKey,o=(0,Q.get)(i);if(!o){var l=(0,Ri.Ne)(s.ProjLinearUnitsGeoKey);l&&(o=new Q.Projection({code:i,units:l}))}return o}if(s.GeographicTypeGeoKey){var i="EPSG:"+s.GeographicTypeGeoKey,o=(0,Q.get)(i);if(!o){var l=(0,Ri.Ne)(s.GeogAngularUnitsGeoKey);l&&(o=new Q.Projection({code:i,units:l}))}return o}return null}function Oi(y){return y.getImageCount().then(function(s){for(var i=new Array(s),o=0;o<s;++o)i[o]=y.getImage(o);return Promise.all(i)})}function Qi(y,s){var i;return y.blob?i=oi(y.blob):y.overviews?i=Ji(y.url,y.overviews,s):i=Ga(y.url,s),i.then(Oi)}function un(y,s,i,o,l){if(Array.isArray(y)){var v=y.length;if(!Array.isArray(s)||v!=s.length){var x=new Error(o);throw l(x),x}for(var w=0;w<v;++w)un(y[w],s[w],i,o,l);return}if(s=s,Math.abs(y-s)>i*y)throw new Error(o)}function Ba(y){return y instanceof Int8Array?-128:y instanceof Int16Array?-32768:y instanceof Int32Array?-2147483648:y instanceof Float32Array?12e-39:0}function ka(y){return y instanceof Int8Array?127:y instanceof Uint8Array||y instanceof Uint8ClampedArray?255:y instanceof Int16Array?32767:y instanceof Uint16Array?65535:y instanceof Int32Array?2147483647:y instanceof Uint32Array?4294967295:y instanceof Float32Array?34e37:255}var $i=function(y){qi(s,y);function s(i){var o=y.call(this,{state:"loading",tileGrid:null,projection:null,opaque:i.opaque,transition:i.transition,interpolate:i.interpolate!==!1,wrapX:i.wrapX})||this;o.sourceInfo_=i.sources;var l=o.sourceInfo_.length;o.sourceOptions_=i.sourceOptions,o.sourceImagery_=new Array(l),o.resolutionFactors_=new Array(l),o.samplesPerPixel_,o.nodataValues_,o.metadata_,o.normalize_=i.normalize!==!1,o.addAlpha_=!1,o.error_=null,o.readMethod_=i.convertToRGB?"readRGB":"readRasters",o.setKey(o.sourceInfo_.map(function(_){return _.url}).join(","));for(var v=o,x=new Array(l),w=0;w<l;++w)x[w]=Qi(o.sourceInfo_[w],o.sourceOptions_);return Promise.all(x).then(function(_){v.configure_(_)}).catch(function(_){si.error(_),v.error_=_,v.setState("error")}),o}return s.prototype.getError=function(){return this.error_},s.prototype.configure_=function(i){for(var o,l,v,x,w,_=new Array(i.length),L=new Array(i.length),M=new Array(i.length),F=0,U=i.length,K=function(He){var Ot=i[He],Ct=Ot.length,Zt=void 0,At=void 0,fe=new Array(Ct),kt=new Array(Ct),_t=new Array(Ct);L[He]=new Array(Ct),M[He]=new Array(Ct);for(var xt=0;xt<Ct;++xt){var mt=Ot[xt],Pt=mt.getGDALNoData();M[He][xt]=mt.getGDALMetadata(0),L[He][xt]=Pt;var Rr=Y.sourceInfo_[He].bands;_[He]=Rr?Rr.length:mt.getSamplesPerPixel();var sr=Ct-(xt+1);Zt||(Zt=Ua(mt)),At||(At=Ai(mt));var bt=Pi(mt,Ot[0]);_t[sr]=bt[0];var jt=[mt.getTileWidth(),mt.getTileHeight()];fe[sr]=jt;var Ue=bt[0]/Math.abs(bt[1]);kt[sr]=[jt[0],jt[1]/Ue]}if(o?(0,ae.getIntersection)(o,Zt,o):o=Zt,!l)l=At;else{var vr="Origin mismatch for source ".concat(He,", got [").concat(At,"] but expected [").concat(l,"]");un(l,At,0,vr,Y.viewRejector)}if(!w)w=_t,Y.resolutionFactors_[He]=1;else{w.length-F>_t.length&&(F=w.length-_t.length);var xr=w[w.length-1]/_t[_t.length-1];Y.resolutionFactors_[He]=xr;var ur=_t.map(function(di){return di*=xr}),vr="Resolution mismatch for source ".concat(He,", got [").concat(ur,"] but expected [").concat(w,"]");un(w.slice(F,w.length),ur,.02,vr,Y.viewRejector)}v?un(v.slice(F,v.length),kt,.01,"Tile size mismatch for source ".concat(He),Y.viewRejector):v=kt,x?un(x.slice(F,x.length),fe,0,"Tile size mismatch for source ".concat(He),Y.viewRejector):x=fe,Y.sourceImagery_[He]=Ot.reverse()},Y=this,ne=0;ne<U;++ne)K(ne);for(var q=0,pe=this.sourceImagery_.length;q<pe;++q)for(var ie=this.sourceImagery_[q];ie.length<w.length;)ie.unshift(void 0);if(!this.getProjection())for(var Ze=i[0],q=Ze.length-1;q>=0;--q){var _e=Ze[q],Ie=Li(_e);if(Ie){this.projection=Ie;break}}this.samplesPerPixel_=_,this.nodataValues_=L,this.metadata_=M;e:for(var ne=0;ne<U;++ne){if(this.sourceInfo_[ne].nodata!==void 0){this.addAlpha_=!0;break}var Oe=L[ne],Je=this.sourceInfo_[ne].bands;if(Je){for(var q=0;q<Je.length;++q)if(Oe[Je[q]-1]!==null){this.addAlpha_=!0;break e}continue}for(var it=0;it<Oe.length;++it)if(Oe[it]!==null){this.addAlpha_=!0;break e}}var Ke=this.addAlpha_?1:0;this.bandCount=_.reduce(function(He,Ot){return He+=Ot,He},0)+Ke;var ft=new Gr.default({extent:o,minZoom:F,origin:l,resolutions:w,tileSizes:v});this.tileGrid=ft,this.setTileSizes(x),this.setLoader(this.loadTile_.bind(this)),this.setState("ready"),this.viewResolver({projection:this.projection,resolutions:w,center:(0,Q.toUserCoordinate)((0,ae.getCenter)(o),this.projection),extent:(0,Q.toUserExtent)(o,this.projection),zoom:0})},s.prototype.loadTile_=function(i,o,l){for(var v=this.getTileSize(i),x=this.sourceImagery_.length,w=new Array(x),_=this.addAlpha_,L=this.bandCount,M=this.samplesPerPixel_,F=this.nodataValues_,U=this.sourceInfo_,K=function(_e){var Ie=U[_e],Oe=Y.resolutionFactors_[_e],Je=[Math.round(o*(v[0]*Oe)),Math.round(l*(v[1]*Oe)),Math.round((o+1)*(v[0]*Oe)),Math.round((l+1)*(v[1]*Oe))],it=Y.sourceImagery_[_e][i],Ke=void 0;Ie.bands&&(Ke=Ie.bands.map(function(He){return He-1}));var ft=void 0;"nodata"in Ie&&Ie.nodata!==null?ft=Ie.nodata:Ke?ft=Ke.map(function(He){return F[_e][He]}):ft=F[_e],w[_e]=it[Y.readMethod_]({window:Je,width:v[0],height:v[1],samples:Ke,fillValue:ft,pool:Za(),interleave:!1})},Y=this,ne=0;ne<x;++ne)K(ne);var q=v[0]*v[1],pe=q*L,ie=this.normalize_,Ze=this.metadata_;return Promise.all(w).then(function(_e){var Ie;ie?Ie=new Uint8Array(pe):Ie=new Float32Array(pe);for(var Oe=0,Je=0;Je<q;++Je){for(var it=_,Ke=0;Ke<x;++Ke){var ft=U[Ke],He=ft.min,Ot=ft.max,Ct=void 0,Zt=void 0;if(ie){var At=Ze[Ke][0];He===void 0&&(At&&_i in At?He=parseFloat(At[_i]):He=Ba(_e[Ke][0])),Ot===void 0&&(At&&$r in At?Ot=parseFloat(At[$r]):Ot=ka(_e[Ke][0])),Ct=255/(Ot-He),Zt=-He*Ct}for(var fe=0;fe<M[Ke];++fe){var kt=_e[Ke][fe][Je],_t=void 0;if(ie?_t=(0,Ii.uZ)(Ct*kt+Zt,0,255):_t=kt,!_)Ie[Oe]=_t;else{var xt=ft.nodata;if(xt===void 0){var mt=void 0;ft.bands?mt=ft.bands[fe]-1:mt=fe,xt=F[Ke][mt]}var Pt=isNaN(xt);(!Pt&&kt!==xt||Pt&&!isNaN(kt))&&(it=!1,Ie[Oe]=_t)}Oe++}}_&&(it||(Ie[Oe]=255),Oe++)}return Ie}).catch(function(_e){throw si.error(_e),_e})},s}(on);$i.prototype.getView;var ja=$i,ui=T(82325),li=T(73543),Sn=T(12059),Gt=T(87586),wn=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),or={DEFAULT:"default",TRUNCATED:"truncated"},Lr=function(y){wn(s,y);function s(i,o,l,v,x,w,_){var L=y.call(this,o,l,v,x,w,_)||this;return L.zoomifyImage_=null,L.tileSize_=i,L}return s.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var i=y.prototype.getImage.call(this);if(this.state==gt.Z.LOADED){var o=this.tileSize_;if(i.width==o[0]&&i.height==o[1])return this.zoomifyImage_=i,i;var l=(0,Gt.E4)(o[0],o[1]);return l.drawImage(i,0,0),this.zoomifyImage_=l.canvas,l.canvas}else return i},s}(li.Z),en=function(y){wn(s,y);function s(i){var o=this,l=i,v=l.imageSmoothing!==void 0?l.imageSmoothing:!0;l.interpolate!==void 0&&(v=l.interpolate);var x=l.size,w=l.tierSizeCalculation!==void 0?l.tierSizeCalculation:or.DEFAULT,_=l.tilePixelRatio||1,L=x[0],M=x[1],F=[],U=l.tileSize||ui.S,K=U*_;switch(w){case or.DEFAULT:for(;L>K||M>K;)F.push([Math.ceil(L/K),Math.ceil(M/K)]),K+=K;break;case or.TRUNCATED:for(var Y=L,ne=M;Y>K||ne>K;)F.push([Math.ceil(Y/K),Math.ceil(ne/K)]),Y>>=1,ne>>=1;break;default:(0,Sn.h)(!1,53);break}F.push([1,1]),F.reverse();for(var q=[_],pe=[0],ie=1,Ze=F.length;ie<Ze;ie++)q.push(_<<ie),pe.push(F[ie-1][0]*F[ie-1][1]+pe[ie-1]);q.reverse();var _e=new Gr.default({tileSize:U,extent:l.extent||[0,-M,L,0],resolutions:q}),Ie=l.url;Ie&&Ie.indexOf("{TileGroup}")==-1&&Ie.indexOf("{tileIndex}")==-1&&(Ie+="{TileGroup}/{z}-{x}-{y}.jpg");var Oe=(0,Be.Gk)(Ie),Je=U*_;function it(Zt){return function(At,fe,kt){if(At){var _t=At[0],xt=At[1],mt=At[2],Pt=xt+mt*F[_t][0],Rr=(Pt+pe[_t])/Je|0,sr={z:_t,x:xt,y:mt,tileIndex:Pt,TileGroup:"TileGroup"+Rr};return Zt.replace(/\{(\w+?)\}/g,function(bt,jt){return sr[jt]})}else return}}var Ke=(0,Be.Un)(Oe.map(it)),ft=Lr.bind(null,(0,wr.Pq)(U*_));o=y.call(this,{attributions:l.attributions,cacheSize:l.cacheSize,crossOrigin:l.crossOrigin,interpolate:v,projection:l.projection,tilePixelRatio:_,reprojectionErrorThreshold:l.reprojectionErrorThreshold,tileClass:ft,tileGrid:_e,tileUrlFunction:Ke,transition:l.transition})||this,o.zDirection=l.zDirection;var He=_e.getTileCoordForCoordAndResolution((0,ae.getCenter)(_e.getExtent()),q[q.length-1]),Ot=Ke(He,1,null),Ct=new Image;return Ct.addEventListener("error",function(){Je=U,this.changed()}.bind(o)),Ct.src=Ot,o}return s}(Ne.default),ln=en,hr=T(46410),zt=T(55631),fn=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}();function dr(y){return y.toLocaleString("en",{maximumFractionDigits:10})}var ea=function(y){fn(s,y);function s(i){var o=this,l=i||{},v=l.imageSmoothing!==void 0?l.imageSmoothing:!0;l.interpolate!==void 0&&(v=l.interpolate);var x=l.url||"";x=x+(x.lastIndexOf("/")===x.length-1||x===""?"":"/");var w=l.version||hr.L.VERSION2,_=l.sizes||[],L=l.size;(0,Sn.h)(L!=null&&Array.isArray(L)&&L.length==2&&!isNaN(L[0])&&L[0]>0&&!isNaN(L[1])&&L[1]>0,60);var M=L[0],F=L[1],U=l.tileSize,K=l.tilePixelRatio||1,Y=l.format||"jpg",ne=l.quality||(l.version==hr.L.VERSION1?"native":"default"),q=l.resolutions||[],pe=l.supports||[],ie=l.extent||[0,-F,M,0],Ze=_!=null&&Array.isArray(_)&&_.length>0,_e=U!==void 0&&(typeof U=="number"&&Number.isInteger(U)&&U>0||Array.isArray(U)&&U.length>0),Ie=pe!=null&&Array.isArray(pe)&&((0,zt.q9)(pe,"regionByPx")||(0,zt.q9)(pe,"regionByPct"))&&((0,zt.q9)(pe,"sizeByWh")||(0,zt.q9)(pe,"sizeByH")||(0,zt.q9)(pe,"sizeByW")||(0,zt.q9)(pe,"sizeByPct")),Oe,Je,it;if(q.sort(function(fe,kt){return kt-fe}),_e||Ie)if(U!=null&&(typeof U=="number"&&Number.isInteger(U)&&U>0?(Oe=U,Je=U):Array.isArray(U)&&U.length>0&&((U.length==1||U[1]==null&&Number.isInteger(U[0]))&&(Oe=U[0],Je=U[0]),U.length==2&&(Number.isInteger(U[0])&&Number.isInteger(U[1])?(Oe=U[0],Je=U[1]):U[0]==null&&Number.isInteger(U[1])&&(Oe=U[1],Je=U[1])))),(Oe===void 0||Je===void 0)&&(Oe=ui.S,Je=ui.S),q.length==0){it=Math.max(Math.ceil(Math.log(M/Oe)/Math.LN2),Math.ceil(Math.log(F/Je)/Math.LN2));for(var Ke=it;Ke>=0;Ke--)q.push(Math.pow(2,Ke))}else{var ft=Math.max.apply(Math,q);it=Math.round(Math.log(ft)/Math.LN2)}else if(Oe=M,Je=F,q=[],Ze){_.sort(function(fe,kt){return fe[0]-kt[0]}),it=-1;for(var He=[],Ke=0;Ke<_.length;Ke++){var Ot=M/_[Ke][0];if(q.length>0&&q[q.length-1]==Ot){He.push(Ke);continue}q.push(Ot),it++}if(He.length>0)for(var Ke=0;Ke<He.length;Ke++)_.splice(He[Ke]-Ke,1)}else q.push(1),_.push([M,F]),it=0;var Ct=new Gr.default({tileSize:[Oe,Je],extent:ie,origin:(0,ae.getTopLeft)(ie),resolutions:q}),Zt=function(fe,kt,_t){var xt,mt,Pt=fe[0];if(!(Pt>it)){var Rr=fe[1],sr=fe[2],bt=q[Pt];if(!(Rr===void 0||sr===void 0||bt===void 0||Rr<0||Math.ceil(M/bt/Oe)<=Rr||sr<0||Math.ceil(F/bt/Je)<=sr)){if(Ie||_e){var jt=Rr*Oe*bt,Ue=sr*Je*bt,vr=Oe*bt,xr=Je*bt,ur=Oe,Hn=Je;if(jt+vr>M&&(vr=M-jt),Ue+xr>F&&(xr=F-Ue),jt+Oe*bt>M&&(ur=Math.floor((M-jt+bt-1)/bt)),Ue+Je*bt>F&&(Hn=Math.floor((F-Ue+bt-1)/bt)),jt==0&&vr==M&&Ue==0&&xr==F)xt="full";else if(!Ie||(0,zt.q9)(pe,"regionByPx"))xt=jt+","+Ue+","+vr+","+xr;else if((0,zt.q9)(pe,"regionByPct")){var di=dr(jt/M*100),Ea=dr(Ue/F*100),co=dr(vr/M*100),Ta=dr(xr/F*100);xt="pct:"+di+","+Ea+","+co+","+Ta}w==hr.L.VERSION3&&(!Ie||(0,zt.q9)(pe,"sizeByWh"))?mt=ur+","+Hn:!Ie||(0,zt.q9)(pe,"sizeByW")?mt=ur+",":(0,zt.q9)(pe,"sizeByH")?mt=","+Hn:(0,zt.q9)(pe,"sizeByWh")?mt=ur+","+Hn:(0,zt.q9)(pe,"sizeByPct")&&(mt="pct:"+dr(100/bt))}else if(xt="full",Ze){var Wn=_[Pt][0],xa=_[Pt][1];w==hr.L.VERSION3?Wn==M&&xa==F?mt="max":mt=Wn+","+xa:Wn==M?mt="full":mt=Wn+","}else mt=w==hr.L.VERSION3?"max":"full";return x+xt+"/"+mt+"/0/"+ne+"."+Y}}},At=Lr.bind(null,(0,wr.Pq)(U||256).map(function(fe){return fe*K}));return o=y.call(this,{attributions:l.attributions,attributionsCollapsible:l.attributionsCollapsible,cacheSize:l.cacheSize,crossOrigin:l.crossOrigin,interpolate:v,projection:l.projection,reprojectionErrorThreshold:l.reprojectionErrorThreshold,state:l.state,tileClass:At,tileGrid:Ct,tilePixelRatio:l.tilePixelRatio,tileUrlFunction:Zt,transition:l.transition})||this,o.zDirection=l.zDirection,o}return s}(Ne.default),Ci=ea,Or=T(34302),Xa=T(31840),ta=T(77022),Va=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),ra=function(y){Va(s,y);function s(i){var o=this,l=i||{},v=l.imageSmoothing!==void 0?l.imageSmoothing:!0;return l.interpolate!==void 0&&(v=l.interpolate),o=y.call(this,{attributions:l.attributions,interpolate:v,projection:l.projection,resolutions:l.resolutions,state:l.state})||this,o.canvasFunction_=l.canvasFunction,o.canvas_=null,o.renderedRevision_=0,o.ratio_=l.ratio!==void 0?l.ratio:1.5,o}return s.prototype.getImageInternal=function(i,o,l,v){o=this.findNearestResolution(o);var x=this.canvas_;if(x&&this.renderedRevision_==this.getRevision()&&x.getResolution()==o&&x.getPixelRatio()==l&&(0,ae.containsExtent)(x.getExtent(),i))return x;i=i.slice(),(0,ae.scaleFromCenter)(i,this.ratio_);var w=(0,ae.getWidth)(i)/o,_=(0,ae.getHeight)(i)/o,L=[w*l,_*l],M=this.canvasFunction_.call(this,i,o,l,L,v);return M&&(x=new ta.Z(i,o,l,M)),this.canvas_=x,this.renderedRevision_=this.getRevision(),x},s}(Or.ZP),Mi=ra,na=T(18421),Ya=T(10416),Ka=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ha=function(y){Ka(s,y);function s(i){var o=this,l=i.imageSmoothing!==void 0?i.imageSmoothing:!0;return i.interpolate!==void 0&&(l=i.interpolate),o=y.call(this,{interpolate:l,projection:i.projection,resolutions:i.resolutions})||this,o.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null,o.displayDpi_=i.displayDpi!==void 0?i.displayDpi:96,o.params_=i.params||{},o.url_=i.url,o.imageLoadFunction_=i.imageLoadFunction!==void 0?i.imageLoadFunction:Or.r6,o.hidpi_=i.hidpi!==void 0?i.hidpi:!0,o.metersPerUnit_=i.metersPerUnit!==void 0?i.metersPerUnit:1,o.ratio_=i.ratio!==void 0?i.ratio:1,o.useOverlay_=i.useOverlay!==void 0?i.useOverlay:!1,o.image_=null,o.renderedRevision_=0,o}return s.prototype.getParams=function(){return this.params_},s.prototype.getImageInternal=function(i,o,l,v){o=this.findNearestResolution(o),l=this.hidpi_?l:1;var x=this.image_;if(x&&this.renderedRevision_==this.getRevision()&&x.getResolution()==o&&x.getPixelRatio()==l&&(0,ae.containsExtent)(x.getExtent(),i))return x;this.ratio_!=1&&(i=i.slice(),(0,ae.scaleFromCenter)(i,this.ratio_));var w=(0,ae.getWidth)(i)/o,_=(0,ae.getHeight)(i)/o,L=[w*l,_*l];if(this.url_!==void 0){var M=this.getUrl(this.url_,this.params_,i,L,v);x=new na.Z(i,o,l,M,this.crossOrigin_,this.imageLoadFunction_),x.addEventListener(_r.Z.CHANGE,this.handleImageChange.bind(this))}else x=null;return this.image_=x,this.renderedRevision_=this.getRevision(),x},s.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},s.prototype.updateParams=function(i){(0,R.f0)(this.params_,i),this.changed()},s.prototype.getUrl=function(i,o,l,v,x){var w=Wa(l,v,this.metersPerUnit_,this.displayDpi_),_=(0,ae.getCenter)(l),L={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(v[0]),SETDISPLAYHEIGHT:Math.round(v[1]),SETVIEWSCALE:w,SETVIEWCENTERX:_[0],SETVIEWCENTERY:_[1]};return(0,R.f0)(L,o),(0,Ya.B)(i,L)},s.prototype.setImageLoadFunction=function(i){this.image_=null,this.imageLoadFunction_=i,this.changed()},s}(Or.ZP);function Wa(y,s,i,o){var l=(0,ae.getWidth)(y),v=(0,ae.getHeight)(y),x=s[0],w=s[1],_=.0254/o;return w*l>x*v?l*i/(x*_):v*i/(w*_)}var In=Ha,Ja=T(87710),qa=T(60133),Qa=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),$a=function(y){Qa(s,y);function s(i){var o=this,l=i.crossOrigin!==void 0?i.crossOrigin:null,v=i.imageLoadFunction!==void 0?i.imageLoadFunction:Or.r6,x=i.imageSmoothing!==void 0?i.imageSmoothing:!0;return i.interpolate!==void 0&&(x=i.interpolate),o=y.call(this,{attributions:i.attributions,interpolate:x,projection:(0,Q.get)(i.projection)})||this,o.url_=i.url,o.imageExtent_=i.imageExtent,o.image_=new na.Z(o.imageExtent_,void 0,1,o.url_,l,v),o.imageSize_=i.imageSize?i.imageSize:null,o.image_.addEventListener(_r.Z.CHANGE,o.handleImageChange.bind(o)),o}return s.prototype.getImageExtent=function(){return this.imageExtent_},s.prototype.getImageInternal=function(i,o,l,v){return(0,ae.intersects)(i,this.image_.getExtent())?this.image_:null},s.prototype.getUrl=function(){return this.url_},s.prototype.handleImageChange=function(i){if(this.image_.getState()==Ja.Z.LOADED){var o=this.image_.getExtent(),l=this.image_.getImage(),v=void 0,x=void 0;this.imageSize_?(v=this.imageSize_[0],x=this.imageSize_[1]):(v=l.width,x=l.height);var w=(0,ae.getWidth)(o),_=(0,ae.getHeight)(o),L=w/v,M=_/x,F=v,U=x;if(L>M?F=Math.round(w/M):U=Math.round(_/L),F!==v||U!==x){var K=(0,Gt.E4)(F,U);this.getInterpolate()||(0,R.f0)(K,qa.$);var Y=K.canvas;K.drawImage(l,0,0,v,x,0,0,Y.width,Y.height),this.image_.setImage(Y)}}y.prototype.handleImageChange.call(this,i)},s}(Or.ZP),eo=$a,to=T(28261),cn=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),tn='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Di=function(y){cn(s,y);function s(i){var o=i||{},l=o.imageSmoothing!==void 0?o.imageSmoothing:!0;o.interpolate!==void 0&&(l=o.interpolate);var v;o.attributions!==void 0?v=o.attributions:v=[tn];var x=o.crossOrigin!==void 0?o.crossOrigin:"anonymous",w=o.url!==void 0?o.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return y.call(this,{attributions:v,attributionsCollapsible:!1,cacheSize:o.cacheSize,crossOrigin:x,interpolate:l,maxZoom:o.maxZoom!==void 0?o.maxZoom:19,opaque:o.opaque!==void 0?o.opaque:!0,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileLoadFunction:o.tileLoadFunction,transition:o.transition,url:w,wrapX:o.wrapX,zDirection:o.zDirection})||this}return s}(G.Z),ia=Di,Un=T(84899),Ni=T(32450),fi=T(1058),jr=T(17928),Fi=T(13927),Rn=T(58096),aa=T(73226),ro=T(55872).Buffer,Gi=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),zi=!0;try{new ImageData(10,10)}catch{zi=!1}var Bn;function oa(y,s,i){if(zi)return new ImageData(y,s,i);Bn||(Bn=document.createElement("canvas").getContext("2d"));var o=Bn.createImageData(s,i);return o.data.set(y),o}function kn(y){var s=!0;try{new ImageData(10,10)}catch{s=!1}function i(o,l,v){return s?new ImageData(o,l,v):{data:o,width:l,height:v}}return function(o){var l=o.buffers,v=o.meta,x=o.imageOps,w=o.width,_=o.height,L=l.length,M=l[0].byteLength;if(x){for(var F=new Array(L),U=0;U<L;++U)F[U]=i(new Uint8ClampedArray(l[U]),w,_);var K=y(F,v).data;return K.buffer}for(var Y=new Uint8ClampedArray(M),ne=new Array(L),q=new Array(L),U=0;U<L;++U)ne[U]=new Uint8ClampedArray(l[U]),q[U]=[0,0,0,0];for(var pe=0;pe<M;pe+=4){for(var ie=0;ie<L;++ie){var Ze=ne[ie];q[ie][0]=Ze[pe],q[ie][1]=Ze[pe+1],q[ie][2]=Ze[pe+2],q[ie][3]=Ze[pe+3]}var _e=y(q,v);Y[pe]=_e[0],Y[pe+1]=_e[1],Y[pe+2]=_e[2],Y[pe+3]=_e[3]}return Y.buffer}}function ci(y,s){var i=Object.keys(y.lib||{}).map(function(v){return"var "+v+" = "+y.lib[v].toString()+";"}),o=i.concat(["var __minion__ = ("+kn.toString()+")(",y.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),l=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+ro.from(o.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(o,{type:"text/javascript"})));return l.addEventListener("message",s),l}function jn(y,s){var i=kn(y.operation),o=!1;return{postMessage:function(l){setTimeout(function(){o||s({data:{buffer:i(l),meta:l.meta}})},0)},terminate:function(){o=!0}}}var no=function(y){Gi(s,y);function s(i){var o=y.call(this)||this;o._imageOps=!!i.imageOps;var l;i.threads===0?l=0:o._imageOps?l=1:l=i.threads||1;var v=new Array(l);if(l)for(var x=0;x<l;++x)v[x]=ci(i,o._onWorkerMessage.bind(o,x));else v[0]=jn(i,o._onWorkerMessage.bind(o,0));return o._workers=v,o._queue=[],o._maxQueueLength=i.queue||1/0,o._running=0,o._dataLookup={},o._job=null,o}return s.prototype.process=function(i,o,l){this._enqueue({inputs:i,meta:o,callback:l}),this._dispatch()},s.prototype._enqueue=function(i){for(this._queue.push(i);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},s.prototype._dispatch=function(){if(!(this._running||this._queue.length===0)){var i=this._queue.shift();this._job=i;var o=i.inputs[0].width,l=i.inputs[0].height,v=i.inputs.map(function(Y){return Y.data.buffer}),x=this._workers.length;if(this._running=x,x===1){this._workers[0].postMessage({buffers:v,meta:i.meta,imageOps:this._imageOps,width:o,height:l},v);return}for(var w=i.inputs[0].data.length,_=4*Math.ceil(w/4/x),L=0;L<x;++L){for(var M=L*_,F=[],U=0,K=v.length;U<K;++U)F.push(v[U].slice(M,M+_));this._workers[L].postMessage({buffers:F,meta:i.meta,imageOps:this._imageOps,width:o,height:l},F)}}},s.prototype._onWorkerMessage=function(i,o){this.disposed||(this._dataLookup[i]=o.data,--this._running,this._running===0&&this._resolveJob())},s.prototype._resolveJob=function(){var i=this._job,o=this._workers.length,l,v;if(o===1)l=new Uint8ClampedArray(this._dataLookup[0].buffer),v=this._dataLookup[0].meta;else{var x=i.inputs[0].data.length;l=new Uint8ClampedArray(x),v=new Array(o);for(var w=4*Math.ceil(x/4/o),_=0;_<o;++_){var L=this._dataLookup[_].buffer,M=_*w;l.set(new Uint8ClampedArray(L),M),v[_]=this._dataLookup[_].meta}}this._job=null,this._dataLookup={},i.callback(null,oa(l,i.inputs[0].width,i.inputs[0].height),v),this._dispatch()},s.prototype.disposeInternal=function(){for(var i=0;i<this._workers.length;++i)this._workers[i].terminate();this._workers.length=0},s}(Un.Z),Xn={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"},sa={PIXEL:"pixel",IMAGE:"image"},ua=function(y){Gi(s,y);function s(i,o,l){var v=y.call(this,i)||this;return v.extent=o.extent,v.resolution=o.viewState.resolution/o.pixelRatio,v.data=l,v}return s}(Ni.ZP),la=function(y){Gi(s,y);function s(i){var o=y.call(this,{projection:null})||this;o.on,o.once,o.un,o.processor_=null,o.operationType_=i.operationType!==void 0?i.operationType:sa.PIXEL,o.threads_=i.threads!==void 0?i.threads:1,o.layers_=io(i.sources);for(var l=o.changed.bind(o),v=0,x=o.layers_.length;v<x;++v)o.layers_[v].addEventListener(_r.Z.CHANGE,l);return o.tileQueue_=new Rn.Z(function(){return 1},o.changed.bind(o)),o.requestedFrameState_,o.renderedImageCanvas_=null,o.renderedRevision_,o.frameState_={animate:!1,coordinateToPixelTransform:(0,aa.Ue)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:ca(o.layers_),pixelRatio:1,pixelToCoordinateTransform:(0,aa.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:o.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,Nr.sq)(o),renderTargets:{}},o.setAttributions(function(w){for(var _=[],L=0,M=i.sources.length;L<M;++L){var F=i.sources[L],U=F instanceof jr.Z?F:F.getSource(),K=U.getAttributions();if(typeof K=="function"){var Y=K(w);_.push.apply(_,Y)}}return _.length!==0?_:null}),i.operation!==void 0&&o.setOperation(i.operation,i.lib),o}return s.prototype.setOperation=function(i,o){this.processor_&&this.processor_.dispose(),this.processor_=new no({operation:i,imageOps:this.operationType_===sa.IMAGE,queue:1,lib:o,threads:this.threads_}),this.changed()},s.prototype.updateFrameState_=function(i,o,l){var v=(0,R.f0)({},this.frameState_);v.viewState=(0,R.f0)({},v.viewState);var x=(0,ae.getCenter)(i);v.extent=i.slice(),v.size[0]=Math.round((0,ae.getWidth)(i)/o),v.size[1]=Math.round((0,ae.getHeight)(i)/o),v.time=Date.now();var w=v.viewState;return w.center=x,w.projection=l,w.resolution=o,v},s.prototype.allSourcesReady_=function(){for(var i=!0,o,l=0,v=this.layers_.length;l<v;++l)if(o=this.layers_[l].getSource(),o.getState()!=="ready"){i=!1;break}return i},s.prototype.getImage=function(i,o,l,v){if(!this.allSourcesReady_())return null;var x=this.updateFrameState_(i,o,v);if(this.requestedFrameState_=x,this.renderedImageCanvas_){var w=this.renderedImageCanvas_.getResolution(),_=this.renderedImageCanvas_.getExtent();(o!==w||!(0,ae.equals)(i,_))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),x.tileQueue.loadMoreTiles(16,16),x.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},s.prototype.processSources_=function(){for(var i=this.requestedFrameState_,o=this.layers_.length,l=new Array(o),v=0;v<o;++v){i.layerIndex=v;var x=fa(this.layers_[v],i);if(x)l[v]=x;else return}var w={};this.dispatchEvent(new ua(Xn.BEFOREOPERATIONS,i,w)),this.processor_.process(l,w,this.onWorkerComplete_.bind(this,i))},s.prototype.onWorkerComplete_=function(i,o,l,v){if(!(o||!l)){var x=i.extent,w=i.viewState.resolution;if(!(w!==this.requestedFrameState_.viewState.resolution||!(0,ae.equals)(x,this.requestedFrameState_.extent))){var _;if(this.renderedImageCanvas_)_=this.renderedImageCanvas_.getImage().getContext("2d");else{var L=Math.round((0,ae.getWidth)(x)/w),M=Math.round((0,ae.getHeight)(x)/w);_=(0,Gt.E4)(L,M),this.renderedImageCanvas_=new ta.Z(x,w,1,_.canvas)}_.putImageData(l,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new ua(Xn.AFTEROPERATIONS,i,v)),i.animate&&requestAnimationFrame(this.changed.bind(this))}}},s.prototype.disposeInternal=function(){this.processor_&&this.processor_.dispose(),y.prototype.disposeInternal.call(this)},s}(Or.ZP);la.prototype.dispose;var Xr=null;function fa(y,s){var i=y.getRenderer();if(!i)throw new Error("Unsupported layer type: "+y);if(!i.prepareFrame(s))return null;var o=s.size[0],l=s.size[1];if(o===0||l===0)return null;var v=i.renderFrame(s,null),x;if(v instanceof HTMLCanvasElement)x=v;else{if(v&&(x=v.firstElementChild),!(x instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+x);if(x.width===o&&x.height===l){var w=x.getContext("2d");return w.getImageData(0,0,o,l)}}if(!Xr)Xr=(0,Gt.E4)(o,l);else{var _=Xr.canvas;_.width!==o||_.height!==l?Xr=(0,Gt.E4)(o,l):Xr.clearRect(0,0,o,l)}return Xr.drawImage(x,0,0,o,l),Xr.getImageData(0,0,o,l)}function ca(y){return y.map(function(s){return s.getLayerState()})}function io(y){for(var s=y.length,i=new Array(s),o=0;o<s;++o)i[o]=ao(y[o]);return i}function ao(y){var s;return y instanceof jr.Z?y instanceof Ar.Z?s=new Fi.default({source:y}):y instanceof Or.ZP&&(s=new fi.Z({source:y})):s=y,s}var Zi=la,pa=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),_n=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',tn],oo={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},so={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},uo=function(y){pa(s,y);function s(i){var o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.layer.indexOf("-"),v=l==-1?i.layer:i.layer.slice(0,l),x=so[v],w=oo[i.layer],_=i.url!==void 0?i.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+i.layer+"/{z}/{x}/{y}."+w.extension;return y.call(this,{attributions:_n,cacheSize:i.cacheSize,crossOrigin:"anonymous",interpolate:o,maxZoom:i.maxZoom!=null?i.maxZoom:x.maxZoom,minZoom:i.minZoom!=null?i.minZoom:x.minZoom,opaque:w.opaque,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,transition:i.transition,url:_,wrapX:i.wrapX,zDirection:i.zDirection})||this}return s}(G.Z),ha=uo,da=T(29907),Vn=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Yn=function(y){Vn(s,y);function s(i){var o=this,l=i||{};return o=y.call(this,{opaque:!1,projection:l.projection,tileGrid:l.tileGrid,wrapX:l.wrapX!==void 0?l.wrapX:!0,zDirection:l.zDirection,url:l.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(v,x){var w=v.getTileCoord()[0],_=(0,wr.Pq)(o.tileGrid.getTileSize(w)),L=(0,Gt.E4)(_[0],_[1]);L.strokeStyle="grey",L.strokeRect(.5,.5,_[0]+.5,_[1]+.5),L.fillStyle="grey",L.strokeStyle="white",L.textAlign="center",L.textBaseline="middle",L.font="24px sans-serif",L.lineWidth=4,L.strokeText(x,_[0]/2,_[1]/2,_[0]),L.fillText(x,_[0]/2,_[1]/2,_[0]),v.setImage(L.canvas)}})||this,o}return s}(G.Z),lo=Yn,va=T(27613),Ui=T(81121),pi=T(66412),fo=T(38431),bn=T(24918),ya=function(){var y=function(s,i){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(o[v]=l[v])},y(s,i)};return function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");y(s,i);function o(){this.constructor=s}s.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Bi=function(y){ya(s,y);function s(i,o,l,v,x,w){var _=y.call(this,i,o)||this;return _.src_=l,_.extent_=v,_.preemptive_=x,_.grid_=null,_.keys_=null,_.data_=null,_.jsonp_=w,_}return s.prototype.getImage=function(){return null},s.prototype.getData=function(i){if(!this.grid_||!this.keys_)return null;var o=(i[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),l=(i[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),v=this.grid_[Math.floor((1-l)*this.grid_.length)];if(typeof v!="string")return null;var x=v.charCodeAt(Math.floor(o*v.length));x>=93&&x--,x>=35&&x--,x-=32;var w=null;if(x in this.keys_){var _=this.keys_[x];this.data_&&_ in this.data_?w=this.data_[_]:w=_}return w},s.prototype.forDataAtCoordinate=function(i,o,l){this.state==gt.Z.EMPTY&&l===!0?(this.state=gt.Z.IDLE,(0,bn.Vx)(this,_r.Z.CHANGE,function(v){o(this.getData(i))},this),this.loadInternal_()):l===!0?setTimeout(function(){o(this.getData(i))}.bind(this),0):o(this.getData(i))},s.prototype.getKey=function(){return this.src_},s.prototype.handleError_=function(){this.state=gt.Z.ERROR,this.changed()},s.prototype.handleLoad_=function(i){this.grid_=i.grid,this.keys_=i.keys,this.data_=i.data,this.state=gt.Z.LOADED,this.changed()},s.prototype.loadInternal_=function(){if(this.state==gt.Z.IDLE)if(this.state=gt.Z.LOADING,this.jsonp_)(0,xe.R6)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",this.src_),i.send()}},s.prototype.onXHRLoad_=function(i){var o=i.target;if(!o.status||o.status>=200&&o.status<300){var l=void 0;try{l=JSON.parse(o.responseText)}catch{this.handleError_();return}this.handleLoad_(l)}else this.handleError_()},s.prototype.onXHRError_=function(i){this.handleError_()},s.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(gt.Z.EMPTY)},s}(fo.Z),Kn=function(y){ya(s,y);function s(i){var o=y.call(this,{projection:(0,Q.get)("EPSG:3857"),state:"loading",zDirection:i.zDirection})||this;if(o.preemptive_=i.preemptive!==void 0?i.preemptive:!0,o.tileUrlFunction_=Be.vU,o.template_=void 0,o.jsonp_=i.jsonp||!1,i.url)if(o.jsonp_)(0,xe.R6)(i.url,o.handleTileJSONResponse.bind(o),o.handleTileJSONError.bind(o));else{var l=new XMLHttpRequest;l.addEventListener("load",o.onXHRLoad_.bind(o)),l.addEventListener("error",o.onXHRError_.bind(o)),l.open("GET",i.url),l.send()}else i.tileJSON?o.handleTileJSONResponse(i.tileJSON):(0,Sn.h)(!1,51);return o}return s.prototype.onXHRLoad_=function(i){var o=i.target;if(!o.status||o.status>=200&&o.status<300){var l=void 0;try{l=JSON.parse(o.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(l)}else this.handleTileJSONError()},s.prototype.onXHRError_=function(i){this.handleTileJSONError()},s.prototype.getTemplate=function(){return this.template_},s.prototype.forDataAtCoordinateAndResolution=function(i,o,l,v){if(this.tileGrid){var x=this.tileGrid.getZForResolution(o,this.zDirection),w=this.tileGrid.getTileCoordForCoordAndZ(i,x),_=this.getTile(w[0],w[1],w[2],1,this.getProjection());_.forDataAtCoordinate(i,l,v)}else v===!0?setTimeout(function(){l(null)},0):l(null)},s.prototype.handleTileJSONError=function(){this.setState("error")},s.prototype.handleTileJSONResponse=function(i){var o=(0,Q.get)("EPSG:4326"),l=this.getProjection(),v;if(i.bounds!==void 0){var x=(0,Q.getTransformFromProjections)(o,l);v=(0,ae.applyTransform)(i.bounds,x)}var w=(0,ge.Tl)(l),_=i.minzoom||0,L=i.maxzoom||22,M=(0,ge.dl)({extent:w,maxZoom:L,minZoom:_});this.tileGrid=M,this.template_=i.template;var F=i.grids;if(!F){this.setState("error");return}if(this.tileUrlFunction_=(0,Be.uR)(F,M),i.attribution!==void 0){var U=v!==void 0?v:w;this.setAttributions(function(K){return(0,ae.intersects)(U,K.extent)?[i.attribution]:null})}this.setState("ready")},s.prototype.getTile=function(i,o,l,v,x){var w=(0,Me.lg)(i,o,l);if(this.tileCache.containsKey(w))return this.tileCache.get(w);var _=[i,o,l],L=this.getTileCoordForTileUrlFunction(_,x),M=this.tileUrlFunction_(L,v,x),F=new Bi(_,M!==void 0?gt.Z.IDLE:gt.Z.EMPTY,M!==void 0?M:"",this.tileGrid.getTileCoordExtent(_),this.preemptive_,this.jsonp_);return this.tileCache.set(w,F),F},s.prototype.useTile=function(i,o,l){var v=(0,Me.lg)(i,o,l);this.tileCache.containsKey(v)&&this.tileCache.get(v)},s}(Ar.Z),ma=Kn,ki=T(2487),ji=T(44138),ga=T(57713);function hi(y,s){var i=new St.Z(32),o=y.getExtent();return function(l,v){i.expireCache(),o&&(l=(0,ae.getIntersection)(o,l));var x=y.getZForResolution(v),w=[];return y.forEachTileCoord(l,x,function(_){var L=_.toString();if(!i.containsKey(L)){var M=s(_);i.set(L,M)}w.push(i.get(L))}),w}}},60281:function(Kr,ct,T){"use strict";var St=T(2073),ae=T(13811),Ne=T(13798),Be=T(2487),Me=T(66884),ge=T(12059),Q=T(76094),xe=T(95232),De=function(){var ut=function(d,$){return ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,R){G.__proto__=R}||function(G,R){for(var le in R)Object.prototype.hasOwnProperty.call(R,le)&&(G[le]=R[le])},ut(d,$)};return function(d,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");ut(d,$);function G(){this.constructor=d}d.prototype=$===null?Object.create($):(G.prototype=$.prototype,new G)}}(),st=function(ut){De(d,ut);function d($){var G=ut.call(this,{attributions:$.attributions,wrapX:$.wrapX})||this;return G.resolution=void 0,G.distance=$.distance!==void 0?$.distance:20,G.minDistance=$.minDistance||0,G.interpolationRatio=0,G.features=[],G.geometryFunction=$.geometryFunction||function(R){var le=R.getGeometry();return(0,ge.h)(le.getType()=="Point",10),le},G.createCustomCluster_=$.createCluster,G.source=null,G.boundRefresh_=G.refresh.bind(G),G.updateDistance(G.distance,G.minDistance),G.setSource($.source||null),G}return d.prototype.clear=function($){this.features.length=0,ut.prototype.clear.call(this,$)},d.prototype.getDistance=function(){return this.distance},d.prototype.getSource=function(){return this.source},d.prototype.loadFeatures=function($,G,R){this.source.loadFeatures($,G,R),G!==this.resolution&&(this.resolution=G,this.refresh())},d.prototype.setDistance=function($){this.updateDistance($,this.minDistance)},d.prototype.setMinDistance=function($){this.updateDistance(this.distance,$)},d.prototype.getMinDistance=function(){return this.minDistance},d.prototype.setSource=function($){this.source&&this.source.removeEventListener(St.Z.CHANGE,this.boundRefresh_),this.source=$,$&&$.addEventListener(St.Z.CHANGE,this.boundRefresh_),this.refresh()},d.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},d.prototype.updateDistance=function($,G){var R=$===0?0:Math.min(G,$)/$,le=$!==this.distance||this.interpolationRatio!==R;this.distance=$,this.minDistance=G,this.interpolationRatio=R,le&&this.refresh()},d.prototype.cluster=function(){if(!(this.resolution===void 0||!this.source))for(var $=(0,Q.createEmpty)(),G=this.distance*this.resolution,R=this.source.getFeatures(),le={},je=0,me=R.length;je<me;je++){var Tt=R[je];if(!((0,xe.sq)(Tt)in le)){var Rt=this.geometryFunction(Tt);if(Rt){var _r=Rt.getCoordinates();(0,Q.createOrUpdateFromCoordinate)(_r,$),(0,Q.buffer)($,G,$);var br=this.source.getFeaturesInExtent($).filter(function(Ar){var gt=(0,xe.sq)(Ar);return gt in le?!1:(le[gt]=!0,!0)});this.features.push(this.createCluster(br,$))}}}},d.prototype.createCluster=function($,G){for(var R=[0,0],le=$.length-1;le>=0;--le){var je=this.geometryFunction($[le]);je?(0,Me.IH)(R,je.getCoordinates()):$.splice(le,1)}(0,Me.bA)(R,1/$.length);var me=(0,Q.getCenter)(G),Tt=this.interpolationRatio,Rt=new Ne.Z([R[0]*(1-Tt)+me[0]*Tt,R[1]*(1-Tt)+me[1]*Tt]);return this.createCustomCluster_?this.createCustomCluster_(Rt,$):new ae.Z({geometry:Rt,features:$})},d}(Be.default);ct.Z=st},72966:function(Kr,ct,T){"use strict";T.r(ct),T.d(ct,{Circle:function(){return St.Z},Fill:function(){return ae.Z},Icon:function(){return Ne.Z},IconImage:function(){return Be.Z},Image:function(){return Me.Z},RegularShape:function(){return ge.Z},Stroke:function(){return Q.Z},Style:function(){return xe.ZP},Text:function(){return De.Z}});var St=T(5689),ae=T(68640),Ne=T(60316),Be=T(99072),Me=T(22452),ge=T(96825),Q=T(23230),xe=T(82571),De=T(95659)}}]);
