"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[77121],{56279:function(A,g,i){i.d(g,{P:function(){return r}});var h=i(386892),f=i(149500);const r={mixins:[h.D],created(){},methods:{lifecycleBeforeChartsLoad(y){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&f.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),f.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let v=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[y]);if(v)return v}return y},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&f.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),f.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(A,g,i){i.d(g,{X:function(){return h},b:function(){return f}});let h={versions:function(){var r=navigator.userAgent;return{trident:r.indexOf("Trident")>-1,presto:r.indexOf("Presto")>-1,webKit:r.indexOf("AppleWebKit")>-1,gecko:r.indexOf("Gecko")>-1&&r.indexOf("KHTML")==-1,mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:r.indexOf("Android")>-1,iPhone:r.indexOf("iPhone")>-1,iPad:r.indexOf("iPad")>-1,webApp:r.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},f;h.versions.mobile||h.versions.ios||h.versions.android||h.versions.iPhone||h.versions.iPad?f=!1:f=!0},77121:function(A,g,i){i.r(g),i.d(g,{default:function(){return Z}});var h=function(){var e=this,n=e._self._c;return n("div",{style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}},[n("hide-button",{attrs:{attr:e.widgetInfo.attr}}),n("div",{ref:"lineThreeDimensional",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}})],1)},f=[],r=i(844513),y=i(927966),O=i(832475),v=i(67157),u=i(150813);const N={mixins:[v.c],data(){return{config_extend:{config:{series:[{itemStyle:{color:"#222227"}},{itemStyle:{color:"#29CC97"}}]}},filter_config:{title:JSON.parse(JSON.stringify(u.Z.charts.title)),legend:JSON.parse(JSON.stringify(u.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(u.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(u.Z.charts.toolbox)),xAxis3D:JSON.parse(JSON.stringify(u.Z.charts.xAxis3D)),yAxis3D:JSON.parse(JSON.stringify(u.Z.charts.yAxis3D)),zAxis3D:JSON.parse(JSON.stringify(u.Z.charts.zAxis3D)),visualMap:{inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},series:{label:{textStyle:{color:""}},itemStyle:{opacity:1,color:""},emphasis:{itemStyle:{color:""},label:{textStyle:{color:""}}}}}}},methods:{filterPredefineColoursSchemeConfig(t,e){this.getNewConfigWithArrary(t,e,this.filter_config),this.getNewConfig_charts_visualMap_inRange_color(t.visualMap,e.visualMap)}}};var S=i(56279),a=i(445061),b=i(126711),z=i(99349),R=i(179966),C=i(275770),M=i(555616),H=i(149500);const L=i(954255);var $={props:["widgetInfo"],name:"line-three-dimensional",components:{HideButton:r.Z},mixins:[O.baseConfig,N,S.P,a.u,b.H,z.P],data(){return{dimensionsEx:null,dimensionsAliasEx:null}},destroyed(){this.echarts.dispose()},mounted(){this.echarts=L.init(this.$refs.lineThreeDimensional,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(t){let e=this.getData(t.dataset[t.dataset.type].encode,t.dataset[t.dataset.type].dimensionsAlias,t.dataset[t.dataset.type].source),n=this.getTooltip(t.config.tooltip),c=JSON.parse(JSON.stringify(t.config.xAxis3D));c.data=Array.from(new Set(e.xData));let s=JSON.parse(JSON.stringify(t.config.yAxis3D));s.data=Array.from(new Set(e.yData));let p=JSON.parse(JSON.stringify(t.config.zAxis3D));p.data=Array.from(new Set(e.zData));let l=JSON.parse(JSON.stringify(t.config.grid3D)),d=JSON.parse(JSON.stringify(t.config.series)),o=JSON.parse(JSON.stringify(t.config.visualMap));o.seriesIndex=o.show?0:-1;let J=JSON.parse(JSON.stringify(t.config.toolbox)),m=t.dataset[t.dataset.type].encode;t.config.visualMap.visualMapMin=="dataMin"&&(o.min=this.getVisualmapData(t,m.z)[0]),t.config.visualMap.visualMapMax=="dataMax"&&(o.max=this.getVisualmapData(t,m.z)[1]);let w={tooltip:n,toolbox:J,visualMap:this.getVisualMap(o),xAxis3D:c,yAxis3D:s,zAxis3D:p,grid3D:l,series:[{type:"line3D",coordinateSystem:"cartesian3D",symbol:"circle",symbolSize:12,animationDurationUpdate:500,blendMode:"source-over",progressive:1e5,progressiveThreshold:1e5,data:e.data.map(function(x){return{value:[x[0],x[1],x[2]]}}),shading:"lambert",label:this.getLabelStyle(d.label),lineStyle:d.itemStyle,emphasis:d.emphasis}]};this.echarts.dispose(),this.echarts=L.init(this.$refs.lineThreeDimensional,null,{devicePixelRatio:2}),this.echarts.setOption(this.lifecycleBeforeChartsLoad(w),{notMerge:!1})},reLoadInfo(t){t&&(this.$refs.lineThreeDimensional.style.width=t.attr.w+"px",this.$refs.lineThreeDimensional.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},getData(t,e,n){let c,s,p,l={xData:[],yData:[],zData:[],data:[]};return this.$$lib__.each(e,(d,o)=>{t.x&&d.name==t.x&&(c=o),t.y&&d.name==t.y&&(s=o),t.z&&d.name==t.z&&(p=o)}),this.$$lib__.each(n,d=>{c>=0?l.xData.push(d[c]):l.xData.push(0),s>=0?l.yData.push(d[s]):l.xData.push(0),p>=0?l.zData.push(d[p]):l.xData.push(0);let o=[];c>=0?o.push(d[c]):o.push(0),s>=0?o.push(d[s]):o.push(0),p>=0?o.push(d[p]):o.push(0),l.data.push(o)}),l.data=this.changeSourceType(l.data,l.xData,l.yData,l.zData),l},changeSourceType(t,e,n,c){let s=Array.from(new Set(e)),p=Array.from(new Set(n)),l=Array.from(new Set(c)),d=this.widgetInfo.config.xAxis3D.type,o=this.widgetInfo.config.yAxis3D.type,J=this.widgetInfo.config.zAxis3D.type,m=JSON.parse(JSON.stringify(t));return this.$$lib__.each(t,(w,x)=>{d=="category"&&this.$$lib__.each(s,(D,I)=>{w[0]==D&&(m[x][0]=I)}),o=="category"&&this.$$lib__.each(p,(D,I)=>{w[1]==D&&(m[x][1]=I)}),J=="category"&&this.$$lib__.each(l,(D,I)=>{w[2]==D&&(m[x][2]=I)})}),m},initAction(t){this.actionSendout(t),this.actionReceive(t)},actionSendout(t){let e=this;this.$$lib__.each(t.action.sendOut.actionList,n=>{if(n.enabled){let c=n.code+"_"+t.id;if(n.paramsExtend&&n.paramsExtend.length>0){let s={};this.getParamsExtend(s,n.paramsExtend,t)}n.code==C.default.click.code&&e.onClick(c,n)}})},onClick(t,e){let n=this;n.echarts.on("click",c=>{let s={};if(s.x=c.value[0],s.y=c.value[1],s.z=c.value[2],e.script&&e.script.enabled){if(H.log("Execute script for "+n.widgetInfo.name+" component to "+C.default[e.code].name+" component"),e.script.content==""){M.Message.warning({message:C.default[e.code].name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),s=this.customScript(s)}y.Z.$emit(t,s),e.postMessage&&n.doPostMessage(s),n.actionNameList.push(t)})}}},T=$,P=i(768141),E=(0,P.Z)(T,h,f,!1,null,"2ef9eb48",null),Z=E.exports},844513:function(A,g,i){i.d(g,{Z:function(){return N}});var h=function(){var a=this,b=a._self._c;return a.attr.buttonHide?b("div",{style:{position:"absolute",right:a.attr.buttonHideRight+"px",top:a.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(z){return a.onHide()}}},[a.openTooltip?b("el-tooltip",{attrs:{"open-delay":1e3,content:a.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[b("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):b("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a._e()},f=[],r=i(752246),y={props:["attr"],name:"hide-button",data(){return{isPc:r.b}},computed:{openTooltip:function(){let S=!1,a=this.attr.buttonHideTooltipContent;return r.b&&a&&a!=null&&a.trim()!=""&&(S=!0),S}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},O=y,v=i(768141),u=(0,v.Z)(O,h,f,!1,null,"bf399b9a",null),N=u.exports}}]);
