"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[6371],{56279:function(M,$,c){c.d($,{P:function(){return x}});var w=c(86892),v=c(49500);const x={mixins:[w.D],created(){},methods:{lifecycleBeforeChartsLoad(C){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&v.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),v.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let N=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[C]);if(N)return N}return C},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&v.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),v.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},15909:function(M,$){var c=Symbol();function w(a,r){a[c]||(a[c]=r,Object.defineProperty(a,"parentNode",{get:function(){return this[c]||this.parentElement}}))}var v=function(a,r){var d=a.splice(0);r.append.apply(r,d),d.forEach(function(m){m[c]=void 0})};function x(a,r){var d,m=this,b=a.frag||[a];if(this.frag){var u,p=this.frag.indexOf(r);p>-1&&(u=this.frag).splice.apply(u,[p,0].concat(b))}if(this[I]){var k=this[I].get(r);k&&(r=k[0])}r?(d=r).before.apply(d,b):this.append.apply(this,b),b.forEach(function(_){return w(_,m)})}function C(a){if(this.frag){var r=this.frag.indexOf(a);if(r>-1){var d,m=[r,1];if(this.frag.length===1){var b=this[S];this.frag[0].before(b),m.push(b)}(d=this.frag).splice.apply(d,m)}}var u=this[I];if(u){var p=u.get(a);if(p)return v(p,a),u.delete(a),void(a[c]=void 0)}a.remove()}var I=Symbol(),N={insertBefore:x,removeChild:C},S=Symbol(),T={insertBefore:x,before:function(a){this.frag[0].before(a)},remove:function(){var a=this[S],r=this.frag,d=r.splice(0,r.length,a);d[0].before(this[S]),d.forEach(function(m){return m.remove()})},removeChild:C,appendChild:function(a){var r=this.frag.length;this.frag[r-1].after(a);var d=this[S];this.frag[0]===d&&(this.frag.splice(0,1),d.remove()),w(a,this),this.frag.push(a)}},P={inserted:function(a){var r=Array.from(a.childNodes),d=a.parentNode,m=document.createComment("");a[S]=m,r.length===0&&r.push(m);var b=document.createDocumentFragment();b.append.apply(b,r),a.replaceWith(b),a.frag=r,function(u,p,k){u[I]||(u[I]=new Map,Object.assign(u,N)),u[I].set(p,k)}(d,a,r),w(a,d),r.forEach(function(u){return w(u,a)}),Object.defineProperty(a,"innerHTML",{set:function(u){var p=document.createElement("div");p.innerHTML=u;var k=a.frag.length;Array.from(p.childNodes).forEach(function(_){return a.appendChild(_)}),p.append.apply(p,a.frag.splice(0,k))},get:function(){return""}}),Object.assign(a,T)},unbind:function(a){v(a.frag,a),a[S].remove()}};$.Z=P},44513:function(M,$,c){c.d($,{Z:function(){return T}});var w=function(){var a=this,r=a._self._c;return a.attr.buttonHide?r("div",{style:{position:"absolute",right:a.attr.buttonHideRight+"px",top:a.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(d){return a.onHide()}}},[a.openTooltip?r("el-tooltip",{attrs:{"open-delay":1e3,content:a.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[r("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):r("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a._e()},v=[],x=c(52246),C={props:["attr"],name:"hide-button",data(){return{isPc:x.b}},computed:{openTooltip:function(){let P=!1,a=this.attr.buttonHideTooltipContent;return x.b&&a&&a!=null&&a.trim()!=""&&(P=!0),P}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},I=C,N=c(68141),S=(0,N.Z)(I,w,v,!1,null,"bf399b9a",null),T=S.exports},56371:function(M,$,c){c.r($),c.d($,{default:function(){return z}});var w=function(){var e=this,i=e._self._c;return i("div",{class:[e.widgetInfo.config.global.closeScroll||e.widgetInfo.config.global.mode!="vertical"?"hideScroll":""],style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px",overflow:"auto"}},[i("hide-button",{attrs:{attr:e.widgetInfo.attr}}),i("div",[i("el-menu",{ref:"navMenu",staticClass:"nav_menu",style:e.setStyle(e.widgetInfo.config),attrs:{mode:e.widgetInfo.config.global.mode,collapse:e.widgetInfo.config.global.collapse,"unique-opened":e.widgetInfo.config.global.uniqueOpened,"menu-trigger":e.widgetInfo.config.global.menuTrigger,collapseTransition:e.widgetInfo.config.global.collapseTransition,"text-color":e.widgetInfo.config.global.textColor,"active-text-color":e.widgetInfo.config.active.activeTextColor},on:{select:e.selectMenu}},[i("nav-menu-item",{ref:"navMenuItem",attrs:{navMenus:e.treeSelectData,widgetInfo:e.widgetInfo}})],1)],1)],1)},v=[],x=c(21300),C=c(74668),I=c(42160),N=c(27966),S=function(){var e=this,i=e._self._c;return e.navMenus&&e.navMenus.length>0?i("div",{directives:[{name:"frag",rawName:"v-frag"}]},[e._l(e.navMenus,function(o){return[o.children?i("el-submenu",{key:"key"+o.id,style:e.heightStyleMenu(e.widgetInfo),attrs:{data:o,index:o.id,disabled:e.toBoolean(o.disabled)},nativeOn:{mouseenter:function(n){return e.nav_hover(n)},mouseleave:function(n){return e.nav_leave(n,o.isRoot)}}},[i("template",{slot:"title"},[o.icon&&o.icon.indexOf("el-icon")>-1?i("i",{class:o.icon,style:e.iconStyle(e.widgetInfo)}):o.icon&&o.icon.indexOf("iconfont")>-1&&o.icon.length>9?i("i",{style:e.iconStyle(e.widgetInfo)},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#"+o.icon.substring(9,o.icon.length)}})])]):o.icon?i("img",{staticClass:"icon-svg",style:e.iconStyle(e.widgetInfo),attrs:{src:e.getImageUrl(o.icon),alt:""}}):e._e(),i("span",{style:e.setStyle(e.widgetInfo.config),attrs:{slot:"title"},slot:"title"},[e._v(e._s(o.name))])]),i("NavMenuItem",{attrs:{navMenus:o.children,widgetInfo:e.widgetInfo}})],2):i("el-menu-item",{key:o.id,style:e.heightStyle(e.widgetInfo,o.isRoot),attrs:{data:o,index:o.id,disabled:e.toBoolean(o.disabled)},nativeOn:{mouseenter:function(n){return e.nav_hover(n)},mouseleave:function(n){return e.nav_leave(n,o.isRoot)},click:function(n){return e.nav_click(n)}}},[o.icon&&o.icon.indexOf("el-icon")>-1?i("i",{class:o.icon,style:e.iconStyle(e.widgetInfo)}):o.icon&&o.icon.indexOf("iconfont")>-1&&o.icon.length>9?i("i",{style:e.iconStyle(e.widgetInfo)},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#"+o.icon.substring(9,o.icon.length)}})])]):o.icon?i("img",{staticClass:"icon-svg",style:e.iconStyle(e.widgetInfo),attrs:{src:e.getImageUrl(o.icon),alt:""}}):e._e(),i("span",{style:e.setStyle(e.widgetInfo.config),attrs:{slot:"title"},slot:"title"},[e._v(e._s(o.name))])])]})],2):e._e()},T=[],P=c(15909),a=c(26711),r={name:"NavMenuItem",props:["navMenus","widgetInfo"],mixins:[a.H],directives:{frag:P.Z},watch:{navMenus:function(){this.$forceUpdate()}},data(){return{}},methods:{getImageUrl(t){if(t&&t!="")return t},setStyle(t){return{border:"none",paddingLeft:t.global.paddingLeft+"px",fontFamily:t.fontStyle.fontFamily,fontWeight:t.fontStyle.fontWeight,fontStyle:t.fontStyle.fontStyle,fontSize:this.mUtils.getNewFontSize(t.fontStyle.fontSize)+"px",textDecoration:t.fontStyle.textDecoration,textAlign:t.global.textAlign,backgroundSize:t.global.backgroundSize}},nav_hover(t){t.target.style.color=this.widgetInfo.config.hover.hoverTextColor,t.target.style.backgroundColor=this.widgetInfo.config.hover.backgroundColor||"none",t.target.getElementsByTagName("i")&&t.target.getElementsByTagName("i").length>0&&(t.target.getElementsByTagName("i")[0].style.color=this.widgetInfo.config.hover.hoverTextIconColor)},colorHex(t){var e=t,i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgba|RGBA)/.test(e)){var o=e.replace(/(?:\(|\)|rgba|RGBA)*/g,"").split(","),n="#";for(let f=0;f<3;f++){var l=Number(o[f]).toString(16);l.length<2&&(l="0"+l),n+=l}return n.length!==7&&(n=e),n}else if(i.test(e)){var s=e.replace(/#/,"").split("");if(s.length===6)return e;if(s.length===3){var g="#";for(let f=0;f<s.length;f+=1)g+=s[f]+s[f];return g}}return e},nav_click(t){let e=t.target.parentElement;e.className.indexOf("is-active")>-1&&e.getElementsByTagName("i")&&e.getElementsByTagName("i").length>0&&(e.getElementsByTagName("i")[0].style.color=this.widgetInfo.config.active.activeTextIconColor)},nav_leave(t,e){if(t.target.className.indexOf("is-active")>-1){let i=t.target.className.indexOf("el-submenu")>-1;t.target.style.color=i?this.widgetInfo.config.activeParent.activeTextColor:this.widgetInfo.config.active.activeTextColor,i&&(t.target.style.backgroundColor=this.widgetInfo.config.activeParent.backgroundColor||"none"),t.target.getElementsByTagName("i")&&t.target.getElementsByTagName("i").length>0&&(t.target.getElementsByTagName("i")[0].style.color=t.target.style.color=i?this.widgetInfo.config.activeParent.activeTextIconColor:this.widgetInfo.config.active.activeTextIconColor)}else t.target.style.backgroundColor=e||!this.widgetInfo.config.childConfig.backgroundColor||!this.widgetInfo.config.childConfig.disabled?this.widgetInfo.config.global.backgroundColor||"none":this.widgetInfo.config.childConfig.backgroundColor||"none",t.target.style.color=this.widgetInfo.config.global.textColor,t.target.getElementsByTagName("i")&&t.target.getElementsByTagName("i").length>0&&(t.target.getElementsByTagName("i")[0].style.color=this.widgetInfo.config.global.textIconColor)},heightStyle(t,e){let i=t.attr.hh;if(t.config.global.mode==="horizontal"){let o=t.config.global.horHeight-0;o>0&&(i=o);let n={height:i+"px",lineHeight:i+"px"};return t.config.global.widthType==="fixedWidth"&&t.config.global.width&&(n.width=this.mUtils.getNewPxW(t.config.global.width,t.attr.lockedW)+"px"),t.config.global.itemPadding&&(n.paddingLeft=this.mUtils.getNewPxW(t.config.global.itemPadding,t.attr.lockedW)+"px",n.paddingRight=this.mUtils.getNewPxW(t.config.global.itemPadding,t.attr.lockedW)+"px"),n}else return i=this.mUtils.getNewPxH(t.config.global.height,t.attr.lockedH),{height:i+"px",lineHeight:i+"px",backgroundColor:e||!t.config.childConfig.backgroundColor||!t.config.childConfig.disabled?t.config.global.backgroundColor||"none":t.config.childConfig.backgroundColor||"none"}},heightStyleMenu(t){if(t.config.global.mode==="horizontal")return this.heightStyle(t);{let e=this.mUtils.getNewPxH(t.config.global.height,t.attr.lockedH);return{minHeight:e+"px",lineHeight:e+"px",backgroundColor:t.config.global.backgroundColor}}},iconStyle(t){return{fontSize:`${this.mUtils.getNewPxMin(t.config.fontStyle.fontSize||18)}px`,width:`${this.mUtils.getNewPxMin(t.config.global.iconWidth||24)}px`,height:`${this.mUtils.getNewPxMin(t.config.global.iconHeight||18)}px`}},toBoolean(t){return x.stringToBoolean(t)}}},d=r,m=c(68141),b=(0,m.Z)(d,S,T,!1,null,null,null),u=b.exports,p=c(44513),k=c(45061),_=c(55616),H=c(48836),E=c(67157);const L={mixins:[E.c],data(){return{config_extend:{config:{global:{iconPosition:"left",textAlign:"left",textIconColor:"#ffffff"},activeParent:{activeTextIconColor:"#ffffff"},childConfig:{backgroundColor:"#4C84FF"}}},filter_config:{global:{backgroundColor:"#4C84FF",textColor:"#ffffff",textIconColor:"#ffffff"},activeParent:{activeTextColor:"#ffffff",backgroundColor:"#070D2A",activeTextIconColor:"#ffffff"},active:{activeTextColor:"#ffffff",backgroundColor:"#070D2A",activeTextIconColor:"#ffffff"},hover:{hoverTextColor:"#ffffff",backgroundColor:"#070D2A",hoverTextIconColor:"#ffffff"},fontStyle:{fontFamily:"alibabaPuHuiTiRegular"},childConfig:{backgroundColor:"#4C84FF"}}}},methods:{filterPredefineColoursSchemeConfig(t,e){this.getNewConfigWithArrary(t,e,this.filter_config)}}};var W=c(56279),B=c(49500),A={name:"nav-menu",props:["widgetInfo"],mixins:[k.u,a.H,C.u,L,W.P],components:{NavMenuItem:u,HideButton:p.Z},computed:{...(0,H.Se)(["getCanvasSetting","getURLParams"])},data(){return{lastActiveMenu:null,treeSelectData:[]}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{resize(){this.setMenuPopup()},initMenuMore(){if(this.treeSelectData.length!==0){this.widgetInfo.config.global.menuDropdown?(this.treeSelectData.push({icon:"el-icon iconfont bi_more2",id:this.treeSelectData[this.treeSelectData.length-1].id+1,name:""}),this.$nextTick(()=>{let t=this.$refs.navMenuItem.$children[this.$refs.navMenuItem.$children.length-1].$el.offsetWidth+20,e=0,i=-1;for(let n=0;n<this.$refs.navMenuItem.$children.length;n++)if(e+=Math.ceil(this.$refs.navMenuItem.$children[n].$el.offsetWidth),parseInt(e+t)>this.widgetInfo.attr.w){i=n;break}if(i==-1||i>=this.treeSelectData.length){this.treeSelectData.pop();return}let o=this.treeSelectData.slice(i,this.treeSelectData.length-1);this.treeSelectData.splice(i,this.treeSelectData.length-i-1),this.treeSelectData[this.treeSelectData.length-1].children=o,this.$nextTick(()=>{this.$refs.navMenuItem.$children[this.treeSelectData.length-1].$el.style.float="right",this.$refs.navMenuItem.$children[this.treeSelectData.length-1].$el.childNodes[0].childNodes[0].style.color=this.widgetInfo.config.global.textIconColor,this.$refs.navMenuItem.$children[this.treeSelectData.length-1].$el.childNodes[0].childNodes[2].style.display="none";for(let n in this.$refs.navMenu.items)this.setInactiveStyle(n);this.setMenuPopup()})})):this.setMenuPopup();for(let t=0;t<this.treeSelectData.length;t++)this.treeSelectData[t].isRoot=!0}},createImage(t){let e=document.createElement("canvas");e.height=5,e.width=5;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,5,5),e.toDataURL("image/png",.5)},openSubMenu(t){if(t==="all"||t==="first"){for(let e in this.$refs.navMenu.submenus)if(this.$refs.navMenu.open(e),t==="first")break}},autoActive(t){if(this.$refs.navMenu.items)if(t==="first")for(let e in this.$refs.navMenu.items){this.$refs.navMenu.activeIndex=e,this.selectMenu(e);break}else if(t==="fixed")this.$refs.navMenu.activeIndex=this.widgetInfo.config.global.fixed_value,this.selectMenu(this.widgetInfo.config.global.fixed_value);else if(t==="global"){let e=this.getGlobalParamsValue(this.widgetInfo.config.global.global_param);this.$refs.navMenu.activeIndex=e,this.selectMenu(e)}else for(let e in this.$refs.navMenu.items)this.setInactiveStyle(e)},colorHex(t){var e=t,i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgba|RGBA)/.test(e)){for(var o=e.replace(/(?:\(|\)|rgba|RGBA)*/g,"").split(","),n="#",l=0;l<3;l++){var s=Number(o[l]).toString(16);s.length<2&&(s="0"+s),n+=s}return n.length!==7&&(n=e),n}else if(i.test(e)){var g=e.replace(/#/,"").split("");if(g.length===6)return e;if(g.length===3){for(var f="#",y=0;y<g.length;y+=1)f+=g[y]+g[y];return f}}return e},setParentInactiveStyle(t,e){let i=e.$el;this.widgetInfo.config.global.textIconColor&&t.getElementsByTagName("i")&&t.getElementsByTagName("i").length>0&&(i.getElementsByTagName("i")[0].style.color=this.widgetInfo.config.global.textIconColor),i&&i.querySelector(".el-submenu__title")&&(i.querySelector(".el-submenu__title").style.color=this.widgetInfo.config.global.textColor),this.widgetInfo.config.global.backgroundImage!=""?i.attributes.role.value!="menubar"&&(i.style.backgroundImage=this.getImageUrl(this.widgetInfo.config.global.backgroundImage),i.style.backgroundSize=this.widgetInfo.config.global.backgroundSize):i.attributes.role.value!="menubar"&&(i.style.backgroundColor=this.widgetInfo.config.global.backgroundColor,i.style.backgroundImage=""),e.parentMenu&&e.parentMenu.$el&&e.parentMenu.$el.nodeName=="LI"&&this.setParentInactiveStyle(t,e.parentMenu)},setInactiveStyle(t){let e=this.$refs.navMenu.items[t],i=e.$el;if(e.parentMenu.$el.nodeName=="LI"&&this.setParentInactiveStyle(i,e.parentMenu),this.widgetInfo.config.global.textIconColor&&i.getElementsByTagName("i")&&i.getElementsByTagName("i").length>0&&(i.getElementsByTagName("i")[0].style.color=this.widgetInfo.config.global.textIconColor),this.widgetInfo.config.global.backgroundImage!="")i.style.backgroundImage=this.getImageUrl(this.widgetInfo.config.global.backgroundImage),i.style.backgroundSize=this.widgetInfo.config.global.backgroundSize;else{let o=e.$attrs.data;i.style.backgroundColor=o.isRoot||!this.widgetInfo.config.childConfig.backgroundColor||!this.widgetInfo.config.childConfig.disabled?this.widgetInfo.config.global.backgroundColor||"none":this.widgetInfo.config.childConfig.backgroundColor||"none"}},setMenuPopup(){if(this.widgetInfo.config.childConfig.disabled&&this.widgetInfo.config.childConfig){let t=this.widgetInfo.config.childConfig.totalWidth,e=this.widgetInfo.config.childConfig.totalHeight,i=this.widgetInfo.config.childConfig.columnWidth,o=this.widgetInfo.config.childConfig.rowHeight,n=this.widgetInfo.config.childConfig.backgroundColor,l=this.widgetInfo.config.childConfig.textAlign,s=document.querySelectorAll(".el-menu--popup");for(let g=0;g<s.length;g++){s[g].style.padding="0px",t>0&&(s[g].style.width=t+"px",s[g].style.minWidth="auto"),t>0&&this.widgetInfo.config.childConfig.mode=="single"&&(s[g].style.width=i+"px",s[g].style.minWidth="auto"),e>0&&this.widgetInfo.config.childConfig.mode=="multi"&&(s[g].style.height=e+"px"),n&&(s[g].style.backgroundColor=n);let f=s[g].querySelectorAll(".el-submenu");for(let h=0;h<f.length;h++){this.widgetInfo.config.childConfig.mode=="multi"&&(f[h].style.float="left",f[h].style.display="block"),i>0&&(f[h].style.width=i+"px"),o>0&&(f[h].style.height=o+"px",f[h].style.lineHeight=o+"px"),f[h].style.textAlign=l;let F=f[h].querySelectorAll(".el-submenu__icon-arrow")[0];F.style.right=`${this.widgetInfo.config.childConfig.rightDistance}px`}let y=s[g].querySelectorAll(".el-menu-item");for(let h=0;h<y.length;h++)this.widgetInfo.config.childConfig.mode=="multi"&&(y[h].style.float="left",y[h].style.display="block"),i>0&&(y[h].style.width=i+"px"),o>0&&(y[h].style.height=o+"px",y[h].style.lineHeight=o+"px"),y[h].style.textAlign=l,n&&(y[h].style.backgroundColor=n)}}},selectMenu(t){for(let l in this.$refs.navMenu.items)this.setInactiveStyle(l);let e=this.$refs.navMenu.items[t],i=this;if(this.lastActiveMenu){let l=[this.$refs.navMenu.items[this.lastActiveMenu]];l&&l[0]&&l[0].parentMenu&&l[0].parentMenu!=e.parentMenu&&l[0].parentMenu.$el.className.indexOf("el-submenu")>-1&&l.push(l[0].parentMenu),l.forEach(s=>{if(s&&s.$el){if(s.$el.className.indexOf("el-submenu")>-1)return;let g=s.$attrs.data;s.$el.style.backgroundColor=g.isRoot||!i.widgetInfo.config.childConfig.backgroundColor||!i.widgetInfo.config.childConfig.disabled?i.widgetInfo.config.global.backgroundColor||"none":i.widgetInfo.config.childConfig.backgroundColor||"none",s.$el.style.backgroundImage=i.getImageUrl(i.widgetInfo.config.global.backgroundImage),s.$el.style.backgroundSize=i.widgetInfo.config.global.backgroundSize,s.$el.style.color=i.widgetInfo.config.global.textColor,i.widgetInfo.config.active.borderWidth-0>=0&&(i.widgetInfo.config.global.mode=="vertical"?(s.$el.style.borderRightColor="",s.$el.style.borderRightWidth="",s.$el.style.borderRightStyle=""):(s.$el.style.borderBottomColor="",s.$el.style.borderBottomWidth="",s.$el.style.borderBottomStyle=""))}})}if(this.lastActiveMenu=t,e){let l=e.$el;this.widgetInfo.config.active.backgroundImage?(l.style.backgroundImage=this.getImageUrl(this.widgetInfo.config.active.backgroundImage),l.style.backgroundSize=this.widgetInfo.config.active.backgroundSize):this.widgetInfo.config.active.backgroundColor&&(l.style.backgroundImage=this.getImageUrl(this.createImage(this.widgetInfo.config.active.backgroundColor)),l.style.backgroundSize="cover"),this.widgetInfo.config.active.borderWidth-0>=0&&(this.widgetInfo.config.global.mode=="vertical"?(l.style.borderRightColor=this.widgetInfo.config.active.activeTextColor,l.style.borderRightWidth=`${this.widgetInfo.config.active.borderWidth}px`,l.style.borderRightStyle="solid"):(l.style.borderBottomColor=this.widgetInfo.config.active.activeTextColor,l.style.borderBottomWidth=`${this.widgetInfo.config.active.borderWidth}px`,l.style.borderBottomStyle="solid")),this.widgetInfo.config.active.activeTextIconColor&&l.getElementsByTagName("i")&&l.getElementsByTagName("i").length>0&&(l.getElementsByTagName("i")[0].style.color=this.widgetInfo.config.active.activeTextIconColor)}this.$nextTick(()=>{this.setActiveParentStyle(e)});let o=this,n=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(n,l=>{if(l.enabled&&l.code==o.$$global_editor.actionType.click.code){let s=l.code+"_"+o.widgetInfo.id,g={value:t};if(l.paramsExtend&&l.paramsExtend.length>0&&o.getExtendParams(g,l.paramsExtend,o.getSelectSource(t),o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions),l.script&&l.script.enabled){if(B.log("Execute script for "+l.name+" component to "+l.script.title+" component"),l.script.content==""){_.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",l.script.content),g=this.customScript_actionSend_clickParam(g)}N.Z.$emit(s,g),o.actionNameList.push(s),l.postMessage&&this.doPostMessage(g)}}),this.$nextTick(function(){this.setMenuPopup()})},setActiveParentStyle(t){if(t&&t.parentMenu&&t.parentMenu.$el.className.indexOf("el-submenu")>-1){let e=t.parentMenu.$el,i=e.getElementsByTagName("div")[0];if(this.widgetInfo.config.activeParent.backgroundImage?(e.style.backgroundColor="",e.style.backgroundImage=this.getImageUrl(this.widgetInfo.config.activeParent.backgroundImage),e.style.backgroundSize=this.widgetInfo.config.activeParent.backgroundSize):this.widgetInfo.config.activeParent.backgroundColor&&(e.style.backgroundColor="",e.style.backgroundImage=this.getImageUrl(this.createImage(this.widgetInfo.config.activeParent.backgroundColor)),e.style.backgroundSize="cover"),this.widgetInfo.config.activeParent.borderWidth-0>=0&&(this.widgetInfo.config.global.mode=="vertical"?i.style.borderRightWidth=this.widgetInfo.config.activeParent.borderWidth+"px":i.style.borderBottomWidth=this.widgetInfo.config.activeParent.borderWidth+"px"),this.widgetInfo.config.activeParent.activeTextColor){let o=this.widgetInfo.config.activeParent.activeTextColor;i.style.color=o,this.widgetInfo.config.global.mode=="vertical"?i.style.borderRightColor=o:i.style.borderBottomColor=o;let n=this.widgetInfo.config.global.mode;setTimeout(function(){n=="vertical"?i.style.borderRightColor=o:i.style.borderBottomColor=o},100)}this.widgetInfo.config.activeParent.activeTextIconColor&&e.getElementsByTagName("i")&&e.getElementsByTagName("i")[0].className.indexOf("el-submenu__icon-arrow")==-1&&(e.getElementsByTagName("i")[0].style.color=this.widgetInfo.config.activeParent.activeTextIconColor)}t.parentMenu.parentMenu&&t.parentMenu.parentMenu.$el.className.indexOf("el-submenu")>-1&&this.setActiveParentStyle(t.parentMenu)},getSelectSource(t){let e=-1,i=this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions;for(let n=0;n<i.length;n++)i[n]==this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.id&&(e=n);let o=this.$$lib__.find(this.widgetInfo.dataset[this.widgetInfo.dataset.type].source,n=>n[e]==t);return o||[]},sortSelectData(t){if(t){let e=[],i=[];for(let o=0;o<t.length;o++)t[o].children&&t[o].children.length>0?(t[o].children=this.sortSelectData(t[o].children),e.push(t[o])):i.push(t[o]);if(e.length>0||i.length>0){t=[];for(let o in e)t.push(e[o]);for(let o in i)t.push(i[o])}}return t},loadInfo(t){this.innerChangedFirstPid&&(t.dataset[t.dataset.type].encode.firstPid=this.innerChangedFirstPid),this.treeSelectData=this.getTreeData(t.dataset[t.dataset.type].encode,t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].source),this.setIconPosition(t),this.$nextTick(function(){this.widgetInfo.config.global.mode=="vertical"&&this.openSubMenu(this.widgetInfo.config.global.expand),this.autoActive(this.widgetInfo.config.global.autoActive),this.initMenuMore()});let e=this.widgetInfo.config.global.paddingTop-0;if(`${e}`!="NaN"&&e!=0){let i=`div#widget_${this.widgetInfo.id} ul > .el-menu-item { padding-top:${e}px; } div#widget_${this.widgetInfo.id} ul > li.el-submenu > div.el-submenu__title { padding-top:${e}px; }`,o=`style_widget_${this.widgetInfo.id}`,n=document.getElementById(o);n?n.innerHTML=i:(n=document.createElement("style"),n.id=o,n.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(n))}this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},setStyle(t){return{border:"none",paddingLeft:t.global.paddingLeft+"px",fontFamily:t.fontStyle.fontFamily,fontWeight:t.fontStyle.fontWeight,fontStyle:t.fontStyle.fontStyle,fontSize:this.mUtils.getNewFontSize(t.fontStyle.fontSize)+"px",textDecoration:t.fontStyle.textDecoration,textAlign:t.global.textAlign,backgroundSize:t.global.backgroundSize}},setIconPosition(t){this.$nextTick(()=>{let e=this.$refs.navMenu.$el.children;if(t.config.global.iconPosition=="top"||t.config.global.iconPosition=="custom")for(let i=0;i<e.length;i++){if(t.config.global.mode=="horizontal"&&e[i]&&e[i].style){let l=t.config.global.horHeight-0,s=l>0?l:t.attr.hh;e[i].style.height=s+"px",e[i].style.lineHeight=s+"px"}let o=t.config.global.iconPosition=="custom"&&t.config.global.iconTop-0+""!="NaN"?t.config.global.iconTop-0:5,n=t.config.global.iconPosition=="custom"&&t.config.global.iconLeft-0+""!="NaN"?t.config.global.iconLeft-0:null;e[i].className.indexOf("el-menu-item")>-1?e[i].childNodes[0].nodeName=="I"?(e[i].childNodes[0].style.position="absolute",e[i].childNodes[0].style.left=(n||(e[i].offsetWidth-e[i].childNodes[0].offsetWidth)/2)+"px",e[i].childNodes[0].style.top=`${o}px`):e[i].childNodes[0].nodeName=="IMG"&&(e[i].childNodes[0].style.position="absolute",e[i].childNodes[0].style.left=(n||(e[i].offsetWidth-parseInt(e[i].childNodes[0].style.width))/2)+"px",e[i].childNodes[0].style.top=`${o}px`):e[i].className.indexOf("el-submenu")>-1&&(e[i].childNodes[0].className=="el-submenu__title"&&e[i].childNodes[0].childNodes[0].nodeName=="I"?(e[i].childNodes[0].childNodes[0].style.position="absolute",e[i].childNodes[0].childNodes[0].style.left=(n||(e[i].childNodes[0].offsetWidth-e[i].childNodes[0].childNodes[0].offsetWidth)/2)+"px",e[i].childNodes[0].childNodes[0].style.top=`${o}px`):e[i].childNodes[0].childNodes[0].nodeName=="IMG"&&(e[i].childNodes[0].childNodes[0].style.position="absolute",e[i].childNodes[0].childNodes[0].style.left=(n||(e[i].childNodes[0].offsetWidth-parseInt(e[i].childNodes[0].childNodes[0].style.width))/2)+"px",e[i].childNodes[0].childNodes[0].style.top=`${o}px`)),t.config.global.mode=="vertical"&&(e[i].style.minHeight="80px")}else for(let i=0;i<e.length;i++){if(t.config.global.mode=="horizontal"&&e[i]&&e[i].style){let o=t.config.global.horHeight-0,n=o>0?o:t.attr.hh;e[i].style.height=n+"px",e[i].style.lineHeight=n+"px"}e[i].className.indexOf("el-menu-item")>-1?(e[i].childNodes[0].nodeName=="I"||e[i].childNodes[0].nodeName=="IMG")&&(e[i].childNodes[0].style.position="static"):e[i].className.indexOf("el-submenu")>-1&&(e[i].childNodes[0].className=="el-submenu__title"&&e[i].childNodes[0].childNodes[0].nodeName=="I"||e[i].childNodes[0].childNodes[0].nodeName=="IMG")&&(e[i].childNodes[0].childNodes[0].style.position="static"),t.config.global.mode=="vertical"&&(e[i].style.minHeight="40px")}})},initAction(t){let e=t.action.receive.replaceFirstPid;e&&e.enabled&&e.replaceList&&e.replaceList.length>0&&this.doReplaceFirstPid(e.replaceList,e),this.actionReceive(t)},doReplaceFirstPid(t,e){let i=this;this.$$lib__.each(t,o=>{let n=o[0][1]+"_"+o[0][0];o[0][1].indexOf("_")>-1&&(n=o[0][1]),N.Z.$on(n,l=>{let s=o[0][2],g=s.indexOf("|");g>-1&&(s=o[0][2].substring(g+1)),e.script&&e.script.enabled?e.script.content?(i.replaceFirstPidCustomScript=i.replaceFirstPidCustomScript||new Function("param",e.script.content),i.replaceFirstPidCustomScript(l)):B.log("\u542F\u7528\u4E86\u4E8B\u4EF6\u811A\u672C\uFF0C\u4F46\u6CA1\u6709\u63D0\u4F9B\u4EFB\u4F55\u811A\u672C\uFF0C\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458"):(i.widgetInfo.dataset[i.widgetInfo.dataset.type].encode.firstPid=l[s],i.innerChangedFirstPid=l[s],i.reLoadInfo(i.widgetInfo))})})},getTreeData(t,e,i){let o=[];if(t.id&&t.pid&&t.name){let n=this.listToObj(e,i);if(n.length==0)return o;o=this.handleDataTree(n,t)}return this.getHideList(o)},getHideList(t){let e=JSON.parse(JSON.stringify(t));for(let i=t.length-1;i>=0;i--)t[i].hide&&(t[i].hide=="true"||t[i].hide>=1)?e.splice(i,1):t[i].children&&t[i].children.length>0&&(e[i].children=this.getHideList(t[i].children));return e},listToObj(t,e){let i=[];for(let o=0;o<e.length;o++){let n={};for(let l=0;l<t.length;l++)I.default.set(n,t[l],e[o][l]);i.push(JSON.parse(JSON.stringify(n)))}return i},handleDataTree(t,e){let i={},o=[];return this.$$lib__.each(t,n=>{let l={};l.id=n[e.id],l.name=n[e.name],l.icon=n[e.icon],l.disabled=n[e.disabled],l.hide=n[e.hide],l.sort=n[e.sort],n[e.pid]!=null&&n[e.pid]!=""&&n[e.pid]!=e.firstPid?(i[n[e.pid]]||(i[n[e.pid]]=[]),i[n[e.pid]].push(l)):o.push(l)}),this.transferFl(o,i,e.id,e),JSON.parse(JSON.stringify(o))},transferFl(t,e,i,o){o.sort&&t.sort(this.compare("sort")),this.$$lib__.each(t,n=>{let l=e[n[i]];l&&(n.children=l,this.transferFl(l,e,i,o))})},compare(t){return function(e,i){let o=e[t],n=i[t];return!isNaN(Number(o))&&!isNaN(Number(n))&&(o=Number(o),n=Number(n)),o<n?-1:o>n?1:0}},getImageUrl(t){return t&&t!=""?t.indexOf("data:")==0?`url(${t})`:"url("+x.appendImageBaseURL(t)+")":""},getGlobalParamsValue(t){if(this.getCanvasSetting==null||this.getCanvasSetting.data==null||this.getCanvasSetting.data.globalParams==null||this.getCanvasSetting.data.globalParams.paramsValue==null||this.getCanvasSetting.data.globalParams.paramsValue.length<1)return"";let e=this.$$lib__.find(this.getCanvasSetting.data.globalParams.paramsValue,o=>o.paramName==t);if(!e)return this.getCanvasSetting.data.globalParams.params[t];let i=this.getURLParams[e.urlParams];return i||(i=this.getCanvasSetting.data.globalParams.params[t]),i}}},D=A,O=(0,m.Z)(D,w,v,!1,null,"090a56b0",null),z=O.exports}}]);
