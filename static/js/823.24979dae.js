"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[823],{62570:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _components_editor_widgets_common_view_hide_button__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44513),_utils_bus_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(27966),_components_editor_board_digital_scrolling_count_to_count_to__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(34580),_js_editor_action_action_receive__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(45061),_js_editor_action_action_sendout__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(26711),_js_editor_action_action_lifecycle__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(56279),_title_flip_config__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(28617),element_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(55616),element_ui__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_7__),_title_flip_config_extend__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(17499),console=__webpack_require__(49500);__webpack_exports__.Z={components:{CountTo:_components_editor_board_digital_scrolling_count_to_count_to__WEBPACK_IMPORTED_MODULE_2__.Z,HideButton:_components_editor_widgets_common_view_hide_button__WEBPACK_IMPORTED_MODULE_0__.Z},props:["widgetInfo"],name:"title-flip",mixins:[_title_flip_config__WEBPACK_IMPORTED_MODULE_6__.uN,_title_flip_config_extend__WEBPACK_IMPORTED_MODULE_8__.s,_js_editor_action_action_receive__WEBPACK_IMPORTED_MODULE_3__.u,_js_editor_action_action_sendout__WEBPACK_IMPORTED_MODULE_4__.H,_js_editor_action_action_lifecycle__WEBPACK_IMPORTED_MODULE_5__.P],data(){return{startVal:0,endVal:0,duration:3e3,decimals:0}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(info){this.endVal=0,info.dataset[info.dataset.type]&&info.dataset[info.dataset.type].dimensions&&info.dataset[info.dataset.type].dimensions.length>0?this.endVal=this.getValEx(info.dataset[info.dataset.type].source,info.dataset[info.dataset.type].dimensions,info.dataset[info.dataset.type].encode.number):this.endVal=info.dataset[info.dataset.type].encode.number,setTimeout(()=>{this.startVal=eval(eval(this.endVal))},info.config.text.number.duration),this.lifecycleAfterLoad()},reLoadInfo(t){t&&(this.$refs.titleFlip.style.width=t.attr.w+"px",this.$refs.titleFlip.style.height=t.attr.hh+"px"),this.loadInfo(t)},initAction(t){this.actionReceive(t)},getValEx(t,i,e){let s=-1;if(t&&t.length>0){for(let a=0;a<i.length;a++)i[a]==e&&(s=a);return parseFloat(t[0][s])}return NaN},getStylePrefix(t){let i={wordWrap:"break-word",float:"left",display:t.config.text.prefix.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.config.text.prefix.w)+"px",marginLeft:this.mUtils.getNewPxW(t.config.text.prefix.left)+"px",marginTop:this.mUtils.getNewPxH(t.config.text.prefix.top)+"px",fontSize:this.mUtils.getNewFontSize(t.config.text.prefix.fontSize)+"px",color:t.config.text.prefix.color,fontWeight:t.config.text.prefix.fontWeight,fontStyle:t.config.text.prefix.fontStyle,fontFamily:t.config.text.prefix.fontFamily,textDecoration:t.config.text.prefix.textDecoration,textAlign:t.config.text.prefix.horizontalAlignment},e=t.config.text.prefix;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleNumber(t){let i={wordWrap:"break-word",float:"left",display:t.config.text.number.hide==!0?"none":"",marginLeft:this.mUtils.getNewPxW(t.config.text.number.left)+"px",marginTop:this.mUtils.getNewPxH(t.config.text.number.top)+"px",fontSize:this.mUtils.getNewPxW(t.config.text.number.fontSize)+"px",color:t.config.text.number.color,fontWeight:t.config.text.number.fontWeight,fontFamily:t.config.text.number.fontFamily,fontStyle:t.config.text.number.fontStyle,textDecoration:t.config.text.number.textDecoration,textAlign:t.config.text.number.horizontalAlignment};t.config.text.number.w&&(i.width=this.mUtils.getNewPxW(t.config.text.number.w)+"px"),this.endVal<0&&(i.color=t.config.text.number.negativeColor);let e=t.config.text.number;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleSuffix(t){let i={wordWrap:"break-word",float:"left",display:t.config.text.suffix.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.config.text.suffix.w)+"px",marginLeft:this.mUtils.getNewPxW(t.config.text.suffix.left)+"px",marginTop:this.mUtils.getNewPxH(t.config.text.suffix.top)+"px",fontSize:this.mUtils.getNewPxW(t.config.text.suffix.fontSize)+"px",color:t.config.text.suffix.color,fontWeight:t.config.text.suffix.fontWeight,fontFamily:t.config.text.suffix.fontFamily,fontStyle:t.config.text.suffix.fontStyle,textDecoration:t.config.text.suffix.textDecoration,textAlign:t.config.text.suffix.horizontalAlignment},e=t.config.text.suffix;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleInfo(t){let i={};return t.top&&(i.paddingTop=this.mUtils.getNewPxH(t.top)+"px"),t.left&&(i.paddingLeft=this.mUtils.getNewPxW(t.left)+"px"),t.right&&(i.paddingRight=this.mUtils.getNewPxW(t.right)+"px"),t.fontStyle.fontSize&&(i.fontSize=this.mUtils.getNewPxW(t.fontStyle.fontSize)+"px"),t.fontStyle.fontFamily&&(i.fontFamily=t.fontStyle.fontFamily),t.fontStyle.color&&(i.color=t.fontStyle.color),t.fontStyle.fontWeight&&(i.fontWeight=t.fontStyle.fontWeight),t.fontStyle.fontStyle&&(i.fontStyle=t.fontStyle.fontStyle),t.fontStyle.textDecoration&&(i.textDecoration=t.fontStyle.textDecoration),t.fontStyle.horizontalAlignment&&(i.textAlign=t.fontStyle.horizontalAlignment),i},onClick(){let t=this,i=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(i,e=>{if(e.enabled&&e.code==t.$$global_editor.actionType.click.code){let s=t.$$global_editor.actionType.click.code+"_"+t.widgetInfo.id,a={number:JSON.parse(JSON.stringify(t.$refs.countTo.endVal))};if(e.paramsExtend&&e.paramsExtend.length>0){let d=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(d=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(a,e.paramsExtend,d,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(console.log("Execute script for "+t.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){element_ui__WEBPACK_IMPORTED_MODULE_7__.Message.warning({message:e.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",e.script.content),a=this.customScript_actionSend_clickParam(a)}_utils_bus_js__WEBPACK_IMPORTED_MODULE_1__.Z.$emit(s,a),e.postMessage&&this.doPostMessage(a),this.actionNameList.push(s)}else if(e.enabled&&e.code==t.$$global_editor.actionType.openLink.code){let s={};if(e.paramsExtend&&e.paramsExtend.length>0){let a=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(a=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(s,e.paramsExtend,a,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(console.log("Execute script for "+t.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){element_ui__WEBPACK_IMPORTED_MODULE_7__.Message.warning({message:e.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_openLinkParam=new Function("param",e.script.content),s=this.customScript_actionSend_openLinkParam(s)}this.openLinkAction(e,s)}})}}}},17499:function(t,i,e){e.d(i,{s:function(){return a}});var s=e(67157);const a={mixins:[s.c],data(){return{config_extend:{config:{text:{margin:{top:13,left:7},number:{fontSize:"16",fontFamily:"alibabaPuHuiTiMedium"}}}},filter_config:{text:{prefix:{color:"",startColor:"",endColor:""},number:{color:"",startColor:"",endColor:""},suffix:{color:"",startColor:"",endColor:""}},information:{fontStyle:{color:""}}}}},methods:{filterPredefineColoursSchemeConfig(d,_){this.getNewConfig(d,_,this.filter_config)}}}},56279:function(t,i,e){e.d(i,{P:function(){return d}});var s=e(86892),a=e(49500);const d={mixins:[s.D],created(){},methods:{lifecycleBeforeChartsLoad(_){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&a.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),a.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let f=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[_]);if(f)return f}return _},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&a.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),a.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},34580:function(t,i,e){e.d(i,{Z:function(){return w}});var s=function(){var r=this,u=r._self._c;return u("span",[r._v(" "+r._s(r.displayValue)+" ")])},a=[];let d=0;const _="webkit moz ms o".split(" ");let c,f;if(typeof window>"u")c=function(){},f=function(){};else{c=window.requestAnimationFrame,f=window.cancelAnimationFrame;let l;for(let r=0;r<_.length&&!(c&&f);r++)l=_[r],c=c||window[l+"RequestAnimationFrame"],f=f||window[l+"CancelAnimationFrame"]||window[l+"CancelRequestAnimationFrame"];(!c||!f)&&(c=function(r){const u=new Date().getTime(),p=Math.max(0,16-(u-d)),x=window.setTimeout(()=>{r(u+p)},p);return d=u+p,x},f=function(r){window.clearTimeout(r)})}var m={name:"count-to",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:2,validator(l){return l>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(l,r,u,p){return u*(-Math.pow(2,-10*l/p)+1)*1024/1023+r}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{decimals(){this.start()},startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=c(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){f(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,c(this.count)},reset(){this.startTime=null,f(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(l){this.startTime||(this.startTime=l),this.timestamp=l;const r=l-this.startTime;this.remaining=this.localDuration-r,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(r,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(r,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(r/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(r/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),r<this.localDuration?this.rAF=c(this.count):this.$emit("callback")},isNumber(l){return!isNaN(parseFloat(l))},formatNumber(l){l=l.toFixed(this.decimals),l+="";const r=l.split(".");let u=r[0];const p=r.length>1?this.decimal+r[1]:"",x=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;x.test(u);)u=u.replace(x,"$1"+this.separator+"$2");return this.prefix+u+p+this.suffix}},destroyed(){f(this.rAF)}},o=m,n=e(68141),h=(0,n.Z)(o,s,a,!1,null,"696c34af",null),w=h.exports},44513:function(t,i,e){e.d(i,{Z:function(){return m}});var s=function(){var n=this,h=n._self._c;return n.attr.buttonHide?h("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(w){return n.onHide()}}},[n.openTooltip?h("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[h("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):h("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},a=[],d=e(52246),_={props:["attr"],name:"hide-button",data(){return{isPc:d.b}},computed:{openTooltip:function(){let o=!1,n=this.attr.buttonHideTooltipContent;return d.b&&n&&n!=null&&n.trim()!=""&&(o=!0),o}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},c=_,f=e(68141),g=(0,f.Z)(c,s,a,!1,null,"bf399b9a",null),m=g.exports},20823:function(t,i,e){e.r(i),e.d(i,{default:function(){return g}});var s=function(){var o=this,n=o._self._c;return n("div",{ref:"titleFlip",style:{width:o.widgetInfo.attr.w+"px",height:o.widgetInfo.attr.hh+"px"}},[n("hide-button",{attrs:{attr:o.widgetInfo.attr}}),n("div",{style:{width:o.mUtils.getNewPxW(o.widgetInfo.attr.w-o.widgetInfo.config.text.margin.left)+"px",height:o.widgetInfo.attr.hh+"px",paddingLeft:o.mUtils.getNewPxW(o.widgetInfo.config.text.margin.left)+"px",paddingTop:o.mUtils.getNewPxH(o.widgetInfo.config.text.margin.top)+"px",cursor:this.getCursor(o.widgetInfo.action,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code)},on:{click:o.onClick}},[n("div",{style:o.getStylePrefix(o.widgetInfo)},[n("span",[o._v(" "+o._s(o.widgetInfo.config.text.prefix.lable)+" ")])]),n("div",{style:o.getStyleNumber(o.widgetInfo)},[n("count-to",{directives:[{name:"show",rawName:"v-show",value:!this.$$lib__.isNaN(o.endVal),expression:"!this.$$lib__.isNaN(endVal) "}],ref:"countTo",attrs:{startVal:o.startVal,endVal:o.endVal,duration:o.widgetInfo.config.text.number.duration,decimals:o.widgetInfo.config.text.number.decimals,separator:o.widgetInfo.config.text.number.separator}}),n("span",{directives:[{name:"show",rawName:"v-show",value:this.$$lib__.isNaN(o.endVal),expression:"this.$$lib__.isNaN(endVal)"}]},[o._v(" - ")])],1),n("div",{style:o.getStyleSuffix(o.widgetInfo)},[n("span",[o._v(" "+o._s(o.widgetInfo.config.text.suffix.lable)+" ")])]),o.widgetInfo.config.information.hide?o._e():n("div",{staticClass:"my-textarea"},[n("div",{ref:"myTextArea",staticClass:"test-div",style:o.getStyleInfo(o.widgetInfo.config.information),attrs:{contenteditable:"true"},domProps:{textContent:o._s(o.widgetInfo.config.information.text)}})])])],1)},a=[],d=e(62570),_=d.Z,c=e(68141),f=(0,c.Z)(_,s,a,!1,null,"5d41bab5",null),g=f.exports}}]);
