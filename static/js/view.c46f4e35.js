(function(){"use strict";var kt={193575:function(O,M,h){h.d(M,{E:function(){return nt}});var I=h(113067),T=h(879016),C=h(627996),x=h(766941),H=h(231954),k=h(126711),R=h(363488),Z=h(833264),j=h(927966),X=h(321300),D=h(555616),E=h.n(D),J=h(148836),V=h(275770),Y=h(149500);const nt={created(){},data(){return{isFull:!1,first:{}}},mixins:[R.Z,Z.t,k.H],computed:{...(0,J.Se)(["viewType","viewBiId","viewGuid","responseHeaders"])},methods:{...(0,J.nv)(["setFullscreenLoading","setURLParams","updateWidgetParentArrDataset","updateWidgetAllArrDataset"]),getDynamicWidgetsSource(e){for(let n in this.autoUpdateWidget)n&&e[n]?.dataset?.type&&e[n]?.dataset[e[n].dataset.type]&&this.setTimers(e[n],e[n].dataset[e[n].dataset.type].autoUpdateTime)},getPreviewData(e){if(e.dataset)switch(e.dataset.type){case this.$$global_editor.dataSourcType.dynamic.code:this.getPreviewDataDynamic(e);break;case this.$$global_editor.dataSourcType.local.code:this.getPreviewDataLocal(e);break}},getPreviewDataDynamic(e){if(!e.dataset.dynamic.dataSetId||e.dataset.dynamic.noRequest)return;let n={dataSetId:e.dataset.dynamic.dataSetId,dimensions:e.dataset.dynamic.dimensions,columnList:e.dataset.dynamic.columnList,dimensionsAlias:e.dataset.dynamic.dimensionsAlias,query:e.dataset.dynamic.query},l={dataSet:JSON.stringify(n)};this.getDynamicSource(l,m=>{if(e.dataset.dynamic.source=[],e.dataset.dynamic.total=0,m&&m.status==200){let w=this.getDataSetData(m.data,e.dataset.dynamic.query,e.dataset.dynamic.dimensionsAlias,e.dataset.dynamic.dataSetId);this.updataWidgetSource(e,w,m.jsonObject)}else{let w=e.dataset.dynamic.dataSetName&&e.dataset.dynamic.dataSetName!=""?e.dataset.dynamic.dataSetName:e.dataset.dynamic.dataSetId;D.Message.error({message:"\u6570\u636E\u96C6:[ "+w+" ]\u83B7\u53D6\u5931\u8D25\uFF0C"+m.msg,offset:60})}})},getPreviewDataLocal(e){let n=e.dataset.local.dataLocalId;if(n)if(this.viewType){if(this.viewBiId==null&&this.viewGuid==null){Y.error("\u7F16\u8F91\u5668ID\u548C\u7248\u672CID  \u81F3\u5C11\u6709\u4E00\u4E2A"),D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B");return}switch(this.viewType){case this.$$global.editType.original.code:T.V.getDataLocalByDatalocalId(n).then(l=>{let m=null;if(l&&l.status==200)if(l.data&&l.data.configJson&&l.data.configJson!=""){let w=JSON.parse(l.data.configJson);this.updataWidgetSource(e,w,null)}else m=e.dataset.local.dataLocalId&&e.dataset.local.dataLocalName!=""?e.dataset.local.dataLocalName:e.dataset.local.dataLocalId,m="\u672C\u5730\u6570\u636E:[ "+m+" ]\u672A\u83B7\u53D6\u5230\u6570\u636E";else m=e.dataset.local.dataLocalId&&e.dataset.local.dataLocalName!=""?e.dataset.local.dataLocalName:e.dataset.local.dataLocalId,m="\u6570\u636E\u96C6:[ "+m+" ]\u83B7\u53D6\u5931\u8D25\uFF0C"+l.msg;m&&D.Message.error({message:m,offset:60})});break;case this.$$global.editType.public.code:this.getDataLocalByDatalocalId(n).then(l=>{let m=null;if(l&&l.status==200)if(l.data&&l.data.configJson&&l.data.configJson!=""){let w=JSON.parse(l.data.configJson);this.updataWidgetSource(e,w,null)}else m=e.dataset.local.dataLocalId&&e.dataset.local.dataLocalName!=""?e.dataset.local.dataLocalName:e.dataset.local.dataLocalId,m="\u672C\u5730\u6570\u636E:[ "+m+" ]\u672A\u83B7\u53D6\u5230\u6570\u636E";else m=e.dataset.local.dataLocalId&&e.dataset.local.dataLocalName!=""?e.dataset.local.dataLocalName:e.dataset.local.dataLocalId,m="\u6570\u636E\u96C6:[ "+m+" ]\u83B7\u53D6\u5931\u8D25\uFF0C"+l.msg;m&&D.Message.error({message:m,offset:60})});break;default:D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B")}}else this.viewBiId?T.V.getDataLocalByDatalocalId(n).then(l=>{let m=null;if(l&&l.status==200)if(l.data&&l.data.configJson&&l.data.configJson!=""){let w=JSON.parse(l.data.configJson);this.updataWidgetSource(e,w,null)}else m=e.dataset.local.dataLocalId&&e.dataset.local.dataLocalName!=""?e.dataset.local.dataLocalName:e.dataset.local.dataLocalId,m="\u672C\u5730\u6570\u636E:[ "+m+" ]\u672A\u83B7\u53D6\u5230\u6570\u636E";else m=e.dataset.local.dataLocalId&&e.dataset.local.dataLocalName!=""?e.dataset.local.dataLocalName:e.dataset.local.dataLocalId,m="\u6570\u636E\u96C6:[ "+m+" ]\u83B7\u53D6\u5931\u8D25\uFF0C"+l.msg;m&&D.Message.error({message:m,offset:60})}):D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B")},downloadExcel(e){let n=JSON.parse(e);if(!n||n.type!="dynamic")return;let l={dataSet:JSON.stringify(n.dynamic)};if(this.viewType){if(this.viewBiId==null&&this.viewGuid==null){Y.error("\u7F16\u8F91\u5668ID\u548C\u7248\u672CID  \u81F3\u5C11\u6709\u4E00\u4E2A"),D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B");return}switch(this.viewType){case this.$$global.editType.original.code:this.fullscreenLoading=!0,I.o.getAggregateDataForExcel(l).then(m=>{this.fullscreenLoading=!1,this.download(m)});break;case this.$$global.editType.public.code:this.fullscreenLoading=!0,this.getAggregateDataForExcel(l).then(m=>{this.fullscreenLoading=!1,this.download(m)});break;default:D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B")}}else this.viewBiId?(this.fullscreenLoading=!0,I.o.getAggregateDataForExcel(l).then(m=>{this.fullscreenLoading=!1,this.download(m)})):D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B")},download(e){let n=this.responseHeaders["content-disposition"];if(!e)return;let l=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8"}),m=window.URL.createObjectURL(l);if(n){let w=window.decodeURI(n.split("=")[1]);const N=document.createElement("a");N.href=m,N.download=w,N.click(),URL.revokeObjectURL(m)}else window.location.href=m},getDynamicSource(e,n){let l=new Date().getTime();if(this.viewType){if(this.viewBiId==null&&this.viewGuid==null){Y.error("\u7F16\u8F91\u5668ID\u548C\u7248\u672CID  \u81F3\u5C11\u6709\u4E00\u4E2A"),D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B");return}switch(this.viewType){case this.$$global.editType.original.code:I.o.getAggregateDataEx(e).then(m=>{this.consoleQueryTime(l,e),n&&n(m)});break;case this.$$global.editType.public.code:this.getAggregateDataEx(e).then(m=>{this.consoleQueryTime(l,e),n&&n(m)});break;default:D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B")}}else this.viewBiId?I.o.getAggregateDataEx(e).then(m=>{this.consoleQueryTime(l,e),n&&n(m)}):D.Message.error("\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B")},consoleQueryTime(e,n){let l={};n&&n.dataSet&&(l=JSON.parse(n.dataSet)),Y.info("dataSetId\uFF1A"+l.dataSetId,"queryTime\uFF1A"+(new Date().getTime()-e)/1e3+" s","param\uFF1A",l.query)},updataWidgetSource(e,n,l){switch(e.dataset.type){case this.$$global_editor.dataSourcType.dynamic.code:e.dataset.dynamic.source=n.data,n.total&&(e.dataset.dynamic.total=n.total);break;case this.$$global_editor.dataSourcType.local.code:e.dataset.local.dimensionsAlias=[],e.dataset.local.columnList=[],e.dataset.local.source=[],e.dataset.local.dimensions=[],e.dataset.local.dimensionsAlias=n.dimensionsAlias,e.dataset.local.columnList=n.columnList,e.dataset.local.source=n.source,e.dataset.local.dimensions=n.dimensions;break}this.updateWidgetAllArrDataset(e),this.updateWidgetParentArrDataset(e),this.$refs["comp_"+e.id][0].reLoadInfo(e),this.sendoutDataloadSuccess(e),this.sendoutResponseData(e,n,l)},setTimers(e,n){if(n&&n>=3){let l=setInterval(()=>{this.getPreviewData(e)},n*1e3);this.timerArr.push(l)}else Y.warn("\u7EC4\u4EF6[ "+e.name+" ]\u8BBE\u7F6E\u5B9A\u65F6\u8BF7\u6C42\u6570\u636E\u7684\u65F6\u95F4\u95F4\u9694\u5FC5\u987B\u5927\u4E8E10\u79D2,\u5426\u5219\u5B9A\u65F6\u8BF7\u6C42\u6570\u636E\u5C06\u4E0D\u751F\u6548")},openLink(e){if(this.clickTitle(e),e.title.link.use)switch(e.title.link.type){case this.$$global_editor.linkType.inside.code:this.openLinkIn(e.title.link.inside);break;case this.$$global_editor.linkType.outside.code:this.openLinkOut(e.title.link.outside);break}},openLinkIn(e){if(e.newWindow||e.refreshURL){let n=location.origin+H.Z.baseConfig.projectName+"/view.html?tp="+e.publishType;e.applicationId&&(n=n+"&appId="+e.applicationId),e.boardId&&e.isLast?n=n+"&biId="+e.boardId:n=n+"&biPid="+e.publishId,n+=X.getLoadUrlComponent(e.layoutJson),e.refreshURL?window.location.href=n:window.open(n)}else{let n={boardId:null,publishId:null,publishType:e.publishType};e.applicationId&&(n.applicationId=e.applicationId),e.boardId&&e.isLast?n.boardId=e.boardId:n.publishId=e.publishId,this.$emit("doReSetBoardId",n)}},openLinkOut(e){let n=e.url;n?n.substr(0,2)=="//"?n=window.location.protocol+n:n[0]=="/"?n=window.location.origin+n:n.indexOf("http://")==-1&&n.indexOf("https://")==-1&&(n="http://"+n):Y.log("\u6253\u5F00\u94FE\u63A5\u4E8B\u4EF6\u9519\u8BEF\uFF0Curl \u672A\u8BBE\u7F6E"),window.open(n,e.newWindow==!0?"_blank":"_self")},clear(){if(this.timerArr?.length>0)for(let e in this.timerArr)clearInterval(e);this.timerArr=[]},getImageUrl(e){if(e&&e!="")return"url("+X.appendImageBaseURL(e)+")"},getImageFullUrl(e){if(e&&e!="")return X.appendImageBaseURL(e)},doFullScreen(){if(this.isFull)document.exitFullscreen?(document.exitFullscreen(),this.isFull=!1):document.msExitFullscreen?(document.msExitFullscreen(),this.isFull=!1):document.mozCancelFullScreen?(document.mozCancelFullScreen(),this.isFull=!1):document.webkitExitFullscreen&&(document.webkitExitFullscreen(),this.isFull=!1);else{let e=document.documentElement;e.requestFullscreen?(e.requestFullscreen(),this.isFull=!0):e.msRequestFullscreen?(e.msRequestFullscreen(),this.isFull=!0):e.mozRequestFullScreen?(e.mozRequestFullScreen(),this.isFull=!0):e.webkitRequestFullscreen&&(e.webkitRequestFullscreen(),this.isFull=!0)}},clickTitle(e){if(e.action==null||e.action.sendOut==null||e.action.sendOut.actionList==null)return;let n=e.action.sendOut.actionList;this.$$lib__.each(n,l=>{if(l.enabled&&l.code==V.default.clickGlobalTitle.code){let m=V.default.clickGlobalTitle.code+"_"+e.id,w={text:e.title.text,title:e.title.text};if(l.paramsExtend&&l.paramsExtend.length>0){let N=[];e.dataset[e.dataset.type].source&&e.dataset[e.dataset.type].source.length>0&&(N=e.dataset[e.dataset.type].source[0]),this.getExtendParams(w,l.paramsExtend,N,e.dataset[e.dataset.type].dimensions)}if(l.script&&l.script.enabled){if(Y.log("Execute script for "+l.name+" component to "+V.default.clickGlobalTitle.name+" component"),l.script.content==""){D.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",l.script.content),w=this.customScript(w)}j.Z.$emit(m,w),l.postMessage&&this.doPostMessage(w),this.actionNameList.push(m)}})},actionShowHide(e){let n=e.action.receive.show;n&&n.enabled&&n.showList&&n.showList.length>0&&this.doActionShowOrHide(n.showList,n.value,n.script,e.name,"show",n.values?n.values:[]);let l=e.action.receive.hide;l&&l.enabled&&l.hideList&&l.hideList.length>0&&this.doActionShowOrHide(l.hideList,l.value,l.script,e.name,"hide",l.values?l.values:[]);let m=e.action.receive.showHide;m&&m.enabled&&m.showHideList&&m.showHideList.length>0&&this.doActionShowOrHide(m.showHideList,m.value,m.script,e.name,"showHide",m.values?m.values:[])},doActionShowOrHide(e,n,l,m,w,N){e&&e.length<1||this.$$lib__.each(e,K=>{if(K&&K.length<1)return;let Q=K[0][1]+"_"+K[0][0];K[0][1].indexOf("_")>-1&&(Q=K[0][1]),j.Z.$on(Q,q=>{Y.debug(q);let z=K[0][2];if(z){let ot=z.indexOf("|");ot>-1&&(z=K[0][2].substring(ot+1))}let u=!0,it=!1;if(l&&l.enabled){if(it=!0,Y.log("Execute script for "+m+" component to "+w+" component"),l.content==""){D.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60}),u=!1;return}w=="show"&&(this.doShow=new Function("data","param_key","value","values",l.content)),w=="hide"&&(this.doHide=new Function("data","param_key","value","values",l.content)),w=="showHide"&&(this.doShowHide=new Function("data","param_key","value","values",l.content))}u&&(w=="show"&&this.doShow(q,z,n,N),w=="hide"&&this.doHide(q,z,n,N),w=="showHide"&&this.doShowHide(q,z,n,N),it&&Y.log(w+" component of "+m+" component Script execution complete"))})})},doShow(e,n,l,m){let w=[];w.push(l),m&&(w=w.concat(m)),w.forEach(N=>{(N==null||N==null||N==""||N==e[n])&&(this.widgetInfo.attr.hide=!1)})},doHide(e,n,l,m){let w=[];w.push(l),m&&(w=w.concat(m)),w.forEach(N=>{(N==null||N==null||N==""||N==e[n])&&(this.widgetInfo.attr.hide=!0)})},doShowHide(e,n,l,m){let w=[];w.push(l),m&&(w=w.concat(m)),w.forEach(N=>{(N==null||N==null||N==""||N==e[n])&&(this.widgetInfo.attr.hide=!this.widgetInfo.attr.hide)})},onHide(){this.widgetInfo.attr.hide=!0,this.sendButtonHide(this.widgetInfo)},sendoutDataloadSuccess(e){e&&e.action&&e.action.sendOut&&e.action.sendOut.actionList&&e.action.sendOut.actionList.length>0&&this.$$lib__.each(e.action.sendOut.actionList,n=>{if(n.code==V.default.dataLoad.code&&n.enabled){let l=n.code+"_"+e.id,m={};if(n.paramsExtend&&n.paramsExtend.length>0&&this.getParamsExtend(m,n.paramsExtend,e),n.script&&n.script.enabled){if(Y.log("Execute script for "+n.name+" component to "+V.default.dataLoad.name+" component"),n.script.content==""){D.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_dataLoad=new Function("param,widgetInfo",n.script.content),m=this.customScript_actionSend_dataLoad(m,e)}setTimeout(()=>{j.Z.$emit(l,m)},50),n.postMessage&&this.doPostMessage(m),this.actionNameList.push(l)}})},customScript_actionSend_dataLoad(e,n){return e},sendoutResponseData(e,n,l){e&&e.action&&e.action.sendOut&&e.action.sendOut.actionList&&e.action.sendOut.actionList.length>0&&this.$$lib__.each(e.action.sendOut.actionList,m=>{if(m.code==this.$$global_editor.actionType.responseData.code&&m.enabled){let w=m.code+"_"+e.id,N={tableObject:n,jsonObject:l};if(m.script&&m.script.enabled){if(Y.log("Execute script for "+m.name+" component to "+this.$$global_editor.actionType[m.code].script.title+" component"),m.script.content==""){D.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_responseData=new Function("param",m.script.content),N=this.customScript_actionSend_responseData(N)}setTimeout(()=>{j.Z.$emit(w,N)},50),m.postMessage&&this.doPostMessage(N),this.actionNameList.push(w)}})},customScript_actionSend_responseData(e){return e},getBindStyle(e){let n={opacity:e.attr.opacity,backgroundColor:e.attr.backgroundColor,backgroundImage:this.getImageUrl(e.attr.backgroundImage),backgroundSize:e.attr.backgroundSize,zIndex:e.attr.z,width:e.attr.widgetW+"px",height:e.attr.h+"px"};return n.backgroundSize=="contain-no-repeat"&&(n.backgroundPosition="top "+e.attr.align,n.backgroundSize="contain",n.backgroundRepeat="no-repeat"),n.overflow=e.border.overflowShow?"hidden":"visible",e.border.hide!=!0&&((e.border.hShadow||e.border.vShadow)&&(n.boxShadow=(e.border.hShadow||0)+"px "+(e.border.vShadow||0)+"px "+(e.border.blur||0)+"px "+e.border.blurColor||"rgba(0,0,0,0)"),e.border.type==!1?(n.borderTopWidth=e.border.widthT+"px",n.borderRightWidth=e.border.widthR+"px",n.borderBottomWidth=e.border.widthB+"px",n.borderLeftWidth=e.border.widthL+"px",n.boxSizing="content-box",n.borderTopStyle=e.border.styleT,n.borderRightStyle=e.border.styleR,n.borderBottomStyle=e.border.styleB,n.borderLeftStyle=e.border.styleL,n.borderTopColor=e.border.colorT,n.borderRightColor=e.border.colorR,n.borderBottomColor=e.border.colorB,n.borderLeftColor=e.border.colorL,n.borderTopLeftRadius=e.border.radiusTL+"px",n.borderTopRightRadius=e.border.radiusTR+"px",n.borderBottomLeftRadius=e.border.radiusBL+"px",n.borderBottomRightRadius=e.border.radiusBR+"px"):e.border.type==!0&&(n.borderStyle=e.border.borderStyle,n.borderTopWidth=e.border.breadthT+"px",n.borderRightWidth=e.border.breadthR+"px",n.borderBottomWidth=e.border.breadthB+"px",n.borderLeftWidth=e.border.breadthL+"px",n.borderImageSource=this.getImageUrl(e.border.borderImage),n.borderImageSlice=e.border.cutT+" "+e.border.cutR+" "+e.border.cutB+" "+e.border.cutL,n.borderImageRepeat=e.border.repeat)),n},getTitleStyle(e){let n={display:e.title.hide==!0?"none":"",height:e.title.h+"px",opacity:e.title.opacity,backgroundColor:e.title.backgroundColor,backgroundImage:this.getImageUrl(e.title.backgroundImage),backgroundSize:e.title.backgroundSize,fontSize:e.title.label.fontSize+"px",color:e.title.label.color,fontWeight:e.title.label.fontWeight,fontFamily:e.title.label.fontFamily,fontStyle:e.title.label.fontStyle,textDecoration:e.title.label.textDecoration,textAlign:e.title.label.horizontalAlignment};return e.title.border.hide!=!0&&(n.borderBottomWidth=e.title.border.widthB+"px",n.borderBottomStyle=e.title.border.styleB,n.borderBottomColor=e.title.border.colorB?e.title.border.colorB:"transparent",n.borderTopLeftRadius=e.title.border.radiusTL?e.title.border.radiusTL+"px":"0px",n.borderTopRightRadius=e.title.border.radiusTR?e.title.border.radiusTR+"px":"0px",n.borderBottomLeftRadius=e.title.border.radiusBL?e.title.border.radiusBL+"px":"0px",n.borderBottomRightRadius=e.title.border.radiusBR?e.title.border.radiusBR+"px":"0px"),this.getCursor(e.action,V.default.clickGlobalTitle.code)=="pointer"||e.title.link&&e.title.link.use&&e.title.link.use==!0?n.cursor="pointer":n.cursor="default",n},getWidgetTitleStyle(e){let n=e.title.position==="left"||e.title.position==="right"?"inline-block":"",l={display:e.title.hide==!0?"none":n,opacity:e.title.opacity,backgroundColor:e.title.backgroundColor,backgroundImage:this.getImageUrl(e.title.backgroundImage),backgroundSize:e.title.backgroundSize,boxSizing:"border-box",fontSize:e.title.label.fontSize+"px",color:e.title.label.color,fontWeight:e.title.label.fontWeight,fontFamily:e.title.label.fontFamily,fontStyle:e.title.label.fontStyle,textDecoration:e.title.label.textDecoration,textAlign:e.title.label.horizontalAlignment};return e.title.position==="left"||e.title.position==="right"?(l.width=e.title.h+"px",l.height=e.attr.h+"px"):(l.width="100%",l.height=e.title.h+"px"),e.title.border.hide!=!0&&(l.borderBottomWidth=e.title.border.widthB+"px",l.borderBottomStyle=e.title.border.styleB,l.borderBottomColor=e.title.border.colorB?e.title.border.colorB:"transparent",l.borderTopLeftRadius=e.title.border.radiusTL?e.title.border.radiusTL+"px":"0px",l.borderTopRightRadius=e.title.border.radiusTR?e.title.border.radiusTR+"px":"0px",l.borderBottomLeftRadius=e.title.border.radiusBL?e.title.border.radiusBL+"px":"0px",l.borderBottomRightRadius=e.title.border.radiusBR?e.title.border.radiusBR+"px":"0px"),e.title.link&&e.title.link.use&&e.title.link.use==!0?l.cursor="pointer":l.cursor="default",e.title.backgroundSize&&(e.title.backgroundSize=="contain-no-repeat"?(e.title.position=="top"||e.title.position=="bottom"?l.backgroundPosition=e.title.position+" "+e.title.align:l.backgroundPosition=e.title.vertical+" "+e.title.position,l.backgroundSize="contain",l.backgroundRepeat="no-repeat"):l.backgroundSize=e.title.backgroundSize),l},getTitleSpanStyle(e){let n=e.title.label,l={display:e.title.hide==!0?"none":""};return n.textShadow&&(l.textShadow=n.hShadow+"px "+n.vShadow+"px "+n.textShadowBlur+"px "+n.textShadowColor||"rgba(0,0,0,0)"),n.textStroke&&(l.webkitTextStrokeWidth=n.textStrokeWidth+"px",l.webkitTextStrokeColor=n.textStrokeColor),n.gradient&&(l.backgroundImage="linear-gradient("+n.angle+"deg,"+n.startColor+","+n.endColor+")",l.webkitBackgroundClip="text",l.webkitTextFillColor="transparent"),n.radius&&(l.transform="rotate("+n.radius+"deg)",l.display="inline-block"),l},getInfoStyle(){return{}},getWidgetClass(e){let n="widget_"+e.id+(e.attr.hide?"_hide":"_show");return n+=" widget_"+e.id+"_anime",n+=" my-comp",e.attr.initShow&&(n+=" animated"+e.attr.showAnimate[e.attr.showAnimate.length-1]),n},getWidgetStyle(e){let n={};return n.transform=e.attr.deg&&e.attr.deg!=0?"rotate("+e.attr.deg+"deg)":"rotate(0deg)",n.position="absolute",n.pointerEvents="auto",n.width=e.attr.widgetW+"px",n.height=e.attr.h+"px",n.left=e.attr.x+"px",n.top=e.attr.y+"px",n.zIndex=e.attr.z,this.first[e.id]?n.display="":n.display=e.attr.hide?"none":"",n},attrChange(e){this.first[e.id]||(this.first[e.id]=e.id,e.attr.hide=!e.attr.hide,e.attr.hide=!e.attr.hide);let n=this.$refs["widget_"+e.id][0];e.attr.hide?(n.parentElement.style.pointerEvents="none",e.attr.hideAnimate&&e.attr.hideAnimate.length>0?this.doWidgetAnime(e,e.attr.hideAnimate[0],e.attr.hideAnimate[1]):n.style.display="none"):(n.parentElement.style.pointerEvents="auto",n.style.display="block",e.attr.showAnimate&&e.attr.showAnimate.length>0?this.doWidgetAnime(e,e.attr.showAnimate[0],e.attr.showAnimate[1]):this.doWidgetAnime(e,"show","show"))},doWidgetAnime(e,n,l){l||(l=n);let m=".widget_"+e.id+"_anime",w=150,N=e.attr.x+e.attr.w,K=e.attr.y+e.attr.h,Q=window.innerWidth-e.attr.x,q=window.innerHeight-e.attr.y;this.$nextTick(()=>{this.$anime.remove(m);let z=document.querySelector(m);z.style.scale=1,z.style.opacity=1;let u={targets:m,duration:0,opacity:l.indexOf("Out")>-1?1:0,scale:1,skew:"0deg",rotate:"0deg",rotateX:"0deg",rotateY:"0deg",rotateZ:"0deg",translateX:0,translateY:0,translateZ:0,perspective:0};if(l=="show"){u.opacity=1,this.$anime(u);return}this.$anime(u),n=="bounce"&&(l=="bounceIn"&&(u.scale=[0,1],u.opacity=[0,1]),l=="bounceInDown"&&(u.opacity=[0,1],u.translateY=[-w,0]),l=="bounceInLeft"&&(u.opacity=[0,1],u.translateX=[-w,0]),l=="bounceInRight"&&(u.opacity=[0,1],u.translateX=[w,0]),l=="bounceInUp"&&(u.opacity=[0,1],u.translateY=[w,0]),l=="bounceOut"&&(u.scale=[1,0],u.opacity=[1,1,0]),l=="bounceOutDown"&&(u.opacity=[1,1,0],u.translateY=[0,w]),l=="bounceOutLeft"&&(u.opacity=[1,1,0],u.translateX=[0,-w]),l=="bounceOutRight"&&(u.opacity=[1,1,0],u.translateX=[0,w]),l=="bounceOutUp"&&(u.opacity=[1,1,0],u.translateY=[0,-w])),n=="fade"&&(u.easing="easeInOutQuart",l=="fadeIn"&&(u.opacity=[0,1]),l=="fadeInDown"&&(u.opacity=[0,1],u.translateY=[-w,0]),l=="fadeInDownBig"&&(u.opacity=[0,1],u.translateY=[-K,0]),l=="fadeInLeft"&&(u.opacity=[0,1],u.translateX=[-w,0]),l=="fadeInLeftBig"&&(u.opacity=[0,1],u.translateX=[-N,0]),l=="fadeInRight"&&(u.opacity=[0,1],u.translateX=[w,0]),l=="fadeInRightBig"&&(u.opacity=[0,1],u.translateX=[Q,0]),l=="fadeInUp"&&(u.opacity=[0,1],u.translateY=[w,0]),l=="fadeInUpBig"&&(u.opacity=[0,1],u.translateY=[q,0]),l=="fadeOut"&&(u.opacity=[1,0]),l=="fadeOutDown"&&(u.opacity=[1,0],u.translateY=[0,w]),l=="fadeOutDownBig"&&(u.opacity=[1,0],u.translateY=[0,q]),l=="fadeOutLeft"&&(u.opacity=[1,0],u.translateX=[0,-w]),l=="fadeOutLeftBig"&&(u.opacity=[1,0],u.translateX=[0,-N]),l=="fadeOutRight"&&(u.opacity=[1,0],u.translateX=[0,w]),l=="fadeOutRightBig"&&(u.opacity=[1,0],u.translateX=[0,Q]),l=="fadeOutUp"&&(u.opacity=[1,0],u.translateY=[0,-w]),l=="fadeOutUpBig"&&(u.opacity=[1,0],u.translateY=[0,-K])),n=="flip"&&(u.easing="easeInOutQuart",l=="flipIn"&&(u.opacity=[0,1],u.rotateY="1turn"),l=="flipInX"&&(u.opacity=[0,1],u.rotateX=["180deg","0deg"]),l=="flipInY"&&(u.opacity=[0,1],u.rotateY=["180deg","0deg"]),l=="flipOut"&&(u.rotateY="1turn",u.opacity=[1,0]),l=="flipOutX"&&(u.rotateX=["0deg","180deg"],u.opacity=[1,0]),l=="flipOutY"&&(u.rotateY=["0deg","180deg"],u.opacity=[1,0])),n=="rotate"&&(u.easing="easeInOutQuart",l=="rotateIn"&&(u.opacity=[0,1],u.rotate=["180deg","0deg"]),l=="rotateInDownLeft"&&(u.opacity=[0,1],u.rotate=["-90deg","0deg"],u.translateY=[-w,0]),l=="rotateInDownRight"&&(u.opacity=[0,1],u.rotate=["90deg","0deg"],u.translateY=[-w,0],u.translateX=[w,0]),l=="rotateInUpLeft"&&(u.opacity=[0,1],u.rotate=["90deg","0deg"],u.translateY=[w,0],u.translateX=[w,0]),l=="rotateInUpRight"&&(u.opacity=[0,1],u.rotate=["-90deg","0deg"],u.translateY=[w,0]),l=="rotateOut"&&(u.opacity=[1,0],u.rotate=["0deg","180deg"]),l=="rotateOutUpLeft"&&(u.opacity=[1,0],u.rotate=["0deg","-90deg"],u.translateY=[0,-w]),l=="rotateOutUpRight"&&(u.opacity=[1,0],u.rotate=["0deg","90deg"],u.translateY=[0,-w],u.translateX=[0,w]),l=="rotateOutDownLeft"&&(u.opacity=[1,0],u.rotate=["0deg","90deg"],u.translateY=[0,w],u.translateX=[0,w]),l=="rotateOutDownRight"&&(u.opacity=[1,0],u.rotate=["0deg","-90deg"],u.translateY=[0,w])),n=="sliders"&&(u.easing="easeInOutQuart",l=="slideInDown"&&(u.opacity=[1,1],u.translateY=[-w,0]),l=="slideInLeft"&&(u.opacity=[1,1],u.translateX=[-w,0]),l=="slideInRight"&&(u.opacity=[1,1],u.translateX=[w,0]),l=="slideInUp"&&(u.opacity=[1,1],u.translateY=[w,0]),l=="slideOutDown"&&(u.translateY=[0,w],u.opacity=[1,1,1,0]),l=="slideOutLeft"&&(u.translateX=[0,-w],u.opacity=[1,1,1,0]),l=="slideOutRight"&&(u.translateX=[0,w],u.opacity=[1,1,1,0]),l=="slideOutUp"&&(u.translateY=[0,-w],u.opacity=[1,1,1,0])),n.indexOf("roll")>-1&&(u.easing="easeInOutQuart",l=="rollIn"&&(u.opacity=[0,1],u.rotate=["-360deg","0deg"],u.translateX=[N,0]),l=="rollOut"&&(u.opacity=[1,0],u.rotate=["0deg","360deg"],u.translateX=[0,-Q])),n.indexOf("lightSpeed")>-1&&(u.easing="easeInOutQuart",l=="lightSpeedIn"&&(u.opacity=[0,1],u.skew=["-90deg","0deg"],u.translateX=[-N,0]),l=="lightSpeedOut"&&(u.opacity=[1,0],u.skew=["0deg","90deg"],u.translateX=[0,Q])),u.duration=1200,this.$anime(u)})},saveWidgetConfigData(e,n){if(this.viewType){if(this.viewBiId==null&&this.viewGuid==null){D.Message.error({message:"\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u4FDD\u5B58",offset:60}),n&&n();return}switch(this.viewType){case this.$$global.editType.original.code:this.saveOriginalWidgetData(e,n);break;case this.$$global.editType.public.code:this.savePublicWidgetData(e,n);break;default:n&&n(),D.Message.error({message:"\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u4FDD\u5B58",offset:60})}}else this.viewBiId?this.saveEditorWidgetData(e,n):(D.Message.error({message:"\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u4FDD\u5B58",offset:60}),n&&n())},saveEditorWidgetData(e,n){const l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});x.D.saveEditorWidgetData(this.viewBiId,e).then(m=>{l.close(),m&&m.status==200||D.Message.error({message:m.msg,offset:60}),n&&n(m)})},saveOriginalWidgetData(e,n){const l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});C.h.saveOriginalWidgetData({publishId:this.viewGuid,boardId:this.viewBiId,widgetInfo:e}).then(m=>{l.close(),m&&m.status==200||D.Message.error({message:m.msg,offset:60}),n&&n(m)})},savePublicWidgetData(e,n){const l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.savePublicWidgetDataApi({publishId:this.viewGuid,boardId:this.viewBiId,widgetInfo:e}).then(m=>{l.close(),m&&m.status==200||D.Message.error({message:m.msg,offset:60}),n&&n(m)})}}}},382176:function(O,M,h){var I=h(42160),T=function(){var a=this,r=a._self._c;return r("div",{staticClass:"gisqBI"},[r("screen-view")],1)},C=[],x=function(){var a=this,r=a._self._c;return r("div",{style:{height:"100%",width:"100%",position:a.screenPosition,overflowX:a.overflowX,overflowY:a.overflowY},attrs:{id:"boardAreaView"}},[r("board-area-view",{ref:"boardAreaView",attrs:{backAndRollback:a.backAndRollback},on:{doReSetBoardId:a.reSetBoardId,doBack:a.doBack,doRollback:a.doRollback,reset:a.reset}}),r("loading",{attrs:{loadingShow:a.loading,loadingStyle:a.loadingStyle}}),a.dialogVisible?r("div",{staticClass:"LapsePage"},[r("div",{staticClass:"LapsePageImage"},[r("img",{attrs:{src:h(803306)}}),r("div",{staticClass:"shadow"}),r("p",[a._v("\u60A8\u6CA1\u6709\u6743\u9650\u8BBF\u95EE\u9875\u9762\u6216\u8005\u4F1A\u8BDD\u5DF2\u7ECF\u8FC7\u671F,"),r("span",{on:{click:function(c){a.centerDialogVisible=!0}}},[a._v(" \u8BF7\u767B\u5F55")])])])]):a._e(),r("el-dialog",{staticClass:"dialogLoginForm",attrs:{"append-to-body":!0,visible:a.centerDialogVisible,"close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(c){a.centerDialogVisible=c}}},[r("login-form",{on:{loginResult:a.loginResult}})],1)],1)},H=[],k=function(){var a=this,r=a._self._c;return r("div",{staticClass:"my-screen",class:a.canvasClass,style:a.canvasSetting,attrs:{id:"my_bi_screen"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:a.backAndRollback.previous.length>0,expression:"backAndRollback.previous.length > 0"}],staticClass:"my-nav my-undo"},[r("i",{staticClass:"iconfont bi_chevronleft command",attrs:{title:"\u64A4\u9500"},on:{click:a.doBack}})]),a._l(a.currentScenes.page,function(c){return[c.initLoad==!0?r("div",{directives:[{name:"show",rawName:"v-show",value:c.initShow==!0,expression:"page.initShow == true"}],key:c.guid,staticClass:"my-board-page",style:{zIndex:c.zIndex,pointerEvents:"none"},attrs:{id:"page_"+c.guid}},[a._l(a.sortWidgetParentArr(c.guid),function(d){return[r("div",{key:d.id,style:a.getWidgetStyle(d)},[r("div",{key:"widget_"+d.id,ref:"widget_"+d.id,refInFor:!0,class:a.getWidgetClass(d),style:a.getBindStyle(d),attrs:{id:"widget_"+d.id}},[!d.border.hide&&d.border.type==="svg"?r("external-frame-svg",{ref:"comp_frame_"+d.id,refInFor:!0,attrs:{"widget-info":d}}):a._e(),d.title.position==="top"||d.title.position==="left"?r("div",{staticStyle:{overflow:"hidden",float:"left"},style:a.getWidgetTitleStyle(d)},[r("div",{style:{marginLeft:d.title.label.left+"px",marginTop:d.title.label.top+"px"},on:{click:function(g){return a.openLink(d)}}},[r("span",{ref:"title_"+d.id,refInFor:!0,style:a.getTitleSpanStyle(d),domProps:{innerHTML:a._s(a.getTitleText(d))}})])]):a._e(),r("draggable-component",{ref:"comp_"+d.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:a.getInfoStyle(d),attrs:{"is-view":!0,"widget-data":d},on:{attrChange:a.attrChange,doGetPreviewData:a.getPreviewData,doReSetBoardId:a.doReSetBoardId}}),d.title.position==="bottom"||d.title.position==="right"?r("div",{staticStyle:{overflow:"hidden",float:"left"},style:a.getWidgetTitleStyle(d)},[r("div",{style:{marginLeft:d.title.label.left+"px",marginTop:d.title.label.top+"px"},on:{click:function(g){return a.openLink(d)}}},[r("span",{ref:"title_"+d.id,refInFor:!0,style:a.getTitleSpanStyle(d),domProps:{innerHTML:a._s(a.getTitleText(d))}})])]):a._e()],1)])]})],2):a._e()]})],2)},R=[],Z=h(927966),j=h(295338),X=h(193575),D=h(8662),E=h(148836),J=h(752246),V=h(555616),Y=h.n(V),nt=h(126711),e=h(275770);const n={methods:{fitSize(t){const a=(v,p,i,s,o)=>{Object.keys(v).forEach(f=>{p.indexOf(f)>-1?v[f]=this.fit(v[f],!1):i.indexOf(f)>-1?v[f]=this.fit(v[f],!0):s&&s.test(f)?v[f]=this.fit(v[f],!1):o&&o.test(f)?v[f]=this.fit(v[f],!0):typeof v[f]=="object"&&v[f]!==null&&a(v[f],p,i,s,o)})};if(t.attr.lockedScale){let v=this.fit(t.attr.hh,!0,!1),p=this.fit(t.attr.hh,!0,!0);t.attr.h=this.fit(t.attr.h,!0,!t.attr.lockedScale),t.attr.hh=this.fit(t.attr.hh,!0,!t.attr.lockedScale),t.attr.w=this.fit(t.attr.w),t.attr.widgetW=this.fit(t.attr.widgetW),t.attr.x=this.fit(t.attr.x),t.attr.y=t.attr.lockedY?t.attr.y:this.fit(t.attr.y,!0,!0)-(v-p)/2}else t.attr.h=t.attr.lockedH?t.attr.h:this.fit(t.attr.h,!0,!0),t.attr.hh=t.attr.lockedH?t.attr.hh:this.fit(t.attr.hh,!0,!0),t.attr.w=t.attr.lockedW?t.attr.w:this.fit(t.attr.w),t.attr.widgetW=t.attr.lockedW?t.attr.widgetW:this.fit(t.attr.widgetW),t.attr.x=t.attr.lockedX?t.attr.x:this.fit(t.attr.x),t.attr.y=t.attr.lockedY?t.attr.y:this.fit(t.attr.y,!0,!0);let r=["widthR","widthL","radiusBL","radiusBR","radiusTL","radiusTR","breadthL","breadthR","cutL","cutR"],c=["widthT","widthB","breadthT","breadthB","cutT","cutB"];a(t.border,r,c);let d=["fontSize","widthR","widthL","radiusBL","radiusBR","radiusTL","radiusTR"],g=["widthT","widthB"];a(t.title,d,g);let S=["width","w","fontSize","minWidth","maxWidth","borderRadius","borderWidth","marginLeft","marginRight","paddingLeft","paddingRight","left","right","size"],P=["height","h","minHeight","maxHeight","marginTop","marginBottom","paddingTop","paddingBottom","top","bottom"],y=/(Width|Gap|FontSize|Padding|Margin)$/,B=/Height$/;a(t.config,S,P,y,B)},fit(t,a,r){if(typeof t!="number"||!this.isView||!/^mobile/.test(this.getCanvasSetting.transformType))return t;let c=this.getCanvasSetting.width/document.body.clientWidth,d=this.getCanvasSetting.minHeight/c,g=this.getCanvasSetting.height/(document.body.clientHeight<d?d:document.body.clientHeight),S="";switch(this.getCanvasSetting.transformType){case"mobileAutoWidth":a?S=t:S=t/c;break;case"mobileAutoBoth":S=t/c;break;default:a&&r?S=t/g:S=t/c}return S}}};var l=h(321300),m={beforeWidgetsLoad:{enabled:!0,code:"beforeWidgetsLoad",name:"\u6240\u6709\u7EC4\u4EF6\u52A0\u8F7D\u4E4B\u524D",script:{content:""},script_examples:`/**** \u5F53\u524D\u65B9\u6CD5\u4E2D\u53EF\u4F7F\u7528\u7684\u53C2\u6570
    widgets\uFF1A\u5F53\u524D\u770B\u677F\u4E2D\u6240\u6709\u7EC4\u4EF6\u7684\u914D\u7F6E
***/
console.info(widgets);
// \u904D\u5386\u6240\u6709\u7EC4\u4EF6\u914D\u7F6E
this.$$lib__.each(widgets, (item) => {
    // \u5224\u65AD\u904D\u5386\u5230\u6307\u5B9A\u7EC4\u4EF6\u65F6
    if (item.id == '') {
        console.info(item);
        item.name = '\u4FEE\u6539\u7EC4\u4EF6\u540D\u79F0'; // \u4FEE\u6539\u7EC4\u4EF6\u5C5E\u6027
    }
});
return widgets; // \u8FD4\u56DE\u4FEE\u6539\u540E\u7684\u7EC4\u4EF6\u914D\u7F6E`},beforeChartsLoad:{enabled:!0,code:"beforeChartsLoad",name:"\u5E38\u89C4\u56FE\u8868\u52A0\u8F7D\u4E4B\u524D",script:{content:""},script_examples:`/**** \u5F53\u524D\u65B9\u6CD5\u4E2D\u53EF\u4F7F\u7528\u7684\u53C2\u6570
    option\uFF1A\u5F53\u524D\u5E38\u89C4\u56FE\u8868\u5C06\u8981\u52A0\u8F7D\u7684\u5C5E\u6027\u914D\u7F6E
    \u6CE8\u610F\uFF1A\u6240\u6709\u56FE\u8868\u5C5E\u6027\u5747\u5728echarts\u5B98\u65B9\u6587\u6863\u4E2D\u67E5\u770B
    echarts\uFF1Ahttps://echarts.apache.org/zh/option.html#title
    highcharts\uFF1Ahttps://api.highcharts.com.cn/legacy/index.html
***/
console.info(option); // \u63A7\u5236\u53F0\u8F93\u51FA\u56FE\u8868\u5C5E\u6027\u914D\u7F6E

if (option.grid) {
    option.grid.left = "50%"; // \u8C03\u6574\u56FE\u8868\u7684\u5DE6\u8FB9\u8DDD
    option.grid.top = "50%"; // \u8C03\u6574\u56FE\u8868\u7684\u53F3\u8FB9\u8DDD
} else {
    option.grid = { left: "50%", top: "50%" };// \u8C03\u6574\u56FE\u8868\u7684\u5DE6\u8FB9\u8DDD\u548C\u53F3\u8FB9\u8DDD
}
if (option.tooltip) {
    option.tooltip.show = true; // \u542F\u7528\u63D0\u793A\u6846
} else {
    option.tooltip = { show: true };// \u542F\u7528\u63D0\u793A\u6846
}
if (option.toolbox) {
    option.toolbox.show = true; // \u542F\u7528\u5DE5\u5177\u7C7B
} else {
    option.toolbox = { show: true };// \u542F\u7528\u5DE5\u5177\u7C7B
}

return option; // \u8FD4\u56DE\u4FEE\u6539\u540E\u7684\u7EC4\u4EF6\u914D\u7F6E`},afterLoad:{enabled:!0,code:"afterLoad",name:"\u7EC4\u4EF6\u52A0\u8F7D\u4E4B\u540E",script:{content:""},script_examples:`/* \u5F53\u524D\u65B9\u6CD5\u4E2D\u53EF\u4F7F\u7528\u7684\u53C2\u6570
widgetInfo\uFF1A\u5F53\u524D\u7EC4\u4EF6\u4FE1\u606F
*/
console.info(this.widgetInfo);
`}},w=h(213743),N=h(151246),K=h(453148),Q=h(678481),q=h(935051),z=h(231954),u=h(149500),it={name:"BoardAreaView",components:{ExternalFrameSvg:w.Z,DraggableComponent:j.Z},mixins:[nt.H,X.E,D.j,n,n],props:["backAndRollback","noOnresize"],data(){return{globalEditor:this.$$global_editor,canvasSetting:{minHeight:0,minWidth:0,overflow:"hidden"},timerArr:[],autoUpdateWidget:{},layout:{fixedHeight:0,fixedWidth:0,loaded:!1},first:{},transformType:null,resizing:!1}},watch:{getCanvasSetting:{deep:!0,handler:function(){setTimeout(()=>{this.autoSize(),this.receiveOpenAndClosePage()},0)}},"getCanvasSetting.transformType":{deep:!0,handler:function(){this.transformType!=this.getCanvasSetting.transformType&&(setTimeout(()=>{this.orgWidget(this.getWidgets)},0),this.transformType=this.getCanvasSetting.transformType)}},"getChildInit.finish":{deep:!0,handler:function(){this.getChildInit.count!=0&&this.getChildInit.count<=this.getChildInit.finish&&this.sendoutTotal()}}},computed:{...(0,E.Se)(["getCanvasSettingInfo","getCurrentScenesPage","getCanvasSetting","getWidgets","getWidgetAllArr","getDynamicWidgets","getWidgetParentArr","getChildInit","bodyFraction","isView","viewType","getURLParams"]),newCanvasSetting(){if(!/^mobile/.test(this.getCanvasSetting.transformType))return this.canvasSetting;let t=JSON.parse(JSON.stringify(this.canvasSetting));return t.width&&(t.width=this.fit(Number(t.width.split("px")[0]))),t.height&&(t.height=this.fit(Number(t.height.split("px")[0]),!0,!0)),t.width+="px",t.height+="px",t},currentScenes(){let t=this.$$lib__.find(this.getCanvasSetting.scenes,a=>a.guid==this.getCurrentScenesPage.scenesGuid);return t||{}},canvasClass(){return window.parent===window?"my-screen-scale-filter":""}},methods:{...(0,E.nv)(["updateCanvasSettingData","updateCanvasSettingInfoData","updateCanvasSettingInfoTransform","addWidgetParentArr2","setWidgets","setWidgetXYWHR","addWidgetAllArr2","updateWidgetParentArrDataset","updateWidgetAllArrDataset","clearWidgetParentArr","clearWidgetAllArr","setFraction","updateCurrentScenesPage"]),arraySort(t){return function(a,r){let c=a[t].z,d=r[t].z;return c-d}},loadBoardAreaView(){if(typeof this.getCanvasSetting.transformType>"u"&&Object.keys(this.getWidgets).length==0)return;this.autoUpdateWidget={},this.layout={fixedHeight:0,fixedWidth:0,loaded:!1};try{this.clear()}catch(a){u.log("\u6E05\u7A7A\u6570\u636E\u5237\u65B0\u5B9A\u65F6\u5668\u5931\u8D25",a)}this.transformType=this.getCanvasSetting.transformType,this.canvasSetting=this.getCanvasSettingInfo,this.canvasSetting.data&&this.canvasSetting.data.globalParams&&this.updateCanvasSettingInfoData(JSON.parse(JSON.stringify(this.canvasSetting.data))),this.serverBeforeLoad(),this.beforeWidgetsLoad(),this.orgWidget(this.getWidgets),this.getDynamicWidgetsSource(this.getDynamicWidgets),this.setFonts(),this.setBackground(),this.setAction(),this.setWidgetAnime(this.getCanvasSetting,this.getWidgets),this.setWaterMark();let t=this.canvasSetting.action?this.canvasSetting.action.receive.replaceGlobalParams:"";this.canvasSetting.action&&t&&t.enabled&&this.initReceiveAction(t,this.canvasSetting),this.receiveOpenAndClosePage(),this.noOnresize!=!0&&(window.onresize=()=>{if(!(!J.b&&window.innerHeight<600)&&(this.orgWidgetOnresize(this.getWidgetAllArr),/^mobile/.test(this.getCanvasSetting.transformType)&&Array.from(document.body.classList).indexOf("pc-device")!==-1&&window.frameElement&&window.frameElement.className!=="pc"||/^mobile/.test(this.getCanvasSetting.transformType)&&l.isMobile())){if(this.resizing)return;this.resizing=!0,setTimeout(()=>{this.resizing=!1,this.$emit("reset"),this.doMobileResize(this.getWidgetAllArr)},150)}})},serverBeforeLoad(){let t=this.canvasSetting.beforeLoad;if(t&&t.enabled&&t.result&&t.result.data)if(t.script)try{new Function("status","data",t.script).call(this,t.result.status,t.result.data)}catch(a){u.log("serverBeforeLoad error"),u.log(a.message)}else t.result.status!=200&&this.$message.error(t.result.data)},orgWidget(t){this.autoSize(),this.clearWidgetParentArr(),this.clearWidgetAllArr();let a=this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code;u.log(""),a&&!this.layout.loaded&&this.autoBothInit(t);let r=Math.max(this.layout.fixedWidth,window.innerWidth),c=Math.max(this.layout.fixedHeight,window.innerHeight),d=this.getFixPercent(c,this.layout.fixedHeight,this.getCanvasSetting.height),g=this.getFixPercent(r,this.layout.fixedWidth,this.getCanvasSetting.width),S={},P={},y=[],B=[];for(let v in t){let p=JSON.parse(JSON.stringify(t[v]));if(a&&p.layout&&(p.attr.forceAbsolute?(p.attr.x=p.attr.lockedX==!0?p.layout.x.old:p.layout.x.old*this.bodyFraction.windowW,p.attr.y=p.attr.lockedY==!0?p.layout.y.old:p.layout.y.old*this.bodyFraction.windowH,p.attr.w=p.attr.lockedW==!0?p.layout.w.old:p.layout.w.old*this.bodyFraction.windowW,p.attr.widgetW=p.attr.lockedW==!0?p.layout.widgetW.old:p.layout.widgetW.old*this.bodyFraction.windowW,p.attr.h=p.attr.lockedH==!0?p.layout.h.old:p.layout.h.old*this.bodyFraction.windowH,p.attr.hh=p.attr.lockedH==!0?p.layout.hh.old:p.layout.hh.old*this.bodyFraction.windowH):(p.attr.x=p.layout.x.fixed+p.layout.x.per*g,p.attr.y=p.layout.y.fixed+p.layout.y.per*d,p.attr.w=p.layout.w.fixed+p.layout.w.per*g,p.attr.widgetW=p.layout.widgetW.fixed+p.layout.widgetW.per*g,p.attr.h=p.layout.h.fixed+p.layout.h.per*d,p.attr.hh=p.attr.h-(p.layout.h.old-p.layout.hh.old))),(p.parentId==null||p.parentId==null)&&(y.push(p),p.attr.hide!=!0&&p.dataset&&p.dataset[p.dataset.type]&&(p.dataset.type==this.$$global_editor.dataSourcType.dynamic.code||p.dataset.type==this.$$global_editor.dataSourcType.local.code)&&p.dataset[p.dataset.type].autoUpdate==!0&&I.default.set(this.autoUpdateWidget,v,p)),p?.dataset?.type==this.$$global_editor.dataSourcType.mqtt.code&&p?.dataset?.mqtt){let i=p.dataset.mqtt;i.source=[],P[i.dataSetId]=P[i.dataSetId]||[],P[i.dataSetId].push(JSON.parse(JSON.stringify(p)))}if(this.getCanvasSetting.data.widgetDataAsync){if(p.dataset&&p.dataset[p.dataset.type])if(p.dataset.type==this.$$global_editor.dataSourcType.dynamic.code&&p.dataset.dynamic.openUnLoad!=!0&&p.dataset.dynamic.dataSetId&&p.dataset.dynamic.noRequest!=!0){let i=JSON.stringify({dataSetId:p.dataset.dynamic.dataSetId,dimensions:p.dataset.dynamic.dimensions,columnList:p.dataset.dynamic.columnList,dimensionsAlias:p.dataset.dynamic.dimensionsAlias,query:p.dataset.dynamic.query});S[i]==null&&I.default.set(S,i,[]),S[i].push(JSON.parse(JSON.stringify(p)))}else p.dataset.type==this.$$global_editor.dataSourcType.local.code&&setTimeout(()=>{this.getPreviewData(p)},50)}else if(p.dataset&&p.dataset[p.dataset.type]){let i={columnList:p.dataset[p.dataset.type].columnList,data:p.dataset[p.dataset.type].source,total:p.dataset[p.dataset.type].total};this.sendoutDataloadSuccess(p),this.sendoutResponseData(p,i,{}),this.updateWidgetAllArrDataset(p),this.updateWidgetParentArrDataset(p)}B.push(p)}this.addWidgetParentArr2(y),this.addWidgetAllArr2(B);for(let v in S)this.loadDynamicWidget(v,S[v]);Object.keys(P).length>0&&this.loadMqttWidget(P)},autoBothInit(t){let a={},r={};if(this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&!this.layout.loaded){let c=0,d=0;for(let P in t){let y=t[P];if(y.attr.x=Math.floor(y.attr.x),y.attr.y=Math.floor(y.attr.y),y.attr.h=Math.floor(y.attr.h),y.attr.w=Math.floor(y.attr.w),y.attr.hh=Math.floor(y.attr.hh),y.parentId&&(t[y.parentId]&&t[y.parentId].attr.lockedH&&(y.attr.lockedH=y.attr.forceAbsolute=y.attr.lockedY=!0),t[y.parentId]&&t[y.parentId].attr.lockedW&&(y.attr.lockedW=y.attr.forceAbsolute=y.attr.lockedX=!0)),!y.attr.forceAbsolute){if(y.attr.lockedW)for(let B=0;B<y.attr.w;B++){let v=y.attr.x+B;a[v]||(a[v]=!0,v>-1&&v<this.getCanvasSetting.width&&++d)}if(y.attr.lockedH)for(let B=0;B<y.attr.h;B++){let v=y.attr.y+B;r[v]||(r[v]=!0,v>-1&&v<this.getCanvasSetting.height&&++c)}}}this.layout.fixedHeight=c,this.layout.fixedWidth=d,this.layout.loaded=!0;let g=Math.max(this.getCanvasSetting.minHeight,c),S=Math.max(this.getCanvasSetting.minWidth,d);this.canvasSetting.minHeight=`${g}px`,this.canvasSetting.minWidth=`${S}px`,this.$el.parentElement.style.overflowX=window.innerWidth>=S?"hidden":"auto",this.$el.parentElement.style.overflowY=window.innerHeight>=g?"hidden":"auto";for(let P in t){let y=JSON.parse(JSON.stringify(t[P].attr)),B={x:null,y:null,h:null,w:null,hh:null},v=0;if(y.x<0)for(let p=y.x;p<0;++p)a[p]&&++v;else for(let p=y.x-1;p>-1;--p)a[p]&&++v;if(B.x={old:y.x-0,fixed:v-0,per:y.x>0?y.x-v:y.x+v},v=0,y.y<0)for(let p=y.y;p<0;++p)r[p]&&++v;else for(let p=0;p<y.y;++p)r[p]&&++v;B.y={old:y.y-0,fixed:v-0,per:y.y>0?y.y-v:y.y+v},v=0;for(let p=0;p<y.w;++p)a[y.x+p]&&v++;B.w={old:y.w-0,fixed:v-0,per:y.w-v},v=0;for(let p=0;p<y.widgetW;++p)a[y.x+p]&&v++;B.widgetW={old:y.widgetW-0,fixed:v-0,per:y.widgetW-v},v=0;for(let p=0;p<y.h;++p)r[y.y+p]&&v++;B.h={old:y.h-0,fixed:v-0,per:y.h-v},B.hh={old:y.hh-0},t[P].layout=B}}},getFixPercent(t,a,r){return r>a?t>a?(t-a)/(r-a):0:1},loadMqttWidget(t,a){const r=this;N.n.getMqttDataSource(Object.keys(t),!0).then(c=>{if(c?.status===200){const d=c.data;let g={};Object.keys(d).forEach(P=>{let y=d[P];y.config=JSON.parse(d[P].config),Object.keys(y.dataSet).forEach(B=>{y.dataSet[B]={topic:y.dataSet[B],widgets:t[B].map(v=>v.id)},g[B]=P})}),this.mqttDataSources=d;const S=this.isView&&this.viewType;Object.keys(d).forEach(P=>{let y=d[P];S&&y.config.publicEnabled&&y.config.publicConfig&&(y.config.publicConfig.server&&(y.config.server=y.config.publicConfig.server),y.config.publicConfig.port&&(y.config.port=y.config.publicConfig.port),y.config.publicConfig.user&&(y.config.user=y.config.publicConfig.user),y.config.publicConfig.pass&&(y.config.pass=y.config.publicConfig.pass)),y.client=(0,K.S)({protocol:y.config.protocol,port:y.config.port-0,host:y.config.server,endpoint:y.config.baseUrl,username:y.config.user,password:y.config.pass?l.AES.decrypt(y.config.pass):y.config.pass},null,null,null,!0),Object.keys(y.dataSet).forEach(B=>{let v=y.dataSet[B];y.client.subscribe(`dataset-${B}`,v.topic,(p,i)=>{v.widgets.forEach(s=>{this.updateMqttWidget(s,p,i)})})})})}})},updateMqttWidget:function(t,a,r){let c=this.getWidgetObject(t),d=c.widgetInfo||c.widgetData;if(d?.dataset?.mqtt){let g=d.dataset.mqtt;try{if((!g.columnList||g.columnList.length==0)&&(g.columnList=g.dimensionsAlias.map((S,P)=>({index:P,aggType:null,name:S.name}))),g.query.script.enabled&&g.query.script.content){let P=new Function("jsonObject","result",g.query.script.content).call(this,{_topic:a,_message:r},g);g.columnList=P.columnList,g.source=P.data,g.toal=P.total}else{let S=JSON.parse(r);if(Array.isArray(S)||(S=[S]),g.source=[],S?.length>0){g.dimensionsAlias?.length==0&&(g.dimensionsAlias=g.dimensionsAlias||[],g.dimensionsAlias.push({name:"_topic",alias:"topic"}),g.dimensionsAlias.push({name:"_message",alias:"message"}));for(let P=0;P<S.length;++P){let y=[];for(let B=0;B<g.dimensionsAlias.length;++B){let v=g.dimensionsAlias[B];v.name=="_topic"?y[B]=a:v.name=="_message"?y[B]=r:y[B]=S[P][g.dimensionsAlias[B].name]}g.source.push(y)}g.dimensions?.length||(g.dimensions=g.dimensionsAlias.map(P=>P.name))}}}catch(S){u.error("\u5904\u7406mqtt\u6D88\u606F\u5931\u8D25",S)}this.updateWidgetAllArrDataset(d),this.updateWidgetParentArrDataset(d),c.reLoadInfo(d)}},loadDynamicWidget(t,a){let r={dataSet:t};this.getDynamicSource(r,c=>{if(c&&c.status==200)this.$$lib__.each(a,d=>{d.dataset.dynamic.source=[],d.dataset.dynamic.total=0;let g=this.getDataSetData(c.data,d.dataset.dynamic.query,d.dataset.dynamic.dimensionsAlias,d.dataset.dynamic.dataSetId);this.updataWidgetSource(d,g,c.jsonObject)});else{let d=a[0],g=d.dataset.dynamic.dataSetName&&d.dataset.dynamic.dataSetName!=""?d.dataset.dynamic.dataSetName:d.dataset.dynamic.dataSetId;V.Message.error({message:"\u6570\u636E\u96C6:[ "+g+" ]\u83B7\u53D6\u5931\u8D25\uFF0C"+c.msg,offset:60})}})},orgWidgetOnresize(t){if(this.autoSize())this.doAutoBothResize(t);else return},doAutoBothResize(t){if(this.getCanvasSetting.transformType!=this.$$global_editor.transformType.autoBoth.code)return;let a=Math.max(this.layout.fixedWidth,this.getCanvasSetting.minWidth,window.innerWidth),r=Math.max(this.layout.fixedHeight,this.getCanvasSetting.minHeight,window.innerHeight);this.$el.parentElement.style.overflowX=window.innerWidth==a?"hidden":"auto",this.$el.parentElement.style.overflowY=window.innerHeight==r?"hidden":"auto";let c=this.getFixPercent(r,this.layout.fixedHeight,this.getCanvasSetting.height),d=this.getFixPercent(a,this.layout.fixedWidth,this.getCanvasSetting.width),g=JSON.parse(JSON.stringify(t)),S=this,P=[],y=[];this.$$lib__.each(g,v=>{if(v.layout){v.attr.forceAbsolute?(v.attr.x=v.attr.lockedX==!0?v.layout.x.old:v.layout.x.old*this.bodyFraction.windowW,v.attr.y=v.attr.lockedY==!0?v.layout.y.old:v.layout.y.old*this.bodyFraction.windowH,v.attr.w=v.attr.lockedW==!0?v.layout.w.old:v.layout.w.old*this.bodyFraction.windowW,v.attr.widgetW=v.attr.lockedW==!0?v.layout.widgetW.old:v.layout.widgetW.old*this.bodyFraction.windowW,v.attr.h=v.attr.lockedH==!0?v.layout.h.old:v.layout.h.old*this.bodyFraction.windowH,v.attr.hh=v.attr.lockedH==!0?v.layout.hh.old:v.layout.hh.old*this.bodyFraction.windowH):(v.attr.x=v.layout.x.fixed+v.layout.x.per*d,v.attr.y=v.layout.y.fixed+v.layout.y.per*c,v.attr.w=v.layout.w.fixed+v.layout.w.per*d,v.attr.widgetW=v.layout.widgetW.fixed+v.layout.widgetW.per*d,v.attr.h=v.layout.h.fixed+v.layout.h.per*c,v.attr.hh=v.attr.h-(v.layout.h.old-v.layout.hh.old));const p=this.getWidgetObjectChild(S,"com_"+v.id);this.setAttrSize(p,v),(v.isParent?P:y).push({component:p,item:v})}});let B=P.concat(y);for(let v=0;v<B.length;++v)try{let p=B[v].component||this.getWidgetObject(B[v].item.id);p&&typeof p.resize=="function"?this.$nextTick(function(){p.resize({windowW:d,windowH:c,bodyFraction:this.bodyFraction,widgetInfo:B[v].item})}):p&&p.echarts!=null&&typeof p.echarts.resize=="function"&&this.$nextTick(function(){p.echarts.resize()})}catch{u.log("resize error: ",B[v])}},doMobileResize(t){let a=Math.max(this.layout.fixedWidth,this.getCanvasSetting.minWidth,window.innerWidth),r=Math.max(this.layout.fixedHeight,this.getCanvasSetting.minHeight,window.innerHeight);this.$el.parentElement.style.overflowX=window.innerWidth==a?"hidden":"auto",this.$el.parentElement.style.overflowY=window.innerHeight==r?"hidden":"auto";let c=this.getFixPercent(r,this.layout.fixedHeight,this.getCanvasSetting.height),d=this.getFixPercent(a,this.layout.fixedWidth,this.getCanvasSetting.width),g=JSON.parse(JSON.stringify(t)),S=[],P=this;this.$$lib__.each(g,y=>{const B=this.getWidgetObjectChild(P,"com_"+y.id);S.push({component:B,item:y})});for(let y=0;y<S.length;++y)try{let B=S[y].component;typeof B.resize=="function"?this.$nextTick(function(){B.resize({windowW:d,windowH:c,bodyFraction:this.bodyFraction,widgetInfo:S[y].item})}):B.echarts&&typeof B.echarts.resize=="function"&&this.$nextTick(function(){B.echarts.resize()})}catch{u.log("resize error: ",S[y])}},setAttrSize(t,a){this.setWidgetXYWHR(a);const r=a.attr;if(t&&t.widgetInfo&&t.widgetInfo.attr){const c=t.widgetInfo.attr;c.x=r.x,c.y=r.y,c.w=r.w,c.h=r.h,c.widgetW=r.widgetW,c.hh=r.hh}else if(a.parentId){let c=this.getWidgetObjectChild(this,"com_"+a.parentId);if(c&&c.containerViewSubWidgetList){let d=c.containerViewSubWidgetList.find(g=>g.id===a.id);if(d){const g=d.attr;g.x=r.x,g.y=r.y,g.w=r.w,g.h=r.h,g.widgetW=r.widgetW,g.hh=r.hh}}}},calc(t,a,r){if(r==0)return a;{let c=t-a;return c>0?c*r/100+a:0}},autoSize(){this.getCanvasSetting.minWidth=this.getCanvasSetting.minWidth?this.getCanvasSetting.minWidth:0,this.getCanvasSetting.minHeight=this.getCanvasSetting.minHeight?this.getCanvasSetting.minHeight:0,this.getCanvasSetting.width=this.getCanvasSetting.width?this.getCanvasSetting.width:0,this.getCanvasSetting.height=this.getCanvasSetting.height?this.getCanvasSetting.height:0;let t=!1,a=Math.max(window.innerWidth,this.getCanvasSetting.minWidth),r=Math.max(window.innerHeight,this.getCanvasSetting.minHeight);this.getCanvasSetting.transform&&(this.getCanvasSetting.transformType=this.getCanvasSetting.transform==!0?this.$$global_editor.transformType.auto.code:this.$$global_editor.transformType.none.code),this.canvasSetting.top="0px",this.canvasSetting.left="0px",this.canvasSetting.transform="none",this.canvasSetting.width=this.getCanvasSetting.width+"px",this.canvasSetting.height=this.getCanvasSetting.height+"px";let c="";return this.getCanvasSetting.transformType!=this.$$global_editor.transformType.none.code?(/^mobile/.test(this.getCanvasSetting.transformType)||this.setFraction({width:a,height:r}),this.getCanvasSetting.transformType==this.$$global_editor.transformType.auto.code?this.canvasSetting.transform="scale("+this.bodyFraction.windowScaleW+", "+this.bodyFraction.windowScaleH+")":this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoWidth.code?(this.canvasSetting.transform="scale("+this.bodyFraction.windowScaleW+")",this.getCanvasSetting.height*this.bodyFraction.windowScaleW>r&&(this.canvasSetting.width=this.getCanvasSetting.width-8/this.bodyFraction.windowScaleW+"px"),this.setVerticalAlignment(this.bodyFraction.windowScaleW)):this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoHeight.code?(this.canvasSetting.transform="scale("+this.bodyFraction.windowScaleH+")",this.canvasSetting.overflowY="hidden",this.getCanvasSetting.width*this.bodyFraction.windowScaleH>a&&(this.canvasSetting.height=this.getCanvasSetting.height-8/this.bodyFraction.windowScaleH+"px"),this.setAlignment(this.bodyFraction.windowScaleH)):this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code?(this.canvasSetting.width=a+"px",this.canvasSetting.height=r+"px",this.canvasSetting.overflow="hidden",t=!0):(this.canvasSetting.width=this.newCanvasSetting.width,this.canvasSetting.height=this.newCanvasSetting.height),c=`.gisqbi-body-dialog-scale {transform:${this.canvasSetting.transform};transform-origin:center top;}
                .gisqbi-body-popper-scale {transform:${this.canvasSetting.transform};transform-origin:left top !important;}
                `,this.mUtils.appendCss("gisqbiBodyDialogScale",c),this.canvasSetting.margin="0",this.updateCanvasSettingInfoTransform(this.canvasSetting.transform)):(this.setFraction({width:this.getCanvasSetting.width,height:this.getCanvasSetting.height}),this.setAlignment(1),this.setVerticalAlignment(1)),t},getTitleText(t){return t.title.text===void 0||!t.title.text?"":t.title.text&&(t.title.position==="left"||t.title.position==="right")?t.title.text.split("").join("<br />"):t.title.text},beforeWidgetsLoad(){if(this.canvasSetting.action&&this.canvasSetting.action.lifecycle&&this.canvasSetting.action.lifecycle[m.beforeWidgetsLoad.code]){let t=this.canvasSetting.action.lifecycle[m.beforeWidgetsLoad.code];if(t&&t.enabled==!0){if(!t.script||!t.script.content||t.script.content==""){u.warn(t.name+"\u811A\u672C\u4E3A\u7A7A");return}u.info("\u6267\u884C "+t.name+" \u811A\u672C");let a=new Function("widgets",t.script.content),r=JSON.parse(JSON.stringify(this.getWidgets));try{let c=a.apply(this,[r]);c&&(r=c),this.setWidgets(r)}catch{u.error("\u6267\u884C "+t.name+" \u811A\u672C\u62A5\u9519\u5F02\u5E38")}}}},setAction(){const t=this;this.canvasSetting.action&&this.canvasSetting.action.sendOut&&this.canvasSetting.action.sendOut.actionList&&this.canvasSetting.action.sendOut.actionList.map(a=>{if(a.code=="postMessage"&&a.enabled){let r=this.onPostMessage,c=a.config.origin;window.addEventListener("message",function(d){c&&(c==="*"||c!="*"&&c.indexOf(d.origin)>-1)&&r.apply(t,[a,d])})}})},changeGlobalParams(t){if(this.canvasSetting.action&&this.canvasSetting.action.sendOut&&this.canvasSetting.action.sendOut.actionList){let a=this.$$lib__.find(this.canvasSetting.action.sendOut.actionList,r=>r.code==e.default.changeGlobalParams.code);if(a&&a.enabled){let r=a.code+"_canvas",c={};if(a.paramsExtend&&a.paramsExtend.length>0&&this.getParamsExtend(c,a.paramsExtend,this.canvasSetting),a.script&&a.script.enabled){if(u.log("Execute script for "+a.name+" action"),a.script.content==""){V.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param,param_change",a.script.content),t=this.customScript(c,t)}Z.Z.$emit(r,t),a.postMessage&&this.doPostMessage(c),this.actionNameList.push(r)}}},initReceiveAction(t,a){let r={};if(this.$$lib__.each(t.replaceList,c=>{let d=c.replaceParam;for(let g=0;g<d.length;g++)if(d[g].length==3){let S=d[g][1]+"_"+d[g][0],P=d[g][2],y=P.indexOf("|");d[g][1].indexOf("_")>-1&&(S=d[g][1]),y>-1&&(P=d[g][2].substring(y+1)),r[S]||I.default.set(r,S,{}),r[S][c.param]||I.default.set(r[S],c.param,P)}}),!this.$$lib__.isEmpty(r))for(let c in r)Z.Z.$on(c,d=>{if(t.script&&t.script.enabled){if(u.log("Execute script for \u770B\u677F\u753B\u5E03  to "+t.name+" component"),t.script.content==""){V.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.reGlobalParams=new Function("actionParam","dataSetParams","data",t.script.content)}this.reGlobalParams(r[c],a.data.globalParams.params,d)})},reGlobalParams(t,a,r){let c={},d=Object.keys(r);for(let g in t)this.$$lib__.each(a,(S,P)=>{if(P==g){let y=t[g];this.$$lib__.contains(d,y)?(a[P]=r[y],c[P]=r[y]):(a[P]=null,c[P]=null)}});this.canvasSetting.data.globalParams.params=JSON.parse(JSON.stringify(a)),this.updateCanvasSettingData(JSON.parse(JSON.stringify(this.canvasSetting.data))),this.updateCanvasSettingInfoData(JSON.parse(JSON.stringify(this.canvasSetting.data))),this.changeGlobalParams(c)},onPostMessage(t,a){if(t.config.filterScriptEnabled&&t.config.filterScript)try{if(this.filterFunction=this.filterFunction||new Function("data","source",t.config.filterScript),this.filterFunction(a.data,a)!==!0)return!1}catch(d){return u.log("\u6267\u884CpostMessage\u8F6C\u53D1\u4E8B\u4EF6\uFF0C\u811A\u672C\u8FC7\u6EE4\u65F6\u51FA\u73B0\u9519\u8BEF\u3002",d),!1}let r=t.code+"_canvas",c={data:a.data,source:a};if(this.getExtendParams(c,t.paramsExtend,[],[]),t&&t.script&&t.script.enabled&&t.script.content){u.log("Execute script for "+t.name+" action");try{if(t.script.content==""){V.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",t.script.content),c=this.customScript(c)}catch(d){u.log("\u6267\u884CpostMessage_canvas\u81EA\u5B9A\u4E49\u4E8B\u4EF6\u51FA\u9519"),u.log(d)}}Z.Z.$emit(r,c),t.postMessage&&this.doPostMessage(c),this.actionNameList.push(r)},setFonts(){let t=this.getCanvasSetting.fonts;if(t){t=t.filter((r,c)=>{let d=[];return t.forEach(g=>d.push(g.resId)),d.indexOf(r.resId)==c});let a="";t.forEach(r=>{let c=r.resId;if(c){let d=c.split("-")[1],g=`./resource/font/${c}.${d}`;a+=`@font-face {font-family: "${c}"; src: url('${g}') format('${d}')}`}}),l.appendCss("font-style",a)}},setBackground(){if(this.getCanvasSetting.fillLocation==="page"){if(this.getCanvasSetting.transformType=="none"||this.getCanvasSetting.transformType=="autoBoth"){let a=this.mUtils.getNewPxH(this.getCanvasSetting.height);document.querySelector("body").offsetHeight<a&&document.querySelector("body").setAttribute("style","height:"+a+"px!important")}let t=document.querySelector("body").style;t.backgroundColor=this.canvasSetting.backgroundColor,t.backgroundImage=this.canvasSetting.backgroundImage,t.backgroundSize=this.canvasSetting.backgroundSize,this.canvasSetting.backgroundImage="",this.canvasSetting.backgroundColor=""}},setAlignment(t){let a="0px",r=this.getCanvasSetting.alignmentOffset;this.getCanvasSetting.alignment=="left"?(a="0px",r&&this.$$lib__.isNumber(r)&&(a=r*t+"px")):this.getCanvasSetting.alignment=="center"?(a="calc(50% - "+this.getCanvasSetting.width/2*t+"px)",r&&this.$$lib__.isNumber(r)&&(a="calc(50% - "+(this.getCanvasSetting.width/2-r)*t+"px)")):this.getCanvasSetting.alignment=="right"&&(a="calc(100% - "+this.getCanvasSetting.width*t+"px)",r&&this.$$lib__.isNumber(r)&&(a="calc(100% - "+(this.getCanvasSetting.width+r)*t+"px)")),this.canvasSetting.left=a},setVerticalAlignment(t){let a="0px",r=this.getCanvasSetting.verticalAlignmentOffset;this.getCanvasSetting.verticalAlignment=="top"?(a="0px",r&&this.$$lib__.isNumber(r)&&(a=r*t+"px")):this.getCanvasSetting.verticalAlignment=="middle"?this.getCanvasSetting.height*t>window.innerHeight?(a="0px",r&&this.$$lib__.isNumber(r)&&(a=r*t+"px")):(a="calc(50% - "+this.getCanvasSetting.height/2*t+"px)",r&&this.$$lib__.isNumber(r)&&(a="calc(50% - "+(this.getCanvasSetting.height/2-r)*t+"px)")):this.getCanvasSetting.verticalAlignment=="bottom"&&(a="calc(100% - "+this.getCanvasSetting.height*t+"px)",r&&this.$$lib__.isNumber(r)&&(a="calc(100% - "+(this.getCanvasSetting.height+r)*t+"px)")),this.canvasSetting.top=a},setWidgetAnime(t,a){if(t&&a){let r="";for(let c in a){let d=a[c],g={};if(t.widgetAnime&&t.widgetAnime.hover&&t.widgetAnime.hover.enabled&&(g=JSON.parse(JSON.stringify(t.widgetAnime.hover))),d.anime&&d.anime.hover){let S=JSON.parse(JSON.stringify(d.anime.hover));S.inherit||(g={backgroundColor:"",boxShadowColor:"",boxShadowH:0,boxShadowV:0,boxShadowBlur:0,boxShadowSpread:0}),S.enabled&&(S.backgroundColor&&S.backgroundColor!=""&&(g.backgroundColor=S.backgroundColor),S.boxShadowColor&&S.boxShadowColor!=""&&(g.boxShadowColor=S.boxShadowColor),l.isNumber(S.boxShadowH)&&parseInt(S.boxShadowH)!=0&&(g.boxShadowH=parseInt(S.boxShadowH)),l.isNumber(S.boxShadowV)&&parseInt(S.boxShadowV)!=0&&(g.boxShadowV=parseInt(S.boxShadowV)),l.isNumber(S.boxShadowBlur)&&parseInt(S.boxShadowBlur)>0&&(g.boxShadowBlur=parseInt(S.boxShadowBlur)),l.isNumber(S.boxShadowSpread)&&parseInt(S.boxShadowSpread)>0&&(g.boxShadowSpread=parseInt(S.boxShadowSpread)))}if(r+=".widget_"+d.id+"_show:hover {",g.boxShadowColor&&g.boxShadowColor!=""){let S="box-shadow: "+(g.boxShadowH?g.boxShadowH:0)+"px "+(g.boxShadowV?g.boxShadowV:0)+"px "+(g.boxShadowBlur?g.boxShadowBlur:0)+"px "+(g.boxShadowSpread?g.boxShadowSpread:0)+"px "+g.boxShadowColor+" !important;";r+=S,g.backgroundColor&&g.backgroundColor!=""&&(r+="background-color: "+g.backgroundColor+" !important;")}r+="}"}l.appendCss("widgets-style",r)}},setWaterMark(){if(z.Z.baseConfig.isPlatform&&window.parent===window&&this.viewType!=="public"){let t="/identity/getPlatInfo/explorer";(0,q.platformGetRequest)(t).then(a=>{a&&a.status==200&&a.data.waterMark&&Q.GisqWaterMarkService.create(a.data.waterMark,!0)})}},doBack(){this.$emit("doBack")},doRollback(){this.$emit("doRollback")},doReSetBoardId(t){this.$emit("doReSetBoardId",t)},updataWidgetSource(t,a,r){if(a)try{switch(t.dataset.type){case this.$$global_editor.dataSourcType.dynamic.code:if(t.dataset.dynamic.source=a.data,a.columnList)try{t.dataset.dynamic.columnList=a.columnList,t.dataset.dynamic.dimensions=a.columnList.map(S=>S.name);let c={},d=a.columnList.map(S=>(c[S.name]={name:S.name,alias:""},c[S.name])),g=t.dataset.dynamic.dimensionsAlias;g&&g.length>0&&g.forEach(S=>{c[S.name]&&(c[S.name].alias=S.alias)}),t.dataset.dynamic.dimensionsAlias=d}catch(c){u.error("Refresh Data Dimensions Error",c)}a.total&&(t.dataset.dynamic.total=a.total);break;case this.$$global_editor.dataSourcType.local.code:t.dataset.local.dimensionsAlias=[],t.dataset.local.columnList=[],t.dataset.local.source=[],t.dataset.local.dimensions=[],t.dataset.local.dimensionsAlias=a.dimensionsAlias,t.dataset.local.columnList=a.columnList,t.dataset.local.source=a.source,t.dataset.local.dimensions=a.dimensions;break}}catch(c){u&&u.log&&u.log(c)}if(this.updateWidgetAllArrDataset(t),this.updateWidgetParentArrDataset(t),t.parentId){let c=this.$refs["comp_"+t.parentId];if(c&&c.length>0){let d=this.getWidgetObjectChild(c[0],"comp_"+t.id);d&&d.reLoadInfo(JSON.parse(JSON.stringify(t)))}}else{let c=this.$refs["comp_"+t.id];c&&c.length>0&&c[0].reLoadInfo(JSON.parse(JSON.stringify(t)))}this.sendoutDataloadSuccess(t),this.sendoutResponseData(t,a,r)},getWidgetObjectChild(t,a){if(this.refsList=this.refsList||[],this.refsList&&this.refsList[a])return this.refsList[a];if(t&&a&&t.$refs){let r=t.$refs[a];if(r&&r.length>0)return r[0];for(let c in t.$refs){let d=t.$refs[c];if(d&&d.$el?this.refsList[c]=d:d&&d.length>0&&d[0].$el?this.refsList[c]=d[0]:this.refsList[c]=null,this.refsList[c]){let g=this.getWidgetObjectChild(this.refsList[c],a);if(g)return g}}}},sendoutTotal(){this.$$lib__.each(this.getWidgetAllArr,t=>{this.sendTotal(t)})},sortWidgetParentArr(t){let a=this.$$lib__.filter(this.getWidgetParentArr,r=>r.scenesId==this.currentScenes.guid&&r.pageId==t);return a?a.sort(this.arraySort("attr")):[]},receiveOpenAndClosePage(){this.canvasSetting.action&&this.canvasSetting.action.receive&&this.canvasSetting.action.receive.openPage&&this.canvasSetting.action.receive.openPage.enabled&&this.openAndClosePage(this.canvasSetting.action.receive.openPage,!0),this.canvasSetting.action&&this.canvasSetting.action.receive&&this.canvasSetting.action.receive.closePage&&this.canvasSetting.action.receive.closePage.enabled&&this.openAndClosePage(this.canvasSetting.action.receive.closePage,!1)},openAndClosePage(t,a){let r=null;if(t.script&&t.script.enabled){if(u.log("Execute script for \u770B\u677F\u753B\u5E03  to "+t.name+" component"),t.script.content==""){V.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}r=new Function("data, param_key, values, scenesId, pageId, type",t.script.content)}this.$$lib__.each(t.actionList,c=>{c&&c.widgetList&&c.widgetList.length>0&&this.$$lib__.each(c.widgetList,d=>{if(d&&d.length>0){let g=d[0][1]+"_"+d[0][0];d[0][1].indexOf("_")>-1&&(g=d[0][1]),Z.Z.$on(g,S=>{let P=d[0][2];if(P){let y=P.indexOf("|");y>-1&&(P=d[0][2].substring(y+1))}t.script&&t.script.enabled?r.apply(this,[S,P,c.values,c.scenesId,c.pageId,a]):this.openOrClosePage(S,P,c.values,c.scenesId,c.pageId,a)})}})})},openOrClosePage(t,a,r,c,d,g){(r==null||r.length==0||this.$$lib__.contains(r,t[a]))&&this.updateCurrentScenesPage({scenesId:c,pageId:d,value:g})}},created:function(){this.clear()},mounted(){this.$nextTick(function(){this.loadBoardAreaView()}),J.X.versions.trident&&this.$message({message:"\u60A8\u6B63\u5728\u4F7F\u7528IE\u6D4F\u89C8\u5668\u6216IE\u5185\u6838\u6D4F\u89C8\u5668\uFF0CBI\u7CFB\u7EDF\u90E8\u5206\u529F\u80FD\u4E0D\u517C\u5BB9\uFF0C\u8BF7\u5207\u6362\u8C37\u6B4C\u6D4F\u89C8\u5668\u8FDB\u884C\u9884\u89C8\uFF01",type:"warning"})},destroyed:function(){this.clear(),window.onresize=null}},ot=it,rt=h(768141),ct=(0,rt.Z)(ot,k,R,!1,null,"5505e7eb",null),at=ct.exports,ft=h(766941),ut=h(627996),A=h(833264),W=function(){var a=this,r=a._self._c;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:a.loadingShow,expression:"loadingShow"}],ref:"loading",staticClass:"el-loading-mask is-fullscreen"},[r("div",{staticClass:"el-loading-spinner"},[a._m(0),r("p",{staticClass:"el-loading-text"},[a._v(a._s(a.loadingText))])])])])},F=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"example"},[a("div",{staticClass:"sk-chase"},[a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"}),a("div",{staticClass:"sk-chase-dot"})])])}],G={name:"loading",props:["loadingShow","loadingStyle","loadingText"],data(){return{loadingUrl:""}},mounted(){document.body.appendChild(this.$refs.loading),this.setLoadingStyle()},methods:{setLoadingStyle(){if(this.loadingStyle.type=="custom"){document.querySelector(".is-fullscreen").style.backgroundColor=this.loadingStyle.backgroundColor;let t=document.styleSheets;for(let a=0;a<t.length;a++){let r=t[a].cssRules;for(let c=0;c<r.length;c++){let d=r[c];d.selectorText&&d.selectorText.indexOf(".sk-chase-dot")>-1&&d.selectorText.indexOf("::before")>-1&&(d.style.backgroundColor=this.loadingStyle.iconColor)}}}}}},et=G,lt=(0,rt.Z)(et,W,F,!1,null,"639c8c0c",null),tt=lt.exports,wt=h(367755),Ct=h(857124),It=h(149500),Ot={name:"screenView",components:{LoginForm:wt.Z,BoardAreaView:at,loading:tt},mixins:[A.t,n],data(){return{loading:!1,loadingStyle:{type:"default",backgroundColor:"rgba(2, 43, 71, 1)",iconColor:"rgba(255, 255, 255, 1)"},dialogVisible:!1,centerDialogVisible:!1,customClass2:{backgroundColor:"red"},backAndRollback:{previous:[],behind:[]},fullHeight:document.documentElement.clientHeight,getCanvasSetting:{},initConfig:{},screenPosition:"relative",overflowX:"auto",overflowY:"auto"}},created(){this.getBoardId(),this.getURLParams.load&&this.getURLParams.load!=""?(this.loadingStyle.type=this.getURLParams.load.split("$")[0],this.loadingStyle.backgroundColor=l.hexToRgba(this.getURLParams.load.split("$")[1]),this.loadingStyle.iconColor=l.hexToRgba(this.getURLParams.load.split("$")[2])):window?.bi?.config?.boardLoading&&(this.loadingStyle=window.bi.config.boardLoading)},computed:{...(0,E.Se)(["isView","viewBiId","viewAppId","viewGuid","viewType","getURLParams","getCurrentBoardConfig"])},watch:{fullHeight(t){this.fullHeight=t}},mounted(){this.get_bodyHeight(),this.setIsView(!0),this.resolveKeyBoard()},methods:{...(0,E.nv)(["setIsView","setViewPreview","setViewBiId","setViewAppId","setApplicationIdEx","setViewGuid","setSysParamForRespData","setViewType","clearBoardConfig","setBoardConfig","setViewAccessToken","setViewUserInfo","setURLParams"]),getBoardId(){this.setURLParams(),this.setViewPreview(this.getUrlKey("preview")),this.setViewBiId(this.getUrlKey("biId")),this.setViewGuid(this.getUrlKey("guid")||this.getUrlKey("biPid")),this.setViewType(this.getUrlKey("tp"));let t=this.getUrlKey("appId");this.setViewAppId(t),this.setApplicationIdEx(t),this.getBoardConfig()},reSetBoardId(t){this.clearBoard(),this.setBackAndRollback("previous"),this.setViewBiId(t.boardId),this.setViewGuid(t.publishId),this.setViewType(t.publishType),this.setViewAppId(t.applicationId),this.setApplicationIdEx(t.applicationId),this.getBoardConfig()},getBoardConfig(){if(this.viewType){if(this.viewBiId==null&&this.viewGuid==null){It.error("\u7F16\u8F91\u5668ID\u548C\u7248\u672CID  \u81F3\u5C11\u6709\u4E00\u4E2A"),V.Message.error({message:"\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B",offset:60});return}switch(this.viewType){case this.$$global.editType.original.code:this.getOriginalData();break;case this.$$global.editType.public.code:this.getPublicData();break;default:V.Message.error({message:"\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B",offset:60})}}else this.viewBiId?this.getEditorData():V.Message.error({message:"\u53C2\u6570\u6709\u8BEF\uFF0C\u65E0\u6CD5\u67E5\u770B",offset:60})},reset(){this.setFit(),this.loadBoardAreaView()},setFit(){let t=JSON.parse(this.initConfig);t.canvasSetting.transformType==this.$$global_editor.transformType.auto.code&&(this.screenPosition="absolute",this.overflowX="hidden",this.overflowY="hidden"),t.canvasSetting.transformType==this.$$global_editor.transformType.autoWidth.code&&(this.overflowX="hidden"),t.canvasSetting.transformType==this.$$global_editor.transformType.autoHeight.code&&(this.overflowY="hidden"),t.canvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&(this.overflowX="hidden",this.overflowY="hidden"),/^mobile/.test(t.canvasSetting.transformType)?(this.getCanvasSetting=t.canvasSetting,Object.keys(t.widgets).forEach(a=>{this.fitSize(t.widgets[a])}),this.setBoardConfig(JSON.stringify(t))):this.setBoardConfig(JSON.stringify(t))},getEditorData(){this.loading=!0,ft.D.getBoardConfig2(this.viewBiId,JSON.stringify(this.getURLParams)).then(t=>{this.loading=!1,t&&t.status==200?(this.initConfig=t.data.configJson,this.setResource(()=>{this.setFit(),this.loadBoardAreaView(),this.setBoardIconLibrary()}),l.setBrowserTitle(t.data.boardName)):t.status==401?this.dialogVisible=!0:V.Message.error({message:t.msg,offset:60})})},setBoardIconLibrary(){this.getCurrentBoardConfig.canvasSetting.iconLibrary&&this.getCurrentBoardConfig.canvasSetting.iconLibrary.map(t=>{t.code&&t.code!=""&&JSON.stringify(this.getCurrentBoardConfig).indexOf("icon_library_code"+t.code)>-1&&Ct.D.getIconLibraryByCode(t.code).then(a=>{a.status==200?l.appendLink(a.data.fileUrlPath):V.Message.error({message:a.msg,offset:60})})})},getOriginalData(){this.loading=!0;let t={requestInfo:{publishId:this.viewGuid,boardId:this.viewBiId},globalParams:this.getURLParams};ut.h.getConfigForOriginal(JSON.stringify(t)).then(a=>{if(this.loading=!1,a&&a.status==200){if(a.data.roles){let r=JSON.parse(l.getStoreUserInfo());r.roleIdArray=a.data.roles,l.setStoreUserInfo(r)}this.initConfig=a.data.configJson,this.setResource(()=>{this.setFit(),this.loadBoardAreaView()}),this.setViewAppId(a.data.applicationId),this.setApplicationIdEx(a.data.applicationId),l.setBrowserTitle(a.data.publishName)}else a.status==401?(0,q.authenticationFailed)(!0)&&(this.dialogVisible=!0):V.Message.error({message:a.msg,offset:60})})},getPublicData(){this.loading=!0;let t={requestInfo:{publishId:this.viewGuid,boardId:this.viewBiId},globalParams:this.getURLParams};this.getConfigForPublic(JSON.stringify(t)).then(a=>{this.loading=!1,a&&a.status==200?(this.initConfig=a.data.boardPublish.configJson,this.setResource(()=>{this.setFit(),this.loadBoardAreaView()}),this.setViewAppId(a.data.boardPublish.applicationId),this.setApplicationIdEx(a.data.boardPublish.applicationId),this.setViewUserInfo(a.data.loginData.userInfo),this.setViewAccessToken(a.data.loginData.token),l.setBrowserTitle(a.data.boardPublish.publishName)):V.Message.error({message:a.msg,offset:60})})},setResource(t){let a=!0;if(this.getURLParams.load_resource_file!=null&&(a=l.stringToBoolean(this.getURLParams.load_resource_file)),a==!0){let r=[],c=[],d=JSON.parse(this.initConfig);this.$$lib__.each(d.canvasSetting.resource,g=>{g.sync==!0?r.push(g):c.push(g)}),r.length>0?l.loadCallbackResourceList(r,()=>{this.$$lib__.each(c,g=>{l.appendResource(g.fileUrlPath,g.restypeId,g.updatedTime)}),t&&t()}):(this.$$lib__.each(c,g=>{l.appendResource(g.fileUrlPath,g.restypeId,g.updatedTime)}),t&&t())}else t&&t()},loadBoardAreaView(){this.$refs.boardAreaView.loadBoardAreaView()},doBack(){this.clearBoard();let t=this.backAndRollback.previous.length-1;if(t>-1){let a=this.backAndRollback.previous[t].biId,r=this.backAndRollback.previous[t].guid,c=this.backAndRollback.previous[t].type,d=this.backAndRollback.previous[t].appId;this.backAndRollback.previous.splice(t,1),this.setBackAndRollback("behind"),this.viewBiId==a&&this.viewGuid==r&&this.viewType==c&&this.viewAppId==d&&t>0&&(a=this.backAndRollback.previous[t-1].biId,r=this.backAndRollback.previous[t-1].guid,c=this.backAndRollback.previous[t-1].type,d=this.backAndRollback.behind[t-1].appId,this.backAndRollback.previous.splice(t-1,1),this.setBackAndRollback("behind")),this.setViewBiId(a),this.setViewGuid(r),this.setViewType(c),this.setViewAppId(d),this.setApplicationIdEx(d),this.getBoardConfig()}},doRollback(){this.clearBoard();let t=this.backAndRollback.behind.length-1;if(t>-1){let a=this.backAndRollback.behind[t].biId,r=this.backAndRollback.behind[t].guid,c=this.backAndRollback.behind[t].type,d=this.backAndRollback.previous[t].appId;this.backAndRollback.behind.splice(t,1),this.setBackAndRollback("previous"),this.viewBiId==a&&this.viewGuid==r&&this.viewType==c&&this.viewAppId==d&&t>0&&(a=this.backAndRollback.behind[t-1].biId,r=this.backAndRollback.behind[t-1].guid,c=this.backAndRollback.behind[t-1].type,d=this.backAndRollback.behind[t-1].appId,this.backAndRollback.behind.splice(t-1,1),this.setBackAndRollback("previous")),this.setViewBiId(a),this.setViewGuid(r),this.setViewType(c),this.setViewAppId(d),this.setApplicationIdEx(d),this.getBoardConfig()}},setBackAndRollback(t){let a={biId:this.viewBiId,appId:this.viewAppId,guid:this.viewGuid,type:this.viewType};t=="previous"?this.backAndRollback.previous.push(a):t=="behind"&&this.backAndRollback.behind.push(a)},getUrlKey(t){let a=(new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[""])[1];return a!=null&&decodeURIComponent(a.replace(/\+/g,"%20"))||null},get_bodyHeight(){const t=this;window.onresize=()=>()=>{t.fullHeight=document.documentElement.clientHeight}},loginResult(t){t.isPass&&(this.dialogVisible=!1,this.centerDialogVisible=!1,this.getBoardId())},clearBoard(){this.clearBoardConfig(),this.loadBoardAreaView()},sameFocus(){const t=navigator.userAgent,a=/iPad|iPhone|iPod/.test(t),r=/Android/.test(t),c=this;setTimeout(()=>{r?c.scrollIntoView(!1):a&&(/OS 11_[0-3]\D/.test(t)||(document.body.scrollTop=document.body.scrollHeight))},300)},resolveKeyBoard(){const t=document.getElementsByTagName("input");Array.from(t).forEach(a=>{a.removeEventListener("focus",this.sameFocus),a.addEventListener("focus",this.sameFocus)})}}},At=Ot,bt=(0,rt.Z)(At,x,H,!1,null,"1d7e0406",null),ht=bt.exports,Lt={name:"App",components:{ScreenView:ht},computed:{...(0,E.Se)(["getCanvasSetting"])},watch:{getCanvasSetting(){this.getCanvasSetting.viewport&&!document.querySelector(".viewport-cont")&&J.b&&this.showViewport()}},data(){return{appViewport:!1}},mounted(){J.b?document.getElementsByTagName("body")[0].classList.add("pc-device"):document.getElementsByTagName("body")[0].classList.add("mobile-device")},methods:{showViewport(){let t=document.createElement("div");t.className="viewport-cont";let a=document.createElement("span");a.className="iconfont bi_pc active",a.onclick=this.pcView;let r=document.createElement("span");r.className="iconfont bi_app",r.onclick=this.appView,t.appendChild(a),t.appendChild(r),document.querySelector("body").appendChild(t),window.self==window.top&&(this.setIframeView(),this.appView("start"))},pcView(){this.appViewport=!1;let t=document.getElementsByTagName("iframe")[0];t.classList.add("pc"),t.classList.remove("mobile"),t.width=this.getCanvasSetting.width,(t.getAttribute("style")?t.getAttribute("style"):"").indexOf("height:"+this.getCanvasSetting.height+"px!important;")==-1&&t.setAttribute("style","height:"+this.getCanvasSetting.height+"px!important;min-width:100%");let r=document.getElementsByClassName("bi_pc")[0],c=document.getElementsByClassName("bi_app")[0];this.$$lib__.contains(r.classList,"active")||r.classList.add("active"),this.$$lib__.contains(c.classList,"active")&&c.classList.remove("active"),document.getElementsByClassName("viewport-rotate")[0].style.display="none",document.getElementsByClassName("mobile-pic")[0].style.display="none"},appView(t){this.appViewport=!0;let a=document.getElementsByTagName("iframe")[0];a.classList.add("mobile"),a.classList.remove("pc");let r=document.body.clientHeight;(a.getAttribute("style")?a.getAttribute("style"):"").indexOf("height:"+(r*.8-80).toFixed(2)+"px!important;")==-1&&(a.setAttribute("style","height:"+(r*.8-80).toFixed(2)+"px!important;padding:"+r*.06+"px "+r*.025+"px!important;"),document.getElementsByClassName("mobile-pic")[0].setAttribute("style","height:"+(r*.8-80).toFixed(2)+"px!important;padding:"+r*.06+"px "+r*.025+"px!important;"));let d=document.getElementsByClassName("bi_pc")[0],g=document.getElementsByClassName("bi_app")[0];if(this.$$lib__.contains(g.classList,"active")||g.classList.add("active"),this.$$lib__.contains(d.classList,"active")&&d.classList.remove("active"),document.getElementsByClassName("viewport-rotate")[0].style.display="block",document.getElementsByClassName("mobile-pic")[0].style.display="block",t=="start")return;let S=document.querySelector(".viewport-rotate .iconfont.bi_zxbd_refresh"),P=document.querySelector(".mobile-pic");this.$$lib__.contains(S.classList,"is-vertical")||S.classList.add("is-vertical"),this.$$lib__.contains(S.classList,"is-horizontal")&&S.classList.remove("is-horizontal"),this.$$lib__.contains(P.classList,"is-vertical")||P.classList.add("is-vertical"),this.$$lib__.contains(P.classList,"is-horizontal")&&P.classList.remove("is-horizontal")},setIframeView(){if(window.self!=window.top)return;let t=window.location.href,a=document.createElement("iframe");if(a.src=t,this.appViewport){a.classList.add("mobile");let g=document.body.clientHeight,S=a.getAttribute("style")?a.getAttribute("style"):"";S.indexOf("height")==-1&&a.setAttribute("style",S+"height:"+(g*.7-80)+"px!important;padding:"+g*.06+"px "+g*.025+"px!important;")}else a.classList.add("pc"),a.width=this.getCanvasSetting.width,(a.getAttribute("style")?a.getAttribute("style"):"").indexOf("height")==-1&&a.setAttribute("style","height:"+this.getCanvasSetting.height+"px!important;min-width:100%");let r=document.querySelector(".viewport-cont");r.style.display="block",document.querySelector("body").innerHTML="",document.querySelector("body").appendChild(a),document.querySelector("body").appendChild(r);let c=document.createElement("div");c.className="viewport-rotate",c.onclick=this.changeViewport,c.innerHTML='<span class="iconfont bi_zxbd_refresh is-vertical"></span>',c.style.display="none",document.querySelector("body").appendChild(c);let d=document.createElement("div");d.className="mobile-pic",d.style.display="none",document.querySelector("body").appendChild(d)},changeViewport(){let t=document.querySelector(".viewport-rotate .iconfont.bi_zxbd_refresh"),a=document.querySelector(".mobile-pic"),r=document.querySelector("iframe"),c=parseInt(r.style.width)?parseInt(r.style.width):r.offsetWidth-parseInt(r.style.paddingLeft)*2,d=parseInt(r.style.height);if(a.style.zIndex=999,this.$$lib__.contains(t.classList,"is-vertical")){t.classList.remove("is-vertical"),t.classList.add("is-horizontal"),a.classList.remove("is-vertical"),a.classList.add("is-horizontal");let g=document.body.clientHeight;r.setAttribute("style","width:"+d+"px!important;height:"+c+"px!important;padding:"+(g*.06+(g*.8-80-document.body.clientWidth*.2)/2)+"px "+g*.06+"px!important;")}else{t.classList.remove("is-horizontal"),t.classList.add("is-vertical"),a.classList.remove("is-horizontal"),a.classList.add("is-vertical");let g=document.body.clientHeight;r.setAttribute("style","width:"+d+"px!important;height:"+c+"px!important;padding:"+g*.06+"px "+g*.025+"px!important;")}}}},_t=Lt,Tt=(0,rt.Z)(_t,T,C,!1,null,null,null),Pt=Tt.exports,gt=h(155946),mt=h(807788),dt=h(66715),Ft=h(416131),Ht=h(340774),yt=h(367230),Zt=h(801559),Ut=h(520674),Bt=h(467880),Rt=h.n(Bt),jt=h(596471),vt=h(794774),St=h(131917),Vt=h(232590),st=h(777714);function Wt(t){t.use(st.Z),t.use(St.Z);let a=t.prototype.$message;function r(d){J.b?a(d):(0,st.Z)(d)}r.info=d=>{J.b?a.info(d):(0,st.Z)(d)},r.success=d=>{J.b?a.success(d):(0,st.Z)(d)},r.warning=d=>{J.b?a.warning(d):(0,st.Z)(d)},r.error=d=>{J.b?a.error(d):(0,st.Z)(d)},t.prototype.$message=r;let c=t.prototype.$confirm;t.prototype.$confirm=function(d,g,S){return J.b?c(d,g,S):St.Z.confirm({title:g,message:d,...S})}}var Et=Wt,$t=h(789615),xt=h(149500);z.Z.baseConfig.debuggerEnabled&&(window.location.search&&window.location.search.indexOf("debugger")>-1||z.Z.baseConfig.debuggerList&&z.Z.baseConfig.debuggerList.findIndex(t=>window.location.href.indexOf(t)>-1)>-1)&&l.registerScript(`${z.Z.baseConfig.projectName}/static/vconsole.min.js`).then(function(){const t=new VConsole;xt.log("\u6B22\u8FCE\u4F7F\u7528\u6570\u667A\u53EF\u89C6\u5316\u5E73\u53F0\uFF0C\u5DF2\u542F\u7528\u8C03\u8BD5\u6A21\u5F0F\u3002")}),I.default.config.productionTip=!1,Object.defineProperty(I.default.prototype,"$anime",{value:$t.Z}),I.default.use(Y()),I.default.use(Rt()),I.default.prototype.mUtils=l,Et(I.default);const pt=dt.Z.getQueryString("applicationId")||dt.Z.getQueryString("appId");if(z.Z.baseConfig.isPlatform&&(pt&&gt.Z.dispatch("setApplicationId",pt),gt.Z.dispatch("set_is_iframe",!0)),mt.Z.setAppIcon(pt),mt.Z.getTokenFromUrl({isPreview:!0}),new I.default({store:gt.Z,render:t=>t(Pt)}).$mount("#app"),window.bi&&window.bi.config&&window.bi.config.ding&&window.bi.config.ding.enabled){let t=window.bi.config.ding;if(navigator.userAgent.indexOf("TaurusApp")>-1)t.sapp_id&&t.bid&&l.registerScript(`${z.Z.baseConfig.projectName}/dingtalk/zhe-zheng-ding.js`).then(function(){xt.log("using dingtalk")});else if(t.ids&&t.ids.length>0){const r=dt.Z.getQueryString("biId"),c=dt.Z.getQueryString("biPid");(r&&t.ids.indexOf(r)>-1||c&&t.ids.indexOf(c)>-1)&&(window.location.href=`${z.Z.baseConfig.projectName}/dingtalk/redirect.html`)}}},935051:function(O,M,h){h.r(M),h.d(M,{authenticationFailed:function(){return at},deleteRequest:function(){return u},downloadExcelRequest:function(){return q},formGetRequest:function(){return rt},formPostRequest:function(){return ct},get:function(){return ot},getRequest:function(){return it},platformGetRequest:function(){return ft},platformPostRequest:function(){return ut},postRequest:function(){return K},putRequest:function(){return z},uploadFileRequest:function(){return Q}});var I=h(231954),T=h(91382),C=h(155946),x=h(927966),H=h(17977),k=h.n(H),R=h(555616),Z=h.n(R),j=h(645617),X=h.n(j),D=h(321300),E=h(149500);const J="X-Gisq-Token",V="X-Gisq-DeviceId",Y="ApplicationId",nt="gisq_request_id",e=I.Z.baseConfig,n=k().create({});n.interceptors.request.use(A=>{if(!A.url.startsWith(window.location.origin)&&!A.url.startsWith("/")&&!A.url.startsWith(".")&&!A.url.startsWith(e.platformApi)&&!A.url.startsWith(e.apiBaseURL))return A;if(A.headers[J]==null){const F=D.getStoreToken();F!==void 0&&F!==""&&F!==null&&(A.headers[J]="Bearer "+F)}if(A.headers[V]==null){const F=D.getStoreDeviceId();F!==void 0&&F!==""&&F!==null&&(A.headers[V]=F)}const W=C.Z.state.index.application.applicationId;return W&&(A.headers[Y]=W),A.headers[nt]=X().v4(),A},A=>(R.Message.error({message:A,offset:60}),Promise.reject(A))),n.interceptors.response.use(A=>{const W=A.data;return C.Z.commit("SET_RESPONSE_HEADERS",A.headers),W.status&&W.status!==200&&W.status!==201?W&&W.status==401?w(A):Promise.reject(W):W},A=>{let W=A&&A.response&&A.response.data&&(A.response.data.msg||A.response.data.message)||"",F=A.config.Message||R.Message;if(!(typeof A.config.errorHandler=="function"&&!A.config.errorHandler(A.response.status,A))){if(A.response.status==500){let G="\u540E\u7AEF\u670D\u52A1\u8FDE\u63A5\u5931\u8D25";if(A.response.data.type==="application/json"){let et=new FileReader;et.readAsText(A.response.data,"utf-8"),et.onload=lt=>{let tt=JSON.parse(lt.target.result);E.info(tt),F.error({message:tt.message||tt.msg,offset:60})},et.onload=function(lt){let tt=JSON.parse(lt.target.result);E.info(tt),F.error({message:tt.message||tt.msg,offset:60})}}else{G=W||G;let et="com.gisquest.datavisual.exception.DataVisualException:";G.indexOf(et)==0&&(G=G.substring(et.length)),F.error({message:G&&G.length>1?G:"\u51FA\u73B0\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5\u6216\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458",offset:60})}}else if(A.response.status==520)F.error({message:W,offset:60});else if(A.response.status==504||A.response.status==404){if(A.request.responseURL.indexOf("xzq/importGisXzqGeojson")>-1)return Promise.resolve(A);F.error({message:"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8FD4\u56DE\uFF1A"+A.response.status,offset:60})}else A.response.status==403?F.error({message:"\u6743\u9650\u4E0D\u8DB3,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458!",offset:60}):A.response.status==401?(F.error({message:W,offset:60}),at()):(E.info(A),F.error({message:W||"\u672A\u77E5\u9519\u8BEF\uFF01",offset:60}));return Promise.reject(A)}});let l=!0,m=[];const w=async A=>{if(l){E.log("\u6B63\u5728\u5237\u65B0token"),l=!1;const W=A.config;try{const F=await N();if(F&&F!=="")return D.setStoreToken(F),m.forEach(G=>G()),m=[],W.headers[J]="Bearer "+F,E.log("token\u5237\u65B0\u6210\u529F",F),n(W);E.log("token\u5237\u65B0\u5931\u8D25, token\u83B7\u53D6\u4E3A\u7A7A"),m=[],D.removeStoreToken(),at()}catch(F){E.error("token\u5237\u65B0\u5931\u8D25",F),m=[],D.removeStoreToken(),at()}finally{l=!0}}else return new Promise(W=>{m.push(()=>W(k()(I.Z)))});return A.data},N=async()=>{const A=D.getStoreToken();let W={http:n,token:A,mUtils:D,axios:k()};return window.refreshToken?(E.info("\u5728window.refreshToken\u4E2D\u83B7\u53D6token"),await window.refreshToken(W)):null},K=(A,W,F={})=>(F.headers||(F.headers={"Content-Type":"application/json"}),n({method:"post",url:`${I.Z.baseConfig.apiBaseURL}${A}`,data:W,...F})),Q=(A,W,F)=>n({method:"post",url:`${I.Z.baseConfig.apiBaseURL}${A}`,data:W,headers:{"Content-Type":"multipart/form-data"},...F}),q=(A,W)=>n({method:"post",url:`${I.Z.baseConfig.apiBaseURL}${A}`,data:W,responseType:"blob"}),z=(A,W)=>n({method:I.Z.baseConfig.usePutMethod?"put":"post",url:`${I.Z.baseConfig.apiBaseURL}${A}`,data:W,headers:{"Content-Type":"application/json"}}),u=A=>n({method:I.Z.baseConfig.usePutMethod?"delete":"get",url:`${I.Z.baseConfig.apiBaseURL}${A}`}),it=(A,W={})=>(W.headers||(W.headers={"Content-Type":"application/json"}),n({method:"get",url:`${I.Z.baseConfig.apiBaseURL}${A}`,...W})),ot=A=>(A=location.origin+`${I.Z.baseConfig.projectName}${A}`,n({method:"get",url:A})),rt=(A,W={})=>n({method:"get",url:A,...W}),ct=(A,W,F={})=>n({method:"post",url:A,data:W,...F}),at=A=>{if(!D.isView())return x.Z.$emit("loginAgain",!0),!1;if(D.removeStoreToken(),D.removeStoreUserInfo(),D.removeStoreDeviceId(),D.removeStoreOrApp("needModifyPassword"),localStorage.removeItem("menuData"),C.Z.commit("ADD_MENU",[]),I.Z.baseConfig.isPlatform){if(window.top!=window){let W={from:"gisq-bi",action:"logout"};window.top.postMessage(JSON.stringify(W),"*")}if(window.bi&&window.bi.config&&window.bi.config.publishUrl){let W=window.bi.config.publishUrl.startsWith("http")?window.bi.config.publishUrl:`${I.Z.baseConfig.domain}#${window.bi.config.publishUrl}`;return window.location.href=`${W}${W.indexOf("?")>-1?"&":"?"}redirect=${encodeURIComponent(window.location.href)}`,!1}}return!A&&T.Z.currentRoute.path!=="/"?(T.Z.replace({path:"/",query:{redirect:T.Z.currentRoute.path}}),!1):!0},ft=(A,W={})=>n({method:"get",url:`${I.Z.baseConfig.platformApi}${A}`,...W}),ut=(A,W,F={})=>(F.headers||(F.headers={"Content-Type":"application/json"}),n({method:"post",url:`${I.Z.baseConfig.platformApi}${A}`,data:W,...F}))},752246:function(O,M,h){h.d(M,{X:function(){return I},b:function(){return T}});let I={versions:function(){var C=navigator.userAgent;return{trident:C.indexOf("Trident")>-1,presto:C.indexOf("Presto")>-1,webKit:C.indexOf("AppleWebKit")>-1,gecko:C.indexOf("Gecko")>-1&&C.indexOf("KHTML")==-1,mobile:!!C.match(/AppleWebKit.*Mobile.*/),ios:!!C.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:C.indexOf("Android")>-1,iPhone:C.indexOf("iPhone")>-1,iPad:C.indexOf("iPad")>-1,webApp:C.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},T;I.versions.mobile||I.versions.ios||I.versions.android||I.versions.iPhone||I.versions.iPad?T=!1:T=!0},596471:function(O,M,h){h.d(M,{A:function(){return T}});var I=h(149500);/Version/.test(navigator.userAgent)&&document.addEventListener("plusready",()=>{I.log("plusReady---------")});const T=function(){if(window.plus)return window.plus;try{return window.top.plus}catch{return null}}},321300:function(O,M,h){h.r(M),h.d(M,{AES:function(){return r},accSub:function(){return At},addClass:function(){return G},appendCss:function(){return g},appendImageBaseURL:function(){return wt},appendLink:function(){return xt},appendResource:function(){return pt},arrObjSort:function(){return st},biResourceType:function(){return $t},colorToRgb:function(){return Rt},colorToRgbValue:function(){return jt},dataSet2DataList:function(){return y},dealRegison:function(){return dt},enc:function(){return Et},formatDate:function(){return A},getAppStore:function(){return nt},getHtmlImageInfo:function(){return It},getImageBase64:function(){return Ct},getLoadUrlComponent:function(){return Vt},getLocationByAddress:function(){return Zt},getNewFontSize:function(){return Lt},getNewPxH:function(){return Tt},getNewPxMin:function(){return Pt},getNewPxW:function(){return _t},getScalePxW:function(){return gt},getStore:function(){return Y},getStoreDeviceId:function(){return ft},getStoreOrApp:function(){return w},getStoreRememberPassword:function(){return ot},getStoreToken:function(){return u},getStoreUserInfo:function(){return it},getUrlKey:function(){return B},getWidgetPermissionDisabled:function(){return p},hexToRgba:function(){return St},html2canvas:function(){return c},isEditor:function(){return P},isEmpty:function(){return et},isMobile:function(){return Ut},isNumber:function(){return lt},isView:function(){return S},loadCallbackResource:function(){return a},loadCallbackResourceList:function(){return t},mergeObjs:function(){return bt},mergeObjsArr:function(){return ht},parseStringTemplate:function(){return v},parseToDate:function(){return W},parseToScope:function(){return F},randomString:function(){return Bt},rebuildData:function(){return Ht},registerScript:function(){return Wt},removeAppStore:function(){return n},removeStore:function(){return e},removeStoreDeviceId:function(){return ut},removeStoreOrApp:function(){return N},removeStoreRememberPassword:function(){return at},removeStoreToken:function(){return rt},removeStoreUserInfo:function(){return ct},rgbaToHex:function(){return vt},setAppStore:function(){return V},setBrowserTitle:function(){return Ot},setImgStyle:function(){return Ft},setStore:function(){return J},setStoreDeviceId:function(){return z},setStoreOrApp:function(){return m},setStoreRememberPassword:function(){return q},setStoreToken:function(){return K},setStoreUserInfo:function(){return Q},stringToBoolean:function(){return mt},style2CSSStr:function(){return d},toFixedNum:function(){return tt},transferFl:function(){return yt},useAppStore:function(){return l}});var I=h(645617),T=h.n(I),C=h(231954),x=h(155946),H=h(910761),k=h.n(H),R=h(117231),Z=h(42160),j=h(792162),X=h.n(j),D=h(869036),E=h(149500);const J=(i,s)=>{i&&(typeof s!="string"&&(s=JSON.stringify(s)),window.localStorage.setItem(i,s))},V=(i,s)=>{if(i&&s)if(C.Z.baseConfig.isPlatform==!1||C.Z.baseConfig.isUseAppObject==!1)J(i,s);else if(x.Z.state.index.application&&x.Z.state.index.application.applicationId&&x.Z.state.index.application.applicationId!=""){let o=x.Z.state.index.application.applicationId,f=window.localStorage.getItem("appObject");if(f)try{f=JSON.parse(f);let b=f[o];b?(b[i]=s,f[o]=b):(f[o]={},f[o][i]=s)}catch{E.error(f)}else f={},f[o]={},f[o][i]=s;window.localStorage.setItem("appObject",JSON.stringify(f))}else x.Z.state.editor.isBoardEditor!=!0&&E.error("localStorage\u4FE1\u606F\u5B58\u50A8\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A")},Y=i=>{if(!i)return;let s=window.localStorage.getItem(i);if(s!==null)try{s=JSON.parse(s)}catch{return s}return s},nt=i=>{if(i){if(C.Z.baseConfig.isPlatform==!1||C.Z.baseConfig.isUseAppObject==!1)return Y(i);if(x.Z.state.index.application&&x.Z.state.index.application.applicationId&&x.Z.state.index.application.applicationId!=""){let s=x.Z.state.index.application.applicationId,o=window.localStorage.getItem("appObject");if(o)try{o=JSON.parse(o);let f=o[s];if(f)return f[i];x.Z.state.editor.isBoardEditor!=!0&&E.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u6CA1\u6709["+s+"]\u7684\u5E94\u7528\u4FE1\u606F")}catch{E.error(o)}else x.Z.state.editor.isBoardEditor!=!0&&E.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u6CA1\u6709appObject\u5E94\u7528\u4FE1\u606F")}else x.Z.state.editor.isBoardEditor!=!0&&E.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A");return null}},e=i=>{i&&window.localStorage.removeItem(i)},n=i=>{if(i)if(C.Z.baseConfig.isPlatform==!1||C.Z.baseConfig.isUseAppObject==!1)e(i);else if(x.Z.state.index.application&&x.Z.state.index.application.applicationId&&x.Z.state.index.application.applicationId!=""){let s=x.Z.state.index.application.applicationId,o=window.localStorage.getItem("appObject");if(o)try{o=JSON.parse(o);let f=o[s];f?(f[i]=void 0,o[s]=f,window.localStorage.setItem("appObject",JSON.stringify(o))):x.Z.state.editor.isBoardEditor!=!0&&E.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5220\u9664\u5931\u8D25\uFF0C\u6CA1\u6709["+s+"]\u7684\u5E94\u7528\u4FE1\u606F")}catch{E.error(o)}else x.Z.state.editor.isBoardEditor!=!0&&E.error("localStorage\u4FE1\u606F\u5220\u9664\u5931\u8D25\uFF0C\u6CA1\u6709appObject\u5E94\u7528\u4FE1\u606F")}else x.Z.state.editor.isBoardEditor!=!0&&E.error("localStorage\u4FE1\u606F\u5220\u9664\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A")},l=()=>C.Z.baseConfig.isPlatform&&C.Z.baseConfig.isUseAppObject&&S()&&B("preview")!=="true"&&x.Z.state.view.preview!=!0&&window.sessionStorage.getItem("preview")!=="true",m=(i,s)=>{l()?V(i,s):J(i,s)},w=i=>l()?nt(i):Y(i),N=(i,s=!1)=>{i&&((s||l())&&n(i),(s||!l())&&e(i))},K=i=>{i&&(m("accessToken",i),m("X-Gisq-Token","Bearer "+i))},Q=i=>{i&&(typeof i!="string"&&(i.user_id&&(i.userId=i.user_id),i.user_nickname&&(i.userName=decodeURIComponent(i.user_nickname)),i.user_name&&(i.userCode=i.user_name),i.system_user&&(i.systemUser=i.system_user),i.superManager=i.superManager||i.roles&&i.roles.indexOf("ROLE_ADMIN")>-1,i=JSON.stringify(i)),m("userinfo",i))},q=(i,s,o,f)=>{if(!s||!o){E.log("\u7528\u6237\u6216\u8005\u5BC6\u7801\u4E3A\u7A7A,\u65E0\u6CD5\u8BB0\u4F4F\u5BC6\u7801");return}let b={username:s,password:o,expdate:new Date().getTime()+24*60*60*1e3*(f??30)},_=R.Z.encrypt_custom(JSON.stringify(b));window.localStorage.setItem("rememberPassword_"+i,_)},z=()=>{const i=w("accessDeviceId");(i==null||i==""||i==null)&&m("accessDeviceId",T().v1())},u=()=>w("accessToken"),it=()=>{let i=w("userinfo");return i?(C.Z.baseConfig.isPlatform&&(typeof i=="string"&&(i=JSON.parse(i)),(i.user_name&&!i.userCode||i.userCode!=i.user_name)&&(i.userId=i.user_id,i.userCode=i.user_name,i.userName=decodeURIComponent(i.user_nickname||""),i.phone=i.user_tel,i.roles=i.authorities)),typeof i=="string"?i:JSON.stringify(i)):"{}"},ot=i=>{let s=window.localStorage.getItem("rememberPassword_"+i);if(!s)return null;let o=JSON.parse(R.Z.decrypt_custom(s));return o.expdate<new Date().getTime()?(at(i),null):{username:o.username,password:o.password}},rt=()=>{N("accessToken"),N("X-Gisq-Token")},ct=()=>{N("userinfo")},at=i=>{window.localStorage.removeItem("rememberPassword_"+i)},ft=()=>w("accessDeviceId"),ut=()=>{N("accessDeviceId")},A=(i,s)=>{let o=i.getFullYear(),f=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,b=i.getDate()<10?"0"+i.getDate():i.getDate(),_=i.getHours()<10?"0"+i.getHours():i.getHours(),L=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),U=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds(),Dt=i.getMilliseconds()<10?"0"+i.getMilliseconds():i.getMilliseconds();return s==1?o+"-"+f+"-"+b+" "+_+":"+L+":"+U+"."+Dt:s==2?o+""+f+b+_+L+U:s==3?o+"-"+f+"-"+b:o+"-"+f+"-"+b+" "+_+":"+L+":"+U},W=i=>{let s="",o=i.substr(0,4),f=i.substr(4,2),b=i.substr(6,2),_=i.substr(8,2),L=i.substr(10,2),U=i.substr(12,2);return s=o+"-"+f+"-"+b+" "+_+":"+L+":"+U,s},F=(i,s)=>{let o={day:"\u5929",hour:"\u5C0F\u65F6",minute:"\u5206",seconds:"\u79D2",...s},f=i>=864e5?parseInt(i/864e5)+o.day:"",b=i%864e5;return f+=f.length>0||b>=36e5?parseInt(b/36e5)+o.hour:"",b=i%36e5,f+=f.length>0||b>=6e4?parseInt(b/6e4)+o.minute:"",b=i%6e4,f+=parseInt(b/1e3)+o.seconds,f},G=(i,s)=>{if(!s.headerBanner||!s.headerBanner.classList)return;let o=s.headerBanner.classList;i.target.scrollTop>10?o&&o.value.indexOf("scroll")==-1&&o.add("scroll"):o&&o.value.indexOf("scroll")>-1&&o.remove("scroll")},et=i=>{if(typeof i=="string")return i=i.replace(/\|&nbsp;|\\/g,"").replace(/(^\s*)|(\s*$)/g,""),i==""||i==null||i=="null"||i==="undefined";if(typeof i>"u")return!0;if(typeof i=="number")return!1;if(typeof i=="boolean")return!1;if(typeof i=="object")return JSON.stringify(i)=="{}"?!0:i==null;if(i instanceof Array&&i.length==0)return!0},lt=i=>{let s=/^\d+(\.\d+)?$/,o=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!!(s.test(i)||o.test(i))},tt=i=>Number(i).toFixed(2),wt=i=>!i||i==""?null:i.toString().indexOf("/images")==0?C.Z.baseConfig.viewImageBaseURL+i:i.toString(),Ct=i=>{let s='url("',o='")';return i.indexOf(s)>-1&&(i=i.substring(s.length)),i.indexOf(o)>-1&&(i=i.substring(0,i.length-o.length)),i},It=(i,s)=>{if(!s||s==""||s=="none")return null;let o='url("',f='")';s.indexOf(o)>-1&&(s=s.substring(o.length)),s.indexOf(f)>-1&&(s=s.substring(0,s.length-f.length));let b={id:T().v4().replace(/-/g,""),name:null,type:null,url_real:null,url_temp:s,base64:null};if(s.indexOf("data:")>-1){let _=i.id;b.id=X().SHA1(s).toString(X().enc.Hex),b.type=s.substring(s.indexOf("image/")+6,s.indexOf(";")),b.name=_,b.url_real="/images/"+b.id+"."+b.type,b.base64=s}else{let _=s.substring(s.lastIndexOf("/"));b.name=_.substring(0,_.indexOf(".")),b.type=_.substring(_.indexOf(".")),b.url_real="/images/"+b.id+"."+b.type}return b},Ot=i=>{document.title=i},At=(i,s)=>{let o,f,b,_;try{o=i.toString().split(".")[1].length}catch{o=0}try{f=s.toString().split(".")[1].length}catch{f=0}return b=Math.pow(10,Math.max(o,f)),_=o>=f?o:f,((i*b-s*b)/b).toFixed(_)},bt=(i,s)=>{if(s){if(!i)return s}else return i;for(let o in s)if(s[o]!=null&&s[o].constructor==Object)try{i[o]=bt(i[o],s[o])}catch(f){E.error(f)}else i[o]=s[o];return i},ht=(i,s)=>{if(s){if(!i)return s}else return i;for(let o in s)if(s[o]!=null&&s[o].constructor==Object)try{i[o]=ht(i[o],s[o])}catch(f){E.error(f)}else if(s[o]!=null&&s[o]instanceof Array&&s[o].length>0)if(s[o][0].constructor==Object){let f=[],b={};if(i[o])for(let _=0,L=i[o].length;_<L;_++)b[i[o][_].id]=_;for(let _=0,L=s[o].length;_<L;_++){let U=s[o][_];b[U.id]!==void 0?i[o][_]=ht(i[o][_],U):f.push(U)}if(i[o])for(let _=0,L=f.length;_<L;_++)i[o].push(f[_])}else for(let f=0;f<s[o].length;f++){let b=s[o][f];i[o].indexOf(b)===-1&&i[o].push(b)}else i[o]=s[o];return i},Lt=(i,s,o)=>o||s||x.Z.state.board.boardConfig.canvasSetting.transformType=="autoBoth"&&x.Z.state.board.boardConfig.canvasSetting.authBothNoText?i:i*Math.min(x.Z.state.view.bodyFraction.windowH,x.Z.state.view.bodyFraction.windowW),_t=(i,s)=>typeof s=="boolean"&&s?i:typeof s=="object"&&s.attr&&s.layout?s.attr.lockedW?i:s.layout.widgetW.old>0?i*s.attr.widgetW/s.layout.widgetW.old:0:i*x.Z.state.view.bodyFraction.windowW,Tt=(i,s)=>typeof s=="boolean"&&s?i:typeof s=="object"&&s.attr&&s.layout?s.attr.lockedH?i:s.layout.hh.old>0?i*s.attr.hh/s.layout.hh.old:0:i*x.Z.state.view.bodyFraction.windowH,Pt=(i,s)=>s?i:i*Math.min(x.Z.state.view.bodyFraction.windowW,x.Z.state.view.bodyFraction.windowH),gt=(i,s)=>{if(s==="auto"||s==="autoWidth")return i*x.Z.state.view.bodyFraction.windowScaleW;if(s==="autoHeight")return i*x.Z.state.view.bodyFraction.windowScaleH},mt=i=>{if(i){let s=i.toString();switch(s.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return!!s}}},dt=i=>{let s=i.toString().length,o;return s==5&&i=="china"?o="china":s<=2?o="geometryProvince/"+i:s<=4?o="geometryCities/"+i+"00":s<=6?o="geometryCouties/"+i+"00":s<=12&&(o="geometryTown/"+i),o},Ft=i=>{let s=h(403963);try{s=h(28544)("./"+i.widgetType+"/"+i.widgetGroup+"/"+i.widgetImg)}catch{}return{backgroundImage:"url("+s+")"}},Ht=(i,s,o)=>{let f={},b={},_=[];return k().each(s,L=>{L.id=L[o.data.id]+"_"+L.applicationId,L.label=L[o.data.name],L.type="data",f[L[o.data.category]]||(f[L[o.data.category]]=[]),f[L[o.data.category]].push(L)}),k().each(i,L=>{L.id="category_"+L[o.category.id]+"_"+L.applicationId,L.label=L[o.category.name],L.type="category",L[o.category.parentId]!=null&&L[o.category.parentId]!=""?(b[L[o.category.parentId]]||(b[L[o.category.parentId]]=[]),b[L[o.category.parentId]].push(L)):_.push(L)}),yt(_,b,f,o.category.id),_},yt=(i,s,o,f)=>{k().each(i,b=>{let _=s[b[f]];_?(b.children=_,o[b[f]]&&k().each(o[b[f]],L=>{b.children.push(L)}),yt(_,s,o,f)):o[b[f]]&&(b.children=o[b[f]])})},Zt=(i,s,o,f)=>new Promise((b,_)=>{(!s||s=="")&&(s="\u5168\u56FD");let L="http://api.map.baidu.com/place/v2/search?query="+i+"&region="+s+"&output=json&ak=8cyYUAN3bZGbZ2C8T4MD3T0HDOuDCm4x&page_size="+o+"&ret_coordtype=gcj02ll&page_num="+f;Z.default.jsonp(L).then(U=>{b(U)}).catch(U=>{_(U)})}),Ut=()=>{if(typeof window.gisqbiParamIsMobile>"u"){let i=navigator.userAgent;window.gisqbiParamIsMobile=i.indexOf("Linux")>-1&&i.indexOf("Android")>-1||i.indexOf("iPhone")>-1||i.indexOf("MQQBrowser")>-1}return window.gisqbiParamIsMobile},Bt=i=>{let s="";for(i||(i=4);s.length<i;s+=Math.random().toString(36).substr(2));return s.substr(0,i)},Rt=i=>{let s=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(i=i.toLowerCase(),i&&s.test(i)){if(i.length===4){let f="#";for(let b=1;b<4;b+=1)f+=i.slice(b,b+1).concat(i.slice(b,b+1));i=f}let o=[];for(let f=1;f<7;f+=2)o.push(parseInt("0x"+i.slice(f,f+2)));return"rgb("+o.join(",")+")"}else return i},jt=i=>{if(i=i.toLowerCase(),i&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(i)){if(i.length===4){let f="#";for(let b=1;b<4;b+=1)f+=i.slice(b,b+1).concat(i.slice(b,b+1));i=f}let o=[];for(let f=1;f<7;f+=2)o.push(parseInt("0x"+i.slice(f,f+2)));return o.join(",")}else if(i.indexOf("rgb")>-1){i=i.substring(i.indexOf("(")+1,i.indexOf(")"));let o=i.split(",");return o.length=3,o.join(",")}return i},vt=i=>{if(i&&i.startsWith("rgba(")){let s="";i=i.trim(),i=i.substring(5,i.length-1);let o=i.split(",");o=o.map(f=>f.trim()-0);for(let f=0;f<3;++f){let b=o[f].toString(16);s+=b.length<2?"0"+b:b}if(o[3]&&o[3]<1){let f=Math.round(o[3]*100).toString(16);s+=f.length<2?"0"+f:f}return s}else return i},St=i=>{if(i.length<=8){let s="rgba(";for(let o=0;o<3;++o){let f=i.substr(o*2,2);s+=parseInt("0x"+f)+","}return i.length==8?s+=parseInt("0x"+i.substr(6))/100+")":s+="1)",s}else return i},Vt=i=>{try{let s=null;if(typeof i=="object"?i.canvasSetting?s=i.canvasSetting:s=i:typeof i=="string"&&(s=JSON.parse(i).canvasSetting),s&&s.loading&&s.loading.type!="default")return"&load="+s.loading.type+"$"+vt(s.loading.backgroundColor)+"$"+vt(s.loading.iconColor)}catch(s){E.log(s)}return""},st=(i,s,o)=>{o=o?o.toLowerCase():"asc",i.sort((f,b)=>s?o=="asc"?f[s]-b[s]:b[s]-f[s]:o=="asc"?f-b:b-f),i.forEach(f=>{f.children&&f.children.length>0&&st(f.children,s,o)})},Wt=async i=>new Promise((s,o)=>{const f=document.createElement("script");f.src=i,f.onload=s,f.onerror=o;const b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(f,b)}),Et=i=>{let s=JSON.parse(JSON.stringify(i));if(s.dataSet){let o=typeof s.dataSet=="string"?JSON.parse(s.dataSet):s.dataSet;o.query&&o.query.script&&(o.query.script.enabled?o.query.script.content="":delete o.query.script),o.source&&(o.source=[]),s.dataSet=JSON.stringify(o)}else{if(s.query){let o=typeof s.query=="string",f=o?JSON.parse(s.query):s.query;f.script&&(f.script.enabled?f.script.content="":delete f.script,o&&(s.query=JSON.stringify(f)))}s.source&&(s.source=[])}if(C.Z.baseConfig.enc)if(s=s||JSON.parse(JSON.stringify(i)),s.dataSet){let o=JSON.parse(s.dataSet);o.query&&(o.query=R.Z.encrypt(typeof o.query=="string"?o.query:JSON.stringify(o.query))),o.dataSetParams&&(o.dataSetParams=R.Z.encrypt(typeof o.dataSetParams=="string"?o.dataSetParams:JSON.stringify(o.dataSetParams))),s.dataSet=JSON.stringify(o)}else s.query&&(s.query=R.Z.encrypt(typeof s.query=="string"?s.query:JSON.stringify(s.query))),s.dataSetParams&&(s.dataSetParams=R.Z.encrypt(typeof s.dataSetParams=="string"?s.dataSetParams:JSON.stringify(s.dataSetParams))),s.cfg&&(s.cfg=R.Z.encrypt(typeof s.cfg=="string"?s.cfg:JSON.stringify(s.cfg)));return s},$t=i=>{let s=["10001","10002"];return k().filter(i,o=>k().contains(s,o.restypeId))},xt=i=>{let s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("class","iconLibrary"),s.setAttribute("href",C.Z.baseConfig.projectName+i),document.head.appendChild(s)},pt=(i,s,o,f)=>{if(x.Z.state.index.application&&x.Z.state.index.application.applicationId&&x.Z.state.index.application.applicationId!=""){let b=null;switch(s){case"10001":return b=document.createElement("link"),b.setAttribute("rel","stylesheet"),b.setAttribute("href",C.Z.baseConfig.projectName+"/resource/"+x.Z.state.index.application.applicationId+i+"?v="+o),document.head.appendChild(b),b;case"10002":return b=document.createElement("script"),b.setAttribute("charset","utf-8"),b.setAttribute("type","application/javascript"),b.setAttribute("src",C.Z.baseConfig.projectName+"/resource/"+x.Z.state.index.application.applicationId+i+"?v="+o),f&&(b.onload=f,b.onerror=f),document.head.appendChild(b),b;default:E.error("\u672A\u77E5\u8D44\u6E90\u7C7B\u578B")}}else E.error("\u5E94\u7528ID\u4E3A\u7A7A")},t=(i,s)=>new Promise(()=>{i.reduce((o,f)=>o.then(()=>a(f.fileUrlPath,f.restypeId,f.updatedTime)),Promise.resolve()).then(()=>{s&&s()}).catch(o=>(E.error("\u8D44\u6E90\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25:",o.name,o.message),Promise.reject(o)))}),a=(i,s,o)=>{if(x.Z.state.index.application&&x.Z.state.index.application.applicationId&&x.Z.state.index.application.applicationId!=""){let f=null;switch(s){case"10001":return f=C.Z.baseConfig.projectName+"/resource/"+x.Z.state.index.application.applicationId+i+"?v="+o,new Promise((b,_)=>{const L=document.createElement("link");L.setAttribute("rel","stylesheet"),L.onload=()=>b(),L.onerror=()=>_(new Error(`Load css from ${f} failed`)),L.href=f;const U=document.head||document.getElementsByTagName("head")[0];(document.body||U).appendChild(L)});case"10002":return f=C.Z.baseConfig.projectName+"/resource/"+x.Z.state.index.application.applicationId+i+"?v="+o,new Promise((b,_)=>{const L=document.createElement("script");L.setAttribute("charset","utf-8"),L.setAttribute("type","application/javascript"),L.onload=()=>b(),L.onerror=()=>_(new Error(`Load script from ${f} failed`)),L.src=f;const U=document.head||document.getElementsByTagName("head")[0];(document.body||U).appendChild(L)});default:return E.error("\u672A\u77E5\u8D44\u6E90\u7C7B\u578B"),new Promise((b,_)=>{_()})}}else return E.error("\u5E94\u7528ID\u4E3A\u7A7A"),new Promise((f,b)=>{b()})},r={CryptoJS:R.Z.getCryptoJS(),encrypt:R.Z.encrypt,decrypt:R.Z.decrypt},c=(i,s,o)=>{if(!i||!i.dom){E.error("\u53C2\u6570\u9519\u8BEF");return}s||(s=function(f,b){f.toBlob(_=>{const L=document.createElement("a");L.download=b.filename||b.dom.id||"\u56FE\u7247",L.style.display="none",L.target="_blank",L.href=URL.createObjectURL(_),document.body.appendChild(L),L.click(),document.body.removeChild(L)})}),Promise.all([h.e(94009),h.e(23497)]).then(function(){const f=h(64707).Z;f(i.dom,{scale:i.scale||.5,useCORS:!0,allowTaint:!1}).then(b=>{s(b,i)}).catch(b=>{E.error(b),typeof o=="function"&&o(b)})}.bind(null,h)).catch(h.oe)},d=i=>Object.keys(i).reduce((s,o)=>s+(i[o]?`${o.split(/(?=[A-Z])/).join("-").toLowerCase()}:${i[o]};`:""),""),g=(i,s)=>{let o=document.getElementById(i);o?o.innerHTML=s:(o=document.createElement("style"),o.id=i,o.innerHTML=s,document.getElementsByTagName("head")[0].appendChild(o))},S=()=>window.location.pathname.indexOf("view.html")>-1||window.location.pathname.indexOf("query_view.html")>-1||x.Z.getters.isView,P=()=>window.location.pathname.indexOf("editor.html")>-1||window.location.pathname.indexOf("query_design.html")>-1,y=i=>{let s=null;return i&&i.type?s=i[i.type]:i&&i.source&&i.dimensions&&(s=i),s.source&&s.source.length>0&&s.dimensions?s.source.map(o=>{let f={};return s.dimensions.forEach((b,_)=>{f[b]=o[_]}),f}):[]},B=i=>{let s=(new RegExp("[?|&]"+i+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[""])[1];return s!=null&&decodeURIComponent(s.replace(/\+/g,"%20"))||null},v=(i,s)=>{if(!i)return null;let o=i.split(/\$\{(?!\d)[\w]*\}/),b=(i.match(/[^{\}]+(?=})/g)||[]).map(_=>s[_]||(s[_]===void 0?"":s[_]));return String.raw({raw:o},...b)},p=(i,s)=>{if(D.Z.state.viewType=="public")return!1;let o=!1,f=JSON.parse(it()),b=i.permissions,_=null;b&&b.length>0&&(_=b.find(U=>U.enabled&&U.code===s));let L=window.localStorage.getItem("roleIds");if(f&&!f.roleIdArray&&L&&(f.roleIdArray=L.split(",")),_&&_.roles&&_.roles.length>0&&f&&f.roleIdArray){let U=!1;for(let Dt in f.roleIdArray)if(_.roles.find(Jt=>Jt.roleId==f.roleIdArray[Dt])){U=!0;break}o=_&&!_.roleHide?!U:U}else if(b)for(let U=0;U<b.length;U++)b[U].code==s&&b[U].enabled&&(o=!b[U].roleHide);return o}},803306:function(O,M,h){O.exports=h.p+"static/img/lapse.d2f6095c.png"}},Nt={};function $(O){var M=Nt[O];if(M!==void 0)return M.exports;var h=Nt[O]={id:O,loaded:!1,exports:{}};return kt[O].call(h.exports,h,h.exports,$),h.loaded=!0,h.exports}$.m=kt,function(){$.amdO={}}(),function(){var O=[];$.O=function(M,h,I,T){if(h){T=T||0;for(var C=O.length;C>0&&O[C-1][2]>T;C--)O[C]=O[C-1];O[C]=[h,I,T];return}for(var x=1/0,C=0;C<O.length;C++){for(var h=O[C][0],I=O[C][1],T=O[C][2],H=!0,k=0;k<h.length;k++)(T&!1||x>=T)&&Object.keys($.O).every(function(E){return $.O[E](h[k])})?h.splice(k--,1):(H=!1,T<x&&(x=T));if(H){O.splice(C--,1);var R=I();R!==void 0&&(M=R)}}return M}}(),function(){$.n=function(O){var M=O&&O.__esModule?function(){return O.default}:function(){return O};return $.d(M,{a:M}),M}}(),function(){var O=Object.getPrototypeOf?function(h){return Object.getPrototypeOf(h)}:function(h){return h.__proto__},M;$.t=function(h,I){if(I&1&&(h=this(h)),I&8||typeof h=="object"&&h&&(I&4&&h.__esModule||I&16&&typeof h.then=="function"))return h;var T=Object.create(null);$.r(T);var C={};M=M||[null,O({}),O([]),O(O)];for(var x=I&2&&h;typeof x=="object"&&!~M.indexOf(x);x=O(x))Object.getOwnPropertyNames(x).forEach(function(H){C[H]=function(){return h[H]}});return C.default=function(){return h},$.d(T,C),T}}(),function(){$.d=function(O,M){for(var h in M)$.o(M,h)&&!$.o(O,h)&&Object.defineProperty(O,h,{enumerable:!0,get:M[h]})}}(),function(){$.f={},$.e=function(O){return Promise.all(Object.keys($.f).reduce(function(M,h){return $.f[h](O,M),M},[]))}}(),function(){$.u=function(O){return"static/js/"+({1139:"GisqBILibEcharts",40430:"LivePlayer",96494:"GisqBILibOpenlayer"}[O]||O)+"."+{596:"aa9bc9b8",824:"54563975",875:"e3fe42cb",946:"6720f278",1030:"1c7c40b3",1139:"70876443",1530:"f82af9d2",1564:"e2188623",2008:"7a1506ae",2237:"dfb8df33",2465:"030986b4",2739:"1edfe9f9",2748:"e471b716",2810:"f034e8c2",3422:"fcd55e05",3787:"8cd15be3",3850:"0cb17409",4116:"836d7fe1",4501:"5e11d206",4527:"83f2f2c1",4536:"c8748849",5034:"edfdb354",5069:"67be5154",5401:"98b6f29b",5436:"6096ad4b",5860:"d49fecdf",6173:"11bc3f02",6206:"885858a8",7090:"3af70bbe",7556:"bc5bff9d",7715:"3ba2dbea",7782:"68273619",7965:"2e7c8c81",8090:"64dfc3fb",8646:"d0ffd548",8647:"9ae2acf6",8694:"10825866",8890:"7a2bf188",9245:"aa53aff8",9249:"2483fa82",9372:"9d3d2e8b",9505:"b0529675",10036:"bfd900e5",10057:"cbd43358",10213:"be0ba65b",10482:"c693da24",10693:"a9b72848",10854:"f49925c8",11174:"83640ee5",11183:"f9de8541",12365:"09ebd095",12768:"9ced6a87",12826:"ccca38ce",13063:"3dc641c3",13225:"00c968b4",13621:"e7993f3f",13780:"3ee1dcf9",13809:"de38c0ca",14031:"1c3f7306",14324:"d7182e94",14407:"bd9371cd",14699:"84855c4b",14806:"7fc2a810",14829:"a6a2a619",14849:"9d7da7ba",14931:"09991168",15481:"bb3efa78",15690:"4b6d5e72",15810:"a935ce39",15914:"e933129b",16607:"7c79d983",17082:"920059e5",17460:"8a3c50b5",17745:"edef5c2e",17813:"add0c0c5",18587:"9382e9ef",18792:"69c63484",19471:"9d2d0b96",19934:"ccf28a5b",20070:"0e7c997a",20098:"f7918d90",20142:"2f98e0e2",20755:"3022f02d",20823:"c9880217",20863:"df694ea2",21023:"b3c466b6",21245:"01731397",21381:"cebdc962",21472:"14178402",21701:"ad6630a3",21808:"67ce5fef",21917:"2485340b",22121:"fd955e25",22259:"1bbce502",22305:"09cb9b2c",22522:"18df4f8c",22680:"943aeb00",22707:"7af46e92",22735:"7e2a43d1",23047:"26ae3c60",23400:"4f240d39",23497:"b4871df2",23731:"78eec250",23927:"491bf258",24055:"c0abf36d",24096:"b8d15f70",24334:"18acd819",24419:"67b6cbd9",24452:"c28d8e17",24543:"4e6ae983",24747:"bbc52cf8",25004:"1b204a4e",25347:"e7954826",25362:"106dbc59",26279:"3460fddf",26393:"fe4e3dad",26591:"827ad4d0",27287:"6e1a32b3",27367:"69f7253c",27493:"cd412606",27608:"c2b5b24c",27737:"5df39411",27921:"6e12e96e",27922:"86aade19",27992:"993016d6",28292:"bf1df0ea",28725:"38e273de",29048:"30b4faca",29686:"eb7113b9",29865:"5afe550b",29932:"eef4dddb",29936:"ca12ad66",30052:"643a832b",30198:"2799bfa6",30434:"8cce17d0",30602:"e0981736",30830:"367c3c4e",30847:"d071cdd0",31357:"fa17eba2",31375:"a30a80c5",31579:"ef906e2f",32002:"950a19fd",32132:"3e64b9c3",32216:"d8e49734",32569:"c745db4f",32602:"941edfc8",32627:"040fcd71",32654:"5cbc6c98",32748:"895ae25e",33217:"13e53db7",33332:"129c8a7e",33684:"cfc7e367",34281:"85cd6302",34643:"d9e2003b",34908:"e8c84f47",34917:"5b814d87",35151:"6462a7c8",35387:"4c07417b",35485:"5a5c243f",35776:"b252f5fc",36192:"a93db8b4",36456:"7b957eb3",36689:"145d129d",36968:"d067d249",37040:"1d245d41",37561:"c1b66e9e",37661:"414d21b3",38018:"d2a96977",38204:"4d434614",38923:"484e6dae",39087:"4e2432a8",39190:"16a2bb20",39450:"86b54115",39810:"3b77e49d",40028:"e9f535bc",40430:"3abde9cd",40606:"1b84a546",41e3:"6a48ead4",41585:"f2b24ba7",42019:"d980a86e",42460:"fa8e6fd9",42551:"b03b1b3b",42932:"f8dc5533",43293:"e624ffe5",43446:"2ed7ef89",44564:"c53cae66",44777:"c527054e",45061:"7605ef01",45781:"db595b78",46113:"486307ea",46381:"214ab340",46512:"f09339d7",46564:"732d4ba1",47447:"dd451a1a",47558:"a3712fe0",48126:"1f82a33d",48317:"cc43d412",48727:"cb6ebca0",48773:"2432ba7b",48897:"a157e5c9",49558:"bff864fc",49603:"76957a32",49639:"79100752",50189:"8e7f0bb1",50448:"d40b3388",50767:"31ba788b",51207:"17d9e04a",51395:"b6bc36ea",51481:"d34347e5",51611:"983d9cf3",52214:"ed24aede",52605:"99a2d589",52830:"9e2a7bf0",52864:"2fee1bf9",53059:"16ab7dcb",53210:"751935dd",54188:"f0c9fff9",54197:"7723e5b2",54793:"fa18f16c",55217:"f3ad2f1f",55482:"7962003a",55577:"63c735f1",55660:"2e8c12fd",55844:"11824d14",56024:"a2d9b759",56348:"e05c9de6",56371:"01546c65",56737:"0e67a644",56828:"b39a8717",57539:"8b1df098",58098:"ad703b3e",58214:"813ab20b",58271:"e6d8a48e",59199:"865415f8",59353:"c420be21",59452:"352ca5c4",60732:"b25f8547",60797:"c4fda955",60824:"9368e63f",61474:"43d92b43",61949:"0575eb97",62189:"f4adb2a0",62292:"03a6418c",62368:"1609b5cb",62509:"8999e832",62732:"43a4df77",62735:"f8bdcbfb",63106:"9d6b6c74",63155:"66a6943c",63707:"c1a0fa35",63995:"7e653c8c",64510:"4980f251",64529:"b5677fc2",64741:"d793c9bf",64879:"87d0cf1c",65056:"b7d7c901",65186:"3a4a1209",65594:"348b5bcd",66399:"2970dab9",66696:"da63287b",66794:"08de5b2a",66887:"713de65a",66990:"c6df5650",67157:"589e69e6",67670:"3b5ce530",67727:"e58e8aa5",67946:"c9685182",68397:"c5834e75",68433:"5d39b9d9",68684:"389e314b",69188:"d7736616",69356:"4e62d3e1",69448:"3a5f6f8e",69573:"d71af22e",69796:"f5b81cd7",70118:"449bd80f",70606:"222a9510",70933:"a4ab7ac3",71114:"941e5e31",72102:"c07bf95e",72129:"dc5a51ac",72217:"3ab89416",72682:"a4703999",73119:"715f401e",73424:"6e596b0d",73641:"b8799aca",73763:"0647daf0",73907:"8ca0a3c7",74136:"7e92e4f8",74149:"1a86a8c7",74165:"a043a0fc",74214:"9638e810",74292:"604787ed",74477:"39ab3100",74482:"0be15b95",74487:"07db3da4",74752:"0672dfe7",75075:"fd78d383",75201:"715ec1ed",75305:"0ea7e8ae",75630:"d350119b",76662:"1200046b",77025:"a666badb",77121:"b6f81554",77129:"11da6cf6",77147:"9c3741a0",77334:"b65a0d1a",77414:"04743487",77863:"f86c5463",78219:"9b7be9b5",78481:"587a89ef",78844:"b6c3c130",78988:"55fd138d",79273:"8162b234",79869:"48b14da0",79880:"3d40db10",80005:"48142b49",80383:"54a7658b",80427:"fa5e5f19",80709:"e4d440a6",80886:"b7052c0a",81078:"60fe95f7",81080:"2953be8a",81346:"4a5c9c29",81435:"d9ce6e19",81814:"cda8444c",81978:"a7c0863a",82127:"ce120953",82157:"2468c708",82368:"073f0a94",82691:"c4b0c08c",82807:"d4ce8446",82876:"6b63d707",83676:"539e9554",83719:"f4915137",83943:"e412a509",84296:"9b88c442",84857:"9093b0cb",86430:"5a9edd0d",86750:"db26655f",86959:"96e7d8ed",87162:"08a11664",87479:"274ffb7d",88312:"4df37e12",88362:"15990839",88545:"717156a8",89038:"5b8f20ca",89432:"c5bcbf68",89536:"db2d5a69",89622:"4ff570b6",90089:"8f1ee728",90099:"1c62466f",90115:"342e8057",90160:"8b194e7e",90926:"79efcd43",91374:"ed6881e7",91785:"91a70a58",92021:"58c59d4c",92200:"7c80a6f0",92241:"b4e9b97a",92484:"c6417654",92560:"425753ed",92703:"bb6fdc68",93135:"1064a7a6",93250:"51e5583b",93451:"b92fca4b",93503:"35577b40",93575:"59e8a26a",93597:"3245dd3d",93736:"01289328",93981:"a95feb13",94009:"843f0bf8",95172:"263de01c",96494:"985c9b05",96605:"6eaa6758",96831:"5b154aa1",97060:"df3c7e18",97084:"3c326198",97565:"c155e577",97666:"26fbce45",97671:"d97ec53d",97698:"6ec4a630",97986:"6683bd1e",98405:"3e4a63d8",98706:"52af0981",98769:"70a8936f",98799:"f3633982",98889:"c0bde7d9",99096:"afd32c04",99231:"a8de91d3",99349:"e09ef38a",99377:"fda2b76f",99419:"056620ab",99438:"cad9db5d",99957:"32cc4e27"}[O]+".js"}}(),function(){$.miniCssF=function(O){return"static/css/"+O+"."+{596:"5d75fed1",875:"83dbc902",2739:"346bf361",2748:"a7604e30",2810:"ddc2ea31",4536:"06df5e0a",5034:"177eaef1",5401:"1746b076",5436:"2f2b2223",5860:"c831aed6",7782:"a40ef0cf",8694:"22d82290",9245:"55f88bbb",9249:"8b206a79",9505:"f0dd0e0a",10036:"7f3f9ade",10854:"80a6a48d",12365:"21fc0588",13621:"4b9a6c41",13809:"507097fc",14324:"65703f8e",14699:"e2ccefdd",14829:"44914a41",14849:"b473f9d9",17082:"7bf87a01",20142:"8bf63047",20823:"17adc206",20863:"502c8261",21472:"a4538b5e",21701:"61a0a85c",21917:"d3c8b08b",22522:"2fc2b94a",22735:"daf83ef8",23047:"0ba37062",24334:"c0a6b1f7",24452:"3e5775f8",25004:"84fcd579",27493:"dd59458e",27921:"649951e8",28725:"b3644b28",29686:"708ab07b",30052:"533c5d0c",30434:"1d455d84",30602:"d8b00e4d",30847:"2aa2719f",31375:"d757fc05",31579:"4e73c7d3",32216:"549112c3",32748:"5e5ccfcc",33684:"36e750b5",34643:"8e99d55e",34908:"7bf87a01",36192:"f5524b91",36689:"15601dcc",36968:"5fdf268e",38018:"1c91b1ac",38204:"64e5f951",38923:"28d8c245",39087:"c476e677",39190:"3929801e",39810:"46f35482",41e3:"187af014",41585:"2aed1dfd",42460:"0e140bf6",42932:"a06ea3f2",43293:"09762dda",44777:"4096670b",46381:"9629513c",46512:"5fa1872b",47447:"3d48573d",48126:"4595a2c2",49603:"1f1cbe4c",51395:"38bf72e4",51481:"28932282",52214:"e5919db8",54793:"a193b156",56024:"26c62aba",56348:"47187523",56371:"c81f9b80",56737:"126350e9",58098:"fb2da555",58214:"df04472c",59199:"7bf87a01",59353:"b33ac816",60732:"aa8bf4d4",61474:"0fa3044e",62292:"199d4004",62509:"c42b0216",63155:"afd44ba0",63707:"dcba4513",64741:"b6d8c0f1",65186:"dd62a5cc",66696:"5adfec0d",66794:"73006af8",66887:"c62c7481",66990:"73f42fdf",67670:"87871530",67727:"20c8f61a",67946:"fb3175e0",69188:"028c66f6",69573:"d0e45676",70118:"993e0802",70606:"cc2cb9b7",70933:"45f4195e",72102:"80febce1",73119:"177eaef1",73424:"1bf89634",73763:"cc256a15",73907:"56ec6f15",74149:"177eaef1",75201:"8461def7",76662:"f5eb1201",77129:"694f69a0",77147:"8a6f2aac",78219:"7b170ad4",78844:"5e12ea5d",79869:"adbc1961",80383:"e2d83922",80427:"aaef8813",80886:"f6362f38",81435:"31f05bfd",82368:"e5fd140c",82691:"8a195df3",82807:"0e140bf6",84857:"9f93a06b",87162:"ad1d0b56",88312:"4f1e7621",89432:"dbd2578b",89622:"e42245b4",90099:"1d01d7b2",90115:"fc26b24a",91785:"d2c68da5",92021:"39ecaf49",92484:"73af21bf",92560:"034ac0a1",93135:"71517cd8",93250:"5ba7f7cc",93736:"cfc8ac8f",93981:"d1294b03",96605:"2545bf28",97666:"f7a84c86",97671:"a3763bbf",98405:"f59f758c",98799:"be8f3fb7",99419:"7bf87a01",99438:"4a7565d4",99957:"820cef74"}[O]+".css"}}(),function(){$.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){$.o=function(O,M){return Object.prototype.hasOwnProperty.call(O,M)}}(),function(){var O={},M="datavisual:";$.l=function(h,I,T,C){if(O[h]){O[h].push(I);return}var x,H;if(T!==void 0)for(var k=document.getElementsByTagName("script"),R=0;R<k.length;R++){var Z=k[R];if(Z.getAttribute("src")==h||Z.getAttribute("data-webpack")==M+T){x=Z;break}}x||(H=!0,x=document.createElement("script"),x.charset="utf-8",x.timeout=120,$.nc&&x.setAttribute("nonce",$.nc),x.setAttribute("data-webpack",M+T),x.src=h),O[h]=[I];var j=function(D,E){x.onerror=x.onload=null,clearTimeout(X);var J=O[h];if(delete O[h],x.parentNode&&x.parentNode.removeChild(x),J&&J.forEach(function(V){return V(E)}),D)return D(E)},X=setTimeout(j.bind(null,void 0,{type:"timeout",target:x}),12e4);x.onerror=j.bind(null,x.onerror),x.onload=j.bind(null,x.onload),H&&document.head.appendChild(x)}}(),function(){$.r=function(O){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})}}(),function(){$.nmd=function(O){return O.paths=[],O.children||(O.children=[]),O}}(),function(){$.j=64692}(),function(){$.p=""}(),function(){if(!(typeof document>"u")){var O=function(T,C,x,H,k){var R=document.createElement("link");R.rel="stylesheet",R.type="text/css";var Z=function(j){if(R.onerror=R.onload=null,j.type==="load")H();else{var X=j&&j.type,D=j&&j.target&&j.target.href||C,E=new Error("Loading CSS chunk "+T+` failed.
(`+X+": "+D+")");E.name="ChunkLoadError",E.code="CSS_CHUNK_LOAD_FAILED",E.type=X,E.request=D,R.parentNode&&R.parentNode.removeChild(R),k(E)}};return R.onerror=R.onload=Z,R.href=C,x?x.parentNode.insertBefore(R,x.nextSibling):document.head.appendChild(R),R},M=function(T,C){for(var x=document.getElementsByTagName("link"),H=0;H<x.length;H++){var k=x[H],R=k.getAttribute("data-href")||k.getAttribute("href");if(k.rel==="stylesheet"&&(R===T||R===C))return k}for(var Z=document.getElementsByTagName("style"),H=0;H<Z.length;H++){var k=Z[H],R=k.getAttribute("data-href");if(R===T||R===C)return k}},h=function(T){return new Promise(function(C,x){var H=$.miniCssF(T),k=$.p+H;if(M(H,k))return C();O(T,k,null,C,x)})},I={64692:0};$.f.miniCss=function(T,C){var x={596:1,875:1,2739:1,2748:1,2810:1,4536:1,5034:1,5401:1,5436:1,5860:1,7782:1,8694:1,9245:1,9249:1,9505:1,10036:1,10854:1,12365:1,13621:1,13809:1,14324:1,14699:1,14829:1,14849:1,17082:1,20142:1,20823:1,20863:1,21472:1,21701:1,21917:1,22522:1,22735:1,23047:1,24334:1,24452:1,25004:1,27493:1,27921:1,28725:1,29686:1,30052:1,30434:1,30602:1,30847:1,31375:1,31579:1,32216:1,32748:1,33684:1,34643:1,34908:1,36192:1,36689:1,36968:1,38018:1,38204:1,38923:1,39087:1,39190:1,39810:1,41e3:1,41585:1,42460:1,42932:1,43293:1,44777:1,46381:1,46512:1,47447:1,48126:1,49603:1,51395:1,51481:1,52214:1,54793:1,56024:1,56348:1,56371:1,56737:1,58098:1,58214:1,59199:1,59353:1,60732:1,61474:1,62292:1,62509:1,63155:1,63707:1,64741:1,65186:1,66696:1,66794:1,66887:1,66990:1,67670:1,67727:1,67946:1,69188:1,69573:1,70118:1,70606:1,70933:1,72102:1,73119:1,73424:1,73763:1,73907:1,74149:1,75201:1,76662:1,77129:1,77147:1,78219:1,78844:1,79869:1,80383:1,80427:1,80886:1,81435:1,82368:1,82691:1,82807:1,84857:1,87162:1,88312:1,89432:1,89622:1,90099:1,90115:1,91785:1,92021:1,92484:1,92560:1,93135:1,93250:1,93736:1,93981:1,96605:1,97666:1,97671:1,98405:1,98799:1,99419:1,99438:1,99957:1};I[T]?C.push(I[T]):I[T]!==0&&x[T]&&C.push(I[T]=h(T).then(function(){I[T]=0},function(H){throw delete I[T],H}))}}}(),function(){var O={64692:0};$.f.j=function(I,T){var C=$.o(O,I)?O[I]:void 0;if(C!==0)if(C)T.push(C[2]);else if(/^(2748|39190|92484)$/.test(I))O[I]=0;else{var x=new Promise(function(Z,j){C=O[I]=[Z,j]});T.push(C[2]=x);var H=$.p+$.u(I),k=new Error,R=function(Z){if($.o(O,I)&&(C=O[I],C!==0&&(O[I]=void 0),C)){var j=Z&&(Z.type==="load"?"missing":Z.type),X=Z&&Z.target&&Z.target.src;k.message="Loading chunk "+I+` failed.
(`+j+": "+X+")",k.name="ChunkLoadError",k.type=j,k.request=X,C[1](k)}};$.l(H,R,"chunk-"+I,I)}},$.O.j=function(I){return O[I]===0};var M=function(I,T){var C=T[0],x=T[1],H=T[2],k,R,Z=0;if(C.some(function(X){return O[X]!==0})){for(k in x)$.o(x,k)&&($.m[k]=x[k]);if(H)var j=H($)}for(I&&I(T);Z<C.length;Z++)R=C[Z],$.o(O,R)&&O[R]&&O[R][0](),O[R]=0;return $.O(j)},h=self.webpackChunkdatavisual=self.webpackChunkdatavisual||[];h.forEach(M.bind(null,0)),h.push=M.bind(null,h.push.bind(h))}();var Mt=$.O(void 0,[94998,13064],function(){return $(382176)});Mt=$.O(Mt)})();
