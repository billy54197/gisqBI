"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[38656,16362],{999860:function(p,d,a){var u=a(808041),b=a(321300);d.Z={name:"font-select",props:["value"],data(){return{selectedValue:this.value,fontList:[]}},watch:{value(){this.selectedValue=this.value}},mounted(){this.initData()},methods:{initData(){let s={pageName:1,pageSize:9999999,fontFile:JSON.stringify({fontName:""})};u.N.getListByPage(s).then(n=>{if(n&&n.status==200){let g={label:"\u81EA\u5B9A\u4E49",options:[]};if(n.data.list){let r=[];for(let c=0;c<n.data.list.length;c++){let f=n.data.list[c];f.label=f.fontFamily,f.value=f.fontId,f.resId=f.fontId,r.push(f)}this.setFonts(r),g.options=r}this.fontList.push(g);let i={label:"\u7CFB\u7EDF\u5185\u7F6E",options:[]},o=this.$$global_editor.fontFamily;for(let r=0;r<o.length;r++){let c={};c.fontId="",c.fontFamily=o[r].label,c.fontName=o[r].value,c.createdByName="\u7CFB\u7EDF\u5185\u7F6E",c.label=o[r].label,c.value=o[r].value,i.options.push(c)}this.fontList.push(i)}})},change(){this.$emit("input",this.selectedValue),this.$emit("change",this.selectedValue)},setFonts(s){if(s&&s.length>0){s=s.filter((g,i)=>{let o=[];return s.forEach(r=>o.push(r.resId)),o.indexOf(g.resId)==i});let n="";s.forEach(g=>{let i=g.resId;if(i){let o=i.split("-")[1],r=`./resource/font/${i}.${o}`;n+=`@font-face {font-family: "${i}"; src: url('${r}') format('${o}')}`}}),b.appendCss("font-style",n)}}}}},353422:function(p,d,a){a.d(d,{s:function(){return u},x:function(){return b}});var u=function(){var n=this,g=n._self._c;return g("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9"},on:{change:n.change},model:{value:n.selectedValue,callback:function(i){n.selectedValue=i},expression:"selectedValue"}},n._l(n.fontList,function(i){return g("el-option-group",{key:i.label,attrs:{label:i.label}},n._l(i.options,function(o){return g("el-option",{key:o.value,style:{fontFamily:o.value},attrs:{label:o.label,value:o.value}})}),1)}),1)},b=[]},916362:function(p,d,a){a.r(d);var u=a(353422),b=a(278528),s=a(768141),n=(0,s.Z)(b.Z,u.s,u.x,!1,null,"449172f0",null);d.default=n.exports},487680:function(p,d,a){a.r(d),a.d(d,{default:function(){return W}});var u=function(){var e=this,t=e._self._c;return t("div",[t("el-collapse",[t("el-collapse-item",[t("template",{slot:"title"},[t("div",{staticClass:"my-title"},[e._v("\u5168\u5C40\u6837\u5F0F")])]),t("vue-lazy-component",{staticClass:"my-collapse-text"},[t("el-form",{ref:"form",attrs:{size:"mini",model:e.currentWidget.config,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",attrs:{"controls-position":"right"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.margin.left,callback:function(l){e.$set(e.currentWidget.config.text.margin,"left",l)},expression:"currentWidget.config.text.margin.left"}})],1),t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",attrs:{"controls-position":"right"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.margin.top,callback:function(l){e.$set(e.currentWidget.config.text.margin,"top",l)},expression:"currentWidget.config.text.margin.top"}})],1)],1)],1)],2),t("el-collapse-item",[t("template",{slot:"title"},[t("div",{staticClass:"my-title"},[e._v("\u6807\u9898\u6837\u5F0F")])]),t("vue-lazy-component",{staticClass:"my-collapse-text"},[t("el-form",{ref:"form",attrs:{size:"mini",model:e.currentWidget.config,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"\u5355\u884C\u6A21\u5F0F"}},[t("el-switch",{on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.singleLine,callback:function(l){e.$set(e.currentWidget.config.text.label,"singleLine",l)},expression:"currentWidget.config.text.label.singleLine"}})],1),e.currentWidget.config.text.label.singleLine?t("el-form-item",{attrs:{label:"\u8D85\u51FA\u7701\u7565"}},[t("el-switch",{on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.enabledEllipsis,callback:function(l){e.$set(e.currentWidget.config.text.label,"enabledEllipsis",l)},expression:"currentWidget.config.text.label.enabledEllipsis"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u5B57\u53F7"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{"controls-position":"right",step:.5,min:10,max:100},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.fontSize,callback:function(l){e.$set(e.currentWidget.config.text.label,"fontSize",l)},expression:"currentWidget.config.text.label.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53"}},[t("font-select",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.fontFamily,callback:function(l){e.$set(e.currentWidget.config.text.label,"fontFamily",l)},expression:"currentWidget.config.text.label.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u6C34\u5E73\u5BF9\u9F50"}},[t("el-select",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5BF9\u9F50\u65B9\u5F0F"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.horizontalAlignment,callback:function(l){e.$set(e.currentWidget.config.text.label,"horizontalAlignment",l)},expression:"currentWidget.config.text.label.horizontalAlignment"}},e._l(e.$$global_editor.horizontalAlignment2,function(l){return t("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})}),1)],1),e.currentWidget.config.text.label.singleLine?t("el-form-item",{attrs:{label:"\u5782\u76F4\u5BF9\u9F50"}},[t("el-select",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5BF9\u9F50\u65B9\u5F0F"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.verticalAlignment,callback:function(l){e.$set(e.currentWidget.config.text.label,"verticalAlignment",l)},expression:"currentWidget.config.text.label.verticalAlignment"}},e._l(e.$$global_editor.verticalAlignment,function(l){return t("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})}),1)],1):e._e(),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{placeholder:"\u9009\u62E9\u989C\u8272"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.color,callback:function(l){e.$set(e.currentWidget.config.text.label,"color",l)},expression:"currentWidget.config.text.label.color"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:e.$$global_editor.predefineColors},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.color,callback:function(l){e.$set(e.currentWidget.config.text.label,"color",l)},expression:"currentWidget.config.text.label.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("el-checkbox-button",{attrs:{"true-label":"bolder","false-label":"normal"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.fontWeight,callback:function(l){e.$set(e.currentWidget.config.text.label,"fontWeight",l)},expression:"currentWidget.config.text.label.fontWeight"}},[t("i",{staticClass:"iconfont bi_bold"})]),t("el-checkbox-button",{attrs:{"true-label":"italic","false-label":"normal"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.fontStyle,callback:function(l){e.$set(e.currentWidget.config.text.label,"fontStyle",l)},expression:"currentWidget.config.text.label.fontStyle"}},[t("i",{staticClass:"iconfont bi_italic"})]),t("el-checkbox-button",{attrs:{"true-label":"underline","false-label":"none"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.textDecoration,callback:function(l){e.$set(e.currentWidget.config.text.label,"textDecoration",l)},expression:"currentWidget.config.text.label.textDecoration"}},[t("i",{staticClass:"iconfont bi_underline"})])],1),t("font-style-extend",{attrs:{"font-style-extend":e.currentWidget.config.text.label}}),!e.currentWidget.config.text.label.enabledEllipsis||!e.currentWidget.config.text.label.singleLine?t("el-form-item",{attrs:{label:"\u6EDA\u52A8\u6761"}},[t("el-switch",{on:{change:e.getConfigData},model:{value:e.currentWidget.config.text.label.overflow,callback:function(l){e.$set(e.currentWidget.config.text.label,"overflow",l)},expression:"currentWidget.config.text.label.overflow"}})],1):e._e()],1)],1)],2),t("popover",{attrs:{"is-title":!0,title:"\u63D0\u793A\u6846",popover:e.currentWidget.config.popover,widgets:e.widgets,"current-widget":e.currentWidget,"widget-name":"title-general"},on:{getConfigData:e.getConfigData}}),t("el-collapse-item",[t("template",{slot:"title"},[t("div",{staticClass:"my-title"},[e._v("\u544A\u8B66")])]),t("vue-lazy-component",{staticClass:"my-collapse-text"},[t("el-form",{ref:"form",attrs:{size:"mini",model:e.currentWidget.config.alarm,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"\u662F\u5426\u542F\u7528"}},[t("el-switch",{on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.enabled,callback:function(l){e.$set(e.currentWidget.config.alarm,"enabled",l)},expression:"currentWidget.config.alarm.enabled"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.enabled==!0,expression:"currentWidget.config.alarm.enabled == true"}]},[t("el-form-item",{attrs:{label:"\u544A\u8B66\u65B9\u5F0F"}},[t("el-radio-group",{on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.mode,callback:function(l){e.$set(e.currentWidget.config.alarm,"mode",l)},expression:"currentWidget.config.alarm.mode"}},[t("el-radio",{attrs:{label:"style"}},[e._v("\u6837\u5F0F\u6539\u53D8")]),t("el-radio",{attrs:{label:"showHide"}},[e._v("\u663E\u9690\u5207\u6362")])],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.mode=="style",expression:"currentWidget.config.alarm.mode == 'style'"}],attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{placeholder:"\u9009\u62E9\u80CC\u666F\u989C\u8272"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.backgroundColor,callback:function(l){e.$set(e.currentWidget.config.alarm,"backgroundColor",l)},expression:"currentWidget.config.alarm.backgroundColor"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:e.$$global_editor.predefineColors},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.backgroundColor,callback:function(l){e.$set(e.currentWidget.config.alarm,"backgroundColor",l)},expression:"currentWidget.config.alarm.backgroundColor"}})],1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.mode=="style",expression:"currentWidget.config.alarm.mode == 'style'"}],attrs:{label:"\u80CC\u666F\u56FE\u7247"}},[t("select-img",{attrs:{image:e.currentWidget.config.alarm.backgroundImage},on:{change:e.getConfigData,openSelectImage:e.openSelectImage,clearSelectImage:e.clearSelectImage}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.mode=="style",expression:"currentWidget.config.alarm.mode == 'style'"}],attrs:{label:"\u586B\u5145\u6A21\u5F0F"}},[t("el-select",{staticStyle:{width:"195px"},attrs:{placeholder:"\u8BF7\u9009\u62E9\u6A21\u5F0F"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.backgroundSize,callback:function(l){e.$set(e.currentWidget.config.alarm,"backgroundSize",l)},expression:"currentWidget.config.alarm.backgroundSize"}},e._l(e.$$global_editor.backgroundSize,function(l){return t("el-option",{key:l.value,attrs:{label:l.label,value:l.value}})}),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.mode=="style",expression:"currentWidget.config.alarm.mode == 'style'"}],attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{placeholder:"\u9009\u62E9\u989C\u8272"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.color,callback:function(l){e.$set(e.currentWidget.config.alarm,"color",l)},expression:"currentWidget.config.alarm.color"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:e.$$global_editor.predefineColors},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.color,callback:function(l){e.$set(e.currentWidget.config.alarm,"color",l)},expression:"currentWidget.config.alarm.color"}})],1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.mode=="style",expression:"currentWidget.config.alarm.mode == 'style'"}],attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("el-checkbox-button",{attrs:{"true-label":"bolder","false-label":"normal"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.fontWeight,callback:function(l){e.$set(e.currentWidget.config.alarm,"fontWeight",l)},expression:"currentWidget.config.alarm.fontWeight"}},[t("i",{staticClass:"iconfont bi_bold"})]),t("el-checkbox-button",{attrs:{"true-label":"italic","false-label":"normal"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.fontStyle,callback:function(l){e.$set(e.currentWidget.config.alarm,"fontStyle",l)},expression:"currentWidget.config.alarm.fontStyle"}},[t("i",{staticClass:"iconfont bi_italic"})]),t("el-checkbox-button",{attrs:{"true-label":"underline","false-label":"none"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.textDecoration,callback:function(l){e.$set(e.currentWidget.config.alarm,"textDecoration",l)},expression:"currentWidget.config.alarm.textDecoration"}},[t("i",{staticClass:"iconfont bi_underline"})])],1),t("el-form-item",{attrs:{label:"\u544A\u8B66\u5185\u5BB9"}},[t("el-input",{staticStyle:{width:"98%"},attrs:{rows:5,placeholder:"\u544A\u8B66\u5185\u5BB9",size:"mini",type:"textarea"},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.content,callback:function(l){e.$set(e.currentWidget.config.alarm,"content",l)},expression:"currentWidget.config.alarm.content"}})],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u811A\u672C"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-switch",{on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.contentScript.enabled,callback:function(l){e.$set(e.currentWidget.config.alarm.contentScript,"enabled",l)},expression:"currentWidget.config.alarm.contentScript.enabled"}})],1),t("el-col",{attrs:{span:5}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u7F16\u8F91\u8981\u6267\u884C\u7684\u811A\u672C\u5185\u5BB9",effect:"dark",placement:"top"}},[t("common-custom-script",{directives:[{name:"show",rawName:"v-show",value:e.currentWidget.config.alarm.contentScript.enabled,expression:"currentWidget.config.alarm.contentScript.enabled"}],attrs:{options:e.options.scriptContent,"current-widget":e.currentWidget},on:{change:e.getConfigData},model:{value:e.currentWidget.config.alarm.contentScript,callback:function(l){e.$set(e.currentWidget.config.alarm,"contentScript",l)},expression:"currentWidget.config.alarm.contentScript"}})],1)],1)],1)],1)],1)],1)],1)],2)],1),t("el-dialog",{staticClass:"my-image-dialog",staticStyle:{padding:"0px"},attrs:{title:"\u9009\u62E9\u56FE\u7247",top:"10px","append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,width:e.dialogWidth+"px"},on:{"update:visible":function(l){e.dialogVisible=l}}},[t("div",[t("image-manage",{ref:"imageMange",attrs:{"is-dialog":!0,type:["image"]}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.cancelEidt}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getImage}},[e._v("\u786E \u5B9A")])],1)])],1)},b=[],s=a(723400),n=a(331394),g=a(104425),i=a(916362),o=a(582333),r=a(721829),c=a(555616),f=a(406627),_={name:"TitleGeneralStyle",components:{Popover:g.Z,FontStyleExtend:n.Z,FontSelect:i.default,ImageManage:o.default,selectImg:r.Z,CommonCustomScript:f.default},mixins:[s.j],props:["currentWidget","widgets"],data(){return{dialogVisible:!1,dialogWidth:420,options:{scriptContent:{attribute_script_content:"scriptContent",title:"\u544A\u8B66\u5185\u5BB9\u811A\u672C",script_examples:`/*\u5F53\u524D\u65B9\u6CD5\u4E2D\u53EF\u4F7F\u7528\u7684\u53C2\u6570
info  \u5F53\u524D\u7EC4\u4EF6\u4FE1\u606F
info.config.alarm  \u544A\u8B66\u914D\u7F6E\u4FE1\u606F
info.dataset[info.dataset.type]  \u5F53\u524D\u7EC4\u4EF6\u7684\u6570\u636E\u4FE1\u606F
*/
let alarmInfo = "\u811A\u672C\u544A\u8B66\u5185\u5BB9";
return alarmInfo;`}}}},mounted(){this.dialogWidth=window.innerWidth-170},methods:{openSelectImage(){let m=this;this.dialogVisible=!0,setTimeout(function(){m.$refs.imageMange.getImageList(null),m.$refs.imageMange.setSelectImage(m.currentWidget.config.alarm.backgroundImage)},500)},clearSelectImage(){this.currentWidget.config.alarm.backgroundImage="",this.getConfigData()},getImage(){let m=this.$refs.imageMange.getSelectImage();if(m!=null){if(this.$$global.fileType.image.indexOf(m.imageFileType)==-1){c.Message.warning("\u9009\u62E9\u7684\u4E0D\u662F\u56FE\u7247");return}this.dialogVisible=!1,this.currentWidget.config.alarm.backgroundImage=m.fileUrlPath,this.getConfigData()}else c.Message.warning("\u672A\u9009\u62E9\u4EFB\u4F55\u56FE\u7247")},cancelEidt(){this.dialogVisible=!1}}},h=_,v=a(768141),x=(0,v.Z)(h,u,b,!1,null,"f8274c78",null),W=x.exports},278528:function(p,d,a){var u=a(999860);d.Z=u.Z}}]);
