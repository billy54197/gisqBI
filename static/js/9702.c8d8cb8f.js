"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[9702],{83577:function(I,y,s){s.d(y,{i:function(){return v}});var b=s(48836),m=s(27966);const v={created(){},computed:{...(0,b.Se)(["getCurrentWidget","getKeydown","getSelectMultiple","getMultipleWidget","getWidgets"])},methods:{...(0,b.nv)(["setCurrentWidget","setCurrentWidgetXYWHR","setActiveScreen","removeMultipleWidget","addMultipleWidget","setSelectMultiple","clearMultipleWidget"]),reLoadInfo(t){this.widgetInfo.id!=t.id&&this.$refs["comp_"+t.id]&&setTimeout(()=>{this.$refs["comp_"+t.id][0].reLoadInfo(t),this.$refs["comp_frame_"+t.id][0].initSvg()},500),this.loadInfo(t)},orgWidget(t,i){let a=[];return this.$$lib__.each(t,n=>{for(let f=0;f<this.widgetArr.length;f++){let c=this.widgetArr[f];c.parentId==this.widgetInfo.id&&c.id==n.id&&(!i||i(c))&&a.push(JSON.parse(JSON.stringify(c)))}}),a},setTitleText(t,i){i?this.$$lib__.each(i,a=>{this.$$lib__.each(this.orgWidget(a.widgets,n=>!n.title.hide&&n.title.text),n=>{n.attr.widgetW||(n.attr.widgetW=n.attr.w),this.$refs["title_"+n.id]&&this.$refs["title_"+n.id][0]&&(this.$refs["title_"+n.id][0].innerHTML=this.initTextPosition(n)),n.title.position||(n.title.position="top")})}):this.$$lib__.each(this.orgWidget(t,a=>!a.title.hide&&a.title.text),a=>{this.$refs["title_"+a.id]&&this.$refs["title_"+a.id][0]&&(this.$refs["title_"+a.id][0].innerHTML=this.initTextPosition(a)),a.title.position||(a.title.position="top")})},initTextPosition(t){return t.title.text===void 0||!t.title.text?"":t.title.text&&(t.title.position==="left"||t.title.position==="right")?t.title.text.split("").join("<br />"):t.title.text},onActive(t){return this.getSelectMultiple?this.getMultipleWidget[t.id]!=null:t.id===this.getCurrentWidget.id},onClicked(t){if(t&&t.currentTarget){let i=t.currentTarget.id;if(i&&i.indexOf(this.prefix.widget)>-1){let a=i.substr(this.prefix.widget.length);if(a!=this.getCurrentWidget.id){this.setActiveScreen(!1),this.setCurrentWidget(a);let n=this.$$lib__.keys(this.getMultipleWidget);this.getKeydown.ctrlKey?(this.setSelectMultiple(!0),this.getMultipleWidget[a]?this.removeMultipleWidget(a):this.addMultipleWidget(a)):this.getMultipleWidget[a]==null?(this.setSelectMultiple(!1),this.clearMultipleWidget(),this.addMultipleWidget(a)):n&&n.length==1&&(this.setSelectMultiple(!1),this.setCurrentWidget(n[0]),this.clearMultipleWidget(),this.addMultipleWidget(n[0]))}m.Z.$emit("autoScrollIntoViewWidgetTree",a)}}},onMouseEnter(t){this.onWidgetLayerMouseOver("push",t)},onMouseLeave(t){this.onWidgetLayerMouseOver("pop",t)},onWidgetLayerMouseOver(t,i){if(i&&i.currentTarget){let a=i.currentTarget.id;if(a&&a.indexOf(this.prefix.widget)>-1){let n=a.substr(this.prefix.widget.length);n&&n!=this.getCurrentWidget.id&&this.getMultipleWidget[n]==null&&t=="push"&&this.widget_layer_mouse_over.push(n),t=="pop"&&(this.widget_layer_mouse_over=this.$$lib__.without(this.widget_layer_mouse_over,n))}}},onDragstop(t,i){let a=this.getCurrentWidget.attr;a&&(a.x!=t||a.y!=i)&&this.setCurrentWidgetXYWHR({x:t,y:i})},dragging(t,i,a,n){if(this.getSelectMultiple){let f=this.getCurrentWidget.attr;f&&(f.x!=t||f.y!=i)&&this.setCurrentWidgetXYWHR({x:t,y:i})}},onResizstop(t,i,a,n){this.setCurrentWidgetXYWHR({x:t,y:i,w:a,h:n})},onRotatestop(t){this.setCurrentWidgetXYWHR({r:t})},getdraggableHW(t){let i={h:t.attr.h,w:t.attr.w?t.attr.widgetW:t.attr.w};return t.border.hide!=!0&&(t.border.type==!1?(t.border.widthT&&t.border.styleT&&t.border.styleT!=="none"&&(i.h=i.h+t.border.widthT),t.border.widthB&&t.border.styleB&&t.border.styleB!=="none"&&(i.h=i.h+t.border.widthB),t.border.widthR&&t.border.styleR&&t.border.styleR!=="none"&&(i.w=i.w+t.border.widthR),t.border.widthL&&t.border.styleL&&t.border.styleL!=="none"&&(i.w=i.w+t.border.widthL)):t.border.type==!0&&(t.border.breadthT&&t.border.borderStyle&&t.border.borderStyle!=="none"&&(i.h=i.h+t.border.breadthT),t.border.breadthB&&t.border.borderStyle&&t.border.borderStyle!=="none"&&(i.h=i.h+t.border.breadthB),t.border.breadthR&&t.border.borderStyle&&t.border.borderStyle!=="none"&&(i.w=i.w+t.border.breadthR),t.border.breadthL&&t.border.borderStyle&&t.border.borderStyle!=="none"&&(i.w=i.w+t.border.breadthL))),i},getDraggableStyle(t){let i={};return!t.isContainer&&!t.attr.pointerEvents&&(i.pointerEvents="none",t.id===this.getCurrentWidget.id&&(i.backgroundColor="rgba(236, 240, 241, 1)",i.filter="Alpha(Opacity=50)")),typeof t.attr.opacity=="number"&&(i.opacity=t.attr.opacity),t.attr.backgroundColor&&(i.backgroundColor=t.attr.backgroundColor),t.attr.backgroundImage&&(i.backgroundImage=this.getImageUrl(t.attr.backgroundImage)),t.attr.backgroundSize&&(i.backgroundSize=t.attr.backgroundSize),i.overflow=t.border.overflowShow?"hidden":"visible",t.border.hide!=!0&&((t.border.hShadow||t.border.vShadow)&&(i.boxShadow=(t.border.hShadow||0)+"px "+(t.border.vShadow||0)+"px "+(t.border.blur||0)+"px "+t.border.blurColor||"rgba(0,0,0,0)"),t.border.type==!1?(i.borderTopWidth=t.border.widthT+"px",i.borderRightWidth=t.border.widthR+"px",i.borderBottomWidth=t.border.widthB+"px",i.borderLeftWidth=t.border.widthL+"px",i.borderTopStyle=t.border.styleT,i.borderRightStyle=t.border.styleR,i.borderBottomStyle=t.border.styleB,i.borderLeftStyle=t.border.styleL,i.borderTopColor=t.border.colorT,i.borderRightColor=t.border.colorR,i.borderBottomColor=t.border.colorB,i.borderLeftColor=t.border.colorL,i.borderTopLeftRadius=t.border.radiusTL+"px",i.borderTopRightRadius=t.border.radiusTR+"px",i.borderBottomLeftRadius=t.border.radiusBL+"px",i.borderBottomRightRadius=t.border.radiusBR+"px"):t.border.type==!0&&(i.borderStyle=t.border.borderStyle,i.borderTopWidth=t.border.breadthT+"px",i.borderRightWidth=t.border.breadthR+"px",i.borderBottomWidth=t.border.breadthB+"px",i.borderLeftWidth=t.border.breadthL+"px",i.borderImageSource=this.getImageUrl(t.border.borderImage),i.borderImageSlice=t.border.cutT+" "+t.border.cutR+" "+t.border.cutB+" "+t.border.cutL,i.borderImageRepeat=t.border.repeat)),i.float="left !important",i}}}},59738:function(I,y,s){s.d(y,{OW:function(){return m},m3:function(){return a},nm:function(){return v},vP:function(){return t},xC:function(){return i}});var b=s(53258);function m(n,f,c){let h=n;const u=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(p=>(0,b.mf)(h[p]));if(!(0,b.mf)(h[u]))return!1;do{if(h[u](f))return!0;if(h===c)return!1;h=h.parentNode}while(h);return!1}function v(n){const f=window.getComputedStyle(n);return[parseFloat(f.getPropertyValue("width"),10),parseFloat(f.getPropertyValue("height"),10)]}function t(n,f,c){n&&(n.attachEvent?n.attachEvent("on"+f,c):n.addEventListener?n.addEventListener(f,c,!0):n["on"+f]=c)}function i(n,f,c){n&&(n.detachEvent?n.detachEvent("on"+f,c):n.removeEventListener?n.removeEventListener(f,c,!0):n["on"+f]=null)}function a(n,f,c,h){var u=0,p=setInterval(()=>{u<c?(u++,n()):(clearInterval(p),h&&h())},f);return p}},49490:function(I,y,s){s.r(y),s.d(y,{default:function(){return R}});var b=function(){var e=this,r=e._self._c;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],staticClass:"my-div",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}},[r("hide-button",{attrs:{attr:e.widgetInfo.attr}}),r("tabs",{ref:"myTabs",staticClass:"my-tabs",attrs:{color:e.widgetInfo.config.base.color,background:e.widgetInfo.config.base.background,animated:e.widgetInfo.config.base.animated,duration:e.widgetInfo.config.base.duration,"line-width":e.widgetInfo.config.base.lineWidth+"px","line-height":e.widgetInfo.config.base.lineHeight+"px",border:e.widgetInfo.config.base.border,ellipse:e.widgetInfo.config.base.ellipsis,"lazy-render":!1,swipeable:e.widgetInfo.config.base.swipeable,"swipe-threshold":e.widgetInfo.config.base.swipeThreshold,"title-active-color":e.widgetInfo.config.base.titleActiveColor,"title-inactive-color":e.widgetInfo.config.base.titleInactiveColor},on:{click:e.handleClick,change:e.tabsChange},model:{value:e.active,callback:function(d){e.active=d},expression:"active"}},e._l(e.widgetInfo.config.tabPanes,function(d,g){return r("tab",{key:g,staticClass:"my-tabs-line",attrs:{title:d.label,name:d.id,disabled:d.disabled}},[r("template",{slot:"title"},[r("badge",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.config.tabsTitle.badge.show,expression:"widgetInfo.config.tabsTitle.badge.show"}],staticClass:"my-badge",attrs:{content:e.getBadge(g),dot:e.widgetInfo.config.tabsTitle.badge.dot,max:e.widgetInfo.config.tabsTitle.badge.max,color:d.id===e.active?e.widgetInfo.config.tabsTitle.badge.activeBackgroundColor:e.widgetInfo.config.tabsTitle.badge.inActiveBackgroundColor}},[r("div",{style:{display:"flex",height:"100%",flexDirection:e.widgetInfo.config.tabsTitle.flex,justifyContent:e.widgetInfo.config.tabsTitle.justifyContent,alignItems:"center"}},[r("i",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.config.tabsTitle.showIcon,expression:"widgetInfo.config.tabsTitle.showIcon"}],class:`${d.icon} tabs-icon`,style:{fontSize:e.widgetInfo.config.tabsTitle.iconFontStyle.fontSize+"px",fontWeight:e.widgetInfo.config.tabsTitle.iconFontStyle.fontWeight,fontStyle:e.widgetInfo.config.tabsTitle.iconFontStyle.fontStyle,textDecoration:e.widgetInfo.config.tabsTitle.iconFontStyle.textDecoration}}),r("span",{class:e.widgetInfo.config.base.ellipsis?"text-overflow":"",style:{fontSize:e.widgetInfo.config.tabsTitle.fontStyle.fontSize+"px",fontWeight:e.widgetInfo.config.tabsTitle.fontStyle.fontWeight,fontStyle:e.widgetInfo.config.tabsTitle.fontStyle.fontStyle,fontFamily:e.widgetInfo.config.tabsTitle.fontStyle.fontFamily,textDecoration:e.widgetInfo.config.tabsTitle.fontStyle.textDecoration}},[e._v(e._s(d.label))])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.widgetInfo.config.tabsTitle.badge.show,expression:"!widgetInfo.config.tabsTitle.badge.show"}],style:{display:"flex",height:"100%",flexDirection:e.widgetInfo.config.tabsTitle.flex,justifyContent:e.widgetInfo.config.tabsTitle.justifyContent,alignItems:"center"}},[r("i",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.config.tabsTitle.showIcon,expression:"widgetInfo.config.tabsTitle.showIcon"}],class:`${d.icon} tabs-icon`,style:{fontSize:e.widgetInfo.config.tabsTitle.iconFontStyle.fontSize+"px",fontWeight:e.widgetInfo.config.tabsTitle.iconFontStyle.fontWeight,fontStyle:e.widgetInfo.config.tabsTitle.iconFontStyle.fontStyle,textDecoration:e.widgetInfo.config.tabsTitle.iconFontStyle.textDecoration}}),r("span",{class:e.widgetInfo.config.base.ellipsis?"text-overflow":"",style:{padding:"6px 6px",fontSize:e.widgetInfo.config.tabsTitle.fontStyle.fontSize+"px",fontWeight:e.widgetInfo.config.tabsTitle.fontStyle.fontWeight,fontStyle:e.widgetInfo.config.tabsTitle.fontStyle.fontStyle,fontFamily:e.widgetInfo.config.tabsTitle.fontStyle.fontFamily,textDecoration:e.widgetInfo.config.tabsTitle.fontStyle.textDecoration}},[e._v(e._s(d.label))])])],1),r("div",{staticClass:"my-screen",style:{height:e.widgetInfo.attr.h-e.widgetInfo.config.base.height+"px"}},[d.scroll.show?r("happy-scroll",{attrs:{color:d.scroll.color,size:d.scroll.width,resize:""}},[r("div",{style:{height:e.scrollHeight(d.widgets)+"px",width:e.widgetInfo.attr.w+"px"}},e._l(e.orgWidget(d.widgets),function(o){return r("draggable",{directives:[{name:"show",rawName:"v-show",value:o.attr.hideEditor!==!0,expression:"widget.attr.hideEditor !== true"}],key:e.prefix.widget+o.id,ref:e.prefix.widget+o.id,refInFor:!0,attrs:{rotatable:!0,resizable:!o.attr.locked,draggable:!o.attr.locked,snap:!0,id:e.prefix.widget+o.id,x:o.attr.x,y:o.attr.y,z:o.attr.z,r:o.attr.deg,h:e.getdraggableHW(o).h,w:e.getdraggableHW(o).w,minw:o.attr.minw,minh:o.attr.minh,deselectCancel:".unboardArea",active:e.onActive(o)},on:{onClicked:e.onClicked,dragstop:e.onDragstop,resizestop:e.onResizstop,rotatestop:e.onRotatestop}},[r("div",{directives:[{name:"show",rawName:"v-show",value:o.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:e.getDraggableStyle(o)},[r("div",{staticStyle:{overflow:"hidden",width:"100%"},style:e.getTitleStyle(o),on:{click:function(M){return e.openLink(o)}}},[r("div",{style:{marginLeft:o.title.label.left+"px",marginTop:o.title.label.top+"px"}},[r("span",{style:e.getTitleSpanStyle(o)},[e._v(e._s(o.title.text)+" ")])])]),r("draggable-component-container",{ref:"comp_"+o.id,refInFor:!0,style:e.getInfoStyle(o),attrs:{widgetData:o,currentWidget:e.getCurrentWidget}})],1)])}),1)]):e._l(e.orgWidget(d.widgets),function(o){return r("draggable",{directives:[{name:"show",rawName:"v-show",value:o.attr.hideEditor!==!0,expression:"widget.attr.hideEditor !== true"}],key:e.prefix.widget+o.id,ref:e.prefix.widget+o.id,refInFor:!0,attrs:{rotatable:!0,resizable:!o.attr.locked,draggable:!o.attr.locked,snap:!0,id:e.prefix.widget+o.id,x:o.attr.x,y:o.attr.y,z:o.attr.z,r:o.attr.deg,h:e.getdraggableHW(o).h,w:e.getdraggableHW(o).w,minw:o.attr.minw,minh:o.attr.minh,deselectCancel:".unboardArea",active:e.onActive(o)},on:{onClicked:e.onClicked,dragstop:e.onDragstop,resizestop:e.onResizstop,rotatestop:e.onRotatestop}},[r("div",{directives:[{name:"show",rawName:"v-show",value:o.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:e.getDraggableStyle(o)},[r("div",{staticStyle:{overflow:"hidden",width:"100%"},style:e.getTitleStyle(o),on:{click:function(M){return e.openLink(o)}}},[r("div",{style:{marginLeft:o.title.label.left+"px",marginTop:o.title.label.top+"px"}},[r("span",{style:e.getTitleSpanStyle(o)},[e._v(e._s(o.title.text)+" ")])])]),r("draggable-component-container",{ref:"comp_"+o.id,refInFor:!0,style:e.getInfoStyle(o),attrs:{widgetData:o,currentWidget:e.getCurrentWidget}})],1)])})],2)],2)}),1)],1)},m=[],v=s(48275),t=s(21382),i=s(54602),a=s(2505),n=s(97238),f=s(16706),c=s(44513),h=s(46207),u=s(80512),p=s(23400),S=s(83577),x=s(70894),T=s(67157);const W={mixins:[T.c],data(){return{config_extend:{config:{tabsTitle:{fontStyle:{fontFamily:"alibabaPuHuiTiRegular"}}}},filter_config:{base:{color:"",background:""},tabsTitle:{badge:{activeBackgroundColor:"rgb(224,25,25,1)",inActiveBackgroundColor:"rgb(229,27,27,1)"},iconFontStyle:{fontFamily:"",color:"rgba(124,122,122,1)"}},tabPanes:[{scroll:{color:"rgba(100,103,105,1)"}},{scroll:{color:"rgba(128,130,133,1)"}}]}}},methods:{filterPredefineColoursSchemeConfig(l,e){this.getNewConfigWithArrary(l,e,this.filter_config)}}};var C=s(77863),w=s(48836),B=s(56279),L={name:"mobile-container-tabs",props:["widgetInfo","widgetArr","currentWidget"],components:{DraggableComponentContainer:u.Z,draggable:h.Z,HideButton:c.Z,Tab:f.Z,Tabs:a.Z,HappyScroll:C.HappyScroll,Badge:t.Z},mixins:[x.u,W,p.j,S.i,B.P],data(){return{selectWidget:{},prefix:{widget:"widget_"},active:null}},computed:{...(0,w.Se)(["getWidgetAllArr"])},mounted(){this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.config.base.lineWidth":{immediate:!0,handler:function(){this.setLineBarStyle()}},"widgetInfo.config.tabsTitle.badge.fontSize":{immediate:!0,handler:function(){this.setBadgeDotSize()}},"widgetInfo.config.tabsTitle.badge.dot":{handler:function(l){if(l){this.setBadgeDotSize();return}this.removeBadgeDotSize()}},"widgetInfo.config.base.lineBg":{immediate:!0,handler:function(){this.setLineBarStyle()}},"widgetInfo.config.base.color":{immediate:!0,handler:function(){this.setTitleActiveBg(),this.$nextTick(()=>{this.setLineBarStyle()})}},"widgetInfo.config.base.height":{immediate:!0,handler:function(){this.setTitleHeight()}},"widgetInfo.config.base.background":{handler:function(){this.setTabsBg(),this.setTitleActiveBg(),this.$nextTick(()=>{this.setLineBarStyle()})}},"widgetInfo.config.base.swipeThreshold":{immediate:!0,handler:function(){this.setTabsWidth()}},"widgetInfo.config.base.lineHeight":{immediate:!0,handler:function(){this.setLineBarStyle()}},"widgetInfo.config.base.initActive":{immediate:!0,handler(l){this.active=l}}},methods:{scrollHeight(l){let e=[];return this.orgWidget(l).forEach(r=>{e.push(r.attr.h+r.attr.y)}),e.sort((r,d)=>d-r),e[0]},setTitleHeight(){this.$nextTick(()=>{let l=document.querySelectorAll(".my-tabs .van-tabs__wrap");Array.from(l).forEach(r=>{r.style.height=this.widgetInfo.config.base.height+"px"})})},setBadgeDotSize(){this.$nextTick(()=>{let l=document.querySelectorAll(".my-tabs .van-badge--dot");Array.from(l).forEach(r=>{r.style.width=this.widgetInfo.config.tabsTitle.badge.fontSize+"px",r.style.height=this.widgetInfo.config.tabsTitle.badge.fontSize+"px",r.style.padding=0})})},removeBadgeDotSize(){this.$nextTick(()=>{let l=document.querySelectorAll(".my-tabs .van-badge");Array.from(l).forEach(r=>{r.style.width="auto",r.style.height="auto",r.style.padding="0 3px"})})},setTabsWidth(){this.$nextTick(()=>{let l=this.$el.querySelectorAll(".my-tabs .van-tab");Array.from(l).forEach(r=>{r.style.width=`${100/this.widgetInfo.config.base.swipeThreshold}%`})})},setTabsBg(){this.$nextTick(()=>{let l=this.$el.querySelectorAll(".my-tabs .van-tab");Array.from(l).forEach(r=>{r.style.background=this.widgetInfo.config.base.background})})},setLineBarStyle(){this.$nextTick(()=>{let l=this.$el.querySelectorAll(".my-tabs .van-tabs__line");Array.from(l).forEach(r=>{r.style.width=this.widgetInfo.config.base.lineWidth+"px",r.style.height=this.widgetInfo.config.base.lineHeight+"px",r.style.background=this.widgetInfo.config.base.lineBg})})},setTitleActiveBg(){this.$nextTick(()=>{let l=this.$el.querySelectorAll(".my-tabs .van-tab--active"),e=this.$el.querySelectorAll(".my-tabs .van-tab"),r=Array.from(l);Array.from(e).forEach(g=>{g.style.background=this.widgetInfo.config.base.background}),r.forEach(g=>{g.style.background=this.widgetInfo.config.base.color})})},tabsChange(l){this.active=l,this.setTitleActiveBg(),this.setLineBarStyle()},getBadge(l){if(!this.widgetInfo.dataset[this.widgetInfo.dataset.type].source||!this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[0])return;let e=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode[`page${l+1}`],r=this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions.findIndex(d=>d===e);if(r>-1){let d=this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[0][r],g="";if(isNaN(Number(d)))g=d;else if(Number(d)>0)g=d;else return;return g}},handleClick(){},loadInfo(){this.lifecycleAfterLoad()}}},A=L,$=s(68141),k=(0,$.Z)(A,b,m,!1,null,"7bab5994",null),R=k.exports}}]);
