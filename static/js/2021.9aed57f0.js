"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[2021],{56279:function(I,c,n){n.d(c,{P:function(){return f}});var h=n(86892),s=n(49500);const f={mixins:[h.D],created(){},methods:{lifecycleBeforeChartsLoad(d){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&s.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),s.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let g=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[d]);if(g)return g}return d},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&s.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),s.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},44513:function(I,c,n){n.d(c,{Z:function(){return y}});var h=function(){var o=this,r=o._self._c;return o.attr.buttonHide?r("div",{style:{position:"absolute",right:o.attr.buttonHideRight+"px",top:o.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(b){return o.onHide()}}},[o.openTooltip?r("el-tooltip",{attrs:{"open-delay":1e3,content:o.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[r("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):r("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):o._e()},s=[],f=n(52246),d={props:["attr"],name:"hide-button",data(){return{isPc:f.b}},computed:{openTooltip:function(){let u=!1,o=this.attr.buttonHideTooltipContent;return f.b&&o&&o!=null&&o.trim()!=""&&(u=!0),u}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},p=d,g=n(68141),m=(0,g.Z)(p,h,s,!1,null,"bf399b9a",null),y=m.exports},92021:function(I,c,n){n.r(c),n.d(c,{default:function(){return T}});var h=function(){var i=this,e=i._self._c;return e("div",{ref:"comButton",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px",overflow:"hidden"}},[e("hide-button",{attrs:{attr:i.widgetInfo.attr}}),e("div",{staticClass:"btn-block",style:i.getButtonStyle(),on:{click:i.onClick}},[i.widgetInfo.config.buttonStyle.iconType!==""?[i.widgetInfo.config.buttonStyle.iconType=="icon"?e("span",{class:i.widgetInfo.config.buttonStyle.iconClass,style:{color:i.widgetInfo.config.buttonStyle.iconColor,fontSize:i.widgetInfo.config.buttonStyle.iconFontSize+"px"}}):e("span",[e("img",{style:{width:i.widgetInfo.config.buttonStyle.urlW+"px",verticalAlign:"baseline",height:i.widgetInfo.config.buttonStyle.urlH+"px"},attrs:{src:i.getUrl(i.widgetInfo.config.buttonStyle.url)}})])]:i._e(),i._v(" "+i._s(i.textInfo)+" ")],2)],1)},s=[],f=n(44513),d=n(27966),p=n(26711),g=n(45061),m=n(56279),y=n(55616),u=n(48836),o=n(75770),r=n(21300),b=n(67157);const v={mixins:[b.c],data(){return{config_extend:{},filter_config:{buttonStyle:{borderColor:"#4C84FF",color:"#ffffff",backgroundColor:"#4C84FF",fontFamily:"alibabaPuHuiTiRegular",iconColor:"rgba(255, 255, 255, 1)"}}}},methods:{filterPredefineColoursSchemeConfig(t,i){this.getNewConfigWithArrary(t,i,this.filter_config)}}};var w=n(49500),S={props:["widgetInfo"],name:"com-button",components:{HideButton:f.Z},mixins:[p.H,g.u,m.P,v],computed:{...(0,u.Se)(["getCanvasSettingInfo","getCanvasSetting"]),lockX(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedW},lockY(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedH}},data(){return{textInfo:"",content:"",widgetStatus:"leave",popWidgetStatus:"leave",actionType:JSON.parse(JSON.stringify(o.Z)),permissionDisabled:!1}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(t){t.dataset[t.dataset.type]&&t.dataset[t.dataset.type].dimensions&&t.dataset[t.dataset.type].dimensions.length>0?this.textInfo=this.getFieldVal(t.dataset[t.dataset.type].source[0],t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].encode.text):this.textInfo=t.dataset[t.dataset.type].encode.text,this.lifecycleAfterLoad()},reLoadInfo(t){t&&(this.$refs.comButton.style.width=t.attr.w+"px",this.$refs.comButton.style.height=t.attr.hh+"px"),this.loadInfo(t)},getUrl(t){return t&&t!=""?r.appendImageBaseURL(t):null},getButtonStyle(){let t={cursor:"pointer",userSelect:"none",width:this.widgetInfo.config.buttonStyle.width+"px",height:this.widgetInfo.config.buttonStyle.height+"px",backgroundColor:this.widgetInfo.config.buttonStyle.backgroundColor,lineHeight:this.widgetInfo.config.buttonStyle.height+"px",margin:this.widgetInfo.global.marginTop+"px 0 0 "+this.widgetInfo.global.marginLeft+"px",borderRadius:this.widgetInfo.config.buttonStyle.borderRadius+"px",color:this.widgetInfo.config.buttonStyle.color,fontSize:this.widgetInfo.config.buttonStyle.fontSize+"px",fontFamily:this.widgetInfo.config.buttonStyle.fontFamily,fontWeight:this.widgetInfo.config.buttonStyle.fontWeight,fontStyle:this.widgetInfo.config.buttonStyle.fontStyle,textDecoration:this.widgetInfo.config.buttonStyle.textDecoration,textAlign:this.widgetInfo.config.buttonStyle.textAlign,border:this.widgetInfo.config.buttonStyle.borderWidth+"px solid "+this.widgetInfo.config.buttonStyle.borderColor};return this.permissionDisabled=r.getWidgetPermissionDisabled(this.widgetInfo,"disabled"),this.permissionDisabled==!0&&(t.cursor="not-allowed",t.filter="opacity(50%)"),t},initAction(t){this.actionReceive(t)},onClick(){if(this.permissionDisabled==!0)return;let t=this,i=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(i,e=>{if(e.enabled&&e.code==t.actionType.click.code){let l=e.code+"_"+t.widgetInfo.id,a={text:t.textInfo};if(e.paramsExtend&&e.paramsExtend.length>0){let x=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(x=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(a,e.paramsExtend,x,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(w.log("Execute script for "+this.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){y.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),a=this.customScript(a)}d.Z.$emit(l,a),e.postMessage&&this.doPostMessage(a),this.actionNameList.push(l)}else if(e.enabled&&e.code==t.actionType.openLink.code){let l={text:t.textInfo};if(e.paramsExtend&&e.paramsExtend.length>0){let a=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(a=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(l,e.paramsExtend,a,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(w.log("Execute script for "+e.name+" action"),e.script.content==""){y.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",e.script.content),l=this.customScript(l)}e.type===this.$$global_editor.linkType.dynamic.code&&(e[t.$$global_editor.linkType.dynamic.code].url=t.getActionUrl(e,t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0],t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)),this.openLinkAction(e,l)}})}}},C=S,L=n(68141),H=(0,L.Z)(C,h,s,!1,null,"bb8ef9f6",null),T=H.exports}}]);
