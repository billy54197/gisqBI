"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[58271],{56279:function(H,m,o){o.d(m,{P:function(){return l}});var d=o(386892),h=o(149500);const l={mixins:[d.D],created(){},methods:{lifecycleBeforeChartsLoad(g){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&h.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),h.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let y=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[g]);if(y)return y}return g},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&h.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),h.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(H,m,o){o.d(m,{X:function(){return d},b:function(){return h}});let d={versions:function(){var l=navigator.userAgent;return{trident:l.indexOf("Trident")>-1,presto:l.indexOf("Presto")>-1,webKit:l.indexOf("AppleWebKit")>-1,gecko:l.indexOf("Gecko")>-1&&l.indexOf("KHTML")==-1,mobile:!!l.match(/AppleWebKit.*Mobile.*/),ios:!!l.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:l.indexOf("Android")>-1,iPhone:l.indexOf("iPhone")>-1,iPad:l.indexOf("iPad")>-1,webApp:l.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},h;d.versions.mobile||d.versions.ios||d.versions.android||d.versions.iPhone||d.versions.iPad?h=!1:h=!0},58271:function(H,m,o){o.r(m),o.d(m,{default:function(){return j}});var d=function(){var s=this,i=s._self._c;return i("div",{style:{width:s.widgetInfo.attr.w+"px",height:s.widgetInfo.attr.hh+"px"}},[i("hide-button",{attrs:{attr:s.widgetInfo.attr}}),i("div",{ref:"lineSimple",style:{width:s.widgetInfo.attr.w+"px",height:s.widgetInfo.attr.hh+"px"}})],1)},h=[],l=o(844513),g=o(927966),A=o(804617),y=o(56279),J=o(445061),z=o(126711),w=o(99349),n=o(275770),u=o(555616),T=o(67157),x=o(150813);const W={mixins:[T.c],data(){return{config_extend:{config:{series:{symbolSize:4,symbol:"emptyCircle",itemStyle:{width:2}}}},filter_config:{title:JSON.parse(JSON.stringify(x.Z.charts.title)),legend:JSON.parse(JSON.stringify(x.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(x.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(x.Z.charts.toolbox)),xAxis:JSON.parse(JSON.stringify(x.Z.charts.xAxis)),yAxis:JSON.parse(JSON.stringify(x.Z.charts.yAxis)),series:{itemStyle:{opacity:1,color:"#4C84FF"}}}}},methods:{filterPredefineColoursSchemeConfig(t,s){this.getNewConfigWithArrary(t,s,this.filter_config)}}};var P=o(149500);const Z=o(954255);var R={name:"LineSimple",components:{HideButton:l.Z},mixins:[A.baseConfig,y.P,J.u,z.H,w.P,W],props:["widgetInfo"],data(){return{dimensionsEx:null,dimensionsAliasEx:null}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.echarts=Z.init(this.$refs.lineSimple,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},destroyed(){this.echarts.dispose()},methods:{loadInfo(t){let s=[],i=[],f=[],r=[];s=t.dataset[t.dataset.type].source,i=t.dataset[t.dataset.type].dimensions,f=t.dataset[t.dataset.type].dimensionsAlias,r=t.dataset[t.dataset.type].encode,this.dimensionsEx=i,this.dimensionsAliasEx=f;let F=this.getTooltip(t.config.tooltip),K=JSON.parse(JSON.stringify(t.config.toolbox)),a=JSON.parse(JSON.stringify(t.config.legend)),p=JSON.parse(JSON.stringify(t.config.title)),S=JSON.parse(JSON.stringify(t.config.grid)),b=this.getxAxis(t.config.xAxis),I=this.getyAxis(t.config.yAxis);b.axisTick.lineStyle.color=this.getColorInfo(b.axisTick.lineStyle.colorInfo),I.axisTick.lineStyle.color=this.getColorInfo(I.axisTick.lineStyle.colorInfo),b.axisLine.lineStyle.color=this.getColorInfo(b.axisLine.lineStyle.colorInfo),I.axisLine.lineStyle.color=this.getColorInfo(I.axisLine.lineStyle.colorInfo);let e=JSON.parse(JSON.stringify(t.config.series));e.name||(e.name=this.getLegendData(f,r));let N={},E=[],$=[];for(let c=i.length-1;c>-1;--c)N[i[c]]=c;for(let c=0;c<s.length;++c){let C=s[c];E.push({name:C[N[r.x]]||"",value:C[N[r.y]]||"",source:s}),$.push(C[N[r.x]]||"")}e.data=E,b.data=$;let O={color:this.$$global_editor.predefineColors,tooltip:F,toolbox:K,title:{show:p.show,text:p.text,link:p.link,textAlign:p.textAlign,left:p.left+"%",right:p.right+"%",top:p.top+"%",bottom:p.bottom+"%",textStyle:{fontSize:p.textStyle.fontSize,fontFamily:p.textStyle.fontFamily,fontWeight:p.textStyle.fontWeight,color:p.textStyle.color}},legend:{show:a.show,type:a.type,itemWidth:a.itemWidth,itemHeight:a.itemHeight,icon:a.icon,orient:a.orient,align:a.align,itemGap:a.itemGap,left:a.left+"%",right:a.right+"%",top:a.top+"%",bottom:a.bottom+"%",textStyle:{color:a.textStyle.color,fontWeight:a.textStyle.fontWeight}},textStyle:{fontSize:a.textStyle.fontSize,fontFamily:a.textStyle.fontFamily,color:a.textStyle.color},grid:{left:S.left+"%",right:S.right+"%",top:S.top+"%",bottom:S.bottom+"%",dx:S.dx+"%",dy:S.dy+"%"},xAxis:b,yAxis:I,dataset:{source:s,sourceHeader:!1},series:[{name:e.name,symbol:e.symbol,symbolSize:e.symbolSize,type:"line",dimensions:i,encode:r,data:e.data,barWidth:e.barWidth+"%",label:{show:e.label.show,position:e.label.position,rotate:e.label.rotate,color:e.label.color,fontSize:e.label.fontSize,fontWeight:e.label.fontWeight},itemStyle:{color:e.itemStyle.color},emphasis:{itemStyle:e.emphasis.itemStyle},lineStyle:{width:e.itemStyle.width,color:e.itemStyle.color,opacity:e.itemStyle.opacity,barBorderRadius:[e.itemStyle.barBorderRadius,e.itemStyle.barBorderRadius,0,0],type:e.itemStyle.type},markLine:e.markLine,smooth:e.smooth,step:e.step}]};if(e.emphasis)try{let c=e.emphasis;if(c.script&&c.script.enabled){if(c.script.content){let C=new Function("index","item","data",c.script.content),v=O.series[0].data;if(v&&v.length>0)for(let L=0;L<v.length;++L)try{v[L].emphasis=C.call(this,L,v[L],v)}catch(k){P.error("\u5904\u7406\u81EA\u5B9A\u4E49\u9AD8\u4EAE\u6837\u5F0F\u51FA\u9519\uFF1A",k)}}}else e.emphasis.itemStyle&&e.emphasis.itemStyle.color&&(O.series[0].emphasis={itemStyle:{...e.emphasis.itemStyle}})}catch(c){P.error("\u5904\u7406\u81EA\u5B9A\u4E49\u9AD8\u4EAE\u6837\u5F0F\u51FA\u9519\uFF1A",c)}this.getAnimation(O,t),this.setOption(O),this.setAnimationLoop(t,()=>{this.setOption(O,t)})},setOption(t){this.echarts.getOption()&&this.echarts.clear(),setTimeout(()=>{this.echarts.setOption(this.lifecycleBeforeChartsLoad(t),{notMerge:!0})},0)},reLoadInfo(t){t&&(this.$refs.lineSimple.style.width=t.attr.w+"px",this.$refs.lineSimple.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},getLegendData(t,s){let i=this.$$lib__.find(t,f=>f.name==s.y);return i?i.alias&&i.alias!=""?i.alias:i.name:""},initAction(t){this.actionSendout(t),this.actionReceive(t)},actionSendout(t){let s=this;this.$$lib__.each(t.action.sendOut.actionList,i=>{if(i.enabled){let f=i.code+"_"+t.id;if(i.paramsExtend&&i.paramsExtend.length>0){let r={};this.getParamsExtend(r,i.paramsExtend,t)}i.code==n.default.click.code&&s.onClick(f,i)}})},onClick(t,s){let i=this;i.echarts.on("click",f=>{let r={},F=i.getValue(f.seriesName,f.data);if(r.x=f.name||f.value,r.y=F,s.script&&s.script.enabled){if(P.log("Execute script for "+i.widgetInfo.name+" component to "+n.default[s.code].name+" component"),s.script.content==""){u.Message.warning({message:n.default[s.code].name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",s.script.content),r=this.customScript(r)}g.Z.$emit(t,r),s.postMessage&&i.doPostMessage(r),i.actionNameList.push(t)})}}},M=R,B=o(768141),D=(0,B.Z)(M,d,h,!1,null,"634be961",null),j=D.exports},844513:function(H,m,o){o.d(m,{Z:function(){return z}});var d=function(){var n=this,u=n._self._c;return n.attr.buttonHide?u("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(T){return n.onHide()}}},[n.openTooltip?u("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[u("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):u("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},h=[],l=o(752246),g={props:["attr"],name:"hide-button",data(){return{isPc:l.b}},computed:{openTooltip:function(){let w=!1,n=this.attr.buttonHideTooltipContent;return l.b&&n&&n!=null&&n.trim()!=""&&(w=!0),w}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},A=g,y=o(768141),J=(0,y.Z)(A,d,h,!1,null,"bf399b9a",null),z=J.exports}}]);
