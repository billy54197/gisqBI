"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[21740],{721740:function(_,l,d){d.r(l),d.d(l,{default:function(){return b}});var u=function(){var e=this,a=e._self._c;return a("div",[a("el-form",{ref:"form",attrs:{size:"mini","label-width":"70px","label-position":"right",model:e.currentWidget.dataset},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",[a("el-form-item",{attrs:{label:"\u6570\u636E\u7C7B\u578B"}},[a("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"},on:{change:e.changeDatasetType},model:{value:e.currentWidget.dataset.type,callback:function(t){e.$set(e.currentWidget.dataset,"type",t)},expression:"currentWidget.dataset.type"}},e._l(e.$$global_editor.dataSourcTypeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("el-form-item",{attrs:{label:"\u5B9A\u4F4D\u540D\u79F0"}},[a("el-select",{attrs:{size:"mini",clearable:!0,placeholder:"\u8BF7\u9009\u62E9\u5B9A\u4F4D\u70B9\u7684\u540D\u79F0"},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.name,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"name",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.name"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u5B9A\u4F4D\u5206\u7C7B"}},[a("el-select",{attrs:{size:"mini",clearable:!0,placeholder:"\u8BF7\u9009\u62E9\u5B9A\u4F4D\u70B9\u7684\u5206\u7C7B"},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.type,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"type",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.type"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u5B9A\u4F4D\u5750\u6807"}},[a("el-select",{attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u5B9A\u4F4D\u70B9\u7684\u5750\u6807"},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.positionPoint,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"positionPoint",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.positionPoint"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u5B9A\u4F4D\u6807\u6CE8"}},[a("el-select",{attrs:{size:"mini",clearable:!0,placeholder:"\u8BF7\u9009\u62E9\u5B9A\u4F4D\u70B9\u7684\u6807\u6CE8"},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.mark,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"mark",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.mark"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u5B9A\u4F4D\u63CF\u8FF0"}},[a("el-select",{attrs:{size:"mini",clearable:!0,placeholder:"\u8BF7\u9009\u62E9\u5B9A\u4F4D\u70B9\u7684\u63CF\u8FF0"},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.discription,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"discription",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.discription"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("setting-dataset",{ref:"settingDataset",attrs:{"current-widget":e.currentWidget},on:{getDataSetData:e.changeData,clearDynamicEncode:e.clearDynamicEncode}})],1)])],1)},g=[],p=d(723400),W=d(589908),m=d(66715),y={name:"GisThemeScatterData",components:{SettingDataset:W.Z},mixins:[p.j],props:["currentWidget"],data(){return{isInit:!1}},mounted(){this.getConfigData()},methods:{changeDatasetType(){this.$refs.settingDataset.loadPreview(),this.getConfigData()},changeData(){this.currentWidget.config.dataOptions=[],this.initDataOptions(),this.getConfigData()},initDataOptions(){let n=this,e=n.currentWidget.dataset[n.currentWidget.dataset.type].dimensions,a=n.currentWidget.dataset[n.currentWidget.dataset.type].encode.name,t=e.indexOf(a),D=n.currentWidget.dataset[n.currentWidget.dataset.type].encode.type,c=e.indexOf(D),x=n.currentWidget.dataset[n.currentWidget.dataset.type].encode.positionPoint,k=e.indexOf(x),O=n.currentWidget.dataset[n.currentWidget.dataset.type].encode.mark,C=e.indexOf(O),j=n.currentWidget.dataset[n.currentWidget.dataset.type].encode.discription,P=e.indexOf(j),i=[];n.currentWidget.dataset[n.currentWidget.dataset.type].source.forEach((r,z)=>{i.indexOf(r[c])==-1&&i.push(r[c]);let o=r[k];if(o){let s=o.split(",");if(s&&s.length==2){let $={name:r[t],type:r[c],positionPoint:[s[0],s[1]],mark:r[C],discription:r[P]};n.currentWidget.config.dataOptions.push($)}}});for(let r in i)r<n.currentWidget.config.categoryObj.length?n.currentWidget.config.categoryObj[r].type=i[r]:n.currentWidget.config.categoryObj.push({type:i[r],color:m.Z.color16(),img:""});i.length<n.currentWidget.config.categoryObj.length&&n.currentWidget.config.categoryObj.splice(i.length,n.currentWidget.config.categoryObj.length-i.length)},clearDynamicEncode(){this.currentWidget.dataset.dynamic.encode.name="",this.currentWidget.dataset.dynamic.encode.type="",this.currentWidget.dataset.dynamic.encode.positionPoint="",this.currentWidget.dataset.dynamic.encode.discription=""}}},f=y,h=d(768141),v=(0,h.Z)(f,u,g,!1,null,"56476b73",null),b=v.exports}}]);
