"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[1094],{56279:function(v,p,o){o.d(p,{P:function(){return c}});var g=o(86892),r=o(49500);const c={mixins:[g.D],created(){},methods:{lifecycleBeforeChartsLoad(l){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&r.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),r.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let f=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[l]);if(f)return f}return l},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&r.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),r.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},44513:function(v,p,o){o.d(p,{Z:function(){return y}});var g=function(){var n=this,d=n._self._c;return n.attr.buttonHide?d("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(b){return n.onHide()}}},[n.openTooltip?d("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[d("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):d("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},r=[],c=o(52246),l={props:["attr"],name:"hide-button",data(){return{isPc:c.b}},computed:{openTooltip:function(){let u=!1,n=this.attr.buttonHideTooltipContent;return c.b&&n&&n!=null&&n.trim()!=""&&(u=!0),u}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},h=l,f=o(68141),m=(0,f.Z)(h,g,r,!1,null,"bf399b9a",null),y=m.exports},11094:function(v,p,o){o.r(p),o.d(p,{default:function(){return H}});var g=function(){var i=this,e=i._self._c;return e("div",[i.imgRefresh?e("div",{directives:[{name:"popover",rawName:"v-popover:imgPopover",arg:"imgPopover"}],ref:"pictureSingle",style:i.style,on:{click:i.onClick}},[e("hide-button",{attrs:{attr:i.widgetInfo.attr}})],1):i._e(),e("el-popover",{ref:"imgPopover",attrs:{"popper-class":"img-popover",transition:"fade-in-linear",width:i.widgetInfo.config.popover.width,trigger:i.widgetInfo.config.popover.trigger,placement:i.widgetInfo.config.popover.placement,disabled:i.widgetInfo.config.popover.disabled,offset:i.widgetInfo.config.popover.offset,"visible-arrow":i.widgetInfo.config.popover.arrow}},[e("div",{style:i.popoerStyle(i.widgetInfo.config),domProps:{innerHTML:i._s(i.content)}})])],1)},r=[],c=o(21300),l=o(27966),h=o(44513),f=o(26711),m=o(45061),y=o(56279),u=o(44658),n=o(48836),d=o(55616),b=o(89615);const I=[{name:"rotate-r",label:"\u987A\u65F6\u9488\u65CB\u8F6C",config:{rotate:"360deg"}},{name:"rotate-n",label:"\u9006\u65F6\u9488\u65CB\u8F6C",config:{rotate:"-360deg"}},{name:"opracity",label:"\u900F\u660E\u5EA6",config:{opacity:[0,1]}},{name:"size",label:"\u7F29\u653E",config:{scale:0}},{name:"move-x",label:"\u6C34\u5E73\u79FB\u52A8",config:{translateX:"100%"}},{name:"move-y",label:"\u5782\u76F4\u79FB\u52A8",config:{translateY:"100%"}},{name:"custom",label:"\u81EA\u5B9A\u4E49"}];var w={animeType:I,speedType:[{value:"linear",label:"\u5300\u901F"},{value:"easeOutQuint",label:"\u5FEB-\u6162"},{value:"easeInQuart",label:"\u6162-\u5FEB"},{value:"easeInOutCirc",label:"\u6162-\u5FEB-\u6162"},{value:"easeOutInCirc",label:"\u5FEB-\u6162-\u5FEB"}],direction:[{value:"normal",label:"\u6B63\u653E"},{value:"reverse",label:"\u5012\u653E"},{value:"alternate",label:"\u6B63-\u5012\u653E"}],doAnime:(t,i)=>{if(!i||!i.enabled)return;let e={};return i.type!=="custom"?(e={...JSON.parse(JSON.stringify(I.find(s=>s.name===i.type))).config},i.speed&&(e.easing=i.speed),i.time&&(e.duration=(i.time-0)*1e3,e.duration==0&&(e.duration=1)),i.delay&&(e.delay=(i.delay-0)*1e3),i.endDelay&&(e.endDelay=(i.endDelay-0)*1e3),i.direction&&(e.direction=i.direction),i.repeat&&(i.repeat=="repeat"?e.loop=!0:i.repeat-0>0&&(e.loop=i.repeat-0,e.direction==="alternate"&&(e.loop*=2))),e.targets=t):(e={},i.script&&(e=new Function(i.script).apply(void 0)),e.targets=e.myTargets||t),(0,b.Z)(e)}},S=o(49500),x={name:"PictureSingle",components:{HideButton:h.Z},mixins:[u.uN,f.H,m.u,y.P],props:["widgetInfo"],computed:{...(0,n.Se)(["getCanvasSettingInfo","getCanvasSetting"])},data(){return{content:"",imgRefresh:!0,style:{}}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)},"widgetInfo.attr.hh":function(t){this.style.height=t+"px"},"widgetInfo.attr.w":function(t){this.style.width=t+"px"}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{loadInfo(t){let i,e;this.content=t.config.popover.content;let a=t.dataset&&t.dataset.type?t.dataset[t.dataset.type]:null;a&&a.source&&a.dimensions&&a.encode&&a.encode.url&&(i=this.getFieldVal(t.dataset[t.dataset.type].source[0],t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].encode.url),e=this.getFieldVal(t.dataset[t.dataset.type].source[0],t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].encode.content)),i&&i!=""&&(t.config.backgroundImage=i),e&&e!=""&&(this.content=e),this.getStyle(t),this.setAnime(t),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.actionReceive(t)},getStyle(t){let i,e,a;t.config.backgroundSize=="auto-no-repeat"?(i="auto",e="no-repeat"):t.config.backgroundSize=="auto"?(i="auto",e="repeat"):t.config.backgroundSize=="contain-no-repeat"?(a="top "+t.config.align,i="contain",e="no-repeat"):i=t.config.backgroundSize,this.style={width:t.attr.w+"px",height:t.attr.hh+"px",backgroundImage:this.getImageUrl(t.config.backgroundImage),backgroundPosition:a,backgroundSize:i,backgroundRepeat:e,cursor:this.getCursor(t.action,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code)}},setAnime(t){t.config&&t.config.anime&&t.config.anime.enabled?this.$nextTick(function(){this.$refs.pictureSingle&&(this.animed?(this.imgRefresh=!1,this.$nextTick(()=>{this.imgRefresh=!0,this.$nextTick(function(){this.imgAnime=w.doAnime(this.$refs.pictureSingle,t.config.anime)})})):(this.imgAnime=w.doAnime(this.$refs.pictureSingle,t.config.anime),this.animed=!0))}):this.animed&&(this.imgRefresh=!1,this.$nextTick(()=>{this.imgRefresh=!0,this.animed=!1}))},popoerStyle(t){let i=document.getElementsByClassName("img-popover");return i.length&&(i[0].style.backgroundColor=t.popover.backgroundColor,i[0].style.borderColor=t.popover.backgroundColor),{fontSize:c.getNewFontSize(t.popover.fontStyle.fontSize)+"px",fontFamily:t.popover.fontStyle.fontFamily,color:t.popover.fontStyle.color}},getImageUrl(t){return"url("+c.appendImageBaseURL(t)+")"},onClick(){let t=this,i=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(i,e=>{if(e.enabled&&e.code==t.$$global_editor.actionType.click.code){let a=t.$$global_editor.actionType.click.code+"_"+t.widgetInfo.id,s={name:t.widgetInfo.name};if(e.paramsExtend&&e.paramsExtend.length>0&&this.getParamsExtend(s,e.paramsExtend,t.widgetInfo),e.script&&e.script.enabled){if(S.log("Execute script for "+t.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){d.Message.warning({message:e.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",e.script.content),s=this.customScript_actionSend_clickParam(s)}l.Z.$emit(a,s),e.postMessage&&this.doPostMessage(s),this.actionNameList.push(a)}else if(e.enabled&&e.code==t.$$global_editor.actionType.openLink.code){let a={};if(e.paramsExtend&&e.paramsExtend.length>0){let s=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(s=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(a,e.paramsExtend,s,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(S.log("Execute script for "+t.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){d.Message.warning({message:e.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_openLinkParam=new Function("param",e.script.content),a=this.customScript_actionSend_openLinkParam(a)}this.openLinkAction(e,a)}})}}},L=x,k=o(68141),$=(0,k.Z)(L,g,r,!1,null,"2b601cca",null),H=$.exports}}]);
