"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[82368],{752246:function(x,f,o){o.d(f,{X:function(){return r},b:function(){return c}});let r={versions:function(){var s=navigator.userAgent;return{trident:s.indexOf("Trident")>-1,presto:s.indexOf("Presto")>-1,webKit:s.indexOf("AppleWebKit")>-1,gecko:s.indexOf("Gecko")>-1&&s.indexOf("KHTML")==-1,mobile:!!s.match(/AppleWebKit.*Mobile.*/),ios:!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:s.indexOf("Android")>-1,iPhone:s.indexOf("iPhone")>-1,iPad:s.indexOf("iPad")>-1,webApp:s.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},c;r.versions.mobile||r.versions.ios||r.versions.android||r.versions.iPhone||r.versions.iPad?c=!1:c=!0},459738:function(x,f,o){o.d(f,{OW:function(){return c},m3:function(){return m},nm:function(){return s},vP:function(){return h},xC:function(){return g}});var r=o(153258);function c(e,n,i){let t=e;const a=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(p=>(0,r.mf)(t[p]));if(!(0,r.mf)(t[a]))return!1;do{if(t[a](n))return!0;if(t===i)return!1;t=t.parentNode}while(t);return!1}function s(e){const n=window.getComputedStyle(e);return[parseFloat(n.getPropertyValue("width"),10),parseFloat(n.getPropertyValue("height"),10)]}function h(e,n,i){e&&(e.attachEvent?e.attachEvent("on"+n,i):e.addEventListener?e.addEventListener(n,i,!0):e["on"+n]=i)}function g(e,n,i){e&&(e.detachEvent?e.detachEvent("on"+n,i):e.removeEventListener?e.removeEventListener(n,i,!0):e["on"+n]=null)}function m(e,n,i,t){var a=0,p=setInterval(()=>{a<i?(a++,e()):(clearInterval(p),t&&t())},n);return p}},153258:function(x,f,o){o.d(f,{ew:function(){return h},le:function(){return g},mf:function(){return r},sg:function(){return m},xn:function(){return c}});function r(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function c(e,n,i,t=1){const a=Math.round(n/t/e[0])*e[0],p=Math.round(i/t/e[1])*e[1];return[a,p]}function s(e){const n=e.getBoundingClientRect();return[parseInt(n.width),parseInt(n.height)]}function h(e,n,i){return e-n-i}function g(e,n,i){return e-n-i}function m(e,n,i){return n!==null&&e<n?n:i!==null&&i<e?i:e}},844513:function(x,f,o){o.d(f,{Z:function(){return n}});var r=function(){var t=this,a=t._self._c;return t.attr.buttonHide?a("div",{style:{position:"absolute",right:t.attr.buttonHideRight+"px",top:t.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(p){return t.onHide()}}},[t.openTooltip?a("el-tooltip",{attrs:{"open-delay":1e3,content:t.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[a("el-button",{class:t.attr.buttonHideIconClass&&t.attr.buttonHideIconClass!=""?t.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.attr.buttonHideColor,fontSize:t.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a("el-button",{class:t.attr.buttonHideIconClass&&t.attr.buttonHideIconClass!=""?t.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.attr.buttonHideColor,fontSize:t.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):t._e()},c=[],s=o(752246),h={props:["attr"],name:"hide-button",data(){return{isPc:s.b}},computed:{openTooltip:function(){let i=!1,t=this.attr.buttonHideTooltipContent;return s.b&&t&&t!=null&&t.trim()!=""&&(i=!0),i}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},g=h,m=o(768141),e=(0,m.Z)(g,r,c,!1,null,"bf399b9a",null),n=e.exports},982368:function(x,f,o){o.r(f),o.d(f,{default:function(){return C}});var r=function(){var l=this,v=l._self._c;return v("div",{directives:[{name:"show",rawName:"v-show",value:l.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],ref:"gisBase",staticClass:"my-gisBase",style:{width:l.widgetInfo.attr.w+"px",height:l.widgetInfo.attr.hh+"px"}})},c=[],s=o(844513),h=o(927966),g=o(92918),m=o(445061),e=o(126711),n=o(386892),i=o(459738),t=o(149500),a={name:"GisAnalysis",components:{HideButton:s.Z},mixins:[g.baseConfig,n.D,m.u,e.H],props:["widgetInfo"],data(){return{timer:"",map:null,tocConfig:null}},watch:{},beforeDestroy(){},mounted(){this.initAction(this.widgetInfo),this.timer=(0,i.m3)(this.getBindMap,500,50,()=>{t.error("gis-analysis\u7EC4\u4EF6getBindMap\u7ED1\u5B9A\u8D85\u65F6")})},methods:{loadInfo(d){},reLoadInfo(d){this.loadInfo(d)},initAction(d){this.registerAction(d,"configMap","mapList",this.doConfigMap),this.actionReceive(d)},analysisFinish(d){let l=this,v=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(v,u=>{if(u.enabled&&u.code==l.$$global_editor.actionType.analyze.code){let y=u.code+"_"+l.widgetInfo.id,b={result:d};u.paramsExtend&&u.paramsExtend.length>0&&this.getExtendParams(b,u.paramsExtend,[],[]),u.script&&u.script.enabled&&u.script.content&&(this.doConfigMap=new Function("data",u.script.content),this.doConfigMap(b)),t.log(b),h.Z.$emit(y,b),u.postMessage&&this.doPostMessage(b),this.actionNameList.push(y)}})},getBindMap(){if(typeof this.widgetInfo.action.gisMapId<"u"){let d=this.getWidgetObject(this.widgetInfo.action.gisMapId);if(d){clearInterval(this.timer);let l=d.$refs.gismap;l&&(t.log("\u83B7\u53D6map\u5BF9\u8C61\u6210\u529F\uFF0C\u56FE\u5C42\u76EE\u5F55\u7ED1\u5B9A\u5730\u56FE\uFF0C\u521D\u59CB\u5316\u56FE\u5C42\u64CD\u4F5C,\u5173\u95ED\u5B9A\u65F6\u5668"),this.map=l.map,this.$refs.analysis.setMap(this.map))}}},doConfigMap(d,l,v){let u=l[v];t.info("======tctocovt========="),t.info(d),t.info(u),this.map=u,t.info("==============="),this.$refs.toc.initLayerManager(this.map)}}},p=a,I=o(768141),w=(0,I.Z)(p,r,c,!1,null,"3d419060",null),C=w.exports}}]);
