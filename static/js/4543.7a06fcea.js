(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[4543],{96542:function(X){"use strict";X.exports=z;function z(e,M){this.x=e,this.y=M}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,M){return this.clone()._rotateAround(e,M)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var M=e.x-this.x,F=e.y-this.y;return M*M+F*F},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,M){return Math.atan2(this.x*M-this.y*e,this.x*e+this.y*M)},_matMult:function(e){var M=e[0]*this.x+e[1]*this.y,F=e[2]*this.x+e[3]*this.y;return this.x=M,this.y=F,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var M=Math.cos(e),F=Math.sin(e),R=M*this.x-F*this.y,A=F*this.x+M*this.y;return this.x=R,this.y=A,this},_rotateAround:function(e,M){var F=Math.cos(e),R=Math.sin(e),A=M.x+F*(this.x-M.x)-R*(this.y-M.y),T=M.y+R*(this.x-M.x)+F*(this.y-M.y);return this.x=A,this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},z.convert=function(e){return e instanceof z?e:Array.isArray(e)?new z(e[0],e[1]):e}},99996:function(X,z,e){X.exports.VectorTile=e(14253),X.exports.VectorTileFeature=e(35752),X.exports.VectorTileLayer=e(143)},14253:function(X,z,e){"use strict";var M=e(143);X.exports=F;function F(A,T){this.layers=A.readFields(R,{},T)}function R(A,T,D){if(A===3){var b=new M(D,D.readVarint()+D.pos);b.length&&(T[b.name]=b)}}},35752:function(X,z,e){"use strict";var M=e(96542);X.exports=F;function F(b,C,f,v,m){this.properties={},this.extent=f,this.type=0,this._pbf=b,this._geometry=-1,this._keys=v,this._values=m,b.readFields(R,this,C)}function R(b,C,f){b==1?C.id=f.readVarint():b==2?A(f,C):b==3?C.type=f.readVarint():b==4&&(C._geometry=f.pos)}function A(b,C){for(var f=b.readVarint()+b.pos;b.pos<f;){var v=C._keys[b.readVarint()],m=C._values[b.readVarint()];C.properties[v]=m}}F.types=["Unknown","Point","LineString","Polygon"],F.prototype.loadGeometry=function(){var b=this._pbf;b.pos=this._geometry;for(var C=b.readVarint()+b.pos,f=1,v=0,m=0,o=0,u=[],l;b.pos<C;){if(v<=0){var r=b.readVarint();f=r&7,v=r>>3}if(v--,f===1||f===2)m+=b.readSVarint(),o+=b.readSVarint(),f===1&&(l&&u.push(l),l=[]),l.push(new M(m,o));else if(f===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+f)}return l&&u.push(l),u},F.prototype.bbox=function(){var b=this._pbf;b.pos=this._geometry;for(var C=b.readVarint()+b.pos,f=1,v=0,m=0,o=0,u=1/0,l=-1/0,r=1/0,s=-1/0;b.pos<C;){if(v<=0){var c=b.readVarint();f=c&7,v=c>>3}if(v--,f===1||f===2)m+=b.readSVarint(),o+=b.readSVarint(),m<u&&(u=m),m>l&&(l=m),o<r&&(r=o),o>s&&(s=o);else if(f!==7)throw new Error("unknown command "+f)}return[u,r,l,s]},F.prototype.toGeoJSON=function(b,C,f){var v=this.extent*Math.pow(2,f),m=this.extent*b,o=this.extent*C,u=this.loadGeometry(),l=F.types[this.type],r,s;function c(i){for(var n=0;n<i.length;n++){var h=i[n],g=180-(h.y+o)*360/v;i[n]=[(h.x+m)*360/v-180,360/Math.PI*Math.atan(Math.exp(g*Math.PI/180))-90]}}switch(this.type){case 1:var x=[];for(r=0;r<u.length;r++)x[r]=u[r][0];u=x,c(u);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=T(u),r=0;r<u.length;r++)for(s=0;s<u[r].length;s++)c(u[r][s]);break}u.length===1?u=u[0]:l="Multi"+l;var a={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(a.id=this.id),a};function T(b){var C=b.length;if(C<=1)return[b];for(var f=[],v,m,o=0;o<C;o++){var u=D(b[o]);u!==0&&(m===void 0&&(m=u<0),m===u<0?(v&&f.push(v),v=[b[o]]):v.push(b[o]))}return v&&f.push(v),f}function D(b){for(var C=0,f=0,v=b.length,m=v-1,o,u;f<v;m=f++)o=b[f],u=b[m],C+=(u.x-o.x)*(o.y+u.y);return C}},143:function(X,z,e){"use strict";var M=e(35752);X.exports=F;function F(T,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=T,this._keys=[],this._values=[],this._features=[],T.readFields(R,this,D),this.length=this._features.length}function R(T,D,b){T===15?D.version=b.readVarint():T===1?D.name=b.readString():T===5?D.extent=b.readVarint():T===2?D._features.push(b.pos):T===3?D._keys.push(b.readString()):T===4&&D._values.push(A(b))}function A(T){for(var D=null,b=T.readVarint()+T.pos;T.pos<b;){var C=T.readVarint()>>3;D=C===1?T.readString():C===2?T.readFloat():C===3?T.readDouble():C===4?T.readVarint64():C===5?T.readVarint():C===6?T.readSVarint():C===7?T.readBoolean():null}return D}F.prototype.feature=function(T){if(T<0||T>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[T];var D=this._pbf.readVarint()+this._pbf.pos;return new M(this._pbf,D,this.extent,this._keys,this._values)}},10565:function(X,z){var e,M,F;(function(R,A){M=[],e=A,F=typeof e=="function"?e.apply(z,M):e,F!==void 0&&(X.exports=F)})(this,function(){var R=52.35987755982988,A=3.141592653589793,T=6378245,D=.006693421622965943,b=function(c,x){var c=+c,x=+x,a=c-.0065,i=x-.006,n=Math.sqrt(a*a+i*i)-2e-5*Math.sin(i*R),h=Math.atan2(i,a)-3e-6*Math.cos(a*R),g=n*Math.cos(h),d=n*Math.sin(h);return[g,d]},C=function(x,c){var c=+c,x=+x,a=Math.sqrt(x*x+c*c)+2e-5*Math.sin(c*R),i=Math.atan2(c,x)+3e-6*Math.cos(x*R),n=a*Math.cos(i)+.0065,h=a*Math.sin(i)+.006;return[n,h]},f=function(x,c){var c=+c,x=+x;if(u(x,c))return[x,c];var a=m(x-105,c-35),i=o(x-105,c-35),n=c/180*A,h=Math.sin(n);h=1-D*h*h;var g=Math.sqrt(h);a=a*180/(T*(1-D)/(h*g)*A),i=i*180/(T/g*Math.cos(n)*A);var d=c+a,y=x+i;return[y,d]},v=function(x,c){var c=+c,x=+x;if(u(x,c))return[x,c];var a=m(x-105,c-35),i=o(x-105,c-35),n=c/180*A,h=Math.sin(n);h=1-D*h*h;var g=Math.sqrt(h);a=a*180/(T*(1-D)/(h*g)*A),i=i*180/(T/g*Math.cos(n)*A);var d=c+a,y=x+i;return[x*2-y,c*2-d]},m=function(x,c){var c=+c,x=+x,a=-100+2*x+3*c+.2*c*c+.1*x*c+.2*Math.sqrt(Math.abs(x));return a+=(20*Math.sin(6*x*A)+20*Math.sin(2*x*A))*2/3,a+=(20*Math.sin(c*A)+40*Math.sin(c/3*A))*2/3,a+=(160*Math.sin(c/12*A)+320*Math.sin(c*A/30))*2/3,a},o=function(x,c){var c=+c,x=+x,a=300+x+2*c+.1*x*x+.1*x*c+.1*Math.sqrt(Math.abs(x));return a+=(20*Math.sin(6*x*A)+20*Math.sin(2*x*A))*2/3,a+=(20*Math.sin(x*A)+40*Math.sin(x/3*A))*2/3,a+=(150*Math.sin(x/12*A)+300*Math.sin(x/30*A))*2/3,a},u=function(x,c){var c=+c,x=+x;return!(x>73.66&&x<135.05&&c>3.86&&c<53.55)};return{bd09togcj02:b,gcj02tobd09:C,wgs84togcj02:f,gcj02towgs84:v}})},96376:function(X,z,e){var M=e(3440);(function(){for(var R in M){if(M==null||!M.hasOwnProperty(R)||R==="default"||R==="__esModule")return;z[R]=M[R]}})();var F=e(40451);(function(){for(var R in F){if(F==null||!F.hasOwnProperty(R)||R==="default"||R==="__esModule")return;z[R]=F[R]}})(),e(18841),e(23184),e(96990),e(97199),e(38109),e(33421),e(87387),e(54219),e(97408),e(55921),e(31433),e(32958),e(7986),e(79337),e(30988),e(706),e(63914),e(53088),e(27207),e(94385),e(71626),e(59735),e(78029),e(3692),e(69124),e(10238),e(54843),e(60804),e(31075),e(62550),e(1498),e(34208),e(44344),e(36888),e(51838),e(41634),e(23710),e(87152),e(53597),e(68697),e(16613),e(82846),e(58367),e(45520),e(70846),e(23004),e(10875),e(32041),e(30690)},48642:function(X,z,e){var M=e(31879),F={};function R(){this._coordinateSystems=[]}R.prototype={constructor:R,create:function(T,D){var b=[];M.each(F,function(C,f){var v=C.create(T,D);b=b.concat(v||[])}),this._coordinateSystems=b},update:function(T,D){M.each(this._coordinateSystems,function(b){b.update&&b.update(T,D)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},R.register=function(T,D){F[T]=D},R.get=function(T){return F[T]};var A=R;X.exports=A},3868:function(X,z,e){var M=e(31879),F=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function R(T){M.each(F,function(D){this[D]=M.bind(T[D],T)},this)}var A=R;X.exports=A},9652:function(X,z,e){var M=e(3440),F=e(31879);function R(A,T){F.each(T,function(D){D.update="updateView",M.registerAction(D,function(b,C){var f={};return C.eachComponent({mainType:"series",subType:A,query:b},function(v){v[D.method]&&v[D.method](b.name,b.dataIndex);var m=v.getData();m.each(function(o){var u=m.getName(o);f[u]=v.isSelected(u)||!1})}),{name:b.name,selected:f,seriesId:b.seriesId}})})}X.exports=R},33894:function(X,z,e){var M=e(3440),F=e(31879),R=e(64072),A=R.updateCenterAndZoom;M.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(T,D){var b=T.componentType||"series";D.eachComponent({mainType:b,query:T},function(C){var f=C.coordinateSystem;if(f.type==="geo"){var v=A(f,T,C.get("scaleLimit"));C.setCenter&&C.setCenter(v.center),C.setZoom&&C.setZoom(v.zoom),b==="series"&&F.each(C.seriesGroup,function(m){m.setCenter(v.center),m.setZoom(v.zoom)})}})})},64072:function(X,z){function e(M,F,R){var A=M.getZoom(),T=M.getCenter(),D=F.zoom,b=M.dataToPoint(T);if(F.dx!=null&&F.dy!=null){b[0]-=F.dx,b[1]-=F.dy;var T=M.pointToData(b);M.setCenter(T)}if(D!=null){if(R){var C=R.min||0,f=R.max||1/0;D=Math.max(Math.min(A*D,f),C)/A}M.scale[0]*=D,M.scale[1]*=D;var v=M.position,m=(F.originX-v[0])*(D-1),o=(F.originY-v[1])*(D-1);v[0]-=m,v[1]-=o,M.updateTransform();var T=M.pointToData(b);M.setCenter(T),M.setZoom(D*A)}return{center:M.getCenter(),zoom:M.getZoom()}}z.updateCenterAndZoom=e},96990:function(X,z,e){var M=e(3440),F=e(31879),R=e(19641),A=R.layout,T=R.largeLayout;e(9145),e(11767),e(19489),e(15367),M.registerLayout(M.PRIORITY.VISUAL.LAYOUT,F.curry(A,"bar")),M.registerLayout(M.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,T),M.registerVisual({seriesType:"bar",reset:function(D){D.getData().setVisual("legendSymbol","roundRect")}})},11767:function(X,z,e){var M=e(32400),F=M.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return this.get("large")?this.get("progressive"):!1},getProgressiveThreshold:function(){var R=this.get("progressiveThreshold"),A=this.get("largeThreshold");return A>R&&(R=A),R},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});X.exports=F},19489:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(31879),T=e(48070),D=e(43100),b=D.setLabel,C=e(56785),f=e(68626),v=e(54904),m=e(27146),o=e(1655),u=o.throttle,l=e(29686),r=l.createClipPath,s=e(45507),c=["itemStyle","barBorderWidth"],x=[0,0];A.extend(C.prototype,f);function a(Z,U){var H=Z.getArea&&Z.getArea();if(Z.type==="cartesian2d"){var V=Z.getBaseAxis();if(V.type!=="category"||!V.onBand){var Y=U.getLayout("bandWidth");V.isHorizontal()?(H.x-=Y,H.width+=Y*2):(H.y-=Y,H.height+=Y*2)}}return H}var i=R.extendChartView({type:"bar",render:function(Z,U,H){this._updateDrawMode(Z);var V=Z.get("coordinateSystem");return(V==="cartesian2d"||V==="polar")&&(this._isLargeDraw?this._renderLarge(Z,U,H):this._renderNormal(Z,U,H)),this.group},incrementalPrepareRender:function(Z,U,H){this._clear(),this._updateDrawMode(Z)},incrementalRender:function(Z,U,H,V){this._incrementalRenderLarge(Z,U)},_updateDrawMode:function(Z){var U=Z.pipelineContext.large;(this._isLargeDraw==null||U^this._isLargeDraw)&&(this._isLargeDraw=U,this._clear())},_renderNormal:function(Z,U,H){var V=this.group,Y=Z.getData(),$=this._data,K=Z.coordinateSystem,J=K.getBaseAxis(),Q;K.type==="cartesian2d"?Q=J.isHorizontal():K.type==="polar"&&(Q=J.dim==="angle");var et=Z.isAnimationEnabled()?Z:null,nt=Z.get("clip",!0),st=a(K,Y);V.removeClipPath();var ut=Z.get("roundCap",!0),rt=Z.get("showBackground",!0),ht=Z.getModel("backgroundStyle"),Pt=ht.get("barBorderRadius")||0,wt=[],At=this._backgroundEls||[],Nt=function(Tt){var mt=w[K.type](Y,Tt),Ft=W(K,Q,mt);return Ft.useStyle(ht.getBarItemStyle()),K.type==="cartesian2d"&&Ft.setShape("r",Pt),wt[Tt]=Ft,Ft};Y.diff($).add(function(Tt){var mt=Y.getItemModel(Tt),Ft=w[K.type](Y,Tt,mt);if(rt&&Nt(Tt),!!Y.hasValue(Tt)){if(nt){var ct=g[K.type](st,Ft);if(ct){V.remove(vt);return}}var vt=d[K.type](Tt,Ft,Q,et,!1,ut);Y.setItemGraphicEl(Tt,vt),V.add(vt),O(vt,Y,Tt,mt,Ft,Z,Q,K.type==="polar")}}).update(function(Tt,mt){var Ft=Y.getItemModel(Tt),ct=w[K.type](Y,Tt,Ft);if(rt){var vt;At.length===0?vt=Nt(mt):(vt=At[mt],vt.useStyle(ht.getBarItemStyle()),K.type==="cartesian2d"&&vt.setShape("r",Pt),wt[Tt]=vt);var Dt=w[K.type](Y,Tt),Ct=G(Q,Dt,K);T.updateProps(vt,{shape:Ct},et,Tt)}var jt=$.getItemGraphicEl(mt);if(!Y.hasValue(Tt)){V.remove(jt);return}if(nt){var zt=g[K.type](st,ct);if(zt){V.remove(jt);return}}jt?T.updateProps(jt,{shape:ct},et,Tt):jt=d[K.type](Tt,ct,Q,et,!0,ut),Y.setItemGraphicEl(Tt,jt),V.add(jt),O(jt,Y,Tt,Ft,ct,Z,Q,K.type==="polar")}).remove(function(Tt){var mt=$.getItemGraphicEl(Tt);K.type==="cartesian2d"?mt&&y(Tt,et,mt):mt&&p(Tt,et,mt)}).execute();var Lt=this._backgroundGroup||(this._backgroundGroup=new m);Lt.removeAll();for(var Rt=0;Rt<wt.length;++Rt)Lt.add(wt[Rt]);V.add(Lt),this._backgroundEls=wt,this._data=Y},_renderLarge:function(Z,U,H){this._clear(),P(Z,this.group);var V=Z.get("clip",!0)?r(Z.coordinateSystem,!1,Z):null;V?this.group.setClipPath(V):this.group.removeClipPath()},_incrementalRenderLarge:function(Z,U){this._removeBackground(),P(U,this.group,!0)},dispose:A.noop,remove:function(Z){this._clear(Z)},_clear:function(Z){var U=this.group,H=this._data;Z&&Z.get("animation")&&H&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],H.eachItemGraphicEl(function(V){V.type==="sector"?p(V.dataIndex,Z,V):y(V.dataIndex,Z,V)})):U.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}}),n=Math.max,h=Math.min,g={cartesian2d:function(Z,U){var H=U.width<0?-1:1,V=U.height<0?-1:1;H<0&&(U.x+=U.width,U.width=-U.width),V<0&&(U.y+=U.height,U.height=-U.height);var Y=n(U.x,Z.x),$=h(U.x+U.width,Z.x+Z.width),K=n(U.y,Z.y),J=h(U.y+U.height,Z.y+Z.height);U.x=Y,U.y=K,U.width=$-Y,U.height=J-K;var Q=U.width<0||U.height<0;return H<0&&(U.x+=U.width,U.width=-U.width),V<0&&(U.y+=U.height,U.height=-U.height),Q},polar:function(Z,U){var H=U.r0<=U.r?1:-1;if(H<0){var V=U.r;U.r=U.r0,U.r0=V}var V=h(U.r,Z.r),Y=n(U.r0,Z.r0);U.r=V,U.r0=Y;var $=V-Y<0;if(H<0){var V=U.r;U.r=U.r0,U.r0=V}return $}},d={cartesian2d:function(Z,U,H,V,Y){var $=new T.Rect({shape:A.extend({},U),z2:1});if($.name="item",V){var K=$.shape,J=H?"height":"width",Q={};K[J]=0,Q[J]=U[J],T[Y?"updateProps":"initProps"]($,{shape:Q},V,Z)}return $},polar:function(Z,U,H,V,Y,$){var K=U.startAngle<U.endAngle,J=!H&&$?s:T.Sector,Q=new J({shape:A.defaults({clockwise:K},U),z2:1});if(Q.name="item",V){var et=Q.shape,nt=H?"r":"endAngle",st={};et[nt]=H?0:U.startAngle,st[nt]=U[nt],T[Y?"updateProps":"initProps"](Q,{shape:st},V,Z)}return Q}};function y(Z,U,H){H.style.text=null,T.updateProps(H,{shape:{width:0}},U,Z,function(){H.parent&&H.parent.remove(H)})}function p(Z,U,H){H.style.text=null,T.updateProps(H,{shape:{r:H.shape.r0}},U,Z,function(){H.parent&&H.parent.remove(H)})}var w={cartesian2d:function(Z,U,H){var V=Z.getItemLayout(U),Y=H?B(H,V):0,$=V.width>0?1:-1,K=V.height>0?1:-1;return{x:V.x+$*Y/2,y:V.y+K*Y/2,width:V.width-$*Y,height:V.height-K*Y}},polar:function(Z,U,H){var V=Z.getItemLayout(U);return{cx:V.cx,cy:V.cy,r0:V.r0,r:V.r,startAngle:V.startAngle,endAngle:V.endAngle}}};function S(Z){return Z.startAngle!=null&&Z.endAngle!=null&&Z.startAngle===Z.endAngle}function O(Z,U,H,V,Y,$,K,J){var Q=U.getItemVisual(H,"color"),et=U.getItemVisual(H,"opacity"),nt=U.getVisual("borderColor"),st=V.getModel("itemStyle"),ut=V.getModel("emphasis.itemStyle").getBarItemStyle();J||Z.setShape("r",st.get("barBorderRadius")||0),Z.useStyle(A.defaults({stroke:S(Y)?"none":nt,fill:S(Y)?"none":Q,opacity:et},st.getBarItemStyle()));var rt=V.getShallow("cursor");rt&&Z.attr("cursor",rt);var ht=K?Y.height>0?"bottom":"top":Y.width>0?"left":"right";J||b(Z.style,ut,V,Q,$,H,ht),S(Y)&&(ut.fill=ut.stroke="none"),T.setHoverStyle(Z,ut)}function B(Z,U){var H=Z.get(c)||0,V=isNaN(U.width)?Number.MAX_VALUE:Math.abs(U.width),Y=isNaN(U.height)?Number.MAX_VALUE:Math.abs(U.height);return Math.min(H,V,Y)}var k=v.extend({type:"largeBar",shape:{points:[]},buildPath:function(Z,U){for(var H=U.points,V=this.__startPoint,Y=this.__baseDimIdx,$=0;$<H.length;$+=2)V[Y]=H[$+Y],Z.moveTo(V[0],V[1]),Z.lineTo(H[$],H[$+1])}});function P(Z,U,H){var V=Z.getData(),Y=[],$=V.getLayout("valueAxisHorizontal")?1:0;Y[1-$]=V.getLayout("valueAxisStart");var K=V.getLayout("largeDataIndices"),J=V.getLayout("barWidth"),Q=Z.getModel("backgroundStyle"),et=Z.get("showBackground",!0);if(et){var nt=V.getLayout("largeBackgroundPoints"),st=[];st[1-$]=V.getLayout("backgroundStart");var ut=new k({shape:{points:nt},incremental:!!H,__startPoint:st,__baseDimIdx:$,__largeDataIndices:K,__barWidth:J,silent:!0,z2:0});I(ut,Q,V),U.add(ut)}var rt=new k({shape:{points:V.getLayout("largePoints")},incremental:!!H,__startPoint:Y,__baseDimIdx:$,__largeDataIndices:K,__barWidth:J});U.add(rt),N(rt,Z,V),rt.seriesIndex=Z.seriesIndex,Z.get("silent")||(rt.on("mousedown",L),rt.on("mousemove",L))}var L=u(function(Z){var U=this,H=E(U,Z.offsetX,Z.offsetY);U.dataIndex=H>=0?H:null},30,!1);function E(Z,U,H){var V=Z.__baseDimIdx,Y=1-V,$=Z.shape.points,K=Z.__largeDataIndices,J=Math.abs(Z.__barWidth/2),Q=Z.__startPoint[Y];x[0]=U,x[1]=H;for(var et=x[V],nt=x[1-V],st=et-J,ut=et+J,rt=0,ht=$.length/2;rt<ht;rt++){var Pt=rt*2,wt=$[Pt+V],At=$[Pt+Y];if(wt>=st&&wt<=ut&&(Q<=At?nt>=Q&&nt<=At:nt>=At&&nt<=Q))return K[rt]}return-1}function N(Z,U,H){var V=H.getVisual("borderColor")||H.getVisual("color"),Y=U.getModel("itemStyle").getItemStyle(["color","borderColor"]);Z.useStyle(Y),Z.style.fill=null,Z.style.stroke=V,Z.style.lineWidth=H.getLayout("barWidth")}function I(Z,U,H){var V=U.get("borderColor")||U.get("color"),Y=U.getItemStyle(["color","borderColor"]);Z.useStyle(Y),Z.style.fill=null,Z.style.stroke=V,Z.style.lineWidth=H.getLayout("barWidth")}function G(Z,U,H){var V,Y=H.type==="polar";return Y?V=H.getArea():V=H.grid.getRect(),Y?{cx:V.cx,cy:V.cy,r0:Z?V.r0:U.r0,r:Z?V.r:U.r,startAngle:Z?U.startAngle:0,endAngle:Z?U.endAngle:Math.PI*2}:{x:Z?U.x:V.x,y:Z?V.y:U.y,width:Z?U.width:V.width,height:Z?V.height:U.height}}function W(Z,U,H){var V=Z.type==="polar"?T.Sector:T.Rect;return new V({shape:G(U,H,Z),silent:!0,z2:0})}X.exports=i},32400:function(X,z,e){var M=e(2365),F=e(1664),R=M.extend({type:"series.__base_bar__",getInitialData:function(A,T){return F(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(A){var T=this.coordinateSystem;if(T){var D=T.dataToPoint(T.clampData(A)),b=this.getData(),C=b.getLayout("offset"),f=b.getLayout("size"),v=T.getBaseAxis().isHorizontal()?0:1;return D[v]+=C+f/2,D}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});X.exports=R},63908:function(X,z,e){var M=e(32400),F=M.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(A){return A.stack=null,F.superApply(this,"getInitialData",arguments)}}),R=F;X.exports=R},96736:function(X,z,e){var M=e(3440),F=e(31879),R=e(48070),A=e(35730),T=A.createSymbol,D=e(48354),b=D.parsePercent,C=D.isNumeric,f=e(43100),v=f.setLabel,m=["itemStyle","borderWidth"],o=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],u=new R.Circle,l=M.extendChartView({type:"pictorialBar",render:function(Z,U,H){var V=this.group,Y=Z.getData(),$=this._data,K=Z.coordinateSystem,J=K.getBaseAxis(),Q=!!J.isHorizontal(),et=K.grid.getRect(),nt={ecSize:{width:H.getWidth(),height:H.getHeight()},seriesModel:Z,coordSys:K,coordSysExtent:[[et.x,et.x+et.width],[et.y,et.y+et.height]],isHorizontal:Q,valueDim:o[+Q],categoryDim:o[1-Q]};return Y.diff($).add(function(st){if(Y.hasValue(st)){var ut=p(Y,st),rt=r(Y,st,ut,nt),ht=B(Y,nt,rt);Y.setItemGraphicEl(st,ht),V.add(ht),I(ht,nt,rt)}}).update(function(st,ut){var rt=$.getItemGraphicEl(ut);if(!Y.hasValue(st)){V.remove(rt);return}var ht=p(Y,st),Pt=r(Y,st,ht,nt),wt=L(Y,Pt);rt&&wt!==rt.__pictorialShapeStr&&(V.remove(rt),Y.setItemGraphicEl(st,null),rt=null),rt?k(rt,nt,Pt):rt=B(Y,nt,Pt,!0),Y.setItemGraphicEl(st,rt),rt.__pictorialSymbolMeta=Pt,V.add(rt),I(rt,nt,Pt)}).remove(function(st){var ut=$.getItemGraphicEl(st);ut&&P($,st,ut.__pictorialSymbolMeta.animationModel,ut)}).execute(),this._data=Y,this.group},dispose:F.noop,remove:function(Z,U){var H=this.group,V=this._data;Z.get("animation")?V&&V.eachItemGraphicEl(function(Y){P(V,Y.dataIndex,Z,Y)}):H.removeAll()}});function r(Z,U,H,V){var Y=Z.getItemLayout(U),$=H.get("symbolRepeat"),K=H.get("symbolClip"),J=H.get("symbolPosition")||"start",Q=H.get("symbolRotate"),et=(Q||0)*Math.PI/180||0,nt=H.get("symbolPatternSize")||2,st=H.isAnimationEnabled(),ut={dataIndex:U,layout:Y,itemModel:H,symbolType:Z.getItemVisual(U,"symbol")||"circle",color:Z.getItemVisual(U,"color"),symbolClip:K,symbolRepeat:$,symbolRepeatDirection:H.get("symbolRepeatDirection"),symbolPatternSize:nt,rotation:et,animationModel:st?H:null,hoverAnimation:st&&H.get("hoverAnimation"),z2:H.getShallow("z",!0)||0};s(H,$,Y,V,ut),x(Z,U,Y,$,K,ut.boundingLength,ut.pxSign,nt,V,ut),a(H,ut.symbolScale,et,V,ut);var rt=ut.symbolSize,ht=H.get("symbolOffset");return F.isArray(ht)&&(ht=[b(ht[0],rt[0]),b(ht[1],rt[1])]),i(H,rt,Y,$,K,ht,J,ut.valueLineWidth,ut.boundingLength,ut.repeatCutLength,V,ut),ut}function s(Z,U,H,V,Y){var $=V.valueDim,K=Z.get("symbolBoundingData"),J=V.coordSys.getOtherAxis(V.coordSys.getBaseAxis()),Q=J.toGlobalCoord(J.dataToCoord(0)),et=1-+(H[$.wh]<=0),nt;if(F.isArray(K)){var st=[c(J,K[0])-Q,c(J,K[1])-Q];st[1]<st[0]&&st.reverse(),nt=st[et]}else K!=null?nt=c(J,K)-Q:U?nt=V.coordSysExtent[$.index][et]-Q:nt=H[$.wh];Y.boundingLength=nt,U&&(Y.repeatCutLength=H[$.wh]),Y.pxSign=nt>0?1:nt<0?-1:0}function c(Z,U){return Z.toGlobalCoord(Z.dataToCoord(Z.scale.parse(U)))}function x(Z,U,H,V,Y,$,K,J,Q,et){var nt=Q.valueDim,st=Q.categoryDim,ut=Math.abs(H[st.wh]),rt=Z.getItemVisual(U,"symbolSize");F.isArray(rt)?rt=rt.slice():(rt==null&&(rt="100%"),rt=[rt,rt]),rt[st.index]=b(rt[st.index],ut),rt[nt.index]=b(rt[nt.index],V?ut:Math.abs($)),et.symbolSize=rt;var ht=et.symbolScale=[rt[0]/J,rt[1]/J];ht[nt.index]*=(Q.isHorizontal?-1:1)*K}function a(Z,U,H,V,Y){var $=Z.get(m)||0;$&&(u.attr({scale:U.slice(),rotation:H}),u.updateTransform(),$/=u.getLineScale(),$*=U[V.valueDim.index]),Y.valueLineWidth=$}function i(Z,U,H,V,Y,$,K,J,Q,et,nt,st){var ut=nt.categoryDim,rt=nt.valueDim,ht=st.pxSign,Pt=Math.max(U[rt.index]+J,0),wt=Pt;if(V){var At=Math.abs(Q),Nt=F.retrieve(Z.get("symbolMargin"),"15%")+"",Lt=!1;Nt.lastIndexOf("!")===Nt.length-1&&(Lt=!0,Nt=Nt.slice(0,Nt.length-1)),Nt=b(Nt,U[rt.index]);var Rt=Math.max(Pt+Nt*2,0),Tt=Lt?0:Nt*2,mt=C(V),Ft=mt?V:G((At+Tt)/Rt),ct=At-Ft*Pt;Nt=ct/2/(Lt?Ft:Ft-1),Rt=Pt+Nt*2,Tt=Lt?0:Nt*2,!mt&&V!=="fixed"&&(Ft=et?G((Math.abs(et)+Tt)/Rt):0),wt=Ft*Rt-Tt,st.repeatTimes=Ft,st.symbolMargin=Nt}var vt=ht*(wt/2),Dt=st.pathPosition=[];Dt[ut.index]=H[ut.wh]/2,Dt[rt.index]=K==="start"?vt:K==="end"?Q-vt:Q/2,$&&(Dt[0]+=$[0],Dt[1]+=$[1]);var Ct=st.bundlePosition=[];Ct[ut.index]=H[ut.xy],Ct[rt.index]=H[rt.xy];var jt=st.barRectShape=F.extend({},H);jt[rt.wh]=ht*Math.max(Math.abs(H[rt.wh]),Math.abs(Dt[rt.index]+vt)),jt[ut.wh]=H[ut.wh];var zt=st.clipShape={};zt[ut.xy]=-H[ut.xy],zt[ut.wh]=nt.ecSize[ut.wh],zt[rt.xy]=0,zt[rt.wh]=H[rt.wh]}function n(Z){var U=Z.symbolPatternSize,H=T(Z.symbolType,-U/2,-U/2,U,U,Z.color);return H.attr({culling:!0}),H.type!=="image"&&H.setStyle({strokeNoScale:!0}),H}function h(Z,U,H,V){var Y=Z.__pictorialBundle,$=H.symbolSize,K=H.valueLineWidth,J=H.pathPosition,Q=U.valueDim,et=H.repeatTimes||0,nt=0,st=$[U.valueDim.index]+K+H.symbolMargin*2;for(E(Z,function(At){At.__pictorialAnimationIndex=nt,At.__pictorialRepeatTimes=et,nt<et?N(At,null,ht(nt),H,V):N(At,null,{scale:[0,0]},H,V,function(){Y.remove(At)}),O(At,H),nt++});nt<et;nt++){var ut=n(H);ut.__pictorialAnimationIndex=nt,ut.__pictorialRepeatTimes=et,Y.add(ut);var rt=ht(nt);N(ut,{position:rt.position,scale:[0,0]},{scale:rt.scale,rotation:rt.rotation},H,V),ut.on("mouseover",Pt).on("mouseout",wt),O(ut,H)}function ht(At){var Nt=J.slice(),Lt=H.pxSign,Rt=At;return(H.symbolRepeatDirection==="start"?Lt>0:Lt<0)&&(Rt=et-1-At),Nt[Q.index]=st*(Rt-et/2+.5)+J[Q.index],{position:Nt,scale:H.symbolScale.slice(),rotation:H.rotation}}function Pt(){E(Z,function(At){At.trigger("emphasis")})}function wt(){E(Z,function(At){At.trigger("normal")})}}function g(Z,U,H,V){var Y=Z.__pictorialBundle,$=Z.__pictorialMainPath;$?N($,null,{position:H.pathPosition.slice(),scale:H.symbolScale.slice(),rotation:H.rotation},H,V):($=Z.__pictorialMainPath=n(H),Y.add($),N($,{position:H.pathPosition.slice(),scale:[0,0],rotation:H.rotation},{scale:H.symbolScale.slice()},H,V),$.on("mouseover",K).on("mouseout",J)),O($,H);function K(){this.trigger("emphasis")}function J(){this.trigger("normal")}}function d(Z,U,H){var V=F.extend({},U.barRectShape),Y=Z.__pictorialBarRect;Y?N(Y,null,{shape:V},U,H):(Y=Z.__pictorialBarRect=new R.Rect({z2:2,shape:V,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),Z.add(Y))}function y(Z,U,H,V){if(H.symbolClip){var Y=Z.__pictorialClipPath,$=F.extend({},H.clipShape),K=U.valueDim,J=H.animationModel,Q=H.dataIndex;if(Y)R.updateProps(Y,{shape:$},J,Q);else{$[K.wh]=0,Y=new R.Rect({shape:$}),Z.__pictorialBundle.setClipPath(Y),Z.__pictorialClipPath=Y;var et={};et[K.wh]=H.clipShape[K.wh],R[V?"updateProps":"initProps"](Y,{shape:et},J,Q)}}}function p(Z,U){var H=Z.getItemModel(U);return H.getAnimationDelayParams=w,H.isAnimationEnabled=S,H}function w(Z){return{index:Z.__pictorialAnimationIndex,count:Z.__pictorialRepeatTimes}}function S(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function O(Z,U){Z.off("emphasis").off("normal");var H=U.symbolScale.slice();U.hoverAnimation&&Z.on("emphasis",function(){this.animateTo({scale:[H[0]*1.1,H[1]*1.1]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:H.slice()},400,"elasticOut")})}function B(Z,U,H,V){var Y=new R.Group,$=new R.Group;return Y.add($),Y.__pictorialBundle=$,$.attr("position",H.bundlePosition.slice()),H.symbolRepeat?h(Y,U,H):g(Y,U,H),d(Y,H,V),y(Y,U,H,V),Y.__pictorialShapeStr=L(Z,H),Y.__pictorialSymbolMeta=H,Y}function k(Z,U,H){var V=H.animationModel,Y=H.dataIndex,$=Z.__pictorialBundle;R.updateProps($,{position:H.bundlePosition.slice()},V,Y),H.symbolRepeat?h(Z,U,H,!0):g(Z,U,H,!0),d(Z,H,!0),y(Z,U,H,!0)}function P(Z,U,H,V){var Y=V.__pictorialBarRect;Y&&(Y.style.text=null);var $=[];E(V,function(K){$.push(K)}),V.__pictorialMainPath&&$.push(V.__pictorialMainPath),V.__pictorialClipPath&&(H=null),F.each($,function(K){R.updateProps(K,{scale:[0,0]},H,U,function(){V.parent&&V.parent.remove(V)})}),Z.setItemGraphicEl(U,null)}function L(Z,U){return[Z.getItemVisual(U.dataIndex,"symbol")||"none",!!U.symbolRepeat,!!U.symbolClip].join(":")}function E(Z,U,H){F.each(Z.__pictorialBundle.children(),function(V){V!==Z.__pictorialBarRect&&U.call(H,V)})}function N(Z,U,H,V,Y,$){U&&Z.attr(U),V.symbolClip&&!Y?H&&Z.attr(H):H&&R[Y?"updateProps":"initProps"](Z,H,V.animationModel,V.dataIndex,$)}function I(Z,U,H){var V=H.color,Y=H.dataIndex,$=H.itemModel,K=$.getModel("itemStyle").getItemStyle(["color"]),J=$.getModel("emphasis.itemStyle").getItemStyle(),Q=$.getShallow("cursor");E(Z,function(ut){ut.setColor(V),ut.setStyle(F.defaults({fill:V,opacity:H.opacity},K)),R.setHoverStyle(ut,J),Q&&(ut.cursor=Q),ut.z2=H.z2});var et={},nt=U.valueDim.posDesc[+(H.boundingLength>0)],st=Z.__pictorialBarRect;v(st.style,et,$,V,U.seriesModel,Y,nt),R.setHoverStyle(st,et)}function G(Z){var U=Math.round(Z);return Math.abs(Z-U)<1e-4?U:Math.ceil(Z)}var W=l;X.exports=W},68626:function(X,z,e){var M=e(69003),F=M([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),R={getBarItemStyle:function(A){var T=F(this,A);if(this.getBorderLineDash){var D=this.getBorderLineDash();D&&(T.lineDash=D)}return T}};X.exports=R},43100:function(X,z,e){var M=e(48070),F=e(3768),R=F.getDefaultLabel;function A(D,b,C,f,v,m,o){var u=C.getModel("label"),l=C.getModel("emphasis.label");M.setLabelStyle(D,b,u,l,{labelFetcher:v,labelDataIndex:m,defaultText:R(v.getData(),m),isRectText:!0,autoColor:f}),T(D),T(b)}function T(D,b){D.textPosition==="outside"&&(D.textPosition=b)}z.setLabel=A},30988:function(X,z,e){var M=e(3440);e(73394),e(13599);var F=e(86437),R=e(36988);M.registerVisual(F),M.registerLayout(R)},73394:function(X,z,e){var M=e(31879),F=e(2365),R=e(89184),A=R.seriesModelMixin,T=F.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});M.mixin(T,A,!0);var D=T;X.exports=D},13599:function(X,z,e){var M=e(31879),F=e(1911),R=e(48070),A=e(54904),T=["itemStyle"],D=["emphasis","itemStyle"],b=F.extend({type:"boxplot",render:function(u,l,r){var s=u.getData(),c=this.group,x=this._data;this._data||c.removeAll();var a=u.get("layout")==="horizontal"?1:0;s.diff(x).add(function(i){if(s.hasValue(i)){var n=s.getItemLayout(i),h=f(n,s,i,a,!0);s.setItemGraphicEl(i,h),c.add(h)}}).update(function(i,n){var h=x.getItemGraphicEl(n);if(!s.hasValue(i)){c.remove(h);return}var g=s.getItemLayout(i);h?v(g,h,s,i):h=f(g,s,i,a),c.add(h),s.setItemGraphicEl(i,h)}).remove(function(i){var n=x.getItemGraphicEl(i);n&&c.remove(n)}).execute(),this._data=s},remove:function(u){var l=this.group,r=this._data;this._data=null,r&&r.eachItemGraphicEl(function(s){s&&l.remove(s)})},dispose:M.noop}),C=A.extend({type:"boxplotBoxPath",shape:{},buildPath:function(u,l){var r=l.points,s=0;for(u.moveTo(r[s][0],r[s][1]),s++;s<4;s++)u.lineTo(r[s][0],r[s][1]);for(u.closePath();s<r.length;s++)u.moveTo(r[s][0],r[s][1]),s++,u.lineTo(r[s][0],r[s][1])}});function f(u,l,r,s,c){var x=u.ends,a=new C({shape:{points:c?m(x,s,u):x}});return v(u,a,l,r,c),a}function v(u,l,r,s,c){var x=r.hostModel,a=R[c?"initProps":"updateProps"];a(l,{shape:{points:u.ends}},x,s);var i=r.getItemModel(s),n=i.getModel(T),h=r.getItemVisual(s,"color"),g=n.getItemStyle(["borderColor"]);g.stroke=h,g.strokeNoScale=!0,l.useStyle(g),l.z2=100;var d=i.getModel(D).getItemStyle();R.setHoverStyle(l,d)}function m(u,l,r){return M.map(u,function(s){return s=s.slice(),s[l]=r.initBaseline,s})}var o=b;X.exports=o},36988:function(X,z,e){var M=e(31879),F=e(48354),R=F.parsePercent,A=M.each;function T(f){var v=D(f);A(v,function(m){var o=m.seriesModels;o.length&&(b(m),A(o,function(u,l){C(u,m.boxOffsetList[l],m.boxWidthList[l])}))})}function D(f){var v=[],m=[];return f.eachSeriesByType("boxplot",function(o){var u=o.getBaseAxis(),l=M.indexOf(m,u);l<0&&(l=m.length,m[l]=u,v[l]={axis:u,seriesModels:[]}),v[l].seriesModels.push(o)}),v}function b(f){var v,m=f.axis,o=f.seriesModels,u=o.length,l=f.boxWidthList=[],r=f.boxOffsetList=[],s=[],c;if(m.type==="category")c=m.getBandWidth();else{var x=0;A(o,function(g){x=Math.max(x,g.getData().count())}),v=m.getExtent(),Math.abs(v[1]-v[0])/x}A(o,function(g){var d=g.get("boxWidth");M.isArray(d)||(d=[d,d]),s.push([R(d[0],c)||0,R(d[1],c)||0])});var a=c*.8-2,i=a/u*.3,n=(a-i*(u-1))/u,h=n/2-a/2;A(o,function(g,d){r.push(h),h+=i+n,l.push(Math.min(Math.max(n,s[d][0]),s[d][1]))})}function C(f,v,m){var o=f.coordinateSystem,u=f.getData(),l=m/2,r=f.get("layout")==="horizontal"?0:1,s=1-r,c=["x","y"],x=u.mapDimension(c[r]),a=u.mapDimension(c[s],!0);if(x==null||a.length<5)return;for(var i=0;i<u.count();i++){var n=u.get(x,i),h=S(n,a[2],i),g=S(n,a[0],i),d=S(n,a[1],i),y=S(n,a[3],i),p=S(n,a[4],i),w=[];O(w,d,0),O(w,y,1),w.push(g,d,p,y),B(w,g),B(w,p),B(w,h),u.setItemLayout(i,{initBaseline:h[s],ends:w})}function S(k,P,L){var E=u.get(P,L),N=[];N[r]=k,N[s]=E;var I;return isNaN(k)||isNaN(E)?I=[NaN,NaN]:(I=o.dataToPoint(N),I[r]+=v),I}function O(k,P,L){var E=P.slice(),N=P.slice();E[r]+=l,N[r]-=l,L?k.push(E,N):k.push(N,E)}function B(k,P){var L=P.slice(),E=P.slice();L[r]-=l,E[r]+=l,k.push(L,E)}}X.exports=T},86437:function(X){var z=["itemStyle","borderColor"];function e(M,F){var R=M.get("color");M.eachRawSeriesByType("boxplot",function(A){var T=R[A.seriesIndex%R.length],D=A.getData();D.setVisual({legendSymbol:"roundRect",color:A.get(z)||T}),M.isSeriesFiltered(A)||D.each(function(b){var C=D.getItemModel(b);D.setItemVisual(b,{color:C.get(z,!0)})})})}X.exports=e},706:function(X,z,e){var M=e(3440);e(24577),e(25587);var F=e(54134),R=e(61341),A=e(69904);M.registerPreprocessor(F),M.registerVisual(R),M.registerLayout(A)},24577:function(X,z,e){var M=e(31879),F=e(2365),R=e(89184),A=R.seriesModelMixin,T=F.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(b,C,f){var v=C.getItemLayout(b);return v&&f.rect(v.brushRect)}});M.mixin(T,A,!0);var D=T;X.exports=D},25587:function(X,z,e){var M=e(31879),F=e(1911),R=e(48070),A=e(54904),T=e(29686),D=T.createClipPath,b=["itemStyle"],C=["emphasis","itemStyle"],f=["color","color0","borderColor","borderColor0"],v=F.extend({type:"candlestick",render:function(i,n,h){this.group.removeClipPath(),this._updateDrawMode(i),this._isLargeDraw?this._renderLarge(i):this._renderNormal(i)},incrementalPrepareRender:function(i,n,h){this._clear(),this._updateDrawMode(i)},incrementalRender:function(i,n,h,g){this._isLargeDraw?this._incrementalRenderLarge(i,n):this._incrementalRenderNormal(i,n)},_updateDrawMode:function(i){var n=i.pipelineContext.large;(this._isLargeDraw==null||n^this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},_renderNormal:function(i){var n=i.getData(),h=this._data,g=this.group,d=n.getLayout("isSimpleBox"),y=i.get("clip",!0),p=i.coordinateSystem,w=p.getArea&&p.getArea();this._data||g.removeAll(),n.diff(h).add(function(S){if(n.hasValue(S)){var O,B=n.getItemLayout(S);if(y&&u(w,B))return;O=o(B,S,!0),R.initProps(O,{shape:{points:B.ends}},i,S),l(O,n,S,d),g.add(O),n.setItemGraphicEl(S,O)}}).update(function(S,O){var B=h.getItemGraphicEl(O);if(!n.hasValue(S)){g.remove(B);return}var k=n.getItemLayout(S);if(y&&u(w,k)){g.remove(B);return}B?R.updateProps(B,{shape:{points:k.ends}},i,S):B=o(k,S),l(B,n,S,d),g.add(B),n.setItemGraphicEl(S,B)}).remove(function(S){var O=h.getItemGraphicEl(S);O&&g.remove(O)}).execute(),this._data=n},_renderLarge:function(i){this._clear(),c(i,this.group);var n=i.get("clip",!0)?D(i.coordinateSystem,!1,i):null;n?this.group.setClipPath(n):this.group.removeClipPath()},_incrementalRenderNormal:function(i,n){for(var h=n.getData(),g=h.getLayout("isSimpleBox"),d;(d=i.next())!=null;){var y,p=h.getItemLayout(d);y=o(p,d),l(y,h,d,g),y.incremental=!0,this.group.add(y)}},_incrementalRenderLarge:function(i,n){c(n,this.group,!0)},remove:function(i){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:M.noop}),m=A.extend({type:"normalCandlestickBox",shape:{},buildPath:function(i,n){var h=n.points;this.__simpleBox?(i.moveTo(h[4][0],h[4][1]),i.lineTo(h[6][0],h[6][1])):(i.moveTo(h[0][0],h[0][1]),i.lineTo(h[1][0],h[1][1]),i.lineTo(h[2][0],h[2][1]),i.lineTo(h[3][0],h[3][1]),i.closePath(),i.moveTo(h[4][0],h[4][1]),i.lineTo(h[5][0],h[5][1]),i.moveTo(h[6][0],h[6][1]),i.lineTo(h[7][0],h[7][1]))}});function o(i,n,h){var g=i.ends;return new m({shape:{points:h?r(g,i):g},z2:100})}function u(i,n){for(var h=!0,g=0;g<n.ends.length;g++)if(i.contain(n.ends[g][0],n.ends[g][1])){h=!1;break}return h}function l(i,n,h,g){var d=n.getItemModel(h),y=d.getModel(b),p=n.getItemVisual(h,"color"),w=n.getItemVisual(h,"borderColor")||p,S=y.getItemStyle(f);i.useStyle(S),i.style.strokeNoScale=!0,i.style.fill=p,i.style.stroke=w,i.__simpleBox=g;var O=d.getModel(C).getItemStyle();R.setHoverStyle(i,O)}function r(i,n){return M.map(i,function(h){return h=h.slice(),h[1]=n.initBaseline,h})}var s=A.extend({type:"largeCandlestickBox",shape:{},buildPath:function(i,n){for(var h=n.points,g=0;g<h.length;)if(this.__sign===h[g++]){var d=h[g++];i.moveTo(d,h[g++]),i.lineTo(d,h[g++])}else g+=3}});function c(i,n,h){var g=i.getData(),d=g.getLayout("largePoints"),y=new s({shape:{points:d},__sign:1});n.add(y);var p=new s({shape:{points:d},__sign:-1});n.add(p),x(1,y,i,g),x(-1,p,i,g),h&&(y.incremental=!0,p.incremental=!0)}function x(i,n,h,g){var d=i>0?"P":"N",y=g.getVisual("borderColor"+d)||g.getVisual("color"+d),p=h.getModel(b).getItemStyle(f);n.useStyle(p),n.style.fill=null,n.style.stroke=y}var a=v;X.exports=a},69904:function(X,z,e){var M=e(48070),F=M.subPixelOptimize,R=e(50629),A=e(48354),T=A.parsePercent,D=e(31879),b=D.retrieve2,C=typeof Float32Array<"u"?Float32Array:Array,f={seriesType:"candlestick",plan:R(),reset:function(o){var u=o.coordinateSystem,l=o.getData(),r=m(o,l),s=0,c=1,x=["x","y"],a=l.mapDimension(x[s]),i=l.mapDimension(x[c],!0),n=i[0],h=i[1],g=i[2],d=i[3];if(l.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),a==null||i.length<4)return;return{progress:o.pipelineContext.large?p:y};function y(w,S){for(var O;(O=w.next())!=null;){var B=S.get(a,O),k=S.get(n,O),P=S.get(h,O),L=S.get(g,O),E=S.get(d,O),N=Math.min(k,P),I=Math.max(k,P),G=V(N,B),W=V(I,B),Z=V(L,B),U=V(E,B),H=[];Y(H,W,0),Y(H,G,1),H.push(K(U),K(W),K(Z),K(G)),S.setItemLayout(O,{sign:v(S,O,k,P,h),initBaseline:k>P?W[c]:G[c],ends:H,brushRect:$(L,E,B)})}function V(J,Q){var et=[];return et[s]=Q,et[c]=J,isNaN(Q)||isNaN(J)?[NaN,NaN]:u.dataToPoint(et)}function Y(J,Q,et){var nt=Q.slice(),st=Q.slice();nt[s]=F(nt[s]+r/2,1,!1),st[s]=F(st[s]-r/2,1,!0),et?J.push(nt,st):J.push(st,nt)}function $(J,Q,et){var nt=V(J,et),st=V(Q,et);return nt[s]-=r/2,st[s]-=r/2,{x:nt[0],y:nt[1],width:c?r:st[0]-nt[0],height:c?st[1]-nt[1]:r}}function K(J){return J[s]=F(J[s],1),J}}function p(w,S){for(var O=new C(w.count*4),B=0,k,P=[],L=[],E;(E=w.next())!=null;){var N=S.get(a,E),I=S.get(n,E),G=S.get(h,E),W=S.get(g,E),Z=S.get(d,E);if(isNaN(N)||isNaN(W)||isNaN(Z)){O[B++]=NaN,B+=3;continue}O[B++]=v(S,E,I,G,h),P[s]=N,P[c]=W,k=u.dataToPoint(P,null,L),O[B++]=k?k[0]:NaN,O[B++]=k?k[1]:NaN,P[c]=Z,k=u.dataToPoint(P,null,L),O[B++]=k?k[1]:NaN}S.setLayout("largePoints",O)}}};function v(o,u,l,r,s){var c;return l>r?c=-1:l<r?c=1:c=u>0?o.get(s,u-1)<=r?1:-1:1,c}function m(o,u){var l=o.getBaseAxis(),r,s=l.type==="category"?l.getBandWidth():(r=l.getExtent(),Math.abs(r[1]-r[0])/u.count()),c=T(b(o.get("barMaxWidth"),s),s),x=T(b(o.get("barMinWidth"),1),s),a=o.get("barWidth");return a!=null?T(a,s):Math.max(Math.min(s/2,c),x)}X.exports=f},61341:function(X,z,e){var M=e(50629),F=["itemStyle","borderColor"],R=["itemStyle","borderColor0"],A=["itemStyle","color"],T=["itemStyle","color0"],D={seriesType:"candlestick",plan:M(),performRawSeries:!0,reset:function(b,C){var f=b.getData();if(f.setVisual({legendSymbol:"roundRect",colorP:o(1,b),colorN:o(-1,b),borderColorP:u(1,b),borderColorN:u(-1,b)}),C.isSeriesFiltered(b))return;var v=b.pipelineContext.large;return!v&&{progress:m};function m(l,r){for(var s;(s=l.next())!=null;){var c=r.getItemModel(s),x=r.getItemLayout(s).sign;r.setItemVisual(s,{color:o(x,c),borderColor:u(x,c)})}}function o(l,r){return r.get(l>0?A:T)}function u(l,r){return r.get(l>0?F:R)}}};X.exports=D},54134:function(X,z,e){var M=e(31879);function F(R){!R||!M.isArray(R.series)||M.each(R.series,function(A){M.isObject(A)&&A.type==="k"&&(A.type="candlestick")})}X.exports=F},78029:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(48070),T=e(3768),D=T.getDefaultLabel,b=e(1664),C=e(19641),f=C.getLayoutOnAxis,v=e(65453),m=e(2365),o=e(56785),u=e(1911),l=e(29686),r=l.createClipPath,s=e(73684),c=e(22782),x=e(76966),a=e(94914),i=e(70535),n=A.CACHED_LABEL_STYLE_PROPERTIES,h=["itemStyle"],g=["emphasis","itemStyle"],d=["label"],y=["emphasis","label"],p="e\0\0",w={cartesian2d:s,geo:c,singleAxis:x,polar:a,calendar:i};m.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(K,J){return b(this.getSource(),this)},getDataParams:function(K,J,Q){var et=m.prototype.getDataParams.apply(this,arguments);return Q&&(et.info=Q.info),et}}),u.extend({type:"custom",_data:null,render:function(K,J,Q,et){var nt=this._data,st=K.getData(),ut=this.group,rt=k(K,st,J,Q);st.diff(nt).add(function(Pt){L(null,Pt,rt(Pt,et),K,ut,st)}).update(function(Pt,wt){var At=nt.getItemGraphicEl(wt);L(At,Pt,rt(Pt,et),K,ut,st)}).remove(function(Pt){var wt=nt.getItemGraphicEl(Pt);wt&&ut.remove(wt)}).execute();var ht=K.get("clip",!0)?r(K.coordinateSystem,!1,K):null;ht?ut.setClipPath(ht):ut.removeClipPath(),this._data=st},incrementalPrepareRender:function(K,J,Q){this.group.removeAll(),this._data=null},incrementalRender:function(K,J,Q,et,nt){var st=J.getData(),ut=k(J,st,Q,et);function rt(wt){wt.isGroup||(wt.incremental=!0,wt.useHoverLayer=!0)}for(var ht=K.start;ht<K.end;ht++){var Pt=L(null,ht,ut(ht,nt),J,this.group,st);Pt.traverse(rt)}},dispose:R.noop,filterForExposedEvent:function(K,J,Q,et){var nt=J.element;if(nt==null||Q.name===nt)return!0;for(;(Q=Q.parent)&&Q!==this.group;)if(Q.name===nt)return!0;return!1}});function S(K){var J=K.type,Q;if(J==="path"){var et=K.shape,nt=et.width!=null&&et.height!=null?{x:et.x||0,y:et.y||0,width:et.width,height:et.height}:null,st=V(et);Q=A.makePath(st,null,nt,et.layout||"center"),Q.__customPathData=st}else if(J==="image")Q=new A.Image({}),Q.__customImagePath=K.style.image;else if(J==="text")Q=new A.Text({}),Q.__customText=K.style.text;else if(J==="group")Q=new A.Group;else{if(J==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var ut=A.getShapeClass(J);Q=new ut}return Q.__customGraphicType=J,Q.name=K.name,Q}function O(K,J,Q,et,nt,st,ut){var rt={},ht=Q.style||{};if(Q.shape&&(rt.shape=R.clone(Q.shape)),Q.position&&(rt.position=Q.position.slice()),Q.scale&&(rt.scale=Q.scale.slice()),Q.origin&&(rt.origin=Q.origin.slice()),Q.rotation&&(rt.rotation=Q.rotation),K.type==="image"&&Q.style){var Pt=rt.style={};R.each(["x","y","width","height"],function(Nt){B(Nt,Pt,ht,K.style,st)})}if(K.type==="text"&&Q.style){var Pt=rt.style={};R.each(["x","y"],function(Lt){B(Lt,Pt,ht,K.style,st)}),!ht.hasOwnProperty("textFill")&&ht.fill&&(ht.textFill=ht.fill),!ht.hasOwnProperty("textStroke")&&ht.stroke&&(ht.textStroke=ht.stroke)}if(K.type!=="group"&&(K.useStyle(ht),st)){K.style.opacity=0;var wt=ht.opacity;wt==null&&(wt=1),A.initProps(K,{style:{opacity:wt}},et,J)}st?K.attr(rt):A.updateProps(K,rt,et,J),Q.hasOwnProperty("z2")&&K.attr("z2",Q.z2||0),Q.hasOwnProperty("silent")&&K.attr("silent",Q.silent),Q.hasOwnProperty("invisible")&&K.attr("invisible",Q.invisible),Q.hasOwnProperty("ignore")&&K.attr("ignore",Q.ignore),Q.hasOwnProperty("info")&&K.attr("info",Q.info);var At=Q.styleEmphasis;A.setElementHoverStyle(K,At),ut&&A.setAsHighDownDispatcher(K,At!==!1)}function B(K,J,Q,et,nt){Q[K]!=null&&!nt&&(J[K]=Q[K],Q[K]=et[K])}function k(K,J,Q,et){var nt=K.get("renderItem"),st=K.coordinateSystem,ut={};st&&(ut=st.prepareCustoms?st.prepareCustoms():w[st.type](st));var rt=R.defaults({getWidth:et.getWidth,getHeight:et.getHeight,getZr:et.getZr,getDevicePixelRatio:et.getDevicePixelRatio,value:mt,style:Ft,styleEmphasis:ct,visual:vt,barLayout:Dt,currentSeriesIndices:Ct,font:jt},ut.api||{}),ht={context:{},seriesId:K.id,seriesName:K.name,seriesIndex:K.seriesIndex,coordSys:ut.coordSys,dataInsideLength:J.count(),encode:P(K.getData())},Pt,wt=!0,At,Nt,Lt,Rt;return function(zt,Yt){return Pt=zt,wt=!0,nt&&nt(R.defaults({dataIndexInside:zt,dataIndex:J.getRawIndex(zt),actionType:Yt?Yt.type:null},ht),rt)};function Tt(zt){zt==null&&(zt=Pt),wt&&(At=J.getItemModel(zt),Nt=At.getModel(d),Lt=At.getModel(y),Rt=J.getItemVisual(zt,"color"),wt=!1)}function mt(zt,Yt){return Yt==null&&(Yt=Pt),J.get(J.getDimension(zt||0),Yt)}function Ft(zt,Yt){Yt==null&&(Yt=Pt),Tt(Yt);var Zt=At.getModel(h).getItemStyle();Rt!=null&&(Zt.fill=Rt);var ft=J.getItemVisual(Yt,"opacity");ft!=null&&(Zt.opacity=ft);var gt=zt?Z(zt,Nt):Nt;return A.setTextStyle(Zt,gt,null,{autoColor:Rt,isRectText:!0}),Zt.text=gt.getShallow("show")?R.retrieve2(K.getFormattedLabel(Yt,"normal"),D(J,Yt)):null,zt&&U(Zt,zt),Zt}function ct(zt,Yt){Yt==null&&(Yt=Pt),Tt(Yt);var Zt=At.getModel(g).getItemStyle(),ft=zt?Z(zt,Lt):Lt;return A.setTextStyle(Zt,ft,null,{isRectText:!0},!0),Zt.text=ft.getShallow("show")?R.retrieve3(K.getFormattedLabel(Yt,"emphasis"),K.getFormattedLabel(Yt,"normal"),D(J,Yt)):null,zt&&U(Zt,zt),Zt}function vt(zt,Yt){return Yt==null&&(Yt=Pt),J.getItemVisual(Yt,zt)}function Dt(zt){if(st.getBaseAxis){var Yt=st.getBaseAxis();return f(R.defaults({axis:Yt},zt),et)}}function Ct(){return Q.getCurrentSeriesIndices()}function jt(zt){return A.getFont(zt,Q)}}function P(K){var J={};return R.each(K.dimensions,function(Q,et){var nt=K.getDimensionInfo(Q);if(!nt.isExtraCoord){var st=nt.coordDim,ut=J[st]=J[st]||[];ut[nt.coordDimIndex]=et}}),J}function L(K,J,Q,et,nt,st){return K=E(K,J,Q,et,nt,st,!0),K&&st.setItemGraphicEl(J,K),K}function E(K,J,Q,et,nt,st,ut){var rt=!Q;Q=Q||{};var ht=Q.type,Pt=Q.shape,wt=Q.style;if(K&&(rt||ht!=null&&ht!==K.__customGraphicType||ht==="path"&&Y(Pt)&&V(Pt)!==K.__customPathData||ht==="image"&&$(wt,"image")&&wt.image!==K.__customImagePath||ht==="text"&&$(Pt,"text")&&wt.text!==K.__customText)&&(nt.remove(K),K=null),!rt){var At=!K;return!K&&(K=S(Q)),O(K,J,Q,et,st,At,ut),ht==="group"&&N(K,J,Q,et,st),nt.add(K),K}}function N(K,J,Q,et,nt){var st=Q.children,ut=st?st.length:0,rt=Q.$mergeChildren,ht=rt==="byName"||Q.diffChildrenByName,Pt=rt===!1;if(!(!ut&&!ht&&!Pt)){if(ht){I({oldChildren:K.children()||[],newChildren:st||[],dataIndex:J,animatableModel:et,group:K,data:nt});return}Pt&&K.removeAll();for(var wt=0;wt<ut;wt++)st[wt]&&E(K.childAt(wt),J,st[wt],et,K,nt)}}function I(K){new v(K.oldChildren,K.newChildren,G,G,K).add(W).update(W).remove(H).execute()}function G(K,J){var Q=K&&K.name;return Q??p+J}function W(K,J){var Q=this.context,et=K!=null?Q.newChildren[K]:null,nt=J!=null?Q.oldChildren[J]:null;E(nt,Q.dataIndex,et,Q.animatableModel,Q.group,Q.data)}function Z(K,J){var Q=new o({},J);return R.each(n,function(et,nt){K.hasOwnProperty(et)&&(Q.option[nt]=K[et])}),Q}function U(K,J){for(var Q in J)(J.hasOwnProperty(Q)||!n.hasOwnProperty(Q))&&(K[Q]=J[Q])}function H(K){var J=this.context,Q=J.oldChildren[K];Q&&J.group.remove(Q)}function V(K){return K&&(K.pathData||K.d)}function Y(K){return K&&(K.hasOwnProperty("pathData")||K.hasOwnProperty("d"))}function $(K,J){return K&&K.hasOwnProperty(J)}},63914:function(X,z,e){var M=e(3440);e(10178),e(13367);var F=e(41124),R=e(75028);M.registerVisual(F("effectScatter","circle")),M.registerLayout(R("effectScatter"))},10178:function(X,z,e){var M=e(1664),F=e(2365),R=F.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(A,T){return M(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});X.exports=R},13367:function(X,z,e){var M=e(3440),F=e(52159),R=e(79138),A=e(43970),T=e(75028),D=M.extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new F(R)},render:function(b,C,f){var v=b.getData(),m=this._symbolDraw;m.updateData(v),this.group.add(m.group)},updateTransform:function(b,C,f){var v=b.getData();this.group.dirty();var m=T().reset(b);m.progress&&m.progress({start:0,end:v.count()},v),this._symbolDraw.updateLayout(v)},_updateGroupTransform:function(b){var C=b.coordinateSystem;C&&C.getRoamTransform&&(this.group.transform=A.clone(C.getRoamTransform()),this.group.decomposeTransform())},remove:function(b,C){this._symbolDraw&&this._symbolDraw.remove(C)},dispose:function(){}});X.exports=D},32958:function(X,z,e){var M=e(3440);e(7139),e(64048);var F=e(31310),R=e(69818),A=e(61614);M.registerVisual(F("funnel")),M.registerLayout(R),M.registerProcessor(A("funnel"))},7139:function(X,z,e){var M=e(3440),F=e(31879),R=e(42347),A=e(35454),T=A.defaultEmphasis,D=e(43036),b=D.makeSeriesEncodeForNameBased,C=e(89960),f=M.extendSeriesModel({type:"series.funnel",init:function(m){f.superApply(this,"init",arguments),this.legendVisualProvider=new C(F.bind(this.getData,this),F.bind(this.getRawData,this)),this._defaultLabelLine(m)},getInitialData:function(m,o){return R(this,{coordDimensions:["value"],encodeDefaulter:F.curry(b,this)})},_defaultLabelLine:function(m){T(m,"labelLine",["show"]);var o=m.labelLine,u=m.emphasis.labelLine;o.show=o.show&&m.label.show,u.show=u.show&&m.emphasis.label.show},getDataParams:function(m){var o=this.getData(),u=f.superCall(this,"getDataParams",m),l=o.mapDimension("value"),r=o.getSum(l);return u.percent=r?+(o.get(l,m)/r*100).toFixed(2):0,u.$vars.push("percent"),u},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}),v=f;X.exports=v},64048:function(X,z,e){var M=e(48070),F=e(31879),R=e(1911);function A(f,v){M.Group.call(this);var m=new M.Polygon,o=new M.Polyline,u=new M.Text;this.add(m),this.add(o),this.add(u),this.highDownOnUpdate=function(l,r){r==="emphasis"?(o.ignore=o.hoverIgnore,u.ignore=u.hoverIgnore):(o.ignore=o.normalIgnore,u.ignore=u.normalIgnore)},this.updateData(f,v,!0)}var T=A.prototype,D=["itemStyle","opacity"];T.updateData=function(f,v,m){var o=this.childAt(0),u=f.hostModel,l=f.getItemModel(v),r=f.getItemLayout(v),s=f.getItemModel(v).get(D);s=s??1,o.useStyle({}),m?(o.setShape({points:r.points}),o.setStyle({opacity:0}),M.initProps(o,{style:{opacity:s}},u,v)):M.updateProps(o,{style:{opacity:s},shape:{points:r.points}},u,v);var c=l.getModel("itemStyle"),x=f.getItemVisual(v,"color");o.setStyle(F.defaults({lineJoin:"round",fill:x},c.getItemStyle(["opacity"]))),o.hoverStyle=c.getModel("emphasis").getItemStyle(),this._updateLabel(f,v),M.setHoverStyle(this)},T._updateLabel=function(f,v){var m=this.childAt(1),o=this.childAt(2),u=f.hostModel,l=f.getItemModel(v),r=f.getItemLayout(v),s=r.label,n=f.getItemVisual(v,"color");M.updateProps(m,{shape:{points:s.linePoints||s.linePoints}},u,v),M.updateProps(o,{style:{x:s.x,y:s.y}},u,v),o.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var c=l.getModel("label"),x=l.getModel("emphasis.label"),a=l.getModel("labelLine"),i=l.getModel("emphasis.labelLine"),n=f.getItemVisual(v,"color");M.setLabelStyle(o.style,o.hoverStyle={},c,x,{labelFetcher:f.hostModel,labelDataIndex:v,defaultText:f.getName(v),autoColor:n,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign}),o.ignore=o.normalIgnore=!c.get("show"),o.hoverIgnore=!x.get("show"),m.ignore=m.normalIgnore=!a.get("show"),m.hoverIgnore=!i.get("show"),m.setStyle({stroke:n}),m.setStyle(a.getModel("lineStyle").getLineStyle()),m.hoverStyle=i.getModel("lineStyle").getLineStyle()},F.inherits(A,M.Group);var b=R.extend({type:"funnel",render:function(f,v,m){var o=f.getData(),u=this._data,l=this.group;o.diff(u).add(function(r){var s=new A(o,r);o.setItemGraphicEl(r,s),l.add(s)}).update(function(r,s){var c=u.getItemGraphicEl(s);c.updateData(o,r),l.add(c),o.setItemGraphicEl(r,c)}).remove(function(r){var s=u.getItemGraphicEl(r);l.remove(s)}).execute(),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),C=b;X.exports=C},69818:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(30871),A=e(48354),T=A.parsePercent,D=A.linearMap;function b(m,o){return R.getLayoutRect(m.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function C(m,o){for(var u=m.mapDimension("value"),l=m.mapArray(u,function(a){return a}),r=[],s=o==="ascending",c=0,x=m.count();c<x;c++)r[c]=c;return typeof o=="function"?r.sort(o):o!=="none"&&r.sort(function(a,i){return s?l[a]-l[i]:l[i]-l[a]}),r}function f(m){m.each(function(o){var u=m.getItemModel(o),l=u.getModel("label"),r=l.get("position"),s=u.get("orient"),c=u.getModel("labelLine"),x=m.getItemLayout(o),a=x.points,i=r==="inner"||r==="inside"||r==="center"||r==="insideLeft"||r==="insideRight",n,h,g,d;if(i)r==="insideLeft"?(h=(a[0][0]+a[3][0])/2+5,g=(a[0][1]+a[3][1])/2,n="left"):r==="insideRight"?(h=(a[1][0]+a[2][0])/2-5,g=(a[1][1]+a[2][1])/2,n="right"):(h=(a[0][0]+a[1][0]+a[2][0]+a[3][0])/4,g=(a[0][1]+a[1][1]+a[2][1]+a[3][1])/4,n="center"),d=[[h,g],[h,g]];else{var y,p,w,S,O=c.get("length");r==="left"?(y=(a[3][0]+a[0][0])/2,p=(a[3][1]+a[0][1])/2,w=y-O,h=w-5,n="right"):r==="right"?(y=(a[1][0]+a[2][0])/2,p=(a[1][1]+a[2][1])/2,w=y+O,h=w+5,n="left"):r==="top"?(y=(a[3][0]+a[0][0])/2,p=(a[3][1]+a[0][1])/2,S=p-O,g=S-5,n="center"):r==="bottom"?(y=(a[1][0]+a[2][0])/2,p=(a[1][1]+a[2][1])/2,S=p+O,g=S+5,n="center"):r==="rightTop"?(y=s==="horizontal"?a[3][0]:a[1][0],p=s==="horizontal"?a[3][1]:a[1][1],s==="horizontal"?(S=p-O,g=S-5,n="center"):(w=y+O,h=w+5,n="top")):r==="rightBottom"?(y=a[2][0],p=a[2][1],s==="horizontal"?(S=p+O,g=S+5,n="center"):(w=y+O,h=w+5,n="bottom")):r==="leftTop"?(y=a[0][0],p=s==="horizontal"?a[0][1]:a[1][1],s==="horizontal"?(S=p-O,g=S-5,n="center"):(w=y-O,h=w-5,n="right")):r==="leftBottom"?(y=s==="horizontal"?a[1][0]:a[3][0],p=s==="horizontal"?a[1][1]:a[2][1],s==="horizontal"?(S=p+O,g=S+5,n="center"):(w=y-O,h=w-5,n="right")):(y=(a[1][0]+a[2][0])/2,p=(a[1][1]+a[2][1])/2,s==="horizontal"?(S=p+O,g=S+5,n="center"):(w=y+O,h=w+5,n="left")),s==="horizontal"?(w=y,h=w):(S=p,g=S),d=[[y,p],[w,S]]}x.label={linePoints:d,x:h,y:g,verticalAlign:"middle",textAlign:n,inside:i}})}function v(m,o,u){m.eachSeriesByType("funnel",function(l){var r=l.getData(),s=r.mapDimension("value"),c=l.get("sort"),x=b(l,o),a=C(r,c),i=l.get("orient"),n=x.width,h=x.height,g=x.x,d=x.y,y=i==="horizontal"?[T(l.get("minSize"),h),T(l.get("maxSize"),h)]:[T(l.get("minSize"),n),T(l.get("maxSize"),n)],p=r.getDataExtent(s),w=l.get("min"),S=l.get("max");w==null&&(w=Math.min(p[0],0)),S==null&&(S=p[1]);var O=l.get("funnelAlign"),B=l.get("gap"),k=i==="horizontal"?n:h,P=(k-B*(r.count()-1))/r.count(),L=function(V,Y){if(i==="horizontal"){var J=r.get(s,V)||0,$=D(J,[w,S],y,!0),K;switch(O){case"top":K=d;break;case"center":K=d+(h-$)/2;break;case"bottom":K=d+(h-$);break}return[[Y,K],[Y,K+$]]}var J=r.get(s,V)||0,Q=D(J,[w,S],y,!0),et;switch(O){case"left":et=g;break;case"center":et=g+(n-Q)/2;break;case"right":et=g+n-Q;break}return[[et,Y],[et+Q,Y]]};c==="ascending"&&(P=-P,B=-B,i==="horizontal"?g+=n:d+=h,a=a.reverse());for(var E=0;E<a.length;E++){var N=a[E],I=a[E+1],G=r.getItemModel(N);if(i==="horizontal"){var W=G.get("itemStyle.width");W==null?W=P:(W=T(W,n),c==="ascending"&&(W=-W));var Z=L(N,g),U=L(I,g+W);g+=W+B,r.setItemLayout(N,{points:Z.concat(U.slice().reverse())})}else{var H=G.get("itemStyle.height");H==null?H=P:(H=T(H,h),c==="ascending"&&(H=-H));var Z=i==="horizontal"?L(N,g):L(N,d),U=i==="horizontal"?L(I,g+W):L(I,d+H);d+=H+B,r.setItemLayout(N,{points:Z.concat(U.slice().reverse())})}}f(r)})}X.exports=v},31433:function(X,z,e){e(83252),e(91122)},83252:function(X,z,e){var M=e(42347),F=e(2365),R=F.extend({type:"series.gauge",getInitialData:function(T,D){return M(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}}),A=R;X.exports=A},91122:function(X,z,e){var M=e(53280),F=e(48070),R=e(1911),A=e(48354),T=A.parsePercent,D=A.round,b=A.linearMap;function C(u,l){var r=u.get("center"),s=l.getWidth(),c=l.getHeight(),x=Math.min(s,c),a=T(r[0],l.getWidth()),i=T(r[1],l.getHeight()),n=T(u.get("radius"),x/2);return{cx:a,cy:i,r:n}}function f(u,l){return l&&(typeof l=="string"?u=l.replace("{value}",u??""):typeof l=="function"&&(u=l(u))),u}var v=Math.PI*2,m=R.extend({type:"gauge",render:function(u,l,r){this.group.removeAll();var s=u.get("axisLine.lineStyle.color"),c=C(u,r);this._renderMain(u,l,r,s,c)},dispose:function(){},_renderMain:function(u,l,r,s,c){for(var x=this.group,a=u.getModel("axisLine"),i=a.getModel("lineStyle"),n=u.get("clockwise"),h=-u.get("startAngle")/180*Math.PI,g=-u.get("endAngle")/180*Math.PI,d=(g-h)%v,y=h,p=i.get("width"),w=a.get("show"),S=0;w&&S<s.length;S++){var O=Math.min(Math.max(s[S][0],0),1),g=h+d*O,B=new F.Sector({shape:{startAngle:y,endAngle:g,cx:c.cx,cy:c.cy,clockwise:n,r0:c.r-p,r:c.r},silent:!0});B.setStyle({fill:s[S][1]}),B.setStyle(i.getLineStyle(["color","borderWidth","borderColor"])),x.add(B),y=g}var k=function(L){if(L<=0)return s[0][1];for(var E=0;E<s.length;E++)if(s[E][0]>=L&&(E===0?0:s[E-1][0])<L)return s[E][1];return s[E-1][1]};if(!n){var P=h;h=g,g=P}this._renderTicks(u,l,r,k,c,h,g,n),this._renderPointer(u,l,r,k,c,h,g,n),this._renderTitle(u,l,r,k,c),this._renderDetail(u,l,r,k,c)},_renderTicks:function(u,l,r,s,c,x,a,i){for(var n=this.group,h=c.cx,g=c.cy,d=c.r,y=+u.get("min"),p=+u.get("max"),w=u.getModel("splitLine"),S=u.getModel("axisTick"),O=u.getModel("axisLabel"),B=u.get("splitNumber"),k=S.get("splitNumber"),P=T(w.get("length"),d),L=T(S.get("length"),d),E=x,N=(a-x)/B,I=N/k,G=w.getModel("lineStyle").getLineStyle(),W=S.getModel("lineStyle").getLineStyle(),Z=0;Z<=B;Z++){var U=Math.cos(E),H=Math.sin(E);if(w.get("show")){var V=new F.Line({shape:{x1:U*d+h,y1:H*d+g,x2:U*(d-P)+h,y2:H*(d-P)+g},style:G,silent:!0});G.stroke==="auto"&&V.setStyle({stroke:s(Z/B)}),n.add(V)}if(O.get("show")){var Y=f(D(Z/B*(p-y)+y),O.get("formatter")),$=O.get("distance"),K=s(Z/B);n.add(new F.Text({style:F.setTextStyle({},O,{text:Y,x:U*(d-P-$)+h,y:H*(d-P-$)+g,textVerticalAlign:H<-.4?"top":H>.4?"bottom":"middle",textAlign:U<-.4?"left":U>.4?"right":"center"},{autoColor:K}),silent:!0}))}if(S.get("show")&&Z!==B){for(var J=0;J<=k;J++){var U=Math.cos(E),H=Math.sin(E),Q=new F.Line({shape:{x1:U*d+h,y1:H*d+g,x2:U*(d-L)+h,y2:H*(d-L)+g},silent:!0,style:W});W.stroke==="auto"&&Q.setStyle({stroke:s((Z+J/k)/B)}),n.add(Q),E+=I}E-=I}else E+=N}},_renderPointer:function(u,l,r,s,c,x,a,i){var n=this.group,h=this._data;if(!u.get("pointer.show")){h&&h.eachItemGraphicEl(function(w){n.remove(w)});return}var g=[+u.get("min"),+u.get("max")],d=[x,a],y=u.getData(),p=y.mapDimension("value");y.diff(h).add(function(w){var S=new M({shape:{angle:x}});F.initProps(S,{shape:{angle:b(y.get(p,w),g,d,!0)}},u),n.add(S),y.setItemGraphicEl(w,S)}).update(function(w,S){var O=h.getItemGraphicEl(S);F.updateProps(O,{shape:{angle:b(y.get(p,w),g,d,!0)}},u),n.add(O),y.setItemGraphicEl(w,O)}).remove(function(w){var S=h.getItemGraphicEl(w);n.remove(S)}).execute(),y.eachItemGraphicEl(function(w,S){var O=y.getItemModel(S),B=O.getModel("pointer");w.setShape({x:c.cx,y:c.cy,width:T(B.get("width"),c.r),r:T(B.get("length"),c.r)}),w.useStyle(O.getModel("itemStyle").getItemStyle()),w.style.fill==="auto"&&w.setStyle("fill",s(b(y.get(p,S),g,[0,1],!0))),F.setHoverStyle(w,O.getModel("emphasis.itemStyle").getItemStyle())}),this._data=y},_renderTitle:function(u,l,r,s,c){var x=u.getData(),a=x.mapDimension("value"),i=u.getModel("title");if(i.get("show")){var n=i.get("offsetCenter"),h=c.cx+T(n[0],c.r),g=c.cy+T(n[1],c.r),d=+u.get("min"),y=+u.get("max"),p=u.getData().get(a,0),w=s(b(p,[d,y],[0,1],!0));this.group.add(new F.Text({silent:!0,style:F.setTextStyle({},i,{x:h,y:g,text:x.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:w,forceRich:!0})}))}},_renderDetail:function(u,l,r,s,c){var x=u.getModel("detail"),a=+u.get("min"),i=+u.get("max");if(x.get("show")){var n=x.get("offsetCenter"),h=c.cx+T(n[0],c.r),g=c.cy+T(n[1],c.r),d=T(x.get("width"),c.r),y=T(x.get("height"),c.r),p=u.getData(),w=p.get(p.mapDimension("value"),0),S=s(b(w,[a,i],[0,1],!0));this.group.add(new F.Text({silent:!0,style:F.setTextStyle({},x,{x:h,y:g,text:f(w,x.get("formatter")),textWidth:isNaN(d)?null:d,textHeight:isNaN(y)?null:y,textAlign:"center",textVerticalAlign:"middle"},{autoColor:S,forceRich:!0})}))}}}),o=m;X.exports=o},53280:function(X,z,e){var M=e(54904),F=M.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(R,A){var T=Math.cos,D=Math.sin,b=A.r,C=A.width,f=A.angle,v=A.x-T(f)*C*(C>=b/3?1:2),m=A.y-D(f)*C*(C>=b/3?1:2);f=A.angle-Math.PI/2,R.moveTo(v,m),R.lineTo(A.x+T(f)*C,A.y+D(f)*C),R.lineTo(A.x+T(A.angle)*b,A.y+D(A.angle)*b),R.lineTo(A.x-T(f)*C,A.y-D(f)*C),R.lineTo(v,m)}});X.exports=F},55921:function(X,z,e){var M=e(3440);e(93015),e(27219),e(95075);var F=e(21302),R=e(41124),A=e(97306),T=e(48063),D=e(35493),b=e(95313),C=e(20798),f=e(15453);M.registerProcessor(F),M.registerVisual(R("graph","circle",null)),M.registerVisual(A),M.registerVisual(T),M.registerLayout(D),M.registerLayout(M.PRIORITY.VISUAL.POST_CHART_LAYOUT,b),M.registerLayout(C),M.registerCoordinateSystem("graphView",{create:f})},93015:function(X,z,e){var M=e(3440),F=e(58677),R=e(31879),A=e(35454),T=A.defaultEmphasis,D=e(56785),b=e(17795),C=b.encodeHTML,f=e(31323),v=e(89960),m=e(37498),o=m.initCurvenessList,u=m.createEdgeMapForCurveness,l=M.extendSeriesModel({type:"series.graph",init:function(s){l.superApply(this,"init",arguments);var c=this;function x(){return c._categoriesData}this.legendVisualProvider=new v(x,x),this.fillDataTextStyle(s.edges||s.links),this._updateCategoriesData()},mergeOption:function(s){l.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(s.edges||s.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(s){l.superApply(this,"mergeDefaultAndTheme",arguments),T(s,["edgeLabel"],["show"])},getInitialData:function(s,c){var x=s.edges||s.links||[],a=s.data||s.nodes||[],i=this;if(a&&x){o(this);var n=f(a,x,this,!0,h);return R.each(n.edges,function(g){u(g.node1,g.node2,this,g.dataIndex)},this),n.data}function h(g,d){g.wrapMethod("getItemModel",function(B){var k=i._categoriesModels,P=B.getShallow("category"),L=k[P];return L&&(L.parentModel=B.parentModel,B.parentModel=L),B});var y=i.getModel("edgeLabel"),p=new D({label:y.option},y.parentModel,c),w=i.getModel("emphasis.edgeLabel"),S=new D({emphasis:{label:w.option}},w.parentModel,c);d.wrapMethod("getItemModel",function(B){return B.customizeGetParent(O),B});function O(B){return B=this.parsePath(B),B&&B[0]==="label"?p:B&&B[0]==="emphasis"&&B[1]==="label"?S:this.parentModel}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(s,c,x){if(x==="edge"){var a=this.getData(),i=this.getDataParams(s,x),n=a.graph.getEdgeByIndex(s),h=a.getName(n.node1.dataIndex),g=a.getName(n.node2.dataIndex),d=[];return h!=null&&d.push(h),g!=null&&d.push(g),d=C(d.join(" > ")),i.value&&(d+=" : "+C(i.value)),d}else return l.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var s=R.map(this.option.categories||[],function(x){return x.value!=null?x:R.extend({value:0},x)}),c=new F(["value"],this);c.initData(s),this._categoriesData=c,this._categoriesModels=c.mapArray(function(x){return c.getItemModel(x,!0)})},setZoom:function(s){this.option.zoom=s},setCenter:function(s){this.option.center=s},isAnimationEnabled:function(){return l.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),r=l;X.exports=r},27219:function(X,z,e){var M=e(3440),F=e(31879),R=e(52159),A=e(89264),T=e(73672),D=e(95922),b=e(22997),C=b.onIrrelevantElement,f=e(48070),v=e(63323),m=e(25799),o=m.getNodeGlobalScale,u="__focusNodeAdjacency",l="__unfocusNodeAdjacency",r=["itemStyle","opacity"],s=["lineStyle","opacity"];function c(n,h){var g=n.getVisual("opacity");return g??n.getModel().get(h)}function x(n,h,g){var d=n.getGraphicEl(),y=c(n,h);g!=null&&(y==null&&(y=1),y*=g),d.downplay&&d.downplay(),d.traverse(function(p){if(!p.isGroup){var w=p.lineLabelOriginalOpacity;(w==null||g!=null)&&(w=y),p.setStyle("opacity",w)}})}function a(n,h){var g=c(n,h),d=n.getGraphicEl();d.traverse(function(y){!y.isGroup&&y.setStyle("opacity",g)}),d.highlight&&d.highlight()}var i=M.extendChartView({type:"graph",init:function(n,h){var g=new R,d=new A,y=this.group;this._controller=new T(h.getZr()),this._controllerHost={target:y},y.add(g.group),y.add(d.group),this._symbolDraw=g,this._lineDraw=d,this._firstRender=!0},render:function(n,h,g){var d=this,y=n.coordinateSystem;this._model=n;var p=this._symbolDraw,w=this._lineDraw,S=this.group;if(y.type==="view"){var O={position:y.position,scale:y.scale};this._firstRender?S.attr(O):f.updateProps(S,O,n)}v(n.getGraph(),o(n));var B=n.getData();p.updateData(B);var k=n.getEdgeData();w.updateData(k),this._updateNodeAndLinkScale(),this._updateController(n,h,g),clearTimeout(this._layoutTimeout);var P=n.forceLayout,L=n.get("force.layoutAnimation");P&&this._startForceLayoutIteration(P,L),B.eachItemGraphicEl(function(G,W){var Z=B.getItemModel(W);G.off("drag").off("dragend");var U=Z.get("draggable");U&&G.on("drag",function(){P&&(P.warmUp(),!this._layouting&&this._startForceLayoutIteration(P,L),P.setFixed(W),B.setItemLayout(W,G.position))},this).on("dragend",function(){P&&P.setUnfixed(W)},this),G.setDraggable(U&&P),G[u]&&G.off("mouseover",G[u]),G[l]&&G.off("mouseout",G[l]),Z.get("focusNodeAdjacency")&&(G.on("mouseover",G[u]=function(){d._clearTimer(),g.dispatchAction({type:"focusNodeAdjacency",seriesId:n.id,dataIndex:G.dataIndex})}),G.on("mouseout",G[l]=function(){d._dispatchUnfocus(g)}))},this),B.graph.eachEdge(function(G){var W=G.getGraphicEl();W[u]&&W.off("mouseover",W[u]),W[l]&&W.off("mouseout",W[l]),G.getModel().get("focusNodeAdjacency")&&(W.on("mouseover",W[u]=function(){d._clearTimer(),g.dispatchAction({type:"focusNodeAdjacency",seriesId:n.id,edgeDataIndex:G.dataIndex})}),W.on("mouseout",W[l]=function(){d._dispatchUnfocus(g)}))});var E=n.get("layout")==="circular"&&n.get("circular.rotateLabel"),N=B.getLayout("cx"),I=B.getLayout("cy");B.eachItemGraphicEl(function(G,W){var Z=B.getItemModel(W),U=Z.get("label.rotate")||0,H=G.getSymbolPath();if(E){var V=B.getItemLayout(W),Y=Math.atan2(V[1]-I,V[0]-N);Y<0&&(Y=Math.PI*2+Y);var $=V[0]<N;$&&(Y=Y-Math.PI);var K=$?"left":"right";f.modifyLabelStyle(H,{textRotation:-Y,textPosition:K,textOrigin:"center"},{textPosition:K})}else f.modifyLabelStyle(H,{textRotation:U*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(n,h){var g=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){g._unfocusDelayTimer=null,n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:g._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(n,h,g,d){var y=n.getData(),p=y.graph,w=d.dataIndex,S=d.edgeDataIndex,O=p.getNodeByIndex(w),B=p.getEdgeByIndex(S);!O&&!B||(p.eachNode(function(k){x(k,r,.1)}),p.eachEdge(function(k){x(k,s,.1)}),O&&(a(O,r),F.each(O.edges,function(k){k.dataIndex<0||(a(k,s),a(k.node1,r),a(k.node2,r))})),B&&(a(B,s),a(B.node1,r),a(B.node2,r)))},unfocusNodeAdjacency:function(n,h,g,d){var y=n.getData().graph;y.eachNode(function(p){x(p,r)}),y.eachEdge(function(p){x(p,s)})},_startForceLayoutIteration:function(n,h){var g=this;(function d(){n.step(function(y){g.updateLayout(g._model),(g._layouting=!y)&&(h?g._layoutTimeout=setTimeout(d,16):d())})})()},_updateController:function(n,h,g){var d=this._controller,y=this._controllerHost,p=this.group;if(d.setPointerChecker(function(w,S,O){var B=p.getBoundingRect();return B.applyTransform(p.transform),B.contain(S,O)&&!C(w,g,n)}),n.coordinateSystem.type!=="view"){d.disable();return}d.enable(n.get("roam")),y.zoomLimit=n.get("scaleLimit"),y.zoom=n.coordinateSystem.getZoom(),d.off("pan").off("zoom").on("pan",function(w){D.updateViewOnPan(y,w.dx,w.dy),g.dispatchAction({seriesId:n.id,type:"graphRoam",dx:w.dx,dy:w.dy})}).on("zoom",function(w){D.updateViewOnZoom(y,w.scale,w.originX,w.originY),g.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:w.scale,originX:w.originX,originY:w.originY}),this._updateNodeAndLinkScale(),v(n.getGraph(),o(n)),this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var n=this._model,h=n.getData(),g=o(n),d=[g,g];h.eachItemGraphicEl(function(y,p){y.attr("scale",d)})},updateLayout:function(n){v(n.getGraph(),o(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(n,h){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}});X.exports=i},63323:function(X,z,e){var M=e(90723),F=e(12072),R=e(25799),A=R.getSymbolSize,T=[],D=[],b=[],C=M.quadraticAt,f=F.distSquare,v=Math.abs;function m(u,l,r){for(var s=u[0],c=u[1],x=u[2],a=1/0,i,n=r*r,h=.1,g=.1;g<=.9;g+=.1){T[0]=C(s[0],c[0],x[0],g),T[1]=C(s[1],c[1],x[1],g);var d=v(f(T,l)-n);d<a&&(a=d,i=g)}for(var y=0;y<32;y++){var p=i+h;D[0]=C(s[0],c[0],x[0],i),D[1]=C(s[1],c[1],x[1],i),b[0]=C(s[0],c[0],x[0],p),b[1]=C(s[1],c[1],x[1],p);var d=f(D,l)-n;if(v(d)<.01)break;var w=f(b,l)-n;h/=2,d<0?w>=0?i=i+h:i=i-h:w>=0?i=i-h:i=i+h}return i}function o(u,l){var r=[],s=M.quadraticSubdivide,c=[[],[],[]],x=[[],[]],a=[];l/=2,u.eachEdge(function(i,n){var h=i.getLayout(),g=i.getVisual("fromSymbol"),d=i.getVisual("toSymbol");h.__original||(h.__original=[F.clone(h[0]),F.clone(h[1])],h[2]&&h.__original.push(F.clone(h[2])));var y=h.__original;if(h[2]!=null){if(F.copy(c[0],y[0]),F.copy(c[1],y[2]),F.copy(c[2],y[1]),g&&g!=="none"){var p=A(i.node1),w=m(c,y[0],p*l);s(c[0][0],c[1][0],c[2][0],w,r),c[0][0]=r[3],c[1][0]=r[4],s(c[0][1],c[1][1],c[2][1],w,r),c[0][1]=r[3],c[1][1]=r[4]}if(d&&d!=="none"){var p=A(i.node2),w=m(c,y[1],p*l);s(c[0][0],c[1][0],c[2][0],w,r),c[1][0]=r[1],c[2][0]=r[2],s(c[0][1],c[1][1],c[2][1],w,r),c[1][1]=r[1],c[2][1]=r[2]}F.copy(h[0],c[0]),F.copy(h[1],c[2]),F.copy(h[2],c[1])}else{if(F.copy(x[0],y[0]),F.copy(x[1],y[1]),F.sub(a,x[1],x[0]),F.normalize(a,a),g&&g!=="none"){var p=A(i.node1);F.scaleAndAdd(x[0],x[0],a,p*l)}if(d&&d!=="none"){var p=A(i.node2);F.scaleAndAdd(x[1],x[1],a,-p*l)}F.copy(h[0],x[0]),F.copy(h[1],x[1])}})}X.exports=o},21302:function(X){function z(e){var M=e.findComponents({mainType:"legend"});!M||!M.length||e.eachSeriesByType("graph",function(F){var R=F.getCategoriesData(),A=F.getGraph(),T=A.data,D=R.mapArray(R.getName);T.filterSelf(function(b){var C=T.getItemModel(b),f=C.getShallow("category");if(f!=null){typeof f=="number"&&(f=D[f]);for(var v=0;v<M.length;v++)if(!M[v].isSelected(f))return!1}return!0})},this)}X.exports=z},97306:function(X){function z(e){var M={};e.eachSeriesByType("graph",function(F){var R=F.getCategoriesData(),A=F.getData(),T={};R.each(function(D){var b=R.getName(D);T["ec-"+b]=D;var C=R.getItemModel(D),f=C.get("itemStyle.color")||F.getColorFromPalette(b,M);R.setItemVisual(D,"color",f);for(var v=["opacity","symbol","symbolSize","symbolKeepAspect"],m=0;m<v.length;m++){var o=C.getShallow(v[m],!0);o!=null&&R.setItemVisual(D,v[m],o)}}),R.count()&&A.each(function(D){var b=A.getItemModel(D),C=b.getShallow("category");if(C!=null){typeof C=="string"&&(C=T["ec-"+C]);for(var f=["color","opacity","symbol","symbolSize","symbolKeepAspect"],v=0;v<f.length;v++)A.getItemVisual(D,f[v],!0)==null&&A.setItemVisual(D,f[v],R.getItemVisual(C,f[v]))}})})}X.exports=z},95313:function(X,z,e){var M=e(61616),F=M.circularLayout;function R(A){A.eachSeriesByType("graph",function(T){T.get("layout")==="circular"&&F(T,"symbolSize")})}X.exports=R},61616:function(X,z,e){var M=e(12072),F=e(25799),R=F.getSymbolSize,A=F.getNodeGlobalScale,T=e(31879),D=e(37498),b=D.getCurvenessForEdge,C=Math.PI,f=[];function v(o,u){var l=o.coordinateSystem;if(!(l&&l.type!=="view")){var r=l.getBoundingRect(),s=o.getData(),c=s.graph,x=r.width/2+r.x,a=r.height/2+r.y,i=Math.min(r.width,r.height)/2,n=s.count();s.setLayout({cx:x,cy:a}),n&&(m[u](o,l,c,s,i,x,a,n),c.eachEdge(function(h,g){var d=T.retrieve3(h.getModel().get("lineStyle.curveness"),b(h,o,g),0),y=M.clone(h.node1.getLayout()),p=M.clone(h.node2.getLayout()),w,S=(y[0]+p[0])/2,O=(y[1]+p[1])/2;+d&&(d*=3,w=[x*d+S*(1-d),a*d+O*(1-d)]),h.setLayout([y,p,w])}))}}var m={value:function(o,u,l,r,s,c,x,a){var i=0,n=r.getSum("value"),h=Math.PI*2/(n||a);l.eachNode(function(g){var d=g.getValue("value"),y=h*(n?d:1)/2;i+=y,g.setLayout([s*Math.cos(i)+c,s*Math.sin(i)+x]),i+=y})},symbolSize:function(o,u,l,r,s,c,x,a){var i=0;f.length=a;var n=A(o);l.eachNode(function(d){var y=R(d);isNaN(y)&&(y=2),y<0&&(y=0),y*=n;var p=Math.asin(y/2/s);isNaN(p)&&(p=C/2),f[d.dataIndex]=p,i+=p*2});var h=(2*C-i)/a/2,g=0;l.eachNode(function(d){var y=h+f[d.dataIndex];g+=y,d.setLayout([s*Math.cos(g)+c,s*Math.sin(g)+x]),g+=y})}};z.circularLayout=v},15453:function(X,z,e){var M=e(65176),F=e(30871),R=F.getLayoutRect,A=e(18644);function T(b,C,f){var v=b.getBoxLayoutParams();return v.aspect=f,R(v,{width:C.getWidth(),height:C.getHeight()})}function D(b,C){var f=[];return b.eachSeriesByType("graph",function(v){var m=v.get("coordinateSystem");if(!m||m==="view"){var o=v.getData(),u=o.mapArray(function(g){var d=o.getItemModel(g);return[+d.get("x"),+d.get("y")]}),l=[],r=[];A.fromPoints(u,l,r),r[0]-l[0]===0&&(r[0]+=1,l[0]-=1),r[1]-l[1]===0&&(r[1]+=1,l[1]-=1);var s=(r[0]-l[0])/(r[1]-l[1]),c=T(v,C,s);isNaN(s)&&(l=[c.x,c.y],r=[c.x+c.width,c.y+c.height]);var x=r[0]-l[0],a=r[1]-l[1],i=c.width,n=c.height,h=v.coordinateSystem=new M;h.zoomLimit=v.get("scaleLimit"),h.setBoundingRect(l[0],l[1],x,a),h.setViewRect(c.x,c.y,i,n),h.setCenter(v.get("center")),h.setZoom(v.get("zoom")),f.push(h)}}),f}X.exports=D},48063:function(X){function z(M){return M instanceof Array||(M=[M,M]),M}function e(M){M.eachSeriesByType("graph",function(F){var R=F.getGraph(),A=F.getEdgeData(),T=z(F.get("edgeSymbol")),D=z(F.get("edgeSymbolSize")),b="lineStyle.color".split("."),C="lineStyle.opacity".split(".");A.setVisual("fromSymbol",T&&T[0]),A.setVisual("toSymbol",T&&T[1]),A.setVisual("fromSymbolSize",D&&D[0]),A.setVisual("toSymbolSize",D&&D[1]),A.setVisual("color",F.get(b)),A.setVisual("opacity",F.get(C)),A.each(function(f){var v=A.getItemModel(f),m=R.getEdgeByIndex(f),o=z(v.getShallow("symbol",!0)),u=z(v.getShallow("symbolSize",!0)),l=v.get(b),r=v.get(C);switch(l){case"source":l=m.node1.getVisual("color");break;case"target":l=m.node2.getVisual("color");break}o[0]&&m.setVisual("fromSymbol",o[0]),o[1]&&m.setVisual("toSymbol",o[1]),u[0]&&m.setVisual("fromSymbolSize",u[0]),u[1]&&m.setVisual("toSymbolSize",u[1]),m.setVisual("color",l),m.setVisual("opacity",r)})})}X.exports=e},61852:function(X,z,e){var M=e(12072),F=M.scaleAndAdd;function R(A,T,D){for(var b=D.rect,C=b.width,f=b.height,v=[b.x+C/2,b.y+f/2],m=D.gravity==null?.1:D.gravity,o=0;o<A.length;o++){var u=A[o];u.p||(u.p=M.create(C*(Math.random()-.5)+v[0],f*(Math.random()-.5)+v[1])),u.pp=M.clone(u.p),u.edges=null}var l=D.friction==null?.6:D.friction,r=l;return{warmUp:function(){r=l*.8},setFixed:function(s){A[s].fixed=!0},setUnfixed:function(s){A[s].fixed=!1},step:function(s){for(var c=[],x=A.length,a=0;a<T.length;a++){var i=T[a];if(!i.ignoreForceLayout){var n=i.n1,h=i.n2;M.sub(c,h.p,n.p);var g=M.len(c)-i.d,d=h.w/(n.w+h.w);isNaN(d)&&(d=0),M.normalize(c,c),!n.fixed&&F(n.p,n.p,c,d*g*r),!h.fixed&&F(h.p,h.p,c,-(1-d)*g*r)}}for(var a=0;a<x;a++){var y=A[a];y.fixed||(M.sub(c,v,y.p),F(y.p,y.p,c,m*r))}for(var a=0;a<x;a++)for(var n=A[a],p=a+1;p<x;p++){var h=A[p];M.sub(c,h.p,n.p);var g=M.len(c);g===0&&(M.set(c,Math.random()-.5,Math.random()-.5),g=1);var w=(n.rep+h.rep)/g/g;!n.fixed&&F(n.pp,n.pp,c,w),!h.fixed&&F(h.pp,h.pp,c,-w)}for(var S=[],a=0;a<x;a++){var y=A[a];y.fixed||(M.sub(S,y.p,y.pp),F(y.p,y.p,S,r),M.copy(y.pp,y.p))}r=r*.992,s&&s(A,T,r<.01)}}}z.forceLayout=R},20798:function(X,z,e){var M=e(61852),F=M.forceLayout,R=e(89761),A=R.simpleLayout,T=e(61616),D=T.circularLayout,b=e(48354),C=b.linearMap,f=e(12072),v=e(31879),m=e(37498),o=m.getCurvenessForEdge;function u(l){l.eachSeriesByType("graph",function(r){var s=r.coordinateSystem;if(!(s&&s.type!=="view"))if(r.get("layout")==="force"){var c=r.preservedPoints||{},x=r.getGraph(),a=x.data,i=x.edgeData,n=r.getModel("force"),h=n.get("initLayout");r.preservedPoints?a.each(function(L){var E=a.getId(L);a.setItemLayout(L,c[E]||[NaN,NaN])}):!h||h==="none"?A(r):h==="circular"&&D(r,"value");var g=a.getDataExtent("value"),d=i.getDataExtent("value"),y=n.get("repulsion"),p=n.get("edgeLength");v.isArray(y)||(y=[y,y]),v.isArray(p)||(p=[p,p]),p=[p[1],p[0]];var w=a.mapArray("value",function(L,E){var N=a.getItemLayout(E),I=C(L,g,y);return isNaN(I)&&(I=(y[0]+y[1])/2),{w:I,rep:I,fixed:a.getItemModel(E).get("fixed"),p:!N||isNaN(N[0])||isNaN(N[1])?null:N}}),S=i.mapArray("value",function(L,E){var N=x.getEdgeByIndex(E),I=C(L,d,p);isNaN(I)&&(I=(p[0]+p[1])/2);var G=N.getModel(),W=v.retrieve3(G.get("lineStyle.curveness"),-o(N,r,E,!0),0);return{n1:w[N.node1.dataIndex],n2:w[N.node2.dataIndex],d:I,curveness:W,ignoreForceLayout:G.get("ignoreForceLayout")}}),s=r.coordinateSystem,O=s.getBoundingRect(),B=F(w,S,{rect:O,gravity:n.get("gravity"),friction:n.get("friction")}),k=B.step;B.step=function(L){for(var E=0,N=w.length;E<N;E++)w[E].fixed&&f.copy(w[E].p,x.getNodeByIndex(E).getLayout());k(function(I,G,W){for(var Z=0,U=I.length;Z<U;Z++)I[Z].fixed||x.getNodeByIndex(Z).setLayout(I[Z].p),c[a.getId(Z)]=I[Z].p;for(var Z=0,U=G.length;Z<U;Z++){var H=G[Z],V=x.getEdgeByIndex(Z),Y=H.n1.p,$=H.n2.p,K=V.getLayout();K=K?K.slice():[],K[0]=K[0]||[],K[1]=K[1]||[],f.copy(K[0],Y),f.copy(K[1],$),+H.curveness&&(K[2]=[(Y[0]+$[0])/2-(Y[1]-$[1])*H.curveness,(Y[1]+$[1])/2-($[0]-Y[0])*H.curveness]),V.setLayout(K)}L&&L(W)})},r.forceLayout=B,r.preservedPoints=c,B.step()}else r.forceLayout=null})}X.exports=u},95075:function(X,z,e){var M=e(3440),F=e(64072),R=F.updateCenterAndZoom;e(79722);var A={type:"graphRoam",event:"graphRoam",update:"none"};M.registerAction(A,function(T,D){D.eachComponent({mainType:"series",query:T},function(b){var C=b.coordinateSystem,f=R(C,T);b.setCenter&&b.setCenter(f.center),b.setZoom&&b.setZoom(f.zoom)})})},25799:function(X,z){function e(F){var R=F.coordinateSystem;if(R.type!=="view")return 1;var A=F.option.nodeScaleRatio,T=R.scale,D=T&&T[0]||1,b=R.getZoom(),C=(b-1)*A+1;return C/D}function M(F){var R=F.getVisual("symbolSize");return R instanceof Array&&(R=(R[0]+R[1])/2),+R}z.getNodeGlobalScale=e,z.getSymbolSize=M},35493:function(X,z,e){var M=e(31879),F=M.each,R=e(89761),A=R.simpleLayout,T=R.simpleLayoutEdge;function D(b,C){b.eachSeriesByType("graph",function(f){var v=f.get("layout"),m=f.coordinateSystem;if(m&&m.type!=="view"){var o=f.getData(),u=[];F(m.dimensions,function(a){u=u.concat(o.mapDimension(a,!0))});for(var l=0;l<o.count();l++){for(var r=[],s=!1,c=0;c<u.length;c++){var x=o.get(u[c],l);isNaN(x)||(s=!0),r.push(x)}s?o.setItemLayout(l,m.dataToPoint(r)):o.setItemLayout(l,[NaN,NaN])}T(o.graph,f)}else(!v||v==="none")&&A(f)})}X.exports=D},89761:function(X,z,e){var M=e(12072),F=e(31879),R=e(37498),A=R.getCurvenessForEdge;function T(b){var C=b.coordinateSystem;if(!(C&&C.type!=="view")){var f=b.getGraph();f.eachNode(function(v){var m=v.getModel();v.setLayout([+m.get("x"),+m.get("y")])}),D(f,b)}}function D(b,C){b.eachEdge(function(f,v){var m=F.retrieve3(f.getModel().get("lineStyle.curveness"),-A(f,C,v,!0),0),o=M.clone(f.node1.getLayout()),u=M.clone(f.node2.getLayout()),l=[o,u];+m&&l.push([(o[0]+u[0])/2-(o[1]-u[1])*m,(o[1]+u[1])/2-(u[0]-o[0])*m]),f.setLayout(l)})}z.simpleLayout=T,z.simpleLayoutEdge=D},27207:function(X,z,e){e(61715),e(14334)},84821:function(X,z,e){var M=e(31879),F=256;function R(){var T=M.createCanvas();this.canvas=T,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}R.prototype={update:function(T,D,b,C,f,v){var m=this._getBrush(),o=this._getGradient(T,f,"inRange"),u=this._getGradient(T,f,"outOfRange"),l=this.pointSize+this.blurSize,r=this.canvas,s=r.getContext("2d"),c=T.length;r.width=D,r.height=b;for(var x=0;x<c;++x){var a=T[x],i=a[0],n=a[1],h=a[2],g=C(h);s.globalAlpha=g,s.drawImage(m,i-l,n-l)}if(!r.width||!r.height)return r;for(var d=s.getImageData(0,0,r.width,r.height),y=d.data,p=0,w=y.length,S=this.minOpacity,O=this.maxOpacity,B=O-S;p<w;){var g=y[p+3]/256,k=Math.floor(g*(F-1))*4;if(g>0){var P=v(g)?o:u;g>0&&(g=g*B+S),y[p++]=P[k],y[p++]=P[k+1],y[p++]=P[k+2],y[p++]=P[k+3]*g*256}else p+=4}return s.putImageData(d,0,0),r},_getBrush:function(){var T=this._brushCanvas||(this._brushCanvas=M.createCanvas()),D=this.pointSize+this.blurSize,b=D*2;T.width=b,T.height=b;var C=T.getContext("2d");return C.clearRect(0,0,b,b),C.shadowOffsetX=b,C.shadowBlur=this.blurSize,C.shadowColor="#000",C.beginPath(),C.arc(-D,D,this.pointSize,0,Math.PI*2,!0),C.closePath(),C.fill(),T},_getGradient:function(T,D,b){for(var C=this._gradientPixels,f=C[b]||(C[b]=new Uint8ClampedArray(256*4)),v=[0,0,0,0],m=0,o=0;o<256;o++)D[b](o/255,!0,v),f[m++]=v[0],f[m++]=v[1],f[m++]=v[2],f[m++]=v[3];return f}};var A=R;X.exports=A},61715:function(X,z,e){var M=e(2365),F=e(1664),R=e(48642),A=M.extend({type:"series.heatmap",getInitialData:function(T,D){return F(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var T=R.get(this.get("coordinateSystem"));if(T&&T.dimensions)return T.dimensions[0]==="lng"&&T.dimensions[1]==="lat"},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});X.exports=A},14334:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(48070),T=e(84821),D=e(31879);function b(m,o,u){var l=m[1]-m[0];o=D.map(o,function(c){return{interval:[(c.interval[0]-m[0])/l,(c.interval[1]-m[0])/l]}});var r=o.length,s=0;return function(c){for(var x=s;x<r;x++){var a=o[x].interval;if(a[0]<=c&&c<=a[1]){s=x;break}}if(x===r)for(var x=s-1;x>=0;x--){var a=o[x].interval;if(a[0]<=c&&c<=a[1]){s=x;break}}return x>=0&&x<r&&u[x]}}function C(m,o){var u=m[1]-m[0];return o=[(o[0]-m[0])/u,(o[1]-m[0])/u],function(l){return l>=o[0]&&l<=o[1]}}function f(m){var o=m.dimensions;return o[0]==="lng"&&o[1]==="lat"}var v=R.extendChartView({type:"heatmap",render:function(m,o,u){var l;o.eachComponent("visualMap",function(s){s.eachTargetSeries(function(c){c===m&&(l=s)})}),this.group.removeAll(),this._incrementalDisplayable=null;var r=m.coordinateSystem;r.type==="cartesian2d"||r.type==="calendar"?this._renderOnCartesianAndCalendar(m,u,0,m.getData().count()):f(r)&&this._renderOnGeo(r,m,l,u)},incrementalPrepareRender:function(m,o,u){this.group.removeAll()},incrementalRender:function(m,o,u,l){var r=o.coordinateSystem;r&&this._renderOnCartesianAndCalendar(o,l,m.start,m.end,!0)},_renderOnCartesianAndCalendar:function(m,o,u,l,r){var s=m.coordinateSystem,c,x;if(s.type==="cartesian2d"){var a=s.getAxis("x"),i=s.getAxis("y");c=a.getBandWidth(),x=i.getBandWidth()}for(var n=this.group,h=m.getData(),g="itemStyle",d="emphasis.itemStyle",y="label",p="emphasis.label",w=m.getModel(g).getItemStyle(["color"]),S=m.getModel(d).getItemStyle(),O=m.getModel(y),B=m.getModel(p),k=s.type,P=k==="cartesian2d"?[h.mapDimension("x"),h.mapDimension("y"),h.mapDimension("value")]:[h.mapDimension("time"),h.mapDimension("value")],L=u;L<l;L++){var E;if(k==="cartesian2d"){if(isNaN(h.get(P[2],L)))continue;var N=s.dataToPoint([h.get(P[0],L),h.get(P[1],L)]);E=new A.Rect({shape:{x:Math.floor(Math.round(N[0])-c/2),y:Math.floor(Math.round(N[1])-x/2),width:Math.ceil(c),height:Math.ceil(x)},style:{fill:h.getItemVisual(L,"color"),opacity:h.getItemVisual(L,"opacity")}})}else{if(isNaN(h.get(P[1],L)))continue;E=new A.Rect({z2:1,shape:s.dataToRect([h.get(P[0],L)]).contentShape,style:{fill:h.getItemVisual(L,"color"),opacity:h.getItemVisual(L,"opacity")}})}var I=h.getItemModel(L);h.hasItemOption&&(w=I.getModel(g).getItemStyle(["color"]),S=I.getModel(d).getItemStyle(),O=I.getModel(y),B=I.getModel(p));var G=m.getRawValue(L),W="-";G&&G[2]!=null&&(W=G[2]),A.setLabelStyle(w,S,O,B,{labelFetcher:m,labelDataIndex:L,defaultText:W,isRectText:!0}),E.setStyle(w),A.setHoverStyle(E,h.hasItemOption?S:D.extend({},S)),E.incremental=r,r&&(E.useHoverLayer=!0),n.add(E),h.setItemGraphicEl(L,E)}},_renderOnGeo:function(m,o,u,l){var r=u.targetVisuals.inRange,s=u.targetVisuals.outOfRange,c=o.getData(),x=this._hmLayer||this._hmLayer||new T;x.blurSize=o.get("blurSize"),x.pointSize=o.get("pointSize"),x.minOpacity=o.get("minOpacity"),x.maxOpacity=o.get("maxOpacity");var a=m.getViewRect().clone(),i=m.getRoamTransform();a.applyTransform(i);var n=Math.max(a.x,0),h=Math.max(a.y,0),g=Math.min(a.width+a.x,l.getWidth()),d=Math.min(a.height+a.y,l.getHeight()),y=g-n,p=d-h,w=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],S=c.mapArray(w,function(P,L,E){var N=m.dataToPoint([P,L]);return N[0]-=n,N[1]-=h,N.push(E),N}),O=u.getExtent(),B=u.type==="visualMap.continuous"?C(O,u.option.range):b(O,u.getPieceList(),u.option.selected);x.update(S,y,p,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:s.color.getColorMapper()},B);var k=new A.Image({style:{width:y,height:p,x:n,y:h,image:x.canvas},silent:!0});this.group.add(k)},dispose:function(){}});X.exports=v},813:function(X,z,e){var M=e(48070),F=e(43959),R=e(31879),A=e(35730),T=A.createSymbol,D=e(12072),b=e(90723);function C(m,o,u){M.Group.call(this),this.add(this.createLine(m,o,u)),this._updateEffectSymbol(m,o)}var f=C.prototype;f.createLine=function(m,o,u){return new F(m,o,u)},f._updateEffectSymbol=function(m,o){var u=m.getItemModel(o),l=u.getModel("effect"),r=l.get("symbolSize"),s=l.get("symbol");R.isArray(r)||(r=[r,r]);var c=l.get("color")||m.getItemVisual(o,"color"),x=this.childAt(1);this._symbolType!==s&&(this.remove(x),x=T(s,-.5,-.5,1,1,c),x.z2=100,x.culling=!0,this.add(x)),x&&(x.setStyle("shadowColor",c),x.setStyle(l.getItemStyle(["color"])),x.attr("scale",r),x.setColor(c),x.attr("scale",r),this._symbolType=s,this._symbolScale=r,this._updateEffectAnimation(m,l,o))},f._updateEffectAnimation=function(m,o,u){var l=this.childAt(1);if(l){var r=this,s=m.getItemLayout(u),c=o.get("period")*1e3,x=o.get("loop"),a=o.get("constantSpeed"),i=R.retrieve(o.get("delay"),function(d){return d/m.count()*c/3}),n=typeof i=="function";if(l.ignore=!0,this.updateAnimationPoints(l,s),a>0&&(c=this.getLineLength(l)/a*1e3),c!==this._period||x!==this._loop){l.stopAnimation();var h=i;n&&(h=i(u)),l.__t>0&&(h=-c*l.__t),l.__t=0;var g=l.animate("",x).when(c,{__t:1}).delay(h).during(function(){r.updateSymbolPosition(l)});x||g.done(function(){r.remove(l)}),g.start()}this._period=c,this._loop=x}},f.getLineLength=function(m){return D.dist(m.__p1,m.__cp1)+D.dist(m.__cp1,m.__p2)},f.updateAnimationPoints=function(m,o){m.__p1=o[0],m.__p2=o[1],m.__cp1=o[2]||[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]},f.updateData=function(m,o,u){this.childAt(0).updateData(m,o,u),this._updateEffectSymbol(m,o)},f.updateSymbolPosition=function(m){var o=m.__p1,u=m.__p2,l=m.__cp1,r=m.__t,s=m.position,c=[s[0],s[1]],x=b.quadraticAt,a=b.quadraticDerivativeAt;s[0]=x(o[0],l[0],u[0],r),s[1]=x(o[1],l[1],u[1],r);var i=a(o[0],l[0],u[0],r),n=a(o[1],l[1],u[1],r);if(m.rotation=-Math.atan2(n,i)-Math.PI/2,this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")if(m.__lastT!==void 0&&m.__lastT<m.__t){var h=D.dist(c,s)*1.05;m.attr("scale",[m.scale[0],h]),r===1&&(s[0]=c[0]+(s[0]-c[0])/2,s[1]=c[1]+(s[1]-c[1])/2)}else if(m.__lastT===1){var h=2*D.dist(o,s);m.attr("scale",[m.scale[0],h])}else m.attr("scale",this._symbolScale);m.__lastT=m.__t,m.ignore=!1},f.updateLayout=function(m,o){this.childAt(0).updateLayout(m,o);var u=m.getItemModel(o).getModel("effect");this._updateEffectAnimation(m,u,o)},R.inherits(C,M.Group);var v=C;X.exports=v},24105:function(X,z,e){var M=e(35417),F=e(31879),R=e(813),A=e(12072);function T(C,f,v){R.call(this,C,f,v),this._lastFrame=0,this._lastFramePercent=0}var D=T.prototype;D.createLine=function(C,f,v){return new M(C,f,v)},D.updateAnimationPoints=function(C,f){this._points=f;for(var v=[0],m=0,o=1;o<f.length;o++){var u=f[o-1],l=f[o];m+=A.dist(u,l),v.push(m)}if(m!==0){for(var o=0;o<v.length;o++)v[o]/=m;this._offsets=v,this._length=m}},D.getLineLength=function(C){return this._length},D.updateSymbolPosition=function(C){var f=C.__t,v=this._points,m=this._offsets,o=v.length;if(m){var u=this._lastFrame,l;if(f<this._lastFramePercent){var r=Math.min(u+1,o-1);for(l=r;l>=0&&!(m[l]<=f);l--);l=Math.min(l,o-2)}else{for(var l=u;l<o&&!(m[l]>f);l++);l=Math.min(l-1,o-2)}A.lerp(C.position,v[l],v[l+1],(f-m[l])/(m[l+1]-m[l]));var s=v[l+1][0]-v[l][0],c=v[l+1][1]-v[l][1];C.rotation=-Math.atan2(c,s)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=f,C.ignore=!1}},F.inherits(T,R);var b=T;X.exports=b},79138:function(X,z,e){var M=e(31879),F=e(35730),R=F.createSymbol,A=e(48070),T=A.Group,D=e(48354),b=D.parsePercent,C=e(13980),f=3;function v(r){return M.isArray(r)||(r=[+r,+r]),r}function m(r,s){var c=s.rippleEffectColor||s.color;r.eachChild(function(x){x.attr({z:s.z,zlevel:s.zlevel,style:{stroke:s.brushType==="stroke"?c:null,fill:s.brushType==="fill"?c:null}})})}function o(r,s){T.call(this);var c=new C(r,s),x=new T;this.add(c),this.add(x),x.beforeUpdate=function(){this.attr(c.getScale())},this.updateData(r,s)}var u=o.prototype;u.stopEffectAnimation=function(){this.childAt(1).removeAll()},u.startEffectAnimation=function(r){for(var s=r.symbolType,c=r.color,x=this.childAt(1),a=0;a<f;a++){var i=R(s,-1,-1,2,2,c);i.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var n=-a/f*r.period+r.effectOffset;i.animate("",!0).when(r.period,{scale:[r.rippleScale/2,r.rippleScale/2]}).delay(n).start(),i.animateStyle(!0).when(r.period,{opacity:0}).delay(n).start(),x.add(i)}m(x,r)},u.updateEffectAnimation=function(r){for(var s=this._effectCfg,c=this.childAt(1),x=["symbolType","period","rippleScale"],a=0;a<x.length;a++){var i=x[a];if(s[i]!==r[i]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}m(c,r)},u.highlight=function(){this.trigger("emphasis")},u.downplay=function(){this.trigger("normal")},u.updateData=function(r,s){var c=r.hostModel;this.childAt(0).updateData(r,s);var x=this.childAt(1),a=r.getItemModel(s),i=r.getItemVisual(s,"symbol"),n=v(r.getItemVisual(s,"symbolSize")),h=r.getItemVisual(s,"color");x.attr("scale",n),x.traverse(function(B){B.attr({fill:h})});var g=a.getShallow("symbolOffset");if(g){var d=x.position;d[0]=b(g[0],n[0]),d[1]=b(g[1],n[1])}var y=r.getItemVisual(s,"symbolRotate");x.rotation=(y||0)*Math.PI/180||0;var p={};if(p.showEffectOn=c.get("showEffectOn"),p.rippleScale=a.get("rippleEffect.scale"),p.brushType=a.get("rippleEffect.brushType"),p.period=a.get("rippleEffect.period")*1e3,p.effectOffset=s/r.count(),p.z=a.getShallow("z")||0,p.zlevel=a.getShallow("zlevel")||0,p.symbolType=i,p.color=h,p.rippleEffectColor=a.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),p.showEffectOn==="render")this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p;else{this._effectCfg=null,this.stopEffectAnimation();var w=this.childAt(0),S=function(){w.highlight(),p.showEffectOn!=="render"&&this.startEffectAnimation(p)},O=function(){w.downplay(),p.showEffectOn!=="render"&&this.stopEffectAnimation()};this.on("mouseover",S,this).on("mouseout",O,this).on("emphasis",S,this).on("normal",O,this)}this._effectCfg=p},u.fadeOut=function(r){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),r&&r()},M.inherits(o,T);var l=o;X.exports=l},14305:function(X,z,e){var M=e(48070),F=e(72440),R=e(84142),A=e(59188),T=M.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(f,v){var m=v.segs,o=v.curveness;if(v.polyline)for(var u=0;u<m.length;){var l=m[u++];if(l>0){f.moveTo(m[u++],m[u++]);for(var r=1;r<l;r++)f.lineTo(m[u++],m[u++])}}else for(var u=0;u<m.length;){var s=m[u++],c=m[u++],x=m[u++],a=m[u++];if(f.moveTo(s,c),o>0){var i=(s+x)/2-(c-a)*o,n=(c+a)/2-(x-s)*o;f.quadraticCurveTo(i,n,x,a)}else f.lineTo(x,a)}},findDataIndex:function(f,v){var m=this.shape,o=m.segs,u=m.curveness;if(m.polyline)for(var l=0,r=0;r<o.length;){var s=o[r++];if(s>0)for(var c=o[r++],x=o[r++],a=1;a<s;a++){var i=o[r++],n=o[r++];if(R.containStroke(c,x,i,n))return l}l++}else for(var l=0,r=0;r<o.length;){var c=o[r++],x=o[r++],i=o[r++],n=o[r++];if(u>0){var h=(c+i)/2-(x-n)*u,g=(x+n)/2-(i-c)*u;if(A.containStroke(c,x,h,g,i,n))return l}else if(R.containStroke(c,x,i,n))return l;l++}return-1}});function D(){this.group=new M.Group}var b=D.prototype;b.isPersistent=function(){return!this._incremental},b.updateData=function(f){this.group.removeAll();var v=new T({rectHover:!0,cursor:"default"});v.setShape({segs:f.getLayout("linesPoints")}),this._setCommon(v,f),this.group.add(v),this._incremental=null},b.incrementalPrepareUpdate=function(f){this.group.removeAll(),this._clearIncremental(),f.count()>5e5?(this._incremental||(this._incremental=new F({silent:!0})),this.group.add(this._incremental)):this._incremental=null},b.incrementalUpdate=function(f,v){var m=new T;m.setShape({segs:v.getLayout("linesPoints")}),this._setCommon(m,v,!!this._incremental),this._incremental?this._incremental.addDisplayable(m,!0):(m.rectHover=!0,m.cursor="default",m.__startIndex=f.start,this.group.add(m))},b.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},b._setCommon=function(f,v,m){var o=v.hostModel;f.setShape({polyline:o.get("polyline"),curveness:o.get("lineStyle.curveness")}),f.useStyle(o.getModel("lineStyle").getLineStyle()),f.style.strokeNoScale=!0;var u=v.getVisual("color");u&&f.setStyle("stroke",u),f.setStyle("fill"),m||(f.seriesIndex=o.seriesIndex,f.on("mousemove",function(l){f.dataIndex=null;var r=f.findDataIndex(l.offsetX,l.offsetY);r>0&&(f.dataIndex=r+f.__startIndex)}))},b._clearIncremental=function(){var f=this._incremental;f&&f.clearDisplaybles()};var C=D;X.exports=C},34567:function(X,z,e){var M=e(48070),F=e(35730),R=F.createSymbol,A=e(72440),T=4,D=M.extendShape({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(v,m){var o=m.points,u=m.size,l=this.symbolProxy,r=l.shape,s=v.getContext?v.getContext():v,c=s&&u[0]<T;if(!c)for(var x=0;x<o.length;){var a=o[x++],i=o[x++];isNaN(a)||isNaN(i)||this.softClipShape&&!this.softClipShape.contain(a,i)||(r.x=a-u[0]/2,r.y=i-u[1]/2,r.width=u[0],r.height=u[1],l.buildPath(v,r,!0))}},afterBrush:function(v){var m=this.shape,o=m.points,u=m.size,l=u[0]<T;if(l){this.setTransform(v);for(var r=0;r<o.length;){var s=o[r++],c=o[r++];isNaN(s)||isNaN(c)||this.softClipShape&&!this.softClipShape.contain(s,c)||v.fillRect(s-u[0]/2,c-u[1]/2,u[0],u[1])}this.restoreTransform(v)}},findDataIndex:function(v,m){for(var o=this.shape,u=o.points,l=o.size,r=Math.max(l[0],4),s=Math.max(l[1],4),c=u.length/2-1;c>=0;c--){var x=c*2,a=u[x]-r/2,i=u[x+1]-s/2;if(v>=a&&m>=i&&v<=a+r&&m<=i+s)return c}return-1}});function b(){this.group=new M.Group}var C=b.prototype;C.isPersistent=function(){return!this._incremental},C.updateData=function(v,m){this.group.removeAll();var o=new D({rectHover:!0,cursor:"default"});o.setShape({points:v.getLayout("symbolPoints")}),this._setCommon(o,v,!1,m),this.group.add(o),this._incremental=null},C.updateLayout=function(v){if(!this._incremental){var m=v.getLayout("symbolPoints");this.group.eachChild(function(o){if(o.startIndex!=null){var u=(o.endIndex-o.startIndex)*2,l=o.startIndex*4*2;m=new Float32Array(m.buffer,l,u)}o.setShape("points",m)})}},C.incrementalPrepareUpdate=function(v){this.group.removeAll(),this._clearIncremental(),v.count()>2e6?(this._incremental||(this._incremental=new A({silent:!0})),this.group.add(this._incremental)):this._incremental=null},C.incrementalUpdate=function(v,m,o){var u;this._incremental?(u=new D,this._incremental.addDisplayable(u,!0)):(u=new D({rectHover:!0,cursor:"default",startIndex:v.start,endIndex:v.end}),u.incremental=!0,this.group.add(u)),u.setShape({points:m.getLayout("symbolPoints")}),this._setCommon(u,m,!!this._incremental,o)},C._setCommon=function(v,m,o,u){var l=m.hostModel;u=u||{};var r=m.getVisual("symbolSize");v.setShape("size",r instanceof Array?r:[r,r]),v.softClipShape=u.clipShape||null,v.symbolProxy=R(m.getVisual("symbol"),0,0,0,0),v.setColor=v.symbolProxy.setColor;var s=v.shape.size[0]<T;v.useStyle(l.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var c=m.getVisual("color");c&&v.setColor(c),o||(v.seriesIndex=l.seriesIndex,v.on("mousemove",function(x){v.dataIndex=null;var a=v.findDataIndex(x.offsetX,x.offsetY);a>=0&&(v.dataIndex=a+(v.startIndex||0))}))},C.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},C._clearIncremental=function(){var v=this._incremental;v&&v.clearDisplaybles()};var f=b;X.exports=f},43959:function(X,z,e){var M=e(31879),F=e(12072),R=e(35730),A=e(84811),T=e(48070),D=e(48354),b=D.round,C=["fromSymbol","toSymbol"];function f(c){return"_"+c+"Type"}function v(c,x,a){var i=x.getItemVisual(a,c);if(!(!i||i==="none")){var n=x.getItemVisual(a,"color"),h=x.getItemVisual(a,c+"Size"),g=x.getItemVisual(a,c+"Rotate");M.isArray(h)||(h=[h,h]);var d=R.createSymbol(i,-h[0]/2,-h[1]/2,h[0],h[1],n);return d.__specifiedRotation=g==null||isNaN(g)?void 0:+g*Math.PI/180||0,d.name=c,d}}function m(c){var x=new A({name:"line",subPixelOptimize:!0});return o(x.shape,c),x}function o(c,x){c.x1=x[0][0],c.y1=x[0][1],c.x2=x[1][0],c.y2=x[1][1],c.percent=1;var a=x[2];a?(c.cpx1=a[0],c.cpy1=a[1]):(c.cpx1=NaN,c.cpy1=NaN)}function u(){var c=this,x=c.childOfName("fromSymbol"),a=c.childOfName("toSymbol"),i=c.childOfName("label");if(!(!x&&!a&&i.ignore)){for(var n=1,h=this.parent;h;)h.scale&&(n/=h.scale[0]),h=h.parent;var g=c.childOfName("line");if(!(!this.__dirty&&!g.__dirty)){var d=g.shape.percent,y=g.pointAt(0),p=g.pointAt(d),w=F.sub([],p,y);if(F.normalize(w,w),x){x.attr("position",y);var S=x.__specifiedRotation;if(S==null){var O=g.tangentAt(0);x.attr("rotation",Math.PI/2-Math.atan2(O[1],O[0]))}else x.attr("rotation",S);x.attr("scale",[n*d,n*d])}if(a){a.attr("position",p);var S=a.__specifiedRotation;if(S==null){var O=g.tangentAt(1);a.attr("rotation",-Math.PI/2-Math.atan2(O[1],O[0]))}else a.attr("rotation",S);a.attr("scale",[n*d,n*d])}if(!i.ignore){i.attr("position",p);var B,k,P,L,E=i.__labelDistance,N=E[0]*n,I=E[1]*n,G=d/2,O=g.tangentAt(G),W=[O[1],-O[0]],Z=g.pointAt(G);W[1]>0&&(W[0]=-W[0],W[1]=-W[1]);var U=O[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var H=-Math.atan2(O[1],O[0]);p[0]<y[0]&&(H=Math.PI+H),i.attr("rotation",H)}var V;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":V=-I,P="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":V=I,P="top";break;default:V=0,P="middle"}switch(i.__position){case"end":B=[w[0]*N+p[0],w[1]*I+p[1]],k=w[0]>.8?"left":w[0]<-.8?"right":"center",P=w[1]>.8?"top":w[1]<-.8?"bottom":"middle";break;case"start":B=[-w[0]*N+y[0],-w[1]*I+y[1]],k=w[0]>.8?"right":w[0]<-.8?"left":"center",P=w[1]>.8?"bottom":w[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":B=[N*U+y[0],y[1]+V],k=O[0]<0?"right":"left",L=[-N*U,-V];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":B=[Z[0],Z[1]+V],k="center",L=[0,-V];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":B=[-N*U+p[0],p[1]+V],k=O[0]>=0?"right":"left",L=[N*U,-V];break}i.attr({style:{textVerticalAlign:i.__verticalAlign||P,textAlign:i.__textAlign||k},position:B,scale:[n,n],origin:L})}}}}function l(c,x,a){T.Group.call(this),this._createLine(c,x,a)}var r=l.prototype;r.beforeUpdate=u,r._createLine=function(c,x,a){var i=c.hostModel,n=c.getItemLayout(x),h=m(n);h.shape.percent=0,T.initProps(h,{shape:{percent:1}},i,x),this.add(h);var g=new T.Text({name:"label",lineLabelOriginalOpacity:1});this.add(g),M.each(C,function(d){var y=v(d,c,x);this.add(y),this[f(d)]=c.getItemVisual(x,d)},this),this._updateCommonStl(c,x,a)},r.updateData=function(c,x,a){var i=c.hostModel,n=this.childOfName("line"),h=c.getItemLayout(x),g={shape:{}};o(g.shape,h),T.updateProps(n,g,i,x),M.each(C,function(d){var y=c.getItemVisual(x,d),p=f(d);if(this[p]!==y){this.remove(this.childOfName(d));var w=v(d,c,x);this.add(w)}this[p]=y},this),this._updateCommonStl(c,x,a)},r._updateCommonStl=function(c,x,a){var i=c.hostModel,n=this.childOfName("line"),h=a&&a.lineStyle,g=a&&a.hoverLineStyle,d=a&&a.labelModel,y=a&&a.hoverLabelModel;if(!a||c.hasItemOption){var p=c.getItemModel(x);h=p.getModel("lineStyle").getLineStyle(),g=p.getModel("emphasis.lineStyle").getLineStyle(),d=p.getModel("label"),y=p.getModel("emphasis.label")}var w=c.getItemVisual(x,"color"),S=M.retrieve3(c.getItemVisual(x,"opacity"),h.opacity,1);n.useStyle(M.defaults({strokeNoScale:!0,fill:"none",stroke:w,opacity:S},h)),n.hoverStyle=g,M.each(C,function(Z){var U=this.childOfName(Z);U&&(U.setColor(w),U.setStyle({opacity:S}))},this);var O=d.getShallow("show"),B=y.getShallow("show"),k=this.childOfName("label"),P,L;if((O||B)&&(P=w||"#000",L=i.getFormattedLabel(x,"normal",c.dataType),L==null)){var E=i.getRawValue(x);L=E==null?c.getName(x):isFinite(E)?b(E):E}var N=O?L:null,I=B?M.retrieve2(i.getFormattedLabel(x,"emphasis",c.dataType),L):null,G=k.style;if(N!=null||I!=null){T.setTextStyle(k.style,d,{text:N},{autoColor:P}),k.__textAlign=G.textAlign,k.__verticalAlign=G.textVerticalAlign,k.__position=d.get("position")||"middle";var W=d.get("distance");M.isArray(W)||(W=[W,W]),k.__labelDistance=W}I!=null?k.hoverStyle={text:I,textFill:y.getTextColor(!0),fontStyle:y.getShallow("fontStyle"),fontWeight:y.getShallow("fontWeight"),fontSize:y.getShallow("fontSize"),fontFamily:y.getShallow("fontFamily")}:k.hoverStyle={text:null},k.ignore=!O&&!B,T.setHoverStyle(this)},r.highlight=function(){this.trigger("emphasis")},r.downplay=function(){this.trigger("normal")},r.updateLayout=function(c,x){this.setLinePoints(c.getItemLayout(x))},r.setLinePoints=function(c){var x=this.childOfName("line");o(x.shape,c),x.dirty()},M.inherits(l,T.Group);var s=l;X.exports=s},89264:function(X,z,e){var M=e(48070),F=e(43959);function R(o){this._ctor=o||F,this.group=new M.Group}var A=R.prototype;A.isPersistent=function(){return!0},A.updateData=function(o){var u=this,l=u.group,r=u._lineData;u._lineData=o,r||l.removeAll();var s=C(o);o.diff(r).add(function(c){T(u,o,c,s)}).update(function(c,x){D(u,r,o,x,c,s)}).remove(function(c){l.remove(r.getItemGraphicEl(c))}).execute()};function T(o,u,l,r){var s=u.getItemLayout(l);if(v(s)){var c=new o._ctor(u,l,r);u.setItemGraphicEl(l,c),o.group.add(c)}}function D(o,u,l,r,s,c){var x=u.getItemGraphicEl(r);if(!v(l.getItemLayout(s))){o.group.remove(x);return}x?x.updateData(l,s,c):x=new o._ctor(l,s,c),l.setItemGraphicEl(s,x),o.group.add(x)}A.updateLayout=function(){var o=this._lineData;o&&o.eachItemGraphicEl(function(u,l){u.updateLayout(o,l)},this)},A.incrementalPrepareUpdate=function(o){this._seriesScope=C(o),this._lineData=null,this.group.removeAll()};function b(o){return o.animators&&o.animators.length>0}A.incrementalUpdate=function(o,u){function l(x){!x.isGroup&&!b(x)&&(x.incremental=x.useHoverLayer=!0)}for(var r=o.start;r<o.end;r++){var s=u.getItemLayout(r);if(v(s)){var c=new this._ctor(u,r,this._seriesScope);c.traverse(l),this.group.add(c),u.setItemGraphicEl(r,c)}}};function C(o){var u=o.hostModel;return{lineStyle:u.getModel("lineStyle").getLineStyle(),hoverLineStyle:u.getModel("emphasis.lineStyle").getLineStyle(),labelModel:u.getModel("label"),hoverLabelModel:u.getModel("emphasis.label")}}A.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},A._clearIncremental=function(){var o=this._incremental;o&&o.clearDisplaybles()};function f(o){return isNaN(o[0])||isNaN(o[1])}function v(o){return!f(o[0])&&!f(o[1])}var m=R;X.exports=m},84811:function(X,z,e){var M=e(48070),F=e(12072),R=M.Line.prototype,A=M.BezierCurve.prototype;function T(b){return isNaN(+b.cpx1)||isNaN(+b.cpy1)}var D=M.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(b,C){this[T(C)?"_buildPathLine":"_buildPathCurve"](b,C)},_buildPathLine:R.buildPath,_buildPathCurve:A.buildPath,pointAt:function(b){return this[T(this.shape)?"_pointAtLine":"_pointAtCurve"](b)},_pointAtLine:R.pointAt,_pointAtCurve:A.pointAt,tangentAt:function(b){var C=this.shape,f=T(C)?[C.x2-C.x1,C.y2-C.y1]:this._tangentAtCurve(b);return F.normalize(f,f)},_tangentAtCurve:A.tangentAt});X.exports=D},35417:function(X,z,e){var M=e(48070),F=e(31879);function R(D,b,C){M.Group.call(this),this._createPolyline(D,b,C)}var A=R.prototype;A._createPolyline=function(D,b,C){var f=D.getItemLayout(b),v=new M.Polyline({shape:{points:f}});this.add(v),this._updateCommonStl(D,b,C)},A.updateData=function(D,b,C){var f=D.hostModel,v=this.childAt(0),m={shape:{points:D.getItemLayout(b)}};M.updateProps(v,m,f,b),this._updateCommonStl(D,b,C)},A._updateCommonStl=function(D,b,C){var f=this.childAt(0),v=D.getItemModel(b),m=D.getItemVisual(b,"color"),o=C&&C.lineStyle,u=C&&C.hoverLineStyle;(!C||D.hasItemOption)&&(o=v.getModel("lineStyle").getLineStyle(),u=v.getModel("emphasis.lineStyle").getLineStyle()),f.useStyle(F.defaults({strokeNoScale:!0,fill:"none",stroke:m},o)),f.hoverStyle=u,M.setHoverStyle(this)},A.updateLayout=function(D,b){var C=this.childAt(0);C.setShape("points",D.getItemLayout(b))},F.inherits(R,M.Group);var T=R;X.exports=T},13980:function(X,z,e){var M=e(31879),F=e(35730),R=F.createSymbol,A=e(48070),T=e(48354),D=T.parsePercent,b=e(3768),C=b.getDefaultLabel;function f(i,n,h){A.Group.call(this),this.updateData(i,n,h)}var v=f.prototype,m=f.getSymbolSize=function(i,n){var h=i.getItemVisual(n,"symbolSize");return h instanceof Array?h.slice():[+h,+h]};function o(i){return[i[0]/2,i[1]/2]}function u(i,n){this.parent.drift(i,n)}v._createSymbol=function(i,n,h,g,d){this.removeAll();var y=n.getItemVisual(h,"color"),p=R(i,-1,-1,2,2,y,d);p.attr({z2:100,culling:!0,scale:o(g)}),p.drift=u,this._symbolType=i,this.add(p)},v.stopSymbolAnimation=function(i){this.childAt(0).stopAnimation(i)},v.getSymbolPath=function(){return this.childAt(0)},v.getScale=function(){return this.childAt(0).scale},v.highlight=function(){this.childAt(0).trigger("emphasis")},v.downplay=function(){this.childAt(0).trigger("normal")},v.setZ=function(i,n){var h=this.childAt(0);h.zlevel=i,h.z=n},v.setDraggable=function(i){var n=this.childAt(0);n.draggable=i,n.cursor=i?"move":n.cursor},v.updateData=function(i,n,h){this.silent=!1;var g=i.getItemVisual(n,"symbol")||"circle",d=i.hostModel,y=m(i,n),p=g!==this._symbolType;if(p){var w=i.getItemVisual(n,"symbolKeepAspect");this._createSymbol(g,i,n,y,w)}else{var S=this.childAt(0);S.silent=!1,A.updateProps(S,{scale:o(y)},d,n)}if(this._updateCommon(i,n,y,h),p){var S=this.childAt(0),O=h&&h.fadeIn,B={scale:S.scale.slice()};O&&(B.style={opacity:S.style.opacity}),S.scale=[0,0],O&&(S.style.opacity=0),A.initProps(S,B,d,n)}this._seriesModel=d};var l=["itemStyle"],r=["emphasis","itemStyle"],s=["label"],c=["emphasis","label"];v._updateCommon=function(i,n,h,g){var d=this.childAt(0),y=i.hostModel,p=i.getItemVisual(n,"color");d.type!=="image"?d.useStyle({strokeNoScale:!0}):d.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var w=g&&g.itemStyle,S=g&&g.hoverItemStyle,O=g&&g.symbolOffset,B=g&&g.labelModel,k=g&&g.hoverLabelModel,P=g&&g.hoverAnimation,L=g&&g.cursorStyle;if(!g||i.hasItemOption){var E=g&&g.itemModel?g.itemModel:i.getItemModel(n);w=E.getModel(l).getItemStyle(["color"]),S=E.getModel(r).getItemStyle(),O=E.getShallow("symbolOffset"),B=E.getModel(s),k=E.getModel(c),P=E.getShallow("hoverAnimation"),L=E.getShallow("cursor")}else S=M.extend({},S);var N=d.style,I=i.getItemVisual(n,"symbolRotate");d.attr("rotation",(I||0)*Math.PI/180||0),O&&d.attr("position",[D(O[0],h[0]),D(O[1],h[1])]),L&&d.attr("cursor",L),d.setColor(p,g&&g.symbolInnerColor),d.setStyle(w);var G=i.getItemVisual(n,"opacity");G!=null&&(N.opacity=G);var W=i.getItemVisual(n,"liftZ"),Z=d.__z2Origin;W!=null?Z==null&&(d.__z2Origin=d.z2,d.z2+=W):Z!=null&&(d.z2=Z,d.__z2Origin=null);var U=g&&g.useNameLabel;A.setLabelStyle(N,S,B,k,{labelFetcher:y,labelDataIndex:n,defaultText:H,isRectText:!0,autoColor:p});function H(V,Y){return U?i.getName(V):C(i,V)}d.__symbolOriginalScale=o(h),d.hoverStyle=S,d.highDownOnUpdate=P&&y.isAnimationEnabled()?x:null,A.setHoverStyle(d)};function x(i,n){if(!(this.incremental||this.useHoverLayer))if(n==="emphasis"){var h=this.__symbolOriginalScale,g=h[1]/h[0],d={scale:[Math.max(h[0]*1.1,h[0]+3),Math.max(h[1]*1.1,h[1]+3*g)]};this.animateTo(d,400,"elasticOut")}else n==="normal"&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}v.fadeOut=function(i,n){var h=this.childAt(0);this.silent=h.silent=!0,!(n&&n.keepLabel)&&(h.style.text=null),A.updateProps(h,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,i)},M.inherits(f,A.Group);var a=f;X.exports=a},52159:function(X,z,e){var M=e(48070),F=e(13980),R=e(31879),A=R.isObject;function T(m){this.group=new M.Group,this._symbolCtor=m||F}var D=T.prototype;function b(m,o,u,l){return o&&!isNaN(o[0])&&!isNaN(o[1])&&!(l.isIgnore&&l.isIgnore(u))&&!(l.clipShape&&!l.clipShape.contain(o[0],o[1]))&&m.getItemVisual(u,"symbol")!=="none"}D.updateData=function(m,o){o=C(o);var u=this.group,l=m.hostModel,r=this._data,s=this._symbolCtor,c=f(m);r||u.removeAll(),m.diff(r).add(function(x){var a=m.getItemLayout(x);if(b(m,a,x,o)){var i=new s(m,x,c);i.attr("position",a),m.setItemGraphicEl(x,i),u.add(i)}}).update(function(x,a){var i=r.getItemGraphicEl(a),n=m.getItemLayout(x);if(!b(m,n,x,o)){u.remove(i);return}i?(i.updateData(m,x,c),M.updateProps(i,{position:n},l)):(i=new s(m,x),i.attr("position",n)),u.add(i),m.setItemGraphicEl(x,i)}).remove(function(x){var a=r.getItemGraphicEl(x);a&&a.fadeOut(function(){u.remove(a)})}).execute(),this._data=m},D.isPersistent=function(){return!0},D.updateLayout=function(){var m=this._data;m&&m.eachItemGraphicEl(function(o,u){var l=m.getItemLayout(u);o.attr("position",l)})},D.incrementalPrepareUpdate=function(m){this._seriesScope=f(m),this._data=null,this.group.removeAll()},D.incrementalUpdate=function(m,o,u){u=C(u);function l(x){x.isGroup||(x.incremental=x.useHoverLayer=!0)}for(var r=m.start;r<m.end;r++){var s=o.getItemLayout(r);if(b(o,s,r,u)){var c=new this._symbolCtor(o,r,this._seriesScope);c.traverse(l),c.attr("position",s),this.group.add(c),o.setItemGraphicEl(r,c)}}};function C(m){return m!=null&&!A(m)&&(m={isIgnore:m}),m||{}}D.remove=function(m){var o=this.group,u=this._data;u&&m?u.eachItemGraphicEl(function(l){l.fadeOut(function(){o.remove(l)})}):o.removeAll()};function f(m){var o=m.hostModel;return{itemStyle:o.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:o.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:o.get("symbolRotate"),symbolOffset:o.get("symbolOffset"),hoverAnimation:o.get("hoverAnimation"),labelModel:o.getModel("label"),hoverLabelModel:o.getModel("emphasis.label"),cursorStyle:o.get("cursor")}}var v=T;X.exports=v},29686:function(X,z,e){var M=e(48070),F=e(48354),R=F.round;function A(b,C,f){var v=b.getArea(),m=b.getBaseAxis().isHorizontal(),o=v.x,u=v.y,l=v.width,r=v.height,s=f.get("lineStyle.width")||2;o-=s/2,u-=s/2,l+=s,r+=s,o=Math.floor(o),l=Math.round(l);var c=new M.Rect({shape:{x:o,y:u,width:l,height:r}});return C&&(c.shape[m?"width":"height"]=0,M.initProps(c,{shape:{width:l,height:r}},f)),c}function T(b,C,f){var v=b.getArea(),m=new M.Sector({shape:{cx:R(b.cx,1),cy:R(b.cy,1),r0:R(v.r0,1),r:R(v.r,1),startAngle:v.startAngle,endAngle:v.endAngle,clockwise:v.clockwise}});return C&&(m.shape.endAngle=v.startAngle,M.initProps(m,{shape:{endAngle:v.endAngle}},f)),m}function D(b,C,f){if(b){if(b.type==="polar")return T(b,C,f);if(b.type==="cartesian2d")return A(b,C,f)}else return null;return null}z.createGridClipPath=A,z.createPolarClipPath=T,z.createClipPath=D},31323:function(X,z,e){var M=e(31879),F=e(58677),R=e(31517),A=e(85567),T=e(80554),D=e(48642),b=e(1664);function C(f,v,m,o,u){for(var l=new R(o),r=0;r<f.length;r++)l.addNode(M.retrieve(f[r].id,f[r].name,r),r);for(var s=[],c=[],x=0,r=0;r<v.length;r++){var a=v[r],i=a.source,n=a.target;l.addEdge(i,n,x)&&(c.push(a),s.push(M.retrieve(a.id,i+" > "+n)),x++)}var h=m.get("coordinateSystem"),g;if(h==="cartesian2d"||h==="polar")g=b(f,m);else{var d=D.get(h),y=d&&d.type!=="view"?d.dimensions||[]:[];M.indexOf(y,"value")<0&&y.concat(["value"]);var p=T(f,{coordDimensions:y});g=new F(p,m),g.initData(f)}var w=new F(["value"],m);return w.initData(c,s),u&&u(g,w),A({mainData:g,struct:l,structAttr:"graph",datas:{node:g,edge:w},datasAttr:{node:"data",edge:"edgeData"}}),l.update(),l}X.exports=C},1664:function(X,z,e){var M=e(31879),F=e(58677),R=e(80554),A=e(17233),T=A.SOURCE_FORMAT_ORIGINAL,D=e(17071),b=D.getDimensionTypeByAxis,C=e(35454),f=C.getDataItemValue,v=e(48642),m=e(27499),o=m.getCoordSysInfoBySeries,u=e(4345),l=e(53618),r=l.enableDataStack,s=e(43036),c=s.makeSeriesEncodeForAxisCoordSys;function x(h,g,d){d=d||{},u.isInstance(h)||(h=u.seriesDataToSource(h));var y=g.get("coordinateSystem"),p=v.get(y),w=o(g),S;w&&(S=M.map(w.coordSysDims,function(N){var I={name:N},G=w.axisMap.get(N);if(G){var W=G.get("type");I.type=b(W)}return I})),S||(S=p&&(p.getDimensionsInfo?p.getDimensionsInfo():p.dimensions.slice())||["x","y"]);var O=R(h,{coordDimensions:S,generateCoord:d.generateCoord,encodeDefaulter:d.useEncodeDefaulter?M.curry(c,S,g):null}),B,k;w&&M.each(O,function(N,I){var G=N.coordDim,W=w.categoryAxisMap.get(G);W&&(B==null&&(B=I),N.ordinalMeta=W.getOrdinalMeta()),N.otherDims.itemName!=null&&(k=!0)}),!k&&B!=null&&(O[B].otherDims.itemName=0);var P=r(g,O),L=new F(O,g);L.setCalculationInfo(P);var E=B!=null&&a(h)?function(N,I,G,W){return W===B?G:this.defaultDimValueGetter(N,I,G,W)}:null;return L.hasItemOption=!1,L.initData(h,null,E),L}function a(h){if(h.sourceFormat===T){var g=i(h.data||[]);return g!=null&&!M.isArray(f(g))}}function i(h){for(var g=0;g<h.length&&h[g]==null;)g++;return h[g]}var n=x;X.exports=n},42347:function(X,z,e){var M=e(80554),F=e(58677),R=e(31879),A=R.extend,T=R.isArray;function D(b,C,f){C=T(C)&&{coordDimensions:C}||A({},C);var v=b.getSource(),m=M(v,C),o=new F(m,b);return o.initData(v,f),o}X.exports=D},50629:function(X,z,e){var M=e(35454),F=M.makeInner;function R(){var A=F();return function(T){var D=A(T),b=T.pipelineContext,C=D.large,f=D.progressiveRender,v=D.large=b&&b.large,m=D.progressiveRender=b&&b.progressiveRender;return!!(C^v||f^m)&&"reset"}}X.exports=R},79722:function(X,z,e){var M=e(3440);M.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),M.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){})},3768:function(X,z,e){var M=e(58708),F=M.retrieveRawValue;function R(A,T){var D=A.mapDimension("defaultedLabel",!0),b=D.length;if(b===1)return F(A,T,D[0]);if(b){for(var C=[],f=0;f<D.length;f++){var v=F(A,T,D[f]);C.push(v)}return C.join(" ")}}z.getDefaultLabel=R},37498:function(X,z,e){var M=e(31879),F="-->",R=function(u){return u.get("autoCurveness")||null},A=function(u,l){var r=R(u),s=20,c=[];if(typeof r=="number")s=r;else if(M.isArray(r)){u.__curvenessList=r;return}l>s&&(s=l);var x=s%2?s+2:s+3;c=[];for(var a=0;a<x;a++)c.push((a%2?a+1:a)/10*(a%2?-1:1));u.__curvenessList=c},T=function(u,l,r){var s=[u.id,u.dataIndex].join("."),c=[l.id,l.dataIndex].join(".");return[r.uid,s,c].join(F)},D=function(u){var l=u.split(F);return[l[0],l[2],l[1]].join(F)},b=function(u,l){var r=T(u.node1,u.node2,l);return l.__edgeMap[r]},C=function(u,l){var r=f(T(u.node1,u.node2,l),l),s=f(T(u.node2,u.node1,l),l);return r+s},f=function(u,l){var r=l.__edgeMap;return r[u]?r[u].length:0};function v(u){R(u)&&(u.__curvenessList=[],u.__edgeMap={},A(u))}function m(u,l,r,s){if(R(r)){var c=T(u,l,r),x=r.__edgeMap,a=x[D(c)];x[c]&&!a?x[c].isForward=!0:a&&x[c]&&(a.isForward=!0,x[c].isForward=!1),x[c]=x[c]||[],x[c].push(s)}}function o(u,l,r,s){var c=R(l),x=M.isArray(c);if(!c)return null;var a=b(u,l);if(!a)return null;for(var i=-1,n=0;n<a.length;n++)if(a[n]===r){i=n;break}var h=C(u,l);A(l,h),u.lineStyle=u.lineStyle||{};var g=T(u.node1,u.node2,l),d=l.__curvenessList,y=x||h%2?0:1;if(a.isForward)return d[y+i];var p=D(g),w=f(p,l),S=d[i+w+y];return s?x?c&&c[0]===0?(w+y)%2?S:-S:((w%2?0:1)+y)%2?S:-S:(w+y)%2?S:-S:d[i+w+y]}z.initCurvenessList=v,z.createEdgeMapForCurveness=m,z.getCurvenessForEdge=o},998:function(X,z,e){var M=e(31879);function F(D,b,C){if(D&&M.indexOf(b,D.type)>=0){var f=C.getData().tree.root,v=D.targetNode;if(typeof v=="string"&&(v=f.getNodeById(v)),v&&f.contains(v))return{node:v};var m=D.targetNodeId;if(m!=null&&(v=f.getNodeById(m)))return{node:v}}}function R(D){for(var b=[];D;)D=D.parentNode,D&&b.push(D);return b.reverse()}function A(D,b){var C=R(D);return M.indexOf(C,b)>=0}function T(D,b){for(var C=[];D;){var f=D.dataIndex;C.push({name:D.name,dataIndex:f,value:b.getRawValue(f)}),D=D.parentNode}return C.reverse(),C}z.retrieveTargetInfo=F,z.getPathToRoot=R,z.aboveViewRoot=A,z.wrapTreePathInfo=T},89184:function(X,z,e){var M=e(42347),F=e(31879),R=e(17071),A=R.getDimensionTypeByAxis,T=e(43036),D=T.makeSeriesEncodeForAxisCoordSys,b={_baseAxisDim:null,getInitialData:function(C,f){var v,m=f.getComponent("xAxis",this.get("xAxisIndex")),o=f.getComponent("yAxis",this.get("yAxisIndex")),u=m.get("type"),l=o.get("type"),r;u==="category"?(C.layout="horizontal",v=m.getOrdinalMeta(),r=!0):l==="category"?(C.layout="vertical",v=o.getOrdinalMeta(),r=!0):C.layout=C.layout||"horizontal";var s=["x","y"],c=C.layout==="horizontal"?0:1,x=this._baseAxisDim=s[c],a=s[1-c],i=[m,o],n=i[c].get("type"),h=i[1-c].get("type"),g=C.data;if(g&&r){var d=[];F.each(g,function(w,S){var O;w.value&&F.isArray(w.value)?(O=w.value.slice(),w.value.unshift(S)):F.isArray(w)?(O=w.slice(),w.unshift(S)):O=w,d.push(O)}),C.data=d}var y=this.defaultValueDimensions,p=[{name:x,type:A(n),ordinalMeta:v,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:a,type:A(h),dimsDef:y.slice()}];return M(this,{coordDimensions:p,dimensionsCount:y.length+1,encodeDefaulter:F.curry(D,p,this)})},getBaseAxis:function(){var C=this._baseAxisDim;return this.ecModel.getComponent(C+"Axis",this.get(C+"AxisIndex")).axis}};z.seriesModelMixin=b},23184:function(X,z,e){var M=e(3440);e(91),e(56171);var F=e(41124),R=e(75028),A=e(33064);e(15367),M.registerVisual(F("line","circle","line")),M.registerLayout(R("line")),M.registerProcessor(M.PRIORITY.PROCESSOR.STATISTIC,A("line"))},91:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(1664),A=e(2365),T=A.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(D,b){return R(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});X.exports=T},56171:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(18644),T=A.fromPoints,D=e(52159),b=e(13980),C=e(61498),f=e(48070),v=e(35454),m=e(96758),o=m.Polyline,u=m.Polygon,l=e(1911),r=e(87873),s=r.prepareDataCoordInfo,c=r.getStackedOnPoint,x=e(29686),a=x.createGridClipPath,i=x.createPolarClipPath;function n(k,P){if(k.length===P.length){for(var L=0;L<k.length;L++){var E=k[L],N=P[L];if(E[0]!==N[0]||E[1]!==N[1])return}return!0}}function h(k,P){var L=[],E=[],N=[],I=[];return T(k,L,E),T(P,N,I),Math.max(Math.abs(L[0]-N[0]),Math.abs(L[1]-N[1]),Math.abs(E[0]-I[0]),Math.abs(E[1]-I[1]))}function g(k){return typeof k=="number"?k:k?.5:0}function d(k,P,L){if(!L.valueDim)return[];for(var E=[],N=0,I=P.count();N<I;N++)E.push(c(L,k,P,N));return E}function y(k,P,L){for(var E=P.getBaseAxis(),N=E.dim==="x"||E.dim==="radius"?0:1,I=[],G=0;G<k.length-1;G++){var W=k[G+1],Z=k[G];I.push(Z);var U=[];switch(L){case"end":U[N]=W[N],U[1-N]=Z[1-N],I.push(U);break;case"middle":var H=(Z[N]+W[N])/2,V=[];U[N]=V[N]=H,U[1-N]=Z[1-N],V[1-N]=W[1-N],I.push(U),I.push(V);break;default:U[N]=Z[N],U[1-N]=W[1-N],I.push(U)}}return k[G]&&I.push(k[G]),I}function p(k,P){var L=k.getVisual("visualMeta");if(!(!L||!L.length||!k.count())&&P.type==="cartesian2d"){for(var E,N,I=L.length-1;I>=0;I--){var G=L[I].dimension,W=k.dimensions[G],Z=k.getDimensionInfo(W);if(E=Z&&Z.coordDim,E==="x"||E==="y"){N=L[I];break}}if(N){var U=P.getAxis(E),H=R.map(N.stops,function(nt){return{coord:U.toGlobalCoord(U.dataToCoord(nt.value)),color:nt.color}}),V=H.length,Y=N.outerColors.slice();V&&H[0].coord>H[V-1].coord&&(H.reverse(),Y.reverse());var $=10,K=H[0].coord-$,J=H[V-1].coord+$,Q=J-K;if(Q<.001)return"transparent";R.each(H,function(nt){nt.offset=(nt.coord-K)/Q}),H.push({offset:V?H[V-1].offset:.5,color:Y[1]||"transparent"}),H.unshift({offset:V?H[0].offset:.5,color:Y[0]||"transparent"});var et=new f.LinearGradient(0,0,0,0,H,!0);return et[E]=K,et[E+"2"]=J,et}}}function w(k,P,L){var E=k.get("showAllSymbol"),N=E==="auto";if(!(E&&!N)){var I=L.getAxesByScale("ordinal")[0];if(I&&!(N&&S(I,P))){var G=P.mapDimension(I.dim),W={};return R.each(I.getViewLabels(),function(Z){W[Z.tickValue]=1}),function(Z){return!W.hasOwnProperty(P.get(G,Z))}}}}function S(k,P){var L=k.getExtent(),E=Math.abs(L[1]-L[0])/k.scale.count();isNaN(E)&&(E=0);for(var N=P.count(),I=Math.max(1,Math.round(N/5)),G=0;G<N;G+=I)if(b.getSymbolSize(P,G)[k.isHorizontal()?1:0]*1.5>E)return!1;return!0}function O(k,P,L){if(k.type==="cartesian2d"){var E=k.getBaseAxis().isHorizontal(),N=a(k,P,L);if(!L.get("clip",!0)){var I=N.shape,G=Math.max(I.width,I.height);E?(I.y-=G,I.height+=G*2):(I.x-=G,I.width+=G*2)}return N}else return i(k,P,L)}var B=l.extend({type:"line",init:function(){var k=new f.Group,P=new D;this.group.add(P.group),this._symbolDraw=P,this._lineGroup=k},render:function(k,P,L){var E=k.coordinateSystem,N=this.group,I=k.getData(),G=k.getModel("lineStyle"),W=k.getModel("areaStyle"),Z=I.mapArray(I.getItemLayout),U=E.type==="polar",H=this._coordSys,V=this._symbolDraw,Y=this._polyline,$=this._polygon,K=this._lineGroup,J=k.get("animation"),Q=!W.isEmpty(),et=W.get("origin"),nt=s(E,I,et),st=d(E,I,nt),ut=k.get("showSymbol"),rt=ut&&!U&&w(k,I,E),ht=this._data;ht&&ht.eachItemGraphicEl(function(Tt,mt){Tt.__temp&&(N.remove(Tt),ht.setItemGraphicEl(mt,null))}),ut||V.remove(),N.add(K);var Pt=!U&&k.get("step"),wt;E&&E.getArea&&k.get("clip",!0)&&(wt=E.getArea(),wt.width!=null?(wt.x-=.1,wt.y-=.1,wt.width+=.2,wt.height+=.2):wt.r0&&(wt.r0-=.5,wt.r1+=.5)),this._clipShapeForSymbol=wt,Y&&H.type===E.type&&Pt===this._step?(Q&&!$?$=this._newPolygon(Z,st,E,J):$&&!Q&&(K.remove($),$=this._polygon=null),K.setClipPath(O(E,!1,k)),ut&&V.updateData(I,{isIgnore:rt,clipShape:wt}),I.eachItemGraphicEl(function(Tt){Tt.stopAnimation(!0)}),(!n(this._stackedOnPoints,st)||!n(this._points,Z))&&(J?this._updateAnimation(I,st,E,L,Pt,et):(Pt&&(Z=y(Z,E,Pt),st=y(st,E,Pt)),Y.setShape({points:Z}),$&&$.setShape({points:Z,stackedOnPoints:st})))):(ut&&V.updateData(I,{isIgnore:rt,clipShape:wt}),Pt&&(Z=y(Z,E,Pt),st=y(st,E,Pt)),Y=this._newPolyline(Z,E,J),Q&&($=this._newPolygon(Z,st,E,J)),K.setClipPath(O(E,!0,k)));var At=p(I,E)||I.getVisual("color");Y.useStyle(R.defaults(G.getLineStyle(),{fill:"none",stroke:At,lineJoin:"bevel"}));var Nt=k.get("smooth");if(Nt=g(k.get("smooth")),Y.setShape({smooth:Nt,smoothMonotone:k.get("smoothMonotone"),connectNulls:k.get("connectNulls")}),$){var Lt=I.getCalculationInfo("stackedOnSeries"),Rt=0;$.useStyle(R.defaults(W.getAreaStyle(),{fill:At,opacity:.7,lineJoin:"bevel"})),Lt&&(Rt=g(Lt.get("smooth"))),$.setShape({smooth:Nt,stackedOnSmooth:Rt,smoothMonotone:k.get("smoothMonotone"),connectNulls:k.get("connectNulls")})}this._data=I,this._coordSys=E,this._stackedOnPoints=st,this._points=Z,this._step=Pt,this._valueOrigin=et},dispose:function(){},highlight:function(k,P,L,E){var N=k.getData(),I=v.queryDataIndex(N,E);if(!(I instanceof Array)&&I!=null&&I>=0){var G=N.getItemGraphicEl(I);if(!G){var W=N.getItemLayout(I);if(!W||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(W[0],W[1]))return;G=new b(N,I),G.position=W,G.setZ(k.get("zlevel"),k.get("z")),G.ignore=isNaN(W[0])||isNaN(W[1]),G.__temp=!0,N.setItemGraphicEl(I,G),G.stopSymbolAnimation(!0),this.group.add(G)}G.highlight()}else l.prototype.highlight.call(this,k,P,L,E)},downplay:function(k,P,L,E){var N=k.getData(),I=v.queryDataIndex(N,E);if(I!=null&&I>=0){var G=N.getItemGraphicEl(I);G&&(G.__temp?(N.setItemGraphicEl(I,null),this.group.remove(G)):G.downplay())}else l.prototype.downplay.call(this,k,P,L,E)},_newPolyline:function(k){var P=this._polyline;return P&&this._lineGroup.remove(P),P=new o({shape:{points:k},silent:!0,z2:10}),this._lineGroup.add(P),this._polyline=P,P},_newPolygon:function(k,P){var L=this._polygon;return L&&this._lineGroup.remove(L),L=new u({shape:{points:k,stackedOnPoints:P},silent:!0}),this._lineGroup.add(L),this._polygon=L,L},_updateAnimation:function(k,P,L,E,N,I){var G=this._polyline,W=this._polygon,Z=k.hostModel,U=C(this._data,k,this._stackedOnPoints,P,this._coordSys,L,this._valueOrigin,I),H=U.current,V=U.stackedOnCurrent,Y=U.next,$=U.stackedOnNext;if(N&&(H=y(U.current,L,N),V=y(U.stackedOnCurrent,L,N),Y=y(U.next,L,N),$=y(U.stackedOnNext,L,N)),h(H,Y)>3e3||W&&h(V,$)>3e3){G.setShape({points:Y}),W&&W.setShape({points:Y,stackedOnPoints:$});return}G.shape.__points=U.current,G.shape.points=H,f.updateProps(G,{shape:{points:Y}},Z),W&&(W.setShape({points:H,stackedOnPoints:V}),f.updateProps(W,{shape:{points:Y,stackedOnPoints:$}},Z));for(var K=[],J=U.status,Q=0;Q<J.length;Q++){var et=J[Q].cmd;if(et==="="){var nt=k.getItemGraphicEl(J[Q].idx1);nt&&K.push({el:nt,ptIdx:Q})}}G.animators&&G.animators.length&&G.animators[0].during(function(){for(var st=0;st<K.length;st++){var ut=K[st].el;ut.attr("position",G.shape.__points[K[st].ptIdx])}})},remove:function(k){var P=this.group,L=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),L&&L.eachItemGraphicEl(function(E,N){E.__temp&&(P.remove(E),L.setItemGraphicEl(N,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});X.exports=B},87873:function(X,z,e){var M=e(53618),F=M.isDimensionStacked,R=e(31879),A=R.map;function T(C,f,v){var m=C.getBaseAxis(),o=C.getOtherAxis(m),u=D(o,v),l=m.dim,r=o.dim,s=f.mapDimension(r),c=f.mapDimension(l),x=r==="x"||r==="radius"?1:0,a=A(C.dimensions,function(h){return f.mapDimension(h)}),i,n=f.getCalculationInfo("stackResultDimension");return(i|=F(f,a[0]))&&(a[0]=n),(i|=F(f,a[1]))&&(a[1]=n),{dataDimsForPoint:a,valueStart:u,valueAxisDim:r,baseAxisDim:l,stacked:!!i,valueDim:s,baseDim:c,baseDataOffset:x,stackedOverDimension:f.getCalculationInfo("stackedOverDimension")}}function D(C,f){var v=0,m=C.scale.getExtent();return f==="start"?v=m[0]:f==="end"?v=m[1]:m[0]>0?v=m[0]:m[1]<0&&(v=m[1]),v}function b(C,f,v,m){var o=NaN;C.stacked&&(o=v.get(v.getCalculationInfo("stackedOverDimension"),m)),isNaN(o)&&(o=C.valueStart);var u=C.baseDataOffset,l=[];return l[u]=v.get(C.baseDim,m),l[1-u]=o,f.dataToPoint(l)}z.prepareDataCoordInfo=T,z.getStackedOnPoint=b},61498:function(X,z,e){var M=e(87873),F=M.prepareDataCoordInfo,R=M.getStackedOnPoint;function A(D,b){var C=[];return b.diff(D).add(function(f){C.push({cmd:"+",idx:f})}).update(function(f,v){C.push({cmd:"=",idx:v,idx1:f})}).remove(function(f){C.push({cmd:"-",idx:f})}).execute(),C}function T(D,b,C,f,v,m,o,u){for(var l=A(D,b),r=[],s=[],c=[],x=[],a=[],i=[],n=[],h=F(v,b,o),g=F(m,D,u),d=0;d<l.length;d++){var y=l[d],p=!0;switch(y.cmd){case"=":var w=D.getItemLayout(y.idx),S=b.getItemLayout(y.idx1);(isNaN(w[0])||isNaN(w[1]))&&(w=S.slice()),r.push(w),s.push(S),c.push(C[y.idx]),x.push(f[y.idx1]),n.push(b.getRawIndex(y.idx1));break;case"+":var O=y.idx;r.push(v.dataToPoint([b.get(h.dataDimsForPoint[0],O),b.get(h.dataDimsForPoint[1],O)])),s.push(b.getItemLayout(O).slice()),c.push(R(h,v,b,O)),x.push(f[O]),n.push(b.getRawIndex(O));break;case"-":var O=y.idx,B=D.getRawIndex(O);B!==O?(r.push(D.getItemLayout(O)),s.push(m.dataToPoint([D.get(g.dataDimsForPoint[0],O),D.get(g.dataDimsForPoint[1],O)])),c.push(C[O]),x.push(R(g,m,D,O)),n.push(B)):p=!1}p&&(a.push(y),i.push(i.length))}i.sort(function(I,G){return n[I]-n[G]});for(var k=[],P=[],L=[],E=[],N=[],d=0;d<i.length;d++){var O=i[d];k[d]=r[O],P[d]=s[O],L[d]=c[O],E[d]=x[O],N[d]=a[O]}return{current:k,next:P,stackedOnCurrent:L,stackedOnNext:E,status:N}}X.exports=T},96758:function(X,z,e){var M=e(54904),F=e(12072),R=e(7805),A=F.min,T=F.max,D=F.scaleAndAdd,b=F.copy,C=[],f=[],v=[];function m(x){return isNaN(x[0])||isNaN(x[1])}function o(x,a,i,n,h,g,d,y,p,w,S){return w==="none"||!w?l.apply(this,arguments):u.apply(this,arguments)}function u(x,a,i,n,h,g,d,y,p,w,S){for(var O=0,B=i,k=0;k<n;k++){var P=a[B];if(B>=h||B<0)break;if(m(P)){if(S){B+=g;continue}break}if(B===i)x[g>0?"moveTo":"lineTo"](P[0],P[1]);else if(p>0){var L=a[O],E=w==="y"?1:0,N=(P[E]-L[E])*p;b(f,L),f[E]=L[E]+N,b(v,P),v[E]=P[E]-N,x.bezierCurveTo(f[0],f[1],v[0],v[1],P[0],P[1])}else x.lineTo(P[0],P[1]);O=B,B+=g}return k}function l(x,a,i,n,h,g,d,y,p,w,S){for(var O=0,B=i,k=0;k<n;k++){var P=a[B];if(B>=h||B<0)break;if(m(P)){if(S){B+=g;continue}break}if(B===i)x[g>0?"moveTo":"lineTo"](P[0],P[1]),b(f,P);else if(p>0){var L=B+g,I=a[L];if(S)for(;I&&m(a[L]);)L+=g,I=a[L];var E=.5,N=a[O],I=a[L];if(!I||m(I))b(v,P);else{m(I)&&!S&&(I=P),F.sub(C,I,N);var G,W;if(w==="x"||w==="y"){var Z=w==="x"?0:1;G=Math.abs(P[Z]-N[Z]),W=Math.abs(P[Z]-I[Z])}else G=F.dist(P,N),W=F.dist(P,I);E=W/(W+G),D(v,P,C,-p*(1-E))}A(f,f,y),T(f,f,d),A(v,v,y),T(v,v,d),x.bezierCurveTo(f[0],f[1],v[0],v[1],P[0],P[1]),D(f,P,C,p*E)}else x.lineTo(P[0],P[1]);O=B,B+=g}return k}function r(x,a){var i=[1/0,1/0],n=[-1/0,-1/0];if(a)for(var h=0;h<x.length;h++){var g=x[h];g[0]<i[0]&&(i[0]=g[0]),g[1]<i[1]&&(i[1]=g[1]),g[0]>n[0]&&(n[0]=g[0]),g[1]>n[1]&&(n[1]=g[1])}return{min:a?i:n,max:a?n:i}}var s=M.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:R(M.prototype.brush),buildPath:function(x,a){var i=a.points,n=0,h=i.length,g=r(i,a.smoothConstraint);if(a.connectNulls){for(;h>0&&m(i[h-1]);h--);for(;n<h&&m(i[n]);n++);}for(;n<h;)n+=o(x,i,n,h,h,1,g.min,g.max,a.smooth,a.smoothMonotone,a.connectNulls)+1}}),c=M.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:R(M.prototype.brush),buildPath:function(x,a){var i=a.points,n=a.stackedOnPoints,h=0,g=i.length,d=a.smoothMonotone,y=r(i,a.smoothConstraint),p=r(n,a.smoothConstraint);if(a.connectNulls){for(;g>0&&m(i[g-1]);g--);for(;h<g&&m(i[h]);h++);}for(;h<g;){var w=o(x,i,h,g,g,1,y.min,y.max,a.smooth,d,a.connectNulls);o(x,n,h+w-1,w,g,-1,p.min,p.max,a.stackedOnSmooth,d,a.connectNulls),h+=w+1,x.closePath()}}});z.Polyline=s,z.Polygon=c},53088:function(X,z,e){var M=e(3440);e(44163),e(24970);var F=e(90360),R=e(70945);M.registerLayout(F),M.registerVisual(R)},44163:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(2365),A=e(58677),T=e(31879),D=T.concatArray,b=T.mergeAll,C=T.map,f=e(17795),v=f.encodeHTML,m=e(48642),o=typeof Uint32Array>"u"?Array:Uint32Array,u=typeof Float64Array>"u"?Array:Float64Array;function l(c){var x=c.data;x&&x[0]&&x[0][0]&&x[0][0].coord&&(c.data=C(x,function(a){var i=[a[0].coord,a[1].coord],n={coords:i};return a[0].name&&(n.fromName=a[0].name),a[1].name&&(n.toName=a[1].name),b([n,a[0],a[1]])}))}var r=R.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(c){c.data=c.data||[],l(c);var x=this._processFlatCoordsArray(c.data);this._flatCoords=x.flatCoords,this._flatCoordsOffset=x.flatCoordsOffset,x.flatCoords&&(c.data=new Float32Array(x.count)),r.superApply(this,"init",arguments)},mergeOption:function(c){if(l(c),c.data){var x=this._processFlatCoordsArray(c.data);this._flatCoords=x.flatCoords,this._flatCoordsOffset=x.flatCoordsOffset,x.flatCoords&&(c.data=new Float32Array(x.count))}r.superApply(this,"mergeOption",arguments)},appendData:function(c){var x=this._processFlatCoordsArray(c.data);x.flatCoords&&(this._flatCoords?(this._flatCoords=D(this._flatCoords,x.flatCoords),this._flatCoordsOffset=D(this._flatCoordsOffset,x.flatCoordsOffset)):(this._flatCoords=x.flatCoords,this._flatCoordsOffset=x.flatCoordsOffset),c.data=new Float32Array(x.count)),this.getRawData().appendData(c.data)},_getCoordsFromItemModel:function(c){var x=this.getData().getItemModel(c),a=x.option instanceof Array?x.option:x.getShallow("coords");return a},getLineCoordsCount:function(c){return this._flatCoordsOffset?this._flatCoordsOffset[c*2+1]:this._getCoordsFromItemModel(c).length},getLineCoords:function(c,x){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[c*2],i=this._flatCoordsOffset[c*2+1],n=0;n<i;n++)x[n]=x[n]||[],x[n][0]=this._flatCoords[a+n*2],x[n][1]=this._flatCoords[a+n*2+1];return i}else{for(var h=this._getCoordsFromItemModel(c),n=0;n<h.length;n++)x[n]=x[n]||[],x[n][0]=h[n][0],x[n][1]=h[n][1];return h.length}},_processFlatCoordsArray:function(c){var x=0;if(this._flatCoords&&(x=this._flatCoords.length),typeof c[0]=="number"){for(var a=c.length,i=new o(a),n=new u(a),h=0,g=0,d=0,y=0;y<a;){d++;var p=c[y++];i[g++]=h+x,i[g++]=p;for(var w=0;w<p;w++){var S=c[y++],O=c[y++];n[h++]=S,n[h++]=O,y>a}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,g),flatCoords:n,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:c.length}},getInitialData:function(c,x){var a=new A(["value"],this);return a.hasItemOption=!1,a.initData(c.data,[],function(i,n,h,g){if(i instanceof Array)return NaN;a.hasItemOption=!0;var d=i.value;if(d!=null)return d instanceof Array?d[g]:d}),a},formatTooltip:function(c){var x=this.getData(),a=x.getItemModel(c),i=a.get("name");if(i)return i;var n=a.get("fromName"),h=a.get("toName"),g=[];return n!=null&&g.push(n),h!=null&&g.push(h),v(g.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var c=this.option.progressive;return c??(this.option.large?1e4:this.get("progressive"))},getProgressiveThreshold:function(){var c=this.option.progressiveThreshold;return c??(this.option.large?2e4:this.get("progressiveThreshold"))},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}),s=r;X.exports=s},24970:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(89264),T=e(813),D=e(43959),b=e(35417),C=e(24105),f=e(14305),v=e(90360),m=e(29686),o=m.createClipPath,u=R.extendChartView({type:"lines",init:function(){},render:function(l,r,s){var c=l.getData(),x=this._updateLineDraw(c,l),a=l.get("zlevel"),i=l.get("effect.trailLength"),n=s.getZr(),h=n.painter.getType()==="svg";h||n.painter.getLayer(a).clear(!0),this._lastZlevel!=null&&!h&&n.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(l)&&i&&(h||n.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(i/10+.9,1),0)})),x.updateData(c);var g=l.get("clip",!0)&&o(l.coordinateSystem,!1,l);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(l,r,s){var c=l.getData(),x=this._updateLineDraw(c,l);x.incrementalPrepareUpdate(c),this._clearLayer(s),this._finished=!1},incrementalRender:function(l,r,s){this._lineDraw.incrementalUpdate(l,r.getData()),this._finished=l.end===r.getData().count()},updateTransform:function(l,r,s){var c=l.getData(),x=l.pipelineContext;if(!this._finished||x.large||x.progressiveRender)return{update:!0};var a=v.reset(l);a.progress&&a.progress({start:0,end:c.count()},c),this._lineDraw.updateLayout(),this._clearLayer(s)},_updateLineDraw:function(l,r){var s=this._lineDraw,c=this._showEffect(r),x=!!r.get("polyline"),a=r.pipelineContext,i=a.large;return(!s||c!==this._hasEffet||x!==this._isPolyline||i!==this._isLargeDraw)&&(s&&s.remove(),s=this._lineDraw=i?new f:new A(x?c?C:b:c?T:D),this._hasEffet=c,this._isPolyline=x,this._isLargeDraw=i,this.group.removeAll()),this.group.add(s.group),s},_showEffect:function(l){return!!l.get("effect.show")},_clearLayer:function(l){var r=l.getZr(),s=r.painter.getType()==="svg";!s&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(l,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},dispose:function(){}});X.exports=u},90360:function(X,z,e){var M=e(50629),F={seriesType:"lines",plan:M(),reset:function(R){var A=R.coordinateSystem,T=R.get("polyline"),D=R.pipelineContext.large;function b(C,f){var v=[];if(D){var m,o=C.end-C.start;if(T){for(var u=0,l=C.start;l<C.end;l++)u+=R.getLineCoordsCount(l);m=new Float32Array(o+u*2)}else m=new Float32Array(o*4);for(var r=0,s=[],l=C.start;l<C.end;l++){var c=R.getLineCoords(l,v);T&&(m[r++]=c);for(var x=0;x<c;x++)s=A.dataToPoint(v[x],!1,s),m[r++]=s[0],m[r++]=s[1]}f.setLayout("linesPoints",m)}else for(var l=C.start;l<C.end;l++){var a=f.getItemModel(l),c=R.getLineCoords(l,v),i=[];if(T)for(var n=0;n<c;n++)i.push(A.dataToPoint(v[n]));else{i[0]=A.dataToPoint(v[0]),i[1]=A.dataToPoint(v[1]);var h=a.get("lineStyle.curveness");+h&&(i[2]=[(i[0][0]+i[1][0])/2-(i[0][1]-i[1][1])*h,(i[0][1]+i[1][1])/2-(i[1][0]-i[0][0])*h])}f.setItemLayout(l,i)}}return{progress:b}}};X.exports=F},70945:function(X){function z(F){return F instanceof Array||(F=[F,F]),F}var e="lineStyle.opacity".split("."),M={seriesType:"lines",reset:function(F,R,A){var T=z(F.get("symbol")),D=z(F.get("symbolSize")),b=F.getData();b.setVisual("fromSymbol",T&&T[0]),b.setVisual("toSymbol",T&&T[1]),b.setVisual("fromSymbolSize",D&&D[0]),b.setVisual("toSymbolSize",D&&D[1]),b.setVisual("opacity",F.get(e));function C(f,v){var m=f.getItemModel(v),o=z(m.getShallow("symbol",!0)),u=z(m.getShallow("symbolSize",!0)),l=m.get(e);o[0]&&f.setItemVisual(v,"fromSymbol",o[0]),o[1]&&f.setItemVisual(v,"toSymbol",o[1]),u[0]&&f.setItemVisual(v,"fromSymbolSize",u[0]),u[1]&&f.setItemVisual(v,"toSymbolSize",u[1]),f.setItemVisual(v,"opacity",l)}return{dataEach:b.hasItemOption?C:null}}};X.exports=M},87387:function(X,z,e){var M=e(3440);e(34738),e(5027),e(33894),e(27547);var F=e(65887),R=e(21004),A=e(95501),T=e(11699),D=e(9652);M.registerLayout(F),M.registerVisual(R),M.registerProcessor(M.PRIORITY.PROCESSOR.STATISTIC,A),M.registerPreprocessor(T),D("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])},34738:function(X,z,e){var M=e(31879),F=e(42347),R=e(2365),A=e(17795),T=A.encodeHTML,D=A.addCommas,b=e(14748),C=e(58708),f=C.retrieveRawAttr,v=e(8590),m=e(43036),o=m.makeSeriesEncodeForNameBased,u=R.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(r){for(var s=F(this,{coordDimensions:["value"],encodeDefaulter:M.curry(o,this)}),c=s.mapDimension("value"),x=M.createHashMap(),a=[],i=[],n=0,h=s.count();n<h;n++){var g=s.getName(n);x.set(g,!0),a.push({name:g,value:s.get(c,n),selected:f(s,n,"selected")})}var d=v.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return M.each(d.regions,function(y){var p=y.name;x.get(p)||(a.push({name:p}),i.push(p))}),this.updateSelectedMap(a),s.appendValues([],i),s},getHostGeoModel:function(){var r=this.option.geoIndex;return r!=null?this.dependentModels.geo[r]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(r){var s=this.getData();return s.get(s.mapDimension("value"),r)},getRegionModel:function(r){var s=this.getData();return s.getItemModel(s.indexOfName(r))},formatTooltip:function(r,s,c,x){for(var a=this.getData(),i=D(this.getRawValue(r)),n=a.getName(r),h=this.seriesGroup,g=[],d=0;d<h.length;d++){var y=h[d].originalData.indexOfName(n),p=a.mapDimension("value");isNaN(h[d].originalData.get(p,y))||g.push(T(h[d].name))}var w=x==="html"?"<br/>":`
`;return g.join(", ")+w+T(n+" : "+i)},getTooltipPosition:function(r){if(r!=null){var s=this.getData().getName(r),c=this.coordinateSystem,x=c.getRegion(s);return x&&c.dataToPoint(x.center)}},setZoom:function(r){this.option.zoom=r},setCenter:function(r){this.option.center=r},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}});M.mixin(u,b);var l=u;X.exports=l},5027:function(X,z,e){var M=e(3440),F=e(31879),R=e(48070),A=e(7245),T="__seriesMapHighDown",D="__seriesMapCallKey",b=M.extendChartView({type:"map",render:function(v,m,o,u){if(!(u&&u.type==="mapToggleSelect"&&u.from===this.uid)){var l=this.group;if(l.removeAll(),!v.getHostGeoModel()){if(u&&u.type==="geoRoam"&&u.componentType==="series"&&u.seriesId===v.id){var r=this._mapDraw;r&&l.add(r.group)}else if(v.needsDrawMap){var r=this._mapDraw||new A(o,!0);l.add(r.group),r.draw(v,m,o,this,u),this._mapDraw=r}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;v.get("showLegendSymbol")&&m.getComponent("legend")&&this._renderSymbols(v,m,o)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(v,m,o){var u=v.originalData,l=this.group;u.each(u.mapDimension("value"),function(r,s){if(!isNaN(r)){var c=u.getItemLayout(s);if(!(!c||!c.point)){var x=c.point,a=c.offset,i=new R.Circle({style:{fill:v.getData().getVisual("color")},shape:{cx:x[0]+a*9,cy:x[1],r:3},silent:!0,z2:8+(a?0:R.Z2_EMPHASIS_LIFT+1)});if(!a){var n=v.mainSeries.getData(),h=u.getName(s),g=n.indexOfName(h),d=u.getItemModel(s),y=d.getModel("label"),p=d.getModel("emphasis.label"),w=n.getItemGraphicEl(g),S=F.retrieve2(v.getFormattedLabel(g,"normal"),h),O=F.retrieve2(v.getFormattedLabel(g,"emphasis"),S),B=w[T],k=Math.random();if(!B){B=w[T]={};var P=F.curry(C,!0),L=F.curry(C,!1);w.on("mouseover",P).on("mouseout",L).on("emphasis",P).on("normal",L)}w[D]=k,F.extend(B,{recordVersion:k,circle:i,labelModel:y,hoverLabelModel:p,emphasisText:O,normalText:S}),f(B,!1)}l.add(i)}}})}});function C(v){var m=this[T];m&&m.recordVersion===this[D]&&f(m,v)}function f(v,m){var o=v.circle,u=v.labelModel,l=v.hoverLabelModel,r=v.emphasisText,s=v.normalText;m?(o.style.extendFrom(R.setTextStyle({},l,{text:l.get("show")?r:null},{isRectText:!0,useInsideStyle:!1},!0)),o.__mapOriginalZ2=o.z2,o.z2+=R.Z2_EMPHASIS_LIFT):(R.setTextStyle(o.style,u,{text:u.get("show")?s:null,textPosition:u.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),o.dirty(!1),o.__mapOriginalZ2!=null&&(o.z2=o.__mapOriginalZ2,o.__mapOriginalZ2=null))}X.exports=b},11699:function(X,z,e){var M=e(31879);function F(R){var A=[];M.each(R.series,function(T){T&&T.type==="map"&&(A.push(T),T.map=T.map||T.mapType,M.defaults(T,T.mapLocation))})}X.exports=F},95501:function(X,z,e){var M=e(31879);function F(A,T){var D={};return M.each(A,function(b){b.each(b.mapDimension("value"),function(C,f){var v="ec-"+b.getName(f);D[v]=D[v]||[],isNaN(C)||D[v].push(C)})}),A[0].map(A[0].mapDimension("value"),function(b,C){for(var f="ec-"+A[0].getName(C),v=0,m=1/0,o=-1/0,u=D[f].length,l=0;l<u;l++)m=Math.min(m,D[f][l]),o=Math.max(o,D[f][l]),v+=D[f][l];var r;return T==="min"?r=m:T==="max"?r=o:T==="average"?r=v/u:r=v,u===0?NaN:r})}function R(A){var T={};A.eachSeriesByType("map",function(D){var b=D.getHostGeoModel(),C=b?"o"+b.id:"i"+D.getMapType();(T[C]=T[C]||[]).push(D)}),M.each(T,function(D,b){for(var C=F(M.map(D,function(v){return v.getData()}),D[0].get("mapValueCalculation")),f=0;f<D.length;f++)D[f].originalData=D[f].getData();for(var f=0;f<D.length;f++)D[f].seriesGroup=D,D[f].needsDrawMap=f===0&&!D[f].getHostGeoModel(),D[f].setData(C.cloneShallow()),D[f].mainSeries=D[0]})}X.exports=R},65887:function(X,z,e){var M=e(31879);function F(R){var A={};R.eachSeriesByType("map",function(T){var D=T.getMapType();if(!(T.getHostGeoModel()||A[D])){var b={};M.each(T.seriesGroup,function(f){var v=f.coordinateSystem,m=f.originalData;f.get("showLegendSymbol")&&R.getComponent("legend")&&m.each(m.mapDimension("value"),function(o,u){var l=m.getName(u),r=v.getRegion(l);if(!(!r||isNaN(o))){var s=b[l]||0,c=v.dataToPoint(r.center);b[l]=s+1,m.setItemLayout(u,{point:c,offset:s})}})});var C=T.getData();C.each(function(f){var v=C.getName(f),m=C.getItemLayout(f)||{};m.showLabel=!b[v],C.setItemLayout(f,m)}),A[D]=!0}})}X.exports=F},21004:function(X){function z(e){e.eachSeriesByType("map",function(M){var F=M.get("color"),R=M.getModel("itemStyle"),A=R.get("areaColor"),T=R.get("color")||F[M.seriesIndex%F.length];M.getData().setVisual({areaColor:A,color:T})})}X.exports=z},7986:function(X,z,e){var M=e(3440);e(60804),e(3431),e(26175);var F=e(77169);M.registerVisual(F)},3431:function(X,z,e){var M=e(31879),F=M.each,R=M.createHashMap,A=e(2365),T=e(1664),D=A.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(f,v){var m=this.getSource();return b(m,this),T(m,this)},getRawIndicesByActiveState:function(f){var v=this.coordinateSystem,m=this.getData(),o=[];return v.eachActiveState(m,function(u,l){f===u&&o.push(m.getRawIndex(l))}),o},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});function b(f,v){if(!f.encodeDefine){var m=v.ecModel.getComponent("parallel",v.get("parallelIndex"));if(m){var o=f.encodeDefine=R();F(m.dimensions,function(u){var l=C(u);o.set(u,l)})}}}function C(f){return+f.replace("dim","")}X.exports=D},26175:function(X,z,e){var M=e(48070),F=e(1911),R=.3,A=F.extend({type:"parallel",init:function(){this._dataGroup=new M.Group,this.group.add(this._dataGroup),this._data,this._initialized},render:function(o,u,l,r){var s=this._dataGroup,c=o.getData(),x=this._data,a=o.coordinateSystem,i=a.dimensions,n=C(o);c.diff(x).add(h).update(g).remove(d).execute();function h(p){var w=b(c,s,p,i,a);f(w,c,p,n)}function g(p,w){var S=x.getItemGraphicEl(w),O=D(c,p,i,a);c.setItemGraphicEl(p,S);var B=r&&r.animation===!1?null:o;M.updateProps(S,{shape:{points:O}},B,p),f(S,c,p,n)}function d(p){var w=x.getItemGraphicEl(p);s.remove(w)}if(!this._initialized){this._initialized=!0;var y=T(a,o,function(){setTimeout(function(){s.removeClipPath()})});s.setClipPath(y)}this._data=c},incrementalPrepareRender:function(o,u,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(o,u,l){for(var r=u.getData(),s=u.coordinateSystem,c=s.dimensions,x=C(u),a=o.start;a<o.end;a++){var i=b(r,this._dataGroup,a,c,s);i.incremental=!0,f(i,r,a,x)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});function T(o,u,l){var r=o.model,s=o.getRect(),c=new M.Rect({shape:{x:s.x,y:s.y,width:s.width,height:s.height}}),x=r.get("layout")==="horizontal"?"width":"height";return c.setShape(x,0),M.initProps(c,{shape:{width:s.width,height:s.height}},u,l),c}function D(o,u,l,r){for(var s=[],c=0;c<l.length;c++){var x=l[c],a=o.get(o.mapDimension(x),u);v(a,r.getAxis(x).type)||s.push(r.dataToPoint(a,x))}return s}function b(o,u,l,r,s){var c=D(o,l,r,s),x=new M.Polyline({shape:{points:c},silent:!0,z2:10});return u.add(x),o.setItemGraphicEl(l,x),x}function C(o){var u=o.get("smooth",!0);return u===!0&&(u=R),{lineStyle:o.getModel("lineStyle").getLineStyle(),smooth:u??R}}function f(o,u,l,r){var s=r.lineStyle;if(u.hasItemOption){var c=u.getItemModel(l).getModel("lineStyle");s=c.getLineStyle()}o.useStyle(s);var x=o.style;x.fill=null,x.stroke=u.getItemVisual(l,"color"),x.opacity=u.getItemVisual(l,"opacity"),r.smooth&&(o.shape.smooth=r.smooth)}function v(o,u){return u==="category"?o==null:o==null||isNaN(o)}var m=A;X.exports=m},77169:function(X){var z=["lineStyle","normal","opacity"],e={seriesType:"parallel",reset:function(M,F,R){var A=M.getModel("itemStyle"),T=M.getModel("lineStyle"),D=F.get("color"),b=T.get("color")||A.get("color")||D[M.seriesIndex%D.length],C=M.get("inactiveOpacity"),f=M.get("activeOpacity"),v=M.getModel("lineStyle").getLineStyle(),m=M.coordinateSystem,o=M.getData(),u={normal:v.opacity,active:f,inactive:C};o.setVisual("color",b);function l(r,s){m.eachActiveState(s,function(c,x){var a=u[c];if(c==="normal"&&s.hasItemOption){var i=s.getItemModel(x).get(z,!0);i!=null&&(a=i)}s.setItemVisual(x,"opacity",a)},r.start,r.end)}return{progress:l}}};X.exports=e},94385:function(X,z,e){var M=e(3440),F=e(31879);e(9145),e(63908),e(96736);var R=e(19641),A=R.layout,T=e(41124);e(15367),M.registerLayout(F.curry(A,"pictorialBar")),M.registerVisual(T("pictorialBar","roundRect"))},97199:function(X,z,e){var M=e(3440),F=e(31879);e(29307),e(86723);var R=e(9652),A=e(31310),T=e(12813),D=e(61614);R("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),M.registerVisual(A("pie")),M.registerLayout(F.curry(T,"pie")),M.registerProcessor(D("pie"))},29307:function(X,z,e){var M=e(3440),F=e(42347),R=e(31879),A=e(35454),T=e(48354),D=T.getPercentWithPrecision,b=e(14748),C=e(58708),f=C.retrieveRawAttr,v=e(43036),m=v.makeSeriesEncodeForNameBased,o=e(89960),u=M.extendSeriesModel({type:"series.pie",init:function(r){u.superApply(this,"init",arguments),this.legendVisualProvider=new o(R.bind(this.getData,this),R.bind(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(r)},mergeOption:function(r){u.superCall(this,"mergeOption",r),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(r,s){return F(this,{coordDimensions:["value"],encodeDefaulter:R.curry(m,this)})},_createSelectableList:function(){for(var r=this.getRawData(),s=r.mapDimension("value"),c=[],x=0,a=r.count();x<a;x++)c.push({name:r.getName(x),value:r.get(s,x),selected:f(r,x,"selected")});return c},getDataParams:function(r){var s=this.getData(),c=u.superCall(this,"getDataParams",r),x=[];return s.each(s.mapDimension("value"),function(a){x.push(a)}),c.percent=D(x,r,s.hostModel.get("percentPrecision")),c.$vars.push("percent"),c},_defaultLabelLine:function(r){A.defaultEmphasis(r,"labelLine",["show"]);var s=r.labelLine,c=r.emphasis.labelLine;s.show=s.show&&r.label.show,c.show=c.show&&r.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});R.mixin(u,b);var l=u;X.exports=l},86723:function(X,z,e){var M=e(31879),F=e(48070),R=e(1911);function A(v,m,o,u){var l=m.getData(),r=this.dataIndex,s=l.getName(r),c=m.get("selectedOffset");u.dispatchAction({type:"pieToggleSelect",from:v,name:s,seriesId:m.id}),l.each(function(x){T(l.getItemGraphicEl(x),l.getItemLayout(x),m.isSelected(l.getName(x)),c,o)})}function T(v,m,o,u,l){var r=(m.startAngle+m.endAngle)/2,s=Math.cos(r),c=Math.sin(r),x=o?u:0,a=[s*x,c*x];l?v.animate().when(200,{position:a}).start("bounceOut"):v.attr("position",a)}function D(v,m){F.Group.call(this);var o=new F.Sector({z2:2}),u=new F.Polyline,l=new F.Text;this.add(o),this.add(u),this.add(l),this.updateData(v,m,!0)}var b=D.prototype;b.updateData=function(v,m,o){var u=this.childAt(0),l=this.childAt(1),r=this.childAt(2),s=v.hostModel,c=v.getItemModel(m),x=v.getItemLayout(m),a=M.extend({},x);a.label=null;var i=s.getShallow("animationTypeUpdate");if(o){u.setShape(a);var n=s.getShallow("animationType");n==="scale"?(u.shape.r=x.r0,F.initProps(u,{shape:{r:x.r}},s,m)):(u.shape.endAngle=x.startAngle,F.updateProps(u,{shape:{endAngle:x.endAngle}},s,m))}else i==="expansion"?u.setShape(a):F.updateProps(u,{shape:a},s,m);var h=v.getItemVisual(m,"color");u.useStyle(M.defaults({lineJoin:"bevel",fill:h},c.getModel("itemStyle").getItemStyle())),u.hoverStyle=c.getModel("emphasis.itemStyle").getItemStyle();var g=c.getShallow("cursor");g&&u.attr("cursor",g),T(this,v.getItemLayout(m),s.isSelected(v.getName(m)),s.get("selectedOffset"),s.get("animation"));var d=!o&&i==="transition";this._updateLabel(v,m,d),this.highDownOnUpdate=s.get("silent")?null:function(y,p){var w=s.isAnimationEnabled()&&c.get("hoverAnimation");p==="emphasis"?(l.ignore=l.hoverIgnore,r.ignore=r.hoverIgnore,w&&(u.stopAnimation(!0),u.animateTo({shape:{r:x.r+s.get("hoverOffset")}},300,"elasticOut"))):(l.ignore=l.normalIgnore,r.ignore=r.normalIgnore,w&&(u.stopAnimation(!0),u.animateTo({shape:{r:x.r}},300,"elasticOut")))},F.setHoverStyle(this)},b._updateLabel=function(v,m,o){var u=this.childAt(1),l=this.childAt(2),r=v.hostModel,s=v.getItemModel(m),c=v.getItemLayout(m),x=c.label,y=v.getItemVisual(m,"color");if(!x||isNaN(x.x)||isNaN(x.y)){l.ignore=l.normalIgnore=l.hoverIgnore=u.ignore=u.normalIgnore=u.hoverIgnore=!0;return}var a={points:x.linePoints||[[x.x,x.y],[x.x,x.y],[x.x,x.y]]},i={x:x.x,y:x.y};o?(F.updateProps(u,{shape:a},r,m),F.updateProps(l,{style:i},r,m)):(u.attr({shape:a}),l.attr({style:i})),l.attr({rotation:x.rotation,origin:[x.x,x.y],z2:10});var n=s.getModel("label"),h=s.getModel("emphasis.label"),g=s.getModel("labelLine"),d=s.getModel("emphasis.labelLine"),y=v.getItemVisual(m,"color");F.setLabelStyle(l.style,l.hoverStyle={},n,h,{labelFetcher:v.hostModel,labelDataIndex:m,defaultText:x.text,autoColor:y,useInsideStyle:!!x.inside},{textAlign:x.textAlign,textVerticalAlign:x.verticalAlign,opacity:v.getItemVisual(m,"opacity")}),l.ignore=l.normalIgnore=!n.get("show"),l.hoverIgnore=!h.get("show"),u.ignore=u.normalIgnore=!g.get("show"),u.hoverIgnore=!d.get("show"),u.setStyle({stroke:y,opacity:v.getItemVisual(m,"opacity")}),u.setStyle(g.getModel("lineStyle").getLineStyle()),u.hoverStyle=d.getModel("lineStyle").getLineStyle();var p=g.get("smooth");p&&p===!0&&(p=.4),u.setShape({smooth:p})},M.inherits(D,F.Group);var C=R.extend({type:"pie",init:function(){var v=new F.Group;this._sectorGroup=v},render:function(v,m,o,u){if(!(u&&u.from===this.uid)){var l=v.getData(),r=this._data,s=this.group,c=m.get("animation"),x=!r,a=v.get("animationType"),i=v.get("animationTypeUpdate"),n=M.curry(A,this.uid,v,c,o),h=v.get("selectedMode");if(l.diff(r).add(function(w){var S=new D(l,w);x&&a!=="scale"&&S.eachChild(function(O){O.stopAnimation(!0)}),h&&S.on("click",n),l.setItemGraphicEl(w,S),s.add(S)}).update(function(w,S){var O=r.getItemGraphicEl(S);!x&&i!=="transition"&&O.eachChild(function(B){B.stopAnimation(!0)}),O.updateData(l,w),O.off("click"),h&&O.on("click",n),s.add(O),l.setItemGraphicEl(w,O)}).remove(function(w){var S=r.getItemGraphicEl(w);s.remove(S)}).execute(),c&&l.count()>0&&(x?a!=="scale":i!=="transition")){for(var g=l.getItemLayout(0),d=1;isNaN(g.startAngle)&&d<l.count();++d)g=l.getItemLayout(d);var y=Math.max(o.getWidth(),o.getHeight())/2,p=M.bind(s.removeClipPath,s);s.setClipPath(this._createClipPath(g.cx,g.cy,y,g.startAngle,g.clockwise,p,v,x))}else s.removeClipPath();this._data=l}},dispose:function(){},_createClipPath:function(v,m,o,u,l,r,s,c){var x=new F.Sector({shape:{cx:v,cy:m,r0:0,r:o,startAngle:u,endAngle:u,clockwise:l}}),a=c?F.initProps:F.updateProps;return a(x,{shape:{endAngle:u+(l?1:-1)*Math.PI*2}},s,r),x},containPoint:function(v,m){var o=m.getData(),u=o.getItemLayout(0);if(u){var l=v[0]-u.cx,r=v[1]-u.cy,s=Math.sqrt(l*l+r*r);return s<=u.r&&s>=u.r0}}}),f=C;X.exports=f},43561:function(X,z,e){var M=e(72113),F=e(48354),R=F.parsePercent,A=Math.PI/180;function T(f,v,m,o,u,l,r,s,c,x){f.sort(function(O,B){return O.y-B.y});function a(O,B,k,P){for(var L=O;L<B&&!(f[L].y+k>c+r);L++)if(f[L].y+=k,L>O&&L+1<B&&f[L+1].y>f[L].y+f[L].height){i(L,k/2);return}i(B-1,k/2)}function i(O,B){for(var k=O;k>=0&&!(f[k].y-B<c||(f[k].y-=B,k>0&&f[k].y>f[k-1].y+f[k-1].height));k--);}function n(O,B,k,P,L,E){for(var N=(E>0,B?Number.MAX_VALUE:0),I=0,G=O.length;I<G;I++)if(O[I].labelAlignTo==="none"){var W=Math.abs(O[I].y-P),Z=O[I].len,U=O[I].len2,H=W<L+Z?Math.sqrt((L+Z+U)*(L+Z+U)-W*W):Math.abs(O[I].x-k);B&&H>=N&&(H=N-10),!B&&H<=N&&(H=N+10),O[I].x=k+H*E,N=H}}for(var h=0,g,d=f.length,y=[],p=[],w=0;w<d;w++){if(f[w].position==="outer"&&f[w].labelAlignTo==="labelLine"){var S=f[w].x-x;f[w].linePoints[1][0]+=S,f[w].x=x}g=f[w].y-h,g<0&&a(w,d,-g,u),h=f[w].y+f[w].height}r-h<0&&i(d-1,h-r);for(var w=0;w<d;w++)f[w].y>=m?p.push(f[w]):y.push(f[w]);n(y,!1,v,m,o,u),n(p,!0,v,m,o,u)}function D(f,v,m,o,u,l,r,s){for(var c=[],x=[],a=Number.MAX_VALUE,i=-Number.MAX_VALUE,n=0;n<f.length;n++)b(f[n])||(f[n].x<v?(a=Math.min(a,f[n].x),c.push(f[n])):(i=Math.max(i,f[n].x),x.push(f[n])));T(x,v,m,o,1,u,l,r,s,i),T(c,v,m,o,-1,u,l,r,s,a);for(var n=0;n<f.length;n++){var h=f[n];if(!b(h)){var g=h.linePoints;if(g){var d=h.labelAlignTo==="edge",y=h.textRect.width,p;d?h.x<v?p=g[2][0]-h.labelDistance-r-h.labelMargin:p=r+u-h.labelMargin-g[2][0]-h.labelDistance:h.x<v?p=h.x-r-h.bleedMargin:p=r+u-h.x-h.bleedMargin,p<h.textRect.width&&(h.text=M.truncateText(h.text,p,h.font),h.labelAlignTo==="edge"&&(y=M.getWidth(h.text,h.font)));var w=g[1][0]-g[2][0];d?h.x<v?g[2][0]=r+h.labelMargin+y+h.labelDistance:g[2][0]=r+u-h.labelMargin-y-h.labelDistance:(h.x<v?g[2][0]=h.x+h.labelDistance:g[2][0]=h.x-h.labelDistance,g[1][0]=g[2][0]+w),g[1][1]=g[2][1]=h.y}}}}function b(f){return f.position==="center"}function C(f,v,m,o,u,l){var r=f.getData(),s=[],c,x,a=!1,i=(f.get("minShowLabelAngle")||0)*A;r.each(function(n){var h=r.getItemLayout(n),g=r.getItemModel(n),d=g.getModel("label"),y=d.get("position")||g.get("emphasis.label.position"),p=d.get("distanceToLabelLine"),w=d.get("alignTo"),S=R(d.get("margin"),m),O=d.get("bleedMargin"),B=d.getFont(),k=g.getModel("labelLine"),P=k.get("length");P=R(P,m);var L=k.get("length2");if(L=R(L,m),!(h.angle<i)){var E=(h.startAngle+h.endAngle)/2,N=Math.cos(E),I=Math.sin(E),G,W,Z,U;c=h.cx,x=h.cy;var H=f.getFormattedLabel(n,"normal")||r.getName(n),V=M.getBoundingRect(H,B,U,"top"),Y=y==="inside"||y==="inner";if(y==="center")G=h.cx,W=h.cy,U="center";else{var $=(Y?(h.r+h.r0)/2*N:h.r*N)+c,K=(Y?(h.r+h.r0)/2*I:h.r*I)+x;if(G=$+N*3,W=K+I*3,!Y){var J=$+N*(P+v-h.r),Q=K+I*(P+v-h.r),et=J+(N<0?-1:1)*L,nt=Q;w==="edge"?G=N<0?u+S:u+m-S:G=et+(N<0?-p:p),W=nt,Z=[[$,K],[J,Q],[et,nt]]}U=Y?"center":w==="edge"?N>0?"right":"left":N>0?"left":"right"}var st,ut=d.get("rotate");typeof ut=="number"?st=ut*(Math.PI/180):st=ut?N<0?-E+Math.PI:-E:0,a=!!st,h.label={x:G,y:W,position:y,height:V.height,len:P,len2:L,linePoints:Z,textAlign:U,verticalAlign:"middle",rotation:st,inside:Y,labelDistance:p,labelAlignTo:w,labelMargin:S,bleedMargin:O,textRect:V,text:H,font:B},Y||s.push(h.label)}}),!a&&f.get("avoidLabelOverlap")&&D(s,c,x,v,m,o,u,l)}X.exports=C},12813:function(X,z,e){var M=e(48354),F=M.parsePercent,R=M.linearMap,A=e(30871),T=e(43561),D=e(31879),b=Math.PI*2,C=Math.PI/180;function f(m,o){return A.getLayoutRect(m.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function v(m,o,u,l){o.eachSeriesByType(m,function(r){var s=r.getData(),c=s.mapDimension("value"),x=f(r,u),a=r.get("center"),i=r.get("radius");D.isArray(i)||(i=[0,i]),D.isArray(a)||(a=[a,a]);var n=F(x.width,u.getWidth()),h=F(x.height,u.getHeight()),g=Math.min(n,h),d=F(a[0],n)+x.x,y=F(a[1],h)+x.y,p=F(i[0],g/2),w=F(i[1],g/2),S=-r.get("startAngle")*C,O=r.get("minAngle")*C,B=0;s.each(c,function(V){!isNaN(V)&&B++});var k=s.getSum(c),P=Math.PI/(k||B)*2,L=r.get("clockwise"),E=r.get("roseType"),N=r.get("stillShowZeroSum"),I=s.getDataExtent(c);I[0]=0;var G=b,W=0,Z=S,U=L?1:-1;if(s.each(c,function(V,Y){var $;if(isNaN(V)){s.setItemLayout(Y,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:L,cx:d,cy:y,r0:p,r:E?NaN:w,viewRect:x});return}E!=="area"?$=k===0&&N?P:V*P:$=b/B,$<O?($=O,G-=O):W+=V;var K=Z+U*$;s.setItemLayout(Y,{angle:$,startAngle:Z,endAngle:K,clockwise:L,cx:d,cy:y,r0:p,r:E?R(V,I,[p,w]):w,viewRect:x}),Z=K}),G<b&&B)if(G<=.001){var H=b/B;s.each(c,function(V,Y){if(!isNaN(V)){var $=s.getItemLayout(Y);$.angle=H,$.startAngle=S+U*Y*H,$.endAngle=S+U*(Y+1)*H}})}else P=G/W,Z=S,s.each(c,function(V,Y){if(!isNaN(V)){var $=s.getItemLayout(Y),K=$.angle===O?O:V*P;$.startAngle=Z,$.endAngle=Z+U*K,Z+=U*K}});T(r,w,x.width,x.height,x.x,x.y)})}X.exports=v},33421:function(X,z,e){var M=e(3440);e(64041),e(64646),e(6306);var F=e(31310),R=e(41124),A=e(47052),T=e(61614),D=e(15752);M.registerVisual(F("radar")),M.registerVisual(R("radar","circle")),M.registerLayout(A),M.registerProcessor(T("radar")),M.registerPreprocessor(D)},64646:function(X,z,e){var M=e(2365),F=e(42347),R=e(31879),A=e(17795),T=A.encodeHTML,D=e(89960),b=M.extend({type:"series.radar",dependencies:["radar"],init:function(f){b.superApply(this,"init",arguments),this.legendVisualProvider=new D(R.bind(this.getData,this),R.bind(this.getRawData,this))},getInitialData:function(f,v){return F(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(f,v,m,o){var u=this.getData(),l=this.coordinateSystem,r=l.getIndicatorAxes(),s=this.getData().getName(f),c=o==="html"?"<br/>":`
`;return T(s===""?this.name:s)+c+R.map(r,function(x,a){var i=u.get(u.mapDimension(x.dim),f);return T(x.name+" : "+i)}).join(c)},getTooltipPosition:function(f){if(f!=null){for(var v=this.getData(),m=this.coordinateSystem,o=v.getValues(R.map(m.dimensions,function(s){return v.mapDimension(s)}),f,!0),u=0,l=o.length;u<l;u++)if(!isNaN(o[u])){var r=m.getIndicatorAxes();return m.coordToPoint(r[u].dataToCoord(o[u]),u)}}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}}),C=b;X.exports=C},6306:function(X,z,e){var M=e(3440),F=e(48070),R=e(31879),A=e(35730);function T(b){return R.isArray(b)||(b=[+b,+b]),b}var D=M.extendChartView({type:"radar",render:function(b,C,f){var v=b.coordinateSystem,m=this.group,o=b.getData(),u=this._data;function l(c,x){var a=c.getItemVisual(x,"symbol")||"circle",i=c.getItemVisual(x,"color");if(a!=="none"){var n=T(c.getItemVisual(x,"symbolSize")),h=A.createSymbol(a,-1,-1,2,2,i),g=c.getItemVisual(x,"symbolRotate")||0;return h.attr({style:{strokeNoScale:!0},z2:100,scale:[n[0]/2,n[1]/2],rotation:g*Math.PI/180||0}),h}}function r(c,x,a,i,n,h){a.removeAll();for(var g=0;g<x.length-1;g++){var d=l(i,n);d&&(d.__dimIdx=g,c[g]?(d.attr("position",c[g]),F[h?"initProps":"updateProps"](d,{position:x[g]},b,n)):d.attr("position",x[g]),a.add(d))}}function s(c){return R.map(c,function(x){return[v.cx,v.cy]})}o.diff(u).add(function(c){var x=o.getItemLayout(c);if(x){var a=new F.Polygon,i=new F.Polyline,n={shape:{points:x}};a.shape.points=s(x),i.shape.points=s(x),F.initProps(a,n,b,c),F.initProps(i,n,b,c);var h=new F.Group,g=new F.Group;h.add(i),h.add(a),h.add(g),r(i.shape.points,x,g,o,c,!0),o.setItemGraphicEl(c,h)}}).update(function(c,x){var a=u.getItemGraphicEl(x),i=a.childAt(0),n=a.childAt(1),h=a.childAt(2),g={shape:{points:o.getItemLayout(c)}};g.shape.points&&(r(i.shape.points,g.shape.points,h,o,c,!1),F.updateProps(i,g,b),F.updateProps(n,g,b),o.setItemGraphicEl(c,a))}).remove(function(c){m.remove(u.getItemGraphicEl(c))}).execute(),o.eachItemGraphicEl(function(c,x){var a=o.getItemModel(x),i=c.childAt(0),n=c.childAt(1),h=c.childAt(2),g=o.getItemVisual(x,"color");m.add(c),i.useStyle(R.defaults(a.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:g})),i.hoverStyle=a.getModel("emphasis.lineStyle").getLineStyle();var d=a.getModel("areaStyle"),y=a.getModel("emphasis.areaStyle"),p=d.isEmpty()&&d.parentModel.isEmpty(),w=y.isEmpty()&&y.parentModel.isEmpty();w=w&&p,n.ignore=p,n.useStyle(R.defaults(d.getAreaStyle(),{fill:g,opacity:.7})),n.hoverStyle=y.getAreaStyle();var S=a.getModel("itemStyle").getItemStyle(["color"]),O=a.getModel("emphasis.itemStyle").getItemStyle(),B=a.getModel("label"),k=a.getModel("emphasis.label");h.eachChild(function(P){P.setStyle(S),P.hoverStyle=R.clone(O);var L=o.get(o.dimensions[P.__dimIdx],x);(L==null||isNaN(L))&&(L=""),F.setLabelStyle(P.style,P.hoverStyle,B,k,{labelFetcher:o.hostModel,labelDataIndex:x,labelDimIndex:P.__dimIdx,defaultText:L,autoColor:g,isRectText:!0})}),c.highDownOnUpdate=function(P,L){n.attr("ignore",L==="emphasis"?w:p)},F.setHoverStyle(c)}),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});X.exports=D},15752:function(X,z,e){var M=e(31879);function F(R){var A=R.polar;if(A){M.isArray(A)||(A=[A]);var T=[];M.each(A,function(D,b){D.indicator?(D.type&&!D.shape&&(D.shape=D.type),R.radar=R.radar||[],M.isArray(R.radar)||(R.radar=[R.radar]),R.radar.push(D)):T.push(D)}),R.polar=T}M.each(R.series,function(D){D&&D.type==="radar"&&D.polarIndex&&(D.radarIndex=D.polarIndex)})}X.exports=F},47052:function(X,z,e){var M=e(31879);function F(T){T.eachSeriesByType("radar",function(D){var b=D.getData(),C=[],f=D.coordinateSystem;if(f){var v=f.getIndicatorAxes();M.each(v,function(m,o){b.each(b.mapDimension(v[o].dim),function(u,l){C[l]=C[l]||[];var r=f.dataToPoint(u,o);C[l][o]=R(r)?r:A(f)})}),b.each(function(m){var o=M.find(C[m],function(u){return R(u)})||A(f);C[m].push(o.slice()),b.setItemLayout(m,C[m])})}})}function R(T){return!isNaN(T[0])&&!isNaN(T[1])}function A(T){return[T.cx,T.cy]}X.exports=F},79337:function(X,z,e){var M=e(3440);e(98017),e(89574),e(68836);var F=e(15224),R=e(62395);M.registerLayout(F),M.registerVisual(R)},98017:function(X,z,e){var M=e(2365),F=e(31323),R=e(17795),A=R.encodeHTML,T=e(56785),D=e(50617),b=D.__DEV__,C=M.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(v,m){for(var o=v.edges||v.links,u=v.data||v.nodes,l=v.levels,r=this.levelModels={},s=0;s<l.length;s++)l[s].depth!=null&&l[s].depth>=0&&(r[l[s].depth]=new T(l[s],this,m));if(u&&o){var c=F(u,o,this,!0,x);return c.data}function x(a,i){a.wrapMethod("getItemModel",function(n,h){return n.customizeGetParent(function(g){var d=this.parentModel,y=d.getData().getItemLayout(h).depth,p=d.levelModels[y];return p||this.parentModel}),n}),i.wrapMethod("getItemModel",function(n,h){return n.customizeGetParent(function(g){var d=this.parentModel,y=d.getGraph().getEdgeByIndex(h),p=y.node1.getLayout().depth,w=d.levelModels[p];return w||this.parentModel}),n})}},setNodePosition:function(v,m){var o=this.option.data[v];o.localX=m[0],o.localY=m[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(v,m,o){if(o==="edge"){var u=this.getDataParams(v,o),l=u.data,r=l.source+" -- "+l.target;return u.value&&(r+=" : "+u.value),A(r)}else if(o==="node"){var s=this.getGraph().getNodeByIndex(v),c=s.getLayout().value,x=this.getDataParams(v,o).data.name;if(c)var r=x+" : "+c;return A(r)}return C.superCall(this,"formatTooltip",v,m)},optionUpdated:function(){var v=this.option;v.focusNodeAdjacency===!0&&(v.focusNodeAdjacency="allEdges")},getDataParams:function(v,m){var o=C.superCall(this,"getDataParams",v,m);if(o.value==null&&m==="node"){var u=this.getGraph().getNodeByIndex(v),l=u.getLayout().value;o.value=l}return o},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),f=C;X.exports=f},89574:function(X,z,e){var M=e(48070),F=e(3440),R=e(31879),A=["itemStyle","opacity"],T=["emphasis","itemStyle","opacity"],D=["lineStyle","opacity"],b=["emphasis","lineStyle","opacity"];function C(l,r){return l.getVisual("opacity")||l.getModel().get(r)}function f(l,r,s){var c=l.getGraphicEl(),x=C(l,r);s!=null&&(x==null&&(x=1),x*=s),c.downplay&&c.downplay(),c.traverse(function(a){a.type!=="group"&&a.setStyle("opacity",x)})}function v(l,r){var s=C(l,r),c=l.getGraphicEl();c.traverse(function(x){x.type!=="group"&&x.setStyle("opacity",s)}),c.highlight&&c.highlight()}var m=M.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(l,r){var s=r.extent;l.moveTo(r.x1,r.y1),l.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(l.lineTo(r.x2+s,r.y2),l.bezierCurveTo(r.cpx2+s,r.cpy2,r.cpx1+s,r.cpy1,r.x1+s,r.y1)):(l.lineTo(r.x2,r.y2+s),l.bezierCurveTo(r.cpx2,r.cpy2+s,r.cpx1,r.cpy1+s,r.x1,r.y1+s)),l.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}}),o=F.extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(l,r,s){var c=this,x=l.getGraph(),a=this.group,i=l.layoutInfo,n=i.width,h=i.height,g=l.getData(),d=l.getData("edge"),y=l.get("orient");this._model=l,a.removeAll(),a.attr("position",[i.x,i.y]),x.eachEdge(function(p){var w=new m;w.dataIndex=p.dataIndex,w.seriesIndex=l.seriesIndex,w.dataType="edge";var S=p.getModel("lineStyle"),O=S.get("curveness"),B=p.node1.getLayout(),k=p.node1.getModel(),P=k.get("localX"),L=k.get("localY"),E=p.node2.getLayout(),N=p.node2.getModel(),I=N.get("localX"),G=N.get("localY"),W=p.getLayout(),Z,U,H,V,Y,$,K,J;switch(w.shape.extent=Math.max(1,W.dy),w.shape.orient=y,y==="vertical"?(Z=(P!=null?P*n:B.x)+W.sy,U=(L!=null?L*h:B.y)+B.dy,H=(I!=null?I*n:E.x)+W.ty,V=G!=null?G*h:E.y,Y=Z,$=U*(1-O)+V*O,K=H,J=U*O+V*(1-O)):(Z=(P!=null?P*n:B.x)+B.dx,U=(L!=null?L*h:B.y)+W.sy,H=I!=null?I*n:E.x,V=(G!=null?G*h:E.y)+W.ty,Y=Z*(1-O)+H*O,$=U,K=Z*O+H*(1-O),J=V),w.setShape({x1:Z,y1:U,x2:H,y2:V,cpx1:Y,cpy1:$,cpx2:K,cpy2:J}),w.setStyle(S.getItemStyle()),w.style.fill){case"source":w.style.fill=p.node1.getVisual("color");break;case"target":w.style.fill=p.node2.getVisual("color");break}M.setHoverStyle(w,p.getModel("emphasis.lineStyle").getItemStyle()),a.add(w),d.setItemGraphicEl(p.dataIndex,w)}),x.eachNode(function(p){var w=p.getLayout(),S=p.getModel(),O=S.get("localX"),B=S.get("localY"),k=S.getModel("label"),P=S.getModel("emphasis.label"),L=new M.Rect({shape:{x:O!=null?O*n:w.x,y:B!=null?B*h:w.y,width:w.dx,height:w.dy},style:S.getModel("itemStyle").getItemStyle()}),E=p.getModel("emphasis.itemStyle").getItemStyle();M.setLabelStyle(L.style,E,k,P,{labelFetcher:l,labelDataIndex:p.dataIndex,defaultText:p.id,isRectText:!0}),L.setStyle("fill",p.getVisual("color")),M.setHoverStyle(L,E),a.add(L),g.setItemGraphicEl(p.dataIndex,L),L.dataType="node"}),g.eachItemGraphicEl(function(p,w){var S=g.getItemModel(w);S.get("draggable")&&(p.drift=function(O,B){c._focusAdjacencyDisabled=!0,this.shape.x+=O,this.shape.y+=B,this.dirty(),s.dispatchAction({type:"dragNode",seriesId:l.id,dataIndex:g.getRawIndex(w),localX:this.shape.x/n,localY:this.shape.y/h})},p.ondragend=function(){c._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move"),p.highlight=function(){this.trigger("emphasis")},p.downplay=function(){this.trigger("normal")},p.focusNodeAdjHandler&&p.off("mouseover",p.focusNodeAdjHandler),p.unfocusNodeAdjHandler&&p.off("mouseout",p.unfocusNodeAdjHandler),S.get("focusNodeAdjacency")&&(p.on("mouseover",p.focusNodeAdjHandler=function(){c._focusAdjacencyDisabled||(c._clearTimer(),s.dispatchAction({type:"focusNodeAdjacency",seriesId:l.id,dataIndex:p.dataIndex}))}),p.on("mouseout",p.unfocusNodeAdjHandler=function(){c._focusAdjacencyDisabled||c._dispatchUnfocus(s)}))}),d.eachItemGraphicEl(function(p,w){var S=d.getItemModel(w);p.focusNodeAdjHandler&&p.off("mouseover",p.focusNodeAdjHandler),p.unfocusNodeAdjHandler&&p.off("mouseout",p.unfocusNodeAdjHandler),S.get("focusNodeAdjacency")&&(p.on("mouseover",p.focusNodeAdjHandler=function(){c._focusAdjacencyDisabled||(c._clearTimer(),s.dispatchAction({type:"focusNodeAdjacency",seriesId:l.id,edgeDataIndex:p.dataIndex}))}),p.on("mouseout",p.unfocusNodeAdjHandler=function(){c._focusAdjacencyDisabled||c._dispatchUnfocus(s)}))}),!this._data&&l.get("animation")&&a.setClipPath(u(a.getBoundingRect(),l,function(){a.removeClipPath()})),this._data=l.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(l){var r=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){r._unfocusDelayTimer=null,l.dispatchAction({type:"unfocusNodeAdjacency",seriesId:r._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(l,r,s,c){var x=l.getData(),a=x.graph,i=c.dataIndex,n=x.getItemModel(i),h=c.edgeDataIndex;if(!(i==null&&h==null)){var g=a.getNodeByIndex(i),d=a.getEdgeByIndex(h);if(a.eachNode(function(p){f(p,A,.1)}),a.eachEdge(function(p){f(p,D,.1)}),g){v(g,T);var y=n.get("focusNodeAdjacency");y==="outEdges"?R.each(g.outEdges,function(p){p.dataIndex<0||(v(p,b),v(p.node2,T))}):y==="inEdges"?R.each(g.inEdges,function(p){p.dataIndex<0||(v(p,b),v(p.node1,T))}):y==="allEdges"&&R.each(g.edges,function(p){p.dataIndex<0||(v(p,b),p.node1!==g&&v(p.node1,T),p.node2!==g&&v(p.node2,T))})}d&&(v(d,b),v(d.node1,T),v(d.node2,T))}},unfocusNodeAdjacency:function(l,r,s,c){var x=l.getGraph();x.eachNode(function(a){f(a,A)}),x.eachEdge(function(a){f(a,D)})}});function u(l,r,s){var c=new M.Rect({shape:{x:l.x-10,y:l.y-10,width:0,height:l.height+20}});return M.initProps(c,{shape:{width:l.width+20}},r,s),c}X.exports=o},68836:function(X,z,e){var M=e(3440);e(79722),M.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(F,R){R.eachComponent({mainType:"series",subType:"sankey",query:F},function(A){A.setNodePosition(F.dataIndex,[F.localX,F.localY])})})},15224:function(X,z,e){var M=e(30871),F=e(31879),R=e(35454),A=R.groupData;function T(S,O,B){S.eachSeriesByType("sankey",function(k){var P=k.get("nodeWidth"),L=k.get("nodeGap"),E=D(k,O);k.layoutInfo=E;var N=E.width,I=E.height,G=k.getGraph(),W=G.nodes,Z=G.edges;C(W);var U=F.filter(W,function($){return $.getLayout().value===0}),H=U.length!==0?0:k.get("layoutIterations"),V=k.get("orient"),Y=k.get("nodeAlign");b(W,Z,P,L,N,I,H,V,Y)})}function D(S,O){return M.getLayoutRect(S.getBoxLayoutParams(),{width:O.getWidth(),height:O.getHeight()})}function b(S,O,B,k,P,L,E,N,I){f(S,O,B,P,L,N,I),l(S,O,L,P,k,E,N),w(S,N)}function C(S){F.each(S,function(O){var B=y(O.outEdges,d),k=y(O.inEdges,d),P=O.getValue()||0,L=Math.max(B,k,P);O.setLayout({value:L},!0)})}function f(S,O,B,k,P,L,E){for(var N=[],I=[],G=[],W=[],Z=0,rt=0,U=0;U<O.length;U++)N[U]=1;for(U=0;U<S.length;U++)I[U]=S[U].inEdges.length,I[U]===0&&G.push(S[U]);for(var H=-1;G.length;){for(var V=0;V<G.length;V++){var Y=G[V],$=Y.hostGraph.data.getRawDataItem(Y.dataIndex),K=$.depth!=null&&$.depth>=0;K&&$.depth>H&&(H=$.depth),Y.setLayout({depth:K?$.depth:Z},!0),L==="vertical"?Y.setLayout({dy:B},!0):Y.setLayout({dx:B},!0);for(var J=0;J<Y.outEdges.length;J++){var Q=Y.outEdges[J],et=O.indexOf(Q);N[et]=0;var nt=Q.node2,st=S.indexOf(nt);--I[st]===0&&W.indexOf(nt)<0&&W.push(nt)}}++Z,G=W,W=[]}for(U=0;U<N.length;U++)if(N[U]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var ut=H>Z-1?H:Z-1;E&&E!=="left"&&m(S,E,L,ut);var rt=L==="vertical"?(P-B)/ut:(k-B)/ut;u(S,rt,L)}function v(S){var O=S.hostGraph.data.getRawDataItem(S.dataIndex);return O.depth!=null&&O.depth>=0}function m(S,O,B,k){if(O==="right"){for(var P=[],L=S,E=0;L.length;){for(var N=0;N<L.length;N++){var I=L[N];I.setLayout({skNodeHeight:E},!0);for(var G=0;G<I.inEdges.length;G++){var W=I.inEdges[G];P.indexOf(W.node1)<0&&P.push(W.node1)}}L=P,P=[],++E}F.each(S,function(Z){v(Z)||Z.setLayout({depth:Math.max(0,k-Z.getLayout().skNodeHeight)},!0)})}else O==="justify"&&o(S,k)}function o(S,O){F.each(S,function(B){!v(B)&&!B.outEdges.length&&B.setLayout({depth:O},!0)})}function u(S,O,B){F.each(S,function(k){var P=k.getLayout().depth*O;B==="vertical"?k.setLayout({y:P},!0):k.setLayout({x:P},!0)})}function l(S,O,B,k,P,L,E){var N=r(S,E);s(N,O,B,k,P,E),c(N,P,B,k,E);for(var I=1;L>0;L--)I*=.99,x(N,I,E),c(N,P,B,k,E),p(N,I,E),c(N,P,B,k,E)}function r(S,O){var B=[],k=O==="vertical"?"y":"x",P=A(S,function(L){return L.getLayout()[k]});return P.keys.sort(function(L,E){return L-E}),F.each(P.keys,function(L){B.push(P.buckets.get(L))}),B}function s(S,O,B,k,P,L){var E=1/0;F.each(S,function(N){var I=N.length,G=0;F.each(N,function(Z){G+=Z.getLayout().value});var W=L==="vertical"?(k-(I-1)*P)/G:(B-(I-1)*P)/G;W<E&&(E=W)}),F.each(S,function(N){F.each(N,function(I,G){var W=I.getLayout().value*E;L==="vertical"?(I.setLayout({x:G},!0),I.setLayout({dx:W},!0)):(I.setLayout({y:G},!0),I.setLayout({dy:W},!0))})}),F.each(O,function(N){var I=+N.getValue()*E;N.setLayout({dy:I},!0)})}function c(S,O,B,k,P){var L=P==="vertical"?"x":"y";F.each(S,function(E){E.sort(function(Y,$){return Y.getLayout()[L]-$.getLayout()[L]});for(var N,I,G,W=0,Z=E.length,U=P==="vertical"?"dx":"dy",H=0;H<Z;H++)I=E[H],G=W-I.getLayout()[L],G>0&&(N=I.getLayout()[L]+G,P==="vertical"?I.setLayout({x:N},!0):I.setLayout({y:N},!0)),W=I.getLayout()[L]+I.getLayout()[U]+O;var V=P==="vertical"?k:B;if(G=W-O-V,G>0)for(N=I.getLayout()[L]-G,P==="vertical"?I.setLayout({x:N},!0):I.setLayout({y:N},!0),W=N,H=Z-2;H>=0;--H)I=E[H],G=I.getLayout()[L]+I.getLayout()[U]+O-W,G>0&&(N=I.getLayout()[L]-G,P==="vertical"?I.setLayout({x:N},!0):I.setLayout({y:N},!0)),W=I.getLayout()[L]})}function x(S,O,B){F.each(S.slice().reverse(),function(k){F.each(k,function(P){if(P.outEdges.length){var L=y(P.outEdges,a,B)/y(P.outEdges,d,B);if(isNaN(L)){var E=P.outEdges.length;L=E?y(P.outEdges,i,B)/E:0}if(B==="vertical"){var N=P.getLayout().x+(L-g(P,B))*O;P.setLayout({x:N},!0)}else{var I=P.getLayout().y+(L-g(P,B))*O;P.setLayout({y:I},!0)}}})})}function a(S,O){return g(S.node2,O)*S.getValue()}function i(S,O){return g(S.node2,O)}function n(S,O){return g(S.node1,O)*S.getValue()}function h(S,O){return g(S.node1,O)}function g(S,O){return O==="vertical"?S.getLayout().x+S.getLayout().dx/2:S.getLayout().y+S.getLayout().dy/2}function d(S){return S.getValue()}function y(S,O,B){for(var k=0,P=S.length,L=-1;++L<P;){var E=+O.call(S,S[L],B);isNaN(E)||(k+=E)}return k}function p(S,O,B){F.each(S,function(k){F.each(k,function(P){if(P.inEdges.length){var L=y(P.inEdges,n,B)/y(P.inEdges,d,B);if(isNaN(L)){var E=P.inEdges.length;L=E?y(P.inEdges,h,B)/E:0}if(B==="vertical"){var N=P.getLayout().x+(L-g(P,B))*O;P.setLayout({x:N},!0)}else{var I=P.getLayout().y+(L-g(P,B))*O;P.setLayout({y:I},!0)}}})})}function w(S,O){var B=O==="vertical"?"x":"y";F.each(S,function(k){k.outEdges.sort(function(P,L){return P.node2.getLayout()[B]-L.node2.getLayout()[B]}),k.inEdges.sort(function(P,L){return P.node1.getLayout()[B]-L.node1.getLayout()[B]})}),F.each(S,function(k){var P=0,L=0;F.each(k.outEdges,function(E){E.setLayout({sy:P},!0),P+=E.getLayout().dy}),F.each(k.inEdges,function(E){E.setLayout({ty:L},!0),L+=E.getLayout().dy})})}X.exports=T},62395:function(X,z,e){var M=e(58796),F=e(31879);function R(A,T){A.eachSeriesByType("sankey",function(D){var b=D.getGraph(),C=b.nodes;if(C.length){var f=1/0,v=-1/0;F.each(C,function(m){var o=m.getLayout().value;o<f&&(f=o),o>v&&(v=o)}),F.each(C,function(m){var o=new M({type:"color",mappingMethod:"linear",dataExtent:[f,v],visual:D.get("color")}),u=o.mapValueToVisual(m.getLayout().value),l=m.getModel().get("itemStyle.color");l!=null?m.setVisual("color",l):m.setVisual("color",u)})}})}X.exports=R},38109:function(X,z,e){var M=e(3440);e(30238),e(97603);var F=e(41124),R=e(75028);e(15367),M.registerVisual(F("scatter","circle")),M.registerLayout(R("scatter"))},30238:function(X,z,e){var M=e(1664),F=e(2365),R=F.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(A,T){return M(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var A=this.option.progressive;return A??(this.option.large?5e3:this.get("progressive"))},getProgressiveThreshold:function(){var A=this.option.progressiveThreshold;return A??(this.option.large?1e4:this.get("progressiveThreshold"))},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});X.exports=R},97603:function(X,z,e){var M=e(3440),F=e(52159),R=e(34567),A=e(75028);M.extendChartView({type:"scatter",render:function(T,D,b){var C=T.getData(),f=this._updateSymbolDraw(C,T);f.updateData(C,{clipShape:this._getClipShape(T)}),this._finished=!0},incrementalPrepareRender:function(T,D,b){var C=T.getData(),f=this._updateSymbolDraw(C,T);f.incrementalPrepareUpdate(C),this._finished=!1},incrementalRender:function(T,D,b){this._symbolDraw.incrementalUpdate(T,D.getData(),{clipShape:this._getClipShape(D)}),this._finished=T.end===D.getData().count()},updateTransform:function(T,D,b){var C=T.getData();if(this.group.dirty(),!this._finished||C.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var f=A().reset(T);f.progress&&f.progress({start:0,end:C.count()},C),this._symbolDraw.updateLayout(C)},_getClipShape:function(T){var D=T.coordinateSystem,b=D&&D.getArea&&D.getArea();return T.get("clip",!0)?b:null},_updateSymbolDraw:function(T,D){var b=this._symbolDraw,C=D.pipelineContext,f=C.large;return(!b||f!==this._isLargeDraw)&&(b&&b.remove(),b=this._symbolDraw=f?new R:new F,this._isLargeDraw=f,this.group.removeAll()),this.group.add(b.group),b},remove:function(T,D){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}})},59735:function(X,z,e){var M=e(3440),F=e(31879);e(19818),e(58051),e(56472);var R=e(31310),A=e(24273),T=e(61614);M.registerVisual(F.curry(R,"sunburst")),M.registerLayout(F.curry(A,"sunburst")),M.registerProcessor(F.curry(T,"sunburst"))},76595:function(X,z,e){var M=e(31879),F=e(48070),R={NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"},A=2,T=4;function D(u,l,r){F.Group.call(this);var s=new F.Sector({z2:A});s.seriesIndex=l.seriesIndex;var c=new F.Text({z2:T,silent:u.getModel("label").get("silent")});this.add(s),this.add(c),this.updateData(!0,u,"normal",l,r);function x(){c.ignore=c.hoverIgnore}function a(){c.ignore=c.normalIgnore}this.on("emphasis",x).on("normal",a).on("mouseover",x).on("mouseout",a)}var b=D.prototype;b.updateData=function(u,l,r,s,c){this.node=l,l.piece=this,s=s||this._seriesModel,c=c||this._ecModel;var x=this.childAt(0);x.dataIndex=l.dataIndex;var a=l.getModel(),i=l.getLayout(),n=M.extend({},i);n.label=null;var h=f(l,s,c);o(l,s,h);var g=a.getModel("itemStyle").getItemStyle(),d;if(r==="normal")d=g;else{var y=a.getModel(r+".itemStyle").getItemStyle();d=M.merge(y,g)}d=M.defaults({lineJoin:"bevel",fill:d.fill||h},d),u?(x.setShape(n),x.shape.r=i.r0,F.updateProps(x,{shape:{r:i.r}},s,l.dataIndex),x.useStyle(d)):typeof d.fill=="object"&&d.fill.type||typeof x.style.fill=="object"&&x.style.fill.type?(F.updateProps(x,{shape:n},s),x.useStyle(d)):F.updateProps(x,{shape:n,style:d},s),this._updateLabel(s,h,r);var p=a.getShallow("cursor");if(p&&x.attr("cursor",p),u){var w=s.getShallow("highlightPolicy");this._initEvents(x,l,s,w)}this._seriesModel=s||this._seriesModel,this._ecModel=c||this._ecModel,F.setHoverStyle(this)},b.onEmphasis=function(u){var l=this;this.node.hostTree.root.eachNode(function(r){r.piece&&(l.node===r?r.piece.updateData(!1,r,"emphasis"):m(r,l.node,u)?r.piece.childAt(0).trigger("highlight"):u!==R.NONE&&r.piece.childAt(0).trigger("downplay"))})},b.onNormal=function(){this.node.hostTree.root.eachNode(function(u){u.piece&&u.piece.updateData(!1,u,"normal")})},b.onHighlight=function(){this.updateData(!1,this.node,"highlight")},b.onDownplay=function(){this.updateData(!1,this.node,"downplay")},b._updateLabel=function(u,l,r){var s=this.node.getModel(),c=s.getModel("label"),x=r==="normal"||r==="emphasis"?c:s.getModel(r+".label"),a=s.getModel("emphasis.label"),i=x.get("formatter"),n=i?r:"normal",h=M.retrieve(u.getFormattedLabel(this.node.dataIndex,n,null,null,"label"),this.node.name);W("show")===!1&&(h="");var g=this.node.getLayout(),d=x.get("minAngle");d==null&&(d=c.get("minAngle")),d=d/180*Math.PI;var y=g.endAngle-g.startAngle;d!=null&&Math.abs(y)<d&&(h="");var p=this.childAt(1);F.setLabelStyle(p.style,p.hoverStyle||{},c,a,{defaultText:x.getShallow("show")?h:null,autoColor:l,useInsideStyle:!0});var w=(g.startAngle+g.endAngle)/2,S=Math.cos(w),O=Math.sin(w),B,k=W("position"),P=W("distance")||0,L=W("align");k==="outside"?(B=g.r+P,L=w>Math.PI/2?"right":"left"):!L||L==="center"?(B=(g.r+g.r0)/2,L="center"):L==="left"?(B=g.r0+P,w>Math.PI/2&&(L="right")):L==="right"&&(B=g.r-P,w>Math.PI/2&&(L="left")),p.attr("style",{text:h,textAlign:L,textVerticalAlign:W("verticalAlign")||"middle",opacity:W("opacity")});var E=B*S+g.cx,N=B*O+g.cy;p.attr("position",[E,N]);var I=W("rotate"),G=0;I==="radial"?(G=-w,G<-Math.PI/2&&(G+=Math.PI)):I==="tangential"?(G=Math.PI/2-w,G>Math.PI/2?G-=Math.PI:G<-Math.PI/2&&(G+=Math.PI)):typeof I=="number"&&(G=I*Math.PI/180),p.attr("rotation",G);function W(Z){var U=x.get(Z);return U??c.get(Z)}},b._initEvents=function(u,l,r,s){u.off("mouseover").off("mouseout").off("emphasis").off("normal");var c=this,x=function(){c.onEmphasis(s)},a=function(){c.onNormal()},i=function(){c.onDownplay()},n=function(){c.onHighlight()};r.isAnimationEnabled()&&u.on("mouseover",x).on("mouseout",a).on("emphasis",x).on("normal",a).on("downplay",i).on("highlight",n)},M.inherits(D,F.Group);var C=D;function f(u,l,r){var s=u.getVisual("color"),c=u.getVisual("visualMeta");(!c||c.length===0)&&(s=null);var x=u.getModel("itemStyle").get("color");if(x)return x;if(s)return s;if(u.depth===0)return r.option.color[0];var a=r.option.color.length;return x=r.option.color[v(u)%a],x}function v(u){for(var l=u;l.depth>1;)l=l.parentNode;var r=u.getAncestors()[0];return M.indexOf(r.children,l)}function m(u,l,r){return r===R.NONE?!1:r===R.SELF?u===l:r===R.ANCESTOR?u===l||u.isAncestorOf(l):u===l||u.isDescendantOf(l)}function o(u,l,r){var s=l.getData();s.setItemVisual(u.dataIndex,"color",r)}X.exports=C},19818:function(X,z,e){var M=e(31879),F=e(2365),R=e(75174),A=e(56785),T=e(998),D=T.wrapTreePathInfo,b=F.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(f,v){var m={name:f.name,children:f.data};C(m);var o=M.map(f.levels||[],function(r){return new A(r,this,v)},this),u=R.createTree(m,this,l);function l(r){r.wrapMethod("getItemModel",function(s,c){var x=u.getNodeByDataIndex(c),a=o[x.depth];return a&&(s.parentModel=a),s})}return u.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(f){var v=F.prototype.getDataParams.apply(this,arguments),m=this.getData().tree.getNodeByDataIndex(f);return v.treePathInfo=D(m,this),v},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(f){f?this._viewRoot=f:f=this._viewRoot;var v=this.getRawData().tree.root;(!f||f!==v&&!v.contains(f))&&(this._viewRoot=v)}});function C(f){var v=0;M.each(f.children,function(o){C(o);var u=o.value;M.isArray(u)&&(u=u[0]),v+=u});var m=f.value;M.isArray(m)&&(m=m[0]),(m==null||isNaN(m))&&(m=v),m<0&&(m=0),M.isArray(f.value)?f.value[0]=m:f.value=m}X.exports=b},58051:function(X,z,e){var M=e(31879),F=e(1911),R=e(76595),A=e(65453),T=e(17795),D=T.windowOpen,b="sunburstRootToNode",C=F.extend({type:"sunburst",init:function(){},render:function(v,m,o,u){var l=this;this.seriesModel=v,this.api=o,this.ecModel=m;var r=v.getData(),s=r.tree.root,c=v.getViewRoot(),x=this.group,a=v.get("renderLabelForZeroData"),i=[];c.eachNode(function(S){i.push(S)});var n=this._oldChildren||[];if(d(i,n),w(s,c),u&&u.highlight&&u.highlight.piece){var h=v.getShallow("highlightPolicy");u.highlight.piece.onEmphasis(h)}else if(u&&u.unhighlight){var g=this.virtualPiece;!g&&s.children.length&&(g=s.children[0].piece),g&&g.onNormal()}this._initEvents(),this._oldChildren=i;function d(S,O){if(S.length===0&&O.length===0)return;new A(O,S,B,B).add(k).update(k).remove(M.curry(k,null)).execute();function B(P){return P.getId()}function k(P,L){var E=P==null?null:S[P],N=L==null?null:O[L];y(E,N)}}function y(S,O){if(!a&&S&&!S.getValue()&&(S=null),S!==s&&O!==s){if(O&&O.piece)S?(O.piece.updateData(!1,S,"normal",v,m),r.setItemGraphicEl(S.dataIndex,O.piece)):p(O);else if(S){var B=new R(S,v,m);x.add(B),r.setItemGraphicEl(S.dataIndex,B)}}}function p(S){S&&S.piece&&(x.remove(S.piece),S.piece=null)}function w(S,O){if(O.depth>0){l.virtualPiece?l.virtualPiece.updateData(!1,S,"normal",v,m):(l.virtualPiece=new R(S,v,m),x.add(l.virtualPiece)),O.piece._onclickEvent&&O.piece.off("click",O.piece._onclickEvent);var B=function(k){l._rootToNode(O.parentNode)};O.piece._onclickEvent=B,l.virtualPiece.on("click",B)}else l.virtualPiece&&(x.remove(l.virtualPiece),l.virtualPiece=null)}},dispose:function(){},_initEvents:function(){var v=this,m=function(o){var u=!1,l=v.seriesModel.getViewRoot();l.eachNode(function(r){if(!u&&r.piece&&r.piece.childAt(0)===o.target){var s=r.getModel().get("nodeClick");if(s==="rootToNode")v._rootToNode(r);else if(s==="link"){var c=r.getModel(),x=c.get("link");if(x){var a=c.get("target",!0)||"_blank";D(x,a)}}u=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",m),this.group._onclickEvent=m},_rootToNode:function(v){v!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:b,from:this.uid,seriesId:this.seriesModel.id,targetNode:v})},containPoint:function(v,m){var o=m.getData(),u=o.getItemLayout(0);if(u){var l=v[0]-u.cx,r=v[1]-u.cy,s=Math.sqrt(l*l+r*r);return s<=u.r&&s>=u.r0}}}),f=C;X.exports=f},56472:function(X,z,e){var M=e(3440),F=e(998),R="sunburstRootToNode";M.registerAction({type:R,update:"updateView"},function(D,b){b.eachComponent({mainType:"series",subType:"sunburst",query:D},C);function C(f,v){var m=F.retrieveTargetInfo(D,[R],f);if(m){var o=f.getViewRoot();o&&(D.direction=F.aboveViewRoot(o,m.node)?"rollUp":"drillDown"),f.resetViewRoot(m.node)}}});var A="sunburstHighlight";M.registerAction({type:A,update:"updateView"},function(D,b){b.eachComponent({mainType:"series",subType:"sunburst",query:D},C);function C(f,v){var m=F.retrieveTargetInfo(D,[A],f);m&&(D.highlight=m.node)}});var T="sunburstUnhighlight";M.registerAction({type:T,update:"updateView"},function(D,b){b.eachComponent({mainType:"series",subType:"sunburst",query:D},C);function C(f,v){D.unhighlight=!0}})},24273:function(X,z,e){var M=e(48354),F=M.parsePercent,R=e(31879),A=Math.PI/180;function T(C,f,v,m){f.eachSeriesByType(C,function(o){var u=o.get("center"),l=o.get("radius");R.isArray(l)||(l=[0,l]),R.isArray(u)||(u=[u,u]);var r=v.getWidth(),s=v.getHeight(),c=Math.min(r,s),x=F(u[0],r),a=F(u[1],s),i=F(l[0],c/2),n=F(l[1],c/2),h=-o.get("startAngle")*A,g=o.get("minAngle")*A,d=o.getData().tree.root,y=o.getViewRoot(),p=y.depth,w=o.get("sort");w!=null&&D(y,w);var S=0;R.each(y.children,function(H){!isNaN(H.getValue())&&S++});var O=y.getValue(),B=Math.PI/(O||S)*2,k=y.depth>0,P=y.height-(k?-1:1),L=(n-i)/(P||1),E=o.get("clockwise"),N=o.get("stillShowZeroSum"),I=E?1:-1,G=function(H,V){if(H){var Y=V;if(H!==d){var $=H.getValue(),K=O===0&&N?B:$*B;K<g&&(K=g),Y=V+I*K;var J=H.depth-p-(k?-1:1),Q=i+L*J,et=i+L*(J+1),nt=H.getModel();nt.get("r0")!=null&&(Q=F(nt.get("r0"),c/2)),nt.get("r")!=null&&(et=F(nt.get("r"),c/2)),H.setLayout({angle:K,startAngle:V,endAngle:Y,clockwise:E,cx:x,cy:a,r0:Q,r:et})}if(H.children&&H.children.length){var st=0;R.each(H.children,function(ut){st+=G(ut,V+st)})}return Y-V}};if(k){var W=i,Z=i+L,U=Math.PI*2;d.setLayout({angle:U,startAngle:h,endAngle:h+U,clockwise:E,cx:x,cy:a,r0:W,r:Z})}G(y,h)})}function D(C,f){var v=C.children||[];C.children=b(v,f),v.length&&R.each(C.children,function(m){D(m,f)})}function b(C,f){if(typeof f=="function")return C.sort(f);var v=f==="asc";return C.sort(function(m,o){var u=(m.getValue()-o.getValue())*(v?1:-1);return u===0?(m.dataIndex-o.dataIndex)*(v?-1:1):u})}X.exports=T},71626:function(X,z,e){var M=e(3440);e(54843),e(4547),e(39004);var F=e(4515),R=e(92425),A=e(61614);M.registerLayout(F),M.registerVisual(R),M.registerProcessor(A("themeRiver"))},4547:function(X,z,e){var M=e(2365),F=e(80554),R=e(17071),A=R.getDimensionTypeByAxis,T=e(58677),D=e(31879),b=e(35454),C=b.groupData,f=e(17795),v=f.encodeHTML,m=e(89960),o=2,u=M.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(r){u.superApply(this,"init",arguments),this.legendVisualProvider=new m(D.bind(this.getData,this),D.bind(this.getRawData,this))},fixData:function(r){var s=r.length,c={},x=C(r,function(y){return c.hasOwnProperty(y[0])||(c[y[0]]=-1),y[2]}),a=[];x.buckets.each(function(y,p){a.push({name:p,dataList:y})});for(var i=a.length,n=0;n<i;++n){for(var h=a[n].name,g=0;g<a[n].dataList.length;++g){var d=a[n].dataList[g][0];c[d]=n}for(var d in c)c.hasOwnProperty(d)&&c[d]!==n&&(c[d]=n,r[s]=[],r[s][0]=d,r[s][1]=0,r[s][2]=h,s++)}return r},getInitialData:function(r,s){for(var c=s.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0],x=c.get("type"),a=D.filter(r.data,function(w){return w[2]!==void 0}),i=this.fixData(a||[]),n=[],h=this.nameMap=D.createHashMap(),g=0,d=0;d<i.length;++d)n.push(i[d][o]),h.get(i[d][o])||(h.set(i[d][o],g),g++);var y=F(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:A(x)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),p=new T(y,this);return p.initData(i),p},getLayerSeries:function(){for(var r=this.getData(),s=r.count(),c=[],x=0;x<s;++x)c[x]=x;var a=r.mapDimension("single"),i=C(c,function(h){return r.get("name",h)}),n=[];return i.buckets.each(function(h,g){h.sort(function(d,y){return r.get(a,d)-r.get(a,y)}),n.push({name:g,indices:h})}),n},getAxisTooltipData:function(r,s,c){D.isArray(r)||(r=r?[r]:[]);for(var x=this.getData(),a=this.getLayerSeries(),i=[],n=a.length,h,g=0;g<n;++g){for(var d=Number.MAX_VALUE,y=-1,p=a[g].indices.length,w=0;w<p;++w){var S=x.get(r[0],a[g].indices[w]),O=Math.abs(S-s);O<=d&&(h=S,d=O,y=a[g].indices[w])}i.push(y)}return{dataIndices:i,nestestValue:h}},formatTooltip:function(r){var s=this.getData(),c=s.getName(r),x=s.get(s.mapDimension("value"),r);return(isNaN(x)||x==null)&&(x="-"),v(c+" : "+x)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),l=u;X.exports=l},39004:function(X,z,e){var M=e(3440),F=e(96758),R=F.Polygon,A=e(48070),T=e(31879),D=T.bind,b=T.extend,C=e(65453),f=M.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(m,o,u){var l=m.getData(),r=this.group,s=m.getLayerSeries(),c=l.getLayout("layoutInfo"),x=c.rect,a=c.boundaryGap;r.attr("position",[0,x.y+a[0]]);function i(d){return d.name}var n=new C(this._layersSeries||[],s,i,i),h={};n.add(D(g,this,"add")).update(D(g,this,"update")).remove(D(g,this,"remove")).execute();function g(d,y,p){var w=this._layers;if(d==="remove"){r.remove(w[y]);return}for(var S=[],O=[],B,k=s[y].indices,P=0;P<k.length;P++){var L=l.getItemLayout(k[P]),E=L.x,N=L.y0,I=L.y;S.push([E,N]),O.push([E,N+I]),B=l.getItemVisual(k[P],"color")}var G,W,Z=l.getItemLayout(k[0]),U=l.getItemModel(k[P-1]),H=U.getModel("label"),V=H.get("margin");if(d==="add"){var Y=h[y]=new A.Group;G=new R({shape:{points:S,stackedOnPoints:O,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),W=new A.Text({style:{x:Z.x-V,y:Z.y0+Z.y/2}}),Y.add(G),Y.add(W),r.add(Y),G.setClipPath(v(G.getBoundingRect(),m,function(){G.removeClipPath()}))}else{var Y=w[p];G=Y.childAt(0),W=Y.childAt(1),r.add(Y),h[y]=Y,A.updateProps(G,{shape:{points:S,stackedOnPoints:O}},m),A.updateProps(W,{style:{x:Z.x-V,y:Z.y0+Z.y/2}},m)}var $=U.getModel("emphasis.itemStyle"),K=U.getModel("itemStyle");A.setTextStyle(W.style,H,{text:H.get("show")?m.getFormattedLabel(k[P-1],"normal")||l.getName(k[P-1]):null,textVerticalAlign:"middle"}),G.setStyle(b({fill:B},K.getItemStyle(["color"]))),A.setHoverStyle(G,$.getItemStyle())}this._layersSeries=s,this._layers=h},dispose:function(){}});function v(m,o,u){var l=new A.Rect({shape:{x:m.x-10,y:m.y-10,width:0,height:m.height+20}});return A.initProps(l,{shape:{width:m.width+20,height:m.height+20}},o,u),l}X.exports=f},4515:function(X,z,e){var M=e(31879),F=e(48354);function R(D,b){D.eachSeriesByType("themeRiver",function(C){var f=C.getData(),v=C.coordinateSystem,m={},o=v.getRect();m.rect=o;var u=C.get("boundaryGap"),l=v.getAxis();if(m.boundaryGap=u,l.orient==="horizontal"){u[0]=F.parsePercent(u[0],o.height),u[1]=F.parsePercent(u[1],o.height);var r=o.height-u[0]-u[1];A(f,C,r)}else{u[0]=F.parsePercent(u[0],o.width),u[1]=F.parsePercent(u[1],o.width);var s=o.width-u[0]-u[1];A(f,C,s)}f.setLayout("layoutInfo",m)})}function A(D,b,C){if(D.count())for(var f=b.coordinateSystem,v=b.getLayerSeries(),m=D.mapDimension("single"),o=D.mapDimension("value"),u=M.map(v,function(h){return M.map(h.indices,function(g){var d=f.dataToPoint(D.get(m,g));return d[1]=D.get(o,g),d})}),l=T(u),r=l.y0,s=C/l.max,c=v.length,x=v[0].indices.length,a,i=0;i<x;++i){a=r[i]*s,D.setItemLayout(v[0].indices[i],{layerIndex:0,x:u[0][i][0],y0:a,y:u[0][i][1]*s});for(var n=1;n<c;++n)a+=u[n-1][i][1]*s,D.setItemLayout(v[n].indices[i],{layerIndex:n,x:u[n][i][0],y0:a,y:u[n][i][1]*s})}}function T(D){for(var b=D.length,C=D[0].length,f=[],v=[],m=0,o,u={},l=0;l<C;++l){for(var r=0,o=0;r<b;++r)o+=D[r][l][1];o>m&&(m=o),f.push(o)}for(var s=0;s<C;++s)v[s]=(m-f[s])/2;m=0;for(var c=0;c<C;++c){var x=f[c]+v[c];x>m&&(m=x)}return u.y0=v,u.max=m,u}X.exports=R},92425:function(X,z,e){var M=e(31879),F=M.createHashMap;function R(A){A.eachSeriesByType("themeRiver",function(T){var D=T.getData(),b=T.getRawData(),C=T.get("color"),f=F();D.each(function(v){f.set(D.getRawIndex(v),v)}),b.each(function(v){var m=b.getName(v),o=C[(T.nameMap.get(m)-1)%C.length];b.setItemVisual(v,"color",o);var u=f.get(v);u!=null&&D.setItemVisual(u,"color",o)})})}X.exports=R},54219:function(X,z,e){var M=e(3440);e(13664),e(43324),e(61256);var F=e(41124),R=e(55999);M.registerVisual(F("tree","circle")),M.registerLayout(R)},13664:function(X,z,e){var M=e(2365),F=e(75174),R=e(17795),A=R.encodeHTML,T=e(56785),D=M.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(b){var C={name:b.name,children:b.data},f=b.leaves||{},v=new T(f,this,this.ecModel),m=F.createTree(C,this,o);function o(s){s.wrapMethod("getItemModel",function(c,x){var a=m.getNodeByDataIndex(x);return(!a.children.length||!a.isExpand)&&(c.parentModel=v),c})}var u=0;m.eachNode("preorder",function(s){s.depth>u&&(u=s.depth)});var l=b.expandAndCollapse,r=l&&b.initialTreeDepth>=0?b.initialTreeDepth:u;return m.root.eachNode("preorder",function(s){var c=s.hostTree.data.getRawDataItem(s.dataIndex);s.isExpand=c&&c.collapsed!=null?!c.collapsed:s.depth<=r}),m.data},getOrient:function(){var b=this.get("orient");return b==="horizontal"?b="LR":b==="vertical"&&(b="TB"),b},setZoom:function(b){this.option.zoom=b},setCenter:function(b){this.option.center=b},formatTooltip:function(b){for(var C=this.getData().tree,f=C.root.children[0],v=C.getNodeByDataIndex(b),m=v.getValue(),o=v.name;v&&v!==f;)o=v.parentNode.name+"."+o,v=v.parentNode;return A(o+(isNaN(m)||m==null?"":" : "+m))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});X.exports=D},43324:function(X,z,e){var M=e(31879),F=e(48070),R=e(13980),A=e(67882),T=A.radialCoordinate,D=e(3440),b=e(18644),C=e(65176),f=e(95922),v=e(73672),m=e(22997),o=m.onIrrelevantElement,u=e(50617),l=u.__DEV__,r=e(48354),s=r.parsePercent,c=F.extendShape({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(y,p){var w=p.childPoints,S=w.length,O=p.parentPoint,B=w[0],k=w[S-1];if(S===1){y.moveTo(O[0],O[1]),y.lineTo(B[0],B[1]);return}var P=p.orient,L=P==="TB"||P==="BT"?0:1,E=1-L,N=s(p.forkPosition,1),I=[];I[L]=O[L],I[E]=O[E]+(k[E]-O[E])*N,y.moveTo(O[0],O[1]),y.lineTo(I[0],I[1]),y.moveTo(B[0],B[1]),I[L]=B[L],y.lineTo(I[0],I[1]),I[L]=k[L],y.lineTo(I[0],I[1]),y.lineTo(k[0],k[1]);for(var G=1;G<S-1;G++){var W=w[G];y.moveTo(W[0],W[1]),I[L]=W[L],y.lineTo(I[0],I[1])}}}),x=D.extendChartView({type:"tree",init:function(y,p){this._oldTree,this._mainGroup=new F.Group,this._controller=new v(p.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(y,p,w,S){var O=y.getData(),B=y.layoutInfo,k=this._mainGroup,P=y.get("layout");P==="radial"?k.attr("position",[B.x+B.width/2,B.y+B.height/2]):k.attr("position",[B.x,B.y]),this._updateViewCoordSys(y,B,P),this._updateController(y,p,w);var L=this._data,E={expandAndCollapse:y.get("expandAndCollapse"),layout:P,edgeShape:y.get("edgeShape"),edgeForkPosition:y.get("edgeForkPosition"),orient:y.getOrient(),curvature:y.get("lineStyle.curveness"),symbolRotate:y.get("symbolRotate"),symbolOffset:y.get("symbolOffset"),hoverAnimation:y.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};O.diff(L).add(function(N){a(O,N)&&n(O,N,null,k,y,E)}).update(function(N,I){var G=L.getItemGraphicEl(I);if(!a(O,N)){G&&g(L,I,G,k,y,E);return}n(O,N,G,k,y,E)}).remove(function(N){var I=L.getItemGraphicEl(N);I&&g(L,N,I,k,y,E)}).execute(),this._nodeScaleRatio=y.get("nodeScaleRatio"),this._updateNodeAndLinkScale(y),E.expandAndCollapse===!0&&O.eachItemGraphicEl(function(N,I){N.off("click").on("click",function(){w.dispatchAction({type:"treeExpandAndCollapse",seriesId:y.id,dataIndex:I})})}),this._data=O},_updateViewCoordSys:function(y){var p=y.getData(),w=[];p.each(function(L){var E=p.getItemLayout(L);E&&!isNaN(E.x)&&!isNaN(E.y)&&w.push([+E.x,+E.y])});var S=[],O=[];b.fromPoints(w,S,O);var B=this._min,k=this._max;O[0]-S[0]===0&&(S[0]=B?B[0]:S[0]-1,O[0]=k?k[0]:O[0]+1),O[1]-S[1]===0&&(S[1]=B?B[1]:S[1]-1,O[1]=k?k[1]:O[1]+1);var P=y.coordinateSystem=new C;P.zoomLimit=y.get("scaleLimit"),P.setBoundingRect(S[0],S[1],O[0]-S[0],O[1]-S[1]),P.setCenter(y.get("center")),P.setZoom(y.get("zoom")),this.group.attr({position:P.position,scale:P.scale}),this._viewCoordSys=P,this._min=S,this._max=O},_updateController:function(y,p,w){var S=this._controller,O=this._controllerHost,B=this.group;S.setPointerChecker(function(k,P,L){var E=B.getBoundingRect();return E.applyTransform(B.transform),E.contain(P,L)&&!o(k,w,y)}),S.enable(y.get("roam")),O.zoomLimit=y.get("scaleLimit"),O.zoom=y.coordinateSystem.getZoom(),S.off("pan").off("zoom").on("pan",function(k){f.updateViewOnPan(O,k.dx,k.dy),w.dispatchAction({seriesId:y.id,type:"treeRoam",dx:k.dx,dy:k.dy})},this).on("zoom",function(k){f.updateViewOnZoom(O,k.scale,k.originX,k.originY),w.dispatchAction({seriesId:y.id,type:"treeRoam",zoom:k.scale,originX:k.originX,originY:k.originY}),this._updateNodeAndLinkScale(y)},this)},_updateNodeAndLinkScale:function(y){var p=y.getData(),w=this._getNodeGlobalScale(y),S=[w,w];p.eachItemGraphicEl(function(O,B){O.attr("scale",S)})},_getNodeGlobalScale:function(y){var p=y.coordinateSystem;if(p.type!=="view")return 1;var w=this._nodeScaleRatio,S=p.scale,O=S&&S[0]||1,B=p.getZoom(),k=(B-1)*w+1;return k/O},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}});function a(y,p){var w=y.getItemLayout(p);return w&&!isNaN(w.x)&&!isNaN(w.y)&&y.getItemVisual(p,"symbol")!=="none"}function i(y,p,w){return w.itemModel=p,w.itemStyle=p.getModel("itemStyle").getItemStyle(),w.hoverItemStyle=p.getModel("emphasis.itemStyle").getItemStyle(),w.lineStyle=p.getModel("lineStyle").getLineStyle(),w.labelModel=p.getModel("label"),w.hoverLabelModel=p.getModel("emphasis.label"),y.isExpand===!1&&y.children.length!==0?w.symbolInnerColor=w.itemStyle.fill:w.symbolInnerColor="#fff",w}function n(y,p,w,S,O,E){var k=!w,P=y.tree.getNodeByDataIndex(p),L=P.getModel(),E=i(P,L,E),N=y.tree.root,I=P.parentNode===N?P:P.parentNode||P,G=y.getItemGraphicEl(I.dataIndex),W=I.getLayout(),Z=G?{x:G.position[0],y:G.position[1],rawX:G.__radialOldRawX,rawY:G.__radialOldRawY}:W,U=P.getLayout();k?(w=new R(y,p,E),w.attr("position",[Z.x,Z.y])):w.updateData(y,p,E),w.__radialOldRawX=w.__radialRawX,w.__radialOldRawY=w.__radialRawY,w.__radialRawX=U.rawX,w.__radialRawY=U.rawY,S.add(w),y.setItemGraphicEl(p,w),F.updateProps(w,{position:[U.x,U.y]},O);var H=w.getSymbolPath();if(E.layout==="radial"){var V=N.children[0],Y=V.getLayout(),$=V.children.length,K,J;if(U.x===Y.x&&P.isExpand===!0){var Q={};Q.x=(V.children[0].getLayout().x+V.children[$-1].getLayout().x)/2,Q.y=(V.children[0].getLayout().y+V.children[$-1].getLayout().y)/2,K=Math.atan2(Q.y-Y.y,Q.x-Y.x),K<0&&(K=Math.PI*2+K),J=Q.x<Y.x,J&&(K=K-Math.PI)}else K=Math.atan2(U.y-Y.y,U.x-Y.x),K<0&&(K=Math.PI*2+K),P.children.length===0||P.children.length!==0&&P.isExpand===!1?(J=U.x<Y.x,J&&(K=K-Math.PI)):(J=U.x>Y.x,J||(K=K-Math.PI));var et=J?"left":"right",nt=E.labelModel.get("rotate"),st=nt*(Math.PI/180);H.setStyle({textPosition:E.labelModel.get("position")||et,textRotation:nt==null?-K:st,textOrigin:"center",verticalAlign:"middle"})}h(O,P,N,w,Z,W,U,S,E)}function h(y,p,w,S,O,B,k,P,L){var E=L.edgeShape,N=S.__edge;if(E==="curve")p.parentNode&&p.parentNode!==w&&(N||(N=S.__edge=new F.BezierCurve({shape:d(L,O,O),style:M.defaults({opacity:0,strokeNoScale:!0},L.lineStyle)})),F.updateProps(N,{shape:d(L,B,k),style:M.defaults({opacity:1},L.lineStyle)},y));else if(E==="polyline"&&L.layout==="orthogonal"&&p!==w&&p.children&&p.children.length!==0&&p.isExpand===!0){for(var I=p.children,G=[],W=0;W<I.length;W++){var Z=I[W].getLayout();G.push([Z.x,Z.y])}N||(N=S.__edge=new c({shape:{parentPoint:[k.x,k.y],childPoints:[[k.x,k.y]],orient:L.orient,forkPosition:L.edgeForkPosition},style:M.defaults({opacity:0,strokeNoScale:!0},L.lineStyle)})),F.updateProps(N,{shape:{parentPoint:[k.x,k.y],childPoints:G},style:M.defaults({opacity:1},L.lineStyle)},y)}P.add(N)}function g(y,p,w,S,O,E){for(var k=y.tree.getNodeByDataIndex(p),P=y.tree.root,L=k.getModel(),E=i(k,L,E),N=k.parentNode===P?k:k.parentNode||k,U=E.edgeShape,I;I=N.getLayout(),I==null;)N=N.parentNode===P?N:N.parentNode||N;F.updateProps(w,{position:[I.x+1,I.y+1]},O,function(){S.remove(w),y.setItemGraphicEl(p,null)}),w.fadeOut(null,{keepLabel:!0});var G=y.getItemGraphicEl(N.dataIndex),W=G.__edge,Z=w.__edge||(N.isExpand===!1||N.children.length===1?W:void 0),U=E.edgeShape;Z&&(U==="curve"?F.updateProps(Z,{shape:d(E,I,I),style:{opacity:0}},O,function(){S.remove(Z)}):U==="polyline"&&E.layout==="orthogonal"&&F.updateProps(Z,{shape:{parentPoint:[I.x,I.y],childPoints:[[I.x,I.y]]},style:{opacity:0}},O,function(){S.remove(Z)}))}function d(y,p,w){var S,O,B,k,P=y.orient,L,E,N,I;if(y.layout==="radial"){L=p.rawX,N=p.rawY,E=w.rawX,I=w.rawY;var G=T(L,N),W=T(L,N+(I-N)*y.curvature),Z=T(E,I+(N-I)*y.curvature),U=T(E,I);return{x1:G.x,y1:G.y,x2:U.x,y2:U.y,cpx1:W.x,cpy1:W.y,cpx2:Z.x,cpy2:Z.y}}else L=p.x,N=p.y,E=w.x,I=w.y,(P==="LR"||P==="RL")&&(S=L+(E-L)*y.curvature,O=N,B=E+(L-E)*y.curvature,k=I),(P==="TB"||P==="BT")&&(S=L,O=N+(I-N)*y.curvature,B=E,k=I+(N-I)*y.curvature);return{x1:L,y1:N,x2:E,y2:I,cpx1:S,cpy1:O,cpx2:B,cpy2:k}}X.exports=x},67882:function(X,z,e){var M=e(30871);function F(r){r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var s=[r],c,x;c=s.pop();)if(x=c.children,c.isExpand&&x.length)for(var a=x.length,i=a-1;i>=0;i--){var n=x[i];n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i,thread:null},s.push(n)}}function R(r,s){var c=r.isExpand?r.children:[],x=r.parentNode.children,a=r.hierNode.i?x[r.hierNode.i-1]:null;if(c.length){C(r);var i=(c[0].hierNode.prelim+c[c.length-1].hierNode.prelim)/2;a?(r.hierNode.prelim=a.hierNode.prelim+s(r,a),r.hierNode.modifier=r.hierNode.prelim-i):r.hierNode.prelim=i}else a&&(r.hierNode.prelim=a.hierNode.prelim+s(r,a));r.parentNode.hierNode.defaultAncestor=f(r,a,r.parentNode.hierNode.defaultAncestor||x[0],s)}function A(r){var s=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:s},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function T(r){return arguments.length?r:l}function D(r,s){var c={};return r-=Math.PI/2,c.x=s*Math.cos(r),c.y=s*Math.sin(r),c}function b(r,s){return M.getLayoutRect(r.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}function C(r){for(var s=r.children,c=s.length,x=0,a=0;--c>=0;){var i=s[c];i.hierNode.prelim+=x,i.hierNode.modifier+=x,a+=i.hierNode.change,x+=i.hierNode.shift+a}}function f(r,s,c,x){if(s){for(var a=r,i=r,n=i.parentNode.children[0],h=s,g=a.hierNode.modifier,d=i.hierNode.modifier,y=n.hierNode.modifier,p=h.hierNode.modifier;h=v(h),i=m(i),h&&i;){a=v(a),n=m(n),a.hierNode.ancestor=r;var w=h.hierNode.prelim+p-i.hierNode.prelim-d+x(h,i);w>0&&(u(o(h,r,c),r,w),d+=w,g+=w),p+=h.hierNode.modifier,d+=i.hierNode.modifier,g+=a.hierNode.modifier,y+=n.hierNode.modifier}h&&!v(a)&&(a.hierNode.thread=h,a.hierNode.modifier+=p-g),i&&!m(n)&&(n.hierNode.thread=i,n.hierNode.modifier+=d-y,c=r)}return c}function v(r){var s=r.children;return s.length&&r.isExpand?s[s.length-1]:r.hierNode.thread}function m(r){var s=r.children;return s.length&&r.isExpand?s[0]:r.hierNode.thread}function o(r,s,c){return r.hierNode.ancestor.parentNode===s.parentNode?r.hierNode.ancestor:c}function u(r,s,c){var x=c/(s.hierNode.i-r.hierNode.i);s.hierNode.change-=x,s.hierNode.shift+=c,s.hierNode.modifier+=c,s.hierNode.prelim+=c,r.hierNode.change+=x}function l(r,s){return r.parentNode===s.parentNode?1:2}z.init=F,z.firstWalk=R,z.secondWalk=A,z.separation=T,z.radialCoordinate=D,z.getViewRect=b},1825:function(X,z){function e(F,R,A){for(var T=[F],D=[],b;b=T.pop();)if(D.push(b),b.isExpand){var C=b.children;if(C.length)for(var f=0;f<C.length;f++)T.push(C[f])}for(;b=D.pop();)R(b,A)}function M(F,R){for(var A=[F],T;T=A.pop();)if(R(T),T.isExpand){var D=T.children;if(D.length)for(var b=D.length-1;b>=0;b--)A.push(D[b])}}z.eachAfter=e,z.eachBefore=M},61256:function(X,z,e){var M=e(3440),F=e(64072),R=F.updateCenterAndZoom;M.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(A,T){T.eachComponent({mainType:"series",subType:"tree",query:A},function(D){var b=A.dataIndex,C=D.getData().tree,f=C.getNodeByDataIndex(b);f.isExpand=!f.isExpand})}),M.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(A,T){T.eachComponent({mainType:"series",subType:"tree",query:A},function(D){var b=D.coordinateSystem,C=R(b,A);D.setCenter&&D.setCenter(C.center),D.setZoom&&D.setZoom(C.zoom)})})},55999:function(X,z,e){var M=e(1825),F=M.eachAfter,R=M.eachBefore,A=e(67882),T=A.init,D=A.firstWalk,b=A.secondWalk,C=A.separation,f=A.radialCoordinate,v=A.getViewRect;function m(u,l){u.eachSeriesByType("tree",function(r){o(r,l)})}function o(u,l){var r=v(u,l);u.layoutInfo=r;var s=u.get("layout"),c=0,x=0,a=null;s==="radial"?(c=2*Math.PI,x=Math.min(r.height,r.width)/2,a=C(function(P,L){return(P.parentNode===L.parentNode?1:2)/P.depth})):(c=r.width,x=r.height,a=C());var i=u.getData().tree.root,n=i.children[0];if(n){T(i),F(n,D,a),i.hierNode.modifier=-n.hierNode.prelim,R(n,b);var h=n,g=n,d=n;R(n,function(P){var L=P.getLayout().x;L<h.getLayout().x&&(h=P),L>g.getLayout().x&&(g=P),P.depth>d.depth&&(d=P)});var y=h===g?1:a(h,g)/2,p=y-h.getLayout().x,w=0,S=0,O=0,B=0;if(s==="radial")w=c/(g.getLayout().x+y+p),S=x/(d.depth-1||1),R(n,function(P){O=(P.getLayout().x+p)*w,B=(P.depth-1)*S;var L=f(O,B);P.setLayout({x:L.x,y:L.y,rawX:O,rawY:B},!0)});else{var k=u.getOrient();k==="RL"||k==="LR"?(S=x/(g.getLayout().x+y+p),w=c/(d.depth-1||1),R(n,function(P){B=(P.getLayout().x+p)*S,O=k==="LR"?(P.depth-1)*w:c-(P.depth-1)*w,P.setLayout({x:O,y:B},!0)})):(k==="TB"||k==="BT")&&(w=c/(g.getLayout().x+y+p),S=x/(d.depth-1||1),R(n,function(P){O=(P.getLayout().x+p)*w,B=k==="TB"?(P.depth-1)*S:x-(P.depth-1)*S,P.setLayout({x:O,y:B},!0)}))}}}X.exports=m},97408:function(X,z,e){var M=e(3440);e(12377),e(72593),e(4945);var F=e(96913),R=e(16472);M.registerVisual(F),M.registerLayout(R)},93448:function(X,z,e){var M=e(48070),F=e(30871),R=e(31879),A=e(998),T=A.wrapTreePathInfo,D=8,b=8,C=5;function f(u){this.group=new M.Group,u.add(this.group)}f.prototype={constructor:f,render:function(u,l,r,s){var c=u.getModel("breadcrumb"),x=this.group;if(x.removeAll(),!(!c.get("show")||!r)){var a=c.getModel("itemStyle"),i=a.getModel("textStyle"),n={pos:{left:c.get("left"),right:c.get("right"),top:c.get("top"),bottom:c.get("bottom")},box:{width:l.getWidth(),height:l.getHeight()},emptyItemWidth:c.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,n,i),this._renderContent(u,n,a,i,s),F.positionElement(x,n.pos,n.box)}},_prepare:function(u,l,r){for(var s=u;s;s=s.parentNode){var c=s.getModel().get("name"),x=r.getTextRect(c),a=Math.max(x.width+D*2,l.emptyItemWidth);l.totalWidth+=a+b,l.renderList.push({node:s,text:c,width:a})}},_renderContent:function(u,l,r,s,c){for(var x=0,a=l.emptyItemWidth,i=u.get("breadcrumb.height"),n=F.getAvailableSize(l.pos,l.box),h=l.totalWidth,g=l.renderList,d=g.length-1;d>=0;d--){var y=g[d],p=y.node,w=y.width,S=y.text;h>n.width&&(h-=w-a,w=a,S=null);var O=new M.Polygon({shape:{points:v(x,0,w,i,d===g.length-1,d===0)},style:R.defaults(r.getItemStyle(),{lineJoin:"bevel",text:S,textFill:s.getTextColor(),textFont:s.getFont()}),z:10,onclick:R.curry(c,p)});this.group.add(O),m(O,u,p),x+=w+b}},remove:function(){this.group.removeAll()}};function v(u,l,r,s,c,x){var a=[[c?u:u-C,l],[u+r,l],[u+r,l+s],[c?u:u-C,l+s]];return!x&&a.splice(2,0,[u+r+C,l+s/2]),!c&&a.push([u,l+s/2]),a}function m(u,l,r){u.eventData={componentType:"series",componentSubType:"treemap",componentIndex:l.componentIndex,seriesIndex:l.componentIndex,seriesName:l.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&T(r,l)}}var o=f;X.exports=o},12377:function(X,z,e){var M=e(31879),F=e(2365),R=e(75174),A=e(56785),T=e(17795),D=T.encodeHTML,b=T.addCommas,C=e(998),f=C.wrapTreePathInfo,v=F.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(u,l){var r={name:u.name,children:u.data};m(r);var s=u.levels||[],c=this.designatedVisualItemStyle={},x=new A({itemStyle:c},this,l);s=u.levels=o(s,l);var a=M.map(s||[],function(h){return new A(h,x,l)},this),i=R.createTree(r,this,n);function n(h){h.wrapMethod("getItemModel",function(g,d){var y=i.getNodeByDataIndex(d),p=a[y.depth];return g.parentModel=p||x,g})}return i.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(u){var l=this.getData(),r=this.getRawValue(u),s=M.isArray(r)?b(r[0]):b(r),c=l.getName(u);return D(c+": "+s)},getDataParams:function(u){var l=F.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(u);return l.treePathInfo=f(r,this),l},setLayoutInfo:function(u){this.layoutInfo=this.layoutInfo||{},M.extend(this.layoutInfo,u)},mapIdToIndex:function(u){var l=this._idIndexMap;l||(l=this._idIndexMap=M.createHashMap(),this._idIndexMapCount=0);var r=l.get(u);return r==null&&l.set(u,r=this._idIndexMapCount++),r},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(u){u?this._viewRoot=u:u=this._viewRoot;var l=this.getRawData().tree.root;(!u||u!==l&&!l.contains(u))&&(this._viewRoot=l)}});function m(u){var l=0;M.each(u.children,function(s){m(s);var c=s.value;M.isArray(c)&&(c=c[0]),l+=c});var r=u.value;M.isArray(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=l),r<0&&(r=0),M.isArray(u.value)?u.value[0]=r:u.value=r}function o(u,l){var r=l.get("color");if(r){u=u||[];var s;if(M.each(u,function(x){var a=new A(x),i=a.get("color");(a.get("itemStyle.color")||i&&i!=="none")&&(s=!0)}),!s){var c=u[0]||(u[0]={});c.color=r.slice()}return u}}X.exports=v},72593:function(X,z,e){var M=e(3440),F=e(31879),R=e(48070),A=e(65453),T=e(998),D=e(93448),b=e(73672),C=e(95946),f=e(43970),v=e(57847),m=e(69003),o=e(17795),u=o.windowOpen,l=F.bind,r=R.Group,s=R.Rect,c=F.each,x=3,a=["label"],i=["emphasis","label"],n=["upperLabel"],h=["emphasis","upperLabel"],g=10,d=1,y=2,p=m([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),w=function(P){var L=p(P);return L.stroke=L.fill=L.lineWidth=null,L},S=M.extendChartView({type:"treemap",init:function(P,L){this._containerGroup,this._storage=O(),this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(P,L,E,N){var I=L.findComponents({mainType:"series",subType:"treemap",query:N});if(!(F.indexOf(I,P)<0)){this.seriesModel=P,this.api=E,this.ecModel=L;var G=["treemapZoomToNode","treemapRootToNode"],W=T.retrieveTargetInfo(N,G,P),Z=N&&N.type,U=P.layoutInfo,H=!this._oldTree,V=this._storage,Y=Z==="treemapRootToNode"&&W&&V?{rootNodeGroup:V.nodeGroup[W.node.getRawIndex()],direction:N.direction}:null,$=this._giveContainerGroup(U),K=this._doRender($,P,Y);!H&&(!Z||Z==="treemapZoomToNode"||Z==="treemapRootToNode")?this._doAnimation($,K,P,Y):K.renderFinally(),this._resetController(E),this._renderBreadcrumb(P,E,W)}},_giveContainerGroup:function(P){var L=this._containerGroup;return L||(L=this._containerGroup=new r,this._initEvents(L),this.group.add(L)),L.attr("position",[P.x,P.y]),L},_doRender:function(P,L,E){var N=L.getData().tree,I=this._oldTree,G=O(),W=O(),Z=this._storage,U=[],H=F.curry(B,L,W,Z,E,G,U);Y(N.root?[N.root]:[],I&&I.root?[I.root]:[],P,N===I||!I,0);var V=$(Z);return this._oldTree=N,this._storage=W,{lastsForAnimation:G,willDeleteEls:V,renderFinally:K};function Y(J,Q,et,nt,st){nt?(Q=J,c(J,function(ht,Pt){!ht.isRemoved()&&rt(Pt,Pt)})):new A(Q,J,ut,ut).add(rt).update(rt).remove(F.curry(rt,null)).execute();function ut(ht){return ht.getId()}function rt(ht,Pt){var wt=ht!=null?J[ht]:null,At=Pt!=null?Q[Pt]:null,Nt=H(wt,At,et,st);Nt&&Y(wt&&wt.viewChildren||[],At&&At.viewChildren||[],Nt,nt,st+1)}}function $(J){var Q=O();return J&&c(J,function(et,nt){var st=Q[nt];c(et,function(ut){ut&&(st.push(ut),ut.__tmWillDelete=1)})}),Q}function K(){c(V,function(J){c(J,function(Q){Q.parent&&Q.parent.remove(Q)})}),c(U,function(J){J.invisible=!0,J.dirty()})}},_doAnimation:function(P,L,E,N){if(E.get("animation")){var I=E.get("animationDurationUpdate"),G=E.get("animationEasing"),W=v.createWrap();c(L.willDeleteEls,function(Z,U){c(Z,function(H,V){if(!H.invisible){var Y=H.parent,$;if(N&&N.direction==="drillDown")$=Y===N.rootNodeGroup?{shape:{x:0,y:0,width:Y.__tmNodeWidth,height:Y.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var K=0,J=0;Y.__tmWillDelete||(K=Y.__tmNodeWidth/2,J=Y.__tmNodeHeight/2),$=U==="nodeGroup"?{position:[K,J],style:{opacity:0}}:{shape:{x:K,y:J,width:0,height:0},style:{opacity:0}}}$&&W.add(H,$,I,G)}})}),c(this._storage,function(Z,U){c(Z,function(H,V){var Y=L.lastsForAnimation[U][V],$={};Y&&(U==="nodeGroup"?Y.old&&($.position=H.position.slice(),H.attr("position",Y.old)):(Y.old&&($.shape=F.extend({},H.shape),H.setShape(Y.old)),Y.fadein?(H.setStyle("opacity",0),$.style={opacity:1}):H.style.opacity!==1&&($.style={opacity:1})),W.add(H,$,I,G))})},this),this._state="animating",W.done(l(function(){this._state="ready",L.renderFinally()},this)).start()}},_resetController:function(P){var L=this._controller;L||(L=this._controller=new b(P.getZr()),L.enable(this.seriesModel.get("roam")),L.on("pan",l(this._onPan,this)),L.on("zoom",l(this._onZoom,this)));var E=new C(0,0,P.getWidth(),P.getHeight());L.setPointerChecker(function(N,I,G){return E.contain(I,G)})},_clearController:function(){var P=this._controller;P&&(P.dispose(),P=null)},_onPan:function(P){if(this._state!=="animating"&&(Math.abs(P.dx)>x||Math.abs(P.dy)>x)){var L=this.seriesModel.getData().tree.root;if(!L)return;var E=L.getLayout();if(!E)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:E.x+P.dx,y:E.y+P.dy,width:E.width,height:E.height}})}},_onZoom:function(P){var L=P.originX,E=P.originY;if(this._state!=="animating"){var N=this.seriesModel.getData().tree.root;if(!N)return;var I=N.getLayout();if(!I)return;var G=new C(I.x,I.y,I.width,I.height),W=this.seriesModel.layoutInfo;L-=W.x,E-=W.y;var Z=f.create();f.translate(Z,Z,[-L,-E]),f.scale(Z,Z,[P.scale,P.scale]),f.translate(Z,Z,[L,E]),G.applyTransform(Z),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:G.x,y:G.y,width:G.width,height:G.height}})}},_initEvents:function(P){P.on("click",function(L){if(this._state==="ready"){var E=this.seriesModel.get("nodeClick",!0);if(E){var N=this.findTarget(L.offsetX,L.offsetY);if(N){var I=N.node;if(I.getLayout().isLeafRoot)this._rootToNode(N);else if(E==="zoomToNode")this._zoomToNode(N);else if(E==="link"){var G=I.hostTree.data.getItemModel(I.dataIndex),W=G.get("link",!0),Z=G.get("target",!0)||"blank";W&&u(W,Z)}}}}},this)},_renderBreadcrumb:function(P,L,E){E||(E=P.get("leafDepth",!0)!=null?{node:P.getViewRoot()}:this.findTarget(L.getWidth()/2,L.getHeight()/2),E||(E={node:P.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new D(this.group))).render(P,L,E.node,l(N,this));function N(I){this._state!=="animating"&&(T.aboveViewRoot(P.getViewRoot(),I)?this._rootToNode({node:I}):this._zoomToNode({node:I}))}},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=O(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(P){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:P.node})},_rootToNode:function(P){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:P.node})},findTarget:function(P,L){var E,N=this.seriesModel.getViewRoot();return N.eachNode({attr:"viewChildren",order:"preorder"},function(I){var G=this._storage.background[I.getRawIndex()];if(G){var W=G.transformCoordToLocal(P,L),Z=G.shape;if(Z.x<=W[0]&&W[0]<=Z.x+Z.width&&Z.y<=W[1]&&W[1]<=Z.y+Z.height)E={node:I,offsetX:W[0],offsetY:W[1]};else return!1}},this),E}});function O(){return{nodeGroup:[],background:[],content:[]}}function B(P,L,E,N,I,G,W,Z,U,H){if(!W)return;var V=W.getLayout(),Y=P.getData();if(Y.setItemGraphicEl(W.dataIndex,null),!V||!V.isInView)return;var $=V.width,K=V.height,J=V.borderWidth,Q=V.invisible,et=W.getRawIndex(),nt=Z&&Z.getRawIndex(),st=W.viewChildren,ut=V.upperHeight,rt=st&&st.length,ht=W.getModel("itemStyle"),Pt=W.getModel("emphasis.itemStyle"),wt=vt("nodeGroup",r);if(!wt)return;if(U.add(wt),wt.attr("position",[V.x||0,V.y||0]),wt.__tmNodeWidth=$,wt.__tmNodeHeight=K,V.isAboveViewRoot)return wt;var At=W.getModel(),Nt=vt("background",s,H,d);if(Nt&&Rt(wt,Nt,rt&&V.upperLabelHeight),rt)R.isHighDownDispatcher(wt)&&R.setAsHighDownDispatcher(wt,!1),Nt&&(R.setAsHighDownDispatcher(Nt,!0),Y.setItemGraphicEl(W.dataIndex,Nt));else{var Lt=vt("content",s,H,y);Lt&&Tt(wt,Lt),Nt&&R.isHighDownDispatcher(Nt)&&R.setAsHighDownDispatcher(Nt,!1),R.setAsHighDownDispatcher(wt,!0),Y.setItemGraphicEl(W.dataIndex,wt)}return wt;function Rt(jt,zt,Yt){if(zt.dataIndex=W.dataIndex,zt.seriesIndex=P.seriesIndex,zt.setShape({x:0,y:0,width:$,height:K}),Q)mt(zt);else{zt.invisible=!1;var Zt=W.getVisual("borderColor",!0),ft=Pt.get("borderColor"),gt=w(ht);gt.fill=Zt;var dt=p(Pt);if(dt.fill=ft,Yt){var lt=$-2*J;Ft(gt,dt,Zt,lt,ut,{x:J,y:0,width:lt,height:ut})}else gt.text=dt.text=null;zt.setStyle(gt),R.setElementHoverStyle(zt,dt)}jt.add(zt)}function Tt(jt,zt){zt.dataIndex=W.dataIndex,zt.seriesIndex=P.seriesIndex;var Yt=Math.max($-2*J,0),Zt=Math.max(K-2*J,0);if(zt.culling=!0,zt.setShape({x:J,y:J,width:Yt,height:Zt}),Q)mt(zt);else{zt.invisible=!1;var ft=W.getVisual("color",!0),gt=w(ht);gt.fill=ft;var dt=p(Pt);Ft(gt,dt,ft,Yt,Zt),zt.setStyle(gt),R.setElementHoverStyle(zt,dt)}jt.add(zt)}function mt(jt){!jt.invisible&&G.push(jt)}function Ft(jt,zt,Yt,Zt,ft,gt){var dt=At.get("name"),lt=At.getModel(gt?n:a),ot=At.getModel(gt?h:i),it=lt.getShallow("show");R.setLabelStyle(jt,zt,lt,ot,{defaultText:it?dt:null,autoColor:Yt,isRectText:!0,labelFetcher:P,labelDataIndex:W.dataIndex,labelProp:gt?"upperLabel":"label"}),ct(jt,gt,V),ct(zt,gt,V),gt&&(jt.textRect=F.clone(gt)),jt.truncate=it&&lt.get("ellipsis")?{outerWidth:Zt,outerHeight:ft,minChar:2}:null}function ct(jt,zt,Yt){var Zt=jt.text;if(!zt&&Yt.isLeafRoot&&Zt!=null){var ft=P.get("drillDownIcon",!0);jt.text=ft?ft+" "+Zt:Zt}}function vt(jt,zt,Yt,Zt){var ft=nt!=null&&E[jt][nt],gt=I[jt];return ft?(E[jt][nt]=null,Dt(gt,ft,jt)):Q||(ft=new zt({z:k(Yt,Zt)}),ft.__tmDepth=Yt,ft.__tmStorageName=jt,Ct(gt,ft,jt)),L[jt][et]=ft}function Dt(jt,zt,Yt){var Zt=jt[et]={};Zt.old=Yt==="nodeGroup"?zt.position.slice():F.extend({},zt.shape)}function Ct(jt,zt,Yt){var Zt=jt[et]={},ft=W.parentNode;if(ft&&(!N||N.direction==="drillDown")){var gt=0,dt=0,lt=I.background[ft.getRawIndex()];!N&&lt&&lt.old&&(gt=lt.old.width,dt=lt.old.height),Zt.old=Yt==="nodeGroup"?[0,dt]:{x:gt,y:dt,width:0,height:0}}Zt.fadein=Yt!=="nodeGroup"}}function k(P,L){var E=P*g+L;return(E-1)/E}X.exports=S},4945:function(X,z,e){for(var M=e(3440),F=e(998),R=function(){},A=["treemapZoomToNode","treemapRender","treemapMove"],T=0;T<A.length;T++)M.registerAction({type:A[T],update:"updateView"},R);M.registerAction({type:"treemapRootToNode",update:"updateView"},function(D,b){b.eachComponent({mainType:"series",subType:"treemap",query:D},C);function C(f,v){var m=["treemapZoomToNode","treemapRootToNode"],o=F.retrieveTargetInfo(D,m,f);if(o){var u=f.getViewRoot();u&&(D.direction=F.aboveViewRoot(u,o.node)?"rollUp":"drillDown"),f.resetViewRoot(o.node)}}})},16472:function(X,z,e){var M=e(31879),F=e(95946),R=e(48354),A=R.parsePercent,T=R.MAX_SAFE_INTEGER,D=e(30871),b=e(998),C=Math.max,f=Math.min,v=M.retrieve,m=M.each,o=["itemStyle","borderWidth"],u=["itemStyle","gapWidth"],l=["upperLabel","show"],r=["upperLabel","height"],s={seriesType:"treemap",reset:function(S,O,B,k){var P=B.getWidth(),L=B.getHeight(),E=S.option,N=D.getLayoutRect(S.getBoxLayoutParams(),{width:B.getWidth(),height:B.getHeight()}),I=E.size||[],G=A(v(N.width,I[0]),P),W=A(v(N.height,I[1]),L),Z=k&&k.type,U=["treemapZoomToNode","treemapRootToNode"],H=b.retrieveTargetInfo(k,U,S),V=Z==="treemapRender"||Z==="treemapMove"?k.rootRect:null,Y=S.getViewRoot(),$=b.getPathToRoot(Y);if(Z!=="treemapMove"){var K=Z==="treemapZoomToNode"?d(S,H,Y,G,W):V?[V.width,V.height]:[G,W],J=E.sort;J&&J!=="asc"&&J!=="desc"&&(J="desc");var Q={squareRatio:E.squareRatio,sort:J,leafDepth:E.leafDepth};Y.hostTree.clearLayouts();var et={x:0,y:0,width:K[0],height:K[1],area:K[0]*K[1]};Y.setLayout(et),c(Y,Q,!1,0);var et=Y.getLayout();m($,function(st,ut){var rt=($[ut+1]||Y).getValue();st.setLayout(M.extend({dataExtent:[rt,rt],borderWidth:0,upperHeight:0},et))})}var nt=S.getData().tree.root;nt.setLayout(y(N,V,H),!0),S.setLayoutInfo(N),p(nt,new F(-N.x,-N.y,P,L),$,Y,0)}};function c(S,O,B,k){var P,L;if(!S.isRemoved()){var E=S.getLayout();P=E.width,L=E.height;var H=S.getModel(),N=H.get(o),I=H.get(u)/2,G=w(H),W=Math.max(N,G),Z=N-I,U=W-I,H=S.getModel();S.setLayout({borderWidth:N,upperHeight:W,upperLabelHeight:G},!0),P=C(P-2*Z,0),L=C(L-Z-U,0);var V=P*L,Y=x(S,H,V,O,B,k);if(Y.length){var $={x:Z,y:U,width:P,height:L},K=f(P,L),J=1/0,Q=[];Q.area=0;for(var et=0,nt=Y.length;et<nt;){var st=Y[et];Q.push(st),Q.area+=st.getLayout().area;var ut=h(Q,K,O.squareRatio);ut<=J?(et++,J=ut):(Q.area-=Q.pop().getLayout().area,g(Q,K,$,I,!1),K=f($.width,$.height),Q.length=Q.area=0,J=1/0)}if(Q.length&&g(Q,K,$,I,!0),!B){var rt=H.get("childrenVisibleMin");rt!=null&&V<rt&&(B=!0)}for(var et=0,nt=Y.length;et<nt;et++)c(Y[et],O,B,k+1)}}}function x(S,O,B,k,P,L){var E=S.children||[],N=k.sort;N!=="asc"&&N!=="desc"&&(N=null);var I=k.leafDepth!=null&&k.leafDepth<=L;if(P&&!I)return S.viewChildren=[];E=M.filter(E,function(H){return!H.isRemoved()}),i(E,N);var G=n(O,E,N);if(G.sum===0)return S.viewChildren=[];if(G.sum=a(O,B,G.sum,N,E),G.sum===0)return S.viewChildren=[];for(var W=0,Z=E.length;W<Z;W++){var U=E[W].getValue()/G.sum*B;E[W].setLayout({area:U})}return I&&(E.length&&S.setLayout({isLeafRoot:!0},!0),E.length=0),S.viewChildren=E,S.setLayout({dataExtent:G.dataExtent},!0),E}function a(S,O,B,k,P){if(!k)return B;for(var L=S.get("visibleMin"),E=P.length,N=E,I=E-1;I>=0;I--){var G=P[k==="asc"?E-I-1:I].getValue();G/B*O<L&&(N=I,B-=G)}return k==="asc"?P.splice(0,E-N):P.splice(N,E-N),B}function i(S,O){return O&&S.sort(function(B,k){var P=O==="asc"?B.getValue()-k.getValue():k.getValue()-B.getValue();return P===0?O==="asc"?B.dataIndex-k.dataIndex:k.dataIndex-B.dataIndex:P}),S}function n(S,O,B){for(var k=0,P=0,L=O.length;P<L;P++)k+=O[P].getValue();var E=S.get("visualDimension"),N;if(!O||!O.length)N=[NaN,NaN];else if(E==="value"&&B)N=[O[O.length-1].getValue(),O[0].getValue()],B==="asc"&&N.reverse();else{var N=[1/0,-1/0];m(O,function(G){var W=G.getValue(E);W<N[0]&&(N[0]=W),W>N[1]&&(N[1]=W)})}return{sum:k,dataExtent:N}}function h(S,O,B){for(var k=0,P=1/0,L=0,E,N=S.length;L<N;L++)E=S[L].getLayout().area,E&&(E<P&&(P=E),E>k&&(k=E));var I=S.area*S.area,G=O*O*B;return I?C(G*k/I,I/(G*P)):1/0}function g(S,O,B,k,P){var L=O===B.width?0:1,E=1-L,N=["x","y"],I=["width","height"],G=B[N[L]],W=O?S.area/O:0;(P||W>B[I[E]])&&(W=B[I[E]]);for(var Z=0,U=S.length;Z<U;Z++){var H=S[Z],V={},Y=W?H.getLayout().area/W:0,$=V[I[E]]=C(W-2*k,0),K=B[N[L]]+B[I[L]]-G,J=Z===U-1||K<Y?K:Y,Q=V[I[L]]=C(J-2*k,0);V[N[E]]=B[N[E]]+f(k,$/2),V[N[L]]=G+f(k,Q/2),G+=J,H.setLayout(V,!0)}B[N[E]]+=W,B[I[E]]-=W}function d(S,O,B,k,P){var L=(O||{}).node,E=[k,P];if(!L||L===B)return E;for(var N,I=k*P,G=I*S.option.zoomToNodeRatio;N=L.parentNode;){for(var W=0,Z=N.children,U=0,H=Z.length;U<H;U++)W+=Z[U].getValue();var V=L.getValue();if(V===0)return E;G*=W/V;var Y=N.getModel(),$=Y.get(o),K=Math.max($,w(Y,$));G+=4*$*$+(3*$+K)*Math.pow(G,.5),G>T&&(G=T),L=N}G<I&&(G=I);var J=Math.pow(G/I,.5);return[k*J,P*J]}function y(S,O,B){if(O)return{x:O.x,y:O.y};var k={x:0,y:0};if(!B)return k;var P=B.node,L=P.getLayout();if(!L)return k;for(var E=[L.width/2,L.height/2],N=P;N;){var I=N.getLayout();E[0]+=I.x,E[1]+=I.y,N=N.parentNode}return{x:S.width/2-E[0],y:S.height/2-E[1]}}function p(S,O,B,k,P){var L=S.getLayout(),E=B[P],N=E&&E===S;if(!(E&&!N||P===B.length&&S!==k)){S.setLayout({isInView:!0,invisible:!N&&!O.intersect(L),isAboveViewRoot:N},!0);var I=new F(O.x-L.x,O.y-L.y,O.width,O.height);m(S.viewChildren||[],function(G){p(G,I,B,k,P+1)})}}function w(S){return S.get(l)?S.get(r):0}X.exports=s},96913:function(X,z,e){var M=e(58796),F=e(94819),R=e(31879),A=R.isArray,T="itemStyle",D={seriesType:"treemap",reset:function(r,s,c,x){var a=r.getData().tree,i=a.root;i.isRemoved()||b(i,{},r.getViewRoot().getAncestors(),r)}};function b(r,s,c,x){var a=r.getModel(),i=r.getLayout();if(!(!i||i.invisible||!i.isInView)){var n=r.getModel(T),h=C(n,s,x),g=n.get("borderColor"),d=n.get("borderColorSaturation"),y;d!=null&&(y=f(h,r),g=v(d,y)),r.setVisual("borderColor",g);var p=r.viewChildren;if(!p||!p.length)y=f(h,r),r.setVisual("color",y);else{var w=o(r,a,i,n,h,p);R.each(p,function(S,O){if(S.depth>=c.length||S===c[S.depth]){var B=l(a,h,S,O,w,x);b(S,B,c,x)}})}}}function C(r,s,c){var x=R.extend({},s),a=c.designatedVisualItemStyle;return R.each(["color","colorAlpha","colorSaturation"],function(i){a[i]=s[i];var n=r.get(i);a[i]=null,n!=null&&(x[i]=n)}),x}function f(r){var s=m(r,"color");if(s){var c=m(r,"colorAlpha"),x=m(r,"colorSaturation");return x&&(s=F.modifyHSL(s,null,null,x)),c&&(s=F.modifyAlpha(s,c)),s}}function v(r,s){return s!=null?F.modifyHSL(s,null,null,r):null}function m(r,s){var c=r[s];if(c!=null&&c!=="none")return c}function o(r,s,c,x,a,i){if(!(!i||!i.length)){var n=u(s,"color")||a.color!=null&&a.color!=="none"&&(u(s,"colorAlpha")||u(s,"colorSaturation"));if(n){var h=s.get("visualMin"),g=s.get("visualMax"),d=c.dataExtent.slice();h!=null&&h<d[0]&&(d[0]=h),g!=null&&g>d[1]&&(d[1]=g);var y=s.get("colorMappingBy"),p={type:n.name,dataExtent:d,visual:n.range};p.type==="color"&&(y==="index"||y==="id")?(p.mappingMethod="category",p.loop=!0):p.mappingMethod="linear";var w=new M(p);return w.__drColorMappingBy=y,w}}}function u(r,s){var c=r.get(s);return A(c)&&c.length?{name:s,range:c}:null}function l(r,s,c,x,a,i){var n=R.extend({},s);if(a){var h=a.type,g=h==="color"&&a.__drColorMappingBy,d=g==="index"?x:g==="id"?i.mapIdToIndex(c.getId()):c.getValue(r.get("visualDimension"));n[h]=a.mapValueToVisual(d)}return n}X.exports=D},71883:function(X,z,e){e(68137),e(47976)},95608:function(X,z,e){e(152),e(9952)},44344:function(X,z,e){var M=e(3440),F=e(31879),R=e(32740),A=e(79789);e(79319),e(92882),e(88067),M.registerPreprocessor(function(T){if(T){(!T.axisPointer||T.axisPointer.length===0)&&(T.axisPointer={});var D=T.axisPointer.link;D&&!F.isArray(D)&&(T.axisPointer.link=[D])}}),M.registerProcessor(M.PRIORITY.PROCESSOR.STATISTIC,function(T,D){T.getComponent("axisPointer").coordSysAxesInfo=R.collect(T,D)}),M.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},A)},79319:function(X,z,e){var M=e(3440),F=M.extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}}),R=F;X.exports=R},92882:function(X,z,e){var M=e(3440),F=e(53036),R=M.extendComponentView({type:"axisPointer",render:function(T,D,b){var C=D.getComponent("tooltip"),f=T.get("triggerOn")||C&&C.get("triggerOn")||"mousemove|click";F.register("axisPointer",b,function(v,m,o){f!=="none"&&(v==="leave"||f.indexOf(v)>=0)&&o({type:"updateAxisPointer",currTrigger:v,x:m&&m.offsetX,y:m&&m.offsetY})})},remove:function(T,D){F.unregister(D.getZr(),"axisPointer"),R.superApply(this._model,"remove",arguments)},dispose:function(T,D){F.unregister("axisPointer",D),R.superApply(this._model,"dispose",arguments)}}),A=R;X.exports=A},6929:function(X,z,e){var M=e(31879),F=e(28108),R=e(48070),A=e(32740),T=e(19756),D=e(1655),b=e(35454),C=b.makeInner,f=C(),v=M.clone,m=M.bind;function o(){}o.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(a,i,n,h){var g=i.get("value"),d=i.get("status");if(this._axisModel=a,this._axisPointerModel=i,this._api=n,!(!h&&this._lastValue===g&&this._lastStatus===d)){this._lastValue=g,this._lastStatus=d;var y=this._group,p=this._handle;if(!d||d==="hide"){y&&y.hide(),p&&p.hide();return}y&&y.show(),p&&p.show();var w={};this.makeElOption(w,g,a,i,n);var S=w.graphicKey;S!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=S;var O=this._moveAnimation=this.determineAnimation(a,i);if(!y)y=this._group=new R.Group,this.createPointerEl(y,w,a,i),this.createLabelEl(y,w,a,i),n.getZr().add(y);else{var B=M.curry(u,i,O);this.updatePointerEl(y,w,B,i),this.updateLabelEl(y,w,B,i)}c(y,i,!0),this._renderHandle(g)}},remove:function(a){this.clear(a)},dispose:function(a){this.clear(a)},determineAnimation:function(a,i){var n=i.get("animation"),h=a.axis,g=h.type==="category",d=i.get("snap");if(!d&&!g)return!1;if(n==="auto"||n==null){var y=this.animationThreshold;if(g&&h.getBandWidth()>y)return!0;if(d){var p=A.getAxisInfo(a).seriesDataCount,w=h.getExtent();return Math.abs(w[0]-w[1])/p>y}return!1}return n===!0},makeElOption:function(a,i,n,h,g){},createPointerEl:function(a,i,n,h){var g=i.pointer;if(g){var d=f(a).pointerEl=new R[g.type](v(i.pointer));a.add(d)}},createLabelEl:function(a,i,n,h){if(i.label){var g=f(a).labelEl=new R.Rect(v(i.label));a.add(g),r(g,h)}},updatePointerEl:function(a,i,n){var h=f(a).pointerEl;h&&i.pointer&&(h.setStyle(i.pointer.style),n(h,{shape:i.pointer.shape}))},updateLabelEl:function(a,i,n,h){var g=f(a).labelEl;g&&(g.setStyle(i.label.style),n(g,{shape:i.label.shape,position:i.label.position}),r(g,h))},_renderHandle:function(a){if(!(this._dragging||!this.updateHandleTransform)){var i=this._axisPointerModel,n=this._api.getZr(),h=this._handle,g=i.getModel("handle"),d=i.get("status");if(!g.get("show")||!d||d==="hide"){h&&n.remove(h),this._handle=null;return}var y;this._handle||(y=!0,h=this._handle=R.createIcon(g.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(S){T.stop(S.event)},onmousedown:m(this._onHandleDragMove,this,0,0),drift:m(this._onHandleDragMove,this),ondragend:m(this._onHandleDragEnd,this)}),n.add(h)),c(h,i,!1);var p=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];h.setStyle(g.getItemStyle(null,p));var w=g.get("size");M.isArray(w)||(w=[w,w]),h.attr("scale",[w[0]/2,w[1]/2]),D.createOrUpdate(this,"_doDispatchAxisPointer",g.get("throttle")||0,"fixRate"),this._moveHandleToValue(a,y)}},_moveHandleToValue:function(a,i){u(this._axisPointerModel,!i&&this._moveAnimation,this._handle,s(this.getHandleTransform(a,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(a,i){var n=this._handle;if(n){this._dragging=!0;var h=this.updateHandleTransform(s(n),[a,i],this._axisModel,this._axisPointerModel);this._payloadInfo=h,n.stopAnimation(),n.attr(s(h)),f(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){var a=this._handle;if(a){var i=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:i.cursorPoint[0],y:i.cursorPoint[1],tooltipOption:i.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},_onHandleDragEnd:function(a){this._dragging=!1;var i=this._handle;if(i){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(a){this._lastValue=null,this._lastStatus=null;var i=a.getZr(),n=this._group,h=this._handle;i&&n&&(this._lastGraphicKey=null,n&&i.remove(n),h&&i.remove(h),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(a,i,n){return n=n||0,{x:a[n],y:a[1-n],width:i[n],height:i[1-n]}}},o.prototype.constructor=o;function u(a,i,n,h){l(f(n).lastProp,h)||(f(n).lastProp=h,i?R.updateProps(n,h,a):(n.stopAnimation(),n.attr(h)))}function l(a,i){if(M.isObject(a)&&M.isObject(i)){var n=!0;return M.each(i,function(h,g){n=n&&l(a[g],h)}),!!n}else return a===i}function r(a,i){a[i.get("label.show")?"show":"hide"]()}function s(a){return{position:a.position.slice(),rotation:a.rotation||0}}function c(a,i,n){var h=i.get("z"),g=i.get("zlevel");a&&a.traverse(function(d){d.type!=="group"&&(h!=null&&(d.z=h),g!=null&&(d.zlevel=g),d.silent=n)})}F.enableClassExtend(o);var x=o;X.exports=x},88067:function(X,z,e){var M=e(6929),F=e(60293),R=e(99495),A=e(11447),T=M.extend({makeElOption:function(v,m,o,u,l){var r=o.axis,s=r.grid,c=u.get("type"),x=D(s,r).getOtherAxis(r).getGlobalExtent(),a=r.toGlobalCoord(r.dataToCoord(m,!0));if(c&&c!=="none"){var i=F.buildElStyle(u),n=b[c](r,a,x);n.style=i,v.graphicKey=n.type,v.pointer=n}var h=R.layout(s.model,o);F.buildCartesianSingleLabelElOption(m,v,h,o,u,l)},getHandleTransform:function(v,m,o){var u=R.layout(m.axis.grid.model,m,{labelInside:!1});return u.labelMargin=o.get("handle.margin"),{position:F.getTransformedPosition(m.axis,v,u),rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(v,m,o,u){var l=o.axis,r=l.grid,s=l.getGlobalExtent(!0),c=D(r,l).getOtherAxis(l).getGlobalExtent(),x=l.dim==="x"?0:1,a=v.position;a[x]+=m[x],a[x]=Math.min(s[1],a[x]),a[x]=Math.max(s[0],a[x]);var i=(c[1]+c[0])/2,n=[i,i];n[x]=a[x];var h=[{verticalAlign:"middle"},{align:"center"}];return{position:a,rotation:v.rotation,cursorPoint:n,tooltipOption:h[x]}}});function D(v,m){var o={};return o[m.dim+"AxisIndex"]=m.index,v.getCartesian(o)}var b={line:function(v,m,o){var u=F.makeLineShape([m,o[0]],[m,o[1]],C(v));return{type:"Line",subPixelOptimize:!0,shape:u}},shadow:function(v,m,o){var u=Math.max(1,v.getBandWidth()),l=o[1]-o[0];return{type:"Rect",shape:F.makeRectShape([m-u/2,o[0]],[u,l],C(v))}}};function C(v){return v.dim==="x"?0:1}A.registerAxisPointerClass("CartesianAxisPointer",T);var f=T;X.exports=f},47438:function(X,z,e){var M=e(17795),F=e(6929),R=e(48070),A=e(60293),T=e(43970),D=e(10030),b=e(11447),C=F.extend({makeElOption:function(o,u,l,r,s){var c=l.axis;c.dim==="angle"&&(this.animationThreshold=Math.PI/18);var x=c.polar,a=x.getOtherAxis(c),i=a.getExtent(),n;n=c["dataTo"+M.capitalFirst(c.dim)](u);var h=r.get("type");if(h&&h!=="none"){var g=A.buildElStyle(r),d=v[h](c,x,n,i,g);d.style=g,o.graphicKey=d.type,o.pointer=d}var y=r.get("label.margin"),p=f(u,l,r,x,y);A.buildLabelElOption(o,l,r,s,p)}});function f(o,u,l,r,s){var c=u.axis,x=c.dataToCoord(o),a=r.getAngleAxis().getExtent()[0];a=a/180*Math.PI;var i=r.getRadiusAxis().getExtent(),n,h,g;if(c.dim==="radius"){var d=T.create();T.rotate(d,d,a),T.translate(d,d,[r.cx,r.cy]),n=R.applyTransform([x,-s],d);var y=u.getModel("axisLabel").get("rotate")||0,p=D.innerTextLayout(a,y*Math.PI/180,-1);h=p.textAlign,g=p.textVerticalAlign}else{var w=i[1];n=r.coordToPoint([w+s,x]);var S=r.cx,O=r.cy;h=Math.abs(n[0]-S)/w<.3?"center":n[0]>S?"left":"right",g=Math.abs(n[1]-O)/w<.3?"middle":n[1]>O?"top":"bottom"}return{position:n,align:h,verticalAlign:g}}var v={line:function(o,u,l,r,s){return o.dim==="angle"?{type:"Line",shape:A.makeLineShape(u.coordToPoint([r[0],l]),u.coordToPoint([r[1],l]))}:{type:"Circle",shape:{cx:u.cx,cy:u.cy,r:l}}},shadow:function(o,u,l,r,s){var c=Math.max(1,o.getBandWidth()),x=Math.PI/180;return o.dim==="angle"?{type:"Sector",shape:A.makeSectorShape(u.cx,u.cy,r[0],r[1],(-l-c/2)*x,(-l+c/2)*x)}:{type:"Sector",shape:A.makeSectorShape(u.cx,u.cy,l-c/2,l+c/2,0,Math.PI*2)}}};b.registerAxisPointerClass("PolarAxisPointer",C);var m=C;X.exports=m},74139:function(X,z,e){var M=e(6929),F=e(60293),R=e(60367),A=e(11447),T=["x","y"],D=["width","height"],b=M.extend({makeElOption:function(o,u,l,r,s){var c=l.axis,x=c.coordinateSystem,a=v(x,1-f(c)),i=x.dataToPoint(u)[0],n=r.get("type");if(n&&n!=="none"){var h=F.buildElStyle(r),g=C[n](c,i,a);g.style=h,o.graphicKey=g.type,o.pointer=g}var d=R.layout(l);F.buildCartesianSingleLabelElOption(u,o,d,l,r,s)},getHandleTransform:function(o,u,l){var r=R.layout(u,{labelInside:!1});return r.labelMargin=l.get("handle.margin"),{position:F.getTransformedPosition(u.axis,o,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(o,u,l,r){var s=l.axis,c=s.coordinateSystem,x=f(s),a=v(c,x),i=o.position;i[x]+=u[x],i[x]=Math.min(a[1],i[x]),i[x]=Math.max(a[0],i[x]);var n=v(c,1-x),h=(n[1]+n[0])/2,g=[h,h];return g[x]=i[x],{position:i,rotation:o.rotation,cursorPoint:g,tooltipOption:{verticalAlign:"middle"}}}}),C={line:function(o,u,l){var r=F.makeLineShape([u,l[0]],[u,l[1]],f(o));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(o,u,l){var r=o.getBandWidth(),s=l[1]-l[0];return{type:"Rect",shape:F.makeRectShape([u-r/2,l[0]],[r,s],f(o))}}};function f(o){return o.isHorizontal()?0:1}function v(o,u){var l=o.getRect();return[l[T[u]],l[T[u]]+l[D[u]]]}A.registerAxisPointerClass("SingleAxisPointer",b);var m=b;X.exports=m},79789:function(X,z,e){var M=e(31879),F=e(35454),R=F.makeInner,A=e(32740),T=e(55425),D=M.each,b=M.curry,C=R();function f(i,n,h){var g=i.currTrigger,d=[i.x,i.y],y=i,p=i.dispatchAction||M.bind(h.dispatchAction,h),w=n.getComponent("axisPointer").coordSysAxesInfo;if(w){a(d)&&(d=T({seriesIndex:y.seriesIndex,dataIndex:y.dataIndex},n).point);var S=a(d),O=y.axesInfo,B=w.axesInfo,k=g==="leave"||a(d),P={},L={},E={list:[],map:{}},N={showPointer:b(o,L),showTooltip:b(u,E)};D(w.coordSysMap,function(G,W){var Z=S||G.containPoint(d);D(w.coordSysAxesInfo[W],function(U,H){var V=U.axis,Y=c(O,U);if(!k&&Z&&(!O||Y)){var $=Y&&Y.value;$==null&&!S&&($=V.pointToData(d)),$!=null&&v(U,$,N,!1,P)}})});var I={};return D(B,function(G,W){var Z=G.linkGroup;Z&&!L[W]&&D(Z.axesInfo,function(U,H){var V=L[H];if(U!==G&&V){var Y=V.value;Z.mapper&&(Y=G.axis.scale.parse(Z.mapper(Y,x(U),x(G)))),I[G.key]=Y}})}),D(I,function(G,W){v(B[W],G,N,!0,P)}),l(L,B,P),r(E,d,i,p),s(B,p,h),P}}function v(i,n,h,g,d){var y=i.axis;if(!(y.scale.isBlank()||!y.containData(n))){if(!i.involveSeries){h.showPointer(i,n);return}var p=m(n,i),w=p.payloadBatch,S=p.snapToValue;w[0]&&d.seriesIndex==null&&M.extend(d,w[0]),!g&&i.snap&&y.containData(S)&&S!=null&&(n=S),h.showPointer(i,n,w,d),h.showTooltip(i,p,S)}}function m(i,n){var h=n.axis,g=h.dim,d=i,y=[],p=Number.MAX_VALUE,w=-1;return D(n.seriesModels,function(S,O){var B=S.getData().mapDimension(g,!0),k,P;if(S.getAxisTooltipData){var L=S.getAxisTooltipData(B,i,h);P=L.dataIndices,k=L.nestestValue}else{if(P=S.getData().indicesOfNearest(B[0],i,h.type==="category"?.5:null),!P.length)return;k=S.getData().get(B[0],P[0])}if(!(k==null||!isFinite(k))){var E=i-k,N=Math.abs(E);N<=p&&((N<p||E>=0&&w<0)&&(p=N,w=E,d=k,y.length=0),D(P,function(I){y.push({seriesIndex:S.seriesIndex,dataIndexInside:I,dataIndex:S.getData().getRawIndex(I)})}))}}),{payloadBatch:y,snapToValue:d}}function o(i,n,h,g){i[n.key]={value:h,payloadBatch:g}}function u(i,n,h,g){var d=h.payloadBatch,y=n.axis,p=y.model,w=n.axisPointerModel;if(!(!n.triggerTooltip||!d.length)){var S=n.coordSys.model,O=A.makeKey(S),B=i.map[O];B||(B=i.map[O]={coordSysId:S.id,coordSysIndex:S.componentIndex,coordSysType:S.type,coordSysMainType:S.mainType,dataByAxis:[]},i.list.push(B)),B.dataByAxis.push({axisDim:y.dim,axisIndex:p.componentIndex,axisType:p.type,axisId:p.id,value:g,valueLabelOpt:{precision:w.get("label.precision"),formatter:w.get("label.formatter")},seriesDataIndices:d.slice()})}}function l(i,n,h){var g=h.axesInfo=[];D(n,function(d,y){var p=d.axisPointerModel.option,w=i[y];w?(!d.useHandle&&(p.status="show"),p.value=w.value,p.seriesDataIndices=(w.payloadBatch||[]).slice()):!d.useHandle&&(p.status="hide"),p.status==="show"&&g.push({axisDim:d.axis.dim,axisIndex:d.axis.model.componentIndex,value:p.value})})}function r(i,n,h,g){if(a(n)||!i.list.length){g({type:"hideTip"});return}var d=((i.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};g({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:h.tooltipOption,position:h.position,dataIndexInside:d.dataIndexInside,dataIndex:d.dataIndex,seriesIndex:d.seriesIndex,dataByCoordSys:i.list})}function s(i,n,h){var g=h.getZr(),d="axisPointerLastHighlights",y=C(g)[d]||{},p=C(g)[d]={};D(i,function(O,B){var k=O.axisPointerModel.option;k.status==="show"&&D(k.seriesDataIndices,function(P){var L=P.seriesIndex+" | "+P.dataIndex;p[L]=P})});var w=[],S=[];M.each(y,function(O,B){!p[B]&&S.push(O)}),M.each(p,function(O,B){!y[B]&&w.push(O)}),S.length&&h.dispatchAction({type:"downplay",escapeConnect:!0,batch:S}),w.length&&h.dispatchAction({type:"highlight",escapeConnect:!0,batch:w})}function c(i,n){for(var h=0;h<(i||[]).length;h++){var g=i[h];if(n.axis.dim===g.axisDim&&n.axis.model.componentIndex===g.axisIndex)return g}}function x(i){var n=i.axis.model,h={},g=h.axisDim=i.axis.dim;return h.axisIndex=h[g+"AxisIndex"]=n.componentIndex,h.axisName=h[g+"AxisName"]=n.name,h.axisId=h[g+"AxisId"]=n.id,h}function a(i){return!i||i[0]==null||isNaN(i[0])||i[1]==null||isNaN(i[1])}X.exports=f},55425:function(X,z,e){var M=e(31879),F=e(35454);function R(A,T){var D=[],b=A.seriesIndex,C;if(b==null||!(C=T.getSeriesByIndex(b)))return{point:[]};var f=C.getData(),v=F.queryDataIndex(f,A);if(v==null||v<0||M.isArray(v))return{point:[]};var m=f.getItemGraphicEl(v),o=C.coordinateSystem;if(C.getTooltipPosition)D=C.getTooltipPosition(v)||[];else if(o&&o.dataToPoint)D=o.dataToPoint(f.getValues(M.map(o.dimensions,function(l){return f.mapDimension(l)}),v,!0))||[];else if(m){var u=m.getBoundingRect().clone();u.applyTransform(m.transform),D=[u.x+u.width/2,u.y+u.height/2]}return{point:D,el:m}}X.exports=R},53036:function(X,z,e){var M=e(31879),F=e(58020),R=e(35454),A=R.makeInner,T=A(),D=M.each;function b(l,r,s){if(!F.node){var c=r.getZr();T(c).records||(T(c).records={}),C(c,r);var x=T(c).records[l]||(T(c).records[l]={});x.handler=s}}function C(l,r){if(T(l).initialized)return;T(l).initialized=!0,s("click",M.curry(m,"click")),s("mousemove",M.curry(m,"mousemove")),s("globalout",v);function s(c,x){l.on(c,function(a){var i=o(r);D(T(l).records,function(n){n&&x(n,a,i.dispatchAction)}),f(i.pendings,r)})}}function f(l,r){var s=l.showTip.length,c=l.hideTip.length,x;s?x=l.showTip[s-1]:c&&(x=l.hideTip[c-1]),x&&(x.dispatchAction=null,r.dispatchAction(x))}function v(l,r,s){l.handler("leave",null,s)}function m(l,r,s,c){r.handler(l,s,c)}function o(l){var r={showTip:[],hideTip:[]},s=function(c){var x=r[c.type];x?x.push(c):(c.dispatchAction=s,l.dispatchAction(c))};return{dispatchAction:s,pendings:r}}function u(l,r){if(!F.node){var s=r.getZr(),c=(T(s).records||{})[l];c&&(T(s).records[l]=null)}}z.register=b,z.unregister=u},32740:function(X,z,e){var M=e(31879),F=e(56785),R=M.each,A=M.curry;function T(s,c){var x={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return D(x,s,c),x.seriesInvolved&&C(x,s),x}function D(s,c,x){var a=c.getComponent("tooltip"),i=c.getComponent("axisPointer"),n=i.get("link",!0)||[],h=[];R(x.getCoordinateSystems(),function(g){if(!g.axisPointerEnabled)return;var d=r(g.model),y=s.coordSysAxesInfo[d]={};s.coordSysMap[d]=g;var p=g.model,w=p.getModel("tooltip",a);if(R(g.getAxes(),A(k,!1,null)),g.getTooltipAxes&&a&&w.get("show")){var S=w.get("trigger")==="axis",O=w.get("axisPointer.type")==="cross",B=g.getTooltipAxes(w.get("axisPointer.axis"));(S||O)&&R(B.baseAxes,A(k,O?"cross":!0,S)),O&&R(B.otherAxes,A(k,"cross",!1))}function k(P,L,E){var N=E.model.getModel("axisPointer",i),I=N.get("show");if(!(!I||I==="auto"&&!P&&!l(N))){L==null&&(L=N.get("triggerTooltip")),N=P?b(E,w,i,c,P,L):N;var G=N.get("snap"),W=r(E.model),Z=L||G||E.type==="category",U=s.axesInfo[W]={key:W,axis:E,coordSys:g,axisPointerModel:N,triggerTooltip:L,involveSeries:Z,snap:G,useHandle:l(N),seriesModels:[]};y[W]=U,s.seriesInvolved|=Z;var H=f(n,E);if(H!=null){var V=h[H]||(h[H]={axesInfo:{}});V.axesInfo[W]=U,V.mapper=n[H].mapper,U.linkGroup=V}}}})}function b(s,c,x,a,i,n){var h=c.getModel("axisPointer"),g={};R(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(w){g[w]=M.clone(h.get(w))}),g.snap=s.type!=="category"&&!!n,h.get("type")==="cross"&&(g.type="line");var d=g.label||(g.label={});if(d.show==null&&(d.show=!1),i==="cross"){var y=h.get("label.show");if(d.show=y??!0,!n){var p=g.lineStyle=h.get("crossStyle");p&&M.defaults(d,p.textStyle)}}return s.model.getModel("axisPointer",new F(g,x,a))}function C(s,c){c.eachSeries(function(x){var a=x.coordinateSystem,i=x.get("tooltip.trigger",!0),n=x.get("tooltip.show",!0);!a||i==="none"||i===!1||i==="item"||n===!1||x.get("axisPointer.show",!0)===!1||R(s.coordSysAxesInfo[r(a.model)],function(h){var g=h.axis;a.getAxis(g.dim)===g&&(h.seriesModels.push(x),h.seriesDataCount==null&&(h.seriesDataCount=0),h.seriesDataCount+=x.getData().count())})},this)}function f(s,c){for(var x=c.model,a=c.dim,i=0;i<s.length;i++){var n=s[i]||{};if(v(n[a+"AxisId"],x.id)||v(n[a+"AxisIndex"],x.componentIndex)||v(n[a+"AxisName"],x.name))return i}}function v(s,c){return s==="all"||M.isArray(s)&&M.indexOf(s,c)>=0||s===c}function m(s){var c=o(s);if(c){var x=c.axisPointerModel,a=c.axis.scale,i=x.option,n=x.get("status"),h=x.get("value");h!=null&&(h=a.parse(h));var g=l(x);n==null&&(i.status=g?"show":"hide");var d=a.getExtent().slice();d[0]>d[1]&&d.reverse(),(h==null||h>d[1])&&(h=d[1]),h<d[0]&&(h=d[0]),i.value=h,g&&(i.status=c.axis.scale.isBlank()?"hide":"show")}}function o(s){var c=(s.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return c&&c.axesInfo[r(s)]}function u(s){var c=o(s);return c&&c.axisPointerModel}function l(s){return!!s.get("handle.show")}function r(s){return s.type+"||"+s.id}z.collect=T,z.fixValue=m,z.getAxisInfo=o,z.getAxisPointerModel=u,z.makeKey=r},60293:function(X,z,e){var M=e(31879),F=e(48070),R=e(72113),A=e(17795),T=e(43970),D=e(99538),b=e(10030);function C(c){var x=c.get("type"),a=c.getModel(x+"Style"),i;return x==="line"?(i=a.getLineStyle(),i.fill=null):x==="shadow"&&(i=a.getAreaStyle(),i.stroke=null),i}function f(c,x,a,i,n){var h=a.get("value"),g=m(h,x.axis,x.ecModel,a.get("seriesDataIndices"),{precision:a.get("label.precision"),formatter:a.get("label.formatter")}),d=a.getModel("label"),y=A.normalizeCssArray(d.get("padding")||0),p=d.getFont(),w=R.getBoundingRect(g,p),S=n.position,O=w.width+y[1]+y[3],B=w.height+y[0]+y[2],k=n.align;k==="right"&&(S[0]-=O),k==="center"&&(S[0]-=O/2);var P=n.verticalAlign;P==="bottom"&&(S[1]-=B),P==="middle"&&(S[1]-=B/2),v(S,O,B,i);var L=d.get("backgroundColor");(!L||L==="auto")&&(L=x.get("axisLine.lineStyle.color")),c.label={shape:{x:0,y:0,width:O,height:B,r:d.get("borderRadius")},position:S.slice(),style:{text:g,textFont:p,textFill:d.getTextColor(),textPosition:"inside",textPadding:y,fill:L,stroke:d.get("borderColor")||"transparent",lineWidth:d.get("borderWidth")||0,shadowBlur:d.get("shadowBlur"),shadowColor:d.get("shadowColor"),shadowOffsetX:d.get("shadowOffsetX"),shadowOffsetY:d.get("shadowOffsetY")},z2:10}}function v(c,x,a,i){var n=i.getWidth(),h=i.getHeight();c[0]=Math.min(c[0]+x,n)-x,c[1]=Math.min(c[1]+a,h)-a,c[0]=Math.max(c[0],0),c[1]=Math.max(c[1],0)}function m(c,x,a,i,n){c=x.scale.parse(c);var h=x.scale.getLabel(c,{precision:n.precision}),g=n.formatter;if(g){var d={value:D.getAxisRawValue(x,c),axisDimension:x.dim,axisIndex:x.index,seriesData:[]};M.each(i,function(y){var p=a.getSeriesByIndex(y.seriesIndex),w=y.dataIndexInside,S=p&&p.getDataParams(w);S&&d.seriesData.push(S)}),M.isString(g)?h=g.replace("{value}",h):M.isFunction(g)&&(h=g(d))}return h}function o(c,x,a){var i=T.create();return T.rotate(i,i,a.rotation),T.translate(i,i,a.position),F.applyTransform([c.dataToCoord(x),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],i)}function u(c,x,a,i,n,h){var g=b.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=n.get("label.margin"),f(x,i,n,h,{position:o(i.axis,c,a),align:g.textAlign,verticalAlign:g.textVerticalAlign})}function l(c,x,a){return a=a||0,{x1:c[a],y1:c[1-a],x2:x[a],y2:x[1-a]}}function r(c,x,a){return a=a||0,{x:c[a],y:c[1-a],width:x[a],height:x[1-a]}}function s(c,x,a,i,n,h){return{cx:c,cy:x,r0:a,r:i,startAngle:n,endAngle:h,clockwise:!0}}z.buildElStyle=C,z.buildLabelElOption=f,z.getValueLabel=m,z.getTransformedPosition=o,z.buildCartesianSingleLabelElOption=u,z.makeLineShape=l,z.makeRectShape=r,z.makeSectorShape=s},47976:function(X,z,e){var M=e(31879),F=e(48070),R=e(56785),A=e(11447),T=e(10030),D=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function b(m,o,u){o[1]>o[0]&&(o=o.slice().reverse());var l=m.coordToPoint([o[0],u]),r=m.coordToPoint([o[1],u]);return{x1:l[0],y1:l[1],x2:r[0],y2:r[1]}}function C(m){var o=m.getRadiusAxis();return o.inverse?0:1}function f(m){var o=m[0],u=m[m.length-1];o&&u&&Math.abs(Math.abs(o.coord-u.coord)-360)<1e-4&&m.pop()}var v=A.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(m,o){if(this.group.removeAll(),!!m.get("show")){var u=m.axis,l=u.polar,r=l.getRadiusAxis().getExtent(),s=u.getTicksCoords(),c=u.getMinorTicksCoords(),x=M.map(u.getViewLabels(),function(i){var i=M.clone(i);return i.coord=u.dataToCoord(i.tickValue),i});f(x),f(s),M.each(D,function(a){m.get(a+".show")&&(!u.scale.isBlank()||a==="axisLine")&&this["_"+a](m,l,s,c,r,x)},this)}},_axisLine:function(m,o,u,l,r){var s=m.getModel("axisLine.lineStyle"),c=C(o),x=c?0:1,a;r[x]===0?a=new F.Circle({shape:{cx:o.cx,cy:o.cy,r:r[c]},style:s.getLineStyle(),z2:1,silent:!0}):a=new F.Ring({shape:{cx:o.cx,cy:o.cy,r:r[c],r0:r[x]},style:s.getLineStyle(),z2:1,silent:!0}),a.style.fill=null,this.group.add(a)},_axisTick:function(m,o,u,l,r){var s=m.getModel("axisTick"),c=(s.get("inside")?-1:1)*s.get("length"),x=r[C(o)],a=M.map(u,function(i){return new F.Line({shape:b(o,[x,x+c],i.coord)})});this.group.add(F.mergePath(a,{style:M.defaults(s.getModel("lineStyle").getLineStyle(),{stroke:m.get("axisLine.lineStyle.color")})}))},_minorTick:function(m,o,u,l,r){if(l.length){for(var s=m.getModel("axisTick"),c=m.getModel("minorTick"),x=(s.get("inside")?-1:1)*c.get("length"),a=r[C(o)],i=[],n=0;n<l.length;n++)for(var h=0;h<l[n].length;h++)i.push(new F.Line({shape:b(o,[a,a+x],l[n][h].coord)}));this.group.add(F.mergePath(i,{style:M.defaults(c.getModel("lineStyle").getLineStyle(),M.defaults(s.getLineStyle(),{stroke:m.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(m,o,u,l,r,s){var c=m.getCategories(!0),x=m.getModel("axisLabel"),a=x.get("margin"),i=m.get("triggerEvent");M.each(s,function(n,h){var g=x,d=n.tickValue,y=r[C(o)],p=o.coordToPoint([y+a,n.coord]),w=o.cx,S=o.cy,O=Math.abs(p[0]-w)/y<.3?"center":p[0]>w?"left":"right",B=Math.abs(p[1]-S)/y<.3?"middle":p[1]>S?"top":"bottom";c&&c[d]&&c[d].textStyle&&(g=new R(c[d].textStyle,x,x.ecModel));var k=new F.Text({silent:T.isLabelSilent(m)});this.group.add(k),F.setTextStyle(k.style,g,{x:p[0],y:p[1],textFill:g.getTextColor()||m.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:O,textVerticalAlign:B}),i&&(k.eventData=T.makeAxisEventDataBase(m),k.eventData.targetType="axisLabel",k.eventData.value=n.rawLabel)},this)},_splitLine:function(m,o,u,l,r){var s=m.getModel("splitLine"),c=s.getModel("lineStyle"),x=c.get("color"),a=0;x=x instanceof Array?x:[x];for(var i=[],n=0;n<u.length;n++){var h=a++%x.length;i[h]=i[h]||[],i[h].push(new F.Line({shape:b(o,r,u[n].coord)}))}for(var n=0;n<i.length;n++)this.group.add(F.mergePath(i[n],{style:M.defaults({stroke:x[n%x.length]},c.getLineStyle()),silent:!0,z:m.get("z")}))},_minorSplitLine:function(m,o,u,l,r){if(l.length){for(var s=m.getModel("minorSplitLine"),c=s.getModel("lineStyle"),x=[],a=0;a<l.length;a++)for(var i=0;i<l[a].length;i++)x.push(new F.Line({shape:b(o,r,l[a][i].coord)}));this.group.add(F.mergePath(x,{style:c.getLineStyle(),silent:!0,z:m.get("z")}))}},_splitArea:function(m,o,u,l,r){if(u.length){var s=m.getModel("splitArea"),c=s.getModel("areaStyle"),x=c.get("color"),a=0;x=x instanceof Array?x:[x];for(var i=[],n=Math.PI/180,h=-u[0].coord*n,g=Math.min(r[0],r[1]),d=Math.max(r[0],r[1]),y=m.get("clockwise"),p=1;p<u.length;p++){var w=a++%x.length;i[w]=i[w]||[],i[w].push(new F.Sector({shape:{cx:o.cx,cy:o.cy,r0:g,r:d,startAngle:h,endAngle:-u[p].coord*n,clockwise:y},silent:!0})),h=-u[p].coord*n}for(var p=0;p<i.length;p++)this.group.add(F.mergePath(i[p],{style:M.defaults({fill:x[p%x.length]},c.getAreaStyle()),silent:!0}))}}});X.exports=v},10030:function(X,z,e){var M=e(31879),F=M.retrieve,R=M.defaults,A=M.extend,T=M.each,D=e(17795),b=e(48070),C=e(56785),f=e(48354),v=f.isRadianAroundZero,m=f.remRadian,o=e(35730),u=o.createSymbol,l=e(43970),r=e(12072),s=r.applyTransform,c=e(99538),x=c.shouldShowAllLabels,a=Math.PI,i=function(N,I){this.opt=I,this.axisModel=N,R(I,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new b.Group;var G=new b.Group({position:I.position.slice(),rotation:I.rotation});G.updateTransform(),this._transform=G.transform,this._dumbGroup=G};i.prototype={constructor:i,hasBuilder:function(N){return!!n[N]},add:function(N){n[N].call(this)},getGroup:function(){return this.group}};var n={axisLine:function(){var N=this.opt,I=this.axisModel;if(I.get("axisLine.show")){var G=this.axisModel.axis.getExtent(),W=this._transform,Z=[G[0],0],U=[G[1],0];W&&(s(Z,Z,W),s(U,U,W));var H=A({lineCap:"round"},I.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new b.Line({anid:"line",subPixelOptimize:!0,shape:{x1:Z[0],y1:Z[1],x2:U[0],y2:U[1]},style:H,strokeContainThreshold:N.strokeContainThreshold||5,silent:!0,z2:1}));var V=I.get("axisLine.symbol"),Y=I.get("axisLine.symbolSize"),$=I.get("axisLine.symbolOffset")||0;if(typeof $=="number"&&($=[$,$]),V!=null){typeof V=="string"&&(V=[V,V]),(typeof Y=="string"||typeof Y=="number")&&(Y=[Y,Y]);var K=Y[0],J=Y[1];T([{rotate:N.rotation+Math.PI/2,offset:$[0],r:0},{rotate:N.rotation-Math.PI/2,offset:$[1],r:Math.sqrt((Z[0]-U[0])*(Z[0]-U[0])+(Z[1]-U[1])*(Z[1]-U[1]))}],function(Q,et){if(V[et]!=="none"&&V[et]!=null){var nt=u(V[et],-K/2,-J/2,K,J,H.stroke,!0),st=Q.r+Q.offset,ut=[Z[0]+st*Math.cos(N.rotation),Z[1]-st*Math.sin(N.rotation)];nt.attr({rotation:Q.rotate,position:ut,silent:!0,z2:11}),this.group.add(nt)}},this)}}},axisTickLabel:function(){var N=this.axisModel,I=this.opt,G=k(this,N,I),W=L(this,N,I);p(N,W,G),P(this,N,I)},axisName:function(){var N=this.opt,I=this.axisModel,G=F(N.axisName,I.get("name"));if(G){var W=I.get("nameLocation"),Z=N.nameDirection,U=I.getModel("nameTextStyle"),H=I.get("nameGap")||0,V=this.axisModel.axis.getExtent(),Y=V[0]>V[1]?-1:1,$=[W==="start"?V[0]-Y*H:W==="end"?V[1]+Y*H:(V[0]+V[1])/2,O(W)?N.labelOffset+Z*H:0],K,J=I.get("nameRotate");J!=null&&(J=J*a/180);var Q;O(W)?K=g(N.rotation,J??N.rotation,Z):(K=d(N,W,J||0,V),Q=N.axisNameAvailableWidth,Q!=null&&(Q=Math.abs(Q/Math.sin(K.rotation)),!isFinite(Q)&&(Q=null)));var et=U.getFont(),nt=I.get("nameTruncate",!0)||{},st=nt.ellipsis,ut=F(N.nameTruncateMaxWidth,nt.maxWidth,Q),rt=st!=null&&ut!=null?D.truncateText(G,ut,et,st,{minChar:2,placeholder:nt.placeholder}):G,ht=I.get("tooltip",!0),Pt=I.mainType,wt={componentType:Pt,name:G,$vars:["name"]};wt[Pt+"Index"]=I.componentIndex;var At=new b.Text({anid:"name",__fullText:G,__truncatedText:rt,position:$,rotation:K.rotation,silent:y(I),z2:1,tooltip:ht&&ht.show?A({content:G,formatter:function(){return G},formatterParams:wt},ht):null});b.setTextStyle(At.style,U,{text:rt,textFont:et,textFill:U.getTextColor()||I.get("axisLine.lineStyle.color"),textAlign:U.get("align")||K.textAlign,textVerticalAlign:U.get("verticalAlign")||K.textVerticalAlign}),I.get("triggerEvent")&&(At.eventData=h(I),At.eventData.targetType="axisName",At.eventData.name=G),this._dumbGroup.add(At),At.updateTransform(),this.group.add(At),At.decomposeTransform()}}},h=i.makeAxisEventDataBase=function(N){var I={componentType:N.mainType,componentIndex:N.componentIndex};return I[N.mainType+"Index"]=N.componentIndex,I},g=i.innerTextLayout=function(N,I,G){var W=m(I-N),Z,U;return v(W)?(U=G>0?"top":"bottom",Z="center"):v(W-a)?(U=G>0?"bottom":"top",Z="center"):(U="middle",W>0&&W<a?Z=G>0?"right":"left":Z=G>0?"left":"right"),{rotation:W,textAlign:Z,textVerticalAlign:U}};function d(N,I,G,W){var Z=m(G-N.rotation),U,H,V=W[0]>W[1],Y=I==="start"&&!V||I!=="start"&&V;return v(Z-a/2)?(H=Y?"bottom":"top",U="center"):v(Z-a*1.5)?(H=Y?"top":"bottom",U="center"):(H="middle",Z<a*1.5&&Z>a/2?U=Y?"left":"right":U=Y?"right":"left"),{rotation:Z,textAlign:U,textVerticalAlign:H}}var y=i.isLabelSilent=function(N){var I=N.get("tooltip");return N.get("silent")||!(N.get("triggerEvent")||I&&I.show)};function p(N,I,G){if(!x(N.axis)){var W=N.get("axisLabel.showMinLabel"),Z=N.get("axisLabel.showMaxLabel");I=I||[],G=G||[];var U=I[0],H=I[1],V=I[I.length-1],Y=I[I.length-2],$=G[0],K=G[1],J=G[G.length-1],Q=G[G.length-2];W===!1?(w(U),w($)):S(U,H)&&(W?(w(H),w(K)):(w(U),w($))),Z===!1?(w(V),w(J)):S(Y,V)&&(Z?(w(Y),w(Q)):(w(V),w(J)))}}function w(N){N&&(N.ignore=!0)}function S(N,I,G){var W=N&&N.getBoundingRect().clone(),Z=I&&I.getBoundingRect().clone();if(!(!W||!Z)){var U=l.identity([]);return l.rotate(U,U,-N.rotation),W.applyTransform(l.mul([],U,N.getLocalTransform())),Z.applyTransform(l.mul([],U,I.getLocalTransform())),W.intersect(Z)}}function O(N){return N==="middle"||N==="center"}function B(N,I,G,W,Z){for(var U=[],H=[],V=[],Y=0;Y<N.length;Y++){var $=N[Y].coord;H[0]=$,H[1]=0,V[0]=$,V[1]=G,I&&(s(H,H,I),s(V,V,I));var K=new b.Line({anid:Z+"_"+N[Y].tickValue,subPixelOptimize:!0,shape:{x1:H[0],y1:H[1],x2:V[0],y2:V[1]},style:W,z2:2,silent:!0});U.push(K)}return U}function k(N,I,G){var W=I.axis,Z=I.getModel("axisTick");if(!(!Z.get("show")||W.scale.isBlank())){for(var U=Z.getModel("lineStyle"),H=G.tickDirection*Z.get("length"),V=W.getTicksCoords(),Y=B(V,N._transform,H,R(U.getLineStyle(),{stroke:I.get("axisLine.lineStyle.color")}),"ticks"),$=0;$<Y.length;$++)N.group.add(Y[$]);return Y}}function P(N,I,G){var W=I.axis,Z=I.getModel("minorTick");if(!(!Z.get("show")||W.scale.isBlank())){var U=W.getMinorTicksCoords();if(U.length)for(var H=Z.getModel("lineStyle"),V=G.tickDirection*Z.get("length"),Y=R(H.getLineStyle(),R(I.getModel("axisTick").getLineStyle(),{stroke:I.get("axisLine.lineStyle.color")})),$=0;$<U.length;$++)for(var K=B(U[$],N._transform,V,Y,"minorticks_"+$),J=0;J<K.length;J++)N.group.add(K[J])}}function L(N,I,G){var W=I.axis,Z=F(G.axisLabelShow,I.get("axisLabel.show"));if(!(!Z||W.scale.isBlank())){var U=I.getModel("axisLabel"),H=U.get("margin"),V=W.getViewLabels(),Y=(F(G.labelRotate,U.get("rotate"))||0)*a/180,$=g(G.rotation,Y,G.labelDirection),K=I.getCategories&&I.getCategories(!0),J=[],Q=y(I),et=I.get("triggerEvent");return T(V,function(nt,st){var ut=nt.tickValue,rt=nt.formattedLabel,ht=nt.rawLabel,Pt=U;K&&K[ut]&&K[ut].textStyle&&(Pt=new C(K[ut].textStyle,U,I.ecModel));var wt=Pt.getTextColor()||I.get("axisLine.lineStyle.color"),At=W.dataToCoord(ut),Nt=[At,G.labelOffset+G.labelDirection*H],Lt=new b.Text({anid:"label_"+ut,position:Nt,rotation:$.rotation,silent:Q,z2:10});b.setTextStyle(Lt.style,Pt,{text:rt,textAlign:Pt.getShallow("align",!0)||$.textAlign,textVerticalAlign:Pt.getShallow("verticalAlign",!0)||Pt.getShallow("baseline",!0)||$.textVerticalAlign,textFill:typeof wt=="function"?wt(W.type==="category"?ht:W.type==="value"?ut+"":ut,st):wt}),et&&(Lt.eventData=h(I),Lt.eventData.targetType="axisLabel",Lt.eventData.value=ht),N._dumbGroup.add(Lt),Lt.updateTransform(),J.push(Lt),N.group.add(Lt),Lt.decomposeTransform()}),J}}var E=i;X.exports=E},11447:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(32740),T=R.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(v,m,o,u){this.axisPointerClass&&A.fixValue(v),T.superApply(this,"render",arguments),D(this,v,m,o,u,!0)},updateAxisPointer:function(v,m,o,u,l){D(this,v,m,o,u,!1)},remove:function(v,m){var o=this._axisPointer;o&&o.remove(m),T.superApply(this,"remove",arguments)},dispose:function(v,m){b(this,m),T.superApply(this,"dispose",arguments)}});function D(v,m,o,u,l,r){var s=T.getAxisPointerClass(v.axisPointerClass);if(s){var c=A.getAxisPointerModel(m);c?(v._axisPointer||(v._axisPointer=new s)).render(m,c,u,r):b(v,u)}}function b(v,m,o){var u=v._axisPointer;u&&u.dispose(m,o),v._axisPointer=null}var C=[];T.registerAxisPointerClass=function(v,m){C[v]=m},T.getAxisPointerClass=function(v){return v&&C[v]};var f=T;X.exports=f},9952:function(X,z,e){var M=e(31879),F=e(48070),R=e(10030),A=e(11447),T=e(99495),D=e(76128),b=D.rectCoordAxisBuildSplitArea,C=D.rectCoordAxisHandleRemove,f=["axisLine","axisTickLabel","axisName"],v=["splitArea","splitLine","minorSplitLine"],m=A.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(o,u,l,r){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new F.Group,this.group.add(this._axisGroup),!!o.get("show")){var c=o.getCoordSysModel(),x=T.layout(c,o),a=new R(o,x);M.each(f,a.add,a),this._axisGroup.add(a.getGroup()),M.each(v,function(i){o.get(i+".show")&&this["_"+i](o,c)},this),F.groupTransition(s,this._axisGroup,o),m.superCall(this,"render",o,u,l,r)}},remove:function(){C(this)},_splitLine:function(o,u){var l=o.axis;if(!l.scale.isBlank()){var r=o.getModel("splitLine"),s=r.getModel("lineStyle"),c=s.get("color");c=M.isArray(c)?c:[c];for(var x=u.coordinateSystem.getRect(),a=l.isHorizontal(),i=0,n=l.getTicksCoords({tickModel:r}),h=[],g=[],d=s.getLineStyle(),y=0;y<n.length;y++){var p=l.toGlobalCoord(n[y].coord);a?(h[0]=p,h[1]=x.y,g[0]=p,g[1]=x.y+x.height):(h[0]=x.x,h[1]=p,g[0]=x.x+x.width,g[1]=p);var w=i++%c.length,S=n[y].tickValue;this._axisGroup.add(new F.Line({anid:S!=null?"line_"+n[y].tickValue:null,subPixelOptimize:!0,shape:{x1:h[0],y1:h[1],x2:g[0],y2:g[1]},style:M.defaults({stroke:c[w]},d),silent:!0}))}}},_minorSplitLine:function(o,u){var l=o.axis,r=o.getModel("minorSplitLine"),s=r.getModel("lineStyle"),c=u.coordinateSystem.getRect(),x=l.isHorizontal(),a=l.getMinorTicksCoords();if(a.length)for(var i=[],n=[],h=s.getLineStyle(),g=0;g<a.length;g++)for(var d=0;d<a[g].length;d++){var y=l.toGlobalCoord(a[g][d].coord);x?(i[0]=y,i[1]=c.y,n[0]=y,n[1]=c.y+c.height):(i[0]=c.x,i[1]=y,n[0]=c.x+c.width,n[1]=y),this._axisGroup.add(new F.Line({anid:"minor_line_"+a[g][d].tickValue,subPixelOptimize:!0,shape:{x1:i[0],y1:i[1],x2:n[0],y2:n[1]},style:h,silent:!0}))}},_splitArea:function(o,u){b(this,this._axisGroup,o,u)}});m.extend({type:"xAxis"}),m.extend({type:"yAxis"})},55489:function(X,z,e){var M=e(3440),F=e(31879),R=e(10030),A=e(12968),T=e(13483),D=e(48070),b=["axisLine","axisTickLabel","axisName"],C=M.extendComponentView({type:"parallelAxis",init:function(u,l){C.superApply(this,"init",arguments),(this._brushController=new A(l.getZr())).on("brush",F.bind(this._onBrush,this))},render:function(u,l,r,s){if(!f(u,l,s)){this.axisModel=u,this.api=r,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new D.Group,this.group.add(this._axisGroup),!!u.get("show")){var x=m(u,l),a=x.coordinateSystem,i=u.getAreaSelectStyle(),n=i.width,h=u.axis.dim,g=a.getAxisLayout(h),d=F.extend({strokeContainThreshold:n},g),y=new R(u,d);F.each(b,y.add,y),this._axisGroup.add(y.getGroup()),this._refreshBrushController(d,i,u,x,n,r);var p=s&&s.animation===!1?null:u;D.groupTransition(c,this._axisGroup,p)}}},_refreshBrushController:function(u,l,r,s,c,x){var a=r.axis.getExtent(),i=a[1]-a[0],n=Math.min(30,Math.abs(i)*.1),h=D.BoundingRect.create({x:a[0],y:-c/2,width:i,height:c});h.x-=n,h.width+=2*n,this._brushController.mount({enableGlobalPan:!0,rotation:u.rotation,position:u.position}).setPanels([{panelId:"pl",clipPath:T.makeRectPanelClipPath(h),isTargetByCursor:T.makeRectIsTargetByCursor(h,x,s),getLinearBrushOtherExtent:T.makeLinearBrushOtherExtent(h,0)}]).enableBrush({brushType:"lineX",brushStyle:l,removeOnClick:!0}).updateCovers(v(r))},_onBrush:function(u,l){var r=this.axisModel,s=r.axis,c=F.map(u,function(x){return[s.coordToData(x.range[0],!0),s.coordToData(x.range[1],!0)]});(!r.option.realtime===l.isEnd||l.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:r.id,intervals:c})},dispose:function(){this._brushController.dispose()}});function f(u,l,r){return r&&r.type==="axisAreaSelect"&&l.findComponents({mainType:"parallelAxis",query:r})[0]===u}function v(u){var l=u.axis;return F.map(u.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[l.dataToCoord(r[0],!0),l.dataToCoord(r[1],!0)]}})}function m(u,l){return l.getComponent("parallel",u.get("parallelIndex"))}var o=C;X.exports=o},93915:function(X,z,e){var M=e(31879),F=e(48070),R=e(10030),A=e(11447),T=["axisLine","axisTickLabel","axisName"],D=["splitLine","splitArea","minorSplitLine"],b=A.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(f,v){if(this.group.removeAll(),!!f.get("show")){var m=f.axis,o=m.polar,u=o.getAngleAxis(),l=m.getTicksCoords(),r=m.getMinorTicksCoords(),s=u.getExtent()[0],c=m.getExtent(),x=C(o,f,s),a=new R(f,x);M.each(T,a.add,a),this.group.add(a.getGroup()),M.each(D,function(i){f.get(i+".show")&&!m.scale.isBlank()&&this["_"+i](f,o,s,c,l,r)},this)}},_splitLine:function(f,v,m,o,u){var l=f.getModel("splitLine"),r=l.getModel("lineStyle"),s=r.get("color"),c=0;s=s instanceof Array?s:[s];for(var x=[],a=0;a<u.length;a++){var i=c++%s.length;x[i]=x[i]||[],x[i].push(new F.Circle({shape:{cx:v.cx,cy:v.cy,r:u[a].coord}}))}for(var a=0;a<x.length;a++)this.group.add(F.mergePath(x[a],{style:M.defaults({stroke:s[a%s.length],fill:null},r.getLineStyle()),silent:!0}))},_minorSplitLine:function(f,v,m,o,u,l){if(l.length){for(var r=f.getModel("minorSplitLine"),s=r.getModel("lineStyle"),c=[],x=0;x<l.length;x++)for(var a=0;a<l[x].length;a++)c.push(new F.Circle({shape:{cx:v.cx,cy:v.cy,r:l[x][a].coord}}));this.group.add(F.mergePath(c,{style:M.defaults({fill:null},s.getLineStyle()),silent:!0}))}},_splitArea:function(f,v,m,o,u){if(u.length){var l=f.getModel("splitArea"),r=l.getModel("areaStyle"),s=r.get("color"),c=0;s=s instanceof Array?s:[s];for(var x=[],a=u[0].coord,i=1;i<u.length;i++){var n=c++%s.length;x[n]=x[n]||[],x[n].push(new F.Sector({shape:{cx:v.cx,cy:v.cy,r0:a,r:u[i].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),a=u[i].coord}for(var i=0;i<x.length;i++)this.group.add(F.mergePath(x[i],{style:M.defaults({fill:s[i%s.length]},r.getAreaStyle()),silent:!0}))}}});function C(f,v,m){return{position:[f.cx,f.cy],rotation:m/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:v.getModel("axisLabel").get("rotate"),z2:1}}X.exports=b},30278:function(X,z,e){var M=e(31879),F=e(10030),R=e(48070),A=e(60367),T=e(11447),D=e(76128),b=D.rectCoordAxisBuildSplitArea,C=D.rectCoordAxisHandleRemove,f=["axisLine","axisTickLabel","axisName"],v=["splitArea","splitLine"],m=T.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(u,l,r,s){var c=this.group;c.removeAll();var x=this._axisGroup;this._axisGroup=new R.Group;var a=A.layout(u),i=new F(u,a);M.each(f,i.add,i),c.add(this._axisGroup),c.add(i.getGroup()),M.each(v,function(n){u.get(n+".show")&&this["_"+n](u)},this),R.groupTransition(x,this._axisGroup,u),m.superCall(this,"render",u,l,r,s)},remove:function(){C(this)},_splitLine:function(u){var l=u.axis;if(!l.scale.isBlank()){var r=u.getModel("splitLine"),s=r.getModel("lineStyle"),c=s.get("width"),x=s.get("color");x=x instanceof Array?x:[x];for(var a=u.coordinateSystem.getRect(),i=l.isHorizontal(),n=[],h=0,g=l.getTicksCoords({tickModel:r}),d=[],y=[],p=0;p<g.length;++p){var w=l.toGlobalCoord(g[p].coord);i?(d[0]=w,d[1]=a.y,y[0]=w,y[1]=a.y+a.height):(d[0]=a.x,d[1]=w,y[0]=a.x+a.width,y[1]=w);var S=h++%x.length;n[S]=n[S]||[],n[S].push(new R.Line({subPixelOptimize:!0,shape:{x1:d[0],y1:d[1],x2:y[0],y2:y[1]},style:{lineWidth:c},silent:!0}))}for(var p=0;p<n.length;++p)this.group.add(R.mergePath(n[p],{style:{stroke:x[p%x.length],lineDash:s.getLineDash(c),lineWidth:c},silent:!0}))}},_splitArea:function(u){b(this,this._axisGroup,u,u)}}),o=m;X.exports=o},76128:function(X,z,e){var M=e(31879),F=e(48070);function R(T,D,b,C){var f=b.axis;if(!f.scale.isBlank()){var v=b.getModel("splitArea"),m=v.getModel("areaStyle"),o=m.get("color"),u=C.coordinateSystem.getRect(),l=f.getTicksCoords({tickModel:v,clamp:!0});if(l.length){var r=o.length,s=T.__splitAreaColors,c=M.createHashMap(),x=0;if(s)for(var a=0;a<l.length;a++){var i=s.get(l[a].tickValue);if(i!=null){x=(i+(r-1)*a)%r;break}}var n=f.toGlobalCoord(l[0].coord),h=m.getAreaStyle();o=M.isArray(o)?o:[o];for(var a=1;a<l.length;a++){var g=f.toGlobalCoord(l[a].coord),d,y,p,w;f.isHorizontal()?(d=n,y=u.y,p=g-d,w=u.height,n=d+p):(d=u.x,y=n,p=u.width,w=g-y,n=y+w);var S=l[a-1].tickValue;S!=null&&c.set(S,x),D.add(new F.Rect({anid:S!=null?"area_"+S:null,shape:{x:d,y,width:p,height:w},style:M.defaults({fill:o[x]},h),silent:!0})),x=(x+1)%r}T.__splitAreaColors=c}}}function A(T){T.__splitAreaColors=null}z.rectCoordAxisBuildSplitArea=R,z.rectCoordAxisHandleRemove=A},93847:function(X,z,e){var M=e(3440),F={type:"axisAreaSelect",event:"axisAreaSelected"};M.registerAction(F,function(R,A){A.eachComponent({mainType:"parallelAxis",query:R},function(T){T.axis.model.setActiveIntervals(R.intervals)})}),M.registerAction("parallelAxisExpand",function(R,A){A.eachComponent({mainType:"parallel",query:R},function(T){T.setAxisExpand(R)})})},36888:function(X,z,e){var M=e(3440),F=e(80504);e(94141),e(89654),e(80461),e(36499),e(44562),M.registerPreprocessor(F)},89654:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(31879),T=e(36193),D=e(56785),b=["#ddd"],C=R.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(m,o){var u=this.option;!o&&T.replaceVisualOption(u,m,["inBrush","outOfBrush"]);var l=u.inBrush=u.inBrush||{};u.outOfBrush=u.outOfBrush||{color:b},l.hasOwnProperty("liftZ")||(l.liftZ=5)},setAreas:function(m){m&&(this.areas=A.map(m,function(o){return f(this.option,o)},this))},setBrushOption:function(m){this.brushOption=f(this.option,m),this.brushType=this.brushOption.brushType}});function f(m,o){return A.merge({brushType:m.brushType,brushMode:m.brushMode,transformable:m.transformable,brushStyle:new D(m.brushStyle).getItemStyle(),removeOnClick:m.removeOnClick,z:m.z},o,!0)}var v=C;X.exports=v},80461:function(X,z,e){var M=e(3440),F=e(31879),R=e(12968),A=e(94141),T=A.layoutCovers,D=M.extendComponentView({type:"brush",init:function(C,f){this.ecModel=C,this.api=f,this.model,(this._brushController=new R(f.getZr())).on("brush",F.bind(this._onBrush,this)).mount()},render:function(C){return this.model=C,b.apply(this,arguments)},updateTransform:function(C,f){return T(f),b.apply(this,arguments)},updateView:b,dispose:function(){this._brushController.dispose()},_onBrush:function(C,f){var v=this.model.id;this.model.brushTargetManager.setOutputRanges(C,this.ecModel),(!f.isEnd||f.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:v,areas:F.clone(C),$from:v}),f.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:v,areas:F.clone(C),$from:v})}});function b(C,f,v,m){(!m||m.$from!==C.id)&&this._brushController.setPanels(C.brushTargetManager.makePanelOpts(v)).enableBrush(C.brushOption).updateCovers(C.areas.slice())}X.exports=D},36499:function(X,z,e){var M=e(3440);M.registerAction({type:"brush",event:"brush"},function(F,R){R.eachComponent({mainType:"brush",query:F},function(A){A.setAreas(F.areas)})}),M.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),M.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},function(){})},80504:function(X,z,e){var M=e(31879),F=["rect","polygon","keep","clear"];function R(T,D){var b=T&&T.brush;if(M.isArray(b)||(b=b?[b]:[]),!!b.length){var C=[];M.each(b,function(u){var l=u.hasOwnProperty("toolbox")?u.toolbox:[];l instanceof Array&&(C=C.concat(l))});var f=T&&T.toolbox;M.isArray(f)&&(f=f[0]),f||(f={feature:{}},T.toolbox=[f]);var v=f.feature||(f.feature={}),m=v.brush||(v.brush={}),o=m.type||(m.type=[]);o.push.apply(o,C),A(o),D&&!o.length&&o.push.apply(o,F)}}function A(T){var D={};M.each(T,function(b){D[b]=1}),T.length=0,M.each(D,function(b,C){T.push(C)})}X.exports=R},14671:function(X,z,e){var M=e(74898),F=e(95946),R=e(48070),A=R.linePolygonIntersect,T={lineX:D(0),lineY:D(1),rect:{point:function(f,v,m){return f&&m.boundingRect.contain(f[0],f[1])},rect:function(f,v,m){return f&&m.boundingRect.intersect(f)}},polygon:{point:function(f,v,m){return f&&m.boundingRect.contain(f[0],f[1])&&M.contain(m.range,f[0],f[1])},rect:function(f,v,m){var o=m.range;if(!f||o.length<=1)return!1;var u=f.x,l=f.y,r=f.width,s=f.height,c=o[0];if(M.contain(o,u,l)||M.contain(o,u+r,l)||M.contain(o,u,l+s)||M.contain(o,u+r,l+s)||F.create(f).contain(c[0],c[1])||A(u,l,u+r,l,o)||A(u,l,u,l+s,o)||A(u+r,l,u+r,l+s,o)||A(u,l+s,u+r,l+s,o))return!0}}};function D(f){var v=["x","y"],m=["width","height"];return{point:function(o,u,l){if(o){var r=l.range,s=o[f];return b(s,r)}},rect:function(o,u,l){if(o){var r=l.range,s=[o[v[f]],o[v[f]]+o[m[f]]];return s[1]<s[0]&&s.reverse(),b(s[0],r)||b(s[1],r)||b(r[0],s)||b(r[1],s)}}}}function b(f,v){return v[0]<=f&&f<=v[1]}var C=T;X.exports=C},94141:function(X,z,e){var M=e(3440),F=e(31879),R=e(95946),A=e(36193),T=e(14671),D=e(1655),b=e(99516),C=["inBrush","outOfBrush"],f="__ecBrushSelect",v="__ecInBrushSelectEvent",m=M.PRIORITY.VISUAL.BRUSH;M.registerLayout(m,function(n,h,g){n.eachComponent({mainType:"brush"},function(d){g&&g.type==="takeGlobalCursor"&&d.setBrushOption(g.key==="brush"?g.brushOption:{brushType:!1})}),o(n)});function o(n){n.eachComponent({mainType:"brush"},function(h){var g=h.brushTargetManager=new b(h.option,n);g.setInputRanges(h.areas,n)})}M.registerVisual(m,function(n,h,g){var d=[],y,p;n.eachComponent({mainType:"brush"},function(w,S){var O={brushId:w.id,brushIndex:S,brushName:w.name,areas:F.clone(w.areas),selected:[]};d.push(O);var B=w.option,k=B.brushLink,P=[],L=[],E=[],N=0;S||(y=B.throttleType,p=B.throttleDelay);var I=F.map(w.areas,function(V){return x(F.defaults({boundingRect:a[V.brushType](V)},V))}),G=A.createVisualMappings(w.option,C,function(V){V.mappingMethod="fixed"});F.isArray(k)&&F.each(k,function(V){P[V]=1});function W(V){return k==="all"||P[V]}function Z(V){return!!V.length}n.eachSeries(function(V,Y){var $=E[Y]=[];V.subType==="parallel"?U(V,Y,$):H(V,Y,$)});function U(V,Y){var $=V.coordinateSystem;N|=$.hasAxisBrushed(),W(Y)&&$.eachActiveState(V.getData(),function(K,J){K==="active"&&(L[J]=1)})}function H(V,Y,$){var K=s(V);if(!(!K||c(w,Y))&&(F.each(I,function(Q){K[Q.brushType]&&w.brushTargetManager.controlSeries(Q,V,n)&&$.push(Q),N|=Z($)}),W(Y)&&Z($))){var J=V.getData();J.each(function(Q){r(K,$,J,Q)&&(L[Q]=1)})}}n.eachSeries(function(V,Y){var $={seriesId:V.id,seriesIndex:Y,seriesName:V.name,dataIndex:[]};O.selected.push($);var K=s(V),J=E[Y],Q=V.getData(),et=W(Y)?function(nt){return L[nt]?($.dataIndex.push(Q.getRawIndex(nt)),"inBrush"):"outOfBrush"}:function(nt){return r(K,J,Q,nt)?($.dataIndex.push(Q.getRawIndex(nt)),"inBrush"):"outOfBrush"};(W(Y)?N:Z(J))&&A.applyVisual(C,G,Q,et)})}),u(h,y,p,d,g)});function u(n,h,g,d,y){if(y){var p=n.getZr();if(!p[v]){p[f]||(p[f]=l);var w=D.createOrUpdate(p,f,g,h);w(n,d)}}}function l(n,h){if(!n.isDisposed()){var g=n.getZr();g[v]=!0,n.dispatchAction({type:"brushSelect",batch:h}),g[v]=!1}}function r(n,h,g,d){for(var y=0,p=h.length;y<p;y++){var w=h[y];if(n[w.brushType](d,g,w.selectors,w))return!0}}function s(n){var h=n.brushSelector;if(F.isString(h)){var g=[];return F.each(T,function(y,p){g[p]=function(w,S,O,B){var k=S.getItemLayout(w);return y[h](k,O,B)}}),g}else if(F.isFunction(h)){var d={};return F.each(T,function(y,p){d[p]=h}),d}return h}function c(n,h){var g=n.option.seriesIndex;return g!=null&&g!=="all"&&(F.isArray(g)?F.indexOf(g,h)<0:h!==g)}function x(n){var h=n.selectors={};return F.each(T[n.brushType],function(g,d){h[d]=function(y){return g(y,h,n)}}),n}var a={lineX:F.noop,lineY:F.noop,rect:function(n){return i(n.range)},polygon:function(n){for(var h,g=n.range,d=0,y=g.length;d<y;d++){h=h||[[1/0,-1/0],[1/0,-1/0]];var p=g[d];p[0]<h[0][0]&&(h[0][0]=p[0]),p[0]>h[0][1]&&(h[0][1]=p[0]),p[1]<h[1][0]&&(h[1][0]=p[1]),p[1]>h[1][1]&&(h[1][1]=p[1])}return h&&i(h)}};function i(n){return new R(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}z.layoutCovers=o},31075:function(X,z,e){e(65728),e(53336),e(48105)},48105:function(X,z,e){var M=e(3440),F=e(31879),R=e(48070),A=e(17795),T=e(48354),D={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"]},b={EN:["S","M","T","W","T","F","S"],CN:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},C=M.extendComponentView({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(f,v,m){var o=this.group;o.removeAll();var u=f.coordinateSystem,l=u.getRangeInfo(),r=u.getOrient();this._renderDayRect(f,l,o),this._renderLines(f,l,r,o),this._renderYearText(f,l,r,o),this._renderMonthText(f,r,o),this._renderWeekText(f,l,r,o)},_renderDayRect:function(f,v,m){for(var o=f.coordinateSystem,u=f.getModel("itemStyle").getItemStyle(),l=o.getCellWidth(),r=o.getCellHeight(),s=v.start.time;s<=v.end.time;s=o.getNextNDay(s,1).time){var c=o.dataToRect([s],!1).tl,x=new R.Rect({shape:{x:c[0],y:c[1],width:l,height:r},cursor:"default",style:u});m.add(x)}},_renderLines:function(f,v,m,o){var u=this,l=f.coordinateSystem,r=f.getModel("splitLine.lineStyle").getLineStyle(),s=f.get("splitLine.show"),c=r.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var x=v.start,a=0;x.time<=v.end.time;a++){n(x.formatedDate),a===0&&(x=l.getDateInfo(v.start.y+"-"+v.start.m));var i=x.date;i.setMonth(i.getMonth()+1),x=l.getDateInfo(i)}n(l.getNextNDay(v.end.time,1).formatedDate);function n(h){u._firstDayOfMonth.push(l.getDateInfo(h)),u._firstDayPoints.push(l.dataToRect([h],!1).tl);var g=u._getLinePointsOfOneWeek(f,h,m);u._tlpoints.push(g[0]),u._blpoints.push(g[g.length-1]),s&&u._drawSplitline(g,r,o)}s&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,c,m),r,o),s&&this._drawSplitline(u._getEdgesPoints(u._blpoints,c,m),r,o)},_getEdgesPoints:function(f,v,m){var o=[f[0].slice(),f[f.length-1].slice()],u=m==="horizontal"?0:1;return o[0][u]=o[0][u]-v/2,o[1][u]=o[1][u]+v/2,o},_drawSplitline:function(f,v,m){var o=new R.Polyline({z2:20,shape:{points:f},style:v});m.add(o)},_getLinePointsOfOneWeek:function(f,v,m){var o=f.coordinateSystem;v=o.getDateInfo(v);for(var u=[],l=0;l<7;l++){var r=o.getNextNDay(v.time,l),s=o.dataToRect([r.time],!1);u[2*r.day]=s.tl,u[2*r.day+1]=s[m==="horizontal"?"bl":"tr"]}return u},_formatterLabel:function(f,v){return typeof f=="string"&&f?A.formatTplSimple(f,v):typeof f=="function"?f(v):v.nameMap},_yearTextPositionControl:function(f,v,m,o,u){v=v.slice();var l=["center","bottom"];o==="bottom"?(v[1]+=u,l=["center","top"]):o==="left"?v[0]-=u:o==="right"?(v[0]+=u,l=["center","top"]):v[1]-=u;var r=0;return(o==="left"||o==="right")&&(r=Math.PI/2),{rotation:r,position:v,style:{textAlign:l[0],textVerticalAlign:l[1]}}},_renderYearText:function(f,v,m,o){var u=f.getModel("yearLabel");if(u.get("show")){var l=u.get("margin"),r=u.get("position");r||(r=m!=="horizontal"?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(s[0][0]+s[1][0])/2,x=(s[0][1]+s[1][1])/2,a=m==="horizontal"?0:1,i={top:[c,s[a][1]],bottom:[c,s[1-a][1]],left:[s[1-a][0],x],right:[s[a][0],x]},n=v.start.y;+v.end.y>+v.start.y&&(n=n+"-"+v.end.y);var h=u.get("formatter"),g={start:v.start.y,end:v.end.y,nameMap:n},d=this._formatterLabel(h,g),y=new R.Text({z2:30});R.setTextStyle(y.style,u,{text:d}),y.attr(this._yearTextPositionControl(y,i[r],m,r,l)),o.add(y)}},_monthTextPositionControl:function(f,v,m,o,u){var l="left",r="top",s=f[0],c=f[1];return m==="horizontal"?(c=c+u,v&&(l="center"),o==="start"&&(r="bottom")):(s=s+u,v&&(r="middle"),o==="start"&&(l="right")),{x:s,y:c,textAlign:l,textVerticalAlign:r}},_renderMonthText:function(f,v,m){var o=f.getModel("monthLabel");if(o.get("show")){var u=o.get("nameMap"),l=o.get("margin"),r=o.get("position"),s=o.get("align"),c=[this._tlpoints,this._blpoints];F.isString(u)&&(u=D[u.toUpperCase()]||[]);var x=r==="start"?0:1,a=v==="horizontal"?0:1;l=r==="start"?-l:l;for(var i=s==="center",n=0;n<c[x].length-1;n++){var h=c[x][n].slice(),g=this._firstDayOfMonth[n];if(i){var d=this._firstDayPoints[n];h[a]=(d[a]+c[0][n+1][a])/2}var y=o.get("formatter"),p=u[+g.m-1],w={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:p},S=this._formatterLabel(y,w),O=new R.Text({z2:30});F.extend(R.setTextStyle(O.style,o,{text:S}),this._monthTextPositionControl(h,i,v,r,l)),m.add(O)}}},_weekTextPositionControl:function(f,v,m,o,u){var l="center",r="middle",s=f[0],c=f[1],x=m==="start";return v==="horizontal"?(s=s+o+(x?1:-1)*u[0]/2,l=x?"right":"left"):(c=c+o+(x?1:-1)*u[1]/2,r=x?"bottom":"top"),{x:s,y:c,textAlign:l,textVerticalAlign:r}},_renderWeekText:function(f,v,m,o){var u=f.getModel("dayLabel");if(u.get("show")){var l=f.coordinateSystem,r=u.get("position"),s=u.get("nameMap"),c=u.get("margin"),x=l.getFirstDayOfWeek();F.isString(s)&&(s=b[s.toUpperCase()]||[]);var a=l.getNextNDay(v.end.time,7-v.lweek).time,i=[l.getCellWidth(),l.getCellHeight()];c=T.parsePercent(c,i[m==="horizontal"?0:1]),r==="start"&&(a=l.getNextNDay(v.start.time,-(7+v.fweek)).time,c=-c);for(var n=0;n<7;n++){var h=l.getNextNDay(a,n),g=l.dataToRect([h.time],!1).center,d=n;d=Math.abs((n+x)%7);var y=new R.Text({z2:30});F.extend(R.setTextStyle(y.style,u,{text:s[d]}),this._weekTextPositionControl(g,m,r,c,i)),o.add(y)}}}});X.exports=C},82846:function(X,z,e){e(45520),e(58367)},58367:function(X,z,e){e(3949),e(7051),e(84449),e(57381),e(92646),e(37963),e(9117)},41632:function(X,z,e){e(3949),e(7051),e(84449),e(14103),e(79491),e(37963),e(9117)},45520:function(X,z,e){e(3949),e(7051),e(84449),e(62638),e(49825),e(37963),e(9117)},50127:function(X,z,e){var M=e(31879),F=e(48354),R=e(97171),A=e(38289),T=M.each,D=F.asc,b=function(u,l,r,s){this._dimName=u,this._axisIndex=l,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=s,this._dataZoomModel=r};b.prototype={constructor:b,hostedBy:function(u){return this._dataZoomModel===u},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var u=[],l=this.ecModel;return l.eachSeries(function(r){if(R.isCoordSupported(r.get("coordinateSystem"))){var s=this._dimName,c=l.queryComponents({mainType:s+"Axis",index:r.get(s+"AxisIndex"),id:r.get(s+"AxisId")})[0];this._axisIndex===(c&&c.componentIndex)&&u.push(r)}},this),u},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var u=this._dimName,l=this.ecModel,r=this.getAxisModel(),s=u==="x"||u==="y",c,x;s?(x="gridIndex",c=u==="x"?"y":"x"):(x="polarIndex",c=u==="angle"?"radius":"angle");var a;return l.eachComponent(c+"Axis",function(i){(i.get(x)||0)===(r.get(x)||0)&&(a=i)}),a},getMinMaxSpan:function(){return M.clone(this._minMaxSpan)},calculateDataWindow:function(u){var l=this._dataExtent,r=this.getAxisModel(),s=r.axis.scale,c=this._dataZoomModel.getRangePropMode(),x=[0,100],a=[],i=[],n;T(["start","end"],function(d,y){var p=u[d],w=u[d+"Value"];c[y]==="percent"?(p==null&&(p=x[y]),w=s.parse(F.linearMap(p,x,l))):(n=!0,w=w==null?l[y]:s.parse(w),p=F.linearMap(w,l,x)),i[y]=w,a[y]=p}),D(i),D(a);var h=this._minMaxSpan;n?g(i,a,l,x,!1):g(a,i,x,l,!0);function g(d,y,p,w,S){var O=S?"Span":"ValueSpan";A(0,d,p,"all",h["min"+O],h["max"+O]);for(var B=0;B<2;B++)y[B]=F.linearMap(d[B],p,w,!0),S&&(y[B]=s.parse(y[B]))}return{valueWindow:i,percentWindow:a}},reset:function(u){if(u===this._dataZoomModel){var l=this.getTargetSeriesModels();this._dataExtent=C(this,this._dimName,l),m(this);var r=this.calculateDataWindow(u.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,v(this)}},restore:function(u){u===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,v(this,!0))},filterData:function(u,l){if(u!==this._dataZoomModel)return;var r=this._dimName,s=this.getTargetSeriesModels(),c=u.get("filterMode"),x=this._valueWindow;if(c==="none")return;T(s,function(i){var n=i.getData(),h=n.mapDimension(r,!0);h.length&&(c==="weakFilter"?n.filterSelf(function(g){for(var d,y,p,w=0;w<h.length;w++){var S=n.get(h[w],g),O=!isNaN(S),B=S<x[0],k=S>x[1];if(O&&!B&&!k)return!0;O&&(p=!0),B&&(d=!0),k&&(y=!0)}return p&&d&&y}):T(h,function(g){if(c==="empty")i.setData(n=n.map(g,function(y){return a(y)?y:NaN}));else{var d={};d[g]=x,n.selectRange(d)}}),T(h,function(g){n.setApproximateExtent(x,g)}))});function a(i){return i>=x[0]&&i<=x[1]}}};function C(u,l,r){var s=[1/0,-1/0];return T(r,function(c){var x=c.getData();x&&T(x.mapDimension(l,!0),function(a){var i=x.getApproximateExtent(a);i[0]<s[0]&&(s[0]=i[0]),i[1]>s[1]&&(s[1]=i[1])})}),s[1]<s[0]&&(s=[NaN,NaN]),f(u,s),s}function f(u,l){var r=u.getAxisModel(),s=r.getMin(!0),c=r.get("type")==="category",x=c&&r.getCategories().length;s!=null&&s!=="dataMin"&&typeof s!="function"?l[0]=s:c&&(l[0]=x>0?0:NaN);var a=r.getMax(!0);return a!=null&&a!=="dataMax"&&typeof a!="function"?l[1]=a:c&&(l[1]=x>0?x-1:NaN),r.get("scale",!0)||(l[0]>0&&(l[0]=0),l[1]<0&&(l[1]=0)),l}function v(u,l){var r=u.getAxisModel(),s=u._percentWindow,c=u._valueWindow;if(s){var x=F.getPixelPrecision(c,[0,500]);x=Math.min(x,20);var a=l||s[0]===0&&s[1]===100;r.setRange(a?null:+c[0].toFixed(x),a?null:+c[1].toFixed(x))}}function m(u){var l=u._minMaxSpan={},r=u._dataZoomModel,s=u._dataExtent;T(["min","max"],function(c){var x=r.get(c+"Span"),a=r.get(c+"ValueSpan");a!=null&&(a=u.getAxisModel().axis.scale.parse(a)),a!=null?x=F.linearMap(s[0]+a,s,[0,100],!0):x!=null&&(a=F.linearMap(x,[0,100],s,!0)-s[0]),l[c+"Span"]=x,l[c+"ValueSpan"]=a})}var o=b;X.exports=o},7051:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(31879),T=e(58020),D=e(35454),b=e(97171),C=e(50127),f=A.each,v=b.eachAxisDim,m=R.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(r,s,c){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var x=o(r);this.settledOption=x,this.mergeDefaultAndTheme(r,c),this.doInit(x)},mergeOption:function(r){var s=o(r);A.merge(this.option,r,!0),A.merge(this.settledOption,s,!0),this.doInit(s)},doInit:function(r){var s=this.option;T.canvasSupported||(s.realtime=!1),this._setDefaultThrottle(r),u(this,r);var c=this.settledOption;f([["start","startValue"],["end","endValue"]],function(x,a){this._rangePropMode[a]==="value"&&(s[x[0]]=c[x[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var r=this._axisProxies;this.eachTargetAxis(function(s,c,x,a){var i=this.dependentModels[s.axis][c],n=i.__dzAxisProxy||(i.__dzAxisProxy=new C(s.name,c,this,a));r[s.name+"_"+c]=n},this)},_resetTarget:function(){var r=this.option,s=this._judgeAutoMode();v(function(c){var x=c.axisIndex;r[x]=D.normalizeToArray(r[x])},this),s==="axisIndex"?this._autoSetAxisIndex():s==="orient"&&this._autoSetOrient()},_judgeAutoMode:function(){var r=this.option,s=!1;v(function(x){r[x.axisIndex]!=null&&(s=!0)},this);var c=r.orient;if(c==null&&s)return"orient";if(!s)return c==null&&(r.orient="horizontal"),"axisIndex"},_autoSetAxisIndex:function(){var r=!0,s=this.get("orient",!0),c=this.option,x=this.dependentModels;if(r){var a=s==="vertical"?"y":"x";x[a+"Axis"].length?(c[a+"AxisIndex"]=[0],r=!1):f(x.singleAxis,function(i){r&&i.get("orient",!0)===s&&(c.singleAxisIndex=[i.componentIndex],r=!1)})}r&&v(function(i){if(r){var n=[],h=this.dependentModels[i.axis];if(h.length&&!n.length)for(var g=0,d=h.length;g<d;g++)h[g].get("type")==="category"&&n.push(g);c[i.axisIndex]=n,n.length&&(r=!1)}},this),r&&this.ecModel.eachSeries(function(i){this._isSeriesHasAllAxesTypeOf(i,"value")&&v(function(n){var h=c[n.axisIndex],g=i.get(n.axisIndex),d=i.get(n.axisId),y=i.ecModel.queryComponents({mainType:n.axis,index:g,id:d})[0];g=y.componentIndex,A.indexOf(h,g)<0&&h.push(g)})},this)},_autoSetOrient:function(){var r;this.eachTargetAxis(function(s){!r&&(r=s.name)},this),this.option.orient=r==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(r,s){var c=!0;return v(function(x){var a=r.get(x.axisIndex),i=this.dependentModels[x.axis][a];(!i||i.get("type")!==s)&&(c=!1)},this),c},_setDefaultThrottle:function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var s=this.ecModel.option;this.option.throttle=s.animation&&s.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var r;return v(function(s){if(r==null){var c=this.get(s.axisIndex);c.length&&(r=this.dependentModels[s.axis][c[0]])}},this),r},eachTargetAxis:function(r,s){var c=this.ecModel;v(function(x){f(this.get(x.axisIndex),function(a){r.call(s,x,a,this,c)},this)},this)},getAxisProxy:function(r,s){return this._axisProxies[r+"_"+s]},getAxisModel:function(r,s){var c=this.getAxisProxy(r,s);return c&&c.getAxisModel()},setRawRange:function(r){var s=this.option,c=this.settledOption;f([["start","startValue"],["end","endValue"]],function(x){(r[x[0]]!=null||r[x[1]]!=null)&&(s[x[0]]=c[x[0]]=r[x[0]],s[x[1]]=c[x[1]]=r[x[1]])},this),u(this,r)},setCalculatedRange:function(r){var s=this.option;f(["start","startValue","end","endValue"],function(c){s[c]=r[c]})},getPercentRange:function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},getValueRange:function(r,s){if(r==null&&s==null){var c=this.findRepresentativeAxisProxy();if(c)return c.getDataValueWindow()}else return this.getAxisProxy(r,s).getDataValueWindow()},findRepresentativeAxisProxy:function(r){if(r)return r.__dzAxisProxy;var s=this._axisProxies;for(var c in s)if(s.hasOwnProperty(c)&&s[c].hostedBy(this))return s[c];for(var c in s)if(s.hasOwnProperty(c)&&!s[c].hostedBy(this))return s[c]},getRangePropMode:function(){return this._rangePropMode.slice()}});function o(r){var s={};return f(["start","end","startValue","endValue","throttle"],function(c){r.hasOwnProperty(c)&&(s[c]=r[c])}),s}function u(r,s){var c=r._rangePropMode,x=r.get("rangeMode");f([["start","startValue"],["end","endValue"]],function(a,i){var n=s[a[0]]!=null,h=s[a[1]]!=null;n&&!h?c[i]="percent":!n&&h?c[i]="value":x?c[i]=x[i]:n&&(c[i]="percent")})}var l=m;X.exports=l},84449:function(X,z,e){var M=e(53646),F=M.extend({type:"dataZoom",render:function(R,A,T,D){this.dataZoomModel=R,this.ecModel=A,this.api=T},getTargetCoordInfo:function(){var R=this.dataZoomModel,A=this.ecModel,T={};R.eachTargetAxis(function(b,C){var f=A.getComponent(b.axis,C);if(f){var v=f.getCoordSysModel();v&&D(v,f,T[v.mainType]||(T[v.mainType]=[]),v.componentIndex)}},this);function D(b,C,f,v){for(var m,o=0;o<f.length;o++)if(f[o].model===b){m=f[o];break}m||f.push(m={model:b,axisModels:[],coordIndex:v}),m.axisModels.push(C)}return T}});X.exports=F},57381:function(X,z,e){var M=e(7051),F=M.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});X.exports=F},92646:function(X,z,e){var M=e(31879),F=e(84449),R=e(38289),A=e(11727),T=M.bind,D=F.extend({type:"dataZoom.inside",init:function(m,o){this._range},render:function(m,o,u,l){D.superApply(this,"render",arguments),this._range=m.getPercentRange(),M.each(this.getTargetCoordInfo(),function(r,s){var c=M.map(r,function(x){return A.generateCoordId(x.model)});M.each(r,function(x){var a=x.model,i={};M.each(["pan","zoom","scrollMove"],function(n){i[n]=T(b[n],this,x,s)},this),A.register(u,{coordId:A.generateCoordId(a),allCoordIds:c,containsPoint:function(n,h,g){return a.coordinateSystem.containPoint([h,g])},dataZoomId:m.id,dataZoomModel:m,getRange:i})},this)},this)},dispose:function(){A.unregister(this.api,this.dataZoomModel.id),D.superApply(this,"dispose",arguments),this._range=null}}),b={zoom:function(m,o,u,l){var r=this._range,s=r.slice(),c=m.axisModels[0];if(c){var x=f[o](null,[l.originX,l.originY],c,u,m),a=(x.signal>0?x.pixelStart+x.pixelLength-x.pixel:x.pixel-x.pixelStart)/x.pixelLength*(s[1]-s[0])+s[0],i=Math.max(1/l.scale,0);s[0]=(s[0]-a)*i+a,s[1]=(s[1]-a)*i+a;var n=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(R(0,s,[0,100],0,n.minSpan,n.maxSpan),this._range=s,r[0]!==s[0]||r[1]!==s[1])return s}},pan:C(function(m,o,u,l,r,s){var c=f[l]([s.oldX,s.oldY],[s.newX,s.newY],o,r,u);return c.signal*(m[1]-m[0])*c.pixel/c.pixelLength}),scrollMove:C(function(m,o,u,l,r,s){var c=f[l]([0,0],[s.scrollDelta,s.scrollDelta],o,r,u);return c.signal*(m[1]-m[0])*s.scrollDelta})};function C(m){return function(o,u,l,r){var s=this._range,c=s.slice(),x=o.axisModels[0];if(x){var a=m(c,x,o,u,l,r);if(R(a,c,[0,100],"all"),this._range=c,s[0]!==c[0]||s[1]!==c[1])return c}}}var f={grid:function(m,o,u,l,r){var s=u.axis,c={},x=r.model.coordinateSystem.getRect();return m=m||[0,0],s.dim==="x"?(c.pixel=o[0]-m[0],c.pixelLength=x.width,c.pixelStart=x.x,c.signal=s.inverse?1:-1):(c.pixel=o[1]-m[1],c.pixelLength=x.height,c.pixelStart=x.y,c.signal=s.inverse?-1:1),c},polar:function(m,o,u,l,r){var s=u.axis,c={},x=r.model.coordinateSystem,a=x.getRadiusAxis().getExtent(),i=x.getAngleAxis().getExtent();return m=m?x.pointToCoord(m):[0,0],o=x.pointToCoord(o),u.mainType==="radiusAxis"?(c.pixel=o[0]-m[0],c.pixelLength=a[1]-a[0],c.pixelStart=a[0],c.signal=s.inverse?1:-1):(c.pixel=o[1]-m[1],c.pixelLength=i[1]-i[0],c.pixelStart=i[0],c.signal=s.inverse?-1:1),c},singleAxis:function(m,o,u,l,r){var s=u.axis,c=r.model.coordinateSystem.getRect(),x={};return m=m||[0,0],s.orient==="horizontal"?(x.pixel=o[0]-m[0],x.pixelLength=c.width,x.pixelStart=c.x,x.signal=s.inverse?1:-1):(x.pixel=o[1]-m[1],x.pixelLength=c.height,x.pixelStart=c.y,x.signal=s.inverse?-1:1),x}},v=D;X.exports=v},14103:function(X,z,e){var M=e(7051),F=M.extend({type:"dataZoom.select"});X.exports=F},79491:function(X,z,e){var M=e(84449),F=M.extend({type:"dataZoom.select"});X.exports=F},62638:function(X,z,e){var M=e(7051),F=M.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),R=F;X.exports=R},49825:function(X,z,e){var M=e(31879),F=e(19756),R=e(48070),A=e(1655),T=e(84449),D=e(48354),b=e(30871),C=e(38289),f=R.Rect,v=D.linearMap,m=D.asc,o=M.bind,u=M.each,l=7,r=1,s=30,c="horizontal",x="vertical",a=5,i=["line","bar","candlestick","scatter"],n=T.extend({type:"dataZoom.slider",init:function(y,p){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=p},render:function(y,p,w,S){if(n.superApply(this,"render",arguments),A.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=y.get("orient"),this.dataZoomModel.get("show")===!1){this.group.removeAll();return}(!S||S.type!=="dataZoom"||S.from!==this.uid)&&this._buildView(),this._updateView()},remove:function(){n.superApply(this,"remove",arguments),A.clear(this,"_dispatchZoomAction")},dispose:function(){n.superApply(this,"dispose",arguments),A.clear(this,"_dispatchZoomAction")},_buildView:function(){var y=this.group;y.removeAll(),this._resetLocation(),this._resetInterval();var p=this._displayables.barGroup=new R.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),y.add(p),this._positionGroup()},_resetLocation:function(){var y=this.dataZoomModel,p=this.api,w=this._findCoordRect(),S={width:p.getWidth(),height:p.getHeight()},O=this._orient===c?{right:S.width-w.x-w.width,top:S.height-s-l,width:w.width,height:s}:{right:l,top:w.y,width:s,height:w.height},B=b.getLayoutParams(y.option);M.each(["right","top","width","height"],function(P){B[P]==="ph"&&(B[P]=O[P])});var k=b.getLayoutRect(B,S,y.padding);this._location={x:k.x,y:k.y},this._size=[k.width,k.height],this._orient===x&&this._size.reverse()},_positionGroup:function(){var y=this.group,p=this._location,w=this._orient,S=this.dataZoomModel.getFirstTargetAxisModel(),O=S&&S.get("inverse"),B=this._displayables.barGroup,k=(this._dataShadowInfo||{}).otherAxisInverse;B.attr(w===c&&!O?{scale:k?[1,1]:[1,-1]}:w===c&&O?{scale:k?[-1,1]:[-1,-1]}:w===x&&!O?{scale:k?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:k?[-1,-1]:[-1,1],rotation:Math.PI/2});var P=y.getBoundingRect([B]);y.attr("position",[p.x-P.x,p.y-P.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var y=this.dataZoomModel,p=this._size,w=this._displayables.barGroup;w.add(new f({silent:!0,shape:{x:0,y:0,width:p[0],height:p[1]},style:{fill:y.get("backgroundColor")},z2:-40})),w.add(new f({shape:{x:0,y:0,width:p[0],height:p[1]},style:{fill:"transparent"},z2:0,onclick:M.bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var y=this._dataShadowInfo=this._prepareDataShadowInfo();if(y){var p=this._size,w=y.series,S=w.getRawData(),O=w.getShadowDim?w.getShadowDim():y.otherDim;if(O!=null){var B=S.getDataExtent(O),k=(B[1]-B[0])*.3;B=[B[0]-k,B[1]+k];var P=[0,p[1]],L=[0,p[0]],E=[[p[0],0],[0,0]],N=[],I=L[1]/(S.count()-1),G=0,W=Math.round(S.count()/p[0]),Z;S.each([O],function(H,V){if(W>0&&V%W){G+=I;return}var Y=H==null||isNaN(H)||H==="",$=Y?0:v(H,B,P,!0);Y&&!Z&&V?(E.push([E[E.length-1][0],0]),N.push([N[N.length-1][0],0])):!Y&&Z&&(E.push([G,0]),N.push([G,0])),E.push([G,$]),N.push([G,$]),G+=I,Z=Y});var U=this.dataZoomModel;this._displayables.barGroup.add(new R.Polygon({shape:{points:E},style:M.defaults({fill:U.get("dataBackgroundColor")},U.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new R.Polyline({shape:{points:N},style:U.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var y=this.dataZoomModel,p=y.get("showDataShadow");if(p!==!1){var w,S=this.ecModel;return y.eachTargetAxis(function(O,B){var k=y.getAxisProxy(O.name,B).getTargetSeriesModels();M.each(k,function(P){if(!w&&!(p!==!0&&M.indexOf(i,P.get("type"))<0)){var L=S.getComponent(O.axis,B).axis,E=h(O.name),N,I=P.coordinateSystem;E!=null&&I.getOtherAxis&&(N=I.getOtherAxis(L).inverse),E=P.getData().mapDimension(E),w={thisAxis:L,series:P,thisDim:O.name,otherDim:E,otherAxisInverse:N}}},this)},this),w}},_renderHandle:function(){var y=this._displayables,p=y.handles=[],w=y.handleLabels=[],S=this._displayables.barGroup,O=this._size,B=this.dataZoomModel;S.add(y.filler=new f({draggable:!0,cursor:g(this._orient),drift:o(this._onDragMove,this,"all"),ondragstart:o(this._showDataInfo,this,!0),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1),style:{fill:B.get("fillerColor"),textPosition:"inside"}})),S.add(new f({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:O[0],height:O[1]},style:{stroke:B.get("dataBackgroundColor")||B.get("borderColor"),lineWidth:r,fill:"rgba(0,0,0,0)"}})),u([0,1],function(k){var P=R.createIcon(B.get("handleIcon"),{cursor:g(this._orient),draggable:!0,drift:o(this._onDragMove,this,k),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),L=P.getBoundingRect();this._handleHeight=D.parsePercent(B.get("handleSize"),this._size[1]),this._handleWidth=L.width/L.height*this._handleHeight,P.setStyle(B.getModel("handleStyle").getItemStyle());var E=B.get("handleColor");E!=null&&(P.style.fill=E),S.add(p[k]=P);var N=B.textStyleModel;this.group.add(w[k]=new R.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:N.getTextColor(),textFont:N.getFont()},z2:10}))},this)},_resetInterval:function(){var y=this._range=this.dataZoomModel.getPercentRange(),p=this._getViewExtent();this._handleEnds=[v(y[0],[0,100],p,!0),v(y[1],[0,100],p,!0)]},_updateInterval:function(y,p){var w=this.dataZoomModel,S=this._handleEnds,O=this._getViewExtent(),B=w.findRepresentativeAxisProxy().getMinMaxSpan(),k=[0,100];C(p,S,O,w.get("zoomLock")?"all":y,B.minSpan!=null?v(B.minSpan,k,O,!0):null,B.maxSpan!=null?v(B.maxSpan,k,O,!0):null);var P=this._range,L=this._range=m([v(S[0],O,k,!0),v(S[1],O,k,!0)]);return!P||P[0]!==L[0]||P[1]!==L[1]},_updateView:function(y){var p=this._displayables,w=this._handleEnds,S=m(w.slice()),O=this._size;u([0,1],function(B){var k=p.handles[B],P=this._handleHeight;k.attr({scale:[P/2,P/2],position:[w[B],O[1]/2-P/2]})},this),p.filler.setShape({x:S[0],y:0,width:S[1]-S[0],height:O[1]}),this._updateDataInfo(y)},_updateDataInfo:function(y){var p=this.dataZoomModel,w=this._displayables,S=w.handleLabels,O=this._orient,B=["",""];if(p.get("showDetail")){var k=p.findRepresentativeAxisProxy();if(k){var P=k.getAxisModel().axis,L=this._range,E=y?k.calculateDataWindow({start:L[0],end:L[1]}).valueWindow:k.getDataValueWindow();B=[this._formatLabel(E[0],P),this._formatLabel(E[1],P)]}}var N=m(this._handleEnds.slice());I.call(this,0),I.call(this,1);function I(G){var W=R.getTransform(w.handles[G].parent,this.group),Z=R.transformDirection(G===0?"right":"left",W),U=this._handleWidth/2+a,H=R.applyTransform([N[G]+(G===0?-U:U),this._size[1]/2],W);S[G].setStyle({x:H[0],y:H[1],textVerticalAlign:O===c?"middle":Z,textAlign:O===c?Z:"center",text:B[G]})}},_formatLabel:function(y,p){var w=this.dataZoomModel,S=w.get("labelFormatter"),O=w.get("labelPrecision");(O==null||O==="auto")&&(O=p.getPixelPrecision());var B=y==null||isNaN(y)?"":p.type==="category"||p.type==="time"?p.scale.getLabel(Math.round(y)):y.toFixed(Math.min(O,20));return M.isFunction(S)?S(y,B):M.isString(S)?S.replace("{value}",B):B},_showDataInfo:function(y){y=this._dragging||y;var p=this._displayables.handleLabels;p[0].attr("invisible",!y),p[1].attr("invisible",!y)},_onDragMove:function(y,p,w,S){this._dragging=!0,F.stop(S.event);var O=this._displayables.barGroup.getLocalTransform(),B=R.applyTransform([p,w],O,!0),k=this._updateInterval(y,B[0]),P=this.dataZoomModel.get("realtime");this._updateView(!P),k&&P&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1);var y=this.dataZoomModel.get("realtime");!y&&this._dispatchZoomAction()},_onClickPanelClick:function(y){var p=this._size,w=this._displayables.barGroup.transformCoordToLocal(y.offsetX,y.offsetY);if(!(w[0]<0||w[0]>p[0]||w[1]<0||w[1]>p[1])){var S=this._handleEnds,O=(S[0]+S[1])/2,B=this._updateInterval("all",w[0]-O);this._updateView(),B&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var y=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:y[0],end:y[1]})},_findCoordRect:function(){var y;if(u(this.getTargetCoordInfo(),function(S){if(!y&&S.length){var O=S[0].model.coordinateSystem;y=O.getRect&&O.getRect()}}),!y){var p=this.api.getWidth(),w=this.api.getHeight();y={x:p*.2,y:w*.2,width:p*.6,height:w*.6}}return y}});function h(y){var p={x:"y",y:"x",radius:"angle",angle:"radius"};return p[y]}function g(y){return y==="vertical"?"ns-resize":"ew-resize"}var d=n;X.exports=d},9117:function(X,z,e){var M=e(3440),F=e(31879),R=e(97171);M.registerAction("dataZoom",function(A,T){var D=R.createLinkedNodesFinder(F.bind(T.eachComponent,T,"dataZoom"),R.eachAxisDim,function(C,f){return C.get(f.axisIndex)}),b=[];T.eachComponent({mainType:"dataZoom",query:A},function(C,f){b.push.apply(b,D(C).nodes)}),F.each(b,function(C,f){C.setRawRange({start:A.start,end:A.end,startValue:A.startValue,endValue:A.endValue})})})},37963:function(X,z,e){var M=e(3440),F=e(31879),R=F.createHashMap,A=F.each;M.registerProcessor({getTargetSeries:function(T){var D=R();return T.eachComponent("dataZoom",function(b){b.eachTargetAxis(function(C,f,v){var m=v.getAxisProxy(C.name,f);A(m.getTargetSeriesModels(),function(o){D.set(o.uid,o)})})}),D},modifyOutputEnd:!0,overallReset:function(T,D){T.eachComponent("dataZoom",function(b){b.eachTargetAxis(function(C,f,v){v.getAxisProxy(C.name,f).reset(v,D)}),b.eachTargetAxis(function(C,f,v){v.getAxisProxy(C.name,f).filterData(v,D)})}),T.eachComponent("dataZoom",function(b){var C=b.findRepresentativeAxisProxy(),f=C.getDataPercentWindow(),v=C.getDataValueWindow();b.setCalculatedRange({start:f[0],end:f[1],startValue:v[0],endValue:v[1]})})}})},97171:function(X,z,e){var M=e(31879),F=e(17795),R=["x","y","z","radius","angle","single"],A=["cartesian2d","polar","singleAxis"];function T(f){return M.indexOf(A,f)>=0}function D(f,v){f=f.slice();var m=M.map(f,F.capitalFirst);v=(v||[]).slice();var o=M.map(v,F.capitalFirst);return function(u,l){M.each(f,function(r,s){for(var c={name:r,capital:m[s]},x=0;x<v.length;x++)c[v[x]]=r+o[x];u.call(l,c)})}}var b=D(R,["axisIndex","axis","index","id"]);function C(f,v,m){return function(r){var s={nodes:[],records:{}};if(v(function(a){s.records[a.name]={}}),!r)return s;l(r,s);var c;do c=!1,f(x);while(c);function x(a){!o(a,s)&&u(a,s)&&(l(a,s),c=!0)}return s};function o(r,s){return M.indexOf(s.nodes,r)>=0}function u(r,s){var c=!1;return v(function(x){M.each(m(r,x)||[],function(a){s.records[x.name][a]&&(c=!0)})}),c}function l(r,s){s.nodes.push(r),v(function(c){M.each(m(r,c)||[],function(x){s.records[c.name][x]=!0})})}}z.isCoordSupported=T,z.createNameEach=D,z.eachAxisDim=b,z.createLinkedNodesFinder=C},83406:function(X,z,e){var M=e(31879),F=M.each,R="\0_ec_hist_store";function A(f,v){var m=C(f);F(v,function(o,u){for(var l=m.length-1;l>=0;l--){var r=m[l];if(r[u])break}if(l<0){var s=f.queryComponents({mainType:"dataZoom",subType:"select",id:u})[0];if(s){var c=s.getPercentRange();m[0][u]={dataZoomId:u,start:c[0],end:c[1]}}}}),m.push(v)}function T(f){var v=C(f),m=v[v.length-1];v.length>1&&v.pop();var o={};return F(m,function(u,l){for(var r=v.length-1;r>=0;r--){var u=v[r][l];if(u){o[l]=u;break}}}),o}function D(f){f[R]=null}function b(f){return C(f).length}function C(f){var v=f[R];return v||(v=f[R]=[{}]),v}z.push=A,z.pop=T,z.clear=D,z.count=b},11727:function(X,z,e){var M=e(31879),F=e(73672),R=e(1655),A="\0_ec_dataZoom_roams";function T(u,l){var r=C(u),s=l.dataZoomId,c=l.coordId;M.each(r,function(i,n){var h=i.dataZoomInfos;h[s]&&M.indexOf(l.allCoordIds,c)<0&&(delete h[s],i.count--)}),v(r);var x=r[c];x||(x=r[c]={coordId:c,dataZoomInfos:{},count:0},x.controller=f(u,x),x.dispatchAction=M.curry(m,u)),!x.dataZoomInfos[s]&&x.count++,x.dataZoomInfos[s]=l;var a=o(x.dataZoomInfos);x.controller.enable(a.controlType,a.opt),x.controller.setPointerChecker(l.containsPoint),R.createOrUpdate(x,"dispatchAction",l.dataZoomModel.get("throttle",!0),"fixRate")}function D(u,l){var r=C(u);M.each(r,function(s){s.controller.dispose();var c=s.dataZoomInfos;c[l]&&(delete c[l],s.count--)}),v(r)}function b(u){return u.type+"\0_"+u.id}function C(u){var l=u.getZr();return l[A]||(l[A]={})}function f(u,l){var r=new F(u.getZr());return M.each(["pan","zoom","scrollMove"],function(s){r.on(s,function(c){var x=[];M.each(l.dataZoomInfos,function(a){if(c.isAvailableBehavior(a.dataZoomModel.option)){var i=(a.getRange||{})[s],n=i&&i(l.controller,c);!a.dataZoomModel.get("disabled",!0)&&n&&x.push({dataZoomId:a.dataZoomId,start:n[0],end:n[1]})}}),x.length&&l.dispatchAction(x)})}),r}function v(u){M.each(u,function(l,r){l.count||(l.controller.dispose(),delete u[r])})}function m(u,l){u.dispatchAction({type:"dataZoom",batch:l})}function o(u){var l,r="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},c=!0;return M.each(u,function(x){var a=x.dataZoomModel,i=a.get("disabled",!0)?!1:a.get("zoomLock",!0)?"move":!0;s[r+i]>s[r+l]&&(l=i),c&=a.get("preventDefaultMouseMove",!0)}),{controlType:l,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!c}}}z.register=T,z.unregister=D,z.generateCoordId=b},3949:function(X,z,e){var M=e(60684);M.registerSubTypeDefaulter("dataZoom",function(){return"slider"})},18841:function(X,z,e){var M=e(60684),F=e(53646),R=e(43036),A=R.detectSourceFormat,T=e(17233),D=T.SERIES_LAYOUT_BY_COLUMN;M.extend({type:"dataset",defaultOption:{seriesLayoutBy:D,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){A(this)}}),F.extend({type:"dataset"})},10238:function(X,z,e){var M=e(3440),F=e(31879);e(58526),e(27547),e(97028),e(33894);function R(A,T){T.update="updateView",M.registerAction(T,function(D,b){var C={};return b.eachComponent({mainType:"geo",query:D},function(f){f[A](D.name);var v=f.coordinateSystem;F.each(v.regions,function(m){C[m.name]=f.isSelected(m.name)||!1})}),{selected:C,name:D.name}})}R("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),R("select",{type:"geoSelect",event:"geoselected"}),R("unSelect",{type:"geoUnSelect",event:"geounselected"})},97028:function(X,z,e){var M=e(7245),F=e(3440),R=F.extendComponentView({type:"geo",init:function(A,T){var D=new M(T,!0);this._mapDraw=D,this.group.add(D.group)},render:function(A,T,D,b){if(!(b&&b.type==="geoToggleSelect"&&b.from===this.uid)){var C=this._mapDraw;A.get("show")?C.draw(A,T,D,this,b):this._mapDraw.group.removeAll(),this.group.silent=A.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});X.exports=R},62550:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(31879),T=e(35454),D=e(48070),b=e(30871),C=e(48354),f=C.parsePercent,v={path:null,compoundPath:null,group:D.Group,image:D.Image,text:D.Text};R.registerPreprocessor(function(i){var n=i.graphic;A.isArray(n)?!n[0]||!n[0].elements?i.graphic=[{elements:n}]:i.graphic=[i.graphic[0]]:n&&!n.elements&&(i.graphic=[{elements:[n]}])});var m=R.extendComponentModel({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(i){var n=this.option.elements;this.option.elements=null,m.superApply(this,"mergeOption",arguments),this.option.elements=n},optionUpdated:function(i,n){var h=this.option,g=(n?h:i).elements,d=h.elements=n?[]:h.elements,y=[];this._flatten(g,y);var p=T.mappingToExists(d,y);T.makeIdAndName(p);var w=this._elOptionsToUpdate=[];A.each(p,function(O,B){var k=O.option;k&&(w.push(k),s(O,k),c(d,B,k),x(d[B],k))},this);for(var S=d.length-1;S>=0;S--)d[S]==null?d.splice(S,1):delete d[S].$action},_flatten:function(i,n,h){A.each(i,function(g){if(g){h&&(g.parentOption=h),n.push(g);var d=g.children;g.type==="group"&&d&&this._flatten(d,n,g),delete g.children}},this)},useElOptionsToUpdate:function(){var i=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,i}});R.extendComponentView({type:"graphic",init:function(i,n){this._elMap=A.createHashMap(),this._lastGraphicModel},render:function(i,n,h){i!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=i,this._updateElements(i),this._relocate(i,h)},_updateElements:function(i){var n=i.useElOptionsToUpdate();if(n){var h=this._elMap,g=this.group;A.each(n,function(d){var y=d.$action,p=d.id,w=h.get(p),S=d.parentId,O=S!=null?h.get(S):g,B=d.style;d.type==="text"&&B&&(d.hv&&d.hv[1]&&(B.textVerticalAlign=B.textBaseline=null),!B.hasOwnProperty("textFill")&&B.fill&&(B.textFill=B.fill),!B.hasOwnProperty("textStroke")&&B.stroke&&(B.textStroke=B.stroke));var k=l(d);!y||y==="merge"?w?w.attr(k):o(p,O,k,h):y==="replace"?(u(w,h),o(p,O,k,h)):y==="remove"&&u(w,h);var P=h.get(p);P&&(P.__ecGraphicWidthOption=d.width,P.__ecGraphicHeightOption=d.height,a(P,i,d))})}},_relocate:function(i,n){for(var h=i.option.elements,g=this.group,d=this._elMap,y=n.getWidth(),p=n.getHeight(),w=0;w<h.length;w++){var S=h[w],O=d.get(S.id);if(!(!O||!O.isGroup)){var B=O.parent,k=B===g;O.__ecGraphicWidth=f(O.__ecGraphicWidthOption,k?y:B.__ecGraphicWidth)||0,O.__ecGraphicHeight=f(O.__ecGraphicHeightOption,k?p:B.__ecGraphicHeight)||0}}for(var w=h.length-1;w>=0;w--){var S=h[w],O=d.get(S.id);if(O){var B=O.parent,P=B===g?{width:y,height:p}:{width:B.__ecGraphicWidth,height:B.__ecGraphicHeight};b.positionElement(O,S,P,null,{hv:S.hv,boundingMode:S.bounding})}}},_clear:function(){var i=this._elMap;i.each(function(n){u(n,i)}),this._elMap=A.createHashMap()},dispose:function(){this._clear()}});function o(i,n,h,g){var d=h.type,y=v.hasOwnProperty(d)?v[d]:D.getShapeClass(d),p=new y(h);n.add(p),g.set(i,p),p.__ecGraphicId=i}function u(i,n){var h=i&&i.parent;h&&(i.type==="group"&&i.traverse(function(g){u(g,n)}),n.removeKey(i.__ecGraphicId),h.remove(i))}function l(i){return i=A.extend({},i),A.each(["id","parentId","$action","hv","bounding"].concat(b.LOCATION_PARAMS),function(n){delete i[n]}),i}function r(i,n){var h;return A.each(n,function(g){i[g]!=null&&i[g]!=="auto"&&(h=!0)}),h}function s(i,n){var h=i.exist;if(n.id=i.keyInfo.id,!n.type&&h&&(n.type=h.type),n.parentId==null){var g=n.parentOption;g?n.parentId=g.id:h&&(n.parentId=h.parentId)}n.parentOption=null}function c(i,n,h){var g=A.extend({},h),d=i[n],y=h.$action||"merge";y==="merge"?d?(A.merge(d,g,!0),b.mergeLayoutParam(d,g,{ignoreSize:!0}),b.copyLayoutParams(h,d)):i[n]=g:y==="replace"?i[n]=g:y==="remove"&&d&&(i[n]=null)}function x(i,n){i&&(i.hv=n.hv=[r(n,["left","right"]),r(n,["top","bottom"])],i.type==="group"&&(i.width==null&&(i.width=n.width=0),i.height==null&&(i.height=n.height=0)))}function a(i,n,h){var g=i.eventData;!i.silent&&!i.ignore&&!g&&(g=i.eventData={componentType:"graphic",componentIndex:n.componentIndex,name:i.name}),g&&(g.info=i.info)}},3692:function(X,z,e){e(15367),e(88067),e(44344)},15367:function(X,z,e){var M=e(3440),F=e(31879),R=e(48070);e(9145),e(95608),M.extendComponentView({type:"grid",render:function(A,T){this.group.removeAll(),A.get("show")&&this.group.add(new R.Rect({shape:A.coordinateSystem.getRect(),style:F.defaults({fill:A.get("backgroundColor")},A.getItemStyle()),silent:!0,z2:-1}))}}),M.registerPreprocessor(function(A){A.xAxis&&A.yAxis&&!A.grid&&(A.grid={})})},12968:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(91212),T=e(48070),D=e(64174),b=e(65453),C=R.curry,f=R.each,v=R.map,m=Math.min,o=Math.max,u=Math.pow,l=1e4,r=6,s=6,c="globalPan",x={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},a={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},i={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},n=0;function h(ct){A.call(this),this._zr=ct,this.group=new T.Group,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid="brushController_"+n++,this._handlers={},f(Nt,function(vt,Dt){this._handlers[Dt]=R.bind(vt,this)},this)}h.prototype={constructor:h,enableBrush:function(ct){return this._brushType&&d(this),ct.brushType&&g(this,ct),this},setPanels:function(ct){if(ct&&ct.length){var vt=this._panels={};R.each(ct,function(Dt){vt[Dt.panelId]=R.clone(Dt)})}else this._panels=null;return this},mount:function(ct){ct=ct||{},this._enableGlobalPan=ct.enableGlobalPan;var vt=this.group;return this._zr.add(vt),vt.attr({position:ct.position||[0,0],rotation:ct.rotation||0,scale:ct.scale||[1,1]}),this._transform=vt.getLocalTransform(),this},eachCover:function(ct,vt){f(this._covers,ct,vt)},updateCovers:function(ct){ct=R.map(ct,function(dt){return R.merge(R.clone(i),dt,!0)});var vt="\0-brush-index-",Dt=this._covers,Ct=this._covers=[],jt=this,zt=this._creatingCover;return new b(Dt,ct,Zt,Yt).add(ft).update(ft).remove(gt).execute(),this;function Yt(dt,lt){return(dt.id!=null?dt.id:vt+lt)+"-"+dt.brushType}function Zt(dt,lt){return Yt(dt.__brushOption,lt)}function ft(dt,lt){var ot=ct[dt];if(lt!=null&&Dt[lt]===zt)Ct[dt]=Dt[lt];else{var it=Ct[dt]=lt!=null?(Dt[lt].__brushOption=ot,Dt[lt]):S(jt,w(jt,ot));k(jt,it)}}function gt(dt){Dt[dt]!==zt&&jt.group.remove(Dt[dt])}},unmount:function(){return this.enableBrush(!1),N(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},R.mixin(h,A);function g(ct,vt){var Dt=ct._zr;ct._enableGlobalPan||D.take(Dt,c,ct._uid),y(Dt,ct._handlers),ct._brushType=vt.brushType,ct._brushOption=R.merge(R.clone(i),vt,!0)}function d(ct){var vt=ct._zr;D.release(vt,c,ct._uid),p(vt,ct._handlers),ct._brushType=ct._brushOption=null}function y(ct,vt){f(vt,function(Dt,Ct){ct.on(Ct,Dt)})}function p(ct,vt){f(vt,function(Dt,Ct){ct.off(Ct,Dt)})}function w(ct,vt){var Dt=Tt[vt.brushType].createCover(ct,vt);return Dt.__brushOption=vt,B(Dt,vt),ct.group.add(Dt),Dt}function S(ct,vt){var Dt=P(vt);return Dt.endCreating&&(Dt.endCreating(ct,vt),B(vt,vt.__brushOption)),vt}function O(ct,vt){var Dt=vt.__brushOption;P(vt).updateCoverShape(ct,vt,Dt.range,Dt)}function B(ct,vt){var Dt=vt.z;Dt==null&&(Dt=l),ct.traverse(function(Ct){Ct.z=Dt,Ct.z2=Dt})}function k(ct,vt){P(vt).updateCommon(ct,vt),O(ct,vt)}function P(ct){return Tt[ct.__brushOption.brushType]}function L(ct,vt,Dt){var Ct=ct._panels;if(!Ct)return!0;var jt,zt=ct._transform;return f(Ct,function(Yt){Yt.isTargetByCursor(vt,Dt,zt)&&(jt=Yt)}),jt}function E(ct,vt){var Dt=ct._panels;if(!Dt)return!0;var Ct=vt.__brushOption.panelId;return Ct!=null?Dt[Ct]:!0}function N(ct){var vt=ct._covers,Dt=vt.length;return f(vt,function(Ct){ct.group.remove(Ct)},ct),vt.length=0,!!Dt}function I(ct,vt){var Dt=v(ct._covers,function(Ct){var jt=Ct.__brushOption,zt=R.clone(jt.range);return{brushType:jt.brushType,panelId:jt.panelId,range:zt}});ct.trigger("brush",Dt,{isEnd:!!vt.isEnd,removeOnClick:!!vt.removeOnClick})}function G(ct){var vt=ct._track;if(!vt.length)return!1;var Dt=vt[vt.length-1],Ct=vt[0],jt=Dt[0]-Ct[0],zt=Dt[1]-Ct[1],Yt=u(jt*jt+zt*zt,.5);return Yt>r}function W(ct){var vt=ct.length-1;return vt<0&&(vt=0),[ct[0],ct[vt]]}function Z(ct,vt,Dt,Ct){var jt=new T.Group;return jt.add(new T.Rect({name:"main",style:Y(Dt),silent:!0,draggable:!0,cursor:"move",drift:C(ct,vt,jt,"nswe"),ondragend:C(I,vt,{isEnd:!0})})),f(Ct,function(zt){jt.add(new T.Rect({name:zt,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:C(ct,vt,jt,zt),ondragend:C(I,vt,{isEnd:!0})}))}),jt}function U(ct,vt,Dt,Ct){var jt=Ct.brushStyle.lineWidth||0,zt=o(jt,s),Yt=Dt[0][0],Zt=Dt[1][0],ft=Yt-jt/2,gt=Zt-jt/2,dt=Dt[0][1],lt=Dt[1][1],ot=dt-zt+jt/2,it=lt-zt+jt/2,yt=dt-Yt,Ot=lt-Zt,St=yt+jt,Gt=Ot+jt;V(ct,vt,"main",Yt,Zt,yt,Ot),Ct.transformable&&(V(ct,vt,"w",ft,gt,zt,Gt),V(ct,vt,"e",ot,gt,zt,Gt),V(ct,vt,"n",ft,gt,St,zt),V(ct,vt,"s",ft,it,St,zt),V(ct,vt,"nw",ft,gt,zt,zt),V(ct,vt,"ne",ot,gt,zt,zt),V(ct,vt,"sw",ft,it,zt,zt),V(ct,vt,"se",ot,it,zt,zt))}function H(ct,vt){var Dt=vt.__brushOption,Ct=Dt.transformable,jt=vt.childAt(0);jt.useStyle(Y(Dt)),jt.attr({silent:!Ct,cursor:Ct?"move":"default"}),f(["w","e","n","s","se","sw","ne","nw"],function(zt){var Yt=vt.childOfName(zt),Zt=J(ct,zt);Yt&&Yt.attr({silent:!Ct,invisible:!Ct,cursor:Ct?a[Zt]+"-resize":null})})}function V(ct,vt,Dt,Ct,jt,zt,Yt){var Zt=vt.childOfName(Dt);Zt&&Zt.setShape(ut(st(ct,vt,[[Ct,jt],[Ct+zt,jt+Yt]])))}function Y(ct){return R.defaults({strokeNoScale:!0},ct.brushStyle)}function $(ct,vt,Dt,Ct){var jt=[m(ct,Dt),m(vt,Ct)],zt=[o(ct,Dt),o(vt,Ct)];return[[jt[0],zt[0]],[jt[1],zt[1]]]}function K(ct){return T.getTransform(ct.group)}function J(ct,vt){if(vt.length>1){vt=vt.split("");var Dt=[J(ct,vt[0]),J(ct,vt[1])];return(Dt[0]==="e"||Dt[0]==="w")&&Dt.reverse(),Dt.join("")}else{var Ct={w:"left",e:"right",n:"top",s:"bottom"},jt={left:"w",right:"e",top:"n",bottom:"s"},Dt=T.transformDirection(Ct[vt],K(ct));return jt[Dt]}}function Q(ct,vt,Dt,Ct,jt,zt,Yt,Zt){var ft=Ct.__brushOption,gt=ct(ft.range),dt=nt(Dt,zt,Yt);f(jt.split(""),function(lt){var ot=x[lt];gt[ot[0]][ot[1]]+=dt[ot[0]]}),ft.range=vt($(gt[0][0],gt[1][0],gt[0][1],gt[1][1])),k(Dt,Ct),I(Dt,{isEnd:!1})}function et(ct,vt,Dt,Ct,jt){var zt=vt.__brushOption.range,Yt=nt(ct,Dt,Ct);f(zt,function(Zt){Zt[0]+=Yt[0],Zt[1]+=Yt[1]}),k(ct,vt),I(ct,{isEnd:!1})}function nt(ct,vt,Dt){var Ct=ct.group,jt=Ct.transformCoordToLocal(vt,Dt),zt=Ct.transformCoordToLocal(0,0);return[jt[0]-zt[0],jt[1]-zt[1]]}function st(ct,vt,Dt){var Ct=E(ct,vt);return Ct&&Ct!==!0?Ct.clipPath(Dt,ct._transform):R.clone(Dt)}function ut(ct){var vt=m(ct[0][0],ct[1][0]),Dt=m(ct[0][1],ct[1][1]),Ct=o(ct[0][0],ct[1][0]),jt=o(ct[0][1],ct[1][1]);return{x:vt,y:Dt,width:Ct-vt,height:jt-Dt}}function rt(ct,vt,Dt){if(!(!ct._brushType||Rt(ct,vt))){var Ct=ct._zr,jt=ct._covers,zt=L(ct,vt,Dt);if(!ct._dragging)for(var Yt=0;Yt<jt.length;Yt++){var Zt=jt[Yt].__brushOption;if(zt&&(zt===!0||Zt.panelId===zt.panelId)&&Tt[Zt.brushType].contain(jt[Yt],Dt[0],Dt[1]))return}zt&&Ct.setCursorStyle("crosshair")}}function ht(ct){var vt=ct.event;vt.preventDefault&&vt.preventDefault()}function Pt(ct,vt,Dt){return ct.childOfName("main").contain(vt,Dt)}function wt(ct,vt,Dt,Ct){var jt=ct._creatingCover,zt=ct._creatingPanel,Yt=ct._brushOption,Zt;if(ct._track.push(Dt.slice()),G(ct)||jt){if(zt&&!jt){Yt.brushMode==="single"&&N(ct);var ft=R.clone(Yt);ft.brushType=At(ft.brushType,zt),ft.panelId=zt===!0?null:zt.panelId,jt=ct._creatingCover=w(ct,ft),ct._covers.push(jt)}if(jt){var gt=Tt[At(ct._brushType,zt)],dt=jt.__brushOption;dt.range=gt.getCreatingRange(st(ct,jt,ct._track)),Ct&&(S(ct,jt),gt.updateCommon(ct,jt)),O(ct,jt),Zt={isEnd:Ct}}}else Ct&&Yt.brushMode==="single"&&Yt.removeOnClick&&L(ct,vt,Dt)&&N(ct)&&(Zt={isEnd:Ct,removeOnClick:!0});return Zt}function At(ct,vt){return ct==="auto"?vt.defaultBrushType:ct}var Nt={mousedown:function(ct){if(this._dragging)Lt(this,ct);else if(!ct.target||!ct.target.draggable){ht(ct);var vt=this.group.transformCoordToLocal(ct.offsetX,ct.offsetY);this._creatingCover=null;var Dt=this._creatingPanel=L(this,ct,vt);Dt&&(this._dragging=!0,this._track=[vt.slice()])}},mousemove:function(ct){var vt=ct.offsetX,Dt=ct.offsetY,Ct=this.group.transformCoordToLocal(vt,Dt);if(rt(this,ct,Ct),this._dragging){ht(ct);var jt=wt(this,ct,Ct,!1);jt&&I(this,jt)}},mouseup:function(ct){Lt(this,ct)}};function Lt(ct,vt){if(ct._dragging){ht(vt);var Dt=vt.offsetX,Ct=vt.offsetY,jt=ct.group.transformCoordToLocal(Dt,Ct),zt=wt(ct,vt,jt,!0);ct._dragging=!1,ct._track=[],ct._creatingCover=null,zt&&I(ct,zt)}}function Rt(ct,vt,Dt){var Ct=ct._zr;return vt<0||vt>Ct.getWidth()||Dt<0||Dt>Ct.getHeight()}var Tt={lineX:mt(0),lineY:mt(1),rect:{createCover:function(ct,vt){return Z(C(Q,function(Dt){return Dt},function(Dt){return Dt}),ct,vt,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(ct){var vt=W(ct);return $(vt[1][0],vt[1][1],vt[0][0],vt[0][1])},updateCoverShape:function(ct,vt,Dt,Ct){U(ct,vt,Dt,Ct)},updateCommon:H,contain:Pt},polygon:{createCover:function(ct,vt){var Dt=new T.Group;return Dt.add(new T.Polyline({name:"main",style:Y(vt),silent:!0})),Dt},getCreatingRange:function(ct){return ct},endCreating:function(ct,vt){vt.remove(vt.childAt(0)),vt.add(new T.Polygon({name:"main",draggable:!0,drift:C(et,ct,vt),ondragend:C(I,ct,{isEnd:!0})}))},updateCoverShape:function(ct,vt,Dt,Ct){vt.childAt(0).setShape({points:st(ct,vt,Dt)})},updateCommon:H,contain:Pt}};function mt(ct){return{createCover:function(vt,Dt){return Z(C(Q,function(Ct){var jt=[Ct,[0,100]];return ct&&jt.reverse(),jt},function(Ct){return Ct[ct]}),vt,Dt,[["w","e"],["n","s"]][ct])},getCreatingRange:function(vt){var Dt=W(vt),Ct=m(Dt[0][ct],Dt[1][ct]),jt=o(Dt[0][ct],Dt[1][ct]);return[Ct,jt]},updateCoverShape:function(vt,Dt,Ct,jt){var zt,Yt=E(vt,Dt);if(Yt!==!0&&Yt.getLinearBrushOtherExtent)zt=Yt.getLinearBrushOtherExtent(ct,vt._transform);else{var Zt=vt._zr;zt=[0,[Zt.getWidth(),Zt.getHeight()][1-ct]]}var ft=[Ct,zt];ct&&ft.reverse(),U(vt,Dt,ft,jt)},updateCommon:H,contain:Pt}}var Ft=h;X.exports=Ft},99516:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(48070),T=e(35454),D=e(13483),b=R.each,C=R.indexOf,f=R.curry,v=["dataToPoint","pointToData"],m=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function o(p,w,S){var O=this._targetInfoList=[],B={},k=r(w,p);b(s,function(P,L){(!S||!S.include||C(S.include,L)>=0)&&P(k,O,B)})}var u=o.prototype;u.setOutputRanges=function(p,w){this.matchOutputRanges(p,w,function(S,O,B){if((S.coordRanges||(S.coordRanges=[])).push(O),!S.coordRange){S.coordRange=O;var k=a[S.brushType](0,B,O);S.__rangeOffset={offset:n[S.brushType](k.values,S.range,[1,1]),xyMinMax:k.xyMinMax}}})},u.matchOutputRanges=function(p,w,S){b(p,function(O){var B=this.findTargetInfo(O,w);B&&B!==!0&&R.each(B.coordSyses,function(k){var P=a[O.brushType](1,k,O.range);S(O,P.values,k,w)})},this)},u.setInputRanges=function(p,w){b(p,function(S){var O=this.findTargetInfo(S,w);if(S.range=S.range||[],O&&O!==!0){S.panelId=O.panelId;var B=a[S.brushType](0,O.coordSys,S.coordRange),k=S.__rangeOffset;S.range=k?n[S.brushType](B.values,k.offset,g(B.xyMinMax,k.xyMinMax)):B.values}},this)},u.makePanelOpts=function(p,w){return R.map(this._targetInfoList,function(S){var O=S.getPanelRect();return{panelId:S.panelId,defaultBrushType:w&&w(S),clipPath:D.makeRectPanelClipPath(O),isTargetByCursor:D.makeRectIsTargetByCursor(O,p,S.coordSysModel),getLinearBrushOtherExtent:D.makeLinearBrushOtherExtent(O)}})},u.controlSeries=function(p,w,S){var O=this.findTargetInfo(p,S);return O===!0||O&&C(O.coordSyses,w.coordinateSystem)>=0},u.findTargetInfo=function(p,w){for(var S=this._targetInfoList,O=r(w,p),B=0;B<S.length;B++){var k=S[B],P=p.panelId;if(P){if(k.panelId===P)return k}else for(var B=0;B<c.length;B++)if(c[B](O,k))return k}return!0};function l(p){return p[0]>p[1]&&p.reverse(),p}function r(p,w){return T.parseFinder(p,w,{includeMainTypes:m})}var s={grid:function(p,w){var S=p.xAxisModels,O=p.yAxisModels,B=p.gridModels,k=R.createHashMap(),P={},L={};!S&&!O&&!B||(b(S,function(E){var N=E.axis.grid.model;k.set(N.id,N),P[N.id]=!0}),b(O,function(E){var N=E.axis.grid.model;k.set(N.id,N),L[N.id]=!0}),b(B,function(E){k.set(E.id,E),P[E.id]=!0,L[E.id]=!0}),k.each(function(E){var N=E.coordinateSystem,I=[];b(N.getCartesians(),function(G,W){(C(S,G.getAxis("x").model)>=0||C(O,G.getAxis("y").model)>=0)&&I.push(G)}),w.push({panelId:"grid--"+E.id,gridModel:E,coordSysModel:E,coordSys:I[0],coordSyses:I,getPanelRect:x.grid,xAxisDeclared:P[E.id],yAxisDeclared:L[E.id]})}))},geo:function(p,w){b(p.geoModels,function(S){var O=S.coordinateSystem;w.push({panelId:"geo--"+S.id,geoModel:S,coordSysModel:S,coordSys:O,coordSyses:[O],getPanelRect:x.geo})})}},c=[function(p,w){var S=p.xAxisModel,O=p.yAxisModel,B=p.gridModel;return!B&&S&&(B=S.axis.grid.model),!B&&O&&(B=O.axis.grid.model),B&&B===w.gridModel},function(p,w){var S=p.geoModel;return S&&S===w.geoModel}],x={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var p=this.coordSys,w=p.getBoundingRect().clone();return w.applyTransform(A.getTransform(p)),w}},a={lineX:f(i,0),lineY:f(i,1),rect:function(p,w,S){var O=w[v[p]]([S[0][0],S[1][0]]),B=w[v[p]]([S[0][1],S[1][1]]),k=[l([O[0],B[0]]),l([O[1],B[1]])];return{values:k,xyMinMax:k}},polygon:function(p,w,S){var O=[[1/0,-1/0],[1/0,-1/0]],B=R.map(S,function(k){var P=w[v[p]](k);return O[0][0]=Math.min(O[0][0],P[0]),O[1][0]=Math.min(O[1][0],P[1]),O[0][1]=Math.max(O[0][1],P[0]),O[1][1]=Math.max(O[1][1],P[1]),P});return{values:B,xyMinMax:O}}};function i(p,w,S,O){var B=S.getAxis(["x","y"][p]),k=l(R.map([0,1],function(L){return w?B.coordToData(B.toLocalCoord(O[L])):B.toGlobalCoord(B.dataToCoord(O[L]))})),P=[];return P[p]=k,P[1-p]=[NaN,NaN],{values:k,xyMinMax:P}}var n={lineX:f(h,0),lineY:f(h,1),rect:function(p,w,S){return[[p[0][0]-S[0]*w[0][0],p[0][1]-S[0]*w[0][1]],[p[1][0]-S[1]*w[1][0],p[1][1]-S[1]*w[1][1]]]},polygon:function(p,w,S){return R.map(p,function(O,B){return[O[0]-S[0]*w[B][0],O[1]-S[1]*w[B][1]]})}};function h(p,w,S,O){return[w[0]-O[p]*S[0],w[1]-O[p]*S[1]]}function g(p,w){var S=d(p),O=d(w),B=[S[0]/O[0],S[1]/O[1]];return isNaN(B[0])&&(B[0]=1),isNaN(B[1])&&(B[1]=1),B}function d(p){return p?[p[0][1]-p[0][0],p[1][1]-p[1][0]]:[NaN,NaN]}var y=o;X.exports=y},7245:function(X,z,e){var M=e(31879),F=e(73672),R=e(95922),A=e(22997),T=A.onIrrelevantElement,D=e(48070),b=e(8590),C=e(50777),f=C.getUID,v=e(51218);function m(s){var c=s.getItemStyle(),x=s.get("areaColor");return x!=null&&(c.fill=x),c}function o(s,c,x,a,i){x.off("click"),x.off("mousedown"),c.get("selectedMode")&&(x.on("mousedown",function(){s._mouseDownFlag=!0}),x.on("click",function(n){if(s._mouseDownFlag){s._mouseDownFlag=!1;for(var h=n.target;!h.__regions;)h=h.parent;if(h){var g={type:(c.mainType==="geo"?"geo":"map")+"ToggleSelect",batch:M.map(h.__regions,function(d){return{name:d.name,from:i.uid}})};g[c.mainType+"Id"]=c.id,a.dispatchAction(g),u(c,x)}}}))}function u(s,c){c.eachChild(function(x){M.each(x.__regions,function(a){x.trigger(s.isSelected(a.name)?"emphasis":"normal")})})}function l(s,c){var x=new D.Group;this.uid=f("ec_map_draw"),this._controller=new F(s.getZr()),this._controllerHost={target:c?x:null},this.group=x,this._updateGroup=c,this._mouseDownFlag,this._mapName,this._initialized,x.add(this._regionsGroup=new D.Group),x.add(this._backgroundGroup=new D.Group)}l.prototype={constructor:l,draw:function(s,c,x,a,i){var n=s.mainType==="geo",h=s.getData&&s.getData();n&&c.eachComponent({mainType:"series",subType:"map"},function(W){!h&&W.getHostGeoModel()===s&&(h=W.getData())});var g=s.coordinateSystem;this._updateBackground(g);var d=this._regionsGroup,y=this.group,p=g.getTransformInfo(),w=!d.childAt(0)||i,S;if(w)y.transform=p.roamTransform,y.decomposeTransform(),y.dirty();else{var O=new v;O.transform=p.roamTransform,O.decomposeTransform();var B={scale:O.scale,position:O.position};S=O.scale,D.updateProps(y,B,s)}var k=p.rawScale,P=p.rawPosition;d.removeAll();var L=["itemStyle"],E=["emphasis","itemStyle"],N=["label"],I=["emphasis","label"],G=M.createHashMap();M.each(g.regions,function(W){var Z=G.get(W.name)||G.set(W.name,new D.Group),U=new D.CompoundPath({segmentIgnoreThreshold:1,shape:{paths:[]}});Z.add(U);var H=s.getRegionModel(W.name)||s,V=H.getModel(L),Y=H.getModel(E),$=m(V),K=m(Y),J=H.getModel(N),Q=H.getModel(I),et;if(h){et=h.indexOfName(W.name);var nt=h.getItemVisual(et,"color",!0);nt&&($.fill=nt)}var st=function(Tt){return[Tt[0]*k[0]+P[0],Tt[1]*k[1]+P[1]]};M.each(W.geometries,function(Tt){if(Tt.type==="polygon"){for(var mt=[],Ft=0;Ft<Tt.exterior.length;++Ft)mt.push(st(Tt.exterior[Ft]));U.shape.paths.push(new D.Polygon({segmentIgnoreThreshold:1,shape:{points:mt}}));for(var Ft=0;Ft<(Tt.interiors?Tt.interiors.length:0);++Ft){for(var ct=Tt.interiors[Ft],mt=[],vt=0;vt<ct.length;++vt)mt.push(st(ct[vt]));U.shape.paths.push(new D.Polygon({segmentIgnoreThreshold:1,shape:{points:mt}}))}}}),U.setStyle($),U.style.strokeNoScale=!0,U.culling=!0;var ut=J.get("show"),rt=Q.get("show"),ht=h&&isNaN(h.get(h.mapDimension("value"),et)),Pt=h&&h.getItemLayout(et);if(n||ht&&(ut||rt)||Pt&&Pt.showLabel){var wt=n?W.name:et,At;(!h||et>=0)&&(At=s);var Nt=new D.Text({position:st(W.center.slice()),scale:[1/y.scale[0],1/y.scale[1]],z2:10,silent:!0});if(D.setLabelStyle(Nt.style,Nt.hoverStyle={},J,Q,{labelFetcher:At,labelDataIndex:wt,defaultText:W.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!w){var Lt=[1/S[0],1/S[1]];D.updateProps(Nt,{scale:Lt},s)}Z.add(Nt)}if(h)h.setItemGraphicEl(et,Z);else{var H=s.getRegionModel(W.name);U.eventData={componentType:"geo",componentIndex:s.componentIndex,geoIndex:s.componentIndex,name:W.name,region:H&&H.option||{}}}var Rt=Z.__regions||(Z.__regions=[]);Rt.push(W),Z.highDownSilentOnTouch=!!s.get("selectedMode"),D.setHoverStyle(Z,K),d.add(Z)}),this._updateController(s,c,x),o(this,s,d,x,a),u(s,d)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&b.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(s){var c=s.map;this._mapName!==c&&M.each(b.makeGraphic(c,this.uid),function(x){this._backgroundGroup.add(x)},this),this._mapName=c},_updateController:function(s,c,x){var a=s.coordinateSystem,i=this._controller,n=this._controllerHost;n.zoomLimit=s.get("scaleLimit"),n.zoom=a.getZoom(),i.enable(s.get("roam")||!1);var h=s.mainType;function g(){var d={type:"geoRoam",componentType:h};return d[h+"Id"]=s.id,d}i.off("pan").on("pan",function(d){this._mouseDownFlag=!1,R.updateViewOnPan(n,d.dx,d.dy),x.dispatchAction(M.extend(g(),{dx:d.dx,dy:d.dy}))},this),i.off("zoom").on("zoom",function(d){if(this._mouseDownFlag=!1,R.updateViewOnZoom(n,d.scale,d.originX,d.originY),x.dispatchAction(M.extend(g(),{zoom:d.scale,originX:d.originX,originY:d.originY})),this._updateGroup){var y=this.group.scale;this._regionsGroup.traverse(function(p){p.type==="text"&&p.attr("scale",[1/y[0],1/y[1]])})}},this),i.setPointerChecker(function(d,y,p){return a.getViewRectAfterRoam().contain(y,p)&&!T(d,x,s)})}};var r=l;X.exports=r},73672:function(X,z,e){var M=e(31879),F=e(91212),R=e(19756),A=e(64174);function T(r){this.pointerChecker,this._zr=r,this._opt={};var s=M.bind,c=s(D,this),x=s(b,this),a=s(C,this),i=s(f,this),n=s(v,this);F.call(this),this.setPointerChecker=function(h){this.pointerChecker=h},this.enable=function(h,g){this.disable(),this._opt=M.defaults(M.clone(g)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),h==null&&(h=!0),(h===!0||h==="move"||h==="pan")&&(r.on("mousedown",c),r.on("mousemove",x),r.on("mouseup",a)),(h===!0||h==="scale"||h==="zoom")&&(r.on("mousewheel",i),r.on("pinch",n))},this.disable=function(){r.off("mousedown",c),r.off("mousemove",x),r.off("mouseup",a),r.off("mousewheel",i),r.off("pinch",n)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}M.mixin(T,F);function D(r){if(!(R.isMiddleOrRightButtonOnMouseUpDown(r)||r.target&&r.target.draggable)){var s=r.offsetX,c=r.offsetY;this.pointerChecker&&this.pointerChecker(r,s,c)&&(this._x=s,this._y=c,this._dragging=!0)}}function b(r){if(!(!this._dragging||!u("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||A.isTaken(this._zr,"globalPan"))){var s=r.offsetX,c=r.offsetY,x=this._x,a=this._y,i=s-x,n=c-a;this._x=s,this._y=c,this._opt.preventDefaultMouseMove&&R.stop(r.event),o(this,"pan","moveOnMouseMove",r,{dx:i,dy:n,oldX:x,oldY:a,newX:s,newY:c})}}function C(r){R.isMiddleOrRightButtonOnMouseUpDown(r)||(this._dragging=!1)}function f(r){var s=u("zoomOnMouseWheel",r,this._opt),c=u("moveOnMouseWheel",r,this._opt),x=r.wheelDelta,a=Math.abs(x),i=r.offsetX,n=r.offsetY;if(!(x===0||!s&&!c)){if(s){var h=a>3?1.4:a>1?1.2:1.1,g=x>0?h:1/h;m(this,"zoom","zoomOnMouseWheel",r,{scale:g,originX:i,originY:n})}if(c){var d=Math.abs(x),y=(x>0?1:-1)*(d>3?.4:d>1?.15:.05);m(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:y,originX:i,originY:n})}}}function v(r){if(!A.isTaken(this._zr,"globalPan")){var s=r.pinchScale>1?1.1:1/1.1;m(this,"zoom",null,r,{scale:s,originX:r.pinchX,originY:r.pinchY})}}function m(r,s,c,x,a){r.pointerChecker&&r.pointerChecker(x,a.originX,a.originY)&&(R.stop(x.event),o(r,s,c,x,a))}function o(r,s,c,x,a){a.isAvailableBehavior=M.bind(u,null,c,x),r.trigger(s,a)}function u(r,s,c){var x=c[r];return!r||x&&(!M.isString(x)||s.event[x+"Key"])}var l=T;X.exports=l},13483:function(X,z,e){var M=e(95946),F=e(22997),R=F.onIrrelevantElement,A=e(48070);function T(f){return f=C(f),function(v,m){return A.clipPointsByRect(v,f)}}function D(f,v){return f=C(f),function(m){var o=v??m,u=o?f.width:f.height,l=o?f.x:f.y;return[l,l+(u||0)]}}function b(f,v,m){return f=C(f),function(o,u,l){return f.contain(u[0],u[1])&&!R(o,v,m)}}function C(f){return M.create(f)}z.makeRectPanelClipPath=T,z.makeLinearBrushOtherExtent=D,z.makeRectIsTargetByCursor=b},22997:function(X,z){var e={axisPointer:1,tooltip:1,brush:1};function M(F,R,A){var T=R.getComponentByElement(F.topTarget),D=T&&T.coordinateSystem;return T&&T!==A&&!e[T.mainType]&&D&&D.model!==A}z.onIrrelevantElement=M},64174:function(X,z,e){var M=e(3440),F="\0_ec_interaction_mutex";function R(b,C,f){var v=D(b);v[C]=f}function A(b,C,f){var v=D(b),m=v[C];m===f&&(v[C]=null)}function T(b,C){return!!D(b)[C]}function D(b){return b[F]||(b[F]={})}M.registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),z.take=R,z.release=A,z.isTaken=T},23907:function(X,z,e){var M=e(30871),F=M.getLayoutRect,R=M.box,A=M.positionElement,T=e(17795),D=e(48070);function b(f,v,m){var o=v.getBoxLayoutParams(),u=v.get("padding"),l={width:m.getWidth(),height:m.getHeight()},r=F(o,l,u);R(v.get("orient"),f,v.get("itemGap"),r.width,r.height),A(f,o,l,u)}function C(u,v){var m=T.normalizeCssArray(v.get("padding")),o=v.getItemStyle(["color","opacity"]);o.fill=v.get("backgroundColor");var u=new D.Rect({shape:{x:u.x-m[3],y:u.y-m[0],width:u.width+m[1]+m[3],height:u.height+m[0]+m[2],r:v.get("borderRadius")},style:o,silent:!0,z2:-1});return u}z.layout=b,z.makeBackground=C},95922:function(X,z){function e(F,R,A){var T=F.target,D=T.position;D[0]+=R,D[1]+=A,T.dirty()}function M(F,R,A,T){var D=F.target,b=F.zoomLimit,C=D.position,f=D.scale,v=F.zoom=F.zoom||1;if(v*=R,b){var m=b.min||0,o=b.max||1/0;v=Math.max(Math.min(o,v),m)}var u=v/F.zoom;F.zoom=v,C[0]-=(A-C[0])*(u-1),C[1]-=(T-C[1])*(u-1),f[0]*=u,f[1]*=u,D.dirty()}z.updateViewOnPan=e,z.updateViewOnZoom=M},14748:function(X,z,e){var M=e(31879),F={updateSelectedMap:function(R){this._targetList=M.isArray(R)?R.slice():[],this._selectTargetMap=M.reduce(R||[],function(A,T){return A.set(T.name,T),A},M.createHashMap())},select:function(R,A){var T=A!=null?this._targetList[A]:this._selectTargetMap.get(R),D=this.get("selectedMode");D==="single"&&this._selectTargetMap.each(function(b){b.selected=!1}),T&&(T.selected=!0)},unSelect:function(R,A){var T=A!=null?this._targetList[A]:this._selectTargetMap.get(R);T&&(T.selected=!1)},toggleSelected:function(R,A){var T=A!=null?this._targetList[A]:this._selectTargetMap.get(R);if(T!=null)return this[T.selected?"unSelect":"select"](R,A),T.selected},isSelected:function(R,A){var T=A!=null?this._targetList[A]:this._selectTargetMap.get(R);return T&&T.selected}};X.exports=F},38289:function(X){function z(F,R,A,T,D,b){F=F||0;var C=A[1]-A[0];if(D!=null&&(D=M(D,[0,C])),b!=null&&(b=Math.max(b,D??0)),T==="all"){var f=Math.abs(R[1]-R[0]);f=M(f,[0,C]),D=b=M(f,[D,b]),T=0}R[0]=M(R[0],A),R[1]=M(R[1],A);var v=e(R,T);R[T]+=F;var m=D||0,o=A.slice();v.sign<0?o[0]+=m:o[1]-=m,R[T]=M(R[T],o);var u=e(R,T);D!=null&&(u.sign!==v.sign||u.span<D)&&(R[1-T]=R[T]+v.sign*D);var u=e(R,T);return b!=null&&u.span>b&&(R[1-T]=R[T]+u.sign*b),R}function e(F,R){var A=F[R]-F[1-R];return{span:Math.abs(A),sign:A>0?-1:A<0?1:R?-1:1}}function M(F,R){return Math.min(R[1]!=null?R[1]:1/0,Math.max(R[0]!=null?R[0]:-1/0,F))}X.exports=z},16613:function(X,z,e){var M=e(3440);e(58882),e(21331),e(26218);var F=e(59953),R=e(60684);M.registerProcessor(M.PRIORITY.PROCESSOR.SERIES_FILTER,F),R.registerSubTypeDefaulter("legend",function(){return"plain"})},68697:function(X,z,e){e(16613),e(25608),e(53693),e(98074)},58882:function(X,z,e){var M=e(3440),F=e(31879),R=e(56785),A=e(35454),T=A.isNameSpecified,D=e(16923),b=D.legend.selector,C={all:{type:"all",title:F.clone(b.all)},inverse:{type:"inverse",title:F.clone(b.inverse)}},f=M.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(m,o,u){this.mergeDefaultAndTheme(m,u),m.selected=m.selected||{},this._updateSelector(m)},mergeOption:function(m){f.superCall(this,"mergeOption",m),this._updateSelector(m)},_updateSelector:function(m){var o=m.selector;o===!0&&(o=m.selector=["all","inverse"]),F.isArray(o)&&F.each(o,function(u,l){F.isString(u)&&(u={type:u}),o[l]=F.merge(u,C[u.type])})},optionUpdated:function(){this._updateData(this.ecModel);var m=this._data;if(m[0]&&this.get("selectedMode")==="single"){for(var o=!1,u=0;u<m.length;u++){var l=m[u].get("name");if(this.isSelected(l)){this.select(l),o=!0;break}}!o&&this.select(m[0].get("name"))}},_updateData:function(m){var o=[],u=[];m.eachRawSeries(function(s){var c=s.name;u.push(c);var x;if(s.legendVisualProvider){var a=s.legendVisualProvider,i=a.getAllNames();m.isSeriesFiltered(s)||(u=u.concat(i)),i.length?o=o.concat(i):x=!0}else x=!0;x&&T(s)&&o.push(s.name)}),this._availableNames=u;var l=this.get("data")||o,r=F.map(l,function(s){return(typeof s=="string"||typeof s=="number")&&(s={name:s}),new R(s,this,this.ecModel)},this);this._data=r},getData:function(){return this._data},select:function(m){var o=this.option.selected,u=this.get("selectedMode");if(u==="single"){var l=this._data;F.each(l,function(r){o[r.get("name")]=!1})}o[m]=!0},unSelect:function(m){this.get("selectedMode")!=="single"&&(this.option.selected[m]=!1)},toggleSelected:function(m){var o=this.option.selected;o.hasOwnProperty(m)||(o[m]=!0),this[o[m]?"unSelect":"select"](m)},allSelect:function(){var m=this._data,o=this.option.selected;F.each(m,function(u){o[u.get("name",!0)]=!0})},inverseSelect:function(){var m=this._data,o=this.option.selected;F.each(m,function(u){var l=u.get("name",!0);o.hasOwnProperty(l)||(o[l]=!0),o[l]=!o[l]})},isSelected:function(m){var o=this.option.selected;return!(o.hasOwnProperty(m)&&!o[m])&&F.indexOf(this._availableNames,m)>=0},getOrient:function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}}),v=f;X.exports=v},26218:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(31879),T=e(35730),D=T.createSymbol,b=e(48070),C=e(23907),f=C.makeBackground,v=e(30871),m=A.curry,o=A.each,u=b.Group,l=R.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new u),this._backgroundEl,this.group.add(this._selectorGroup=new u),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(a,i,n){var h=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!a.get("show",!0)){var g=a.get("align"),d=a.get("orient");(!g||g==="auto")&&(g=a.get("left")==="right"&&d==="vertical"?"right":"left");var y=a.get("selector",!0),p=a.get("selectorPosition",!0);y&&(!p||p==="auto")&&(p=d==="horizontal"?"end":"start"),this.renderInner(g,a,i,n,y,d,p);var w=a.getBoxLayoutParams(),S={width:n.getWidth(),height:n.getHeight()},O=a.get("padding"),B=v.getLayoutRect(w,S,O),k=this.layoutInner(a,g,B,h,y,p),P=v.getLayoutRect(A.defaults({width:k.width,height:k.height},w),S,O);this.group.attr("position",[P.x-k.x,P.y-k.y]),this.group.add(this._backgroundEl=f(k,a))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(a,i,n,h,g,d,y){var p=this.getContentGroup(),w=A.createHashMap(),S=i.get("selectedMode"),O=[];n.eachRawSeries(function(B){!B.get("legendHoverLink")&&O.push(B.id)}),o(i.getData(),function(B,k){var P=B.get("name");if(!this.newlineDisabled&&(P===""||P===`
`)){p.add(new u({newline:!0}));return}var L=n.getSeriesByName(P)[0];if(!w.get(P))if(L){var E=L.getData(),N=E.getVisual("color"),I=E.getVisual("borderColor");typeof N=="function"&&(N=N(L.getDataParams(0))),typeof I=="function"&&(I=I(L.getDataParams(0)));var G=E.getVisual("legendSymbol")||"roundRect",W=E.getVisual("symbol"),Z=this._createItem(P,k,B,i,G,W,a,N,I,S);Z.on("click",m(s,P,null,h,O)).on("mouseover",m(c,L.name,null,h,O)).on("mouseout",m(x,L.name,null,h,O)),w.set(P,!0)}else n.eachRawSeries(function(U){if(!w.get(P)&&U.legendVisualProvider){var H=U.legendVisualProvider;if(!H.containName(P))return;var V=H.indexOfName(P),Y=H.getItemVisual(V,"color"),$=H.getItemVisual(V,"borderColor"),K="roundRect",J=this._createItem(P,k,B,i,K,null,a,Y,$,S);J.on("click",m(s,null,P,h,O)).on("mouseover",m(c,null,P,h,O)).on("mouseout",m(x,null,P,h,O)),w.set(P,!0)}},this)},this),g&&this._createSelector(g,i,h,d,y)},_createSelector:function(a,i,n,h,g){var d=this.getSelectorGroup();o(a,function(p){y(p)});function y(p){var w=p.type,S=new b.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:w==="all"?"legendAllSelect":"legendInverseSelect"})}});d.add(S);var O=i.getModel("selectorLabel"),B=i.getModel("emphasis.selectorLabel");b.setLabelStyle(S.style,S.hoverStyle={},O,B,{defaultText:p.title,isRectText:!1}),b.setHoverStyle(S)}},_createItem:function(a,i,n,h,g,d,y,p,w,S){var O=h.get("itemWidth"),B=h.get("itemHeight"),k=h.get("inactiveColor"),P=h.get("inactiveBorderColor"),L=h.get("symbolKeepAspect"),E=h.getModel("itemStyle"),N=h.isSelected(a),I=new u,G=n.getModel("textStyle"),W=n.get("icon"),Z=n.getModel("tooltip"),U=Z.parentModel;g=W||g;var H=D(g,0,0,O,B,N?p:k,L??!0);if(I.add(r(H,g,E,w,P,N)),!W&&d&&(d!==g||d==="none")){var V=B*.8;d==="none"&&(d="circle");var Y=D(d,(O-V)/2,(B-V)/2,V,V,N?p:k,L??!0);I.add(r(Y,d,E,w,P,N))}var $=y==="left"?O+5:-5,K=y,J=h.get("formatter"),Q=a;typeof J=="string"&&J?Q=J.replace("{name}",a??""):typeof J=="function"&&(Q=J(a)),I.add(new b.Text({style:b.setTextStyle({},G,{text:Q,x:$,y:B/2,textFill:N?G.getTextColor():k,textAlign:K,textVerticalAlign:"middle"})}));var et=new b.Rect({shape:I.getBoundingRect(),invisible:!0,tooltip:Z.get("show")?A.extend({content:a,formatter:U.get("formatter",!0)||function(){return a},formatterParams:{componentType:"legend",legendIndex:h.componentIndex,name:a,$vars:["name"]}},Z.option):null});return I.add(et),I.eachChild(function(nt){nt.silent=!0}),et.silent=!S,this.getContentGroup().add(I),b.setHoverStyle(I),I.__legendDataIndex=i,I},layoutInner:function(a,i,n,h,g,d){var y=this.getContentGroup(),p=this.getSelectorGroup();v.box(a.get("orient"),y,a.get("itemGap"),n.width,n.height);var w=y.getBoundingRect(),S=[-w.x,-w.y];if(g){v.box("horizontal",p,a.get("selectorItemGap",!0));var O=p.getBoundingRect(),B=[-O.x,-O.y],k=a.get("selectorButtonGap",!0),P=a.getOrient().index,L=P===0?"width":"height",E=P===0?"height":"width",N=P===0?"y":"x";d==="end"?B[P]+=w[L]+k:S[P]+=O[L]+k,B[1-P]+=w[E]/2-O[E]/2,p.attr("position",B),y.attr("position",S);var I={x:0,y:0};return I[L]=w[L]+k+O[L],I[E]=Math.max(w[E],O[E]),I[N]=Math.min(0,O[N]+B[1-P]),I}else return y.attr("position",S),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function r(a,i,n,h,g,d){var y;return i!=="line"&&i.indexOf("empty")<0?(y=n.getItemStyle(),a.style.stroke=h,d||(y.stroke=g)):y=n.getItemStyle(["borderWidth","borderColor"]),a.setStyle(y)}function s(a,i,n,h){x(a,i,n,h),n.dispatchAction({type:"legendToggleSelect",name:a??i}),c(a,i,n,h)}function c(a,i,n,h){var g=n.getZr().storage.getDisplayList()[0];g&&g.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:a,name:i,excludeSeriesId:h})}function x(a,i,n,h){var g=n.getZr().storage.getDisplayList()[0];g&&g.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:a,name:i,excludeSeriesId:h})}X.exports=l},25608:function(X,z,e){var M=e(58882),F=e(30871),R=F.mergeLayoutParam,A=F.getLayoutParams,T=M.extend({type:"legend.scroll",setScrollDataIndex:function(C){this.option.scrollDataIndex=C},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(C,f,v,m){var o=A(C);T.superCall(this,"init",C,f,v,m),D(this,C,o)},mergeOption:function(C,f){T.superCall(this,"mergeOption",C,f),D(this,this.option,C)}});function D(C,f,v){var m=C.getOrient(),o=[1,1];o[m.index]=0,R(f,v,{type:"box",ignoreSize:o})}var b=T;X.exports=b},53693:function(X,z,e){var M=e(31879),F=e(48070),R=e(30871),A=e(26218),T=F.Group,D=["width","height"],b=["x","y"],C=A.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){C.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new T),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new T),this._showController},resetInner:function(){C.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(v,m,o,u,l,r,s){var c=this;C.superCall(this,"renderInner",v,m,o,u,l,r,s);var x=this._controllerGroup,a=m.get("pageIconSize",!0);M.isArray(a)||(a=[a,a]),n("pagePrev",0);var i=m.getModel("pageTextStyle");x.add(new F.Text({name:"pageText",style:{textFill:i.getTextColor(),font:i.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),n("pageNext",1);function n(h,g){var d=h+"DataIndex",y=F.createIcon(m.get("pageIcons",!0)[m.getOrient().name][g],{onclick:M.bind(c._pageGo,c,d,m,u)},{x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]});y.name=h,x.add(y)}},layoutInner:function(v,m,o,u,l,r){var s=this.getSelectorGroup(),c=v.getOrient().index,x=D[c],a=b[c],i=D[1-c],n=b[1-c];l&&R.box("horizontal",s,v.get("selectorItemGap",!0));var h=v.get("selectorButtonGap",!0),g=s.getBoundingRect(),d=[-g.x,-g.y],y=M.clone(o);l&&(y[x]=o[x]-g[x]-h);var p=this._layoutContentAndController(v,u,y,c,x,i,n);if(l){if(r==="end")d[c]+=p[x]+h;else{var w=g[x]+h;d[c]-=w,p[a]-=w}p[x]+=g[x]+h,d[1-c]+=p[n]+p[i]/2-g[i]/2,p[i]=Math.max(p[i],g[i]),p[n]=Math.min(p[n],g[n]+d[1-c]),s.attr("position",d)}return p},_layoutContentAndController:function(v,m,o,u,l,r,s){var c=this.getContentGroup(),x=this._containerGroup,a=this._controllerGroup;R.box(v.get("orient"),c,v.get("itemGap"),u?o.width:null,u?null:o.height),R.box("horizontal",a,v.get("pageButtonItemGap",!0));var i=c.getBoundingRect(),n=a.getBoundingRect(),h=this._showController=i[l]>o[l],g=[-i.x,-i.y];m||(g[u]=c.position[u]);var d=[0,0],y=[-n.x,-n.y],p=M.retrieve2(v.get("pageButtonGap",!0),v.get("itemGap",!0));if(h){var w=v.get("pageButtonPosition",!0);w==="end"?y[u]+=o[l]-n[l]:d[u]+=n[l]+p}y[1-u]+=i[r]/2-n[r]/2,c.attr("position",g),x.attr("position",d),a.attr("position",y);var S={x:0,y:0};if(S[l]=h?o[l]:i[l],S[r]=Math.max(i[r],n[r]),S[s]=Math.min(0,n[s]+y[1-u]),x.__rectSize=o[l],h){var O={x:0,y:0};O[l]=Math.max(o[l]-n[l]-p,0),O[r]=S[r],x.setClipPath(new F.Rect({shape:O})),x.__rectSize=O[l]}else a.eachChild(function(k){k.attr({invisible:!0,silent:!0})});var B=this._getPageInfo(v);return B.pageIndex!=null&&F.updateProps(c,{position:B.contentPosition},h?v:!1),this._updatePageInfoView(v,B),S},_pageGo:function(v,m,o){var u=this._getPageInfo(m)[v];u!=null&&o.dispatchAction({type:"legendScroll",scrollDataIndex:u,legendId:m.id})},_updatePageInfoView:function(v,m){var o=this._controllerGroup;M.each(["pagePrev","pageNext"],function(x){var a=m[x+"DataIndex"]!=null,i=o.childOfName(x);i&&(i.setStyle("fill",a?v.get("pageIconColor",!0):v.get("pageIconInactiveColor",!0)),i.cursor=a?"pointer":"default")});var u=o.childOfName("pageText"),l=v.get("pageFormatter"),r=m.pageIndex,s=r!=null?r+1:0,c=m.pageCount;u&&l&&u.setStyle("text",M.isString(l)?l.replace("{current}",s).replace("{total}",c):l({current:s,total:c}))},_getPageInfo:function(v){var m=v.get("scrollDataIndex",!0),o=this.getContentGroup(),u=this._containerGroup.__rectSize,l=v.getOrient().index,r=D[l],s=b[l],c=this._findTargetItemIndex(m),x=o.children(),a=x[c],i=x.length,n=i?1:0,h={contentPosition:o.position.slice(),pageCount:n,pageIndex:n-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!a)return h;var g=S(a);h.contentPosition[l]=-g.s;for(var d=c+1,y=g,p=g,w=null;d<=i;++d)w=S(x[d]),(!w&&p.e>y.s+u||w&&!O(w,y.s))&&(p.i>y.i?y=p:y=w,y&&(h.pageNextDataIndex==null&&(h.pageNextDataIndex=y.i),++h.pageCount)),p=w;for(var d=c-1,y=g,p=g,w=null;d>=-1;--d)w=S(x[d]),(!w||!O(p,w.s))&&y.i<p.i&&(p=y,h.pagePrevDataIndex==null&&(h.pagePrevDataIndex=y.i),++h.pageCount,++h.pageIndex),y=w;return h;function S(B){if(B){var k=B.getBoundingRect(),P=k[s]+B.position[l];return{s:P,e:P+k[r],i:B.__legendDataIndex}}}function O(B,k){return B.e>=k&&B.s<=k+u}},_findTargetItemIndex:function(v){if(!this._showController)return 0;var m,o=this.getContentGroup(),u;return o.eachChild(function(l,r){var s=l.__legendDataIndex;u==null&&s!=null&&(u=r),s===v&&(m=r)}),m??u}}),f=C;X.exports=f},21331:function(X,z,e){var M=e(3440),F=e(31879);function R(A,T,D){var b={},C=A==="toggleSelected",f;return D.eachComponent("legend",function(v){C&&f!=null?v[f?"select":"unSelect"](T.name):A==="allSelect"||A==="inverseSelect"?v[A]():(v[A](T.name),f=v.isSelected(T.name));var m=v.getData();F.each(m,function(o){var u=o.get("name");if(!(u===`
`||u==="")){var l=v.isSelected(u);b.hasOwnProperty(u)?b[u]=b[u]&&l:b[u]=l}})}),A==="allSelect"||A==="inverseSelect"?{selected:b}:{name:T.name,selected:b}}M.registerAction("legendToggleSelect","legendselectchanged",F.curry(R,"toggleSelected")),M.registerAction("legendAllSelect","legendselectall",F.curry(R,"allSelect")),M.registerAction("legendInverseSelect","legendinverseselect",F.curry(R,"inverseSelect")),M.registerAction("legendSelect","legendselected",F.curry(R,"select")),M.registerAction("legendUnSelect","legendunselected",F.curry(R,"unSelect"))},59953:function(X){function z(e){var M=e.findComponents({mainType:"legend"});M&&M.length&&e.filterSeries(function(F){for(var R=0;R<M.length;R++)if(!M[R].isSelected(F.name))return!1;return!0})}X.exports=z},98074:function(X,z,e){var M=e(3440);M.registerAction("legendScroll","legendscroll",function(F,R){var A=F.scrollDataIndex;A!=null&&R.eachComponent({mainType:"legend",subType:"scroll",query:F},function(T){T.setScrollDataIndex(A)})})},53597:function(X,z,e){var M=e(3440);e(57786),e(16258),M.registerPreprocessor(function(F){F.markArea=F.markArea||{}})},87152:function(X,z,e){var M=e(3440);e(41827),e(82295),M.registerPreprocessor(function(F){F.markLine=F.markLine||{}})},23710:function(X,z,e){var M=e(3440);e(69520),e(52747),M.registerPreprocessor(function(F){F.markPoint=F.markPoint||{}})},57786:function(X,z,e){var M=e(60030),F=M.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});X.exports=F},16258:function(X,z,e){var M=e(31879),F=e(94819),R=e(58677),A=e(48354),T=e(48070),D=e(67975),b=e(44005),C=function(r,s,c,x){var a=D.dataTransform(r,x[0]),i=D.dataTransform(r,x[1]),n=M.retrieve,h=a.coord,g=i.coord;h[0]=n(h[0],-1/0),h[1]=n(h[1],-1/0),g[0]=n(g[0],1/0),g[1]=n(g[1],1/0);var d=M.mergeAll([{},a,i]);return d.coord=[a.coord,i.coord],d.x0=a.x,d.y0=a.y,d.x1=i.x,d.y1=i.y,d};function f(r){return!isNaN(r)&&!isFinite(r)}function v(r,s,c,x){var a=1-r;return f(s[a])&&f(c[a])}function m(r,s){var c=s.coord[0],x=s.coord[1];return r.type==="cartesian2d"&&c&&x&&(v(1,c,x,r)||v(0,c,x,r))?!0:D.dataFilter(r,{coord:c,x:s.x0,y:s.y0})||D.dataFilter(r,{coord:x,x:s.x1,y:s.y1})}function o(r,s,c,x,a){var i=x.coordinateSystem,n=r.getItemModel(s),h,g=A.parsePercent(n.get(c[0]),a.getWidth()),d=A.parsePercent(n.get(c[1]),a.getHeight());if(!isNaN(g)&&!isNaN(d))h=[g,d];else{if(x.getMarkerPosition)h=x.getMarkerPosition(r.getValues(c,s));else{var y=r.get(c[0],s),p=r.get(c[1],s),w=[y,p];i.clampData&&i.clampData(w,w),h=i.dataToPoint(w,!0)}if(i.type==="cartesian2d"){var S=i.getAxis("x"),O=i.getAxis("y"),y=r.get(c[0],s),p=r.get(c[1],s);f(y)?h[0]=S.toGlobalCoord(S.getExtent()[c[0]==="x0"?0:1]):f(p)&&(h[1]=O.toGlobalCoord(O.getExtent()[c[1]==="y0"?0:1]))}isNaN(g)||(h[0]=g),isNaN(d)||(h[1]=d)}return h}var u=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];b.extend({type:"markArea",updateTransform:function(r,s,c){s.eachSeries(function(x){var a=x.markAreaModel;if(a){var i=a.getData();i.each(function(n){var h=M.map(u,function(d){return o(i,n,d,x,c)});i.setItemLayout(n,h);var g=i.getItemGraphicEl(n);g.setShape("points",h)})}},this)},renderSeries:function(r,s,c,x){var a=r.coordinateSystem,i=r.id,n=r.getData(),h=this.markerGroupMap,g=h.get(i)||h.set(i,{group:new T.Group});this.group.add(g.group),g.__keep=!0;var d=l(a,r,s);s.setData(d),d.each(function(y){var p=M.map(u,function(S){return o(d,y,S,r,x)}),w=!0;M.each(u,function(S){if(w){var O=d.get(S[0],y),B=d.get(S[1],y);(f(O)||a.getAxis("x").containData(O))&&(f(B)||a.getAxis("y").containData(B))&&(w=!1)}}),d.setItemLayout(y,{points:p,allClipped:w}),d.setItemVisual(y,{color:n.getVisual("color")})}),d.diff(g.__data).add(function(y){var p=d.getItemLayout(y);if(!p.allClipped){var w=new T.Polygon({shape:{points:p.points}});d.setItemGraphicEl(y,w),g.group.add(w)}}).update(function(y,p){var w=g.__data.getItemGraphicEl(p),S=d.getItemLayout(y);S.allClipped?w&&g.group.remove(w):(w?T.updateProps(w,{shape:{points:S.points}},s,y):w=new T.Polygon({shape:{points:S.points}}),d.setItemGraphicEl(y,w),g.group.add(w))}).remove(function(y){var p=g.__data.getItemGraphicEl(y);g.group.remove(p)}).execute(),d.eachItemGraphicEl(function(y,p){var w=d.getItemModel(p),S=w.getModel("label"),O=w.getModel("emphasis.label"),B=d.getItemVisual(p,"color");y.useStyle(M.defaults(w.getModel("itemStyle").getItemStyle(),{fill:F.modifyAlpha(B,.4),stroke:B})),y.hoverStyle=w.getModel("emphasis.itemStyle").getItemStyle(),T.setLabelStyle(y.style,y.hoverStyle,S,O,{labelFetcher:s,labelDataIndex:p,defaultText:d.getName(p)||"",isRectText:!0,autoColor:B}),T.setHoverStyle(y,{}),y.dataModel=s}),g.__data=d,g.group.silent=s.get("silent")||r.get("silent")}});function l(r,s,c){var x,a,i=["x0","y0","x1","y1"];r?(x=M.map(r&&r.dimensions,function(g){var d=s.getData(),y=d.getDimensionInfo(d.mapDimension(g))||{};return M.defaults({name:g},y)}),a=new R(M.map(i,function(g,d){return{name:g,type:x[d%2].type}}),c)):(x=[{name:"value",type:"float"}],a=new R(x,c));var n=M.map(c.get("data"),M.curry(C,s,r,c));r&&(n=M.filter(n,M.curry(m,r)));var h=r?function(g,d,y,p){return g.coord[Math.floor(p/2)][p%2]}:function(g){return g.value};return a.initData(n,null,h),a.hasItemOption=!0,a}},41827:function(X,z,e){var M=e(60030),F=M.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});X.exports=F},82295:function(X,z,e){var M=e(31879),F=e(58677),R=e(48354),A=e(67975),T=e(89264),D=e(44005),b=e(53618),C=b.getStackedDimension,f=function(s,c,x,a){var i=s.getData(),n=a.type;if(!M.isArray(a)&&(n==="min"||n==="max"||n==="average"||n==="median"||a.xAxis!=null||a.yAxis!=null)){var h,g;if(a.yAxis!=null||a.xAxis!=null)h=c.getAxis(a.yAxis!=null?"y":"x"),g=M.retrieve(a.yAxis,a.xAxis);else{var d=A.getAxisInfo(a,i,c,s);h=d.valueAxis;var y=C(i,d.valueDataDim);g=A.numCalculate(i,y,n)}var p=h.dim==="x"?0:1,w=1-p,S=M.clone(a),O={};S.type=null,S.coord=[],O.coord=[],S.coord[w]=-1/0,O.coord[w]=1/0;var B=x.get("precision");B>=0&&typeof g=="number"&&(g=+g.toFixed(Math.min(B,20))),S.coord[p]=O.coord[p]=g,a=[S,O,{type:n,valueIndex:a.valueIndex,value:g}]}return a=[A.dataTransform(s,a[0]),A.dataTransform(s,a[1]),M.extend({},a[2])],a[2].type=a[2].type||"",M.merge(a[2],a[0]),M.merge(a[2],a[1]),a};function v(s){return!isNaN(s)&&!isFinite(s)}function m(s,c,x,a){var i=1-s,n=a.dimensions[s];return v(c[i])&&v(x[i])&&c[s]===x[s]&&a.getAxis(n).containData(c[s])}function o(s,c){if(s.type==="cartesian2d"){var x=c[0].coord,a=c[1].coord;if(x&&a&&(m(1,x,a,s)||m(0,x,a,s)))return!0}return A.dataFilter(s,c[0])&&A.dataFilter(s,c[1])}function u(s,c,x,a,i){var n=a.coordinateSystem,h=s.getItemModel(c),g,d=R.parsePercent(h.get("x"),i.getWidth()),y=R.parsePercent(h.get("y"),i.getHeight());if(!isNaN(d)&&!isNaN(y))g=[d,y];else{if(a.getMarkerPosition)g=a.getMarkerPosition(s.getValues(s.dimensions,c));else{var p=n.dimensions,w=s.get(p[0],c),S=s.get(p[1],c);g=n.dataToPoint([w,S])}if(n.type==="cartesian2d"){var O=n.getAxis("x"),B=n.getAxis("y"),p=n.dimensions;v(s.get(p[0],c))?g[0]=O.toGlobalCoord(O.getExtent()[x?0:1]):v(s.get(p[1],c))&&(g[1]=B.toGlobalCoord(B.getExtent()[x?0:1]))}isNaN(d)||(g[0]=d),isNaN(y)||(g[1]=y)}s.setItemLayout(c,g)}var l=D.extend({type:"markLine",updateTransform:function(s,c,x){c.eachSeries(function(a){var i=a.markLineModel;if(i){var n=i.getData(),h=i.__from,g=i.__to;h.each(function(d){u(h,d,!0,a,x),u(g,d,!1,a,x)}),n.each(function(d){n.setItemLayout(d,[h.getItemLayout(d),g.getItemLayout(d)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},renderSeries:function(s,c,x,a){var i=s.coordinateSystem,n=s.id,h=s.getData(),g=this.markerGroupMap,d=g.get(n)||g.set(n,new T);this.group.add(d.group);var y=r(i,s,c),p=y.from,w=y.to,S=y.line;c.__from=p,c.__to=w,c.setData(S);var O=c.get("symbol"),B=c.get("symbolSize");M.isArray(O)||(O=[O,O]),typeof B=="number"&&(B=[B,B]),y.from.each(function(P){k(p,P,!0),k(w,P,!1)}),S.each(function(P){var L=S.getItemModel(P).get("lineStyle.color");S.setItemVisual(P,{color:L||p.getItemVisual(P,"color")}),S.setItemLayout(P,[p.getItemLayout(P),w.getItemLayout(P)]),S.setItemVisual(P,{fromSymbolRotate:p.getItemVisual(P,"symbolRotate"),fromSymbolSize:p.getItemVisual(P,"symbolSize"),fromSymbol:p.getItemVisual(P,"symbol"),toSymbolRotate:w.getItemVisual(P,"symbolRotate"),toSymbolSize:w.getItemVisual(P,"symbolSize"),toSymbol:w.getItemVisual(P,"symbol")})}),d.updateData(S),y.line.eachItemGraphicEl(function(P,L){P.traverse(function(E){E.dataModel=c})});function k(P,L,E){var N=P.getItemModel(L);u(P,L,E,s,a),P.setItemVisual(L,{symbolRotate:N.get("symbolRotate"),symbolSize:N.get("symbolSize")||B[E?0:1],symbol:N.get("symbol",!0)||O[E?0:1],color:N.get("itemStyle.color")||h.getVisual("color")})}d.__keep=!0,d.group.silent=c.get("silent")||s.get("silent")}});function r(s,c,x){var a;s?a=M.map(s&&s.dimensions,function(y){var p=c.getData().getDimensionInfo(c.getData().mapDimension(y))||{};return M.defaults({name:y},p)}):a=[{name:"value",type:"float"}];var i=new F(a,x),n=new F(a,x),h=new F([],x),g=M.map(x.get("data"),M.curry(f,c,s,x));s&&(g=M.filter(g,M.curry(o,s)));var d=s?A.dimValueGetter:function(y){return y.value};return i.initData(M.map(g,function(y){return y[0]}),null,d),n.initData(M.map(g,function(y){return y[1]}),null,d),h.initData(M.map(g,function(y){return y[2]})),h.hasItemOption=!0,{from:i,to:n,line:h}}X.exports=l},69520:function(X,z,e){var M=e(60030),F=M.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});X.exports=F},52747:function(X,z,e){var M=e(31879),F=e(52159),R=e(48354),A=e(58677),T=e(67975),D=e(44005);function b(v,m,o){var u=m.coordinateSystem;v.each(function(l){var r=v.getItemModel(l),s,c=R.parsePercent(r.get("x"),o.getWidth()),x=R.parsePercent(r.get("y"),o.getHeight());if(!isNaN(c)&&!isNaN(x))s=[c,x];else if(m.getMarkerPosition)s=m.getMarkerPosition(v.getValues(v.dimensions,l));else if(u){var a=v.get(u.dimensions[0],l),i=v.get(u.dimensions[1],l);s=u.dataToPoint([a,i])}isNaN(c)||(s[0]=c),isNaN(x)||(s[1]=x),v.setItemLayout(l,s)})}var C=D.extend({type:"markPoint",updateTransform:function(v,m,o){m.eachSeries(function(u){var l=u.markPointModel;l&&(b(l.getData(),u,o),this.markerGroupMap.get(u.id).updateLayout(l))},this)},renderSeries:function(v,m,o,u){var l=v.coordinateSystem,r=v.id,s=v.getData(),c=this.markerGroupMap,x=c.get(r)||c.set(r,new F),a=f(l,v,m);m.setData(a),b(m.getData(),v,u),a.each(function(i){var n=a.getItemModel(i),h=n.getShallow("symbol"),g=n.getShallow("symbolSize"),d=n.getShallow("symbolRotate"),y=M.isFunction(h),p=M.isFunction(g),w=M.isFunction(d);if(y||p||w){var S=m.getRawValue(i),O=m.getDataParams(i);y&&(h=h(S,O)),p&&(g=g(S,O)),w&&(d=d(S,O))}a.setItemVisual(i,{symbol:h,symbolSize:g,symbolRotate:d,color:n.get("itemStyle.color")||s.getVisual("color")})}),x.updateData(a),this.group.add(x.group),a.eachItemGraphicEl(function(i){i.traverse(function(n){n.dataModel=m})}),x.__keep=!0,x.group.silent=m.get("silent")||v.get("silent")}});function f(v,m,o){var u;v?u=M.map(v&&v.dimensions,function(s){var c=m.getData().getDimensionInfo(m.getData().mapDimension(s))||{};return M.defaults({name:s},c)}):u=[{name:"value",type:"float"}];var l=new A(u,o),r=M.map(o.get("data"),M.curry(T.dataTransform,m));return v&&(r=M.filter(r,M.curry(T.dataFilter,v))),l.initData(r,null,v?T.dimValueGetter:function(s){return s.value}),l}X.exports=C},60030:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(31879),T=e(58020),D=e(35454),b=e(17795),C=e(82370),f=b.addCommas,v=b.encodeHTML;function m(l){D.defaultEmphasis(l,"label",["show"])}var o=R.extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(l,r,s){this.mergeDefaultAndTheme(l,s),this._mergeOption(l,s,!1,!0)},isAnimationEnabled:function(){if(T.node)return!1;var l=this.__hostSeries;return this.getShallow("animation")&&l&&l.isAnimationEnabled()},mergeOption:function(l,r){this._mergeOption(l,r,!1,!1)},_mergeOption:function(l,r,s,c){var x=this.constructor,a=this.mainType+"Model";s||r.eachSeries(function(i){var n=i.get(this.mainType,!0),h=i[a];if(!n||!n.data){i[a]=null;return}h?h._mergeOption(n,r,!0):(c&&m(n),A.each(n.data,function(g){g instanceof Array?(m(g[0]),m(g[1])):m(g)}),h=new x(n,this,r),A.extend(h,{mainType:this.mainType,seriesIndex:i.seriesIndex,name:i.name,createdBySelf:!0}),h.__hostSeries=i),i[a]=h},this)},formatTooltip:function(l,r,s,c){var x=this.getData(),a=this.getRawValue(l),i=A.isArray(a)?A.map(a,f).join(", "):f(a),n=x.getName(l),h=v(this.name),g=c==="html"?"<br/>":`
`;return(a!=null||n)&&(h+=g),n&&(h+=v(n),a!=null&&(h+=" : ")),a!=null&&(h+=v(i)),h},getData:function(){return this._data},setData:function(l){this._data=l}});A.mixin(o,C);var u=o;X.exports=u},44005:function(X,z,e){var M=e(3440),F=e(31879),R=M.extendComponentView({type:"marker",init:function(){this.markerGroupMap=F.createHashMap()},render:function(A,T,D){var b=this.markerGroupMap;b.each(function(f){f.__keep=!1});var C=this.type+"Model";T.eachSeries(function(f){var v=f[C];v&&this.renderSeries(f,v,T,D)},this),b.each(function(f){!f.__keep&&this.group.remove(f.group)},this)},renderSeries:function(){}});X.exports=R},67975:function(X,z,e){var M=e(31879),F=e(48354),R=e(53618),A=R.isDimensionStacked,T=M.indexOf;function D(c){return!(isNaN(parseFloat(c.x))&&isNaN(parseFloat(c.y)))}function b(c){return!isNaN(parseFloat(c.x))&&!isNaN(parseFloat(c.y))}function C(c,x,a,i,n,h){var g=[],d=A(x,i),y=d?x.getCalculationInfo("stackResultDimension"):i,p=s(x,y,c),w=x.indicesOfNearest(y,p)[0];g[n]=x.get(a,w),g[h]=x.get(y,w);var S=x.get(i,w),O=F.getPrecision(x.get(i,w));return O=Math.min(O,20),O>=0&&(g[h]=+g[h].toFixed(O)),[g,S]}var f=M.curry,v={min:f(C,"min"),max:f(C,"max"),average:f(C,"average")};function m(c,x){var a=c.getData(),i=c.coordinateSystem;if(x&&!b(x)&&!M.isArray(x.coord)&&i){var n=i.dimensions,h=o(x,a,i,c);if(x=M.clone(x),x.type&&v[x.type]&&h.baseAxis&&h.valueAxis){var g=T(n,h.baseAxis.dim),d=T(n,h.valueAxis.dim),y=v[x.type](a,h.baseDataDim,h.valueDataDim,g,d);x.coord=y[0],x.value=y[1]}else{for(var p=[x.xAxis!=null?x.xAxis:x.radiusAxis,x.yAxis!=null?x.yAxis:x.angleAxis],w=0;w<2;w++)v[p[w]]&&(p[w]=s(a,a.mapDimension(n[w]),p[w]));x.coord=p}}return x}function o(c,x,a,i){var n={};return c.valueIndex!=null||c.valueDim!=null?(n.valueDataDim=c.valueIndex!=null?x.getDimension(c.valueIndex):c.valueDim,n.valueAxis=a.getAxis(u(i,n.valueDataDim)),n.baseAxis=a.getOtherAxis(n.valueAxis),n.baseDataDim=x.mapDimension(n.baseAxis.dim)):(n.baseAxis=i.getBaseAxis(),n.valueAxis=a.getOtherAxis(n.baseAxis),n.baseDataDim=x.mapDimension(n.baseAxis.dim),n.valueDataDim=x.mapDimension(n.valueAxis.dim)),n}function u(c,x){var a=c.getData(),i=a.dimensions;x=a.getDimension(x);for(var n=0;n<i.length;n++){var h=a.getDimensionInfo(i[n]);if(h.name===x)return h.coordDim}}function l(c,x){return c&&c.containData&&x.coord&&!D(x)?c.containData(x.coord):!0}function r(c,x,a,i){return i<2?c.coord&&c.coord[i]:c.value}function s(c,x,a){if(a==="average"){var i=0,n=0;return c.each(x,function(h,g){isNaN(h)||(i+=h,n++)}),i/n}else return a==="median"?c.getMedian(x):c.getDataExtent(x,!0)[a==="max"?1:0]}z.dataTransform=m,z.getAxisInfo=o,z.dataFilter=l,z.dimValueGetter=r,z.numCalculate=s},60804:function(X,z,e){var M=e(3440),F=e(31879),R=e(1655),A=e(49224);e(39302),e(54084),e(59647);var T=5;M.extendComponentView({type:"parallel",render:function(C,f,v){this._model=C,this._api=v,this._handlers||(this._handlers={},F.each(D,function(m,o){v.getZr().on(o,this._handlers[o]=F.bind(m,this))},this)),R.createOrUpdate(this,"_throttledDispatchExpand",C.get("axisExpandRate"),"fixRate")},dispose:function(C,f){F.each(this._handlers,function(v,m){f.getZr().off(m,v)}),this._handlers=null},_throttledDispatchExpand:function(C){this._dispatchExpand(C)},_dispatchExpand:function(C){C&&this._api.dispatchAction(F.extend({type:"parallelAxisExpand"},C))}});var D={mousedown:function(C){b(this,"click")&&(this._mouseDownPoint=[C.offsetX,C.offsetY])},mouseup:function(C){var f=this._mouseDownPoint;if(b(this,"click")&&f){var v=[C.offsetX,C.offsetY],m=Math.pow(f[0]-v[0],2)+Math.pow(f[1]-v[1],2);if(m>T)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([C.offsetX,C.offsetY]);o.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(C){if(!(this._mouseDownPoint||!b(this,"mousemove"))){var f=this._model,v=f.coordinateSystem.getSlidedAxisExpandWindow([C.offsetX,C.offsetY]),m=v.behavior;m==="jump"&&this._throttledDispatchExpand.debounceNextCall(f.get("axisExpandDebounce")),this._throttledDispatchExpand(m==="none"?null:{axisExpandWindow:v.axisExpandWindow,animation:m==="jump"?null:!1})}}};function b(C,f){var v=C._model;return v.get("axisExpandable")&&v.get("axisExpandTriggerOn")===f}M.registerPreprocessor(A)},59647:function(X,z,e){e(39302),e(93847),e(55489)},69124:function(X,z,e){var M=e(3440),F=e(31879),R=e(24741);e(68137),e(71883),e(97534),e(44344),e(47438),M.registerLayout(F.curry(R,"bar")),M.extendComponentView({type:"polar"})},64041:function(X,z,e){e(25390),e(96034),e(64702)},64702:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(31879),T=e(10030),D=e(48070),b=["axisLine","axisTickLabel","axisName"],C=R.extendComponentView({type:"radar",render:function(f,v,m){var o=this.group;o.removeAll(),this._buildAxes(f),this._buildSplitLineAndArea(f)},_buildAxes:function(f){var v=f.coordinateSystem,m=v.getIndicatorAxes(),o=A.map(m,function(u){var l=new T(u.model,{position:[v.cx,v.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});A.each(o,function(u){A.each(b,u.add,u),this.group.add(u.getGroup())},this)},_buildSplitLineAndArea:function(f){var v=f.coordinateSystem,m=v.getIndicatorAxes();if(!m.length)return;var o=f.get("shape"),u=f.getModel("splitLine"),l=f.getModel("splitArea"),r=u.getModel("lineStyle"),s=l.getModel("areaStyle"),c=u.get("show"),x=l.get("show"),a=r.get("color"),i=s.get("color");a=A.isArray(a)?a:[a],i=A.isArray(i)?i:[i];var n=[],h=[];function g(I,G,W){var Z=W%G.length;return I[Z]=I[Z]||[],Z}if(o==="circle")for(var d=m[0].getTicksCoords(),y=v.cx,p=v.cy,w=0;w<d.length;w++){if(c){var S=g(n,a,w);n[S].push(new D.Circle({shape:{cx:y,cy:p,r:d[w].coord}}))}if(x&&w<d.length-1){var S=g(h,i,w);h[S].push(new D.Ring({shape:{cx:y,cy:p,r0:d[w].coord,r:d[w+1].coord}}))}}else for(var O,B=A.map(m,function(I,G){var W=I.getTicksCoords();return O=O==null?W.length-1:Math.min(W.length-1,O),A.map(W,function(Z){return v.coordToPoint(Z.coord,G)})}),k=[],w=0;w<=O;w++){for(var P=[],L=0;L<m.length;L++)P.push(B[L][w]);if(P[0]&&P.push(P[0].slice()),c){var S=g(n,a,w);n[S].push(new D.Polyline({shape:{points:P}}))}if(x&&k){var S=g(h,i,w-1);h[S].push(new D.Polygon({shape:{points:P.concat(k)}}))}k=P.slice().reverse()}var E=r.getLineStyle(),N=s.getAreaStyle();A.each(h,function(I,G){this.group.add(D.mergePath(I,{style:A.defaults({stroke:"none",fill:i[G%i.length]},N),silent:!0}))},this),A.each(n,function(I,G){this.group.add(D.mergePath(I,{style:A.defaults({fill:"none",stroke:a[G%a.length]},E),silent:!0}))},this)}});X.exports=C},97534:function(X,z,e){e(68137),e(93915)},54843:function(X,z,e){var M=e(3440);e(65178),e(30278),e(52639),e(44344),e(74139),M.extendComponentView({type:"single"})},41634:function(X,z,e){var M=e(3440),F=e(59366);e(45473),e(41492),e(42206),e(31296),M.registerPreprocessor(F)},42206:function(X,z,e){var M=e(31879),F=e(21526),R=e(82370),A=F.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});M.mixin(A,R);var T=A;X.exports=T},31296:function(X,z,e){var M=e(31879),F=e(95946),R=e(43970),A=e(48070),T=e(30871),D=e(31052),b=e(85264),C=e(35730),f=C.createSymbol,v=e(99538),m=e(48354),o=e(17795),u=o.encodeHTML,l=M.bind,r=M.each,s=Math.PI,c=D.extend({type:"timeline.slider",init:function(h,g){this.api=g,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(h,g,d,y){if(this.model=h,this.api=d,this.ecModel=g,this.group.removeAll(),h.get("show",!0)){var p=this._layout(h,d),w=this._createGroup("mainGroup"),S=this._createGroup("labelGroup"),O=this._axis=this._createAxis(p,h);h.formatTooltip=function(B){return u(O.scale.getLabel(B))},r(["AxisLine","AxisTick","Control","CurrentPointer"],function(B){this["_render"+B](p,w,O,h)},this),this._renderAxisLabel(p,S,O,h),this._position(p,h)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(h,g){var d=h.get("label.position"),y=h.get("orient"),p=x(h,g);d==null||d==="auto"?d=y==="horizontal"?p.y+p.height/2<g.getHeight()/2?"-":"+":p.x+p.width/2<g.getWidth()/2?"+":"-":isNaN(d)&&(d={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[y][d]);var w={horizontal:"center",vertical:d>=0||d==="+"?"left":"right"},S={horizontal:d>=0||d==="+"?"top":"bottom",vertical:"middle"},O={horizontal:0,vertical:s/2},B=y==="vertical"?p.height:p.width,k=h.getModel("controlStyle"),P=k.get("show",!0),L=P?k.get("itemSize"):0,E=P?k.get("itemGap"):0,N=L+E,I=h.get("label.rotate")||0;I=I*s/180;var G,W,Z,U,H=k.get("position",!0),V=P&&k.get("showPlayBtn",!0),Y=P&&k.get("showPrevBtn",!0),$=P&&k.get("showNextBtn",!0),K=0,J=B;return H==="left"||H==="bottom"?(V&&(G=[0,0],K+=N),Y&&(W=[K,0],K+=N),$&&(Z=[J-L,0],J-=N)):(V&&(G=[J-L,0],J-=N),Y&&(W=[0,0],K+=N),$&&(Z=[J-L,0],J-=N)),U=[K,J],h.get("inverse")&&U.reverse(),{viewRect:p,mainLength:B,orient:y,rotation:O[y],labelRotation:I,labelPosOpt:d,labelAlign:h.get("label.align")||w[y],labelBaseline:h.get("label.verticalAlign")||h.get("label.baseline")||S[y],playPosition:G,prevBtnPosition:W,nextBtnPosition:Z,axisExtent:U,controlSize:L,controlGap:E}},_position:function(h,g){var d=this._mainGroup,y=this._labelGroup,p=h.viewRect;if(h.orient==="vertical"){var w=R.create(),S=p.x,O=p.y+p.height;R.translate(w,w,[-S,-O]),R.rotate(w,w,-s/2),R.translate(w,w,[S,O]),p=p.clone(),p.applyTransform(w)}var B=W(p),k=W(d.getBoundingRect()),P=W(y.getBoundingRect()),L=d.position,E=y.position;E[0]=L[0]=B[0][0];var N=h.labelPosOpt;if(isNaN(N)){var I=N==="+"?0:1;Z(L,k,B,1,I),Z(E,P,B,1,1-I)}else{var I=N>=0?0:1;Z(L,k,B,1,I),E[1]=L[1]+N}d.attr("position",L),y.attr("position",E),d.rotation=y.rotation=h.rotation,G(d),G(y);function G(U){var H=U.position;U.origin=[B[0][0]-H[0],B[1][0]-H[1]]}function W(U){return[[U.x,U.x+U.width],[U.y,U.y+U.height]]}function Z(U,H,V,Y,$){U[Y]+=V[Y][$]-H[Y][$]}},_createAxis:function(h,g){var d=g.getData(),y=g.get("axisType"),p=v.createScaleByModel(g,y);p.getTicks=function(){return d.mapArray(["value"],function(O){return O})};var w=d.getDataExtent("value");p.setExtent(w[0],w[1]),p.niceTicks();var S=new b("value",p,h.axisExtent,y);return S.model=g,S},_createGroup:function(h){var g=this["_"+h]=new A.Group;return this.group.add(g),g},_renderAxisLine:function(h,g,d,y){var p=d.getExtent();y.get("lineStyle.show")&&g.add(new A.Line({shape:{x1:p[0],y1:0,x2:p[1],y2:0},style:M.extend({lineCap:"round"},y.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(h,g,d,y){var p=y.getData(),w=d.scale.getTicks();r(w,function(S){var O=d.dataToCoord(S),B=p.getItemModel(S),k=B.getModel("itemStyle"),P=B.getModel("emphasis.itemStyle"),L={position:[O,0],onclick:l(this._changeTimeline,this,S)},E=i(B,k,g,L);A.setHoverStyle(E,P.getItemStyle()),B.get("tooltip")?(E.dataIndex=S,E.dataModel=y):E.dataIndex=E.dataModel=null},this)},_renderAxisLabel:function(h,g,d,y){var p=d.getLabelModel();if(p.get("show")){var w=y.getData(),S=d.getViewLabels();r(S,function(O){var B=O.tickValue,k=w.getItemModel(B),P=k.getModel("label"),L=k.getModel("emphasis.label"),E=d.dataToCoord(O.tickValue),N=new A.Text({position:[E,0],rotation:h.labelRotation-h.rotation,onclick:l(this._changeTimeline,this,B),silent:!1});A.setTextStyle(N.style,P,{text:O.formattedLabel,textAlign:h.labelAlign,textVerticalAlign:h.labelBaseline}),g.add(N),A.setHoverStyle(N,A.setTextStyle({},L))},this)}},_renderControl:function(h,g,d,y){var p=h.controlSize,w=h.rotation,S=y.getModel("controlStyle").getItemStyle(),O=y.getModel("emphasis.controlStyle").getItemStyle(),B=[0,-p/2,p,p],k=y.getPlayState(),P=y.get("inverse",!0);L(h.nextBtnPosition,"controlStyle.nextIcon",l(this._changeTimeline,this,P?"-":"+")),L(h.prevBtnPosition,"controlStyle.prevIcon",l(this._changeTimeline,this,P?"+":"-")),L(h.playPosition,"controlStyle."+(k?"stopIcon":"playIcon"),l(this._handlePlayClick,this,!k),!0);function L(E,N,I,G){if(E){var W={position:E,origin:[p/2,0],rotation:G?-w:0,rectHover:!0,style:S,onclick:I},Z=a(y,N,B,W);g.add(Z),A.setHoverStyle(Z,O)}}},_renderCurrentPointer:function(h,g,d,y){var p=y.getData(),w=y.getCurrentIndex(),S=p.getItemModel(w).getModel("checkpointStyle"),O=this,B={onCreate:function(k){k.draggable=!0,k.drift=l(O._handlePointerDrag,O),k.ondragend=l(O._handlePointerDragend,O),n(k,w,d,y,!0)},onUpdate:function(k){n(k,w,d,y)}};this._currentPointer=i(S,S,this._mainGroup,{},this._currentPointer,B)},_handlePlayClick:function(h){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:h,from:this.uid})},_handlePointerDrag:function(h,g,d){this._clearTimer(),this._pointerChangeTimeline([d.offsetX,d.offsetY])},_handlePointerDragend:function(h){this._pointerChangeTimeline([h.offsetX,h.offsetY],!0)},_pointerChangeTimeline:function(h,g){var d=this._toAxisCoord(h)[0],y=this._axis,p=m.asc(y.getExtent().slice());d>p[1]&&(d=p[1]),d<p[0]&&(d=p[0]),this._currentPointer.position[0]=d,this._currentPointer.dirty();var w=this._findNearestTick(d),S=this.model;(g||w!==S.getCurrentIndex()&&S.get("realtime"))&&this._changeTimeline(w)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(l(h,this),this.model.get("playInterval")));function h(){var g=this.model;this._changeTimeline(g.getCurrentIndex()+(g.get("rewind",!0)?-1:1))}},_toAxisCoord:function(h){var g=this._mainGroup.getLocalTransform();return A.applyTransform(h,g,!0)},_findNearestTick:function(h){var g=this.model.getData(),d=1/0,y,p=this._axis;return g.each(["value"],function(w,S){var O=p.dataToCoord(w),B=Math.abs(O-h);B<d&&(d=B,y=S)}),y},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(h){var g=this.model.getCurrentIndex();h==="+"?h=g+1:h==="-"&&(h=g-1),this.api.dispatchAction({type:"timelineChange",currentIndex:h,from:this.uid})}});function x(h,g){return T.getLayoutRect(h.getBoxLayoutParams(),{width:g.getWidth(),height:g.getHeight()},h.get("padding"))}function a(h,g,d,y){var p=y.style,w=A.createIcon(h.get(g),y||{},new F(d[0],d[1],d[2],d[3]));return p&&w.setStyle(p),w}function i(h,g,d,y,p,w){var S=g.get("color");if(p)p.setColor(S),d.add(p),w&&w.onUpdate(p);else{var O=h.get("symbol");p=f(O,-1,-1,2,2,S),p.setStyle("strokeNoScale",!0),d.add(p),w&&w.onCreate(p)}var B=g.getItemStyle(["color","symbol","symbolSize"]);p.setStyle(B),y=M.merge({rectHover:!0,z2:100},y,!0);var k=h.get("symbolSize");k=k instanceof Array?k.slice():[+k,+k],k[0]/=2,k[1]/=2,y.scale=k;var P=h.get("symbolOffset");if(P){var L=y.position=y.position||[0,0];L[0]+=m.parsePercent(P[0],k[0]),L[1]+=m.parsePercent(P[1],k[1])}var E=h.get("symbolRotate");return y.rotation=(E||0)*Math.PI/180||0,p.attr(y),p.updateTransform(),p}function n(h,g,d,y,p){if(!h.dragging){var w=y.getModel("checkpointStyle"),S=d.dataToCoord(y.getData().get(["value"],g));p||!w.get("animation",!0)?h.attr({position:[S,0]}):(h.stopAnimation(!0),h.animateTo({position:[S,0]},w.get("animationDuration",!0),w.get("animationEasing",!0)))}}X.exports=c},85264:function(X,z,e){var M=e(31879),F=e(36492),R=function(T,D,b,C){F.call(this,T,D,b),this.type=C||"value",this.model=null};R.prototype={constructor:R,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return this.model.get("orient")==="horizontal"}},M.inherits(R,F);var A=R;X.exports=A},21526:function(X,z,e){var M=e(31879),F=e(60684),R=e(58677),A=e(35454),T=F.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(b,C,f){this._data,this._names,this.mergeDefaultAndTheme(b,f),this._initData()},mergeOption:function(b){T.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(b){b==null&&(b=this.option.currentIndex);var C=this._data.count();this.option.loop?b=(b%C+C)%C:(b>=C&&(b=C-1),b<0&&(b=0)),this.option.currentIndex=b},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(b){this.option.autoPlay=!!b},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var b=this.option,C=b.data||[],f=b.axisType,v=this._names=[];if(f==="category"){var m=[];M.each(C,function(l,r){var s=A.getDataItemValue(l),c;M.isObject(l)?(c=M.clone(l),c.value=r):c=r,m.push(c),!M.isString(s)&&(s==null||isNaN(s))&&(s=""),v.push(s+"")}),C=m}var o={category:"ordinal",time:"time"}[f]||"number",u=this._data=new R([{name:"value",type:o}],this);u.initData(C,v)},getData:function(){return this._data},getCategories:function(){if(this.get("axisType")==="category")return this._names.slice()}}),D=T;X.exports=D},31052:function(X,z,e){var M=e(53646),F=M.extend({type:"timeline"});X.exports=F},59366:function(X,z,e){var M=e(31879);function F(D){var b=D&&D.timeline;M.isArray(b)||(b=b?[b]:[]),M.each(b,function(C){C&&R(C)})}function R(D){var b=D.type,C={number:"value",time:"time"};if(C[b]&&(D.axisType=C[b],delete D.type),A(D),T(D,"controlPosition")){var f=D.controlStyle||(D.controlStyle={});T(f,"position")||(f.position=D.controlPosition),f.position==="none"&&!T(f,"show")&&(f.show=!1,delete f.position),delete D.controlPosition}M.each(D.data||[],function(v){M.isObject(v)&&!M.isArray(v)&&(!T(v,"value")&&T(v,"name")&&(v.value=v.name),A(v))})}function A(D){var b=D.itemStyle||(D.itemStyle={}),C=b.emphasis||(b.emphasis={}),f=D.label||D.label||{},v=f.normal||(f.normal={}),m={normal:1,emphasis:1};M.each(f,function(o,u){!m[u]&&!T(v,u)&&(v[u]=o)}),C.label&&!T(f,"emphasis")&&(f.emphasis=C.label,delete C.label)}function T(D,b){return D.hasOwnProperty(b)}X.exports=F},41492:function(X,z,e){var M=e(3440),F=e(31879);M.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(R,A){var T=A.getComponent("timeline");return T&&R.currentIndex!=null&&(T.setCurrentIndex(R.currentIndex),!T.get("loop",!0)&&T.isIndexMax()&&T.setPlayState(!1)),A.resetOption("timeline"),F.defaults({currentIndex:T.option.currentIndex},R)}),M.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(R,A){var T=A.getComponent("timeline");T&&R.playState!=null&&T.setPlayState(R.playState)})},45473:function(X,z,e){var M=e(60684);M.registerSubTypeDefaulter("timeline",function(){return"slider"})},51838:function(X,z,e){var M=e(31879),F=e(3440),R=e(48070),A=e(30871),T=A.getLayoutRect,D=e(17795),b=D.windowOpen;F.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),F.extendComponentView({type:"title",render:function(C,f,v){if(this.group.removeAll(),!!C.get("show")){var m=this.group,o=C.getModel("textStyle"),u=C.getModel("subtextStyle"),l=C.get("textAlign"),r=M.retrieve2(C.get("textBaseline"),C.get("textVerticalAlign")),s=new R.Text({style:R.setTextStyle({},o,{text:C.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),c=s.getBoundingRect(),x=C.get("subtext"),a=new R.Text({style:R.setTextStyle({},u,{text:x,textFill:u.getTextColor(),y:c.height+C.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),i=C.get("link"),n=C.get("sublink"),h=C.get("triggerEvent",!0);s.silent=!i&&!h,a.silent=!n&&!h,i&&s.on("click",function(){b(i,"_"+C.get("target"))}),n&&a.on("click",function(){b(n,"_"+C.get("subtarget"))}),s.eventData=a.eventData=h?{componentType:"title",componentIndex:C.componentIndex}:null,m.add(s),x&&m.add(a);var g=m.getBoundingRect(),d=C.getBoxLayoutParams();d.width=g.width,d.height=g.height;var y=T(d,{width:v.getWidth(),height:v.getHeight()},C.get("padding"));l||(l=C.get("left")||C.get("right"),l==="middle"&&(l="center"),l==="right"?y.x+=y.width:l==="center"&&(y.x+=y.width/2)),r||(r=C.get("top")||C.get("bottom"),r==="center"&&(r="middle"),r==="bottom"?y.y+=y.height:r==="middle"&&(y.y+=y.height/2),r=r||"top"),m.attr("position",[y.x,y.y]);var p={textAlign:l,textVerticalAlign:r};s.setStyle(p),a.setStyle(p),g=m.getBoundingRect();var w=y.margin,S=C.getItemStyle(["color","opacity"]);S.fill=C.get("backgroundColor");var O=new R.Rect({shape:{x:g.x-w[3],y:g.y-w[0],width:g.width+w[1]+w[3],height:g.height+w[0]+w[2],r:C.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});m.add(O)}}})},1498:function(X,z,e){e(55392),e(85418),e(68231),e(70640),e(45828),e(90320),e(90014)},55392:function(X,z,e){var M=e(3440),F=e(31879),R=e(68120),A=M.extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){A.superApply(this,"optionUpdated",arguments),F.each(this.option.feature,function(D,b){var C=R.get(b);C&&F.merge(D,C.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}}),T=A;X.exports=T},85418:function(X,z,e){var M=e(3440),F=e(31879),R=e(72113),A=e(68120),T=e(48070),D=e(56785),b=e(65453),C=e(23907),f=M.extendComponentView({type:"toolbox",render:function(m,o,u,l){var r=this.group;if(r.removeAll(),!m.get("show"))return;var s=+m.get("itemSize"),c=m.get("feature")||{},x=this._features||(this._features={}),a=[];F.each(c,function(h,g){a.push(g)}),new b(this._featureNames||[],a).add(i).update(i).remove(F.curry(i,null)).execute(),this._featureNames=a;function i(h,g){var d=a[h],y=a[g],p=c[d],w=new D(p,m,m.ecModel),S;if(l&&l.newTitle!=null&&l.featureName===d&&(p.title=l.newTitle),d&&!y){if(v(d))S={model:w,onclick:w.option.onclick,featureName:d};else{var O=A.get(d);if(!O)return;S=new O(w,o,u)}x[d]=S}else{if(S=x[y],!S)return;S.model=w,S.ecModel=o,S.api=u}if(!d&&y){S.dispose&&S.dispose(o,u);return}if(!w.get("show")||S.unusable){S.remove&&S.remove(o,u);return}n(w,S,d),w.setIconStatus=function(B,k){var P=this.option,L=this.iconPaths;P.iconStatus=P.iconStatus||{},P.iconStatus[B]=k,L[B]&&L[B].trigger(k)},S.render&&S.render(w,o,u,l)}function n(h,g,d){var y=h.getModel("iconStyle"),p=h.getModel("emphasis.iconStyle"),w=g.getIcons?g.getIcons():h.get("icon"),S=h.get("title")||{};if(typeof w=="string"){var O=w,B=S;w={},S={},w[d]=O,S[d]=B}var k=h.iconPaths={};F.each(w,function(P,L){var E=T.createIcon(P,{},{x:-s/2,y:-s/2,width:s,height:s});E.setStyle(y.getItemStyle()),E.hoverStyle=p.getItemStyle(),E.setStyle({text:S[L],textAlign:p.get("textAlign"),textBorderRadius:p.get("textBorderRadius"),textPadding:p.get("textPadding"),textFill:null});var N=m.getModel("tooltip");N&&N.get("show")&&E.attr("tooltip",F.extend({content:S[L],formatter:N.get("formatter",!0)||function(){return S[L]},formatterParams:{componentType:"toolbox",name:L,title:S[L],$vars:["name","title"]},position:N.get("position",!0)||"bottom"},N.option)),T.setHoverStyle(E),m.get("showTitle")&&(E.__title=S[L],E.on("mouseover",function(){var I=p.getItemStyle(),G=m.get("orient")==="vertical"?m.get("right")==null?"right":"left":m.get("bottom")==null?"bottom":"top";E.setStyle({textFill:p.get("textFill")||I.fill||I.stroke||"#000",textBackgroundColor:p.get("textBackgroundColor"),textPosition:p.get("textPosition")||G})}).on("mouseout",function(){E.setStyle({textFill:null,textBackgroundColor:null})})),E.trigger(h.get("iconStatus."+L)||"normal"),r.add(E),E.on("click",F.bind(g.onclick,g,o,u,L)),k[L]=E})}C.layout(r,m,u),r.add(C.makeBackground(r.getBoundingRect(),m)),r.eachChild(function(h){var g=h.__title,d=h.hoverStyle;if(d&&g){var y=R.getBoundingRect(g,R.makeFont(d)),p=h.position[0]+r.position[0],w=h.position[1]+r.position[1]+s,S=!1;w+y.height>u.getHeight()&&(d.textPosition="top",S=!0);var O=S?-5-y.height:s+8;p+y.width/2>u.getWidth()?(d.textPosition=["100%",O],d.textAlign="right"):p-y.width/2<0&&(d.textPosition=[0,O],d.textAlign="left")}})},updateView:function(m,o,u,l){F.each(this._features,function(r){r.updateView&&r.updateView(r.model,o,u,l)})},remove:function(m,o){F.each(this._features,function(u){u.remove&&u.remove(m,o)}),this.group.removeAll()},dispose:function(m,o){F.each(this._features,function(u){u.dispose&&u.dispose(m,o)})}});function v(m){return m.indexOf("my")===0}X.exports=f},68120:function(X,z){var e={};function M(R,A){e[R]=A}function F(R){return e[R]}z.register=M,z.get=F},44562:function(X,z,e){var M=e(31879),F=e(68120),R=e(16923),A=R.toolbox.brush;function T(C,f,v){this.model=C,this.ecModel=f,this.api=v,this._brushType,this._brushMode}T.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:M.clone(A.title)};var D=T.prototype;D.render=D.updateView=function(C,f,v){var m,o,u;f.eachComponent({mainType:"brush"},function(l){m=l.brushType,o=l.brushOption.brushMode||"single",u|=l.areas.length}),this._brushType=m,this._brushMode=o,M.each(C.get("type",!0),function(l){C.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?u:l===m)?"emphasis":"normal")})},D.getIcons=function(){var C=this.model,f=C.get("icon",!0),v={};return M.each(C.get("type",!0),function(m){f[m]&&(v[m]=f[m])}),v},D.onclick=function(C,f,v){var m=this._brushType,o=this._brushMode;v==="clear"?(f.dispatchAction({type:"axisAreaSelect",intervals:[]}),f.dispatchAction({type:"brush",command:"clear",areas:[]})):f.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:v==="keep"?m:m===v?!1:v,brushMode:v==="keep"?o==="multiple"?"single":"multiple":o}})},F.register("brush",T);var b=T;X.exports=b},45828:function(X,z,e){var M=e(3440),F=e(31879),R=e(19756),A=e(16923),T=e(68120),D=A.toolbox.dataView,b=new Array(60).join("-"),C="	";function f(h){var g={},d=[],y=[];return h.eachRawSeries(function(p){var w=p.coordinateSystem;if(w&&(w.type==="cartesian2d"||w.type==="polar")){var S=w.getBaseAxis();if(S.type==="category"){var O=S.dim+"_"+S.index;g[O]||(g[O]={categoryAxis:S,valueAxis:w.getOtherAxis(S),series:[]},y.push({axisDim:S.dim,axisIndex:S.index})),g[O].series.push(p)}else d.push(p)}else d.push(p)}),{seriesGroupByCategoryAxis:g,other:d,meta:y}}function v(h){var g=[];return F.each(h,function(d,y){var p=d.categoryAxis,w=d.valueAxis,S=w.dim,O=[" "].concat(F.map(d.series,function(N){return N.name})),B=[p.model.getCategories()];F.each(d.series,function(N){var I=N.getRawData();B.push(N.getRawData().mapArray(I.mapDimension(S),function(G){return G}))});for(var k=[O.join(C)],P=0;P<B[0].length;P++){for(var L=[],E=0;E<B.length;E++)L.push(B[E][P]);k.push(L.join(C))}g.push(k.join(`
`))}),g.join(`

`+b+`

`)}function m(h){return F.map(h,function(g){var d=g.getRawData(),y=[g.name],p=[];return d.each(d.dimensions,function(){for(var w=arguments.length,S=arguments[w-1],O=d.getName(S),B=0;B<w-1;B++)p[B]=arguments[B];y.push((O?O+C:"")+p.join(C))}),y.join(`
`)}).join(`

`+b+`

`)}function o(h){var g=f(h);return{value:F.filter([v(g.seriesGroupByCategoryAxis),m(g.other)],function(d){return d.replace(/[\n\t\s]/g,"")}).join(`

`+b+`

`),meta:g.meta}}function u(h){return h.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function l(h){var g=h.slice(0,h.indexOf(`
`));if(g.indexOf(C)>=0)return!0}var r=new RegExp("["+C+"]+","g");function s(h){for(var g=h.split(/\n+/g),d=u(g.shift()).split(r),y=[],p=F.map(d,function(B){return{name:B,data:[]}}),w=0;w<g.length;w++){var S=u(g[w]).split(r);y.push(S.shift());for(var O=0;O<S.length;O++)p[O]&&(p[O].data[w]=S[O])}return{series:p,categories:y}}function c(h){for(var g=h.split(/\n+/g),d=u(g.shift()),y=[],p=0;p<g.length;p++){var w=u(g[p]);if(w){var S=w.split(r),O="",B,k=!1;isNaN(S[0])?(k=!0,O=S[0],S=S.slice(1),y[p]={name:O,value:[]},B=y[p].value):B=y[p]=[];for(var P=0;P<S.length;P++)B.push(+S[P]);B.length===1&&(k?y[p].value=B[0]:y[p]=B[0])}}return{name:d,data:y}}function x(h,g){var d=h.split(new RegExp(`
*`+b+`
*`,"g")),y={series:[]};return F.each(d,function(p,w){if(l(p)){var S=s(p),O=g[w],B=O.axisDim+"Axis";O&&(y[B]=y[B]||[],y[B][O.axisIndex]={data:S.categories},y.series=y.series.concat(S.series))}else{var S=c(p);y.series.push(S)}}),y}function a(h){this._dom=null,this.model=h}a.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:F.clone(D.title),lang:F.clone(D.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},a.prototype.onclick=function(h,g){var d=g.getDom(),y=this.model;this._dom&&d.removeChild(this._dom);var p=document.createElement("div");p.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",p.style.backgroundColor=y.get("backgroundColor")||"#fff";var w=document.createElement("h4"),S=y.get("lang")||[];w.innerHTML=S[0]||y.get("title"),w.style.cssText="margin: 10px 20px;",w.style.color=y.get("textColor");var O=document.createElement("div"),B=document.createElement("textarea");O.style.cssText="display:block;width:100%;overflow:auto;";var k=y.get("optionToContent"),P=y.get("contentToOption"),L=o(h);if(typeof k=="function"){var E=k(g.getOption());typeof E=="string"?O.innerHTML=E:F.isDom(E)&&O.appendChild(E)}else O.appendChild(B),B.readOnly=y.get("readOnly"),B.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",B.style.color=y.get("textColor"),B.style.borderColor=y.get("textareaBorderColor"),B.style.backgroundColor=y.get("textareaColor"),B.value=L.value;var N=L.meta,I=document.createElement("div");I.style.cssText="position:absolute;bottom:0;left:0;right:0;";var G="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",W=document.createElement("div"),Z=document.createElement("div");G+=";background-color:"+y.get("buttonColor"),G+=";color:"+y.get("buttonTextColor");var U=this;function H(){d.removeChild(p),U._dom=null}R.addEventListener(W,"click",H),R.addEventListener(Z,"click",function(){var V;try{typeof P=="function"?V=P(O,g.getOption()):V=x(B.value,N)}catch(Y){throw H(),new Error("Data view format error "+Y)}V&&g.dispatchAction({type:"changeDataView",newOption:V}),H()}),W.innerHTML=S[1],Z.innerHTML=S[2],Z.style.cssText=G,W.style.cssText=G,!y.get("readOnly")&&I.appendChild(Z),I.appendChild(W),p.appendChild(w),p.appendChild(O),p.appendChild(I),O.style.height=d.clientHeight-80+"px",d.appendChild(p),this._dom=p},a.prototype.remove=function(h,g){this._dom&&g.getDom().removeChild(this._dom)},a.prototype.dispose=function(h,g){this.remove(h,g)};function i(h,g){return F.map(h,function(d,y){var p=g&&g[y];if(F.isObject(p)&&!F.isArray(p)){var w=F.isObject(d)&&!F.isArray(d);w||(d={value:d});var S=p.name!=null&&d.name==null;return d=F.defaults(d,p),S&&delete d.name,d}else return d})}T.register("dataView",a),M.registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(h,g){var d=[];F.each(h.newOption.series,function(y){var p=g.getSeriesByName(y.name)[0];if(!p)d.push(F.extend({type:"scatter"},y));else{var w=p.get("data");d.push({name:y.name,data:i(y.data,w)})}}),g.mergeOption(F.defaults({series:d},h.newOption))});var n=a;X.exports=n},90320:function(X,z,e){var M=e(3440),F=e(31879),R=e(12968),A=e(99516),T=e(83406),D=e(38289),b=e(16923),C=e(68120);e(41632);var f=b.toolbox.dataZoom,v=F.each,m="\0_ec_\0toolbox-dataZoom_";function o(a,i,n){(this._brushController=new R(n.getZr())).on("brush",F.bind(this._onBrush,this)).mount(),this._isZoomActive}o.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:F.clone(f.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var u=o.prototype;u.render=function(a,i,n,h){this.model=a,this.ecModel=i,this.api=n,c(a,i,this,h,n),s(a,i)},u.onclick=function(a,i,n){l[n].call(this)},u.remove=function(a,i){this._brushController.unmount()},u.dispose=function(a,i){this._brushController.dispose()};var l={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(T.pop(this.ecModel))}};u._onBrush=function(a,i){if(!i.isEnd||!a.length)return;var n={},h=this.ecModel;this._brushController.updateCovers([]);var g=new A(r(this.model.option),h,{include:["grid"]});g.matchOutputRanges(a,h,function(p,w,S){if(S.type==="cartesian2d"){var O=p.brushType;O==="rect"?(d("x",S,w[0]),d("y",S,w[1])):d({lineX:"x",lineY:"y"}[O],S,w)}}),T.push(h,n),this._dispatchZoomAction(n);function d(p,w,S){var O=w.getAxis(p),B=O.model,k=y(p,B,h),P=k.findRepresentativeAxisProxy(B).getMinMaxSpan();(P.minValueSpan!=null||P.maxValueSpan!=null)&&(S=D(0,S.slice(),O.scale.getExtent(),0,P.minValueSpan,P.maxValueSpan)),k&&(n[k.id]={dataZoomId:k.id,startValue:S[0],endValue:S[1]})}function y(p,w,S){var O;return S.eachComponent({mainType:"dataZoom",subType:"select"},function(B){var k=B.getAxisModel(p,w.componentIndex);k&&(O=B)}),O}},u._dispatchZoomAction=function(a){var i=[];v(a,function(n,h){i.push(F.clone(n))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})};function r(a){var i={};return F.each(["xAxisIndex","yAxisIndex"],function(n){i[n]=a[n],i[n]==null&&(i[n]="all"),(i[n]===!1||i[n]==="none")&&(i[n]=[])}),i}function s(a,i){a.setIconStatus("back",T.count(i)>1?"emphasis":"normal")}function c(a,i,n,h,g){var d=n._isZoomActive;h&&h.type==="takeGlobalCursor"&&(d=h.key==="dataZoomSelect"?h.dataZoomSelectActive:!1),n._isZoomActive=d,a.setIconStatus("zoom",d?"emphasis":"normal");var y=new A(r(a.option),i,{include:["grid"]});n._brushController.setPanels(y.makePanelOpts(g,function(p){return p.xAxisDeclared&&!p.yAxisDeclared?"lineX":!p.xAxisDeclared&&p.yAxisDeclared?"lineY":"rect"})).enableBrush(d?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}C.register("dataZoom",o),M.registerPreprocessor(function(a){if(!a)return;var i=a.dataZoom||(a.dataZoom=[]);F.isArray(i)||(a.dataZoom=i=[i]);var n=a.toolbox;if(n&&(F.isArray(n)&&(n=n[0]),n&&n.feature)){var h=n.feature.dataZoom;g("xAxis",h),g("yAxis",h)}function g(y,p){if(p){var w=y+"Index",S=p[w];S!=null&&S!=="all"&&!F.isArray(S)&&(S=S===!1||S==="none"?[]:[S]),d(y,function(O,B){if(!(S!=null&&S!=="all"&&F.indexOf(S,B)===-1)){var k={type:"select",$fromToolbox:!0,filterMode:p.filterMode||"filter",id:m+y+B};k[w]=B,i.push(k)}})}}function d(y,p){var w=a[y];F.isArray(w)||(w=w?[w]:[]),v(w,p)}});var x=o;X.exports=x},70640:function(X,z,e){var M=e(3440),F=e(31879),R=e(16923),A=e(68120),T=R.toolbox.magicType,D="__ec_magicType_stack__";function b(o){this.model=o}b.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:F.clone(T.title),option:{},seriesIndex:{}};var C=b.prototype;C.getIcons=function(){var o=this.model,u=o.get("icon"),l={};return F.each(o.get("type"),function(r){u[r]&&(l[r]=u[r])}),l};var f={line:function(o,u,l,r){if(o==="bar")return F.merge({id:u,type:"line",data:l.get("data"),stack:l.get("stack"),markPoint:l.get("markPoint"),markLine:l.get("markLine")},r.get("option.line")||{},!0)},bar:function(o,u,l,r){if(o==="line")return F.merge({id:u,type:"bar",data:l.get("data"),stack:l.get("stack"),markPoint:l.get("markPoint"),markLine:l.get("markLine")},r.get("option.bar")||{},!0)},stack:function(o,u,l,r){var s=l.get("stack")===D;if(o==="line"||o==="bar")return r.setIconStatus("stack",s?"normal":"emphasis"),F.merge({id:u,stack:s?"":D},r.get("option.stack")||{},!0)}},v=[["line","bar"],["stack"]];C.onclick=function(o,u,l){var r=this.model,s=r.get("seriesIndex."+l);if(f[l]){var c={series:[]},x=function(n){var h=n.subType,g=n.id,d=f[l](h,g,n,r);d&&(F.defaults(d,n.option),c.series.push(d));var y=n.coordinateSystem;if(y&&y.type==="cartesian2d"&&(l==="line"||l==="bar")){var p=y.getAxesByScale("ordinal")[0];if(p){var w=p.dim,S=w+"Axis",O=o.queryComponents({mainType:S,index:n.get(name+"Index"),id:n.get(name+"Id")})[0],B=O.componentIndex;c[S]=c[S]||[];for(var k=0;k<=B;k++)c[S][B]=c[S][B]||{};c[S][B].boundaryGap=l==="bar"}}};F.each(v,function(n){F.indexOf(n,l)>=0&&F.each(n,function(h){r.setIconStatus(h,"normal")})}),r.setIconStatus(l,"emphasis"),o.eachComponent({mainType:"series",query:s==null?null:{seriesIndex:s}},x);var a;if(l==="stack"){var i=c.series&&c.series[0]&&c.series[0].stack===D;a=i?F.merge({stack:T.title.tiled},T.title):F.clone(T.title)}u.dispatchAction({type:"changeMagicType",currentType:l,newOption:c,newTitle:a,featureName:"magicType"})}},M.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(o,u){u.mergeOption(o.newOption)}),A.register("magicType",b);var m=b;X.exports=m},90014:function(X,z,e){var M=e(3440),F=e(83406),R=e(16923),A=e(68120),T=R.toolbox.restore;function D(f){this.model=f}D.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:T.title};var b=D.prototype;b.onclick=function(f,v,m){F.clear(f),v.dispatchAction({type:"restore",from:this.uid})},A.register("restore",D),M.registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(f,v){v.resetOption("recreate")});var C=D;X.exports=C},68231:function(X,z,e){var M=e(58020),F=e(16923),R=e(68120),A=F.toolbox.saveAsImage;function T(C){this.model=C}T.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:A.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:A.lang.slice()},T.prototype.unusable=!M.canvasSupported;var D=T.prototype;D.onclick=function(C,f){var v=this.model,m=v.get("name")||C.get("title.0.text")||"echarts",o=f.getZr().painter.getType()==="svg",u=o?"svg":v.get("type",!0)||"png",l=f.getConnectedDataURL({type:u,backgroundColor:v.get("backgroundColor",!0)||C.get("backgroundColor")||"#fff",connectedBackgroundColor:v.get("connectedBackgroundColor"),excludeComponents:v.get("excludeComponents"),pixelRatio:v.get("pixelRatio")});if(typeof MouseEvent=="function"&&!M.browser.ie&&!M.browser.edge){var r=document.createElement("a");r.download=m+"."+u,r.target="_blank",r.href=l;var s=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});r.dispatchEvent(s)}else if(window.navigator.msSaveOrOpenBlob){for(var c=atob(l.split(",")[1]),x=c.length,a=new Uint8Array(x);x--;)a[x]=c.charCodeAt(x);var i=new Blob([a]);window.navigator.msSaveOrOpenBlob(i,m+"."+u)}else{var n=v.get("lang"),h='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(n&&n[0]||"")+'" /></body>',g=window.open();g.document.write(h)}},R.register("saveAsImage",T);var b=T;X.exports=b},34208:function(X,z,e){var M=e(3440);e(44344),e(89388),e(97387),M.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),M.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})},56290:function(X,z,e){var M=e(31879),F=e(94819),R=e(19756),A=e(71659),T=e(58020),D=e(17795),b=M.each,C=D.toCamelCase,f=["","-webkit-","-moz-","-o-"],v="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";function m(c){var x="cubic-bezier(0.23, 1, 0.32, 1)",a="left "+c+"s "+x+",top "+c+"s "+x;return M.map(f,function(i){return i+"transition:"+a}).join(";")}function o(c){var x=[],a=c.get("fontSize"),i=c.getTextColor();i&&x.push("color:"+i),x.push("font:"+c.getFont());var n=c.get("lineHeight");n==null&&(n=Math.round(a*3/2)),a&&x.push("line-height:"+n+"px");var h=c.get("textShadowColor"),g=c.get("textShadowBlur")||0,d=c.get("textShadowOffsetX")||0,y=c.get("textShadowOffsetY")||0;return g&&x.push("text-shadow:"+d+"px "+y+"px "+g+"px "+h),b(["decoration","align"],function(p){var w=c.get(p);w&&x.push("text-"+p+":"+w)}),x.join(";")}function u(c){var x=[],a=c.get("transitionDuration"),i=c.get("backgroundColor"),n=c.getModel("textStyle"),h=c.get("padding");return a&&x.push(m(a)),i&&(T.canvasSupported?x.push("background-Color:"+i):(x.push("background-Color:#"+F.toHex(i)),x.push("filter:alpha(opacity=70)"))),b(["width","color","radius"],function(g){var d="border-"+g,y=C(d),p=c.get(y);p!=null&&x.push(d+":"+p+(g==="color"?"":"px"))}),x.push(o(n)),h!=null&&x.push("padding:"+D.normalizeCssArray(h).join("px ")+"px"),x.join(";")+";"}function l(c,x,a,i,n){var h=x&&x.painter;if(a){var g=h&&h.getViewportRoot();g&&A.transformLocalCoord(c,g,document.body,i,n)}else{c[0]=i,c[1]=n;var d=h&&h.getViewportRootOffset();d&&(c[0]+=d.offsetLeft,c[1]+=d.offsetTop)}c[2]=c[0]/x.getWidth(),c[3]=c[1]/x.getHeight()}function r(c,x,a){if(T.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=x.getZr(),h=this._appendToBody=a&&a.appendToBody;this._styleCoord=[0,0,0,0],l(this._styleCoord,n,h,x.getWidth()/2,x.getHeight()/2),h?document.body.appendChild(i):c.appendChild(i),this._container=c,this._show=!1,this._hideTimeout;var g=this;i.onmouseenter=function(){g._enterable&&(clearTimeout(g._hideTimeout),g._show=!0),g._inContent=!0},i.onmousemove=function(d){if(d=d||window.event,!g._enterable){var y=n.handler,p=n.painter.getViewportRoot();R.normalizeEvent(p,d,!0),y.dispatch("mousemove",d)}},i.onmouseleave=function(){g._enterable&&g._show&&g.hideLater(g._hideDelay),g._inContent=!1}}r.prototype={constructor:r,_enterable:!0,update:function(c){var x=this._container,a=x.currentStyle||document.defaultView.getComputedStyle(x),i=x.style;i.position!=="absolute"&&a.position!=="absolute"&&(i.position="relative");var n=c.get("alwaysShowContent");n&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var c=this._styleCoord[2],x=this._styleCoord[3],a=c*this._zr.getWidth(),i=x*this._zr.getHeight();this.moveTo(a,i)},show:function(c){clearTimeout(this._hideTimeout);var x=this.el,a=this._styleCoord;x.style.cssText=v+u(c)+";left:"+a[0]+"px;top:"+a[1]+"px;"+(c.get("extraCssText")||""),x.style.display=x.innerHTML?"block":"none",x.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(c){this.el.innerHTML=c??""},setEnterable:function(c){this._enterable=c},getSize:function(){var c=this.el;return[c.clientWidth,c.clientHeight]},moveTo:function(c,x){var a=this._styleCoord;l(a,this._zr,this._appendToBody,c,x);var i=this.el.style;i.left=a[0]+"px",i.top=a[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(c){this._show&&!(this._inContent&&this._enterable)&&(c?(this._hideDelay=c,this._show=!1,this._hideTimeout=setTimeout(M.bind(this.hide,this),c)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var c=this.el.clientWidth,x=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(this.el);a&&(c+=parseInt(a.borderLeftWidth,10)+parseInt(a.borderRightWidth,10),x+=parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10))}return{width:c,height:x}}};var s=r;X.exports=s},89388:function(X,z,e){var M=e(3440),F=M.extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});X.exports=F},31629:function(X,z,e){var M=e(31879),F=e(35727),R=e(48070);function A(b,C,f,v){b[0]=f,b[1]=v,b[2]=b[0]/C.getWidth(),b[3]=b[1]/C.getHeight()}function T(b){var C=this._zr=b.getZr();this._styleCoord=[0,0,0,0],A(this._styleCoord,C,b.getWidth()/2,b.getHeight()/2),this._show=!1,this._hideTimeout}T.prototype={constructor:T,_enterable:!0,update:function(b){var C=b.get("alwaysShowContent");C&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var b=this._styleCoord[2],C=this._styleCoord[3],f=b*this._zr.getWidth(),v=C*this._zr.getHeight();this.moveTo(f,v)},show:function(b){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(b,C,f){this.el&&this._zr.remove(this.el);for(var v={},m=b,o="{marker",u="|}",l=m.indexOf(o);l>=0;){var r=m.indexOf(u),s=m.substr(l+o.length,r-l-o.length);s.indexOf("sub")>-1?v["marker"+s]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:C[s],textOffset:[3,0]}:v["marker"+s]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:C[s]},m=m.substr(r+1),l=m.indexOf("{marker")}var c=f.getModel("textStyle"),x=c.get("fontSize"),a=f.get("textLineHeight");a==null&&(a=Math.round(x*3/2)),this.el=new F({style:R.setTextStyle({},c,{rich:v,text:b,textBackgroundColor:f.get("backgroundColor"),textBorderRadius:f.get("borderRadius"),textFill:f.get("textStyle.color"),textPadding:f.get("padding"),textLineHeight:a}),z:f.get("z")}),this._zr.add(this.el);var i=this;this.el.on("mouseover",function(){i._enterable&&(clearTimeout(i._hideTimeout),i._show=!0),i._inContent=!0}),this.el.on("mouseout",function(){i._enterable&&i._show&&i.hideLater(i._hideDelay),i._inContent=!1})},setEnterable:function(b){this._enterable=b},getSize:function(){var b=this.el.getBoundingRect();return[b.width,b.height]},moveTo:function(b,C){if(this.el){var f=this._styleCoord;A(f,this._zr,b,C),this.el.attr("position",[f[0],f[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(b){this._show&&!(this._inContent&&this._enterable)&&(b?(this._hideDelay=b,this._show=!1,this._hideTimeout=setTimeout(M.bind(this.hide,this),b)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var b=this.getSize();return{width:b[0],height:b[1]}}};var D=T;X.exports=D},97387:function(X,z,e){var M=e(3440),F=e(31879),R=e(58020),A=e(56290),T=e(31629),D=e(17795),b=e(48354),C=e(48070),f=e(55425),v=e(30871),m=e(56785),o=e(53036),u=e(99538),l=e(60293),r=e(35454),s=r.getTooltipRenderMode,c=F.bind,x=F.each,a=b.parsePercent,i=new C.Rect({shape:{x:-1,y:-1,width:2,height:2}}),n=M.extendComponentView({type:"tooltip",init:function(S,O){if(!R.node){var B=S.getComponent("tooltip"),k=B.get("renderMode");this._renderMode=s(k);var P;this._renderMode==="html"?(P=new A(O.getDom(),O,{appendToBody:B.get("appendToBody",!0)}),this._newLine="<br/>"):(P=new T(O),this._newLine=`
`),this._tooltipContent=P}},render:function(S,O,B){if(!R.node){this.group.removeAll(),this._tooltipModel=S,this._ecModel=O,this._api=B,this._lastDataByCoordSys=null,this._alwaysShowContent=S.get("alwaysShowContent");var k=this._tooltipContent;k.update(S),k.setEnterable(S.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var S=this._tooltipModel,O=S.get("triggerOn");o.register("itemTooltip",this._api,c(function(B,k,P){O!=="none"&&(O.indexOf(B)>=0?this._tryShow(k,P):B==="leave"&&this._hide(P))},this))},_keepShow:function(){var S=this._tooltipModel,O=this._ecModel,B=this._api;if(this._lastX!=null&&this._lastY!=null&&S.get("triggerOn")!=="none"){var k=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!B.isDisposed()&&k.manuallyShowTip(S,O,B,{x:k._lastX,y:k._lastY})})}},manuallyShowTip:function(S,O,B,k){if(!(k.from===this.uid||R.node)){var P=g(k,B);this._ticket="";var L=k.dataByCoordSys;if(k.tooltip&&k.x!=null&&k.y!=null){var E=i;E.position=[k.x,k.y],E.update(),E.tooltip=k.tooltip,this._tryShow({offsetX:k.x,offsetY:k.y,target:E},P)}else if(L)this._tryShow({offsetX:k.x,offsetY:k.y,position:k.position,dataByCoordSys:k.dataByCoordSys,tooltipOption:k.tooltipOption},P);else if(k.seriesIndex!=null){if(this._manuallyAxisShowTip(S,O,B,k))return;var N=f(k,O),I=N.point[0],G=N.point[1];I!=null&&G!=null&&this._tryShow({offsetX:I,offsetY:G,position:k.position,target:N.el},P)}else k.x!=null&&k.y!=null&&(B.dispatchAction({type:"updateAxisPointer",x:k.x,y:k.y}),this._tryShow({offsetX:k.x,offsetY:k.y,position:k.position,target:B.getZr().findHover(k.x,k.y).target},P))}},manuallyHideTip:function(S,O,B,k){var P=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&P.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,k.from!==this.uid&&this._hide(g(k,B))},_manuallyAxisShowTip:function(G,O,B,k){var P=k.seriesIndex,L=k.dataIndex,E=O.getComponent("axisPointer").coordSysAxesInfo;if(!(P==null||L==null||E==null)){var N=O.getSeriesByIndex(P);if(N){var I=N.getData(),G=h([I.getItemModel(L),N,(N.coordinateSystem||{}).model,G]);if(G.get("trigger")==="axis")return B.dispatchAction({type:"updateAxisPointer",seriesIndex:P,dataIndex:L,position:k.position}),!0}}},_tryShow:function(S,O){var B=S.target,k=this._tooltipModel;if(k){this._lastX=S.offsetX,this._lastY=S.offsetY;var P=S.dataByCoordSys;P&&P.length?this._showAxisTooltip(P,S):B&&B.dataIndex!=null?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(S,B,O)):B&&B.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(S,B,O)):(this._lastDataByCoordSys=null,this._hide(O))}},_showOrMove:function(S,O){var B=S.get("showDelay");O=F.bind(O,this),clearTimeout(this._showTimout),B>0?this._showTimout=setTimeout(O,B):O()},_showAxisTooltip:function(S,O){var B=this._ecModel,k=this._tooltipModel,P=[O.offsetX,O.offsetY],L=[],E=[],N=h([O.tooltipOption,k]),I=this._renderMode,G=this._newLine,W={};x(S,function(U){x(U.dataByAxis,function(H){var V=B.getComponent(H.axisDim+"Axis",H.axisIndex),Y=H.value,$=[];if(!(!V||Y==null)){var K=l.getValueLabel(Y,V.axis,B,H.seriesDataIndices,H.valueLabelOpt);F.each(H.seriesDataIndices,function(Q){var et=B.getSeriesByIndex(Q.seriesIndex),nt=Q.dataIndexInside,st=et&&et.getDataParams(nt);if(st.axisDim=H.axisDim,st.axisIndex=H.axisIndex,st.axisType=H.axisType,st.axisId=H.axisId,st.axisValue=u.getAxisRawValue(V.axis,Y),st.axisValueLabel=K,st){E.push(st);var ut=et.formatTooltip(nt,!0,null,I),rt;if(F.isObject(ut)){rt=ut.html;var ht=ut.markers;F.merge(W,ht)}else rt=ut;$.push(rt)}});var J=K;I!=="html"?L.push($.join(G)):L.push((J?D.encodeHTML(J)+G:"")+$.join(G))}})},this),L.reverse(),L=L.join(this._newLine+this._newLine);var Z=O.position;this._showOrMove(N,function(){this._updateContentNotChangedOnAxis(S)?this._updatePosition(N,Z,P[0],P[1],this._tooltipContent,E):this._showTooltipContent(N,L,E,Math.random(),P[0],P[1],Z,void 0,W)})},_showSeriesItemTooltip:function(S,O,B){var k=this._ecModel,P=O.seriesIndex,L=k.getSeriesByIndex(P),E=O.dataModel||L,N=O.dataIndex,I=O.dataType,G=E.getData(I),W=h([G.getItemModel(N),E,L&&(L.coordinateSystem||{}).model,this._tooltipModel]),Z=W.get("trigger");if(!(Z!=null&&Z!=="item")){var U=E.getDataParams(N,I),H=E.formatTooltip(N,!1,I,this._renderMode),V,Y;F.isObject(H)?(V=H.html,Y=H.markers):(V=H,Y=null);var $="item_"+E.name+"_"+N;this._showOrMove(W,function(){this._showTooltipContent(W,V,U,$,S.offsetX,S.offsetY,S.position,S.target,Y)}),B({type:"showTip",dataIndexInside:N,dataIndex:G.getRawIndex(N),seriesIndex:P,from:this.uid})}},_showComponentItemTooltip:function(S,O,B){var k=O.tooltip;if(typeof k=="string"){var P=k;k={content:P,formatter:P}}var L=new m(k,this._tooltipModel,this._ecModel),E=L.get("content"),N=Math.random();this._showOrMove(L,function(){this._showTooltipContent(L,E,L.get("formatterParams")||{},N,S.offsetX,S.offsetY,S.position,O)}),B({type:"showTip",from:this.uid})},_showTooltipContent:function(S,O,B,k,P,L,E,N,I){if(this._ticket="",!(!S.get("showContent")||!S.get("show"))){var G=this._tooltipContent,W=S.get("formatter");E=E||S.get("position");var Z=O;if(W&&typeof W=="string")Z=D.formatTpl(W,B,!0);else if(typeof W=="function"){var U=c(function(H,V){H===this._ticket&&(G.setContent(V,I,S),this._updatePosition(S,E,P,L,G,B,N))},this);this._ticket=k,Z=W(B,k,U)}G.setContent(Z,I,S),G.show(S),this._updatePosition(S,E,P,L,G,B,N)}},_updatePosition:function(S,O,B,k,P,L,E){var N=this._api.getWidth(),I=this._api.getHeight();O=O||S.get("position");var G=P.getSize(),W=S.get("align"),Z=S.get("verticalAlign"),U=E&&E.getBoundingRect().clone();if(E&&U.applyTransform(E.transform),typeof O=="function"&&(O=O([B,k],L,P.el,U,{viewSize:[N,I],contentSize:G.slice()})),F.isArray(O))B=a(O[0],N),k=a(O[1],I);else if(F.isObject(O)){O.width=G[0],O.height=G[1];var H=v.getLayoutRect(O,{width:N,height:I});B=H.x,k=H.y,W=null,Z=null}else if(typeof O=="string"&&E){var V=p(O,U,G);B=V[0],k=V[1]}else{var V=d(B,k,P,N,I,W?null:20,Z?null:20);B=V[0],k=V[1]}if(W&&(B-=w(W)?G[0]/2:W==="right"?G[0]:0),Z&&(k-=w(Z)?G[1]/2:Z==="bottom"?G[1]:0),S.get("confine")){var V=y(B,k,P,N,I);B=V[0],k=V[1]}P.moveTo(B,k)},_updateContentNotChangedOnAxis:function(S){var O=this._lastDataByCoordSys,B=!!O&&O.length===S.length;return B&&x(O,function(k,P){var L=k.dataByAxis||{},E=S[P]||{},N=E.dataByAxis||[];B&=L.length===N.length,B&&x(L,function(I,G){var W=N[G]||{},Z=I.seriesDataIndices||[],U=W.seriesDataIndices||[];B&=I.value===W.value&&I.axisType===W.axisType&&I.axisId===W.axisId&&Z.length===U.length,B&&x(Z,function(H,V){var Y=U[V];B&=H.seriesIndex===Y.seriesIndex&&H.dataIndex===Y.dataIndex})})}),this._lastDataByCoordSys=S,!!B},_hide:function(S){this._lastDataByCoordSys=null,S({type:"hideTip",from:this.uid})},dispose:function(S,O){R.node||(this._tooltipContent.dispose(),o.unregister("itemTooltip",O))}});function h(S){for(var O=S.pop();S.length;){var B=S.pop();B&&(m.isInstance(B)&&(B=B.get("tooltip",!0)),typeof B=="string"&&(B={formatter:B}),O=new m(B,O,O.ecModel))}return O}function g(S,O){return S.dispatchAction||F.bind(O.dispatchAction,O)}function d(S,O,B,k,P,L,E){var N=B.getOuterSize(),I=N.width,G=N.height;return L!=null&&(S+I+L>k?S-=I+L:S+=L),E!=null&&(O+G+E>P?O-=G+E:O+=E),[S,O]}function y(S,O,B,k,P){var L=B.getOuterSize(),E=L.width,N=L.height;return S=Math.min(S+E,k)-E,O=Math.min(O+N,P)-N,S=Math.max(S,0),O=Math.max(O,0),[S,O]}function p(S,O,B){var k=B[0],P=B[1],L=5,E=0,N=0,I=O.width,G=O.height;switch(S){case"inside":E=O.x+I/2-k/2,N=O.y+G/2-P/2;break;case"top":E=O.x+I/2-k/2,N=O.y-P-L;break;case"bottom":E=O.x+I/2-k/2,N=O.y+G+L;break;case"left":E=O.x-k-L,N=O.y+G/2-P/2;break;case"right":E=O.x+I+L,N=O.y+G/2-P/2}return[E,N]}function w(S){return S==="center"||S==="middle"}X.exports=n},70846:function(X,z,e){e(23004),e(10875)},23004:function(X,z,e){var M=e(3440),F=e(64144);e(40923),e(48545),e(79727),e(62684),e(55418),M.registerPreprocessor(F)},10875:function(X,z,e){var M=e(3440),F=e(64144);e(40923),e(48545),e(457),e(59930),e(55418),M.registerPreprocessor(F)},79727:function(X,z,e){var M=e(31879),F=e(17886),R=e(48354),A=[20,140],T=F.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(C,f){T.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(v){v.mappingMethod="linear",v.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){T.superApply(this,"resetItemSize",arguments);var C=this.itemSize;this._orient==="horizontal"&&C.reverse(),(C[0]==null||isNaN(C[0]))&&(C[0]=A[0]),(C[1]==null||isNaN(C[1]))&&(C[1]=A[1])},_resetRange:function(){var C=this.getExtent(),f=this.option.range;!f||f.auto?(C.auto=1,this.option.range=C):M.isArray(f)&&(f[0]>f[1]&&f.reverse(),f[0]=Math.max(f[0],C[0]),f[1]=Math.min(f[1],C[1]))},completeVisualOption:function(){F.prototype.completeVisualOption.apply(this,arguments),M.each(this.stateList,function(C){var f=this.option.controller[C].symbolSize;f&&f[0]!==f[1]&&(f[0]=0)},this)},setSelected:function(C){this.option.range=C.slice(),this._resetRange()},getSelected:function(){var C=this.getExtent(),f=R.asc((this.get("range")||[]).slice());return f[0]>C[1]&&(f[0]=C[1]),f[1]>C[1]&&(f[1]=C[1]),f[0]<C[0]&&(f[0]=C[0]),f[1]<C[0]&&(f[1]=C[0]),f},getValueState:function(C){var f=this.option.range,v=this.getExtent();return(f[0]<=v[0]||f[0]<=C)&&(f[1]>=v[1]||C<=f[1])?"inRange":"outOfRange"},findTargetDataIndices:function(C){var f=[];return this.eachTargetSeries(function(v){var m=[],o=v.getData();o.each(this.getDataDimension(o),function(u,l){C[0]<=u&&u<=C[1]&&m.push(l)},this),f.push({seriesId:v.id,dataIndex:m})},this),f},getVisualMeta:function(C){var f=D(this,"outOfRange",this.getExtent()),v=D(this,"inRange",this.option.range.slice()),m=[];function o(a,i){m.push({value:a,color:C(a,i)})}for(var u=0,l=0,r=v.length,s=f.length;l<s&&(!v.length||f[l]<=v[0]);l++)f[l]<v[u]&&o(f[l],"outOfRange");for(var c=1;u<r;u++,c=0)c&&m.length&&o(v[u],"outOfRange"),o(v[u],"inRange");for(var c=1;l<s;l++)(!v.length||v[v.length-1]<f[l])&&(c&&(m.length&&o(m[m.length-1].value,"outOfRange"),c=0),o(f[l],"outOfRange"));var x=m.length;return{stops:m,outerColors:[x?m[0].color:"transparent",x?m[x-1].color:"transparent"]}}});function D(C,f,v){if(v[0]===v[1])return v.slice();for(var m=200,o=(v[1]-v[0])/m,u=v[0],l=[],r=0;r<=m&&u<v[1];r++)l.push(u),u+=o;return l.push(v[1]),l}var b=T;X.exports=b},62684:function(X,z,e){var M=e(31879),F=e(8691),R=e(19756),A=e(17320),T=e(48070),D=e(48354),b=e(38289),C=e(6690),f=e(35454),v=D.linearMap,m=M.each,o=Math.min,u=Math.max,l=12,r=6,s=A.extend({type:"visualMap.continuous",init:function(){s.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(d,y,p,w){(!w||w.type!=="selectDataRange"||w.from!==this.uid)&&this._buildView()},_buildView:function(){this.group.removeAll();var d=this.visualMapModel,y=this.group;this._orient=d.get("orient"),this._useHandle=d.get("calculable"),this._resetInterval(),this._renderBar(y);var p=d.get("text");this._renderEndsText(y,p,0),this._renderEndsText(y,p,1),this._updateView(!0),this.renderBackground(y),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(y)},_renderEndsText:function(d,y,p){if(y){var w=y[1-p];w=w!=null?w+"":"";var S=this.visualMapModel,O=S.get("textGap"),B=S.itemSize,k=this._shapes.barGroup,P=this._applyTransform([B[0]/2,p===0?-O:B[1]+O],k),L=this._applyTransform(p===0?"bottom":"top",k),E=this._orient,N=this.visualMapModel.textStyleModel;this.group.add(new T.Text({style:{x:P[0],y:P[1],textVerticalAlign:E==="horizontal"?"middle":L,textAlign:E==="horizontal"?L:"center",text:w,textFont:N.getFont(),textFill:N.getTextColor()}}))}},_renderBar:function(d){var y=this.visualMapModel,p=this._shapes,w=y.itemSize,S=this._orient,O=this._useHandle,B=C.getItemAlign(y,this.api,w),k=p.barGroup=this._createBarGroup(B);k.add(p.outOfRange=c()),k.add(p.inRange=c(null,O?h(this._orient):null,M.bind(this._dragHandle,this,"all",!1),M.bind(this._dragHandle,this,"all",!0)));var P=y.textStyleModel.getTextRect("\u56FD"),L=u(P.width,P.height);O&&(p.handleThumbs=[],p.handleLabels=[],p.handleLabelPoints=[],this._createHandle(k,0,w,L,S,B),this._createHandle(k,1,w,L,S,B)),this._createIndicator(k,w,L,S),d.add(k)},_createHandle:function(d,y,p,w,S){var O=M.bind(this._dragHandle,this,y,!1),B=M.bind(this._dragHandle,this,y,!0),k=c(x(y,w),h(this._orient),O,B);k.position[0]=p[0],d.add(k);var P=this.visualMapModel.textStyleModel,L=new T.Text({draggable:!0,drift:O,onmousemove:function(I){R.stop(I.event)},ondragend:B,style:{x:0,y:0,text:"",textFont:P.getFont(),textFill:P.getTextColor()}});this.group.add(L);var E=[S==="horizontal"?w/2:w*1.5,S==="horizontal"?y===0?-(w*1.5):w*1.5:y===0?-w/2:w/2],N=this._shapes;N.handleThumbs[y]=k,N.handleLabelPoints[y]=E,N.handleLabels[y]=L},_createIndicator:function(d,y,p,w){var S=c([[0,0]],"move");S.position[0]=y[0],S.attr({invisible:!0,silent:!0}),d.add(S);var O=this.visualMapModel.textStyleModel,B=new T.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:O.getFont(),textFill:O.getTextColor()}});this.group.add(B);var k=[w==="horizontal"?p/2:r+3,0],P=this._shapes;P.indicator=S,P.indicatorLabel=B,P.indicatorLabelPoint=k},_dragHandle:function(d,y,p,w){if(this._useHandle){if(this._dragging=!y,!y){var S=this._applyTransform([p,w],this._shapes.barGroup,!0);this._updateInterval(d,S[1]),this._updateView()}y===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),y?!this._hovering&&this._clearHoverLinkToSeries():n(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[d],!1)}},_resetInterval:function(){var d=this.visualMapModel,y=this._dataInterval=d.getSelected(),p=d.getExtent(),w=[0,d.itemSize[1]];this._handleEnds=[v(y[0],p,w,!0),v(y[1],p,w,!0)]},_updateInterval:function(d,y){y=y||0;var p=this.visualMapModel,w=this._handleEnds,S=[0,p.itemSize[1]];b(y,w,S,d,0);var O=p.getExtent();this._dataInterval=[v(w[0],S,O,!0),v(w[1],S,O,!0)]},_updateView:function(d){var y=this.visualMapModel,p=y.getExtent(),w=this._shapes,S=[0,y.itemSize[1]],O=d?S:this._handleEnds,B=this._createBarVisual(this._dataInterval,p,O,"inRange"),k=this._createBarVisual(p,p,S,"outOfRange");w.inRange.setStyle({fill:B.barColor,opacity:B.opacity}).setShape("points",B.barPoints),w.outOfRange.setStyle({fill:k.barColor,opacity:k.opacity}).setShape("points",k.barPoints),this._updateHandle(O,B)},_createBarVisual:function(d,y,p,w){var S={forceState:w,convertOpacityToAlpha:!0},O=this._makeColorGradient(d,S),B=[this.getControllerVisual(d[0],"symbolSize",S),this.getControllerVisual(d[1],"symbolSize",S)],k=this._createBarPoints(p,B);return{barColor:new F(0,0,0,1,O),barPoints:k,handlesColor:[O[0].color,O[O.length-1].color]}},_makeColorGradient:function(d,y){var p=100,w=[],S=(d[1]-d[0])/p;w.push({color:this.getControllerVisual(d[0],"color",y),offset:0});for(var O=1;O<p;O++){var B=d[0]+S*O;if(B>d[1])break;w.push({color:this.getControllerVisual(B,"color",y),offset:O/p})}return w.push({color:this.getControllerVisual(d[1],"color",y),offset:1}),w},_createBarPoints:function(d,y){var p=this.visualMapModel.itemSize;return[[p[0]-y[0],d[0]],[p[0],d[0]],[p[0],d[1]],[p[0]-y[1],d[1]]]},_createBarGroup:function(d){var y=this._orient,p=this.visualMapModel.get("inverse");return new T.Group(y==="horizontal"&&!p?{scale:d==="bottom"?[1,1]:[-1,1],rotation:Math.PI/2}:y==="horizontal"&&p?{scale:d==="bottom"?[-1,1]:[1,1],rotation:-Math.PI/2}:y==="vertical"&&!p?{scale:d==="left"?[1,-1]:[-1,-1]}:{scale:d==="left"?[1,1]:[-1,1]})},_updateHandle:function(d,y){if(this._useHandle){var p=this._shapes,w=this.visualMapModel,S=p.handleThumbs,O=p.handleLabels;m([0,1],function(B){var k=S[B];k.setStyle("fill",y.handlesColor[B]),k.position[1]=d[B];var P=T.applyTransform(p.handleLabelPoints[B],T.getTransform(k,this.group));O[B].setStyle({x:P[0],y:P[1],text:w.formatValueText(this._dataInterval[B]),textVerticalAlign:"middle",textAlign:this._applyTransform(this._orient==="horizontal"?B===0?"bottom":"top":"left",p.barGroup)})},this)}},_showIndicator:function(d,y,p,w){var S=this.visualMapModel,O=S.getExtent(),B=S.itemSize,k=[0,B[1]],P=v(d,O,k,!0),L=this._shapes,E=L.indicator;if(E){E.position[1]=P,E.attr("invisible",!1),E.setShape("points",a(!!p,w,P,B[1]));var N={convertOpacityToAlpha:!0},I=this.getControllerVisual(d,"color",N);E.setStyle("fill",I);var G=T.applyTransform(L.indicatorLabelPoint,T.getTransform(E,this.group)),W=L.indicatorLabel;W.attr("invisible",!1);var Z=this._applyTransform("left",L.barGroup),U=this._orient;W.setStyle({text:(p||"")+S.formatValueText(y),textVerticalAlign:U==="horizontal"?Z:"middle",textAlign:U==="horizontal"?"center":Z,x:G[0],y:G[1]})}},_enableHoverLinkToSeries:function(){var d=this;this._shapes.barGroup.on("mousemove",function(y){if(d._hovering=!0,!d._dragging){var p=d.visualMapModel.itemSize,w=d._applyTransform([y.offsetX,y.offsetY],d._shapes.barGroup,!0,!0);w[1]=o(u(0,w[1]),p[1]),d._doHoverLinkToSeries(w[1],0<=w[0]&&w[0]<=p[0])}}).on("mouseout",function(){d._hovering=!1,!d._dragging&&d._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var d=this.api.getZr();this.visualMapModel.option.hoverLink?(d.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),d.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(d,y){var p=this.visualMapModel,w=p.itemSize;if(p.option.hoverLink){var S=[0,w[1]],O=p.getExtent();d=o(u(S[0],d),S[1]);var B=i(p,O,S),k=[d-B,d+B],P=v(d,S,O,!0),L=[v(k[0],S,O,!0),v(k[1],S,O,!0)];k[0]<S[0]&&(L[0]=-1/0),k[1]>S[1]&&(L[1]=1/0),y&&(L[0]===-1/0?this._showIndicator(P,L[1],"< ",B):L[1]===1/0?this._showIndicator(P,L[0],"> ",B):this._showIndicator(P,P,"\u2248 ",B));var E=this._hoverLinkDataIndices,N=[];(y||n(p))&&(N=this._hoverLinkDataIndices=p.findTargetDataIndices(L));var I=f.compressBatches(E,N);this._dispatchHighDown("downplay",C.makeHighDownBatch(I[0],p)),this._dispatchHighDown("highlight",C.makeHighDownBatch(I[1],p))}},_hoverLinkFromSeriesMouseOver:function(d){var y=d.target,p=this.visualMapModel;if(!(!y||y.dataIndex==null)){var w=this.ecModel.getSeriesByIndex(y.seriesIndex);if(p.isTargetSeries(w)){var S=w.getData(y.dataType),O=S.get(p.getDataDimension(S),y.dataIndex,!0);isNaN(O)||this._showIndicator(O,O)}}},_hideIndicator:function(){var d=this._shapes;d.indicator&&d.indicator.attr("invisible",!0),d.indicatorLabel&&d.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var d=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",C.makeHighDownBatch(d,this.visualMapModel)),d.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var d=this.api.getZr();d.off("mouseover",this._hoverLinkFromSeriesMouseOver),d.off("mouseout",this._hideIndicator)},_applyTransform:function(d,y,p,w){var S=T.getTransform(y,w?null:this.group);return T[M.isArray(d)?"applyTransform":"transformDirection"](d,S,p)},_dispatchHighDown:function(d,y){y&&y.length&&this.api.dispatchAction({type:d,batch:y})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function c(d,y,p,w){return new T.Polygon({shape:{points:d},draggable:!!p,cursor:y,drift:p,onmousemove:function(S){R.stop(S.event)},ondragend:w})}function x(d,y){return d===0?[[0,0],[y,0],[y,-y]]:[[0,0],[y,0],[y,y]]}function a(d,y,p,w){return d?[[0,-o(y,u(p,0))],[r,0],[0,o(y,u(w-p,0))]]:[[0,0],[5,-5],[5,5]]}function i(d,y,p){var w=l/2,S=d.get("hoverLinkDataSize");return S&&(w=v(S,y,p,!0)/2),w}function n(d){var y=d.get("hoverLinkOnHandle");return!!(y??d.get("realtime"))}function h(d){return d==="vertical"?"ns-resize":"ew-resize"}var g=s;X.exports=g},457:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(17886),T=e(58796),D=e(19508),b=e(48354),C=b.reformIntervals,f=A.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(u,l){f.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var r=this._mode=this._determineMode();v[this._mode].call(this),this._resetSelected(u,l);var s=this.option.categories;this.resetVisual(function(c,x){r==="categories"?(c.mappingMethod="category",c.categories=R.clone(s)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=R.map(this._pieceList,function(i){var i=R.clone(i);return x!=="inRange"&&(i.visual=null),i}))})},completeVisualOption:function(){var u=this.option,l={},r=T.listVisualTypes(),s=this.isCategory();R.each(u.pieces,function(x){R.each(r,function(a){x.hasOwnProperty(a)&&(l[a]=1)})}),R.each(l,function(x,a){var i=0;R.each(this.stateList,function(n){i|=c(u,n,a)||c(u.target,n,a)},this),!i&&R.each(this.stateList,function(n){(u[n]||(u[n]={}))[a]=D.get(a,n==="inRange"?"active":"inactive",s)})},this);function c(x,a,i){return x&&x[a]&&(R.isObject(x[a])?x[a].hasOwnProperty(i):x[a]===i)}A.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(u,l){var r=this.option,s=this._pieceList,c=(l?r:u).selected||{};if(r.selected=c,R.each(s,function(a,i){var n=this.getSelectedMapKey(a);c.hasOwnProperty(n)||(c[n]=!0)},this),r.selectedMode==="single"){var x=!1;R.each(s,function(a,i){var n=this.getSelectedMapKey(a);c[n]&&(x?c[n]=!1:x=!0)},this)}},getSelectedMapKey:function(u){return this._mode==="categories"?u.value+"":u.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var u=this.option;return u.pieces&&u.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(u){this.option.selected=R.clone(u)},getValueState:function(u){var l=T.findPieceIndex(u,this._pieceList);return l!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[l])]?"inRange":"outOfRange"},findTargetDataIndices:function(u){var l=[];return this.eachTargetSeries(function(r){var s=[],c=r.getData();c.each(this.getDataDimension(c),function(x,a){var i=T.findPieceIndex(x,this._pieceList);i===u&&s.push(a)},this),l.push({seriesId:r.id,dataIndex:s})},this),l},getRepresentValue:function(u){var l;if(this.isCategory())l=u.value;else if(u.value!=null)l=u.value;else{var r=u.interval||[];l=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return l},getVisualMeta:function(u){if(this.isCategory())return;var l=[],r=[],s=this;function c(n,h){var g=s.getRepresentValue({interval:n});h||(h=s.getValueState(g));var d=u(g,h);n[0]===-1/0?r[0]=d:n[1]===1/0?r[1]=d:l.push({value:n[0],color:d},{value:n[1],color:d})}var x=this._pieceList.slice();if(!x.length)x.push({interval:[-1/0,1/0]});else{var a=x[0].interval[0];a!==-1/0&&x.unshift({interval:[-1/0,a]}),a=x[x.length-1].interval[1],a!==1/0&&x.push({interval:[a,1/0]})}var i=-1/0;return R.each(x,function(n){var h=n.interval;h&&(h[0]>i&&c([i,h[0]],"outOfRange"),c(h.slice()),i=h[1])},this),{stops:l,outerColors:r}}}),v={splitNumber:function(){var u=this.option,l=this._pieceList,r=Math.min(u.precision,20),s=this.getExtent(),c=u.splitNumber;c=Math.max(parseInt(c,10),1),u.splitNumber=c;for(var x=(s[1]-s[0])/c;+x.toFixed(r)!==x&&r<5;)r++;u.precision=r,x=+x.toFixed(r),u.minOpen&&l.push({interval:[-1/0,s[0]],close:[0,0]});for(var a=0,i=s[0];a<c;i+=x,a++){var n=a===c-1?s[1]:i+x;l.push({interval:[i,n],close:[1,1]})}u.maxOpen&&l.push({interval:[s[1],1/0],close:[0,0]}),C(l),R.each(l,function(h,g){h.index=g,h.text=this.formatValueText(h.interval)},this)},categories:function(){var u=this.option;R.each(u.categories,function(l){this._pieceList.push({text:this.formatValueText(l,!0),value:l})},this),m(u,this._pieceList)},pieces:function(){var u=this.option,l=this._pieceList;R.each(u.pieces,function(r,s){R.isObject(r)||(r={value:r});var c={text:"",index:s};if(r.label!=null&&(c.text=r.label),r.hasOwnProperty("value")){var x=c.value=r.value;c.interval=[x,x],c.close=[1,1]}else{for(var a=c.interval=[],i=c.close=[0,0],n=[1,0,1],h=[-1/0,1/0],g=[],d=0;d<2;d++){for(var y=[["gte","gt","min"],["lte","lt","max"]][d],p=0;p<3&&a[d]==null;p++)a[d]=r[y[p]],i[d]=n[p],g[d]=p===2;a[d]==null&&(a[d]=h[d])}g[0]&&a[1]===1/0&&(i[0]=0),g[1]&&a[0]===-1/0&&(i[1]=0),a[0]===a[1]&&i[0]&&i[1]&&(c.value=a[0])}c.visual=T.retrieveVisuals(r),l.push(c)},this),m(u,l),C(l),R.each(l,function(r){var s=r.close,c=[["<","\u2264"][s[1]],[">","\u2265"][s[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,c)},this)}};function m(u,l){var r=u.inverse;(u.orient==="vertical"?!r:r)&&l.reverse()}var o=f;X.exports=o},59930:function(X,z,e){var M=e(31879),F=e(17320),R=e(48070),A=e(35730),T=A.createSymbol,D=e(30871),b=e(6690),C=F.extend({type:"visualMap.piecewise",doRender:function(){var v=this.group;v.removeAll();var m=this.visualMapModel,o=m.get("textGap"),u=m.textStyleModel,l=u.getFont(),r=u.getTextColor(),s=this._getItemAlign(),c=m.itemSize,x=this._getViewData(),a=x.endsText,i=M.retrieve(m.get("showLabel",!0),!a);a&&this._renderEndsText(v,a[0],c,i,s),M.each(x.viewPieceList,n,this),a&&this._renderEndsText(v,a[1],c,i,s),D.box(m.get("orient"),v,m.get("itemGap")),this.renderBackground(v),this.positionGroup(v);function n(h){var g=h.piece,d=new R.Group;d.onclick=M.bind(this._onItemClick,this,g),this._enableHoverLink(d,h.indexInModelPieceList);var y=m.getRepresentValue(g);if(this._createItemSymbol(d,y,[0,0,c[0],c[1]]),i){var p=this.visualMapModel.getValueState(y);d.add(new R.Text({style:{x:s==="right"?-o:c[0]+o,y:c[1]/2,text:g.text,textVerticalAlign:"middle",textAlign:s,textFont:l,textFill:r,opacity:p==="outOfRange"?.5:1}}))}v.add(d)}},_enableHoverLink:function(v,m){v.on("mouseover",M.bind(o,this,"highlight")).on("mouseout",M.bind(o,this,"downplay"));function o(u){var l=this.visualMapModel;l.option.hoverLink&&this.api.dispatchAction({type:u,batch:b.makeHighDownBatch(l.findTargetDataIndices(m),l)})}},_getItemAlign:function(){var v=this.visualMapModel,m=v.option;if(m.orient==="vertical")return b.getItemAlign(v,this.api,v.itemSize);var o=m.align;return(!o||o==="auto")&&(o="left"),o},_renderEndsText:function(v,m,o,u,l){if(m){var r=new R.Group,s=this.visualMapModel.textStyleModel;r.add(new R.Text({style:{x:u?l==="right"?o[0]:0:o[0]/2,y:o[1]/2,textVerticalAlign:"middle",textAlign:u?l:"center",text:m,textFont:s.getFont(),textFill:s.getTextColor()}})),v.add(r)}},_getViewData:function(){var v=this.visualMapModel,m=M.map(v.getPieceList(),function(r,s){return{piece:r,indexInModelPieceList:s}}),o=v.get("text"),u=v.get("orient"),l=v.get("inverse");return(u==="horizontal"?l:!l)?m.reverse():o&&(o=o.slice().reverse()),{viewPieceList:m,endsText:o}},_createItemSymbol:function(v,m,o){v.add(T(this.getControllerVisual(m,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(m,"color")))},_onItemClick:function(v){var m=this.visualMapModel,o=m.option,u=M.clone(o.selected),l=m.getSelectedMapKey(v);o.selectedMode==="single"?(u[l]=!0,M.each(u,function(r,s){u[s]=s===l})):u[l]=!u[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}}),f=C;X.exports=f},17886:function(X,z,e){var M=e(3440),F=e(31879),R=e(58020),A=e(19508),T=e(58796),D=e(36193),b=e(35454),C=e(48354),f=T.mapVisual,v=T.eachVisual,m=F.isArray,o=F.each,u=C.asc,l=C.linearMap,r=F.noop,s=M.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(x,a,i){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(x,i)},optionUpdated:function(x,a){var i=this.option;R.canvasSupported||(i.realtime=!1),!a&&D.replaceVisualOption(i,x,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(x){var a=this.stateList;x=F.bind(x,this),this.controllerVisuals=D.createVisualMappings(this.option.controller,a,x),this.targetVisuals=D.createVisualMappings(this.option.target,a,x)},getTargetSeriesIndices:function(){var x=this.option.seriesIndex,a=[];return x==null||x==="all"?this.ecModel.eachSeries(function(i,n){a.push(n)}):a=b.normalizeToArray(x),a},eachTargetSeries:function(x,a){F.each(this.getTargetSeriesIndices(),function(i){x.call(a,this.ecModel.getSeriesByIndex(i))},this)},isTargetSeries:function(x){var a=!1;return this.eachTargetSeries(function(i){i===x&&(a=!0)}),a},formatValueText:function(x,a,i){var n=this.option,h=n.precision,g=this.dataBound,d=n.formatter,y,p;if(i=i||["<",">"],F.isArray(x)&&(x=x.slice(),y=!0),p=a?x:y?[w(x[0]),w(x[1])]:w(x),F.isString(d))return d.replace("{value}",y?p[0]:p).replace("{value2}",y?p[1]:p);if(F.isFunction(d))return y?d(x[0],x[1]):d(x);if(y)return x[0]===g[0]?i[0]+" "+p[1]:x[1]===g[1]?i[1]+" "+p[0]:p[0]+" - "+p[1];return p;function w(S){return S===g[0]?"min":S===g[1]?"max":(+S).toFixed(Math.min(h,20))}},resetExtent:function(){var x=this.option,a=u([x.min,x.max]);this._dataExtent=a},getDataDimension:function(x){var a=this.option.dimension,i=x.dimensions;if(!(a==null&&!i.length)){if(a!=null)return x.getDimension(a);for(var n=x.dimensions,h=n.length-1;h>=0;h--){var g=n[h],d=x.getDimensionInfo(g);if(!d.isCalculationCoord)return g}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var x=this.ecModel,a=this.option,i={inRange:a.inRange,outOfRange:a.outOfRange},n=a.target||(a.target={}),h=a.controller||(a.controller={});F.merge(n,i),F.merge(h,i);var g=this.isCategory();d.call(this,n),d.call(this,h),y.call(this,n,"inRange","outOfRange"),p.call(this,h);function d(w){m(a.color)&&!w.inRange&&(w.inRange={color:a.color.slice().reverse()}),w.inRange=w.inRange||{color:x.get("gradientColor")},o(this.stateList,function(S){var O=w[S];if(F.isString(O)){var B=A.get(O,"active",g);B?(w[S]={},w[S][O]=B):delete w[S]}},this)}function y(w,S,O){var B=w[S],k=w[O];B&&!k&&(k=w[O]={},o(B,function(P,L){if(T.isValidType(L)){var E=A.get(L,"inactive",g);E!=null&&(k[L]=E,L==="color"&&!k.hasOwnProperty("opacity")&&!k.hasOwnProperty("colorAlpha")&&(k.opacity=[0,0]))}}))}function p(w){var S=(w.inRange||{}).symbol||(w.outOfRange||{}).symbol,O=(w.inRange||{}).symbolSize||(w.outOfRange||{}).symbolSize,B=this.get("inactiveColor");o(this.stateList,function(k){var P=this.itemSize,L=w[k];L||(L=w[k]={color:g?B:[B]}),L.symbol==null&&(L.symbol=S&&F.clone(S)||(g?"roundRect":["roundRect"])),L.symbolSize==null&&(L.symbolSize=O&&F.clone(O)||(g?P[0]:[P[0],P[0]])),L.symbol=f(L.symbol,function(I){return I==="none"||I==="square"?"roundRect":I});var E=L.symbolSize;if(E!=null){var N=-1/0;v(E,function(I){I>N&&(N=I)}),L.symbolSize=f(E,function(I){return l(I,[0,N],[0,P[0]],!0)})}},this)}},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:r,getValueState:r,getVisualMeta:r}),c=s;X.exports=c},17320:function(X,z,e){var M=e(3440),F=e(31879),R=e(48070),A=e(17795),T=e(30871),D=e(58796),b=M.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(C,f){this.ecModel=C,this.api=f,this.visualMapModel},render:function(C,f,v,m){if(this.visualMapModel=C,C.get("show")===!1){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(C){var f=this.visualMapModel,v=A.normalizeCssArray(f.get("padding")||0),m=C.getBoundingRect();C.add(new R.Rect({z2:-1,silent:!0,shape:{x:m.x-v[3],y:m.y-v[0],width:m.width+v[3]+v[1],height:m.height+v[0]+v[2]},style:{fill:f.get("backgroundColor"),stroke:f.get("borderColor"),lineWidth:f.get("borderWidth")}}))},getControllerVisual:function(C,f,v){v=v||{};var m=v.forceState,o=this.visualMapModel,u={};if(f==="symbol"&&(u.symbol=o.get("itemSymbol")),f==="color"){var l=o.get("contentColor");u.color=l}function r(a){return u[a]}function s(a,i){u[a]=i}var c=o.controllerVisuals[m||o.getValueState(C)],x=D.prepareVisualTypes(c);return F.each(x,function(a){var i=c[a];v.convertOpacityToAlpha&&a==="opacity"&&(a="colorAlpha",i=c.__alphaForOpacity),D.dependsOn(a,f)&&i&&i.applyVisual(C,r,s)}),u[f]},positionGroup:function(C){var f=this.visualMapModel,v=this.api;T.positionElement(C,f.getBoxLayoutParams(),{width:v.getWidth(),height:v.getHeight()})},doRender:F.noop});X.exports=b},6690:function(X,z,e){var M=e(31879),F=e(30871),R=F.getLayoutRect;function A(D,b,C){var f=D.option,v=f.align;if(v!=null&&v!=="auto")return v;for(var m={width:b.getWidth(),height:b.getHeight()},o=f.orient==="horizontal"?1:0,u=[["left","right","width"],["top","bottom","height"]],l=u[o],r=[0,null,10],s={},c=0;c<3;c++)s[u[1-o][c]]=r[c],s[l[c]]=c===2?C[0]:f[l[c]];var x=[["x","width",3],["y","height",0]][o],a=R(s,m,f.padding);return l[(a.margin[x[2]]||0)+a[x[0]]+a[x[1]]*.5<m[x[1]]*.5?0:1]}function T(D,b){return M.each(D||[],function(C){C.dataIndex!=null&&(C.dataIndexInside=C.dataIndex,C.dataIndex=null),C.highlightKey="visualMap"+(b?b.componentIndex:"")}),D}z.getItemAlign=A,z.makeHighDownBatch=T},64144:function(X,z,e){var M=e(31879),F=M.each;function R(T){var D=T&&T.visualMap;M.isArray(D)||(D=D?[D]:[]),F(D,function(b){if(b){A(b,"splitList")&&!A(b,"pieces")&&(b.pieces=b.splitList,delete b.splitList);var C=b.pieces;C&&M.isArray(C)&&F(C,function(f){M.isObject(f)&&(A(f,"start")&&!A(f,"min")&&(f.min=f.start),A(f,"end")&&!A(f,"max")&&(f.max=f.end))})}})}function A(T,D){return T&&T.hasOwnProperty&&T.hasOwnProperty(D)}X.exports=R},40923:function(X,z,e){var M=e(60684);M.registerSubTypeDefaulter("visualMap",function(F){return!F.categories&&(!(F.pieces?F.pieces.length>0:F.splitNumber>0)||F.calculable)?"continuous":"piecewise"})},48545:function(X,z,e){var M=e(3440),F=e(31879),R=e(36193),A=e(58796),T=M.PRIORITY.VISUAL.COMPONENT;M.registerVisual(T,{createOnAllSeries:!0,reset:function(b,C){var f=[];return C.eachComponent("visualMap",function(v){var m=b.pipelineContext;!v.isTargetSeries(b)||m&&m.large||f.push(R.incrementalApplyVisual(v.stateList,v.targetVisuals,F.bind(v.getValueState,v),v.getDataDimension(b.getData())))}),f}}),M.registerVisual(T,{createOnAllSeries:!0,reset:function(b,C){var f=b.getData(),v=[];C.eachComponent("visualMap",function(m){if(m.isTargetSeries(b)){var o=m.getVisualMeta(F.bind(D,null,b,m))||{stops:[],outerColors:[]},u=m.getDataDimension(f),l=f.getDimensionInfo(u);l!=null&&(o.dimension=l.index,v.push(o))}}),b.getData().setVisual("visualMeta",v)}});function D(b,C,f,v){for(var m=C.targetVisuals[v],o=A.prepareVisualTypes(m),u={color:b.getData().getVisual("color")},l=0,r=o.length;l<r;l++){var s=o[l],c=m[s==="opacity"?"__alphaForOpacity":s];c&&c.applyVisual(f,x,a)}return u.color;function x(i){return u[i]}function a(i,n){u[i]=n}}},55418:function(X,z,e){var M=e(3440),F={type:"selectDataRange",event:"dataRangeSelected",update:"update"};M.registerAction(F,function(R,A){A.eachComponent({mainType:"visualMap",query:R},function(T){T.setSelected(R.selected)})})},50617:function(X,z,e){var M;typeof window<"u"?M=window.__DEV__:typeof e.g<"u"&&(M=e.g.__DEV__),typeof M>"u"&&(M=!0);var F=M;z.__DEV__=F},36492:function(X,z,e){var M=e(31879),F=M.each,R=M.map,A=e(48354),T=A.linearMap,D=A.getPixelPrecision,b=A.round,C=e(80047),f=C.createAxisTicks,v=C.createAxisLabels,m=C.calculateCategoryInterval,o=[0,1],u=function(c,x,a){this.dim=c,this.scale=x,this._extent=a||[0,0],this.inverse=!1,this.onBand=!1};u.prototype={constructor:u,contain:function(c){var x=this._extent,a=Math.min(x[0],x[1]),i=Math.max(x[0],x[1]);return c>=a&&c<=i},containData:function(c){return this.scale.contain(c)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(c){return D(c||this.scale.getExtent(),this._extent)},setExtent:function(c,x){var a=this._extent;a[0]=c,a[1]=x},dataToCoord:function(c,x){var a=this._extent,i=this.scale;return c=i.normalize(c),this.onBand&&i.type==="ordinal"&&(a=a.slice(),l(a,i.count())),T(c,o,a,x)},coordToData:function(c,x){var a=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(a=a.slice(),l(a,i.count()));var n=T(c,a,o,x);return this.scale.scale(n)},pointToData:function(c,x){},getTicksCoords:function(c){c=c||{};var x=c.tickModel||this.getTickModel(),a=f(this,x),i=a.ticks,n=R(i,function(g){return{coord:this.dataToCoord(g),tickValue:g}},this),h=x.get("alignWithLabel");return r(this,n,h,c.clamp),n},getMinorTicksCoords:function(){if(this.scale.type==="ordinal")return[];var c=this.model.getModel("minorTick"),x=c.get("splitNumber");x>0&&x<100||(x=5);var a=this.scale.getMinorTicks(x),i=R(a,function(n){return R(n,function(h){return{coord:this.dataToCoord(h),tickValue:h}},this)},this);return i},getViewLabels:function(){return v(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var c=this._extent,x=this.scale.getExtent(),a=x[1]-x[0]+(this.onBand?1:0);a===0&&(a=1);var i=Math.abs(c[1]-c[0]);return Math.abs(i)/a},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return m(this)}};function l(c,x){var a=c[1]-c[0],i=x,n=a/i/2;c[0]+=n,c[1]-=n}function r(c,x,a,i){var n=x.length;if(!c.onBand||a||!n)return;var h=c.getExtent(),g,d;if(n===1)x[0].coord=h[0],g=x[1]={coord:h[0]};else{var y=x[n-1].tickValue-x[0].tickValue,p=(x[n-1].coord-x[0].coord)/y;F(x,function(B){B.coord-=p/2});var w=c.scale.getExtent();d=1+w[1]-x[n-1].tickValue,g={coord:x[n-1].coord+p*d},x.push(g)}var S=h[0]>h[1];O(x[0].coord,h[0])&&(i?x[0].coord=h[0]:x.shift()),i&&O(h[0],x[0].coord)&&x.unshift({coord:h[0]}),O(h[1],g.coord)&&(i?g.coord=h[1]:x.pop()),i&&O(g.coord,h[1])&&x.push({coord:h[1]});function O(B,k){return B=b(B),k=b(k),S?B>k:B<k}}var s=u;X.exports=s},65176:function(X,z,e){var M=e(31879),F=e(12072),R=e(43970),A=e(95946),T=e(51218),D=F.applyTransform;function b(){T.call(this)}M.mixin(b,T);function C(m){this.name=m,this.zoomLimit,T.call(this),this._roamTransformable=new b,this._rawTransformable=new b,this._center,this._zoom}C.prototype={constructor:C,type:"view",dimensions:["x","y"],setBoundingRect:function(m,o,u,l){return this._rect=new A(m,o,u,l),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(m,o,u,l){this.transformTo(m,o,u,l),this._viewRect=new A(m,o,u,l)},transformTo:function(m,o,u,l){var r=this.getBoundingRect(),s=this._rawTransformable;s.transform=r.calculateTransform(new A(m,o,u,l)),s.decomposeTransform(),this._updateTransform()},setCenter:function(m){m&&(this._center=m,this._updateCenterAndZoom())},setZoom:function(m){m=m||1;var o=this.zoomLimit;o&&(o.max!=null&&(m=Math.min(o.max,m)),o.min!=null&&(m=Math.max(o.min,m))),this._zoom=m,this._updateCenterAndZoom()},getDefaultCenter:function(){var m=this.getBoundingRect(),o=m.x+m.width/2,u=m.y+m.height/2;return[o,u]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var m=this._rawTransformable.getLocalTransform(),o=this._roamTransformable,u=this.getDefaultCenter(),l=this.getCenter(),r=this.getZoom();l=F.applyTransform([],l,m),u=F.applyTransform([],u,m),o.origin=l,o.position=[u[0]-l[0],u[1]-l[1]],o.scale=[r,r],this._updateTransform()},_updateTransform:function(){var m=this._roamTransformable,o=this._rawTransformable;o.parent=m,m.updateTransform(),o.updateTransform(),R.copy(this.transform||(this.transform=[]),o.transform||R.create()),this._rawTransform=o.getLocalTransform(),this.invTransform=this.invTransform||[],R.invert(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var m=this._roamTransformable.transform,o=this._rawTransformable;return{roamTransform:m?M.slice(m):R.create(),rawScale:M.slice(o.scale),rawPosition:M.slice(o.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var m=this.getBoundingRect().clone();return m.applyTransform(this.transform),m},dataToPoint:function(m,o,u){var l=o?this._rawTransform:this.transform;return u=u||[],l?D(u,m,l):F.copy(u,m)},pointToData:function(m){var o=this.invTransform;return o?D([],m,o):[m[0],m[1]]},convertToPixel:M.curry(f,"dataToPoint"),convertFromPixel:M.curry(f,"pointToData"),containPoint:function(m){return this.getViewRectAfterRoam().contain(m[0],m[1])}},M.mixin(C,T);function f(m,o,u,l){var r=u.seriesModel,s=r?r.coordinateSystem:null;return s===this?s[m](l):null}var v=C;X.exports=v},43655:function(X,z,e){var M=e(31879),F={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},R={};R.categoryAxis=M.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},F),R.valueAxis=M.merge({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},F),R.timeAxis=M.defaults({scale:!0,min:"dataMin",max:"dataMax"},R.valueAxis),R.logAxis=M.defaults({scale:!0,logBase:10},R.valueAxis);var A=R;X.exports=A},99538:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(92969),T=e(15443),D=e(41977),b=e(48354),C=e(19641),f=C.prepareLayoutBarSeries,v=C.makeColumnLayout,m=C.retrieveColumnLayout,o=e(95946);e(73111),e(13536);function u(d,y){var p=d.type,w=y.getMin(),S=y.getMax(),O=d.getExtent(),B,k,P;p==="ordinal"?B=y.getCategories().length:(k=y.get("boundaryGap"),R.isArray(k)||(k=[k||0,k||0]),typeof k[0]=="boolean"&&(k=[0,0]),k[0]=b.parsePercent(k[0],1),k[1]=b.parsePercent(k[1],1),P=O[1]-O[0]||Math.abs(O[0])),w==="dataMin"?w=O[0]:typeof w=="function"&&(w=w({min:O[0],max:O[1]})),S==="dataMax"?S=O[1]:typeof S=="function"&&(S=S({min:O[0],max:O[1]}));var L=w!=null,E=S!=null;w==null&&(w=p==="ordinal"?B?0:NaN:O[0]-k[0]*P),S==null&&(S=p==="ordinal"?B?B-1:NaN:O[1]+k[1]*P),(w==null||!isFinite(w))&&(w=NaN),(S==null||!isFinite(S))&&(S=NaN),d.setBlank(R.eqNaN(w)||R.eqNaN(S)||p==="ordinal"&&!d.getOrdinalMeta().categories.length),y.getNeedCrossZero()&&(w>0&&S>0&&!L&&(w=0),w<0&&S<0&&!E&&(S=0));var N=y.ecModel;if(N&&p==="time"){var I=f("bar",N),G;if(R.each(I,function(U){G|=U.getBaseAxis()===y.axis}),G){var W=v(I),Z=l(w,S,y,W);w=Z.min,S=Z.max}}return{extent:[w,S],fixMin:L,fixMax:E}}function l(d,y,p,w){var S=p.axis.getExtent(),O=S[1]-S[0],B=m(w,p.axis);if(B===void 0)return{min:d,max:y};var k=1/0;R.each(B,function(G){k=Math.min(G.offset,k)});var P=-1/0;R.each(B,function(G){P=Math.max(G.offset+G.width,P)}),k=Math.abs(k),P=Math.abs(P);var L=k+P,E=y-d,N=1-(k+P)/O,I=E/N-E;return y+=I*(P/L),d-=I*(k/L),{min:d,max:y}}function r(d,y){var p=u(d,y),w=p.extent,S=y.get("splitNumber");d.type==="log"&&(d.base=y.get("logBase"));var O=d.type;d.setExtent(w[0],w[1]),d.niceExtent({splitNumber:S,fixMin:p.fixMin,fixMax:p.fixMax,minInterval:O==="interval"||O==="time"?y.get("minInterval"):null,maxInterval:O==="interval"||O==="time"?y.get("maxInterval"):null});var B=y.get("interval");B!=null&&d.setInterval&&d.setInterval(B)}function s(d,y){if(y=y||d.get("type"),y)switch(y){case"category":return new A(d.getOrdinalMeta?d.getOrdinalMeta():d.getCategories(),[1/0,-1/0]);case"value":return new T;default:return(D.getClass(y)||T).create(d)}}function c(d){var y=d.scale.getExtent(),p=y[0],w=y[1];return!(p>0&&w>0||p<0&&w<0)}function x(d){var y=d.getLabelModel().get("formatter"),p=d.type==="category"?d.scale.getExtent()[0]:null;return typeof y=="string"?(y=function(w){return function(S){return S=d.scale.getLabel(S),w.replace("{value}",S??"")}}(y),y):typeof y=="function"?function(w,S){return p!=null&&(S=w-p),y(a(d,w),S)}:function(w){return d.scale.getLabel(w)}}function a(d,y){return d.type==="category"?d.scale.getLabel(y):y}function i(d){var y=d.model,p=d.scale;if(!(!y.get("axisLabel.show")||p.isBlank())){var w=d.type==="category",S,O,B=p.getExtent();w?O=p.count():(S=p.getTicks(),O=S.length);var k=d.getLabelModel(),P=x(d),L,E=1;O>40&&(E=Math.ceil(O/40));for(var N=0;N<O;N+=E){var I=S?S[N]:B[0]+N,G=P(I),W=k.getTextRect(G),Z=n(W,k.get("rotate")||0);L?L.union(Z):L=Z}return L}}function n(d,y){var p=y*Math.PI/180,w=d.plain(),S=w.width,O=w.height,B=S*Math.abs(Math.cos(p))+Math.abs(O*Math.sin(p)),k=S*Math.abs(Math.sin(p))+Math.abs(O*Math.cos(p)),P=new o(w.x,w.y,B,k);return P}function h(d){var y=d.get("interval");return y??"auto"}function g(d){return d.type==="category"&&h(d.getLabelModel())===0}z.getScaleExtent=u,z.niceScaleExtent=r,z.createScaleByModel=s,z.ifAxisCrossZero=c,z.makeLabelFormatter=x,z.getAxisRawValue=a,z.estimateLabelUnionRect=i,z.getOptionCategoryInterval=h,z.shouldShowAllLabels=g},42544:function(X,z,e){var M=e(31879),F={getMin:function(R){var A=this.option,T=!R&&A.rangeStart!=null?A.rangeStart:A.min;return this.axis&&T!=null&&T!=="dataMin"&&typeof T!="function"&&!M.eqNaN(T)&&(T=this.axis.scale.parse(T)),T},getMax:function(R){var A=this.option,T=!R&&A.rangeEnd!=null?A.rangeEnd:A.max;return this.axis&&T!=null&&T!=="dataMax"&&typeof T!="function"&&!M.eqNaN(T)&&(T=this.axis.scale.parse(T)),T},getNeedCrossZero:function(){var R=this.option;return R.rangeStart!=null||R.rangeEnd!=null?!1:!R.scale},getCoordSysModel:M.noop,setRange:function(R,A){this.option.rangeStart=R,this.option.rangeEnd=A},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};X.exports=F},73794:function(X,z,e){var M=e(31879),F=e(43655),R=e(60684),A=e(30871),T=A.getLayoutParams,D=A.mergeLayoutParam,b=e(84116),C=["value","category","time","log"];function f(v,m,o,u){M.each(C,function(l){m.extend({type:v+"Axis."+l,mergeDefaultAndTheme:function(r,s){var c=this.layoutMode,x=c?T(r):{},a=s.getTheme();M.merge(r,a.get(l+"Axis")),M.merge(r,this.getDefaultOption()),r.type=o(v,r),c&&D(r,x,c)},optionUpdated:function(){var r=this.option;r.type==="category"&&(this.__ordinalMeta=b.createByAxisModel(this))},getCategories:function(r){var s=this.option;if(s.type==="category")return r?s.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:M.mergeAll([{},F[l+"Axis"],u],!0)})}),R.registerSubTypeDefaulter(v+"Axis",M.curry(o,v))}X.exports=f},80047:function(X,z,e){var M=e(31879),F=e(72113),R=e(35454),A=R.makeInner,T=e(99538),D=T.makeLabelFormatter,b=T.getOptionCategoryInterval,C=T.shouldShowAllLabels,f=A();function v(d){return d.type==="category"?o(d):r(d)}function m(d,y){return d.type==="category"?l(d,y):{ticks:d.scale.getTicks()}}function o(d){var y=d.getLabelModel(),p=u(d,y);return!y.get("show")||d.scale.isBlank()?{labels:[],labelCategoryInterval:p.labelCategoryInterval}:p}function u(d,y){var p=s(d,"labels"),w=b(y),S=c(p,w);if(S)return S;var O,B;return M.isFunction(w)?O=g(d,w):(B=w==="auto"?a(d):w,O=h(d,B)),x(p,w,{labels:O,labelCategoryInterval:B})}function l(d,y){var p=s(d,"ticks"),w=b(y),S=c(p,w);if(S)return S;var O,B;if((!y.get("show")||d.scale.isBlank())&&(O=[]),M.isFunction(w))O=g(d,w,!0);else if(w==="auto"){var k=u(d,d.getLabelModel());B=k.labelCategoryInterval,O=M.map(k.labels,function(P){return P.tickValue})}else B=w,O=h(d,B,!0);return x(p,w,{ticks:O,tickCategoryInterval:B})}function r(d){var y=d.scale.getTicks(),p=D(d);return{labels:M.map(y,function(w,S){return{formattedLabel:p(w,S),rawLabel:d.scale.getLabel(w),tickValue:w}})}}function s(d,y){return f(d)[y]||(f(d)[y]=[])}function c(d,y){for(var p=0;p<d.length;p++)if(d[p].key===y)return d[p].value}function x(d,y,p){return d.push({key:y,value:p}),p}function a(d){var y=f(d).autoInterval;return y??(f(d).autoInterval=d.calculateCategoryInterval())}function i(d){var y=n(d),p=D(d),w=(y.axisRotate-y.labelRotate)/180*Math.PI,S=d.scale,O=S.getExtent(),B=S.count();if(O[1]-O[0]<1)return 0;var k=1;B>40&&(k=Math.max(1,Math.floor(B/40)));for(var P=O[0],L=d.dataToCoord(P+1)-d.dataToCoord(P),E=Math.abs(L*Math.cos(w)),N=Math.abs(L*Math.sin(w)),I=0,G=0;P<=O[1];P+=k){var W=0,Z=0,U=F.getBoundingRect(p(P),y.font,"center","top");W=U.width*1.3,Z=U.height*1.3,I=Math.max(I,W,7),G=Math.max(G,Z,7)}var H=I/E,V=G/N;isNaN(H)&&(H=1/0),isNaN(V)&&(V=1/0);var Y=Math.max(0,Math.floor(Math.min(H,V))),$=f(d.model),K=d.getExtent(),J=$.lastAutoInterval,Q=$.lastTickCount;return J!=null&&Q!=null&&Math.abs(J-Y)<=1&&Math.abs(Q-B)<=1&&J>Y&&$.axisExtend0===K[0]&&$.axisExtend1===K[1]?Y=J:($.lastTickCount=B,$.lastAutoInterval=Y,$.axisExtend0=K[0],$.axisExtend1=K[1]),Y}function n(d){var y=d.getLabelModel();return{axisRotate:d.getRotate?d.getRotate():d.isHorizontal&&!d.isHorizontal()?90:0,labelRotate:y.get("rotate")||0,font:y.getFont()}}function h(d,y,p){var w=D(d),S=d.scale,O=S.getExtent(),B=d.getLabelModel(),k=[],P=Math.max((y||0)+1,1),L=O[0],E=S.count();L!==0&&P>1&&E/P>2&&(L=Math.round(Math.ceil(L/P)*P));var N=C(d),I=B.get("showMinLabel")||N,G=B.get("showMaxLabel")||N;I&&L!==O[0]&&Z(O[0]);for(var W=L;W<=O[1];W+=P)Z(W);G&&W-P!==O[1]&&Z(O[1]);function Z(U){k.push(p?U:{formattedLabel:w(U),rawLabel:S.getLabel(U),tickValue:U})}return k}function g(d,y,p){var w=d.scale,S=D(d),O=[];return M.each(w.getTicks(),function(B){var k=w.getLabel(B);y(B,k)&&O.push(p?B:{formattedLabel:S(B),rawLabel:k,tickValue:B})}),O}z.createAxisLabels=v,z.createAxisTicks=m,z.calculateCategoryInterval=i},65728:function(X,z,e){var M=e(31879),F=e(30871),R=e(48354),A=e(48642),T=864e5;function D(f,v,m){this._model=f}D.prototype={constructor:D,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(f){f=R.parseDate(f);var v=f.getFullYear(),m=f.getMonth()+1;m=m<10?"0"+m:m;var o=f.getDate();o=o<10?"0"+o:o;var u=f.getDay();return u=Math.abs((u+7-this.getFirstDayOfWeek())%7),{y:v,m,d:o,day:u,time:f.getTime(),formatedDate:v+"-"+m+"-"+o,date:f}},getNextNDay:function(f,v){return v=v||0,v===0?this.getDateInfo(f):(f=new Date(this.getDateInfo(f).time),f.setDate(f.getDate()+v),this.getDateInfo(f))},update:function(f,v){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var m=this._rangeInfo.weeks||1,o=["width","height"],u=this._model.get("cellSize").slice(),l=this._model.getBoxLayoutParams(),r=this._orient==="horizontal"?[m,7]:[7,m];M.each([0,1],function(a){x(u,a)&&(l[o[a]]=u[a]*r[a])});var s={width:v.getWidth(),height:v.getHeight()},c=this._rect=F.getLayoutRect(l,s);M.each([0,1],function(a){x(u,a)||(u[a]=c[o[a]]/r[a])});function x(a,i){return a[i]!=null&&a[i]!=="auto"}this._sw=u[0],this._sh=u[1]},dataToPoint:function(f,v){M.isArray(f)&&(f=f[0]),v==null&&(v=!0);var m=this.getDateInfo(f),o=this._rangeInfo,u=m.formatedDate;if(v&&!(m.time>=o.start.time&&m.time<o.end.time+T))return[NaN,NaN];var l=m.day,r=this._getRangeInfo([o.start.time,u]).nthWeek;return this._orient==="vertical"?[this._rect.x+l*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]:[this._rect.x+r*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]},pointToData:function(f){var v=this.pointToDate(f);return v&&v.time},dataToRect:function(f,v){var m=this.dataToPoint(f,v);return{contentShape:{x:m[0]-(this._sw-this._lineWidth)/2,y:m[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:m,tl:[m[0]-this._sw/2,m[1]-this._sh/2],tr:[m[0]+this._sw/2,m[1]-this._sh/2],br:[m[0]+this._sw/2,m[1]+this._sh/2],bl:[m[0]-this._sw/2,m[1]+this._sh/2]}},pointToDate:function(f){var v=Math.floor((f[0]-this._rect.x)/this._sw)+1,m=Math.floor((f[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(m,v-1,o):this._getDateByWeeksAndDay(v,m-1,o)},convertToPixel:M.curry(b,"dataToPoint"),convertFromPixel:M.curry(b,"pointToData"),_initRangeOption:function(){var f=this._model.get("range"),v=f;if(M.isArray(v)&&v.length===1&&(v=v[0]),/^\d{4}$/.test(v)&&(f=[v+"-01-01",v+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(v)){var m=this.getDateInfo(v),o=m.date;o.setMonth(o.getMonth()+1);var u=this.getNextNDay(o,-1);f=[m.formatedDate,u.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(v)&&(f=[v,v]);var l=this._getRangeInfo(f);return l.start.time>l.end.time&&f.reverse(),f},_getRangeInfo:function(f){f=[this.getDateInfo(f[0]),this.getDateInfo(f[1])];var v;f[0].time>f[1].time&&(v=!0,f.reverse());var m=Math.floor(f[1].time/T)-Math.floor(f[0].time/T)+1,o=new Date(f[0].time),u=o.getDate(),l=f[1].date.getDate();o.setDate(u+m-1);var r=o.getDate();if(r!==l)for(var s=o.getTime()-f[1].time>0?1:-1;(r=o.getDate())!==l&&(o.getTime()-f[1].time)*s>0;)m-=s,o.setDate(r-s);var c=Math.floor((m+f[0].day+6)/7),x=v?-c+1:c-1;return v&&f.reverse(),{range:[f[0].formatedDate,f[1].formatedDate],start:f[0],end:f[1],allDay:m,weeks:c,nthWeek:x,fweek:f[0].day,lweek:f[1].day}},_getDateByWeeksAndDay:function(f,v,m){var o=this._getRangeInfo(m);if(f>o.weeks||f===0&&v<o.fweek||f===o.weeks&&v>o.lweek)return!1;var u=(f-1)*7-o.fweek+v,l=new Date(o.start.time);return l.setDate(o.start.d+u),this.getDateInfo(l)}},D.dimensions=D.prototype.dimensions,D.getDimensionsInfo=D.prototype.getDimensionsInfo,D.create=function(f,v){var m=[];return f.eachComponent("calendar",function(o){var u=new D(o,f,v);m.push(u),o.coordinateSystem=u}),f.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=m[o.get("calendarIndex")||0])}),m};function b(f,v,m,o){var u=m.calendarModel,l=m.seriesModel,r=u?u.coordinateSystem:l?l.coordinateSystem:null;return r===this?r[f](o):null}A.register("calendar",D);var C=D;X.exports=C},53336:function(X,z,e){var M=e(31879),F=e(60684),R=e(30871),A=R.getLayoutParams,T=R.sizeCalculable,D=R.mergeLayoutParam,b=F.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(v,m,o,u){var l=A(v);b.superApply(this,"init",arguments),C(v,l)},mergeOption:function(v,m){b.superApply(this,"mergeOption",arguments),C(this.option,v)}});function C(v,m){var o=v.cellSize;M.isArray(o)?o.length===1&&(o[1]=o[0]):o=v.cellSize=[o,o];var u=M.map([0,1],function(l){return T(m,l)&&(o[l]="auto"),o[l]!=null&&o[l]!=="auto"});D(v,m,{type:"box",ignoreSize:u})}var f=b;X.exports=f},70535:function(X){function z(e){var M=e.getRect(),F=e.getRangeInfo();return{coordSys:{type:"calendar",x:M.x,y:M.y,width:M.width,height:M.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:F.start,end:F.end,weeks:F.weeks,dayCount:F.allDay}},api:{coord:function(R,A){return e.dataToPoint(R,A)}}}}X.exports=z},41242:function(X,z,e){var M=e(31879),F=e(36492),R=function(T,D,b,C,f){F.call(this,T,D,b),this.type=C||"value",this.position=f||"bottom"};R.prototype={constructor:R,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var T=this.position;return T==="top"||T==="bottom"},getGlobalExtent:function(T){var D=this.getExtent();return D[0]=this.toGlobalCoord(D[0]),D[1]=this.toGlobalCoord(D[1]),T&&D[0]>D[1]&&D.reverse(),D},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(T,D){return this.coordToData(this.toLocalCoord(T[this.dim==="x"?0:1]),D)},toLocalCoord:null,toGlobalCoord:null},M.inherits(R,F);var A=R;X.exports=A},152:function(X,z,e){var M=e(31879),F=e(60684),R=e(73794),A=e(42544),T=F.extend({type:"cartesian2dAxis",axis:null,init:function(){T.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){T.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){T.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function D(f,v){return v.type||(v.data?"category":"value")}M.merge(T.prototype,A);var b={offset:0};R("x",T,D,b),R("y",T,D,b);var C=T;X.exports=C},2764:function(X,z,e){var M=e(31879);function F(T){return this._axes[T]}var R=function(T){this._axes={},this._dimList=[],this.name=T||""};R.prototype={constructor:R,type:"cartesian",getAxis:function(T){return this._axes[T]},getAxes:function(){return M.map(this._dimList,F,this)},getAxesByScale:function(T){return T=T.toLowerCase(),M.filter(this.getAxes(),function(D){return D.scale.type===T})},addAxis:function(T){var D=T.dim;this._axes[D]=T,this._dimList.push(D)},dataToCoord:function(T){return this._dataCoordConvert(T,"dataToCoord")},coordToData:function(T){return this._dataCoordConvert(T,"coordToData")},_dataCoordConvert:function(T,D){for(var b=this._dimList,C=T instanceof Array?[]:{},f=0;f<b.length;f++){var v=b[f],m=this._axes[v];C[v]=m[D](T[v])}return C}};var A=R;X.exports=A},93746:function(X,z,e){var M=e(31879),F=e(95946),R=e(2764);function A(D){R.call(this,D)}A.prototype={constructor:A,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(D){var b=this.getAxis("x"),C=this.getAxis("y");return b.contain(b.toLocalCoord(D[0]))&&C.contain(C.toLocalCoord(D[1]))},containData:function(D){return this.getAxis("x").containData(D[0])&&this.getAxis("y").containData(D[1])},dataToPoint:function(D,b,C){var f=this.getAxis("x"),v=this.getAxis("y");return C=C||[],C[0]=f.toGlobalCoord(f.dataToCoord(D[0])),C[1]=v.toGlobalCoord(v.dataToCoord(D[1])),C},clampData:function(D,b){var C=this.getAxis("x").scale,f=this.getAxis("y").scale,v=C.getExtent(),m=f.getExtent(),o=C.parse(D[0]),u=f.parse(D[1]);return b=b||[],b[0]=Math.min(Math.max(Math.min(v[0],v[1]),o),Math.max(v[0],v[1])),b[1]=Math.min(Math.max(Math.min(m[0],m[1]),u),Math.max(m[0],m[1])),b},pointToData:function(D,b){var C=this.getAxis("x"),f=this.getAxis("y");return b=b||[],b[0]=C.coordToData(C.toLocalCoord(D[0])),b[1]=f.coordToData(f.toLocalCoord(D[1])),b},getOtherAxis:function(D){return this.getAxis(D.dim==="x"?"y":"x")},getArea:function(){var D=this.getAxis("x").getGlobalExtent(),b=this.getAxis("y").getGlobalExtent(),C=Math.min(D[0],D[1]),f=Math.min(b[0],b[1]),v=Math.max(D[0],D[1])-C,m=Math.max(b[0],b[1])-f,o=new F(C,f,v,m);return o}},M.inherits(A,R);var T=A;X.exports=T},9145:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=R.isObject,T=R.each,D=R.map,b=R.indexOf,C=R.retrieve,f=e(30871),v=f.getLayoutRect,m=e(99538),o=m.createScaleByModel,u=m.ifAxisCrossZero,l=m.niceScaleExtent,r=m.estimateLabelUnionRect,s=e(93746),c=e(41242),x=e(48642),a=e(53618),i=a.getStackedDimension;e(11680);function n(k,P,L){return k.getCoordSysModel()===P}function h(k,P,L){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(k,P,L),this.model=k}var g=h.prototype;g.type="grid",g.axisPointerEnabled=!0,g.getRect=function(){return this._rect},g.update=function(k,P){var L=this._axesMap;this._updateScale(k,this.model),T(L.x,function(N){l(N.scale,N.model)}),T(L.y,function(N){l(N.scale,N.model)});var E={};T(L.x,function(N){d(L,"y",N,E)}),T(L.y,function(N){d(L,"x",N,E)}),this.resize(this.model,P)};function d(k,P,L,E){L.getAxesOnZeroOf=function(){return I?[I]:[]};var N=k[P],I,G=L.model,W=G.get("axisLine.onZero"),Z=G.get("axisLine.onZeroAxisIndex");if(!W)return;if(Z!=null)y(N[Z])&&(I=N[Z]);else for(var U in N)if(N.hasOwnProperty(U)&&y(N[U])&&!E[H(N[U])]){I=N[U];break}I&&(E[H(I)]=!0);function H(V){return V.dim+"_"+V.index}}function y(k){return k&&k.type!=="category"&&k.type!=="time"&&u(k)}g.resize=function(k,P,L){var E=v(k.getBoxLayoutParams(),{width:P.getWidth(),height:P.getHeight()});this._rect=E;var N=this._axesList;I(),!L&&k.get("containLabel")&&(T(N,function(G){if(!G.model.get("axisLabel.inside")){var W=r(G);if(W){var Z=G.isHorizontal()?"height":"width",U=G.model.get("axisLabel.margin");E[Z]-=W[Z]+U,G.position==="top"?E.y+=W.height+U:G.position==="left"&&(E.x+=W.width+U)}}}),I());function I(){T(N,function(G){var W=G.isHorizontal(),Z=W?[0,E.width]:[0,E.height],U=G.inverse?1:0;G.setExtent(Z[U],Z[1-U]),p(G,W?E.x:E.y)})}},g.getAxis=function(k,P){var L=this._axesMap[k];if(L!=null){if(P==null){for(var E in L)if(L.hasOwnProperty(E))return L[E]}return L[P]}},g.getAxes=function(){return this._axesList.slice()},g.getCartesian=function(k,P){if(k!=null&&P!=null){var L="x"+k+"y"+P;return this._coordsMap[L]}A(k)&&(P=k.yAxisIndex,k=k.xAxisIndex);for(var E=0,N=this._coordsList;E<N.length;E++)if(N[E].getAxis("x").index===k||N[E].getAxis("y").index===P)return N[E]},g.getCartesians=function(){return this._coordsList.slice()},g.convertToPixel=function(k,P,L){var E=this._findConvertTarget(k,P);return E.cartesian?E.cartesian.dataToPoint(L):E.axis?E.axis.toGlobalCoord(E.axis.dataToCoord(L)):null},g.convertFromPixel=function(k,P,L){var E=this._findConvertTarget(k,P);return E.cartesian?E.cartesian.pointToData(L):E.axis?E.axis.coordToData(E.axis.toLocalCoord(L)):null},g._findConvertTarget=function(k,P){var L=P.seriesModel,E=P.xAxisModel||L&&L.getReferringComponents("xAxis")[0],N=P.yAxisModel||L&&L.getReferringComponents("yAxis")[0],I=P.gridModel,G=this._coordsList,W,Z;if(L)W=L.coordinateSystem,b(G,W)<0&&(W=null);else if(E&&N)W=this.getCartesian(E.componentIndex,N.componentIndex);else if(E)Z=this.getAxis("x",E.componentIndex);else if(N)Z=this.getAxis("y",N.componentIndex);else if(I){var U=I.coordinateSystem;U===this&&(W=this._coordsList[0])}return{cartesian:W,axis:Z}},g.containPoint=function(k){var P=this._coordsList[0];if(P)return P.containPoint(k)},g._initCartesian=function(k,P,L){var E={left:!1,right:!1,top:!1,bottom:!1},N={x:{},y:{}},I={x:0,y:0};if(P.eachComponent("xAxis",G("x"),this),P.eachComponent("yAxis",G("y"),this),!I.x||!I.y){this._axesMap={},this._axesList=[];return}this._axesMap=N,T(N.x,function(W,Z){T(N.y,function(U,H){var V="x"+Z+"y"+H,Y=new s(V);Y.grid=this,Y.model=k,this._coordsMap[V]=Y,this._coordsList.push(Y),Y.addAxis(W),Y.addAxis(U)},this)},this);function G(W){return function(Z,U){if(n(Z,k,P)){var H=Z.get("position");W==="x"?H!=="top"&&H!=="bottom"&&(H=E.bottom?"top":"bottom"):H!=="left"&&H!=="right"&&(H=E.left?"right":"left"),E[H]=!0;var V=new c(W,o(Z),[0,0],Z.get("type"),H),Y=V.type==="category";V.onBand=Y&&Z.get("boundaryGap"),V.inverse=Z.get("inverse"),Z.axis=V,V.model=Z,V.grid=this,V.index=U,this._axesList.push(V),N[W][U]=V,I[W]++}}}},g._updateScale=function(k,P){T(this._axesList,function(E){E.scale.setExtent(1/0,-1/0)}),k.eachSeries(function(E){if(O(E)){var N=S(E,k),I=N[0],G=N[1];if(!n(I,P,k)||!n(G,P,k))return;var W=this.getCartesian(I.componentIndex,G.componentIndex),Z=E.getData(),U=W.getAxis("x"),H=W.getAxis("y");Z.type==="list"&&(L(Z,U,E),L(Z,H,E))}},this);function L(E,N,I){T(E.mapDimension(N.dim,!0),function(G){N.scale.unionExtentFromData(E,i(E,G))})}},g.getTooltipAxes=function(k){var P=[],L=[];return T(this.getCartesians(),function(E){var N=k!=null&&k!=="auto"?E.getAxis(k):E.getBaseAxis(),I=E.getOtherAxis(N);b(P,N)<0&&P.push(N),b(L,I)<0&&L.push(I)}),{baseAxes:P,otherAxes:L}};function p(k,P){var L=k.getExtent(),E=L[0]+L[1];k.toGlobalCoord=k.dim==="x"?function(N){return N+P}:function(N){return E-N+P},k.toLocalCoord=k.dim==="x"?function(N){return N-P}:function(N){return E-N+P}}var w=["xAxis","yAxis"];function S(k,P){return D(w,function(L){var E=k.getReferringComponents(L)[0];return E})}function O(k){return k.get("coordinateSystem")==="cartesian2d"}h.create=function(k,P){var L=[];return k.eachComponent("grid",function(E,N){var I=new h(E,k,P);I.name="grid_"+N,I.resize(E,P,!0),E.coordinateSystem=I,L.push(I)}),k.eachSeries(function(E){if(O(E)){var N=S(E,k),I=N[0],G=N[1],W=I.getCoordSysModel(),Z=W.coordinateSystem;E.coordinateSystem=Z.getCartesian(I.componentIndex,G.componentIndex)}}),L},h.dimensions=h.prototype.dimensions=s.prototype.dimensions,x.register("cartesian2d",h);var B=h;X.exports=B},11680:function(X,z,e){e(152);var M=e(60684),F=M.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});X.exports=F},99495:function(X,z,e){var M=e(31879);function F(R,A,T){T=T||{};var D=R.coordinateSystem,b=A.axis,C={},f=b.getAxesOnZeroOf()[0],v=b.position,m=f?"onZero":v,o=b.dim,u=D.getRect(),l=[u.x,u.x+u.width,u.y,u.y+u.height],r={left:0,right:1,top:0,bottom:1,onZero:2},s=A.get("offset")||0,c=o==="x"?[l[2]-s,l[3]+s]:[l[0]-s,l[1]+s];if(f){var x=f.toGlobalCoord(f.dataToCoord(0));c[r.onZero]=Math.max(Math.min(x,c[1]),c[0])}C.position=[o==="y"?c[r[m]]:l[0],o==="x"?c[r[m]]:l[3]],C.rotation=Math.PI/2*(o==="x"?0:1);var a={top:-1,bottom:1,left:-1,right:1};C.labelDirection=C.tickDirection=C.nameDirection=a[v],C.labelOffset=f?c[r[v]]-c[r.onZero]:0,A.get("axisTick.inside")&&(C.tickDirection=-C.tickDirection),M.retrieve(T.labelInside,A.get("axisLabel.inside"))&&(C.labelDirection=-C.labelDirection);var i=A.get("axisLabel.rotate");return C.labelRotate=m==="top"?-i:i,C.z2=1,C}z.layout=F},73684:function(X,z,e){var M=e(31879);function F(A,T){return T=T||[0,0],M.map(["x","y"],function(D,b){var C=this.getAxis(D),f=T[b],v=A[b]/2;return C.type==="category"?C.getBandWidth():Math.abs(C.dataToCoord(f-v)-C.dataToCoord(f+v))},this)}function R(A){var T=A.grid.getRect();return{coordSys:{type:"cartesian2d",x:T.x,y:T.y,width:T.width,height:T.height},api:{coord:function(D){return A.dataToPoint(D)},size:M.bind(F,A)}}}X.exports=R},44780:function(X,z,e){var M=e(31879),F=e(95946),R=e(65176),A=e(8590);function T(C,f,v,m){R.call(this,C),this.map=f;var o=A.load(f,v);this._nameCoordMap=o.nameCoordMap,this._regionsMap=o.regionsMap,this._invertLongitute=m??!0,this.regions=o.regions,this._rect=o.boundingRect}T.prototype={constructor:T,type:"geo",dimensions:["lng","lat"],containCoord:function(C){for(var f=this.regions,v=0;v<f.length;v++)if(f[v].contain(C))return!0;return!1},transformTo:function(C,f,v,m){var o=this.getBoundingRect(),u=this._invertLongitute;o=o.clone(),u&&(o.y=-o.y-o.height);var l=this._rawTransformable;if(l.transform=o.calculateTransform(new F(C,f,v,m)),l.decomposeTransform(),u){var r=l.scale;r[1]=-r[1]}l.updateTransform(),this._updateTransform()},getRegion:function(C){return this._regionsMap.get(C)},getRegionByCoord:function(C){for(var f=this.regions,v=0;v<f.length;v++)if(f[v].contain(C))return f[v]},addGeoCoord:function(C,f){this._nameCoordMap.set(C,f)},getGeoCoord:function(C){return this._nameCoordMap.get(C)},getBoundingRect:function(){return this._rect},dataToPoint:function(C,f,v){if(typeof C=="string"&&(C=this.getGeoCoord(C)),C)return R.prototype.dataToPoint.call(this,C,f,v)},convertToPixel:M.curry(D,"dataToPoint"),convertFromPixel:M.curry(D,"pointToData")},M.mixin(T,R);function D(C,f,v,m){var o=v.geoModel,u=v.seriesModel,l=o?o.coordinateSystem:u?u.coordinateSystem||(u.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return l===this?l[C](m):null}var b=T;X.exports=b},58526:function(X,z,e){var M=e(31879),F=e(35454),R=e(60684),A=e(56785),T=e(14748),D=e(27547),b=R.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(f){R.prototype.init.apply(this,arguments),F.defaultEmphasis(f,"label",["show"])},optionUpdated:function(){var f=this.option,v=this;f.regions=D.getFilledRegions(f.regions,f.map,f.nameMap),this._optionModelMap=M.reduce(f.regions||[],function(m,o){return o.name&&m.set(o.name,new A(o,v)),m},M.createHashMap()),this.updateSelectedMap(f.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(f){return this._optionModelMap.get(f)||new A(null,this,this.ecModel)},getFormattedLabel:function(f,v){v=v||"normal";var m=this.getRegionModel(f),o=m.get((v==="normal"?"":v+".")+"label.formatter"),u={name:f};if(typeof o=="function")return u.status=v,o(u);if(typeof o=="string")return o.replace("{a}",f??"")},setZoom:function(f){this.option.zoom=f},setCenter:function(f){this.option.center=f}});M.mixin(b,T);var C=b;X.exports=C},55411:function(X,z,e){var M=e(95946),F=e(18644),R=e(12072),A=e(74898);function T(b,C,f){if(this.name=b,this.geometries=C,f)f=[f[0],f[1]];else{var v=this.getBoundingRect();f=[v.x+v.width/2,v.y+v.height/2]}this.center=f}T.prototype={constructor:T,properties:null,getBoundingRect:function(){var b=this._rect;if(b)return b;for(var C=Number.MAX_VALUE,f=[C,C],v=[-C,-C],m=[],o=[],u=this.geometries,l=0;l<u.length;l++)if(u[l].type==="polygon"){var r=u[l].exterior;F.fromPoints(r,m,o),R.min(f,f,m),R.max(v,v,o)}return l===0&&(f[0]=f[1]=v[0]=v[1]=0),this._rect=new M(f[0],f[1],v[0]-f[0],v[1]-f[1])},contain:function(b){var C=this.getBoundingRect(),f=this.geometries;if(!C.contain(b[0],b[1]))return!1;t:for(var v=0,m=f.length;v<m;v++)if(f[v].type==="polygon"){var o=f[v].exterior,u=f[v].interiors;if(A.contain(o,b[0],b[1])){for(var l=0;l<(u?u.length:0);l++)if(A.contain(u[l]))continue t;return!0}}return!1},transformTo:function(b,C,f,v){var m=this.getBoundingRect(),o=m.width/m.height;f?v||(v=f/o):f=o*v;for(var u=new M(b,C,f,v),l=m.calculateTransform(u),r=this.geometries,s=0;s<r.length;s++)if(r[s].type==="polygon"){for(var c=r[s].exterior,x=r[s].interiors,a=0;a<c.length;a++)R.applyTransform(c[a],c[a],l);for(var i=0;i<(x?x.length:0);i++)for(var a=0;a<x[i].length;a++)R.applyTransform(x[i][a],x[i][a],l)}m=this._rect,m.copy(u),this.center=[m.x+m.width/2,m.y+m.height/2]},cloneShallow:function(b){b==null&&(b=this.name);var C=new T(b,this.geometries,this.center);return C._rect=this._rect,C.transformTo=null,C}};var D=T;X.exports=D},17824:function(X){var z=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function e(M,F){M==="china"&&F.name==="\u53F0\u6E7E"&&F.geometries.push({type:"polygon",exterior:z[0]})}X.exports=e},23941:function(X){var z={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function e(M,F){if(M==="world"){var R=z[F.name];if(R){var A=F.center;A[0]=R[0],A[1]=R[1]}}}X.exports=e},83297:function(X,z,e){for(var M=e(31879),F=e(55411),R=[126,25],A=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],T=0;T<A.length;T++)for(var D=0;D<A[T].length;D++)A[T][D][0]/=10.5,A[T][D][1]/=-10.5/.75,A[T][D][0]+=R[0],A[T][D][1]+=R[1];function b(C,f){C==="china"&&f.push(new F("\u5357\u6D77\u8BF8\u5C9B",M.map(A,function(v){return{type:"polygon",exterior:v}}),R))}X.exports=b},23278:function(X){var z={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function e(M,F){if(M==="china"){var R=z[F.name];if(R){var A=F.center;A[0]+=R[0]/10.5,A[1]+=-R[1]/(10.5/.75)}}}X.exports=e},27547:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(3440),A=e(31879),T=e(44780),D=e(30871),b=e(48354),C=e(8590),f=e(52310);function v(l,r){var s=l.get("boundingCoords");if(s!=null){var c=s[0],x=s[1];isNaN(c[0])||isNaN(c[1])||isNaN(x[0])||isNaN(x[1])||this.setBoundingRect(c[0],c[1],x[0]-c[0],x[1]-c[1])}var a=this.getBoundingRect(),i,n=l.get("layoutCenter"),h=l.get("layoutSize"),g=r.getWidth(),d=r.getHeight(),y=a.width/a.height*this.aspectScale,p=!1;n&&h&&(n=[b.parsePercent(n[0],g),b.parsePercent(n[1],d)],h=b.parsePercent(h,Math.min(g,d)),!isNaN(n[0])&&!isNaN(n[1])&&!isNaN(h)&&(p=!0));var w;if(p){var w={};y>1?(w.width=h,w.height=h/y):(w.height=h,w.width=h*y),w.y=n[1]-w.height/2,w.x=n[0]-w.width/2}else i=l.getBoxLayoutParams(),i.aspect=y,w=D.getLayoutRect(i,{width:g,height:d});this.setViewRect(w.x,w.y,w.width,w.height),this.setCenter(l.get("center")),this.setZoom(l.get("zoom"))}function m(l,r){A.each(r.get("geoCoord"),function(s,c){l.addGeoCoord(c,s)})}var o={dimensions:T.prototype.dimensions,create:function(l,r){var s=[];l.eachComponent("geo",function(x,a){var i=x.get("map"),n=x.get("aspectScale"),h=!0,g=f.retrieveMap(i);g&&g[0]&&g[0].type==="svg"?(n==null&&(n=1),h=!1):n==null&&(n=.75);var d=new T(i+a,i,x.get("nameMap"),h);d.aspectScale=n,d.zoomLimit=x.get("scaleLimit"),s.push(d),m(d,x),x.coordinateSystem=d,d.model=x,d.resize=v,d.resize(x,r)}),l.eachSeries(function(x){var a=x.get("coordinateSystem");if(a==="geo"){var i=x.get("geoIndex")||0;x.coordinateSystem=s[i]}});var c={};return l.eachSeriesByType("map",function(x){if(!x.getHostGeoModel()){var a=x.getMapType();c[a]=c[a]||[],c[a].push(x)}}),A.each(c,function(x,a){var i=A.map(x,function(h){return h.get("nameMap")}),n=new T(a,a,A.mergeAll(i));n.zoomLimit=A.retrieve.apply(null,A.map(x,function(h){return h.get("scaleLimit")})),s.push(n),n.resize=v,n.aspectScale=x[0].get("aspectScale"),n.resize(x[0],r),A.each(x,function(h){h.coordinateSystem=n,m(n,h)})}),s},getFilledRegions:function(l,r,s){for(var c=(l||[]).slice(),x=A.createHashMap(),a=0;a<c.length;a++)x.set(c[a].name,c[a]);var i=C.load(r,s);return A.each(i.regions,function(n){var h=n.name;!x.get(h)&&c.push({name:h})}),c}};R.registerCoordinateSystem("geo",o);var u=o;X.exports=u},63487:function(X,z,e){var M=e(31879),F=M.each,R=e(47731),A=e(35454),T=A.makeInner,D=e(83297),b=e(23278),C=e(23941),f=e(17824),v=T(),m={load:function(u,l,r){var s=v(l).parsed;if(s)return s;var c=l.specialAreas||{},x=l.geoJSON,a;try{a=x?R(x,r):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return D(u,a),F(a,function(i){var n=i.name;b(u,i),C(u,i),f(u,i);var h=c[n];h&&i.transformTo(h.left,h.top,h.width,h.height)}),v(l).parsed={regions:a,boundingRect:o(a)}}};function o(u){for(var l,r=0;r<u.length;r++){var s=u[r].getBoundingRect();l=l||s.clone(),l.union(s)}return l}X.exports=m},72583:function(X,z,e){var M=e(1595),F=M.parseSVG,R=M.makeViewBoxTransform,A=e(27146),T=e(68518),D=e(31879),b=D.assert,C=D.createHashMap,f=e(95946),v=e(35454),m=v.makeInner,o=m(),u={load:function(r,s){var c=o(s).originRoot;if(c)return{root:c,boundingRect:o(s).boundingRect};var x=l(s);return o(s).originRoot=x.root,o(s).boundingRect=x.boundingRect,x},makeGraphic:function(r,s,c){var x=o(s),a=x.rootMap||(x.rootMap=C()),i=a.get(c);if(i)return i;var n=x.originRoot,h=x.boundingRect;return x.originRootHostKey?i=l(s,h).root:(x.originRootHostKey=c,i=n),a.set(c,i)},removeGraphic:function(r,s,c){var x=o(s),a=x.rootMap;a&&a.removeKey(c),c===x.originRootHostKey&&(x.originRootHostKey=null)}};function l(r,s){var c=r.svgXML,x,a;try{x=c&&F(c,{ignoreViewBox:!0,ignoreRootClip:!0})||{},a=x.root,b(a!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var i=x.width,n=x.height,h=x.viewBoxRect;if(s||(s=i==null||n==null?a.getBoundingRect():new f(0,0,0,0),i!=null&&(s.width=i),n!=null&&(s.height=n)),h){var g=R(h,s.width,s.height),d=a;a=new A,a.add(d),d.scale=g.scale,d.position=g.position}return a.setClipPath(new T({shape:s.plain()})),{root:a,boundingRect:s}}X.exports=u},8590:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=R.each,T=R.createHashMap,D=e(52310),b=e(63487),C=e(72583),f=e(95946),v={geoJSON:b,svg:C},m={load:function(r,s,c){var x=[],a=T(),i=T(),n,h=l(r);return A(h,function(g){var d=v[g.type].load(r,g,c);A(d.regions,function(p){var w=p.name;s&&s.hasOwnProperty(w)&&(p=p.cloneShallow(w=s[w])),x.push(p),a.set(w,p),i.set(w,p.center)});var y=d.boundingRect;y&&(n?n.union(y):n=y.clone())}),{regions:x,regionsMap:a,nameCoordMap:i,boundingRect:n||new f(0,0,0,0)}},makeGraphic:o("makeGraphic"),removeGraphic:o("removeGraphic")};function o(r){return function(s,c){var x=l(s),a=[];return A(x,function(i){var n=v[i.type][r];n&&a.push(n(s,i,c))}),a}}function u(r){}function l(r){var s=D.retrieveMap(r)||[];return s}X.exports=m},52310:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=R.createHashMap,T=R.isString,D=R.isArray,b=R.each,C=R.assert,f=e(1595),v=f.parseXML,m=A(),o={registerMap:function(l,r,s){var c;return D(r)?c=r:r.svg?c=[{type:"svg",source:r.svg,specialAreas:r.specialAreas}]:(r.geoJson&&!r.features&&(s=r.specialAreas,r=r.geoJson),c=[{type:"geoJSON",source:r,specialAreas:s}]),b(c,function(x){var a=x.type;a==="geoJson"&&(a=x.type="geoJSON");var i=u[a];i(x)}),m.set(l,c)},retrieveMap:function(l){return m.get(l)}},u={geoJSON:function(l){var r=l.source;l.geoJSON=T(r)?typeof JSON<"u"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r},svg:function(l){l.svgXML=v(l.source)}};X.exports=o},47731:function(X,z,e){var M=e(31879),F=e(55411);function R(D){if(!D.UTF8Encoding)return D;var b=D.UTF8Scale;b==null&&(b=1024);for(var C=D.features,f=0;f<C.length;f++)for(var v=C[f],m=v.geometry,o=m.coordinates,u=m.encodeOffsets,l=0;l<o.length;l++){var r=o[l];if(m.type==="Polygon")o[l]=A(r,u[l],b);else if(m.type==="MultiPolygon")for(var s=0;s<r.length;s++){var c=r[s];r[s]=A(c,u[l][s],b)}}return D.UTF8Encoding=!1,D}function A(D,b,C){for(var f=[],v=b[0],m=b[1],o=0;o<D.length;o+=2){var u=D.charCodeAt(o)-64,l=D.charCodeAt(o+1)-64;u=u>>1^-(u&1),l=l>>1^-(l&1),u+=v,l+=m,v=u,m=l,f.push([u/C,l/C])}return f}function T(D,b){return R(D),M.map(M.filter(D.features,function(C){return C.geometry&&C.properties&&C.geometry.coordinates.length>0}),function(C){var f=C.properties,v=C.geometry,m=v.coordinates,o=[];v.type==="Polygon"&&o.push({type:"polygon",exterior:m[0],interiors:m.slice(1)}),v.type==="MultiPolygon"&&M.each(m,function(l){l[0]&&o.push({type:"polygon",exterior:l[0],interiors:l.slice(1)})});var u=new F(f[b||"name"],o,f.cp);return u.properties=f,u})}X.exports=T},22782:function(X,z,e){var M=e(31879);function F(A,T){return T=T||[0,0],M.map([0,1],function(D){var b=T[D],C=A[D]/2,f=[],v=[];return f[D]=b-C,v[D]=b+C,f[1-D]=v[1-D]=T[1-D],Math.abs(this.dataToPoint(f)[D]-this.dataToPoint(v)[D])},this)}function R(A){var T=A.getBoundingRect();return{coordSys:{type:"geo",x:T.x,y:T.y,width:T.width,height:T.height,zoom:A.getZoom()},api:{coord:function(D){return A.dataToPoint(D)},size:M.bind(F,A)}}}X.exports=R},84696:function(X,z,e){var M=e(31879),F=e(60684),R=e(69003),A=e(73794),T=e(48354),D=e(42544),b=F.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return R([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(m){var o=this.activeIntervals=M.clone(m);if(o)for(var u=o.length-1;u>=0;u--)T.asc(o[u])},getActiveState:function(m){var o=this.activeIntervals;if(!o.length)return"normal";if(m==null||isNaN(m))return"inactive";if(o.length===1){var u=o[0];if(u[0]<=m&&m<=u[1])return"active"}else for(var l=0,r=o.length;l<r;l++)if(o[l][0]<=m&&m<=o[l][1])return"active";return"inactive"}}),C={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};M.merge(b.prototype,D);function f(m,o){return o.type||(o.data?"category":"value")}A("parallel",b,f,C);var v=b;X.exports=v},98613:function(X,z,e){var M=e(31879),F=e(43970),R=e(30871),A=e(99538),T=e(38343),D=e(48070),b=e(48354),C=e(38289),f=M.each,v=Math.min,m=Math.max,o=Math.floor,u=Math.ceil,l=b.round,r=Math.PI;function s(n,h,g){this._axesMap=M.createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._rect,this._model=n,this._init(n,h,g)}s.prototype={type:"parallel",constructor:s,_init:function(n,h,g){var d=n.dimensions,y=n.parallelAxisIndex;f(d,function(p,w){var S=y[w],O=h.getComponent("parallelAxis",S),B=this._axesMap.set(p,new T(p,A.createScaleByModel(O),[0,0],O.get("type"),S)),k=B.type==="category";B.onBand=k&&O.get("boundaryGap"),B.inverse=O.get("inverse"),O.axis=B,B.model=O,B.coordinateSystem=O.coordinateSystem=this},this)},update:function(n,h){this._updateAxesFromSeries(this._model,n)},containPoint:function(n){var h=this._makeLayoutInfo(),g=h.axisBase,d=h.layoutBase,y=h.pixelDimIndex,p=n[1-y],w=n[y];return p>=g&&p<=g+h.axisLength&&w>=d&&w<=d+h.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(n,h){h.eachSeries(function(g){if(n.contains(g,h)){var d=g.getData();f(this.dimensions,function(y){var p=this._axesMap.get(y);p.scale.unionExtentFromData(d,d.mapDimension(y)),A.niceScaleExtent(p.scale,p.model)},this)}},this)},resize:function(n,h){this._rect=R.getLayoutRect(n.getBoxLayoutParams(),{width:h.getWidth(),height:h.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var n=this._model,h=this._rect,g=["x","y"],d=["width","height"],y=n.get("layout"),p=y==="horizontal"?0:1,w=h[d[p]],S=[0,w],O=this.dimensions.length,B=c(n.get("axisExpandWidth"),S),k=c(n.get("axisExpandCount")||0,[0,O]),P=n.get("axisExpandable")&&O>3&&O>k&&k>1&&B>0&&w>0,L=n.get("axisExpandWindow"),E;if(L)E=c(L[1]-L[0],S),L[1]=L[0]+E;else{E=c(B*(k-1),S);var N=n.get("axisExpandCenter")||o(O/2);L=[B*N-E/2],L[1]=L[0]+E}var I=(w-E)/(O-k);I<3&&(I=0);var G=[o(l(L[0]/B,1))+1,u(l(L[1]/B,1))-1],W=I/B*L[0];return{layout:y,pixelDimIndex:p,layoutBase:h[g[p]],layoutLength:w,axisBase:h[g[1-p]],axisLength:h[d[1-p]],axisExpandable:P,axisExpandWidth:B,axisCollapseWidth:I,axisExpandWindow:L,axisCount:O,winInnerIndices:G,axisExpandWindow0Pos:W}},_layoutAxes:function(){var n=this._rect,h=this._axesMap,g=this.dimensions,d=this._makeLayoutInfo(),y=d.layout;h.each(function(p){var w=[0,d.axisLength],S=p.inverse?1:0;p.setExtent(w[S],w[1-S])}),f(g,function(p,w){var S=(d.axisExpandable?a:x)(w,d),O={horizontal:{x:S.position,y:d.axisLength},vertical:{x:0,y:S.position}},B={horizontal:r/2,vertical:0},k=[O[y].x+n.x,O[y].y+n.y],P=B[y],L=F.create();F.rotate(L,L,P),F.translate(L,L,k),this._axesLayout[p]={position:k,rotation:P,transform:L,axisNameAvailableWidth:S.axisNameAvailableWidth,axisLabelShow:S.axisLabelShow,nameTruncateMaxWidth:S.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(n){return this._axesMap.get(n)},dataToPoint:function(n,h){return this.axisCoordToPoint(this._axesMap.get(h).dataToCoord(n),h)},eachActiveState:function(n,h,g,d){g==null&&(g=0),d==null&&(d=n.count());var y=this._axesMap,p=this.dimensions,w=[],S=[];M.each(p,function(I){w.push(n.mapDimension(I)),S.push(y.get(I).model)});for(var O=this.hasAxisBrushed(),B=g;B<d;B++){var k;if(!O)k="normal";else{k="active";for(var P=n.getValues(w,B),L=0,E=p.length;L<E;L++){var N=S[L].getActiveState(P[L]);if(N==="inactive"){k="inactive";break}}}h(k,B)}},hasAxisBrushed:function(){for(var n=this.dimensions,h=this._axesMap,g=!1,d=0,y=n.length;d<y;d++)h.get(n[d]).model.getActiveState()!=="normal"&&(g=!0);return g},axisCoordToPoint:function(n,h){var g=this._axesLayout[h];return D.applyTransform([n,0],g.transform)},getAxisLayout:function(n){return M.clone(this._axesLayout[n])},getSlidedAxisExpandWindow:function(n){var h=this._makeLayoutInfo(),g=h.pixelDimIndex,d=h.axisExpandWindow.slice(),y=d[1]-d[0],p=[0,h.axisExpandWidth*(h.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:d};var w=n[g]-h.layoutBase-h.axisExpandWindow0Pos,S,O="slide",B=h.axisCollapseWidth,k=this._model.get("axisExpandSlideTriggerArea"),P=k[0]!=null;if(B)P&&B&&w<y*k[0]?(O="jump",S=w-y*k[2]):P&&B&&w>y*(1-k[0])?(O="jump",S=w-y*(1-k[2])):(S=w-y*k[1])>=0&&(S=w-y*(1-k[1]))<=0&&(S=0),S*=h.axisExpandWidth/B,S?C(S,d,p,"all"):O="none";else{var y=d[1]-d[0],L=p[1]*w/y;d=[m(0,L-y/2)],d[1]=v(p[1],d[0]+y),d[0]=d[1]-y}return{axisExpandWindow:d,behavior:O}}};function c(n,h){return v(m(n,h[0]),h[1])}function x(n,h){var g=h.layoutLength/(h.axisCount-1);return{position:g*n,axisNameAvailableWidth:g,axisLabelShow:!0}}function a(n,h){var g=h.layoutLength,d=h.axisExpandWidth,y=h.axisCount,p=h.axisCollapseWidth,w=h.winInnerIndices,S,O=p,B=!1,k;return n<w[0]?(S=n*p,k=p):n<=w[1]?(S=h.axisExpandWindow0Pos+n*d-h.axisExpandWindow[0],O=d,B=!0):(S=g-(y-1-n)*p,k=p),{position:S,axisNameAvailableWidth:O,axisLabelShow:B,nameTruncateMaxWidth:k}}var i=s;X.exports=i},38343:function(X,z,e){var M=e(31879),F=e(36492),R=function(T,D,b,C,f){F.call(this,T,D,b),this.type=C||"value",this.axisIndex=f};R.prototype={constructor:R,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"}},M.inherits(R,F);var A=R;X.exports=A},54084:function(X,z,e){var M=e(31879),F=e(60684);e(84696);var R=F.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){F.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(A){var T=this.option;A&&M.merge(T,A,!0),this._initDimensions()},contains:function(A,T){var D=A.get("parallelIndex");return D!=null&&T.getComponent("parallel",D)===this},setAxisExpand:function(A){M.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(T){A.hasOwnProperty(T)&&(this.option[T]=A[T])},this)},_initDimensions:function(){var A=this.dimensions=[],T=this.parallelAxisIndex=[],D=M.filter(this.dependentModels.parallelAxis,function(b){return(b.get("parallelIndex")||0)===this.componentIndex},this);M.each(D,function(b){A.push("dim"+b.get("dim")),T.push(b.componentIndex)})}});X.exports=R},39302:function(X,z,e){var M=e(98613),F=e(48642);function R(A,T){var D=[];return A.eachComponent("parallel",function(b,C){var f=new M(b,A,T);f.name="parallel_"+C,f.resize(b,T),b.coordinateSystem=f,f.model=b,D.push(f)}),A.eachSeries(function(b){if(b.get("coordinateSystem")==="parallel"){var C=A.queryComponents({mainType:"parallel",index:b.get("parallelIndex"),id:b.get("parallelId")})[0];b.coordinateSystem=C.coordinateSystem}}),D}F.register("parallel",{create:R})},49224:function(X,z,e){var M=e(31879),F=e(35454);function R(D){A(D),T(D)}function A(D){if(!D.parallel){var b=!1;M.each(D.series,function(C){C&&C.type==="parallel"&&(b=!0)}),b&&(D.parallel=[{}])}}function T(D){var b=F.normalizeToArray(D.parallelAxis);M.each(b,function(C){if(M.isObject(C)){var f=C.parallelIndex||0,v=F.normalizeToArray(D.parallel)[f];v&&v.parallelAxisDefault&&M.merge(C,v.parallelAxisDefault,!1)}})}X.exports=R},35566:function(X,z,e){var M=e(31879),F=e(72113),R=e(36492),A=e(35454),T=A.makeInner,D=T();function b(f,v){v=v||[0,360],R.call(this,"angle",f,v),this.type="category"}b.prototype={constructor:b,pointToData:function(f,v){return this.polar.pointToData(f,v)[this.dim==="radius"?0:1]},dataToAngle:R.prototype.dataToCoord,angleToData:R.prototype.coordToData,calculateCategoryInterval:function(){var f=this,v=f.getLabelModel(),m=f.scale,o=m.getExtent(),u=m.count();if(o[1]-o[0]<1)return 0;var l=o[0],r=f.dataToCoord(l+1)-f.dataToCoord(l),s=Math.abs(r),c=F.getBoundingRect(l,v.getFont(),"center","top"),x=Math.max(c.height,7),a=x/s;isNaN(a)&&(a=1/0);var i=Math.max(0,Math.floor(a)),n=D(f.model),h=n.lastAutoInterval,g=n.lastTickCount;return h!=null&&g!=null&&Math.abs(h-i)<=1&&Math.abs(g-u)<=1&&h>i?i=h:(n.lastTickCount=u,n.lastAutoInterval=i),i}},M.inherits(b,R);var C=b;X.exports=C},41470:function(X,z,e){var M=e(31879),F=e(60684),R=e(73794),A=e(42544),T=F.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});M.merge(T.prototype,A);var D={angle:{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};function b(C,f){return f.type||(f.data?"category":"value")}R("angle",T,b,D.angle),R("radius",T,b,D.radius)},99127:function(X,z,e){var M=e(56042),F=e(35566),R=function(T){this.name=T||"",this.cx=0,this.cy=0,this._radiusAxis=new M,this._angleAxis=new F,this._radiusAxis.polar=this._angleAxis.polar=this};R.prototype={type:"polar",axisPointerEnabled:!0,constructor:R,dimensions:["radius","angle"],model:null,containPoint:function(T){var D=this.pointToCoord(T);return this._radiusAxis.contain(D[0])&&this._angleAxis.contain(D[1])},containData:function(T){return this._radiusAxis.containData(T[0])&&this._angleAxis.containData(T[1])},getAxis:function(T){return this["_"+T+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(T){var D=[],b=this._angleAxis,C=this._radiusAxis;return b.scale.type===T&&D.push(b),C.scale.type===T&&D.push(C),D},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(T){var D=this._angleAxis;return T===D?this._radiusAxis:D},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(T){var D=T!=null&&T!=="auto"?this.getAxis(T):this.getBaseAxis();return{baseAxes:[D],otherAxes:[this.getOtherAxis(D)]}},dataToPoint:function(T,D){return this.coordToPoint([this._radiusAxis.dataToRadius(T[0],D),this._angleAxis.dataToAngle(T[1],D)])},pointToData:function(T,D){var b=this.pointToCoord(T);return[this._radiusAxis.radiusToData(b[0],D),this._angleAxis.angleToData(b[1],D)]},pointToCoord:function(T){var D=T[0]-this.cx,b=T[1]-this.cy,C=this.getAngleAxis(),f=C.getExtent(),v=Math.min(f[0],f[1]),m=Math.max(f[0],f[1]);C.inverse?v=m-360:m=v+360;var o=Math.sqrt(D*D+b*b);D/=o,b/=o;for(var u=Math.atan2(-b,D)/Math.PI*180,l=u<v?1:-1;u<v||u>m;)u+=l*360;return[o,u]},coordToPoint:function(T){var D=T[0],b=T[1]/180*Math.PI,C=Math.cos(b)*D+this.cx,f=-Math.sin(b)*D+this.cy;return[C,f]},getArea:function(){var T=this.getAngleAxis(),D=this.getRadiusAxis(),b=D.getExtent().slice();b[0]>b[1]&&b.reverse();var C=T.getExtent(),f=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:b[0],r:b[1],startAngle:-C[0]*f,endAngle:-C[1]*f,clockwise:T.inverse,contain:function(v,m){var o=v-this.cx,u=m-this.cy,l=o*o+u*u,r=this.r,s=this.r0;return l<=r*r&&l>=s*s}}}};var A=R;X.exports=A},46822:function(X,z,e){var M=e(3440);e(41470);var F=M.extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(R){var A,T=this.ecModel;return T.eachComponent(R,function(D){D.getCoordSysModel()===this&&(A=D)},this),A},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});X.exports=F},56042:function(X,z,e){var M=e(31879),F=e(36492);function R(T,D){F.call(this,"radius",T,D),this.type="category"}R.prototype={constructor:R,pointToData:function(T,D){return this.polar.pointToData(T,D)[this.dim==="radius"?0:1]},dataToRadius:F.prototype.dataToCoord,radiusToData:F.prototype.coordToData},M.inherits(R,F);var A=R;X.exports=A},68137:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(99127),T=e(48354),D=T.parsePercent,b=e(99538),C=b.createScaleByModel,f=b.niceScaleExtent,v=e(48642),m=e(53618),o=m.getStackedDimension;e(46822);function u(c,x,a){var i=x.get("center"),n=a.getWidth(),h=a.getHeight();c.cx=D(i[0],n),c.cy=D(i[1],h);var g=c.getRadiusAxis(),d=Math.min(n,h)/2,y=x.get("radius");y==null?y=[0,"100%"]:R.isArray(y)||(y=[0,y]),y=[D(y[0],d),D(y[1],d)],g.inverse?g.setExtent(y[1],y[0]):g.setExtent(y[0],y[1])}function l(c,x){var a=this,i=a.getAngleAxis(),n=a.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),c.eachSeries(function(d){if(d.coordinateSystem===a){var y=d.getData();R.each(y.mapDimension("radius",!0),function(p){n.scale.unionExtentFromData(y,o(y,p))}),R.each(y.mapDimension("angle",!0),function(p){i.scale.unionExtentFromData(y,o(y,p))})}}),f(i.scale,i.model),f(n.scale,n.model),i.type==="category"&&!i.onBand){var h=i.getExtent(),g=360/i.scale.count();i.inverse?h[1]+=g:h[1]-=g,i.setExtent(h[0],h[1])}}function r(c,x){if(c.type=x.get("type"),c.scale=C(x),c.onBand=x.get("boundaryGap")&&c.type==="category",c.inverse=x.get("inverse"),x.mainType==="angleAxis"){c.inverse^=x.get("clockwise");var a=x.get("startAngle");c.setExtent(a,a+(c.inverse?-360:360))}x.axis=c,c.model=x}var s={dimensions:A.prototype.dimensions,create:function(c,x){var a=[];return c.eachComponent("polar",function(i,n){var h=new A(n);h.update=l;var g=h.getRadiusAxis(),d=h.getAngleAxis(),y=i.findAxisModel("radiusAxis"),p=i.findAxisModel("angleAxis");r(g,y),r(d,p),u(h,i,x),a.push(h),i.coordinateSystem=h,h.model=i}),c.eachSeries(function(i){if(i.get("coordinateSystem")==="polar"){var n=c.queryComponents({mainType:"polar",index:i.get("polarIndex"),id:i.get("polarId")})[0];i.coordinateSystem=n.coordinateSystem}}),a}};v.register("polar",s)},94914:function(X,z,e){var M=e(31879);function F(A,T){return M.map(["Radius","Angle"],function(D,b){var C=this["get"+D+"Axis"](),f=T[b],v=A[b]/2,m="dataTo"+D,o=C.type==="category"?C.getBandWidth():Math.abs(C[m](f-v)-C[m](f+v));return D==="Angle"&&(o=o*Math.PI/180),o},this)}function R(A){var T=A.getRadiusAxis(),D=A.getAngleAxis(),b=T.getExtent();return b[0]>b[1]&&b.reverse(),{coordSys:{type:"polar",cx:A.cx,cy:A.cy,r:b[1],r0:b[0]},api:{coord:M.bind(function(C){var f=T.dataToRadius(C[0]),v=D.dataToAngle(C[1]),m=A.coordToPoint([f,v]);return m.push(f,v*Math.PI/180),m}),size:M.bind(F,A)}}}X.exports=R},23961:function(X,z,e){var M=e(31879),F=e(36492);function R(T,D,b){F.call(this,T,D,b),this.type="value",this.angle=0,this.name="",this.model}M.inherits(R,F);var A=R;X.exports=A},25390:function(X,z,e){var M=e(31879),F=e(23961),R=e(15443),A=e(48354),T=e(99538),D=T.getScaleExtent,b=T.niceScaleExtent,C=e(48642),f=e(13536);function v(o,u,l){this._model=o,this.dimensions=[],this._indicatorAxes=M.map(o.getIndicatorModels(),function(r,s){var c="indicator_"+s,x=new F(c,r.get("axisType")==="log"?new f:new R);return x.name=r.get("name"),x.model=r,r.axis=x,this.dimensions.push(c),x},this),this.resize(o,l),this.cx,this.cy,this.r,this.r0,this.startAngle}v.prototype.getIndicatorAxes=function(){return this._indicatorAxes},v.prototype.dataToPoint=function(o,u){var l=this._indicatorAxes[u];return this.coordToPoint(l.dataToCoord(o),u)},v.prototype.coordToPoint=function(o,u){var l=this._indicatorAxes[u],r=l.angle,s=this.cx+o*Math.cos(r),c=this.cy-o*Math.sin(r);return[s,c]},v.prototype.pointToData=function(o){var u=o[0]-this.cx,l=o[1]-this.cy,r=Math.sqrt(u*u+l*l);u/=r,l/=r;for(var s=Math.atan2(-l,u),c=1/0,x,a=-1,i=0;i<this._indicatorAxes.length;i++){var n=this._indicatorAxes[i],h=Math.abs(s-n.angle);h<c&&(x=n,a=i,c=h)}return[a,+(x&&x.coordToData(r))]},v.prototype.resize=function(o,u){var l=o.get("center"),r=u.getWidth(),s=u.getHeight(),c=Math.min(r,s)/2;this.cx=A.parsePercent(l[0],r),this.cy=A.parsePercent(l[1],s),this.startAngle=o.get("startAngle")*Math.PI/180;var x=o.get("radius");(typeof x=="string"||typeof x=="number")&&(x=[0,x]),this.r0=A.parsePercent(x[0],c),this.r=A.parsePercent(x[1],c),M.each(this._indicatorAxes,function(a,i){a.setExtent(this.r0,this.r);var n=this.startAngle+i*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),a.angle=n},this)},v.prototype.update=function(o,u){var l=this._indicatorAxes,r=this._model;M.each(l,function(x){x.scale.setExtent(1/0,-1/0)}),o.eachSeriesByType("radar",function(x,a){if(!(x.get("coordinateSystem")!=="radar"||o.getComponent("radar",x.get("radarIndex"))!==r)){var i=x.getData();M.each(l,function(n){n.scale.unionExtentFromData(i,i.mapDimension(n.dim))})}},this);var s=r.get("splitNumber");function c(x){var a=Math.pow(10,Math.floor(Math.log(x)/Math.LN10)),i=x/a;return i===2?i=5:i*=2,i*a}M.each(l,function(x,a){var i=D(x.scale,x.model).extent;b(x.scale,x.model);var n=x.model,h=x.scale,g=n.getMin(),d=n.getMax(),y=h.getInterval();if(g!=null&&d!=null)h.setExtent(+g,+d),h.setInterval((d-g)/s);else if(g!=null){var p;do p=g+y*s,h.setExtent(+g,p),h.setInterval(y),y=c(y);while(p<i[1]&&isFinite(p)&&isFinite(i[1]))}else if(d!=null){var w;do w=d-y*s,h.setExtent(w,+d),h.setInterval(y),y=c(y);while(w>i[0]&&isFinite(w)&&isFinite(i[0]))}else{var S=h.getTicks().length-1;S>s&&(y=c(y));var p=Math.ceil(i[1]/y)*y,w=A.round(p-y*s);h.setExtent(w,p),h.setInterval(y)}})},v.dimensions=[],v.create=function(o,u){var l=[];return o.eachComponent("radar",function(r){var s=new v(r,o,u);l.push(s),r.coordinateSystem=s}),o.eachSeriesByType("radar",function(r){r.get("coordinateSystem")==="radar"&&(r.coordinateSystem=l[r.get("radarIndex")||0])}),l},C.register("radar",v);var m=v;X.exports=m},96034:function(X,z,e){var M=e(3440),F=e(31879),R=e(43655),A=e(56785),T=e(42544),D=R.valueAxis;function b(v,m){return F.defaults({show:m},v)}var C=M.extendComponentModel({type:"radar",optionUpdated:function(){var v=this.get("boundaryGap"),m=this.get("splitNumber"),o=this.get("scale"),u=this.get("axisLine"),l=this.get("axisTick"),r=this.get("axisType"),s=this.get("axisLabel"),c=this.get("name"),x=this.get("name.show"),a=this.get("name.formatter"),i=this.get("nameGap"),n=this.get("triggerEvent"),h=F.map(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var d=c;if(g.color!=null&&(d=F.defaults({color:g.color},c)),g=F.merge(F.clone(g),{boundaryGap:v,splitNumber:m,scale:o,axisLine:u,axisTick:l,axisType:r,axisLabel:s,name:g.text,nameLocation:"end",nameGap:i,nameTextStyle:d,triggerEvent:n},!1),x||(g.name=""),typeof a=="string"){var y=g.name;g.name=a.replace("{value}",y??"")}else typeof a=="function"&&(g.name=a(g.name,g));var p=F.extend(new A(g,null,this.ecModel),T);return p.mainType="radar",p.componentIndex=this.componentIndex,p},this);this.getIndicatorModels=function(){return h}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:F.merge({lineStyle:{color:"#bbb"}},D.axisLine),axisLabel:b(D.axisLabel,!1),axisTick:b(D.axisTick,!1),axisType:"interval",splitLine:b(D.splitLine,!0),splitArea:b(D.splitArea,!0),indicator:[]}}),f=C;X.exports=f},52639:function(X,z,e){var M=e(31879),F=e(60684),R=e(73794),A=e(42544),T=F.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}}),D={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}};function b(f,v){return v.type||(v.data?"category":"value")}M.merge(T.prototype,A),R("single",T,b,D);var C=T;X.exports=C},20436:function(X,z,e){var M=e(84957),F=e(99538),R=e(30871),A=R.getLayoutRect,T=e(31879),D=T.each;function b(f,v,m){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(f,v,m),this.model=f}b.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:b,_init:function(f,v,m){var o=this.dimension,u=new M(o,F.createScaleByModel(f),[0,0],f.get("type"),f.get("position")),l=u.type==="category";u.onBand=l&&f.get("boundaryGap"),u.inverse=f.get("inverse"),u.orient=f.get("orient"),f.axis=u,u.model=f,u.coordinateSystem=this,this._axis=u},update:function(f,v){f.eachSeries(function(m){if(m.coordinateSystem===this){var o=m.getData();D(o.mapDimension(this.dimension,!0),function(u){this._axis.scale.unionExtentFromData(o,u)},this),F.niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(f,v){this._rect=A({left:f.get("left"),top:f.get("top"),right:f.get("right"),bottom:f.get("bottom"),width:f.get("width"),height:f.get("height")},{width:v.getWidth(),height:v.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var f=this._rect,v=this._axis,m=v.isHorizontal(),o=m?[0,f.width]:[0,f.height],u=v.reverse?1:0;v.setExtent(o[u],o[1-u]),this._updateAxisTransform(v,m?f.x:f.y)},_updateAxisTransform:function(f,v){var m=f.getExtent(),o=m[0]+m[1],u=f.isHorizontal();f.toGlobalCoord=u?function(l){return l+v}:function(l){return o-l+v},f.toLocalCoord=u?function(l){return l-v}:function(l){return o-l+v}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(f){var v=this.getRect(),m=this.getAxis(),o=m.orient;return o==="horizontal"?m.contain(m.toLocalCoord(f[0]))&&f[1]>=v.y&&f[1]<=v.y+v.height:m.contain(m.toLocalCoord(f[1]))&&f[0]>=v.y&&f[0]<=v.y+v.height},pointToData:function(f){var v=this.getAxis();return[v.coordToData(v.toLocalCoord(f[v.orient==="horizontal"?0:1]))]},dataToPoint:function(f){var v=this.getAxis(),m=this.getRect(),o=[],u=v.orient==="horizontal"?0:1;return f instanceof Array&&(f=f[0]),o[u]=v.toGlobalCoord(v.dataToCoord(+f)),o[1-u]=u===0?m.y+m.height/2:m.x+m.width/2,o}};var C=b;X.exports=C},84957:function(X,z,e){var M=e(31879),F=e(36492),R=function(T,D,b,C,f){F.call(this,T,D,b),this.type=C||"value",this.position=f||"bottom",this.orient=null};R.prototype={constructor:R,model:null,isHorizontal:function(){var T=this.position;return T==="top"||T==="bottom"},pointToData:function(T,D){return this.coordinateSystem.pointToData(T,D)[0]},toGlobalCoord:null,toLocalCoord:null},M.inherits(R,F);var A=R;X.exports=A},76966:function(X,z,e){var M=e(31879);function F(A,T){var D=this.getAxis(),b=T instanceof Array?T[0]:T,C=(A instanceof Array?A[0]:A)/2;return D.type==="category"?D.getBandWidth():Math.abs(D.dataToCoord(b-C)-D.dataToCoord(b+C))}function R(A){var T=A.getRect();return{coordSys:{type:"singleAxis",x:T.x,y:T.y,width:T.width,height:T.height},api:{coord:function(D){return A.dataToPoint(D)},size:M.bind(F,A)}}}X.exports=R},60367:function(X,z,e){var M=e(31879);function F(R,A){A=A||{};var T=R.coordinateSystem,D=R.axis,b={},C=D.position,f=D.orient,v=T.getRect(),m=[v.x,v.x+v.width,v.y,v.y+v.height],o={horizontal:{top:m[2],bottom:m[3]},vertical:{left:m[0],right:m[1]}};b.position=[f==="vertical"?o.vertical[C]:m[0],f==="horizontal"?o.horizontal[C]:m[3]];var u={horizontal:0,vertical:1};b.rotation=Math.PI/2*u[f];var l={top:-1,bottom:1,right:1,left:-1};b.labelDirection=b.tickDirection=b.nameDirection=l[C],R.get("axisTick.inside")&&(b.tickDirection=-b.tickDirection),M.retrieve(A.labelInside,R.get("axisLabel.inside"))&&(b.labelDirection=-b.labelDirection);var r=A.rotate;return r==null&&(r=R.get("axisLabel.rotate")),b.labelRotation=C==="top"?-r:r,b.z2=1,b}z.layout=F},65178:function(X,z,e){var M=e(20436),F=e(48642);function R(A,T){var D=[];return A.eachComponent("singleAxis",function(b,C){var f=new M(b,A,T);f.name="single_"+C,f.resize(b,T),b.coordinateSystem=f,D.push(f)}),A.eachSeries(function(b){if(b.get("coordinateSystem")==="singleAxis"){var C=A.queryComponents({mainType:"singleAxis",index:b.get("singleAxisIndex"),id:b.get("singleAxisId")})[0];b.coordinateSystem=C&&C.coordinateSystem}}),D}F.register("single",{create:R,dimensions:M.prototype.dimensions})},65453:function(X){function z(R){return R}function e(R,A,T,D,b){this._old=R,this._new=A,this._oldKeyGetter=T||z,this._newKeyGetter=D||z,this.context=b}e.prototype={constructor:e,add:function(R){return this._add=R,this},update:function(R){return this._update=R,this},remove:function(R){return this._remove=R,this},execute:function(){var R=this._old,A=this._new,T={},D={},b=[],C=[],f;for(M(R,T,b,"_oldKeyGetter",this),M(A,D,C,"_newKeyGetter",this),f=0;f<R.length;f++){var v=b[f],m=D[v];if(m!=null){var o=m.length;o?(o===1&&(D[v]=null),m=m.shift()):D[v]=null,this._update&&this._update(m,f)}else this._remove&&this._remove(f)}for(var f=0;f<C.length;f++){var v=C[f];if(D.hasOwnProperty(v)){var m=D[v];if(m==null)continue;if(!m.length)this._add&&this._add(m);else for(var u=0,o=m.length;u<o;u++)this._add&&this._add(m[u])}}}};function M(R,A,T,D,b){for(var C=0;C<R.length;C++){var f="_ec_"+b[D](R[C],C),v=A[f];v==null?(T.push(f),A[f]=C):(v.length||(A[f]=v=[v]),v.push(C))}}var F=e;X.exports=F},38166:function(X,z,e){var M=e(31879);function F(A){A!=null&&M.extend(this,A),this.otherDims={}}var R=F;X.exports=R},31517:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(28108),T=A.enableClassCheck;function D(u){return"_EC_"+u}var b=function(u){this._directed=u||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},C=b.prototype;C.type="graph",C.isDirected=function(){return this._directed},C.addNode=function(u,l){u=u==null?""+l:""+u;var r=this._nodesMap;if(!r[D(u)]){var s=new f(u,l);return s.hostGraph=this,this.nodes.push(s),r[D(u)]=s,s}},C.getNodeByIndex=function(u){var l=this.data.getRawIndex(u);return this.nodes[l]},C.getNodeById=function(u){return this._nodesMap[D(u)]},C.addEdge=function(u,l,r){var s=this._nodesMap,c=this._edgesMap;if(typeof u=="number"&&(u=this.nodes[u]),typeof l=="number"&&(l=this.nodes[l]),f.isInstance(u)||(u=s[D(u)]),f.isInstance(l)||(l=s[D(l)]),!(!u||!l)){var x=u.id+"-"+l.id,a=new v(u,l,r);return a.hostGraph=this,this._directed&&(u.outEdges.push(a),l.inEdges.push(a)),u.edges.push(a),u!==l&&l.edges.push(a),this.edges.push(a),c[x]=a,a}},C.getEdgeByIndex=function(u){var l=this.edgeData.getRawIndex(u);return this.edges[l]},C.getEdge=function(u,l){f.isInstance(u)&&(u=u.id),f.isInstance(l)&&(l=l.id);var r=this._edgesMap;return this._directed?r[u+"-"+l]:r[u+"-"+l]||r[l+"-"+u]},C.eachNode=function(u,l){for(var r=this.nodes,s=r.length,c=0;c<s;c++)r[c].dataIndex>=0&&u.call(l,r[c],c)},C.eachEdge=function(u,l){for(var r=this.edges,s=r.length,c=0;c<s;c++)r[c].dataIndex>=0&&r[c].node1.dataIndex>=0&&r[c].node2.dataIndex>=0&&u.call(l,r[c],c)},C.breadthFirstTraverse=function(u,l,r,s){if(f.isInstance(l)||(l=this._nodesMap[D(l)]),!!l){for(var c=r==="out"?"outEdges":r==="in"?"inEdges":"edges",x=0;x<this.nodes.length;x++)this.nodes[x].__visited=!1;if(!u.call(s,l,null))for(var a=[l];a.length;)for(var i=a.shift(),n=i[c],x=0;x<n.length;x++){var h=n[x],g=h.node1===i?h.node2:h.node1;if(!g.__visited){if(u.call(s,g,i))return;a.push(g),g.__visited=!0}}}},C.update=function(){for(var u=this.data,l=this.edgeData,r=this.nodes,s=this.edges,c=0,x=r.length;c<x;c++)r[c].dataIndex=-1;for(var c=0,x=u.count();c<x;c++)r[u.getRawIndex(c)].dataIndex=c;l.filterSelf(function(a){var i=s[l.getRawIndex(a)];return i.node1.dataIndex>=0&&i.node2.dataIndex>=0});for(var c=0,x=s.length;c<x;c++)s[c].dataIndex=-1;for(var c=0,x=l.count();c<x;c++)s[l.getRawIndex(c)].dataIndex=c},C.clone=function(){for(var u=new b(this._directed),l=this.nodes,r=this.edges,s=0;s<l.length;s++)u.addNode(l[s].id,l[s].dataIndex);for(var s=0;s<r.length;s++){var c=r[s];u.addEdge(c.node1.id,c.node2.id,c.dataIndex)}return u};function f(u,l){this.id=u??"",this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=l??-1}f.prototype={constructor:f,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(u){if(!(this.dataIndex<0)){var l=this.hostGraph,r=l.data.getItemModel(this.dataIndex);return r.getModel(u)}}};function v(u,l,r){this.node1=u,this.node2=l,this.dataIndex=r??-1}v.prototype.getModel=function(u){if(!(this.dataIndex<0)){var l=this.hostGraph,r=l.edgeData.getItemModel(this.dataIndex);return r.getModel(u)}};var m=function(u,l){return{getValue:function(r){var s=this[u][l];return s.get(s.getDimension(r||"value"),this.dataIndex)},setVisual:function(r,s){this.dataIndex>=0&&this[u][l].setItemVisual(this.dataIndex,r,s)},getVisual:function(r,s){return this[u][l].getItemVisual(this.dataIndex,r,s)},setLayout:function(r,s){this.dataIndex>=0&&this[u][l].setItemLayout(this.dataIndex,r,s)},getLayout:function(){return this[u][l].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[u][l].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[u][l].getRawIndex(this.dataIndex)}}};R.mixin(f,m("hostGraph","data")),R.mixin(v,m("hostGraph","edgeData")),b.Node=f,b.Edge=v,T(f),T(v);var o=b;X.exports=o},58677:function(X,z,e){var M=e(49500),F=e(50617),R=F.__DEV__,A=e(31879),T=e(56785),D=e(65453),b=e(4345),C=e(58708),f=C.defaultDimValueGetters,v=C.DefaultDataProvider,m=e(17071),o=m.summarizeDimensions,u=e(38166),l=A.isObject,r="undefined",s=-1,c="e\0\0",x={float:typeof Float64Array===r?Array:Float64Array,int:typeof Int32Array===r?Array:Int32Array,ordinal:Array,number:Array,time:Array},a=typeof Uint32Array===r?Array:Uint32Array,i=typeof Int32Array===r?Array:Int32Array,n=typeof Uint16Array===r?Array:Uint16Array;function h(V){return V._rawCount>65535?a:n}function g(V){var Y=V.constructor;return Y===Array?V.slice():new Y(V)}var d=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],y=["_extent","_approximateExtent","_rawExtent"];function p(V,Y){A.each(d.concat(Y.__wrappedMethods||[]),function($){Y.hasOwnProperty($)&&(V[$]=Y[$])}),V.__wrappedMethods=Y.__wrappedMethods,A.each(y,function($){V[$]=A.clone(Y[$])}),V._calculationInfo=A.extend(Y._calculationInfo)}var w=function(V,Y){V=V||["x","y"];for(var $={},K=[],J={},Q=0;Q<V.length;Q++){var et=V[Q];A.isString(et)?et=new u({name:et}):et instanceof u||(et=new u(et));var nt=et.name;et.type=et.type||"float",et.coordDim||(et.coordDim=nt,et.coordDimIndex=0),et.otherDims=et.otherDims||{},K.push(nt),$[nt]=et,et.index=Q,et.createInvertedIndices&&(J[nt]=[])}this.dimensions=K,this._dimensionInfos=$,this.hostModel=Y,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=o(this),this._invertedIndicesMap=J,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},S=w.prototype;S.type="list",S.hasItemOption=!0,S.getDimension=function(V){return(typeof V=="number"||!isNaN(V)&&!this._dimensionInfos.hasOwnProperty(V))&&(V=this.dimensions[V]),V},S.getDimensionInfo=function(V){return this._dimensionInfos[this.getDimension(V)]},S.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},S.mapDimension=function(V,Y){var $=this._dimensionsSummary;if(Y==null)return $.encodeFirstDimNotExtra[V];var K=$.encode[V];return Y===!0?(K||[]).slice():K&&K[Y]},S.initData=function(V,Y,$){var K=b.isInstance(V)||A.isArrayLike(V);K&&(V=new v(V,this.dimensions.length)),this._rawData=V,this._storage={},this._indices=null,this._nameList=Y||[],this._idList=[],this._nameRepeatCount={},$||(this.hasItemOption=!1),this.defaultDimValueGetter=f[this._rawData.getSource().sourceFormat],this._dimValueGetter=$=$||this.defaultDimValueGetter,this._dimValueGetterArrayRows=f.arrayRows,this._rawExtent={},this._initDataFromProvider(0,V.count()),V.pure&&(this.hasItemOption=!1)},S.getProvider=function(){return this._rawData},S.appendData=function(V){var Y=this._rawData,$=this.count();Y.appendData(V);var K=Y.count();Y.persistent||(K+=$),this._initDataFromProvider($,K)},S.appendValues=function(V,Y){for(var $=this._chunkSize,K=this._storage,J=this.dimensions,Q=J.length,et=this._rawExtent,nt=this.count(),st=nt+Math.max(V.length,Y?Y.length:0),ut=this._chunkCount,rt=0;rt<Q;rt++){var ht=J[rt];et[ht]||(et[ht]=Z()),K[ht]||(K[ht]=[]),O(K,this._dimensionInfos[ht],$,ut,st),this._chunkCount=K[ht].length}for(var Pt=new Array(Q),wt=nt;wt<st;wt++){for(var At=wt-nt,Nt=Math.floor(wt/$),Lt=wt%$,Rt=0;Rt<Q;Rt++){var ht=J[Rt],Tt=this._dimValueGetterArrayRows(V[At]||Pt,ht,At,Rt);K[ht][Nt][Lt]=Tt;var mt=et[ht];Tt<mt[0]&&(mt[0]=Tt),Tt>mt[1]&&(mt[1]=Tt)}Y&&(this._nameList[wt]=Y[At])}this._rawCount=this._count=st,this._extent={},B(this)},S._initDataFromProvider=function(V,Y){if(!(V>=Y)){for(var $=this._chunkSize,K=this._rawData,J=this._storage,Q=this.dimensions,et=Q.length,nt=this._dimensionInfos,st=this._nameList,ut=this._idList,rt=this._rawExtent,ht=this._nameRepeatCount={},Pt,wt=this._chunkCount,At=0;At<et;At++){var Nt=Q[At];rt[Nt]||(rt[Nt]=Z());var Lt=nt[Nt];Lt.otherDims.itemName===0&&(Pt=this._nameDimIdx=At),Lt.otherDims.itemId===0&&(this._idDimIdx=At),J[Nt]||(J[Nt]=[]),O(J,Lt,$,wt,Y),this._chunkCount=J[Nt].length}for(var Rt=new Array(et),Tt=V;Tt<Y;Tt++){Rt=K.getItem(Tt,Rt);for(var mt=Math.floor(Tt/$),Ft=Tt%$,ct=0;ct<et;ct++){var Nt=Q[ct],vt=J[Nt][mt],Dt=this._dimValueGetter(Rt,Nt,Tt,ct);vt[Ft]=Dt;var Ct=rt[Nt];Dt<Ct[0]&&(Ct[0]=Dt),Dt>Ct[1]&&(Ct[1]=Dt)}if(!K.pure){var jt=st[Tt];if(Rt&&jt==null){if(Rt.name!=null)st[Tt]=jt=Rt.name;else if(Pt!=null){var zt=Q[Pt],Yt=J[zt][mt];if(Yt){jt=Yt[Ft];var Zt=nt[zt].ordinalMeta;Zt&&Zt.categories.length&&(jt=Zt.categories[jt])}}}var ft=Rt==null?null:Rt.id;ft==null&&jt!=null&&(ht[jt]=ht[jt]||0,ft=jt,ht[jt]>0&&(ft+="__ec__"+ht[jt]),ht[jt]++),ft!=null&&(ut[Tt]=ft)}}!K.persistent&&K.clean&&K.clean(),this._rawCount=this._count=Y,this._extent={},B(this)}};function O(V,Y,$,K,J){var Q=x[Y.type],et=K-1,nt=Y.name,st=V[nt][et];if(st&&st.length<$){for(var ut=new Q(Math.min(J-et*$,$)),rt=0;rt<st.length;rt++)ut[rt]=st[rt];V[nt][et]=ut}for(var ht=K*$;ht<J;ht+=$)V[nt].push(new Q(Math.min(J-ht,$)))}function B(V){var Y=V._invertedIndicesMap;A.each(Y,function($,K){var J=V._dimensionInfos[K],Q=J.ordinalMeta;if(Q){$=Y[K]=new i(Q.categories.length);for(var et=0;et<$.length;et++)$[et]=s;for(var et=0;et<V._count;et++)$[V.get(K,et)]=et}})}function k(V,Y,$){var K;if(Y!=null){var J=V._chunkSize,Q=Math.floor($/J),et=$%J,nt=V.dimensions[Y],st=V._storage[nt][Q];if(st){K=st[et];var ut=V._dimensionInfos[nt].ordinalMeta;ut&&ut.categories.length&&(K=ut.categories[K])}}return K}S.count=function(){return this._count},S.getIndices=function(){var V,Y=this._indices;if(Y){var $=Y.constructor,K=this._count;if($===Array){V=new $(K);for(var J=0;J<K;J++)V[J]=Y[J]}else V=new $(Y.buffer,0,K)}else for(var $=h(this),V=new $(this.count()),J=0;J<V.length;J++)V[J]=J;return V},S.get=function(V,Y){if(!(Y>=0&&Y<this._count))return NaN;var $=this._storage;if(!$[V])return NaN;Y=this.getRawIndex(Y);var K=Math.floor(Y/this._chunkSize),J=Y%this._chunkSize,Q=$[V][K],et=Q[J];return et},S.getByRawIndex=function(V,Y){if(!(Y>=0&&Y<this._rawCount))return NaN;var $=this._storage[V];if(!$)return NaN;var K=Math.floor(Y/this._chunkSize),J=Y%this._chunkSize,Q=$[K];return Q[J]},S._getFast=function(V,Y){var $=Math.floor(Y/this._chunkSize),K=Y%this._chunkSize,J=this._storage[V][$];return J[K]},S.getValues=function(V,Y){var $=[];A.isArray(V)||(Y=V,V=this.dimensions);for(var K=0,J=V.length;K<J;K++)$.push(this.get(V[K],Y));return $},S.hasValue=function(V){for(var Y=this._dimensionsSummary.dataDimsOnCoord,$=0,K=Y.length;$<K;$++)if(isNaN(this.get(Y[$],V)))return!1;return!0},S.getDataExtent=function(V){V=this.getDimension(V);var Y=this._storage[V],$=Z();if(!Y)return $;var K=this.count(),J=!this._indices,Q;if(J)return this._rawExtent[V].slice();if(Q=this._extent[V],Q)return Q.slice();Q=$;for(var et=Q[0],nt=Q[1],st=0;st<K;st++){var ut=this._getFast(V,this.getRawIndex(st));ut<et&&(et=ut),ut>nt&&(nt=ut)}return Q=[et,nt],this._extent[V]=Q,Q},S.getApproximateExtent=function(V){return V=this.getDimension(V),this._approximateExtent[V]||this.getDataExtent(V)},S.setApproximateExtent=function(V,Y){Y=this.getDimension(Y),this._approximateExtent[Y]=V.slice()},S.getCalculationInfo=function(V){return this._calculationInfo[V]},S.setCalculationInfo=function(V,Y){l(V)?A.extend(this._calculationInfo,V):this._calculationInfo[V]=Y},S.getSum=function(V){var Y=this._storage[V],$=0;if(Y)for(var K=0,J=this.count();K<J;K++){var Q=this.get(V,K);isNaN(Q)||($+=Q)}return $},S.getMedian=function(V){var Y=[];this.each(V,function(J,Q){isNaN(J)||Y.push(J)});var $=[].concat(Y).sort(function(J,Q){return J-Q}),K=this.count();return K===0?0:K%2===1?$[(K-1)/2]:($[K/2]+$[K/2-1])/2},S.rawIndexOf=function(V,Y){var $=V&&this._invertedIndicesMap[V],K=$[Y];return K==null||isNaN(K)?s:K},S.indexOfName=function(V){for(var Y=0,$=this.count();Y<$;Y++)if(this.getName(Y)===V)return Y;return-1},S.indexOfRawIndex=function(V){if(V>=this._rawCount||V<0)return-1;if(!this._indices)return V;var Y=this._indices,$=Y[V];if($!=null&&$<this._count&&$===V)return V;for(var K=0,J=this._count-1;K<=J;){var Q=(K+J)/2|0;if(Y[Q]<V)K=Q+1;else if(Y[Q]>V)J=Q-1;else return Q}return-1},S.indicesOfNearest=function(V,Y,$){var K=this._storage,J=K[V],Q=[];if(!J)return Q;$==null&&($=1/0);for(var et=1/0,nt=-1,st=0,ut=0,rt=this.count();ut<rt;ut++){var ht=Y-this.get(V,ut),Pt=Math.abs(ht);Pt<=$&&((Pt<et||Pt===et&&ht>=0&&nt<0)&&(et=Pt,nt=ht,st=0),ht===nt&&(Q[st++]=ut))}return Q.length=st,Q},S.getRawIndex=P;function P(V){return V}function L(V){return V<this._count&&V>=0?this._indices[V]:-1}S.getRawDataItem=function(V){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(V));for(var Y=[],$=0;$<this.dimensions.length;$++){var K=this.dimensions[$];Y.push(this.get(K,V))}return Y},S.getName=function(V){var Y=this.getRawIndex(V);return this._nameList[Y]||k(this,this._nameDimIdx,Y)||""},S.getId=function(V){return E(this,this.getRawIndex(V))};function E(V,Y){var $=V._idList[Y];return $==null&&($=k(V,V._idDimIdx,Y)),$==null&&($=c+Y),$}function N(V){return A.isArray(V)||(V=[V]),V}function I(V,Y){for(var $=0;$<Y.length;$++)V._dimensionInfos[Y[$]]||M.error("Unkown dimension "+Y[$])}S.each=function(V,Y,$,K){"use strict";if(this._count){typeof V=="function"&&(K=$,$=Y,Y=V,V=[]),$=$||K||this,V=A.map(N(V),this.getDimension,this);for(var J=V.length,Q=0;Q<this.count();Q++)switch(J){case 0:Y.call($,Q);break;case 1:Y.call($,this.get(V[0],Q),Q);break;case 2:Y.call($,this.get(V[0],Q),this.get(V[1],Q),Q);break;default:for(var et=0,nt=[];et<J;et++)nt[et]=this.get(V[et],Q);nt[et]=Q,Y.apply($,nt)}}},S.filterSelf=function(V,Y,$,K){"use strict";if(this._count){typeof V=="function"&&(K=$,$=Y,Y=V,V=[]),$=$||K||this,V=A.map(N(V),this.getDimension,this);for(var J=this.count(),Q=h(this),et=new Q(J),nt=[],st=V.length,ut=0,rt=V[0],ht=0;ht<J;ht++){var Pt,wt=this.getRawIndex(ht);if(st===0)Pt=Y.call($,ht);else if(st===1){var At=this._getFast(rt,wt);Pt=Y.call($,At,ht)}else{for(var Nt=0;Nt<st;Nt++)nt[Nt]=this._getFast(rt,wt);nt[Nt]=ht,Pt=Y.apply($,nt)}Pt&&(et[ut++]=wt)}return ut<J&&(this._indices=et),this._count=ut,this._extent={},this.getRawIndex=this._indices?L:P,this}},S.selectRange=function(V){"use strict";if(this._count){var Y=[];for(var $ in V)V.hasOwnProperty($)&&Y.push($);var K=Y.length;if(K){var J=this.count(),Q=h(this),et=new Q(J),nt=0,st=Y[0],ut=V[st][0],rt=V[st][1],ht=!1;if(!this._indices){var Pt=0;if(K===1){for(var wt=this._storage[Y[0]],At=0;At<this._chunkCount;At++)for(var Nt=wt[At],Lt=Math.min(this._count-At*this._chunkSize,this._chunkSize),Rt=0;Rt<Lt;Rt++){var Tt=Nt[Rt];(Tt>=ut&&Tt<=rt||isNaN(Tt))&&(et[nt++]=Pt),Pt++}ht=!0}else if(K===2){for(var wt=this._storage[st],mt=this._storage[Y[1]],Ft=V[Y[1]][0],ct=V[Y[1]][1],At=0;At<this._chunkCount;At++)for(var Nt=wt[At],vt=mt[At],Lt=Math.min(this._count-At*this._chunkSize,this._chunkSize),Rt=0;Rt<Lt;Rt++){var Tt=Nt[Rt],Dt=vt[Rt];(Tt>=ut&&Tt<=rt||isNaN(Tt))&&(Dt>=Ft&&Dt<=ct||isNaN(Dt))&&(et[nt++]=Pt),Pt++}ht=!0}}if(!ht)if(K===1)for(var Rt=0;Rt<J;Rt++){var Ct=this.getRawIndex(Rt),Tt=this._getFast(st,Ct);(Tt>=ut&&Tt<=rt||isNaN(Tt))&&(et[nt++]=Ct)}else for(var Rt=0;Rt<J;Rt++){for(var jt=!0,Ct=this.getRawIndex(Rt),At=0;At<K;At++){var zt=Y[At],Tt=this._getFast($,Ct);(Tt<V[zt][0]||Tt>V[zt][1])&&(jt=!1)}jt&&(et[nt++]=this.getRawIndex(Rt))}return nt<J&&(this._indices=et),this._count=nt,this._extent={},this.getRawIndex=this._indices?L:P,this}}},S.mapArray=function(V,Y,$,K){"use strict";typeof V=="function"&&(K=$,$=Y,Y=V,V=[]),$=$||K||this;var J=[];return this.each(V,function(){J.push(Y&&Y.apply(this,arguments))},$),J};function G(V,Y){var $=V.dimensions,K=new w(A.map($,V.getDimensionInfo,V),V.hostModel);p(K,V);for(var J=K._storage={},Q=V._storage,et=0;et<$.length;et++){var nt=$[et];Q[nt]&&(A.indexOf(Y,nt)>=0?(J[nt]=W(Q[nt]),K._rawExtent[nt]=Z(),K._extent[nt]=null):J[nt]=Q[nt])}return K}function W(V){for(var Y=new Array(V.length),$=0;$<V.length;$++)Y[$]=g(V[$]);return Y}function Z(){return[1/0,-1/0]}S.map=function(V,Y,$,K){"use strict";$=$||K||this,V=A.map(N(V),this.getDimension,this);var J=G(this,V);J._indices=this._indices,J.getRawIndex=J._indices?L:P;for(var Q=J._storage,et=[],nt=this._chunkSize,st=V.length,ut=this.count(),rt=[],ht=J._rawExtent,Pt=0;Pt<ut;Pt++){for(var wt=0;wt<st;wt++)rt[wt]=this.get(V[wt],Pt);rt[st]=Pt;var At=Y&&Y.apply($,rt);if(At!=null){typeof At!="object"&&(et[0]=At,At=et);for(var Nt=this.getRawIndex(Pt),Lt=Math.floor(Nt/nt),Rt=Nt%nt,Tt=0;Tt<At.length;Tt++){var mt=V[Tt],Ft=At[Tt],ct=ht[mt],vt=Q[mt];vt&&(vt[Lt][Rt]=Ft),Ft<ct[0]&&(ct[0]=Ft),Ft>ct[1]&&(ct[1]=Ft)}}}return J},S.downSample=function(V,Y,$,K){for(var J=G(this,[V]),Q=J._storage,et=[],nt=Math.floor(1/Y),st=Q[V],ut=this.count(),rt=this._chunkSize,ht=J._rawExtent[V],Pt=new(h(this))(ut),wt=0,At=0;At<ut;At+=nt){nt>ut-At&&(nt=ut-At,et.length=nt);for(var Nt=0;Nt<nt;Nt++){var Lt=this.getRawIndex(At+Nt),Rt=Math.floor(Lt/rt),Tt=Lt%rt;et[Nt]=st[Rt][Tt]}var mt=$(et),Ft=this.getRawIndex(Math.min(At+K(et,mt)||0,ut-1)),ct=Math.floor(Ft/rt),vt=Ft%rt;st[ct][vt]=mt,mt<ht[0]&&(ht[0]=mt),mt>ht[1]&&(ht[1]=mt),Pt[wt++]=Ft}return J._count=wt,J._indices=Pt,J.getRawIndex=L,J},S.getItemModel=function(V){var Y=this.hostModel;return new T(this.getRawDataItem(V),Y,Y&&Y.ecModel)},S.diff=function(V){var Y=this;return new D(V?V.getIndices():[],this.getIndices(),function($){return E(V,$)},function($){return E(Y,$)})},S.getVisual=function(V){var Y=this._visual;return Y&&Y[V]},S.setVisual=function(V,Y){if(l(V)){for(var $ in V)V.hasOwnProperty($)&&this.setVisual($,V[$]);return}this._visual=this._visual||{},this._visual[V]=Y},S.setLayout=function(V,Y){if(l(V)){for(var $ in V)V.hasOwnProperty($)&&this.setLayout($,V[$]);return}this._layout[V]=Y},S.getLayout=function(V){return this._layout[V]},S.getItemLayout=function(V){return this._itemLayouts[V]},S.setItemLayout=function(V,Y,$){this._itemLayouts[V]=$?A.extend(this._itemLayouts[V]||{},Y):Y},S.clearItemLayouts=function(){this._itemLayouts.length=0},S.getItemVisual=function(V,Y,$){var K=this._itemVisuals[V],J=K&&K[Y];return J==null&&!$?this.getVisual(Y):J},S.setItemVisual=function(V,Y,$){var K=this._itemVisuals[V]||{},J=this.hasItemVisual;if(this._itemVisuals[V]=K,l(Y)){for(var Q in Y)Y.hasOwnProperty(Q)&&(K[Q]=Y[Q],J[Q]=!0);return}K[Y]=$,J[Y]=!0},S.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var U=function(V){V.seriesIndex=this.seriesIndex,V.dataIndex=this.dataIndex,V.dataType=this.dataType};S.setItemGraphicEl=function(V,Y){var $=this.hostModel;Y&&(Y.dataIndex=V,Y.dataType=this.dataType,Y.seriesIndex=$&&$.seriesIndex,Y.type==="group"&&Y.traverse(U,Y)),this._graphicEls[V]=Y},S.getItemGraphicEl=function(V){return this._graphicEls[V]},S.eachItemGraphicEl=function(V,Y){A.each(this._graphicEls,function($,K){$&&V&&V.call(Y,$,K)})},S.cloneShallow=function(V){if(!V){var Y=A.map(this.dimensions,this.getDimensionInfo,this);V=new w(Y,this.hostModel)}if(V._storage=this._storage,p(V,this),this._indices){var $=this._indices.constructor;V._indices=new $(this._indices)}else V._indices=null;return V.getRawIndex=V._indices?L:P,V},S.wrapMethod=function(V,Y){var $=this[V];typeof $=="function"&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(V),this[V]=function(){var K=$.apply(this,arguments);return Y.apply(this,[K].concat(A.slice(arguments)))})},S.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],S.CHANGABLE_METHODS=["filterSelf","selectRange"];var H=w;X.exports=H},84116:function(X,z,e){var M=e(31879),F=M.createHashMap,R=M.isObject,A=M.map;function T(v){this.categories=v.categories||[],this._needCollect=v.needCollect,this._deduplication=v.deduplication,this._map}T.createByAxisModel=function(v){var m=v.option,o=m.data,u=o&&A(o,C);return new T({categories:u,needCollect:!u,deduplication:m.dedplication!==!1})};var D=T.prototype;D.getOrdinal=function(v){return b(this).get(v)},D.parseAndCollect=function(v){var m,o=this._needCollect;if(typeof v!="string"&&!o)return v;if(o&&!this._deduplication)return m=this.categories.length,this.categories[m]=v,m;var u=b(this);return m=u.get(v),m==null&&(o?(m=this.categories.length,this.categories[m]=v,u.set(v,m)):m=NaN),m};function b(v){return v._map||(v._map=F(v.categories))}function C(v){return R(v)&&v.value!=null?v.value:v+""}var f=T;X.exports=f},4345:function(X,z,e){var M=e(31879),F=M.createHashMap,R=M.isTypedArray,A=e(28108),T=A.enableClassCheck,D=e(17233),b=D.SOURCE_FORMAT_ORIGINAL,C=D.SERIES_LAYOUT_BY_COLUMN,f=D.SOURCE_FORMAT_UNKNOWN,v=D.SOURCE_FORMAT_TYPED_ARRAY,m=D.SOURCE_FORMAT_KEYED_COLUMNS;function o(l){this.fromDataset=l.fromDataset,this.data=l.data||(l.sourceFormat===m?{}:[]),this.sourceFormat=l.sourceFormat||f,this.seriesLayoutBy=l.seriesLayoutBy||C,this.dimensionsDefine=l.dimensionsDefine,this.encodeDefine=l.encodeDefine&&F(l.encodeDefine),this.startIndex=l.startIndex||0,this.dimensionsDetectCount=l.dimensionsDetectCount}o.seriesDataToSource=function(l){return new o({data:l,sourceFormat:R(l)?v:b,fromDataset:!1})},T(o);var u=o;X.exports=u},75174:function(X,z,e){var M=e(31879),F=e(85567),R=e(58677),A=e(80554),T=function(f,v){this.name=f||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=v};T.prototype={constructor:T,isRemoved:function(){return this.dataIndex<0},eachNode:function(f,v,m){typeof f=="function"&&(m=v,v=f,f=null),f=f||{},M.isString(f)&&(f={order:f});var o=f.order||"preorder",u=this[f.attr||"children"],l;o==="preorder"&&(l=v.call(m,this));for(var r=0;!l&&r<u.length;r++)u[r].eachNode(f,v,m);o==="postorder"&&v.call(m,this)},updateDepthAndHeight:function(f){var v=0;this.depth=f;for(var m=0;m<this.children.length;m++){var o=this.children[m];o.updateDepthAndHeight(f+1),o.height>v&&(v=o.height)}this.height=v+1},getNodeById:function(f){if(this.getId()===f)return this;for(var v=0,m=this.children,o=m.length;v<o;v++){var u=m[v].getNodeById(f);if(u)return u}},contains:function(f){if(f===this)return!0;for(var v=0,m=this.children,o=m.length;v<o;v++){var u=m[v].contains(f);if(u)return u}},getAncestors:function(f){for(var v=[],m=f?this:this.parentNode;m;)v.push(m),m=m.parentNode;return v.reverse(),v},getValue:function(f){var v=this.hostTree.data;return v.get(v.getDimension(f||"value"),this.dataIndex)},setLayout:function(f,v){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,f,v)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(f){if(!(this.dataIndex<0)){var v=this.hostTree,m=v.data.getItemModel(this.dataIndex);return m.getModel(f)}},setVisual:function(f,v){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,f,v)},getVisual:function(f,v){return this.hostTree.data.getItemVisual(this.dataIndex,f,v)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(f){for(var v=f.parentNode;v;){if(v===this)return!0;v=v.parentNode}return!1},isDescendantOf:function(f){return f!==this&&f.isAncestorOf(this)}};function D(f){this.root,this.data,this._nodes=[],this.hostModel=f}D.prototype={constructor:D,type:"tree",eachNode:function(f,v,m){this.root.eachNode(f,v,m)},getNodeByDataIndex:function(f){var v=this.data.getRawIndex(f);return this._nodes[v]},getNodeByName:function(f){return this.root.getNodeByName(f)},update:function(){for(var f=this.data,v=this._nodes,m=0,o=v.length;m<o;m++)v[m].dataIndex=-1;for(var m=0,o=f.count();m<o;m++)v[f.getRawIndex(m)].dataIndex=m},clearLayouts:function(){this.data.clearItemLayouts()}},D.createTree=function(f,v,m){var o=new D(v),u=[],l=1;r(f);function r(x,a){var i=x.value;l=Math.max(l,M.isArray(i)?i.length:1),u.push(x);var n=new T(x.name,o);a?b(n,a):o.root=n,o._nodes.push(n);var h=x.children;if(h)for(var g=0;g<h.length;g++)r(h[g],n)}o.root.updateDepthAndHeight(0);var s=A(u,{coordDimensions:["value"],dimensionsCount:l}),c=new R(s,v);return c.initData(u),m&&m(c),F({mainData:c,struct:o,structAttr:"tree"}),o.update(),o};function b(f,v){var m=v.children;f.parentNode!==v&&(m.push(f),f.parentNode=v)}var C=D;X.exports=C},72993:function(X,z,e){var M=e(31879),F=M.createHashMap,R=M.each,A=M.isString,T=M.defaults,D=M.extend,b=M.isObject,C=M.clone,f=e(35454),v=f.normalizeToArray,m=e(43036),o=m.guessOrdinal,u=m.BE_ORDINAL,l=e(4345),r=e(17071),s=r.OTHER_DIMENSIONS,c=e(38166);function x(h,g,d){l.isInstance(g)||(g=l.seriesDataToSource(g)),d=d||{},h=(h||[]).slice();for(var y=(d.dimsDef||[]).slice(),p=F(),w=F(),S=[],O=a(g,h,y,d.dimCount),B=0;B<O;B++){var k=y[B]=D({},b(y[B])?y[B]:{name:y[B]}),P=k.name,L=S[B]=new c;P!=null&&p.get(P)==null&&(L.name=L.displayName=P,p.set(P,B)),k.type!=null&&(L.type=k.type),k.displayName!=null&&(L.displayName=k.displayName)}var E=d.encodeDef;!E&&d.encodeDefaulter&&(E=d.encodeDefaulter(g,O)),E=F(E),E.each(function(Y,$){if(Y=v(Y).slice(),Y.length===1&&!A(Y[0])&&Y[0]<0){E.set($,!1);return}var K=E.set($,[]);R(Y,function(J,Q){A(J)&&(J=p.get(J)),J!=null&&J<O&&(K[Q]=J,I(S[J],$,Q))})});var N=0;R(h,function(J,$){var K,J,Q,et;if(A(J))K=J,J={};else{K=J.name;var nt=J.ordinalMeta;J.ordinalMeta=null,J=C(J),J.ordinalMeta=nt,Q=J.dimsDef,et=J.otherDims,J.name=J.coordDim=J.coordDimIndex=J.dimsDef=J.otherDims=null}var st=E.get(K);if(st!==!1){var st=v(st);if(!st.length)for(var ut=0;ut<(Q&&Q.length||1);ut++){for(;N<S.length&&S[N].coordDim!=null;)N++;N<S.length&&st.push(N++)}R(st,function(rt,ht){var Pt=S[rt];if(I(T(Pt,J),K,ht),Pt.name==null&&Q){var wt=Q[ht];!b(wt)&&(wt={name:wt}),Pt.name=Pt.displayName=wt.name,Pt.defaultTooltip=wt.defaultTooltip}et&&T(Pt.otherDims,et)})}});function I(Y,$,K){s.get($)!=null?Y.otherDims[$]=K:(Y.coordDim=$,Y.coordDimIndex=K,w.set($,!0))}var G=d.generateCoord,W=d.generateCoordCount,Z=W!=null;W=G?W||1:0;for(var U=G||"value",H=0;H<O;H++){var L=S[H]=S[H]||new c,V=L.coordDim;V==null&&(L.coordDim=i(U,w,Z),L.coordDimIndex=0,(!G||W<=0)&&(L.isExtraCoord=!0),W--),L.name==null&&(L.name=i(L.coordDim,p)),L.type==null&&(o(g,H,L.name)===u.Must||L.isExtraCoord&&(L.otherDims.itemName!=null||L.otherDims.seriesName!=null))&&(L.type="ordinal")}return S}function a(h,g,d,y){var p=Math.max(h.dimensionsDetectCount||1,g.length,d.length,y||0);return R(g,function(w){var S=w.dimsDef;S&&(p=Math.max(p,S.length))}),p}function i(h,g,d){if(d||g.get(h)!=null){for(var y=0;g.get(h+y)!=null;)y++;h+=y}return g.set(h,!0),h}var n=x;X.exports=n},80554:function(X,z,e){var M=e(72993);function F(R,A){return A=A||{},M(A.coordDimensions||[],R,{dimsDef:A.dimensionsDefine||R.dimensionsDefine,encodeDef:A.encodeDefine||R.encodeDefine,dimCount:A.dimensionsCount,encodeDefaulter:A.encodeDefaulter,generateCoord:A.generateCoord,generateCoordCount:A.generateCoordCount})}X.exports=F},58708:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=R.isTypedArray,T=R.extend,D=R.assert,b=R.each,C=R.isObject,f=e(35454),v=f.getDataItemValue,m=f.isDataItemOption,o=e(48354),u=o.parseDate,l=e(4345),r=e(17233),s=r.SOURCE_FORMAT_TYPED_ARRAY,c=r.SOURCE_FORMAT_ARRAY_ROWS,x=r.SOURCE_FORMAT_ORIGINAL,a=r.SOURCE_FORMAT_OBJECT_ROWS;function i(L,E){l.isInstance(L)||(L=l.seriesDataToSource(L)),this._source=L;var N=this._data=L.data,I=L.sourceFormat;I===s&&(this._offset=0,this._dimSize=E,this._data=N);var G=h[I===c?I+"_"+L.seriesLayoutBy:I];T(this,G)}var n=i.prototype;n.pure=!1,n.persistent=!0,n.getSource=function(){return this._source};var h={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(L){return this._data[L+this._source.startIndex]},appendData:y},arrayRows_row:{pure:!0,count:function(){var L=this._data[0];return L?Math.max(0,L.length-this._source.startIndex):0},getItem:function(L){L+=this._source.startIndex;for(var E=[],N=this._data,I=0;I<N.length;I++){var G=N[I];E.push(G?G[L]:null)}return E},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:g,getItem:d,appendData:y},keyedColumns:{pure:!0,count:function(){var L=this._source.dimensionsDefine[0].name,E=this._data[L];return E?E.length:0},getItem:function(L){for(var E=[],N=this._source.dimensionsDefine,I=0;I<N.length;I++){var G=this._data[N[I].name];E.push(G?G[L]:null)}return E},appendData:function(L){var E=this._data;b(L,function(N,I){for(var G=E[I]||(E[I]=[]),W=0;W<(N||[]).length;W++)G.push(N[W])})}},original:{count:g,getItem:d,appendData:y},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(L,E){L=L-this._offset,E=E||[];for(var N=this._dimSize*L,I=0;I<this._dimSize;I++)E[I]=this._data[N+I];return E},appendData:function(L){this._data=L},clean:function(){this._offset+=this.count(),this._data=null}}};function g(){return this._data.length}function d(L){return this._data[L]}function y(L){for(var E=0;E<L.length;E++)this._data.push(L[E])}var p={arrayRows:w,objectRows:function(L,E,N,I){return N!=null?L[I]:L},keyedColumns:w,original:function(L,E,N,I){var G=v(L);return N==null||!(G instanceof Array)?G:G[N]},typedArray:w};function w(L,E,N,I){return N!=null?L[N]:L}var S={arrayRows:O,objectRows:function(L,E,N,I){return B(L[E],this._dimensionInfos[E])},keyedColumns:O,original:function(L,E,N,I){var G=L&&(L.value==null?L:L.value);return!this._rawData.pure&&m(L)&&(this.hasItemOption=!0),B(G instanceof Array?G[I]:G,this._dimensionInfos[E])},typedArray:function(L,E,N,I){return L[I]}};function O(L,E,N,I){return B(L[I],this._dimensionInfos[E])}function B(L,E){var N=E&&E.type;if(N==="ordinal"){var I=E&&E.ordinalMeta;return I?I.parseAndCollect(L):L}return N==="time"&&typeof L!="number"&&L!=null&&L!=="-"&&(L=+u(L)),L==null||L===""?NaN:+L}function k(L,E,N){if(L){var I=L.getRawDataItem(E);if(I!=null){var G=L.getProvider().getSource().sourceFormat,W,Z,U=L.getDimensionInfo(N);return U&&(W=U.name,Z=U.index),p[G](I,E,Z,W)}}}function P(L,E,N){if(L){var I=L.getProvider().getSource().sourceFormat;if(!(I!==x&&I!==a)){var G=L.getRawDataItem(E);if(I===x&&!C(G)&&(G=null),G)return G[N]}}}z.DefaultDataProvider=i,z.defaultDimValueGetters=S,z.retrieveRawValue=k,z.retrieveRawAttr=P},53618:function(X,z,e){var M=e(31879),F=M.each,R=M.isString;function A(b,C,f){f=f||{};var v=f.byIndex,m=f.stackedCoordDimension,o=!!(b&&b.get("stack")),u,l,r,s;if(F(C,function(i,n){R(i)&&(C[n]=i={name:i}),o&&!i.isExtraCoord&&(!v&&!u&&i.ordinalMeta&&(u=i),!l&&i.type!=="ordinal"&&i.type!=="time"&&(!m||m===i.coordDim)&&(l=i))}),l&&!v&&!u&&(v=!0),l){r="__\0ecstackresult",s="__\0ecstackedover",u&&(u.createInvertedIndices=!0);var c=l.coordDim,x=l.type,a=0;F(C,function(i){i.coordDim===c&&a++}),C.push({name:r,coordDim:c,coordDimIndex:a,type:x,isExtraCoord:!0,isCalculationCoord:!0}),a++,C.push({name:s,coordDim:s,coordDimIndex:a,type:x,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:l&&l.name,stackedByDimension:u&&u.name,isStackedByIndex:v,stackedOverDimension:s,stackResultDimension:r}}function T(b,C){return!!C&&C===b.getCalculationInfo("stackedDimension")}function D(b,C){return T(b,C)?b.getCalculationInfo("stackResultDimension"):C}z.enableDataStack=A,z.isDimensionStacked=T,z.getStackedDimension=D},17071:function(X,z,e){var M=e(31879),F=M.each,R=M.createHashMap,A=M.assert,T=e(50617),D=T.__DEV__,b=R(["tooltip","label","itemName","itemId","seriesName"]);function C(o){var u={},l=u.encode={},r=R(),s=[],c=[],x=u.userOutput={dimensionNames:o.dimensions.slice(),encode:{}};F(o.dimensions,function(g){var d=o.getDimensionInfo(g),y=d.coordDim;if(y){var p=d.coordDimIndex;f(l,y)[p]=g,d.isExtraCoord||(r.set(y,1),m(d.type)&&(s[0]=g),f(x.encode,y)[p]=d.index),d.defaultTooltip&&c.push(g)}b.each(function(w,S){var O=f(l,S),B=d.otherDims[S];B!=null&&B!==!1&&(O[B]=d.name)})});var a=[],i={};r.each(function(g,d){var y=l[d];i[d]=y[0],a=a.concat(y)}),u.dataDimsOnCoord=a,u.encodeFirstDimNotExtra=i;var n=l.label;n&&n.length&&(s=n.slice());var h=l.tooltip;return h&&h.length?c=h.slice():c.length||(c=s.slice()),l.defaultedLabel=s,l.defaultedTooltip=c,u}function f(o,u){return o.hasOwnProperty(u)||(o[u]=[]),o[u]}function v(o){return o==="category"?"ordinal":o==="time"?"time":"float"}function m(o){return!(o==="ordinal"||o==="time")}z.OTHER_DIMENSIONS=b,z.summarizeDimensions=C,z.getDimensionTypeByAxis=v},85567:function(X,z,e){var M=e(31879),F=M.each,R="\0__link_datas",A="\0__link_mainData";function T(l){var r=l.mainData,s=l.datas;s||(s={main:r},l.datasAttr={main:"data"}),l.datas=l.mainData=null,m(r,s,l),F(s,function(c){F(r.TRANSFERABLE_METHODS,function(x){c.wrapMethod(x,M.curry(D,l))})}),r.wrapMethod("cloneShallow",M.curry(C,l)),F(r.CHANGABLE_METHODS,function(c){r.wrapMethod(c,M.curry(b,l))}),M.assert(s[r.dataType]===r)}function D(l,r){if(v(this)){var s=M.extend({},this[R]);s[this.dataType]=r,m(r,s,l)}else o(r,this.dataType,this[A],l);return r}function b(l,r){return l.struct&&l.struct.update(this),r}function C(l,r){return F(r[R],function(s,c){s!==r&&o(s.cloneShallow(),c,r,l)}),r}function f(l){var r=this[A];return l==null||r==null?r:r[R][l]}function v(l){return l[A]===l}function m(l,r,s){l[R]={},F(r,function(c,x){o(c,x,l,s)})}function o(l,r,s,c){s[R][r]=l,l[A]=s,l.dataType=r,c.struct&&(l[c.structAttr]=c.struct,c.struct[c.datasAttr[r]]=l),l.getLinkedData=f}var u=T;X.exports=u},43036:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(35454),A=R.makeInner,T=R.getDataItemValue,D=e(31879),b=D.createHashMap,C=D.each,f=D.map,v=D.isArray,m=D.isString,o=D.isObject,u=D.isTypedArray,l=D.isArrayLike,r=D.extend,s=D.assert,c=e(4345),x=e(17233),a=x.SOURCE_FORMAT_ORIGINAL,i=x.SOURCE_FORMAT_ARRAY_ROWS,n=x.SOURCE_FORMAT_OBJECT_ROWS,h=x.SOURCE_FORMAT_KEYED_COLUMNS,g=x.SOURCE_FORMAT_UNKNOWN,d=x.SOURCE_FORMAT_TYPED_ARRAY,y=x.SERIES_LAYOUT_BY_ROW,p={Must:1,Might:2,Not:3},w=A();function S(H){var V=H.option.source,Y=g;if(u(V))Y=d;else if(v(V)){V.length===0&&(Y=i);for(var $=0,K=V.length;$<K;$++){var J=V[$];if(J!=null){if(v(J)){Y=i;break}else if(o(J)){Y=n;break}}}}else if(o(V)){for(var Q in V)if(V.hasOwnProperty(Q)&&l(V[Q])){Y=h;break}}else if(V!=null)throw new Error("Invalid data");w(H).sourceFormat=Y}function O(H){return w(H).source}function B(H){w(H).datasetMap=b()}function k(H){var V=H.option,Y=V.data,$=u(Y)?d:a,K=!1,J=V.seriesLayoutBy,Q=V.sourceHeader,et=V.dimensions,nt=W(H);if(nt){var st=nt.option;Y=st.source,$=w(nt).sourceFormat,K=!0,J=J||st.seriesLayoutBy,Q==null&&(Q=st.sourceHeader),et=et||st.dimensions}var ut=P(Y,$,J,Q,et);w(H).source=new c({data:Y,fromDataset:K,seriesLayoutBy:J,sourceFormat:$,dimensionsDefine:ut.dimensionsDefine,startIndex:ut.startIndex,dimensionsDetectCount:ut.dimensionsDetectCount,encodeDefine:V.encode})}function P(H,V,Y,$,K){if(!H)return{dimensionsDefine:L(K)};var J,Q;if(V===i)$==="auto"||$==null?E(function(nt){nt!=null&&nt!=="-"&&(m(nt)?Q==null&&(Q=1):Q=0)},Y,H,10):Q=$?1:0,!K&&Q===1&&(K=[],E(function(nt,st){K[st]=nt??""},Y,H)),J=K?K.length:Y===y?H.length:H[0]?H[0].length:null;else if(V===n)K||(K=N(H));else if(V===h)K||(K=[],C(H,function(nt,st){K.push(st)}));else if(V===a){var et=T(H[0]);J=v(et)&&et.length||1}return{startIndex:Q,dimensionsDefine:L(K),dimensionsDetectCount:J}}function L(H){if(H){var V=b();return f(H,function(Y,$){if(Y=r({},o(Y)?Y:{name:Y}),Y.name==null)return Y;Y.name+="",Y.displayName==null&&(Y.displayName=Y.name);var K=V.get(Y.name);return K?Y.name+="-"+K.count++:V.set(Y.name,{count:1}),Y})}}function E(H,V,Y,$){if($==null&&($=1/0),V===y)for(var K=0;K<Y.length&&K<$;K++)H(Y[K]?Y[K][0]:null,K);else for(var J=Y[0]||[],K=0;K<J.length&&K<$;K++)H(J[K],K)}function N(H){for(var V=0,Y;V<H.length&&!(Y=H[V++]););if(Y){var $=[];return C(Y,function(K,J){$.push(J)}),$}}function I(H,V,Y){var $={},K=W(V);if(!K||!H)return $;var J=[],Q=[],et=V.ecModel,nt=w(et).datasetMap,st=K.uid+"_"+Y.seriesLayoutBy,ut,rt;H=H.slice(),C(H,function(At,Nt){!o(At)&&(H[Nt]={name:At}),At.type==="ordinal"&&ut==null&&(ut=Nt,rt=wt(H[Nt])),$[At.name]=[]});var ht=nt.get(st)||nt.set(st,{categoryWayDim:rt,valueWayDim:0});C(H,function(At,Nt){var Lt=At.name,Rt=wt(At);if(ut==null){var Tt=ht.valueWayDim;Pt($[Lt],Tt,Rt),Pt(Q,Tt,Rt),ht.valueWayDim+=Rt}else if(ut===Nt)Pt($[Lt],0,Rt),Pt(J,0,Rt);else{var Tt=ht.categoryWayDim;Pt($[Lt],Tt,Rt),Pt(Q,Tt,Rt),ht.categoryWayDim+=Rt}});function Pt(At,Nt,Lt){for(var Rt=0;Rt<Lt;Rt++)At.push(Nt+Rt)}function wt(At){var Nt=At.dimsDef;return Nt?Nt.length:1}return J.length&&($.itemName=J),Q.length&&($.seriesName=Q),$}function G(H,V,Y){var $={},K=W(H);if(!K)return $;var J=V.sourceFormat,Q=V.dimensionsDefine,et;(J===n||J===h)&&C(Q,function(ut,rt){(o(ut)?ut.name:ut)==="name"&&(et=rt)});var nt=function(){for(var ut={},rt={},ht=[],Pt=0,wt=Math.min(5,Y);Pt<wt;Pt++){var At=U(V.data,J,V.seriesLayoutBy,Q,V.startIndex,Pt);ht.push(At);var Nt=At===p.Not;if(Nt&&ut.v==null&&Pt!==et&&(ut.v=Pt),(ut.n==null||ut.n===ut.v||!Nt&&ht[ut.n]===p.Not)&&(ut.n=Pt),Lt(ut)&&ht[ut.n]!==p.Not)return ut;Nt||(At===p.Might&&rt.v==null&&Pt!==et&&(rt.v=Pt),(rt.n==null||rt.n===rt.v)&&(rt.n=Pt))}function Lt(Rt){return Rt.v!=null&&Rt.n!=null}return Lt(ut)?ut:Lt(rt)?rt:null}();if(nt){$.value=nt.v;var st=et??nt.n;$.itemName=[st],$.seriesName=[st]}return $}function W(H){var V=H.option,Y=V.data;if(!Y)return H.ecModel.getComponent("dataset",V.datasetIndex||0)}function Z(H,V){return U(H.data,H.sourceFormat,H.seriesLayoutBy,H.dimensionsDefine,H.startIndex,V)}function U(H,V,Y,$,K,J){var Q,et=5;if(u(H))return p.Not;var nt,st;if($){var ut=$[J];o(ut)?(nt=ut.name,st=ut.type):m(ut)&&(nt=ut)}if(st!=null)return st==="ordinal"?p.Must:p.Not;if(V===i)if(Y===y){for(var rt=H[J],ht=0;ht<(rt||[]).length&&ht<et;ht++)if((Q=Nt(rt[K+ht]))!=null)return Q}else for(var ht=0;ht<H.length&&ht<et;ht++){var Pt=H[K+ht];if(Pt&&(Q=Nt(Pt[J]))!=null)return Q}else if(V===n){if(!nt)return p.Not;for(var ht=0;ht<H.length&&ht<et;ht++){var wt=H[ht];if(wt&&(Q=Nt(wt[nt]))!=null)return Q}}else if(V===h){if(!nt)return p.Not;var rt=H[nt];if(!rt||u(rt))return p.Not;for(var ht=0;ht<rt.length&&ht<et;ht++)if((Q=Nt(rt[ht]))!=null)return Q}else if(V===a)for(var ht=0;ht<H.length&&ht<et;ht++){var wt=H[ht],At=T(wt);if(!v(At))return p.Not;if((Q=Nt(At[J]))!=null)return Q}function Nt(Lt){var Rt=m(Lt);if(Lt!=null&&isFinite(Lt)&&Lt!=="")return Rt?p.Might:p.Not;if(Rt&&Lt!=="-")return p.Must}return p.Not}z.BE_ORDINAL=p,z.detectSourceFormat=S,z.getSource=O,z.resetSourceDefaulter=B,z.prepareSource=k,z.makeSeriesEncodeForAxisCoordSys=I,z.makeSeriesEncodeForNameBased=G,z.guessOrdinal=Z},17233:function(X,z){var e="original",M="arrayRows",F="objectRows",R="keyedColumns",A="unknown",T="typedArray",D="column",b="row";z.SOURCE_FORMAT_ORIGINAL=e,z.SOURCE_FORMAT_ARRAY_ROWS=M,z.SOURCE_FORMAT_OBJECT_ROWS=F,z.SOURCE_FORMAT_KEYED_COLUMNS=R,z.SOURCE_FORMAT_UNKNOWN=A,z.SOURCE_FORMAT_TYPED_ARRAY=T,z.SERIES_LAYOUT_BY_COLUMN=D,z.SERIES_LAYOUT_BY_ROW=b},3440:function(X,z,e){var M=e(49500),F=e(50617),R=F.__DEV__,A=e(23593),T=e(31879),D=e(94819),b=e(58020),C=e(93318),f=e(91212),v=e(64527),m=e(3868),o=e(48642),u=e(29607),l=e(22637),r=e(15933),s=e(60684),c=e(2365),x=e(53646),a=e(1911),i=e(48070),n=e(35454),h=e(1655),g=h.throttle,d=e(64155),y=e(59117),p=e(93253),w=e(64014),S=e(99465),O=e(77383);e(18841);var B=e(52310),k=T.assert,P=T.each,L=T.isFunction,E=T.isObject,N=s.parseClassType,I="4.9.0",G={zrender:"4.3.2"},W=1,Z=1e3,U=800,H=900,V=5e3,Y=1e3,$=1100,K=2e3,J=3e3,Q=3500,et=4e3,nt=5e3,st={PROCESSOR:{FILTER:Z,SERIES_FILTER:U,STATISTIC:V},VISUAL:{LAYOUT:Y,PROGRESSIVE_LAYOUT:$,GLOBAL:K,CHART:J,POST_CHART_LAYOUT:Q,COMPONENT:et,BRUSH:nt}},ut="__flagInMainProcess",rt="__optionUpdated",ht=/^[a-zA-Z0-9_]+$/;function Pt(Vt,qt){return function(ae,ve,xe){if(!qt&&this._disposed){this.id;return}ae=ae&&ae.toLowerCase(),f.prototype[Vt].call(this,ae,ve,xe)}}function wt(){f.call(this)}wt.prototype.on=Pt("on",!0),wt.prototype.off=Pt("off",!0),wt.prototype.one=Pt("one",!0),T.mixin(wt,f);function At(Vt,ye,ae){ae=ae||{},typeof ye=="string"&&(ye=oe[ye]),this.id,this.group,this._dom=Vt;var ve="canvas",xe=this._zr=A.init(Vt,{renderer:ae.renderer||ve,devicePixelRatio:ae.devicePixelRatio,width:ae.width,height:ae.height});this._throttledZrFlush=g(T.bind(xe.flush,xe),17);var ye=T.clone(ye);ye&&l(ye,!0),this._theme=ye,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new o;var Le=this._api=Ot(this);function Fe(we,ze){return we.__prio-ze.__prio}C(ie,Fe),C(Kt,Fe),this._scheduler=new w(this,Le,Kt,ie),f.call(this,this._ecEventProcessor=new St),this._messageCenter=new wt,this._initEvents(),this.resize=T.bind(this.resize,this),this._pendingActions=[],xe.animation.on("frame",this._onframe,this),Ct(xe,this),T.setAsPrimitive(this)}var Nt=At.prototype;Nt._onframe=function(){if(!this._disposed){var Vt=this._scheduler;if(this[rt]){var qt=this[rt].silent;this[ut]=!0,Tt(this),Rt.update.call(this),this[ut]=!1,this[rt]=!1,vt.call(this,qt),Dt.call(this,qt)}else if(Vt.unfinished){var ae=W,ve=this._model,xe=this._api;Vt.unfinished=!1;do{var ye=+new Date;Vt.performSeriesTasks(ve),Vt.performDataProcessorTasks(ve),Ft(this,ve),Vt.performVisualTasks(ve),ft(this,this._model,xe,"remain"),ae-=+new Date-ye}while(ae>0&&Vt.unfinished);Vt.unfinished||this._zr.flush()}}},Nt.getDom=function(){return this._dom},Nt.getZr=function(){return this._zr},Nt.setOption=function(Vt,qt,ae){if(this._disposed){this.id;return}var ve;if(E(qt)&&(ae=qt.lazyUpdate,ve=qt.silent,qt=qt.notMerge),this[ut]=!0,!this._model||qt){var xe=new u(this._api),ye=this._theme,Le=this._model=new v;Le.scheduler=this._scheduler,Le.init(null,null,ye,xe)}this._model.setOption(Vt,Jt),ae?(this[rt]={silent:ve},this[ut]=!1):(Tt(this),Rt.update.call(this),this._zr.flush(),this[rt]=!1,this[ut]=!1,vt.call(this,ve),Dt.call(this,ve))},Nt.setTheme=function(){M.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Nt.getModel=function(){return this._model},Nt.getOption=function(){return this._model&&this._model.getOption()},Nt.getWidth=function(){return this._zr.getWidth()},Nt.getHeight=function(){return this._zr.getHeight()},Nt.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},Nt.getRenderedCanvas=function(Vt){if(b.canvasSupported){Vt=Vt||{},Vt.pixelRatio=Vt.pixelRatio||1,Vt.backgroundColor=Vt.backgroundColor||this._model.get("backgroundColor");var qt=this._zr;return qt.painter.getRenderedCanvas(Vt)}},Nt.getSvgDataURL=function(){if(b.svgSupported){var Vt=this._zr,qt=Vt.storage.getDisplayList();return T.each(qt,function(ae){ae.stopAnimation(!0)}),Vt.painter.toDataURL()}},Nt.getDataURL=function(Vt){if(this._disposed){this.id;return}Vt=Vt||{};var qt=Vt.excludeComponents,ae=this._model,ve=[],xe=this;P(qt,function(Le){ae.eachComponent({mainType:Le},function(Fe){var we=xe._componentsMap[Fe.__viewId];we.group.ignore||(ve.push(we),we.group.ignore=!0)})});var ye=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.getRenderedCanvas(Vt).toDataURL("image/"+(Vt&&Vt.type||"png"));return P(ve,function(Le){Le.group.ignore=!1}),ye},Nt.getConnectedDataURL=function(Vt){if(this._disposed){this.id;return}if(b.canvasSupported){var qt=Vt.type==="svg",ae=this.group,ve=Math.min,xe=Math.max,ye=1/0;if(ce[ae]){var Le=ye,Fe=ye,we=-ye,ze=-ye,Ge=[],We=Vt&&Vt.pixelRatio||1;T.each(ne,function(Ee,Ye){if(Ee.group===ae){var Qe=qt?Ee.getZr().painter.getSvgDom().innerHTML:Ee.getRenderedCanvas(T.clone(Vt)),Ke=Ee.getDom().getBoundingClientRect();Le=ve(Ke.left,Le),Fe=ve(Ke.top,Fe),we=xe(Ke.right,we),ze=xe(Ke.bottom,ze),Ge.push({dom:Qe,left:Ke.left,top:Ke.top})}}),Le*=We,Fe*=We,we*=We,ze*=We;var Et=we-Le,kt=ze-Fe,$t=T.createCanvas(),le=A.init($t,{renderer:qt?"svg":"canvas"});if(le.resize({width:Et,height:kt}),qt){var me="";return P(Ge,function(Ee){var Ye=Ee.left-Le,Qe=Ee.top-Fe;me+='<g transform="translate('+Ye+","+Qe+')">'+Ee.dom+"</g>"}),le.painter.getSvgRoot().innerHTML=me,Vt.connectedBackgroundColor&&le.painter.setBackgroundColor(Vt.connectedBackgroundColor),le.refreshImmediately(),le.painter.toDataURL()}else return Vt.connectedBackgroundColor&&le.add(new i.Rect({shape:{x:0,y:0,width:Et,height:kt},style:{fill:Vt.connectedBackgroundColor}})),P(Ge,function(Ee){var Ye=new i.Image({style:{x:Ee.left*We-Le,y:Ee.top*We-Fe,image:Ee.dom}});le.add(Ye)}),le.refreshImmediately(),$t.toDataURL("image/"+(Vt&&Vt.type||"png"))}else return this.getDataURL(Vt)}},Nt.convertToPixel=T.curry(Lt,"convertToPixel"),Nt.convertFromPixel=T.curry(Lt,"convertFromPixel");function Lt(Vt,qt,ae){if(this._disposed){this.id;return}var ve=this._model,xe=this._coordSysMgr.getCoordinateSystems(),ye;qt=n.parseFinder(ve,qt);for(var Le=0;Le<xe.length;Le++){var Fe=xe[Le];if(Fe[Vt]&&(ye=Fe[Vt](ve,qt,ae))!=null)return ye}}Nt.containPixel=function(Vt,qt){if(this._disposed){this.id;return}var ae=this._model,ve;return Vt=n.parseFinder(ae,Vt),T.each(Vt,function(xe,ye){ye.indexOf("Models")>=0&&T.each(xe,function(Le){var Fe=Le.coordinateSystem;if(Fe&&Fe.containPoint)ve|=!!Fe.containPoint(qt);else if(ye==="seriesModels"){var we=this._chartsMap[Le.__viewId];we&&we.containPoint&&(ve|=we.containPoint(qt,Le))}},this)},this),!!ve},Nt.getVisual=function(Vt,qt){var ae=this._model;Vt=n.parseFinder(ae,Vt,{defaultMainType:"series"});var ve=Vt.seriesModel,xe=ve.getData(),ye=Vt.hasOwnProperty("dataIndexInside")?Vt.dataIndexInside:Vt.hasOwnProperty("dataIndex")?xe.indexOfRawIndex(Vt.dataIndex):null;return ye!=null?xe.getItemVisual(ye,qt):xe.getVisual(qt)},Nt.getViewOfComponentModel=function(Vt){return this._componentsMap[Vt.__viewId]},Nt.getViewOfSeriesModel=function(Vt){return this._chartsMap[Vt.__viewId]};var Rt={prepareAndUpdate:function(Vt){Tt(this),Rt.update.call(this,Vt)},update:function(Vt){var qt=this._model,ae=this._api,ve=this._zr,xe=this._coordSysMgr,ye=this._scheduler;if(qt){ye.restoreData(qt,Vt),ye.performSeriesTasks(qt),xe.create(qt,ae),ye.performDataProcessorTasks(qt,Vt),Ft(this,qt),xe.update(qt,ae),zt(qt),ye.performVisualTasks(qt,Vt),Yt(this,qt,ae,Vt);var Le=qt.get("backgroundColor")||"transparent";if(b.canvasSupported)ve.setBackgroundColor(Le);else{var Fe=D.parse(Le);Le=D.stringify(Fe,"rgb"),Fe[3]===0&&(Le="transparent")}gt(qt,ae)}},updateTransform:function(Vt){var qt=this._model,ae=this,ve=this._api;if(qt){var xe=[];qt.eachComponent(function(Le,Fe){var we=ae.getViewOfComponentModel(Fe);if(we&&we.__alive)if(we.updateTransform){var ze=we.updateTransform(Fe,qt,ve,Vt);ze&&ze.update&&xe.push(we)}else xe.push(we)});var ye=T.createHashMap();qt.eachSeries(function(Le){var Fe=ae._chartsMap[Le.__viewId];if(Fe.updateTransform){var we=Fe.updateTransform(Le,qt,ve,Vt);we&&we.update&&ye.set(Le.uid,1)}else ye.set(Le.uid,1)}),zt(qt),this._scheduler.performVisualTasks(qt,Vt,{setDirty:!0,dirtyMap:ye}),ft(ae,qt,ve,Vt,ye),gt(qt,this._api)}},updateView:function(Vt){var qt=this._model;qt&&(a.markUpdateMethod(Vt,"updateView"),zt(qt),this._scheduler.performVisualTasks(qt,Vt,{setDirty:!0}),Yt(this,this._model,this._api,Vt),gt(qt,this._api))},updateVisual:function(Vt){Rt.update.call(this,Vt)},updateLayout:function(Vt){Rt.update.call(this,Vt)}};function Tt(Vt){var qt=Vt._model,ae=Vt._scheduler;ae.restorePipelines(qt),ae.prepareStageTasks(),jt(Vt,"component",qt,ae),jt(Vt,"chart",qt,ae),ae.plan()}function mt(Vt,qt,ae,ve,xe){var ye=Vt._model;if(!ve){P(Vt._componentsViews.concat(Vt._chartsViews),ze);return}var Le={};Le[ve+"Id"]=ae[ve+"Id"],Le[ve+"Index"]=ae[ve+"Index"],Le[ve+"Name"]=ae[ve+"Name"];var Fe={mainType:ve,query:Le};xe&&(Fe.subType=xe);var we=ae.excludeSeriesId;we!=null&&(we=T.createHashMap(n.normalizeToArray(we))),ye&&ye.eachComponent(Fe,function(Ge){(!we||we.get(Ge.id)==null)&&ze(Vt[ve==="series"?"_chartsMap":"_componentsMap"][Ge.__viewId])},Vt);function ze(Ge){Ge&&Ge.__alive&&Ge[qt]&&Ge[qt](Ge.__model,ye,Vt._api,ae)}}Nt.resize=function(Vt){if(this._disposed){this.id;return}this._zr.resize(Vt);var qt=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!qt){var ae=qt.resetOption("media"),ve=Vt&&Vt.silent;this[ut]=!0,ae&&Tt(this),Rt.update.call(this),this[ut]=!1,vt.call(this,ve),Dt.call(this,ve)}};function Ft(Vt,qt){var ae=Vt._chartsMap,ve=Vt._scheduler;qt.eachSeries(function(xe){ve.updateStreamModes(xe,ae[xe.__viewId])})}Nt.showLoading=function(Vt,qt){if(this._disposed){this.id;return}if(E(Vt)&&(qt=Vt,Vt=""),Vt=Vt||"default",this.hideLoading(),!!he[Vt]){var ae=he[Vt](this._api,qt),ve=this._zr;this._loadingFX=ae,ve.add(ae)}},Nt.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},Nt.makeActionFromEvent=function(Vt){var qt=T.extend({},Vt);return qt.type=Ht[Vt.type],qt},Nt.dispatchAction=function(Vt,qt){if(this._disposed){this.id;return}if(E(qt)||(qt={silent:!!qt}),!!Gt[Vt.type]&&this._model){if(this[ut]){this._pendingActions.push(Vt);return}ct.call(this,Vt,qt.silent),qt.flush?this._zr.flush(!0):qt.flush!==!1&&b.browser.weChat&&this._throttledZrFlush(),vt.call(this,qt.silent),Dt.call(this,qt.silent)}};function ct(Vt,qt){var ae=Vt.type,ve=Vt.escapeConnect,xe=Gt[ae],ye=xe.actionInfo,Le=(ye.update||"update").split(":"),Fe=Le.pop();Le=Le[0]!=null&&N(Le[0]),this[ut]=!0;var we=[Vt],ze=!1;Vt.batch&&(ze=!0,we=T.map(Vt.batch,function(kt){return kt=T.defaults(T.extend({},kt),Vt),kt.batch=null,kt}));var Ge=[],We,Et=ae==="highlight"||ae==="downplay";P(we,function(kt){We=xe.action(kt,this._model,this._api),We=We||T.extend({},kt),We.type=ye.event||We.type,Ge.push(We),Et?mt(this,Fe,kt,"series"):Le&&mt(this,Fe,kt,Le.main,Le.sub)},this),Fe!=="none"&&!Et&&!Le&&(this[rt]?(Tt(this),Rt.update.call(this,Vt),this[rt]=!1):Rt[Fe].call(this,Vt)),ze?We={type:ye.event||ae,escapeConnect:ve,batch:Ge}:We=Ge[0],this[ut]=!1,!qt&&this._messageCenter.trigger(We.type,We)}function vt(Vt){for(var qt=this._pendingActions;qt.length;){var ae=qt.shift();ct.call(this,ae,Vt)}}function Dt(Vt){!Vt&&this.trigger("updated")}function Ct(Vt,qt){Vt.on("rendered",function(){qt.trigger("rendered"),Vt.animation.isFinished()&&!qt[rt]&&!qt._scheduler.unfinished&&!qt._pendingActions.length&&qt.trigger("finished")})}Nt.appendData=function(Vt){if(this._disposed){this.id;return}var qt=Vt.seriesIndex,ae=this.getModel(),ve=ae.getSeriesByIndex(qt);ve.appendData(Vt),this._scheduler.unfinished=!0},Nt.on=Pt("on",!1),Nt.off=Pt("off",!1),Nt.one=Pt("one",!1);function jt(Vt,qt,ae,ve){for(var xe=qt==="component",ye=xe?Vt._componentsViews:Vt._chartsViews,Le=xe?Vt._componentsMap:Vt._chartsMap,Fe=Vt._zr,we=Vt._api,ze=0;ze<ye.length;ze++)ye[ze].__alive=!1;xe?ae.eachComponent(function(Et,kt){Et!=="series"&&Ge(kt)}):ae.eachSeries(Ge);function Ge(Et){var kt="_ec_"+Et.id+"_"+Et.type,$t=Le[kt];if(!$t){var le=N(Et.type),me=xe?x.getClass(le.main,le.sub):a.getClass(le.sub);$t=new me,$t.init(ae,we),Le[kt]=$t,ye.push($t),Fe.add($t.group)}Et.__viewId=$t.__id=kt,$t.__alive=!0,$t.__model=Et,$t.group.__ecComponentInfo={mainType:Et.mainType,index:Et.componentIndex},!xe&&ve.prepareView($t,Et,ae,we)}for(var ze=0;ze<ye.length;){var We=ye[ze];We.__alive?ze++:(!xe&&We.renderTask.dispose(),Fe.remove(We.group),We.dispose(ae,we),ye.splice(ze,1),delete Le[We.__id],We.__id=We.group.__ecComponentInfo=null)}}function zt(Vt){Vt.clearColorPalette(),Vt.eachSeries(function(qt){qt.clearColorPalette()})}function Yt(Vt,qt,ae,ve){Zt(Vt,qt,ae,ve),P(Vt._chartsViews,function(xe){xe.__alive=!1}),ft(Vt,qt,ae,ve),P(Vt._chartsViews,function(xe){xe.__alive||xe.remove(qt,ae)})}function Zt(Vt,qt,ae,ve,xe){P(xe||Vt._componentsViews,function(ye){var Le=ye.__model;ye.render(Le,qt,ae,ve),yt(Le,ye)})}function ft(Vt,qt,ae,ve,xe){var ye=Vt._scheduler,Le;qt.eachSeries(function(Fe){var we=Vt._chartsMap[Fe.__viewId];we.__alive=!0;var ze=we.renderTask;ye.updatePayload(ze,ve),xe&&xe.get(Fe.uid)&&ze.dirty(),Le|=ze.perform(ye.getPerformArgs(ze)),we.group.silent=!!Fe.get("silent"),yt(Fe,we),it(Fe,we)}),ye.unfinished|=Le,ot(Vt,qt),y(Vt._zr.dom,qt)}function gt(Vt,qt){P(te,function(ae){ae(Vt,qt)})}var dt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];Nt._initEvents=function(){P(dt,function(Vt){var qt=function(ae){var ve=this.getModel(),xe=ae.target,ye,Le=Vt==="globalout";if(Le)ye={};else if(xe&&xe.dataIndex!=null){var Fe=xe.dataModel||ve.getSeriesByIndex(xe.seriesIndex);ye=Fe&&Fe.getDataParams(xe.dataIndex,xe.dataType,xe)||{}}else xe&&xe.eventData&&(ye=T.extend({},xe.eventData));if(ye){var we=ye.componentType,ze=ye.componentIndex;(we==="markLine"||we==="markPoint"||we==="markArea")&&(we="series",ze=ye.seriesIndex);var Ge=we&&ze!=null&&ve.getComponent(we,ze),We=Ge&&this[Ge.mainType==="series"?"_chartsMap":"_componentsMap"][Ge.__viewId];ye.event=ae,ye.type=Vt,this._ecEventProcessor.eventInfo={targetEl:xe,packedEvent:ye,model:Ge,view:We},this.trigger(Vt,ye)}};qt.zrEventfulCallAtLast=!0,this._zr.on(Vt,qt,this)},this),P(Ht,function(Vt,qt){this._messageCenter.on(qt,function(ae){this.trigger(qt,ae)},this)},this)},Nt.isDisposed=function(){return this._disposed},Nt.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},Nt.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0,n.setAttribute(this.getDom(),It,"");var Vt=this._api,qt=this._model;P(this._componentsViews,function(ae){ae.dispose(qt,Vt)}),P(this._chartsViews,function(ae){ae.dispose(qt,Vt)}),this._zr.dispose(),delete ne[this.id]},T.mixin(At,f);function lt(Vt){}function ot(Vt,qt){var ae=Vt._zr,ve=ae.storage,xe=0;ve.traverse(function(ye){xe++}),xe>qt.get("hoverLayerThreshold")&&!b.node&&qt.eachSeries(function(ye){if(!ye.preventUsingHoverLayer){var Le=Vt._chartsMap[ye.__viewId];Le.__alive&&Le.group.traverse(function(Fe){Fe.useHoverLayer=!0})}})}function it(Vt,qt){var ae=Vt.get("blendMode")||null;qt.group.traverse(function(ve){ve.isGroup||ve.style.blend!==ae&&ve.setStyle("blend",ae),ve.eachPendingDisplayable&&ve.eachPendingDisplayable(function(xe){xe.setStyle("blend",ae)})})}function yt(Vt,qt){var ae=Vt.get("z"),ve=Vt.get("zlevel");qt.group.traverse(function(xe){xe.type!=="group"&&(ae!=null&&(xe.z=ae),ve!=null&&(xe.zlevel=ve))})}function Ot(Vt){var qt=Vt._coordSysMgr;return T.extend(new m(Vt),{getCoordinateSystems:T.bind(qt.getCoordinateSystems,qt),getComponentByElement:function(ae){for(;ae;){var ve=ae.__ecComponentInfo;if(ve!=null)return Vt._model.getComponent(ve.mainType,ve.index);ae=ae.parent}}})}function St(){this.eventInfo}St.prototype={constructor:St,normalizeQuery:function(Vt){var qt={},ae={},ve={};if(T.isString(Vt)){var xe=N(Vt);qt.mainType=xe.main||null,qt.subType=xe.sub||null}else{var ye=["Index","Name","Id"],Le={name:1,dataIndex:1,dataType:1};T.each(Vt,function(Fe,we){for(var ze=!1,Ge=0;Ge<ye.length;Ge++){var We=ye[Ge],Et=we.lastIndexOf(We);if(Et>0&&Et===we.length-We.length){var kt=we.slice(0,Et);kt!=="data"&&(qt.mainType=kt,qt[We.toLowerCase()]=Fe,ze=!0)}}Le.hasOwnProperty(we)&&(ae[we]=Fe,ze=!0),ze||(ve[we]=Fe)})}return{cptQuery:qt,dataQuery:ae,otherQuery:ve}},filter:function(Vt,qt,ae){var ve=this.eventInfo;if(!ve)return!0;var xe=ve.targetEl,ye=ve.packedEvent,Le=ve.model,Fe=ve.view;if(!Le||!Fe)return!0;var we=qt.cptQuery,ze=qt.dataQuery;return Ge(we,Le,"mainType")&&Ge(we,Le,"subType")&&Ge(we,Le,"index","componentIndex")&&Ge(we,Le,"name")&&Ge(we,Le,"id")&&Ge(ze,ye,"name")&&Ge(ze,ye,"dataIndex")&&Ge(ze,ye,"dataType")&&(!Fe.filterForExposedEvent||Fe.filterForExposedEvent(Vt,qt.otherQuery,xe,ye));function Ge(We,Et,kt,$t){return We[kt]==null||Et[$t||kt]===We[kt]}},afterTrigger:function(){this.eventInfo=null}};var Gt={},Ht={},Kt=[],Jt=[],te=[],ie=[],oe={},he={},ne={},ce={},ge=new Date-0,Ae=new Date-0,It="_echarts_instance_";function Wt(Vt){var qt=0,ae=1,ve=2,xe="__connectUpdateStatus";function ye(Le,Fe){for(var we=0;we<Le.length;we++){var ze=Le[we];ze[xe]=Fe}}P(Ht,function(Le,Fe){Vt._messageCenter.on(Fe,function(we){if(ce[Vt.group]&&Vt[xe]!==qt){if(we&&we.escapeConnect)return;var ze=Vt.makeActionFromEvent(we),Ge=[];P(ne,function(We){We!==Vt&&We.group===Vt.group&&Ge.push(We)}),ye(Ge,qt),P(Ge,function(We){We[xe]!==ae&&We.dispatchAction(ze)}),ye(Ge,ve)}})})}function _t(Vt,qt,ae){var ve=Pe(Vt);if(ve)return ve;var xe=new At(Vt,qt,ae);return xe.id="ec_"+ge++,ne[xe.id]=xe,n.setAttribute(Vt,It,xe.id),Wt(xe),xe}function ee(Vt){if(T.isArray(Vt)){var qt=Vt;Vt=null,P(qt,function(ae){ae.group!=null&&(Vt=ae.group)}),Vt=Vt||"g_"+Ae++,P(qt,function(ae){ae.group=Vt})}return ce[Vt]=!0,Vt}function re(Vt){ce[Vt]=!1}var de=re;function Se(Vt){typeof Vt=="string"?Vt=ne[Vt]:Vt instanceof At||(Vt=Pe(Vt)),Vt instanceof At&&!Vt.isDisposed()&&Vt.dispose()}function Pe(Vt){return ne[n.getAttribute(Vt,It)]}function De(Vt){return ne[Vt]}function Ie(Vt,qt){oe[Vt]=qt}function pe(Vt){Jt.push(Vt)}function Oe(Vt,qt){Ze(Kt,Vt,qt,Z)}function Ne(Vt){te.push(Vt)}function Ve(Vt,qt,ae){typeof qt=="function"&&(ae=qt,qt="");var ve=E(Vt)?Vt.type:[Vt,Vt={event:qt}][0];Vt.event=(Vt.event||ve).toLowerCase(),qt=Vt.event,k(ht.test(ve)&&ht.test(qt)),Gt[ve]||(Gt[ve]={action:ae,actionInfo:Vt}),Ht[qt]=ve}function be(Vt,qt){o.register(Vt,qt)}function Be(Vt){var qt=o.get(Vt);if(qt)return qt.getDimensionsInfo?qt.getDimensionsInfo():qt.dimensions.slice()}function Ue(Vt,qt){Ze(ie,Vt,qt,Y,"layout")}function ke(Vt,qt){Ze(ie,Vt,qt,J,"visual")}function Ze(Vt,qt,ae,ve,xe){(L(qt)||E(qt))&&(ae=qt,qt=ve);var ye=w.wrapStageHandler(ae,xe);return ye.__prio=qt,ye.__raw=ae,Vt.push(ye),ye}function _(Vt,qt){he[Vt]=qt}function at(Vt){return s.extend(Vt)}function xt(Vt){return x.extend(Vt)}function bt(Vt){return c.extend(Vt)}function Bt(Vt){return a.extend(Vt)}function Qt(Vt){T.$override("createCanvas",Vt)}function ue(Vt,qt,ae){B.registerMap(Vt,qt,ae)}function Ce(Vt){var qt=B.retrieveMap(Vt);return qt&&qt[0]&&{geoJson:qt[0].geoJSON,specialAreas:qt[0].specialAreas}}ke(K,d),pe(l),Oe(H,r),_("default",p),Ve({type:"highlight",event:"highlight",update:"highlight"},T.noop),Ve({type:"downplay",event:"downplay",update:"downplay"},T.noop),Ie("light",S),Ie("dark",O);var Te={};z.version=I,z.dependencies=G,z.PRIORITY=st,z.init=_t,z.connect=ee,z.disConnect=re,z.disconnect=de,z.dispose=Se,z.getInstanceByDom=Pe,z.getInstanceById=De,z.registerTheme=Ie,z.registerPreprocessor=pe,z.registerProcessor=Oe,z.registerPostUpdate=Ne,z.registerAction=Ve,z.registerCoordinateSystem=be,z.getCoordinateSystemDimensions=Be,z.registerLayout=Ue,z.registerVisual=ke,z.registerLoading=_,z.extendComponentModel=at,z.extendComponentView=xt,z.extendSeriesModel=bt,z.extendChartView=Bt,z.setCanvasCreator=Qt,z.registerMap=ue,z.getMap=Ce,z.dataTool=Te;var He=e(40451);(function(){for(var Vt in He)He.hasOwnProperty(Vt)&&(z[Vt]=He[Vt])})()},40451:function(X,z,e){var M=e(23593);z.zrender=M;var F=e(43970);z.matrix=F;var R=e(12072);z.vector=R;var A=e(31879),T=e(94819);z.color=T;var D=e(48070),b=e(48354);z.number=b;var C=e(17795);z.format=C;var f=e(1655),v=f.throttle;z.throttle=f.throttle;var m=e(45251);z.helper=m;var o=e(47731);z.parseGeoJSON=o;var u=e(58677);z.List=u;var l=e(56785);z.Model=l;var r=e(36492);z.Axis=r;var s=e(58020);z.env=s;var c=o,x={};A.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(i){x[i]=A[i]});var a={};A.each(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(i){a[i]=D[i]}),z.parseGeoJson=c,z.util=x,z.graphic=a},45251:function(X,z,e){var M=e(31879),F=e(1664),R=e(99538),A=e(42544),T=e(56785),D=e(30871),b=D.getLayoutRect;z.getLayoutRect=D.getLayoutRect;var C=e(53618),f=C.enableDataStack,v=C.isDimensionStacked,m=C.getStackedDimension,o=e(72993);z.completeDimensions=o;var u=e(80554);z.createDimensions=u;var l=e(35730);z.createSymbol=l.createSymbol;function r(a){return F(a.getSource(),a)}var s={isDimensionStacked:v,enableDataStack:f,getStackedDimension:m};function c(a,i){var n=i;T.isInstance(i)||(n=new T(i),M.mixin(n,A));var h=R.createScaleByModel(n);return h.setExtent(a[0],a[1]),R.niceScaleExtent(h,n),h}function x(a){M.mixin(a,A)}z.createList=r,z.dataStack=s,z.createScale=c,z.mixinAxisModelCommonMethods=x},16923:function(X){var z={legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};X.exports=z},19641:function(X,z,e){var M=e(31879),F=e(48354),R=F.parsePercent,A=e(53618),T=A.isDimensionStacked,D=e(50629),b="__ec_stack_",C=.5,f=typeof Float32Array<"u"?Float32Array:Array;function v(g){return g.get("stack")||b+g.seriesIndex}function m(g){return g.dim+g.index}function o(g){var d=[],y=g.axis,p="axis0";if(y.type==="category"){for(var w=y.getBandWidth(),S=0;S<g.count;S++)d.push(M.defaults({bandWidth:w,axisKey:p,stackId:b+S},g));for(var O=s(d),B=[],S=0;S<g.count;S++){var k=O[p][b+S];k.offsetCenter=k.offset+k.width/2,B.push(k)}return B}}function u(g,d){var y=[];return d.eachSeriesByType(g,function(p){i(p)&&!n(p)&&y.push(p)}),y}function l(g){var d={};M.each(g,function(k){var P=k.coordinateSystem,L=P.getBaseAxis();if(!(L.type!=="time"&&L.type!=="value"))for(var E=k.getData(),N=L.dim+"_"+L.index,I=E.mapDimension(L.dim),G=0,W=E.count();G<W;++G){var Z=E.get(I,G);d[N]?d[N].push(Z):d[N]=[Z]}});var y=[];for(var p in d)if(d.hasOwnProperty(p)){var w=d[p];if(w){w.sort(function(k,P){return k-P});for(var S=null,O=1;O<w.length;++O){var B=w[O]-w[O-1];B>0&&(S=S===null?B:Math.min(S,B))}y[p]=S}}return y}function r(g){var d=l(g),y=[];return M.each(g,function(p){var w=p.coordinateSystem,S=w.getBaseAxis(),O=S.getExtent(),B;if(S.type==="category")B=S.getBandWidth();else if(S.type==="value"||S.type==="time"){var k=S.dim+"_"+S.index,P=d[k],L=Math.abs(O[1]-O[0]),E=S.scale.getExtent(),N=Math.abs(E[1]-E[0]);B=P?L/N*P:L}else{var I=p.getData();B=Math.abs(O[1]-O[0])/I.count()}var G=R(p.get("barWidth"),B),W=R(p.get("barMaxWidth"),B),Z=R(p.get("barMinWidth")||1,B),U=p.get("barGap"),H=p.get("barCategoryGap");y.push({bandWidth:B,barWidth:G,barMaxWidth:W,barMinWidth:Z,barGap:U,barCategoryGap:H,axisKey:m(S),stackId:v(p)})}),s(y)}function s(g){var d={};M.each(g,function(p,w){var S=p.axisKey,O=p.bandWidth,B=d[S]||{bandWidth:O,remainedWidth:O,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},k=B.stacks;d[S]=B;var P=p.stackId;k[P]||B.autoWidthCount++,k[P]=k[P]||{width:0,maxWidth:0};var L=p.barWidth;L&&!k[P].width&&(k[P].width=L,L=Math.min(B.remainedWidth,L),B.remainedWidth-=L);var E=p.barMaxWidth;E&&(k[P].maxWidth=E);var N=p.barMinWidth;N&&(k[P].minWidth=N);var I=p.barGap;I!=null&&(B.gap=I);var G=p.barCategoryGap;G!=null&&(B.categoryGap=G)});var y={};return M.each(d,function(p,w){y[w]={};var S=p.stacks,O=p.bandWidth,B=R(p.categoryGap,O),k=R(p.gap,1),P=p.remainedWidth,L=p.autoWidthCount,E=(P-B)/(L+(L-1)*k);E=Math.max(E,0),M.each(S,function(W){var Z=W.maxWidth,U=W.minWidth;if(W.width){var H=W.width;Z&&(H=Math.min(H,Z)),U&&(H=Math.max(H,U)),W.width=H,P-=H+k*H,L--}else{var H=E;Z&&Z<H&&(H=Math.min(Z,P)),U&&U>H&&(H=U),H!==E&&(W.width=H,P-=H+k*H,L--)}}),E=(P-B)/(L+(L-1)*k),E=Math.max(E,0);var N=0,I;M.each(S,function(W,Z){W.width||(W.width=E),I=W,N+=W.width*(1+k)}),I&&(N-=I.width*k);var G=-N/2;M.each(S,function(W,Z){y[w][Z]=y[w][Z]||{bandWidth:O,offset:G,width:W.width},G+=W.width*(1+k)})}),y}function c(g,d,y){if(g&&d){var p=g[m(d)];return p!=null&&y!=null&&(p=p[v(y)]),p}}function x(g,d){var y=u(g,d),p=r(y),w={},S={};M.each(y,function(O){var B=O.getData(),k=O.coordinateSystem,P=k.getBaseAxis(),L=v(O),E=p[m(P)][L],N=E.offset,I=E.width,G=k.getOtherAxis(P),W=O.get("barMinHeight")||0;w[L]=w[L]||[],S[L]=S[L]||[],B.setLayout({bandWidth:E.bandWidth,offset:N,size:I});for(var Z=B.mapDimension(G.dim),U=B.mapDimension(P.dim),H=T(B,Z),V=G.isHorizontal(),Y=h(P,G,H),$=0,K=B.count();$<K;$++){var J=B.get(Z,$),Q=B.get(U,$),et=J>=0?"p":"n",nt=Y;H&&(w[L][Q]||(w[L][Q]={p:Y,n:Y}),nt=w[L][Q][et]);var st,ut,rt,ht;if(V){var Pt=k.dataToPoint([J,Q]);st=nt,ut=Pt[1]+N,rt=Pt[0]-Y,ht=I,Math.abs(rt)<W&&(rt=(rt<0?-1:1)*W),isNaN(rt)||H&&(w[L][Q][et]+=rt)}else{var Pt=k.dataToPoint([Q,J]);st=Pt[0]+N,ut=nt,rt=I,ht=Pt[1]-Y,Math.abs(ht)<W&&(ht=(ht<=0?-1:1)*W),isNaN(ht)||H&&(w[L][Q][et]+=ht)}B.setItemLayout($,{x:st,y:ut,width:rt,height:ht})}},this)}var a={seriesType:"bar",plan:D(),reset:function(g){if(!i(g)||!n(g))return;var d=g.getData(),y=g.coordinateSystem,p=y.grid.getRect(),w=y.getBaseAxis(),S=y.getOtherAxis(w),O=d.mapDimension(S.dim),B=d.mapDimension(w.dim),k=S.isHorizontal(),P=k?0:1,L=c(r([g]),w,g).width;return L>C||(L=C),{progress:E};function E(N,I){for(var G=N.count,W=new f(G*2),Z=new f(G*2),U=new f(G),H,V=[],Y=[],$=0,K=0;(H=N.next())!=null;)Y[P]=I.get(O,H),Y[1-P]=I.get(B,H),V=y.dataToPoint(Y,null,V),Z[$]=k?p.x+p.width:V[0],W[$++]=V[0],Z[$]=k?V[1]:p.y+p.height,W[$++]=V[1],U[K++]=H;I.setLayout({largePoints:W,largeDataIndices:U,largeBackgroundPoints:Z,barWidth:L,valueAxisStart:h(w,S,!1),backgroundStart:k?p.x:p.y,valueAxisHorizontal:k})}}};function i(g){return g.coordinateSystem&&g.coordinateSystem.type==="cartesian2d"}function n(g){return g.pipelineContext&&g.pipelineContext.large}function h(g,d,y){return d.toGlobalCoord(d.dataToCoord(d.type==="log"?1:0))}z.getLayoutOnAxis=o,z.prepareLayoutBarSeries=u,z.makeColumnLayout=r,z.retrieveColumnLayout=c,z.layout=x,z.largeLayout=a},24741:function(X,z,e){var M=e(31879),F=e(48354),R=F.parsePercent,A=e(53618),T=A.isDimensionStacked;function D(m){return m.get("stack")||"__ec_stack_"+m.seriesIndex}function b(m,o){return o.dim+m.model.componentIndex}function C(m,o,u){var l={},r=f(M.filter(o.getSeriesByType(m),function(s){return!o.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));o.eachSeriesByType(m,function(s){if(s.coordinateSystem.type==="polar"){var c=s.getData(),x=s.coordinateSystem,a=x.getBaseAxis(),i=b(x,a),n=D(s),h=r[i][n],g=h.offset,d=h.width,y=x.getOtherAxis(a),p=s.coordinateSystem.cx,w=s.coordinateSystem.cy,S=s.get("barMinHeight")||0,O=s.get("barMinAngle")||0;l[n]=l[n]||[];for(var B=c.mapDimension(y.dim),k=c.mapDimension(a.dim),P=T(c,B),L=a.dim!=="radius"||!s.get("roundCap",!0),E=y.dim==="radius"?y.dataToRadius(0):y.dataToAngle(0),N=0,I=c.count();N<I;N++){var G=c.get(B,N),W=c.get(k,N),Z=G>=0?"p":"n",U=E;P&&(l[n][W]||(l[n][W]={p:E,n:E}),U=l[n][W][Z]);var H,V,Y,$;if(y.dim==="radius"){var K=y.dataToRadius(G)-E,J=a.dataToAngle(W);Math.abs(K)<S&&(K=(K<0?-1:1)*S),H=U,V=U+K,Y=J-g,$=Y-d,P&&(l[n][W][Z]=V)}else{var Q=y.dataToAngle(G,L)-E,et=a.dataToRadius(W);Math.abs(Q)<O&&(Q=(Q<0?-1:1)*O),H=et+g,V=H+d,Y=U,$=U+Q,P&&(l[n][W][Z]=$)}c.setItemLayout(N,{cx:p,cy:w,r0:H,r:V,startAngle:-Y*Math.PI/180,endAngle:-$*Math.PI/180})}}},this)}function f(m,o){var u={};M.each(m,function(r,s){var c=r.getData(),x=r.coordinateSystem,a=x.getBaseAxis(),i=b(x,a),n=a.getExtent(),h=a.type==="category"?a.getBandWidth():Math.abs(n[1]-n[0])/c.count(),g=u[i]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=g.stacks;u[i]=g;var y=D(r);d[y]||g.autoWidthCount++,d[y]=d[y]||{width:0,maxWidth:0};var p=R(r.get("barWidth"),h),w=R(r.get("barMaxWidth"),h),S=r.get("barGap"),O=r.get("barCategoryGap");p&&!d[y].width&&(p=Math.min(g.remainedWidth,p),d[y].width=p,g.remainedWidth-=p),w&&(d[y].maxWidth=w),S!=null&&(g.gap=S),O!=null&&(g.categoryGap=O)});var l={};return M.each(u,function(r,s){l[s]={};var c=r.stacks,x=r.bandWidth,a=R(r.categoryGap,x),i=R(r.gap,1),n=r.remainedWidth,h=r.autoWidthCount,g=(n-a)/(h+(h-1)*i);g=Math.max(g,0),M.each(c,function(w,S){var O=w.maxWidth;O&&O<g&&(O=Math.min(O,n),w.width&&(O=Math.min(O,w.width)),n-=O,w.width=O,h--)}),g=(n-a)/(h+(h-1)*i),g=Math.max(g,0);var d=0,y;M.each(c,function(w,S){w.width||(w.width=g),y=w,d+=w.width*(1+i)}),y&&(d-=y.width*i);var p=-d/2;M.each(c,function(w,S){l[s][S]=l[s][S]||{offset:p,width:w.width},p+=w.width*(1+i)})}),l}var v=C;X.exports=v},75028:function(X,z,e){var M=e(31879),F=M.map,R=e(50629),A=e(53618),T=A.isDimensionStacked;function D(b){return{seriesType:b,plan:R(),reset:function(C){var f=C.getData(),v=C.coordinateSystem,m=C.pipelineContext,o=m.large;if(!v)return;var u=F(v.dimensions,function(c){return f.mapDimension(c)}).slice(0,2),l=u.length,r=f.getCalculationInfo("stackResultDimension");T(f,u[0])&&(u[0]=r),T(f,u[1])&&(u[1]=r);function s(c,x){for(var a=c.end-c.start,i=o&&new Float32Array(a*l),n=c.start,h=0,g=[],d=[];n<c.end;n++){var y;if(l===1){var p=x.get(u[0],n);y=!isNaN(p)&&v.dataToPoint(p,null,d)}else{var p=g[0]=x.get(u[0],n),w=g[1]=x.get(u[1],n);y=!isNaN(p)&&!isNaN(w)&&v.dataToPoint(g,null,d)}o?(i[h++]=y?y[0]:NaN,i[h++]=y?y[1]:NaN):x.setItemLayout(n,y&&y.slice()||[NaN,NaN])}o&&x.setLayout("symbolPoints",i)}return l&&{progress:s}}}}X.exports=D},93253:function(X,z,e){var M=e(31879),F=e(48070),R=e(72113),A=Math.PI;function T(D,b){b=b||{},M.defaults(b,{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var C=new F.Group,f=new F.Rect({style:{fill:b.maskColor},zlevel:b.zlevel,z:1e4});C.add(f);var v=b.fontSize+" sans-serif",m=new F.Rect({style:{fill:"none",text:b.text,font:v,textPosition:"right",textDistance:10,textFill:b.textColor},zlevel:b.zlevel,z:10001});if(C.add(m),b.showSpinner){var o=new F.Arc({shape:{startAngle:-A/2,endAngle:-A/2+.1,r:b.spinnerRadius},style:{stroke:b.color,lineCap:"round",lineWidth:b.lineWidth},zlevel:b.zlevel,z:10001});o.animateShape(!0).when(1e3,{endAngle:A*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:A*3/2}).delay(300).start("circularInOut"),C.add(o)}return C.resize=function(){var u=R.getWidth(b.text,v),l=b.showSpinner?b.spinnerRadius:0,r=(D.getWidth()-l*2-(b.showSpinner&&u?10:0)-u)/2-(b.showSpinner?0:u/2),s=D.getHeight()/2;b.showSpinner&&o.setShape({cx:r,cy:s}),m.setShape({x:r-l,y:s-l,width:l*2,height:l*2}),f.setShape({x:0,y:0,width:D.getWidth(),height:D.getHeight()})},C.resize(),C}X.exports=T},60684:function(X,z,e){var M=e(31879),F=e(56785),R=e(50777),A=e(28108),T=A.enableClassManagement,D=A.parseClassType,b=e(35454),C=b.makeInner,f=e(30871),v=e(53286),m=C(),o=F.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(r,s,c,x){F.call(this,r,s,c,x),this.uid=R.getUID("ec_cpt_model")},init:function(r,s,c,x){this.mergeDefaultAndTheme(r,c)},mergeDefaultAndTheme:function(r,s){var c=this.layoutMode,x=c?f.getLayoutParams(r):{},a=s.getTheme();M.merge(r,a.get(this.mainType)),M.merge(r,this.getDefaultOption()),c&&f.mergeLayoutParam(r,x,c)},mergeOption:function(r,s){M.merge(this.option,r,!0);var c=this.layoutMode;c&&f.mergeLayoutParam(this.option,r,c)},optionUpdated:function(r,s){},getDefaultOption:function(){var r=m(this);if(!r.defaultOption){for(var s=[],c=this.constructor;c;){var x=c.prototype.defaultOption;x&&s.push(x),c=c.superClass}for(var a={},i=s.length-1;i>=0;i--)a=M.merge(a,s[i],!0);r.defaultOption=a}return r.defaultOption},getReferringComponents:function(r){return this.ecModel.queryComponents({mainType:r,index:this.get(r+"Index",!0),id:this.get(r+"Id",!0)})}});T(o,{registerWhenExtend:!0}),R.enableSubTypeDefaulter(o),R.enableTopologicalTravel(o,u);function u(r){var s=[];return M.each(o.getClassesByMainType(r),function(c){s=s.concat(c.prototype.dependencies||[])}),s=M.map(s,function(c){return D(c).main}),r!=="dataset"&&M.indexOf(s,"dataset")<=0&&s.unshift("dataset"),s}M.mixin(o,v);var l=o;X.exports=l},64527:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=R.each,T=R.filter,D=R.map,b=R.isArray,C=R.indexOf,f=R.isObject,v=R.isString,m=R.createHashMap,o=R.assert,u=R.clone,l=R.merge,r=R.extend,s=R.mixin,c=e(35454),x=e(56785),a=e(60684),i=e(17807),n=e(76790),h=e(43036),g=h.resetSourceDefaulter,d="\0_ec_inner",y=x.extend({init:function(N,I,G,W){G=G||{},this.option=null,this._theme=new x(G),this._optionManager=W},setOption:function(N,I){o(!(d in N),"please use chart.getOption()"),this._optionManager.setOption(N,I),this.resetOption(null)},resetOption:function(N){var I=!1,G=this._optionManager;if(!N||N==="recreate"){var W=G.mountOption(N==="recreate");!this.option||N==="recreate"?S.call(this,W):(this.restoreData(),this.mergeOption(W)),I=!0}if((N==="timeline"||N==="media")&&this.restoreData(),!N||N==="recreate"||N==="timeline"){var Z=G.getTimelineOption(this);Z&&(this.mergeOption(Z),I=!0)}if(!N||N==="recreate"||N==="media"){var U=G.getMediaOption(this,this._api);U.length&&A(U,function(H){this.mergeOption(H,I=!0)},this)}return I},mergeOption:function(N){var I=this.option,G=this._componentsMap,W=[];g(this),A(N,function(U,H){U!=null&&(a.hasClass(H)?H&&W.push(H):I[H]=I[H]==null?u(U):l(I[H],U,!0))}),a.topologicalTravel(W,a.getAllClassMainTypes(),Z,this);function Z(U,H){var V=c.normalizeToArray(N[U]),Y=c.mappingToExists(G.get(U),V);c.makeIdAndName(Y),A(Y,function(K,J){var Q=K.option;f(Q)&&(K.keyInfo.mainType=U,K.keyInfo.subType=B(U,Q,K.exist))});var $=O(G,H);I[U]=[],G.set(U,[]),A(Y,function(K,J){var Q=K.exist,et=K.option;if(o(f(et)||Q,"Empty component definition"),!et)Q.mergeOption({},this),Q.optionUpdated({},!1);else{var nt=a.getClass(U,K.keyInfo.subType,!0);if(Q&&Q.constructor===nt)Q.name=K.keyInfo.name,Q.mergeOption(et,this),Q.optionUpdated(et,!1);else{var st=r({dependentModels:$,componentIndex:J},K.keyInfo);Q=new nt(et,this,this,st),r(Q,st),Q.init(et,this,this,st),Q.optionUpdated(null,!0)}}G.get(U)[J]=Q,I[U][J]=Q.option},this),U==="series"&&k(this,G.get("series"))}this._seriesIndicesMap=m(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var N=u(this.option);return A(N,function(I,G){if(a.hasClass(G)){for(var I=c.normalizeToArray(I),W=I.length-1;W>=0;W--)c.isIdInner(I[W])&&I.splice(W,1);N[G]=I}}),delete N[d],N},getTheme:function(){return this._theme},getComponent:function(N,I){var G=this._componentsMap.get(N);if(G)return G[I||0]},queryComponents:function(N){var I=N.mainType;if(!I)return[];var G=N.index,W=N.id,Z=N.name,U=this._componentsMap.get(I);if(!U||!U.length)return[];var H;if(G!=null)b(G)||(G=[G]),H=T(D(G,function($){return U[$]}),function($){return!!$});else if(W!=null){var V=b(W);H=T(U,function($){return V&&C(W,$.id)>=0||!V&&$.id===W})}else if(Z!=null){var Y=b(Z);H=T(U,function($){return Y&&C(Z,$.name)>=0||!Y&&$.name===Z})}else H=U.slice();return P(H,N)},findComponents:function(N){var I=N.query,G=N.mainType,W=U(I),Z=W?this.queryComponents(W):this._componentsMap.get(G);return H(P(Z,N));function U(V){var Y=G+"Index",$=G+"Id",K=G+"Name";return V&&(V[Y]!=null||V[$]!=null||V[K]!=null)?{mainType:G,index:V[Y],id:V[$],name:V[K]}:null}function H(V){return N.filter?T(V,N.filter):V}},eachComponent:function(N,I,G){var W=this._componentsMap;if(typeof N=="function")G=I,I=N,W.each(function(U,H){A(U,function(V,Y){I.call(G,H,V,Y)})});else if(v(N))A(W.get(N),I,G);else if(f(N)){var Z=this.findComponents(N);A(Z,I,G)}},getSeriesByName:function(N){var I=this._componentsMap.get("series");return T(I,function(G){return G.name===N})},getSeriesByIndex:function(N){return this._componentsMap.get("series")[N]},getSeriesByType:function(N){var I=this._componentsMap.get("series");return T(I,function(G){return G.subType===N})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(N,I){A(this._seriesIndices,function(G){var W=this._componentsMap.get("series")[G];N.call(I,W,G)},this)},eachRawSeries:function(N,I){A(this._componentsMap.get("series"),N,I)},eachSeriesByType:function(N,I,G){A(this._seriesIndices,function(W){var Z=this._componentsMap.get("series")[W];Z.subType===N&&I.call(G,Z,W)},this)},eachRawSeriesByType:function(N,I,G){return A(this.getSeriesByType(N),I,G)},isSeriesFiltered:function(N){return this._seriesIndicesMap.get(N.componentIndex)==null},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(N,I){var G=T(this._componentsMap.get("series"),N,I);k(this,G)},restoreData:function(N){var I=this._componentsMap;k(this,I.get("series"));var G=[];I.each(function(W,Z){G.push(Z)}),a.topologicalTravel(G,a.getAllClassMainTypes(),function(W,Z){A(I.get(W),function(U){(W!=="series"||!p(U,N))&&U.restoreData()})})}});function p(N,I){if(I){var G=I.seiresIndex,W=I.seriesId,Z=I.seriesName;return G!=null&&N.componentIndex!==G||W!=null&&N.id!==W||Z!=null&&N.name!==Z}}function w(N,I){var G=N.color&&!N.colorLayer;A(I,function(W,Z){Z==="colorLayer"&&G||a.hasClass(Z)||(typeof W=="object"?N[Z]=N[Z]?l(N[Z],W,!1):u(W):N[Z]==null&&(N[Z]=W))})}function S(N){N=N,this.option={},this.option[d]=1,this._componentsMap=m({series:[]}),this._seriesIndices,this._seriesIndicesMap,w(N,this._theme.option),l(N,i,!1),this.mergeOption(N)}function O(N,I){b(I)||(I=I?[I]:[]);var G={};return A(I,function(W){G[W]=(N.get(W)||[]).slice()}),G}function B(N,I,G){var W=I.type?I.type:G?G.subType:a.determineSubType(N,I);return W}function k(N,I){N._seriesIndicesMap=m(N._seriesIndices=D(I,function(G){return G.componentIndex})||[])}function P(N,I){return I.hasOwnProperty("subType")?T(N,function(G){return G.subType===I.subType}):N}function L(N){}s(y,n);var E=y;X.exports=E},56785:function(X,z,e){var M=e(31879),F=e(58020),R=e(35454),A=R.makeInner,T=e(28108),D=T.enableClassExtend,b=T.enableClassCheck,C=e(82705),f=e(1991),v=e(80463),m=e(40856),o=M.mixin,u=A();function l(x,a,i){this.parentModel=a,this.ecModel=i,this.option=x}l.prototype={constructor:l,init:null,mergeOption:function(x){M.merge(this.option,x,!0)},get:function(x,a){return x==null?this.option:r(this.option,this.parsePath(x),!a&&s(this,x))},getShallow:function(x,a){var i=this.option,n=i==null?i:i[x],h=!a&&s(this,x);return n==null&&h&&(n=h.getShallow(x)),n},getModel:function(x,a){var i=x==null?this.option:r(this.option,x=this.parsePath(x)),n;return a=a||(n=s(this,x))&&n.getModel(x),new l(i,a,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var x=this.constructor;return new x(M.clone(this.option))},setReadOnly:function(x){},parsePath:function(x){return typeof x=="string"&&(x=x.split(".")),x},customizeGetParent:function(x){u(this).getParent=x},isAnimationEnabled:function(){if(!F.node){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}};function r(x,a,i){for(var n=0;n<a.length&&!(a[n]&&(x=x&&typeof x=="object"?x[a[n]]:null,x==null));n++);return x==null&&i&&(x=i.get(a)),x}function s(x,a){var i=u(x).getParent;return i?i.call(x,a):x.parentModel}D(l),b(l),o(l,C),o(l,f),o(l,v),o(l,m);var c=l;X.exports=c},29607:function(X,z,e){var M=e(31879),F=e(35454),R=e(60684),A=M.each,T=M.clone,D=M.map,b=M.merge,C=/^(min|max)?(.+)$/;function f(s){this._api=s,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}f.prototype={constructor:f,setOption:function(s,c){s&&M.each(F.normalizeToArray(s.series),function(i){i&&i.data&&M.isTypedArray(i.data)&&M.setAsPrimitive(i.data)}),s=T(s);var x=this._optionBackup,a=v.call(this,s,c,!x);this._newBaseOption=a.baseOption,x?(l(x.baseOption,a.baseOption),a.timelineOptions.length&&(x.timelineOptions=a.timelineOptions),a.mediaList.length&&(x.mediaList=a.mediaList),a.mediaDefault&&(x.mediaDefault=a.mediaDefault)):this._optionBackup=a},mountOption:function(s){var c=this._optionBackup;return this._timelineOptions=D(c.timelineOptions,T),this._mediaList=D(c.mediaList,T),this._mediaDefault=T(c.mediaDefault),this._currentMediaIndices=[],T(s?c.baseOption:this._newBaseOption)},getTimelineOption:function(s){var c,x=this._timelineOptions;if(x.length){var a=s.getComponent("timeline");a&&(c=T(x[a.getCurrentIndex()],!0))}return c},getMediaOption:function(s){var c=this._api.getWidth(),x=this._api.getHeight(),a=this._mediaList,i=this._mediaDefault,n=[],h=[];if(!a.length&&!i)return h;for(var g=0,d=a.length;g<d;g++)m(a[g].query,c,x)&&n.push(g);return!n.length&&i&&(n=[-1]),n.length&&!u(n,this._currentMediaIndices)&&(h=D(n,function(y){return T(y===-1?i.option:a[y].option)})),this._currentMediaIndices=n,h}};function v(s,c,x){var a=[],i=[],n,h,g=s.timeline;if(s.baseOption&&(h=s.baseOption),(g||s.options)&&(h=h||{},a=(s.options||[]).slice()),s.media){h=h||{};var d=s.media;A(d,function(y){y&&y.option&&(y.query?i.push(y):n||(n=y))})}return h||(h=s),h.timeline||(h.timeline=g),A([h].concat(a).concat(M.map(i,function(y){return y.option})),function(y){A(c,function(p){p(y,x)})}),{baseOption:h,timelineOptions:a,mediaDefault:n,mediaList:i}}function m(s,c,x){var a={width:c,height:x,aspectratio:c/x},i=!0;return M.each(s,function(n,h){var g=h.match(C);if(!(!g||!g[1]||!g[2])){var d=g[1],y=g[2].toLowerCase();o(a[y],n,d)||(i=!1)}}),i}function o(s,c,x){return x==="min"?s>=c:x==="max"?s<=c:s===c}function u(s,c){return s.join(",")===c.join(",")}function l(s,c){c=c||{},A(c,function(x,a){if(x!=null){var i=s[a];if(!R.hasClass(a))s[a]=b(i,x,!0);else{x=F.normalizeToArray(x),i=F.normalizeToArray(i);var n=F.mappingToExists(i,x);s[a]=D(n,function(h){return h.option&&h.exist?b(h.exist,h.option,!0):h.exist||h.option})}}})}var r=f;X.exports=r},2365:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=e(58020),T=e(17795),D=T.formatTime,b=T.encodeHTML,C=T.addCommas,f=T.getTooltipMarker,v=e(35454),m=e(60684),o=e(76790),u=e(82370),l=e(30871),r=l.getLayoutParams,s=l.mergeLayoutParam,c=e(5604),x=c.createTask,a=e(43036),i=a.prepareSource,n=a.getSource,h=e(58708),g=h.retrieveRawValue,d=v.makeInner(),y=m.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(N,I,G,W){this.seriesIndex=this.componentIndex,this.dataTask=x({count:S,reset:O}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(N,G),i(this);var Z=this.getInitialData(N,G);k(Z,this),this.dataTask.context.data=Z,d(this).dataBeforeProcessed=Z,p(this)},mergeDefaultAndTheme:function(N,I){var G=this.layoutMode,W=G?r(N):{},Z=this.subType;m.hasClass(Z)&&(Z+="Series"),R.merge(N,I.getTheme().get(this.subType)),R.merge(N,this.getDefaultOption()),v.defaultEmphasis(N,"label",["show"]),this.fillDataTextStyle(N.data),G&&s(N,W,G)},mergeOption:function(N,I){N=R.merge(this.option,N,!0),this.fillDataTextStyle(N.data);var G=this.layoutMode;G&&s(this.option,N,G),i(this);var W=this.getInitialData(N,I);k(W,this),this.dataTask.dirty(),this.dataTask.context.data=W,d(this).dataBeforeProcessed=W,p(this)},fillDataTextStyle:function(N){if(N&&!R.isTypedArray(N))for(var I=["show"],G=0;G<N.length;G++)N[G]&&N[G].label&&v.defaultEmphasis(N[G],"label",I)},getInitialData:function(){},appendData:function(N){var I=this.getRawData();I.appendData(N.data)},getData:function(N){var I=L(this);if(I){var G=I.context.data;return N==null?G:G.getLinkedData(N)}else return d(this).data},setData:function(N){var I=L(this);if(I){var G=I.context;G.data!==N&&I.modifyOutputEnd&&I.setOutputEnd(N.count()),G.outputData=N,I!==this.dataTask&&(G.data=N)}d(this).data=N},getSource:function(){return n(this)},getRawData:function(){return d(this).dataBeforeProcessed},getBaseAxis:function(){var N=this.coordinateSystem;return N&&N.getBaseAxis&&N.getBaseAxis()},formatTooltip:function(N,I,G,W){var Z=this;W=W||"html";var U=W==="html"?"<br/>":`
`,H=W==="richText",V={},Y=0;function $(Tt){var mt=R.reduce(Tt,function(Ct,jt,zt){var Yt=J.getDimensionInfo(zt);return Ct|=Yt&&Yt.tooltip!==!1&&Yt.displayName!=null},0),Ft=[];Q.length?R.each(Q,function(Ct){ct(g(J,N,Ct),Ct)}):R.each(Tt,ct);function ct(Ct,jt){var zt=J.getDimensionInfo(jt);if(!(!zt||zt.otherDims.tooltip===!1)){var Yt=zt.type,Zt="sub"+Z.seriesIndex+"at"+Y,ft=f({color:ut,type:"subItem",renderMode:W,markerId:Zt}),gt=typeof ft=="string"?ft:ft.content,dt=(mt?gt+b(zt.displayName||"-")+": ":"")+b(Yt==="ordinal"?Ct+"":Yt==="time"?I?"":D("yyyy/MM/dd hh:mm:ss",Ct):C(Ct));dt&&Ft.push(dt),H&&(V[Zt]=ut,++Y)}}var vt=mt?H?`
`:"<br/>":"",Dt=vt+Ft.join(vt||", ");return{renderMode:W,content:Dt,style:V}}function K(Tt){return{renderMode:W,content:b(C(Tt)),style:V}}var J=this.getData(),Q=J.mapDimension("defaultedTooltip",!0),et=Q.length,nt=this.getRawValue(N),st=R.isArray(nt),ut=J.getItemVisual(N,"color");R.isObject(ut)&&ut.colorStops&&(ut=(ut.colorStops[0]||{}).color),ut=ut||"transparent";var rt=et>1||st&&!et?$(nt):K(et?g(J,N,Q[0]):st?nt[0]:nt),ht=rt.content,Pt=Z.seriesIndex+"at"+Y,wt=f({color:ut,type:"item",renderMode:W,markerId:Pt});V[Pt]=ut,++Y;var At=J.getName(N),Nt=this.name;v.isNameSpecified(this)||(Nt=""),Nt=Nt?b(Nt)+(I?": ":U):"";var Lt=typeof wt=="string"?wt:wt.content,Rt=I?Lt+Nt+ht:Nt+Lt+(At?b(At)+": "+ht:ht);return{html:Rt,markers:V}},isAnimationEnabled:function(){if(A.node)return!1;var N=this.getShallow("animation");return N&&this.getData().count()>this.getShallow("animationThreshold")&&(N=!1),N},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(N,I,G){var W=this.ecModel,Z=o.getColorFromPalette.call(this,N,I,G);return Z||(Z=W.getColorFromPalette(N,I,G)),Z},coordDimToDataDim:function(N){return this.getRawData().mapDimension(N,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});R.mixin(y,u),R.mixin(y,o);function p(N){var I=N.name;v.isNameSpecified(N)||(N.name=w(N)||I)}function w(N){var I=N.getRawData(),G=I.mapDimension("seriesName",!0),W=[];return R.each(G,function(Z){var U=I.getDimensionInfo(Z);U.displayName&&W.push(U.displayName)}),W.join(" ")}function S(N){return N.model.getRawData().count()}function O(N){var I=N.model;return I.setData(I.getRawData().cloneShallow()),B}function B(N,I){I.outputData&&N.end>I.outputData.count()&&I.model.getRawData().cloneShallow(I.outputData)}function k(N,I){R.each(N.CHANGABLE_METHODS,function(G){N.wrapMethod(G,R.curry(P,I))})}function P(N){var I=L(N);I&&I.setOutputEnd(this.count())}function L(N){var I=(N.ecModel||{}).scheduler,G=I&&I.getPipeline(N.uid);if(G){var W=G.currentTask;if(W){var Z=W.agentStubMap;Z&&(W=Z.get(N.uid))}return W}}var E=y;X.exports=E},17807:function(X){var z="";typeof navigator<"u"&&(z=navigator.platform||"");var e={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:z.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};X.exports=e},1991:function(X,z,e){var M=e(69003),F=M([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),R={getAreaStyle:function(A,T){return F(this,A,T)}};X.exports=R},53286:function(X){var z={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}};X.exports=z},76790:function(X,z,e){var M=e(35454),F=M.makeInner,R=M.normalizeToArray,A=F();function T(b,C){for(var f=b.length,v=0;v<f;v++)if(b[v].length>C)return b[v];return b[f-1]}var D={clearColorPalette:function(){A(this).colorIdx=0,A(this).colorNameMap={}},getColorFromPalette:function(b,C,f){C=C||this;var v=A(C),m=v.colorIdx||0,o=v.colorNameMap=v.colorNameMap||{};if(o.hasOwnProperty(b))return o[b];var u=R(this.get("color",!0)),l=this.get("colorLayer",!0),r=f==null||!l?u:T(l,f);if(r=r||u,!(!r||!r.length)){var s=r[m];return b&&(o[b]=s),v.colorIdx=(m+1)%r.length,s}}};X.exports=D},82370:function(X,z,e){var M=e(58708),F=M.retrieveRawValue,R=e(17795),A=R.getTooltipMarker,T=R.formatTpl,D=e(35454),b=D.getTooltipRenderMode,C=/\{@(.+?)\}/g,f={getDataParams:function(v,m){var o=this.getData(m),u=this.getRawValue(v,m),l=o.getRawIndex(v),r=o.getName(v),s=o.getRawDataItem(v),c=o.getItemVisual(v,"color"),x=o.getItemVisual(v,"borderColor"),a=this.ecModel.getComponent("tooltip"),i=a&&a.get("renderMode"),n=b(i),h=this.mainType,g=h==="series",d=o.userOutput;return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:g?this.subType:null,seriesIndex:this.seriesIndex,seriesId:g?this.id:null,seriesName:g?this.name:null,name:r,dataIndex:l,data:s,dataType:m,value:u,color:c,borderColor:x,dimensionNames:d?d.dimensionNames:null,encode:d?d.encode:null,marker:A({color:c,renderMode:n}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(v,m,o,u,l){m=m||"normal";var r=this.getData(o),s=r.getItemModel(v),c=this.getDataParams(v,o);u!=null&&c.value instanceof Array&&(c.value=c.value[u]);var x=s.get(m==="normal"?[l||"label","formatter"]:[m,l||"label","formatter"]);if(typeof x=="function")return c.status=m,c.dimensionIndex=u,x(c);if(typeof x=="string"){var a=T(x,c);return a.replace(C,function(i,n){var h=n.length;return n.charAt(0)==="["&&n.charAt(h-1)==="]"&&(n=+n.slice(1,h-1)),F(r,v,n)})}},getRawValue:function(v,m){return F(this.getData(m),v)},formatTooltip:function(){}};X.exports=f},40856:function(X,z,e){var M=e(69003),F=M([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),R={getItemStyle:function(A,T){var D=F(this,A,T),b=this.getBorderLineDash();return b&&(D.lineDash=b),D},getBorderLineDash:function(){var A=this.get("borderType");return A==="solid"||A==null?null:A==="dashed"?[5,5]:[1,1]}};X.exports=R},82705:function(X,z,e){var M=e(69003),F=M([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),R={getLineStyle:function(A){var T=F(this,A);return T.lineDash=this.getLineDash(T.lineWidth),T},getLineDash:function(A){A==null&&(A=1);var T=this.get("type"),D=Math.max(A,2),b=A*4;return T==="solid"||T==null?!1:T==="dashed"?[b,b]:[D,D]}};X.exports=R},69003:function(X,z,e){var M=e(31879);function F(R){for(var A=0;A<R.length;A++)R[A][1]||(R[A][1]=R[A][0]);return function(T,D,b){for(var C={},f=0;f<R.length;f++){var v=R[f][1];if(!(D&&M.indexOf(D,v)>=0||b&&M.indexOf(b,v)<0)){var m=T.getShallow(v);m!=null&&(C[R[f][0]]=m)}}return C}}X.exports=F},80463:function(X,z,e){var M=e(72113),F=e(48070),R=["textStyle","color"],A={getTextColor:function(T){var D=this.ecModel;return this.getShallow("color")||(!T&&D?D.get(R):null)},getFont:function(){return F.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(T){return M.getBoundingRect(T,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}};X.exports=A},27499:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=R.createHashMap,T=R.retrieve,D=R.each;function b(m){this.coordSysName=m,this.coordSysDims=[],this.axisMap=A(),this.categoryAxisMap=A(),this.firstCategoryDimIndex=null}function C(m){var o=m.get("coordinateSystem"),u=new b(o),l=f[o];if(l)return l(m,u,u.axisMap,u.categoryAxisMap),u}var f={cartesian2d:function(m,o,u,l){var r=m.getReferringComponents("xAxis")[0],s=m.getReferringComponents("yAxis")[0];o.coordSysDims=["x","y"],u.set("x",r),u.set("y",s),v(r)&&(l.set("x",r),o.firstCategoryDimIndex=0),v(s)&&(l.set("y",s),o.firstCategoryDimIndex==null&(o.firstCategoryDimIndex=1))},singleAxis:function(m,o,u,l){var r=m.getReferringComponents("singleAxis")[0];o.coordSysDims=["single"],u.set("single",r),v(r)&&(l.set("single",r),o.firstCategoryDimIndex=0)},polar:function(m,o,u,l){var r=m.getReferringComponents("polar")[0],s=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");o.coordSysDims=["radius","angle"],u.set("radius",s),u.set("angle",c),v(s)&&(l.set("radius",s),o.firstCategoryDimIndex=0),v(c)&&(l.set("angle",c),o.firstCategoryDimIndex==null&&(o.firstCategoryDimIndex=1))},geo:function(m,o,u,l){o.coordSysDims=["lng","lat"]},parallel:function(m,o,u,l){var r=m.ecModel,s=r.getComponent("parallel",m.get("parallelIndex")),c=o.coordSysDims=s.dimensions.slice();D(s.parallelAxisIndex,function(x,a){var i=r.getComponent("parallelAxis",x),n=c[a];u.set(n,i),v(i)&&o.firstCategoryDimIndex==null&&(l.set(n,i),o.firstCategoryDimIndex=a)})}};function v(m){return m.get("type")==="category"}z.getCoordSysInfoBySeries=C},22637:function(X,z,e){var M=e(31879),F=M.each,R=M.isArray,A=M.isObject,T=e(99403),D=e(35454),b=D.normalizeToArray;function C(l,r){r=r.split(",");for(var s=l,c=0;c<r.length&&(s=s&&s[r[c]],s!=null);c++);return s}function f(l,r,s,c){r=r.split(",");for(var x=l,a,i=0;i<r.length-1;i++)a=r[i],x[a]==null&&(x[a]={}),x=x[a];(c||x[r[i]]==null)&&(x[r[i]]=s)}function v(l){F(m,function(r){r[0]in l&&!(r[1]in l)&&(l[r[1]]=l[r[0]])})}var m=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],o=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];function u(l,r){T(l,r),l.series=b(l.series),F(l.series,function(s){if(A(s)){var c=s.type;if(c==="line")s.clipOverflow!=null&&(s.clip=s.clipOverflow);else if(c==="pie"||c==="gauge")s.clockWise!=null&&(s.clockwise=s.clockWise);else if(c==="gauge"){var x=C(s,"pointer.color");x!=null&&f(s,"itemStyle.color",x)}v(s)}}),l.dataRange&&(l.visualMap=l.dataRange),F(o,function(s){var c=l[s];c&&(R(c)||(c=[c]),F(c,function(x){v(x)}))})}X.exports=u},99403:function(X,z,e){var M=e(31879),F=e(35454),R=M.each,A=M.isObject,T=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function D(r){var s=r&&r.itemStyle;if(s)for(var c=0,x=T.length;c<x;c++){var a=T[c],i=s.normal,n=s.emphasis;i&&i[a]&&(r[a]=r[a]||{},r[a].normal?M.merge(r[a].normal,i[a]):r[a].normal=i[a],i[a]=null),n&&n[a]&&(r[a]=r[a]||{},r[a].emphasis?M.merge(r[a].emphasis,n[a]):r[a].emphasis=n[a],n[a]=null)}}function b(r,s,c){if(r&&r[s]&&(r[s].normal||r[s].emphasis)){var x=r[s].normal,a=r[s].emphasis;x&&(c?(r[s].normal=r[s].emphasis=null,M.defaults(r[s],x)):r[s]=x),a&&(r.emphasis=r.emphasis||{},r.emphasis[s]=a)}}function C(r){b(r,"itemStyle"),b(r,"lineStyle"),b(r,"areaStyle"),b(r,"label"),b(r,"labelLine"),b(r,"upperLabel"),b(r,"edgeLabel")}function f(r,s){var c=A(r)&&r[s],x=A(c)&&c.textStyle;if(x)for(var a=0,i=F.TEXT_STYLE_OPTIONS.length;a<i;a++){var s=F.TEXT_STYLE_OPTIONS[a];x.hasOwnProperty(s)&&(c[s]=x[s])}}function v(r){r&&(C(r),f(r,"label"),r.emphasis&&f(r.emphasis,"label"))}function m(r){if(A(r)){D(r),C(r),f(r,"label"),f(r,"upperLabel"),f(r,"edgeLabel"),r.emphasis&&(f(r.emphasis,"label"),f(r.emphasis,"upperLabel"),f(r.emphasis,"edgeLabel"));var i=r.markPoint;i&&(D(i),v(i));var h=r.markLine;h&&(D(h),v(h));var s=r.markArea;s&&v(s);var c=r.data;if(r.type==="graph"){c=c||r.nodes;var x=r.links||r.edges;if(x&&!M.isTypedArray(x))for(var a=0;a<x.length;a++)v(x[a]);M.each(r.categories,function(d){C(d)})}if(c&&!M.isTypedArray(c))for(var a=0;a<c.length;a++)v(c[a]);var i=r.markPoint;if(i&&i.data)for(var n=i.data,a=0;a<n.length;a++)v(n[a]);var h=r.markLine;if(h&&h.data)for(var g=h.data,a=0;a<g.length;a++)M.isArray(g[a])?(v(g[a][0]),v(g[a][1])):v(g[a]);r.type==="gauge"?(f(r,"axisLabel"),f(r,"title"),f(r,"detail")):r.type==="treemap"?(b(r.breadcrumb,"itemStyle"),M.each(r.levels,function(d){C(d)})):r.type==="tree"&&C(r.leaves)}}function o(r){return M.isArray(r)?r:r?[r]:[]}function u(r){return(M.isArray(r)?r[0]:r)||{}}function l(r,s){R(o(r.series),function(x){A(x)&&m(x)});var c=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];s&&c.push("valueAxis","categoryAxis","logAxis","timeAxis"),R(c,function(x){R(o(r[x]),function(a){a&&(f(a,"axisLabel"),f(a.axisPointer,"label"))})}),R(o(r.parallel),function(x){var a=x&&x.parallelAxisDefault;f(a,"axisLabel"),f(a&&a.axisPointer,"label")}),R(o(r.calendar),function(x){b(x,"itemStyle"),f(x,"dayLabel"),f(x,"monthLabel"),f(x,"yearLabel")}),R(o(r.radar),function(x){f(x,"name")}),R(o(r.geo),function(x){A(x)&&(v(x),R(o(x.regions),function(a){v(a)}))}),R(o(r.timeline),function(x){v(x),b(x,"label"),b(x,"itemStyle"),b(x,"controlStyle",!0);var a=x.data;M.isArray(a)&&M.each(a,function(i){M.isObject(i)&&(b(i,"label"),b(i,"itemStyle"))})}),R(o(r.toolbox),function(x){b(x,"iconStyle"),R(x.feature,function(a){b(a,"iconStyle")})}),f(u(r.axisPointer),"label"),f(u(r.tooltip).axisPointer,"label")}X.exports=l},61614:function(X){function z(e){return{seriesType:e,reset:function(M,F){var R=F.findComponents({mainType:"legend"});if(!(!R||!R.length)){var A=M.getData();A.filterSelf(function(T){for(var D=A.getName(T),b=0;b<R.length;b++)if(!R[b].isSelected(D))return!1;return!0})}}}}X.exports=z},33064:function(X){var z={average:function(F){for(var R=0,A=0,T=0;T<F.length;T++)isNaN(F[T])||(R+=F[T],A++);return A===0?NaN:R/A},sum:function(F){for(var R=0,A=0;A<F.length;A++)R+=F[A]||0;return R},max:function(F){for(var R=-1/0,A=0;A<F.length;A++)F[A]>R&&(R=F[A]);return isFinite(R)?R:NaN},min:function(F){for(var R=1/0,A=0;A<F.length;A++)F[A]<R&&(R=F[A]);return isFinite(R)?R:NaN},nearest:function(F){return F[0]}},e=function(F,R){return Math.round(F.length/2)};function M(F){return{seriesType:F,modifyOutputEnd:!0,reset:function(R,A,T){var D=R.getData(),b=R.get("sampling"),C=R.coordinateSystem;if(C.type==="cartesian2d"&&b){var f=C.getBaseAxis(),v=C.getOtherAxis(f),m=f.getExtent(),o=Math.abs(m[1]-m[0]),u=Math.round(D.count()/o);if(u>1){var l;typeof b=="string"?l=z[b]:typeof b=="function"&&(l=b),l&&R.setData(D.downSample(D.mapDimension(v.dim),1/u,l,e))}}}}}X.exports=M},15933:function(X,z,e){var M=e(31879),F=M.createHashMap,R=M.each;function A(D){var b=F();D.eachSeries(function(C){var f=C.get("stack");if(f){var v=b.get(f)||b.set(f,[]),m=C.getData(),o={stackResultDimension:m.getCalculationInfo("stackResultDimension"),stackedOverDimension:m.getCalculationInfo("stackedOverDimension"),stackedDimension:m.getCalculationInfo("stackedDimension"),stackedByDimension:m.getCalculationInfo("stackedByDimension"),isStackedByIndex:m.getCalculationInfo("isStackedByIndex"),data:m,seriesModel:C};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;v.length&&m.setCalculationInfo("stackedOnSeries",v[v.length-1].seriesModel),v.push(o)}}),b.each(T)}function T(D){R(D,function(b,C){var f=[],v=[NaN,NaN],m=[b.stackResultDimension,b.stackedOverDimension],o=b.data,u=b.isStackedByIndex,l=o.map(m,function(r,s,c){var x=o.get(b.stackedDimension,c);if(isNaN(x))return v;var a,i;u?i=o.getRawIndex(c):a=o.get(b.stackedByDimension,c);for(var n=NaN,h=C-1;h>=0;h--){var g=D[h];if(u||(i=g.data.rawIndexOf(g.stackedByDimension,a)),i>=0){var d=g.data.getByRawIndex(g.stackResultDimension,i);if(x>=0&&d>0||x<=0&&d<0){x+=d,n=d;break}}}return f[0]=x,f[1]=n,f});o.hostModel.setData(l),b.data=l})}X.exports=A},15443:function(X,z,e){var M=e(48354),F=e(17795),R=e(41977),A=e(41576),T=M.round,D=R.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(C,f){var v=this._extent;isNaN(C)||(v[0]=parseFloat(C)),isNaN(f)||(v[1]=parseFloat(f))},unionExtent:function(C){var f=this._extent;C[0]<f[0]&&(f[0]=C[0]),C[1]>f[1]&&(f[1]=C[1]),D.prototype.setExtent.call(this,f[0],f[1])},getInterval:function(){return this._interval},setInterval:function(C){this._interval=C,this._niceExtent=this._extent.slice(),this._intervalPrecision=A.getIntervalPrecision(C)},getTicks:function(C){var f=this._interval,v=this._extent,m=this._niceExtent,o=this._intervalPrecision,u=[];if(!f)return u;var l=1e4;v[0]<m[0]&&(C?u.push(T(m[0]-f,o)):u.push(v[0]));for(var r=m[0];r<=m[1]&&(u.push(r),r=T(r+f,o),r!==u[u.length-1]);)if(u.length>l)return[];var s=u.length?u[u.length-1]:m[1];return v[1]>s&&(C?u.push(T(s+f,o)):u.push(v[1])),u},getMinorTicks:function(C){for(var f=this.getTicks(!0),v=[],m=this.getExtent(),o=1;o<f.length;o++){for(var u=f[o],l=f[o-1],r=0,s=[],c=u-l,x=c/C;r<C-1;){var a=M.round(l+(r+1)*x);a>m[0]&&a<m[1]&&s.push(a),r++}v.push(s)}return v},getLabel:function(C,f){if(C==null)return"";var v=f&&f.precision;return v==null?v=M.getPrecisionSafe(C)||0:v==="auto"&&(v=this._intervalPrecision),C=T(C,v,!0),F.addCommas(C)},niceTicks:function(C,f,v){C=C||5;var m=this._extent,o=m[1]-m[0];if(isFinite(o)){o<0&&(o=-o,m.reverse());var u=A.intervalScaleNiceTicks(m,C,f,v);this._intervalPrecision=u.intervalPrecision,this._interval=u.interval,this._niceExtent=u.niceTickExtent}},niceExtent:function(C){var f=this._extent;if(f[0]===f[1])if(f[0]!==0){var v=f[0];C.fixMax||(f[1]+=v/2),f[0]-=v/2}else f[1]=1;var m=f[1]-f[0];isFinite(m)||(f[0]=0,f[1]=1),this.niceTicks(C.splitNumber,C.minInterval,C.maxInterval);var o=this._interval;C.fixMin||(f[0]=T(Math.floor(f[0]/o)*o)),C.fixMax||(f[1]=T(Math.ceil(f[1]/o)*o))}});D.create=function(){return new D};var b=D;X.exports=b},13536:function(X,z,e){var M=e(31879),F=e(41977),R=e(48354),A=e(15443),T=F.prototype,D=A.prototype,b=R.getPrecisionSafe,C=R.round,f=Math.floor,v=Math.ceil,m=Math.pow,o=Math.log,u=F.extend({type:"log",base:10,$constructor:function(){F.apply(this,arguments),this._originalScale=new A},getTicks:function(s){var c=this._originalScale,x=this._extent,a=c.getExtent();return M.map(D.getTicks.call(this,s),function(i){var n=R.round(m(this.base,i));return n=i===x[0]&&c.__fixMin?l(n,a[0]):n,n=i===x[1]&&c.__fixMax?l(n,a[1]):n,n},this)},getMinorTicks:D.getMinorTicks,getLabel:D.getLabel,scale:function(s){return s=T.scale.call(this,s),m(this.base,s)},setExtent:function(s,c){var x=this.base;s=o(s)/o(x),c=o(c)/o(x),D.setExtent.call(this,s,c)},getExtent:function(){var s=this.base,c=T.getExtent.call(this);c[0]=m(s,c[0]),c[1]=m(s,c[1]);var x=this._originalScale,a=x.getExtent();return x.__fixMin&&(c[0]=l(c[0],a[0])),x.__fixMax&&(c[1]=l(c[1],a[1])),c},unionExtent:function(s){this._originalScale.unionExtent(s);var c=this.base;s[0]=o(s[0])/o(c),s[1]=o(s[1])/o(c),T.unionExtent.call(this,s)},unionExtentFromData:function(s,c){this.unionExtent(s.getApproximateExtent(c))},niceTicks:function(s){s=s||10;var c=this._extent,x=c[1]-c[0];if(!(x===1/0||x<=0)){var a=R.quantity(x),i=s/x*a;for(i<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var n=[R.round(v(c[0]/a)*a),R.round(f(c[1]/a)*a)];this._interval=a,this._niceExtent=n}},niceExtent:function(s){D.niceExtent.call(this,s);var c=this._originalScale;c.__fixMin=s.fixMin,c.__fixMax=s.fixMax}});M.each(["contain","normalize"],function(s){u.prototype[s]=function(c){return c=o(c)/o(this.base),T[s].call(this,c)}}),u.create=function(){return new u};function l(s,c){return C(s,b(c))}var r=u;X.exports=r},92969:function(X,z,e){var M=e(31879),F=e(41977),R=e(84116),A=F.prototype,T=F.extend({type:"ordinal",init:function(b,C){(!b||M.isArray(b))&&(b=new R({categories:b})),this._ordinalMeta=b,this._extent=C||[0,b.categories.length-1]},parse:function(b){return typeof b=="string"?this._ordinalMeta.getOrdinal(b):Math.round(b)},contain:function(b){return b=this.parse(b),A.contain.call(this,b)&&this._ordinalMeta.categories[b]!=null},normalize:function(b){return A.normalize.call(this,this.parse(b))},scale:function(b){return Math.round(A.scale.call(this,b))},getTicks:function(){for(var b=[],C=this._extent,f=C[0];f<=C[1];)b.push(f),f++;return b},getLabel:function(b){if(!this.isBlank())return this._ordinalMeta.categories[b]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(b,C){this.unionExtent(b.getApproximateExtent(C))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:M.noop,niceExtent:M.noop});T.create=function(){return new T};var D=T;X.exports=D},41977:function(X,z,e){var M=e(28108);function F(A){this._setting=A||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}F.prototype.parse=function(A){return A},F.prototype.getSetting=function(A){return this._setting[A]},F.prototype.contain=function(A){var T=this._extent;return A>=T[0]&&A<=T[1]},F.prototype.normalize=function(A){var T=this._extent;return T[1]===T[0]?.5:(A-T[0])/(T[1]-T[0])},F.prototype.scale=function(A){var T=this._extent;return A*(T[1]-T[0])+T[0]},F.prototype.unionExtent=function(A){var T=this._extent;A[0]<T[0]&&(T[0]=A[0]),A[1]>T[1]&&(T[1]=A[1])},F.prototype.unionExtentFromData=function(A,T){this.unionExtent(A.getApproximateExtent(T))},F.prototype.getExtent=function(){return this._extent.slice()},F.prototype.setExtent=function(A,T){var D=this._extent;isNaN(A)||(D[0]=A),isNaN(T)||(D[1]=T)},F.prototype.isBlank=function(){return this._isBlank},F.prototype.setBlank=function(A){this._isBlank=A},F.prototype.getLabel=null,M.enableClassExtend(F),M.enableClassManagement(F,{registerWhenExtend:!0});var R=F;X.exports=R},73111:function(X,z,e){var M=e(31879),F=e(48354),R=e(17795),A=e(41576),T=e(15443),D=T.prototype,b=Math.ceil,C=Math.floor,f=1e3,v=f*60,m=v*60,o=m*24,u=function(c,x,a,i){for(;a<i;){var n=a+i>>>1;c[n][1]<x?a=n+1:i=n}return a},l=T.extend({type:"time",getLabel:function(c){var x=this._stepLvl,a=new Date(c);return R.formatTime(x[0],a,this.getSetting("useUTC"))},niceExtent:function(c){var x=this._extent;if(x[0]===x[1]&&(x[0]-=o,x[1]+=o),x[1]===-1/0&&x[0]===1/0){var a=new Date;x[1]=+new Date(a.getFullYear(),a.getMonth(),a.getDate()),x[0]=x[1]-o}this.niceTicks(c.splitNumber,c.minInterval,c.maxInterval);var i=this._interval;c.fixMin||(x[0]=F.round(C(x[0]/i)*i)),c.fixMax||(x[1]=F.round(b(x[1]/i)*i))},niceTicks:function(c,x,a){c=c||10;var i=this._extent,n=i[1]-i[0],h=n/c;x!=null&&h<x&&(h=x),a!=null&&h>a&&(h=a);var g=r.length,d=u(r,h,0,g),y=r[Math.min(d,g-1)],p=y[1];if(y[0]==="year"){var w=n/p,S=F.nice(w/c,!0);p*=S}var O=this.getSetting("useUTC")?0:new Date(+i[0]||+i[1]).getTimezoneOffset()*60*1e3,B=[Math.round(b((i[0]-O)/p)*p+O),Math.round(C((i[1]-O)/p)*p+O)];A.fixExtent(B,i),this._stepLvl=y,this._interval=p,this._niceExtent=B},parse:function(c){return+F.parseDate(c)}});M.each(["contain","normalize"],function(c){l.prototype[c]=function(x){return D[c].call(this,this.parse(x))}});var r=[["hh:mm:ss",f],["hh:mm:ss",f*5],["hh:mm:ss",f*10],["hh:mm:ss",f*15],["hh:mm:ss",f*30],[`hh:mm
MM-dd`,v],[`hh:mm
MM-dd`,v*5],[`hh:mm
MM-dd`,v*10],[`hh:mm
MM-dd`,v*15],[`hh:mm
MM-dd`,v*30],[`hh:mm
MM-dd`,m],[`hh:mm
MM-dd`,m*2],[`hh:mm
MM-dd`,m*6],[`hh:mm
MM-dd`,m*12],[`MM-dd
yyyy`,o],[`MM-dd
yyyy`,o*2],[`MM-dd
yyyy`,o*3],[`MM-dd
yyyy`,o*4],[`MM-dd
yyyy`,o*5],[`MM-dd
yyyy`,o*6],["week",o*7],[`MM-dd
yyyy`,o*10],["week",o*14],["week",o*21],["month",o*31],["week",o*42],["month",o*62],["week",o*70],["quarter",o*95],["month",o*31*4],["month",o*31*5],["half-year",o*380/2],["month",o*31*8],["month",o*31*10],["year",o*380]];l.create=function(c){return new l({useUTC:c.ecModel.get("useUTC")})};var s=l;X.exports=s},41576:function(X,z,e){var M=e(48354),F=M.round;function R(b,C,f,v){var m={},o=b[1]-b[0],u=m.interval=M.nice(o/C,!0);f!=null&&u<f&&(u=m.interval=f),v!=null&&u>v&&(u=m.interval=v);var l=m.intervalPrecision=A(u),r=m.niceTickExtent=[F(Math.ceil(b[0]/u)*u,l),F(Math.floor(b[1]/u)*u,l)];return D(r,b),m}function A(b){return M.getPrecisionSafe(b)+2}function T(b,C,f){b[C]=Math.max(Math.min(b[C],f[1]),f[0])}function D(b,C){!isFinite(b[0])&&(b[0]=C[0]),!isFinite(b[1])&&(b[1]=C[1]),T(b,0,C),T(b,1,C),b[0]>b[1]&&(b[0]=b[1])}z.intervalScaleNiceTicks=R,z.getIntervalPrecision=A,z.fixExtent=D},64014:function(X,z,e){var M=e(31879),F=M.each,R=M.map,A=M.isFunction,T=M.createHashMap,D=M.noop,b=e(5604),C=b.createTask,f=e(50777),v=f.getUID,m=e(64527),o=e(3868),u=e(35454),l=u.normalizeToArray;function r(G,W,H,V){this.ecInstance=G,this.api=W,this.unfinished;var H=this._dataProcessorHandlers=H.slice(),V=this._visualHandlers=V.slice();this._allHandlers=H.concat(V),this._stageTaskMap=T()}var s=r.prototype;s.restoreData=function(G,W){G.restoreData(W),this._stageTaskMap.each(function(Z){var U=Z.overallTask;U&&U.dirty()})},s.getPerformArgs=function(G,W){if(G.__pipeline){var Z=this._pipelineMap.get(G.__pipeline.id),U=Z.context,H=!W&&Z.progressiveEnabled&&(!U||U.progressiveRender)&&G.__idxInPipeline>Z.blockIndex,V=H?Z.step:null,Y=U&&U.modDataCount,$=Y!=null?Math.ceil(Y/V):null;return{step:V,modBy:$,modDataCount:Y}}},s.getPipeline=function(G){return this._pipelineMap.get(G)},s.updateStreamModes=function(G,W){var Z=this._pipelineMap.get(G.uid),U=G.getData(),H=U.count(),V=Z.progressiveEnabled&&W.incrementalPrepareRender&&H>=Z.threshold,Y=G.get("large")&&H>=G.get("largeThreshold"),$=G.get("progressiveChunkMode")==="mod"?H:null;G.pipelineContext=Z.context={progressiveRender:V,modDataCount:$,large:Y}},s.restorePipelines=function(G){var W=this,Z=W._pipelineMap=T();G.eachSeries(function(U){var H=U.getProgressive(),V=U.uid;Z.set(V,{id:V,head:null,tail:null,threshold:U.getProgressiveThreshold(),progressiveEnabled:H&&!(U.preventIncremental&&U.preventIncremental()),blockIndex:-1,step:Math.round(H||700),count:0}),B(W,U,U.dataTask)})},s.prepareStageTasks=function(){var G=this._stageTaskMap,W=this.ecInstance.getModel(),Z=this.api;F(this._allHandlers,function(U){var H=G.get(U.uid)||G.set(U.uid,[]);U.reset&&a(this,U,H,W,Z),U.overallReset&&i(this,U,H,W,Z)},this)},s.prepareView=function(G,W,Z,U){var H=G.renderTask,V=H.context;V.model=W,V.ecModel=Z,V.api=U,H.__block=!G.incrementalPrepareRender,B(this,W,H)},s.performDataProcessorTasks=function(G,W){c(this,this._dataProcessorHandlers,G,W,{block:!0})},s.performVisualTasks=function(G,W,Z){c(this,this._visualHandlers,G,W,Z)};function c(G,W,Z,U,H){H=H||{};var V;F(W,function($,K){if(!(H.visualType&&H.visualType!==$.visualType)){var J=G._stageTaskMap.get($.uid),Q=J.seriesTaskMap,et=J.overallTask;if(et){var nt,st=et.agentStubMap;st.each(function(rt){Y(H,rt)&&(rt.dirty(),nt=!0)}),nt&&et.dirty(),x(et,U);var ut=G.getPerformArgs(et,H.block);st.each(function(rt){rt.perform(ut)}),V|=et.perform(ut)}else Q&&Q.each(function(rt,ht){Y(H,rt)&&rt.dirty();var Pt=G.getPerformArgs(rt,H.block);Pt.skip=!$.performRawSeries&&Z.isSeriesFiltered(rt.context.model),x(rt,U),V|=rt.perform(Pt)})}});function Y($,K){return $.setDirty&&(!$.dirtyMap||$.dirtyMap.get(K.__pipeline.id))}G.unfinished|=V}s.performSeriesTasks=function(G){var W;G.eachSeries(function(Z){W|=Z.dataTask.perform()}),this.unfinished|=W},s.plan=function(){this._pipelineMap.each(function(G){var W=G.tail;do{if(W.__block){G.blockIndex=W.__idxInPipeline;break}W=W.getUpstream()}while(W)})};var x=s.updatePayload=function(G,W){W!=="remain"&&(G.context.payload=W)};function a(G,W,Z,U,H){var V=Z.seriesTaskMap||(Z.seriesTaskMap=T()),Y=W.seriesType,$=W.getTargetSeries;W.createOnAllSeries?U.eachRawSeries(K):Y?U.eachRawSeriesByType(Y,K):$&&$(U,H).each(K);function K(Q){var et=Q.uid,nt=V.get(et)||V.set(et,C({plan:y,reset:p,count:O}));nt.context={model:Q,ecModel:U,api:H,useClearVisual:W.isVisual&&!W.isLayout,plan:W.plan,reset:W.reset,scheduler:G},B(G,Q,nt)}var J=G._pipelineMap;V.each(function(Q,et){J.get(et)||(Q.dispose(),V.removeKey(et))})}function i(G,W,Z,U,H){var V=Z.overallTask=Z.overallTask||C({reset:n});V.context={ecModel:U,api:H,overallReset:W.overallReset,scheduler:G};var Y=V.agentStubMap=V.agentStubMap||T(),$=W.seriesType,K=W.getTargetSeries,J=!0,Q=W.modifyOutputEnd;$?U.eachRawSeriesByType($,et):K?K(U,H).each(et):(J=!1,F(U.getSeries(),et));function et(st){var ut=st.uid,rt=Y.get(ut);rt||(rt=Y.set(ut,C({reset:h,onDirty:d})),V.dirty()),rt.context={model:st,overallProgress:J,modifyOutputEnd:Q},rt.agent=V,rt.__block=J,B(G,st,rt)}var nt=G._pipelineMap;Y.each(function(st,ut){nt.get(ut)||(st.dispose(),V.dirty(),Y.removeKey(ut))})}function n(G){G.overallReset(G.ecModel,G.api,G.payload)}function h(G,W){return G.overallProgress&&g}function g(){this.agent.dirty(),this.getDownstream().dirty()}function d(){this.agent&&this.agent.dirty()}function y(G){return G.plan&&G.plan(G.model,G.ecModel,G.api,G.payload)}function p(G){G.useClearVisual&&G.data.clearAllVisual();var W=G.resetDefines=l(G.reset(G.model,G.ecModel,G.api,G.payload));return W.length>1?R(W,function(Z,U){return S(U)}):w}var w=S(0);function S(G){return function(W,Z){var U=Z.data,H=Z.resetDefines[G];if(H&&H.dataEach)for(var V=W.start;V<W.end;V++)H.dataEach(U,V);else H&&H.progress&&H.progress(W,U)}}function O(G){return G.data.count()}function B(G,W,Z){var U=W.uid,H=G._pipelineMap.get(U);!H.head&&(H.head=Z),H.tail&&H.tail.pipe(Z),H.tail=Z,Z.__idxInPipeline=H.count++,Z.__pipeline=H}r.wrapStageHandler=function(G,W){return A(G)&&(G={overallReset:G,seriesType:k(G)}),G.uid=v("stageHandler"),W&&(G.visualType=W),G};function k(G){E=null;try{G(P,L)}catch{}return E}var P={},L={},E;N(P,m),N(L,o),P.eachSeriesByType=P.eachRawSeriesByType=function(G){E=G},P.eachComponent=function(G){G.mainType==="series"&&G.subType&&(E=G.subType)};function N(G,W){for(var Z in W.prototype)G[Z]=D}var I=r;X.exports=I},5604:function(X,z,e){var M=e(31879),F=M.assert,R=M.isArray,A=e(50617),T=A.__DEV__;function D(o){return new b(o)}function b(o){o=o||{},this._reset=o.reset,this._plan=o.plan,this._count=o.count,this._onDirty=o.onDirty,this._dirty=!0,this.context}var C=b.prototype;C.perform=function(o){var u=this._upstream,l=o&&o.skip;if(this._dirty&&u){var r=this.context;r.data=r.outputData=u.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!l&&(s=this._plan(this.context));var c=n(this._modBy),x=this._modDataCount||0,a=n(o&&o.modBy),i=o&&o.modDataCount||0;(c!==a||x!==i)&&(s="reset");function n(O){return!(O>=1)&&(O=1),O}var h;(this._dirty||s==="reset")&&(this._dirty=!1,h=m(this,l)),this._modBy=a,this._modDataCount=i;var g=o&&o.step;if(u?this._dueEnd=u._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,y=Math.min(g!=null?this._dueIndex+g:1/0,this._dueEnd);if(!l&&(h||d<y)){var p=this._progress;if(R(p))for(var w=0;w<p.length;w++)v(this,p[w],d,y,a,i);else v(this,p,d,y,a,i)}this._dueIndex=y;var S=this._settedOutputEnd!=null?this._settedOutputEnd:y;this._outputDueEnd=S}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var f=function(){var o,u,l,r,s,c={reset:function(i,n,h,g){u=i,o=n,l=h,r=g,s=Math.ceil(r/l),c.next=l>1&&r>0?a:x}};return c;function x(){return u<o?u++:null}function a(){var i=u%s*l+Math.ceil(u/s),n=u>=o?null:i<r?i:u;return u++,n}}();C.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)};function v(o,u,l,r,s,c){f.reset(l,r,s,c),o._callingProgress=u,o._callingProgress({start:l,end:r,count:r-l,next:f.next},o.context)}function m(o,u){o._dueIndex=o._outputDueEnd=o._dueEnd=0,o._settedOutputEnd=null;var l,r;!u&&o._reset&&(l=o._reset(o.context),l&&l.progress&&(r=l.forceFirstProgress,l=l.progress),R(l)&&!l.length&&(l=null)),o._progress=l,o._modBy=o._modDataCount=null;var s=o._downstream;return s&&s.dirty(),r}C.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},C.pipe=function(o){(this._downstream!==o||this._dirty)&&(this._downstream=o,o._upstream=this,o.dirty())},C.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},C.getUpstream=function(){return this._upstream},C.getDownstream=function(){return this._downstream},C.setOutputEnd=function(o){this._outputDueEnd=this._settedOutputEnd=o},z.createTask=D},77383:function(X){var z="#eee",e=function(){return{axisLine:{lineStyle:{color:z}},axisTick:{lineStyle:{color:z}},axisLabel:{textStyle:{color:z}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:z}}}},M=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],F={color:M,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:z},crossStyle:{color:z},label:{color:"#000"}}},legend:{textStyle:{color:z}},textStyle:{color:z},title:{textStyle:{color:z}},toolbox:{iconStyle:{normal:{borderColor:z}}},dataZoom:{textStyle:{color:z}},visualMap:{textStyle:{color:z}},timeline:{lineStyle:{color:z},itemStyle:{normal:{color:M[1]}},label:{normal:{textStyle:{color:z}}},controlStyle:{normal:{color:z,borderColor:z}}},timeAxis:e(),logAxis:e(),valueAxis:e(),categoryAxis:e(),line:{symbol:"circle"},graph:{color:M},gauge:{title:{textStyle:{color:z}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};F.categoryAxis.splitLine.show=!1;var R=F;X.exports=R},99465:function(X){var z=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],e={color:z,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],z]};X.exports=e},57847:function(X,z,e){var M=e(31879);function F(){var R=[],A={},T;return{add:function(D,b,C,f,v){return M.isString(f)&&(v=f,f=0),A[D.id]?!1:(A[D.id]=1,R.push({el:D,target:b,time:C,delay:f,easing:v}),!0)},done:function(D){return T=D,this},start:function(){for(var D=R.length,b=0,C=R.length;b<C;b++){var f=R[b];f.el.animateTo(f.target,f.time,f.delay,f.easing,v)}return this;function v(){D--,D||(R.length=0,A={},T&&T())}}}}z.createWrap=F},28108:function(X,z,e){var M=e(50617),F=M.__DEV__,R=e(31879),A=".",T="___EC__COMPONENT__CONTAINER___";function D(r){var s={main:"",sub:""};return r&&(r=r.split(A),s.main=r[0]||"",s.sub=r[1]||""),s}function b(r){R.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal')}function C(r,s){r.$constructor=r,r.extend=function(c){var x=this,a=function(){c.$constructor?c.$constructor.apply(this,arguments):x.apply(this,arguments)};return R.extend(a.prototype,c),a.extend=this.extend,a.superCall=m,a.superApply=o,R.inherits(a,this),a.superClass=x,a}}var f=0;function v(r){var s=["__\0is_clz",f++,Math.random().toFixed(3)].join("_");r.prototype[s]=!0,r.isInstance=function(c){return!!(c&&c[s])}}function m(r,s){var c=R.slice(arguments,2);return this.superClass.prototype[s].apply(r,c)}function o(r,s,c){return this.superClass.prototype[s].apply(r,c)}function u(r,s){s=s||{};var c={};r.registerClass=function(i,n){if(n){if(b(n),n=D(n),!n.sub)c[n.main]=i;else if(n.sub!==T){var h=x(n);h[n.sub]=i}}return i},r.getClass=function(i,n,h){var g=c[i];if(g&&g[T]&&(g=n?g[n]:null),h&&!g)throw new Error(n?"Component "+i+"."+(n||"")+" not exists. Load it first.":i+".type should be specified.");return g},r.getClassesByMainType=function(i){i=D(i);var n=[],h=c[i.main];return h&&h[T]?R.each(h,function(g,d){d!==T&&n.push(g)}):n.push(h),n},r.hasClass=function(i){return i=D(i),!!c[i.main]},r.getAllClassMainTypes=function(){var i=[];return R.each(c,function(n,h){i.push(h)}),i},r.hasSubTypes=function(i){i=D(i);var n=c[i.main];return n&&n[T]},r.parseClassType=D;function x(i){var n=c[i.main];return(!n||!n[T])&&(n=c[i.main]={},n[T]=!0),n}if(s.registerWhenExtend){var a=r.extend;a&&(r.extend=function(i){var n=a.call(this,i);return r.registerClass(n,i.type)})}return r}function l(r,s){}z.parseClassType=D,z.enableClassExtend=C,z.enableClassCheck=v,z.enableClassManagement=u,z.setReadOnly=l},50777:function(X,z,e){var M=e(31879),F=e(28108),R=F.parseClassType,A=0;function T(C){return[C||"",A++,Math.random().toFixed(5)].join("_")}function D(C){var f={};return C.registerSubTypeDefaulter=function(v,m){v=R(v),f[v.main]=m},C.determineSubType=function(v,m){var o=m.type;if(!o){var u=R(v).main;C.hasSubTypes(v)&&f[u]&&(o=f[u](m))}return o},C}function b(C,f){C.topologicalTravel=function(u,l,r,s){if(!u.length)return;var c=v(l),x=c.graph,a=c.noEntryList,i={};for(M.each(u,function(p){i[p]=!0});a.length;){var n=a.pop(),h=x[n],g=!!i[n];g&&(r.call(s,n,h.originalDeps.slice()),delete i[n]),M.each(h.successor,g?y:d)}M.each(i,function(){throw new Error("Circle dependency may exists")});function d(p){x[p].entryCount--,x[p].entryCount===0&&a.push(p)}function y(p){i[p]=!0,d(p)}};function v(u){var l={},r=[];return M.each(u,function(s){var c=m(l,s),x=c.originalDeps=f(s),a=o(x,u);c.entryCount=a.length,c.entryCount===0&&r.push(s),M.each(a,function(i){M.indexOf(c.predecessor,i)<0&&c.predecessor.push(i);var n=m(l,i);M.indexOf(n.successor,i)<0&&n.successor.push(s)})}),{graph:l,noEntryList:r}}function m(u,l){return u[l]||(u[l]={predecessor:[],successor:[]}),u[l]}function o(u,l){var r=[];return M.each(u,function(s){M.indexOf(l,s)>=0&&r.push(s)}),r}}z.getUID=T,z.enableSubTypeDefaulter=D,z.enableTopologicalTravel=b},17795:function(X,z,e){var M=e(31879),F=e(72113),R=e(48354);function A(h){return isNaN(h)?"-":(h=(h+"").split("."),h[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(h.length>1?"."+h[1]:""))}function T(h,g){return h=(h||"").toLowerCase().replace(/-(.)/g,function(d,y){return y.toUpperCase()}),g&&h&&(h=h.charAt(0).toUpperCase()+h.slice(1)),h}var D=M.normalizeCssArray,b=/([&<>"'])/g,C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function f(h){return h==null?"":(h+"").replace(b,function(g,d){return C[d]})}var v=["a","b","c","d","e","f","g"],m=function(h,g){return"{"+h+(g??"")+"}"};function o(h,g,d){M.isArray(g)||(g=[g]);var y=g.length;if(!y)return"";for(var p=g[0].$vars||[],w=0;w<p.length;w++){var S=v[w];h=h.replace(m(S),m(S,0))}for(var O=0;O<y;O++)for(var B=0;B<p.length;B++){var k=g[O][p[B]];h=h.replace(m(v[B],O),d?f(k):k)}return h}function u(h,g,d){return M.each(g,function(y,p){h=h.replace("{"+p+"}",d?f(y):y)}),h}function l(h,p){h=M.isString(h)?{color:h,extraCssText:p}:h||{};var d=h.color,y=h.type,p=h.extraCssText,w=h.renderMode||"html",S=h.markerId||"X";return d?w==="html"?y==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+f(d)+";"+(p||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+f(d)+";"+(p||"")+'"></span>':{renderMode:w,content:"{marker"+S+"|}  ",style:{color:d}}:""}function r(h,g){return h+="","0000".substr(0,g-h.length)+h}function s(h,g,d){(h==="week"||h==="month"||h==="quarter"||h==="half-year"||h==="year")&&(h=`MM-dd
yyyy`);var y=R.parseDate(g),p=d?"UTC":"",w=y["get"+p+"FullYear"](),S=y["get"+p+"Month"]()+1,O=y["get"+p+"Date"](),B=y["get"+p+"Hours"](),k=y["get"+p+"Minutes"](),P=y["get"+p+"Seconds"](),L=y["get"+p+"Milliseconds"]();return h=h.replace("MM",r(S,2)).replace("M",S).replace("yyyy",w).replace("yy",w%100).replace("dd",r(O,2)).replace("d",O).replace("hh",r(B,2)).replace("h",B).replace("mm",r(k,2)).replace("m",k).replace("ss",r(P,2)).replace("s",P).replace("SSS",r(L,3)),h}function c(h){return h&&h.charAt(0).toUpperCase()+h.substr(1)}var x=F.truncateText;function a(h){return F.getBoundingRect(h.text,h.font,h.textAlign,h.textVerticalAlign,h.textPadding,h.textLineHeight,h.rich,h.truncate)}function i(h,g,d,y,p,w,S,O){return F.getBoundingRect(h,g,d,y,p,O,w,S)}function n(h,g){if(g==="_blank"||g==="blank"){var d=window.open();d.opener=null,d.location=h}else window.open(h,g)}z.addCommas=A,z.toCamelCase=T,z.normalizeCssArray=D,z.encodeHTML=f,z.formatTpl=o,z.formatTplSimple=u,z.getTooltipMarker=l,z.formatTime=s,z.capitalFirst=c,z.truncateText=x,z.getTextBoundingRect=a,z.getTextRect=i,z.windowOpen=n},48070:function(X,z,e){var M=e(31879),F=e(23036),R=e(94819),A=e(43970),T=e(12072),D=e(54904),b=e(51218),C=e(11096);z.Image=C;var f=e(27146);z.Group=f;var v=e(35727);z.Text=v;var m=e(70654);z.Circle=m;var o=e(99315);z.Sector=o;var u=e(19574);z.Ring=u;var l=e(55370);z.Polygon=l;var r=e(62190);z.Polyline=r;var s=e(68518);z.Rect=s;var c=e(13484);z.Line=c;var x=e(31592);z.BezierCurve=x;var a=e(3775);z.Arc=a;var i=e(38096);z.CompoundPath=i;var n=e(8691);z.LinearGradient=n;var h=e(7539);z.RadialGradient=h;var g=e(95946);z.BoundingRect=g;var d=e(72440);z.IncrementalDisplayable=d;var y=e(19602),p=Math.max,w=Math.min,S={},O=1,B={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},k="emphasis",P="normal",L=1,E={},N={};function I(It){return D.extend(It)}function G(It,Wt){return F.extendFromString(It,Wt)}function W(It,Wt){N[It]=Wt}function Z(It){if(N.hasOwnProperty(It))return N[It]}function U(It,Wt,_t,ee){var re=F.createFromString(It,Wt);return _t&&(ee==="center"&&(_t=V(_t,re.getBoundingRect())),$(re,_t)),re}function H(It,Wt,_t){var ee=new C({style:{image:It,x:Wt.x,y:Wt.y,width:Wt.width,height:Wt.height},onload:function(re){if(_t==="center"){var de={width:re.width,height:re.height};ee.setStyle(V(Wt,de))}}});return ee}function V(It,Wt){var _t=Wt.width/Wt.height,ee=It.height*_t,re;ee<=It.width?re=It.height:(ee=It.width,re=ee/_t);var de=It.x+It.width/2,Se=It.y+It.height/2;return{x:de-ee/2,y:Se-re/2,width:ee,height:re}}var Y=F.mergePath;function $(It,Wt){if(It.applyTransform){var _t=It.getBoundingRect(),ee=_t.calculateTransform(Wt);It.applyTransform(ee)}}function K(It){return y.subPixelOptimizeLine(It.shape,It.shape,It.style),It}function J(It){return y.subPixelOptimizeRect(It.shape,It.shape,It.style),It}var Q=y.subPixelOptimize;function et(It){return It!=null&&It!=="none"}var nt=M.createHashMap(),st=0;function ut(It){if(typeof It!="string")return It;var Wt=nt.get(It);return Wt||(Wt=R.lift(It,-.1),st<1e4&&(nt.set(It,Wt),st++)),Wt}function rt(It){if(It.__hoverStlDirty){It.__hoverStlDirty=!1;var Wt=It.__hoverStl;if(!Wt){It.__cachedNormalStl=It.__cachedNormalZ2=null;return}var _t=It.__cachedNormalStl={};It.__cachedNormalZ2=It.z2;var ee=It.style;for(var re in Wt)Wt[re]!=null&&(_t[re]=ee[re]);_t.fill=ee.fill,_t.stroke=ee.stroke}}function ht(It){var Wt=It.__hoverStl;if(!(!Wt||It.__highlighted)){var _t=It.__zr,ee=It.useHoverLayer&&_t&&_t.painter.type==="canvas";if(It.__highlighted=ee?"layer":"plain",!(It.isGroup||!_t&&It.useHoverLayer)){var re=It,de=It.style;ee&&(re=_t.addHover(It),de=re.style),it(de),ee||rt(re),de.extendFrom(Wt),Pt(de,Wt,"fill"),Pt(de,Wt,"stroke"),ot(de),ee||(It.dirty(!1),It.z2+=O)}}}function Pt(It,Wt,_t){!et(Wt[_t])&&et(It[_t])&&(It[_t]=ut(It[_t]))}function wt(It){var Wt=It.__highlighted;if(Wt&&(It.__highlighted=!1,!It.isGroup))if(Wt==="layer")It.__zr&&It.__zr.removeHover(It);else{var _t=It.style,ee=It.__cachedNormalStl;ee&&(it(_t),It.setStyle(ee),ot(_t));var re=It.__cachedNormalZ2;re!=null&&It.z2-re===O&&(It.z2=re)}}function At(It,Wt,_t){var ee=P,re=P,de;It.__highlighted&&(ee=k,de=!0),Wt(It,_t),It.__highlighted&&(re=k,de=!0),It.isGroup&&It.traverse(function(Se){!Se.isGroup&&Wt(Se,_t)}),de&&It.__highDownOnUpdate&&It.__highDownOnUpdate(ee,re)}function Nt(It,Wt){Wt=It.__hoverStl=Wt!==!1&&(It.hoverStyle||Wt||{}),It.__hoverStlDirty=!0,It.__highlighted&&(It.__cachedNormalStl=null,wt(It),ht(It))}function Lt(It){!Ft(this,It)&&!this.__highByOuter&&At(this,ht)}function Rt(It){!Ft(this,It)&&!this.__highByOuter&&At(this,wt)}function Tt(It){this.__highByOuter|=1<<(It||0),At(this,ht)}function mt(It){!(this.__highByOuter&=~(1<<(It||0)))&&At(this,wt)}function Ft(It,Wt){return It.__highDownSilentOnTouch&&Wt.zrByTouch}function ct(It,Wt){vt(It,!0),At(It,Nt,Wt)}function vt(It,Wt){var _t=Wt===!1;if(It.__highDownSilentOnTouch=It.highDownSilentOnTouch,It.__highDownOnUpdate=It.highDownOnUpdate,!_t||It.__highDownDispatcher){var ee=_t?"off":"on";It[ee]("mouseover",Lt)[ee]("mouseout",Rt),It[ee]("emphasis",Tt)[ee]("normal",mt),It.__highByOuter=It.__highByOuter||0,It.__highDownDispatcher=!_t}}function Dt(It){return!!(It&&It.__highDownDispatcher)}function Ct(It){var Wt=E[It];return Wt==null&&L<=32&&(Wt=E[It]=L++),Wt}function jt(It,Wt,_t,ee,re,de,Se){re=re||S;var Pe=re.labelFetcher,De=re.labelDataIndex,Ie=re.labelDimIndex,pe=re.labelProp,Oe=_t.getShallow("show"),Ne=ee.getShallow("show"),Ve;(Oe||Ne)&&(Pe&&(Ve=Pe.getFormattedLabel(De,"normal",null,Ie,pe)),Ve==null&&(Ve=M.isFunction(re.defaultText)?re.defaultText(De,re):re.defaultText));var be=Oe?Ve:null,Be=Ne?M.retrieve2(Pe?Pe.getFormattedLabel(De,"emphasis",null,Ie,pe):null,Ve):null;(be!=null||Be!=null)&&(Yt(It,_t,de,re),Yt(Wt,ee,Se,re,!0)),It.text=be,Wt.text=Be}function zt(It,Wt,_t){var ee=It.style;Wt&&(it(ee),It.setStyle(Wt),ot(ee)),ee=It.__hoverStl,_t&&ee&&(it(ee),M.extend(ee,_t),ot(ee))}function Yt(It,Wt,_t,ee,re){return ft(It,Wt,ee,re),_t&&M.extend(It,_t),It}function Zt(It,Wt,_t){var ee={isRectText:!0},re;_t===!1?re=!0:ee.autoColor=_t,ft(It,Wt,ee,re)}function ft(It,Wt,_t,ee){if(_t=_t||S,_t.isRectText){var re;_t.getTextPosition?re=_t.getTextPosition(Wt,ee):(re=Wt.getShallow("position")||(ee?null:"inside"),re==="outside"&&(re="top")),It.textPosition=re,It.textOffset=Wt.getShallow("offset");var de=Wt.getShallow("rotate");de!=null&&(de*=Math.PI/180),It.textRotation=de,It.textDistance=M.retrieve2(Wt.getShallow("distance"),ee?null:5)}var Se=Wt.ecModel,Pe=Se&&Se.option.textStyle,De=gt(Wt),Ie;if(De){Ie={};for(var pe in De)if(De.hasOwnProperty(pe)){var Oe=Wt.getModel(["rich",pe]);dt(Ie[pe]={},Oe,Pe,_t,ee)}}return It.rich=Ie,dt(It,Wt,Pe,_t,ee,!0),_t.forceRich&&!_t.textStyle&&(_t.textStyle={}),It}function gt(It){for(var Wt;It&&It!==It.ecModel;){var _t=(It.option||S).rich;if(_t){Wt=Wt||{};for(var ee in _t)_t.hasOwnProperty(ee)&&(Wt[ee]=1)}It=It.parentModel}return Wt}function dt(It,Wt,_t,ee,re,de){_t=!re&&_t||S,It.textFill=lt(Wt.getShallow("color"),ee)||_t.color,It.textStroke=lt(Wt.getShallow("textBorderColor"),ee)||_t.textBorderColor,It.textStrokeWidth=M.retrieve2(Wt.getShallow("textBorderWidth"),_t.textBorderWidth),re||(de&&(It.insideRollbackOpt=ee,ot(It)),It.textFill==null&&(It.textFill=ee.autoColor)),It.fontStyle=Wt.getShallow("fontStyle")||_t.fontStyle,It.fontWeight=Wt.getShallow("fontWeight")||_t.fontWeight,It.fontSize=Wt.getShallow("fontSize")||_t.fontSize,It.fontFamily=Wt.getShallow("fontFamily")||_t.fontFamily,It.textAlign=Wt.getShallow("align"),It.textVerticalAlign=Wt.getShallow("verticalAlign")||Wt.getShallow("baseline"),It.textLineHeight=Wt.getShallow("lineHeight"),It.textWidth=Wt.getShallow("width"),It.textHeight=Wt.getShallow("height"),It.textTag=Wt.getShallow("tag"),(!de||!ee.disableBox)&&(It.textBackgroundColor=lt(Wt.getShallow("backgroundColor"),ee),It.textPadding=Wt.getShallow("padding"),It.textBorderColor=lt(Wt.getShallow("borderColor"),ee),It.textBorderWidth=Wt.getShallow("borderWidth"),It.textBorderRadius=Wt.getShallow("borderRadius"),It.textBoxShadowColor=Wt.getShallow("shadowColor"),It.textBoxShadowBlur=Wt.getShallow("shadowBlur"),It.textBoxShadowOffsetX=Wt.getShallow("shadowOffsetX"),It.textBoxShadowOffsetY=Wt.getShallow("shadowOffsetY")),It.textShadowColor=Wt.getShallow("textShadowColor")||_t.textShadowColor,It.textShadowBlur=Wt.getShallow("textShadowBlur")||_t.textShadowBlur,It.textShadowOffsetX=Wt.getShallow("textShadowOffsetX")||_t.textShadowOffsetX,It.textShadowOffsetY=Wt.getShallow("textShadowOffsetY")||_t.textShadowOffsetY}function lt(It,Wt){return It!=="auto"?It:Wt&&Wt.autoColor?Wt.autoColor:null}function ot(It){var Wt=It.textPosition,_t=It.insideRollbackOpt,ee;if(_t&&It.textFill==null){var re=_t.autoColor,de=_t.isRectText,Se=_t.useInsideStyle,Pe=Se!==!1&&(Se===!0||de&&Wt&&typeof Wt=="string"&&Wt.indexOf("inside")>=0),De=!Pe&&re!=null;(Pe||De)&&(ee={textFill:It.textFill,textStroke:It.textStroke,textStrokeWidth:It.textStrokeWidth}),Pe&&(It.textFill="#fff",It.textStroke==null&&(It.textStroke=re,It.textStrokeWidth==null&&(It.textStrokeWidth=2))),De&&(It.textFill=re)}It.insideRollback=ee}function it(It){var Wt=It.insideRollback;Wt&&(It.textFill=Wt.textFill,It.textStroke=Wt.textStroke,It.textStrokeWidth=Wt.textStrokeWidth,It.insideRollback=null)}function yt(It,Wt){var _t=Wt&&Wt.getModel("textStyle");return M.trim([It.fontStyle||_t&&_t.getShallow("fontStyle")||"",It.fontWeight||_t&&_t.getShallow("fontWeight")||"",(It.fontSize||_t&&_t.getShallow("fontSize")||12)+"px",It.fontFamily||_t&&_t.getShallow("fontFamily")||"sans-serif"].join(" "))}function Ot(It,Wt,_t,ee,re,de){typeof re=="function"&&(de=re,re=null);var Se=ee&&ee.isAnimationEnabled();if(Se){var Pe=It?"Update":"",De=ee.getShallow("animationDuration"+Pe),Ie=ee.getShallow("animationEasing"+Pe),pe=ee.getShallow("animationDelay"+Pe);typeof pe=="function"&&(pe=pe(re,ee.getAnimationDelayParams?ee.getAnimationDelayParams(Wt,re):null)),typeof De=="function"&&(De=De(re)),De>0?Wt.animateTo(_t,De,pe||0,Ie,de,!!de):(Wt.stopAnimation(),Wt.attr(_t),de&&de())}else Wt.stopAnimation(),Wt.attr(_t),de&&de()}function St(It,Wt,_t,ee,re){Ot(!0,It,Wt,_t,ee,re)}function Gt(It,Wt,_t,ee,re){Ot(!1,It,Wt,_t,ee,re)}function Ht(It,Wt){for(var _t=A.identity([]);It&&It!==Wt;)A.mul(_t,It.getLocalTransform(),_t),It=It.parent;return _t}function Kt(It,Wt,_t){return Wt&&!M.isArrayLike(Wt)&&(Wt=b.getLocalTransform(Wt)),_t&&(Wt=A.invert([],Wt)),T.applyTransform([],It,Wt)}function Jt(It,Wt,_t){var ee=Wt[4]===0||Wt[5]===0||Wt[0]===0?1:Math.abs(2*Wt[4]/Wt[0]),re=Wt[4]===0||Wt[5]===0||Wt[2]===0?1:Math.abs(2*Wt[4]/Wt[2]),de=[It==="left"?-ee:It==="right"?ee:0,It==="top"?-re:It==="bottom"?re:0];return de=Kt(de,Wt,_t),Math.abs(de[0])>Math.abs(de[1])?de[0]>0?"right":"left":de[1]>0?"bottom":"top"}function te(It,Wt,_t,ee){if(!It||!Wt)return;function re(Pe){var De={};return Pe.traverse(function(Ie){!Ie.isGroup&&Ie.anid&&(De[Ie.anid]=Ie)}),De}function de(Pe){var De={position:T.clone(Pe.position),rotation:Pe.rotation};return Pe.shape&&(De.shape=M.extend({},Pe.shape)),De}var Se=re(It);Wt.traverse(function(Pe){if(!Pe.isGroup&&Pe.anid){var De=Se[Pe.anid];if(De){var Ie=de(Pe);Pe.attr(de(De)),St(Pe,Ie,_t,Pe.dataIndex)}}})}function ie(It,Wt){return M.map(It,function(_t){var ee=_t[0];ee=p(ee,Wt.x),ee=w(ee,Wt.x+Wt.width);var re=_t[1];return re=p(re,Wt.y),re=w(re,Wt.y+Wt.height),[ee,re]})}function oe(It,Wt){var _t=p(It.x,Wt.x),ee=w(It.x+It.width,Wt.x+Wt.width),re=p(It.y,Wt.y),de=w(It.y+It.height,Wt.y+Wt.height);if(ee>=_t&&de>=re)return{x:_t,y:re,width:ee-_t,height:de-re}}function he(It,Wt,_t){Wt=M.extend({rectHover:!0},Wt);var ee=Wt.style={strokeNoScale:!0};if(_t=_t||{x:-1,y:-1,width:2,height:2},It)return It.indexOf("image://")===0?(ee.image=It.slice(8),M.defaults(ee,_t),new C(Wt)):U(It.replace("path://",""),Wt,_t,"center")}function ne(It,Wt,_t,ee,re){for(var de=0,Se=re[re.length-1];de<re.length;de++){var Pe=re[de];if(ce(It,Wt,_t,ee,Pe[0],Pe[1],Se[0],Se[1]))return!0;Se=Pe}}function ce(It,Wt,_t,ee,re,de,Se,Pe){var De=_t-It,Ie=ee-Wt,pe=Se-re,Oe=Pe-de,Ne=ge(pe,Oe,De,Ie);if(Ae(Ne))return!1;var Ve=It-re,be=Wt-de,Be=ge(Ve,be,De,Ie)/Ne;if(Be<0||Be>1)return!1;var Ue=ge(Ve,be,pe,Oe)/Ne;return!(Ue<0||Ue>1)}function ge(It,Wt,_t,ee){return It*ee-_t*Wt}function Ae(It){return It<=1e-6&&It>=-1e-6}W("circle",m),W("sector",o),W("ring",u),W("polygon",l),W("polyline",r),W("rect",s),W("line",c),W("bezierCurve",x),W("arc",a),z.Z2_EMPHASIS_LIFT=O,z.CACHED_LABEL_STYLE_PROPERTIES=B,z.extendShape=I,z.extendPath=G,z.registerShape=W,z.getShapeClass=Z,z.makePath=U,z.makeImage=H,z.mergePath=Y,z.resizePath=$,z.subPixelOptimizeLine=K,z.subPixelOptimizeRect=J,z.subPixelOptimize=Q,z.setElementHoverStyle=Nt,z.setHoverStyle=ct,z.setAsHighDownDispatcher=vt,z.isHighDownDispatcher=Dt,z.getHighlightDigit=Ct,z.setLabelStyle=jt,z.modifyLabelStyle=zt,z.setTextStyle=Yt,z.setText=Zt,z.getFont=yt,z.updateProps=St,z.initProps=Gt,z.getTransform=Ht,z.applyTransform=Kt,z.transformDirection=Jt,z.groupTransition=te,z.clipPointsByRect=ie,z.clipRectByRect=oe,z.createIcon=he,z.linePolygonIntersect=ne,z.lineLineIntersect=ce},30871:function(X,z,e){var M=e(31879),F=e(95946),R=e(48354),A=R.parsePercent,T=e(17795),D=M.each,b=["left","right","top","bottom","width","height"],C=[["width","left","right"],["height","top","bottom"]];function f(i,n,h,g,d){var y=0,p=0;g==null&&(g=1/0),d==null&&(d=1/0);var w=0;n.eachChild(function(S,O){var B=S.position,k=S.getBoundingRect(),P=n.childAt(O+1),L=P&&P.getBoundingRect(),E,N;if(i==="horizontal"){var I=k.width+(L?-L.x+k.x:0);E=y+I,E>g||S.newline?(y=0,E=I,p+=w+h,w=k.height):w=Math.max(w,k.height)}else{var G=k.height+(L?-L.y+k.y:0);N=p+G,N>d||S.newline?(y+=w+h,p=0,N=G,w=k.width):w=Math.max(w,k.width)}S.newline||(B[0]=y,B[1]=p,i==="horizontal"?y=E+h:p=N+h)})}var v=f,m=M.curry(f,"vertical"),o=M.curry(f,"horizontal");function u(i,n,h){var g=n.width,d=n.height,y=A(i.x,g),p=A(i.y,d),w=A(i.x2,g),S=A(i.y2,d);return(isNaN(y)||isNaN(parseFloat(i.x)))&&(y=0),(isNaN(w)||isNaN(parseFloat(i.x2)))&&(w=g),(isNaN(p)||isNaN(parseFloat(i.y)))&&(p=0),(isNaN(S)||isNaN(parseFloat(i.y2)))&&(S=d),h=T.normalizeCssArray(h||0),{width:Math.max(w-y-h[1]-h[3],0),height:Math.max(S-p-h[0]-h[2],0)}}function l(i,n,h){h=T.normalizeCssArray(h||0);var g=n.width,d=n.height,y=A(i.left,g),p=A(i.top,d),w=A(i.right,g),S=A(i.bottom,d),O=A(i.width,g),B=A(i.height,d),k=h[2]+h[0],P=h[1]+h[3],L=i.aspect;switch(isNaN(O)&&(O=g-w-P-y),isNaN(B)&&(B=d-S-k-p),L!=null&&(isNaN(O)&&isNaN(B)&&(L>g/d?O=g*.8:B=d*.8),isNaN(O)&&(O=L*B),isNaN(B)&&(B=O/L)),isNaN(y)&&(y=g-w-O-P),isNaN(p)&&(p=d-S-B-k),i.left||i.right){case"center":y=g/2-O/2-h[3];break;case"right":y=g-O-P;break}switch(i.top||i.bottom){case"middle":case"center":p=d/2-B/2-h[0];break;case"bottom":p=d-B-k;break}y=y||0,p=p||0,isNaN(O)&&(O=g-P-y-(w||0)),isNaN(B)&&(B=d-k-p-(S||0));var E=new F(y+h[3],p+h[0],O,B);return E.margin=h,E}function r(i,n,h,g,d){var y=!d||!d.hv||d.hv[0],p=!d||!d.hv||d.hv[1],w=d&&d.boundingMode||"all";if(!(!y&&!p)){var S;if(w==="raw")S=i.type==="group"?new F(0,0,+n.width||0,+n.height||0):i.getBoundingRect();else if(S=i.getBoundingRect(),i.needLocalTransform()){var O=i.getLocalTransform();S=S.clone(),S.applyTransform(O)}n=l(M.defaults({width:S.width,height:S.height},n),h,g);var B=i.position,k=y?n.x-S.x:0,P=p?n.y-S.y:0;i.attr("position",w==="raw"?[k,P]:[B[0]+k,B[1]+P])}}function s(i,n){return i[C[n][0]]!=null||i[C[n][1]]!=null&&i[C[n][2]]!=null}function c(i,n,h){!M.isObject(h)&&(h={});var g=h.ignoreSize;!M.isArray(g)&&(g=[g,g]);var d=p(C[0],0),y=p(C[1],1);O(C[0],i,d),O(C[1],i,y);function p(B,k){var P={},L=0,E={},N=0,I=2;if(D(B,function(Z){E[Z]=i[Z]}),D(B,function(Z){w(n,Z)&&(P[Z]=E[Z]=n[Z]),S(P,Z)&&L++,S(E,Z)&&N++}),g[k])return S(n,B[1])?E[B[2]]=null:S(n,B[2])&&(E[B[1]]=null),E;if(N===I||!L)return E;if(L>=I)return P;for(var G=0;G<B.length;G++){var W=B[G];if(!w(P,W)&&w(i,W)){P[W]=i[W];break}}return P}function w(B,k){return B.hasOwnProperty(k)}function S(B,k){return B[k]!=null&&B[k]!=="auto"}function O(B,k,P){D(B,function(L){k[L]=P[L]})}}function x(i){return a({},i)}function a(i,n){return n&&i&&D(b,function(h){n.hasOwnProperty(h)&&(i[h]=n[h])}),i}z.LOCATION_PARAMS=b,z.HV_NAMES=C,z.box=v,z.vbox=m,z.hbox=o,z.getAvailableSize=u,z.getLayoutRect=l,z.positionElement=r,z.sizeCalculable=s,z.mergeLayoutParam=c,z.getLayoutParams=x,z.copyLayoutParams=a},35454:function(X,z,e){var M=e(31879),F=e(58020),R=M.each,A=M.isObject,T=M.isArray,D="series\0";function b(p){return p instanceof Array?p:p==null?[]:[p]}function C(p,w,S){if(p){p[w]=p[w]||{},p.emphasis=p.emphasis||{},p.emphasis[w]=p.emphasis[w]||{};for(var O=0,B=S.length;O<B;O++){var k=S[O];!p.emphasis[w].hasOwnProperty(k)&&p[w].hasOwnProperty(k)&&(p.emphasis[w][k]=p[w][k])}}}var f=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function v(p){return A(p)&&!T(p)&&!(p instanceof Date)?p.value:p}function m(p){return A(p)&&!(p instanceof Array)}function o(p,w){w=(w||[]).slice();var S=M.map(p||[],function(O,B){return{exist:O}});return R(w,function(O,B){if(A(O)){for(var k=0;k<S.length;k++)if(!S[k].option&&O.id!=null&&S[k].exist.id===O.id+""){S[k].option=O,w[B]=null;return}for(var k=0;k<S.length;k++){var P=S[k].exist;if(!S[k].option&&(P.id==null||O.id==null)&&O.name!=null&&!r(O)&&!r(P)&&P.name===O.name+""){S[k].option=O,w[B]=null;return}}}}),R(w,function(O,B){if(A(O)){for(var k=0;k<S.length;k++){var P=S[k].exist;if(!S[k].option&&!r(P)&&O.id==null){S[k].option=O;break}}k>=S.length&&S.push({option:O})}}),S}function u(p){var w=M.createHashMap();R(p,function(S,O){var B=S.exist;B&&w.set(B.id,S)}),R(p,function(S,O){var B=S.option;M.assert(!B||B.id==null||!w.get(B.id)||w.get(B.id)===S,"id duplicates: "+(B&&B.id)),B&&B.id!=null&&w.set(B.id,S),!S.keyInfo&&(S.keyInfo={})}),R(p,function(S,O){var B=S.exist,k=S.option,P=S.keyInfo;if(A(k)){if(P.name=k.name!=null?k.name+"":B?B.name:D+O,B)P.id=B.id;else if(k.id!=null)P.id=k.id+"";else{var L=0;do P.id="\0"+P.name+"\0"+L++;while(w.get(P.id))}w.set(P.id,S)}})}function l(p){var w=p.name;return!!(w&&w.indexOf(D))}function r(p){return A(p)&&p.id&&(p.id+"").indexOf("\0_ec_\0")===0}function s(p,w){var S={},O={};return B(p||[],S),B(w||[],O,S),[k(S),k(O)];function B(P,L,E){for(var N=0,I=P.length;N<I;N++)for(var G=P[N].seriesId,W=b(P[N].dataIndex),Z=E&&E[G],U=0,H=W.length;U<H;U++){var V=W[U];Z&&Z[V]?Z[V]=null:(L[G]||(L[G]={}))[V]=1}}function k(P,L){var E=[];for(var N in P)if(P.hasOwnProperty(N)&&P[N]!=null)if(L)E.push(+N);else{var I=k(P[N],!0);I.length&&E.push({seriesId:N,dataIndex:I})}return E}}function c(p,w){if(w.dataIndexInside!=null)return w.dataIndexInside;if(w.dataIndex!=null)return M.isArray(w.dataIndex)?M.map(w.dataIndex,function(S){return p.indexOfRawIndex(S)}):p.indexOfRawIndex(w.dataIndex);if(w.name!=null)return M.isArray(w.name)?M.map(w.name,function(S){return p.indexOfName(S)}):p.indexOfName(w.name)}function x(){var p="__\0ec_inner_"+a+++"_"+Math.random().toFixed(5);return function(w){return w[p]||(w[p]={})}}var a=0;function i(p,w,S){if(M.isString(w)){var O={};O[w+"Index"]=0,w=O}var B=S&&S.defaultMainType;B&&!n(w,B+"Index")&&!n(w,B+"Id")&&!n(w,B+"Name")&&(w[B+"Index"]=0);var k={};return R(w,function(E,L){var E=w[L];if(L==="dataIndex"||L==="dataIndexInside"){k[L]=E;return}var N=L.match(/^(\w+)(Index|Id|Name)$/)||[],I=N[1],G=(N[2]||"").toLowerCase();if(!(!I||!G||E==null||G==="index"&&E==="none"||S&&S.includeMainTypes&&M.indexOf(S.includeMainTypes,I)<0)){var W={mainType:I};(G!=="index"||E!=="all")&&(W[G]=E);var Z=p.queryComponents(W);k[I+"Models"]=Z,k[I+"Model"]=Z[0]}}),k}function n(p,w){return p&&p.hasOwnProperty(w)}function h(p,w,S){p.setAttribute?p.setAttribute(w,S):p[w]=S}function g(p,w){return p.getAttribute?p.getAttribute(w):p[w]}function d(p){return p==="auto"?F.domSupported?"html":"richText":p||"html"}function y(p,w){var S=M.createHashMap(),O=[];return M.each(p,function(B){var k=w(B);(S.get(k)||(O.push(k),S.set(k,[]))).push(B)}),{keys:O,buckets:S}}z.normalizeToArray=b,z.defaultEmphasis=C,z.TEXT_STYLE_OPTIONS=f,z.getDataItemValue=v,z.isDataItemOption=m,z.mappingToExists=o,z.makeIdAndName=u,z.isNameSpecified=l,z.isIdInner=r,z.compressBatches=s,z.queryDataIndex=c,z.makeInner=x,z.parseFinder=i,z.setAttribute=h,z.getAttribute=g,z.getTooltipRenderMode=d,z.groupData=y},48354:function(X,z,e){var M=e(31879),F=1e-4;function R(g){return g.replace(/^\s+|\s+$/g,"")}function A(g,d,y,p){var w=d[1]-d[0],S=y[1]-y[0];if(w===0)return S===0?y[0]:(y[0]+y[1])/2;if(p)if(w>0){if(g<=d[0])return y[0];if(g>=d[1])return y[1]}else{if(g>=d[0])return y[0];if(g<=d[1])return y[1]}else{if(g===d[0])return y[0];if(g===d[1])return y[1]}return(g-d[0])/w*S+y[0]}function T(g,d){switch(g){case"center":case"middle":g="50%";break;case"left":case"top":g="0%";break;case"right":case"bottom":g="100%";break}return typeof g=="string"?R(g).match(/%$/)?parseFloat(g)/100*d:parseFloat(g):g==null?NaN:+g}function D(g,d,y){return d==null&&(d=10),d=Math.min(Math.max(0,d),20),g=(+g).toFixed(d),y?g:+g}function b(g){return g.sort(function(d,y){return d-y}),g}function C(g){if(g=+g,isNaN(g))return 0;for(var d=1,y=0;Math.round(g*d)/d!==g;)d*=10,y++;return y}function f(g){var d=g.toString(),y=d.indexOf("e");if(y>0){var p=+d.slice(y+1);return p<0?-p:0}else{var w=d.indexOf(".");return w<0?0:d.length-1-w}}function v(g,d){var y=Math.log,p=Math.LN10,w=Math.floor(y(g[1]-g[0])/p),S=Math.round(y(Math.abs(d[1]-d[0]))/p),O=Math.min(Math.max(-w+S,0),20);return isFinite(O)?O:20}function m(g,d,y){if(!g[d])return 0;var p=M.reduce(g,function(G,W){return G+(isNaN(W)?0:W)},0);if(p===0)return 0;for(var w=Math.pow(10,y),S=M.map(g,function(G){return(isNaN(G)?0:G)/p*w*100}),O=w*100,B=M.map(S,function(G){return Math.floor(G)}),k=M.reduce(B,function(G,W){return G+W},0),P=M.map(S,function(G,W){return G-B[W]});k<O;){for(var L=Number.NEGATIVE_INFINITY,E=null,N=0,I=P.length;N<I;++N)P[N]>L&&(L=P[N],E=N);++B[E],P[E]=0,++k}return B[d]/w}var o=9007199254740991;function u(g){var d=Math.PI*2;return(g%d+d)%d}function l(g){return g>-F&&g<F}var r=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function s(g){if(g instanceof Date)return g;if(typeof g=="string"){var d=r.exec(g);if(!d)return new Date(NaN);if(d[8]){var y=+d[4]||0;return d[8].toUpperCase()!=="Z"&&(y-=d[8].slice(0,3)),new Date(Date.UTC(+d[1],+(d[2]||1)-1,+d[3]||1,y,+(d[5]||0),+d[6]||0,+d[7]||0))}else return new Date(+d[1],+(d[2]||1)-1,+d[3]||1,+d[4]||0,+(d[5]||0),+d[6]||0,+d[7]||0)}else if(g==null)return new Date(NaN);return new Date(Math.round(g))}function c(g){return Math.pow(10,x(g))}function x(g){if(g===0)return 0;var d=Math.floor(Math.log(g)/Math.LN10);return g/Math.pow(10,d)>=10&&d++,d}function a(g,d){var y=x(g),p=Math.pow(10,y),w=g/p,S;return d?w<1.5?S=1:w<2.5?S=2:w<4?S=3:w<7?S=5:S=10:w<1?S=1:w<2?S=2:w<3?S=3:w<5?S=5:S=10,g=S*p,y>=-20?+g.toFixed(y<0?-y:0):g}function i(g,d){var y=(g.length-1)*d+1,p=Math.floor(y),w=+g[p-1],S=y-p;return S?w+S*(g[p]-w):w}function n(g){g.sort(function(k,P){return B(k,P,0)?-1:1});for(var d=-1/0,y=1,p=0;p<g.length;){for(var w=g[p].interval,S=g[p].close,O=0;O<2;O++)w[O]<=d&&(w[O]=d,S[O]=O?1:1-y),d=w[O],y=S[O];w[0]===w[1]&&S[0]*S[1]!==1?g.splice(p,1):p++}return g;function B(k,P,L){return k.interval[L]<P.interval[L]||k.interval[L]===P.interval[L]&&(k.close[L]-P.close[L]===(L?-1:1)||!L&&B(k,P,1))}}function h(g){return g-parseFloat(g)>=0}z.linearMap=A,z.parsePercent=T,z.round=D,z.asc=b,z.getPrecision=C,z.getPrecisionSafe=f,z.getPixelPrecision=v,z.getPercentWithPrecision=m,z.MAX_SAFE_INTEGER=o,z.remRadian=u,z.isRadianAroundZero=l,z.parseDate=s,z.quantity=c,z.quantityExponent=x,z.nice=a,z.quantile=i,z.reformIntervals=n,z.isNumeric=h},45507:function(X,z,e){var M=e(48070),F=M.extendShape,R=F({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},buildPath:function(A,T){var D=T.cx,b=T.cy,C=Math.max(T.r0||0,0),f=Math.max(T.r,0),v=(f-C)*.5,m=C+v,o=T.startAngle,u=T.endAngle,l=T.clockwise,r=Math.cos(o),s=Math.sin(o),c=Math.cos(u),x=Math.sin(u),a=l?u-o<Math.PI*2:o-u<Math.PI*2;a&&(A.moveTo(r*C+D,s*C+b),A.arc(r*m+D,s*m+b,v,-Math.PI+o,o,!l)),A.arc(D,b,f,o,u,!l),A.moveTo(c*f+D,x*f+b),A.arc(c*m+D,x*m+b,v,u-Math.PI*2,u-Math.PI,!l),C!==0&&(A.arc(D,b,C,u,o,l),A.moveTo(r*C+D,x*C+b)),A.closePath()}});X.exports=R},35730:function(X,z,e){var M=e(31879),F=e(48070),R=e(95946),A=e(72113),T=A.calculateTextPosition,D=F.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(s,c){var x=c.cx,a=c.cy,i=c.width/2,n=c.height/2;s.moveTo(x,a-n),s.lineTo(x+i,a+n),s.lineTo(x-i,a+n),s.closePath()}}),b=F.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(s,c){var x=c.cx,a=c.cy,i=c.width/2,n=c.height/2;s.moveTo(x,a-n),s.lineTo(x+i,a),s.lineTo(x,a+n),s.lineTo(x-i,a),s.closePath()}}),C=F.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(s,c){var x=c.x,a=c.y,i=c.width/5*3,n=Math.max(i,c.height),h=i/2,g=h*h/(n-h),d=a-n+h+g,y=Math.asin(g/h),p=Math.cos(y)*h,w=Math.sin(y),S=Math.cos(y),O=h*.6,B=h*.7;s.moveTo(x-p,d+g),s.arc(x,d,h,Math.PI-y,Math.PI*2+y),s.bezierCurveTo(x+p-w*O,d+g+S*O,x,a-B,x,a),s.bezierCurveTo(x,a-B,x-p+w*O,d+g+S*O,x-p,d+g),s.closePath()}}),f=F.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(s,c){var x=c.height,a=c.width,i=c.x,n=c.y,h=a/3*2;s.moveTo(i,n),s.lineTo(i+h,n+x),s.lineTo(i,n+x/4*3),s.lineTo(i-h,n+x),s.lineTo(i,n),s.closePath()}}),v={line:F.Line,rect:F.Rect,roundRect:F.Rect,square:F.Rect,circle:F.Circle,diamond:b,pin:C,arrow:f,triangle:D},m={line:function(s,c,x,a,i){i.x1=s,i.y1=c+a/2,i.x2=s+x,i.y2=c+a/2},rect:function(s,c,x,a,i){i.x=s,i.y=c,i.width=x,i.height=a},roundRect:function(s,c,x,a,i){i.x=s,i.y=c,i.width=x,i.height=a,i.r=Math.min(x,a)/4},square:function(s,c,x,a,i){var n=Math.min(x,a);i.x=s,i.y=c,i.width=n,i.height=n},circle:function(s,c,x,a,i){i.cx=s+x/2,i.cy=c+a/2,i.r=Math.min(x,a)/2},diamond:function(s,c,x,a,i){i.cx=s+x/2,i.cy=c+a/2,i.width=x,i.height=a},pin:function(s,c,x,a,i){i.x=s+x/2,i.y=c+a/2,i.width=x,i.height=a},arrow:function(s,c,x,a,i){i.x=s+x/2,i.y=c+a/2,i.width=x,i.height=a},triangle:function(s,c,x,a,i){i.cx=s+x/2,i.cy=c+a/2,i.width=x,i.height=a}},o={};M.each(v,function(s,c){o[c]=new s});var u=F.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(s,c,x){var a=T(s,c,x),i=this.shape;return i&&i.symbolType==="pin"&&c.textPosition==="inside"&&(a.y=x.y+x.height*.4),a},buildPath:function(s,c,x){var a=c.symbolType;if(a!=="none"){var i=o[a];i||(a="rect",i=o[a]),m[a](c.x,c.y,c.width,c.height,i.shape),i.buildPath(s,i.shape,x)}}});function l(s,c){if(this.type!=="image"){var x=this.style,a=this.shape;a&&a.symbolType==="line"?x.stroke=s:this.__isEmptyBrush?(x.stroke=s,x.fill=c||"#fff"):(x.fill&&(x.fill=s),x.stroke&&(x.stroke=s)),this.dirty(!1)}}function r(s,c,x,a,i,n,h){var g=s.indexOf("empty")===0;g&&(s=s.substr(5,1).toLowerCase()+s.substr(6));var d;return s.indexOf("image://")===0?d=F.makeImage(s.slice(8),new R(c,x,a,i),h?"center":"cover"):s.indexOf("path://")===0?d=F.makePath(s.slice(7),{},new R(c,x,a,i),h?"center":"cover"):d=new u({shape:{symbolType:s,x:c,y:x,width:a,height:i}}),d.__isEmptyBrush=g,d.setColor=l,d.setColor(n),d}z.createSymbol=r},1655:function(X,z){var e="\0__throttleOriginMethod",M="\0__throttleRate",F="\0__throttleType";function R(D,b,C){var f,v=0,m=0,o=null,u,l,r,s;b=b||0;function c(){m=new Date().getTime(),o=null,D.apply(l,r||[])}var x=function(){f=new Date().getTime(),l=this,r=arguments;var a=s||b,i=s||C;s=null,u=f-(i?v:m)-a,clearTimeout(o),i?o=setTimeout(c,a):u>=0?c():o=setTimeout(c,-u),v=f};return x.clear=function(){o&&(clearTimeout(o),o=null)},x.debounceNextCall=function(a){s=a},x}function A(D,b,C,f){var v=D[b];if(v){var m=v[e]||v,o=v[F],u=v[M];if(u!==C||o!==f){if(C==null||!f)return D[b]=m;v=D[b]=R(m,C,f==="debounce"),v[e]=m,v[F]=f,v[M]=C}return v}}function T(D,b){var C=D[b];C&&C[e]&&(D[b]=C[e])}z.throttle=R,z.createOrUpdate=A,z.clear=T},1911:function(X,z,e){var M=e(31879),F=M.each,R=e(27146),A=e(50777),T=e(28108),D=e(35454),b=e(48070),C=e(5604),f=C.createTask,v=e(50629),m=D.makeInner(),o=v();function u(){this.group=new R,this.uid=A.getUID("viewChart"),this.renderTask=f({plan:c,reset:x}),this.renderTask.context={view:this}}u.prototype={type:"chart",init:function(n,h){},render:function(n,h,g,d){},highlight:function(n,h,g,d){s(n.getData(),d,"emphasis")},downplay:function(n,h,g,d){s(n.getData(),d,"normal")},remove:function(n,h){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var l=u.prototype;l.updateView=l.updateLayout=l.updateVisual=function(n,h,g,d){this.render(n,h,g,d)};function r(n,h,g){if(n&&(n.trigger(h,g),n.isGroup&&!b.isHighDownDispatcher(n)))for(var d=0,y=n.childCount();d<y;d++)r(n.childAt(d),h,g)}function s(n,h,g){var d=D.queryDataIndex(n,h),y=h&&h.highlightKey!=null?b.getHighlightDigit(h.highlightKey):null;d!=null?F(D.normalizeToArray(d),function(p){r(n.getItemGraphicEl(p),g,y)}):n.eachItemGraphicEl(function(p){r(p,g,y)})}T.enableClassExtend(u,["dispose"]),T.enableClassManagement(u,{registerWhenExtend:!0}),u.markUpdateMethod=function(n,h){m(n).updateMethod=h};function c(n){return o(n.model)}function x(n){var h=n.model,g=n.ecModel,d=n.api,y=n.payload,p=h.pipelineContext.progressiveRender,w=n.view,S=y&&m(y).updateMethod,O=p?"incrementalPrepareRender":S&&w[S]?S:"render";return O!=="render"&&w[O](h,g,d,y),a[O]}var a={incrementalPrepareRender:{progress:function(n,h){h.view.incrementalRender(n,h.model,h.ecModel,h.api,h.payload)}},render:{forceFirstProgress:!0,progress:function(n,h){h.view.render(h.model,h.ecModel,h.api,h.payload)}}},i=u;X.exports=i},53646:function(X,z,e){var M=e(27146),F=e(50777),R=e(28108),A=function(){this.group=new M,this.uid=F.getUID("viewComponent")};A.prototype={constructor:A,init:function(b,C){},render:function(b,C,f,v){},dispose:function(){},filterForExposedEvent:null};var T=A.prototype;T.updateView=T.updateLayout=T.updateVisual=function(b,C,f,v){},R.enableClassExtend(A),R.enableClassManagement(A,{registerWhenExtend:!0});var D=A;X.exports=D},89960:function(X){function z(M,F){this.getAllNames=function(){var R=F();return R.mapArray(R.getName)},this.containName=function(R){var A=F();return A.indexOfName(R)>=0},this.indexOfName=function(R){var A=M();return A.indexOfName(R)},this.getItemVisual=function(R,A){var T=M();return T.getItemVisual(R,A)}}var e=z;X.exports=e},58796:function(X,z,e){var M=e(31879),F=e(94819),R=e(48354),A=R.linearMap,T=M.each,D=M.isObject,b=-1,C=function(d){var y=d.mappingMethod,p=d.type,w=this.option=M.clone(d);this.type=p,this.mappingMethod=y,this._normalizeData=n[y];var S=f[p];this.applyVisual=S.applyVisual,this.getColorMapper=S.getColorMapper,this._doMap=S._doMap[y],y==="piecewise"?(o(w),v(w)):y==="category"?w.categories?m(w):o(w,!0):(M.assert(y!=="linear"||w.dataExtent),o(w))};C.prototype={constructor:C,mapValueToVisual:function(d){var y=this._normalizeData(d);return this._doMap(y,d)},getNormalizer:function(){return M.bind(this._normalizeData,this)}};var f=C.visualHandlers={color:{applyVisual:r("color"),getColorMapper:function(){var d=this.option;return M.bind(d.mappingMethod==="category"?function(y,p){return!p&&(y=this._normalizeData(y)),s.call(this,y)}:function(y,p,w){var S=!!w;return!p&&(y=this._normalizeData(y)),w=F.fastLerp(y,d.parsedVisual,w),S?w:F.stringify(w,"rgba")},this)},_doMap:{linear:function(d){return F.stringify(F.fastLerp(d,this.option.parsedVisual),"rgba")},category:s,piecewise:function(d,y){var p=a.call(this,y);return p==null&&(p=F.stringify(F.fastLerp(d,this.option.parsedVisual),"rgba")),p},fixed:c}},colorHue:u(function(d,y){return F.modifyHSL(d,y)}),colorSaturation:u(function(d,y){return F.modifyHSL(d,null,y)}),colorLightness:u(function(d,y){return F.modifyHSL(d,null,null,y)}),colorAlpha:u(function(d,y){return F.modifyAlpha(d,y)}),opacity:{applyVisual:r("opacity"),_doMap:x([0,1])},liftZ:{applyVisual:r("liftZ"),_doMap:{linear:c,category:c,piecewise:c,fixed:c}},symbol:{applyVisual:function(d,y,p){var w=this.mapValueToVisual(d);if(M.isString(w))p("symbol",w);else if(D(w))for(var S in w)w.hasOwnProperty(S)&&p(S,w[S])},_doMap:{linear:l,category:s,piecewise:function(d,y){var p=a.call(this,y);return p==null&&(p=l.call(this,d)),p},fixed:c}},symbolSize:{applyVisual:r("symbolSize"),_doMap:x([0,1])}};function v(d){var y=d.pieceList;d.hasSpecialVisual=!1,M.each(y,function(p,w){p.originIndex=w,p.visual!=null&&(d.hasSpecialVisual=!0)})}function m(d){var y=d.categories,p=d.visual,w=d.categoryMap={};if(T(y,function(B,k){w[B]=k}),!M.isArray(p)){var S=[];M.isObject(p)?T(p,function(B,k){var P=w[k];S[P??b]=B}):S[b]=p,p=i(d,S)}for(var O=y.length-1;O>=0;O--)p[O]==null&&(delete w[y[O]],y.pop())}function o(d,y){var p=d.visual,w=[];M.isObject(p)?T(p,function(O){w.push(O)}):p!=null&&w.push(p);var S={color:1,symbol:1};!y&&w.length===1&&!S.hasOwnProperty(d.type)&&(w[1]=w[0]),i(d,w)}function u(d){return{applyVisual:function(y,p,w){y=this.mapValueToVisual(y),w("color",d(p("color"),y))},_doMap:x([0,1])}}function l(d){var y=this.option.visual;return y[Math.round(A(d,[0,1],[0,y.length-1],!0))]||{}}function r(d){return function(y,p,w){w(d,this.mapValueToVisual(y))}}function s(d){var y=this.option.visual;return y[this.option.loop&&d!==b?d%y.length:d]}function c(){return this.option.visual[0]}function x(d){return{linear:function(y){return A(y,d,this.option.visual,!0)},category:s,piecewise:function(y,p){var w=a.call(this,p);return w==null&&(w=A(y,d,this.option.visual,!0)),w},fixed:c}}function a(d){var y=this.option,p=y.pieceList;if(y.hasSpecialVisual){var w=C.findPieceIndex(d,p),S=p[w];if(S&&S.visual)return S.visual[this.type]}}function i(d,y){return d.visual=y,d.type==="color"&&(d.parsedVisual=M.map(y,function(p){return F.parse(p)})),y}var n={linear:function(d){return A(d,this.option.dataExtent,[0,1],!0)},piecewise:function(d){var y=this.option.pieceList,p=C.findPieceIndex(d,y,!0);if(p!=null)return A(p,[0,y.length-1],[0,1],!0)},category:function(d){var y=this.option.categories?this.option.categoryMap[d]:d;return y??b},fixed:M.noop};C.listVisualTypes=function(){var d=[];return M.each(f,function(y,p){d.push(p)}),d},C.addVisualHandler=function(d,y){f[d]=y},C.isValidType=function(d){return f.hasOwnProperty(d)},C.eachVisual=function(d,y,p){M.isObject(d)?M.each(d,y,p):y.call(p,d)},C.mapVisual=function(d,y,p){var w,S=M.isArray(d)?[]:M.isObject(d)?{}:(w=!0,null);return C.eachVisual(d,function(O,B){var k=y.call(p,O,B);w?S=k:S[B]=k}),S},C.retrieveVisuals=function(d){var y={},p;return d&&T(f,function(w,S){d.hasOwnProperty(S)&&(y[S]=d[S],p=!0)}),p?y:null},C.prepareVisualTypes=function(d){if(D(d)){var y=[];T(d,function(p,w){y.push(w)}),d=y}else if(M.isArray(d))d=d.slice();else return[];return d.sort(function(p,w){return w==="color"&&p!=="color"&&p.indexOf("color")===0?1:-1}),d},C.dependsOn=function(d,y){return y==="color"?!!(d&&d.indexOf(y)===0):d===y},C.findPieceIndex=function(d,y,p){for(var w,S=1/0,O=0,B=y.length;O<B;O++){var k=y[O].value;if(k!=null){if(k===d||typeof k=="string"&&k===d+"")return O;p&&N(k,O)}}for(var O=0,B=y.length;O<B;O++){var P=y[O],L=P.interval,E=P.close;if(L){if(L[0]===-1/0){if(h(E[1],d,L[1]))return O}else if(L[1]===1/0){if(h(E[0],L[0],d))return O}else if(h(E[0],L[0],d)&&h(E[1],d,L[1]))return O;p&&N(L[0],O),p&&N(L[1],O)}}if(p)return d===1/0?y.length-1:d===-1/0?0:w;function N(I,G){var W=Math.abs(I-d);W<S&&(S=W,w=G)}};function h(d,y,p){return d?y<=p:y<p}var g=C;X.exports=g},59117:function(X,z,e){var M=e(31879),F=e(16923),R=e(58708),A=R.retrieveRawValue;function T(D,b){var C=b.getModel("aria");if(C.get("show")){if(C.get("description")){D.setAttribute("aria-label",C.get("description"));return}}else return;var f=0;b.eachSeries(function(n,h){++f},this);var v=C.get("data.maxCount")||10,m=C.get("series.maxCount")||10,o=Math.min(f,m),u;if(f<1)return;var l=a();l?u=c(x("general.withTitle"),{title:l}):u=x("general.withoutTitle");var r=[],s=f>1?"series.multiple.prefix":"series.single.prefix";u+=c(x(s),{seriesCount:f}),b.eachSeries(function(n,h){if(h<o){var g,d=n.get("name"),y="series."+(f>1?"multiple":"single")+".";g=x(d?y+"withName":y+"withoutName"),g=c(g,{seriesId:n.seriesIndex,seriesName:n.get("name"),seriesType:i(n.subType)});var p=n.getData();window.data=p,p.count()>v?g+=c(x("data.partialData"),{displayCnt:v}):g+=x("data.allData");for(var w=[],S=0;S<p.count();S++)if(S<v){var O=p.getName(S),B=A(p,S);w.push(c(x(O?"data.withName":"data.withoutName"),{name:O,value:B}))}g+=w.join(x("data.separator.middle"))+x("data.separator.end"),r.push(g)}}),u+=r.join(x("series.multiple.separator.middle"))+x("series.multiple.separator.end"),D.setAttribute("aria-label",u);function c(n,h){if(typeof n!="string")return n;var g=n;return M.each(h,function(d,y){g=g.replace(new RegExp("\\{\\s*"+y+"\\s*\\}","g"),d)}),g}function x(n){var h=C.get(n);if(h==null){for(var g=n.split("."),d=F.aria,y=0;y<g.length;++y)d=d[g[y]];return d}else return h}function a(){var n=b.getModel("title").option;return n&&n.length&&(n=n[0]),n&&n.text}function i(n){return F.series.typeNames[n]||"\u81EA\u5B9A\u4E49\u56FE"}}X.exports=T},31310:function(X,z,e){var M=e(31879),F=M.createHashMap;function R(A){return{getTargetSeries:function(T){var D={},b=F();return T.eachSeriesByType(A,function(C){C.__paletteScope=D,b.set(C.uid,C)}),b},reset:function(T,D){var b=T.getRawData(),C={},f=T.getData();f.each(function(v){var m=f.getRawIndex(v);C[m]=v}),b.each(function(v){var m=C[v],o=m!=null&&f.getItemVisual(m,"color",!0),u=m!=null&&f.getItemVisual(m,"borderColor",!0),l;if((!o||!u)&&(l=b.getItemModel(v)),!o){var r=l.get("itemStyle.color")||T.getColorFromPalette(b.getName(v)||v+"",T.__paletteScope,b.count());m!=null&&f.setItemVisual(m,"color",r)}if(!u){var s=l.get("itemStyle.borderColor");m!=null&&f.setItemVisual(m,"borderColor",s)}})}}}X.exports=R},64155:function(X,z,e){var M=e(21260),F=e(31879),R=F.isFunction,A={createOnAllSeries:!0,performRawSeries:!0,reset:function(T,D){var b=T.getData(),C=(T.visualColorAccessPath||"itemStyle.color").split("."),f=T.get(C),v=R(f)&&!(f instanceof M)?f:null;(!f||v)&&(f=T.getColorFromPalette(T.name,null,D.getSeriesCount())),b.setVisual("color",f);var m=(T.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),o=T.get(m);if(b.setVisual("borderColor",o),!D.isSeriesFiltered(T)){v&&b.each(function(l){b.setItemVisual(l,"color",v(T.getDataParams(l)))});var u=function(l,r){var s=l.getItemModel(r),c=s.get(C,!0),x=s.get(m,!0);c!=null&&l.setItemVisual(r,"color",c),x!=null&&l.setItemVisual(r,"borderColor",x)};return{dataEach:b.hasItemOption?u:null}}}};X.exports=A},41124:function(X,z,e){var M=e(31879),F=M.isFunction;function R(A,T,D){return{seriesType:A,performRawSeries:!0,reset:function(b,C,f){var v=b.getData(),m=b.get("symbol"),o=b.get("symbolSize"),u=b.get("symbolKeepAspect"),l=b.get("symbolRotate"),r=F(m),s=F(o),c=F(l),x=r||s||c,a=!r&&m?m:T,i=s?null:o,n=c?null:n;if(v.setVisual({legendSymbol:D||a,symbol:a,symbolSize:i,symbolKeepAspect:u,symbolRotate:l}),C.isSeriesFiltered(b))return;function h(g,d){if(x){var y=b.getRawValue(d),p=b.getDataParams(d);r&&g.setItemVisual(d,"symbol",m(y,p)),s&&g.setItemVisual(d,"symbolSize",o(y,p)),c&&g.setItemVisual(d,"symbolRotate",l(y,p))}if(g.hasItemOption){var w=g.getItemModel(d),S=w.getShallow("symbol",!0),O=w.getShallow("symbolSize",!0),B=w.getShallow("symbolRotate",!0),k=w.getShallow("symbolKeepAspect",!0);S!=null&&g.setItemVisual(d,"symbol",S),O!=null&&g.setItemVisual(d,"symbolSize",O),B!=null&&g.setItemVisual(d,"symbolRotate",B),k!=null&&g.setItemVisual(d,"symbolKeepAspect",k)}}return{dataEach:v.hasItemOption||x?h:null}}}}X.exports=R},19508:function(X,z,e){var M=e(31879),F={get:function(T,D,b){var C=M.clone((R[T]||{})[D]);return b&&M.isArray(C)?C[C.length-1]:C}},R={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},A=F;X.exports=A},36193:function(X,z,e){var M=e(31879),F=e(58796),R=M.each;function A(f){if(f){for(var v in f)if(f.hasOwnProperty(v))return!0}}function T(f,v,m){var o={};return R(v,function(l){var r=o[l]=u();R(f[l],function(s,c){if(F.isValidType(c)){var x={type:c,visual:s};m&&m(x,l),r[c]=new F(x),c==="opacity"&&(x=M.clone(x),x.type="colorAlpha",r.__hidden.__alphaForOpacity=new F(x))}})}),o;function u(){var l=function(){};l.prototype.__hidden=l.prototype;var r=new l;return r}}function D(f,v,m){var o;M.each(m,function(u){v.hasOwnProperty(u)&&A(v[u])&&(o=!0)}),o&&M.each(m,function(u){v.hasOwnProperty(u)&&A(v[u])?f[u]=M.clone(v[u]):delete f[u]})}function b(f,v,m,o,u,l){var r={};M.each(f,function(i){var n=F.prepareVisualTypes(v[i]);r[i]=n});var s;function c(i){return m.getItemVisual(s,i)}function x(i,n){m.setItemVisual(s,i,n)}l==null?m.each(a):m.each([l],a);function a(i,n){s=l==null?i:n;var h=m.getRawDataItem(s);if(!(h&&h.visualMap===!1))for(var g=o.call(u,i),d=v[g],y=r[g],p=0,w=y.length;p<w;p++){var S=y[p];d[S]&&d[S].applyVisual(i,c,x)}}}function C(f,v,m,o){var u={};M.each(f,function(r){var s=F.prepareVisualTypes(v[r]);u[r]=s});function l(r,s){o!=null&&(o=s.getDimension(o));function c(S){return s.getItemVisual(a,S)}function x(S,O){s.setItemVisual(a,S,O)}for(var a;(a=r.next())!=null;){var i=s.getRawDataItem(a);if(!(i&&i.visualMap===!1))for(var n=o!=null?s.get(o,a,!0):a,h=m(n),g=v[h],d=u[h],y=0,p=d.length;y<p;y++){var w=d[y];g[w]&&g[w].applyVisual(n,c,x)}}}return{progress:l}}z.createVisualMappings=T,z.replaceVisualOption=D,z.applyVisual=b,z.incrementalApplyVisual=C},36034:function(X,z,e){"use strict";e.r(z),e.d(z,{BasemapLayer:function(){return ce},DynamicMapLayer:function(){return De},FeatureLayer:function(){return Be},FeatureLayerService:function(){return te},FeatureManager:function(){return be},Find:function(){return ct},Identify:function(){return Ct},IdentifyFeatures:function(){return Yt},IdentifyImage:function(){return gt},ImageMapLayer:function(){return de},ImageService:function(){return Ht},MapService:function(){return Ot},Query:function(){return Tt},RasterLayer:function(){return re},Service:function(){return ot},Support:function(){return A},Task:function(){return Nt},TiledMapLayer:function(){return It},Util:function(){return wt},VERSION:function(){return Ze},basemapLayer:function(){return ge},dynamicMapLayer:function(){return Ie},featureLayer:function(){return Ue},featureLayerService:function(){return ie},find:function(){return vt},get:function(){return c},identify:function(){return jt},identifyFeatures:function(){return Zt},identifyImage:function(){return dt},imageMapLayer:function(){return Se},imageService:function(){return Kt},mapService:function(){return St},options:function(){return D},post:function(){return u},query:function(){return mt},request:function(){return r},service:function(){return it},task:function(){return Lt},tiledMapLayer:function(){return Wt}});var M={i8:"3.0.12"},F=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,R=document.documentElement.style.pointerEvents==="",A={cors:F,pointerEvents:R},T=null,D={attributionWidthOffset:55},b=null,C=e(3852),f=e(49500),v=0;function m(_){var at="";_.f=_.f||"json";for(var xt in _)if(Object.prototype.hasOwnProperty.call(_,xt)){var bt=_[xt],Bt=Object.prototype.toString.call(bt),Qt;at.length&&(at+="&"),Bt==="[object Array]"?Qt=Object.prototype.toString.call(bt[0])==="[object Object]"?JSON.stringify(bt):bt.join(","):Bt==="[object Object]"?Qt=JSON.stringify(bt):Bt==="[object Date]"?Qt=bt.valueOf():Qt=bt,at+=encodeURIComponent(xt)+"="+encodeURIComponent(Qt)}const ue="%27";return at.replaceAll("'",ue)}function o(_,at){var xt=new window.XMLHttpRequest;return xt.onerror=function(bt){xt.onreadystatechange=C.Util.falseFn,_.call(at,{error:{code:500,message:"XMLHttpRequest error"}},null)},xt.onreadystatechange=function(){var bt,Bt;if(xt.readyState===4){try{bt=JSON.parse(xt.responseText)}catch{bt=null,Bt={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!Bt&&bt.error&&(Bt=bt.error,bt=null),xt.onerror=C.Util.falseFn,_.call(at,Bt,bt)}},xt.ontimeout=function(){this.onerror()},xt}function u(_,at,xt,bt){var Bt=o(xt,bt);return Bt.open("POST",_),typeof bt<"u"&&bt!==null&&typeof bt.options<"u"&&(Bt.timeout=bt.options.timeout),Bt.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),Bt.send(m(at)),Bt}function l(_,at,xt,bt){var Bt=o(xt,bt);return Bt.open("GET",_+"?"+m(at),!0),typeof bt<"u"&&bt!==null&&typeof bt.options<"u"&&(Bt.timeout=bt.options.timeout,bt.options.withCredentials&&(Bt.withCredentials=!0)),Bt.send(null),Bt}function r(_,at,xt,bt){var Bt=m(at),Qt=o(xt,bt),ue=(_+"?"+Bt).length;if(ue<=2e3&&A.cors?Qt.open("GET",_+"?"+Bt):ue>2e3&&A.cors&&(Qt.open("POST",_),Qt.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),typeof bt<"u"&&bt!==null&&typeof bt.options<"u"&&(Qt.timeout=bt.options.timeout,bt.options.withCredentials&&(Qt.withCredentials=!0)),ue<=2e3&&A.cors)Qt.send(null);else if(ue>2e3&&A.cors)Qt.send(Bt);else{if(ue<=2e3&&!A.cors)return s(_,at,xt,bt);x("a request to "+_+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");return}return Qt}function s(_,at,xt,bt){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var Bt="c"+v;at.callback="window._EsriLeafletCallbacks."+Bt,window._EsriLeafletCallbacks[Bt]=function(ue){if(window._EsriLeafletCallbacks[Bt]!==!0){var Ce,Te=Object.prototype.toString.call(ue);Te==="[object Object]"||Te==="[object Array]"||(Ce={error:{code:500,message:"Expected array or object as JSONP response"}},ue=null),!Ce&&ue.error&&(Ce=ue,ue=null),xt.call(bt,Ce,ue),window._EsriLeafletCallbacks[Bt]=!0}};var Qt=C.DomUtil.create("script",null,document.body);return Qt.type="text/javascript",Qt.src=_+"?"+m(at),Qt.id=Bt,Qt.onerror=function(ue){if(ue&&window._EsriLeafletCallbacks[Bt]!==!0){var Ce={error:{code:500,message:"An unknown error occurred"}};xt.call(bt,Ce),window._EsriLeafletCallbacks[Bt]=!0}},C.DomUtil.addClass(Qt,"esri-leaflet-jsonp"),v++,{id:Bt,url:Qt.src,abort:function(){window._EsriLeafletCallbacks._callback[Bt]({code:0,message:"Request aborted."})}}}var c=A.cors?l:s;c.CORS=l,c.JSONP=s;function x(){f&&f.warn&&f.warn.apply(f,arguments)}var a={request:r,get:c,post:u},i=a,n=e(49500);/* @preserve
* @terraformer/arcgis - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:48 GMT-0700 (Pacific Daylight Time)
*/var h=function(at,xt,bt,Bt){var Qt=(Bt[0]-bt[0])*(at[1]-bt[1])-(Bt[1]-bt[1])*(at[0]-bt[0]),ue=(xt[0]-at[0])*(at[1]-bt[1])-(xt[1]-at[1])*(at[0]-bt[0]),Ce=(Bt[1]-bt[1])*(xt[0]-at[0])-(Bt[0]-bt[0])*(xt[1]-at[1]);if(Ce!==0){var Te=Qt/Ce,He=ue/Ce;if(Te>=0&&Te<=1&&He>=0&&He<=1)return!0}return!1},g=function(at,xt){for(var bt=!1,Bt=-1,Qt=at.length,ue=Qt-1;++Bt<Qt;ue=Bt)(at[Bt][1]<=xt[1]&&xt[1]<at[ue][1]||at[ue][1]<=xt[1]&&xt[1]<at[Bt][1])&&xt[0]<(at[ue][0]-at[Bt][0])*(xt[1]-at[Bt][1])/(at[ue][1]-at[Bt][1])+at[Bt][0]&&(bt=!bt);return bt},d=function(at,xt){for(var bt=0;bt<at.length;bt++)if(at[bt]!==xt[bt])return!1;return!0},y=function(at,xt){for(var bt=0;bt<at.length-1;bt++)for(var Bt=0;Bt<xt.length-1;Bt++)if(h(at[bt],at[bt+1],xt[Bt],xt[Bt+1]))return!0;return!1},p=function(at){return d(at[0],at[at.length-1])||at.push(at[0]),at},w=function(at){var xt=0,bt=0,Bt=at.length,Qt=at[bt],ue;for(bt;bt<Bt-1;bt++)ue=at[bt+1],xt+=(ue[0]-Qt[0])*(ue[1]+Qt[1]),Qt=ue;return xt>=0},S=function(at){var xt={};for(var bt in at)at.hasOwnProperty(bt)&&(xt[bt]=at[bt]);return xt},O=function(at,xt){var bt=y(at,xt),Bt=g(at,xt[0]);return!!(!bt&&Bt)},B=function(at){for(var xt=[],bt=[],Bt,Qt,ue,Ce=0;Ce<at.length;Ce++){var Te=p(at[Ce].slice(0));if(!(Te.length<4))if(w(Te)){var He=[Te.slice().reverse()];xt.push(He)}else bt.push(Te.slice().reverse())}for(var Vt=[];bt.length;){ue=bt.pop();var qt=!1;for(Bt=xt.length-1;Bt>=0;Bt--)if(Qt=xt[Bt][0],O(Qt,ue)){xt[Bt].push(ue),qt=!0;break}qt||Vt.push(ue)}for(;Vt.length;){ue=Vt.pop();var ae=!1;for(Bt=xt.length-1;Bt>=0;Bt--)if(Qt=xt[Bt][0],y(Qt,ue)){xt[Bt].push(ue),ae=!0;break}ae||xt.push([ue.reverse()])}return xt.length===1?{type:"Polygon",coordinates:xt[0]}:{type:"MultiPolygon",coordinates:xt}},k=function(at,xt){for(var bt=xt?[xt,"OBJECTID","FID"]:["OBJECTID","FID"],Bt=0;Bt<bt.length;Bt++){var Qt=bt[Bt];if(Qt in at&&(typeof at[Qt]=="string"||typeof at[Qt]=="number"))return at[Qt]}throw Error("No valid id attribute found")},P=function _(at,xt){var bt={};if(at.features){bt.type="FeatureCollection",bt.features=[];for(var Bt=0;Bt<at.features.length;Bt++)bt.features.push(_(at.features[Bt],xt))}if(typeof at.x=="number"&&typeof at.y=="number"&&(bt.type="Point",bt.coordinates=[at.x,at.y],typeof at.z=="number"&&bt.coordinates.push(at.z)),at.points&&(bt.type="MultiPoint",bt.coordinates=at.points.slice(0)),at.paths&&(at.paths.length===1?(bt.type="LineString",bt.coordinates=at.paths[0].slice(0)):(bt.type="MultiLineString",bt.coordinates=at.paths.slice(0))),at.rings&&(bt=B(at.rings.slice(0))),typeof at.xmin=="number"&&typeof at.ymin=="number"&&typeof at.xmax=="number"&&typeof at.ymax=="number"&&(bt.type="Polygon",bt.coordinates=[[[at.xmax,at.ymax],[at.xmin,at.ymax],[at.xmin,at.ymin],[at.xmax,at.ymin],[at.xmax,at.ymax]]]),(at.geometry||at.attributes)&&(bt.type="Feature",bt.geometry=at.geometry?_(at.geometry):null,bt.properties=at.attributes?S(at.attributes):null,at.attributes))try{bt.id=k(at.attributes,xt)}catch{}return JSON.stringify(bt.geometry)===JSON.stringify({})&&(bt.geometry=null),at.spatialReference&&at.spatialReference.wkid&&at.spatialReference.wkid!==4326&&n.warn("Object converted in non-standard crs - "+JSON.stringify(at.spatialReference)),bt},L=function(at){var xt=[],bt=at.slice(0),Bt=p(bt.shift().slice(0));if(Bt.length>=4){w(Bt)||Bt.reverse(),xt.push(Bt);for(var Qt=0;Qt<bt.length;Qt++){var ue=p(bt[Qt].slice(0));ue.length>=4&&(w(ue)&&ue.reverse(),xt.push(ue))}}return xt},E=function(at){for(var xt=[],bt=0;bt<at.length;bt++)for(var Bt=L(at[bt]),Qt=Bt.length-1;Qt>=0;Qt--){var ue=Bt[Qt].slice(0);xt.push(ue)}return xt},N=function _(at,xt){xt=xt||"OBJECTID";var bt={wkid:4326},Bt={},Qt;switch(at.type){case"Point":Bt.x=at.coordinates[0],Bt.y=at.coordinates[1],at.coordinates[2]!=null&&(Bt.z=at.coordinates[2]),Bt.spatialReference=bt;break;case"MultiPoint":Bt.points=at.coordinates.slice(0),at.coordinates[0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"LineString":Bt.paths=[at.coordinates.slice(0)],at.coordinates[0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"MultiLineString":Bt.paths=at.coordinates.slice(0),at.coordinates[0][0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"Polygon":Bt.rings=L(at.coordinates.slice(0)),at.coordinates[0][0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"MultiPolygon":Bt.rings=E(at.coordinates.slice(0)),at.coordinates[0][0][0][2]!=null&&(Bt.hasZ=!0),Bt.spatialReference=bt;break;case"Feature":at.geometry&&(Bt.geometry=_(at.geometry,xt)),Bt.attributes=at.properties?S(at.properties):{},at.id&&(Bt.attributes[xt]=at.id);break;case"FeatureCollection":for(Bt=[],Qt=0;Qt<at.features.length;Qt++)Bt.push(_(at.features[Qt],xt));break;case"GeometryCollection":for(Bt=[],Qt=0;Qt<at.geometries.length;Qt++)Bt.push(_(at.geometries[Qt],xt));break}return Bt},I='Powered by <a href="https://www.esri.com">Esri</a>';function G(_,at){return N(_,at)}function W(_,at){return P(_,at)}function Z(_){if(_.xmin!=="NaN"&&_.ymin!=="NaN"&&_.xmax!=="NaN"&&_.ymax!=="NaN"){var at=(0,C.latLng)(_.ymin,_.xmin),xt=(0,C.latLng)(_.ymax,_.xmax);return(0,C.latLngBounds)(at,xt)}else return null}function U(_){return _=(0,C.latLngBounds)(_),{xmin:_.getSouthWest().lng,ymin:_.getSouthWest().lat,xmax:_.getNorthEast().lng,ymax:_.getNorthEast().lat,spatialReference:{wkid:4326}}}var H=/^(OBJECTID|FID|OID|ID)$/i;function V(_){var at;if(_.objectIdFieldName)at=_.objectIdFieldName;else if(_.fields){for(var xt=0;xt<=_.fields.length-1;xt++)if(_.fields[xt].type==="esriFieldTypeOID"){at=_.fields[xt].name;break}if(!at){for(xt=0;xt<=_.fields.length-1;xt++)if(_.fields[xt].name.match(H)){at=_.fields[xt].name;break}}}return at}function Y(_){for(var at in _.attributes)if(at.match(H))return at}function $(_,at){var xt,bt=_.features||_.results,Bt=bt&&bt.length;at?xt=at:xt=V(_);var Qt={type:"FeatureCollection",features:[]};if(Bt)for(var ue=bt.length-1;ue>=0;ue--){var Ce=W(bt[ue],xt||Y(bt[ue]));Qt.features.push(Ce)}return Qt}function K(_){return _=C.Util.trim(_),_[_.length-1]!=="/"&&(_+="/"),_}function J(_){if(_.url.indexOf("?")!==-1){_.requestParams=_.requestParams||{};var at=_.url.substring(_.url.indexOf("?")+1);_.url=_.url.split("?")[0],_.requestParams=JSON.parse('{"'+decodeURI(at).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return _.url=K(_.url.split("?")[0]),_}function Q(_){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(_)}function et(_){var at;switch(_){case"Point":at="esriGeometryPoint";break;case"MultiPoint":at="esriGeometryMultipoint";break;case"LineString":at="esriGeometryPolyline";break;case"MultiLineString":at="esriGeometryPolyline";break;case"Polygon":at="esriGeometryPolygon";break;case"MultiPolygon":at="esriGeometryPolygon";break}return at}function nt(_){return _.getSize().x-D.attributionWidthOffset+"px"}function st(_){if(_.attributionControl){if(_.attributionControl._esriAttributionLayerCount||(_.attributionControl._esriAttributionLayerCount=0),_.attributionControl._esriAttributionLayerCount===0){if(!_.attributionControl._esriAttributionAddedOnce){var at=document.createElement("style");at.type="text/css",at.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(at);var xt=document.createElement("style");xt.type="text/css",xt.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+nt(_)+";}",document.getElementsByTagName("head")[0].appendChild(xt),_.on("resize",function(bt){_.attributionControl&&(_.attributionControl._container.style.maxWidth=nt(bt.target))}),_.attributionControl._esriAttributionAddedOnce=!0}C.DomUtil.addClass(_.attributionControl._container,"esri-truncated-attribution:hover"),C.DomUtil.addClass(_.attributionControl._container,"esri-truncated-attribution")}_.attributionControl._esriAttributionLayerCount=_.attributionControl._esriAttributionLayerCount+1}}function ut(_){_.attributionControl&&(_.attributionControl._esriAttributionLayerCount&&_.attributionControl._esriAttributionLayerCount===1&&(C.DomUtil.removeClass(_.attributionControl._container,"esri-truncated-attribution:hover"),C.DomUtil.removeClass(_.attributionControl._container,"esri-truncated-attribution")),_.attributionControl._esriAttributionLayerCount=_.attributionControl._esriAttributionLayerCount-1)}function rt(_){var at={geometry:null,geometryType:null};if(_ instanceof C.LatLngBounds)return at.geometry=U(_),at.geometryType="esriGeometryEnvelope",at;if(_.getLatLng&&(_=_.getLatLng()),_ instanceof C.LatLng&&(_={type:"Point",coordinates:[_.lng,_.lat]}),_ instanceof C.GeoJSON&&(_=_.getLayers()[0].feature.geometry,at.geometry=G(_),at.geometryType=et(_.type)),_.toGeoJSON&&(_=_.toGeoJSON()),_.type==="Feature"&&(_=_.geometry),_.type==="Point"||_.type==="LineString"||_.type==="Polygon"||_.type==="MultiPolygon")return at.geometry=G(_),at.geometryType=et(_.type),at;x("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function ht(_,at){A.cors&&r(_,{},C.Util.bind(function(xt,bt){if(!xt){at._esriAttributions=[];for(var Bt=0;Bt<bt.contributors.length;Bt++)for(var Qt=bt.contributors[Bt],ue=0;ue<Qt.coverageAreas.length;ue++){var Ce=Qt.coverageAreas[ue],Te=(0,C.latLng)(Ce.bbox[0],Ce.bbox[1]),He=(0,C.latLng)(Ce.bbox[2],Ce.bbox[3]);at._esriAttributions.push({attribution:Qt.attribution,score:Ce.score,bounds:(0,C.latLngBounds)(Te,He),minZoom:Ce.zoomMin,maxZoom:Ce.zoomMax})}at._esriAttributions.sort(function(qt,ae){return ae.score-qt.score});var Vt={target:at};Pt(Vt)}},this))}function Pt(_){var at=_.target,xt=at._esriAttributions;if(!(!at||!at.attributionControl)){var bt=at.attributionControl._container.querySelector(".esri-dynamic-attribution");if(bt&&xt){for(var Bt="",Qt=at.getBounds(),ue=(0,C.latLngBounds)(Qt.getSouthWest().wrap(),Qt.getNorthEast().wrap()),Ce=at.getZoom(),Te=0;Te<xt.length;Te++){var He=xt[Te],Vt=He.attribution;!Bt.match(Vt)&&He.bounds.intersects(ue)&&Ce>=He.minZoom&&Ce<=He.maxZoom&&(Bt+=", "+Vt)}Bt=I+" | "+Bt.substr(2),bt.innerHTML=Bt,bt.style.maxWidth=nt(at),at.fire("attributionupdated",{attribution:Bt})}}}var wt={warn:x,cleanUrl:K,getUrlParams:J,isArcgisOnline:Q,geojsonTypeToArcGIS:et,responseToFeatureCollection:$,geojsonToArcGIS:G,arcgisToGeoJSON:W,boundsToExtent:U,extentToBounds:Z,calcAttributionWidth:nt,setEsriAttribution:st,removeEsriAttribution:ut,_setGeometry:rt,_getAttributionData:ht,_updateMapAttribution:Pt,_findIdAttributeFromFeature:Y,_findIdAttributeFromResponse:V},At=null,Nt=C.Class.extend({options:{proxy:!1,useCors:F},generateSetter:function(_,at){return C.Util.bind(function(xt){return this.params[_]=xt,this},at)},initialize:function(_){if(_.request&&_.options?(this._service=_,C.Util.setOptions(this,_.options)):(C.Util.setOptions(this,_),this.options.url=K(_.url)),this.params=C.Util.extend({},this.params||{}),this.setters)for(var at in this.setters){var xt=this.setters[at];this[at]=this.generateSetter(xt,this)}},token:function(_){return this._service?this._service.authenticate(_):this.params.token=_,this},apikey:function(_){return this.token(_)},format:function(_){return this.params.returnUnformattedValues=!_,this},request:function(_,at){return this.options.requestParams&&C.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,_,at):this._request("request",this.path,this.params,_,at)},_request:function(_,at,xt,bt,Bt){var Qt=this.options.proxy?this.options.proxy+"?"+this.options.url+at:this.options.url+at;return(_==="get"||_==="request")&&!this.options.useCors?i.get.JSONP(Qt,xt,bt,Bt):i[_](Qt,xt,bt,Bt)}});function Lt(_){return _=J(_),new Nt(_)}var Rt=null,Tt=Nt.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(_){return this._setGeometryParams(_),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(_,at){return _=(0,C.latLng)(_),this.params.geometry=[_.lng,_.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=at,this.params.inSR=4326,this},where:function(_){return this.params.where=_,this},between:function(_,at){return this.params.time=[_.valueOf(),at.valueOf()],this},simplify:function(_,at){var xt=Math.abs(_.getBounds().getWest()-_.getBounds().getEast());return this.params.maxAllowableOffset=xt/_.getSize().y*at,this},orderBy:function(_,at){return at=at||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[_,at].join(" "),this},run:function(_,at){return this._cleanParams(),this.options.isModern||Q(this.options.url)&&this.options.isModern===void 0?(this.params.f="geojson",this.request(function(xt,bt){this._trapSQLerrors(xt),_.call(at,xt,bt,bt)},this)):this.request(function(xt,bt){this._trapSQLerrors(xt),_.call(at,xt,bt&&$(bt),bt)},this)},count:function(_,at){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(xt,bt){_.call(this,xt,bt&&bt.count,bt)},at)},ids:function(_,at){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(xt,bt){_.call(this,xt,bt&&bt.objectIds,bt)},at)},bounds:function(_,at){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(xt,bt){bt&&bt.extent&&Z(bt.extent)?_.call(at,xt,Z(bt.extent),bt):(xt={message:"Invalid Bounds"},_.call(at,xt,null,bt))},at)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(_){var at=(0,C.point)(_);return this.params.pixelSize=[at.x,at.y],this},layer:function(_){return this.path=_+"/query",this},_trapSQLerrors:function(_){_&&_.code==="400"&&x("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(_){this.params.inSR=4326;var at=rt(_);this.params.geometry=at.geometry,this.params.geometryType=at.geometryType}});function mt(_){return new Tt(_)}var Ft=mt,ct=Nt.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(_,at){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[_,at].join(":"),this},simplify:function(_,at){var xt=Math.abs(_.getBounds().getWest()-_.getBounds().getEast());return this.params.maxAllowableOffset=xt/_.getSize().y*at,this},run:function(_,at){return this.request(function(xt,bt){_.call(at,xt,bt&&$(bt),bt)},at)}});function vt(_){return new ct(_)}var Dt=vt,Ct=Nt.extend({path:"identify",between:function(_,at){return this.params.time=[_.valueOf(),at.valueOf()],this}});function jt(_){return new Ct(_)}var zt=null,Yt=Ct.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(_){var at=U(_.getBounds()),xt=_.getSize();return this.params.imageDisplay=[xt.x,xt.y,96],this.params.mapExtent=[at.xmin,at.ymin,at.xmax,at.ymax],this},at:function(_){return _.length===2&&(_=(0,C.latLng)(_)),this._setGeometryParams(_),this},layerDef:function(_,at){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[_,at].join(":"),this},simplify:function(_,at){var xt=Math.abs(_.getBounds().getWest()-_.getBounds().getEast());return this.params.maxAllowableOffset=xt/_.getSize().y*at,this},run:function(_,at){return this.request(function(xt,bt){if(xt)_.call(at,xt,void 0,bt);else{var Bt=$(bt);bt.results=bt.results.reverse();for(var Qt=0;Qt<Bt.features.length;Qt++){var ue=Bt.features[Qt];ue.layerId=bt.results[Qt].layerId}_.call(at,void 0,Bt,bt)}})},_setGeometryParams:function(_){var at=rt(_);this.params.geometry=at.geometry,this.params.geometryType=at.geometryType}});function Zt(_){return new Yt(_)}var ft=Zt,gt=Ct.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(_){return _=(0,C.latLng)(_),this.params.geometry=JSON.stringify({x:_.lng,y:_.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(_,at){return this.request(function(xt,bt){_.call(at,xt,bt&&this._responseToGeoJSON(bt),bt)},this)},_responseToGeoJSON:function(_){var at=_.location,xt=_.catalogItems,bt=_.catalogItemVisibilities,Bt={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[at.x,at.y]},crs:{type:"EPSG",properties:{code:at.spatialReference.wkid}},properties:{OBJECTID:_.objectId,name:_.name,value:_.value},id:_.objectId}};if(_.properties&&_.properties.Values&&(Bt.pixel.properties.values=_.properties.Values),xt&&xt.features&&(Bt.catalogItems=$(xt),bt&&bt.length===Bt.catalogItems.features.length))for(var Qt=bt.length-1;Qt>=0;Qt--)Bt.catalogItems.features[Qt].properties.catalogItemVisibility=bt[Qt];return Bt}});function dt(_){return new gt(_)}var lt=dt,ot=C.Evented.extend({options:{proxy:!1,useCors:F,timeout:0},initialize:function(_){_=_||{},this._requestQueue=[],this._authenticating=!1,C.Util.setOptions(this,_),this.options.url=K(this.options.url)},get:function(_,at,xt,bt){return this._request("get",_,at,xt,bt)},post:function(_,at,xt,bt){return this._request("post",_,at,xt,bt)},request:function(_,at,xt,bt){return this._request("request",_,at,xt,bt)},metadata:function(_,at){return this._request("get","",{},_,at)},authenticate:function(_){return this._authenticating=!1,this.options.token=_,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(_){this.options.timeout=_},_request:function(_,at,xt,bt,Bt){this.fire("requeststart",{url:this.options.url+at,params:xt,method:_},!0);var Qt=this._createServiceCallback(_,at,xt,bt,Bt);if(this.options.token&&(xt.token=this.options.token),this.options.requestParams&&C.Util.extend(xt,this.options.requestParams),this._authenticating)this._requestQueue.push([_,at,xt,bt,Bt]);else{var ue=this.options.proxy?this.options.proxy+"?"+this.options.url+at:this.options.url+at;return(_==="get"||_==="request")&&!this.options.useCors?i.get.JSONP(ue,xt,Qt,Bt):i[_](ue,xt,Qt,Bt)}},_createServiceCallback:function(_,at,xt,bt,Bt){return C.Util.bind(function(Qt,ue){Qt&&(Qt.code===499||Qt.code===498)&&(this._authenticating=!0,this._requestQueue.push([_,at,xt,bt,Bt]),this.fire("authenticationrequired",{authenticate:C.Util.bind(this.authenticate,this)},!0),Qt.authenticate=C.Util.bind(this.authenticate,this)),bt.call(Bt,Qt,ue),Qt?this.fire("requesterror",{url:this.options.url+at,params:xt,message:Qt.message,code:Qt.code,method:_},!0):this.fire("requestsuccess",{url:this.options.url+at,params:xt,response:ue,method:_},!0),this.fire("requestend",{url:this.options.url+at,params:xt,method:_},!0)},this)},_runQueue:function(){for(var _=this._requestQueue.length-1;_>=0;_--){var at=this._requestQueue[_],xt=at.shift();this[xt].apply(this,at)}this._requestQueue=[]}});function it(_){return _=J(_),new ot(_)}var yt=null,Ot=ot.extend({identify:function(){return ft(this)},find:function(){return Dt(this)},query:function(){return Ft(this)}});function St(_){return new Ot(_)}var Gt=St,Ht=ot.extend({query:function(){return Ft(this)},identify:function(){return lt(this)}});function Kt(_){return new Ht(_)}var Jt=Kt,te=ot.extend({options:{idAttribute:"OBJECTID"},query:function(){return Ft(this)},addFeature:function(_,at,xt){this.addFeatures(_,at,xt)},addFeatures:function(_,at,xt){for(var bt=_.features?_.features:[_],Bt=bt.length-1;Bt>=0;Bt--)delete bt[Bt].id;return _=G(_),_=bt.length>1?_:[_],this.post("addFeatures",{features:_},function(Qt,ue){var Ce=ue&&ue.addResults?ue.addResults.length>1?ue.addResults:ue.addResults[0]:void 0;at&&at.call(xt,Qt||ue.addResults[0].error,Ce)},xt)},updateFeature:function(_,at,xt){this.updateFeatures(_,at,xt)},updateFeatures:function(_,at,xt){var bt=_.features?_.features:[_];return _=G(_,this.options.idAttribute),_=bt.length>1?_:[_],this.post("updateFeatures",{features:_},function(Bt,Qt){var ue=Qt&&Qt.updateResults?Qt.updateResults.length>1?Qt.updateResults:Qt.updateResults[0]:void 0;at&&at.call(xt,Bt||Qt.updateResults[0].error,ue)},xt)},deleteFeature:function(_,at,xt){this.deleteFeatures(_,at,xt)},deleteFeatures:function(_,at,xt){return this.post("deleteFeatures",{objectIds:_},function(bt,Bt){var Qt=Bt&&Bt.deleteResults?Bt.deleteResults.length>1?Bt.deleteResults:Bt.deleteResults[0]:void 0;at&&at.call(xt,bt||Bt.deleteResults[0].error,Qt)},xt)}});function ie(_){return new te(_)}var oe=ie,he=e(49500),ne=window.location.protocol!=="https:"?"http:":"https:",ce=C.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:ne+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:R?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:R?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:R?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:R?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:R?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:R?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:R?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:ne+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:ne+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:ne+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(_,at){var xt;if(typeof _=="object"&&_.urlTemplate&&_.options)xt=_;else if(typeof _=="string"&&ce.TILES[_])xt=ce.TILES[_];else throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');var bt=C.Util.extend(xt.options,at);C.Util.setOptions(this,bt),this.options.ignoreDeprecationWarning||he.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&xt.urlTemplate.indexOf("token=")===-1&&(xt.urlTemplate+="?token="+this.options.token),this.options.proxy&&(xt.urlTemplate=this.options.proxy+"?"+xt.urlTemplate),C.TileLayer.prototype.initialize.call(this,xt.urlTemplate,bt)},onAdd:function(_){st(_),this.options.pane==="esri-labels"&&this._initPane(),this.options.attributionUrl&&ht((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,_),_.on("moveend",Pt),C.TileLayer.prototype.onAdd.call(this,_)},onRemove:function(_){ut(_),_.off("moveend",Pt),C.TileLayer.prototype.onRemove.call(this,_)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var _=this._map.createPane(this.options.pane);_.style.pointerEvents="none",_.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var _='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return _}});function ge(_,at){return new ce(_,at)}var Ae=null,It=C.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(_){_=C.Util.setOptions(this,_),_=J(_),this.tileUrl=(_.proxy?_.proxy+"?":"")+_.url+"tile/{z}/{y}/{x}"+(_.requestParams&&Object.keys(_.requestParams).length>0?C.Util.getParamString(_.requestParams):""),_.url.indexOf("{s}")!==-1&&_.subdomains&&(_.url=_.url.replace("{s}",_.subdomains[0])),this.service=Gt(_),this.service.addEventParent(this);var at=new RegExp(/tiles.arcgis(online)?\.com/g);at.test(_.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),_.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),C.TileLayer.prototype.initialize.call(this,this.tileUrl,_)},getTileUrl:function(_){var at=this._getZoomForUrl();return C.Util.template(this.tileUrl,C.Util.extend({s:this._getSubdomain(_),x:_.x,y:_.y,z:this._lodMap&&this._lodMap[at]!==void 0?this._lodMap[at]:at},this.options))},createTile:function(_,at){var xt=document.createElement("img");return C.DomEvent.on(xt,"load",C.Util.bind(this._tileOnLoad,this,at,xt)),C.DomEvent.on(xt,"error",C.Util.bind(this._tileOnError,this,at,xt)),this.options.crossOrigin&&(xt.crossOrigin=""),xt.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]!==void 0?xt.src=this.getTileUrl(_):this.once("lodmap",function(){xt.src=this.getTileUrl(_)},this),xt},onAdd:function(_){st(_),this._lodMap||this.metadata(function(at,xt){if(!at&&xt.spatialReference){var bt=xt.spatialReference.latestWkid||xt.spatialReference.wkid;if(!this.options.attribution&&_.attributionControl&&xt.copyrightText&&(this.options.attribution=xt.copyrightText,_.attributionControl.addAttribution(this.getAttribution())),_.options.crs===C.CRS.EPSG3857&&(bt===102100||bt===3857)){this._lodMap={};for(var Bt=xt.tileInfo.lods,Qt=It.MercatorZoomLevels,ue=0;ue<Bt.length;ue++){var Ce=Bt[ue];for(var Te in Qt){var He=Qt[Te];if(this._withinPercentage(Ce.resolution,He,this.options.zoomOffsetAllowance)){this._lodMap[Te]=Ce.level;break}}}this.fire("lodmap")}else _.options.crs&&_.options.crs.code&&_.options.crs.code.indexOf(bt)>-1||x("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/")}},this),C.TileLayer.prototype.onAdd.call(this,_)},onRemove:function(_){ut(_),C.TileLayer.prototype.onRemove.call(this,_)},metadata:function(_,at){return this.service.metadata(_,at),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(_){var at="?token="+_;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,at):this.tileUrl+at,this.options.token=_,this.service.authenticate(_),this},_withinPercentage:function(_,at,xt){var bt=Math.abs(_/at-1);return bt<xt}});function Wt(_,at){return new It(_,at)}var _t=null,ee=C.ImageOverlay.extend({onAdd:function(_){this._topLeft=_.getPixelBounds().min,C.ImageOverlay.prototype.onAdd.call(this,_)},_reset:function(){this._map.options.crs===C.CRS.EPSG3857?C.ImageOverlay.prototype._reset.call(this):C.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),re=C.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:F,attribution:null,interactive:!1,alt:""},onAdd:function(_){st(_),this.options.zIndex&&(this.options.position=null),this._update=C.Util.throttle(this._update,this.options.updateInterval,this),_.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?_.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(at,xt){!at&&!this.options.attribution&&_.attributionControl&&xt.copyrightText&&(this.options.attribution=xt.copyrightText,_.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(_){ut(_),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(_,at){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=(0,C.popup)(at),this._popupFunction=_,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(_){return this.options.zIndex=_,this._currentImage&&this._currentImage.setZIndex(_),this},_setAutoZIndex:function(_){if(this._currentImage){for(var at=this._currentImage.getPane().children,xt=-_(-1/0,1/0),bt=0,Bt=at.length,Qt;bt<Bt;bt++)Qt=at[bt].style.zIndex,at[bt]!==this._currentImage._image&&Qt&&(xt=_(xt,+Qt));isFinite(xt)&&(this.options.zIndex=xt+_(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(_){return this.options.opacity=_,this._currentImage&&this._currentImage.setOpacity(_),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(_,at){return this.options.from=_,this.options.to=at,this._update(),this},metadata:function(_,at){return this.service.metadata(_,at),this},authenticate:function(_){return this.service.authenticate(_),this},redraw:function(){this._update()},_renderImage:function(_,at,xt){if(this._map){if(xt&&(_="data:"+xt+";base64,"+_),!_)return;var bt=new ee(_,at,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),Bt=function(){this._map.removeLayer(bt),this.fire("error"),bt.off("load",Qt,this)},Qt=function(ue){if(bt.off("error",Bt,this),this._map){var Ce=ue.target,Te=this._currentImage;Ce._bounds.equals(at)&&Ce._bounds.equals(this._map.getBounds())?(this._currentImage=Ce,this.options.position==="front"?this.bringToFront():this.options.position==="back"&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),Te&&this._map&&this._map.removeLayer(Te),Te&&Te._map&&Te._map.removeLayer(Te)):this._map.removeLayer(Ce)}this.fire("load",{bounds:at})};bt.once("error",Bt,this),bt.once("load",Qt,this)}},_update:function(){if(this._map){var _=this._map.getZoom(),at=this._map.getBounds();if(!this._animatingZoom&&!(this._map._panTransition&&this._map._panTransition._inProgress)){if(_>this.options.maxZoom||_<this.options.minZoom){this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);return}var xt=this._buildExportParams();C.Util.extend(xt,this.options.requestParams),xt?(this._requestExport(xt,at),this.fire("loading",{bounds:at})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(_,at,xt,bt){if(_=(0,C.latLng)(_),this._shouldRenderPopup&&this._lastClick.equals(_)){var Bt=this._popupFunction(at,xt,bt);Bt&&this._popup.setLatLng(_).setContent(Bt).openOn(this._map)}},_resetPopupState:function(_){this._shouldRenderPopup=!1,this._lastClick=_.latlng},_calculateBbox:function(){var _=this._map.getPixelBounds(),at=this._map.unproject(_.getBottomLeft()),xt=this._map.unproject(_.getTopRight()),bt=this._map.options.crs.project(xt),Bt=this._map.options.crs.project(at),Qt=(0,C.bounds)(bt,Bt);return[Qt.getBottomLeft().x,Qt.getBottomLeft().y,Qt.getTopRight().x,Qt.getTopRight().y].join(",")},_calculateImageSize:function(){var _=this._map.getPixelBounds(),at=this._map.getSize(),xt=this._map.unproject(_.getBottomLeft()),bt=this._map.unproject(_.getTopRight()),Bt=this._map.latLngToLayerPoint(bt).y,Qt=this._map.latLngToLayerPoint(xt).y;return(Bt>0||Qt<at.y)&&(at.y=Qt-Bt),at.x+","+at.y}}),de=re.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(_){_=J(_),this.service=Jt(_),this.service.addEventParent(this),C.Util.setOptions(this,_)},setPixelType:function(_){return this.options.pixelType=_,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(_){return C.Util.isArray(_)?this.options.bandIds=_.join(","):this.options.bandIds=_.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(_,at){return C.Util.isArray(_)?this.options.noData=_.join(","):this.options.noData=_.toString(),at&&(this.options.noDataInterpretation=at),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(_){this.options.renderingRule=_,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(_){this.options.mosaicRule=_,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(_){var at=C.Util.bind(function(bt,Bt,Qt){bt||setTimeout(C.Util.bind(function(){this._renderPopup(_.latlng,bt,Bt,Qt)},this),300)},this),xt=this.identify().at(_.latlng);this.options.mosaicRule&&xt.setMosaicRule(this.options.mosaicRule),xt.run(at),this._shouldRenderPopup=!0,this._lastClick=_.latlng},_buildExportParams:function(){var _=parseInt(this._map.options.crs.code.split(":")[1],10),at={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:_,imageSR:_};return this.options.from&&this.options.to&&(at.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(at.pixelType=this.options.pixelType),this.options.interpolation&&(at.interpolation=this.options.interpolation),this.options.compressionQuality&&(at.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(at.bandIds=this.options.bandIds),(this.options.noData===0||this.options.noData)&&(at.noData=this.options.noData),this.options.noDataInterpretation&&(at.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(at.token=this.service.options.token),this.options.renderingRule&&(at.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(at.mosaicRule=JSON.stringify(this.options.mosaicRule)),at},_requestExport:function(_,at){if(this.options.f==="json")this.service.request("exportImage",_,function(bt,Bt){bt||(this.options.token&&(Bt.href+="?token="+this.options.token),this.options.proxy&&(Bt.href=this.options.proxy+"?"+Bt.href),this._renderImage(Bt.href,at))},this);else{_.f="image";var xt=this.options.url+"exportImage"+C.Util.getParamString(_);this.options.proxy&&(xt=this.options.proxy+"?"+xt),this._renderImage(xt,at)}}});function Se(_,at){return new de(_,at)}var Pe=null,De=re.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(_){_=J(_),this.service=Gt(_),this.service.addEventParent(this),C.Util.setOptions(this,_)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(_){return this.options.dynamicLayers=_,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(_){return this.options.layers=_,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(_){return this.options.layerDefs=_,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(_){return this.options.timeOptions=_,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(_){var at=C.Util.bind(function(Bt,Qt,ue){Bt||setTimeout(C.Util.bind(function(){this._renderPopup(_.latlng,Bt,Qt,ue)},this),300)},this),xt;if(this.options.popup?xt=this.options.popup.on(this._map).at(_.latlng):xt=this.identify().on(this._map).at(_.latlng),xt.params.maxAllowableOffset||xt.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?xt.layers("visible:"+this.options.layers.join(",")):xt.layers("visible")),this.options.layerDefs&&typeof this.options.layerDefs!="string"&&!xt.params.layerDefs)for(var bt in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,bt)&&xt.layerDef(bt,this.options.layerDefs[bt]);xt.run(at),this._shouldRenderPopup=!0,this._lastClick=_.latlng},_buildExportParams:function(){var _=parseInt(this._map.options.crs.code.split(":")[1],10),at={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:_,imageSR:_};if(this.options.dynamicLayers&&(at.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(this.options.layers.length===0)return;at.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(at.layerDefs=typeof this.options.layerDefs=="string"?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(at.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(at.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(at.token=this.service.options.token),this.options.proxy&&(at.proxy=this.options.proxy),this.options.disableCache&&(at._ts=Date.now()),at},_requestExport:function(_,at){if(this.options.f==="json")this.service.request("export",_,function(bt,Bt){bt||(this.options.token&&Bt.href&&(Bt.href+="?token="+this.options.token),this.options.proxy&&Bt.href&&(Bt.href=this.options.proxy+"?"+Bt.href),Bt.href?this._renderImage(Bt.href,at):this._renderImage(Bt.imageData,at,Bt.contentType))},this);else{_.f="image";var xt=this.options.url+"export"+C.Util.getParamString(_);this.options.proxy&&(xt=this.options.proxy+"?"+xt),this._renderImage(xt,at)}}});function Ie(_,at){return new De(_,at)}var pe=null,Oe=C.Layer.extend({options:{cellSize:512,updateWhenIdle:C.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(_){C.Util.setOptions(this,_)},onAdd:function(_){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(_){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var _={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=C.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),_.move=this._onMove),_},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var _=this.options.cellSize;return _ instanceof C.Point?_:new C.Point(_,_)},_pruneCells:function(){if(this._map){var _,at;for(_ in this._cells)at=this._cells[_],at.retain=at.current;for(_ in this._cells)if(at=this._cells[_],at.current&&!at.active){var xt=at.coords;this._retainParent(xt.x,xt.y,xt.z,xt.z-5)||this._retainChildren(xt.x,xt.y,xt.z,xt.z+2)}for(_ in this._cells)this._cells[_].retain||this._removeCell(_)}},_removeAllCells:function(){for(var _ in this._cells)this._removeCell(_)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(_,at,xt,bt){var Bt=Math.floor(_/2),Qt=Math.floor(at/2),ue=xt-1,Ce=new C.Point(+Bt,+Qt);Ce.z=+ue;var Te=this._cellCoordsToKey(Ce),He=this._cells[Te];return He&&He.active?(He.retain=!0,!0):(He&&He.loaded&&(He.retain=!0),ue>bt?this._retainParent(Bt,Qt,ue,bt):!1)},_retainChildren:function(_,at,xt,bt){for(var Bt=2*_;Bt<2*_+2;Bt++)for(var Qt=2*at;Qt<2*at+2;Qt++){var ue=new C.Point(Bt,Qt);ue.z=xt+1;var Ce=this._cellCoordsToKey(ue),Te=this._cells[Ce];if(Te&&Te.active){Te.retain=!0;continue}else Te&&Te.loaded&&(Te.retain=!0);xt+1<bt&&this._retainChildren(Bt,Qt,xt+1,bt)}},_resetView:function(_){var at=_&&(_.pinch||_.flyTo);at||this._setView(this._map.getCenter(),this._map.getZoom(),at,at)},_setView:function(_,at,xt,bt){var Bt=Math.round(at);bt||(this._cellZoom=Bt,this._abortLoading&&this._abortLoading(),this._resetGrid(),Bt!==void 0&&this._update(_),xt||this._pruneCells(),this._noPrune=!!xt)},_resetGrid:function(){var _=this._map,at=_.options.crs,xt=this._cellSize=this.getCellSize(),bt=this._cellZoom,Bt=this._map.getPixelWorldBounds(this._cellZoom);Bt&&(this._globalCellRange=this._pxBoundsToCellRange(Bt)),this._wrapX=at.wrapLng&&!this.options.noWrap&&[Math.floor(_.project([0,at.wrapLng[0]],bt).x/xt.x),Math.ceil(_.project([0,at.wrapLng[1]],bt).x/xt.y)],this._wrapY=at.wrapLat&&!this.options.noWrap&&[Math.floor(_.project([at.wrapLat[0],0],bt).y/xt.x),Math.ceil(_.project([at.wrapLat[1],0],bt).y/xt.y)]},_onMoveEnd:function(_){var at=_&&(_.pinch||_.flyTo);at||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(_){var at=this._map,xt=at._animatingZoom?Math.max(at._animateToZoom,at.getZoom()):at.getZoom(),bt=at.getZoomScale(xt,this._cellZoom),Bt=at.project(_,this._cellZoom).floor(),Qt=at.getSize().divideBy(bt*2);return new C.Bounds(Bt.subtract(Qt),Bt.add(Qt))},_update:function(_){var at=this._map;if(at){var xt=Math.round(at.getZoom());_===void 0&&(_=at.getCenter());var bt=this._getCelldPixelBounds(_),Bt=this._pxBoundsToCellRange(bt),Qt=Bt.getCenter(),ue=[],Ce=this.options.keepBuffer,Te=new C.Bounds(Bt.getBottomLeft().subtract([Ce,-Ce]),Bt.getTopRight().add([Ce,-Ce]));if(!(isFinite(Bt.min.x)&&isFinite(Bt.min.y)&&isFinite(Bt.max.x)&&isFinite(Bt.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var He in this._cells){var Vt=this._cells[He].coords;(Vt.z!==this._cellZoom||!Te.contains(new C.Point(Vt.x,Vt.y)))&&(this._cells[He].current=!1)}if(Math.abs(xt-this._cellZoom)>1){this._setView(_,xt);return}for(var qt=Bt.min.y;qt<=Bt.max.y;qt++)for(var ae=Bt.min.x;ae<=Bt.max.x;ae++){var ve=new C.Point(ae,qt);if(ve.z=this._cellZoom,!!this._isValidCell(ve)){var xe=this._cells[this._cellCoordsToKey(ve)];xe?xe.current=!0:ue.push(ve)}}if(ue.sort(function(Fe,we){return Fe.distanceTo(Qt)-we.distanceTo(Qt)}),ue.length!==0)for(this._loading||(this._loading=!0),ae=0;ae<ue.length;ae++){var ye=this._cellCoordsToKey(ue[ae]),Le=this._keyToCellCoords(ye);this._activeCells[Le]?this._reuseCell(ue[ae]):this._createCell(ue[ae])}}},_isValidCell:function(_){var at=this._map.options.crs;if(!at.infinite){var xt=this._globalCellRange;if(!at.wrapLng&&(_.x<xt.min.x||_.x>xt.max.x)||!at.wrapLat&&(_.y<xt.min.y||_.y>xt.max.y))return!1}if(!this.options.bounds)return!0;var bt=this._cellCoordsToBounds(_);return(0,C.toLatLngBounds)(this.options.bounds).overlaps(bt)},_keyToBounds:function(_){return this._cellCoordsToBounds(this._keyToCellCoords(_))},_cellCoordsToNwSe:function(_){var at=this._map,xt=this.getCellSize(),bt=_.scaleBy(xt),Bt=bt.add(xt),Qt=at.unproject(bt,_.z),ue=at.unproject(Bt,_.z);return[Qt,ue]},_cellCoordsToBounds:function(_){var at=this._cellCoordsToNwSe(_),xt=new C.LatLngBounds(at[0],at[1]);return this.options.noWrap||(xt=this._map.wrapLatLngBounds(xt)),xt},_cellCoordsToKey:function(_){return _.x+":"+_.y+":"+_.z},_keyToCellCoords:function(_){var at=_.split(":"),xt=new C.Point(+at[0],+at[1]);return xt.z=+at[2],xt},_removeCell:function(_){var at=this._cells[_];if(at){var xt=this._keyToCellCoords(_),bt=this._wrapCoords(xt),Bt=this._cellCoordsToBounds(this._wrapCoords(xt));at.current=!1,delete this._cells[_],this._activeCells[_]=at,this.cellLeave(Bt,bt,_),this.fire("cellleave",{key:_,coords:bt,bounds:Bt})}},_reuseCell:function(_){var at=this._cellCoordsToKey(_);this._cells[at]=this._activeCells[at],this._cells[at].current=!0;var xt=this._wrapCoords(_),bt=this._cellCoordsToBounds(this._wrapCoords(_));this.cellEnter(bt,xt,at),this.fire("cellenter",{key:at,coords:xt,bounds:bt})},_createCell:function(_){var at=this._cellCoordsToKey(_),xt=this._wrapCoords(_),bt=this._cellCoordsToBounds(this._wrapCoords(_));this.createCell(bt,xt,at),this.fire("cellcreate",{key:at,coords:xt,bounds:bt}),this._cells[at]={coords:_,current:!0},C.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(_,at,xt){var bt=this._cellCoordsToKey(_);xt=this._cells[bt],xt&&(xt.loaded=+new Date,xt.active=!0)},_getCellPos:function(_){return _.scaleBy(this.getCellSize())},_wrapCoords:function(_){var at=new C.Point(this._wrapX?C.Util.wrapNum(_.x,this._wrapX):_.x,this._wrapY?C.Util.wrapNum(_.y,this._wrapY):_.y);return at.z=_.z,at},_pxBoundsToCellRange:function(_){var at=this.getCellSize();return new C.Bounds(_.min.unscaleBy(at).floor(),_.max.unscaleBy(at).ceil().subtract([1,1]))}});function Ne(_){this.values=[].concat(_||[])}Ne.prototype.query=function(_){var at=this.getIndex(_);return this.values[at]},Ne.prototype.getIndex=function(at){this.dirty&&this.sort();for(var xt=0,bt=this.values.length-1,Bt,Qt;xt<=bt;)if(Bt=(xt+bt)/2|0,Qt=this.values[Math.round(Bt)],+Qt.value<+at)xt=Bt+1;else if(+Qt.value>+at)bt=Bt-1;else return Bt;return Math.abs(~bt)},Ne.prototype.between=function(at,xt){var bt=this.getIndex(at),Bt=this.getIndex(xt);if(bt===0&&Bt===0)return[];for(;this.values[bt-1]&&this.values[bt-1].value===at;)bt--;for(;this.values[Bt+1]&&this.values[Bt+1].value===xt;)Bt++;return this.values[Bt]&&this.values[Bt].value===xt&&this.values[Bt+1]&&Bt++,this.values.slice(bt,Bt)},Ne.prototype.insert=function(at){return this.values.splice(this.getIndex(at.value),0,at),this},Ne.prototype.bulkAdd=function(at,xt){return this.values=this.values.concat([].concat(at||[])),xt?this.sort():this.dirty=!0,this},Ne.prototype.sort=function(){return this.values.sort(function(at,xt){return+xt.value-+at.value}).reverse(),this.dirty=!1,this};var Ve=Ne,be=Oe.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(_){if(Oe.prototype.initialize.call(this,_),_=J(_),_=C.Util.setOptions(this,_),this.service=oe(_),this.service.addEventParent(this),this.options.fields[0]!=="*"){for(var at=!1,xt=0;xt<this.options.fields.length;xt++)this.options.fields[xt].match(/^(OBJECTID|FID|OID|ID)$/i)&&(at=!0);at===!1&&x("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Ve,this._endTimeIndex=new Ve):this.options.timeField&&(this._timeIndex=new Ve),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(_){return st(_),this.service.metadata(function(at,xt){if(!at){var bt=xt.supportedQueryFormats,Bt=!1;(this.service.options.isModern===!1||this.options.fetchAllFeatures)&&(Bt=!0),!Bt&&bt&&bt.indexOf("geoJSON")!==-1&&(this.service.options.isModern=!0),xt.objectIdField&&(this.service.options.idAttribute=xt.objectIdField),!this.options.attribution&&_.attributionControl&&xt.copyrightText&&(this.options.attribution=xt.copyrightText,_.attributionControl.addAttribution(this.getAttribution()))}},this),_.on("zoomend",this._handleZoomChange,this),Oe.prototype.onAdd.call(this,_)},onRemove:function(_){return ut(_),_.off("zoomend",this._handleZoomChange,this),Oe.prototype.onRemove.call(this,_)},getAttribution:function(){return this.options.attribution},createCell:function(_,at){this._visibleZoom()&&this._requestFeatures(_,at)},_requestFeatures:function(_,at,xt,bt){this._activeRequests++,bt=bt||0;var Bt=this.options.where;return this._activeRequests===1&&this.fire("loading",{bounds:_},!0),this._buildQuery(_,bt).run(function(Qt,ue,Ce){Ce&&Ce.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===Bt&&(!Qt&&ue&&ue.features.length&&C.Util.requestAnimFrame(C.Util.bind(function(){this._addFeatures(ue.features,at),this._postProcessFeatures(_)},this)),!Qt&&ue&&!ue.features.length&&this._postProcessFeatures(_),Qt&&this._postProcessFeatures(_),xt&&xt.call(this,Qt,ue),Ce&&(Ce.exceededTransferLimit||Ce.properties&&Ce.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(_,at,xt,bt+ue.features.length))},this)},_postProcessFeatures:function(_){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:_})},_cacheKey:function(_){return _.z+":"+_.x+":"+_.y},_addFeatures:function(_,at){if(at){var xt=this._cacheKey(at);this._cache[xt]=this._cache[xt]||[]}for(var bt=_.length-1;bt>=0;bt--){var Bt=_[bt].id;this._currentSnapshot.indexOf(Bt)===-1&&this._currentSnapshot.push(Bt),typeof xt<"u"&&this._cache[xt].indexOf(Bt)===-1&&this._cache[xt].push(Bt)}this.options.timeField&&this._buildTimeIndexes(_),this.createLayers(_)},_buildQuery:function(_,at){var xt=this.service.query().intersects(_).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(at))&&(xt=xt.offset(at)),xt.params.resultType="tile",this.options.requestParams&&C.Util.extend(xt.params,this.options.requestParams),this.options.simplifyFactor&&xt.simplify(this._map,this.options.simplifyFactor),this.options.timeFilterMode==="server"&&this.options.from&&this.options.to&&xt.between(this.options.from,this.options.to),xt},setWhere:function(_,at,xt){this.options.where=_&&_.length?_:"1=1";for(var bt=[],Bt=[],Qt=0,ue=null,Ce=C.Util.bind(function(ae,ve){if(ae&&(ue=ae),ve)for(var xe=ve.features.length-1;xe>=0;xe--)Bt.push(ve.features[xe].id);Qt--,Qt<=0&&this._visibleZoom()&&_===this.options.where&&(this._currentSnapshot=Bt,C.Util.requestAnimFrame(C.Util.bind(function(){this.removeLayers(bt),this.addLayers(Bt),at&&at.call(xt,ue)},this)))},this),Te=this._currentSnapshot.length-1;Te>=0;Te--)bt.push(this._currentSnapshot[Te]);this._cache={};for(var He in this._cells){Qt++;var Vt=this._keyToCellCoords(He),qt=this._cellCoordsToBounds(Vt);this._requestFeatures(qt,Vt,Ce)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(_,at,xt,bt){var Bt=this.options.from,Qt=this.options.to,ue=0,Ce=null,Te=C.Util.bind(function(ae){ae&&(Ce=ae),this._filterExistingFeatures(Bt,Qt,_,at),ue--,xt&&ue<=0&&xt.call(bt,Ce)},this);if(this.options.from=_,this.options.to=at,this._filterExistingFeatures(Bt,Qt,_,at),this.options.timeFilterMode==="server")for(var He in this._cells){ue++;var Vt=this._keyToCellCoords(He),qt=this._cellCoordsToBounds(Vt);this._requestFeatures(qt,Vt,Te)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(_,at,xt,bt){var Bt=_&&at?this._getFeaturesInTimeRange(_,at):this._currentSnapshot,Qt=this._getFeaturesInTimeRange(xt,bt);if(Qt.indexOf)for(var ue=0;ue<Qt.length;ue++){var Ce=Bt.indexOf(Qt[ue]);Ce>=0&&Bt.splice(Ce,1)}C.Util.requestAnimFrame(C.Util.bind(function(){this.removeLayers(Bt),this.addLayers(Qt)},this))},_getFeaturesInTimeRange:function(_,at){var xt=[],bt;if(this.options.timeField.start&&this.options.timeField.end){var Bt=this._startTimeIndex.between(_,at),Qt=this._endTimeIndex.between(_,at);bt=Bt.concat(Qt)}else if(this._timeIndex)bt=this._timeIndex.between(_,at);else return x("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];for(var ue=bt.length-1;ue>=0;ue--)xt.push(bt[ue].id);return xt},_buildTimeIndexes:function(_){var at,xt;if(this.options.timeField.start&&this.options.timeField.end){var bt=[],Bt=[];for(at=_.length-1;at>=0;at--)xt=_[at],bt.push({id:xt.id,value:new Date(xt.properties[this.options.timeField.start])}),Bt.push({id:xt.id,value:new Date(xt.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(bt),this._endTimeIndex.bulkAdd(Bt)}else{var Qt=[];for(at=_.length-1;at>=0;at--)xt=_[at],Qt.push({id:xt.id,value:new Date(xt.properties[this.options.timeField])});this._timeIndex.bulkAdd(Qt)}},_featureWithinTimeRange:function(_){if(!this.options.from||!this.options.to)return!0;var at=+this.options.from.valueOf(),xt=+this.options.to.valueOf();if(typeof this.options.timeField=="string"){var bt=+_.properties[this.options.timeField];return bt>=at&&bt<=xt}if(this.options.timeField.start&&this.options.timeField.end){var Bt=+_.properties[this.options.timeField.start],Qt=+_.properties[this.options.timeField.end];return Bt>=at&&Bt<=xt||Qt>=at&&Qt<=xt||Bt<=at&&Qt>=xt}},_visibleZoom:function(){if(!this._map)return!1;var _=this._map.getZoom();return!(_>this.options.maxZoom||_<this.options.minZoom)},_handleZoomChange:function(){if(!this._visibleZoom())this.removeLayers(this._currentSnapshot),this._currentSnapshot=[];else for(var _ in this._cells){var at=this._cells[_].coords,xt=this._cacheKey(at);this._cache[xt]&&this.addLayers(this._cache[xt])}},authenticate:function(_){return this.service.authenticate(_),this},metadata:function(_,at){return this.service.metadata(_,at),this},query:function(){return this.service.query()},_getMetadata:function(_){if(this._metadata){var at;_(at,this._metadata)}else this.metadata(C.Util.bind(function(xt,bt){this._metadata=bt,_(xt,this._metadata)},this))},addFeature:function(_,at,xt){this.addFeatures(_,at,xt)},addFeatures:function(_,at,xt){this._getMetadata(C.Util.bind(function(bt,Bt){if(bt){at&&at.call(this,bt,null);return}var Qt=_.features?_.features:[_];this.service.addFeatures(_,C.Util.bind(function(ue,Ce){if(!ue){for(var Te=Qt.length-1;Te>=0;Te--)Qt[Te].properties[Bt.objectIdField]=Qt.length>1?Ce[Te].objectId:Ce.objectId,Qt[Te].id=Qt.length>1?Ce[Te].objectId:Ce.objectId;this._addFeatures(Qt)}at&&at.call(xt,ue,Ce)},this))},this))},updateFeature:function(_,at,xt){this.updateFeatures(_,at,xt)},updateFeatures:function(_,at,xt){var bt=_.features?_.features:[_];this.service.updateFeatures(_,function(Bt,Qt){if(!Bt){for(var ue=bt.length-1;ue>=0;ue--)this.removeLayers([bt[ue].id],!0);this._addFeatures(bt)}at&&at.call(xt,Bt,Qt)},this)},deleteFeature:function(_,at,xt){this.deleteFeatures(_,at,xt)},deleteFeatures:function(_,at,xt){return this.service.deleteFeatures(_,function(bt,Bt){var Qt=Bt.length?Bt:[Bt];if(!bt&&Qt.length>0)for(var ue=Qt.length-1;ue>=0;ue--)this.removeLayers([Qt[ue].objectId],!0);at&&at.call(xt,bt,Bt)},this)}}),Be=be.extend({options:{cacheLayers:!0},initialize:function(_){_.apikey&&(_.token=_.apikey),be.prototype.initialize.call(this,_),this._originalStyle=this.options.style,this._layers={}},onRemove:function(_){for(var at in this._layers)_.removeLayer(this._layers[at]),this.fire("removefeature",{feature:this._layers[at].feature,permanent:!1},!0);return be.prototype.onRemove.call(this,_)},createNewLayer:function(_){var at=C.GeoJSON.geometryToLayer(_,this.options);return at&&(at.defaultOptions=at.options),at},_updateLayer:function(_,at){var xt=[],bt=this.options.coordsToLatLng||C.GeoJSON.coordsToLatLng;switch(at.properties&&(_.feature.properties=at.properties),at.geometry.type){case"Point":xt=C.GeoJSON.coordsToLatLng(at.geometry.coordinates),_.setLatLng(xt);break;case"LineString":xt=C.GeoJSON.coordsToLatLngs(at.geometry.coordinates,0,bt),_.setLatLngs(xt);break;case"MultiLineString":xt=C.GeoJSON.coordsToLatLngs(at.geometry.coordinates,1,bt),_.setLatLngs(xt);break;case"Polygon":xt=C.GeoJSON.coordsToLatLngs(at.geometry.coordinates,1,bt),_.setLatLngs(xt);break;case"MultiPolygon":xt=C.GeoJSON.coordsToLatLngs(at.geometry.coordinates,2,bt),_.setLatLngs(xt);break}this.redraw(_.feature.id)},createLayers:function(_){for(var at=_.length-1;at>=0;at--){var xt=_[at],bt=this._layers[xt.id],Bt;this._visibleZoom()&&bt&&!this._map.hasLayer(bt)&&(!this.options.timeField||this._featureWithinTimeRange(xt))&&(this._map.addLayer(bt),this.fire("addfeature",{feature:bt.feature},!0)),bt&&(bt.setLatLngs||bt.setLatLng)&&this._updateLayer(bt,xt),bt||(Bt=this.createNewLayer(xt),Bt?(Bt.feature=xt,Bt.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(Bt.feature,Bt),this._layers[Bt.feature.id]=Bt,this.setFeatureStyle(Bt.feature.id,this.options.style),this.fire("createfeature",{feature:Bt.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(xt))&&this._map.addLayer(Bt)):x("invalid GeoJSON encountered"))}},addLayers:function(_){for(var at=_.length-1;at>=0;at--){var xt=this._layers[_[at]];xt&&(!this.options.timeField||this._featureWithinTimeRange(xt.feature))&&(this._map.addLayer(xt),this.fire("addfeature",{feature:xt.feature},!0))}},removeLayers:function(_,at){for(var xt=_.length-1;xt>=0;xt--){var bt=_[xt],Bt=this._layers[bt];Bt&&(this.fire("removefeature",{feature:Bt.feature,permanent:at},!0),this._map.removeLayer(Bt)),Bt&&at&&delete this._layers[bt]}},cellEnter:function(_,at){this._visibleZoom()&&!this._zooming&&this._map&&C.Util.requestAnimFrame(C.Util.bind(function(){var xt=this._cacheKey(at),bt=this._cellCoordsToKey(at),Bt=this._cache[xt];this._activeCells[bt]&&Bt&&this.addLayers(Bt)},this))},cellLeave:function(_,at){this._zooming||C.Util.requestAnimFrame(C.Util.bind(function(){if(this._map){var xt=this._cacheKey(at),bt=this._cellCoordsToKey(at),Bt=this._cache[xt],Qt=this._map.getBounds();if(!this._activeCells[bt]&&Bt){for(var ue=!0,Ce=0;Ce<Bt.length;Ce++){var Te=this._layers[Bt[Ce]];Te&&Te.getBounds&&Qt.intersects(Te.getBounds())&&(ue=!1)}ue&&this.removeLayers(Bt,!this.options.cacheLayers),!this.options.cacheLayers&&ue&&(delete this._cache[xt],delete this._cells[bt],delete this._activeCells[bt])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(_){this.resetFeatureStyle(_.feature.id)},this),this},setStyle:function(_){return this.options.style=_,this.eachFeature(function(at){this.setFeatureStyle(at.feature.id,_)},this),this},resetFeatureStyle:function(_){var at=this._layers[_],xt=this._originalStyle||C.Path.prototype.options;return at&&(C.Util.extend(at.options,at.defaultOptions),this.setFeatureStyle(_,xt)),this},setFeatureStyle:function(_,at){var xt=this._layers[_];return typeof at=="function"&&(at=at(xt.feature)),xt.setStyle&&xt.setStyle(at),this},eachActiveFeature:function(_,at){if(this._map){var xt=this._map.getBounds();for(var bt in this._layers)this._currentSnapshot.indexOf(this._layers[bt].feature.id)!==-1&&(typeof this._layers[bt].getLatLng=="function"&&xt.contains(this._layers[bt].getLatLng())?_.call(at,this._layers[bt]):typeof this._layers[bt].getBounds=="function"&&xt.intersects(this._layers[bt].getBounds())&&_.call(at,this._layers[bt]))}return this},eachFeature:function(_,at){for(var xt in this._layers)_.call(at,this._layers[xt]);return this},getFeature:function(_){return this._layers[_]},bringToBack:function(){this.eachFeature(function(_){_.bringToBack&&_.bringToBack()})},bringToFront:function(){this.eachFeature(function(_){_.bringToFront&&_.bringToFront()})},redraw:function(_){return _&&this._redraw(_),this},_redraw:function(_){var at=this._layers[_],xt=at.feature;if(at&&at.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var bt=this.options.pointToLayer(xt,(0,C.latLng)(xt.geometry.coordinates[1],xt.geometry.coordinates[0])),Bt=bt.options.icon;at.setIcon(Bt)}if(at&&at.setStyle&&this.options.pointToLayer){var Qt=this.options.pointToLayer(xt,(0,C.latLng)(xt.geometry.coordinates[1],xt.geometry.coordinates[0])),ue=Qt.options;this.setFeatureStyle(xt.id,ue)}at&&at.setStyle&&this.options.style&&this.resetFeatureStyle(xt.id)},openPopup(_){return this._popup&&this._popup._prepareOpen(_||this._latlng)&&this._popup.openOn(this._map),this},openTooltip(_){return this._tooltip&&this._tooltip._prepareOpen(_)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this}});function Ue(_){return new Be(_)}var ke=null,Ze=M.i8},11553:function(X,z,e){var M;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(F,R,A,T){"use strict";var D=["","webkit","Moz","MS","ms","o"],b=R.createElement("div"),C="function",f=Math.round,v=Math.abs,m=Date.now;function o(Et,kt,$t){return setTimeout(i(Et,$t),kt)}function u(Et,kt,$t){return Array.isArray(Et)?(l(Et,$t[kt],$t),!0):!1}function l(Et,kt,$t){var le;if(Et)if(Et.forEach)Et.forEach(kt,$t);else if(Et.length!==T)for(le=0;le<Et.length;)kt.call($t,Et[le],le,Et),le++;else for(le in Et)Et.hasOwnProperty(le)&&kt.call($t,Et[le],le,Et)}function r(Et,kt,$t){var le="DEPRECATED METHOD: "+kt+`
`+$t+` AT 
`;return function(){var me=new Error("get-stack-trace"),Ee=me&&me.stack?me.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ye=F.console&&(F.console.warn||F.console.log);return Ye&&Ye.call(F.console,le,Ee),Et.apply(this,arguments)}}var s;typeof Object.assign!="function"?s=function(kt){if(kt===T||kt===null)throw new TypeError("Cannot convert undefined or null to object");for(var $t=Object(kt),le=1;le<arguments.length;le++){var me=arguments[le];if(me!==T&&me!==null)for(var Ee in me)me.hasOwnProperty(Ee)&&($t[Ee]=me[Ee])}return $t}:s=Object.assign;var c=r(function(kt,$t,le){for(var me=Object.keys($t),Ee=0;Ee<me.length;)(!le||le&&kt[me[Ee]]===T)&&(kt[me[Ee]]=$t[me[Ee]]),Ee++;return kt},"extend","Use `assign`."),x=r(function(kt,$t){return c(kt,$t,!0)},"merge","Use `assign`.");function a(Et,kt,$t){var le=kt.prototype,me;me=Et.prototype=Object.create(le),me.constructor=Et,me._super=le,$t&&s(me,$t)}function i(Et,kt){return function(){return Et.apply(kt,arguments)}}function n(Et,kt){return typeof Et==C?Et.apply(kt&&kt[0]||T,kt):Et}function h(Et,kt){return Et===T?kt:Et}function g(Et,kt,$t){l(w(kt),function(le){Et.addEventListener(le,$t,!1)})}function d(Et,kt,$t){l(w(kt),function(le){Et.removeEventListener(le,$t,!1)})}function y(Et,kt){for(;Et;){if(Et==kt)return!0;Et=Et.parentNode}return!1}function p(Et,kt){return Et.indexOf(kt)>-1}function w(Et){return Et.trim().split(/\s+/g)}function S(Et,kt,$t){if(Et.indexOf&&!$t)return Et.indexOf(kt);for(var le=0;le<Et.length;){if($t&&Et[le][$t]==kt||!$t&&Et[le]===kt)return le;le++}return-1}function O(Et){return Array.prototype.slice.call(Et,0)}function B(Et,kt,$t){for(var le=[],me=[],Ee=0;Ee<Et.length;){var Ye=kt?Et[Ee][kt]:Et[Ee];S(me,Ye)<0&&le.push(Et[Ee]),me[Ee]=Ye,Ee++}return $t&&(kt?le=le.sort(function(Ke,qe){return Ke[kt]>qe[kt]}):le=le.sort()),le}function k(Et,kt){for(var $t,le,me=kt[0].toUpperCase()+kt.slice(1),Ee=0;Ee<D.length;){if($t=D[Ee],le=$t?$t+me:kt,le in Et)return le;Ee++}return T}var P=1;function L(){return P++}function E(Et){var kt=Et.ownerDocument||Et;return kt.defaultView||kt.parentWindow||F}var N=/mobile|tablet|ip(ad|hone|od)|android/i,I="ontouchstart"in F,G=k(F,"PointerEvent")!==T,W=I&&N.test(navigator.userAgent),Z="touch",U="pen",H="mouse",V="kinect",Y=25,$=1,K=2,J=4,Q=8,et=1,nt=2,st=4,ut=8,rt=16,ht=nt|st,Pt=ut|rt,wt=ht|Pt,At=["x","y"],Nt=["clientX","clientY"];function Lt(Et,kt){var $t=this;this.manager=Et,this.callback=kt,this.element=Et.element,this.target=Et.options.inputTarget,this.domHandler=function(le){n(Et.options.enable,[Et])&&$t.handler(le)},this.init()}Lt.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(E(this.element),this.evWin,this.domHandler)}};function Rt(Et){var kt,$t=Et.options.inputClass;return $t?kt=$t:G?kt=Gt:W?kt=ne:I?kt=It:kt=ot,new kt(Et,Tt)}function Tt(Et,kt,$t){var le=$t.pointers.length,me=$t.changedPointers.length,Ee=kt&$&&le-me===0,Ye=kt&(J|Q)&&le-me===0;$t.isFirst=!!Ee,$t.isFinal=!!Ye,Ee&&(Et.session={}),$t.eventType=kt,mt(Et,$t),Et.emit("hammer.input",$t),Et.recognize($t),Et.session.prevInput=$t}function mt(Et,kt){var $t=Et.session,le=kt.pointers,me=le.length;$t.firstInput||($t.firstInput=vt(kt)),me>1&&!$t.firstMultiple?$t.firstMultiple=vt(kt):me===1&&($t.firstMultiple=!1);var Ee=$t.firstInput,Ye=$t.firstMultiple,Qe=Ye?Ye.center:Ee.center,Ke=kt.center=Dt(le);kt.timeStamp=m(),kt.deltaTime=kt.timeStamp-Ee.timeStamp,kt.angle=Yt(Qe,Ke),kt.distance=zt(Qe,Ke),Ft($t,kt),kt.offsetDirection=jt(kt.deltaX,kt.deltaY);var qe=Ct(kt.deltaTime,kt.deltaX,kt.deltaY);kt.overallVelocityX=qe.x,kt.overallVelocityY=qe.y,kt.overallVelocity=v(qe.x)>v(qe.y)?qe.x:qe.y,kt.scale=Ye?ft(Ye.pointers,le):1,kt.rotation=Ye?Zt(Ye.pointers,le):0,kt.maxPointers=$t.prevInput?kt.pointers.length>$t.prevInput.maxPointers?kt.pointers.length:$t.prevInput.maxPointers:kt.pointers.length,ct($t,kt);var ii=Et.element;y(kt.srcEvent.target,ii)&&(ii=kt.srcEvent.target),kt.target=ii}function Ft(Et,kt){var $t=kt.center,le=Et.offsetDelta||{},me=Et.prevDelta||{},Ee=Et.prevInput||{};(kt.eventType===$||Ee.eventType===J)&&(me=Et.prevDelta={x:Ee.deltaX||0,y:Ee.deltaY||0},le=Et.offsetDelta={x:$t.x,y:$t.y}),kt.deltaX=me.x+($t.x-le.x),kt.deltaY=me.y+($t.y-le.y)}function ct(Et,kt){var $t=Et.lastInterval||kt,le=kt.timeStamp-$t.timeStamp,me,Ee,Ye,Qe;if(kt.eventType!=Q&&(le>Y||$t.velocity===T)){var Ke=kt.deltaX-$t.deltaX,qe=kt.deltaY-$t.deltaY,ii=Ct(le,Ke,qe);Ee=ii.x,Ye=ii.y,me=v(ii.x)>v(ii.y)?ii.x:ii.y,Qe=jt(Ke,qe),Et.lastInterval=kt}else me=$t.velocity,Ee=$t.velocityX,Ye=$t.velocityY,Qe=$t.direction;kt.velocity=me,kt.velocityX=Ee,kt.velocityY=Ye,kt.direction=Qe}function vt(Et){for(var kt=[],$t=0;$t<Et.pointers.length;)kt[$t]={clientX:f(Et.pointers[$t].clientX),clientY:f(Et.pointers[$t].clientY)},$t++;return{timeStamp:m(),pointers:kt,center:Dt(kt),deltaX:Et.deltaX,deltaY:Et.deltaY}}function Dt(Et){var kt=Et.length;if(kt===1)return{x:f(Et[0].clientX),y:f(Et[0].clientY)};for(var $t=0,le=0,me=0;me<kt;)$t+=Et[me].clientX,le+=Et[me].clientY,me++;return{x:f($t/kt),y:f(le/kt)}}function Ct(Et,kt,$t){return{x:kt/Et||0,y:$t/Et||0}}function jt(Et,kt){return Et===kt?et:v(Et)>=v(kt)?Et<0?nt:st:kt<0?ut:rt}function zt(Et,kt,$t){$t||($t=At);var le=kt[$t[0]]-Et[$t[0]],me=kt[$t[1]]-Et[$t[1]];return Math.sqrt(le*le+me*me)}function Yt(Et,kt,$t){$t||($t=At);var le=kt[$t[0]]-Et[$t[0]],me=kt[$t[1]]-Et[$t[1]];return Math.atan2(me,le)*180/Math.PI}function Zt(Et,kt){return Yt(kt[1],kt[0],Nt)+Yt(Et[1],Et[0],Nt)}function ft(Et,kt){return zt(kt[0],kt[1],Nt)/zt(Et[0],Et[1],Nt)}var gt={mousedown:$,mousemove:K,mouseup:J},dt="mousedown",lt="mousemove mouseup";function ot(){this.evEl=dt,this.evWin=lt,this.pressed=!1,Lt.apply(this,arguments)}a(ot,Lt,{handler:function(kt){var $t=gt[kt.type];$t&$&&kt.button===0&&(this.pressed=!0),$t&K&&kt.which!==1&&($t=J),this.pressed&&($t&J&&(this.pressed=!1),this.callback(this.manager,$t,{pointers:[kt],changedPointers:[kt],pointerType:H,srcEvent:kt}))}});var it={pointerdown:$,pointermove:K,pointerup:J,pointercancel:Q,pointerout:Q},yt={2:Z,3:U,4:H,5:V},Ot="pointerdown",St="pointermove pointerup pointercancel";F.MSPointerEvent&&!F.PointerEvent&&(Ot="MSPointerDown",St="MSPointerMove MSPointerUp MSPointerCancel");function Gt(){this.evEl=Ot,this.evWin=St,Lt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a(Gt,Lt,{handler:function(kt){var $t=this.store,le=!1,me=kt.type.toLowerCase().replace("ms",""),Ee=it[me],Ye=yt[kt.pointerType]||kt.pointerType,Qe=Ye==Z,Ke=S($t,kt.pointerId,"pointerId");Ee&$&&(kt.button===0||Qe)?Ke<0&&($t.push(kt),Ke=$t.length-1):Ee&(J|Q)&&(le=!0),!(Ke<0)&&($t[Ke]=kt,this.callback(this.manager,Ee,{pointers:$t,changedPointers:[kt],pointerType:Ye,srcEvent:kt}),le&&$t.splice(Ke,1))}});var Ht={touchstart:$,touchmove:K,touchend:J,touchcancel:Q},Kt="touchstart",Jt="touchstart touchmove touchend touchcancel";function te(){this.evTarget=Kt,this.evWin=Jt,this.started=!1,Lt.apply(this,arguments)}a(te,Lt,{handler:function(kt){var $t=Ht[kt.type];if($t===$&&(this.started=!0),!!this.started){var le=ie.call(this,kt,$t);$t&(J|Q)&&le[0].length-le[1].length===0&&(this.started=!1),this.callback(this.manager,$t,{pointers:le[0],changedPointers:le[1],pointerType:Z,srcEvent:kt})}}});function ie(Et,kt){var $t=O(Et.touches),le=O(Et.changedTouches);return kt&(J|Q)&&($t=B($t.concat(le),"identifier",!0)),[$t,le]}var oe={touchstart:$,touchmove:K,touchend:J,touchcancel:Q},he="touchstart touchmove touchend touchcancel";function ne(){this.evTarget=he,this.targetIds={},Lt.apply(this,arguments)}a(ne,Lt,{handler:function(kt){var $t=oe[kt.type],le=ce.call(this,kt,$t);le&&this.callback(this.manager,$t,{pointers:le[0],changedPointers:le[1],pointerType:Z,srcEvent:kt})}});function ce(Et,kt){var $t=O(Et.touches),le=this.targetIds;if(kt&($|K)&&$t.length===1)return le[$t[0].identifier]=!0,[$t,$t];var me,Ee,Ye=O(Et.changedTouches),Qe=[],Ke=this.target;if(Ee=$t.filter(function(qe){return y(qe.target,Ke)}),kt===$)for(me=0;me<Ee.length;)le[Ee[me].identifier]=!0,me++;for(me=0;me<Ye.length;)le[Ye[me].identifier]&&Qe.push(Ye[me]),kt&(J|Q)&&delete le[Ye[me].identifier],me++;if(Qe.length)return[B(Ee.concat(Qe),"identifier",!0),Qe]}var ge=2500,Ae=25;function It(){Lt.apply(this,arguments);var Et=i(this.handler,this);this.touch=new ne(this.manager,Et),this.mouse=new ot(this.manager,Et),this.primaryTouch=null,this.lastTouches=[]}a(It,Lt,{handler:function(kt,$t,le){var me=le.pointerType==Z,Ee=le.pointerType==H;if(!(Ee&&le.sourceCapabilities&&le.sourceCapabilities.firesTouchEvents)){if(me)Wt.call(this,$t,le);else if(Ee&&ee.call(this,le))return;this.callback(kt,$t,le)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Wt(Et,kt){Et&$?(this.primaryTouch=kt.changedPointers[0].identifier,_t.call(this,kt)):Et&(J|Q)&&_t.call(this,kt)}function _t(Et){var kt=Et.changedPointers[0];if(kt.identifier===this.primaryTouch){var $t={x:kt.clientX,y:kt.clientY};this.lastTouches.push($t);var le=this.lastTouches,me=function(){var Ee=le.indexOf($t);Ee>-1&&le.splice(Ee,1)};setTimeout(me,ge)}}function ee(Et){for(var kt=Et.srcEvent.clientX,$t=Et.srcEvent.clientY,le=0;le<this.lastTouches.length;le++){var me=this.lastTouches[le],Ee=Math.abs(kt-me.x),Ye=Math.abs($t-me.y);if(Ee<=Ae&&Ye<=Ae)return!0}return!1}var re=k(b.style,"touchAction"),de=re!==T,Se="compute",Pe="auto",De="manipulation",Ie="none",pe="pan-x",Oe="pan-y",Ne=Be();function Ve(Et,kt){this.manager=Et,this.set(kt)}Ve.prototype={set:function(Et){Et==Se&&(Et=this.compute()),de&&this.manager.element.style&&Ne[Et]&&(this.manager.element.style[re]=Et),this.actions=Et.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Et=[];return l(this.manager.recognizers,function(kt){n(kt.options.enable,[kt])&&(Et=Et.concat(kt.getTouchAction()))}),be(Et.join(" "))},preventDefaults:function(Et){var kt=Et.srcEvent,$t=Et.offsetDirection;if(this.manager.session.prevented){kt.preventDefault();return}var le=this.actions,me=p(le,Ie)&&!Ne[Ie],Ee=p(le,Oe)&&!Ne[Oe],Ye=p(le,pe)&&!Ne[pe];if(me){var Qe=Et.pointers.length===1,Ke=Et.distance<2,qe=Et.deltaTime<250;if(Qe&&Ke&&qe)return}if(!(Ye&&Ee)&&(me||Ee&&$t&ht||Ye&&$t&Pt))return this.preventSrc(kt)},preventSrc:function(Et){this.manager.session.prevented=!0,Et.preventDefault()}};function be(Et){if(p(Et,Ie))return Ie;var kt=p(Et,pe),$t=p(Et,Oe);return kt&&$t?Ie:kt||$t?kt?pe:Oe:p(Et,De)?De:Pe}function Be(){if(!de)return!1;var Et={},kt=F.CSS&&F.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function($t){Et[$t]=kt?F.CSS.supports("touch-action",$t):!0}),Et}var Ue=1,ke=2,Ze=4,_=8,at=_,xt=16,bt=32;function Bt(Et){this.options=s({},this.defaults,Et||{}),this.id=L(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=Ue,this.simultaneous={},this.requireFail=[]}Bt.prototype={defaults:{},set:function(Et){return s(this.options,Et),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Et){if(u(Et,"recognizeWith",this))return this;var kt=this.simultaneous;return Et=Ce(Et,this),kt[Et.id]||(kt[Et.id]=Et,Et.recognizeWith(this)),this},dropRecognizeWith:function(Et){return u(Et,"dropRecognizeWith",this)?this:(Et=Ce(Et,this),delete this.simultaneous[Et.id],this)},requireFailure:function(Et){if(u(Et,"requireFailure",this))return this;var kt=this.requireFail;return Et=Ce(Et,this),S(kt,Et)===-1&&(kt.push(Et),Et.requireFailure(this)),this},dropRequireFailure:function(Et){if(u(Et,"dropRequireFailure",this))return this;Et=Ce(Et,this);var kt=S(this.requireFail,Et);return kt>-1&&this.requireFail.splice(kt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Et){return!!this.simultaneous[Et.id]},emit:function(Et){var kt=this,$t=this.state;function le(me){kt.manager.emit(me,Et)}$t<_&&le(kt.options.event+Qt($t)),le(kt.options.event),Et.additionalEvent&&le(Et.additionalEvent),$t>=_&&le(kt.options.event+Qt($t))},tryEmit:function(Et){if(this.canEmit())return this.emit(Et);this.state=bt},canEmit:function(){for(var Et=0;Et<this.requireFail.length;){if(!(this.requireFail[Et].state&(bt|Ue)))return!1;Et++}return!0},recognize:function(Et){var kt=s({},Et);if(!n(this.options.enable,[this,kt])){this.reset(),this.state=bt;return}this.state&(at|xt|bt)&&(this.state=Ue),this.state=this.process(kt),this.state&(ke|Ze|_|xt)&&this.tryEmit(kt)},process:function(Et){},getTouchAction:function(){},reset:function(){}};function Qt(Et){return Et&xt?"cancel":Et&_?"end":Et&Ze?"move":Et&ke?"start":""}function ue(Et){return Et==rt?"down":Et==ut?"up":Et==nt?"left":Et==st?"right":""}function Ce(Et,kt){var $t=kt.manager;return $t?$t.get(Et):Et}function Te(){Bt.apply(this,arguments)}a(Te,Bt,{defaults:{pointers:1},attrTest:function(Et){var kt=this.options.pointers;return kt===0||Et.pointers.length===kt},process:function(Et){var kt=this.state,$t=Et.eventType,le=kt&(ke|Ze),me=this.attrTest(Et);return le&&($t&Q||!me)?kt|xt:le||me?$t&J?kt|_:kt&ke?kt|Ze:ke:bt}});function He(){Te.apply(this,arguments),this.pX=null,this.pY=null}a(He,Te,{defaults:{event:"pan",threshold:10,pointers:1,direction:wt},getTouchAction:function(){var Et=this.options.direction,kt=[];return Et&ht&&kt.push(Oe),Et&Pt&&kt.push(pe),kt},directionTest:function(Et){var kt=this.options,$t=!0,le=Et.distance,me=Et.direction,Ee=Et.deltaX,Ye=Et.deltaY;return me&kt.direction||(kt.direction&ht?(me=Ee===0?et:Ee<0?nt:st,$t=Ee!=this.pX,le=Math.abs(Et.deltaX)):(me=Ye===0?et:Ye<0?ut:rt,$t=Ye!=this.pY,le=Math.abs(Et.deltaY))),Et.direction=me,$t&&le>kt.threshold&&me&kt.direction},attrTest:function(Et){return Te.prototype.attrTest.call(this,Et)&&(this.state&ke||!(this.state&ke)&&this.directionTest(Et))},emit:function(Et){this.pX=Et.deltaX,this.pY=Et.deltaY;var kt=ue(Et.direction);kt&&(Et.additionalEvent=this.options.event+kt),this._super.emit.call(this,Et)}});function Vt(){Te.apply(this,arguments)}a(Vt,Te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(Et){return this._super.attrTest.call(this,Et)&&(Math.abs(Et.scale-1)>this.options.threshold||this.state&ke)},emit:function(Et){if(Et.scale!==1){var kt=Et.scale<1?"in":"out";Et.additionalEvent=this.options.event+kt}this._super.emit.call(this,Et)}});function qt(){Bt.apply(this,arguments),this._timer=null,this._input=null}a(qt,Bt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pe]},process:function(Et){var kt=this.options,$t=Et.pointers.length===kt.pointers,le=Et.distance<kt.threshold,me=Et.deltaTime>kt.time;if(this._input=Et,!le||!$t||Et.eventType&(J|Q)&&!me)this.reset();else if(Et.eventType&$)this.reset(),this._timer=o(function(){this.state=at,this.tryEmit()},kt.time,this);else if(Et.eventType&J)return at;return bt},reset:function(){clearTimeout(this._timer)},emit:function(Et){this.state===at&&(Et&&Et.eventType&J?this.manager.emit(this.options.event+"up",Et):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}});function ae(){Te.apply(this,arguments)}a(ae,Te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(Et){return this._super.attrTest.call(this,Et)&&(Math.abs(Et.rotation)>this.options.threshold||this.state&ke)}});function ve(){Te.apply(this,arguments)}a(ve,Te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ht|Pt,pointers:1},getTouchAction:function(){return He.prototype.getTouchAction.call(this)},attrTest:function(Et){var kt=this.options.direction,$t;return kt&(ht|Pt)?$t=Et.overallVelocity:kt&ht?$t=Et.overallVelocityX:kt&Pt&&($t=Et.overallVelocityY),this._super.attrTest.call(this,Et)&&kt&Et.offsetDirection&&Et.distance>this.options.threshold&&Et.maxPointers==this.options.pointers&&v($t)>this.options.velocity&&Et.eventType&J},emit:function(Et){var kt=ue(Et.offsetDirection);kt&&this.manager.emit(this.options.event+kt,Et),this.manager.emit(this.options.event,Et)}});function xe(){Bt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}a(xe,Bt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[De]},process:function(Et){var kt=this.options,$t=Et.pointers.length===kt.pointers,le=Et.distance<kt.threshold,me=Et.deltaTime<kt.time;if(this.reset(),Et.eventType&$&&this.count===0)return this.failTimeout();if(le&&me&&$t){if(Et.eventType!=J)return this.failTimeout();var Ee=this.pTime?Et.timeStamp-this.pTime<kt.interval:!0,Ye=!this.pCenter||zt(this.pCenter,Et.center)<kt.posThreshold;this.pTime=Et.timeStamp,this.pCenter=Et.center,!Ye||!Ee?this.count=1:this.count+=1,this._input=Et;var Qe=this.count%kt.taps;if(Qe===0)return this.hasRequireFailures()?(this._timer=o(function(){this.state=at,this.tryEmit()},kt.interval,this),ke):at}return bt},failTimeout:function(){return this._timer=o(function(){this.state=bt},this.options.interval,this),bt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==at&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ye(Et,kt){return kt=kt||{},kt.recognizers=h(kt.recognizers,ye.defaults.preset),new we(Et,kt)}ye.VERSION="2.0.7",ye.defaults={domEvents:!1,touchAction:Se,enable:!0,inputTarget:null,inputClass:null,preset:[[ae,{enable:!1}],[Vt,{enable:!1},["rotate"]],[ve,{direction:ht}],[He,{direction:ht},["swipe"]],[xe],[xe,{event:"doubletap",taps:2},["tap"]],[qt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Le=1,Fe=2;function we(Et,kt){this.options=s({},ye.defaults,kt||{}),this.options.inputTarget=this.options.inputTarget||Et,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Et,this.input=Rt(this),this.touchAction=new Ve(this,this.options.touchAction),ze(this,!0),l(this.options.recognizers,function($t){var le=this.add(new $t[0]($t[1]));$t[2]&&le.recognizeWith($t[2]),$t[3]&&le.requireFailure($t[3])},this)}we.prototype={set:function(Et){return s(this.options,Et),Et.touchAction&&this.touchAction.update(),Et.inputTarget&&(this.input.destroy(),this.input.target=Et.inputTarget,this.input.init()),this},stop:function(Et){this.session.stopped=Et?Fe:Le},recognize:function(Et){var kt=this.session;if(!kt.stopped){this.touchAction.preventDefaults(Et);var $t,le=this.recognizers,me=kt.curRecognizer;(!me||me&&me.state&at)&&(me=kt.curRecognizer=null);for(var Ee=0;Ee<le.length;)$t=le[Ee],kt.stopped!==Fe&&(!me||$t==me||$t.canRecognizeWith(me))?$t.recognize(Et):$t.reset(),!me&&$t.state&(ke|Ze|_)&&(me=kt.curRecognizer=$t),Ee++}},get:function(Et){if(Et instanceof Bt)return Et;for(var kt=this.recognizers,$t=0;$t<kt.length;$t++)if(kt[$t].options.event==Et)return kt[$t];return null},add:function(Et){if(u(Et,"add",this))return this;var kt=this.get(Et.options.event);return kt&&this.remove(kt),this.recognizers.push(Et),Et.manager=this,this.touchAction.update(),Et},remove:function(Et){if(u(Et,"remove",this))return this;if(Et=this.get(Et),Et){var kt=this.recognizers,$t=S(kt,Et);$t!==-1&&(kt.splice($t,1),this.touchAction.update())}return this},on:function(Et,kt){if(Et!==T&&kt!==T){var $t=this.handlers;return l(w(Et),function(le){$t[le]=$t[le]||[],$t[le].push(kt)}),this}},off:function(Et,kt){if(Et!==T){var $t=this.handlers;return l(w(Et),function(le){kt?$t[le]&&$t[le].splice(S($t[le],kt),1):delete $t[le]}),this}},emit:function(Et,kt){this.options.domEvents&&Ge(Et,kt);var $t=this.handlers[Et]&&this.handlers[Et].slice();if(!(!$t||!$t.length)){kt.type=Et,kt.preventDefault=function(){kt.srcEvent.preventDefault()};for(var le=0;le<$t.length;)$t[le](kt),le++}},destroy:function(){this.element&&ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ze(Et,kt){var $t=Et.element;if($t.style){var le;l(Et.options.cssProps,function(me,Ee){le=k($t.style,Ee),kt?(Et.oldCssProps[le]=$t.style[le],$t.style[le]=me):$t.style[le]=Et.oldCssProps[le]||""}),kt||(Et.oldCssProps={})}}function Ge(Et,kt){var $t=R.createEvent("Event");$t.initEvent(Et,!0,!0),$t.gesture=kt,kt.target.dispatchEvent($t)}s(ye,{INPUT_START:$,INPUT_MOVE:K,INPUT_END:J,INPUT_CANCEL:Q,STATE_POSSIBLE:Ue,STATE_BEGAN:ke,STATE_CHANGED:Ze,STATE_ENDED:_,STATE_RECOGNIZED:at,STATE_CANCELLED:xt,STATE_FAILED:bt,DIRECTION_NONE:et,DIRECTION_LEFT:nt,DIRECTION_RIGHT:st,DIRECTION_UP:ut,DIRECTION_DOWN:rt,DIRECTION_HORIZONTAL:ht,DIRECTION_VERTICAL:Pt,DIRECTION_ALL:wt,Manager:we,Input:Lt,TouchAction:Ve,TouchInput:ne,MouseInput:ot,PointerEventInput:Gt,TouchMouseInput:It,SingleTouchInput:te,Recognizer:Bt,AttrRecognizer:Te,Tap:xe,Pan:He,Swipe:ve,Pinch:Vt,Rotate:ae,Press:qt,on:g,off:d,each:l,merge:x,extend:c,assign:s,inherit:a,bindFn:i,prefixed:k});var We=typeof F<"u"?F:typeof self<"u"?self:{};We.Hammer=ye,M=function(){return ye}.call(z,e,z,X),M!==T&&(X.exports=M)})(window,document,"Hammer")},84973:function(X,z,e){"use strict";function M(i){var n=Array.prototype.slice.call(arguments,1);return n.forEach(function(h){h&&Object.keys(h).forEach(function(g){i[g]=h[g]})}),i}function F(i){return Object.prototype.toString.call(i)}function R(i){return F(i)==="[object String]"}function A(i){return F(i)==="[object Object]"}function T(i){return F(i)==="[object RegExp]"}function D(i){return F(i)==="[object Function]"}function b(i){return i.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var C={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function f(i){return Object.keys(i||{}).reduce(function(n,h){return n||C.hasOwnProperty(h)},!1)}var v={"http:":{validate:function(i,n,h){var g=i.slice(n);return h.re.http||(h.re.http=new RegExp("^\\/\\/"+h.re.src_auth+h.re.src_host_port_strict+h.re.src_path,"i")),h.re.http.test(g)?g.match(h.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(i,n,h){var g=i.slice(n);return h.re.no_http||(h.re.no_http=new RegExp("^"+h.re.src_auth+"(?:localhost|(?:(?:"+h.re.src_domain+")\\.)+"+h.re.src_domain_root+")"+h.re.src_port+h.re.src_host_terminator+h.re.src_path,"i")),h.re.no_http.test(g)?n>=3&&i[n-3]===":"||n>=3&&i[n-3]==="/"?0:g.match(h.re.no_http)[0].length:0}},"mailto:":{validate:function(i,n,h){var g=i.slice(n);return h.re.mailto||(h.re.mailto=new RegExp("^"+h.re.src_email_name+"@"+h.re.src_host_strict,"i")),h.re.mailto.test(g)?g.match(h.re.mailto)[0].length:0}}},m="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",o="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function u(i){i.__index__=-1,i.__text_cache__=""}function l(i){return function(n,h){var g=n.slice(h);return i.test(g)?g.match(i)[0].length:0}}function r(){return function(i,n){n.normalize(i)}}function s(i){var n=i.re=e(97066)(i.__opts__),h=i.__tlds__.slice();i.onCompile(),i.__tlds_replaced__||h.push(m),h.push(n.src_xn),n.src_tlds=h.join("|");function g(w){return w.replace("%TLDS%",n.src_tlds)}n.email_fuzzy=RegExp(g(n.tpl_email_fuzzy),"i"),n.link_fuzzy=RegExp(g(n.tpl_link_fuzzy),"i"),n.link_no_ip_fuzzy=RegExp(g(n.tpl_link_no_ip_fuzzy),"i"),n.host_fuzzy_test=RegExp(g(n.tpl_host_fuzzy_test),"i");var d=[];i.__compiled__={};function y(w,S){throw new Error('(LinkifyIt) Invalid schema "'+w+'": '+S)}Object.keys(i.__schemas__).forEach(function(w){var S=i.__schemas__[w];if(S!==null){var O={validate:null,link:null};if(i.__compiled__[w]=O,A(S)){T(S.validate)?O.validate=l(S.validate):D(S.validate)?O.validate=S.validate:y(w,S),D(S.normalize)?O.normalize=S.normalize:S.normalize?y(w,S):O.normalize=r();return}if(R(S)){d.push(w);return}y(w,S)}}),d.forEach(function(w){i.__compiled__[i.__schemas__[w]]&&(i.__compiled__[w].validate=i.__compiled__[i.__schemas__[w]].validate,i.__compiled__[w].normalize=i.__compiled__[i.__schemas__[w]].normalize)}),i.__compiled__[""]={validate:null,normalize:r()};var p=Object.keys(i.__compiled__).filter(function(w){return w.length>0&&i.__compiled__[w]}).map(b).join("|");i.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+n.src_ZPCc+"))("+p+")","i"),i.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+n.src_ZPCc+"))("+p+")","ig"),i.re.pretest=RegExp("("+i.re.schema_test.source+")|("+i.re.host_fuzzy_test.source+")|@","i"),u(i)}function c(i,n){var h=i.__index__,g=i.__last_index__,d=i.__text_cache__.slice(h,g);this.schema=i.__schema__.toLowerCase(),this.index=h+n,this.lastIndex=g+n,this.raw=d,this.text=d,this.url=d}function x(i,n){var h=new c(i,n);return i.__compiled__[h.schema].normalize(h,i),h}function a(i,n){if(!(this instanceof a))return new a(i,n);n||f(i)&&(n=i,i={}),this.__opts__=M({},C,n),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=M({},v,i),this.__compiled__={},this.__tlds__=o,this.__tlds_replaced__=!1,this.re={},s(this)}a.prototype.add=function(n,h){return this.__schemas__[n]=h,s(this),this},a.prototype.set=function(n){return this.__opts__=M(this.__opts__,n),this},a.prototype.test=function(n){if(this.__text_cache__=n,this.__index__=-1,!n.length)return!1;var h,g,d,y,p,w,S,O,B;if(this.re.schema_test.test(n)){for(S=this.re.schema_search,S.lastIndex=0;(h=S.exec(n))!==null;)if(y=this.testSchemaAt(n,h[2],S.lastIndex),y){this.__schema__=h[2],this.__index__=h.index+h[1].length,this.__last_index__=h.index+h[0].length+y;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(O=n.search(this.re.host_fuzzy_test),O>=0&&(this.__index__<0||O<this.__index__)&&(g=n.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(p=g.index+g[1].length,(this.__index__<0||p<this.__index__)&&(this.__schema__="",this.__index__=p,this.__last_index__=g.index+g[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(B=n.indexOf("@"),B>=0&&(d=n.match(this.re.email_fuzzy))!==null&&(p=d.index+d[1].length,w=d.index+d[0].length,(this.__index__<0||p<this.__index__||p===this.__index__&&w>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=p,this.__last_index__=w))),this.__index__>=0},a.prototype.pretest=function(n){return this.re.pretest.test(n)},a.prototype.testSchemaAt=function(n,h,g){return this.__compiled__[h.toLowerCase()]?this.__compiled__[h.toLowerCase()].validate(n,g,this):0},a.prototype.match=function(n){var h=0,g=[];this.__index__>=0&&this.__text_cache__===n&&(g.push(x(this,h)),h=this.__last_index__);for(var d=h?n.slice(h):n;this.test(d);)g.push(x(this,h)),d=d.slice(this.__last_index__),h+=this.__last_index__;return g.length?g:null},a.prototype.tlds=function(n,h){return n=Array.isArray(n)?n:[n],h?(this.__tlds__=this.__tlds__.concat(n).sort().filter(function(g,d,y){return g!==y[d-1]}).reverse(),s(this),this):(this.__tlds__=n.slice(),this.__tlds_replaced__=!0,s(this),this)},a.prototype.normalize=function(n){n.schema||(n.url="http://"+n.url),n.schema==="mailto:"&&!/^mailto:/i.test(n.url)&&(n.url="mailto:"+n.url)},a.prototype.onCompile=function(){},X.exports=a},97066:function(X,z,e){"use strict";X.exports=function(M){var F={};F.src_Any=e(50757).source,F.src_Cc=e(18436).source,F.src_Z=e(87613).source,F.src_P=e(97942).source,F.src_ZPCc=[F.src_Z,F.src_P,F.src_Cc].join("|"),F.src_ZCc=[F.src_Z,F.src_Cc].join("|");var R="[><\uFF5C]";return F.src_pseudo_letter="(?:(?!"+R+"|"+F.src_ZPCc+")"+F.src_Any+")",F.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",F.src_auth="(?:(?:(?!"+F.src_ZCc+"|[@/\\[\\]()]).)+@)?",F.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",F.src_host_terminator="(?=$|"+R+"|"+F.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+F.src_ZPCc+"))",F.src_path="(?:[/?#](?:(?!"+F.src_ZCc+"|"+R+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+F.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+F.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+F.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+F.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+F.src_ZCc+"|[']).)+\\'|\\'(?="+F.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+F.src_ZCc+"|[.]).|"+(M&&M["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+F.src_ZCc+").|\\!(?!"+F.src_ZCc+"|[!]).|\\?(?!"+F.src_ZCc+"|[?]).)+|\\/)?",F.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',F.src_xn="xn--[a-z0-9\\-]{1,59}",F.src_domain_root="(?:"+F.src_xn+"|"+F.src_pseudo_letter+"{1,63})",F.src_domain="(?:"+F.src_xn+"|(?:"+F.src_pseudo_letter+")|(?:"+F.src_pseudo_letter+"(?:-|"+F.src_pseudo_letter+"){0,61}"+F.src_pseudo_letter+"))",F.src_host="(?:(?:(?:(?:"+F.src_domain+")\\.)*"+F.src_domain+"))",F.tpl_host_fuzzy="(?:"+F.src_ip4+"|(?:(?:(?:"+F.src_domain+")\\.)+(?:%TLDS%)))",F.tpl_host_no_ip_fuzzy="(?:(?:(?:"+F.src_domain+")\\.)+(?:%TLDS%))",F.src_host_strict=F.src_host+F.src_host_terminator,F.tpl_host_fuzzy_strict=F.tpl_host_fuzzy+F.src_host_terminator,F.src_host_port_strict=F.src_host+F.src_port+F.src_host_terminator,F.tpl_host_port_fuzzy_strict=F.tpl_host_fuzzy+F.src_port+F.src_host_terminator,F.tpl_host_port_no_ip_fuzzy_strict=F.tpl_host_no_ip_fuzzy+F.src_port+F.src_host_terminator,F.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+F.src_ZPCc+"|>|$))",F.tpl_email_fuzzy="(^|"+R+'|"|\\(|'+F.src_ZCc+")("+F.src_email_name+"@"+F.tpl_host_fuzzy_strict+")",F.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+F.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+F.tpl_host_port_fuzzy_strict+F.src_path+")",F.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+F.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+F.tpl_host_port_no_ip_fuzzy_strict+F.src_path+")",F}},6448:function(X){"use strict";X.exports=function(e,M){var F=e.linkify,R=e.utils.escapeHtml,A='<a\\s([^<>]*href="[^"<>]*"[^<>]*)\\s?>',T=RegExp(A,"i"),D='<img\\s([^<>]*src="[^"<>]*"[^<>]*)\\s?\\/?>',b=RegExp(D,"i"),C=/^(?:https?:)?\/\//i,f=/^(?:https?:\/\/|ftp:\/\/|\/\/|mailto:|xmpp:)/i;M=M||{};var v=typeof M.removeUnknown<"u"?M.removeUnknown:!1,m=typeof M.removeUnbalanced<"u"?M.removeUnbalanced:!1,o=typeof M.imageClass<"u"?M.imageClass:"",u=!1,l,r=["a","b","blockquote","code","em","h1","h2","h3","h4","h5","h6","li","ol","p","pre","s","sub","sup","strong","ul"],s=new Array(r.length),c=new Array(r.length);for(l=0;l<r.length;l++)s[l]=0;for(l=0;l<r.length;l++)c[l]=!1;function x(h){var g=F.match(h);return g&&g.length===1&&g[0].index===0&&g[0].lastIndex===h.length?g[0].url:null}function a(h){return h=h.replace(/<[^<>]*>?/gi,function(g){var d,y,p,w,S,O;return/(^<->|^<-\s|^<3\s)/.test(g)?g:(d=g.match(b),d&&(y=d[1],p=x(y.match(/src="([^"<>]*)"/i)[1]),w=y.match(/alt="([^"<>]*)"/i),w=w&&typeof w[1]<"u"?w[1]:"",S=y.match(/title="([^"<>]*)"/i),S=S&&typeof S[1]<"u"?S[1]:"",p&&C.test(p))?o!==""?'<img src="'+p+'" alt="'+w+'" title="'+S+'" class="'+o+'">':'<img src="'+p+'" alt="'+w+'" title="'+S+'">':(O=r.indexOf("a"),d=g.match(T),d&&(y=d[1],p=x(y.match(/href="([^"<>]*)"/i)[1]),S=y.match(/title="([^"<>]*)"/i),S=S&&typeof S[1]<"u"?S[1]:"",p&&f.test(p))?(u=!0,s[O]+=1,'<a href="'+p+'" title="'+S+'" target="_blank">'):(d=/<\/a>/i.test(g),d?(u=!0,s[O]-=1,s[O]<0&&(c[O]=!0),"</a>"):(d=g.match(/<(br|hr)\s?\/?>/i),d?"<"+d[1].toLowerCase()+">":(d=g.match(/<(\/?)(b|blockquote|code|em|h[1-6]|li|ol(?: start="\d+")?|p|pre|s|sub|sup|strong|ul)>/i),d&&!/<\/ol start="\d+"/i.test(g)?(u=!0,O=r.indexOf(d[2].toLowerCase().split(" ")[0]),d[1]==="/"?s[O]-=1:s[O]+=1,s[O]<0&&(c[O]=!0),"<"+d[1]+d[2].toLowerCase()+">"):v===!0?"":R(g))))))}),h}function i(h){var g,d,y;for(l=0;l<r.length;l++)s[l]=0;for(l=0;l<r.length;l++)c[l]=!1;for(u=!1,d=0;d<h.tokens.length;d++)if(h.tokens[d].type==="html_block"&&(h.tokens[d].content=a(h.tokens[d].content)),h.tokens[d].type==="inline")for(y=h.tokens[d].children,g=0;g<y.length;g++)y[g].type==="html_inline"&&(y[g].content=a(y[g].content))}function n(h){if(u===!1)return;var g,d;function y(w,S){var O,B;return S==="a"?O=RegExp('<a href="[^"<>]*" title="[^"<>]*" target="_blank">',"g"):S==="ol"?O=/<ol(?: start="\d+")?>/g:O=RegExp("<"+S+">","g"),B=RegExp("</"+S+">","g"),m===!0?(w=w.replace(O,""),w=w.replace(B,"")):(w=w.replace(O,function(k){return R(k)}),w=w.replace(B,function(k){return R(k)})),w}function p(w){var S;for(S=0;S<r.length;S++)c[S]===!0&&(w=y(w,r[S]));return w}for(l=0;l<r.length;l++)s[l]!==0&&(c[l]=!0);for(g=0;g<h.tokens.length;g++){if(h.tokens[g].type==="html_block"){h.tokens[g].content=p(h.tokens[g].content);continue}if(h.tokens[g].type==="inline")for(d=h.tokens[g].children,l=0;l<d.length;l++)d[l].type==="html_inline"&&(d[l].content=p(d[l].content))}}e.core.ruler.after("linkify","sanitize_inline",i),e.core.ruler.after("sanitize_inline","sanitize_balance",n)}},30479:function(X,z,e){"use strict";X.exports=e(57125)},6009:function(X,z,e){"use strict";X.exports=e(73267)},72785:function(X){"use strict";X.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},78392:function(X){"use strict";var z="[a-zA-Z_:][a-zA-Z0-9:._-]*",e="[^\"'=<>`\\x00-\\x20]+",M="'[^']*'",F='"[^"]*"',R="(?:"+e+"|"+M+"|"+F+")",A="(?:\\s+"+z+"(?:\\s*=\\s*"+R+")?)",T="<[A-Za-z][A-Za-z0-9\\-]*"+A+"*\\s*\\/?>",D="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",b="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",C="<[?].*?[?]>",f="<![A-Z]+\\s+[^>]*>",v="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",m=new RegExp("^(?:"+T+"|"+D+"|"+b+"|"+C+"|"+f+"|"+v+")"),o=new RegExp("^(?:"+T+"|"+D+")");X.exports.n=m,X.exports.q=o},17200:function(X,z,e){"use strict";function M(B){return Object.prototype.toString.call(B)}function F(B){return M(B)==="[object String]"}var R=Object.prototype.hasOwnProperty;function A(B,k){return R.call(B,k)}function T(B){var k=Array.prototype.slice.call(arguments,1);return k.forEach(function(P){if(P){if(typeof P!="object")throw new TypeError(P+"must be object");Object.keys(P).forEach(function(L){B[L]=P[L]})}}),B}function D(B,k,P){return[].concat(B.slice(0,k),P,B.slice(k+1))}function b(B){return!(B>=55296&&B<=57343||B>=64976&&B<=65007||(B&65535)===65535||(B&65535)===65534||B>=0&&B<=8||B===11||B>=14&&B<=31||B>=127&&B<=159||B>1114111)}function C(B){if(B>65535){B-=65536;var k=55296+(B>>10),P=56320+(B&1023);return String.fromCharCode(k,P)}return String.fromCharCode(B)}var f=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,v=/&([a-z#][a-z0-9]{1,31});/gi,m=new RegExp(f.source+"|"+v.source,"gi"),o=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,u=e(6009);function l(B,k){var P=0;return A(u,k)?u[k]:k.charCodeAt(0)===35&&o.test(k)&&(P=k[1].toLowerCase()==="x"?parseInt(k.slice(2),16):parseInt(k.slice(1),10),b(P))?C(P):B}function r(B){return B.indexOf("\\")<0?B:B.replace(f,"$1")}function s(B){return B.indexOf("\\")<0&&B.indexOf("&")<0?B:B.replace(m,function(k,P,L){return P||l(k,L)})}var c=/[&<>"]/,x=/[&<>"]/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function i(B){return a[B]}function n(B){return c.test(B)?B.replace(x,i):B}var h=/[.?*+^$[\]\\(){}|-]/g;function g(B){return B.replace(h,"\\$&")}function d(B){switch(B){case 9:case 32:return!0}return!1}function y(B){if(B>=8192&&B<=8202)return!0;switch(B){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var p=e(97942);function w(B){return p.test(B)}function S(B){switch(B){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function O(B){return B.trim().replace(/\s+/g," ").toUpperCase()}z.lib={},z.lib.mdurl=e(12449),z.lib.ucmicro=e(65585),z.assign=T,z.isString=F,z.has=A,z.unescapeMd=r,z.unescapeAll=s,z.isValidEntityCode=b,z.fromCodePoint=C,z.escapeHtml=n,z.arrayReplaceAt=D,z.isSpace=d,z.isWhiteSpace=y,z.isMdAsciiPunct=S,z.isPunctChar=w,z.escapeRE=g,z.normalizeReference=O},88361:function(X,z,e){"use strict";z.parseLinkLabel=e(64299),z.parseLinkDestination=e(27668),z.parseLinkTitle=e(64298)},27668:function(X,z,e){"use strict";var M=e(17200).isSpace,F=e(17200).unescapeAll;X.exports=function(A,T,D){var b,C,f=0,v=T,m={ok:!1,pos:0,lines:0,str:""};if(A.charCodeAt(T)===60){for(T++;T<D;){if(b=A.charCodeAt(T),b===10||M(b))return m;if(b===62)return m.pos=T+1,m.str=F(A.slice(v+1,T)),m.ok=!0,m;if(b===92&&T+1<D){T+=2;continue}T++}return m}for(C=0;T<D&&(b=A.charCodeAt(T),!(b===32||b<32||b===127));){if(b===92&&T+1<D){T+=2;continue}if(b===40&&C++,b===41){if(C===0)break;C--}T++}return v===T||C!==0||(m.str=F(A.slice(v,T)),m.lines=f,m.pos=T,m.ok=!0),m}},64299:function(X){"use strict";X.exports=function(e,M,F){var R,A,T,D,b=-1,C=e.posMax,f=e.pos;for(e.pos=M+1,R=1;e.pos<C;){if(T=e.src.charCodeAt(e.pos),T===93&&(R--,R===0)){A=!0;break}if(D=e.pos,e.md.inline.skipToken(e),T===91){if(D===e.pos-1)R++;else if(F)return e.pos=f,-1}}return A&&(b=e.pos),e.pos=f,b}},64298:function(X,z,e){"use strict";var M=e(17200).unescapeAll;X.exports=function(R,A,T){var D,b,C=0,f=A,v={ok:!1,pos:0,lines:0,str:""};if(A>=T||(b=R.charCodeAt(A),b!==34&&b!==39&&b!==40))return v;for(A++,b===40&&(b=41);A<T;){if(D=R.charCodeAt(A),D===b)return v.pos=A+1,v.lines=C,v.str=M(R.slice(f+1,A)),v.ok=!0,v;D===10?C++:D===92&&A+1<T&&(A++,R.charCodeAt(A)===10&&C++),A++}return v}},57125:function(X,z,e){"use strict";var M=e(17200),F=e(88361),R=e(58311),A=e(18676),T=e(34680),D=e(86125),b=e(84973),C=e(12449),f=e(67290),v={default:e(73635),zero:e(79881),commonmark:e(3545)},m=/^(vbscript|javascript|file|data):/,o=/^data:image\/(gif|png|jpeg|webp);/;function u(x){var a=x.trim().toLowerCase();return m.test(a)?!!o.test(a):!0}var l=["http:","https:","mailto:"];function r(x){var a=C.parse(x,!0);if(a.hostname&&(!a.protocol||l.indexOf(a.protocol)>=0))try{a.hostname=f.toASCII(a.hostname)}catch{}return C.encode(C.format(a))}function s(x){var a=C.parse(x,!0);if(a.hostname&&(!a.protocol||l.indexOf(a.protocol)>=0))try{a.hostname=f.toUnicode(a.hostname)}catch{}return C.decode(C.format(a))}function c(x,a){if(!(this instanceof c))return new c(x,a);a||M.isString(x)||(a=x||{},x="default"),this.inline=new D,this.block=new T,this.core=new A,this.renderer=new R,this.linkify=new b,this.validateLink=u,this.normalizeLink=r,this.normalizeLinkText=s,this.utils=M,this.helpers=M.assign({},F),this.options={},this.configure(x),a&&this.set(a)}c.prototype.set=function(x){return M.assign(this.options,x),this},c.prototype.configure=function(x){var a=this,i;if(M.isString(x)&&(i=x,x=v[i],!x))throw new Error('Wrong `markdown-it` preset "'+i+'", check name');if(!x)throw new Error("Wrong `markdown-it` preset, can't be empty");return x.options&&a.set(x.options),x.components&&Object.keys(x.components).forEach(function(n){x.components[n].rules&&a[n].ruler.enableOnly(x.components[n].rules),x.components[n].rules2&&a[n].ruler2.enableOnly(x.components[n].rules2)}),this},c.prototype.enable=function(x,a){var i=[];Array.isArray(x)||(x=[x]),["core","block","inline"].forEach(function(h){i=i.concat(this[h].ruler.enable(x,!0))},this),i=i.concat(this.inline.ruler2.enable(x,!0));var n=x.filter(function(h){return i.indexOf(h)<0});if(n.length&&!a)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},c.prototype.disable=function(x,a){var i=[];Array.isArray(x)||(x=[x]),["core","block","inline"].forEach(function(h){i=i.concat(this[h].ruler.disable(x,!0))},this),i=i.concat(this.inline.ruler2.disable(x,!0));var n=x.filter(function(h){return i.indexOf(h)<0});if(n.length&&!a)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},c.prototype.use=function(x){var a=[this].concat(Array.prototype.slice.call(arguments,1));return x.apply(x,a),this},c.prototype.parse=function(x,a){if(typeof x!="string")throw new Error("Input data should be a String");var i=new this.core.State(x,this,a);return this.core.process(i),i.tokens},c.prototype.render=function(x,a){return a=a||{},this.renderer.render(this.parse(x,a),this.options,a)},c.prototype.parseInline=function(x,a){var i=new this.core.State(x,this,a);return i.inlineMode=!0,this.core.process(i),i.tokens},c.prototype.renderInline=function(x,a){return a=a||{},this.renderer.render(this.parseInline(x,a),this.options,a)},X.exports=c},34680:function(X,z,e){"use strict";var M=e(85100),F=[["table",e(63361),["paragraph","reference"]],["code",e(47348)],["fence",e(31625),["paragraph","reference","blockquote","list"]],["blockquote",e(70628),["paragraph","reference","blockquote","list"]],["hr",e(17312),["paragraph","reference","blockquote","list"]],["list",e(18304),["paragraph","reference","blockquote"]],["reference",e(83880)],["heading",e(19505),["paragraph","reference","blockquote"]],["lheading",e(1568)],["html_block",e(57694),["paragraph","reference","blockquote"]],["paragraph",e(61864)]];function R(){this.ruler=new M;for(var A=0;A<F.length;A++)this.ruler.push(F[A][0],F[A][1],{alt:(F[A][2]||[]).slice()})}R.prototype.tokenize=function(A,T,D){for(var b,C,f=this.ruler.getRules(""),v=f.length,m=T,o=!1,u=A.md.options.maxNesting;m<D&&(A.line=m=A.skipEmptyLines(m),!(m>=D||A.sCount[m]<A.blkIndent));){if(A.level>=u){A.line=D;break}for(C=0;C<v&&(b=f[C](A,m,D,!1),!b);C++);A.tight=!o,A.isEmpty(A.line-1)&&(o=!0),m=A.line,m<D&&A.isEmpty(m)&&(o=!0,m++,A.line=m)}},R.prototype.parse=function(A,T,D,b){var C;A&&(C=new this.State(A,T,D,b),this.tokenize(C,C.line,C.lineMax))},R.prototype.State=e(4412),X.exports=R},18676:function(X,z,e){"use strict";var M=e(85100),F=[["normalize",e(66834)],["block",e(83218)],["inline",e(85e3)],["linkify",e(84496)],["replacements",e(84896)],["smartquotes",e(58062)]];function R(){this.ruler=new M;for(var A=0;A<F.length;A++)this.ruler.push(F[A][0],F[A][1])}R.prototype.process=function(A){var T,D,b;for(b=this.ruler.getRules(""),T=0,D=b.length;T<D;T++)b[T](A)},R.prototype.State=e(23406),X.exports=R},86125:function(X,z,e){"use strict";var M=e(85100),F=[["text",e(88623)],["newline",e(7370)],["escape",e(20095)],["backticks",e(89247)],["strikethrough",e(77202).w],["emphasis",e(66881).w],["link",e(13676)],["image",e(77711)],["autolink",e(6066)],["html_inline",e(92573)],["entity",e(15969)]],R=[["balance_pairs",e(38349)],["strikethrough",e(77202).g],["emphasis",e(66881).g],["text_collapse",e(90823)]];function A(){var T;for(this.ruler=new M,T=0;T<F.length;T++)this.ruler.push(F[T][0],F[T][1]);for(this.ruler2=new M,T=0;T<R.length;T++)this.ruler2.push(R[T][0],R[T][1])}A.prototype.skipToken=function(T){var D,b,C=T.pos,f=this.ruler.getRules(""),v=f.length,m=T.md.options.maxNesting,o=T.cache;if(typeof o[C]<"u"){T.pos=o[C];return}if(T.level<m)for(b=0;b<v&&(T.level++,D=f[b](T,!0),T.level--,!D);b++);else T.pos=T.posMax;D||T.pos++,o[C]=T.pos},A.prototype.tokenize=function(T){for(var D,b,C=this.ruler.getRules(""),f=C.length,v=T.posMax,m=T.md.options.maxNesting;T.pos<v;){if(T.level<m)for(b=0;b<f&&(D=C[b](T,!1),!D);b++);if(D){if(T.pos>=v)break;continue}T.pending+=T.src[T.pos++]}T.pending&&T.pushPending()},A.prototype.parse=function(T,D,b,C){var f,v,m,o=new this.State(T,D,b,C);for(this.tokenize(o),v=this.ruler2.getRules(""),m=v.length,f=0;f<m;f++)v[f](o)},A.prototype.State=e(43717),X.exports=A},3545:function(X){"use strict";X.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},73635:function(X){"use strict";X.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},79881:function(X){"use strict";X.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},58311:function(X,z,e){"use strict";var M=e(17200).assign,F=e(17200).unescapeAll,R=e(17200).escapeHtml,A={};A.code_inline=function(D,b,C,f,v){var m=D[b];return"<code"+v.renderAttrs(m)+">"+R(D[b].content)+"</code>"},A.code_block=function(D,b,C,f,v){var m=D[b];return"<pre"+v.renderAttrs(m)+"><code>"+R(D[b].content)+`</code></pre>
`},A.fence=function(D,b,C,f,v){var m=D[b],o=m.info?F(m.info).trim():"",u="",l,r,s,c;return o&&(u=o.split(/\s+/g)[0]),C.highlight?l=C.highlight(m.content,u)||R(m.content):l=R(m.content),l.indexOf("<pre")===0?l+`
`:o?(r=m.attrIndex("class"),s=m.attrs?m.attrs.slice():[],r<0?s.push(["class",C.langPrefix+u]):s[r][1]+=" "+C.langPrefix+u,c={attrs:s},"<pre><code"+v.renderAttrs(c)+">"+l+`</code></pre>
`):"<pre><code"+v.renderAttrs(m)+">"+l+`</code></pre>
`},A.image=function(D,b,C,f,v){var m=D[b];return m.attrs[m.attrIndex("alt")][1]=v.renderInlineAsText(m.children,C,f),v.renderToken(D,b,C)},A.hardbreak=function(D,b,C){return C.xhtmlOut?`<br />
`:`<br>
`},A.softbreak=function(D,b,C){return C.breaks?C.xhtmlOut?`<br />
`:`<br>
`:`
`},A.text=function(D,b){return R(D[b].content)},A.html_block=function(D,b){return D[b].content},A.html_inline=function(D,b){return D[b].content};function T(){this.rules=M({},A)}T.prototype.renderAttrs=function(b){var C,f,v;if(!b.attrs)return"";for(v="",C=0,f=b.attrs.length;C<f;C++)v+=" "+R(b.attrs[C][0])+'="'+R(b.attrs[C][1])+'"';return v},T.prototype.renderToken=function(b,C,f){var v,m="",o=!1,u=b[C];return u.hidden?"":(u.block&&u.nesting!==-1&&C&&b[C-1].hidden&&(m+=`
`),m+=(u.nesting===-1?"</":"<")+u.tag,m+=this.renderAttrs(u),u.nesting===0&&f.xhtmlOut&&(m+=" /"),u.block&&(o=!0,u.nesting===1&&C+1<b.length&&(v=b[C+1],(v.type==="inline"||v.hidden||v.nesting===-1&&v.tag===u.tag)&&(o=!1))),m+=o?`>
`:">",m)},T.prototype.renderInline=function(D,b,C){for(var f,v="",m=this.rules,o=0,u=D.length;o<u;o++)f=D[o].type,typeof m[f]<"u"?v+=m[f](D,o,b,C,this):v+=this.renderToken(D,o,b);return v},T.prototype.renderInlineAsText=function(D,b,C){for(var f="",v=0,m=D.length;v<m;v++)D[v].type==="text"?f+=D[v].content:D[v].type==="image"&&(f+=this.renderInlineAsText(D[v].children,b,C));return f},T.prototype.render=function(D,b,C){var f,v,m,o="",u=this.rules;for(f=0,v=D.length;f<v;f++)m=D[f].type,m==="inline"?o+=this.renderInline(D[f].children,b,C):typeof u[m]<"u"?o+=u[D[f].type](D,f,b,C,this):o+=this.renderToken(D,f,b,C);return o},X.exports=T},85100:function(X){"use strict";function z(){this.__rules__=[],this.__cache__=null}z.prototype.__find__=function(e){for(var M=0;M<this.__rules__.length;M++)if(this.__rules__[M].name===e)return M;return-1},z.prototype.__compile__=function(){var e=this,M=[""];e.__rules__.forEach(function(F){F.enabled&&F.alt.forEach(function(R){M.indexOf(R)<0&&M.push(R)})}),e.__cache__={},M.forEach(function(F){e.__cache__[F]=[],e.__rules__.forEach(function(R){R.enabled&&(F&&R.alt.indexOf(F)<0||e.__cache__[F].push(R.fn))})})},z.prototype.at=function(e,M,F){var R=this.__find__(e),A=F||{};if(R===-1)throw new Error("Parser rule not found: "+e);this.__rules__[R].fn=M,this.__rules__[R].alt=A.alt||[],this.__cache__=null},z.prototype.before=function(e,M,F,R){var A=this.__find__(e),T=R||{};if(A===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(A,0,{name:M,enabled:!0,fn:F,alt:T.alt||[]}),this.__cache__=null},z.prototype.after=function(e,M,F,R){var A=this.__find__(e),T=R||{};if(A===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(A+1,0,{name:M,enabled:!0,fn:F,alt:T.alt||[]}),this.__cache__=null},z.prototype.push=function(e,M,F){var R=F||{};this.__rules__.push({name:e,enabled:!0,fn:M,alt:R.alt||[]}),this.__cache__=null},z.prototype.enable=function(e,M){Array.isArray(e)||(e=[e]);var F=[];return e.forEach(function(R){var A=this.__find__(R);if(A<0){if(M)return;throw new Error("Rules manager: invalid rule name "+R)}this.__rules__[A].enabled=!0,F.push(R)},this),this.__cache__=null,F},z.prototype.enableOnly=function(e,M){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(F){F.enabled=!1}),this.enable(e,M)},z.prototype.disable=function(e,M){Array.isArray(e)||(e=[e]);var F=[];return e.forEach(function(R){var A=this.__find__(R);if(A<0){if(M)return;throw new Error("Rules manager: invalid rule name "+R)}this.__rules__[A].enabled=!1,F.push(R)},this),this.__cache__=null,F},z.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]},X.exports=z},70628:function(X,z,e){"use strict";var M=e(17200).isSpace;X.exports=function(R,A,T,D){var b,C,f,v,m,o,u,l,r,s,c,x,a,i,n,h,g,d,y,p,w=R.lineMax,S=R.bMarks[A]+R.tShift[A],O=R.eMarks[A];if(R.sCount[A]-R.blkIndent>=4||R.src.charCodeAt(S++)!==62)return!1;if(D)return!0;for(v=r=R.sCount[A]+S-(R.bMarks[A]+R.tShift[A]),R.src.charCodeAt(S)===32?(S++,v++,r++,b=!1,h=!0):R.src.charCodeAt(S)===9?(h=!0,(R.bsCount[A]+r)%4===3?(S++,v++,r++,b=!1):b=!0):h=!1,s=[R.bMarks[A]],R.bMarks[A]=S;S<O&&(C=R.src.charCodeAt(S),M(C));){C===9?r+=4-(r+R.bsCount[A]+(b?1:0))%4:r++;S++}for(c=[R.bsCount[A]],R.bsCount[A]=R.sCount[A]+1+(h?1:0),o=S>=O,i=[R.sCount[A]],R.sCount[A]=r-v,n=[R.tShift[A]],R.tShift[A]=S-R.bMarks[A],d=R.md.block.ruler.getRules("blockquote"),a=R.parentType,R.parentType="blockquote",p=!1,l=A+1;l<T&&(R.sCount[l]<R.blkIndent&&(p=!0),S=R.bMarks[l]+R.tShift[l],O=R.eMarks[l],!(S>=O));l++){if(R.src.charCodeAt(S++)===62&&!p){for(v=r=R.sCount[l]+S-(R.bMarks[l]+R.tShift[l]),R.src.charCodeAt(S)===32?(S++,v++,r++,b=!1,h=!0):R.src.charCodeAt(S)===9?(h=!0,(R.bsCount[l]+r)%4===3?(S++,v++,r++,b=!1):b=!0):h=!1,s.push(R.bMarks[l]),R.bMarks[l]=S;S<O&&(C=R.src.charCodeAt(S),M(C));){C===9?r+=4-(r+R.bsCount[l]+(b?1:0))%4:r++;S++}o=S>=O,c.push(R.bsCount[l]),R.bsCount[l]=R.sCount[l]+1+(h?1:0),i.push(R.sCount[l]),R.sCount[l]=r-v,n.push(R.tShift[l]),R.tShift[l]=S-R.bMarks[l];continue}if(o)break;for(g=!1,f=0,m=d.length;f<m;f++)if(d[f](R,l,T,!0)){g=!0;break}if(g){R.lineMax=l,R.blkIndent!==0&&(s.push(R.bMarks[l]),c.push(R.bsCount[l]),n.push(R.tShift[l]),i.push(R.sCount[l]),R.sCount[l]-=R.blkIndent);break}s.push(R.bMarks[l]),c.push(R.bsCount[l]),n.push(R.tShift[l]),i.push(R.sCount[l]),R.sCount[l]=-1}for(x=R.blkIndent,R.blkIndent=0,y=R.push("blockquote_open","blockquote",1),y.markup=">",y.map=u=[A,0],R.md.block.tokenize(R,A,l),y=R.push("blockquote_close","blockquote",-1),y.markup=">",R.lineMax=w,R.parentType=a,u[1]=R.line,f=0;f<n.length;f++)R.bMarks[f+A]=s[f],R.tShift[f+A]=n[f],R.sCount[f+A]=i[f],R.bsCount[f+A]=c[f];return R.blkIndent=x,!0}},47348:function(X){"use strict";X.exports=function(e,M,F){var R,A,T;if(e.sCount[M]-e.blkIndent<4)return!1;for(A=R=M+1;R<F;){if(e.isEmpty(R)){R++;continue}if(e.sCount[R]-e.blkIndent>=4){R++,A=R;continue}break}return e.line=A,T=e.push("code_block","code",0),T.content=e.getLines(M,A,4+e.blkIndent,!0),T.map=[M,e.line],!0}},31625:function(X){"use strict";X.exports=function(e,M,F,R){var A,T,D,b,C,f,v,m=!1,o=e.bMarks[M]+e.tShift[M],u=e.eMarks[M];if(e.sCount[M]-e.blkIndent>=4||o+3>u||(A=e.src.charCodeAt(o),A!==126&&A!==96)||(C=o,o=e.skipChars(o,A),T=o-C,T<3)||(v=e.src.slice(C,o),D=e.src.slice(o,u),D.indexOf(String.fromCharCode(A))>=0))return!1;if(R)return!0;for(b=M;b++,!(b>=F||(o=C=e.bMarks[b]+e.tShift[b],u=e.eMarks[b],o<u&&e.sCount[b]<e.blkIndent));)if(e.src.charCodeAt(o)===A&&!(e.sCount[b]-e.blkIndent>=4)&&(o=e.skipChars(o,A),!(o-C<T)&&(o=e.skipSpaces(o),!(o<u)))){m=!0;break}return T=e.sCount[M],e.line=b+(m?1:0),f=e.push("fence","code",0),f.info=D,f.content=e.getLines(M+1,b,T,!0),f.markup=v,f.map=[M,e.line],!0}},19505:function(X,z,e){"use strict";var M=e(17200).isSpace;X.exports=function(R,A,T,D){var b,C,f,v,m=R.bMarks[A]+R.tShift[A],o=R.eMarks[A];if(R.sCount[A]-R.blkIndent>=4||(b=R.src.charCodeAt(m),b!==35||m>=o))return!1;for(C=1,b=R.src.charCodeAt(++m);b===35&&m<o&&C<=6;)C++,b=R.src.charCodeAt(++m);return C>6||m<o&&!M(b)?!1:(D||(o=R.skipSpacesBack(o,m),f=R.skipCharsBack(o,35,m),f>m&&M(R.src.charCodeAt(f-1))&&(o=f),R.line=A+1,v=R.push("heading_open","h"+String(C),1),v.markup="########".slice(0,C),v.map=[A,R.line],v=R.push("inline","",0),v.content=R.src.slice(m,o).trim(),v.map=[A,R.line],v.children=[],v=R.push("heading_close","h"+String(C),-1),v.markup="########".slice(0,C)),!0)}},17312:function(X,z,e){"use strict";var M=e(17200).isSpace;X.exports=function(R,A,T,D){var b,C,f,v,m=R.bMarks[A]+R.tShift[A],o=R.eMarks[A];if(R.sCount[A]-R.blkIndent>=4||(b=R.src.charCodeAt(m++),b!==42&&b!==45&&b!==95))return!1;for(C=1;m<o;){if(f=R.src.charCodeAt(m++),f!==b&&!M(f))return!1;f===b&&C++}return C<3?!1:(D||(R.line=A+1,v=R.push("hr","hr",0),v.map=[A,R.line],v.markup=Array(C+1).join(String.fromCharCode(b))),!0)}},57694:function(X,z,e){"use strict";var M=e(72785),F=e(78392).q,R=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+M.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(F.source+"\\s*$"),/^$/,!1]];X.exports=function(T,D,b,C){var f,v,m,o,u=T.bMarks[D]+T.tShift[D],l=T.eMarks[D];if(T.sCount[D]-T.blkIndent>=4||!T.md.options.html||T.src.charCodeAt(u)!==60)return!1;for(o=T.src.slice(u,l),f=0;f<R.length&&!R[f][0].test(o);f++);if(f===R.length)return!1;if(C)return R[f][2];if(v=D+1,!R[f][1].test(o)){for(;v<b&&!(T.sCount[v]<T.blkIndent);v++)if(u=T.bMarks[v]+T.tShift[v],l=T.eMarks[v],o=T.src.slice(u,l),R[f][1].test(o)){o.length!==0&&v++;break}}return T.line=v,m=T.push("html_block","",0),m.map=[D,v],m.content=T.getLines(D,v,T.blkIndent,!0),!0}},1568:function(X){"use strict";X.exports=function(e,M,F){var R,A,T,D,b,C,f,v,m,o=M+1,u,l=e.md.block.ruler.getRules("paragraph");if(e.sCount[M]-e.blkIndent>=4)return!1;for(u=e.parentType,e.parentType="paragraph";o<F&&!e.isEmpty(o);o++)if(!(e.sCount[o]-e.blkIndent>3)){if(e.sCount[o]>=e.blkIndent&&(C=e.bMarks[o]+e.tShift[o],f=e.eMarks[o],C<f&&(m=e.src.charCodeAt(C),(m===45||m===61)&&(C=e.skipChars(C,m),C=e.skipSpaces(C),C>=f)))){v=m===61?1:2;break}if(!(e.sCount[o]<0)){for(A=!1,T=0,D=l.length;T<D;T++)if(l[T](e,o,F,!0)){A=!0;break}if(A)break}}return v?(R=e.getLines(M,o,e.blkIndent,!1).trim(),e.line=o+1,b=e.push("heading_open","h"+String(v),1),b.markup=String.fromCharCode(m),b.map=[M,e.line],b=e.push("inline","",0),b.content=R,b.map=[M,e.line-1],b.children=[],b=e.push("heading_close","h"+String(v),-1),b.markup=String.fromCharCode(m),e.parentType=u,!0):!1}},18304:function(X,z,e){"use strict";var M=e(17200).isSpace;function F(T,D){var b,C,f,v;return C=T.bMarks[D]+T.tShift[D],f=T.eMarks[D],b=T.src.charCodeAt(C++),b!==42&&b!==45&&b!==43||C<f&&(v=T.src.charCodeAt(C),!M(v))?-1:C}function R(T,D){var b,C=T.bMarks[D]+T.tShift[D],f=C,v=T.eMarks[D];if(f+1>=v||(b=T.src.charCodeAt(f++),b<48||b>57))return-1;for(;;){if(f>=v)return-1;if(b=T.src.charCodeAt(f++),b>=48&&b<=57){if(f-C>=10)return-1;continue}if(b===41||b===46)break;return-1}return f<v&&(b=T.src.charCodeAt(f),!M(b))?-1:f}function A(T,D){var b,C,f=T.level+2;for(b=D+2,C=T.tokens.length-2;b<C;b++)T.tokens[b].level===f&&T.tokens[b].type==="paragraph_open"&&(T.tokens[b+2].hidden=!0,T.tokens[b].hidden=!0,b+=2)}X.exports=function(D,b,C,f){var v,m,o,u,l,r,s,c,x,a,i,n,h,g,d,y,p,w,S,O,B,k,P,L,E,N,I,G,W=!1,Z=!0;if(D.sCount[b]-D.blkIndent>=4)return!1;if(f&&D.parentType==="paragraph"&&D.tShift[b]>=D.blkIndent&&(W=!0),(P=R(D,b))>=0){if(s=!0,E=D.bMarks[b]+D.tShift[b],h=Number(D.src.substr(E,P-E-1)),W&&h!==1)return!1}else if((P=F(D,b))>=0)s=!1;else return!1;if(W&&D.skipSpaces(P)>=D.eMarks[b])return!1;if(n=D.src.charCodeAt(P-1),f)return!0;for(i=D.tokens.length,s?(G=D.push("ordered_list_open","ol",1),h!==1&&(G.attrs=[["start",h]])):G=D.push("bullet_list_open","ul",1),G.map=a=[b,0],G.markup=String.fromCharCode(n),d=b,L=!1,I=D.md.block.ruler.getRules("list"),S=D.parentType,D.parentType="list";d<C;){for(k=P,g=D.eMarks[d],r=y=D.sCount[d]+P-(D.bMarks[b]+D.tShift[b]);k<g;){if(v=D.src.charCodeAt(k),v===9)y+=4-(y+D.bsCount[d])%4;else if(v===32)y++;else break;k++}if(m=k,m>=g?l=1:l=y-r,l>4&&(l=1),u=r+l,G=D.push("list_item_open","li",1),G.markup=String.fromCharCode(n),G.map=c=[b,0],p=D.blkIndent,B=D.tight,O=D.tShift[b],w=D.sCount[b],D.blkIndent=u,D.tight=!0,D.tShift[b]=m-D.bMarks[b],D.sCount[b]=y,m>=g&&D.isEmpty(b+1)?D.line=Math.min(D.line+2,C):D.md.block.tokenize(D,b,C,!0),(!D.tight||L)&&(Z=!1),L=D.line-b>1&&D.isEmpty(D.line-1),D.blkIndent=p,D.tShift[b]=O,D.sCount[b]=w,D.tight=B,G=D.push("list_item_close","li",-1),G.markup=String.fromCharCode(n),d=b=D.line,c[1]=d,m=D.bMarks[b],d>=C||D.sCount[d]<D.blkIndent)break;for(N=!1,o=0,x=I.length;o<x;o++)if(I[o](D,d,C,!0)){N=!0;break}if(N)break;if(s){if(P=R(D,d),P<0)break}else if(P=F(D,d),P<0)break;if(n!==D.src.charCodeAt(P-1))break}return s?G=D.push("ordered_list_close","ol",-1):G=D.push("bullet_list_close","ul",-1),G.markup=String.fromCharCode(n),a[1]=d,D.line=d,D.parentType=S,Z&&A(D,i),!0}},61864:function(X){"use strict";X.exports=function(e,M){var F,R,A,T,D,b,C=M+1,f=e.md.block.ruler.getRules("paragraph"),v=e.lineMax;for(b=e.parentType,e.parentType="paragraph";C<v&&!e.isEmpty(C);C++)if(!(e.sCount[C]-e.blkIndent>3)&&!(e.sCount[C]<0)){for(R=!1,A=0,T=f.length;A<T;A++)if(f[A](e,C,v,!0)){R=!0;break}if(R)break}return F=e.getLines(M,C,e.blkIndent,!1).trim(),e.line=C,D=e.push("paragraph_open","p",1),D.map=[M,e.line],D=e.push("inline","",0),D.content=F,D.map=[M,e.line],D.children=[],D=e.push("paragraph_close","p",-1),e.parentType=b,!0}},83880:function(X,z,e){"use strict";var M=e(17200).normalizeReference,F=e(17200).isSpace;X.exports=function(A,T,D,b){var C,f,v,m,o,u,l,r,s,c,x,a,i,n,h,g,d=0,y=A.bMarks[T]+A.tShift[T],p=A.eMarks[T],w=T+1;if(A.sCount[T]-A.blkIndent>=4||A.src.charCodeAt(y)!==91)return!1;for(;++y<p;)if(A.src.charCodeAt(y)===93&&A.src.charCodeAt(y-1)!==92){if(y+1===p||A.src.charCodeAt(y+1)!==58)return!1;break}for(m=A.lineMax,h=A.md.block.ruler.getRules("reference"),c=A.parentType,A.parentType="reference";w<m&&!A.isEmpty(w);w++)if(!(A.sCount[w]-A.blkIndent>3)&&!(A.sCount[w]<0)){for(n=!1,u=0,l=h.length;u<l;u++)if(h[u](A,w,m,!0)){n=!0;break}if(n)break}for(i=A.getLines(T,w,A.blkIndent,!1).trim(),p=i.length,y=1;y<p;y++){if(C=i.charCodeAt(y),C===91)return!1;if(C===93){s=y;break}else C===10?d++:C===92&&(y++,y<p&&i.charCodeAt(y)===10&&d++)}if(s<0||i.charCodeAt(s+1)!==58)return!1;for(y=s+2;y<p;y++)if(C=i.charCodeAt(y),C===10)d++;else if(!F(C))break;if(x=A.md.helpers.parseLinkDestination(i,y,p),!x.ok||(o=A.md.normalizeLink(x.str),!A.md.validateLink(o)))return!1;for(y=x.pos,d+=x.lines,f=y,v=d,a=y;y<p;y++)if(C=i.charCodeAt(y),C===10)d++;else if(!F(C))break;for(x=A.md.helpers.parseLinkTitle(i,y,p),y<p&&a!==y&&x.ok?(g=x.str,y=x.pos,d+=x.lines):(g="",y=f,d=v);y<p&&(C=i.charCodeAt(y),!!F(C));)y++;if(y<p&&i.charCodeAt(y)!==10&&g)for(g="",y=f,d=v;y<p&&(C=i.charCodeAt(y),!!F(C));)y++;return y<p&&i.charCodeAt(y)!==10||(r=M(i.slice(1,s)),!r)?!1:(b||(typeof A.env.references>"u"&&(A.env.references={}),typeof A.env.references[r]>"u"&&(A.env.references[r]={title:g,href:o}),A.parentType=c,A.line=T+d+1),!0)}},4412:function(X,z,e){"use strict";var M=e(32043),F=e(17200).isSpace;function R(A,T,D,b){var C,f,v,m,o,u,l,r;for(this.src=A,this.md=T,this.env=D,this.tokens=b,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.parentType="root",this.level=0,this.result="",f=this.src,r=!1,v=m=u=l=0,o=f.length;m<o;m++){if(C=f.charCodeAt(m),!r)if(F(C)){u++,C===9?l+=4-l%4:l++;continue}else r=!0;(C===10||m===o-1)&&(C!==10&&m++,this.bMarks.push(v),this.eMarks.push(m),this.tShift.push(u),this.sCount.push(l),this.bsCount.push(0),r=!1,u=0,l=0,v=m+1)}this.bMarks.push(f.length),this.eMarks.push(f.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}R.prototype.push=function(A,T,D){var b=new M(A,T,D);return b.block=!0,D<0&&this.level--,b.level=this.level,D>0&&this.level++,this.tokens.push(b),b},R.prototype.isEmpty=function(T){return this.bMarks[T]+this.tShift[T]>=this.eMarks[T]},R.prototype.skipEmptyLines=function(T){for(var D=this.lineMax;T<D&&!(this.bMarks[T]+this.tShift[T]<this.eMarks[T]);T++);return T},R.prototype.skipSpaces=function(T){for(var D,b=this.src.length;T<b&&(D=this.src.charCodeAt(T),!!F(D));T++);return T},R.prototype.skipSpacesBack=function(T,D){if(T<=D)return T;for(;T>D;)if(!F(this.src.charCodeAt(--T)))return T+1;return T},R.prototype.skipChars=function(T,D){for(var b=this.src.length;T<b&&this.src.charCodeAt(T)===D;T++);return T},R.prototype.skipCharsBack=function(T,D,b){if(T<=b)return T;for(;T>b;)if(D!==this.src.charCodeAt(--T))return T+1;return T},R.prototype.getLines=function(T,D,b,C){var f,v,m,o,u,l,r,s=T;if(T>=D)return"";for(l=new Array(D-T),f=0;s<D;s++,f++){for(v=0,r=o=this.bMarks[s],s+1<D||C?u=this.eMarks[s]+1:u=this.eMarks[s];o<u&&v<b;){if(m=this.src.charCodeAt(o),F(m))m===9?v+=4-(v+this.bsCount[s])%4:v++;else if(o-r<this.tShift[s])v++;else break;o++}v>b?l[f]=new Array(v-b+1).join(" ")+this.src.slice(o,u):l[f]=this.src.slice(o,u)}return l.join("")},R.prototype.Token=M,X.exports=R},63361:function(X,z,e){"use strict";var M=e(17200).isSpace;function F(A,T){var D=A.bMarks[T]+A.blkIndent,b=A.eMarks[T];return A.src.substr(D,b-D)}function R(A){var T=[],D=0,b=A.length,C,f=0,v=0,m=!1,o=0;for(C=A.charCodeAt(D);D<b;)C===96?m?(m=!1,o=D):f%2===0&&(m=!0,o=D):C===124&&f%2===0&&!m&&(T.push(A.substring(v,D)),v=D+1),C===92?f++:f=0,D++,D===b&&m&&(m=!1,D=o+1),C=A.charCodeAt(D);return T.push(A.substring(v)),T}X.exports=function(T,D,b,C){var f,v,m,o,u,l,r,s,c,x,a,i;if(D+2>b||(u=D+1,T.sCount[u]<T.blkIndent)||T.sCount[u]-T.blkIndent>=4||(m=T.bMarks[u]+T.tShift[u],m>=T.eMarks[u])||(f=T.src.charCodeAt(m++),f!==124&&f!==45&&f!==58))return!1;for(;m<T.eMarks[u];){if(f=T.src.charCodeAt(m),f!==124&&f!==45&&f!==58&&!M(f))return!1;m++}for(v=F(T,D+1),l=v.split("|"),c=[],o=0;o<l.length;o++){if(x=l[o].trim(),!x){if(o===0||o===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(x))return!1;x.charCodeAt(x.length-1)===58?c.push(x.charCodeAt(0)===58?"center":"right"):x.charCodeAt(0)===58?c.push("left"):c.push("")}if(v=F(T,D).trim(),v.indexOf("|")===-1||T.sCount[D]-T.blkIndent>=4||(l=R(v.replace(/^\||\|$/g,"")),r=l.length,r>c.length))return!1;if(C)return!0;for(s=T.push("table_open","table",1),s.map=a=[D,0],s=T.push("thead_open","thead",1),s.map=[D,D+1],s=T.push("tr_open","tr",1),s.map=[D,D+1],o=0;o<l.length;o++)s=T.push("th_open","th",1),s.map=[D,D+1],c[o]&&(s.attrs=[["style","text-align:"+c[o]]]),s=T.push("inline","",0),s.content=l[o].trim(),s.map=[D,D+1],s.children=[],s=T.push("th_close","th",-1);for(s=T.push("tr_close","tr",-1),s=T.push("thead_close","thead",-1),s=T.push("tbody_open","tbody",1),s.map=i=[D+2,0],u=D+2;u<b&&!(T.sCount[u]<T.blkIndent||(v=F(T,u).trim(),v.indexOf("|")===-1)||T.sCount[u]-T.blkIndent>=4);u++){for(l=R(v.replace(/^\||\|$/g,"")),s=T.push("tr_open","tr",1),o=0;o<r;o++)s=T.push("td_open","td",1),c[o]&&(s.attrs=[["style","text-align:"+c[o]]]),s=T.push("inline","",0),s.content=l[o]?l[o].trim():"",s.children=[],s=T.push("td_close","td",-1);s=T.push("tr_close","tr",-1)}return s=T.push("tbody_close","tbody",-1),s=T.push("table_close","table",-1),a[1]=i[1]=u,T.line=u,!0}},83218:function(X){"use strict";X.exports=function(e){var M;e.inlineMode?(M=new e.Token("inline","",0),M.content=e.src,M.map=[0,1],M.children=[],e.tokens.push(M)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},85e3:function(X){"use strict";X.exports=function(e){var M=e.tokens,F,R,A;for(R=0,A=M.length;R<A;R++)F=M[R],F.type==="inline"&&e.md.inline.parse(F.content,e.md,e.env,F.children)}},84496:function(X,z,e){"use strict";var M=e(17200).arrayReplaceAt;function F(A){return/^<a[>\s]/i.test(A)}function R(A){return/^<\/a\s*>/i.test(A)}X.exports=function(T){var D,b,C,f,v,m,o,u,l,r,s,c,x,a,i,n,h=T.tokens,g;if(T.md.options.linkify){for(b=0,C=h.length;b<C;b++)if(!(h[b].type!=="inline"||!T.md.linkify.pretest(h[b].content)))for(f=h[b].children,x=0,D=f.length-1;D>=0;D--){if(m=f[D],m.type==="link_close"){for(D--;f[D].level!==m.level&&f[D].type!=="link_open";)D--;continue}if(m.type==="html_inline"&&(F(m.content)&&x>0&&x--,R(m.content)&&x++),!(x>0)&&m.type==="text"&&T.md.linkify.test(m.content)){for(l=m.content,g=T.md.linkify.match(l),o=[],c=m.level,s=0,u=0;u<g.length;u++)a=g[u].url,i=T.md.normalizeLink(a),T.md.validateLink(i)&&(n=g[u].text,g[u].schema?g[u].schema==="mailto:"&&!/^mailto:/i.test(n)?n=T.md.normalizeLinkText("mailto:"+n).replace(/^mailto:/,""):n=T.md.normalizeLinkText(n):n=T.md.normalizeLinkText("http://"+n).replace(/^http:\/\//,""),r=g[u].index,r>s&&(v=new T.Token("text","",0),v.content=l.slice(s,r),v.level=c,o.push(v)),v=new T.Token("link_open","a",1),v.attrs=[["href",i]],v.level=c++,v.markup="linkify",v.info="auto",o.push(v),v=new T.Token("text","",0),v.content=n,v.level=c,o.push(v),v=new T.Token("link_close","a",-1),v.level=--c,v.markup="linkify",v.info="auto",o.push(v),s=g[u].lastIndex);s<l.length&&(v=new T.Token("text","",0),v.content=l.slice(s),v.level=c,o.push(v)),h[b].children=f=M(f,D,o)}}}}},66834:function(X){"use strict";var z=/\r[\n\u0085]?|[\u2424\u2028\u0085]/g,e=/\u0000/g;X.exports=function(F){var R;R=F.src.replace(z,`
`),R=R.replace(e,"\uFFFD"),F.src=R}},84896:function(X){"use strict";var z=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,e=/\((c|tm|r|p)\)/i,M=/\((c|tm|r|p)\)/ig,F={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function R(D,b){return F[b.toLowerCase()]}function A(D){var b,C,f=0;for(b=D.length-1;b>=0;b--)C=D[b],C.type==="text"&&!f&&(C.content=C.content.replace(M,R)),C.type==="link_open"&&C.info==="auto"&&f--,C.type==="link_close"&&C.info==="auto"&&f++}function T(D){var b,C,f=0;for(b=D.length-1;b>=0;b--)C=D[b],C.type==="text"&&!f&&z.test(C.content)&&(C.content=C.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1\u2014$2").replace(/(^|\s)--(\s|$)/mg,"$1\u2013$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1\u2013$2")),C.type==="link_open"&&C.info==="auto"&&f--,C.type==="link_close"&&C.info==="auto"&&f++}X.exports=function(b){var C;if(b.md.options.typographer)for(C=b.tokens.length-1;C>=0;C--)b.tokens[C].type==="inline"&&(e.test(b.tokens[C].content)&&A(b.tokens[C].children),z.test(b.tokens[C].content)&&T(b.tokens[C].children))}},58062:function(X,z,e){"use strict";var M=e(17200).isWhiteSpace,F=e(17200).isPunctChar,R=e(17200).isMdAsciiPunct,A=/['"]/,T=/['"]/g,D="\u2019";function b(f,v,m){return f.substr(0,v)+m+f.substr(v+1)}function C(f,v){var m,o,u,l,r,s,c,x,a,i,n,h,g,d,y,p,w,S,O,B,k;for(O=[],m=0;m<f.length;m++){for(o=f[m],c=f[m].level,w=O.length-1;w>=0&&!(O[w].level<=c);w--);if(O.length=w+1,o.type==="text"){u=o.content,r=0,s=u.length;t:for(;r<s&&(T.lastIndex=r,l=T.exec(u),!!l);){if(y=p=!0,r=l.index+1,S=l[0]==="'",a=32,l.index-1>=0)a=u.charCodeAt(l.index-1);else for(w=m-1;w>=0&&!(f[w].type==="softbreak"||f[w].type==="hardbreak");w--)if(f[w].type==="text"){a=f[w].content.charCodeAt(f[w].content.length-1);break}if(i=32,r<s)i=u.charCodeAt(r);else for(w=m+1;w<f.length&&!(f[w].type==="softbreak"||f[w].type==="hardbreak");w++)if(f[w].type==="text"){i=f[w].content.charCodeAt(0);break}if(n=R(a)||F(String.fromCharCode(a)),h=R(i)||F(String.fromCharCode(i)),g=M(a),d=M(i),d?y=!1:h&&(g||n||(y=!1)),g?p=!1:n&&(d||h||(p=!1)),i===34&&l[0]==='"'&&a>=48&&a<=57&&(p=y=!1),y&&p&&(y=!1,p=h),!y&&!p){S&&(o.content=b(o.content,l.index,D));continue}if(p){for(w=O.length-1;w>=0&&(x=O[w],!(O[w].level<c));w--)if(x.single===S&&O[w].level===c){x=O[w],S?(B=v.md.options.quotes[2],k=v.md.options.quotes[3]):(B=v.md.options.quotes[0],k=v.md.options.quotes[1]),o.content=b(o.content,l.index,k),f[x.token].content=b(f[x.token].content,x.pos,B),r+=k.length-1,x.token===m&&(r+=B.length-1),u=o.content,s=u.length,O.length=w;continue t}}y?O.push({token:m,pos:l.index,single:S,level:c}):p&&S&&(o.content=b(o.content,l.index,D))}}}}X.exports=function(v){var m;if(v.md.options.typographer)for(m=v.tokens.length-1;m>=0;m--)v.tokens[m].type!=="inline"||!A.test(v.tokens[m].content)||C(v.tokens[m].children,v)}},23406:function(X,z,e){"use strict";var M=e(32043);function F(R,A,T){this.src=R,this.env=T,this.tokens=[],this.inlineMode=!1,this.md=A}F.prototype.Token=M,X.exports=F},6066:function(X){"use strict";var z=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,e=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;X.exports=function(F,R){var A,T,D,b,C,f,v=F.pos;return F.src.charCodeAt(v)!==60||(A=F.src.slice(v),A.indexOf(">")<0)?!1:e.test(A)?(T=A.match(e),b=T[0].slice(1,-1),C=F.md.normalizeLink(b),F.md.validateLink(C)?(R||(f=F.push("link_open","a",1),f.attrs=[["href",C]],f.markup="autolink",f.info="auto",f=F.push("text","",0),f.content=F.md.normalizeLinkText(b),f=F.push("link_close","a",-1),f.markup="autolink",f.info="auto"),F.pos+=T[0].length,!0):!1):z.test(A)?(D=A.match(z),b=D[0].slice(1,-1),C=F.md.normalizeLink("mailto:"+b),F.md.validateLink(C)?(R||(f=F.push("link_open","a",1),f.attrs=[["href",C]],f.markup="autolink",f.info="auto",f=F.push("text","",0),f.content=F.md.normalizeLinkText(b),f=F.push("link_close","a",-1),f.markup="autolink",f.info="auto"),F.pos+=D[0].length,!0):!1):!1}},89247:function(X){"use strict";X.exports=function(e,M){var F,R,A,T,D,b,C=e.pos,f=e.src.charCodeAt(C);if(f!==96)return!1;for(F=C,C++,R=e.posMax;C<R&&e.src.charCodeAt(C)===96;)C++;for(A=e.src.slice(F,C),T=D=C;(T=e.src.indexOf("`",D))!==-1;){for(D=T+1;D<R&&e.src.charCodeAt(D)===96;)D++;if(D-T===A.length)return M||(b=e.push("code_inline","code",0),b.markup=A,b.content=e.src.slice(C,T).replace(/[ \n]+/g," ").trim()),e.pos=D,!0}return M||(e.pending+=A),e.pos+=A.length,!0}},38349:function(X){"use strict";X.exports=function(e){var M,F,R,A,T=e.delimiters,D=e.delimiters.length;for(M=0;M<D;M++)if(R=T[M],!!R.close)for(F=M-R.jump-1;F>=0;){if(A=T[F],A.open&&A.marker===R.marker&&A.end<0&&A.level===R.level){var b=(A.close||R.open)&&typeof A.length<"u"&&typeof R.length<"u"&&(A.length+R.length)%3===0;if(!b){R.jump=M-F,R.open=!1,A.end=M,A.jump=0;break}}F-=A.jump+1}}},66881:function(X){"use strict";X.exports.w=function(e,M){var F,R,A,T=e.pos,D=e.src.charCodeAt(T);if(M||D!==95&&D!==42)return!1;for(R=e.scanDelims(e.pos,D===42),F=0;F<R.length;F++)A=e.push("text","",0),A.content=String.fromCharCode(D),e.delimiters.push({marker:D,length:R.length,jump:F,token:e.tokens.length-1,level:e.level,end:-1,open:R.can_open,close:R.can_close});return e.pos+=R.length,!0},X.exports.g=function(e){var M,F,R,A,T,D,b=e.delimiters,C=e.delimiters.length;for(M=C-1;M>=0;M--)F=b[M],!(F.marker!==95&&F.marker!==42)&&F.end!==-1&&(R=b[F.end],D=M>0&&b[M-1].end===F.end+1&&b[M-1].token===F.token-1&&b[F.end+1].token===R.token+1&&b[M-1].marker===F.marker,T=String.fromCharCode(F.marker),A=e.tokens[F.token],A.type=D?"strong_open":"em_open",A.tag=D?"strong":"em",A.nesting=1,A.markup=D?T+T:T,A.content="",A=e.tokens[R.token],A.type=D?"strong_close":"em_close",A.tag=D?"strong":"em",A.nesting=-1,A.markup=D?T+T:T,A.content="",D&&(e.tokens[b[M-1].token].content="",e.tokens[b[F.end+1].token].content="",M--))}},15969:function(X,z,e){"use strict";var M=e(6009),F=e(17200).has,R=e(17200).isValidEntityCode,A=e(17200).fromCodePoint,T=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,D=/^&([a-z][a-z0-9]{1,31});/i;X.exports=function(C,f){var v,m,o,u=C.pos,l=C.posMax;if(C.src.charCodeAt(u)!==38)return!1;if(u+1<l){if(v=C.src.charCodeAt(u+1),v===35){if(o=C.src.slice(u).match(T),o)return f||(m=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),C.pending+=R(m)?A(m):A(65533)),C.pos+=o[0].length,!0}else if(o=C.src.slice(u).match(D),o&&F(M,o[1]))return f||(C.pending+=M[o[1]]),C.pos+=o[0].length,!0}return f||(C.pending+="&"),C.pos++,!0}},20095:function(X,z,e){"use strict";for(var M=e(17200).isSpace,F=[],R=0;R<256;R++)F.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(A){F[A.charCodeAt(0)]=1}),X.exports=function(T,D){var b,C=T.pos,f=T.posMax;if(T.src.charCodeAt(C)!==92)return!1;if(C++,C<f){if(b=T.src.charCodeAt(C),b<256&&F[b]!==0)return D||(T.pending+=T.src[C]),T.pos+=2,!0;if(b===10){for(D||T.push("hardbreak","br",0),C++;C<f&&(b=T.src.charCodeAt(C),!!M(b));)C++;return T.pos=C,!0}}return D||(T.pending+="\\"),T.pos++,!0}},92573:function(X,z,e){"use strict";var M=e(78392).n;function F(R){var A=R|32;return A>=97&&A<=122}X.exports=function(A,T){var D,b,C,f,v=A.pos;return!A.md.options.html||(C=A.posMax,A.src.charCodeAt(v)!==60||v+2>=C)||(D=A.src.charCodeAt(v+1),D!==33&&D!==63&&D!==47&&!F(D))||(b=A.src.slice(v).match(M),!b)?!1:(T||(f=A.push("html_inline","",0),f.content=A.src.slice(v,v+b[0].length)),A.pos+=b[0].length,!0)}},77711:function(X,z,e){"use strict";var M=e(17200).normalizeReference,F=e(17200).isSpace;X.exports=function(A,T){var D,b,C,f,v,m,o,u,l,r,s,c,x,a="",i=A.pos,n=A.posMax;if(A.src.charCodeAt(A.pos)!==33||A.src.charCodeAt(A.pos+1)!==91||(m=A.pos+2,v=A.md.helpers.parseLinkLabel(A,A.pos+1,!1),v<0))return!1;if(o=v+1,o<n&&A.src.charCodeAt(o)===40){for(o++;o<n&&(b=A.src.charCodeAt(o),!(!F(b)&&b!==10));o++);if(o>=n)return!1;for(x=o,l=A.md.helpers.parseLinkDestination(A.src,o,A.posMax),l.ok&&(a=A.md.normalizeLink(l.str),A.md.validateLink(a)?o=l.pos:a=""),x=o;o<n&&(b=A.src.charCodeAt(o),!(!F(b)&&b!==10));o++);if(l=A.md.helpers.parseLinkTitle(A.src,o,A.posMax),o<n&&x!==o&&l.ok)for(r=l.str,o=l.pos;o<n&&(b=A.src.charCodeAt(o),!(!F(b)&&b!==10));o++);else r="";if(o>=n||A.src.charCodeAt(o)!==41)return A.pos=i,!1;o++}else{if(typeof A.env.references>"u")return!1;if(o<n&&A.src.charCodeAt(o)===91?(x=o+1,o=A.md.helpers.parseLinkLabel(A,o),o>=0?f=A.src.slice(x,o++):o=v+1):o=v+1,f||(f=A.src.slice(m,v)),u=A.env.references[M(f)],!u)return A.pos=i,!1;a=u.href,r=u.title}return T||(C=A.src.slice(m,v),A.md.inline.parse(C,A.md,A.env,c=[]),s=A.push("image","img",0),s.attrs=D=[["src",a],["alt",""]],s.children=c,s.content=C,r&&D.push(["title",r])),A.pos=o,A.posMax=n,!0}},13676:function(X,z,e){"use strict";var M=e(17200).normalizeReference,F=e(17200).isSpace;X.exports=function(A,T){var D,b,C,f,v,m,o,u,l,r,s="",c=A.pos,x=A.posMax,a=A.pos,i=!0;if(A.src.charCodeAt(A.pos)!==91||(v=A.pos+1,f=A.md.helpers.parseLinkLabel(A,A.pos,!0),f<0))return!1;if(m=f+1,m<x&&A.src.charCodeAt(m)===40){for(i=!1,m++;m<x&&(b=A.src.charCodeAt(m),!(!F(b)&&b!==10));m++);if(m>=x)return!1;for(a=m,o=A.md.helpers.parseLinkDestination(A.src,m,A.posMax),o.ok&&(s=A.md.normalizeLink(o.str),A.md.validateLink(s)?m=o.pos:s=""),a=m;m<x&&(b=A.src.charCodeAt(m),!(!F(b)&&b!==10));m++);if(o=A.md.helpers.parseLinkTitle(A.src,m,A.posMax),m<x&&a!==m&&o.ok)for(l=o.str,m=o.pos;m<x&&(b=A.src.charCodeAt(m),!(!F(b)&&b!==10));m++);else l="";(m>=x||A.src.charCodeAt(m)!==41)&&(i=!0),m++}if(i){if(typeof A.env.references>"u")return!1;if(m<x&&A.src.charCodeAt(m)===91?(a=m+1,m=A.md.helpers.parseLinkLabel(A,m),m>=0?C=A.src.slice(a,m++):m=f+1):m=f+1,C||(C=A.src.slice(v,f)),u=A.env.references[M(C)],!u)return A.pos=c,!1;s=u.href,l=u.title}return T||(A.pos=v,A.posMax=f,r=A.push("link_open","a",1),r.attrs=D=[["href",s]],l&&D.push(["title",l]),A.md.inline.tokenize(A),r=A.push("link_close","a",-1)),A.pos=m,A.posMax=x,!0}},7370:function(X,z,e){"use strict";var M=e(17200).isSpace;X.exports=function(R,A){var T,D,b=R.pos;if(R.src.charCodeAt(b)!==10)return!1;for(T=R.pending.length-1,D=R.posMax,A||(T>=0&&R.pending.charCodeAt(T)===32?T>=1&&R.pending.charCodeAt(T-1)===32?(R.pending=R.pending.replace(/ +$/,""),R.push("hardbreak","br",0)):(R.pending=R.pending.slice(0,-1),R.push("softbreak","br",0)):R.push("softbreak","br",0)),b++;b<D&&M(R.src.charCodeAt(b));)b++;return R.pos=b,!0}},43717:function(X,z,e){"use strict";var M=e(32043),F=e(17200).isWhiteSpace,R=e(17200).isPunctChar,A=e(17200).isMdAsciiPunct;function T(D,b,C,f){this.src=D,this.env=C,this.md=b,this.tokens=f,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[]}T.prototype.pushPending=function(){var D=new M("text","",0);return D.content=this.pending,D.level=this.pendingLevel,this.tokens.push(D),this.pending="",D},T.prototype.push=function(D,b,C){this.pending&&this.pushPending();var f=new M(D,b,C);return C<0&&this.level--,f.level=this.level,C>0&&this.level++,this.pendingLevel=this.level,this.tokens.push(f),f},T.prototype.scanDelims=function(D,b){var C=D,f,v,m,o,u,l,r,s,c,x=!0,a=!0,i=this.posMax,n=this.src.charCodeAt(D);for(f=D>0?this.src.charCodeAt(D-1):32;C<i&&this.src.charCodeAt(C)===n;)C++;return m=C-D,v=C<i?this.src.charCodeAt(C):32,r=A(f)||R(String.fromCharCode(f)),c=A(v)||R(String.fromCharCode(v)),l=F(f),s=F(v),s?x=!1:c&&(l||r||(x=!1)),l?a=!1:r&&(s||c||(a=!1)),b?(o=x,u=a):(o=x&&(!a||r),u=a&&(!x||c)),{can_open:o,can_close:u,length:m}},T.prototype.Token=M,X.exports=T},77202:function(X){"use strict";X.exports.w=function(e,M){var F,R,A,T,D,b=e.pos,C=e.src.charCodeAt(b);if(M||C!==126||(R=e.scanDelims(e.pos,!0),T=R.length,D=String.fromCharCode(C),T<2))return!1;for(T%2&&(A=e.push("text","",0),A.content=D,T--),F=0;F<T;F+=2)A=e.push("text","",0),A.content=D+D,e.delimiters.push({marker:C,jump:F,token:e.tokens.length-1,level:e.level,end:-1,open:R.can_open,close:R.can_close});return e.pos+=R.length,!0},X.exports.g=function(e){var M,F,R,A,T,D=[],b=e.delimiters,C=e.delimiters.length;for(M=0;M<C;M++)R=b[M],R.marker===126&&R.end!==-1&&(A=b[R.end],T=e.tokens[R.token],T.type="s_open",T.tag="s",T.nesting=1,T.markup="~~",T.content="",T=e.tokens[A.token],T.type="s_close",T.tag="s",T.nesting=-1,T.markup="~~",T.content="",e.tokens[A.token-1].type==="text"&&e.tokens[A.token-1].content==="~"&&D.push(A.token-1));for(;D.length;){for(M=D.pop(),F=M+1;F<e.tokens.length&&e.tokens[F].type==="s_close";)F++;F--,M!==F&&(T=e.tokens[F],e.tokens[F]=e.tokens[M],e.tokens[M]=T)}}},88623:function(X){"use strict";function z(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}X.exports=function(M,F){for(var R=M.pos;R<M.posMax&&!z(M.src.charCodeAt(R));)R++;return R===M.pos?!1:(F||(M.pending+=M.src.slice(M.pos,R)),M.pos=R,!0)}},90823:function(X){"use strict";X.exports=function(e){var M,F,R=0,A=e.tokens,T=e.tokens.length;for(M=F=0;M<T;M++)R+=A[M].nesting,A[M].level=R,A[M].type==="text"&&M+1<T&&A[M+1].type==="text"?A[M+1].content=A[M].content+A[M+1].content:(M!==F&&(A[F]=A[M]),F++);M!==F&&(A.length=F)}},32043:function(X){"use strict";function z(e,M,F){this.type=e,this.tag=M,this.attrs=null,this.map=null,this.nesting=F,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}z.prototype.attrIndex=function(M){var F,R,A;if(!this.attrs)return-1;for(F=this.attrs,R=0,A=F.length;R<A;R++)if(F[R][0]===M)return R;return-1},z.prototype.attrPush=function(M){this.attrs?this.attrs.push(M):this.attrs=[M]},z.prototype.attrSet=function(M,F){var R=this.attrIndex(M),A=[M,F];R<0?this.attrPush(A):this.attrs[R]=A},z.prototype.attrGet=function(M){var F=this.attrIndex(M),R=null;return F>=0&&(R=this.attrs[F][1]),R},z.prototype.attrJoin=function(M,F){var R=this.attrIndex(M);R<0?this.attrPush([M,F]):this.attrs[R][1]=this.attrs[R][1]+" "+F},X.exports=z},18585:function(X){"use strict";var z={};function e(F){var R,A,T=z[F];if(T)return T;for(T=z[F]=[],R=0;R<128;R++)A=String.fromCharCode(R),T.push(A);for(R=0;R<F.length;R++)A=F.charCodeAt(R),T[A]="%"+("0"+A.toString(16).toUpperCase()).slice(-2);return T}function M(F,R){var A;return typeof R!="string"&&(R=M.defaultChars),A=e(R),F.replace(/(%[a-f0-9]{2})+/gi,function(T){var D,b,C,f,v,m,o,u="";for(D=0,b=T.length;D<b;D+=3){if(C=parseInt(T.slice(D+1,D+3),16),C<128){u+=A[C];continue}if((C&224)===192&&D+3<b&&(f=parseInt(T.slice(D+4,D+6),16),(f&192)===128)){o=C<<6&1984|f&63,o<128?u+="\uFFFD\uFFFD":u+=String.fromCharCode(o),D+=3;continue}if((C&240)===224&&D+6<b&&(f=parseInt(T.slice(D+4,D+6),16),v=parseInt(T.slice(D+7,D+9),16),(f&192)===128&&(v&192)===128)){o=C<<12&61440|f<<6&4032|v&63,o<2048||o>=55296&&o<=57343?u+="\uFFFD\uFFFD\uFFFD":u+=String.fromCharCode(o),D+=6;continue}if((C&248)===240&&D+9<b&&(f=parseInt(T.slice(D+4,D+6),16),v=parseInt(T.slice(D+7,D+9),16),m=parseInt(T.slice(D+10,D+12),16),(f&192)===128&&(v&192)===128&&(m&192)===128)){o=C<<18&1835008|f<<12&258048|v<<6&4032|m&63,o<65536||o>1114111?u+="\uFFFD\uFFFD\uFFFD\uFFFD":(o-=65536,u+=String.fromCharCode(55296+(o>>10),56320+(o&1023))),D+=9;continue}u+="\uFFFD"}return u})}M.defaultChars=";/?:@&=+$,#",M.componentChars="",X.exports=M},5704:function(X){"use strict";var z={};function e(F){var R,A,T=z[F];if(T)return T;for(T=z[F]=[],R=0;R<128;R++)A=String.fromCharCode(R),/^[0-9a-z]$/i.test(A)?T.push(A):T.push("%"+("0"+R.toString(16).toUpperCase()).slice(-2));for(R=0;R<F.length;R++)T[F.charCodeAt(R)]=F[R];return T}function M(F,R,A){var T,D,b,C,f,v="";for(typeof R!="string"&&(A=R,R=M.defaultChars),typeof A>"u"&&(A=!0),f=e(R),T=0,D=F.length;T<D;T++){if(b=F.charCodeAt(T),A&&b===37&&T+2<D&&/^[0-9a-f]{2}$/i.test(F.slice(T+1,T+3))){v+=F.slice(T,T+3),T+=2;continue}if(b<128){v+=f[b];continue}if(b>=55296&&b<=57343){if(b>=55296&&b<=56319&&T+1<D&&(C=F.charCodeAt(T+1),C>=56320&&C<=57343)){v+=encodeURIComponent(F[T]+F[T+1]),T++;continue}v+="%EF%BF%BD";continue}v+=encodeURIComponent(F[T])}return v}M.defaultChars=";/?:@&=+$,-_.!~*'()#",M.componentChars="-_.!~*'()",X.exports=M},39481:function(X){"use strict";X.exports=function(e){var M="";return M+=e.protocol||"",M+=e.slashes?"//":"",M+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?M+="["+e.hostname+"]":M+=e.hostname||"",M+=e.port?":"+e.port:"",M+=e.pathname||"",M+=e.search||"",M+=e.hash||"",M}},12449:function(X,z,e){"use strict";X.exports.encode=e(5704),X.exports.decode=e(18585),X.exports.format=e(39481),X.exports.parse=e(25979)},25979:function(X){"use strict";function z(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var e=/^([a-z0-9.+-]+:)/i,M=/:[0-9]*$/,F=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,R=["<",">",'"',"`"," ","\r",`
`,"	"],A=["{","}","|","\\","^","`"].concat(R),T=["'"].concat(A),D=["%","/","?",";","#"].concat(T),b=["/","?","#"],C=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},o={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function u(l,r){if(l&&l instanceof z)return l;var s=new z;return s.parse(l,r),s}z.prototype.parse=function(l,r){var s,c,x,a,i,n=l;if(n=n.trim(),!r&&l.split("#").length===1){var h=F.exec(n);if(h)return this.pathname=h[1],h[2]&&(this.search=h[2]),this}var g=e.exec(n);if(g&&(g=g[0],x=g.toLowerCase(),this.protocol=g,n=n.substr(g.length)),(r||g||n.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=n.substr(0,2)==="//",i&&!(g&&m[g])&&(n=n.substr(2),this.slashes=!0)),!m[g]&&(i||g&&!o[g])){var d=-1;for(s=0;s<b.length;s++)a=n.indexOf(b[s]),a!==-1&&(d===-1||a<d)&&(d=a);var y,p;for(d===-1?p=n.lastIndexOf("@"):p=n.lastIndexOf("@",d),p!==-1&&(y=n.slice(0,p),n=n.slice(p+1),this.auth=y),d=-1,s=0;s<D.length;s++)a=n.indexOf(D[s]),a!==-1&&(d===-1||a<d)&&(d=a);d===-1&&(d=n.length),n[d-1]===":"&&d--;var w=n.slice(0,d);n=n.slice(d),this.parseHost(w),this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S){var O=this.hostname.split(/\./);for(s=0,c=O.length;s<c;s++){var B=O[s];if(B&&!B.match(f)){for(var k="",P=0,L=B.length;P<L;P++)B.charCodeAt(P)>127?k+="x":k+=B[P];if(!k.match(f)){var E=O.slice(0,s),N=O.slice(s+1),I=B.match(v);I&&(E.push(I[1]),N.unshift(I[2])),N.length&&(n=N.join(".")+n),this.hostname=E.join(".");break}}}}this.hostname.length>C&&(this.hostname=""),S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var G=n.indexOf("#");G!==-1&&(this.hash=n.substr(G),n=n.slice(0,G));var W=n.indexOf("?");return W!==-1&&(this.search=n.substr(W),n=n.slice(0,W)),n&&(this.pathname=n),o[x]&&this.hostname&&!this.pathname&&(this.pathname=""),this},z.prototype.parseHost=function(l){var r=M.exec(l);r&&(r=r[0],r!==":"&&(this.port=r.substr(1)),l=l.substr(0,l.length-r.length)),l&&(this.hostname=l)},X.exports=u},26230:function(X,z,e){"use strict";var M=e(91005).assign,F=e(49491),R=e(24186),A=e(79134),T={};M(T,F,R,A),X.exports=T},49491:function(X,z,e){"use strict";var M=e(70018),F=e(91005),R=e(52533),A=e(28679),T=e(55172),D=Object.prototype.toString,b=0,C=4,f=0,v=1,m=2,o=-1,u=0,l=8;function r(a){if(!(this instanceof r))return new r(a);this.options=F.assign({level:o,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},a||{});var i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var n=M.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(n!==f)throw new Error(A[n]);if(i.header&&M.deflateSetHeader(this.strm,i.header),i.dictionary){var h;if(typeof i.dictionary=="string"?h=R.string2buf(i.dictionary):D.call(i.dictionary)==="[object ArrayBuffer]"?h=new Uint8Array(i.dictionary):h=i.dictionary,n=M.deflateSetDictionary(this.strm,h),n!==f)throw new Error(A[n]);this._dict_set=!0}}r.prototype.push=function(a,i){var n=this.strm,h=this.options.chunkSize,g,d;if(this.ended)return!1;d=i===~~i?i:i===!0?C:b,typeof a=="string"?n.input=R.string2buf(a):D.call(a)==="[object ArrayBuffer]"?n.input=new Uint8Array(a):n.input=a,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new F.Buf8(h),n.next_out=0,n.avail_out=h),g=M.deflate(n,d),g!==v&&g!==f)return this.onEnd(g),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(d===C||d===m))&&(this.options.to==="string"?this.onData(R.buf2binstring(F.shrinkBuf(n.output,n.next_out))):this.onData(F.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&g!==v);return d===C?(g=M.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===f):(d===m&&(this.onEnd(f),n.avail_out=0),!0)},r.prototype.onData=function(a){this.chunks.push(a)},r.prototype.onEnd=function(a){a===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=F.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function s(a,i){var n=new r(i);if(n.push(a,!0),n.err)throw n.msg||A[n.err];return n.result}function c(a,i){return i=i||{},i.raw=!0,s(a,i)}function x(a,i){return i=i||{},i.gzip=!0,s(a,i)}z.Deflate=r,z.deflate=s,z.deflateRaw=c,z.gzip=x},24186:function(X,z,e){"use strict";var M=e(9245),F=e(91005),R=e(52533),A=e(79134),T=e(28679),D=e(55172),b=e(65561),C=Object.prototype.toString;function f(o){if(!(this instanceof f))return new f(o);this.options=F.assign({chunkSize:16384,windowBits:0,to:""},o||{});var u=this.options;u.raw&&u.windowBits>=0&&u.windowBits<16&&(u.windowBits=-u.windowBits,u.windowBits===0&&(u.windowBits=-15)),u.windowBits>=0&&u.windowBits<16&&!(o&&o.windowBits)&&(u.windowBits+=32),u.windowBits>15&&u.windowBits<48&&(u.windowBits&15||(u.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D,this.strm.avail_out=0;var l=M.inflateInit2(this.strm,u.windowBits);if(l!==A.Z_OK)throw new Error(T[l]);if(this.header=new b,M.inflateGetHeader(this.strm,this.header),u.dictionary&&(typeof u.dictionary=="string"?u.dictionary=R.string2buf(u.dictionary):C.call(u.dictionary)==="[object ArrayBuffer]"&&(u.dictionary=new Uint8Array(u.dictionary)),u.raw&&(l=M.inflateSetDictionary(this.strm,u.dictionary),l!==A.Z_OK)))throw new Error(T[l])}f.prototype.push=function(o,u){var l=this.strm,r=this.options.chunkSize,s=this.options.dictionary,c,x,a,i,n,h=!1;if(this.ended)return!1;x=u===~~u?u:u===!0?A.Z_FINISH:A.Z_NO_FLUSH,typeof o=="string"?l.input=R.binstring2buf(o):C.call(o)==="[object ArrayBuffer]"?l.input=new Uint8Array(o):l.input=o,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new F.Buf8(r),l.next_out=0,l.avail_out=r),c=M.inflate(l,A.Z_NO_FLUSH),c===A.Z_NEED_DICT&&s&&(c=M.inflateSetDictionary(this.strm,s)),c===A.Z_BUF_ERROR&&h===!0&&(c=A.Z_OK,h=!1),c!==A.Z_STREAM_END&&c!==A.Z_OK)return this.onEnd(c),this.ended=!0,!1;l.next_out&&(l.avail_out===0||c===A.Z_STREAM_END||l.avail_in===0&&(x===A.Z_FINISH||x===A.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=R.utf8border(l.output,l.next_out),i=l.next_out-a,n=R.buf2string(l.output,a),l.next_out=i,l.avail_out=r-i,i&&F.arraySet(l.output,l.output,a,i,0),this.onData(n)):this.onData(F.shrinkBuf(l.output,l.next_out))),l.avail_in===0&&l.avail_out===0&&(h=!0)}while((l.avail_in>0||l.avail_out===0)&&c!==A.Z_STREAM_END);return c===A.Z_STREAM_END&&(x=A.Z_FINISH),x===A.Z_FINISH?(c=M.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===A.Z_OK):(x===A.Z_SYNC_FLUSH&&(this.onEnd(A.Z_OK),l.avail_out=0),!0)},f.prototype.onData=function(o){this.chunks.push(o)},f.prototype.onEnd=function(o){o===A.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=F.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function v(o,u){var l=new f(u);if(l.push(o,!0),l.err)throw l.msg||T[l.err];return l.result}function m(o,u){return u=u||{},u.raw=!0,v(o,u)}z.Inflate=f,z.inflate=v,z.inflateRaw=m,z.ungzip=v},52533:function(X,z,e){"use strict";var M=e(91005),F=!0,R=!0;try{String.fromCharCode.apply(null,[0])}catch{F=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{R=!1}for(var A=new M.Buf8(256),T=0;T<256;T++)A[T]=T>=252?6:T>=248?5:T>=240?4:T>=224?3:T>=192?2:1;A[254]=A[254]=1,z.string2buf=function(b){var C,f,v,m,o,u=b.length,l=0;for(m=0;m<u;m++)f=b.charCodeAt(m),(f&64512)===55296&&m+1<u&&(v=b.charCodeAt(m+1),(v&64512)===56320&&(f=65536+(f-55296<<10)+(v-56320),m++)),l+=f<128?1:f<2048?2:f<65536?3:4;for(C=new M.Buf8(l),o=0,m=0;o<l;m++)f=b.charCodeAt(m),(f&64512)===55296&&m+1<u&&(v=b.charCodeAt(m+1),(v&64512)===56320&&(f=65536+(f-55296<<10)+(v-56320),m++)),f<128?C[o++]=f:f<2048?(C[o++]=192|f>>>6,C[o++]=128|f&63):f<65536?(C[o++]=224|f>>>12,C[o++]=128|f>>>6&63,C[o++]=128|f&63):(C[o++]=240|f>>>18,C[o++]=128|f>>>12&63,C[o++]=128|f>>>6&63,C[o++]=128|f&63);return C};function D(b,C){if(C<65534&&(b.subarray&&R||!b.subarray&&F))return String.fromCharCode.apply(null,M.shrinkBuf(b,C));for(var f="",v=0;v<C;v++)f+=String.fromCharCode(b[v]);return f}z.buf2binstring=function(b){return D(b,b.length)},z.binstring2buf=function(b){for(var C=new M.Buf8(b.length),f=0,v=C.length;f<v;f++)C[f]=b.charCodeAt(f);return C},z.buf2string=function(b,C){var f,v,m,o,u=C||b.length,l=new Array(u*2);for(v=0,f=0;f<u;){if(m=b[f++],m<128){l[v++]=m;continue}if(o=A[m],o>4){l[v++]=65533,f+=o-1;continue}for(m&=o===2?31:o===3?15:7;o>1&&f<u;)m=m<<6|b[f++]&63,o--;if(o>1){l[v++]=65533;continue}m<65536?l[v++]=m:(m-=65536,l[v++]=55296|m>>10&1023,l[v++]=56320|m&1023)}return D(l,v)},z.utf8border=function(b,C){var f;for(C=C||b.length,C>b.length&&(C=b.length),f=C-1;f>=0&&(b[f]&192)===128;)f--;return f<0||f===0?C:f+A[b[f]]>C?f:C}},65561:function(X){"use strict";function z(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}X.exports=z},67290:function(X,z,e){"use strict";e.r(z),e.d(z,{decode:function(){return y},encode:function(){return p},toASCII:function(){return S},toUnicode:function(){return w},ucs2decode:function(){return i},ucs2encode:function(){return n}});const M=2147483647,F=36,R=1,A=26,T=38,D=700,b=72,C=128,f="-",v=/^xn--/,m=/[^\0-\x7F]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},l=F-R,r=Math.floor,s=String.fromCharCode;function c(B){throw new RangeError(u[B])}function x(B,k){const P=[];let L=B.length;for(;L--;)P[L]=k(B[L]);return P}function a(B,k){const P=B.split("@");let L="";P.length>1&&(L=P[0]+"@",B=P[1]),B=B.replace(o,".");const E=B.split("."),N=x(E,k).join(".");return L+N}function i(B){const k=[];let P=0;const L=B.length;for(;P<L;){const E=B.charCodeAt(P++);if(E>=55296&&E<=56319&&P<L){const N=B.charCodeAt(P++);(N&64512)==56320?k.push(((E&1023)<<10)+(N&1023)+65536):(k.push(E),P--)}else k.push(E)}return k}const n=B=>String.fromCodePoint(...B),h=function(B){return B>=48&&B<58?26+(B-48):B>=65&&B<91?B-65:B>=97&&B<123?B-97:F},g=function(B,k){return B+22+75*(B<26)-((k!=0)<<5)},d=function(B,k,P){let L=0;for(B=P?r(B/D):B>>1,B+=r(B/k);B>l*A>>1;L+=F)B=r(B/l);return r(L+(l+1)*B/(B+T))},y=function(B){const k=[],P=B.length;let L=0,E=C,N=b,I=B.lastIndexOf(f);I<0&&(I=0);for(let G=0;G<I;++G)B.charCodeAt(G)>=128&&c("not-basic"),k.push(B.charCodeAt(G));for(let G=I>0?I+1:0;G<P;){const W=L;for(let U=1,H=F;;H+=F){G>=P&&c("invalid-input");const V=h(B.charCodeAt(G++));V>=F&&c("invalid-input"),V>r((M-L)/U)&&c("overflow"),L+=V*U;const Y=H<=N?R:H>=N+A?A:H-N;if(V<Y)break;const $=F-Y;U>r(M/$)&&c("overflow"),U*=$}const Z=k.length+1;N=d(L-W,Z,W==0),r(L/Z)>M-E&&c("overflow"),E+=r(L/Z),L%=Z,k.splice(L++,0,E)}return String.fromCodePoint(...k)},p=function(B){const k=[];B=i(B);const P=B.length;let L=C,E=0,N=b;for(const W of B)W<128&&k.push(s(W));const I=k.length;let G=I;for(I&&k.push(f);G<P;){let W=M;for(const U of B)U>=L&&U<W&&(W=U);const Z=G+1;W-L>r((M-E)/Z)&&c("overflow"),E+=(W-L)*Z,L=W;for(const U of B)if(U<L&&++E>M&&c("overflow"),U===L){let H=E;for(let V=F;;V+=F){const Y=V<=N?R:V>=N+A?A:V-N;if(H<Y)break;const $=H-Y,K=F-Y;k.push(s(g(Y+$%K,0))),H=r($/K)}k.push(s(g(H,0))),N=d(E,Z,G===I),E=0,++G}++E,++L}return k.join("")},w=function(B){return a(B,function(k){return v.test(k)?y(k.slice(4).toLowerCase()):k})},S=function(B){return a(B,function(k){return m.test(k)?"xn--"+p(k):k})},O={version:"2.3.1",ucs2:{decode:i,encode:n},decode:y,encode:p,toASCII:S,toUnicode:w};z.default=O},55145:function(X,z,e){"use strict";var M=e(87647),F={},R=new M.Cartographic,A=new M.Ray;F.getCameraFocus=function(T,D,b){var C=T.scene,f=C.camera;if(C.mode!==M.SceneMode.MORPHING&&((0,M.defined)(b)||(b=new M.Cartesian3),(0,M.defined)(T.trackedEntity)?b=T.trackedEntity.position.getValue(T.clock.currentTime,b):(A.origin=f.positionWC,A.direction=f.directionWC,b=C.globe.pick(A,C,b)),!!(0,M.defined)(b)))return C.mode===M.SceneMode.SCENE2D||C.mode===M.SceneMode.COLUMBUS_VIEW?(b=f.worldToCameraCoordinatesPoint(b,b),D&&(b=C.globe.ellipsoid.cartographicToCartesian(C.mapProjection.unproject(b,R),b))):D||(b=f.worldToCameraCoordinatesPoint(b,b)),b},z.Z=F},94791:function(X,z,e){"use strict";e.d(z,{Z:function(){return D}});var M=e(87647),R=function(b){var C=document.createElement("div");C.innerHTML=b;for(var f=document.createDocumentFragment();C.firstChild;)f.appendChild(C.firstChild);return f},A=M.knockout,T=function(b,C,f){C=(0,M.getElement)(C);var v=R(b),m=[],o;for(o=0;o<v.childNodes.length;++o)m.push(v.childNodes[o]);for(C.appendChild(v),o=0;o<m.length;++o){var u=m[o];(u.nodeType===1||u.nodeType===8)&&A.applyBindings(f,u)}return m},D=T},19563:function(X,z,e){"use strict";e.r(z);var M=e(87647),F=e(94791),R=M.knockout,A=function(C){if(!(0,M.defined)(C)||!(0,M.defined)(C.terria))throw new M.DeveloperError("options.terria is required.");this.terria=C.terria,this._removeSubscription=void 0,this._lastLegendUpdate=void 0,this.eventHelper=new M.EventHelper,this.distanceLabel=void 0,this.barWidth=void 0,this.enableDistanceLegend=(0,M.defined)(C.enableDistanceLegend)?C.enableDistanceLegend:!0,R.track(this,["distanceLabel","barWidth"]),this.eventHelper.add(this.terria.afterWidgetChanged,function(){(0,M.defined)(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0)},this);var f=this;function v(){if((0,M.defined)(f.terria)){var m=f.terria.scene;f._removeSubscription=m.postRender.addEventListener(function(){b(this,m)},f)}}v(),this.eventHelper.add(this.terria.afterWidgetChanged,function(){v()},this)};A.prototype.destroy=function(){this.eventHelper.removeAll()},A.prototype.show=function(C){var f;this.enableDistanceLegend?f=`<div class="distance-legend" data-bind="visible: distanceLabel && barWidth"><div class="distance-legend-label" data-bind="text: distanceLabel"></div><div class="distance-legend-scale-bar" data-bind="style: { width: barWidth + 'px', left: (5 + (125 - barWidth) / 2) + 'px' }"></div></div>`:f=`<div class="distance-legend"  style="display: none;" data-bind="visible: distanceLabel && barWidth"><div class="distance-legend-label"  data-bind="text: distanceLabel"></div><div class="distance-legend-scale-bar"  data-bind="style: { width: barWidth + 'px', left: (5 + (125 - barWidth) / 2) + 'px' }"></div></div>`,(0,F.Z)(f,C,this)},A.create=function(C){var f=new A(C);return f.show(C.container),f};var T=new M.EllipsoidGeodesic,D=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7];function b(C,f){if(!C.enableDistanceLegend){C.barWidth=void 0,C.distanceLabel=void 0;return}var v=(0,M.getTimestamp)();if(!(v<C._lastLegendUpdate+250)){C._lastLegendUpdate=v;var m=f.canvas.clientWidth,o=f.canvas.clientHeight,u=f.camera.getPickRay(new M.Cartesian2(m/2|0,o-1)),l=f.camera.getPickRay(new M.Cartesian2(1+m/2|0,o-1));if(!(!u&&!l)){var r=f.globe,s=r.pick(u,f),c=r.pick(l,f);if(!(0,M.defined)(s)||!(0,M.defined)(c)){C.barWidth=void 0,C.distanceLabel=void 0;return}var x=r.ellipsoid.cartesianToCartographic(s),a=r.ellipsoid.cartesianToCartographic(c);T.setEndPoints(x,a);for(var i=T.surfaceDistance,n=100,h,g=D.length-1;!(0,M.defined)(h)&&g>=0;--g)D[g]/i<n&&(h=D[g]);if((0,M.defined)(h)){var d;h>=1e3?d=(h/1e3).toString()+" km":d=h.toString()+" m",C.barWidth=h/i|0,C.distanceLabel=d}else C.barWidth=void 0,C.distanceLabel=void 0}}}z.default=A},65821:function(X,z,e){"use strict";e.d(z,{Z:function(){return D}});var M=e(87647),F=M.knockout,R=function(b){if(!(0,M.defined)(b))throw new M.DeveloperError("terria is required");this._terria=b,this.name="Unnamed Control",this.text=void 0,this.svgIcon=void 0,this.svgHeight=void 0,this.svgWidth=void 0,this.cssClass=void 0,this.isActive=!1,F.track(this,["name","svgIcon","svgHeight","svgWidth","cssClass","isActive"])};Object.defineProperties(R.prototype,{terria:{get:function(){return this._terria}},hasText:{get:function(){return(0,M.defined)(this.text)&&typeof this.text=="string"}}}),R.prototype.activate=function(){throw new M.DeveloperError("activate must be implemented in the derived class.")};var A=R,T=function(b){A.apply(this,arguments)};T.prototype=Object.create(A.prototype);var D=T},99290:function(X,z,e){"use strict";e.r(z),e.d(z,{default:function(){return a}});var M=e(87647),F=e(94791),R="M 7.5,0 C 3.375,0 0,3.375 0,7.5 0,11.625 3.375,15 7.5,15 c 3.46875,0 6.375,-2.4375 7.21875,-5.625 l -1.96875,0 C 12,11.53125 9.9375,13.125 7.5,13.125 4.40625,13.125 1.875,10.59375 1.875,7.5 1.875,4.40625 4.40625,1.875 7.5,1.875 c 1.59375,0 2.90625,0.65625 3.9375,1.6875 l -3,3 6.5625,0 L 15,0 12.75,2.25 C 11.4375,0.84375 9.5625,0 7.5,0 z",A=R,T=e(65821),D=e(49500),b=function(i){T.Z.apply(this,arguments),this.name="\u91CD\u7F6E\u89C6\u56FE",this.navigationLocked=!1,this.svgIcon=A,this.svgHeight=15,this.svgWidth=15,this.cssClass="navigation-control-icon-reset"};b.prototype=Object.create(T.Z.prototype),b.prototype.setNavigationLocked=function(i){this.navigationLocked=i},b.prototype.resetView=function(){if(!this.navigationLocked){var i=this.terria.scene,n=i.screenSpaceCameraController;if(n.enableInputs){this.isActive=!0;var h=i.camera;if((0,M.defined)(this.terria.trackedEntity)){var g=this.terria.trackedEntity;this.terria.trackedEntity=void 0,this.terria.trackedEntity=g}else if(this.terria.options.defaultResetView){if(this.terria.options.defaultResetView&&this.terria.options.defaultResetView instanceof M.Cartographic)h.flyTo({destination:i.globe.ellipsoid.cartographicToCartesian(this.terria.options.defaultResetView)});else if(this.terria.options.defaultResetView&&this.terria.options.defaultResetView instanceof M.Rectangle)try{M.Rectangle.validate(this.terria.options.defaultResetView),h.flyTo({destination:this.terria.options.defaultResetView,orientation:{heading:M.Math.toRadians(5.729578)}})}catch{D.log("Cesium-navigation/ResetViewNavigationControl:   options.defaultResetView Cesium rectangle is  invalid!")}}else typeof h.flyHome=="function"?h.flyHome(1):h.flyTo({destination:M.Camera.DEFAULT_VIEW_RECTANGLE,duration:1});this.isActive=!1}}},b.prototype.activate=function(){this.resetView()};var C=b,f=e(29406),v=e(55145),m=M.knockout,o=function(i){this.terria=i.terria,this.eventHelper=new M.EventHelper,this.enableZoomControls=(0,M.defined)(i.enableZoomControls)?i.enableZoomControls:!0,this.enableCompass=(0,M.defined)(i.enableCompass)?i.enableCompass:!0,this.navigationLocked=!1,this.controls=i.controls,(0,M.defined)(this.controls)||(this.controls=[new f.default(this.terria,!0),new C(this.terria),new f.default(this.terria,!1)]),this.showCompass=(0,M.defined)(this.terria)&&this.enableCompass,this.heading=this.showCompass?this.terria.scene.camera.heading:0,this.isOrbiting=!1,this.orbitCursorAngle=0,this.orbitCursorOpacity=0,this.orbitLastTimestamp=0,this.orbitFrame=void 0,this.orbitIsLook=!1,this.orbitMouseMoveFunction=void 0,this.orbitMouseUpFunction=void 0,this.isRotating=!1,this.rotateInitialCursorAngle=void 0,this.rotateFrame=void 0,this.rotateIsLook=!1,this.rotateMouseMoveFunction=void 0,this.rotateMouseUpFunction=void 0,this._unsubcribeFromPostRender=void 0,m.track(this,["controls","showCompass","heading","isOrbiting","orbitCursorAngle","isRotating"]);var n=this;o.prototype.setNavigationLocked=function(g){this.navigationLocked=g,this.controls&&this.controls.length>1&&this.controls[1].setNavigationLocked(this.navigationLocked)};function h(){(0,M.defined)(n.terria)?(n._unsubcribeFromPostRender&&(n._unsubcribeFromPostRender(),n._unsubcribeFromPostRender=void 0),n.showCompass=n.enableCompass,n._unsubcribeFromPostRender=n.terria.scene.postRender.addEventListener(function(){n.heading=n.terria.scene.camera.heading})):(n._unsubcribeFromPostRender&&(n._unsubcribeFromPostRender(),n._unsubcribeFromPostRender=void 0),n.showCompass=!1)}this.eventHelper.add(this.terria.afterWidgetChanged,h,this),h()};o.prototype.destroy=function(){this.eventHelper.removeAll()},o.prototype.show=function(i){var n;this.enableZoomControls&&this.enableCompass?n=`<div class="compass" title="\u6309\u4E0B\u9F20\u6807\u5DE6\u952E\u5E76\u5411\u56DB\u5468\u62D6\u62FD\u4E0D\u91CA\u653E \u53EF\u4FEE\u6539\u89C6\u56FE\u89D2\u5EA6\u3002\u53CC\u51FB:\u91CD\u7F6E\u89C6\u56FE\u3002" data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity } "></div> <div class="compass-outer-ring" title="\u5355\u51FB\u5E76\u62D6\u62FD\u65CB\u8F6C\uFF0C\u4FEE\u6539\u89C6\u89D2\u65B9\u5411\u3002" data-bind="style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' }, "></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind=" css: { 'compass-gyro-active': isOrbiting }"></div></div><div class="navigation-controls"><!-- ko foreach: controls --><div data-bind="click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' ">   <!-- ko if: $data.hasText -->   <div data-bind="text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind="  css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>  <!-- /ko --> </div> <!-- /ko --></div>`:!this.enableZoomControls&&this.enableCompass?n=`<div class="compass" title="\u6309\u4E0B\u9F20\u6807\u5DE6\u952E\u5E76\u5411\u56DB\u5468\u62D6\u62FD\u4E0D\u91CA\u653E \u53EF\u4FEE\u6539\u89C6\u56FE\u89D2\u5EA6\u3002\u53CC\u51FB:\u91CD\u7F6E\u89C6\u56FE\u3002" data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity }"></div> <div class="compass-outer-ring" title="\u5355\u51FB\u5E76\u62D6\u62FD\u65CB\u8F6C\uFF0C\u4FEE\u6539\u89C6\u89D2\u65B9\u5411\u3002" data-bind="style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' } "></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind=" css: { 'compass-gyro-active': isOrbiting }"></div></div><div class="navigation-controls"  style="display: none;" ><!-- ko foreach: controls --><div data-bind="click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' ">   <!-- ko if: $data.hasText -->   <div data-bind="text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind="  css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>  <!-- /ko --> </div> <!-- /ko --></div>`:this.enableZoomControls&&!this.enableCompass?n=`<div class="compass"  style="display: none;" title="\u6309\u4E0B\u9F20\u6807\u5DE6\u952E\u5E76\u5411\u56DB\u5468\u62D6\u62FD\u4E0D\u91CA\u653E \u53EF\u4FEE\u6539\u89C6\u56FE\u89D2\u5EA6\u3002\u53CC\u51FB:\u91CD\u7F6E\u89C6\u56FE\u3002" data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity } "></div> <div class="compass-outer-ring" title="\u5355\u51FB\u5E76\u62D6\u62FD\u65CB\u8F6C\uFF0C\u4FEE\u6539\u89C6\u89D2\u65B9\u5411\u3002" data-bind="style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' } "></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind=" css: { 'compass-gyro-active': isOrbiting }"></div></div><div class="navigation-controls"    ><!-- ko foreach: controls --><div data-bind="click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' ">   <!-- ko if: $data.hasText -->   <div data-bind="text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind="  css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>  <!-- /ko --> </div> <!-- /ko --></div>`:!this.enableZoomControls&&!this.enableCompass&&(n=`<div class="compass"  style="display: none;" title=\u6309\u4E0B\u9F20\u6807\u5DE6\u952E\u5E76\u5411\u56DB\u5468\u62D6\u62FD\u4E0D\u91CA\u653E \u53EF\u4FEE\u6539\u89C6\u56FE\u89D2\u5EA6\u3002\u53CC\u51FB:\u91CD\u7F6E\u89C6\u56FE\u3002" data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div> <div class="compass-rotation-marker" data-bind="visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity } "></div> <div class="compass-outer-ring" title="\u5355\u51FB\u5E76\u62D6\u62FD\u65CB\u8F6C\uFF0C\u4FEE\u6539\u89C6\u89D2\u65B9\u5411\u3002" data-bind="style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' } "></div> <div class="compass-gyro-background"></div> <div class="compass-gyro" data-bind="  css: { 'compass-gyro-active': isOrbiting }"></div></div><div class="navigation-controls"   style="display: none;" ><!-- ko foreach: controls --><div data-bind="click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' ">   <!-- ko if: $data.hasText -->   <div data-bind="text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind="  css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass"></div>  <!-- /ko --> </div> <!-- /ko --></div>`),(0,F.Z)(n,i,this)},o.prototype.add=function(i){this.controls.push(i)},o.prototype.remove=function(i){this.controls.remove(i)},o.prototype.isLastControl=function(i){return i===this.controls[this.controls.length-1]};var u=new M.Cartesian2;o.prototype.handleMouseDown=function(i,n){var h=this.terria.scene;if(h.mode===M.SceneMode.MORPHING||i.navigationLocked)return!0;var g=n.currentTarget,d=n.currentTarget.getBoundingClientRect(),y=d.width/2,p=new M.Cartesian2((d.right-d.left)/2,(d.bottom-d.top)/2),w=new M.Cartesian2(n.clientX-d.left,n.clientY-d.top),S=M.Cartesian2.subtract(w,p,u),O=M.Cartesian2.magnitude(S),B=O/y,k=145,P=50;if(B<P/k)c(this,g,S);else if(B<1)x(this,g,S);else return!0};var l=new M.Matrix4,r=new M.Matrix4,s=new M.Cartesian3;o.prototype.handleDoubleClick=function(i,n){var h=i.terria.scene,g=h.camera,d=h.screenSpaceCameraController;if(h.mode===M.SceneMode.MORPHING||!d.enableInputs||i.navigationLocked)return!0;if(!(h.mode===M.SceneMode.COLUMBUS_VIEW&&!d.enableTranslate)&&!((h.mode===M.SceneMode.SCENE3D||h.mode===M.SceneMode.COLUMBUS_VIEW)&&(!d.enableLook||h.mode===M.SceneMode.SCENE3D&&!d.enableRotate))){var y=v.Z.getCameraFocus(i.terria,!0,s);if(!(0,M.defined)(y)){this.controls[1].resetView();return}var p=h.globe.ellipsoid.cartographicToCartesian(g.positionCartographic,new M.Cartesian3),w=h.globe.ellipsoid.geodeticSurfaceNormal(y),S=new M.BoundingSphere(y,0);g.flyToBoundingSphere(S,{offset:new M.HeadingPitchRange(0,M.Math.PI_OVER_TWO-M.Cartesian3.angleBetween(w,g.directionWC),M.Cartesian3.distance(p,y)),duration:1.5})}},o.create=function(i){var n=new o(i);return n.show(i.container),n};function c(i,n,h){var g=i.terria.scene,d=g.screenSpaceCameraController;if(g.mode===M.SceneMode.MORPHING||!d.enableInputs)return;if(i.navigationLocked)return!0;switch(g.mode){case M.SceneMode.COLUMBUS_VIEW:if(d.enableLook)break;if(!d.enableTranslate||!d.enableTilt)return;break;case M.SceneMode.SCENE3D:if(d.enableLook)break;if(!d.enableTilt||!d.enableRotate)return;break;case M.SceneMode.SCENE2D:if(!d.enableTranslate)return;break}document.removeEventListener("mousemove",i.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",i.orbitMouseUpFunction,!1),(0,M.defined)(i.orbitTickFunction)&&i.terria.clock.onTick.removeEventListener(i.orbitTickFunction),i.orbitMouseMoveFunction=void 0,i.orbitMouseUpFunction=void 0,i.orbitTickFunction=void 0,i.isOrbiting=!0,i.orbitLastTimestamp=(0,M.getTimestamp)();var y=g.camera;if((0,M.defined)(i.terria.trackedEntity))i.orbitFrame=void 0,i.orbitIsLook=!1;else{var p=v.Z.getCameraFocus(i.terria,!0,s);(0,M.defined)(p)?(i.orbitFrame=M.Transforms.eastNorthUpToFixedFrame(p,g.globe.ellipsoid,r),i.orbitIsLook=!1):(i.orbitFrame=M.Transforms.eastNorthUpToFixedFrame(y.positionWC,g.globe.ellipsoid,r),i.orbitIsLook=!0)}i.orbitTickFunction=function(S){var O=(0,M.getTimestamp)(),B=O-i.orbitLastTimestamp,k=(i.orbitCursorOpacity-.5)*2.5/1e3,P=B*k,L=i.orbitCursorAngle+M.Math.PI_OVER_TWO,E=Math.cos(L)*P,N=Math.sin(L)*P,I;if(i.navigationLocked)return!0;(0,M.defined)(i.orbitFrame)&&(I=M.Matrix4.clone(y.transform,l),y.lookAtTransform(i.orbitFrame)),g.mode===M.SceneMode.SCENE2D?y.move(new M.Cartesian3(E,N,0),Math.max(g.canvas.clientWidth,g.canvas.clientHeight)/100*y.positionCartographic.height*P):i.orbitIsLook?(y.look(M.Cartesian3.UNIT_Z,-E),y.look(y.right,-N)):(y.rotateLeft(E),y.rotateUp(N)),(0,M.defined)(i.orbitFrame)&&y.lookAtTransform(I),i.orbitLastTimestamp=O};function w(S,O){var B=Math.atan2(-S.y,S.x);i.orbitCursorAngle=M.Math.zeroToTwoPi(B-M.Math.PI_OVER_TWO);var k=M.Cartesian2.magnitude(S),P=O/2,L=Math.min(k/P,1),E=.5*L*L+.5;i.orbitCursorOpacity=E}i.orbitMouseMoveFunction=function(S){var O=n.getBoundingClientRect(),B=new M.Cartesian2((O.right-O.left)/2,(O.bottom-O.top)/2),k=new M.Cartesian2(S.clientX-O.left,S.clientY-O.top),P=M.Cartesian2.subtract(k,B,u);w(P,O.width)},i.orbitMouseUpFunction=function(S){i.isOrbiting=!1,document.removeEventListener("mousemove",i.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",i.orbitMouseUpFunction,!1),(0,M.defined)(i.orbitTickFunction)&&i.terria.clock.onTick.removeEventListener(i.orbitTickFunction),i.orbitMouseMoveFunction=void 0,i.orbitMouseUpFunction=void 0,i.orbitTickFunction=void 0},document.addEventListener("mousemove",i.orbitMouseMoveFunction,!1),document.addEventListener("mouseup",i.orbitMouseUpFunction,!1),i.terria.clock.onTick.addEventListener(i.orbitTickFunction),w(h,n.getBoundingClientRect().width)}function x(i,n,h){var g=i.terria.scene,d=g.camera,y=g.screenSpaceCameraController;if(!(g.mode===M.SceneMode.MORPHING||g.mode===M.SceneMode.SCENE2D||!y.enableInputs)){if(i.navigationLocked)return!0;if(!(!y.enableLook&&(g.mode===M.SceneMode.COLUMBUS_VIEW||g.mode===M.SceneMode.SCENE3D&&!y.enableRotate))){if(document.removeEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",i.rotateMouseUpFunction,!1),i.rotateMouseMoveFunction=void 0,i.rotateMouseUpFunction=void 0,i.isRotating=!0,i.rotateInitialCursorAngle=Math.atan2(-h.y,h.x),(0,M.defined)(i.terria.trackedEntity))i.rotateFrame=void 0,i.rotateIsLook=!1;else{var p=v.Z.getCameraFocus(i.terria,!0,s);!(0,M.defined)(p)||g.mode===M.SceneMode.COLUMBUS_VIEW&&!y.enableLook&&!y.enableTranslate?(i.rotateFrame=M.Transforms.eastNorthUpToFixedFrame(d.positionWC,g.globe.ellipsoid,r),i.rotateIsLook=!0):(i.rotateFrame=M.Transforms.eastNorthUpToFixedFrame(p,g.globe.ellipsoid,r),i.rotateIsLook=!1)}var w;(0,M.defined)(i.rotateFrame)&&(w=M.Matrix4.clone(d.transform,l),d.lookAtTransform(i.rotateFrame)),i.rotateInitialCameraAngle=-d.heading,(0,M.defined)(i.rotateFrame)&&d.lookAtTransform(w),i.rotateMouseMoveFunction=function(S){var O=n.getBoundingClientRect(),B=new M.Cartesian2((O.right-O.left)/2,(O.bottom-O.top)/2),k=new M.Cartesian2(S.clientX-O.left,S.clientY-O.top),P=M.Cartesian2.subtract(k,B,u),L=Math.atan2(-P.y,P.x),E=L-i.rotateInitialCursorAngle,N=M.Math.zeroToTwoPi(i.rotateInitialCameraAngle-E),I=i.terria.scene.camera,G;(0,M.defined)(i.rotateFrame)&&(G=M.Matrix4.clone(I.transform,l),I.lookAtTransform(i.rotateFrame));var W=-I.heading;I.rotateRight(N-W),(0,M.defined)(i.rotateFrame)&&I.lookAtTransform(G)},i.rotateMouseUpFunction=function(S){i.isRotating=!1,document.removeEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",i.rotateMouseUpFunction,!1),i.rotateMouseMoveFunction=void 0,i.rotateMouseUpFunction=void 0},document.addEventListener("mousemove",i.rotateMouseMoveFunction,!1),document.addEventListener("mouseup",i.rotateMouseUpFunction,!1)}}}var a=o},29406:function(X,z,e){"use strict";e.r(z);var M=e(87647),F=e(65821),R=e(55145),A=function(D,b){F.Z.apply(this,arguments),this.name="Zoom "+(b?"In":"Out"),this.text=b?"+":"-",this.cssClass="navigation-control-icon-zoom-"+(b?"in":"out"),this.relativeAmount=2,b&&(this.relativeAmount=1/this.relativeAmount)};A.prototype.relativeAmount=1,A.prototype=Object.create(F.Z.prototype),A.prototype.activate=function(){this.zoom(this.relativeAmount)};var T=new M.Cartesian3;A.prototype.zoom=function(D){if(this.isActive=!0,(0,M.defined)(this.terria)){var b=this.terria.scene,C=b.screenSpaceCameraController;if(!C.enableInputs||!C.enableZoom)return;var f=b.camera,v;switch(b.mode){case M.SceneMode.MORPHING:break;case M.SceneMode.SCENE2D:f.zoomIn(f.positionCartographic.height*(1-this.relativeAmount));break;default:var m;if((0,M.defined)(this.terria.trackedEntity)?m=new M.Cartesian3:m=R.Z.getCameraFocus(this.terria,!1),(0,M.defined)(m))v={direction:f.direction,up:f.up};else{var o=new M.Ray(f.worldToCameraCoordinatesPoint(b.globe.ellipsoid.cartographicToCartesian(f.positionCartographic)),f.directionWC);m=M.IntersectionTests.grazingAltitudeLocation(o,b.globe.ellipsoid),v={heading:f.heading,pitch:f.pitch,roll:f.roll}}var u=M.Cartesian3.subtract(f.position,m,T),l=M.Cartesian3.multiplyByScalar(u,D,u),r=M.Cartesian3.add(m,l,m);(0,M.defined)(this.terria.trackedEntity)||b.mode===M.SceneMode.COLUMBUS_VIEW?f.position=r:f.flyTo({destination:r,orientation:v,duration:.5,convert:!1})}}this.isActive=!1},z.default=A},6509:function(X,z,e){"use strict";e.r(z),e.d(z,{default:function(){return S}});var M=e(87647),F=e(6448),R=e.n(F),A=e(30479),T=e.n(A),D=/<html(.|\s)*>(.|\s)*<\/html>/im,b=new(T())({html:!0,linkify:!0});b.use(R(),{imageClass:"",removeUnbalanced:!1,removeUnknown:!1});var C={register:function(O){O.bindingHandlers.markdown={init:function(){return{controlsDescendantBindings:!0}},update:function(B,k){for(;B.firstChild;)O.removeNode(B.firstChild);var P=O.unwrap(k()),L;D.test(P)?L=P:L=b.render(P);var E=O.utils.parseHtmlFragment(L,B);B.className=B.className+" markdown";for(var N=0;N<E.length;++N){var I=E[N];f(I),B.appendChild(I)}}}}};function f(O){if(O instanceof HTMLAnchorElement&&(O.target="_blank"),O.childNodes&&O.childNodes.length>0)for(var B=0;B<O.childNodes.length;++B)f(O.childNodes[B])}var v=C,m=e(11553),o=e.n(m),u=null,l={register:function(O){O.bindingHandlers.swipeLeft={init:function(B,k,P,L,E){var N=O.unwrap(k());new(o())(B).on("swipeleft",function(I){var G=E.$data;N.apply(G,arguments)})}},O.bindingHandlers.swipeRight={init:function(B,k,P,L,E){var N=O.unwrap(k());new(o())(B).on("swiperight",function(I){var G=E.$data;N.apply(G,arguments)})}}}},r=l,s=M.knockout,c=function(){M.SvgPathBindingHandler.register(s),v.register(s),r.register(s),s.bindingHandlers.embeddedComponent={init:function(O,B,k,P,L){var E=s.unwrap(B());return E.show(O),{controlsDescendantBindings:!0}},update:function(O,B,k,P,L){}}},x=c,a=e(19563),i=e(99290),n=M.Event,h=null,g=function(O){d.apply(this,arguments),this._onDestroyListeners=[]};g.prototype.distanceLegendViewModel=void 0,g.prototype.navigationViewModel=void 0,g.prototype.navigationDiv=void 0,g.prototype.distanceLegendDiv=void 0,g.prototype.terria=void 0,g.prototype.container=void 0,g.prototype._onDestroyListeners=void 0,g.prototype._navigationLocked=!1,g.prototype.setNavigationLocked=function(O){this._navigationLocked=O,this.navigationViewModel.setNavigationLocked(this._navigationLocked)},g.prototype.getNavigationLocked=function(){return this._navigationLocked},g.prototype.destroy=function(){(0,M.defined)(this.navigationViewModel)&&this.navigationViewModel.destroy(),(0,M.defined)(this.distanceLegendViewModel)&&this.distanceLegendViewModel.destroy(),(0,M.defined)(this.navigationDiv)&&this.navigationDiv.parentNode.removeChild(this.navigationDiv),delete this.navigationDiv,(0,M.defined)(this.distanceLegendDiv)&&this.distanceLegendDiv.parentNode.removeChild(this.distanceLegendDiv),delete this.distanceLegendDiv,(0,M.defined)(this.container)&&this.container.parentNode.removeChild(this.container),delete this.container;for(var O=0;O<this._onDestroyListeners.length;O++)this._onDestroyListeners[O]()},g.prototype.addOnDestroyListener=function(O){typeof O=="function"&&this._onDestroyListeners.push(O)};function d(O,B){if(!(0,M.defined)(O))throw new M.DeveloperError("CesiumWidget or Viewer is required.");var k=(0,M.defined)(O.cesiumWidget)?O.cesiumWidget:O,P=document.createElement("div");P.className="cesium-widget-cesiumNavigationContainer",k.container.appendChild(P),this.terria=O,this.terria.options=(0,M.defined)(B)?B:{},this.terria.afterWidgetChanged=new n,this.terria.beforeWidgetChanged=new n,this.container=P,x(),(!(0,M.defined)(this.terria.options.enableDistanceLegend)||this.terria.options.enableDistanceLegend)&&(this.distanceLegendDiv=document.createElement("div"),P.appendChild(this.distanceLegendDiv),this.distanceLegendDiv.setAttribute("id","distanceLegendDiv"),this.distanceLegendViewModel=a.default.create({container:this.distanceLegendDiv,terria:this.terria,mapElement:P,enableDistanceLegend:!0})),(!(0,M.defined)(this.terria.options.enableZoomControls)||this.terria.options.enableZoomControls)&&(!(0,M.defined)(this.terria.options.enableCompass)||this.terria.options.enableCompass)?(this.navigationDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","navigationDiv"),P.appendChild(this.navigationDiv),this.navigationViewModel=i.default.create({container:this.navigationDiv,terria:this.terria,enableZoomControls:!0,enableCompass:!0})):(0,M.defined)(this.terria.options.enableZoomControls)&&!this.terria.options.enableZoomControls&&(!(0,M.defined)(this.terria.options.enableCompass)||this.terria.options.enableCompass)?(this.navigationDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","navigationDiv"),P.appendChild(this.navigationDiv),this.navigationViewModel=i.default.create({container:this.navigationDiv,terria:this.terria,enableZoomControls:!1,enableCompass:!0})):(!(0,M.defined)(this.terria.options.enableZoomControls)||this.terria.options.enableZoomControls)&&(0,M.defined)(this.terria.options.enableCompass)&&!this.terria.options.enableCompass?(this.navigationDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","navigationDiv"),P.appendChild(this.navigationDiv),this.navigationViewModel=i.default.create({container:this.navigationDiv,terria:this.terria,enableZoomControls:!0,enableCompass:!1})):(0,M.defined)(this.terria.options.enableZoomControls)&&!this.terria.options.enableZoomControls&&(0,M.defined)(this.terria.options.enableCompass)&&this.terria.options.enableCompass}var y=g;function p(O,B){if(!(0,M.defined)(O))throw new M.DeveloperError("viewer is required.");var k=w(O,B);k.addOnDestroyListener(function(P){return function(){delete P.cesiumNavigation}}(O)),Object.defineProperties(O,{cesiumNavigation:{configurable:!0,get:function(){return O.cesiumWidget.cesiumNavigation}}})}p.mixinWidget=function(O,B){return w.apply(void 0,arguments)};var w=function(O,B){var k=new y(O,B),P=(0,M.defined)(O.cesiumWidget)?O.cesiumWidget:O;return Object.defineProperties(P,{cesiumNavigation:{configurable:!0,get:function(){return k}}}),k.addOnDestroyListener(function(L){return function(){delete L.cesiumNavigation}}(P)),k},S=p},42786:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(85208),A=e(59791),T=e(22466),D=e(83393),b=e(5077),C=e(87879),f=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.register=z.Draw=void 0;var v=f(e(22466)),m=f(e(85208)),o=f(e(81806)),u=f(e(98924)),l=f(e(53267)),r=f(e(20314)),s=f(e(52909)),c=f(e(36583)),x=f(e(43389)),a=f(e(29870)),i=f(e(22777)),n=f(e(42762)),h=f(e(42579)),g=rt(e(87647)),d=e(6386),y=e(70317),p=rt(e(80823)),w=rt(e(36161)),S=rt(e(69973)),O=e(4997),B=e(41471),k=e(37583),P=e(2235),L=e(71350),E=e(41054),N=e(59575),I=e(29092),G=e(30625),W=e(63622),Z=e(76477),U=e(94688),H=e(52273),V=e(76863),Y=e(94818),$=e(8008),K=e(31320),J=e(11171),Q=e(32325),et=e(74385),nt=e(39705),st=void 0;function ut(Tt){if(typeof C!="function")return null;var mt=new C,Ft=new C;return(ut=function(vt){return vt?Ft:mt})(Tt)}function rt(Tt,mt){if(!mt&&Tt&&Tt.__esModule)return Tt;if(Tt===null||F(Tt)!=="object"&&typeof Tt!="function")return{default:Tt};var Ft=ut(mt);if(Ft&&Ft.has(Tt))return Ft.get(Tt);var ct={},vt=Object.defineProperty&&D;for(var Dt in Tt)if(Dt!=="default"&&Object.prototype.hasOwnProperty.call(Tt,Dt)){var Ct=vt?D(Tt,Dt):null;Ct&&(Ct.get||Ct.set)?Object.defineProperty(ct,Dt,Ct):ct[Dt]=Tt[Dt]}return ct.default=Tt,Ft&&Ft.set(Tt,ct),ct}function ht(Tt,mt){var Ft=R(Tt);if(A){var ct=A(Tt);mt&&(ct=T(ct).call(ct,function(vt){return D(Tt,vt).enumerable})),Ft.push.apply(Ft,ct)}return Ft}function Pt(Tt){for(var mt=1;mt<arguments.length;mt++){var Ft=arguments[mt]!=null?arguments[mt]:{};mt%2?ht(Object(Ft),!0).forEach(function(ct){(0,x.default)(Tt,ct,Ft[ct])}):b?Object.defineProperties(Tt,b(Ft)):ht(Object(Ft)).forEach(function(ct){Object.defineProperty(Tt,ct,D(Ft,ct))})}return Tt}var wt={},At=function(mt,Ft){(0,h.default)(this,st),wt[mt]=Ft}.bind(void 0);z.register=At;var Nt=function(){function Tt(){var mt=this,Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:200;(0,i.default)(this,Tt),this.step=Ft,this.timer=null,this.callback=function(){(0,h.default)(this,mt),M.warn("\u8BF7\u8BBE\u7F6E\u9632\u6296\u7684\u56DE\u8C03\u51FD\u6570")}.bind(this)}return(0,n.default)(Tt,[{key:"active",value:function(Ft){var ct=this;clearTimeout(this.timer),this.callback=Ft||this.callback,this.timer=setTimeout(function(){(0,h.default)(this,ct),this.callback()}.bind(this),this.step)}}]),Tt}(),Lt=new Nt,Rt=d.Evented.extend({collection:null,dataSource:null,primitives:null,groundPrimitives:null,drawCtrl:null,initialize:function(mt,Ft){this.drawToolType="DrawAll",this.viewer=mt,this.id=g.createGuid(),this.options=Ft||{};var ct=this.viewer.shine.getLayer(Ft.id,"id");!ct&&(ct=this.viewer.shine.getLayer("temporaryDrawLayer","id")),this.collection=ct,this.dataSource=this.collection.dataSource,this.primitives=this.collection.primitiveCollection,this.groundPrimitives=this.collection.groundPrimitiveCollection,this.tooltip=new y.Tooltip(this.viewer.container);var vt={viewer:this.viewer,dataSource:this.dataSource,primitives:this.primitives,groundPrimitives:this.groundPrimitives,tooltip:this.tooltip,drawTool:this};this.drawCtrl={},this.drawCtrl.point=new B.DrawPoint(vt),this.drawCtrl.billboard=new k.DrawBillboard(vt),this.drawCtrl.label=new L.DrawLabel(vt),this.drawCtrl.model=new E.DrawModel(vt),this.drawCtrl.polyline=new N.DrawPolyline(vt),this.drawCtrl.curve=new I.DrawCurve(vt),this.drawCtrl.polylineVolume=new G.DrawPolylineVolume(vt),this.drawCtrl.corridor=new W.DrawCorridor(vt),this.drawCtrl.polygon=new Z.DrawPolygon(vt),this.drawCtrl.rectangle=new U.DrawRectangle(vt),this.drawCtrl.ellipse=new H.DrawCircle(vt),this.drawCtrl.circle=this.drawCtrl.ellipse,this.drawCtrl.cylinder=new V.DrawCylinder(vt),this.drawCtrl.ellipsoid=new Y.DrawEllipsoid(vt),this.drawCtrl.wall=new $.DrawWall(vt),this.drawCtrl.plotting=new Q.DrawPlotting(vt),this.drawCtrl.videoProjection=new et.DrawVideoProjection(vt),this.drawCtrl["model-p"]=new K.DrawPModel(vt),this.drawCtrl.cloud=new P.DrawCloud(vt);for(var Dt in wt)this.drawCtrl[Dt]=new wt[Dt](vt);g.defaultValue(this.options.removeScreenSpaceEvent,!![])&&(this.viewer.screenSpaceEventHandler.removeInputAction(g.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.viewer.screenSpaceEventHandler.removeInputAction(g.ScreenSpaceEventType.LEFT_CLICK),this.viewer.screenSpaceEventHandler.removeInputAction(g.ScreenSpaceEventType.MOUSE_MOVE));var Ct=this;for(var jt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,jt)&&(this.drawCtrl[jt]._fire=function(zt,Yt,Zt){Ct.fire(zt,Yt,Zt)});this.on(S.DrawCreated,function(zt){this.startEditing(zt.entity),this.fire("change:active",{active:![]})},this)},setDrawTypes:function(mt){var Ft,ct=this,vt=(0,v.default)(Ft=(0,m.default)(this._drawTool.drawCtrl)).call(Ft,function(Dt){return(0,h.default)(this,ct),(0,o.default)(mt).call(mt,Dt)}.bind(this)).reduce(function(Dt,Ct){return(0,h.default)(this,ct),Dt[Ct]=this._drawTool.drawCtrl[Ct],Dt}.bind(this),{});this._drawTool.drawCtrl=vt},setEditLayer:function(mt,Ft){var ct=this.viewer.shine.getLayer(mt,"id");!ct&&(ct=this.viewer.shine.getLayer("temporaryDrawLayer","id")),this.collection=ct,this.dataSource=this.collection.dataSource,this.primitives=this.collection.primitiveCollection,this.groundPrimitives=this.collection.groundPrimitiveCollection,this.drawCtrl.point.setLayer(this.collection),this.drawCtrl.billboard.setLayer(this.collection),this.drawCtrl.label.setLayer(this.collection),this.drawCtrl.model.setLayer(this.collection),this.drawCtrl.polyline.setLayer(this.collection),this.drawCtrl.curve.setLayer(this.collection),this.drawCtrl.polylineVolume.setLayer(this.collection),this.drawCtrl.corridor.setLayer(this.collection),this.drawCtrl.polygon.setLayer(this.collection),this.drawCtrl.rectangle.setLayer(this.collection),this.drawCtrl.ellipse.setLayer(this.collection),this.drawCtrl.circle=this.drawCtrl.ellipse,this.drawCtrl.cylinder.setLayer(this.collection),this.drawCtrl.ellipsoid.setLayer(this.collection),this.drawCtrl.wall.setLayer(this.collection),this.drawCtrl.plotting.setLayer(this.collection),this.drawCtrl.videoProjection.setLayer(this.collection),this.drawCtrl["model-p"].setLayer(this.collection),this.drawCtrl.cloud.setLayer(this.collection);for(var vt in wt)this.drawCtrl[vt].setLayer(this.collection);this.hasEdit(g.defaultValue(Ft,this._hasEdit))},_activateCollection:function(mt){this.dataSource=mt.dataSource;for(var Ft in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,Ft)&&(this.drawCtrl[Ft].dataSource=this.dataSource)},_resetCollection:function(){for(var mt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,mt)&&(this.drawCtrl[mt].dataSource=this.dataSource)},changeMode:function(mt){mt==null&&(mt=(0,u.default)(this.drawCtrl)[0].mode,mt=mt==="entity"?"primitive":"entity"),mt=mt==="entity"?"entity":"primitive";for(var Ft in this.drawCtrl)if(Object.prototype.hasOwnProperty.call(this.drawCtrl,Ft)){var ct=this.drawCtrl[Ft];ct.mode=mt}return mt},startDraw:function(mt){if(typeof mt=="string")mt={drawtype:mt};else if(mt==null||mt.drawtype==null){M.error("\u9700\u8981\u4F20\u5165\u6307\u5B9A\u7ED8\u5236\u7684type\u7C7B\u578B\uFF01");return}var Ft=mt.drawtype;if(this.drawCtrl[Ft]==null){M.error("\u4E0D\u80FD\u8FDB\u884Ctype\u4E3A\u3010"+Ft+"\u3011\u7684\u7ED8\u5236\uFF0C\u65E0\u8BE5\u7C7B\u578B\uFF01");return}var ct;mt.success&&(ct=mt.success,delete mt.success),mt=w.addGeoJsonDefVal(mt),this.stopDraw();var vt=this.drawCtrl[Ft].activate(mt,ct);return this.bindDeleteContextmenu(vt),this.fire("change:active",{active:!![],drawtype:mt.edittype}),vt},endDraw:function(){for(var mt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,mt)&&this.drawCtrl[mt].endDraw&&this.drawCtrl[mt].endDraw();return this},stopDraw:function(){this.stopEditing();for(var mt in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,mt)&&this.drawCtrl[mt].disable(!![]);return this.fire("change:active",{active:![]}),this},clearDraw:function(){return this.stopDraw(),this.collection.deleteFeatures(),this},currEditFeature:null,getCurrentEntity:function(){return this.currEditFeature},_hasEdit:![],hasEdit:function(mt){if(!(this._hasEdit!==null&&this._hasEdit===mt))if(this._hasEdit=mt,mt)this.bindSelectEvent();else{var Ft,ct;(Ft=this.currEditFeature)!==null&&Ft!==void 0&&(ct=Ft.editing)!==null&&ct!==void 0&&ct.disable&&this.stopEditing(),this.destroySelectEvent()}},bindSelectEvent:function(){var mt=this,Ft=new g.ScreenSpaceEventHandler(this.viewer.scene.canvas);Ft.setInputAction(function(ct){var vt,Dt=mt.viewer.scene.drillPick(ct.position);if(Dt.length){for(var Ct=0;Ct<Dt.length;Ct++)if(vt=Dt[Ct],g.defined(vt)){var jt=vt.id||vt.primitive.id||vt.primitive;if(jt&&mt.isMyEntity(jt)&&!jt._noMousePosition){if(mt.currEditFeature&&mt.currEditFeature===jt)return;if(!g.defaultValue(jt.inProgress,![])){jt&&jt.attribute&&jt.attribute.kzedit?mt.stopEditing():(mt.startEditing(jt),setTimeout(function(){mt.tooltip.showAt(ct.endPosition,y.message.edit.start)},100));return}}}}mt.stopEditing()},g.ScreenSpaceEventType.LEFT_CLICK),Ft.setInputAction(function(ct){var vt=this;mt._hasEdit&&((0,l.default)(mt.dataSource.entities).length===0&&mt.primitives._primitives.length===0||(mt.tooltip._div.style.display!=="none"&&mt.tooltip.setVisible(![]),Lt.active(function(){(0,h.default)(this,vt);var Dt,Ct=mt.viewer.scene.drillPick(ct.endPosition);if(Ct.length)for(var jt=function(){if(Dt=Ct[zt],g.defined(Dt)){var ft=Dt.id||Dt.primitive.id||Dt.primitive;if(ft&&mt.isMyEntity(ft)){if(mt.currEditFeature&&mt.currEditFeature===ft)return{v:void 0};if(!g.defaultValue(ft.inProgress,![])){var gt=mt.tooltip,dt=y.message.edit.start;ft._isDragger&&(dt=ft.draw_tooltip),ft&&ft.attribute&&ft.attribute.kzedit&&(dt=y.message.del.end),setTimeout(function(){gt.showAt(ct.endPosition,dt)},100)}return{v:void 0}}}},zt=0;zt<Ct.length;zt++){var Yt=jt();if((0,a.default)(Yt)==="object")return Yt.v}}.bind(this))))},g.ScreenSpaceEventType.MOUSE_MOVE),Ft.setInputAction(function(ct){if(mt._hasEdit){mt.tooltip.setVisible(![]);var vt,Dt=mt.viewer.scene.drillPick(ct.position);if(Dt.length)for(var Ct=function(){if(vt=Dt[jt],g.defined(vt)){var Zt=vt.id||vt.primitive.id||vt.primitive;if(Zt&&mt.isMyEntity(Zt))return mt.currEditFeature&&mt.currEditFeature===Zt?{v:void 0}:(!g.defaultValue(Zt.inProgress,![])&&(Zt&&Zt.editing&&Zt._isDragger&&Zt.movepoint&&(mt.deleteEntity(Zt),mt.viewer.shine.popup.close()),Zt&&Zt.editing&&!g.defaultValue(Zt.inProgress,![])&&mt.isMyEntity(Zt)&&setTimeout(function(){if(mt.deleteEntity(Zt),mt.options.calbackdel&&mt.options.calbackdel(Zt),Zt._exline&&mt.dataSource.entities.remove(Zt._exline),Zt._arrLables)for(var ft=0;ft<Zt._arrLables.length;ft++)Zt._arrLables[ft].show=![];Zt._totalLable&&(Zt._totalLable.show=![])},100)),{v:void 0})}},jt=0;jt<Dt.length;jt++){var zt=Ct();if((0,a.default)(zt)==="object")return zt.v}}},g.ScreenSpaceEventType.RIGHT_CLICK),this.selectHandler=Ft},destroySelectEvent:function(){this.selectHandler&&this.selectHandler.destroy(),this.selectHandler=void 0},startEditing:function(mt){this.stopEditing(),!(mt==null||!this._hasEdit)&&(mt.editing&&mt.editing.activate&&mt.editing.activate(),this.currEditFeature=mt)},stopEditing:function(){var mt,Ft;(mt=this.currEditFeature)!==null&&mt!==void 0&&(Ft=mt.editing)!==null&&Ft!==void 0&&Ft.disable&&this.currEditFeature.editing.disable(),this.currEditFeature=null},updateAttribute:function(mt,Ft){if(Ft==null&&(Ft=this.currEditFeature),!(Ft==null||mt==null)){mt.style=mt.style||{},mt.attr=mt.attr||{};var ct=Ft.attribute.drawtype;if(this.drawCtrl[ct].style2Entity(mt.style,Ft),Ft[ct]&&(Ft[ct].isTrueGraphic=!![]),Ft.attribute=Pt(Pt({},Ft.attribute),mt),this.drawCtrl[ct].bindOutline&&this.drawCtrl[ct].bindOutline(Ft),this.checkEditing(Ft),Ft.editing&&(Ft.editing.updateAttrForEditing&&Ft.editing.updateAttrForEditing(),Ft.editing.updateDraggers&&Ft.editing.updateDraggers()),this.options.nameTooltip){var vt=this;Ft.attribute.attr&&Ft.attribute.attr.name?Ft.tooltip={html:Ft.attribute.attr.name,check:function(){return!vt._hasEdit}}:Ft.tooltip=null}return Ft}},checkEditing:function(mt){var Ft=mt.attribute.drawtype;if(mt.editing.type!==Ft){var ct=mt.editing._enabled;mt.editing.disable(),mt.editing=this.drawCtrl[Ft].getEditClass(mt),ct&&mt.editing.activate()}},setCoordinates:function(mt,Ft){return mt=w.lonlats2cartesians(mt),this.setPositions(mt,Ft)},setPositions:function(mt,Ft){if(Ft==null&&(Ft=this.currEditFeature),!(Ft==null||mt==null))return Ft.editing&&(Ft.editing.setPositions(mt),Ft.editing.updateDraggers()),Ft},bindDeleteContextmenu:function(mt){var Ft=this;mt.contextmenuItems=mt.contextmenuItems||[],mt.contextmenuItems.push({text:"\u5220\u9664\u5BF9\u8C61",iconCls:"fa fa-trash-o",visible:function(){return Ft._hasEdit},calback:function(vt){var Dt=vt.target;Dt.editing&&Dt.editing.disable&&Dt.editing.disable(),Ft.deleteEntity(Dt)}})},deleteEntity:function(mt){var Ft=this;if(mt=mt||this.currEditFeature,mt!=null){mt.editing&&mt.editing.disable();var ct=this.primitives._primitives;if(mt instanceof g.Entity)if(mt.id.match(/_multi[0-9]/)){var vt,Dt=(0,r.default)(vt=mt.id).call(vt,0,mt.id.indexOf("_multi"));(0,c.default)(this.getEntitys()).forEach(function(Zt){var ft;(0,h.default)(this,Ft),!((ft=Zt.id)===null||ft===void 0)&&ft.match(Dt)&&this.dataSource.entities.remove(Zt),Zt.id===Dt+"_multi0"&&this.fire("delete-feature",Zt)}.bind(this));return}else this.dataSource.entities.remove(mt);else if(this.primitives.contains(mt))this.primitives.remove(mt);else if(mt instanceof g.PointPrimitive){var Ct=(0,s.default)(ct).call(ct,function(Zt){return(0,h.default)(this,Ft),Zt instanceof g.PointPrimitiveCollection}.bind(this));Ct.remove(mt)}else if(mt instanceof g.Label){var jt=(0,s.default)(ct).call(ct,function(Zt){return(0,h.default)(this,Ft),Zt instanceof g.LabelCollection}.bind(this));jt.remove(mt)}else if(mt instanceof g.Billboard){var zt=(0,s.default)(ct).call(ct,function(Zt){return(0,h.default)(this,Ft),Zt instanceof g.BillboardCollection}.bind(this));zt.remove(mt)}else if(mt instanceof g.Polyline){var Yt=(0,s.default)(ct).call(ct,function(Zt){return(0,h.default)(this,Ft),Zt instanceof g.PolylineCollection}.bind(this));Yt.remove(mt)}this.fire("delete-feature",mt)}},isMyEntity:function(mt){var Ft=this;if(typeof mt=="string")return![];if(mt instanceof g.Entity&&this.dataSource.entities.contains(mt))return!![];if(this.primitives.contains(mt))return!![];var ct=this.primitives._primitives;if(mt instanceof g.PointPrimitive){var vt=(0,s.default)(ct).call(ct,function(Yt){return(0,h.default)(this,Ft),Yt instanceof g.PointPrimitiveCollection}.bind(this));return vt?.contains(mt)}else if(mt instanceof g.Label){var Dt=(0,s.default)(ct).call(ct,function(Yt){return(0,h.default)(this,Ft),Yt instanceof g.LabelCollection}.bind(this));return Dt?.contains(mt)}else if(mt instanceof g.Billboard){var Ct=(0,s.default)(ct).call(ct,function(Yt){return(0,h.default)(this,Ft),Yt instanceof g.BillboardCollection}.bind(this));return Ct?.contains(mt)}else if(mt instanceof g.Polyline){var jt=(0,s.default)(ct).call(ct,function(Yt){return(0,h.default)(this,Ft),Yt instanceof g.PolylineCollection}.bind(this));return jt?.contains(mt)}else if(mt instanceof g.CumulusCloud){var zt=(0,s.default)(ct).call(ct,function(Yt){return(0,h.default)(this,Ft),Yt instanceof g.CloudCollection}.bind(this));return zt?.contains(mt)}return![]},deleteAll:function(){this.clearDraw();var mt=this.collection.id;this.viewer.shine.removeLayer({id:mt})},toGeoJSON:function(mt){if(this.stopDraw(),mt==null){var Ft=this.getEntitys();if(Ft.length===0)return null;for(var ct=[],vt=0,Dt=Ft.length;vt<Dt;vt++){var Ct=Ft[vt];if(!(Ct.attribute==null||Ct.attribute.drawtype==null)){Ct.attribute.attr.layerId=Ct.entityCollection.owner.name;var jt=Ct.attribute.drawtype,zt=this.drawCtrl[jt].toGeoJSON(Ct);zt!=null&&(zt=w.removeGeoJsonDefVal(zt),ct.push(zt))}}return ct.length>0?{type:"FeatureCollection",features:ct}:null}else{var Yt=mt.attribute.drawtype,Zt=this.drawCtrl[Yt].toGeoJSON(mt);return Zt=w.removeGeoJsonDefVal(Zt),Zt}},toGeoJSONEx:function(mt){if(g.defined(mt)){var Ft=[];if(mt.position){var ct=this.drawCtrl.point.toGeoJSON(mt);Ft.push(ct)}if(mt.polyline){var vt=this.drawCtrl.polyline.toGeoJSON(mt);Ft.push(vt)}if(mt.polygon){var Dt=this.drawCtrl.polygon.toGeoJSON(mt);Ft.push(Dt)}if(mt.rectangle){var Ct=this.drawCtrl.rectangle.toGeoJSON(mt);Ft.push(Ct)}if(mt.ellipsoid){var jt=this.drawCtrl.ellipsoid.toGeoJSON(mt);Ft.push(jt)}if(mt.wall){var zt=this.drawCtrl.wall.toGeoJSON(mt);Ft.push(zt)}if(mt.circle){var Yt=this.drawCtrl.ellipse.toGeoJSON(mt);Ft.push(Yt)}if(Ft.length>1)return{type:"FeatureCollection",features:Ft};if(Ft.length===1)return Ft[0]}},loadJson:function(mt,Ft){var ct=this,vt=Ft.isClear,Dt=Ft.isFlash,Ct=Ft.layerId;Ct&&this.setEditLayer(Ct,![]);try{p.isString(mt)&&(mt=JSON.parse(mt))}catch(ot){p.alert(ot.name+": "+ot.message+` 
\u8BF7\u786E\u8BA4json\u6587\u4EF6\u683C\u5F0F\u6B63\u786E!!!`);return}var jt=mt;vt&&this.clearDraw();var zt=[],Yt;jt.type!=="FeatureCollection"&&(Yt=jt.properties);var Zt=(0,nt.getFeaturesFromGeoJson)(jt,{featureProjection:"EPSG:4326"});Yt&&Zt[0].setProperties(Yt);var ft=(0,u.default)(this.drawCtrl)[0].mode,gt;Zt.length>5e3&&(gt=!![],this.changeMode("primitive"));var dt=this;(function ot(it){for(var yt=function(){var Kt,Jt=it[Ot];if(Jt.getGeometry().getType()==="MultiPolygon"){var te,ie=[];te=Jt.getGeometry().getPolygons();for(var oe=0;oe<te.length;oe++){var he=te[oe],ne=Jt.clone();ne.setGeometry(he),ne.set("brotherId","_multi"+oe),ie.push(ne)}return ot(ie),{v:void 0}}if(!Jt.getProperties().drawtype)switch(Jt.getGeometry().getType()){case"Polygon":Jt.set("drawtype","polygon");break;case"MultiLineString":case"LineString":Jt.set("drawtype","polyline");break;case"MultiPoint":case"Point":Jt.set("drawtype","point");break}var ce=Jt.getProperties().drawtype;if(dt.drawCtrl[ce]==null)return M.error("\u6570\u636E\u65E0\u6CD5\u8BC6\u522B\u6216\u8005\u6570\u636E\u7684["+ce+"]\u7C7B\u578B\u53C2\u6570\u6709\u8BEF"),"continue";Jt.set("style",g.defaultValue(Jt.getProperties().style,{}));var ge=((Kt=Jt.getProperties().attr)===null||Kt===void 0?void 0:Kt.id)||g.createGuid();if(Jt.getProperties().brotherId&&(ge=ge.replace("_multi0",""),ge+=Jt.getProperties().brotherId),Jt.set("attr",Pt(Pt({},Jt.getProperties().attr||{}),{},{id:ge})),Jt.setProperties(w.addGeoJsonDefVal(Jt.getProperties())),gt&&dt.drawCtrl[ce].loadJson){var Ae=(0,nt.getGeoJsonFromFeatures)([Jt]);Ae=JSON.parse(Ae).features;var It=dt.drawCtrl[ce].loadJson(Ae);return It.attribute={drawtype:ce,attr:Ae[0].properties.attr,style:Ae[0].properties.style},dt.setGeojsonFeatureId(_t),{v:It}}var Wt=(0,nt.getGeoJsonFromFeatures)([Jt]);Wt=JSON.parse(Wt).features[0];var _t=dt.drawCtrl[ce].jsonToEntity(Wt);if(dt.setGeojsonFeatureId(_t),dt.setGeojsonFeatureLayerId(_t),dt.bindDeleteContextmenu(_t),dt.options.nameTooltip)if(_t.attribute.attr&&_t.attribute.attr.name){var ee=ee;_t.tooltip={html:_t.attribute.attr.name,check:function(){return!ee._hasEdit}}}else _t.tooltip=null;zt.push(_t)},Ot=0,St=it.length;Ot<St;Ot++){var Gt=yt();if(Gt!=="continue"&&(0,a.default)(Gt)==="object")return Gt.v}})(Zt),Zt.length>5e3&&this.changeMode(ft);var lt=this.viewer.shine.getLayer(Ct,"id");return Dt&&(this.viewer._zoomPromise?this.viewer._zoomPromise.then(function(){(0,h.default)(this,ct),this.flashing(lt)}.bind(this)):this.flashing(lt)),zt},setGeojsonFeatureId:function(mt){if(mt instanceof g.Entity){var Ft=mt.attribute.attr.id;!Ft&&(mt.attribute.attr.id=mt.id)}else mt instanceof g.Primitive&&M.warn("")},setGeojsonFeatureLayerId:function(mt){if(mt instanceof g.Entity){var Ft=mt.attribute.attr.layerId;!Ft&&(mt.attribute.attr.layerId=mt.entityCollection.owner.name)}else mt instanceof g.Primitive&&M.warn("")},attributeToEntity:function(mt,Ft){return this.drawCtrl[mt.drawtype].attributeToEntity(mt,Ft)},bindExtraEntity:function(mt,Ft){mt=this.drawCtrl[Ft.drawtype].attributeToEntity(mt,Ft),this.dataSource.entities.add(mt)},_visible:!![],setVisible:function(mt){this._visible=mt,!mt&&this.stopDraw(),this.dataSource.show=mt,this.primitives.show=mt},flashing:function(mt){var Ft=this,ct=0,vt=this,Dt=this._visible;if(mt){if(mt=this.getCollection(mt)||mt,!(mt instanceof Object))return;this._activateCollection(mt)}else zt=function(ft){(0,h.default)(this,Ft),this.setVisible(ft);for(var gt=this.getCollections(),dt=0;dt<gt.length;dt++){var lt=gt[dt];lt.dataSource.show=ft}}.bind(this);Ct();function Ct(){zt(![]),Yt(jt,100)}function jt(){zt(!![]),ct++,ct<4?Yt(Ct,200):zt(Dt)}function zt(Zt){vt.setVisible(Zt)}function Yt(Zt,ft){var gt=this,dt=vt.viewer.myClock.currentTime.secondsOfDay,lt=function(it){(0,h.default)(this,gt);var yt=it.currentTime.secondsOfDay-dt;yt>=ft*.001&&(vt.viewer.myClock.onTick.removeEventListener(lt),Zt())}.bind(this);vt.viewer.myClock.onTick.addEventListener(lt)}},hasDraw:function(){return this.getEntitys().length>0},getEntitys:function(){var mt=this.collection.getFeatures();return mt},getFeaturesByLayerId:function(mt){var Ft=this.viewer.shine.getLayer(mt,"id"),ct=Ft.getFeatures();return ct},getFeatureById:function(mt,Ft){var ct=this.viewer.shine.getLayer(Ft,"id"),vt=ct.getFeatureById(mt);return vt},deleteFeatureById:function(mt,Ft){var ct=this.viewer.shine.getLayer(Ft,"id");ct.deleteFeatureById(mt)},deleteFeaturesByLayerId:function(mt){var Ft=this.viewer.shine.getLayer(mt,"id");Ft.deleteFeatures()},getDataSource:function(){return this.dataSource},getEntityById:function(mt){for(var Ft=this.getEntitys(),ct=0,vt=Ft.length;ct<vt;ct++){var Dt,Ct,jt=Ft[ct];if(mt===((Dt=jt.attribute)===null||Dt===void 0||(Ct=Dt.attr)===null||Ct===void 0?void 0:Ct.id))return jt}return null},getCoordinates:function(mt){var Ft,ct,vt=mt==null||(Ft=mt.attribute)===null||Ft===void 0?void 0:Ft.drawtype;return(ct=this.drawCtrl[vt])===null||ct===void 0?void 0:ct.getCoordinates(mt)},getPositions:function(mt){var Ft,ct,vt=mt==null||(Ft=mt.attribute)===null||Ft===void 0?void 0:Ft.drawtype;return(ct=this.drawCtrl[vt])===null||ct===void 0?void 0:ct.getPositions(mt)},destroy:function(){this.stopDraw(),this.hasEdit(![]),this.clearDraw();var mt=this.collection.id;this.viewer.shine.removeLayer({id:mt})}});z.Draw=Rt,Rt.Base=O.DrawBase,Rt.Billboard=k.DrawBillboard,Rt.Circle=H.DrawCircle,Rt.Cloud=P.DrawCloud,Rt.Cylinder=V.DrawCylinder,Rt.Corridor=W.DrawCorridor,Rt.Curve=I.DrawCurve,Rt.Ellipsoid=Y.DrawEllipsoid,Rt.Label=L.DrawLabel,Rt.Model=E.DrawModel,Rt.Point=B.DrawPoint,Rt.Polygon=Z.DrawPolygon,Rt.Polyline=N.DrawPolyline,Rt.PolylineVolume=G.DrawPolylineVolume,Rt.Rectangle=U.DrawRectangle,Rt.Wall=$.DrawWall,Rt.Plotting=Q.DrawPlotting,Rt.PModel=K.DrawPModel,Rt.PolygonEx=J.DrawPolygonEx},92118:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.register=z.DrawBase=void 0;var D=T(e(98924)),b=T(e(53267)),C=T(e(52909)),f=T(e(29870)),v=T(e(22777)),m=T(e(42762)),o=T(e(42579)),u=y(e(87647)),l=e(6386),r=e(70317),s=y(e(80823)),c=y(e(36161)),x=y(e(69973)),a=e(41471),i=e(59575),n=e(76477),h=e(39705),g=void 0;function d(k){if(typeof R!="function")return null;var P=new R,L=new R;return(d=function(N){return N?L:P})(k)}function y(k,P){if(!P&&k&&k.__esModule)return k;if(k===null||F(k)!=="object"&&typeof k!="function")return{default:k};var L=d(P);if(L&&L.has(k))return L.get(k);var E={},N=Object.defineProperty&&A;for(var I in k)if(I!=="default"&&Object.prototype.hasOwnProperty.call(k,I)){var G=N?A(k,I):null;G&&(G.get||G.set)?Object.defineProperty(E,I,G):E[I]=k[I]}return E.default=k,L&&L.set(k,E),E}var p={},w=function(P,L){(0,o.default)(this,g),p[P]=L}.bind(void 0);z.register=w;var S=function(){function k(){var P=this,L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:200;(0,v.default)(this,k),this.step=L,this.timer=null,this.callback=function(){(0,o.default)(this,P),M.warn("\u8BF7\u8BBE\u7F6E\u9632\u6296\u7684\u56DE\u8C03\u51FD\u6570")}.bind(this)}return(0,m.default)(k,[{key:"active",value:function(L){var E=this;clearTimeout(this.timer),this.callback=L||this.callback,this.timer=setTimeout(function(){(0,o.default)(this,E),this.callback()}.bind(this),this.step)}}]),k}(),O=new S,B=l.Evented.extend({collection:null,dataSource:null,primitives:null,groundPrimitives:null,drawCtrl:null,initialize:function(P,L){this.drawToolType="DrawAllBase",this.viewer=P,this.id=u.createGuid(),this.options=L||{};var E=this.viewer.shine.getLayer(L.id,"id");!E&&(E=this.viewer.shine.getLayer("temporaryDrawLayer","id")),this.collection=E,this.dataSource=this.collection.dataSource,this.primitives=this.collection.primitiveCollection,this.groundPrimitives=this.collection.groundPrimitiveCollection,this.tooltip=new r.Tooltip(this.viewer.container);var N={viewer:this.viewer,dataSource:this.dataSource,primitives:this.primitives,groundPrimitives:this.groundPrimitives,tooltip:this.tooltip,drawTool:this};this.drawCtrl={},this.drawCtrl.point=new a.DrawPoint(N),this.drawCtrl.polyline=new i.DrawPolyline(N),this.drawCtrl.polygon=new n.DrawPolygon(N);for(var I in p)this.drawCtrl[I]=new p[I](N);u.defaultValue(this.options.removeScreenSpaceEvent,!![])&&(this.viewer.screenSpaceEventHandler.removeInputAction(u.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.viewer.screenSpaceEventHandler.removeInputAction(u.ScreenSpaceEventType.LEFT_CLICK),this.viewer.screenSpaceEventHandler.removeInputAction(u.ScreenSpaceEventType.MOUSE_MOVE));var G=this;for(var W in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,W)&&(this.drawCtrl[W]._fire=function(Z,U,H){G.fire(Z,U,H)});this.on(x.DrawCreated,function(Z){this.startEditing(Z.entity),this.fire("change:active",{active:![]})},this)},setEditLayer:function(P,L){var E=this.viewer.shine.getLayer(P,"id");!E&&(E=this.viewer.shine.getLayer("temporaryDrawLayer","id")),this.collection=E,this.dataSource=this.collection.dataSource,this.primitives=this.collection.primitiveCollection,this.groundPrimitives=this.collection.groundPrimitiveCollection,this.drawCtrl.point.setLayer(this.collection),this.drawCtrl.polyline.setLayer(this.collection),this.drawCtrl.polygon.setLayer(this.collection);for(var N in p)this.drawCtrl[N].setLayer(this.collection);this.hasEdit(u.defaultValue(L,this._hasEdit))},_activateCollection:function(P){this.dataSource=P.dataSource;for(var L in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,L)&&(this.drawCtrl[L].dataSource=this.dataSource)},_resetCollection:function(){for(var P in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,P)&&(this.drawCtrl[P].dataSource=this.dataSource)},changeMode:function(P){P==null&&(P=(0,D.default)(this.drawCtrl)[0].mode,P=P==="entity"?"primitive":"entity"),P=P==="entity"?"entity":"primitive";for(var L in this.drawCtrl)if(Object.prototype.hasOwnProperty.call(this.drawCtrl,L)){var E=this.drawCtrl[L];E.mode=P}return P},startDraw:function(P){if(typeof P=="string")P={drawtype:P};else if(P==null||P.drawtype==null){M.error("\u9700\u8981\u4F20\u5165\u6307\u5B9A\u7ED8\u5236\u7684type\u7C7B\u578B\uFF01");return}var L=P.drawtype;if(this.drawCtrl[L]==null){M.error("\u4E0D\u80FD\u8FDB\u884Ctype\u4E3A\u3010"+L+"\u3011\u7684\u7ED8\u5236\uFF0C\u65E0\u8BE5\u7C7B\u578B\uFF01");return}var E;P.success&&(E=P.success,delete P.success),P=c.addGeoJsonDefVal(P),this.stopDraw();var N=this.drawCtrl[L].activate(P,E);return this.bindDeleteContextmenu(N),this.fire("change:active",{active:!![],drawtype:P.edittype}),N},endDraw:function(){for(var P in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,P)&&this.drawCtrl[P].endDraw&&this.drawCtrl[P].endDraw();return this},stopDraw:function(){this.stopEditing();for(var P in this.drawCtrl)Object.prototype.hasOwnProperty.call(this.drawCtrl,P)&&this.drawCtrl[P].disable(!![]);return this.fire("change:active",{active:![]}),this},clearDraw:function(){return this.stopDraw(),this.collection.deleteFeatures(),this},currEditFeature:null,getCurrentEntity:function(){return this.currEditFeature},_hasEdit:![],hasEdit:function(P){if(!(this._hasEdit!==null&&this._hasEdit===P))if(this._hasEdit=P,P)this.bindSelectEvent();else{var L,E;(L=this.currEditFeature)!==null&&L!==void 0&&(E=L.editing)!==null&&E!==void 0&&E.disable&&this.stopEditing(),this.destroySelectEvent()}},bindSelectEvent:function(){var P=this,L=new u.ScreenSpaceEventHandler(this.viewer.scene.canvas);L.setInputAction(function(E){var N,I=P.viewer.scene.drillPick(E.position);if(I.length){for(var G=0;G<I.length;G++)if(N=I[G],u.defined(N)){var W=N.id||N.primitive.id||N.primitive;if(W&&P.isMyEntity(W)){if(P.currEditFeature&&P.currEditFeature===W)return;if(!u.defaultValue(W.inProgress,![])){W&&W.attribute&&W.attribute.kzedit?P.stopEditing():(P.startEditing(W),setTimeout(function(){P.tooltip.showAt(E.endPosition,r.message.edit.start)},100));return}}}}P.stopEditing()},u.ScreenSpaceEventType.LEFT_CLICK),L.setInputAction(function(E){var N=this;P._hasEdit&&((0,b.default)(P.dataSource.entities).length===0&&P.primitives._primitives.length===0||(P.tooltip._div.style.display!=="none"&&P.tooltip.setVisible(![]),O.active(function(){(0,o.default)(this,N);var I,G=P.viewer.scene.drillPick(E.endPosition);if(G.length)for(var W=function(){if(I=G[Z],u.defined(I)){var V=I.id||I.primitive.id||I.primitive;if(V&&P.isMyEntity(V)){if(P.currEditFeature&&P.currEditFeature===V)return{v:void 0};if(!u.defaultValue(V.inProgress,![])){var Y=P.tooltip,$=r.message.edit.start;V._isDragger&&($=V.draw_tooltip),V&&V.attribute&&V.attribute.kzedit&&($=r.message.del.end),setTimeout(function(){Y.showAt(E.endPosition,$)},100)}return{v:void 0}}}},Z=0;Z<G.length;Z++){var U=W();if((0,f.default)(U)==="object")return U.v}}.bind(this))))},u.ScreenSpaceEventType.MOUSE_MOVE),L.setInputAction(function(E){if(P._hasEdit){P.tooltip.setVisible(![]);var N,I=P.viewer.scene.drillPick(E.position);if(I.length)for(var G=function(){if(N=I[W],u.defined(N)){var H=N.id||N.primitive.id||N.primitive;if(H&&P.isMyEntity(H))return P.currEditFeature&&P.currEditFeature===H?{v:void 0}:(!u.defaultValue(H.inProgress,![])&&(H&&H.editing&&H._isDragger&&H.movepoint&&(P.deleteEntity(H),P.viewer.shine.popup.close()),H&&H.editing&&!u.defaultValue(H.inProgress,![])&&P.isMyEntity(H)&&setTimeout(function(){if(P.deleteEntity(H),P.options.calbackdel&&P.options.calbackdel(H),H._exline&&P.dataSource.entities.remove(H._exline),H._arrLables)for(var V=0;V<H._arrLables.length;V++)H._arrLables[V].show=![];H._totalLable&&(H._totalLable.show=![])},100)),{v:void 0})}},W=0;W<I.length;W++){var Z=G();if((0,f.default)(Z)==="object")return Z.v}}},u.ScreenSpaceEventType.RIGHT_CLICK),this.selectHandler=L},destroySelectEvent:function(){this.selectHandler&&this.selectHandler.destroy(),this.selectHandler=void 0},startEditing:function(P){this.stopEditing(),!(P==null||!this._hasEdit)&&(P.editing&&P.editing.activate&&P.editing.activate(),this.currEditFeature=P)},stopEditing:function(){var P,L;(P=this.currEditFeature)!==null&&P!==void 0&&(L=P.editing)!==null&&L!==void 0&&L.disable&&this.currEditFeature.editing.disable(),this.currEditFeature=null},updateAttribute:function(P,L){if(L==null&&(L=this.currEditFeature),!(L==null||P==null)){P.style=P.style||{},P.attr=P.attr||{};var E=L.attribute.drawtype;if(this.drawCtrl[E].style2Entity(P.style,L),L.attribute=P,this.drawCtrl[E].bindOutline&&this.drawCtrl[E].bindOutline(L),L.editing&&(L.editing.updateAttrForEditing&&L.editing.updateAttrForEditing(),L.editing.updateDraggers&&L.editing.updateDraggers()),this.options.nameTooltip){var N=this;L.attribute.attr&&L.attribute.attr.name?L.tooltip={html:L.attribute.attr.name,check:function(){return!N._hasEdit}}:L.tooltip=null}return L}},setCoordinates:function(P,L){return P=c.lonlats2cartesians(P),this.setPositions(P,L)},setPositions:function(P,L){if(L==null&&(L=this.currEditFeature),!(L==null||P==null))return L.editing&&(L.editing.setPositions(P),L.editing.updateDraggers()),L},bindDeleteContextmenu:function(P){var L=this;P.contextmenuItems=P.contextmenuItems||[],P.contextmenuItems.push({text:"\u5220\u9664\u5BF9\u8C61",iconCls:"fa fa-trash-o",visible:function(){return L._hasEdit},calback:function(N){var I=N.target;I.editing&&I.editing.disable&&I.editing.disable(),L.deleteEntity(I)}})},deleteEntity:function(P){var L=this;if(P=P||this.currEditFeature,P!=null){this.fire("delete-feature",P),P.editing&&P.editing.disable();var E=this.primitives._primitives;if(P instanceof u.Entity)this.dataSource.entities.remove(P);else if(this.primitives.contains(P))this.primitives.remove(P);else if(P instanceof u.PointPrimitive){var N=(0,C.default)(E).call(E,function(Z){return(0,o.default)(this,L),Z instanceof u.PointPrimitiveCollection}.bind(this));N.remove(P)}else if(P instanceof u.Label){var I=(0,C.default)(E).call(E,function(Z){return(0,o.default)(this,L),Z instanceof u.LabelCollection}.bind(this));I.remove(P)}else if(P instanceof u.Billboard){var G=(0,C.default)(E).call(E,function(Z){return(0,o.default)(this,L),Z instanceof u.BillboardCollection}.bind(this));G.remove(P)}else if(P instanceof u.Polyline){var W=(0,C.default)(E).call(E,function(Z){return(0,o.default)(this,L),Z instanceof u.PolylineCollection}.bind(this));W.remove(P)}}},isMyEntity:function(P){var L=this;if(typeof P=="string")return![];if(P instanceof u.Entity&&this.dataSource.entities.contains(P))return!![];if(this.primitives.contains(P))return!![];var E=this.primitives._primitives;if(P instanceof u.PointPrimitive){var N=(0,C.default)(E).call(E,function(U){return(0,o.default)(this,L),U instanceof u.PointPrimitiveCollection}.bind(this));return N?.contains(P)}else if(P instanceof u.Label){var I=(0,C.default)(E).call(E,function(U){return(0,o.default)(this,L),U instanceof u.LabelCollection}.bind(this));return I?.contains(P)}else if(P instanceof u.Billboard){var G=(0,C.default)(E).call(E,function(U){return(0,o.default)(this,L),U instanceof u.BillboardCollection}.bind(this));return G?.contains(P)}else if(P instanceof u.Polyline){var W=(0,C.default)(E).call(E,function(U){return(0,o.default)(this,L),U instanceof u.PolylineCollection}.bind(this));return W?.contains(P)}else if(P instanceof u.CumulusCloud){var Z=(0,C.default)(E).call(E,function(U){return(0,o.default)(this,L),U instanceof u.CloudCollection}.bind(this));return Z?.contains(P)}return![]},deleteAll:function(){this.clearDraw();var P=this.collection.id;this.viewer.shine.removeLayer({id:P})},toGeoJSON:function(P){if(this.stopDraw(),P==null){var L=this.getEntitys();if(L.length===0)return null;for(var E=[],N=0,I=L.length;N<I;N++){var G=L[N];if(!(G.attribute==null||G.attribute.drawtype==null)){G.attribute.attr.layerId=G.entityCollection.owner.name;var W=G.attribute.drawtype,Z=this.drawCtrl[W].toGeoJSON(G);Z!=null&&(Z=c.removeGeoJsonDefVal(Z),E.push(Z))}}return E.length>0?{type:"FeatureCollection",features:E}:null}else{var U=P.attribute.drawtype,H=this.drawCtrl[U].toGeoJSON(P);return H=c.removeGeoJsonDefVal(H),H}},toGeoJSONEx:function(P){if(u.defined(P)){var L=[];if(P.position){var E=this.drawCtrl.point.toGeoJSON(P);L.push(E)}if(P.polyline){var N=this.drawCtrl.polyline.toGeoJSON(P);L.push(N)}if(P.polygon){var I=this.drawCtrl.polygon.toGeoJSON(P);L.push(I)}if(P.rectangle){var G=this.drawCtrl.rectangle.toGeoJSON(P);L.push(G)}if(P.ellipsoid){var W=this.drawCtrl.ellipsoid.toGeoJSON(P);L.push(W)}if(P.wall){var Z=this.drawCtrl.wall.toGeoJSON(P);L.push(Z)}if(P.circle){var U=this.drawCtrl.ellipse.toGeoJSON(P);L.push(U)}if(L.length>1)return{type:"FeatureCollection",features:L};if(L.length===1)return L[0]}},loadJson:function(P,L){var E=this,N=L.isClear,I=L.isFly,G=L.isFlash,W=L.layerId;W&&this.setEditLayer(W,![]);try{s.isString(P)&&(P=JSON.parse(P))}catch(et){s.alert(et.name+": "+et.message+` 
\u8BF7\u786E\u8BA4json\u6587\u4EF6\u683C\u5F0F\u6B63\u786E!!!`);return}var Z=P;N&&this.clearDraw();var U=[],H;Z.type!=="FeatureCollection"&&(H=Z.properties);var V=(0,h.getFeaturesFromGeoJson)(Z,{featureProjection:"EPSG:4326"});H&&V[0].setProperties(H);var Y=(0,D.default)(this.drawCtrl)[0].mode,$;V.length>5e3&&($=!![],this.changeMode("primitive"));var K=this,J;(function et(nt){for(var st=function(){var wt=this,At=nt[ut];if(!At.getProperties().drawtype){var Nt,Lt=[];switch(At.getGeometry().getType()){case"MultiPolygon":Nt=At.getGeometry().getPolygons();for(var Rt=0;Rt<Nt.length;Rt++){var Tt=Nt[Rt],mt=At.clone();mt.setGeometry(Tt),Lt.push(mt)}return et(Lt),{v:void 0};case"Polygon":At.set("drawtype","polygon");break;case"MultiLineString":case"LineString":At.set("drawtype","polyline");break;case"MultiPoint":case"Point":At.set("drawtype","point");break}}var Ft=At.getProperties().drawtype;if(K.drawCtrl[Ft]==null)return M.error("\u6570\u636E\u65E0\u6CD5\u8BC6\u522B\u6216\u8005\u6570\u636E\u7684["+Ft+"]\u7C7B\u578B\u53C2\u6570\u6709\u8BEF"),"continue";if(At.set("style",u.defaultValue(At.getProperties().style,{})),At.set("attr",At.getProperties().attr||{}),At.setProperties(c.addGeoJsonDefVal(At.getProperties())),$&&K.drawCtrl[Ft].loadJson){var ct=(0,h.getGeoJsonFromFeatures)([At]);ct=JSON.parse(ct).features;var vt=K.drawCtrl[Ft].loadJson(ct);return vt.attribute={drawtype:Ft,attr:ct[0].properties.attr,style:ct[0].properties.style},K.setGeojsonFeatureId(Ct),I&&vt.readyPromise.then(function(zt){(0,o.default)(this,wt),zt._boundingSpheres[0]&&K.viewer.scene.camera.flyToBoundingSphere(zt._boundingSpheres[0])}.bind(this)),{v:vt}}var Dt=(0,h.getGeoJsonFromFeatures)([At]);J=At.getProperties().style.clampToGround,Dt=JSON.parse(Dt).features[0];var Ct=K.drawCtrl[Ft].jsonToEntity(Dt);if(K.setGeojsonFeatureId(Ct),K.setGeojsonFeatureLayerId(Ct),K.bindDeleteContextmenu(Ct),K.options.nameTooltip)if(Ct.attribute.attr&&Ct.attribute.attr.name){var jt=jt;Ct.tooltip={html:Ct.attribute.attr.name,check:function(){return!jt._hasEdit}}}else Ct.tooltip=null;U.push(Ct)},ut=0,rt=nt.length;ut<rt;ut++){var ht=st();if(ht!=="continue"&&(0,f.default)(ht)==="object")return ht.v}})(V),V.length>5e3&&this.changeMode(Y),I&&(J?this.viewer.flyTo(U,{offset:new u.HeadingPitchRange(0,u.Math.toRadians(-90),0)}):this.viewer.flyTo(U));var Q=this.viewer.shine.getLayer(W,"id");return G&&(this.viewer._zoomPromise?this.viewer._zoomPromise.then(function(){(0,o.default)(this,E),this.flashing(Q)}.bind(this)):this.flashing(Q)),U},setGeojsonFeatureId:function(P){if(P instanceof u.Entity){var L=P.attribute.attr.id;!L&&(P.attribute.attr.id=P.id)}else P instanceof u.Primitive&&M.warn("")},setGeojsonFeatureLayerId:function(P){if(P instanceof u.Entity){var L=P.attribute.attr.layerId;!L&&(P.attribute.attr.layerId=P.entityCollection.owner.name)}else P instanceof u.Primitive&&M.warn("")},attributeToEntity:function(P,L){return this.drawCtrl[P.drawtype].attributeToEntity(P,L)},bindExtraEntity:function(P,L){P=this.drawCtrl[L.drawtype].attributeToEntity(P,L),this.dataSource.entities.add(P)},_visible:!![],setVisible:function(P){this._visible=P,!P&&this.stopDraw(),this.dataSource.show=P,this.primitives.show=P},flashing:function(P){var L=this,E=0,N=this,I=this._visible;if(P){if(P=this.getCollection(P)||P,!(P instanceof Object))return;this._activateCollection(P)}else Z=function(V){(0,o.default)(this,L),this.setVisible(V);for(var Y=this.getCollections(),$=0;$<Y.length;$++){var K=Y[$];K.dataSource.show=V}}.bind(this);G();function G(){Z(![]),U(W,100)}function W(){Z(!![]),E++,E<4?U(G,200):Z(I)}function Z(H){N.setVisible(H)}function U(H,V){var Y=this,$=N.viewer.myClock.currentTime.secondsOfDay,K=function(Q){(0,o.default)(this,Y);var et=Q.currentTime.secondsOfDay-$;et>=V*.001&&(N.viewer.myClock.onTick.removeEventListener(K),H())}.bind(this);N.viewer.myClock.onTick.addEventListener(K)}},hasDraw:function(){return this.getEntitys().length>0},getEntitys:function(){this.stopDraw();var P=this.collection.getFeatures();return P},getFeaturesByLayerId:function(P){var L=this.viewer.shine.getLayer(P,"id"),E=L.getFeatures();return E},getFeatureById:function(P,L){var E=this.viewer.shine.getLayer(L,"id"),N=E.getFeatureById(P);return N},deleteFeatureById:function(P,L){var E=this.viewer.shine.getLayer(L,"id");E.deleteFeatureById(P)},deleteFeaturesByLayerId:function(P){var L=this.viewer.shine.getLayer(P,"id");L.deleteFeatures()},getDataSource:function(){return this.dataSource},getEntityById:function(P){for(var L=this.getEntitys(),E=0,N=L.length;E<N;E++){var I,G,W=L[E];if(P===((I=W.attribute)===null||I===void 0||(G=I.attr)===null||G===void 0?void 0:G.id))return W}return null},getCoordinates:function(P){var L,E,N=P==null||(L=P.attribute)===null||L===void 0?void 0:L.drawtype;return(E=this.drawCtrl[N])===null||E===void 0?void 0:E.getCoordinates(P)},getPositions:function(P){var L,E,N=P==null||(L=P.attribute)===null||L===void 0?void 0:L.drawtype;return(E=this.drawCtrl[N])===null||E===void 0?void 0:E.getPositions(P)},destroy:function(){this.stopDraw(),this.hasEdit(![]),this.clearDraw();var P=this.collection.id;this.viewer.shine.removeLayer({id:P})}});z.DrawBase=B,B.Point=a.DrawPoint,B.Polyline=i.DrawPolyline,B.Polygon=n.DrawPolygon},4997:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawBase=void 0;var T=m(e(87647)),D=e(79651),b=m(e(36161)),C=m(e(69973)),f=e(70317);function v(u){if(typeof R!="function")return null;var l=new R,r=new R;return(v=function(c){return c?r:l})(u)}function m(u,l){if(!l&&u&&u.__esModule)return u;if(u===null||F(u)!=="object"&&typeof u!="function")return{default:u};var r=v(l);if(r&&r.has(u))return r.get(u);var s={},c=Object.defineProperty&&A;for(var x in u)if(x!=="default"&&Object.prototype.hasOwnProperty.call(u,x)){var a=c?A(u,x):null;a&&(a.get||a.set)?Object.defineProperty(s,x,a):s[x]=u[x]}return s.default=u,r&&r.set(u,s),s}var o=D.Class.extend({type:null,dataSource:null,initialize:function(l){this.drawTool=l.drawTool,this.viewer=l.viewer,this.dataSource=l.dataSource,this.primitives=l.primitives,this.groundPrimitives=l.groundPrimitives,this.tooltip=l.tooltip||new f.Tooltip(this.viewer.container)},setLayer:function(l){this.dataSource=l.dataSource,this.primitives=l.primitiveCollection,this.groundPrimitives=l.groundPrimitiveCollection},fire:function(l,r,s){this._fire&&this._fire(l,r,s)},formatNum:function(l,r){return b.formatNum(l,r)},activate:function(l,r){if(this._enabled)return this;this._enabled=!![],this.drawOkCalback=r;var s=this.createFeature(l);return this.setFeatureId(s),this.setFeatureLayerId(s),this.entity.inProgress=!![],this.setCursor(!![]),this.bindEvent(),this.fire(C.DrawStart,{drawtype:this.type,entity:this.entity}),this.entity},disable:function(l){return this._enabled?(this._enabled=![],this.setCursor(![]),l&&this.entity.inProgress?(this.dataSource&&this.dataSource.entities.contains(this.entity)&&this.dataSource.entities.remove(this.entity),this.primitives&&this.primitives.contains(this.entity)&&this.primitives.remove(this.entity)):(this.entity.inProgress=![],this.finish(),this.drawOkCalback&&(this.drawOkCalback(this.entity),delete this.drawOkCalback),this.fire(C.DrawCreated,{drawtype:this.type,entity:this.entity,geojson:this.toGeoJSON(this.entity)})),this.destroyHandler(),this._positions_draw=null,this.entity=null,this.tooltip.setVisible(![]),this):this},createFeature:function(){},getHandler:function(){return(!this.handler||this.handler.isDestroyed())&&(this.handler=new T.ScreenSpaceEventHandler(this.viewer.scene.canvas)),this.handler},destroyHandler:function(){this.handler&&this.handler.destroy(),this.handler=void 0},setCursor:function(l){this.viewer._container.style.cursor=l?"crosshair":""},bindEvent:function(){},_positions_draw:null,getDrawPosition:function(){return this._positions_draw},editClass:null,getEditClass:function(l){if(l.isDrawEntity=!![],this.editClass==null)return null;var r=new this.editClass({entity:l,viewer:this.viewer,dataSource:this.dataSource});return this._minPointNum!=null&&(r._minPointNum=this._minPointNum),this._maxPointNum!=null&&(r._maxPointNum=this._maxPointNum),r._fire=this._fire,r.tooltip=this.tooltip,r.type=this.type,r.toGeoJSON=this.attrClass.toGeoJSON,r},updateAttrForDrawing:function(){},finish:function(){},attrClass:null,getCoordinates:function(l){return this.attrClass.getCoordinates(l)},getPositions:function(l){return this.attrClass.getPositions(l)},toGeoJSON:function(l){return this.attrClass.toGeoJSON(l)},attributeToEntity:function(l,r){var s=this.createFeature(l);return this._positions_draw=r,this.updateAttrForDrawing(!![]),this.finish(),s},jsonToEntity:function(l){var r=l.properties,s=b.getPositionByGeoJSON(l);return this.attributeToEntity(r,s)},setFeatureId:function(l){if(l instanceof T.Entity){var r=l.attribute.attr.id;!r&&(l.attribute.attr.id=l.id)}else l instanceof T.Primitive&&M.warn("")},setFeatureLayerId:function(l){if(l instanceof T.Entity){var r=l.attribute.attr.layerId;!r&&(l.attribute.attr.layerId=l.entityCollection.owner.name)}else l instanceof T.Primitive&&M.warn("")},bindExtraEntity:function(l,r){return r&&r.style&&this.style2Entity(r.style,l),this._positions_draw=this.getPositions(l),this.updateAttrForDrawing(!![]),this.finish(),l}});z.DrawBase=o},37583:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawBillboard=void 0;var D=T(e(52909)),b=T(e(85208)),C=T(e(42579)),f=T(e(22777)),v=T(e(42762)),m=T(e(30044)),o=T(e(99085)),u=T(e(34009)),l=a(e(87647)),r=a(e(80790)),s=a(e(21617)),c=e(41471);function x(d){if(typeof R!="function")return null;var y=new R,p=new R;return(x=function(S){return S?p:y})(d)}function a(d,y){if(!y&&d&&d.__esModule)return d;if(d===null||M(d)!=="object"&&typeof d!="function")return{default:d};var p=x(y);if(p&&p.has(d))return p.get(d);var w={},S=Object.defineProperty&&A;for(var O in d)if(O!=="default"&&Object.prototype.hasOwnProperty.call(d,O)){var B=S?A(d,O):null;B&&(B.get||B.set)?Object.defineProperty(w,O,B):w[O]=d[O]}return w.default=d,p&&p.set(d,w),w}function i(d){var y=n();return function(){var w=(0,u.default)(d),S;if(y){var O=(0,u.default)(this).constructor;S=F(w,arguments,O)}else S=w.apply(this,arguments);return(0,o.default)(this,S)}}function n(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}function h(d,y,p,w){Object.defineProperty(d,y,{enumerable:!![],configurable:!![],get:function(){return p},set:function(O){y in w&&(w[y]=O,p=O)}})}var g=function(d){(0,m.default)(p,d);var y=i(p);function p(w){var S;return(0,f.default)(this,p),w=w||{},S=y.call(this,w),S.type="billboard",S.attrClass=r,S}return(0,v.default)(p,[{key:"createFeature",value:function(S){var O=this;if(this.mode==="primitive"){var B=this.primitives._primitives,k=(0,D.default)(B).call(B,function(N){return(0,C.default)(this,O),N instanceof l.BillboardCollection}.bind(this));k=k||this.primitives.add(new l.BillboardCollection);var P=k.add(r.style2Entity(S.style));return P.attribute=S,P.billboard=r.style2Entity(S.style),(0,b.default)(P.billboard).forEach(function(N){(0,C.default)(this,O),Object.hasOwnProperty.call(P.billboard,N)&&h(P.billboard,N,P.billboard[N],P)}.bind(this)),this.entity=P,P}else{this._positions_draw=null;var L=this,E={show:![],position:new l.CallbackProperty(function(){return L.getDrawPosition()},![]),attribute:S};return S.style&&S.style.label&&(E.label=s.style2Entity(S.style.label)),this.entity=this.dataSource.entities.add(E),this.entity.billboard=r.style2Entity(S.style,this.entity.billboard,this.viewer,this.entity),this.entity.billboard.isTrueGraphic=!![],this.updateAttrForDrawing(),this.entity}}},{key:"style2Entity",value:function(S,O){return this.updateImg(S,O),S&&S.label&&s.style2Entity(S.label,O.label),r.style2Entity(S,O.billboard,this.viewer,O)}},{key:"updateAttrForDrawing",value:function(){this.updateImg(this.entity.attribute.style,this.entity)}},{key:"updateImg",value:function(){}}]),p}(c.DrawPoint);z.DrawBillboard=g},52273:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCircle=void 0;var D=T(e(53267)),b=T(e(22777)),C=T(e(42762)),f=T(e(30044)),v=T(e(99085)),m=T(e(34009)),o=c(e(87647)),u=c(e(76111)),l=e(59575),r=e(43889);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,m.default)(n),y;if(h){var p=(0,m.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,v.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,f.default)(g,n);var h=x(g);function g(d){var y;return(0,b.default)(this,g),d=d||{},y=h.call(this,d),y.type="ellipse",y._minPointNum=2,y._maxPointNum=2,y.editClass=r.EditCircle,y.attrClass=u,y}return(0,C.default)(g,[{key:"getShowPosition",value:function(){return this._positions_draw&&this._positions_draw.length>1?this._positions_draw[0]:null}},{key:"createFeature",value:function(y){this._positions_draw=[],this.type=y.drawtype,y.drawtype==="ellipse"?this._maxPointNum=3:this._maxPointNum=2;var p=this,w={position:new o.CallbackProperty(function(S){return p.getShowPosition(S)},![]),ellipse:u.style2Entity(y.style),attribute:y};return w.polyline={clampToGround:y.style.clampToGround,show:![]},this.entity=this.dataSource.entities.add(w),this.entity.mark311=this.drawTool.id,y.style.fillType=="zoomCircle"&&(this.entity.ellipse=u.style2Entity(y.style,null,this.entity)),this.bindOutline(this.entity),this.entity}},{key:"bindOutline",value:function(y){y.polyline.show=new o.CallbackProperty(function(p){return y.ellipse.outline&&y.ellipse.outline.getValue(p)&&y.ellipse.outlineWidth&&y.ellipse.outlineWidth.getValue(p)>1},![]),y.polyline.width=new o.CallbackProperty(function(p){return y.ellipse.outlineWidth&&y.ellipse.outlineWidth.getValue(p)},![]),y.polyline.clampToGround=new o.CallbackProperty(function(){return y.attribute.style.clampToGround},![]),y.polyline.zIndex=new o.CallbackProperty(function(){return y.ellipse.zIndex&&y.ellipse.zIndex.getValue()},![]),y.polyline.material=new o.ColorMaterialProperty(new o.CallbackProperty(function(p){return y.ellipse.outlineColor.getValue(p)||o.Color.WHITE},![])),y.polyline.positions=new o.CallbackProperty(function(){var p,w,S,O,B;if(p=y.position.getValue(),w=y.ellipse.semiMajorAxis&&y.ellipse.semiMajorAxis.getValue(),S=y.ellipse.semiMinorAxis&&y.ellipse.semiMinorAxis.getValue(),O=y.ellipse.height&&y.ellipse.height.getValue(),B=y.ellipse.rotation&&y.ellipse.rotation.getValue(),!(!p||!w||!S)){for(var k=new o.EllipseOutlineGeometry({center:p,semiMajorAxis:w,semiMinorAxis:S,height:O,rotation:B}),P=o.EllipseOutlineGeometry.createGeometry(k),L=[],E=P.indices.length/2,N=(0,D.default)(P.attributes.position),I=0;I<E;I++){var G={x:N[3*I],y:N[3*I+1],z:N[3*I+2]};L[I]=G}return L.push(L[0]),L}},![])}},{key:"style2Entity",value:function(y,p){if(y.clampToGround===![]){var w,S;p.position=(w=p.position)===null||w===void 0||(S=w.getValue)===null||S===void 0?void 0:S.call(w)}return u.style2Entity(y,p.ellipse,p)}},{key:"updateAttrForDrawing",value:function(y){if(this._positions_draw){if(y){this.addPositionsForRadius(this._positions_draw);return}if(!(this._positions_draw.length<2)){var p=this.entity.attribute.style;if(!p.clampToGround){var w=this.formatNum(o.Cartographic.fromCartesian(this._positions_draw[0]).height,2);this.entity.ellipse.height=w,p.height=w,p.extrudedHeight&&(this.entity.ellipse.extrudedHeight=w+Number(p.extrudedHeight))}var S=this.formatNum(o.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);if(this.entity.ellipse.semiMinorAxis=S,this._maxPointNum===3){var O;this._positions_draw.length===3?O=this.formatNum(o.Cartesian3.distance(this._positions_draw[0],this._positions_draw[2]),2):O=S,this.entity.ellipse.semiMajorAxis=Math.max(S,O),p.semiMajorAxis=Math.max(S,O),p.semiMinorAxis=Math.min(S,O)}else this.entity.ellipse.semiMajorAxis=S,p.radius=S}}}},{key:"addPositionsForRadius",value:function(y){this._positions_draw=[y];var p=this.entity.attribute.style,w=o.EllipseGeometryLibrary.computeEllipsePositions({center:y,semiMajorAxis:this.entity.ellipse.semiMajorAxis.getValue(this.viewer.clock.currentTime),semiMinorAxis:this.entity.ellipse.semiMinorAxis.getValue(this.viewer.clock.currentTime),rotation:o.Math.toRadians(Number(p.rotation||0)),granularity:2},!![],![]),S=new o.Cartesian3(w.positions[0],w.positions[1],w.positions[2]);if(this._positions_draw.push(S),this._maxPointNum===3){var O=new o.Cartesian3(w.positions[3],w.positions[4],w.positions[5]);this._positions_draw.push(O)}}},{key:"finish",value:function(){var y=this.entity;y.editing=this.getEditClass(y),y._positions_draw=this._positions_draw,y.position=new o.CallbackProperty(function(){return y._positions_draw&&y._positions_draw.length>0?y._positions_draw[0]:null},![])}}]),g}(l.DrawPolyline);z.DrawCircle=i},2235:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCloud=void 0;var D=T(e(52909)),b=T(e(42579)),C=T(e(22777)),f=T(e(42762)),v=T(e(30044)),m=T(e(99085)),o=T(e(34009)),u=c(e(87647)),l=c(e(8292)),r=e(41471);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,o.default)(n),y;if(h){var p=(0,o.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,m.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,v.default)(g,n);var h=x(g);function g(d){var y;return(0,C.default)(this,g),d=d||{},y=h.call(this,d),y.type="cloud",y.attrClass=l,y}return(0,f.default)(g,[{key:"createFeature",value:function(y){var p=this,w=this.primitives._primitives,S=(0,D.default)(w).call(w,function(B){return(0,b.default)(this,p),B instanceof u.CloudCollection}.bind(this));S=S||this.primitives.add(new u.CloudCollection);var O=S.add(l.style2Entity(y.style));return O.attribute=y,O.cloud=l.style2Entity(y.style),this.entity=O,O}},{key:"style2Entity",value:function(y,p){return l.style2Entity(y,p)}}]),g}(r.DrawPoint);z.DrawCloud=i},63622:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCorridor=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=c(e(87647)),o=e(59575),u=e(92672),l=c(e(22160)),r=e(45691);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,v.default)(n),y;if(h){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var h=x(g);function g(d){var y;return(0,D.default)(this,g),d=d||{},y=h.call(this,d),y.type="corridor",y._minPointNum=2,y._maxPointNum=9999,y.editClass=r.EditCorridor,y.attrClass=l,y}return(0,b.default)(g,[{key:"createFeature",value:function(y){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),y.config?(this._minPointNum=y.config.minPointNum||this._minPointNum_def,this._maxPointNum=y.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def);var p=this,w={corridor:l.style2Entity(y.style),attribute:y};return w.corridor.positions=new m.CallbackProperty(function(){return p.getDrawPosition()},![]),this.entity=this.dataSource.entities.add(w),this.entity.mark311=this.drawTool.id,this.entity._positions_draw=this._positions_draw,this.entity}},{key:"style2Entity",value:function(y,p){return l.style2Entity(y,p.corridor)}},{key:"updateAttrForDrawing",value:function(){var y=this.entity.attribute.style;if(!y.clampToGround){var p=(0,u.getMaxHeight)(this.getDrawPosition());p!==0&&(this.entity.corridor.height=p,y.height=p,y.extrudedHeight&&(this.entity.corridor.extrudedHeight=p+Number(y.extrudedHeight)))}}},{key:"finish",value:function(){var y=this.entity;y.editing=this.getEditClass(y),y._positions_draw=this.getDrawPosition(),y.corridor.positions=new m.CallbackProperty(function(){return y._positions_draw},![])}}]),g}(o.DrawPolyline);z.DrawCorridor=i},29092:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCurve=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=s(e(87647)),o=e(59575),u=e(69471),l=e(39670);function r(i){if(typeof R!="function")return null;var n=new R,h=new R;return(r=function(d){return d?h:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=r(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&A;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?A(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}function c(i){var n=x();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,C.default)(h,i);var n=c(h);function h(g){var d;return(0,D.default)(this,h),g=g||{},d=n.call(this,g),d.type="curve",d.editClass=l.EditCurve,d._positions_show=null,d}return(0,b.default)(h,[{key:"getDrawPosition",value:function(){return this._positions_show}},{key:"updateAttrForDrawing",value:function(){if(this._positions_draw==null||this._positions_draw.length<3){this._positions_show=this._positions_draw;return}this._positions_show=(0,u.line2curve)(this._positions_draw,this.entity.attribute.style.closure)}},{key:"finish",value:function(){var d=this.entity;d._positions_draw=this._positions_draw,d._positions_show=this._positions_show,d.editing=this.getEditClass(d),d.polyline.positions=new m.CallbackProperty(function(){return d._positions_show},![]),this._positions_show=null}}]),h}(o.DrawPolyline);z.DrawCurve=a},76863:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawCylinder=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=c(e(87647)),o=c(e(17858)),u=e(59575),l=e(92672),r=e(406);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,v.default)(n),y;if(h){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var h=x(g);function g(d){var y;return(0,D.default)(this,g),d=d||{},y=h.call(this,d),y.type="cylinder",y._minPointNum=2,y._maxPointNum=2,y.editClass=r.EditCylinder,y.attrClass=o,y}return(0,b.default)(g,[{key:"getShowPosition",value:function(y){return this._positions_draw&&this._positions_draw.length>1?(0,l.addPositionsHeight)(this._positions_draw[0],this.entity.cylinder.length.getValue(y)/2):null}},{key:"createFeature",value:function(y){this._positions_draw=[];var p=this,w={position:new m.CallbackProperty(function(S){return p.getShowPosition(S)},![]),cylinder:o.style2Entity(y.style),attribute:y};return this.entity=this.dataSource.entities.add(w),this.entity.mark311=this.drawTool.id,this.entity}},{key:"style2Entity",value:function(y,p){return o.style2Entity(y,p.cylinder)}},{key:"updateAttrForDrawing",value:function(y){if(this._positions_draw){if(y){this.addPositionsForRadius(this._positions_draw);return}this._positions_draw.length<2||(this.entity.cylinder.bottomRadius=this.formatNum(m.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2))}}},{key:"addPositionsForRadius",value:function(y){this._positions_draw=[y];var p=this.entity.cylinder.bottomRadius.getValue(this.viewer.clock.currentTime),w=m.EllipseGeometryLibrary.computeEllipsePositions({center:y,semiMajorAxis:p,semiMinorAxis:p,rotation:0,granularity:2},!![],![]),S=new m.Cartesian3(w.positions[0],w.positions[1],w.positions[2]);this._positions_draw.push(S)}},{key:"finish",value:function(){var y=this.entity;y.editing=this.getEditClass(y),y._positions_draw=this._positions_draw,y.position=new m.CallbackProperty(function(p){return y._positions_draw&&y._positions_draw.length>0?(0,l.addPositionsHeight)(y._positions_draw[0],y.cylinder.length.getValue(p)/2):null},![])}}]),g}(u.DrawPolyline);z.DrawCylinder=i},94818:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawEllipsoid=void 0;var D=T(e(42579)),b=T(e(22777)),C=T(e(42762)),f=T(e(30044)),v=T(e(99085)),m=T(e(34009)),o=x(e(87647)),u=e(59575),l=x(e(99698)),r=e(38766),s=e(78288);function c(h){if(typeof R!="function")return null;var g=new R,d=new R;return(c=function(p){return p?d:g})(h)}function x(h,g){if(!g&&h&&h.__esModule)return h;if(h===null||M(h)!=="object"&&typeof h!="function")return{default:h};var d=c(g);if(d&&d.has(h))return d.get(h);var y={},p=Object.defineProperty&&A;for(var w in h)if(w!=="default"&&Object.prototype.hasOwnProperty.call(h,w)){var S=p?A(h,w):null;S&&(S.get||S.set)?Object.defineProperty(y,w,S):y[w]=h[w]}return y.default=h,d&&d.set(h,y),y}function a(h){var g=i();return function(){var y=(0,m.default)(h),p;if(g){var w=(0,m.default)(this).constructor;p=F(y,arguments,w)}else p=y.apply(this,arguments);return(0,v.default)(this,p)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var n=function(h){(0,f.default)(d,h);var g=a(d);function d(y){var p;return(0,b.default)(this,d),y=y||{},p=g.call(this,y),p.type="ellipsoid",p._minPointNum=2,p._maxPointNum=3,p.editClass=r.EditEllipsoid,p.attrClass=l,p}return(0,C.default)(d,[{key:"getShowPosition",value:function(){return this._positions_draw&&this._positions_draw.length>0?this._positions_draw[0]:null}},{key:"createFeature",value:function(p){this._positions_draw=[];var w=this,S={position:new o.CallbackProperty(function(O){return w.getShowPosition(O)},![]),ellipsoid:l.style2Entity(p.style),attribute:p};return this.entity=this.dataSource.entities.add(S),this.entity.mark311=this.drawTool.id,this.entity}},{key:"style2Entity",value:function(p,w){return l.style2Entity(p,w.ellipsoid)}},{key:"updateAttrForDrawing",value:function(p){if(this._positions_draw){if(p){this.addPositionsForRadius(this._positions_draw);return}if(!(this._positions_draw.length<2)){var w=this.entity.attribute.style,S=this.formatNum(o.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);w.extentRadii=S,w.heightRadii=S;var O;this._positions_draw.length===3?O=this.formatNum(o.Cartesian3.distance(this._positions_draw[0],this._positions_draw[2]),2):O=S,w.widthRadii=O,this.updateRadii(w)}}}},{key:"updateRadii",value:function(p){this.entity.ellipsoid.radii.setValue(new o.Cartesian3(p.extentRadii,p.widthRadii,p.heightRadii))}},{key:"addPositionsForRadius",value:function(p){this._positions_draw=[p];var w=this.entity.attribute.style,S=o.EllipseGeometryLibrary.computeEllipsePositions({center:p,semiMajorAxis:Number(w.extentRadii),semiMinorAxis:Number(w.widthRadii),rotation:o.Math.toRadians(Number(w.rotation||0)),granularity:2},!![],![]),O=new o.Cartesian3(S.positions[0],S.positions[1],S.positions[2]);this._positions_draw.push(O);var B=new o.Cartesian3(S.positions[3],S.positions[4],S.positions[5]);this._positions_draw.push(B)}},{key:"finish",value:function(){this.entity.editing=this.getEditClass(this.entity),this.entity._positions_draw=this._positions_draw,this.entity.position=this.getShowPosition()}},{key:"setDynamicEllipseGraphics",value:function(p,w){var S=this;if(p&&p.center){var O=w,B=p.center,k=p.radius||800,P=p.rotateAmount||.05,L=0,E=p.height||1,N=0,I=0,G=0,W=p.scale||null,Z=p.scale2||null,U=p.material||new o.ImageMaterialProperty({image:p.imge||"Assets3D/Textures/circle_bg.png",transparent:!![]});O.position=new o.CallbackProperty(function(){return(0,s.transformWGS84ToCartesian)(B)},![]),O.orientation=new o.CallbackProperty(function(){return o.Transforms.headingPitchRollQuaternion((0,s.transformWGS84ToCartesian)(B),new o.HeadingPitchRoll(o.Math.toRadians(N),o.Math.toRadians(I),o.Math.toRadians(G)))},![]);var H=k,V=![],Y=function(){(0,D.default)(this,S),(k>=W||k<=H)&&(V=!V),V?k+=2:k-=2}.bind(this),$=function(){(0,D.default)(this,S),Z>=k?k+=2:k=H}.bind(this);O.ellipse={material:U,height:E,semiMajorAxis:new o.CallbackProperty(function(){return k},![]),semiMinorAxis:new o.CallbackProperty(function(){return k},![]),stRotation:new o.CallbackProperty(function(){return P>0&&(L+=P,L>=360&&(L=0)),W&&Y(),Z&&$(),L},![])}}}},{key:"setDynamicBlinkEllipseGraphics",value:function(p,w){if(p&&p.position){var S=w,O=p.alp||1,B=p.flog||!![];S.position=p.position,S.ellipse={semiMinorAxis:p.semiMinorAxis||2e3,semiMajorAxis:p.semiMajorAxis||2e3,height:p.height||10,material:new o.ColorMaterialProperty(new o.CallbackProperty(function(){return B?(O=O-.05,O<=0&&(B=![])):(O=O+.05,O>=1&&(B=!![])),o.Color.RED.withAlpha(O)},![]))}}}}]),d}(u.DrawPolyline);z.DrawEllipsoid=n},71350:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawLabel=void 0;var D=T(e(52909)),b=T(e(85208)),C=T(e(42579)),f=T(e(22777)),v=T(e(42762)),m=T(e(30044)),o=T(e(99085)),u=T(e(34009)),l=x(e(87647)),r=x(e(21617)),s=e(41471);function c(g){if(typeof R!="function")return null;var d=new R,y=new R;return(c=function(w){return w?y:d})(g)}function x(g,d){if(!d&&g&&g.__esModule)return g;if(g===null||M(g)!=="object"&&typeof g!="function")return{default:g};var y=c(d);if(y&&y.has(g))return y.get(g);var p={},w=Object.defineProperty&&A;for(var S in g)if(S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)){var O=w?A(g,S):null;O&&(O.get||O.set)?Object.defineProperty(p,S,O):p[S]=g[S]}return p.default=g,y&&y.set(g,p),p}function a(g){var d=i();return function(){var p=(0,u.default)(g),w;if(d){var S=(0,u.default)(this).constructor;w=F(p,arguments,S)}else w=p.apply(this,arguments);return(0,o.default)(this,w)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}function n(g,d,y,p){Object.defineProperty(g,d,{enumerable:!![],configurable:!![],get:function(){return y},set:function(S){d in p&&(p[d]=S,y=S)}})}var h=function(g){(0,m.default)(y,g);var d=a(y);function y(p){var w;return(0,f.default)(this,y),p=p||{},w=d.call(this,p),w.type="label",w.attrClass=r,w}return(0,v.default)(y,[{key:"createFeature",value:function(w){var S=this;if(this.mode==="primitive"){var O=this.primitives._primitives,B=(0,D.default)(O).call(O,function(E){return(0,C.default)(this,S),E instanceof l.LabelCollection}.bind(this));B=B||this.primitives.add(new l.LabelCollection);var k=B.add(r.style2Entity(w.style));return k.attribute=w,k.label=r.style2Entity(w.style),(0,b.default)(k.label).forEach(function(E){(0,C.default)(this,S),Object.hasOwnProperty.call(k.label,E)&&n(k.label,E,k.label[E],k)}.bind(this)),this.entity=k,k}else{this._positions_draw=null;var P=this,L={show:![],position:new l.CallbackProperty(function(){return P.getDrawPosition()},![]),label:r.style2Entity(w.style),attribute:w};return this.entity=this.dataSource.entities.add(L),this.entity.label.isTrueGraphic=!![],this.entity.mark311=this.drawTool.id,this.entity}}},{key:"style2Entity",value:function(w,S){return r.style2Entity(w,S.label)}}]),y}(s.DrawPoint);z.DrawLabel=h},41054:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawModel=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=c(e(87647)),o=c(e(21617)),u=c(e(31490)),l=e(41471),r=e(78288);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,v.default)(n),y;if(h){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var h=x(g);function g(d){var y;return(0,D.default)(this,g),d=d||{},y=h.call(this,d),y.type="model",y.attrClass=u,y}return(0,b.default)(g,[{key:"createFeature",value:function(y){this._positions_draw=null;var p=this,w={position:new m.CallbackProperty(function(){return p.getDrawPosition()},![]),model:u.style2Entity(y.style),attribute:y};return y.style&&y.style.label&&(w.label=o.style2Entity(y.style.label)),this.entity=this.dataSource.entities.add(w),this.entity.mark311=this.drawTool.id,this.entity}},{key:"style2Entity",value:function(y,p){return this.updateOrientation(y,p),y&&y.label&&o.style2Entity(y.label,p.label),u.style2Entity(y,p.model)}},{key:"updateAttrForDrawing",value:function(){this.updateOrientation(this.entity.attribute.style,this.entity)}},{key:"updateOrientation",value:function(y,p){var w=p.position.getValue(this.viewer.clock.currentTime);if(w!=null){var S=m.Math.toRadians(Number(y.heading||0)),O=m.Math.toRadians(Number(y.pitch||0)),B=m.Math.toRadians(Number(y.roll||0)),k=new m.HeadingPitchRoll(S,O,B);p.orientation=m.Transforms.headingPitchRollQuaternion(w,k)}}},{key:"setGraphicsRotate",value:function(y,p){if(y&&p){var w=p,S=y.rotateAmount,O=(0,r.transformCartesianToWGS84)(w.position.getValue(this.viewer.clock.currentTime));O.heading=0,O.pitch=0,O.roll=0,w.position=new m.CallbackProperty(function(){return(0,r.transformWGS84ToCartesian)(O)},![]),w.orientation=new m.CallbackProperty(function(){return S>0&&(O.heading+=S,O.heading===360&&(O.heading=0)),m.Transforms.headingPitchRollQuaternion((0,r.transformWGS84ToCartesian)(O),new m.HeadingPitchRoll(m.Math.toRadians(O.heading),m.Math.toRadians(O.pitch),m.Math.toRadians(O.roll)))},![])}}},{key:"setGraphicsFloat",value:function(y,p){if(y&&p){var w=p,S=y.minHeiht||5,O=y.maxHeiht||100,B=y.speed||.06,k=S,P=![],L=w.position.getValue(this.viewer.clock.currentTime);L.length?w.positions=new m.CallbackProperty(function(){var E=(0,r.transformCartesianArrayToWGS84Array)(L);for(var N in E){var I=E[N];(S>=O||S<=k)&&(P=!P),P?S+=B:S-=B,I.alt=S}return(0,r.transformWGS84ArrayToCartesianArray)(E)},![]):w.position=new m.CallbackProperty(function(){var E=(0,r.transformCartesianToWGS84)(L);return(S>=O||S<=k)&&(P=!P),P?S+=B:S-=B,E.alt=S,(0,r.transformWGS84ToCartesian)(E)},![])}}}]),g}(l.DrawPoint);z.DrawModel=i},31320:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPModel=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=x(e(87647)),o=x(e(31490)),u=e(4997),l=e(92672),r=e(70317),s=e(33843);function c(h){if(typeof R!="function")return null;var g=new R,d=new R;return(c=function(p){return p?d:g})(h)}function x(h,g){if(!g&&h&&h.__esModule)return h;if(h===null||M(h)!=="object"&&typeof h!="function")return{default:h};var d=c(g);if(d&&d.has(h))return d.get(h);var y={},p=Object.defineProperty&&A;for(var w in h)if(w!=="default"&&Object.prototype.hasOwnProperty.call(h,w)){var S=p?A(h,w):null;S&&(S.get||S.set)?Object.defineProperty(y,w,S):y[w]=h[w]}return y.default=h,d&&d.set(h,y),y}function a(h){var g=i();return function(){var y=(0,v.default)(h),p;if(g){var w=(0,v.default)(this).constructor;p=F(y,arguments,w)}else p=y.apply(this,arguments);return(0,f.default)(this,p)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var n=function(h){(0,C.default)(d,h);var g=a(d);function d(y){var p;return(0,D.default)(this,d),y=y||{},p=g.call(this,y),p.type="point",p.editClass=s.EditPModel,p.attrClass=o,p}return(0,b.default)(d,[{key:"createFeature",value:function(p){var w=this;this._positions_draw=m.Cartesian3.ZERO;var S=p.style,O=this.primitives.add(m.Model.fromGltf({url:S.modelUrl,modelMatrix:this.getModelMatrix(S),minimumPixelSize:m.defaultValue(S.minimumPixelSize,0),scale:m.defaultValue(S.scale,1)}));return O.readyPromise.then(function(){w.style2Entity(S,w.entity)}),O.attribute=p,this.entity=O,this.entity}},{key:"getModelMatrix",value:function(p,w){var S=new m.HeadingPitchRoll(m.Math.toRadians(p.heading||0),m.Math.toRadians(p.pitch||0),m.Math.toRadians(p.roll||0)),O=m.Transforms.eastNorthUpToFixedFrame,B=m.Transforms.headingPitchRollToFixedFrame(w||this._positions_draw,S,this.viewer.scene.globe.ellipsoid,O);return B}},{key:"style2Entity",value:function(p,w){return w.modelMatrix=this.getModelMatrix(p,w.position),o.style2Entity(p,w)}},{key:"bindEvent",value:function(){var p=this;this.getHandler().setInputAction(function(w){var S=(0,l.getCurrentMousePosition)(p.viewer.scene,w.endPosition,p.entity);S&&(p._positions_draw=S,p.entity.modelMatrix=p.getModelMatrix(p.entity.attribute.style)),p.tooltip.showAt(w.endPosition,r.message.draw.point.start)},m.ScreenSpaceEventType.MOUSE_MOVE),this.getHandler().setInputAction(function(w){var S=(0,l.getCurrentMousePosition)(p.viewer.scene,w.position,p.entity);S&&(p._positions_draw=S,p.disable())},m.ScreenSpaceEventType.LEFT_CLICK)}},{key:"finish",value:function(){this.entity.modelMatrix=this.getModelMatrix(this.entity.attribute.style),this.entity.editing=this.getEditClass(this.entity),this.entity.position=this.getDrawPosition()}}]),d}(u.DrawBase);z.DrawPModel=n},32325:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.PlottingType=z.DrawPlotting=void 0,z.generatePolygonHierarchy=O;var D=T(e(99245)),b=T(e(42579)),C=T(e(22777)),f=T(e(42762)),v=T(e(30044)),m=T(e(99085)),o=T(e(34009)),u=T(e(13288)),l=T(e(5146)),r=T(e(28866)),s=e(16407),c=e(15998),x=d(e(87647)),a=d(e(42116)),i=e(66488),n=e(59575),h=e(92672);function g(B){if(typeof R!="function")return null;var k=new R,P=new R;return(g=function(E){return E?P:k})(B)}function d(B,k){if(!k&&B&&B.__esModule)return B;if(B===null||M(B)!=="object"&&typeof B!="function")return{default:B};var P=g(k);if(P&&P.has(B))return P.get(B);var L={},E=Object.defineProperty&&A;for(var N in B)if(N!=="default"&&Object.prototype.hasOwnProperty.call(B,N)){var I=E?A(B,N):null;I&&(I.get||I.set)?Object.defineProperty(L,N,I):L[N]=B[N]}return L.default=B,P&&P.set(B,L),L}function y(B){var k=p();return function(){var L=(0,o.default)(B),E;if(k){var N=(0,o.default)(this).constructor;E=F(L,arguments,N)}else E=L.apply(this,arguments);return(0,m.default)(this,E)}}function p(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var w={STRAIGHT_ARROW:1,FINE_ARROW:"arrow",ATTACK_ARROW_PW:"arrow-attack",ATTACK_ARROW_YW:4,DOUBLE_ARROW:"arrow-pincerlike",CLOSED_CURVE:"surface-closed",GATHERING_PLACE:"assembly-site"};z.PlottingType=w,(0,u.default)(w);var S=function(B){(0,v.default)(P,B);var k=y(P);function P(L){var E;return(0,C.default)(this,P),L=L||{},E=k.call(this,L),E.type="plotting",E._minPointNum=2,E._maxPointNum=2,E.editClass=i.EditPlotting,E.attrClass=a,E}return(0,f.default)(P,[{key:"createFeature",value:function(E){var N;this._positions_draw=[],this.plottingType=E.plottingType||w.STRAIGHT_ARROW,this.plottingType===w.STRAIGHT_ARROW||this.plottingType===w.FINE_ARROW?(this._minPointNum=2,this._maxPointNum=2):this.plottingType===w.DOUBLE_ARROW?(this._minPointNum=3,this._maxPointNum=5):this.plottingType===w.GATHERING_PLACE?(this._minPointNum=2,this._maxPointNum=3):(this._minPointNum=3,this._maxPointNum=Number.POSITIVE_INFINITY);var I=this,G={polygon:a.style2Entity(E.style),attribute:E};return G.polyline={clampToGround:E==null||(N=E.style)===null||N===void 0?void 0:N.clampToGround,show:![]},this.entity=this.dataSource.entities.add(G),this.entity.polygon.hierarchy=new x.CallbackProperty(O(I,I),![]),this.bindOutline(this.entity),this.entity}},{key:"style2Entity",value:function(E,N){return a.style2Entity(E,N.polygon)}},{key:"bindOutline",value:function(E){E.polyline.show=new x.CallbackProperty(function(N){var I=a.getPositions(E,!![]);return I&&I.length<3?!![]:E.polygon.outline&&E.polygon.outline.getValue(N)&&E.polygon.outlineWidth&&E.polygon.outlineWidth.getValue(N)>1},![]),E.polyline.positions=new x.CallbackProperty(function(N){if(!E.polyline.show.getValue(N))return null;var I=a.getPositions(E,!![]);return I&&I.length<3?I:I==null?void 0:(0,l.default)(I).call(I,[I[0]])},![]),E.polyline.width=new x.CallbackProperty(function(){var N=a.getPositions(E,!![]);return N&&N.length<3?2:E.polygon.outlineWidth&&E.polygon.outlineWidth.getValue()},![]),E.polyline.zIndex=new x.CallbackProperty(function(){return E.polygon.zIndex&&E.polygon.zIndex.getValue()},![]),E.polyline.material=new x.ColorMaterialProperty(new x.CallbackProperty(function(N){var I=a.getPositions(E,!![]);return I&&I.length<3?E.polygon.material.color?E.polygon.material.color.getValue(N):x.Color.YELLOW:E.polygon.outlineColor.getValue(N)},![]))}},{key:"updateAttrForDrawing",value:function(){var E,N=(E=this.entity.attribute)===null||E===void 0?void 0:E.style;if(N!=null&&N.extrudedHeight){var I=(0,h.getMaxHeight)(this.getDrawPosition());this.entity.polygon.extrudedHeight=I+Number(N.extrudedHeight)}}},{key:"finish",value:function(){var E=this.entity;E.editing=this.getEditClass(E),E.editing.plottingType=this.plottingType,E._positions_draw=this.getDrawPosition();var N=this;E.polygon.hierarchy=O(E,N)(),E.editing.changePositionsToCallback(![])}},{key:"toGeoJSON",value:function(E){return this.attrClass.toGeoJSON(E)}}]),P}(n.DrawPolyline);z.DrawPlotting=S;function O(B,k){var P=this;return function(){var L=this;(0,b.default)(this,P);var E=B._positions_draw,N=new x.PolygonHierarchy;if(k.plottingType===w.STRAIGHT_ARROW||k.plottingType===w.FINE_ARROW){if(E instanceof Array&&E.length===2){var I=k.plottingType===w.FINE_ARROW?.15:.05;s.plotUtil.fineArrowDefualParam.tailWidthFactor=I;var G=(0,D.default)(E,2),W=G[0],Z=G[1];W=c.Utils.cartesianToLonLatHeight(W),Z=c.Utils.cartesianToLonLatHeight(Z);var U=s.plotUtil.algorithm.fineArrow(W,Z);N.positions=U}}else if(k.plottingType===w.ATTACK_ARROW_YW||k.plottingType===w.ATTACK_ARROW_PW){if(E instanceof Array&&E.length>=3){var H=k.plottingType===w.ATTACK_ARROW_PW?0:1;s.plotUtil.tailedAttackArrowDefualParam.swallowTailFactor=H;var V=(0,r.default)(E).call(E,function(st){return(0,b.default)(this,L),c.Utils.cartesianToLonLatHeight(st)}.bind(this)),Y=s.plotUtil.algorithm.tailedAttackArrow(V);N.positions=Y.polygonalPoint}E instanceof Array&&E.length===2&&(N.positions=E)}else if(k.plottingType===w.DOUBLE_ARROW){if(E instanceof Array&&E.length>=3){var $=(0,r.default)(E).call(E,function(st){return(0,b.default)(this,L),c.Utils.cartesianToLonLatHeight(st)}.bind(this)),K=s.plotUtil.algorithm.doubleArrow($);N.positions=K.polygonalPoint}E instanceof Array&&E.length===2&&(N.positions=E)}else if(k.plottingType===w.GATHERING_PLACE){if(E instanceof Array&&E.length>=2){var J=(0,r.default)(E).call(E,function(st){return(0,b.default)(this,L),c.Utils.cartesianToLonLatHeight(st)}.bind(this)),Q=s.plotUtil.algorithm.gatheringPlace(J);N.positions=Q}}else if(k.plottingType===w.CLOSED_CURVE&&E instanceof Array&&E.length>=2){var et=(0,r.default)(E).call(E,function(st){return(0,b.default)(this,L),c.Utils.cartesianToLonLatHeight(st)}.bind(this)),nt=s.plotUtil.algorithm.closedCurve(et);N.positions=nt}return N}.bind(this)}},41471:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPoint=void 0,z.defineReactive=p;var D=T(e(52909)),b=T(e(85208)),C=T(e(42579)),f=T(e(22777)),v=T(e(42762)),m=T(e(30044)),o=T(e(99085)),u=T(e(34009)),l=g(e(87647)),r=g(e(69973)),s=g(e(11257)),c=g(e(21617)),x=e(4997),a=e(92672),i=e(70317),n=e(56248);function h(S){if(typeof R!="function")return null;var O=new R,B=new R;return(h=function(P){return P?B:O})(S)}function g(S,O){if(!O&&S&&S.__esModule)return S;if(S===null||M(S)!=="object"&&typeof S!="function")return{default:S};var B=h(O);if(B&&B.has(S))return B.get(S);var k={},P=Object.defineProperty&&A;for(var L in S)if(L!=="default"&&Object.prototype.hasOwnProperty.call(S,L)){var E=P?A(S,L):null;E&&(E.get||E.set)?Object.defineProperty(k,L,E):k[L]=S[L]}return k.default=S,B&&B.set(S,k),k}function d(S){var O=y();return function(){var k=(0,u.default)(S),P;if(O){var L=(0,u.default)(this).constructor;P=F(k,arguments,L)}else P=k.apply(this,arguments);return(0,o.default)(this,P)}}function y(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}function p(S,O,B,k){Object.defineProperty(S,O,{enumerable:!![],configurable:!![],get:function(){return B},set:function(L){O in k&&(k[O]=L,B=L)}})}var w=function(S){(0,m.default)(B,S);var O=d(B);function B(k){var P;return(0,f.default)(this,B),k=k||{},P=O.call(this,k),P.type="point",P.editClass=n.EditPoint,P.attrClass=s,P}return(0,v.default)(B,[{key:"createFeature",value:function(P){var L=this;if(this.mode==="primitive"){var E=this.primitives._primitives,N=(0,D.default)(E).call(E,function(Z){return(0,C.default)(this,L),Z instanceof l.PointPrimitiveCollection}.bind(this));N=N||this.primitives.add(new l.PointPrimitiveCollection);var I=N.add(s.style2Entity(P.style));return I.attribute=P,I.point=s.style2Entity(P.style),I.point.outline=void 0,(0,b.default)(I.point).forEach(function(Z){(0,C.default)(this,L),Object.hasOwnProperty.call(I.point,Z)&&p(I.point,Z,I.point[Z],I)}.bind(this)),this.entity=I,I}else{this._positions_draw=null;var G=this,W={show:![],position:new l.CallbackProperty(function(){return G.getDrawPosition()},![]),point:s.style2Entity(P.style),attribute:P};return P.style&&P.style.label&&(W.label=c.style2Entity(P.style.label)),this.entity=this.dataSource.entities.add(W),this.entity.point.isTrueGraphic=!![],this.entity.mark311=this.drawTool.id,this.entity}}},{key:"handleVisibleDistance",value:function(P){var L=P.attribute.style;if(L!=null&&L.label){var E=l.Cartesian3.distance(this.viewer.camera.position,P.position.getValue(),new l.Cartesian3);L.label.distanceDisplayCondition_far=(E*1.3).toFixed()}var N=l.Cartesian3.distance(this.viewer.camera.position,P.position.getValue(),new l.Cartesian3);L.distanceDisplayCondition_far=(N*1.3).toFixed()}},{key:"style2Entity",value:function(P,L){return P!=null&&P.label&&c.style2Entity(P.label,L.label,this.viewer,L),s.style2Entity(P,L.point)}},{key:"bindEvent",value:function(){var P=this;this.getHandler().setInputAction(function(L){var E=(0,a.getCurrentMousePosition)(P.viewer.scene,L.endPosition,P.entity);E&&(P.mode==="primitive"?P.entity.position=E:P._positions_draw=E),P.tooltip.showAt(L.endPosition,i.message.draw.point.start),P.fire(r.DrawMouseMove,{drawtype:P.type,entity:P.entity,position:E})},l.ScreenSpaceEventType.MOUSE_MOVE),this.getHandler().setInputAction(function(L){var E=(0,a.getCurrentMousePosition)(P.viewer.scene,L.position,P.entity);E&&(P.mode==="primitive"?(P.entity.position=E,P._positions_draw=E,P.disable()):(P._positions_draw=E,P.disable()))},l.ScreenSpaceEventType.LEFT_CLICK)}},{key:"finish",value:function(){this.entity.show=!![],this.handleVisibleDistance(this.entity),this.entity.editing=this.getEditClass(this.entity),this.entity.position=this.getDrawPosition(),this.entity._positions_draw=this.getDrawPosition()}}]),B}(x.DrawBase);z.DrawPoint=w},76477:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPolygon=void 0;var D=T(e(5146)),b=T(e(22777)),C=T(e(42762)),f=T(e(30044)),v=T(e(99085)),m=T(e(34009)),o=a(e(87647)),u=a(e(96535)),l=e(81983),r=e(59575),s=e(92672),c=a(e(36161));function x(g){if(typeof R!="function")return null;var d=new R,y=new R;return(x=function(w){return w?y:d})(g)}function a(g,d){if(!d&&g&&g.__esModule)return g;if(g===null||M(g)!=="object"&&typeof g!="function")return{default:g};var y=x(d);if(y&&y.has(g))return y.get(g);var p={},w=Object.defineProperty&&A;for(var S in g)if(S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)){var O=w?A(g,S):null;O&&(O.get||O.set)?Object.defineProperty(p,S,O):p[S]=g[S]}return p.default=g,y&&y.set(g,p),p}function i(g){var d=n();return function(){var p=(0,m.default)(g),w;if(d){var S=(0,m.default)(this).constructor;w=F(p,arguments,S)}else w=p.apply(this,arguments);return(0,v.default)(this,w)}}function n(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var h=function(g){(0,f.default)(y,g);var d=i(y);function y(p){var w;return(0,b.default)(this,y),p=p||{},w=d.call(this,p),w.type="polygon",w._minPointNum=3,w._maxPointNum=9999,w.editClass=l.EditPolygon,w.attrClass=u,w}return(0,C.default)(y,[{key:"createFeature",value:function(w){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),w.config?(this._minPointNum=w.config.minPointNum||this._minPointNum_def,this._maxPointNum=w.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def);var S=this,O={id:w.attr.id||o.createGuid(),polygon:u.style2Entity(w.style),attribute:w};return O.polygon.hierarchy=new o.CallbackProperty(function(){var B=S.getDrawPosition();return new o.PolygonHierarchy(B)},![]),O.polyline={clampToGround:w.style.clampToGround,show:![]},this.entity=this.dataSource.entities.add(O),this.entity.mark311=this.drawTool.id,this.bindOutline(this.entity),this.entity}},{key:"loadJson",value:function(w){for(var S,O,B,k,P=[],L=u.style2Entity(w[0].properties.style),E=((S=(O=L.material).getValue)===null||S===void 0?void 0:S.call(O))||L.material,N=((B=E.getType)===null||B===void 0?void 0:B.call(E))||"Color",I=((k=E.getValue)===null||k===void 0?void 0:k.call(E))||{color:E},G=new o.MaterialAppearance({material:new o.Material({fabric:{type:N,uniforms:I}})}),W=0;W<w.length;W++){var Z=w[W],U=Z.properties,H=c.getPositionByGeoJSON(Z),V=u.style2Entity(U.style),Y=new o.GeometryInstance({geometry:new o.PolygonGeometry({polygonHierarchy:new o.PolygonHierarchy(H),extrudedHeight:V.extrudedHeight,height:V.height,perPositionHeight:V.perPositionHeight})});P.push(Y)}var $=this.primitives.add(new o.Primitive({geometryInstances:P,appearance:G}));return $}},{key:"getDrawPosition",value:function(){var w=this.entity.attribute.style;return w.height&&this.entity.polygon.perPositionHeight==![]&&(this._positions_draw=(0,s.setPositionsHeight)(this._positions_draw,w.height)),this._positions_draw}},{key:"style2Entity",value:function(w,S){return u.style2Entity(w,S.polygon)}},{key:"bindOutline",value:function(w){w.polyline.show=new o.CallbackProperty(function(S){var O=u.getPositions(w);return O&&O.length<3?!![]:!!(w.polygon.outline&&w.polygon.outline.getValue(S)&&w.polygon.outlineWidth&&w.polygon.outlineWidth.getValue(S)>1&&!w.polygon.extrudedHeight)},![]),w.polyline.clampToGround=new o.CallbackProperty(function(){var S,O;return(S=w.attribute)===null||S===void 0||(O=S.style)===null||O===void 0?void 0:O.clampToGround},![]),w.polyline.positions=new o.CallbackProperty(function(S){var O;if(((O=w.polyline.show)===null||O===void 0?void 0:O.getValue(S))===![])return null;var B=u.getPositions(w);return B&&B.length<3?B:(w.polygon.height&&(B=(0,s.setPositionsHeight)(B,w.polygon.height)),(0,D.default)(B).call(B,[B[0]]))},![]),w.polyline.width=new o.CallbackProperty(function(){var S=u.getPositions(w);return S&&S.length<3?2:parseInt(w.polygon.outlineWidth&&w.polygon.outlineWidth.getValue())},![]),w.polyline.zIndex=w.polygon.zIndex&&w.polygon.zIndex.getValue(),w.polyline.material=new o.ColorMaterialProperty(new o.CallbackProperty(function(S){var O,B=u.getPositions(w);return B&&B.length<3?w.polygon.material.color?w.polygon.material.color.getValue(S):o.Color.YELLOW:((O=w.polygon.outlineColor)===null||O===void 0?void 0:O.getValue(S))||o.Color.YELLOW},!![]))}},{key:"updateAttrForDrawing",value:function(){var w=this.entity.attribute.style,S=(0,s.getMaxHeight)(this.getDrawPosition());if(w.height&&this.entity.polygon.perPositionHeight==![]){S=w.height;for(var O=(0,s.setPositionsHeight)(this._positions_draw,w.height),B=0;B<this._positions_draw.length;B++)this._positions_draw[B]=O[B]}w.extrudedHeight&&(this.entity.polygon.extrudedHeight=S+Number(w.extrudedHeight||0))}},{key:"finish",value:function(){var w=this.entity;w._positions_draw=this.getDrawPosition(),w.editing=this.getEditClass(w),w.editing.changePositionsToCallback(![]),this._positions_draw=null}},{key:"toGeoJSON",value:function(w){var S;return(S=w.attribute)!==null&&S!==void 0&&S.plottingType?this.drawTool.drawCtrl.plotting.toGeoJSON(w):this.attrClass.toGeoJSON(w)}},{key:"jsonToEntity",value:function(w){var S,O=w.properties,B=0;O!=null&&(S=O.style)!==null&&S!==void 0&&S.height&&(B=O.style.height);var k=c.getPositionByGeoJSON(w,B);return this.attributeToEntity(O,k)}}]),y}(r.DrawPolyline);z.DrawPolygon=h},11171:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPolygonEx=void 0;var D=T(e(69033)),b=T(e(22777)),C=T(e(42762)),f=T(e(30044)),v=T(e(99085)),m=T(e(34009)),o=r(e(87647)),u=e(76477);function l(a){if(typeof R!="function")return null;var i=new R,n=new R;return(l=function(g){return g?n:i})(a)}function r(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||M(a)!=="object"&&typeof a!="function")return{default:a};var n=l(i);if(n&&n.has(a))return n.get(a);var h={},g=Object.defineProperty&&A;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?A(a,d):null;y&&(y.get||y.set)?Object.defineProperty(h,d,y):h[d]=a[d]}return h.default=a,n&&n.set(a,h),h}function s(a){var i=c();return function(){var h=(0,m.default)(a),g;if(i){var d=(0,m.default)(this).constructor;g=F(h,arguments,d)}else g=h.apply(this,arguments);return(0,v.default)(this,g)}}function c(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var x=function(a){(0,f.default)(n,a);var i=s(n);function n(h){var g;return(0,b.default)(this,n),h=h||{},g=i.call(this,h),g._positions_show=null,g}return(0,C.default)(n,[{key:"getDrawPosition",value:function(){return this._positions_show}},{key:"updateAttrForDrawing",value:function(){if(this._positions_draw==null||this._positions_draw.length<this._minPointNum){this._positions_show=this._positions_draw;return}this._positions_show=this.getShowPositions(this._positions_draw,this.entity.attribute)}},{key:"getShowPositions",value:function(g){return g}},{key:"finish",value:function(){var g,d=this.entity;d.editing=this.getEditClass(d),this._positions_draw.length>this._maxPointNum&&(0,D.default)(g=this._positions_draw).call(g,this._maxPointNum,this._positions_draw.length-this._maxPointNum),this.entity._positions_draw=this._positions_draw,this.entity._positions_show=this._positions_show,d.polygon.hierarchy=new o.CallbackProperty(function(){var y=d._positions_show;return new o.PolygonHierarchy(y)},![]),this._positions_draw=null,this._positions_show=null}},{key:"toGeoJSON",value:function(g){return this.attrClass.toGeoJSON(g,!![])}}]),n}(u.DrawPolygon);z.DrawPolygonEx=x},59575:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPolyline=void 0;var D=T(e(69033)),b=T(e(22777)),C=T(e(42762)),f=T(e(30044)),v=T(e(99085)),m=T(e(34009)),o=n(e(87647)),u=n(e(69973)),l=n(e(69471)),r=e(92672),s=e(70317),c=e(4997),x=e(11478),a=n(e(36161));function i(y){if(typeof R!="function")return null;var p=new R,w=new R;return(i=function(O){return O?w:p})(y)}function n(y,p){if(!p&&y&&y.__esModule)return y;if(y===null||M(y)!=="object"&&typeof y!="function")return{default:y};var w=i(p);if(w&&w.has(y))return w.get(y);var S={},O=Object.defineProperty&&A;for(var B in y)if(B!=="default"&&Object.prototype.hasOwnProperty.call(y,B)){var k=O?A(y,B):null;k&&(k.get||k.set)?Object.defineProperty(S,B,k):S[B]=y[B]}return S.default=y,w&&w.set(y,S),S}function h(y){var p=g();return function(){var S=(0,m.default)(y),O;if(p){var B=(0,m.default)(this).constructor;O=F(S,arguments,B)}else O=S.apply(this,arguments);return(0,v.default)(this,O)}}function g(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var d=function(y){(0,f.default)(w,y);var p=h(w);function w(S){var O;return(0,b.default)(this,w),S=S||{},O=p.call(this,S),O.type="polyline",O._minPointNum=2,O._maxPointNum=9999,O.editClass=x.EditPolyline,O.attrClass=l,O.geometryInstances=[],O.polylinePrimitive,O}return(0,C.default)(w,[{key:"createFeature",value:function(O){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),O.config?(this._minPointNum=O.config.minPointNum||this._minPointNum_def,this._maxPointNum=O.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def);var B=this,k={polyline:l.style2Entity(O.style),attribute:O};return k.polyline.positions=new o.CallbackProperty(function(){return B.getDrawPosition()},![]),this.entity=this.dataSource.entities.add(k),this.entity._positions_draw=this._positions_draw,this.entity}},{key:"loadJson",value:function(O){for(var B,k,P,L,E=[],N=l.style2Entity(O[0].properties.style),I=((B=(k=N.material).getValue)===null||B===void 0?void 0:B.call(k))||N.material,G=((P=I.getType)===null||P===void 0?void 0:P.call(I))||"Color",W=((L=I.getValue)===null||L===void 0?void 0:L.call(I))||{color:I},Z=new o.PolylineMaterialAppearance({material:new o.Material({fabric:{type:G,uniforms:W}})}),U=0;U<O.length;U++){var H=O[U],V=H.properties,Y=a.getPositionByGeoJSON(H),$=l.style2Entity(V.style),K=new o.GeometryInstance({geometry:new o.PolylineGeometry({positions:Y,width:$.width||2,vertexFormat:o.PolylineMaterialAppearance.VERTEX_FORMAT})});E.push(K)}var J=this.primitives.add(new o.Primitive({geometryInstances:E,appearance:Z}));return J}},{key:"style2Entity",value:function(O,B){return l.style2Entity(O,B.polyline)}},{key:"bindEvent",value:function(){var O=this,B=![];this.getHandler().setInputAction(function(k){var P=(0,r.getCurrentMousePosition)(O.viewer.scene,k.position,O.entity);if(P){if(B&&O._positions_draw.pop(),B=![],O.entity.attribute&&O.entity.attribute.config&&O.entity.attribute.config.addHeight&&(P=(0,r.addPositionsHeight)(P,O.entity.attribute.config.addHeight)),O.entity.attribute&&O.entity.attribute.config&&O.entity.attribute.config.isSameHeight&&O._positions_draw.length>=1){var L=o.Cartographic.fromCartesian(O._positions_draw[0]);P=(0,r.setPositionsHeight)(P,L.height)}O._positions_draw.push(P),O.entity.attribute&&O.entity.attribute.config&&O.entity.attribute.config.isBox&&O._positions_draw.length===4&&(O._positions_draw=(0,a.computeRectanglePoints)(O._positions_draw[0],P)),O.updateAttrForDrawing(),O.fire(u.DrawAddPoint,{drawtype:O.type,entity:O.entity,position:P,positions:O._positions_draw}),O._positions_draw.length>=O._maxPointNum&&O.disable()}},o.ScreenSpaceEventType.LEFT_CLICK),this.getHandler().setInputAction(function(k){O._positions_draw.pop();var P=(0,r.getCurrentMousePosition)(O.viewer.scene,k.position,O.entity);P&&(B&&O._positions_draw.pop(),B=!![],O.fire(u.DrawRemovePoint,{drawtype:O.type,entity:O.entity,position:P,positions:O._positions_draw}),O._positions_draw.push(P),O.updateAttrForDrawing())},o.ScreenSpaceEventType.RIGHT_CLICK),this.getHandler().setInputAction(function(k){var P;O._positions_draw.length<=1?O.tooltip.showAt(k.endPosition,s.message.draw.polyline.start):O._positions_draw.length<O._minPointNum?O.tooltip.showAt(k.endPosition,s.message.draw.polyline.cont):O._positions_draw.length>=O._maxPointNum?O.tooltip.showAt(k.endPosition,s.message.draw.polyline.end2):O.tooltip.showAt(k.endPosition,s.message.draw.polyline.end);var L=(0,r.getCurrentMousePosition)(O.viewer.scene,k.endPosition,O.entity),E=(P=O.entity.attribute.config)===null||P===void 0?void 0:P.isContour;if(E&&O._positions_draw.length===2){var N=O.entity.wall.maximumHeights.getValue(),I=O.entity.wall.minimumHeights.getValue();O.entity.wall.maximumHeights=[N[0],N[0]],O.entity.wall.minimumHeights=[I[0],I[0]]}if(L){var G,W,Z,U;if(B){var H,V;if((H=O.entity.attribute)!==null&&H!==void 0&&(V=H.config)!==null&&V!==void 0&&V.isBox&&O._positions_draw.length===4){var Y;(0,D.default)(Y=O._positions_draw).call(Y,2,1)}else O._positions_draw.pop()}B=!![],(G=O.entity.attribute)!==null&&G!==void 0&&(W=G.config)!==null&&W!==void 0&&W.isBox&&O._positions_draw.length===3?O._positions_draw=(0,a.computeRectanglePoints)(O._positions_draw[0],L):O._positions_draw.push(L),(Z=O.entity.attribute)!==null&&Z!==void 0&&(U=Z.config)!==null&&U!==void 0&&U.isBox&&O._positions_draw.length===2&&(O._positions_draw=(0,a.computeRectanglePoints)(O._positions_draw[0],O._positions_draw[1])),O.updateAttrForDrawing(),O.fire(u.DrawMouseMove,{drawtype:O.type,entity:O.entity,position:L,positions:O._positions_draw})}},o.ScreenSpaceEventType.MOUSE_MOVE),this.getHandler().setInputAction(function(){O._positions_draw.pop(),O.endDraw()},o.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"endDraw",value:function(){if(!this._enabled)return this;this._positions_draw.length<this._minPointNum||(this.viewer.paid&&this._positions_draw.pop(),this.updateAttrForDrawing(),this.disable())}},{key:"finish",value:function(){var O=this.entity;O._positions_draw=this.getDrawPosition(),O.editing=this.getEditClass(O),O.editing.changePositionsToCallback(![]),this._positions_draw=null}}]),w}(c.DrawBase);z.DrawPolyline=d},30625:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawPolylineVolume=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=s(e(87647)),o=s(e(61775)),u=e(59575),l=e(25018);function r(i){if(typeof R!="function")return null;var n=new R,h=new R;return(r=function(d){return d?h:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=r(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&A;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?A(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}function c(i){var n=x();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,C.default)(h,i);var n=c(h);function h(g){var d;return(0,D.default)(this,h),g=g||{},d=n.call(this,g),d.type="polylineVolume",d._minPointNum=2,d._maxPointNum=9999,d.editClass=l.EditPolylineVolume,d.attrClass=o,d}return(0,b.default)(h,[{key:"createFeature",value:function(d){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),d.config?(this._minPointNum=d.config.minPointNum||this._minPointNum_def,this._maxPointNum=d.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def);var y=this,p={polylineVolume:o.style2Entity(d.style),attribute:d};return p.polylineVolume.positions=new m.CallbackProperty(function(){return y.getDrawPosition()},![]),this.entity=this.dataSource.entities.add(p),this.entity.mark311=this.drawTool.id,this.entity._positions_draw=this._positions_draw,this.entity}},{key:"style2Entity",value:function(d,y){return o.style2Entity(d,y.polylineVolume)}},{key:"updateAttrForDrawing",value:function(){}},{key:"finish",value:function(){var d=this.entity;d.editing=this.getEditClass(d),d._positions_draw=this.getDrawPosition(),d.polylineVolume.positions=new m.CallbackProperty(function(){return d._positions_draw},![])}}]),h}(u.DrawPolyline);z.DrawPolylineVolume=a},94688:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawRectangle=void 0;var D=T(e(53267)),b=T(e(22777)),C=T(e(42762)),f=T(e(30044)),v=T(e(99085)),m=T(e(34009)),o=x(e(87647)),u=x(e(92288)),l=e(59575),r=e(92672),s=e(91537);function c(h){if(typeof R!="function")return null;var g=new R,d=new R;return(c=function(p){return p?d:g})(h)}function x(h,g){if(!g&&h&&h.__esModule)return h;if(h===null||M(h)!=="object"&&typeof h!="function")return{default:h};var d=c(g);if(d&&d.has(h))return d.get(h);var y={},p=Object.defineProperty&&A;for(var w in h)if(w!=="default"&&Object.prototype.hasOwnProperty.call(h,w)){var S=p?A(h,w):null;S&&(S.get||S.set)?Object.defineProperty(y,w,S):y[w]=h[w]}return y.default=h,d&&d.set(h,y),y}function a(h){var g=i();return function(){var y=(0,m.default)(h),p;if(g){var w=(0,m.default)(this).constructor;p=F(y,arguments,w)}else p=y.apply(this,arguments);return(0,v.default)(this,p)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var n=function(h){(0,f.default)(d,h);var g=a(d);function d(y){var p;return(0,b.default)(this,d),y=y||{},p=g.call(this,y),p.type="rectangle",p._minPointNum=2,p._maxPointNum=2,p.editClass=s.EditRectangle,p.attrClass=u,p}return(0,C.default)(d,[{key:"getRectangle",value:function(){var p=this.getDrawPosition();return p.length<2?null:o.Rectangle.fromCartesianArray(p)}},{key:"createFeature",value:function(p){this._positions_draw=[];var w=this,S={rectangle:u.style2Entity(p.style),attribute:p};return S.rectangle.coordinates=new o.CallbackProperty(function(){return w.getRectangle()},![]),S.polyline={clampToGround:p.style.clampToGround,arcType:o.ArcType.RHUMB,show:![]},this.entity=this.dataSource.entities.add(S),this.entity.mark311=this.drawTool.id,this.entity._draw_positions=this._positions_draw,this.bindOutline(this.entity),this.entity}},{key:"style2Entity",value:function(p,w){return u.style2Entity(p,w.rectangle)}},{key:"bindOutline",value:function(p){p.polyline.show=new o.CallbackProperty(function(w){var S,O;return((S=p.rectangle.outline)===null||S===void 0?void 0:S.getValue(w))&&((O=p.rectangle.outlineWidth)===null||O===void 0?void 0:O.getValue(w))>1},![]),p.polyline.clampToGround=new o.CallbackProperty(function(){return p.attribute.style.clampToGround},![]),p.polyline.positions=new o.CallbackProperty(function(w){var S;if(((S=p.polyline.show)===null||S===void 0?void 0:S.getValue(w))===![])return null;var O=p._positions_draw;if(!O)return null;var B=p.rectangle.height?p.rectangle.height.getValue(w):0,k=o.Rectangle.fromCartesianArray(O),P=o.Cartesian3.fromRadians(k.west,k.south,B),L=o.Cartesian3.fromRadians(k.east,k.south,B),E=o.Cartesian3.fromRadians(k.east,k.north,B),N=o.Cartesian3.fromRadians(k.west,k.north,B),I=p.rectangle.rotation;if(I=o.Math.toDegrees(I),o.defined(I)&&I!==0){var G=o.Math.toRadians(I),W=new o.RectangleOutlineGeometry({ellipsoid:o.Ellipsoid.WGS84,rectangle:k,height:B,rotation:G}),Z=o.RectangleOutlineGeometry.createGeometry(W),U=Z.indices.length/2,H=(0,D.default)(Z.attributes.position),V={x:H[0],y:H[1],z:H[2]},Y={x:H[3],y:H[4],z:H[5]},$={x:H[6],y:H[7],z:H[8]},K={x:H[9],y:H[10],z:H[11]},J={x:H[12],y:H[13],z:H[14]};if(U===4)P=V,L=Y,E=$,N=K;else if(U===6)P=V,L=Y,E=K,N=J;else{for(var Q=[],et=0;et<U;et++){var nt={x:H[3*et],y:H[3*et+1],z:H[3*et+2]};Q[et]=nt}return Q.push(Q[0]),Q}}return[P,L,E,N,P]},![]),p.polyline.width=new o.CallbackProperty(function(w){var S;return(S=p.rectangle.outlineWidth)===null||S===void 0?void 0:S.getValue(w)},![]),p.polyline.zIndex=new o.CallbackProperty(function(){var w;return(w=p.rectangle.zIndex)===null||w===void 0?void 0:w.getValue()},![]),p.polyline.material=new o.ColorMaterialProperty(new o.CallbackProperty(function(w){var S;return(S=p.rectangle.outlineColor)===null||S===void 0?void 0:S.getValue(w)},![]))}},{key:"updateAttrForDrawing",value:function(){var p=this.entity.attribute.style;if(!p.clampToGround){var w=(0,r.getMaxHeight)(this.getDrawPosition());w!==0&&(this.entity.rectangle.height=w,p.height=w,p.extrudedHeight&&(this.entity.rectangle.extrudedHeight=w+Number(p.extrudedHeight)))}}},{key:"finish",value:function(){var p=this.entity;p._positions_draw=this._positions_draw,p.editing=this.getEditClass(p),p.rectangle.coordinates=new o.CallbackProperty(function(){return p._positions_draw.length<2?null:o.Rectangle.fromCartesianArray(p._positions_draw)},![])}}]),d}(l.DrawPolyline);z.DrawRectangle=n},74385:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawVideoProjection=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=c(e(87647)),o=c(e(89188)),u=c(e(21617)),l=e(41471),r=e(28769);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,v.default)(n),y;if(h){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var h=x(g);function g(d){var y;return(0,D.default)(this,g),d=d||{},y=h.call(this,d),y.type="videoProjection",y.editClass=r.EditVideoProjection,y.attrClass=o,y}return(0,b.default)(g,[{key:"createFeature",value:function(y){this._positions_draw=null;var p=this,w={show:![],position:new m.CallbackProperty(function(){return p.getDrawPosition()},![]),attribute:y};return y.style&&y.style.label&&(w.label=u.style2Entity(y.style.label)),this.entity=this.dataSource.entities.add(w),this.entity.billboard=o.style2Entity(y.style,this.entity.billboard,this.viewer,this.entity),this.entity.label.isTrueGraphic=!![],this.updateAttrForDrawing(),this.entity}},{key:"style2Entity",value:function(y,p){return y&&y.label&&u.style2Entity(y.label,p.label),o.style2Entity(y,p.billboard,this.viewer,p)}},{key:"updateAttrForDrawing",value:function(){}}]),g}(l.DrawPoint);z.DrawVideoProjection=i},8008:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawWall=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=s(e(87647)),o=s(e(88343)),u=e(59575),l=e(92386);function r(i){if(typeof R!="function")return null;var n=new R,h=new R;return(r=function(d){return d?h:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=r(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&A;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?A(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}function c(i){var n=x();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,C.default)(h,i);var n=c(h);function h(g){var d;return(0,D.default)(this,h),g=g||{},d=n.call(this,g),d.type="wall",d._minPointNum=2,d._maxPointNum=9999,d.editClass=l.EditWall,d.attrClass=o,d.maximumHeights=null,d.minimumHeights=null,d}return(0,b.default)(h,[{key:"createFeature",value:function(d){this._positions_draw=[],this._minPointNum_def||(this._minPointNum_def=this._minPointNum),this._maxPointNum_def||(this._maxPointNum_def=this._maxPointNum),d.config?(this._minPointNum=d.config.minPointNum||this._minPointNum_def,this._maxPointNum=d.config.maxPointNum||this._maxPointNum_def):(this._minPointNum=this._minPointNum_def,this._maxPointNum=this._maxPointNum_def),this.maximumHeights=[],this.minimumHeights=[];var y=this,p={wall:o.style2Entity(d.style),attribute:d};return p.wall.positions=new m.CallbackProperty(function(){return y.getDrawPosition()},![]),p.wall.minimumHeights=new m.CallbackProperty(function(){return y.getMinimumHeights()},![]),p.wall.maximumHeights=new m.CallbackProperty(function(){return y.getMaximumHeights()},![]),this.entity=this.dataSource.entities.add(p),this.entity.mark311=this.drawTool.id,this.entity}},{key:"style2Entity",value:function(d,y){return o.style2Entity(d,y.wall)}},{key:"getMaximumHeights",value:function(){return this.maximumHeights}},{key:"getMinimumHeights",value:function(){return this.minimumHeights}},{key:"updateAttrForDrawing",value:function(){var d=this.entity.attribute.style,y=this.getDrawPosition(),p=y.length;this.maximumHeights=new Array(p),this.minimumHeights=new Array(p);for(var w=0;w<p;w++){var S=m.Cartographic.fromCartesian(y[w]).height;this.minimumHeights[w]=S,this.maximumHeights[w]=S+Number(d.extrudedHeight)}}},{key:"finish",value:function(){var d=this.entity;d.editing=this.getEditClass(d),d._positions_draw=this.getDrawPosition(),d.wall.positions=new m.CallbackProperty(function(){return d._positions_draw},![]),d._minimumHeights=this.getMinimumHeights(),d.wall.minimumHeights=new m.CallbackProperty(function(){return d._minimumHeights},![]),d._maximumHeights=this.getMaximumHeights(),d.wall.maximumHeights=new m.CallbackProperty(function(){return d._maximumHeights},![])}}]),h}(u.DrawPolyline);z.DrawWall=a},8292:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.toGeoJSON=z.style2Entity=z.getPositions=z.getCoordinates=void 0;var T=A(e(20314)),D=A(e(42579)),b=m(e(87647)),C=e(36161),f=void 0;function v(s){if(typeof F!="function")return null;var c=new F,x=new F;return(v=function(i){return i?x:c})(s)}function m(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||M(s)!=="object"&&typeof s!="function")return{default:s};var x=v(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&R;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var h=i?R(s,n):null;h&&(h.get||h.set)?Object.defineProperty(a,n,h):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}var o=function(c,x){(0,D.default)(this,f),c=c||{},x==null&&(x={});var a={scaleX:25,scaleY:12,maximumSizeX:25,maximumSizeY:12,maximumSizeZ:15,renderSlice:!![],slice:.36,brightness:1};for(var i in a)Object.hasOwnProperty.call(a,i)&&(c[i]=c[i]||a[i]);return x.scale=new b.Cartesian2(c.scaleX,c.scaleY),x.maximumSize=new b.Cartesian3(c.maximumSizeX,c.maximumSizeY,c.maximumSizeZ),x.slice=c.renderSlice?(0,T.default)(c):-1,x.brightness=c.brightness,x}.bind(void 0);z.style2Entity=o;var u=function(c){return(0,D.default)(this,f),[c.position]}.bind(void 0);z.getPositions=u;var l=function(c){(0,D.default)(this,f);var x=u(c);return(0,C.cartesians2lonlats)(x)}.bind(void 0);z.getCoordinates=l;var r=function(c){(0,D.default)(this,f);var x=l(c);return{type:"Feature",properties:c.attribute||{},geometry:{type:"Point",coordinates:x[0]}}}.bind(void 0);z.toGeoJSON=r},42116:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.toGeoJSON=z.style2Entity=z.getPositions=z.getCoordinates=void 0;var T=A(e(42579)),D=o(e(87647)),b=o(e(36161)),C=e(92672),f=e(84100),v=void 0;function m(c){if(typeof F!="function")return null;var x=new F,a=new F;return(m=function(n){return n?a:x})(c)}function o(c,x){if(!x&&c&&c.__esModule)return c;if(c===null||M(c)!=="object"&&typeof c!="function")return{default:c};var a=m(x);if(a&&a.has(c))return a.get(c);var i={},n=Object.defineProperty&&R;for(var h in c)if(h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)){var g=n?R(c,h):null;g&&(g.get||g.set)?Object.defineProperty(i,h,g):i[h]=c[h]}return i.default=c,a&&a.set(c,i),i}var u=function(x,a){(0,T.default)(this,v),x=x||{};var i;a==null?a={}:i=!![],x.clampToGround&&(Object.hasOwnProperty.call(x,"height")&&delete x.height,Object.hasOwnProperty.call(x,"extrudedHeight")&&delete x.extrudedHeight);for(var n in x){var h=x[n];switch(n){default:a[n]=h;break;case"color":case"opacity":case"outlineOpacity":case"grid_lineCount":case"grid_lineThickness":case"grid_cellAlpha":case"checkerboard_repeat":case"checkerboard_oddcolor":case"stripe_oddcolor":case"stripe_repeat":case"animationDuration":case"animationImage":case"animationRepeatX":case"animationRepeatY":case"animationAxisY":case"animationGradient":case"animationCount":case"randomColor":break;case"outlineColor":a.outlineColor=new D.Color.fromCssColorString(h||x.color||"#FFFF00").withAlpha(D.defaultValue(x.outlineOpacity,D.defaultValue(x.opacity,1)));break;case"extrudedHeight":{var g=0;if(a.hierarchy){var d=l({polygon:a});g=(0,C.getMaxHeight)(d)}a.extrudedHeight=Number(h)+g;break}case"clampToGround":a.perPositionHeight=!h;break;case"stRotation":a.stRotation=D.Math.toRadians(h);break}}if(x.hasOwnProperty("clampToGround")&&i){var y,p;a.hierarchy=(y=a.hierarchy)===null||y===void 0||(p=y.getValue)===null||p===void 0?void 0:p.call(y),x.clampToGround?(a.height=a.extrudedHeight=void 0,a.perPositionHeight=![]):x.clampToGround===![]&&(x.perPositionHeight?a.perPositionHeight=!![]:(a.height=x.height||0,a.perPositionHeight=![]))}return(0,f.setFillMaterial)(a,x),a}.bind(void 0);z.style2Entity=u;var l=function(x,a){var i;if((0,T.default)(this,v),!a&&((i=x._positions_draw)===null||i===void 0?void 0:i.length)>0)return x._positions_draw;var n=x.polygon.hierarchy.getValue();return n instanceof D.PolygonHierarchy?n.positions:n}.bind(void 0);z.getPositions=l;var r=function(x){(0,T.default)(this,v);var a=l(x);return b.cartesians2lonlats(a)}.bind(void 0);z.getCoordinates=r;var s=function(x){(0,T.default)(this,v);var a=r(x),i={type:"Feature",properties:x.attribute||{},geometry:{type:"MultiPoint",coordinates:a}};return i}.bind(void 0);z.toGeoJSON=s},89188:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.toGeoJSON=z.style2Entity=z.getPositions=z.getCoordinates=void 0;var T=A(e(42579)),D=m(e(87647)),b=e(36161),C=e(80823),f=void 0;function v(x){if(typeof F!="function")return null;var a=new F,i=new F;return(v=function(h){return h?i:a})(x)}function m(x,a){if(!a&&x&&x.__esModule)return x;if(x===null||M(x)!=="object"&&typeof x!="function")return{default:x};var i=v(a);if(i&&i.has(x))return i.get(x);var n={},h=Object.defineProperty&&R;for(var g in x)if(g!=="default"&&Object.prototype.hasOwnProperty.call(x,g)){var d=h?R(x,g):null;d&&(d.get||d.set)?Object.defineProperty(n,g,d):n[g]=x[g]}return n.default=x,i&&i.set(x,n),n}var o=function(a,i,n,h){(0,T.default)(this,f),a=a||{},i==null&&(i={scale:1,horizontalOrigin:D.HorizontalOrigin.CENTER,verticalOrigin:D.VerticalOrigin.BOTTOM});var g=function(p){var w=this,S,O,B=a[p];switch(p){default:i[p]=B;break;case"image":if(a.scale=a.scale||1,i.scale=a.scale,typeof B=="string")if(B.match(/^(data|http)/))i[p]=B;else if(B.match(/Assets/))i[p]=B;else try{var k=document.createElement("canvas"),P=k.getContext("2d"),L=new Image;L.src=e(8890)("./".concat(B)),i.scale=1,L.onload=function(){(0,T.default)(this,w);var E,N,I=a.scale*(n?.resolutionScale||window.devicePixelRatio);k.width=E=L.width*I,k.height=N=L.height*I,L.width>0?P.drawImage(L,0,0,E,N):P.drawImage(L,0,0),h.billboard[p]=k}.bind(this)}catch{i[p]=e(33862)}else i[p]=B;break;case"scale":case"scaleByDistance_near":case"scaleByDistance_nearValue":case"scaleByDistance_far":case"scaleByDistance_farValue":case"distanceDisplayCondition_far":case"distanceDisplayCondition_near":break;case"color":case"opacity":i.color=new D.Color.fromCssColorString("#FFFFFF").withAlpha(D.defaultValue(a.opacity,1));break;case"rotation":i.rotation=D.Math.toRadians(B);break;case"scaleByDistance":B?i.scaleByDistance=new D.NearFarScalar(Number(D.defaultValue(a.scaleByDistance_near,1e3)),Number(D.defaultValue(a.scaleByDistance_nearValue,1)),Number(D.defaultValue(a.scaleByDistance_far,1e6)),Number(D.defaultValue(a.scaleByDistance_farValue,.1))):i.scaleByDistance=null;break;case"distanceDisplayCondition":B?i.distanceDisplayCondition=new D.DistanceDisplayCondition(Number(D.defaultValue(a.distanceDisplayCondition_near,0)),Number(D.defaultValue(a.distanceDisplayCondition_far,1e5))):i.distanceDisplayCondition=null;break;case"clampToGround":B?i.heightReference=D.HeightReference.CLAMP_TO_GROUND:i.heightReference=D.HeightReference.NONE;break;case"heightReference":switch(B){case"NONE":i.heightReference=D.HeightReference.NONE;break;case"CLAMP_TO_GROUND":i.heightReference=D.HeightReference.CLAMP_TO_GROUND;break;case"RELATIVE_TO_GROUND":i.heightReference=D.HeightReference.RELATIVE_TO_GROUND;break;default:i.heightReference=B;break}break;case"horizontalOrigin":switch(B){case"CENTER":i.horizontalOrigin=D.HorizontalOrigin.CENTER;break;case"LEFT":i.horizontalOrigin=D.HorizontalOrigin.LEFT;break;case"RIGHT":i.horizontalOrigin=D.HorizontalOrigin.RIGHT;break;default:i.horizontalOrigin=B;break}break;case"verticalOrigin":switch(B){case"CENTER":i.verticalOrigin=D.VerticalOrigin.CENTER;break;case"TOP":i.verticalOrigin=D.VerticalOrigin.TOP;break;case"BOTTOM":i.verticalOrigin=D.VerticalOrigin.BOTTOM;break;default:i.verticalOrigin=B;break}break;case"visibleDepth":a.visibleDepth=(S=a.visibleDepth)!==null&&S!==void 0?S:50,i.disableDepthTestDistance=a.visibleDepth/100*((O=a.distanceDisplayCondition_far)!==null&&O!==void 0?O:2e3);break;case"bounce":B&&h?!h.isbounce&&u(n,h):!B&&h&&h.isbounce==!![]&&l(n,h);break}};for(var d in a)g(d);return i}.bind(void 0);z.style2Entity=o;var u=function(a,i){(0,T.default)(this,f);var n=(0,b.cartesian2lonlat)(i.position.getValue())[2],h={maxHeight:n+50,minHeight:n,heightDelta:.5},g=h.minHeight,d=h.maxHeight,y=h.heightDelta,p=(0,b.cartesian2lonlat)(i.position.getValue())[0],w=(0,b.cartesian2lonlat)(i.position.getValue())[1];a.scene.preUpdate.addEventListener(function(){n+=y,i.position=D.Cartesian3.fromDegrees(p,w,n);var S=i.position.getValue(),O=D.Cartographic.fromCartesian(S,D.Ellipsoid.WGS84);(O.height>=d||O.height<=g)&&(y*=-1)}),i.isbounce=!![]}.bind(void 0),l=function(a,i){(0,T.default)(this,f),a.scene.preUpdate.addEventListener(function(){i.position=i._positions_draw}),i.isbounce=![]}.bind(void 0),r=function(a){return(0,T.default)(this,f),[a.position.getValue((0,C.currentTime)())]}.bind(void 0);z.getPositions=r;var s=function(a){(0,T.default)(this,f);var i=r(a);return(0,b.cartesians2lonlats)(i)}.bind(void 0);z.getCoordinates=s;var c=function(a){(0,T.default)(this,f);var i=s(a);return{type:"Feature",properties:a.attribute||{},geometry:{type:"Point",coordinates:i[0]}}}.bind(void 0);z.toGeoJSON=c},69973:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.EditStop=z.EditStart=z.EditRemovePoint=z.EditMovePoint=z.DrawStart=z.DrawRemovePoint=z.DrawMouseMove=z.DrawCreated=z.DrawAddPoint=void 0;var e="draw-start";z.DrawStart=e;var M="draw-add-point";z.DrawAddPoint=M;var F="draw-remove-lastpoint";z.DrawRemovePoint=F;var R="draw-mouse-move";z.DrawMouseMove=R;var A="draw-created";z.DrawCreated=A;var T="edit-start";z.EditStart=T;var D="edit-move-point";z.EditMovePoint=D;var b="edit-remove-point";z.EditRemovePoint=b;var C="edit-stop";z.EditStop=C},16407:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.plotUtil=void 0;var T=A(e(42579)),D=A(e(5146)),b=A(e(20314)),C=A(e(22466)),f=A(e(4083)),v=o(e(87647));function m(l){if(typeof F!="function")return null;var r=new F,s=new F;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||M(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&R;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?R(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var u=function(l){var r={version:"1.0.0"};r.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},r.PlotUtils={},r.PlotUtils.distance=function(i,n){return Math.sqrt(Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2))},r.PlotUtils.wholeDistance=function(i){for(var n=0,h=0;h<i.length-1;h++)n+=r.PlotUtils.distance(i[h],i[h+1]);return n},r.PlotUtils.getBaseLength=function(i){return Math.pow(r.PlotUtils.wholeDistance(i),.99)},r.PlotUtils.mid=function(i,n){return[(i[0]+n[0])/2,(i[1]+n[1])/2]},r.PlotUtils.getCircleCenterOfThreePoints=function(i,n,h){var g=[(i[0]+n[0])/2,(i[1]+n[1])/2],d=[g[0]-i[1]+n[1],g[1]+i[0]-n[0]],y=[(i[0]+h[0])/2,(i[1]+h[1])/2],p=[y[0]-i[1]+h[1],y[1]+i[0]-h[0]];return r.PlotUtils.getIntersectPoint(g,d,y,p)},r.PlotUtils.getIntersectPoint=function(i,n,h,g){if(i[1]==n[1]){var d=(g[0]-h[0])/(g[1]-h[1]),y=d*(i[1]-h[1])+h[0],p=i[1];return[y,p]}if(h[1]==g[1]){var w=(n[0]-i[0])/(n[1]-i[1]);return y=w*(h[1]-i[1])+i[0],p=h[1],[y,p]}return w=(n[0]-i[0])/(n[1]-i[1]),d=(g[0]-h[0])/(g[1]-h[1]),p=(w*i[1]-i[0]-d*h[1]+h[0])/(w-d),y=w*p-w*i[1]+i[0],[y,p]},r.PlotUtils.getAzimuth=function(i,n){var h,g=Math.asin(Math.abs(n[1]-i[1])/r.PlotUtils.distance(i,n));return n[1]>=i[1]&&n[0]>=i[0]?h=g+Math.PI:n[1]>=i[1]&&n[0]<i[0]?h=r.Constants.TWO_PI-g:n[1]<i[1]&&n[0]<i[0]?h=g:n[1]<i[1]&&n[0]>=i[0]&&(h=Math.PI-g),h},r.PlotUtils.getAngleOfThreePoints=function(i,n,h){var g=r.PlotUtils.getAzimuth(n,i)-r.PlotUtils.getAzimuth(n,h);return 0>g?g+r.Constants.TWO_PI:g},r.PlotUtils.isClockWise=function(i,n,h){return(h[1]-i[1])*(n[0]-i[0])>(n[1]-i[1])*(h[0]-i[0])},r.PlotUtils.getPointOnLine=function(i,n,h){var g=n[0]+i*(h[0]-n[0]),d=n[1]+i*(h[1]-n[1]);return[g,d]},r.PlotUtils.getCubicValue=function(i,n,h,g,d){i=Math.max(Math.min(i,1),0);var y=1-i,p=i*i,w=p*i,S=y*y,O=S*y,B=O*n[0]+3*S*i*h[0]+3*y*p*g[0]+w*d[0],k=O*n[1]+3*S*i*h[1]+3*y*p*g[1]+w*d[1];return[B,k]},r.PlotUtils.getThirdPoint=function(i,n,h,g,d){var y=r.PlotUtils.getAzimuth(i,n),p=d?y+h:y-h,w=g*Math.cos(p),S=g*Math.sin(p);return[n[0]+w,n[1]+S]},r.PlotUtils.getArcPoints=function(i,n,h,g){var d,y,p=[],w=g-h;w=0>w?w+r.Constants.TWO_PI:w;for(var S=0;S<=r.Constants.FITTING_COUNT;S++){var O=h+w*S/r.Constants.FITTING_COUNT;d=i[0]+n*Math.cos(O),y=i[1]+n*Math.sin(O),p.push([d,y])}return p},r.PlotUtils.getBisectorNormals=function(i,n,h,g){var d=r.PlotUtils.getNormal(n,h,g),y=Math.sqrt(d[0]*d[0]+d[1]*d[1]),p=d[0]/y,w=d[1]/y,S=r.PlotUtils.distance(n,h),O=r.PlotUtils.distance(h,g);if(y>r.Constants.ZERO_TOLERANCE)if(r.PlotUtils.isClockWise(n,h,g)){var B=i*S,k=h[0]-B*w,P=h[1]+B*p,L=[k,P];B=i*O,k=h[0]+B*w,P=h[1]-B*p;var E=[k,P]}else B=i*S,k=h[0]+B*w,P=h[1]-B*p,L=[k,P],B=i*O,k=h[0]-B*w,P=h[1]+B*p,E=[k,P];else k=h[0]+i*(n[0]-h[0]),P=h[1]+i*(n[1]-h[1]),L=[k,P],k=h[0]+i*(g[0]-h[0]),P=h[1]+i*(g[1]-h[1]),E=[k,P];return[L,E]},r.PlotUtils.getNormal=function(i,n,h){var g=i[0]-n[0],d=i[1]-n[1],y=Math.sqrt(g*g+d*d);g/=y,d/=y;var p=h[0]-n[0],w=h[1]-n[1],S=Math.sqrt(p*p+w*w);p/=S,w/=S;var O=g+p,B=d+w;return[O,B]},r.PlotUtils.getCurvePoints=function(i,n){for(var h=r.PlotUtils.getLeftMostControlPoint(n),g=[h],d=0;d<n.length-2;d++){var y=n[d],p=n[d+1],w=n[d+2],S=r.PlotUtils.getBisectorNormals(i,y,p,w);g=(0,D.default)(g).call(g,S)}var O=r.PlotUtils.getRightMostControlPoint(n);g.push(O);var B=[];for(d=0;d<n.length-1;d++){y=n[d],p=n[d+1],B.push(y);for(var i=0;i<r.Constants.FITTING_COUNT;i++){var k=r.PlotUtils.getCubicValue(i/r.Constants.FITTING_COUNT,y,g[2*d],g[2*d+1],p);B.push(k)}B.push(p)}return B},r.PlotUtils.getLeftMostControlPoint=function(i){var n=i[0],h=i[1],g=i[2],d=r.PlotUtils.getBisectorNormals(0,n,h,g),y=d[0],p=r.PlotUtils.getNormal(n,h,g),w=Math.sqrt(p[0]*p[0]+p[1]*p[1]);if(w>r.Constants.ZERO_TOLERANCE)var S=r.PlotUtils.mid(n,h),O=n[0]-S[0],B=n[1]-S[1],k=r.PlotUtils.distance(n,h),P=2/k,L=-P*B,E=P*O,N=L*L-E*E,I=2*L*E,G=E*E-L*L,W=y[0]-S[0],Z=y[1]-S[1],U=S[0]+N*W+I*Z,H=S[1]+I*W+G*Z;else U=n[0]+t*(h[0]-n[0]),H=n[1]+t*(h[1]-n[1]);return[U,H]},r.PlotUtils.getRightMostControlPoint=function(i){var n=i.length,h=i[n-3],g=i[n-2],d=i[n-1],y=r.PlotUtils.getBisectorNormals(0,h,g,d),p=y[1],w=r.PlotUtils.getNormal(h,g,d),S=Math.sqrt(w[0]*w[0]+w[1]*w[1]);if(S>r.Constants.ZERO_TOLERANCE)var O=r.PlotUtils.mid(g,d),B=d[0]-O[0],k=d[1]-O[1],P=r.PlotUtils.distance(g,d),L=2/P,E=-L*k,N=L*B,I=E*E-N*N,G=2*E*N,W=N*N-E*E,Z=p[0]-O[0],U=p[1]-O[1],H=O[0]+I*Z+G*U,V=O[1]+G*Z+W*U;else H=d[0]+t*(g[0]-d[0]),V=d[1]+t*(g[1]-d[1]);return[H,V]},r.PlotUtils.getBezierPoints=function(i){if(i.length<=2)return i;for(var n=[],h=i.length-1,g=0;1>=g;g+=.01){for(var d=0,y=0,p=0;h>=p;p++){var w=r.PlotUtils.getBinomialFactor(h,p),S=Math.pow(g,p),O=Math.pow(1-g,h-p);d+=w*S*O*i[p][0],y+=w*S*O*i[p][1]}n.push([d,y])}return n.push(i[h]),n},r.PlotUtils.getBinomialFactor=function(i,n){return r.PlotUtils.getFactorial(i)/(r.PlotUtils.getFactorial(n)*r.PlotUtils.getFactorial(i-n))},r.PlotUtils.getFactorial=function(i){if(1>=i)return 1;if(i==2)return 2;if(i==3)return 6;if(i==4)return 24;if(i==5)return 120;for(var n=1,h=1;i>=h;h++)n*=h;return n},r.PlotUtils.getQBSplinePoints=function(i){if(i.length<=2)return i;var n=2,h=[],g=i.length-n-1;h.push(i[0]);for(var d=0;g>=d;d++)for(var y=0;1>=y;y+=.05){for(var p=0,w=0,S=0;n>=S;S++){var O=r.PlotUtils.getQuadricBSplineFactor(S,y);p+=O*i[d+S][0],w+=O*i[d+S][1]}h.push([p,w])}return h.push(i[i.length-1]),h},r.PlotUtils.getQuadricBSplineFactor=function(i,n){return i==0?Math.pow(n-1,2)/2:i==1?(-2*Math.pow(n,2)+2*n+1)/2:i==2?Math.pow(n,2)/2:0};var s={type:"doublearrow",headHeightFactor:.25,headWidthFactor:.3,neckHeightFactor:.85,fixPointCount:4,neckWidthFactor:.15},c={headHeightFactor:.18,headWidthFactor:.3,neckHeightFactor:.85,neckWidthFactor:.15,tailWidthFactor:.1,headTailFactor:.8,swallowTailFactor:0},x={tailWidthFactor:.05,neckWidthFactor:.2,headWidthFactor:.25,headAngle:Math.PI/8.5,neckAngle:Math.PI/13},a={version:"1.0.0",createTime:"2018.9.27",author:"muyao"};return a.fineArrowDefualParam=x,a.tailedAttackArrowDefualParam=c,a.doubleArrowDefualParam=s,a.algorithm={},a.algorithm.doubleArrow=function(i){this.connPoint=null,this.tempPoint4=null,this.points=i;var n={controlPoint:null,polygonalPoint:null},h=i.length;if(!(2>h)){if(h==2)return i;var g=this.points[0],d=this.points[1],y=this.points[2],h=i.length;h==3?this.tempPoint4=a.algorithm.getTempPoint4(g,d,y):this.tempPoint4=this.points[3],h==3||h==4?this.connPoint=r.PlotUtils.mid(g,d):this.connPoint=this.points[4];var p,w;r.PlotUtils.isClockWise(g,d,y)?(p=a.algorithm.getArrowPoints(g,this.connPoint,this.tempPoint4,!1),w=a.algorithm.getArrowPoints(this.connPoint,d,y,!0)):(p=a.algorithm.getArrowPoints(d,this.connPoint,y,!1),w=a.algorithm.getArrowPoints(this.connPoint,g,this.tempPoint4,!0));var S=p.length,O=(S-5)/2,B=(0,b.default)(p).call(p,0,O),k=(0,b.default)(p).call(p,O,O+5),P=(0,b.default)(p).call(p,O+5,S),L=(0,b.default)(w).call(w,0,O),E=(0,b.default)(w).call(w,O,O+5),N=(0,b.default)(w).call(w,O+5,S);L=r.PlotUtils.getBezierPoints(L);var I=r.PlotUtils.getBezierPoints((0,D.default)(N).call(N,(0,b.default)(B).call(B,1)));P=r.PlotUtils.getBezierPoints(P);var G=(0,D.default)(L).call(L,E,I,k,P),W=a.algorithm.array2Dto1D(G);n.controlPoint=[g,d,y,this.tempPoint4,this.connPoint],n.polygonalPoint=v.Cartesian3.fromDegreesArray(W)}return n},a.algorithm.getTempPoint4=function(i,n,h,g){var d;this.type=s.type,this.headHeightFactor=s.headHeightFactor,this.headWidthFactor=s.headWidthFactor,this.neckHeightFactor=s.neckHeightFactor,this.neckWidthFactor=s.neckWidthFactor;var y=r.PlotUtils.mid(i,n),p=r.PlotUtils.distance(y,h),w=r.PlotUtils.getThirdPoint(h,y,0,.3*p,!0),S=r.PlotUtils.getThirdPoint(h,y,0,.5*p,!0);w=r.PlotUtils.getThirdPoint(y,w,r.Constants.HALF_PI,p/5,g),S=r.PlotUtils.getThirdPoint(y,S,r.Constants.HALF_PI,p/4,g);var O=[y,w,S,h],B=a.algorithm.getArrowHeadPoints(O,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),k=B[0],P=B[4],L=r.PlotUtils.distance(i,n)/r.PlotUtils.getBaseLength(O)/2,E=a.algorithm.getArrowBodyPoints(O,k,P,L),N=E.length,I=(0,b.default)(E).call(E,0,N/2),G=(0,b.default)(E).call(E,N/2,N);return I.push(k),G.push(P),I=I.reverse(),I.push(n),G=G.reverse(),G.push(i),(0,D.default)(d=I.reverse()).call(d,B,G)},a.algorithm.array2Dto1D=function(i){var n=[];return i.forEach(function(h){n.push(h[0]),n.push(h[1])}),n},a.algorithm.getArrowPoints=function(i,n,h,g){var d;this.type=s.type,this.headHeightFactor=s.headHeightFactor,this.headWidthFactor=s.headWidthFactor,this.neckHeightFactor=s.neckHeightFactor,this.neckWidthFactor=s.neckWidthFactor;var y=r.PlotUtils.mid(i,n),p=r.PlotUtils.distance(y,h),w=r.PlotUtils.getThirdPoint(h,y,0,.3*p,!0),S=r.PlotUtils.getThirdPoint(h,y,0,.5*p,!0);w=r.PlotUtils.getThirdPoint(y,w,r.Constants.HALF_PI,p/5,g),S=r.PlotUtils.getThirdPoint(y,S,r.Constants.HALF_PI,p/4,g);var O=[y,w,S,h],B=a.algorithm.getArrowHeadPoints(O,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),k=B[0],P=B[4],L=r.PlotUtils.distance(i,n)/r.PlotUtils.getBaseLength(O)/2,E=a.algorithm.getArrowBodyPoints(O,k,P,L),N=E.length,I=(0,b.default)(E).call(E,0,N/2),G=(0,b.default)(E).call(E,N/2,N);return I.push(k),G.push(P),I=I.reverse(),I.push(n),G=G.reverse(),G.push(i),(0,D.default)(d=I.reverse()).call(d,B,G)},a.algorithm.getArrowHeadPoints=function(i,n,h){this.type=s.type,this.headHeightFactor=s.headHeightFactor,this.headWidthFactor=s.headWidthFactor,this.neckHeightFactor=s.neckHeightFactor,this.neckWidthFactor=s.neckWidthFactor;var g=r.PlotUtils.getBaseLength(i),d=g*this.headHeightFactor,y=i[i.length-1],p=(r.PlotUtils.distance(n,h),d*this.headWidthFactor),w=d*this.neckWidthFactor,S=d*this.neckHeightFactor,O=r.PlotUtils.getThirdPoint(i[i.length-2],y,0,d,!0),B=r.PlotUtils.getThirdPoint(i[i.length-2],y,0,S,!0),k=r.PlotUtils.getThirdPoint(y,O,r.Constants.HALF_PI,p,!1),P=r.PlotUtils.getThirdPoint(y,O,r.Constants.HALF_PI,p,!0),L=r.PlotUtils.getThirdPoint(y,B,r.Constants.HALF_PI,w,!1),E=r.PlotUtils.getThirdPoint(y,B,r.Constants.HALF_PI,w,!0);return[L,k,y,P,E]},a.algorithm.getArrowBodyPoints=function(i,n,h,g){for(var d=r.PlotUtils.wholeDistance(i),y=r.PlotUtils.getBaseLength(i),p=y*g,w=r.PlotUtils.distance(n,h),S=(p-w)/2,O=0,B=[],k=[],P=1;P<i.length-1;P++){var L=r.PlotUtils.getAngleOfThreePoints(i[P-1],i[P],i[P+1])/2;O+=r.PlotUtils.distance(i[P-1],i[P]);var E=(p/2-O/d*S)/Math.sin(L),N=r.PlotUtils.getThirdPoint(i[P-1],i[P],Math.PI-L,E,!0),I=r.PlotUtils.getThirdPoint(i[P-1],i[P],L,E,!1);B.push(N),k.push(I)}return(0,D.default)(B).call(B,k)},a.algorithm.getTempPoint4=function(i,n,h){var g,d,y,p,w=r.PlotUtils.mid(i,n),S=r.PlotUtils.distance(w,h),O=r.PlotUtils.getAngleOfThreePoints(i,w,h);return O<r.Constants.HALF_PI?(d=S*Math.sin(O),y=S*Math.cos(O),p=r.PlotUtils.getThirdPoint(i,w,r.Constants.HALF_PI,d,!1),g=r.PlotUtils.getThirdPoint(w,p,r.Constants.HALF_PI,y,!0)):O>=r.Constants.HALF_PI&&O<Math.PI?(d=S*Math.sin(Math.PI-O),y=S*Math.cos(Math.PI-O),p=r.PlotUtils.getThirdPoint(i,w,r.Constants.HALF_PI,d,!1),g=r.PlotUtils.getThirdPoint(w,p,r.Constants.HALF_PI,y,!1)):O>=Math.PI&&O<1.5*Math.PI?(d=S*Math.sin(O-Math.PI),y=S*Math.cos(O-Math.PI),p=r.PlotUtils.getThirdPoint(i,w,r.Constants.HALF_PI,d,!0),g=r.PlotUtils.getThirdPoint(w,p,r.Constants.HALF_PI,y,!0)):(d=S*Math.sin(2*Math.PI-O),y=S*Math.cos(2*Math.PI-O),p=r.PlotUtils.getThirdPoint(i,w,r.Constants.HALF_PI,d,!0),g=r.PlotUtils.getThirdPoint(w,p,r.Constants.HALF_PI,y,!1)),g},a.algorithm.tailedAttackArrow=function(i){i=a.algorithm.dereplication(i),this.tailWidthFactor=c.tailWidthFactor,this.swallowTailFactor=c.swallowTailFactor,this.swallowTailPnt=c.swallowTailPnt;var n={controlPoint:null,polygonalPoint:null};n.controlPoint=i;var h=i.length;if(!(2>h)){var g,d,y;if(i.length==2)return n.polygonalPoint=i,n;var p=i,w=p[0],S=p[1];r.PlotUtils.isClockWise(p[0],p[1],p[2])&&(w=p[1],S=p[0]);var O=r.PlotUtils.mid(w,S),B=(0,D.default)(g=[O]).call(g,(0,b.default)(p).call(p,2)),k=a.algorithm.getAttackArrowHeadPoints(B,w,S,c),P=k[0],L=k[4],E=r.PlotUtils.distance(w,S),N=r.PlotUtils.getBaseLength(B),I=N*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=r.PlotUtils.getThirdPoint(B[1],B[0],0,I,!0);var G=E/N,W=a.algorithm.getAttackArrowBodyPoints(B,P,L,G),h=W.length,Z=(0,D.default)(d=[w]).call(d,(0,b.default)(W).call(W,0,h/2));Z.push(P);var U=(0,D.default)(y=[S]).call(y,(0,b.default)(W).call(W,h/2,h)),H=[];U.push(L),Z=r.PlotUtils.getQBSplinePoints(Z),U=r.PlotUtils.getQBSplinePoints(U),H=a.algorithm.array2Dto1D((0,D.default)(Z).call(Z,k,U.reverse(),[this.swallowTailPnt,Z[0]])),n.polygonalPoint=v.Cartesian3.fromDegreesArray(H)}return n},a.algorithm.getAttackArrowHeadPoints=function(i,n,h,g){this.headHeightFactor=g.headHeightFactor,this.headTailFactor=g.headTailFactor,this.headWidthFactor=g.headWidthFactor,this.neckWidthFactor=g.neckWidthFactor,this.neckHeightFactor=g.neckHeightFactor;var d=r.PlotUtils.getBaseLength(i),y=d*this.headHeightFactor,p=i[i.length-1];d=r.PlotUtils.distance(p,i[i.length-2]);var w=r.PlotUtils.distance(n,h);y>w*this.headTailFactor&&(y=w*this.headTailFactor);var S=y*this.headWidthFactor,O=y*this.neckWidthFactor;y=y>d?d:y;var B=y*this.neckHeightFactor,k=r.PlotUtils.getThirdPoint(i[i.length-2],p,0,y,!0),P=r.PlotUtils.getThirdPoint(i[i.length-2],p,0,B,!0),L=r.PlotUtils.getThirdPoint(p,k,r.Constants.HALF_PI,S,!1),E=r.PlotUtils.getThirdPoint(p,k,r.Constants.HALF_PI,S,!0),N=r.PlotUtils.getThirdPoint(p,P,r.Constants.HALF_PI,O,!1),I=r.PlotUtils.getThirdPoint(p,P,r.Constants.HALF_PI,O,!0);return[N,L,p,E,I]},a.algorithm.getAttackArrowBodyPoints=function(i,n,h,g){for(var d=r.PlotUtils.wholeDistance(i),y=r.PlotUtils.getBaseLength(i),p=y*g,w=r.PlotUtils.distance(n,h),S=(p-w)/2,O=0,B=[],k=[],P=1;P<i.length-1;P++){var L=r.PlotUtils.getAngleOfThreePoints(i[P-1],i[P],i[P+1])/2;O+=r.PlotUtils.distance(i[P-1],i[P]);var E=(p/2-O/d*S)/Math.sin(L),N=r.PlotUtils.getThirdPoint(i[P-1],i[P],Math.PI-L,E,!0),I=r.PlotUtils.getThirdPoint(i[P-1],i[P],L,E,!1);B.push(N),k.push(I)}return(0,D.default)(B).call(B,k)},a.algorithm.dereplication=function(i){var n=i[i.length-1],h=![],g=[];return g=(0,C.default)(i).call(i,function(d){if(d[0]!=n[0]&&d[1]!=n[1])return d;h=!![]}),h&&g.push(n),g},a.algorithm.fineArrow=function(i,n){if(!(i.length<2||n.length<2)){var h=i.length==3?i[2]:0,g=n.length==3?n[2]:0,d=x.tailWidthFactor,y=x.neckWidthFactor,p=x.headWidthFactor,w=x.headAngle,S=x.neckAngle,O=[];O[0]=i,O[1]=n;var B=O[0],k=O[1],P=r.PlotUtils.getBaseLength(O),L=P*d,E=P*y,N=P*p,I=r.PlotUtils.getThirdPoint(k,B,r.Constants.HALF_PI,L,!0),G=r.PlotUtils.getThirdPoint(k,B,r.Constants.HALF_PI,L,!1),W=r.PlotUtils.getThirdPoint(B,k,w,N,!1),Z=r.PlotUtils.getThirdPoint(B,k,w,N,!0),U=r.PlotUtils.getThirdPoint(B,k,S,E,!1),H=r.PlotUtils.getThirdPoint(B,k,S,E,!0),V=[];return V.push(I[0],I[1],h,U[0],U[1],g,W[0],W[1],g,k[0],k[1],g,Z[0],Z[1],g,H[0],H[1],g,G[0],G[1],h,B[0],B[1],h),v.Cartesian3.fromDegreesArrayHeights(V)}},a.algorithm.gatheringPlace=function(i){var n=this;if(i.forEach(function(W){return(0,T.default)(this,n),W.length=2}.bind(this)),i.length<2)return[];var h;if(i.length===2){var g=r.PlotUtils.mid(i[0],i[1]),d=r.PlotUtils.distance(i[0],g)/.9,y=r.PlotUtils.getThirdPoint(i[0],g,r.Constants.HALF_PI,d,!![]);i=[i[0],y,i[1]]}var p=r.PlotUtils.mid(i[0],i[2]);i.push(p,i[0],i[1]);for(var w=[],S=void 0,O=void 0,B=void 0,k=[],P=0;P<i.length-2;P++){S=i[P],O=i[P+1],B=i[P+2];var L=r.PlotUtils.getBisectorNormals(.4,S,O,B);w=(0,D.default)(w).call(w,L)}var E=w.length;w=(0,D.default)(h=[w[E-1]]).call(h,(0,b.default)(w).call(w,0,E-1));for(var N=0;N<i.length-2;N++){S=i[N],O=i[N+1],k.push(S);for(var I=0;I<=r.Constants.FITTING_COUNT;I++){var G=r.PlotUtils.getCubicValue(I/r.Constants.FITTING_COUNT,S,w[N*2],w[N*2+1],O);k.push(G)}k.push(O)}return k=(0,f.default)(k).call(k,function(W){return(0,T.default)(this,n),W.length=2,W}.bind(this)),v.Cartesian3.fromDegreesArray(k)},a.algorithm.closedCurve=function(i){var n=this;if(i.forEach(function(I){return(0,T.default)(this,n),I.length=2}.bind(this)),i.length<2)return[];var h;if(i.length===2){var g=r.PlotUtils.mid(i[0],i[1]),d=r.PlotUtils.distance(i[0],g)/.9,y=r.PlotUtils.getThirdPoint(i[0],g,r.Constants.HALF_PI,d,!![]);i=[i[0],y,i[1]]}i.push(i[0],i[1]);for(var p=[],w=[],S=0;S<i.length-2;S++){var O=r.PlotUtils.getBisectorNormals(.4,i[S],i[S+1],i[S+2]);p=(0,D.default)(p).call(p,O)}var B=p.length;p=(0,D.default)(h=[p[B-1]]).call(h,(0,b.default)(p).call(p,0,B-1));for(var k=0;k<i.length-2;k++){var P=i[k],L=i[k+1];w.push(P);for(var E=0;E<=r.Constants.FITTING_COUNT;E++){var N=r.PlotUtils.getCubicValue(E/r.Constants.FITTING_COUNT,P,p[k*2],p[k*2+1],L);w.push(N)}w.push(L)}return w=(0,f.default)(w).call(w,function(I){return(0,T.default)(this,n),I.length=2,I}.bind(this)),v.Cartesian3.fromDegreesArray(w)},a}(window);z.plotUtil=u},10614:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.getAttrForType=z.createDragger=z.PointType=z.PointColor=z.PixelSize=void 0;var T=A(e(42579)),D=v(e(87647)),b=e(70317),C=void 0;function f(s){if(typeof F!="function")return null;var c=new F,x=new F;return(f=function(i){return i?x:c})(s)}function v(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||M(s)!=="object"&&typeof s!="function")return{default:s};var x=f(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&R;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var h=i?R(s,n):null;h&&(h.get||h.set)?Object.defineProperty(a,n,h):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}var m=12;z.PixelSize=m;var o={Control:1,AddMidPoint:2,MoveHeight:3,EditAttr:4,EditRotation:5,MoveAbout:6,MoveAround:7,MoveLevel:8};z.PointType=o;var u={Control:new D.Color.fromCssColorString("#1c197d"),MoveHeight:new D.Color.fromCssColorString("#9500eb"),EditAttr:new D.Color.fromCssColorString("#f73163"),AddMidPoint:new D.Color.fromCssColorString("#04c2c9").withAlpha(.3)};z.PointColor=u;var l=function(c,x){switch((0,T.default)(this,C),c){case o.AddMidPoint:x.color=u.AddMidPoint,x.outlineColor=new D.Color.fromCssColorString("#ffffff").withAlpha(.4);break;case o.MoveHeight:x.color=u.MoveHeight;break;case o.EditAttr:x.color=u.EditAttr;break;case o.Control:default:x.color=u.Control;break}return x}.bind(void 0);z.getAttrForType=l;var r=function(c,x){(0,T.default)(this,C);var a;if(x.dragger)a=x.dragger;else{var i={scale:1,pixelSize:m,outlineColor:new D.Color.fromCssColorString("#ffffff").withAlpha(.5),outlineWidth:2,scaleByDistance:new D.NearFarScalar(1e3,1,1e6,.5),disableDepthTestDistance:Number.POSITIVE_INFINITY};i=l(x.type,i),a=c.entities.add({position:D.defaultValue(x.position,D.Cartesian3.ZERO),point:i,draw_tooltip:x.tooltip||b.message.dragger.def})}return a._isDragger=!![],a.isDrawEntity||(a._noMousePosition=!![]),a._pointType=x.type||o.Control,a.onDragStart=D.defaultValue(x.onDragStart,null),a.onDrag=D.defaultValue(x.onDrag,null),a.onDragEnd=D.defaultValue(x.onDragEnd,null),a.onRightDown=D.defaultValue(x.onRightDown,null),a.onRightUp=D.defaultValue(x.onRightUp,null),a}.bind(void 0);z.createDragger=r},8817:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditBase=void 0;var D=T(e(69033)),b=T(e(42579)),C=T(e(22777)),f=T(e(42762)),v=x(e(87647)),m=x(e(69973)),o=x(e(36161)),u=x(e(10614)),l=e(79651),r=e(70317),s=e(92672);function c(y){if(typeof R!="function")return null;var p=new R,w=new R;return(c=function(O){return O?w:p})(y)}function x(y,p){if(!p&&y&&y.__esModule)return y;if(y===null||F(y)!=="object"&&typeof y!="function")return{default:y};var w=c(p);if(w&&w.has(y))return w.get(y);var S={},O=Object.defineProperty&&A;for(var B in y)if(B!=="default"&&Object.prototype.hasOwnProperty.call(y,B)){var k=O?A(y,B):null;k&&(k.get||k.set)?Object.defineProperty(S,B,k):S[B]=y[B]}return S.default=y,w&&w.set(y,S),S}var a=v.Color.DARKORANGE.clone(),i=v.Color.DEEPSKYBLUE.clone(),n=v.Color.RED.clone(),h=function(){function y(){var p=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;(0,C.default)(this,y),this.step=w,this.timer=null,this.callback=function(){(0,b.default)(this,p),M.warn("\u8BF7\u8BBE\u7F6E\u9632\u6296\u7684\u56DE\u8C03\u51FD\u6570")}.bind(this)}return(0,f.default)(y,[{key:"active",value:function(w){var S=this;clearTimeout(this.timer),this.callback=w||this.callback,this.timer=setTimeout(function(){(0,b.default)(this,S),this.callback()}.bind(this),this.step)}}]),y}(),g=new h,d=l.Class.extend({_dataSource:null,_minPointNum:1,_maxPointNum:9999,initialize:function(p){var w=p.entity,S=p.viewer,O=p.dataSource;this.entity=w,this.viewer=S,this.dataSource=O,this._positions_draw=w._positions_draw,this.draggers=[]},fire:function(p,w,S){this._fire&&this._fire(p,w,S)},formatNum:function(p,w){return o.formatNum(p,w)},setCursor:function(p){this.viewer._container.style.cursor=p?"crosshair":""},activate:function(){var p;return this._enabled?this:(this._enabled=!![],this.entity.inProgress=!![],this.getPositionsFromEntity(),this.changePositionsToCallback(),this.bindDraggers(),this.bindEvent(),this.fire(m.EditStart,{drawtype:(p=this.entity.attribute)===null||p===void 0?void 0:p.drawtype,entity:this.entity,geojson:this.toGeoJSON(this.entity)}),this)},getPositionsFromEntity:function(){this._positions_draw=this.entity._positions_draw},disable:function(){var p;return this._enabled?(this._enabled=![],this.destroyEvent(),this.destroyDraggers(),this.finish(),this.entity.inProgress=![],this.fire(m.EditStop,{drawtype:(p=this.entity.attribute)===null||p===void 0?void 0:p.drawtype,entity:this.entity}),this.tooltip.setVisible(![]),this):this},changePositionsToCallback:function(){},finish:function(){},bindEvent:function(){var p=this,w=new v.BoundingSphere,S=new v.Cartesian3,O=new v.ScreenSpaceEventHandler(this.viewer.canvas);O.dragger=null;var B,k=![];O.setInputAction(function(P){var L=p.viewer.scene.pick(P.position);if(v.defined(L)){var E=L.id||L.primitive.id||L.primitive;if(E&&v.defaultValue(E._isDragger,![])&&(p.viewer.scene.screenSpaceCameraController.enableRotate=![],p.viewer.scene.screenSpaceCameraController.enableTilt=![],p.viewer.scene.screenSpaceCameraController.enableTranslate=![],p.viewer.scene.screenSpaceCameraController.enableInputs=![],p.viewer.mars&&p.viewer.mars.popup.close(E),k=!![],O.dragger=E,(O.dragger.point||O.dragger.ellipsoid)&&(O.dragger.show=![]),p.setCursor(!![]),O.dragger.onDragStart)){M.warn("points have been added");var N=O.dragger.position;N&&N.getValue?N=N.getValue(p.viewer.clock.currentTime):N=(0,s.getCurrentMousePosition)(p.viewer.scene,P.position),O.dragger.onDragStart(O.dragger,N)}}},v.ScreenSpaceEventType.LEFT_DOWN),O.setInputAction(function(P){var L=p.viewer.scene.pick(P.position);if(v.defined(L)){var E=L.id||L.primitive.id||L.primitive;if(E!=null&&E._isDragger&&(p.viewer.scene.screenSpaceCameraController.enableRotate=![],p.viewer.scene.screenSpaceCameraController.enableTilt=![],p.viewer.scene.screenSpaceCameraController.enableTranslate=![],p.viewer.scene.screenSpaceCameraController.enableInputs=![],p.viewer.mars&&p.viewer.mars.popup.close(E),O.dragger=E,p.setCursor(!![]),O.dragger.onRightDown)){var N=O.dragger.position;N&&N.getValue&&(N=N.getValue(p.viewer.clock.currentTime)),O.dragger.onRightDown(O.dragger,N)}}},v.ScreenSpaceEventType.RIGHT_DOWN),O.setInputAction(function(P){var L=this;if(B&&!k)switch(B.draggerName){case"arrow_horizontal":case"arrow_vertical":{B.appearance.material.uniforms.color=i,B=void 0;break}case"circle":{B.appearance.material.uniforms.color=a,B=void 0;break}case"plane":{B.appearance.material.uniforms.color=a,B=void 0;break}default:B=void 0}var E=p.viewer.scene.pick(P.endPosition);if(v.defined(E)){var N=E.id||E.primitive.id||E.primitive;if(N!=null&&N._isDragger&&!k)switch(N.draggerName){case"arrow_horizontal":case"arrow_vertical":{N.appearance.material.uniforms.color=n,B=N;break}case"circle":{N.appearance.material.uniforms.color=n,B=N;break}case"plane":{N.appearance.material.uniforms.color=n,B=N;break}default:B=void 0}}var I=O.dragger;if(I)switch(I._pointType){case u.PointType.MoveHeight:{var G=P.endPosition.y-P.startPosition.y,W=I.position;W&&W.getValue&&(W=W.getValue(p.viewer.clock.currentTime));var Z=new v.EllipsoidTangentPlane(W);w.center=W,w.radius=1;var U=p.viewer.scene.frameState.camera.getPixelSize(w,p.viewer.scene.frameState.context.drawingBufferWidth,p.viewer.scene.frameState.context.drawingBufferHeight)*1.5;v.Cartesian3.multiplyByScalar(Z.zAxis,-G*U,S);var H=v.Cartesian3.clone(W);v.Cartesian3.add(W,S,H),I.position=H,I.onDrag&&I.onDrag(I,H,W),p.updateAttrForEditing();break}case u.PointType.MoveAbout:{var V=P.endPosition.x-P.startPosition.x,Y=P.endPosition.y-P.startPosition.y,$=I.position;$&&$.getValue&&($=$.getValue(p.viewer.clock.currentTime));var K=new v.EllipsoidTangentPlane($);w.center=$,w.radius=1;var J=p.viewer.scene.frameState.camera.getPixelSize(w,p.viewer.scene.frameState.context.drawingBufferWidth,p.viewer.scene.frameState.context.drawingBufferHeight)*1,Q=(0,s.getCameraView)(p.viewer).heading;Q>45&&Q<=135?v.Cartesian3.multiplyByScalar(K.xAxis,-Y*J,S):Q>135&&Q<=225?v.Cartesian3.multiplyByScalar(K.xAxis,-V*J,S):Q>225&&Q<=315?v.Cartesian3.multiplyByScalar(K.xAxis,Y*J,S):v.Cartesian3.multiplyByScalar(K.xAxis,V*J,S);var et=v.Cartesian3.clone($);v.Cartesian3.add($,S,et),I.position=et,I.onDrag&&I.onDrag(I,et,$),p.updateAttrForEditing();break}case u.PointType.MoveAround:{var nt=P.endPosition.x-P.startPosition.x,st=P.endPosition.y-P.startPosition.y,ut=I.position;ut&&ut.getValue&&(ut=ut.getValue(p.viewer.clock.currentTime));var rt=new v.EllipsoidTangentPlane(ut);w.center=ut,w.radius=1;var ht=p.viewer.scene.frameState.camera.getPixelSize(w,p.viewer.scene.frameState.context.drawingBufferWidth,p.viewer.scene.frameState.context.drawingBufferHeight)*1,Pt=(0,s.getCameraView)(p.viewer).heading;Pt>45&&Pt<=135?v.Cartesian3.multiplyByScalar(rt.yAxis,-nt*ht,S):Pt>135&&Pt<=225?v.Cartesian3.multiplyByScalar(rt.yAxis,st*ht,S):Pt>225&&Pt<=315?v.Cartesian3.multiplyByScalar(rt.yAxis,nt*ht,S):v.Cartesian3.multiplyByScalar(rt.yAxis,-st*ht,S);var wt=v.Cartesian3.clone(ut);v.Cartesian3.add(ut,S,wt),I.position=wt,I.onDrag&&I.onDrag(I,wt,ut),p.updateAttrForEditing();break}case u.PointType.MoveLevel:{p.tooltip.showAt(P.endPosition,r.message.edit.end);var At=(0,s.getCurrentMousePosition)(p.viewer.scene,P.endPosition,p.entity),Nt=p.viewer.camera.getPickRay(P.endPosition);At=p.viewer.scene.globe.pick(Nt,p.viewer.scene,new v.Cartesian3),At&&(I.position=At,I.onDrag&&I.onDrag(I,At),p.updateAttrForEditing());break}default:{p.tooltip.showAt(P.endPosition,r.message.edit.end);var Lt=(0,s.getCurrentMousePosition)(p.viewer.scene,P.endPosition,p.entity);Lt&&(I.position=Lt,I.onDrag&&I.onDrag(I,Lt),p.updateAttrForEditing());break}}else{if(p.entity.attribute.attr.isClip)return;g.active(function(){(0,b.default)(this,L),p.tooltip.setVisible(![]);var Rt=p.viewer.scene.pick(P.endPosition);if(v.defined(Rt)){var Tt=Rt.id;Tt&&v.defaultValue(Tt._isDragger,![])&&Tt.draw_tooltip&&Tt.movepoint&&u.PointType.Control===Tt._pointType&&p._positions_draw&&p._positions_draw.length&&p._positions_draw.length>p._minPointNum&&p.tooltip.showAt(P.endPosition)}}.bind(this))}},v.ScreenSpaceEventType.MOUSE_MOVE),O.setInputAction(function(){var P=O.dragger;if(P){p.setCursor(![]),P.show=!![];var L=P.position;L&&L.getValue&&(L=L.getValue(p.viewer.clock.currentTime)),P.onDragEnd&&P.onDragEnd(P,L);var E=p.entity;p.entity.attribute.drawtype==="point"&&(E=P);var N=p.toGeoJSON(E);p.fire(m.EditMovePoint,{geojson:N,drawtype:p.entity.attribute.drawtype,entity:E,position:L}),O.dragger=null,p.viewer.scene.screenSpaceCameraController.enableRotate=!![],p.viewer.scene.screenSpaceCameraController.enableTilt=!![],p.viewer.scene.screenSpaceCameraController.enableTranslate=!![],p.viewer.scene.screenSpaceCameraController.enableInputs=!![]}k=![]},v.ScreenSpaceEventType.LEFT_UP),O.setInputAction(function(){var P=O.dragger;if(P){p.setCursor(![]),P.show=!![];var L=P.position;L&&L.getValue&&(L=L.getValue(p.viewer.clock.currentTime)),P.onRightUp&&P.onRightUp(O.dragger,L),p.entity.attribute.attr.onDragEndCallback&&p.entity.attribute.attr.onDragEndCallback(p.entity);var E=p.entity;p.entity.attribute.drawtype==="point"&&(E=P);var N=p.toGeoJSON(E);p.fire(m.EditMovePoint,{geojson:N,drawtype:p.entity.attribute.drawtype,entity:E,position:L}),O.dragger=null,p.viewer.scene.screenSpaceCameraController.enableRotate=!![],p.viewer.scene.screenSpaceCameraController.enableTilt=!![],p.viewer.scene.screenSpaceCameraController.enableTranslate=!![],p.viewer.scene.screenSpaceCameraController.enableInputs=!![]}},v.ScreenSpaceEventType.RIGHT_UP),O.setInputAction(function(P){var L=p.viewer.scene.pick(P.position);if(v.defined(L)){var E=L.id;if(E&&v.defaultValue(E._isDragger,![])&&u.PointType.Control===E._pointType){var N=p.deletePointForDragger(E,P.position);if(N){var I=p.toGeoJSON(p.entity);p.fire(m.EditRemovePoint,{geojson:I,drawtype:p.entity.attribute.drawtype,entity:p.entity})}}}},v.ScreenSpaceEventType.RIGHT_CLICK),this.draggerHandler=O},destroyEvent:function(){this.viewer.scene.screenSpaceCameraController.enableRotate=!![],this.viewer.scene.screenSpaceCameraController.enableTilt=!![],this.viewer.scene.screenSpaceCameraController.enableTranslate=!![],this.viewer.scene.screenSpaceCameraController.enableInputs=!![],this.setCursor(![]),this.draggerHandler&&(this.draggerHandler.dragger&&(this.draggerHandler.dragger.show=!![]),this.draggerHandler.destroy(),this.draggerHandler=null)},bindDraggers:function(){},updateDraggers:function(){if(!this._enabled)return this;this.destroyDraggers(),this.bindDraggers()},destroyDraggers:function(){for(var p=0,w=this.draggers.length;p<w;p++)this.dataSource.entities.remove(this.draggers[p]);this.viewer.scene.primitives.remove(this.draggers_pri),this.draggers_pri=null,this.draggers=[]},deletePointForDragger:function(p,w){if(this._positions_draw){if(this._positions_draw.length-1<this._minPointNum)return this.tooltip.showAt(w,r.message.del.min+this._minPointNum),![];var S=p.index;if(S>=0&&S<this._positions_draw.length){var O;return(0,D.default)(O=this._positions_draw).call(O,S,1),this.updateDraggers(),this.updateAttrForEditing(),!![]}else return![]}},updateAttrForEditing:function(){}});z.EditBase=d},43889:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditCircle=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=c(e(87647)),o=c(e(10614)),u=e(81983),l=e(70317),r=e(92672);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,v.default)(n),y;if(h){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var h=x(g);function g(d){return(0,D.default)(this,g),h.call(this,d)}return(0,b.default)(g,[{key:"getGraphic",value:function(){return this.entity.ellipse}},{key:"getPositionsFromEntity",value:function(){this._positions_draw=this.entity._positions_draw}},{key:"changePositionsToCallback",value:function(){}},{key:"finish",value:function(){this.entity._positions_draw=this._positions_draw}},{key:"isClampToGround",value:function(){return this.entity.attribute.style.clampToGround}},{key:"setPositions",value:function(y){y=y[0]||y;var p=this.getPosition()||[],w=this.entity.attribute.style,S=m.EllipseGeometryLibrary.computeEllipsePositions({center:y,semiMajorAxis:this.getGraphic().semiMajorAxis.getValue(),semiMinorAxis:this.getGraphic().semiMinorAxis.getValue(),rotation:m.Math.toRadians(Number(w.rotation||0)),granularity:2},!![],![]);p[0]=y,p[1]=new m.Cartesian3(S.positions[0],S.positions[1],S.positions[2]),this._maxPointNum===3&&(p[2]=new m.Cartesian3(S.positions[3],S.positions[4],S.positions[5])),this._positions_draw=p,this.entity._positions_draw=p,this.entity.position=y}},{key:"getPosition",value:function(){if(this.getGraphic().height!==void 0)for(var y=this.getGraphic().height.getValue(this.viewer.clock.currentTime),p=0,w=this._positions_draw.length;p<w;p++)this._positions_draw[p]=(0,r.setPositionsHeight)(this._positions_draw[p],y);return this._positions_draw}},{key:"bindDraggers",value:function(){var y=this,p=this.isClampToGround(),w=this.getPosition(),S=new m.Cartesian3,O=new m.Cartesian3,B=this.entity.attribute.style,k=w[0];p&&(k=(0,r.updateHeightForClampToGround)(this.viewer,k),w[0]=k);var P=o.createDragger(this.dataSource,{position:k,onDrag:function(H,V){var Y;if(m.Cartesian3.subtract(V,w[H.index],S),w[H.index]=V,((Y=y.entity)===null||Y===void 0?void 0:Y.position)instanceof m.ConstantPositionProperty&&(y.entity.position=V),!B.clampToGround){var $=y.formatNum(m.Cartographic.fromCartesian(V).height,2);y.getGraphic().height=$,B.height=$}var K=y.viewer.clock.currentTime;m.Cartesian3.add(H.majorDragger.position.getValue(K),S,O),H.majorDragger.position=O,H.minorDragger&&(m.Cartesian3.add(H.minorDragger.position.getValue(K),S,O),H.minorDragger.position=O),y.entity.attribute.style.extrudedHeight!==void 0&&y.updateDraggers()}});P.index=0,this.draggers.push(P);var L=this.viewer.clock.currentTime,E=m.EllipseGeometryLibrary.computeEllipsePositions({center:k,semiMajorAxis:this.getGraphic().semiMajorAxis.getValue(L),semiMinorAxis:this.getGraphic().semiMinorAxis.getValue(L),rotation:m.Math.toRadians(Number(B.rotation||0)),granularity:2},!![],![]),N=new m.Cartesian3(E.positions[0],E.positions[1],E.positions[2]);p&&(N=(0,r.updateHeightForClampToGround)(this.viewer,N)),w[1]=N;var I=o.createDragger(this.dataSource,{position:N,type:o.PointType.EditAttr,tooltip:l.message.dragger.editRadius,onDrag:function(H,V){if(y.getGraphic().height!==void 0){var Y=y.getGraphic().height.getValue(L);V=(0,r.setPositionsHeight)(V,Y),H.position=V}w[H.index]=V;var $=y.formatNum(m.Cartesian3.distance(w[0],V),2)||.001;y.getGraphic().semiMajorAxis=$,B.radius?(y.getGraphic().semiMinorAxis=$,B.radius=$):(y.getGraphic().semiMajorAxis<y.getGraphic().semiMinorAxis&&(y.getGraphic().semiMinorAxis=y.getGraphic().semiMajorAxis,y.getGraphic().semiMajorAxis=$),B.semiMajorAxis=$),y.entity.attribute.style.extrudedHeight!==void 0&&y.updateDraggers()}});if(I.index=1,P.majorDragger=I,this.draggers.push(I),this._maxPointNum===3){var G=new m.Cartesian3(E.positions[3],E.positions[4],E.positions[5]);p&&(G=(0,r.updateHeightForClampToGround)(this.viewer,G)),w[2]=G;var W=o.createDragger(this.dataSource,{position:G,type:o.PointType.EditAttr,tooltip:l.message.dragger.editRadius,onDrag:function(H,V){if(y.getGraphic().height!==void 0){var Y=y.getGraphic().height.getValue(L);V=(0,r.setPositionsHeight)(V,Y),H.position=V}w[H.index]=V;var $=y.formatNum(m.Cartesian3.distance(w[0],V),2)||.001;y.getGraphic().semiMinorAxis=$,B.radius?(y.getGraphic().semiMajorAxis=$,B.radius=$):(y.getGraphic().semiMajorAxis<y.getGraphic().semiMinorAxis&&(y.getGraphic().semiMajorAxis=$,y.getGraphic().semiMinorAxis=$),B.semiMinorAxis=$),y.entity.attribute.style.extrudedHeight!==void 0&&y.updateDraggers()}});W.index=2,P.minorDragger=W,this.draggers.push(W)}if(this.getGraphic().extrudedHeight){var Z=this._maxPointNum===3?[w[1],w[2]]:[w[1]];this.bindHeightDraggers(Z)}}}]),g}(u.EditPolygon);z.EditCircle=i},45691:function(X,z,e){"use strict";var M=e(65557),F=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditCorridor=void 0;var R=F(e(22777)),A=F(e(42762)),T=F(e(30044)),D=F(e(99085)),b=F(e(34009)),C=e(11478),f=e(92672);function v(u){var l=m();return function(){var s=(0,b.default)(u),c;if(l){var x=(0,b.default)(this).constructor;c=M(s,arguments,x)}else c=s.apply(this,arguments);return(0,D.default)(this,c)}}function m(){if(typeof Reflect>"u"||!M)return![];if(M.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(M(Boolean,[],function(){})),!![]}catch{return![]}}var o=function(u){(0,T.default)(r,u);var l=v(r);function r(s){return(0,R.default)(this,r),l.call(this,s)}return(0,A.default)(r,[{key:"getGraphic",value:function(){return this.entity.corridor}},{key:"updatePositionsHeightByAttr",value:function(c){if(this.getGraphic().height!==void 0){var x=this.getGraphic().height.getValue(this.viewer.clock.currentTime);c=(0,f.setPositionsHeight)(c,x)}return c}}]),r}(C.EditPolyline);z.EditCorridor=o},39670:function(X,z,e){"use strict";var M=e(65557),F=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditCurve=void 0;var R=F(e(22777)),A=F(e(42762)),T=F(e(30044)),D=F(e(99085)),b=F(e(34009)),C=e(69471),f=e(11478);function v(u){var l=m();return function(){var s=(0,b.default)(u),c;if(l){var x=(0,b.default)(this).constructor;c=M(s,arguments,x)}else c=s.apply(this,arguments);return(0,D.default)(this,c)}}function m(){if(typeof Reflect>"u"||!M)return![];if(M.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(M(Boolean,[],function(){})),!![]}catch{return![]}}var o=function(u){(0,T.default)(r,u);var l=v(r);function r(s){return(0,R.default)(this,r),l.call(this,s)}return(0,A.default)(r,[{key:"getPositionsFromEntity",value:function(){this._positions_draw=this.entity._positions_draw,this._positions_show=this.entity._positions_show||this.getGraphic().positions.getValue()}},{key:"changePositionsToCallback",value:function(){}},{key:"updateAttrForEditing",value:function(){if(this._positions_draw==null||this._positions_draw.length<3){this._positions_show=this._positions_draw,this.entity._positions_show=this._positions_show;return}this._positions_show=(0,C.line2curve)(this._positions_draw,this.entity.attribute.style.closure),this.entity._positions_show=this._positions_show}},{key:"finish",value:function(){this.entity._positions_show=this._positions_show,this.entity._positions_draw=this._positions_draw}}]),r}(f.EditPolyline);z.EditCurve=o},406:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditCylinder=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=c(e(87647)),o=c(e(10614)),u=e(81983),l=e(70317),r=e(92672);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,v.default)(n),y;if(h){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var h=x(g);function g(d){return(0,D.default)(this,g),h.call(this,d)}return(0,b.default)(g,[{key:"getGraphic",value:function(){return this.entity.cylinder}},{key:"changePositionsToCallback",value:function(){var y=this.viewer.clock.currentTime,p=this;this.attr_bottomRadius=this.getGraphic().bottomRadius.getValue(y),this.getGraphic().bottomRadius=new m.CallbackProperty(function(){return p.attr_bottomRadius},![]),this.attr_length=this.getGraphic().length.getValue(y),this.getGraphic().length=new m.CallbackProperty(function(){return p.attr_length},![])}},{key:"finish",value:function(){this.entity._positions_draw=this._positions_draw,this.getGraphic().bottomRadius=this.attr_bottomRadius,this.getGraphic().length=this.attr_length}},{key:"bindDraggers",value:function(){var y=this,p=this.getPosition(),w=new m.Cartesian3,S=this.entity.attribute.style;L=p[0];var O=o.createDragger(this.dataSource,{position:L,onDrag:function(I,G){m.Cartesian3.subtract(G,p[I.index],w),p[I.index]=G,y.updateDraggers()}});O.index=0,this.draggers.push(O);var B=m.EllipseGeometryLibrary.computeEllipsePositions({center:L,semiMajorAxis:this.attr_bottomRadius,semiMinorAxis:this.attr_bottomRadius,rotation:m.Math.toRadians(Number(S.rotation||0)),granularity:2},!![],![]),k=new m.Cartesian3(B.positions[0],B.positions[1],B.positions[2]);p[1]=k;var P=o.createDragger(this.dataSource,{position:k,type:o.PointType.EditAttr,tooltip:l.message.dragger.editRadius,onDrag:function(I,G){p[I.index]=G;var W=y.formatNum(m.Cartesian3.distance(p[0],G),2);y.attr_bottomRadius=W,S.bottomRadius=W,y.updateDraggers()}});this.draggers.push(P);var L=(0,r.addPositionsHeight)(p[0],this.attr_length),E=o.createDragger(this.dataSource,{position:L,type:o.PointType.MoveHeight,tooltip:l.message.dragger.moveHeight,onDrag:function(I,G){var W=y.formatNum(m.Cartesian3.distance(p[0],G),2);y.attr_length=W,S.length=W,y.updateDraggers()}});this.draggers.push(E)}}]),g}(u.EditPolygon);z.EditCylinder=i},38766:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditEllipsoid=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=c(e(87647)),o=c(e(10614)),u=e(70317),l=e(8817),r=e(92672);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,v.default)(n),y;if(h){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var h=x(g);function g(d){var y;return(0,D.default)(this,g),y=h.call(this,d),y._positions_draw=null,y}return(0,b.default)(g,[{key:"getGraphic",value:function(){return this.entity.ellipsoid}},{key:"getPositionsFromEntity",value:function(){this._positions_draw=this.entity._positions_draw[0]}},{key:"setPositions",value:function(y){this.entity.position=y[0]||y}},{key:"finish",value:function(){this._positions_draw=null}},{key:"updateRadii",value:function(y){var p=new m.Cartesian3(Number(y.extentRadii),Number(y.widthRadii),Number(y.heightRadii));this.entity.ellipsoid.radii.setValue(p)}},{key:"bindDraggers",value:function(){var y=this,p=this.entity.attribute.style,w=this.entity.position.getValue(this.viewer.clock.currentTime),S=o.createDragger(this.dataSource,{position:(0,r.addPositionsHeight)(w,p.heightRadii),onDrag:function(N,I){this._positions_draw=I,y.entity.position.setValue(I),y.updateDraggers()}});this.draggers.push(S);var O=m.EllipseGeometryLibrary.computeEllipsePositions({center:w,semiMajorAxis:Number(p.extentRadii),semiMinorAxis:Number(p.widthRadii),rotation:m.Math.toRadians(Number(p.rotation||0)),granularity:2},!![],![]),B=new m.Cartesian3(O.positions[0],O.positions[1],O.positions[2]),k=o.createDragger(this.dataSource,{position:B,type:o.PointType.EditAttr,tooltip:u.message.dragger.editRadius,onDrag:function(N,I){var G=m.Cartographic.fromCartesian(y._positions_draw).height;I=(0,r.setPositionsHeight)(I,G),N.position=I,p.extentRadii=y.formatNum(m.Cartesian3.distance(y._positions_draw,I),2),y.updateRadii(p),y.updateDraggers()}});S.majorDragger=k,this.draggers.push(k);var P=new m.Cartesian3(O.positions[3],O.positions[4],O.positions[5]),L=o.createDragger(this.dataSource,{position:P,type:o.PointType.EditAttr,tooltip:u.message.dragger.editRadius,onDrag:function(N,I){var G=m.Cartographic.fromCartesian(y._positions_draw).height;I=(0,r.setPositionsHeight)(I,G),N.position=I,p.widthRadii=y.formatNum(m.Cartesian3.distance(y._positions_draw,I),2),y.updateRadii(p),y.updateDraggers()}});S.minorDragger=L,this.draggers.push(L)}}]),g}(l.EditBase);z.EditEllipsoid=i},33843:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPModel=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=x(e(87647)),o=x(e(10614)),u=x(e(76111)),l=e(92672),r=e(8817),s=e(70317);function c(h){if(typeof R!="function")return null;var g=new R,d=new R;return(c=function(p){return p?d:g})(h)}function x(h,g){if(!g&&h&&h.__esModule)return h;if(h===null||M(h)!=="object"&&typeof h!="function")return{default:h};var d=c(g);if(d&&d.has(h))return d.get(h);var y={},p=Object.defineProperty&&A;for(var w in h)if(w!=="default"&&Object.prototype.hasOwnProperty.call(h,w)){var S=p?A(h,w):null;S&&(S.get||S.set)?Object.defineProperty(y,w,S):y[w]=h[w]}return y.default=h,d&&d.set(h,y),y}function a(h){var g=i();return function(){var y=(0,v.default)(h),p;if(g){var w=(0,v.default)(this).constructor;p=F(y,arguments,w)}else p=y.apply(this,arguments);return(0,f.default)(this,p)}}function i(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var n=function(h){(0,C.default)(d,h);var g=a(d);function d(y){return(0,D.default)(this,d),g.call(this,y)}return(0,b.default)(d,[{key:"setPositions",value:function(p){this.entity.position=p,this.entity.modelMatrix=this.getModelMatrix()}},{key:"getModelMatrix",value:function(p){var w=this.entity.attribute.style,S=new m.HeadingPitchRoll(m.Math.toRadians(w.heading||0),m.Math.toRadians(w.pitch||0),m.Math.toRadians(w.roll||0)),O=m.Transforms.eastNorthUpToFixedFrame,B=m.Transforms.headingPitchRollToFixedFrame(p||this.entity.position,S,this.viewer.scene.globe.ellipsoid,O);return B}},{key:"bindDraggers",value:function(){if(!this.entity.ready){var p=this;this.entity.readyPromise.then(function(){p.bindDraggers()});return}var w=this;this.entity.draw_tooltip=s.message.dragger.def,o.createDragger(this.dataSource,{dragger:this.entity,onDrag:function(G,W){w.entity.position=W,w.entity.modelMatrix=w.getModelMatrix(W),w.updateDraggers()}});var S=this.entity.attribute.style,O=this.entity.position,B=m.Cartographic.fromCartesian(O).height,k=this.entity.boundingSphere.radius;this.entityAngle=this.dataSource.entities.add({name:"\u89D2\u5EA6\u8C03\u6574\u5E95\u90E8\u5706",position:new m.CallbackProperty(function(){return w.entity.position},![]),ellipse:u.style2Entity({fill:![],outline:!![],outlineColor:"#ffff00",outlineOpacity:.8,radius:k,height:B})});var P=this.getHeadingPosition(),L=o.createDragger(this.dataSource,{position:P,type:o.PointType.EditAttr,tooltip:s.message.dragger.editHeading,onDrag:function(G,W){var Z=w.getHeading(w.entity.position,W);S.heading=w.formatNum(Z,1),w.entity.modelMatrix=w.getModelMatrix(),G.position=w.getHeadingPosition()}});this.draggers.push(L);var E=(0,l.addPositionsHeight)(O,k),N=o.createDragger(this.dataSource,{position:E,type:o.PointType.MoveHeight,tooltip:s.message.dragger.editScale,onDrag:function(G,W){var Z=m.Cartesian3.distance(W,O),U=G.radius/S.scale,H=Z/U;G.radius=Z,S.scale=w.formatNum(H,2),w.entity.scale=S.scale,w.updateDraggers()}});N.radius=k,this.draggers.push(N)}},{key:"destroyDraggers",value:function(){r.EditBase.prototype.destroyDraggers.call(this),this.entityAngle&&(this.dataSource.entities.remove(this.entityAngle),delete this.entityAngle),this.entityBox&&(this.dataSource.entities.remove(this.entityBox),delete this.entityBox)}},{key:"finish",value:function(){this.entity.draw_tooltip=null}},{key:"getHeadingPosition",value:function(){var p=this.entity.position,w=this.entity.boundingSphere.radius,S=-Number(this.entity.attribute.style.heading||0),O=new m.Cartesian3(w,0,0),B=m.Transforms.eastNorthUpToFixedFrame(p),k=m.Matrix4.fromRotationTranslation(m.Matrix3.fromRotationZ(m.Math.toRadians(S)));return m.Matrix4.multiply(B,k,B),B=m.Matrix4.getMatrix3(B,new m.Matrix3),O=m.Matrix3.multiplyByVector(B,O,O),O=m.Cartesian3.add(p,O,O),O}},{key:"getHeading",value:function(p,w){var S=m.Transforms.eastNorthUpToFixedFrame(p);S=m.Matrix4.getMatrix3(S,new m.Matrix3);var O=m.Matrix3.getColumn(S,0,new m.Cartesian3),B=m.Matrix3.getColumn(S,1,new m.Cartesian3),k=m.Matrix3.getColumn(S,2,new m.Cartesian3),P=m.Cartesian3.subtract(w,p,new m.Cartesian3);P=m.Cartesian3.cross(P,k,P),P=m.Cartesian3.cross(k,P,P),P=m.Cartesian3.normalize(P,P);var L=m.Cartesian3.angleBetween(O,P),E=m.Cartesian3.angleBetween(B,P);return E>Math.PI*.5&&(L=2*Math.PI-L),-m.Math.toDegrees(L)}}]),d}(r.EditBase);z.EditPModel=n},66488:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPlotting=void 0;var D=T(e(5146)),b=T(e(22777)),C=T(e(42762)),f=T(e(30044)),v=T(e(99085)),m=T(e(34009)),o=c(e(96535)),u=c(e(87647)),l=e(32325),r=e(81983);function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,m.default)(n),y;if(h){var p=(0,m.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,v.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,f.default)(g,n);var h=x(g);function g(d){var y;return(0,b.default)(this,g),y=h.call(this,d),y.hasClosure=!![],y}return(0,C.default)(g,[{key:"getGraphic",value:function(){return this.entity.polygon}},{key:"setPositions",value:function(y){var p=this;this.entity._positions_draw=y,this._positions_draw=y,this.entity.polygon.hierarchy instanceof u.ConstantProperty&&(this.entity.polygon.hierarchy=new u.ConstantProperty((0,l.generatePolygonHierarchy)(this.entity,p)()),this.entity.polyline.positions=new u.ConstantProperty(function(w){if(!p.entity.polyline.show.getValue(w))return null;var S=o.getPositions(p.entity,!![]);return S&&S.length<3?S:(0,D.default)(S).call(S,[S[0]])}()))}},{key:"changePositionsToCallback",value:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],p=this,w=this.entity;w instanceof u.Entity&&(y?(w.polygon.hierarchy=new u.CallbackProperty((0,l.generatePolygonHierarchy)(w,p),![]),w.polyline.show=new u.CallbackProperty(function(S){var O=o.getPositions(w,!![]);return O&&O.length<3?!![]:w.polygon.outline&&w.polygon.outline.getValue(S)&&w.polygon.outlineWidth&&w.polygon.outlineWidth.getValue(S)>1},![]),w.polyline.positions=new u.CallbackProperty(function(S){if(!w.polyline.show.getValue(S))return null;var O=o.getPositions(w,!![]);return O&&O.length<3?O:(0,D.default)(O).call(O,[O[0]])},![]),w.polyline.width=new u.CallbackProperty(function(){var S=o.getPositions(w,!![]);return S&&S.length<3?2:w.polygon.outlineWidth&&w.polygon.outlineWidth.getValue()},![]),w.polyline.zIndex=new u.CallbackProperty(function(){return w.polygon.zIndex&&w.polygon.zIndex.getValue()},![]),w.polyline.material=new u.ColorMaterialProperty(new u.CallbackProperty(function(S){var O=o.getPositions(w,!![]);return O&&O.length<3?w.polygon.material.color?w.polygon.material.color.getValue(S):u.Color.YELLOW:w.polygon.outlineColor.getValue(S)},![]))):(this.entity.polygon.hierarchy=new u.ConstantProperty((0,l.generatePolygonHierarchy)(w,p)()),w.polyline.show=w.polyline.show.getValue(),w.polyline.positions=w.polyline.positions.getValue(),w.polyline.width=w.polyline.width.getValue(),w.polyline.zIndex=w.polyline.zIndex.getValue(),w.polyline.material=new u.ColorMaterialProperty(w.polyline.material.getValue().color)))}},{key:"finish",value:function(){this.changePositionsToCallback(![])}},{key:"isClampToGround",value:function(){return Object.hasOwnProperty.call(this.entity.attribute.style,"clampToGround")?this.entity.attribute.style.clampToGround:!this.entity.attribute.style.perPositionHeight}}]),g}(r.EditPolygon);z.EditPlotting=i},56248:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPoint=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=c(e(10614)),o=e(8817),u=e(70317),l=e(36161),r=c(e(87647));function s(n){if(typeof R!="function")return null;var h=new R,g=new R;return(s=function(y){return y?g:h})(n)}function c(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=s(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&A;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?A(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function x(n){var h=a();return function(){var d=(0,v.default)(n),y;if(h){var p=(0,v.default)(this).constructor;y=F(d,arguments,p)}else y=d.apply(this,arguments);return(0,f.default)(this,y)}}function a(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var i=function(n){(0,C.default)(g,n);var h=x(g);function g(d){var y;return(0,D.default)(this,g),y=h.call(this,d),y.viewer=d.viewer,y}return(0,b.default)(g,[{key:"getGraphic",value:function(){return this.entity.point}},{key:"getPosition",value:function(){return this.entity.position.getValue?this.entity.position.getValue():this.entity.position}},{key:"setPositions",value:function(y){this.entity.position=y[0]||y}},{key:"bindDraggers",value:function(){var y=this;this.entity.draw_tooltip=u.message.dragger.def,m.createDragger(this.dataSource,{dragger:this.entity,onDrag:function(w,S){y.setPositions(S),y.entity.isbounce==!![]&&y.addAnimate(y.viewer,y.entity)}})}},{key:"addAnimate",value:function(y,p){var w=(0,l.cartesian2lonlat)(p.position.getValue())[2],S={maxHeight:w+50,minHeight:w,heightDelta:.5},O=S.minHeight,B=S.maxHeight,k=S.heightDelta,P=(0,l.cartesian2lonlat)(p.position.getValue())[0],L=(0,l.cartesian2lonlat)(p.position.getValue())[1];y.scene.preUpdate.addEventListener(function(){w+=k,p.position=r.Cartesian3.fromDegrees(P,L,w);var E=p.position.getValue(),N=r.Cartographic.fromCartesian(E,r.Ellipsoid.WGS84);(N.height>=B||N.height<=O)&&(k*=-1)})}},{key:"finish",value:function(){this.entity.draw_tooltip=null}}]),g}(o.EditBase);z.EditPoint=i},81983:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPolygon=void 0;var D=T(e(5146)),b=T(e(69033)),C=T(e(22466)),f=T(e(99245)),v=T(e(42579)),m=T(e(36583)),o=T(e(22777)),u=T(e(42762)),l=T(e(30044)),r=T(e(99085)),s=T(e(34009)),c=y(e(96535)),x=e(11478),a=y(e(87647)),i=y(e(10614)),n=e(92672),h=e(70317),g=e(36161);function d(B){if(typeof R!="function")return null;var k=new R,P=new R;return(d=function(E){return E?P:k})(B)}function y(B,k){if(!k&&B&&B.__esModule)return B;if(B===null||M(B)!=="object"&&typeof B!="function")return{default:B};var P=d(k);if(P&&P.has(B))return P.get(B);var L={},E=Object.defineProperty&&A;for(var N in B)if(N!=="default"&&Object.prototype.hasOwnProperty.call(B,N)){var I=E?A(B,N):null;I&&(I.get||I.set)?Object.defineProperty(L,N,I):L[N]=B[N]}return L.default=B,P&&P.set(B,L),L}function p(B){var k=w();return function(){var L=(0,s.default)(B),E;if(k){var N=(0,s.default)(this).constructor;E=F(L,arguments,N)}else E=L.apply(this,arguments);return(0,r.default)(this,E)}}function w(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var S=a.Cartesian3,O=function(B){(0,l.default)(P,B);var k=p(P);function P(L){var E;return(0,o.default)(this,P),E=k.call(this,L),E.hasClosure=!![],E}return(0,u.default)(P,[{key:"getGraphic",value:function(){return this.entity.polygon}},{key:"getPosition",value:function(){return this._positions_draw}},{key:"setPositions",value:function(E){if(this.entity._positions_draw=E,this._positions_draw=E,this.getGraphic().hierarchy instanceof a.ConstantProperty){this.entity.polygon.hierarchy=new a.ConstantProperty(new a.PolygonHierarchy((0,m.default)(E)));var N=(0,m.default)(E);N=this.updatePositionsHeightByAttr(N),N.push(N[0]),this.entity.polyline.positions=new a.ConstantProperty(N)}}},{key:"changePositionsToCallback",value:function(){var E=this,N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],I=this.entity,G=this;if(I instanceof a.Entity)if(N)I.polygon.hierarchy=new a.CallbackProperty(function(){(0,v.default)(this,E);var U=I._positions_draw;return new a.PolygonHierarchy(U)}.bind(this),![]),I.polyline.show=new a.CallbackProperty(function(U){var H=c.getPositions(I);return H&&H.length<3?!![]:!!(I.polygon.outline&&I.polygon.outline.getValue(U)&&I.polygon.outlineWidth&&I.polygon.outlineWidth.getValue(U)>1&&!I.polygon.extrudedHeight)},![]),I.polyline.positions=new a.CallbackProperty(function(U){var H;if(((H=I.polyline.show)===null||H===void 0?void 0:H.getValue(U))===![])return null;var V=c.getPositions(I);return V&&V.length<3?V:(V=G.updatePositionsHeightByAttr(V),(0,D.default)(V).call(V,[V[0]]))},![]),I.polyline.width=new a.CallbackProperty(function(){var U=c.getPositions(I);return U&&U.length<3?2:I.polygon.outlineWidth&&I.polygon.outlineWidth.getValue()},![]),I.polyline.zIndex=new a.CallbackProperty(function(){return I.polygon.zIndex&&I.polygon.zIndex.getValue()},![]),I.polyline.material=new a.ColorMaterialProperty(new a.CallbackProperty(function(U){var H=c.getPositions(I);return H&&H.length<3?I.polygon.material.color?I.polygon.material.color.getValue(U):a.Color.YELLOW:I.polygon.outlineColor.getValue(U)},![]));else{var W,Z=this.entity._positions_draw;this.entity.polygon.hierarchy=new a.ConstantProperty(new a.PolygonHierarchy(Z)),I.polyline.show=I.polyline.show.getValue(),I.polyline.positions=I.polyline.positions.getValue(),I.polyline.width=I.polyline.width.getValue(),I.polyline.zIndex=(W=I.polyline.zIndex)===null||W===void 0?void 0:W.getValue(),I.polyline.material=new a.ColorMaterialProperty(I.polyline.material.getValue().color)}}},{key:"finish",value:function(){this.changePositionsToCallback(![])}},{key:"isClampToGround",value:function(){return Object.hasOwnProperty.call(this.entity.attribute.style,"clampToGround")?this.entity.attribute.style.clampToGround:!this.entity.attribute.style.perPositionHeight}},{key:"updatePositionsHeightByAttr",value:function(E){if(this.getGraphic().height!==void 0&&this.getGraphic().perPositionHeight!=!![]){var N=this.getGraphic().height.getValue(this.viewer.clock.currentTime);E=(0,n.setPositionsHeight)(E,N)}return E}},{key:"bindDraggers",value:function(){for(var E=this,N,I=this,G=this.getPosition(),W=this.isClampToGround(),Z=this.hasMidPoint(),U=function(rt){var ht=this,Pt=G[H];Pt=E.updatePositionsHeightByAttr(Pt),W&&(Pt=(0,n.updateHeightForClampToGround)(E.viewer,Pt),G[H]=Pt);var wt=i.createDragger(E.dataSource,{position:Pt,onDragStart:function(Tt,mt){(0,v.default)(this,ht),I.fire("drag-start",Tt,mt)}.bind(this),onDrag:function(Tt,mt){if(mt=I.updatePositionsHeightByAttr(mt),Tt.position=mt,G[Tt.index]=mt,I.getGraphic().hierarchy instanceof a.ConstantProperty&&I.setPositions(G),Tt.callback&&Tt.callback(G),I.heightDraggers&&I.heightDraggers.length>0){var Ft=I.getGraphic().extrudedHeight.getValue(I.viewer.clock.currentTime);I.heightDraggers[Tt.index].position=(0,n.setPositionsHeight)(mt,Ft)}if(Z){var ct,vt;if(I.hasClosure||!I.hasClosure&&Tt.index!==0){Tt.index===0?(ct=rt*2-1,vt=rt-1):(ct=Tt.index*2-1,vt=Tt.index-1);var Dt=G[vt],Ct=S.midpoint(mt,Dt,new S);Ct=I.updatePositionsHeightByAttr(Ct),W&&(Ct=(0,n.updateHeightForClampToGround)(I.viewer,Ct)),I.draggers[ct].position=Ct}if(I.hasClosure||!I.hasClosure&&Tt.index!==rt-1){Tt.index===rt-1?(ct=Tt.index*2+1,vt=0):(ct=Tt.index*2+1,vt=Tt.index+1);var jt=S.midpoint(mt,G[vt],new S);jt=I.updatePositionsHeightByAttr(jt),W&&(jt=(0,n.updateHeightForClampToGround)(I.viewer,jt)),I.draggers[ct].position=jt}}I.fire("drag",Tt,mt)},onDragEnd:function(Tt,mt){I.fire("drag-end",Tt,mt)}});if(wt.index=H,E.draggers.push(wt),Z&&(E.hasClosure||!E.hasClosure&&H<rt-1)){var At=(H+1)%rt,Nt=S.midpoint(Pt,G[At],new S);Nt=I.updatePositionsHeightByAttr(Nt),W&&(Nt=(0,n.updateHeightForClampToGround)(E.viewer,Nt));var Lt=i.createDragger(E.dataSource,{position:Nt,type:i.PointType.AddMidPoint,tooltip:h.message.dragger.addMidPoint,onDragStart:function(Tt,mt){(0,b.default)(G).call(G,Tt.index,0,mt),I.entity.thisIdx=Tt.index,I.fire("drag-start",Tt,mt)},onDrag:function(Tt,mt){G[Tt.index]=mt,I.getGraphic().hierarchy instanceof a.ConstantProperty&&I.setPositions(G),Tt.callback&&Tt.callback(G),I.fire("drag",Tt,mt)},onDragEnd:function(Tt,mt){I.updateDraggers(),I.fire("drag-end",Tt,mt)}});Lt.index=At,Lt._isMidPoint=!![],E.draggers.push(Lt)}},H=0,V=G.length;H<V;H++)U(V);if(this.setPositions(G),!this.draggers){var Y=(0,n.centerOfMass)(G);W&&(Y=(0,n.updateHeightForClampToGround)(this.viewer,Y));var $,K,J,Q,et="",nt,st=i.createDragger(this.dataSource,{position:Y,onDragStart:function(rt,ht){et="left",$=ht},onDrag:function(rt,ht){if(ht=I.updatePositionsHeightByAttr(ht),rt.position=ht,et==="left"){K=ht.x-$.x,J=ht.y-$.y,Q=ht.z-$.z;for(var Pt={x:K,y:J,z:Q},wt=0;wt<G.length;wt++)G[wt]=S.add(G[wt],Pt,new S);for(var At=0;At<I.draggers.length;At++){var Nt=I.draggers[At];Nt.position=S.add(Nt.position.getValue(),Pt,new S)}$=ht}else if(et==="right"){K=ht.x-$.x,J=ht.y-$.y,Q=ht.z-$.z;for(var Lt={x:K,y:J,z:Q},Rt=0;Rt<G.length;Rt++)G[Rt]=S.add(G[Rt],Lt,new S),G[Rt]=(0,n.setPositionsHeight)(G[Rt],nt);for(var Tt=0;Tt<I.draggers.length;Tt++){var mt=I.draggers[Tt];mt.position=S.add(mt.position.getValue(),Lt,new S),mt.position=(0,n.setPositionsHeight)(mt.position.getValue(),nt)}$=ht}},onDragEnd:function(){$=null,et=""},onRightDown:function(rt,ht){et="right",nt=(0,g.cartesian2lonlat)(ht)[2],$=ht},onRightUp:function(){et="",$=null}});st.index=this.draggers.length,this.draggers.push(st)}this.entity.attribute.style.isCompositeDragger&&this.bindCompositeDraggers(),(N=this.getGraphic())!==null&&N!==void 0&&N.extrudedHeight&&this.bindHeightDraggers(),this.entity.attribute.style.isDragBelow&&this.bindBelowHeightDraggers(),this.entity.attribute.config&&this.entity.attribute.config.isBox&&this.bindBoxDraggers()}},{key:"bindHeightDraggers",value:function(E){var N=this;this.heightDraggers=[],E=E||this.getPosition();for(var I=N.getGraphic().extrudedHeight.getValue(this.viewer.clock.currentTime),G=0,W=E.length;G<W;G++){var Z=E[G];Z=(0,n.setPositionsHeight)(Z,I);var U=i.createDragger(this.dataSource,{position:Z,type:i.PointType.MoveHeight,tooltip:h.message.dragger.moveHeight,onDrag:function(V,Y){var $=a.Cartographic.fromCartesian(Y).height,K=(0,n.getMaxHeight)(N.getPosition());$<=K&&($=K),N.getGraphic().extrudedHeight=$,N.entity.attribute.style.extrudedHeight=N.formatNum($-K,2),N.updateHeightDraggers($)}});this.draggers.push(U),this.heightDraggers.push(U)}}},{key:"bindBelowHeightDraggers",value:function(){for(var E=0,N=this.draggers.length;E<N;E++)this.dataSource.entities.remove(this.draggers[E]);var I=this,G=this.getPosition(),W=I.getGraphic().extrudedHeight.getValue(this.viewer.clock.currentTime),Z=(0,n.centerOfMass)(G),U,H=i.createDragger(this.dataSource,{position:Z,type:i.PointType.MoveHeight,tooltip:h.message.dragger.moveHeight,onDrag:function(K,J){var Q=this,et=a.Cartographic.fromCartesian(J).height,nt=a.Cartographic.fromCartesian(Y.position.getValue()).height;if(et<nt){var st,ut;U=U||J;for(var rt=et-a.Cartographic.fromCartesian(U).height,ht=(0,C.default)(st=I.draggers).call(st,function(Tt){return(0,v.default)(this,Q),Tt._pointType===1||Tt._pointType===2}.bind(this)),Pt=0;Pt<ht.length;Pt++){var wt=ht[Pt],At=(0,n.setPositionsHeight)(wt.position.getValue(I.viewer.clock.currentTime),et+rt);wt.position.setValue(At)}for(var Nt=[],Lt=(0,C.default)(ut=I.draggers).call(ut,function(Tt){return(0,v.default)(this,Q),Tt._pointType===1}.bind(this)),Rt=0;Rt<Lt.length;Rt++)Nt.push(Lt[Rt].position.getValue());I.setPositions(Nt),U=J,K.callback&&K.callback(J,"polygon-2")}else H.position=(0,n.setPositionsHeight)(J,nt)},onDragEnd:function(){U=null}}),V=(0,n.setPositionsHeight)(Z,W),Y=i.createDragger(this.dataSource,{position:V,type:i.PointType.MoveHeight,tooltip:h.message.dragger.moveHeight,onDrag:function(K,J){var Q=a.Cartographic.fromCartesian(J).height,et=a.Cartographic.fromCartesian(H.position.getValue()).height;if(et<Q){I.getGraphic().extrudedHeight=Q;var nt=(0,n.getMaxHeight)(I.getPosition());I.entity.attribute.style.extrudedHeight=I.formatNum(Q-nt,2),I.updateHeightDraggers(Q),K.callback&&K.callback(J,"polygon-1")}else Y.position=(0,n.setPositionsHeight)(J,et)}});this.draggers.push(H,Y)}},{key:"bindFlattenHeightDraggers",value:function(){for(var E=0,N=this.draggers.length;E<N;E++)this.dataSource.entities.remove(this.draggers[E]);var I=this,G=this.getPosition(),W=(0,n.centerOfMass)(G),Z,U=i.createDragger(this.dataSource,{position:W,type:i.PointType.MoveHeight,tooltip:h.message.dragger.moveHeight,onDrag:function(V,Y){var $,K=this,J;Z=Z||Y;for(var Q=a.Cartographic.fromCartesian(Y).height,et=Q-a.Cartographic.fromCartesian(Z).height,nt=(0,C.default)($=I.draggers).call($,function(At){return(0,v.default)(this,K),At._pointType===1||At._pointType===2}.bind(this)),st=0;st<nt.length;st++){var ut=nt[st],rt=(0,n.setPositionsHeight)(ut.position.getValue(I.viewer.clock.currentTime),Q+et);ut.position.setValue(rt)}for(var ht=[],Pt=(0,C.default)(J=I.draggers).call(J,function(At){return(0,v.default)(this,K),At._pointType===1}.bind(this)),wt=0;wt<Pt.length;wt++)ht.push(Pt[wt].position.getValue());I.setPositions(ht),Z=Y,V.callback&&V.callback(Y,"flatten")},onDragEnd:function(){Z=null}});this.draggers.push(U)}},{key:"bindBoxDraggers",value:function(){for(var E=this,N=0,I=this.draggers.length;N<I;N++)this.dataSource.entities.remove(this.draggers[N]);this.draggers=[];var G=this,W=this.getPosition(),Z=G.getGraphic().extrudedHeight.getValue(this.viewer.clock.currentTime),U=W[0],H=W[1],V=W[2],Y=W[3];G._positions_draw=[U,H,V,Y];var $=S.midpoint(U,V,U.clone()),K=(0,n.setPositionsHeight)($,Z),J=S.midpoint($,K,$.clone()),Q=a.Cartographic.fromCartesian(J).height,et=S.midpoint(V,Y,V.clone()),nt=(0,n.setPositionsHeight)(et,Q),st=S.midpoint(H,V,H.clone()),ut=(0,n.setPositionsHeight)(st,Q),rt=S.midpoint(U,H,U.clone()),ht=(0,n.setPositionsHeight)(rt,Q),Pt=S.midpoint(U,Y,U.clone()),wt=(0,n.setPositionsHeight)(Pt,Q);G.entity.polygon.hierarchy=new a.CallbackProperty(function(){return new a.PolygonHierarchy([U,H,V,Y])},![]);var At=this.createDraggerFun(nt,[U,Y]);At.update=function(ct){(0,v.default)(this,E),V=S.add(V,ct,new S),Y=S.add(Y,ct,new S),G._positions_draw=[U,H,V,Y],nt=S.add(nt,ct,new S),At.callback&&At.callback(nt,"box-1"),Ft()}.bind(this);var Nt=this.createDraggerFun(ut,[U,H]);Nt.update=function(ct){(0,v.default)(this,E),H=S.add(H,ct,new S),V=S.add(V,ct,new S),G._positions_draw=[U,H,V,Y],ut=S.add(ut,ct,new S),Nt.callback&&Nt.callback(ut,"box-2"),Ft()}.bind(this);var Lt=this.createDraggerFun(ht,[Y,U]);Lt.update=function(ct){(0,v.default)(this,E),U=S.add(U,ct,new S),H=S.add(H,ct,new S),G._positions_draw=[U,H,V,Y],ht=S.add(ht,ct,new S),Lt.callback&&Lt.callback(ht,"box-3"),Ft()}.bind(this);var Rt=this.createDraggerFun(wt,[H,U]);Rt.update=function(ct){(0,v.default)(this,E),U=S.add(U,ct,new S),Y=S.add(Y,ct,new S),G._positions_draw=[U,H,V,Y],wt=S.add(wt,ct,new S),Rt.callback&&Rt.callback(wt,"box-4"),Ft()}.bind(this);var Tt=i.createDragger(this.dataSource,{position:K,type:i.PointType.MoveHeight,tooltip:h.message.dragger.moveHeight,onDrag:function(vt,Dt){var Ct=a.Cartographic.fromCartesian(Dt).height,jt=a.Cartographic.fromCartesian(mt.position.getValue()).height;if(jt<Ct){G.getGraphic().extrudedHeight=Ct;var zt=(0,n.getMaxHeight)(G.getPosition());G.entity.attribute.style.extrudedHeight=G.formatNum(Ct-zt,2),G.updateHeightDraggers(Ct),vt.callback&&vt.callback(Dt,"box-5"),Z=Ct,Ft()}else Tt.position=(0,n.setPositionsHeight)(Dt,jt)}}),mt=i.createDragger(this.dataSource,{position:$,type:i.PointType.MoveHeight,tooltip:h.message.dragger.moveHeight,onDrag:function(vt,Dt){var Ct=a.Cartographic.fromCartesian(Dt).height,jt=a.Cartographic.fromCartesian(Tt.position.getValue()).height;Ct<jt?(U=(0,n.setPositionsHeight)(U,Ct),H=(0,n.setPositionsHeight)(H,Ct),V=(0,n.setPositionsHeight)(V,Ct),Y=(0,n.setPositionsHeight)(Y,Ct),vt.callback&&vt.callback(Dt,"box-6"),Ft()):mt.position=(0,n.setPositionsHeight)(Dt,jt)}});this.draggers.push(At,Nt,Lt,Rt,Tt,mt),Ft();function Ft(){Z=G.getGraphic().extrudedHeight.getValue(G.viewer.clock.currentTime),$=S.midpoint(U,V,U.clone()),K=(0,n.setPositionsHeight)($,Z),J=S.midpoint($,K,$.clone()),Q=a.Cartographic.fromCartesian(J).height,et=S.midpoint(V,Y,V.clone()),nt=(0,n.setPositionsHeight)(et,Q),st=S.midpoint(H,V,H.clone()),ut=(0,n.setPositionsHeight)(st,Q),rt=S.midpoint(U,H,U.clone()),ht=(0,n.setPositionsHeight)(rt,Q),Pt=S.midpoint(U,Y,U.clone()),wt=(0,n.setPositionsHeight)(Pt,Q),At.position.setValue(nt),Nt.position.setValue(ut),Lt.position.setValue(ht),Rt.position.setValue(wt),Tt.position.setValue(K),mt.position.setValue($),G.entity.editing._positions_draw=[U,H,V,Y]}}},{key:"createDraggerFun",value:function(E,N){var I,G=(0,f.default)(N,2),W=G[0],Z=G[1],U=i.createDragger(this.dataSource,{position:E,type:i.PointType.MoveLevel,tooltip:h.message.dragger.moveHeight,onDrag:function(V,Y){I=I||Y;var $;$=S.subtract(I,Y,new S),I=Y;var K=S.subtract(Z,W,new S),J=S.normalize(K,new S),Q=S.projectVector($,J,new S);Q=S.multiplyByScalar(Q,-1,new S),V.update&&V.update(Q)},onDragEnd:function(){I=null}});return U}},{key:"bindMoveHeightDraggers",value:function(){for(var E=0,N=this.draggers.length;E<N;E++)this.dataSource.entities.remove(this.draggers[E]);this.draggers=[];var I=this;this.heightDraggers=[];var G=this.entity.rectangle&&this.entity.rectangle.coordinates.getValue(),W=a.Rectangle.center(G);W.height=this.entity.rectangle.height&&this.entity.rectangle.height.getValue(),W=a.Cartographic.toCartesian(W);var Z=i.createDragger(this.dataSource,{position:W,type:i.PointType.MoveHeight,tooltip:h.message.dragger.moveHeight,onDrag:function(H,V){var Y=a.Cartographic.fromCartesian(V).height;I.getGraphic().height.setValue(Y),I.entity.attribute.style.height=Y,I.updateHeightDraggers(Y),H.callback&&H.callback(V,0)}});this.draggers.push(Z),this.heightDraggers.push(Z)}},{key:"updateHeightDraggers",value:function(E){for(var N=0;N<this.heightDraggers.length;N++){var I=this.heightDraggers[N],G=(0,n.setPositionsHeight)(I.position.getValue(this.viewer.clock.currentTime),E);I.position.setValue(G)}}}]),P}(x.EditPolyline);z.EditPolygon=O},84236:function(X,z,e){"use strict";var M=e(65557),F=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPolygonEx=void 0;var R=F(e(22777)),A=F(e(42762)),T=F(e(30044)),D=F(e(99085)),b=F(e(34009)),C=e(81983);function f(o){var u=v();return function(){var r=(0,b.default)(o),s;if(u){var c=(0,b.default)(this).constructor;s=M(r,arguments,c)}else s=r.apply(this,arguments);return(0,D.default)(this,s)}}function v(){if(typeof Reflect>"u"||!M)return![];if(M.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(M(Boolean,[],function(){})),!![]}catch{return![]}}var m=function(o){(0,T.default)(l,o);var u=f(l);function l(r){var s;return(0,R.default)(this,l),s=u.call(this,r),s._hasMidPoint=![],s}return(0,A.default)(l,[{key:"changePositionsToCallback",value:function(){this._positions_draw=this.entity._positions_draw,this._positions_show=this.entity._positions_show}},{key:"updateAttrForEditing",value:function(){if(this._positions_draw==null||this._positions_draw.length<this._minPointNum){this._positions_show=this._positions_draw;return}this._positions_show=this.getShowPositions(this._positions_draw,this.entity.attribute),this.entity._positions_show=this._positions_show}},{key:"getShowPositions",value:function(s){return s}},{key:"finish",value:function(){this.entity._positions_show=this._positions_show,this.entity._positions_draw=this._positions_draw}}]),l}(C.EditPolygon);z.EditPolygonEx=m},11478:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPolyline=void 0;var D=T(e(53267)),b=T(e(69033)),C=T(e(36583)),f=T(e(30044)),v=T(e(99085)),m=T(e(34009)),o=T(e(99245)),u=T(e(42579)),l=T(e(22777)),r=T(e(42762)),s=y(e(87647)),c=e(8817),x=e(92672),a=y(e(10614)),i=e(70317),n=y(e(25794)),h=e(80823),g=e(36161);function d(L){if(typeof R!="function")return null;var E=new R,N=new R;return(d=function(G){return G?N:E})(L)}function y(L,E){if(!E&&L&&L.__esModule)return L;if(L===null||M(L)!=="object"&&typeof L!="function")return{default:L};var N=d(E);if(N&&N.has(L))return N.get(L);var I={},G=Object.defineProperty&&A;for(var W in L)if(W!=="default"&&Object.prototype.hasOwnProperty.call(L,W)){var Z=G?A(L,W):null;Z&&(Z.get||Z.set)?Object.defineProperty(I,W,Z):I[W]=L[W]}return I.default=L,N&&N.set(L,I),I}function p(L){var E=w();return function(){var I=(0,m.default)(L),G;if(E){var W=(0,m.default)(this).constructor;G=F(I,arguments,W)}else G=I.apply(this,arguments);return(0,v.default)(this,G)}}function w(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var S=s.Cartesian3,O=s.Color.DARKORANGE.clone(),B=s.Color.DEEPSKYBLUE.clone(),k=function(){function L(){(0,l.default)(this,L)}return(0,r.default)(L,[{key:"create",value:function(N){var I=this,G=0;N.forEach(function(ie){(0,u.default)(this,I),G+=(0,g.cartesian2lonlat)(ie)[2]}.bind(this)),G/=N.length;var W=(0,x.centerOfMass)(N,G),Z=(0,g.cartesian2lonlat)(W),U;if(N.length>=3){var H=(0,h.getArea)(N),V=Math.sqrt(H/Math.PI)*2;U=V*2/111e3}else{var Y=(0,g.cartesians2lonlats)(N),$=n.featureCollection([n.lineString(Y)]),K=n.envelope($),J=(0,o.default)(K.bbox,4),Q=J[0],et=J[1],nt=J[2],st=J[3];U=Math.min(nt-Q,st-et)}var ut=[Z[0]-U/16,Z[1]-U/16,G],rt=[ut[0]+U/8,ut[1],G],ht=[ut[0],ut[1]+U/8,G],Pt=[ut[0]+U/8,ut[1]+U/8,G],wt=S.fromDegrees.apply(void 0,ut),At=S.fromDegrees.apply(void 0,rt),Nt=S.fromDegrees.apply(void 0,ht),Lt=S.fromDegrees.apply(void 0,Pt),Rt=s.Transforms.eastNorthUpToFixedFrame(W),Tt=s.Matrix4.inverse(Rt,new s.Matrix4);function mt(ie){return s.Matrix4.multiplyByPoint(Tt,ie,new S)}var Ft=mt(wt),ct=mt(At),vt=mt(Nt),Dt=mt(Lt),Ct=new s.GeometryInstance({geometry:new s.PolylineGeometry({positions:[Ft.clone(),ct.clone()],width:12,arcType:s.ArcType.NONE,vertexFormat:s.PolylineMaterialAppearance.VERTEX_FORMAT})}),jt=new s.GeometryInstance({geometry:new s.PolylineGeometry({positions:[Ft.clone(),vt.clone()],width:12,vertexFormat:s.PolylineMaterialAppearance.VERTEX_FORMAT})}),zt=S.distance(W,At),Yt=new s.CircleOutlineGeometry({center:W,radius:zt*1.2,granularity:.01});Yt=s.CircleOutlineGeometry.createGeometry(Yt);for(var Zt=[],ft=Yt.indices.length/2,gt=(0,D.default)(Yt.attributes.position),dt=0;dt<ft;dt++){var lt={x:gt[3*dt],y:gt[3*dt+1],z:gt[3*dt+2]};lt=(0,x.setPositionsHeight)(lt,G);var ot=mt(lt);Zt[dt]=ot}Zt.push(Zt[0]),Yt=new s.GeometryInstance({geometry:new s.PolylineGeometry({positions:Zt,width:6,arcType:s.ArcType.NONE,vertexFormat:s.PolylineMaterialAppearance.VERTEX_FORMAT})});var it=new s.PolygonGeometry({polygonHierarchy:new s.PolygonHierarchy([Ft.clone(),ct.clone(),Dt.clone(),vt.clone()])}),yt=new s.PlaneGeometry({vertexFormat:s.MaterialAppearance.VERTEX_FORMAT}),Ot=new s.Cartesian3(S.distance(wt,At),S.distance(wt,Nt),1),St=s.Matrix4.fromScale(Ot);it=new s.GeometryInstance({modelMatrix:St,geometry:yt});var Gt=new s.Primitive({geometryInstances:Ct,asynchronous:!![],modelMatrix:Rt,appearance:new s.PolylineMaterialAppearance({renderState:{depthTest:{enabled:![]}},material:new s.Material({fabric:{type:"PolylineArrow",uniforms:{color:B}}})})}),Ht=new s.Primitive({geometryInstances:jt,asynchronous:!![],modelMatrix:Rt,appearance:new s.PolylineMaterialAppearance({renderState:{depthTest:{enabled:![]}},material:new s.Material({fabric:{type:"PolylineArrow",uniforms:{color:B}}})})});Gt.draggerName="arrow_horizontal",Ht.draggerName="arrow_vertical";var Kt=new s.Primitive({geometryInstances:Yt,asynchronous:!![],modelMatrix:Rt,releaseGeometryInstances:![],appearance:new s.PolylineMaterialAppearance({renderState:{depthTest:{enabled:![]}},material:new s.Material({fabric:{type:"Color",uniforms:{color:O}}})})});Kt.draggerName="circle";var Jt=new s.Primitive({geometryInstances:it,asynchronous:!![],modelMatrix:Rt,appearance:new s.MaterialAppearance({material:new s.Material({fabric:{type:"Color",uniforms:{color:O}}}),renderState:{depthTest:{enabled:![]}}})});Jt.draggerName="plane";var te=new s.PrimitiveCollection;return te.add(Gt),te.add(Ht),te.add(Kt),te.add(Jt),te._origin=W,te}}]),L}(),P=function(L){(0,f.default)(N,L);var E=p(N);function N(I){var G;return(0,l.default)(this,N),G=E.call(this,I),G._positions_draw=I.entity._positions_draw,G._hasMidPoint=!![],G.hasClosure=![],G.heightDraggers=null,G}return(0,r.default)(N,[{key:"getGraphic",value:function(){return this.entity.polyline}},{key:"getPosition",value:function(){return this._positions_draw||this.entity._positions_draw}},{key:"setPositions",value:function(G){var W;this._positions_draw=G,this.entity._positions_draw=G,!(((W=this.entity.polyline)===null||W===void 0?void 0:W.positions)instanceof s.CallbackProperty)&&(this.entity.polyline.positions=new s.ConstantProperty(G)),this.updateAttrForEditing()}},{key:"changePositionsToCallback",value:function(){var G=this,W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],Z=this.entity;if(!(Z instanceof s.Entity)){Z.positions=Z._positions_draw;return}W?this.getGraphic().positions=new s.CallbackProperty(function(){return(0,u.default)(this,G),Z._positions_draw}.bind(this),![]):this.getGraphic().positions=Z._positions_draw}},{key:"finish",value:function(){this.changePositionsToCallback(![])}},{key:"isClampToGround",value:function(){return this.entity.attribute.style.clampToGround}},{key:"hasMidPoint",value:function(){return this._hasMidPoint&&this.getPosition().length<this._maxPointNum}},{key:"updatePositionsHeightByAttr",value:function(G){return G}},{key:"updateAttrForEditing",value:function(){this.entity instanceof s.Polyline&&(this.entity.positions=this.getPosition())}},{key:"bindDraggers",value:function(){for(var G=this,W=this,Z=this.getPosition(),U=this.isClampToGround(),H=this.hasMidPoint(),V=function(J){var Q=this,et=Z[Y];et=G.updatePositionsHeightByAttr(et),U&&(et=(0,x.updateHeightForClampToGround)(G.viewer,et),Z[Y]=et);var nt=a.createDragger(G.dataSource,{position:et,onDragStart:function(Pt,wt){(0,u.default)(this,Q),W.fire("drag-start",Pt,wt)}.bind(this),onDrag:function(Pt,wt){if(wt=W.updatePositionsHeightByAttr(wt),Pt.position=wt,Z[Pt.index]=wt,Pt.callback&&Pt.callback(Z),W.heightDraggers&&W.heightDraggers.length>0){var At=W.getGraphic().extrudedHeight.getValue(W.viewer.clock.currentTime);W.heightDraggers[Pt.index].position=(0,x.setPositionsHeight)(wt,At)}if(H){var Nt,Lt;if(W.hasClosure||!W.hasClosure&&Pt.index!==0){Pt.index===0?(Nt=J*2-1,Lt=J-1):(Nt=Pt.index*2-1,Lt=Pt.index-1);var Rt=Z[Lt],Tt=S.midpoint(wt,Rt,new S);Tt=W.updatePositionsHeightByAttr(Tt),U&&(Tt=(0,x.updateHeightForClampToGround)(W.viewer,Tt)),W.draggers[Nt].position=Tt}if(W.hasClosure||!W.hasClosure&&Pt.index!==J-1){Pt.index===J-1?(Nt=Pt.index*2+1,Lt=0):(Nt=Pt.index*2+1,Lt=Pt.index+1);var mt=S.midpoint(wt,Z[Lt],new S);mt=W.updatePositionsHeightByAttr(mt),U&&(mt=(0,x.updateHeightForClampToGround)(W.viewer,mt)),W.draggers[Nt].position=mt}}W.fire("drag",Pt,wt)},onDragEnd:function(Pt,wt){W.fire("drag-end",Pt,wt)}});if(nt.index=Y,G.draggers.push(nt),H&&(G.hasClosure||!G.hasClosure&&Y<J-1)){var st=(Y+1)%J,ut=S.midpoint(et,Z[st],new S);ut=W.updatePositionsHeightByAttr(ut),U&&(ut=(0,x.updateHeightForClampToGround)(G.viewer,ut));var rt=a.createDragger(G.dataSource,{position:ut,type:a.PointType.AddMidPoint,tooltip:i.message.dragger.addMidPoint,onDragStart:function(Pt,wt){(0,b.default)(Z).call(Z,Pt.index,0,wt),W.entity.thisIdx=Pt.index,W.fire("drag-start",Pt,wt)},onDrag:function(Pt,wt){Z[Pt.index]=wt,Pt.callback&&Pt.callback(Z),W.fire("drag",Pt,wt)},onDragEnd:function(Pt,wt){W.updateDraggers(),W.fire("drag-end",Pt,wt)}});rt.index=st,rt._isMidPoint=!![],G.draggers.push(rt)}},Y=0,$=Z.length;Y<$;Y++)V($);this.entity.attribute.style.isCompositeDragger&&this.bindCompositeDraggers()}},{key:"bindCompositeDraggers",value:function(){var G,W=this,Z=this,U=this.getPosition(),H=(G=this.getGraphic().extrudedHeight)===null||G===void 0?void 0:G.getValue();if(H)return;var V=new k;this.draggers_pri=V.create(U),this.viewer.scene.primitives.add(this.draggers_pri);function Y(){var rt=this,ht,Pt,wt,At,Nt=Z.getPosition(),Lt=0;Nt.forEach(function(Tt){(0,u.default)(this,rt),Lt+=(0,g.cartesian2lonlat)(Tt)[2]}.bind(this)),Lt/=Nt.length;var Rt=(0,x.centerOfMass)(Nt,Lt);return wt=s.Transforms.eastNorthUpToFixedFrame(Rt),At=s.Matrix4.inverse(wt,new s.Matrix4),ht=s.Matrix4.multiplyByPoint(wt,new S(1,0,0),new S),Pt=s.Matrix4.multiplyByPoint(wt,new S(0,1,0),new S),S.subtract(Rt,ht,ht),S.subtract(Rt,Pt,Pt),S.normalize(ht,ht),S.normalize(Pt,Pt),[ht,Pt,wt,At]}var $=Y(),K=(0,o.default)($,4),J=K[0],Q=K[1],et=K[2],nt=K[3];function st(rt){return s.Matrix4.multiplyByPoint(nt,rt,new S)}function ut(rt){return s.Matrix4.multiplyByPoint(et,rt,new S)}this.draggers_pri._primitives.forEach(function(rt){var ht=this;(0,u.default)(this,W);var Pt,wt=new S,At=new S,Nt,Lt,Rt;a.createDragger(this.dataSource,{dragger:rt,onDragStart:function(mt,Ft){(0,u.default)(this,ht),Rt=mt.draggerName,Pt=Ft;var ct=this.getPosition(),vt=(0,x.centerOfMass)(ct);Nt=s.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,vt),s.Matrix4.multiplyByPoint(nt,Ft,At)}.bind(this),onDrag:function(mt,Ft){(0,u.default)(this,ht),s.Matrix4.multiplyByPoint(nt,Ft,wt);var ct=S.subtract(wt,At,new S);switch(Rt){case"arrow_horizontal":{S.projectVector(ct,S.UNIT_X,ct);break}case"arrow_vertical":{S.projectVector(ct,s.Cartesian3.UNIT_Y,ct);break}case"circle":{Lt=Lt||s.SceneTransforms.wgs84ToWindowCoordinates(Z.viewer.scene,Pt);var vt=s.SceneTransforms.wgs84ToWindowCoordinates(Z.viewer.scene,Ft),Dt=S.subtract(Lt,Nt,new S),Ct=S.subtract(vt,Nt,new S);if(Lt=vt,Dt.z=Ct.z=0,S.magnitude(Dt)===0)return;var jt=S.angleBetween(Dt,Ct),zt=s.Cartesian3.cross(Ct,Dt,new S);zt=zt.z/Math.abs(zt.z),jt*=zt;for(var Yt=s.Matrix3.fromRotationZ(jt),Zt=this.getPosition(),ft=0;ft<Zt.length;ft++){var gt=s.Matrix4.multiplyByPoint(nt,Zt[ft],new S),dt=s.Matrix3.multiplyByVector(Yt,gt,new s.Cartesian3),lt=s.Matrix4.multiplyByPoint(et,dt,new S);Zt[ft]=lt,Z.setPositions((0,C.default)(Zt))}for(var ot=0;ot<this.draggers_pri.length;ot++){var it=this.draggers_pri.get(ot);s.Matrix4.multiplyByMatrix3(it.modelMatrix,Yt,it.modelMatrix)}s.Matrix3.multiplyByVector(Yt,J,J),s.Matrix3.multiplyByVector(Yt,Q,Q),Pt=Ft.clone(),Z.updateDraggerPositions();return}}for(var yt=s.Matrix4.fromTranslation(ct,new s.Matrix4),Ot=this.getPosition(),St=0;St<Ot.length;St++){var Gt=st(Ot[St]);s.Matrix4.multiplyByPoint(yt,Gt,Gt);var Ht=ut(Gt);Ot[St]=Ht}Z.setPositions((0,C.default)(Ot));for(var Kt=0;Kt<this.draggers_pri.length;Kt++){var Jt=this.draggers_pri.get(Kt);s.Matrix4.multiply(Jt.modelMatrix,yt,Jt.modelMatrix)}Pt=Ft.clone(),et=this.draggers_pri.get(0).modelMatrix.clone(),nt=s.Matrix4.inverse(et,new s.Matrix4),s.Matrix4.multiplyByPoint(nt,Ft,At),Z.updateDraggerPositions()}.bind(this),onDragEnd:function(){(0,u.default)(this,ht),Lt=Pt=Rt=void 0}.bind(this)})}.bind(this))}},{key:"updateDraggerPositions",value:function(){if(!this._enabled)return this;for(var G=this.getPosition(),W=this.draggers,Z=0,U=W.length;Z<U;Z++){var H=W[Z],V=Math.floor(Z/2);if(!H._isMidPoint)H.position=G[V];else{var Y=[G[V],G[V+1]||G[0]],$=Y[0],K=Y[1],J=S.midpoint($,K,new S);J=this.updatePositionsHeightByAttr(J),H.position=J}}}}]),N}(c.EditBase);z.EditPolyline=P},25018:function(X,z,e){"use strict";var M=e(65557),F=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditPolylineVolume=void 0;var R=F(e(22777)),A=F(e(42762)),T=F(e(30044)),D=F(e(99085)),b=F(e(34009)),C=e(11478);function f(o){var u=v();return function(){var r=(0,b.default)(o),s;if(u){var c=(0,b.default)(this).constructor;s=M(r,arguments,c)}else s=r.apply(this,arguments);return(0,D.default)(this,s)}}function v(){if(typeof Reflect>"u"||!M)return![];if(M.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(M(Boolean,[],function(){})),!![]}catch{return![]}}var m=function(o){(0,T.default)(l,o);var u=f(l);function l(r){return(0,R.default)(this,l),u.call(this,r)}return(0,A.default)(l,[{key:"getGraphic",value:function(){return this.entity.polylineVolume}},{key:"changePositionsToCallback",value:function(){this._positions_draw=this.entity._positions_draw}}]),l}(C.EditPolyline);z.EditPolylineVolume=m},91537:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditRectangle=void 0;var D=T(e(22777)),b=T(e(42762)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=e(81983),o=e(92672),u=e(10614),l=s(e(87647));function r(i){if(typeof R!="function")return null;var n=new R,h=new R;return(r=function(d){return d?h:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=r(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&A;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?A(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}function c(i){var n=x();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,C.default)(h,i);var n=c(h);function h(g){return(0,D.default)(this,h),n.call(this,g)}return(0,b.default)(h,[{key:"getGraphic",value:function(){return this.entity.rectangle}},{key:"setPositions",value:function(d){this.entity._positions_draw=d,this._positions_draw=d,this.getGraphic().coordinates instanceof l.ConstantProperty&&(this.getGraphic().coordinates=new l.ConstantProperty(l.Rectangle.fromCartesianArray(d)))}},{key:"getPositionsFromEntity",value:function(){this._positions_draw=this.entity._positions_draw}},{key:"changePositionsToCallback",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],y=this.entity;d?y.rectangle.coordinates=new l.CallbackProperty(function(){return y._positions_draw.length<2?null:l.Rectangle.fromCartesianArray(y._positions_draw)},![]):y.rectangle.coordinates=y.rectangle.coordinates.getValue()}},{key:"finish",value:function(){this.entity._positions_draw=this._positions_draw,this.changePositionsToCallback(![])}},{key:"isClampToGround",value:function(){return this.entity.attribute.style.clampToGround}},{key:"bindDraggers",value:function(){for(var d=this,y=this.isClampToGround(),p=this.getPosition(),w=0,S=p.length;w<S;w++){var O=p[w];if(this.getGraphic().height!==void 0){var B=this.getGraphic().height.getValue(this.viewer.clock.currentTime);O=(0,o.setPositionsHeight)(O,B)}y&&(O=(0,o.updateHeightForClampToGround)(this.viewer,O));var k=(0,u.createDragger)(this.dataSource,{position:O,onDrag:function(L,E){if(d.getGraphic().height!==void 0){var N=d.getGraphic().height.getValue(d.viewer.clock.currentTime);E=(0,o.setPositionsHeight)(E,N),L.position=E}if(p[L.index]=E,d.getGraphic().coordinates instanceof l.ConstantProperty&&(d.getGraphic().coordinates=l.Rectangle.fromCartesianArray(p)),d.heightDraggers&&d.heightDraggers.length>0){var I=d.getGraphic().extrudedHeight.getValue(d.viewer.clock.currentTime);d.heightDraggers[L.index].position=(0,o.setPositionsHeight)(E,I)}}});k.index=w,this.draggers.push(k)}this.getGraphic().extrudedHeight&&this.bindHeightDraggers(),this.entity.attribute.style.isMoveHeightPlane&&this.bindMoveHeightDraggers(),this.entity.attribute.style.isBoxbelow&&this.bindBoxDraggers()}}]),h}(m.EditPolygon);z.EditRectangle=a},28769:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(85208),A=e(59791),T=e(22466),D=e(83393),b=e(5077),C=e(87879),f=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditVideoProjection=void 0;var v=f(e(43389)),m=f(e(42579)),o=f(e(22777)),u=f(e(42762)),l=f(e(30044)),r=f(e(99085)),s=f(e(34009)),c=d(e(87647)),x=d(e(10614)),a=e(8817),i=e(70317),n=e(36161),h=f(e(56865));function g(k){if(typeof C!="function")return null;var P=new C,L=new C;return(g=function(N){return N?L:P})(k)}function d(k,P){if(!P&&k&&k.__esModule)return k;if(k===null||M(k)!=="object"&&typeof k!="function")return{default:k};var L=g(P);if(L&&L.has(k))return L.get(k);var E={},N=Object.defineProperty&&D;for(var I in k)if(I!=="default"&&Object.prototype.hasOwnProperty.call(k,I)){var G=N?D(k,I):null;G&&(G.get||G.set)?Object.defineProperty(E,I,G):E[I]=k[I]}return E.default=k,L&&L.set(k,E),E}function y(k,P){var L=R(k);if(A){var E=A(k);P&&(E=T(E).call(E,function(N){return D(k,N).enumerable})),L.push.apply(L,E)}return L}function p(k){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?y(Object(L),!0).forEach(function(E){(0,v.default)(k,E,L[E])}):b?Object.defineProperties(k,b(L)):y(Object(L)).forEach(function(E){Object.defineProperty(k,E,D(L,E))})}return k}function w(k){var P=S();return function(){var E=(0,s.default)(k),N;if(P){var I=(0,s.default)(this).constructor;N=F(E,arguments,I)}else N=E.apply(this,arguments);return(0,r.default)(this,N)}}function S(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var O=function(k){(0,l.default)(L,k);var P=w(L);function L(E){var N;return(0,o.default)(this,L),N=P.call(this,E),N.viewer=E.viewer,N}return(0,u.default)(L,[{key:"activate",value:function(){var N;return this._enabled?this:(this._enabled=!![],this.entity.inProgress=!![],this.getPositionsFromEntity(),this.changePositionsToCallback(),this.bindDraggers(),this.bindEvent(),this.fire("edit-start",{drawtype:(N=this.entity.attribute)===null||N===void 0?void 0:N.drawtype,entity:this.entity,geojson:this.toGeoJSON(this.entity)}),this)}},{key:"disable",value:function(){var N;return this._enabled?(this._enabled=![],this.destroyEvent(),this.destroyDraggers(),this.finish(),this.destroyVideoProjection(),this.entity.inProgress=![],this.fire("edit-stop",{drawtype:(N=this.entity.attribute)===null||N===void 0?void 0:N.drawtype,entity:this.entity}),this.tooltip.setVisible(![]),this):this}},{key:"destroyVideoProjection",value:function(){this.VideoProjection&&(this.VideoProjection.destroy(),this.VideoProjection=null)}},{key:"updateAttrForEditing",value:function(){this.entity.attribute.style.getPrmFromScene&&this.getParamaterFromScene();var N=this.entity.attribute.style;N.viewPosition=this.getPosition(),this.VideoProjection=new h.default({viewer:this.viewer},N),this.VideoProjection.execute(),(N.getDistance||N.getHeading)&&this.getParamaterFromClick()}},{key:"getParamaterFromClick",value:function(){var N=this,I=this.entity.attribute.style,G={drawtype:"point",success:function(Z){var U=this;(0,m.default)(this,N),this._enabled=!![];var H=this.getPosition(),V=Z.position.getValue();if(I.getDistance){var Y=c.Cartesian3.distance(H,V);I.viewDistance=Number(Y.toFixed(2))}else if(I.getHeading){var $=B(H,V);I.viewHeading=Number($.toFixed(2))}I.getDistance=![],I.getHeading=![],this.updateAttrForEditing();var K=this.toGeoJSON(this.entity);this.fire("edit-move-point",{geojson:K,drawtype:this.entity.attribute.drawtype,entity:this.entity,position:H}),setTimeout(function(){(0,m.default)(this,U),this.viewer.shine.draw.deleteFeatureById(Z.id,"temporaryDrawLayer")}.bind(this),2e3)}.bind(this)};this._enabled=![],this.viewer.shine.draw.startDraw(G)}},{key:"getParamaterFromScene",value:function(){var N=this.entity.attribute.style;N.getPrmFromScene=![];var I=this.viewer.camera,G=I.position;this.setPositions(G);var W=(0,n.formatNum)(c.Math.toDegrees(I.heading),2),Z=(0,n.formatNum)(c.Math.toDegrees(I.pitch),2),U=I.positionCartographic.height/Math.sin(Math.abs(I.pitch));U=(0,n.formatNum)(U,2);var H=(0,n.formatNum)(c.Math.toDegrees(I.frustum.fov),2),V=(0,n.formatNum)(c.Math.toDegrees(I.frustum.fovy),2);this.entity.attribute.style=p(p({},N),{},{viewPosition:G,viewHeading:W,viewPitch:Z,viewDistance:U,horizontalViewAngle:H,verticalViewAngle:V});var Y=this.toGeoJSON(this.entity);this.fire("edit-move-point",{geojson:Y,drawtype:this.entity.attribute.drawtype,entity:this.entity})}},{key:"getGraphic",value:function(){return this.entity.point}},{key:"getPosition",value:function(){return this.entity.position.getValue?this.entity.position.getValue():this.entity.position}},{key:"setPositions",value:function(N){this.entity.position=N[0]||N,this.updateAttrForEditing()}},{key:"bindDraggers",value:function(){var N=this;this.entity.draw_tooltip=i.message.dragger.def,x.createDragger(this.dataSource,{dragger:this.entity,onDrag:function(G,W){N.setPositions(W),N.entity.isbounce==!![]&&N.addAnimate(N.viewer,N.entity)}})}},{key:"addAnimate",value:function(N,I){var G=(0,n.cartesian2lonlat)(I.position.getValue())[2],W={maxHeight:G+50,minHeight:G,heightDelta:.5},Z=W.minHeight,U=W.maxHeight,H=W.heightDelta,V=(0,n.cartesian2lonlat)(I.position.getValue())[0],Y=(0,n.cartesian2lonlat)(I.position.getValue())[1];N.scene.preUpdate.addEventListener(function(){G+=H,I.position=c.Cartesian3.fromDegrees(V,Y,G);var $=I.position.getValue(),K=c.Cartographic.fromCartesian($,c.Ellipsoid.WGS84);(K.height>=U||K.height<=Z)&&(H*=-1)})}},{key:"finish",value:function(){this.entity.draw_tooltip=null}}]),L}(a.EditBase);z.EditVideoProjection=O;function B(k,P){var L=new c.Cartesian3,E=c.Transforms.eastNorthUpToFixedFrame(k);return c.Matrix4.inverse(E,E),c.Matrix4.multiplyByPoint(E,P,L),c.Cartesian3.normalize(L,L),c.Math.toDegrees(Math.atan2(L.x,L.y))}},92386:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.EditWall=void 0;var D=T(e(69033)),b=T(e(99245)),C=T(e(22777)),f=T(e(42762)),v=T(e(30044)),m=T(e(99085)),o=T(e(34009)),u=i(e(87647)),l=i(e(10614)),r=e(11478),s=e(70317),c=e(92672),x=e(36161);function a(d){if(typeof R!="function")return null;var y=new R,p=new R;return(a=function(S){return S?p:y})(d)}function i(d,y){if(!y&&d&&d.__esModule)return d;if(d===null||M(d)!=="object"&&typeof d!="function")return{default:d};var p=a(y);if(p&&p.has(d))return p.get(d);var w={},S=Object.defineProperty&&A;for(var O in d)if(O!=="default"&&Object.prototype.hasOwnProperty.call(d,O)){var B=S?A(d,O):null;B&&(B.get||B.set)?Object.defineProperty(w,O,B):w[O]=d[O]}return w.default=d,p&&p.set(d,w),w}function n(d){var y=h();return function(){var w=(0,o.default)(d),S;if(y){var O=(0,o.default)(this).constructor;S=F(w,arguments,O)}else S=w.apply(this,arguments);return(0,m.default)(this,S)}}function h(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var g=function(d){(0,v.default)(p,d);var y=n(p);function p(w){var S;return(0,C.default)(this,p),S=y.call(this,w),S._maximumHeights=null,S._minimumHeights=null,S.heightDraggers=null,S}return(0,f.default)(p,[{key:"getGraphic",value:function(){return this.entity.wall}},{key:"getPositionsFromEntity",value:function(){var S,O,B=this.viewer.clock.currentTime;this._positions_draw=this.entity._positions_draw||this.getGraphic().positions.getValue(B),this._minimumHeights=this.entity._minimumHeights||((S=this.getGraphic().minimumHeights)===null||S===void 0?void 0:S.getValue(B)),this._maximumHeights=this.entity._maximumHeights||((O=this.getGraphic().maximumHeights)===null||O===void 0?void 0:O.getValue(B))}},{key:"updateAttrForEditing",value:function(){var S=this.entity.attribute.style,O=this.getPosition(),B=O.length;this._maximumHeights=new Array(B),this._minimumHeights=new Array(B);for(var k=0;k<B;k++){var P=u.Cartographic.fromCartesian(O[k]).height;this._minimumHeights[k]=P,this._maximumHeights[k]=P+Number(S.extrudedHeight)}this.entity._maximumHeights=this._maximumHeights,this.entity._minimumHeights=this._minimumHeights,this.getGraphic().maximumHeights=this._maximumHeights,this.getGraphic().minimumHeights=this._minimumHeights}},{key:"setPositions",value:function(S){this._positions_draw=S,this.entity._positions_draw=S,!(this.getGraphic().positions instanceof u.CallbackProperty)&&(this.entity.wall.positions=new u.ConstantProperty(S)),this.updateAttrForEditing()}},{key:"finish",value:function(){this.entity._positions_draw=this._positions_draw,this.entity._maximumHeights=this._maximumHeights,this.entity._minimumHeights=this._minimumHeights}},{key:"bindDraggers",value:function(){for(var S=this,O=this.isClampToGround(),B=this.getPosition(),k=this.entity.attribute.style,P=B.length<this._maxPointNum,L=0,E=B.length;L<E;L++){var N=B[L],I=l.createDragger(this.dataSource,{position:N,clampToGround:O,onDrag:function(H,V){B[H.index]=V,S.heightDraggers&&S.heightDraggers.length>0&&(S.heightDraggers[H.index].position=(0,c.addPositionsHeight)(V,k.extrudedHeight)),P&&(H.index>0&&(S.draggers[H.index*2-1].position=u.Cartesian3.midpoint(V,B[H.index-1],new u.Cartesian3)),H.index<B.length-1&&(S.draggers[H.index*2+1].position=u.Cartesian3.midpoint(V,B[H.index+1],new u.Cartesian3)))}});if(I.index=L,this.draggers.push(I),P){var G=L+1;if(G<E){var W=u.Cartesian3.midpoint(N,B[G],new u.Cartesian3),Z=l.createDragger(this.dataSource,{position:W,type:l.PointType.AddMidPoint,tooltip:s.message.dragger.addMidPoint,clampToGround:O,onDragStart:function(H,V){(0,D.default)(B).call(B,H.index,0,V),S.updateAttrForEditing()},onDrag:function(H,V){B[H.index]=V},onDragEnd:function(){S.updateDraggers()}});Z.index=G,this.draggers.push(Z)}}}this.bindHeightDraggers(),this.entity.attribute.config&&this.entity.attribute.config.isContour&&this.bindMoveHorizontalDraggers(B)}},{key:"bindHeightDraggers",value:function(){var S=this;this.heightDraggers=[];for(var O=this.getPosition(),B=this.entity.attribute.style,k=Number(B.extrudedHeight),P=0,L=O.length;P<L;P++){var E=(0,c.addPositionsHeight)(O[P],k),N=l.createDragger(this.dataSource,{position:E,type:l.PointType.MoveHeight,tooltip:s.message.dragger.moveHeight,onDrag:function(G,W){var Z=u.Cartographic.fromCartesian(W).height;B.extrudedHeight=S.formatNum(Z-S._minimumHeights[G.index],2);for(var U=0;U<O.length;U++)U!==G.index&&(S.heightDraggers[U].position=(0,c.addPositionsHeight)(O[U],B.extrudedHeight));S.updateAttrForEditing()}});N.index=P,this.draggers.push(N),this.heightDraggers.push(N)}}},{key:"bindMoveHorizontalDraggers",value:function(S){for(var O=this,B=0,k=this.draggers.length;B<k;B++)this.dataSource.entities.remove(this.draggers[B]);this.draggers=[],this.heightDraggers=[],S=this.entity.wall.positions.getValue();var P=S,L=(0,b.default)(P,2),E=L[0],N=L[1],I=u.Cartesian3.midpoint(E,N,E.clone()),G=(0,x.cartesian2lonlat)(I),W=this.entity.attribute.style.extrudedHeight/2;G=u.Cartesian3.fromDegrees(G[0],G[1],G[2]+W);var Z,U=l.createDragger(this.dataSource,{position:G,type:l.PointType.MoveLevel,tooltip:"\u9F20\u6807\u62D6\u62FD\u5207\u9762",onDrag:function(ht,Pt){var wt=O.entity.wall.positions.getValue(),At=(0,b.default)(wt,2),Nt=At[0],Lt=At[1],Rt=u.Cartesian3.subtract(Nt,Lt,new u.Cartesian3),Tt=u.Cartesian3.midpoint(Nt,Lt,new u.Cartesian3),mt=Pt,Ft;Z=Z||Pt,Ft=u.Cartesian3.subtract(Z,mt,new u.Cartesian3),Z=Pt;var ct=u.Cartographic.fromCartesian(Tt);ct.height=50;var vt=u.Cartographic.toCartesian(ct),Dt=u.Cartesian3.subtract(Tt,vt,new u.Cartesian3),Ct=u.Cartesian3.cross(Rt,Dt,new u.Cartesian3);Ct=u.Cartesian3.normalize(Ct,new u.Cartesian3);var jt=u.Cartesian3.projectVector(Ft,Ct,new u.Cartesian3);jt=u.Cartesian3.multiplyByScalar(jt,-1,new u.Cartesian3),Nt=u.Cartesian3.add(Nt,jt,new u.Cartesian3),Lt=u.Cartesian3.add(Lt,jt,new u.Cartesian3),O.entity.wall.positions=[Nt,Lt],O._positions_draw=[Nt,Lt],ut(),ht.callback&&ht.callback([Nt,Lt],"facade1")},onDragEnd:function(){Z=null}}),H=this.entity.attribute.style,V=u.Cartesian3.midpoint(E,N,E.clone()),Y=(0,c.addPositionsHeight)(V,Number(H.extrudedHeight)),$=l.createDragger(this.dataSource,{position:Y,type:l.PointType.MoveHeight,tooltip:s.message.dragger.moveHeight,onDrag:function(ht,Pt){var wt=u.Cartographic.fromCartesian(Pt).height,At=u.Cartographic.fromCartesian(J.position.getValue()).height;At<wt?(H.extrudedHeight=O.formatNum(wt-O._minimumHeights[0],2),$.position=Pt,O.updateAttrForEditing(),ut(),ht.callback&&ht.callback(Pt,"facade4")):$.position=(0,c.setPositionsHeight)(Pt,At)}}),K,J=l.createDragger(this.dataSource,{position:I,type:l.PointType.MoveHeight,tooltip:s.message.dragger.moveHeight,onDrag:function(ht,Pt){var wt=u.Cartographic.fromCartesian(Pt).height,At=u.Cartographic.fromCartesian($.position.getValue()).height;if(wt<At){K=K||Pt;var Nt=u.Cartographic.fromCartesian(K).height-u.Cartographic.fromCartesian(Pt).height;H.extrudedHeight+=Nt;for(var Lt=O._positions_draw,Rt=[],Tt=0;Tt<Lt.length;Tt++)Rt.push((0,c.setPositionsHeight)(Lt[Tt],wt));O._positions_draw=Rt,O.entity.wall.positions=Rt,et.position=Rt[0],st.position=Rt[1],J.position=Pt,ut(),ht.callback&&ht.callback(Pt,"facade5"),K=Pt}else J.position=(0,c.setPositionsHeight)(Pt,At)}}),Q,et=l.createDragger(this.dataSource,{position:E,type:l.PointType.MoveLevel,tooltip:s.message.dragger.moveHeight,onDrag:function(ht,Pt){var wt=O.entity.wall.positions.getValue(),At=(0,b.default)(wt,2),Nt=At[0],Lt=At[1];Q=Q||Pt;var Rt;Rt=u.Cartesian3.subtract(Q,Pt,new u.Cartesian3),Q=Pt;var Tt=u.Cartesian3.subtract(Nt,Lt,new u.Cartesian3),mt=u.Cartesian3.normalize(Tt,new u.Cartesian3),Ft=u.Cartesian3.projectVector(Rt,mt,new u.Cartesian3);Ft=u.Cartesian3.multiplyByScalar(Ft,-1,new u.Cartesian3),Nt=u.Cartesian3.add(Nt,Ft,new u.Cartesian3),O._positions_draw=[Nt,Lt],O.entity.wall.positions=[Nt,Lt],O.updateAttrForEditing(),ut(),ht.callback&&ht.callback([Nt,Lt],"facade2")},onDragEnd:function(){Q=null}}),nt,st=l.createDragger(this.dataSource,{position:N,type:l.PointType.MoveLevel,tooltip:s.message.dragger.moveHeight,onDrag:function(ht,Pt){var wt=O.entity.wall.positions.getValue(),At=(0,b.default)(wt,2),Nt=At[0],Lt=At[1];nt=nt||Pt;var Rt;Rt=u.Cartesian3.subtract(nt,Pt,new u.Cartesian3),nt=Pt;var Tt=u.Cartesian3.subtract(Nt,Lt,new u.Cartesian3),mt=u.Cartesian3.normalize(Tt,new u.Cartesian3),Ft=u.Cartesian3.projectVector(Rt,mt,new u.Cartesian3);Ft=u.Cartesian3.multiplyByScalar(Ft,-1,new u.Cartesian3),Lt=u.Cartesian3.add(Lt,Ft,new u.Cartesian3),O._positions_draw=[Nt,Lt],O.entity.wall.positions=[Nt,Lt],O.updateAttrForEditing(),ut(),ht.callback&&ht.callback([Nt,Lt],"facade3")},onDragEnd:function(){nt=null}});U.point.color=new u.Color.fromCssColorString("#f00"),et.point.color=new u.Color.fromCssColorString("#1c197d"),st.point.color=new u.Color.fromCssColorString("#1c197d"),this.draggers.push(U,$,et,st,J),this.heightDraggers.push($),this.horizontalDraggers=this.horizontalDraggers?this.horizontalDraggers:[],this.horizontalDraggers.push(U);function ut(){var rt=(0,b.default)(O._positions_draw,2),ht=rt[0],Pt=rt[1],wt=u.Cartesian3.midpoint(ht,Pt,ht.clone());$.position=(0,c.addPositionsHeight)(wt,Number(H.extrudedHeight)),et.position=ht,st.position=Pt;var At=u.Cartesian3.midpoint(ht,Pt,ht.clone());J.position=At,U.position=u.Cartesian3.midpoint(At,$.position.getValue(),At.clone())}}},{key:"updateHorizontalDraggers",value:function(){var S=this.entity.wall.positions.getValue(),O=(0,b.default)(S,2),B=O[0],k=O[1],P=u.Cartesian3.midpoint(B,k,B.clone()),L=(0,x.cartesian2lonlat)(P),E=this.entity.attribute.style.extrudedHeight/2;L=u.Cartesian3.fromDegrees(L[0],L[1],L[2]+E),this.horizontalDraggers[0].position=L}}]),p}(r.EditPolyline);z.EditWall=g},8974:function(X,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),Object.defineProperty(z,"EditBase",{enumerable:!![],get:function(){return M.EditBase}}),Object.defineProperty(z,"EditCircle",{enumerable:!![],get:function(){return o.EditCircle}}),Object.defineProperty(z,"EditCorridor",{enumerable:!![],get:function(){return f.EditCorridor}}),Object.defineProperty(z,"EditCurve",{enumerable:!![],get:function(){return m.EditCurve}}),Object.defineProperty(z,"EditCylinder",{enumerable:!![],get:function(){return A.EditCylinder}}),Object.defineProperty(z,"EditEllipsoid",{enumerable:!![],get:function(){return T.EditEllipsoid}}),Object.defineProperty(z,"EditPModel",{enumerable:!![],get:function(){return F.EditPModel}}),Object.defineProperty(z,"EditPoint",{enumerable:!![],get:function(){return u.EditPoint}}),Object.defineProperty(z,"EditPolygon",{enumerable:!![],get:function(){return b.EditPolygon}}),Object.defineProperty(z,"EditPolygonEx",{enumerable:!![],get:function(){return l.EditPolygonEx}}),Object.defineProperty(z,"EditPolyline",{enumerable:!![],get:function(){return R.EditPolyline}}),Object.defineProperty(z,"EditPolylineVolume",{enumerable:!![],get:function(){return v.EditPolylineVolume}}),Object.defineProperty(z,"EditRectangle",{enumerable:!![],get:function(){return C.EditRectangle}}),Object.defineProperty(z,"EditWall",{enumerable:!![],get:function(){return D.EditWall}});var M=e(8817),F=e(33843),R=e(11478),A=e(406),T=e(38766),D=e(92386),b=e(81983),C=e(91537),f=e(45691),v=e(25018),m=e(39670),o=e(43889),u=e(56248),l=e(84236)},25074:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Cesium=z.AnimationLineMaterialProperty=void 0,Object.defineProperty(z,"CircleFadeMaterial",{enumerable:!![],get:function(){return d.CircleFadeMaterial}}),Object.defineProperty(z,"Class",{enumerable:!![],get:function(){return D.Class}}),Object.defineProperty(z,"DivPoint",{enumerable:!![],get:function(){return g.DivPoint}}),Object.defineProperty(z,"Draw",{enumerable:!![],get:function(){return c.Draw}}),z.L=z.Handle=z.ElliposidFadeMaterialProperty=z.DrawEdit=void 0,Object.defineProperty(z,"Layer",{enumerable:!![],get:function(){return f.Layer}}),Object.defineProperty(z,"LineFlowMaterial",{enumerable:!![],get:function(){return y.LineFlowMaterial}}),z.Map=void 0,Object.defineProperty(z,"MapVLayer",{enumerable:!![],get:function(){return s.MapVLayer}}),z.Matrix=void 0,Object.defineProperty(z,"Measure",{enumerable:!![],get:function(){return k.Measure}}),Object.defineProperty(z,"OLCesium",{enumerable:!![],get:function(){return P.default}}),z.Util=z.Tileset=z.PointConvert=z.Point=void 0,Object.defineProperty(z,"ViewerEx",{enumerable:!![],get:function(){return C.ViewerEx}}),z.website=z.version=z.update=z.name=z.latlng=z.draw=z.author=void 0;var T=E(e(87647));z.Cesium=T;var D=e(79651),b=E(e(95367));z.Map=b;var C=e(59802),f=e(66828),v=E(e(94777));z.PointConvert=v;var m=E(e(80823));z.Util=m;var o=E(e(42038));z.Handle=o;var u=E(e(68821));z.Tileset=u;var l=E(e(71746));z.Matrix=l;var r=E(e(92672));z.Point=r;var s=e(75211),c=e(42786),x=E(e(31984)),a=E(e(42795)),i=E(e(70317)),n=E(e(36161)),h=E(e(10614)),g=e(96789),d=e(46817),y=e(58570),p=E(e(3852)),w=E(e(36034)),S=e(28579),O=e(39613),B=e(8974),k=e(86712),P=A(e(64828));function L(J){if(typeof F!="function")return null;var Q=new F,et=new F;return(L=function(st){return st?et:Q})(J)}function E(J,Q){if(!Q&&J&&J.__esModule)return J;if(J===null||M(J)!=="object"&&typeof J!="function")return{default:J};var et=L(Q);if(et&&et.has(J))return et.get(J);var nt={},st=Object.defineProperty&&R;for(var ut in J)if(ut!=="default"&&Object.prototype.hasOwnProperty.call(J,ut)){var rt=st?R(J,ut):null;rt&&(rt.get||rt.set)?Object.defineProperty(nt,ut,rt):nt[ut]=J[ut]}return nt.default=J,et&&et.set(J,nt),nt}var N="";z.name=N;var I="";z.version=I;var G="";z.update=G;var W="";z.author=W;var Z="";z.website=Z;var U={};z.draw=U,U.register=c.Draw.register,U.util=n,U.event=a,U.tooltip=i.message,U.dragger=h,U.attr=x;var H={Base:B.EditBase,Circle:B.EditCircle,Corridor:B.EditCorridor,Curve:B.EditCurve,Ellipsoid:B.EditEllipsoid,Point:B.EditPoint,Polygon:B.EditPolygon,PolygonEx:B.EditPolygonEx,Polyline:B.EditPolyline,PolylineVolume:B.EditPolylineVolume,Rectangle:B.EditRectangle,Wall:B.EditWall,PModel:B.EditPModel,Cylinder:B.EditCylinder};z.DrawEdit=H;var V=p;z.L=V,V.esri=w,f.Layer.ArcFeatureLayer=S.ArcFeatureLayer,f.Layer.regLayerForConfig("arcgis_feature2",S.ArcFeatureLayer),f.Layer.ArcFeatureGridLayer=O.ArcFeatureGridLayer,f.Layer.regLayerForConfig("arcgis_feature",O.ArcFeatureGridLayer);var Y=y.LineFlowMaterial;z.AnimationLineMaterialProperty=Y;var $=d.CircleFadeMaterial;z.ElliposidFadeMaterialProperty=$;var K=r;z.latlng=K},66828:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(85208),A=e(59791),T=e(22466),D=e(83393),b=e(5077),C=e(20314),f=e(26352),v=e(40639),m=e(43586),o=e(87879),u=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Layer=void 0;var l=u(e(43389)),r=u(e(22466)),s=u(e(66273)),c=u(e(81806)),x=u(e(69257)),a=ut(e(87647)),i=ut(e(80823)),n=e(14666),h=e(35816),g=e(70334),d=e(963),y=e(58),p=e(92636),w=e(46307),S=e(47184),O=e(2008),B=e(56474),k=e(87358),P=e(80691),L=e(48720),E=e(74410),N=e(16474),I=e(40266),G=e(8397),W=e(81218),Z=e(21548),U=e(39258),H=e(32634),V=e(9045),Y=e(28579),$=e(39613),K=e(46482),J=e(67040),Q=e(78033),et=e(631),nt=e(39432);function st(ct){if(typeof o!="function")return null;var vt=new o,Dt=new o;return(st=function(jt){return jt?Dt:vt})(ct)}function ut(ct,vt){if(!vt&&ct&&ct.__esModule)return ct;if(ct===null||F(ct)!=="object"&&typeof ct!="function")return{default:ct};var Dt=st(vt);if(Dt&&Dt.has(ct))return Dt.get(ct);var Ct={},jt=Object.defineProperty&&D;for(var zt in ct)if(zt!=="default"&&Object.prototype.hasOwnProperty.call(ct,zt)){var Yt=jt?D(ct,zt):null;Yt&&(Yt.get||Yt.set)?Object.defineProperty(Ct,zt,Yt):Ct[zt]=ct[zt]}return Ct.default=ct,Dt&&Dt.set(ct,Ct),Ct}function rt(ct,vt){var Dt=typeof v<"u"&&m(ct)||ct["@@iterator"];if(!Dt){if(Array.isArray(ct)||(Dt=ht(ct))||vt&&ct&&typeof ct.length=="number"){Dt&&(ct=Dt);var Ct=0,jt=function(){};return{s:jt,n:function(){return Ct>=ct.length?{done:!![]}:{done:![],value:ct[Ct++]}},e:function(gt){throw gt},f:jt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zt=!![],Yt=![],Zt;return{s:function(){Dt=Dt.call(ct)},n:function(){var gt=Dt.next();return zt=gt.done,gt},e:function(gt){Yt=!![],Zt=gt},f:function(){try{!zt&&Dt.return!=null&&Dt.return()}finally{if(Yt)throw Zt}}}}function ht(ct,vt){var Dt;if(ct){if(typeof ct=="string")return Pt(ct,vt);var Ct=C(Dt=Object.prototype.toString.call(ct)).call(Dt,8,-1);if(Ct==="Object"&&ct.constructor&&(Ct=ct.constructor.name),Ct==="Map"||Ct==="Set")return f(ct);if(Ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ct))return Pt(ct,vt)}}function Pt(ct,vt){(vt==null||vt>ct.length)&&(vt=ct.length);for(var Dt=0,Ct=new Array(vt);Dt<vt;Dt++)Ct[Dt]=ct[Dt];return Ct}function wt(ct,vt){var Dt=R(ct);if(A){var Ct=A(ct);vt&&(Ct=T(Ct).call(Ct,function(jt){return D(ct,jt).enumerable})),Dt.push.apply(Dt,Ct)}return Dt}function At(ct){for(var vt=1;vt<arguments.length;vt++){var Dt=arguments[vt]!=null?arguments[vt]:{};vt%2?wt(Object(Dt),!0).forEach(function(Ct){(0,l.default)(ct,Ct,Dt[Ct])}):b?Object.defineProperties(ct,b(Dt)):wt(Object(Dt)).forEach(function(Ct){Object.defineProperty(ct,Ct,D(Dt,Ct))})}return ct}var Nt={};function Lt(ct){var vt=Math.floor(Math.random()*ct.length+1)-1;return ct[vt]}var Rt=function(vt,Dt){Nt[vt]=Dt},Tt=function ct(vt,Dt,Ct,jt){var zt;switch(vt.url&&(Ct&&(vt.url=vt.url.replace("$serverURL$",Ct)),vt.url=vt.url.replace("$hostname$",location.hostname).replace("$host$",location.host)),(vt.key===null||vt.key===void 0||vt.key.length===0)&&(vt.key=jt),vt.type){case"group":if(vt.layers&&vt.layers.length>0){for(var Yt=[],Zt=0;Zt<vt.layers.length;Zt++){var ft=ct(vt.layers[Zt],Dt,Ct);ft!=null&&Yt.push(ft)}vt._layers=Yt,zt=new h.GroupLayer(vt,Dt)}break;case"www_bing":case"www_osm":case"www_google":case"www_gaode":case"gaode":case"www_baidu":case"baidu":case"www_tdt":case"mapbox":case"www_mapbox":case"arcgis_cache":case"arcgis":case"tiled":case"arcgis_tile":case"sm_img":case"supermap_img":case"wmts":case"wmts_tdt":case"tms":case"wms":case"xyz":case"tile":case"single":case"image":case"gee":case"custom_tilecoord":case"custom_grid":case"tdt":case"geoserver-wms":case"geoserver-wmts":case"tdt-sd":zt=new g.TileLayer(vt,Dt),zt.isTile=!![];break;case"geoserver-vectorTiled":zt=new et.MapboxVectorTileLayer(vt,Dt);break;case"arcgis_dynamic":case"dynamic":vt.imagerygrid==!![]?(vt.layerDefs&&(vt.where=typeof vt.layerDefs=="string"?JSON.parse(vt.layerDefs):vt.layerDefs),vt.minimumLevel=a.defaultValue(vt.minimumLevel>7?vt.minimumLevel:7,7),zt=new K.ArcFeatureImageGridLayer(vt,Dt),zt._layerDefs=vt?.where||void 0):(zt=new g.TileLayer(vt,Dt),zt.isTile=!![]);break;case"feature":case"feature-pbf":vt.layerDefs&&typeof vt.layerDefs=="string"&&(vt.layerDefs=JSON.parse(vt.layerDefs)),zt=new $.ArcFeatureGridLayer(vt,Dt);break;case"feature-pbf_old":if(vt.originId){var gt=Dt.shine.getLayer(vt.originId,"id");gt&&(gt.layer.show=![])}vt.styletest?(vt.symbol={},vt.symbol.styleOptions=vt.styletest,zt=new $.ArcFeatureGridLayer(vt,Dt)):(Dt.shine.removeLayer(vt,"id"),zt=new g.TileLayer(vt,Dt),zt.isTile=!![]);break;case"www_poi":zt=new S.POILayer(vt,Dt);break;case"custom_featuregrid":zt=new y.CustomFeatureGridLayer(vt,Dt);break;case"geoserver-wfs":(0,r.default)(vt)&&(vt.where=(0,r.default)(vt)),zt=new w.GeoServerWFSLayer(vt,Dt);break;case"custom_graticule":zt=new d.GraticuleLayer(vt,Dt);break;case"3dtiles":case"3DTile":vt.maximumScreenSpaceError==null&&(vt.maximumScreenSpaceError=16),vt.skipLevelOfDetail==null&&(vt.skipLevelOfDetail=!![]),zt=new k.Tiles3dLayer(vt,Dt);break;case"S3M":zt=new P.S3MLayer(vt,Dt);break;case"I3S":zt=new L.I3SLayer(vt,Dt);break;case"osmbuild":zt=new H.OSMBuildLayer(vt,Dt);break;case"gltf":(!vt.position||!vt.position.x)&&(vt.position={x:120,y:30,z:10,heading:0,pitch:0,roll:0}),zt=new B.GltfLayer(vt,Dt);break;case"geojson":case"geoJson":zt=new O.GeoJsonLayer(vt,Dt);break;case"geojson-draw":zt=new G.DrawLayer(vt,Dt);break;case"kml":zt=new E.KmlLayer(vt,Dt);break;case"czml":zt=new N.CzmlLayer(vt,Dt);break;case"terrain":zt=new I.TerrainLayer(vt,Dt);break;default:Nt[vt.type]&&(zt=new Nt[vt.type](vt,Dt)),zt==null&&M.error("\u914D\u7F6E\u4E2D\u7684\u56FE\u5C42\u672A\u5904\u7406\uFF1A"+(0,s.default)(vt));break}return zt},mt=function(vt,Dt){vt.url&&(Dt&&(vt.url=vt.url.replace("$serverURL$",Dt)),vt.url=vt.url.replace("$hostname$",location.hostname).replace("$host$",location.host));var Ct={};for(var jt in vt)if(vt.hasOwnProperty(jt)){var zt=vt[jt];if(zt==null)continue;switch(jt){default:Ct[jt]=zt;break;case"crs":zt=="4326"||zt.toUpperCase()=="EPSG4326"||zt.toUpperCase()=="EPSG:4326"?Ct.tilingScheme=new a.GeographicTilingScheme({numberOfLevelZeroTilesX:vt.numberOfLevelZeroTilesX||2,numberOfLevelZeroTilesY:vt.numberOfLevelZeroTilesY||1}):Ct.tilingScheme=new a.WebMercatorTilingScheme({numberOfLevelZeroTilesX:vt.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:vt.numberOfLevelZeroTilesY||1});break;case"rectangle":Ct.rectangle=a.Rectangle.fromDegrees(zt.xmin,zt.ymin,zt.xmax,zt.ymax);break}}Ct.url&&Ct.proxy&&(Ct=i.getProxyUrl(Ct));var Yt;switch(Ct.type_new||Ct.type){case"single":case"image":Yt=new a.SingleTileImageryProvider(Ct);break;case"xyz":Ct.customTags=Ct.customTags||{},Ct.customTags["z&1"]=function(Ue,ke,Ze,_){return _+1},Yt=new a.UrlTemplateImageryProvider(Ct);break;case"tile":case"tiled":case"arcgis_tile":if(Ct.crs){Ct=At(At({},vt),{},{url:(0,J.appendPath)(vt.url,"/tile/{myZ}/{y}/{x}")}),Ct.customTags=Ct.customTags||{},Ct.crs==="4326"?(Ct.customTags.myZ=function(Ue,ke,Ze,_){return _+1},Ct.tilingScheme=new a.GeographicTilingScheme({ellipsoid:a.Ellipsoid.WGS84})):Ct.customTags.myZ=function(Ue,ke,Ze,_){return _},Yt=new a.UrlTemplateImageryProvider(Ct);break}else{if(Ct._options.projection==="EPSG:4490"||Ct._options.projection==="EPSG:4326"){Yt=new nt.ArcGisMapServerCGCS2000ImageryProvider(Ct);break}if(Ct._options.projection==="EPSG:3857"){Yt=new a.ArcGisMapServerImageryProvider(Ct);break}}M.error("\u4E0D\u53D7\u652F\u6301\u7684\u5207\u7247\u53C2\u8003\u5750\u6807\u7CFB\uFF0C\u5EFA\u8BAE\u589E\u52A0crs\u9AD8\u7EA7\u53C2\u6570\u518D\u8BD5\u8BD5\u770B");break;case"wms":case"geoserver-wms":{Ct.parameters={format:"image/png",transparent:"true"};var Zt=Ct.visibleLayers.join();Ct.layers=Zt,Yt=new a.WebMapServiceImageryProvider(Ct)}break;case"tms":Ct.url||(Ct.url=a.buildModuleUrl("Assets/Textures/NaturalEarthII")),Yt=new a.TileMapServiceImageryProvider(Ct);break;case"wmts":{var ft,gt=Ct.url;if(!(gt!=null&&(ft=gt.toUpperCase())!==null&&ft!==void 0&&ft.match(/WMTS\/?$/))&&(Ct.url=(0,J.appendPath)(gt,"WMTS")),Ct.authkey){var dt;(0,c.default)(dt=Ct.url).call(dt,"?")?Ct.url+="&authkey="+Ct.authkey:Ct.url+="?authkey="+Ct.authkey}var lt=(0,V.getWMTSCapabilities)(Ct.url,Ct.name,"arcgis",Ct.tileMatrixLabels);lt.url=lt.RestfulUrl||lt.KvpUrl,vt.WMTSparams=lt,lt.url?(Yt=new a.WebMapTileServiceImageryProvider(lt),Ct.special_wmts&&(Yt.special_wmts=!![])):Yt=void 0}break;case"geoserver-wmts_old":{if(Ct.authkey){var ot;(0,c.default)(ot=Ct.url).call(ot,"?")?Ct.url+="&SERVICE=WMTS&request=getCapabilities&authkey="+Ct.authkey:Ct.url+="?SERVICE=WMTS&request=getCapabilities&authkey="+Ct.authkey}else{var it;(0,c.default)(it=Ct.url).call(it,"?")?Ct.url+="&SERVICE=WMTS&request=getCapabilities":Ct.url+="?SERVICE=WMTS&request=getCapabilities"}var yt=(0,V.getWMTSCapabilities)(Ct.url,Ct.visibleLayers[0],"geoserver",Ct.tileMatrixLabels);yt.KvpUrl||yt.RestfulUrl?(yt.url=yt.KvpUrl||yt.RestfulUrl,vt.WMTSparams=yt,Yt=new a.WebMapTileServiceImageryProvider(yt)):M.error("\u7F3A\u5C11WMTS\u74E6\u7247\u8BF7\u6C42\u5730\u5740")}break;case"geoserver-wmts":{var Ot=(0,J.getUrlParams)(Ct.url);if(Ot?.length>0){var St=rt(Ot),Gt;try{for(St.s();!(Gt=St.n()).done;){var Ht=Gt.value;Ct.url=(0,J.addParamToUrl)(Ct.url,Ht.name,Ht.value)}}catch(Ue){St.e(Ue)}finally{St.f()}}if(Ct.authkey){var Kt;(0,c.default)(Kt=Ct.url).call(Kt,"?")?Ct.url+="&SERVICE=WMTS&request=getCapabilities&authkey="+Ct.authkey:Ct.url+="?SERVICE=WMTS&request=getCapabilities&authkey="+Ct.authkey}else{var Jt;(0,c.default)(Jt=Ct.url).call(Jt,"?")?Ct.url+="&SERVICE=WMTS&request=getCapabilities":Ct.url+="?SERVICE=WMTS&request=getCapabilities"}var te=(0,V.getWMTSCapabilities)(Ct.url,Ct.visibleLayers[0],"geoserver",Ct.tileMatrixLabels,Ct.matrixSet);te.KvpUrl||te.RestfulUrl?(te.url=te.KvpUrl||te.RestfulUrl,vt.WMTSparams=te,Yt=new a.WebMapTileServiceImageryProvider(te)):M.error("\u7F3A\u5C11WMTS\u74E6\u7247\u8BF7\u6C42\u5730\u5740")}break;case"geoserver-vectorTiled":Yt=new Q.MapboxVectorTileImageryProvider(Ct);break;case"mapbox":case"www_mapbox":Yt=new a.MapboxImageryProvider(Ct);break;case"arcgis":case"arcgis_dynamic":case"dynamic":{Ct.dynamicForced=Ct.dynamicForced||!![];var ie=Ct.visibleLayers.join();Ct.layers=ie,Ct.layerDefs&&(Ct.layerDefs=typeof vt.layerDefs=="string"?vt.layerDefs:(0,s.default)(vt.layerDefs)),vt.imagerygrid==!![]?Yt=new W.FeatureGridImageryProvider(Ct):vt._options.projection==="EPSG:4490"?Yt=new nt.ArcGisMapServerCGCS2000ImageryProvider(Ct):Yt=new a.ArcGisMapServerImageryProvider(Ct),Ct.special_arcgis&&(Yt.special_arcgis=!![])}break;case"feature-pbf_old":if(Ct.styletest)Yt=new W.FeatureGridImageryProvider(Ct);else{var oe=Ct.mapServerUrl;if(oe){var he=(0,x.default)({},Ct);he.url=oe,Yt=new a.ArcGisMapServerImageryProvider(he)}else return}break;case"arcgis_cache":!a.UrlTemplateImageryProvider.prototype.padLeft0&&(a.UrlTemplateImageryProvider.prototype.padLeft0=function(Ue,ke){Ue=String(Ue);for(var Ze=Ue.length;Ze<ke;)Ue="0"+Ue,Ze++;return Ue}),Ct.customTags={arc_x:function(ke,Ze){return ke.padLeft0(Ze.toString(16),8)},arc_y:function(ke,Ze,_){return ke.padLeft0(_.toString(16),8)},arc_z:function(ke,Ze,_,at){return ke.padLeft0(at.toString(),2)},arc_X:function(ke,Ze){return ke.padLeft0(Ze.toString(16),8).toUpperCase()},arc_Y:function(ke,Ze,_){return ke.padLeft0(_.toString(16),8).toUpperCase()},arc_Z:function(ke,Ze,_,at){return ke.padLeft0(at.toString(),2).toUpperCase()}},Yt=new a.UrlTemplateImageryProvider(Ct);break;case"www_tdt":case"tdt":case"tdt-sd":{var ne,ce,ge,Ae,It,Wt=18;Ct.maxLevel?ce=Ct.maxLevel:ce=Wt,Ct.visibleLayers[0]?ne=Ct.visibleLayers[0]:Ct.layerIdentifier?ne=Ct.layerIdentifier:Ct.url.indexOf("vec_c")!=-1?ne="vec":Ct.url.indexOf("vec_z")!=-1||Ct.url.indexOf("cva_c")!=-1?ne="cva":Ct.url.indexOf("vec_w")!=-1?ne="vec":Ct.url.indexOf("img_c")!=-1||Ct.url.indexOf("img_w")!=-1?ne="img":Ct.url.indexOf("img_z")!=-1||Ct.url.indexOf("cia_w")!=-1||Ct.url.indexOf("cia_c")!=-1?ne="cia":Ct.url.indexOf("ter_d")!=-1?ne="ter":Ct.url.indexOf("ibo_w")!=-1||Ct.url.indexOf("ibo_c")!=-1?ne="ibo":Ct.url.indexOf("ter_z")!=-1&&(ne="cta"),Ct.tileMatrixSetName?ge=Ct.tileMatrixSetName:Ct.tileMatrixSetIdentifier&&(ge=Ct.tileMatrixSetIdentifier),Ct.layerStyle&&(Ae=Ct.layerStyle),Ct.layerFormat&&(It=Ct.layerFormat);var _t=Ct.url+"&service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer="+ne+"&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}";Ct.proxy&&(_t=i.getProxyUrl({url:_t.replace("{s}","0"),proxy:Ct.proxy}).url),Ct.authkey&&(Ct.url=(0,J.addParamToUrl)(Ct.url,"authkey",Ct.authkey));for(var ee=new Array(ce),re=0;re<=ce;re++)ee[re]=(re+1).toString();if(vt.crs==="4326"){for(var de=new Array(ce),Se=0;Se<=ce;Se++)de[Se]=(Se+1).toString();Yt=new a.WebMapTileServiceImageryProvider({url:_t,layer:ne,style:Ae||"default",format:It||"tiles",tileMatrixSetID:ge||"c",subdomains:["0","1","2","3","4","5","6","7"],tileMatrixLabels:de,tilingScheme:new a.GeographicTilingScheme,maximumLevel:ce})}else{for(var Pe=new Array(ce),De=0;De<=ce;De++)Pe[De]=De.toString();Yt=new a.WebMapTileServiceImageryProvider({url:_t,layer:ne,style:Ae||"default",format:It||"tiles",tileMatrixSetID:ge||"w",subdomains:["0","1","2","3","4","5","6","7"],tileMatrixLabels:Pe,tilingScheme:new a.WebMercatorTilingScheme,maximumLevel:ce})}}break;case"www_gaode":case"gaode":{var Ie=(0,x.default)({},Ct),pe=i.expandUrl(Ie.url);pe.subdomainsArray&&(Ie.subdomains=pe.subdomainsArray),Ie.url=pe.url,Yt=new Z.AmapImageryProvider(Ie)}break;case"www_baidu":case"baidu":Yt=new U.BaiduImageryProvider(Ct);break;case"www_google":{var Oe;if(vt.crs==="4326"||vt.crs==="wgs84")switch(Ct.layer){default:case"img_d":Oe="//www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}";break}else switch(Ct.layer){case"vec":default:Oe="//mt{s}.google.cn/vt/lyrs=m@207000000&hl=zh-CN&gl=CN&src=app&x={x}&y={y}&z={z}&s=Galile";break;case"img_d":Oe="//mt{s}.google.cn/vt/lyrs=s&hl=zh-CN&gl=CN&x={x}&y={y}&z={z}&s=Gali";break;case"img_z":Oe="//mt{s}.google.cn/vt/imgtp=png32&lyrs=h@207000000&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}&s=Galil";break;case"ter":Oe="//mt{s}.google.cn/vt/lyrs=t@131,r@227000000&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}&s=Galile";break}Ct.proxy&&(Oe=i.getProxyUrl({url:Oe.replace("{s}","1"),proxy:Ct.proxy}).url),Yt=new a.UrlTemplateImageryProvider({url:Oe,subdomains:["1","2","3"],maximumLevel:20})}break;case"www_osm":{var Ne="//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";Ct.proxy&&(Ne=i.getProxyUrl({url:Ne.replace("{s}","a"),proxy:Ct.proxy}).url),Yt=new a.UrlTemplateImageryProvider({url:Ne,subdomains:"abc",maximumLevel:18})}break;case"www_bing":{var Ve;Array.isArray(Ct.key)?Ve=Lt(Ct.key):Ve=Ct.key.www_bing;var be="https://dev.virtualearth.net";Ct.proxy&&(be=i.getProxyUrl({url:be,proxy:Ct.proxy}).url);var Be=Ct.layer||a.BingMapsStyle.Aerial;Yt=new a.BingMapsImageryProvider({url:be,key:Ve,mapStyle:Be})}break;case"custom_grid":Ct.cells=Ct.cells||2,Ct.color=a.Color.fromCssColorString(Ct.color||"rgba(255,255,255,0.5)"),Ct.glowWidth=Ct.glowWidth||3,Ct.glowColor=a.Color.fromCssColorString(Ct.glowColor||"rgba(255,255,255,0.1)"),Ct.backgroundColor=a.Color.fromCssColorString(Ct.backgroundColor||"rgba(0,0,0,0)"),Yt=new a.GridImageryProvider(Ct);break;case"custom_tilecoord":Yt=new a.TileCoordinatesImageryProvider(Ct);break;case"custom_featuregrid":case"feature":case"geoserver-wfs":case"feature-pbf":Yt=new W.FeatureGridImageryProvider(Ct);break;case"s3m":break;default:M.error("config\u914D\u7F6E\u56FE\u5C42\u672A\u5904\u7406:"+vt);break}return Yt&&(Yt.config=Ct),Yt},Ft={BaseLayer:n.BaseLayer,GroupLayer:h.GroupLayer,TileLayer:g.TileLayer,GraticuleLayer:d.GraticuleLayer,ArcFeatureLayer:Y.ArcFeatureLayer,ArcFeatureGridLayer:$.ArcFeatureGridLayer,ArcFeatureImageGridLayer:K.ArcFeatureImageGridLayer,CustomFeatureGridLayer:y.CustomFeatureGridLayer,CustomFeatureImageGridLayer:p.CustomFeatureImageGridLayer,GeoServerWFSLayer:w.GeoServerWFSLayer,POILayer:S.POILayer,GeoJsonLayer:O.GeoJsonLayer,GltfLayer:B.GltfLayer,Tiles3dLayer:k.Tiles3dLayer,S3MLayer:P.S3MLayer,KmlLayer:E.KmlLayer,CzmlLayer:N.CzmlLayer,TerrainLayer:I.TerrainLayer,DrawLayer:G.DrawLayer,BaiduImageryProvider:U.BaiduImageryProvider,AmapImageryProvider:Z.AmapImageryProvider,FeatureGridImageryProvider:W.FeatureGridImageryProvider,regLayerForConfig:Rt,createLayer:Tt,createImageryProvider:mt};z.Layer=Ft},94225:function(X,z,e){"use strict";var M=e(49500),F=e(20314),R=e(26352),A=e(40639),T=e(43586),D=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.LayerManager=void 0;var b=D(e(52909)),C=D(e(66273)),f=D(e(69033)),v=D(e(78756)),m=D(e(11323)),o=D(e(42579)),u=D(e(34749)),l=e(6386),r=e(66828),s=D(e(73081));function c(h,g){var d=typeof A<"u"&&T(h)||h["@@iterator"];if(!d){if(Array.isArray(h)||(d=x(h))||g&&h&&typeof h.length=="number"){d&&(h=d);var y=0,p=function(){};return{s:p,n:function(){return y>=h.length?{done:!![]}:{done:![],value:h[y++]}},e:function(k){throw k},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=!![],S=![],O;return{s:function(){d=d.call(h)},n:function(){var k=d.next();return w=k.done,k},e:function(k){S=!![],O=k},f:function(){try{!w&&d.return!=null&&d.return()}finally{if(S)throw O}}}}function x(h,g){var d;if(h){if(typeof h=="string")return a(h,g);var y=F(d=Object.prototype.toString.call(h)).call(d,8,-1);if(y==="Object"&&h.constructor&&(y=h.constructor.name),y==="Map"||y==="Set")return R(h);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return a(h,g)}}function a(h,g){(g==null||g>h.length)&&(g=h.length);for(var d=0,y=new Array(g);d<g;d++)y[d]=h[d];return y}var i={BEFOREADDLAYER:"beforeAddLayer",AFTERADD3DLAYER:"afterAddLayer",BEFOREREMOVELAYER:"beforeRemoveLayer",AFTERREMOVELAYER:"afterRemoveLayer",ADDLAYERERROR:"addLayerError"},n=l.Evented.extend({initialize:function(g){this.viewer=g.viewer,this.config=g.config,this._isFlyAnimation=![],this.arrOperationallayers=[],this.arrBasemaps=[],this.arrDrawLayers=[],this.arrInitLayers=[],this.idProp=void 0,this.visualizationLayer=void 0,this.tildLayer=[],this.checkedLayers=[],this.tocData=[],this.editLayer=void 0},addLayer:function(g){var d=this.getLayer(g.id,"id");if(d){M.warn("\u8BE5id\u56FE\u5C42\u5DF2\u7ECF\u5B58\u5728");return}try{var y;this.fire(i.BEFOREADDLAYER,{data:g}),g!=null&&g.isBaseMapLayer&&g.isBaseMapLayer===!![]||g!=null&&g.isInitLayer&&g.isInitLayer===!![]?g.group==="1"?(this.config.basemaps.push(g),y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrBasemaps.push(y)):g.group==="2"&&(this.config.operationallayers.push(g),y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrOperationallayers.push(y)):g.group==="1"?(this.config.basemaps.push(g),y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrBasemaps.push(y)):g.group==="2"&&(this.config.operationallayers.push(g),y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrOperationallayers.push(y)),g.type=="geojson-draw"&&(y=r.Layer.createLayer(g,this.viewer,this.config.serverURL,this.config.defaultKey),y&&this.arrDrawLayers.push(y)),this.fire(i.AFTERADD3DLAYER,{data:g,layer:y}),g.isFit&&this.viewer.container.style.display!=="none"&&this.isLayerFit(y,g)}catch(p){this.fire(i.ADDLAYERERROR,g),M.warn(p)}},isLayerFit:function(g,d){var y=this;return(0,u.default)(m.default.mark(function p(){var w;return m.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:d.camera?y.centerAt(d.camera):(w=d?.duration,g.centerAt(w));case 1:case"end":return O.stop()}},p)}))()},filterLayer:function(g,d){var y,p=this,w,S,O;if(S=(0,b.default)(y=this.arrBasemaps).call(y,function(L){var E;return(0,o.default)(this,p),((E=L.config)===null||E===void 0?void 0:E.id)===g}.bind(this)),S=S||(0,b.default)(w=this.arrOperationallayers).call(w,function(L){var E;return(0,o.default)(this,p),((E=L.config)===null||E===void 0?void 0:E.id)===g}.bind(this)),!S){M.warn("\u8BE5id\u56FE\u5C42\u4E0D\u5B58\u5728");return}switch(O=S.config.type,O){default:case"dynamic":{var B=typeof d=="string"?JSON.parse(d):d;if(S.config.imagerygrid===!![]){S._layerDefs=B,S.setWhere(d);break}B=(0,C.default)(B),S.layer.imageryProvider.layers,S.layer._imageryProvider._layerDefs=B,S.layer.imageryProvider._ready&&S.layer.imageryProvider._reload();break}case"feature-pbf":case"feature":{var k=typeof d=="string"?JSON.parse(d):d;S.setLayerDefs(k);break}case"geoserver-wfs":{var P=this.getLayer(S.config.id,"id");P&&(P.setVisible(![]),setTimeout(function(){(0,o.default)(this,p),S.setWhere(d),P.setVisible(!![])}.bind(this),250))}}},getLayer:function(g,d){d==null&&(d="name");var y=this.arrBasemaps;if(y&&y.length>0)for(var p=0;p<y.length;p++){var w=y[p];if(!(w==null||w.config[d]!==g))return w}var S=this.arrOperationallayers;if(S&&S.length>0)for(var O=0;O<S.length;O++){var B=S[O];if(!(B==null||B.config[d]!==g))return B}var k=this.arrDrawLayers;if(k&&k.length>0)for(var P=0;P<k.length;P++){var L=k[P];if(!(L==null||L.config[d]!==g))return L}},removeLayer:function(g){var d=this.getLayer(g.id,"id"),y=this.getLayer(g.id+"temp","id");this.fire(i.BEFOREREMOVELAYER,{data:g,a:d}),d&&d.setVisible(![]),y&&y.setVisible(![]);var p=this.arrBasemaps;if(p&&p.length>0)for(var w=0;w<p.length;w++){var S=p[w];if(S==null||S.config.id===g.id){var O;(0,f.default)(O=this.arrBasemaps).call(O,w,1);break}}if(p=this.arrOperationallayers,p&&p.length>0)for(var B=0;B<p.length;B++){var k=p[B];if(k==null||k.config.id===g.id){var P;(0,f.default)(P=this.arrOperationallayers).call(P,B,1);break}}if(p=this.arrDrawLayers,p&&p.length>0)for(var L=0;L<p.length;L++){var E=p[L];if(E==null||E.config.id===g.id){var N;(0,f.default)(N=this.arrDrawLayers).call(N,L,1);break}}if(p=this.config.operationallayers,p&&p.length>0)for(var I=0;I<p.length;I++){var G=p[I];if(G==null||G.id===g.id){var W;(0,f.default)(W=this.config.operationallayers).call(W,I,1);break}}this.fire(i.AFTERREMOVELAYER,{data:g})},setTocData:function(g){this.tocData=g},getLayerDataById:function(g){var d=c(this.tocData),y;try{for(d.s();!(y=d.n()).done;){var p=y.value;if(p.children&&p.children.length>0)return this.queryTocData(p,"id",g);if(p.url&&p.url!==""&&p.id===g)return p}}catch(w){d.e(w)}finally{d.f()}},queryTocData:function(g,d,y){if(g.children&&g.children.length>0){var p=c(g.children),w;try{for(p.s();!(w=p.n()).done;){var S=w.value;if(S.children&&S.children.length>0){var O=this.queryTocData(S,d,y);if(O)return O}else if(S[d]===y)return S}}catch(B){p.e(B)}finally{p.f()}}},addCheckedLayers:function(g){var d=this;return new v.default(function(y,p){var w=this;(0,o.default)(this,d),(0,s.default)(g).then(function(S){(0,o.default)(this,w),g._options=S,g.visible=!![],this.checkedLayers=this.getCheckedLayers();var O=this.checkedLayers;if(O.length===0)O.push(g);else for(var B=0,k=O.length;B<k;B++){if(g.mapIndex>=O[B].mapIndex){(0,f.default)(O).call(O,B,0,g);break}B===O.length-1&&O.push(g)}this.addLayer(g),y()}.bind(this)).catch(function(S){(0,o.default)(this,w),M.error(S),this.fire(i.ADD3DLAYERERROR,g),p("\u52A0\u8F7D'".concat(g.label,"'\u56FE\u5C42\u670D\u52A1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5730\u5740\u548C\u8FD0\u7EF4\u7AEF\u914D\u7F6E\u9879\u662F\u5426\u6B63\u786E\u3002"))}.bind(this))}.bind(this))},getCheckedLayers:function(){return this.checkedLayers},getDrawLayers:function(){return this.arrDrawLayers},getDrawLayerInfos:function(){for(var g=this.arrDrawLayers,d=[],y=0,p=g.length;y<p;y++)d.push(g[y].config);return d},removeCheckedLayers:function(g){for(var d=this.getCheckedLayers(),y=0,p=d.length;y<p;y++)if(d[y].id===g.id){(0,f.default)(d).call(d,y,1),this.removeLayer(g);break}this.checkedLayers=d},getLayerOpacity:function(){},setLayerOpacity:function(g,d){var y=this.getLayer(g,"id");y&&y.setOpacity(d/100)},zoomToLayer:function(g){if(g.camera)this.centerAt(g.camera);else{var d=g.id,y=this.getLayer(d,"id");y&&y.centerAt(g.duration||2)}},centerAt:function(g,d){this.viewer.shine.centerAt(g,d)},setLayerTop:function(g){var d=this.getLayer(g,"id");if(d){var y=0,p=d.config.group,w=this.arrOperationallayers,S=c(w),O;try{for(S.s();!(O=S.n()).done;){var B=O.value,k=B.config.group?B.config.group:null;if(k===p){var P=B.config.mapIndex?B.config.mapIndex:0;y=Math.max(y,P)}}}catch(L){S.e(L)}finally{S.f()}d.setZIndex(y+1)}},updateLayer:function(g){if(g.id&&this.getLayer(g.id,"id")){var d=this.getLayer(g.id,"id");d.config.type=="geojson-draw"?d.setProperties(g):M.warn("\u8BE5\u56FE\u5C42\u4E0D\u662F\u7ED8\u5236\u56FE\u5C42\uFF0C\u65E0\u6CD5\u66F4\u65B0")}}});z.LayerManager=n},39613:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.ArcFeatureGridLayer=void 0;var D=T(e(53267)),b=u(e(87647)),C=u(e(27022)),f=u(e(5236)),v=e(58),m=e(1117);function o(r){if(typeof R!="function")return null;var s=new R,c=new R;return(o=function(a){return a?c:s})(r)}function u(r,s){if(!s&&r&&r.__esModule)return r;if(r===null||F(r)!=="object"&&typeof r!="function")return{default:r};var c=o(s);if(c&&c.has(r))return c.get(r);var x={},a=Object.defineProperty&&A;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var n=a?A(r,i):null;n&&(n.get||n.set)?Object.defineProperty(x,i,n):x[i]=r[i]}return x.default=r,c&&c.set(r,x),x}var l=v.CustomFeatureGridLayer.extend({getDataForGrid:function(s,c){var x=this,a=this.config.url;this.config.visibleLayers&&this.config.visibleLayers.length>0&&(a+="/"+this.config.visibleLayers[0]);var i=f.query({url:a}),n=C.toLatLngBounds(C.toLatLng(s.rectangle.ymin,s.rectangle.xmin),C.toLatLng(s.rectangle.ymax,s.rectangle.xmax));this.config.where&&i.where(this.config.where),this.config.layerDefs&&i.where(this.config.layerDefs[this.config.visibleLayers[0]]),i.intersects(n),i.run(function(h,g){if(!(!x._visible||!x._cacheGrid[s.key])){if(h!=null&&h.code>0){M.error("arcgis\u670D\u52A1\u8BBF\u95EE\u51FA\u9519"+h.message);return}g!=null&&(g.type==="Feature"&&(g={type:"FeatureCollection",features:[g]}),c(g.features))}})},createEntity:function(s,c,x){var a=this,i,n;this.config.symbol.styleOptions&&(i=this.config.symbol.styleOptions.clampToGround,n=this.config.symbol.styleOptions.classificationType);var h=b.GeoJsonDataSource.load(c,{clampToGround:i||!![],classificationType:n||0});return h.then(function(g){if(!a.checkHasBreak[s.key]){if((0,D.default)(g.entities).length===0)return null;var d=(0,D.default)(g.entities);if(d.length>1)for(var y=(0,m.v4)(),p=0;p<=d.length;p++){var w=(0,D.default)(g.entities)[p];w&&w.id&&(w._id=a.config.id+"_"+w.id,w.siblingId=y,w.geojsondata=c,w.geojsondata.siblingId=y,a._addEntity(w,x))}else{var S=(0,D.default)(g.entities)[0];S&&S.id&&(S._id=a.config.id+"_"+S.id,S.geojsondata=c,a._addEntity(S,x))}}}).catch(function(g){a.showError("\u670D\u52A1\u51FA\u9519",g)}),null},createPrimitive:function(s,c,x){var a=this,i,n;this.config.symbol.styleOptions&&(i=this.config.symbol.styleOptions.clampToGround,n=this.config.symbol.styleOptions.classificationType);var h=b.GeoJsonDataSource.load(c,{clampToGround:i||!![],classificationType:n||0});return h.then(function(g){if(!a.checkHasBreak[s.key]){if((0,D.default)(g.entities).length===0)return null;var d=(0,D.default)(g.entities)[0];d._id=a.config.id+"_"+d.id,a._addPrimitive(d,x)}}).catch(function(g){a.showError("\u670D\u52A1\u51FA\u9519",g)}),null},_addPrimitive:function(s,c){var x;if(s.polygon){var a=new b.PolygonGeometry({polygonHierarchy:s.polygon.hierarchy.getValue()});this.config.symbol.volumeStyle?x=new b.ClassificationPrimitive({id:s._id,appearance:new b.EllipsoidSurfaceAppearance({material:new b.Material({fabric:{type:"Color",uniforms:{color:new b.Color(1,1,1,1)}}})}),geometryInstances:new b.GeometryInstance({geometry:a}),asynchronous:![],compressVertices:![],releaseGeometryInstances:![],allowPicking:![],classificationType:b.ClassificationType.CESIUM_3D_TILE}):x=new b.GroundPrimitive({id:s._id,appearance:new b.EllipsoidSurfaceAppearance({material:new b.Material({fabric:{type:"Color",uniforms:{color:new b.Color(1,1,1,1)}}})}),geometryInstances:new b.GeometryInstance({geometry:a}),asynchronous:![],compressVertices:![],releaseGeometryInstances:![],allowPicking:!![],classificationType:b.ClassificationType.NONE}),x.properties=s.properties,this.config.symbol&&this.setPrimitiveConfigSymbol(x,this.config.symbol),!this.primitives.contains(x)&&this.primitives.add(x),c(x)}},_addEntity:function(s,c){var x=this.config.symbol;x&&(typeof x=="function"?x(s,s.properties):x==="default"?this.setDefSymbol(s):this.setConfigSymbol(s,x)),this.bindMourseEvnet(s),this.dataSource.entities.getById(s._id)||this.dataSource.entities.add(s),c(s)},setWhere:function(s){this.config.where=s,this.reload()},setLayerDefs:function(s){this.config.layerDefs=s,this._removeAllImageryCache(),this.reload()}});z.ArcFeatureGridLayer=l},46482:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.ArcFeatureImageGridLayer=void 0;var D=T(e(37561)),b=T(e(42579)),C=o(e(87647)),f=e(92636),v=T(e(77019));function m(l){if(typeof R!="function")return null;var r=new R,s=new R;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||F(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&A;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?A(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var u=f.CustomFeatureImageGridLayer.extend({_layerDefs:void 0,_requestCount:0,createEntity:function(r,s,c){var x=this,a=this.config.url+"/export?bbox="+r.rectangle.xmin+","+r.rectangle.ymin+","+r.rectangle.xmax+","+r.rectangle.ymax+",&bboxSR=4326&layers=show:0&transparent=true&format=png32&size=512,512&imageSR=4326&f=image",i=new C.ImageMaterialProperty({image:a,repeat:C.Cartesian2(1,1),transparent:!![],color:C.Color.WHITE.withAlpha(x.config.opacity)}),n=new C.RectangleGraphics({coordinates:C.Rectangle.fromDegrees(r.rectangle.xmin,r.rectangle.ymin,r.rectangle.xmax,r.rectangle.ymax),material:i}),h=this.dataSource.entities.add({rectangle:n,name:x.config.id+"_"+r.key});return c(h),null},createPrimitive:function(r,s,c){var x=this,a=this,i=this.config.url+"/export?bbox="+r.rectangle.xmin+","+r.rectangle.ymin+","+r.rectangle.xmax+","+r.rectangle.ymax+",&bboxSR=4326&layers=show:"+a.config.visibleLayers.join(",")+"&transparent=true&format=png32&DPI=90&size=256,256&imageSR=4326&f=image",n={};this._layerDefs&&(n.layerDefs=this._layerDefs),this._requestCount++,v.default.get(i,{params:n,responseType:"arraybuffer"}).then(function(h){var g=this;if((0,b.default)(this,x),this._requestCount--,this._clean){c(void 0);return}var d=D.default.createObjectURL(new Blob([h.data],{type:h.headers["content-type"]})),y=new C.RectangleGeometry({rectangle:C.Rectangle.fromDegrees(r.rectangle.xmin,r.rectangle.ymin,r.rectangle.xmax,r.rectangle.ymax),vertexFormat:C.EllipsoidSurfaceAppearance.VERTEX_FORMAT}),p=new C.GeometryInstance({id:a.config.id+"_"+r.key,geometry:y}),w=new C.GroundPrimitive({geometryInstances:p,appearance:new C.EllipsoidSurfaceAppearance({translucent:!![],material:new C.Material({fabric:{type:"Image",uniforms:{image:d,color:C.Color.WHITE.withAlpha(a._opacity)}}})}),asynchronous:![],compressVertices:![],releaseGeometryInstances:![],allowPicking:!![],imageReady:!![],classificationType:C.ClassificationType.BOTH});this.primitives.add(w).readyPromise.then(function(S){if((0,b.default)(this,g),this._clean){c(void 0);return}c(S)}.bind(this))}.bind(this)).catch(function(h){a._requestCount--,M.error(h)})},_addEntity:function(r,s){this.bindMourseEvnet(r),s(r)},setWhere:function(r){var s=this;this._clean=!![],this.config.where=r;var c=setInterval(function(){(0,b.default)(this,s),this._requestCount==0&&(this._removeAllImageryCache(),this._clean=![],this.reload(),clearInterval(c))}.bind(this),1e3)}});z.ArcFeatureImageGridLayer=u},28579:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.ArcFeatureLayer=void 0;var T=f(e(87647)),D=f(e(5236)),b=e(2008);function C(m){if(typeof R!="function")return null;var o=new R,u=new R;return(C=function(r){return r?u:o})(m)}function f(m,o){if(!o&&m&&m.__esModule)return m;if(m===null||F(m)!=="object"&&typeof m!="function")return{default:m};var u=C(o);if(u&&u.has(m))return u.get(m);var l={},r=Object.defineProperty&&A;for(var s in m)if(s!=="default"&&Object.prototype.hasOwnProperty.call(m,s)){var c=r?A(m,s):null;c&&(c.get||c.set)?Object.defineProperty(l,s,c):l[s]=m[s]}return l.default=m,u&&u.set(m,l),l}var v=b.GeoJsonLayer.extend({queryData:function(){this.dataSource&&(this.viewer.dataSources.remove(this.dataSource),this.dataSource=null);var o=this,u=this.config.url;this.config.layers&&this.config.layers.length>0&&(u+="/"+this.config.layers[0]);var l=D.default.query({url:u});this.config.where&&l.where(this.config.where),l.run(function(r,s){if(r!=null&&r.code>0){M.error(r.message,"\u670D\u52A1\u8BBF\u95EE\u51FA\u9519");return}if(s==null||s.features.length===0)M.error("\u672A\u627E\u5230\u7B26\u5408\u67E5\u8BE2\u6761\u4EF6\u7684\u8981\u7D20\uFF01");else{for(var c=[],x=0;x<s.features.length;x++){var a=s.features[x];a==null||a.geometry==null||a.geometry.coordinates&&a.geometry.coordinates.length===0||c.push(a)}s.features=c;var i=new T.GeoJsonDataSource,n=T.GeoJsonDataSource.load(s,{clampToGround:!![]});n.then(function(){o.showResult(i)}).catch(function(h){o.showError("\u670D\u52A1\u51FA\u9519",h)})}})},setWhere:function(o){this.config.where=o,this.queryData()}});z.ArcFeatureLayer=v},39432:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.ArcGisMapServerCGCS2000ImageryProvider=void 0;var D=T(e(78756)),b=T(e(5146)),C=T(e(22777)),f=T(e(42762)),v=T(e(30044)),m=T(e(99085)),o=T(e(34009)),u=s(e(87647)),l=e(42501);function r(i){if(typeof R!="function")return null;var n=new R,h=new R;return(r=function(d){return d?h:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=r(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&A;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?A(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}function c(i){var n=x();return function(){var g=(0,o.default)(i),d;if(n){var y=(0,o.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,m.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,v.default)(h,i);var n=c(h);function h(){var g,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,C.default)(this,h),g=n.call(this,d),g.options=d,g.init(),g}return(0,f.default)(h,[{key:"init",value:function(){}},{key:"metadataSuccess",value:function(d){var y;this._dpi=this.options.dpi||(d==null||(y=d.tileInfo)===null||y===void 0?void 0:y.dpi)||this._dpi;var p=d.tileInfo;if(this._useTiles=![],this._wkid=d.spatialReference.wkid,(d.spatialReference.wkid===4490||d.spatialReference.wkid===4326)&&p&&!this._dynamicForced){var w=this.options;if(w){if(d.spatialReference.wkid===4490||d.spatialReference.wkid===4326){var S=new l.GeographicTilingSchemeCGCS2000({ellipsoid:w.ellipsoid,tileInfo:p});this._tilingScheme=S}this._maximumLevel=p.lods.length-1,this._useTiles=!![],u.defined(d.fullExtent)?u.defined(d.fullExtent.spatialReference)&&u.defined(d.fullExtent.spatialReference.wkid)&&(d.spatialReference.wkid===4490||d.spatialReference.wkid===4326)&&(this._rectangle=u.Rectangle.fromDegrees(d.fullExtent.xmin,d.fullExtent.ymin,d.fullExtent.xmax,d.fullExtent.ymax)):this._rectangle=this._tilingScheme.rectangle,!u.defined(this._tileDiscardPolicy)&&(this._tileDiscardPolicy=new u.DiscardMissingTileImagePolicy({missingImageUrl:this.buildImageResource(this,0,0,this._maximumLevel).url,pixelsToCheck:[new u.Cartesian2(0,0),new u.Cartesian2(200,20),new u.Cartesian2(20,200),new u.Cartesian2(80,110),new u.Cartesian2(160,130)],disableCheckIfAllPixelsAreTransparent:!![]}))}}return u.defined(d.copyrightText)&&d.copyrightText.length>0&&(this._credit=new u.Credit(d.copyrightText)),this._ready=!![],D.default.resolve(!![])}},{key:"buildImageResource",value:function(d,y,p,w,S){var O;if(d._useTiles)O=d._resource.getDerivedResource({url:"tile/"+w+"/"+p+"/"+y,request:S});else{var B=d._tilingScheme.tileXYToNativeRectangle(y,p,w),k=B.west+","+B.south+","+B.east+","+B.north,P={bbox:k,size:d._tileWidth+","+d._tileHeight,dpi:d._dpi,format:"png32",transparent:!![],f:"image"};if(d._tilingScheme.projection instanceof u.GeographicProjection){var L=d._wkid;L!==4490&&(L=4326),P.bboxSR=L,P.imageSR=L}else P.bboxSR=3857,P.imageSR=3857;d.layers&&(P.layers="show:"+d.layers),d.layerDefs&&(P.layerDefs=d.layerDefs),O=d._resource.getDerivedResource({url:"export",request:S,queryParameters:P})}return O}}]),h}(u.ArcGisMapServerImageryProvider);z.ArcGisMapServerCGCS2000ImageryProvider=a,a.prototype.requestImage=function(i,n,h,g){if(!this._ready)throw new u.DeveloperError("requestImage must not be called before the imagery provider is ready.");return u.ImageryProvider.loadImage(this,this.buildImageResource(this,i,n,h,g))},a.prototype.pickFeatures=function(i,n,h,g,d){var y,p,w,S,O;if(!this._ready)throw new u.DeveloperError("pickFeatures must not be called before the imagery provider is ready.");if(this.enablePickFeatures){var B=this._tilingScheme.tileXYToNativeRectangle(i,n,h),k,P,L;if(this._tilingScheme.projection instanceof u.GeographicProjection)k=u.Math.toDegrees(g),P=u.Math.toDegrees(d),L=this._wkid||"4326";else{var E=this._tilingScheme.projection.project(new u.Cartographic(g,d,0));k=E.x,P=E.y,L=this._wkid||"3857"}var N="visible";u.defined(this._layers)&&(N+=":".concat(this._layers));var I={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:(0,b.default)(y="".concat(k,",")).call(y,P),mapExtent:(0,b.default)(p=(0,b.default)(w=(0,b.default)(S="".concat(B.west,",")).call(S,B.south,",")).call(w,B.east,",")).call(p,B.north),imageDisplay:(0,b.default)(O="".concat(this._tileWidth,",")).call(O,this._tileHeight,",96"),sr:L,layers:N};u.defined(this._layerDefs)&&(I.layerDefs=this._layerDefs);var G=this._resource.getDerivedResource({url:"identify",queryParameters:I});return G.fetchJson().then(function(W){var Z=[],U=W.results;if(!u.defined(U))return Z;for(var H=0;H<U.length;++H){var V=U[H],Y=new u.ImageryLayerFeatureInfo;if(Y.data=V,Y.name=V.value,Y.properties=V.attributes,Y.configureDescriptionFromProperties(V.attributes),V.geometryType==="esriGeometryPoint"&&V.geometry){var $=V.geometry.spatialReference&&V.geometry.spatialReference.wkid?V.geometry.spatialReference.wkid:4326;if($===4326||$===4283||$===4490)Y.position=u.Cartographic.fromDegrees(V.geometry.x,V.geometry.y,V.geometry.z);else if($===102100||$===900913||$===3857){var K=new u.WebMercatorProjection;Y.position=K.unproject(new u.Cartesian3(V.geometry.x,V.geometry.y,V.geometry.z))}}Z.push(Y)}return Z})}}},58:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.CustomFeatureGridLayer=void 0;var T=A(e(66273)),D=A(e(69033)),b=x(e(87647)),C=A(e(63379)),f=x(e(80823)),v=e(62344),m=x(e(80790)),o=x(e(21617)),u=x(e(69471)),l=x(e(96535)),r=x(e(31490)),s=e(92672);function c(i){if(typeof F!="function")return null;var n=new F,h=new F;return(c=function(d){return d?h:n})(i)}function x(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=c(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&R;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?R(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}var a=v.FeatureGridLayer.extend({_cacheGrid:{},_cacheFeature:{},_addImageryCache:function(n){this._cacheGrid[n.key]={opts:n,isLoading:!![]};var h=this;this.getDataForGrid(n,function(g){h._visible&&(h.config.primitiveRender?h._showPrimitiveData(n,g):h._showData(n,g))})},getDataForGrid:function(n,h){this.config.getDataForGrid&&this.config.getDataForGrid(n,h)},checkHasBreak:function(n){return!this._visible||!this._cacheGrid[n]?!![]:![]},_showData:function(n,h){var g=this,d=n.key;if(!this.checkHasBreak[d]){for(var y=this,p=[],w=function(){var k=h[S],P=k.properties[g.config.IdName?g.config.IdName:g.config.keyfield]||k.id,L=g._cacheFeature[P];if(L)L.grid.push(d),g.updateEntity(L.entity,k);else{var E=g.createEntity(n,k,function(N){y.config.debuggerTileInfo&&(N._temp_id=P,N.popup=function(I){return(0,T.default)(y._cacheFeature[I._temp_id].grid)}),y._cacheFeature[P]={grid:[d],entity:N}});E!=null&&(y.config.debuggerTileInfo&&(E._temp_id=P,E.popup=function(N){return(0,T.default)(y._cacheFeature[N._temp_id].grid)}),y._cacheFeature[P]={grid:[d],entity:E})}p.push(P)},S=0,O=h.length;S<O;S++)w();this._cacheGrid[d]=this._cacheGrid[d]||{},this._cacheGrid[d].ids=p,this._cacheGrid[d].isLoading=![]}},_showPrimitiveData:function(n,h){var g=this,d=n.key;if(!this.checkHasBreak[d]){for(var y=this,p=[],w=function(){var k=h[S],P=k.properties[g.config.IdName?g.config.IdName:g.config.keyfield]||k.id,L=g._cacheFeature[P];if(L)L.grid.push(d),g.updateEntity(L.entity,k);else{var E=g.createPrimitive(n,k,function(N){y.config.debuggerTileInfo&&(N._temp_id=P,N.popup=function(I){return(0,T.default)(y._cacheFeature[I._temp_id].grid)}),y._cacheFeature[P]={grid:[d],primitive:N}});E!=null&&(y.config.debuggerTileInfo&&(E._temp_id=P,E.popup=function(N){return(0,T.default)(y._cacheFeature[N._temp_id].grid)}),y._cacheFeature[P]={grid:[d],entity:E})}p.push(P)},S=0,O=h.length;S<O;S++)w();this._cacheGrid[d]=this._cacheGrid[d]||{},this._cacheGrid[d].ids=p,this._cacheGrid[d].isLoading=![]}},createEntity:function(n,h,g){return this.config.createEntity?this.config.createEntity(n,h,g):null},updateEntity:function(n,h){this.config.updateEntity&&this.config.updateEntity(n,h)},removeEntity:function(n){this.config.removeEntity?this.config.removeEntity(n):this.dataSource.entities.remove(n)},removePrimitive:function(n){this.config.removePrimitive?this.config.removePrimitive(n):this.primitives.remove(n)},_removeImageryCache:function(n){var h=n.key,g=this._cacheGrid[h];if(g){if(g.ids)for(var d=0;d<g.ids.length;d++){var y=g.ids[d],p=this._cacheFeature[y];p&&(this.customRemove(p.grid,h),p.grid.length===0&&(delete this._cacheFeature[y],this.removeEntity(p.entity),this.removePrimitive(p.primitive)))}delete this._cacheGrid[h]}},_removeAllImageryCache:function(){this.config.removeAllEntity?this.config.removeAllEntity():(this.dataSource.entities.removeAll(),this.primitives.removeAll());for(var n in this._cacheFeature)delete this._cacheFeature[n]},removeEx:function(){this.config.removeAllEntity?this.config.removeAllEntity():(this.dataSource.entities.removeAll(),this.primitives.removeAll());for(var n in this._cacheFeature)delete this._cacheFeature[n];for(var h in this._cacheGrid)delete this._cacheGrid[h]},reload:function(){var n=this,h=this,g=function(){var w=n._cacheGrid[d];if(w==null||w.opts==null||w.isLoading)return"continue";var S=w.opts;n.getDataForGrid(S,function(O){h._showData(S,O)})};for(var d in this._cacheGrid)var y=g()},hasOpacity:!![],_opacity:1,setOpacity:function(n){this._opacity=n;for(var h in this._cacheFeature){var g=this._cacheFeature[h].entity,d=this._cacheFeature[h].primitive;if(d!=null&&d._primitive&&this._updatePrimitiveAlpha(d._primitive.appearance.material.uniforms.color,this._opacity),g!=null&&(g.polygon&&g.polygon.material&&g.polygon.material.color&&(this._updatEntityAlpha(g.polygon.material.color,this._opacity),g.polygon.outlineColor&&this._updatEntityAlpha(g.polygon.outlineColor,this._opacity)),g.polyline&&g.polyline.material&&g.polyline.material.color&&this._updatEntityAlpha(g.polyline.material.color,this._opacity),g.billboard&&(g.billboard.color=new b.Color.fromCssColorString("#FFFFFF").withAlpha(this._opacity)),g.model&&(g.model.color=new b.Color.fromCssColorString("#FFFFFF").withAlpha(this._opacity)),g.label)){var y=this._opacity;g.attribute&&g.attribute.label&&g.attribute.label.opacity&&(y=g.attribute.label.opacity),g.label.fillColor&&this._updatEntityAlpha(g.label.fillColor,y),g.label.outlineColor&&this._updatEntityAlpha(g.label.outlineColor,y),g.label.backgroundColor&&this._updatEntityAlpha(g.label.backgroundColor,y)}}},_updatEntityAlpha:function(n,h){if(n){var g=n.getValue(this.viewer.clock.currentTime);if(!g||!g.withAlpha)return n;g=g.withAlpha(h),n.setValue(g)}},_updatePrimitiveAlpha:function(n,h){n.alpha=h},bindMourseEvnet:function(n){var h,g=this;(this.config.columns||this.config.popup||(h=this.config.identifyField[0])!==null&&h!==void 0&&h.popup3d)&&(n.popup={html:function(y){var p=g.getEntityAttr(y);return f.isString(p)?p:f.getPopupForConfig(g.config,p)},anchor:this.config.popupAnchor||[0,-15]}),this.config.tooltip&&(n.tooltip={html:function(y){var p=g.getEntityAttr(y);return f.isString(p)?p:f.getPopupForConfig({popup:g.config.tooltip},p)},anchor:this.config.tooltipAnchor||[0,-15]}),this.config.click&&(n.click=this.config.click),this.config.mouseover&&(n.mouseover=this.config.mouseover),this.config.mouseout&&(n.mouseout=this.config.mouseout)},getEntityAttr:function(n){return f.getAttrVal(n.properties)},colorHash:{},setDefSymbol:function(n){var h=this.getEntityAttr(n)||{};if(n.polygon){var g=h.id||h.OBJECTID||0,d=this.colorHash[g];!d&&(d=b.Color.fromRandom({minimumGreen:.75,maximumBlue:.75,alpha:this._opacity}),this.colorHash[g]=d),n.polygon.material=d,n.polygon.outline=!![],n.polygon.outlineColor=b.Color.WHITE}else if(n.polyline){var y=h.id||h.OBJECTID||0,p=this.colorHash[y];!p&&(p=b.Color.fromRandom({minimumGreen:.75,maximumBlue:.75,alpha:this._opacity}),this.colorHash[y]=p),n.polyline.material=p,n.polyline.width=2}else n.billboard&&(n.billboard.scale=.5,n.billboard.horizontalOrigin=b.HorizontalOrigin.CENTER,n.billboard.verticalOrigin=b.VerticalOrigin.BOTTOM)},setConfigSymbol:function(n,h){var g=this.getEntityAttr(n)||{},d=h.styleOptions;if(d.opacity&&(d.opacity=this._opacity===1?d.opacity*this._opacity:this._opacity),h.styleField){if(h.styleFieldOptions){var y=g[h.styleField],p=h.styleFieldOptions[y];p!=null&&(p.opacity=this._opacity,p.outlineOpacity=this._opacity,d=f.clone(d),d=C.default.extend(d,p))}else if(h.styleStepOptions){var w=h.minValue;w===null&&(w=Number.MIN_VALUE);var S=g[h.styleField],O=this.getIndexByValue(h.styleStepOptions,w,S);if(O!=null){var B=h.styleStepOptions[O].style;B.opacity=this._opacity,B.outlineOpacity=this._opacity,d=f.clone(d),d=C.default.extend(d,B)}}}if(typeof h.calback=="function"){var k=h.calback(g,n,h);if(!k)return;d=f.clone(d),d=C.default.extend(d,k)}if(d=d||{},n.polyline&&(u.style2Entity(d,n.polyline),d.label&&d.label.field)){d.label.heightReference=b.defaultValue(d.label.heightReference,b.HeightReference.CLAMP_TO_GROUND);var P=o.style2Entity(d.label);P.text=g[d.label.field]||P.text||"";var L=u.getPositions(n),E=L[Math.floor(L.length/2)];d.label.position&&(d.label.position==="center"?E=(0,s.centerOfMass)(L):f.isNumber(d.label.position)&&(E=L[d.label.position])),n.position=E,n.label=P}if(n.polygon){if(d.classificationType===void 0&&(d.classificationType=b.ClassificationType.BOTH),l.style2Entity(d,n.polygon),d.outlineWidth&&d.outlineWidth<1&&(d.outlineWidth=1),d.outlineWidth&&d.outlineWidth>1||d.classificationType!=b.ClassificationType.NONE)if(h.volumeStyle&&!h.volumeStyle.render2d)d.outlineWidth=1;else{n.polygon.outline=![];var N={color:d.outlineColor,width:d.outlineWidth,opacity:d.outlineOpacity,lineType:"solid",clampToGround:!![],classificationType:d.classificationType,outline:![]},I=u.style2Entity(N);I.positions=l.getPositions(n),n.polyline=I}if(d.label&&d.label.field){d.label.heightReference=b.defaultValue(d.label.heightReference,b.HeightReference.CLAMP_TO_GROUND);var G=o.style2Entity(d.label);G.text=g[d.label.field]||G.text||"",n.position=(0,s.pointOnPolygon)(l.getPositions(n),l.getHoles(n)),n.label=G}if(h.volumeStyle){var W=Number(g[h.volumeStyle.cloumn]||1),Z=h.volumeStyle.storeyheight||3.5;if(f.isString(Z)&&(Z=g[Z]||3.5),h.volumeStyle.Updownheight){var U=h.volumeStyle.Updownheight.down,H=h.volumeStyle.Updownheight.up;f.isNumber(U)?n.polygon.height=U:f.isString(U)&&(n.polygon.height=g[U]||0),f.isNumber(H)?n.polygon.extrudedHeight=H:f.isString(H)?n.polygon.extrudedHeight=g[H]||n.polygon.height+(Z||3.5):H==null&&(n.polygon.extrudedHeight=n.polygon.height+(Z||3.5))}else n.polygon.extrudedHeight=W*Z;if(h.volumeStyle.outlineWidth!==void 0&&h.volumeStyle.outlineWidth==![]&&(n.polygon.outline=![]),h.volumeStyle.clampToGround&&(n.polygon.heightReference=b.HeightReference.CLAMP_TO_GROUND),d.label&&d.label.field){var V,Y;n.position=(0,s.setPositionsHeight)(n.position.getValue(),(V=n.polygon)===null||V===void 0||(Y=V.extrudedHeight)===null||Y===void 0?void 0:Y.getValue())}}}if(n.label&&(d.label=d.label||d||{},d.label.heightReference=b.defaultValue(d.label.heightReference,b.HeightReference.CLAMP_TO_GROUND),o.style2Entity(d.label,n.label),d.label.field&&(n.label.text=g[d.label.field]||n.label.text||"")),n.billboard){if(d.heightReference=b.defaultValue(d.heightReference,b.HeightReference.CLAMP_TO_GROUND),m.style2Entity(d,n.billboard),d.label&&d.label.field&&!n.label){d.label.heightReference=b.defaultValue(d.label.heightReference,b.HeightReference.CLAMP_TO_GROUND);var $=o.style2Entity(d.label);$.text=g[d.label.field]||$.text||"",n.label=$}if(d.model){d.model.heightReference=b.defaultValue(d.model.heightReference,b.HeightReference.CLAMP_TO_GROUND);var K=r.style2Entity(d.model);n.model=K}}if((d.heightReference===b.HeightReference.NONE||d.heightReference===b.HeightReference.RELATIVE_TO_GROUND)&&(n.label||n.billboard)&&d.annotationheightField){var J=d.annotationheightField;f.isString(J)&&(J=Number(g[J])),f.isNumber(J)&&(n.position=(0,s.setPositionsHeight)(n.position.getValue(),J))}n.attribute=d},setPrimitiveConfigSymbol:function(n,h){var g=this.getEntityAttr(n)||{},d=h.styleOptions;if(d.opacity&&(d.opacity=this._opacity),h.styleField){if(h.styleFieldOptions){var y=g[h.styleField],p=h.styleFieldOptions[y];p!=null&&(p.opacity=this._opacity,p.outlineOpacity=this._opacity,d=f.clone(d),d=C.default.extend(d,p))}else if(h.styleStepOptions){var w=h.minValue;w===null&&(w=Number.MIN_VALUE);var S=g[h.styleField],O=this.getIndexByValue(h.styleStepOptions,w,S);if(O!=null){var B=h.styleStepOptions[O].style;B.opacity=this._opacity,B.outlineOpacity=this._opacity,d=f.clone(d),d=C.default.extend(d,B)}}}var k=n.geometryInstances.geometry;if(k instanceof b.PolygonGeometry&&(!d.classificationType&&(d.classificationType=b.ClassificationType.BOTH),l.style2Primitive(d,n),h.volumeStyle)){var P=Number(g[h.volumeStyle.cloumn]||1),L=h.volumeStyle.storeyheight||3.5;if(f.isString(L)&&(L=g[L]||3.5),h.volumeStyle.Updownheight){var E=h.volumeStyle.Updownheight.down,N=h.volumeStyle.Updownheight.up;f.isNumber(E)?k._height=E:f.isString(E)&&(k._height=g[E]||0),f.isNumber(N)?k.extrudedHeight=N:f.isString(N)?k._extrudedHeight=g[N]||k._height+(L||3.5):N==null&&(k._extrudedHeight=k._height+(L||3.5))}else k._extrudedHeight=P*L}},arrayRemove:function(n,h){for(var g=0;g<n.length;g++)if(this[g]==h){var d;(0,D.default)(d=this).call(d,g,1);break}},getIndexByValue:function(n,h,g){for(var d in n){var y=n[d].value;if(g>=h&&g<=y)return d;h=y}},customRemove:function(n,h){for(var g=0;g<n.length;g++)if(n[g]==h){(0,D.default)(n).call(n,g,1);break}return n}});z.CustomFeatureGridLayer=a},92636:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.CustomFeatureImageGridLayer=void 0;var T=A(e(66273)),D=A(e(69033)),b=A(e(42579)),C=m(e(87647)),f=e(62344);function v(u){if(typeof F!="function")return null;var l=new F,r=new F;return(v=function(c){return c?r:l})(u)}function m(u,l){if(!l&&u&&u.__esModule)return u;if(u===null||M(u)!=="object"&&typeof u!="function")return{default:u};var r=v(l);if(r&&r.has(u))return r.get(u);var s={},c=Object.defineProperty&&R;for(var x in u)if(x!=="default"&&Object.prototype.hasOwnProperty.call(u,x)){var a=c?R(u,x):null;a&&(a.get||a.set)?Object.defineProperty(s,x,a):s[x]=u[x]}return s.default=u,r&&r.set(u,s),s}var o=f.FeatureGridLayer.extend({_cacheGrid:{},_cacheFeature:{},_clean:![],_update:!![],_helper:void 0,_addImageryCache:function(l){this._cacheGrid[l.key]={opts:l,isLoading:!![]};var r=this;l.level<r.config.minimumLevel||r._visible&&(r._update&&(r._helper=new C.EventHelper,r._helper&&(r._update=![]),r._helper.add(r.viewer.scene.globe.tileLoadProgressEvent,function(s){s===0&&r._updatePrimitiveLayers()})),r._showData(l,null))},_updatePrimitiveLayers:function(){for(var l=this,r=this.primitives,s=r.length,c=0;c<s;++c){var x=r.get(c);x.show=![]}this.viewer.scene.globe._surface._tilesToRender.forEach(function(a){(0,b.default)(this,l);var i=a._level+"_x"+a._x+"_y"+a._y,n=this===null||this===void 0?void 0:this._cacheFeature[i];n&&(n.primitive.show=!![])}.bind(this))},getDataForGrid:function(l,r){this.config.getDataForGrid&&this.config.getDataForGrid(l,r)},checkHasBreak:function(l){return!this._visible||!this._cacheGrid[l]?!![]:![]},_showData:function(l,r){var s=l.key;if(!this.checkHasBreak[s]){var c=this,x=[],a=l.key,i=this._cacheFeature[a];if(!c._clean&&!i){var n;this.createPrimitive(l,r,function(d){var y;if(!c._clean){if(c.config.debuggerTileInfo&&(d.popup=function(p){return(0,T.default)(c._cacheFeature[p._temp_id].grid)}),!c._cacheGrid[s]){c.removePrimitive(d);return}(l==null||(y=l.imagery)===null||y===void 0?void 0:y.referenceCount)>1&&(d.show=![]),c._cacheFeature[l.key]={grid:[l.key],primitive:d}}}),x.push(a),this._cacheGrid[s]=this._cacheGrid[s]||{},this._cacheGrid[s].ids=x,this._cacheGrid[s].isLoading=![];var h=l==null||(n=l.imagery)===null||n===void 0?void 0:n.parent,g=h?.level+"_x"+h?.x+"_y"+h?.y;h?.referenceCount>1&&this._cacheFeature[g]&&(this._cacheFeature[g].primitive.show=![])}}},removePrimitive:function(l){l instanceof C.GroundPrimitive&&(this.config.removePrimitive?this.config.removePrimitive(l):this.primitives.remove(l))},_removeImageryCache:function(l){var r=l.key,s=this._cacheGrid[r];if(s){if(s.ids)for(var c=0;c<s.ids.length;c++){var x=s.ids[c],a=this._cacheFeature[x];if(a&&(this.customRemove(a.grid,r),a.grid.length===0)){delete this._cacheFeature[x],this.removePrimitive(a.primitive);var i=l.imagery.parent,n=i.level+"_x"+i.x+"_y"+i.y;i.referenceCount<5&&this._cacheFeature[n]&&(this._cacheFeature[n].primitive.show=!![])}}this._cacheFeature[r]&&delete this._cacheFeature[r],delete this._cacheGrid[r]}},_removeAllImageryCache:function(){this.config.removeAllPrimitive?this.config.removeAllPrimitive():this.primitives.removeAll();for(var l in this._cacheFeature)delete this._cacheFeature[l]},removeEx:function(){this._helper.removeAll(),this._clean=!![],this.config.removeAllPrimitive?this.config.removeAllPrimitive():this.primitives.removeAll();for(var l in this._cacheFeature)delete this._cacheFeature[l];for(var r in this._cacheGrid)delete this._cacheGrid[r]},reload:function(){var l=this;for(var r in this._cacheGrid){var s=this._cacheGrid[r];if(!(s==null||s.opts==null||s.isLoading)){var c=s.opts;l._showData(c,null)}}},hasOpacity:!![],_opacity:1,setOpacity:function(l){this._opacity=l;for(var r in this._cacheFeature){var s=this._cacheFeature[r].primitive;s!=null&&s._primitive&&this._updatePrimitiveAlpha(s._primitive.appearance.material.uniforms.color,this._opacity)}},_updatePrimitiveAlpha:function(l,r){l.alpha=r},customRemove:function(l,r){for(var s=0;s<l.length;s++)if(l[s]==r){(0,D.default)(l).call(l,s,1);break}return l}});z.CustomFeatureImageGridLayer=o},21548:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.AmapImageryProvider=void 0;var D=T(e(42762)),b=T(e(22777)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=e(95340),o=l(e(87647));function u(x){if(typeof R!="function")return null;var a=new R,i=new R;return(u=function(h){return h?i:a})(x)}function l(x,a){if(!a&&x&&x.__esModule)return x;if(x===null||M(x)!=="object"&&typeof x!="function")return{default:x};var i=u(a);if(i&&i.has(x))return i.get(x);var n={},h=Object.defineProperty&&A;for(var g in x)if(g!=="default"&&Object.prototype.hasOwnProperty.call(x,g)){var d=h?A(x,g):null;d&&(d.get||d.set)?Object.defineProperty(n,g,d):n[g]=x[g]}return n.default=x,i&&i.set(x,n),n}function r(x){var a=s();return function(){var n=(0,v.default)(x),h;if(a){var g=(0,v.default)(this).constructor;h=F(n,arguments,g)}else h=n.apply(this,arguments);return(0,f.default)(this,h)}}function s(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var c=function(x){(0,C.default)(i,x);var a=r(i);function i(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,b.default)(this,i),n.tilingScheme=new m.AmapMercatorTilingScheme,a.call(this,n)}return(0,D.default)(i)}(o.UrlTemplateImageryProvider);z.AmapImageryProvider=c},39258:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.BaiduImageryProvider=void 0;var T=A(e(22777)),D=A(e(42762)),b=e(95340),C=v(e(87647));function f(o){if(typeof F!="function")return null;var u=new F,l=new F;return(f=function(s){return s?l:u})(o)}function v(o,u){if(!u&&o&&o.__esModule)return o;if(o===null||M(o)!=="object"&&typeof o!="function")return{default:o};var l=f(u);if(l&&l.has(o))return l.get(o);var r={},s=Object.defineProperty&&R;for(var c in o)if(c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)){var x=s?R(o,c):null;x&&(x.get||x.set)?Object.defineProperty(r,c,x):r[c]=o[c]}return r.default=o,l&&l.set(o,r),r}var m=function(){function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if((0,T.default)(this,o),this._url=u.url,this._labelStyle=u.labelStyle||"web2D",this._tileWidth=256,this._tileHeight=256,this._maximumLevel=18,this._crs="WGS84",u.crs==="WGS84"){for(var l=[],r=0;r<19;r++)l[r]=256*Math.pow(2,18-r);this._tilingScheme=new b.BaiduMercatorTilingScheme({resolutions:l,rectangleSouthwestInMeters:new C.Cartesian2(-2003772637e-2,-1247410417e-2),rectangleNortheastInMeters:new C.Cartesian2(2003772637e-2,1247410417e-2)})}else this._tilingScheme=new C.WebMercatorTilingScheme({rectangleSouthwestInMeters:new C.Cartesian2(-33554054,-33746824),rectangleNortheastInMeters:new C.Cartesian2(33554054,33746824)});this._rectangle=this._tilingScheme.rectangle,this._credit=void 0,this._token=void 0,this._style=u.style||"normal"}return(0,D.default)(o,[{key:"url",get:function(){return this._url}},{key:"token",get:function(){return this._token}},{key:"tileWidth",get:function(){if(!this.ready)throw new C.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},{key:"tileHeight",get:function(){if(!this.ready)throw new C.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},{key:"maximumLevel",get:function(){if(!this.ready)throw new C.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},{key:"minimumLevel",get:function(){if(!this.ready)throw new C.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return 0}},{key:"tilingScheme",get:function(){if(!this.ready)throw new C.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},{key:"rectangle",get:function(){if(!this.ready)throw new C.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},{key:"ready",get:function(){return!!this._url}},{key:"credit",get:function(){return this._credit}},{key:"hasAlphaChannel",get:function(){return!![]}},{key:"getTileCredits",value:function(){}},{key:"requestImage",value:function(l,r,s){if(!this.ready)throw new C.DeveloperError("requestImage must not be called before the imagery provider is ready.");var c=this._tilingScheme.getNumberOfXTilesAtLevel(s),x=this._tilingScheme.getNumberOfYTilesAtLevel(s),a=this._url.replace("{z}",s).replace("{s}",String(1)).replace("{style}",this._style).replace("{labelStyle}",this._labelStyle).replace("{time}",String(new Date().getTime()));return this._crs==="WGS84"?a=a.replace("{x}",String(l)).replace("{y}",String(-r)):a=a.replace("{x}",String(l-c/2)).replace("{y}",String(x/2-r-1)),C.ImageryProvider.loadImage(this,a)}}]),o}();z.BaiduImageryProvider=m},16036:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=M(e(22777)),R=M(e(42762)),A=637099681e-2,T=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],D=[75,60,45,30,15,0],b=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],C=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],f=function(){function m(){(0,F.default)(this,m),this.isWgs84=![]}return(0,R.default)(m,[{key:"getDistanceByMC",value:function(u,l){if(!u||!l||(u=this.convertMC2LL(u),!u))return 0;var r=this.toRadians(u.lng),s=this.toRadians(u.lat);if(l=this.convertMC2LL(l),!l)return 0;var c=this.toRadians(l.lng),x=this.toRadians(l.lat);return this.getDistance(r,c,s,x)}},{key:"getDistanceByLL",value:function(u,l){if(!u||!l)return 0;u.lng=this.getLoop(u.lng,-180,180),u.lat=this.getRange(u.lat,-74,74),l.lng=this.getLoop(l.lng,-180,180),l.lat=this.getRange(l.lat,-74,74);var r=this.toRadians(u.lng),s=this.toRadians(u.lat),c=this.toRadians(l.lng),x=this.toRadians(l.lat);return this.getDistance(r,c,s,x)}},{key:"convertMC2LL",value:function(u){if(!u)return{lng:0,lat:0};var l={};if(this.isWgs84){l.lng=u.lng/2003750834e-2*180;var r=u.lat/2003750834e-2*180;return l.lat=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2),{lng:l.lng.toFixed(6),lat:l.lat.toFixed(6)}}for(var s={lng:Math.abs(u.lng),lat:Math.abs(u.lat)},c,x=0;x<T.length;x++)if(s.lat>=T[x]){c=b[x];break}return l=this.convertor(u,c),{lng:l.lng.toFixed(6),lat:l.lat.toFixed(6)}}},{key:"convertLL2MC",value:function(u){if(!u)return{lng:0,lat:0};if(u.lng>180||u.lng<-180||u.lat>90||u.lat<-90)return u;if(this.isWgs84){var l={},r=6378137;l.lng=u.lng*Math.PI/180*r;var s=u.lat*Math.PI/180;return l.lat=r/2*Math.log((1+Math.sin(s))/(1-Math.sin(s))),{lng:parseFloat(l.lng.toFixed(2)),lat:parseFloat(l.lat.toFixed(2))}}u.lng=this.getLoop(u.lng,-180,180),u.lat=this.getRange(u.lat,-74,74);for(var c={lng:u.lng,lat:u.lat},x,a=0;a<D.length;a++)if(c.lat>=D[a]){x=C[a];break}if(!x){for(var i=0;i<D.length;i++)if(c.lat<=-D[i]){x=C[i];break}}var n=this.convertor(u,x);return{lng:parseFloat(n.lng.toFixed(2)),lat:parseFloat(n.lat.toFixed(2))}}},{key:"convertor",value:function(u,l){if(!u||!l)return{lng:0,lat:0};var r=l[0]+l[1]*Math.abs(u.lng),s=Math.abs(u.lat)/l[9],c=l[2]+l[3]*s+l[4]*s*s+l[5]*s*s*s+l[6]*s*s*s*s+l[7]*s*s*s*s*s+l[8]*s*s*s*s*s*s;return r*=u.lng<0?-1:1,c*=u.lat<0?-1:1,{lng:r,lat:c}}},{key:"getDistance",value:function(u,l,r,s){return A*Math.acos(Math.sin(r)*Math.sin(s)+Math.cos(r)*Math.cos(s)*Math.cos(l-u))}},{key:"toRadians",value:function(u){return Math.PI*u/180}},{key:"toDegrees",value:function(u){return 180*u/Math.PI}},{key:"getRange",value:function(u,l,r){return l!=null&&(u=Math.max(u,l)),r!=null&&(u=Math.min(u,r)),u}},{key:"getLoop",value:function(u,l,r){for(;u>r;)u-=r-l;for(;u<l;)u+=r-l;return u}},{key:"lngLatToMercator",value:function(u){return this.convertLL2MC(u)}},{key:"lngLatToPoint",value:function(u){var l=this.convertLL2MC(u);return{x:l.lng,y:l.lat}}},{key:"mercatorToLngLat",value:function(u){return this.convertMC2LL(u)}},{key:"pointToLngLat",value:function(u){var l={lng:u.x,lat:u.y};return this.convertMC2LL(l)}},{key:"pointToPixel",value:function(u,l,r,s){if(!u)return{x:0,y:0};u=this.lngLatToMercator(u);var c=this.getZoomUnits(l),x=Math.round((u.lng-r.lng)/c+s.width/2),a=Math.round((r.lat-u.lat)/c+s.height/2);return{x,y:a}}},{key:"pixelToPoint",value:function(u,l,r,s){if(!u)return{lng:0,lat:0};var c=this.getZoomUnits(l),x=r.lng+c*(u.x-s.width/2),a=r.lat-c*(u.y-s.height/2),i={lng:x,lat:a};return this.mercatorToLngLat(i)}},{key:"getZoomUnits",value:function(u){return Math.pow(2,18-u)}}]),m}(),v=f;z.default=v},95340:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.BaiduMercatorTilingScheme=z.AmapMercatorTilingScheme=void 0;var D=T(e(42762)),b=T(e(22777)),C=T(e(30044)),f=T(e(99085)),v=T(e(34009)),m=T(e(16036)),o=r(e(87647)),u=r(e(10565));function l(i){if(typeof R!="function")return null;var n=new R,h=new R;return(l=function(d){return d?h:n})(i)}function r(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=l(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&A;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?A(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}function s(i){var n=c();return function(){var g=(0,v.default)(i),d;if(n){var y=(0,v.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,f.default)(this,d)}}function c(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var x=function(i){(0,C.default)(h,i);var n=s(h);function h(g){var d;(0,b.default)(this,h),d=n.call(this,g);var y=new o.WebMercatorProjection;return d._projection.project=function(p,w){return w=u.wgs84togcj02(o.Math.toDegrees(p.longitude),o.Math.toDegrees(p.latitude)),w=y.project(new o.Cartographic(o.Math.toRadians(w[0]),o.Math.toRadians(w[1]))),new o.Cartesian2(w.x,w.y)},d._projection.unproject=function(p,w){var S=y.unproject(p);return w=u.gcj02towgs84(o.Math.toDegrees(S.longitude),o.Math.toDegrees(S.latitude)),new o.Cartographic(o.Math.toRadians(w[0]),o.Math.toRadians(w[1]))},d}return(0,D.default)(h)}(o.WebMercatorTilingScheme);z.AmapMercatorTilingScheme=x;var a=function(i){(0,C.default)(h,i);var n=s(h);function h(g){var d;(0,b.default)(this,h),d=n.call(this,g);var y=new m.default;return d._projection.project=function(p,w){return w=w||{},w=u.wgs84togcj02(o.Math.toDegrees(p.longitude),o.Math.toDegrees(p.latitude)),w=u.gcj02tobd09(w[0],w[1]),w[0]=Math.min(w[0],180),w[0]=Math.max(w[0],-180),w[1]=Math.min(w[1],74.000022),w[1]=Math.max(w[1],-71.988531),w=y.lngLatToPoint({lng:w[0],lat:w[1]}),new o.Cartesian2(w.x,w.y)},d._projection.unproject=function(p,w){return w=w||{},w=y.mercatorToLngLat({lng:p.x,lat:p.y}),w=u.bd09togcj02(w.lng,w.lat),w=u.gcj02towgs84(w[0],w[1]),new o.Cartographic(o.Math.toRadians(w[0]),o.Math.toRadians(w[1]))},d.resolutions=g.resolutions||[],d}return(0,D.default)(h,[{key:"tileXYToNativeRectangle",value:function(d,y,p,w){var S=this.resolutions[p],O=d*S,B=(d+1)*S,k=((y=-y)+1)*S,P=y*S;return o.defined(w)?(w.west=O,w.south=P,w.east=B,w.north=k,w):new o.Rectangle(O,P,B,k)}},{key:"positionToTileXY",value:function(d,y,p){var w=this._rectangle;if(o.Rectangle.contains(w,d)){var S=this._projection,O=S.project(d);if(o.defined(O)){var B=this.resolutions[y],k=Math.floor(O.x/B),P=-Math.floor(O.y/B);return o.defined(p)?(p.x=k,p.y=P,p):new o.Cartesian2(k,P)}}}}]),h}(o.WebMercatorTilingScheme);z.BaiduMercatorTilingScheme=a},16474:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.CzmlLayer=void 0;var A=C(e(87647)),T=e(2008),D=C(e(80823));function b(v){if(typeof F!="function")return null;var m=new F,o=new F;return(b=function(l){return l?o:m})(v)}function C(v,m){if(!m&&v&&v.__esModule)return v;if(v===null||M(v)!=="object"&&typeof v!="function")return{default:v};var o=b(m);if(o&&o.has(v))return o.get(v);var u={},l=Object.defineProperty&&R;for(var r in v)if(r!=="default"&&Object.prototype.hasOwnProperty.call(v,r)){var s=l?R(v,r):null;s&&(s.get||s.set)?Object.defineProperty(u,r,s):u[r]=v[r]}return u.default=v,o&&o.set(v,u),u}var f=T.GeoJsonLayer.extend({queryData:function(){var m=this,o=D.getProxyUrl(this.config),u=A.CzmlDataSource.load(o.url,o);u.then(function(l){m.showResult(l)}).catch(function(l){m.showError("\u670D\u52A1\u51FA\u9519",l)})},getEntityAttr:function(m){if(m.description&&m.description.getValue)return m.description.getValue(this.viewer.clock.currentTime)}});z.CzmlLayer=f},8397:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(85208),A=e(59791),T=e(22466),D=e(83393),b=e(5077),C=e(87879),f=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DrawLayer=void 0;var v=f(e(53267)),m=f(e(5146)),o=f(e(20314)),u=f(e(52909)),l=f(e(42579)),r=f(e(36583)),s=f(e(43389)),c=f(e(63379)),x=e(14666),a=h(e(80823)),i=h(e(87647));function n(p){if(typeof C!="function")return null;var w=new C,S=new C;return(n=function(B){return B?S:w})(p)}function h(p,w){if(!w&&p&&p.__esModule)return p;if(p===null||F(p)!=="object"&&typeof p!="function")return{default:p};var S=n(w);if(S&&S.has(p))return S.get(p);var O={},B=Object.defineProperty&&D;for(var k in p)if(k!=="default"&&Object.prototype.hasOwnProperty.call(p,k)){var P=B?D(p,k):null;P&&(P.get||P.set)?Object.defineProperty(O,k,P):O[k]=p[k]}return O.default=p,S&&S.set(p,O),O}function g(p,w){var S=R(p);if(A){var O=A(p);w&&(O=T(O).call(O,function(B){return D(p,B).enumerable})),S.push.apply(S,O)}return S}function d(p){for(var w=1;w<arguments.length;w++){var S=arguments[w]!=null?arguments[w]:{};w%2?g(Object(S),!0).forEach(function(O){(0,s.default)(p,O,S[O])}):b?Object.defineProperties(p,b(S)):g(Object(S)).forEach(function(O){Object.defineProperty(p,O,D(S,O))})}return p}var y=x.BaseLayer.extend({id:"",name:"",layerTag:"",dataSource:null,show:![],primitiveCollection:null,groundPrimitiveCollection:null,createSource:function(){this.id=this.config.id,this.name=this.config.label,this.layerTag=this.config.layerTag,this.dataSource=new i.CustomDataSource(this.config.id),this.primitiveCollection=new i.PrimitiveCollection,this.groundPrimitiveCollection=new i.PrimitiveCollection},setLayerVisible:function(w){this.dataSource.show=w,this.primitiveCollection.show=w,this.groundPrimitiveCollection.show=w,this.show=w},setProperties:function(w){this.config=d(d({},this.config),w),this.name=this.config.label,this.layerTag=this.config.layerTag},setFeatureVisible:function(w,S){w.show=S},getFeatures:function(){for(var w=(0,v.default)(this.dataSource.entities),S=0;S<this.primitiveCollection._primitives.length;S++){var O=this.primitiveCollection._primitives[S];O instanceof i.PointPrimitiveCollection?w=(0,m.default)(w).call(w,O._pointPrimitives):O instanceof i.LabelCollection?w=(0,m.default)(w).call(w,O._labels):O instanceof i.BillboardCollection?w=(0,m.default)(w).call(w,O._billboards):O instanceof i.CloudCollection?w=(0,m.default)(w).call(w,O._clouds):w.push(O)}return w},getFeatureById:function(w){for(var S=this.getFeatures(),O=0,B=S.length;O<B;O++){var k,P=S[O];if(w===((k=P.attribute)===null||k===void 0?void 0:k.attr.id))return P}},addFeature:function(w){w instanceof i.Entity&&this.dataSource.entities.add(w)},deleteFeatures:function(){this.dataSource.entities.removeAll(),this.primitiveCollection.removeAll(),this.groundPrimitiveCollection.removeAll()},deleteFeatureById:function(w){var S=this,O=this.getFeatureById(w),B=this.primitiveCollection._primitives;if(O instanceof i.Entity)if(O.id.match(/_multi[0-9]/)){var k,P=(0,o.default)(k=O.id).call(k,0,O.id.indexOf("_multi"));(0,r.default)(this.getFeatures()).forEach(function(G){var W;(0,l.default)(this,S),!((W=G.id)===null||W===void 0)&&W.match(P)&&this.dataSource.entities.remove(G)}.bind(this));return}else this.dataSource.entities.remove(O);else if(this.primitiveCollection.contains(O))this.primitiveCollection.remove(O);else if(O instanceof i.PointPrimitive){var L=(0,u.default)(B).call(B,function(G){return(0,l.default)(this,S),G instanceof i.PointPrimitiveCollection}.bind(this));L.remove(O)}else if(O instanceof i.Label){var E=(0,u.default)(B).call(B,function(G){return(0,l.default)(this,S),G instanceof i.LabelCollection}.bind(this));E.remove(O)}else if(O instanceof i.Billboard){var N=(0,u.default)(B).call(B,function(G){return(0,l.default)(this,S),G instanceof i.BillboardCollection}.bind(this));N.remove(O)}else if(O instanceof i.CumulusCloud){var I=(0,u.default)(B).call(B,function(G){return(0,l.default)(this,S),G instanceof i.CloudCollection}.bind(this));I.remove(O)}},add:function(){this.createSource(),this.viewer.dataSources.add(this.dataSource),this.viewer.scene.primitives.add(this.primitiveCollection),this.viewer.scene.groundPrimitives.add(this.groundPrimitiveCollection),this.show=!![]},remove:function(){this.viewer.dataSources.remove(this.dataSource),this.viewer.scene.primitives.remove(this.primitiveCollection),this.viewer.scene.groundPrimitives.remove(this.groundPrimitiveCollection)},centerAt:function(w){var S=this.drawControl.getEntitys();this.viewer.flyTo(S,{duration:w})},hasOpacity:![],setOpacity:function(){},_loadData_:function(){var w=this;c.default.default.ajax({type:"get",dataType:"json",url:this.config.url,timeout:1e4,success:function(O){w._isload=!![];var B=w.drawControl.loadJson(O,{isClear:!![],isFly:w.config.flyTo});w._bindEntityConfig(B)},error:function(){M.error("Json\u6587\u4EF6"+w.config.url+"\u52A0\u8F7D\u5931\u8D25\uFF01")}})},_loadData:function(){},_bindEntityConfig:function(w){for(var S=this,O=0,B=w.length;O<B;O++){var k=w[O];(this.config.columns||this.config.popup)&&(k.popup={html:function(L){var E=L.attribute.attr;return E.layer_name=S.config.name,E.draw_type=L.attribute.drawtype,E.draw_typename=L.attribute.name,a.getPopupForConfig(S.config,E)},anchor:this.config.popupAnchor||[0,-15]}),this.config.tooltip&&(k.tooltip={html:function(L){var E=L.attribute.attr;return E.layer_name=S.config.name,E.draw_type=L.attribute.drawtype,E.draw_typename=L.attribute.name,a.getPopupForConfig({popup:S.config.tooltip},E)},anchor:this.config.tooltipAnchor||[0,-15]}),this.config.click&&(k.click=this.config.click),this.config.mouseover&&(k.mouseover=this.config.mouseover),this.config.mouseout&&(k.mouseout=this.config.mouseout)}}});z.DrawLayer=y},81218:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.FeatureGridImageryProvider=f;var T=A(e(78756)),D=C(e(87647));function b(v){if(typeof F!="function")return null;var m=new F,o=new F;return(b=function(l){return l?o:m})(v)}function C(v,m){if(!m&&v&&v.__esModule)return v;if(v===null||M(v)!=="object"&&typeof v!="function")return{default:v};var o=b(m);if(o&&o.has(v))return o.get(v);var u={},l=Object.defineProperty&&R;for(var r in v)if(r!=="default"&&Object.prototype.hasOwnProperty.call(v,r)){var s=l?R(v,r):null;s&&(s.get||s.set)?Object.defineProperty(u,r,s):u[r]=v[r]}return u.default=v,o&&o.set(v,u),u}function f(v){if(v=D.defaultValue(v,D.defaultValue.EMPTY_OBJECT),this.options=v,this._tileWidth=D.defaultValue(v.tileWidth,256),this._tileHeight=D.defaultValue(v.tileHeight,256),this._minimumLevel=D.defaultValue(v.minimumLevel,16),this._maximumLevel=v.maximumLevel,v.initExtent&&v.initExtent.length==4){var m={xmin:v.initExtent[0],ymin:v.initExtent[1],xmax:v.initExtent[2],ymax:v.initExtent[3]};v.rectangle=m}if(v.rectangle&&v.rectangle.xmin&&v.rectangle.xmax&&v.rectangle.ymin&&v.rectangle.ymax){var o=v.rectangle.xmin,u=v.rectangle.xmax,l=v.rectangle.ymin,r=v.rectangle.ymax;v.rectangle=D.Rectangle.fromDegrees(o,l,u,r)}this._tilingScheme=D.defaultValue(v.tilingScheme,new D.GeographicTilingScheme({ellipsoid:v.ellipsoid})),this._rectangle=D.defaultValue(v.rectangle,this._tilingScheme.rectangle),this._rectangle=D.Rectangle.intersection(this._rectangle,this._tilingScheme.rectangle),this._hasAlphaChannel=D.defaultValue(v.hasAlphaChannel,!![]),this._errorEvent=new D.Event,this._readyPromise=T.default.resolve(!![]),this._credit=void 0,this._ready=!![]}Object.defineProperties(f.prototype,{url:{get:function(){return this._url}},token:{get:function(){return this._token}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){if(!this._ready)throw new D.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new D.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new D.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new D.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new D.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new D.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new D.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!![]}},layers:{get:function(){return this._layers}}}),f.prototype.getTileCredits=function(){},f.prototype.requestImage=function(v,m,o){var u=document.createElement("canvas");if(u.width=256,u.height=256,o<this._minimumLevel)return T.default.resolve(u);if(this.options.debuggerTileInfo){var l=u.getContext("2d");l.strokeStyle="#ffff00",l.lineWidth=2,l.strokeRect(1,1,255,255);var r="L"+o+"X"+v+"Y"+m;l.font="bold 25px Arial",l.textAlign="center",l.fillStyle="black",l.fillText(r,127,127),l.fillStyle="#ffff00",l.fillText(r,124,124)}return T.default.resolve(u)},f.prototype._getGridKey=function(v){return v.level+"_x"+v.x+"_y"+v.y},f.prototype.addImageryCache=function(v){v.level<this._minimumLevel||v.level<v.maxLevel-1||this.options.addImageryCache&&(v.key=this._getGridKey(v),this.options.addImageryCache(v))},f.prototype.removeImageryCache=function(v){v.maxLevel<this._minimumLevel&&this.options.removeAllImageryCache&&this.options.removeAllImageryCache(),!(v.level<this._minimumLevel)&&this.options.removeImageryCache&&(v.key=this._getGridKey(v),this.options.removeImageryCache(v))}},62344:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.FeatureGridLayer=void 0;var T=A(e(53267)),D=f(e(87647)),b=e(70334);function C(m){if(typeof F!="function")return null;var o=new F,u=new F;return(C=function(r){return r?u:o})(m)}function f(m,o){if(!o&&m&&m.__esModule)return m;if(m===null||M(m)!=="object"&&typeof m!="function")return{default:m};var u=C(o);if(u&&u.has(m))return u.get(m);var l={},r=Object.defineProperty&&R;for(var s in m)if(s!=="default"&&Object.prototype.hasOwnProperty.call(m,s)){var c=r?R(m,s):null;c&&(c.get||c.set)?Object.defineProperty(l,s,c):l[s]=m[s]}return l.default=m,u&&u.set(m,l),l}var v=b.TileLayer.extend({dataSource:null,hasOpacity:![],create:function(){var o=this;this.dataSource=new D.CustomDataSource(this.config.id),this.primitives=new D.PrimitiveCollection(this.config.id),this.config.buildings=D.defaultValue(this.config.buildings,{cloumn:"floor"}),this.config.symbol=D.defaultValue(this.config.symbol,{styleOptions:{color:"#f8fafa",outlineColor:"#0d3685",outlineWidth:5,opacity:.7}}),this.config.addImageryCache=function(u){return o._addImageryCache(u)},this.config.removeImageryCache=function(u){return o._removeImageryCache(u)},this.config.removeAllImageryCache=function(u){return o._removeAllImageryCache(u)}},getLength:function(){return this.primitives.length+(0,T.default)(this.dataSource.entities).length},addEx:function(){this.viewer.dataSources.add(this.dataSource),this.viewer.scene.primitives.add(this.primitives)},removeEx:function(){this.viewer.dataSources.remove(this.dataSource),this.viewer.scene.primitives.remove(this.primitives)},_addImageryCache:function(){},_removeImageryCache:function(){},_removeAllImageryCache:function(){}});z.FeatureGridLayer=v},46307:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.GeoServerWFSLayer=void 0;var D=T(e(53267)),b=T(e(42579)),C=l(e(87647)),f=e(58),v=T(e(51462)),m=l(e(23675)),o=T(e(83605));function u(s){if(typeof R!="function")return null;var c=new R,x=new R;return(u=function(i){return i?x:c})(s)}function l(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||F(s)!=="object"&&typeof s!="function")return{default:s};var x=u(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&A;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var h=i?A(s,n):null;h&&(h.get||h.set)?Object.defineProperty(a,n,h):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}var r=f.CustomFeatureGridLayer.extend({getDataForGrid:function(c,x){var a=this,i=this.config.url,n=this.config.where?this.config.where:null,h={srsName:"EPSG:4490",featureTypes:this.config.visibleLayers,bbox:[c.rectangle.xmin,c.rectangle.ymin,c.rectangle.xmax,c.rectangle.ymax],geometryName:this.config.geoStr||"the_geom",outputFormat:"application/json"};n&&(h.filter=new o.default().read(n));var g=new v.default().writeGetFeature(h),d=i;c.authkey&&(d=d+"?authkey="+c.authkey),fetch(d,{method:"POST",body:new XMLSerializer().serializeToString(g)}).then(function(y){return(0,b.default)(this,a),y.json()}.bind(this)).then(function(y){(0,b.default)(this,a),x(y.features)}.bind(this)).catch(function(y){(0,b.default)(this,a),M.error(y)}.bind(this))},createEntity:function(c,x,a){var i=this,n=C.GeoJsonDataSource.load(x,{clampToGround:!![],classificationType:2});return n.then(function(h){if(!i.checkHasBreak[c.key]){if((0,D.default)(h.entities).length===0)return null;var g=(0,D.default)(h.entities)[0];g._id=i.config.id+"_"+g.id,i._addEntity(g,a)}}).catch(function(h){i.showError("\u670D\u52A1\u51FA\u9519",h)}),null},_addEntity:function(c,x){var a=this.config.symbol;a&&(typeof a=="function"?a(c,c.properties):a==="default"?this.setDefSymbol(c):this.setConfigSymbol(c,a)),this.bindMourseEvnet(c),!this.dataSource.entities.getById(c._id)&&this.dataSource.entities.add(c),x(c)},setWhere:function(c){this.config.where=c,this.reload()},parseFilter:function(c){if(!c.type){M.warn("type\u5B57\u6BB5\u4E0D\u5B58\u5728");return}if(!c.param){M.warn("param\u5B57\u6BB5\u4E0D\u5B58\u5728");return}var x=[];switch(c.type.toLowerCase()){case"and":for(var a=0;a<c.param.length;a++){var i=this.parseFilter(c.param[a]);x.push(i)}return m.and.apply(null,x);case"or":for(var n=0;n<c.param.length;n++){var h=this.parseFilter(c.param[n]);x.push(h)}return m.or.apply(null,x);case"not":for(var g=0;g<c.param.length;g++){var d=this.parseFilter(c.param[g]);x.push(d)}return m.not.apply(null,x);case"=":return m.equalTo(c.param[0],c.param[1]);case"!==":return m.notEqualTo(c.param[0],c.param[1]);case">":return m.greaterThan(c.param[0],c.param[1]);case"<":return m.lessThan(c.param[0],c.param[1]);case">=":return m.greaterThanOrEqualTo(c.param[0],c.param[1]);case"<=":return m.lessThanOrEqualTo(c.param[0],c.param[1]);case"between":return m.between(c.param[0],c.param[1],c.param[2])}}});z.GeoServerWFSLayer=r},42501:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.GeographicTilingSchemeCGCS2000=void 0;var D=T(e(22466)),b=T(e(22777)),C=T(e(42762)),f=T(e(87507)),v=T(e(30044)),m=T(e(99085)),o=T(e(34009)),u=T(e(43389)),l=s(e(87647));function r(i){if(typeof R!="function")return null;var n=new R,h=new R;return(r=function(d){return d?h:n})(i)}function s(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=r(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&A;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?A(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}function c(i){var n=x();return function(){var g=(0,o.default)(i),d;if(n){var y=(0,o.default)(this).constructor;d=F(g,arguments,y)}else d=g.apply(this,arguments);return(0,m.default)(this,d)}}function x(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var a=function(i){(0,v.default)(h,i);var n=c(h);function h(g){var d;return(0,b.default)(this,h),d=n.call(this,g),(0,u.default)((0,f.default)(d),"options",void 0),d.options=g,d.init(),d._ellipsoid=l.Ellipsoid.WGS84,d}return(0,C.default)(h,[{key:"init",value:function(){var d=this.options;d.tileInfo.spatialReference.wkid===4490&&(this._ellipsoid=l.Ellipsoid.CGCS2000),l.defined(d.tileInfo)&&l.defined(d.tileInfo.spatialReference)&&l.defined(d.tileInfo.spatialReference.wkid)&&(d.tileInfo.spatialReference.wkid==4490||d.tileInfo.spatialReference.wkid==4326)&&(this._tileInfo=d.tileInfo,this._ellipsoid=l.defaultValue(d.ellipsoid,this._ellipsoid),this._rectangle=l.defaultValue(d.rectangle,l.Rectangle.fromDegrees(-180,-90,180,90)),this._numberOfLevelZeroTilesX=l.defaultValue(d.numberOfLevelZeroTilesX,4),this._numberOfLevelZeroTilesY=l.defaultValue(d.numberOfLevelZeroTilesY,2)),this._projection=new l.GeographicProjection(this._ellipsoid)}},{key:"getNumberOfXTilesAtLevel",value:function(d){if(l.defined(this._tileInfo)){var y,p=(0,D.default)(y=this._tileInfo.lods).call(y,function(S){return S.level===d}),w=p[0].resolution;return Math.round(l.Math.toDegrees(l.Math.TWO_PI)/(this._tileInfo.rows*w))}else return this._numberOfLevelZeroTilesX<<d}},{key:"getNumberOfYTilesAtLevel",value:function(d){var y;if(!l.defined(this._tileInfo))return this._numberOfLevelZeroTilesY<<d;var p=(0,D.default)(y=this._tileInfo.lods).call(y,function(S){return S.level===d}),w=p[0].resolution;return Math.round(l.Math.toDegrees(l.Math.PI)/(this._tileInfo.cols*w))}},{key:"rectangleToNativeRectangle",value:function(d,y){var p=l.Math.toDegrees(d.west),w=l.Math.toDegrees(d.south),S=l.Math.toDegrees(d.east),O=l.Math.toDegrees(d.north);return l.defined(y)?(y.west=p,y.south=w,y.east=S,y.north=O,y):new l.Rectangle(p,w,S,O)}},{key:"tileXYToNativeRectangle",value:function(d,y,p,w){var S=this.tileXYToRectangle(d,y,p,w);return S.west=l.Math.toDegrees(S.west),S.south=l.Math.toDegrees(S.south),S.east=l.Math.toDegrees(S.east),S.north=l.Math.toDegrees(S.north),S}},{key:"tileXYToRectangle",value:function(d,y,p,w){var S=this._rectangle,O=0,B=0,k=0,P=0;if(l.defined(this._tileInfo)){var L,E=(0,D.default)(L=this._tileInfo.lods).call(L,function(U){return U.level===p}),N=E[0].resolution;k=this._tileInfo.origin.y-y*(this._tileInfo.cols*N),O=this._tileInfo.origin.x+d*(this._tileInfo.rows*N),P=this._tileInfo.origin.y-(y+1)*(this._tileInfo.cols*N),B=this._tileInfo.origin.x+(d+1)*(this._tileInfo.rows*N),O=l.Math.toRadians(O),k=l.Math.toRadians(k),B=l.Math.toRadians(B),P=l.Math.toRadians(P)}else{var I=this.getNumberOfXTilesAtLevel(p),G=this.getNumberOfYTilesAtLevel(p),W=S.width/I;O=d*W+S.west,B=(d+1)*W+S.west;var Z=S.height/G;k=S.north-y*Z,P=S.north-(y+1)*Z}return!l.defined(w)&&(w=new l.Rectangle(O,P,B,k)),w.west=O,w.south=P,w.east=B,w.north=k,w}},{key:"positionToTileXY",value:function(d,y,p){var w=this._rectangle;if(l.Rectangle.contains(w,d)){if(l.defined(this._tileInfo)){var S,O=(0,D.default)(S=this._tileInfo.lods).call(S,function(V){return V.level===y}),B=O[0].resolution,k=l.Math.toDegrees(d.longitude),P=l.Math.toDegrees(d.latitude),L=Math.floor((k-this._tileInfo.origin.x)/(this._tileInfo.rows*B)),E=Math.floor((this._tileInfo.origin.y-P)/(this._tileInfo.cols*B));return new l.Cartesian2(L,E)}var N=this.getNumberOfXTilesAtLevel(y),I=this.getNumberOfYTilesAtLevel(y),G=w.width/N,W=w.height/I,Z=d.longitude;w.east<w.west&&(Z+=l.Math.TWO_PI);var U=(Z-w.west)/G|0;U>=N&&(U=N-1);var H=(w.north-d.latitude)/W|0;return H>=I&&(H=I-1),l.defined(p)?(p.x=U,p.y=H,p):new l.Cartesian2(U,H)}}}]),h}(l.GeographicTilingScheme);z.GeographicTilingSchemeCGCS2000=a},56474:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.GltfLayer=void 0;var T=A(e(81806)),D=v(e(87647)),b=e(14666),C=v(e(80823));function f(o){if(typeof F!="function")return null;var u=new F,l=new F;return(f=function(s){return s?l:u})(o)}function v(o,u){if(!u&&o&&o.__esModule)return o;if(o===null||M(o)!=="object"&&typeof o!="function")return{default:o};var l=f(u);if(l&&l.has(o))return l.get(o);var r={},s=Object.defineProperty&&R;for(var c in o)if(c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)){var x=s?R(o,c):null;x&&(x.get||x.set)?Object.defineProperty(r,c,x):r[c]=o[c]}return r.default=o,l&&l.set(o,r),r}var m=b.BaseLayer.extend({model:null,dataSource:null,add:function(){!this.config.reload&&this.dataSource?this.viewer.dataSources.add(this.dataSource):(this.dataSource=new D.CustomDataSource(this.config.name),this.viewer.dataSources.add(this.dataSource),this.initData())},remove:function(){this.viewer.dataSources.remove(this.dataSource)},centerAt:function(u){if(this.model!=null)if(this.config.extent||this.config.center)this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:u,isWgs84:!![]});else if(this.config.camera){var l=this.config.camera;this.viewer.shine.centerAt(l,{duration:u,isWgs84:!![]});return}else{var r=this.config.position;r.z=400,r.heading=0,r.pitch=-90,r.roll=0,this.viewer.shine.centerAt(r,{duration:u,isWgs84:!![]})}},initData:function(){var u=this.config.position;u=this.viewer.shine.point2map(u);var l=this.config.scale||1,r=D.Cartesian3.fromDegrees(u.x,u.y,u.z||0),s=D.Math.toRadians(u.heading||0),c=D.Math.toRadians(u.pitch||0),x=D.Math.toRadians(u.roll||0),a=new D.HeadingPitchRoll(s,c,x),i=D.Transforms.headingPitchRollQuaternion(r,a),n=this.config;if(n.authkey){var h;(0,T.default)(h=n.url).call(h,"?")?n.url+="&authkey="+n.authkey:n.url+="?authkey="+n.authkey}n=C.getProxyUrl(n);var g={uri:n.url,scale:l};for(var d in this.config)if(this.config.hasOwnProperty(d)){if(d==="url"||d==="name"||d==="position"||d==="center"||d==="tooltip"||d==="popup")continue;g[d]=this.config[d]}this.model=this.dataSource.entities.add({name:this.config.name,position:r,orientation:i,model:g,_config:this.config,tooltip:this.config.tooltip,popup:this.config.popup})},hasOpacity:!![],setOpacity:function(u){this.model!=null&&(this.model.model.color=new D.Color.fromCssColorString("#FFFFFF").withAlpha(u))}});z.GltfLayer=m},963:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.GraticuleLayer=void 0;var A=b(e(87647)),T=e(14666);function D(f){if(typeof F!="function")return null;var v=new F,m=new F;return(D=function(u){return u?m:v})(f)}function b(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||M(f)!=="object"&&typeof f!="function")return{default:f};var m=D(v);if(m&&m.has(f))return m.get(f);var o={},u=Object.defineProperty&&R;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=u?R(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}var C=T.BaseLayer.extend({model:null,add:function(){this.model==null&&this.initData(),this.model.setVisible(!![])},remove:function(){this.model!=null&&this.model.setVisible(![])},initData:function(){function v(r,s){r=r||{},this._tilingScheme=r.tilingScheme||new A.GeographicTilingScheme,this._color=r.color||new A.Color(1,1,1,.4),this._tileWidth=r.tileWidth||256,this._tileHeight=r.tileHeight||256,this._ready=!![],this._sexagesimal=r.sexagesimal||![],this._numLines=r.numLines||50,this._scene=s,this._labels=new A.LabelCollection,s.primitives.add(this._labels),this._polylines=new A.PolylineCollection,s.primitives.add(this._polylines),this._ellipsoid=s.globe.ellipsoid;var c=document.createElement("canvas");c.width=256,c.height=256,this._canvas=c;var x=this;s.camera.moveEnd.addEventListener(function(){x._show&&(x._polylines.removeAll(),x._labels.removeAll(),x._currentExtent=null,x._drawGrid(x._getExtentView()))}),s.imageryLayers.addImageryProvider(this)}var m=function(){try{return"x"in Object.defineProperty({},"x",{})}catch{return![]}}(),o=Object.defineProperties;(!m||!o)&&(o=function(s){return s}),o(v.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!![]}}}),v.prototype.makeLabel=function(r,s,c,x){this._labels.add({position:this._ellipsoid.cartographicToCartesian(new A.Cartographic(r,s,10)),text:c,font:"normal small-caps normal 16px \u6977\u4F53",style:A.LabelStyle.FILL_AND_OUTLINE,fillColor:A.Color.AZURE,outlineColor:A.Color.BLACK,outlineWidth:2,pixelOffset:new A.Cartesian2(5,x?5:-5),eyeOffset:A.Cartesian3.ZERO,horizontalOrigin:A.HorizontalOrigin.LEFT,verticalOrigin:x?A.VerticalOrigin.BOTTOM:A.VerticalOrigin.TOP,scale:1})},v.prototype._drawGrid=function(r){if(!(this._currentExtent&&this._currentExtent.equals(r))){this._currentExtent=r,this._polylines.removeAll(),this._labels.removeAll();var s=0,c=0,x;for(x=0;x<l.length&&s<(r.north-r.south)/10;x++)s=l[x];for(x=0;x<l.length&&c<(r.east-r.west)/10;x++)c=l[x];var a=(r.west<0?Math.ceil(r.west/c):Math.floor(r.west/c))*c,i=(r.south<0?Math.ceil(r.south/s):Math.floor(r.south/s))*s,n=(r.east<0?Math.ceil(r.east/s):Math.floor(r.east/s))*s,h=(r.north<0?Math.ceil(r.north/c):Math.floor(r.north/c))*c;a=Math.max(a-2*c,-Math.PI),n=Math.min(n+2*c,Math.PI),i=Math.max(i-2*s,-Math.PI/2),h=Math.min(h+2*c,Math.PI/2);var g=this._ellipsoid,d,y,p=A.Math.toRadians(1),w=i+Math.floor((h-i)/s/2)*s;for(y=a;y<n;y+=c){var S=[];for(d=i;d<h;d+=p)S.push(new A.Cartographic(y,d));S.push(new A.Cartographic(y,h)),this._polylines.add({positions:g.cartographicArrayToCartesianArray(S),width:1});var O=A.Math.toDegrees(y);this.makeLabel(y,w,this._sexagesimal?this._decToSex(O):O.toFixed(u(c)),![])}var B=a+Math.floor((n-a)/c/2)*c;for(d=i;d<h;d+=s){var k=[];for(y=a;y<n;y+=p)k.push(new A.Cartographic(y,d));k.push(new A.Cartographic(n,d)),this._polylines.add({positions:g.cartographicArrayToCartesianArray(k),width:1});var P=A.Math.toDegrees(d);this.makeLabel(B,d,this._sexagesimal?this._decToSex(P):P.toFixed(u(s)),!![])}}},v.prototype.requestImage=function(){return this._show&&this._drawGrid(this._getExtentView()),this._canvas},v.prototype.setVisible=function(r){this._show=r,r?(this._currentExtent=null,this._drawGrid(this._getExtentView())):(this._polylines.removeAll(),this._labels.removeAll())},v.prototype.isVisible=function(){return this._show},v.prototype._decToSex=function(r){var s=Math.floor(r),c=((Math.abs(r)-s)*60).toFixed(2);return c==="60.00"&&(s+=1,c="0.00"),[s,":",c].join("")},v.prototype._getExtentView=function(){for(var r=this._scene.camera,s=this._scene.canvas,c=[r.pickEllipsoid(new A.Cartesian2(0,0),this._ellipsoid),r.pickEllipsoid(new A.Cartesian2(s.width,0),this._ellipsoid),r.pickEllipsoid(new A.Cartesian2(0,s.height),this._ellipsoid),r.pickEllipsoid(new A.Cartesian2(s.width,s.height),this._ellipsoid)],x=0;x<4;x++)if(c[x]===void 0)return A.Rectangle.MAX_VALUE;return A.Rectangle.fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(c))};function u(r){return r<.01?2:r<.1?1:(r<1,0)}var l=[A.Math.toRadians(.05),A.Math.toRadians(.1),A.Math.toRadians(.2),A.Math.toRadians(.5),A.Math.toRadians(1),A.Math.toRadians(2),A.Math.toRadians(5),A.Math.toRadians(10)];this.model=new v({numLines:10},this.viewer.scene)}});z.GraticuleLayer=C},35816:function(X,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.GroupLayer=void 0;var M=e(14666),F=M.BaseLayer.extend({create:function(){var A=this.config._layers;this._layers=A;for(var T=0,D=A.length;T<D;T++)this.hasOpacity=A[T].hasOpacity,this.hasZIndex=A[T].hasZIndex},setVisible:function(A){this._visible=A;for(var T=this.config._layers,D=0,b=T.length;D<b;D++)T[D].setVisible(A)},add:function(){this._visible=!![];for(var A=this.config._layers,T=0,D=A.length;T<D;T++)A[T].setVisible(!![])},remove:function(){this._visible=![];for(var A=this.config._layers,T=0,D=A.length;T<D;T++)A[T].setVisible(![])},centerAt:function(A){for(var T=this.config._layers,D=0,b=T.length;D<b;D++)T[D].centerAt(A)},setOpacity:function(A){for(var T=this.config._layers,D=0,b=T.length;D<b;D++)T[D].hasOpacity&&T[D].setOpacity(A)}});z.GroupLayer=F},48720:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.I3SLayer=void 0;var T=A(e(11323)),D=A(e(42579)),b=A(e(34749)),C=u(e(87647)),f=e(14666),v=u(e(68821)),m=u(e(92672));function o(r){if(typeof F!="function")return null;var s=new F,c=new F;return(o=function(a){return a?c:s})(r)}function u(r,s){if(!s&&r&&r.__esModule)return r;if(r===null||M(r)!=="object"&&typeof r!="function")return{default:r};var c=o(s);if(c&&c.has(r))return c.get(r);var x={},a=Object.defineProperty&&R;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var n=a?R(r,i):null;n&&(n.get||n.set)?Object.defineProperty(x,i,n):x[i]=r[i]}return x.default=r,c&&c.set(r,x),x}var l=f.BaseLayer.extend({provider:null,model:null,center:null,originalCenter:null,positionCenter:null,boundingSphere:null,add:function(){this.provider?this.viewer.scene.primitives.contains(this.provider)||this.viewer.scene.primitives.add(this.provider):this.initData()},remove:function(){C.defined(this.config.visibleDistanceMax)&&this.viewer.scene.camera.changed.removeEventListener(this.updateVisibleDistance,this),this.viewer.scene.primitives.contains(this.provider)&&this.viewer.scene.primitives.remove(this.provider),delete this.model,delete this.provider,delete this.boundingSphere},centerAt:function(){var r=(0,b.default)(T.default.mark(function c(x){var a=this;return T.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.config.extent||this.config.center)){n.next=4;break}this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:x,isWgs84:!![]}),n.next=6;break;case 4:return n.next=6,this.provider.readyPromise.then(function(){(0,D.default)(this,a),this.boundingSphere?this.viewer.camera.flyToBoundingSphere(this.boundingSphere,{offset:new C.HeadingPitchRange(0,-.5,this.boundingSphere.radius*2),duration:x}):this.center&&this.viewer.camera.setView({destination:C.Ellipsoid.WGS84.cartographicToCartesian(this.center)})}.bind(this));case 6:case"end":return n.stop()}},c,this)}));function s(c){return r.apply(this,arguments)}return s}(),initData:function(){var s=this;this.config.skipLevelOfDetail=this.config.skipLevelOfDetail?this.config.skipLevelOfDetail:![],this.config.debugShowBoundingVolume=![];var c=new C.CustomShader({lightingModel:C.LightingModel.UNLIT,uniforms:{u_backLightColor:{type:C.UniformType.VEC4,value:C.Color.GRAY},u_toneMappingMode:{type:C.UniformType.INT,value:0}},fragmentShaderText:`
      vec3 computeLighting(czm_modelMaterial inputMaterial, vec3 positionEC, vec3 lightDirectionEC, vec3 lightColorHdr)
      {
        czm_pbrParameters pbrParameters;
        pbrParameters.diffuseColor = inputMaterial.diffuse;
        pbrParameters.f0 = inputMaterial.specular;//vec3(0.5);
        pbrParameters.roughness = inputMaterial.roughness;//0.5;

        vec3 color = inputMaterial.diffuse;
        color = czm_pbrLighting(
          positionEC,
          inputMaterial.normalEC,
          lightDirectionEC,
          lightColorHdr,
          pbrParameters
        );

        color += imageBasedLightingStage(
          positionEC,
          inputMaterial.normalEC,
          lightDirectionEC,
          lightColorHdr,
          pbrParameters
        );

        //color *= inputMaterial.occlusion;
        //color += inputMaterial.emissive;

        //color = czm_acesTonemapping(color);

        return color;
      }

      vec3 CEToneMapping(vec3 color, float adapted_lum)
      {
        return vec3(1.0) - exp(-adapted_lum * color);
      }

      vec3 FilmicToneMapping(vec3 x)
      {
        const float A = 0.22;
        const float B = 0.30;
        const float C = 0.10;
        const float D = 0.20;
        const float E = 0.01;
        const float F = 0.30;

        return ((x * (A * x + C * B) + D * E) / (x * (A * x + B) + D * F)) - E / F;
      }

      vec3 Uncharted2ToneMapping(vec3 color, float adapted_lum)
      {
        const float WHITE = 11.2;
        return FilmicToneMapping(1.6 * adapted_lum * color) / FilmicToneMapping(vec3(WHITE));
      }

      vec3 ACESToneMapping(vec3 color, float adapted_lum)
      {
        const float A = 2.51;
        const float B = 0.03;
        const float C = 2.43;
        const float D = 0.59;
        const float E = 0.14;

        color *= adapted_lum;
        return (color * (A * color + B)) / (color * (C * color + D) + E);
      }

      void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)
      {
        vec3 positionEC = fsInput.attributes.positionEC;
        vec3 lightColorHdr = czm_lightColorHdr;
        vec3 lightDirectionEC = czm_lightDirectionEC;
        vec3 ligth1Color0 = computeLighting(material, positionEC, lightDirectionEC, lightColorHdr);

        vec3 lightDirectionECN = lightDirectionEC * (- 1.0);
        vec3 backLigth1Color = computeLighting(material, positionEC, lightDirectionECN, u_backLightColor.rgb);

        vec3 finalColor = ligth1Color0.rgb + backLigth1Color.rgb*0.2;

        finalColor *= material.occlusion;
        finalColor += material.emissive;

        if (0 == u_toneMappingMode) {
          finalColor = ACESToneMapping(finalColor, 1.0);
          finalColor = clamp(finalColor, 0.0, 1.0);
        } else if (1== u_toneMappingMode) {
          finalColor = Uncharted2ToneMapping(finalColor,1.0);
          finalColor = clamp(finalColor, 0.0, 1.0);
        } else if (2== u_toneMappingMode) {
          finalColor = CEToneMapping(finalColor,1.0);
           finalColor = clamp(finalColor, 0.0, 1.0);
        } else {
          finalColor = czm_acesTonemapping(finalColor);
        }

        material.diffuse = finalColor;
      }
     `}),x=this.config;this.config.customShader&&(x.customShader=c);var a={url:this.config.url,name:this.config.label,traceFetches:![],cesium3dTilesetOptions:x},i=new C.I3SDataProvider(a);this.provider=this.viewer.scene.primitives.add(i),this.provider.layerID=this.config.id,this.provider.readyPromise.then(function(n){(0,D.default)(this,s),this.readyPromise&&this.readyPromise(n),this.hasOpacity&&this._opacity!==1&&this.setOpacity(this._opacity);var h,g=n.layers[0],d=g._data.layerType;if(d=="3DObject"?h=g.tileset:d=="Building"?(this.center=C.Rectangle.center(n.extent),this.center.height=500):d=="IntegratedMesh"&&(h=g.tileset),!!h){var y=h.boundingSphere;this.boundingSphere=y,this.model=h,h._root&&h._root.transform&&(this.orginMatrixInverse=C.Matrix4.inverse(C.Matrix4.fromArray(h._root.transform),new C.Matrix4),this.config.scale>0&&this.config.scale!==1&&(h._root.transform=C.Matrix4.multiplyByUniformScale(h._root.transform,this.config.scale,h._root.transform)));var p=y.center;this.positionCenter=p;var w=C.Cartographic.fromCartesian(p),S=Number(w.height.toFixed(2)),O=Number(C.Math.toDegrees(w.longitude).toFixed(6)),B=Number(C.Math.toDegrees(w.latitude).toFixed(6));this.originalCenter={x:O,y:B,z:S};var k=this.viewer.shine.point2map(this.originalCenter);if(k.x!==this.originalCenter.x||k.y!==this.originalCenter.y||this.config.offset!=null){this.config.offset=this.config.offset||{},this.config.offset.x&&this.config.offset.y&&(this.config.offset=this.viewer.shine.point2map(this.config.offset));var P={x:this.config.offset.x||k.x,y:this.config.offset.y||k.y,z:this.config.offset.z||0,heading:this.config.offset.heading,axis:this.config.axis,scale:this.config.scale,transform:this.config.offset.hasOwnProperty("transform")?this.config.offset.transform:this.config.offset.heading!=null};this.config.offset.z==="-height"?(P.z=-S+5,this.updateMatrix(P)):this.config.offset.z==="auto"?this.autoHeight(p,P):this.updateMatrix(P)}this.config.clippingPolygonPoints&&v.addClippingPolygon(h,this.config.clippingPolygonPoints),!this.viewer.shine.isFlyAnimation()&&this.config.flyTo&&this.centerAt(),this.config.calback&&this.config.calback(h),C.defined(this.config.visibleDistanceMax)&&this.bindVisibleDistance()}}.bind(this))},autoHeight:function(s,c){var x=this;m.terrainPolyline({viewer:this.viewer,positions:[s,s],calback:function(i,n){if(!(i==null||i.length===0||n)){var h=h.formatPosition(i[0]),g=h.z-x.originalCenter.z+1;c.z=g,x.updateMatrix(c)}}})},updateMatrix:function(s){this.model!=null&&(this.positionCenter=C.Cartesian3.fromDegrees(s.x,s.y,s.z),v.updateMatrix(this.model,s))},hasOpacity:!![],setOpacity:function(s){this._opacity=s;var c=this;if(this.config.onSetOpacity&&window.color_type)this.config.onSetOpacity(s);else{var x=window.color_type,a,i,n,h;if(h=s,this.provider)if(!c.config.style)c.model.style=new C.Cesium3DTileStyle({color:"color() *vec4("+s+")"});else{if(this.config.style.color&&typeof this.config.style.color=="string"){var g=C.Color.fromAlpha(C.Color.fromCssColorString(c.config.style.color),h),d=g.toCssColorString();c.model.style=new C.Cesium3DTileStyle({color:d})}if(this.config.style.color.conditions){for(var y=this.config.style.color.conditions,p=0;p<y.length;p++){var w=y[p],S=C.Color.fromAlpha(C.Color.fromCssColorString(w[1]),h);w[1]=S.toCssColorString()}var O=new C.Cesium3DTileStyle;O.color={conditions:y},c.model.style=O}if(this.config.style.colorty){for(var B=c.config.style.colorty,k=c.config.style.proID,P=[],L=0;L<x[B].type.length;L++){var E=x[B].type[L];a=x[B].color[E][0],i=x[B].color[E][1],n=x[B].color[E][2];var N="rgba("+a+","+i+","+n+","+h+")",I="${"+k+"} === '"+E+"'",G=[I,N];P.push(G)}P.push(["true","rgba(255,235,175,"+h+")"]);var W=new C.Cesium3DTileStyle;W.color={conditions:P},c.model.style=W}}}},showClickFeature:function(s){this.provider?this.provider._config.showClickFeature=s:this.config.showClickFeature=s},bindVisibleDistance:function(){this.viewer.scene.camera.changed.addEventListener(this.updateVisibleDistance,this)},updateVisibleDistance:function(){if(this._visible&&this.viewer.scene.mode===C.SceneMode.SCENE3D&&!(!this.provider||!this.boundingSphere||!this.positionCenter)){var s=C.Cartesian3.distance(this.positionCenter,this.viewer.camera.position);if(s>this.config.visibleDistanceMax+1e5)this.provider.show=![];else{var c=m.pickCenterPoint(this.viewer.scene);if(C.defined(c)){var x=C.Cartesian3.distance(c,this.viewer.camera.position);this.provider.show=x<this.config.visibleDistanceMax}else this.provider.show=!![]}}}});z.I3SLayer=l},74410:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.KmlLayer=void 0;var A=C(e(87647)),T=e(2008),D=C(e(80823));function b(v){if(typeof F!="function")return null;var m=new F,o=new F;return(b=function(l){return l?o:m})(v)}function C(v,m){if(!m&&v&&v.__esModule)return v;if(v===null||M(v)!=="object"&&typeof v!="function")return{default:v};var o=b(m);if(o&&o.has(v))return o.get(v);var u={},l=Object.defineProperty&&R;for(var r in v)if(r!=="default"&&Object.prototype.hasOwnProperty.call(v,r)){var s=l?R(v,r):null;s&&(s.get||s.set)?Object.defineProperty(u,r,s):u[r]=v[r]}return u.default=v,o&&o.set(v,u),u}var f=T.GeoJsonLayer.extend({queryData:function(){var m=this,o=D.getProxyUrl(this.config);if(o.symbol&&o.symbol.styleOptions){var u=o.symbol.styleOptions;A.defined(u.clampToGround)&&(o.clampToGround=u.clampToGround)}var l=A.KmlDataSource.load(o.url,{camera:this.viewer.scene.camera,canvas:this.viewer.scene.canvas,clampToGround:o.clampToGround});l.then(function(r){m.showResult(r)}).catch(function(r){m.showError("\u670D\u52A1\u51FA\u9519",r)})},getEntityAttr:function(m){var o={name:m.name,description:m.description},u=m._kml.extendedData;for(var l in u)u.hasOwnProperty(l)&&(o[l]=u[l].value);return o=D.getAttrVal(o),o.description&&(o.description=o.description.replace(/<div[^>]+>/g,"")),o}});z.KmlLayer=f},78033:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.MapboxVectorTileImageryProvider=P;var D=T(e(42579)),b=T(e(85208)),C=T(e(78756)),f=T(e(53267)),v=T(e(18853)),m=T(e(5146)),o=S(e(87647)),u=e(99996),l=T(e(63713)),r=T(e(96542)),s=T(e(57526)),c=e(36374),x=T(e(22305)),a=T(e(63379)),i=S(e(80823)),n=S(e(80790)),h=S(e(21617)),g=S(e(69471)),d=S(e(96535)),y=S(e(31490)),p=e(92672);function w(U){if(typeof R!="function")return null;var H=new R,V=new R;return(w=function($){return $?V:H})(U)}function S(U,H){if(!H&&U&&U.__esModule)return U;if(U===null||F(U)!=="object"&&typeof U!="function")return{default:U};var V=w(H);if(V&&V.has(U))return V.get(U);var Y={},$=Object.defineProperty&&A;for(var K in U)if(K!=="default"&&Object.prototype.hasOwnProperty.call(U,K)){var J=$?A(U,K):null;J&&(J.get||J.set)?Object.defineProperty(Y,K,J):Y[K]=U[K]}return Y.default=U,V&&V.set(U,Y),Y}var O=3;function B(U){for(var H=U.length,V=U[H-1].x*(U[0].y-U[H-2].y)+U[0].x*(U[1].y-U[H-1].y),Y=1;Y<=H-2;Y++)V+=U[Y].x*(U[Y+1].y-U[Y-1].y);if(isNaN(V))throw new o.DeveloperError("map.computeRingWindingOrder.devError");return V>0?o.WindingOrder.COUNTER_CLOCKWISE:o.WindingOrder.CLOCKWISE}function k(U){var H=o.Resource.createIfNeeded(U);return H.fetchArrayBuffer()}function P(U){var H,V;if(U._options.requestUrl&&(U.url=U._options.requestUrl?U._options.requestUrl:U.requestUrl),U.requestUrl&&(U.url=U.requestUrl?U.requestUrl:U._options.requestUrl),this._viewer=void 0,this._dataSource=new o.CustomDataSource(U.id),this._imageryGridPrimitives=new o.PrimitiveCollection(U.id),this._gridCache={},this._renderMode=U.renderMode||"canvas",this._uriTemplate=new s.default(U.url),typeof U.name!="string")throw new o.DeveloperError("map.mapboxVectorTileImageryProvider.requireLayerName");if(this._layerName=U.visibleLayers[0],this._subdomains=o.defaultValue(U.subdomains,[]),this._styleFunc=U.styleFunc||c.getRealSymbolByAsync,U.tilingScheme=U.tilingScheme||U._options.tilingScheme||"geodetic",o.defined(U.tilingScheme)){var Y=U.tilingScheme;Y==="geodetic"||Y==="global-geodetic"?this._tilingScheme=new o.GeographicTilingScheme({ellipsoid:U.ellipsoid}):(Y==="mercator"||Y==="global-mercator")&&(this._tilingScheme=new o.WebMercatorTilingScheme({ellipsoid:U.ellipsoid}))}else M.error("\u672A\u83B7\u53D6\u5230\u51C6\u786E\u7684\u6295\u5F71\u5750\u6807\u7CFB\u4FE1\u606F");if(this._opacity=U.opacity||.8,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=1,this._miniNativemumLevel=o.defaultValue(U.minimumLevel,3),this._maximumLevel=o.defaultValue(U.maximumLevel,1/0),this._maximumNativeLevel=o.defaultValue(U.maximumNativeZoom,this._maximumLevel),U.initExtent=U.initExtent||((H=U._options)===null||H===void 0||(V=H.initExtent)===null||V===void 0?void 0:V.length)===4?U._options.initExtent:[-180,-90,180,90],U.initExtent&&U.initExtent.length==4){var $={xmin:U.initExtent[0],ymin:U.initExtent[1],xmax:U.initExtent[2],ymax:U.initExtent[3]};U.rectangle=$}if(U.rectangle&&U.rectangle.xmin&&U.rectangle.xmax&&U.rectangle.ymin&&U.rectangle.ymax){var K=U.rectangle.xmin,J=U.rectangle.xmax,Q=U.rectangle.ymin,et=U.rectangle.ymax;U.rectangle=o.Rectangle.fromDegrees(K,Q,J,et)}this._rectangle=o.defined(U.rectangle)?o.Rectangle.intersection(U.rectangle,this._tilingScheme.rectangle):this._tilingScheme.rectangle,this._errorEvent=new o.Event,this._ready=!![],this._credit=U.credit,this._geojsonCollection=[],this._clean=![]}Object.defineProperties(P.prototype,{url:{get:function(){return this._uriTemplate.expression}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},hasAlphaChannel:{get:function(){return!![]}},credit:{get:function(){var H=this._credit;if(H!==void 0)return typeof H=="string"&&(H=new o.Credit(H)),H}}}),P.prototype._updatePrimitiveLayers=function(){var U=this;if((0,b.default)(this===null||this===void 0?void 0:this._gridCache).length){for(var H in this===null||this===void 0?void 0:this._gridCache)if(Object.hasOwnProperty.call(this===null||this===void 0?void 0:this._gridCache,H)){var V=this===null||this===void 0?void 0:this._gridCache[H];V!=null&&V.primitive&&(V.primitive.show=![])}this._clean||this._viewer.scene.globe._surface._tilesToRender.forEach(function(Y){(0,D.default)(this,U);var $=Y.x+"_"+Y.y+"_"+Y.level,K=this===null||this===void 0?void 0:this._gridCache[$];K!=null&&K.primitive&&(K.primitive.show=!![])}.bind(this))}},P.prototype._getSubdomain=function(U,H,V){if(this._subdomains.length!==0){var Y=(U+H+V)%this._subdomains.length;return this._subdomains[Y]}},P.prototype._buildImageUrl=function(U,H,V){return this._uriTemplate.expand({z:V,x:U,y:H,s:this._getSubdomain(U,H,V)})},P.prototype.requestImage=function(U,H,V){var Y=document.createElement("canvas");return Y.width=this._tileWidth,Y.height=this._tileHeight,V<this._miniNativemumLevel?C.default.resolve(Y):this._requestImage(U,H,V,Y)},P.prototype._requestImage=function(U,H,V,Y){var $={x:U,y:H,level:V},K;if(V>this._maximumNativeLevel){var J=V-this._maximumNativeLevel;K={x:U>>J,y:H>>J,level:this._maximumNativeLevel}}else K=$;var Q=this._buildImageUrl(K.x,K.y,K.level),et=this;return k(Q).then(function(nt){var st=new l.default(nt),ut=new u.VectorTile(st);return et._drawTile($,K,ut,Y)})};function L(U,H,V,Y){var $=Y.level-H.level;if($===0)return U;for(var K=[],J=V*(Y.x-(H.x<<$)),Q=V*(Y.y-(H.y<<$)),et=0;et<U.length;et++){for(var nt=[],st=0;st<U[et].length;st++)nt.push(U[et][st].sub(new r.default(J,Q)));K.push(nt)}return K}P.prototype._drawTile=function(U,H,V,Y){var $=this,K=V.layers[this._layerName];if(!o.defined(K)||this._clean)return Y;var J=Y.getContext("2d");J.strokeStyle="black",J.lineWidth=1;for(var Q,et=Y.width/K.extent,nt={type:"FeatureCollection",features:[]},st=[],ut=function(){var wt=this,At=K.feature(rt);if($._renderMode==="geojson"){var Nt=G(U.x,U.y,U.level,At);if(!Nt)return"continue";nt.features.push(Nt)}if(u.VectorTileFeature.types[At.type]==="Polygon"&&$._renderMode!=="geojson"){var Lt,Rt;$.config.symbol.styleFilterOptions&&$.config.symbol.styleFilterOptions.length>0||$.config.symbol===void 0?Rt=$==null||(Lt=$._styleFunc)===null||Lt===void 0?void 0:Lt.call($,$.config.symbol,At.properties):Rt=C.default.resolve($.getConfigSymbol($.config.symbol,At.properties)),st.push(Rt),Rt.then(function(Ft){(0,D.default)(this,wt),Rt=Ft,$.cavansRender(J,Rt,H,U,At,K,et,Y,Q)}.bind(this)).catch(function(){(0,D.default)(this,wt)}.bind(this))}else if(u.VectorTileFeature.types[At.type]==="Point"&&$._renderMode!=="geojson"){var Tt,mt;$.config.symbol.styleFilterOptions&&$.config.symbol.styleFilterOptions.length>0||$.config.symbol===void 0?mt=$==null||(Tt=$._styleFunc)===null||Tt===void 0?void 0:Tt.call($,$.config.symbol,At.properties):mt=C.default.resolve($.getConfigSymbol($.config.symbol,At.properties)),st.push(mt),mt.then(function(Ft){(0,D.default)(this,wt),mt=Ft,$.cavansPointRender(J,mt,H,U,At,K,et,Y,Q)}.bind(this)).catch(function(){(0,D.default)(this,wt)}.bind(this))}else M.warn("Unexpected geometry type: "+At.type+" in region map on tile "+[U.level,U.x,U.y].join("/"))},rt=0;rt<K.length;rt++)var ht=ut();return this._renderMode==="geojson"&&this.config.symbol.type==="point"?this.pointsCollectionProgress(nt,U,J,Y):st.length?C.default.all(st).then(function(){var Pt=this;if((0,D.default)(this,$),nt?.features.length>0&&this._renderMode==="geojson"){var wt=o.GeoJsonDataSource.load(nt,{stroke:o.Color.YELLOW,fill:o.Color.PINK.withAlpha(.5),strokeWidth:3});return wt.then(function(At){if((0,D.default)(this,Pt),!At||this._clean)return document.createElement("canvas");for(var Nt=(0,f.default)(At.entities),Lt=0;Lt<Nt.length;Lt++){var Rt=Nt[Lt];if(!this._dataSource.entities.getById(Rt._id)){var Tt=o.Color.fromRandom({alpha:.8});Rt._id=U.x+"_"+U.y+"_"+U.level+"_"+Rt._id,Rt.polygon.material=Tt,Rt.polygon.outline=!![],Rt.polygon.height=50,this._dataSource.entities.add(Rt)}}this._geojsonCollection[U.x+"_"+U.y+"_"+U.level]=Nt}.bind(this)),document.createElement("canvas")}return this._renderMode==="imagerygrid"?this.imageryGridProgress(U,Y):Y}.bind(this)).catch(function(){return(0,D.default)(this,$),document.createElement("canvas")}.bind(this)):Y},P.prototype.cavansRender=function(U,H,V,Y,$,K,J,Q,et){if(U.fillStyle=H!=null&&(0,v.default)(H)?(0,x.default)(H?.color).alpha(Number(H?.opacity)||1).hexa()||"#FFFFFF33":" #FFFFFF33",H!=null&&H.image){var nt=document.createElement("canvas"),st=nt.getContext("2d");nt.width=Q.width/H.repeatX,nt.height=Q.height/H.repeatY;var ut=new Image;ut.src=H.image,st.globalAlpha=H.opacity,st.drawImage(ut,0,0,nt.width,nt.height),U.fillStyle=U.createPattern(nt,"repeat")}U.strokeStyle=H!=null&&H.outline&&(0,x.default)(H?.outlineColor).alpha(Number(H?.outlineOpacity)||1).hexa()||"#01BFFFFF",U.lineWidth=H!=null&&H.outline&&H?.outlineWidth||1,U.beginPath();var rt;if(V.level!==Y.level){var ht=$.bbox(),Pt=new o.BoundingRectangle(ht[0],ht[1],ht[2]-ht[0],ht[3]-ht[1]),wt=Y.level-V.level,At=K.extent>>wt;if(At<16)throw new o.DeveloperError("map.mapboxVectorTileImageryProvider.maxLevelError");var Nt=At*(Y.x-(V.x<<wt)),Lt=At*(Y.y-(V.y<<wt)),Rt=new o.BoundingRectangle(Nt,Lt,At,At);if(o.BoundingRectangle.intersect(Pt,Rt)===o.Intersect.OUTSIDE)return;J=Q.width/At,rt=L($.loadGeometry(),V,At,Y)}else rt=$.loadGeometry();for(var Tt=0;Tt<rt.length;Tt++){et=rt[Tt][0],U.moveTo(et.x*J,et.y*J);for(var mt=1;mt<rt[Tt].length;mt++)et=rt[Tt][mt],U.lineTo(et.x*J,et.y*J)}U.stroke(),(0,v.default)(U).call(U)},P.prototype.cavansPointRender=function(U,H,V,Y,$,K,J,Q,et){U.fillStyle=H!=null&&(0,v.default)(H)?(0,x.default)(H?.color).alpha(Number(H?.opacity)||1).hexa()||"#FFFFFF33":" #FFFFFF33",U.strokeStyle=H!=null&&H.outline&&(0,x.default)(H?.outlineColor).alpha(Number(H?.outlineOpacity)||1).hexa()||"#01BFFFFF",U.beginPath();var nt;if(V.level!==Y.level){var st=$.bbox(),ut=new o.BoundingRectangle(st[0],st[1],st[2]-st[0],st[3]-st[1]),rt=Y.level-V.level,ht=K.extent>>rt;if(ht<16)throw new o.DeveloperError("map.mapboxVectorTileImageryProvider.maxLevelError");var Pt=ht*(Y.x-(V.x<<rt)),wt=ht*(Y.y-(V.y<<rt)),At=new o.BoundingRectangle(Pt,wt,ht,ht);if(o.BoundingRectangle.intersect(ut,At)===o.Intersect.OUTSIDE)return;J=Q.width/ht,nt=L($.loadGeometry(),V,ht,Y)}else nt=$.loadGeometry();H.image=void 0;for(var Nt=0;Nt<nt.length;Nt++){if(et=nt[Nt][0],H!=null&&H.image){var Lt=new Image;Lt.src=H.image,U.drawImage(Lt,et.x*J,et.y*J)}else U.arc(et.x*J,et.y*J,H.pixelSize||2,0,2*Math.PI);if(H!=null&&H.label){var Rt=H.label,Tt=Rt.font_size?Rt.font_size:12,mt=Rt.font_family?Rt.font_family:"SimHei",Ft=Tt+"px "+mt;U.fillcol,U.fillStyle=Rt!=null&&Rt.color?(0,x.default)(Rt?.color).alpha(Number(Rt?.opacity)||1).hexa()||"#FFFFFF33":" #FFFFFF33",U.font=Ft,U.textBaseline="bottom",U.textAlign="left",U.fillText($.properties[Rt.field]||"",et.x*J,et.y*J)}}U.stroke(),(0,v.default)(U).call(U)},P.prototype.pointsCollectionProgress=function(U,H,V,Y){var $=this;if(U.features.length>0){var K=o.GeoJsonDataSource.load(U,{clampToGround:!![]});K.then(function(J){if((0,D.default)(this,$),!J||this._clean)return document.createElement("canvas");for(var Q=(0,f.default)(J.entities),et=0;et<Q.length;et++){var nt,st=Q[et],ut=(0,m.default)(nt="".concat(this.config.id,"_")).call(nt,st._id);this._dataSource.entities.getById(ut)||(this.config.symbol&&this.setEntityConfigSymbol(st,this.config.symbol),st._id=ut,this._dataSource.entities.add(st))}return this._geojsonCollection[H.x+"_"+H.y+"_"+H.level]=Q,document.createElement("canvas")}.bind(this)).catch(function(J){var Q;return M.error((0,m.default)(Q="".concat(J,":Unexpected in region map on tile ")).call(Q,[H.level,H.x,H.y].join("/"))),Y})}return Y},P.prototype.imageryGridProgress=function(U,H){var V,Y,$=this._gridCache[U.x+"_"+U.y+"_"+U.level].rectangle,K=new o.RectangleGeometry({rectangle:o.Rectangle.fromDegrees($.xmin,$.ymin,$.xmax,$.ymax),vertexFormat:o.EllipsoidSurfaceAppearance.VERTEX_FORMAT}),J=new o.GeometryInstance({id:U.x+"_"+U.y+"_"+U.level,geometry:K}),Q=H.toDataURL("image/png"),et=new o.GroundPrimitive({geometryInstances:J,appearance:new o.EllipsoidSurfaceAppearance({translucent:!![],material:new o.Material({fabric:{type:"Image",uniforms:{image:Q,color:o.Color.WHITE.withAlpha(this._opacity||.8)}}})}),asynchronous:![],compressVertices:![],releaseGeometryInstances:![],allowPicking:!![],imageReady:!![],classificationType:o.ClassificationType.BOTH}),nt=this._gridCache[U.x+"_"+U.y+"_"+U.level];if(nt.primitive=et,!et||this._clean)return document.createElement("canvas");this._imageryGridPrimitives.add(et);var st=nt.imagery.parent,ut=st.x+"_"+st.y+"_"+st.level;return st.referenceCount>1&&this!==null&&this!==void 0&&(V=this._gridCache[ut])!==null&&V!==void 0&&V.primitive&&this!==null&&this!==void 0&&(Y=this._gridCache[ut])!==null&&Y!==void 0&&Y.primitive.show&&(this._gridCache[ut].primitive.show=![]),document.createElement("canvas")};function E(U){var H=B(U);return H===o.WindingOrder.COUNTER_CLOCKWISE}function N(U,H){for(var V=U.x,Y=U.y,$=![],K=0,J=H.length-1;K<H.length;J=K++){var Q=H[K].x,et=H[K].y,nt=H[J].x,st=H[J].y,ut=et>Y!=st>Y&&V<(nt-Q)*(Y-et)/(st-et)+Q;ut&&($=!$)}return $}function I(U,H){for(var V=0;V<U.length;V++)if(N(H,U[V])){for(var Y=![];V+1<U.length&&!E(U[V+1]);)V++,!Y&&N(H,U[V])&&(Y=!![]);if(!Y)return!![]}return![]}function G(U,H,V,Y){var $=Y.extent*Math.pow(2,V),K=Y.extent*U,J=Y.extent*H,Q=Y.loadGeometry(),et=u.VectorTileFeature.types[Y.type],nt,st;function ut(Pt){for(var wt=0;wt<Pt.length;wt++){var At=Pt[wt],Nt=90-(At.y+J)*180/$;Pt[wt]=[(At.x+K)*360/2/$-180,Nt]}}switch(Y.type){case 1:var rt=[];for(nt=0;nt<Q.length;nt++)rt[nt]=Q[nt][0];Q=rt,ut(Q);break;case 2:for(nt=0;nt<Q.length;nt++)ut(Q[nt]);break;case 3:for(Q=W(Q),nt=0;nt<Q.length;nt++)for(st=0;st<Q[nt].length;st++)ut(Q[nt][st]);break}Q.length===1?Q=Q[0]:et="Multi"+et;var ht={type:"Feature",geometry:{type:et,coordinates:Q},properties:Y.properties};return"id"in Y&&(ht.id=Y.id),ht}function W(U){var H=U.length;if(H<=1)return[U];for(var V=[],Y,$,K=0;K<H;K++){var J=Z(U[K]);J!==0&&($===void 0&&($=J<0),$===J<0?(Y&&V.push(Y),Y=[U[K]]):Y.push(U[K]))}return Y&&V.push(Y),V}function Z(U){for(var H=0,V=0,Y=U.length,$=Y-1,K,J;V<Y;$=V++)K=U[V],J=U[$],H+=(J.x-K.x)*(K.y+J.y);return H}P.prototype.pickFeatures=function(U,H,V,Y,$){var K,J,Q={x:U,y:H,level:V};V>this._maximumNativeLevel?(J=V-this._maximumNativeLevel,K={x:U>>J,y:H>>J,level:this._maximumNativeLevel}):K={x:U,y:H,level:V};var et=this,nt=this._buildImageUrl(K.x,K.y,K.level);return k(nt).then(function(st){var ut=new u.VectorTile(new l.default(st)).layers[et._layerName];if(!o.defined(ut))return[];var rt=[0,(ut.extent>>J)-1],ht=et._tilingScheme.tileXYToNativeRectangle(U,H,V),Pt=[ht.west,ht.east],wt=[ht.north,ht.south],At=function(vt,Dt,Ct,jt,zt){var Yt=new o.Cartesian2;o.Cartesian2.subtract(vt,new o.Cartesian2(Dt[0],Ct[0]),Yt);var Zt=new o.Cartesian2((jt[1]-jt[0])/(Dt[1]-Dt[0]),(zt[1]-zt[0])/(Ct[1]-Ct[0]));return o.Cartesian2.add(o.Cartesian2.multiplyComponents(Yt,Zt,new o.Cartesian2),new o.Cartesian2(jt[0],zt[0]),new o.Cartesian2)},Nt=o.Cartesian2.fromCartesian3(et._tilingScheme.projection.project(new o.Cartographic(Y,$)));Nt=At(Nt,Pt,wt,rt,rt);for(var Lt=new r.default(Nt.x,Nt.y),Rt=[],Tt=0;Tt<ut.length;Tt++){var mt=ut.feature(Tt);if(mt.type===O&&I(L(mt.loadGeometry(),K,ut.extent>>J,Q),Lt)){var Ft=et._featureInfoFunc(mt);o.defined(Ft)&&Rt.push(Ft)}}return Rt})},P.prototype.addImageryCache=function(U){U.level>this._minimumLevel&&U.level<this._maximumLevel&&(this._gridCache[U.x+"_"+U.y+"_"+U.level]=U)},P.prototype.removeImageryCache=function(U){var H,V,Y,$=this._gridCache[U.x+"_"+U.y+"_"+U.level];this._imageryGridPrimitives.remove($?.primitive);var K=$==null||(H=$.imagery)===null||H===void 0?void 0:H.parent,J=K?.x+"_"+K?.y+"_"+K?.level;if(K?.referenceCount<5&&this!==null&&this!==void 0&&(V=this._gridCache[J])!==null&&V!==void 0&&V.primitive&&!(this!==null&&this!==void 0&&(Y=this._gridCache[J])!==null&&Y!==void 0&&Y.primitive.show)&&(this._gridCache[J].primitive.show=!![]),delete this._gridCache[U.x+"_"+U.y+"_"+U.level],this._geojsonCollection[U.x+"_"+U.y+"_"+U.level])for(var Q=this._geojsonCollection[U.x+"_"+U.y+"_"+U.level],et=0;et<Q.length;et++){var nt=Q[et];this._dataSource.entities.remove(nt)}},P.prototype.createHighlightImageryProvider=function(U){var H=this,V=function(K){if(U===K){var J=H._styleFunc(K);if(o.defined(J))return J.fillStyle="rgba(0,0,0,0)",J.lineJoin="round",J.lineWidth=Math.floor(1.5*o.defaultValue(J.lineWidth,1)+1),J}},Y=new P({url:this._uriTemplate.expression,layerName:this._layerName,subdomains:this._subdomains,rectangle:this._rectangle,minimumZoom:this._minimumLevel,maximumNativeZoom:this._maximumNativeLevel,maximumZoom:this._maximumLevel,uniqueIdProp:this._uniqueIdProp,styleFunc:V});return Y.pickFeatures=function(){},Y},P.prototype.getConfigSymbol=function(U,H){var V=i.getAttrVal(H)||{},Y=U.styleOptions;if(U.styleField){if(U.styleFieldOptions){var $=V[U.styleField],K=U.styleFieldOptions[$];K!=null&&(K.opacity=this._opacity,K.outlineOpacity=this._opacity,Y=i.clone(Y),Y=a.default.extend(Y,K))}else if(U.styleStepOptions){var J=U.minValue;J===null&&(J=Number.MIN_VALUE);var Q=V[U.styleField],et=this.getIndexByValue(U.styleStepOptions,J,Q);if(et!=null){var nt=U.styleStepOptions[et].style;nt.opacity=this._opacity,nt.outlineOpacity=this._opacity,Y=i.clone(Y),Y=a.default.extend(Y,nt)}}}return Y},P.prototype.setEntityConfigSymbol=function(U,H){var V=i.getAttrVal(U.properties)||{},Y=H.styleOptions;if(H.styleField){if(H.styleFieldOptions){var $=V[H.styleField],K=H.styleFieldOptions[$];K!=null&&(K.opacity=this._opacity,K.outlineOpacity=this._opacity,Y=i.clone(Y),Y=a.default.extend(Y,K))}else if(H.styleStepOptions){var J=H.minValue;J===null&&(J=Number.MIN_VALUE);var Q=V[H.styleField],et=this.getIndexByValue(H.styleStepOptions,J,Q);if(et!=null){var nt=H.styleStepOptions[et].style;nt.opacity=this._opacity,nt.outlineOpacity=this._opacity,Y=i.clone(Y),Y=a.default.extend(Y,nt)}}}if(typeof H.calback=="function"){var st=H.calback(V,U,H);if(!st)return;Y=i.clone(Y),Y=a.default.extend(Y,st)}if(Y=Y||{},U.polyline&&(g.style2Entity(Y,U.polyline),Y.label&&Y.label.field)){Y.label.heightReference=o.defaultValue(Y.label.heightReference,o.HeightReference.CLAMP_TO_GROUND);var ut=h.style2Entity(Y.label);ut.text=V[Y.label.field]||ut.text||"";var rt=g.getPositions(U),ht=rt[Math.floor(rt.length/2)];Y.label.position&&(Y.label.position==="center"?ht=(0,p.centerOfMass)(rt):i.isNumber(Y.label.position)&&(ht=rt[Y.label.position])),U.position=ht,U.label=ut}if(U.polygon){if(!Y.classificationType&&(Y.classificationType=o.ClassificationType.BOTH),d.style2Entity(Y,U.polygon),Y.outlineWidth&&Y.outlineWidth<1&&(Y.outlineWidth=1),Y.outlineWidth&&Y.outlineWidth>1||Y.classificationType!=o.ClassificationType.NONE)if(H.volumeStyle&&!H.volumeStyle.render2d)Y.outlineWidth=1;else{U.polygon.outline=![];var Pt={color:Y.outlineColor,width:Y.outlineWidth,opacity:Y.outlineOpacity,lineType:"solid",clampToGround:!![],classificationType:Y.classificationType,outline:![]},wt=g.style2Entity(Pt);wt.positions=d.getPositions(U),U.polyline=wt}if(Y.label&&Y.label.field){Y.label.heightReference=o.defaultValue(Y.label.heightReference,o.HeightReference.CLAMP_TO_GROUND);var At=h.style2Entity(Y.label);At.text=V[Y.label.field]||At.text||"",U.position=(0,p.pointOnPolygon)(d.getPositions(U),d.getHoles(U)),U.label=At}if(H.volumeStyle){var Nt=Number(V[H.volumeStyle.cloumn]||1),Lt=H.volumeStyle.storeyheight||3.5;if(i.isString(Lt)&&(Lt=V[Lt]||3.5),H.volumeStyle.Updownheight){var Rt=H.volumeStyle.Updownheight.down,Tt=H.volumeStyle.Updownheight.up;i.isNumber(Rt)?U.polygon.height=Rt:i.isString(Rt)&&(U.polygon.height=V[Rt]||0),i.isNumber(Tt)?U.polygon.extrudedHeight=Tt:i.isString(Tt)?U.polygon.extrudedHeight=V[Tt]||U.polygon.height+(Lt||3.5):Tt==null&&(U.polygon.extrudedHeight=U.polygon.height+(Lt||3.5))}else U.polygon.extrudedHeight=Nt*Lt;H.volumeStyle.outlineWidth!==void 0&&H.volumeStyle.outlineWidth==![]&&(U.polygon.outline=![]),H.volumeStyle.clampToGround&&(U.polygon.heightReference=o.HeightReference.CLAMP_TO_GROUND)}}if(U.label&&(Y.label=Y.label||Y||{},Y.label.heightReference=o.defaultValue(Y.label.heightReference,o.HeightReference.CLAMP_TO_GROUND),h.style2Entity(Y.label,U.label),Y.label.field&&(U.label.text=V[Y.label.field]||U.label.text||"")),U.billboard){if(Y.heightReference=o.defaultValue(Y.heightReference,o.HeightReference.CLAMP_TO_GROUND),n.style2Entity(Y,U.billboard),Y.label&&Y.label.field&&!U.label){Y.label.heightReference=o.defaultValue(Y.label.heightReference,o.HeightReference.CLAMP_TO_GROUND);var mt=h.style2Entity(Y.label);mt.text=V[Y.label.field]||mt.text||"",U.label=mt}if(U.billboard&&Y.label.heightfield&&Number(V[Y.label.heightfield])&&(U.position=(0,p.setPositionsHeight)(U.position.getValue(),Number(V[Y.label.heightfield]))),Y.model){Y.model.heightReference=o.defaultValue(Y.model.heightReference,o.HeightReference.CLAMP_TO_GROUND);var Ft=y.style2Entity(Y.model);U.model=Ft}}U.attribute=Y}},631:function(X,z,e){"use strict";var M=e(29870),F=e(20314),R=e(26352),A=e(40639),T=e(43586),D=e(87879),b=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.MapboxVectorTileLayer=void 0;var C=e(70334),f=m(e(87647));function v(s){if(typeof D!="function")return null;var c=new D,x=new D;return(v=function(i){return i?x:c})(s)}function m(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||M(s)!=="object"&&typeof s!="function")return{default:s};var x=v(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&b;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var h=i?b(s,n):null;h&&(h.get||h.set)?Object.defineProperty(a,n,h):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}function o(s,c){var x=typeof A<"u"&&T(s)||s["@@iterator"];if(!x){if(Array.isArray(s)||(x=u(s))||c&&s&&typeof s.length=="number"){x&&(s=x);var a=0,i=function(){};return{s:i,n:function(){return a>=s.length?{done:!![]}:{done:![],value:s[a++]}},e:function(y){throw y},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n=!![],h=![],g;return{s:function(){x=x.call(s)},n:function(){var y=x.next();return n=y.done,y},e:function(y){h=!![],g=y},f:function(){try{!n&&x.return!=null&&x.return()}finally{if(h)throw g}}}}function u(s,c){var x;if(s){if(typeof s=="string")return l(s,c);var a=F(x=Object.prototype.toString.call(s)).call(x,8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return R(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(s,c)}}function l(s,c){(c==null||c>s.length)&&(c=s.length);for(var x=0,a=new Array(c);x<c;x++)a[x]=s[x];return a}var r=C.TileLayer.extend({layer:void 0,add:function(){var c=new C.TileLayer(this.config,this.viewer);this.layer=c.layer,this.layer.imageryProvider._viewer=this.viewer,this.viewer.dataSources.add(this.layer.imageryProvider._dataSource),this.viewer.scene.primitives.add(this.layer.imageryProvider._imageryGridPrimitives),this._helper=new f.EventHelper;var x=this;return this._helper.add(x.viewer.scene.globe.tileLoadProgressEvent,function(a){a===0&&x.layer.imageryProvider._updatePrimitiveLayers()}),c},removeEx:function(){this._helper.removeAll(),this.layer._imageryProvider._clean=!![],this.layer._imageryProvider._dataSource._entityCollection.removeAll(),this.layer._imageryProvider._dataSource.update(),this.layer._imageryProvider._imageryGridPrimitives.removeAll()},hasOpacity:!![],_opacity:1,setOpacity:function(c){this._opacity=c,this.layer._imageryProvider._opacity=this._opacity;var x=this.layer._imageryProvider._imageryGridPrimitives._primitives,a=o(x),i;try{for(a.s();!(i=a.n()).done;){var n=i.value;n.appearance.material.uniforms.color.alpha=this._opacity}}catch(h){a.e(h)}finally{a.f()}}});z.MapboxVectorTileLayer=r},32634:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.OSMBuildLayer=void 0;var A=b(e(87647)),T=e(87358);function D(f){if(typeof F!="function")return null;var v=new F,m=new F;return(D=function(u){return u?m:v})(f)}function b(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||M(f)!=="object"&&typeof f!="function")return{default:f};var m=D(v);if(m&&m.has(f))return m.get(f);var o={},u=Object.defineProperty&&R;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=u?R(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}var C=T.Tiles3dLayer.extend({model:null,originalCenter:null,positionCenter:null,add:function(){if(!this.model&&!this.viewer.scene.primitives.contains(this.model)){var v=A.createOsmBuildings();v&&(this.model=this.viewer.scene.primitives.add(v))}},remove:function(){this.viewer.scene.primitives.contains(this.model)&&this.viewer.scene.primitives.remove(this.model),delete this.model}});z.OSMBuildLayer=C},47184:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.POILayer=void 0;var D=T(e(22466)),b=r(e(87647)),C=T(e(63379)),f=r(e(94777)),v=e(58),m=r(e(80790)),o=r(e(11257)),u=r(e(21617));function l(c){if(typeof R!="function")return null;var x=new R,a=new R;return(l=function(n){return n?a:x})(c)}function r(c,x){if(!x&&c&&c.__esModule)return c;if(c===null||F(c)!=="object"&&typeof c!="function")return{default:c};var a=l(x);if(a&&a.has(c))return a.get(c);var i={},n=Object.defineProperty&&A;for(var h in c)if(h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)){var g=n?A(c,h):null;g&&(g.get||g.set)?Object.defineProperty(i,h,g):i[h]=c[h]}return i.default=c,a&&a.set(c,i),i}var s=v.CustomFeatureGridLayer.extend({_keys:null,_key_index:0,getKey:function(){!this._keys&&(this._keys=this.config.key||["c95467d0ed2a3755836e37dc27369f97","4320dda936d909d73ab438b4e29cf2a2","e64a96ed7e361cbdc0ebaeaf3818c564","df3247b7df64434adecb876da94755d7","d4375ec477cb0a473c448fb1f83be781","13fdd7b2b90a9d326ae96867ebcc34ce","c34502450ae556f42b21760faf6695a0","57f8ebe12797a73fc5b87f5d4ef859b1"]);var x=this._key_index++%this._keys.length;return this._keys[x]},getDataForGrid:function(x,a){var i=f.wgs2gcj([x.rectangle.xmin,x.rectangle.ymax]),n=f.wgs2gcj([x.rectangle.xmax,x.rectangle.ymin]),h=i[0]+","+i[1]+"|"+n[0]+","+n[1],g=(0,D.default)(this.config)||{};g.output="json",g.key=this.getKey(),g.polygon=h,g.offset||(g.offset=25),g.types||(g.types="120000|130000|190000"),C.default.default.ajax({url:"http://restapi.amap.com/v3/place/polygon",type:"get",dataType:"json",timeout:"5000",data:g,success:function(y){if(y.infocode!=="10000"){M.error("POI \u8BF7\u6C42\u5931\u8D25("+y.infocode+")\uFF1A"+y.info);return}var p=y.pois;a(p)},error:function(y){M.error("POI \u8BF7\u6C42\u51FA\u9519("+y.status+")\uFF1A"+y.statusText)}})},createEntity:function(x,a){var i="<div>\u540D\u79F0\uFF1A"+a.name+"</div><div>\u5730\u5740\uFF1A"+a.address+"</div><div>\u533A\u57DF\uFF1A"+a.pname+a.cityname+a.adname+"</div><div>\u7C7B\u522B\uFF1A"+a.type+"</div>",n=a.location.split(",");n=f.gcj2wgs(n);var h=this.viewer.shine.point2map({x:n[0],y:n[1]}),g={name:a.name,position:b.Cartesian3.fromDegrees(h.x,h.y,this.config.height||3),popup:{html:i,anchor:[0,-15]},properties:a},d=this.config.symbol;if(d){var y=d.styleOptions;if(d.styleField){var p=a[d.styleField],w=d.styleFieldOptions[p];w!=null&&(y=C.default.default.extend({},y),y=C.default.default.extend(y,w))}y=y||{},y.image?(g.billboard=(0,m.style2Entity)(y),g.billboard.heightReference=b.HeightReference.RELATIVE_TO_GROUND):g.point=(0,o.style2Entity)(y),y.label&&(g.label=(0,u.style2Entity)(y.label),g.label.heightReference=b.HeightReference.RELATIVE_TO_GROUND,g.label.text=a.name)}else g.point={color:new b.Color.fromCssColorString("#3388ff"),pixelSize:10,outlineColor:new b.Color.fromCssColorString("#ffffff"),outlineWidth:2,heightReference:b.HeightReference.RELATIVE_TO_GROUND,scaleByDistance:new b.NearFarScalar(1e3,1,2e4,.5)},g.label={text:a.name,font:"normal small-caps normal 16px \u6977\u4F53",style:b.LabelStyle.FILL_AND_OUTLINE,fillColor:b.Color.AZURE,outlineColor:b.Color.BLACK,outlineWidth:2,horizontalOrigin:b.HorizontalOrigin.CENTER,verticalOrigin:b.VerticalOrigin.BOTTOM,pixelOffset:new b.Cartesian2(0,-15),heightReference:b.HeightReference.RELATIVE_TO_GROUND,scaleByDistance:new b.NearFarScalar(1e3,1,5e3,.8),distanceDisplayCondition:new b.DistanceDisplayCondition(0,5e3)};var S=this.dataSource.entities.add(g);return S}});z.POILayer=s},80691:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.S3MLayer=void 0;var D=T(e(42579)),b=o(e(87647)),C=e(87358),f=e(36054),v=o(e(80823));function m(l){if(typeof R!="function")return null;var r=new R,s=new R;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||F(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&A;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?A(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var u=C.Tiles3dLayer.extend({model:null,originalCenter:null,positionCenter:null,boundingSphere:null,add:function(){this.model?this.viewer.scene.primitives.contains(this.model)||this.viewer.scene.primitives.add(this.model):this.initData()},remove:function(){this.viewer.scene.primitives.contains(this.model)&&this.viewer.scene.primitives.remove(this.model),delete this.model},centerAt:function(r){this.config.extent||this.config.center?this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:r,isWgs84:!![]}):this.boundingSphere&&this.viewer.camera.flyToBoundingSphere(this.boundingSphere,{offset:new b.HeadingPitchRange(0,-.5,this.boundingSphere.radius*2),duration:r})},initData:function(){var r=this,s=v.getProxyUrl(this.config).url;this.model=this.viewer.scene.primitives.add(new f.S3MTilesLayerProvider({context:this.viewer.scene._context,url:s})),this.model.readyPromise.then(function(c){(0,D.default)(this,r),this.readyPromise&&this.readyPromise(c);var x=c.boundingSphere;this.boundingSphere=x,c._root&&c._root.transform&&(this.orginMatrixInverse=b.Matrix4.inverse(b.Matrix4.fromArray(c._root.transform),new b.Matrix4),this.config.scale>0&&this.config.scale!==1&&(c._root.transform=b.Matrix4.multiplyByUniformScale(c._root.transform,this.config.scale,c._root.transform)));var a=x.center;this.positionCenter=a;var i=b.Cartographic.fromCartesian(a),n=Number(i.height.toFixed(2)),h=Number(b.Math.toDegrees(i.longitude).toFixed(6)),g=Number(b.Math.toDegrees(i.latitude).toFixed(6));this.originalCenter={x:h,y:g,z:n};var d=this.viewer.shine.point2map(this.originalCenter);if(d.x!==this.originalCenter.x||d.y!==this.originalCenter.y||this.config.offset!=null){this.config.offset=this.config.offset||{},this.config.offset.x&&this.config.offset.y&&(this.config.offset=this.viewer.shine.point2map(this.config.offset));var y={x:this.config.offset.x||d.x,y:this.config.offset.y||d.y,z:this.config.offset.z||0,heading:this.config.offset.heading,axis:this.config.axis,scale:this.config.scale,transform:this.config.offset.hasOwnProperty("transform")?this.config.offset.transform:this.config.offset.heading!=null};this.config.offset.z==="-height"?(y.z=-n+5,this.updateMatrix(y)):this.config.offset.z==="auto"?this.autoHeight(a,y):this.updateMatrix(y)}!this.viewer.shine.isFlyAnimation()&&this.config.flyTo&&this.centerAt(),this.config.calback&&this.config.calback(c),b.defined(this.config.visibleDistanceMax)&&this.bindVisibleDistance()}.bind(this)).otherwise(function(c){(0,D.default)(this,r),M.error(c)}.bind(this)),this.viewer.scene.camera.setView({destination:new b.Cartesian3(-2182469166141913e-9,4.3865790994979935e6,4069925783807108e-9),orientation:{heading:5.213460518239332,pitch:-.5150671720144846}})}});z.S3MLayer=u},40266:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.TerrainLayer=void 0;var A=e(14666),T=b(e(80823));function D(f){if(typeof F!="function")return null;var v=new F,m=new F;return(D=function(u){return u?m:v})(f)}function b(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||M(f)!=="object"&&typeof f!="function")return{default:f};var m=D(v);if(m&&m.has(f))return m.get(f);var o={},u=Object.defineProperty&&R;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=u?R(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}var C=A.BaseLayer.extend({terrain:null,add:function(){!this.terrain&&(this.terrain=T.getTerrainProvider(this.config)),this.viewer.terrainProvider=this.terrain},remove:function(){this.viewer.terrainProvider=T.getEllipsoidTerrain()}});z.TerrainLayer=C},70334:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.TileLayer=void 0;var D=T(e(42579)),b=T(e(22466)),C=T(e(78756)),f=T(e(5146)),v=c(e(87647)),m=e(14666),o=e(66828),u=e(10563),l=T(e(63379)),r=e(32002);function s(a){if(typeof R!="function")return null;var i=new R,n=new R;return(s=function(g){return g?n:i})(a)}function c(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||F(a)!=="object"&&typeof a!="function")return{default:a};var n=s(i);if(n&&n.has(a))return n.get(a);var h={},g=Object.defineProperty&&A;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?A(a,d):null;y&&(y.get||y.set)?Object.defineProperty(h,d,y):h[d]=a[d]}return h.default=a,n&&n.set(a,h),h}var x=m.BaseLayer.extend({layer:null,add:function(){this.layer!=null&&this.remove(),this.addEx();var i=this.createImageryProvider(this.config);if(v.defined(i)){var n=this.config,h={show:!![],alpha:this._opacity};if(v.defined(n.rectangle)&&v.defined(n.rectangle.xmin)&&v.defined(n.rectangle.xmax)&&v.defined(n.rectangle.ymin)&&v.defined(n.rectangle.ymax)){var g=n.rectangle.xmin,d=n.rectangle.xmax,y=n.rectangle.ymin,p=n.rectangle.ymax,w=v.Rectangle.fromDegrees(g,y,d,p);this.rectangle=w,h.rectangle=w}v.defined(n.brightness)&&(h.brightness=n.brightness),v.defined(n.contrast)&&(h.contrast=n.contrast),v.defined(n.hue)&&(h.hue=n.hue),v.defined(n.saturation)&&(h.saturation=n.saturation),v.defined(n.gamma)&&(h.gamma=n.gamma),v.defined(n.maximumAnisotropy)&&(h.maximumAnisotropy=n.maximumAnisotropy),v.defined(n.minimumTerrainLevel)&&(h.minimumTerrainLevel=n.minimumTerrainLevel),v.defined(n.maximumTerrainLevel)&&(h.maximumTerrainLevel=n.maximumTerrainLevel),this.layer=new v.ImageryLayer(i,h),this.layer.config=this.config,this.viewer.imageryLayers.add(this.layer),this.layer.config.group==1,this.setZIndex(this.config.mapIndex)}},createImageryProvider:function(i){return o.Layer.createImageryProvider(i)},addEx:function(){},remove:function(){this.layer!=null&&(this.removeEx(),this.viewer.imageryLayers.remove(this.layer,!![]),this.layer=null)},removeEx:function(){},centerAt:function(i){var n,h,g=this;if(this.layer!=null)if(this.config.extent||this.config.center)this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:i,isWgs84:!![]});else if(((n=this.config)===null||n===void 0||(h=n._options)===null||h===void 0?void 0:h.initExtent.length)===4){var d=this.config._options.initExtent,y={xmin:d[0],ymin:d[1],xmax:d[2],ymax:d[3]};this.viewer.shine.centerAt(y,{duration:i,isWgs84:!![]})}else if(v.defined(this.rectangle))this.viewer.camera.flyTo({destination:this.rectangle,duration:i});else{var p=null,w="",S="",O="",B="",k=this;if(this.layer.config.type==="geoserver-wms")l.default.ajax({type:"GET",url:this.layer.config.url+"?service=WMS&request=GetCapabilities",async:![],success:function(Y){var $=this,K=(0,u.xmlToJson)(Y),J;if(Array.isArray(K.WMS_Capabilities.Capability.Layer)){var Q;J=(0,b.default)(Q=K.WMS_Capabilities.Capability.Layer.Layer).call(Q,function(nt){if((0,D.default)(this,$),nt.Name["#text"]==k.layer.config.visibleLayers||nt.Name["#text"]==k.layer.config.name)return nt}.bind(this))}else J=K.WMS_Capabilities.Capability.Layer.Layer;if(J){Array.isArray(J[0].BoundingBox)?(w=J[0].BoundingBox[0]["@attributes"].minx,S=J[0].BoundingBox[0]["@attributes"].miny,O=J[0].BoundingBox[0]["@attributes"].maxx,B=J[0].BoundingBox[0]["@attributes"].maxy):(w=J[0].BoundingBox["@attributes"].minx,S=J[0].BoundingBox["@attributes"].miny,O=J[0].BoundingBox["@attributes"].maxx,B=J[0].BoundingBox["@attributes"].maxy);var et=1.8*(B-S);p=new v.Rectangle.fromDegrees(w,S-et,O,B-et)}else M.error("Invalid positioning layer!")},error:function(){M.error("Failed to request Boundbox of layer!")}});else if(this.layer.config.type==="geoserver-wmts"){var P=this.config.WMTSparams,L=P.position.split(" ");if(P.ServiceType==="geoserver"){var E=1.8*(L[3]-L[1]);p=new v.Rectangle.fromDegrees(L[0],L[1]-E,L[2],L[3]-E)}else{var N=1.8*(L[2]-L[0]);p=new v.Rectangle.fromDegrees(L[1],L[0]-N,L[3],L[2]-N)}}else if(this.layer.config.type==="wmts"){var I=this.config.WMTSparams,G=I.position.split(" ");if(I.ServiceType==="geoserver"){var W=1.8*(G[3]-G[1]);p=new v.Rectangle.fromDegrees(G[0],G[1]-W,G[2],G[3]-W)}else{var Z=1.8*(G[2]-G[0]);p=new v.Rectangle.fromDegrees(G[1],G[0]-Z,G[3],G[2]-Z)}}else if(this.layer.imageryProvider.ready&&this.layer.imageryProvider.rectangle){p=(0,r.cloneDeep)(this.layer.imageryProvider.rectangle);var U=1.8*(p.north-p.south);p.north=p.north-U,p.south=p.south-U}else{var H=C.default.resolve(this.layer.imageryProvider.readyPromise);H.then(function(){(0,D.default)(this,g),p=(0,r.cloneDeep)(this.layer.imageryProvider.rectangle),v.defined(p)&&p!==v.Rectangle.MAX_VALUE&&p.west>0&&p.south>0&&p.east>0&&p.north>0&&this.viewer.camera.flyTo({destination:p,duration:i})}.bind(this)).catch(function(V){var Y;(0,D.default)(this,g),M.error((0,f.default)(Y="There was an error while creating ".concat(this.layer.name,". ")).call(Y,V))}.bind(this))}v.defined(p)&&p!==v.Rectangle.MAX_VALUE&&p.west>0&&p.south>0&&p.east>0&&p.north>0&&this.viewer.camera.flyTo({destination:p,duration:i,orientation:{heading:v.Math.toRadians(0),pitch:v.Math.toRadians(-45),roll:0}})}},hasOpacity:!![],_opacity:1,setOpacity:function(i){this._opacity=i,this.layer!=null&&(this.layer.alpha=i)},hasZIndex:!![],setZIndex:function(i){if(!(this.layer==null||i==null)){this.viewer.imageryLayers.raiseToTop(this.layer);for(var n=this.viewer.imageryLayers._layers,h=n.length-1;h>=0;h--)if(n[h]!=this.layer){var g=n[h].config;g&&g.mapIndex&&i<g.mapIndex&&this.viewer.imageryLayers.lower(this.layer)}}}});z.TileLayer=x},87358:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Tiles3dLayer=void 0;var T=A(e(81806)),D=A(e(11323)),b=A(e(42579)),C=A(e(34749)),f=r(e(87647)),v=e(14666),m=r(e(80823)),o=r(e(68821)),u=r(e(92672));function l(c){if(typeof F!="function")return null;var x=new F,a=new F;return(l=function(n){return n?a:x})(c)}function r(c,x){if(!x&&c&&c.__esModule)return c;if(c===null||M(c)!=="object"&&typeof c!="function")return{default:c};var a=l(x);if(a&&a.has(c))return a.get(c);var i={},n=Object.defineProperty&&R;for(var h in c)if(h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)){var g=n?R(c,h):null;g&&(g.get||g.set)?Object.defineProperty(i,h,g):i[h]=c[h]}return i.default=c,a&&a.set(c,i),i}var s=v.BaseLayer.extend({model:null,originalCenter:null,positionCenter:null,boundingSphere:null,add:function(){this.model?this.viewer.scene.primitives.contains(this.model)||this.viewer.scene.primitives.add(this.model):this.initData()},remove:function(){f.defined(this.config.visibleDistanceMax)&&this.viewer.scene.camera.changed.removeEventListener(this.updateVisibleDistance,this),this.viewer.scene.primitives.contains(this.model)&&this.viewer.scene.primitives.remove(this.model),delete this.model,delete this.boundingSphere},centerAt:function(){var c=(0,C.default)(D.default.mark(function a(i){var n=this;return D.default.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.config.extent||this.config.center)){g.next=4;break}this.viewer.shine.centerAt(this.config.extent||this.config.center,{duration:i,isWgs84:!![]}),g.next=6;break;case 4:return g.next=6,this.model.readyPromise.then(function(){(0,b.default)(this,n),this.boundingSphere&&this.viewer.camera.flyToBoundingSphere(this.boundingSphere,{offset:new f.HeadingPitchRange(0,-.5,this.boundingSphere.radius*2),duration:i})}.bind(this));case 6:case"end":return g.stop()}},a,this)}));function x(a){return c.apply(this,arguments)}return x}(),initData:function(){var x=this;this.config.maximumScreenSpaceError=this.config.maximumScreenSpaceError||2,this.config.maximumMemoryUsage=this.config.maximumMemoryUsage||512;var a=this.config;if(a.authkey){var i;(0,T.default)(i=a.url).call(i,"?")?a.url+="&authkey="+a.authkey:a.url+="?authkey="+a.authkey}if(a=m.getProxyUrl(a),this.model=this.viewer.scene.primitives.add(new f.Cesium3DTileset(a)),!this.config.dthurl){this.model._config=this.config;for(var n in this.config)if(this.config.hasOwnProperty(n)){if(n==="url"||n==="type"||n==="style"||n==="classificationType")continue;try{this.model[n]=this.config[n]}catch{}}}this.config.style&&(this.model.style=new f.Cesium3DTileStyle(this.config.style));var h=this;if(this.config.dthurl){h.viewer.dthTileset,h.viewer.dthTileset=new f.Cesium3DTileset({url:h.config.dthurl,classificationType:f.ClassificationType.CESIUM_3D_TILE}),h.viewer.dthTileset.style=new f.Cesium3DTileStyle({color:"rgba(255, 255, 255, 0.01)"}),h.sthModel=h.viewer.scene.primitives.add(h.viewer.dthTileset),h.sthModel._config=h.config;for(var g in h.config)if(h.config.hasOwnProperty(g)){if(g==="url"||g==="type"||g==="style"||g==="classificationType")continue;try{this.sthModel[g]=h.config[g]}catch{}}h.viewer.cx&&(h.viewer.dthTileset.show=!![])}if(this.config.style&&this.config.style.colorty&&window.color_type){for(var d=window.color_type,y,p,w,S=h.config.style.colorty,O=h.config.style.proID,B=[],k=0;k<d[S].type.length;k++){var P=d[S].type[k];y=d[S].color[P][0],p=d[S].color[P][1],w=d[S].color[P][2];var L="rgba("+y+","+p+","+w+",1)",E="${"+O+"} === '"+P+"'",N=[E,L];B.push(N)}B.push(["true","rgba(255,235,175,1)"]),h.model.style=new f.Cesium3DTileStyle({color:{conditions:B}})}this.model.readyPromise.then(function(I){(0,b.default)(this,x),this.readyPromise&&this.readyPromise(I),this.hasOpacity&&this._opacity!==1&&this.setOpacity(this._opacity);var G=I.boundingSphere;this.boundingSphere=G,I._root&&I._root.transform&&(this.orginMatrixInverse=f.Matrix4.inverse(f.Matrix4.fromArray(I._root.transform),new f.Matrix4),this.config.scale>0&&this.config.scale!==1&&(I._root.transform=f.Matrix4.multiplyByUniformScale(I._root.transform,this.config.scale,I._root.transform)));var W=G.center;this.positionCenter=W;var Z=f.Cartographic.fromCartesian(W),U=Number(Z.height.toFixed(2)),H=Number(f.Math.toDegrees(Z.longitude).toFixed(6)),V=Number(f.Math.toDegrees(Z.latitude).toFixed(6));this.originalCenter={x:H,y:V,z:U};var Y=this.viewer.shine.point2map(this.originalCenter);if(Y.x!==this.originalCenter.x||Y.y!==this.originalCenter.y||this.config.offset!=null){this.config.offset=this.config.offset||{},this.config.offset.x&&this.config.offset.y&&(this.config.offset=this.viewer.shine.point2map(this.config.offset));var $={x:this.config.offset.x||Y.x,y:this.config.offset.y||Y.y,z:this.config.offset.z||0,heading:this.config.offset.heading,axis:this.config.axis,scale:this.config.scale,transform:this.config.offset.hasOwnProperty("transform")?this.config.offset.transform:this.config.offset.heading!=null};this.config.offset.z==="-height"?($.z=-U+5,this.updateMatrix($)):this.config.offset.z==="auto"?this.autoHeight(W,$):this.updateMatrix($)}this.config.clippingPolygonPoints&&o.addClippingPolygon(I,this.config.clippingPolygonPoints),!this.viewer.shine.isFlyAnimation()&&this.config.flyTo&&this.centerAt(),this.config.calback&&this.config.calback(I),f.defined(this.config.visibleDistanceMax)&&this.bindVisibleDistance()}.bind(this))},autoHeight:function(x,a){var i=this;u.terrainPolyline({viewer:this.viewer,positions:[x,x],calback:function(h,g){if(!(h==null||h.length===0||g)){var d=d.formatPosition(h[0]),y=d.z-i.originalCenter.z+1;a.z=y,i.updateMatrix(a)}}})},updateMatrix:function(x){this.model!=null&&(this.positionCenter=f.Cartesian3.fromDegrees(x.x,x.y,x.z),o.updateMatrix(this.model,x))},hasOpacity:!![],setOpacity:function(x){this._opacity=x;var a=this;if(this.config.onSetOpacity&&window.color_type)this.config.onSetOpacity(x);else{var i=window.color_type,n,h,g,d;if(d=x,this.model)if(!a.config.style)a.model.style=new f.Cesium3DTileStyle({color:"color() *vec4("+x+")"});else{if(this.config.style.color&&typeof this.config.style.color=="string"){var y=f.Color.fromAlpha(f.Color.fromCssColorString(a.config.style.color),d),p=y.toCssColorString();a.model.style=new f.Cesium3DTileStyle({color:p})}if(this.config.style.color.conditions){for(var w=this.config.style.color.conditions,S=0;S<w.length;S++){var O=w[S],B=f.Color.fromAlpha(f.Color.fromCssColorString(O[1]),d);O[1]=B.toCssColorString()}var k=new f.Cesium3DTileStyle;k.color={conditions:w},a.model.style=k}if(this.config.style.colorty){for(var P=a.config.style.colorty,L=a.config.style.proID,E=[],N=0;N<i[P].type.length;N++){var I=i[P].type[N];n=i[P].color[I][0],h=i[P].color[I][1],g=i[P].color[I][2];var G="rgba("+n+","+h+","+g+","+d+")",W="${"+L+"} === '"+I+"'",Z=[W,G];E.push(Z)}E.push(["true","rgba(255,235,175,"+d+")"]);var U=new f.Cesium3DTileStyle;U.color={conditions:E},a.model.style=U}}}},showClickFeature:function(x){this.model?this.model._config.showClickFeature=x:this.config.showClickFeature=x},bindVisibleDistance:function(){this.viewer.scene.camera.changed.addEventListener(this.updateVisibleDistance,this)},updateVisibleDistance:function(){if(this._visible&&this.viewer.scene.mode===f.SceneMode.SCENE3D&&!(!this.model||!this.boundingSphere||!this.positionCenter)){var x=f.Cartesian3.distance(this.positionCenter,this.viewer.camera.position);if(x>this.config.visibleDistanceMax+1e5)this.model.show=![];else{var a=u.pickCenterPoint(this.viewer.scene);if(f.defined(a)){var i=f.Cartesian3.distance(a,this.viewer.camera.position);this.model.show=i<this.config.visibleDistanceMax}else this.model.show=!![]}}}});z.Tiles3dLayer=s},68821:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.addClippingPolygon=m,z.getCenter=C,z.getInverseTransform=o,z.getOriginCoordinateSystemPoint=u,z.updateMatrix=v;var A=b(e(87647)),T=e(80823);function D(l){if(typeof F!="function")return null;var r=new F,s=new F;return(D=function(x){return x?s:r})(l)}function b(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||M(l)!=="object"&&typeof l!="function")return{default:l};var s=D(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&R;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?R(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}function C(l,r){var s={},c=l.boundingSphere,x=c.center,a=A.Cartographic.fromCartesian(x),i=Number(a.height.toFixed(2)),n=Number(A.Math.toDegrees(a.longitude).toFixed(6)),h=Number(A.Math.toDegrees(a.latitude).toFixed(6));if(s={x:n,y:h,z:i},r){var g=A.Matrix4.fromArray(l._root.transform),d=A.Matrix4.getTranslation(g,new A.Cartesian3),y=A.Cartographic.fromCartesian(d);if(A.defined(y)){s.x=Number(A.Math.toDegrees(y.longitude).toFixed(6)),s.y=Number(A.Math.toDegrees(y.latitude).toFixed(6)),s.z=Number(y.height.toFixed(2));var p=A.Matrix4.getMatrix3(g,new A.Matrix3),w=A.Matrix4.getMatrix3(A.Transforms.eastNorthUpToFixedFrame(d),new A.Matrix3),S=A.Matrix3.getColumn(w,0,new A.Cartesian3),O=A.Matrix3.getColumn(w,1,new A.Cartesian3),B=A.Matrix3.getColumn(w,2,new A.Cartesian3),k=A.Matrix3.getColumn(p,0,new A.Cartesian3);k=A.Cartesian3.cross(k,B,k),k=A.Cartesian3.cross(B,k,k),k=A.Cartesian3.normalize(k,k);var P=A.Cartesian3.angleBetween(S,k),L=A.Cartesian3.angleBetween(O,k);L>Math.PI*.5&&(P=2*Math.PI-P),s.heading=Number(A.Math.toDegrees(P).toFixed(1))}}return s}function f(l,r){if(r==null)return l;var s;switch(r.toUpperCase()){case"Y_UP_TO_Z_UP":s=A.Axis.Y_UP_TO_Z_UP;break;case"Z_UP_TO_Y_UP":s=A.Axis.Z_UP_TO_Y_UP;break;case"X_UP_TO_Z_UP":s=A.Axis.X_UP_TO_Z_UP;break;case"Z_UP_TO_X_UP":s=A.Axis.Z_UP_TO_X_UP;break;case"X_UP_TO_Y_UP":s=A.Axis.X_UP_TO_Y_UP;break;case"Y_UP_TO_X_UP":s=A.Axis.Y_UP_TO_X_UP;break}return s==null?l:A.Matrix4.multiplyTransformation(l,s,l)}function v(l,r){var s;if(A.defined(l._root)&&A.defined(l._root.transform)&&r.transform){var c=A.Cartesian3.fromDegrees(r.x,r.y,r.z);s=A.Transforms.eastNorthUpToFixedFrame(c);var x=A.Matrix4.fromRotationTranslation(A.Matrix3.fromRotationZ(A.Math.toRadians(r.heading||0)));A.Matrix4.multiply(s,x,s),r.scale>0&&r.scale!==1&&A.Matrix4.multiplyByUniformScale(s,r.scale,s),r.axis&&(s=f(s,r.axis)),l._root.transform=s}else{var a=l.boundingSphere,i=A.Cartographic.fromCartesian(a.center),n=A.Cartesian3.fromRadians(i.longitude,i.latitude,0),h=A.Cartesian3.fromDegrees(r.x,r.y,r.z),g=A.Cartesian3.subtract(h,n,new A.Cartesian3);s=A.Matrix4.fromTranslation(g),l.modelMatrix=s}return s}function m(l,r){if(r.length>2){var s,c=[],x;switch(!![]){case r[0]instanceof A.Cartesian3:c=r,s=(0,T.ringIsClockwise)(c);break;case r[0]instanceof A.Cartographic:x=[];for(var a=0;a<r.length;a++){var i=r[a];c.push(A.Cartesian3.fromDegrees(i.longitude,i.latitude,i.height));var n=[2];n[0]=i.longitude,n[1]=i.latitude,x.push(n)}s=(0,T.ringIsClockwise)(x);break;default:for(var h=0;h<r.length;h++){var g=r[h];c.push(A.Cartesian3.fromDegrees(g[0],g[1],g[2]))}s=(0,T.ringIsClockwise)(r)}for(var d=[],y=c.length,p=o(l),w=s,S=0;S<y;++S){var O=(S+1)%y,B=new A.Cartesian3(0,0,10),k=void 0;w?k=A.Cartesian3.subtract(u(c[S],p),u(c[O],p),new A.Cartesian3):k=A.Cartesian3.subtract(u(c[O],p),u(c[S],p),new A.Cartesian3),k=A.Cartesian3.normalize(k,k);var P=A.Cartesian3.cross(k,B,new A.Cartesian3);P=A.Cartesian3.normalize(P,P),d.push(new A.ClippingPlane.fromPlane(A.Plane.fromPointNormal(u(c[S],p),P)))}l.clippingPlanes=new A.ClippingPlaneCollection({planes:d,edgeWidth:0,edgeColor:A.Color.RED,enabled:!![],unionClippingRegions:![]})}}function o(l){var r;if(l.root){var s=l.root.transform;s&&s.equals(A.Matrix4.IDENTITY)||!s?r=A.Transforms.eastNorthUpToFixedFrame(l.boundingSphere.center):r=l.root.computedTransform}else l.modelMatrix?r=l.modelMatrix:r=l.computeModelMatrix(A.JulianDate.now());return A.Matrix4.inverseTransformation(r,new A.Matrix4)}function u(l,r){return A.Matrix4.multiplyByPoint(r,l,new A.Cartesian3(0,0,0))}},95367:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var console=__webpack_require__(49500),_typeof=__webpack_require__(29870),_WeakMap=__webpack_require__(87879),_Object$getOwnPropertyDescriptor=__webpack_require__(83393),_interopRequireDefault=__webpack_require__(19534);Object.defineProperty(exports,"__esModule",{value:!![]}),exports.createMap=createMap,exports.initMap=initMap;var _stringify=_interopRequireDefault(__webpack_require__(66273)),Cesium=_interopRequireWildcard(__webpack_require__(87647)),_jquery=_interopRequireDefault(__webpack_require__(63379)),Util=_interopRequireWildcard(__webpack_require__(80823)),_ViewerEx=__webpack_require__(59802),_Layer=__webpack_require__(66828);function _getRequireWildcardCache(X){if(typeof _WeakMap!="function")return null;var z=new _WeakMap,e=new _WeakMap;return(_getRequireWildcardCache=function(F){return F?e:z})(X)}function _interopRequireWildcard(X,z){if(!z&&X&&X.__esModule)return X;if(X===null||_typeof(X)!=="object"&&typeof X!="function")return{default:X};var e=_getRequireWildcardCache(z);if(e&&e.has(X))return e.get(X);var M={},F=Object.defineProperty&&_Object$getOwnPropertyDescriptor;for(var R in X)if(R!=="default"&&Object.prototype.hasOwnProperty.call(X,R)){var A=F?_Object$getOwnPropertyDescriptor(X,R):null;A&&(A.get||A.set)?Object.defineProperty(M,R,A):M[R]=X[R]}return M.default=X,e&&e.set(X,M),M}function createMap(X){if(X.url)return _jquery.default.ajax({type:"get",dataType:"json",url:X.url,timeout:0,success:function(M){M.serverURL&&(X.serverURL=M.serverURL),X.configStyle&&X.configStyle(M);var F=initMap(M.map3d,X);X.success&&X.success(F,M,M)},error:function(){console.error(X.url+"\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25\uFF01"),Util.alert(X.url+"\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25\uFF01")}}),null;var z=initMap(X.data,X);return X.success&&X.success(z,X.data),z}function initMap(X,z){var e=z.id;window.localAndProjectPath=Util.getRootPath();var M=new Cesium.Clock,F={animation:![],timeline:![],fullscreenButton:!![],vrButton:![],geocoder:![],sceneModePicker:![],homeButton:!![],navigationHelpButton:!![],navigationInstructionsInitiallyVisible:![],infoBox:!![],selectionIndicator:![],shouldAnimate:!![],showRenderLoopErrors:!![],baseLayerPicker:![],contextmenu:!![],clockViewModel:new Cesium.ClockViewModel(M)};for(var R in X)X.hasOwnProperty(R)&&(F[R]=X[R]);if(F){for(var A in z)if(z.hasOwnProperty(A)){if(A==="id"||A==="success")continue;F[A]=z[A]}}Cesium.Ion&&(F.ionToken||F.defaultKey)&&(Cesium.Ion.defaultAccessToken=F.ionToken||F.defaultKey.CesiumionToken),Cesium.AnimationViewModel.defaultTicks=F.animationTicks||[.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600];var T;F.terrain&&F.terrain.visible?T=Util.getTerrainProvider(F.terrain,F.serverURL):T=Util.getEllipsoidTerrain(),F.terrainProvider=T;var D=![];if(F.baseLayerPicker){if(!F.imageryProviderViewModels&&F.basemaps&&F.basemaps.length>0){var b=getImageryProviderArr(F.basemaps);F.imageryProviderViewModels=b.imageryProviderViewModels,F.selectedImageryProviderViewModel=b.imageryProviderViewModels[b.index]}!F.terrainProviderViewModels&&(F.terrainProviderViewModels=getTerrainProviderViewModelsArr(F.terrain,F.serverURL),F.selectedTerrainProviderViewModel=F.terrainProviderViewModels[0],T instanceof Cesium.EllipsoidTerrainProvider&&(T=F.selectedTerrainProviderViewModel.creationCommand(),F.terrainProvider=T))}else F.imageryProvider==null&&(D=!![],F.imageryProvider=new Cesium.TileMapServiceImageryProvider({url:Cesium.buildModuleUrl("Assets/Textures/NaturalEarthII")}));var C=new Cesium.Viewer(e,F);if(D)for(var f=C.imageryLayers,v=f.length,m=0;m<v;m++){var o=f.get(0);f.remove(o,!![])}return delete F.geocoder,delete F.imageryProviderViewModels,delete F.selectedImageryProviderViewModel,delete F.terrainProviderViewModels,delete F.selectedTerrainProviderViewModel,delete F.terrainProvider,delete F.imageryProvider,C.shine=new _ViewerEx.ViewerEx(C,F),C.shine.terrainProvider=T,C.gisdata={config:C.shine.config},C}function getTerrainProvider(X,z){return X&&X.url&&(z&&(X.url=X.url.replace("$serverURL$",z)),X.url=X.url.replace("$hostname$",location.hostname).replace("$host$",location.host)),Util.getTerrainProvider(X)}function getImageryProviderArr(_0xfde793){var _0x5096f4=[],_0x31b3f7=0;window._temp_createImageryProvider=_Layer.Layer.createImageryProvider;for(var _0x281cdf=0;_0x281cdf<_0xfde793.length;_0x281cdf++){var _0x4689f9=_0xfde793[_0x281cdf];if(!(_0x4689f9.type==="group"&&_0x4689f9.layers==null)){_0x4689f9.visible&&(_0x31b3f7=_0x5096f4.length);var _0x35cafb="window._temp_basemaps"+_0x281cdf+" = function () {                        let item = "+(0,_stringify.default)(_0x4689f9)+'                        if (item.type == "group") {                            let arrVec = []                            for (let index = 0; index < item.layers.length; index++) {                                let temp = window._temp_createImageryProvider(item.layers[index])                                if (temp == null) continue                                arrVec.push(temp)                            }                            return arrVec                        }                        else {                            return window._temp_createImageryProvider(item)                        }                     }';eval(_0x35cafb);var _0x4817c9=new Cesium.ProviderViewModel({name:_0x4689f9.name||"\u672A\u547D\u540D",tooltip:_0x4689f9.name||"\u672A\u547D\u540D",iconUrl:_0x4689f9.icon||"",creationFunction:eval("window._temp_basemaps"+_0x281cdf)});_0x5096f4.push(_0x4817c9)}}return{imageryProviderViewModels:_0x5096f4,index:_0x31b3f7}}function getTerrainProviderViewModelsArr(X,z){return[new Cesium.ProviderViewModel({name:"\u4E2D\u56FD\u5730\u5F62(20\u7248\u5185\u7F51)",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"\u7531\u603B\u90E8\u5185\u7F51\u63D0\u4F9B\u7684\u5168\u56FD30\u7C73\u5730\u5F62\u670D\u52A1\uFF0C\u53EF\u5728\u603B\u90E8\u5185\u7F51\u6216VPN\u6A21\u5F0F\u4E0B\u8BBF\u95EE",category:"",creationFunction:function(){return getTerrainProvider({url:"http://192.168.20.117:8087/static/DEM/china_TIF"},z)}}),new Cesium.ProviderViewModel({name:"\u4E2D\u56FD\u5730\u5F62(20\u7248\u5916\u7F51)",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"\u7531\u603B\u90E8\u63D0\u4F9B\u7684\u5168\u56FD30\u7C73\u5730\u5F62\u670D\u52A1\uFF0C\u5B58\u5728\u4E00\u5B9A\u7684\u4E0D\u7A33\u5B9A\u6027",category:"",creationFunction:function(){return getTerrainProvider({url:"http://ework.gisquest.com:20129/internetdata/china2020dem"},z)}}),new Cesium.ProviderViewModel({name:"\u5168\u7403\u5730\u5F62",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"Cesium\u5B98\u65B9 \u63D0\u4F9B\u7684\u9AD8\u5206\u8FA8\u7387\u5168\u7403\u5730\u5F62",category:"",creationFunction:function(){return Util.getTerrainProvider({type:"ion"})}}),new Cesium.ProviderViewModel({name:"ESRI\u5730\u5F62",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"\u7531ESRI\u5728\u7EBF\u63D0\u4F9B\u7684ArcGISTiledElevationTerrainProvider",category:"",creationFunction:function(){return Util.getTerrainProvider({type:"arcgis",url:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"})}}),new Cesium.ProviderViewModel({name:"\u65E0\u5730\u5F62",iconUrl:Cesium.buildModuleUrl("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84\u6807\u51C6\u692D\u7403\uFF0C\u5373 EPSG:4326",category:"",creationFunction:function(){return Util.getEllipsoidTerrain()}})]}},86712:function(X,z,e){"use strict";var M=e(29870),F=e(85208),R=e(59791),A=e(22466),T=e(83393),D=e(5077),b=e(87879),C=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Measure=void 0;var f=C(e(5146)),v=C(e(22466)),m=C(e(53267)),o=C(e(81806)),u=C(e(69033)),l=C(e(69257)),r=C(e(43389)),s=C(e(42579)),c=C(e(36583)),x=C(e(99245)),a=k(e(87647)),i=k(e(69973)),n=k(e(21617)),h=k(e(80823)),g=e(42786),d=e(92672),y=e(71746),p=e(59039),w=k(e(96535)),S=k(e(69471)),O=k(e(10614));function B(I){if(typeof b!="function")return null;var G=new b,W=new b;return(B=function(U){return U?W:G})(I)}function k(I,G){if(!G&&I&&I.__esModule)return I;if(I===null||M(I)!=="object"&&typeof I!="function")return{default:I};var W=B(G);if(W&&W.has(I))return W.get(I);var Z={},U=Object.defineProperty&&T;for(var H in I)if(H!=="default"&&Object.prototype.hasOwnProperty.call(I,H)){var V=U?T(I,H):null;V&&(V.get||V.set)?Object.defineProperty(Z,H,V):Z[H]=I[H]}return Z.default=I,W&&W.set(I,Z),Z}function P(I,G){var W=F(I);if(R){var Z=R(I);G&&(Z=A(Z).call(Z,function(U){return T(I,U).enumerable})),W.push.apply(W,Z)}return W}function L(I){for(var G=1;G<arguments.length;G++){var W=arguments[G]!=null?arguments[G]:{};G%2?P(Object(W),!0).forEach(function(Z){(0,r.default)(I,Z,W[Z])}):D?Object.defineProperties(I,D(W)):P(Object(W)).forEach(function(Z){Object.defineProperty(I,Z,T(W,Z))})}return I}var E=a.Cartesian3,N=function(G){var W=G.viewer,Z=new p.PointPopup(W),U={color:"#ffffff",font_family:"\u6977\u4F53",font_size:20,border:!![],border_color:"#000000",border_width:3,background:!![],background_color:"#000000",background_opacity:.5,scaleByDistance:!![],scaleByDistance_far:8e5,scaleByDistance_farValue:.5,scaleByDistance_near:1e3,scaleByDistance_nearValue:1,pixelOffset:[0,-15],disableDepthTestDistance:Number.POSITIVE_INFINITY},H=S.style2Entity({lineType:"dash",color:"red",outlineOpacity:"0",width:2}),V=S.style2Entity({color:"red",width:2});if(a.defined(G.label))for(var Y in G.label)Object.hasOwnProperty.call(G.label,Y)&&(U[Y]=G.label[Y]);var $="",K={visible:!![],id:"measureLayer",type:"geojson-draw"},J=W.shine.getLayer(K.id,"id");!J&&W.shine.addLayer(K);var Q=new g.Draw(W,{name:G.name||"measure",hasEdit:!![],removeScreenSpaceEvent:G.removeScreenSpaceEvent});Q.setEditLayer(K.id);var et;Q.on(i.DrawAddPoint,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Dt.showAddPointLength(et);break;case"area":Ct.showAddPointLength(et);break;case"volume":jt.showAddPointLength(et);break;case"height":ft.showAddPointLength(et);break;case"super_height":gt.showAddPointLength(et);break;case"angle":dt.showAddPointLength(et);break}}),Q.on(i.DrawRemovePoint,function(ot){switch($=ot.entity.attribute.attr.thisType,$){case"length":case"section":Dt.showRemoveLastPointLength(ot);break;case"area":Ct.showRemoveLastPointLength(ot);break;case"volume":jt.showRemoveLastPointLength(ot);break;case"height":ft.showRemoveLastPointLength(ot);break;case"super_height":gt.showRemoveLastPointLength(ot);break;case"angle":dt.showRemoveLastPointLength(ot);break}}),Q.on(i.DrawMouseMove,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Dt.showMoveDrawing(et);break;case"area":Ct.showMoveDrawing(et);break;case"volume":jt.showMoveDrawing(et);break;case"height":ft.showMoveDrawing(et);break;case"super_height":gt.showMoveDrawing(et);break;case"angle":dt.showMoveDrawing(et);break}}),Q.on(i.DrawCreated,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Dt.showDrawEnd(et);break;case"area":Ct.showDrawEnd(et);break;case"volume":jt.showDrawEnd(et);break;case"height":ft.showDrawEnd(et);break;case"super_height":gt.showDrawEnd(et);break;case"angle":dt.showDrawEnd(et);break;case"point":lt.showDrawEnd(et);break}et=null}),Q.on(i.EditMovePoint,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Dt.EditPoint(et);break;case"area":Ct.EditPoint(et);break;case"height":ft.EditPoint(et);break;case"point":lt.showDrawEnd(et);break}et=null}),Q.on(i.EditRemovePoint,function(ot){switch(et=ot.entity,$=ot.entity.attribute.attr.thisType,$){case"length":case"section":Dt.EditPoint(et);break;case"area":Ct.EditPoint(et);break;case"height":ft.EditPoint(et);break;case"point":lt.showDrawEnd(et);break}et=null}),Q.on(i.EditStart,function(ot){var it=ot.entity;$=ot.entity.attribute.attr.thisType;var yt=ot.entity.attribute.detailedMeasureType;switch($){case"length":{var Ot=Q.getPositions(ot.entity);if(Ot.length===2&&yt==="ctgDis"){var St=nt(it,Ot),Gt=(0,x.default)(St,3),Ht=Gt[0],Kt=Gt[1],Jt=Gt[2];it.hDragger=O.createDragger(st,{type:O.PointType.MoveHeight,position:E.midpoint(Kt,Jt,new E),onDrag:function(ie,oe){var he=a.Cartographic.fromCartesian(oe).height;it.dis=(he-Ht)*3,nt(it,Ot)}})}}break;case"default":break}}),Q.on(i.EditStop,function(ot){var it=ot.entity;$=ot.entity.attribute.attr.thisType;var yt=ot.entity.attribute.detailedMeasureType;switch($){case"length":yt==="ctgDis"&&(st.entities.remove(it.hDragger),it.hDragger=null);break;case"default":break}});function nt(ot,it){var yt,Ot,St,Gt,Ht=ot.dis||E.distance.apply(E,(0,f.default)(yt=(0,c.default)(it)).call(yt,[new E])),Kt=a.Cartographic.fromCartesian(it[0]),Jt=a.Cartographic.fromCartesian(it[1]);if(Ot=Math.max(Kt.height,Jt.height),St=E.fromRadians(Kt.longitude,Kt.latitude,Ot+Ht/3),Gt=E.fromRadians(Jt.longitude,Jt.latitude,Ot+Ht/3),ot.l0){ot.l0.polyline.positions=[it[0],St],ot.l1.polyline.positions=[it[1],Gt],ot.l2.polyline.positions=[St,Gt];var te=E.distance(St,Gt,new E);ot.hLabel.label.text="\u5E73\u9762\u95F4\u8DDD\uFF1A"+h.formatLength(te),ot.hLabel.position=E.midpoint(St,Gt,new E)}return ot.hDragger&&(ot.hDragger.position=E.midpoint(St,Gt,new E)),[Ot,St,Gt]}var st=Q.getDataSource();function ut(ot){Rt(),$="length",ot=ot||{},ot.type=$,Object.hasOwnProperty.call(ot,"terrain")||(ot.terrain=!![]),Dt.start(ot)}function rt(){Q.endDraw()}function ht(ot){Rt(),$="section",ot=ot||{},ot.type=$,ot.terrain=!![],ot.splitNum=a.defaultValue(ot.splitNum,6),Dt.start(ot)}function Pt(ot){Rt(),$="area",ot=ot||{},ot.type=$,Ct.start(ot)}function wt(ot){Rt(),$="volume",ot=ot||{},ot.type=$,jt.start(ot)}function At(ot){Rt(),ot=ot||{},Object.hasOwnProperty.call(ot,"isSuper")&&!ot.isSuper?($="height",ot.type=$,ft.start(ot)):($="super_height",ot.type=$,gt.start(ot))}function Nt(ot){Rt(),$="angle",ot=ot||{},ot.type=$,dt.start(ot)}function Lt(ot){Rt(),$="point",ot=ot||{},ot.type=$,lt.start(ot)}function Rt(){Dt.clearLastNoEnd(),Ct.clearLastNoEnd(),jt.clearLastNoEnd(),ft.clearLastNoEnd(),gt.clearLastNoEnd(),dt.clearLastNoEnd(),lt.clearLastNoEnd(),Q.stopDraw()}function Tt(){if(et!=null){switch($){case"length":case"section":Dt.showMoveDrawing(et);break;case"area":Ct.showMoveDrawing(et);break;case"height":ft.showMoveDrawing(et);break;case"super_height":gt.showMoveDrawing(et);break;case"angle":dt.showMoveDrawing(et);break}Q.endDraw(),et=null}}function mt(){$="",Rt(),Q.clearDraw()}function Ft(ot){Rt();var it=st.entities.getById(ot);it&&Q.deleteEntity(it)}function ct(ot){var it,yt,Ot=this,St=ot==null||(it=ot._id)===null||it===void 0?void 0:it.replace(/suffix\S*/,""),Gt=st==null?void 0:(0,v.default)(yt=(0,m.default)(st.entities)).call(yt,function(Ht){var Kt;return(0,s.default)(this,Ot),(0,o.default)(Kt=Ht.id).call(Kt,St)&&Ht.id!==St}.bind(this));return Gt}function vt(ot,it){var yt=(0,m.default)(st.entities);ot==="area"?Ct.options.unit=it:Dt.options.unit=it;for(var Ot in yt){var St=yt[Ot];if(St.label&&St.isMarsMeasureLabel&&St.attribute&&St.attribute.value){if(St.attribute.drawtype!==ot)continue;ot==="area"?St.label.text._value=(St.attribute.textEx||"")+h.formatArea(St.attribute.value,it):St._label.text._value=(St.attribute.textEx||"")+h.formatLength(St.attribute.value,it)}}}var Dt={options:null,arrLables:[],totalLable:null,disTerrainScale:1.2,clearLastNoEnd:function(){var it=this,yt=ct(this.totalLable);yt.forEach(function(Ot){(0,s.default)(this,it),st.entities.remove(Ot)}.bind(this)),this.totalLable=null,this.arrLables=[]},start:function(it){this.options=it;var yt=this.options.terrain?"ctgDis":"spatialDis";this.en=Q.startDraw({drawtype:"polyline",kzedit:![],config:{addHeight:it.addHeight},attr:{thisType:this.options.type},detailedMeasureType:yt,style:it.style||{color:"#FFFF00",width:3,clampToGround:this.options.type==="section"||this.options.terrain,depthFailMaterial:new a.Color.fromCssColorString("#FFFF00").withAlpha(.4)}});var Ot=n.style2Entity(U,{horizontalOrigin:a.HorizontalOrigin.LEFT,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_label",mark311:Q.id,label:Ot,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),this.arrLables=[]},showAddPointLength:function(it){var yt=Q.getPositions(it),Ot=n.style2Entity(U,{horizontalOrigin:a.HorizontalOrigin.LEFT,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:!![]}),St=st.entities.add({id:it.id+"suffix_"+yt.length+"label",mark311:Q.id,position:yt[yt.length-1],label:Ot,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}});if(yt.length===1)St.label.text="\u8D77\u70B9";else{var Gt=h.getLength(yt),Ht=h.formatLength(Gt,this.options.unit);St.label.text=Ht,St.attribute.value=Gt,h.getLength([yt[yt.length-2],yt[yt.length-1]])<5&&(St.show=![])}this.arrLables.push(St)},showRemoveLastPointLength:function(it){var yt=this.arrLables.pop();st.entities.remove(yt),this.showMoveDrawing(it.entity),this.totalLable.position=it.position},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length<2){this.totalLable.label.show=![];return}var Ot=h.getLength(yt),St=h.formatLength(Ot,this.options.unit);W.paid?this.totalLable.position=yt[yt.length-2]:this.totalLable.position=yt[yt.length-1],this.totalLable.label.text="\u603B\u957F:"+St,this.totalLable.label.show=!![],this.totalLable.attribute.value=Ot,this.totalLable.attribute.textEx="\u603B\u957F:",this.options.calback&&this.options.calback(St,Ot)},showDrawEnd:function(it){var yt=Q.getPositions(it),Ot=this.arrLables.length-yt.length;if(Ot>=0){for(var St,Gt=this.arrLables.length-1;Gt>=yt.length-1;Gt--)st.entities.remove(this.arrLables[Gt]);(0,u.default)(St=this.arrLables).call(St,yt.length-1,Ot+1)}if(it._totalLable=this.totalLable,it._arrLables=this.arrLables,this.totalLable=null,this.arrLables=[],it.polyline!=null){this.options.type==="section"?this.updateSectionForTerrain(it):this.options.terrain?this.updateLengthForTerrain(it):this.EditPoint(it);var Ht=it._totalLable.attribute.value,Kt=h.formatLength(Ht,this.options.unit);this.options.calbackresult&&this.options.calbackresult(Kt,it);var Jt=it.attribute.detailedMeasureType;if(yt.length===2&&Jt==="ctgDis"){if(!st.entities.getById(it.id+"suffix_l0")){it.l0=st.entities.add({id:it.id+"suffix_l0",polyline:L(L({},H),{},{depthFailMaterial:H.material})}),it.l1=st.entities.add({id:it.id+"suffix_l1",polyline:L(L({},H),{},{depthFailMaterial:H.material})}),it.l2=st.entities.add({id:it.id+"suffix_l2",polyline:L(L({},V),{},{depthFailMaterial:V.material})});var te=n.style2Entity(U,{distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:!![]});it.hLabel=st.entities.add({id:it.id+"suffix_hLabel",label:te})}nt(it,yt)}}},EditPoint:function(it){var yt=Q.getPositions(it),Ot=h.getLength(yt),St=h.formatLength(Ot,this.options.unit);it._totalLable.show=![];for(var Gt=0;Gt<it._positions_draw.length;Gt++){it._arrLables[Gt]&&(it._arrLables[Gt].show=![]);var Ht=n.style2Entity(U,{horizontalOrigin:a.HorizontalOrigin.LEFT,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),verticalOrigin:a.VerticalOrigin.BOTTOM,show:!![]}),Kt=st.entities.add({id:it.id+"suffix_"+a.createGuid()+"label",mark311:Q.id,position:yt[Gt],label:Ht,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),Jt=[];if(Gt===0)Kt.label.text="\u8D77\u70B9",this.arrLables.push(Kt);else if(Gt===it._positions_draw.length-1){Kt.label.text="\u603B\u957F:"+St;var te=h.getLength(yt);Kt.attribute.value=te,this.totalLable=Kt}else{Jt.push(yt[Gt-1]),Jt.push(yt[Gt]);var ie=h.getLength(Jt);Kt.attribute.value=ie,Kt.label.text=h.formatLength(ie,this.options.unit),this.arrLables.push(Kt)}}it._totalLable=this.totalLable,it._arrLables=this.arrLables,this.totalLable=null,this.arrLables=[];var oe=it.attribute.detailedMeasureType;if(oe==="ctgDis")if(yt.length===2){if(!st.entities.getById(it.id+"suffix_l0")){it.l0=st.entities.add({id:it.id+"suffix_l0",polyline:L(L({},H),{},{depthFailMaterial:H.material})}),it.l1=st.entities.add({id:it.id+"suffix_l1",polyline:L(L({},H),{},{depthFailMaterial:H.material})}),it.l2=st.entities.add({id:it.id+"suffix_l2",polyline:L(L({},V),{},{depthFailMaterial:V.material})});var he=n.style2Entity(U,{distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:!![]});it.hLabel=st.entities.add({id:it.id+"suffix_hLabel",label:he})}nt(it,yt),it.hDragger&&(it.hDragger.show=!![])}else st.entities.getById(it.id+"suffix_l0")&&(st.entities.removeById(it.id+"suffix_l0"),st.entities.removeById(it.id+"suffix_l1"),st.entities.removeById(it.id+"suffix_l2"),st.entities.removeById(it.id+"suffix_hLabel"),it.hDragger&&(it.hDragger.show=![]));this.options.type==="section"?this.updateSectionForTerrain(it):this.options.terrain&&this.updateLengthForTerrain(it),this.options.calback&&this.options.calback(St,Ot),this.options.calbackresult&&this.options.calbackresult(St,it)},updateLengthForTerrain:function(it){var yt=this,Ot=it.polyline.positions.getValue(W.clock.currentTime),St=it._arrLables,Gt=it._totalLable,Ht=Gt&&Gt.attribute&&Gt.attribute.unit;this.options.onStart&&this.options.onStart();var Kt=0,Jt=0;function te(){if(Kt++,Kt>=Ot.length&&Gt){var ie=h.formatLength(Jt,Ht);Gt.label.text="\u603B\u957F:"+ie,Gt.attribute.value=Jt,yt.options.calback&&yt.options.calback(ie,Jt),yt.options.calbackresult&&yt.options.calbackresult(ie,it),yt.options.onStop&&yt.options.onStop();return}var oe=[Ot[Kt-1],Ot[Kt]];(0,d.terrainPolyline)({viewer:W,positions:oe,splitNum:yt.options.splitNum,calback:function(ne,ce){var ge=h.getLength(ne);ce&&(ge=ge*yt.disTerrainScale);var Ae=St[Kt];if(Ae){var It=h.formatLength(ge,Ht);Ae.label.text=It,Ae.attribute.value=ge}Jt+=ge,te()}})}te()},updateSectionForTerrain:function(it){var yt=it.polyline.positions.getValue(W.clock.currentTime);if(yt.length<2)return;var Ot=it._arrLables,St=it._totalLable,Gt=St&&St.attribute&&St.attribute.unit,Ht=0,Kt=[],Jt=0,te=[],ie=[],oe=[],he=[];this.options.onStart&&this.options.onStart();var ne=this;function ce(){Ht++;var ge=[yt[Ht-1],yt[Ht]];(0,d.terrainPolyline)({viewer:W,positions:ge,splitNum:ne.options.splitNum,calback:function(It,Wt){Wt?Ht===1?Kt=(0,f.default)(Kt).call(Kt,ge):Kt=(0,f.default)(Kt).call(Kt,[yt[Ht]]):Kt=(0,f.default)(Kt).call(Kt,It);for(var _t=a.Cartographic.fromCartesian(yt[Ht-1]).height,ee=a.Cartographic.fromCartesian(yt[Ht]).height,re=(ee-_t)/It.length,de=0;de<It.length;de++){de!==0&&(Jt+=E.distance(It[de],It[de-1])),te.push(Number(Jt.toFixed(1)));var Se=(0,d.formatPosition)(It[de]);ie.push(Se.z),he.push(Se);var Pe=Number((_t+re*de).toFixed(1));oe.push(Pe)}if(Ht>=yt.length-1){var De=h.getLength(Kt),Ie=h.formatLength(De,Gt);St&&(St.label.text="\u603B\u957F:"+Ie,St.attribute.value=De),ne.options.calback&&ne.options.calback({distancestr:Ie,distance:De,arrLen:te,arrLX:oe,arrHB:ie,arrPoint:he,id:it?.id}),ne.options.onStop&&ne.options.onStop()}else{var pe=h.getLength(It),Oe=h.formatLength(pe,Gt),Ne=Ot[Ht];Ne.label.text=Oe,Ne.attribute.value=pe,ce()}}})}ce()}},Ct={options:null,totalLable:null,clearLastNoEnd:function(){this.totalLable!=null&&st.entities.remove(this.totalLable),this.totalLable=null},start:function(it){this.options=it,this.en=Q.startDraw({drawtype:"polygon",kzedit:![],detailedMeasureType:"measureArea",attr:{thisType:this.options.type},style:it.style||{color:"#00fff2",outline:!![],outlineColor:"#fafa5a",outlineWidth:1,opacity:.4,clampToGround:!![]}});var yt=n.style2Entity(L(L({},U),{},{clampToGround:!![]}),{horizontalOrigin:a.HorizontalOrigin.CENTER,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_label",mark311:Q.id,label:yt,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}})},showAddPointLength:function(it){this.showMoveDrawing(it)},showRemoveLastPointLength:function(it){var yt=Q.getPositions(it.entity);yt.length<3&&(this.totalLable.label.show=![])},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length<3){this.totalLable.label.show=![];return}var Ot=h.getArea(yt),St=h.formatArea(Ot,this.options.unit),Gt=(0,d.centerOfMass)(yt);this.totalLable.position=Gt,this.totalLable.label.text="\u9762\u79EF:"+St,this.totalLable.label.show=!![],this.totalLable.attribute.value=Ot,this.totalLable.attribute.textEx="\u9762\u79EF:",this.options.calback&&this.options.calback(St,Ot)},showDrawEnd:function(it){if(it.polygon!=null){it._totalLable=this.totalLable,this.totalLable=null;var yt=it._totalLable.attribute.value,Ot=h.formatArea(yt,this.options.unit);this.options.calbackresult&&this.options.calbackresult(Ot,it)}},EditPoint:function(it){var yt=Q.getPositions(it),Ot=h.getArea(yt),St=h.formatArea(Ot,this.options.unit),Gt=(0,d.centerOfMass)(yt);it._totalLable.position._value=Gt,it._totalLable.label.text="\u9762\u79EF:"+St,it._totalLable.label.show=!![],it._totalLable.attribute.value=Ot,it._totalLable.attribute.textEx="\u9762\u79EF:",this.options.calback&&this.options.calback(St,Ot),this.options.calbackresult&&this.options.calbackresult(St,it)}},jt={options:null,totalLable:null,prevEntity:null,clearLastNoEnd:function(){this.totalLable!=null&&st.entities.remove(this.totalLable),this.totalLable=null,this.prevEntity!=null&&st.entities.remove(this.prevEntity),this.prevEntity=null},start:function(it){this.options=it;var yt=n.style2Entity(U,{horizontalOrigin:a.HorizontalOrigin.CENTER,verticalOrigin:a.VerticalOrigin.BOTTOM,show:![]});this.totalLable=st.entities.add({label:yt,mark311:Q.id,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),Q.startDraw({drawtype:"polygon",kzedit:![],style:it.style||{color:"#00fff2",outline:!![],outlineColor:"#fafa5a",outlineWidth:1,opacity:.4,clampToGround:!![]}})},showAddPointLength:function(){},showRemoveLastPointLength:function(){},showMoveDrawing:function(){},showDrawEnd:function(it){if(it.polygon!=null){var yt=w.getPositions(it),Ot=this.computeCutVolume(yt),St=Ot.maxHeight,Gt=Ot.totalCutVolume,Ht=Gt.toFixed(2)+"\u7ACB\u65B9\u7C73",Kt=(0,d.centerOfMass)(yt,St+10);this.totalLable.position=Kt,this.totalLable.label.text="\u6316\u65B9\u4F53\u79EF:"+Ht,this.totalLable.label.show=!![],this.totalLable.attribute.value=Gt,this.totalLable.attribute.textEx="\u6316\u65B9\u4F53\u79EF:";var Jt="";this.options.calback&&this.options.calback(Jt,Gt),st.entities.remove(it),it=st.entities.add({mark311:Q.id,polygon:{hierarchy:{positions:yt},extrudedHeight:St,closeTop:![],closeBottom:![],material:new a.Color.fromCssColorString("#00fff2").withAlpha(.5),outline:!![],outlineColor:new a.Color.fromCssColorString("#fafa5a").withAlpha(.4),outlineWidth:1}}),it._totalLable=this.totalLable,this.totalLable=null}},computeCutVolume:function(it){for(var yt=15e3,Ot=0;Ot<it.length;Ot++){var St=a.Cartographic.fromCartesian(it[Ot]),Gt=W.scene.globe.getHeight(St);yt>Gt&&(yt=Gt)}var Ht=Math.PI/Math.pow(2,11);Ht=Ht/64;for(var Kt=new a.PolygonGeometry.fromPositions({positions:it,vertexFormat:a.PerInstanceColorAppearance.FLAT_VERTEX_FORMAT,granularity:Ht}),Jt=new a.PolygonGeometry.createGeometry(Kt),te=0,ie=0,oe,he,ne,ce,ge,Ae,It,Wt,_t,ee,re,de=0;de<Jt.indices.length;de+=3){oe=Jt.indices[de],he=Jt.indices[de+1],ne=Jt.indices[de+2],_t=new E((0,m.default)(Jt.attributes.position)[oe*3],(0,m.default)(Jt.attributes.position)[oe*3+1],(0,m.default)(Jt.attributes.position)[oe*3+2]),ee=a.Cartographic.fromCartesian(_t),ce=W.scene.globe.getHeight(ee),It=E.fromRadians(ee.longitude,ee.latitude,0),ie<ce&&(ie=ce),_t=new E((0,m.default)(Jt.attributes.position)[he*3],(0,m.default)(Jt.attributes.position)[he*3+1],(0,m.default)(Jt.attributes.position)[he*3+2]),ee=a.Cartographic.fromCartesian(_t),ge=W.scene.globe.getHeight(ee);var Se=E.fromRadians(ee.longitude,ee.latitude,0);ie<ge&&(ie=ge),_t=new E((0,m.default)(Jt.attributes.position)[ne*3],(0,m.default)(Jt.attributes.position)[ne*3+1],(0,m.default)(Jt.attributes.position)[ne*3+2]),ee=a.Cartographic.fromCartesian(_t),Ae=W.scene.globe.getHeight(ee),Wt=E.fromRadians(ee.longitude,ee.latitude,0),ie<Ae&&(ie=Ae),re=this.computeAreaOfTriangle(It,Se,Wt),te=te+re*(ce-yt+ge-yt+Ae-yt)/3}return{maxHeight:ie,totalCutVolume:te}},computeAreaOfTriangle:function(it,yt,Ot){var St=E.distance(it,yt),Gt=E.distance(yt,Ot),Ht=E.distance(Ot,it),Kt=(St+Gt+Ht)/2;return Math.sqrt(Kt*(Kt-St)*(Kt-Gt)*(Kt-Ht))}},zt,Yt,Zt,ft={options:null,totalLable:null,_arrLables:null,exline1:null,exline2:null,clearLastNoEnd:function(){var it=this;if(this.totalLable!=null){var yt=ct(this.totalLable);yt.forEach(function(Ot){(0,s.default)(this,it),st.entities.remove(Ot)}.bind(this)),this.exline1=this.exline2=this.exline3=null,this.totalLable=null}},start:function(it){this.options=it,this.en=Q.startDraw({drawtype:"polyline",kzedit:![],config:{maxPointNum:2},detailedMeasureType:"measureHeight",attr:{thisType:this.options.type},style:it.style||{lineType:"dash",color:"#FFFF00",outlineOpacity:"0",width:3,clampToGround:![],depthFailMaterial:new a.Color.fromCssColorString("#FFFF00").withAlpha(.4)}});var yt=n.style2Entity(U,{pixelOffset:new a.Cartesian2(0,0),distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_label",mark311:Q.id,label:yt,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),this.exline1=st.entities.add({id:this.en.id+"suffix_exline1",polyline:L(L({},H),{},{depthFailMaterial:H.material})}),this.exline2=st.entities.add({id:this.en.id+"suffix_exline2",polyline:L(L({},H),{},{depthFailMaterial:H.material})}),this.exline3=st.entities.add({id:this.en.id+"suffix_exline3",polyline:L(L({},V),{},{depthFailMaterial:V.material})})},showAddPointLength:function(it){this.showMoveDrawing(it)},showRemoveLastPointLength:function(){this.totalLable&&(this.totalLable.label.show=![],this.exline1.polyline.show=this.exline2.polyline.show=this.exline3.polyline.show=![])},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length<2){this.totalLable.label.show=![],this.exline1.polyline.show=this.exline2.polyline.show=this.exline3.polyline.show=![],zt=Yt=Zt=null;return}!zt&&(zt=a.Transforms.eastNorthUpToFixedFrame(yt[0]),Yt=a.Matrix4.inverse(zt,new a.Matrix4),Zt=function(Ae){return a.Matrix4.multiplyByPoint(Yt,Ae,new E)});var Ot=a.Cartographic.fromCartesian(yt[0]),St=a.Cartographic.fromCartesian(yt[1]),Gt=Math.abs(St.height-Ot.height),Ht=h.formatLength(Gt,this.options.unit);this.totalLable.label.text="\u9AD8\u5EA6\u5DEE:"+Ht,this.totalLable.label.show=!![],this.totalLable.attribute.value=Gt,this.totalLable.attribute.textEx="\u9AD8\u5EA6\u5DEE:";var Kt,Jt,te,ie,oe;Jt=Zt(yt[1]);var he=E.magnitude(Jt)/5,ne=E.normalize(new E(-Jt.x,-Jt.y,0),new E);te=E.multiplyByScalar(ne,he,new E),te.z=Jt.z,Kt=E.multiplyByScalar(ne,he,new E),ie=E.midpoint(new E(0,0,Jt.z),te,new E),oe=new E(Kt.x/2,Kt.y/2,0),Kt=a.Matrix4.multiplyByPoint(zt,Kt,new E),te=a.Matrix4.multiplyByPoint(zt,te,new E),ie=a.Matrix4.multiplyByPoint(zt,ie,new E),oe=a.Matrix4.multiplyByPoint(zt,oe,new E),this.exline1.polyline.show=this.exline2.polyline.show=this.exline3.polyline.show=!![],this.exline1.polyline.positions=[yt[0],Kt],this.exline2.polyline.positions=[yt[1],te],this.exline3.polyline.positions=[ie,oe];var ce=E.midpoint(ie,oe,new E);this.totalLable.position=ce,this.options.calback&&this.options.calback(Ht,Gt)},showDrawEnd:function(it){it._totalLable=this.totalLable,it._arrLables=[this.exline1,this.exline2,this.exline3],this.totalLable=null,this.exline1=this.exline2=this.exline3=null;var yt=Math.abs(it._totalLable.attribute.value),Ot=h.formatLength(yt,this.options.unit);this.options.calbackresult&&this.options.calbackresult(Ot,it)},EditPoint:function(it){var yt=Q.getPositions(it),Ot=a.Cartographic.fromCartesian(yt[0]),St=a.Cartographic.fromCartesian(yt[1]),Gt=Math.abs(St.height-Ot.height),Ht=h.formatLength(Gt,this.options.unit);it._totalLable.label.text="\u9AD8\u5EA6\u5DEE:"+Ht,it._totalLable.label.show=!![],it._totalLable.attribute.value=Gt,it._totalLable.attribute.textEx="\u9AD8\u5EA6\u5DEE:",zt=a.Transforms.eastNorthUpToFixedFrame(yt[0]),Yt=a.Matrix4.inverse(zt,new a.Matrix4),Zt=function(Ae){return a.Matrix4.multiplyByPoint(Yt,Ae,new E)};var Kt,Jt,te,ie,oe;Jt=Zt(yt[1]);var he=E.magnitude(Jt)/5,ne=E.normalize(new E(-Jt.x,-Jt.y,0),new E);te=E.multiplyByScalar(ne,he,new E),te.z=Jt.z,Kt=E.multiplyByScalar(ne,he,new E),ie=E.midpoint(new E(0,0,Jt.z),te,new E),oe=new E(Kt.x/2,Kt.y/2,0),Kt=a.Matrix4.multiplyByPoint(zt,Kt,new E),te=a.Matrix4.multiplyByPoint(zt,te,new E),ie=a.Matrix4.multiplyByPoint(zt,ie,new E),oe=a.Matrix4.multiplyByPoint(zt,oe,new E),it._arrLables[0].polyline.positions=[yt[0],Kt],it._arrLables[1].polyline.positions=[yt[1],te],it._arrLables[2].polyline.positions=[ie,oe];var ce=E.midpoint(ie,oe,new E);it._totalLable.position=ce,this.options.calback&&this.options.calback(Ht,Gt),this.options.calbackresult&&this.options.calbackresult(Ht,it)}},gt={options:null,totalLable:null,xLable:null,hLable:null,exline:null,clearLastNoEnd:function(){var it=this,yt=ct(this.totalLable);yt.forEach(function(Ot){(0,s.default)(this,it),st.entities.remove(Ot)}.bind(this)),this.totalLable=null,this.xLable=null,this.hLable=null},start:function(it){this.options=it,this.en=Q.startDraw({drawtype:"polyline",kzedit:!![],config:{maxPointNum:2},detailedMeasureType:"superHeight",attr:{thisType:this.options.type},style:it.style||{color:"#FFFF00",width:3,clampToGround:![],depthFailMaterial:new a.Color.fromCssColorString("#FFFF00").withAlpha(.4)}});var yt=n.style2Entity(U,{horizontalOrigin:a.HorizontalOrigin.RIGHT,verticalOrigin:a.VerticalOrigin.CENTER,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_total_label",mark311:Q.id,label:yt,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}});var Ot=n.style2Entity(U,{horizontalOrigin:a.HorizontalOrigin.CENTER,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});Ot.pixelOffset=new a.Cartesian2(0,0),this.xLable=st.entities.add({id:this.en.id+"suffix_x_label",mark311:Q.id,label:Ot,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),this.hLable=st.entities.add({id:this.en.id+"suffix_h_label",mark311:Q.id,label:Ot,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),Q._hasEdit=![]},showAddPointLength:function(it){var yt=Q.getPositions(it);if(yt.length===4){var Ot=yt[3].clone();yt.pop(),yt.pop(),yt.pop(),yt.push(Ot)}if(yt.length===2){var St=this.getZHeightPosition(yt[0],yt[1]),Gt=this.getHDistance(yt[0],yt[1]);Gt>3&&(yt.push(St),yt.push(yt[0]))}this.showSuperHeight(yt)},showRemoveLastPointLength:function(it){var yt=Q.getPositions(it.entity);yt.length===2&&(yt.pop(),yt.pop(),this.totalLable.label.show=![],this.hLable.label.show=![],this.xLable.label.show=![])},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length===4){var Ot=yt[3].clone();yt.pop(),yt.pop(),yt.pop(),yt.push(Ot)}if(yt.length===2){var St=this.getZHeightPosition(yt[0],yt[1]),Gt=this.getHDistance(yt[0],yt[1]);Gt>3&&(yt.push(St),yt.push(yt[0]))}this.showSuperHeight(yt)},showDrawEnd:function(it){it._arrLables=[this.totalLable,this.hLable,this.xLable],it._exline=this.exline,this.totalLable=null,this.hLable=null,this.xLable=null,this.exline=null;var yt=h.formatLength(it._arrLables[0].attribute.value,this.options.unit);this.options.calbackresult&&this.options.calbackresult(yt,it),Q._hasEdit=!![]},showSuperHeight:function(it){var yt,Ot,St,Gt;if(it.length===4){var Ht=E.midpoint(it[0],it[1],new E),Kt,Jt,te=a.Cartographic.fromCartesian(it[0]),ie=a.Cartographic.fromCartesian(it[1]),oe=a.Cartographic.fromCartesian(it[2]),he=ie.height-oe.height;Gt=ie.height-te.height,St=E.distance(it[0],it[1]);var ne=E.distance(it[0],it[2]),ce=E.distance(it[1],it[2]),ge=Math.min(ne,ce),Ae=E.normalize(E.subtract(it[0],it[2],new E),new E),It=E.normalize(E.subtract(it[1],it[2],new E),new E),Wt=E.add(it[2],E.multiplyByScalar(Ae,ge/8,new E),new E),_t=E.add(it[2],E.multiplyByScalar(It,ge/8,new E),new E),ee=E.add(Wt,E.multiplyByScalar(It,ge/8,new E),new E);this.exline?this.exline.polyline.positions=[Wt,ee,_t]:this.exline=st.entities.add({polyline:{positions:[Wt,ee,_t],width:5,material:a.Color.YELLOW}}),Gt>-1&&Gt<1?(Jt=it[1],this.updateSuperHeightLabel(this.totalLable,Jt,"\u9AD8\u5EA6\u5DEE:",Gt),this.updateSuperHeightLabel(this.hLable,Ht,"\u7A7A\u95F4\u5DEE:",St),yt=Gt):(he>-.1&&he<.1?(Kt=E.midpoint(it[2],it[1],new E),Jt=E.midpoint(it[2],it[3],new E),Ot=E.distance(it[1],it[2]),yt=E.distance(it[3],it[2])):(Jt=E.midpoint(it[2],it[1],new E),Kt=E.midpoint(it[2],it[3],new E),Ot=E.distance(it[3],it[2]),yt=E.distance(it[1],it[2])),this.updateSuperHeightLabel(this.totalLable,Jt,"\u9AD8\u5EA6\u5DEE:",yt),this.updateSuperHeightLabel(this.xLable,Kt,"\u6C34\u5E73\u5DEE:",Ot),this.updateSuperHeightLabel(this.hLable,Ht,"\u7A7A\u95F4\u5DEE:",St))}else if(it.length===2){yt=E.distance(it[1],it[0]);var re=E.midpoint(it[0],it[1],new E);this.xLable&&this.xLable.label.show&&(this.xLable.label.show=![],this.hLable.label.show=![]),this.updateSuperHeightLabel(this.totalLable,re,"\u9AD8\u5EA6\u5DEE:",yt)}var de=h.formatLength(yt,this.options.unit);this.options.calback&&this.options.calback(de,yt)},updateSuperHeightLabel:function(it,yt,Ot,St){it!=null&&(it.position=yt,it.label.text=Ot+h.formatLength(St,this.options.unit),it.label.show=!![],it.attribute.value=St,it.attribute.textEx=Ot)},getZHeightPosition:function(it,yt){var Ot=a.Cartographic.fromCartesian(it),St=Number(a.Math.toDegrees(Ot.longitude)),Gt=Number(a.Math.toDegrees(Ot.latitude)),Ht=Number(Ot.height.toFixed(2)),Kt=a.Cartographic.fromCartesian(yt),Jt=Number(a.Math.toDegrees(Kt.longitude)),te=Number(a.Math.toDegrees(Kt.latitude)),ie=Number(Kt.height.toFixed(2));return Ht>ie?E.fromDegrees(Jt,te,Ht):E.fromDegrees(St,Gt,ie)},getHDistance:function(it,yt){var Ot=this.getZHeightPosition(it,yt),St=a.Cartographic.fromCartesian(yt),Gt=a.Cartographic.fromCartesian(Ot),Ht=E.distance(it,Ot);return Math.abs(Number(Gt.height)-Number(St.height))<.01&&(Ht=E.distance(yt,Ot)),Ht}},dt={options:null,totalLable:null,exLine:null,exLineArrow:null,exLineText:null,clearLastNoEnd:function(){var it=this,yt=ct(this.totalLable);yt.forEach(function(Ot){(0,s.default)(this,it),st.entities.remove(Ot)}.bind(this)),this.totalLable=this.exLine=this.exLineArrow=this.exLineText=null},start:function(it){this.options=it,this.en=Q.startDraw({drawtype:"polyline",kzedit:!![],config:{maxPointNum:2},detailedMeasureType:"measureAngle",attr:{thisType:this.options.type},style:it.style||{lineType:"arrow",color:"#FFFF00",width:9,clampToGround:!![],depthFailMaterial:new a.Color.fromCssColorString("#FFFF00").withAlpha(.4)}});var yt=n.style2Entity(U,{horizontalOrigin:a.HorizontalOrigin.LEFT,verticalOrigin:a.VerticalOrigin.BOTTOM,distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4),show:![]});this.totalLable=st.entities.add({id:this.en.id+"suffix_label",mark311:Q.id,label:yt,isMarsMeasureLabel:!![],_noMousePosition:!![],attribute:{unit:this.options.unit,type:this.options.type}}),Q._hasEdit=![]},showAddPointLength:function(it){this.showMoveDrawing(it)},showRemoveLastPointLength:function(){this.exLine&&(this.exLine.polyline.show=![]),this.totalLable&&(this.totalLable.label.show=![]),this.exLineArrow&&(this.exLineArrow.polyline.show=![]),this.exLineText&&(this.exLineText.label.show=![])},showMoveDrawing:function(it){var yt=Q.getPositions(it);if(yt.length<2){this.totalLable.label.show=![];return}var Ot=E.distance(yt[0],yt[1]),St=h.getAngle(yt[0],yt[1]),Gt=(0,y.getRotateCenterPoint)(yt[0],yt[1],-St);this.updateExLine([yt[0],Gt]);var Ht;if(0<St&&St<45)Ht="\u6B63\u5317\u504F\u4E1C"+St+"\xB0";else if(45<St&&St<90)Ht="\u6B63\u4E1C\u504F\u5317"+(90-St)+"\xB0";else if(90<St&&St<135)Ht="\u6B63\u4E1C\u504F\u5357"+(St-90)+"\xB0";else if(135<St&&St<180)Ht="\u6B63\u5357\u504F\u4E1C"+(180-St)+"\xB0";else if(-180<St&&St<-135)Ht="\u6B63\u5357\u504F\u897F"+(St+180)+"\xB0";else if(-135<St&&St<-90)Ht="\u6B63\u897F\u504F\u5357"+(-St-90)+"\xB0";else if(-90<St&&St<-45)Ht="\u6B63\u897F\u504F\u5317"+(90+St)+"\xB0";else if(-45<St&&St<0)Ht="\u6B63\u5317\u504F\u897F"+-St+"\xB0";else switch(St){case 0:Ht="\u6B63\u5317";break;case 45:Ht="\u6B63\u4E1C\u5317";break;case 90:Ht="\u6B63\u4E1C";break;case 135:Ht="\u6B63\u4E1C\u897F";break;case 180:Ht="\u6B63\u5357";break;case-180:Ht="\u6B63\u5357";break;case-135:Ht="\u6B63\u897F\u5357";break;case-90:Ht="\u6B63\u897F";break;case-45:Ht="\u6B63\u897F\u5317";break}this.totalLable.position=yt[1],this.totalLable.label.text="\u65B9\u4F4D\uFF1A"+Ht+`
\u89D2\u5EA6\uFF1A`+St+`\xB0
\u8DDD\u79BB\uFF1A`+h.formatLength(Ot),this.totalLable.label.show=!![],this.totalLable.attribute.value=Ht,this.totalLable.attribute.textEx="\u89D2\u5EA6:",this.options.calback&&this.options.calback(St+"\xB0",St)},updateExLine:function(it){var yt=E.multiplyByScalar(E.subtract(it[1],it[0],new E),.1,new E),Ot=E.add(it[1],yt,new E);if(this.exLine)this.exLine.polyline.show=!![],this.exLine.polyline.positions.setValue(it),this.exLineArrow.polyline.positions.setValue([it[1],Ot]),this.exLineText.position=it[1];else{this.exLineArrow=st.entities.add({id:this.en.id+"suffix_exLineArrow",mark311:Q.id,polyline:{positions:[it[1],Ot],width:8,clampToGround:!![],material:new a.PolylineArrowMaterialProperty(a.Color.RED)}});var St=n.style2Entity(L(L({},U),{},{font_size:14,background:![],color:"red",text:"\u5317",pixelOffset:[7,0]}),{distanceDisplayCondition:new a.DistanceDisplayCondition(0,5e4)});this.exLineText=st.entities.add({id:this.en.id+"suffix_exLineText",mark311:Q.id,position:it[1],label:St}),this.exLine=st.entities.add({id:this.en.id+"suffix_exLine",mark311:Q.id,polyline:{positions:it,width:3,clampToGround:!![],material:new a.PolylineDashMaterialProperty({color:a.Color.RED})}})}},showDrawEnd:function(it){it._totalLable=this.totalLable,it._exline=this.exLine,it._arrLables=[this.exLineArrow,this.exLineText],this.totalLable=null,this.exLine=null,this.exLineArrow=null,this.exLineText=null;var yt=it._totalLable.attribute.value;this.options.calbackresult&&this.options.calbackresult(yt,it),Q._hasEdit=!![]}},lt={options:null,totalLable:null,clearLastNoEnd:function(){},start:function(it){this.options=it;var yt=(0,l.default)({pixelSize:10,color:"#3388ff",opacity:1,outline:!![],outlineColor:"#ffffff",outlineOpacity:.6,outlineWidth:2,scaleByDistance:![],scaleByDistance_far:1e6,scaleByDistance_farValue:.1,scaleByDistance_near:1e3,scaleByDistance_nearValue:1,distanceDisplayCondition:![],distanceDisplayCondition_far:1e4,distanceDisplayCondition_near:0,clampToGround:![],visibleDepth:!![]},it.style);Q.startDraw({drawtype:"point",detailedMeasureType:"measurePoint",attr:{thisType:this.options.type},style:yt})},showDrawEnd:function(it){var yt,Ot,St=Q.getPositions(it)[0],Gt=(0,d.formatPosition)(St),Ht=h.formatDegree(Gt.x),Kt=h.formatDegree(Gt.y),Jt=(0,f.default)(yt=(0,f.default)(Ot=`<div class="mars-popup-titile">\u5750\u6807\u6D4B\u91CF</div>
                <div class="mars-popup-content">
                    <div><label>\u7ECF\u5EA6</label>`.concat(Ht,`</div>
                    <div><label>\u7EAC\u5EA6</label>`)).call(Ot,Kt,`</div>
                    <div><label>\u6D77\u62D4</label>`)).call(yt,Gt.z,`\u7C73</div>
                </div>`);it.popup={html:Jt,anchor:[0,-15]},Z._isOnly=![],Z.show(it),it.movepoint=!![],this.options.calbackresult&&this.options.calbackresult("<label>\u6D77\u62D4</label>".concat(Gt.z,"\u7C73"),it)}};return{_popup:Z,dataSource:st,clearMeasureById:Ft,getAuxiliaryEnities:ct,measureLength:ut,measureHeight:At,measureArea:Pt,measureAngle:Nt,paidStop:rt,measureVolume:wt,measureSection:ht,measurePoint:Lt,updateUnit:vt,clearMeasure:mt,formatArea:h.formatArea,formatLength:h.formatLength,draw:function(){return Q},endDraw:Tt}};z.Measure=N},59039:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.PointPopup=void 0;var D=T(e(29870)),b=T(e(22777)),C=T(e(42762)),f=r(e(87647)),v=T(e(63379)),m=r(e(92672)),o=r(e(80823)),u=e(31984);function l(c){if(typeof R!="function")return null;var x=new R,a=new R;return(l=function(n){return n?a:x})(c)}function r(c,x){if(!x&&c&&c.__esModule)return c;if(c===null||F(c)!=="object"&&typeof c!="function")return{default:c};var a=l(x);if(a&&a.has(c))return a.get(c);var i={},n=Object.defineProperty&&A;for(var h in c)if(h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)){var g=n?A(c,h):null;g&&(g.get||g.set)?Object.defineProperty(i,h,g):i[h]=c[h]}return i.default=c,a&&a.set(c,i),i}var s=function(){function c(x,a){(0,b.default)(this,c),this.viewer=x,this.options=a||{},this._isOnly=!![],this._enable=!![],this.pickOpen=![],this._depthTest=!![],this.viewerid=x._container.id,this.popupShow=!![],this.objPopup={},this._pickFeatureProperties=void 0,this._pickType=0,this.identifyTasks3d=[],this.highlighted={feature:void 0,originalColor:new f.Color},this.defaultHighlightedClrCss="#ff0000",this.getPopupForConfig=o.getPopupForConfig,this.getPopup=o.getPopup,this.currentEleId=void 0,this.result=void 0;var i='<div id="'+this.viewerid+'pupup-all-view" ></div>',n='<div id="'+this.viewerid+'mypupup-all-view" ></div>';(0,v.default)("#"+this.viewerid).append(i),(0,v.default)("#"+this.viewerid).append(n),this.viewer.scene.postRender.addEventListener(this.bind2scene,this)}return(0,C.default)(c,[{key:"show",value:function(a,i,n){if(!(a==null||a.popup==null)){!i&&(i=(0,u.getCenterPosition)(a));var h=a.billboard||a.label||a.point||a.model;h&&h.heightReference&&(i=this.getPositionValue(i),h.heightReference._value===f.HeightReference.CLAMP_TO_GROUND?i=m.updateHeightForClampToGround(this.viewer,i):h.heightReference._value===f.HeightReference.RELATIVE_TO_GROUND&&(i=m.updateHeightForClampToGround(this.viewer,i,!![])));var g=this.getPopupId(a);this.close(g),this.objPopup[g]={id:a.id,popup:a.popup,entity:a,cartesian:i,viewPoint:n};var d;if((0,D.default)(a.popup)==="object"?d=a.popup.html:d=a.popup,!!d){var y=this;typeof d=="function"&&(d=d(a,i,function(p){y._showHtml(p,g,a,i,n)})),d&&this._showHtml(d,g,a,i,n)}}}},{key:"_showHtml",value:function(a,i,n,h,g){(0,v.default)("#"+this.viewerid+"pupup-all-view").append('<div id="'+i+'" class="cesium-popup">            <a id="'+i+'-popup-close" data-id="'+i+'" class="cesium-popup-close-button cesium-popup-color" >\xD7</a>            <div class="cesium-popup-content-wrapper cesium-popup-background">                <div class="cesium-popup-content cesium-popup-color">'+a+'</div>            </div>            <div class="cesium-popup-tip-container"><div class="cesium-popup-tip cesium-popup-background"></div></div>        </div>'),(0,v.default)("#"+i)[0].style.zIndex=0;var d=this;(0,v.default)("#"+i+"-popup-close").click(function(){var p=(0,v.default)(this).attr("data-id");d.close(p,!![]);try{n.entityCollection.remove(n)}catch{M.error("")}});var y=this.updateViewPoint(i,h,n.popup,g);!y&&this._depthTest&&this.close(i)}},{key:"getPositionValue",value:function(a){if(!a)return a;var i;return a instanceof f.Cartesian3?i=a:typeof a.getValue=="function"?i=a.getValue(this.viewer.clock.currentTime):a._value&&a._value instanceof f.Cartesian3&&(i=a._value),i}},{key:"updateViewPoint",value:function(a,i,n,h){var g=this.getPositionValue(i);if(!f.defined(g))return![];var d=f.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,g);if(f.defined(d)&&(h=d,this.objPopup[a]&&(this.objPopup[a].viewPoint=d)),!f.defined(h))return M.error("wgs84ToWindowCoordinates\u65E0\u6CD5\u8F6C\u6362\u4E3A\u5C4F\u5E55\u5750\u6807"),![];var y=this.viewer.scene;if(this._depthTest&&y.mode===f.SceneMode.SCENE3D){var p=y.camera.getPickRay(h),w=y.globe.pick(p,y);if(w){var S=f.Cartesian3.distance(g,w);if(S>1e3*1e3)return![]}}if((typeof n>"u"?"undefined":(0,D.default)(n))==="object"&&n.timeRender&&n.html&&typeof n.html=="function"){var O=n.html(this.objPopup[a]&&this.objPopup[a].entity,g);(0,v.default)("#"+a+" .cesium-popup-content").html(O)}var B=(0,v.default)("#"+a),k=h.x-B.width()/2,P=h.y-B.height();return n&&(typeof n>"u"?"undefined":(0,D.default)(n))==="object"&&n.anchor&&(k+=n.anchor[0],P+=n.anchor[1]),B.css("transform","translate3d("+k+"px,"+P+"px, 0)"),!![]}},{key:"bind2scene",value:function(){for(var a in this.objPopup)if(Object.hasOwnProperty.call(this.objPopup,a)){var i=this.objPopup[a],n=i.entity instanceof f.Entity;if(n&&!i.entity.entityCollection.contains(i.entity)){i.entity=null,this.close(a);continue}i.cartesian=i.entity.position.getValue(),this.updateViewPoint(a,i.cartesian,i.popup,i.viewPoint)}}},{key:"getPopupId",value:function(a){return this.viewerid+"popup_"+((a.id||"")+"").replace(new RegExp("[^0-9a-zA-Z_]","gm"),"_")}},{key:"close",value:function(a){if(!this._isOnly&&a){(typeof a>"u"?"undefined":(0,D.default)(a))==="object"&&(a=this.getPopupId(a));for(var i in this.objPopup)if(Object.hasOwnProperty.call(this.objPopup,i)&&(a===this.objPopup[i].id||a===i)){(0,v.default)("#"+i).remove(),delete this.objPopup[i];break}}else(0,v.default)("#"+this.viewerid+"pupup-all-view").empty(),this.objPopup={}}},{key:"destroy",value:function(){this.close(),this.viewer.scene.postRender.removeEventListener(this.bind2scene,this),(0,v.default)("#"+this.viewerid+"pupup-all-view").remove()}},{key:"isOnly",get:function(){return this._isOnly},set:function(a){this._isOnly=a}},{key:"enable",get:function(){return this._enable},set:function(a){this._enable=a,!a&&this.close()}},{key:"depthTest",get:function(){return this._depthTest},set:function(a){this._depthTest=a}}]),c}();z.PointPopup=s},45192:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var A=D(e(87647));function T(v){if(typeof F!="function")return null;var m=new F,o=new F;return(T=function(l){return l?o:m})(v)}function D(v,m){if(!m&&v&&v.__esModule)return v;if(v===null||M(v)!=="object"&&typeof v!="function")return{default:v};var o=T(m);if(o&&o.has(v))return o.get(v);var u={},l=Object.defineProperty&&R;for(var r in v)if(r!=="default"&&Object.prototype.hasOwnProperty.call(v,r)){var s=l?R(v,r):null;s&&(s.get||s.set)?Object.defineProperty(u,r,s):u[r]=v[r]}return u.default=v,o&&o.set(v,u),u}function b(v,m,o){var u=v._gl;this.id=m,this._size=o.imageBuffer.length,this._context=v,this._width=o.width,this._height=o.height,this._texture=null,this._internalFormat=o.internalFormat,this._wrapS=A.defaultValue(o.wrapS,A.TextureWrap.CLAMP_TO_EDGE),this._wrapT=A.defaultValue(o.wrapT,A.TextureWrap.CLAMP_TO_EDGE),this.id=m,this._target=u.TEXTURE_2D,this._texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this._texture);var l=0,r=0,s=C(o.imageBuffer,this._internalFormat,this._width,this._height),c=this._width,x=this._height;do{var a=A.PixelFormat.compressedTextureSizeInBytes(this._internalFormat,c,x),i=new Uint8Array(o.imageBuffer.buffer,o.imageBuffer.byteOffset+l,a);u.compressedTexImage2D(u.TEXTURE_2D,r++,this._internalFormat,c,x,0,i),c=Math.max(c>>1,1),x=Math.max(x>>1,1),l+=a}while(l<o.imageBuffer.length&&s);r>1?(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR_MIPMAP_LINEAR)):(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR)),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this._wrapS),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,this._wrapT),u.bindTexture(u.TEXTURE_2D,null)}function C(v,m,o,u){for(var l=v.length,r=o,s=u,c=0;;){var x=A.PixelFormat.compressedTextureSizeInBytes(m,r,s);if(c+=x,r=r>>1,s=s>>1,r===0&&s===0)break;r=Math.max(r,1),s=Math.max(s,1)}return c===l}b.prototype.enable=function(){var v=this._context._gl;v.activeTexture(this._gl.TEXTURE0),v.bindTexture(this._target,this._texture)},b.prototype.disable=function(){var v=this._context._gl;v.bindTexture(this._target,null)},b.prototype.isDestroyed=function(){return![]},b.prototype.destroy=function(){var v=this._context._gl;v.deleteTexture(this._texture),this._texture=null,this.id=0,A.destroyObject(this)};var f=b;z.default=f},13254:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=M(e(13288)),R={UNLOADED:0,LOADING:1,PARSING:2,READY:3,FAILED:4},A=(0,F.default)(R);z.default=A},46140:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=M(e(13288)),R={encNONE:0,enrS3TCDXTN:14,enrPVRTPF_PVRTC2:19,enrPVRTPF_PVRTC:20,enrPVRTPF_PVRTC_4bpp:21,enrPVRTPF_ETC1:22},A=(0,F.default)(R);z.default=A},11276:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=M(e(13288)),R={LUMINANCE_8:1,LUMINANCE_16:2,ALPHA:3,ALPHA_4_LUMINANCE_4:4,LUMINANCE_ALPHA:5,RGB_565:6,BGR565:7,RGB:10,BGR:11,ARGB:12,ABGR:13,BGRA:14,WEBP:25,RGBA:28,DXT1:17,DXT2:18,DXT3:19,DXT4:20,DXT5:21},A=(0,F.default)(R);z.default=A},98065:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=M(e(13288)),R={SVC_Vertex:1,SVC_Normal:2,SVC_VertexColor:4,SVC_SecondColor:8,SVC_TexutreCoord:16,SVC_TexutreCoordIsW:32},A=(0,F.default)(R);z.default=A},58824:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=f(e(87647)),D=A(e(69177)),b=A(e(16842));function C(s){if(typeof F!="function")return null;var c=new F,x=new F;return(C=function(i){return i?x:c})(s)}function f(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||M(s)!=="object"&&typeof s!="function")return{default:s};var x=C(c);if(x&&x.has(s))return x.get(s);var a={},i=Object.defineProperty&&R;for(var n in s)if(n!=="default"&&Object.prototype.hasOwnProperty.call(s,n)){var h=i?R(s,n):null;h&&(h.get||h.set)?Object.defineProperty(a,n,h):a[n]=s[n]}return a.default=s,x&&x.set(s,a),a}function v(s){this.layer=s.layer,this.vertexPackage=s.vertexPackage,this.arrIndexPackage=s.arrIndexPackage,this.vertexBufferToCreate=new T.Queue,this.indexBufferToCreate=new T.Queue;var c,x;for(c=0,x=this.vertexPackage.vertexAttributes.length;c<x;c++)this.vertexBufferToCreate.enqueue(c);for(c=0,x=this.arrIndexPackage.length;c<x;c++)this.indexBufferToCreate.enqueue(c);this.boundingVolume=s.boundingVolume,this.material=s.material,this.modelMatrix=s.modelMatrix,this.shaderProgram=void 0,this.vertexArray=void 0,this.colorCommand=void 0,this.ready=![],this._pickInfo=s.pickInfo,this._selectionInfoMap=void 0,this._batchTable=void 0,this._attributeLocations=void 0,this._instanceCount=0}var m=new D.default,o=new b.default;function u(s,c){for(var x=s.layer.context,a=s.vertexBufferToCreate;a.length;){var i=a.peek();if(m.set(x,s,i),!c.jobScheduler.execute(m,T.JobType.BUFFER))break;a.dequeue()}}function l(s,c){for(var x=s.layer.context,a=s.indexBufferToCreate;a.length;){var i=a.peek();if(o.set(x,s,i),!c.jobScheduler.execute(o,T.JobType.BUFFER))break;a.dequeue()}}v.prototype.createBuffers=function(s){u(this,s),l(this,s)},v.prototype.createCommand=T.DeveloperError.throwInstantiationError,v.prototype.update=T.DeveloperError.throwInstantiationError,v.prototype.isDestroyed=T.DeveloperError.throwInstantiationError,v.prototype.destroy=T.DeveloperError.throwInstantiationError;var r=v;z.default=r},3416:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=A(e(85208)),D=A(e(28866)),b=A(e(69033)),C=u(e(87647)),f=A(e(17090)),v=A(e(75974)),m=A(e(58824));function o(E){if(typeof F!="function")return null;var N=new F,I=new F;return(o=function(W){return W?I:N})(E)}function u(E,N){if(!N&&E&&E.__esModule)return E;if(E===null||M(E)!=="object"&&typeof E!="function")return{default:E};var I=o(N);if(I&&I.has(E))return I.get(E);var G={},W=Object.defineProperty&&R;for(var Z in E)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(E,Z)){var U=W?R(E,Z):null;U&&(U.get||U.set)?Object.defineProperty(G,Z,U):G[Z]=E[Z]}return G.default=E,I&&I.set(E,G),G}function l(E){m.default.call(this,E),this._clippingPlanes=void 0,this.clippingPlanes=E.clippingPlanes,this._clippingPlanesEnable=![],this._clippingPlanesMatrix=C.Matrix4.clone(C.Matrix4.IDENTITY),this.referenceMatrix=void 0,this._defaultTexture=void 0,this._flattenPolygons=void 0,this.flattenPolygons=E.flattenPolygons,this._flattenPolygonsClippingReady=![],this._flattenPolygonsFlattenReady=![]}Object.defineProperties(l.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(N){N!==this._clippingPlanes&&C.ClippingPlaneCollection.setOwner(N,this,"_clippingPlanes")}},flattenPolygons:{get:function(){return this._flattenPolygons},set:function(N){N!==this._flattenPolygons&&C.FlattenPolygonCollection.setOwner(N,this,"_flattenPolygons")}}}),l.prototype=Object.create(m.default.prototype),l.prototype.constructor=m.default;function r(E,N,I,G){var W=new C.ShaderSource({sources:[f.default]}),Z=new C.ShaderSource({sources:[v.default]});return C.defined(N.aNormal)&&(W.defines.push("VertexNormal"),Z.defines.push("VertexNormal")),I.textures.length>0&&(W.defines.push("TexCoord"),Z.defines.push("TexCoord")),I.textures.length==2&&(W.defines.push("TexCoord2"),Z.defines.push("TexCoord2")),G.instanceIndex>-1&&G.instanceMode===17&&W.defines.push("Instance"),C.ShaderProgram.fromCache({context:E,vertexShaderSource:W,fragmentShaderSource:Z,attributeLocations:N})}function s(){return C.RenderState.fromCache({cull:{enabled:!![]},depthTest:{enabled:!![],func:C.DepthFunction.LESS_OR_EQUAL}})}function c(){return C.RenderState.fromCache({cull:{enabled:!![]},depthTest:{enabled:!![],func:C.DepthFunction.LESS_OR_EQUAL},blending:C.BlendingState.ALPHA_BLEND})}var x=new C.Cartesian2,a=new C.Matrix4;function i(E,N,I){return{uTexture:function(){return C.defined(E.textures[0])?E.textures[0]:N.context.defaultTexture},uTextureWidth:function(){return C.defined(E.textures[0])?E.textures[0]._width:1},uTexture2:function(){return E.textures[1]},uTexture2Width:function(){return E.textures[1]._width},uDiffuseColor:function(){return E.diffuseColor},uAmbientColor:function(){return E.ambientColor},uTexture0Width:function(){return C.defined(E.textures[0])?E.textures[0]._width:1},uTexture1Width:function(){return C.defined(E.textures[1])?E.textures[1]._width:1},s3m_clippingPlanes:function(){var W=I.clippingPlanes;return!C.defined(W)||!W.enabled?I._defaultTexture:W.texture},s3m_clippingPlanesEdgeStyle:function(){var W=I.clippingPlanes;if(!C.defined(W))return C.Color.WHITE.withAlpha(0);var Z=C.Color.clone(W.edgeColor);return Z.alpha=W.edgeWidth,Z},s3m_clippingPlanesMatrix:function(){var W=I.clippingPlanes,Z=a;if(C.defined(W)&&W.enabled){var U=C.defaultValue(I.referenceMatrix,I.modelMatrix);Z=C.Matrix4.multiply(N.context.uniformState.view3D,U,Z),Z=C.Matrix4.multiply(Z,W.modelMatrix,Z),this._clippingPlanesMatrix=C.Matrix4.inverseTranspose(Z,I._clippingPlanesMatrix)}return I._clippingPlanesMatrix},s3m_width:function(){var W=I.clippingPlanes;return!C.defined(W)||!W.enabled?1:C.ClippingPlaneCollection.getTextureResolution(W,N.context,x).x},s3m_height:function(){var W=I.clippingPlanes;return!C.defined(W)||!W.enabled?1:C.ClippingPlaneCollection.getTextureResolution(W,N.context,x).y},s3m_clippingPlanesLength:function(){var W=I.clippingPlanes;return!C.defined(W)||!W.enabled?0:I.clippingPlanes.length},s3m_flattenPolygonsTexture:function(){var W=I.flattenPolygons;return!C.defined(W)||!W.enabled?I._defaultTexture:W.flattenPolygonsTexture},s3m_flattenPolygonsViewProjectionMatrix:function(){var W=I.flattenPolygons,Z=new C.Matrix4;return C.defined(W)&&W.enabled&&(C.Matrix4.clone(W.flattenPolygonsCamera.getViewProjection(),Z),C.Matrix4.multiply(Z,N.context.uniformState.model,Z)),Z},s3m_flattenPolygonsInverseViewProjectionMatrix:function(){var W=I.flattenPolygons,Z=new C.Matrix4;return C.defined(W)&&W.enabled&&(C.Matrix4.clone(W.flattenPolygonsCamera.getInverseViewProjection(),Z),C.Matrix4.multiply(N.context.uniformState.view3D,Z,Z)),Z},s3m_clippingPolygonsTexture:function(){var W=I.flattenPolygons;return!C.defined(W)||!W.enabled?I._defaultTexture:W.clippingPolygonsTexture},s3m_toClippingPolygonsTexture:function(){var W=I.flattenPolygons,Z=new C.Matrix4;return C.defined(W)&&W.enabled&&C.Matrix4.clone(W.clippingPolygonsCamera.getViewProjection(),Z),Z}}}l.prototype.createCommand=function(){if(!C.defined(this.colorCommand)){var E=this.layer,N=E.context,I=this.vertexPackage;this._attributeLocations=I.attrLocation,this._instanceCount=I.instanceCount;var G=this.arrIndexPackage,W=I.vertexAttributes,Z=I.attrLocation;if(!(G.length<1)){var U=G[0],H=this.material;this.shaderProgram=r(N,Z,H,I),this.vertexArray=new C.VertexArray({context:N,attributes:W,indexBuffer:U.indexBuffer}),this.colorCommand=new C.DrawCommand({primitiveType:U.primitiveType,modelMatrix:this.modelMatrix,boundingVolume:C.BoundingSphere.clone(this.boundingVolume),pickId:"vSecondColor",vertexArray:this.vertexArray,shaderProgram:this.shaderProgram,pass:H.bTransparentSorting?C.Pass.TRANSLUCENT:C.Pass.CESIUM_3D_TILE,renderState:H.bTransparentSorting?c():s(),instanceCount:I.instanceCount}),this.colorCommand.uniformMap=i(H,E,this),this.vertexPackage=null,this.arrIndexPackage=null,this.ready=!![]}}};function n(E){var N=E._pickInfo;if(C.defined(N)){E._selectionInfoMap=new C.AssociativeArray;for(var I in N)N.hasOwnProperty(I)&&E._selectionInfoMap.set(I,N[I])}}var h=new C.Cartesian3;function g(E){var N=E.vertexPackage;if(!(!C.defined(N)||N.instanceIndex===-1||!C.defined(N.instanceBounds))){var I=N.instanceBounds,G=new C.Cartesian3(I[0],I[1],I[2]),W=new C.Cartesian3(I[3],I[4],I[5]),Z=C.Cartesian3.lerp(G,W,.5,h),U=C.Cartesian3.distance(Z,G),H=new C.Cartesian3;C.Matrix4.multiplyByPoint(E.modelMatrix,Z,H),E.boundingVolume.center=H,E.boundingVolume.radius=U>E.boundingVolume.radius?U:E.boundingVolume.radius,N.instanceBounds=void 0}}function d(E,N){var I=[];I.push({functionName:"batchTable_pickColor",componentDatatype:C.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!![]});var G=N._pickInfo,W=(0,T.default)(G),Z=N._instanceCount>0?N._instanceCount:W.length,U=new C.BatchTable(E,I,Z);N._batchTable=U}var y=new C.Cartesian4;function p(E,N,I){var G=N._batchTable,W=N._selectionInfoMap,Z=W._hash;for(var U in Z)if(Z.hasOwnProperty(U)){var H=W.get(U),V=void 0;!C.defined(V)&&(V=E.createPickId({primitive:I,id:U}));var Y=V.color;y.x=C.Color.floatToByte(Y.red),y.y=C.Color.floatToByte(Y.green),y.z=C.Color.floatToByte(Y.blue),y.w=C.Color.floatToByte(Y.alpha);var $=H.instanceIds;if(N._instanceCount>0)(0,D.default)($).call($,function(J){G.setBatchedAttribute(J,0,y)});else{var K=H[0].batchId;G.setBatchedAttribute(K,0,y)}}}function w(E){var N=E.clippingPlanes;return C.defined(N)&&N.enabled&&N.length!==0}function S(E){var N=E.flattenPolygons;return C.defined(N)&&N.enabled&&N.length!==0}function O(E,N){var I=N.shaderProgram.vertexShaderSource,G=N.shaderProgram.fragmentShaderSource,W=I.sources[0],Z=N._attributeLocations;W=N._batchTable.getVertexShaderCallback()(W),I=new C.ShaderSource({defines:I.defines,sources:[W]}),I.defines.indexOf("BatchTable")===-1&&I.defines.push("BatchTable"),N.shaderProgram=N.shaderProgram&&N.shaderProgram.destroy(),N.shaderProgram=C.ShaderProgram.fromCache({context:E,vertexShaderSource:I,fragmentShaderSource:G,attributeLocations:Z}),N.colorCommand.shaderProgram=N.shaderProgram}function B(E,N){var I=N.shaderProgram.vertexShaderSource,G=N.shaderProgram.fragmentShaderSource,W=I.sources[0],Z=N._attributeLocations,U=w(N);if(U){if(G.defines.indexOf("clippingPlane")===-1&&G.defines.push("clippingPlane"),C.ClippingPlaneCollection.useFloatTexture(E))G.defines.indexOf("clippingPlanesUsingFloatTexture")===-1&&G.defines.push("clippingPlanesUsingFloatTexture");else{var H=G.defines.indexOf("clippingPlanesUsingFloatTexture");if(H!==-1){var V;(0,b.default)(V=G.defines).call(V,H,1)}}if(N.clippingPlanes.unionClippingRegions)G.defines.indexOf("unionClippingRegions")===-1&&G.defines.push("unionClippingRegions");else{var Y=G.defines.indexOf("unionClippingRegions");if(Y!==-1){var $;(0,b.default)($=G.defines).call($,Y,1)}}}else{var K=G.defines.indexOf("clippingPlane");if(K!==-1){var J;(0,b.default)(J=G.defines).call(J,K,1)}}N.shaderProgram=N.shaderProgram&&N.shaderProgram.destroy(),N.shaderProgram=C.ShaderProgram.fromCache({context:E,vertexShaderSource:I,fragmentShaderSource:G,attributeLocations:Z}),N.colorCommand.shaderProgram=N.shaderProgram}function k(E,N){var I=N.shaderProgram.vertexShaderSource,G=N.shaderProgram.fragmentShaderSource,W=I.sources[0],Z=N._attributeLocations,U=S(N);if(U&&N.flattenPolygons.clippingPolygonsReady)G.defines.indexOf("clippingPolygon")===-1&&G.defines.push("clippingPolygon");else{var H=G.defines.indexOf("clippingPolygon");if(H!==-1){var V;(0,b.default)(V=G.defines).call(V,H,1)}}if(U&&N.flattenPolygons.flattenPolygonsReady)I.defines.indexOf("flattenPolygon")===-1&&I.defines.push("flattenPolygon");else{var Y=G.defines.indexOf("flattenPolygon");if(Y!==-1){var $;(0,b.default)($=I.defines).call($,Y,1)}}N.shaderProgram=N.shaderProgram&&N.shaderProgram.destroy(),N.shaderProgram=C.ShaderProgram.fromCache({context:E,vertexShaderSource:I,fragmentShaderSource:G,attributeLocations:Z}),N.colorCommand.shaderProgram=N.shaderProgram}function P(E){var N=E._batchTable,I=E.colorCommand;I.uniformMap=N.getUniformMapCallback()(E.colorCommand.uniformMap)}l.prototype.update=function(E,N){if(!this.ready){n(this),g(this),this.createBuffers(E),this.createCommand(E);return}!C.defined(this._batchTable)&&(d(E.context,this),O(E.context,this),P(this),p(E.context,this,N));var I=E.context;this._defaultTexture=I.defaultTexture;var G=this.clippingPlanes,W=C.defined(G)&&G.enabled;this._clippingPlanesEnable!=W&&(this._clippingPlanesState=W,B(E.context,this));var Z=this.flattenPolygons,U=C.defined(Z)&&Z.enabled&&Z.clippingPolygonsReady;this._flattenPolygonsClippingReady!=U&&(this._flattenPolygonsClippingReady=U,k(E.context,this));var H=C.defined(Z)&&Z.enabled&&Z.flattenPolygonsReady;this._flattenPolygonsFlattenReady!=H&&(this._flattenPolygonsFlattenReady=H,k(E.context,this)),E.commandList.push(this.colorCommand),this._batchTable.update(E)},l.prototype.isDestroyed=function(){return![]},l.prototype.destroy=function(){return this.shaderProgram=this.shaderProgram&&!this.shaderProgram.isDestroyed()&&this.shaderProgram.destroy(),this.vertexArray=this.vertexArray&&!this.vertexArray.isDestroyed()&&this.vertexArray.destroy(),this.colorCommand=void 0,this.vertexPackage=null,this.arrIndexPackage=null,C.destroyObject(this)};var L=l;z.default=L},25025:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=M(e(3416)),R={OSGBFile:function(D){return new F.default(D)},OSGBCacheFile:function(D){return new F.default(D)}},A=R;z.default=A},8219:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var A=D(e(87647));function T(f){if(typeof F!="function")return null;var v=new F,m=new F;return(T=function(u){return u?m:v})(f)}function D(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||M(f)!=="object"&&typeof f!="function")return{default:f};var m=T(v);if(m&&m.has(f))return m.get(f);var o={},u=Object.defineProperty&&R;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=u?R(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}function b(){this.ambientColor=new A.Color,this.diffuseColor=new A.Color,this.specularColor=new A.Color(0,0,0,0),this.shininess=50,this.bTransparentSorting=![],this.textures=[]}b.prototype.isDestroyed=function(){return![]},b.prototype.destroy=function(){return destroyObject(this)};var C=b;z.default=C},15904:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=m(e(87647)),D=A(e(45192)),b=A(e(8219)),C=A(e(25025)),f=A(e(98065));function v(n){if(typeof F!="function")return null;var h=new F,g=new F;return(v=function(y){return y?g:h})(n)}function m(n,h){if(!h&&n&&n.__esModule)return n;if(n===null||M(n)!=="object"&&typeof n!="function")return{default:n};var g=v(h);if(g&&g.has(n))return g.get(n);var d={},y=Object.defineProperty&&R;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var w=y?R(n,p):null;w&&(w.get||w.set)?Object.defineProperty(d,p,w):d[p]=n[p]}return d.default=n,g&&g.set(n,d),d}function o(){}function u(n,h){for(var g={},d=h.materials.material,y=0,p=d.length;y<p;y++){var w=d[y].material,S=w.id,O=new b.default;g[S]=O;var B=w.ambient;O.ambientColor=new T.Color(B.r,B.g,B.b,B.a);var k=w.diffuse;O.diffuseColor=new T.Color(k.r,k.g,k.b,k.a);var P=w.specular;O.specularColor=new T.Color(P.r,P.g,P.b,P.a),O.shininess=w.shininess,O.bTransparentSorting=w.transparentsorting;for(var L=w.textureunitstates,E=L.length,N=0;N<E;N++){var I=L[N].textureunitstate,G=I.id,W=I.addressmode.u===0?T.TextureWrap.REPEAT:T.TextureWrap.CLAMP_TO_EDGE,Z=I.addressmode.v===0?T.TextureWrap.REPEAT:T.TextureWrap.CLAMP_TO_EDGE;O.texMatrix=T.Matrix4.unpack(I.texmodmatrix);var U=h.texturePackage[G];if(T.defined(U)&&U.imageBuffer.byteLength>0){U.wrapS=W,U.wrapT=Z;var H=new D.default(n,G,U);O.textures.push(H)}}}return g}function l(n){var h=new T.BoundingSphere,g=new T.Cartesian3,d=n.vertexAttributes[0],y=d.componentsPerAttribute,p=T.defined(n.nCompressOptions)&&(n.nCompressOptions&f.default.SVC_Vertex)===f.default.SVC_Vertex,w=1,S,O;p?(w=n.vertCompressConstant,S=new T.Cartesian3(n.minVerticesValue.x,n.minVerticesValue.y,n.minVerticesValue.z),O=new Uint16Array(d.typedArray.buffer,d.typedArray.byteOffset,d.typedArray.byteLength/2)):O=new Float32Array(d.typedArray.buffer,d.typedArray.byteOffset,d.typedArray.byteLength/4);for(var B=[],k=0;k<n.verticesCount;k++)T.Cartesian3.fromArray(O,y*k,g),p&&(g=T.Cartesian3.multiplyByScalar(g,w,g),g=T.Cartesian3.add(g,S,g)),B.push(T.Cartesian3.clone(g));return T.BoundingSphere.fromPoints(B,h),B.length=0,h}var r=new T.Cartesian3;function s(n){var h=new T.BoundingSphere,g=n.instanceBounds;if(!T.defined(g))return h;var d=new T.Cartesian3(g[0],g[1],g[2]),y=new T.Cartesian3(g[3],g[4],g[5]),p=new T.Cartesian3.lerp(d,y,.5,r),w=new T.Cartesian3.distance(p,d);return h.center=p,h.radius=w,h}function c(n){n.instanceIndex>-1?s(n):l(n)}function x(n,h,g,d,y){for(var p={},w=d.geodes,S=0,O=w.length;S<O;S++){var B=w[S],k=B.matrix,P=T.Matrix4.multiply(n.modelMatrix,k,new T.Matrix4),L=void 0;T.defined(y.boundingVolume)&&(L=new T.BoundingSphere(y.boundingVolume.sphere.center,y.boundingVolume.sphere.radius),T.BoundingSphere.transform(L,n.modelMatrix,L));for(var E=B.skeletonNames,N=0,I=E.length;N<I;N++){var G=E[N],W=h.geoPackage[G],Z=W.vertexPackage,U=W.arrIndexPackage,H=W.pickInfo,V=void 0;U.length>0&&(V=g[U[0].materialCode]);var Y=T.defined(L)?L:c(Z);p[G]=C.default[n.fileType]({layer:n,vertexPackage:Z,arrIndexPackage:U,pickInfo:H,modelMatrix:P,boundingVolume:Y,material:V})}}if(!T.defined(y.boundingVolume)){var $=[];for(var K in p)p.hasOwnProperty(K)&&$.push(p[K].boundingVolume);y.boundingVolume=T.BoundingSphere.fromBoundingSpheres($)}y.geoMap=p}function a(n,h,g){for(var d=h.groupNode,y=[],p=0,w=d.pageLods.length;p<w;p++){var S={},O=d.pageLods[p];S.rangeMode=O.rangeMode,S.rangeDataList=O.childTile,S.rangeList=O.rangeList;var B=O.boundingSphere.center,k=O.boundingSphere.radius;S.rangeDataList!==""?S.boundingVolume={sphere:{center:new T.Cartesian3(B.x,B.y,B.z),radius:k}}:S.isLeafTile=!![],x(n,h,g,O,S),y.push(S)}return y}o.parse=function(n,h){if(T.defined(h)){var g=u(n.context,h),d=a(n,h,g);return d}};var i=o;z.default=i},16842:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var A=D(e(87647));function T(f){if(typeof F!="function")return null;var v=new F,m=new F;return(T=function(u){return u?m:v})(f)}function D(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||M(f)!=="object"&&typeof f!="function")return{default:f};var m=T(v);if(m&&m.has(f))return m.get(f);var o={},u=Object.defineProperty&&R;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=u?R(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}function b(){this.model=void 0,this.context=void 0,this.index=0}b.prototype.set=function(f,v,m){this.model=v,this.context=f,this.index=m},b.prototype.execute=function(){var f=this.context,v=this.model.arrIndexPackage[this.index],m=this.model.vertexPackage.verticesCount;if(!A.defined(v))throw new A.DeveloperError("index package is null");if(!A.defined(v.indexBuffer)){if(!A.defined(v.indicesTypedArray))throw new A.DeveloperError("index buffer is null");var o=A.IndexDatatype.UNSIGNED_SHORT;(v.indexType===1||m>=A.Math.SIXTY_FOUR_KILOBYTES)&&f.elementIndexUint&&(o=A.IndexDatatype.UNSIGNED_INT),!A.defined(v.indexBuffer)&&(v.indexBuffer=A.Buffer.createIndexBuffer({context:f,typedArray:v.indicesTypedArray,usage:A.BufferUsage.STATIC_DRAW,indexDatatype:o})),v.indicesTypedArray=null,delete v.indicesTypedArray}};var C=b;z.default=C},69177:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var A=D(e(87647));function T(f){if(typeof F!="function")return null;var v=new F,m=new F;return(T=function(u){return u?m:v})(f)}function D(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||M(f)!=="object"&&typeof f!="function")return{default:f};var m=T(v);if(m&&m.has(f))return m.get(f);var o={},u=Object.defineProperty&&R;for(var l in f)if(l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)){var r=u?R(f,l):null;r&&(r.get||r.set)?Object.defineProperty(o,l,r):o[l]=f[l]}return o.default=f,m&&m.set(f,o),o}function b(){this.context=void 0,this.model=void 0,this.index=void 0}b.prototype.set=function(f,v,m){this.context=f,this.model=v,this.index=m},b.prototype.execute=function(){var f=this.context,v=this.index,m=this.model.vertexPackage,o=m.vertexAttributes[v];if(!A.defined(o))throw new A.DeveloperError("attribute is null");if(m.instanceIndex!==-1&&!A.defined(this.model.instanceBuffer)){if(!A.defined(m.instanceBuffer))throw new A.DeveloperError("instance buffer is null");this.model.instanceBuffer=A.Buffer.createVertexBuffer({context:f,typedArray:m.instanceBuffer,usage:A.BufferUsage.STATIC_DRAW})}if(o.instanceDivisor===1&&!A.defined(o.typedArray)){o.vertexBuffer=this.model.instanceBuffer;return}!A.defined(o.vertexBuffer)&&(!A.defined(o.vertexBuffer)&&(o.vertexBuffer=A.Buffer.createVertexBuffer({context:f,typedArray:o.typedArray,usage:A.BufferUsage.STATIC_DRAW})),o.typedArray=null,delete o.typedArray)};var C=b;z.default=C},22331:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var D=T(e(69033)),b=f(e(87647));function C(o){if(typeof R!="function")return null;var u=new R,l=new R;return(C=function(s){return s?l:u})(o)}function f(o,u){if(!u&&o&&o.__esModule)return o;if(o===null||F(o)!=="object"&&typeof o!="function")return{default:o};var l=C(u);if(l&&l.has(o))return l.get(o);var r={},s=Object.defineProperty&&A;for(var c in o)if(c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)){var x=s?A(o,c):null;x&&(x.get||x.set)?Object.defineProperty(r,c,x):r[c]=o[c]}return r.default=o,l&&l.set(o,r),r}function v(){this._list=new b.DoublyLinkedList,this._sentinel=this._list.add(),this._trimTiles=![]}v.prototype.reset=function(){var o;(0,D.default)(o=this._list).call(o,this._list.tail,this._sentinel)},v.prototype.touch=function(o){var u=o.cacheNode;if(b.defined(u)){var l;(0,D.default)(l=this._list).call(l,this._sentinel,u)}},v.prototype.add=function(o){!b.defined(o.cacheNode)&&(o.cacheNode=this._list.add(o))},v.prototype.unloadTile=function(o,u,l){var r=u.cacheNode;b.defined(r)&&(this._list.remove(r),u.cacheNode=void 0,l(o,u))},v.prototype.unloadTiles=function(o,u){var l=this._trimTiles;this._trimTiles=![];for(var r=this._list,s=o.maximumMemoryUsage*1024*1024,c=this._sentinel,x=r.head;x!==c&&(o.totalMemoryUsageInBytes>s||l);){var a=x.item;x=x.next,a.isDestroyed()&&M.log(a),this.unloadTile(o,a,u)}},v.prototype.trim=function(){this._trimTiles=!![]};var m=v;z.default=m},35290:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=A(e(28954)),D=f(e(87647)),b=A(e(13254));function C(a){if(typeof F!="function")return null;var i=new F,n=new F;return(C=function(g){return g?n:i})(a)}function f(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||M(a)!=="object"&&typeof a!="function")return{default:a};var n=C(i);if(n&&n.has(a))return n.get(a);var h={},g=Object.defineProperty&&R;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?R(a,d):null;y&&(y.get||y.set)?Object.defineProperty(h,d,y):h[d]=a[d]}return h.default=a,n&&n.set(a,h),h}function v(){this._stack=[]}function m(a,i,n){i.length=0;for(var h=0,g=a._rootTiles.length;h<g;h++){var d=a._rootTiles[h];d.updateVisibility(n),d.visible&&i.push(d)}}function o(a,i){return a.distanceToCamera-i.distanceToCamera}function u(a,i,n,h){var g,d=i.children,y=d.length;for(g=0;g<y;++g)d[g].updateVisibility(h);for((0,T.default)(d).call(d,o),g=0;g<y;++g){var p=d[g];p.visible&&n.push(p)}}function l(a,i,n){i.renderable&&(a._selectedTiles.push(i),i.selectedFrame=n.frameNumber)}function r(a,i,n){i.requestedFrame===n.frameNumber||i.contentState!==b.default.UNLOADED||i.isLeafTile||(a._requestTiles.push(i),i.requestedFrame=n.frameNumber)}function s(a,i,n){i.touchedFrame!==n.frameNumber&&(a._cache.touch(i),i.touchedFrame=n.frameNumber)}function c(a,i,n){for(;i.length;){var h=i.pop();if(h.visible){if(s(a,h,n),h.canTraverse()){u(a,h,i,n);continue}l(a,h,n),r(a,h,n)}}}v.prototype.scheduler=function(a,i){a._requestTiles.length=0,a._selectedTiles.length=0;var n=this._stack;m(a,n,i),c(a,n,i)};var x=v;z.default=x},94436:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=v(e(87647)),D=A(e(13254)),b=A(e(95347)),C=A(e(15904));function f(i){if(typeof F!="function")return null;var n=new F,h=new F;return(f=function(d){return d?h:n})(i)}function v(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||M(i)!=="object"&&typeof i!="function")return{default:i};var h=f(n);if(h&&h.has(i))return h.get(i);var g={},d=Object.defineProperty&&R;for(var y in i)if(y!=="default"&&Object.prototype.hasOwnProperty.call(i,y)){var p=d?R(i,y):null;p&&(p.get||p.set)?Object.defineProperty(g,y,p):g[y]=i[y]}return g.default=i,h&&h.set(i,g),g}function m(i,n,h,g,d,y,p){this.layer=i,this.parent=n,this.fileName=g,this.isLeafTile=T.defaultValue(p,![]),this.transform=i.modelMatrix,this.boundingVolume=this.createBoundingVolume(h,i.modelMatrix);var w=T.Resource.createIfNeeded(i._baseResource);if(T.defined(n))this.baseUri=n.baseUri;else{var S=new T.Resource(g);this.baseUri=S.getBaseUri()}this.contentResource=w.getDerivedResource({url:g}),this.serverKey=T.RequestScheduler.getServerKey(this.contentResource.getUrlComponent()),this.request=void 0,this.cacheNode=void 0,this.distanceToCamera=0,this.pixel=0,this.visibilityPlaneMask=0,this.visible=![],this.children=[],this.lodRangeData=d,this.renderEntityMap=y,this.contentState=D.default.UNLOADED,this.readerable=![],this.touchedFrame=0,this.requestedFrame=0,this.selectedFrame=0,this.priority=0,this._isClipped=!![]}Object.defineProperties(m.prototype,{renderable:{get:function(){return T.defined(this.renderEntityMap)}}});var o=new T.Cartesian3;function u(i,n){var h=T.Cartesian3.clone(i.center),g=i.radius;h=T.Matrix4.multiplyByPoint(n,h,h);var d=T.Matrix4.getScale(n,o),y=T.Cartesian3.maximumComponent(d);return g*=y,new T.TileBoundingSphere(h,g)}function l(i,n){var h=new T.Cartesian3(i.min.x,i.min.y,i.min.z);T.Matrix4.multiplyByPoint(n,h,h);var g=new T.Cartesian3(i.max.x,i.max.y,i.max.z);T.Matrix4.multiplyByPoint(n,g,g);var d=T.BoundingSphere.fromCornerPoints(h,g,new T.BoundingSphere),y=d.center,p=d.radius,w=T.Matrix4.getScale(n,o),S=T.Cartesian3.maximumComponent(w);return p*=S,new T.TileBoundingSphere(y,p)}m.prototype.createBoundingVolume=function(i,n){if(this.isLeafTile)return new T.TileBoundingSphere(i.center,i.radius);if(T.defined(i.sphere))return u(i.sphere,n);if(T.defined(i.box))return l(i.box,n)},m.prototype.canTraverse=function(){return this.children.length===0||this.isLeafTile?![]:T.defined(this.lodRangeData)?this.pixel>this.lodRangeData:!![]};function r(i,n){return i.boundingVolume}m.prototype.getPixel=function(i){var n=this.boundingVolume,h=n.radius,g=n.center,d=T.Cartesian3.distance(i.camera.positionWC,g),y=i.context.drawingBufferHeight,p=i.camera.frustum._fovy*.5,w=y*.5,S=w/Math.tan(p);return S*h/d},m.prototype.distanceToTile=function(i){var n=r(this,i);return n.distanceToCamera(i)},m.prototype.visibility=function(i,n){var h=r(this,i),g=this.layer,d=g.clippingPlanes;if(T.defined(d)&&d.enabled){var y=d.computeIntersectionWithBoundingVolume(h,g.clippingPlanesOriginMatrix);if(this._isClipped=y!==T.Intersect.INSIDE,y===T.Intersect.OUTSIDE)return T.CullingVolume.MASK_OUTSIDE}return i.cullingVolume.computeVisibilityWithPlaneMask(h,n)},m.prototype.updateVisibility=function(i){var n=this.parent,h=T.defined(n)?n.visibilityPlaneMask:T.CullingVolume.MASK_INDETERMINATE;this.distanceToCamera=this.distanceToTile(i),this.pixel=this.getPixel(i),this.visibilityPlaneMask=this.visibility(i,h),this.visible=this.visibilityPlaneMask!==T.CullingVolume.MASK_OUTSIDE};function s(i){return function(){return i.priority}}function c(i){return function(n){i.contentState=D.default.FAILED,i.contentReadyPromise.reject(n)}}function x(i,n){for(var h=i.layer,g=n.length,d=0;d<g;d++){var y=n[d],p=y.boundingVolume,w=y.rangeDataList;w=i.baseUri+w;var S=y.rangeList,O=y.geoMap,B=new m(h,i,p,w,S,O,y.isLeafTile);i.children.push(B),i.layer._cache.add(B)}}m.prototype.requestContent=function(){var i=this,n=this.layer,h=this.contentResource.clone(),g=new T.Request({throttle:!![],throttleByServer:!![],type:T.RequestType.TILES3D,priorityFunction:s(this),serverKey:this.serverKey});this.request=g,h.request=g;var d=h.fetchArrayBuffer();if(!T.defined(d))return![];this.contentState=D.default.LOADING,this.contentReadyPromise=T.defer();var y=c(this);return d.then(function(p){if(i.isDestroyed()){y();return}var w=b.default.parseBuffer(p),S=C.default.parse(i.layer,w);x(i,S),i.selectedFrame=0,i.contentState=D.default.READY,i.contentReadyPromise.resolve(w)}).catch(function(p){if(g.state===T.RequestState.CANCELLED){i.contentState=D.default.UNLOADED;return}return y(p)}),!![]},m.prototype.update=function(i,n){var h=this.renderEntityMap;for(var g in h)if(h.hasOwnProperty(g)){var d=n.clippingPlanes;h[g].referenceMatrix=n.clippingPlanesOriginMatrix,T.defined(d)&&!T.defined(h[g].clippingPlanes)&&(h[g].clippingPlanes=d.enabled&&this._isClipped?d:void 0),T.defined(d)&&T.defined(h[g].clippingPlanes)&&h[g].clippingPlanes!==d&&(h[g].clippingPlanes=d);var y=n.flattenPolygons;T.defined(y)&&!T.defined(h[g].flattenPolygons)&&(h[g].flattenPolygons=y.enabled?y:void 0),T.defined(y)&&T.defined(h[g].flattenPolygons)&&h[g].flattenPolygons!==y&&(h[g].flattenPolygons=y),h[g].update(i,n)}},m.prototype.free=function(){for(var i=0,n=this.children.length;i<n;i++){var h=this.children[i];h.destroy()}this.children.length=0,this.contentState=D.default.UNLOADED},m.prototype.isDestroyed=function(){return![]},m.prototype.destroy=function(){for(var i in this.renderEntityMap)this.renderEntityMap.hasOwnProperty(i)&&this.renderEntityMap[i].destroy();this.renderEntityMap=void 0;for(var n=0,h=this.children.length;n<h;n++){var g=this.children[n];g.destroy()}return this.children.length=0,T.destroyObject(this)};var a=m;z.default=a},95347:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=A(e(20314)),D=o(e(87647)),b=A(e(11276)),C=A(e(46140)),f=A(e(98065)),v=A(e(26230));function m(U){if(typeof F!="function")return null;var H=new F,V=new F;return(m=function($){return $?V:H})(U)}function o(U,H){if(!H&&U&&U.__esModule)return U;if(U===null||M(U)!=="object"&&typeof U!="function")return{default:U};var V=m(H);if(V&&V.has(U))return V.get(U);var Y={},$=Object.defineProperty&&R;for(var K in U)if(K!=="default"&&Object.prototype.hasOwnProperty.call(U,K)){var J=$?R(U,K):null;J&&(J.get||J.set)?Object.defineProperty(Y,K,J):Y[K]=U[K]}return Y.default=U,V&&V.set(U,Y),Y}function u(){}var l={SV_Unkown:0,SV_Standard:1,SV_Compressed:2};function r(U,H){var V=new Uint8Array(U,H);return v.default.inflate(V).buffer}function s(U,H,V){var Y=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var $=new Uint8Array(U,V,Y),K=D.getStringFromTypedArray($);return V+=Y,{string:K,bytesOffset:V}}function c(U,H,V,Y){for(var $={},K=[],J=new Array(16),Q=0;Q<16;Q++)J[Q]=H.getFloat64(V,!![]),V+=Float64Array.BYTES_PER_ELEMENT;$.matrix=J,$.skeletonNames=K;var et=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var nt=0;nt<et;nt++){var st=s(U,H,V);K.push(st.string),V=st.bytesOffset}return Y.push($),V}function x(U,H,V,Y){var $={};$.rangeList=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,$.rangeMode=H.getUint16(V,!![]),V+=Uint16Array.BYTES_PER_ELEMENT;var K={};K.x=H.getFloat64(V,!![]),V+=Float64Array.BYTES_PER_ELEMENT,K.y=H.getFloat64(V,!![]),V+=Float64Array.BYTES_PER_ELEMENT,K.z=H.getFloat64(V,!![]),V+=Float64Array.BYTES_PER_ELEMENT;var J=H.getFloat64(V,!![]);V+=Float64Array.BYTES_PER_ELEMENT,$.boundingSphere={center:K,radius:J};var Q=s(U,H,V),et=Q.string;V=Q.bytesOffset;var nt=et.indexOf("Geometry");if(nt!==-1){var st=et.substring(nt);et=et.replace(st,"")}$.childTile=et,$.geodes=[];var ut=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var rt=0;rt<ut;rt++)V=c(U,H,V,$.geodes);return Y.push($),V}function a(U,H,V,Y){var $={},K=[],J=[],Q=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var et=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var nt=0;nt<et;nt++)V=x(U,H,V,J);$.pageLods=J;var st=V%4;return st!==0&&(V+=4-st),Y.groupNode=$,V}function i(U,H,V,Y){var $=H.getUint32(V,!![]);if(Y.verticesCount=$,V+=Uint32Array.BYTES_PER_ELEMENT,V<=0)return V;var K=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var J=H.getUint16(V,!![]);J=K*Float32Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;var Q=$*K*Float32Array.BYTES_PER_ELEMENT,et=new Uint8Array(U,V,Q);V+=Q;var nt=Y.vertexAttributes,st=Y.attrLocation;return st.aPosition=nt.length,nt.push({index:st.aPosition,typedArray:et,componentsPerAttribute:K,componentDatatype:D.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:J,normalize:![]}),V}function n(U,H,V,Y){var $=H.getUint32(V,!![]);if(V+=Uint32Array.BYTES_PER_ELEMENT,$<=0)return V;var K=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var J=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var Q=$*K*Float32Array.BYTES_PER_ELEMENT,et=new Uint8Array(U,V,Q);V+=Q;var nt=Y.vertexAttributes,st=Y.attrLocation;return st.aNormal=nt.length,nt.push({index:st.aNormal,typedArray:et,componentsPerAttribute:K,componentDatatype:D.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:J,normalize:![]}),V}function h(U,H,V,Y){var $=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var K=Y.verticesCount,J;if($>0){var Q=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT*2;var et=$*Uint8Array.BYTES_PER_ELEMENT*4,nt=new Uint8Array(U,V,et);J=(0,T.default)(nt).call(nt,0,et),V+=et}else{J=new Uint8Array(4*K);for(var st=0;st<K;st++)J[st*4]=255,J[st*4+1]=255,J[st*4+2]=255,J[st*4+3]=255}var ut=Y.vertexAttributes,rt=Y.attrLocation;return rt.aColor=ut.length,ut.push({index:rt.aColor,typedArray:J,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!![]}),Y.vertexColor=J,V}function g(U,H,V,Y){var $=H.getUint32(V,!![]);if(V+=Uint32Array.BYTES_PER_ELEMENT,$<=0)return V;var K=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT*2;var J=$*Uint8Array.BYTES_PER_ELEMENT*4,Q=new Uint8Array(U,V,J);V+=J;var et=Y.vertexAttributes,nt=Y.attrLocation;return nt.aSecondColor=et.length,et.push({index:nt.aSecondColor,typedArray:Q,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!![]}),V}function d(U,H,V,Y){var $=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;for(var K=0;K<$;K++){var J=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Q=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var et=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var nt=J*Q*Float32Array.BYTES_PER_ELEMENT,st=new Uint8Array(U,V,nt);V+=nt;var ut="aTexCoord"+K,rt=Y.vertexAttributes,ht=Y.attrLocation;ht[ut]=rt.length,rt.push({index:ht[ut],typedArray:st,componentsPerAttribute:Q,componentDatatype:D.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Q*Float32Array.BYTES_PER_ELEMENT,normalize:![]})}return V}function y(U,H,V,Y){var $=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;for(var K=Y.vertexAttributes,J=Y.attrLocation,Q=0;Q<$;Q++){var et=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var nt=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var st=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var ut=et*nt*Float32Array.BYTES_PER_ELEMENT;if(nt===17||nt===29){var rt=new Uint8Array(U,V,ut);Y.instanceCount=et,Y.instanceMode=nt,Y.instanceBuffer=rt,Y.instanceIndex=1;var ht=nt*et*4,Pt=(0,T.default)(rt).call(rt,0,ht);Y.vertexColorInstance=Pt;var wt=void 0;nt===17?(wt=Float32Array.BYTES_PER_ELEMENT*17,J.uv2=K.length,K.push({index:J.uv2,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:0,strideInBytes:wt,instanceDivisor:1}),J.uv3=K.length,K.push({index:J.uv3,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv4=K.length,K.push({index:J.uv4,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.secondary_colour=K.length,K.push({index:J.secondary_colour,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv6=K.length,K.push({index:J.uv6,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.UNSIGNED_BYTE,normalize:!![],offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1})):nt===29&&(wt=Float32Array.BYTES_PER_ELEMENT*29,J.uv1=K.length,K.push({index:J.uv1,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:0,strideInBytes:wt,instanceDivisor:1,byteLength:ut}),J.uv2=K.length,K.push({index:J.uv2,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv3=K.length,K.push({index:J.uv3,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv4=K.length,K.push({index:J.uv4,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv5=K.length,K.push({index:J.uv5,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv6=K.length,K.push({index:J.uv6,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv7=K.length,K.push({index:J.uv7,componentsPerAttribute:3,componentDatatype:D.ComponentDatatype.FLOAT,normalize:![],offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.secondary_colour=K.length,K.push({index:J.secondary_colour,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.UNSIGNED_BYTE,normalize:!![],offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}),J.uv9=K.length,K.push({index:J.uv9,componentsPerAttribute:4,componentDatatype:D.ComponentDatatype.UNSIGNED_BYTE,normalize:!![],offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:wt,instanceDivisor:1}))}else{var At=et*nt;Y.instanceBounds=new Float32Array(At);for(var Nt=0;Nt<At;Nt++)Y.instanceBounds[Nt]=H.getFloat32(V+Nt*Float32Array.BYTES_PER_ELEMENT,!![])}V+=ut}return V}function p(U,H,V,Y){var $=H.getUint32(V,!![]);if(Y.verticesCount=$,V+=Uint32Array.BYTES_PER_ELEMENT,V<=0)return V;var K=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var J=H.getUint16(V,!![]);J=K*Int16Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;var Q=H.getFloat32(V,!![]);V+=Float32Array.BYTES_PER_ELEMENT;var et={};et.x=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,et.y=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,et.z=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,et.w=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,Y.vertCompressConstant=Q,Y.minVerticesValue=et;var nt=$*K*Int16Array.BYTES_PER_ELEMENT,st=new Uint8Array(U,V,nt);V+=nt;var ut=Y.vertexAttributes,rt=Y.attrLocation;return rt.aPosition=ut.length,ut.push({index:rt.aPosition,typedArray:st,componentsPerAttribute:K,componentDatatype:D.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:J,normalize:![]}),V}function w(U,H,V,Y){var $=H.getUint32(V,!![]);if(V+=Uint32Array.BYTES_PER_ELEMENT,$<=0)return V;var K=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var J=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var Q=$*2*Int16Array.BYTES_PER_ELEMENT,et=new Uint8Array(U,V,Q);V+=Q;var nt=Y.vertexAttributes,st=Y.attrLocation;return st.aNormal=nt.length,nt.push({index:st.aNormal,typedArray:et,componentsPerAttribute:2,componentDatatype:D.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:J,normalize:![]}),V}function S(U,H,V,Y){Y.texCoordCompressConstant=[],Y.minTexCoordValue=[];var $=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT,V+=Uint16Array.BYTES_PER_ELEMENT;for(var K=0;K<$;K++){var J=H.getUint8(V,!![]);V+=Uint8Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT*3;var Q=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var et=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var nt=H.getUint16(V,!![]);V+=Uint16Array.BYTES_PER_ELEMENT;var st=H.getFloat32(V,!![]);V+=Float32Array.BYTES_PER_ELEMENT,Y.texCoordCompressConstant.push(st);var ut={};ut.x=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,ut.y=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,ut.z=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,ut.w=H.getFloat32(V,!![]),V+=Float32Array.BYTES_PER_ELEMENT,Y.minTexCoordValue.push(ut);var rt=Q*et*Int16Array.BYTES_PER_ELEMENT,ht=new Uint8Array(U,V,rt);V+=rt;var Pt=V%4;Pt!==0&&(V+=4-Pt);var wt="aTexCoord"+K,At=Y.vertexAttributes,Nt=Y.attrLocation;if(Nt[wt]=At.length,At.push({index:Nt[wt],typedArray:ht,componentsPerAttribute:et,componentDatatype:D.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:et*Int16Array.BYTES_PER_ELEMENT,normalize:![]}),J){rt=Q*Float32Array.BYTES_PER_ELEMENT;var Lt=new Uint8Array(U,V,rt);V+=rt,Y.texCoordZMatrix=!![],wt="aTexCoordZ"+K,Nt[wt]=At.length,At.push({index:Nt[wt],typedArray:Lt,componentsPerAttribute:1,componentDatatype:D.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:![]})}}return V}function O(U,H,V,Y){return V=i(U,H,V,Y),V=n(U,H,V,Y),V=h(U,H,V,Y),V=g(U,H,V,Y),V=d(U,H,V,Y),V=y(U,H,V,Y),V}function B(U,H,V,Y){var $=H.getUint32(V,!![]);return Y.compressOptions=$,V+=Uint32Array.BYTES_PER_ELEMENT,($&f.default.SVC_Vertex)===f.default.SVC_Vertex?V=p(U,H,V,Y):V=i(U,H,V,Y),($&f.default.SVC_Normal)===f.default.SVC_Normal?V=w(U,H,V,Y):V=n(U,H,V,Y),V=h(U,H,V,Y),V=g(U,H,V,Y),($&f.default.SVC_TexutreCoord)===f.default.SVC_TexutreCoord?V=S(U,H,V,Y):V=d(U,H,V,Y),($&f.default.SVC_TexutreCoordIsW)===f.default.SVC_TexutreCoordIsW&&(Y.textureCoordIsW=!![]),V=y(U,H,V,Y),V}function k(U,H,V,Y){var $=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var K=0;K<$;K++){var J={},Q=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var et=H.getUint8(V,!![]);V+=Uint8Array.BYTES_PER_ELEMENT;var nt=H.getUint8(V,!![]);V+=Uint8Array.BYTES_PER_ELEMENT;var st=H.getUint8(V,!![]);if(V+=Uint8Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT,Q>0){var ut=null,rt=void 0;et===1||et===3?(rt=Q*Uint32Array.BYTES_PER_ELEMENT,ut=new Uint8Array(U,V,rt)):(rt=Q*Uint16Array.BYTES_PER_ELEMENT,ut=new Uint8Array(U,V,rt),Q%2!==0&&(rt+=2)),J.indicesTypedArray=ut,V+=rt}J.indicesCount=Q,J.indexType=et,J.primitiveType=st;var ht=[],Pt=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var wt=0;wt<Pt;wt++){var At=s(U,H,V),Nt=At.string;V=At.bytesOffset,ht.push(Nt),J.materialCode=Nt}var Lt=V%4;if(Lt!==0){var Rt=4-V%4;V+=Rt}Y.push(J)}return V}function P(U,H,V,Y){var $=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var K=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var J=0;J<K;J++){var Q=s(U,H,V),et=Q.string;V=Q.bytesOffset;var nt=V%4;nt!==0&&(V+=4-nt);var st=H.getUint32(V,!![]);V+=Int32Array.BYTES_PER_ELEMENT;var ut={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1};st===l.SV_Standard?V=O(U,H,V,ut):st===l.SV_Compressed&&(V=B(U,H,V,ut));var rt=[];V=k(U,H,V,rt),Y[et]={vertexPackage:ut,arrIndexPackage:rt}}var ht=H.getUint32(V,!![]);return V+=ht,V+=Uint32Array.BYTES_PER_ELEMENT,V}function L(U,H,V,Y){var $=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var K=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var J=0;J<K;J++){var Q=s(U,H,V),et=Q.string;V=Q.bytesOffset;var nt=V%4;nt!==0&&(V+=4-nt);var st=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var ut=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var rt=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var ht=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Pt=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var wt=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var At=new Uint8Array(U,V,Pt);V+=Pt,Y[et]={id:et,width:ut,height:rt,compressType:ht,nFormat:wt,internalFormat:D.PixelFormat.RGBA_DXT5,imageBuffer:At}}return V}function E(U,H,V,Y){var $=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var K=new Uint8Array(U,V,$),J=D.getStringFromTypedArray(K);return V+=$,Y.materials=JSON.parse(J),V}var N=new D.Color,I=65536;function G(U,H,V,Y,$,K){if((Y&1)===1){var J=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Q=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var et=0;et<Q;et++){var nt=s(U,H,V),st=nt.string;V=nt.bytesOffset;var ut=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var rt={};$[st].pickInfo=rt;var ht=$[st].vertexPackage.instanceIndex;if(ht==-1){for(var Pt=new Float32Array($[st].vertexPackage.verticesCount),wt=0;wt<ut;wt++){var At=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var Nt=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var Lt=[],Rt=0;Rt<Nt;Rt++){var Tt=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;var mt=1;ht===-1&&(mt=H.getUint32(V,!![]),V+=Uint32Array.BYTES_PER_ELEMENT),Lt.push({vertexColorOffset:Tt,vertexColorCount:mt,batchId:wt})}rt[At]=Lt}W($[st].vertexPackage,Pt,void 0)}else{for(var Ft=$[st].vertexPackage.instanceCount,ct=$[st].vertexPackage.instanceBuffer,vt=$[st].vertexPackage.instanceMode,Dt=new Float32Array(Ft),Ct=[],jt=0;jt<ut;jt++){var zt=H.getUint32(V,!![]);Ct.push(zt),V+=Uint32Array.BYTES_PER_ELEMENT;var Yt=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT;for(var Zt=0;Zt<Yt;Zt++){var ft=H.getUint32(V,!![]);if(V+=Uint32Array.BYTES_PER_ELEMENT,K==2){var gt=H.getUint32(V,!![]);V+=Uint32Array.BYTES_PER_ELEMENT}}}var dt=vt===17?16:28;dt*=Float32Array.BYTES_PER_ELEMENT;for(var lt=0;lt<Ft;lt++){Dt[lt]=lt;var ot=lt*vt*Float32Array.BYTES_PER_ELEMENT+dt;D.Color.unpack(ct,ot,N);var it=K===2?Ct[lt]:N.red+N.green*256+N.blue*I;rt[it]===void 0&&(rt[it]={vertexColorCount:1,instanceIds:[],vertexColorOffset:lt}),rt[it].instanceIds.push(lt)}W($[st].vertexPackage,Dt,1)}}}return V}function W(U,H,V){var Y=U.vertexAttributes,$=U.attrLocation,K=Y.length,J=V===1?"instanceId":"batchId";$[J]=K,Y.push({index:K,typedArray:H,componentsPerAttribute:1,componentDatatype:D.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,instanceDivisor:V})}u.parseBuffer=function(U){var H=0,V={version:void 0,groupNode:void 0,geoPackage:{},matrials:void 0,texturePackage:{}},Y=new DataView(U);V.version=Y.getFloat32(H,!![]),H+=Float32Array.BYTES_PER_ELEMENT;var $=Y.getUint32(H,!![]);H+=Uint32Array.BYTES_PER_ELEMENT;var K=r(U,H);Y=new DataView(K),H=0;var J=Y.getUint32(H,!![]);return H+=Uint32Array.BYTES_PER_ELEMENT,H=a(K,Y,H,V),H=P(K,Y,H,V.geoPackage),H=L(K,Y,H,V.texturePackage),H=E(K,Y,H,V),G(K,Y,H,J,V.geoPackage,V.version),V};var Z=u;z.default=Z},75974:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var e=`
        #extension GL_OES_standard_derivatives : enable
        uniform vec4 uDiffuseColor;
        uniform vec4 uAmbientColor;
        varying vec4 vColor;
        varying vec4 vSecondColor;
        uniform sampler2D uTexture;
        varying vec4 vTexCoord;
        varying vec4 vTexCoordTransform;
        uniform float uTexture0Width;
        varying vec4 vTexMatrix;
    #ifdef TexCoord2
        uniform sampler2D uTexture2;
        uniform float uTexture1Width;
        varying vec4 vTexMatrix2;
    #endif
        void calculateMipLevel(in vec2 inTexCoord, in float vecTile, in float fMaxMip, inout float mipLevel)
        {
            vec2 dx = dFdx(inTexCoord * vecTile);
            vec2 dy = dFdy(inTexCoord * vecTile);
            float dotX = dot(dx, dx);
            float dotY = dot(dy, dy);
            float dMax = max(dotX, dotY);
            float dMin = min(dotX, dotY);
            float offset = (dMax - dMin) / (dMax + dMin);
            offset = clamp(offset, 0.0, 1.0);
            float d = dMax * (1.0 - offset) + dMin * offset;
            mipLevel = 0.5 * log2(d);
            mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);
        }

        void calculateMipLevel(in vec2 inTexCoord, in vec2 vecTile, in float fMaxMip, inout float mipLevel)
        {
            vec2 dx = dFdx(inTexCoord * vecTile.x);
            vec2 dy = dFdy(inTexCoord * vecTile.y);
            float dotX = dot(dx, dx);
            float dotY = dot(dy, dy);
            float dMax = max(dotX, dotY);
            float dMin = min(dotX, dotY);
            float offset = (dMax - dMin) / (dMax + dMin);
            offset = clamp(offset, 0.0, 1.0);
            float d = dMax * (1.0 - offset) + dMin * offset;
            mipLevel = 0.5 * log2(d);
            mipLevel = clamp(mipLevel, 0.0, fMaxMip - 1.62);
        }

        void calculateTexCoord(in vec3 inTexCoord, in float scale, in float XTran, in float YTran, in float fTile, in float mipLevel, inout vec2 outTexCoord)
        {
            if(inTexCoord.z < -9000.0)
            {
                outTexCoord = inTexCoord.xy;
            }
            else
            {
                vec2 fTexCoord = fract(inTexCoord.xy);
                float offset = 1.0 * pow(2.0, mipLevel) / fTile;
                fTexCoord = clamp(fTexCoord, offset, 1.0 - offset);
                outTexCoord.x = (fTexCoord.x + XTran) * scale;
                outTexCoord.y = (fTexCoord.y + YTran) * scale;
            }
        }

        vec4 getTexColorForS3M(sampler2D curTexture, vec3 oriTexCoord, float texTileWidth, float fMaxMipLev, float fTexCoordScale, vec2 vecTexCoordTranslate)
        {
            vec4 color = vec4(1.0);
            float mipLevel = 0.0;
        #ifdef GL_OES_standard_derivatives
            calculateMipLevel(oriTexCoord.xy, texTileWidth, fMaxMipLev, mipLevel);
        #endif
            vec2 realTexCoord;
            calculateTexCoord(oriTexCoord, fTexCoordScale, vecTexCoordTranslate.x, vecTexCoordTranslate.y, texTileWidth, mipLevel, realTexCoord);
            if(oriTexCoord.z < -9000.0)
            {
                color = texture2D(curTexture, realTexCoord.xy);
            }
            else
            {
                #ifdef GL_EXT_shader_texture_lod
                    color = texture2DLodEXT(curTexture, realTexCoord.xy, mipLevel);
                #else
                    color = texture2D(curTexture, realTexCoord.xy, mipLevel);
                #endif
            }
            return color;
        }

        vec4 getTextureColor()
        {
            if(vTexMatrix.z < 0.0)
            {
                return vec4(1.0);
            }
            float texTileWidth0 = vTexMatrix.z * uTexture0Width;
            vec3 realTexCoord = vec3(vTexCoord.xy, vTexCoordTransform.x);
            vec4 FColor = getTexColorForS3M(uTexture, realTexCoord, texTileWidth0, vTexMatrix.w, vTexMatrix.z, vTexMatrix.xy);
        #ifdef TexCoord2
            float texTileWidth1 = vTexMatrix2.z * uTexture1Width;
            realTexCoord = vec3(vTexCoord.zw, vTexCoordTransform.y);
            vec4 SColor = getTexColorForS3M(uTexture2, realTexCoord, texTileWidth1, vTexMatrix2.w, vTexMatrix2.z, vTexMatrix2.xy);
            SColor.r = clamp(SColor.r, 0.0, 1.0);
            SColor.g = clamp(SColor.g, 0.0, 1.0);
            SColor.b = clamp(SColor.b, 0.0, 1.0);
            return FColor * SColor;
        #else
            return FColor;
        #endif
        }

    #ifdef clippingPlane
    #ifdef clippingPlanesUsingFloatTexture
        vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform, int width, int height)
        {
            int pixY = clippingPlaneNumber / width;
            int pixX = clippingPlaneNumber - (pixY * width);
            float u = (float(pixX) + 0.5) / float(width);
            float v = (float(pixY) + 0.5) / float(height);
            vec4 plane = texture2D(packedClippingPlanes, vec2(u, v));
            return czm_transformPlane(plane, transform);
        }
    #else
        vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform, int width, int height)
        {
            int clippingPlaneStartIndex = clippingPlaneNumber * 2;
            int pixY = clippingPlaneStartIndex / width;
            int pixX = clippingPlaneStartIndex - (pixY * width);
            float u = (float(pixX) + 0.5) / float(width);
            float v = (float(pixY) + 0.5) / float(height);
            vec4 oct32 = texture2D(packedClippingPlanes, vec2(u, v)) * 255.0;
            vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);
            vec4 plane;
            plane.xyz = czm_octDecode(oct, 65535.0);
            plane.w = czm_unpackFloat(texture2D(packedClippingPlanes, vec2(u + pixelWidthString, v)));
            return czm_transformPlane(plane, transform);
        }
    #endif
    #ifdef unionClippingRegions
        float clip(vec4 fragCoord, highp sampler2D clippingPlanes, mat4 clippingPlanesMatrix, int width, int height, int clippingPlanesLength)
        {
            vec4 position = czm_windowToEyeCoordinates(fragCoord);
            vec3 clipNormal = vec3(0.0);
            vec3 clipPosition = vec3(0.0);
            float clipAmount;
            float pixelWidth = czm_metersPerPixel(position);
            bool breakAndDiscard = false;
            for (int i = 0; i < 1000; ++i)
            {
                if (i >= clippingPlanesLength)
                {
                    break;
                }
                vec4 clippingPlanei = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix, width, height);
                clipNormal = clippingPlanei.xyz;
                clipPosition = -clippingPlanei.w * clipNormal;
                float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;
                clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));
                if (amount <= 0.0)
                {
                   breakAndDiscard = true;
                   break;
                }
            }
            if (breakAndDiscard) {
                discard;
            }
            return clipAmount;
        }
    #else
        float clip(vec4 fragCoord, highp sampler2D clippingPlanes, mat4 clippingPlanesMatrix, int width, int height, int clippingPlanesLength)
        {
            bool clipped = true;
            vec4 position = czm_windowToEyeCoordinates(fragCoord);
            vec3 clipNormal = vec3(0.0);
            vec3 clipPosition = vec3(0.0);
            float clipAmount = 0.0;
            float pixelWidth = czm_metersPerPixel(position);
            for (int i = 0; i < 1000; ++i)
            {
                if (i >= clippingPlanesLength)
                {
                    break;
                }
                vec4 clippingPlanei = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix, width, height);
                clipNormal = clippingPlanei.xyz;
                clipPosition = -clippingPlanei.w * clipNormal;
                float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;
                clipAmount = max(amount, clipAmount);
                clipped = clipped && (amount <= 0.0);
            }
            if (clipped)
            {
                discard;
            }
            return clipAmount;
        }
    #endif
        uniform highp sampler2D s3m_clippingPlanes;
        uniform mat4 s3m_clippingPlanesMatrix;
        uniform vec4 s3m_clippingPlanesEdgeStyle;
        uniform int s3m_width;
        uniform int s3m_height;
        uniform int s3m_clippingPlanesLength;
    #endif
    #ifdef clippingPolygon
        uniform highp sampler2D s3m_clippingPolygonsTexture;
        uniform mat4 s3m_toClippingPolygonsTexture;
    #endif
        void main()
        {
            vec4 color = getTextureColor() * vColor;
            gl_FragColor = czm_gammaCorrect(color);

        #ifdef clippingPlane
            float clipDistance = clip(gl_FragCoord, s3m_clippingPlanes, s3m_clippingPlanesMatrix, s3m_width, s3m_height, s3m_clippingPlanesLength);
            vec4 clippingPlanesEdgeColor = vec4(1.0);
            clippingPlanesEdgeColor.rgb = s3m_clippingPlanesEdgeStyle.rgb;
            float clippingPlanesEdgeWidth = s3m_clippingPlanesEdgeStyle.a;
            if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth)
            {
                gl_FragColor = clippingPlanesEdgeColor;
            }
        #endif
        
        #ifdef clippingPolygon
            vec4 ec = czm_windowToEyeCoordinates(gl_FragCoord);
            vec4 wc = czm_inverseView * ec;
            wc /= wc.w;
            vec4 tc = s3m_toClippingPolygonsTexture * wc;
            vec2 tc2 = tc.xy/tc.w;
            if (tc2.x > 0.0 && tc2.x < 1.0 && tc2.y > 0.0 && tc2.y < 1.0)
            {
               vec4 color = texture2D(s3m_clippingPolygonsTexture, tc2);
               if (color.r > 0.0)
                {
                    discard;
                }
            }
        #endif
        }
    `;z.default=e},17090:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var e=`
        attribute vec4 aPosition;
        attribute vec4 aColor;
        attribute vec4 aTexCoord0;
        uniform float uTexture0Width;
        varying vec4 vTexMatrix;
        varying vec4 vTexCoordTransform;
        varying vec4 vSecondColor;
    #ifdef BatchTable
      #ifdef Instance
        attribute float instanceId;
      #else
        attribute float batchId;
      #endif 
    #endif    
    #ifdef TexCoord2
        attribute vec4 aTexCoord1;
        uniform float uTexture1Width;
        varying vec4 vTexMatrix2;
    #endif
    #ifdef Instance
        attribute vec4 uv2;
        attribute vec4 uv3;
        attribute vec4 uv4;
        attribute vec4 secondary_colour;
        attribute vec4 uv6;   
    #endif
        varying vec4 vTexCoord;
        varying vec4 vColor;
        const float SHIFT_LEFT8 = 256.0;
        const float SHIFT_RIGHT8 = 1.0 / 256.0;
        const float SHIFT_RIGHT4 = 1.0 / 16.0;
        const float SHIFT_LEFT4 = 16.0;
        void getTextureMatrixFromZValue(in float nZ, inout float XTran, inout float YTran, inout float scale)
        {
            if(nZ <= 0.0)
            {
                return;
            }
            float nDel8 = floor(nZ * SHIFT_RIGHT8);
            float nDel16 = floor(nDel8 * SHIFT_RIGHT8);
            float nDel20 = floor(nDel16 * SHIFT_RIGHT4);
            YTran = nZ - nDel8 * SHIFT_LEFT8;
            XTran = nDel8 - nDel16 * SHIFT_LEFT8;
            float nLevel = nDel16 - nDel20 * SHIFT_LEFT4;
            scale = 1.0 / pow(2.0, nLevel);
        }
    #ifdef flattenPolygon
        uniform highp sampler2D s3m_flattenPolygonsTexture;
        uniform mat4 s3m_flattenPolygonsViewProjectionMatrix;
        uniform mat4 s3m_flattenPolygonsInverseViewProjectionMatrix;
    #endif
        
        void main()
        {
            vTexCoord.xy = aTexCoord0.xy;
        #ifdef TexCoord2
            vTexCoord.zw = aTexCoord1.xy;
        #endif
            vTexMatrix = vec4(0.0,0.0,1.0,0.0);
            vTexCoordTransform.x = aTexCoord0.z;
            if(vTexCoordTransform.x < -90000.0)
            {
                vTexMatrix.z = -1.0;
            }
            getTextureMatrixFromZValue(floor(vTexCoordTransform.x), vTexMatrix.x, vTexMatrix.y, vTexMatrix.z);
            vTexMatrix.w = log2(uTexture0Width * vTexMatrix.z);
        #ifdef TexCoord2
            vTexMatrix2 = vec4(0.0,0.0,1.0,0.0);
            vTexCoordTransform.y = aTexCoord1.z;
            getTextureMatrixFromZValue(floor(vTexCoordTransform.y), vTexMatrix2.x, vTexMatrix2.y, vTexMatrix2.z);
            vTexMatrix2.w = log2(uTexture1Width * vTexMatrix.z);
        #endif
        vec4 vertexPos = aPosition;
        vec4 vertexColor = aColor;
        #ifdef Instance
            mat4 worldMatrix;
            worldMatrix[0] = uv2;
            worldMatrix[1] = uv3;
            worldMatrix[2] = uv4;
            worldMatrix[3] = vec4(0, 0, 0, 1);
            vertexPos = vec4(vertexPos.xyz,1.0)*worldMatrix;
            vertexColor *= secondary_colour; 
        #endif
        #ifdef BatchTable
        #ifdef Instance  
           float index = instanceId;
        #else
           float index = batchId;
        #endif  
          vSecondColor = batchTable_pickColor(index);
        #endif    
            vColor = vertexColor;
            gl_Position = czm_modelViewProjection * vec4(vertexPos.xyz, 1.0);
            
        #ifdef flattenPolygon
            vec4 fp_position = vec4(vertexPos.xyz,1.0);
            vec4 tc = s3m_flattenPolygonsViewProjectionMatrix * fp_position;
            vec2 tc2 = tc.xy/tc.w;
            if (tc2.x > 0.0 && tc2.x < 1.0 && tc2.y > 0.0 && tc2.y < 1.0)
            {
                vec4 color = texture2D(s3m_flattenPolygonsTexture, tc2);
                if (color.r > 0.0)
                {
                    vec4 cc = vec4(tc2.xy,color.r,1.0);
                    gl_Position = czm_projection * s3m_flattenPolygonsInverseViewProjectionMatrix * cc;
                }
            }
        #endif
        }
    `;z.default=e},36054:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.S3MTilesLayerProvider=u;var T=A(e(78756)),D=A(e(28954)),b=o(e(87647)),C=A(e(94436)),f=A(e(35290)),v=A(e(22331));function m(a){if(typeof F!="function")return null;var i=new F,n=new F;return(m=function(g){return g?n:i})(a)}function o(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||M(a)!=="object"&&typeof a!="function")return{default:a};var n=m(i);if(n&&n.has(a))return n.get(a);var h={},g=Object.defineProperty&&R;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?R(a,d):null;y&&(y.get||y.set)?Object.defineProperty(h,d,y):h[d]=a[d]}return h.default=a,n&&n.set(a,h),h}function u(a){a=b.defaultValue(a,b.defaultValue.EMPTY_OBJECT),b.Check.defined("options.url",a.url),b.Check.defined("options.context",a.context),this.context=a.context,this._url=void 0,this._basePath=void 0,this._baseResource=void 0,this.modelMatrix=void 0,this.fileType=void 0,this._position=void 0,this._rectangle=void 0,this._root=void 0,this._rootTiles=[],this._schuduler=new f.default,this._requestTiles=[],this._selectedTiles=[],this._cache=new v.default,this._maximumMemoryUsage=-1,this._totalMemoryUsageInBytes=0,this._readyPromise=void 0,this.loadConfig(a.url),this._initialClippingPlanesOriginMatrix=b.Matrix4.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!![],this._clippingPlanes=void 0,this.clippingPlanes=a.clippingPlanes,this._flattenPolygons=void 0,this.flattenPolygons=a.flattenPolygons}Object.defineProperties(u.prototype,{ready:{get:function(){return this._rootTiles.length>0}},readyPromise:{get:function(){return this._readyPromise}},rectangle:{get:function(){return this._rectangle}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes},set:function(i){this._totalMemoryUsageInBytes=i}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(i){this._maximumMemoryUsage=i}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(i){b.ClippingPlaneCollection.setOwner(i,this,"_clippingPlanes")}},clippingPlanesOriginMatrix:{get:function(){return b.defined(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(this._initialClippingPlanesOriginMatrix=b.Matrix4.clone(this.modelMatrix),this._clippingPlanesOriginMatrix=b.Matrix4.clone(this._initialClippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=![]),this._clippingPlanesOriginMatrix):b.Matrix4.IDENTITY}},flattenPolygons:{get:function(){return this._flattenPolygons},set:function(i){b.FlattenPolygonCollection.setOwner(i,this,"_flattenPolygons")}}}),u.prototype.loadConfig=function(a){var i=this;this._readyPromise=T.default.resolve(a).then(function(n){var h,g=b.Resource.createIfNeeded(n);return h=g.getBaseUri(!![]),i._url=g.url,i._basePath=h,i._baseResource=g,g.fetchJson()}).then(function(n){var h=n.extensions;i.fileType=h["s3m:FileType"];var g=n.position.x,d=n.position.y,y=n.position.z;i._position=b.Cartesian3.fromDegrees(g,d,y),i.modelMatrix=b.Transforms.eastNorthUpToFixedFrame(i._position),i._rectangle=b.Rectangle.fromDegrees(n.geoBounds.left,n.geoBounds.bottom,n.geoBounds.right,n.geoBounds.top);for(var p=0,w=n.tiles.length;p<w;p++){var S=n.tiles[p].url,O={box:n.tiles[p].boundingbox},B=new C.default(i,void 0,O,S);i._root=B,i._cache.add(B),i._rootTiles.push(B)}return i._initialClippingPlanesOriginMatrix=b.Matrix4.clone(i.modelMatrix),i._clippingPlanesOriginMatrix=b.Matrix4.clone(i._initialClippingPlanesOriginMatrix),i})};function l(a,i){return a.priority-i.priority}function r(a){var i=a._requestTiles,n=i.length;(0,D.default)(i).call(i,l);for(var h=0;h<n;++h){var g=i[h];g.requestContent()}}function s(a,i){for(var n=a._selectedTiles,h=n.length,g=0;g<h;g++)n[g].update(i,a)}function c(a,i){}function x(a){a._cache.unloadTiles(a,c)}u.prototype.prePassesUpdate=function(a){if(this.ready){var i=this.clippingPlanes;this._clippingPlanesOriginMatrixDirty=!![],b.defined(i)&&i.enabled&&i.update(a);var n=this.flattenPolygons;b.defined(n)&&n.enabled&&n.update(a),a.newFrame&&this._cache.reset()}},u.prototype.update=function(a){this.ready&&(this._schuduler.scheduler(this,a),r(this),s(this,a),x(this))},u.prototype.destroy=function(){return this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._flattenPolygons=this._flattenPolygons&&this._flattenPolygons.destroy(),b.destroyObject(this)}},78288:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.flyTo=n,z.getCameraPosition=O,z.getCatesian3FromPX=S,z.getHandelPosition=P,z.saveSceneImages=L,z.setBloomLightScenen=a,z.setBlurBloom=l,z.setCameraEotateHeading=p,z.setDarkEffect=u,z.setDefSceneConfig=x,z.setFogEffect=c,z.setOneSkyBox=v,z.setRainEffect=r,z.setSnowEffect=s,z.setThreeSkyBox=o,z.setTwoSkyBox=m,z.setView=i,z.transformCartesianArrayToWGS84Array=y,z.transformCartesianToWGS84=h,z.transformWGS84ArrayToCartesianArray=g,z.transformWGS84ToCartesian=d,z.transformWGS84ToCartographic=w,z.updateCameraState=B;var T=A(e(28866)),D=A(e(37561)),b=f(e(87647));function C(E){if(typeof F!="function")return null;var N=new F,I=new F;return(C=function(W){return W?I:N})(E)}function f(E,N){if(!N&&E&&E.__esModule)return E;if(E===null||M(E)!=="object"&&typeof E!="function")return{default:E};var I=C(N);if(I&&I.has(E))return I.get(E);var G={},W=Object.defineProperty&&R;for(var Z in E)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(E,Z)){var U=W?R(E,Z):null;U&&(U.get||U.set)?Object.defineProperty(G,Z,U):G[Z]=E[Z]}return G.default=E,I&&I.set(E,G),G}function v(){return new b.SkyBox({sources:{positiveX:"Assets3D/SkyBox/00h+00.jpg",negativeX:"Assets3D/SkyBox/12h+00.jpg",positiveY:"Assets3D/SkyBox/06h+00.jpg",negativeY:"Assets3D/SkyBox/18h+00.jpg",positiveZ:"Assets3D/SkyBox/06h+90.jpg",negativeZ:"Assets3D/SkyBox/06h-90.jpg"}})}function m(){return new b.SkyBox({sources:{positiveX:"Assets3D/SkyBox/Version2_dark_px.jpg",negativeX:"Assets3D/SkyBox/Version2_dark_mx.jpg",positiveY:"Assets3D/SkyBox/Version2_dark_py.jpg",negativeY:"Assets3D/SkyBox/Version2_dark_my.jpg",positiveZ:"Assets3D/SkyBox/Version2_dark_pz.jpg",negativeZ:"Assets3D/SkyBox/Version2_dark_mz.jpg"}})}function o(){return new b.SkyBox({sources:{positiveX:"Assets3D/SkyBox/tycho2t3_80_pxs.jpg",negativeX:"Assets3D/SkyBox/tycho2t3_80_mxs.jpg",positiveY:"Assets3D/SkyBox/tycho2t3_80_pys.jpg",negativeY:"Assets3D/SkyBox/tycho2t3_80_mys.jpg",positiveZ:"Assets3D/SkyBox/tycho2t3_80_pzs.jpg",negativeZ:"Assets3D/SkyBox/tycho2t3_80_mzs.jpg"}})}function u(E){E=E||{};var N=`uniform sampler2D colorTexture;
varying vec2 v_textureCoordinates;
uniform float scale;
uniform vec3 offset;
void main() {
 // vec4 color = texture2D(colorTexture, v_textureCoordinates);
 vec4 color = texture2D(colorTexture, v_textureCoordinates);
 // float gray = 0.2989*color.r+0.5870*color.g+0.1140*color.b;
 // gl_FragColor = vec4(gray,gray,2.0*(gray+1.0), 1.0);
 gl_FragColor = vec4(color.r*0.2,color.g * 0.4,color.b*0.6, 1.0);
}
`;return this._viewer.scene.postProcessStages.add(new b.PostProcessStage({name:"darkEffect",fragmentShader:N,uniforms:{scale:1,offset:function(){return E.offset||new b.Cartesian3(.1,.2,.3)}}}))}function l(E){if(this._viewer&&E){var N=`uniform float height;
uniform float width;
uniform sampler2D colorTexture1;

varying vec2 v_textureCoordinates;

const int SAMPLES = 9;
void main()
{
vec2 st = v_textureCoordinates;
float wr = float(1.0 / width);
float hr = float(1.0 / height);
vec4 result = vec4(0.0);
int count = 0;
for(int i = -SAMPLES; i <= SAMPLES; ++i){
for(int j = -SAMPLES; j <= SAMPLES; ++j){
vec2 offset = vec2(float(i) * wr, float(j) * hr);
result += texture2D(colorTexture1, st + offset);
}
}
result = result / float(count);
gl_FragColor = result;
}
`;return this._viewer.scene.postProcessStages.add(new b.PostProcessStage({name:"blur_x_direction",fragmentShader:N,uniforms:{width:E.width,height:E.height,colorTexture1:"Bright"}}))}}function r(){if(this._viewer){var E=`uniform sampler2D colorTexture;
                varying vec2 v_textureCoordinates;
                
                float hash(float x){
                return fract(sin(x*23.3)*13.13);
                }
                
                void main(){
                    float time = czm_frameNumber / 60.0;
                    vec2 resolution = czm_viewport.zw;
                    vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);
                    vec3 c=vec3(.6,.7,.8);
                    float a=-.4;
                    float si=sin(a),co=cos(a);
                    uv*=mat2(co,-si,si,co);
                    uv*=length(uv+vec2(0,4.9))*.3+1.;
                    float v=1.-sin(hash(floor(uv.x*100.))*2.);
                    float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;
                    c*=v*b;
                    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c, 1), 0.2);
                }
                `;return this._viewer.scene.postProcessStages.add(new b.PostProcessStage({name:"rainEffect",fragmentShader:E}))}}function s(){if(this._viewer){var E=`uniform sampler2D colorTexture;
                    varying vec2 v_textureCoordinates;
                    
                    float snow(vec2 uv,float scale){
                        float time = czm_frameNumber / 60.0;
                        float w=smoothstep(1.,0.,-uv.y*(scale/10.));
                        if(w<.1)return 0.;
                        uv+=time/scale;
                        uv.y+=time*2./scale;
                        uv.x+=sin(uv.y+time*.5)/scale;
                        uv*=scale;
                        vec2 s=floor(uv),f=fract(uv),p;
                        float k=3.,d;
                        p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;
                        d=length(p);
                        k=min(d,k);
                        k=smoothstep(0.,k,sin(f.x+f.y)*0.01);
                        return k*w;
                    }
                    
                    void main(){
                        vec2 resolution = czm_viewport.zw;
                        vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);
                        vec3 finalColor=vec3(0);
                        float c = 0.0;
                        c+=snow(uv,30.)*.0;
                        c+=snow(uv,20.)*.0;
                        c+=snow(uv,15.)*.0;
                        c+=snow(uv,10.);
                        c+=snow(uv,8.);
                        c+=snow(uv,6.);
                        c+=snow(uv,5.);
                        finalColor=(vec3(c));
                        gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.3);
                        
                    }
                    `;return this._viewer.scene.postProcessStages.add(new b.PostProcessStage({name:"snowEffect",fragmentShader:E}))}}function c(){if(this._viewer){var E=`float getDistance(sampler2D depthTexture, vec2 texCoords) 
{ 
    float depth = czm_unpackDepth(texture2D(depthTexture, texCoords)); 
    if (depth == 0.0) { 
        return czm_infinity; 
    } 
    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depth); 
    return -eyeCoordinate.z / eyeCoordinate.w; 
} 
float interpolateByDistance(vec4 nearFarScalar, float distance) 
{ 
    float startDistance = nearFarScalar.x; 
    float startValue = nearFarScalar.y; 
    float endDistance = nearFarScalar.z; 
    float endValue = nearFarScalar.w; 
    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0); 
    return mix(startValue, endValue, t); 
} 
vec4 alphaBlend(vec4 sourceColor, vec4 destinationColor) 
{ 
    return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a); 
} 
uniform sampler2D colorTexture; 
uniform sampler2D depthTexture; 
uniform vec4 fogByDistance; 
uniform vec4 fogColor; 
varying vec2 v_textureCoordinates; 
void main(void) 
{ 
    float distance = getDistance(depthTexture, v_textureCoordinates); 
    vec4 sceneColor = texture2D(colorTexture, v_textureCoordinates); 
    float blendAmount = interpolateByDistance(fogByDistance, distance); 
    vec4 finalFogColor = vec4(fogColor.rgb, fogColor.a * blendAmount); 
    gl_FragColor = alphaBlend(finalFogColor, sceneColor); 
} 
`;return this._viewer.scene.postProcessStages.add(new b.PostProcessStage({fragmentShader:E,uniforms:{fogByDistance:new b.Cartesian4(10,0,200,1),fogColor:b.Color.BLACK}}))}}function x(){this._viewer&&(this._viewer.scene.sun.show=![],this._viewer.scene.moon.show=![],this._viewer.scene.fxaa=!![],this._viewer.scene.globe.depthTestAgainstTerrain=!![],this._viewer.scene.undergroundMode=![],this._viewer.scene.terrainProvider.isCreateSkirt=![],this._viewer.scene.skyAtmosphere.show=![],this._viewer.scene.globe.showGroundAtmosphere=![],this._viewer.scene.globe.enableLighting=!![],this._viewer.scene.fog.enabled=![],this._viewer.cesiumWidget.creditContainer.style.display="none")}function a(){this._viewer&&(this._viewer.scene.postProcessStages.bloom.enabled=!![],this._viewer.scene.postProcessStages.bloom.uniforms.contrast=119,this._viewer.scene.postProcessStages.bloom.uniforms.brightness=-.4,this._viewer.scene.postProcessStages.bloom.uniforms.glowOnly=![],this._viewer.scene.postProcessStages.bloom.uniforms.delta=.9,this._viewer.scene.postProcessStages.bloom.uniforms.sigma=3.78,this._viewer.scene.postProcessStages.bloom.uniforms.stepSize=5,this._viewer.scene.postProcessStages.bloom.uniforms.isSelected=![])}function i(E,N){if(E&&N&&N.position){if(N.distance){var I=new b.Cartesian3(0,N.distance,opt.distance);N.position=b.Cartesian3.add(N.position,I,new b.Cartesian3)}E.scene.camera.setView({destination:N.position,orientation:N.orientation||{heading:b.Math.toRadians(90),pitch:b.Math.toRadians(90),roll:b.Math.toRadians(0)}})}}function n(E,N){if(E&&N&&N.position){if(N.distance){var I=new b.Cartesian3(0,N.distance,N.distance);N.position=b.Cartesian3.add(N.position,I,new b.Cartesian3)}E.scene.camera.flyTo({destination:N.position,orientation:N.orientation||{heading:b.Math.toRadians(90),pitch:b.Math.toRadians(90),roll:b.Math.toRadians(0)},easingFunction:N.easingFunction||b.EasingFunction.LINEAR_NONE,duration:N.duration||3,complete:N.callback})}}function h(E){if(E){var N=b.Ellipsoid.WGS84,I=N.cartesianToCartographic(E);return{lng:b.Math.toDegrees(I.longitude),lat:b.Math.toDegrees(I.latitude),alt:I.height}}}function g(E,N){if(E){var I=this;return E?(0,T.default)(E).call(E,function(G){return d(G,N)}):[]}}function d(E,N){return E?b.Cartesian3.fromDegrees(E.lng||E.lon,E.lat,E.alt=N||E.alt,b.Ellipsoid.WGS84):b.Cartesian3.ZERO}function y(E){var N=this;return E?(0,T.default)(E).call(E,function(I){return N.transformCartesianToWGS84(I)}):[]}function p(E,N){if(N){var I=b.Cartesian3.fromDegrees(N.lng,N.lat,N.height),G=b.Math.toRadians(-30),W=360/30,Z=5e3,U=b.JulianDate.fromDate(new Date);E.clock.startTime=U.clone(),E.clock.currentTime=U.clone(),E.clock.clockRange=b.ClockRange.CLAMPED,E.clock.clockStep=b.ClockStep.SYSTEM_CLOCK;var H=E.camera.heading,V=function(){var $=b.JulianDate.secondsDifference(E.clock.currentTime,E.clock.startTime),K=b.Math.toRadians($*W)+H;E.scene.camera.setView({destination:I,orientation:{heading:K,pitch:G}}),E.scene.camera.moveBackward(Z),b.JulianDate.compare(E.clock.currentTime,E.clock.stopTime)>=0&&E.clock.onTick.removeEventListener(V)};E.clock.onTick.addEventListener(V)}}function w(E){return E?b.Cartographic.fromDegrees(E.lng||E.lon,E.lat,E.alt):b.Cartographic.ZERO}function S(E,N){if(E&&N){var I=E.scene.pick(N),G=null,W=![],Z=![];if(I instanceof b.Cesium3DTileFeature&&(W=!![]),W&&(G=E.scene.pickPosition(N),G)){var U=b.Cartographic.fromCartesian(G);U.height<0&&(U.height=0);var H=b.Math.toDegrees(U.longitude),V=b.Math.toDegrees(U.latitude),Y=U.height;G=this.transformWGS84ToCartesian({lng:H,lat:V,alt:Y})}if(!I&&!E.terrainProvide instanceof b.EllipsoidTerrainProvider){var $=E.scene.camera.getPickRay(N);if(!$)return null;G=E.scene.globe.pick($,E.scene),Z=!![]}if(!W&&!Z&&(G=E.scene.camera.pickEllipsoid(N,E.scene.globe.ellipsoid)),G){var K=this.transformCartesianToWGS84(G);return K.alt<0&&(G=this.transformWGS84ToCartesian(K,.1)),G}return![]}}function O(E){if(E){var N=E.scene.camera.pickEllipsoid(new b.Cartesian2(E.canvas.clientWidth/2,E.canvas.clientHeight/2));if(N){var I=b.Ellipsoid.WGS84.cartesianToCartographic(N),G=I.longitude*180/Math.PI,W=I.latitude*180/Math.PI,Z=E.camera._direction,U=b.Math.toDegrees(Z.x),H=b.Math.toDegrees(Z.y),V=b.Math.toDegrees(Z.z),Y=E.camera.positionCartographic.height,$=b.Math.toDegrees(E.camera.heading),K=b.Math.toDegrees(E.camera.pitch),J=b.Math.toDegrees(E.camera.roll),Q=E.camera.computeViewRectangle(),et=Q.west/Math.PI*180,nt=Q.north/Math.PI*180,st=Q.east/Math.PI*180,ut=Q.south/Math.PI*180,rt=(et+st)/2,ht=(nt+ut)/2;return{lon:G,lat:W,height:Y,heading:$,pitch:K,roll:J,position:E.camera.position,center:{x:rt,y:ht},direction:new b.Cartesian3(U,H,V)}}}}function B(E,N){E.scene._screenSpaceCameraController.enableRotate=N,E.scene._screenSpaceCameraController.enableTranslate=N,E.scene._screenSpaceCameraController.enableZoom=N,E.scene._screenSpaceCameraController.enableTilt=N,E.scene._screenSpaceCameraController.enableLook=N}function k(E,N,I,G){if(E){var W=new b.ScreenSpaceEventHandler(E.canvas);W.setInputAction(function(Z){N&&N(Z,W)},b.ScreenSpaceEventType.LEFT_CLICK),W.setInputAction(function(Z){I&&I(Z,W)},b.ScreenSpaceEventType.MOUSE_MOVE),W.setInputAction(function(Z){G&&G(Z,W)},b.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}}function P(E,N){if(E){var I=new b.ScreenSpaceEventHandler(E.scene.canvas),G=this;I.setInputAction(function(W){var Z=E.scene.camera.pickEllipsoid(W.endPosition,E.scene.globe.ellipsoid);typeof N=="function"&&N(G.transformCartesianToWGS84(Z),I)},b.ScreenSpaceEventType.MOUSE_MOVE)}}function L(E){if(E){let H=function(V){for(var Y=V.split(","),$=Y[0].match(/:(.*?);/)[1],K=atob(Y[1]),J=K.length,Q=new Uint8Array(J);J--;)Q[J]=K.charCodeAt(J);return new Blob([Q],{type:$})};var N=E.scene.canvas,I=N.toDataURL("image/png").replace("image/png","image/octet-stream"),G=document.createElement("a"),W=I.substr(22,I.length),Z=H(I),U=D.default.createObjectURL(Z);G.download="scene.png",G.href=U,G.click()}}},56865:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var D=T(e(36583)),b=T(e(42579)),C=T(e(22777)),f=T(e(42762)),v=T(e(20314)),m=T(e(69257)),o=s(e(87647)),u=T(e(75420));e(35156);var l;function r(Q){if(typeof R!="function")return null;var et=new R,nt=new R;return(r=function(ut){return ut?nt:et})(Q)}function s(Q,et){if(!et&&Q&&Q.__esModule)return Q;if(Q===null||F(Q)!=="object"&&typeof Q!="function")return{default:Q};var nt=r(et);if(nt&&nt.has(Q))return nt.get(Q);var st={},ut=Object.defineProperty&&A;for(var rt in Q)if(rt!=="default"&&Object.prototype.hasOwnProperty.call(Q,rt)){var ht=ut?A(Q,rt):null;ht&&(ht.get||ht.set)?Object.defineProperty(st,rt,ht):st[rt]=Q[rt]}return st.default=Q,nt&&nt.set(Q,st),st}var c=o.defined,x=o.createGuid,a=o.Color,i=o.Cartesian3,n=o.Material,h=o.Matrix3,g=o.Matrix4,d=o.Transforms,y=o.Camera,p=o.Quaternion,w=o.GeometryInstance,S=o.FrustumOutlineGeometry,O=o.ColorGeometryInstanceAttribute,B=o.ShowGeometryInstanceAttribute,k=o.Primitive,P=o.PerInstanceColorAppearance,L=o.HeadingPitchRoll,E="videoContainer"+(0,v.default)(l=x()).call(l,0,4),N=`
<video-js id="`.concat(E,`" class="video-js" style="position:absolute;bottom: 175px;right: 517px;width:320px;height: 180px">
</video-js>
`),I,G,W,Z,U=function(){function Q(et,nt){(0,C.default)(this,Q),this.earth=et,this.options=nt}return(0,f.default)(Q,[{key:"videoPlayer",get:function(){return I}},{key:"videoProjection",get:function(){return G}},{key:"frustumOutline",get:function(){return W}},{key:"sketch",get:function(){return Z}},{key:"openVideo",value:function(){var nt=this;this.closeVideo();var st=this.options,ut=st.videoUrl,rt=st.showPlayer;ut=ut||"http://vjs.zencdn.net/v/oceans.mp4";var ht=this.earth.viewer.container,Pt=new DOMParser,wt=Pt.parseFromString(N,"text/xml");wt=wt.children[0];var At=document.getElementById(E);!At&&ht.appendChild(wt);var Nt={autoplay:!![],controls:!![],loop:!![],muted:![],resizeManager:!![],html5:{vhs:{withCredentials:![]}},sources:[{src:ut}]};I=(0,u.default)(E,Nt),I.controlBar.hide(),I.bigPlayButton.hide(),I.show=function(){(0,b.default)(this,nt),document.getElementById("".concat(E,"_html5_api")).style.display="block"}.bind(this),I.hide=function(){(0,b.default)(this,nt),document.getElementById("".concat(E,"_html5_api")).style.display="none"}.bind(this),document.getElementById("".concat(E,"_html5_api")).setAttribute("crossorigin","anonymous"),rt||I.hide()}},{key:"closeVideo",value:function(){var nt;(nt=I)===null||nt===void 0||nt.dispose(),I=null}},{key:"parameterValidation",value:function(){var nt=!![],st=this.options,ut=st.viewPosition,rt=st.viewEndPosition,ht=st.viewDistance,Pt=st.viewHeading,wt=st.viewPitch,At=st.horizontalViewAngle,Nt=st.verticalViewAngle,Lt=st.aspectRatio;return ut||(nt=![]),ut=$(ut),c(ht)&&c(Pt)&&c(wt)||(rt?(rt=$(rt),ht=i.distance(ut,rt),Pt=V(ut,rt),wt=Y(ut,rt),rt=K(rt)):nt=![]),!!At+!!Nt+!!Lt>=2?(At=At||Nt*Lt,Nt=Nt||At/Lt):nt=![],!nt&&M.error("\u53C2\u6570\u9519\u8BEF",this.options),(0,m.default)(this.options,{viewPosition:ut,viewEndPosition:rt,viewDistance:ht,viewHeading:Pt,viewPitch:wt,horizontalViewAngle:At,verticalViewAngle:Nt}),nt}},{key:"execute",value:function(){if(this.destroy(),this.openVideo(),!!this.parameterValidation()){var nt=this.options,st=nt.viewPosition,ut=nt.viewDistance,rt=nt.viewHeading,ht=nt.viewPitch,Pt=nt.horizontalViewAngle,wt=nt.verticalViewAngle,At=nt.showFrustumOutline,Nt=nt.showSketch,Lt=nt.projection;Nt&&this.drawSketch(),At&&this.drawFrustumOutline();var Rt=n.fromType("Image");Rt.uniforms.image=document.getElementById("".concat(E,"_html5_api")),G&&G.clear(),Lt&&(G=new o.VideoProjection(this.earth.viewer,{viewPosition:st,viewDistance:ut,viewHeading:rt,viewPitch:ht,horizontalViewAngle:Pt,verticalViewAngle:wt,material:Rt})),this.options.viewPosition=K(st)}}},{key:"destroy",value:function(){var nt;this.closeVideo(),(nt=G)===null||nt===void 0||nt.clear(),Z&&this.earth.viewer.entities.removeById(Z.id),W&&this.earth.viewer.scene.primitives.remove(W),G=Z=W=null}},{key:"drawFrustumOutline",value:function(){this.clearFrustumOutline();var nt=H(this.earth.viewer,this.options),st=new i,ut=new h,rt=new p,ht=nt.directionWC,Pt=nt.upWC,wt=nt.rightWC;wt=i.negate(wt,st);var At=ut;h.setColumn(At,0,wt,At),h.setColumn(At,1,Pt,At),h.setColumn(At,2,ht,At);var Nt=p.fromRotationMatrix(At,rt),Lt=new w({geometry:new S({frustum:nt.frustum,origin:this.options.viewPosition,orientation:Nt}),id:x(),attributes:{color:O.fromColor(a.YELLOWGREEN),show:new B(!![])}});W=this.earth.viewer.scene.primitives.add(new k({geometryInstances:[Lt],appearance:new P({flat:!![],translucent:![]})}))}},{key:"clearFrustumOutline",value:function(){W&&this.earth.viewer.scene.primitives.remove(W),W=null}},{key:"drawSketch",value:function(){this.clearSketch();var nt=this.options,st=nt.viewDistance,ut=nt.viewPosition,rt=nt.horizontalViewAngle,ht=nt.verticalViewAngle,Pt=nt.viewHeading,wt=nt.viewPitch;Z=this.earth.viewer.entities.add({name:"sketch",position:ut,orientation:d.headingPitchRollQuaternion(ut,L.fromDegrees(Pt-90,wt,0)),ellipsoid:{radii:new i(st,st,st),minimumClock:o.Math.toRadians(-rt/2),maximumClock:o.Math.toRadians(rt/2),minimumCone:o.Math.toRadians(ht+7.75),maximumCone:o.Math.toRadians(180-ht-7.75),fill:![],outline:!![],subdivisions:256,stackPartitions:64,slicePartitions:64,outlineColor:a.YELLOWGREEN}})}},{key:"clearSketch",value:function(){Z&&this.earth.viewer.entities.removeById(Z.id),Z=null}}]),Q}();function H(Q,et){var nt=new y(Q.scene),st=et.viewDistance,ut=et.viewPosition,rt=et.viewPositionEnd,ht=et.horizontalViewAngle,Pt=et.verticalViewAngle,wt=et.viewHeading,At=et.viewPitch;if(nt.position=ut,rt){var Nt=i.normalize(i.subtract(rt,ut,new i),new i);nt.direction=Nt}nt.frustum.near=st*.001,nt.frustum.far=st;var Lt=o.Math.toRadians(ht),Rt=o.Math.toRadians(Pt),Tt=Math.tan(Lt/2)/Math.tan(Rt/2);return nt.frustum.aspectRatio=Tt,nt.frustum.fov=Rt,nt.frustum.adaptFov=![],nt.setView({destination:ut,orientation:{heading:o.Math.toRadians(wt||0),pitch:o.Math.toRadians(At||0),roll:0}}),nt}function V(Q,et){var nt=new i,st=d.eastNorthUpToFixedFrame(Q);return g.inverse(st,st),g.multiplyByPoint(st,et,nt),i.normalize(nt,nt),o.Math.toDegrees(Math.atan2(nt.x,nt.y))}function Y(Q,et){var nt=new i,st=d.eastNorthUpToFixedFrame(Q);return g.inverse(st,st),g.multiplyByPoint(st,et,nt),i.normalize(nt,nt),o.Math.toDegrees(Math.asin(nt.z))}function $(Q){return Array.isArray(Q)&&(Q=i.fromDegrees.apply(i,(0,D.default)(Q))),Q instanceof i?Q:![]}function K(Q){if(Q instanceof i){var et=o.Ellipsoid.WGS84,nt=et.cartesianToCartographic(Q);return[o.Math.toDegrees(nt.longitude),o.Math.toDegrees(nt.latitude),nt.height]}}var J=U;z.default=J},5236:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=z.VERSION=z.Task=z.Support=z.Query=z.Identify=z.Find=z.EsriUtil=z.ESRI=void 0,z.find=Ct,z.get=void 0,z.identify=zt,z.options=void 0,z.query=vt,z.request=d,z.task=Ft,z.xmlHttpPost=h;var D=T(e(66273)),b=T(e(20314)),C=T(e(81360)),f=T(e(28954)),v=o(e(27022));function m(ft){if(typeof R!="function")return null;var gt=new R,dt=new R;return(m=function(ot){return ot?dt:gt})(ft)}function o(ft,gt){if(!gt&&ft&&ft.__esModule)return ft;if(ft===null||F(ft)!=="object"&&typeof ft!="function")return{default:ft};var dt=m(gt);if(dt&&dt.has(ft))return dt.get(ft);var lt={},ot=Object.defineProperty&&A;for(var it in ft)if(it!=="default"&&Object.prototype.hasOwnProperty.call(ft,it)){var yt=ot?A(ft,it):null;yt&&(yt.get||yt.set)?Object.defineProperty(lt,it,yt):lt[it]=ft[it]}return lt.default=ft,dt&&dt.set(ft,lt),lt}var u;z.VERSION=u;var l="2.1.4";z.VERSION=u=l;var r=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,s=document.documentElement.style.pointerEvents==="",c={cors:r,pointerEvents:s};z.Support=c;var x={attributionWidthOffset:55};z.options=x;var a=0;function i(ft){var gt="";ft.f=ft.f||"json";for(var dt in ft)if(ft.hasOwnProperty(dt)){var lt=ft[dt],ot=Object.prototype.toString.call(lt),it=void 0;gt.length&&(gt+="&"),ot==="[object Array]"?it=Object.prototype.toString.call(lt[0])==="[object Object]"?(0,D.default)(lt):lt.join(","):ot==="[object Object]"?it=(0,D.default)(lt):ot==="[object Date]"?it=lt.valueOf():it=lt,gt+=encodeURIComponent(dt)+"="+encodeURIComponent(it)}return gt}function n(ft,gt){var dt=new window.XMLHttpRequest;return dt.onerror=function(lt){dt.onreadystatechange=v.Util.falseFn,ft.call(gt,{error:{code:500,message:"XMLHttpRequest error"}},null)},dt.onreadystatechange=function(){var lt,ot;if(dt.readyState===4){try{lt=JSON.parse(dt.responseText)}catch{lt=null,ot={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!ot&&lt.error&&(ot=lt.error,lt=null),dt.onerror=v.Util.falseFn,ft.call(gt,ot,lt)}},dt.ontimeout=function(){this.onerror()},dt}function h(ft,gt,dt,lt){var ot=n(dt,lt);return ot.open("POST",ft),typeof lt<"u"&&lt!==null&&typeof lt.options<"u"&&(ot.timeout=lt.options.timeout),ot.setRequestHeader("Content-Type","application/x-www-form-urlencoded charset=UTF-8"),ot.send(i(gt)),ot}function g(ft,gt,dt,lt){var ot=n(dt,lt);return ot.open("GET",ft+"?"+i(gt),!![]),typeof lt<"u"&&lt!==null&&typeof lt.options<"u"&&(ot.timeout=lt.options.timeout),ot.send(null),ot}function d(ft,gt,dt,lt){var ot=i(gt),it=n(dt,lt),yt=(ft+"?"+ot).length;if(yt<=2e3&&c.cors?it.open("GET",ft+"?"+ot):yt>2e3&&c.cors&&(it.open("POST",ft),it.setRequestHeader("Content-Type","application/x-www-form-urlencoded charset=UTF-8")),typeof lt<"u"&&lt!==null&&typeof lt.options<"u"&&(it.timeout=lt.options.timeout),yt<=2e3&&c.cors)it.send(null);else if(yt>2e3&&c.cors)it.send(ot);else{if(yt<=2e3&&!c.cors)return y(ft,gt,dt,lt);Pt("a request to "+ft+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");return}return it}function y(ft,gt,dt,lt){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var ot="c"+a;gt.callback="window._EsriLeafletCallbacks."+ot,window._EsriLeafletCallbacks[ot]=function(yt){if(window._EsriLeafletCallbacks[ot]!==!![]){var Ot,St=Object.prototype.toString.call(yt);!(St==="[object Object]"||St==="[object Array]")&&(Ot={error:{code:500,message:"Expected array or object as JSONP response"}},yt=null),!Ot&&yt.error&&(Ot=yt,yt=null),dt.call(lt,Ot,yt),window._EsriLeafletCallbacks[ot]=!![]}};var it=v.DomUtil.create("script",null,document.body);return it.type="text/javascript",it.src=ft+"?"+i(gt),it.id=ot,v.DomUtil.addClass(it,"esri-leaflet-jsonp"),a++,{id:ot,url:it.src,abort:function(){window._EsriLeafletCallbacks._callback[ot]({code:0,message:"Request aborted."})}}}var p=c.cors?g:y;z.get=p,p.CORS=g,p.JSONP=y;var w={request:d,get:p,post:h};function S(ft,gt){for(var dt=0;dt<ft.length;dt++)if(ft[dt]!==gt[dt])return![];return!![]}function O(ft){return!S(ft[0],ft[ft.length-1])&&ft.push(ft[0]),ft}function B(ft){var gt=0,dt=0,lt=ft.length,ot=ft[dt],it;for(dt;dt<lt-1;dt++)it=ft[dt+1],gt+=(it[0]-ot[0])*(it[1]+ot[1]),ot=it;return gt>=0}function k(ft,gt,dt,lt){var ot=(lt[0]-dt[0])*(ft[1]-dt[1])-(lt[1]-dt[1])*(ft[0]-dt[0]),it=(gt[0]-ft[0])*(ft[1]-dt[1])-(gt[1]-ft[1])*(ft[0]-dt[0]),yt=(lt[1]-dt[1])*(gt[0]-ft[0])-(lt[0]-dt[0])*(gt[1]-ft[1]);if(yt!==0){var Ot=ot/yt,St=it/yt;if(Ot>=0&&Ot<=1&&St>=0&&St<=1)return!![]}return![]}function P(ft,gt){for(var dt=0;dt<ft.length-1;dt++)for(var lt=0;lt<gt.length-1;lt++)if(k(ft[dt],ft[dt+1],gt[lt],gt[lt+1]))return!![];return![]}function L(ft,gt){for(var dt=![],lt=-1,ot=ft.length,it=ot-1;++lt<ot;it=lt)(ft[lt][1]<=gt[1]&&gt[1]<ft[it][1]||ft[it][1]<=gt[1]&&gt[1]<ft[lt][1])&&gt[0]<(ft[it][0]-ft[lt][0])*(gt[1]-ft[lt][1])/(ft[it][1]-ft[lt][1])+ft[lt][0]&&(dt=!dt);return dt}function E(ft,gt){var dt=P(ft,gt),lt=L(ft,gt[0]);return!dt&&lt?!![]:![]}function N(ft){for(var gt=[],dt=[],lt,ot,it,yt=0;yt<ft.length;yt++){var Ot,St=O((0,b.default)(Ot=ft[yt]).call(Ot,0));if(!(St.length<4))if(B(St)){var Gt=[(0,b.default)(St).call(St).reverse()];gt.push(Gt)}else dt.push((0,b.default)(St).call(St).reverse())}for(var Ht=[];dt.length;){it=dt.pop();var Kt=![];for(lt=gt.length-1;lt>=0;lt--)if(ot=gt[lt][0],E(ot,it)){gt[lt].push(it),Kt=!![];break}!Kt&&Ht.push(it)}for(;Ht.length;){it=Ht.pop();var Jt=![];for(lt=gt.length-1;lt>=0;lt--)if(ot=gt[lt][0],P(ot,it)){gt[lt].push(it),Jt=!![];break}!Jt&&gt.push([it.reverse()])}return gt.length===1?{type:"Polygon",coordinates:gt[0]}:{type:"MultiPolygon",coordinates:gt}}function I(ft){var gt,dt=[],lt=(0,b.default)(ft).call(ft,0),ot=O((0,b.default)(gt=lt.shift()).call(gt,0));if(ot.length>=4){!B(ot)&&ot.reverse(),dt.push(ot);for(var it=0;it<lt.length;it++){var yt,Ot=O((0,b.default)(yt=lt[it]).call(yt,0));Ot.length>=4&&(B(Ot)&&Ot.reverse(),dt.push(Ot))}}return dt}function G(ft){for(var gt=[],dt=0;dt<ft.length;dt++)for(var lt=I(ft[dt]),ot=lt.length-1;ot>=0;ot--){var it,yt=(0,b.default)(it=lt[ot]).call(it,0);gt.push(yt)}return gt}function W(ft){var gt={};for(var dt in ft)ft.hasOwnProperty(dt)&&(gt[dt]=ft[dt]);return gt}function Z(ft,gt){for(var dt=gt?[gt,"OBJECTID","FID"]:["OBJECTID","FID"],lt=0;lt<dt.length;lt++){var ot=dt[lt];if(ot in ft&&(typeof ft[ot]=="string"||typeof ft[ot]=="number"))return ft[ot]}throw Error("No valid id attribute found")}function U(ft,gt){var dt={};if(typeof ft.x=="number"&&typeof ft.y=="number"&&(dt.type="Point",dt.coordinates=[ft.x,ft.y],typeof ft.z=="number"&&dt.coordinates.push(ft.z)),ft.points){var lt;dt.type="MultiPoint",dt.coordinates=(0,b.default)(lt=ft.points).call(lt,0)}if(ft.paths)if(ft.paths.length===1){var ot;dt.type="LineString",dt.coordinates=(0,b.default)(ot=ft.paths[0]).call(ot,0)}else{var it;dt.type="MultiLineString",dt.coordinates=(0,b.default)(it=ft.paths).call(it,0)}if(ft.rings){var yt;dt=N((0,b.default)(yt=ft.rings).call(yt,0))}if((ft.geometry||ft.attributes)&&(dt.type="Feature",dt.geometry=ft.geometry?U(ft.geometry):null,dt.properties=ft.attributes?W(ft.attributes):null,ft.attributes))try{dt.id=Z(ft.attributes,gt)}catch{}return(0,D.default)(dt.geometry)===(0,D.default)({})&&(dt.geometry=null),ft.spatialReference&&ft.spatialReference.wkid&&ft.spatialReference.wkid!==4326&&M.warn("Object converted in non-standard crs - "+(0,D.default)(ft.spatialReference)),dt}function H(ft,gt){var dt,lt,ot,it,yt;gt=gt||"OBJECTID";var Ot={wkid:4326},St={},Gt;switch(ft.type){case"Point":St.x=ft.coordinates[0],St.y=ft.coordinates[1],St.spatialReference=Ot;break;case"MultiPoint":St.points=(0,b.default)(dt=ft.coordinates).call(dt,0),St.spatialReference=Ot;break;case"LineString":St.paths=[(0,b.default)(lt=ft.coordinates).call(lt,0)],St.spatialReference=Ot;break;case"MultiLineString":St.paths=(0,b.default)(ot=ft.coordinates).call(ot,0),St.spatialReference=Ot;break;case"Polygon":St.rings=I((0,b.default)(it=ft.coordinates).call(it,0)),St.spatialReference=Ot;break;case"MultiPolygon":St.rings=G((0,b.default)(yt=ft.coordinates).call(yt,0)),St.spatialReference=Ot;break;case"Feature":ft.geometry&&(St.geometry=H(ft.geometry,gt)),St.attributes=ft.properties?W(ft.properties):{},ft.id&&(St.attributes[gt]=ft.id);break;case"FeatureCollection":for(St=[],Gt=0;Gt<ft.features.length;Gt++)St.push(H(ft.features[Gt],gt));break;case"GeometryCollection":for(St=[],Gt=0;Gt<ft.geometries.length;Gt++)St.push(H(ft.geometries[Gt],gt));break}return St}function V(ft,gt){return H(ft,gt)}function Y(ft,gt){return U(ft,gt)}function $(ft){if(ft.xmin!=="NaN"&&ft.ymin!=="NaN"&&ft.xmax!=="NaN"&&ft.ymax!=="NaN"){var gt=v.LatLng(ft.ymin,ft.xmin),dt=v.LatLng(ft.ymax,ft.xmax);return v.toLatLngBounds(gt,dt)}else return null}function K(ft){return ft=v.toLatLngBounds(ft),{xmin:ft.getSouthWest().lng,ymin:ft.getSouthWest().lat,xmax:ft.getNorthEast().lng,ymax:ft.getNorthEast().lat,spatialReference:{wkid:4326}}}var J=/^(OBJECTID|FID|OID|ID)$/i;function Q(ft){var gt;if(ft.objectIdFieldName)gt=ft.objectIdFieldName;else if(ft.fields){for(var dt=0;dt<=ft.fields.length-1;dt++)if(ft.fields[dt].type==="esriFieldTypeOID"){gt=ft.fields[dt].name;break}if(!gt){for(j=0;j<=ft.fields.length-1;j++)if(ft.fields[j].name.match(J)){gt=ft.fields[j].name;break}}}return gt}function et(ft){for(var gt in ft.attributes)if(gt.match(J))return gt}function nt(ft,gt){var dt,lt=ft.features||ft.results,ot=lt.length;gt?dt=gt:dt=Q(ft);var it={type:"FeatureCollection",features:[]};if(ot)for(var yt=lt.length-1;yt>=0;yt--){var Ot=Y(lt[yt],dt||et(lt[yt]));it.features.push(Ot)}return it}function st(ft){var gt;return ft=(0,C.default)(gt=v.Util).call(gt,ft),ft[ft.length-1]!=="/"&&(ft+="/"),ft}function ut(ft){if(ft.url.indexOf("?")!==-1){ft.requestParams=ft.requestParams||{};var gt=ft.url.substring(ft.url.indexOf("?")+1);ft.url=ft.url.split("?")[0],ft.requestParams=JSON.parse('{"'+decodeURI(gt).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return ft.url=st(ft.url.split("?")[0]),ft}function rt(ft){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(ft)}function ht(ft){var gt;switch(ft){case"Point":gt="esriGeometryPoint";break;case"MultiPoint":gt="esriGeometryMultipoint";break;case"LineString":gt="esriGeometryPolyline";break;case"MultiLineString":gt="esriGeometryPolyline";break;case"Polygon":gt="esriGeometryPolygon";break;case"MultiPolygon":gt="esriGeometryPolygon";break}return gt}function Pt(){M&&M.warn&&M.warn.apply(M,arguments)}function wt(ft){return ft.getSize().x-x.attributionWidthOffset+"px"}function At(ft){if(ft.attributionControl&&!ft.attributionControl._esriAttributionAdded){ft.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>');var gt=document.createElement("style");gt.type="text/css",gt.innerHTML=".esri-truncated-attribution:hover {white-space: normal}",document.getElementsByTagName("head")[0].appendChild(gt),v.DomUtil.addClass(ft.attributionControl._container,"esri-truncated-attribution:hover");var dt=document.createElement("style");dt.type="text/css",dt.innerHTML=".esri-truncated-attribution {vertical-align: -3pxwhite-space: nowrapoverflow: hiddentext-overflow: ellipsisdisplay: inline-blocktransition: 0s white-spacetransition-delay: 1smax-width: "+wt(ft)+"}",document.getElementsByTagName("head")[0].appendChild(dt),v.DomUtil.addClass(ft.attributionControl._container,"esri-truncated-attribution"),ft.on("resize",function(lt){ft.attributionControl._container.style.maxWidth=wt(lt.target)}),ft.on("unload",function(){gt.parentNode.removeChild(gt),dt.parentNode.removeChild(dt);for(var lt=document.querySelectorAll(".esri-leaflet-jsonp"),ot=0;ot<lt.length;ot++)lt.item(ot).parentNode.removeChild(lt.item(ot))}),ft.attributionControl._esriAttributionAdded=!![]}}function Nt(ft){var gt={geometry:null,geometryType:null};if(ft instanceof v.toLatLngBounds||ft instanceof v.LatLngBounds)return gt.geometry=K(ft),gt.geometryType="esriGeometryEnvelope",gt;if(ft.getLatLng&&(ft=ft.getLatLng()),ft instanceof v.LatLng&&(ft={type:"Point",coordinates:[ft.lng,ft.lat]}),ft instanceof v.GeoJSON&&(ft=ft.getLayers()[0].feature.geometry,gt.geometry=V(ft),gt.geometryType=ht(ft.type)),ft.toGeoJSON&&(ft=ft.toGeoJSON()),ft.type==="Feature"&&(ft=ft.geometry),ft.type==="Point"||ft.type==="LineString"||ft.type==="Polygon"||ft.type==="MultiPolygon")return gt.geometry=V(ft),gt.geometryType=ht(ft.type),gt;Pt("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function Lt(ft,gt){y(ft,{},v.Util.bind(function(dt,lt){var ot;if(!dt){gt._esriAttributions=[];for(var it=0;it<lt.contributors.length;it++)for(var yt=lt.contributors[it],Ot=0;Ot<yt.coverageAreas.length;Ot++){var St=yt.coverageAreas[Ot],Gt=v.LatLng(St.bbox[0],St.bbox[1]),Ht=v.LatLng(St.bbox[2],St.bbox[3]);gt._esriAttributions.push({attribution:yt.attribution,score:St.score,bounds:v.toLatLngBounds(Gt,Ht),minZoom:St.zoomMin,maxZoom:St.zoomMax})}(0,f.default)(ot=gt._esriAttributions).call(ot,function(Jt,te){return te.score-Jt.score});var Kt={target:gt};Rt(Kt)}},this))}function Rt(ft){var gt=ft.target,dt=gt._esriAttributions;if(gt&&gt.attributionControl&&dt){for(var lt="",ot=gt.getBounds(),it=v.toLatLngBounds(ot.getSouthWest().wrap(),ot.getNorthEast().wrap()),yt=gt.getZoom(),Ot=0;Ot<dt.length;Ot++){var St=dt[Ot],Gt=St.attribution;!lt.match(Gt)&&St.bounds.intersects(it)&&yt>=St.minZoom&&yt<=St.maxZoom&&(lt+=", "+Gt)}lt=lt.substr(2);var Ht=gt.attributionControl._container.querySelector(".esri-dynamic-attribution");Ht.innerHTML=lt,Ht.style.maxWidth=wt(gt),gt.fire("attributionupdated",{attribution:lt})}}var Tt={warn:Pt,cleanUrl:st,getUrlParams:ut,isArcgisOnline:rt,geojsonTypeToArcGIS:ht,responseToFeatureCollection:nt,geojsonToArcGIS:V,arcgisToGeoJSON:Y,boundsToExtent:K,extentToBounds:$,calcAttributionWidth:wt,setEsriAttribution:At,_setGeometry:Nt,_getAttributionData:Lt,_updateMapAttribution:Rt,_findIdAttributeFromFeature:et,_findIdAttributeFromResponse:Q};z.EsriUtil=Tt;var mt=v.Class.extend({options:{proxy:![],useCors:r},generateSetter:function(gt,dt){return v.Util.bind(function(lt){return this.params[gt]=lt,this},dt)},initialize:function(gt){if(gt.request&&gt.options?(this._service=gt,v.Util.setOptions(this,gt.options)):(v.Util.setOptions(this,gt),this.options.url=st(gt.url)),this.params=v.Util.extend({},this.params||{}),this.setters)for(var dt in this.setters){var lt=this.setters[dt];this[dt]=this.generateSetter(lt,this)}},token:function(gt){return this._service?this._service.authenticate(gt):this.params.token=gt,this},format:function(gt){return this.params.returnUnformattedValues=!gt,this},request:function(gt,dt){return this.options.requestParams&&v.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,gt,dt):this._request("request",this.path,this.params,gt,dt)},_request:function(gt,dt,lt,ot,it){var yt=this.options.proxy?this.options.proxy+"?"+this.options.url+dt:this.options.url+dt;return(gt==="get"||gt==="request")&&!this.options.useCors?w.get.JSONP(yt,lt,ot,it):w[gt](yt,lt,ot,it)}});z.Task=mt;function Ft(ft){return ft=ut(ft),new mt(ft)}var ct=mt.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",returnZ:"returnZ",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!![],returnZ:!![],where:"1=1",outSR:4326,outFields:"*"},within:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(gt){return this._setGeometryParams(gt),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(gt,dt){return gt=v.LatLng(gt),this.params.geometry=[gt.lng,gt.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=dt,this.params.inSR=4326,this},where:function(gt){return this.params.where=gt,this},between:function(gt,dt){return this.params.time=[gt.valueOf(),dt.valueOf()],this},simplify:function(gt,dt){var lt=Math.abs(gt.getBounds().getWest()-gt.getBounds().getEast());return this.params.maxAllowableOffset=lt/gt.getSize().y*dt,this},orderBy:function(gt,dt){return dt=dt||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[gt,dt].join(" "),this},run:function(gt,dt){return this._cleanParams(),this.options.isModern||rt(this.options.url)?(this.params.f="geojson",this.request(function(lt,ot){this._trapSQLerrors(lt),gt.call(dt,lt,ot,ot)},this)):this.request(function(lt,ot){this._trapSQLerrors(lt),gt.call(dt,lt,ot&&nt(ot),ot)},this)},count:function(gt,dt){return this._cleanParams(),this.params.returnCountOnly=!![],this.request(function(lt,ot){gt.call(this,lt,ot&&ot.count,ot)},dt)},ids:function(gt,dt){return this._cleanParams(),this.params.returnIdsOnly=!![],this.request(function(lt,ot){gt.call(this,lt,ot&&ot.objectIds,ot)},dt)},bounds:function(gt,dt){return this._cleanParams(),this.params.returnExtentOnly=!![],this.request(function(lt,ot){ot&&ot.extent&&$(ot.extent)?gt.call(dt,lt,$(ot.extent),ot):(lt={message:"Invalid Bounds"},gt.call(dt,lt,null,ot))},dt)},distinct:function(){return this.params.returnGeometry=![],this.params.returnDistinctValues=!![],this},pixelSize:function(gt){var dt=v.Point(gt);return this.params.pixelSize=[dt.x,dt.y],this},layer:function(gt){return this.path=gt+"/query",this},_trapSQLerrors:function(gt){gt&&gt.code==="400"&&Pt("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(gt){this.params.inSR=4326;var dt=Nt(gt);this.params.geometry=dt.geometry,this.params.geometryType=dt.geometryType}});z.Query=ct;function vt(ft){return new ct(ft)}var Dt=mt.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!![],returnGeometry:!![],returnZ:!![],returnM:![]},layerDefs:function(gt,dt){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+"":"",this.params.layerDefs+=[gt,dt].join(":"),this},simplify:function(gt,dt){var lt=Math.abs(gt.getBounds().getWest()-gt.getBounds().getEast());return this.params.maxAllowableOffset=lt/gt.getSize().y*dt,this},run:function(gt,dt){return this.request(function(lt,ot){gt.call(dt,lt,ot&&nt(ot),ot)},dt)}});z.Find=Dt;function Ct(ft){return new Dt(ft)}var jt=mt.extend({path:"identify",between:function(gt,dt){return this.params.time=[gt.valueOf(),dt.valueOf()],this}});z.Identify=jt;function zt(ft){return new jt(ft)}var Yt={VERSION:l,Support:c,options:x,Util:Tt,get:p,post:h,request:d,Task:mt,task:Ft,Query:ct,Find:Dt,find:Ct,Identify:jt,identify:zt};z.ESRI=Yt;var Zt={};z.default=Zt},27022:function(X,z,e){"use strict";var M=e(49500),F=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Bounds=Q,z.CRS=z.Browser=void 0,z.Class=U,z.L=z.Handler=z.GeoJSON=z.Evented=z.Draggable=z.DomUtil=z.DomEvent=void 0,z.LatLng=ut,z.LatLngBounds=nt,z.Mixin=z.LineUtil=void 0,z.Point=$,z.PosAnimation=z.PolyUtil=void 0,z.Transformation=At,z.Util=void 0,z.bind=s,z.extend=l,z.geoJSON=cr,z.index=z.geoJson=void 0,z.setOptions=y,z.stamp=x,z.toBounds=et,z.toLatLng=rt,z.toLatLngBounds=st,z.toPoint=J,z.toTransformation=Nt,z.version=void 0;var R=F(e(29870)),A=F(e(13288)),T=F(e(20314)),D=F(e(5146)),b=F(e(81360)),C=F(e(81806)),f=F(e(69033)),v=F(e(94221)),m=F(e(22466)),o="1.3.4";z.version=o;var u=A.default;Object.freeze=function(tt){return tt};function l(tt){var q,pt,Mt,Ut;for(pt=1,Mt=arguments.length;pt<Mt;pt++){Ut=arguments[pt];for(q in Ut)tt[q]=Ut[q]}return tt}var r=Object.create||function(){function tt(){}return function(q){return tt.prototype=q,new tt}}();function s(tt,q){var pt=(0,T.default)(Array.prototype);if(tt.bind)return tt.bind.apply(tt,pt.call(arguments,1));var Mt=pt.call(arguments,2);return function(){return tt.apply(q,Mt.length?(0,D.default)(Mt).call(Mt,pt.call(arguments)):arguments)}}var c=0;function x(tt){return tt._leaflet_id=tt._leaflet_id||++c,tt._leaflet_id}function a(tt,q,pt){var Mt,Ut,Xt,se;return se=function(){Mt=![],Ut&&(Xt.apply(pt,Ut),Ut=![])},Xt=function(){Mt?Ut=arguments:(tt.apply(pt,arguments),setTimeout(se,q),Mt=!![])},Xt}function i(tt,q,pt){var Mt=q[1],Ut=q[0],Xt=Mt-Ut;return tt===Mt&&pt?tt:((tt-Ut)%Xt+Xt)%Xt+Ut}function n(){return![]}function h(tt,q){var pt=Math.pow(10,q===void 0?6:q);return Math.round(tt*pt)/pt}function g(tt){return(0,b.default)(tt)?(0,b.default)(tt).call(tt):tt.replace(/^\s+|\s+$/g,"")}function d(tt){return g(tt).split(/\s+/)}function y(tt,q){!tt.hasOwnProperty("options")&&(tt.options=tt.options?r(tt.options):{});for(var pt in q)tt.options[pt]=q[pt];return tt.options}function p(tt,q,pt){var Mt=[];for(var Ut in tt)Mt.push(encodeURIComponent(pt?Ut.toUpperCase():Ut)+"="+encodeURIComponent(tt[Ut]));return(!q||q.indexOf("?")===-1?"?":"&")+Mt.join("&")}var w=/\{ *([\w_-]+) *\}/g;function S(tt,q){return tt.replace(w,function(pt,Mt){var Ut=q[Mt];if(Ut===void 0)throw new Error("No value provided for variable "+pt);return typeof Ut=="function"&&(Ut=Ut(q)),Ut})}var O=Array.isArray||function(tt){return Object.prototype.toString.call(tt)==="[object Array]"};function B(tt,q){for(var pt=0;pt<tt.length;pt++)if(tt[pt]===q)return pt;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(tt){return window["webkit"+tt]||window["moz"+tt]||window["ms"+tt]}var L=0;function E(tt){var q=+new Date,pt=Math.max(0,16-(q-L));return L=q+pt,window.setTimeout(tt,pt)}var N=window.requestAnimationFrame||P("RequestAnimationFrame")||E,I=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(tt){window.clearTimeout(tt)};function G(tt,q,pt){if(pt&&N===E)tt.call(q);else return N.call(window,s(tt,q))}function W(tt){tt&&I.call(window,tt)}var Z=(A.default||Object)({freeze:u,extend:l,create:r,bind:s,lastId:c,stamp:x,throttle:a,wrapNum:i,falseFn:n,formatNum:h,trim:g,splitWords:d,setOptions:y,getParamString:p,template:S,isArray:O,indexOf:B,emptyImageUrl:k,requestFn:N,cancelFn:I,requestAnimFrame:G,cancelAnimFrame:W});z.Util=Z;function U(){}U.extend=function(tt){var q=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},pt=q.__super__=this.prototype,Mt=r(pt);Mt.constructor=q,q.prototype=Mt;for(var Ut in this)this.hasOwnProperty(Ut)&&Ut!=="prototype"&&Ut!=="__super__"&&(q[Ut]=this[Ut]);if(tt.statics&&(l(q,tt.statics),delete tt.statics),(0,C.default)(tt)){var Xt;H((0,C.default)(tt)),l.apply(null,(0,D.default)(Xt=[Mt]).call(Xt,(0,C.default)(tt))),delete tt.includes}return Mt.options&&(tt.options=l(r(Mt.options),tt.options)),l(Mt,tt),Mt._initHooks=[],Mt.callInitHooks=function(){if(!this._initHooksCalled){pt.callInitHooks&&pt.callInitHooks.call(this),this._initHooksCalled=!![];for(var se=0,fe=Mt._initHooks.length;se<fe;se++)Mt._initHooks[se].call(this)}},q},U.include=function(tt){return l(this.prototype,tt),this},U.mergeOptions=function(tt){return l(this.prototype.options,tt),this},U.addInitHook=function(tt){var q=(0,T.default)(Array.prototype).call(arguments,1),pt=typeof tt=="function"?tt:function(){this[tt].apply(this,q)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(pt),this};function H(tt){if(!(typeof Ai>"u"||!Ai||!Ai.Mixin)){tt=O(tt)?tt:[tt];for(var q=0;q<tt.length;q++)tt[q]===Ai.Mixin.Events&&M.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(q,pt,Mt){if((typeof q>"u"?"undefined":(0,R.default)(q))==="object")for(var Ut in q)this._on(Ut,q[Ut],pt);else{q=d(q);for(var Xt=0,se=q.length;Xt<se;Xt++)this._on(q[Xt],pt,Mt)}return this},off:function(q,pt,Mt){if(!q)delete this._events;else if((typeof q>"u"?"undefined":(0,R.default)(q))==="object")for(var Ut in q)this._off(Ut,q[Ut],pt);else{q=d(q);for(var Xt=0,se=q.length;Xt<se;Xt++)this._off(q[Xt],pt,Mt)}return this},_on:function(q,pt,Mt){this._events=this._events||{};var Ut=this._events[q];!Ut&&(Ut=[],this._events[q]=Ut),Mt===this&&(Mt=void 0);for(var Xt={fn:pt,ctx:Mt},se=Ut,fe=0,Me=se.length;fe<Me;fe++)if(se[fe].fn===pt&&se[fe].ctx===Mt)return;se.push(Xt)},_off:function(q,pt,Mt){var Ut,Xt,se;if(this._events&&(Ut=this._events[q],!!Ut)){if(!pt){for(Xt=0,se=Ut.length;Xt<se;Xt++)Ut[Xt].fn=n;delete this._events[q];return}if(Mt===this&&(Mt=void 0),Ut)for(Xt=0,se=Ut.length;Xt<se;Xt++){var fe=Ut[Xt];if(fe.ctx===Mt&&fe.fn===pt){fe.fn=n,this._firingCount&&(this._events[q]=Ut=(0,T.default)(Ut).call(Ut)),(0,f.default)(Ut).call(Ut,Xt,1);return}}}},fire:function(q,pt,Mt){if(!this.listens(q,Mt))return this;var Ut=l({},pt,{type:q,target:this,sourceTarget:pt&&pt.sourceTarget||this});if(this._events){var Xt=this._events[q];if(Xt){this._firingCount=this._firingCount+1||1;for(var se=0,fe=Xt.length;se<fe;se++){var Me=Xt[se];Me.fn.call(Me.ctx||this,Ut)}this._firingCount--}}return Mt&&this._propagateEvent(Ut),this},listens:function(q,pt){var Mt=this._events&&this._events[q];if(Mt&&Mt.length)return!![];if(pt){for(var Ut in this._eventParents)if(this._eventParents[Ut].listens(q,pt))return!![]}return![]},once:function(q,pt,Mt){if((typeof q>"u"?"undefined":(0,R.default)(q))==="object"){for(var Ut in q)this.once(Ut,q[Ut],pt);return this}var Xt=s(function(){this.off(q,pt,Mt).off(q,Xt,Mt)},this);return this.on(q,pt,Mt).on(q,Xt,Mt)},addEventParent:function(q){return this._eventParents=this._eventParents||{},this._eventParents[x(q)]=q,this},removeEventParent:function(q){return this._eventParents&&delete this._eventParents[x(q)],this},_propagateEvent:function(q){for(var pt in this._eventParents)this._eventParents[pt].fire(q.type,l({layer:q.target,propagatedFrom:q.target},q),!![])}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var Y=U.extend(V);z.Evented=Y;function $(tt,q,pt){this.x=pt?Math.round(tt):tt,this.y=pt?Math.round(q):q}var K=v.default||function(tt){return tt>0?Math.floor(tt):Math.ceil(tt)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(q){return this.clone()._add(J(q))},_add:function(q){return this.x+=q.x,this.y+=q.y,this},subtract:function(q){return this.clone()._subtract(J(q))},_subtract:function(q){return this.x-=q.x,this.y-=q.y,this},divideBy:function(q){return this.clone()._divideBy(q)},_divideBy:function(q){return this.x/=q,this.y/=q,this},multiplyBy:function(q){return this.clone()._multiplyBy(q)},_multiplyBy:function(q){return this.x*=q,this.y*=q,this},scaleBy:function(q){return new $(this.x*q.x,this.y*q.y)},unscaleBy:function(q){return new $(this.x/q.x,this.y/q.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(q){q=J(q);var pt=q.x-this.x,Mt=q.y-this.y;return Math.sqrt(pt*pt+Mt*Mt)},equals:function(q){return q=J(q),q.x===this.x&&q.y===this.y},contains:function(q){return q=J(q),Math.abs(q.x)<=Math.abs(this.x)&&Math.abs(q.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function J(tt,q,pt){return tt instanceof $?tt:O(tt)?new $(tt[0],tt[1]):tt==null?tt:(typeof tt>"u"?"undefined":(0,R.default)(tt))==="object"&&"x"in tt&&"y"in tt?new $(tt.x,tt.y):new $(tt,q,pt)}function Q(tt,q){if(tt)for(var pt=q?[tt,q]:tt,Mt=0,Ut=pt.length;Mt<Ut;Mt++)this.extend(pt[Mt])}Q.prototype={extend:function(q){return q=J(q),!this.min&&!this.max?(this.min=q.clone(),this.max=q.clone()):(this.min.x=Math.min(q.x,this.min.x),this.max.x=Math.max(q.x,this.max.x),this.min.y=Math.min(q.y,this.min.y),this.max.y=Math.max(q.y,this.max.y)),this},getCenter:function(q){return new $((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,q)},getBottomLeft:function(){return new $(this.min.x,this.max.y)},getTopRight:function(){return new $(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(q){var pt,Mt;return typeof q[0]=="number"||q instanceof $?q=J(q):q=et(q),q instanceof Q?(pt=q.min,Mt=q.max):pt=Mt=q,pt.x>=this.min.x&&Mt.x<=this.max.x&&pt.y>=this.min.y&&Mt.y<=this.max.y},intersects:function(q){q=et(q);var pt=this.min,Mt=this.max,Ut=q.min,Xt=q.max,se=Xt.x>=pt.x&&Ut.x<=Mt.x,fe=Xt.y>=pt.y&&Ut.y<=Mt.y;return se&&fe},overlaps:function(q){q=et(q);var pt=this.min,Mt=this.max,Ut=q.min,Xt=q.max,se=Xt.x>pt.x&&Ut.x<Mt.x,fe=Xt.y>pt.y&&Ut.y<Mt.y;return se&&fe},isValid:function(){return!!(this.min&&this.max)}};function et(tt,q){return!tt||tt instanceof Q?tt:new Q(tt,q)}function nt(tt,q){if(tt)for(var pt=q?[tt,q]:tt,Mt=0,Ut=pt.length;Mt<Ut;Mt++)this.extend(pt[Mt])}nt.prototype={extend:function(q){var pt=this._southWest,Mt=this._northEast,Ut,Xt;if(q instanceof ut)Ut=q,Xt=q;else if(q instanceof nt){if(Ut=q._southWest,Xt=q._northEast,!Ut||!Xt)return this}else return q?this.extend(rt(q)||st(q)):this;return!pt&&!Mt?(this._southWest=new ut(Ut.lat,Ut.lng),this._northEast=new ut(Xt.lat,Xt.lng)):(pt.lat=Math.min(Ut.lat,pt.lat),pt.lng=Math.min(Ut.lng,pt.lng),Mt.lat=Math.max(Xt.lat,Mt.lat),Mt.lng=Math.max(Xt.lng,Mt.lng)),this},pad:function(q){var pt=this._southWest,Mt=this._northEast,Ut=Math.abs(pt.lat-Mt.lat)*q,Xt=Math.abs(pt.lng-Mt.lng)*q;return new nt(new ut(pt.lat-Ut,pt.lng-Xt),new ut(Mt.lat+Ut,Mt.lng+Xt))},getCenter:function(){return new ut((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ut(this.getNorth(),this.getWest())},getSouthEast:function(){return new ut(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(q){typeof q[0]=="number"||q instanceof ut||"lat"in q?q=rt(q):q=st(q);var pt=this._southWest,Mt=this._northEast,Ut,Xt;return q instanceof nt?(Ut=q.getSouthWest(),Xt=q.getNorthEast()):Ut=Xt=q,Ut.lat>=pt.lat&&Xt.lat<=Mt.lat&&Ut.lng>=pt.lng&&Xt.lng<=Mt.lng},intersects:function(q){q=st(q);var pt=this._southWest,Mt=this._northEast,Ut=q.getSouthWest(),Xt=q.getNorthEast(),se=Xt.lat>=pt.lat&&Ut.lat<=Mt.lat,fe=Xt.lng>=pt.lng&&Ut.lng<=Mt.lng;return se&&fe},overlaps:function(q){q=st(q);var pt=this._southWest,Mt=this._northEast,Ut=q.getSouthWest(),Xt=q.getNorthEast(),se=Xt.lat>pt.lat&&Ut.lat<Mt.lat,fe=Xt.lng>pt.lng&&Ut.lng<Mt.lng;return se&&fe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(q,pt){return q?(q=st(q),this._southWest.equals(q.getSouthWest(),pt)&&this._northEast.equals(q.getNorthEast(),pt)):![]},isValid:function(){return!!(this._southWest&&this._northEast)}};function st(tt,q){return tt instanceof nt?tt:new nt(tt,q)}function ut(tt,q,pt){if(isNaN(tt)||isNaN(q))throw new Error("Invalid LatLng object: ("+tt+", "+q+")");this.lat=+tt,this.lng=+q,pt!==void 0&&(this.alt=+pt)}ut.prototype={equals:function(q,pt){if(!q)return![];q=rt(q);var Mt=Math.max(Math.abs(this.lat-q.lat),Math.abs(this.lng-q.lng));return Mt<=(pt===void 0?1e-9:pt)},toString:function(q){return"LatLng("+h(this.lat,q)+", "+h(this.lng,q)+")"},distanceTo:function(q){return Pt.distance(this,rt(q))},wrap:function(){return Pt.wrapLatLng(this)},toBounds:function(q){var pt=180*q/40075017,Mt=pt/Math.cos(Math.PI/180*this.lat);return st([this.lat-pt,this.lng-Mt],[this.lat+pt,this.lng+Mt])},clone:function(){return new ut(this.lat,this.lng,this.alt)}};function rt(tt,q,pt){return tt instanceof ut?tt:O(tt)&&(0,R.default)(tt[0])!=="object"?tt.length===3?new ut(tt[0],tt[1],tt[2]):tt.length===2?new ut(tt[0],tt[1]):null:tt==null?tt:(typeof tt>"u"?"undefined":(0,R.default)(tt))==="object"&&"lat"in tt?new ut(tt.lat,"lng"in tt?tt.lng:tt.lon,tt.alt):q===void 0?null:new ut(tt,q,pt)}var ht={latLngToPoint:function(q,pt){var Mt=this.projection.project(q),Ut=this.scale(pt);return this.transformation._transform(Mt,Ut)},pointToLatLng:function(q,pt){var Mt=this.scale(pt),Ut=this.transformation.untransform(q,Mt);return this.projection.unproject(Ut)},project:function(q){return this.projection.project(q)},unproject:function(q){return this.projection.unproject(q)},scale:function(q){return 256*Math.pow(2,q)},zoom:function(q){return Math.log(q/256)/Math.LN2},getProjectedBounds:function(q){if(this.infinite)return null;var pt=this.projection.bounds,Mt=this.scale(q),Ut=this.transformation.transform(pt.min,Mt),Xt=this.transformation.transform(pt.max,Mt);return new Q(Ut,Xt)},infinite:![],wrapLatLng:function(q){var pt=this.wrapLng?i(q.lng,this.wrapLng,!![]):q.lng,Mt=this.wrapLat?i(q.lat,this.wrapLat,!![]):q.lat,Ut=q.alt;return new ut(Mt,pt,Ut)},wrapLatLngBounds:function(q){var pt=q.getCenter(),Mt=this.wrapLatLng(pt),Ut=pt.lat-Mt.lat,Xt=pt.lng-Mt.lng;if(Ut===0&&Xt===0)return q;var se=q.getSouthWest(),fe=q.getNorthEast(),Me=new ut(se.lat-Ut,se.lng-Xt),Re=new ut(fe.lat-Ut,fe.lng-Xt);return new nt(Me,Re)}};z.CRS=ht;var Pt=l({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(q,pt){var Mt=Math.PI/180,Ut=q.lat*Mt,Xt=pt.lat*Mt,se=Math.sin((pt.lat-q.lat)*Mt/2),fe=Math.sin((pt.lng-q.lng)*Mt/2),Me=se*se+Math.cos(Ut)*Math.cos(Xt)*fe*fe,Re=2*Math.atan2(Math.sqrt(Me),Math.sqrt(1-Me));return this.R*Re}}),wt={R:6378137,MAX_LATITUDE:85.0511287798,project:function(q){var pt=Math.PI/180,Mt=this.MAX_LATITUDE,Ut=Math.max(Math.min(Mt,q.lat),-Mt),Xt=Math.sin(Ut*pt);return new $(this.R*q.lng*pt,this.R*Math.log((1+Xt)/(1-Xt))/2)},unproject:function(q){var pt=180/Math.PI;return new ut((2*Math.atan(Math.exp(q.y/this.R))-Math.PI/2)*pt,q.x*pt/this.R)},bounds:function(){var tt=6378137*Math.PI;return new Q([-tt,-tt],[tt,tt])}()};function At(tt,q,pt,Mt){if(O(tt)){this._a=tt[0],this._b=tt[1],this._c=tt[2],this._d=tt[3];return}this._a=tt,this._b=q,this._c=pt,this._d=Mt}At.prototype={transform:function(q,pt){return this._transform(q.clone(),pt)},_transform:function(q,pt){return pt=pt||1,q.x=pt*(this._a*q.x+this._b),q.y=pt*(this._c*q.y+this._d),q},untransform:function(q,pt){return pt=pt||1,new $((q.x/pt-this._b)/this._a,(q.y/pt-this._d)/this._c)}};function Nt(tt,q,pt,Mt){return new At(tt,q,pt,Mt)}var Lt=l({},Pt,{code:"EPSG:3857",projection:wt,transformation:function(){var tt=.5/(Math.PI*wt.R);return Nt(tt,.5,-tt,.5)}()}),Rt=l({},Lt,{code:"EPSG:900913"});function Tt(tt){return document.createElementNS("http://www.w3.org/2000/svg",tt)}function mt(tt,q){var pt="",Mt,Ut,Xt,se,fe,Me;for(Mt=0,Xt=tt.length;Mt<Xt;Mt++){for(fe=tt[Mt],Ut=0,se=fe.length;Ut<se;Ut++)Me=fe[Ut],pt+=(Ut?"L":"M")+Me.x+" "+Me.y;pt+=q?It?"z":"x":""}return pt||"M0 0"}var Ft=document.documentElement.style,ct="ActiveXObject"in window,vt=ct&&!document.addEventListener,Dt="msLaunchUri"in navigator&&!("documentMode"in document),Ct=_t("webkit"),jt=_t("android"),zt=_t("android 2")||_t("android 3"),Yt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Zt=jt&&_t("Google")&&Yt<537&&!("AudioNode"in window),ft=!!window.opera,gt=_t("chrome"),dt=_t("gecko")&&!Ct&&!ft&&!ct,lt=!gt&&_t("safari"),ot=_t("phantom"),it="OTransition"in Ft,yt=navigator.platform.indexOf("Win")===0,Ot=ct&&"transition"in Ft,St="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zt,Gt="MozPerspective"in Ft,Ht=!window.L_DISABLE_3D&&(Ot||St||Gt)&&!it&&!ot,Kt=typeof orientation<"u"||_t("mobile"),Jt=Kt&&Ct,te=Kt&&St,ie=!window.PointerEvent&&window.MSPointerEvent,oe=!!(window.PointerEvent||ie),he=!window.L_NO_TOUCH&&(oe||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),ne=Kt&&ft,ce=Kt&&dt,ge=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ae=function(){return!!document.createElement("canvas").getContext}(),It=!!(document.createElementNS&&Tt("svg").createSVGRect),Wt=!It&&function(){try{var tt=document.createElement("div");tt.innerHTML='<v:shape adj="1"/>';var q=tt.firstChild;return q.style.behavior="url(#default#VML)",q&&(0,R.default)(q.adj)==="object"}catch{return![]}}();function _t(tt){return navigator.userAgent.toLowerCase().indexOf(tt)>=0}var ee=(A.default||Object)({ie:ct,ielt9:vt,edge:Dt,webkit:Ct,android:jt,android23:zt,androidStock:Zt,opera:ft,chrome:gt,gecko:dt,safari:lt,phantom:ot,opera12:it,win:yt,ie3d:Ot,webkit3d:St,gecko3d:Gt,any3d:Ht,mobile:Kt,mobileWebkit:Jt,mobileWebkit3d:te,msPointer:ie,pointer:oe,touch:he,mobileOpera:ne,mobileGecko:ce,retina:ge,canvas:Ae,svg:It,vml:Wt});z.Browser=ee;var re=ie?"MSPointerDown":"pointerdown",de=ie?"MSPointerMove":"pointermove",Se=ie?"MSPointerUp":"pointerup",Pe=ie?"MSPointerCancel":"pointercancel",De=["INPUT","SELECT","OPTION"],Ie={},pe=![],Oe=0;function Ne(tt,q,pt,Mt){return q==="touchstart"?be(tt,pt,Mt):q==="touchmove"?_(tt,pt,Mt):q==="touchend"&&at(tt,pt,Mt),this}function Ve(tt,q,pt){var Mt=tt["_leaflet_"+q+pt];return q==="touchstart"?tt.removeEventListener(re,Mt,![]):q==="touchmove"?tt.removeEventListener(de,Mt,![]):q==="touchend"&&(tt.removeEventListener(Se,Mt,![]),tt.removeEventListener(Pe,Mt,![])),this}function be(tt,q,pt){var Mt=s(function(Ut){if(Ut.pointerType!=="mouse"&&Ut.MSPOINTER_TYPE_MOUSE&&Ut.pointerType!==Ut.MSPOINTER_TYPE_MOUSE)if(De.indexOf(Ut.target.tagName)<0)ui(Ut);else return;Ze(Ut,q)});tt["_leaflet_touchstart"+pt]=Mt,tt.addEventListener(re,Mt,![]),!pe&&(document.documentElement.addEventListener(re,Be,!![]),document.documentElement.addEventListener(de,Ue,!![]),document.documentElement.addEventListener(Se,ke,!![]),document.documentElement.addEventListener(Pe,ke,!![]),pe=!![])}function Be(tt){Ie[tt.pointerId]=tt,Oe++}function Ue(tt){Ie[tt.pointerId]&&(Ie[tt.pointerId]=tt)}function ke(tt){delete Ie[tt.pointerId],Oe--}function Ze(tt,q){tt.touches=[];for(var pt in Ie)tt.touches.push(Ie[pt]);tt.changedTouches=[tt],q(tt)}function _(tt,q,pt){var Mt=function(Xt){(Xt.pointerType===Xt.MSPOINTER_TYPE_MOUSE||Xt.pointerType==="mouse")&&Xt.buttons===0||Ze(Xt,q)};tt["_leaflet_touchmove"+pt]=Mt,tt.addEventListener(de,Mt,![])}function at(tt,q,pt){var Mt=function(Xt){Ze(Xt,q)};tt["_leaflet_touchend"+pt]=Mt,tt.addEventListener(Se,Mt,![]),tt.addEventListener(Pe,Mt,![])}var xt=ie?"MSPointerDown":oe?"pointerdown":"touchstart",bt=ie?"MSPointerUp":oe?"pointerup":"touchend",Bt="_leaflet_";function Qt(tt,q,pt){var Mt,Ut,Xt=![],se=250;function fe(Re){var je;if(oe){if(!Dt||Re.pointerType==="mouse")return;je=Oe}else je=Re.touches.length;if(!(je>1)){var Je=Date.now(),_e=Je-(Mt||Je);Ut=Re.touches?Re.touches[0]:Re,Xt=_e>0&&_e<=se,Mt=Je}}function Me(Re){if(Xt&&!Ut.cancelBubble){if(oe){if(!Dt||Re.pointerType==="mouse")return;var je={},Je,_e;for(_e in Ut)Je=Ut[_e],je[_e]=Je&&Je.bind?Je.bind(Ut):Je;Ut=je}Ut.type="dblclick",q(Ut),Mt=null}}return tt[Bt+xt+pt]=fe,tt[Bt+bt+pt]=Me,tt[Bt+"dblclick"+pt]=q,tt.addEventListener(xt,fe,![]),tt.addEventListener(bt,Me,![]),tt.addEventListener("dblclick",q,![]),this}function ue(tt,q){var pt=tt[Bt+xt+q],Mt=tt[Bt+bt+q],Ut=tt[Bt+"dblclick"+q];return tt.removeEventListener(xt,pt,![]),tt.removeEventListener(bt,Mt,![]),!Dt&&tt.removeEventListener("dblclick",Ut,![]),this}var Ce=$t(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Te=$t(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),He=Te==="webkitTransition"||Te==="OTransition"?Te+"End":"transitionend";function Vt(tt){return typeof tt=="string"?document.getElementById(tt):tt}function qt(tt,q){var pt=tt.style[q]||tt.currentStyle&&tt.currentStyle[q];if((!pt||pt==="auto")&&document.defaultView){var Mt=document.defaultView.getComputedStyle(tt,null);pt=Mt?Mt[q]:null}return pt==="auto"?null:pt}function ae(tt,q,pt){var Mt=document.createElement(tt);return Mt.className=q||"",pt&&pt.appendChild(Mt),Mt}function ve(tt){var q=tt.parentNode;q&&q.removeChild(tt)}function xe(tt){for(;tt.firstChild;)tt.removeChild(tt.firstChild)}function ye(tt){var q=tt.parentNode;q.lastChild!==tt&&q.appendChild(tt)}function Le(tt){var q=tt.parentNode;q.firstChild!==tt&&q.insertBefore(tt,q.firstChild)}function Fe(tt,q){if(tt.classList!==void 0)return tt.classList.contains(q);var pt=We(tt);return pt.length>0&&new RegExp("(^|\\s)"+q+"(\\s|$)").test(pt)}function we(tt,q){if(tt.classList!==void 0)for(var pt=d(q),Mt=0,Ut=pt.length;Mt<Ut;Mt++)tt.classList.add(pt[Mt]);else if(!Fe(tt,q)){var Xt=We(tt);Ge(tt,(Xt?Xt+" ":"")+q)}}function ze(tt,q){tt.classList!==void 0?tt.classList.remove(q):Ge(tt,g((" "+We(tt)+" ").replace(" "+q+" "," ")))}function Ge(tt,q){tt.className.baseVal===void 0?tt.className=q:tt.className.baseVal=q}function We(tt){return tt.className.baseVal===void 0?tt.className:tt.className.baseVal}function Et(tt,q){"opacity"in tt.style?tt.style.opacity=q:"filter"in tt.style&&kt(tt,q)}function kt(tt,q){var pt=![],Mt="DXImageTransform.Microsoft.Alpha";try{pt=tt.filters.item(Mt)}catch{if(q===1)return}q=Math.round(q*100),pt?(pt.Enabled=q!==100,pt.Opacity=q):tt.style.filter+=" progid:"+Mt+"(opacity="+q+")"}function $t(tt){for(var q=document.documentElement.style,pt=0;pt<tt.length;pt++)if(tt[pt]in q)return tt[pt];return![]}function le(tt,q,pt){var Mt=q||new $(0,0);tt.style[Ce]=(Ot?"translate("+Mt.x+"px,"+Mt.y+"px)":"translate3d("+Mt.x+"px,"+Mt.y+"px,0)")+(pt?" scale("+pt+")":"")}function me(tt,q){tt._leaflet_pos=q,Ht?le(tt,q):(tt.style.left=q.x+"px",tt.style.top=q.y+"px")}function Ee(tt){return tt._leaflet_pos||new $(0,0)}var Ye,Qe,Ke;if("onselectstart"in document)Ye=function(){ni(window,"selectstart",ui)},Qe=function(){si(window,"selectstart",ui)};else{var qe=$t(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ye=function(){if(qe){var q=document.documentElement.style;Ke=q[qe],q[qe]="none"}},Qe=function(){qe&&(document.documentElement.style[qe]=Ke,Ke=void 0)}}function ii(){ni(window,"dragstart",ui)}function Ei(){si(window,"dragstart",ui)}var li,$e;function Xe(tt){for(;tt.tabIndex===-1;)tt=tt.parentNode;tt.style&&(ei(),li=tt,$e=tt.style.outline,tt.style.outline="none",ni(window,"keydown",ei))}function ei(){li&&(li.style.outline=$e,li=void 0,$e=void 0,si(window,"keydown",ei))}function ri(tt){do tt=tt.parentNode;while((!tt.offsetWidth||!tt.offsetHeight)&&tt!==document.body);return tt}function ai(tt){var q=tt.getBoundingClientRect();return{x:q.width/tt.offsetWidth||1,y:q.height/tt.offsetHeight||1,boundingClientRect:q}}var hi=(A.default||Object)({TRANSFORM:Ce,TRANSITION:Te,TRANSITION_END:He,get:Vt,getStyle:qt,create:ae,remove:ve,empty:xe,toFront:ye,toBack:Le,hasClass:Fe,addClass:we,removeClass:ze,setClass:Ge,getClass:We,setOpacity:Et,testProp:$t,setTransform:le,setPosition:me,getPosition:Ee,disableTextSelection:Ye,enableTextSelection:Qe,disableImageDrag:ii,enableImageDrag:Ei,preventOutline:Xe,restoreOutline:ei,getSizedParentNode:ri,getScale:ai});z.DomUtil=hi;function ni(tt,q,pt,Mt){if((typeof q>"u"?"undefined":(0,R.default)(q))==="object")for(var Ut in q)ci(tt,Ut,q[Ut],pt);else{q=d(q);for(var Xt=0,se=q.length;Xt<se;Xt++)ci(tt,q[Xt],pt,Mt)}return this}var ti="_leaflet_events";function si(tt,q,pt,Mt){if((typeof q>"u"?"undefined":(0,R.default)(q))==="object")for(var Ut in q)oi(tt,Ut,q[Ut],pt);else if(q){q=d(q);for(var Xt=0,se=q.length;Xt<se;Xt++)oi(tt,q[Xt],pt,Mt)}else{for(var fe in tt[ti])oi(tt,fe,tt[ti][fe]);delete tt[ti]}return this}function ci(tt,q,pt,Mt){var Ut=q+x(pt)+(Mt?"_"+x(Mt):"");if(tt[ti]&&tt[ti][Ut])return this;var Xt=function(Me){return pt.call(Mt||tt,Me||window.event)},se=Xt;oe&&q.indexOf("touch")===0?Ne(tt,q,Xt,Ut):he&&q==="dblclick"&&Qt&&!(oe&&gt)?Qt(tt,Xt,Ut):"addEventListener"in tt?q==="mousewheel"?tt.addEventListener("onwheel"in tt?"wheel":"mousewheel",Xt,![]):q==="mouseenter"||q==="mouseleave"?(Xt=function(Me){Me=Me||window.event,Ji(tt,Me)&&se(Me)},tt.addEventListener(q==="mouseenter"?"mouseover":"mouseout",Xt,![])):(q==="click"&&jt&&(Xt=function(Me){fr(Me,se)}),tt.addEventListener(q,Xt,![])):"attachEvent"in tt&&tt.attachEvent("on"+q,Xt),tt[ti]=tt[ti]||{},tt[ti][Ut]=Xt}function oi(tt,q,pt,Mt){var Ut=q+x(pt)+(Mt?"_"+x(Mt):""),Xt=tt[ti]&&tt[ti][Ut];if(!Xt)return this;oe&&q.indexOf("touch")===0?Ve(tt,q,Ut):he&&q==="dblclick"&&ue&&!(oe&&gt)?ue(tt,Ut):"removeEventListener"in tt?q==="mousewheel"?tt.removeEventListener("onwheel"in tt?"wheel":"mousewheel",Xt,![]):tt.removeEventListener(q==="mouseenter"?"mouseover":q==="mouseleave"?"mouseout":q,Xt,![]):"detachEvent"in tt&&tt.detachEvent("on"+q,Xt),tt[ti][Ut]=null}function di(tt){return tt.stopPropagation?tt.stopPropagation():tt.originalEvent?tt.originalEvent._stopped=!![]:tt.cancelBubble=!![],Di(tt),this}function gi(tt){return ci(tt,"mousewheel",di),this}function Ki(tt){return ni(tt,"mousedown touchstart dblclick",di),ci(tt,"click",Pi),this}function ui(tt){return tt.preventDefault?tt.preventDefault():tt.returnValue=![],this}function Mi(tt){return ui(tt),di(tt),this}function yi(tt,q){if(!q)return new $(tt.clientX,tt.clientY);var pt=ai(q),Mt=pt.boundingClientRect;return new $((tt.clientX-Mt.left)/pt.x-q.clientLeft,(tt.clientY-Mt.top)/pt.y-q.clientTop)}var Ci=yt&&gt?2*window.devicePixelRatio:dt?window.devicePixelRatio:1;function pi(tt){return Dt?tt.wheelDeltaY/2:tt.deltaY&&tt.deltaMode===0?-tt.deltaY/Ci:tt.deltaY&&tt.deltaMode===1?-tt.deltaY*20:tt.deltaY&&tt.deltaMode===2?-tt.deltaY*60:tt.deltaX||tt.deltaZ?0:tt.wheelDelta?(tt.wheelDeltaY||tt.wheelDelta)/2:tt.detail&&Math.abs(tt.detail)<32765?-tt.detail*20:tt.detail?tt.detail/-32765*60:0}var wi={};function Pi(tt){wi[tt.type]=!![]}function Di(tt){var q=wi[tt.type];return wi[tt.type]=![],q}function Ji(tt,q){var pt=q.relatedTarget;if(!pt)return!![];try{for(;pt&&pt!==tt;)pt=pt.parentNode}catch{return![]}return pt!==tt}var Ni;function fr(tt,q){var pt=tt.timeStamp||tt.originalEvent&&tt.originalEvent.timeStamp,Mt=Ni&&pt-Ni;if(Mt&&Mt>100&&Mt<500||tt.target._simulatedClick&&!tt._simulated){Mi(tt);return}Ni=pt,q(tt)}var dr=(A.default||Object)({on:ni,off:si,stopPropagation:di,disableScrollPropagation:gi,disableClickPropagation:Ki,preventDefault:ui,stop:Mi,getMousePosition:yi,getWheelDelta:pi,fakeStop:Pi,skipped:Di,isExternalTarget:Ji,addListener:ni,removeListener:si});z.DomEvent=dr;var vr=Y.extend({run:function(q,pt,Mt,Ut){this.stop(),this._el=q,this._inProgress=!![],this._duration=Mt||.25,this._easeOutPower=1/Math.max(Ut||.5,.2),this._startPos=Ee(q),this._offset=pt.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!![]),this._complete())},_animate:function(){this._animId=G(this._animate,this),this._step()},_step:function(q){var pt=+new Date-this._startTime,Mt=this._duration*1e3;pt<Mt?this._runFrame(this._easeOut(pt/Mt),q):(this._runFrame(1),this._complete())},_runFrame:function(q,pt){var Mt=this._startPos.add(this._offset.multiplyBy(q));pt&&Mt._round(),me(this._el,Mt),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=![],this.fire("end")},_easeOut:function(q){return 1-Math.pow(1-q,this._easeOutPower)}});z.PosAnimation=vr;var Bi=U.extend({initialize:function(q){this._map=q},enable:function(){return this._enabled?this:(this._enabled=!![],this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=![],this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});z.Handler=Bi,Bi.addTo=function(tt,q){return tt.addHandler(q,this),this};var gr={Events:V};z.Mixin=gr;var Qi=he?"touchstart mousedown":"mousedown",qi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ki={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},mi=Y.extend({options:{clickTolerance:3},initialize:function(q,pt,Mt,Ut){y(this,Ut),this._element=q,this._dragStartTarget=pt||q,this._preventOutline=Mt},enable:function(){this._enabled||(ni(this._dragStartTarget,Qi,this._onDown,this),this._enabled=!![])},disable:function(){this._enabled&&(mi._dragging===this&&this.finishDrag(),si(this._dragStartTarget,Qi,this._onDown,this),this._enabled=![],this._moved=![])},_onDown:function(q){if(!(q._simulated||!this._enabled)&&(this._moved=![],!Fe(this._element,"leaflet-zoom-anim")&&!(mi._dragging||q.shiftKey||q.which!==1&&q.button!==1&&!q.touches)&&(mi._dragging=this,this._preventOutline&&Xe(this._element),ii(),Ye(),!this._moving))){this.fire("down");var pt=q.touches?q.touches[0]:q,Mt=ri(this._element);this._startPoint=new $(pt.clientX,pt.clientY),this._parentScale=ai(Mt),ni(document,ki[q.type],this._onMove,this),ni(document,qi[q.type],this._onUp,this)}},_onMove:function(q){if(!(q._simulated||!this._enabled)){if(q.touches&&q.touches.length>1){this._moved=!![];return}var pt=q.touches&&q.touches.length===1?q.touches[0]:q,Mt=new $(pt.clientX,pt.clientY)._subtract(this._startPoint);!Mt.x&&!Mt.y||Math.abs(Mt.x)+Math.abs(Mt.y)<this.options.clickTolerance||(Mt.x/=this._parentScale.x,Mt.y/=this._parentScale.y,ui(q),!this._moved&&(this.fire("dragstart"),this._moved=!![],this._startPos=Ee(this._element).subtract(Mt),we(document.body,"leaflet-dragging"),this._lastTarget=q.target||q.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(Mt),this._moving=!![],W(this._animRequest),this._lastEvent=q,this._animRequest=G(this._updatePosition,this,!![]))}},_updatePosition:function(){var q={originalEvent:this._lastEvent};this.fire("predrag",q),me(this._element,this._newPos),this.fire("drag",q)},_onUp:function(q){q._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){ze(document.body,"leaflet-dragging"),this._lastTarget&&(ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var q in ki)si(document,ki[q],this._onMove,this),si(document,qi[q],this._onUp,this);Ei(),Qe(),this._moved&&this._moving&&(W(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=![],mi._dragging=![]}});z.Draggable=mi;function _i(tt,q){if(!q||!tt.length)return(0,T.default)(tt).call(tt);var pt=q*q;return tt=mr(tt,pt),tt=xr(tt,pt),tt}function tr(tt,q,pt){return Math.sqrt(Si(tt,q,pt,!![]))}function pr(tt,q,pt){return Si(tt,q,pt)}function xr(tt,q){var pt=tt.length,Mt=(typeof Uint8Array>"u"||typeof Uint8Array>"u"?"undefined":(0,R.default)(Uint8Array))!==void 0+""?Uint8Array:Array,Ut=new Mt(pt);Ut[0]=Ut[pt-1]=1,zi(tt,Ut,q,0,pt-1);var Xt,se=[];for(Xt=0;Xt<pt;Xt++)Ut[Xt]&&se.push(tt[Xt]);return se}function zi(tt,q,pt,Mt,Ut){var Xt=0,se,fe,Me;for(fe=Mt+1;fe<=Ut-1;fe++)Me=Si(tt[fe],tt[Mt],tt[Ut],!![]),Me>Xt&&(se=fe,Xt=Me);Xt>pt&&(q[se]=1,zi(tt,q,pt,Mt,se),zi(tt,q,pt,se,Ut))}function mr(tt,q){for(var pt=[tt[0]],Mt=1,Ut=0,Xt=tt.length;Mt<Xt;Mt++)yr(tt[Mt],tt[Ut])>q&&(pt.push(tt[Mt]),Ut=Mt);return Ut<Xt-1&&pt.push(tt[Xt-1]),pt}var er;function ir(tt,q,pt,Mt,Ut){var Xt=Mt?er:xi(tt,pt),se=xi(q,pt),fe,Me,Re;for(er=se;[];){if(!(Xt|se))return[tt,q];if(Xt&se)return![];fe=Xt||se,Me=Li(tt,q,fe,pt,Ut),Re=xi(Me,pt),fe===Xt?(tt=Me,Xt=Re):(q=Me,se=Re)}}function Li(tt,q,pt,Mt,Ut){var Xt=q.x-tt.x,se=q.y-tt.y,fe=Mt.min,Me=Mt.max,Re,je;return pt&8?(Re=tt.x+Xt*(Me.y-tt.y)/se,je=Me.y):pt&4?(Re=tt.x+Xt*(fe.y-tt.y)/se,je=fe.y):pt&2?(Re=Me.x,je=tt.y+se*(Me.x-tt.x)/Xt):pt&1&&(Re=fe.x,je=tt.y+se*(fe.x-tt.x)/Xt),new $(Re,je,Ut)}function xi(tt,q){var pt=0;return tt.x<q.min.x?pt|=1:tt.x>q.max.x&&(pt|=2),tt.y<q.min.y?pt|=4:tt.y>q.max.y&&(pt|=8),pt}function yr(tt,q){var pt=q.x-tt.x,Mt=q.y-tt.y;return pt*pt+Mt*Mt}function Si(tt,q,pt,Mt){var Ut=q.x,Xt=q.y,se=pt.x-Ut,fe=pt.y-Xt,Me=se*se+fe*fe,Re;return Me>0&&(Re=((tt.x-Ut)*se+(tt.y-Xt)*fe)/Me,Re>1?(Ut=pt.x,Xt=pt.y):Re>0&&(Ut+=se*Re,Xt+=fe*Re)),se=tt.x-Ut,fe=tt.y-Xt,Mt?se*se+fe*fe:new $(Ut,Xt)}function fi(tt){return!O(tt[0])||(0,R.default)(tt[0][0])!=="object"&&typeof tt[0][0]<"u"}function rr(tt){return M.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fi(tt)}var Cr=(A.default||Object)({simplify:_i,pointToSegmentDistance:tr,closestPointOnSegment:pr,clipSegment:ir,_getEdgeIntersection:Li,_getBitCode:xi,_sqClosestPointOnSegment:Si,isFlat:fi,_flat:rr});z.LineUtil=Cr;function nr(tt,q,pt){var Mt,Ut=[1,4,2,8],Xt,se,fe,Me,Re,je,Je,_e;for(Xt=0,je=tt.length;Xt<je;Xt++)tt[Xt]._code=xi(tt[Xt],q);for(fe=0;fe<4;fe++){for(Je=Ut[fe],Mt=[],Xt=0,je=tt.length,se=je-1;Xt<je;se=Xt++)Me=tt[Xt],Re=tt[se],Me._code&Je?!(Re._code&Je)&&(_e=Li(Re,Me,Je,q,pt),_e._code=xi(_e,q),Mt.push(_e)):(Re._code&Je&&(_e=Li(Re,Me,Je,q,pt),_e._code=xi(_e,q),Mt.push(_e)),Mt.push(Me));tt=Mt}return tt}var wr=(A.default||Object)({clipPolygon:nr});z.PolyUtil=wr;var Vi={project:function(q){return new $(q.lng,q.lat)},unproject:function(q){return new ut(q.y,q.x)},bounds:new Q([-180,-90],[180,90])},Gi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(q){var pt=Math.PI/180,Mt=this.R,Ut=q.lat*pt,Xt=this.R_MINOR/Mt,se=Math.sqrt(1-Xt*Xt),fe=se*Math.sin(Ut),Me=Math.tan(Math.PI/4-Ut/2)/Math.pow((1-fe)/(1+fe),se/2);return Ut=-Mt*Math.log(Math.max(Me,1e-10)),new $(q.lng*pt*Mt,Ut)},unproject:function(q){for(var pt=180/Math.PI,Mt=this.R,Ut=this.R_MINOR/Mt,Xt=Math.sqrt(1-Ut*Ut),se=Math.exp(-q.y/Mt),fe=Math.PI/2-2*Math.atan(se),Me=0,Re=.1,je;Me<15&&Math.abs(Re)>1e-7;Me++)je=Xt*Math.sin(fe),je=Math.pow((1-je)/(1+je),Xt/2),Re=Math.PI/2-2*Math.atan(se*je)-fe,fe+=Re;return new ut(fe*pt,q.x*pt/Mt)}},Pr=(A.default||Object)({LonLat:Vi,Mercator:Gi,SphericalMercator:wt});z.index=Pr;var Sr=l({},Pt,{code:"EPSG:3395",projection:Gi,transformation:function(){var tt=.5/(Math.PI*Gi.R);return Nt(tt,.5,-tt,.5)}()}),Tr=l({},Pt,{code:"EPSG:4326",projection:Vi,transformation:Nt(1/180,1,-1/180,.5)}),br=l({},ht,{projection:Vi,transformation:Nt(1,0,-1,0),scale:function(q){return Math.pow(2,q)},zoom:function(q){return Math.log(q)/Math.LN2},distance:function(q,pt){var Mt=pt.lng-q.lng,Ut=pt.lat-q.lat;return Math.sqrt(Mt*Mt+Ut*Ut)},infinite:!![]});ht.Earth=Pt,ht.EPSG3395=Sr,ht.EPSG3857=Lt,ht.EPSG900913=Rt,ht.EPSG4326=Tr,ht.Simple=br;var Ui=Y.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!![]},addTo:function(q){return q.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(q){return q&&q.removeLayer(this),this},getPane:function(q){return this._map.getPane(q?this.options[q]||q:this.options.pane)},addInteractiveTarget:function(q){return this._map._targets[x(q)]=this,this},removeInteractiveTarget:function(q){return delete this._map._targets[x(q)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(q){var pt=q.target;if(pt.hasLayer(this)){if(this._map=pt,this._zoomAnimated=pt._zoomAnimated,this.getEvents){var Mt=this.getEvents();pt.on(Mt,this),this.once("remove",function(){pt.off(Mt,this)},this)}this.onAdd(pt),this.getAttribution&&pt.attributionControl&&pt.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),pt.fire("layeradd",{layer:this})}}}),Ti=Ui.extend({initialize:function(q,pt){y(this,pt),this._layers={};var Mt,Ut;if(q)for(Mt=0,Ut=q.length;Mt<Ut;Mt++)this.addLayer(q[Mt])},addLayer:function(q){var pt=this.getLayerId(q);return this._layers[pt]=q,this._map&&this._map.addLayer(q),this},removeLayer:function(q){var pt=q in this._layers?q:this.getLayerId(q);return this._map&&this._layers[pt]&&this._map.removeLayer(this._layers[pt]),delete this._layers[pt],this},hasLayer:function(q){return!!q&&(q in this._layers||this.getLayerId(q)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(q){var pt=(0,T.default)(Array.prototype).call(arguments,1),Mt,Ut;for(Mt in this._layers)Ut=this._layers[Mt],Ut[q]&&Ut[q].apply(Ut,pt);return this},onAdd:function(q){this.eachLayer(q.addLayer,q)},onRemove:function(q){this.eachLayer(q.removeLayer,q)},eachLayer:function(q,pt){for(var Mt in this._layers)q.call(pt,this._layers[Mt]);return this},getLayer:function(q){return this._layers[q]},getLayers:function(){var q=[];return this.eachLayer(q.push,q),q},setZIndex:function(q){return this.invoke("setZIndex",q)},getLayerId:function(q){return x(q)}}),Er=function(q,pt){return new Ti(q,pt)},Ii=Ti.extend({addLayer:function(q){return this.hasLayer(q)?this:(q.addEventParent(this),Ti.prototype.addLayer.call(this,q),this.fire("layeradd",{layer:q}))},removeLayer:function(q){return this.hasLayer(q)?(q in this._layers&&(q=this._layers[q]),q.removeEventParent(this),Ti.prototype.removeLayer.call(this,q),this.fire("layerremove",{layer:q})):this},setStyle:function(q){return this.invoke("setStyle",q)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var q=new nt;for(var pt in this._layers){var Mt=this._layers[pt];q.extend(Mt.getBounds?Mt.getBounds():Mt.getLatLng())}return q}}),Mr=function(q){return new Ii(q)},Hi=U.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(q){y(this,q)},createIcon:function(q){return this._createIcon("icon",q)},createShadow:function(q){return this._createIcon("shadow",q)},_createIcon:function(q,pt){var Mt=this._getIconUrl(q);if(!Mt){if(q==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var Ut=this._createImg(Mt,pt&&pt.tagName==="IMG"?pt:null);return this._setIconStyles(Ut,q),Ut},_setIconStyles:function(q,pt){var Mt=this.options,Ut=Mt[pt+"Size"];typeof Ut=="number"&&(Ut=[Ut,Ut]);var Xt=J(Ut),se=J(pt==="shadow"&&Mt.shadowAnchor||Mt.iconAnchor||Xt&&Xt.divideBy(2,!![]));q.className="leaflet-marker-"+pt+" "+(Mt.className||""),se&&(q.style.marginLeft=-se.x+"px",q.style.marginTop=-se.y+"px"),Xt&&(q.style.width=Xt.x+"px",q.style.height=Xt.y+"px")},_createImg:function(q,pt){return pt=pt||document.createElement("img"),pt.src=q,pt},_getIconUrl:function(q){return ge&&this.options[q+"RetinaUrl"]||this.options[q+"Url"]}});function Dr(tt){return new Hi(tt)}var Ri=Hi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(q){return!Ri.imagePath&&(Ri.imagePath=this._detectIconPath()),(this.options.imagePath||Ri.imagePath)+Hi.prototype._getIconUrl.call(this,q)},_detectIconPath:function(){var q=ae("div","leaflet-default-icon-path",document.body),pt=qt(q,"background-image")||qt(q,"backgroundImage");return document.body.removeChild(q),pt===null||pt.indexOf("url")!==0?pt="":pt=pt.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),pt}}),ar=Bi.extend({initialize:function(q){this._marker=q},addHooks:function(){var q=this._marker._icon;!this._draggable&&(this._draggable=new mi(q,q,!![])),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(q,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(q){var pt=this._marker,Mt=pt._map,Ut=this._marker.options.autoPanSpeed,Xt=this._marker.options.autoPanPadding,se=Ee(pt._icon),fe=Mt.getPixelBounds(),Me=Mt.getPixelOrigin(),Re=et(fe.min._subtract(Me).add(Xt),fe.max._subtract(Me).subtract(Xt));if(!Re.contains(se)){var je=J((Math.max(Re.max.x,se.x)-Re.max.x)/(fe.max.x-Re.max.x)-(Math.min(Re.min.x,se.x)-Re.min.x)/(fe.min.x-Re.min.x),(Math.max(Re.max.y,se.y)-Re.max.y)/(fe.max.y-Re.max.y)-(Math.min(Re.min.y,se.y)-Re.min.y)/(fe.min.y-Re.min.y)).multiplyBy(Ut);Mt.panBy(je,{animate:![]}),this._draggable._newPos._add(je),this._draggable._startPos._add(je),me(pt._icon,this._draggable._newPos),this._onDrag(q),this._panRequest=G(this._adjustPan.bind(this,q))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(q){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=G(this._adjustPan.bind(this,q)))},_onDrag:function(q){var pt=this._marker,Mt=pt._shadow,Ut=Ee(pt._icon),Xt=pt._map.layerPointToLatLng(Ut);Mt&&me(Mt,Ut),pt._latlng=Xt,q.latlng=Xt,q.oldLatLng=this._oldLatLng,pt.fire("move",q).fire("drag",q)},_onDragEnd:function(q){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",q)}}),Oi=Ui.extend({options:{icon:new Ri,interactive:!![],keyboard:!![],title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:![],riseOffset:250,pane:"markerPane",bubblingMouseEvents:![],draggable:![],autoPan:![],autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(q,pt){y(this,pt),this._latlng=rt(q)},onAdd:function(q){this._zoomAnimated=this._zoomAnimated&&q.options.markerZoomAnimation,this._zoomAnimated&&q.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(q){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!![],this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&q.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(q){var pt=this._latlng;return this._latlng=rt(q),this.update(),this.fire("move",{oldLatLng:pt,latlng:this._latlng})},setZIndexOffset:function(q){return this.options.zIndexOffset=q,this.update()},setIcon:function(q){return this.options.icon=q,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var q=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(q)}return this},_initIcon:function(){var q=this.options,pt="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),Mt=q.icon.createIcon(this._icon),Ut=![];Mt!==this._icon&&(this._icon&&this._removeIcon(),Ut=!![],q.title&&(Mt.title=q.title),Mt.tagName==="IMG"&&(Mt.alt=q.alt||"")),we(Mt,pt),q.keyboard&&(Mt.tabIndex="0"),this._icon=Mt,q.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var Xt=q.icon.createShadow(this._shadow),se=![];Xt!==this._shadow&&(this._removeShadow(),se=!![]),Xt&&(we(Xt,pt),Xt.alt=""),this._shadow=Xt,q.opacity<1&&this._updateOpacity(),Ut&&this.getPane().appendChild(this._icon),this._initInteraction(),Xt&&se&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ve(this._shadow),this._shadow=null},_setPos:function(q){me(this._icon,q),this._shadow&&me(this._shadow,q),this._zIndex=q.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(q){this._icon.style.zIndex=this._zIndex+q},_animateZoom:function(q){var pt=this._map._latLngToNewLayerPoint(this._latlng,q.zoom,q.center).round();this._setPos(pt)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ar)){var q=this.options.draggable;this.dragging&&(q=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ar(this),q&&this.dragging.enable()}},setOpacity:function(q){return this.options.opacity=q,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var q=this.options.opacity;Et(this._icon,q),this._shadow&&Et(this._shadow,q)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Lr(tt,q){return new Oi(tt,q)}var Fi=Ui.extend({options:{stroke:!![],color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:![],fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!![],bubblingMouseEvents:!![]},beforeAdd:function(q){this._renderer=q.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(q){return y(this,q),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Wi=Fi.extend({options:{fill:!![],radius:10},initialize:function(q,pt){y(this,pt),this._latlng=rt(q),this._radius=this.options.radius},setLatLng:function(q){return this._latlng=rt(q),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(q){return this.options.radius=this._radius=q,this.redraw()},getRadius:function(){return this._radius},setStyle:function(q){var pt=q&&q.radius||this._radius;return Fi.prototype.setStyle.call(this,q),this.setRadius(pt),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var q=this._radius,pt=this._radiusY||q,Mt=this._clickTolerance(),Ut=[q+Mt,pt+Mt];this._pxBounds=new Q(this._point.subtract(Ut),this._point.add(Ut))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(q){return q.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ir(tt,q){return new Wi(tt,q)}var or=Wi.extend({initialize:function(q,pt,Mt){if(typeof pt=="number"&&(pt=l({},Mt,{radius:pt})),y(this,pt),this._latlng=rt(q),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(q){return this._mRadius=q,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var q=[this._radius,this._radiusY||this._radius];return new nt(this._map.layerPointToLatLng(this._point.subtract(q)),this._map.layerPointToLatLng(this._point.add(q)))},setStyle:Fi.prototype.setStyle,_project:function(){var q=this._latlng.lng,pt=this._latlng.lat,Mt=this._map,Ut=Mt.options.crs;if(Ut.distance===Pt.distance){var Xt=Math.PI/180,se=this._mRadius/Pt.R/Xt,fe=Mt.project([pt+se,q]),Me=Mt.project([pt-se,q]),Re=fe.add(Me).divideBy(2),je=Mt.unproject(Re).lat,Je=Math.acos((Math.cos(se*Xt)-Math.sin(pt*Xt)*Math.sin(je*Xt))/(Math.cos(pt*Xt)*Math.cos(je*Xt)))/Xt;(isNaN(Je)||Je===0)&&(Je=se/Math.cos(Math.PI/180*pt)),this._point=Re.subtract(Mt.getPixelOrigin()),this._radius=isNaN(Je)?0:Re.x-Mt.project([je,q-Je]).x,this._radiusY=Re.y-fe.y}else{var _e=Ut.unproject(Ut.project(this._latlng).subtract([this._mRadius,0]));this._point=Mt.latLngToLayerPoint(this._latlng),this._radius=this._point.x-Mt.latLngToLayerPoint(_e).x}this._updateBounds()}});function Rr(tt,q,pt){return new or(tt,q,pt)}var vi=Fi.extend({options:{smoothFactor:1,noClip:![]},initialize:function(q,pt){y(this,pt),this._setLatLngs(q)},getLatLngs:function(){return this._latlngs},setLatLngs:function(q){return this._setLatLngs(q),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(q){for(var pt=1/0,Mt=null,Ut=Si,Xt,se,fe=0,Me=this._parts.length;fe<Me;fe++)for(var Re=this._parts[fe],je=1,Je=Re.length;je<Je;je++){Xt=Re[je-1],se=Re[je];var _e=Ut(q,Xt,se,!![]);_e<pt&&(pt=_e,Mt=Ut(q,Xt,se))}return Mt&&(Mt.distance=Math.sqrt(pt)),Mt},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var q,pt,Mt,Ut,Xt,se,fe,Me=this._rings[0],Re=Me.length;if(!Re)return null;for(q=0,pt=0;q<Re-1;q++)pt+=Me[q].distanceTo(Me[q+1])/2;if(pt===0)return this._map.layerPointToLatLng(Me[0]);for(q=0,Ut=0;q<Re-1;q++)if(Xt=Me[q],se=Me[q+1],Mt=Xt.distanceTo(se),Ut+=Mt,Ut>pt)return fe=(Ut-pt)/Mt,this._map.layerPointToLatLng([se.x-fe*(se.x-Xt.x),se.y-fe*(se.y-Xt.y)])},getBounds:function(){return this._bounds},addLatLng:function(q,pt){return pt=pt||this._defaultShape(),q=rt(q),pt.push(q),this._bounds.extend(q),this.redraw()},_setLatLngs:function(q){this._bounds=new nt,this._latlngs=this._convertLatLngs(q)},_defaultShape:function(){return fi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(q){for(var pt=[],Mt=fi(q),Ut=0,Xt=q.length;Ut<Xt;Ut++)Mt?(pt[Ut]=rt(q[Ut]),this._bounds.extend(pt[Ut])):pt[Ut]=this._convertLatLngs(q[Ut]);return pt},_project:function(){var q=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,q);var pt=this._clickTolerance(),Mt=new $(pt,pt);this._bounds.isValid()&&q.isValid()&&(q.min._subtract(Mt),q.max._add(Mt),this._pxBounds=q)},_projectLatlngs:function(q,pt,Mt){var Ut=q[0]instanceof ut,Xt=q.length,se,fe;if(Ut){for(fe=[],se=0;se<Xt;se++)fe[se]=this._map.latLngToLayerPoint(q[se]),Mt.extend(fe[se]);pt.push(fe)}else for(se=0;se<Xt;se++)this._projectLatlngs(q[se],pt,Mt)},_clipPoints:function(){var q=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(q))){if(this.options.noClip){this._parts=this._rings;return}var pt=this._parts,Mt,Ut,Xt,se,fe,Me,Re;for(Mt=0,Xt=0,se=this._rings.length;Mt<se;Mt++)for(Re=this._rings[Mt],Ut=0,fe=Re.length;Ut<fe-1;Ut++)Me=ir(Re[Ut],Re[Ut+1],q,Ut,!![]),Me&&(pt[Xt]=pt[Xt]||[],pt[Xt].push(Me[0]),(Me[1]!==Re[Ut+1]||Ut===fe-2)&&(pt[Xt].push(Me[1]),Xt++))}},_simplifyPoints:function(){for(var q=this._parts,pt=this.options.smoothFactor,Mt=0,Ut=q.length;Mt<Ut;Mt++)q[Mt]=_i(q[Mt],pt)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(q,pt){var Mt,Ut,Xt,se,fe,Me,Re=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(q))return![];for(Mt=0,se=this._parts.length;Mt<se;Mt++)for(Me=this._parts[Mt],Ut=0,fe=Me.length,Xt=fe-1;Ut<fe;Xt=Ut++)if(!(!pt&&Ut===0)&&tr(q,Me[Xt],Me[Ut])<=Re)return!![];return![]}});function Or(tt,q){return new vi(tt,q)}vi._flat=rr;var ji=vi.extend({options:{fill:!![]},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var q,pt,Mt,Ut,Xt,se,fe,Me,Re,je=this._rings[0],Je=je.length;if(!Je)return null;for(se=fe=Me=0,q=0,pt=Je-1;q<Je;pt=q++)Mt=je[q],Ut=je[pt],Xt=Mt.y*Ut.x-Ut.y*Mt.x,fe+=(Mt.x+Ut.x)*Xt,Me+=(Mt.y+Ut.y)*Xt,se+=Xt*3;return se===0?Re=je[0]:Re=[fe/se,Me/se],this._map.layerPointToLatLng(Re)},_convertLatLngs:function(q){var pt=vi.prototype._convertLatLngs.call(this,q),Mt=pt.length;return Mt>=2&&pt[0]instanceof ut&&pt[0].equals(pt[Mt-1])&&pt.pop(),pt},_setLatLngs:function(q){vi.prototype._setLatLngs.call(this,q),fi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var q=this._renderer._bounds,pt=this.options.weight,Mt=new $(pt,pt);if(q=new Q(q.min.subtract(Mt),q.max.add(Mt)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(q))){if(this.options.noClip){this._parts=this._rings;return}for(var Ut=0,Xt=this._rings.length,se;Ut<Xt;Ut++)se=nr(this._rings[Ut],q,!![]),se.length&&this._parts.push(se)}},_updatePath:function(){this._renderer._updatePoly(this,!![])},_containsPoint:function(q){var pt=![],Mt,Ut,Xt,se,fe,Me,Re,je;if(!this._pxBounds||!this._pxBounds.contains(q))return![];for(se=0,Re=this._parts.length;se<Re;se++)for(Mt=this._parts[se],fe=0,je=Mt.length,Me=je-1;fe<je;Me=fe++)Ut=Mt[fe],Xt=Mt[Me],Ut.y>q.y!=Xt.y>q.y&&q.x<(Xt.x-Ut.x)*(q.y-Ut.y)/(Xt.y-Ut.y)+Ut.x&&(pt=!pt);return pt||vi.prototype._containsPoint.call(this,q,!![])}});function Fr(tt,q){return new ji(tt,q)}var sr=Ii.extend({initialize:function(q,pt){y(this,pt),this._layers={},q&&this.addData(q)},addData:function(q){var pt=O(q)?q:q.features,Mt,Ut,Xt;if(pt){for(Mt=0,Ut=pt.length;Mt<Ut;Mt++)Xt=pt[Mt],(Xt.geometries||Xt.geometry||Xt.features||Xt.coordinates)&&this.addData(Xt);return this}var se=this.options;if((0,m.default)(se)&&!(0,m.default)(se).call(se,q))return this;var fe=lr(q,se);return fe?(fe.feature=$i(q),fe.defaultOptions=fe.options,this.resetStyle(fe),se.onEachFeature&&se.onEachFeature(q,fe),this.addLayer(fe)):this},resetStyle:function(q){return q.options=l({},q.defaultOptions),this._setLayerStyle(q,this.options.style),this},setStyle:function(q){return this.eachLayer(function(pt){this._setLayerStyle(pt,q)},this)},_setLayerStyle:function(q,pt){typeof pt=="function"&&(pt=pt(q.feature)),q.setStyle&&q.setStyle(pt)}});z.GeoJSON=sr;function lr(tt,q){var pt=tt.type==="Feature"?tt.geometry:tt,Mt=pt?pt.coordinates:null,Ut=[],Xt=q&&q.pointToLayer,se=q&&q.coordsToLatLng||ur,fe,Me,Re,je;if(!Mt&&!pt)return null;switch(pt.type){case"Point":return fe=se(Mt),Xt?Xt(tt,fe):new Oi(fe);case"MultiPoint":for(Re=0,je=Mt.length;Re<je;Re++)fe=se(Mt[Re]),Ut.push(Xt?Xt(tt,fe):new Oi(fe));return new Ii(Ut);case"LineString":case"MultiLineString":return Me=Zi(Mt,pt.type==="LineString"?0:1,se),new vi(Me,q);case"Polygon":case"MultiPolygon":return Me=Zi(Mt,pt.type==="Polygon"?1:2,se),new ji(Me,q);case"GeometryCollection":for(Re=0,je=pt.geometries.length;Re<je;Re++){var Je=lr({geometry:pt.geometries[Re],type:"Feature",properties:tt.properties},q);Je&&Ut.push(Je)}return new Ii(Ut);default:throw new Error("Invalid GeoJSON object.")}}function ur(tt){return new ut(tt[1],tt[0],tt[2])}function Zi(tt,q,pt){for(var Mt=[],Ut=0,Xt=tt.length,se;Ut<Xt;Ut++)se=q?Zi(tt[Ut],q-1,pt):(pt||ur)(tt[Ut]),Mt.push(se);return Mt}function hr(tt,q){return q=typeof q=="number"?q:6,tt.alt!==void 0?[h(tt.lng,q),h(tt.lat,q),h(tt.alt,q)]:[h(tt.lng,q),h(tt.lat,q)]}function Yi(tt,q,pt,Mt){for(var Ut=[],Xt=0,se=tt.length;Xt<se;Xt++)Ut.push(q?Yi(tt[Xt],q-1,pt,Mt):hr(tt[Xt],Mt));return!q&&pt&&Ut.push(Ut[0]),Ut}function bi(tt,q){return tt.feature?l({},tt.feature,{geometry:q}):$i(q)}function $i(tt){return tt.type==="Feature"||tt.type==="FeatureCollection"?tt:{type:"Feature",properties:{},geometry:tt}}var Xi={toGeoJSON:function(q){return bi(this,{type:"Point",coordinates:hr(this.getLatLng(),q)})}};Oi.include(Xi),or.include(Xi),Wi.include(Xi),vi.include({toGeoJSON:function(q){var pt=!fi(this._latlngs),Mt=Yi(this._latlngs,pt?1:0,![],q);return bi(this,{type:(pt?"Multi":"")+"LineString",coordinates:Mt})}}),ji.include({toGeoJSON:function(q){var pt=!fi(this._latlngs),Mt=pt&&!fi(this._latlngs[0]),Ut=Yi(this._latlngs,Mt?2:pt?1:0,!![],q);return!pt&&(Ut=[Ut]),bi(this,{type:(Mt?"Multi":"")+"Polygon",coordinates:Ut})}}),Ti.include({toMultiPoint:function(q){var pt=[];return this.eachLayer(function(Mt){pt.push(Mt.toGeoJSON(q).geometry.coordinates)}),bi(this,{type:"MultiPoint",coordinates:pt})},toGeoJSON:function(q){var pt=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(pt==="MultiPoint")return this.toMultiPoint(q);var Mt=pt==="GeometryCollection",Ut=[];return this.eachLayer(function(Xt){if(Xt.toGeoJSON){var se=Xt.toGeoJSON(q);if(Mt)Ut.push(se.geometry);else{var fe=$i(se);fe.type==="FeatureCollection"?Ut.push.apply(Ut,fe.features):Ut.push(fe)}}}),Mt?bi(this,{geometries:Ut,type:"GeometryCollection"}):{type:"FeatureCollection",features:Ut}}});function cr(tt,q){return new sr(tt,q)}var Ar=cr;z.geoJson=Ar,Object.freeze=u;var Ai=window.L;z.L=Ai},75211:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.MapVLayer=void 0;var D=T(e(28866)),b=T(e(22777)),C=T(e(42762)),f=o(e(87647)),v=e(48795);function m(l){if(typeof R!="function")return null;var r=new R,s=new R;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||F(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&A;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?A(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var u=function(){function l(r,s,c,x){(0,b.default)(this,l),this.map=r,this.scene=r.scene,this.mapvBaseLayer=new v.MapVRenderer(r,s,c,this),this.mapVOptions=c,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),x!=null?(this.container=x,x.appendChild(this.canvas)):(this.container=r.container,this.addInnerContainer()),this.bindEvent(),this._reset()}return(0,C.default)(l,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addInnerContainer",value:function(){this.container.appendChild(this.canvas)}},{key:"bindEvent",value:function(){var s=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.scene.camera.moveStart.addEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd,this);var c=new f.ScreenSpaceEventHandler(this.canvas);c.setInputAction(function(x){s.innerMoveEnd()},f.ScreenSpaceEventType.LEFT_UP),c.setInputAction(function(x){s.innerMoveEnd()},f.ScreenSpaceEventType.MIDDLE_UP),this.handler=c}},{key:"unbindEvent",value:function(){this.scene.camera.moveStart.removeEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd,this),this.scene.postRender.removeEventListener(this._reset,this),this.handler&&(this.handler.destroy(),this.handler=null)}},{key:"moveStartEvent",value:function(){this.mapvBaseLayer&&this.mapvBaseLayer.animatorMovestartEvent(),this.scene.postRender.addEventListener(this._reset,this),M.log("mapv moveStartEvent")}},{key:"moveEndEvent",value:function(){this.scene.postRender.removeEventListener(this._reset,this),this.mapvBaseLayer&&this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),M.log("mapv moveEndEvent")}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"addData",value:function(s,c){this.mapvBaseLayer!=null&&this.mapvBaseLayer.addData(s,c)}},{key:"updateData",value:function(s,c){this.mapvBaseLayer!=null&&this.mapvBaseLayer.updateData(s,c)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(s){this.mapvBaseLayer!=null&&this.mapvBaseLayer&&this.mapvBaseLayer.removeData(s)}},{key:"removeAllData",value:function(){this.mapvBaseLayer!=null&&this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block"}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none"}},{key:"_createCanvas",value:function(){var s=document.createElement("canvas");s.id=this.mapVOptions.layerid||"mapv"+divId++,s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.pointerEvents="none",s.style.zIndex=this.mapVOptions.zIndex||100,s.width=parseInt((0,D.default)(this).canvas.width),s.height=parseInt((0,D.default)(this).canvas.height),s.style.width=(0,D.default)(this).canvas.style.width,s.style.height=(0,D.default)(this).canvas.style.height;var c=this.devicePixelRatio;return this.mapVOptions.context=="2d"&&s.getContext(this.mapVOptions.context).scale(c,c),s}},{key:"_reset",value:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()}},{key:"draw",value:function(){this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"destroy",value:function(){this.unbindEvent(),this.remove()}},{key:"remove",value:function(){this.mapvBaseLayer!=null&&(this.removeAllData(),this.mapvBaseLayer.destroy(),this.mapvBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas))}},{key:"update",value:function(s){s!=null&&this.updateData(s.data,s.options)}},{key:"resizeCanvas",value:function(){if(this.canvas!=null&&this.canvas!=null){var s=this.canvas;s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.width=parseInt((0,D.default)(this).canvas.width),s.height=parseInt((0,D.default)(this).canvas.height),s.style.width=(0,D.default)(this).canvas.style.width,s.style.height=(0,D.default)(this).canvas.style.height}}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"render",value:function(){this.mapvBaseLayer!=null&&this.mapvBaseLayer._canvasUpdate()}}]),l}();z.MapVLayer=u},48795:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.MapVRenderer=void 0;var T=A(e(42762)),D=A(e(22777)),b=f(e(87647));function C(o){if(typeof F!="function")return null;var u=new F,l=new F;return(C=function(s){return s?l:u})(o)}function f(o,u){if(!u&&o&&o.__esModule)return o;if(o===null||M(o)!=="object"&&typeof o!="function")return{default:o};var l=C(u);if(l&&l.has(o))return l.get(o);var r={},s=Object.defineProperty&&R;for(var c in o)if(c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)){var x=s?R(o,c):null;x&&(x.get||x.set)?Object.defineProperty(r,c,x):r[c]=o[c]}return r.default=o,l&&l.set(o,r),r}var v=b.Math.toRadians(80),m=(0,T.default)(function o(){(0,D.default)(this,o)});z.MapVRenderer=m},88589:function(X,z,e){"use strict";var M=e(49500),F=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var R=F(e(69033)),A=F(e(5146)),T=F(e(36583)),D=F(e(42579)),b=F(e(22777)),C=F(e(42762)),f=e(7165),v=F(e(27482)),m=e(66342),o=function(){function l(r,s){(0,b.default)(this,l),this.map=r,this.view=r.getView(),this.scene=s,this.olLayers=r.getLayerGroup().getLayers(),this.mapLayerGroup=r.getLayerGroup(),this.layerMap={},this.olLayerListenKeys={},this.olGroupListenKeys_={}}return(0,C.default)(l,[{key:"synchronize",value:function(){this.destroyAll(),this.addLayers_(this.mapLayerGroup)}},{key:"orderLayers",value:function(){}},{key:"addLayers_",value:function(s){for(var c=this,x=[{layer:s,parents:[]}],a=function(){var n=this,h=(0,R.default)(x).call(x,0,1)[0],g=h.layer,d,y=(0,m.getUid)(g).toString();c.olLayerListenKeys[y]=[],M.assert(!c.layerMap[y]);var p=null;if(g instanceof v.default)c.listenForGroupChanges_(g),g!==c.mapLayerGroup&&(p=c.createSingleLayerCounterparts(h)),!p&&g.getLayers().forEach(function(B){if((0,D.default)(this,n),B){var k,P={layer:B,parents:g===c.mapLayerGroup?[]:(0,A.default)(k=[h.layer]).call(k,h.parents)};x.push(P)}}.bind(this));else if(h.layer.values_.id=="xzqNavigateLayer"&&(p=c.createSingleLayerCounterparts(h),d=h.layer.values_.info,!p)){var w=y,S=h,O=function(k){(0,D.default)(this,n);var P=c.createSingleLayerCounterparts(S);P&&(S.layer.un("change",O),d&&d.hasOwnProperty("isBaseMapLayer")&&d.isBaseMapLayer==1?M.log("\u56FE\u5C42\u6765\u81EAbaseMap"):c.addCesiumObjects_(P,w,S.layer),c.orderLayers())}.bind(this);c.olLayerListenKeys[y].push((0,m.olcsListen)(S.layer,"change",O))}p&&(d&&d.hasOwnProperty("isBaseMapLayer")&&d.isBaseMapLayer==1?M.log("\u56FE\u5C42\u6765\u81EAbaseMap"):c.addCesiumObjects_(p,y,g))};x.length>0;)a();this.orderLayers()}},{key:"addCesiumObjects_",value:function(s,c,x){var a=this;this.layerMap[c]=s,this.olLayerListenKeys[c].push((0,m.olcsListen)(x,"change:zIndex",function(){return(0,D.default)(this,a),this.orderLayers()}.bind(this))),s.forEach(function(i){(0,D.default)(this,a),this.addCesiumObject(i)}.bind(this))}},{key:"removeAndDestroySingleLayer_",value:function(s){var c=this,x=(0,m.getUid)(s).toString(),a=this.layerMap[x];return a&&(a.forEach(function(i){(0,D.default)(this,c),this.removeSingleCesiumObject(i,![]),this.destroyCesiumObject(i)}.bind(this)),this.olLayerListenKeys[x].forEach(f.unByKey),delete this.olLayerListenKeys[x]),delete this.layerMap[x],!!a}},{key:"unlistenSingleGroup_",value:function(s){var c=this;if(s!==this.mapLayerGroup){var x=(0,m.getUid)(s).toString(),a=this.olGroupListenKeys_[x];a.forEach(function(i){(0,D.default)(this,c),(0,f.unByKey)(i)}.bind(this)),delete this.olGroupListenKeys_[x],delete this.layerMap[x]}}},{key:"removeLayer_",value:function(s){var c=this;if(s)for(var x=[s];x.length>0;){var a=(0,R.default)(x).call(x,0,1)[0],i=this.removeAndDestroySingleLayer_(a);a instanceof v.default&&(this.unlistenSingleGroup_(a),!i&&a.getLayers().forEach(function(n){(0,D.default)(this,c),x.push(n)}.bind(this)))}}},{key:"listenForGroupChanges_",value:function(s){var c=this,x=(0,m.getUid)(s).toString();M.assert(this.olGroupListenKeys_[x]===void 0);var a=[];this.olGroupListenKeys_[x]=a;var i=[],n=function(){var h=this,g=s.getLayers();g&&(i=[g.on("add",function(d){(0,D.default)(this,h),d.element.values_.hasOwnProperty("info")?(!d.element.values_.info.hasOwnProperty("isBaseMapLayer")||!d.element.values_.info.isBaseMapLayer)&&this.addLayers_(d.element):this.addLayers_(d.element)}.bind(this)),g.on("remove",function(d){(0,D.default)(this,h),this.removeLayer_(d.element)}.bind(this))],a.push.apply(a,(0,T.default)(i)))}.bind(this);n(),a.push(s.on("change:layers",function(h){var g=this;(0,D.default)(this,c),i.forEach(function(d){(0,D.default)(this,g);var y=a.indexOf(d);y>=0&&(0,R.default)(a).call(a,y,1),(0,f.unByKey)(d)}.bind(this)),n()}.bind(this)))}},{key:"destroyAll",value:function(){this.removeAllCesiumObjects(!![]);var s;for(s in this.olGroupListenKeys_){var c=this.olGroupListenKeys_[s];c.forEach(f.unByKey)}for(s in this.olLayerListenKeys)this.olLayerListenKeys[s].forEach(f.unByKey);this.olGroupListenKeys_={},this.olLayerListenKeys={},this.layerMap={}}},{key:"addCesiumObject",value:function(s){}},{key:"destroyCesiumObject",value:function(s){}},{key:"removeSingleCesiumObject",value:function(s,c){}},{key:"removeAllCesiumObjects",value:function(s){}},{key:"createSingleLayerCounterparts",value:function(s){}}]),l}(),u=o;z.default=u},78280:function(X,z,e){"use strict";var M=e(20314),F=e(26352),R=e(40639),A=e(43586),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var D=T(e(22777)),b=T(e(42762));function C(u,l){var r=typeof R<"u"&&A(u)||u["@@iterator"];if(!r){if(Array.isArray(u)||(r=f(u))||l&&u&&typeof u.length=="number"){r&&(u=r);var s=0,c=function(){};return{s:c,n:function(){return s>=u.length?{done:!![]}:{done:![],value:u[s++]}},e:function(h){throw h},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x=!![],a=![],i;return{s:function(){r=r.call(u)},n:function(){var h=r.next();return x=h.done,h},e:function(h){a=!![],i=h},f:function(){try{!x&&r.return!=null&&r.return()}finally{if(a)throw i}}}}function f(u,l){var r;if(u){if(typeof u=="string")return v(u,l);var s=M(r=Object.prototype.toString.call(u)).call(r,8,-1);if(s==="Object"&&u.constructor&&(s=u.constructor.name),s==="Map"||s==="Set")return F(u);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return v(u,l)}}function v(u,l){(l==null||l>u.length)&&(l=u.length);for(var r=0,s=new Array(l);r<l;r++)s[r]=u[r];return s}var m=function(){function u(l){(0,D.default)(this,u),this.ol3d=l,this.scene_=l.getCesiumScene(),this.canvas_=this.scene_.canvas,this._boundNotifyRepaintRequired=this.notifyRepaintRequired.bind(this),this.repaintEventNames_=["mousemove","mousedown","mouseup","touchstart","touchend","touchmove","pointerdown","pointerup","pointermove","wheel"],this.enable()}return(0,b.default)(u,[{key:"enable",value:function(){this.scene_.requestRenderMode=!![],this.scene_.maximumRenderTimeChange=1e3;var r=C(this.repaintEventNames_),s;try{for(r.s();!(s=r.n()).done;){var c=s.value;this.canvas_.addEventListener(c,this._boundNotifyRepaintRequired,![])}}catch(x){r.e(x)}finally{r.f()}window.addEventListener("resize",this._boundNotifyRepaintRequired,![]),this.ol3d.getOlMap().getLayerGroup().on("change",this._boundNotifyRepaintRequired)}},{key:"disable",value:function(){var r=C(this.repaintEventNames_),s;try{for(r.s();!(s=r.n()).done;){var c=s.value;this.canvas_.removeEventListener(c,this._boundNotifyRepaintRequired,![])}}catch(x){r.e(x)}finally{r.f()}window.removeEventListener("resize",this._boundNotifyRepaintRequired,![]),this.ol3d.getOlMap().getLayerGroup().un("change",this._boundNotifyRepaintRequired),this.scene_.requestRenderMode=![]}},{key:"restartRenderLoop",value:function(){this.notifyRepaintRequired()}},{key:"notifyRepaintRequired",value:function(){this.scene_.requestRender()}}]),u}(),o=m;z.default=o},71175:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var D=T(e(42579)),b=T(e(22777)),C=T(e(42762)),f=r(e(87647)),v=e(7165),m=e(23030),o=e(72233),u=r(e(5015));function l(x){if(typeof R!="function")return null;var a=new R,i=new R;return(l=function(h){return h?i:a})(x)}function r(x,a){if(!a&&x&&x.__esModule)return x;if(x===null||F(x)!=="object"&&typeof x!="function")return{default:x};var i=l(a);if(i&&i.has(x))return i.get(x);var n={},h=Object.defineProperty&&A;for(var g in x)if(g!=="default"&&Object.prototype.hasOwnProperty.call(x,g)){var d=h?A(x,g):null;d&&(d.get||d.set)?Object.defineProperty(n,g,d):n[g]=x[g]}return n.default=x,i&&i.set(x,n),n}var s=function(){function x(a,i){var n=this;(0,b.default)(this,x),this.scene_=a,this.cam_=a.camera,this.map_=i,this.view_=null,this.viewListenKey_=null,this.toLonLat_=x.identityProjection,this.fromLonLat_=x.identityProjection,this.tilt_=0,this.distance_=0,this.lastCameraViewMatrix_=null,this.viewUpdateInProgress_=![],this.map_.on("change:view",function(h){(0,D.default)(this,n),this.setView_(this.map_.getView())}.bind(this)),this.setView_(this.map_.getView())}return(0,C.default)(x,[{key:"setView_",value:function(i){var n=this;if(this.view_&&((0,v.unByKey)(this.viewListenKey_),this.viewListenKey_=null),this.view_=i,i){var h=(0,o.getTransform)(i.getProjection(),"EPSG:4326"),g=(0,o.getTransform)("EPSG:4326",i.getProjection());M.assert(h&&g),this.toLonLat_=h,this.fromLonLat_=g,this.viewListenKey_=i.on("propertychange",function(d){return(0,D.default)(this,n),this.handleViewEvent_(d)}.bind(this)),this.readFromView()}else this.toLonLat_=x.identityProjection,this.fromLonLat_=x.identityProjection}},{key:"handleViewEvent_",value:function(i){!this.viewUpdateInProgress_&&this.readFromView()}},{key:"setHeading",value:function(i){this.view_&&this.view_.setRotation(i)}},{key:"getHeading",value:function(){if(this.view_){var i=this.view_.getRotation();return i||0}}},{key:"setTilt",value:function(i){this.tilt_=i,this.updateCamera_()}},{key:"getTilt",value:function(){return this.tilt_}},{key:"setDistance",value:function(i){this.distance_=i,this.updateCamera_(),this.updateView()}},{key:"getDistance",value:function(){return this.distance_}},{key:"setCenter",value:function(i){this.view_&&this.view_.setCenter(i)}},{key:"getCenter",value:function(){if(this.view_)return this.view_.getCenter()}},{key:"setPosition",value:function(i){if(this.toLonLat_){var n=this.toLonLat_(i);M.assert(n);var h=new f.Cartographic((0,m.toRadians)(n[0]),(0,m.toRadians)(n[1]),this.getAltitude());this.cam_.setView({destination:f.Ellipsoid.WGS84.cartographicToCartesian(h)}),this.updateView()}}},{key:"getPosition",value:function(){if(this.fromLonLat_){var i=f.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position),n=this.fromLonLat_([(0,m.toDegrees)(i.longitude),(0,m.toDegrees)(i.latitude)]);return M.assert(n),n}}},{key:"setAltitude",value:function(i){var n=f.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);n.height=i,this.cam_.position=f.Ellipsoid.WGS84.cartographicToCartesian(n),this.updateView()}},{key:"getAltitude",value:function(){var i=f.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);return i.height}},{key:"updateCamera_",value:function(){if(!(!this.view_||!this.toLonLat_)){var i=this.view_.getCenter();if(!(!i||!i[0])){var n=this.toLonLat_(i);M.assert(n);var h=new f.Cartographic((0,m.toRadians)(n[0]),(0,m.toRadians)(n[1]));if(this.scene_.globe){var g=this.scene_.globe.getHeight(h);h.height=g||0}var d=f.Ellipsoid.WGS84.cartographicToCartesian(h),y,p=this.tilt_-f.Math.PI_OVER_TWO;p-f.Math.toRadians(-90)==0||(p=f.Math.toRadians(-90)),y=p+f.Math.toRadians(45);var w={pitch:this.tilt_-f.Math.PI_OVER_TWO,heading:-this.view_.getRotation(),roll:void 0};this.cam_.setView({destination:d,orientation:w}),this.cam_.moveBackward(this.distance_),this.checkCameraChange(!![])}}}},{key:"readFromView",value:function(){if(!(!this.view_||!this.toLonLat_)){var i=this.view_.getCenter();if(i!=null){var n=this.toLonLat_(i);M.assert(n);var h=this.view_.getResolution();this.distance_=this.calcDistanceForResolution(h||0,(0,m.toRadians)(n[1])),this.updateCamera_()}}}},{key:"updateView",value:function(){if(!(!this.view_||!this.fromLonLat_)){this.viewUpdateInProgress_=!![];var i=f.Ellipsoid.WGS84,n=this.scene_,h=u.default.pickCenterPoint(n),g=h;if(!g){var d=n.globe,y=this.cam_.positionCartographic.clone(),p=d.getHeight(y);y.height=p||0,g=f.Ellipsoid.WGS84.cartographicToCartesian(y)}this.distance_=f.Cartesian3.distance(g,this.cam_.position);var w=i.cartesianToCartographic(g);if(this.view_.setCenter(this.fromLonLat_([(0,m.toDegrees)(w.longitude),(0,m.toDegrees)(w.latitude)])),this.view_.setResolution(this.calcResolutionForDistance(this.distance_,w?w.latitude:0)),h){var S=this.cam_.position,O=new f.Cartesian3;i.geocentricSurfaceNormal(h,O);var B=new f.Cartesian3;f.Cartesian3.subtract(S,h,B),f.Cartesian3.normalize(B,B);var k=this.cam_.up,P=this.cam_.right,L=new f.Cartesian3(-h.y,h.x,0),E=f.Cartesian3.angleBetween(P,L),N=f.Cartesian3.cross(h,k,new f.Cartesian3),I=N.z;this.view_.setRotation(I<0?E:-E);var G=Math.acos(f.Cartesian3.dot(O,B));this.tilt_=isNaN(G)?0:G}else this.view_.setRotation(this.cam_.heading),this.tilt_=-this.cam_.pitch+Math.PI/2;this.viewUpdateInProgress_=![]}}},{key:"checkCameraChange",value:function(i){var n=this.lastCameraViewMatrix_,h=this.cam_.viewMatrix;(!n||!f.Matrix4.equalsEpsilon(n,h,1e-5))&&(this.lastCameraViewMatrix_=h.clone(),i!==!![]&&this.updateView())}},{key:"calcDistanceForResolution",value:function(i,n){return(0,u.calcDistanceForResolution)(i,n,this.scene_,this.view_.getProjection())}},{key:"calcResolutionForDistance",value:function(i,n){return(0,u.calcResolutionForDistance)(i,n,this.scene_,this.view_.getProjection())}}],[{key:"identityProjection",value:function(i,n,h){var g=h||i.length;if(n)for(var d=0;d<g;++d)n[d]=i[d];return i}}]),x}(),c=s;z.default=c},72013:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(20314),A=e(26352),T=e(40639),D=e(43586),b=e(87879),C=e(83393),f=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var v=f(e(20314)),m=f(e(69257)),o=f(e(42579)),u=f(e(22777)),l=f(e(42762)),r=w(e(87647)),s=f(e(61128)),c=f(e(37107)),x=f(e(92405)),a=f(e(87653)),i=e(54896),n=e(92086),h=f(e(1304)),g=f(e(5015)),d=f(e(11678)),y=w(e(66342));function p(L){if(typeof b!="function")return null;var E=new b,N=new b;return(p=function(G){return G?N:E})(L)}function w(L,E){if(!E&&L&&L.__esModule)return L;if(L===null||F(L)!=="object"&&typeof L!="function")return{default:L};var N=p(E);if(N&&N.has(L))return N.get(L);var I={},G=Object.defineProperty&&C;for(var W in L)if(W!=="default"&&Object.prototype.hasOwnProperty.call(L,W)){var Z=G?C(L,W):null;Z&&(Z.get||Z.set)?Object.defineProperty(I,W,Z):I[W]=L[W]}return I.default=L,N&&N.set(L,I),I}function S(L,E){var N=typeof T<"u"&&D(L)||L["@@iterator"];if(!N){if(Array.isArray(L)||(N=O(L))||E&&L&&typeof L.length=="number"){N&&(L=N);var I=0,G=function(){};return{s:G,n:function(){return I>=L.length?{done:!![]}:{done:![],value:L[I++]}},e:function(V){throw V},f:G}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!![],Z=![],U;return{s:function(){N=N.call(L)},n:function(){var V=N.next();return W=V.done,V},e:function(V){Z=!![],U=V},f:function(){try{!W&&N.return!=null&&N.return()}finally{if(Z)throw U}}}}function O(L,E){var N;if(L){if(typeof L=="string")return B(L,E);var I=R(N=Object.prototype.toString.call(L)).call(N,8,-1);if(I==="Object"&&L.constructor&&(I=L.constructor.name),I==="Map"||I==="Set")return A(L);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return B(L,E)}}function B(L,E){(E==null||E>L.length)&&(E=L.length);for(var N=0,I=new Array(E);N<E;N++)I[N]=L[N];return I}var k=function(){function L(E){(0,u.default)(this,L),this.scene=E,this.boundOnRemoveOrClearFeatureListener_=this.onRemoveOrClearFeature_.bind(this),this.defaultBillboardEyeOffset_=new r.Cartesian3(0,0,10)}return(0,l.default)(L,[{key:"onRemoveOrClearFeature_",value:function(N){var I=N.target;M.assert(I instanceof x.default);var G=y.default.obj(I).olcs_cancellers;if(G){var W=N.feature;if(W){var Z=(0,y.getUid)(W),U=G[Z];U&&(U(),delete G[Z])}else{for(var H in G)G.hasOwnProperty(H)&&G[H]();y.default.obj(I).olcs_cancellers={}}}}},{key:"setReferenceForPicking",value:function(N,I,G){G.olLayer=N,G.olFeature=I}},{key:"createColoredPrimitive",value:function(N,I,G,W,Z,U){var H=function(nt,st){var ut=new r.GeometryInstance({geometry:nt});return st&&!(st instanceof r.ImageMaterialProperty)&&(ut.attributes={color:r.ColorGeometryInstanceAttribute.fromColor(st)}),ut},V={flat:!![],renderState:{depthTest:{enabled:!![]}}};U!==void 0&&(!V.renderState&&(V.renderState={}),V.renderState.lineWidth=Math.min(U,this.scene.maximumAliasedLineWidth));var Y=H(W,Z),$=this.getHeightReference(N,I,G),K;if($===r.HeightReference.CLAMP_TO_GROUND){var J=Y.geometry.constructor;if(J&&!J.createShadowVolume)return null;K=new r.GroundPrimitive({geometryInstances:Y})}else K=new r.Primitive({geometryInstances:Y});if(Z instanceof r.ImageMaterialProperty){var Q=Z.image.getValue().toDataURL();K.appearance=new r.MaterialAppearance({flat:!![],renderState:{depthTest:{enabled:!![]}},material:new r.Material({fabric:{type:"Image",uniforms:{image:Q}}})})}else K.appearance=new r.PerInstanceColorAppearance(V);return this.setReferenceForPicking(N,I,K),K}},{key:"extractColorFromOlStyle",value:function(N,I){var G=N.getFill()?N.getFill().getColor():null,W=N.getStroke()?N.getStroke().getColor():null,Z="black";return W&&I?Z=W:G&&(Z=G),g.default.convertColorToCesium(Z)}},{key:"extractLineWidthFromOlStyle",value:function(N){var I=N.getStroke()?N.getStroke().getWidth():void 0;return I!==void 0?I:1}},{key:"wrapFillAndOutlineGeometries",value:function(N,I,G,W,Z,U){var H=this.extractColorFromOlStyle(U,![]),V=this.extractColorFromOlStyle(U,!![]),Y=new r.PrimitiveCollection;if(U.getFill()){var $=this.createColoredPrimitive(N,I,G,W,H);M.assert(!!$),Y.add($)}if(U.getStroke()&&Z){var K=this.extractLineWidthFromOlStyle(U),J=this.createColoredPrimitive(N,I,G,Z,V,K);J&&Y.add(J)}return Y}},{key:"addTextStyle",value:function(N,I,G,W,Z){var U;if(Z instanceof r.PrimitiveCollection?U=Z:(U=new r.PrimitiveCollection,U.add(Z)),!W.getText())return U;var H=W.getText(),V=this.olGeometry4326TextPartToCesium(N,I,G,H);return V&&U.add(V),U}},{key:"csAddBillboard",value:function(N,I,G,W,Z,U){!I.eyeOffset&&(I.eyeOffset=this.defaultBillboardEyeOffset_);var H=N.add(I);return this.setReferenceForPicking(G,W,H),H}},{key:"olCircleGeometryToCesium",value:function(N,I,G,W,Z){var U=this;G=g.default.olGeometryCloneTo4326(G,W),M.assert(G.getType()=="Circle");var H=G.getCenter(),V=H.length==3?H[2]:0,Y=(0,v.default)(H).call(H);Y[0]+=G.getRadius(),H=g.default.ol4326CoordinateToCesiumCartesian(H),Y=g.default.ol4326CoordinateToCesiumCartesian(Y);var $=r.Cartesian3.distance(H,Y),K=new r.CircleGeometry({center:H,radius:$,height:V}),J,Q;if(this.getHeightReference(N,I,G)===r.HeightReference.CLAMP_TO_GROUND){var et=this.extractLineWidthFromOlStyle(Z);if(et){var nt=(0,i.circular)(G.getCenter(),$),st=g.default.ol4326CoordinateArrayToCsCartesians(nt.getLinearRing(0).getCoordinates());if((0,y.isGroundPolylinePrimitiveSupported)(this.scene))J=new r.GroundPolylinePrimitive({geometryInstances:new r.GeometryInstance({geometry:new r.GroundPolylineGeometry({positions:st,width:et})}),appearance:new r.PolylineMaterialAppearance({material:this.olStyleToCesium(I,Z,!![])}),classificationType:r.ClassificationType.TERRAIN}),J.readyPromise.then(function(){(0,o.default)(this,U),this.setReferenceForPicking(N,I,J._primitive)}.bind(this));else{var ut=this.extractColorFromOlStyle(Z,!![]);J=this.createStackedGroundCorridors(N,I,et,ut,st)}}}else Q=new r.CircleOutlineGeometry({center:H,radius:$,extrudedHeight:V,height:V});var rt=this.wrapFillAndOutlineGeometries(N,I,G,K,Q,Z);return J&&rt.add(J),this.addTextStyle(N,I,G,Z,rt)}},{key:"createStackedGroundCorridors",value:function(N,I,G,W,Z){!Array.isArray(Z[0])&&(Z=[Z]),G=Math.max(3,G);for(var U=[],H=0,V=0,Y=[1e3,4e3,16e3,64e3,254e3,1e6,1e7];V<Y.length;V++){var $=Y[V];G*=2.14;var K={width:G,vertexFormat:r.VertexFormat.POSITION_ONLY},J=S(Z),Q;try{for(J.s();!(Q=J.n()).done;){var et=Q.value;K.positions=et,U.push(new r.GeometryInstance({geometry:new r.CorridorGeometry(K),attributes:{color:r.ColorGeometryInstanceAttribute.fromColor(W),distanceDisplayCondition:new r.DistanceDisplayConditionGeometryInstanceAttribute(H,$-1)}}))}}catch(nt){J.e(nt)}finally{J.f()}H=$}return new r.GroundPrimitive({geometryInstances:U})}},{key:"olLineStringGeometryToCesium",value:function(N,I,G,W,Z){var U=this;G=g.default.olGeometryCloneTo4326(G,W),M.assert(G.getType()=="LineString");var H=g.default.ol4326CoordinateArrayToCsCartesians(G.getCoordinates()),V=this.extractLineWidthFromOlStyle(Z),Y,$=this.getHeightReference(N,I,G);if($===r.HeightReference.CLAMP_TO_GROUND&&!(0,y.isGroundPolylinePrimitiveSupported)(this.scene)){var K=this.extractColorFromOlStyle(Z,!![]);Y=this.createStackedGroundCorridors(N,I,V,K,H)}else{var J=new r.PolylineMaterialAppearance({material:this.olStyleToCesium(I,Z,!![])}),Q={positions:H,width:V},et={appearance:J};if($===r.HeightReference.CLAMP_TO_GROUND){var nt=new r.GroundPolylineGeometry(Q);et.geometryInstances=new r.GeometryInstance({geometry:nt}),Y=new r.GroundPolylinePrimitive(et),Y.readyPromise.then(function(){(0,o.default)(this,U),this.setReferenceForPicking(N,I,Y._primitive)}.bind(this))}else{Q.vertexFormat=J.vertexFormat;var st=new r.PolylineGeometry(Q);et.geometryInstances=new r.GeometryInstance({geometry:st}),Y=new r.Primitive(et)}}return this.setReferenceForPicking(N,I,Y),this.addTextStyle(N,I,G,Z,Y)}},{key:"olPolygonGeometryToCesium",value:function(N,I,G,W,Z){var U=this;G=g.default.olGeometryCloneTo4326(G,W),M.assert(G.getType()=="Polygon");var H=this.getHeightReference(N,I,G),V,Y,$;if(G.getCoordinates()[0]&&G.getCoordinates()[0].length==5&&I.getGeometry().get("olcs.polygon_kind")==="rectangle"){var K=G.getCoordinates()[0],J=(0,n.boundingExtent)(K),Q=r.Rectangle.fromDegrees(J[0],J[1],J[2],J[3]),et=0;if(K[0].length==3)for(var nt=0;nt<K.length;nt++)et=Math.max(et,K[nt][2]);V=new r.RectangleGeometry({ellipsoid:r.Ellipsoid.WGS84,rectangle:Q,height:et}),Y=new r.RectangleOutlineGeometry({ellipsoid:r.Ellipsoid.WGS84,rectangle:Q,height:et})}else{var st=G.getLinearRings(),ut={},rt=ut;M.assert(st.length>0);for(var ht=0;ht<st.length;++ht){var Pt=st[ht].getCoordinates(),wt=g.default.ol4326CoordinateArrayToCsCartesians(Pt);M.assert(wt&&wt.length>0),ht==0?ut.positions=wt:(!ut.holes&&(ut.holes=[]),ut.holes.push({positions:wt}))}if(V=new r.PolygonGeometry({polygonHierarchy:rt,perPositionHeight:!![]}),H===r.HeightReference.CLAMP_TO_GROUND){var At=this.extractLineWidthFromOlStyle(Z);if(At>0){var Nt=[ut.positions];if(ut.holes)for(var Lt=0;Lt<ut.holes.length;++Lt)Nt.push(ut.holes[Lt].positions);if((0,y.isGroundPolylinePrimitiveSupported)(this.scene)){var Tt=new r.PolylineMaterialAppearance({material:this.olStyleToCesium(I,Z,!![])}),mt=[],Ft=S(Nt),ct;try{for(Ft.s();!(ct=Ft.n()).done;){var vt=ct.value,Dt=new r.GroundPolylineGeometry({positions:vt,width:At});mt.push(new r.GeometryInstance({geometry:Dt}))}}catch(zt){Ft.e(zt)}finally{Ft.f()}var Ct={appearance:Tt,geometryInstances:mt};$=new r.GroundPolylinePrimitive(Ct),$.readyPromise.then(function(){(0,o.default)(this,U),this.setReferenceForPicking(N,I,$._primitive)}.bind(this))}else{var Rt=this.extractColorFromOlStyle(Z,!![]);$=this.createStackedGroundCorridors(N,I,At,Rt,Nt)}}}else Y=new r.PolygonOutlineGeometry({polygonHierarchy:ut,perPositionHeight:!![]})}var jt=this.wrapFillAndOutlineGeometries(N,I,G,V,Y,Z);return $&&jt.add($),this.addTextStyle(N,I,G,Z,jt)}},{key:"getHeightReference",value:function(N,I,G){var W=G.get("altitudeMode");W===void 0&&(W=I.get("altitudeMode")),W===void 0&&(W=N.get("altitudeMode"));var Z=r.HeightReference.CLAMP_TO_GROUND;return W==="clampToGround"?Z=r.HeightReference.CLAMP_TO_GROUND:W==="relativeToGround"&&(Z=r.HeightReference.RELATIVE_TO_GROUND),Z}},{key:"createBillboardFromImage",value:function(N,I,G,W,Z,U,H,V){U instanceof c.default&&U.load();var Y=U.getImage(1),$=function(ht){return ht.src!=""&&ht.naturalHeight!=0&&ht.naturalWidth!=0&&ht.complete},K=function(){if(Y&&(Y instanceof HTMLCanvasElement||Y instanceof Image||Y instanceof HTMLImageElement)){var rt=G.getCoordinates(),ht=g.default.ol4326CoordinateToCesiumCartesian(rt),Pt,wt=U.getOpacity();wt!==void 0&&(Pt=new r.Color(1,1,1,wt));var At=U.getScale(),Nt=this.getHeightReference(N,I,G),Lt={image:Y,color:Pt,scale:At,heightReference:Nt,position:ht};if((0,m.default)(Lt,I.get("cesiumOptions")),U instanceof c.default){var Rt=U.getAnchor();Rt&&(Lt.pixelOffset=new r.Cartesian2((Y.width/2-Rt[0])*At,(Y.height/2-Rt[1])*At))}var Tt=this.csAddBillboard(H,Lt,N,I,G,Z);V&&V(Tt)}}.bind(this);if(Y instanceof Image&&!$(Y)){var J=![],Q=N.getSource(),et=function(){J=!![]};Q.on(["removefeature","clear"],this.boundOnRemoveOrClearFeatureListener_);var nt=y.default.obj(Q).olcs_cancellers;!nt&&(nt=y.default.obj(Q).olcs_cancellers={});var st=(0,y.getUid)(I);nt[st]&&nt[st](),nt[st]=et;var ut=function rt(){Y.removeEventListener("load",rt),!H.isDestroyed()&&!J&&K()};Y.addEventListener("load",ut)}else K()}},{key:"olPointGeometryToCesium",value:function(N,I,G,W,Z,U,H){M.assert(G.getType()=="Point"),G=g.default.olGeometryCloneTo4326(G,W);var V=null,Y=Z.getImage();if(Y){var $=G.get("olcs_model")||I.get("olcs_model");if($){var K=$(),J=(0,m.default)({},{scene:this.scene},K.cesiumOptions),Q=r.Model.fromGltf(J);V=new r.PrimitiveCollection,V.add(Q),K.debugModelMatrix&&V.add(new r.DebugModelMatrixPrimitive({modelMatrix:K.debugModelMatrix}))}else this.createBillboardFromImage(N,I,G,W,Z,Y,U,H)}return Z.getText()?this.addTextStyle(N,I,G,Z,V||new r.Primitive):V}},{key:"olMultiGeometryToCesium",value:function(N,I,G,W,Z,U,H){var V=this,Y=function(Q,et){var nt=this,st=new r.PrimitiveCollection;return Q.forEach(function(ut){(0,o.default)(this,nt),st.add(et(N,I,ut,W,Z))}.bind(this)),st},$;switch(G.getType()){case"MultiPoint":if(G=G,$=G.getPoints(),Z.getText()){var K=new r.PrimitiveCollection;return $.forEach(function(J){(0,o.default)(this,V),M.assert(J);var Q=this.olPointGeometryToCesium(N,I,J,W,Z,U,H);Q&&K.add(Q)}.bind(this)),K}else return $.forEach(function(J){(0,o.default)(this,V),M.assert(J),this.olPointGeometryToCesium(N,I,J,W,Z,U,H)}.bind(this)),null;case"MultiLineString":return G=G,$=G.getLineStrings(),Y($,this.olLineStringGeometryToCesium.bind(this));case"MultiPolygon":return G=G,$=G.getPolygons(),Y($,this.olPolygonGeometryToCesium.bind(this));default:M.assert(![],"Unhandled multi geometry type".concat(G.getType()))}}},{key:"olGeometry4326TextPartToCesium",value:function(N,I,G,W){var Z=W.getText();if(!Z)return null;var U=new r.LabelCollection({scene:this.scene}),H=(0,n.getCenter)(G.getExtent());if(G instanceof h.default){var V=G.getFirstCoordinate();H[2]=V.length==3?V[2]:0}var Y={};Y.position=g.default.ol4326CoordinateToCesiumCartesian(H),Y.text=Z,Y.heightReference=this.getHeightReference(N,I,G);var $=W.getOffsetX(),K=W.getOffsetY();if($!=0&&K!=0){var J=new r.Cartesian2($,K);Y.pixelOffset=J}Y.font=W.getFont()||"10px sans-serif";var Q=void 0;W.getFill()&&(Y.fillColor=this.extractColorFromOlStyle(W,![]),Q=r.LabelStyle.FILL),W.getStroke()&&(Y.outlineWidth=this.extractLineWidthFromOlStyle(W),Y.outlineColor=this.extractColorFromOlStyle(W,!![]),Q=r.LabelStyle.OUTLINE),W.getFill()&&W.getStroke()&&(Q=r.LabelStyle.FILL_AND_OUTLINE),Y.style=Q;var et;switch(W.getTextAlign()){case"left":et=r.HorizontalOrigin.LEFT;break;case"right":et=r.HorizontalOrigin.RIGHT;break;case"center":default:et=r.HorizontalOrigin.CENTER}if(Y.horizontalOrigin=et,W.getTextBaseline()){var nt;switch(W.getTextBaseline()){case"top":nt=r.VerticalOrigin.TOP;break;case"middle":nt=r.VerticalOrigin.CENTER;break;case"bottom":nt=r.VerticalOrigin.BOTTOM;break;case"alphabetic":nt=r.VerticalOrigin.TOP;break;case"hanging":nt=r.VerticalOrigin.BOTTOM;break;default:M.assert(![],"unhandled baseline ".concat(W.getTextBaseline()))}Y.verticalOrigin=nt}var st=U.add(Y);return this.setReferenceForPicking(N,I,st),U}},{key:"olStyleToCesium",value:function(N,I,G){var W=I.getFill(),Z=I.getStroke();if(G&&!Z||!G&&!W)return null;var U=G?Z.getColor():W.getColor();return U=g.default.convertColorToCesium(U),G&&Z.getLineDash()?r.Material.fromType("Stripe",{horizontal:![],repeat:500,evenColor:U,oddColor:new r.Color(0,0,0,0)}):r.Material.fromType("Color",{color:U})}},{key:"computePlainStyle",value:function(N,I,G,W){var Z=I.getStyleFunction(),U=null;return Z&&(U=Z(I,W)),!U&&G&&(U=G(I,W)),U?Array.isArray(U)?U:[U]:null}},{key:"getGeometryFromFeature",value:function(N,I,G){if(G)return G;var W=N.get("olcs.3d_geometry");if(W&&W instanceof s.default)return W;if(I){var Z=I.getGeometryFunction()(N);if(Z instanceof s.default)return Z}return N.getGeometry()}},{key:"olFeatureToCesium",value:function(N,I,G,W,Z){var U=this,H=this.getGeometryFromFeature(I,G,Z);if(!H)return null;var V=W.projection,Y=function(st){var ut=W.featureToCesiumMap[(0,y.getUid)(I)];ut instanceof Array?ut.push(st):W.featureToCesiumMap[(0,y.getUid)(I)]=[st]};switch(H.getType()){case"GeometryCollection":var $=new r.PrimitiveCollection,K=H;return K.getGeometries().forEach(function(nt){if((0,o.default)(this,U),nt){var st=this.olFeatureToCesium(N,I,G,W,nt);st&&$.add(st)}}.bind(this)),$;case"Point":H=H;var J=W.billboards,Q=this.olPointGeometryToCesium(N,I,H,V,G,J,Y);return Q||null;case"Circle":return H=H,this.olCircleGeometryToCesium(N,I,H,V,G);case"LineString":return H=H,this.olLineStringGeometryToCesium(N,I,H,V,G);case"Polygon":return H=H,this.olPolygonGeometryToCesium(N,I,H,V,G);case"MultiPoint":case"MultiLineString":case"MultiPolygon":var et=this.olMultiGeometryToCesium(N,I,H,V,G,W.billboards,Y);return et||null;case"LinearRing":throw new Error("LinearRing should only be part of polygon.");default:throw new Error("Ol geom type not handled : ".concat(H.getType()))}}},{key:"olVectorLayerToCesium",value:function(N,I,G){var W=I.getProjection(),Z=I.getResolution();if(Z===void 0||!W)throw M.assert(![],"View not ready"),new Error("View not ready");var U=N.getSource();U instanceof a.default&&(U=U.getSource()),M.assert(U instanceof x.default);for(var H=U.getFeatures(),V=new d.default(W,this.scene),Y=V.context,$=0;$<H.length;++$){var K=H[$];if(K){var J=N.getStyleFunction(),Q=this.computePlainStyle(N,K,J,Z);if(!(!Q||!Q.length)){for(var et=null,nt=0;nt<Q.length;nt++){var st=this.olFeatureToCesium(N,K,Q[nt],Y);if(st){if(!et)et=st;else if(st)for(var ut=0,rt=void 0;rt=st.get(ut);)et.add(rt),ut++}}et&&(G[(0,y.getUid)(K)]=et,V.getRootPrimitive().add(et))}}}return V}},{key:"convert",value:function(N,I,G,W){var Z=I.getProjection(),U=I.getResolution();if(U==null||!Z)return null;var H=N.getStyleFunction(),V=this.computePlainStyle(N,G,H,U);if(!V||!V.length)return null;W.projection=Z;for(var Y=null,$=0;$<V.length;$++){var K=this.olFeatureToCesium(N,G,V[$],W);if(!Y)Y=K;else if(K)for(var J=0,Q=void 0;Q=K.get(J);)Y.add(Q),J++}return Y}}]),L}(),P=k;z.default=P},86048:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var D=T(e(78756)),b=T(e(5146)),C=T(e(42579)),f=T(e(22777)),v=T(e(42762)),m=i(e(87647)),o=T(e(26988)),u=T(e(39211)),l=T(e(67026)),r=e(83254),s=e(72233),c=e(75907),x=T(e(15161));function a(d){if(typeof R!="function")return null;var y=new R,p=new R;return(a=function(S){return S?p:y})(d)}function i(d,y){if(!y&&d&&d.__esModule)return d;if(d===null||F(d)!=="object"&&typeof d!="function")return{default:d};var p=a(y);if(p&&p.has(d))return p.get(d);var w={},S=Object.defineProperty&&A;for(var O in d)if(O!=="default"&&Object.prototype.hasOwnProperty.call(d,O)){var B=S?A(d,O):null;B&&(B.get||B.set)?Object.defineProperty(w,O,B):w[O]=d[O]}return w.default=d,p&&p.set(d,w),w}var n=new o.default,h=[new u.default({stroke:new l.default({color:"blue",width:2})})],g=function(){function d(y){var p=this;(0,f.default)(this,d),this.urls=y.urls,this.ready=!![],this.readyPromise=D.default.resolve(!![]),this.tileWidth=256,this.tileHeight=256,this.maximumLevel=y.maximumLevel||20,this.minimumLevel=y.minimumLevel||0,this.tilingScheme=new m.WebMercatorTilingScheme,this.rectangle=y.rectangle||this.tilingScheme.rectangle,this.errorEvent=new m.Event,this.credit=y.credit,this.hasAlphaChannel=!![],this.styleFunction_=y.styleFunction||function(){return(0,C.default)(this,p),h}.bind(this),this.projection_=(0,s.get)("EPSG:3857"),this.emptyCanvas_=document.createElement("canvas"),this.emptyCanvas_.width=1,this.emptyCanvas_.height=1,this.tileRectangle_=new m.Rectangle;var w=y.cacheSize!==void 0?y.cacheSize:50;this.tileCache=new x.default(w),this.featureCache=y.featureCache||new x.default(w)}return(0,v.default)(d,[{key:"getTileCredits",value:function(){return[]}},{key:"pickFeatures",value:function(){}},{key:"getTileFeatures",value:function(p,w,S){var O=this,B=this.getCacheKey_(p,w,S),k;if(this.featureCache.containsKey(B)&&(k=this.featureCache.get(B)),!k){var P=this.getUrl_(p,w,S);if(k=fetch(P).then(function(L){return(0,C.default)(this,O),L.ok?L:D.default.reject(L)}.bind(this)).then(function(L){return(0,C.default)(this,O),L.arrayBuffer()}.bind(this)).then(function(L){return(0,C.default)(this,O),this.readFeaturesFromBuffer(L)}.bind(this)),this.featureCache.set(B,k),this.featureCache.getCount()>2*this.featureCache.highWaterMark)for(;this.featureCache.canExpireCache();)this.featureCache.pop()}return k}},{key:"readFeaturesFromBuffer",value:function(p){var w=this,S;c.VERSION<="6.4.4"&&(S={extent:[0,0,4096,4096],dataProjection:n.dataProjection,featureProjection:n.dataProjection});var O=n.readFeatures(p,S),B=this.tileWidth/4096;return O.forEach(function(k){(0,C.default)(this,w);for(var P=k.getFlatCoordinates(),L=![],E=0;E<P.length;++E)P[E]*=B,L&&(P[E]=this.tileWidth-P[E]),c.VERSION<="6.4.4"&&(L=!L)}.bind(this)),O}},{key:"getUrl_",value:function(p,w,S){var O=this.urls[0].replace("{x}",w).replace("{y}",S).replace("{z}",p);return O}},{key:"getCacheKey_",value:function(p,w,S){var O,B;return(0,b.default)(O=(0,b.default)(B="".concat(p,"_")).call(B,w,"_")).call(O,S)}},{key:"requestImage",value:function(p,w,S,O){var B=this;if(S<this.minimumLevel)return this.emptyCanvas_;try{var k=this.getCacheKey_(S,p,w),P;if(this.tileCache.containsKey(k)&&(P=this.tileCache.get(k)),!P&&(P=this.getTileFeatures(S,p,w).then(function(L){(0,C.default)(this,B),this.tilingScheme.tileXYToNativeRectangle(p,w,S,this.tileRectangle_);var E=(this.tileRectangle_.east-this.tileRectangle_.west)/this.tileWidth;return this.rasterizeFeatures(L,this.styleFunction_,E)}.bind(this)),this.tileCache.set(k,P),this.tileCache.getCount()>2*this.tileCache.highWaterMark))for(;this.tileCache.canExpireCache();)this.tileCache.pop();return P}catch(L){M.trace(L),this.raiseEvent("could not render pbf to tile",L)}}},{key:"rasterizeFeatures",value:function(p,w,S){var O=this,B=document.createElement("canvas"),k=(0,r.toContext)(B.getContext("2d"),{size:[this.tileWidth,this.tileHeight]});return p.forEach(function(P){var L=this;(0,C.default)(this,O);var E=w(P,S);E&&E.forEach(function(N){(0,C.default)(this,L),k.setStyle(N),k.drawGeometry(P)}.bind(this))}.bind(this)),B}}]),d}();z.default=g},64828:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var D=T(e(28866)),b=T(e(22466)),C=T(e(5146)),f=T(e(42579)),v=T(e(22777)),m=T(e(42762)),o=y(e(87647)),u=T(e(23378)),l=e(72233),r=T(e(66342)),s=T(e(5015)),c=T(e(78280)),x=T(e(71175)),a=T(e(64580)),i=T(e(52120)),n=T(e(74923)),h=T(e(49162)),g=T(e(92405));function d(S){if(typeof R!="function")return null;var O=new R,B=new R;return(d=function(P){return P?B:O})(S)}function y(S,O){if(!O&&S&&S.__esModule)return S;if(S===null||F(S)!=="object"&&typeof S!="function")return{default:S};var B=d(O);if(B&&B.has(S))return B.get(S);var k={},P=Object.defineProperty&&A;for(var L in S)if(L!=="default"&&Object.prototype.hasOwnProperty.call(S,L)){var E=P?A(S,L):null;E&&(E.get||E.set)?Object.defineProperty(k,L,E):k[L]=S[L]}return k.default=S,B&&B.set(S,k),k}var p=function(){function S(O){var B=this;(0,v.default)(this,S),this.isBaseMap=O.isBaseMap?O.isBaseMap:![],this.autoRenderLoop_=null,this.options_=O,this.map_=(0,D.default)(O),this.time_=O.time||function(){return o.JulianDate.now()},this.to4326Transform_=(0,l.getTransform)(this.map_.getView().getProjection(),"EPSG:4326"),this.resolutionScale_=1,this.canvasClientWidth_=0,this.canvasClientHeight_=0,this.resolutionScaleChanged_=!![];var k="position:absolute;top:0;left:0;width:100%;height:100%;";if(this.scene_=O.scene_c,this.scene_){var P=O.target||this.map_.getViewport();if(typeof P=="string"&&(P=document.getElementById(P)),this.container_=document.querySelector(".cesium-widget"),this.isOverMap_=!O.target,this.isOverMap_&&O.stopOpenLayersEventsPropagation)for(var L=["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"],E=0,N=L.length;E<N;++E)this.container_.addEventListener(L[E],function(Q){return(0,f.default)(this,B),Q.stopPropagation()}.bind(this));this.canvas_=document.getElementsByTagName("canvas")[0],this.enabled_=![],this.pausedInteractions_=[],this.hiddenRootGroup_=null}else{this.container_=document.createElement("DIV666");var I=document.createAttribute("style");I.value="".concat(k,"visibility:hidden;"),this.container_.setAttributeNode(I);var G=O.target||this.map_.getViewport();if(typeof G=="string"&&(G=document.getElementById(G)),G.appendChild(this.container_),this.isOverMap_=!O.target,this.isOverMap_&&O.stopOpenLayersEventsPropagation)for(var W=["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"],Z=0,U=W.length;Z<U;++Z)this.container_.addEventListener(W[Z],function(Q){return(0,f.default)(this,B),Q.stopPropagation()}.bind(this));this.canvas_=document.createElement("CANVAS");var H=document.createAttribute("style");H.value=k,this.canvas_.setAttributeNode(H),r.default.supportsImageRenderingPixelated()&&(this.canvas_.style.imageRendering=r.default.imageRenderingValue()),this.canvas_.oncontextmenu=function(){return![]},this.canvas_.onselectstart=function(){return![]},this.container_.appendChild(this.canvas_),this.enabled_=![],this.pausedInteractions_=[],this.hiddenRootGroup_=null;var V=O.sceneOptions!==void 0?O.sceneOptions:{};V.canvas=this.canvas_,V.scene3DOnly=!![],this.scene_=new o.Scene(V)}var Y=this.scene_.screenSpaceCameraController;Y.tiltEventTypes.push({eventType:o.CameraEventType.LEFT_DRAG,modifier:o.KeyboardEventModifier.SHIFT}),Y.tiltEventTypes.push({eventType:o.CameraEventType.LEFT_DRAG,modifier:o.KeyboardEventModifier.ALT}),this.scene_.camera.constrainedAxis=o.Cartesian3.UNIT_Z,this.camera_=new x.default(this.scene_,this.map_),this.globe_=this.scene_.globe;var $=new o.SingleTileImageryProvider({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",rectangle:o.Rectangle.fromDegrees(0,0,1,1)});if(this.globe_.imageryLayers.addImageryProvider($,0),this.dataSourceCollection_=new o.DataSourceCollection,this.dataSourceDisplay_=new o.DataSourceDisplay({scene:this.scene_,dataSourceCollection:this.dataSourceCollection_}),this.isBaseMap==![]){this.synchronizers=O.createSynchronizers?O.createSynchronizers(this.map_,this.scene_,this.dataSourceCollection_):[new a.default(this.map_,this.scene_),new i.default(this.map_,this.scene_),new n.default(this.map_,this.scene_)],this.handleResize_();for(var K=this.synchronizers.length-1;K>=0;--K)this.synchronizers[K].synchronize()}this.lastFrameTime_=0,this.renderId_=void 0,this.targetFrameRate_=Number.POSITIVE_INFINITY,this.blockCesiumRendering_=![],this.warmingUp_=![],this.trackedFeature_=null,this.trackedEntity_=null,this.entityView_=null,this.needTrackedEntityUpdate_=![],this.boundingSphereScratch_=new o.BoundingSphere;var J=new o.EventHelper;J.add(this.scene_.preRender,S.prototype.updateTrackedEntity_,this),o.Camera.enableSuspendTerrainAdjustment=![]}return(0,m.default)(S,[{key:"update",value:function(B){B&&(this.map_.isSplit=B),this.synchronizers=this.options_.createSynchronizers?this.options_.createSynchronizers(this.map_,this.scene_,this.dataSourceCollection_):[new a.default(this.map_,this.scene_),new i.default(this.map_,this.scene_),new n.default(this.map_,this.scene_)],this.handleResize_();for(var k=this.synchronizers.length-1;k>=0;--k)this.synchronizers[k].synchronize();this.render_()}},{key:"render_",value:function(){this.renderId_!==void 0&&(cancelAnimationFrame(this.renderId_),this.renderId_=void 0),(this.enabled_||this.warmingUp_)&&!this.blockCesiumRendering_&&(this.renderId_=requestAnimationFrame(this.onAnimationFrame_.bind(this)))}},{key:"onAnimationFrame_",value:function(B){this.renderId_=void 0;var k=1e3/this.targetFrameRate_,P=B-this.lastFrameTime_;if(P<k){this.render_();return}this.lastFrameTime_=B;var L=this.time_();if(this.scene_.initializeFrame(),this.handleResize_(),this.dataSourceDisplay_.update(L),this.entityView_){var E=this.trackedEntity_,N=this.dataSourceDisplay_.getBoundingSphere(E,![],this.boundingSphereScratch_);N===o.BoundingSphereState.DONE&&(this.boundingSphereScratch_.radius=1,this.entityView_.update(L,this.boundingSphereScratch_))}this.scene_.render(L),this.camera_.checkCameraChange(),this.render_()}},{key:"updateTrackedEntity_",value:function(){if(this.needTrackedEntityUpdate_){var B=this.trackedEntity_,k=this.scene_,P=this.dataSourceDisplay_.getBoundingSphere(B,![],this.boundingSphereScratch_);if(P!==o.BoundingSphereState.PENDING){k.screenSpaceCameraController.enableTilt=![];var L=P!==o.BoundingSphereState.FAILED?this.boundingSphereScratch_:void 0;L&&(L.radius=1),this.entityView_=new o.EntityView(B,k,k.mapProjection.ellipsoid),this.entityView_.update(this.time_(),L),this.needTrackedEntityUpdate_=![]}}}},{key:"handleResize_",value:function(){var B=this.canvas_.clientWidth,k=this.canvas_.clientHeight;if(!(B===0|k===0)&&!(B===this.canvasClientWidth_&&k===this.canvasClientHeight_&&!this.resolutionScaleChanged_)){var P=this.resolutionScale_;!r.default.supportsImageRenderingPixelated()&&(P*=window.devicePixelRatio||1),this.resolutionScaleChanged_=![],this.canvasClientWidth_=B,this.canvasClientHeight_=k,B*=P,k*=P,this.canvas_.width=B,this.canvas_.height=k,this.scene_.camera.frustum.aspectRatio=B/k}}},{key:"getCamera",value:function(){return this.camera_}},{key:"getOlMap",value:function(){return this.map_}},{key:"getOlView",value:function(){var B=this.map_.getView();return M.assert(B),B}},{key:"getCesiumScene",value:function(){return this.scene_}},{key:"getDataSources",value:function(){return this.dataSourceCollection_}},{key:"getDataSourceDisplay",value:function(){return this.dataSourceDisplay_}},{key:"getEnabled",value:function(){return this.enabled_}},{key:"setEnabled",value:function(B,k){var P=this;if(this.enabled_!==B){this.enabled_=B,this.container_.style.visibility=this.enabled_?"visible":"hidden";var L;if(this.enabled_){if(this.throwOnUnitializedMap_(),this.isOverMap_){L=this.map_.getInteractions(),L.forEach(function(N,I,G){(0,f.default)(this,P),this.pausedInteractions_.push(N)}.bind(this)),L.clear(),this.map_.addInteraction=function(N){return(0,f.default)(this,P),this.pausedInteractions_.push(N)}.bind(this),this.map_.removeInteraction=function(N){var I,G=this;return(0,f.default)(this,P),this.pausedInteractions_=(0,b.default)(I=this.pausedInteractions_).call(I,function(W){return(0,f.default)(this,G),W!==N}.bind(this))}.bind(this);var E=this.map_.getLayerGroup();E.getVisible()&&(this.hiddenRootGroup_=E,this.hiddenRootGroup_.setVisible(k?!![]:![])),this.map_.getOverlayContainer().classList.add("olcs-hideoverlay")}this.camera_.readFromView(),this.render_()}else this.isOverMap_&&(L=this.map_.getInteractions(),this.pausedInteractions_.forEach(function(N){(0,f.default)(this,P),L.push(N)}.bind(this)),this.pausedInteractions_.length=0,this.map_.addInteraction=function(N){return(0,f.default)(this,P),this.map_.getInteractions().push(N)}.bind(this),this.map_.removeInteraction=function(N){return(0,f.default)(this,P),this.map_.getInteractions().remove(N)}.bind(this),this.map_.getOverlayContainer().classList.remove("olcs-hideoverlay"),this.hiddenRootGroup_&&(this.hiddenRootGroup_.setVisible(!![]),this.hiddenRootGroup_=null)),this.camera_.updateView()}}},{key:"warmUp",value:function(B,k){var P=this;if(!this.enabled_){this.throwOnUnitializedMap_(),this.camera_.readFromView();var L=this.globe_.ellipsoid,E=this.scene_.camera,N=L.cartesianToCartographic(E.position);N.height<B&&(N.height=B,E.position=L.cartographicToCartesian(N)),this.warmingUp_=!![],this.render_(),setTimeout(function(){(0,f.default)(this,P),this.warmingUp_=![]}.bind(this),k)}}},{key:"setBlockCesiumRendering",value:function(B){this.blockCesiumRendering_!==B&&(this.blockCesiumRendering_=B,this.render_())}},{key:"enableAutoRenderLoop",value:function(){!this.autoRenderLoop_&&(this.autoRenderLoop_=new c.default(this))}},{key:"getAutoRenderLoop",value:function(){return this.autoRenderLoop_}},{key:"setResolutionScale",value:function(B){B=Math.max(0,B),B!==this.resolutionScale_&&(this.resolutionScale_=Math.max(0,B),this.resolutionScaleChanged_=!![],this.autoRenderLoop_&&this.autoRenderLoop_.restartRenderLoop())}},{key:"setTargetFrameRate",value:function(B){this.targetFrameRate_!==B&&(this.targetFrameRate_=B,this.render_())}},{key:"throwOnUnitializedMap_",value:function(){var B=this.map_,k=B.getView(),P=k.getCenter();if(!k.isDef()||isNaN(P[0])||isNaN(P[1])){var L;throw new Error((0,C.default)(L="The OpenLayers map is not properly initialized: ".concat(P," / ")).call(L,k.getResolution()))}}},{key:"trackedFeature",get:function(){return this.trackedFeature_},set:function(B){var k=this;if(this.trackedFeature_!==B){var P=this.scene_;if(!B||!B.getGeometry()){this.needTrackedEntityUpdate_=![],P.screenSpaceCameraController.enableTilt=!![],this.trackedEntity_&&this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_),this.trackedEntity_=null,this.trackedFeature_=null,this.entityView_=null,P.camera.lookAtTransform(o.Matrix4.IDENTITY);return}this.trackedFeature_=B,this.needTrackedEntityUpdate_=!![];var L=this.to4326Transform_,E=function(){var G=B.getGeometry();M.assert(G instanceof u.default);var W=G.getCoordinates(),Z=L(W,void 0,W.length);return s.default.ol4326CoordinateToCesiumCartesian(Z)},N={position:new o.CallbackProperty(function(I,G){return(0,f.default)(this,k),E()}.bind(this),![]),point:{pixelSize:1,color:o.Color.TRANSPARENT}};this.trackedEntity_=this.dataSourceDisplay_.defaultDataSource.entities.add(N)}}}]),S}(),w=p;z.default=w},74923:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var F=M(e(28866)),R=M(e(85208)),A=M(e(42579)),T=M(e(22777)),D=M(e(42762)),b=M(e(32e3)),C=e(66342),f=function(){function m(o,u){var l=this;(0,T.default)(this,m),this.map=o,this.overlays_=(0,F.default)(this).getOverlays(),this.scene=u,this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";var r=["click","dblclick","mousedown","touchstart","MSPointerDown","pointerdown","mousewheel","wheel"];r.forEach(function(s){var c=this;(0,A.default)(this,l),this.overlayContainerStopEvent_.addEventListener(s,function(x){return(0,A.default)(this,c),x.stopPropagation()}.bind(this))}.bind(this)),this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_),this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.scene.canvas.parentElement.appendChild(this.overlayContainer_),this.overlayMap_={}}return(0,D.default)(m,[{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"synchronize",value:function(){this.destroyAll(),this.addOverlays(),this.overlays_.on("add",this.addOverlayFromEvent_.bind(this)),this.overlays_.on("remove",this.removeOverlayFromEvent_.bind(this))}},{key:"addOverlayFromEvent_",value:function(u){var l=u.element;this.addOverlay(l)}},{key:"addOverlays",value:function(){var u=this;this.overlays_.forEach(function(l){(0,A.default)(this,u),this.addOverlay(l)}.bind(this))}},{key:"addOverlay",value:function(u){if(u){var l=new b.default({scene:this.scene,synchronizer:this,parent:u}),r=(0,C.getUid)(u).toString();this.overlayMap_[r]=l}}},{key:"removeOverlayFromEvent_",value:function(u){var l=u.element;this.removeOverlay(l)}},{key:"removeOverlay",value:function(u){var l=(0,C.getUid)(u).toString(),r=this.overlayMap_[l];r&&(r.destroy(),delete this.overlayMap_[l])}},{key:"destroyAll",value:function(){var u=this;(0,R.default)(this.overlayMap_).forEach(function(l){(0,A.default)(this,u);var r=this.overlayMap_[l];r.destroy(),delete this.overlayMap_[l]}.bind(this))}}]),m}(),v=f;z.default=v},64580:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(65557),A=e(87879),T=e(83393),D=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=D(e(28866)),C=D(e(5146)),f=D(e(69033)),v=D(e(36583)),m=D(e(42579)),o=D(e(22777)),u=D(e(42762)),l=D(e(30044)),r=D(e(99085)),s=D(e(34009)),c=g(e(87647)),x=D(e(27482)),a=e(66342),i=D(e(88589)),n=D(e(5015));function h(S){if(typeof A!="function")return null;var O=new A,B=new A;return(h=function(P){return P?B:O})(S)}function g(S,O){if(!O&&S&&S.__esModule)return S;if(S===null||F(S)!=="object"&&typeof S!="function")return{default:S};var B=h(O);if(B&&B.has(S))return B.get(S);var k={},P=Object.defineProperty&&T;for(var L in S)if(L!=="default"&&Object.prototype.hasOwnProperty.call(S,L)){var E=P?T(S,L):null;E&&(E.get||E.set)?Object.defineProperty(k,L,E):k[L]=S[L]}return k.default=S,B&&B.set(S,k),k}function d(S){var O=y();return function(){var k=(0,s.default)(S),P;if(O){var L=(0,s.default)(this).constructor;P=R(k,arguments,L)}else P=k.apply(this,arguments);return(0,r.default)(this,P)}}function y(){if(typeof Reflect>"u"||!R)return![];if(R.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(R(Boolean,[],function(){})),!![]}catch{return![]}}var p=function(S){(0,l.default)(B,S);var O=d(B);function B(k,P){var L;return(0,o.default)(this,B),L=O.call(this,k,P),L.cesiumLayers_=P.imageryLayers,L.ourLayers_=new c.ImageryLayerCollection,L}return(0,u.default)(B,[{key:"addCesiumObject",value:function(P){this.cesiumLayers_.add(P),this.ourLayers_.add(P)}},{key:"destroyCesiumObject",value:function(P){P.destroy()}},{key:"removeSingleCesiumObject",value:function(P,L){this.cesiumLayers_.remove(P,L),this.ourLayers_.remove(P,![])}},{key:"removeAllCesiumObjects",value:function(P){for(var L=0;L<this.ourLayers_.length;++L)this.cesiumLayers_.remove(this.ourLayers_.get(L),P);this.ourLayers_.removeAll(![])}},{key:"convertLayerToCesiumImageries",value:function(P,L){var E=n.default.tileLayerToImageryLayer((0,b.default)(this),P,L);return E?[E]:null}},{key:"createSingleLayerCounterparts",value:function(P){var L=this,E=P.layer,N=(0,a.getUid)(E).toString(),I=this.view.getProjection();M.assert(I);var G=this.convertLayerToCesiumImageries(E,I),W=(0,b.default)(this).isSplit;if(W)return Array.isArray(G)?G:null;if(G){var Z,U,H=[];if((0,C.default)(Z=[P.layer]).call(Z,P.parents).forEach(function($){var K=this;(0,m.default)(this,L),H.push($.on(["change:opacity","change:visible"],function(){(0,m.default)(this,K),M.assert(G);for(var J=0;J<G.length;++J)n.default.updateCesiumLayerProperties(P,G[J])}.bind(this)))}.bind(this)),E.getStyleFunction){var V=E.getStyleFunction();H.push(E.on("change",function(){(0,m.default)(this,L);var $=E.getStyleFunction();if(V!==$){V=$;for(var K=0;K<G.length;++K){var J=G[K];J._imageryCache&&J.imageryProvider.cache_&&(J._imageryCache={},J.imageryProvider.cache_={},J.imageryProvider.styleFunction_=$)}this.scene.requestRender()}}.bind(this)))}for(var Y=0;Y<G.length;++Y)n.default.updateCesiumLayerProperties(P,G[Y]);H.push(E.on("change:extent",function($){(0,m.default)(this,L);for(var K=0;K<G.length;++K)this.cesiumLayers_.remove(G[K],!![]),this.ourLayers_.remove(G[K],![]);delete this.layerMap[(0,a.getUid)(E)],this.synchronize()}.bind(this))),H.push(E.on("change",function($){(0,m.default)(this,L);for(var K=0;K<G.length;++K){var J=this.cesiumLayers_.indexOf(G[K]);J>=0&&(this.cesiumLayers_.remove(G[K],![]),this.cesiumLayers_.add(G[K],J))}}.bind(this))),(U=this.olLayerListenKeys[N]).push.apply(U,H)}return Array.isArray(G)?G:null}},{key:"orderLayers",value:function(){for(var P=this,L=[],E={},N=[this.mapLayerGroup];N.length>0;){var I=(0,f.default)(N).call(N,0,1)[0];if(L.push(I),E[(0,a.getUid)(I)]=I.getZIndex()||0,I instanceof x.default){var G=I.getLayers();G&&N.unshift.apply(N,(0,v.default)(G.getArray()))}}(0,a.stableSort)(L,function(W,Z){return(0,m.default)(this,P),E[(0,a.getUid)(W)]-E[(0,a.getUid)(Z)]}.bind(this)),L.forEach(function(W){var Z=this;(0,m.default)(this,P);var U=(0,a.getUid)(W).toString(),H=this.layerMap[U];H&&H.forEach(function(V){(0,m.default)(this,Z),this.raiseToTop(V)}.bind(this))}.bind(this))}},{key:"raiseToTop",value:function(P){this.cesiumLayers_.raiseToTop(P)}}]),B}(i.default),w=p;z.default=w},32e3:function(X,z,e){"use strict";var M=e(29870),F=e(65557),R=e(20314),A=e(26352),T=e(40639),D=e(43586),b=e(87879),C=e(83393),f=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var v=f(e(69033)),m=f(e(42579)),o=f(e(22777)),u=f(e(42762)),l=f(e(87507)),r=f(e(30044)),s=f(e(99085)),c=f(e(34009)),x=d(e(87647)),a=f(e(42369)),i=e(72233),n=e(66342),h=e(7165);function g(P){if(typeof b!="function")return null;var L=new b,E=new b;return(g=function(I){return I?E:L})(P)}function d(P,L){if(!L&&P&&P.__esModule)return P;if(P===null||M(P)!=="object"&&typeof P!="function")return{default:P};var E=g(L);if(E&&E.has(P))return E.get(P);var N={},I=Object.defineProperty&&C;for(var G in P)if(G!=="default"&&Object.prototype.hasOwnProperty.call(P,G)){var W=I?C(P,G):null;W&&(W.get||W.set)?Object.defineProperty(N,G,W):N[G]=P[G]}return N.default=P,E&&E.set(P,N),N}function y(P,L){var E=typeof T<"u"&&D(P)||P["@@iterator"];if(!E){if(Array.isArray(P)||(E=p(P))||L&&P&&typeof P.length=="number"){E&&(P=E);var N=0,I=function(){};return{s:I,n:function(){return N>=P.length?{done:!![]}:{done:![],value:P[N++]}},e:function(H){throw H},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var G=!![],W=![],Z;return{s:function(){E=E.call(P)},n:function(){var H=E.next();return G=H.done,H},e:function(H){W=!![],Z=H},f:function(){try{!G&&E.return!=null&&E.return()}finally{if(W)throw Z}}}}function p(P,L){var E;if(P){if(typeof P=="string")return w(P,L);var N=R(E=Object.prototype.toString.call(P)).call(E,8,-1);if(N==="Object"&&P.constructor&&(N=P.constructor.name),N==="Map"||N==="Set")return A(P);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return w(P,L)}}function w(P,L){(L==null||L>P.length)&&(L=P.length);for(var E=0,N=new Array(L);E<L;E++)N[E]=P[E];return N}function S(P){var L=O();return function(){var N=(0,c.default)(P),I;if(L){var G=(0,c.default)(this).constructor;I=F(N,arguments,G)}else I=N.apply(this,arguments);return(0,s.default)(this,I)}}function O(){if(typeof Reflect>"u"||!F)return![];if(F.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(F(Boolean,[],function(){})),!![]}catch{return![]}}var B=function(P){(0,r.default)(E,P);var L=S(E);function E(N){var I=this,G;(0,o.default)(this,E);var W=N.parent;G=L.call(this,W.getOptions()),G.scenePostRenderListenerRemover_=null,G.scene_=N.scene,G.synchronizer_=N.synchronizer,G.parent_=W,G.positionWGS84_=void 0,G.observer_=new MutationObserver(G.handleElementChanged.bind((0,l.default)(G))),G.attributeObserver_=[],G.listenerKeys_=[];var Z=function(H){return(0,m.default)(this,I),G.setPropertyFromEvent_(H)}.bind(this);return G.listenerKeys_.push(G.parent_.on("change:position",Z)),G.listenerKeys_.push(G.parent_.on("change:element",Z)),G.listenerKeys_.push(G.parent_.on("change:offset",Z)),G.listenerKeys_.push(G.parent_.on("change:position",Z)),G.listenerKeys_.push(G.parent_.on("change:positioning",Z)),G.setProperties(G.parent_.getProperties()),G.handleMapChanged(),G.handleElementChanged(),G}return(0,u.default)(E,[{key:"observeTarget_",value:function(I){var G=this;if(this.observer_){this.observer_.disconnect(),this.observer_.observe(I,{attributes:![],childList:!![],characterData:!![],subtree:!![]}),this.attributeObserver_.forEach(function(H){(0,m.default)(this,G),H.disconnect()}.bind(this)),this.attributeObserver_.length=0;for(var W=0;W<I.childNodes.length;W++){var Z=I.childNodes[W];if(Z.nodeType===1){var U=new MutationObserver(this.handleElementChanged.bind(this));U.observe(Z,{attributes:!![],subtree:!![]}),this.attributeObserver_.push(U)}}}}},{key:"setPropertyFromEvent_",value:function(I){I.target&&I.key&&this.set(I.key,I.target.get(I.key))}},{key:"getScene",value:function(){return this.scene_}},{key:"handleMapChanged",value:function(){this.scenePostRenderListenerRemover_&&(this.scenePostRenderListenerRemover_(),(0,n.removeNode)(this.element)),this.scenePostRenderListenerRemover_=null;var I=this.getScene();if(I){this.scenePostRenderListenerRemover_=I.postRender.addEventListener(this.updatePixelPosition.bind(this)),this.updatePixelPosition();var G=this.stopEvent?this.synchronizer_.getOverlayContainerStopEvent():this.synchronizer_.getOverlayContainer();this.insertFirst?G.insertBefore(this.element,G.childNodes[0]||null):G.appendChild(this.element)}}},{key:"handlePositionChanged",value:function(){var I=this.getPosition();if(I){var G=this.parent_.getMap().getView().getProjection();this.positionWGS84_=(0,i.transform)(I,G,"EPSG:4326")}else this.positionWGS84_=void 0;this.updatePixelPosition()}},{key:"handleElementChanged",value:function(){function I(V,Y){var $=this,K=V.cloneNode();Y&&Y.appendChild(K),V.nodeType!=Node.TEXT_NODE&&K.addEventListener("click",function(et){(0,m.default)(this,$),V.dispatchEvent(new MouseEvent("click",et)),et.stopPropagation()}.bind(this));for(var J=V.childNodes,Q=0;Q<J.length;Q++)J[Q]&&I(J[Q],K);return K}(0,n.removeChildren)(this.element);var G=this.getElement();if(G&&G.parentNode&&G.parentNode.childNodes){var W=y(G.parentNode.childNodes),Z;try{for(W.s();!(Z=W.n()).done;){var U=Z.value,H=I(U,null);this.element.appendChild(H)}}catch(V){W.e(V)}finally{W.f()}}G.parentNode&&this.observeTarget_(G.parentNode)}},{key:"updatePixelPosition",value:function(){var I=this.positionWGS84_;if(!this.scene_||!I){this.setVisible(![]);return}var G=0;if(I.length===2){var W=this.scene_.globe.getHeight(x.Cartographic.fromDegrees(I[0],I[1]));W&&this.scene_.globe.tilesLoaded&&(I[2]=W),W&&(G=W)}else G=I[2];var Z=x.Cartesian3.fromDegrees(I[0],I[1],G),U=this.scene_.camera,H=new x.BoundingSphere(new x.Cartesian3,6356752),V=new x.Occluder(H,U.position);if(!V.isPointVisible(Z)){this.setVisible(![]);return}var Y=U.frustum.computeCullingVolume(U.position,U.direction,U.up);if(Y.computeVisibility(new x.BoundingSphere(Z))!==1){this.setVisible(![]);return}this.setVisible(!![]);var $=this.scene_.cartesianToCanvasCoordinates(Z),K=[$.x,$.y],J=[this.scene_.canvas.width,this.scene_.canvas.height];this.updateRenderedPosition(K,J)}},{key:"destroy",value:function(){var I;this.scenePostRenderListenerRemover_&&this.scenePostRenderListenerRemover_(),this.observer_&&this.observer_.disconnect(),(0,h.unByKey)(this.listenerKeys_),(0,v.default)(I=this.listenerKeys_).call(I,0),this.element.removeNode?this.element.removeNode(!![]):this.element.remove(),this.element=null}}]),E}(a.default),k=B;z.default=k},52120:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(65557),A=e(87879),T=e(83393),D=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var b=D(e(5146)),C=D(e(42579)),f=D(e(22777)),v=D(e(42762)),m=D(e(30044)),o=D(e(99085)),u=D(e(34009)),l=y(e(87647)),r=D(e(92405)),s=D(e(21639)),c=D(e(87653)),x=D(e(86619)),a=e(66342),i=D(e(37029)),n=D(e(33964)),h=D(e(88589)),g=D(e(72013));function d(B){if(typeof A!="function")return null;var k=new A,P=new A;return(d=function(E){return E?P:k})(B)}function y(B,k){if(!k&&B&&B.__esModule)return B;if(B===null||F(B)!=="object"&&typeof B!="function")return{default:B};var P=d(k);if(P&&P.has(B))return P.get(B);var L={},E=Object.defineProperty&&T;for(var N in B)if(N!=="default"&&Object.prototype.hasOwnProperty.call(B,N)){var I=E?T(B,N):null;I&&(I.get||I.set)?Object.defineProperty(L,N,I):L[N]=B[N]}return L.default=B,P&&P.set(B,L),L}function p(B){var k=w();return function(){var L=(0,u.default)(B),E;if(k){var N=(0,u.default)(this).constructor;E=R(L,arguments,N)}else E=L.apply(this,arguments);return(0,o.default)(this,E)}}function w(){if(typeof Reflect>"u"||!R)return![];if(R.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(R(Boolean,[],function(){})),!![]}catch{return![]}}var S=function(B){(0,m.default)(P,B);var k=p(P);function P(L,E,N){var I;return(0,f.default)(this,P),I=k.call(this,L,E),I.converter=N||new g.default(E),I.csAllPrimitives_=new l.PrimitiveCollection,E.primitives.add(I.csAllPrimitives_),I.csAllPrimitives_.destroyPrimitives=![],I}return(0,v.default)(P,[{key:"addCesiumObject",value:function(E){M.assert(E),E.getRootPrimitive().counterpart=E,this.csAllPrimitives_.add(E.getRootPrimitive())}},{key:"destroyCesiumObject",value:function(E){E.getRootPrimitive().destroy()}},{key:"removeSingleCesiumObject",value:function(E,N){E.destroy(),this.csAllPrimitives_.destroyPrimitives=N,this.csAllPrimitives_.remove(E.getRootPrimitive()),this.csAllPrimitives_.destroyPrimitives=![]}},{key:"removeAllCesiumObjects",value:function(E){if(this.csAllPrimitives_.destroyPrimitives=E,E)for(var N=0;N<this.csAllPrimitives_.length;++N)this.csAllPrimitives_.get(N).counterpart.destroy();this.csAllPrimitives_.removeAll(),this.csAllPrimitives_.destroyPrimitives=![]}},{key:"updateLayerVisibility",value:function(E,N){var I,G=this,W=!![];(0,b.default)(I=[E.layer]).call(I,E.parents).forEach(function(Z){(0,C.default)(this,G);var U=Z.getVisible();U!==void 0?W&=U:W=![]}.bind(this)),N.show=W}},{key:"createSingleLayerCounterparts",value:function(E){var N,I=this,G=E.layer;if(!(G instanceof i.default)||G instanceof n.default)return null;M.assert(G instanceof s.default);var W=G.getSource();if(W instanceof c.default&&(W=W.getSource()),!W)return null;M.assert(W instanceof r.default),M.assert(this.view);var Z=this.view,U={},H=this.converter.olVectorLayerToCesium(G,Z,U),V=H.getRootPrimitive(),Y=H.olListenKeys;(0,b.default)(N=[E.layer]).call(N,E.parents).forEach(function(J){var Q=this;(0,C.default)(this,I),Y.push((0,a.olcsListen)(J,"change:visible",function(){(0,C.default)(this,Q),this.updateLayerVisibility(E,V)}.bind(this)))}.bind(this)),this.updateLayerVisibility(E,V);var $=function(J){M.assert(G instanceof i.default||G instanceof x.default);var Q=H.context,et=this.converter.convert(G,Z,J,Q);et&&(U[(0,a.getUid)(J)]=et,V.add(et))}.bind(this),K=function(J){var Q=this,et=(0,a.getUid)(J),nt=H.context,st=nt.featureToCesiumMap[et];st&&(delete nt.featureToCesiumMap[et],st.forEach(function(rt){(0,C.default)(this,Q),rt instanceof l.Billboard&&nt.billboards.remove(rt)}.bind(this)));var ut=U[et];delete U[et],ut&&V.remove(ut)}.bind(this);return Y.push((0,a.olcsListen)(W,"addfeature",function(J){(0,C.default)(this,I),M.assert(J.feature),$(J.feature)}.bind(this),this)),Y.push((0,a.olcsListen)(W,"removefeature",function(J){(0,C.default)(this,I),M.assert(J.feature),K(J.feature)}.bind(this),this)),Y.push((0,a.olcsListen)(W,"changefeature",function(J){(0,C.default)(this,I);var Q=J.feature;M.assert(Q),K(Q),$(Q)}.bind(this),this)),H?[H]:null}}]),P}(h.default),O=S;z.default=O},5015:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.attributionsFunctionToCredits=B,z.calcDistanceForResolution=P,z.calcResolutionForDistance=L,z.default=void 0;var D=T(e(28866)),b=T(e(5146)),C=T(e(78756)),f=T(e(42579)),v=S(e(87647)),m=e(33917),o=T(e(61483)),u=T(e(86619)),l=e(72233),r=T(e(46581)),s=T(e(27472)),c=T(e(17655)),x=T(e(97054)),a=T(e(33792)),i=T(e(63206)),n=e(35583),h=T(e(38938)),g=T(e(66342)),d=T(e(86048)),y=T(e(33964)),p=e(92086);function w(E){if(typeof R!="function")return null;var N=new R,I=new R;return(w=function(W){return W?I:N})(E)}function S(E,N){if(!N&&E&&E.__esModule)return E;if(E===null||F(E)!=="object"&&typeof E!="function")return{default:E};var I=w(N);if(I&&I.has(E))return I.get(E);var G={},W=Object.defineProperty&&A;for(var Z in E)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(E,Z)){var U=W?A(E,Z):null;U&&(U.get||U.set)?Object.defineProperty(G,Z,U):G[Z]=E[Z]}return G.default=E,I&&I.set(E,G),G}var O={};O.computePixelSizeAtCoordinate=function(E,N){var I=E.camera,G=E.canvas,W=I.frustum,Z=v.Cartesian3.magnitude(v.Cartesian3.subtract(I.position,N,new v.Cartesian3));return W.getPixelDimensions(G.clientWidth,G.clientHeight,Z,E.pixelRatio,new v.Cartesian2)},O.computeBoundingBoxAtTarget=function(E,N,I){var G=O.computePixelSizeAtCoordinate(E,N),W=v.Transforms.eastNorthUpToFixedFrame(N),Z=v.Matrix4.multiplyByPoint(W,new v.Cartesian3(-G.x*I,-G.y*I,0),new v.Cartesian3),U=v.Matrix4.multiplyByPoint(W,new v.Cartesian3(G.x*I,G.y*I,0),new v.Cartesian3);return v.Ellipsoid.WGS84.cartesianArrayToCartographicArray([Z,U])},O.applyHeightOffsetToGeometry=function(E,N){var I=this;E.applyTransform(function(G,W,Z){if((0,f.default)(this,I),M.assert(G===W),Z!==void 0&&Z>=3)for(var U=0;U<W.length;U+=Z)W[U+2]=W[U+2]+N;return W}.bind(this))},O.createMatrixAtCoordinates=function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.Cartesian3.ZERO,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new v.Cartesian3(1,1,1),W=O.ol4326CoordinateToCesiumCartesian(E),Z=v.Transforms.eastNorthUpToFixedFrame(W),U=v.Quaternion.fromAxisAngle(v.Cartesian3.UNIT_Z,-N),H=v.Matrix4.fromTranslationQuaternionRotationScale(I,U,G);return v.Matrix4.multiply(Z,H,new v.Matrix4)},O.rotateAroundAxis=function(E,N,I,G,W){var Z=v.Math.clamp,U=v.defaultValue,H=W||{},V=U(H.duration,500),Y=U(H.easing,m.linear),$=H.callback,K=0,J=new v.Matrix4,Q=Date.now(),et=function nt(){var st=Date.now(),ut=st-Q,rt=Y(Z(ut/V,0,1));M.assert(rt>=K),E.transform.clone(J);var ht=(rt-K)*N;K=rt,E.lookAtTransform(G),E.rotate(I,ht),E.lookAtTransform(J),rt<1?window.requestAnimationFrame(nt):$&&$()};window.requestAnimationFrame(et)},O.setHeadingUsingBottomCenter=function(E,N,I,G){var W=E.camera,Z=O.computeAngleToZenith(E,I),U=W.right,H=v.Quaternion.fromAxisAngle(U,Z),V=v.Matrix3.fromQuaternion(H),Y=new v.Cartesian3;v.Cartesian3.subtract(W.position,I,Y);var $=new v.Cartesian3;v.Matrix3.multiplyByVector(V,Y,$),v.Cartesian3.add($,I,$);var K=v.Matrix4.fromTranslation($),J=O.rotateAroundAxis;J(W,N,$,K,G)},O.pickOnTerrainOrEllipsoid=function(E,N){var I=E.camera.getPickRay(N),G=E.globe.pick(I,E);return G||E.camera.pickEllipsoid(N)},O.pickBottomPoint=function(E){var N=E.canvas,I=new v.Cartesian2(N.clientWidth/2,N.clientHeight);return O.pickOnTerrainOrEllipsoid(E,I)},O.pickCenterPoint=function(E){var N=E.canvas,I=new v.Cartesian2(N.clientWidth/2,N.clientHeight/2);return O.pickOnTerrainOrEllipsoid(E,I)},O.computeSignedTiltAngleOnGlobe=function(E){var N=E.camera,I=new v.Ray(N.position,N.direction),G=E.globe.pick(I,E);if(!G){var W=v.Ellipsoid.WGS84,Z=v.IntersectionTests.rayEllipsoid(I,W);Z&&(G=v.Ray.getPoint(I,Z.start))}if(G){var U=new v.Cartesian3;v.Ellipsoid.WGS84.geocentricSurfaceNormal(G,U);var H=O.signedAngleBetween,V=H(N.direction,U,N.right)-Math.PI;return v.Math.convertLongitudeRange(V)}},O.bottomFovRay=function(E){var N=E.camera,I=N.frustum.fovy/2,G=N.direction,W=v.Quaternion.fromAxisAngle(N.right,I),Z=v.Matrix3.fromQuaternion(W),U=new v.Cartesian3;return v.Matrix3.multiplyByVector(Z,G,U),new v.Ray(N.position,U)},O.signedAngleBetween=function(E,N,I){var G=new v.Cartesian3,W=new v.Cartesian3,Z=new v.Cartesian3;v.Cartesian3.normalize(E,G),v.Cartesian3.normalize(N,W),v.Cartesian3.cross(G,W,Z);var U=v.Cartesian3.dot(G,W),H=v.Cartesian3.magnitude(Z),V=v.Cartesian3.dot(I,Z),Y=Math.atan2(H,U);return V>=0?Y:-Y},O.computeAngleToZenith=function(E,N){var I=E.camera,G=I.frustum.fovy/2,W=O.bottomFovRay(E),Z=v.Cartesian3.clone(W.direction);v.Cartesian3.negate(Z,Z);var U=new v.Cartesian3;v.Ellipsoid.WGS84.geocentricSurfaceNormal(N,U);var H=new v.Cartesian3;v.Cartesian3.negate(I.right,H);var V=O.signedAngleBetween(U,Z,H);return V+G},O.extentToRectangle=function(E,N){if(E&&N){var I=(0,l.transformExtent)(E,N,"EPSG:4326");return v.Rectangle.fromDegrees(I[0],I[1],I[2],I[3])}else return null},O.sourceToImageryProvider=function(E,N,I,G){var W=this,Z=N.get("olcs_skip");if(Z)return null;var U,H=null;if(N instanceof s.default&&N.getUrl()&&N.getImageLoadFunction()===n.defaultImageLoadFunction){var V={"olcs.proxy":N.get("olcs.proxy"),"olcs.extent":N.get("olcs.extent"),"olcs.projection":N.get("olcs.projection"),"olcs.imagesource":N};N=new a.default({url:N.getUrl(),attributions:N.getAttributions(),projection:N.getProjection(),params:N.getParams()}),N.setProperties(V)}if(N instanceof c.default){var Y=g.default.getSourceProjection(N);if(!Y&&(Y=I),O.isCesiumProjection(Y))if(N.layer_)H=new h.default(E,N,I);else{var $=N.key_,K=$.match(/LAYERS-(\S*)\/VERSION-1.1.0/)[1],J=N.getUrls()[0],Q={};Q.url=J,Q.parameters={format:"image/png",transparent:"true"},Q.layers=K,H=new v.WebMapServiceImageryProvider(Q)}else return null}else if(N instanceof r.default){var et=g.default.getSourceProjection(N);if(!et&&(et=I),O.isCesiumProjection(et))H=new v.SingleTileImageryProvider({url:N.getUrl(),rectangle:new v.Rectangle.fromDegrees(N.getImageExtent()[0],N.getImageExtent()[1],N.getImageExtent()[2],N.getImageExtent()[3])});else return null}else if(N instanceof i.default){var nt=g.default.getSourceProjection(N);if(!nt&&(nt=I),Z===![]){var st,ut=nt.getCode().split(":")[1],rt=(0,D.default)(st=N.urls).call(st,function(Tt){return(0,f.default)(this,W),Tt.replace(ut,"3857")}.bind(this)),ht=G.getExtent(),Pt=O.extentToRectangle(ht,nt),wt=N.get("olcs_minimumLevel"),At=N.getAttributions(),Nt=G.getStyleFunction(),Lt;if(ht&&At){var Rt=(0,p.getCenter)(ht);Lt=B(At,0,Rt,ht)[0]}return H=new d.default({credit:Lt,rectangle:Pt,minimumLevel:wt,styleFunction:Nt,urls:rt}),H}return null}else return null;return H},O.tileLayerToImageryLayer=function(E,N,I){if(!(N instanceof o.default)&&!(N instanceof u.default)&&!(N instanceof y.default))return null;var G=N.getSource(),W=G.get("olcs_provider");if(!W&&(W=this.sourceToImageryProvider(E,G,I,N)),!W)return null;var Z={},U=N.get("olcs.extent"),H=U||N.getExtent();H&&(Z.rectangle=O.extentToRectangle(H,I));var V=new v.ImageryLayer(W,Z);return V},O.updateCesiumLayerProperties=function(E,N){var I,G=this,W=1,Z=!![];(0,b.default)(I=[E.layer]).call(I,E.parents).forEach(function(U){(0,f.default)(this,G);var H=U.getOpacity();H!==void 0&&(W*=H);var V=U.getVisible();V!==void 0&&(Z&=V)}.bind(this)),N.alpha=W,N.show=Z},O.ol4326CoordinateToCesiumCartesian=function(E){var N=E;if(E[0]>180){var I=new v.WebMercatorProjection,G=N.length>2?I.unproject({x:N[0],y:N[1],z:N[2]}):I.unproject({x:N[0],y:N[1]}),W=v.Cartographic.toCartesian(G);return W}return N.length>2?v.Cartesian3.fromDegrees(N[0],N[1],N[2]):v.Cartesian3.fromDegrees(N[0],N[1])},O.ol4326CoordinateArrayToCsCartesians=function(E){M.assert(E!==null);for(var N=O.ol4326CoordinateToCesiumCartesian,I=[],G=0;G<E.length;++G)I.push(N(E[G]));return I},O.olGeometryCloneTo4326=function(E,N){M.assert(N);var I=(0,l.get)("EPSG:4326"),G=(0,l.get)(N);if(G!==I){var W=E.getProperties();E=E.clone(),E.transform(G,I),E.setProperties(W)}return E},O.convertColorToCesium=function(E){if(E=E||"black",Array.isArray(E))return new v.Color(v.Color.byteToFloat(E[0]),v.Color.byteToFloat(E[1]),v.Color.byteToFloat(E[2]),E[3]);if(typeof E=="string")return v.Color.fromCssColorString(E);if(E instanceof CanvasPattern||E instanceof CanvasGradient){var N=document.createElement("canvas"),I=N.getContext("2d");return N.width=N.height=256,I.fillStyle=E,I.fillRect(0,0,N.width,N.height),new v.ImageMaterialProperty({image:N})}M.assert(![],"impossible")},O.convertUrlToCesium=function(E){var N="",I=/\{(\d|[a-z])-(\d|[a-z])\}/,G=I.exec(E);if(G){E=E.replace(I,"{s}");var W=G[1].charCodeAt(0),Z=G[2].charCodeAt(0),U;for(U=W;U<=Z;++U)N+=String.fromCharCode(U)}return{url:E,subdomains:N}},O.resetToNorthZenith=function(E,N){var I=this;return new C.default(function(G,W){var Z=this;(0,f.default)(this,I);var U=N.camera,H=O.pickBottomPoint(N);if(!H){W("Could not get bottom pivot");return}var V=E.getView().getRotation();if(V===void 0){W("The view is not initialized");return}var Y=O.computeAngleToZenith(N,H);O.setHeadingUsingBottomCenter(N,V,H);var $=v.Matrix4.fromTranslation(H),K=U.right,J={callback:function(){(0,f.default)(this,Z);var et=E.getView();O.normalizeView(et),G()}.bind(this)};O.rotateAroundAxis(U,-Y,K,$,J)}.bind(this))},O.rotateAroundBottomCenter=function(E,N){var I=this;return new C.default(function(G,W){(0,f.default)(this,I);var Z=E.camera,U=O.pickBottomPoint(E);if(!U){W("could not get bottom pivot");return}var H={callback:G},V=v.Matrix4.fromTranslation(U),Y=Z.right,$=O.rotateAroundAxis;$(Z,-N,Y,V,H)}.bind(this))},O.normalizeView=function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=E.getResolution();E.setRotation(N),E.constrainResolution?E.setResolution(E.constrainResolution(I)):E.setResolution(E.getConstrainedResolution(I))},O.isCesiumProjection=function(E){var N=E===(0,l.get)("EPSG:3857"),I=E===(0,l.get)("EPSG:4326"),G=E===(0,l.get)("EPSG:4490");return N||I||G};function B(E,N,I,G){var W=this,Z={viewState:{zoom:N,center:I},extent:G};if(!E)return[];var U=E(Z);return!Array.isArray(U)&&(U=[U]),(0,D.default)(U).call(U,function(H){return(0,f.default)(this,W),new v.Credit(H,!![])}.bind(this))}var k=O;z.default=k;function P(E,N,I,G){var W=I.canvas,Z=I.camera,U=Z.frustum.fovy;M.assert(!isNaN(U));var H=G.getMetersPerUnit(),V=E*W.clientHeight,Y=Math.cos(Math.abs(N)),$=V*H*Y,K=$/2/Math.tan(U/2);return K}function L(E,N,I,G){var W=I.canvas,Z=I.camera,U=Z.frustum.fovy;M.assert(!isNaN(U));var H=G.getMetersPerUnit(),V=2*E*Math.tan(U/2),Y=Math.cos(Math.abs(N)),$=V/H/Y,K=$/W.clientHeight;return K}},38938:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=A(e(99245)),D=A(e(42579)),b=A(e(22777)),C=A(e(42762)),f=r(e(87647)),v=e(72233),m=A(e(66342)),o=e(74183),u=e(5015);function l(a){if(typeof F!="function")return null;var i=new F,n=new F;return(l=function(g){return g?n:i})(a)}function r(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||M(a)!=="object"&&typeof a!="function")return{default:a};var n=l(i);if(n&&n.has(a))return n.get(a);var h={},g=Object.defineProperty&&R;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?R(a,d):null;y&&(y.get||y.set)?Object.defineProperty(h,d,y):h[d]=a[d]}return h.default=a,n&&n.set(a,h),h}var s=function(){var a=new o.Tile({projection:"EPSG:3857",wrapX:!![]}),i=a.getTileCoordForTileUrlFunction([6,-31,22]);return i&&i[1]===33&&i[2]===22}(),c=function(){function a(i,n,h){var g=this;(0,b.default)(this,a),this.source_=n,this.projection_=null,this.fallbackProj_=h||null,this.ready_=![],this.tilingScheme_=null,this.rectangle_=null,this.map_=i,this.shouldRequestNextLevel=![];var d=this.source_.get("olcs.proxy");d&&(typeof d=="function"?this.proxy_={getURL:d}:typeof d=="string"&&(this.proxy_=new f.DefaultProxy(d))),this.errorEvent_=new f.Event,this.emptyCanvas_=document.createElement("canvas"),this.emptyCanvas_.width=1,this.emptyCanvas_.height=1,this.source_.on("change",function(y){(0,D.default)(this,g),this.handleSourceChanged_()}.bind(this)),this.handleSourceChanged_()}return(0,C.default)(a,[{key:"handleSourceChanged_",value:function(n){var h=this;if(!this.ready_&&this.source_.getState()=="ready"){this.projection_=m.default.getSourceProjection(this.source_)||this.fallbackProj_;var g={numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1};if(this.source_.tileGrid!==null&&this.source_.tileGrid.forEachTileCoord(this.projection_.getExtent(),0,function(d){(0,D.default)(this,h);var y=(0,T.default)(d,3),p=y[0],w=y[1],S=y[2];g.numberOfLevelZeroTilesX=w+1,g.numberOfLevelZeroTilesY=S+1}.bind(this)),this.projection_==(0,v.get)("EPSG:4326"))this.shouldRequestNextLevel=g.numberOfLevelZeroTilesX===1&&g.numberOfLevelZeroTilesY===1,this.tilingScheme_=new f.GeographicTilingScheme(g);else if(this.projection_==(0,v.get)("EPSG:3857"))this.shouldRequestNextLevel=![],this.tilingScheme_=new f.WebMercatorTilingScheme(g);else return;this.rectangle_=this.tilingScheme_.rectangle,this.ready_=!![]}}},{key:"getTileCredits",value:function(n,h,g){var d=this.source_.getAttributions();if(!d)return[];var y=this.map_.getView().calculateExtent(this.map_.getSize()),p=this.map_.getView().getCenter(),w=this.shouldRequestNextLevel?g+1:g;return(0,u.attributionsFunctionToCredits)(d,w,p,y)}},{key:"requestImage",value:function(n,h,g){var d=this.source_.getTileUrlFunction();if(d&&this.projection_){var y=this.shouldRequestNextLevel?g+1:g,p=h;!s&&(p=-h-1);var w=d.call(this.source_,[y,n,p],1,this.projection_);return this.proxy_&&(w=this.proxy_.getURL(w)),w?f.ImageryProvider.loadImage(this,w):this.emptyCanvas_}else return this.emptyCanvas_}}]),a}();Object.defineProperties(c.prototype,{ready:{get:function(){return this.ready_}},rectangle:{get:function(){return this.rectangle_}},tileWidth:{get:function(){var i=this.source_.getTileGrid();return i?Array.isArray(i.getTileSize(0))?i.getTileSize(0)[0]:i.getTileSize(0):256}},tileHeight:{get:function(){var i=this.source_.getTileGrid();return i?Array.isArray(i.getTileSize(0))?i.getTileSize(0)[1]:i.getTileSize(0):256}},maximumLevel:{get:function(){var i=this.source_.getTileGrid();return i?i.getMaxZoom():18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this.tilingScheme_}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this.errorEvent_}},proxy:{get:function(){return this.proxy_}},hasAlphaChannel:{get:function(){return!![]}},pickFeatures:{get:function(){}}});var x=c;z.default=x},11678:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0;var T=A(e(22777)),D=A(e(42762)),b=v(e(87647)),C=e(7165);function f(u){if(typeof F!="function")return null;var l=new F,r=new F;return(f=function(c){return c?r:l})(u)}function v(u,l){if(!l&&u&&u.__esModule)return u;if(u===null||M(u)!=="object"&&typeof u!="function")return{default:u};var r=f(l);if(r&&r.has(u))return r.get(u);var s={},c=Object.defineProperty&&R;for(var x in u)if(x!=="default"&&Object.prototype.hasOwnProperty.call(u,x)){var a=c?R(u,x):null;a&&(a.get||a.set)?Object.defineProperty(s,x,a):s[x]=u[x]}return s.default=u,r&&r.set(u,s),s}var m=function(){function u(l,r){(0,T.default)(this,u);var s=new b.BillboardCollection({scene:r}),c=new b.PrimitiveCollection;this.olListenKeys=[],this.rootCollection_=new b.PrimitiveCollection,this.context={projection:l,billboards:s,featureToCesiumMap:{},primitives:c},this.rootCollection_.add(s),this.rootCollection_.add(c)}return(0,D.default)(u,[{key:"destroy",value:function(){this.olListenKeys.forEach(C.unByKey),this.olListenKeys.length=0}},{key:"getRootPrimitive",value:function(){return this.rootCollection_}}]),u}(),o=m;z.default=o},23030:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.toDegrees=e,z.toRadians=M;function e(F){return F*180/Math.PI}function M(F){return F*Math.PI/180}},66342:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.default=void 0,z.getUid=u,z.isGroundPolylinePrimitiveSupported=c,z.olcsListen=m,z.removeChildren=s,z.removeNode=r,z.stableSort=l;var T=A(e(42579)),D=A(e(28954)),b=f(e(87647));function C(a){if(typeof F!="function")return null;var i=new F,n=new F;return(C=function(g){return g?n:i})(a)}function f(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||M(a)!=="object"&&typeof a!="function")return{default:a};var n=C(i);if(n&&n.has(a))return n.get(a);var h={},g=Object.defineProperty&&R;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?R(a,d):null;y&&(y.get||y.set)?Object.defineProperty(h,d,y):h[d]=a[d]}return h.default=a,n&&n.set(a,h),h}var v={};v.obj=function(a){return a},v.supportsImageRenderingPixelatedResult_=void 0,v.imageRenderingValueResult_=void 0,v.supportsImageRenderingPixelated=function(){if(v.supportsImageRenderingPixelatedResult_===void 0){var a=document.createElement("canvas");a.setAttribute("style","image-rendering: -moz-crisp-edges; image-rendering: pixelated;");var i=a.style.imageRendering;v.supportsImageRenderingPixelatedResult_=!!i,v.supportsImageRenderingPixelatedResult_&&(v.imageRenderingValueResult_=i)}return v.supportsImageRenderingPixelatedResult_},v.imageRenderingValue=function(){return v.supportsImageRenderingPixelated(),v.imageRenderingValueResult_||""},v.getSourceProjection=function(a){return a.get("olcs.projection")||a.getProjection()};function m(a,i,n){return a.on(i,n)}var o=0;function u(a){return a.olcs_uid||(a.olcs_uid=++o)}function l(a,i){for(var n=this,h=a.length,g=Array(a.length),d=0;d<h;d++)g[d]={index:d,value:a[d]};(0,D.default)(g).call(g,function(p,w){return(0,T.default)(this,n),i(p.value,w.value)||p.index-w.index}.bind(this));for(var y=0;y<a.length;y++)a[y]=g[y].value}function r(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function s(a){for(;a.lastChild;)a.removeChild(a.lastChild)}function c(a){var i=b.GroundPolylinePrimitive;return i&&i.isSupported(a)}var x=v;z.default=x},96789:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.DivPoint=void 0;var T=A(e(22777)),D=A(e(42762)),b=o(e(87647)),C=A(e(63379)),f=e(92672),v=e(36161);function m(l){if(typeof F!="function")return null;var r=new F,s=new F;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||M(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&R;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?R(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var u=function(){function l(r,s){(0,T.default)(this,l),this.viewer=r,this.position=null,this.position_original=s.position,this.anchor=s.anchor,this.offset=s.offset,(s.visibleDistanceMin||s.visibleDistanceMax)&&(s.distanceDisplayCondition=new b.DistanceDisplayCondition(s.visibleDistanceMin||0,s.visibleDistanceMax||1e5)),this._distanceDisplayCondition=s.distanceDisplayCondition,this._heightReference=b.defaultValue(s.heightReference,b.HeightReference.NONE),this.opts=s,this._visible=!![],this._depthTest=!![],this.$view=(0,C.default)("<div></div>"),this.$view.append(s.html),this.$view.css({position:"absolute",left:"0",top:"0"}),this.$view.attr("id",s.id||"customDom"),this.$view.appendTo("#"+r._container.id);var c=this;(s.click||s.popup)&&this.$view.click(function(x){s.popup&&r.shine.popup.show(s,c.position),s.click&&s.click(s,c,x)}),s.tooltip&&this.$view.hover(function(){r.shine.tooltip.show(s,c.position)},function(){r.shine.tooltip.close()}),this.$view.on("mousewheel",function(){}),r.scene.postRender.addEventListener(this.updateViewPoint,this)}return(0,D.default)(l,[{key:"dom",get:function(){return this.$view}},{key:"visible",get:function(){return this._visible},set:function(s){this._visible=s,s?this.$view.show():this.$view.hide()}},{key:"depthTest",get:function(){return this._depthTest},set:function(s){this._depthTest=s}},{key:"getPositionValue",value:function(s){if(!s)return s;var c;return s instanceof b.Cartesian3?c=s:typeof s.getValue=="function"?c=s.getValue(this.viewer.clock.currentTime):s._value&&s._value instanceof b.Cartesian3&&(c=s._value),c}},{key:"updateViewPoint",value:function(){if(this._visible){if(!this.position_original){this.$view.hide();return}this._heightReference===b.HeightReference.CLAMP_TO_GROUND?this.position=(0,f.updateHeightForClampToGround)(this.viewer,this.position_original):this._heightReference===b.HeightReference.RELATIVE_TO_GROUND?this.position=(0,f.updateHeightForClampToGround)(this.viewer,this.position_original,!![]):this.position=this.getPositionValue(this.position_original);var s=this.viewer.scene,c=b.SceneTransforms.wgs84ToWindowCoordinates(s,this.position),x;if(s.mode===b.SceneMode.SCENE3D?x=b.Cartesian3.distance(this.position,this.viewer.camera.position):x=this.viewer.camera.positionCartographic.height,c==null||this._distanceDisplayCondition&&(this._distanceDisplayCondition.near>x||this._distanceDisplayCondition.far<x)){this.$view.is(":visible")&&this.$view.hide();return}if(this._depthTest&&s.mode===b.SceneMode.SCENE3D){var a=s.camera.getPickRay(c),i=s.globe.pick(a,s);if(i){var n=b.Cartesian3.distance(this.position,i);if(n>1e3*1e3){this.$view.is(":visible")&&this.$view.hide();return}}}var h=this.$view.height(),g=this.$view.width(),d=c.x,y=c.y-h;this.anchor?(this.anchor[0]=="center"?d-=g/2:d+=this.anchor[0],y+=this.anchor[1]):d-=g/2,this.offset&&(d+=this.offset[0],y+=this.offset[1]),!this.$view.is(":visible")&&this.$view.show();var p=1;if(this.opts.scaleByDistance){var w=this.opts.scaleByDistance;x<=w.near?p=w.nearValue:x>w.near&&x<w.far?p=w.nearValue+(w.farValue-w.nearValue)*(x-w.near)/(w.far-w.near):p=w.farValue}var S="matrix("+p+",0,0,"+p+","+d+","+y+")",O="left bottom 0";this.$view.css({transform:S,"transform-origin":O,"-ms-transform":S,"-ms-transform-origin":O,"-webkit-transform":S,"-webkit-transform-origin":O,"-moz-transform":S,"-moz-transform-origin":O,"-o-transform":S,"-o-transform-origin":O}),this.opts.postRender&&this.opts.postRender({x:d,y,height:h,width:g,distance:x})}}},{key:"setVisible",value:function(s){this._visible=s,s?this.$view.show():this.$view.hide()}},{key:"setPosition",value:function(s){this.position_original=s,this.updateViewPoint()}},{key:"setLonlat",value:function(s){this.position_original=s&&(0,v.lonlat2cartesian)(s),this.updateViewPoint()}},{key:"destroy",value:function(){this.viewer.scene.postRender.removeEventListener(this.updateViewPoint,this),this.$view.remove(),this.$view=null,this.position=null,this.anchor=null,this.viewer=null}}]),l}();z.DivPoint=u},6386:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Events=z.Evented=void 0;var T=A(e(20314)),D=A(e(69033)),b=A(e(29870)),C=e(79651),f=m(e(36161));function v(l){if(typeof F!="function")return null;var r=new F,s=new F;return(v=function(x){return x?s:r})(l)}function m(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||M(l)!=="object"&&typeof l!="function")return{default:l};var s=v(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&R;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?R(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var o={on:function(r,s,c){if((typeof r>"u"?"undefined":(0,b.default)(r))==="object")for(var x in r)r.hasOwnProperty(x)&&this._on(x,r[x],s);else{r=f.splitWords(r);for(var a=0,i=r.length;a<i;a++)this._on(r[a],s,c)}return this},off:function(r,s,c){if(!r)delete this._events;else if((typeof r>"u"?"undefined":(0,b.default)(r))==="object")for(var x in r)r.hasOwnProperty(x)&&this._off(x,r[x],s);else{r=f.splitWords(r);for(var a=0,i=r.length;a<i;a++)this._off(r[a],s,c)}return this},un:function(r,s,c){if(!r)delete this._events;else if((typeof r>"u"?"undefined":(0,b.default)(r))==="object")for(var x in r)r.hasOwnProperty(x)&&this._off(x,r[x],s);else{r=f.splitWords(r);for(var a=0,i=r.length;a<i;a++)this._off(r[a],s,c)}return this},_on:function(r,s,c){this._events=this._events||{};var x=this._events[r];!x&&(x=[],this._events[r]=x),c===this&&(c=void 0);for(var a={fn:s,ctx:c},i=x,n=0,h=i.length;n<h;n++)if(i[n].fn===s&&i[n].ctx===c)return;i.push(a)},_off:function(r,s,c){var x,a,i;if(this._events&&(x=this._events[r],!!x)){if(!s){for(a=0,i=x.length;a<i;a++)x[a].fn=f.falseFn;delete this._events[r];return}if(c===this&&(c=void 0),x)for(a=0,i=x.length;a<i;a++){var n=x[a];if(n.ctx===c&&n.fn===s){n.fn=f.falseFn,this._firingCount&&(this._events[r]=x=(0,T.default)(x).call(x)),(0,D.default)(x).call(x,a,1);return}}}},fire:function(r,s,c){if(!this.listens(r,c))return this;var x=f.extend({},s,{type:r,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var a=this._events[r];if(a){this._firingCount=this._firingCount+1||1;for(var i=0,n=a.length;i<n;i++){var h=a[i];h.fn.call(h.ctx||this,x)}this._firingCount--}}return c&&this._propagateEvent(x),this},listens:function(r,s){var c=this._events&&this._events[r];if(c&&c.length)return!![];if(s){for(var x in this._eventParents)if(this._eventParents.hasOwnProperty(x)&&this._eventParents[x].listens(r,s))return!![]}return![]},once:function(r,s,c){if((typeof r>"u"?"undefined":(0,b.default)(r))==="object"){for(var x in r)r.hasOwnProperty(x)&&this.once(x,r[x],s);return this}var a=f.bind(function(){this.off(r,s,c).off(r,a,c)},this);return this.on(r,s,c).on(r,a,c)},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[f.stamp(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[f.stamp(r)],this},_propagateEvent:function(r){for(var s in this._eventParents)this._eventParents.hasOwnProperty(s)&&this._eventParents[s].fire(r.type,f.extend({layer:r.target,propagatedFrom:r.target},r),!![])}};z.Events=o,o.addEventListener=o.on,o.removeEventListener=o.clearAllEventListeners=o.off,o.addOneTimeEventListener=o.once,o.fireEvent=o.fire,o.hasEventListeners=o.listens;var u=C.Class.extend(o);z.Evented=u},42795:function(X,z){"use strict";Object.defineProperty(z,"__esModule",{value:!![]}),z.EditStop=z.EditStart=z.EditRemovePoint=z.EditMovePoint=z.DrawStart=z.DrawRemovePoint=z.DrawMouseMove=z.DrawCreated=z.DrawAddPoint=void 0;var e="draw-start";z.DrawStart=e;var M="draw-add-point";z.DrawAddPoint=M;var F="draw-remove-lastpoint";z.DrawRemovePoint=F;var R="draw-mouse-move";z.DrawMouseMove=R;var A="draw-created";z.DrawCreated=A;var T="edit-start";z.EditStart=T;var D="edit-move-point";z.EditMovePoint=D;var b="edit-remove-point";z.EditRemovePoint=b;var C="edit-stop";z.EditStop=C},42038:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.handle=f,z.initQuery=v,z.quitQuery=C;var A=D(e(87647));function T(m){if(typeof F!="function")return null;var o=new F,u=new F;return(T=function(r){return r?u:o})(m)}function D(m,o){if(!o&&m&&m.__esModule)return m;if(m===null||M(m)!=="object"&&typeof m!="function")return{default:m};var u=T(o);if(u&&u.has(m))return u.get(m);var l={},r=Object.defineProperty&&R;for(var s in m)if(s!=="default"&&Object.prototype.hasOwnProperty.call(m,s)){var c=r?R(m,s):null;c&&(c.get||c.set)?Object.defineProperty(l,s,c):l[s]=m[s]}return l.default=m,u&&u.set(m,l),l}var b;function C(){}function f(){}function v(m){b=m;var o=new A.ScreenSpaceEventHandler(b.scene.canvas);o.setInputAction(function(u){var l=b.scene.pick(u.position);l&&l.content},A.defaultValue(this.popupEventType,A.ScreenSpaceEventType.MIDDLE_CLICK))}},70489:function(X,z,e){"use strict";e(23497),e(23497);var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.speedRatio=z.rotateStep=z.minPitch=z.maxPitch=z.dirStep=z.KeyboardRoam=void 0;var T=A(e(67146)),D=A(e(22777)),b=A(e(42762)),C=m(e(87647)),f=m(e(92672));function v(a){if(typeof F!="function")return null;var i=new F,n=new F;return(v=function(g){return g?n:i})(a)}function m(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||M(a)!=="object"&&typeof a!="function")return{default:a};var n=v(i);if(n&&n.has(a))return n.get(a);var h={},g=Object.defineProperty&&R;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?R(a,d):null;y&&(y.get||y.set)?Object.defineProperty(h,d,y):h[d]=a[d]}return h.default=a,n&&n.set(a,h),h}var o=150;z.speedRatio=o;var u=25;z.dirStep=u;var l=1;z.rotateStep=l;var r=.1;z.minPitch=r;var s=.95;z.maxPitch=s;var c={ENLARGE:0,NARROW:1,LEFT_ROTATE:2,RIGHT_ROTATE:3,TOP_ROTATE:4,BOTTOM_ROTATE:5},x=function(){function a(i){(0,D.default)(this,a),this.viewer=i,this.flags={moveForward:![],moveBackward:![],moveUp:![],moveDown:![],moveLeft:![],moveRight:![]},this.defaultKeyCode={moveForward:"W".charCodeAt(0),moveBackward:"S".charCodeAt(0),moveRight:"D".charCodeAt(0),moveLeft:"A".charCodeAt(0),moveUp:"Q".charCodeAt(0),moveDown:"E".charCodeAt(0),ENLARGE:"I".charCodeAt(0),NARROW:"K".charCodeAt(0),LEFT_ROTATE:"J".charCodeAt(0),RIGHT_ROTATE:"L".charCodeAt(0),TOP_ROTATE:"U".charCodeAt(0),BOTTOM_ROTATE:"O".charCodeAt(0)};var n=i.scene.canvas;n.setAttribute("tabindex","0"),n.onclick=function(){n.focus()};var h=this;document.addEventListener("keydown",function(g){if(h._enable){var d=document.activeElement.nodeName;if(!(d==="INPUT"||d==="TEXTAREA")){var y=h.getFlagForKeyCode(g.keyCode);typeof y<"u"&&((0,T.default)(h)[y]=!![])}}},![]),document.addEventListener("keyup",function(g){if(h._enable){var d=h.getFlagForKeyCode(g.keyCode);typeof d<"u"&&((0,T.default)(h)[d]=![])}},![]),this.handler=new C.ScreenSpaceEventHandler(i.scene.canvas)}return(0,b.default)(a,[{key:"bind",value:function(n){this._enable||(this._enable=!![],C.defined(n)&&(this.defaultKeyCode=n.KeyCode),this.viewer.clock.onTick.removeEventListener(this.cameraFunc,this),this.viewer.clock.onTick.addEventListener(this.cameraFunc,this))}},{key:"unbind",value:function(){this._enable&&(this._enable=![],this.viewer.clock.onTick.removeEventListener(this.cameraFunc,this))}},{key:"destroy",value:function(){this.unbind(),this.handler.destroy()}},{key:"getFlagForKeyCode",value:function(n){switch(n){case this.defaultKeyCode.moveForward:return"moveForward";case this.defaultKeyCode.moveBackward:return"moveBackward";case this.defaultKeyCode.moveRight:return"moveRight";case this.defaultKeyCode.moveLeft:return"moveLeft";case this.defaultKeyCode.moveUp:return"moveUp";case this.defaultKeyCode.moveDown:return"moveDown";case 38:this.rotateCamera(c.TOP_ROTATE);break;case 37:this.rotateCamera(c.LEFT_ROTATE);break;case 39:this.rotateCamera(c.RIGHT_ROTATE);break;case 40:this.rotateCamera(c.BOTTOM_ROTATE);break;case this.defaultKeyCode.ENLARGE:case 104:this.moveCamera(c.ENLARGE);break;case this.defaultKeyCode.NARROW:case 101:this.moveCamera(c.NARROW);break;case this.defaultKeyCode.LEFT_ROTATE:case 100:this.moveCamera(c.LEFT_ROTATE);break;case this.defaultKeyCode.RIGHT_ROTATE:case 102:this.moveCamera(c.RIGHT_ROTATE);break;case this.defaultKeyCode.TOP_ROTATE:case 103:this.moveCamera(c.TOP_ROTATE);break;case this.defaultKeyCode.BOTTOM_ROTATE:case 105:this.moveCamera(c.BOTTOM_ROTATE);break;default:break}}},{key:"moveForward",value:function(n){var h=this.viewer.camera,g=h.direction,d=C.Cartesian3.normalize(h.position,new C.Cartesian3),y=C.Cartesian3.cross(g,d,new C.Cartesian3);g=C.Cartesian3.cross(d,y,new C.Cartesian3),g=C.Cartesian3.normalize(g,g),g=C.Cartesian3.multiplyByScalar(g,n,g),h.position=C.Cartesian3.add(h.position,g,h.position)}},{key:"cameraFunc",value:function(){var n=this.viewer.camera,h=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(n.position).height,g=h/o;(0,T.default)(this).moveForward&&this.moveForward(g),(0,T.default)(this).moveBackward&&this.moveForward(-g),(0,T.default)(this).moveUp&&n.moveUp(g),(0,T.default)(this).moveDown&&n.moveDown(g),(0,T.default)(this).moveLeft&&n.moveLeft(g),(0,T.default)(this).moveRight&&n.moveRight(g)}},{key:"resetCameraPos",value:function(n){n&&(this.viewer.scene.camera.position=n.position,this.viewer.scene.camera.direction=n.direction,this.viewer.scene.camera.right=n.right,this.viewer.scene.camera.up=n.up)}},{key:"limitAngle",value:function(n,h,g){var d=C.Cartesian3.dot(n,C.Cartesian3.normalize(h,new C.Cartesian3));return g==="up"&&d<r?![]:!(g==="down"&&d>s)}},{key:"computedNewPos",value:function(n,h,g){var d=n.position,y=(0,f.getCenter)(this.viewer);if(y){var p=C.Cartesian3.fromDegrees(y.x,y.y,y.z);if(p){var w=C.Cartesian3.distance(p,d),S=w/100;S=g?S*l:S;var O={},B=new C.Ray(d,h);if(O.position=C.Ray.getPoint(B,S),O.direction=n.direction,O.right=n.right,O.up=n.up,g){var k=C.Cartesian3.normalize(C.Cartesian3.subtract(O.position,p,new C.Cartesian3),new C.Cartesian3);B=new C.Ray(p,k),O.position=C.Ray.getPoint(B,w),O.direction=C.Cartesian3.negate(k,new C.Cartesian3),O.up=C.Cartesian3.normalize(O.position,new C.Cartesian3),O.right=C.Cartesian3.cross(O.direction,O.up,new C.Cartesian3)}return O}}}},{key:"moveCamera",value:function(n){var h=this.viewer.scene.camera,g;switch(n){case c.ENLARGE:g=this.computedNewPos(h,h.direction);break;case c.NARROW:g=this.computedNewPos(h,C.Cartesian3.negate(h.direction,new C.Cartesian3));break;case c.LEFT_ROTATE:g=this.computedNewPos(h,C.Cartesian3.negate(h.right,new C.Cartesian3),!![]);break;case c.RIGHT_ROTATE:g=this.computedNewPos(h,h.right,!![]);break;case c.TOP_ROTATE:{var d=this.limitAngle(C.clone(h.up),C.clone(h.position),"up");if(!d)return;g=this.computedNewPos(h,C.clone(h.up),!![]);break}case c.BOTTOM_ROTATE:{var y=this.limitAngle(C.clone(h.up),C.clone(h.position),"down");if(!y)return;g=this.computedNewPos(h,C.Cartesian3.negate(h.up,new C.Cartesian3),!![]);break}}g&&this.resetCameraPos(g)}},{key:"rotateCamera",value:function(n){var h=[0,0],g=this.viewer.scene.canvas.clientWidth,d=this.viewer.scene.canvas.clientHeight,y=(g+d)/u;switch(n){case c.LEFT_ROTATE:h=[-y*g/d,0];break;case c.RIGHT_ROTATE:h=[y*g/d,0];break;case c.TOP_ROTATE:h=[0,y];break;case c.BOTTOM_ROTATE:h=[0,-y];break;default:return}var p=h[0]/g,w=h[1]/d,S=.05,O=this.viewer.camera;O.lookRight(p*S),O.lookUp(w*S);var B=O.direction,k=C.Cartesian3.normalize(O.position,new C.Cartesian3),P=C.Cartesian3.cross(B,k,new C.Cartesian3);k=C.Cartesian3.cross(P,B,new C.Cartesian3),O.up=k,O.right=P}},{key:"enable",get:function(){return this._enable},set:function(n){n?this.unbind():this.bind()}}]),a}();z.KeyboardRoam=x},95512:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Location=void 0;var T=A(e(22777)),D=A(e(42762)),b=o(e(87647)),C=A(e(63379)),f=o(e(92672)),v=o(e(80823));function m(l){if(typeof F!="function")return null;var r=new F,s=new F;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||M(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&R;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?R(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}var u=function(){function l(r,s){(0,T.default)(this,l),this.viewer=r,this.options=s,this.containerid=r._container.id+"_location_shine_jwd",this.locationFormat=s.format||"<div>\u89C6\u9AD8\uFF1A{height}\u7C73</div><div>\u4FEF\u4EF0\u89D2\uFF1A{pitch}\u5EA6</div><div>\u65B9\u5411\uFF1A{heading}\u5EA6</div><div>\u6D77\u62D4\uFF1A{z}\u7C73</div><div>\u7EAC\u5EA6:{y}</div><div>\u7ECF\u5EA6:{x}</div>",this.inhtml='<div id="'+this.containerid+'"  class="location-bar animation-slide-bottom no-print" ></div>',(0,C.default)("#"+r._container.id).prepend(this.inhtml),s.style?(0,C.default)("#"+this.containerid).css(s.style):(0,C.default)("#"+this.containerid).css({left:r.animation?"170px":"0",right:"0",bottom:r.timeline?"25px":"0"}),this.locationData={},this.locationData.height=f.formatNum(r.camera.positionCartographic.height,1),this.locationData.heading=f.formatNum(b.Math.toDegrees(r.camera.heading),0),this.locationData.pitch=f.formatNum(b.Math.toDegrees(r.camera.pitch),0),this.locationData.screenjd=f.formatNum(b.Math.toDegrees(this.viewer.camera.positionCartographic.longitude),4),this.locationData.screenwd=f.formatNum(b.Math.toDegrees(this.viewer.camera.positionCartographic.latitude),4),r.scene.camera.changed.addEventListener(this.updaeCamera,this)}return(0,D.default)(l,[{key:"updateData",value:function(s){var c=f.getCurrentMousePosition(this.viewer.scene,s.endPosition);if(c){var x=b.Cartographic.fromCartesian(c);this.locationData.z=f.formatNum(x.height/this.viewer.scene.terrainExaggeration,1);var a=b.Math.toDegrees(x.longitude),i=b.Math.toDegrees(x.latitude);switch(this.options.crs){default:{var n=this.options.hasOwnProperty("toFixed")?this.options.toFixed:6;this.locationData.x=f.formatNum(a,n),this.locationData.y=f.formatNum(i,n);break}case"degree":this.locationData.x=v.formatDegree(a),this.locationData.y=v.formatDegree(i);break;case"project":{var h=this.options.hasOwnProperty("toFixed")?this.options.toFixed:0;this.locationData.x=f.formatNum(c.x,h),this.locationData.y=f.formatNum(c.y,h);break}case"wgs":{var g=this.options.hasOwnProperty("toFixed")?this.options.toFixed:6,d=this.viewer.shine.point2wgs({x:a,y:i});this.locationData.x=f.formatNum(d.x,g),this.locationData.y=f.formatNum(d.y,g);break}case"wgs-degree":{var y=this.viewer.shine.point2wgs({x:a,y:i});this.locationData.x=v.formatDegree(y.x),this.locationData.y=v.formatDegree(y.y);break}}var p;typeof this.locationFormat=="function"?p=this.locationFormat(this.locationData):p=v.template(this.locationFormat,this.locationData),(0,C.default)("#"+this.containerid).html(p)}}},{key:"updaeCamera",value:function(){this.locationData.height=f.formatNum(this.viewer.camera.positionCartographic.height,1),this.locationData.heading=f.formatNum(b.Math.toDegrees(this.viewer.camera.heading),0),this.locationData.pitch=f.formatNum(b.Math.toDegrees(this.viewer.camera.pitch),0),this.locationData.screenjd=f.formatNum(b.Math.toDegrees(this.viewer.camera.positionCartographic.longitude),4),this.locationData.screenwd=f.formatNum(b.Math.toDegrees(this.viewer.camera.positionCartographic.latitude),4),this.viewer.shine.popup;var s;typeof this.locationFormat=="function"?s=this.locationFormat(this.locationData):s=v.template(this.locationFormat,this.locationData),(0,C.default)("#"+this.containerid).html(s)}},{key:"destroy",value:function(){this.viewer.scene.camera.changed.removeEventListener(this.updaeCamera,this),this.handler&&(this.handler.destroy(),delete this.handler),(0,C.default)("#"+this.containerid).remove()}}]),l}();z.Location=u},71746:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393);Object.defineProperty(z,"__esModule",{value:!![]}),z.computedOffsetData=x,z.getHeadingPitchRollByMatrix=v,z.getHeadingPitchRollByMatrixOld=m,z.getHeadingPitchRollByOrientation=f,z.getHeadingPitchRollForLine=l,z.getOffsetLine=c,z.getPositionTranslation=s,z.getRotateCenterPoint=r;var A=D(e(87647));function T(a){if(typeof F!="function")return null;var i=new F,n=new F;return(T=function(g){return g?n:i})(a)}function D(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||M(a)!=="object"&&typeof a!="function")return{default:a};var n=T(i);if(n&&n.has(a))return n.get(a);var h={},g=Object.defineProperty&&R;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var y=g?R(a,d):null;y&&(y.get||y.set)?Object.defineProperty(h,d,y):h[d]=a[d]}return h.default=a,n&&n.set(a,h),h}var b=new A.Matrix3,C=new A.Matrix4;function f(a,i,n,h){if(!A.defined(i)||!A.defined(a))return new A.HeadingPitchRoll;var g=A.Matrix4.fromRotationTranslation(A.Matrix3.fromQuaternion(i,b),a,C);return v(g,n,h)}function v(a,i,n,h){return A.Transforms.fixedFrameToHeadingPitchRoll(a,i,n,h)}function m(a,i,n,h){h=h||A.Transforms.eastNorthUpToFixedFrame;var g=h(a,n,new A.Matrix4),d=A.Matrix4.multiply(A.Matrix4.inverse(g,new A.Matrix4),i,new A.Matrix4),y=A.Matrix4.getMatrix3(d,new A.Matrix3),p=A.Quaternion.fromRotationMatrix(y);return A.HeadingPitchRoll.fromQuaternion(p)}var o=new A.Cartesian3;C=new A.Matrix4;var u=new A.Matrix3;function l(a,i,n,h){n=n||A.Ellipsoid.WGS84;var g=A.Cartesian3.normalize(A.Cartesian3.subtract(i,a,o),o);A.Transforms.rotationMatrixFromPositionVelocity(a,g,n,u);var d=A.Matrix4.fromRotationTranslation(u,a,C);return A.Matrix4.multiplyTransformation(d,A.Axis.Z_UP_TO_X_UP,d),v(d,n,h)}function r(a,i,n){var h=A.Cartographic.fromCartesian(a);h.height=-1e5;var g=A.Cartographic.toCartesian(h),d=A.Cartesian3.normalize(A.Cartesian3.subtract(g,a,new A.Cartesian3),new A.Cartesian3),y=A.Quaternion.fromAxisAngle(d,A.Math.toRadians(n)),p=A.Matrix3.fromQuaternion(y),w=A.Matrix4.fromRotationTranslation(p),S=A.Cartesian3.subtract(i,a,new A.Cartesian3),O=A.Matrix4.multiplyByPoint(w,S,new A.Cartesian3);return A.Cartesian3.add(O,a,new A.Cartesian3)}function s(a,i,n,h,g){n=n||0,h=h||"z",g=g||A.Transforms.eastNorthUpToFixedFrame;var d=A.Math.toRadians(-n);h="UNIT_"+h.toUpperCase();var y=A.Quaternion.fromAxisAngle(A.Cartesian3[h],d),p=A.Matrix3.fromQuaternion(y),w=new A.Cartesian3(i.x,i.y,i.z),S=A.Matrix4.fromRotationTranslation(p,A.Cartesian3.ZERO);A.Matrix4.multiplyByTranslation(S,w,S);var O=A.Ellipsoid.WGS84.cartographicToCartesian(A.Cartographic.fromCartesian(a)),B=g(O);A.Matrix4.multiplyTransformation(B,S,S);var k=new A.Cartesian3;return A.Matrix4.getTranslation(S,k),k}function c(a,i){for(var n=[],h=1;h<a.length;h++){var g=a[h-1],d=a[h],y=A.Cartesian3.subtract(g,d,new A.Cartesian3),p=A.Cartesian3.cross(g,y,new A.Cartesian3),w=x(g,p,i*1e3),S=x(d,p,i*1e3);h===1&&n.push(w),n.push(S)}return n}function x(a,i,n){var h=new A.Ray(a,i);return A.Ray.getPoint(h,n,new A.Cartesian3)}},74913:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.MouseZoomStyle=void 0;var T=f(e(87647)),D=A(e(63379)),b=e(92672);function C(u){if(typeof F!="function")return null;var l=new F,r=new F;return(C=function(c){return c?r:l})(u)}function f(u,l){if(!l&&u&&u.__esModule)return u;if(u===null||M(u)!=="object"&&typeof u!="function")return{default:u};var r=C(l);if(r&&r.has(u))return r.get(u);var s={},c=Object.defineProperty&&R;for(var x in u)if(x!=="default"&&Object.prototype.hasOwnProperty.call(u,x)){var a=c?R(u,x):null;a&&(a.get||a.set)?Object.defineProperty(s,x,a):s[x]=u[x]}return s.default=u,r&&r.set(u,s),s}var v=function(){function u(l,r){for(var s=0;s<r.length;s++){var c=r[s];c.enumerable=c.enumerable||![],c.configurable=!![],"value"in c&&(c.writable=!![]),Object.defineProperty(l,c.key,c)}}return function(l,r,s){return r&&u(l.prototype,r),s&&u(l,s),l}}();function m(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function(){function u(l,r){m(this,u),this.viewer=l,this.options=r;var s=l._container.id+"-mousezoom";this.containerid=s,(0,D.default)("#"+l._container.id).append('<div id="'+this.containerid+'" class="cesium-mousezoom"><div class="zoomimg"/></div>');var c=-1,x=new T.ScreenSpaceEventHandler(this.viewer.scene.canvas);x.setInputAction(function(){(0,D.default)("#"+s).addClass("cesium-mousezoom-visible"),clearTimeout(c),c=setTimeout(function(){(0,D.default)("#"+s).removeClass("cesium-mousezoom-visible")},200)},T.ScreenSpaceEventType.WHEEL),x.setInputAction(function(a){var i=(0,b.getCurrentMousePosition)(l.scene,a.position);i&&(l.camera.positionCartographic.height>l.scene.screenSpaceCameraController.minimumCollisionTerrainHeight||(x.removeInputAction(T.ScreenSpaceEventType.MOUSE_MOVE),clearTimeout(c),(0,D.default)("#"+s).css({top:a.position.y+"px",left:a.position.x+"px"}),(0,D.default)("#"+s).addClass("cesium-mousezoom-visible")))},T.ScreenSpaceEventType.MIDDLE_DOWN),x.setInputAction(function(){(0,D.default)("#"+s).removeClass("cesium-mousezoom-visible"),x.setInputAction(function(a){(0,D.default)("#"+s).css({top:a.endPosition.y+"px",left:a.endPosition.x+"px"})},T.ScreenSpaceEventType.MOUSE_MOVE)},T.ScreenSpaceEventType.MIDDLE_UP),this.handler=x}return v(u,[{key:"destroy",value:function(){this.handler&&(this.handler.destroy(),delete this.handler),(0,D.default)("#"+this.containerid).remove()}}]),u}();z.MouseZoomStyle=o},94777:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.wgs2gcj=z.wgs2bd=z.mct2jwd=z.jwd2mct=z.gcj2wgs=z.gcj2bd=z.bd2wgs=z.bd2gcj=void 0;var F=M(e(42579)),R=void 0,A=3.141592653589793*3e3/180,T=3.141592653589793,D=6378245,b=.006693421622965943,C=function(i,n){(0,F.default)(this,R);var h=-100+2*i+3*n+.2*n*n+.1*i*n+.2*Math.sqrt(Math.abs(i));return h+=(20*Math.sin(6*i*T)+20*Math.sin(2*i*T))*2/3,h+=(20*Math.sin(n*T)+40*Math.sin(n/3*T))*2/3,h+=(160*Math.sin(n/12*T)+320*Math.sin(n*T/30))*2/3,h}.bind(void 0),f=function(i,n){(0,F.default)(this,R);var h=300+i+2*n+.1*i*i+.1*i*n+.1*Math.sqrt(Math.abs(i));return h+=(20*Math.sin(6*i*T)+20*Math.sin(2*i*T))*2/3,h+=(20*Math.sin(i*T)+40*Math.sin(i/3*T))*2/3,h+=(150*Math.sin(i/12*T)+300*Math.sin(i/30*T))*2/3,h}.bind(void 0),v=function(i,n){return(0,F.default)(this,R),i<72.004||i>137.8347||n<.8293||n>55.8271||![]}.bind(void 0),m=function(i){(0,F.default)(this,R);var n=Number(i[0]),h=Number(i[1]),g=3.141592653589793*3e3/180,d=n-.0065,y=h-.006,p=Math.sqrt(d*d+y*y)-2e-5*Math.sin(y*g),w=Math.atan2(y,d)-3e-6*Math.cos(d*g),S=p*Math.cos(w),O=p*Math.sin(w);return S=Number(S.toFixed(6)),O=Number(O.toFixed(6)),[S,O]}.bind(void 0);z.bd2gcj=m;var o=function(i){(0,F.default)(this,R);var n=Number(i[0]),h=Number(i[1]),g=Math.sqrt(n*n+h*h)+2e-5*Math.sin(h*A),d=Math.atan2(h,n)+3e-6*Math.cos(n*A),y=g*Math.cos(d)+.0065,p=g*Math.sin(d)+.006;return y=Number(y.toFixed(6)),p=Number(p.toFixed(6)),[y,p]}.bind(void 0);z.gcj2bd=o;var u=function(i){(0,F.default)(this,R);var n=Number(i[0]),h=Number(i[1]);if(v(n,h))return[n,h];var g=C(n-105,h-35),d=f(n-105,h-35),y=h/180*T,p=Math.sin(y);p=1-b*p*p;var w=Math.sqrt(p);g=g*180/(D*(1-b)/(p*w)*T),d=d*180/(D/w*Math.cos(y)*T);var S=h+g,O=n+d;return O=Number(O.toFixed(6)),S=Number(S.toFixed(6)),[O,S]}.bind(void 0);z.wgs2gcj=u;var l=function(i){(0,F.default)(this,R);var n=Number(i[0]),h=Number(i[1]);if(v(n,h))return[n,h];var g=C(n-105,h-35),d=f(n-105,h-35),y=h/180*T,p=Math.sin(y);p=1-b*p*p;var w=Math.sqrt(p);g=g*180/(D*(1-b)/(p*w)*T),d=d*180/(D/w*Math.cos(y)*T);var S=h+g,O=n+d,B=n*2-O,k=h*2-S;return B=Number(B.toFixed(6)),k=Number(k.toFixed(6)),[B,k]}.bind(void 0);z.gcj2wgs=l;var r=function(i){return(0,F.default)(this,R),l(m(i))}.bind(void 0);z.bd2wgs=r;var s=function(i){return(0,F.default)(this,R),o(u(i))}.bind(void 0);z.wgs2bd=s;var c=function(i){(0,F.default)(this,R);var n=Number(i[0]),h=Number(i[1]),g=n*2003750834e-2/180,d=Math.log(Math.tan((90+h)*T/360))/(T/180);return d=d*2003750834e-2/180,g=Number(g.toFixed(2)),d=Number(d.toFixed(2)),[g,d]}.bind(void 0);z.jwd2mct=c;var x=function(i){(0,F.default)(this,R);var n=Number(i[0]),h=Number(i[1]),g=n/2003750834e-2*180,d=h/2003750834e-2*180;return d=180/T*(2*Math.atan(Math.exp(d*T/180))-T/2),g=Number(g.toFixed(6)),d=Number(d.toFixed(6)),[g,d]}.bind(void 0);z.mct2jwd=x},85219:function(X,z,e){"use strict";var M=e(29870),F=e(87879),R=e(83393),A=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Tooltip=void 0;var T=A(e(29870)),D=A(e(22777)),b=A(e(42762)),C=u(e(87647)),f=A(e(63379)),v=u(e(92672)),m=u(e(80823));function o(r){if(typeof F!="function")return null;var s=new F,c=new F;return(o=function(a){return a?c:s})(r)}function u(r,s){if(!s&&r&&r.__esModule)return r;if(r===null||M(r)!=="object"&&typeof r!="function")return{default:r};var c=o(s);if(c&&c.has(r))return c.get(r);var x={},a=Object.defineProperty&&R;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var n=a?R(r,i):null;n&&(n.get||n.set)?Object.defineProperty(x,i,n):x[i]=r[i]}return x.default=r,c&&c.set(r,x),x}var l=function(){function r(s,c){(0,D.default)(this,r);var x=this;this.viewer=s,this.options=c||{},this._enable=!![],this.viewerid=s._container.id,this.highlighted={feature:void 0,originalColor:new C.Color},this.defaultHighlightedClr=new C.Color.fromCssColorString("#95e40c"),this.getTooltipForConfig=m.getTooltipForConfig;var a='<div id="'+this.viewerid+'tooltip-view" class="cesium-popup" style="display:none">     <div class="cesium-popup-content-wrapper  cesium-popup-background">         <div id="'+this.viewerid+'tooltip-content" class="cesium-popup-content cesium-popup-color"></div>     </div>     <div class="cesium-popup-tip-container"><div class="cesium-popup-tip  cesium-popup-background"></div></div></div> ';(0,f.default)("#"+this.viewerid).append(a),this.handler=new C.ScreenSpaceEventHandler(s.scene.canvas),this.handler.setInputAction(function(i){x.options.onMouseMove&&x.options.onMouseMove(i)},C.ScreenSpaceEventType.MOUSE_MOVE)}return(0,b.default)(r,[{key:"mouseMovingPicking",value:function(c){var x=this;if(this._enable){if((0,f.default)(".cesium-viewer").css("cursor",""),this.viewer.scene.screenSpaceCameraController.enableRotate===![]||this.viewer.scene.screenSpaceCameraController.enableTilt===![]||this.viewer.scene.screenSpaceCameraController.enableTranslate===![]){this.close();return}var a=c.endPosition,i,n;try{n=this.viewer.scene.pick(a,5,5)}catch{}if(C.defined(n)&&C.defined(n.id)&&n.id instanceof C.Entity)i=n.id;else if(C.defined(n)&&C.defined(n.tileset)&&C.defined(n.getProperty)){var h=n.tileset._config;if(h){for(var g={},d=n.getPropertyIds(),y=0;y<d.length;y++){var p=d[y];if(n.hasProperty(p)){var w=n.getProperty(p);w!=null&&(g[p]=w)}}i={id:n._batchId,tooltip:{html:(0,m.getTooltipForConfig)(h,g),anchor:h.popupAnchor||[0,-15]},attr:g,feature:n},h.noMouseMove||(h.mouseover&&(i.mouseover=h.mouseover),h.mouseover&&(i.mouseover=h.mouseover)),h.showMoveFeature&&this.highlighPick(n,h.moveFeatureColor)}}else n&&C.defined(n.primitive)&&(i=n.primitive);if(i)if((i.popup||i.click||i.cursorCSS)&&(0,f.default)(".cesium-viewer").css("cursor",i.cursorCSS||"pointer"),!i.noMouseMove&&(clearTimeout(this.lastTime),this.lastTime=setTimeout(function(){x.activateMouseOver(i,a)},20)),i.tooltip){var S=(0,v.getCurrentMousePosition)(this.viewer.scene,a);this.show(i,S,a)}else this.close();else this.close(),clearTimeout(this.lastTime),this.lastTime=setTimeout(function(){x.activateMouseOut()},20)}}},{key:"show",value:function(c,x,a){if(!(c==null||c.tooltip==null)){if(a==null&&(a=C.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,x)),a==null){this.close();return}var i=(0,f.default)("#"+this.viewerid+"tooltip-view"),n;if((0,T.default)(c.tooltip)==="object"){if(n=c.tooltip.html,c.tooltip.check&&!c.tooltip.check()){this.close();return}}else n=c.tooltip;if(typeof n=="function"&&(n=n(c,x)),!!n){(0,f.default)("#"+this.viewerid+"tooltip-content").html(n),i.show();var h=a.x-i.width()/2,g=a.y-i.height(),d=c.tooltip;d&&(typeof d>"u"?"undefined":(0,T.default)(d))==="object"&&d.anchor?(h+=d.anchor[0],g+=d.anchor[1]):g-=15,i.css("transform","translate3d("+h+"px,"+g+"px, 0)")}}}},{key:"close",value:function(){(0,f.default)("#"+this.viewerid+"tooltip-content").empty(),(0,f.default)("#"+this.viewerid+"tooltip-view").hide(),this.unHighlighPick()}},{key:"activateMouseOver",value:function(c,x){this.lastEntity!==c&&(this.activateMouseOut(),c.mouseover&&typeof c.mouseover=="function"&&c.mouseover(c,x),this.lastEntity=c)}},{key:"activateMouseOut",value:function(){this.lastEntity!=null&&(this.lastEntity.mouseout&&typeof this.lastEntity.mouseout=="function"&&this.lastEntity.mouseout(this.lastEntity),this.lastEntity=null)}},{key:"unHighlighPick",value:function(){if(C.defined(this.highlighted.feature)){try{this.highlighted.feature.color=this.highlighted.originalColor}catch{}this.highlighted.feature=void 0}}},{key:"highlighPick",value:function(c,x){this.unHighlighPick(),this.highlighted.feature=c,C.Color.clone(c.color,this.highlighted.originalColor),x&&typeof x=="string"&&(x=new C.Color.fromCssColorString(x)),c.color=x||this.defaultHighlightedClr}},{key:"destroy",value:function(){this.close(),this.handler.destroy(),delete this.handler,(0,f.default)("#"+this.viewerid+"tooltip-view").remove()}},{key:"enable",get:function(){return this._enable},set:function(c){this._enable=c,!c&&this.close()}}]),r}();z.Tooltip=l},70317:function(X,z,e){"use strict";var M=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Tooltip=A,z.message=void 0;var F=M(e(63379)),R={draw:{point:{start:"\u5355\u51FB \u5B8C\u6210\u7ED8\u5236"},polyline:{start:"\u5355\u51FB \u5F00\u59CB\u7ED8\u5236",cont:"\u5355\u51FB\u589E\u52A0\u70B9\uFF0C\u53F3\u51FB\u5220\u9664\u70B9",end:"\u5355\u51FB\u589E\u52A0\u70B9\uFF0C\u53F3\u51FB\u5220\u9664\u70B9<br/>\u53CC\u51FB\u5B8C\u6210\u7ED8\u5236",end2:"\u5355\u51FB\u5B8C\u6210\u7ED8\u5236"}},edit:{start:"\u5355\u51FB\u540E \u6FC0\u6D3B\u7F16\u8F91<br/>\u53F3\u51FB \u5220\u9664\u5BF9\u8C61",end:"\u91CA\u653E\u540E \u5B8C\u6210\u4FEE\u6539"},dragger:{def:"\u62D6\u52A8 \u4FEE\u6539\u4F4D\u7F6E",addMidPoint:"\u62D6\u52A8 \u589E\u52A0\u70B9",moveHeight:"\u62D6\u52A8 \u4FEE\u6539\u9AD8\u5EA6",editRadius:"\u62D6\u52A8 \u4FEE\u6539\u534A\u5F84",editHeading:"\u62D6\u52A8 \u4FEE\u6539\u65B9\u5411",editScale:"\u62D6\u52A8 \u4FEE\u6539\u7F29\u653E\u6BD4\u4F8B"},del:{def:"<br/>\u53F3\u51FB \u5220\u9664\u8BE5\u70B9",end:"\u53F3\u51FB \u5220\u9664\u5BF9\u8C61",min:"\u65E0\u6CD5\u5220\u9664\uFF0C\u70B9\u6570\u91CF\u4E0D\u80FD\u5C11\u4E8E"}};z.message=R;function A(T){var D=document.createElement("DIV");D.className="draw-tooltip right";var b=document.createElement("DIV");b.className="draw-tooltip-arrow",D.appendChild(b);var C=document.createElement("DIV");C.className="draw-tooltip-inner",D.appendChild(C),this._div=D,this._title=C,T.appendChild(D),(0,F.default)(".draw-tooltip").mouseover(function(){(0,F.default)(this).hide()})}A.prototype.setVisible=function(T){this._div.style.display=T?"block":"none"},A.prototype.showAt=function(T,D){T&&D?(this.setVisible(!![]),this._title.innerHTML!==D&&(this._title.innerHTML=D),this._div.style.top=T.y-this._div.clientHeight/2+"px",this._div.style.left=T.x+30+"px"):this.setVisible(![])}},9045:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(87879),A=e(83393),T=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.getWMTSCapabilities=u;var D=T(e(42579)),b=e(10563),C=T(e(63379)),f=o(e(87647)),v=e(55616);function m(l){if(typeof R!="function")return null;var r=new R,s=new R;return(m=function(x){return x?s:r})(l)}function o(l,r){if(!r&&l&&l.__esModule)return l;if(l===null||F(l)!=="object"&&typeof l!="function")return{default:l};var s=m(r);if(s&&s.has(l))return s.get(l);var c={},x=Object.defineProperty&&A;for(var a in l)if(a!=="default"&&Object.prototype.hasOwnProperty.call(l,a)){var i=x?A(l,a):null;i&&(i.get||i.set)?Object.defineProperty(c,a,i):c[a]=l[a]}return c.default=l,s&&s.set(l,c),c}function u(l,r,s,c,x){if(!l||l===""){M.error("The url was not provided or it is invalid!");return}var a={RestfulUrl:"",KvpUrl:"",layer:"",style:"",format:"",tileMatrixSetID:"",maximumLevel:null,tileMatrixLabels:[],tilingScheme:null,position:"",ServiceType:""};return C.default.ajax({url:l,type:"GET",async:![],timeout:3e3,success:function(n){var h=this,g=(0,b.xmlToJson)(n);if(s==="geoserver"?a.ServiceType="geoserver":a.ServiceType="arcgisserver",a.ServiceType==="geoserver"&&!r)M.error("params error! layer name from Geoserver is required !");else if(a.ServiceType==="geoserver"&&r)if(Array.isArray(g.Capabilities["ows:OperationsMetadata"]["ows:Operation"][1]["ows:DCP"]["ows:HTTP"]["ows:Get"])?a.KvpUrl=g.Capabilities["ows:OperationsMetadata"]["ows:Operation"][1]["ows:DCP"]["ows:HTTP"]["ows:Get"][1]["@attributes"]["xlink:href"]:a.KvpUrl=g.Capabilities["ows:OperationsMetadata"]["ows:Operation"][1]["ows:DCP"]["ows:HTTP"]["ows:Get"]["@attributes"]["xlink:href"],g.Capabilities.Contents.Layer instanceof Array)g.Capabilities.Contents.Layer.forEach(function(Z){var U=this;(0,D.default)(this,h),Z["ows:Identifier"]["#text"]===r&&(a.tilingScheme=new f.GeographicTilingScheme,a.format="image/png",a.RestfulUrl=Z.ResourceURL[0]["@attributes"].template,Z["ows:WGS84BoundingBox"]&&(a.position=Z["ows:WGS84BoundingBox"]["ows:LowerCorner"]["#text"]+" "+Z["ows:WGS84BoundingBox"]["ows:UpperCorner"]["#text"]),a.layer=r,Z.Style["ows:Identifier"]=={}?a.style="":a.style=Z.Style["ows:Identifier"]["#text"]||"",Array.isArray(Z.TileMatrixSetLink)===!![]?(a.maximumLevel=Z.TileMatrixSetLink[0].TileMatrixSetLimits.TileMatrixLimits.length,a.tileMatrixSetID=Z.TileMatrixSetLink[1].TileMatrixSet["#text"],Z.TileMatrixSetLink[1].TileMatrixSetLimits.TileMatrixLimits.forEach(function(H){(0,D.default)(this,U);var V=H.TileMatrix["#text"];return a.tileMatrixLabels.push(V)}.bind(this))):(a.maximumLevel=Z.TileMatrixSetLink.TileMatrixSetLimits.TileMatrixLimits.length,a.tileMatrixSetID=Z.TileMatrixSetLink.TileMatrixSet["#text"],Z.TileMatrixSetLink.TileMatrixSetLimits.TileMatrixLimits.forEach(function(H){(0,D.default)(this,U);var V=H.TileMatrix["#text"];return a.tileMatrixLabels.push(V)}.bind(this))),a.RestfulUrl===""&&M.error("layer name may incorrect,please check it!"))}.bind(this));else{var d=g.Capabilities.Contents.Layer;if(d["ows:Identifier"]["#text"]===r){if(a.tilingScheme=new f.GeographicTilingScheme,a.format="image/png",a.RestfulUrl=d.ResourceURL[0]["@attributes"].template,d["ows:WGS84BoundingBox"]&&(a.position=d["ows:WGS84BoundingBox"]["ows:LowerCorner"]["#text"]+" "+d["ows:WGS84BoundingBox"]["ows:UpperCorner"]["#text"]),a.layer=r,d.Style["ows:Identifier"]=={}?a.style="":a.style=d.Style["ows:Identifier"]["#text"]||"",Array.isArray(d.TileMatrixSetLink)===!![]){var y,p,w,S=(y=d.TileMatrixSetLink[0])===null||y===void 0||(p=y.TileMatrixSetLimits)===null||p===void 0||(w=p.TileMatrixLimits)===null||w===void 0?void 0:w.length;S?a.maximumLevel=S:a.maximumLevel=18,x?a.tileMatrixSetID=x:a.tileMatrixSetID=d.TileMatrixSetLink[1].TileMatrixSet["#text"],d.TileMatrixSetLink[1].TileMatrixSetLimits.TileMatrixLimits.forEach(function(Z){(0,D.default)(this,h);var U=Z.TileMatrix["#text"];return a.tileMatrixLabels.push(U)}.bind(this))}else a.maximumLevel=d.TileMatrixSetLink.TileMatrixSetLimits.TileMatrixLimits.length,a.tileMatrixSetID=d.TileMatrixSetLink.TileMatrixSet["#text"],d.TileMatrixSetLink.TileMatrixSetLimits.TileMatrixLimits.forEach(function(Z){(0,D.default)(this,h);var U=Z.TileMatrix["#text"];return a.tileMatrixLabels.push(U)}.bind(this));a.RestfulUrl===""&&M.error("layer name may incorrect,please check it!")}}else{if(g.Capabilities.Contents.Layer.ResourceURL&&(a.RestfulUrl=g.Capabilities.Contents.Layer.ResourceURL["@attributes"].template),a.KvpUrl=g.Capabilities["ows:OperationsMetadata"]["ows:Operation"][1]["ows:DCP"]["ows:HTTP"]["ows:Get"][1]["@attributes"]["xlink:href"],a.layer=g.Capabilities["ows:ServiceIdentification"]["ows:Title"]["#text"],a.format="image/png",a.style=g.Capabilities.Contents.Layer.Style["ows:Identifier"]["#text"],a.TileMatrixSet=g.Capabilities.Contents.TileMatrixSet,g.Capabilities.Contents.Layer["ows:BoundingBox"]){a.position=g.Capabilities.Contents.Layer["ows:BoundingBox"]["ows:LowerCorner"]["#text"]+" "+g.Capabilities.Contents.Layer["ows:BoundingBox"]["ows:UpperCorner"]["#text"];var O=g.Capabilities.Contents.Layer["ows:BoundingBox"]["@attributes"].crs.toString(),B=new RegExp("urn:ogc:def:crs:EPSG::","g");O=O.replace(B,"")}var k=["4490","4610","4214","4510","4511","4512","4528"];if(Array.isArray(g.Capabilities.Contents.TileMatrixSet))if(a.TileMatrix=g.Capabilities.Contents.TileMatrixSet[0].TileMatrix,a.tileMatrixSetID=g.Capabilities.Contents.Layer.TileMatrixSetLink[0].TileMatrixSet["#text"],a.maximumLevel=g.Capabilities.Contents.TileMatrixSet[0].TileMatrix.length-1,k.indexOf(O)!==-1){a.tilingScheme=new f.GeographicTilingScheme;for(var P=g.Capabilities.Contents.TileMatrixSet[0].TileMatrix,L=0;L<P.length;L++)if(P[L].MatrixHeight["#text"]=="1"&&P[L].MatrixWidth["#text"]=="2")for(var E=L;E<P.length;E++)a.tileMatrixLabels.push(P[E]["ows:Identifier"]["#text"])}else a.tilingScheme=null,g.Capabilities.Contents.TileMatrixSet[0].TileMatrix.forEach(function(Z){return(0,D.default)(this,h),a.tileMatrixLabels.push(Z["ows:Identifier"]["#text"])}.bind(this));else if(a.TileMatrix=g.Capabilities.Contents.TileMatrixSet.TileMatrix,a.tileMatrixSetID=g.Capabilities.Contents.Layer.TileMatrixSetLink.TileMatrixSet["#text"],a.maximumLevel=g.Capabilities.Contents.TileMatrixSet.TileMatrix.length-1,k.indexOf(O)!==-1){a.tilingScheme=new f.GeographicTilingScheme;for(var N=g.Capabilities.Contents.TileMatrixSet.TileMatrix,I=0;I<N.length;I++)if(N[I].MatrixHeight["#text"]=="1"&&N[I].MatrixWidth["#text"]=="2")for(var G=I;G<N.length;G++)a.tileMatrixLabels.push(N[G]["ows:Identifier"]["#text"]);else if(N[I].MatrixHeight["#text"]=="2"&&N[I].MatrixWidth["#text"]=="2")for(var W=I;W<N.length;W++)a.tileMatrixLabels.push(N[W]["ows:Identifier"]["#text"])}else a.tilingScheme=null,g.Capabilities.Contents.TileMatrixSet.TileMatrix.forEach(function(Z){return(0,D.default)(this,h),a.tileMatrixLabels.push(Z["ows:Identifier"]["#text"])}.bind(this))}c&&Array.isArray(c)&&c.length>0&&(a.tileMatrixLabels=[],a.tileMatrixLabels=c)},error:function(){M.error("faild to request WMTS Capabilities xml !")},complete:function(n,h){h==="timeout"&&(0,v.Message)("request WMTS Capabilities time out!")}}),a}},59802:function(X,z,e){"use strict";var M=e(29870),F=e(85208),R=e(59791),A=e(22466),T=e(83393),D=e(5077),b=e(87879),C=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.ViewerEx=void 0;var f=C(e(43389)),v=C(e(22777)),m=C(e(42762)),o=w(e(87647)),u=C(e(63379)),l=e(92118),r=e(94225),s=e(70489),c=e(85219),x=e(95512),a=e(74913),i=w(e(80823)),n=w(e(92672)),h=w(e(94777)),g=C(e(6509)),d=C(e(64828)),y=e(36161);function p(k){if(typeof b!="function")return null;var P=new b,L=new b;return(p=function(N){return N?L:P})(k)}function w(k,P){if(!P&&k&&k.__esModule)return k;if(k===null||M(k)!=="object"&&typeof k!="function")return{default:k};var L=p(P);if(L&&L.has(k))return L.get(k);var E={},N=Object.defineProperty&&T;for(var I in k)if(I!=="default"&&Object.prototype.hasOwnProperty.call(k,I)){var G=N?T(k,I):null;G&&(G.get||G.set)?Object.defineProperty(E,I,G):E[I]=k[I]}return E.default=k,L&&L.set(k,E),E}function S(k,P){var L=F(k);if(R){var E=R(k);P&&(E=A(E).call(E,function(N){return T(k,N).enumerable})),L.push.apply(L,E)}return L}function O(k){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?S(Object(L),!0).forEach(function(E){(0,f.default)(k,E,L[E])}):D?Object.defineProperties(k,D(L)):S(Object(L)).forEach(function(E){Object.defineProperty(k,E,T(L,E))})}return k}var B=function(){function k(P,L){(0,v.default)(this,k),o.Camera.DEFAULT_VIEW_RECTANGLE=o.Rectangle.fromDegrees(89.5,20.4,110.4,61.2),this.viewer=P,this.viewer.scene.camera.percentageChanged=.1,this.config=o.defaultValue(L,{}),this.viewer.shine=this,this._isFlyAnimation=![],this.crs=o.defaultValue(this.config.crs,"3857"),this.idProp=void 0,this.tildLayer=[],this.editLayer=void 0,this._drawControl=null,this.layerContexts=[],this._optimization(),this._initForOpts(),this.config.is2d===1&&(this.ol3d=new d.default({map:this.config.map2d,scene_c:this.viewer.scene,isBaseMap:!![]})),this.layerManager=new r.LayerManager(this),this._addControls()}return(0,m.default)(k,[{key:"_optimization",value:function(){if(this.viewer.sceneModePicker&&(this.viewer.sceneModePicker.viewModel.duration=0),this.viewer.clockViewModel&&(this.viewer.myClock=this.viewer.clockViewModel.clock),o.VERSION<1.63&&(this.viewer._cesiumWidget._supportsImageRenderingPixelated=o.FeatureDetection.supportsImageRenderingPixelated(),this.viewer._cesiumWidget._forceResize=!![],o.FeatureDetection.supportsImageRenderingPixelated())){for(var L=window.devicePixelRatio;L>=2;)L/=2;this.viewer.resolutionScale=L}}},{key:"_initForOpts",value:function(){var L=this;this.viewer.cesiumWidget.creditContainer.style.display="none",this.viewer.homeButton&&this.viewer.homeButton.viewModel.command.beforeExecute.addEventListener(function(I){L.centerAt(),I.cancel=!![]}),this.centerAt(this.config.center,{duration:this.config.duration||0});var E=this.viewer.scene;if(E.globe.baseColor=new o.Color.fromCssColorString(this.config.baseColor||"#546a53"),this.config.backgroundColor&&(E.backgroundColor=new o.Color.fromCssColorString(this.config.backgroundColor)),this.config.style){E.debugShowFramesPerSecond=this.config.style.debugShowFramesPerSecond;var N=this.config.style.resolutionScale?window.devicePixelRatio:1;this.viewer.resolutionScale=N,E.globe.depthTestAgainstTerrain=this.config.style.testTerrain,E.globe.enableLighting=this.config.style.lighting,E.skyAtmosphere.show=this.config.style.atmosphere,E.globe.showGroundAtmosphere=this.config.style.atmosphere,E.fog.enabled=this.config.style.fog,E.globe.show=o.defaultValue(this.config.style.globe,!![]),E.moon.show=o.defaultValue(this.config.style.moon,E.globe.show),E.sun.show=o.defaultValue(this.config.style.sun,E.globe.show),E.skyBox.show=o.defaultValue(this.config.style.skyBox,E.globe.show)}E.canvas.addEventListener("webglcontextlost",function(I){I.preventDefault()},![]),E.canvas.addEventListener("webglcontextrestored",function(){E.initializeFrame()},![]),E.screenSpaceCameraController.maximumZoomDistance=o.defaultValue(this.config.maxzoom,2e7),E.screenSpaceCameraController.minimumZoomDistance=o.defaultValue(this.config.minzoom,1),E.screenSpaceCameraController.enableCollisionDetection=!![],E.screenSpaceCameraController._zoomFactor=2,E.screenSpaceCameraController.minimumCollisionTerrainHeight=15e6}},{key:"_addControls",value:function(){var L={id:"temporaryDrawLayer",type:"geojson-draw",visible:!![]};this.addLayer(L),this._drawControl==null&&(this._drawControl=new l.DrawBase(this.viewer,{id:"temporaryDrawLayer",hasEdit:![]})),this._tooltip=new c.Tooltip(this.viewer,{onMouseMove:function(){}}),this._keyboardRoam=new s.KeyboardRoam(this.viewer),this.config.location&&(this.config.location.bindEvent=![],this._location=new x.Location(this.viewer,this.config.location)),!i.isPCBroswer()&&(this.viewer.targetFrameRate=20,this.viewer.requestRenderMode=!![],this.viewer.scene.fog.enable=![],this.viewer.scene.skyAtmosphere.show=![],this.viewer.scene.fxaa=![]),this.config.mouseZoom&&i.isPCBroswer()&&(this._mouseZoomStyle=new a.MouseZoomStyle(this.viewer,this.config.mouseZoom))}},{key:"addLayer",value:function(L){this.layerManager.addLayer(L)}},{key:"filterLayer",value:function(L,E){this.layerManager.filterLayer(L,E)}},{key:"getConfig",value:function(){return i.clone(this.config,5)}},{key:"getCenter",value:function(L){return n.getCenter(this.viewer,L)}},{key:"getExtent",value:function(L){return n.getExtent(this.viewer,L)}},{key:"getCameraView",value:function(L){return n.getCameraView(this.viewer,L)}},{key:"getHeight",value:function(L,E){return n.updateHeightForClampToGround(this.viewer,L,E)}},{key:"keyboard",value:function(L,E){L?this._keyboardRoam.bind(E):this._keyboardRoam.unbind()}},{key:"keyboardAuto",value:function(){return this._keyboardRoam.enable=!this._keyboardRoam.enable}},{key:"getLayer",value:function(L,E){return this.layerManager.getLayer(L,E)}},{key:"getLevel",value:function(L){var E=3252.745,N=.0009198301,I=52977.61,G=-3228.107;return G+(E-G)/(1+Math.pow(L/I,N))}},{key:"levelToHeight",value:function(L){return 48e6/Math.pow(2,L-1)}},{key:"removeLayer",value:function(L){this.layerManager.removeLayer(L)}},{key:"hasTerrain",value:function(){return this.terrainProvider==null?![]:i.hasTerrain(this.viewer)}},{key:"updateTerrainProvider",value:function(L){if(L){if(this.terrainProvider==null){var E=this.config.terrain;E.url&&(this.config.serverURL&&(E.url=E.url.replace("$serverURL$",this.config.serverURL)),E.url=E.url.replace("$hostname$",location.hostname).replace("$host$",location.host)),this.terrainProvider=i.getTerrainProvider(E)}this.viewer.terrainProvider=this.terrainProvider}else this.viewer.terrainProvider=i.getEllipsoidTerrain()}},{key:"getCrs",value:function(){return this.crs}},{key:"point2map",value:function(L){if(this.crs==="gcj"){var E=i.clone(L),N=h.wgs2gcj([E.x,E.y]);return E.x=N[0],E.y=N[1],E}else if(this.crs==="baidu"){var I=i.clone(L),G=h.wgs2bd([I.x,I.y]);return I.x=G[0],I.y=G[1],I}else return L}},{key:"point2wgs",value:function(L){if(this.crs==="gcj"){var E=i.clone(L),N=h.gcj2wgs([E.x,E.y]);return E.x=N[0],E.y=N[1],E}else if(this.crs==="baidu"){var I=i.clone(L),G=h.bd2gcj([I.x,I.y]);return I.x=G[0],I.y=G[1],I}else return L}},{key:"centerAtArr",value:function(L,E){this.cancelCenterAt(),this.arrCenterTemp=L,this._isCenterAtArr=!![],this._centerAtArrItem(0,E)}},{key:"_centerAtArrItem",value:function(L,E){var N=this;if(!this._isCenterAtArr||L<0||L>=this.arrCenterTemp.length){this._isCenterAtArr=![],E&&E();return}var I=this.arrCenterTemp[L];I.onStart&&I.onStart(),this.centerAt(I,{duration:I.duration,complete:function(){I.onEnd&&I.onEnd();var W=o.defaultValue(I.stop,1);setTimeout(function(){N._centerAtArrItem(++L,E)},W*1e3)},cancle:function(){this._isCenterAtArr=![],E&&E()}})}},{key:"cancelCenterAt",value:function(){this._isCenterAtArr=![],this.viewer.camera.cancelFlight()}},{key:"centerAt",value:function(L,E){E==null?E={}:i.isNumber(E)&&(E={duration:E}),L==null&&(E.isWgs84=!![],L=this.config.extent||this.config.center||{y:17.196575,x:114.184276,z:9377198,heading:0,pitch:-80,roll:0});var N={};for(var I in E)N[I]=E[I];if(L.xmin&&L.xmax&&L.ymin&&L.ymax){var G=L.xmin,W=L.xmax,Z=L.ymin,U=L.ymax;if(N.isWgs84){var H=this.point2map({x:G,y:Z});G=H.x,Z=H.y;var V=this.point2map({x:W,y:U});W=V.x,U=V.y}N.rectangle=o.Rectangle.fromDegrees(G,Z,W,U),this.viewer.camera.flyTo(O(O({},N),{},{destination:N.rectangle}))}else{N.isWgs84&&(L=this.point2map(L));var Y=o.defaultValue(N.minz,2500);if(this.viewer.camera.positionCartographic.height<Y&&(Y=this.viewer.camera.positionCartographic.height),L.z!=null&&L.z!==0&&(Y=L.z),N.destination=o.Cartesian3.fromDegrees(L.x,L.y,Y),N.orientation={heading:o.Math.toRadians(o.defaultValue(L.heading,0)),pitch:o.Math.toRadians(o.defaultValue(L.pitch,-90)),roll:o.Math.toRadians(o.defaultValue(L.roll,0))},N.isFly){var $=this;$._isFlyAnimation=!![],this.viewer.camera.flyTo(O(O({},N),{},{complete:function(){var J;$._isFlyAnimation=![],(J=$._location)===null||J===void 0||J.updaeCamera()}}))}else this.viewer.camera.flyTo(N)}}},{key:"getGraphicExtent",value:function(L){var E=L[0].x?L:(0,y.lonlats2cartesians)(L),N=o.Rectangle.fromCartesianArray(E),I={xmin:o.Math.toDegrees(N.west),ymin:o.Math.toDegrees(N.south),xmax:o.Math.toDegrees(N.east),ymax:o.Math.toDegrees(N.north)};return I}},{key:"centerPoint",value:function(L,E){E==null&&(E={});var N={};for(var I in E)N[I]=E[I];N.isWgs84&&(L=this.point2map(L));var G;L instanceof o.Cartesian3?G=L:G=o.Cartesian3.fromDegrees(L.x,L.y,o.defaultValue(L.z,0));var W=o.defaultValue(E.radius,5e3);N.offset={heading:o.Math.toRadians(o.defaultValue(E.heading,0)),pitch:o.Math.toRadians(o.defaultValue(E.pitch,-60)),range:o.defaultValue(E.range,0)},this.viewer.camera.flyToBoundingSphere(new o.BoundingSphere(G,W),N)}},{key:"isFlyAnimation",value:function(){return this._isFlyAnimation}},{key:"openFlyAnimation",value:function(L,E){var N=this,I=this.viewer,G=E||n.getCameraView(I);this._isFlyAnimation=!![],I.camera.setView({destination:o.Cartesian3.fromDegrees(-85.16,13.71,23e6)}),I.camera.flyTo({destination:o.Cartesian3.fromDegrees(G.x,G.y,23e6),duration:2,easingFunction:o.EasingFunction.LINEAR_NONE,complete:function(){var Z=o.defaultValue(G.z,9e4);Z<2e5&&G.pitch!==-90?(Z=Z*1.2+8e3,I.camera.flyTo({destination:o.Cartesian3.fromDegrees(G.x,G.y,Z),complete:function(){N.centerAt(G,{duration:2,complete:function(){N._isFlyAnimation=![],L&&L()}})}})):N.centerAt(G,{complete:function(){N._isFlyAnimation=![],L&&L()}})}})}},{key:"rotateAnimation",value:function(L,E){var N=this.viewer,I=n.getCameraView(N),G=E/3;N.camera.flyTo({destination:o.Cartesian3.fromDegrees(I.x+120,I.y,I.z),orientation:{heading:o.Math.toRadians(I.heading),pitch:o.Math.toRadians(I.pitch),roll:o.Math.toRadians(I.roll)},duration:G,easingFunction:o.EasingFunction.LINEAR_NONE,complete:function(){N.camera.flyTo({destination:o.Cartesian3.fromDegrees(I.x+240,I.y,I.z),orientation:{heading:o.Math.toRadians(I.heading),pitch:o.Math.toRadians(I.pitch),roll:o.Math.toRadians(I.roll)},duration:G,easingFunction:o.EasingFunction.LINEAR_NONE,complete:function(){N.camera.flyTo({destination:o.Cartesian3.fromDegrees(I.x,I.y,I.z),orientation:{heading:o.Math.toRadians(I.heading),pitch:o.Math.toRadians(I.pitch),roll:o.Math.toRadians(I.roll)},duration:G,easingFunction:o.EasingFunction.LINEAR_NONE,complete:function(){L&&L()}})}})}})}},{key:"_addNavigationWidget",value:function(L){this.viewer.extend(g.default,{defaultResetView:o.Rectangle.fromDegrees(110,20,120,30),enableZoomControls:!![]}),L.legend?(0,u.default)(".distance-legend").css(L.legend):(0,u.default)(".distance-legend").remove(),L.compass?(0,u.default)(".compass").css(L.compass):(0,u.default)(".compass").remove(),L.zoom?(0,u.default)(".navigation-controls").css(L.zoom):(0,u.default)(".navigation-controls").remove()}},{key:"destroy",value:function(){this._tooltip.destroy(),this._keyboardRoam&&(this._keyboardRoam.destroy(),this._keyboardRoam=null),this._location&&(this._location.destroy(),this._location=null),this._mouseZoomStyle&&(this._mouseZoomStyle.destroy(),this._mouseZoomStyle=null)}},{key:"tooltip",get:function(){return this._tooltip}},{key:"draw",get:function(){return this._drawControl}},{key:"setDraw",value:function(L){this._drawControl=L}},{key:"setTocData",value:function(L){this.layerManager.setTocData(L)}},{key:"getLayerDataById",value:function(L){return this.layerManager.getLayerDataById(L)}},{key:"queryTocData",value:function(L,E,N){this.layerManager.queryTocData(L,E,N)}},{key:"addCheckedLayers",value:function(L){this.layerManager.addCheckedLayers(L)}},{key:"getCheckedLayers",value:function(){return this.layerManager.getCheckedLayers()}},{key:"getDrawLayers",value:function(){return this.layerManager.getDrawLayers()}},{key:"getDrawLayerInfos",value:function(){return this.layerManager.getDrawLayerInfos()}},{key:"removeCheckedLayers",value:function(L){this.layerManager.removeCheckedLayers(L)}},{key:"getLayerOpacity",value:function(){}},{key:"setLayerOpacity",value:function(L,E){this.layerManager.setLayerOpacity(L,E)}},{key:"zoomToLayer",value:function(L){this.layerManager.zoomToLayer(L)}},{key:"setLayerTop",value:function(L){this.layerManager.setLayerTop(L)}},{key:"groundUnder",value:function(L){L.isUnderGround===![]?this.viewer.scene.screenSpaceCameraController.enableCollisionDetection=![]:this.viewer.scene.screenSpaceCameraController.enableCollisionDetection=!![]}},{key:"groundTranslucency",value:function(L){var E;L.isTranslucency===!![]?this.viewer.scene.globe.translucency.enabled=!![]:L.isTranslucency===![]&&(this.viewer.scene.globe.translucency.enabled=![]),this.viewer.scene.globe.translucency.frontFaceAlphaByDistance=new o.NearFarScalar(400,0,1800,1),L.alpha?E=L.alpha:E=.5,this.viewer.scene.globe.translucency.frontFaceAlphaByDistance.nearValue=E,this.viewer.scene.globe.translucency.frontFaceAlphaByDistance.farValue=L.fadeByDistance?1:E}},{key:"useTranslucencyRectangle",value:function(L){var E=this.viewer.scene.globe;E.translucency.enabled=!![],E.undergroundColor=void 0,E.translucency.frontFaceAlpha=.25,L?E.translucency.rectangle=o.Rectangle.fromDegrees(L):E.translucency.rectangle=o.Rectangle.fromDegrees(120,30,120.5,30.5)}},{key:"useTranslucencyMask",value:function(){var L=this.viewer.scene.globe,E=this.viewer.scene.imageryLayers.get(0);L.showGroundAtmosphere=![],L.baseColor=o.Color.TRANSPARENT,L.translucency.enabled=!![],L.undergroundColor=void 0,E.colorToAlpha=new o.Color(0,.016,.059),E.colorToAlphaThreshold=.2}},{key:"add3DMask",value:function(L,E){for(var N=[],I=L.coordinates,G=0;G<I.length;G++)for(var W=[],Z=I[G],U=0;U<Z.length;U++){for(var H=Z[U],V=0;V<H.length;V++)W.push(H[V][0],H[V][1]);var Y={positions:o.Cartesian3.fromDegreesArray(W)};N.push(Y)}var $=E?new o.Color(E.r,E.g,E.b,E.alpha?E.alpha:1):o.Color.WHITE.withAlpha(.5);this.viewer.entities.add({id:"my3dMask",name:"3dMask",polygon:{hierarchy:{positions:o.Cartesian3.fromDegreesArray([50,0,160,0,160,70,50,70]),holes:N},heightReference:o.HeightReference.CLAMP_TO_GROUND,material:$,outline:!![]}})}},{key:"remove3DMask",value:function(){var L=this.viewer.entities.getById("my3dMask");L&&this.viewer.entities.removeById("my3dMask")}}]),k}();z.ViewerEx=B},15998:function(X,z,e){"use strict";var M=e(49500),F=e(29870),R=e(65557),A=e(20314),T=e(26352),D=e(40639),b=e(43586),C=e(87879),f=e(83393),v=e(19534);Object.defineProperty(z,"__esModule",{value:!![]}),z.Weather=z.VisibleAnalysis=z.ViewShedAnalysis=z.Utils=z.TerrainAnalysis=z.SunAnalysis=z.SkyLineAnalysis=z.ShadowRatioAnalysis=z.FloodAnalysis=z.ControlHeightAnalysis=z.ClipAnalysis=void 0;var m=v(e(11323)),o=v(e(69257)),u=v(e(28866)),l=v(e(8138)),r=v(e(5146)),s=v(e(66426)),c=v(e(53267)),x=v(e(66273)),a=v(e(26541)),i=v(e(69033)),n=v(e(27943)),h=v(e(81806)),g=v(e(36047)),d=v(e(20314)),y=v(e(22466)),p=v(e(28954)),w=v(e(34749)),S=v(e(99245)),O=v(e(36583)),B=v(e(42579)),k=v(e(30044)),P=v(e(99085)),L=v(e(34009)),E=v(e(22777)),N=v(e(42762)),I=et(e(87647)),G=e(69973),W=e(96535),Z=e(92672),U=v(e(7974)),H=et(e(25794)),V=e(25074),Y=et(e(96376)),$=e(70317),K=e(55616),J=e(59039);function Q(Zt){if(typeof C!="function")return null;var ft=new C,gt=new C;return(Q=function(lt){return lt?gt:ft})(Zt)}function et(Zt,ft){if(!ft&&Zt&&Zt.__esModule)return Zt;if(Zt===null||F(Zt)!=="object"&&typeof Zt!="function")return{default:Zt};var gt=Q(ft);if(gt&&gt.has(Zt))return gt.get(Zt);var dt={},lt=Object.defineProperty&&f;for(var ot in Zt)if(ot!=="default"&&Object.prototype.hasOwnProperty.call(Zt,ot)){var it=lt?f(Zt,ot):null;it&&(it.get||it.set)?Object.defineProperty(dt,ot,it):dt[ot]=Zt[ot]}return dt.default=Zt,gt&&gt.set(Zt,dt),dt}function nt(Zt,ft){var gt=typeof D<"u"&&b(Zt)||Zt["@@iterator"];if(!gt){if(Array.isArray(Zt)||(gt=st(Zt))||ft&&Zt&&typeof Zt.length=="number"){gt&&(Zt=gt);var dt=0,lt=function(){};return{s:lt,n:function(){return dt>=Zt.length?{done:!![]}:{done:![],value:Zt[dt++]}},e:function(St){throw St},f:lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ot=!![],it=![],yt;return{s:function(){gt=gt.call(Zt)},n:function(){var St=gt.next();return ot=St.done,St},e:function(St){it=!![],yt=St},f:function(){try{!ot&&gt.return!=null&&gt.return()}finally{if(it)throw yt}}}}function st(Zt,ft){var gt;if(Zt){if(typeof Zt=="string")return ut(Zt,ft);var dt=A(gt=Object.prototype.toString.call(Zt)).call(gt,8,-1);if(dt==="Object"&&Zt.constructor&&(dt=Zt.constructor.name),dt==="Map"||dt==="Set")return T(Zt);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return ut(Zt,ft)}}function ut(Zt,ft){(ft==null||ft>Zt.length)&&(ft=Zt.length);for(var gt=0,dt=new Array(ft);gt<ft;gt++)dt[gt]=Zt[gt];return dt}function rt(Zt){var ft=ht();return function(){var dt=(0,L.default)(Zt),lt;if(ft){var ot=(0,L.default)(this).constructor;lt=R(dt,arguments,ot)}else lt=dt.apply(this,arguments);return(0,P.default)(this,lt)}}function ht(){if(typeof Reflect>"u"||!R)return![];if(R.sham)return![];if(typeof Proxy=="function")return!![];try{return Boolean.prototype.valueOf.call(R(Boolean,[],function(){})),!![]}catch{return![]}}var Pt=I.Cartesian3,wt={JulianDate:I.JulianDate,cartesianToLonLatHeight:function(ft){var gt=I.Cartographic.fromCartesian(ft),dt=I.Math.toDegrees(gt.longitude),lt=I.Math.toDegrees(gt.latitude);return[dt,lt,gt.height]},getCartographicWithCartesian3:function(ft,gt){return ft.scene.globe.ellipsoid.cartesianToCartographic(gt)},upPosition:function(ft,gt,dt){var lt=this.getCartographicWithCartesian3(ft,gt);return lt.height+=dt,I.Cartographic.toCartesian(lt)},setPositionHeight:function(ft,gt,dt){var lt=this.getCartographicWithCartesian3(ft,gt);return lt.height=dt,I.Cartographic.toCartesian(lt)},distance:function(ft,gt){var dt=new I.EllipsoidGeodesic;return dt.setEndPoints(I.Cartographic.fromCartesian(ft),I.Cartographic.fromCartesian(gt)),dt.surfaceDistance},getColor:function(ft){return I.Color[ft]},isCesiumProperty:function(ft,gt){return ft instanceof I[gt]}};z.Utils=wt;var At=function(){function Zt(ft){var gt;(0,E.default)(this,Zt),this.prop=ft||{};var dt=this.prop,lt=dt.viewer,ot=dt.dataSource,it=dt.type,yt=dt.drawConfig,Ot=dt.name;if(!I.defined(lt)){M.warn("\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u8BBE\u7F6E\u3010viewer\u3011");return}if(!I.defined(it)){M.warn("\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u8BBE\u7F6E\u3010type\u3011");return}var St="".concat(it,"AnalysisLayer");if(yt){var Gt={visible:!![],id:"spatialAnalysisLayer",type:"geojson-draw"},Ht=lt.shine.getLayer(Gt.id,"id");!Ht&&lt.shine.addLayer(Gt),yt.type==="measure"?(this.drawControl=new V.Measure((0,o.default)({viewer:lt,name:Ot||St},yt)),this.prop.dataSource=this.drawControl.draw().dataSource):(this.drawControl=new V.Draw(lt,(0,o.default)({hasEdit:![],name:Ot||St},yt)),this.drawControl.setEditLayer(Gt.id,![]),this.prop.dataSource=this.drawControl.dataSource)}else this.prop.dataSource=ot||new I.CustomDataSource(Ot||St),lt.dataSources.add(this.prop.dataSource);(gt=this.init)===null||gt===void 0||gt.call(this)}return(0,N.default)(Zt,[{key:"init",value:function(){}},{key:"clearDraw",value:function(){var gt=this.prop.drawConfig;this.drawControl&&(gt.type==="measure"?this.drawControl.clearMeasure():this.drawControl.clearDraw())}},{key:"start",value:function(){}},{key:"destroy",value:function(){}},{key:"clear",value:function(){}}]),Zt}(),Nt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,E.default)(this,gt),dt=dt||{},dt.type="visible",dt.drawConfig=!![],ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){var lt=this.prop.depthFailMaterial;this.depthFailMaterial=lt,this.obHeight=1.7,this.viewStart=[],this.viewEnd=null}},{key:"_checkStart",value:function(lt){var ot=this;if(lt instanceof Array){var it=!![];return lt&&lt.forEach(function(yt){(0,B.default)(this,ot),!this._isCartesian3(yt)&&(it=![])}.bind(this)),it||"not all array element are Cartesian3, please check"}else return"not a Array"}},{key:"_checkEnd",value:function(lt){return lt===void 0||lt instanceof I.Cartesian3?!![]:"not Cartesian3,please check"}},{key:"_isCartesian3",value:function(lt){return!!(I.defined(lt)&&lt instanceof I.Cartesian3)}},{key:"_checkStartAndEnd",value:function(){return this._checkStart(this.viewStart)===!![]&&this._checkEnd(this.viewEnd)===!![]}},{key:"setViewStart",value:function(lt){var ot=this._checkStart(lt);typeof ot=="string"?M.warn(ot):(lt=lt||[],this.viewStart=lt)}},{key:"setViewEnd",value:function(lt){var ot=this._checkEnd(lt);lt===void 0||typeof ot!="string"?this.viewEnd=lt:M.warn(ot)}},{key:"drawPoint",value:function(lt){var ot=this;this.drawControl.startDraw({drawtype:"point",success:function(yt){return(0,B.default)(this,ot),lt(yt)}.bind(this)})}},{key:"drawLine",value:function(){var lt=this;this.clear(),this.drawControl.startDraw({drawtype:"polyline",config:{maxPointNum:2},success:function(it){(0,B.default)(this,lt);var yt=it.polyline.positions.getValue(),Ot=[yt[0]],St=yt[1];this.start(Ot,St)}.bind(this)})}},{key:"refresh",value:function(){this.start()}},{key:"start",value:function(lt,ot){if(lt&&this.setViewStart(lt),ot&&this.setViewEnd(ot),this._checkStartAndEnd()){this.liveModeStart(this.viewStart,this.viewEnd);var it=this.viewStart[this.viewStart.length-1],yt=I.Cartographic.fromCartesian(it).height;this.obAltitude=yt,this.callback&&this.callback()}else M.warn("one of [viewStart] and [viewEnd] is not available,please check")}},{key:"clear",value:function(){var lt=this.prop.dataSource;this.clearDraw(),lt.entities.removeAll()}},{key:"destroy",value:function(){var lt=this.prop,ot=lt.viewer,it=lt.dataSource;ot.dataSources.contains(it)&&ot.dataSources.remove(it)}},{key:"liveModeStart",value:function(lt,ot){var it=this;this.clear(),this.timeout&&clearTimeout(this.timeout),lt=(0,u.default)(lt).call(lt,function(yt){(0,B.default)(this,it);var Ot=wt.upPosition(this.prop.viewer,yt.clone(),this.obHeight||0);return this._dL(yt,Ot,I.Color.YELLOW,!![]),Ot}.bind(this)),this.timeout=setTimeout(function(){var yt=this;return(0,B.default)(this,it),lt.forEach(function(Ot){return(0,B.default)(this,yt),this.sight(Ot,ot)}.bind(this))}.bind(this),0)}},{key:"sight",value:function(lt,ot){var it=this.prop.viewer,yt=wt.cartesianToLonLatHeight(lt),Ot=wt.cartesianToLonLatHeight(ot),St=I.Cartesian3.fromDegrees(yt[0],yt[1],yt[2]),Gt=I.Cartesian3.fromDegrees(Ot[0],Ot[1],Ot[2]),Ht=I.Cartesian3.normalize(I.Cartesian3.subtract(Gt,St,new I.Cartesian3),new I.Cartesian3),Kt=new I.Ray(St,Ht),Jt=it.scene.pickFromRay(Kt);I.defined(Jt)&&(I.defined(Jt.position)&&this._dP(Jt.position,I.Color.YELLOW),this._dpOb(St),this._dL(St,Jt.position,I.Color.GREEN),this._dL(Jt.position,Gt,I.Color.RED))}},{key:"_dpOb",value:function(lt){var ot=this.prop,it=ot.dataSource,yt=ot.viewer,Ot=new I.Entity({position:lt,label:{text:"\u89C2\u5BDF\u70B9",font:"30px sans-serif",scale:.5,distanceDisplayCondition:new I.DistanceDisplayCondition(5,1e4),verticalOrigin:I.VerticalOrigin.BOTTOM,pixelOffset:{x:0,y:-3}}});it.entities.add(Ot)}},{key:"_dP",value:function(lt,ot){var it=this.prop,yt=it.dataSource,Ot=it.viewer,St=new I.Entity({position:lt,point:{color:ot,pixelSize:10}});yt.entities.add(St)}},{key:"_dL",value:function(lt,ot,it){var yt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:![],Ot=this.prop.dataSource;I.defined(lt)&&I.defined(ot)&&Ot.entities.add({polyline:{depthFailMaterial:this.depthFailMaterial,positions:[lt,ot],width:4,material:yt?new I.PolylineDashMaterialProperty({color:it}):it}})}}]),gt}(At);z.VisibleAnalysis=Nt;var Lt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,E.default)(this,gt),dt=dt||{},dt.type="viewShed",dt.drawConfig=!![],ft.call(this,dt)}return(0,N.default)(gt,[{key:"__makeTemplateObject",value:function(lt,ot){return Object.defineProperty?Object.defineProperty(lt,"raw",{value:ot}):lt.raw=ot,lt}},{key:"glsl",value:function(lt){return lt.toString()}},{key:"init",value:function(){var lt=this.prop.viewer;this.enabled=!![],this.softShadows=![],this.direction=0,this.pitch=0,this.horizontalViewAngle=90,this.verticalViewAngle=30,this.visibleAreaColor=I.Color.GREEN,this.invisibleAreaColor=I.Color.RED,this.cueLineColor=I.Color.DODGERBLUE,this.visualRange=1e3,this.size=2048,this.originShadowMap=lt.scene.shadowMap}},{key:"_isCartesian3",value:function(lt){return!!(I.defined(lt)&&lt instanceof I.Cartesian3)}},{key:"start",value:function(lt,ot){if(this._isCartesian3(lt)&&this._isCartesian3(ot)){var it=this.setParamWithStartAndEnd(lt,ot);this.setParam(it)}else M.warn("param not available")}},{key:"clear",value:function(){var lt=this.prop.viewer;this.pyramid&&(lt.entities.removeById(this.pyramid.id),this.pyramid=null),this.postStage&&(lt.scene.postProcessStages.remove(this.postStage),this.postStage=null),this.frustumOutline&&lt.scene.primitives.remove(this.frustumOutline),lt.scene.shadowMap=this.originShadowMap}},{key:"destroy",value:function(){this.clear(),this.clearDraw()}},{key:"computeCorseAngle",value:function(lt,ot){var it=I.Transforms.eastNorthUpToFixedFrame(lt),yt=I.Matrix4.inverse(it,new I.Matrix4),Ot=I.Matrix4.multiplyByPoint(yt,lt,new I.Cartesian3),St=I.Matrix4.multiplyByPoint(yt,ot,new I.Cartesian3),Gt=Math.atan2(St.y-Ot.y,St.x-Ot.x),Ht=Gt*(180/Math.PI);return Ht=90-Ht,Ht<0&&(Ht=Ht+360),Ht}},{key:"computePitchAngle",value:function(lt,ot){var it=I.Transforms.eastNorthUpToFixedFrame(lt),yt=I.Matrix4.inverse(it,new I.Matrix4),Ot=I.Matrix4.multiplyByPoint(yt,lt,new I.Cartesian3),St=I.Matrix4.multiplyByPoint(yt,ot,new I.Cartesian3),Gt=Math.sqrt(Math.pow(St.x-Ot.x,2)+Math.pow(St.y-Ot.y,2)),Ht=wt.cartesianToLonLatHeight(lt)[2]-wt.cartesianToLonLatHeight(ot)[2],Kt=0;Gt!==0&&(Kt=(0,l.default)(Ht/Gt));var Jt=Kt*(180/Math.PI);return Math.abs(Jt)}},{key:"drawLine",value:function(lt){var ot=this;this.drawControl.startDraw({drawtype:"polyline",config:{maxPointNum:2},style:{width:0},success:function(Ht){return(0,B.default)(this,ot),lt(Ht)}.bind(this)});var it=this.drawControl.drawCtrl.polyline,yt=it.getHandler(),Ot=this,St=![];yt.setInputAction(function(Gt){var Ht=(0,Z.getCurrentMousePosition)(it.viewer.scene,Gt.position,it.entity);Ht&&(St&&it._positions_draw.pop(),St=![],it.entity.attribute&&it.entity.attribute.config&&it.entity.attribute.config.addHeight&&(Ht=addPositionsHeight(Ht,it.entity.attribute.config.addHeight)),it._positions_draw.push(Ht),it._positions_draw.length>=it._maxPointNum&&it.disable())},2),yt.removeInputAction(7),yt.setInputAction(function(Gt){it._positions_draw.length<=1?it.tooltip.showAt(Gt.endPosition,$.message.draw.polyline.start):it._positions_draw.length<it._minPointNum?it.tooltip.showAt(Gt.endPosition,$.message.draw.polyline.cont):it._positions_draw.length>=it._maxPointNum?it.tooltip.showAt(Gt.endPosition,$.message.draw.polyline.end2):it.tooltip.showAt(Gt.endPosition,$.message.draw.polyline.end);var Ht=(0,Z.getCurrentMousePosition)(it.viewer.scene,Gt.endPosition,it.entity);if(Ht&&(St&&it._positions_draw.pop(),St=!![],it._positions_draw.push(Ht),it._positions_draw.length==2)){var Kt=it._positions_draw[0],Jt=it._positions_draw[1],te=Ot.setParamWithStartAndEnd(Kt,Jt),ie=Ot.prop.viewer,oe=Ot.pyramid&&ie.entities.contains(Ot.pyramid);if(oe){var he=te||{},ne=he.direction,ce=ne===void 0?Ot.direction:ne,ge=he.pitch,Ae=ge===void 0?Ot.pitch:ge,It=he.visualRange,Wt=It===void 0?Ot.visualRange:It,_t=he.viewPosition,ee=he.horizontalViewAngle,re=ee===void 0?Ot.horizontalViewAngle:ee,de=he.verticalViewAngle,Se=de===void 0?Ot.verticalViewAngle:de,Pe=he.invisibleAreaColor,De=Pe===void 0?Ot.invisibleAreaColor:Pe,Ie=he.visibleAreaColor,pe=Ie===void 0?Ot.visibleAreaColor:Ie;Ot.viewPosition=_t,Ot.direction=ce%360,Ot.pitch=Ae,Ot.visualRange=Wt,Ot.horizontalViewAngle=re,Ot.verticalViewAngle=Se,Ot.invisibleAreaColor=De,Ot.visibleAreaColor=pe,Ot._getVisualPyramidEllipsoid()}else te.onlyDrawPyramid=!![],Ot.setParam(te)}},15)}},{key:"setParamWithStartAndEnd",value:function(lt,ot){var it=this.computeCorseAngle(lt,ot).toFixed(0),yt=this.computePitchAngle(lt,ot).toFixed(2)*2,Ot={direction:Number(it),horizontalViewAngle:90,verticalViewAngle:Number(yt),visualRange:Number(wt.distance(lt,ot).toFixed(0)),viewPosition:lt};return Ot}},{key:"setParam",value:function(lt){var ot=lt||{},it=ot.direction,yt=it===void 0?this.direction:it,Ot=ot.pitch,St=Ot===void 0?this.pitch:Ot,Gt=ot.visualRange,Ht=Gt===void 0?this.visualRange:Gt,Kt=ot.viewPosition,Jt=ot.horizontalViewAngle,te=Jt===void 0?this.horizontalViewAngle:Jt,ie=ot.verticalViewAngle,oe=ie===void 0?this.verticalViewAngle:ie,he=ot.invisibleAreaColor,ne=he===void 0?this.invisibleAreaColor:he,ce=ot.visibleAreaColor,ge=ce===void 0?this.visibleAreaColor:ce;Kt&&(this.viewPosition=Kt,this.direction=yt%360,this.pitch=St,this.visualRange=Ht,this.horizontalViewAngle=te,this.verticalViewAngle=oe,this.invisibleAreaColor=ne,this.visibleAreaColor=ge,!this.pyramid&&this._setVisualPyramid(),!lt.onlyDrawPyramid&&(!this.lightCamera&&this._setLightCamera(),this.pyramid.ellipsoid=this._getVisualPyramidEllipsoid(),this._setCameraParams(),this._updateViewShed()))}},{key:"_getVisualPyramidEllipsoid",value:function(){var lt=this,ot=I.Color.fromCssColorString;return this.innerRange=this.visualRange*.001,this.halfClock=this.horizontalViewAngle/2,this.halfCone=this.verticalViewAngle/2,this.ellipsoid=this.ellipsoid||new I.EllipsoidGraphics({innerRadii:new I.CallbackProperty(function(){(0,B.default)(this,lt);var it=this.visualRange*.001||.001;return new I.Cartesian3(it,it,it)}.bind(this),![]),radii:new I.CallbackProperty(function(){(0,B.default)(this,lt);var it=this.visualRange||.1;return new I.Cartesian3(it,it,it)}.bind(this),![]),minimumClock:new I.CallbackProperty(function(){return(0,B.default)(this,lt),I.Math.toRadians(90-this.direction-this.halfClock)}.bind(this),![]),maximumClock:new I.CallbackProperty(function(){return(0,B.default)(this,lt),I.Math.toRadians(90-this.direction+this.halfClock)}.bind(this),![]),minimumCone:new I.CallbackProperty(function(){return(0,B.default)(this,lt),I.Math.toRadians(90-this.pitch-this.halfCone)}.bind(this),![]),maximumCone:new I.CallbackProperty(function(){return(0,B.default)(this,lt),I.Math.toRadians(90-this.pitch+this.halfCone)}.bind(this),![]),fill:![],outline:!![],outlineColor:new I.CallbackProperty(function(){(0,B.default)(this,lt);var it=this.cueLineColor;return typeof it=="string"?it=ot(it):!it instanceof I.Color&&(it=I.Color.BLUE),it}.bind(this),![]),subdivisions:256,stackPartitions:64,slicePartitions:64}),this.ellipsoid}},{key:"_setVisualPyramid",value:function(){var lt=this.prop.viewer,ot=new I.Entity({position:this.viewPosition,ellipsoid:this._getVisualPyramidEllipsoid(),label:{text:"\u89C2\u5BDF\u70B9",font:"120px sans-serif",scale:.125,distanceDisplayCondition:new I.DistanceDisplayCondition(5,1e4),verticalOrigin:I.VerticalOrigin.BOTTOM,pixelOffset:{x:0,y:-3}}});this.pyramid=lt.entities.add(ot)}},{key:"_setLightCamera",value:function(){var lt=this.prop.viewer;this.lightCamera=new I.Camera(lt.scene),this.lightCamera.position=this.viewPosition}},{key:"_setShadowMap",value:function(){var lt=this.prop.viewer;this.shadowMap=new I.ShadowMap({context:lt.scene.context,lightCamera:this.lightCamera,enabled:this.enabled,isPointLight:!![],pointLightRadius:this.visualRange,cascadesEnabled:![],size:this.size,softShadows:this.softShadows,normalOffset:![],fromLightSource:![]}),this.shadowMap._pointBias.depthBias=.005,lt.scene.shadowMap=this.shadowMap}},{key:"_updateViewShed",value:function(){this.clear(),this._setVisualPyramid(),this._setLightCamera(),this._setCameraParams(),this._setShadowMap(),this._setVisibleAreaColor(),this._setPostStage()}},{key:"_setCameraParams",value:function(){this.visualRange<=0&&(this.visualRange=1),this.lightCamera.frustum.near=.001*this.visualRange,this.lightCamera.frustum.far=this.visualRange;var lt=I.Math.toRadians(this.horizontalViewAngle),ot=I.Math.toRadians(this.verticalViewAngle),it=this.visualRange*Math.tan(lt/2)*2/(this.visualRange*Math.tan(ot/2)*2);this.lightCamera.frustum.aspectRatio=it,lt>ot?this.lightCamera.frustum.fov=lt:this.lightCamera.frustum.fov=ot,this.lightCamera.setView({destination:this.viewPosition,orientation:{heading:I.Math.toRadians(this.direction||0),pitch:I.Math.toRadians(this.pitch||0),roll:0}})}},{key:"_setPostStage",value:function(){var lt,ot=this.prop.viewer,it=this,yt=this.glsl(this.__makeTemplateObject([`
    #define USE_CUBE_MAP_SHADOW true
uniform sampler2D colorTexture;
// \u6DF1\u5EA6\u7EB9\u7406
uniform sampler2D depthTexture;
// \u7EB9\u7406\u5750\u6807
varying vec2 v_textureCoordinates;

uniform mat4 camera_projection_matrix;

uniform mat4 camera_view_matrix;
// \u89C2\u6D4B\u8DDD\u79BB
uniform float far;
//\u9634\u5F71
uniform samplerCube shadowMap_textureCube;

uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;

struct zx_shadowParameters
{
    vec3 texCoords;
    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};

float czm_shadowVisibility(samplerCube shadowMap, zx_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}

vec4 getPositionEC(){
  return czm_windowToEyeCoordinates(gl_FragCoord);
}

vec3 getNormalEC(){
    return vec3(1.);
  }

  vec4 toEye(in vec2 uv,in float depth){
    vec2 xy=vec2((uv.x*2.-1.),(uv.y*2.-1.));
    vec4 posInCamera=czm_inverseProjection*vec4(xy,depth,1.);
    posInCamera=posInCamera/posInCamera.w;
    return posInCamera;
  }

  vec3 pointProjectOnPlane(in vec3 planeNormal,in vec3 planeOrigin,in vec3 point){
    vec3 v01=point-planeOrigin;
    float d=dot(planeNormal,v01);
    return(point-planeNormal*d);
  }

  float getDepth(in vec4 depth){
    float z_window=czm_unpackDepth(depth);
    z_window=czm_reverseLogDepth(z_window);
    float n_range=czm_depthRange.near;
    float f_range=czm_depthRange.far;
    return(2.*z_window-n_range-f_range)/(f_range-n_range);
  }

  float shadow( in vec4 positionEC ){
    vec3 normalEC=getNormalEC();
    zx_shadowParameters shadowParameters;
    shadowParameters.texelStepSize=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
    shadowParameters.depthBias=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
    shadowParameters.normalShadingSmooth=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
    shadowParameters.darkness=shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
    vec3 directionEC=positionEC.xyz-shadowMap_lightPositionEC.xyz;
    float distance=length(directionEC);
    directionEC=normalize(directionEC);
    float radius=shadowMap_lightPositionEC.w;
    if(distance>radius)
    {
      return 2.0;
    }
    vec3 directionWC=czm_inverseViewRotation*directionEC;

    shadowParameters.depth=distance/radius-0.0003;
    shadowParameters.nDotL=clamp(dot(normalEC,-directionEC),0.,1.);

    shadowParameters.texCoords=directionWC;
    float visibility=czm_shadowVisibility(shadowMap_textureCube,shadowParameters);
    return visibility;
  }

  bool visible(in vec4 result)
  {
    result.x/=result.w;
    result.y/=result.w;
    result.z/=result.w;
    return result.x>=-1.&&result.x<=1.&&result.y>=-1.&&result.y<=1.&&result.z>=-1.&&result.z<=1.;
  }

  void main(){
    // \u5F97\u5230\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u5F69\u8272\u7EB9\u7406,\u7EB9\u7406\u5750\u6807)
    gl_FragColor=texture2D(colorTexture,v_textureCoordinates);
    // \u6DF1\u5EA6 = (\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u6DF1\u5EA6\u7EB9\u7406,\u7EB9\u7406\u5750\u6807))
    float depth=getDepth(texture2D(depthTexture,v_textureCoordinates));
    // \u89C6\u89D2 = (\u7EB9\u7406\u5750\u6807,\u6DF1\u5EA6)
    vec4 viewPos=toEye(v_textureCoordinates,depth);
    //\u4E16\u754C\u5750\u6807
    vec4 wordPos=czm_inverseView*viewPos;
    // \u865A\u62DF\u76F8\u673A\u4E2D\u5750\u6807
    vec4 vcPos=camera_view_matrix*wordPos;
    float near=.001*far;
    float dis=length(vcPos.xyz);
    if(dis>near&&dis<far){
      //\u900F\u89C6\u6295\u5F71
      vec4 posInEye=camera_projection_matrix*vcPos;
      // \u53EF\u89C6\u533A\u989C\u8272
      vec4 v_color=vec4(0.,1.,0.,.5);
      vec4 inv_color=vec4(1.,0.,0.,.5);
      if(visible(posInEye)){
        float vis=shadow(viewPos);
        if(vis>0.3){
          gl_FragColor=mix(gl_FragColor,v_color,.5);
        } else{
          gl_FragColor=mix(gl_FragColor,inv_color,.5);
        }
      }
    }
  }
`],[`
    #define USE_CUBE_MAP_SHADOW true
uniform sampler2D colorTexture;
// \u6DF1\u5EA6\u7EB9\u7406
uniform sampler2D depthTexture;
// \u7EB9\u7406\u5750\u6807
varying vec2 v_textureCoordinates;

uniform mat4 camera_projection_matrix;

uniform mat4 camera_view_matrix;
// \u89C2\u6D4B\u8DDD\u79BB
uniform float far;
//\u9634\u5F71
uniform samplerCube shadowMap_textureCube;

uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;

struct zx_shadowParameters
{
    vec3 texCoords;
    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};

float czm_shadowVisibility(samplerCube shadowMap, zx_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}

vec4 getPositionEC(){
  return czm_windowToEyeCoordinates(gl_FragCoord);
}

vec3 getNormalEC(){
    return vec3(1.);
  }

  vec4 toEye(in vec2 uv,in float depth){
    vec2 xy=vec2((uv.x*2.-1.),(uv.y*2.-1.));
    vec4 posInCamera=czm_inverseProjection*vec4(xy,depth,1.);
    posInCamera=posInCamera/posInCamera.w;
    return posInCamera;
  }

  vec3 pointProjectOnPlane(in vec3 planeNormal,in vec3 planeOrigin,in vec3 point){
    vec3 v01=point-planeOrigin;
    float d=dot(planeNormal,v01);
    return(point-planeNormal*d);
  }

  float getDepth(in vec4 depth){
    float z_window=czm_unpackDepth(depth);
    z_window=czm_reverseLogDepth(z_window);
    float n_range=czm_depthRange.near;
    float f_range=czm_depthRange.far;
    return(2.*z_window-n_range-f_range)/(f_range-n_range);
  }

  float shadow( in vec4 positionEC ){
    vec3 normalEC=getNormalEC();
    zx_shadowParameters shadowParameters;
    shadowParameters.texelStepSize=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
    shadowParameters.depthBias=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
    shadowParameters.normalShadingSmooth=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
    shadowParameters.darkness=shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
    vec3 directionEC=positionEC.xyz-shadowMap_lightPositionEC.xyz;
    float distance=length(directionEC);
    directionEC=normalize(directionEC);
    float radius=shadowMap_lightPositionEC.w;
    if(distance>radius)
    {
      return 2.0;
    }
    vec3 directionWC=czm_inverseViewRotation*directionEC;

    shadowParameters.depth=distance/radius-0.0003;
    shadowParameters.nDotL=clamp(dot(normalEC,-directionEC),0.,1.);

    shadowParameters.texCoords=directionWC;
    float visibility=czm_shadowVisibility(shadowMap_textureCube,shadowParameters);
    return visibility;
  }

  bool visible(in vec4 result)
  {
    result.x/=result.w;
    result.y/=result.w;
    result.z/=result.w;
    return result.x>=-1.&&result.x<=1.&&result.y>=-1.&&result.y<=1.&&result.z>=-1.&&result.z<=1.;
  }

  void main(){
    // \u5F97\u5230\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u5F69\u8272\u7EB9\u7406,\u7EB9\u7406\u5750\u6807)
    gl_FragColor=texture2D(colorTexture,v_textureCoordinates);
    // \u6DF1\u5EA6 = (\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u6DF1\u5EA6\u7EB9\u7406,\u7EB9\u7406\u5750\u6807))
    float depth=getDepth(texture2D(depthTexture,v_textureCoordinates));
    // \u89C6\u89D2 = (\u7EB9\u7406\u5750\u6807,\u6DF1\u5EA6)
    vec4 viewPos=toEye(v_textureCoordinates,depth);
    //\u4E16\u754C\u5750\u6807
    vec4 wordPos=czm_inverseView*viewPos;
    // \u865A\u62DF\u76F8\u673A\u4E2D\u5750\u6807
    vec4 vcPos=camera_view_matrix*wordPos;
    float near=.001*far;
    float dis=length(vcPos.xyz);
    if(dis>near&&dis<far){
      //\u900F\u89C6\u6295\u5F71
      vec4 posInEye=camera_projection_matrix*vcPos;
      // \u53EF\u89C6\u533A\u989C\u8272
      vec4 v_color=vec4(0.,1.,0.,.5);
      vec4 inv_color=vec4(1.,0.,0.,.5);
      if(visible(posInEye)){
        float vis=shadow(viewPos);
        if(vis>0.3){
          gl_FragColor=mix(gl_FragColor,v_color,.5);
        } else{
          gl_FragColor=mix(gl_FragColor,inv_color,.5);
        }
      }
    }
  }
`])),Ot=this.v_color||"(0.,1.,0.,.5)",St=this.inv_color||"(1., 0., 0., .5)",Gt=(0,r.default)(lt=`
    #define USE_CUBE_MAP_SHADOW true
uniform sampler2D colorTexture;
// \u6DF1\u5EA6\u7EB9\u7406
uniform sampler2D depthTexture;
// \u7EB9\u7406\u5750\u6807
varying vec2 v_textureCoordinates;

uniform mat4 camera_projection_matrix;

uniform mat4 camera_view_matrix;
// \u89C2\u6D4B\u8DDD\u79BB
uniform float far;
//\u9634\u5F71
uniform samplerCube shadowMap_textureCube;

uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;

struct zx_shadowParameters
{
    vec3 texCoords;
    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};

float czm_shadowVisibility(samplerCube shadowMap, zx_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoords;

    depth -= depthBias;
    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
}

vec4 getPositionEC(){
  return czm_windowToEyeCoordinates(gl_FragCoord);
}

vec3 getNormalEC(){
    return vec3(1.);
  }

  vec4 toEye(in vec2 uv,in float depth){
    vec2 xy=vec2((uv.x*2.-1.),(uv.y*2.-1.));
    vec4 posInCamera=czm_inverseProjection*vec4(xy,depth,1.);
    posInCamera=posInCamera/posInCamera.w;
    return posInCamera;
  }

  vec3 pointProjectOnPlane(in vec3 planeNormal,in vec3 planeOrigin,in vec3 point){
    vec3 v01=point-planeOrigin;
    float d=dot(planeNormal,v01);
    return(point-planeNormal*d);
  }

  float getDepth(in vec4 depth){
    float z_window=czm_unpackDepth(depth);
    z_window=czm_reverseLogDepth(z_window);
    float n_range=czm_depthRange.near;
    float f_range=czm_depthRange.far;
    return(2.*z_window-n_range-f_range)/(f_range-n_range);
  }

  float shadow( in vec4 positionEC ){
    vec3 normalEC=getNormalEC();
    zx_shadowParameters shadowParameters;
    shadowParameters.texelStepSize=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
    shadowParameters.depthBias=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
    shadowParameters.normalShadingSmooth=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
    shadowParameters.darkness=shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
    vec3 directionEC=positionEC.xyz-shadowMap_lightPositionEC.xyz;
    float distance=length(directionEC);
    directionEC=normalize(directionEC);
    float radius=shadowMap_lightPositionEC.w;
    if(distance>radius)
    {
      return 2.0;
    }
    vec3 directionWC=czm_inverseViewRotation*directionEC;

    shadowParameters.depth=distance/radius-0.0003;
    shadowParameters.nDotL=clamp(dot(normalEC,-directionEC),0.,1.);

    shadowParameters.texCoords=directionWC;
    float visibility=czm_shadowVisibility(shadowMap_textureCube,shadowParameters);
    return visibility;
  }

  bool visible(in vec4 result)
  {
    result.x/=result.w;
    result.y/=result.w;
    result.z/=result.w;
    return result.x>=-1.&&result.x<=1.&&result.y>=-1.&&result.y<=1.&&result.z>=-1.&&result.z<=1.;
  }

  void main(){
    // \u5F97\u5230\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u5F69\u8272\u7EB9\u7406,\u7EB9\u7406\u5750\u6807)
    gl_FragColor=texture2D(colorTexture,v_textureCoordinates);
    // \u6DF1\u5EA6 = (\u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u6DF1\u5EA6\u7EB9\u7406,\u7EB9\u7406\u5750\u6807))
    float depth=getDepth(texture2D(depthTexture,v_textureCoordinates));
    // \u89C6\u89D2 = (\u7EB9\u7406\u5750\u6807,\u6DF1\u5EA6)
    vec4 viewPos=toEye(v_textureCoordinates,depth);
    //\u4E16\u754C\u5750\u6807
    vec4 wordPos=czm_inverseView*viewPos;
    // \u865A\u62DF\u76F8\u673A\u4E2D\u5750\u6807
    vec4 vcPos=camera_view_matrix*wordPos;
    float near=.001*far;
    float dis=length(vcPos.xyz);
    if(dis>near&&dis<far){
      //\u900F\u89C6\u6295\u5F71
      vec4 posInEye=camera_projection_matrix*vcPos;
      // \u53EF\u89C6\u533A\u989C\u8272
      vec4 v_color=vec4`.concat(Ot,`;
      vec4 inv_color=vec4`)).call(lt,St,`;
      if(visible(posInEye)){
        float vis=shadow(viewPos);
        if(vis>0.3){
          gl_FragColor=mix(gl_FragColor,v_color,v_color.w);
        } else{
          gl_FragColor=mix(gl_FragColor,inv_color,inv_color.w);
        }
      }
    }
  }
`),Ht=new I.PostProcessStage({fragmentShader:Gt,uniforms:{camera_projection_matrix:this.lightCamera.frustum.projectionMatrix,camera_view_matrix:this.lightCamera.viewMatrix,far:function(){return it.visualRange},shadowMap_textureCube:function(){return it.shadowMap.update((0,s.default)(ot.scene,"_frameState")),(0,s.default)(it.shadowMap,"_shadowMapTexture")},shadowMap_matrix:function(){return it.shadowMap.update((0,s.default)(ot.scene,"_frameState")),(0,s.default)(it.shadowMap,"_shadowMapMatrix")},shadowMap_lightPositionEC:function(){return it.shadowMap.update((0,s.default)(ot.scene,"_frameState")),(0,s.default)(it.shadowMap,"_lightPositionEC")},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){it.shadowMap.update((0,s.default)(ot.scene,"_frameState"));var Jt=it.shadowMap._pointBias;return I.Cartesian4.fromElements(Jt.normalOffsetScale,it.shadowMap._distance,it.shadowMap.maximumDistance,0,new I.Cartesian4)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){it.shadowMap.update((0,s.default)(ot.scene,"_frameState"));var Jt=it.shadowMap._pointBias,te=new I.Cartesian2,ie=te;return ie.x=1/it.shadowMap._textureSize.x,ie.y=1/it.shadowMap._textureSize.y,I.Cartesian4.fromElements(ie.x,ie.y,Jt.depthBias,Jt.normalShadingSmooth,new I.Cartesian4)}}});this.postStage=ot.scene.postProcessStages.add(Ht)}},{key:"drawViewCentrum",value:function(){var lt=this.prop.viewer,ot=new I.Cartesian3,it=new I.Matrix3,yt=new I.Quaternion,Ot=this.lightCamera.positionWC,St=this.lightCamera.directionWC,Gt=this.lightCamera.upWC,Ht=this.lightCamera.rightWC;Ht=I.Cartesian3.negate(Ht,ot);var Kt=it;I.Matrix3.setColumn(Kt,0,Ht,Kt),I.Matrix3.setColumn(Kt,1,Gt,Kt),I.Matrix3.setColumn(Kt,2,St,Kt);var Jt=I.Quaternion.fromRotationMatrix(Kt,yt),te=new I.GeometryInstance({geometry:new I.FrustumOutlineGeometry({frustum:this.lightCamera.frustum,origin:this.viewPosition,orientation:Jt}),id:Math.random().toString(36).substr(2),attributes:{color:I.ColorGeometryInstanceAttribute.fromColor(I.Color.RED),show:new I.ShowGeometryInstanceAttribute(!![])}});this.frustumOutline=lt.scene.primitives.add(new I.Primitive({geometryInstances:[te],appearance:new I.PerInstanceColorAppearance({flat:!![],translucent:![]})}))}},{key:"_setVisibleAreaColor",value:function(){var lt,ot,it,yt,Ot,St,Gt,Ht,Kt=this.visibleAreaColor||I.Color.GREEN,Jt=this.invisibleAreaColor||I.Color.RED,te=[Kt.red,Kt.green,Kt.blue,Kt.alpha],ie=te[0],oe=te[1],he=te[2],ne=te[3],ce=[Jt.red,Jt.green,Jt.blue,Jt.alpha],ge=ce[0],Ae=ce[1],It=ce[2],Wt=ce[3];ne=ne==0?0:.5,Wt=Wt==0?0:.5,Gt=(0,r.default)(lt=(0,r.default)(ot=(0,r.default)(it="(".concat(ie.toFixed(2),",")).call(it,oe.toFixed(2),",")).call(ot,he.toFixed(2),",")).call(lt,ne.toFixed(1),")"),Ht=(0,r.default)(yt=(0,r.default)(Ot=(0,r.default)(St="(".concat(ge.toFixed(2),",")).call(St,Ae.toFixed(2),",")).call(Ot,It.toFixed(2),",")).call(yt,Wt.toFixed(1),")"),this.v_color=Gt,this.inv_color=Ht}}]),gt}(At);z.ViewShedAnalysis=Lt;var Rt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,E.default)(this,gt),dt=dt||{},dt.type="sun",ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){this.sunTime={startTime:"2020-12-31",endTime:"2021-01-01"};var lt=this.prop.viewer,ot=this;this._sun=function(){var it=I.JulianDate.addHours(lt.clock.currentTime,8,new I.JulianDate);it=I.JulianDate.toGregorianDate(it);var yt=Ot(it.hour)+":"+Ot(it.minute);ot.ctime=yt,ot.isoTime=I.JulianDate.toDate(lt.clock.currentTime.clone()),ot.foo&&lt.clock.shouldAnimate&&ot.foo();function Ot(St){return St<10?"0"+St.toString():St.toString()}}}},{key:"sunStop",value:function(){var lt=this.prop.viewer;lt.clock.shouldAnimate=![],lt.clock.onTick.removeEventListener(this._sun)}},{key:"start",value:function(lt){var ot=this.prop.viewer;if(lt){var it=I.JulianDate.fromDate(new Date(this.sunTime.startTime)),yt=I.JulianDate.fromDate(new Date(this.sunTime.endTime)),Ot;if(Ot=I.JulianDate.compare(yt,it),Ot<=0){M.error("\u65F6\u95F4\u8BBE\u7F6E\u5931\u8D25\uFF0C\u8D77\u70B9\u9700\u5728\u7EC8\u70B9\u524D");return}ot.clock.startTime=it,ot.clock.currentTime=it,ot.clock.stopTime=yt,ot.clock.clockRange=I.ClockRange.LOOP_STOP,ot.clock.clockStep=I.ClockStep.SYSTEM_CLOCK_MULTIPLIER,this.sunStop(),ot.clock.shouldAnimate=!![],ot.clock.onTick.addEventListener(this._sun)}else this.clear()}},{key:"clear",value:function(){this.sunStop()}},{key:"destroy",value:function(){}},{key:"setTime",value:function(lt){var ot=lt||{},it=ot.start,yt=ot.end;it&&(this.sunTime.startTime=it),yt&&(this.sunTime.endTime=yt)}},{key:"setTerrainShade",value:function(lt){var ot=this.prop.viewer;ot.scene.globe.shadows=lt?I.ShadowMode.ENABLED:I.ShadowMode.DISABLED}},{key:"setShadowMode",value:function(lt){var ot=this.prop.viewer;ot.shadows=!!lt,ot.scene.globe.enableLighting=!!lt}},{key:"setTimeMultiplier",value:function(lt,ot){var it=this.prop.viewer;return ot?it.clock.multiplier+=lt:it.clock.multiplier=lt,it.clock.multiplier}}]),gt}(At);z.SunAnalysis=Rt;var Tt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,E.default)(this,gt),dt=dt||{},dt.type="height",dt.drawConfig={hasEdit:![]},ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){var lt=this;this.entityLabel=null,this.curEnt=null,this.warningShow=!![],this.drawControl.on(G.EditStart,function(ot){(0,B.default)(this,lt),this.curEnt=ot.entity}.bind(this)),this.drawControl.on(G.EditMovePoint,function(ot){(0,B.default)(this,lt);var it=ot.entity.polygon.extrudedHeight&&ot.entity.polygon.extrudedHeight.getValue();this.addLabel(ot.entity,it),this.addWarningVolumn(ot.entity)}.bind(this)),this.drawControl.on(G.EditStop,function(ot){(0,B.default)(this,lt),this.curEnt=ot.entity}.bind(this)),this.drawControl.on("delete-feature",function(ot){(0,B.default)(this,lt),ot._name==="controlMajor"&&this.clear()}.bind(this))}},{key:"addLabel",value:function(lt,ot){lt=lt||this.curEnt;var it=this.prop.dataSource,yt=lt.polygon.hierarchy.getValue().positions,Ot=lt.polygon.extrudedHeight&&lt.polygon.extrudedHeight.getValue(),St=Ot.toFixed(2),Gt=(0,Z.getMaxHeight)(yt),Ht="\u6D77\u62D4\u9AD8\u5EA6\uFF1A"+St+`\u7C73
\u5730\u576A\u9AD8\u5EA6\uFF1A`+Gt+"\u7C73";this.height1=St,this.height2=Gt;var Kt=(0,W.toGeoJSON)(lt),Jt=H.centerOfMass(Kt);if(!(Jt==null||Jt.geometry==null||Jt.geometry.coordinates==null||Jt.geometry.coordinates.length<2)){var te=I.Cartesian3.fromDegrees(Jt.geometry.coordinates[0],Jt.geometry.coordinates[1],Ot+20);this._removeLabel(),this.entityLabel=it.entities.add({position:te,label:{text:Ht,scale:.6,font:"30px \u6977\u4F53",showBackground:!![],horizontalOrigin:I.HorizontalOrigin.CENTER,verticalOrigin:I.VerticalOrigin.BOTTOM,heightReference:I.HeightReference.RELATIVE_TO_GROUND,distanceDisplayCondition:new I.DistanceDisplayCondition(0,5e3),disableDepthTestDistance:5e3}})}}},{key:"addWarningVolumn",value:function(lt){var ot=this,it=this.prop.viewer;it.scene.primitives.remove(this.primitive),this.primitive=null;var yt=lt._attribute.style.extrudedHeight,Ot=lt.polygon.extrudedHeight&&lt.polygon.extrudedHeight.getValue(),St=lt.polygon.hierarchy.getValue().positions,Gt=[];St.forEach(function(Jt,te){(0,B.default)(this,ot),Gt[te]=Jt.clone()}.bind(this));var Ht=new I.PolygonGeometry({polygonHierarchy:new I.PolygonHierarchy(St),extrudedHeight:400,height:Ot}),Kt=I.PolygonGeometry.createGeometry(Ht);Gt.forEach(function(Jt,te){(0,B.default)(this,ot),lt._positions_draw[te]=Jt.clone(),lt.editing._positions_draw[te]=Jt.clone()}.bind(this)),this.primitive=it.scene.primitives.add(new I.ClassificationPrimitive({show:this.warningShow,geometryInstances:new I.GeometryInstance({geometry:Kt,attributes:{color:I.ColorGeometryInstanceAttribute.fromColor(I.Color.fromCssColorString("#f00f").withAlpha(.5)),show:new I.ShowGeometryInstanceAttribute(!![])}}),asynchronous:![],classificationType:I.ClassificationType.CESIUM_3D_TILE}))}},{key:"setWarningShow",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![];this.warningShow=lt,this.primitive&&(this.primitive.show=lt)}},{key:"start",value:function(lt){var ot=this,it=this.prop.viewer,yt=this.extrudedHeight||30;lt?(this.drawControl.hasEdit(!![]),this.drawControl.startDraw({drawtype:"polygon",name:"pol",style:{color:"#0047ab",opacity:.6,extrudedHeight:yt},success:function(St){(0,B.default)(this,ot),St.name="controlMajor",this.addLabel(St,yt),this.addWarningVolumn(St)}.bind(this)})):this.clear()}},{key:"_removeLabel",value:function(){var lt=this.prop.dataSource;this.entityLabel&&lt.entities.remove(this.entityLabel)}},{key:"clear",value:function(){var lt=this.prop.viewer;this.drawControl.hasEdit(![]),this._removeLabel(),this.clearDraw(),this.curEnt=null,lt.scene.primitives.remove(this.primitive),this.primitive=null}},{key:"destroy",value:function(){this.clear()}},{key:"getHeight",value:function(){if(this.curEnt)return this.curEnt.polygon.extrudedHeight}},{key:"setHeight",value:function(lt){if(this.curEnt)if(I.defined(lt)&&typeof lt=="number"){var ot=lt-this.curEnt._attribute.style.extrudedHeight;this.curEnt._attribute.style.extrudedHeight=lt,this.curEnt.polygon.extrudedHeight=this.curEnt.polygon.extrudedHeight+ot,this.addLabel(null,lt),this.addWarningVolumn(this.curEnt)}else M.warn("param [height] should be [number]")}}]),gt}(At);z.ControlHeightAnalysis=Tt;var mt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,E.default)(this,gt),dt=dt||{},dt.type="terrain",dt.drawConfig={hasEdit:![]},ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){var lt=this,ot=I.Cartesian3.fromDegreesArray([120,30,120.001,30,120.001,30.001,120,30.001]);this._smallRegion=new I.PolygonHierarchy(ot),this.drawControl.on(G.DrawAddPoint,function(it){var yt=this;if((0,B.default)(this,lt),it.positions.length==1){var Ot=(0,c.default)(this.drawControl.dataSource.entities),St=this.drawControl.dataSource.entities,Gt=it.entity.id;Ot.forEach(function(Ht){(0,B.default)(this,yt),Ht.id!=Gt&&St.remove(Ht)}.bind(this))}}.bind(this)),this.contourWidth=2,this.contourSpacing=50,this._terrainLegend={elevation:void 0,slope:void 0,aspect:void 0},this._terrainLegendSample={slope:{stop:[0,2,6,15,25],color:["#55e700","#fffb00","#ffd992","#ffb600","#ff2500"],unit:"(\u5355\u4F4D\uFF1A\u5EA6)"},aspect:{stop:[0,.125,.25,.375,.5,.625,.75,.875,1],color:["#34AF00","#AAFF14","#AEE900","#E9E932","#E9E990","#FFAA00","#FF780A","#FF320A","#f00"],unit:"",direction:["\u5317","\u897F\u5317","\u897F","\u897F\u5357","\u5357","\u4E1C\u5357","\u4E1C","\u4E1C\u5317","\u5317"]},elevation:{stop:[0,.045,.1,.15,.37,.54,1],color:["#000000","#2747E0","#D33B7D","#D33038","#FF9742","#ffd700","#ffffff"],unit:"(\u5355\u4F4D\uFF1A\u7C73)"}},this._material={getElevationContourMaterial:function(){return(0,B.default)(this,lt),new I.Material({fabric:{type:"ElevationColorContour",materials:{contourMaterial:{type:"ElevationContour"},elevationRampMaterial:{type:"ElevationRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? elevationRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, elevationRampMaterial.alpha)"}},translucent:![]})}.bind(this),getSlopeContourMaterial:function(){return(0,B.default)(this,lt),new I.Material({fabric:{type:"SlopeColorContour",materials:{contourMaterial:{type:"ElevationContour"},slopeRampMaterial:{type:"SlopeRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? slopeRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, slopeRampMaterial.alpha)"}},translucent:![]})}.bind(this),getAspectContourMaterial:function(){return(0,B.default)(this,lt),new I.Material({fabric:{type:"AspectColorContour",materials:{contourMaterial:{type:"ElevationContour"},aspectRampMaterial:{type:"AspectRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? aspectRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, aspectRampMaterial.alpha)"}},translucent:![]})}.bind(this)}}},{key:"start",value:function(lt){this.updateMaterial(lt)}},{key:"setLegend",value:function(lt,ot){var it=JSON.parse((0,x.default)(ot));this._terrainLegend[lt]=it}},{key:"drawPolygon",value:function(){var lt=this,ot=this,it={fill:!![],fillType:"color",color:"#ffff00",opacity:.6,outlineWidth:3,outlineColor:"#0dd624",outlineOpacity:.6,clampToGround:!![]},yt=function(St){var Gt=this,Ht=St.id,Kt=ot.prop.viewer.scene.globe;if(I.defined(Kt.material)){var Jt,te=(0,u.default)(Jt=Kt.material.regionPolygons._polygons).call(Jt,function(ie){if((0,B.default)(this,Gt),ie._polygonHierarchy.id!==Ht)return ie._polygonHierarchy}.bind(this));Kt.material.regionPolygons=new I.RegionPolygonCollection({polygons:te,enabled:!![]}),ot.hierarchys=te}};this.drawControl.startDraw({drawtype:"polygon",style:it,success:function(St){var Gt=this;(0,B.default)(this,lt);var Ht=St,Kt=Ht.polygon.material.color.getValue();Kt.alpha=0,Ht.polygon.material.color.setValue(Kt);var Jt=this.prop.viewer.scene.globe,te=Ht.polygon.hierarchy.getValue();if(I.defined(Jt.material)){var ie,oe=(0,u.default)(ie=Jt.material.regionPolygons._polygons).call(ie,function(he){return(0,B.default)(this,Gt),he._polygonHierarchy}.bind(this));te.id=Ht.id,oe.push(te),Jt.material.regionPolygons=new I.RegionPolygonCollection({polygons:oe,enabled:!![]}),this.hierarchys=oe}}.bind(this)})}},{key:"updateMaterial",value:function(lt){var ot=this.prop.viewer,it=lt||{},yt=it.shadingUniforms,Ot=yt===void 0?{}:yt,St=it.hasContour,Gt=St===void 0?![]:St,Ht=it.selectedShading,Kt=it.minHeight,Jt=Kt===void 0?-414:Kt,te=it.maxHeight,ie=te===void 0?8777:te,oe=it.contourWidth,he=oe===void 0?2:oe,ne=it.contourSpacing,ce=ne===void 0?50:ne,ge=it.contourColor,Ae=ge===void 0?I.Color.RED.clone():ge,It=ot.scene.globe,Wt,_t;Gt?(Ht==="elevation"?(Wt=this._material.getElevationContourMaterial(),Ot=Wt.materials.elevationRampMaterial.uniforms,Ot.minimumHeight=Jt,Ot.maximumHeight=ie,_t=Wt.materials.contourMaterial.uniforms):Ht==="slope"?(Wt=this._material.getSlopeContourMaterial(),Ot=Wt.materials.slopeRampMaterial.uniforms,_t=Wt.materials.contourMaterial.uniforms):Ht==="aspect"?(Wt=this._material.getAspectContourMaterial(),Ot=Wt.materials.aspectRampMaterial.uniforms,_t=Wt.materials.contourMaterial.uniforms):(Wt=I.Material.fromType("ElevationContour"),_t=Wt.uniforms),_t.width=he,_t.spacing=ce,_t.color=Ae):Ht==="elevation"?(Wt=I.Material.fromType("ElevationRamp"),Ot=Wt.uniforms,Ot.minimumHeight=Jt,Ot.maximumHeight=ie):Ht==="slope"?(Wt=I.Material.fromType("SlopeRamp"),Ot=Wt.uniforms):Ht==="aspect"&&(Wt=I.Material.fromType("AspectRamp"),Ot=Wt.uniforms),Ht&&Ht!=="none"&&(Ot.image=this._getImage(Ht)),It.material=Wt,I.defined(It.material)&&Ht!="none"&&(It.material.regionPolygons=new I.RegionPolygonCollection({polygons:this.hierarchys,enabled:this.regionPolygonsEnabled}))}},{key:"clear",value:function(){this.updateMaterial({hasContour:![],selectedShading:"none"}),this._terrainLight(![]),this.drawControl.clearDraw(),this.drawControl.hasEdit(![])}},{key:"destroy",value:function(){}},{key:"_customColorRamp",value:function(lt){if(lt.unit=="(\u5355\u4F4D\uFF1A\u5EA6)"||lt.unit=="(\u5355\u4F4D\uFF1A\u7C73)"){var ot=this._customColorRamp2(lt);return ot}var it=document.createElement("canvas");it.width=100,it.height=1;var yt=it.getContext("2d"),Ot=yt.createLinearGradient(0,0,100,0),St=lt.stop,Gt=lt.color,Ht=St[St.length-1],Kt=lt.opacity===void 0?.6:lt.opacity,Jt=I.Color.fromCssColorString;for(var te in Gt)if(Gt.hasOwnProperty(te)){var ie=Jt(Gt[te]),oe=ie.alpha;oe!==0&&(ie=ie.withAlpha(Kt)),Gt[te]=ie.toCssHexString()}Gt[8]=Gt[0];for(var he in St)if(St.hasOwnProperty(he)){var ne=St[he]/Ht,ce=ne+.25;ce=ce>1?ce-1:ce,Ot.addColorStop(ce,Gt[he])}return yt.fillStyle=Ot,yt.fillRect(0,0,100,1),it}},{key:"_customColorRamp2",value:function(lt){var ot=this,it=I.Color.fromCssColorString,yt=document.createElement("canvas");yt.width=100,yt.height=1;var Ot=yt.getContext("2d"),St=Ot.createLinearGradient(0,0,100,0),Gt=lt.stop,Ht=lt.color;Gt=JSON.parse((0,x.default)(Gt)),Ht=JSON.parse((0,x.default)(Ht));var Kt=lt.opacity||.6;for(var Jt in Ht)if(Ht.hasOwnProperty(Jt)){var te=it(Ht[Jt]).withAlpha(Kt);Ht[Jt]=te.toCssHexString()}lt.unit=="(\u5355\u4F4D\uFF1A\u5EA6)"?Gt=(0,u.default)(Gt).call(Gt,function(he){return(0,B.default)(this,ot),he/90}.bind(this)):Gt=(0,u.default)(Gt).call(Gt,function(he){return(0,B.default)(this,ot),(he+395)/8777}.bind(this)),St.addColorStop(0,"#0000"),St.addColorStop(1,"#0000"),Gt.unshift(Gt[0]),Gt.push(Gt[Gt.length-1]),Ht.unshift(it(Ht[0]).withAlpha(0).toCssHexString()),Ht.push(it(Ht[Ht.length-1]).withAlpha(0).toCssHexString());for(var ie in Gt)if(Gt.hasOwnProperty(ie)){var oe=Gt[ie];St.addColorStop(oe,Ht[ie])}return Ot.fillStyle=St,Ot.fillRect(0,0,100,1),yt}},{key:"_getImage",value:function(lt){var ot={elevation:[0,.045,.1,.15,.37,.54,1],slope:[0,.29,.5,Math.sqrt(2)/2,.87,.91,1],aspect:[0,.2,.4,.6,.8,.9,1]};function it(yt){var Ot=document.createElement("canvas");Ot.width=100,Ot.height=1;var St=Ot.getContext("2d"),Gt=St.createLinearGradient(0,0,100,0),Ht=ot[yt];return Gt.addColorStop(Ht[0],"#000000"),Gt.addColorStop(Ht[1],"#2747E0"),Gt.addColorStop(Ht[2],"#D33B7D"),Gt.addColorStop(Ht[3],"#D33038"),Gt.addColorStop(Ht[4],"#FF9742"),Gt.addColorStop(Ht[5],"#ffd700"),Gt.addColorStop(Ht[6],"#ffffff"),St.fillStyle=Gt,St.fillRect(0,0,100,1),Ot}return this._terrainLegend[lt]?this._customColorRamp(this._terrainLegend[lt]):it(lt)}},{key:"_terrainLight",value:function(lt){var ot=this.prop.viewer;ot.scene.globe.enableLighting=!!lt,lt?(ot.scene.light=new I.DirectionalLight({direction:ot.scene.camera.directionWC}),ot.scene.globe.dynamicAtmosphereLighting=![]):(ot.scene.light=new I.SunLight,ot.scene.globe.dynamicAtmosphereLighting=!![],ot.scene.globe.dynamicAtmosphereLightingFromSun=![])}}]),gt}(At);z.TerrainAnalysis=mt;var Ft=function(){function Zt(ft){(0,E.default)(this,Zt),ft=ft||{},this.entities=[],this.water=ft.water,this.waters=ft.waters,this.positions=ft.positions,this.waterObjs=ft.waterObjs,this.dataSource=ft.dataSource,this.floodInstance=ft.floodInstance}return(0,N.default)(Zt,[{key:"changeFlood",value:function(gt){var dt=gt.height,lt=gt.color;if(this.positions&&this.waters&&this.water){this.clearpropup();var ot=this.water.id,it=this.water.geometryInstances.id,yt;if(!I.defined(dt))yt=this.water.geometryInstances;else{var Ot=new I.PolygonGeometry({polygonHierarchy:new I.PolygonHierarchy(this.positions),extrudedHeight:dt});yt=new I.GeometryInstance({geometry:Ot,id:it,attributes:{color:new I.ColorGeometryInstanceAttribute(0,1,1,.5)}})}var St;if(!lt)St=this.water.appearance;else{M.log("target"),lt=lt===""?"#5e7666":lt;var Gt=I.Color.fromCssColorString(lt);Gt.alpha===1&&(Gt=Gt.withAlpha(.8)),this.baseWaterColor=Gt;var Ht=new I.Material({fabric:{type:"Water",uniforms:{baseWaterColor:Gt,blendColor:I.Color.SKYBLUE,normalMap:U.default,frequency:2e3,animationSpeed:.01,amplitude:10,specularIntensity:2,fadeFactor:2}}});St=new I.EllipsoidSurfaceAppearance({material:Ht})}this.waters.remove(this.water),this.water=this.waters.add(new I.Primitive({geometryInstances:yt,appearance:St,releaseGeometryInstances:![]})),this.water.id=ot}}},{key:"setHeight",value:function(gt){if(this.positions&&this.waters&&this.water){this.clearpropup();var dt=this.water.id,lt=this.water.geometryInstances.id,ot=new I.PolygonGeometry({polygonHierarchy:new I.PolygonHierarchy(this.positions),extrudedHeight:gt}),it=new I.GeometryInstance({geometry:ot,id:lt,attributes:{color:new I.ColorGeometryInstanceAttribute(0,1,1,.5)}}),yt=this.water.appearance;this.waters.remove(this.water),this.water=this.waters.add(new I.Primitive({geometryInstances:it,appearance:yt,releaseGeometryInstances:![]})),this.water.id=dt}}},{key:"_clearWater",value:function(){var gt=this;this.waters.remove(this.water);var dt=this.waterObjs,lt=this.water.geometryInstances.id,ot=(0,a.default)(dt).call(dt,function(it){return(0,B.default)(this,gt),it.water.geometryInstances.id==lt}.bind(this));(0,i.default)(dt).call(dt,ot,1),this.water=null}},{key:"clearpropup",value:function(){var gt=this,dt=this.dataSource,lt=this.entities;lt.forEach(function(ot){(0,B.default)(this,gt),dt.entities.remove(ot)}.bind(this)),this.entities=[]}},{key:"clearAll",value:function(){this._clearWater(),this.clearpropup(),this.water=null,this.waters=null,this.positions=null,this.waterObjs=null}}]),Zt}(),ct=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,E.default)(this,gt),dt=dt||{},dt.type="flood",dt.drawConfig=!![],ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){this.oceanPrimitive=null,this.positions=null,this.height=50,this.color="#5e7666",this.prop.ellipsoid=this.prop.viewer.scene.globe.ellipsoid,this.prop.waters=new I.PrimitiveCollection,this.prop.waterObjs=[],this.prop.viewer.scene.primitives.add(this.prop.waters);var lt=new J.PointPopup(this.prop.viewer);lt._isOnly=![],this.prop.popup=lt}},{key:"_getWindowPosition",value:function(lt){var ot=this.prop.viewer,it=ot.scene.cartesianToCanvasCoordinates(lt);return ot.scene.globe.pick(ot.camera.getPickRay(it),ot.scene)}},{key:"setWaterProp",value:function(lt){var ot=this,it=lt.height,yt=lt.color,Ot=this.prop.waterObjs;I.defined(it)&&(this.height=it),I.defined(yt)&&(this.color=yt),Ot.forEach(function(St){(0,B.default)(this,ot),St.changeFlood({height:it,color:yt})}.bind(this))}},{key:"setHeight",value:function(lt){var ot=this,it=this.prop.waterObjs;I.defined(lt)&&typeof lt=="number"?(this.height=lt,it.forEach(function(yt){(0,B.default)(this,ot),yt.setHeight({height:lt})}.bind(this))):M.warn("param [height] should be [number]")}},{key:"floodDraw",value:function(lt){var ot=this,it=this.prop.ellipsoid;lt=lt||{};var yt=lt||{},Ot=yt.style,St=Ot===void 0?{color:"#0047ab",opacity:.6,extrudedHeight:this.height}:Ot;this.drawControl.startDraw({drawtype:"polygon",style:St,success:function(Ht){(0,B.default)(this,ot);var Kt=Ht.polygon.hierarchy.getValue().positions,Jt=(0,W.toGeoJSON)(Ht),te=H.centerOfMass(Jt),ie=te.geometry.coordinates,oe=I.Cartesian3.fromDegrees(ie[0],ie[1]),he=it.geodeticSurfaceNormal(oe,new Pt);this.prop.normal=he;var ne=(0,Z.getMaxHeight)(Ht._positions_draw);this.height=ne+50,this.clearDraw(),this._addFlood({positions:Kt})}.bind(this)})}},{key:"generateFlood",value:function(){var lt=this,ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[120,30,120.1,30,120.1,30.1,120,30.1],it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100,Ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"\u6C34\u9762-1";this.height=it;var St=this.prop.ellipsoid,Gt=ot instanceof Array,Ht;if(Gt)if(ot[0]instanceof I.Cartesian3)Ht=ot;else{if(ot[0]instanceof Array)return;if(typeof ot[0]=="number"&&!isNaN(ot[0])){var Kt=ot.length/2;if(Kt>=2){var Jt=I.Cartesian3.fromDegreesArray(ot);Ht=Jt}else{var te=(0,H.point)(ot),ie=(0,H.buffer)(te,yt,{units:"meters"});if(!ie)return;var oe=ie.geometry.coordinates[0];oe.pop();var he=(0,u.default)(oe).call(oe,function(_t){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,_t)}.bind(this));Ht=he}}}else if(ot instanceof I.Cartesian3){var ne=wt.cartesianToLonLatHeight(ot);ne.length=2;var te=(0,H.point)(ne),ie=(0,H.buffer)(te,yt,{units:"meters"});if(!ie)return;var ce=ie.geometry.coordinates[0];ce.pop();var ge=(0,u.default)(ce).call(ce,function(re){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,re)}.bind(this));Ht=ge}var Ae=Ht[0],It=St.geodeticSurfaceNormal(Ae,new Pt);this.prop.normal=It;var Wt=this._addFlood({positions:Ht,name:Ot});return Wt}},{key:"generateFlood_copy",value:function(){var lt=this,ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[120.8788,29.999],it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100;this.height=it;var Ot=this.prop.ellipsoid,St=ot instanceof Array,Gt;if(St){if(ot[0]instanceof I.Cartesian3)Gt=ot;else if(ot[0]instanceof Array){var Ht=(0,u.default)(ot).call(ot,function(It){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,It)}.bind(this));Gt=Ht}else if(!isNaN(ot[0])){var Kt=(0,H.point)(ot),Jt=(0,H.buffer)(Kt,yt,{units:"meters"});if(!Jt)return;var te=Jt.geometry.coordinates[0];te.pop();var ie=(0,u.default)(te).call(te,function(It){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,It)}.bind(this));Gt=ie}}else if(ot instanceof I.Cartesian3){var oe=wt.cartesianToLonLatHeight(ot);oe.length=2;var Kt=(0,H.point)(oe),Jt=(0,H.buffer)(Kt,yt,{units:"meters"});if(!Jt)return;var he=Jt.geometry.coordinates[0];he.pop();var ne=(0,u.default)(he).call(he,function(_t){return(0,B.default)(this,lt),I.Cartesian3.fromDegrees.apply(null,_t)}.bind(this));Gt=ne}var ce=Gt[0],ge=Ot.geodeticSurfaceNormal(ce,new Pt);this.prop.normal=ge;var Ae=this._addFlood({positions:Gt});return Ae}},{key:"start",value:function(lt){lt?this.floodDraw():this.clear()}},{key:"_addFlood",value:function(lt){var ot=this.prop,it=ot.waters,yt=ot.waterObjs,Ot=ot.dataSource,St=lt||{},Gt=St.positions,Ht=St.height,Kt=Ht===void 0?this.height:Ht,Jt=St.name,te=lt||{},ie=te.color,oe=ie===void 0?this.color:ie;oe=oe===""?"#5e7666":oe;var he=new I.PolygonGeometry({polygonHierarchy:new I.PolygonHierarchy(Gt),extrudedHeight:Kt}),ne=I.Color.fromCssColorString(oe);ne.alpha==1&&(ne=ne.withAlpha(.8));var ce=new I.Material({fabric:{type:"Water",uniforms:{baseWaterColor:ne,blendColor:I.Color.SKYBLUE,normalMap:U.default,frequency:2e3,animationSpeed:.01,amplitude:10,specularIntensity:2,fadeFactor:2}}}),ge=new I.GeometryInstance({geometry:he,id:I.createGuid(),attributes:{color:new I.ColorGeometryInstanceAttribute(0,1,1,.5)}}),Ae=I.createGuid(),It=it.add(new I.Primitive({geometryInstances:ge,appearance:new I.EllipsoidSurfaceAppearance({material:ce}),releaseGeometryInstances:![]}));It.id=Jt;var Wt=new Ft({water:It,waters:it,waterObjs:yt,positions:Gt,dataSource:Ot,floodInstance:this});return yt.push(Wt),Wt}},{key:"clearWater",value:function(lt){var ot=this.prop,it=ot.waters,yt=ot.areas,Ot=lt.id;yt[Ot]&&delete yt[Ot],it.remove(lt)}},{key:"removeWaterById",value:function(lt){var ot=this,it=this.prop.waterObjs,yt=(0,O.default)(it);yt.forEach(function(Ot){(0,B.default)(this,ot),Ot.water.id==lt&&Ot.clearAll()}.bind(this))}},{key:"clear",value:function(){this.clearDraw();var lt=this.prop,ot=lt.dataSource,it=lt.waters,yt=lt.waterObjs;ot.entities.removeAll(),it.removeAll(),yt.length=0,this.pickWaterDepth(![])}},{key:"destroy",value:function(){}},{key:"removeAllPopup",value:function(){var lt=this.prop,ot=lt.dataSource,it=lt.popup;it&&it.close(),ot.entities.removeAll()}},{key:"pickWaterDepth",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!![],ot=this.drawControl.drawCtrl.billboard.getHandler();if(!lt){ot.removeInputAction(2);return}var it=this.prop,yt=it.viewer,Ot=it.normal,St=Ot===void 0?new Pt:Ot,Gt=it.waters,Ht=it.waterObjs,Kt=this;ot.setInputAction(function(Jt){var te=Kt.positions;if(Gt.length){var ie=(0,Z.getCurrentMousePosition)(yt.scene,Jt.position);if(ie){for(var oe=I.Cartographic.fromCartesian(ie),he=[I.Math.toDegrees(oe.longitude),I.Math.toDegrees(oe.latitude)],ne=(0,H.point)(he),ce=0,ge=(0,n.default)(Ht);ce<ge.length;ce++){var Ae=(0,S.default)(ge[ce],2),It=Ae[0],Wt=Ae[1];Wt=Wt.positions;var _t=[],ee=nt(Wt),re;try{for(ee.s();!(re=ee.n()).done;){var de=re.value,Se=wt.cartesianToLonLatHeight(de);_t.push([Se[0],Se[1]])}}catch(pe){ee.e(pe)}finally{ee.f()}var Pe=wt.cartesianToLonLatHeight(Wt[0]);_t.push([Pe[0],Pe[1]]);var De=(0,H.polygon)([_t]),Ie=(0,H.booleanContains)(De,ne);if(Ie){Kt._sampleWaterDepth(ie,It);return}}(0,K.Message)({message:"\u8BF7\u70B9\u51FB\u6C34\u57DF\u8303\u56F4\u5185",type:"warning"})}}},2)}},{key:"_dP",value:function(lt){var ot=this.prop.dataSource,it=new I.Entity({position:lt,point:{pixelSize:6}});return ot.entities.add(it),it}},{key:"_sampleWaterDepth",value:function(){var dt=(0,w.default)(m.default.mark(function ot(it,yt){var Ot=this,St,Gt,Ht,Kt,Jt,te,ie,oe,he,ne,ce,ge,Ae,It,Wt,_t,ee,re,de,Se,Pe,De,Ie,pe;return m.default.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ht=this.prop,Kt=Ht.viewer,Jt=Ht.waters,te=Ht.waterObjs,ie=Ht.popup,oe=Kt.scene.globe.ellipsoid,he=I.Cartographic.fromCartesian(it),ne=oe.geodeticSurfaceNormal(it,new Pt),ce=Pt.subtract(new Pt,ne,new Pt),ge=new I.Ray(it,ce),Ae=I.Ray.getPoint(ge,-1e3,new Pt),ge.origin=Ae,Ne.next=10,Kt.scene.drillPickFromRayMostDetailed(ge);case 10:return It=Ne.sent,It.length&&(it=It[0].position),Wt=[],_t=[],It.forEach(function(Ve){(0,B.default)(this,Ot),Ve.object&&Ve.object.primitive&&Ve.object.primitive instanceof I.Cesium3DTileset&&!(0,h.default)(_t).call(_t,Ve.object.primitive)&&(_t.push(Ve.object.primitive),Wt.push(Ve.object.primitive))}.bind(this)),Ne.next=16,Kt.scene.sampleHeightMostDetailed([he],Wt);case 16:return ee=Ne.sent,ee=ee[0].height,re=Jt._primitives,this.pick_method=="ground"?re=(0,r.default)(re).call(re,Wt):this.pick_method=="model",Ne.next=22,Kt.scene.sampleHeightMostDetailed([he],re);case 22:de=Ne.sent,de=de[0].height||0,ee-de<.01&&(ee=te[yt].water.geometryInstances.geometry._height,it=wt.setPositionHeight(Kt,it,ee)),Se=(ee-de).toFixed(4),Pe=this._dP(it),te[yt]&&te[yt].entities.push(Pe),Pe.popup=ie,De=Se>=.01?Se+"\u7C73":"\u65E0\u79EF\u6C34",Ie=[I.Math.toDegrees(he.longitude),I.Math.toDegrees(he.latitude)],pe=(0,r.default)(St=(0,r.default)(Gt=`<div class="mars-popup-titile"></div>
                  <div class="mars-popup-content">
                      <div><label>\u7ECF\u5EA6</label>`.concat(Ie[0].toFixed(6),`</div>
                      <div><label>\u7EAC\u5EA6</label>`)).call(Gt,Ie[1].toFixed(6),`</div>
                      <div><label>\u79EF\u6C34\u6DF1\u5EA6</label>`)).call(St,De,`</div>
                  </div>`),Pe.popup={html:pe,anchor:[0,-15]},ie.show(Pe,it);case 34:case"end":return Ne.stop()}},ot,this)}));function lt(ot,it){return dt.apply(this,arguments)}return lt}()}]),gt}(At);z.FloodAnalysis=ct;var vt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,E.default)(this,gt),dt=dt||{},dt.type="clip",dt.drawConfig={type:"measure"},ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){var lt=this.drawControl.draw();lt.hasEdit(![])}},{key:"start",value:function(lt){}},{key:"drawLine",value:function(lt,ot){var it=this.drawControl.draw();it.hasEdit(!![]),this.drawControl.measureSection({calback:lt,calbackresult:ot})}},{key:"getEChart",value:function(lt){if(!lt)return;function ot(Ot){var St=Number(Ot);return St<1e3?St.toFixed(2)+"\u7C73":(St/1e3).toFixed(2)+"\u5343\u7C73"}var it=lt.arrPoint,yt={grid:{left:10,right:10,bottom:10,containLabel:!![]},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",formatter:function(St){var Gt="";if(St.length===0)return Gt;var Ht=St[0].value,Kt=it[St[0].dataIndex];return Gt+="\u6240\u5728\u4F4D\u7F6E&nbsp;"+Kt.x+","+Kt.y+"<br />\u8DDD\u8D77\u70B9&nbsp;<label>"+ot(St[0].axisValue)+"</label><br />"+St[0].seriesName+"&nbsp;<label style='color:"+St[0].color+";'>"+ot(St[0].value)+"</label><br />",Gt}},xAxis:[{name:"\u884C\u7A0B",type:"category",boundaryGap:![],axisLine:{show:![]},axisLabel:{show:![]},data:lt.arrLen}],yAxis:[{type:"value",axisLabel:{rotate:60,formatter:"{value} \u7C73"}}],series:[{name:"\u9AD8\u7A0B\u503C",type:"line",smooth:!![],symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(255, 70, 131)"}},areaStyle:{normal:{color:new Y.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}},data:lt.arrHB}]};return yt}},{key:"clear",value:function(){var lt=this.drawControl.draw();lt.hasEdit(![]),this.clearDraw()}},{key:"destroy",value:function(){}},{key:"openChart",value:function(){}}]),gt}(At);z.ClipAnalysis=vt;var Dt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){return(0,E.default)(this,gt),dt=dt||{},dt.type="skyline",ft.call(this,dt)}return(0,N.default)(gt,[{key:"init",value:function(){this.cfg={pg:{name:"czm_skylinetemp",fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D depthTexture;varying vec2 v_textureCoordinates;void main(void){float depth = czm_readDepth(depthTexture, v_textureCoordinates);vec4 color = texture2D(colorTexture, v_textureCoordinates);if(depth<1.0 - 0.000001){gl_FragColor = color;}else{gl_FragColor = vec4(1.0,0.0,0.0,1.0);}}"},pg1:{name:"czm_skylinetemp1",fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D redTexture;uniform sampler2D silhouetteTexture;varying vec2 v_textureCoordinates;void main(void){vec4 redcolor=texture2D(redTexture, v_textureCoordinates);vec4 silhouetteColor = texture2D(silhouetteTexture, v_textureCoordinates);vec4 color = texture2D(colorTexture, v_textureCoordinates);if(redcolor.r == 1.0){gl_FragColor = mix(color, vec4(1.0,0.0,0.0,1.0), silhouetteColor.a);}else{gl_FragColor = color;}}"}}}},{key:"start",value:function(lt){var ot=this.prop.viewer,it=this.cfg;if(lt){var yt=ot.scene.postProcessStages,Ot=I.PostProcessStageLibrary.createEdgeDetectionStage(),St=new I.PostProcessStage(it.pg),Gt=new I.PostProcessStage((0,o.default)(it.pg1,{uniforms:{redTexture:St.name,silhouetteTexture:Ot.name}}));!this.skyLinePPS&&(this.skyLinePPS=yt.add(new I.PostProcessStageComposite({name:"czm_skyline",inputPreviousStageTexture:![],stages:[Ot,St,Gt],uniforms:Ot.uniforms}))),this.skyLinePPS.enabled=!![]}else this.skyLinePPS&&(this.skyLinePPS.enabled=![])}},{key:"clear",value:function(){this.start(![])}},{key:"destroy",value:function(){}}]),gt}(At);z.SkyLineAnalysis=Dt;var Ct=[I.Color.BLUE,I.Color.CYAN,I.Color.GREEN,I.Color.YELLOW,I.Color.RED];function jt(Zt){var ft=parseInt(Zt/.2);ft=ft==5?4:ft;var gt=Ct[ft];return gt}var zt=function(Zt){(0,k.default)(gt,Zt);var ft=rt(gt);function gt(dt){var lt;(0,E.default)(this,gt),dt=dt||{},dt.type="shadowRatio",dt.drawConfig={hasEdit:![]},lt=ft.call(this,dt),lt.primitives=[];for(var ot=0;ot<5;ot++){var it=new I.PointPrimitiveCollection({blendOption:I.BlendOption.OPAQUE});lt.primitives.push(it),lt.prop.viewer.scene.primitives.add(it)}return lt}return(0,N.default)(gt,[{key:"init",value:function(){this.period=[I.JulianDate.fromIso8601("2021-08-09T09:00:00+08:00"),I.JulianDate.fromIso8601("2021-08-09T15:00:00+08:00")],this.timeInterval=90,this.spacing=15}},{key:"start",value:function(lt){var ot=this.prop.viewer,it=this.cfg}},{key:"drawPolygon",value:function(lt){var ot=this;this.clear();var it=this.prop.viewer;this.drawControl.startDraw({drawtype:"polygon",style:{extrudedHeight:50,fill:![],outline:!![]},success:function(){var yt=(0,w.default)(m.default.mark(function St(Gt){var Ht=this,Kt,Jt,te,ie,oe,he,ne,ce,ge,Ae,It,Wt;return m.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:for(M.time("\u65B0\u7B97\u6CD5\u603B\u8FD0\u7B97"),window.score=0,window.time=0,Kt=Gt.polygon.hierarchy.getValue().positions,te=wt.upPosition(it,Kt[0],100),ot.normal=I.Cartesian3.normalize(I.Cartesian3.subtract(te,Kt[0],new I.Cartesian3),new I.Cartesian3),(0,u.default)(Kt).call(Kt,function(re){(0,B.default)(this,Ht);var de=wt.cartesianToLonLatHeight(re)[2];Jt=de>Jt?Jt:de}.bind(this)),ie=Gt.polygon.extrudedHeight.getValue(),ot.bottomHeight=Jt,ot.topHeight=ie,oe=Gt.polygon.hierarchy.getValue().positions,M.time("\u6784\u9020\u70B9\u9635\u82B1\u8D39\u65F6\u95F4"),he=ot.constructPoints(oe),M.timeEnd("\u6784\u9020\u70B9\u9635\u82B1\u8D39\u65F6\u95F4"),ot.points=he,M.time("blockHeight"),ne=0,ce=[],ge=0,Ae=he.length;ge<=Ae-1;ge++)It=I.Cartographic.fromCartesian(he[ge]),Wt=it.scene.sampleHeight(It),ce[ge]=Wt,ne=Wt>ne?Wt:ne;ot.blockHeight=ne,ot.heights=ce,M.timeEnd("blockHeight"),ot._pointShow(![]),ot.computeShadowRatio(),ot._pointShow(!![]),ot.activatedPick(lt);case 25:case"end":return ee.stop()}},St,this)}));function Ot(St){return yt.apply(this,arguments)}return Ot}()})}},{key:"drawPolygon_rawAlgorithm",value:function(){var lt=this,ot=this.prop.viewer;this.drawControl.startDraw({drawtype:"polygon",style:{extrudedHeight:30,fill:![],outline:!![]},success:function(yt){(0,B.default)(this,lt),M.time("\u8001\u7B97\u6CD5\u603B\u8FD0\u7B97"),window.score=0;var Ot=yt.polygon.hierarchy.getValue().positions,St,Gt=wt.upPosition(ot,Ot[0],100);this.normal=I.Cartesian3.normalize(I.Cartesian3.subtract(Gt,Ot[0],new I.Cartesian3),new I.Cartesian3);var Ht=nt(Ot),Kt;try{for(Ht.s();!(Kt=Ht.n()).done;){var Jt=Kt.value,te=wt.cartesianToLonLatHeight(Jt)[2];St=te>St?St:te}}catch(Ve){Ht.e(Ve)}finally{Ht.f()}var ie=yt.polygon.extrudedHeight.getValue(),oe=yt.polygon.hierarchy.getValue().positions,he=this.constructPoints(oe);M.time("blockHeight");var ne=0,ce=[],ge=nt((0,g.default)(he).call(he)),Ae;try{for(ge.s();!(Ae=ge.n()).done;){var It=(0,S.default)(Ae.value,2),Wt=It[0],_t=It[1],ee=I.Cartographic.fromCartesian(_t),re=ot.scene.sampleHeight(ee);if(ce[Wt]=re,ne=re>ne?re:ne,ne>ie)break}}catch(Ve){ge.e(Ve)}finally{ge.f()}M.timeEnd("blockHeight");for(var de=[],Se=St;Se<=ie;Se+=this.spacing){var Pe=nt((0,g.default)(he).call(he)),De;try{for(Pe.s();!(De=Pe.n()).done;){var Ie=(0,S.default)(De.value,2),pe=Ie[0],Oe=Ie[1];if(Oe=wt.setPositionHeight(ot,Oe,Se),Se<ce[pe]){this._dP(Oe,0);continue}if(de[pe]==1||Se>=ne){this._dP(Oe,1);continue}var Ne=this.foo(Oe);de[pe]=Ne,this._dP(Oe,Ne)}}catch(Ve){Pe.e(Ve)}finally{Pe.f()}}M.timeEnd("\u8001\u7B97\u6CD5\u603B\u8FD0\u7B97"),this.activatedPick()}.bind(this)})}},{key:"activatedPick",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ot=this.prop.viewer,it=this,yt=this.drawControl.drawCtrl.billboard.getHandler();yt.setInputAction(function(Ot){M.time("\u5355\u70B9\u6D4B\u65E5\u7167\u7387"),it.lastSelectPoint&&(it.lastSelectPoint.pixelSize=10,it.lastSelectPoint.outlineWidth=0);var St=ot.scene.pick(Ot.position)||{};if(St.primitive instanceof I.PointPrimitive){var Gt,Ht=St.primitive.id.indexOf("**:")+3,Kt=(0,d.default)(Gt=St.primitive.id).call(Gt,Ht),Jt=parseFloat(Kt).toFixed(2);if(lt._isVue){var te=wt.cartesianToLonLatHeight(St.primitive.position);lt.formInfo.data.height_sr=te[2].toFixed(2),lt.formInfo.data.position_sr=te[0].toFixed(5)+", "+te[1].toFixed(5),lt.formInfo.data.sunshineRatio=Jt}it._pointShow(![]),St.collection&&St.collection.remove(St.primitive),it.detectShadowPeriod(St.primitive.position,lt.formInfo.data,Jt),it._pointShow(!![])}else lt.formInfo.data.height_sr=null,lt.formInfo.data.position_sr=null,lt.formInfo.data.sunshineRatio=null,lt.formInfo.data.sunshinePeriod=null;M.timeEnd("\u5355\u70B9\u6D4B\u65E5\u7167\u7387")},2)}},{key:"drawPoint",value:function(){var lt=this;this.drawControl.startDraw({drawtype:"point",success:function(it){(0,B.default)(this,lt),this.foo(it)}.bind(this)})}},{key:"constructPoints",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ot=[],it=[],yt=nt(lt),Ot;try{for(yt.s();!(Ot=yt.n()).done;){var St=Ot.value,Gt=wt.cartesianToLonLatHeight(St);ot.push([Gt[0],Gt[1]])}}catch(Se){yt.e(Se)}finally{yt.f()}var Ht=wt.cartesianToLonLatHeight(lt[0]);ot.push([Ht[0],Ht[1]]);var Kt=(0,H.polygon)([ot]);this.polygon_turf=Kt;var Jt=(0,H.bbox)(Kt),te=new I.WebMercatorProjection,ie=I.Cartographic.fromDegrees(Jt[0],Jt[1]),oe=I.Cartographic.fromDegrees(Jt[2],Jt[3]),he=te.project(ie),ne=te.project(oe),ce={coor:[(he.x+ne.x)/2,(he.y+ne.y)/2],childNode:{}};ce.extends={x:ne.x-he.x,y:ne.y-he.y};var ge=te.unproject({x:ce.coor[0],y:ce.coor[1]}),Ae=I.Cartographic.toCartesian(ge);ce.coor=Ae,this.mid_root=ce;for(var It=he.x;It<=ne.x;It+=this.spacing)for(var Wt=he.y;Wt<=ne.y;Wt+=this.spacing){var _t=te.unproject({x:It,y:Wt}),ee=[I.Math.toDegrees(_t.longitude),I.Math.toDegrees(_t.latitude)],re=(0,H.point)(ee),de=(0,H.booleanContains)(Kt,re);de&&it.push(I.Cartographic.toCartesian(_t))}return it}},{key:"foo",value:function(lt){var ot,it=this.prop.viewer;if(this.timeArr=this.timeArr||[],this.planetaryDirections=this.planetaryDirections||[],this.timeArr.length==0)for(var yt=this.period[0].clone();I.JulianDate.lessThanOrEquals(yt,this.period[1]);)this.timeArr.push(yt.clone()),I.JulianDate.addMinutes(yt,this.timeInterval,yt);var Ot=0,St=nt((0,g.default)(ot=this.timeArr).call(ot)),Gt;try{for(St.s();!(Gt=St.n()).done;){var Ht=(0,S.default)(Gt.value,2),Kt=Ht[0],Jt=Ht[1];window.score++;var te=this.planetaryDirections[Kt];if(!te){var ie=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(Jt),oe=I.Transforms.computeIcrfToFixedMatrix(Jt);I.Matrix3.multiplyByVector(oe,ie,ie),te=I.Cartesian3.normalize(ie,new I.Cartesian3),this.planetaryDirections[Kt]=te}var he=I.Cartesian3.dot(te,this.normal);if(!(he<=.25881904510252074)){var ne=new I.Ray(lt,te),ce=it.scene.pickFromRay(ne);ce&&ce.position&&Ot++}}}catch(Ae){St.e(Ae)}finally{St.f()}var ge=1-Ot/this.timeArr.length;return ge}},{key:"detectShadowPeriod",value:function(lt,ot,it){var yt=this,Ot=this.prop.viewer,St=Ot.scene.globe.ellipsoid,Gt=St.geodeticSurfaceNormal(lt,new I.Cartesian3),Ht=[],Kt=I.JulianDate.daysDifference(this.period[1],this.period[0]),Jt=7.5;Kt>3&&(Jt=Kt/14*24*60);for(var te=this.period[0].clone(),ie=0;I.JulianDate.lessThanOrEquals(te,this.period[1]);ie++)Ht[ie]={},Ht[ie].time=te.clone(),Ht[ie].shadow=re(lt,te),I.JulianDate.addMinutes(te,Jt,te);for(var oe=[],he=![],ne=[],ce=0,ge=0,Ae=Ht.length,It;ge<Ae;ge++){if(It=Ht[ge],It.shadow&&ce++,It.shadow&&he){oe.push(ne),ne=[],he=![];continue}It.shadow?(he=![],ne=[]):(he=!![],ne.push(It))}var Wt=ce/Ht.length;ot.sunshineRatio=(1-Wt).toFixed(2),this._dP(lt,it,!![]),ne.length>=2&&oe.push(ne);var _t="",ee=de;oe=(0,y.default)(oe).call(oe,function(Se){(0,B.default)(this,yt);var Pe=Se.length&&I.JulianDate.compare(Se[Se.length-1].time,Se[0].time)>=3600;if(Pe){var De=I.JulianDate.toGregorianDate(Se[0].time),Ie=I.JulianDate.toGregorianDate(Se[Se.length-1].time);return _t+=ee(De.month)+"\u6708"+ee(De.day)+"\u65E5 "+ee(De.hour+8)+":"+ee(De.minute),_t+="\u5230"+ee(Ie.month)+"\u6708"+ee(Ie.day)+"\u65E5 "+ee(Ie.hour+8)+":"+ee(Ie.minute)+`
`,!![]}}.bind(this)),ot.sunshinePeriod=_t;function re(Se,Pe){var De=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(Pe),Ie=I.Transforms.computeIcrfToFixedMatrix(Pe);I.Matrix3.multiplyByVector(Ie,De,De);var pe=I.Cartesian3.normalize(De,new I.Cartesian3),Oe=I.Cartesian3.angleBetween(pe,Gt);if(Oe>=Math.PI/2)return!![];var Ne=new I.Ray(Se,pe),Ve=Ot.scene.pickFromRay(Ne);return Ve&&Ve.position?!![]:![]}function de(Se){return Se>9?Se:"0"+Se}}},{key:"computeShadowRatio",value:function(){var lt=this,ot,it=this.prop.viewer,yt=Math.min(5e3,this.spacing/2),Ot=I.JulianDate.secondsDifference(it.clock.stopTime,it.clock.startTime)==86400;!Ot&&(this.period=[it.clock.startTime,it.clock.stopTime]),this.timeArr=[];var St,Gt=I.JulianDate.daysDifference(this.period[1],this.period[0]);if(Gt>3)for(St=this.period[0].clone();I.JulianDate.lessThanOrEquals(St,this.period[1]);)this.timeArr.push(St.clone()),I.JulianDate.addDays(St,Gt/10,St);else for(St=this.period[0].clone();I.JulianDate.lessThanOrEquals(St,this.period[1]);)this.timeArr.push(St.clone()),I.JulianDate.addMinutes(St,this.timeInterval,St);var Ht=[],Kt,Jt=function(){var ie,oe=this,he=[],ne=Kt>=lt.blockHeight;(0,u.default)(ie=lt.points).call(ie,function(ce,ge){(0,B.default)(this,oe);var Ae=Kt<=lt.heights[ge];ce=wt.setPositionHeight(it,ce,Kt),ce.index=ge,ce.level=(Kt-lt.bottomHeight)/lt.spacing+1,ce.SScondition=[],Ae&&(ce.underBuilding=!![]),ne?ne&&lt._dP(ce,1):he.push(ce)}.bind(this)),!ne&&Ht.push(he)};for(Kt=this.bottomHeight;Kt<=this.topHeight;Kt+=this.spacing)Jt();Ht.reverse(),window.points_3d=Ht,(0,u.default)(ot=this.timeArr).call(ot,function(te,ie){var oe=this;(0,B.default)(this,lt),M.time("\u70B9\u7684\u8FD0\u7B97");var he=ie,ne=[],ce=[],ge,Ae=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(te),It=I.Transforms.computeIcrfToFixedMatrix(te);I.Matrix3.multiplyByVector(It,Ae,Ae),ge=I.Cartesian3.normalize(Ae,new I.Cartesian3);var Wt=I.Cartesian3.subtract(new I.Cartesian3,ge,new I.Cartesian3),_t=I.Cartesian3.angleBetween(this.normal,ge),ee=I.Math.toDegrees(_t),re=Math.abs(this.spacing/Math.cos(_t));if(!(_t>=Math.PI/2)){for(var de=[],Se=function(Be,Ue){if(Be=Ht[Ue],Ue==Ht.length-1){for(var ke=0,Ze,_=Be.length;ke<_;ke++)Ze=Be[ke],!Ze.id&&de.push([Ze]);return De=Be,"break"}for(var at=function(Ce){var Te=this;if(Ce=Be[xt],Ce.id)return bt=Ce,"continue";var He=[];He.push(Ce),Ce.id=I.createGuid();for(var Vt=new I.Ray(Ce,Wt),qt=[],ae=1;ae<=Ht.length-Ue-1;ae++){var ve=I.Ray.getPoint(Vt,re*ae,new I.Cartesian3),xe=wt.cartesianToLonLatHeight(ve);xe.length=2;var ye=(0,H.point)(xe),Le=(0,H.booleanContains)(oe.polygon_turf,ye);if(Le)qt.push(ve);else break}(0,u.default)(qt).call(qt,function(Fe,we){(0,B.default)(this,Te);for(var ze=0,Ge,We=Be.length;ze<We;ze++){Ge=Be[ze];var Et=wt.upPosition(it,Ge,-oe.spacing*(we+1)),kt=I.Cartesian3.distance(Et,Fe);if(!(kt>oe.spacing/2)&&kt<yt){var $t=Ht[Ue+1+we][ze];if($t&&$t.id)continue;He.push($t),$t.id=Ce.id;break}}}.bind(this)),de.push(He),bt=Ce},xt=0,bt,Bt=Be.length;xt<Bt;xt++)var Qt=at(bt);De=Be},Pe=0,De,Ie=Ht.length;Pe<Ie;Pe++){var pe=Se(De,Pe);if(pe==="break")break}(0,u.default)(Ht).call(Ht,function(be){var Be=this;(0,B.default)(this,oe),(0,u.default)(be).call(be,function(Ue){(0,B.default)(this,Be),Ue.id&&delete Ue.id}.bind(this))}.bind(this));var Oe=0;de.forEach(function(be){var Be=this;(0,B.default)(this,oe),be.forEach(function(Ue){(0,B.default)(this,Be),++Oe}.bind(this))}.bind(this));var Ne=(0,y.default)(de).call(de,function(be){return(0,B.default)(this,oe),be.length==1}.bind(this)),Ve=[];Ne.forEach(function(be){(0,B.default)(this,oe),Ve.push(be[0])}.bind(this)),de=(0,y.default)(de).call(de,function(be){return(0,B.default)(this,oe),be.length>1}.bind(this)),(0,u.default)(de).call(de,function(be){var Be=this;if((0,B.default)(this,oe),be[0].underBuilding){(0,u.default)(be).call(be,function(Qt){(0,B.default)(this,Be),Qt.shadow=Qt.shadow?++Qt.shadow:1,Qt.SScondition[he]=0}.bind(this));return}else{var Ue=be[be.length-1];if(Ue.level>ne[Ue.index]){(0,u.default)(be).call(be,function(Qt){(0,B.default)(this,Be),Qt.sunshine=Qt.sunshine?++Qt.sunshine:1,Qt.SScondition[he]=1}.bind(this));return}else if(be[0].level<ce[be[0].index]){(0,u.default)(be).call(be,function(Qt){(0,B.default)(this,Be),Qt.shadow=Qt.shadow?++Qt.shadow:1,Qt.SScondition[he]=0}.bind(this));return}}var ke=new I.Ray(be[0],ge);ke.skip=!![];var Ze=I.Ray.getPoint(ke,150,new I.Cartesian3),_=new I.Ray(Ze,Wt),at=new Date().getTime(),xt=it.scene.pickFromRay(_,null,1),bt=new Date().getTime();if(window.time+=bt-at,window.score++,xt&&xt.position){var Bt=wt.cartesianToLonLatHeight(xt.position)[2];(0,u.default)(be).call(be,function(Qt){(0,B.default)(this,Be);var ue=wt.cartesianToLonLatHeight(Qt)[2],Ce=Qt.index,Te=Qt.level;ue<Bt?(Qt.shadow=Qt.shadow?++Qt.shadow:1,Qt.SScondition[he]=0,ce[Ce]=Math.max(Te,ce[Ce]||1)):(Qt.sunshine=Qt.sunshine?++Qt.sunshine:1,Qt.SScondition[he]=1,ne[Ce]=Math.min(Te,ne[Ce]||100))}.bind(this))}}.bind(this)),(0,u.default)(Ve).call(Ve,function(be){if((0,B.default)(this,oe),be.underBuilding){be.shadow=be.shadow?++be.shadow:1,be.SScondition[he]=0;return}else if(be.level>ne[be.index]){be.sunshine=be.sunshine?++be.sunshine:1,be.SScondition[he]=1;return}else if(be.level<ce[be.index]){be.shadow=be.shadow?++be.shadow:1,be.SScondition[he]=0;return}var Be=new I.Ray(be,ge);Be.skip=!![];var Ue=new Date().getTime(),ke=it.scene.pickFromRay(Be,null,1),Ze=new Date().getTime();window.time+=Ze-Ue,window.score++;var _=be.index,at=be.level;ke&&ke.position?(be.shadow=be.shadow?++be.shadow:1,be.SScondition[he]=0,ce[_]=Math.max(at,ce[_]||0)):(be.sunshine=be.sunshine?++be.sunshine:1,be.SScondition[he]=1,ne[_]=Math.min(at,ne[_]||100))}.bind(this)),M.timeEnd("\u70B9\u7684\u8FD0\u7B97")}}.bind(this)),(0,u.default)(Ht).call(Ht,function(te){var ie=this;(0,B.default)(this,lt),(0,u.default)(te).call(te,function(oe){(0,B.default)(this,ie);var he=(parseInt(oe.sunshine)||0)/this.timeArr.length;this._dP(oe,he)}.bind(this))}.bind(this)),M.timeEnd("\u65B0\u7B97\u6CD5\u603B\u8FD0\u7B97")}},{key:"computeShadowRatio_solarAltitude",value:function(){var lt,ot=this,it=this.mid_root;this.points_enu=(0,u.default)(lt=this.points).call(lt,function(St){return(0,B.default)(this,ot),I.Cartesian3.subtract(St,it.coor,new I.Cartesian3)}.bind(this));var yt={root:{coord:{x:0,y:0},extends:{x:it.extends.x,y:it.extends.y},level:0,content:this.points_enu}},Ot={creatChileNode:function(Gt){var Ht,Kt=Gt.coord,Jt=Gt.extends,te=Jt.x,ie=Jt.y,oe=new Array(4),he=nt((0,g.default)(oe).call(oe)),ne;try{for(he.s();!(ne=he.n()).done;){var ce=(0,S.default)(ne.value,2),ge=ce[0],Ae=ce[1];oe[ge]={},oe[ge].level=Gt.level+1,oe[ge].extends={x:te/2,y:ie/2},oe[ge].content=[]}}catch(pe){he.e(pe)}finally{he.f()}oe[0].coord={x:Kt.x+te/4,y:Kt.y+ie/4},oe[1].coord={x:Kt.x-te/4,y:Kt.y+ie/4},oe[2].coord={x:Kt.x-te/4,y:Kt.y-ie/4},oe[3].coord={x:Kt.x+te/4,y:Kt.y-ie/4};var It=nt((0,g.default)(Ht=this.points_enu).call(Ht)),Wt;try{for(It.s();!(Wt=It.n()).done;){var _t=(0,S.default)(Wt.value,2),ee=_t[0],re=_t[1],de=void 0,Se=void 0;de=re.x-te,Se=re.y-ie,(de>0&&Se>0||de<0&&Se>0||de<0&&Se<0||de>0&&Se<0)&&oe[0].content.push(re)}}catch(pe){It.e(pe)}finally{It.f()}Gt.childNodes=oe;for(var Pe=0,De=oe;Pe<De.length;Pe++){var Ie=De[Pe];if(Ie.level>=4)return;Ot.creatChileNode(Ie)}}};Ot.creatChileNode(yt.root)}},{key:"computeShadowRatio_Octree",value:function(){var lt=this,ot,it=this.prop.viewer,yt=this,Ot=I.JulianDate.secondsDifference(it.clock.stopTime,it.clock.startTime)==86400;!Ot&&(this.period=[it.clock.startTime,it.clock.stopTime]),this.timeArr=[];var St;for(St=this.period[0].clone();I.JulianDate.lessThanOrEquals(St,this.period[1]);)this.timeArr.push(St.clone()),I.JulianDate.addMinutes(St,this.timeInterval,St);var Gt=this.mid_root,Ht=this.topHeight-this.bottomHeight;Gt.coor=wt.upPosition(it,Gt.coor,Ht/2),Gt.extends.z=Ht;var Kt=Math.max(Gt.extends.x,Gt.extends.y);Gt.extends.x=Gt.extends.y=Kt;var Jt=[],te,ie=function(){var Pe,De=this,Ie=[],pe=te>=lt.blockHeight;(0,u.default)(Pe=lt.points).call(Pe,function(Oe,Ne){(0,B.default)(this,De),Oe=wt.setPositionHeight(it,Oe,te),Oe.index=Ne,Oe.level=(te-lt.bottomHeight)/lt.spacing+1,Oe.SScondition=[],pe?pe&&lt._dP(Oe,1):Ie.push(Oe)}.bind(this)),!pe&&Jt.push(Ie)};for(te=this.bottomHeight;te<=this.topHeight;te+=this.spacing)ie();Jt.reverse();var oe=I.Transforms.eastNorthUpToFixedFrame(Gt.coor),he=I.Matrix4.inverse(oe,new I.Matrix4),ne=[],ce=[],ge=Jt,Ae=(0,u.default)(Jt).call(Jt,function(Se){var Pe=this;return(0,B.default)(this,lt),(0,u.default)(Se).call(Se,function(De){(0,B.default)(this,Pe);var Ie=I.Matrix4.multiplyByPoint(he,De,new I.Cartesian3);return ne.push(Ie),Ie}.bind(this))}.bind(this)),It={root:{coord:{x:0,y:0,z:0},extends:{x:Gt.extends.x,y:Gt.extends.y,z:Gt.extends.z},level:0,content:ne}};It.points_3d_enu=Ae,It.points_3d_raw=ge,It.coordCollectionByLevel=ce;var Wt={creatChileNode:function(Pe){var De,Ie=this,pe=Pe.coord,Oe=Pe.extends,Ne=Oe.x,Ve=Oe.y,be=Oe.z,Be=new Array(8),Ue=nt((0,g.default)(Be).call(Be)),ke;try{for(Ue.s();!(ke=Ue.n()).done;){var Ze=(0,S.default)(ke.value,2),_=Ze[0],at=Ze[1];Be[_]={},Be[_].level=Pe.level+1,Be[_].extends={x:Ne/2,y:Ve/2,z:be/2},Be[_].content=[],Be[_].parent=Pe}}catch(Vt){Ue.e(Vt)}finally{Ue.f()}ce[Pe.level+1]=ce[Pe.level+1]||[],Be[0].coord={x:pe.x+Ne/4,y:pe.y+Ve/4,z:pe.z+be/4},Be[1].coord={x:pe.x-Ne/4,y:pe.y+Ve/4,z:pe.z+be/4},Be[2].coord={x:pe.x-Ne/4,y:pe.y-Ve/4,z:pe.z+be/4},Be[3].coord={x:pe.x+Ne/4,y:pe.y-Ve/4,z:pe.z+be/4},Be[4].coord={x:pe.x+Ne/4,y:pe.y+Ve/4,z:pe.z-be/4},Be[5].coord={x:pe.x-Ne/4,y:pe.y+Ve/4,z:pe.z-be/4},Be[6].coord={x:pe.x-Ne/4,y:pe.y-Ve/4,z:pe.z-be/4},Be[7].coord={x:pe.x+Ne/4,y:pe.y-Ve/4,z:pe.z-be/4},(0,u.default)(De=Pe.content).call(De,function(Vt){(0,B.default)(this,Ie);var qt,ae,ve;qt=Vt.x-pe.x,ae=Vt.y-pe.y,ve=Vt.z-pe.z,ve>0?qt>0&&ae>0?Be[0].content.push(Vt):qt<0&&ae>0?Be[1].content.push(Vt):qt<0&&ae<0?Be[2].content.push(Vt):qt>0&&ae<0&&Be[3].content.push(Vt):qt>0&&ae>0?Be[4].content.push(Vt):qt<0&&ae>0?Be[5].content.push(Vt):qt<0&&ae<0?Be[6].content.push(Vt):qt>0&&ae<0&&Be[7].content.push(Vt)}.bind(this));for(var xt=0,bt=Be;xt<bt.length;xt++)var Bt=bt[xt],Qt=I.Matrix4.multiplyByPoint(oe,Bt.coord,new I.Cartesian3),ue={x:Bt.extends.x,y:Bt.extends.y,z:Bt.extends.z};Pe.childNodes=Be;for(var Ce=0,Te=Be;Ce<Te.length;Ce++){var He=Te[Ce];He.content.length&&ce[He.level].push(He),!(He.content.length<=1)&&Wt.creatChileNode(He)}}};Wt.creatChileNode(It.root),this.tree=It,(0,u.default)(ot=this.timeArr).call(ot,function(Se,Pe){(0,B.default)(this,lt),M.time("\u70B9\u7684\u8FD0\u7B97");var De,Ie=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(Se),pe=I.Transforms.computeIcrfToFixedMatrix(Se);I.Matrix3.multiplyByVector(pe,Ie,Ie),De=I.Cartesian3.normalize(Ie,new I.Cartesian3);var Oe=I.Cartesian3.subtract(new I.Cartesian3,De,new I.Cartesian3),Ne=I.Matrix4.multiplyByPoint(he,De,new I.Cartesian3),Ve=I.Matrix4.multiplyByPoint(he,new I.Cartesian3,new I.Cartesian3),be=I.Cartesian3.subtract(Ne,Ve,new I.Cartesian3);be=I.Cartesian3.normalize(be,new I.Cartesian3);var Be=I.Cartesian3.subtract(new I.Cartesian3,be,new I.Cartesian3),Ue=I.Cartesian3.angleBetween(this.normal,De),ke=I.Math.toDegrees(Ue);if(Ue>=Math.PI/2)return;var Ze=It.coordCollectionByLevel[4];M.time("\u6574\u9897\u6811\u7684\u8FD0\u7B97"),_.bind(this)(Ze),M.timeEnd("\u6574\u9897\u6811\u7684\u8FD0\u7B97");function _(at){var xt=this;if(at[0].extends.x<=5){for(var bt,Bt=0,Qt=at.length;Bt<Qt;Bt++)bt=at[Bt],bt.content.forEach(function($e){(0,B.default)(this,xt),$e.shadow=$e.shadow?++$e.shadow:1}.bind(this));return}this.clear();for(var ue=[],Ce=at[0].extends.x/2,Te=[],He=function(Xe){var ei=this;Xe=at[Vt];var ri=(0,a.default)(Te).call(Te,function(ai){return(0,B.default)(this,ei),ai==Xe.coord.z}.bind(this));ri==-1?(Te.push(Xe.coord.z),ue.push([Xe])):ue[ri].push(Xe),qt=Xe},Vt=0,qt,ae=at.length;Vt<ae;Vt++)He(qt);(0,p.default)(Te).call(Te,function($e,Xe){return Xe-$e}),(0,p.default)(ue).call(ue,function($e,Xe){return(0,B.default)(this,xt),Xe[0].coord.z-$e[0].coord.z}.bind(this));for(var ve=[],xe=0,ye=Te.length;xe<ye-1;xe++){var Le=Te[xe]-Te[xe+1],Fe=Math.abs(Le/Math.cos(Ue));ve.push(Fe)}for(var we=[],ze=0,Ge,We=ue.length;ze<We;ze++){if(Ge=ue[ze],ze==ue.length-1){for(var Et=0,kt,$t=Ge.length;Et<$t;Et++)kt=Ge[Et],!kt.id&&we.push([kt]);break}for(var le=function(Xe){var ei=this;if(Xe=Ge[me],Xe.id)return Ee=Xe,"continue";var ri=[];ri.push(Xe),Xe.id=I.createGuid();for(var ai=new I.Ray(Xe.coord,Be),hi=[],ni=0;ni<ue.length-ze-1;ni++){var ti=I.Ray.getPoint(ai,ve[ni+ze],new I.Cartesian3);ai.origin=ti;var si=I.Matrix4.multiplyByPoint(oe,ti,new I.Cartesian3),ci=wt.cartesianToLonLatHeight(si);ci.length=2;var oi=(0,H.point)(ci),di=(0,H.booleanContains)(xt.polygon_turf,oi);if(di)hi.push(ti);else break}(0,u.default)(hi).call(hi,function(gi,Ki){var ui=this;(0,B.default)(this,ei);var Mi=(0,a.default)(Te).call(Te,function(Di){return(0,B.default)(this,ui),I.Math.equalsEpsilon(Di,gi.z,I.Math.EPSILON1)}.bind(this)),yi=ue[Mi];M.assert(yi instanceof Array,"\u6B64\u65F6arr\u4E0D\u662F\u6570\u7EC4\u3002",ue,Te,gi.z);for(var Ci=0,pi,wi=yi.length;Ci<wi;Ci++){pi=yi[Ci];var Pi=I.Cartesian3.distance(pi.coord,gi);if(!(Pi>=Ce)&&Pi<Ce){if(pi.id)continue;ri.push(pi),pi.id=Xe.id;break}}}.bind(this)),we.push(ri),Ee=Xe},me=0,Ee,Ye=Ge.length;me<Ye;me++)var Qe=le(Ee)}(0,u.default)(at).call(at,function($e){(0,B.default)(this,xt),$e.id&&delete $e.id}.bind(this));var Ke=0;we.forEach(function($e){var Xe=this;(0,B.default)(this,xt),$e.forEach(function(ei){(0,B.default)(this,Xe),++Ke}.bind(this))}.bind(this)),M.assert(Ke==at.length,"\u5E76\u672A\u5C06\u6240\u6709\u70B9\u6309\u592A\u9633\u5149\u7EBF\u4E32\u8054\u8D77");var qe=(0,y.default)(we).call(we,function($e){return(0,B.default)(this,xt),$e.length==1}.bind(this)),ii=[];qe.forEach(function($e){(0,B.default)(this,xt),ii.push($e[0])}.bind(this)),we=(0,y.default)(we).call(we,function($e){return(0,B.default)(this,xt),$e.length>1}.bind(this)),we.forEach(function($e){var Xe=this;(0,B.default)(this,xt);var ei=(0,u.default)($e).call($e,function(ri){return(0,B.default)(this,Xe),I.Matrix4.multiplyByPoint(oe,ri.coord,new I.Cartesian3)}.bind(this))}.bind(this)),(0,u.default)(we).call(we,function($e){var Xe=this;(0,B.default)(this,xt);var ei=I.Matrix4.multiplyByPoint(oe,$e[0].coord,new I.Cartesian3),ri=new I.Ray(ei,De),ai=I.Ray.getPoint(ri,150,new I.Cartesian3),hi=new I.Ray(ai,Oe),ni=new Date().getTime(),ti=it.scene.pickFromRay(hi,null,1),si=new Date().getTime();if(window.time+=si-ni,window.score++,ti&&ti.position){var ci=wt.cartesianToLonLatHeight(ti.position)[2];(0,u.default)($e).call($e,function(oi){(0,B.default)(this,Xe);var di=I.Matrix4.multiplyByPoint(oe,oi.coord,new I.Cartesian3),gi=wt.cartesianToLonLatHeight(di)[2];gi<ci?oi.shadow=oi.shadow?++oi.shadow:1:oi.sunshine=oi.sunshine?++oi.sunshine:1}.bind(this))}}.bind(this)),(0,u.default)(ii).call(ii,function($e){(0,B.default)(this,xt);var Xe=I.Matrix4.multiplyByPoint(oe,$e.coord,new I.Cartesian3),ei=new I.Ray(Xe,De),ri=new Date().getTime(),ai=it.scene.pickFromRay(ei,null,1),hi=new Date().getTime();window.time+=hi-ri,window.score++,ai&&ai.position?$e.shadow=$e.shadow?++$e.shadow:1:$e.sunshine=$e.sunshine?++$e.sunshine:1}.bind(this));var Ei=[],li=[];Ei.forEach(function($e){var Xe=this;(0,B.default)(this,xt),$e.childNodes&&$e.childNodes.length&&(li=(0,r.default)(li).call(li,$e.childNodes)),!$e.childNodes&&$e.content.length>=1&&(M.assert($e.content.length==1,"\u8282\u70B9\u8FD8\u53EF\u5206\uFF0Ccontent\u4E0D\u4E3A1"),$e.content.forEach(function(ei){(0,B.default)(this,Xe),ei.shadow=ei.shadow?++ei.shadow:1}.bind(this)))}.bind(this)),li.length&&_.bind(this)(li)}M.timeEnd("\u70B9\u7684\u8FD0\u7B97")}.bind(this)),this.clear();var _t=nt(It.root.content),ee;try{for(_t.s();!(ee=_t.n()).done;){var re=ee.value,de=I.Matrix4.multiplyByPoint(oe,re,new I.Cartesian3);re.shadow?this._dP(de,re.shadow/this.timeArr.length):this._dP(de,1)}}catch(Se){_t.e(Se)}finally{_t.f()}M.timeEnd("\u65B0\u7B97\u6CD5\u603B\u8FD0\u7B97")}},{key:"computeShadowRatio_copy",value:function(){var lt=this,ot,it=this.prop.viewer,yt=Math.min(5e3,this.spacing/2);if(this.timeArr=this.timeArr||[],this.planetaryDirections=this.planetaryDirections||[],this.timeArr.length==0)for(var Ot=this.period[0].clone();I.JulianDate.lessThanOrEquals(Ot,this.period[1]);)this.timeArr.push(Ot.clone()),I.JulianDate.addMinutes(Ot,this.timeInterval,Ot);for(var St=[],Gt=function(Jt){var te,ie=this,oe=[],he=Jt>=lt.blockHeight;(0,u.default)(te=lt.points).call(te,function(ne,ce){(0,B.default)(this,ie);var ge=Jt<=lt.heights[ce];ne=wt.setPositionHeight(it,ne,Jt),ne.SScondition=[],ge&&(ne.underBuilding=!![]),he?he&&lt._dP(ne,1):oe.push(ne)}.bind(this)),!he&&St.push(oe)},Ht=this.bottomHeight;Ht<=this.topHeight;Ht+=this.spacing)Gt(Ht);St.reverse(),window.points_3d=St,(0,u.default)(ot=this.timeArr).call(ot,function(Kt,Jt){var te=this;(0,B.default)(this,lt);var ie=Jt,oe=this.planetaryDirections[Jt];if(!oe){var he=I.Simon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame(Kt),ne=I.Transforms.computeIcrfToFixedMatrix(Kt);I.Matrix3.multiplyByVector(ne,he,he),oe=I.Cartesian3.normalize(he,new I.Cartesian3),this.planetaryDirections[Jt]=oe}var ce=I.Cartesian3.subtract(new I.Cartesian3,oe,new I.Cartesian3),ge=I.Cartesian3.angleBetween(this.normal,oe),Ae=I.Math.toDegrees(ge),It=Math.abs(this.spacing/Math.cos(ge));if(!(ge>=Math.PI)){M.time("\u70B9\u7684\u8FD0\u7B97");for(var Wt=[],_t=function(Oe,Ne){if(Oe=St[Ne],Ne==St.length-1){for(var Ve=0,be,Be=Oe.length;Ve<Be;Ve++)be=Oe[Ve],!be.id&&Wt.push([be]);return re=Oe,"break"}for(var Ue=function(bt){var Bt=this;if(bt=Oe[ke],bt.id)return Ze=bt,"continue";var Qt=[];Qt.push(bt),bt.id=I.createGuid();for(var ue=new I.Ray(bt,ce),Ce=[],Te=1;Te<=St.length-Ne-1;Te++){var He=I.Ray.getPoint(ue,It*Te,new I.Cartesian3),Vt=wt.cartesianToLonLatHeight(He);Vt.length=2;var qt=(0,H.point)(Vt),ae=(0,H.booleanContains)(te.polygon_turf,qt);if(ae)Ce.push(He);else break}(0,u.default)(Ce).call(Ce,function(ve,xe){(0,B.default)(this,Bt);for(var ye=0,Le,Fe=Oe.length;ye<Fe;ye++){Le=Oe[ye];var we=wt.upPosition(it,Le,-te.spacing*(xe+1)),ze=I.Cartesian3.distance(we,ve);if(!(ze>te.spacing/2)&&ze<yt){var Ge=St[Ne+1+xe][ye];if(Ge&&Ge.id)continue;Qt.push(Ge),Ge.id=bt.id;break}}}.bind(this)),Wt.push(Qt),Ze=bt},ke=0,Ze,_=Oe.length;ke<_;ke++)var at=Ue(Ze);re=Oe},ee=0,re,de=St.length;ee<de;ee++){var Se=_t(re,ee);if(Se==="break")break}(0,u.default)(St).call(St,function(pe){var Oe=this;(0,B.default)(this,te),(0,u.default)(pe).call(pe,function(Ne){(0,B.default)(this,Oe),Ne.id&&delete Ne.id}.bind(this))}.bind(this));var Pe=0;Wt.forEach(function(pe){var Oe=this;(0,B.default)(this,te),pe.forEach(function(Ne){(0,B.default)(this,Oe),++Pe}.bind(this))}.bind(this));var De=(0,y.default)(Wt).call(Wt,function(pe){return(0,B.default)(this,te),pe.length==1}.bind(this)),Ie=[];De.forEach(function(pe){(0,B.default)(this,te),Ie.push(pe[0])}.bind(this)),Wt=(0,y.default)(Wt).call(Wt,function(pe){return(0,B.default)(this,te),pe.length>1}.bind(this)),(0,u.default)(Wt).call(Wt,function(pe){var Oe=this;if((0,B.default)(this,te),pe[0].underBuilding){(0,u.default)(pe).call(pe,function(ke){(0,B.default)(this,Oe),ke.shadow=ke.shadow?++ke.shadow:1,ke.SScondition[ie]=0}.bind(this));return}var Ne=new I.Ray(pe[0],oe),Ve=I.Ray.getPoint(Ne,150,new I.Cartesian3),be=new I.Ray(Ve,ce),Be=it.scene.pickFromRay(be);if(window.score++,Be&&Be.position){var Ue=wt.cartesianToLonLatHeight(Be.position)[2];(0,u.default)(pe).call(pe,function(ke){(0,B.default)(this,Oe);var Ze=wt.cartesianToLonLatHeight(ke)[2];Ze<Ue?(ke.shadow=ke.shadow?++ke.shadow:1,ke.SScondition[ie]=0):(ke.sunshine=ke.sunshine?++ke.sunshine:1,ke.SScondition[ie]=1)}.bind(this))}}.bind(this)),(0,u.default)(Ie).call(Ie,function(pe){if((0,B.default)(this,te),pe.underBuilding){pe.shadow=pe.shadow?++pe.shadow:1,pe.SScondition[ie]=0;return}var Oe=new I.Ray(pe,oe),Ne=it.scene.pickFromRay(Oe);window.score++,Ne&&Ne.position?(pe.shadow=pe.shadow?++pe.shadow:1,pe.SScondition[ie]=0):(pe.sunshine=pe.sunshine?++pe.sunshine:1,pe.SScondition[ie]=1)}.bind(this)),M.timeEnd("\u70B9\u7684\u8FD0\u7B97")}}.bind(this)),ter.clear(),(0,u.default)(St).call(St,function(Kt){var Jt=this;(0,B.default)(this,lt),(0,u.default)(Kt).call(Kt,function(te){(0,B.default)(this,Jt);var ie=(parseInt(te.sunshine)||0)/this.timeArr.length;this._dP(te,ie)}.bind(this))}.bind(this)),M.timeEnd("\u65B0\u7B97\u6CD5\u603B\u8FD0\u7B97")}},{key:"_dL",value:function(lt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:![],yt=parseInt(ot/.2);yt=yt==5?4:yt;var Ot=jt(yt/4),St=this.prop.dataSource;St.entities.add({polyline:{positions:lt,width:3,material:Ot}})}},{key:"_dP",value:function(lt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:![];M.assert(ot>=0&&ot<=1,"\u5149\u7167\u7387\u5728\u533A\u95F4\u5916\uFF0C".concat(ot));var yt=jt(ot),Ot=parseInt(ot/.2);Ot=Ot==5?4:Ot;var St=this.primitives[Ot],Gt=St&&St.add({position:lt,color:yt,pixelSize:it?20:null,outlineWidth:it?2:null,id:I.createGuid()+"**:"+ot});it&&(this.lastSelectPoint=Gt)}},{key:"_dB",value:function(lt,ot){var it=ot.x,yt=ot.y,Ot=ot.z,St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Gt=this.prop.dataSource,Ht=new I.Cartesian3(it,yt,Ot);Gt.entities.add({position:lt,box:{dimensions:Ht,fill:![],outline:!![],outlineColor:I.Color.WHITE,outlineWidth:St}})}},{key:"_pointShow",value:function(lt){var ot,it=this;(0,u.default)(ot=this.primitives).call(ot,function(yt){(0,B.default)(this,it),yt.show=lt}.bind(this))}},{key:"setPeriod",value:function(lt,ot){var it,yt;if(lt instanceof Date&&ot instanceof Date){var Ot=I.JulianDate.fromDate;it=Ot(lt,it),yt=Ot(ot,yt)}else if(lt instanceof I.JulianDate&&ot instanceof I.JulianDate)it=lt,yt=ot;else{M.error("encounter error in settimeInterval");return}var St=I.JulianDate.greaterThan(yt,it);St?this.period=[it,yt]:M.error("start should great than end in time")}},{key:"clear",value:function(){var lt=this.prop.dataSource,ot=this.primitives;this.drawControl.clearDraw(),lt.entities.removeAll();var it=nt(ot),yt;try{for(it.s();!(yt=it.n()).done;){var Ot=yt.value;Ot.removeAll()}}catch(Gt){it.e(Gt)}finally{it.f()}var St=this.drawControl.drawCtrl.billboard.getHandler();St.removeInputAction(2)}},{key:"destroy",value:function(){}}]),gt}(At);z.ShadowRatioAnalysis=zt;var Yt=function(){function Zt(ft){(0,E.default)(this,Zt),this.viewer=ft,this.lastStage=null,this.speed_r=2,this.speed_s=2,this.size=0,this.depth=.9,this.density=7,this.brightness_r=.35,this.brightness_s=.35,this.hidden=![]}return(0,N.default)(Zt,[{key:"showSnow",value:function(){var gt=this;if(!this.snowStage){var dt=new I.PostProcessStage({name:"czm_snow",uniforms:{speed:function(){return(0,B.default)(this,gt),this.speed_s}.bind(this),size:function(){return(0,B.default)(this,gt),this.size}.bind(this),depth:function(){return(0,B.default)(this,gt),this.depth}.bind(this),brightness:function(){return(0,B.default)(this,gt),this.brightness_s}.bind(this),hidden:function(){return(0,B.default)(this,gt),this.hidden?0:1}.bind(this)},fragmentShader:this.getSnowShader()});this.viewer.scene.postProcessStages.add(dt),this.snowStage=dt,this.addHeightDetect()}}},{key:"showRain",value:function(){var gt=this;if(!this.rainStage){var dt=new I.PostProcessStage({name:"czm_rain",uniforms:{speed:function(){return(0,B.default)(this,gt),this.speed_r}.bind(this),density:function(){return(0,B.default)(this,gt),this.density}.bind(this),brightness:function(){return(0,B.default)(this,gt),this.brightness_r}.bind(this),hidden:function(){return(0,B.default)(this,gt),this.hidden?0:1}.bind(this)},fragmentShader:this.getRainShader()});this.viewer.scene.postProcessStages.add(dt),this.rainStage=dt,this.addHeightDetect()}}},{key:"addHeightDetect",value:function(){var gt=this.viewer.scene.camera.positionCartographic,dt=gt.height;dt>5e4||!dt?this.hidden=!![]:this.hidden=![];var lt=this;Object.defineProperty(this.viewer.scene.camera,"_positionCartographic",{get:function(){return this.__positionCartographic},set:function(it){this.__positionCartographic=it,it?.height<5e4?lt.hidden=![]:lt.hidden=!![]}}),this.viewer.scene.camera._positionCartographic=gt}},{key:"removeHeightDetect",value:function(){Object.defineProperty(this.viewer.scene.camera,"_positionCartographic",{get:function(){return this.__positionCartographic},set:function(dt){this.__positionCartographic=dt}})}},{key:"rainfall",value:function(gt){this.showRain(),gt==1?(this.speed_r=.5,this.density=20):gt==2?(this.speed_r=2,this.density=7):gt==3?(this.speed_r=3,this.density=4.5):(this.speed_r=4,this.density=2)}},{key:"snowfall",value:function(gt){this.showSnow(),gt==1?(this.speed_s=1,this.size=0,this.depth=0,this.brightness_s=.35):gt==2?(this.speed_s=2,this.size=0,this.depth=0,this.brightness_s=.45):gt==3?(this.speed_s=3,this.size=.02,this.depth=.8,this.brightness_s=.5):(this.speed_s=4,this.size=.03,this.depth=.9,this.brightness_s=.5)}},{key:"removeRainStage",value:function(){this.viewer.scene.postProcessStages.remove(this.rainStage),this.rainStage=null,!this.rainStage&&!this.snowStage&&this.removeHeightDetect()}},{key:"removeSnowStage",value:function(){this.viewer.scene.postProcessStages.remove(this.snowStage),this.snowStage=null,!this.rainStage&&!this.snowStage&&this.removeHeightDetect()}},{key:"removeStage",value:function(){this.removeRainStage(),this.removeSnowStage()}},{key:"getSnowShader",value:function(){return`uniform sampler2D colorTexture;
                          varying vec2 v_textureCoordinates;
                          uniform float speed;
                          uniform float size;
                          uniform float depth;
                          uniform float brightness;
                          uniform float hidden;
                      
                          float snow(vec2 uv,float scale)
                          {
                              float time = czm_frameNumber / 160.0 *speed;
                              float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;
                              uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;
                              uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;
                              p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);
                              k=smoothstep(size,k,sin(f.x+f.y)*0.01);
                              return k*w;
                          }
                      
                          void main(void){
                              vec2 resolution = czm_viewport.zw;
                              vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);
                              vec3 finalColor=vec3(0);
                              float c = 0.0;
                              c+=snow(uv,30.)*.0;
                              c+=snow(uv,20.)*depth*0.5;
                              c+=snow(uv,15.)*depth;
                              c+=snow(uv,10.);
                              c+=snow(uv,8.);
                          c+=snow(uv,6.);
                              c+=snow(uv,5.);
                              finalColor=(vec3(c)); 
                              gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), brightness*hidden); 
                      
                          }
                      `}},{key:"getRainShader",value:function(){return`uniform sampler2D colorTexture;
                   varying vec2 v_textureCoordinates;
                   uniform float speed;
                   uniform float density;
                   uniform float brightness;
                   uniform float hidden;
               
                   float hash(float x){
                       return fract(sin(x*133.3)*13.13);
               }
               
               void main(void){
               
                   float time = czm_frameNumber /160.0 * speed;
               vec2 resolution = czm_viewport.zw;
               
               vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);
               vec3 c=vec3(.6,.7,.8);
               
               float a=-.4;
               float si=sin(a),co=cos(a);
               uv*=mat2(co,-si,si,co);
               uv*=length(uv+vec2(0,4.9))*.3+1.;
               
               float v=1.-clamp(sin(hash(floor(uv.x*100.))*2.) * density,-1.,1.);
               float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.98,0.,1.)*50.;
               c*=v*b; 
               
               gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c,1), brightness*hidden);  
               }
               `}}]),Zt}();z.Weather=Yt},18436:function(X){X.exports=/[\0-\x1F\x7F-\x9F]/},74163:function(X){X.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},97942:function(X){X.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},87613:function(X){X.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},65585:function(X,z,e){"use strict";z.Any=e(50757),z.Cc=e(18436),z.Cf=e(74163),z.P=e(97942),z.Z=e(87613)},50757:function(X){X.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},16261:function(X,z,e){var M,F;/*!
* URI.js - Mutating URLs
* IPv6 Support
*
* Version: 1.19.11
*
* Author: Rodney Rehm
* Web: http://medialize.github.io/URI.js/
*
* Licensed under
*   MIT License http://www.opensource.org/licenses/mit-license
*
*/(function(R,A){"use strict";X.exports?X.exports=A():(M=A,F=typeof M=="function"?M.call(z,e,z,X):M,F!==void 0&&(X.exports=F))})(this,function(R){"use strict";var A=R&&R.IPv6;function T(b){var C=b.toLowerCase(),f=C.split(":"),v=f.length,m=8;f[0]===""&&f[1]===""&&f[2]===""?(f.shift(),f.shift()):f[0]===""&&f[1]===""?f.shift():f[v-1]===""&&f[v-2]===""&&f.pop(),v=f.length,f[v-1].indexOf(".")!==-1&&(m=7);var o;for(o=0;o<v&&f[o]!=="";o++);if(o<m)for(f.splice(o,1,"0000");f.length<m;)f.splice(o,0,"0000");for(var u,l=0;l<m;l++){u=f[l].split("");for(var r=0;r<3&&(u[0]==="0"&&u.length>1);r++)u.splice(0,1);f[l]=u.join("")}var s=-1,c=0,x=0,a=-1,i=!1;for(l=0;l<m;l++)i?f[l]==="0"?x+=1:(i=!1,x>c&&(s=a,c=x)):f[l]==="0"&&(i=!0,a=l,x=1);x>c&&(s=a,c=x),c>1&&f.splice(s,c,""),v=f.length;var n="";for(f[0]===""&&(n=":"),l=0;l<v&&(n+=f[l],l!==v-1);l++)n+=":";return f[v-1]===""&&(n+=":"),n}function D(){return R.IPv6===this&&(R.IPv6=A),this}return{best:T,noConflict:D}})},68776:function(X,z,e){var M,F;/*!
* URI.js - Mutating URLs
* Second Level Domain (SLD) Support
*
* Version: 1.19.11
*
* Author: Rodney Rehm
* Web: http://medialize.github.io/URI.js/
*
* Licensed under
*   MIT License http://www.opensource.org/licenses/mit-license
*
*/(function(R,A){"use strict";X.exports?X.exports=A():(M=A,F=typeof M=="function"?M.call(z,e,z,X):M,F!==void 0&&(X.exports=F))})(this,function(R){"use strict";var A=R&&R.SecondLevelDomains,T={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(D){var b=D.lastIndexOf(".");if(b<=0||b>=D.length-1)return!1;var C=D.lastIndexOf(".",b-1);if(C<=0||C>=b-1)return!1;var f=T.list[D.slice(b+1)];return f?f.indexOf(" "+D.slice(C+1,b)+" ")>=0:!1},is:function(D){var b=D.lastIndexOf(".");if(b<=0||b>=D.length-1)return!1;var C=D.lastIndexOf(".",b-1);if(C>=0)return!1;var f=T.list[D.slice(b+1)];return f?f.indexOf(" "+D.slice(0,b)+" ")>=0:!1},get:function(D){var b=D.lastIndexOf(".");if(b<=0||b>=D.length-1)return null;var C=D.lastIndexOf(".",b-1);if(C<=0||C>=b-1)return null;var f=T.list[D.slice(b+1)];return!f||f.indexOf(" "+D.slice(C+1,b)+" ")<0?null:D.slice(C+1)},noConflict:function(){return R.SecondLevelDomains===this&&(R.SecondLevelDomains=A),this}};return T})},36812:function(X,z,e){var M,F,R;/*!
* URI.js - Mutating URLs
*
* Version: 1.19.11
*
* Author: Rodney Rehm
* Web: http://medialize.github.io/URI.js/
*
* Licensed under
*   MIT License http://www.opensource.org/licenses/mit-license
*
*/(function(A,T){"use strict";X.exports?X.exports=T(e(4344),e(16261),e(68776)):(F=[e(4344),e(16261),e(68776)],M=T,R=typeof M=="function"?M.apply(z,F):M,R!==void 0&&(X.exports=R))})(this,function(A,T,D,b){"use strict";var C=b&&b.URI;function f(P,L){var E=arguments.length>=1,N=arguments.length>=2;if(!(this instanceof f))return E?N?new f(P,L):new f(P):new f;if(P===void 0){if(E)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?P=location.href+"":P=""}if(P===null&&E)throw new TypeError("null is not a valid argument for URI");return this.href(P),L!==void 0?this.absoluteTo(L):this}function v(P){return/^[0-9]+$/.test(P)}f.version="1.19.11";var m=f.prototype,o=Object.prototype.hasOwnProperty;function u(P){return P.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function l(P){return P===void 0?"Undefined":String(Object.prototype.toString.call(P)).slice(8,-1)}function r(P){return l(P)==="Array"}function s(P,L){var E={},N,I;if(l(L)==="RegExp")E=null;else if(r(L))for(N=0,I=L.length;N<I;N++)E[L[N]]=!0;else E[L]=!0;for(N=0,I=P.length;N<I;N++){var G=E&&E[P[N]]!==void 0||!E&&L.test(P[N]);G&&(P.splice(N,1),I--,N--)}return P}function c(P,L){var E,N;if(r(L)){for(E=0,N=L.length;E<N;E++)if(!c(P,L[E]))return!1;return!0}var I=l(L);for(E=0,N=P.length;E<N;E++)if(I==="RegExp"){if(typeof P[E]=="string"&&P[E].match(L))return!0}else if(P[E]===L)return!0;return!1}function x(P,L){if(!r(P)||!r(L)||P.length!==L.length)return!1;P.sort(),L.sort();for(var E=0,N=P.length;E<N;E++)if(P[E]!==L[E])return!1;return!0}function a(P){var L=/^\/+|\/+$/g;return P.replace(L,"")}f._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:f.preventInvalidHostname,duplicateQueryParameters:f.duplicateQueryParameters,escapeQuerySpace:f.escapeQuerySpace}},f.preventInvalidHostname=!1,f.duplicateQueryParameters=!1,f.escapeQuerySpace=!0,f.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,f.idn_expression=/[^a-z0-9\._-]/i,f.punycode_expression=/(xn--)/i,f.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,f.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,f.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},f.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,f.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,f.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},f.hostProtocols=["http","https"],f.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,f.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},f.getDomAttribute=function(P){if(!(!P||!P.nodeName)){var L=P.nodeName.toLowerCase();if(!(L==="input"&&P.type!=="image"))return f.domAttributes[L]}};function i(P){return escape(P)}function n(P){return encodeURIComponent(P).replace(/[!'()*]/g,i).replace(/\*/g,"%2A")}f.encode=n,f.decode=decodeURIComponent,f.iso8859=function(){f.encode=escape,f.decode=unescape},f.unicode=function(){f.encode=n,f.decode=decodeURIComponent},f.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},f.encodeQuery=function(P,L){var E=f.encode(P+"");return L===void 0&&(L=f.escapeQuerySpace),L?E.replace(/%20/g,"+"):E},f.decodeQuery=function(P,L){P+="",L===void 0&&(L=f.escapeQuerySpace);try{return f.decode(L?P.replace(/\+/g,"%20"):P)}catch{return P}};var h={encode:"encode",decode:"decode"},g,d=function(P,L){return function(E){try{return f[L](E+"").replace(f.characters[P][L].expression,function(N){return f.characters[P][L].map[N]})}catch{return E}}};for(g in h)f[g+"PathSegment"]=d("pathname",h[g]),f[g+"UrnPathSegment"]=d("urnpath",h[g]);var y=function(P,L,E){return function(N){var I;E?I=function(U){return f[L](f[E](U))}:I=f[L];for(var G=(N+"").split(P),W=0,Z=G.length;W<Z;W++)G[W]=I(G[W]);return G.join(P)}};f.decodePath=y("/","decodePathSegment"),f.decodeUrnPath=y(":","decodeUrnPathSegment"),f.recodePath=y("/","encodePathSegment","decode"),f.recodeUrnPath=y(":","encodeUrnPathSegment","decode"),f.encodeReserved=d("reserved","encode"),f.parse=function(P,L){var E;return L||(L={preventInvalidHostname:f.preventInvalidHostname}),P=P.replace(f.leading_whitespace_expression,""),P=P.replace(f.ascii_tab_whitespace,""),E=P.indexOf("#"),E>-1&&(L.fragment=P.substring(E+1)||null,P=P.substring(0,E)),E=P.indexOf("?"),E>-1&&(L.query=P.substring(E+1)||null,P=P.substring(0,E)),P=P.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),P=P.replace(/^[/\\]{2,}/i,"//"),P.substring(0,2)==="//"?(L.protocol=null,P=P.substring(2),P=f.parseAuthority(P,L)):(E=P.indexOf(":"),E>-1&&(L.protocol=P.substring(0,E)||null,L.protocol&&!L.protocol.match(f.protocol_expression)?L.protocol=void 0:P.substring(E+1,E+3).replace(/\\/g,"/")==="//"?(P=P.substring(E+3),P=f.parseAuthority(P,L)):(P=P.substring(E+1),L.urn=!0))),L.path=P,L},f.parseHost=function(P,L){P||(P=""),P=P.replace(/\\/g,"/");var E=P.indexOf("/"),N,I;if(E===-1&&(E=P.length),P.charAt(0)==="[")N=P.indexOf("]"),L.hostname=P.substring(1,N)||null,L.port=P.substring(N+2,E)||null,L.port==="/"&&(L.port=null);else{var G=P.indexOf(":"),W=P.indexOf("/"),Z=P.indexOf(":",G+1);Z!==-1&&(W===-1||Z<W)?(L.hostname=P.substring(0,E)||null,L.port=null):(I=P.substring(0,E).split(":"),L.hostname=I[0]||null,L.port=I[1]||null)}return L.hostname&&P.substring(E).charAt(0)!=="/"&&(E++,P="/"+P),L.preventInvalidHostname&&f.ensureValidHostname(L.hostname,L.protocol),L.port&&f.ensureValidPort(L.port),P.substring(E)||"/"},f.parseAuthority=function(P,L){return P=f.parseUserinfo(P,L),f.parseHost(P,L)},f.parseUserinfo=function(P,L){var E=P,N=P.indexOf("\\");N!==-1&&(P=P.replace(/\\/g,"/"));var I=P.indexOf("/"),G=P.lastIndexOf("@",I>-1?I:P.length-1),W;return G>-1&&(I===-1||G<I)?(W=P.substring(0,G).split(":"),L.username=W[0]?f.decode(W[0]):null,W.shift(),L.password=W[0]?f.decode(W.join(":")):null,P=E.substring(G+1)):(L.username=null,L.password=null),P},f.parseQuery=function(P,L){if(!P)return{};if(P=P.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!P)return{};for(var E={},N=P.split("&"),I=N.length,G,W,Z,U=0;U<I;U++)G=N[U].split("="),W=f.decodeQuery(G.shift(),L),Z=G.length?f.decodeQuery(G.join("="),L):null,W!=="__proto__"&&(o.call(E,W)?((typeof E[W]=="string"||E[W]===null)&&(E[W]=[E[W]]),E[W].push(Z)):E[W]=Z);return E},f.build=function(P){var L="",E=!1;return P.protocol&&(L+=P.protocol+":"),!P.urn&&(L||P.hostname)&&(L+="//",E=!0),L+=f.buildAuthority(P)||"",typeof P.path=="string"&&(P.path.charAt(0)!=="/"&&E&&(L+="/"),L+=P.path),typeof P.query=="string"&&P.query&&(L+="?"+P.query),typeof P.fragment=="string"&&P.fragment&&(L+="#"+P.fragment),L},f.buildHost=function(P){var L="";if(P.hostname)f.ip6_expression.test(P.hostname)?L+="["+P.hostname+"]":L+=P.hostname;else return"";return P.port&&(L+=":"+P.port),L},f.buildAuthority=function(P){return f.buildUserinfo(P)+f.buildHost(P)},f.buildUserinfo=function(P){var L="";return P.username&&(L+=f.encode(P.username)),P.password&&(L+=":"+f.encode(P.password)),L&&(L+="@"),L},f.buildQuery=function(P,L,E){var N="",I,G,W,Z;for(G in P)if(G!=="__proto__"&&o.call(P,G))if(r(P[G]))for(I={},W=0,Z=P[G].length;W<Z;W++)P[G][W]!==void 0&&I[P[G][W]+""]===void 0&&(N+="&"+f.buildQueryParameter(G,P[G][W],E),L!==!0&&(I[P[G][W]+""]=!0));else P[G]!==void 0&&(N+="&"+f.buildQueryParameter(G,P[G],E));return N.substring(1)},f.buildQueryParameter=function(P,L,E){return f.encodeQuery(P,E)+(L!==null?"="+f.encodeQuery(L,E):"")},f.addQuery=function(P,L,E){if(typeof L=="object")for(var N in L)o.call(L,N)&&f.addQuery(P,N,L[N]);else if(typeof L=="string"){if(P[L]===void 0){P[L]=E;return}else typeof P[L]=="string"&&(P[L]=[P[L]]);r(E)||(E=[E]),P[L]=(P[L]||[]).concat(E)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},f.setQuery=function(P,L,E){if(typeof L=="object")for(var N in L)o.call(L,N)&&f.setQuery(P,N,L[N]);else if(typeof L=="string")P[L]=E===void 0?null:E;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},f.removeQuery=function(P,L,E){var N,I,G;if(r(L))for(N=0,I=L.length;N<I;N++)P[L[N]]=void 0;else if(l(L)==="RegExp")for(G in P)L.test(G)&&(P[G]=void 0);else if(typeof L=="object")for(G in L)o.call(L,G)&&f.removeQuery(P,G,L[G]);else if(typeof L=="string")E!==void 0?l(E)==="RegExp"?!r(P[L])&&E.test(P[L])?P[L]=void 0:P[L]=s(P[L],E):P[L]===String(E)&&(!r(E)||E.length===1)?P[L]=void 0:r(P[L])&&(P[L]=s(P[L],E)):P[L]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},f.hasQuery=function(P,L,E,N){switch(l(L)){case"String":break;case"RegExp":for(var I in P)if(o.call(P,I)&&L.test(I)&&(E===void 0||f.hasQuery(P,I,E)))return!0;return!1;case"Object":for(var G in L)if(o.call(L,G)&&!f.hasQuery(P,G,L[G]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(l(E)){case"Undefined":return L in P;case"Boolean":var W=!!(r(P[L])?P[L].length:P[L]);return E===W;case"Function":return!!E(P[L],L,P);case"Array":if(!r(P[L]))return!1;var Z=N?c:x;return Z(P[L],E);case"RegExp":return r(P[L])?N?c(P[L],E):!1:!!(P[L]&&P[L].match(E));case"Number":E=String(E);case"String":return r(P[L])?N?c(P[L],E):!1:P[L]===E;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},f.joinPaths=function(){for(var P=[],L=[],E=0,N=0;N<arguments.length;N++){var I=new f(arguments[N]);P.push(I);for(var G=I.segment(),W=0;W<G.length;W++)typeof G[W]=="string"&&L.push(G[W]),G[W]&&E++}if(!L.length||!E)return new f("");var Z=new f("").segment(L);return(P[0].path()===""||P[0].path().slice(0,1)==="/")&&Z.path("/"+Z.path()),Z.normalize()},f.commonPath=function(P,L){var E=Math.min(P.length,L.length),N;for(N=0;N<E;N++)if(P.charAt(N)!==L.charAt(N)){N--;break}return N<1?P.charAt(0)===L.charAt(0)&&P.charAt(0)==="/"?"/":"":((P.charAt(N)!=="/"||L.charAt(N)!=="/")&&(N=P.substring(0,N).lastIndexOf("/")),P.substring(0,N+1))},f.withinString=function(P,L,E){E||(E={});var N=E.start||f.findUri.start,I=E.end||f.findUri.end,G=E.trim||f.findUri.trim,W=E.parens||f.findUri.parens,Z=/[a-z0-9-]=["']?$/i;for(N.lastIndex=0;;){var U=N.exec(P);if(!U)break;var H=U.index;if(E.ignoreHtml){var V=P.slice(Math.max(H-3,0),H);if(V&&Z.test(V))continue}for(var Y=H+P.slice(H).search(I),$=P.slice(H,Y),K=-1;;){var J=W.exec($);if(!J)break;var Q=J.index+J[0].length;K=Math.max(K,Q)}if(K>-1?$=$.slice(0,K)+$.slice(K).replace(G,""):$=$.replace(G,""),!($.length<=U[0].length)&&!(E.ignore&&E.ignore.test($))){Y=H+$.length;var et=L($,H,Y,P);if(et===void 0){N.lastIndex=Y;continue}et=String(et),P=P.slice(0,H)+et+P.slice(Y),N.lastIndex=H+et.length}}return N.lastIndex=0,P},f.ensureValidHostname=function(P,L){var E=!!P,N=!!L,I=!1;if(N&&(I=c(f.hostProtocols,L)),I&&!E)throw new TypeError("Hostname cannot be empty, if protocol is "+L);if(P&&P.match(f.invalid_hostname_characters)){if(!A)throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(A.toASCII(P).match(f.invalid_hostname_characters))throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-:_]')}},f.ensureValidPort=function(P){if(P){var L=Number(P);if(!(v(L)&&L>0&&L<65536))throw new TypeError('Port "'+P+'" is not a valid port')}},f.noConflict=function(P){if(P){var L={URI:this.noConflict()};return b.URITemplate&&typeof b.URITemplate.noConflict=="function"&&(L.URITemplate=b.URITemplate.noConflict()),b.IPv6&&typeof b.IPv6.noConflict=="function"&&(L.IPv6=b.IPv6.noConflict()),b.SecondLevelDomains&&typeof b.SecondLevelDomains.noConflict=="function"&&(L.SecondLevelDomains=b.SecondLevelDomains.noConflict()),L}else b.URI===this&&(b.URI=C);return this},m.build=function(P){return P===!0?this._deferred_build=!0:(P===void 0||this._deferred_build)&&(this._string=f.build(this._parts),this._deferred_build=!1),this},m.clone=function(){return new f(this)},m.valueOf=m.toString=function(){return this.build(!1)._string};function p(P){return function(L,E){return L===void 0?this._parts[P]||"":(this._parts[P]=L||null,this.build(!E),this)}}function w(P,L){return function(E,N){return E===void 0?this._parts[P]||"":(E!==null&&(E=E+"",E.charAt(0)===L&&(E=E.substring(1))),this._parts[P]=E,this.build(!N),this)}}m.protocol=p("protocol"),m.username=p("username"),m.password=p("password"),m.hostname=p("hostname"),m.port=p("port"),m.query=w("query","?"),m.fragment=w("fragment","#"),m.search=function(P,L){var E=this.query(P,L);return typeof E=="string"&&E.length?"?"+E:E},m.hash=function(P,L){var E=this.fragment(P,L);return typeof E=="string"&&E.length?"#"+E:E},m.pathname=function(P,L){if(P===void 0||P===!0){var E=this._parts.path||(this._parts.hostname?"/":"");return P?(this._parts.urn?f.decodeUrnPath:f.decodePath)(E):E}else return this._parts.urn?this._parts.path=P?f.recodeUrnPath(P):"":this._parts.path=P?f.recodePath(P):"/",this.build(!L),this},m.path=m.pathname,m.href=function(P,L){var E;if(P===void 0)return this.toString();this._string="",this._parts=f._parts();var N=P instanceof f,I=typeof P=="object"&&(P.hostname||P.path||P.pathname);if(P.nodeName){var G=f.getDomAttribute(P);P=P[G]||"",I=!1}if(!N&&I&&P.pathname!==void 0&&(P=P.toString()),typeof P=="string"||P instanceof String)this._parts=f.parse(String(P),this._parts);else if(N||I){var W=N?P._parts:P;for(E in W)E!=="query"&&o.call(this._parts,E)&&(this._parts[E]=W[E]);W.query&&this.query(W.query,!1)}else throw new TypeError("invalid input");return this.build(!L),this},m.is=function(P){var L=!1,E=!1,N=!1,I=!1,G=!1,W=!1,Z=!1,U=!this._parts.urn;switch(this._parts.hostname&&(U=!1,E=f.ip4_expression.test(this._parts.hostname),N=f.ip6_expression.test(this._parts.hostname),L=E||N,I=!L,G=I&&D&&D.has(this._parts.hostname),W=I&&f.idn_expression.test(this._parts.hostname),Z=I&&f.punycode_expression.test(this._parts.hostname)),P.toLowerCase()){case"relative":return U;case"absolute":return!U;case"domain":case"name":return I;case"sld":return G;case"ip":return L;case"ip4":case"ipv4":case"inet4":return E;case"ip6":case"ipv6":case"inet6":return N;case"idn":return W;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return Z}return null};var S=m.protocol,O=m.port,B=m.hostname;m.protocol=function(P,L){if(P&&(P=P.replace(/:(\/\/)?$/,""),!P.match(f.protocol_expression)))throw new TypeError('Protocol "'+P+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return S.call(this,P,L)},m.scheme=m.protocol,m.port=function(P,L){return this._parts.urn?P===void 0?"":this:(P!==void 0&&(P===0&&(P=null),P&&(P+="",P.charAt(0)===":"&&(P=P.substring(1)),f.ensureValidPort(P))),O.call(this,P,L))},m.hostname=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(P!==void 0){var E={preventInvalidHostname:this._parts.preventInvalidHostname},N=f.parseHost(P,E);if(N!=="/")throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-]');P=E.hostname,this._parts.preventInvalidHostname&&f.ensureValidHostname(P,this._parts.protocol)}return B.call(this,P,L)},m.origin=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(P===void 0){var E=this.protocol(),N=this.authority();return N?(E?E+"://":"")+this.authority():""}else{var I=f(P);return this.protocol(I.protocol()).authority(I.authority()).build(!L),this}},m.host=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(P===void 0)return this._parts.hostname?f.buildHost(this._parts):"";var E=f.parseHost(P,this._parts);if(E!=="/")throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-]');return this.build(!L),this},m.authority=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(P===void 0)return this._parts.hostname?f.buildAuthority(this._parts):"";var E=f.parseAuthority(P,this._parts);if(E!=="/")throw new TypeError('Hostname "'+P+'" contains characters other than [A-Z0-9.-]');return this.build(!L),this},m.userinfo=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(P===void 0){var E=f.buildUserinfo(this._parts);return E&&E.substring(0,E.length-1)}else return P[P.length-1]!=="@"&&(P+="@"),f.parseUserinfo(P,this._parts),this.build(!L),this},m.resource=function(P,L){var E;return P===void 0?this.path()+this.search()+this.hash():(E=f.parse(P),this._parts.path=E.path,this._parts.query=E.query,this._parts.fragment=E.fragment,this.build(!L),this)},m.subdomain=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(P===void 0){if(!this._parts.hostname||this.is("IP"))return"";var E=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,E)||""}else{var N=this._parts.hostname.length-this.domain().length,I=this._parts.hostname.substring(0,N),G=new RegExp("^"+u(I));if(P&&P.charAt(P.length-1)!=="."&&(P+="."),P.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return P&&f.ensureValidHostname(P,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(G,P),this.build(!L),this}},m.domain=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(typeof P=="boolean"&&(L=P,P=void 0),P===void 0){if(!this._parts.hostname||this.is("IP"))return"";var E=this._parts.hostname.match(/\./g);if(E&&E.length<2)return this._parts.hostname;var N=this._parts.hostname.length-this.tld(L).length-1;return N=this._parts.hostname.lastIndexOf(".",N-1)+1,this._parts.hostname.substring(N)||""}else{if(!P)throw new TypeError("cannot set domain empty");if(P.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(f.ensureValidHostname(P,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=P;else{var I=new RegExp(u(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(I,P)}return this.build(!L),this}},m.tld=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(typeof P=="boolean"&&(L=P,P=void 0),P===void 0){if(!this._parts.hostname||this.is("IP"))return"";var E=this._parts.hostname.lastIndexOf("."),N=this._parts.hostname.substring(E+1);return L!==!0&&D&&D.list[N.toLowerCase()]&&D.get(this._parts.hostname)||N}else{var I;if(P)if(P.match(/[^a-zA-Z0-9-]/))if(D&&D.is(P))I=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(I,P);else throw new TypeError('TLD "'+P+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");I=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(I,P)}else throw new TypeError("cannot set TLD empty");return this.build(!L),this}},m.directory=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(P===void 0||P===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var E=this._parts.path.length-this.filename().length-1,N=this._parts.path.substring(0,E)||(this._parts.hostname?"/":"");return P?f.decodePath(N):N}else{var I=this._parts.path.length-this.filename().length,G=this._parts.path.substring(0,I),W=new RegExp("^"+u(G));return this.is("relative")||(P||(P="/"),P.charAt(0)!=="/"&&(P="/"+P)),P&&P.charAt(P.length-1)!=="/"&&(P+="/"),P=f.recodePath(P),this._parts.path=this._parts.path.replace(W,P),this.build(!L),this}},m.filename=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(typeof P!="string"){if(!this._parts.path||this._parts.path==="/")return"";var E=this._parts.path.lastIndexOf("/"),N=this._parts.path.substring(E+1);return P?f.decodePathSegment(N):N}else{var I=!1;P.charAt(0)==="/"&&(P=P.substring(1)),P.match(/\.?\//)&&(I=!0);var G=new RegExp(u(this.filename())+"$");return P=f.recodePath(P),this._parts.path=this._parts.path.replace(G,P),I?this.normalizePath(L):this.build(!L),this}},m.suffix=function(P,L){if(this._parts.urn)return P===void 0?"":this;if(P===void 0||P===!0){if(!this._parts.path||this._parts.path==="/")return"";var E=this.filename(),N=E.lastIndexOf("."),I,G;return N===-1?"":(I=E.substring(N+1),G=/^[a-z0-9%]+$/i.test(I)?I:"",P?f.decodePathSegment(G):G)}else{P.charAt(0)==="."&&(P=P.substring(1));var W=this.suffix(),Z;if(W)P?Z=new RegExp(u(W)+"$"):Z=new RegExp(u("."+W)+"$");else{if(!P)return this;this._parts.path+="."+f.recodePath(P)}return Z&&(P=f.recodePath(P),this._parts.path=this._parts.path.replace(Z,P)),this.build(!L),this}},m.segment=function(P,L,E){var N=this._parts.urn?":":"/",I=this.path(),G=I.substring(0,1)==="/",W=I.split(N);if(P!==void 0&&typeof P!="number"&&(E=L,L=P,P=void 0),P!==void 0&&typeof P!="number")throw new Error('Bad segment "'+P+'", must be 0-based integer');if(G&&W.shift(),P<0&&(P=Math.max(W.length+P,0)),L===void 0)return P===void 0?W:W[P];if(P===null||W[P]===void 0)if(r(L)){W=[];for(var Z=0,U=L.length;Z<U;Z++)!L[Z].length&&(!W.length||!W[W.length-1].length)||(W.length&&!W[W.length-1].length&&W.pop(),W.push(a(L[Z])))}else(L||typeof L=="string")&&(L=a(L),W[W.length-1]===""?W[W.length-1]=L:W.push(L));else L?W[P]=a(L):W.splice(P,1);return G&&W.unshift(""),this.path(W.join(N),E)},m.segmentCoded=function(P,L,E){var N,I,G;if(typeof P!="number"&&(E=L,L=P,P=void 0),L===void 0){if(N=this.segment(P,L,E),!r(N))N=N!==void 0?f.decode(N):void 0;else for(I=0,G=N.length;I<G;I++)N[I]=f.decode(N[I]);return N}if(!r(L))L=typeof L=="string"||L instanceof String?f.encode(L):L;else for(I=0,G=L.length;I<G;I++)L[I]=f.encode(L[I]);return this.segment(P,L,E)};var k=m.query;return m.query=function(P,L){if(P===!0)return f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof P=="function"){var E=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace),N=P.call(this,E);return this._parts.query=f.buildQuery(N||E,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!L),this}else return P!==void 0&&typeof P!="string"?(this._parts.query=f.buildQuery(P,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!L),this):k.call(this,P,L)},m.setQuery=function(P,L,E){var N=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof P=="string"||P instanceof String)N[P]=L!==void 0?L:null;else if(typeof P=="object")for(var I in P)o.call(P,I)&&(N[I]=P[I]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=f.buildQuery(N,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof P!="string"&&(E=L),this.build(!E),this},m.addQuery=function(P,L,E){var N=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return f.addQuery(N,P,L===void 0?null:L),this._parts.query=f.buildQuery(N,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof P!="string"&&(E=L),this.build(!E),this},m.removeQuery=function(P,L,E){var N=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return f.removeQuery(N,P,L),this._parts.query=f.buildQuery(N,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof P!="string"&&(E=L),this.build(!E),this},m.hasQuery=function(P,L,E){var N=f.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return f.hasQuery(N,P,L,E)},m.setSearch=m.setQuery,m.addSearch=m.addQuery,m.removeSearch=m.removeQuery,m.hasSearch=m.hasQuery,m.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},m.normalizeProtocol=function(P){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!P)),this},m.normalizeHostname=function(P){return this._parts.hostname&&(this.is("IDN")&&A?this._parts.hostname=A.toASCII(this._parts.hostname):this.is("IPv6")&&T&&(this._parts.hostname=T.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!P)),this},m.normalizePort=function(P){return typeof this._parts.protocol=="string"&&this._parts.port===f.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!P)),this},m.normalizePath=function(P){var L=this._parts.path;if(!L)return this;if(this._parts.urn)return this._parts.path=f.recodeUrnPath(this._parts.path),this.build(!P),this;if(this._parts.path==="/")return this;L=f.recodePath(L);var E,N="",I,G;for(L.charAt(0)!=="/"&&(E=!0,L="/"+L),(L.slice(-3)==="/.."||L.slice(-2)==="/.")&&(L+="/"),L=L.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),E&&(N=L.substring(1).match(/^(\.\.\/)+/)||"",N&&(N=N[0]));I=L.search(/\/\.\.(\/|$)/),I!==-1;){if(I===0){L=L.substring(3);continue}G=L.substring(0,I).lastIndexOf("/"),G===-1&&(G=I),L=L.substring(0,G)+L.substring(I+3)}return E&&this.is("relative")&&(L=N+L.substring(1)),this._parts.path=L,this.build(!P),this},m.normalizePathname=m.normalizePath,m.normalizeQuery=function(P){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(f.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!P)),this},m.normalizeFragment=function(P){return this._parts.fragment||(this._parts.fragment=null,this.build(!P)),this},m.normalizeSearch=m.normalizeQuery,m.normalizeHash=m.normalizeFragment,m.iso8859=function(){var P=f.encode,L=f.decode;f.encode=escape,f.decode=decodeURIComponent;try{this.normalize()}finally{f.encode=P,f.decode=L}return this},m.unicode=function(){var P=f.encode,L=f.decode;f.encode=n,f.decode=unescape;try{this.normalize()}finally{f.encode=P,f.decode=L}return this},m.readable=function(){var P=this.clone();P.username("").password("").normalize();var L="";if(P._parts.protocol&&(L+=P._parts.protocol+"://"),P._parts.hostname&&(P.is("punycode")&&A?(L+=A.toUnicode(P._parts.hostname),P._parts.port&&(L+=":"+P._parts.port)):L+=P.host()),P._parts.hostname&&P._parts.path&&P._parts.path.charAt(0)!=="/"&&(L+="/"),L+=P.path(!0),P._parts.query){for(var E="",N=0,I=P._parts.query.split("&"),G=I.length;N<G;N++){var W=(I[N]||"").split("=");E+="&"+f.decodeQuery(W[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),W[1]!==void 0&&(E+="="+f.decodeQuery(W[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}L+="?"+E.substring(1)}return L+=f.decodeQuery(P.hash(),!0),L},m.absoluteTo=function(P){var L=this.clone(),E=["protocol","username","password","hostname","port"],N,I,G;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(P instanceof f||(P=new f(P)),L._parts.protocol||(L._parts.protocol=P._parts.protocol,this._parts.hostname))return L;for(I=0;G=E[I];I++)L._parts[G]=P._parts[G];return L._parts.path?(L._parts.path.substring(-2)===".."&&(L._parts.path+="/"),L.path().charAt(0)!=="/"&&(N=P.directory(),N=N||(P.path().indexOf("/")===0?"/":""),L._parts.path=(N?N+"/":"")+L._parts.path,L.normalizePath())):(L._parts.path=P._parts.path,L._parts.query||(L._parts.query=P._parts.query)),L.build(),L},m.relativeTo=function(P){var L=this.clone().normalize(),E,N,I,G,W;if(L._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(P=new f(P).normalize(),E=L._parts,N=P._parts,G=L.path(),W=P.path(),G.charAt(0)!=="/")throw new Error("URI is already relative");if(W.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(E.protocol===N.protocol&&(E.protocol=null),E.username!==N.username||E.password!==N.password||E.protocol!==null||E.username!==null||E.password!==null)return L.build();if(E.hostname===N.hostname&&E.port===N.port)E.hostname=null,E.port=null;else return L.build();if(G===W)return E.path="",L.build();if(I=f.commonPath(G,W),!I)return L.build();var Z=N.path.substring(I.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return E.path=Z+E.path.substring(I.length)||"./",L.build()},m.equals=function(P){var L=this.clone(),E=new f(P),N={},I={},G={},W,Z,U;if(L.normalize(),E.normalize(),L.toString()===E.toString())return!0;if(W=L.query(),Z=E.query(),L.query(""),E.query(""),L.toString()!==E.toString()||W.length!==Z.length)return!1;N=f.parseQuery(W,this._parts.escapeQuerySpace),I=f.parseQuery(Z,this._parts.escapeQuerySpace);for(U in N)if(o.call(N,U)){if(r(N[U])){if(!x(N[U],I[U]))return!1}else if(N[U]!==I[U])return!1;G[U]=!0}for(U in I)if(o.call(I,U)&&!G[U])return!1;return!0},m.preventInvalidHostname=function(P){return this._parts.preventInvalidHostname=!!P,this},m.duplicateQueryParameters=function(P){return this._parts.duplicateQueryParameters=!!P,this},m.escapeQuerySpace=function(P){return this._parts.escapeQuerySpace=!!P,this},f})},57526:function(X,z,e){var M,F,R;/*!
* URI.js - Mutating URLs
* URI Template Support - http://tools.ietf.org/html/rfc6570
*
* Version: 1.19.11
*
* Author: Rodney Rehm
* Web: http://medialize.github.io/URI.js/
*
* Licensed under
*   MIT License http://www.opensource.org/licenses/mit-license
*
*/(function(A,T){"use strict";X.exports?X.exports=T(e(36812)):(F=[e(36812)],M=T,R=typeof M=="function"?M.apply(z,F):M,R!==void 0&&(X.exports=R))})(this,function(A,T){"use strict";var D=T&&T.URITemplate,b=Object.prototype.hasOwnProperty;function C(o){return C._cache[o]?C._cache[o]:this instanceof C?(this.expression=o,C._cache[o]=this,this):new C(o)}function f(o){this.data=o,this.cache={}}var v=C.prototype,m={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return C._cache={},C.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,C.VARIABLE_PATTERN=/^([^*:.](?:\.?[^*:.])*)((\*)|:(\d+))?$/,C.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_.]/,C.LITERAL_PATTERN=/[<>{}"`^| \\]/,C.expand=function(o,u,l){var r=m[o.operator],s=r.named?"Named":"Unnamed",c=o.variables,x=[],a,i,n;for(n=0;i=c[n];n++){if(a=u.get(i.name),a.type===0&&l&&l.strict)throw new Error('Missing expansion value for variable "'+i.name+'"');if(!a.val.length){a.type&&x.push("");continue}if(a.type>1&&i.maxlength)throw new Error('Invalid expression: Prefix modifier not applicable to variable "'+i.name+'"');x.push(C["expand"+s](a,r,i.explode,i.explode&&r.separator||",",i.maxlength,i.name))}return x.length?r.prefix+x.join(r.separator):""},C.expandNamed=function(o,u,l,r,s,c){var x="",a=u.encode,i=u.empty_name_separator,n=!o[a].length,h=o.type===2?"":A[a](c),g,d,y;for(d=0,y=o.val.length;d<y;d++)s?(g=A[a](o.val[d][1].substring(0,s)),o.type===2&&(h=A[a](o.val[d][0].substring(0,s)))):n?(g=A[a](o.val[d][1]),o.type===2?(h=A[a](o.val[d][0]),o[a].push([h,g])):o[a].push([void 0,g])):(g=o[a][d][1],o.type===2&&(h=o[a][d][0])),x&&(x+=r),l?x+=h+(i||g?"=":"")+g:(d||(x+=A[a](c)+(i||g?"=":"")),o.type===2&&(x+=h+","),x+=g);return x},C.expandUnnamed=function(o,u,l,r,s){var c="",x=u.encode,a=u.empty_name_separator,i=!o[x].length,n,h,g,d;for(g=0,d=o.val.length;g<d;g++)s?h=A[x](o.val[g][1].substring(0,s)):i?(h=A[x](o.val[g][1]),o[x].push([o.type===2?A[x](o.val[g][0]):void 0,h])):h=o[x][g][1],c&&(c+=r),o.type===2&&(s?n=A[x](o.val[g][0].substring(0,s)):n=o[x][g][0],c+=n,l?c+=a||h?"=":"":c+=","),c+=h;return c},C.noConflict=function(){return T.URITemplate===C&&(T.URITemplate=D),C},v.expand=function(o,u){var l="";(!this.parts||!this.parts.length)&&this.parse(),o instanceof f||(o=new f(o));for(var r=0,s=this.parts.length;r<s;r++)l+=typeof this.parts[r]=="string"?this.parts[r]:C.expand(this.parts[r],o,u);return l},v.parse=function(){var o=this.expression,u=C.EXPRESSION_PATTERN,l=C.VARIABLE_PATTERN,r=C.VARIABLE_NAME_PATTERN,s=C.LITERAL_PATTERN,c=[],x=0,a,i,n,h=function(y){if(y.match(s))throw new Error('Invalid Literal "'+y+'"');return y};for(u.lastIndex=0;;){if(i=u.exec(o),i===null){c.push(h(o.substring(x)));break}else c.push(h(o.substring(x,i.index))),x=i.index+i[0].length;if(m[i[1]]){if(!i[3])throw new Error('Unclosed Expression "'+i[0]+'"')}else throw new Error('Unknown Operator "'+i[1]+'" in "'+i[0]+'"');a=i[2].split(",");for(var g=0,d=a.length;g<d;g++){if(n=a[g].match(l),n===null)throw new Error('Invalid Variable "'+a[g]+'" in "'+i[0]+'"');if(n[1].match(r))throw new Error('Invalid Variable Name "'+n[1]+'" in "'+i[0]+'"');a[g]={name:n[1],explode:!!n[3],maxlength:n[4]&&parseInt(n[4],10)}}if(!a.length)throw new Error('Expression Missing Variable(s) "'+i[0]+'"');c.push({expression:i[0],operator:i[1],variables:a})}return c.length||c.push(h(o)),this.parts=c,this},f.prototype.get=function(o){var u=this.data,l={type:0,val:[],encode:[],encodeReserved:[]},r,s,c;if(this.cache[o]!==void 0)return this.cache[o];if(this.cache[o]=l,String(Object.prototype.toString.call(u))==="[object Function]"?c=u(o):String(Object.prototype.toString.call(u[o]))==="[object Function]"?c=u[o](o):c=u[o],c==null)return l;if(String(Object.prototype.toString.call(c))==="[object Array]"){for(r=0,s=c.length;r<s;r++)c[r]!==void 0&&c[r]!==null&&l.val.push([void 0,String(c[r])]);l.val.length&&(l.type=3)}else if(String(Object.prototype.toString.call(c))==="[object Object]"){for(r in c)b.call(c,r)&&c[r]!==void 0&&c[r]!==null&&l.val.push([r,String(c[r])]);l.val.length&&(l.type=2)}else l.type=1,l.val.push([void 0,String(c)]);return l},A.expand=function(o,u){var l=new C(o),r=l.expand(u);return new A(r)},C})},4344:function(X,z,e){X=e.nmd(X);var M;/*! https://mths.be/punycode v1.4.0 by @mathias */(function(F){var R=z&&!z.nodeType&&z,A=X&&!X.nodeType&&X,T=typeof e.g=="object"&&e.g;(T.global===T||T.window===T||T.self===T)&&(F=T);var D,b=2147483647,C=36,f=1,v=26,m=38,o=700,u=72,l=128,r="-",s=/^xn--/,c=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,a={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},i=C-f,n=Math.floor,h=String.fromCharCode,g;function d(I){throw new RangeError(a[I])}function y(I,G){for(var W=I.length,Z=[];W--;)Z[W]=G(I[W]);return Z}function p(I,G){var W=I.split("@"),Z="";W.length>1&&(Z=W[0]+"@",I=W[1]),I=I.replace(x,".");var U=I.split("."),H=y(U,G).join(".");return Z+H}function w(I){for(var G=[],W=0,Z=I.length,U,H;W<Z;)U=I.charCodeAt(W++),U>=55296&&U<=56319&&W<Z?(H=I.charCodeAt(W++),(H&64512)==56320?G.push(((U&1023)<<10)+(H&1023)+65536):(G.push(U),W--)):G.push(U);return G}function S(I){return y(I,function(G){var W="";return G>65535&&(G-=65536,W+=h(G>>>10&1023|55296),G=56320|G&1023),W+=h(G),W}).join("")}function O(I){return I-48<10?I-22:I-65<26?I-65:I-97<26?I-97:C}function B(I,G){return I+22+75*(I<26)-((G!=0)<<5)}function k(I,G,W){var Z=0;for(I=W?n(I/o):I>>1,I+=n(I/G);I>i*v>>1;Z+=C)I=n(I/i);return n(Z+(i+1)*I/(I+m))}function P(I){var G=[],W=I.length,Z,U=0,H=l,V=u,Y,$,K,J,Q,et,nt,st,ut;for(Y=I.lastIndexOf(r),Y<0&&(Y=0),$=0;$<Y;++$)I.charCodeAt($)>=128&&d("not-basic"),G.push(I.charCodeAt($));for(K=Y>0?Y+1:0;K<W;){for(J=U,Q=1,et=C;K>=W&&d("invalid-input"),nt=O(I.charCodeAt(K++)),(nt>=C||nt>n((b-U)/Q))&&d("overflow"),U+=nt*Q,st=et<=V?f:et>=V+v?v:et-V,!(nt<st);et+=C)ut=C-st,Q>n(b/ut)&&d("overflow"),Q*=ut;Z=G.length+1,V=k(U-J,Z,J==0),n(U/Z)>b-H&&d("overflow"),H+=n(U/Z),U%=Z,G.splice(U++,0,H)}return S(G)}function L(I){var G,W,Z,U,H,V,Y,$,K,J,Q,et=[],nt,st,ut,rt;for(I=w(I),nt=I.length,G=l,W=0,H=u,V=0;V<nt;++V)Q=I[V],Q<128&&et.push(h(Q));for(Z=U=et.length,U&&et.push(r);Z<nt;){for(Y=b,V=0;V<nt;++V)Q=I[V],Q>=G&&Q<Y&&(Y=Q);for(st=Z+1,Y-G>n((b-W)/st)&&d("overflow"),W+=(Y-G)*st,G=Y,V=0;V<nt;++V)if(Q=I[V],Q<G&&++W>b&&d("overflow"),Q==G){for($=W,K=C;J=K<=H?f:K>=H+v?v:K-H,!($<J);K+=C)rt=$-J,ut=C-J,et.push(h(B(J+rt%ut,0))),$=n(rt/ut);et.push(h(B($,0))),H=k(W,st,Z==U),W=0,++Z}++W,++G}return et.join("")}function E(I){return p(I,function(G){return s.test(G)?P(G.slice(4).toLowerCase()):G})}function N(I){return p(I,function(G){return c.test(G)?"xn--"+L(G):G})}D={version:"1.3.2",ucs2:{decode:w,encode:S},decode:P,encode:L,toASCII:N,toUnicode:E},M=function(){return D}.call(z,e,z,X),M!==void 0&&(X.exports=M)})(this)},54498:function(X,z,e){var M=e(88242),F=e(91212),R=e(51218),A=e(49950),T=e(31879),D=function(C){R.call(this,C),F.call(this,C),A.call(this,C),this.id=C.id||M()};D.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(C,f){switch(this.draggable){case"horizontal":f=0;break;case"vertical":C=0;break}var v=this.transform;v||(v=this.transform=[1,0,0,1,0,0]),v[4]+=C,v[5]+=f,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(C,f){},attrKV:function(C,f){if(C==="position"||C==="scale"||C==="origin"){if(f){var v=this[C];v||(v=this[C]=[]),v[0]=f[0],v[1]=f[1]}}else this[C]=f},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(C,f){if(typeof C=="string")this.attrKV(C,f);else if(T.isObject(C))for(var v in C)C.hasOwnProperty(v)&&this.attrKV(v,C[v]);return this.dirty(!1),this},setClipPath:function(C){var f=this.__zr;f&&C.addSelfToZr(f),this.clipPath&&this.clipPath!==C&&this.removeClipPath(),this.clipPath=C,C.__zr=f,C.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var C=this.clipPath;C&&(C.__zr&&C.removeSelfFromZr(C.__zr),C.__zr=null,C.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(C){this.__zr=C;var f=this.animators;if(f)for(var v=0;v<f.length;v++)C.animation.addAnimator(f[v]);this.clipPath&&this.clipPath.addSelfToZr(C)},removeSelfFromZr:function(C){this.__zr=null;var f=this.animators;if(f)for(var v=0;v<f.length;v++)C.animation.removeAnimator(f[v]);this.clipPath&&this.clipPath.removeSelfFromZr(C)}},T.mixin(D,A),T.mixin(D,R),T.mixin(D,F);var b=D;X.exports=b},6113:function(X,z,e){var M=e(31879),F=e(12072),R=e(86281),A=e(91212),T=e(19756),D=e(94548),b="silent";function C(s,c,x){return{type:s,event:x,target:c.target,topTarget:c.topTarget,cancelBubble:!1,offsetX:x.zrX,offsetY:x.zrY,gestureEvent:x.gestureEvent,pinchX:x.pinchX,pinchY:x.pinchY,pinchScale:x.pinchScale,wheelDelta:x.zrDelta,zrByTouch:x.zrByTouch,which:x.which,stop:f}}function f(){T.stop(this.event)}function v(){}v.prototype.dispose=function(){};var m=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],o=function(s,c,x,a){A.call(this),this.storage=s,this.painter=c,this.painterRoot=a,x=x||new v,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,R.call(this),this.setHandlerProxy(x)};o.prototype={constructor:o,setHandlerProxy:function(s){this.proxy&&this.proxy.dispose(),s&&(M.each(m,function(c){s.on&&s.on(c,this[c],this)},this),s.handler=this),this.proxy=s},mousemove:function(s){var c=s.zrX,x=s.zrY,a=l(this,c,x),i=this._hovered,n=i.target;n&&!n.__zr&&(i=this.findHover(i.x,i.y),n=i.target);var h=this._hovered=a?{x:c,y:x}:this.findHover(c,x),g=h.target,d=this.proxy;d.setCursor&&d.setCursor(g?g.cursor:"default"),n&&g!==n&&this.dispatchToElement(i,"mouseout",s),this.dispatchToElement(h,"mousemove",s),g&&g!==n&&this.dispatchToElement(h,"mouseover",s)},mouseout:function(s){var c=s.zrEventControl,x=s.zrIsToLocalDOM;c!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",s),c!=="no_globalout"&&!x&&this.trigger("globalout",{type:"globalout",event:s})},resize:function(s){this._hovered={}},dispatch:function(s,c){var x=this[s];x&&x.call(this,c)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(s){var c=this.proxy;c.setCursor&&c.setCursor(s)},dispatchToElement:function(s,c,x){s=s||{};var a=s.target;if(!(a&&a.silent)){for(var i="on"+c,n=C(c,s,x);a&&(a[i]&&(n.cancelBubble=a[i].call(a,n)),a.trigger(c,n),a=a.parent,!n.cancelBubble););n.cancelBubble||(this.trigger(c,n),this.painter&&this.painter.eachOtherLayer(function(h){typeof h[i]=="function"&&h[i].call(h,n),h.trigger&&h.trigger(c,n)}))}},findHover:function(s,c,x){for(var a=this.storage.getDisplayList(),i={x:s,y:c},n=a.length-1;n>=0;n--){var h;if(a[n]!==x&&!a[n].ignore&&(h=u(a[n],s,c))&&(!i.topTarget&&(i.topTarget=a[n]),h!==b)){i.target=a[n];break}}return i},processGesture:function(s,c){this._gestureMgr||(this._gestureMgr=new D);var x=this._gestureMgr;c==="start"&&x.clear();var a=x.recognize(s,this.findHover(s.zrX,s.zrY,null).target,this.proxy.dom);if(c==="end"&&x.clear(),a){var i=a.type;s.gestureEvent=i,this.dispatchToElement({target:a.target},i,a.event)}}},M.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(s){o.prototype[s]=function(c){var x=c.zrX,a=c.zrY,i=l(this,x,a),n,h;if((s!=="mouseup"||!i)&&(n=this.findHover(x,a),h=n.target),s==="mousedown")this._downEl=h,this._downPoint=[c.zrX,c.zrY],this._upEl=h;else if(s==="mouseup")this._upEl=h;else if(s==="click"){if(this._downEl!==this._upEl||!this._downPoint||F.dist(this._downPoint,[c.zrX,c.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,s,c)}});function u(s,c,x){if(s[s.rectHover?"rectContain":"contain"](c,x)){for(var a=s,i;a;){if(a.clipPath&&!a.clipPath.contain(c,x))return!1;a.silent&&(i=!0),a=a.parent}return i?b:!0}return!1}function l(s,c,x){var a=s.painter;return c<0||c>a.getWidth()||x<0||x>a.getHeight()}M.mixin(o,A),M.mixin(o,R);var r=o;X.exports=r},30811:function(X,z,e){var M=e(31879),F=e(56570),R=F.devicePixelRatio,A=e(92199),T=e(8805);function D(){return!1}function b(v,m,o){var u=M.createCanvas(),l=m.getWidth(),r=m.getHeight(),s=u.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=l+"px",s.height=r+"px",u.setAttribute("data-zr-dom-id",v)),u.width=l*o,u.height=r*o,u}var C=function(v,m,o){var u;o=o||R,typeof v=="string"?u=b(v,m,o):M.isObject(v)&&(u=v,v=u.id),this.id=v,this.dom=u;var l=u.style;l&&(u.onselectstart=D,l["-webkit-user-select"]="none",l["user-select"]="none",l["-webkit-touch-callout"]="none",l["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",l.padding=0,l.margin=0,l["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=m,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=o};C.prototype={constructor:C,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var v=this.dpr;this.domBack=b("back-"+this.id,this.painter,v),this.ctxBack=this.domBack.getContext("2d"),v!==1&&this.ctxBack.scale(v,v)},resize:function(v,m){var o=this.dpr,u=this.dom,l=u.style,r=this.domBack;l&&(l.width=v+"px",l.height=m+"px"),u.width=v*o,u.height=m*o,r&&(r.width=v*o,r.height=m*o,o!==1&&this.ctxBack.scale(o,o))},clear:function(v,s){var o=this.dom,u=this.ctx,l=o.width,r=o.height,s=s||this.clearColor,c=this.motionBlur&&!v,x=this.lastFrameAlpha,a=this.dpr;if(c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,l/a,r/a)),u.clearRect(0,0,l,r),s&&s!=="transparent"){var i;s.colorStops?(i=s.__canvasGradient||A.getGradient(u,s,{x:0,y:0,width:l,height:r}),s.__canvasGradient=i):s.image&&(i=T.prototype.getCanvasPattern.call(s,u)),u.save(),u.fillStyle=i||s,u.fillRect(0,0,l,r),u.restore()}if(c){var n=this.domBack;u.save(),u.globalAlpha=x,u.drawImage(n,0,0,l,r),u.restore()}}};var f=C;X.exports=f},37200:function(X,z,e){var M=e(49500),F=e(56570),R=F.devicePixelRatio,A=e(31879),T=e(34081),D=e(95946),b=e(93318),C=e(30811),f=e(29208),v=e(11096),m=e(58020),o=1e5,u=314159,l=.01,r=.001;function s(p){return parseInt(p,10)}function c(p){return p?p.__builtin__?!0:!(typeof p.resize!="function"||typeof p.refresh!="function"):!1}var x=new D(0,0,0,0),a=new D(0,0,0,0);function i(p,w,S){return x.copy(p.getBoundingRect()),p.transform&&x.applyTransform(p.transform),a.width=w,a.height=S,!x.intersect(a)}function n(p,w){if(p===w)return!1;if(!p||!w||p.length!==w.length)return!0;for(var S=0;S<p.length;S++)if(p[S]!==w[S])return!0;return!1}function h(p,w){for(var S=0;S<p.length;S++){var O=p[S];O.setTransform(w),w.beginPath(),O.buildPath(w,O.shape),w.clip(),O.restoreTransform(w)}}function g(p,w){var S=document.createElement("div");return S.style.cssText=["position:relative","width:"+p+"px","height:"+w+"px","padding:0","margin:0","border-width:0"].join(";")+";",S}var d=function(p,w,S){this.type="canvas";var O=!p.nodeName||p.nodeName.toUpperCase()==="CANVAS";this._opts=S=A.extend({},S||{}),this.dpr=S.devicePixelRatio||R,this._singleCanvas=O,this.root=p;var B=p.style;B&&(B["-webkit-tap-highlight-color"]="transparent",B["-webkit-user-select"]=B["user-select"]=B["-webkit-touch-callout"]="none",p.innerHTML=""),this.storage=w;var k=this._zlevelList=[],P=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,O){var E=p.width,N=p.height;S.width!=null&&(E=S.width),S.height!=null&&(N=S.height),this.dpr=S.devicePixelRatio||1,p.width=E*this.dpr,p.height=N*this.dpr,this._width=E,this._height=N;var I=new C(p,this,this.dpr);I.__builtin__=!0,I.initContext(),P[u]=I,I.zlevel=u,k.push(u),this._domRoot=p}else{this._width=this._getSize(0),this._height=this._getSize(1);var L=this._domRoot=g(this._width,this._height);p.appendChild(L)}this._hoverlayer=null,this._hoverElements=[]};d.prototype={constructor:d,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var p=this.getViewportRoot();if(p)return{offsetLeft:p.offsetLeft||0,offsetTop:p.offsetTop||0}},refresh:function(p){var w=this.storage.getDisplayList(!0),S=this._zlevelList;this._redrawId=Math.random(),this._paintList(w,p,this._redrawId);for(var O=0;O<S.length;O++){var B=S[O],k=this._layers[B];if(!k.__builtin__&&k.refresh){var P=O===0?this._backgroundColor:null;k.refresh(P)}}return this.refreshHover(),this},addHover:function(p,w){if(!p.__hoverMir){var S=new p.constructor({style:p.style,shape:p.shape,z:p.z,z2:p.z2,silent:p.silent});return S.__from=p,p.__hoverMir=S,w&&S.setStyle(w),this._hoverElements.push(S),S}},removeHover:function(p){var w=p.__hoverMir,S=this._hoverElements,O=A.indexOf(S,w);O>=0&&S.splice(O,1),p.__hoverMir=null},clearHover:function(p){for(var w=this._hoverElements,S=0;S<w.length;S++){var O=w[S].__from;O&&(O.__hoverMir=null)}w.length=0},refreshHover:function(){var p=this._hoverElements,w=p.length,S=this._hoverlayer;if(S&&S.clear(),!!w){b(p,this.storage.displayableSortFunc),S||(S=this._hoverlayer=this.getLayer(o));var O={};S.ctx.save();for(var B=0;B<w;){var k=p[B],P=k.__from;if(!(P&&P.__zr)){p.splice(B,1),P.__hoverMir=null,w--;continue}B++,P.invisible||(k.transform=P.transform,k.invTransform=P.invTransform,k.__clipPaths=P.__clipPaths,this._doPaintEl(k,S,!0,O))}S.ctx.restore()}},getHoverLayer:function(){return this.getLayer(o)},_paintList:function(p,w,S){if(this._redrawId===S){w=w||!1,this._updateLayerStatus(p);var O=this._doPaintList(p,w);if(this._needsManuallyCompositing&&this._compositeManually(),!O){var B=this;f(function(){B._paintList(p,w,S)})}}},_compositeManually:function(){var p=this.getLayer(u).ctx,w=this._domRoot.width,S=this._domRoot.height;p.clearRect(0,0,w,S),this.eachBuiltinLayer(function(O){O.virtual&&p.drawImage(O.dom,0,0,w,S)})},_doPaintList:function(p,w){for(var S=[],O=0;O<this._zlevelList.length;O++){var B=this._zlevelList[O],k=this._layers[B];k.__builtin__&&k!==this._hoverlayer&&(k.__dirty||w)&&S.push(k)}for(var P=!0,L=0;L<S.length;L++){var k=S[L],E=k.ctx,N={};E.save();var I=w?k.__startIndex:k.__drawIndex,G=!w&&k.incremental&&Date.now,W=G&&Date.now(),Z=k.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(k.__startIndex===k.__endIndex)k.clear(!1,Z);else if(I===k.__startIndex){var U=p[I];(!U.incremental||!U.notClear||w)&&k.clear(!1,Z)}I===-1&&(M.error("For some unknown reason. drawIndex is -1"),I=k.__startIndex);for(var H=I;H<k.__endIndex;H++){var V=p[H];if(this._doPaintEl(V,k,w,N),V.__dirty=V.__dirtyText=!1,G){var Y=Date.now()-W;if(Y>15)break}}k.__drawIndex=H,k.__drawIndex<k.__endIndex&&(P=!1),N.prevElClipPaths&&E.restore(),E.restore()}return m.wxa&&A.each(this._layers,function($){$&&$.ctx&&$.ctx.draw&&$.ctx.draw()}),P},_doPaintEl:function(p,w,S,O){var B=w.ctx,k=p.transform;if((w.__dirty||S)&&!p.invisible&&p.style.opacity!==0&&!(k&&!k[0]&&!k[3])&&!(p.culling&&i(p,this._width,this._height))){var P=p.__clipPaths,L=O.prevElClipPaths;(!L||n(P,L))&&(L&&(B.restore(),O.prevElClipPaths=null,O.prevEl=null),P&&(B.save(),h(P,B),O.prevElClipPaths=P)),p.beforeBrush&&p.beforeBrush(B),p.brush(B,O.prevEl||null),O.prevEl=p,p.afterBrush&&p.afterBrush(B)}},getLayer:function(p,w){this._singleCanvas&&!this._needsManuallyCompositing&&(p=u);var S=this._layers[p];return S||(S=new C("zr_"+p,this,this.dpr),S.zlevel=p,S.__builtin__=!0,this._layerConfig[p]?A.merge(S,this._layerConfig[p],!0):this._layerConfig[p-l]&&A.merge(S,this._layerConfig[p-l],!0),w&&(S.virtual=w),this.insertLayer(p,S),S.initContext()),S},insertLayer:function(p,w){var S=this._layers,O=this._zlevelList,B=O.length,k=null,P=-1,L=this._domRoot;if(S[p]){T("ZLevel "+p+" has been used already");return}if(!c(w)){T("Layer of zlevel "+p+" is not valid");return}if(B>0&&p>O[0]){for(P=0;P<B-1&&!(O[P]<p&&O[P+1]>p);P++);k=S[O[P]]}if(O.splice(P+1,0,p),S[p]=w,!w.virtual)if(k){var E=k.dom;E.nextSibling?L.insertBefore(w.dom,E.nextSibling):L.appendChild(w.dom)}else L.firstChild?L.insertBefore(w.dom,L.firstChild):L.appendChild(w.dom)},eachLayer:function(p,w){var S=this._zlevelList,O,B;for(B=0;B<S.length;B++)O=S[B],p.call(w,this._layers[O],O)},eachBuiltinLayer:function(p,w){var S=this._zlevelList,O,B,k;for(k=0;k<S.length;k++)B=S[k],O=this._layers[B],O.__builtin__&&p.call(w,O,B)},eachOtherLayer:function(p,w){var S=this._zlevelList,O,B,k;for(k=0;k<S.length;k++)B=S[k],O=this._layers[B],O.__builtin__||p.call(w,O,B)},getLayers:function(){return this._layers},_updateLayerStatus:function(p){this.eachBuiltinLayer(function(N,I){N.__dirty=N.__used=!1});function w(N){B&&(B.__endIndex!==N&&(B.__dirty=!0),B.__endIndex=N)}if(this._singleCanvas)for(var S=1;S<p.length;S++){var O=p[S];if(O.zlevel!==p[S-1].zlevel||O.incremental){this._needsManuallyCompositing=!0;break}}for(var B=null,k=0,P,S=0;S<p.length;S++){var O=p[S],L=O.zlevel,E;P!==L&&(P=L,k=0),O.incremental?(E=this.getLayer(L+r,this._needsManuallyCompositing),E.incremental=!0,k=1):E=this.getLayer(L+(k>0?l:0),this._needsManuallyCompositing),E.__builtin__||T("ZLevel "+L+" has been used by unkown layer "+E.id),E!==B&&(E.__used=!0,E.__startIndex!==S&&(E.__dirty=!0),E.__startIndex=S,E.incremental?E.__drawIndex=-1:E.__drawIndex=S,w(S),B=E),O.__dirty&&(E.__dirty=!0,E.incremental&&E.__drawIndex<0&&(E.__drawIndex=S))}w(S),this.eachBuiltinLayer(function(N,I){!N.__used&&N.getElementCount()>0&&(N.__dirty=!0,N.__startIndex=N.__endIndex=N.__drawIndex=0),N.__dirty&&N.__drawIndex<0&&(N.__drawIndex=N.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(p){p.clear()},setBackgroundColor:function(p){this._backgroundColor=p},configLayer:function(p,w){if(w){var S=this._layerConfig;S[p]?A.merge(S[p],w,!0):S[p]=w;for(var O=0;O<this._zlevelList.length;O++){var B=this._zlevelList[O];if(B===p||B===p+l){var k=this._layers[B];A.merge(k,S[p],!0)}}}},delLayer:function(p){var w=this._layers,S=this._zlevelList,O=w[p];O&&(O.dom.parentNode.removeChild(O.dom),delete w[p],S.splice(A.indexOf(S,p),1))},resize:function(p,w){if(this._domRoot.style){var S=this._domRoot;S.style.display="none";var O=this._opts;if(p!=null&&(O.width=p),w!=null&&(O.height=w),p=this._getSize(0),w=this._getSize(1),S.style.display="",this._width!==p||w!==this._height){S.style.width=p+"px",S.style.height=w+"px";for(var B in this._layers)this._layers.hasOwnProperty(B)&&this._layers[B].resize(p,w);A.each(this._progressiveLayers,function(k){k.resize(p,w)}),this.refresh(!0)}this._width=p,this._height=w}else{if(p==null||w==null)return;this._width=p,this._height=w,this.getLayer(u).resize(p,w)}return this},clearLayer:function(p){var w=this._layers[p];w&&w.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(p){if(p=p||{},this._singleCanvas&&!this._compositeManually)return this._layers[u].dom;var w=new C("image",this,p.pixelRatio||this.dpr);if(w.initContext(),w.clear(!1,p.backgroundColor||this._backgroundColor),p.pixelRatio<=this.dpr){this.refresh();var S=w.dom.width,O=w.dom.height,B=w.ctx;this.eachLayer(function(N){N.__builtin__?B.drawImage(N.dom,0,0,S,O):N.renderToCanvas&&(w.ctx.save(),N.renderToCanvas(w.ctx),w.ctx.restore())})}else for(var k={},P=this.storage.getDisplayList(!0),L=0;L<P.length;L++){var E=P[L];this._doPaintEl(E,w,!0,k)}return w.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(p){var w=this._opts,S=["width","height"][p],O=["clientWidth","clientHeight"][p],B=["paddingLeft","paddingTop"][p],k=["paddingRight","paddingBottom"][p];if(w[S]!=null&&w[S]!=="auto")return parseFloat(w[S]);var P=this.root,L=document.defaultView.getComputedStyle(P);return(P[O]||s(L[S])||s(P.style[S]))-(s(L[B])||0)-(s(L[k])||0)|0},pathToImage:function(p,w){w=w||this.dpr;var S=document.createElement("canvas"),O=S.getContext("2d"),B=p.getBoundingRect(),k=p.style,P=k.shadowBlur*w,L=k.shadowOffsetX*w,E=k.shadowOffsetY*w,N=k.hasStroke()?k.lineWidth:0,I=Math.max(N/2,-L+P),G=Math.max(N/2,L+P),W=Math.max(N/2,-E+P),Z=Math.max(N/2,E+P),U=B.width+I+G,H=B.height+W+Z;S.width=U*w,S.height=H*w,O.scale(w,w),O.clearRect(0,0,U,H),O.dpr=w;var V={position:p.position,rotation:p.rotation,scale:p.scale};p.position=[I-B.x,W-B.y],p.rotation=0,p.scale=[1,1],p.updateTransform(),p&&p.brush(O);var Y=v,$=new Y({style:{x:0,y:0,image:S}});return V.position!=null&&($.position=p.position=V.position),V.rotation!=null&&($.rotation=p.rotation=V.rotation),V.scale!=null&&($.scale=p.scale=V.scale),$}};var y=d;X.exports=y},2970:function(X,z,e){var M=e(31879),F=e(58020),R=e(27146),A=e(93318);function T(C,f){return C.zlevel===f.zlevel?C.z===f.z?C.z2-f.z2:C.z-f.z:C.zlevel-f.zlevel}var D=function(){this._roots=[],this._displayList=[],this._displayListLen=0};D.prototype={constructor:D,traverse:function(C,f){for(var v=0;v<this._roots.length;v++)this._roots[v].traverse(C,f)},getDisplayList:function(C,f){return f=f||!1,C&&this.updateDisplayList(f),this._displayList},updateDisplayList:function(C){this._displayListLen=0;for(var f=this._roots,v=this._displayList,m=0,o=f.length;m<o;m++)this._updateAndAddDisplayable(f[m],null,C);v.length=this._displayListLen,F.canvasSupported&&A(v,T)},_updateAndAddDisplayable:function(C,f,v){if(!(C.ignore&&!v)){C.beforeUpdate(),C.__dirty&&C.update(),C.afterUpdate();var m=C.clipPath;if(m){f?f=f.slice():f=[];for(var o=m,u=C;o;)o.parent=u,o.updateTransform(),f.push(o),u=o,o=o.clipPath}if(C.isGroup){for(var l=C._children,r=0;r<l.length;r++){var s=l[r];C.__dirty&&(s.__dirty=!0),this._updateAndAddDisplayable(s,f,v)}C.__dirty=!1}else C.__clipPaths=f,this._displayList[this._displayListLen++]=C}},addRoot:function(C){C.__storage!==this&&(C instanceof R&&C.addChildrenToStorage(this),this.addToStorage(C),this._roots.push(C))},delRoot:function(C){if(C==null){for(var f=0;f<this._roots.length;f++){var v=this._roots[f];v instanceof R&&v.delChildrenFromStorage(this)}this._roots=[],this._displayList=[],this._displayListLen=0;return}if(C instanceof Array){for(var f=0,m=C.length;f<m;f++)this.delRoot(C[f]);return}var o=M.indexOf(this._roots,C);o>=0&&(this.delFromStorage(C),this._roots.splice(o,1),C instanceof R&&C.delChildrenFromStorage(this))},addToStorage:function(C){return C&&(C.__storage=this,C.dirty(!1)),this},delFromStorage:function(C){return C&&(C.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:T};var b=D;X.exports=b},33491:function(X,z,e){var M=e(31879),F=e(19756),R=F.Dispatcher,A=e(29208),T=e(88503),D=function(C){C=C||{},this.stage=C.stage||{},this.onframe=C.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,R.call(this)};D.prototype={constructor:D,addClip:function(C){this._clips.push(C)},addAnimator:function(C){C.animation=this;for(var f=C.getClips(),v=0;v<f.length;v++)this.addClip(f[v])},removeClip:function(C){var f=M.indexOf(this._clips,C);f>=0&&this._clips.splice(f,1)},removeAnimator:function(C){for(var f=C.getClips(),v=0;v<f.length;v++)this.removeClip(f[v]);C.animation=null},_update:function(){for(var C=new Date().getTime()-this._pausedTime,f=C-this._time,v=this._clips,m=v.length,o=[],u=[],l=0;l<m;l++){var r=v[l],s=r.step(C,f);s&&(o.push(s),u.push(r))}for(var l=0;l<m;)v[l]._needsRemove?(v[l]=v[m-1],v.pop(),m--):l++;m=o.length;for(var l=0;l<m;l++)u[l].fire(o[l]);this._time=C,this.onframe(f),this.trigger("frame",f),this.stage.update&&this.stage.update()},_startLoop:function(){var C=this;this._running=!0;function f(){C._running&&(A(f),!C._paused&&C._update())}A(f)},start:function(){this._time=new Date().getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=new Date().getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=new Date().getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(C,f){f=f||{};var v=new T(C,f.loop,f.getter,f.setter);return this.addAnimator(v),v}},M.mixin(D,R);var b=D;X.exports=b},88503:function(X,z,e){var M=e(63612),F=e(94819),R=e(31879),A=R.isArrayLike,T=Array.prototype.slice;function D(n,h){return n[h]}function b(n,h,g){n[h]=g}function C(n,h,g){return(h-n)*g+n}function f(n,h,g){return g>.5?h:n}function v(n,h,g,d,y){var p=n.length;if(y===1)for(var w=0;w<p;w++)d[w]=C(n[w],h[w],g);else for(var S=p&&n[0].length,w=0;w<p;w++)for(var O=0;O<S;O++)d[w][O]=C(n[w][O],h[w][O],g)}function m(n,h,g){var d=n.length,y=h.length;if(d!==y){var p=d>y;if(p)n.length=y;else for(var w=d;w<y;w++)n.push(g===1?h[w]:T.call(h[w]))}for(var S=n[0]&&n[0].length,w=0;w<n.length;w++)if(g===1)isNaN(n[w])&&(n[w]=h[w]);else for(var O=0;O<S;O++)isNaN(n[w][O])&&(n[w][O]=h[w][O])}function o(n,h,g){if(n===h)return!0;var d=n.length;if(d!==h.length)return!1;if(g===1){for(var y=0;y<d;y++)if(n[y]!==h[y])return!1}else for(var p=n[0].length,y=0;y<d;y++)for(var w=0;w<p;w++)if(n[y][w]!==h[y][w])return!1;return!0}function u(n,h,g,d,y,p,w,S,O){var B=n.length;if(O===1)for(var k=0;k<B;k++)S[k]=l(n[k],h[k],g[k],d[k],y,p,w);else for(var P=n[0].length,k=0;k<B;k++)for(var L=0;L<P;L++)S[k][L]=l(n[k][L],h[k][L],g[k][L],d[k][L],y,p,w)}function l(n,h,g,d,y,p,w){var S=(g-n)*.5,O=(d-h)*.5;return(2*(h-g)+S+O)*w+(-3*(h-g)-2*S-O)*p+S*y+h}function r(n){if(A(n)){var h=n.length;if(A(n[0])){for(var g=[],d=0;d<h;d++)g.push(T.call(n[d]));return g}return T.call(n)}return n}function s(n){return n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.floor(n[2]),"rgba("+n.join(",")+")"}function c(n){var h=n[n.length-1].value;return A(h&&h[0])?2:1}function x(n,h,g,d,y,p){var w=n._getter,S=n._setter,O=h==="spline",B=d.length;if(B){var k=d[0].value,P=A(k),L=!1,E=!1,N=P?c(d):0,I;d.sort(function(At,Nt){return At.time-Nt.time}),I=d[B-1].time;for(var G=[],W=[],Z=d[0].value,U=!0,H=0;H<B;H++){G.push(d[H].time/I);var V=d[H].value;if(P&&o(V,Z,N)||!P&&V===Z||(U=!1),Z=V,typeof V=="string"){var Y=F.parse(V);Y?(V=Y,L=!0):E=!0}W.push(V)}if(!(!p&&U)){for(var $=W[B-1],H=0;H<B-1;H++)P?m(W[H],$,N):isNaN(W[H])&&!isNaN($)&&!E&&!L&&(W[H]=$);P&&m(w(n._target,y),$,N);var K=0,J=0,Q,et,nt,st,ut,rt;if(L)var ht=[0,0,0,0];var Pt=function(At,Nt){var Lt;if(Nt<0)Lt=0;else if(Nt<J){for(Q=Math.min(K+1,B-1),Lt=Q;Lt>=0&&!(G[Lt]<=Nt);Lt--);Lt=Math.min(Lt,B-2)}else{for(Lt=K;Lt<B&&!(G[Lt]>Nt);Lt++);Lt=Math.min(Lt-1,B-2)}K=Lt,J=Nt;var Rt=G[Lt+1]-G[Lt];if(Rt!==0)if(et=(Nt-G[Lt])/Rt,O)if(st=W[Lt],nt=W[Lt===0?Lt:Lt-1],ut=W[Lt>B-2?B-1:Lt+1],rt=W[Lt>B-3?B-1:Lt+2],P)u(nt,st,ut,rt,et,et*et,et*et*et,w(At,y),N);else{var Tt;if(L)Tt=u(nt,st,ut,rt,et,et*et,et*et*et,ht,1),Tt=s(ht);else{if(E)return f(st,ut,et);Tt=l(nt,st,ut,rt,et,et*et,et*et*et)}S(At,y,Tt)}else if(P)v(W[Lt],W[Lt+1],et,w(At,y),N);else{var Tt;if(L)v(W[Lt],W[Lt+1],et,ht,1),Tt=s(ht);else{if(E)return f(W[Lt],W[Lt+1],et);Tt=C(W[Lt],W[Lt+1],et)}S(At,y,Tt)}},wt=new M({target:n._target,life:I,loop:n._loop,delay:n._delay,onframe:Pt,ondestroy:g});return h&&h!=="spline"&&(wt.easing=h),wt}}}var a=function(n,h,g,d){this._tracks={},this._target=n,this._loop=h||!1,this._getter=g||D,this._setter=d||b,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};a.prototype={when:function(n,h){var g=this._tracks;for(var d in h)if(h.hasOwnProperty(d)){if(!g[d]){g[d]=[];var y=this._getter(this._target,d);if(y==null)continue;n!==0&&g[d].push({time:0,value:r(y)})}g[d].push({time:n,value:h[d]})}return this},during:function(n){return this._onframeList.push(n),this},pause:function(){for(var n=0;n<this._clipList.length;n++)this._clipList[n].pause();this._paused=!0},resume:function(){for(var n=0;n<this._clipList.length;n++)this._clipList[n].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var n=this._doneList,h=n.length,g=0;g<h;g++)n[g].call(this)},start:function(n,h){var g=this,d=0,y=function(){d--,d||g._doneCallback()},p;for(var w in this._tracks)if(this._tracks.hasOwnProperty(w)){var S=x(this,n,y,this._tracks[w],w,h);S&&(this._clipList.push(S),d++,this.animation&&this.animation.addClip(S),p=S)}if(p){var O=p.onframe;p.onframe=function(B,k){O(B,k);for(var P=0;P<g._onframeList.length;P++)g._onframeList[P](B,k)}}return d||this._doneCallback(),this},stop:function(n){for(var h=this._clipList,g=this.animation,d=0;d<h.length;d++){var y=h[d];n&&y.onframe(this._target,1),g&&g.removeClip(y)}h.length=0},delay:function(n){return this._delay=n,this},done:function(n){return n&&this._doneList.push(n),this},getClips:function(){return this._clipList}};var i=a;X.exports=i},63612:function(X,z,e){var M=e(29680);function F(A){this._target=A.target,this._life=A.life||1e3,this._delay=A.delay||0,this._initialized=!1,this.loop=A.loop==null?!1:A.loop,this.gap=A.gap||0,this.easing=A.easing||"Linear",this.onframe=A.onframe,this.ondestroy=A.ondestroy,this.onrestart=A.onrestart,this._pausedTime=0,this._paused=!1}F.prototype={constructor:F,step:function(A,T){if(this._initialized||(this._startTime=A+this._delay,this._initialized=!0),this._paused){this._pausedTime+=T;return}var D=(A-this._startTime-this._pausedTime)/this._life;if(!(D<0)){D=Math.min(D,1);var b=this.easing,C=typeof b=="string"?M[b]:b,f=typeof C=="function"?C(D):D;return this.fire("frame",f),D===1?this.loop?(this.restart(A),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(A){var T=(A-this._startTime-this._pausedTime)%this._life;this._startTime=A-T+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(A,T){A="on"+A,this[A]&&this[A](this._target,T)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var R=F;X.exports=R},29680:function(X){var z={linear:function(M){return M},quadraticIn:function(M){return M*M},quadraticOut:function(M){return M*(2-M)},quadraticInOut:function(M){return(M*=2)<1?.5*M*M:-.5*(--M*(M-2)-1)},cubicIn:function(M){return M*M*M},cubicOut:function(M){return--M*M*M+1},cubicInOut:function(M){return(M*=2)<1?.5*M*M*M:.5*((M-=2)*M*M+2)},quarticIn:function(M){return M*M*M*M},quarticOut:function(M){return 1- --M*M*M*M},quarticInOut:function(M){return(M*=2)<1?.5*M*M*M*M:-.5*((M-=2)*M*M*M-2)},quinticIn:function(M){return M*M*M*M*M},quinticOut:function(M){return--M*M*M*M*M+1},quinticInOut:function(M){return(M*=2)<1?.5*M*M*M*M*M:.5*((M-=2)*M*M*M*M+2)},sinusoidalIn:function(M){return 1-Math.cos(M*Math.PI/2)},sinusoidalOut:function(M){return Math.sin(M*Math.PI/2)},sinusoidalInOut:function(M){return .5*(1-Math.cos(Math.PI*M))},exponentialIn:function(M){return M===0?0:Math.pow(1024,M-1)},exponentialOut:function(M){return M===1?1:1-Math.pow(2,-10*M)},exponentialInOut:function(M){return M===0?0:M===1?1:(M*=2)<1?.5*Math.pow(1024,M-1):.5*(-Math.pow(2,-10*(M-1))+2)},circularIn:function(M){return 1-Math.sqrt(1-M*M)},circularOut:function(M){return Math.sqrt(1- --M*M)},circularInOut:function(M){return(M*=2)<1?-.5*(Math.sqrt(1-M*M)-1):.5*(Math.sqrt(1-(M-=2)*M)+1)},elasticIn:function(M){var F,R=.1,A=.4;return M===0?0:M===1?1:(!R||R<1?(R=1,F=A/4):F=A*Math.asin(1/R)/(2*Math.PI),-(R*Math.pow(2,10*(M-=1))*Math.sin((M-F)*(2*Math.PI)/A)))},elasticOut:function(M){var F,R=.1,A=.4;return M===0?0:M===1?1:(!R||R<1?(R=1,F=A/4):F=A*Math.asin(1/R)/(2*Math.PI),R*Math.pow(2,-10*M)*Math.sin((M-F)*(2*Math.PI)/A)+1)},elasticInOut:function(M){var F,R=.1,A=.4;return M===0?0:M===1?1:(!R||R<1?(R=1,F=A/4):F=A*Math.asin(1/R)/(2*Math.PI),(M*=2)<1?-.5*(R*Math.pow(2,10*(M-=1))*Math.sin((M-F)*(2*Math.PI)/A)):R*Math.pow(2,-10*(M-=1))*Math.sin((M-F)*(2*Math.PI)/A)*.5+1)},backIn:function(M){var F=1.70158;return M*M*((F+1)*M-F)},backOut:function(M){var F=1.70158;return--M*M*((F+1)*M+F)+1},backInOut:function(M){var F=2.5949095;return(M*=2)<1?.5*(M*M*((F+1)*M-F)):.5*((M-=2)*M*((F+1)*M+F)+2)},bounceIn:function(M){return 1-z.bounceOut(1-M)},bounceOut:function(M){return M<.36363636363636365?7.5625*M*M:M<.7272727272727273?7.5625*(M-=.5454545454545454)*M+.75:M<.9090909090909091?7.5625*(M-=.8181818181818182)*M+.9375:7.5625*(M-=.9545454545454546)*M+.984375},bounceInOut:function(M){return M<.5?z.bounceIn(M*2)*.5:z.bounceOut(M*2-1)*.5+.5}},e=z;X.exports=e},29208:function(X){var z=typeof window<"u"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)};X.exports=z},56570:function(X,z){var e=1;typeof window<"u"&&(e=Math.max(window.devicePixelRatio||1,1));var M=0,F=e;z.debugMode=M,z.devicePixelRatio=F},36882:function(X,z,e){var M=e(88649),F=M.normalizeRadian,R=Math.PI*2;function A(T,D,b,C,f,v,m,o,u){if(m===0)return!1;var l=m;o-=T,u-=D;var r=Math.sqrt(o*o+u*u);if(r-l>b||r+l<b)return!1;if(Math.abs(C-f)%R<1e-4)return!0;if(v){var s=C;C=F(f),f=F(s)}else C=F(C),f=F(f);C>f&&(f+=R);var c=Math.atan2(u,o);return c<0&&(c+=R),c>=C&&c<=f||c+R>=C&&c+R<=f}z.containStroke=A},48544:function(X,z,e){var M=e(90723);function F(R,A,T,D,b,C,f,v,m,o,u){if(m===0)return!1;var l=m;if(u>A+l&&u>D+l&&u>C+l&&u>v+l||u<A-l&&u<D-l&&u<C-l&&u<v-l||o>R+l&&o>T+l&&o>b+l&&o>f+l||o<R-l&&o<T-l&&o<b-l&&o<f-l)return!1;var r=M.cubicProjectPoint(R,A,T,D,b,C,f,v,o,u,null);return r<=l/2}z.containStroke=F},84142:function(X,z){function e(M,F,R,A,T,D,b){if(T===0)return!1;var C=T,f=0,v=M;if(b>F+C&&b>A+C||b<F-C&&b<A-C||D>M+C&&D>R+C||D<M-C&&D<R-C)return!1;if(M!==R)f=(F-A)/(M-R),v=(M*A-R*F)/(M-R);else return Math.abs(D-M)<=C/2;var m=f*D-b+v,o=m*m/(f*f+1);return o<=C/2*C/2}z.containStroke=e},32150:function(X,z,e){var M=e(22407),F=e(84142),R=e(48544),A=e(59188),T=e(36882),D=e(88649),b=D.normalizeRadian,C=e(90723),f=e(99376),v=M.CMD,m=Math.PI*2,o=1e-4;function u(g,d){return Math.abs(g-d)<o}var l=[-1,-1,-1],r=[-1,-1];function s(){var g=r[0];r[0]=r[1],r[1]=g}function c(g,d,y,p,w,S,O,B,k,P){if(P>d&&P>p&&P>S&&P>B||P<d&&P<p&&P<S&&P<B)return 0;var L=C.cubicRootAt(d,p,S,B,P,l);if(L===0)return 0;for(var E=0,N=-1,I,G,W=0;W<L;W++){var Z=l[W],U=Z===0||Z===1?.5:1,H=C.cubicAt(g,y,w,O,Z);H<k||(N<0&&(N=C.cubicExtrema(d,p,S,B,r),r[1]<r[0]&&N>1&&s(),I=C.cubicAt(d,p,S,B,r[0]),N>1&&(G=C.cubicAt(d,p,S,B,r[1]))),N===2?Z<r[0]?E+=I<d?U:-U:Z<r[1]?E+=G<I?U:-U:E+=B<G?U:-U:Z<r[0]?E+=I<d?U:-U:E+=B<I?U:-U)}return E}function x(g,d,y,p,w,S,O,B){if(B>d&&B>p&&B>S||B<d&&B<p&&B<S)return 0;var k=C.quadraticRootAt(d,p,S,B,l);if(k===0)return 0;var P=C.quadraticExtremum(d,p,S);if(P>=0&&P<=1){for(var L=0,E=C.quadraticAt(d,p,S,P),N=0;N<k;N++){var I=l[N]===0||l[N]===1?.5:1,G=C.quadraticAt(g,y,w,l[N]);G<O||(l[N]<P?L+=E<d?I:-I:L+=S<E?I:-I)}return L}else{var I=l[0]===0||l[0]===1?.5:1,G=C.quadraticAt(g,y,w,l[0]);return G<O?0:S<d?I:-I}}function a(g,d,y,p,w,S,O,B){if(B-=d,B>y||B<-y)return 0;var k=Math.sqrt(y*y-B*B);l[0]=-k,l[1]=k;var P=Math.abs(p-w);if(P<1e-4)return 0;if(P%m<1e-4){p=0,w=m;var L=S?1:-1;return O>=l[0]+g&&O<=l[1]+g?L:0}if(S){var k=p;p=b(w),w=b(k)}else p=b(p),w=b(w);p>w&&(w+=m);for(var E=0,N=0;N<2;N++){var I=l[N];if(I+g>O){var G=Math.atan2(B,I),L=S?1:-1;G<0&&(G=m+G),(G>=p&&G<=w||G+m>=p&&G+m<=w)&&(G>Math.PI/2&&G<Math.PI*1.5&&(L=-L),E+=L)}}return E}function i(g,d,y,p,w){for(var S=0,O=0,B=0,k=0,P=0,L=0;L<g.length;){var E=g[L++];switch(E===v.M&&L>1&&(y||(S+=f(O,B,k,P,p,w))),L===1&&(O=g[L],B=g[L+1],k=O,P=B),E){case v.M:k=g[L++],P=g[L++],O=k,B=P;break;case v.L:if(y){if(F.containStroke(O,B,g[L],g[L+1],d,p,w))return!0}else S+=f(O,B,g[L],g[L+1],p,w)||0;O=g[L++],B=g[L++];break;case v.C:if(y){if(R.containStroke(O,B,g[L++],g[L++],g[L++],g[L++],g[L],g[L+1],d,p,w))return!0}else S+=c(O,B,g[L++],g[L++],g[L++],g[L++],g[L],g[L+1],p,w)||0;O=g[L++],B=g[L++];break;case v.Q:if(y){if(A.containStroke(O,B,g[L++],g[L++],g[L],g[L+1],d,p,w))return!0}else S+=x(O,B,g[L++],g[L++],g[L],g[L+1],p,w)||0;O=g[L++],B=g[L++];break;case v.A:var N=g[L++],I=g[L++],G=g[L++],W=g[L++],Z=g[L++],U=g[L++];L+=1;var H=1-g[L++],K=Math.cos(Z)*G+N,J=Math.sin(Z)*W+I;L>1?S+=f(O,B,K,J,p,w):(k=K,P=J);var V=(p-N)*W/G+N;if(y){if(T.containStroke(N,I,W,Z,Z+U,H,d,V,w))return!0}else S+=a(N,I,W,Z,Z+U,H,V,w);O=Math.cos(Z+U)*G+N,B=Math.sin(Z+U)*W+I;break;case v.R:k=O=g[L++],P=B=g[L++];var Y=g[L++],$=g[L++],K=k+Y,J=P+$;if(y){if(F.containStroke(k,P,K,P,d,p,w)||F.containStroke(K,P,K,J,d,p,w)||F.containStroke(K,J,k,J,d,p,w)||F.containStroke(k,J,k,P,d,p,w))return!0}else S+=f(K,P,K,J,p,w),S+=f(k,J,k,P,p,w);break;case v.Z:if(y){if(F.containStroke(O,B,k,P,d,p,w))return!0}else S+=f(O,B,k,P,p,w);O=k,B=P;break}}return!y&&!u(B,P)&&(S+=f(O,B,k,P,p,w)||0),S!==0}function n(g,d,y){return i(g,0,!1,d,y)}function h(g,d,y,p){return i(g,d,!0,y,p)}z.contain=n,z.containStroke=h},74898:function(X,z,e){var M=e(99376),F=1e-8;function R(T,D){return Math.abs(T-D)<F}function A(T,D,b){var C=0,f=T[0];if(!f)return!1;for(var v=1;v<T.length;v++){var m=T[v];C+=M(f[0],f[1],m[0],m[1],D,b),f=m}var o=T[0];return(!R(f[0],o[0])||!R(f[1],o[1]))&&(C+=M(f[0],f[1],o[0],o[1],D,b)),C!==0}z.contain=A},59188:function(X,z,e){var M=e(90723),F=M.quadraticProjectPoint;function R(A,T,D,b,C,f,v,m,o){if(v===0)return!1;var u=v;if(o>T+u&&o>b+u&&o>f+u||o<T-u&&o<b-u&&o<f-u||m>A+u&&m>D+u&&m>C+u||m<A-u&&m<D-u&&m<C-u)return!1;var l=F(A,T,D,b,C,f,m,o,null);return l<=u/2}z.containStroke=R},72113:function(X,z,e){var M=e(95946),F=e(60330),R=e(31879),A=R.getContext,T=R.extend,D=R.retrieve2,b=R.retrieve3,C=R.trim,f={},v=0,m=5e3,o=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,u="12px sans-serif",l={};function r(E,N){l[E]=N}function s(E,N){N=N||u;var I=E+":"+N;if(f[I])return f[I];for(var G=(E+"").split(`
`),W=0,Z=0,U=G.length;Z<U;Z++)W=Math.max(O(G[Z],N).width,W);return v>m&&(v=0,f={}),v++,f[I]=W,W}function c(E,N,I,G,W,Z,U,H){return U?a(E,N,I,G,W,Z,U,H):x(E,N,I,G,W,Z,H)}function x(E,N,I,G,W,Z,U){var H=B(E,N,W,Z,U),V=s(E,N);W&&(V+=W[1]+W[3]);var Y=H.outerHeight,$=i(0,V,I),K=n(0,Y,G),J=new M($,K,V,Y);return J.lineHeight=H.lineHeight,J}function a(E,N,I,G,W,Z,U,H){var V=k(E,{rich:U,truncate:H,font:N,textAlign:I,textPadding:W,textLineHeight:Z}),Y=V.outerWidth,$=V.outerHeight,K=i(0,Y,I),J=n(0,$,G);return new M(K,J,Y,$)}function i(E,N,I){return I==="right"?E-=N:I==="center"&&(E-=N/2),E}function n(E,N,I){return I==="middle"?E-=N/2:I==="bottom"&&(E-=N),E}function h(E,N,I){var G=N.textPosition,W=N.textDistance,Z=I.x,U=I.y;W=W||0;var H=I.height,V=I.width,Y=H/2,$="left",K="top";switch(G){case"left":Z-=W,U+=Y,$="right",K="middle";break;case"right":Z+=W+V,U+=Y,K="middle";break;case"top":Z+=V/2,U-=W,$="center",K="bottom";break;case"bottom":Z+=V/2,U+=H+W,$="center";break;case"inside":Z+=V/2,U+=Y,$="center",K="middle";break;case"insideLeft":Z+=W,U+=Y,K="middle";break;case"insideRight":Z+=V-W,U+=Y,$="right",K="middle";break;case"insideTop":Z+=V/2,U+=W,$="center";break;case"insideBottom":Z+=V/2,U+=H-W,$="center",K="bottom";break;case"insideTopLeft":Z+=W,U+=W;break;case"insideTopRight":Z+=V-W,U+=W,$="right";break;case"insideBottomLeft":Z+=W,U+=H-W,K="bottom";break;case"insideBottomRight":Z+=V-W,U+=H-W,$="right",K="bottom";break}return E=E||{},E.x=Z,E.y=U,E.textAlign=$,E.textVerticalAlign=K,E}function g(E,N,I){var G={textPosition:E,textDistance:I};return h({},G,N)}function d(E,N,I,G,W){if(!N)return"";var Z=(E+"").split(`
`);W=y(N,I,G,W);for(var U=0,H=Z.length;U<H;U++)Z[U]=p(Z[U],W);return Z.join(`
`)}function y(E,N,W,G){G=T({},G),G.font=N;var W=D(W,"...");G.maxIterations=D(G.maxIterations,2);var Z=G.minChar=D(G.minChar,0);G.cnCharWidth=s("\u56FD",N);var U=G.ascCharWidth=s("a",N);G.placeholder=D(G.placeholder,"");for(var H=E=Math.max(0,E-1),V=0;V<Z&&H>=U;V++)H-=U;var Y=s(W,N);return Y>H&&(W="",Y=0),H=E-Y,G.ellipsis=W,G.ellipsisWidth=Y,G.contentWidth=H,G.containerWidth=E,G}function p(E,N){var I=N.containerWidth,G=N.font,W=N.contentWidth;if(!I)return"";var Z=s(E,G);if(Z<=I)return E;for(var U=0;;U++){if(Z<=W||U>=N.maxIterations){E+=N.ellipsis;break}var H=U===0?w(E,W,N.ascCharWidth,N.cnCharWidth):Z>0?Math.floor(E.length*W/Z):0;E=E.substr(0,H),Z=s(E,G)}return E===""&&(E=N.placeholder),E}function w(E,N,I,G){for(var W=0,Z=0,U=E.length;Z<U&&W<N;Z++){var H=E.charCodeAt(Z);W+=0<=H&&H<=127?I:G}return Z}function S(E){return s("\u56FD",E)}function O(E,N){return l.measureText(E,N)}l.measureText=function(E,N){var I=A();return I.font=N||u,I.measureText(E)};function B(E,N,I,G,W){E!=null&&(E+="");var Z=D(G,S(N)),U=E?E.split(`
`):[],H=U.length*Z,V=H,Y=!0;if(I&&(V+=I[0]+I[2]),E&&W){Y=!1;var $=W.outerHeight,K=W.outerWidth;if($!=null&&V>$)E="",U=[];else if(K!=null)for(var J=y(K-(I?I[1]+I[3]:0),N,W.ellipsis,{minChar:W.minChar,placeholder:W.placeholder}),Q=0,et=U.length;Q<et;Q++)U[Q]=p(U[Q],J)}return{lines:U,height:H,outerHeight:V,lineHeight:Z,canCacheByTextString:Y}}function k(E,N){var I={lines:[],width:0,height:0};if(E!=null&&(E+=""),!E)return I;for(var G=o.lastIndex=0,W;(W=o.exec(E))!=null;){var Z=W.index;Z>G&&P(I,E.substring(G,Z)),P(I,W[2],W[1]),G=o.lastIndex}G<E.length&&P(I,E.substring(G,E.length));var U=I.lines,H=0,V=0,Y=[],$=N.textPadding,K=N.truncate,J=K&&K.outerWidth,Q=K&&K.outerHeight;$&&(J!=null&&(J-=$[1]+$[3]),Q!=null&&(Q-=$[0]+$[2]));for(var et=0;et<U.length;et++){for(var nt=U[et],st=0,ut=0,rt=0;rt<nt.tokens.length;rt++){var ht=nt.tokens[rt],Pt=ht.styleName&&N.rich[ht.styleName]||{},wt=ht.textPadding=Pt.textPadding,At=ht.font=Pt.font||N.font,Nt=ht.textHeight=D(Pt.textHeight,S(At));if(wt&&(Nt+=wt[0]+wt[2]),ht.height=Nt,ht.lineHeight=b(Pt.textLineHeight,N.textLineHeight,Nt),ht.textAlign=Pt&&Pt.textAlign||N.textAlign,ht.textVerticalAlign=Pt&&Pt.textVerticalAlign||"middle",Q!=null&&H+ht.lineHeight>Q)return{lines:[],width:0,height:0};ht.textWidth=s(ht.text,At);var Lt=Pt.textWidth,Rt=Lt==null||Lt==="auto";if(typeof Lt=="string"&&Lt.charAt(Lt.length-1)==="%")ht.percentWidth=Lt,Y.push(ht),Lt=0;else{if(Rt){Lt=ht.textWidth;var Tt=Pt.textBackgroundColor,mt=Tt&&Tt.image;mt&&(mt=F.findExistImage(mt),F.isImageReady(mt)&&(Lt=Math.max(Lt,mt.width*Nt/mt.height)))}var Ft=wt?wt[1]+wt[3]:0;Lt+=Ft;var ct=J!=null?J-ut:null;ct!=null&&ct<Lt&&(!Rt||ct<Ft?(ht.text="",ht.textWidth=Lt=0):(ht.text=d(ht.text,ct-Ft,At,K.ellipsis,{minChar:K.minChar}),ht.textWidth=s(ht.text,At),Lt=ht.textWidth+Ft))}ut+=ht.width=Lt,Pt&&(st=Math.max(st,ht.lineHeight))}nt.width=ut,nt.lineHeight=st,H+=st,V=Math.max(V,ut)}I.outerWidth=I.width=D(N.textWidth,V),I.outerHeight=I.height=D(N.textHeight,H),$&&(I.outerWidth+=$[1]+$[3],I.outerHeight+=$[0]+$[2]);for(var et=0;et<Y.length;et++){var ht=Y[et],vt=ht.percentWidth;ht.width=parseInt(vt,10)/100*V}return I}function P(E,N,I){for(var G=N==="",W=N.split(`
`),Z=E.lines,U=0;U<W.length;U++){var H=W[U],V={styleName:I,text:H,isLineHolder:!H&&!G};if(U)Z.push({tokens:[V]});else{var Y=(Z[Z.length-1]||(Z[0]={tokens:[]})).tokens,$=Y.length;$===1&&Y[0].isLineHolder?Y[0]=V:(H||!$||G)&&Y.push(V)}}}function L(E){var N=(E.fontSize||E.fontFamily)&&[E.fontStyle,E.fontWeight,(E.fontSize||12)+"px",E.fontFamily||"sans-serif"].join(" ");return N&&C(N)||E.textFont||E.font}z.DEFAULT_FONT=u,z.$override=r,z.getWidth=s,z.getBoundingRect=c,z.adjustTextX=i,z.adjustTextY=n,z.calculateTextPosition=h,z.adjustTextPositionOnRect=g,z.truncateText=d,z.getLineHeight=S,z.measureText=O,z.parsePlainText=B,z.parseRichText=k,z.makeFont=L},88649:function(X,z){var e=Math.PI*2;function M(F){return F%=e,F<0&&(F+=e),F}z.normalizeRadian=M},99376:function(X){function z(e,M,F,R,A,T){if(T>M&&T>R||T<M&&T<R||R===M)return 0;var D=R<M?1:-1,b=(T-M)/(R-M);(b===1||b===0)&&(D=R<M?.5:-.5);var C=b*(F-e)+e;return C===A?1/0:C>A?D:0}X.exports=z},27146:function(X,z,e){var M=e(31879),F=e(54498),R=e(95946),A=function(D){D=D||{},F.call(this,D);for(var b in D)D.hasOwnProperty(b)&&(this[b]=D[b]);this._children=[],this.__storage=null,this.__dirty=!0};A.prototype={constructor:A,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(D){return this._children[D]},childOfName:function(D){for(var b=this._children,C=0;C<b.length;C++)if(b[C].name===D)return b[C]},childCount:function(){return this._children.length},add:function(D){return D&&D!==this&&D.parent!==this&&(this._children.push(D),this._doAdd(D)),this},addBefore:function(D,b){if(D&&D!==this&&D.parent!==this&&b&&b.parent===this){var C=this._children,f=C.indexOf(b);f>=0&&(C.splice(f,0,D),this._doAdd(D))}return this},_doAdd:function(D){D.parent&&D.parent.remove(D),D.parent=this;var b=this.__storage,C=this.__zr;b&&b!==D.__storage&&(b.addToStorage(D),D instanceof A&&D.addChildrenToStorage(b)),C&&C.refresh()},remove:function(D){var b=this.__zr,C=this.__storage,f=this._children,v=M.indexOf(f,D);return v<0?this:(f.splice(v,1),D.parent=null,C&&(C.delFromStorage(D),D instanceof A&&D.delChildrenFromStorage(C)),b&&b.refresh(),this)},removeAll:function(){var D=this._children,b=this.__storage,C,f;for(f=0;f<D.length;f++)C=D[f],b&&(b.delFromStorage(C),C instanceof A&&C.delChildrenFromStorage(b)),C.parent=null;return D.length=0,this},eachChild:function(D,b){for(var C=this._children,f=0;f<C.length;f++){var v=C[f];D.call(b,v,f)}return this},traverse:function(D,b){for(var C=0;C<this._children.length;C++){var f=this._children[C];D.call(b,f),f.type==="group"&&f.traverse(D,b)}return this},addChildrenToStorage:function(D){for(var b=0;b<this._children.length;b++){var C=this._children[b];D.addToStorage(C),C instanceof A&&C.addChildrenToStorage(D)}},delChildrenFromStorage:function(D){for(var b=0;b<this._children.length;b++){var C=this._children[b];D.delFromStorage(C),C instanceof A&&C.delChildrenFromStorage(D)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(D){for(var b=null,C=new R(0,0,0,0),f=D||this._children,v=[],m=0;m<f.length;m++){var o=f[m];if(!(o.ignore||o.invisible)){var u=o.getBoundingRect(),l=o.getLocalTransform(v);l?(C.copy(u),C.applyTransform(l),b=b||C.clone(),b.union(C)):(b=b||u.clone(),b.union(u))}}return b||C}},M.inherits(A,F);var T=A;X.exports=T},95946:function(X,z,e){var M=e(12072),F=e(43970),R=M.applyTransform,A=Math.min,T=Math.max;function D(C,f,v,m){v<0&&(C=C+v,v=-v),m<0&&(f=f+m,m=-m),this.x=C,this.y=f,this.width=v,this.height=m}D.prototype={constructor:D,union:function(C){var f=A(C.x,this.x),v=A(C.y,this.y);this.width=T(C.x+C.width,this.x+this.width)-f,this.height=T(C.y+C.height,this.y+this.height)-v,this.x=f,this.y=v},applyTransform:function(){var C=[],f=[],v=[],m=[];return function(o){if(o){C[0]=v[0]=this.x,C[1]=m[1]=this.y,f[0]=m[0]=this.x+this.width,f[1]=v[1]=this.y+this.height,R(C,C,o),R(f,f,o),R(v,v,o),R(m,m,o),this.x=A(C[0],f[0],v[0],m[0]),this.y=A(C[1],f[1],v[1],m[1]);var u=T(C[0],f[0],v[0],m[0]),l=T(C[1],f[1],v[1],m[1]);this.width=u-this.x,this.height=l-this.y}}}(),calculateTransform:function(C){var f=this,v=C.width/f.width,m=C.height/f.height,o=F.create();return F.translate(o,o,[-f.x,-f.y]),F.scale(o,o,[v,m]),F.translate(o,o,[C.x,C.y]),o},intersect:function(C){if(!C)return!1;C instanceof D||(C=D.create(C));var f=this,v=f.x,m=f.x+f.width,o=f.y,u=f.y+f.height,l=C.x,r=C.x+C.width,s=C.y,c=C.y+C.height;return!(m<l||r<v||u<s||c<o)},contain:function(C,f){var v=this;return C>=v.x&&C<=v.x+v.width&&f>=v.y&&f<=v.y+v.height},clone:function(){return new D(this.x,this.y,this.width,this.height)},copy:function(C){this.x=C.x,this.y=C.y,this.width=C.width,this.height=C.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},D.create=function(C){return new D(C.x,C.y,C.width,C.height)};var b=D;X.exports=b},94548:function(X,z,e){var M=e(19756),F=function(){this._track=[]};F.prototype={constructor:F,recognize:function(b,C,f){return this._doTrack(b,C,f),this._recognize(b)},clear:function(){return this._track.length=0,this},_doTrack:function(b,C,f){var v=b.touches;if(v){for(var m={points:[],touches:[],target:C,event:b},o=0,u=v.length;o<u;o++){var l=v[o],r=M.clientToLocal(f,l,{});m.points.push([r.zrX,r.zrY]),m.touches.push(l)}this._track.push(m)}},_recognize:function(b){for(var C in T)if(T.hasOwnProperty(C)){var f=T[C](this._track,b);if(f)return f}}};function R(b){var C=b[1][0]-b[0][0],f=b[1][1]-b[0][1];return Math.sqrt(C*C+f*f)}function A(b){return[(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]}var T={pinch:function(b,C){var f=b.length;if(f){var v=(b[f-1]||{}).points,m=(b[f-2]||{}).points||v;if(m&&m.length>1&&v&&v.length>1){var o=R(v)/R(m);!isFinite(o)&&(o=1),C.pinchScale=o;var u=A(v);return C.pinchX=u[0],C.pinchY=u[1],{type:"pinch",target:b[0].target,event:C}}}}},D=F;X.exports=D},21311:function(X){var z=function(){this.head=null,this.tail=null,this._len=0},e=z.prototype;e.insert=function(T){var D=new M(T);return this.insertEntry(D),D},e.insertEntry=function(T){this.head?(this.tail.next=T,T.prev=this.tail,T.next=null,this.tail=T):this.head=this.tail=T,this._len++},e.remove=function(T){var D=T.prev,b=T.next;D?D.next=b:this.head=b,b?b.prev=D:this.tail=D,T.next=T.prev=null,this._len--},e.len=function(){return this._len},e.clear=function(){this.head=this.tail=null,this._len=0};var M=function(T){this.value=T,this.next,this.prev},F=function(T){this._list=new z,this._map={},this._maxSize=T||10,this._lastRemovedEntry=null},R=F.prototype;R.put=function(T,D){var b=this._list,C=this._map,f=null;if(C[T]==null){var v=b.len(),m=this._lastRemovedEntry;if(v>=this._maxSize&&v>0){var o=b.head;b.remove(o),delete C[o.key],f=o.value,this._lastRemovedEntry=o}m?m.value=D:m=new M(D),m.key=T,b.insertEntry(m),C[T]=m}return f},R.get=function(T){var D=this._map[T],b=this._list;if(D!=null)return D!==b.tail&&(b.remove(D),b.insertEntry(D)),D.value},R.clear=function(){this._list.clear(),this._map={}};var A=F;X.exports=A},22407:function(X,z,e){var M=e(90723),F=e(12072),R=e(18644),A=e(95946),T=e(56570),D=T.devicePixelRatio,b={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},C=[],f=[],v=[],m=[],o=Math.min,u=Math.max,l=Math.cos,r=Math.sin,s=Math.sqrt,c=Math.abs,x=typeof Float32Array<"u",a=function(n){this._saveData=!n,this._saveData&&(this.data=[]),this._ctx=null};a.prototype={constructor:a,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(n,h,g){g=g||0,this._ux=c(g/D/n)||0,this._uy=c(g/D/h)||0},getContext:function(){return this._ctx},beginPath:function(n){return this._ctx=n,n&&n.beginPath(),n&&(this.dpr=n.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(n,h){return this.addData(b.M,n,h),this._ctx&&this._ctx.moveTo(n,h),this._x0=n,this._y0=h,this._xi=n,this._yi=h,this},lineTo:function(n,h){var g=c(n-this._xi)>this._ux||c(h-this._yi)>this._uy||this._len<5;return this.addData(b.L,n,h),this._ctx&&g&&(this._needsDash()?this._dashedLineTo(n,h):this._ctx.lineTo(n,h)),g&&(this._xi=n,this._yi=h),this},bezierCurveTo:function(n,h,g,d,y,p){return this.addData(b.C,n,h,g,d,y,p),this._ctx&&(this._needsDash()?this._dashedBezierTo(n,h,g,d,y,p):this._ctx.bezierCurveTo(n,h,g,d,y,p)),this._xi=y,this._yi=p,this},quadraticCurveTo:function(n,h,g,d){return this.addData(b.Q,n,h,g,d),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(n,h,g,d):this._ctx.quadraticCurveTo(n,h,g,d)),this._xi=g,this._yi=d,this},arc:function(n,h,g,d,y,p){return this.addData(b.A,n,h,g,g,d,y-d,0,p?0:1),this._ctx&&this._ctx.arc(n,h,g,d,y,p),this._xi=l(y)*g+n,this._yi=r(y)*g+h,this},arcTo:function(n,h,g,d,y){return this._ctx&&this._ctx.arcTo(n,h,g,d,y),this},rect:function(n,h,g,d){return this._ctx&&this._ctx.rect(n,h,g,d),this.addData(b.R,n,h,g,d),this},closePath:function(){this.addData(b.Z);var n=this._ctx,h=this._x0,g=this._y0;return n&&(this._needsDash()&&this._dashedLineTo(h,g),n.closePath()),this._xi=h,this._yi=g,this},fill:function(n){n&&n.fill(),this.toStatic()},stroke:function(n){n&&n.stroke(),this.toStatic()},setLineDash:function(n){if(n instanceof Array){this._lineDash=n,this._dashIdx=0;for(var h=0,g=0;g<n.length;g++)h+=n[g];this._dashSum=h}return this},setLineDashOffset:function(n){return this._dashOffset=n,this},len:function(){return this._len},setData:function(n){var h=n.length;!(this.data&&this.data.length===h)&&x&&(this.data=new Float32Array(h));for(var g=0;g<h;g++)this.data[g]=n[g];this._len=h},appendPath:function(n){n instanceof Array||(n=[n]);for(var h=n.length,g=0,d=this._len,y=0;y<h;y++)g+=n[y].len();x&&this.data instanceof Float32Array&&(this.data=new Float32Array(d+g));for(var y=0;y<h;y++)for(var p=n[y].data,w=0;w<p.length;w++)this.data[d++]=p[w];this._len=d},addData:function(n){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var g=0;g<arguments.length;g++)h[this._len++]=arguments[g];this._prevCmd=n}},_expandData:function(){if(!(this.data instanceof Array)){for(var n=[],h=0;h<this._len;h++)n[h]=this.data[h];this.data=n}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(n,h){var g=this._dashSum,d=this._dashOffset,y=this._lineDash,p=this._ctx,w=this._xi,S=this._yi,O=n-w,B=h-S,k=s(O*O+B*B),P=w,L=S,E,N=y.length,I;for(O/=k,B/=k,d<0&&(d=g+d),d%=g,P-=d*O,L-=d*B;O>0&&P<=n||O<0&&P>=n||O===0&&(B>0&&L<=h||B<0&&L>=h);)I=this._dashIdx,E=y[I],P+=O*E,L+=B*E,this._dashIdx=(I+1)%N,!(O>0&&P<w||O<0&&P>w||B>0&&L<S||B<0&&L>S)&&p[I%2?"moveTo":"lineTo"](O>=0?o(P,n):u(P,n),B>=0?o(L,h):u(L,h));O=P-n,B=L-h,this._dashOffset=-s(O*O+B*B)},_dashedBezierTo:function(n,h,g,d,y,p){var w=this._dashSum,S=this._dashOffset,O=this._lineDash,B=this._ctx,k=this._xi,P=this._yi,L,E,N,I=M.cubicAt,G=0,W=this._dashIdx,Z=O.length,U,H,V=0;for(S<0&&(S=w+S),S%=w,L=0;L<1;L+=.1)E=I(k,n,g,y,L+.1)-I(k,n,g,y,L),N=I(P,h,d,p,L+.1)-I(P,h,d,p,L),G+=s(E*E+N*N);for(;W<Z&&(V+=O[W],!(V>S));W++);for(L=(V-S)/G;L<=1;)U=I(k,n,g,y,L),H=I(P,h,d,p,L),W%2?B.moveTo(U,H):B.lineTo(U,H),L+=O[W]/G,W=(W+1)%Z;W%2!==0&&B.lineTo(y,p),E=y-U,N=p-H,this._dashOffset=-s(E*E+N*N)},_dashedQuadraticTo:function(n,h,g,d){var y=g,p=d;g=(g+2*n)/3,d=(d+2*h)/3,n=(this._xi+2*n)/3,h=(this._yi+2*h)/3,this._dashedBezierTo(n,h,g,d,y,p)},toStatic:function(){var n=this.data;n instanceof Array&&(n.length=this._len,x&&(this.data=new Float32Array(n)))},getBoundingRect:function(){C[0]=C[1]=v[0]=v[1]=Number.MAX_VALUE,f[0]=f[1]=m[0]=m[1]=-Number.MAX_VALUE;for(var n=this.data,h=0,g=0,d=0,y=0,p=0;p<n.length;){var w=n[p++];switch(p===1&&(h=n[p],g=n[p+1],d=h,y=g),w){case b.M:d=n[p++],y=n[p++],h=d,g=y,v[0]=d,v[1]=y,m[0]=d,m[1]=y;break;case b.L:R.fromLine(h,g,n[p],n[p+1],v,m),h=n[p++],g=n[p++];break;case b.C:R.fromCubic(h,g,n[p++],n[p++],n[p++],n[p++],n[p],n[p+1],v,m),h=n[p++],g=n[p++];break;case b.Q:R.fromQuadratic(h,g,n[p++],n[p++],n[p],n[p+1],v,m),h=n[p++],g=n[p++];break;case b.A:var S=n[p++],O=n[p++],B=n[p++],k=n[p++],P=n[p++],L=n[p++]+P;p+=1;var E=1-n[p++];p===1&&(d=l(P)*B+S,y=r(P)*k+O),R.fromArc(S,O,B,k,P,L,E,v,m),h=l(L)*B+S,g=r(L)*k+O;break;case b.R:d=h=n[p++],y=g=n[p++];var N=n[p++],I=n[p++];R.fromLine(d,y,d+N,y+I,v,m);break;case b.Z:h=d,g=y;break}F.min(C,C,v),F.max(f,f,m)}return p===0&&(C[0]=C[1]=f[0]=f[1]=0),new A(C[0],C[1],f[0]-C[0],f[1]-C[1])},rebuildPath:function(n){for(var h=this.data,g,d,y,p,w,S,O=this._ux,B=this._uy,k=this._len,P=0;P<k;){var L=h[P++];switch(P===1&&(y=h[P],p=h[P+1],g=y,d=p),L){case b.M:g=y=h[P++],d=p=h[P++],n.moveTo(y,p);break;case b.L:w=h[P++],S=h[P++],(c(w-y)>O||c(S-p)>B||P===k-1)&&(n.lineTo(w,S),y=w,p=S);break;case b.C:n.bezierCurveTo(h[P++],h[P++],h[P++],h[P++],h[P++],h[P++]),y=h[P-2],p=h[P-1];break;case b.Q:n.quadraticCurveTo(h[P++],h[P++],h[P++],h[P++]),y=h[P-2],p=h[P-1];break;case b.A:var E=h[P++],N=h[P++],I=h[P++],G=h[P++],W=h[P++],Z=h[P++],U=h[P++],H=h[P++],V=I>G?I:G,Y=I>G?1:I/G,$=I>G?G/I:1,K=Math.abs(I-G)>.001,J=W+Z;K?(n.translate(E,N),n.rotate(U),n.scale(Y,$),n.arc(0,0,V,W,J,1-H),n.scale(1/Y,1/$),n.rotate(-U),n.translate(-E,-N)):n.arc(E,N,V,W,J,1-H),P===1&&(g=l(W)*I+E,d=r(W)*G+N),y=l(J)*I+E,p=r(J)*G+N;break;case b.R:g=y=h[P],d=p=h[P+1],n.rect(h[P++],h[P++],h[P++],h[P++]);break;case b.Z:n.closePath(),y=g,p=d}}}},a.CMD=b;var i=a;X.exports=i},14107:function(X){function z(){}z.prototype={diff:function(A,T,D){D||(D=function(x,a){return x===a}),this.equals=D;var b=this;A=A.slice(),T=T.slice();var C=T.length,f=A.length,v=1,m=C+f,o=[{newPos:-1,components:[]}],u=this.extractCommon(o[0],T,A,0);if(o[0].newPos+1>=C&&u+1>=f){for(var l=[],r=0;r<T.length;r++)l.push(r);return[{indices:l,count:T.length}]}function s(){for(var x=-1*v;x<=v;x+=2){var a,i=o[x-1],n=o[x+1],h=(n?n.newPos:0)-x;i&&(o[x-1]=void 0);var g=i&&i.newPos+1<C,d=n&&0<=h&&h<f;if(!g&&!d){o[x]=void 0;continue}if(!g||d&&i.newPos<n.newPos?(a=M(n),b.pushComponent(a.components,void 0,!0)):(a=i,a.newPos++,b.pushComponent(a.components,!0,void 0)),h=b.extractCommon(a,T,A,x),a.newPos+1>=C&&h+1>=f)return e(b,a.components,T,A);o[x]=a}v++}for(;v<=m;){var c=s();if(c)return c}},pushComponent:function(A,T,D){var b=A[A.length-1];b&&b.added===T&&b.removed===D?A[A.length-1]={count:b.count+1,added:T,removed:D}:A.push({count:1,added:T,removed:D})},extractCommon:function(A,T,D,b){for(var C=T.length,f=D.length,v=A.newPos,m=v-b,o=0;v+1<C&&m+1<f&&this.equals(T[v+1],D[m+1]);)v++,m++,o++;return o&&A.components.push({count:o}),A.newPos=v,m},tokenize:function(A){return A.slice()},join:function(A){return A.slice()}};function e(A,T,D,b){for(var C=0,f=T.length,v=0,m=0;C<f;C++){var o=T[C];if(o.removed){for(var u=[],l=m;l<m+o.count;l++)u.push(l);o.indices=u,m+=o.count}else{for(var u=[],l=v;l<v+o.count;l++)u.push(l);o.indices=u,v+=o.count,o.added||(m+=o.count)}}return T}function M(A){return{newPos:A.newPos,components:A.components.slice(0)}}var F=new z;function R(A,T,D){return F.diff(A,T,D)}X.exports=R},18644:function(X,z,e){var M=e(12072),F=e(90723),R=Math.min,A=Math.max,T=Math.sin,D=Math.cos,b=Math.PI*2,C=M.create(),f=M.create(),v=M.create();function m(x,a,i){if(x.length!==0){var n=x[0],h=n[0],g=n[0],d=n[1],y=n[1],p;for(p=1;p<x.length;p++)n=x[p],h=R(h,n[0]),g=A(g,n[0]),d=R(d,n[1]),y=A(y,n[1]);a[0]=h,a[1]=d,i[0]=g,i[1]=y}}function o(x,a,i,n,h,g){h[0]=R(x,i),h[1]=R(a,n),g[0]=A(x,i),g[1]=A(a,n)}var u=[],l=[];function r(x,a,i,n,h,g,d,y,p,w){var S=F.cubicExtrema,O=F.cubicAt,B,k=S(x,i,h,d,u);for(p[0]=1/0,p[1]=1/0,w[0]=-1/0,w[1]=-1/0,B=0;B<k;B++){var P=O(x,i,h,d,u[B]);p[0]=R(P,p[0]),w[0]=A(P,w[0])}for(k=S(a,n,g,y,l),B=0;B<k;B++){var L=O(a,n,g,y,l[B]);p[1]=R(L,p[1]),w[1]=A(L,w[1])}p[0]=R(x,p[0]),w[0]=A(x,w[0]),p[0]=R(d,p[0]),w[0]=A(d,w[0]),p[1]=R(a,p[1]),w[1]=A(a,w[1]),p[1]=R(y,p[1]),w[1]=A(y,w[1])}function s(x,a,i,n,h,g,d,y){var p=F.quadraticExtremum,w=F.quadraticAt,S=A(R(p(x,i,h),1),0),O=A(R(p(a,n,g),1),0),B=w(x,i,h,S),k=w(a,n,g,O);d[0]=R(x,h,B),d[1]=R(a,g,k),y[0]=A(x,h,B),y[1]=A(a,g,k)}function c(x,a,i,n,h,g,d,y,p){var w=M.min,S=M.max,O=Math.abs(h-g);if(O%b<1e-4&&O>1e-4){y[0]=x-i,y[1]=a-n,p[0]=x+i,p[1]=a+n;return}if(C[0]=D(h)*i+x,C[1]=T(h)*n+a,f[0]=D(g)*i+x,f[1]=T(g)*n+a,w(y,C,f),S(p,C,f),h=h%b,h<0&&(h=h+b),g=g%b,g<0&&(g=g+b),h>g&&!d?g+=b:h<g&&d&&(h+=b),d){var B=g;g=h,h=B}for(var k=0;k<g;k+=Math.PI/2)k>h&&(v[0]=D(k)*i+x,v[1]=T(k)*n+a,w(y,v,y),S(p,v,p))}z.fromPoints=m,z.fromLine=o,z.fromCubic=r,z.fromQuadratic=s,z.fromArc=c},90723:function(X,z,e){var M=e(12072),F=M.create,R=M.distSquare,A=Math.pow,T=Math.sqrt,D=1e-8,b=1e-4,C=T(3),f=1/3,v=F(),m=F(),o=F();function u(w){return w>-D&&w<D}function l(w){return w>D||w<-D}function r(w,S,O,B,k){var P=1-k;return P*P*(P*w+3*k*S)+k*k*(k*B+3*P*O)}function s(w,S,O,B,k){var P=1-k;return 3*(((S-w)*P+2*(O-S)*k)*P+(B-O)*k*k)}function c(w,S,O,B,k,P){var L=B+3*(S-O)-w,E=3*(O-S*2+w),N=3*(S-w),I=w-k,G=E*E-3*L*N,W=E*N-9*L*I,Z=N*N-3*E*I,U=0;if(u(G)&&u(W))if(u(E))P[0]=0;else{var H=-N/E;H>=0&&H<=1&&(P[U++]=H)}else{var V=W*W-4*G*Z;if(u(V)){var Y=W/G,H=-E/L+Y,$=-Y/2;H>=0&&H<=1&&(P[U++]=H),$>=0&&$<=1&&(P[U++]=$)}else if(V>0){var K=T(V),J=G*E+1.5*L*(-W+K),Q=G*E+1.5*L*(-W-K);J<0?J=-A(-J,f):J=A(J,f),Q<0?Q=-A(-Q,f):Q=A(Q,f);var H=(-E-(J+Q))/(3*L);H>=0&&H<=1&&(P[U++]=H)}else{var et=(2*G*E-3*L*W)/(2*T(G*G*G)),nt=Math.acos(et)/3,st=T(G),ut=Math.cos(nt),H=(-E-2*st*ut)/(3*L),$=(-E+st*(ut+C*Math.sin(nt)))/(3*L),rt=(-E+st*(ut-C*Math.sin(nt)))/(3*L);H>=0&&H<=1&&(P[U++]=H),$>=0&&$<=1&&(P[U++]=$),rt>=0&&rt<=1&&(P[U++]=rt)}}return U}function x(w,S,O,B,k){var P=6*O-12*S+6*w,L=9*S+3*B-3*w-9*O,E=3*S-3*w,N=0;if(u(L)){if(l(P)){var I=-E/P;I>=0&&I<=1&&(k[N++]=I)}}else{var G=P*P-4*L*E;if(u(G))k[0]=-P/(2*L);else if(G>0){var W=T(G),I=(-P+W)/(2*L),Z=(-P-W)/(2*L);I>=0&&I<=1&&(k[N++]=I),Z>=0&&Z<=1&&(k[N++]=Z)}}return N}function a(w,S,O,B,k,P){var L=(S-w)*k+w,E=(O-S)*k+S,N=(B-O)*k+O,I=(E-L)*k+L,G=(N-E)*k+E,W=(G-I)*k+I;P[0]=w,P[1]=L,P[2]=I,P[3]=W,P[4]=W,P[5]=G,P[6]=N,P[7]=B}function i(w,S,O,B,k,P,L,E,N,I,G){var W,Z=.005,U=1/0,H,V,Y,$;v[0]=N,v[1]=I;for(var K=0;K<1;K+=.05)m[0]=r(w,O,k,L,K),m[1]=r(S,B,P,E,K),Y=R(v,m),Y<U&&(W=K,U=Y);U=1/0;for(var J=0;J<32&&!(Z<b);J++)H=W-Z,V=W+Z,m[0]=r(w,O,k,L,H),m[1]=r(S,B,P,E,H),Y=R(m,v),H>=0&&Y<U?(W=H,U=Y):(o[0]=r(w,O,k,L,V),o[1]=r(S,B,P,E,V),$=R(o,v),V<=1&&$<U?(W=V,U=$):Z*=.5);return G&&(G[0]=r(w,O,k,L,W),G[1]=r(S,B,P,E,W)),T(U)}function n(w,S,O,B){var k=1-B;return k*(k*w+2*B*S)+B*B*O}function h(w,S,O,B){return 2*((1-B)*(S-w)+B*(O-S))}function g(w,S,O,B,k){var P=w-2*S+O,L=2*(S-w),E=w-B,N=0;if(u(P)){if(l(L)){var I=-E/L;I>=0&&I<=1&&(k[N++]=I)}}else{var G=L*L-4*P*E;if(u(G)){var I=-L/(2*P);I>=0&&I<=1&&(k[N++]=I)}else if(G>0){var W=T(G),I=(-L+W)/(2*P),Z=(-L-W)/(2*P);I>=0&&I<=1&&(k[N++]=I),Z>=0&&Z<=1&&(k[N++]=Z)}}return N}function d(w,S,O){var B=w+O-2*S;return B===0?.5:(w-S)/B}function y(w,S,O,B,k){var P=(S-w)*B+w,L=(O-S)*B+S,E=(L-P)*B+P;k[0]=w,k[1]=P,k[2]=E,k[3]=E,k[4]=L,k[5]=O}function p(w,S,O,B,k,P,L,E,N){var I,G=.005,W=1/0;v[0]=L,v[1]=E;for(var Z=0;Z<1;Z+=.05){m[0]=n(w,O,k,Z),m[1]=n(S,B,P,Z);var U=R(v,m);U<W&&(I=Z,W=U)}W=1/0;for(var H=0;H<32&&!(G<b);H++){var V=I-G,Y=I+G;m[0]=n(w,O,k,V),m[1]=n(S,B,P,V);var U=R(m,v);if(V>=0&&U<W)I=V,W=U;else{o[0]=n(w,O,k,Y),o[1]=n(S,B,P,Y);var $=R(o,v);Y<=1&&$<W?(I=Y,W=$):G*=.5}}return N&&(N[0]=n(w,O,k,I),N[1]=n(S,B,P,I)),T(W)}z.cubicAt=r,z.cubicDerivativeAt=s,z.cubicRootAt=c,z.cubicExtrema=x,z.cubicSubdivide=a,z.cubicProjectPoint=i,z.quadraticAt=n,z.quadraticDerivativeAt=h,z.quadraticRootAt=g,z.quadraticExtremum=d,z.quadraticSubdivide=y,z.quadraticProjectPoint=p},71659:function(X,z,e){var M=e(58020),F=e(9991),R=F.buildTransformer,A="___zrEVENTSAVED",T=[];function D(m,o,u,l,r){return b(T,o,l,r,!0)&&b(m,u,T[0],T[1])}function b(m,o,u,l,r){if(o.getBoundingClientRect&&M.domSupported&&!v(o)){var s=o[A]||(o[A]={}),c=C(o,s),x=f(c,s,r);if(x)return x(m,u,l),!0}return!1}function C(m,o){var u=o.markers;if(u)return u;u=o.markers=[];for(var l=["left","right"],r=["top","bottom"],s=0;s<4;s++){var c=document.createElement("div"),x=c.style,a=s%2,i=(s>>1)%2;x.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",l[a]+":0",r[i]+":0",l[1-a]+":auto",r[1-i]+":auto",""].join("!important;"),m.appendChild(c),u.push(c)}return u}function f(m,o,u){for(var l=u?"invTrans":"trans",r=o[l],s=o.srcCoords,c=!0,x=[],a=[],i=0;i<4;i++){var n=m[i].getBoundingClientRect(),h=2*i,g=n.left,d=n.top;x.push(g,d),c=c&&s&&g===s[h]&&d===s[h+1],a.push(m[i].offsetLeft,m[i].offsetTop)}return c&&r?r:(o.srcCoords=x,o[l]=u?R(a,x):R(x,a))}function v(m){return m.nodeName.toUpperCase()==="CANVAS"}z.transformLocalCoord=D,z.transformCoordWithViewport=b,z.isCanvasEl=v},58020:function(X){var z={};typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?z={browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:typeof document>"u"&&typeof self<"u"?z={browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:typeof navigator>"u"?z={browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:z=M(navigator.userAgent);var e=z;function M(F){var R={},A={},T=F.match(/Firefox\/([\d.]+)/),D=F.match(/MSIE\s([\d.]+)/)||F.match(/Trident\/.+?rv:(([\d.]+))/),b=F.match(/Edge\/([\d.]+)/),C=/micromessenger/i.test(F);return T&&(A.firefox=!0,A.version=T[1]),D&&(A.ie=!0,A.version=D[1]),b&&(A.edge=!0,A.version=b[1]),C&&(A.weChat=!0),{browser:A,os:R,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect<"u",touchEventsSupported:"ontouchstart"in window&&!A.ie&&!A.edge,pointerEventsSupported:"onpointerdown"in window&&(A.edge||A.ie&&A.version>=11),domSupported:typeof document<"u"}}X.exports=e},19756:function(X,z,e){var M=e(91212);z.Dispatcher=M;var F=e(58020),R=e(71659),A=R.isCanvasEl,T=R.transformCoordWithViewport,D=typeof window<"u"&&!!window.addEventListener,b=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,C=[];function f(x,a,i,n){return i=i||{},n||!F.canvasSupported?v(x,a,i):F.browser.firefox&&a.layerX!=null&&a.layerX!==a.offsetX?(i.zrX=a.layerX,i.zrY=a.layerY):a.offsetX!=null?(i.zrX=a.offsetX,i.zrY=a.offsetY):v(x,a,i),i}function v(x,a,i){if(F.domSupported&&x.getBoundingClientRect){var n=a.clientX,h=a.clientY;if(A(x)){var g=x.getBoundingClientRect();i.zrX=n-g.left,i.zrY=h-g.top;return}else if(T(C,x,n,h)){i.zrX=C[0],i.zrY=C[1];return}}i.zrX=i.zrY=0}function m(x){return x||window.event}function o(x,a,i){if(a=m(a),a.zrX!=null)return a;var n=a.type,h=n&&n.indexOf("touch")>=0;if(!h)f(x,a,a,i),a.zrDelta=a.wheelDelta?a.wheelDelta/120:-(a.detail||0)/3;else{var g=n!=="touchend"?a.targetTouches[0]:a.changedTouches[0];g&&f(x,g,a,i)}var d=a.button;return a.which==null&&d!==void 0&&b.test(a.type)&&(a.which=d&1?1:d&2?3:d&4?2:0),a}function u(x,a,i,n){D?x.addEventListener(a,i,n):x.attachEvent("on"+a,i)}function l(x,a,i,n){D?x.removeEventListener(a,i,n):x.detachEvent("on"+a,i)}var r=D?function(x){x.preventDefault(),x.stopPropagation(),x.cancelBubble=!0}:function(x){x.returnValue=!1,x.cancelBubble=!0};function s(x){return x.which===2||x.which===3}function c(x){return x.which>1}z.clientToLocal=f,z.getNativeEvent=m,z.normalizeEvent=o,z.addEventListener=u,z.removeEventListener=l,z.stop=r,z.isMiddleOrRightButtonOnMouseUpDown=s,z.notLeftMouse=c},9991:function(X,z){var e=Math.log(2);function M(R,A,T,D,b,C){var f=D+"-"+b,v=R.length;if(C.hasOwnProperty(f))return C[f];if(A===1){var m=Math.round(Math.log((1<<v)-1&~b)/e);return R[T][m]}for(var o=D|1<<T,u=T+1;D&1<<u;)u++;for(var l=0,r=0,s=0;r<v;r++){var c=1<<r;c&b||(l+=(s%2?-1:1)*R[T][r]*M(R,A-1,u,o,b|c,C),s++)}return C[f]=l,l}function F(R,A){var T=[[R[0],R[1],1,0,0,0,-A[0]*R[0],-A[0]*R[1]],[0,0,0,R[0],R[1],1,-A[1]*R[0],-A[1]*R[1]],[R[2],R[3],1,0,0,0,-A[2]*R[2],-A[2]*R[3]],[0,0,0,R[2],R[3],1,-A[3]*R[2],-A[3]*R[3]],[R[4],R[5],1,0,0,0,-A[4]*R[4],-A[4]*R[5]],[0,0,0,R[4],R[5],1,-A[5]*R[4],-A[5]*R[5]],[R[6],R[7],1,0,0,0,-A[6]*R[6],-A[6]*R[7]],[0,0,0,R[6],R[7],1,-A[7]*R[6],-A[7]*R[7]]],D={},b=M(T,8,0,0,0,D);if(b!==0){for(var C=[],f=0;f<8;f++)for(var v=0;v<8;v++)C[v]==null&&(C[v]=0),C[v]+=((f+v)%2?-1:1)*M(T,7,f===0?1:0,1<<f,1<<v,D)/b*A[f];return function(m,o,u){var l=o*C[6]+u*C[7]+1;m[0]=(o*C[0]+u*C[1]+C[2])/l,m[1]=(o*C[3]+u*C[4]+C[5])/l}}}z.buildTransformer=F},88242:function(X){var z=2311;function e(){return z++}X.exports=e},34081:function(X,z,e){var M=e(49500),F=e(56570),R=F.debugMode,A=function(){};R===1&&(A=M.error);var T=A;X.exports=T},43970:function(X,z){var e=typeof Float32Array>"u"?Array:Float32Array;function M(){var v=new e(6);return F(v),v}function F(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=1,v[4]=0,v[5]=0,v}function R(v,m){return v[0]=m[0],v[1]=m[1],v[2]=m[2],v[3]=m[3],v[4]=m[4],v[5]=m[5],v}function A(v,m,o){var u=m[0]*o[0]+m[2]*o[1],l=m[1]*o[0]+m[3]*o[1],r=m[0]*o[2]+m[2]*o[3],s=m[1]*o[2]+m[3]*o[3],c=m[0]*o[4]+m[2]*o[5]+m[4],x=m[1]*o[4]+m[3]*o[5]+m[5];return v[0]=u,v[1]=l,v[2]=r,v[3]=s,v[4]=c,v[5]=x,v}function T(v,m,o){return v[0]=m[0],v[1]=m[1],v[2]=m[2],v[3]=m[3],v[4]=m[4]+o[0],v[5]=m[5]+o[1],v}function D(v,m,o){var u=m[0],l=m[2],r=m[4],s=m[1],c=m[3],x=m[5],a=Math.sin(o),i=Math.cos(o);return v[0]=u*i+s*a,v[1]=-u*a+s*i,v[2]=l*i+c*a,v[3]=-l*a+i*c,v[4]=i*r+a*x,v[5]=i*x-a*r,v}function b(v,m,o){var u=o[0],l=o[1];return v[0]=m[0]*u,v[1]=m[1]*l,v[2]=m[2]*u,v[3]=m[3]*l,v[4]=m[4]*u,v[5]=m[5]*l,v}function C(v,m){var o=m[0],u=m[2],l=m[4],r=m[1],s=m[3],c=m[5],x=o*s-r*u;return x?(x=1/x,v[0]=s*x,v[1]=-r*x,v[2]=-u*x,v[3]=o*x,v[4]=(u*c-s*l)*x,v[5]=(r*l-o*c)*x,v):null}function f(v){var m=M();return R(m,v),m}z.create=M,z.identity=F,z.copy=R,z.mul=A,z.translate=T,z.rotate=D,z.scale=b,z.invert=C,z.clone=f},93318:function(X){var z=32,e=7,M=256;function F(v){for(var m=0;v>=z;)m|=v&1,v>>=1;return v+m}function R(v,m,o,u){var l=m+1;if(l===o)return 1;if(u(v[l++],v[m])<0){for(;l<o&&u(v[l],v[l-1])<0;)l++;A(v,m,l)}else for(;l<o&&u(v[l],v[l-1])>=0;)l++;return l-m}function A(v,m,o){for(o--;m<o;){var u=v[m];v[m++]=v[o],v[o--]=u}}function T(v,m,o,u,l){for(u===m&&u++;u<o;u++){for(var r=v[u],s=m,c=u,x;s<c;)x=s+c>>>1,l(r,v[x])<0?c=x:s=x+1;var a=u-s;switch(a){case 3:v[s+3]=v[s+2];case 2:v[s+2]=v[s+1];case 1:v[s+1]=v[s];break;default:for(;a>0;)v[s+a]=v[s+a-1],a--}v[s]=r}}function D(v,m,o,u,l,r){var s=0,c=0,x=1;if(r(v,m[o+l])>0){for(c=u-l;x<c&&r(v,m[o+l+x])>0;)s=x,x=(x<<1)+1,x<=0&&(x=c);x>c&&(x=c),s+=l,x+=l}else{for(c=l+1;x<c&&r(v,m[o+l-x])<=0;)s=x,x=(x<<1)+1,x<=0&&(x=c);x>c&&(x=c);var a=s;s=l-x,x=l-a}for(s++;s<x;){var i=s+(x-s>>>1);r(v,m[o+i])>0?s=i+1:x=i}return x}function b(v,m,o,u,l,r){var s=0,c=0,x=1;if(r(v,m[o+l])<0){for(c=l+1;x<c&&r(v,m[o+l-x])<0;)s=x,x=(x<<1)+1,x<=0&&(x=c);x>c&&(x=c);var a=s;s=l-x,x=l-a}else{for(c=u-l;x<c&&r(v,m[o+l+x])>=0;)s=x,x=(x<<1)+1,x<=0&&(x=c);x>c&&(x=c),s+=l,x+=l}for(s++;s<x;){var i=s+(x-s>>>1);r(v,m[o+i])<0?x=i:s=i+1}return x}function C(v,m){var o=e,u=0,l=M,r=0,s,c,x=0;u=v.length,u<2*M&&(l=u>>>1);var a=[];r=u<120?5:u<1542?10:u<119151?19:40,s=[],c=[];function i(p,w){s[x]=p,c[x]=w,x+=1}function n(){for(;x>1;){var p=x-2;if(p>=1&&c[p-1]<=c[p]+c[p+1]||p>=2&&c[p-2]<=c[p]+c[p-1])c[p-1]<c[p+1]&&p--;else if(c[p]>c[p+1])break;g(p)}}function h(){for(;x>1;){var p=x-2;p>0&&c[p-1]<c[p+1]&&p--,g(p)}}function g(p){var w=s[p],S=c[p],O=s[p+1],B=c[p+1];c[p]=S+B,p===x-3&&(s[p+1]=s[p+2],c[p+1]=c[p+2]),x--;var k=b(v[O],v,w,S,0,m);w+=k,S-=k,S!==0&&(B=D(v[w+S-1],v,O,B,B-1,m),B!==0&&(S<=B?d(w,S,O,B):y(w,S,O,B)))}function d(p,w,S,O){var B=0;for(B=0;B<w;B++)a[B]=v[p+B];var k=0,P=S,L=p;if(v[L++]=v[P++],--O===0){for(B=0;B<w;B++)v[L+B]=a[k+B];return}if(w===1){for(B=0;B<O;B++)v[L+B]=v[P+B];v[L+O]=a[k];return}for(var E=o,N,I,G;;){N=0,I=0,G=!1;do if(m(v[P],a[k])<0){if(v[L++]=v[P++],I++,N=0,--O===0){G=!0;break}}else if(v[L++]=a[k++],N++,I=0,--w===1){G=!0;break}while((N|I)<E);if(G)break;do{if(N=b(v[P],a,k,w,0,m),N!==0){for(B=0;B<N;B++)v[L+B]=a[k+B];if(L+=N,k+=N,w-=N,w<=1){G=!0;break}}if(v[L++]=v[P++],--O===0){G=!0;break}if(I=D(a[k],v,P,O,0,m),I!==0){for(B=0;B<I;B++)v[L+B]=v[P+B];if(L+=I,P+=I,O-=I,O===0){G=!0;break}}if(v[L++]=a[k++],--w===1){G=!0;break}E--}while(N>=e||I>=e);if(G)break;E<0&&(E=0),E+=2}if(o=E,o<1&&(o=1),w===1){for(B=0;B<O;B++)v[L+B]=v[P+B];v[L+O]=a[k]}else{if(w===0)throw new Error;for(B=0;B<w;B++)v[L+B]=a[k+B]}}function y(p,w,S,O){var B=0;for(B=0;B<O;B++)a[B]=v[S+B];var k=p+w-1,P=O-1,L=S+O-1,E=0,N=0;if(v[L--]=v[k--],--w===0){for(E=L-(O-1),B=0;B<O;B++)v[E+B]=a[B];return}if(O===1){for(L-=w,k-=w,N=L+1,E=k+1,B=w-1;B>=0;B--)v[N+B]=v[E+B];v[L]=a[P];return}for(var I=o;;){var G=0,W=0,Z=!1;do if(m(a[P],v[k])<0){if(v[L--]=v[k--],G++,W=0,--w===0){Z=!0;break}}else if(v[L--]=a[P--],W++,G=0,--O===1){Z=!0;break}while((G|W)<I);if(Z)break;do{if(G=w-b(a[P],v,p,w,w-1,m),G!==0){for(L-=G,k-=G,w-=G,N=L+1,E=k+1,B=G-1;B>=0;B--)v[N+B]=v[E+B];if(w===0){Z=!0;break}}if(v[L--]=a[P--],--O===1){Z=!0;break}if(W=O-D(v[k],a,0,O,O-1,m),W!==0){for(L-=W,P-=W,O-=W,N=L+1,E=P+1,B=0;B<W;B++)v[N+B]=a[E+B];if(O<=1){Z=!0;break}}if(v[L--]=v[k--],--w===0){Z=!0;break}I--}while(G>=e||W>=e);if(Z)break;I<0&&(I=0),I+=2}if(o=I,o<1&&(o=1),O===1){for(L-=w,k-=w,N=L+1,E=k+1,B=w-1;B>=0;B--)v[N+B]=v[E+B];v[L]=a[P]}else{if(O===0)throw new Error;for(E=L-(O-1),B=0;B<O;B++)v[E+B]=a[B]}}this.mergeRuns=n,this.forceMergeRuns=h,this.pushRun=i}function f(v,m,o,u){o||(o=0),u||(u=v.length);var l=u-o;if(!(l<2)){var r=0;if(l<z){r=R(v,o,u,m),T(v,o,u,o+r,m);return}var s=new C(v,m),c=F(l);do{if(r=R(v,o,u,m),r<c){var x=l;x>c&&(x=c),T(v,o,o+x,o+r,m),r=x}s.pushRun(o,r),s.mergeRuns(),l-=r,o+=r}while(l!==0);s.forceMergeRuns()}}X.exports=f},31879:function(X,z){var e={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},M={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},F=Object.prototype.toString,R=Array.prototype,A=R.forEach,T=R.filter,D=R.slice,b=R.map,C=R.reduce,f={};function v(rt,ht){rt==="createCanvas"&&(c=null),f[rt]=ht}function m(rt){if(rt==null||typeof rt!="object")return rt;var ht=rt,Pt=F.call(rt);if(Pt==="[object Array]"){if(!Q(rt)){ht=[];for(var wt=0,At=rt.length;wt<At;wt++)ht[wt]=m(rt[wt])}}else if(M[Pt]){if(!Q(rt)){var Nt=rt.constructor;if(rt.constructor.from)ht=Nt.from(rt);else{ht=new Nt(rt.length);for(var wt=0,At=rt.length;wt<At;wt++)ht[wt]=m(rt[wt])}}}else if(!e[Pt]&&!Q(rt)&&!I(rt)){ht={};for(var Lt in rt)rt.hasOwnProperty(Lt)&&(ht[Lt]=m(rt[Lt]))}return ht}function o(rt,ht,Pt){if(!L(ht)||!L(rt))return Pt?m(ht):rt;for(var wt in ht)if(ht.hasOwnProperty(wt)){var At=rt[wt],Nt=ht[wt];L(Nt)&&L(At)&&!B(Nt)&&!B(At)&&!I(Nt)&&!I(At)&&!E(Nt)&&!E(At)&&!Q(Nt)&&!Q(At)?o(At,Nt,Pt):(Pt||!(wt in rt))&&(rt[wt]=m(ht[wt],!0))}return rt}function u(rt,ht){for(var Pt=rt[0],wt=1,At=rt.length;wt<At;wt++)Pt=o(Pt,rt[wt],ht);return Pt}function l(rt,ht){for(var Pt in ht)ht.hasOwnProperty(Pt)&&(rt[Pt]=ht[Pt]);return rt}function r(rt,ht,Pt){for(var wt in ht)ht.hasOwnProperty(wt)&&(Pt?ht[wt]!=null:rt[wt]==null)&&(rt[wt]=ht[wt]);return rt}var s=function(){return f.createCanvas()};f.createCanvas=function(){return document.createElement("canvas")};var c;function x(){return c||(c=s().getContext("2d")),c}function a(rt,ht){if(rt){if(rt.indexOf)return rt.indexOf(ht);for(var Pt=0,wt=rt.length;Pt<wt;Pt++)if(rt[Pt]===ht)return Pt}return-1}function i(rt,ht){var Pt=rt.prototype;function wt(){}wt.prototype=ht.prototype,rt.prototype=new wt;for(var At in Pt)Pt.hasOwnProperty(At)&&(rt.prototype[At]=Pt[At]);rt.prototype.constructor=rt,rt.superClass=ht}function n(rt,ht,Pt){rt="prototype"in rt?rt.prototype:rt,ht="prototype"in ht?ht.prototype:ht,r(rt,ht,Pt)}function h(rt){if(rt)return typeof rt=="string"?!1:typeof rt.length=="number"}function g(rt,ht,Pt){if(rt&&ht)if(rt.forEach&&rt.forEach===A)rt.forEach(ht,Pt);else if(rt.length===+rt.length)for(var wt=0,At=rt.length;wt<At;wt++)ht.call(Pt,rt[wt],wt,rt);else for(var Nt in rt)rt.hasOwnProperty(Nt)&&ht.call(Pt,rt[Nt],Nt,rt)}function d(rt,ht,Pt){if(rt&&ht){if(rt.map&&rt.map===b)return rt.map(ht,Pt);for(var wt=[],At=0,Nt=rt.length;At<Nt;At++)wt.push(ht.call(Pt,rt[At],At,rt));return wt}}function y(rt,ht,Pt,wt){if(rt&&ht){if(rt.reduce&&rt.reduce===C)return rt.reduce(ht,Pt,wt);for(var At=0,Nt=rt.length;At<Nt;At++)Pt=ht.call(wt,Pt,rt[At],At,rt);return Pt}}function p(rt,ht,Pt){if(rt&&ht){if(rt.filter&&rt.filter===T)return rt.filter(ht,Pt);for(var wt=[],At=0,Nt=rt.length;At<Nt;At++)ht.call(Pt,rt[At],At,rt)&&wt.push(rt[At]);return wt}}function w(rt,ht,Pt){if(rt&&ht){for(var wt=0,At=rt.length;wt<At;wt++)if(ht.call(Pt,rt[wt],wt,rt))return rt[wt]}}function S(rt,ht){var Pt=D.call(arguments,2);return function(){return rt.apply(ht,Pt.concat(D.call(arguments)))}}function O(rt){var ht=D.call(arguments,1);return function(){return rt.apply(this,ht.concat(D.call(arguments)))}}function B(rt){return F.call(rt)==="[object Array]"}function k(rt){return typeof rt=="function"}function P(rt){return F.call(rt)==="[object String]"}function L(rt){var ht=typeof rt;return ht==="function"||!!rt&&ht==="object"}function E(rt){return!!e[F.call(rt)]}function N(rt){return!!M[F.call(rt)]}function I(rt){return typeof rt=="object"&&typeof rt.nodeType=="number"&&typeof rt.ownerDocument=="object"}function G(rt){return rt!==rt}function W(rt){for(var ht=0,Pt=arguments.length;ht<Pt;ht++)if(arguments[ht]!=null)return arguments[ht]}function Z(rt,ht){return rt??ht}function U(rt,ht,Pt){return rt??ht??Pt}function H(){return Function.call.apply(D,arguments)}function V(rt){if(typeof rt=="number")return[rt,rt,rt,rt];var ht=rt.length;return ht===2?[rt[0],rt[1],rt[0],rt[1]]:ht===3?[rt[0],rt[1],rt[2],rt[1]]:rt}function Y(rt,ht){if(!rt)throw new Error(ht)}function $(rt){return rt==null?null:typeof rt.trim=="function"?rt.trim():rt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var K="__ec_primitive__";function J(rt){rt[K]=!0}function Q(rt){return rt[K]}function et(rt){var ht=B(rt);this.data={};var Pt=this;rt instanceof et?rt.each(wt):rt&&g(rt,wt);function wt(At,Nt){ht?Pt.set(At,Nt):Pt.set(Nt,At)}}et.prototype={constructor:et,get:function(rt){return this.data.hasOwnProperty(rt)?this.data[rt]:null},set:function(rt,ht){return this.data[rt]=ht},each:function(rt,ht){ht!==void 0&&(rt=S(rt,ht));for(var Pt in this.data)this.data.hasOwnProperty(Pt)&&rt(this.data[Pt],Pt)},removeKey:function(rt){delete this.data[rt]}};function nt(rt){return new et(rt)}function st(rt,ht){for(var Pt=new rt.constructor(rt.length+ht.length),wt=0;wt<rt.length;wt++)Pt[wt]=rt[wt];var At=rt.length;for(wt=0;wt<ht.length;wt++)Pt[wt+At]=ht[wt];return Pt}function ut(){}z.$override=v,z.clone=m,z.merge=o,z.mergeAll=u,z.extend=l,z.defaults=r,z.createCanvas=s,z.getContext=x,z.indexOf=a,z.inherits=i,z.mixin=n,z.isArrayLike=h,z.each=g,z.map=d,z.reduce=y,z.filter=p,z.find=w,z.bind=S,z.curry=O,z.isArray=B,z.isFunction=k,z.isString=P,z.isObject=L,z.isBuiltInObject=E,z.isTypedArray=N,z.isDom=I,z.eqNaN=G,z.retrieve=W,z.retrieve2=Z,z.retrieve3=U,z.slice=H,z.normalizeCssArray=V,z.assert=Y,z.trim=$,z.setAsPrimitive=J,z.isPrimitive=Q,z.createHashMap=nt,z.concatArray=st,z.noop=ut},12072:function(X,z){var e=typeof Float32Array>"u"?Array:Float32Array;function M(p,w){var S=new e(2);return p==null&&(p=0),w==null&&(w=0),S[0]=p,S[1]=w,S}function F(p,w){return p[0]=w[0],p[1]=w[1],p}function R(p){var w=new e(2);return w[0]=p[0],w[1]=p[1],w}function A(p,w,S){return p[0]=w,p[1]=S,p}function T(p,w,S){return p[0]=w[0]+S[0],p[1]=w[1]+S[1],p}function D(p,w,S,O){return p[0]=w[0]+S[0]*O,p[1]=w[1]+S[1]*O,p}function b(p,w,S){return p[0]=w[0]-S[0],p[1]=w[1]-S[1],p}function C(p){return Math.sqrt(v(p))}var f=C;function v(p){return p[0]*p[0]+p[1]*p[1]}var m=v;function o(p,w,S){return p[0]=w[0]*S[0],p[1]=w[1]*S[1],p}function u(p,w,S){return p[0]=w[0]/S[0],p[1]=w[1]/S[1],p}function l(p,w){return p[0]*w[0]+p[1]*w[1]}function r(p,w,S){return p[0]=w[0]*S,p[1]=w[1]*S,p}function s(p,w){var S=C(w);return S===0?(p[0]=0,p[1]=0):(p[0]=w[0]/S,p[1]=w[1]/S),p}function c(p,w){return Math.sqrt((p[0]-w[0])*(p[0]-w[0])+(p[1]-w[1])*(p[1]-w[1]))}var x=c;function a(p,w){return(p[0]-w[0])*(p[0]-w[0])+(p[1]-w[1])*(p[1]-w[1])}var i=a;function n(p,w){return p[0]=-w[0],p[1]=-w[1],p}function h(p,w,S,O){return p[0]=w[0]+O*(S[0]-w[0]),p[1]=w[1]+O*(S[1]-w[1]),p}function g(p,w,S){var O=w[0],B=w[1];return p[0]=S[0]*O+S[2]*B+S[4],p[1]=S[1]*O+S[3]*B+S[5],p}function d(p,w,S){return p[0]=Math.min(w[0],S[0]),p[1]=Math.min(w[1],S[1]),p}function y(p,w,S){return p[0]=Math.max(w[0],S[0]),p[1]=Math.max(w[1],S[1]),p}z.create=M,z.copy=F,z.clone=R,z.set=A,z.add=T,z.scaleAndAdd=D,z.sub=b,z.len=C,z.length=f,z.lenSquare=v,z.lengthSquare=m,z.mul=o,z.div=u,z.dot=l,z.scale=r,z.normalize=s,z.distance=c,z.dist=x,z.distanceSquare=a,z.distSquare=i,z.negate=n,z.lerp=h,z.applyTransform=g,z.min=d,z.max=y},35641:function(X,z,e){var M=e(19756),F=M.addEventListener,R=M.removeEventListener,A=M.normalizeEvent,T=M.getNativeEvent,D=e(31879),b=e(91212),C=e(58020),f=300,v=C.domSupported,m=function(){var P=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],L=["touchstart","touchend","touchmove"],E={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},N=D.map(P,function(I){var G=I.replace("mouse","pointer");return E.hasOwnProperty(G)?G:I});return{mouse:P,touch:L,pointer:N}}(),o={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]};function u(P){return P==="mousewheel"&&C.browser.firefox?"DOMMouseScroll":P}function l(P){var L=P.pointerType;return L==="pen"||L==="touch"}function r(P){P.touching=!0,P.touchTimer!=null&&(clearTimeout(P.touchTimer),P.touchTimer=null),P.touchTimer=setTimeout(function(){P.touching=!1,P.touchTimer=null},700)}function s(P){P&&(P.zrByTouch=!0)}function c(P,L){return A(P.dom,new a(P,L),!0)}function x(P,L){for(var E=L,N=!1;E&&E.nodeType!==9&&!(N=E.domBelongToZr||E!==L&&E===P.painterRoot);)E=E.parentNode;return N}function a(P,L){this.type=L.type,this.target=this.currentTarget=P.dom,this.pointerType=L.pointerType,this.clientX=L.clientX,this.clientY=L.clientY}var i=a.prototype;i.stopPropagation=i.stopImmediatePropagation=i.preventDefault=D.noop;var n={mousedown:function(P){P=A(this.dom,P),this._mayPointerCapture=[P.zrX,P.zrY],this.trigger("mousedown",P)},mousemove:function(P){P=A(this.dom,P);var L=this._mayPointerCapture;L&&(P.zrX!==L[0]||P.zrY!==L[1])&&w(this,!0),this.trigger("mousemove",P)},mouseup:function(P){P=A(this.dom,P),w(this,!1),this.trigger("mouseup",P)},mouseout:function(P){P=A(this.dom,P),this._pointerCapturing&&(P.zrEventControl="no_globalout");var L=P.toElement||P.relatedTarget;P.zrIsToLocalDOM=x(this,L),this.trigger("mouseout",P)},touchstart:function(P){P=A(this.dom,P),s(P),this._lastTouchMoment=new Date,this.handler.processGesture(P,"start"),n.mousemove.call(this,P),n.mousedown.call(this,P)},touchmove:function(P){P=A(this.dom,P),s(P),this.handler.processGesture(P,"change"),n.mousemove.call(this,P)},touchend:function(P){P=A(this.dom,P),s(P),this.handler.processGesture(P,"end"),n.mouseup.call(this,P),+new Date-this._lastTouchMoment<f&&n.click.call(this,P)},pointerdown:function(P){n.mousedown.call(this,P)},pointermove:function(P){l(P)||n.mousemove.call(this,P)},pointerup:function(P){n.mouseup.call(this,P)},pointerout:function(P){l(P)||n.mouseout.call(this,P)}};D.each(["click","mousewheel","dblclick","contextmenu"],function(P){n[P]=function(L){L=A(this.dom,L),this.trigger(P,L)}});var h={pointermove:function(P){l(P)||h.mousemove.call(this,P)},pointerup:function(P){h.mouseup.call(this,P)},mousemove:function(P){this.trigger("mousemove",P)},mouseup:function(P){var L=this._pointerCapturing;w(this,!1),this.trigger("mouseup",P),L&&(P.zrEventControl="only_globalout",this.trigger("mouseout",P))}};function g(P,L){var E=L.domHandlers;C.pointerEventsSupported?D.each(m.pointer,function(N){y(L,N,function(I){E[N].call(P,I)})}):(C.touchEventsSupported&&D.each(m.touch,function(N){y(L,N,function(I){E[N].call(P,I),r(L)})}),D.each(m.mouse,function(N){y(L,N,function(I){I=T(I),L.touching||E[N].call(P,I)})}))}function d(P,L){C.pointerEventsSupported?D.each(o.pointer,E):C.touchEventsSupported||D.each(o.mouse,E);function E(N){function I(G){G=T(G),x(P,G.target)||(G=c(P,G),L.domHandlers[N].call(P,G))}y(L,N,I,{capture:!0})}}function y(P,L,E,N){P.mounted[L]=E,P.listenerOpts[L]=N,F(P.domTarget,u(L),E,N)}function p(P){var L=P.mounted;for(var E in L)L.hasOwnProperty(E)&&R(P.domTarget,u(E),L[E],P.listenerOpts[E]);P.mounted={}}function w(P,L){if(P._mayPointerCapture=null,v&&P._pointerCapturing^L){P._pointerCapturing=L;var E=P._globalHandlerScope;L?d(P,E):p(E)}}function S(P,L){this.domTarget=P,this.domHandlers=L,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function O(P,L){b.call(this),this.dom=P,this.painterRoot=L,this._localHandlerScope=new S(P,n),v&&(this._globalHandlerScope=new S(document,h)),this._pointerCapturing=!1,this._mayPointerCapture=null,g(this,this._localHandlerScope)}var B=O.prototype;B.dispose=function(){p(this._localHandlerScope),v&&p(this._globalHandlerScope)},B.setCursor=function(P){this.dom.style&&(this.dom.style.cursor=P||"default")},D.mixin(O,b);var k=O;X.exports=k},38096:function(X,z,e){var M=e(54904),F=M.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var R=this.__dirtyPath,A=this.shape.paths,T=0;T<A.length;T++)R=R||A[T].__dirtyPath;this.__dirtyPath=R,this.__dirty=this.__dirty||R},beforeBrush:function(){this._updatePathDirty();for(var R=this.shape.paths||[],A=this.getGlobalScale(),T=0;T<R.length;T++)R[T].path||R[T].createPathProxy(),R[T].path.setScale(A[0],A[1],R[T].segmentIgnoreThreshold)},buildPath:function(R,A){for(var T=A.paths||[],D=0;D<T.length;D++)T[D].buildPath(R,T[D].shape,!0)},afterBrush:function(){for(var R=this.shape.paths||[],A=0;A<R.length;A++)R[A].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),M.prototype.getBoundingRect.call(this)}});X.exports=F},67033:function(X,z,e){var M=e(31879),F=e(92199),R=e(54498),A=e(84423);function T(b){b=b||{},R.call(this,b);for(var C in b)b.hasOwnProperty(C)&&C!=="style"&&(this[C]=b[C]);this.style=new F(b.style,this),this._rect=null,this.__clipPaths=null}T.prototype={constructor:T,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(b){},afterBrush:function(b){},brush:function(b,C){},getBoundingRect:function(){},contain:function(b,C){return this.rectContain(b,C)},traverse:function(b,C){b.call(C,this)},rectContain:function(b,C){var f=this.transformCoordToLocal(b,C),v=this.getBoundingRect();return v.contain(f[0],f[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(b){return this.animate("style",b)},attrKV:function(b,C){b!=="style"?R.prototype.attrKV.call(this,b,C):this.style.set(C)},setStyle:function(b,C){return this.style.set(b,C),this.dirty(!1),this},useStyle:function(b){return this.style=new F(b,this),this.dirty(!1),this},calculateTextPosition:null},M.inherits(T,R),M.mixin(T,A);var D=T;X.exports=D},21260:function(X){var z=function(M){this.colorStops=M||[]};z.prototype={constructor:z,addColorStop:function(M,F){this.colorStops.push({offset:M,color:F})}};var e=z;X.exports=e},11096:function(X,z,e){var M=e(67033),F=e(95946),R=e(31879),A=e(60330);function T(b){M.call(this,b)}T.prototype={constructor:T,type:"image",brush:function(b,C){var f=this.style,v=f.image;f.bind(b,this,C);var m=this._image=A.createOrUpdateImage(v,this._image,this,this.onload);if(!(!m||!A.isImageReady(m))){var o=f.x||0,u=f.y||0,l=f.width,r=f.height,s=m.width/m.height;if(l==null&&r!=null?l=r*s:r==null&&l!=null?r=l/s:l==null&&r==null&&(l=m.width,r=m.height),this.setTransform(b),f.sWidth&&f.sHeight){var c=f.sx||0,x=f.sy||0;b.drawImage(m,c,x,f.sWidth,f.sHeight,o,u,l,r)}else if(f.sx&&f.sy){var c=f.sx,x=f.sy,a=l-c,i=r-x;b.drawImage(m,c,x,a,i,o,u,l,r)}else b.drawImage(m,o,u,l,r);f.text!=null&&(this.restoreTransform(b),this.drawRectText(b,this.getBoundingRect()))}},getBoundingRect:function(){var b=this.style;return this._rect||(this._rect=new F(b.x||0,b.y||0,b.width||0,b.height||0)),this._rect}},R.inherits(T,M);var D=T;X.exports=D},72440:function(X,z,e){var M=e(31879),F=M.inherits,R=e(67033),A=e(95946);function T(C){R.call(this,C),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}T.prototype.incremental=!0,T.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},T.prototype.addDisplayable=function(C,f){f?this._temporaryDisplayables.push(C):this._displayables.push(C),this.dirty()},T.prototype.addDisplayables=function(C,f){f=f||!1;for(var v=0;v<C.length;v++)this.addDisplayable(C[v],f)},T.prototype.eachPendingDisplayable=function(C){for(var f=this._cursor;f<this._displayables.length;f++)C&&C(this._displayables[f]);for(var f=0;f<this._temporaryDisplayables.length;f++)C&&C(this._temporaryDisplayables[f])},T.prototype.update=function(){this.updateTransform();for(var C=this._cursor;C<this._displayables.length;C++){var f=this._displayables[C];f.parent=this,f.update(),f.parent=null}for(var C=0;C<this._temporaryDisplayables.length;C++){var f=this._temporaryDisplayables[C];f.parent=this,f.update(),f.parent=null}},T.prototype.brush=function(C,f){for(var v=this._cursor;v<this._displayables.length;v++){var m=this._displayables[v];m.beforeBrush&&m.beforeBrush(C),m.brush(C,v===this._cursor?null:this._displayables[v-1]),m.afterBrush&&m.afterBrush(C)}this._cursor=v;for(var v=0;v<this._temporaryDisplayables.length;v++){var m=this._temporaryDisplayables[v];m.beforeBrush&&m.beforeBrush(C),m.brush(C,v===0?null:this._temporaryDisplayables[v-1]),m.afterBrush&&m.afterBrush(C)}this._temporaryDisplayables=[],this.notClear=!0};var D=[];T.prototype.getBoundingRect=function(){if(!this._rect){for(var C=new A(1/0,1/0,-1/0,-1/0),f=0;f<this._displayables.length;f++){var v=this._displayables[f],m=v.getBoundingRect().clone();v.needLocalTransform()&&m.applyTransform(v.getLocalTransform(D)),C.union(m)}this._rect=C}return this._rect},T.prototype.contain=function(C,f){var v=this.transformCoordToLocal(C,f),m=this.getBoundingRect();if(m.contain(v[0],v[1]))for(var o=0;o<this._displayables.length;o++){var u=this._displayables[o];if(u.contain(C,f))return!0}return!1},F(T,R);var b=T;X.exports=b},8691:function(X,z,e){var M=e(31879),F=e(21260),R=function(T,D,b,C,f,v){this.x=T??0,this.y=D??0,this.x2=b??1,this.y2=C??0,this.type="linear",this.global=v||!1,F.call(this,f)};R.prototype={constructor:R},M.inherits(R,F);var A=R;X.exports=A},54904:function(X,z,e){var M=e(67033),F=e(31879),R=e(22407),A=e(32150),T=e(8805),D=T.prototype.getCanvasPattern,b=Math.abs,C=new R(!0);function f(m){M.call(this,m),this.path=null}f.prototype={constructor:f,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(m,o){var u=this.style,l=this.path||C,r=u.hasStroke(),s=u.hasFill(),c=u.fill,x=u.stroke,a=s&&!!c.colorStops,i=r&&!!x.colorStops,n=s&&!!c.image,h=r&&!!x.image;if(u.bind(m,this,o),this.setTransform(m),this.__dirty){var g;a&&(g=g||this.getBoundingRect(),this._fillGradient=u.getGradient(m,c,g)),i&&(g=g||this.getBoundingRect(),this._strokeGradient=u.getGradient(m,x,g))}a?m.fillStyle=this._fillGradient:n&&(m.fillStyle=D.call(c,m)),i?m.strokeStyle=this._strokeGradient:h&&(m.strokeStyle=D.call(x,m));var d=u.lineDash,y=u.lineDashOffset,p=!!m.setLineDash,w=this.getGlobalScale();if(l.setScale(w[0],w[1],this.segmentIgnoreThreshold),this.__dirtyPath||d&&!p&&r?(l.beginPath(m),d&&!p&&(l.setLineDash(d),l.setLineDashOffset(y)),this.buildPath(l,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(m.beginPath(),this.path.rebuildPath(m)),s)if(u.fillOpacity!=null){var S=m.globalAlpha;m.globalAlpha=u.fillOpacity*u.opacity,l.fill(m),m.globalAlpha=S}else l.fill(m);if(d&&p&&(m.setLineDash(d),m.lineDashOffset=y),r)if(u.strokeOpacity!=null){var S=m.globalAlpha;m.globalAlpha=u.strokeOpacity*u.opacity,l.stroke(m),m.globalAlpha=S}else l.stroke(m);d&&p&&m.setLineDash([]),u.text!=null&&(this.restoreTransform(m),this.drawRectText(m,this.getBoundingRect()))},buildPath:function(m,o,u){},createPathProxy:function(){this.path=new R},getBoundingRect:function(){var m=this._rect,o=this.style,u=!m;if(u){var l=this.path;l||(l=this.path=new R),this.__dirtyPath&&(l.beginPath(),this.buildPath(l,this.shape,!1)),m=l.getBoundingRect()}if(this._rect=m,o.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=m.clone());if(this.__dirty||u){r.copy(m);var s=o.lineWidth,c=o.strokeNoScale?this.getLineScale():1;o.hasFill()||(s=Math.max(s,this.strokeContainThreshold||4)),c>1e-10&&(r.width+=s/c,r.height+=s/c,r.x-=s/c/2,r.y-=s/c/2)}return r}return m},contain:function(m,o){var u=this.transformCoordToLocal(m,o),l=this.getBoundingRect(),r=this.style;if(m=u[0],o=u[1],l.contain(m,o)){var s=this.path.data;if(r.hasStroke()){var c=r.lineWidth,x=r.strokeNoScale?this.getLineScale():1;if(x>1e-10&&(r.hasFill()||(c=Math.max(c,this.strokeContainThreshold)),A.containStroke(s,c/x,m,o)))return!0}if(r.hasFill())return A.contain(s,m,o)}return!1},dirty:function(m){m==null&&(m=!0),m&&(this.__dirtyPath=m,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(m){return this.animate("shape",m)},attrKV:function(m,o){m==="shape"?(this.setShape(o),this.__dirtyPath=!0,this._rect=null):M.prototype.attrKV.call(this,m,o)},setShape:function(m,o){var u=this.shape;if(u){if(F.isObject(m))for(var l in m)m.hasOwnProperty(l)&&(u[l]=m[l]);else u[m]=o;this.dirty(!0)}return this},getLineScale:function(){var m=this.transform;return m&&b(m[0]-1)>1e-10&&b(m[3]-1)>1e-10?Math.sqrt(b(m[0]*m[3]-m[2]*m[1])):1}},f.extend=function(m){var o=function(l){f.call(this,l),m.style&&this.style.extendFrom(m.style,!1);var r=m.shape;if(r){this.shape=this.shape||{};var s=this.shape;for(var c in r)!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&(s[c]=r[c])}m.init&&m.init.call(this,l)};F.inherits(o,f);for(var u in m)u!=="style"&&u!=="shape"&&(o.prototype[u]=m[u]);return o},F.inherits(f,M);var v=f;X.exports=v},8805:function(X){var z=function(M,F){this.image=M,this.repeat=F,this.type="pattern"};z.prototype.getCanvasPattern=function(M){return M.createPattern(this.image,this.repeat||"repeat")};var e=z;X.exports=e},7539:function(X,z,e){var M=e(31879),F=e(21260),R=function(T,D,b,C,f){this.x=T??.5,this.y=D??.5,this.r=b??.5,this.type="radial",this.global=f||!1,F.call(this,C)};R.prototype={constructor:R},M.inherits(R,F);var A=R;X.exports=A},92199:function(X,z,e){var M=e(79321),F=e(49609),R=F.ContextCachedBy,A=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],T=function(o){this.extendFrom(o,!1)};function D(o,u,l){var r=u.x==null?0:u.x,s=u.x2==null?1:u.x2,c=u.y==null?0:u.y,x=u.y2==null?0:u.y2;u.global||(r=r*l.width+l.x,s=s*l.width+l.x,c=c*l.height+l.y,x=x*l.height+l.y),r=isNaN(r)?0:r,s=isNaN(s)?1:s,c=isNaN(c)?0:c,x=isNaN(x)?0:x;var a=o.createLinearGradient(r,c,s,x);return a}function b(o,u,l){var r=l.width,s=l.height,c=Math.min(r,s),x=u.x==null?.5:u.x,a=u.y==null?.5:u.y,i=u.r==null?.5:u.r;u.global||(x=x*r+l.x,a=a*s+l.y,i=i*c);var n=o.createRadialGradient(x,a,0,x,a,i);return n}T.prototype={constructor:T,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(o,u,l){var r=this,s=l&&l.style,c=!s||o.__attrCachedBy!==R.STYLE_BIND;o.__attrCachedBy=R.STYLE_BIND;for(var x=0;x<A.length;x++){var a=A[x],i=a[0];(c||r[i]!==s[i])&&(o[i]=M(o,i,r[i]||a[1]))}if((c||r.fill!==s.fill)&&(o.fillStyle=r.fill),(c||r.stroke!==s.stroke)&&(o.strokeStyle=r.stroke),(c||r.opacity!==s.opacity)&&(o.globalAlpha=r.opacity==null?1:r.opacity),(c||r.blend!==s.blend)&&(o.globalCompositeOperation=r.blend||"source-over"),this.hasStroke()){var n=r.lineWidth;o.lineWidth=n/(this.strokeNoScale&&u&&u.getLineScale?u.getLineScale():1)}},hasFill:function(){var o=this.fill;return o!=null&&o!=="none"},hasStroke:function(){var o=this.stroke;return o!=null&&o!=="none"&&this.lineWidth>0},extendFrom:function(o,u){if(o)for(var l in o)o.hasOwnProperty(l)&&(u===!0||(u===!1?!this.hasOwnProperty(l):o[l]!=null))&&(this[l]=o[l])},set:function(o,u){typeof o=="string"?this[o]=u:this.extendFrom(o,!0)},clone:function(){var o=new this.constructor;return o.extendFrom(this,!0),o},getGradient:function(o,u,l){for(var r=u.type==="radial"?b:D,s=r(o,u,l),c=u.colorStops,x=0;x<c.length;x++)s.addColorStop(c[x].offset,c[x].color);return s}};for(var C=T.prototype,f=0;f<A.length;f++){var v=A[f];v[0]in C||(C[v[0]]=v[1])}T.getGradient=C.getGradient;var m=T;X.exports=m},35727:function(X,z,e){var M=e(67033),F=e(31879),R=e(72113),A=e(38630),T=e(49609),D=T.ContextCachedBy,b=function(f){M.call(this,f)};b.prototype={constructor:b,type:"text",brush:function(f,v){var m=this.style;this.__dirty&&A.normalizeTextStyle(m,!0),m.fill=m.stroke=m.shadowBlur=m.shadowColor=m.shadowOffsetX=m.shadowOffsetY=null;var o=m.text;if(o!=null&&(o+=""),!A.needDrawText(o,m)){f.__attrCachedBy=D.NONE;return}this.setTransform(f),A.renderText(this,f,o,m,null,v),this.restoreTransform(f)},getBoundingRect:function(){var f=this.style;if(this.__dirty&&A.normalizeTextStyle(f,!0),!this._rect){var v=f.text;v!=null?v+="":v="";var m=R.getBoundingRect(f.text+"",f.font,f.textAlign,f.textVerticalAlign,f.textPadding,f.textLineHeight,f.rich);if(m.x+=f.x||0,m.y+=f.y||0,A.getStroke(f.textStroke,f.textStrokeWidth)){var o=f.textStrokeWidth;m.x-=o/2,m.y-=o/2,m.width+=o,m.height+=o}this._rect=m}return this._rect}},F.inherits(b,M);var C=b;X.exports=C},49609:function(X,z){var e={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},M=9;z.ContextCachedBy=e,z.WILL_BE_RESTORED=M},7805:function(X,z,e){var M=e(58020),F=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];function R(A){return M.browser.ie&&M.browser.version>=11?function(){var T=this.__clipPaths,D=this.style,b;if(T)for(var C=0;C<T.length;C++){var f=T[C],v=f&&f.shape,m=f&&f.type;if(v&&(m==="sector"&&v.startAngle===v.endAngle||m==="rect"&&(!v.width||!v.height))){for(var o=0;o<F.length;o++)F[o][2]=D[F[o][0]],D[F[o][0]]=F[o][1];b=!0;break}}if(A.apply(this,arguments),b)for(var o=0;o<F.length;o++)D[F[o][0]]=F[o][2]}:A}X.exports=R},79321:function(X){var z={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};function e(M,F,R){return z.hasOwnProperty(F)?R*=M.dpr:R}X.exports=e},60330:function(X,z,e){var M=e(21311),F=new M(50);function R(b){if(typeof b=="string"){var C=F.get(b);return C&&C.image}else return b}function A(b,C,f,v,m){if(b)if(typeof b=="string"){if(C&&C.__zrImageSrc===b||!f)return C;var o=F.get(b),u={hostEl:f,cb:v,cbPayload:m};return o?(C=o.image,!D(C)&&o.pending.push(u)):(C=new Image,C.onload=C.onerror=T,F.put(b,C.__cachedImgObj={image:C,pending:[u]}),C.src=C.__zrImageSrc=b),C}else return b;else return C}function T(){var b=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var C=0;C<b.pending.length;C++){var f=b.pending[C],v=f.cb;v&&v(this,f.cbPayload),f.hostEl.dirty()}b.pending.length=0}function D(b){return b&&b.width&&b.height}z.findExistImage=R,z.createOrUpdateImage=A,z.isImageReady=D},93729:function(X,z,e){var M=e(86312),F=e(56181);function R(A,T,D){var b=T.points,C=T.smooth;if(b&&b.length>=2){if(C&&C!=="spline"){var f=F(b,C,D,T.smoothConstraint);A.moveTo(b[0][0],b[0][1]);for(var v=b.length,m=0;m<(D?v:v-1);m++){var o=f[m*2],u=f[m*2+1],l=b[(m+1)%v];A.bezierCurveTo(o[0],o[1],u[0],u[1],l[0],l[1])}}else{C==="spline"&&(b=M(b,D)),A.moveTo(b[0][0],b[0][1]);for(var m=1,r=b.length;m<r;m++)A.lineTo(b[m][0],b[m][1])}D&&A.closePath()}}z.buildPath=R},61798:function(X,z){function e(M,F){var R=F.x,A=F.y,T=F.width,D=F.height,b=F.r,C,f,v,m;T<0&&(R=R+T,T=-T),D<0&&(A=A+D,D=-D),typeof b=="number"?C=f=v=m=b:b instanceof Array?b.length===1?C=f=v=m=b[0]:b.length===2?(C=v=b[0],f=m=b[1]):b.length===3?(C=b[0],f=m=b[1],v=b[2]):(C=b[0],f=b[1],v=b[2],m=b[3]):C=f=v=m=0;var o;C+f>T&&(o=C+f,C*=T/o,f*=T/o),v+m>T&&(o=v+m,v*=T/o,m*=T/o),f+v>D&&(o=f+v,f*=D/o,v*=D/o),C+m>D&&(o=C+m,C*=D/o,m*=D/o),M.moveTo(R+C,A),M.lineTo(R+T-f,A),f!==0&&M.arc(R+T-f,A+f,f,-Math.PI/2,0),M.lineTo(R+T,A+D-v),v!==0&&M.arc(R+T-v,A+D-v,v,0,Math.PI/2),M.lineTo(R+m,A+D),m!==0&&M.arc(R+m,A+D-m,m,Math.PI/2,Math.PI),M.lineTo(R,A+C),C!==0&&M.arc(R+C,A+C,C,Math.PI,Math.PI*1.5)}z.buildPath=e},56181:function(X,z,e){var M=e(12072),F=M.min,R=M.max,A=M.scale,T=M.distance,D=M.add,b=M.clone,C=M.sub;function f(v,m,o,u){var l=[],r=[],s=[],c=[],x,a,i,n;if(u){i=[1/0,1/0],n=[-1/0,-1/0];for(var h=0,g=v.length;h<g;h++)F(i,i,v[h]),R(n,n,v[h]);F(i,i,u[0]),R(n,n,u[1])}for(var h=0,g=v.length;h<g;h++){var d=v[h];if(o)x=v[h?h-1:g-1],a=v[(h+1)%g];else if(h===0||h===g-1){l.push(b(v[h]));continue}else x=v[h-1],a=v[h+1];C(r,a,x),A(r,r,m);var y=T(d,x),p=T(d,a),w=y+p;w!==0&&(y/=w,p/=w),A(s,r,-y),A(c,r,p);var S=D([],d,s),O=D([],d,c);u&&(R(S,S,i),F(S,S,n),R(O,O,i),F(O,O,n)),l.push(S),l.push(O)}return o&&l.push(l.shift()),l}X.exports=f},86312:function(X,z,e){var M=e(12072),F=M.distance;function R(T,D,b,C,f,v,m){var o=(b-T)*.5,u=(C-D)*.5;return(2*(D-b)+o+u)*m+(-3*(D-b)-2*o-u)*v+o*f+D}function A(T,D){for(var b=T.length,C=[],f=0,v=1;v<b;v++)f+=F(T[v-1],T[v]);var m=f/2;m=m<b?b:m;for(var v=0;v<m;v++){var o=v/(m-1)*(D?b:b-1),u=Math.floor(o),l=o-u,r,s=T[u%b],c,x;D?(r=T[(u-1+b)%b],c=T[(u+1)%b],x=T[(u+2)%b]):(r=T[u===0?u:u-1],c=T[u>b-2?b-1:u+1],x=T[u>b-3?b-1:u+2]);var a=l*l,i=l*a;C.push([R(r[0],s[0],c[0],x[0],l,a,i),R(r[1],s[1],c[1],x[1],l,a,i)])}return C}X.exports=A},19602:function(X,z){var e=Math.round;function M(A,T,D){if(T){var b=T.x1,C=T.x2,f=T.y1,v=T.y2;A.x1=b,A.x2=C,A.y1=f,A.y2=v;var m=D&&D.lineWidth;m&&(e(b*2)===e(C*2)&&(A.x1=A.x2=R(b,m,!0)),e(f*2)===e(v*2)&&(A.y1=A.y2=R(f,m,!0)))}}function F(A,T,D){if(T){var b=T.x,C=T.y,f=T.width,v=T.height;A.x=b,A.y=C,A.width=f,A.height=v;var m=D&&D.lineWidth;m&&(A.x=R(b,m,!0),A.y=R(C,m,!0),A.width=Math.max(R(b+f,m,!1)-A.x,f===0?0:1),A.height=Math.max(R(C+v,m,!1)-A.y,v===0?0:1))}}function R(A,T,D){if(!T)return A;var b=e(A*2);return(b+e(T))%2===0?b/2:(b+(D?1:-1))/2}z.subPixelOptimizeLine=M,z.subPixelOptimizeRect=F,z.subPixelOptimize=R},38630:function(X,z,e){var M=e(31879),F=M.retrieve2,R=M.retrieve3,A=M.each,T=M.normalizeCssArray,D=M.isString,b=M.isObject,C=e(72113),f=e(61798),v=e(60330),m=e(79321),o=e(49609),u=o.ContextCachedBy,l=o.WILL_BE_RESTORED,r=C.DEFAULT_FONT,s={left:1,right:1,center:1},c={top:1,bottom:1,middle:1},x=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],a={},i={};function n(Z){return h(Z),A(Z.rich,h),Z}function h(Z){if(Z){Z.font=C.makeFont(Z);var U=Z.textAlign;U==="middle"&&(U="center"),Z.textAlign=U==null||s[U]?U:"left";var H=Z.textVerticalAlign||Z.textBaseline;H==="center"&&(H="middle"),Z.textVerticalAlign=H==null||c[H]?H:"top";var V=Z.textPadding;V&&(Z.textPadding=T(Z.textPadding))}}function g(Z,U,H,V,Y,$){V.rich?y(Z,U,H,V,Y,$):d(Z,U,H,V,Y,$)}function d(Z,U,H,V,Y,$){"use strict";var K=O(V),J,Q=!1,et=U.__attrCachedBy===u.PLAIN_TEXT;$!==l?($&&(J=$.style,Q=!K&&et&&J),U.__attrCachedBy=K?u.NONE:u.PLAIN_TEXT):et&&(U.__attrCachedBy=u.NONE);var nt=V.font||r;(!Q||nt!==(J.font||r))&&(U.font=nt);var st=Z.__computedFont;Z.__styleFont!==nt&&(Z.__styleFont=nt,st=Z.__computedFont=U.font);var ut=V.textPadding,rt=V.textLineHeight,ht=Z.__textCotentBlock;(!ht||Z.__dirtyText)&&(ht=Z.__textCotentBlock=C.parsePlainText(H,st,ut,rt,V.truncate));var Pt=ht.outerHeight,wt=ht.lines,At=ht.lineHeight,Nt=P(i,Z,V,Y),Lt=Nt.baseX,Rt=Nt.baseY,Tt=Nt.textAlign||"left",mt=Nt.textVerticalAlign;w(U,V,Y,Lt,Rt);var Ft=C.adjustTextY(Rt,Pt,mt),ct=Lt,vt=Ft;if(K||ut){var Dt=C.getWidth(H,st),Ct=Dt;ut&&(Ct+=ut[1]+ut[3]);var jt=C.adjustTextX(Lt,Ct,Tt);K&&B(Z,U,V,jt,Ft,Ct,Pt),ut&&(ct=G(Lt,Tt,ut),vt+=ut[0])}U.textAlign=Tt,U.textBaseline="middle",U.globalAlpha=V.opacity||1;for(var zt=0;zt<x.length;zt++){var Yt=x[zt],Zt=Yt[0],ft=Yt[1],gt=V[Zt];(!Q||gt!==J[Zt])&&(U[ft]=m(U,ft,gt||Yt[2]))}vt+=At/2;var dt=V.textStrokeWidth,lt=Q?J.textStrokeWidth:null,ot=!Q||dt!==lt,it=!Q||ot||V.textStroke!==J.textStroke,yt=E(V.textStroke,dt),Ot=N(V.textFill);if(yt&&(ot&&(U.lineWidth=dt),it&&(U.strokeStyle=yt)),Ot&&(!Q||V.textFill!==J.textFill)&&(U.fillStyle=Ot),wt.length===1)yt&&U.strokeText(wt[0],ct,vt),Ot&&U.fillText(wt[0],ct,vt);else for(var zt=0;zt<wt.length;zt++)yt&&U.strokeText(wt[zt],ct,vt),Ot&&U.fillText(wt[zt],ct,vt),vt+=At}function y(Z,U,H,V,Y,$){$!==l&&(U.__attrCachedBy=u.NONE);var K=Z.__textCotentBlock;(!K||Z.__dirtyText)&&(K=Z.__textCotentBlock=C.parseRichText(H,V)),p(Z,U,K,V,Y)}function p(Z,U,H,V,Y){var $=H.width,K=H.outerWidth,J=H.outerHeight,Q=V.textPadding,et=P(i,Z,V,Y),nt=et.baseX,st=et.baseY,ut=et.textAlign,rt=et.textVerticalAlign;w(U,V,Y,nt,st);var ht=C.adjustTextX(nt,K,ut),Pt=C.adjustTextY(st,J,rt),wt=ht,At=Pt;Q&&(wt+=Q[3],At+=Q[0]);var Nt=wt+$;O(V)&&B(Z,U,V,ht,Pt,K,J);for(var Lt=0;Lt<H.lines.length;Lt++){for(var Rt=H.lines[Lt],Tt=Rt.tokens,mt=Tt.length,Ft=Rt.lineHeight,ct=Rt.width,vt=0,Dt=wt,Ct=Nt,jt=mt-1,zt;vt<mt&&(zt=Tt[vt],!zt.textAlign||zt.textAlign==="left");)S(Z,U,zt,V,Ft,At,Dt,"left"),ct-=zt.width,Dt+=zt.width,vt++;for(;jt>=0&&(zt=Tt[jt],zt.textAlign==="right");)S(Z,U,zt,V,Ft,At,Ct,"right"),ct-=zt.width,Ct-=zt.width,jt--;for(Dt+=($-(Dt-wt)-(Nt-Ct)-ct)/2;vt<=jt;)zt=Tt[vt],S(Z,U,zt,V,Ft,At,Dt+zt.width/2,"center"),Dt+=zt.width,vt++;At+=Ft}}function w(Z,U,H,V,Y){if(H&&U.textRotation){var $=U.textOrigin;$==="center"?(V=H.width/2+H.x,Y=H.height/2+H.y):$&&(V=$[0]+H.x,Y=$[1]+H.y),Z.translate(V,Y),Z.rotate(-U.textRotation),Z.translate(-V,-Y)}}function S(Z,U,H,V,Y,$,K,J){var Q=V.rich[H.styleName]||{};Q.text=H.text;var et=H.textVerticalAlign,nt=$+Y/2;et==="top"?nt=$+H.height/2:et==="bottom"&&(nt=$+Y-H.height/2),!H.isLineHolder&&O(Q)&&B(Z,U,Q,J==="right"?K-H.width:J==="center"?K-H.width/2:K,nt-H.height/2,H.width,H.height);var st=H.textPadding;st&&(K=G(K,J,st),nt-=H.height/2-st[2]-H.textHeight/2),L(U,"shadowBlur",R(Q.textShadowBlur,V.textShadowBlur,0)),L(U,"shadowColor",Q.textShadowColor||V.textShadowColor||"transparent"),L(U,"shadowOffsetX",R(Q.textShadowOffsetX,V.textShadowOffsetX,0)),L(U,"shadowOffsetY",R(Q.textShadowOffsetY,V.textShadowOffsetY,0)),L(U,"textAlign",J),L(U,"textBaseline","middle"),L(U,"font",H.font||r);var ut=E(Q.textStroke||V.textStroke,ht),rt=N(Q.textFill||V.textFill),ht=F(Q.textStrokeWidth,V.textStrokeWidth);ut&&(L(U,"lineWidth",ht),L(U,"strokeStyle",ut),U.strokeText(H.text,K,nt)),rt&&(L(U,"fillStyle",rt),U.fillText(H.text,K,nt))}function O(Z){return!!(Z.textBackgroundColor||Z.textBorderWidth&&Z.textBorderColor)}function B(Z,U,H,V,Y,$,K){var J=H.textBackgroundColor,Q=H.textBorderWidth,et=H.textBorderColor,nt=D(J);if(L(U,"shadowBlur",H.textBoxShadowBlur||0),L(U,"shadowColor",H.textBoxShadowColor||"transparent"),L(U,"shadowOffsetX",H.textBoxShadowOffsetX||0),L(U,"shadowOffsetY",H.textBoxShadowOffsetY||0),nt||Q&&et){U.beginPath();var st=H.textBorderRadius;st?f.buildPath(U,{x:V,y:Y,width:$,height:K,r:st}):U.rect(V,Y,$,K),U.closePath()}if(nt)if(L(U,"fillStyle",J),H.fillOpacity!=null){var ut=U.globalAlpha;U.globalAlpha=H.fillOpacity*H.opacity,U.fill(),U.globalAlpha=ut}else U.fill();else if(b(J)){var rt=J.image;rt=v.createOrUpdateImage(rt,null,Z,k,J),rt&&v.isImageReady(rt)&&U.drawImage(rt,V,Y,$,K)}if(Q&&et)if(L(U,"lineWidth",Q),L(U,"strokeStyle",et),H.strokeOpacity!=null){var ut=U.globalAlpha;U.globalAlpha=H.strokeOpacity*H.opacity,U.stroke(),U.globalAlpha=ut}else U.stroke()}function k(Z,U){U.image=Z}function P(Z,U,H,V){var Y=H.x||0,$=H.y||0,K=H.textAlign,J=H.textVerticalAlign;if(V){var Q=H.textPosition;if(Q instanceof Array)Y=V.x+I(Q[0],V.width),$=V.y+I(Q[1],V.height);else{var et=U&&U.calculateTextPosition?U.calculateTextPosition(a,H,V):C.calculateTextPosition(a,H,V);Y=et.x,$=et.y,K=K||et.textAlign,J=J||et.textVerticalAlign}var nt=H.textOffset;nt&&(Y+=nt[0],$+=nt[1])}return Z=Z||{},Z.baseX=Y,Z.baseY=$,Z.textAlign=K,Z.textVerticalAlign=J,Z}function L(Z,U,H){return Z[U]=m(Z,U,H),Z[U]}function E(Z,U){return Z==null||U<=0||Z==="transparent"||Z==="none"?null:Z.image||Z.colorStops?"#000":Z}function N(Z){return Z==null||Z==="none"?null:Z.image||Z.colorStops?"#000":Z}function I(Z,U){return typeof Z=="string"?Z.lastIndexOf("%")>=0?parseFloat(Z)/100*U:parseFloat(Z):Z}function G(Z,U,H){return U==="right"?Z-H[1]:U==="center"?Z+H[3]/2-H[1]/2:Z+H[3]}function W(Z,U){return Z!=null&&(Z||U.textBackgroundColor||U.textBorderWidth&&U.textBorderColor||U.textPadding)}z.normalizeTextStyle=n,z.renderText=g,z.getBoxPosition=P,z.getStroke=E,z.getFill=N,z.parsePercent=I,z.needDrawText=W},84423:function(X,z,e){var M=e(38630),F=e(95946),R=e(49609),A=R.WILL_BE_RESTORED,T=new F,D=function(){};D.prototype={constructor:D,drawRectText:function(C,f){var v=this.style;f=v.textRect||f,this.__dirty&&M.normalizeTextStyle(v,!0);var m=v.text;if(m!=null&&(m+=""),!!M.needDrawText(m,v)){C.save();var o=this.transform;v.transformText?this.setTransform(C):o&&(T.copy(f),T.applyTransform(o),f=T),M.renderText(this,C,m,v,f,A),C.restore()}}};var b=D;X.exports=b},3775:function(X,z,e){var M=e(54904),F=M.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(R,A){var T=A.cx,D=A.cy,b=Math.max(A.r,0),C=A.startAngle,f=A.endAngle,v=A.clockwise,m=Math.cos(C),o=Math.sin(C);R.moveTo(m*b+T,o*b+D),R.arc(T,D,b,C,f,!v)}});X.exports=F},31592:function(X,z,e){var M=e(54904),F=e(12072),R=e(90723),A=R.quadraticSubdivide,T=R.cubicSubdivide,D=R.quadraticAt,b=R.cubicAt,C=R.quadraticDerivativeAt,f=R.cubicDerivativeAt,v=[];function m(u,l,r){var s=u.cpx2,c=u.cpy2;return s===null||c===null?[(r?f:b)(u.x1,u.cpx1,u.cpx2,u.x2,l),(r?f:b)(u.y1,u.cpy1,u.cpy2,u.y2,l)]:[(r?C:D)(u.x1,u.cpx1,u.x2,l),(r?C:D)(u.y1,u.cpy1,u.y2,l)]}var o=M.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(u,l){var r=l.x1,s=l.y1,c=l.x2,x=l.y2,a=l.cpx1,i=l.cpy1,n=l.cpx2,h=l.cpy2,g=l.percent;g!==0&&(u.moveTo(r,s),n==null||h==null?(g<1&&(A(r,a,c,g,v),a=v[1],c=v[2],A(s,i,x,g,v),i=v[1],x=v[2]),u.quadraticCurveTo(a,i,c,x)):(g<1&&(T(r,a,n,c,g,v),a=v[1],n=v[2],c=v[3],T(s,i,h,x,g,v),i=v[1],h=v[2],x=v[3]),u.bezierCurveTo(a,i,n,h,c,x)))},pointAt:function(u){return m(this.shape,u,!1)},tangentAt:function(u){var l=m(this.shape,u,!0);return F.normalize(l,l)}});X.exports=o},70654:function(X,z,e){var M=e(54904),F=M.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(R,A,T){T&&R.moveTo(A.cx+A.r,A.cy),R.arc(A.cx,A.cy,A.r,0,Math.PI*2,!0)}});X.exports=F},89886:function(X,z,e){var M=e(54904),F=M.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(R,A){var T=.5522848,D=A.cx,b=A.cy,C=A.rx,f=A.ry,v=C*T,m=f*T;R.moveTo(D-C,b),R.bezierCurveTo(D-C,b-m,D-v,b-f,D,b-f),R.bezierCurveTo(D+v,b-f,D+C,b-m,D+C,b),R.bezierCurveTo(D+C,b+m,D+v,b+f,D,b+f),R.bezierCurveTo(D-v,b+f,D-C,b+m,D-C,b),R.closePath()}});X.exports=F},13484:function(X,z,e){var M=e(54904),F=e(19602),R=F.subPixelOptimizeLine,A={},T=M.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(D,b){var C,f,v,m;this.subPixelOptimize?(R(A,b,this.style),C=A.x1,f=A.y1,v=A.x2,m=A.y2):(C=b.x1,f=b.y1,v=b.x2,m=b.y2);var o=b.percent;o!==0&&(D.moveTo(C,f),o<1&&(v=C*(1-o)+v*o,m=f*(1-o)+m*o),D.lineTo(v,m))},pointAt:function(D){var b=this.shape;return[b.x1*(1-D)+b.x2*D,b.y1*(1-D)+b.y2*D]}});X.exports=T},55370:function(X,z,e){var M=e(54904),F=e(93729),R=M.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(A,T){F.buildPath(A,T,!0)}});X.exports=R},62190:function(X,z,e){var M=e(54904),F=e(93729),R=M.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(A,T){F.buildPath(A,T,!1)}});X.exports=R},68518:function(X,z,e){var M=e(54904),F=e(61798),R=e(19602),A=R.subPixelOptimizeRect,T={},D=M.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(b,C){var f,v,m,o;this.subPixelOptimize?(A(T,C,this.style),f=T.x,v=T.y,m=T.width,o=T.height,T.r=C.r,C=T):(f=C.x,v=C.y,m=C.width,o=C.height),C.r?F.buildPath(b,C):b.rect(f,v,m,o),b.closePath()}});X.exports=D},19574:function(X,z,e){var M=e(54904),F=M.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(R,A){var T=A.cx,D=A.cy,b=Math.PI*2;R.moveTo(T+A.r,D),R.arc(T,D,A.r,0,b,!1),R.moveTo(T+A.r0,D),R.arc(T,D,A.r0,0,b,!0)}});X.exports=F},99315:function(X,z,e){var M=e(54904),F=e(7805),R=M.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},brush:F(M.prototype.brush),buildPath:function(A,T){var D=T.cx,b=T.cy,C=Math.max(T.r0||0,0),f=Math.max(T.r,0),v=T.startAngle,m=T.endAngle,o=T.clockwise,u=Math.cos(v),l=Math.sin(v);A.moveTo(u*C+D,l*C+b),A.lineTo(u*f+D,l*f+b),A.arc(D,b,f,v,m,!o),A.lineTo(Math.cos(m)*C+D,Math.sin(m)*C+b),C!==0&&A.arc(D,b,C,m,v,o),A.closePath()}});X.exports=R},49950:function(X,z,e){var M=e(88503),F=e(34081),R=e(31879),A=R.isString,T=R.isFunction,D=R.isObject,b=R.isArrayLike,C=R.indexOf,f=function(){this.animators=[]};f.prototype={constructor:f,animate:function(l,r){var s,c=!1,x=this,a=this.__zr;if(l){var i=l.split("."),n=x;c=i[0]==="shape";for(var h=0,g=i.length;h<g;h++)n&&(n=n[i[h]]);n&&(s=n)}else s=x;if(!s){F('Property "'+l+'" is not existed in element '+x.id);return}var d=x.animators,y=new M(s,r);return y.during(function(p){x.dirty(c)}).done(function(){d.splice(C(d,y),1)}),d.push(y),a&&a.animation.addAnimator(y),y},stopAnimation:function(l){for(var r=this.animators,s=r.length,c=0;c<s;c++)r[c].stop(l);return r.length=0,this},animateTo:function(l,r,s,c,x,a){v(this,l,r,s,c,x,a)},animateFrom:function(l,r,s,c,x,a){v(this,l,r,s,c,x,a,!0)}};function v(l,r,s,c,x,a,i,n){A(c)?(a=x,x=c,c=0):T(x)?(a=x,x="linear",c=0):T(c)?(a=c,c=0):T(s)?(a=s,s=500):s||(s=500),l.stopAnimation(),m(l,"",l,r,s,c,n);var h=l.animators.slice(),g=h.length;function d(){g--,g||a&&a()}g||a&&a();for(var y=0;y<h.length;y++)h[y].done(d).start(x,i)}function m(l,r,s,c,x,a,i){var n={},h=0;for(var g in c)c.hasOwnProperty(g)&&(s[g]!=null?D(c[g])&&!b(c[g])?m(l,r?r+"."+g:g,s[g],c[g],x,a,i):(i?(n[g]=s[g],o(l,r,g,c[g])):n[g]=c[g],h++):c[g]!=null&&!i&&o(l,r,g,c[g]));h>0&&l.animate(r,!1).when(x??500,n).delay(a||0)}function o(l,r,s,c){if(!r)l.attr(s,c);else{var x={};x[r]={},x[r][s]=c,l.attr(x)}}var u=f;X.exports=u},86281:function(X){function z(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}z.prototype={constructor:z,_dragStart:function(F){for(var R=F.target;R&&!R.draggable;)R=R.parent;R&&(this._draggingTarget=R,R.dragging=!0,this._x=F.offsetX,this._y=F.offsetY,this.dispatchToElement(e(R,F),"dragstart",F.event))},_drag:function(F){var R=this._draggingTarget;if(R){var A=F.offsetX,T=F.offsetY,D=A-this._x,b=T-this._y;this._x=A,this._y=T,R.drift(D,b,F),this.dispatchToElement(e(R,F),"drag",F.event);var C=this.findHover(A,T,R).target,f=this._dropTarget;this._dropTarget=C,R!==C&&(f&&C!==f&&this.dispatchToElement(e(f,F),"dragleave",F.event),C&&C!==f&&this.dispatchToElement(e(C,F),"dragenter",F.event))}},_dragEnd:function(F){var R=this._draggingTarget;R&&(R.dragging=!1),this.dispatchToElement(e(R,F),"dragend",F.event),this._dropTarget&&this.dispatchToElement(e(this._dropTarget,F),"drop",F.event),this._draggingTarget=null,this._dropTarget=null}};function e(F,R){return{target:F,topTarget:R&&R.topTarget}}var M=z;X.exports=M},91212:function(X){var z=Array.prototype.slice,e=function(A){this._$handlers={},this._$eventProcessor=A};e.prototype={constructor:e,one:function(A,T,D,b){return F(this,A,T,D,b,!0)},on:function(A,T,D,b){return F(this,A,T,D,b,!1)},isSilent:function(A){var T=this._$handlers;return!T[A]||!T[A].length},off:function(A,T){var D=this._$handlers;if(!A)return this._$handlers={},this;if(T){if(D[A]){for(var b=[],C=0,f=D[A].length;C<f;C++)D[A][C].h!==T&&b.push(D[A][C]);D[A]=b}D[A]&&D[A].length===0&&delete D[A]}else delete D[A];return this},trigger:function(A){var T=this._$handlers[A],D=this._$eventProcessor;if(T){var b=arguments,C=b.length;C>3&&(b=z.call(b,1));for(var f=T.length,v=0;v<f;){var m=T[v];if(D&&D.filter&&m.query!=null&&!D.filter(A,m.query)){v++;continue}switch(C){case 1:m.h.call(m.ctx);break;case 2:m.h.call(m.ctx,b[1]);break;case 3:m.h.call(m.ctx,b[1],b[2]);break;default:m.h.apply(m.ctx,b);break}m.one?(T.splice(v,1),f--):v++}}return D&&D.afterTrigger&&D.afterTrigger(A),this},triggerWithContext:function(A){var T=this._$handlers[A],D=this._$eventProcessor;if(T){var b=arguments,C=b.length;C>4&&(b=z.call(b,1,b.length-1));for(var f=b[b.length-1],v=T.length,m=0;m<v;){var o=T[m];if(D&&D.filter&&o.query!=null&&!D.filter(A,o.query)){m++;continue}switch(C){case 1:o.h.call(f);break;case 2:o.h.call(f,b[1]);break;case 3:o.h.call(f,b[1],b[2]);break;default:o.h.apply(f,b);break}o.one?(T.splice(m,1),v--):m++}}return D&&D.afterTrigger&&D.afterTrigger(A),this}};function M(A,T){var D=A._$eventProcessor;return T!=null&&D&&D.normalizeQuery&&(T=D.normalizeQuery(T)),T}function F(A,T,D,b,C,f){var v=A._$handlers;if(typeof D=="function"&&(C=b,b=D,D=null),!b||!T)return A;D=M(A,D),v[T]||(v[T]=[]);for(var m=0;m<v[T].length;m++)if(v[T][m].h===b)return A;var o={h:b,one:f,query:D,ctx:C||A,callAtLast:b.zrEventfulCallAtLast},u=v[T].length-1,l=v[T][u];return l&&l.callAtLast?v[T].splice(u,0,o):v[T].push(o),A}var R=e;X.exports=R},51218:function(X,z,e){var M=e(43970),F=e(12072),R=M.identity,A=5e-5;function T(o){return o>A||o<-A}var D=function(o){o=o||{},o.position||(this.position=[0,0]),o.rotation==null&&(this.rotation=0),o.scale||(this.scale=[1,1]),this.origin=this.origin||null},b=D.prototype;b.transform=null,b.needLocalTransform=function(){return T(this.rotation)||T(this.position[0])||T(this.position[1])||T(this.scale[0]-1)||T(this.scale[1]-1)};var C=[];b.updateTransform=function(){var o=this.parent,u=o&&o.transform,l=this.needLocalTransform(),r=this.transform;if(!(l||u)){r&&R(r);return}r=r||M.create(),l?this.getLocalTransform(r):R(r),u&&(l?M.mul(r,o.transform,r):M.copy(r,o.transform)),this.transform=r;var s=this.globalScaleRatio;if(s!=null&&s!==1){this.getGlobalScale(C);var c=C[0]<0?-1:1,x=C[1]<0?-1:1,a=((C[0]-c)*s+c)/C[0]||0,i=((C[1]-x)*s+x)/C[1]||0;r[0]*=a,r[1]*=a,r[2]*=i,r[3]*=i}this.invTransform=this.invTransform||M.create(),M.invert(this.invTransform,r)},b.getLocalTransform=function(o){return D.getLocalTransform(this,o)},b.setTransform=function(o){var u=this.transform,l=o.dpr||1;u?o.setTransform(l*u[0],l*u[1],l*u[2],l*u[3],l*u[4],l*u[5]):o.setTransform(l,0,0,l,0,0)},b.restoreTransform=function(o){var u=o.dpr||1;o.setTransform(u,0,0,u,0,0)};var f=[],v=M.create();b.setLocalTransform=function(o){if(o){var u=o[0]*o[0]+o[1]*o[1],l=o[2]*o[2]+o[3]*o[3],r=this.position,s=this.scale;T(u-1)&&(u=Math.sqrt(u)),T(l-1)&&(l=Math.sqrt(l)),o[0]<0&&(u=-u),o[3]<0&&(l=-l),r[0]=o[4],r[1]=o[5],s[0]=u,s[1]=l,this.rotation=Math.atan2(-o[1]/l,o[0]/u)}},b.decomposeTransform=function(){if(this.transform){var o=this.parent,u=this.transform;o&&o.transform&&(M.mul(f,o.invTransform,u),u=f);var l=this.origin;l&&(l[0]||l[1])&&(v[4]=l[0],v[5]=l[1],M.mul(f,u,v),f[4]-=l[0],f[5]-=l[1],u=f),this.setLocalTransform(u)}},b.getGlobalScale=function(o){var u=this.transform;return o=o||[],u?(o[0]=Math.sqrt(u[0]*u[0]+u[1]*u[1]),o[1]=Math.sqrt(u[2]*u[2]+u[3]*u[3]),u[0]<0&&(o[0]=-o[0]),u[3]<0&&(o[1]=-o[1]),o):(o[0]=1,o[1]=1,o)},b.transformCoordToLocal=function(o,u){var l=[o,u],r=this.invTransform;return r&&F.applyTransform(l,l,r),l},b.transformCoordToGlobal=function(o,u){var l=[o,u],r=this.transform;return r&&F.applyTransform(l,l,r),l},D.getLocalTransform=function(o,u){u=u||[],R(u);var l=o.origin,r=o.scale||[1,1],s=o.rotation||0,c=o.position||[0,0];return l&&(u[4]-=l[0],u[5]-=l[1]),M.scale(u,u,r),s&&M.rotate(u,u,s),l&&(u[4]+=l[0],u[5]+=l[1]),u[4]+=c[0],u[5]+=c[1],u};var m=D;X.exports=m},58744:function(X,z,e){var M=e(865),F=M.createElement,R=e(31879),A=e(34081),T=e(54904),D=e(11096),b=e(35727),C=e(14107),f=e(24438),v=e(36057),m=e(71830),o=e(72698),u=o.path,l=o.image,r=o.text;function s(w){return parseInt(w,10)}function c(w){return w instanceof T?u:w instanceof D?l:w instanceof b?r:u}function x(w,S){return S&&w&&S.parentNode!==w}function a(w,S,O){if(x(w,S)&&O){var B=O.nextSibling;B?w.insertBefore(S,B):w.appendChild(S)}}function i(w,S){if(x(w,S)){var O=w.firstChild;O?w.insertBefore(S,O):w.appendChild(S)}}function n(w,S){S&&w&&S.parentNode===w&&w.removeChild(S)}function h(w){return w.__textSvgEl}function g(w){return w.__svgEl}var d=function(w,S,O,B){this.root=w,this.storage=S,this._opts=O=R.extend({},O||{});var k=F("svg");k.setAttribute("xmlns","http://www.w3.org/2000/svg"),k.setAttribute("version","1.1"),k.setAttribute("baseProfile","full"),k.style.cssText="user-select:none;position:absolute;left:0;top:0;";var P=F("g");k.appendChild(P);var L=F("g");k.appendChild(L),this.gradientManager=new f(B,L),this.clipPathManager=new v(B,L),this.shadowManager=new m(B,L);var E=document.createElement("div");E.style.cssText="overflow:hidden;position:relative",this._svgDom=k,this._svgRoot=L,this._backgroundRoot=P,this._viewport=E,w.appendChild(E),E.appendChild(k),this.resize(O.width,O.height),this._visibleList=[]};d.prototype={constructor:d,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var w=this.getViewportRoot();if(w)return{offsetLeft:w.offsetLeft||0,offsetTop:w.offsetTop||0}},refresh:function(){var w=this.storage.getDisplayList(!0);this._paintList(w)},setBackgroundColor:function(w){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var S=F("rect");S.setAttribute("width",this.getWidth()),S.setAttribute("height",this.getHeight()),S.setAttribute("x",0),S.setAttribute("y",0),S.setAttribute("id",0),S.style.fill=w,this._backgroundRoot.appendChild(S),this._backgroundNode=S},_paintList:function(w){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var S=this._svgRoot,O=this._visibleList,B=w.length,k=[],P;for(P=0;P<B;P++){var L=w[P],E=c(L),N=g(L)||h(L);L.invisible||(L.__dirty&&(E&&E.brush(L),this.clipPathManager.update(L),L.style&&(this.gradientManager.update(L.style.fill),this.gradientManager.update(L.style.stroke),this.shadowManager.update(N,L)),L.__dirty=!1),k.push(L))}var I=C(O,k),G;for(P=0;P<I.length;P++){var W=I[P];if(W.removed)for(var Z=0;Z<W.count;Z++){var L=O[W.indices[Z]],N=g(L),U=h(L);n(S,N),n(S,U)}}for(P=0;P<I.length;P++){var W=I[P];if(W.added)for(var Z=0;Z<W.count;Z++){var L=k[W.indices[Z]],N=g(L),U=h(L);G?a(S,N,G):i(S,N),N?a(S,U,N):G?a(S,U,G):i(S,U),a(S,U,N),G=U||N||G,this.gradientManager.addWithoutUpdate(N||U,L),this.shadowManager.addWithoutUpdate(N||U,L),this.clipPathManager.markUsed(L)}else if(!W.removed)for(var Z=0;Z<W.count;Z++){var L=k[W.indices[Z]],N=g(L),U=h(L),N=g(L),U=h(L);this.gradientManager.markUsed(L),this.gradientManager.addWithoutUpdate(N||U,L),this.shadowManager.markUsed(L),this.shadowManager.addWithoutUpdate(N||U,L),this.clipPathManager.markUsed(L),U&&a(S,U,N),G=N||U||G}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=k},_getDefs:function(w){var S=this._svgDom,O=S.getElementsByTagName("defs");if(O.length===0)if(w){var O=S.insertBefore(F("defs"),S.firstChild);return O.contains||(O.contains=function(k){var P=O.children;if(!P)return!1;for(var L=P.length-1;L>=0;--L)if(P[L]===k)return!0;return!1}),O}else return null;else return O[0]},resize:function(w,S){var O=this._viewport;O.style.display="none";var B=this._opts;if(w!=null&&(B.width=w),S!=null&&(B.height=S),w=this._getSize(0),S=this._getSize(1),O.style.display="",this._width!==w||this._height!==S){this._width=w,this._height=S;var k=O.style;k.width=w+"px",k.height=S+"px";var P=this._svgDom;P.setAttribute("width",w),P.setAttribute("height",S)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",w),this._backgroundNode.setAttribute("height",S))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(w){var S=this._opts,O=["width","height"][w],B=["clientWidth","clientHeight"][w],k=["paddingLeft","paddingTop"][w],P=["paddingRight","paddingBottom"][w];if(S[O]!=null&&S[O]!=="auto")return parseFloat(S[O]);var L=this.root,E=document.defaultView.getComputedStyle(L);return(L[B]||s(E[O])||s(L.style[O]))-(s(E[k])||0)-(s(E[P])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){this.refresh();var w=encodeURIComponent(this._svgDom.outerHTML.replace(/></g,`>
\r<`));return"data:image/svg+xml;charset=UTF-8,"+w}};function y(w){return function(){A('In SVG mode painter not support method "'+w+'"')}}R.each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(w){d.prototype[w]=y(w)});var p=d;X.exports=p},865:function(X,z){var e="http://www.w3.org/2000/svg";function M(F){return document.createElementNS(e,F)}z.createElement=M},72698:function(X,z,e){var M=e(865),F=M.createElement,R=e(22407),A=e(95946),T=e(43970),D=e(72113),b=e(38630),C=e(35727),f=R.CMD,v=Array.prototype.join,m="none",o=Math.round,u=Math.sin,l=Math.cos,r=Math.PI,s=Math.PI*2,c=180/r,x=1e-4;function a(U){return o(U*1e4)/1e4}function i(U){return U<x&&U>-x}function n(U,H){var V=H?U.textFill:U.fill;return V!=null&&V!==m}function h(U,H){var V=H?U.textStroke:U.stroke;return V!=null&&V!==m}function g(U,H){H&&d(U,"transform","matrix("+v.call(H,",")+")")}function d(U,H,V){(!V||V.type!=="linear"&&V.type!=="radial")&&U.setAttribute(H,V)}function y(U,H,V){U.setAttributeNS("http://www.w3.org/1999/xlink",H,V)}function p(U,H,V,Y){if(n(H,V)){var $=V?H.textFill:H.fill;$=$==="transparent"?m:$,d(U,"fill",$),d(U,"fill-opacity",H.fillOpacity!=null?H.fillOpacity*H.opacity:H.opacity)}else d(U,"fill",m);if(h(H,V)){var K=V?H.textStroke:H.stroke;K=K==="transparent"?m:K,d(U,"stroke",K);var J=V?H.textStrokeWidth:H.lineWidth,Q=!V&&H.strokeNoScale?Y.getLineScale():1;d(U,"stroke-width",J/Q),d(U,"paint-order",V?"stroke":"fill"),d(U,"stroke-opacity",H.strokeOpacity!=null?H.strokeOpacity:H.opacity);var et=H.lineDash;et?(d(U,"stroke-dasharray",H.lineDash.join(",")),d(U,"stroke-dashoffset",o(H.lineDashOffset||0))):d(U,"stroke-dasharray",""),H.lineCap&&d(U,"stroke-linecap",H.lineCap),H.lineJoin&&d(U,"stroke-linejoin",H.lineJoin),H.miterLimit&&d(U,"stroke-miterlimit",H.miterLimit)}else d(U,"stroke",m)}function w(U){for(var H=[],V=U.data,Y=U.len(),$=0;$<Y;){var K=V[$++],J="",Q=0;switch(K){case f.M:J="M",Q=2;break;case f.L:J="L",Q=2;break;case f.Q:J="Q",Q=4;break;case f.C:J="C",Q=6;break;case f.A:var et=V[$++],nt=V[$++],st=V[$++],ut=V[$++],rt=V[$++],ht=V[$++],Pt=V[$++],wt=V[$++],At=Math.abs(ht),Nt=i(At-s)||(wt?ht>=s:-ht>=s),Lt=ht>0?ht%s:ht%s+s,Rt=!1;Nt?Rt=!0:i(At)?Rt=!1:Rt=Lt>=r==!!wt;var Tt=a(et+st*l(rt)),mt=a(nt+ut*u(rt));Nt&&(wt?ht=s-1e-4:ht=-s+1e-4,Rt=!0,$===9&&H.push("M",Tt,mt));var Ft=a(et+st*l(rt+ht)),ct=a(nt+ut*u(rt+ht));H.push("A",a(st),a(ut),o(Pt*c),+Rt,+wt,Ft,ct);break;case f.Z:J="Z";break;case f.R:var Ft=a(V[$++]),ct=a(V[$++]),vt=a(V[$++]),Dt=a(V[$++]);H.push("M",Ft,ct,"L",Ft+vt,ct,"L",Ft+vt,ct+Dt,"L",Ft,ct+Dt,"L",Ft,ct);break}J&&H.push(J);for(var Ct=0;Ct<Q;Ct++)H.push(a(V[$++]))}return H.join(" ")}var S={};S.brush=function(U){var H=U.style,V=U.__svgEl;V||(V=F("path"),U.__svgEl=V),U.path||U.createPathProxy();var Y=U.path;if(U.__dirtyPath){Y.beginPath(),Y.subPixelOptimize=!1,U.buildPath(Y,U.shape),U.__dirtyPath=!1;var $=w(Y);$.indexOf("NaN")<0&&d(V,"d",$)}p(V,H,!1,U),g(V,U.transform),H.text!=null?N(U,U.getBoundingRect()):Z(U)};var O={};O.brush=function(U){var H=U.style,V=H.image;if(V instanceof HTMLImageElement){var Y=V.src;V=Y}if(V){var $=H.x||0,K=H.y||0,J=H.width,Q=H.height,et=U.__svgEl;et||(et=F("image"),U.__svgEl=et),V!==U.__imageSrc&&(y(et,"href",V),U.__imageSrc=V),d(et,"width",J),d(et,"height",Q),d(et,"x",$),d(et,"y",K),g(et,U.transform),H.text!=null?N(U,U.getBoundingRect()):Z(U)}};var B={},k=new A,P={},L=[],E={left:"start",right:"end",center:"middle",middle:"middle"},N=function(U,H){var V=U.style,Y=U.transform,$=U instanceof C||V.transformText;U.__dirty&&b.normalizeTextStyle(V,!0);var K=V.text;if(K!=null&&(K+=""),!!b.needDrawText(K,V)){K==null&&(K=""),!$&&Y&&(k.copy(H),k.applyTransform(Y),H=k);var J=U.__textSvgEl;J||(J=F("text"),U.__textSvgEl=J);var Q=J.style,et=V.font||D.DEFAULT_FONT,nt=J.__computedFont;et!==J.__styleFont&&(Q.font=J.__styleFont=et,nt=J.__computedFont=Q.font);var st=V.textPadding,ut=V.textLineHeight,rt=U.__textCotentBlock;(!rt||U.__dirtyText)&&(rt=U.__textCotentBlock=D.parsePlainText(K,nt,st,ut,V.truncate));var ht=rt.outerHeight,Pt=rt.lineHeight;b.getBoxPosition(P,U,V,H);var wt=P.baseX,At=P.baseY,Nt=P.textAlign||"left",Lt=P.textVerticalAlign;I(J,$,Y,V,H,wt,At);var Rt=D.adjustTextY(At,ht,Lt),Tt=wt,mt=Rt;st&&(Tt=G(wt,Nt,st),mt+=st[0]),mt+=Pt/2,p(J,V,!0,U);var Ft=rt.canCacheByTextString,ct=U.__tspanList||(U.__tspanList=[]),vt=ct.length;if(Ft&&U.__canCacheByTextString&&U.__text===K){if(U.__dirtyText&&vt)for(var Dt=0;Dt<vt;++Dt)W(ct[Dt],Nt,Tt,mt+Dt*Pt)}else{U.__text=K,U.__canCacheByTextString=Ft;for(var Ct=rt.lines,jt=Ct.length,Dt=0;Dt<jt;Dt++){var zt=ct[Dt],Yt=Ct[Dt];zt?zt.__zrText!==Yt&&(zt.innerHTML="",zt.appendChild(document.createTextNode(Yt))):(zt=ct[Dt]=F("tspan"),J.appendChild(zt),zt.appendChild(document.createTextNode(Yt))),W(zt,Nt,Tt,mt+Dt*Pt)}if(vt>jt){for(;Dt<vt;Dt++)J.removeChild(ct[Dt]);ct.length=jt}}}};function I(U,H,V,Y,$,K,J){T.identity(L),H&&V&&T.copy(L,V);var Q=Y.textRotation;if($&&Q){var et=Y.textOrigin;et==="center"?(K=$.width/2+$.x,J=$.height/2+$.y):et&&(K=et[0]+$.x,J=et[1]+$.y),L[4]-=K,L[5]-=J,T.rotate(L,L,Q),L[4]+=K,L[5]+=J}g(U,L)}function G(U,H,V){return H==="right"?U-V[1]:H==="center"?U+V[3]/2-V[1]/2:U+V[3]}function W(U,H,V,Y){d(U,"dominant-baseline","middle"),d(U,"text-anchor",E[H]),d(U,"x",V),d(U,"y",Y)}function Z(U){U&&U.__textSvgEl&&(U.__textSvgEl.parentNode&&U.__textSvgEl.parentNode.removeChild(U.__textSvgEl),U.__textSvgEl=null,U.__tspanList=[],U.__text=null)}B.drawRectText=N,B.brush=function(U){var H=U.style;H.text!=null?N(U,!1):Z(U)},z.path=S,z.image=O,z.text=B},36057:function(X,z,e){var M=e(24035),F=e(31879),R=e(43970);function A(D,b){M.call(this,D,b,"clipPath","__clippath_in_use__")}F.inherits(A,M),A.prototype.update=function(D){var b=this.getSvgElement(D);b&&this.updateDom(b,D.__clipPaths,!1);var C=this.getTextSvgElement(D);C&&this.updateDom(C,D.__clipPaths,!0),this.markUsed(D)},A.prototype.updateDom=function(D,b,C){if(b&&b.length>0){var f=this.getDefs(!0),v=b[0],m,o,u=C?"_textDom":"_dom";v[u]?(o=v[u].getAttribute("id"),m=v[u],f.contains(m)||f.appendChild(m)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,m=this.createElement("clipPath"),m.setAttribute("id",o),f.appendChild(m),v[u]=m);var l=this.getSvgProxy(v);if(v.transform&&v.parent.invTransform&&!C){var r=Array.prototype.slice.call(v.transform);R.mul(v.transform,v.parent.invTransform,v.transform),l.brush(v),v.transform=r}else l.brush(v);var s=this.getSvgElement(v);m.innerHTML="",m.appendChild(s.cloneNode()),D.setAttribute("clip-path","url(#"+o+")"),b.length>1&&this.updateDom(m,b.slice(1),C)}else D&&D.setAttribute("clip-path","none")},A.prototype.markUsed=function(D){var b=this;D.__clipPaths&&F.each(D.__clipPaths,function(C){C._dom&&M.prototype.markUsed.call(b,C._dom),C._textDom&&M.prototype.markUsed.call(b,C._textDom)})};var T=A;X.exports=T},24035:function(X,z,e){var M=e(865),F=M.createElement,R=e(31879),A=e(54904),T=e(11096),D=e(35727),b=e(72698),C=b.path,f=b.image,v=b.text,m="0",o="1";function u(r,s,c,x,a){this._zrId=r,this._svgRoot=s,this._tagNames=typeof c=="string"?[c]:c,this._markLabel=x,this._domName=a||"_dom",this.nextId=0}u.prototype.createElement=F,u.prototype.getDefs=function(r){var s=this._svgRoot,c=this._svgRoot.getElementsByTagName("defs");return c.length===0?r?(c=s.insertBefore(this.createElement("defs"),s.firstChild),c.contains||(c.contains=function(x){var a=c.children;if(!a)return!1;for(var i=a.length-1;i>=0;--i)if(a[i]===x)return!0;return!1}),c):null:c[0]},u.prototype.update=function(r,s){if(r){var c=this.getDefs(!1);if(r[this._domName]&&c.contains(r[this._domName]))typeof s=="function"&&s(r);else{var x=this.add(r);x&&(r[this._domName]=x)}}},u.prototype.addDom=function(r){var s=this.getDefs(!0);s.appendChild(r)},u.prototype.removeDom=function(r){var s=this.getDefs(!1);s&&r[this._domName]&&(s.removeChild(r[this._domName]),r[this._domName]=null)},u.prototype.getDoms=function(){var r=this.getDefs(!1);if(!r)return[];var s=[];return R.each(this._tagNames,function(c){var x=r.getElementsByTagName(c);s=s.concat([].slice.call(x))}),s},u.prototype.markAllUnused=function(){var r=this.getDoms(),s=this;R.each(r,function(c){c[s._markLabel]=m})},u.prototype.markUsed=function(r){r&&(r[this._markLabel]=o)},u.prototype.removeUnused=function(){var r=this.getDefs(!1);if(r){var s=this.getDoms(),c=this;R.each(s,function(x){x[c._markLabel]!==o&&r.removeChild(x)})}},u.prototype.getSvgProxy=function(r){return r instanceof A?C:r instanceof T?f:r instanceof D?v:C},u.prototype.getTextSvgElement=function(r){return r.__textSvgEl},u.prototype.getSvgElement=function(r){return r.__svgEl};var l=u;X.exports=l},24438:function(X,z,e){var M=e(24035),F=e(31879),R=e(34081),A=e(94819);function T(b,C){M.call(this,b,C,["linearGradient","radialGradient"],"__gradient_in_use__")}F.inherits(T,M),T.prototype.addWithoutUpdate=function(b,C){if(C&&C.style){var f=this;F.each(["fill","stroke"],function(v){if(C.style[v]&&(C.style[v].type==="linear"||C.style[v].type==="radial")){var m=C.style[v],o=f.getDefs(!0),u;m._dom?(u=m._dom,o.contains(m._dom)||f.addDom(u)):u=f.add(m),f.markUsed(C);var l=u.getAttribute("id");b.setAttribute(v,"url(#"+l+")")}})}},T.prototype.add=function(b){var C;if(b.type==="linear")C=this.createElement("linearGradient");else if(b.type==="radial")C=this.createElement("radialGradient");else return R("Illegal gradient type."),null;return b.id=b.id||this.nextId++,C.setAttribute("id","zr"+this._zrId+"-gradient-"+b.id),this.updateDom(b,C),this.addDom(C),C},T.prototype.update=function(b){var C=this;M.prototype.update.call(this,b,function(){var f=b.type,v=b._dom.tagName;f==="linear"&&v==="linearGradient"||f==="radial"&&v==="radialGradient"?C.updateDom(b,b._dom):(C.removeDom(b),C.add(b))})},T.prototype.updateDom=function(b,C){if(b.type==="linear")C.setAttribute("x1",b.x),C.setAttribute("y1",b.y),C.setAttribute("x2",b.x2),C.setAttribute("y2",b.y2);else if(b.type==="radial")C.setAttribute("cx",b.x),C.setAttribute("cy",b.y),C.setAttribute("r",b.r);else{R("Illegal gradient type.");return}b.global?C.setAttribute("gradientUnits","userSpaceOnUse"):C.setAttribute("gradientUnits","objectBoundingBox"),C.innerHTML="";for(var f=b.colorStops,v=0,m=f.length;v<m;++v){var o=this.createElement("stop");o.setAttribute("offset",f[v].offset*100+"%");var u=f[v].color;if(u.indexOf("rgba")>-1){var l=A.parse(u)[3],r=A.toHex(u);o.setAttribute("stop-color","#"+r),o.setAttribute("stop-opacity",l)}else o.setAttribute("stop-color",f[v].color);C.appendChild(o)}b._dom=C},T.prototype.markUsed=function(b){if(b.style){var C=b.style.fill;C&&C._dom&&M.prototype.markUsed.call(this,C._dom),C=b.style.stroke,C&&C._dom&&M.prototype.markUsed.call(this,C._dom)}};var D=T;X.exports=D},71830:function(X,z,e){var M=e(24035),F=e(31879);function R(D,b){M.call(this,D,b,["filter"],"__filter_in_use__","_shadowDom")}F.inherits(R,M),R.prototype.addWithoutUpdate=function(D,b){if(b&&A(b.style)){var C;if(b._shadowDom){C=b._shadowDom;var f=this.getDefs(!0);f.contains(b._shadowDom)||this.addDom(C)}else C=this.add(b);this.markUsed(b);var v=C.getAttribute("id");D.style.filter="url(#"+v+")"}},R.prototype.add=function(D){var b=this.createElement("filter");return D._shadowDomId=D._shadowDomId||this.nextId++,b.setAttribute("id","zr"+this._zrId+"-shadow-"+D._shadowDomId),this.updateDom(D,b),this.addDom(b),b},R.prototype.update=function(D,b){var C=b.style;if(A(C)){var f=this;M.prototype.update.call(this,b,function(){f.updateDom(b,b._shadowDom)})}else this.remove(D,b)},R.prototype.remove=function(D,b){b._shadowDomId!=null&&(this.removeDom(D),D.style.filter="")},R.prototype.updateDom=function(D,b){var C=b.getElementsByTagName("feDropShadow");C.length===0?C=this.createElement("feDropShadow"):C=C[0];var f=D.style,v=D.scale&&D.scale[0]||1,m=D.scale&&D.scale[1]||1,o,u,l,r;if(f.shadowBlur||f.shadowOffsetX||f.shadowOffsetY)o=f.shadowOffsetX||0,u=f.shadowOffsetY||0,l=f.shadowBlur,r=f.shadowColor;else if(f.textShadowBlur)o=f.textShadowOffsetX||0,u=f.textShadowOffsetY||0,l=f.textShadowBlur,r=f.textShadowColor;else{this.removeDom(b,f);return}C.setAttribute("dx",o/v),C.setAttribute("dy",u/m),C.setAttribute("flood-color",r);var s=l/2/v,c=l/2/m,x=s+" "+c;C.setAttribute("stdDeviation",x),b.setAttribute("x","-100%"),b.setAttribute("y","-100%"),b.setAttribute("width",Math.ceil(l/2*200)+"%"),b.setAttribute("height",Math.ceil(l/2*200)+"%"),b.appendChild(C),D._shadowDom=b},R.prototype.markUsed=function(D){D._shadowDom&&M.prototype.markUsed.call(this,D._shadowDom)};function A(D){return D&&(D.shadowBlur||D.shadowOffsetX||D.shadowOffsetY||D.textShadowBlur||D.textShadowOffsetX||D.textShadowOffsetY)}var T=R;X.exports=T},30690:function(X,z,e){e(72698);var M=e(23593),F=M.registerPainter,R=e(58744);F("svg",R)},94819:function(X,z,e){var M=e(21311),F={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function R(w){return w=Math.round(w),w<0?0:w>255?255:w}function A(w){return w=Math.round(w),w<0?0:w>360?360:w}function T(w){return w<0?0:w>1?1:w}function D(w){return w.length&&w.charAt(w.length-1)==="%"?R(parseFloat(w)/100*255):R(parseInt(w,10))}function b(w){return w.length&&w.charAt(w.length-1)==="%"?T(parseFloat(w)/100):T(parseFloat(w))}function C(w,S,O){return O<0?O+=1:O>1&&(O-=1),O*6<1?w+(S-w)*O*6:O*2<1?S:O*3<2?w+(S-w)*(2/3-O)*6:w}function f(w,S,O){return w+(S-w)*O}function v(w,S,O,B,k){return w[0]=S,w[1]=O,w[2]=B,w[3]=k,w}function m(w,S){return w[0]=S[0],w[1]=S[1],w[2]=S[2],w[3]=S[3],w}var o=new M(20),u=null;function l(w,S){u&&m(u,S),u=o.put(w,u||S.slice())}function r(w,S){if(w){S=S||[];var O=o.get(w);if(O)return m(S,O);w=w+"";var B=w.replace(/ /g,"").toLowerCase();if(B in F)return m(S,F[B]),l(w,S),S;if(B.charAt(0)==="#"){if(B.length===4){var k=parseInt(B.substr(1),16);if(!(k>=0&&k<=4095)){v(S,0,0,0,1);return}return v(S,(k&3840)>>4|(k&3840)>>8,k&240|(k&240)>>4,k&15|(k&15)<<4,1),l(w,S),S}else if(B.length===7){var k=parseInt(B.substr(1),16);if(!(k>=0&&k<=16777215)){v(S,0,0,0,1);return}return v(S,(k&16711680)>>16,(k&65280)>>8,k&255,1),l(w,S),S}return}var P=B.indexOf("("),L=B.indexOf(")");if(P!==-1&&L+1===B.length){var E=B.substr(0,P),N=B.substr(P+1,L-(P+1)).split(","),I=1;switch(E){case"rgba":if(N.length!==4){v(S,0,0,0,1);return}I=b(N.pop());case"rgb":if(N.length!==3){v(S,0,0,0,1);return}return v(S,D(N[0]),D(N[1]),D(N[2]),I),l(w,S),S;case"hsla":if(N.length!==4){v(S,0,0,0,1);return}return N[3]=b(N[3]),s(N,S),l(w,S),S;case"hsl":if(N.length!==3){v(S,0,0,0,1);return}return s(N,S),l(w,S),S;default:return}}v(S,0,0,0,1)}}function s(w,S){var O=(parseFloat(w[0])%360+360)%360/360,B=b(w[1]),k=b(w[2]),P=k<=.5?k*(B+1):k+B-k*B,L=k*2-P;return S=S||[],v(S,R(C(L,P,O+1/3)*255),R(C(L,P,O)*255),R(C(L,P,O-1/3)*255),1),w.length===4&&(S[3]=w[3]),S}function c(w){if(w){var S=w[0]/255,O=w[1]/255,B=w[2]/255,k=Math.min(S,O,B),P=Math.max(S,O,B),L=P-k,E=(P+k)/2,N,I;if(L===0)N=0,I=0;else{E<.5?I=L/(P+k):I=L/(2-P-k);var G=((P-S)/6+L/2)/L,W=((P-O)/6+L/2)/L,Z=((P-B)/6+L/2)/L;S===P?N=Z-W:O===P?N=1/3+G-Z:B===P&&(N=2/3+W-G),N<0&&(N+=1),N>1&&(N-=1)}var U=[N*360,I,E];return w[3]!=null&&U.push(w[3]),U}}function x(w,S){var O=r(w);if(O){for(var B=0;B<3;B++)S<0?O[B]=O[B]*(1-S)|0:O[B]=(255-O[B])*S+O[B]|0,O[B]>255?O[B]=255:w[B]<0&&(O[B]=0);return p(O,O.length===4?"rgba":"rgb")}}function a(w){var S=r(w);if(S)return((1<<24)+(S[0]<<16)+(S[1]<<8)+ +S[2]).toString(16).slice(1)}function i(w,S,O){if(!(!(S&&S.length)||!(w>=0&&w<=1))){O=O||[];var B=w*(S.length-1),k=Math.floor(B),P=Math.ceil(B),L=S[k],E=S[P],N=B-k;return O[0]=R(f(L[0],E[0],N)),O[1]=R(f(L[1],E[1],N)),O[2]=R(f(L[2],E[2],N)),O[3]=T(f(L[3],E[3],N)),O}}var n=i;function h(w,S,O){if(!(!(S&&S.length)||!(w>=0&&w<=1))){var B=w*(S.length-1),k=Math.floor(B),P=Math.ceil(B),L=r(S[k]),E=r(S[P]),N=B-k,I=p([R(f(L[0],E[0],N)),R(f(L[1],E[1],N)),R(f(L[2],E[2],N)),T(f(L[3],E[3],N))],"rgba");return O?{color:I,leftIndex:k,rightIndex:P,value:B}:I}}var g=h;function d(w,S,O,B){if(w=r(w),w)return w=c(w),S!=null&&(w[0]=A(S)),O!=null&&(w[1]=b(O)),B!=null&&(w[2]=b(B)),p(s(w),"rgba")}function y(w,S){if(w=r(w),w&&S!=null)return w[3]=T(S),p(w,"rgba")}function p(w,S){if(!(!w||!w.length)){var O=w[0]+","+w[1]+","+w[2];return(S==="rgba"||S==="hsva"||S==="hsla")&&(O+=","+w[3]),S+"("+O+")"}}z.parse=r,z.lift=x,z.toHex=a,z.fastLerp=i,z.fastMapToColor=n,z.lerp=h,z.mapToColor=g,z.modifyHSL=d,z.modifyAlpha=y,z.stringify=p},1595:function(X,z,e){var M=e(49500),F=e(27146),R=e(11096),A=e(35727),T=e(70654),D=e(68518),b=e(89886),C=e(13484),f=e(54904),v=e(55370),m=e(62190),o=e(8691),u=e(92199),l=e(43970),r=e(23036),s=r.createFromString,c=e(31879),x=c.isString,a=c.extend,i=c.defaults,n=c.trim,h=c.each,g=/[\s,]+/;function d(H){if(x(H)){var V=new DOMParser;H=V.parseFromString(H,"text/xml")}for(H.nodeType===9&&(H=H.firstChild);H.nodeName.toLowerCase()!=="svg"||H.nodeType!==1;)H=H.nextSibling;return H}function y(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}y.prototype.parse=function(H,V){V=V||{};var Y=d(H);if(!Y)throw new Error("Illegal svg");var $=new F;this._root=$;var K=Y.getAttribute("viewBox")||"",J=parseFloat(Y.getAttribute("width")||V.width),Q=parseFloat(Y.getAttribute("height")||V.height);isNaN(J)&&(J=null),isNaN(Q)&&(Q=null),P(Y,$,null,!0);for(var et=Y.firstChild;et;)this._parseNode(et,$),et=et.nextSibling;var nt,st;if(K){var ut=n(K).split(g);ut.length>=4&&(nt={x:parseFloat(ut[0]||0),y:parseFloat(ut[1]||0),width:parseFloat(ut[2]),height:parseFloat(ut[3])})}if(nt&&J!=null&&Q!=null&&(st=Z(nt,J,Q),!V.ignoreViewBox)){var rt=$;$=new F,$.add(rt),rt.scale=st.scale.slice(),rt.position=st.position.slice()}return!V.ignoreRootClip&&J!=null&&Q!=null&&$.setClipPath(new D({shape:{x:0,y:0,width:J,height:Q}})),{root:$,width:J,height:Q,viewBoxRect:nt,viewBoxTransform:st}},y.prototype._parseNode=function(H,V){var Y=H.nodeName.toLowerCase();Y==="defs"?this._isDefine=!0:Y==="text"&&(this._isText=!0);var $;if(this._isDefine){var K=w[Y];if(K){var J=K.call(this,H),Q=H.getAttribute("id");Q&&(this._defs[Q]=J)}}else{var K=p[Y];K&&($=K.call(this,H,V),V.add($))}for(var et=H.firstChild;et;)et.nodeType===1&&this._parseNode(et,$),et.nodeType===3&&this._isText&&this._parseText(et,$),et=et.nextSibling;Y==="defs"?this._isDefine=!1:Y==="text"&&(this._isText=!1)},y.prototype._parseText=function(H,V){if(H.nodeType===1){var Y=H.getAttribute("dx")||0,$=H.getAttribute("dy")||0;this._textX+=parseFloat(Y),this._textY+=parseFloat($)}var K=new A({style:{text:H.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});O(V,K),P(H,K,this._defs);var J=K.style.fontSize;J&&J<9&&(K.style.fontSize=9,K.scale=K.scale||[1,1],K.scale[0]*=J/9,K.scale[1]*=J/9);var Q=K.getBoundingRect();return this._textX+=Q.width,V.add(K),K};var p={g:function(H,V){var Y=new F;return O(V,Y),P(H,Y,this._defs),Y},rect:function(H,V){var Y=new D;return O(V,Y),P(H,Y,this._defs),Y.setShape({x:parseFloat(H.getAttribute("x")||0),y:parseFloat(H.getAttribute("y")||0),width:parseFloat(H.getAttribute("width")||0),height:parseFloat(H.getAttribute("height")||0)}),Y},circle:function(H,V){var Y=new T;return O(V,Y),P(H,Y,this._defs),Y.setShape({cx:parseFloat(H.getAttribute("cx")||0),cy:parseFloat(H.getAttribute("cy")||0),r:parseFloat(H.getAttribute("r")||0)}),Y},line:function(H,V){var Y=new C;return O(V,Y),P(H,Y,this._defs),Y.setShape({x1:parseFloat(H.getAttribute("x1")||0),y1:parseFloat(H.getAttribute("y1")||0),x2:parseFloat(H.getAttribute("x2")||0),y2:parseFloat(H.getAttribute("y2")||0)}),Y},ellipse:function(H,V){var Y=new b;return O(V,Y),P(H,Y,this._defs),Y.setShape({cx:parseFloat(H.getAttribute("cx")||0),cy:parseFloat(H.getAttribute("cy")||0),rx:parseFloat(H.getAttribute("rx")||0),ry:parseFloat(H.getAttribute("ry")||0)}),Y},polygon:function(H,V){var Y=H.getAttribute("points");Y&&(Y=B(Y));var $=new v({shape:{points:Y||[]}});return O(V,$),P(H,$,this._defs),$},polyline:function(H,V){var Y=new f;O(V,Y),P(H,Y,this._defs);var $=H.getAttribute("points");$&&($=B($));var K=new m({shape:{points:$||[]}});return K},image:function(H,V){var Y=new R;return O(V,Y),P(H,Y,this._defs),Y.setStyle({image:H.getAttribute("xlink:href"),x:H.getAttribute("x"),y:H.getAttribute("y"),width:H.getAttribute("width"),height:H.getAttribute("height")}),Y},text:function(H,V){var Y=H.getAttribute("x")||0,$=H.getAttribute("y")||0,K=H.getAttribute("dx")||0,J=H.getAttribute("dy")||0;this._textX=parseFloat(Y)+parseFloat(K),this._textY=parseFloat($)+parseFloat(J);var Q=new F;return O(V,Q),P(H,Q,this._defs),Q},tspan:function(H,V){var Y=H.getAttribute("x"),$=H.getAttribute("y");Y!=null&&(this._textX=parseFloat(Y)),$!=null&&(this._textY=parseFloat($));var K=H.getAttribute("dx")||0,J=H.getAttribute("dy")||0,Q=new F;return O(V,Q),P(H,Q,this._defs),this._textX+=K,this._textY+=J,Q},path:function(H,V){var Y=H.getAttribute("d")||"",$=s(Y);return O(V,$),P(H,$,this._defs),$}},w={lineargradient:function(H){var V=parseInt(H.getAttribute("x1")||0,10),Y=parseInt(H.getAttribute("y1")||0,10),$=parseInt(H.getAttribute("x2")||10,10),K=parseInt(H.getAttribute("y2")||0,10),J=new o(V,Y,$,K);return S(H,J),J},radialgradient:function(H){}};function S(H,V){for(var Y=H.firstChild;Y;){if(Y.nodeType===1){var $=Y.getAttribute("offset");$.indexOf("%")>0?$=parseInt($,10)/100:$?$=parseFloat($):$=0;var K=Y.getAttribute("stop-color")||"#000000";V.addColorStop($,K)}Y=Y.nextSibling}}function O(H,V){H&&H.__inheritedStyle&&(V.__inheritedStyle||(V.__inheritedStyle={}),i(V.__inheritedStyle,H.__inheritedStyle))}function B(H){for(var V=n(H).split(g),Y=[],$=0;$<V.length;$+=2){var K=parseFloat(V[$]),J=parseFloat(V[$+1]);Y.push([K,J])}return Y}var k={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function P(H,V,Y,$){var K=V.__inheritedStyle||{},J=V.type==="text";if(H.nodeType===1&&(I(H,V),a(K,W(H)),!$)){for(var Q in k)if(k.hasOwnProperty(Q)){var et=H.getAttribute(Q);et!=null&&(K[k[Q]]=et)}}var nt=J?"textFill":"fill",st=J?"textStroke":"stroke";V.style=V.style||new u;var ut=V.style;K.fill!=null&&ut.set(nt,E(K.fill,Y)),K.stroke!=null&&ut.set(st,E(K.stroke,Y)),h(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(rt){var ht=rt==="lineWidth"&&J?"textStrokeWidth":rt;K[rt]!=null&&ut.set(ht,parseFloat(K[rt]))}),(!K.textBaseline||K.textBaseline==="auto")&&(K.textBaseline="alphabetic"),K.textBaseline==="alphabetic"&&(K.textBaseline="bottom"),K.textAlign==="start"&&(K.textAlign="left"),K.textAlign==="end"&&(K.textAlign="right"),h(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(rt){K[rt]!=null&&ut.set(rt,K[rt])}),K.lineDash&&(V.style.lineDash=n(K.lineDash).split(g)),ut[st]&&ut[st]!=="none"&&(V[st]=!0),V.__inheritedStyle=K}var L=/url\(\s*#(.*?)\)/;function E(H,V){var Y=V&&H&&H.match(L);if(Y){var $=n(Y[1]),K=V[$];return K}return H}var N=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;function I(H,V){var Y=H.getAttribute("transform");if(Y){Y=Y.replace(/,/g," ");var $=null,K=[];Y.replace(N,function(nt,st,ut){K.push(st,ut)});for(var J=K.length-1;J>0;J-=2){var Q=K[J],et=K[J-1];switch($=$||l.create(),et){case"translate":Q=n(Q).split(g),l.translate($,$,[parseFloat(Q[0]),parseFloat(Q[1]||0)]);break;case"scale":Q=n(Q).split(g),l.scale($,$,[parseFloat(Q[0]),parseFloat(Q[1]||Q[0])]);break;case"rotate":Q=n(Q).split(g),l.rotate($,$,parseFloat(Q[0]));break;case"skew":Q=n(Q).split(g),M.warn("Skew transform is not supported yet");break;case"matrix":var Q=n(Q).split(g);$[0]=parseFloat(Q[0]),$[1]=parseFloat(Q[1]),$[2]=parseFloat(Q[2]),$[3]=parseFloat(Q[3]),$[4]=parseFloat(Q[4]),$[5]=parseFloat(Q[5]);break}}V.setLocalTransform($)}}var G=/([^\s:;]+)\s*:\s*([^:;]+)/g;function W(H){var V=H.getAttribute("style"),Y={};if(!V)return Y;var $={};G.lastIndex=0;for(var K;(K=G.exec(V))!=null;)$[K[1]]=K[2];for(var J in k)k.hasOwnProperty(J)&&$[J]!=null&&(Y[k[J]]=$[J]);return Y}function Z(H,V,Y){var $=V/H.width,K=Y/H.height,J=Math.min($,K),Q=[J,J],et=[-(H.x+H.width/2)*J+V/2,-(H.y+H.height/2)*J+Y/2];return{scale:Q,position:et}}function U(H,V){var Y=new y;return Y.parse(H,V)}z.parseXML=d,z.makeViewBoxTransform=Z,z.parseSVG=U},23036:function(X,z,e){var M=e(54904),F=e(22407),R=e(64239),A=Math.sqrt,T=Math.sin,D=Math.cos,b=Math.PI,C=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},f=function(a,i){return(a[0]*i[0]+a[1]*i[1])/(C(a)*C(i))},v=function(a,i){return(a[0]*i[1]<a[1]*i[0]?-1:1)*Math.acos(f(a,i))};function m(a,i,n,h,g,d,y,p,w,S,O){var B=w*(b/180),k=D(B)*(a-n)/2+T(B)*(i-h)/2,P=-1*T(B)*(a-n)/2+D(B)*(i-h)/2,L=k*k/(y*y)+P*P/(p*p);L>1&&(y*=A(L),p*=A(L));var E=(g===d?-1:1)*A((y*y*(p*p)-y*y*(P*P)-p*p*(k*k))/(y*y*(P*P)+p*p*(k*k)))||0,N=E*y*P/p,I=E*-p*k/y,G=(a+n)/2+D(B)*N-T(B)*I,W=(i+h)/2+T(B)*N+D(B)*I,Z=v([1,0],[(k-N)/y,(P-I)/p]),U=[(k-N)/y,(P-I)/p],H=[(-1*k-N)/y,(-1*P-I)/p],V=v(U,H);f(U,H)<=-1&&(V=b),f(U,H)>=1&&(V=0),d===0&&V>0&&(V=V-2*b),d===1&&V<0&&(V=V+2*b),O.addData(S,G,W,y,p,Z,V,B,d)}var o=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,u=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function l(a){if(!a)return new F;for(var i=0,n=0,h=i,g=n,d,y=new F,p=F.CMD,w=a.match(o),S=0;S<w.length;S++){for(var O=w[S],B=O.charAt(0),k,P=O.match(u)||[],L=P.length,E=0;E<L;E++)P[E]=parseFloat(P[E]);for(var N=0;N<L;){var I,G,W,Z,U,H,V,Y=i,$=n;switch(B){case"l":i+=P[N++],n+=P[N++],k=p.L,y.addData(k,i,n);break;case"L":i=P[N++],n=P[N++],k=p.L,y.addData(k,i,n);break;case"m":i+=P[N++],n+=P[N++],k=p.M,y.addData(k,i,n),h=i,g=n,B="l";break;case"M":i=P[N++],n=P[N++],k=p.M,y.addData(k,i,n),h=i,g=n,B="L";break;case"h":i+=P[N++],k=p.L,y.addData(k,i,n);break;case"H":i=P[N++],k=p.L,y.addData(k,i,n);break;case"v":n+=P[N++],k=p.L,y.addData(k,i,n);break;case"V":n=P[N++],k=p.L,y.addData(k,i,n);break;case"C":k=p.C,y.addData(k,P[N++],P[N++],P[N++],P[N++],P[N++],P[N++]),i=P[N-2],n=P[N-1];break;case"c":k=p.C,y.addData(k,P[N++]+i,P[N++]+n,P[N++]+i,P[N++]+n,P[N++]+i,P[N++]+n),i+=P[N-2],n+=P[N-1];break;case"S":I=i,G=n;var K=y.len(),J=y.data;d===p.C&&(I+=i-J[K-4],G+=n-J[K-3]),k=p.C,Y=P[N++],$=P[N++],i=P[N++],n=P[N++],y.addData(k,I,G,Y,$,i,n);break;case"s":I=i,G=n;var K=y.len(),J=y.data;d===p.C&&(I+=i-J[K-4],G+=n-J[K-3]),k=p.C,Y=i+P[N++],$=n+P[N++],i+=P[N++],n+=P[N++],y.addData(k,I,G,Y,$,i,n);break;case"Q":Y=P[N++],$=P[N++],i=P[N++],n=P[N++],k=p.Q,y.addData(k,Y,$,i,n);break;case"q":Y=P[N++]+i,$=P[N++]+n,i+=P[N++],n+=P[N++],k=p.Q,y.addData(k,Y,$,i,n);break;case"T":I=i,G=n;var K=y.len(),J=y.data;d===p.Q&&(I+=i-J[K-4],G+=n-J[K-3]),i=P[N++],n=P[N++],k=p.Q,y.addData(k,I,G,i,n);break;case"t":I=i,G=n;var K=y.len(),J=y.data;d===p.Q&&(I+=i-J[K-4],G+=n-J[K-3]),i+=P[N++],n+=P[N++],k=p.Q,y.addData(k,I,G,i,n);break;case"A":W=P[N++],Z=P[N++],U=P[N++],H=P[N++],V=P[N++],Y=i,$=n,i=P[N++],n=P[N++],k=p.A,m(Y,$,i,n,H,V,W,Z,U,k,y);break;case"a":W=P[N++],Z=P[N++],U=P[N++],H=P[N++],V=P[N++],Y=i,$=n,i+=P[N++],n+=P[N++],k=p.A,m(Y,$,i,n,H,V,W,Z,U,k,y);break}}(B==="z"||B==="Z")&&(k=p.Z,y.addData(k),i=h,n=g),d=k}return y.toStatic(),y}function r(a,i){var n=l(a);return i=i||{},i.buildPath=function(h){if(h.setData){h.setData(n.data);var g=h.getContext();g&&h.rebuildPath(g)}else{var g=h;n.rebuildPath(g)}},i.applyTransform=function(h){R(n,h),this.dirty(!0)},i}function s(a,i){return new M(r(a,i))}function c(a,i){return M.extend(r(a,i))}function x(a,i){for(var n=[],h=a.length,g=0;g<h;g++){var d=a[g];d.path||d.createPathProxy(),d.__dirtyPath&&d.buildPath(d.path,d.shape,!0),n.push(d.path)}var y=new M(i);return y.createPathProxy(),y.buildPath=function(p){p.appendPath(n);var w=p.getContext();w&&p.rebuildPath(w)},y}z.createFromString=s,z.extendFromString=c,z.mergePath=x},64239:function(X,z,e){var M=e(22407),F=e(12072),R=F.applyTransform,A=M.CMD,T=[[],[],[]],D=Math.sqrt,b=Math.atan2;function C(f,v){var m=f.data,o,u,l,r,s,c,x=A.M,a=A.C,i=A.L,n=A.R,h=A.A,g=A.Q;for(l=0,r=0;l<m.length;){switch(o=m[l++],r=l,u=0,o){case x:u=1;break;case i:u=1;break;case a:u=3;break;case g:u=2;break;case h:var d=v[4],y=v[5],p=D(v[0]*v[0]+v[1]*v[1]),w=D(v[2]*v[2]+v[3]*v[3]),S=b(-v[1]/w,v[0]/p);m[l]*=p,m[l++]+=d,m[l]*=w,m[l++]+=y,m[l++]*=p,m[l++]*=w,m[l++]+=S,m[l++]+=S,l+=2,r=l;break;case n:c[0]=m[l++],c[1]=m[l++],R(c,c,v),m[r++]=c[0],m[r++]=c[1],c[0]+=m[l++],c[1]+=m[l++],R(c,c,v),m[r++]=c[0],m[r++]=c[1]}for(s=0;s<u;s++){var c=T[s];c[0]=m[l++],c[1]=m[l++],R(c,c,v),m[r++]=c[0],m[r++]=c[1]}}}X.exports=C},94916:function(X,z,e){var M=e(34081),F=e(61577),R=e(31879),A=R.each;function T(f){return parseInt(f,10)}function D(f,v){F.initVML(),this.root=f,this.storage=v;var m=document.createElement("div"),o=document.createElement("div");m.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",o.style.cssText="position:absolute;left:0;top:0;",f.appendChild(m),this._vmlRoot=o,this._vmlViewport=m,this.resize();var u=v.delFromStorage,l=v.addToStorage;v.delFromStorage=function(r){u.call(v,r),r&&r.onRemove&&r.onRemove(o)},v.addToStorage=function(r){r.onAdd&&r.onAdd(o),l.call(v,r)},this._firstPaint=!0}D.prototype={constructor:D,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var f=this.getViewportRoot();if(f)return{offsetLeft:f.offsetLeft||0,offsetTop:f.offsetTop||0}},refresh:function(){var f=this.storage.getDisplayList(!0,!0);this._paintList(f)},_paintList:function(f){for(var v=this._vmlRoot,m=0;m<f.length;m++){var o=f[m];o.invisible||o.ignore?(o.__alreadyNotVisible||o.onRemove(v),o.__alreadyNotVisible=!0):(o.__alreadyNotVisible&&o.onAdd(v),o.__alreadyNotVisible=!1,o.__dirty&&(o.beforeBrush&&o.beforeBrush(),(o.brushVML||o.brush).call(o,v),o.afterBrush&&o.afterBrush())),o.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(v),this._firstPaint=!1)},resize:function(m,o){var m=m??this._getWidth(),o=o??this._getHeight();if(this._width!==m||this._height!==o){this._width=m,this._height=o;var u=this._vmlViewport.style;u.width=m+"px",u.height=o+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var f=this.root,v=f.currentStyle;return(f.clientWidth||T(v.width))-T(v.paddingLeft)-T(v.paddingRight)|0},_getHeight:function(){var f=this.root,v=f.currentStyle;return(f.clientHeight||T(v.height))-T(v.paddingTop)-T(v.paddingBottom)|0}};function b(f){return function(){M('In IE8.0 VML mode painter not support method "'+f+'"')}}A(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(f){D.prototype[f]=b(f)});var C=D;X.exports=C},61577:function(X,z,e){var M=e(58020),F="urn:schemas-microsoft-com:vml",R=typeof window>"u"?null:window,A=!1,T=R&&R.document;function D(f){return b(f)}var b;if(T&&!M.canvasSupported)try{!T.namespaces.zrvml&&T.namespaces.add("zrvml",F),b=function(f){return T.createElement("<zrvml:"+f+' class="zrvml">')}}catch{b=function(v){return T.createElement("<"+v+' xmlns="'+F+'" class="zrvml">')}}function C(){if(!(A||!T)){A=!0;var f=T.styleSheets;f.length<31?T.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):f[0].addRule(".zrvml","behavior:url(#default#VML)")}}z.doc=T,z.createNode=D,z.initVML=C},98805:function(X,z,e){var M=e(58020),F=e(12072),R=F.applyTransform,A=e(95946),T=e(94819),D=e(72113),b=e(38630),C=e(84423),f=e(67033),v=e(11096),m=e(35727),o=e(54904),u=e(22407),l=e(21260),r=e(61577),s=u.CMD,c=Math.round,x=Math.sqrt,a=Math.abs,i=Math.cos,n=Math.sin,h=Math.max;if(!M.canvasSupported){var g=",",d="progid:DXImageTransform.Microsoft",y=21600,p=y/2,w=1e5,S=1e3,O=function(Lt){Lt.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",Lt.coordsize=y+","+y,Lt.coordorigin="0,0"},B=function(Lt){return String(Lt).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},k=function(Lt,Rt,Tt){return"rgb("+[Lt,Rt,Tt].join(",")+")"},P=function(Lt,Rt){Rt&&Lt&&Rt.parentNode!==Lt&&Lt.appendChild(Rt)},L=function(Lt,Rt){Rt&&Lt&&Rt.parentNode===Lt&&Lt.removeChild(Rt)},E=function(Lt,Rt,Tt){return(parseFloat(Lt)||0)*w+(parseFloat(Rt)||0)*S+Tt},N=b.parsePercent,I=function(Lt,Rt,Tt){var mt=T.parse(Rt);Tt=+Tt,isNaN(Tt)&&(Tt=1),mt&&(Lt.color=k(mt[0],mt[1],mt[2]),Lt.opacity=Tt*mt[3])},G=function(Lt){var Rt=T.parse(Lt);return[k(Rt[0],Rt[1],Rt[2]),Rt[3]]},W=function(Lt,Rt,Tt){var mt=Rt.fill;if(mt!=null)if(mt instanceof l){var Ft,ct=0,vt=[0,0],Dt=0,Ct=1,jt=Tt.getBoundingRect(),zt=jt.width,Yt=jt.height;if(mt.type==="linear"){Ft="gradient";var Zt=Tt.transform,ft=[mt.x*zt,mt.y*Yt],gt=[mt.x2*zt,mt.y2*Yt];Zt&&(R(ft,ft,Zt),R(gt,gt,Zt));var dt=gt[0]-ft[0],lt=gt[1]-ft[1];ct=Math.atan2(dt,lt)*180/Math.PI,ct<0&&(ct+=360),ct<1e-6&&(ct=0)}else{Ft="gradientradial";var ft=[mt.x*zt,mt.y*Yt],Zt=Tt.transform,ot=Tt.scale,it=zt,yt=Yt;vt=[(ft[0]-jt.x)/it,(ft[1]-jt.y)/yt],Zt&&R(ft,ft,Zt),it/=ot[0]*y,yt/=ot[1]*y;var Ot=h(it,yt);Dt=2*0/Ot,Ct=2*mt.r/Ot-Dt}var St=mt.colorStops.slice();St.sort(function(ge,Ae){return ge.offset-Ae.offset});for(var Gt=St.length,Ht=[],Kt=[],Jt=0;Jt<Gt;Jt++){var te=St[Jt],ie=G(te.color);Kt.push(te.offset*Ct+Dt+" "+ie[0]),(Jt===0||Jt===Gt-1)&&Ht.push(ie)}if(Gt>=2){var oe=Ht[0][0],he=Ht[1][0],ne=Ht[0][1]*Rt.opacity,ce=Ht[1][1]*Rt.opacity;Lt.type=Ft,Lt.method="none",Lt.focus="100%",Lt.angle=ct,Lt.color=oe,Lt.color2=he,Lt.colors=Kt.join(","),Lt.opacity=ce,Lt.opacity2=ne}Ft==="radial"&&(Lt.focusposition=vt.join(","))}else I(Lt,mt,Rt.opacity)},Z=function(Lt,Rt){Rt.lineDash&&(Lt.dashstyle=Rt.lineDash.join(" ")),Rt.stroke!=null&&!(Rt.stroke instanceof l)&&I(Lt,Rt.stroke,Rt.opacity)},U=function(Lt,Rt,Tt,mt){var Ft=Rt==="fill",ct=Lt.getElementsByTagName(Rt)[0];Tt[Rt]!=null&&Tt[Rt]!=="none"&&(Ft||!Ft&&Tt.lineWidth)?(Lt[Ft?"filled":"stroked"]="true",Tt[Rt]instanceof l&&L(Lt,ct),ct||(ct=r.createNode(Rt)),Ft?W(ct,Tt,mt):Z(ct,Tt),P(Lt,ct)):(Lt[Ft?"filled":"stroked"]="false",L(Lt,ct))},H=[[],[],[]],V=function(Lt,Rt){var Tt=s.M,mt=s.C,Ft=s.L,ct=s.A,vt=s.Q,Dt=[],Ct,jt,zt,Yt,Zt,ft,gt=Lt.data,dt=Lt.len();for(Yt=0;Yt<dt;){switch(zt=gt[Yt++],jt="",Ct=0,zt){case Tt:jt=" m ",Ct=1,Zt=gt[Yt++],ft=gt[Yt++],H[0][0]=Zt,H[0][1]=ft;break;case Ft:jt=" l ",Ct=1,Zt=gt[Yt++],ft=gt[Yt++],H[0][0]=Zt,H[0][1]=ft;break;case vt:case mt:jt=" c ",Ct=3;var It=gt[Yt++],Wt=gt[Yt++],lt=gt[Yt++],ot=gt[Yt++],it,yt;zt===vt?(it=lt,yt=ot,lt=(lt+2*It)/3,ot=(ot+2*Wt)/3,It=(Zt+2*It)/3,Wt=(ft+2*Wt)/3):(it=gt[Yt++],yt=gt[Yt++]),H[0][0]=It,H[0][1]=Wt,H[1][0]=lt,H[1][1]=ot,H[2][0]=it,H[2][1]=yt,Zt=it,ft=yt;break;case ct:var Ot=0,St=0,Gt=1,Ht=1,Kt=0;Rt&&(Ot=Rt[4],St=Rt[5],Gt=x(Rt[0]*Rt[0]+Rt[1]*Rt[1]),Ht=x(Rt[2]*Rt[2]+Rt[3]*Rt[3]),Kt=Math.atan2(-Rt[1]/Ht,Rt[0]/Gt));var Jt=gt[Yt++],te=gt[Yt++],ie=gt[Yt++],oe=gt[Yt++],he=gt[Yt++]+Kt,ne=gt[Yt++]+he+Kt;Yt++;var ce=gt[Yt++],ge=Jt+i(he)*ie,Ae=te+n(he)*oe,It=Jt+i(ne)*ie,Wt=te+n(ne)*oe,_t=ce?" wa ":" at ";Math.abs(ge-It)<1e-4&&(Math.abs(ne-he)>.01?ce&&(ge+=270/y):Math.abs(Ae-te)<1e-4?ce&&ge<Jt||!ce&&ge>Jt?Wt-=270/y:Wt+=270/y:ce&&Ae<te||!ce&&Ae>te?It+=270/y:It-=270/y),Dt.push(_t,c(((Jt-ie)*Gt+Ot)*y-p),g,c(((te-oe)*Ht+St)*y-p),g,c(((Jt+ie)*Gt+Ot)*y-p),g,c(((te+oe)*Ht+St)*y-p),g,c((ge*Gt+Ot)*y-p),g,c((Ae*Ht+St)*y-p),g,c((It*Gt+Ot)*y-p),g,c((Wt*Ht+St)*y-p)),Zt=It,ft=Wt;break;case s.R:var ee=H[0],re=H[1];ee[0]=gt[Yt++],ee[1]=gt[Yt++],re[0]=ee[0]+gt[Yt++],re[1]=ee[1]+gt[Yt++],Rt&&(R(ee,ee,Rt),R(re,re,Rt)),ee[0]=c(ee[0]*y-p),re[0]=c(re[0]*y-p),ee[1]=c(ee[1]*y-p),re[1]=c(re[1]*y-p),Dt.push(" m ",ee[0],g,ee[1]," l ",re[0],g,ee[1]," l ",re[0],g,re[1]," l ",ee[0],g,re[1]);break;case s.Z:Dt.push(" x ")}if(Ct>0){Dt.push(jt);for(var de=0;de<Ct;de++){var Se=H[de];Rt&&R(Se,Se,Rt),Dt.push(c(Se[0]*y-p),g,c(Se[1]*y-p),de<Ct-1?g:"")}}}return Dt.join("")};o.prototype.brushVML=function(Lt){var Rt=this.style,Tt=this._vmlEl;Tt||(Tt=r.createNode("shape"),O(Tt),this._vmlEl=Tt),U(Tt,"fill",Rt,this),U(Tt,"stroke",Rt,this);var mt=this.transform,Ft=mt!=null,ct=Tt.getElementsByTagName("stroke")[0];if(ct){var vt=Rt.lineWidth;if(Ft&&!Rt.strokeNoScale){var Dt=mt[0]*mt[3]-mt[1]*mt[2];vt*=x(a(Dt))}ct.weight=vt+"px"}var Ct=this.path||(this.path=new u);this.__dirtyPath&&(Ct.beginPath(),Ct.subPixelOptimize=!1,this.buildPath(Ct,this.shape),Ct.toStatic(),this.__dirtyPath=!1),Tt.path=V(Ct,this.transform),Tt.style.zIndex=E(this.zlevel,this.z,this.z2),P(Lt,Tt),Rt.text!=null?this.drawRectText(Lt,this.getBoundingRect()):this.removeRectText(Lt)},o.prototype.onRemove=function(Lt){L(Lt,this._vmlEl),this.removeRectText(Lt)},o.prototype.onAdd=function(Lt){P(Lt,this._vmlEl),this.appendRectText(Lt)};var Y=function(Lt){return typeof Lt=="object"&&Lt.tagName&&Lt.tagName.toUpperCase()==="IMG"};v.prototype.brushVML=function(Lt){var Rt=this.style,Tt=Rt.image,mt,Ft;if(Y(Tt)){var ct=Tt.src;if(ct===this._imageSrc)mt=this._imageWidth,Ft=this._imageHeight;else{var vt=Tt.runtimeStyle,Dt=vt.width,Ct=vt.height;vt.width="auto",vt.height="auto",mt=Tt.width,Ft=Tt.height,vt.width=Dt,vt.height=Ct,this._imageSrc=ct,this._imageWidth=mt,this._imageHeight=Ft}Tt=ct}else Tt===this._imageSrc&&(mt=this._imageWidth,Ft=this._imageHeight);if(Tt){var jt=Rt.x||0,zt=Rt.y||0,Yt=Rt.width,Zt=Rt.height,ft=Rt.sWidth,gt=Rt.sHeight,dt=Rt.sx||0,lt=Rt.sy||0,ot=ft&&gt,it=this._vmlEl;it||(it=r.doc.createElement("div"),O(it),this._vmlEl=it);var yt=it.style,Ot=!1,St,Gt=1,Ht=1;if(this.transform&&(St=this.transform,Gt=x(St[0]*St[0]+St[1]*St[1]),Ht=x(St[2]*St[2]+St[3]*St[3]),Ot=St[1]||St[2]),Ot){var Kt=[jt,zt],Jt=[jt+Yt,zt],te=[jt,zt+Zt],ie=[jt+Yt,zt+Zt];R(Kt,Kt,St),R(Jt,Jt,St),R(te,te,St),R(ie,ie,St);var oe=h(Kt[0],Jt[0],te[0],ie[0]),he=h(Kt[1],Jt[1],te[1],ie[1]),ne=[];ne.push("M11=",St[0]/Gt,g,"M12=",St[2]/Ht,g,"M21=",St[1]/Gt,g,"M22=",St[3]/Ht,g,"Dx=",c(jt*Gt+St[4]),g,"Dy=",c(zt*Ht+St[5])),yt.padding="0 "+c(oe)+"px "+c(he)+"px 0",yt.filter=d+".Matrix("+ne.join("")+", SizingMethod=clip)"}else St&&(jt=jt*Gt+St[4],zt=zt*Ht+St[5]),yt.filter="",yt.left=c(jt)+"px",yt.top=c(zt)+"px";var ce=this._imageEl,ge=this._cropEl;ce||(ce=r.doc.createElement("div"),this._imageEl=ce);var Ae=ce.style;if(ot){if(mt&&Ft)Ae.width=c(Gt*mt*Yt/ft)+"px",Ae.height=c(Ht*Ft*Zt/gt)+"px";else{var It=new Image,Wt=this;It.onload=function(){It.onload=null,mt=It.width,Ft=It.height,Ae.width=c(Gt*mt*Yt/ft)+"px",Ae.height=c(Ht*Ft*Zt/gt)+"px",Wt._imageWidth=mt,Wt._imageHeight=Ft,Wt._imageSrc=Tt},It.src=Tt}ge||(ge=r.doc.createElement("div"),ge.style.overflow="hidden",this._cropEl=ge);var _t=ge.style;_t.width=c((Yt+dt*Yt/ft)*Gt),_t.height=c((Zt+lt*Zt/gt)*Ht),_t.filter=d+".Matrix(Dx="+-dt*Yt/ft*Gt+",Dy="+-lt*Zt/gt*Ht+")",ge.parentNode||it.appendChild(ge),ce.parentNode!==ge&&ge.appendChild(ce)}else Ae.width=c(Gt*Yt)+"px",Ae.height=c(Ht*Zt)+"px",it.appendChild(ce),ge&&ge.parentNode&&(it.removeChild(ge),this._cropEl=null);var ee="",re=Rt.opacity;re<1&&(ee+=".Alpha(opacity="+c(re*100)+") "),ee+=d+".AlphaImageLoader(src="+Tt+", SizingMethod=scale)",Ae.filter=ee,it.style.zIndex=E(this.zlevel,this.z,this.z2),P(Lt,it),Rt.text!=null&&this.drawRectText(Lt,this.getBoundingRect())}},v.prototype.onRemove=function(Lt){L(Lt,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(Lt)},v.prototype.onAdd=function(Lt){P(Lt,this._vmlEl),this.appendRectText(Lt)};var $="normal",K={},J=0,Q=100,et=document.createElement("div"),nt=function(Lt){var Rt=K[Lt];if(!Rt){J>Q&&(J=0,K={});var Tt=et.style,mt;try{Tt.font=Lt,mt=Tt.fontFamily.split(",")[0]}catch{}Rt={style:Tt.fontStyle||$,variant:Tt.fontVariant||$,weight:Tt.fontWeight||$,size:parseFloat(Tt.fontSize||12)|0,family:mt||"Microsoft YaHei"},K[Lt]=Rt,J++}return Rt},st;D.$override("measureText",function(Lt,Rt){var Tt=r.doc;st||(st=Tt.createElement("div"),st.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",r.doc.body.appendChild(st));try{st.style.font=Rt}catch{}return st.innerHTML="",st.appendChild(Tt.createTextNode(Lt)),{width:st.offsetWidth}});for(var ut=new A,rt=function(Lt,Rt,Tt,mt){var Ft=this.style;this.__dirty&&b.normalizeTextStyle(Ft,!0);var ct=Ft.text;if(ct!=null&&(ct+=""),!!ct){if(Ft.rich){var vt=D.parseRichText(ct,Ft);ct=[];for(var Dt=0;Dt<vt.lines.length;Dt++){for(var Ct=vt.lines[Dt].tokens,jt=[],zt=0;zt<Ct.length;zt++)jt.push(Ct[zt].text);ct.push(jt.join(""))}ct=ct.join(`
`)}var Yt,Zt,ft=Ft.textAlign,gt=Ft.textVerticalAlign,dt=nt(Ft.font),lt=dt.style+" "+dt.variant+" "+dt.weight+" "+dt.size+'px "'+dt.family+'"';Tt=Tt||D.getBoundingRect(ct,lt,ft,gt,Ft.textPadding,Ft.textLineHeight);var ot=this.transform;if(ot&&!mt&&(ut.copy(Rt),ut.applyTransform(ot),Rt=ut),mt)Yt=Rt.x,Zt=Rt.y;else{var it=Ft.textPosition;if(it instanceof Array)Yt=Rt.x+N(it[0],Rt.width),Zt=Rt.y+N(it[1],Rt.height),ft=ft||"left";else{var yt=this.calculateTextPosition?this.calculateTextPosition({},Ft,Rt):D.calculateTextPosition({},Ft,Rt);Yt=yt.x,Zt=yt.y,ft=ft||yt.textAlign,gt=gt||yt.textVerticalAlign}}Yt=D.adjustTextX(Yt,Tt.width,ft),Zt=D.adjustTextY(Zt,Tt.height,gt),Zt+=Tt.height/2;var Ot=r.createNode,St=this._textVmlEl,Gt,Ht,Kt;St?(Kt=St.firstChild,Gt=Kt.nextSibling,Ht=Gt.nextSibling):(St=Ot("line"),Gt=Ot("path"),Ht=Ot("textpath"),Kt=Ot("skew"),Ht.style["v-text-align"]="left",O(St),Gt.textpathok=!0,Ht.on=!0,St.from="0 0",St.to="1000 0.05",P(St,Kt),P(St,Gt),P(St,Ht),this._textVmlEl=St);var Jt=[Yt,Zt],te=St.style;ot&&mt?(R(Jt,Jt,ot),Kt.on=!0,Kt.matrix=ot[0].toFixed(3)+g+ot[2].toFixed(3)+g+ot[1].toFixed(3)+g+ot[3].toFixed(3)+",0,0",Kt.offset=(c(Jt[0])||0)+","+(c(Jt[1])||0),Kt.origin="0 0",te.left="0px",te.top="0px"):(Kt.on=!1,te.left=c(Yt)+"px",te.top=c(Zt)+"px"),Ht.string=B(ct);try{Ht.style.font=lt}catch{}U(St,"fill",{fill:Ft.textFill,opacity:Ft.opacity},this),U(St,"stroke",{stroke:Ft.textStroke,opacity:Ft.opacity,lineDash:Ft.lineDash||null},this),St.style.zIndex=E(this.zlevel,this.z,this.z2),P(Lt,St)}},ht=function(Lt){L(Lt,this._textVmlEl),this._textVmlEl=null},Pt=function(Lt){P(Lt,this._textVmlEl)},wt=[C,f,v,o,m],At=0;At<wt.length;At++){var Nt=wt[At].prototype;Nt.drawRectText=rt,Nt.removeRectText=ht,Nt.appendRectText=Pt}m.prototype.brushVML=function(Lt){var Rt=this.style;Rt.text!=null?this.drawRectText(Lt,{x:Rt.x||0,y:Rt.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(Lt)},m.prototype.onRemove=function(Lt){this.removeRectText(Lt)},m.prototype.onAdd=function(Lt){this.appendRectText(Lt)}}},32041:function(X,z,e){e(98805);var M=e(23593),F=M.registerPainter,R=e(94916);F("vml",R)},23593:function(X,z,e){var M=e(88242),F=e(58020),R=e(31879),A=e(6113),T=e(2970),D=e(37200),b=e(33491),C=e(35641);/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var f=!F.canvasSupported,v={canvas:D},m={},o="4.3.2";function u(a,i){var n=new x(M(),a,i);return m[n.id]=n,n}function l(a){if(a)a.dispose();else{for(var i in m)m.hasOwnProperty(i)&&m[i].dispose();m={}}return this}function r(a){return m[a]}function s(a,i){v[a]=i}function c(a){delete m[a]}var x=function(a,i,n){n=n||{},this.dom=i,this.id=a;var h=this,g=new T,d=n.renderer;if(f){if(!v.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");d="vml"}else(!d||!v[d])&&(d="canvas");var y=new v[d](i,g,n,a);this.storage=g,this.painter=y;var p=!F.node&&!F.worker?new C(y.getViewportRoot(),y.root):null;this.handler=new A(g,y,p,y.root),this.animation=new b({stage:{update:R.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var w=g.delFromStorage,S=g.addToStorage;g.delFromStorage=function(O){w.call(g,O),O&&O.removeSelfFromZr(h)},g.addToStorage=function(O){S.call(g,O),O.addSelfToZr(h)}};x.prototype={constructor:x,getId:function(){return this.id},add:function(a){this.storage.addRoot(a),this._needsRefresh=!0},remove:function(a){this.storage.delRoot(a),this._needsRefresh=!0},configLayer:function(a,i){this.painter.configLayer&&this.painter.configLayer(a,i),this._needsRefresh=!0},setBackgroundColor:function(a){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(a),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var a;this._needsRefresh&&(a=!0,this.refreshImmediately()),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately()),a&&this.trigger("rendered")},addHover:function(a,i){if(this.painter.addHover){var n=this.painter.addHover(a,i);return this.refreshHover(),n}},removeHover:function(a){this.painter.removeHover&&(this.painter.removeHover(a),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(a){a=a||{},this.painter.resize(a.width,a.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(a,i){return this.painter.pathToImage(a,i)},setCursorStyle:function(a){this.handler.setCursorStyle(a)},findHover:function(a,i){return this.handler.findHover(a,i)},on:function(a,i,n){this.handler.on(a,i,n)},off:function(a,i){this.handler.off(a,i)},trigger:function(a,i){this.handler.trigger(a,i)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,c(this.id)}},z.version=o,z.init=u,z.dispose=l,z.getInstance=r,z.registerPainter=s},7974:function(X,z,e){"use strict";X.exports=e.p+"static/img/waterNormals.ebf32d47.jpg"},67146:function(X,z,e){X.exports=e(87010)},4083:function(X,z,e){X.exports=e(21048)},8138:function(X,z,e){X.exports=e(93605)},94221:function(X,z,e){X.exports=e(98100)},66426:function(X,z,e){X.exports=e(25538)},25077:function(X,z,e){"use strict";e(26714),e(81522);var M=e(18893);X.exports=M("Array","flatMap")},47174:function(X,z,e){"use strict";var M=e(32242),F=e(99112),R=RegExp.prototype;X.exports=function(A){return A===R||M(R,A)?F(A):A.flags}},29586:function(X,z,e){"use strict";var M=e(32242),F=e(25077),R=Array.prototype;X.exports=function(A){var T=A.flatMap;return A===R||M(R,A)&&T===R.flatMap?F:T}},97803:function(X,z,e){"use strict";e(29992);var M=e(94388);X.exports=M.Math.tanh},19057:function(X,z,e){"use strict";e(21431);var M=e(94388);X.exports=M.Math.trunc},99112:function(X,z,e){"use strict";e(66420);var M=e(75899);X.exports=M},28779:function(X,z,e){"use strict";var M=e(67170),F=e(61159),R=e(33965),A=e(91492),T=function(D,b,C,f,v,m,o,u){for(var l=v,r=0,s=o?A(o,u):!1,c,x;r<f;)r in C&&(c=s?s(C[r],r,b):C[r],m>0&&M(c)?(x=F(c),l=T(D,b,c,x,l,m-1)-1):(R(l+1),D[l]=c),l++),r++;return l};X.exports=T},75169:function(X){"use strict";var z=Math.expm1,e=Math.exp;X.exports=!z||z(10)>22025.465794806718||z(10)<22025.465794806718||z(-2e-17)!==-2e-17?function(F){var R=+F;return R===0?R:R>-1e-6&&R<1e-6?R+R*R/2:e(R)-1}:z},26714:function(X,z,e){"use strict";var M=e(90434),F=e(28779),R=e(86735),A=e(19449),T=e(61159),D=e(35552);M({target:"Array",proto:!0},{flatMap:function(C){var f=A(this),v=T(f),m;return R(C),m=D(f,0),m.length=F(m,f,f,v,0,1,C,arguments.length>1?arguments[1]:void 0),m}})},81522:function(X,z,e){"use strict";var M=e(59747);M("flatMap")},29992:function(X,z,e){"use strict";var M=e(90434),F=e(75169),R=Math.exp;M({target:"Math",stat:!0},{tanh:function(T){var D=+T,b=F(D),C=F(-D);return b===1/0?1:C===1/0?-1:(b-C)/(R(D)+R(-D))}})},21431:function(X,z,e){"use strict";var M=e(90434),F=e(1686);M({target:"Math",stat:!0},{trunc:F})},66420:function(){},87010:function(X,z,e){"use strict";var M=e(47174);X.exports=M},21048:function(X,z,e){"use strict";var M=e(29586);X.exports=M},93605:function(X,z,e){"use strict";var M=e(97803);X.exports=M},98100:function(X,z,e){"use strict";var M=e(19057);X.exports=M},73267:function(X){"use strict";X.exports=JSON.parse('{"Aacute":"\xC1","aacute":"\xE1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223E","acd":"\u223F","acE":"\u223E\u0333","Acirc":"\xC2","acirc":"\xE2","acute":"\xB4","Acy":"\u0410","acy":"\u0430","AElig":"\xC6","aelig":"\xE6","af":"\u2061","Afr":"\u{1D504}","afr":"\u{1D51E}","Agrave":"\xC0","agrave":"\xE0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03B1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2A3F","amp":"&","AMP":"&","andand":"\u2A55","And":"\u2A53","and":"\u2227","andd":"\u2A5C","andslope":"\u2A58","andv":"\u2A5A","ang":"\u2220","ange":"\u29A4","angle":"\u2220","angmsdaa":"\u29A8","angmsdab":"\u29A9","angmsdac":"\u29AA","angmsdad":"\u29AB","angmsdae":"\u29AC","angmsdaf":"\u29AD","angmsdag":"\u29AE","angmsdah":"\u29AF","angmsd":"\u2221","angrt":"\u221F","angrtvb":"\u22BE","angrtvbd":"\u299D","angsph":"\u2222","angst":"\xC5","angzarr":"\u237C","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1D538}","aopf":"\u{1D552}","apacir":"\u2A6F","ap":"\u2248","apE":"\u2A70","ape":"\u224A","apid":"\u224B","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224A","Aring":"\xC5","aring":"\xE5","Ascr":"\u{1D49C}","ascr":"\u{1D4B6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224D","Atilde":"\xC3","atilde":"\xE3","Auml":"\xC4","auml":"\xE4","awconint":"\u2233","awint":"\u2A11","backcong":"\u224C","backepsilon":"\u03F6","backprime":"\u2035","backsim":"\u223D","backsimeq":"\u22CD","Backslash":"\u2216","Barv":"\u2AE7","barvee":"\u22BD","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23B5","bbrktbrk":"\u23B6","bcong":"\u224C","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201E","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29B0","bepsi":"\u03F6","bernou":"\u212C","Bernoullis":"\u212C","Beta":"\u0392","beta":"\u03B2","beth":"\u2136","between":"\u226C","Bfr":"\u{1D505}","bfr":"\u{1D51F}","bigcap":"\u22C2","bigcirc":"\u25EF","bigcup":"\u22C3","bigodot":"\u2A00","bigoplus":"\u2A01","bigotimes":"\u2A02","bigsqcup":"\u2A06","bigstar":"\u2605","bigtriangledown":"\u25BD","bigtriangleup":"\u25B3","biguplus":"\u2A04","bigvee":"\u22C1","bigwedge":"\u22C0","bkarow":"\u290D","blacklozenge":"\u29EB","blacksquare":"\u25AA","blacktriangle":"\u25B4","blacktriangledown":"\u25BE","blacktriangleleft":"\u25C2","blacktriangleright":"\u25B8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20E5","bnequiv":"\u2261\u20E5","bNot":"\u2AED","bnot":"\u2310","Bopf":"\u{1D539}","bopf":"\u{1D553}","bot":"\u22A5","bottom":"\u22A5","bowtie":"\u22C8","boxbox":"\u29C9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250C","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252C","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229F","boxplus":"\u229E","boxtimes":"\u22A0","boxul":"\u2518","boxuL":"\u255B","boxUl":"\u255C","boxUL":"\u255D","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255A","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253C","boxvH":"\u256A","boxVh":"\u256B","boxVH":"\u256C","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251C","boxvR":"\u255E","boxVr":"\u255F","boxVR":"\u2560","bprime":"\u2035","breve":"\u02D8","Breve":"\u02D8","brvbar":"\xA6","bscr":"\u{1D4B7}","Bscr":"\u212C","bsemi":"\u204F","bsim":"\u223D","bsime":"\u22CD","bsolb":"\u29C5","bsol":"\\\\","bsolhsub":"\u27C8","bull":"\u2022","bullet":"\u2022","bump":"\u224E","bumpE":"\u2AAE","bumpe":"\u224F","Bumpeq":"\u224E","bumpeq":"\u224F","Cacute":"\u0106","cacute":"\u0107","capand":"\u2A44","capbrcup":"\u2A49","capcap":"\u2A4B","cap":"\u2229","Cap":"\u22D2","capcup":"\u2A47","capdot":"\u2A40","CapitalDifferentialD":"\u2145","caps":"\u2229\uFE00","caret":"\u2041","caron":"\u02C7","Cayleys":"\u212D","ccaps":"\u2A4D","Ccaron":"\u010C","ccaron":"\u010D","Ccedil":"\xC7","ccedil":"\xE7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2A4C","ccupssm":"\u2A50","Cdot":"\u010A","cdot":"\u010B","cedil":"\xB8","Cedilla":"\xB8","cemptyv":"\u29B2","cent":"\xA2","centerdot":"\xB7","CenterDot":"\xB7","cfr":"\u{1D520}","Cfr":"\u212D","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03A7","chi":"\u03C7","circ":"\u02C6","circeq":"\u2257","circlearrowleft":"\u21BA","circlearrowright":"\u21BB","circledast":"\u229B","circledcirc":"\u229A","circleddash":"\u229D","CircleDot":"\u2299","circledR":"\xAE","circledS":"\u24C8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25CB","cirE":"\u29C3","cire":"\u2257","cirfnint":"\u2A10","cirmid":"\u2AEF","cirscir":"\u29C2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201D","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2A74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2A6D","Congruent":"\u2261","conint":"\u222E","Conint":"\u222F","ContourIntegral":"\u222E","copf":"\u{1D554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xA9","COPY":"\xA9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21B5","cross":"\u2717","Cross":"\u2A2F","Cscr":"\u{1D49E}","cscr":"\u{1D4B8}","csub":"\u2ACF","csube":"\u2AD1","csup":"\u2AD0","csupe":"\u2AD2","ctdot":"\u22EF","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22DE","cuesc":"\u22DF","cularr":"\u21B6","cularrp":"\u293D","cupbrcap":"\u2A48","cupcap":"\u2A46","CupCap":"\u224D","cup":"\u222A","Cup":"\u22D3","cupcup":"\u2A4A","cupdot":"\u228D","cupor":"\u2A45","cups":"\u222A\uFE00","curarr":"\u21B7","curarrm":"\u293C","curlyeqprec":"\u22DE","curlyeqsucc":"\u22DF","curlyvee":"\u22CE","curlywedge":"\u22CF","curren":"\xA4","curvearrowleft":"\u21B6","curvearrowright":"\u21B7","cuvee":"\u22CE","cuwed":"\u22CF","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232D","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21A1","dArr":"\u21D3","dash":"\u2010","Dashv":"\u2AE4","dashv":"\u22A3","dbkarow":"\u290F","dblac":"\u02DD","Dcaron":"\u010E","dcaron":"\u010F","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21CA","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2A77","deg":"\xB0","Del":"\u2207","Delta":"\u0394","delta":"\u03B4","demptyv":"\u29B1","dfisht":"\u297F","Dfr":"\u{1D507}","dfr":"\u{1D521}","dHar":"\u2965","dharl":"\u21C3","dharr":"\u21C2","DiacriticalAcute":"\xB4","DiacriticalDot":"\u02D9","DiacriticalDoubleAcute":"\u02DD","DiacriticalGrave":"`","DiacriticalTilde":"\u02DC","diam":"\u22C4","diamond":"\u22C4","Diamond":"\u22C4","diamondsuit":"\u2666","diams":"\u2666","die":"\xA8","DifferentialD":"\u2146","digamma":"\u03DD","disin":"\u22F2","div":"\xF7","divide":"\xF7","divideontimes":"\u22C7","divonx":"\u22C7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231E","dlcrop":"\u230D","dollar":"$","Dopf":"\u{1D53B}","dopf":"\u{1D555}","Dot":"\xA8","dot":"\u02D9","DotDot":"\u20DC","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22A1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222F","DoubleDot":"\xA8","DoubleDownArrow":"\u21D3","DoubleLeftArrow":"\u21D0","DoubleLeftRightArrow":"\u21D4","DoubleLeftTee":"\u2AE4","DoubleLongLeftArrow":"\u27F8","DoubleLongLeftRightArrow":"\u27FA","DoubleLongRightArrow":"\u27F9","DoubleRightArrow":"\u21D2","DoubleRightTee":"\u22A8","DoubleUpArrow":"\u21D1","DoubleUpDownArrow":"\u21D5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21D3","DownArrowUpArrow":"\u21F5","DownBreve":"\u0311","downdownarrows":"\u21CA","downharpoonleft":"\u21C3","downharpoonright":"\u21C2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295E","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21BD","DownRightTeeVector":"\u295F","DownRightVectorBar":"\u2957","DownRightVector":"\u21C1","DownTeeArrow":"\u21A7","DownTee":"\u22A4","drbkarow":"\u2910","drcorn":"\u231F","drcrop":"\u230C","Dscr":"\u{1D49F}","dscr":"\u{1D4B9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29F6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22F1","dtri":"\u25BF","dtrif":"\u25BE","duarr":"\u21F5","duhar":"\u296F","dwangle":"\u29A6","DZcy":"\u040F","dzcy":"\u045F","dzigrarr":"\u27FF","Eacute":"\xC9","eacute":"\xE9","easter":"\u2A6E","Ecaron":"\u011A","ecaron":"\u011B","Ecirc":"\xCA","ecirc":"\xEA","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042D","ecy":"\u044D","eDDot":"\u2A77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1D508}","efr":"\u{1D522}","eg":"\u2A9A","Egrave":"\xC8","egrave":"\xE8","egs":"\u2A96","egsdot":"\u2A98","el":"\u2A99","Element":"\u2208","elinters":"\u23E7","ell":"\u2113","els":"\u2A95","elsdot":"\u2A97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25FB","emptyv":"\u2205","EmptyVerySmallSquare":"\u25AB","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014A","eng":"\u014B","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1D53C}","eopf":"\u{1D556}","epar":"\u22D5","eparsl":"\u29E3","eplus":"\u2A71","epsi":"\u03B5","Epsilon":"\u0395","epsilon":"\u03B5","epsiv":"\u03F5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2A96","eqslantless":"\u2A95","Equal":"\u2A75","equals":"=","EqualTilde":"\u2242","equest":"\u225F","Equilibrium":"\u21CC","equiv":"\u2261","equivDD":"\u2A78","eqvparsl":"\u29E5","erarr":"\u2971","erDot":"\u2253","escr":"\u212F","Escr":"\u2130","esdot":"\u2250","Esim":"\u2A73","esim":"\u2242","Eta":"\u0397","eta":"\u03B7","ETH":"\xD0","eth":"\xF0","Euml":"\xCB","euml":"\xEB","euro":"\u20AC","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\uFB03","fflig":"\uFB00","ffllig":"\uFB04","Ffr":"\u{1D509}","ffr":"\u{1D523}","filig":"\uFB01","FilledSmallSquare":"\u25FC","FilledVerySmallSquare":"\u25AA","fjlig":"fj","flat":"\u266D","fllig":"\uFB02","fltns":"\u25B1","fnof":"\u0192","Fopf":"\u{1D53D}","fopf":"\u{1D557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22D4","forkv":"\u2AD9","Fouriertrf":"\u2131","fpartint":"\u2A0D","frac12":"\xBD","frac13":"\u2153","frac14":"\xBC","frac15":"\u2155","frac16":"\u2159","frac18":"\u215B","frac23":"\u2154","frac25":"\u2156","frac34":"\xBE","frac35":"\u2157","frac38":"\u215C","frac45":"\u2158","frac56":"\u215A","frac58":"\u215D","frac78":"\u215E","frasl":"\u2044","frown":"\u2322","fscr":"\u{1D4BB}","Fscr":"\u2131","gacute":"\u01F5","Gamma":"\u0393","gamma":"\u03B3","Gammad":"\u03DC","gammad":"\u03DD","gap":"\u2A86","Gbreve":"\u011E","gbreve":"\u011F","Gcedil":"\u0122","Gcirc":"\u011C","gcirc":"\u011D","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2A8C","gel":"\u22DB","geq":"\u2265","geqq":"\u2267","geqslant":"\u2A7E","gescc":"\u2AA9","ges":"\u2A7E","gesdot":"\u2A80","gesdoto":"\u2A82","gesdotol":"\u2A84","gesl":"\u22DB\uFE00","gesles":"\u2A94","Gfr":"\u{1D50A}","gfr":"\u{1D524}","gg":"\u226B","Gg":"\u22D9","ggg":"\u22D9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2AA5","gl":"\u2277","glE":"\u2A92","glj":"\u2AA4","gnap":"\u2A8A","gnapprox":"\u2A8A","gne":"\u2A88","gnE":"\u2269","gneq":"\u2A88","gneqq":"\u2269","gnsim":"\u22E7","Gopf":"\u{1D53E}","gopf":"\u{1D558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22DB","GreaterFullEqual":"\u2267","GreaterGreater":"\u2AA2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2A7E","GreaterTilde":"\u2273","Gscr":"\u{1D4A2}","gscr":"\u210A","gsim":"\u2273","gsime":"\u2A8E","gsiml":"\u2A90","gtcc":"\u2AA7","gtcir":"\u2A7A","gt":">","GT":">","Gt":"\u226B","gtdot":"\u22D7","gtlPar":"\u2995","gtquest":"\u2A7C","gtrapprox":"\u2A86","gtrarr":"\u2978","gtrdot":"\u22D7","gtreqless":"\u22DB","gtreqqless":"\u2A8C","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\uFE00","gvnE":"\u2269\uFE00","Hacek":"\u02C7","hairsp":"\u200A","half":"\xBD","hamilt":"\u210B","HARDcy":"\u042A","hardcy":"\u044A","harrcir":"\u2948","harr":"\u2194","hArr":"\u21D4","harrw":"\u21AD","Hat":"^","hbar":"\u210F","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22B9","hfr":"\u{1D525}","Hfr":"\u210C","HilbertSpace":"\u210B","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21FF","homtht":"\u223B","hookleftarrow":"\u21A9","hookrightarrow":"\u21AA","hopf":"\u{1D559}","Hopf":"\u210D","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1D4BD}","Hscr":"\u210B","hslash":"\u210F","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224E","HumpEqual":"\u224F","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xCD","iacute":"\xED","ic":"\u2063","Icirc":"\xCE","icirc":"\xEE","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xA1","iff":"\u21D4","ifr":"\u{1D526}","Ifr":"\u2111","Igrave":"\xCC","igrave":"\xEC","ii":"\u2148","iiiint":"\u2A0C","iiint":"\u222D","iinfin":"\u29DC","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012A","imacr":"\u012B","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22B7","imped":"\u01B5","Implies":"\u21D2","incare":"\u2105","in":"\u2208","infin":"\u221E","infintie":"\u29DD","inodot":"\u0131","intcal":"\u22BA","int":"\u222B","Int":"\u222C","integers":"\u2124","Integral":"\u222B","intercal":"\u22BA","Intersection":"\u22C2","intlarhk":"\u2A17","intprod":"\u2A3C","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012E","iogon":"\u012F","Iopf":"\u{1D540}","iopf":"\u{1D55A}","Iota":"\u0399","iota":"\u03B9","iprod":"\u2A3C","iquest":"\xBF","iscr":"\u{1D4BE}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22F5","isinE":"\u22F9","isins":"\u22F4","isinsv":"\u22F3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xCF","iuml":"\xEF","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1D50D}","jfr":"\u{1D527}","jmath":"\u0237","Jopf":"\u{1D541}","jopf":"\u{1D55B}","Jscr":"\u{1D4A5}","jscr":"\u{1D4BF}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039A","kappa":"\u03BA","kappav":"\u03F0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041A","kcy":"\u043A","Kfr":"\u{1D50E}","kfr":"\u{1D528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040C","kjcy":"\u045C","Kopf":"\u{1D542}","kopf":"\u{1D55C}","Kscr":"\u{1D4A6}","kscr":"\u{1D4C0}","lAarr":"\u21DA","Lacute":"\u0139","lacute":"\u013A","laemptyv":"\u29B4","lagran":"\u2112","Lambda":"\u039B","lambda":"\u03BB","lang":"\u27E8","Lang":"\u27EA","langd":"\u2991","langle":"\u27E8","lap":"\u2A85","Laplacetrf":"\u2112","laquo":"\xAB","larrb":"\u21E4","larrbfs":"\u291F","larr":"\u2190","Larr":"\u219E","lArr":"\u21D0","larrfs":"\u291D","larrhk":"\u21A9","larrlp":"\u21AB","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21A2","latail":"\u2919","lAtail":"\u291B","lat":"\u2AAB","late":"\u2AAD","lates":"\u2AAD\uFE00","lbarr":"\u290C","lBarr":"\u290E","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298B","lbrksld":"\u298F","lbrkslu":"\u298D","Lcaron":"\u013D","lcaron":"\u013E","Lcedil":"\u013B","lcedil":"\u013C","lceil":"\u2308","lcub":"{","Lcy":"\u041B","lcy":"\u043B","ldca":"\u2936","ldquo":"\u201C","ldquor":"\u201E","ldrdhar":"\u2967","ldrushar":"\u294B","ldsh":"\u21B2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27E8","LeftArrowBar":"\u21E4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21D0","LeftArrowRightArrow":"\u21C6","leftarrowtail":"\u21A2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27E6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21C3","LeftFloor":"\u230A","leftharpoondown":"\u21BD","leftharpoonup":"\u21BC","leftleftarrows":"\u21C7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21D4","leftrightarrows":"\u21C6","leftrightharpoons":"\u21CB","leftrightsquigarrow":"\u21AD","LeftRightVector":"\u294E","LeftTeeArrow":"\u21A4","LeftTee":"\u22A3","LeftTeeVector":"\u295A","leftthreetimes":"\u22CB","LeftTriangleBar":"\u29CF","LeftTriangle":"\u22B2","LeftTriangleEqual":"\u22B4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21BF","LeftVectorBar":"\u2952","LeftVector":"\u21BC","lEg":"\u2A8B","leg":"\u22DA","leq":"\u2264","leqq":"\u2266","leqslant":"\u2A7D","lescc":"\u2AA8","les":"\u2A7D","lesdot":"\u2A7F","lesdoto":"\u2A81","lesdotor":"\u2A83","lesg":"\u22DA\uFE00","lesges":"\u2A93","lessapprox":"\u2A85","lessdot":"\u22D6","lesseqgtr":"\u22DA","lesseqqgtr":"\u2A8B","LessEqualGreater":"\u22DA","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2AA1","lesssim":"\u2272","LessSlantEqual":"\u2A7D","LessTilde":"\u2272","lfisht":"\u297C","lfloor":"\u230A","Lfr":"\u{1D50F}","lfr":"\u{1D529}","lg":"\u2276","lgE":"\u2A91","lHar":"\u2962","lhard":"\u21BD","lharu":"\u21BC","lharul":"\u296A","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21C7","ll":"\u226A","Ll":"\u22D8","llcorner":"\u231E","Lleftarrow":"\u21DA","llhard":"\u296B","lltri":"\u25FA","Lmidot":"\u013F","lmidot":"\u0140","lmoustache":"\u23B0","lmoust":"\u23B0","lnap":"\u2A89","lnapprox":"\u2A89","lne":"\u2A87","lnE":"\u2268","lneq":"\u2A87","lneqq":"\u2268","lnsim":"\u22E6","loang":"\u27EC","loarr":"\u21FD","lobrk":"\u27E6","longleftarrow":"\u27F5","LongLeftArrow":"\u27F5","Longleftarrow":"\u27F8","longleftrightarrow":"\u27F7","LongLeftRightArrow":"\u27F7","Longleftrightarrow":"\u27FA","longmapsto":"\u27FC","longrightarrow":"\u27F6","LongRightArrow":"\u27F6","Longrightarrow":"\u27F9","looparrowleft":"\u21AB","looparrowright":"\u21AC","lopar":"\u2985","Lopf":"\u{1D543}","lopf":"\u{1D55D}","loplus":"\u2A2D","lotimes":"\u2A34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25CA","lozenge":"\u25CA","lozf":"\u29EB","lpar":"(","lparlt":"\u2993","lrarr":"\u21C6","lrcorner":"\u231F","lrhar":"\u21CB","lrhard":"\u296D","lrm":"\u200E","lrtri":"\u22BF","lsaquo":"\u2039","lscr":"\u{1D4C1}","Lscr":"\u2112","lsh":"\u21B0","Lsh":"\u21B0","lsim":"\u2272","lsime":"\u2A8D","lsimg":"\u2A8F","lsqb":"[","lsquo":"\u2018","lsquor":"\u201A","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2AA6","ltcir":"\u2A79","lt":"<","LT":"<","Lt":"\u226A","ltdot":"\u22D6","lthree":"\u22CB","ltimes":"\u22C9","ltlarr":"\u2976","ltquest":"\u2A7B","ltri":"\u25C3","ltrie":"\u22B4","ltrif":"\u25C2","ltrPar":"\u2996","lurdshar":"\u294A","luruhar":"\u2966","lvertneqq":"\u2268\uFE00","lvnE":"\u2268\uFE00","macr":"\xAF","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21A6","mapsto":"\u21A6","mapstodown":"\u21A7","mapstoleft":"\u21A4","mapstoup":"\u21A5","marker":"\u25AE","mcomma":"\u2A29","Mcy":"\u041C","mcy":"\u043C","mdash":"\u2014","mDDot":"\u223A","measuredangle":"\u2221","MediumSpace":"\u205F","Mellintrf":"\u2133","Mfr":"\u{1D510}","mfr":"\u{1D52A}","mho":"\u2127","micro":"\xB5","midast":"*","midcir":"\u2AF0","mid":"\u2223","middot":"\xB7","minusb":"\u229F","minus":"\u2212","minusd":"\u2238","minusdu":"\u2A2A","MinusPlus":"\u2213","mlcp":"\u2ADB","mldr":"\u2026","mnplus":"\u2213","models":"\u22A7","Mopf":"\u{1D544}","mopf":"\u{1D55E}","mp":"\u2213","mscr":"\u{1D4C2}","Mscr":"\u2133","mstpos":"\u223E","Mu":"\u039C","mu":"\u03BC","multimap":"\u22B8","mumap":"\u22B8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20D2","nap":"\u2249","napE":"\u2A70\u0338","napid":"\u224B\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266E","naturals":"\u2115","natur":"\u266E","nbsp":"\xA0","nbump":"\u224E\u0338","nbumpe":"\u224F\u0338","ncap":"\u2A43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2A6D\u0338","ncup":"\u2A42","Ncy":"\u041D","ncy":"\u043D","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21D7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200B","NegativeThickSpace":"\u200B","NegativeThinSpace":"\u200B","NegativeVeryThinSpace":"\u200B","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226B","NestedLessLess":"\u226A","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1D511}","nfr":"\u{1D52B}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2A7E\u0338","nges":"\u2A7E\u0338","nGg":"\u22D9\u0338","ngsim":"\u2275","nGt":"\u226B\u20D2","ngt":"\u226F","ngtr":"\u226F","nGtv":"\u226B\u0338","nharr":"\u21AE","nhArr":"\u21CE","nhpar":"\u2AF2","ni":"\u220B","nis":"\u22FC","nisd":"\u22FA","niv":"\u220B","NJcy":"\u040A","njcy":"\u045A","nlarr":"\u219A","nlArr":"\u21CD","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219A","nLeftarrow":"\u21CD","nleftrightarrow":"\u21AE","nLeftrightarrow":"\u21CE","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2A7D\u0338","nles":"\u2A7D\u0338","nless":"\u226E","nLl":"\u22D8\u0338","nlsim":"\u2274","nLt":"\u226A\u20D2","nlt":"\u226E","nltri":"\u22EA","nltrie":"\u22EC","nLtv":"\u226A\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xA0","nopf":"\u{1D55F}","Nopf":"\u2115","Not":"\u2AEC","not":"\xAC","NotCongruent":"\u2262","NotCupCap":"\u226D","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226F","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226B\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2A7E\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224E\u0338","NotHumpEqual":"\u224F\u0338","notin":"\u2209","notindot":"\u22F5\u0338","notinE":"\u22F9\u0338","notinva":"\u2209","notinvb":"\u22F7","notinvc":"\u22F6","NotLeftTriangleBar":"\u29CF\u0338","NotLeftTriangle":"\u22EA","NotLeftTriangleEqual":"\u22EC","NotLess":"\u226E","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226A\u0338","NotLessSlantEqual":"\u2A7D\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2AA2\u0338","NotNestedLessLess":"\u2AA1\u0338","notni":"\u220C","notniva":"\u220C","notnivb":"\u22FE","notnivc":"\u22FD","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2AAF\u0338","NotPrecedesSlantEqual":"\u22E0","NotReverseElement":"\u220C","NotRightTriangleBar":"\u29D0\u0338","NotRightTriangle":"\u22EB","NotRightTriangleEqual":"\u22ED","NotSquareSubset":"\u228F\u0338","NotSquareSubsetEqual":"\u22E2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22E3","NotSubset":"\u2282\u20D2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2AB0\u0338","NotSucceedsSlantEqual":"\u22E1","NotSucceedsTilde":"\u227F\u0338","NotSuperset":"\u2283\u20D2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2AFD\u20E5","npart":"\u2202\u0338","npolint":"\u2A14","npr":"\u2280","nprcue":"\u22E0","nprec":"\u2280","npreceq":"\u2AAF\u0338","npre":"\u2AAF\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219B","nrArr":"\u21CF","nrarrw":"\u219D\u0338","nrightarrow":"\u219B","nRightarrow":"\u21CF","nrtri":"\u22EB","nrtrie":"\u22ED","nsc":"\u2281","nsccue":"\u22E1","nsce":"\u2AB0\u0338","Nscr":"\u{1D4A9}","nscr":"\u{1D4C3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22E2","nsqsupe":"\u22E3","nsub":"\u2284","nsubE":"\u2AC5\u0338","nsube":"\u2288","nsubset":"\u2282\u20D2","nsubseteq":"\u2288","nsubseteqq":"\u2AC5\u0338","nsucc":"\u2281","nsucceq":"\u2AB0\u0338","nsup":"\u2285","nsupE":"\u2AC6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20D2","nsupseteq":"\u2289","nsupseteqq":"\u2AC6\u0338","ntgl":"\u2279","Ntilde":"\xD1","ntilde":"\xF1","ntlg":"\u2278","ntriangleleft":"\u22EA","ntrianglelefteq":"\u22EC","ntriangleright":"\u22EB","ntrianglerighteq":"\u22ED","Nu":"\u039D","nu":"\u03BD","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224D\u20D2","nvdash":"\u22AC","nvDash":"\u22AD","nVdash":"\u22AE","nVDash":"\u22AF","nvge":"\u2265\u20D2","nvgt":">\u20D2","nvHarr":"\u2904","nvinfin":"\u29DE","nvlArr":"\u2902","nvle":"\u2264\u20D2","nvlt":"<\u20D2","nvltrie":"\u22B4\u20D2","nvrArr":"\u2903","nvrtrie":"\u22B5\u20D2","nvsim":"\u223C\u20D2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21D6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xD3","oacute":"\xF3","oast":"\u229B","Ocirc":"\xD4","ocirc":"\xF4","ocir":"\u229A","Ocy":"\u041E","ocy":"\u043E","odash":"\u229D","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2A38","odot":"\u2299","odsold":"\u29BC","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29BF","Ofr":"\u{1D512}","ofr":"\u{1D52C}","ogon":"\u02DB","Ograve":"\xD2","ograve":"\xF2","ogt":"\u29C1","ohbar":"\u29B5","ohm":"\u03A9","oint":"\u222E","olarr":"\u21BA","olcir":"\u29BE","olcross":"\u29BB","oline":"\u203E","olt":"\u29C0","Omacr":"\u014C","omacr":"\u014D","Omega":"\u03A9","omega":"\u03C9","Omicron":"\u039F","omicron":"\u03BF","omid":"\u29B6","ominus":"\u2296","Oopf":"\u{1D546}","oopf":"\u{1D560}","opar":"\u29B7","OpenCurlyDoubleQuote":"\u201C","OpenCurlyQuote":"\u2018","operp":"\u29B9","oplus":"\u2295","orarr":"\u21BB","Or":"\u2A54","or":"\u2228","ord":"\u2A5D","order":"\u2134","orderof":"\u2134","ordf":"\xAA","ordm":"\xBA","origof":"\u22B6","oror":"\u2A56","orslope":"\u2A57","orv":"\u2A5B","oS":"\u24C8","Oscr":"\u{1D4AA}","oscr":"\u2134","Oslash":"\xD8","oslash":"\xF8","osol":"\u2298","Otilde":"\xD5","otilde":"\xF5","otimesas":"\u2A36","Otimes":"\u2A37","otimes":"\u2297","Ouml":"\xD6","ouml":"\xF6","ovbar":"\u233D","OverBar":"\u203E","OverBrace":"\u23DE","OverBracket":"\u23B4","OverParenthesis":"\u23DC","para":"\xB6","parallel":"\u2225","par":"\u2225","parsim":"\u2AF3","parsl":"\u2AFD","part":"\u2202","PartialD":"\u2202","Pcy":"\u041F","pcy":"\u043F","percnt":"%","period":".","permil":"\u2030","perp":"\u22A5","pertenk":"\u2031","Pfr":"\u{1D513}","pfr":"\u{1D52D}","Phi":"\u03A6","phi":"\u03C6","phiv":"\u03D5","phmmat":"\u2133","phone":"\u260E","Pi":"\u03A0","pi":"\u03C0","pitchfork":"\u22D4","piv":"\u03D6","planck":"\u210F","planckh":"\u210E","plankv":"\u210F","plusacir":"\u2A23","plusb":"\u229E","pluscir":"\u2A22","plus":"+","plusdo":"\u2214","plusdu":"\u2A25","pluse":"\u2A72","PlusMinus":"\xB1","plusmn":"\xB1","plussim":"\u2A26","plustwo":"\u2A27","pm":"\xB1","Poincareplane":"\u210C","pointint":"\u2A15","popf":"\u{1D561}","Popf":"\u2119","pound":"\xA3","prap":"\u2AB7","Pr":"\u2ABB","pr":"\u227A","prcue":"\u227C","precapprox":"\u2AB7","prec":"\u227A","preccurlyeq":"\u227C","Precedes":"\u227A","PrecedesEqual":"\u2AAF","PrecedesSlantEqual":"\u227C","PrecedesTilde":"\u227E","preceq":"\u2AAF","precnapprox":"\u2AB9","precneqq":"\u2AB5","precnsim":"\u22E8","pre":"\u2AAF","prE":"\u2AB3","precsim":"\u227E","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2AB9","prnE":"\u2AB5","prnsim":"\u22E8","prod":"\u220F","Product":"\u220F","profalar":"\u232E","profline":"\u2312","profsurf":"\u2313","prop":"\u221D","Proportional":"\u221D","Proportion":"\u2237","propto":"\u221D","prsim":"\u227E","prurel":"\u22B0","Pscr":"\u{1D4AB}","pscr":"\u{1D4C5}","Psi":"\u03A8","psi":"\u03C8","puncsp":"\u2008","Qfr":"\u{1D514}","qfr":"\u{1D52E}","qint":"\u2A0C","qopf":"\u{1D562}","Qopf":"\u211A","qprime":"\u2057","Qscr":"\u{1D4AC}","qscr":"\u{1D4C6}","quaternions":"\u210D","quatint":"\u2A16","quest":"?","questeq":"\u225F","quot":"\\"","QUOT":"\\"","rAarr":"\u21DB","race":"\u223D\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221A","raemptyv":"\u29B3","rang":"\u27E9","Rang":"\u27EB","rangd":"\u2992","range":"\u29A5","rangle":"\u27E9","raquo":"\xBB","rarrap":"\u2975","rarrb":"\u21E5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21A0","rArr":"\u21D2","rarrfs":"\u291E","rarrhk":"\u21AA","rarrlp":"\u21AC","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21A3","rarrw":"\u219D","ratail":"\u291A","rAtail":"\u291C","ratio":"\u2236","rationals":"\u211A","rbarr":"\u290D","rBarr":"\u290F","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298C","rbrksld":"\u298E","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201D","rdquor":"\u201D","rdsh":"\u21B3","real":"\u211C","realine":"\u211B","realpart":"\u211C","reals":"\u211D","Re":"\u211C","rect":"\u25AD","reg":"\xAE","REG":"\xAE","ReverseElement":"\u220B","ReverseEquilibrium":"\u21CB","ReverseUpEquilibrium":"\u296F","rfisht":"\u297D","rfloor":"\u230B","rfr":"\u{1D52F}","Rfr":"\u211C","rHar":"\u2964","rhard":"\u21C1","rharu":"\u21C0","rharul":"\u296C","Rho":"\u03A1","rho":"\u03C1","rhov":"\u03F1","RightAngleBracket":"\u27E9","RightArrowBar":"\u21E5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21D2","RightArrowLeftArrow":"\u21C4","rightarrowtail":"\u21A3","RightCeiling":"\u2309","RightDoubleBracket":"\u27E7","RightDownTeeVector":"\u295D","RightDownVectorBar":"\u2955","RightDownVector":"\u21C2","RightFloor":"\u230B","rightharpoondown":"\u21C1","rightharpoonup":"\u21C0","rightleftarrows":"\u21C4","rightleftharpoons":"\u21CC","rightrightarrows":"\u21C9","rightsquigarrow":"\u219D","RightTeeArrow":"\u21A6","RightTee":"\u22A2","RightTeeVector":"\u295B","rightthreetimes":"\u22CC","RightTriangleBar":"\u29D0","RightTriangle":"\u22B3","RightTriangleEqual":"\u22B5","RightUpDownVector":"\u294F","RightUpTeeVector":"\u295C","RightUpVectorBar":"\u2954","RightUpVector":"\u21BE","RightVectorBar":"\u2953","RightVector":"\u21C0","ring":"\u02DA","risingdotseq":"\u2253","rlarr":"\u21C4","rlhar":"\u21CC","rlm":"\u200F","rmoustache":"\u23B1","rmoust":"\u23B1","rnmid":"\u2AEE","roang":"\u27ED","roarr":"\u21FE","robrk":"\u27E7","ropar":"\u2986","ropf":"\u{1D563}","Ropf":"\u211D","roplus":"\u2A2E","rotimes":"\u2A35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2A12","rrarr":"\u21C9","Rrightarrow":"\u21DB","rsaquo":"\u203A","rscr":"\u{1D4C7}","Rscr":"\u211B","rsh":"\u21B1","Rsh":"\u21B1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22CC","rtimes":"\u22CA","rtri":"\u25B9","rtrie":"\u22B5","rtrif":"\u25B8","rtriltri":"\u29CE","RuleDelayed":"\u29F4","ruluhar":"\u2968","rx":"\u211E","Sacute":"\u015A","sacute":"\u015B","sbquo":"\u201A","scap":"\u2AB8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2ABC","sc":"\u227B","sccue":"\u227D","sce":"\u2AB0","scE":"\u2AB4","Scedil":"\u015E","scedil":"\u015F","Scirc":"\u015C","scirc":"\u015D","scnap":"\u2ABA","scnE":"\u2AB6","scnsim":"\u22E9","scpolint":"\u2A13","scsim":"\u227F","Scy":"\u0421","scy":"\u0441","sdotb":"\u22A1","sdot":"\u22C5","sdote":"\u2A66","searhk":"\u2925","searr":"\u2198","seArr":"\u21D8","searrow":"\u2198","sect":"\xA7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1D516}","sfr":"\u{1D530}","sfrown":"\u2322","sharp":"\u266F","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xAD","Sigma":"\u03A3","sigma":"\u03C3","sigmaf":"\u03C2","sigmav":"\u03C2","sim":"\u223C","simdot":"\u2A6A","sime":"\u2243","simeq":"\u2243","simg":"\u2A9E","simgE":"\u2AA0","siml":"\u2A9D","simlE":"\u2A9F","simne":"\u2246","simplus":"\u2A24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2A33","smeparsl":"\u29E4","smid":"\u2223","smile":"\u2323","smt":"\u2AAA","smte":"\u2AAC","smtes":"\u2AAC\uFE00","SOFTcy":"\u042C","softcy":"\u044C","solbar":"\u233F","solb":"\u29C4","sol":"/","Sopf":"\u{1D54A}","sopf":"\u{1D564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\uFE00","sqcup":"\u2294","sqcups":"\u2294\uFE00","Sqrt":"\u221A","sqsub":"\u228F","sqsube":"\u2291","sqsubset":"\u228F","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25A1","Square":"\u25A1","SquareIntersection":"\u2293","SquareSubset":"\u228F","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25AA","squ":"\u25A1","squf":"\u25AA","srarr":"\u2192","Sscr":"\u{1D4AE}","sscr":"\u{1D4C8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22C6","Star":"\u22C6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03F5","straightphi":"\u03D5","strns":"\xAF","sub":"\u2282","Sub":"\u22D0","subdot":"\u2ABD","subE":"\u2AC5","sube":"\u2286","subedot":"\u2AC3","submult":"\u2AC1","subnE":"\u2ACB","subne":"\u228A","subplus":"\u2ABF","subrarr":"\u2979","subset":"\u2282","Subset":"\u22D0","subseteq":"\u2286","subseteqq":"\u2AC5","SubsetEqual":"\u2286","subsetneq":"\u228A","subsetneqq":"\u2ACB","subsim":"\u2AC7","subsub":"\u2AD5","subsup":"\u2AD3","succapprox":"\u2AB8","succ":"\u227B","succcurlyeq":"\u227D","Succeeds":"\u227B","SucceedsEqual":"\u2AB0","SucceedsSlantEqual":"\u227D","SucceedsTilde":"\u227F","succeq":"\u2AB0","succnapprox":"\u2ABA","succneqq":"\u2AB6","succnsim":"\u22E9","succsim":"\u227F","SuchThat":"\u220B","sum":"\u2211","Sum":"\u2211","sung":"\u266A","sup1":"\xB9","sup2":"\xB2","sup3":"\xB3","sup":"\u2283","Sup":"\u22D1","supdot":"\u2ABE","supdsub":"\u2AD8","supE":"\u2AC6","supe":"\u2287","supedot":"\u2AC4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27C9","suphsub":"\u2AD7","suplarr":"\u297B","supmult":"\u2AC2","supnE":"\u2ACC","supne":"\u228B","supplus":"\u2AC0","supset":"\u2283","Supset":"\u22D1","supseteq":"\u2287","supseteqq":"\u2AC6","supsetneq":"\u228B","supsetneqq":"\u2ACC","supsim":"\u2AC8","supsub":"\u2AD4","supsup":"\u2AD6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21D9","swarrow":"\u2199","swnwar":"\u292A","szlig":"\xDF","Tab":"\\t","target":"\u2316","Tau":"\u03A4","tau":"\u03C4","tbrk":"\u23B4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20DB","telrec":"\u2315","Tfr":"\u{1D517}","tfr":"\u{1D531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03B8","thetasym":"\u03D1","thetav":"\u03D1","thickapprox":"\u2248","thicksim":"\u223C","ThickSpace":"\u205F\u200A","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223C","THORN":"\xDE","thorn":"\xFE","tilde":"\u02DC","Tilde":"\u223C","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2A31","timesb":"\u22A0","times":"\xD7","timesd":"\u2A30","tint":"\u222D","toea":"\u2928","topbot":"\u2336","topcir":"\u2AF1","top":"\u22A4","Topf":"\u{1D54B}","topf":"\u{1D565}","topfork":"\u2ADA","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25B5","triangledown":"\u25BF","triangleleft":"\u25C3","trianglelefteq":"\u22B4","triangleq":"\u225C","triangleright":"\u25B9","trianglerighteq":"\u22B5","tridot":"\u25EC","trie":"\u225C","triminus":"\u2A3A","TripleDot":"\u20DB","triplus":"\u2A39","trisb":"\u29CD","tritime":"\u2A3B","trpezium":"\u23E2","Tscr":"\u{1D4AF}","tscr":"\u{1D4C9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040B","tshcy":"\u045B","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226C","twoheadleftarrow":"\u219E","twoheadrightarrow":"\u21A0","Uacute":"\xDA","uacute":"\xFA","uarr":"\u2191","Uarr":"\u219F","uArr":"\u21D1","Uarrocir":"\u2949","Ubrcy":"\u040E","ubrcy":"\u045E","Ubreve":"\u016C","ubreve":"\u016D","Ucirc":"\xDB","ucirc":"\xFB","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21C5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296E","ufisht":"\u297E","Ufr":"\u{1D518}","ufr":"\u{1D532}","Ugrave":"\xD9","ugrave":"\xF9","uHar":"\u2963","uharl":"\u21BF","uharr":"\u21BE","uhblk":"\u2580","ulcorn":"\u231C","ulcorner":"\u231C","ulcrop":"\u230F","ultri":"\u25F8","Umacr":"\u016A","umacr":"\u016B","uml":"\xA8","UnderBar":"_","UnderBrace":"\u23DF","UnderBracket":"\u23B5","UnderParenthesis":"\u23DD","Union":"\u22C3","UnionPlus":"\u228E","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1D54C}","uopf":"\u{1D566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21D1","UpArrowDownArrow":"\u21C5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21D5","UpEquilibrium":"\u296E","upharpoonleft":"\u21BF","upharpoonright":"\u21BE","uplus":"\u228E","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03C5","Upsi":"\u03D2","upsih":"\u03D2","Upsilon":"\u03A5","upsilon":"\u03C5","UpTeeArrow":"\u21A5","UpTee":"\u22A5","upuparrows":"\u21C8","urcorn":"\u231D","urcorner":"\u231D","urcrop":"\u230E","Uring":"\u016E","uring":"\u016F","urtri":"\u25F9","Uscr":"\u{1D4B0}","uscr":"\u{1D4CA}","utdot":"\u22F0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25B5","utrif":"\u25B4","uuarr":"\u21C8","Uuml":"\xDC","uuml":"\xFC","uwangle":"\u29A7","vangrt":"\u299C","varepsilon":"\u03F5","varkappa":"\u03F0","varnothing":"\u2205","varphi":"\u03D5","varpi":"\u03D6","varpropto":"\u221D","varr":"\u2195","vArr":"\u21D5","varrho":"\u03F1","varsigma":"\u03C2","varsubsetneq":"\u228A\uFE00","varsubsetneqq":"\u2ACB\uFE00","varsupsetneq":"\u228B\uFE00","varsupsetneqq":"\u2ACC\uFE00","vartheta":"\u03D1","vartriangleleft":"\u22B2","vartriangleright":"\u22B3","vBar":"\u2AE8","Vbar":"\u2AEB","vBarv":"\u2AE9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22A2","vDash":"\u22A8","Vdash":"\u22A9","VDash":"\u22AB","Vdashl":"\u2AE6","veebar":"\u22BB","vee":"\u2228","Vee":"\u22C1","veeeq":"\u225A","vellip":"\u22EE","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200A","Vfr":"\u{1D519}","vfr":"\u{1D533}","vltri":"\u22B2","vnsub":"\u2282\u20D2","vnsup":"\u2283\u20D2","Vopf":"\u{1D54D}","vopf":"\u{1D567}","vprop":"\u221D","vrtri":"\u22B3","Vscr":"\u{1D4B1}","vscr":"\u{1D4CB}","vsubnE":"\u2ACB\uFE00","vsubne":"\u228A\uFE00","vsupnE":"\u2ACC\uFE00","vsupne":"\u228B\uFE00","Vvdash":"\u22AA","vzigzag":"\u299A","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2A5F","wedge":"\u2227","Wedge":"\u22C0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1D51A}","wfr":"\u{1D534}","Wopf":"\u{1D54E}","wopf":"\u{1D568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1D4B2}","wscr":"\u{1D4CC}","xcap":"\u22C2","xcirc":"\u25EF","xcup":"\u22C3","xdtri":"\u25BD","Xfr":"\u{1D51B}","xfr":"\u{1D535}","xharr":"\u27F7","xhArr":"\u27FA","Xi":"\u039E","xi":"\u03BE","xlarr":"\u27F5","xlArr":"\u27F8","xmap":"\u27FC","xnis":"\u22FB","xodot":"\u2A00","Xopf":"\u{1D54F}","xopf":"\u{1D569}","xoplus":"\u2A01","xotime":"\u2A02","xrarr":"\u27F6","xrArr":"\u27F9","Xscr":"\u{1D4B3}","xscr":"\u{1D4CD}","xsqcup":"\u2A06","xuplus":"\u2A04","xutri":"\u25B3","xvee":"\u22C1","xwedge":"\u22C0","Yacute":"\xDD","yacute":"\xFD","YAcy":"\u042F","yacy":"\u044F","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042B","ycy":"\u044B","yen":"\xA5","Yfr":"\u{1D51C}","yfr":"\u{1D536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1D550}","yopf":"\u{1D56A}","Yscr":"\u{1D4B4}","yscr":"\u{1D4CE}","YUcy":"\u042E","yucy":"\u044E","yuml":"\xFF","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017A","Zcaron":"\u017D","zcaron":"\u017E","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017B","zdot":"\u017C","zeetrf":"\u2128","ZeroWidthSpace":"\u200B","Zeta":"\u0396","zeta":"\u03B6","zfr":"\u{1D537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21DD","zopf":"\u{1D56B}","Zopf":"\u2124","Zscr":"\u{1D4B5}","zscr":"\u{1D4CF}","zwj":"\u200D","zwnj":"\u200C"}')}}]);
