"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[3155],{44864:function(){},63565:function(y,l,i){var u=i(79023),h=i.n(u),w=i(39733),g=i(81602),I=i(95982),m=i(40321),p=(0,w.d)("image"),v=p[0],c=p[1];l.Z=v({props:{src:String,fit:String,alt:String,round:Boolean,width:[Number,String],height:[Number,String],radius:[Number,String],lazyLoad:Boolean,iconPrefix:String,showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},errorIcon:{type:String,default:"photo-fail"},loadingIcon:{type:String,default:"photo"}},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{style:function(){var e={};return(0,g.Xq)(this.width)&&(e.width=(0,I.N)(this.width)),(0,g.Xq)(this.height)&&(e.height=(0,I.N)(this.height)),(0,g.Xq)(this.radius)&&(e.overflow="hidden",e.borderRadius=(0,I.N)(this.radius)),e}},created:function(){var e=this.$Lazyload;e&&g._f&&(e.$on("loaded",this.onLazyLoaded),e.$on("error",this.onLazyLoadError))},beforeDestroy:function(){var e=this.$Lazyload;e&&(e.$off("loaded",this.onLazyLoaded),e.$off("error",this.onLazyLoadError))},methods:{onLoad:function(e){this.loading=!1,this.$emit("load",e)},onLazyLoaded:function(e){var f=e.el;f===this.$refs.image&&this.loading&&this.onLoad()},onLazyLoadError:function(e){var f=e.el;f===this.$refs.image&&!this.error&&this.onError()},onError:function(e){this.error=!0,this.loading=!1,this.$emit("error",e)},onClick:function(e){this.$emit("click",e)},genPlaceholder:function(){var e=this.$createElement;if(this.loading&&this.showLoading)return e("div",{class:c("loading")},[this.slots("loading")||e(m.Z,{attrs:{name:this.loadingIcon,classPrefix:this.iconPrefix},class:c("loading-icon")})]);if(this.error&&this.showError)return e("div",{class:c("error")},[this.slots("error")||e(m.Z,{attrs:{name:this.errorIcon,classPrefix:this.iconPrefix},class:c("error-icon")})])},genImage:function(){var e=this.$createElement,f={class:c("img"),attrs:{alt:this.alt},style:{objectFit:this.fit}};if(!this.error)return this.lazyLoad?e("img",h()([{ref:"image",directives:[{name:"lazy",value:this.src}]},f])):e("img",h()([{attrs:{src:this.src},on:{load:this.onLoad,error:this.onError}},f]))}},render:function(){var e=arguments[0];return e("div",{class:c({round:this.round}),style:this.style,on:{click:this.onClick}},[this.genImage(),this.genPlaceholder(),this.slots()])}})},95795:function(y,l,i){var u=i(86569),h=i(91905),w=i(51595),g=i(44864)},72965:function(y,l,i){i.r(l),i.d(l,{default:function(){return A}});var u=function(){var t=this,s=t._self._c;return s("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[s("hide-button",{attrs:{attr:t.widgetInfo.attr}}),s("swipe",{ref:"swipe",style:{height:t.widgetInfo.attr.hh+"px"},attrs:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",autoplay:t.widgetInfo.config.base.autoplay,duration:t.widgetInfo.config.base.duration,"initial-swipe":t.widgetInfo.config.base.initialSwipe-1,loop:t.widgetInfo.config.base.loop,"show-indicators":t.widgetInfo.config.base.showIndicators,vertical:t.widgetInfo.config.base.vertical,touchable:t.widgetInfo.config.base.touchable},on:{change:t.itemChange},scopedSlots:t._u([t.widgetInfo.config.base.showIndicators?{key:"indicator",fn:function(){return[t.widgetInfo.config.base.indicatorType==="number"?s("div",{staticClass:"custom-indicator",style:{width:t.widgetInfo.attr.w+"px",zIndex:1e4,textAlign:t.widgetInfo.config.base.indicatorPosition,position:"absolute",bottom:t.widgetInfo.config.base.bottom+"px",fontSize:t.widgetInfo.config.number.fontSize+"px",transform:t.widgetInfo.config.base.vertical?`
            translate(-${t.widgetInfo.attr.w/2-t.widgetInfo.config.base.bottom-t.customIndicatorHeight/2}px, -${t.widgetInfo.attr.hh/2-t.widgetInfo.config.base.bottom}px)
            rotate(90deg)
            `:"none"}},[s("span",[s("span",{style:{color:t.widgetInfo.config.base.indicatorColor}},[t._v(t._s(t.currentIndex+1))]),s("span",{style:{color:t.widgetInfo.config.base.indicatorBg}},[t._v("/"+t._s(t.itemList.length))])])]):t._e(),t.widgetInfo.config.base.indicatorType==="rect"?s("div",{staticClass:"custom-indicator",style:{width:t.widgetInfo.attr.w+"px",zIndex:1e4,textAlign:t.widgetInfo.config.base.indicatorPosition,position:"absolute",bottom:t.widgetInfo.config.base.bottom+"px",transform:t.widgetInfo.config.base.vertical?`
            translate(-${t.widgetInfo.attr.w/2-t.widgetInfo.config.base.bottom-t.customIndicatorHeight/2}px, -${t.widgetInfo.attr.hh/2-t.widgetInfo.config.base.bottom}px)
            rotate(90deg)
            `:"none"}},t._l(t.itemList,function(o,a){return s("div",{key:o.url,style:{display:"inline-block",width:a===t.currentIndex?2*t.widgetInfo.config.rect.width+"px":t.widgetInfo.config.rect.width+"px",height:t.widgetInfo.config.rect.height+"px",marginLeft:t.widgetInfo.config.base.indicatorGap+"px",background:a===t.currentIndex?t.widgetInfo.config.base.indicatorColor:t.widgetInfo.config.base.indicatorBg}})}),0):t._e(),t.widgetInfo.config.base.indicatorType==="dot"?s("div",{staticClass:"custom-indicator",style:{width:t.widgetInfo.attr.w+"px",zIndex:1e4,textAlign:t.widgetInfo.config.base.indicatorPosition,position:"absolute",bottom:t.widgetInfo.config.base.bottom+"px",transform:t.widgetInfo.config.base.vertical?`
            translate(-${t.widgetInfo.attr.w/2-t.widgetInfo.config.base.bottom-t.customIndicatorHeight/2}px, -${t.widgetInfo.attr.hh/2-t.widgetInfo.config.base.bottom}px)
            rotate(90deg)
            `:"none"}},t._l(t.itemList,function(o,a){return s("div",{key:o.url,style:{display:"inline-block",width:t.widgetInfo.config.dot.size+"px",height:t.widgetInfo.config.dot.size+"px",marginLeft:t.widgetInfo.config.base.indicatorGap+"px",borderRadius:"50%",background:a===t.currentIndex?t.widgetInfo.config.base.indicatorColor:t.widgetInfo.config.base.indicatorBg}})}),0):t._e()]},proxy:!0}:null],null,!0)},t._l(t.itemList,function(o,a){return s("swipe-item",{key:o.url,style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"},on:{click:function(r){return t.clickItem(a)}}},[s("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[s("van-image",{attrs:{src:o.url,alt:o.desc,fit:t.widgetInfo.config.base.fit,width:"100%",height:"100%"}}),s("span",{class:`${t.widgetInfo.config.item.descPoi==="left"?"desc-left":"desc-right"}`,style:{position:"absolute",fontSize:t.widgetInfo.config.item.descFontStyle.fontSize+"px",color:t.widgetInfo.config.item.descFontStyle.color,fontWeight:t.widgetInfo.config.item.descFontStyle.fontWeight,fontStyle:t.widgetInfo.config.item.descFontStyle.fontStyle,textDecoration:t.widgetInfo.config.item.descFontStyle.textDecoration}},[t._v(t._s(o.desc))])],1)])}),1)],1)},h=[],w=i(95795),g=i(63565),I=i(24978),m=i(46366),p=i(26427),v=i(9114),c=i(27966),d=i(75224),e=i(67157);const f={mixins:[e.c],data(){return{config_extend:{config:{item:{descFontStyle:{fontFamily:"alibabaPuHuiTiRegular"}}}},filter_config:{base:{indicatorColor:"#4C84FF",indicatorBg:"rgba(255, 255, 255, 0.5)"},item:{descFontStyle:{color:"#616266"}}}}},methods:{filterPredefineColoursSchemeConfig(n,t){this.getNewConfigWithArrary(n,t,this.filter_config)}}};var x=i(23400),L=i(45061),E=i(86892),$=i(26711),P=i(56279),S=i(44513),C=i(21300),_=i(48836),z=i(55616),D=i(49500),T={name:"display-picture-swipe",props:["widgetInfo"],components:{SwipeItem:v.Z,Swipe:m.Z,HideButton:S.Z,VanImage:g.Z},mixins:[d.u,f,L.u,x.j,E.D,$.H,P.P],data(){return{itemList:[],currentIndex:"",customIndicatorHeight:0}},computed:{...(0,_.Se)(["getCanvasSetting","isView"])},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)},"widgetInfo.attr.w":function(){this.$nextTick(()=>{this.$refs.swipe.resize()})},itemList:function(n){const t=this.widgetInfo.config.base.initialSwipe>n.length?n.length-1:this.widgetInfo.config.base.initialSwipe-1;this.$refs.swipe.swipeTo(t)},"widgetInfo.config.base.vertical":function(){this.$nextTick(()=>{this.$refs.swipe.resize()})},"widgetInfo.attr.hh":function(){this.$nextTick(()=>{this.$refs.swipe.resize()})},"widgetInfo.config.base.indicatorType":function(){this.setIndicatorHeight()},"widgetInfo.config.base.bottom":function(){this.setIndicatorHeight()}},methods:{itemChange(n){this.currentIndex=n},loadInfo(n){this.currentIndex=this.widgetInfo.config.base.initialSwipe,this.getItemList(n),this.lifecycleAfterLoad()},reLoadInfo(n){this.loadInfo(n)},getItemList(n){let t=n.dataset[n.dataset.type].encode,s={};Object.keys(t).forEach(o=>{s[o]=n.dataset[n.dataset.type].dimensions.findIndex(a=>a===t[o])}),this.itemList=n.dataset[n.dataset.type].source.map(o=>{let a={};return Object.keys(s).forEach(r=>{r==="url"&&n.dataset[n.dataset.type].srcType==="url"?a[r]=C.appendImageBaseURL(o[s[r]]):a[r]=o[s[r]]}),a})},initAction(n){this.actionReceive(n)},clickItem(n){let t=this,s=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(s,o=>{if(o.enabled&&o.code==t.$$global_editor.actionType.click.code){let a=t.$$global_editor.actionType.click.code+"_"+t.widgetInfo.id,r={index:n};if(o.paramsExtend&&o.paramsExtend.length>0&&this.getExtendParams(r,o.paramsExtend),o.script&&o.script.enabled){if(D.log("Execute script for "+this.widgetInfo.name+" component to "+o.name+" component"),o.script.content==""){z.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",o.script.content),r=this.customScript(r)}c.Z.$emit(a,r),o.postMessage&&this.doPostMessage(r),this.actionNameList.push(a)}else if(o.enabled&&o.code===t.$$global_editor.actionType.openLink.code){let a={},r={index:n};if(o.paramsExtend&&o.paramsExtend.length>0){let b=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(b=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[t.index]),this.getExtendParams(a,o.paramsExtend,b,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}this.openLinkAction(o,a,r)}})},setIndicatorHeight(){this.customIndicatorHeight=this.$el.querySelectorAll(".custom-indicator")[0].offsetHeight}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo),this.$nextTick(()=>{this.setIndicatorHeight()})}},M=T,O=i(68141),B=(0,O.Z)(M,u,h,!1,null,"4b0bfb02",null),A=B.exports}}]);
