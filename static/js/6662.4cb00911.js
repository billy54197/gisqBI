"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[6662],{56279:function(L,h,n){n.d(h,{P:function(){return w}});var m=n(86892),g=n(49500);const w={mixins:[m.D],created(){},methods:{lifecycleBeforeChartsLoad(f){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&g.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),g.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let p=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[f]);if(p)return p}return f},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&g.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),g.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},80512:function(L,h,n){n.d(h,{Z:function(){return C}});var m=function(){var o=this,y=o._self._c;return y("div",{class:"container_child_"+o.widgetData.id,attrs:{id:"container_child_"+o.widgetData.id}},[y("keep-alive",[y(o.isView&&o.widgetData.isContainer?o.widgetData.typeName+"-view":o.widgetData.typeName,{ref:"com_"+o.widgetData.id,tag:"component",attrs:{"widget-info":o.widgetData,"widget-arr":o.getWidgetAllArr,"current-widget":o.currentWidget},on:{doGetPreviewData:o.doGetPreviewData,doReSetBoardId:o.doReSetBoardId,attrChange:o.attrChange}})],1)],1)},g=[],w=n(13229),f=n(48836),S={name:"DraggableComponent",extends:w.Z,computed:{...(0,f.Se)(["getWidgetAllArr","isView"])},methods:{reLoadInfo(l){if(l.id){let o=this.$refs["com_"+l.id];o&&o.reLoadInfo(l)}},doReSetBoardId(l){this.$emit("doReSetBoardId",l)},attrChange(l){this.$emit("attrChange",l)}}},p=S,W=n(68141),D=(0,W.Z)(p,m,g,!1,null,"41d16aa2",null),C=D.exports},74289:function(L,h,n){n.r(h),n.d(h,{default:function(){return Z}});var m=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],staticClass:"vue-grid-container",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px",overflow:e.widgetInfo.config.scroll?"visible":"hidden"},on:{click:e.onClick}},[i("hide-button",{attrs:{attr:e.widgetInfo.attr}}),i("splitpanes",{ref:"splitpanes",staticClass:"default-theme",attrs:{"splitter-style":e.widgetInfo.config.splitterStyle,horizontal:e.widgetInfo.config.pane.d=="h"},on:{resized:e.onSplitMoved}},e._l(e.widgetInfo.config.pane.children,function(r,d){return i("pane",{key:d,ref:"pane_"+d,refInFor:!0,attrs:{size:r.s}},e._l(e.orgWidget(r.widgets),function(t){return i("draggable",{key:e.prefix.widget+t.id,ref:e.prefix.widget+t.id,refInFor:!0,attrs:{id:e.prefix.widget+t.id,rotatable:!0,resizable:!t.attr.locked,draggable:!t.attr.locked,snap:!0,x:t.attr.x,y:t.attr.y,z:e.getZ(t),r:t.attr.deg,h:t.attr.h,w:t.attr.widgetW?t.attr.widgetW:t.attr.w,minw:t.attr.minw,minh:t.attr.minh,"deselect-cancel":".unboardArea",active:e.onActive(t)},on:{onClicked:e.onClicked,dragstop:e.onDragstop,dragging:e.dragging,resizestop:e.onResizstop,rotatestop:e.onRotatestop,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}},[i("widget-action-icon",{attrs:{widget:t}}),i("div",{style:e.getDraggableMouseOver(t)}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:e.getDraggableStyle(t)},[i("external-frame-svg",{ref:"comp_frame_"+t.id,refInFor:!0,attrs:{"widget-info":t}}),t.title.position==="top"||t.title.position==="left"?i("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(t),on:{click:function(c){return e.openLink(t)}}},[i("div",{style:{marginLeft:t.title.label.left+"px",marginTop:t.title.label.top+"px"}},[i("span",{ref:"title_"+t.id,refInFor:!0,style:e.getTitleSpanStyle(t)})])]):e._e(),i("draggable-component-container",{ref:"comp_"+t.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:e.getInfoStyle(t),attrs:{"widget-data":t,"current-widget":e.getCurrentWidget}}),t.title.position==="bottom"||t.title.position==="right"?i("div",{staticStyle:{overflow:"hidden",float:"left"},style:e.getWidgetTitleStyle(t),on:{click:function(c){return e.openLink(t)}}},[i("div",{style:{marginLeft:t.title.label.left+"px",marginTop:t.title.label.top+"px"}},[i("span",{ref:"title_"+t.id,refInFor:!0,style:e.getTitleSpanStyle(t)})])]):e._e()],1)],1)}),1)}),1)],1)},g=[],w=n(46207),f=n(80512),S=n(13229),p=n(23400),W=n(83577),D=n(61174),C=n(48836),l=n(68530),o=n(27966),y=n(1783),x=n(44513),b=n(56279),A=n(29466),v=n(49500),M={name:"ContainerSplit",components:{WidgetActionIcon:A.Z,ExternalFrameSvg:y.Z,Pane:l.X,Splitpanes:l.F,draggable:w.Z,DraggableComponentContainer:f.Z,HideButton:x.Z},extends:S.Z,mixins:[D.u,p.j,W.i,b.P],props:["widgetInfo","widgetArr","currentWidget"],computed:{...(0,C.Se)(["getCopyWidgetList","getCanvasSetting","getApplication","getWidgetAllArr","getSelectMultiple"]),gridWidgets(){let a=this.widgetInfo.config.widgets,e=[];for(let i=0;i<a.length;++i)e.push({grid:a[i],widgetData:this.widgetArr.find(r=>r.id==a[i].widget)});return e},widgetsList(){return this.orgWidget(this.widgetInfo.config.widgets)},myPanes(){}},data(){return{myPane:[{},{}],layout:{d:"h",w:"",h:"",panes:[{d:"v"}]}}},watch:{getCurrentWidget:{deep:!0,handler:function(){this.$nextTick(()=>{this.setTitleText("widgets",this.widgetInfo.config.pane.children)})}}},mounted(){o.Z.$emit("register-save-event",{widget:this,handler:this.onSaved}),this.loadInfo(this.widgetInfo)},methods:{...(0,C.nv)(["updateWidgetInfoById"]),onSaved(){let a=this.getWidgetAllArr.find(e=>e.id==this.widgetInfo.id);if(a){let e=a.config.pane.children;for(let i in this.$refs)if(i.indexOf("pane_")>-1){let r=this.$refs[i][0].$el.clientHeight,d=this.$refs[i][0].$el.clientWidth,t=i.split("_")[1]-0,c=e[t];if(c.widgets&&c.widgets.length>0)for(let I=0;I<c.widgets.length;++I){let s=c.widgets[I],u=this.getWidgets[s.id];s.x=u.attr.x/d,s.w=u.attr.w/d,s.widgetW=u.attr.widgetW/d,s.y=u.attr.y/r,s.h=u.attr.h/r,s.hh=u.attr.hh/r}}this.updateWidgetInfoById(JSON.parse(JSON.stringify(a)))}},onSplitMoved(a){let e=this.widgetInfo.config.pane.children;for(let i=a.length-1;i>-1;--i)e[i].s=a[i].size},onResizeConfig(a){v.log("onResizeConfig:",a)},resize(){v.log("resize: container-split")},itemClick(a){v.log("item click"),v.log(a)},itemMoved(a,e,i){v.log("MOVED i="+a+", X="+e+", Y="+i)},itemResize(a,e,i,r,d){let t=this.gridWidgets.find(c=>c.grid.i==a);if(t){let c=t.widgetData.attr.h-t.widgetData.attr.hh;t.widgetData.attr.h=r,t.widgetData.attr.hh=r-c;let I=t.widgetData.attr.w-t.widgetData.attr.widgetW;t.widgetData.attr.w=d,t.widgetData.attr.widgetW=d-I;let s=this.$refs["com_"+t.widgetData.id];s&&s.length>0&&s[0].reLoadInfo(t.widgetData)}v.log("RESIZED i="+a+", H="+e+", W="+i+", H(px)="+r+", W(px)="+d)},loadInfo(a){this.lifecycleAfterLoad()},onClick(a){typeof a.target.className=="string"&&a.target.className.indexOf("my-screen")>-1&&(this.getKeydown.ctrlKey?(this.setSelectMultiple(!0),this.getMultipleWidget[this.widgetInfo.id]?this.removeMultipleWidget(this.widgetInfo.id):(this.$$lib__.each(this.widgetInfo.config.widgets,e=>{this.removeMultipleWidget(e.id)}),this.addMultipleWidget(this.widgetInfo.id))):this.setCurrentWidget(this.widgetInfo.id))},onHide(){this.widgetInfo.attr.hide=!0}}},z=M,$=n(68141),R=(0,$.Z)(z,m,g,!1,null,"f1e14336",null),Z=R.exports}}]);
