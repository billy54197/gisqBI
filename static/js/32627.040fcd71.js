"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[32627],{932627:function(j,h,o){o.r(h),o.d(h,{default:function(){return H}});var y=function(){var i=this,n=i._self._c;return n("div",[n("hide-button",{attrs:{attr:i.widgetInfo.attr}}),n("div",{ref:"comLiquidFill",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"}})],1)},S=[],b=o(927966),w=o(844513),I=o(445061),F=o(126711),N=o(56279),x=o(852290),C=o(99349),V=o(796896),O=o(555616),A=o(67157),p=o(150813);const J={mixins:[A.c],data(){return{config_extend:{},filter_config:{title:JSON.parse(JSON.stringify(p.Z.charts.title)),tooltip:JSON.parse(JSON.stringify(p.Z.charts.tooltip)),series:{liquidFill:{color:["rgba(63, 214, 223, 0.8)"],itemStyle:{shadowColor:"rgba(0, 0, 0, 0.4)"},backgroundStyle:{borderColor:"rgba(76, 132, 255, 1)",color:"rgba(219, 230, 255, 1)"},outline:{itemStyle:{borderColor:"rgba(76, 132, 255, 1)"}},label:{insideColor:"#fff",color:"rgba(76, 132, 255, 1)",fontFamily:"alibabaPuHuiTiMedium"}}}}}},methods:{filterPredefineColoursSchemeConfig(t,i){this.getNewConfigWithArrary(t,i,this.filter_config)}}};var L=o(149500);const E=o(954255);var P={props:["widgetInfo"],name:"com-liquid-fill",components:{HideButton:w.Z},mixins:[x.baseConfig,C.P,I.u,N.P,F.H,J],data(){return{dimensionsEx:null,dimensionsAliasEx:null}},mounted(){this.echarts=E.init(this.$refs.comLiquidFill,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(t){let i=[],n=[],l=[],a=[];i=t.dataset[t.dataset.type].source,n=t.dataset[t.dataset.type].dimensions,l=t.dataset[t.dataset.type].dimensionsAlias,a=t.dataset[t.dataset.type].encode,this.dimensionsEx=n,this.dimensionsAliasEx=l;let c=this.getVal(i,n,a.molecular),s=this.getVal(i,n,a.denominator),d=0,g=[],m="";if(a.scaleType==="molecular")m=this.getName(l,a.molecular),c!=null&&s!=null&&s!=0?d=c/s:d=0;else{let r=this.getVal(i,n,a.percentage);m=this.getName(l,a.percentage),d=this.$$lib__.isNaN(r)!=!0?r:0,d=d/100}for(let r=0;r<t.config.series.liquidFill.color.length;r++)if(t.config.series.liquidFill.asyncAnimation){let u={name:m,value:d-r*.1,number:d};g.push(u)}else{let u={name:m,value:d};g.push(u)}let M=JSON.parse(JSON.stringify(t.config.title)),v=this.getTooltip(JSON.parse(JSON.stringify(t.config.tooltip))),e=t.config.series.liquidFill,f=JSON.parse(JSON.stringify(e.label.formatter));(f.script==null||!f.script)&&(f.script=!0,f.scriptontent="return (params.value* 100).toFixed("+a.decimal+") + '%';");let R=this.getFormatterString(f);!t.config.tooltip.formatter.show&&!t.config.tooltip.formatter.script&&Object.assign(v,{formatter:function(r){return r.marker+r.name+" : "+r.data.number*100+"%"}});let T={title:M,tooltip:v,series:[{type:"liquidFill",center:["50%","50%"],data:g,color:e.color,shape:e.shape,period:function(r,u){return e.period*u*.2+e.period},waveAnimation:e.waveAnimation,animationDuration:e.animationDuration,direction:e.direction,radius:e.radius+"%",amplitude:e.amplitude+"%",waveLength:e.waveLength+"%",itemStyle:e.itemStyle,backgroundStyle:e.backgroundStyle,outline:e.outline,label:{show:e.label.show,formatter:R,baseline:e.label.baseline,color:e.label.color,insideColor:e.label.insideColor,fontSize:this.mUtils.getNewFontSize(e.label.fontSize),fontWeight:e.label.fontWeight,fontFamily:e.label.fontFamily,align:e.label.align}}]};this.echarts.setOption(this.lifecycleBeforeChartsLoad(T),{notMerge:!0})},reLoadInfo(t){t&&(this.$refs.comLiquidFill.style.width=t.attr.w+"px",this.$refs.comLiquidFill.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},initAction(t){this.actionSendout(t),this.actionReceive(t)},getName(t,i){let n="";return this.$$lib__.each(t,l=>{l.name==i&&(n=l.alias)}),n},onClick(t,i,n){let l=this;this.echarts.on("click",function(a){i.percentage=a.value;let c=[],s=l.widgetInfo.action.sendOut.actionList;if(l.widgetInfo.dataset[l.widgetInfo.dataset.type].source&&l.widgetInfo.dataset[l.widgetInfo.dataset.type].source.length>0&&(c=l.widgetInfo.dataset[l.widgetInfo.dataset.type].source[a.dataIndex]),l.getExtendParams(i,s[0].paramsExtend,c,l.widgetInfo.dataset[l.widgetInfo.dataset.type].dimensions),s[0].script&&s[0].script.enabled){if(L.log("Execute script for "+l.widgetInfo.name+" component to "+s[0].name+" component"),s[0].script.content==""){O.Message.warning({message:s[0].name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",s[0].script.content),i=this.customScript_actionSend_clickParam(i)}b.Z.$emit(t,i),n&&l.doPostMessage(i)})}}},$=P,z=o(768141),Z=(0,z.Z)($,y,S,!1,null,"450ada92",null),H=Z.exports}}]);
