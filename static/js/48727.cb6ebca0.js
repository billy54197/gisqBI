"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[48727],{56279:function(S,f,i){i.d(f,{P:function(){return l}});var d=i(386892),c=i(149500);const l={mixins:[d.D],created(){},methods:{lifecycleBeforeChartsLoad(h){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&c.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),c.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let g=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[h]);if(g)return g}return h},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&c.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),c.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(S,f,i){i.d(f,{X:function(){return d},b:function(){return c}});let d={versions:function(){var l=navigator.userAgent;return{trident:l.indexOf("Trident")>-1,presto:l.indexOf("Presto")>-1,webKit:l.indexOf("AppleWebKit")>-1,gecko:l.indexOf("Gecko")>-1&&l.indexOf("KHTML")==-1,mobile:!!l.match(/AppleWebKit.*Mobile.*/),ios:!!l.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:l.indexOf("Android")>-1,iPhone:l.indexOf("iPhone")>-1,iPad:l.indexOf("iPad")>-1,webApp:l.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},c;d.versions.mobile||d.versions.ios||d.versions.android||d.versions.iPhone||d.versions.iPad?c=!1:c=!0},348727:function(S,f,i){i.r(f),i.d(f,{default:function(){return $}});var d=function(){var o=this,t=o._self._c;return t("div",{style:{width:o.widgetInfo.attr.w+"px",height:o.widgetInfo.attr.hh+"px"}},[t("hide-button",{attrs:{attr:o.widgetInfo.attr}}),t("div",{ref:"gaugeSimple",style:{width:o.widgetInfo.attr.w+"px",height:o.widgetInfo.attr.hh+"px"}})],1)},c=[],l=i(844513),h=i(927966),y=i(264196),g=i(56279),w=i(445061),b=i(126711),m=i(99349),n=i(555616),p=i(275770),I=i(67157),x=i(150813);const P={mixins:[I.c],data(){return{config_extend:{},filter_config:{title:JSON.parse(JSON.stringify(x.Z.charts.title)),legend:JSON.parse(JSON.stringify(x.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(x.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(x.Z.charts.toolbox)),series:{itemStyle:{color:"rgba(232, 233, 240, 1)"},axisLine:{lineStyle:{shadowColor:"#eee",color:[[null,"#FEC400"]]}},axisLabel:{fontFamily:"sans-serif"},detail:{color:"#3A4151",fontFamily:"sans-serif",backgroundColor:"rgba(232, 233, 240, 1)",shadowColor:"#eee"},title:{backgroundColor:"rgba(0,0,0,0)",textStyle:{color:""}}}}}},methods:{filterPredefineColoursSchemeConfig(e,o){this.getNewConfigWithArrary(e,o,this.filter_config)}}};var F=i(149500);const O=i(954255);var J={name:"GaugeSimple",components:{HideButton:l.Z},mixins:[y.baseConfig,g.P,w.u,b.H,m.P,P],props:["widgetInfo"],data(){return{}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.echarts=O.init(this.$refs.gaugeSimple,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},destroyed(){this.echarts.dispose()},methods:{loadInfo(e){let o=[];o=this.getSeriesData(e.dataset[e.dataset.type].source,e.dataset[e.dataset.type].dimensions,e.dataset[e.dataset.type].encode);let t=JSON.parse(JSON.stringify(e.config.series)),s=JSON.parse(JSON.stringify(e.config.title)),a=JSON.parse(JSON.stringify(e.config.legend)),r=JSON.parse(JSON.stringify(e.config.grid)),B=this.getTooltip(e.config.tooltip),M=JSON.parse(JSON.stringify(e.config.toolbox));t.axisLine.lineStyle.color.forEach(function(u,A,R){A==0?u[0]=u[0]/100:u[0]=(R[A-1][0]*100+u[0])/100});let N=e.config.series.axisLine.lineStyle.colorStyle,v=null,H=null;N=="solidColor"?v=t.axisLine.lineStyle.color:N=="linearGradient"&&(v=[[1,new O.graphic.LinearGradient(0,0,1,0,[{offset:0,color:e.config.series.axisLine.lineStyle.colorStart?e.config.series.axisLine.lineStyle.colorStart:"#fcfe92"},{offset:1,color:e.config.series.axisLine.lineStyle.colorEnd?e.config.series.axisLine.lineStyle.colorEnd:"#4ccb96"}])]]),H=t.axisTick.lineStyle.color?t.axisTick.lineStyle.color:"auto",t.splitLine.lineStyle.color=t.splitLine.lineStyle.color?t.splitLine.lineStyle.color:"auto";let L="",z=0,C={color:this.$$global_editor.predefineColors,tooltip:B,toolbox:M,legend:{show:a.show,textStyle:{fontFamily:a.textStyle.fontFamily,fontSize:a.textStyle.fontSize,color:a.textStyle.color},data:[],itemGap:a.itemGap},grid:{left:r.left,right:r.right,top:r.top,bottom:r.bottom},title:{show:s.show,text:s.text,link:s.link,textAlign:s.textAlign,left:s.left+"%",right:s.right+"%",top:s.top+"%",bottom:s.bottom+"%",textStyle:{fontSize:s.textStyle.fontSize,fontFamily:s.textStyle.fontFamily,color:s.textStyle.color}},series:[{name:"\u7A7A\u6C14\u8D28\u91CF",type:"gauge",data:o,startAngle:t.startAngle,endAngle:t.endAngle,min:t.min,max:t.max,center:[t.center[0]+"%",t.center[1]+"%"],radius:t.radius+"%",splitNumber:t.splitNumber,pointer:{show:t.pointer.show,width:t.pointer.width,length:t.pointer.length+"%"},itemStyle:{color:t.itemStyle.color},axisLine:{show:t.axisLine.lineStyle.show,lineStyle:{color:v,width:t.axisLine.lineStyle.width,shadowBlur:t.axisLine.lineStyle.shadowBlur,shadowColor:t.axisLine.lineStyle.shadowColor,shadowOffsetX:t.axisLine.lineStyle.shadowOffsetX,shadowOffsetY:t.axisLine.lineStyle.shadowOffsetY}},axisTick:{show:t.axisTick.show,splitNumber:t.axisTick.splitNumber,length:t.axisTick.length,lineStyle:{color:H,width:1,type:"solid"}},axisLabel:{show:t.axisLabel.show,fontSize:t.axisLabel.fontSize,fontFamily:t.axisLabel.fontFamily,fontWeight:t.axisLabel.fontWeight,color:t.axisLabel.color,distance:t.axisLabel.distance},splitLine:{show:t.splitLine.show,length:t.splitLine.length,lineStyle:t.splitLine.lineStyle},detail:{show:t.detail.show,color:t.detail.color,fontSize:t.detail.fontSize,fontFamily:t.detail.fontFamily,fontWeight:t.detail.fontWeight,offsetCenter:t.detail.offsetCenter,formatter:u=>{if(z++,L+=u+",",z==o.length)return L.substring(0,L.length-1)},backgroundColor:t.detail.backgroundColor,borderRadius:t.detail.borderRadius,shadowBlur:t.detail.shadowBlur,shadowColor:t.detail.shadowColor,shadowOffsetX:t.detail.shadowOffsetX,shadowOffsetY:t.detail.shadowOffsetY,width:t.detail.width,height:t.detail.height,lineHeight:t.detail.lineHeight,rich:{}},title:{show:t.title.show,z:2,backgroundColor:t.title.backgroundColor,textStyle:t.title.textStyle,fontSize:t.title.fontSize,offsetCenter:[t.title.offsetCenter[0]+"%",t.title.offsetCenter[1]+"%"]}}]};this.getAnimation(C,e),this.setOption(C),this.setAnimationLoop(e,()=>{this.setOption(C,e)})},setOption(e){this.echarts.getOption()&&this.echarts.clear(),setTimeout(()=>{this.echarts.setOption(this.lifecycleBeforeChartsLoad(e),{notMerge:!0})},10)},reLoadInfo(e){e&&(this.$refs.gaugeSimple.style.width=e.attr.w+"px",this.$refs.gaugeSimple.style.height=e.attr.hh+"px"),this.loadInfo(e),this.echarts.resize()},getSeriesData(e,o,t){let s=[],a=-1;for(let r=0;r<o.length;r++)o[r]==t.value&&(a=r);for(let r=0;r<e.length;r++)s.push({value:e[r][a]});return s},initAction(e){this.actionSendout(e),this.actionReceive(e)},actionSendout(e){let o=this;this.$$lib__.each(e.action.sendOut.actionList,t=>{if(t.enabled){let s=t.code+"_"+e.id;if(t.paramsExtend&&t.paramsExtend.length>0){let a={};this.getParamsExtend(a,t.paramsExtend,e)}t.code==p.default.click.code&&o.onClick(s,t)}})},onClick(e,o){let t=this;t.echarts.on("click",s=>{let a={};if(a.x=s.data.name,a.y=s.data.value,o.script&&o.script.enabled){if(F.log("Execute script for "+t.widgetInfo.name+" component to "+o.name+" component"),o.script.content==""){n.Message.warning({message:o.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",o.script.content),a=this.customScript(a)}h.Z.$emit(e,a),o.postMessage&&t.doPostMessage(a),t.actionNameList.push(e)})}}},T=J,E=i(768141),k=(0,E.Z)(T,d,c,!1,null,"d7808c20",null),$=k.exports},844513:function(S,f,i){i.d(f,{Z:function(){return b}});var d=function(){var n=this,p=n._self._c;return n.attr.buttonHide?p("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(I){return n.onHide()}}},[n.openTooltip?p("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[p("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):p("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},c=[],l=i(752246),h={props:["attr"],name:"hide-button",data(){return{isPc:l.b}},computed:{openTooltip:function(){let m=!1,n=this.attr.buttonHideTooltipContent;return l.b&&n&&n!=null&&n.trim()!=""&&(m=!0),m}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},y=h,g=i(768141),w=(0,g.Z)(y,d,c,!1,null,"bf399b9a",null),b=w.exports}}]);
