"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[767],{50767:function(v,a,e){e.r(a),e.d(a,{default:function(){return I}});var g=function(){var t=this,o=t._self._c;return o("div",{staticClass:"task-wait-class",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:"hidden"}},[o("hide-button",{attrs:{attr:t.widgetInfo.attr}}),t.init?o("GisqTaskComponent",{ref:"GisqTaskWait",attrs:{compConfig:t.componentConfig},on:{getTableColumnList:t.getTableColumnList,getTableSearchList:t.getTableSearchList,getButtonList:t.getButtonList}}):t._e()],1)},d=[],c=e(89844),h=e(56279),u=e(80989),r=e(31954),n=e(21300),f=e(48836),s=e(27966),l=e(44513),p={name:"task-wait",mixins:[c.u,h.P],props:["widgetInfo"],components:{GisqTaskComponent:u.GisqTaskComponent,HideButton:l.Z},computed:{...(0,f.Se)(["editorAppId","viewAppId"])},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},data(){return{componentConfig:{},currentWidgetInfo:{},init:!1}},methods:{...(0,f.nv)(["updateCurrentWidget","setCurrentWidget"]),loadInfo(i){this.setTaskWaitConfig(i),this.lifecycleAfterLoad()},setTaskWaitConfig(i){this.componentConfig=JSON.parse(JSON.stringify(i.config)),this.componentConfig.service=r.Z.baseConfig.domain;const t=JSON.parse(n.getStoreUserInfo());t.access_token=n.getStoreToken(),this.componentConfig.userInfo=t,this.componentConfig.urlPathNameBi=n.isView()?"view":"editor",this.componentConfig.subGuid=this.editorAppId||this.viewAppId,this.componentConfig.isUseAppObject=r.Z.baseConfig.isUseAppObject,this.init=!0},getButtonList(i){this.currentWidgetInfo=JSON.parse(JSON.stringify(this.widgetInfo)),this.currentWidgetInfo.config.tableButtonList=JSON.parse(JSON.stringify(i)),this.updateCurrentWidget(JSON.parse(JSON.stringify(this.currentWidgetInfo)))},getTableColumnList(i){this.currentWidgetInfo=JSON.parse(JSON.stringify(this.widgetInfo)),this.currentWidgetInfo.config.tableColumnList=JSON.parse(JSON.stringify(i)),this.updateCurrentWidget(JSON.parse(JSON.stringify(this.currentWidgetInfo)))},getTableSearchList(i){this.currentWidgetInfo=JSON.parse(JSON.stringify(this.widgetInfo)),this.currentWidgetInfo.config.tableSearchList=JSON.parse(JSON.stringify(i)),this.updateCurrentWidget(JSON.parse(JSON.stringify(this.currentWidgetInfo)))},reLoadInfo(i){this.loadInfo(i)}},mounted(){this.loadInfo(this.widgetInfo);let i=this;window.onmessage=function(t){t.data.cmd&&t.data.cmd==="refresh"&&i.$refs.GisqTaskWait.refreshTableData()},s.Z.$on("clickedSearchSetting",()=>{this.$refs.GisqTaskWait&&this.$refs.GisqTaskWait.showSearchSetting()}),s.Z.$on("clickedButtonSetting",()=>{this.$refs.GisqTaskWait&&this.$refs.GisqTaskWait.showButtonSetting()}),s.Z.$on("clickedColumnSetting",()=>{this.$refs.GisqTaskWait&&this.$refs.GisqTaskWait.showColumnSetting()})},beforeDestroy(){s.Z.$off("clickedSearchSetting"),s.Z.$off("clickedButtonSetting"),s.Z.$off("clickedColumnSetting")}},m=p,S=e(68141),C=(0,S.Z)(m,g,d,!1,null,"0d1fec2b",null),I=C.exports}}]);
