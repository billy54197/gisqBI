"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[71114],{129907:function(L,y,l){var j=l(673608),O=l(610416),M=l(545059),D=l(776094),S=l(577767),R=l(985606),P=l(602692),I=function(){var p=function(d,a){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var _ in i)Object.prototype.hasOwnProperty.call(i,_)&&(o[_]=i[_])},p(d,a)};return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");p(d,a);function o(){this.constructor=d}d.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}(),U=function(p){I(d,p);function d(a){var o=this,i=a||{},_=i.imageSmoothing!==void 0?i.imageSmoothing:!0;return i.interpolate!==void 0&&(_=i.interpolate),o=p.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:_,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,o.params_=i.params||{},o.hidpi_=i.hidpi!==void 0?i.hidpi:!0,o.tmpExtent_=(0,D.createEmpty)(),o.setKey(o.getKeyForParams_()),o}return d.prototype.getKeyForParams_=function(){var a=0,o=[];for(var i in this.params_)o[a++]=i+"-"+this.params_[i];return o.join("/")},d.prototype.getParams=function(){return this.params_},d.prototype.getRequestUrl_=function(a,o,i,_,u,e){var r=this.urls;if(r){var t=u.getCode().split(/:(?=\d+$)/).pop();e.SIZE=o[0]+","+o[1],e.BBOX=i.join(","),e.BBOXSR=t,e.IMAGESR=t,e.DPI=Math.round(e.DPI?e.DPI*_:90*_);var s;if(r.length==1)s=r[0];else{var h=(0,S.$W)((0,P.vp)(a),r.length);s=r[h]}var n=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,O.B)(n,e)}},d.prototype.getTilePixelRatio=function(a){return this.hidpi_?a:1},d.prototype.updateParams=function(a){(0,M.f0)(this.params_,a),this.setKey(this.getKeyForParams_())},d.prototype.tileUrlFunction=function(a,o,i){var _=this.getTileGrid();if(_||(_=this.getTileGridForProjection(i)),!(_.getResolutions().length<=a[0])){o!=1&&!this.hidpi_&&(o=1);var u=_.getTileCoordExtent(a,this.tmpExtent_),e=(0,R.Pq)(_.getTileSize(a[0]),this.tmpSize);o!=1&&(e=(0,R.bA)(e,o,this.tmpSize));var r={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return(0,M.f0)(r,this.params_),this.getRequestUrl_(a,e,u,o,i,r)}},d}(j.default);y.Z=U},181121:function(L,y,l){var j=l(673608),O=l(845503),M=l(610416),D=l(312059),S=l(545059),R=l(776094),P=l(985606),I=l(161625),U=l(627794),p=l(390583),d=l(577767),a=l(602692),o=function(){var _=function(u,e){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])},_(u,e)};return function(u,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_(u,e);function r(){this.constructor=u}u.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),i=function(_){o(u,_);function u(e){var r=this,t=e||{},s=t.imageSmoothing!==void 0?t.imageSmoothing:!0;t.interpolate!==void 0&&(s=t.interpolate);var h=t.params||{},n="TRANSPARENT"in h?h.TRANSPARENT:!0;return r=_.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:s,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection})||this,r.gutter_=t.gutter!==void 0?t.gutter:0,r.params_=h,r.v13_=!0,r.serverType_=t.serverType,r.hidpi_=t.hidpi!==void 0?t.hidpi:!0,r.tmpExtent_=(0,R.createEmpty)(),r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return u.prototype.getFeatureInfoUrl=function(e,r,t,s){var h=(0,p.get)(t),n=this.getProjection(),f=this.getTileGrid();f||(f=this.getTileGridForProjection(h));var g=f.getZForResolution(r,this.zDirection),c=f.getTileCoordForCoordAndZ(e,g);if(!(f.getResolutions().length<=c[0])){var E=f.getResolution(c[0]),v=f.getTileCoordExtent(c,this.tmpExtent_),T=(0,P.Pq)(f.getTileSize(c[0]),this.tmpSize),A=this.gutter_;A!==0&&(T=(0,P.f3)(T,A,this.tmpSize),v=(0,R.buffer)(v,E*A,v)),n&&n!==h&&(E=(0,I.aA)(n,h,e,E),v=(0,p.transformExtent)(v,h,n),e=(0,p.transform)(e,h,n));var m={SERVICE:"WMS",VERSION:O.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,S.f0)(m,this.params_,s);var C=Math.floor((e[0]-v[0])/E),K=Math.floor((v[3]-e[1])/E);return m[this.v13_?"I":"X"]=C,m[this.v13_?"J":"Y"]=K,this.getRequestUrl_(c,T,v,1,n||h,m)}},u.prototype.getLegendUrl=function(e,r){if(this.urls[0]!==void 0){var t={SERVICE:"WMS",VERSION:O.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(r===void 0||r.LAYER===void 0){var s=this.params_.LAYERS,h=!Array.isArray(s)||s.length===1;if(!h)return;t.LAYER=s}if(e!==void 0){var n=this.getProjection()?this.getProjection().getMetersPerUnit():1,f=28e-5;t.SCALE=e*n/f}return(0,S.f0)(t,r),(0,M.B)(this.urls[0],t)}},u.prototype.getGutter=function(){return this.gutter_},u.prototype.getParams=function(){return this.params_},u.prototype.getRequestUrl_=function(e,r,t,s,h,n){var f=this.urls;if(f){if(n.WIDTH=r[0],n.HEIGHT=r[1],n[this.v13_?"CRS":"SRS"]=h.getCode(),"STYLES"in this.params_||(n.STYLES=""),s!=1)switch(this.serverType_){case"geoserver":var g=90*s+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+g:n.FORMAT_OPTIONS="dpi:"+g;break;case"mapserver":n.MAP_RESOLUTION=90*s;break;case"carmentaserver":case"qgis":n.DPI=90*s;break;default:(0,D.h)(!1,52);break}var c=h.getAxisOrientation(),E=t;if(this.v13_&&c.substr(0,2)=="ne"){var v=void 0;v=t[0],E[0]=t[1],E[1]=v,v=t[2],E[2]=t[3],E[3]=v}n.BBOX=E.join(",");var T;if(f.length==1)T=f[0];else{var A=(0,d.$W)((0,a.vp)(e),f.length);T=f[A]}return(0,M.B)(T,n)}},u.prototype.getTilePixelRatio=function(e){return!this.hidpi_||this.serverType_===void 0?1:e},u.prototype.getKeyForParams_=function(){var e=0,r=[];for(var t in this.params_)r[e++]=t+"-"+this.params_[t];return r.join("/")},u.prototype.updateParams=function(e){(0,S.f0)(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},u.prototype.updateV13_=function(){var e=this.params_.VERSION||O.e;this.v13_=(0,U.n)(e,"1.3")>=0},u.prototype.tileUrlFunction=function(e,r,t){var s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(t)),!(s.getResolutions().length<=e[0])){r!=1&&(!this.hidpi_||this.serverType_===void 0)&&(r=1);var h=s.getResolution(e[0]),n=s.getTileCoordExtent(e,this.tmpExtent_),f=(0,P.Pq)(s.getTileSize(e[0]),this.tmpSize),g=this.gutter_;g!==0&&(f=(0,P.f3)(f,g,this.tmpSize),n=(0,R.buffer)(n,h*g,n)),r!=1&&(f=(0,P.bA)(f,r,this.tmpSize));var c={SERVICE:"WMS",VERSION:O.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return(0,S.f0)(c,this.params_),this.getRequestUrl_(e,f,n,r,t,c)}},u}(j.default);y.Z=i}}]);
