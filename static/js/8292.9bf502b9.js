"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[8292],{56279:function(w,h,s){s.d(h,{P:function(){return r}});var u=s(86892),l=s(49500);const r={mixins:[u.D],created(){},methods:{lifecycleBeforeChartsLoad(d){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&l.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),l.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let f=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[d]);if(f)return f}return d},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&l.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),l.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},28292:function(w,h,s){s.r(h),s.d(h,{default:function(){return C}});var u=function(){var e=this,i=e._self._c;return i("div",{ref:"plaIntRef"},[i("span",[e._v("\u79FB\u52A8\u4EA4\u4E92")])])},l=[],r=s(27966),d=s(26711),v=s(45061),f=s(56279),m=s(48836),b=s(96471),p=s(55946),g=s(49500),I={props:["widgetInfo"],name:"mobile-interactive",mixins:[d.H,v.u,f.P],computed:{...(0,m.Se)(["getCanvasSettingInfo","getCanvasSetting","getWidgets"])},data(){return{widgetsList:[],getPlus:b.A}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(t){p.Z.state.editor.isBoardEditor?t.attr.hide=!1:t.attr.hide=!0,t.config.screen&&t.config.screen.default&&t.config.screen.default.enable&&this.changeDirection(t.config.screen.default.direction),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.actionReceive(t)},actionReceive(t){this.widgetsList=this.getWidgetsList();let e=t.action.receive.horizontalScreen;e&&e.enabled&&this.doHorizontalScreen(e.replaceList,t);let i=t.action.receive.verticalScreen;i&&i.enabled&&this.doVerticalScreen(i.replaceList,t);let c=t.action.receive.switchScreen;c&&c.enabled&&this.doSwitchScreen(c.replaceList,t)},doHorizontalScreen(t,e){this.$$lib__.each(t,i=>{let c=i[0][0],a=i[0][1],o=i[0][2];if(o){let n=o.indexOf("|");n>-1&&(o=i[0][2].substring(n+1))}r.Z.$on(a,n=>{n||(n={}),n.widget_key=c,n.widget_name=this.getNameByKey(c),n.action_key=a,n.action_name=this.getNameByKey(a),e.action.receive.horizontalScreen.script&&e.action.receive.horizontalScreen.script.enabled?(g.log("Execute the script to execute model to the "+e.name+" component"),new Function("selfInfo",e.action.receive.horizontalScreen.script.content).apply(this,[e])):this.changeDirection("horizontal")})})},doVerticalScreen(t,e){this.$$lib__.each(t,i=>{let c=i[0][0],a=i[0][1],o=i[0][2];if(o){let n=o.indexOf("|");n>-1&&(o=i[0][2].substring(n+1))}r.Z.$on(a,n=>{n||(n={}),n.widget_key=c,n.widget_name=this.getNameByKey(c),n.action_key=a,n.action_name=this.getNameByKey(a),e.action.receive.verticalScreen.script&&e.action.receive.verticalScreen.script.enabled?(g.log("Execute the script to execute model to the "+e.name+" component"),new Function("selfInfo",e.action.receive.verticalScreen.script.content).apply(this,[e])):this.changeDirection("vertical")})})},doSwitchScreen(t,e){this.$$lib__.each(t,i=>{let c=i[0][0],a=i[0][1],o=i[0][2];if(o){let n=o.indexOf("|");n>-1&&(o=i[0][2].substring(n+1))}r.Z.$on(a,n=>{n||(n={}),n.widget_key=c,n.widget_name=this.getNameByKey(c),n.action_key=a,n.action_name=this.getNameByKey(a),e.action.receive.switchScreen.script&&e.action.receive.switchScreen.script.enabled?(g.log("Execute the script to execute model to the "+e.name+" component"),new Function("selfInfo",e.action.receive.switchScreen.script.content).apply(this,[e])):this.changeDirection("switch")})})},changeDirection(t){if(!t||t==null||t=="")return;const e=this.getPlus();if(!e){p.Z.state.editor.isBoardEditor||this.$message({message:"\u5F53\u524D\u73AF\u5883\u65E0\u6CD5\u8C03\u7528plus",type:"error"});return}if(t=="switch"){let i=e.navigator.getOrientation();i==0||i==180?t="horizontal":t="vertical"}t=="horizontal"&&e.screen.lockOrientation("landscape-primary"),t=="vertical"&&e.screen.lockOrientation("portrait-primary")},getWidgetsList(){let t=[];for(let e in this.getWidgets){let i=this.getWidgets[e];if(i.action&&i.action.sendOut&&i.action.sendOut.actionList){let c=[];this.$$lib__.each(i.action.sendOut.actionList,a=>{let o={value:a.code+"_"+e,label:a.name};if(this.is_bind_param){o.children=[];for(let n in a.params)o.children.push({value:a.code+"_"+e+"|"+n,label:n})}c.push(o)}),c.length>0&&t.push({value:i.id,label:i.name,children:c})}}if(this.getCanvasSetting.action&&this.getCanvasSetting.action.sendOut){let e=[];this.$$lib__.each(this.getCanvasSetting.action.sendOut.actionList,i=>{let c={value:i.code+"_canvas",label:i.name};if(this.is_bind_param){c.children=[];for(let a in i.params)c.children.push({value:i.code+"_canvas|"+a,label:a})}e.push(c)}),e.length>0&&t.push({value:this.$$global.sysGuid.datavisual.canvasId,label:this.$$global.sysGuid.datavisual.canvasName,children:e})}return t},getNameByKey(t){g.log(this.widgetsList);let e="";return this.widgetsList.forEach(function(i){i.value==t&&(e=i.label),e==""&&i.children.forEach(function(c){c.value==t&&(e=c.label)})}),e}}},S=I,L=s(68141),$=(0,L.Z)(S,u,l,!1,null,"5d08943c",null),C=$.exports}}]);
