"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[24096],{56279:function(M,y,r){r.d(y,{P:function(){return g}});var x=r(386892),u=r(149500);const g={mixins:[x.D],created(){},methods:{lifecycleBeforeChartsLoad(N){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&u.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let U=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[N]);if(U)return U}return N},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&u.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(M,y,r){r.d(y,{X:function(){return x},b:function(){return u}});let x={versions:function(){var g=navigator.userAgent;return{trident:g.indexOf("Trident")>-1,presto:g.indexOf("Presto")>-1,webKit:g.indexOf("AppleWebKit")>-1,gecko:g.indexOf("Gecko")>-1&&g.indexOf("KHTML")==-1,mobile:!!g.match(/AppleWebKit.*Mobile.*/),ios:!!g.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:g.indexOf("Android")>-1,iPhone:g.indexOf("iPhone")>-1,iPad:g.indexOf("iPad")>-1,webApp:g.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},u;x.versions.mobile||x.versions.ios||x.versions.android||x.versions.iPhone||x.versions.iPad?u=!1:u=!0},844513:function(M,y,r){r.d(y,{Z:function(){return _}});var x=function(){var a=this,H=a._self._c;return a.attr.buttonHide?H("div",{style:{position:"absolute",right:a.attr.buttonHideRight+"px",top:a.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(K){return a.onHide()}}},[a.openTooltip?H("el-tooltip",{attrs:{"open-delay":1e3,content:a.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[H("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):H("el-button",{class:a.attr.buttonHideIconClass&&a.attr.buttonHideIconClass!=""?a.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:a.attr.buttonHideColor,fontSize:a.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a._e()},u=[],g=r(752246),N={props:["attr"],name:"hide-button",data(){return{isPc:g.b}},computed:{openTooltip:function(){let k=!1,a=this.attr.buttonHideTooltipContent;return g.b&&a&&a!=null&&a.trim()!=""&&(k=!0),k}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},A=N,U=r(768141),R=(0,U.Z)(A,x,u,!1,null,"bf399b9a",null),_=R.exports},224096:function(M,y,r){r.r(y),r.d(y,{default:function(){return q}});var x=function(){var t=this,i=t._self._c;return i("div",{ref:"digitalScrolling",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",textAlign:t.widgetInfo.config.text.label.horizontalAlignment}},[i("hide-button",{attrs:{attr:t.widgetInfo.attr}}),i("div",{style:{paddingLeft:t.mUtils.getNewPxW(t.widgetInfo.config.text.left)+"px",paddingTop:t.mUtils.getNewPxH(t.widgetInfo.config.text.top)+"px",overflow:"auto",display:"inline-block"},on:{click:t.onClick}},[i("div",{style:t.getStylePrefix(t.widgetInfo)},[i("span",[t._v(" "+t._s(t.widgetInfo.config.text.prefix.lable)+" ")])]),i("div",{style:{float:"left",paddingLeft:t.mUtils.getNewPxW(t.widgetInfo.config.text.margin.left)+"px",paddingTop:t.mUtils.getNewPxH(t.widgetInfo.config.text.margin.top)+"px",fontSize:t.mUtils.getNewFontSize(t.widgetInfo.config.text.label.fontSize)+"px",color:t.widgetInfo.config.text.label.color,fontWeight:t.widgetInfo.config.text.label.fontWeight,fontFamily:t.widgetInfo.config.text.label.fontFamily,fontStyle:t.widgetInfo.config.text.label.fontStyle,textDecoration:t.widgetInfo.config.text.label.textDecoration,webkitTextStrokeWidth:t.widgetInfo.config.text.label.textStrokeWidth+"px",webkitTextStrokeColor:t.widgetInfo.config.text.label.textStrokeColor,textShadow:t.mUtils.getNewPxH(t.widgetInfo.config.text.label.hShadow)+"px "+t.widgetInfo.config.text.label.vShadow+"px "+t.widgetInfo.config.text.label.textShadowBlur+"px "+t.widgetInfo.config.text.label.textShadowColor||"rgba(0,0,0,0)",cursor:this.getCursor(t.widgetInfo.action,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code)}},[i("div",{ref:"numberscroll",staticClass:"numbers"},[i("input",{attrs:{type:"hidden"},domProps:{value:t.textInfo}})])]),i("div",{style:t.getStyleSuffix(t.widgetInfo)},[i("span",[t._v(" "+t._s(t.widgetInfo.config.text.suffix.lable)+" ")])])])],1)},u=[],g=r(844513),N=r(126711),A=r(445061),U=r(56279),R=r(161709),_=r(927966),k=r(321300),a=r(555616),H=r(67157);const K={mixins:[H.c],data(){return{config_extend:{config:{text:{top:11,left:16}}},filter_config:{text:{label:{color:"rgba(44, 62, 80, 1)"},prefix:{color:"rgba(44, 62, 80, 1)"},suffix:{color:"rgba(44, 62, 80, 1)"}},option:{borderColor:"#4C84FF",background:"rgba(255, 255, 255, 0)"}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var Z=r(149500),G={props:["widgetInfo"],name:"digital-scrolling",components:{HideButton:g.Z},mixins:[R.baseConfig,N.H,A.u,U.P,K],data(){return{textInfo:""}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{loadInfo(e){this.textInfo=null,e.dataset[e.dataset.type]&&e.dataset[e.dataset.type].dimensions&&e.dataset[e.dataset.type].dimensions.length>0?this.textInfo=this.getFieldVal(e.dataset[e.dataset.type].source[0],e.dataset[e.dataset.type].dimensions,e.dataset[e.dataset.type].encode.text):this.textInfo=e.dataset[e.dataset.type].encode.text;let t=JSON.parse(JSON.stringify(e.config.option));t.num=this.textInfo,t.backgroundImage=this.getImageUrl(t.backgroundImage),t.scroll?this.scroll(t):this.show(t),this.lifecycleAfterLoad()},reLoadInfo(e){if(e){this.$refs.digitalScrolling.style.width=e.attr.w+"px",this.$refs.digitalScrolling.style.height=e.attr.hh+"px";let t=this.$refs.numberscroll.querySelector("input[type=hidden]");t&&(t.value="")}this.loadInfo(e)},initAction(e){this.actionReceive(e)},scroll(e){let t=this.$refs.numberscroll;this.initNumberScroll(t,e)},show(e){let t=this.$refs.numberscroll;this.initNumberScroll(t,e,!0)},initNumberScroll(e,t,i){let l=Number(t.num),s=t.width,n=t.height,d=t.mLeft,b=t.borderWidth,f=t.borderColor,W=t.borderRadius,$=t.background,j=t.local,z=t.backgroundImage,J=e.querySelector("input[type=hidden]"),T=t.diffrentiation,O=t.l2r,w=t.undreg,E=t.groupNum,C=t.minLen;if(T=parseInt(T),O=parseInt(O),E=parseInt(E)||1,C=parseInt(C)||0,!J)return;let L=e.querySelector("[HALO-NUMBERS-CONTAINER]"),m=J.value||"";if(parseInt(t.decimal)>=0&&(l=l.toFixed(t.decimal)),L||(L=document.createElement("div"),L.className=t.containerClass||"",L.setAttribute("HALO-NUMBERS-CONTAINER",""),e.appendChild(L)),isNaN(l)||l===m)return;j&&(l=this.addThousands(l));let c=(l+"").split(""),h=c.length;if(C&&C>h){for(let o=0;o<C-h;++o)c.unshift(0);h=C}if(m=="")for(let o=0;o<h;++o)m+="-";m=Number(m),t.decimal>=0&&(m=m.toFixed(t.decimal)),j&&(m=this.addThousands(m));let v,P;if(isNaN(m)?(P=[],v=P.length):(P=(m+"").split(""),v=P.length),t.zeronum){if(h>v){let o=h-v;for(let p=0;p<o;++p)P.unshift("0");v=h}else if(h<v){let o=v-h;for(let p=0;p<o;++p)c.unshift("0");h=v}}let X=[];if(!T)w="";else if(w!=""){let o=w.length;if(w=w.toLowerCase(),w.indexOf("^")==0)for(let p=0;p<o;++p)w[p]=="x"&&(X[p-1]=1);else if(w.indexOf("$")==o-1){let p=w.replace(/\$$/g,"").split("");for(let D=h-1;D>=0&&p.length;--D)p.pop()=="x"&&(X[D]=1)}else w=""}let I="",S=e.getAttribute("direction")||t.direction;S!="up"&&S!="down"&&(S="alternate");let tt=S=="alternate",B=O?0:h;for(let o=0;o<h;++o)i||T?(B=0,c[o]===","||c[o]==="."?I+='<span class="'+t.containerItemClass+'" style=" position:relative; width: '+this.mUtils.getNewPxW(s/2)+"px; height: "+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+'px; text-align: center; overflow: hidden;">'+c[o]+"</span>":c[o]==="-"?I+='<span class="'+t.containerItemClass+'" style="display:inline-block; vertical-align:top; position:relative; width: '+this.mUtils.getNewPxW(s)+"px; height: "+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+"px;margin-left: "+this.mUtils.getNewPxW(d)+"px;border:"+b+"px solid "+f+"; border-radius: "+W+"px;background-color:"+$+";background-image:"+z+'; background-size:100% 100%; text-align: center; overflow: hidden;">'+c[o]+"</span>":I+='<span class="'+t.containerItemClass+'" style="display:inline-block; vertical-align:top; position:relative; width: '+this.mUtils.getNewPxW(s)+"px; height: "+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+"px;margin-left: "+this.mUtils.getNewPxW(d)+"px;border:"+b+"px solid "+f+"; border-radius: "+W+"px;background-color:"+$+";background-image:"+z+'; background-size:100% 100%; text-align: center; overflow: hidden;">'+t.numList[c[o]]+"</span>"):(tt&&(S=o%2==0?"up":"down"),O?c[o]==","||c[o]=="."?I+='<span class="'+t.containerItemClass+'" style="position:relative; width: '+this.mUtils.getNewPxW(s/2)+"px; height: "+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+'px; text-align: center; overflow: hidden;">'+c[o]+"</span>":I+='<span class="'+t.containerItemClass+'" style="display:inline-block; vertical-align:top; position:relative; width: '+this.mUtils.getNewPxW(s)+"px; height: "+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+"px;margin-left: "+this.mUtils.getNewPxW(d)+"px;border:"+b+"px solid "+f+"; border-radius: "+W+"px;background-color:"+$+";background-image:"+z+';background-size:100% 100%;text-align: center; overflow: hidden;">'+this.createNum(c[o],P[o],Math.ceil(B++/E),S,t,n)+"</span>":c[o]==","||c[o]=="."?I+='<span class="'+t.containerItemClass+'" style="position:relative; width: '+this.mUtils.getNewPxW(s/2)+"px; height: "+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+'px; text-align: center; overflow: hidden;">'+c[o]+"</span>":I+='<span class="'+t.containerItemClass+'" style="display:inline-block; vertical-align:top; position:relative; width: '+this.mUtils.getNewPxW(s)+"px; height: "+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+"px;margin-left: "+this.mUtils.getNewPxW(d)+"px;border:"+b+"px solid "+f+"; border-radius: "+W+"px;background-color:"+$+";background-image:"+z+';background-size:100% 100%; text-align: center; overflow: hidden;">'+this.createNum(c[o],P[o],Math.ceil(B--/E),S,t,n)+"</span>");L.innerHTML=I;let F=document.querySelectorAll("[HALO-NUMBER]");setTimeout(function(){for(let o=0,p=F.length;o<p;++o)F[o].getAttribute("direction")=="up"?F[o].style.transform="translate3d(0,-100%,0)":F[o].style.transform="translate3d(0,0,0)"},300)},createNum(e,t,i,l,s,n){let d="",b=s.round;if(l=="up"){d+='<div style="transform: translate3d(0,0,0); transition: transform '+s.duration+"s ease-in-out "+s.delay*i+'s; position: absolute; width: 100%; height: auto; top: 0;" HALO-NUMBER direction="'+l+'">',typeof t=="number"?(d+=this.createScrollNum(s,n,t),t>5&&--b):d+='<div style="position:relative; width:100%; height: '+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+'px; overflow:hidden; padding: 0; margin: 0; left: 0; top: 0;">'+s.numHolder+"</div>";for(let f=0;f<b;++f)d+=this.createScrollNum(s,n);for(let f=0;f<=e;++f)d+='<div style="position:relative; width:100%; height: '+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+"px; overflow:hidden; padding: 0; margin: 0 0 "+(f==e?"-"+this.mUtils.getNewPxH(n)+"px":"0")+' 0; left: 0; top: 0;">'+s.numList[f]+"</div>";e=="-"&&(d+='<div style="position:relative; width:100%; height: '+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+"px; overflow:hidden; padding: 0; margin: 0 0 -"+this.mUtils.getNewPxH(n)+'px 0; left: 0; top: 0;">'+e+"</div>")}else{d+='<div style="transform: translate3d(0,-100%,0); transition: transform '+s.duration+"s ease-in-out "+s.delay*i+'s; position: absolute; width: 100%; height: auto; top: 0;" HALO-NUMBER direction="'+l+'">';for(let f=e;f>=0;--f)d+='<div style="position:relative; width:100%; height: '+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+'px; overflow:hidden; padding: 0; margin: 0 0 0 0; left: 0; top: 0;">'+s.numList[f]+"</div>";e=="-"&&(d+='<div style="position:relative; width:100%; height: '+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+'px; overflow:hidden; padding: 0; margin: 0 0 0 0; left: 0; top: 0;">'+e+"</div>"),t<5&&--b;for(let f=0;f<b;++f)d+=this.createScrollNum2(s,n);typeof t=="number"?d+=this.createScrollNum2(s,n,t):d+='<div style="position:relative; width:100%; height: '+this.mUtils.getNewPxH(n)+"px; line-height: "+this.mUtils.getNewPxH(n)+"px; overflow:hidden; padding: 0; margin: 0 0 -"+this.mUtils.getNewPxH(n)+'px 0; left: 0; top: 0;">'+s.numHolder+"</div>"}return d+="</div>",d},createScrollNum(e,t,i){let l="";i=i||0;for(let s=i,n=e.numList.length;s<n;++s)l+='<div style="position:relative; width:100%; height: '+this.mUtils.getNewPxH(t)+"px; line-height: "+this.mUtils.getNewPxH(t)+'px; overflow:hidden; padding: 0; margin: 0; left: 0; top: 0;">'+e.numList[s]+"</div>";return l},createScrollNum2(e,t,i,l){let s="";i=i||0;for(let n=e.numList.length-1;n>=i;--n)s+='<div style="position:relative; width:100%; height: '+this.mUtils.getNewPxH(t)+"px; line-height: "+this.mUtils.getNewPxH(t)+"px; overflow:hidden; padding: 0; margin: "+(i==n&&l?"0 0 -"+this.mUtils.getNewPxH(t)+"px 0":"0")+'; left: 0; top: 0;">'+e.numList[n]+"</div>";return s},addThousands(e){let t=/\d{1,3}(?=(\d{3})+$)/g;return e&&e.toString().indexOf(".")==-1?(e+"").replace(t,"$&,"):e.toString().replace(/(\d)(?=(\d{3})+\.)/g,function(i,l){return l+","})},getStylePrefix(e){return{wordWrap:"break-word",float:"left",display:e.config.text.prefix.hide==!0?"none":"",width:this.mUtils.getNewPxW(e.config.text.prefix.w)+"px",marginLeft:this.mUtils.getNewPxW(e.config.text.prefix.left)+"px",marginTop:this.mUtils.getNewPxH(e.config.text.prefix.top)+"px",fontSize:this.mUtils.getNewFontSize(e.config.text.prefix.fontSize)+"px",color:e.config.text.prefix.color,fontWeight:e.config.text.prefix.fontWeight,fontStyle:e.config.text.prefix.fontStyle,fontFamily:e.config.text.prefix.fontFamily,textDecoration:e.config.text.prefix.textDecoration,textAlign:e.config.text.prefix.horizontalAlignment}},getStyleSuffix(e){return{wordWrap:"break-word",float:"left",display:e.config.text.suffix.hide==!0?"none":"",width:this.mUtils.getNewPxW(e.config.text.suffix.w)+"px",marginLeft:this.mUtils.getNewPxW(e.config.text.suffix.left)+"px",marginTop:this.mUtils.getNewPxH(e.config.text.suffix.top)+"px",fontSize:this.mUtils.getNewFontSize(e.config.text.suffix.fontSize)+"px",color:e.config.text.suffix.color,fontWeight:e.config.text.suffix.fontWeight,fontFamily:e.config.text.suffix.fontFamily,fontStyle:e.config.text.suffix.fontStyle,textDecoration:e.config.text.suffix.textDecoration,textAlign:e.config.text.suffix.horizontalAlignment}},onClick(){let e=this,t=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(t,i=>{if(i.enabled&&i.code==e.$$global_editor.actionType.click.code){let l=e.$$global_editor.actionType.click.code+"_"+e.widgetInfo.id,s={text:e.textInfo};if(i.paramsExtend&&i.paramsExtend.length>0){let n=[];e.widgetInfo.dataset[e.widgetInfo.dataset.type].source&&e.widgetInfo.dataset[e.widgetInfo.dataset.type].source.length>0&&(n=e.widgetInfo.dataset[e.widgetInfo.dataset.type].source[0]),this.getExtendParams(s,i.paramsExtend,n,e.widgetInfo.dataset[e.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(Z.log("Execute script for "+e.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){a.Message.warning({message:i.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",i.script.content),s=this.customScript_actionSend_clickParam(s)}_.Z.$emit(l,s),i.postMessage&&this.doPostMessage(s),this.actionNameList.push(l)}else if(i.enabled&&i.code==e.$$global_editor.actionType.openLink.code){let l={};if(i.paramsExtend&&i.paramsExtend.length>0){let s=[];e.widgetInfo.dataset[e.widgetInfo.dataset.type].source&&e.widgetInfo.dataset[e.widgetInfo.dataset.type].source.length>0&&(s=e.widgetInfo.dataset[e.widgetInfo.dataset.type].source[0]),this.getExtendParams(l,i.paramsExtend,s,e.widgetInfo.dataset[e.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(Z.log("Execute script for "+e.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){a.Message.warning({message:i.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_openLinkParam=new Function("param",i.script.content),l=this.customScript_actionSend_openLinkParam(l)}this.openLinkAction(i,l)}})},getImageUrl(e){if(e&&e!="")return"url("+k.appendImageBaseURL(e)+")"}}},V=G,Q=r(768141),Y=(0,Q.Z)(V,x,u,!1,null,"1c140048",null),q=Y.exports}}]);
