"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[10213],{56279:function(w,d,i){i.d(d,{P:function(){return s}});var a=i(386892),f=i(149500);const s={mixins:[a.D],created(){},methods:{lifecycleBeforeChartsLoad(g){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&f.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),f.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let h=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[g]);if(h)return h}return g},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&f.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),f.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(w,d,i){i.d(d,{X:function(){return a},b:function(){return f}});let a={versions:function(){var s=navigator.userAgent;return{trident:s.indexOf("Trident")>-1,presto:s.indexOf("Presto")>-1,webKit:s.indexOf("AppleWebKit")>-1,gecko:s.indexOf("Gecko")>-1&&s.indexOf("KHTML")==-1,mobile:!!s.match(/AppleWebKit.*Mobile.*/),ios:!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:s.indexOf("Android")>-1,iPhone:s.indexOf("iPhone")>-1,iPad:s.indexOf("iPad")>-1,webApp:s.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},f;a.versions.mobile||a.versions.ios||a.versions.android||a.versions.iPhone||a.versions.iPad?f=!1:f=!0},844513:function(w,d,i){i.d(d,{Z:function(){return I}});var a=function(){var n=this,m=n._self._c;return n.attr.buttonHide?m("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(b){return n.onHide()}}},[n.openTooltip?m("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[m("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):m("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},f=[],s=i(752246),g={props:["attr"],name:"hide-button",data(){return{isPc:s.b}},computed:{openTooltip:function(){let u=!1,n=this.attr.buttonHideTooltipContent;return s.b&&n&&n!=null&&n.trim()!=""&&(u=!0),u}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},p=g,h=i(768141),y=(0,h.Z)(p,a,f,!1,null,"bf399b9a",null),I=y.exports},210213:function(w,d,i){i.r(d),i.d(d,{default:function(){return O}});var a=function(){var t=this,o=t._self._c;return o("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[o("hide-button",{attrs:{attr:t.widgetInfo.attr}}),t.widgetInfo.config.title.show?o("div",{style:{height:t.widgetInfo.config.title.height+"px",lineHeight:t.widgetInfo.config.title.height+"px",marginLeft:t.widgetInfo.config.title.marginLeft+"px",fontSize:t.widgetInfo.config.title.titleStyle.fontSize+"px",fontFamily:t.widgetInfo.config.title.titleStyle.fontFamily,fontStyle:t.widgetInfo.config.title.titleStyle.fontStyle,fontWeight:t.widgetInfo.config.title.titleStyle.fontWeight,textDecoration:t.widgetInfo.config.title.titleStyle.textDecoration,color:t.widgetInfo.config.title.titleStyle.color}},[t._v(" "+t._s(t.widgetInfo.config.title.label)+" ")]):t._e(),o("div",{style:{display:t.widgetInfo.config.layOut==="auto"?"flex":"block",flexDirection:"row",height:t.widgetInfo.config.contentHeight+"px",alignContent:"flex-start",flexWrap:"wrap",overflow:t.widgetInfo.config.scroll?"auto":"hidden"}},t._l(t.itemList,function(r){return o("div",{key:r,style:{flex:"none",position:"relative",height:t.widgetInfo.config.item.height+"px",lineHeight:t.widgetInfo.config.item.height+"px",maxWidth:t.widgetInfo.config.item.maxWidth+"px",marginTop:t.widgetInfo.config.item.marginTop+"px",marginLeft:t.widgetInfo.config.item.marginLeft+"px",background:t.widgetInfo.config.item.background,borderRadius:t.widgetInfo.config.item.borderRadius+"px",border:`solid ${t.widgetInfo.config.item.borderWidth}px ${t.widgetInfo.config.item.borderColor}`}},[o("span",{style:{display:"inline-block",width:"100%",verticalAlign:"middle",paddingLeft:t.widgetInfo.config.item.paddingLeft+"px",paddingRight:t.widgetInfo.config.item.paddingRight+"px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:t.widgetInfo.config.item.itemFontStyle.color,fontSize:t.widgetInfo.config.item.itemFontStyle.fontSize+"px",fontFamily:t.widgetInfo.config.item.itemFontStyle.fontFamily,fontStyle:t.widgetInfo.config.item.itemFontStyle.fontStyle,fontWeight:t.widgetInfo.config.item.itemFontStyle.fontWeight,textDecoration:t.widgetInfo.config.item.itemFontStyle.textDecoration},on:{click:function(c){return t.clickHistoryItem(r)}}},[t._v(" "+t._s(r)+" ")]),o("i",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.config.clearable,expression:"widgetInfo.config.clearable"}],staticClass:"el-icon-close",style:{position:"absolute",color:t.widgetInfo.config.color,background:t.widgetInfo.config.background,fontSize:t.widgetInfo.config.fontSize+"px",top:0,right:0,borderRadius:"50%",transform:`translate(50%,-50%) translate(${t.widgetInfo.config.bottom}px, ${t.widgetInfo.config.right}px)`},on:{click:function(c){return t.deleteHistoryItem(r)}}})])}),0),o("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.config.bottomFeature.show,expression:"widgetInfo.config.bottomFeature.show"}],style:{height:t.widgetInfo.config.bottomFeature.height+"px",lineHeight:t.widgetInfo.config.bottomFeature.height+"px",textAlign:"center",marginTop:t.widgetInfo.config.bottomFeature.top+"px"}},[o("i",{staticClass:"el-icon-delete",style:{fontSize:t.widgetInfo.config.bottomFeature.fontSize+"px",color:t.widgetInfo.config.bottomFeature.color},on:{click:t.deleteAllHistory}}),o("span",{style:{marginLeft:t.widgetInfo.config.bottomFeature.marginLeft+"px",fontSize:t.widgetInfo.config.bottomFeature.titleStyle.fontSize+"px",fontFamily:t.widgetInfo.config.bottomFeature.titleStyle.fontFamily,fontStyle:t.widgetInfo.config.bottomFeature.titleStyle.fontStyle,fontWeight:t.widgetInfo.config.bottomFeature.titleStyle.fontWeight,textDecoration:t.widgetInfo.config.bottomFeature.titleStyle.textDecoration,color:t.widgetInfo.config.bottomFeature.titleStyle.color},on:{click:t.deleteAllHistory}},[t._v(t._s(t.widgetInfo.config.bottomFeature.label))])])],1)},f=[],s=i(927966),g=i(495549),p=i(67157);const h={mixins:[p.c],data(){return{config_extend:{config:{}},filter_config:{color:"rgba(153,144,144,1)",background:"rgba(252,252,252,1)",title:{titleStyle:{color:"#303133",fontFamily:"alibabaPuHuiTiMedium"}},bottomFeature:{titleStyle:{color:"#C0C4CC",fontFamily:"alibabaPuHuiTiRegular"},color:"#C0C4CC"},item:{itemFontStyle:{color:"#616266",fontFamily:""},background:"#ffffff",borderColor:"#DBDFE6"}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var y=i(723400),I=i(445061),u=i(386892),n=i(126711),m=i(56279),b=i(844513),S=i(148836),v=i(555616),x=i(149500),L={name:"form-history",props:["widgetInfo"],components:{HideButton:b.Z},mixins:[g.baseConfig,h,I.u,y.j,u.D,n.H,m.P],data(){return{itemList:[]}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},computed:{...(0,S.Se)(["isView"])},methods:{loadInfo(e){this.lifecycleAfterLoad()},reLoadInfo(e){this.loadInfo(e)},initAction(e){this.actionReceive(e),this.historyReceive(e)},historyReceive(e){if(e.action===void 0||e.action.receive===void 0)return;let t=e.action.receive.setHistory;if(t&&t.enabled){let o=t.setHistoryList;this.doReceive(o,e)}},doReceive(e,t){e&&e.length>0&&e.forEach(o=>{if(o&&o.length<1)return;let r=o[0][1]+"_"+o[0][0];o[0][1].indexOf("_")>-1&&(r=o[0][1]);let c=o[0][2];if(c){let l=c.indexOf("|");l>-1&&(c=o[0][2].substring(l+1))}s.Z.$on(r,l=>{if(t.action.receive.setHistory.script&&t.action.receive.setHistory.script.enabled){if(x.log("Execute script for "+this.widgetInfo.name+" component to "+o.name+" component"),t.action.receive.setHistory.script.content==""){v.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.setHistoryItem=new Function("data","param_key",t.action.receive.setHistory.script.content)}this.setHistoryItem(l,c)})})},setHistoryItem(e,t){let o=e[t];this.itemList.length===Number(this.widgetInfo.config.max)&&this.itemList.pop();let r=JSON.parse(JSON.stringify(this.itemList));r.unshift(o),this.itemList=Array.from(new Set(r)),localStorage.setItem(this.widgetInfo.id,JSON.stringify(this.itemList))},deleteHistoryItem(e){this.itemList=this.itemList.filter(t=>e!==t),localStorage.setItem(this.widgetInfo.id,JSON.stringify(this.itemList))},deleteAllHistory(){this.itemList=[],localStorage.setItem(this.widgetInfo.id,JSON.stringify([]))},clickHistoryItem(e){let t=this;this.widgetInfo.action.sendOut.actionList.forEach(r=>{if(r.enabled&&r.code==="click"){let c="click_"+t.widgetInfo.id,l={data:e};if(r.paramsExtend&&r.paramsExtend.length>0&&this.getExtendParams(l,r.paramsExtend),r.script&&r.script.enabled){if(x.log("Execute script for "+this.widgetInfo.name+" component to "+r.name+" component"),r.script.content==""){v.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",r.script.content),l=this.customScript(l)}s.Z.$emit(c,l),r.postMessage&&this.doPostMessage(l),this.actionNameList.push(c)}})}},mounted(){this.initAction(this.widgetInfo);let e=localStorage.getItem(this.widgetInfo.id);this.isView||(this.itemList=["\u7D2B\u82D1","\u5F3A\u88AD","\u4EE3\u8FBE\u7F57\u65AF\u4E4B\u6B87","\u8774\u8776","\u65AF\u5609\u8482\u4E4B\u773C","\u6DF1\u6E0A\u4E4B\u5203"]),e&&this.isView&&(this.itemList=JSON.parse(e)),this.loadInfo(this.widgetInfo)}},H=L,C=i(768141),F=(0,C.Z)(H,a,f,!1,null,"67ecc32c",null),O=F.exports}}]);
