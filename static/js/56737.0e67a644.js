"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[56737],{56279:function(x,d,o){o.d(d,{P:function(){return a}});var s=o(386892),r=o(149500);const a={mixins:[s.D],created(){},methods:{lifecycleBeforeChartsLoad(l){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&r.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),r.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let h=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[l]);if(h)return h}return l},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&r.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),r.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(x,d,o){o.d(d,{X:function(){return s},b:function(){return r}});let s={versions:function(){var a=navigator.userAgent;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1,iPhone:a.indexOf("iPhone")>-1,iPad:a.indexOf("iPad")>-1,webApp:a.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},r;s.versions.mobile||s.versions.ios||s.versions.android||s.versions.iPhone||s.versions.iPad?r=!1:r=!0},844513:function(x,d,o){o.d(d,{Z:function(){return y}});var s=function(){var n=this,p=n._self._c;return n.attr.buttonHide?p("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(u){return n.onHide()}}},[n.openTooltip?p("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[p("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):p("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},r=[],a=o(752246),l={props:["attr"],name:"hide-button",data(){return{isPc:a.b}},computed:{openTooltip:function(){let f=!1,n=this.attr.buttonHideTooltipContent;return a.b&&n&&n!=null&&n.trim()!=""&&(f=!0),f}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},m=l,h=o(768141),w=(0,h.Z)(m,s,r,!1,null,"bf399b9a",null),y=w.exports},956737:function(x,d,o){o.r(d),o.d(d,{default:function(){return H}});var s=function(){var e=this,i=e._self._c;return i("div",{staticClass:"my-div",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.config.autoHeight?"auto":e.widgetInfo.attr.hh+"px"}},[i("hide-button",{attrs:{attr:e.widgetInfo.attr}}),i("div",{ref:"myTextArea",staticClass:"test-div",style:e.getStyleInfo(e.widgetInfo),attrs:{contenteditable:"true",onfocus:"this.blur();"},domProps:{textContent:e._s(e.textInfo)},on:{click:e.onClick}})],1)},r=[],a=o(927966),l=o(126711),m=o(445061),h=o(56279),w=o(844513),y=o(926912),f=o(555616),n=o(67157);const p={mixins:[n.c],data(){return{config_extend:{config:{padding:{left:10,top:4},fontStyle:{fontSize:14,fontFamily:"alibabaPuHuiTiRegular",color:"#616266",horizontalAlignment:"left"}}},filter_config:{fontStyle:{startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)",fontFamily:"alibabaPuHuiTiRegular",color:"#616266"}}}},methods:{filterPredefineColoursSchemeConfig(t,e){this.getNewConfigWithArrary(t,e,this.filter_config)}}};var u=o(149500),b={name:"TextArea",components:{HideButton:w.Z},mixins:[y.baseConfig,l.H,m.u,h.P,p],props:["widgetInfo"],data(){return{resizeAction:null,textInfo:"",lastHeight:0,lastWidth:0}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)},textInfo(){this.resizeAction&&this.$nextTick(()=>{let t={height:this.$refs.myTextArea.clientHeight,width:this.$refs.myTextArea.clientWidth};if(this.lastHeight!==t.height||this.lastWidth!==t.width){if(this.lastHeight=t.height,this.lastWidth=t.width,this.getExtendParams(t,this.resizeAction.paramsExtend,[],[]),this.resizeAction.script&&this.resizeAction.script.enabled)try{if(this.resizeAction.script.content==""){f.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",this.resizeAction.script.content),t=this.customScript(t)}catch(e){if(e.message==="stopevent"){u.log("Execute script for "+this.widgetInfo.name+" component to "+this.resizeAction.name+" component StopEvent");return}else u.log("Execute script for "+this.widgetInfo.name+" component to "+this.resizeAction.name+" component Error:",e)}this.$event.emit(this,"resize",t)}})}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{loadInfo(t){if(this.resizeAction=null,t.action.sendOut&&t.action.sendOut.actionList&&t.action.sendOut.actionList.length>0&&(this.resizeAction=t.action.sendOut.actionList.find(e=>e.enabled&&e.code=="resize")),this.textInfo=null,t.dataset.type==this.$$global_editor.dataSourcType.static.code?t.dataset.static&&t.dataset.static.dimensions&&t.dataset.static.dimensions.length>0?this.textInfo=this.getFieldVal(t.dataset.static.source[0],t.dataset.static.dimensions,t.dataset.static.encode.text):this.textInfo=t.dataset.static.encode.text:t.dataset.type!=this.$$global_editor.dataSourcType.static.code&&t.dataset[t.dataset.type].source&&t.dataset[t.dataset.type].source.length>0&&(this.textInfo=this.getFieldVal(t.dataset[t.dataset.type].source[0],t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].encode.text)),this.textInfo)for(this.textInfo=this.textInfo.toString();this.textInfo.indexOf("\\n")>-1;)this.textInfo=this.textInfo.replace("\\n",`
`);this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.actionReceive(t)},onClick(){let t=this,e=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(e,i=>{if(i.enabled){if(i.code==t.$$global_editor.actionType.click.code){let g=t.$$global_editor.actionType.click.code+"_"+t.widgetInfo.id,c={text:t.textInfo};if(i.paramsExtend&&i.paramsExtend.length>0){let I=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(I=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(c,i.paramsExtend,I,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(u.log("Execute script for "+t.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){f.Message.warning({message:i.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",i.script.content),c=this.customScript_actionSend_clickParam(c)}a.Z.$emit(g,c),this.actionNameList.push(g),i.postMessage&&this.doPostMessage(c)}else if(i.code==t.$$global_editor.actionType.openLink.code){let g={};if(i.paramsExtend&&i.paramsExtend.length>0){let c=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(c=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(g,i.paramsExtend,c,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(u.log("Execute script for "+t.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){f.Message.warning({message:i.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_openLink=new Function("param",i.script.content),g=this.customScript_actionSend_openLink(g)}this.openLinkAction(i,g)}}})},getStyleInfo(t){let e={};e.height=t.config.autoHeight?"auto":t.attr.hh+"px",e.width=t.attr.width+"px",e.lineHeight=this.mUtils.getNewPxH(t.config.lineHeight)+"px",t.config.overflow!=null&&(e.overflow=t.config.overflow==!0?"auto":"hidden"),t.config.padding.top&&(e.paddingTop=this.mUtils.getNewPxH(t.config.padding.top)+"px"),t.config.padding.bottom&&(e.paddingBottom=this.mUtils.getNewPxH(t.config.padding.bottom)+"px"),t.config.padding.left&&(e.paddingLeft=this.mUtils.getNewPxW(t.config.padding.left)+"px"),t.config.padding.right&&(e.paddingRight=this.mUtils.getNewPxW(t.config.padding.right)+"px"),t.config.fontStyle.fontSize&&(e.fontSize=this.mUtils.getNewFontSize(t.config.fontStyle.fontSize)+"px"),t.config.fontStyle.fontFamily&&(e.fontFamily=t.config.fontStyle.fontFamily),t.config.fontStyle.color&&(e.color=t.config.fontStyle.color),t.config.fontStyle.fontWeight&&(e.fontWeight=t.config.fontStyle.fontWeight),t.config.fontStyle.fontStyle&&(e.fontStyle=t.config.fontStyle.fontStyle),t.config.fontStyle.textDecoration&&(e.textDecoration=t.config.fontStyle.textDecoration),t.config.fontStyle.horizontalAlignment&&(e.textAlign=t.config.fontStyle.horizontalAlignment),e.cursor=this.getCursor(t.action,this.$$global_editor.actionType.click.code);let i=t.config.fontStyle;return i.textShadow&&(e.textShadow=i.hShadow+"px "+i.vShadow+"px "+i.textShadowBlur+"px "+i.textShadowColor||"rgba(0,0,0,0)"),i.textStroke&&(e.webkitTextStrokeWidth=i.textStrokeWidth+"px",e.webkitTextStrokeColor=i.textStrokeColor),i.gradient&&(e.backgroundImage="linear-gradient("+i.angle+"deg,"+i.startColor+","+i.endColor+")",e.webkitBackgroundClip="text",e.webkitTextFillColor="transparent"),e}}},S=b,v=o(768141),C=(0,v.Z)(S,s,r,!1,null,"08e3b5e6",null),H=C.exports}}]);
