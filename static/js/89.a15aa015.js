"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[89],{56279:function(b,f,l){l.d(f,{P:function(){return p}});var m=l(86892),n=l(49500);const p={mixins:[m.D],created(){},methods:{lifecycleBeforeChartsLoad(c){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&n.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),n.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let d=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[c]);if(d)return d}return c},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&n.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),n.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},90089:function(b,f,l){l.r(f),l.d(f,{default:function(){return R}});var m=function(){var t=this,i=t._self._c;return i("div",{style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[i("hide-button",{attrs:{attr:t.widgetInfo.attr}}),i("div",{ref:"radarComplete",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}})],1)},n=[],p=l(49047),c=l(99349),g=l(56279),d=l(45061),u=l(26711),S=l(67157),h=l(50666);const I={mixins:[S.c],data(){return{config_extend:{},filter_config:{title:JSON.parse(JSON.stringify(h.Z.charts.title)),legend:JSON.parse(JSON.stringify(h.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(h.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(h.Z.charts.toolbox)),radar:{splitArea:{areaStyle:{color:"rgba(255,255,255,0.1)"}},axisLine:{lineStyle:{color:"#474C4C"}},splitLine:{lineStyle:{color:"#BFC5D1",color2:"rgba(99, 99, 99, 15)"}},name:{textStyle:{color:"#8B93A8",backgroundColor:""}}},series:{}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var v=l(75770),w=l(27966),C=l(55616),x=l(44513),r=l(49500);const L=l(29426);var O={name:"RadarComplete",components:{HideButton:x.Z},mixins:[p.u,g.P,d.u,u.H,c.P,I],props:["widgetInfo"],data(){return{sourceListObj:[],indicator:[],series_data:[]}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.echarts=L.init(this.$refs.radarComplete,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},destroyed(){this.echarts.dispose()},methods:{loadInfo(e){this.sourceListObj=this.getSourceToListObj();let t=this.getRadar(e.config.radar),i=this.getLegend(e.config.legend),a=this.getTitle(e.config.title),o=this.getTooltip(e.config.tooltip),s=this.getToolbox(e.config.toolbox),E=this.getSeriesRadar(e);i.data=this.series_data,t.indicator=this.indicator;let y={color:this.getOptionColor(e.config.optionColor),tooltip:o,toolbox:s,legend:i,title:a,radar:t,series:E};this.setOption(y),this.setAnimationLoop(e,()=>{this.setOption(y,e)})},setOption(e){this.echarts.getOption()&&this.echarts.clear(),r.info("====",e),this.echarts.setOption(this.lifecycleBeforeChartsLoad(e),{notMerge:!0})},reLoadInfo(e){e&&(this.$refs.radarComplete.style.width=e.attr.w+"px",this.$refs.radarComplete.style.height=e.attr.hh+"px"),this.loadInfo(e),this.echarts.resize()},getSeriesRadar(e){let t=JSON.parse(JSON.stringify(e.config.series));if(t.type="radar",this.getSymbol(t),t.symbolSize=this.getSplitNumber(t.symbolSize),t.label=this.getLabelStyle(t.label),t.label.formatterType)if((t.label.formatterType==null||t.label.formatterType=="template")&&t.label.formatterTemplate&&t.label.formatterTemplate!="")t.label.formatter=t.label.formatterTemplate.replace(/\\n/g,`
`);else if(t.label.formatterType=="script"){let i=this;t.label.formatter=function(a){return(!t.label.formatterScript||t.label.formatterScript=="")&&r.warn("\u6807\u7B7E\u5185\u5BB9\u811A\u672C\u4E3A\u7A7A"),r.info("\u6267\u884C\u6807\u7B7E\u5185\u5BB9\u811A\u672C"),new Function("params",t.label.formatterScript).apply(i,[a])}}else t.emphasis.label.formatter=null;if(t.lineStyle.color=this.getColorInfo(t.lineStyle.colorInfo),t.areaStyle.color=this.getColorInfo(t.areaStyle.colorInfo),t.emphasis.label=this.getLabelStyle(t.emphasis.label),t.emphasis.label.formatterType)if((t.emphasis.label.formatterType==null||t.emphasis.label.formatterType=="template")&&t.emphasis.label.formatterTemplate&&t.emphasis.label.formatterTemplate!="")t.emphasis.label.formatter=t.emphasis.label.formatterTemplate.replace(/\\n/g,`
`);else if(t.emphasis.label.formatterType=="script"){let i=this;t.emphasis.label.formatter=function(a){return(!t.emphasis.label.formatterScript||t.emphasis.label.formatterScript=="")&&r.warn("\u6807\u7B7E\u5185\u5BB9\u811A\u672C\u4E3A\u7A7A"),r.info("\u6267\u884C\u6807\u7B7E\u5185\u5BB9\u811A\u672C"),new Function("params",t.emphasis.label.formatterScript).apply(i,[a])}}else t.emphasis.label.formatter=null;return t.emphasis.itemStyle.color=this.getColorInfo(t.emphasis.itemStyle.colorInfo),t.emphasis.lineStyle.color=this.getColorInfo(t.emphasis.lineStyle.colorInfo),t.emphasis.areaStyle.color=this.getColorInfo(t.emphasis.areaStyle.colorInfo),this.getSeriesRadarData(e),t.data=this.series_data,t},getSeriesRadarData(e){if(this.indicator=[],this.series_data=[],e.dataset[e.dataset.type].encode){let t=e.dataset[e.dataset.type],i={};if(this.$$lib__.each(t.encode.data,a=>{if(a.value&&a.value!=""&&i[a.value]==null){let o=this.$$lib__.find(t.dimensionsAlias,s=>s.name==a.value);i[a.value]={name:o&&o.alias?o.alias:"",value:[]}}}),this.$$lib__.each(this.sourceListObj,a=>{let o={};t.encode.name&&t.encode.name!=""&&(o.name=a[t.encode.name]),t.encode.max&&t.encode.max!=""&&(o.max=a[t.encode.max]),t.encode.min&&t.encode.min!=""&&(o.min=a[t.encode.min]),t.encode.color&&t.encode.color!=""&&(o.color=a[t.encode.color]),this.indicator.push(o);for(let s in i)i[s].value.push(a[s])}),!this.$$lib__.isEmpty(i))for(let a in i)this.series_data.push(i[a])}},getSymbol(e){e.symbolType=="img"&&e.symbolImg!=""?e.symbol=this.getSymbolURL(e.symbolImg):e.symbolType=="svg"&&e.symbolSvg!=""?e.symbolSvg.indexOf("image/")>-1?e.symbol=e.symbolSvg.indexOf("image://")==-1?"image://"+e.symbolSvg:e.symbolSvg:e.symbol=e.symbolSvg.indexOf("path://")==-1?"path://"+e.symbolSvg:e.symbolSvg:e.symbolType=="icon"&&e.symbolIcon!=""&&(e.symbol=e.symbolIcon)},initAction(e){this.actionSendout(e),this.actionReceive(e)},actionSendout(e){let t=this;this.$$lib__.each(e.action.sendOut.actionList,i=>{if(i.enabled){let a=i.code+"_"+e.id;if(i.paramsExtend&&i.paramsExtend.length>0){let o={};this.getParamsExtend(o,i.paramsExtend,e)}i.code==v.Z.click.code&&t.onClick(a,i)}})},onClick(e,t){let i=this;i.echarts.on("click",a=>{let o={},s=i.getValue(a.seriesName,a.data);if(o.x=a.name,o.y=s,t.script&&t.script.enabled){if(r.log("Execute script for "+i.widgetInfo.name+" component to "+t.name+" component"),t.script.content==""){C.Message.warning({message:t.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",t.script.content),o=this.customScript(o)}w.Z.$emit(e,o),t.postMessage&&i.doPostMessage(o),i.actionNameList.push(e)})}}},T=O,N=l(68141),$=(0,N.Z)(T,m,n,!1,null,"77f74dfe",null),R=$.exports}}]);
