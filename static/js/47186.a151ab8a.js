"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[47186],{947186:function($,i,n){n.r(i),n.d(i,{default:function(){return h}});var l=function(){var e=this,a=e._self._c;return a("div",[a("el-form",{ref:"form",attrs:{size:"mini","label-width":"70px","label-position":"right",model:e.currentWidget.dataset},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",[a("el-form-item",{attrs:{label:"\u6570\u636E\u7C7B\u578B"}},[a("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u7C7B\u578B"},on:{change:e.changeDatasetType},model:{value:e.currentWidget.dataset.type,callback:function(t){e.$set(e.currentWidget.dataset,"type",t)},expression:"currentWidget.dataset.type"}},e._l(e.$$global_editor.dataSourcTypeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("div",[a("el-form-item",{attrs:{label:"\u56FE\u5F62\u540D\u79F0"}},[a("el-select",{ref:"encodeX",attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u540D\u79F0\u5B57\u6BB5",clearable:""},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.nameField,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"nameField",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.nameField"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u5206\u7C7B\u5B57\u6BB5"}},[a("el-select",{ref:"encodeX",attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B\u5B57\u6BB5",clearable:""},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.typeField,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"typeField",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.typeField"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u5750\u6807\u7CFB"}},[a("el-select",{ref:"encodeX",attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u5750\u6807\u7CFB\u5B57\u6BB5",clearable:""},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.wkidField,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"wkidField",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.wkidField"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u56FE\u5F62\u6570\u636E"}},[a("el-select",{ref:"encodeX",attrs:{size:"mini",placeholder:"\u8BF7\u9009\u62E9\u56FE\u5F62\u51E0\u4F55\u6570\u636E\u5B57\u6BB5",clearable:""},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.geomField,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"geomField",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.geomField"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"\u4FE1\u606F\u5B57\u6BB5"}},[a("el-select",{ref:"encodeX",attrs:{multiple:"",size:"mini",placeholder:"\u8BF7\u9009\u62E9\u9700\u8981\u5C55\u793A\u7684\u4FE1\u606F\u5B57\u6BB5"},on:{change:e.changeData},model:{value:e.currentWidget.dataset[e.currentWidget.dataset.type].encode.infoFields,callback:function(t){e.$set(e.currentWidget.dataset[e.currentWidget.dataset.type].encode,"infoFields",t)},expression:"currentWidget.dataset[currentWidget.dataset.type].encode.infoFields"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(t){return a("el-option",{key:t.name,attrs:{label:t.alias!=""?t.alias:t.name,value:t.name}})}),1)],1)],1),a("setting-dataset",{ref:"settingDataset",attrs:{"current-widget":e.currentWidget},on:{getDataSetData:e.datasetChange,clearDynamicEncode:e.clearDynamicEncode}})],1)])],1)},c=[],o=n(723400),g=n(589908),u={name:"GisThemeCategorizeData",components:{SettingDataset:g.Z},mixins:[o.j],props:["currentWidget"],data(){return{timer:null,isInit:!1}},mounted(){this.$nextTick(()=>{this.getConfigData()})},methods:{changeDatasetType(){this.$refs.settingDataset.loadPreview(),this.changeData()},changeData(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.getConfigData()},2e3)},datasetChange(){this.currentWidget.config.styleOption={},this.getConfigData()},initChartsData(){let d=this.currentWidget.dataset.type||"",a=(this.currentWidget.dataset||{})[d]||{};const t=a.dimensionsAlias,W=a.source,s=[];W.forEach(k=>{const r={};k.forEach((w,z)=>{const _=t[z];r[_.name]=w}),s.push(r)});const y=a.encode.typeField,F=a.encode.geomField,v=a.encode.wkidField,b=a.encode.infoFields,D=a.encode.nameField;this.widgetInfo.config.typeField=y,this.widgetInfo.config.geomField=F,this.widgetInfo.config.wkidField=v,this.widgetInfo.config.infoFields=b,this.widgetInfo.config.nameField=D,this.currentWidget.config.data=s},clearDynamicEncode(){this.currentWidget.dataset.dynamic.encode.typeField="",this.currentWidget.dataset.dynamic.encode.geomField="",this.currentWidget.dataset.dynamic.encode.wkidField="",this.currentWidget.dataset.dynamic.encode.nameField="",this.currentWidget.dataset.dynamic.encode.infoFields=[]}}},m=u,p=n(768141),f=(0,p.Z)(m,l,c,!1,null,"5d9a7114",null),h=f.exports}}]);
