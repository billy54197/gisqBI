"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[22735],{56279:function(I,u,s){s.d(u,{P:function(){return a}});var g=s(386892),h=s(149500);const a={mixins:[g.D],created(){},methods:{lifecycleBeforeChartsLoad(p){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&h.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),h.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let m=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[p]);if(m)return m}return p},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&h.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),h.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(I,u,s){s.d(u,{X:function(){return g},b:function(){return h}});let g={versions:function(){var a=navigator.userAgent;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1,iPhone:a.indexOf("iPhone")>-1,iPad:a.indexOf("iPad")>-1,webApp:a.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},h;g.versions.mobile||g.versions.ios||g.versions.android||g.versions.iPhone||g.versions.iPad?h=!1:h=!0},844513:function(I,u,s){s.d(u,{Z:function(){return w}});var g=function(){var l=this,v=l._self._c;return l.attr.buttonHide?v("div",{style:{position:"absolute",right:l.attr.buttonHideRight+"px",top:l.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(C){return l.onHide()}}},[l.openTooltip?v("el-tooltip",{attrs:{"open-delay":1e3,content:l.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[v("el-button",{class:l.attr.buttonHideIconClass&&l.attr.buttonHideIconClass!=""?l.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:l.attr.buttonHideColor,fontSize:l.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):v("el-button",{class:l.attr.buttonHideIconClass&&l.attr.buttonHideIconClass!=""?l.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:l.attr.buttonHideColor,fontSize:l.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):l._e()},h=[],a=s(752246),p={props:["attr"],name:"hide-button",data(){return{isPc:a.b}},computed:{openTooltip:function(){let S=!1,l=this.attr.buttonHideTooltipContent;return a.b&&l&&l!=null&&l.trim()!=""&&(S=!0),S}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},b=p,m=s(768141),x=(0,m.Z)(b,g,h,!1,null,"bf399b9a",null),w=x.exports},722735:function(I,u,s){s.r(u),s.d(u,{default:function(){return _}});var g=function(){var t=this,r=t._self._c;return r("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[r("hide-button",{attrs:{attr:t.widgetInfo.attr}}),r("div",{ref:"comDatePicker",style:t.contStyle},[r("el-steps",{attrs:{active:t.active,space:t.widgetInfo.config.lineStyle.height,direction:t.widgetInfo.config.lineStyle.direction}},t._l(t.list,function(i,o){return r("el-step",{key:o,attrs:{icon:t.widgetInfo.config.pointStyle.iconClass,description:i.content,title:i.time},nativeOn:{click:function(n){return t.onChange(o)}}})}),1)],1)],1)},h=[],a=s(927966),p=s(126711),b=s(445061),m=s(56279),x=s(844513),w=s(555616),S=s(70411),l=s(67157);const v={mixins:[l.c],data(){return{config_extend:{config:{labelStyle:{activeStyle:{font:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14}},inactiveStyle:{font:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14}}},contentStyle:{activeStyle:{font:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14}},inactiveStyle:{font:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14}}}}},filter_config:{lineStyle:{activeStyle:{fillColor:"rgb(46 204 113)",borderColor:"rgb(46 204 113)"},inactiveStyle:{fillColor:"rgb(189 195 199)",borderColor:"rgb(189 195 199)"}},labelStyle:{activeStyle:{font:{color:"#4C84FF",fontFamily:"alibabaPuHuiTiRegular"}},inactiveStyle:{font:{color:"#303133",fontFamily:"alibabaPuHuiTiRegular"}}},contentStyle:{activeStyle:{font:{color:"#4C84FF",fontFamily:"alibabaPuHuiTiRegular"}},inactiveStyle:{font:{color:"#303133",fontFamily:"alibabaPuHuiTiRegular"}}},pointStyle:{activeStyle:{fillColor:"rgba(76, 132, 255, 0)",borderColor:"#4C84FF"},inactiveStyle:{fillColor:"rgba(191, 203, 217, 0)",borderColor:"#BFCBD9"}}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var C=s(149500),F={props:["widgetInfo"],name:"com-time-line",components:{HideButton:x.Z},mixins:[p.H,b.u,m.P,S.baseConfig,v],data(){return{list:[],active:1,timmer:null,contStyle:{},isSetStyle:!1}},watch:{"widgetInfo.attr.pause":{deep:!0,handler:function(){this.widgetInfo.attr.pause?window.clearInterval(this.timmer):this.widgetInfo.config.global.autoPlay&&(window.clearInterval(this.timmer),this.run(this.widgetInfo))}},"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},updated(){let e=this.$refs.comDatePicker.childNodes[0].childNodes;e.length>0&&!this.isSetStyle&&(this.isSetStyle=!0,this.getLineStyle(e))},methods:{loadInfo(e){this.getTimelist(e.dataset[e.dataset.type].encode,e.dataset[e.dataset.type].dimensions,e.dataset[e.dataset.type].source),this.active=e.config.global.active,this.getContStyle(),this.isSetStyle=!1,this.timmer&&window.clearInterval(this.timmer),e.config.global.autoPlay&&e.dataset[e.dataset.type].encode.time?this.run(e):window.clearInterval(this.timmer),this.lifecycleAfterLoad()},reLoadInfo(e){this.loadInfo(e)},getContStyle(){this.contStyle={paddingLeft:this.mUtils.getNewPxW(this.widgetInfo.config.global.left)+"px",paddingRight:this.mUtils.getNewPxW(this.widgetInfo.config.global.right)+"px",paddingTop:this.mUtils.getNewPxH(this.widgetInfo.config.global.top)+"px",paddingBottom:this.mUtils.getNewPxH(this.widgetInfo.config.global.bottom)+"px",cursor:"pointer"}},getLineStyle(e){let t=this.widgetInfo.config.lineStyle,r=this.widgetInfo.config.labelStyle,i=this.widgetInfo.config.contentStyle,o=this.widgetInfo.config.pointStyle;this.$$lib__.each(e,n=>{let d=n.childNodes[0].childNodes[0],c=n.childNodes[0].childNodes[1],f=n.childNodes[1].childNodes[0],y=n.childNodes[1].childNodes[1],P,L,N,H;this.widgetInfo.config.global.type=="single"?(P=n.childNodes[0].classList.value.indexOf("is-process")>0,L=n.childNodes[0].classList.value.indexOf("is-process")>0,N=f.classList.value.indexOf("is-process")>0,H=y.classList.value.indexOf("is-process")>0):this.widgetInfo.config.global.type=="continue"&&(P=n.childNodes[0].classList.value.indexOf("is-process")>0||n.childNodes[0].classList.value.indexOf("is-finish")>0,L=n.childNodes[0].classList.value.indexOf("is-process")>0||n.childNodes[0].classList.value.indexOf("is-finish")>0,N=f.classList.value.indexOf("is-process")>0||f.classList.value.indexOf("is-finish")>0,H=y.classList.value.indexOf("is-process")>0||y.classList.value.indexOf("is-finish")>0),c.style.color=o.inactiveStyle.fillColor,c.style.width=this.mUtils.getNewPxW(o.inactiveStyle.pointSize+4+o.inactiveStyle.borderWidth)+"px",c.style.height=this.mUtils.getNewPxH(o.inactiveStyle.pointSize+4+o.inactiveStyle.borderWidth)+"px",c.childNodes[0]&&c.childNodes[0].style?c.childNodes[0].style.fontSize=this.mUtils.getNewFontSize(o.inactiveStyle.pointSize)+"px":c.childNodes[1].style.fontSize=this.mUtils.getNewFontSize(o.inactiveStyle.pointSize)+"px",c.style.borderRadius="100%",c.style.borderWidth=this.mUtils.getNewPxW(o.inactiveStyle.borderWidth)+"px",c.style.borderColor=o.inactiveStyle.borderColor,c.style.borderStyle="solid",P&&(c.style.color=o.activeStyle.fillColor,c.style.borderColor=o.activeStyle.borderColor),d.style.backgroundColor=t.inactiveStyle.fillColor,d.style.color=t.inactiveStyle.fillColor,d.style.borderColor=t.inactiveStyle.borderColor,d.style.marginLeft=this.mUtils.getNewPxW(t.left)+"px",d.style.marginTop=this.mUtils.getNewPxH(t.top)+"px",f.style.marginTop=this.mUtils.getNewPxH(r.top)+"px",f.style.marginLeft=this.mUtils.getNewPxW(r.left)+"px",this.setFontStyle(f,r.inactiveStyle.font),f.style.backgroundColor=r.inactiveStyle.bgc,N&&(this.setFontStyle(f,r.activeStyle.font),f.style.backgroundColor=r.activeStyle.bgc),y.style.marginTop=this.mUtils.getNewPxH(i.top)+"px",y.style.marginLeft=this.mUtils.getNewPxW(i.left)+"px",this.setFontStyle(y,i.inactiveStyle.font),y.style.backgroundColor=i.inactiveStyle.bgc,H&&(this.setFontStyle(y,i.activeStyle.font),y.style.backgroundColor=i.activeStyle.bgc)})},startTransform(e){e.style.width="100%",e.style.borderWidth="1px",e.style.color=this.widgetInfo.config.lineStyle.activeStyle.fillColor,e.style.borderColor=this.widgetInfo.config.lineStyle.activeStyle.fillColor},endTransform(e){e.style.width="0%",e.style.borderWidth="0px",e.style.color=this.widgetInfo.config.lineStyle.inactiveStyle.fillColor,e.style.borderColor=this.widgetInfo.config.lineStyle.inactiveStyle.fillColor},setFontStyle(e,t){e.style.fontSize=this.mUtils.getNewFontSize(t.fontSize)+"px",e.style.fontFamily=t.fontFamily,e.style.color=t.color,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.textAlign=t.horizontalAlignment,e.style.textDecoration=t.textDecoration},getTimelist(e,t,r){let i=e.time,o=e.content,n,d;this.$$lib__.each(t,(c,f)=>{c==i&&(n=f),c==o&&(d=f)}),this.list=[],n!=null&&this.$$lib__.each(r,c=>{let f={time:n!=null?c[n]:"",content:d!=null?c[d]:""};this.list.push(f)})},run(e){let t=this,r=t.active;this.timmer=window.setInterval(()=>{t.active<t.list.length-1?t.active+=1:(t.active=0,e.config.global.loop||(t.active=r,window.clearInterval(t.timmer))),t.$nextTick(()=>{let o=t.$refs.comDatePicker.childNodes[0].childNodes;o.length>0&&t.getLineStyle(o)});let i=e.action.sendOut.actionList;for(let o=0;o<i.length;o++)i[o].code=="change"&&i[o].enabled&&t.onChange(t.active)},e.config.global.interval*1e3)},initAction(e){this.actionReceive(e)},onChange(e){let t=this;t.active=e,t.$nextTick(()=>{let i=t.$refs.comDatePicker.childNodes[0].childNodes;i.length>0&&t.getLineStyle(i)});let r=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(r,i=>{if(i.enabled){if(i.code==t.$$global_editor.actionType.change.code){let o=t.$$global_editor.actionType.change.code+"_"+t.widgetInfo.id,n={time:t.list[e].time};if(i.paramsExtend&&i.paramsExtend.length>0){let d=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(d=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[e]),this.getExtendParams(n,i.paramsExtend,d,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(C.log("Execute script for "+i.name+" component to "+i.script.title+" component"),i.script.content==""){w.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",i.script.content),n=this.customScript_actionSend_clickParam(n)}a.Z.$emit(o,n),i.postMessage&&this.doPostMessage(n),this.actionNameList.push(o)}else if(i.code==t.$$global_editor.actionType.click.code){let o=t.$$global_editor.actionType.click.code+"_"+t.widgetInfo.id,n={time:this.list[e].time};if(i.paramsExtend&&i.paramsExtend.length>0){let d=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(d=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[e]),this.getExtendParams(n,i.paramsExtend,d,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(C.log("Execute script for "+i.name+" component to "+i.script.title+" component"),i.script.content==""){w.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",i.script.content),n=this.customScript_actionSend_clickParam(n)}a.Z.$emit(o,n),this.actionNameList.push(o),i.postMessage&&this.doPostMessage(n)}}})}},beforeDestroy(){window.clearInterval(this.timmer)}},T=F,O=s(768141),$=(0,O.Z)(T,g,h,!1,null,"e8c2f6a6",null),_=$.exports}}]);
