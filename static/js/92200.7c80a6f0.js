"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[92200],{56279:function(A,v,s){s.d(v,{P:function(){return h}});var p=s(386892),g=s(149500);const h={mixins:[p.D],created(){},methods:{lifecycleBeforeChartsLoad(I){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&g.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),g.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let L=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[I]);if(L)return L}return I},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&g.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),g.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(A,v,s){s.d(v,{X:function(){return p},b:function(){return g}});let p={versions:function(){var h=navigator.userAgent;return{trident:h.indexOf("Trident")>-1,presto:h.indexOf("Presto")>-1,webKit:h.indexOf("AppleWebKit")>-1,gecko:h.indexOf("Gecko")>-1&&h.indexOf("KHTML")==-1,mobile:!!h.match(/AppleWebKit.*Mobile.*/),ios:!!h.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:h.indexOf("Android")>-1,iPhone:h.indexOf("iPhone")>-1,iPad:h.indexOf("iPad")>-1,webApp:h.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},g;p.versions.mobile||p.versions.ios||p.versions.android||p.versions.iPhone||p.versions.iPad?g=!1:g=!0},492200:function(A,v,s){s.r(v),s.d(v,{default:function(){return W}});var p=function(){var i=this,c=i._self._c;return c("div",{style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"}},[c("hide-button",{attrs:{attr:i.widgetInfo.attr}}),c("div",{ref:"pieThreeDimensional",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"},attrs:{id:"pieThreeDimensional"}})],1)},g=[],h=s(844513),I=s(235776),f=s.n(I),L=s(7715),N=s.n(L),F=s(927966),H=s(56279),l=s(445061),C=s(126711),D=s(368326),R=s(67157),G=s(150813);const k={mixins:[R.c],data(){return{config_extend:{},filter_config:{legend:{style:{color:""},itemStyle:{color:""}},series:{colors:["#29CC97"],dataLabels:{style:{color:"rgba(52, 73, 94, 1)"}}}}}},methods:{filterPredefineColoursSchemeConfig(t,i){this.getNewConfigWithArrary(t,i,this.filter_config)}}};var B=s(99349),_=s(555616),J=s(275770),E=s(149500);N()(f());var K={name:"PieThreeDimensional",components:{HideButton:h.Z},mixins:[H.P,l.u,C.H,B.P,f(),D.baseConfig,k],props:["widgetInfo"],data(){return{}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{initAction(t){this.actionReceive(t)},loadInfo(t){f().wrap(f().seriesTypes.pie.prototype.pointClass.prototype,"getTranslate",function(o){var r=o.apply(this,[].slice.call(arguments,1));return this.height&&this.height!=""&&(r.translateY=-this.height),r}),f().wrap(f().seriesTypes.pie.prototype,"translate",function(o){if(o.apply(this,[].slice.call(arguments,1)),!!this.chart.is3d()&&!(t.dataset[t.dataset.type].encode.height==null||t.dataset[t.dataset.type].encode.height=="")){var r=this,u=r.chart,u=r.chart,w=u.options,y=r.options,x=y.depth||0,P=w.chart.options3d,S=P.alpha,X=P.beta,$=y.stacking?(y.stack||0)*x:r._i*x;$+=x/2,y.grouping!==!1&&($=0),r.data.forEach(T=>{var z=T.shapeArgs;T.shapeType="arc3d";var M=T.options.height;z.z=$,z.depth=x*.75+Math.abs(M)||x,z.alpha=S,z.beta=X,z.center=r.center,z.ran=M,T.slicedTranslation.translateX*=2,T.slicedTranslation.translateY=-M})}}),function(o){o.wrap(f().SVGRenderer.prototype,"arc3dPath",function(r){var u=r.apply(this,[].slice.call(arguments,1));return u.zTop=(u.zOut+.5)/100,u})}(f());let i=this.getSeriesData(t.dataset[t.dataset.type].source,t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].encode),c=JSON.parse(JSON.stringify(t)),d=JSON.parse(JSON.stringify(c.config.chart)),b=this.getLegend(JSON.parse(JSON.stringify(c.config.legend))),a=JSON.parse(JSON.stringify(c.config.tooltip)),e=JSON.parse(JSON.stringify(c.config.series)),n=this;if(e.dataLabels.formatter&&e.dataLabels.formatter.script)if(e.dataLabels.formatter.scriptontent){let o=new Function("params",e.dataLabels.formatter.scriptontent);e.dataLabels.formatter=function(){let r=this,u={data:{},name:this.key,percent:Math.floor(this.percentage*100)/100},w=n.widgetInfo.dataset,y=w[w.type],x=y.dimensions.indexOf(y.encode.name);if(x>-1){let P=y.source.find(S=>r.key==S[x]);for(let S=0;S<P.length;++S)u.data[y.dimensions[S]]=P[S]}return o.call(n,u)}}else E.error("\u542F\u7528\u81EA\u5B9A\u4E49\u6807\u7B7E\uFF0C\u4F46\u672A\u586B\u5199\u4EFB\u4F55\u811A\u672C\u5185\u5BB9");else if(e.dataLabels.formatter&&e.dataLabels.formatter.show){let o=e.dataLabels.formatter,r="";if(o.str_start&&(r+=o.str_start),o.a){let u=n.widgetInfo.dataset,w=u[u.type],y=w.dimensions.indexOf(w.encode.name);r+=w.dimensionsAlias[y].alias,o.str_a&&(r+=o.str_a)}o.b&&(r+="{point.name}",o.str_b&&(r+=o.str_b)),o.c&&(r+="{point.y}",o.str_c&&(r+=o.str_c)),o.d&&(r+="{point.percentage:.2f}",o.str_d&&(r+=o.str_d)),o.str_end&&(r+=o.str_end),delete e.dataLabels.formatter,e.dataLabels.format=r}else delete e.dataLabels.formatter,e.dataLabels.format="{point.name}";let m=e.dataLabels.style;m.textShadow&&(m.textShadow=m.hShadow+"px "+m.vShadow+"px "+m.textShadowColor||"rgba(0,0,0,0)");let O={chart:{type:"pie",options3d:{enabled:!0,alpha:d.options3d.alpha,beta:d.options3d.beta,viewDistance:25},width:c.attr.w,height:c.attr.hh,marginLeft:d.marginLeft,marginRight:d.marginRight,marginTop:d.marginTop,marginBottom:d.marginBottom,backgroundColor:"rgba(255,255,255,0)"},title:{text:""},credits:{enabled:!1},legend:b,tooltip:a,plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0},showInLegend:b.enabled,events:{click:o=>{n.onClick(o.point)}}}},series:[{type:"pie",name:e.name,animation:{duration:e.animation.duration*1e3},colors:e.colors,center:[e.center[0]+"%",e.center[1]+"%"],startAngle:e.startAngle,depth:d.options3d.depth,minSize:e.minSize,innerSize:e.innerSize,size:e.size,label:e.label,dataLabels:e.dataLabels,states:e.states,data:i}]};c.config.series.colorCustom&&(O.series[0].colors=e.colors.length>0?e.colors:f().getOptions().colors),c.config.series&&!c.config.series.colorCustom&&(O.series[0].colors=f().getOptions().colors),f().chart(this.$refs.pieThreeDimensional,this.lifecycleBeforeChartsLoad(O))},reLoadInfo(t){this.loadInfo(t)},getSeriesData(t,i,c){let d,b,a;this.$$lib__.each(i,(n,m)=>{n==c.name&&(d=m),n==c.value&&(b=m),n==c.height&&(a=m)});let e=[];return this.$$lib__.each(t,n=>{e.push({name:n[d],y:parseFloat(n[b]),height:parseFloat(n[a])})}),e},onClick(t){let i=this.widgetInfo,c=[],d=this,b=i.action.sendOut.actionList;d.$$lib__.each(b,a=>{let e=a.code+"_"+i.id,n={};a.paramsExtend&&a.paramsExtend.length>0&&d.getParamsExtend(n,a.paramsExtend,i);let m=a.postMessage;if(n.name=t.name,n.value=t.y,a.enabled&&a.code==J.default.click.code){if(i.dataset[i.dataset.type].source&&i.dataset[i.dataset.type].source.length>0&&(c=i.dataset[i.dataset.type].source[t.index]),d.getExtendParams(n,a.paramsExtend,c,i.dataset[i.dataset.type].dimensions),a.script&&a.script.enabled){if(E.log("Execute script for "+d.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){_.Message.warning({message:a.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param,params",a.script.content),n=this.customScript_actionSend_clickParam(n,t)}F.Z.$emit(e,n),m&&d.doPostMessage(n)}else if(a.enabled&&a.code==J.default.click.openLink.code){if(a.paramsExtend&&a.paramsExtend.length>0){let O=[];i.dataset[i.dataset.type].source&&i.dataset[i.dataset.type].source.length>0&&(O=i.dataset[i.dataset.type].source[t.index]),a.type===d.$$global_editor.linkType.dynamic.code&&(a[d.$$global_editor.linkType.dynamic.code].url=d.getActionUrl(a,i.dataset[i.dataset.type].source[t.index],i.dataset[i.dataset.type].dimensions)),d.getExtendParams(n,a.paramsExtend,O,i.dataset[i.dataset.type].dimensions)}if(a.script&&a.script.enabled){if(E.log("Execute script for "+d.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){_.Message.warning({message:a.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param,params",a.script.content),n=this.customScript_actionSend_clickParam(n,t)}d.openLinkAction(a,n,t)}})},getLegend(t){return t.itemStyle&&t.itemStyle.fontSize&&(t.itemStyle.fontSize=t.itemStyle.fontSize+"px"),t.itemHoverStyle&&t.itemHoverStyle.fontSize&&(t.itemHoverStyle.fontSize=t.itemHoverStyle.fontSize+"px"),t.itemHiddenStyle&&t.itemHiddenStyle.fontSize&&(t.itemHiddenStyle.fontSize=t.itemHiddenStyle.fontSize+"px"),t.labelFormatter=this.getLabelFormatter(t.labelFormatter),t},getLabelFormatter(t){let i=this.widgetInfo.dataset[this.widgetInfo.dataset.type],c="",d="";if(i.dimensionsAlias&&i.encode)for(let e in i.dimensionsAlias){let n=i.dimensionsAlias[e];n.name==i.encode.name&&(c=n.alias),n.name==i.encode.value&&(d=n.alias)}let b=this;return function(){if(t.script)return new Function("params",t.scriptontent).apply(b,[this]);if(t.show){let e="";return t.str_start&&(e+=t.str_start),t.a&&(e+=c,t.str_a&&(e+=t.str_a)),t.b&&(e+=this.name,t.str_b&&(e+=t.str_b)),t.c&&(e+=this.y,t.str_c&&(e+=t.str_c)),t.d&&(e+=parseFloat(this.percentage).toFixed(2),t.str_d&&t.str_d!=""?e+=t.str_d:e+="%"),t.str_end&&(e+=t.str_end),e.replace(/\\n/g,"<br/>")}else return this.name+""}},resize(){let t=this.$refs.pieThreeDimensional;t.firstChild.style.width=this.widgetInfo.attr.w+"px",t.firstChild.style.height=this.widgetInfo.attr.h+"px",t.firstChild.firstChild.style.width=this.widgetInfo.attr.w+"px",t.firstChild.firstChild.style.height=this.widgetInfo.attr.h+"px",t.firstChild.childNodes[0].childNodes[2].style.width=this.widgetInfo.attr.w+"px",t.firstChild.childNodes[0].childNodes[2].style.height=this.widgetInfo.attr.h+"px",this.loadInfo(this.widgetInfo)}}},Z=K,j=s(768141),U=(0,j.Z)(Z,p,g,!1,null,"673ed90b",null),W=U.exports},844513:function(A,v,s){s.d(v,{Z:function(){return F}});var p=function(){var l=this,C=l._self._c;return l.attr.buttonHide?C("div",{style:{position:"absolute",right:l.attr.buttonHideRight+"px",top:l.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(D){return l.onHide()}}},[l.openTooltip?C("el-tooltip",{attrs:{"open-delay":1e3,content:l.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[C("el-button",{class:l.attr.buttonHideIconClass&&l.attr.buttonHideIconClass!=""?l.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:l.attr.buttonHideColor,fontSize:l.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):C("el-button",{class:l.attr.buttonHideIconClass&&l.attr.buttonHideIconClass!=""?l.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:l.attr.buttonHideColor,fontSize:l.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):l._e()},g=[],h=s(752246),I={props:["attr"],name:"hide-button",data(){return{isPc:h.b}},computed:{openTooltip:function(){let H=!1,l=this.attr.buttonHideTooltipContent;return h.b&&l&&l!=null&&l.trim()!=""&&(H=!0),H}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},f=I,L=s(768141),N=(0,L.Z)(f,p,g,!1,null,"bf399b9a",null),F=N.exports}}]);
