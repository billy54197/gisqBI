(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[9372],{67367:function(_,R,S){var G,O;(function(h){_.exports?(h.default=h,_.exports=h):(G=[S(35776),S(7715)],O=function(F){return h(F),h.Highcharts=F,h}.apply(R,G),O!==void 0&&(_.exports=O))})(function(h){function F(C,v,I,f){C.hasOwnProperty(v)||(C[v]=f.apply(null,I),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:v,module:C[v]}})))}h=h?h._modules:{},F(h,"Series/Cylinder/CylinderPoint.js",[h["Core/Series/SeriesRegistry.js"],h["Core/Utilities.js"]],function(C,v){var I=this&&this.__extends||function(){var f=function(w,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,E){b.__proto__=E}||function(b,E){for(var x in E)E.hasOwnProperty(x)&&(b[x]=E[x])},f(w,m)};return function(w,m){function b(){this.constructor=w}f(w,m),w.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}}();return v=v.extend,C=function(f){function w(){var m=f!==null&&f.apply(this,arguments)||this;return m.options=void 0,m.series=void 0,m}return I(w,f),w}(C.seriesTypes.column.prototype.pointClass),v(C.prototype,{shapeType:"cylinder"}),C}),F(h,"Series/Cylinder/CylinderComposition.js",[h["Core/Color/Color.js"],h["Core/Globals.js"],h["Core/Math3D.js"],h["Core/Renderer/RendererRegistry.js"],h["Core/Utilities.js"]],function(C,v,I,f,w){var m=C.parse,b=v.charts,E=v.deg2rad,x=I.perspective;C=w.merge;var A=w.pick;f=f.getRendererType().prototype;var M=f.cuboidPath,j=function(r){return!r.some(function(s){return s[0]==="C"})};w=C(f.elements3d.cuboid,{parts:["top","bottom","front","back"],pathType:"cylinder",fillSetter:function(r){return this.singleSetterForParts("fill",null,{front:r,back:r,top:m(r).brighten(.1).get(),bottom:m(r).brighten(-.1).get()}),this.color=this.fill=r,this}}),f.elements3d.cylinder=w,f.cylinder=function(r){return this.element3d("cylinder",r)},f.cylinderPath=function(r){var s=b[this.chartIndex],o=M.call(this,r),e=!o.isTop,n=!o.isFront,u=this.getCylinderEnd(s,r);return r=this.getCylinderEnd(s,r,!0),{front:this.getCylinderFront(u,r),back:this.getCylinderBack(u,r),top:u,bottom:r,zIndexes:{top:e?3:0,bottom:e?0:3,front:n?2:1,back:n?1:2,group:o.zIndexes.group}}},f.getCylinderFront=function(r,s){if(r=r.slice(0,3),j(s)){var o=s[0];o[0]==="M"&&(r.push(s[2]),r.push(s[1]),r.push(["L",o[1],o[2]]))}else{o=s[0];var e=s[1];s=s[2],o[0]==="M"&&e[0]==="C"&&s[0]==="C"&&(r.push(["L",s[5],s[6]]),r.push(["C",s[3],s[4],s[1],s[2],e[5],e[6]]),r.push(["C",e[3],e[4],e[1],e[2],o[1],o[2]]))}return r.push(["Z"]),r},f.getCylinderBack=function(r,s){var o=[];if(j(r)){var e=r[0],n=r[2];e[0]==="M"&&n[0]==="L"&&(o.push(["M",n[1],n[2]]),o.push(r[3]),o.push(["L",e[1],e[2]]))}else r[2][0]==="C"&&o.push(["M",r[2][5],r[2][6]]),o.push(r[3],r[4]);return j(s)?(e=s[0],e[0]==="M"&&(o.push(["L",e[1],e[2]]),o.push(s[3]),o.push(s[2]))):(r=s[2],e=s[3],s=s[4],r[0]==="C"&&e[0]==="C"&&s[0]==="C"&&(o.push(["L",s[5],s[6]]),o.push(["C",s[3],s[4],s[1],s[2],e[5],e[6]]),o.push(["C",e[3],e[4],e[1],e[2],r[5],r[6]]))),o.push(["Z"]),o},f.getCylinderEnd=function(r,s,o){var e=s.width;e=e===void 0?0:e;var n=s.height,u=n===void 0?0:n;n=s.alphaCorrection;var d=n===void 0?0:n;n=A(s.depth,e,0);var c=Math.min(e,n)/2;d=E*(r.options.chart.options3d.beta-90+d),o=(s.y||0)+(o?u:0),u=.5519*c;var t=e/2+(s.x||0),i=n/2+(s.z||0),l=[{x:0,y:o,z:c},{x:u,y:o,z:c},{x:c,y:o,z:u},{x:c,y:o,z:0},{x:c,y:o,z:-u},{x:u,y:o,z:-c},{x:0,y:o,z:-c},{x:-u,y:o,z:-c},{x:-c,y:o,z:-u},{x:-c,y:o,z:0},{x:-c,y:o,z:u},{x:-u,y:o,z:c},{x:0,y:o,z:c}],a=Math.cos(d),L=Math.sin(d),p,g;return l.forEach(function(y,z){p=y.x,g=y.z,l[z].x=p*a-g*L+t,l[z].z=g*a+p*L+i}),r=x(l,r,!0),2.5>Math.abs(r[3].y-r[9].y)&&2.5>Math.abs(r[0].y-r[6].y)?this.toLinePath([r[0],r[3],r[6],r[9]],!0):this.getCurvedPath(r)},f.getCurvedPath=function(r){var s=[["M",r[0].x,r[0].y]],o=r.length-2,e;for(e=1;e<o;e+=3)s.push(["C",r[e].x,r[e].y,r[e+1].x,r[e+1].y,r[e+2].x,r[e+2].y]);return s}}),F(h,"Series/Cylinder/CylinderSeries.js",[h["Series/Cylinder/CylinderPoint.js"],h["Core/Series/SeriesRegistry.js"],h["Core/Utilities.js"]],function(C,v,I){var f=this&&this.__extends||function(){var E=function(x,A){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,j){M.__proto__=j}||function(M,j){for(var r in j)j.hasOwnProperty(r)&&(M[r]=j[r])},E(x,A)};return function(x,A){function M(){this.constructor=x}E(x,A),x.prototype=A===null?Object.create(A):(M.prototype=A.prototype,new M)}}(),w=v.seriesTypes.column,m=I.extend,b=I.merge;return I=function(E){function x(){var A=E!==null&&E.apply(this,arguments)||this;return A.data=void 0,A.options=void 0,A.points=void 0,A}return f(x,E),x.defaultOptions=b(w.defaultOptions),x}(w),m(I.prototype,{pointClass:C}),v.registerSeriesType("cylinder",I),I}),F(h,"masters/modules/cylinder.src.js",[],function(){})})},80153:function(_,R,S){var G,O;(function(h){_.exports?(h.default=h,_.exports=h):(G=[S(35776),S(7715),S(67367)],O=function(F){return h(F),h.Highcharts=F,h}.apply(R,G),O!==void 0&&(_.exports=O))})(function(h){function F(C,v,I,f){C.hasOwnProperty(v)||(C[v]=f.apply(null,I),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:v,module:C[v]}})))}h=h?h._modules:{},F(h,"Series/Funnel3D/Funnel3DComposition.js",[h["Core/Color/Color.js"],h["Core/Globals.js"],h["Core/Renderer/SVG/SVGRenderer3D.js"],h["Core/Utilities.js"]],function(C,v,I,f){var w=C.parse,m=v.charts,b=f.error,E=f.extend,x=f.merge,A;return function(M){function j(s){s.funnel3d=x(s.cuboid,{parts:"top bottom frontUpper backUpper frontLower backLower rightUpper rightLower".split(" "),mainParts:["top","bottom"],sideGroups:["upperGroup","lowerGroup"],sideParts:{upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},pathType:"funnel3d",opacitySetter:function(o){var e=this,n=e.parts,u=v.charts[e.renderer.chartIndex],d="group-opacity-"+o+"-"+u.index;return e.parts=e.mainParts,e.singleSetterForParts("opacity",o),e.parts=n,u.renderer.filterId||(u.renderer.definition({tagName:"filter",attributes:{id:d},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+o}}]}]}),e.sideGroups.forEach(function(c){e[c].attr({filter:"url(#"+d+")"})}),e.renderer.styledMode&&(u.renderer.definition({tagName:"style",textContent:".highcharts-"+d+" {filter:url(#"+d+")}"}),e.sideGroups.forEach(function(c){c.addClass("highcharts-"+d)}))),e},fillSetter:function(o){var e=this,n=w(o),u=n.rgba[3],d={top:w(o).brighten(.1).get(),bottom:w(o).brighten(-.2).get()};return 1>u?(n.rgba[3]=1,n=n.get("rgb"),e.attr({opacity:u})):n=o,n.linearGradient||n.radialGradient||!e.gradientForSides||(n={linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,w(o).brighten(-.2).get()],[.5,o],[1,w(o).brighten(-.2).get()]]}),n.linearGradient?e.sideGroups.forEach(function(c){var t=e[c].gradientBox,i=n.linearGradient,l=x(n,{linearGradient:{x1:t.x+i.x1*t.width,y1:t.y+i.y1*t.height,x2:t.x+i.x2*t.width,y2:t.y+i.y2*t.height}});e.sideParts[c].forEach(function(a){d[a]=l})}):(x(!0,d,{frontUpper:n,backUpper:n,rightUpper:n,frontLower:n,backLower:n,rightLower:n}),n.radialGradient&&e.sideGroups.forEach(function(c){var t=e[c].gradientBox,i=t.x+t.width/2,l=t.y+t.height/2,a=Math.min(t.width,t.height);e.sideParts[c].forEach(function(L){e[L].setRadialReference([i,l,a])})})),e.singleSetterForParts("fill",null,d),e.color=e.fill=o,n.linearGradient&&[e.frontLower,e.frontUpper].forEach(function(c){(c=(c=c.element)&&e.renderer.gradients[c.gradient])&&c.attr("gradientUnits")!=="userSpaceOnUse"&&c.attr({gradientUnits:"userSpaceOnUse"})}),e},adjustForGradient:function(){var o=this,e;o.sideGroups.forEach(function(n){var u={x:Number.MAX_VALUE,y:Number.MAX_VALUE},d={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};o.sideParts[n].forEach(function(c){e=o[c].getBBox(!0),u={x:Math.min(u.x,e.x),y:Math.min(u.y,e.y)},d={x:Math.max(d.x,e.x+e.width),y:Math.max(d.y,e.y+e.height)}}),o[n].gradientBox={x:u.x,width:d.x-u.x,y:u.y,height:d.y-u.y}})},zIndexSetter:function(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)},onAdd:function(){this.adjustForGradient(),this.finishedOnAdd=!0}})}function r(s){var o=s.prototype;E(o,{funnel3d:function(e){var n=this.element3d("funnel3d",e),u=this.styledMode,d={"stroke-width":1,stroke:"none"};return n.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:n.frontUpper.zIndex}).add(n),[n.frontUpper,n.backUpper,n.rightUpper].forEach(function(c){u||c.attr(d),c.add(n.upperGroup)}),n.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:n.frontLower.zIndex}).add(n),[n.frontLower,n.backLower,n.rightLower].forEach(function(c){u||c.attr(d),c.add(n.lowerGroup)}),n.gradientForSides=e.gradientForSides,n},funnel3dPath:function(e){this.getCylinderEnd||b("A required Highcharts module is missing: cylinder.js",!0,m[this.chartIndex]);var n=m[this.chartIndex],u=e.alphaCorrection=90-Math.abs(n.options.chart.options3d.alpha%180-90),d=o.cuboidPath.call(this,x(e,{depth:e.width,width:(e.width+e.bottom.width)/2})),c=d.isTop,t=!d.isFront,i=!!e.middle,l=this.getCylinderEnd(n,x(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:u})),a=e.bottom.width,L=x(e,{width:a,x:e.x-a/2,z:e.z-a/2,alphaCorrection:u}),p=this.getCylinderEnd(n,L,!0),g=a,y=L,z=p,U=p;return i&&(g=e.middle.width,y=x(e,{y:e.y+e.middle.fraction*e.height,width:g,x:e.x-g/2,z:e.z-g/2}),z=this.getCylinderEnd(n,y,!1),U=this.getCylinderEnd(n,y,!1)),d={top:l,bottom:p,frontUpper:this.getCylinderFront(l,z),zIndexes:{group:d.zIndexes.group,top:c!==0?0:3,bottom:c!==1?0:3,frontUpper:t?2:1,backUpper:t?1:2,rightUpper:t?2:1}},d.backUpper=this.getCylinderBack(l,z),l=Math.min(g,e.width)/Math.max(g,e.width)!==1,d.rightUpper=this.getCylinderFront(this.getCylinderEnd(n,x(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:l?-u:0}),!1),this.getCylinderEnd(n,x(y,{alphaCorrection:l?-u:0}),!i)),i&&(l=Math.min(g,a)/Math.max(g,a)!==1,x(!0,d,{frontLower:this.getCylinderFront(U,p),backLower:this.getCylinderBack(U,p),rightLower:this.getCylinderFront(this.getCylinderEnd(n,x(L,{alphaCorrection:l?-u:0}),!0),this.getCylinderEnd(n,x(y,{alphaCorrection:l?-u:0}),!1)),zIndexes:{frontLower:t?2:1,backLower:t?1:2,rightLower:t?1:2}})),d}})}M.compose=function(s){I.compose(s),j(s.prototype.elements3d),r(s)}}(A||(A={})),A}),F(h,"Series/Funnel3D/Funnel3DPoint.js",[h["Core/Series/SeriesRegistry.js"],h["Core/Utilities.js"]],function(C,v){var I=this&&this.__extends||function(){var f=function(w,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,E){b.__proto__=E}||function(b,E){for(var x in E)E.hasOwnProperty(x)&&(b[x]=E[x])},f(w,m)};return function(w,m){function b(){this.constructor=w}f(w,m),w.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}}();return v=v.extend,C=function(f){function w(){var m=f!==null&&f.apply(this,arguments)||this;return m.dlBoxRaw=void 0,m.options=void 0,m.series=void 0,m.y=void 0,m}return I(w,f),w}(C.seriesTypes.column.prototype.pointClass),v(C.prototype,{shapeType:"funnel3d"}),C}),F(h,"Series/Funnel3D/Funnel3DSeries.js",[h["Series/Funnel3D/Funnel3DComposition.js"],h["Series/Funnel3D/Funnel3DPoint.js"],h["Core/Globals.js"],h["Core/Math3D.js"],h["Core/Series/SeriesRegistry.js"],h["Core/Utilities.js"]],function(C,v,I,f,w,m){var b=this&&this.__extends||function(){var o=function(e,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var c in d)d.hasOwnProperty(c)&&(u[c]=d[c])},o(e,n)};return function(e,n){function u(){this.constructor=e}o(e,n),e.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)}}();I=I.noop;var E=f.perspective,x=w.series,A=w.seriesTypes.column,M=m.extend,j=m.merge,r=m.pick,s=m.relativeLength;return f=function(o){function e(){var n=o!==null&&o.apply(this,arguments)||this;return n.center=void 0,n.data=void 0,n.options=void 0,n.points=void 0,n}return b(e,o),e.prototype.alignDataLabel=function(n,u,d){var c=n.dlBoxRaw,t=this.chart.inverted,i=n.plotY>r(this.translatedThreshold,this.yAxis.len),l=r(d.inside,!!this.options.stacking),a={x:c.x,y:c.y,height:0};d.align=r(d.align,!t||l?"center":i?"right":"left"),d.verticalAlign=r(d.verticalAlign,t||l?"middle":i?"top":"bottom"),d.verticalAlign!=="top"&&(a.y+=c.bottom/(d.verticalAlign==="bottom"?1:2)),a.width=this.getWidthAt(a.y),this.options.reversed&&(a.width=c.fullWidth-a.width),l?a.x-=a.width/2:d.align==="left"?(d.align="right",a.x-=1.5*a.width):d.align==="right"?(d.align="left",a.x+=a.width/2):a.x-=a.width/2,n.dlBox=a,A.prototype.alignDataLabel.apply(this,arguments)},e.prototype.bindAxes=function(){x.prototype.bindAxes.apply(this,arguments),M(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),j(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})},e.prototype.translate=function(){x.prototype.translate.apply(this,arguments);var n=0,u=this.chart,d=this.options,c=d.reversed,t=d.ignoreHiddenPoint,i=u.plotWidth,l=u.plotHeight,a=0,L=d.center,p=s(L[0],i),g=s(L[1],l),y=s(d.width,i),z,U,k=s(d.height,l),J=s(d.neckWidth,i),$=s(d.neckHeight,l),B=g-k/2+k-$;i=this.data;var T,Z,N,H,Y,W,D;this.getWidthAt=U=function(P){var V=g-k/2;return P>B||k===$?J:J+(y-J)*(1-(P-V)/(k-$))},this.center=[p,g,k],this.centerX=p,i.forEach(function(P){t&&P.visible===!1||(n+=P.y)}),i.forEach(function(P){Y=null,T=n?P.y/n:0,N=g-k/2+a*k,H=N+T*k,z=U(N),W=H-N,D={gradientForSides:r(P.options.gradientForSides,d.gradientForSides),x:p,y:N,height:W,width:z,z:1,top:{width:z}},z=U(H),D.bottom={fraction:T,width:z},N>=B?D.isCylinder=!0:H>B&&(Y=H,z=U(B),H=B,D.bottom.width=z,D.middle={fraction:W?(B-N)/W:0,width:z}),c&&(D.y=N=g+k/2-(a+T)*k,D.middle&&(D.middle.fraction=1-(W?D.middle.fraction:0)),z=D.width,D.width=D.bottom.width,D.bottom.width=z),P.shapeArgs=M(P.shapeArgs,D),P.percentage=100*T,P.plotX=p,P.plotY=c?g+k/2-(a+T/2)*k:(N+(Y||H))/2,Z=E([{x:p,y:P.plotY,z:c?-(y-U(P.plotY))/2:-U(P.plotY)/2}],u,!0)[0],P.tooltipPos=[Z.x,Z.y],P.dlBoxRaw={x:p,width:U(P.plotY),y:N,bottom:D.height||0,fullWidth:y},t&&P.visible===!1||(a+=T)})},e.compose=C.compose,e.defaultOptions=j(A.defaultOptions,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}),e}(A),M(f.prototype,{pointClass:v,translate3dShapes:I}),w.registerSeriesType("funnel3d",f),f}),F(h,"masters/modules/funnel3d.src.js",[h["Core/Renderer/RendererRegistry.js"],h["Series/Funnel3D/Funnel3DSeries.js"]],function(C,v){return v.compose(C.getRendererType()),v})})},56279:function(_,R,S){"use strict";S.d(R,{P:function(){return h}});var G=S(86892),O=S(49500);const h={mixins:[G.D],created(){},methods:{lifecycleBeforeChartsLoad(F){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&O.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),O.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let v=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[F]);if(v)return v}return F},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&O.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),O.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},9372:function(_,R,S){"use strict";S.r(R),S.d(R,{default:function(){return c}});var G=function(){var i=this,l=i._self._c;return l("div",{style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"}},[l("hide-button",{attrs:{attr:i.widgetInfo.attr}}),l("div",{ref:"funnel3d",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"}})],1)},O=[],h=S(44513),F=S(27966),C=S(7984),v=S(67157),I=S(50666);const f={mixins:[v.c],data(){return{config_extend:{},filter_config:{title:JSON.parse(JSON.stringify(I.Z.charts.title)),legend:JSON.parse(JSON.stringify(I.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(I.Z.charts.tooltip))}}},methods:{filterPredefineColoursSchemeConfig(t,i){t.series.colors=JSON.parse(JSON.stringify(i.series.colors)),this.getNewConfigWithArrary(t,i,this.filter_config)}}};var w=S(56279),m=S(45061),b=S(26711),E=S(99349),x=S(55616),A=S(75770),M=S(49500);const j=S(35776),r=S(7715),s=S(67367),o=S(80153);r(j),o(j),s(j);var e={name:"FunnelThreeDimensional",components:{HideButton:h.Z},mixins:[C.u,f,w.P,m.u,b.H,E.P],props:["widgetInfo"],data(){return{}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.loadInfo(this.widgetInfo),this.initAction(this.widgetInfo)},destroyed(){},methods:{loadInfo(t){let i=JSON.parse(JSON.stringify(t)),l=this.getChart(i.config.chart),a=this.getTitle(i.config.title),L=this.getLegend(i.config.legend),p=this.getTooltip(i),g=this.getPlotOptions(i.config.plotOptions),y=this.getSeries(i),z={chart:l,title:a,credits:{enabled:!1},legend:L,tooltip:p,plotOptions:g,series:y};j.chart(this.$refs.funnel3d,this.lifecycleBeforeChartsLoad(z))},reLoadInfo(t){t&&(this.$refs.funnel3d.style.width=t.attr.w+"px",this.$refs.funnel3d.style.height=t.attr.hh+"px"),this.loadInfo(t)},getChart(t){return t.width=this.widgetInfo.attr.w,t.height=this.widgetInfo.attr.hh,t},getTitle(t){return t.style&&t.style.fontSize&&(t.style.fontSize=t.style.fontSize+"px"),t},getLegend(t){return t.itemStyle&&t.itemStyle.fontSize&&(t.itemStyle.fontSize=t.itemStyle.fontSize+"px"),t.itemHoverStyle&&t.itemHoverStyle.fontSize&&(t.itemHoverStyle.fontSize=t.itemHoverStyle.fontSize+"px"),t.itemHiddenStyle&&t.itemHiddenStyle.fontSize&&(t.itemHiddenStyle.fontSize=t.itemHiddenStyle.fontSize+"px"),t.labelFormatter=this.getLabelFormatter(t.labelFormatter),t},getLabelFormatter(t){let i=this.widgetInfo.dataset[this.widgetInfo.dataset.type],l="",a="";if(i.dimensionsAlias&&i.encode)for(let g in i.dimensionsAlias){let y=i.dimensionsAlias[g];y.name==i.encode.name&&(l=y.alias),y.name==i.encode.value&&(a=y.alias)}let L=this;return function(){if(t.script)return new Function("params",t.scriptontent).apply(L,[this]);if(t.show){let g="";return t.str_start&&(g+=t.str_start),t.a&&(g+=l,t.str_a&&(g+=t.str_a)),t.b&&(g+=this.name,t.str_b&&(g+=t.str_b)),t.c&&(g+=a,t.str_c&&(g+=t.str_c)),t.d&&(g+=this.percentage,t.str_d&&t.str_d!=""?g+=t.str_d:g+="%"),t.str_end&&(g+=t.str_end),g.replace(/\\n/g,"<br/>")}else return this.name}},getTooltip(t){let i=this.getCensusTotal(t);return t.config.tooltip.formatter=function(){if(this.color!="transparent"){let l=(this.y/i*100).toFixed(2),a="<b>"+this.key+"</b><br/>";return a+="<b>"+l+"%</b>",a}},t.config.tooltip},getPlotOptions(t){let i=this;return t.series&&(t.series.neckWidth=t.series.neckWidth+"%",t.series.neckHeight=t.series.neckHeight+"%",t.series.width=t.series.width+"%",t.series.height=t.series.height+"%",t.series.events={click:l=>{i.onClick(l.point)}},t.series.dataLabels&&(t.series.dataLabels.style.fontSize=t.series.dataLabels.style.fontSize+"px",t.series.dataLabels.formatter=function(){if(this.color!="transparent")return this.key+"("+this.y+")"})),t},setDataColor(t,i){if(i.colorCustom==!0&&i.colors){let l=0;t.forEach((a,L)=>{i.colors[l]||(l=0),t[L].color=i.colors[l],l++})}return t},getSeries(t){let i=this.getDataSource(t);i=this.setDataColor(i,t.config.series);let l=[];if(t.config.series.gap&&t.config.series.gapHeight>0){for(let L=0;L<i.length;L++)if(l.push(i[L]),L<i.length-1){let p={};p.name="",p.y=t.config.series.gapHeight,p.color="transparent",l.push(p)}}else l=i;return[{borderColor:"#fff",data:l}]},getCensusTotal(t){let i=0;return this.getDataSource(t).forEach(a=>{i+=a.y}),i},getDataSource(t){let i=[];if(t.dataset[t.dataset.type]){let l=JSON.parse(JSON.stringify(t.dataset[t.dataset.type].source)),a=JSON.parse(JSON.stringify(t.dataset[t.dataset.type].encode)),L=JSON.parse(JSON.stringify(t.dataset[t.dataset.type].columnList)),p=null,g=null;L&&L.length>0&&L.forEach(y=>{a.name==y.name&&(p=y.index),a.value==y.name&&(g=y.index)}),l&&l.length>0&&l.forEach(y=>{if(/^(-?\d+)(\.\d+)?$/.test(y[g])){let z={};z.name=y[p],z.y=parseInt(y[g]),i.push(z)}})}return i},initAction(t){this.actionReceive(t)},onClick(t){let i=this.widgetInfo,l=[],a=this,L=i.action.sendOut.actionList;a.$$lib__.each(L,p=>{let g=p.code+"_"+i.id,y={};p.paramsExtend&&p.paramsExtend.length>0&&a.getParamsExtend(y,p.paramsExtend,i);let z=p.postMessage;if(y.name=t.name,y.value=t.y,p.enabled&&p.code==A.Z.click.code){if(i.dataset[i.dataset.type].source&&i.dataset[i.dataset.type].source.length>0&&(l=i.dataset[i.dataset.type].source[t.index]),a.getExtendParams(y,p.paramsExtend,l,i.dataset[i.dataset.type].dimensions),p.script&&p.script.enabled){if(M.log("Execute script for "+a.widgetInfo.name+" component to "+p.name+" component"),p.script.content==""){x.Message.warning({message:p.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}y=new Function("param,params",p.script.content)(y,t)}F.Z.$emit(g,y),z&&a.doPostMessage(y)}else if(p.enabled&&p.code==A.Z.click.openLink.code){if(p.paramsExtend&&p.paramsExtend.length>0){let U=[];i.dataset[i.dataset.type].source&&i.dataset[i.dataset.type].source.length>0&&(U=i.dataset[i.dataset.type].source[t.index]),p.type===a.$$global_editor.linkType.dynamic.code&&(p[a.$$global_editor.linkType.dynamic.code].url=a.getActionUrl(p,i.dataset[i.dataset.type].source[t.index],i.dataset[i.dataset.type].dimensions)),a.getExtendParams(y,p.paramsExtend,U,i.dataset[i.dataset.type].dimensions)}if(p.script&&p.script.enabled){if(M.log("Execute script for "+a.widgetInfo.name+" component to "+p.name+" component"),p.script.content==""){x.Message.warning({message:p.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}y=new Function("param,params",p.script.content)(y,t)}a.openLinkAction(p,y,t)}})}}},n=e,u=S(68141),d=(0,u.Z)(n,G,O,!1,null,"089e3cd0",null),c=d.exports}}]);
