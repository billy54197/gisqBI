(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[33684],{41050:function(B,C,i){"use strict";var o=i(29870),f=i(787879),n=i(183393),s=i(419534);Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var h=s(i(122777)),x=s(i(42762)),w=y(i(187647));function g(b){if(typeof f!="function")return null;var O=new f,p=new f;return(g=function(v){return v?p:O})(b)}function y(b,O){if(!O&&b&&b.__esModule)return b;if(b===null||o(b)!=="object"&&typeof b!="function")return{default:b};var p=g(O);if(p&&p.has(b))return p.get(b);var l={},v=Object.defineProperty&&n;for(var m in b)if(m!=="default"&&Object.prototype.hasOwnProperty.call(b,m)){var c=v?n(b,m):null;c&&(c.get||c.set)?Object.defineProperty(l,m,c):l[m]=b[m]}return l.default=b,p&&p.set(b,l),l}var A=function(){function b(O){(0,h.default)(this,b),this.viewer=O.viewer}return(0,x.default)(b,[{key:"getState",value:function(){var p=this.viewer,l=p.scene,v={};return v.atmosphericProfile=l.skyAtmosphere.show,v.fog=l.fog.enabled,v.terrain_light=l.globe.enableLighting,v.atmospheric_rendering=l.skyAtmosphere.show&&l.globe.showGroundAtmosphere,p.resolutionScale=window.devicePixelRatio,v.screen_adaption=p.resolutionScale!==1,v.anti_aliasing=l.fxaa,v.base_light=l.globe.enableLighting&&p.shadows,v.fps_changer=l.debugShowFramesPerSecond,v.deep_inspection=l.globe.depthTestAgainstTerrain,v}},{key:"execute",value:function(p,l){var v=this.viewer,m=v.scene;switch(p){case"brightness":{if(l!=100){var c=m.postProcessStages;v.scene.brightness=v.scene.brightness||c.add(w.PostProcessStageLibrary.createBrightnessStage()),v.scene.brightness.enabled=!0,v.scene.brightness.uniforms.brightness=Number(l/100)}else v.scene.brightness&&(v.scene.brightness.enabled=!1);break}case"atmosphericProfile":{m.skyAtmosphere.show=l;break}case"fog":{m.fog.enabled=l;break}case"base_light":{m.globe.enableLighting=l,v.shadows=l,v.terrainShadows=l?1:3;break}case"terrain_light":{m.globe.enableLighting=!!l;break}case"anti_aliasing":{m.fxaa=l,m.postProcessStages.fxaa.enabled=l;break}case"screen_adaption":{l?v.resolutionScale=window.devicePixelRatio:v.resolutionScale=1;break}case"atmospheric_rendering":{m.skyAtmosphere.show=l,m.globe.showGroundAtmosphere=l,this.formInfo.data.atmosphericProfile=l;break}case"fps_changer":{m.debugShowFramesPerSecond=l;break}case"deep_inspection":{m.globe.depthTestAgainstTerrain=l;break}case"keyCode":v.shine.keyboard(l.isbind,{KeyCode:l.KeyCode})}}}]),b}();C.default=A},85002:function(B,C,i){"use strict";var o=i(419534);Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var f=o(i(122777)),n=o(i(42762)),s=i(115998),h=function(){function w(g){(0,f.default)(this,w),this.weather=new s.Weather(g.viewer)}return(0,n.default)(w,[{key:"rain",value:function(y){y=Number(y),y===0?this.weather.removeRainStage():this.weather.rainfall(y)}},{key:"snow",value:function(y){y=Number(y),y===0?this.weather.removeSnowStage():this.weather.snowfall(y)}},{key:"removeAll",value:function(){this.weather.removeStage()}}]),w}(),x=h;C.default=x},488424:function(B,C,i){B.exports=function(o){var f={};function n(s){if(f[s])return f[s].exports;var h=f[s]={i:s,l:!1,exports:{}};return o[s].call(h.exports,h,h.exports,n),h.l=!0,h.exports}return n.m=o,n.c=f,n.d=function(s,h,x){n.o(s,h)||Object.defineProperty(s,h,{enumerable:!0,get:x})},n.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.t=function(s,h){if(h&1&&(s=n(s)),h&8||h&4&&typeof s=="object"&&s&&s.__esModule)return s;var x=Object.create(null);if(n.r(x),Object.defineProperty(x,"default",{enumerable:!0,value:s}),h&2&&typeof s!="string")for(var w in s)n.d(x,w,function(g){return s[g]}.bind(null,w));return x},n.n=function(s){var h=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(h,"a",h),h},n.o=function(s,h){return Object.prototype.hasOwnProperty.call(s,h)},n.p="/dist/",n(n.s=762)}({0:function(o,f){o.exports=i(342579)},2:function(o,f,n){"use strict";n.d(f,"a",function(){return s});function s(h,x,w,g,y,A,b,O){var p=typeof h=="function"?h.options:h;x&&(p.render=x,p.staticRenderFns=w,p._compiled=!0),g&&(p.functional=!0),A&&(p._scopeId="data-v-"+A);var l;if(b?(l=function(c){c=c||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!c&&typeof __VUE_SSR_CONTEXT__<"u"&&(c=__VUE_SSR_CONTEXT__),y&&y.call(this,c),c&&c._registeredComponents&&c._registeredComponents.add(b)},p._ssrRegister=l):y&&(l=O?function(){y.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:y),l)if(p.functional){p._injectStyles=l;var v=p.render;p.render=function(k,S){return l.call(S),v(k,S)}}else{var m=p.beforeCreate;p.beforeCreate=m?[].concat(m,l):[l]}return{exports:h,options:p}}},21:function(o,f){o.exports=i(581806)},22:function(o,f){o.exports=i(669033)},28:function(o,f){o.exports=i(132726)},30:function(o,f){o.exports=i(832569)},32:function(o,f){o.exports=i(417745)},38:function(o,f){o.exports=i(326541)},4:function(o,f){o.exports=i(555616)},43:function(o,f){o.exports=i(147806)},46:function(o,f){o.exports=i(869257)},484:function(o,f){o.exports=i(41050)},485:function(o,f){o.exports=i(85002)},6:function(o,f){o.exports=i(783574)},7:function(o,f){o.exports=i(17249)},762:function(o,f,n){"use strict";n.r(f);var s=n(0),h=n.n(s),x=function(){var e=this,d=e.$createElement,a=e._self._c||d;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.shouldShow,expression:"shouldShow"}],staticClass:"sh-base-control-3d"},[a("general-container",{ref:"container",attrs:{"is-show":e.visible,"style-config":e.styleConfig,title:e.title?e.title:"\u57FA\u7840\u914D\u7F6E",position:e.position,"img-src":e.imgSrc?e.imgSrc:"base-control3d",theme:e.theme,"theme-style":e.cardThemeStyle,"drag-enable":e.dragEnable},on:{"update:isShow":function(u){e.visible=u},"update:is-show":function(u){e.visible=u},"change:isShow":e.onChangeIsShow}},[a("page-form",{attrs:{"ref-obj":e.formInfo.ref,data:e.formInfo.data,"field-list":e.formInfo.fieldList,"label-width":e.formInfo.labelWidth},on:{"update:refObj":function(u){return e.$set(e.formInfo,"ref",u)},"update:ref-obj":function(u){return e.$set(e.formInfo,"ref",u)},handleEvent:e.handleEvent}})],1)],1)},w=[];x._withStripped=!0;var g=n(46),y=n.n(g),A=n(21),b=n.n(A),O=n(38),p=n.n(O),l=n(22),v=n.n(l),m=n(6),c=n.n(m),k=n(43),S=n.n(k),E=n(7),M=n.n(E),_=function(){var e=this,d=e.$createElement,a=e._self._c||d;return a("el-form",{ref:"form",staticClass:"page-form sh-page-formbc",class:e.className,attrs:{model:e.data,rules:e.rules,"label-width":e.labelWidth}},e._l(e.getConfigList(),function(u,R){return a("div",{key:R},[u.title0000?a("div",{staticClass:"Collapse",on:{click:function(I){I.preventDefault(),u.title.showList=!u.title.showList}}},[e.showdel?a("i",{class:u.title.showList?"el-icon-caret-bottom":"el-icon-caret-right"}):a("i",{class:u.title.showList?"el-icon-arrow-down":"el-icon-arrow-right"}),e._v(`
      `+e._s(u.title.name)+`

      `),u.canAdd?a("div",{on:{click:function(I){return I.stopPropagation(),e.handleClick("addtemplate",R)}}},[a("div",{staticStyle:{width:"16px",height:"16px","line-height":"14px",background:"#ff5e67","border-radius":"50%",color:"#fff",position:"absolute",right:"28px",top:"5px","text-align":"center"}},[e._v(`
          +
        `)])]):e._e(),u.canAdd?a("div",{on:{click:function(I){return I.stopPropagation(),e.handleClick("deltem",R)}}},[a("div",{staticStyle:{width:"16px",height:"16px","line-height":"14px",background:"#ff5e67","border-radius":"50%",color:"#fff",position:"absolute",right:"10px",top:"5px","text-align":"center"}},[e._v(`
          -
        `)])]):e._e()]):e._e(),a("div",{staticClass:"Collapse"},e._l(u.header.list,function(I,T){return a("el-col",{key:T},[a("div",{class:{border_lr:!0,selected:e.data[u.header.value]==I.value},on:{click:function(t){return e.handleEvent("controlType",I.value)}}},[a("span",{staticClass:"icon_padding"},[a("IconSvg",{attrs:{"icon-class":I.svg,width:"16px",height:"16px"}})],1),a("span",[e._v(e._s(I.title))])])])}),1),a("div",{directives:[{name:"show",rawName:"v-show",value:u.title.showList,expression:"ConfigList.title.showList"}]},[u.title.addTemp?[e._t("form-"+u.slotprop)]:e._e(),e._l(u.formList,function(I,T){return a("el-row",{key:T},e._l(I,function(t,N){return a("el-col",{key:N,attrs:{span:t.span||24/I.length}},[a("el-form-item",{class:t.className,attrs:{prop:t.value,label:t.label,"label-width":t.labelWidth}},[t.type==="slot"?[e._t("form-"+t.value)]:e._e(),t.type==="input"||t.type==="password"?a("el-input",{attrs:{type:t.type,disabled:t.disabled!==!1,placeholder:e.getPlaceholder(t),clearable:""},on:{input:function(r){return e.handleEvent(t.value,r)}},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}}):e._e(),t.type==="textarea"?a("el-input",{attrs:{type:t.type,disabled:t.disabled,placeholder:e.getPlaceholder(t),autosize:t.autosize||{minRows:2,maxRows:10}},on:{input:function(r){return e.handleEvent(t.value,r)}},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,typeof r=="string"?r.trim():r)},expression:"data[item.value]"}}):e._e(),t.type==="inputNumber"?a("el-input-number",{attrs:{"controls-position":"right",min:t.min,max:t.max,step:t.step},on:{change:function(r){return e.handleEvent(t.value,r)}},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}}):e._e(),t.type==="select"?a("el-select",{attrs:{disabled:t.disabled,clearable:t.clearable,filterable:t.filterable,placeholder:e.getPlaceholder(t)},on:{change:function(r){return e.handleEvent(t.value,r)}},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}},e._l(t.list,function(r,P){return a("el-option",{key:P,attrs:{label:r.key,value:r.value}})}),1):e._e(),t.type==="ColorPicker2"?a("div",{staticClass:"divContent"},[a("el-input",{staticClass:"colorInput",attrs:{placeholder:""},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}}),a("el-color-picker",{on:{"active-change":function(r){return e.handleEvent(t.value,r)}},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}})],1):e._e(),t.type==="ColorPicker"?a("div",{staticClass:"divContent"},[t.noInput?e._e():a("el-input",{staticClass:"colorInput",attrs:{placeholder:""},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.data[t.value],expression:"data[item.value]"}],staticStyle:{"margin-top":"3px",padding:"0"},attrs:{type:"color"},domProps:{value:e.data[t.value]},on:{input:[function(r){r.target.composing||e.$set(e.data,t.value,r.target.value)},function(r){return e.handleEvent(t.value,e.data[t.value])}]}})],1):e._e(),t.type==="btnRow"?a("div",{staticStyle:{"padding-left":"10px"}},e._l(t.list,function(r,P){return a("span",{key:P,staticClass:"btnSpan"},[a("el-button",{staticClass:"btnRow",attrs:{size:"mini"},on:{click:function(j){return e.handleEvent(r.value,"click","btnRowbtnRow")}}},[e._v(e._s(r.name))])],1)}),0):e._e(),t.type==="switch"?a("el-switch",{on:{change:function(r){return e.handleEvent(t.value,r)}},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}}):e._e(),t.type==="slider"?a("div",{staticClass:"slider",staticStyle:{display:"flex"}},[a("el-slider",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{"show-tooltip":!1,"format-tooltip":e.formatTooltip,max:t.max,marks:t.marks},on:{input:function(r){return e.handleEvent(t.value,r)}},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}})],1):e._e(),t.type=="checkbox"?a("el-checkbox",{on:{input:function(r){return e.handleEvent(t.value,r)}},model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}},[e._v(e._s(t.checkName))]):e._e(),t.type=="steps"?a("el-steps",{attrs:{active:e.data[t.value],"process-status":"process"}},e._l(t.list,function(r,P){return a("el-step",{key:P,attrs:{title:r.title,icon:"el-icon-edit"}},[a("template",{slot:"icon"},[a("div",{staticClass:"cursor_point",on:{click:function(j){return e.changeStep(t.value,r.title,e.data)}}},[a("IconSvg",{attrs:{"icon-class":r.svg,width:"16px",height:"16px"}})],1)])],2)}),1):e._e(),t.type=="keyboardControl"?a("div",{staticClass:"keyboardControl"},[a("div",{class:["keyborad-input",e.data[t.value].indexOf("select")>-1?"select":""],on:{click:function(r){return e.handleEvent(t.value,e.data[t.value])}}},[e._v(`
                `+e._s(e.data[t.value].indexOf("select")>-1?e.data[t.value].substring(0,1):e.data[t.value])+`
              `)]),a("div",{staticClass:"warning",attrs:{title:t.text}})]):e._e(),t.type=="radioGroup"?a("el-radio-group",{model:{value:e.data[t.value],callback:function(r){e.$set(e.data,t.value,r)},expression:"data[item.value]"}},e._l(t.list,function(r,P){return a("el-radio",{key:P,attrs:{label:r.key}},[e._v(e._s(r.value))])}),1):e._e()],2)],1)}),1)})],2)])}),0)},z=[];_._withStripped=!0;var J=n(8),Q=n.n(J),X=n(32),Y=n.n(X),q={name:"PageForm",components:{IconSvg:Y.a},props:{className:{type:String},showdel:{type:Boolean,default:!1},data:{type:Object},fieldList:{type:Array},rules:{type:Object},listTypeInfo:{type:Object},labelWidth:{type:String,default:"120px"},refObj:{type:Object}},data:function(){return{activeNames:["1"]}},watch:{data:{handler:function(){this.$emit("update:refObj",this.$refs.form)},deep:!0}},mounted:function(){this.$emit("update:refObj",this.$refs.form)},methods:{formatTooltip:function(d){return d+"%"},changeStep:function(d,a,u){b()(a).call(a,"\u5C0F")?u[d]=0:b()(a).call(a,"\u4E2D")?u[d]=1:b()(a).call(a,"\u5927")?u[d]=2:b()(a).call(a,"\u66B4")&&(u[d]=3),this.$emit("handleEvent",d,u[d])},handleChange:function(){},getConfigList:function(){var d,a=this;return Q()(d=this.fieldList).call(d,function(u){return h()(this,a),!u.hasOwnProperty("show")||u.hasOwnProperty("show")&&u.show}.bind(this))},getPlaceholder:function(d){var a;return d.type==="input"||d.type==="textarea"?a="\u8BF7\u8F93\u5165"+d.label:d.type==="select"||d.type==="time"||d.type==="date"?a="\u8BF7\u9009\u62E9"+d.label:a=d.label,a},handleEvent:function(d,a){this.$emit("handleEvent",d,a)},handleClick:function(d,a){this.$emit("handleClick",d,a)}}},ee=q,K=n(2),te=Object(K.a)(ee,_,z,!1,null,null,null),ae=te.exports,oe=n(30),ne=n.n(oe),G={weatherControl:[[{label:"",labelWidth:"0",checkName:"\u5927\u6C14\u8F6E\u5ED3",value:"atmosphericProfile",type:"checkbox"},{label:"",labelWidth:"0",checkName:"\u96FE",value:"fog",type:"checkbox"}],[{label:"",labelWidth:"0",checkName:"\u96E8",value:"rain",type:"checkbox"}],[{label:"",labelWidth:"0",value:"rainfall",type:"steps",className:"el-form-item-big",list:[{title:"\u5C0F\u96E8",svg:"bs-small-rain",value:"small_r"},{title:"\u4E2D\u96E8",svg:"bs-middle-rain",value:"middle_r"},{title:"\u5927\u96E8",svg:"bs-big-rain",value:"big_r"},{title:"\u66B4\u96E8",svg:"bs-violent-rain",value:"violent_r"}]}],[{label:"",labelWidth:"0",checkName:"\u96EA",value:"snow",type:"checkbox"}],[{label:"",labelWidth:"0",value:"snowfall",type:"steps",className:"el-form-item-big",list:[{title:"\u5C0F\u96EA",svg:"bs-small-snow",value:"small_s"},{title:"\u4E2D\u96EA",svg:"bs-middle-snow",value:"middle_s"},{title:"\u5927\u96EA",svg:"bs-big-snow",value:"big_s"},{title:"\u66B4\u96EA",svg:"bs-violent-snow",value:"violent_s"}]}],[{label:"",labelWidth:"0",checkName:"\u4EAE\u5EA6\u5F00\u5173",value:"brightness_changer",type:"checkbox"}],[{labelWidth:"0",value:"brightness",max:200,marks:{0:"\u6697",100:"\u6B63\u5E38",200:"\u4EAE"},className:"el-form-item-big",type:"slider"}]],baseControl:[[{label:"",labelWidth:"0",checkName:"\u5C4F\u5E55\u7F29\u653E\u81EA\u9002\u5E94",value:"screen_adaption",type:"checkbox"},{label:"",labelWidth:"0",checkName:"\u6DF1\u5EA6\u68C0\u6D4B",value:"deep_inspection",type:"checkbox",span:12}],[{label:"",labelWidth:"0",checkName:"\u6297\u952F\u9F7F\u4F18\u5316",value:"anti_aliasing",type:"checkbox"},{label:"",labelWidth:"0",checkName:"\u5E27\u7387\u5F00\u5173",value:"fps_changer",type:"checkbox"}],[{label:"",labelWidth:"0",checkName:"\u5927\u6C14\u6E32\u67D3",value:"atmospheric_rendering",className:"padding_05010",type:"checkbox"},{label:"",labelWidth:"0",checkName:"\u57FA\u7840\u5149\u7167",value:"base_light",className:"padding_0505",type:"checkbox"},{label:"",labelWidth:"0",checkName:"\u5730\u5F62\u5149\u7167",value:"terrain_light",className:"padding_0500",type:"checkbox"}]],keyboardControl:[[{label:"\u952E\u76D8\u5F00\u542F",value:"isOpen_keyboard",type:"switch",span:12}],[{label:"\u5411\u524D\u5E73\u79FB",value:"front_keyboard",type:"keyboardControl",text:"\u5411\u524D\u5E73\u79FB\u955C\u5934\uFF0C\u4E0D\u6539\u53D8\u76F8\u673A\u671D\u5411",span:12},{label:"\u5411\u540E\u5E73\u79FB",value:"back_keyboard",type:"keyboardControl",text:"\u5411\u540E\u5E73\u79FB\u955C\u5934\uFF0C\u4E0D\u6539\u53D8\u76F8\u673A\u671D\u5411",span:12}],[{label:"\u5411\u5DE6\u5E73\u79FB",value:"left_keyboard",type:"keyboardControl",text:"\u5411\u5DE6\u5E73\u79FB\u955C\u5934\uFF0C\u4E0D\u6539\u53D8\u76F8\u673A\u671D\u5411",span:12},{label:"\u5411\u53F3\u5E73\u79FB",value:"right_keyboard",type:"keyboardControl",text:"\u5411\u53F3\u5E73\u79FB\u955C\u5934\uFF0C\u4E0D\u6539\u53D8\u76F8\u673A\u671D\u5411",span:12}],[{label:"\u5411\u4E0A\u5E73\u79FB",value:"up_keyboard",type:"keyboardControl",text:"\u5411\u4E0A\u5E73\u79FB\u955C\u5934\uFF0C\u4E0D\u6539\u53D8\u76F8\u673A\u671D\u5411",span:12},{label:"\u5411\u4E0B\u5E73\u79FB",value:"down_keyboard",type:"keyboardControl",text:"\u5411\u4E0B\u5E73\u79FB\u955C\u5934\uFF0C\u4E0D\u6539\u53D8\u76F8\u673A\u671D\u5411",span:12}],[{label:"\u4E2D\u5FC3\u9760\u8FD1",value:"enlarge_keyboard",type:"keyboardControl",text:"\u5411\u5C4F\u5E55\u4E2D\u5FC3\u9760\u8FD1",span:12},{label:"\u4E2D\u5FC3\u8FDC\u79BB",value:"narrow_keyboard",type:"keyboardControl",text:"\u5411\u5C4F\u5E55\u4E2D\u5FC3\u8FDC\u79BB",span:12}],[{label:"\u4E2D\u5FC3\u5DE6\u8F6C",value:"left_rotate_keyboard",type:"keyboardControl",text:"\u56F4\u7ED5\u5C4F\u5E55\u4E2D\u5FC3\u5DE6\u65CB\u8F6C",span:12},{label:"\u4E2D\u5FC3\u53F3\u8F6C",value:"right_rotate_keyboard",type:"keyboardControl",text:"\u56F4\u7ED5\u5C4F\u5E55\u4E2D\u5FC3\u53F3\u65CB\u8F6C",span:12}],[{label:"\u4E2D\u5FC3\u4E0A\u8F6C",value:"top_rotate_keyboard",type:"keyboardControl",text:"\u56F4\u7ED5\u5C4F\u5E55\u4E2D\u5FC3\u4E0A\u65CB\u8F6C",span:12},{label:"\u4E2D\u5FC3\u4E0B\u8F6C",value:"bottomt_rotate_keyboard",type:"keyboardControl",text:"\u56F4\u7ED5\u5C4F\u5E55\u4E2D\u5FC3\u4E0B\u65CB\u8F6C",span:12}],[{label:"\u5411\u4E0A\u7FFB\u6EDA",value:"above_keyboard",type:"keyboardControl",text:"\u76F8\u673A\u539F\u5730\u4E0A\u65CB\u8F6C",span:12,disabled:!0},{label:"\u5411\u4E0B\u7FFB\u6EDA",value:"below_keyboard",type:"keyboardControl",text:"\u76F8\u673A\u539F\u5730\u4E0B\u65CB\u8F6C",span:12,disabled:!0}],[{label:"\u987A\u65F6\u9488\u8F6C",value:"clockwise_keyboard",type:"keyboardControl",text:"\u76F8\u673A\u539F\u5730\u5DE6\u65CB\u8F6C",span:12,disabled:!0},{label:"\u9006\u65F6\u9488\u8F6C",value:"anticlockwise_keyboard",type:"keyboardControl",text:"\u76F8\u673A\u539F\u5730\u53F3\u65CB\u8F6C",span:12,disabled:!0}]]},re=n(484),ie=n.n(re),le=n(485),se=n.n(le),de=n(4),W,$,ce={name:"ShBaseControl3d",components:{PageForm:ae,GeneralContainer:ne.a},mixins:[c.a,S.a,M.a],data:function(){return{formInfo:{ref:null,data:{rain:!1,rainfall:-1,snow:!1,snowfall:-1,atmosphericProfile:!1,fog:!1,controlType:"weatherControl",brightness_changer:!1,anti_aliasing:!1,base_light:!1,terrain_light:!1,atmospheric_rendering:!1,brightness:100,screen_adaption:!0,fps_changer:!1,deep_inspection:!1,isOpen_keyboard:!1,front_keyboard:"W",back_keyboard:"S",left_keyboard:"A",right_keyboard:"D",up_keyboard:"Q",down_keyboard:"E",enlarge_keyboard:"I",narrow_keyboard:"K",left_rotate_keyboard:"J",right_rotate_keyboard:"L",top_rotate_keyboard:"U",bottomt_rotate_keyboard:"O",above_keyboard:"\u2191",below_keyboard:"\u2193",clockwise_keyboard:"\u2190",anticlockwise_keyboard:"\u2192"},fieldList:[{title:{name:"\u8FD9\u91CC\u4E3A\u7A7A",showList:!0},header:{value:"controlType",list:[{title:"\u5929\u6C14\u63A7\u5236",svg:"weather-control",value:"weatherControl"},{title:"\u9AD8\u7EA7\u63A7\u5236",svg:"base-control",value:"baseControl"},{title:"\u952E\u76D8\u63A7\u5236",svg:"keyboard-control",value:"keyboardControl"}]},formList:G.weatherControl}],labelWidth:"70px"},hasKeyCode:["W","S","A","D","Q","E","I","K","J","L","U","O"],hasSelect:null}},computed:{shouldShow:function(){return this.currentView==="earth"}},mounted:function(){var d=this;this.$earth&&setTimeout(function(){h()(this,d),this.begin()}.bind(this),0)},beforeDestroy:function(){W=$=null},methods:{begin:function(){$=new ie.a(this.$earth),W=new se.a(this.$earth),y()(this.formInfo.data,$.getState())},onChangeIsShow:function(d){this.$emit("change:isShow",d)},handleEvent:function(d,a){var u=this;if($)switch(d){case"controlType":{this.formInfo.data.controlType=a;var R=this.formInfo.fieldList[0];R.formList=G[a];break}case"rain":case"rainfall":{var I=this.formInfo.data.rain,T=this.formInfo.data.rainfall;I?(this.formInfo.data.rainfall=T===-1?T+1:T,T=this.formInfo.data.rainfall,W.rain(T+1)):(this.formInfo.data.rainfall=-1,W.rain(0));break}case"snow":case"snowfall":{var t=this.formInfo.data.snow,N=this.formInfo.data.snowfall;t?(this.formInfo.data.snowfall=N===-1?N+1:N,N=this.formInfo.data.snowfall,W.snow(N+1)):(this.formInfo.data.snowfall=-1,W.snow(0));break}case"brightness_changer":case"brightness":{var r=this.formInfo.data.brightness_changer,P=this.formInfo.data.brightness,j=r?P:100;$.execute("brightness",j);break}case"isOpen_keyboard":{this.hasSelect&&(this.formInfo.data[this.hasSelect]=this.formInfo.data[this.hasSelect].substring(0,1),this.hasSelect=null);var be={moveForward:this.formInfo.data.front_keyboard.charCodeAt(0),moveBackward:this.formInfo.data.back_keyboard.charCodeAt(0),moveLeft:this.formInfo.data.left_keyboard.charCodeAt(0),moveRight:this.formInfo.data.right_keyboard.charCodeAt(0),moveUp:this.formInfo.data.up_keyboard.charCodeAt(0),moveDown:this.formInfo.data.down_keyboard.charCodeAt(0),ENLARGE:this.formInfo.data.enlarge_keyboard.charCodeAt(0),NARROW:this.formInfo.data.narrow_keyboard.charCodeAt(0),LEFT_ROTATE:this.formInfo.data.left_rotate_keyboard.charCodeAt(0),RIGHT_ROTATE:this.formInfo.data.right_rotate_keyboard.charCodeAt(0),TOP_ROTATE:this.formInfo.data.top_rotate_keyboard.charCodeAt(0),BOTTOM_ROTATE:this.formInfo.data.bottomt_rotate_keyboard.charCodeAt(0)},ye={isbind:this.formInfo.data.isOpen_keyboard,KeyCode:be};$.execute("keyCode",ye)}break;case"front_keyboard":case"back_keyboard":case"left_keyboard":case"right_keyboard":case"up_keyboard":case"down_keyboard":case"enlarge_keyboard":case"narrow_keyboard":case"left_rotate_keyboard":case"right_rotate_keyboard":case"top_rotate_keyboard":case"bottomt_rotate_keyboard":{this.hasSelect&&(this.formInfo.data[this.hasSelect]=this.formInfo.data[this.hasSelect].substring(0,1)),this.formInfo.data[d]=this.formInfo.data[d]+"select",this.hasSelect=d;var D=!1,U=function(F){var V,me=this;if(h()(this,u),b()(V=this.hasKeyCode).call(V,F.key.toUpperCase())&&this.hasSelect)de.Message.error("\u952E\u76D8\u503C\u51B2\u7A81\uFF01"),D=!0;else{var H,Z;D=!1;var we=p()(H=this.hasKeyCode).call(H,function(Ce){return h()(this,me),Ce+"select"===this.formInfo.data[this.hasSelect]}.bind(this));this.formInfo.data[this.hasSelect]=F.key.toUpperCase(),v()(Z=this.hasKeyCode).call(Z,we,1,F.key.toUpperCase()),this.hasSelect=null}if(!D){var xe={moveForward:this.formInfo.data.front_keyboard.charCodeAt(0),moveBackward:this.formInfo.data.back_keyboard.charCodeAt(0),moveLeft:this.formInfo.data.left_keyboard.charCodeAt(0),moveRight:this.formInfo.data.right_keyboard.charCodeAt(0),moveUp:this.formInfo.data.up_keyboard.charCodeAt(0),moveDown:this.formInfo.data.down_keyboard.charCodeAt(0),ENLARGE:this.formInfo.data.enlarge_keyboard.charCodeAt(0),NARROW:this.formInfo.data.narrow_keyboard.charCodeAt(0),LEFT_ROTATE:this.formInfo.data.left_rotate_keyboard.charCodeAt(0),RIGHT_ROTATE:this.formInfo.data.right_rotate_keyboard.charCodeAt(0),TOP_ROTATE:this.formInfo.data.top_rotate_keyboard.charCodeAt(0),BOTTOM_ROTATE:this.formInfo.data.bottomt_rotate_keyboard.charCodeAt(0)},ke={isbind:this.formInfo.data.isOpen_keyboard,KeyCode:xe};$.execute("keyCode",ke),document.removeEventListener("keydown",U)}}.bind(this);document.addEventListener("keydown",U);break}default:this.execute(d,a)}},execute:function(d,a){$.execute(d,a)}}},he=ce,fe=Object(K.a)(he,x,w,!1,null,null,null),ue=fe.exports,pe=n(28),ve=n.n(pe),ge=void 0,L=ve()(ue,{transform:function(d){h()(this,ge);var a=d.show,u=d.label,R=d.position;return{isShow:a,title:u,position:R}}.bind(void 0)});L.install=function(e){e.component(L.name,L)};var Se=f.default=L},8:function(o,f){o.exports=i(22466)}})},147806:function(B,C,i){"use strict";var o=i(419534);Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var f=o(i(452909)),n=o(i(342579)),s=void 0,h={inject:{generalCardThemeStyle:{default:null}},props:{styleConfig:{type:Object,default:function(){(0,n.default)(this,s)}.bind(void 0)},position:{type:Object,default:function(){return(0,n.default)(this,s),{type:"absolute",top:"100px",right:"135px"}}.bind(void 0)},themeStyle:{type:Object},imgSrc:{type:String},title:{type:String},isShow:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},dragEnable:{type:Boolean,default:!0},onlyContainer:{type:Boolean,default:!1}},data:function(){return{visible:this.isShow,theme:"light"}},watch:{currentView:{handler:function(g){g==="earth"?this.theme="dark":this.theme="light"},immediate:!0},isShow:function(g){this.visible=g}},computed:{cardThemeStyle:function(){return this.themeStyle||this.generalCardThemeStyle}},mounted:function(){var g,y=this;this.$_mixin_generalCard=(0,f.default)(g=this.$children).call(g,function(A){return(0,n.default)(this,y),A.$options.name==="ShGeneralCard"}.bind(this))},methods:{changeShow:function(g){var y;if((y=this.$_mixin_generalCard)===null||y===void 0||y.changeShow(g),g===!1||g!==!0&&this.visible){var A;(A=this.deactivate)===null||A===void 0||A.call(this)}},changeStatus:function(g){var y;(y=this.$_mixin_generalCard)===null||y===void 0||y.changeStatus(g)},getPosition:function(){var g;return(g=this.$_mixin_generalCard)===null||g===void 0?void 0:g.getPosition()}}},x=h;C.default=x},242709:function(B,C,i){"use strict";var o=i(148836);const f={data(){return this.map=null,this.timer="",{isEditor:window.location.href.indexOf("editor.html")>0}},inject:{reactiveViewMode:{default:function(){return()=>"23D"}}},computed:{viewMode(){return this.isSetMap_common?this.$_viewMode:this.reactiveViewMode()}},mounted(){!this.widgetInfo.parentId&&this.isEditor&&this.widgetInfo.action.gisMapId&&this.$nextTick(function(){this.updateWidgetParentId({widgetId:this.widgetInfo.id,parentId:this.widgetInfo.action.gisMapId,keepPosition:!0})})},methods:{...(0,o.nv)(["updateWidgetParentId"]),getBindMap(){typeof this.widgetInfo.action.gisMapId<"u"}}};C.Z=f},476010:function(B,C){"use strict";const i={data(){return{isSpecial:!1,isEditor:window.location.href.indexOf("editor.html")>0}},computed:{isBindToPage(){return this.widgetInfo.config.styleConfig.dragEnable||this.isSpecial},position(){return this.isEditor||!this.isBindToPage?{type:"absolute",top:"0px",left:"0px",bottom:"unset",right:"unset",zIndex:this.widgetInfo.attr.z}:{type:"absolute",top:this.widgetInfo.attr.y+"px",left:this.widgetInfo.attr.x+"px",zIndex:this.widgetInfo.attr.z}},styleConfig(){return{isShowBtn:this.widgetInfo.config.styleConfig.isShowBtn,isStartFix:this.isEditor,titleBar:{miniBtn:!0,maxBtn:!1,closeBtn:!1,fixBtn:!this.isEditor,title:!0},autoVisible:!1,btnSize:{size:this.widgetInfo.config.styleConfig.btnSize.size+"px",padding:this.widgetInfo.config.styleConfig.btnSize.padding+"px",radius:this.widgetInfo.config.styleConfig.btnSize.radius+"px"},size:{radius:this.widgetInfo.config.styleConfig.size.radius+"px",width:this.widgetInfo.attr.w>150?this.widgetInfo.attr.w+"px":"275px",height:this.widgetInfo.attr.hh>100?this.widgetInfo.attr.hh+"px":"80vh"},toolBtnSize:{size:this.widgetInfo.config.styleConfig.toolBtnSize.size+"px",margin:(this.widgetInfo.config.styleConfig.btnSize.size-this.widgetInfo.config.styleConfig.toolBtnSize.size)/2+"px"}}},themeConfig(){let o=this.widgetInfo.config.themeStyle.light;return{light:{title:{backgroundImage:"url('"+o.title.backgroundImage+"')",backgroundColor:o.title.backgroundColor?o.title.backgroundColor:o.floatButton.fillcolor,backgroundSize:o.title.backgroundSize,fontSize:o.title.fontSize+"px",color:o.title.fontColor},primaryFont:{fontSize:o.primaryFont.fontSize+"px",fontColor:o.primaryFont.fontColor},toolButton:{color:o.toolButton.color},panel:{backgroundImage:"url('"+o.panel.backgroundImage+"')",backgroundColor:o.panel.fillcolor,backgroundSize:o.panel.backgroundSize,border:o.panel.border},floatButton:{backgroundColor:o.floatButton.fillcolor,shadowColor:o.floatButton.shadowColor,border:o.floatButton.border}}}}},methods:{bindToPage(o){o&&this.isBindToPage&&(o.parentElement.remove(o),document.getElementById("page_"+this.widgetInfo.pageId).append(o),o.style.pointerEvents="auto",document.getElementById("container_child_"+this.widgetInfo.id).remove())}}};C.Z=i},255148:function(B,C,i){"use strict";i.r(C),i.d(C,{default:function(){return m}});var o=function(){var k=this,S=k._self._c;return S("div",{directives:[{name:"show",rawName:"v-show",value:k.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],ref:"content",style:{width:k.widgetInfo.attr.w+"px",height:k.widgetInfo.attr.hh+"px"}},[k.viewMode!=="2D"?S("BaseControl3d",{ref:"baseControl3d",attrs:{position:k.position,"is-show":!0,"style-config":k.styleConfig,"theme-style":k.themeConfig,"drag-enable":k.widgetInfo.config.styleConfig.dragEnable}}):k._e()],1)},f=[],n=i(488424),s=i.n(n),h=i(386892),x=i(476010),w=i(445061),g=i(126711),y=i(242709),A=i(927966),b=i(149500),O={name:"GisBaseControl3d",components:{BaseControl3d:s()},mixins:[h.D,x.Z,w.u,g.H,y.Z],props:["widgetInfo"],data(){return{timer:"",mapAction:this.widgetInfo.action,btnAttr:this.widgetInfo.attr}},mounted(){this.viewMode==="2D"&&this.$message("\u7EAF\u4E8C\u7EF4\u6A21\u5F0F\u65E0\u6CD5\u52A0\u8F7D'\u4E09\u7EF4\u57FA\u7840\u63A7\u4EF6'\u7EC4\u4EF6"),this.isEditor||this.$nextTick(()=>{let c=this.$refs.baseControl3d.$el;this.bindToPage(c)}),this.initAction(this.widgetInfo)},methods:{reLoadInfo(c){this.btnAttr=c.attr},initAction(c){this.registerAction(c,"configMap","mapList",this.doConfigMap),this.actionReceive(c)},actionReceive(c){if(c.action==null||c.action.receive==null)return;let k=c.action.receive.executeAction;k&&k.enabled&&k.executeList&&k.executeList.length>0&&this.$$lib__.each(k.executeList,M=>{let _=M[0][1];A.Z.$on(_,z=>{c.action.receive.executeAction.script&&c.action.receive.executeAction.script.enabled?(b.log("Execute the script to generateFloor "+c.name+" component"),this._execute=new Function("info","data","action",c.action.receive.executeAction.script.content),this._execute(z)):this.execute(z)})});let S=c.action.receive.show;S&&S.enabled&&S.showList&&S.showList.length>0&&this.doActionShowOrHide(S.showList,S.value,S.script,c.name,"show",!1);let E=c.action.receive.hide;E&&E.enabled&&E.hideList&&E.hideList.length>0&&this.doActionShowOrHide(E.hideList,E.value,E.script,c.name,"hide",!0)},execute(c){this.$refs.baseControl3d.execute("flood")}}},p=O,l=i(768141),v=(0,l.Z)(p,o,f,!1,null,null,null),m=v.exports}}]);
