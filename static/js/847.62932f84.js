(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[847],{4686:function(J,w,a){"use strict";a.r(w)},46057:function(J,w,a){"use strict";a.r(w)},41775:function(J,w,a){"use strict";var c=a(29870),n=a(85208),e=a(59791),t=a(22466),i=a(83393),o=a(5077),s=a(87879),C=a(19534);Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=C(a(28866)),S=C(a(42579)),N=C(a(43389)),D=C(a(22777)),p=C(a(42762));a(4686),a(46057);var g=B(a(25074)),F=C(a(68119)),P=a(39705),m=a(95031),M=a(59269),L=C(a(56865));function H(b){if(typeof s!="function")return null;var $=new s,f=new s;return(H=function(R){return R?f:$})(b)}function B(b,$){if(!$&&b&&b.__esModule)return b;if(b===null||c(b)!=="object"&&typeof b!="function")return{default:b};var f=H($);if(f&&f.has(b))return f.get(b);var y={},R=Object.defineProperty&&i;for(var A in b)if(A!=="default"&&Object.prototype.hasOwnProperty.call(b,A)){var W=R?i(b,A):null;W&&(W.get||W.set)?Object.defineProperty(y,A,W):y[A]=b[A]}return y.default=b,f&&f.set(b,y),y}function G(b,$){var f=n(b);if(e){var y=e(b);$&&(y=t(y).call(y,function(R){return i(b,R).enumerable})),f.push.apply(f,y)}return f}function j(b){for(var $=1;$<arguments.length;$++){var f=arguments[$]!=null?arguments[$]:{};$%2?G(Object(f),!0).forEach(function(y){(0,N.default)(b,y,f[y])}):o?Object.defineProperties(b,o(f)):G(Object(f)).forEach(function(y){Object.defineProperty(b,y,i(f,y))})}return b}var K=function(){function b($){var f=this,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,D.default)(this,b);var R=y.center,A=R===void 0?[111.7579,31.6736]:R,W=y.height,Z=W===void 0?614914256e-2:W,et=y.projection,k=et===void 0?"EPSG:4490":et,at=y.heading,nt=at===void 0?0:at,st=y.roll,lt=st===void 0?0:st,it=y.pitch,ht=it===void 0?-90:it,U=(0,x.default)(y),ct=y.duration,rt=(0,P.transformCoordinate)(A,k,"EPSG:4490"),T=j(j({},m.earthDefaultConfig),{},{center:{heading:nt,roll:lt,x:rt[0],y:rt[1],z:Z,pitch:ht},duration:ct});g.Map.createMap({id:$,data:T,map2d:U,is2d:U?1:2,success:function(_){(0,S.default)(this,f),this.viewer=_}.bind(this)}),this.layerManager=this.viewer.shine.layerManager}return(0,p.default)(b,[{key:"maskGeoJson",get:function(){return this.viewer.maskGeoJson},set:function(f){this.viewer.maskGeoJson=f}},{key:"resize",value:function(){this.viewer.forceResize()}},{key:"centerAt",value:function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=y.duration,A=y.projection,W=A===void 0?"EPSG:4490":A,Z=this.viewer.shine.getCameraView(!0),et=Z.x,k=Z.y,at=Z.z,nt=Z.heading,st=Z.roll,lt=Z.pitch,it=f.center,ht=it===void 0?[et,k]:it,U=f.height,ct=U===void 0?at:U,rt=f.heading,T=rt===void 0?nt:rt,I=f.roll,_=I===void 0?st:I,dt=f.pitch,gt=dt===void 0?lt:dt,vt=(0,P.transformCoordinate)(ht,W,"EPSG:4490");this.viewer.shine.centerAt({x:vt[0],y:vt[1],z:ct,heading:T,roll:_,pitch:gt},{duration:R!=null?R/1e3:void 0,isWgs84:!0})}},{key:"setExtent",value:function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=y.duration,A=y.projection,W=A===void 0?"EPSG:4490":A,Z=f;W!=="EPSG:4490"&&(Z=(0,P.transformExtent)(f,W,"EPSG:4490"));var et={xmin:Z[0],ymin:Z[1],xmax:Z[2],ymax:Z[3]};this.viewer.shine.centerAt(et,{duration:R!=null?R/1e3:void 0,isWgs84:!0})}},{key:"getExtent",value:function(){var f=this.viewer.shine.getExtent(!0);return[f.xmin,f.ymin,f.xmax,f.ymax]}},{key:"getCenter",value:function(){var f=this.viewer.shine.getCameraView(!0),y=f.x,R=f.y;return[y,R]}},{key:"getHeight",value:function(){var f=this.viewer.shine.getCameraView(!0),y=f.z;return y}},{key:"getZoom",value:function(){var f=this.viewer.shine.getCameraView(!0),y=f.z,R=this.viewer.shine.getLevel(y);return R}},{key:"getOrientation",value:function(){var f=this.viewer.shine.getCameraView(!0),y=f.heading,R=f.roll,A=f.pitch;return{heading:y,roll:R,pitch:A}}},{key:"getProjection",value:function(){return"EPSG:4490"}},{key:"addLayer",value:function(f){f.visible=!0,this.viewer.shine.addLayer(f)}},{key:"createDrawLayer",value:function(f){f.visible=!0,f.type="geojson-draw",f.drawLayerType||(f.drawLayerType=M.DRAWLAYER_TYPE),this.viewer.shine.addLayer(f)}},{key:"removeLayer",value:function(f){this.viewer.shine.removeLayer(f)}},{key:"getViewer",value:function(){return this.viewer}},{key:"olcs3dUpdate",value:function(){this.viewer.shine.ol3d.update()}},{key:"groundUnder",value:function(f){this.viewer.shine.groundUnder(f)}},{key:"groundTranslucency",value:function(f){this.viewer.shine.groundTranslucency(f)}},{key:"useTranslucencyRectangle",value:function(f){this.viewer.shine.useTranslucencyRectangle(f)}},{key:"getContainer",value:function(){return this.viewer.container}},{key:"createPopup",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=new F.default(this,f);return y}},{key:"performVideoProjection",value:function(f){this.videoProjection=new L.default(this,f),this.videoProjection.execute()}},{key:"destroyVideoProjection",value:function(){var f;(f=this.videoProjection)===null||f===void 0||f.destroy(),this.videoProjection=null}}]),b}(),Q=K;w.default=Q},68119:function(J,w,a){"use strict";var c=a(19534);Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var n=c(a(22777)),e=c(a(42762)),t=a(96789),i=function(){function s(C,x){(0,n.default)(this,s),this.earth=C,this.earthPopup=new t.DivPoint(this.earth.viewer,{html:x.element,offset:x.offset})}return(0,e.default)(s,[{key:"setPosition",value:function(x){this.earthPopup.setLonlat(x)}},{key:"destroy",value:function(){this.earthPopup.destroy()}}]),s}(),o=i;w.default=o},7819:function(J,w,a){var c=a(49500);J.exports=function(n){var e={};function t(i){if(e[i])return e[i].exports;var o=e[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(i,o,s){t.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:s})},t.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,o){if(o&1&&(i=t(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var C in i)t.d(s,C,function(x){return i[x]}.bind(null,C));return s},t.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(o,"a",o),o},t.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},t.p="/dist/",t(t.s=751)}({0:function(n,e){n.exports=a(42579)},1:function(n,e){n.exports=a(28866)},115:function(n,e){n.exports=a(21830)},136:function(n){n.exports=JSON.parse('{"1.3.12":"1.3","2.0.5":"2.0","2.1.4":"2.1","2.2.0-29":"2.2"}')},17:function(n,e){n.exports=a(85208)},18:function(n,e){n.exports=a(59791)},19:function(n,e){n.exports=a(83393)},2:function(n,e,t){"use strict";t.d(e,"a",function(){return i});function i(o,s,C,x,S,N,D,p){var g=typeof o=="function"?o.options:o;s&&(g.render=s,g.staticRenderFns=C,g._compiled=!0),x&&(g.functional=!0),N&&(g._scopeId="data-v-"+N);var F;if(D?(F=function(M){M=M||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!M&&typeof __VUE_SSR_CONTEXT__<"u"&&(M=__VUE_SSR_CONTEXT__),S&&S.call(this,M),M&&M._registeredComponents&&M._registeredComponents.add(D)},g._ssrRegister=F):S&&(F=p?function(){S.call(this,(g.functional?this.parent:this).$root.$options.shadowRoot)}:S),F)if(g.functional){g._injectStyles=F;var P=g.render;g.render=function(L,H){return F.call(H),P(L,H)}}else{var m=g.beforeCreate;g.beforeCreate=m?[].concat(m,F):[F]}return{exports:o,options:g}}},20:function(n,e){n.exports=a(5077)},21:function(n,e){n.exports=a(81806)},24:function(n,e){n.exports=a(52909)},25:function(n,e){n.exports=a(43389)},28:function(n,e){n.exports=a(32726)},32:function(n,e){n.exports=a(17745)},354:function(n,e){n.exports=a(2258)},355:function(n,e){n.exports=a(61536)},406:function(n,e){n.exports=a(29406)},446:function(n,e){n.exports=a(41775)},447:function(n,e){n.exports=a(99290)},448:function(n,e){n.exports=a(19563)},449:function(n,e){n.exports=a(95512)},53:function(n,e){n.exports=a(29870)},54:function(n,e){n.exports=a(1117)},57:function(n,e){n.exports=a(32002)},59:function(n,e){n.exports=a(67040)},6:function(n,e){n.exports=a(83574)},7:function(n,e){n.exports=a(17249)},751:function(n,e,t){"use strict";t.r(e);var i=t(0),o=t.n(i),s=function(){var r=this,d=r.$createElement,u=r._self._c||d;return u("div",{staticClass:"sh-earth cesium-container",class:{"sh-base-component":r.$isBaseComponent},attrs:{id:r.earthId}},[u("div",{staticClass:"sh-earth-controls"},[r.isEarthLoad&&r.getControlIsShow("FullFigure")?u("FullFigure",{attrs:{options:r.getControlOption("FullFigure"),"init-position":r.initPosition}},[r._t("earth:FullFigure")],2):r._e(),r.isEarthLoad&&r.getControlIsShow("Zoom")?u("Zoom",{attrs:{options:r.getControlOption("Zoom")},scopedSlots:r._u([{key:"ZoomIn",fn:function(){return[r._t("earth:ZoomIn")]},proxy:!0},{key:"ZoomOut",fn:function(){return[r._t("earth:ZoomOut")]},proxy:!0}],null,!0)}):r._e(),r.isEarthLoad&&r.getControlIsShow("FullScreen")?u("FullScreen",{attrs:{options:r.getControlOption("FullScreen")}},[r._t("earth:FullScreen")],2):r._e(),r.isEarthLoad&&r.getControlIsShow("NavigationHelp")?u("NavigationHelp",{attrs:{options:r.getControlOption("NavigationHelp")}},[r._t("earth:NavigationHelp")],2):r._e(),r.isEarthLoad&&r.getControlIsShow("ScenePick")?u("ScenePick",{attrs:{options:r.getControlOption("ScenePick")}}):r._e()],1),r.isEarthLoad&&r.getControlIsShow("Rotate")?u("Rotate",{attrs:{options:r.getControlOption("Rotate")}}):r._e(),r.isEarthLoad&&r.getControlIsShow("ScaleLine")?u("ScaleLine",{attrs:{options:r.getControlOption("ScaleLine")}}):r._e(),r.isEarthLoad&&r.getControlIsShow("Geolocation")?u("Geolocation",{attrs:{options:r.getControlOption("Geolocation")}}):r._e(),r.isEarthLoad?r._t("default"):r._e()],2)},C=[];s._withStripped=!0;var x=t(53),S=t.n(x),N=t(17),D=t.n(N),p=t(1),g=t.n(p),F=t(21),P=t.n(F),m=t(24),M=t.n(m),L=t(446),H=t.n(L),B=t(7),G=t.n(B),j=t(115),K=t.n(j),Q=t(54),b=t(355),$=t.n(b),f=t(354),y=t.n(f),R=t(59),A=t(57),W=function(){var r=this,d=r.$createElement,u=r._self._c||d;return u("div",{staticClass:"sh-earth-zoom"},[u("div",[r.$slots.ZoomIn?u("div",{attrs:{title:"\u653E\u5927"},on:{click:function(E){return E.stopPropagation(),r.onZoomIn.apply(null,arguments)}}},[r._t("ZoomIn")],2):u("div",{staticClass:"zoom-in",attrs:{title:"\u653E\u5927"},on:{click:function(E){return E.stopPropagation(),r.onZoomIn.apply(null,arguments)}}},[u("icon-svg",{attrs:{"icon-class":"zoom-in",width:"16px",height:"16px",theme:"dark"}})],1)]),u("div",[r.$slots.ZoomOut?u("div",{attrs:{title:"\u7F29\u5C0F"},on:{click:function(E){return E.stopPropagation(),r.onZoomOut.apply(null,arguments)}}},[r._t("ZoomOut")],2):u("div",{staticClass:"zoom-out",attrs:{title:"\u7F29\u5C0F"},on:{click:function(E){return E.stopPropagation(),r.onZoomOut.apply(null,arguments)}}},[u("icon-svg",{attrs:{"icon-class":"zoom-out",width:"16px",height:"16px",theme:"dark"}})],1)])])},Z=[];W._withStripped=!0;var et=t(6),k=t.n(et),at=t(32),nt=t.n(at),st=t(406),lt=t.n(st),it={name:"ShEarthZoom",components:{IconSvg:nt.a},mixins:[k.a,G.a],mounted:function(){this.zoomIn=new lt.a(this.$earth.viewer,!0),this.zoomOut=new lt.a(this.$earth.viewer,!1)},methods:{onZoomIn:function(){this.zoomIn.zoom(this.zoomIn.relativeAmount)},onZoomOut:function(){this.zoomOut.zoom(this.zoomOut.relativeAmount)}}},ht=it,U=t(2),ct=Object(U.a)(ht,W,Z,!1,null,null,null),rt=ct.exports,T=function(){var r=this,d=r.$createElement,u=r._self._c||d;return u("div",{ref:"target",staticClass:"sh-earth-rotate"})},I=[];T._withStripped=!0;var _=t(94),dt=t(447),gt=t.n(dt),vt={name:"ShEarthRotate",mixins:[k.a,G.a],mounted:function(){this.$earth.viewer.afterWidgetChanged||(this.$earth.viewer.afterWidgetChanged=new _.Event),this.$earth.viewer.beforeWidgetChanged||(this.$earth.viewer.beforeWidgetChanged=new _.Event),this.navigationViewModel=gt.a.create({container:this.$refs.target,terria:this.$earth.viewer,enableZoomControls:!1,enableCompass:!0})}},Ct=vt,xt=Object(U.a)(Ct,T,I,!1,null,null,null),St=xt.exports,mt=function(){var r=this,d=r.$createElement,u=r._self._c||d;return u("div",{ref:"target",staticClass:"sh-earth-scale-line"})},pt=[];mt._withStripped=!0;var Et=t(448),l=t.n(Et),v={name:"ShEarthScaleLine",mixins:[k.a,G.a],mounted:function(){this.container=document.createElement("div"),this.container.className="cesium-widget-cesiumNavigationContainer",this.container.appendChild(this.$refs.target),this.$refs.target.setAttribute("id","distanceLegendDiv"),this.$earth.viewer.container.appendChild(this.container),this.$earth.viewer.afterWidgetChanged||(this.$earth.viewer.afterWidgetChanged=new _.Event),this.$earth.viewer.beforeWidgetChanged||(this.$earth.viewer.beforeWidgetChanged=new _.Event),this.distanceLegendViewModel=l.a.create({container:this.$refs.target,terria:this.$earth.viewer,mapElement:this.container,enableDistanceLegend:!0})},beforeDestroy:function(){this.$earth.viewer.container.removeChild(this.container)}},h=v,O=Object(U.a)(h,mt,pt,!1,null,null,null),X=O.exports,tt=t(449),ft=void 0,ut="<div>\u4FEF\u4EF0\u89D2\uFF1A{pitch}\u5EA6</div><div>\u65B9\u5411\uFF1A{heading}\u5EA6\uFF080\u5EA6\u4E3A\u6B63\u5317\uFF09</div><div>\u89C6\u9AD8\uFF1A{height}\u7C73</div><div>\u7EAC\u5EA6\uFF1A{screenwd})</div><div>\u76F8\u673A (\u7ECF\u5EA6\uFF1A{screenjd}</div>",Tt={name:"ShEarthGeolocation",mixins:[k.a,G.a],props:{options:{type:Object,default:function(){o()(this,ft)}.bind(void 0)}},data:function(){var d,u;return{crs:(d=this.options)===null||d===void 0?void 0:d.crs,format:((u=this.options)===null||u===void 0?void 0:u.format)||ut}},mounted:function(){this.location=new tt.Location(this.$earth.viewer,{crs:this.crs,format:this.format,bindEvent:!1}),this.$earth.viewer.shine._location=this.location,this.location.updaeCamera()},beforeDestroy:function(){var d;(d=this.location)===null||d===void 0||d.destroy()},render:function(){return null}},Nt=Tt,Rt,zt,Dt=Object(U.a)(Nt,Rt,zt,!1,null,null,null),Vt=Dt.exports,bt=function(){var r=this,d=r.$createElement,u=r._self._c||d;return u("div",{staticStyle:{position:"relative"}},[r.$slots.default?u("div",{ref:"button"},[r._t("default")],2):u("div",{ref:"button",staticClass:"sh-earth-navigation-help"},[u("IconSvg",{ref:"icon",attrs:{"icon-class":"help",theme:"dark",width:"16px",height:"16px"}})],1)])},At=[];bt._withStripped=!0;var Ot,Bt={name:"ShNavigationHelp",components:{IconSvg:nt.a},mixins:[k.a,G.a],mounted:function(){var d=this.$refs.button;new _.NavigationHelpButton({container:d}),Ot=d.getElementsByClassName("cesium-navigationHelpButton-wrapper")[0],d.appendChild(Ot)}},Zt=Bt,Ht=Object(U.a)(Zt,bt,At,!1,null,null,null),Gt=Ht.exports,wt=function(){var r=this,d=r.$createElement,u=r._self._c||d;return u("div",{ref:"button",staticClass:"sh-earth-scene-pick"},[u("span",{staticClass:"container"},[u("div",{staticClass:"button",attrs:{id:r.item.id,title:r.item.text},on:{click:function(E){return r.handleEvent("open_close_scenePicker")}}},[u("IconSvg",{attrs:{"icon-class":r.item.icon,theme:"dark",width:"16px",height:"16px"}})],1),r._l(r.item.list,function(E,V){return u("div",{directives:[{name:"show",rawName:"v-show",value:!E.hidden,expression:"!factor.hidden"}],key:V,staticClass:"button",attrs:{title:E.text},on:{click:function(z){return r.handleEvent(E.id)}}},[u("IconSvg",{attrs:{"icon-class":E.icon,width:"16px",height:"16px",theme:"dark"}})],1)})],2)])},Wt=[];wt._withStripped=!0;var Ut=t(25),Jt=t.n(Ut),Xt=t(18),Pt=t.n(Xt),Yt=t(8),Kt=t.n(Yt),Qt=t(19),jt=t.n(Qt),kt=t(20),It=t.n(kt);function Lt(r,d){var u=D()(r);if(Pt.a){var E=Pt()(r);d&&(E=Kt()(E).call(E,function(V){return jt()(r,V).enumerable})),u.push.apply(u,E)}return u}function qt(r){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?Lt(Object(u),!0).forEach(function(E){Jt()(r,E,u[E])}):It.a?Object.defineProperties(r,It()(u)):Lt(Object(u)).forEach(function(E){Object.defineProperty(r,E,jt()(u,E))})}return r}var _t={name:"ShScenePick",components:{IconSvg:nt.a},mixins:[k.a,G.a],data:function(){return{item:{id:"scene_3d",icon:"scene-mode-3d",text:"\u4E09\u7EF4\u89C6\u56FE",list:[{id:"scene_2d",icon:"scene-mode-2d",text:"\u4E8C\u7EF4\u89C6\u56FE",hidden:!0},{id:"scene_Columbus",icon:"scene-mode-columbus",text:"\u54E5\u4F26\u5E03\u89C6\u56FE",hidden:!0}]}}},methods:{begin:function(){},handleEvent:function(d){var u=this;if(d==="open_close_scenePicker"){var E=this.item.list;E.forEach(function(ot){o()(this,u),ot.hidden=!ot.hidden}.bind(this));return}else{var V=this.$earth.viewer.scene;switch(d){case"scene_2d":{V.morphTo2D(0);break}case"scene_3d":{V.morphTo3D(0);break}case"scene_Columbus":V.morphToColumbusView(0)}var z=this.item.list,Y=M()(z).call(z,function(ot){return o()(this,u),ot.id===d}.bind(this)),q=qt({},this.item);this.item.icon=Y.icon,this.item.id=Y.id,this.item.text=Y.text,Y.icon=q.icon,Y.id=q.id,Y.text=q.text,this.handleEvent("open_close_scenePicker")}}}},te=_t,ee=Object(U.a)(te,wt,Wt,!1,null,null,null),ne=ee.exports,$t=void 0,ie={name:"ShEarth",components:{FullFigure:$.a,Zoom:rt,Rotate:St,ScaleLine:X,Geolocation:Vt,FullScreen:y.a,NavigationHelp:Gt,ScenePick:ne},mixins:[G.a,K.a],inject:{reactiveViewMode:{default:function(){var d=this;return function(){return o()(this,d),"3D"}.bind(this)}},reactiveView:{default:function(){var d=this;return function(){return o()(this,d),"earth"}.bind(this)}}},provide:function(){var d=this;return{reactiveViewMode:function(){return o()(this,d),"3D"}.bind(this),reactiveView:function(){return o()(this,d),"earth"}.bind(this),reactiveEarth:function(){return o()(this,d),this.$earth}.bind(this),emitterId:this.emitterId}},props:{map:Object,initLayers:{type:Array,default:function(){return o()(this,$t),[]}.bind(void 0)},duration:{type:Number,default:0},controls:{type:Array,default:function(){return o()(this,$t),["FullFigure","Zoom","Geolocation","Rotate","ScaleLine","FullScreen","NavigationHelp"]}.bind(void 0)},projection:{type:String,default:"EPSG:4490"},center:{type:Array,default:function(){return o()(this,$t),[111.7579,31.6736]}.bind(void 0)},height:{type:Number,default:614914256e-2},zoom:{type:Number},heading:{type:Number,default:0},roll:{type:Number,default:0},pitch:{type:Number,default:-90}},data:function(){return this.$earth=void 0,this.earthId=Object(Q.v4)(),{isEarthLoad:!1}},computed:{currentPosition:function(){return{center:this.center,height:this.height,heading:this.heading,roll:this.roll,pitch:this.pitch}}},watch:{currentPosition:function(d,u){var E=this,V,z={};D()(d).forEach(function(q){o()(this,E),Object(A.isEqual)(d[q],u[q])||(z[q]=d[q])}.bind(this));var Y=this.$el.style.display!=="none";Y&&((V=this.$earth)===null||V===void 0||V.centerAt(z))}},beforeCreate:function(){var d,u;this.$isBaseComponent=((d=this.$parent)===null||d===void 0||(u=d.$parent.$options)===null||u===void 0?void 0:u.name)!=="ShMapEarth",this.emitterId=this.$isBaseComponent?Object(Q.v4)():this.$parent.$parent.emitterId},mounted:function(){var d=this;if(this.$isBaseComponent){var u=D()(t(136)).reverse()[0];c.log("shinegis-client-23d version:",u)}setTimeout(function(){o()(this,d),this.initEarth(),this.setInitLayers()}.bind(this))},methods:{initEarth:function(){var d=this,u=this.reactiveView(),E=this.duration;u==="earth"?E=(E||50)/1e3:E=0,this.$earth=new H.a(this.earthId,{center:this.center,projection:this.projection,height:this.height,heading:this.heading,roll:this.roll,pitch:this.pitch,map:g()(this),duration:E}),this.initPosition={center:this.center,height:this.height,heading:this.heading,roll:this.roll,pitch:this.pitch},this.isEarthLoad=!0,this.$emit("earthInited",this.$earth),u==="earth"&&g()(this)&&this.$earth.viewer.shine.ol3d.setEnabled(!0),this.subscribe.$once("map-earth:change:view",function(Y){if(o()(this,d),Y==="earth"&&g()(this)&&this.duration>0){var q=g()(this).getCenter(),ot=g()(this).getZoom();this.$earth.centerAt({center:q,height:this.$earth.viewer.shine.levelToHeight(ot),heading:0,roll:0,pitch:-90},{duration:this.duration})}}.bind(this));var V=Object(R.getUrlParams)(decodeURIComponent(window.location.href)),z={};V.forEach(function(Y){o()(this,d),z[Y.name]=Y.value}.bind(this)),z.view==="earth"&&setTimeout(function(){o()(this,d),this.$earth.centerAt({center:[Number(z.x),Number(z.y)],height:Number(z.z),heading:Number(z.heading),roll:Number(z.roll),pitch:Number(z.pitch)},{duration:0,projection:z.projection})}.bind(this),500)},setInitLayers:function(){for(var d=0;d<this.initLayers.length;d++)this.$earth.viewer.shine.layerManager.addCheckedLayers(this.initLayers[d])},getControlIsShow:function(d){var u,E=this,V=g()(u=this.controls).call(u,function(z){return o()(this,E),S()(z)==="object"?z.name:z}.bind(this));return P()(V).call(V,d)},getControlOption:function(d){var u,E=this,V=M()(u=this.controls).call(u,function(z){return o()(this,E),z.name===d}.bind(this));return V?V.earthOptions:null}}},re=ie,oe=Object(U.a)(re,s,C,!1,null,null,null),ae=oe.exports,se=t(28),le=t.n(se),ce=void 0,yt=le()(ae,{transform:function(d,u){o()(this,ce);var E=u.view,V=u.projection,z=u.center,Y=u.height,q=u.controls,ot=u.heading,Ft=u.roll,Mt=u.pitch;return E==="map"&&(ot=0,Ft=0,Mt=-90),{projection:V,center:z,controls:q,height:Number(Y),heading:Number(ot),roll:Number(Ft),pitch:Number(Mt)}}.bind(void 0)});yt.install=function(r){r.component(yt.name,yt)};var ue=e.default=yt},8:function(n,e){n.exports=a(22466)},94:function(n,e){n.exports=a(87647)}})},61536:function(J,w,a){J.exports=function(c){var n={};function e(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return c[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=c,e.c=n,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(i&1&&(t=e(t)),i&8||i&4&&typeof t=="object"&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),i&2&&typeof t!="string")for(var s in t)e.d(o,s,function(C){return t[C]}.bind(null,s));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=791)}({0:function(c,n){c.exports=a(42579)},2:function(c,n,e){"use strict";e.d(n,"a",function(){return t});function t(i,o,s,C,x,S,N,D){var p=typeof i=="function"?i.options:i;o&&(p.render=o,p.staticRenderFns=s,p._compiled=!0),C&&(p.functional=!0),S&&(p._scopeId="data-v-"+S);var g;if(N?(g=function(m){m=m||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!m&&typeof __VUE_SSR_CONTEXT__<"u"&&(m=__VUE_SSR_CONTEXT__),x&&x.call(this,m),m&&m._registeredComponents&&m._registeredComponents.add(N)},p._ssrRegister=g):x&&(g=D?function(){x.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:x),g)if(p.functional){p._injectStyles=g;var F=p.render;p.render=function(M,L){return g.call(L),F(M,L)}}else{var P=p.beforeCreate;p.beforeCreate=P?[].concat(P,g):[g]}return{exports:i,options:p}}},32:function(c,n){c.exports=a(17745)},6:function(c,n){c.exports=a(83574)},791:function(c,n,e){"use strict";e.r(n);var t=function(){var L=this,H=L.$createElement,B=L._self._c||H;return B("div",[L.$slots.default?B("div",{attrs:{title:"\u590D\u4F4D"},on:{click:function(G){return G.stopPropagation(),L.onClick.apply(null,arguments)}}},[L._t("default")],2):B("div",{staticClass:"sh-full-figure",attrs:{title:"\u590D\u4F4D"},on:{click:function(G){return G.stopPropagation(),L.onClick.apply(null,arguments)}}},[B("icon-svg",{attrs:{"icon-class":"reset-view",width:"16px",height:"16px",theme:L.theme}})],1)])},i=[];t._withStripped=!0;var o=e(0),s=e.n(o),C=e(6),x=e.n(C),S=e(32),N=e.n(S),D=void 0,p={name:"ShFullFigure",components:{IconSvg:N.a},mixins:[x.a],inject:{reactiveInitPosition:{default:null}},props:{initPosition:{type:Object},options:{type:Object,default:function(){s()(this,D)}.bind(void 0)}},computed:{theme:function(){return this.currentView==="map"?"light":"dark"}},methods:{onClick:function(){var H,B=((H=this.reactiveInitPosition)===null||H===void 0?void 0:H.call(this))||this.initPosition;this.currentView==="map"?this.$map.getView().animate({center:B.center,zoom:B.zoom,duration:2e3}):this.$earth.centerAt(B)}}},g=p,F=e(2),P=Object(F.a)(g,t,i,!1,null,null,null),m=P.exports;m.install=function(L){L.component(m.name,m)};var M=n.default=m}})},2258:function(J,w,a){J.exports=function(c){var n={};function e(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return c[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=c,e.c=n,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(i&1&&(t=e(t)),i&8||i&4&&typeof t=="object"&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),i&2&&typeof t!="string")for(var s in t)e.d(o,s,function(C){return t[C]}.bind(null,s));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=797)}({0:function(c,n){c.exports=a(42579)},2:function(c,n,e){"use strict";e.d(n,"a",function(){return t});function t(i,o,s,C,x,S,N,D){var p=typeof i=="function"?i.options:i;o&&(p.render=o,p.staticRenderFns=s,p._compiled=!0),C&&(p.functional=!0),S&&(p._scopeId="data-v-"+S);var g;if(N?(g=function(m){m=m||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!m&&typeof __VUE_SSR_CONTEXT__<"u"&&(m=__VUE_SSR_CONTEXT__),x&&x.call(this,m),m&&m._registeredComponents&&m._registeredComponents.add(N)},p._ssrRegister=g):x&&(g=D?function(){x.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:x),g)if(p.functional){p._injectStyles=g;var F=p.render;p.render=function(M,L){return g.call(L),F(M,L)}}else{var P=p.beforeCreate;p.beforeCreate=P?[].concat(P,g):[g]}return{exports:i,options:p}}},32:function(c,n){c.exports=a(17745)},377:function(c,n){c.exports=a(90451)},6:function(c,n){c.exports=a(83574)},7:function(c,n){c.exports=a(17249)},797:function(c,n,e){"use strict";e.r(n);var t=function(){var j=this,K=j.$createElement,Q=j._self._c||K;return Q("div",[j.$slots.default?Q("div",{attrs:{title:j.item.text},on:{click:function(b){return b.stopPropagation(),j.execute.apply(null,arguments)}}},[j._t("default")],2):Q("div",{staticClass:"sh-full-screen",attrs:{title:j.item.text},on:{click:function(b){return b.stopPropagation(),j.execute.apply(null,arguments)}}},[Q("IconSvg",{attrs:{"icon-class":j.item.icon,theme:j.theme,width:"16px",height:"16px"}})],1)])},i=[];t._withStripped=!0;var o=e(0),s=e.n(o),C=e(6),x=e.n(C),S=e(7),N=e.n(S),D=e(32),p=e.n(D),g=e(377),F=e.n(g),P,m={name:"ShFullScreen",components:{IconSvg:p.a},mixins:[x.a,N.a],data:function(){return{item:{id:"fullScreen",icon:"full-screen",text:"\u5168\u5C4F"}}},computed:{theme:function(){return this.currentView==="map"?"light":"dark"}},mounted:function(){var K=this;(this.$map||this.$earth)&&setTimeout(function(){s()(this,K),this.begin()}.bind(this),0)},beforeDestroy:function(){document.removeEventListener("fullscreenchange",P)},methods:{begin:function(){var K=this;P=function(){F.a.fullscreen===!0?K.item={id:"exitFullScreen",icon:"exit-full-screen",text:"\u9000\u51FA\u5168\u5C4F"}:K.item={id:"fullScreen",icon:"full-screen",text:"\u5168\u5C4F"}},document.removeEventListener("fullscreenchange",P),document.addEventListener("fullscreenchange",P)},execute:function(){var K=F.a.fullscreen===!1,Q=document.body;K?F.a.requestFullscreen(Q):F.a.exitFullscreen()}}},M=m,L=e(2),H=Object(L.a)(M,t,i,!1,null,null,null),B=H.exports;B.install=function(j){j.component(B.name,B)};var G=n.default=B}})},19457:function(J,w,a){"use strict";var c=a(19534);Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var n=c(a(52909)),e=c(a(42579)),t=void 0,i={props:{isShow:{type:Boolean,default:!0},position:{type:Object,default:function(){return(0,e.default)(this,t),{type:"absolute",top:"1px",left:"1px"}}.bind(void 0)},isColumn:{type:Boolean,default:!1},title:{type:String},iconClass:{type:String},dragEnable:{type:Boolean,default:!1},showImg:{type:Boolean,default:!0},showLabel:{type:Boolean,default:!0},themeStyle:{type:Object}},data:function(){return{theme:"light"}},watch:{currentView:{handler:function(C){C==="earth"?this.theme="dark":this.theme="light"},immediate:!0}},mounted:function(){var C,x=this;this.$_mixin_generalButton=(0,n.default)(C=this.$children).call(C,function(S){return(0,e.default)(this,x),S.$options.name==="ShGeneralButton"}.bind(this))},methods:{getPosition:function(){var C;return(C=this.$_mixin_generalButton)===null||C===void 0?void 0:C.getPosition()}}},o=i;w.default=o},21830:function(J,w,a){"use strict";var c=a(19534);Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var n=c(a(42579)),e={data:function(){return{currentInteraction:""}},provide:function(){var o=this;return{reactiveInteraction:function(){return(0,n.default)(this,o),this.currentInteraction}.bind(this)}},mounted:function(){var o=this;this.subscribe.$on("identify-popup:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShIdentifyPopup",s)}.bind(this)),this.subscribe.$on("select-tool:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShSelectTool",s)}.bind(this)),this.subscribe.$on("draw-tool:change:active",function(s,C,x){(0,n.default)(this,o),this.changeCurrentInteraction("ShDrawTool",x.length>0)}.bind(this)),this.subscribe.$on("map-measure:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShMapMeasure",s)}.bind(this)),this.subscribe.$on("plot-tool:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShPlotTool",s)}.bind(this)),this.subscribe.$on("map-measure3d:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShMapMeasure3d",s)}.bind(this)),this.subscribe.$on("export-map:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShExportMap",s)}.bind(this)),this.subscribe.$on("spatial-analysis3d:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShSpatialAnalysis3d",s)}.bind(this)),this.subscribe.$on("flatten-tools:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShFlattenTools",s)}.bind(this)),this.subscribe.$on("roam3d:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShRoam3d",s)}.bind(this)),this.subscribe.$on("clip-tools:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShClipTools",s)}.bind(this)),this.subscribe.$on("split-tool:change:active",function(s){return(0,n.default)(this,o),this.changeCurrentInteraction("ShSplitTool",s)}.bind(this))},methods:{changeCurrentInteraction:function(o,s){s?this.currentInteraction=o:this.currentInteraction===o&&(this.currentInteraction="")}}},t=e;w.default=t},20988:function(J,w,a){J.exports=function(c){var n={};function e(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return c[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=c,e.c=n,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(i&1&&(t=e(t)),i&8||i&4&&typeof t=="object"&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),i&2&&typeof t!="string")for(var s in t)e.d(o,s,function(C){return t[C]}.bind(null,s));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=789)}({0:function(c,n){c.exports=a(42579)},15:function(c,n){c.exports=a(63379)},17:function(c,n){c.exports=a(85208)},18:function(c,n){c.exports=a(59791)},19:function(c,n){c.exports=a(83393)},2:function(c,n,e){"use strict";e.d(n,"a",function(){return t});function t(i,o,s,C,x,S,N,D){var p=typeof i=="function"?i.options:i;o&&(p.render=o,p.staticRenderFns=s,p._compiled=!0),C&&(p.functional=!0),S&&(p._scopeId="data-v-"+S);var g;if(N?(g=function(m){m=m||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!m&&typeof __VUE_SSR_CONTEXT__<"u"&&(m=__VUE_SSR_CONTEXT__),x&&x.call(this,m),m&&m._registeredComponents&&m._registeredComponents.add(N)},p._ssrRegister=g):x&&(g=D?function(){x.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:x),g)if(p.functional){p._injectStyles=g;var F=p.render;p.render=function(M,L){return g.call(L),F(M,L)}}else{var P=p.beforeCreate;p.beforeCreate=P?[].concat(P,g):[g]}return{exports:i,options:p}}},20:function(c,n){c.exports=a(5077)},25:function(c,n){c.exports=a(43389)},28:function(c,n){c.exports=a(32726)},32:function(c,n){c.exports=a(17745)},356:function(c,n){c.exports=a(7819)},4:function(c,n){c.exports=a(55616)},480:function(c,n){c.exports=a(19364)},481:function(c,n){c.exports=a(95031)},6:function(c,n){c.exports=a(83574)},60:function(c,n){c.exports=a(8421)},61:function(c,n){c.exports=a(19457)},63:function(c,n){c.exports=a(36161)},7:function(c,n){c.exports=a(17249)},74:function(c,n){c.exports=a(84247)},789:function(c,n,e){"use strict";e.r(n);var t=e(0),i=e.n(t),o=function(){var l=this,v=l.$createElement,h=l._self._c||v;return h("div",{directives:[{name:"show",rawName:"v-show",value:l.shouldShow,expression:"shouldShow"}],staticClass:"sh-scene-split3d"},[h("div",{directives:[{name:"show",rawName:"v-show",value:l.isShow,expression:"isShow"}],staticClass:"button-container"},[l.$slots.default?h("span",{on:{click:function(){return l.toggle()}}},[l._t("default")],2):h("general-button",{attrs:{theme:l.theme,active:l.isShowContent,position:l.position,"is-column":l.isColumn,"drag-enable":l.dragEnable,"icon-class":l.iconClass?l.iconClass:"scene-split3d","show-img":l.showImg,"show-label":l.showLabel,"theme-style":l.themeStyle,title:l.title?l.title:"\u5206\u5C4F"},on:{click:function(){return l.toggle()}}})],1),l.isShowContent?h("div",{directives:[{name:"cardDrag",rawName:"v-cardDrag"}],staticClass:"split_view"},[h("div",{staticClass:"split_type move_header dragEnable"},[h("div",{class:{type_item:!0,active:l.viewType=="3d"},on:{click:function(O){return l.selected("3d")}}},[h("icon-svg",{attrs:{"icon-class":"three-dimension-view"}}),h("span",{staticClass:"line"},[l._v("|")]),h("icon-svg",{attrs:{"icon-class":"three-dimension-view"}})],1),h("div",{class:{type_item:!0,active:l.viewType=="2d"},on:{click:function(O){return l.selected("2d")}}},[h("icon-svg",{attrs:{"icon-class":"two-dimension-view"}}),h("span",{staticClass:"line"},[l._v("|")]),h("icon-svg",{attrs:{"icon-class":"three-dimension-view"}})],1),h("div",{class:{type_item:!0,active:l.viewType=="zs"},on:{click:function(O){return l.selected("zs")}}},[h("span",{staticStyle:{color:"#fff","font-size":"12px"}},[l._v("\u6B63\u89C6")]),h("span",{staticClass:"line"},[l._v("|")]),h("icon-svg",{attrs:{"icon-class":"three-dimension-view"}})],1),h("div",{staticClass:"type_item",on:{click:function(O){return l.signOut()}}},[h("span",{staticStyle:{color:"#fff"}},[l._v("\u9000\u51FA\u5206\u5C4F")])]),h("div",{directives:[{name:"show",rawName:"v-show",value:l.collapse,expression:"collapse"}],staticClass:"expand",on:{click:function(O){l.collapse=!1}}},[l._m(0),l._m(1)])]),h("div",{directives:[{name:"show",rawName:"v-show",value:!l.collapse,expression:"!collapse"}],staticClass:"separator"}),h("div",{directives:[{name:"show",rawName:"v-show",value:!l.collapse,expression:"!collapse"}],class:["layer_control",{animate:!l.collapse}]},[h("div",{ref:"leftContainer",staticClass:"layer_left control_item"}),h("div",{staticClass:"layer_right control_item"},[h("layer-manager",{ref:"layerMangerRight",attrs:{"only-container":!0,position:l.position_right,primary:!1},on:{"change:check":l.treeNodeCheckChange}})],1),h("div",{staticClass:"collapse",on:{click:function(O){l.collapse=!0}}},[l._m(2),l._m(3)])])]):l._e(),l.isShowContent?h("Earth",{attrs:{"earth-config":l.earthConfig},on:{earthInited:l.getEarth}},[l.leftLayerInfo.length>0?h("layer-manager",{ref:"layerMangerLeft",attrs:{"only-container":!0,position:l.position_left,"layers-info":l.leftLayerInfo}}):h("layer-manager",{ref:"layerMangerLeft",attrs:{"only-container":!0,position:l.position_left}})],1):l._e()],1)},s=[function(){var l=this,v=l.$createElement,h=l._self._c||v;return h("span",[h("i",{staticClass:"el-icon-caret-bottom"})])},function(){var l=this,v=l.$createElement,h=l._self._c||v;return h("span",[h("i",{staticClass:"el-icon-caret-bottom"})])},function(){var l=this,v=l.$createElement,h=l._self._c||v;return h("span",[h("i",{staticClass:"el-icon-caret-top"})])},function(){var l=this,v=l.$createElement,h=l._self._c||v;return h("span",[h("i",{staticClass:"el-icon-caret-top"})])}];o._withStripped=!0;var C=e(17),x=e.n(C),S=e(18),N=e.n(S),D=e(8),p=e.n(D),g=e(19),F=e.n(g),P=e(20),m=e.n(P),M=e(25),L=e.n(M),H=e(32),B=e.n(H),G=e(15),j=e.n(G),K=e(480),Q=e.n(K),b=e(74),$=e.n(b),f=e(97),y=e(63),R=e(6),A=e.n(R),W=e(7),Z=e.n(W),et=e(481),k=e(356),at=e.n(k),nt=e(4),st=e(60),lt=e.n(st),it=e(61),ht=e.n(it),U=void 0;function ct(l,v){var h=x()(l);if(N.a){var O=N()(l);v&&(O=p()(O).call(O,function(X){return F()(l,X).enumerable})),h.push.apply(h,O)}return h}function rt(l){for(var v=1;v<arguments.length;v++){var h=arguments[v]!=null?arguments[v]:{};v%2?ct(Object(h),!0).forEach(function(O){L()(l,O,h[O])}):m.a?Object.defineProperties(l,m()(h)):ct(Object(h)).forEach(function(O){Object.defineProperty(l,O,F()(h,O))})}return l}var T,I,_={name:"ShSceneSplit3d",components:{LayerManager:Q.a,IconSvg:B.a,Earth:at.a,GeneralButton:lt.a},directives:{cardDrag:$.a},mixins:[A.a,Z.a,ht.a],props:{isShow:{type:Boolean,default:!0},position:{type:Object,default:function(){return i()(this,U),{type:"absolute",top:"20px",left:"240px"}}.bind(void 0)},title:{type:String,default:"\u5206\u5C4F\u5BF9\u6BD4"},layerInfos:{type:Array,default:function(){return i()(this,U),[]}.bind(void 0)},layersInfo:{type:Array,default:function(){return i()(this,U),[]}.bind(void 0)}},data:function(){return{collapse:!0,shouldShow:!1,isShowContent:!1,showBaseMap:!1,viewerStat:!1,viewerExStat:!1,timer1:null,timer2:null,dragging:!1,heading:null,pos:null,viewType:"3d",is2d:!1,modeData:"3D",is3D:!0,position_right:{type:"position",top:"0",left:"280px"},position_left:{type:"position",top:"0",left:"0"}}},computed:{earthConfig:function(){var v=rt({},et.earthDefaultConfig);return v.id="cesiumContainer666",v},leftLayerInfo:function(){return this.layersInfo.length>0?this.layersInfo:this.layerInfos}},watch:{currentView:{handler:function(v){this.shouldShow=v==="earth",this.is3D=v==="earth",!this.is3D&&this.$earth&&this.signOut()},immediate:!0}},mounted:function(){var v=this;this.$earth&&setTimeout(function(){i()(this,v),this.begin()}.bind(this),0),this.subscribe.$on("layer-switcher:change:checkedLayer",function(h,O,X){i()(this,v),this.isShowContent&&X!=="map"&&(h==="add"?T.shine.addLayer(O):T.shine.removeLayer(O))}.bind(this)),this.subscribe.$on("layer-manager:treeNodeCheckChange",function(h,O){i()(this,v),this.$refs.layerMangerRight&&this.isShowContent&&this.$refs.layerMangerRight.$refs.tree.setChecked(h.id,O)}.bind(this))},beforeDestroy:function(){this.deactivate()},methods:{begin:function(){I=this.$earth.viewer},toggle:function(){this.is2d?this.isSplit?this.signOut2d3d():this.split2d3d():this.isShowContent?this.signOut():this.split()},activate:function(){this.is2d?this.split2d3d():this.split()},deactivate:function(){this.is2d?this.signOut2d3d():this.signOut()},getEarth:function(v){var h=this;T=v.viewer,this.initBase(),this.$nextTick(function(){var O=this;i()(this,h),this.$refs.leftContainer.appendChild(this.$refs.layerMangerLeft.$el);var X=I.shine.layerManager.checkedLayers;X.forEach(function(tt){i()(this,O),tt.isBaseMapLayer||this.$refs.layerMangerRight.$refs.tree.setChecked(tt.id,!0)}.bind(this))}.bind(this))},selected:function(v){this.viewType=v,this.split()},split:function(){if(!this.currentView==="earth"){Object(nt.Message)({message:"\u8BF7\u5207\u6362\u81F3\u4E09\u7EF4\u6A21\u5F0F\uFF01",type:"warning"});return}this.isShowContent?this.changeType():(this.isShowContent=!0,this.viewType="3d"),this.$emit("change:active",!0)},initBase:function(){var v=this,h=I.shine.layerManager.checkedLayers;h.forEach(function(X){i()(this,v),X.isBaseMapLayer&&T.shine.addLayer(X)}.bind(this)),j()("#"+this.$earth.viewer._container.id).css({position:"absolute",height:"100%",left:"50%",width:"50%"});var O=j()("#"+I._container.id).parent();O.append(j()(".sh-scene-split3d")),j()("#"+T._container.id).css({position:"absolute",height:"100%",left:"0",width:"50%"}),I.camera.changed.addEventListener(this._map_extentChangeHandler,this),I.camera.percentageChanged=.01,T.camera.changed.addEventListener(this._mapEx_extentChangeHandler,this),T.camera.percentageChanged=.01,this._map_extentChangeHandler(),this.changeType(),setTimeout(function(){i()(this,v),this.updateView(I,T,!0)}.bind(this),500)},changeType:function(){var v=this,h=T.screenSpaceEventHandler,O=I.screenSpaceEventHandler;switch(this.viewType){case"3d":T.scene.morphTo3D(0),T.scene.screenSpaceCameraController.enableTilt=!0,Object(y.CesiumDragEvt)(h,null,!0),Object(y.CesiumDragEvt)(O,null,!0);break;case"2d":{T.scene.morphTo2D(0);var X=I.camera.position;Object(y.CesiumDragEvt)(h,null,!0),Object(y.CesiumDragEvt)(O,function(){i()(this,v),this.dragging=!0,this.heading=I.camera.heading;var tt=I.camera.pitch,ft=-Math.PI/6;tt>ft&&(I.camera.setView({destination:X,orientation:{heading:I.camera.heading,pitch:ft-1e-4,roll:I.camera.roll}}),I.scene.screenSpaceCameraController.enableTilt=!1)}.bind(this),!1,function(){i()(this,v),I.scene.screenSpaceCameraController.enableTilt=!0}.bind(this));break}case"zs":T.scene.morphTo3D(0),Object(y.CesiumDragEvt)(O,function(){i()(this,v),this.dragging=!0,this.heading=I.camera.heading}.bind(this)),Object(y.CesiumDragEvt)(h,function(tt){i()(this,v),T.camera.setView({destination:T.camera.position,orientation:{heading:T.camera.heading+(tt.endPosition.x-tt.startPosition.x)*.0085,pitch:-Math.PI/2,roll:0}})}.bind(this)),T.scene.screenSpaceCameraController.enableTilt=!1;break}},signOut:function(){this.isShowContent=!1,this.$emit("change:active",!1),j()("#"+this.$earth.viewer._container.id).css({position:"absolute",height:"100%",left:"0",width:"100%"})},_map_extentChangeHandler:function(){var v=this;if(this.viewerExStat){this.viewerExStat=!1;return}this.viewerStat=!0,T.camera.changed.removeEventListener(this._mapEx_extentChangeHandler,this),this.updateView(I,T,!0),clearTimeout(this.timer1),this.timer1=setTimeout(function(){i()(this,v),T.camera.changed.addEventListener(this._mapEx_extentChangeHandler,this)}.bind(this),10)},_mapEx_extentChangeHandler:function(){var v=this;if(this.viewerStat){this.viewerStat=!1;return}this.viewerExStat=!0,I.camera.changed.removeEventListener(this._map_extentChangeHandler,this),this.updateView(T,I),clearTimeout(this.timer2),this.timer2=setTimeout(function(){i()(this,v),I.camera.changed.addEventListener(this._map_extentChangeHandler,this)}.bind(this),10)},updateView:function(v,h,O){if((this.viewType==="2d"||this.viewType==="zs")&&O){if(this.dragging)this.dragging=!1;else{var X=v.camera.position,tt=Object(y.cartesian2Carto)(X),ft=v.scene.pickPosition(Object(y.toCartesian2)(v.scene.canvas.width/2,v.scene.canvas.height/2));if(!ft)return;this.pos=Object(f.setPositionsHeight)(ft,tt.height),this.heading=I.camera.heading}return h.camera.setView({destination:this.pos,orientation:{heading:I.camera.heading,pitch:-Math.PI/2,roll:0}})}var ut=v.shine.getCameraView(!0);h.camera.setView({destination:Object(y.lonlat2cartesian)([ut.x,ut.y,ut.z]),orientation:{heading:ut.heading/180*Math.PI,pitch:ut.pitch/180*Math.PI,roll:ut.roll/180*Math.PI}})},split2d3d:function(){this.isSplit=!0,this.$emit("change:active",!0),j()(this.$map.getTargetElement()).css({position:"absolute",height:"100%",left:"0",width:"50%",borderRight:"1px solid #fff"}),this.$map.updateSize(),j()(".cesium-container").css({position:"absolute",height:"100%",left:"50%",width:"50%"}),j()(".cesium-container").show(),I.shine.ol3d.update(!0),I.shine.ol3d.setEnabled(!0,!0)},signOut2d3d:function(){this.isSplit=!1,this.$emit("change:active",!1),I.shine.ol3d.update(!1),I.shine.ol3d.setEnabled(!1,!1),j()(this.$map.getTargetElement()).css({position:"absolute",height:"100%",left:"0",width:"100%"}),this.$map.updateSize(),j()(".cesium-container").hide()},fullScreen:function(){var v=document.documentElement,h=v.requestFullScreen||v.webkitRequestFullScreen||v.mozRequestFullScreen||v.msRequestFullscreen;typeof h<"u"&&h&&h.call(v)},exitScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},treeNodeCheckChange:function(v,h){this.$emit("treeNodeCheckChange",v,h)}}},dt=_,gt=e(2),vt=Object(gt.a)(dt,o,s,!1,null,null,null),Ct=vt.exports,xt=e(28),St=e.n(xt),mt=void 0,pt=St()(Ct,{transform:function(v){i()(this,mt);var h=v.show,O=v.label,X=v.position;return{isShow:h,title:O,position:X}}.bind(void 0)});pt.install=function(l){l.component(pt.name,pt)};var Et=n.default=pt},8:function(c,n){c.exports=a(22466)},97:function(c,n){c.exports=a(92672)}})},95031:function(J,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.earthDefaultConfig=void 0;var a={id:"cesiumContainer555",baseLayerPicker:!1,navigationHelpButton:!1,sceneModePicker:!1,homeButton:!1,fullscreenButton:!1,infoBox:!1,geocoder:!1,navigation:{},controls:[{crs:"",type:"location"},{type:"mousezoom"},{style:{top:"auto",bottom:"240px",right:"2px"},type:"navigation"}],showRenderLoopErrors:!0,center:{heading:360,roll:360,x:120.173619,y:30.247628,z:40113339e-1,pitch:-90},basemaps:[],defaultKey:{www_bing:"AtkX3zhnRe5fyGuLU30uZw8r3sxdBDnpQly7KfFTCB2rGlDgXBG3yr-qEiQEicEc",CesiumionToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmNDEzNmM2ZC02YTVmLTQ5YWEtODI4My1kN2ZkMTZjYWY4MmMiLCJpZCI6MTY4ODIsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NzEyOTE5NDd9.z0SU6f7Ou6381zw8UzAvFGIz6n7X0HNgCpse_kfBJXg",www_tdt:"e8355c4f15927bf3bf73b4801e30611a",geocoderConfig:{key:["f2fedb9b08ae13d22f1692cd472d345e","81825d9f2bafbb14f235d2779be90c0f","b185732970a4487de104fa71ef575f29","2e6ca4aeb6867fb637a5bee8333e5d3a","027187040fa924e56048468aaa77b62c"]}},maxzoom:5e7,minzoom:1,vrButton:!1,operationallayers:[],style:{debugShowFramesPerSecond:!1,resolutionScale:!0,atmosphere:!0,testTerrain:!0,lighting:!1,fog:!0}};w.earthDefaultConfig=a},90451:function(J,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;function a(i){return i!=null}var c,n={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},e={};Object.defineProperties(e,{element:{get:function(){if(e.supportsFullscreen())return document[n.fullscreenElement]}},changeEventName:{get:function(){if(e.supportsFullscreen())return n.fullscreenchange}},errorEventName:{get:function(){if(e.supportsFullscreen())return n.fullscreenerror}},enabled:{get:function(){if(e.supportsFullscreen())return document[n.fullscreenEnabled]}},fullscreen:{get:function(){if(e.supportsFullscreen())return e.element!==null}}}),e.supportsFullscreen=function(){if(a(c))return c;c=!1;var i=document.body;if(typeof i.requestFullscreen=="function")return n.requestFullscreen="requestFullscreen",n.exitFullscreen="exitFullscreen",n.fullscreenEnabled="fullscreenEnabled",n.fullscreenElement="fullscreenElement",n.fullscreenchange="fullscreenchange",n.fullscreenerror="fullscreenerror",c=!0,c;for(var o=["webkit","moz","o","ms","khtml"],s,C=0,x=o.length;C<x;++C){var S=o[C];s="".concat(S,"RequestFullscreen"),typeof i[s]=="function"?(n.requestFullscreen=s,c=!0):(s="".concat(S,"RequestFullScreen"),typeof i[s]=="function"&&(n.requestFullscreen=s,c=!0)),s="".concat(S,"ExitFullscreen"),typeof document[s]=="function"?n.exitFullscreen=s:(s="".concat(S,"CancelFullScreen"),typeof document[s]=="function"&&(n.exitFullscreen=s)),s="".concat(S,"FullscreenEnabled"),document[s]!==void 0?n.fullscreenEnabled=s:(s="".concat(S,"FullScreenEnabled"),document[s]!==void 0&&(n.fullscreenEnabled=s)),s="".concat(S,"FullscreenElement"),document[s]!==void 0?n.fullscreenElement=s:(s="".concat(S,"FullScreenElement"),document[s]!==void 0&&(n.fullscreenElement=s)),s="".concat(S,"fullscreenchange"),document["on".concat(s)]!==void 0&&(S==="ms"&&(s="MSFullscreenChange"),n.fullscreenchange=s),s="".concat(S,"fullscreenerror"),document["on".concat(s)]!==void 0&&(S==="ms"&&(s="MSFullscreenError"),n.fullscreenerror=s)}return c},e.requestFullscreen=function(i,o){e.supportsFullscreen()&&i[n.requestFullscreen]({vrDisplay:o})},e.exitFullscreen=function(){e.supportsFullscreen()&&document[n.exitFullscreen]()},e._names=n;var t=e;w.default=t},75277:function(J,w,a){"use strict";a.r(w),a.d(w,{default:function(){return F}});var c=function(){var m=this,M=m._self._c;return M("div",{directives:[{name:"show",rawName:"v-show",value:m.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],ref:"content",style:{width:m.widgetInfo.attr.w+"px",height:m.widgetInfo.attr.hh+"px"}},[m.viewMode!=="2D"?M("SceneSplit3d",{ref:"sceneSplit3d",attrs:{"is-show":!0,"theme-style":m.themeConfig,"layer-infos":m.myLayerInfos,position:m.position},on:{"change:active":m.changeActive}}):m._e()],1)},n=[],e=a(20988),t=a.n(e),i=a(86892),o=a(76010),s=a(45061),C=a(26711),x=a(42709),S=a(50681),N={name:"GisSceneSplit3d",components:{SceneSplit3d:t()},mixins:[i.D,o.Z,s.u,C.H,x.Z,S.Z],props:["widgetInfo"],data(){return{timer:"",mapAction:this.widgetInfo.action,btnAttr:this.widgetInfo.attr,myURl:this.widgetInfo.config.url,myLayerInfos:[]}},mounted(){this.viewMode==="2D"&&this.$message("\u7EAF\u4E8C\u7EF4\u6A21\u5F0F\u65E0\u6CD5\u52A0\u8F7D'\u5206\u5C4F\u5BF9\u6BD4'\u7EC4\u4EF6"),this.isSpecial=!0,this.isEditor||this.$nextTick(()=>{let P=this.$refs.sceneSplit3d.$el;this.bindToPage(P)}),this.initAction(this.widgetInfo)},methods:{reLoadInfo(P){this.btnAttr=P.attr},initAction(P){this.registerAction(P,"configMap","mapList",this.doConfigMap),this.actionReceive(P)},getLayerinfos(){return this.getWidgetObject(this.widgetInfo.action.gisTocId).widgetInfo.mapLayer.toc},changeActive(){this.myLayerInfos=this.getLayerinfos()}}},D=N,p=a(68141),g=(0,p.Z)(D,c,n,!1,null,null,null),F=g.exports}}]);
