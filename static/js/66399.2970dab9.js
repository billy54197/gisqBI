"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[66399],{752246:function(S,E,h){h.d(E,{X:function(){return g},b:function(){return y}});let g={versions:function(){var c=navigator.userAgent;return{trident:c.indexOf("Trident")>-1,presto:c.indexOf("Presto")>-1,webKit:c.indexOf("AppleWebKit")>-1,gecko:c.indexOf("Gecko")>-1&&c.indexOf("KHTML")==-1,mobile:!!c.match(/AppleWebKit.*Mobile.*/),ios:!!c.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:c.indexOf("Android")>-1,iPhone:c.indexOf("iPhone")>-1,iPad:c.indexOf("iPad")>-1,webApp:c.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},y;g.versions.mobile||g.versions.ios||g.versions.android||g.versions.iPhone||g.versions.iPad?y=!1:y=!0},844513:function(S,E,h){h.d(E,{Z:function(){return I}});var g=function(){var _=this,C=_._self._c;return _.attr.buttonHide?C("div",{style:{position:"absolute",right:_.attr.buttonHideRight+"px",top:_.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(F){return _.onHide()}}},[_.openTooltip?C("el-tooltip",{attrs:{"open-delay":1e3,content:_.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[C("el-button",{class:_.attr.buttonHideIconClass&&_.attr.buttonHideIconClass!=""?_.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:_.attr.buttonHideColor,fontSize:_.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):C("el-button",{class:_.attr.buttonHideIconClass&&_.attr.buttonHideIconClass!=""?_.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:_.attr.buttonHideColor,fontSize:_.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):_._e()},y=[],c=h(752246),m={props:["attr"],name:"hide-button",data(){return{isPc:c.b}},computed:{openTooltip:function(){let f=!1,_=this.attr.buttonHideTooltipContent;return c.b&&_&&_!=null&&_.trim()!=""&&(f=!0),f}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},M=m,w=h(768141),O=(0,w.Z)(M,g,y,!1,null,"bf399b9a",null),I=O.exports},957922:function(S,E,h){var g=h(898776),y=h(832450),c=h(302073),m=h(313811),M=h(251154),w=h(203873),O=h(359225),I=h(821145),f=h(247602),_=h(504889),C=h(922683),F=h(507522),R=h(413798),j=h(799994),B=h(144727),W=h(372449),Z=h(2487),A=h(192249),N=h(910516),b=h(682571),x=h(390583),G=h(707115),H=h(866884),U=function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),o={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},D={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},L=function(l){U(r,l);function r(t,e){var i=l.call(this,t)||this;return i.feature=e,i}return r}(y.ZP),K=function(l){U(r,l);function r(t){var e=this,i=t;i.stopDown||(i.stopDown=A.Dv),e=l.call(this,i)||this,e.on,e.once,e.un,e.shouldHandle_=!1,e.downPx_=null,e.downTimeout_,e.lastDragTime_,e.pointerType_,e.freehand_=!1,e.source_=t.source?t.source:null,e.features_=t.features?t.features:null,e.snapTolerance_=t.snapTolerance?t.snapTolerance:12,e.type_=t.type,e.mode_=Y(e.type_),e.stopClick_=!!t.stopClick,e.minPoints_=t.minPoints?t.minPoints:e.mode_===o.POLYGON?3:2,e.maxPoints_=e.mode_===o.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,e.finishCondition_=t.finishCondition?t.finishCondition:A.uX,e.geometryLayout_=t.geometryLayout?t.geometryLayout:M.Z.XY;var s=t.geometryFunction;if(!s){var n=e.mode_;if(n===o.CIRCLE)s=function(d,u,p){var v=u||new g.Z([NaN,NaN]),P=(0,x.fromUserCoordinate)(d[0],p),k=(0,H.bI)(P,(0,x.fromUserCoordinate)(d[d.length-1],p));v.setCenterAndRadius(P,Math.sqrt(k),this.geometryLayout_);var T=(0,x.getUserProjection)();return T&&v.transform(p,T),v};else{var a;n===o.POINT?a=R.Z:n===o.LINE_STRING?a=O.Z:n===o.POLYGON&&(a=B.ZP),s=function(d,u,p){return u?n===o.POLYGON?d[0].length?u.setCoordinates([d[0].concat([d[0][0]])],this.geometryLayout_):u.setCoordinates([],this.geometryLayout_):u.setCoordinates(d,this.geometryLayout_):u=new a(d,this.geometryLayout_),u}}}return e.geometryFunction_=s,e.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,e.finishCoordinate_=null,e.sketchFeature_=null,e.sketchPoint_=null,e.sketchCoords_=null,e.sketchLine_=null,e.sketchLineCoords_=null,e.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,e.overlay_=new W.default({source:new Z.default({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:V(),updateWhileInteracting:!0}),e.geometryName_=t.geometryName,e.condition_=t.condition?t.condition:N.rM,e.freehandCondition_,t.freehand?e.freehandCondition_=N.Bx:e.freehandCondition_=t.freehandCondition?t.freehandCondition:N.vY,e.addChangeListener(w.Z.ACTIVE,e.updateState_),e}return r.prototype.setMap=function(t){l.prototype.setMap.call(this,t),this.updateState_()},r.prototype.getOverlay=function(){return this.overlay_},r.prototype.handleEvent=function(t){t.originalEvent.type===c.Z.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==o.POINT&&this.freehandCondition_(t);var e=t.type===f.Z.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===f.Z.POINTERDRAG){var s=Date.now();s-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===f.Z.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===f.Z.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===f.Z.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===f.Z.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===f.Z.DBLCLICK&&(i=!1),l.prototype.handleEvent.call(this,t)&&i},r.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new I.Z(f.Z.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},r.prototype.handleUpEvent=function(t){var e=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===o.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.preventDefault(),e},r.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,s=e[0]-i[0],n=e[1]-i[1],a=s*s+n*n;if(this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},r.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,s=[this.finishCoordinate_],n=this.mode_;if(n===o.POINT)e=!0;else if(n===o.CIRCLE)e=this.sketchCoords_.length===2;else if(n===o.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(n===o.POLYGON){var a=this.sketchCoords_;i=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]]}if(i)for(var d=this.getMap(),u=0,p=s.length;u<p;u++){var v=s[u],P=d.getPixelFromCoordinate(v),k=t[0]-P[0],T=t[1]-P[1],z=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(k*k+T*T)<=z,e){this.finishCoordinate_=v;break}}}return e},r.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new m.Z(new R.Z(t)),this.updateSketchFeatures_();else{var e=this.sketchPoint_.getGeometry();e.setCoordinates(t)}},r.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new m.Z);var e=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new O.Z(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))},r.prototype.startDrawing_=function(t){for(var e=this.getMap().getView().getProjection(),i=(0,G.tP)(this.geometryLayout_);t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_===o.POINT?this.sketchCoords_=t.slice():this.mode_===o.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new m.Z(new O.Z(this.sketchLineCoords_)));var s=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new m.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new L(D.DRAWSTART,this.sketchFeature_))},r.prototype.modifyDrawing_=function(t){for(var e=this.getMap(),i=this.sketchFeature_.getGeometry(),s=e.getView().getProjection(),n=(0,G.tP)(this.geometryLayout_),a,d;t.length<n;)t.push(0);if(this.mode_===o.POINT?d=this.sketchCoords_:this.mode_===o.POLYGON?(a=this.sketchCoords_[0],d=a[a.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(a=this.sketchCoords_,d=a[a.length-1]),d[0]=t[0],d[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,s),this.sketchPoint_){var u=this.sketchPoint_.getGeometry();u.setCoordinates(t)}if(i.getType()==="Polygon"&&this.mode_!==o.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var p=this.sketchLine_.getGeometry();p.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},r.prototype.addToDrawing_=function(t){var e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),s,n,a=this.mode_;a===o.LINE_STRING||a===o.CIRCLE?(this.finishCoordinate_=t.slice(),n=this.sketchCoords_,n.length>=this.maxPoints_&&(this.freehand_?n.pop():s=!0),n.push(t.slice()),this.geometryFunction_(n,e,i)):a===o.POLYGON&&(n=this.sketchCoords_[0],n.length>=this.maxPoints_&&(this.freehand_?n.pop():s=!0),n.push(t.slice()),s&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()},r.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),e=this.getMap().getView().getProjection(),i,s=this.mode_;if(s===o.LINE_STRING||s===o.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var n=this.finishCoordinate_.slice();i[i.length-1]=n,this.createOrUpdateSketchPoint_(n)}this.geometryFunction_(i,t,e),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(s===o.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var a=this.sketchLine_.getGeometry();if(i.length>=2){var n=i[i.length-2].slice();i[i.length-1]=n,this.createOrUpdateSketchPoint_(n)}a.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,e)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},r.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),s=this.getMap().getView().getProjection();this.mode_===o.LINE_STRING?(e.pop(),this.geometryFunction_(e,i,s)):this.mode_===o.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i,s),e=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new C.Z([e])):this.type_==="MultiLineString"?t.setGeometry(new _.Z([e])):this.type_==="MultiPolygon"&&t.setGeometry(new F.Z([e])),this.dispatchEvent(new L(D.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},r.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},r.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new L(D.DRAWABORT,t))},r.prototype.appendCoordinates=function(t){var e=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);var s;if(e===o.LINE_STRING||e===o.CIRCLE)s=this.sketchCoords_;else if(e===o.POLYGON)s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&s.shift(),s.pop();for(var n=0;n<t.length;n++)this.addToDrawing_(t[n]);var a=t[t.length-1];this.addToDrawing_(a),this.modifyDrawing_(a)},r.prototype.extend=function(t){var e=t.getGeometry(),i=e;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new m.Z(new R.Z(s)),this.updateSketchFeatures_(),this.dispatchEvent(new L(D.DRAWSTART,this.sketchFeature_))},r.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},r.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)},r}(j.Z);function V(){var l=(0,b.Ly)();return function(r,t){return l[r.getGeometry().getType()]}}function X(l,r){return function(t,e,i){var s=fromUserCoordinate(t[0],i),n=fromUserCoordinate(t[t.length-1],i),a=Math.sqrt(squaredCoordinateDistance(s,n)),d=e||fromCircle(new Circle(s),l),u=r;if(!r&&r!==0){var p=n[0]-s[0],v=n[1]-s[1];u=Math.atan2(v,p)}makeRegular(d,s,a,u);var P=getUserProjection();return P&&d.transform(i,P),d}}function $(){return function(l,r,t){var e=boundingExtent([l[0],l[l.length-1]].map(function(a){return fromUserCoordinate(a,t)})),i=[[getBottomLeft(e),getBottomRight(e),getTopRight(e),getTopLeft(e),getBottomLeft(e)]],s=r;s?s.setCoordinates(i):s=new Polygon(i);var n=getUserProjection();return n&&s.transform(t,n),s}}function Y(l){switch(l){case"Point":case"MultiPoint":return o.POINT;case"LineString":case"MultiLineString":return o.LINE_STRING;case"Polygon":case"MultiPolygon":return o.POLYGON;case"Circle":return o.CIRCLE;default:throw new Error("Invalid type: "+l)}}E.ZP=K}}]);
