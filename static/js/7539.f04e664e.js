"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[7539],{56279:function(u,d,t){t.d(d,{P:function(){return g}});var l=t(86892),o=t(49500);const g={mixins:[l.D],created(){},methods:{lifecycleBeforeChartsLoad(c){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&o.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),o.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let f=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[c]);if(f)return f}return c},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&o.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),o.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},57539:function(u,d,t){t.r(d),t.d(d,{default:function(){return S}});var l=function(){var e=this,s=e._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.attr.hide!==!0,expression:"widgetInfo.attr.hide !== true"}],staticStyle:{width:"100px",height:"100px","text-align":"center","line-height":"100px"}},[e._v("\u5730\u56FE\u5BFC\u822A")])},o=[],g=t(27966),c=t(45061),h=t(26711),f=t(56279),p=t(23400),v=t(47361),w=t(67157);const I={mixins:[w.c],data(){return{config_extend:{config:{}},filter_config:{}}},methods:{filterPredefineColoursSchemeConfig(i,e){this.getNewConfigWithArrary(i,e,this.filter_config)}}};var y=t(48836),L=t(96471),x=t(55616),C=t(49500),N={name:"navigation-map.vue",props:["widgetInfo","currentWidget"],mixins:[v.u,I,c.u,h.H,f.P,p.j],watch:{"currentWidget.id":{deep:!0,handler:function(i){if(!this.currentWidget.id){this.widgetInfo.attr.hide=!0;return}i===this.widgetInfo.id||this.currentWidget.parentId===this.widgetInfo.id?this.widgetInfo.attr.hide=!1:this.widgetInfo.attr.hide=!0}},"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},data(){return{dbClick:!0,prefix:{widget:"widget_"},actionList:{},getPlus:L.A}},computed:{...(0,y.Se)(["isView"])},mounted(){this.initAction(this.widgetInfo),this.isView&&(this.widgetInfo.attr.hide=!0),this.loadInfo()},methods:{loadInfo(){this.lifecycleAfterLoad()},reLoadInfo(){},initAction(i){this.actionReceive(i)},actionReceive(i){i.action===void 0||i.action.receive===void 0||i.action.receive.mapNavigation&&this.$$lib__.each(i.action.receive.mapNavigation.widgetList,e=>{let s=e[0][1]+"_"+e[0][0];e[0][1].indexOf("_")>-1&&(s=e[0][1]);let a=e[0][2];if(a){let n=a.indexOf("|");n>-1&&(a=e[0][2].substring(n+1))}g.Z.$on(s,n=>{if(i.action.receive.mapNavigation.script&&i.action.receive.mapNavigation.script.enabled){if(C.log("Execute script for "+this.widgetInfo.name+" component to "+e.name+" component"),i.action.receive.mapNavigation.script.content==""){x.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.custom_mapNavigation_script=new Function("param","param_key",i.action.receive.mapNavigation.script.content),this.custom_mapNavigation_script(n,a);return}this.navigation(n)})})},navigation(i){const{startLng:e,startLat:s,endLng:a,endLat:n,desc:m}=i,r=this.getPlus();if(!r){this.$message({message:"\u5F53\u524D\u73AF\u5883\u65E0\u6CD5\u8C03\u7528plus",type:"error"});return}this.$message.info("\u8BF7\u786E\u4FDD\u5DF2\u5B89\u88C5\u9AD8\u5FB7\u5730\u56FE"),setTimeout(()=>{if(this.widgetInfo.config.type==="navi"){const b=new r.maps.Point(a,n),W=new r.maps.Point(120,30);r.maps.openSysMap(b,m,W)}else r.runtime.openURL(`androidamap://route?sourceApplication=amap&slat=${s}&slon=${e}&dlat=${n}&dlon=${a}&dname=${m}&dev=0&t=1`)},1500)}}},P=N,$=t(68141),A=(0,$.Z)(P,l,o,!1,null,"a4cb2402",null),S=A.exports}}]);
