(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[21917],{56279:function(d,e,i){"use strict";i.d(e,{P:function(){return m}});var f=i(386892),u=i(149500);const m={mixins:[f.D],created(){},methods:{lifecycleBeforeChartsLoad(w){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&u.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let y=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[w]);if(y)return y}return w},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&u.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),u.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},911063:function(){Date.prototype.isLeapYear=function(){return this.getYear()%4==0&&(this.getYear()%100!=0||this.getYear()%400==0)},Date.prototype.Format=function(d){var e=d,i=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"];return e=e.replace(/yyyy|YYYY/,this.getFullYear()),e=e.replace(/yy|YY/,this.getYear()%100>9?(this.getYear()%100).toString():"0"+this.getYear()%100),e=e.replace(/MM/,this.getMonth()>9?this.getMonth().toString():"0"+this.getMonth()),e=e.replace(/M/g,this.getMonth()),e=e.replace(/w|W/g,i[this.getDay()]),e=e.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate()),e=e.replace(/d|D/g,this.getDate()),e=e.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours()),e=e.replace(/h|H/g,this.getHours()),e=e.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes()),e=e.replace(/m/g,this.getMinutes()),e=e.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds()),e=e.replace(/s|S/g,this.getSeconds()),e},Date.prototype.DateAdd=function(d,e){var i=this;switch(d){case"s":return new Date(Date.parse(i)+1e3*e);case"n":return new Date(Date.parse(i)+6e4*e);case"h":return new Date(Date.parse(i)+36e5*e);case"d":return new Date(Date.parse(i)+864e5*e);case"w":return new Date(Date.parse(i)+864e5*7*e);case"q":return new Date(i.getFullYear(),i.getMonth()+e*3,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());case"m":return new Date(i.getFullYear(),i.getMonth()+e,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());case"y":return new Date(i.getFullYear()+e,i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())}},Date.prototype.DateDiff=function(d,e){var i=this;switch(typeof e=="string"&&(e=e.StringToDate),d){case"s":return parseInt((e-i)/1e3);case"n":return parseInt((e-i)/6e4);case"h":return parseInt((e-i)/36e5);case"d":return parseInt((e-i)/864e5);case"w":return parseInt((e-i)/(864e5*7));case"m":return e.getMonth()+1+(e.getFullYear()-i.getFullYear())*12-(i.getMonth()+1);case"y":return e.getFullYear()-i.getFullYear()}},Date.prototype.toString=function(d){var e=this,i=e.toLocaleDateString();if(d){var f=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"];i+=" \u661F\u671F"+f[e.getDay()]}return i},Date.prototype.toArray=function(){var d=this,e=Array();return e[0]=d.getFullYear(),e[1]=d.getMonth(),e[2]=d.getDate(),e[3]=d.getHours(),e[4]=d.getMinutes(),e[5]=d.getSeconds(),e},Date.prototype.DatePart=function(d){var e=this,i="",f=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"];switch(d){case"y":i=e.getFullYear();break;case"m":i=e.getMonth()+1;break;case"d":i=e.getDate();break;case"w":i=f[e.getDay()];break;case"ww":i=e.WeekNumOfYear();break;case"h":i=e.getHours();break;case"n":i=e.getMinutes();break;case"s":i=e.getSeconds();break}return i},Date.prototype.StringToDate=function(){var d=this,e=Date.parse(d),i=new Date(e);if(isNaN(i)){var f=d.split("-");i=new Date(f[0],--f[1],f[2])}return i}},752246:function(d,e,i){"use strict";i.d(e,{X:function(){return f},b:function(){return u}});let f={versions:function(){var m=navigator.userAgent;return{trident:m.indexOf("Trident")>-1,presto:m.indexOf("Presto")>-1,webKit:m.indexOf("AppleWebKit")>-1,gecko:m.indexOf("Gecko")>-1&&m.indexOf("KHTML")==-1,mobile:!!m.match(/AppleWebKit.*Mobile.*/),ios:!!m.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:m.indexOf("Android")>-1,iPhone:m.indexOf("iPhone")>-1,iPad:m.indexOf("iPad")>-1,webApp:m.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},u;f.versions.mobile||f.versions.ios||f.versions.android||f.versions.iPhone||f.versions.iPad?u=!1:u=!0},844513:function(d,e,i){"use strict";i.d(e,{Z:function(){return S}});var f=function(){var c=this,I=c._self._c;return c.attr.buttonHide?I("div",{style:{position:"absolute",right:c.attr.buttonHideRight+"px",top:c.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(x){return c.onHide()}}},[c.openTooltip?I("el-tooltip",{attrs:{"open-delay":1e3,content:c.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[I("el-button",{class:c.attr.buttonHideIconClass&&c.attr.buttonHideIconClass!=""?c.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:c.attr.buttonHideColor,fontSize:c.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):I("el-button",{class:c.attr.buttonHideIconClass&&c.attr.buttonHideIconClass!=""?c.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:c.attr.buttonHideColor,fontSize:c.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):c._e()},u=[],m=i(752246),w={props:["attr"],name:"hide-button",data(){return{isPc:m.b}},computed:{openTooltip:function(){let D=!1,c=this.attr.buttonHideTooltipContent;return m.b&&c&&c!=null&&c.trim()!=""&&(D=!0),D}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},v=w,y=i(768141),T=(0,y.Z)(v,f,u,!1,null,"bf399b9a",null),S=T.exports},521917:function(d,e,i){"use strict";i.r(e),i.d(e,{default:function(){return k}});var f=function(){var s=this,r=s._self._c;return r("div",{style:{width:s.widgetInfo.attr.w+"px",height:s.widgetInfo.attr.hh+"px"}},[r("hide-button",{attrs:{attr:s.widgetInfo.attr}}),r("div",{ref:"comTimeProgress",staticClass:"comTimeProgress",style:s.getGolbalStyle(),on:{click:function(n){return n.stopPropagation(),s.clickBar(n)}}},[r("div",{ref:"progressContainer",staticClass:"progress-container"},[r("div",{staticClass:"bar",style:{backgroundColor:s.widgetInfo.config.inactiveStyle.lineStyle.color,height:s.widgetInfo.config.inactiveStyle.lineStyle.height+"px"}}),r("div",{ref:"progressTransform",staticClass:"progress-transform",style:s.getTransFormStyle()}),s._l(s.progressItemList,function(n,o){return r("div",{key:o,staticClass:"time-tag"},[r("span",{staticClass:"progress-tag",style:s.getTagStyle(n.left)},[s._v(s._s(n.tag))]),r("span",{staticClass:"progress-point",style:s.getPointStyle(n.left)})])})],2),r("div",{staticClass:"btn-play",style:s.getBtnStyle()},[s._v(" "+s._s(s.widgetInfo.config.buttonStyle.text)+" ")])])],1)},u=[],m=i(927966),w=i(126711),v=i(445061),y=i(56279),T=i(844513),S=i(555616),D=i(851161),c=i(911063),I=i(67157);const x={mixins:[I.c],data(){return{config_extend:{config:{labelStyle:{left:21}}},filter_config:{inactiveStyle:{lineStyle:{color:"#BFCBD9"},pointer:{color:"#4C84FF",borderColor:"#29CC97"}},activeStyle:{lineStyle:{color:"#4C84FF"}},labelStyle:{color:"#616266"}}}},methods:{filterPredefineColoursSchemeConfig(t,s){this.getNewConfigWithArrary(t,s,this.filter_config)}}};var F=i(149500),M={props:["widgetInfo"],name:"com-time-progress",components:{HideButton:T.Z},mixins:[w.H,v.u,y.P,D.baseConfig,x],data(){return{startTime:null,endTime:null,step:0,timmer:null,progressItemList:[],left:null,currentTime:null,dayList:0,size:0,widthItem:0,progressWidth:0}},watch:{"widgetInfo.attr.pause":{deep:!0,handler:function(){this.widgetInfo.attr.pause?window.clearInterval(this.timmer):(window.clearInterval(this.timmer),this.run(this.widgetInfo))}},"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},computed:{barWidth(){let t=this.widgetInfo;return t.attr.w-t.config.global.left-t.config.global.right}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo),this.$refs.progressTransform&&(this.$refs.progressTransform.style.left="0px")},methods:{loadInfo(t){this.$refs.progressTransform&&(this.$refs.progressTransform.style.left="0px"),this.getTime(t.dataset[t.dataset.type].encode,t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].source),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},clickBar(t){let s=this.$refs.progressTransform,r=t.clientX-this.widgetInfo.attr.x-this.widgetInfo.config.global.left,n=0;if(r/this.progressWidth<1?n=1:r%this.progressWidth>0?n=parseInt(r/this.progressWidth)+1:n=parseInt(r/this.progressWidth),this.progressWidth*n<=this.barWidth){this.widgetInfo.attr.pause=!0,window.clearInterval(this.timmer),this.left=this.progressWidth*(n-1),s.style.left=this.left+"px";let o=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeInterval;switch(this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeIntervalType){case"year":this.currentTime=new Date(this.startTime).DateAdd("y",n*o);break;case"month":this.currentTime=new Date(this.startTime).DateAdd("m",n*o);break;case"day":this.currentTime=new Date(this.startTime).DateAdd("d",n*o);break}this.onChange(this.currentTime)}},getTime(t,s,r){let n=-1,o=-1;switch(this.$$lib__.each(s,(a,g)=>{a==t.startTime&&(n=g),a==t.endTime&&(o=g)}),n>-1?this.startTime=r[0][n]:this.startTime="",o>-1?this.endTime=r[0][o]:this.endTime="",t.timeType){case"year":this.step=365*24*3600*1e3;break;case"month":this.step=30*24*3600*1e3;break;case"day":this.step=24*3600*1e3;break;case"hour":this.step=3600*1e3;break;case"minute":this.step=60*1e3;break;case"second":this.step=1e3;break}n>-1&&o>-1?this.getTimeList():this.progressItemList=[]},getTimeList(){let t=new Date(Date.parse(this.startTime.replace(/-/g,"/"))),s=new Date(Date.parse(this.endTime.replace(/-/g,"/"))),r=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeType;this.dayList=new Date(this.startTime).DateDiff("d",new Date(this.endTime));let n=null;switch(this.progressItemList=[],r){case"year":{if(s.getFullYear()>=t.getFullYear()){this.progressItemList.push({tag:this.startTime,left:0}),n=new Date(this.startTime).DateDiff("d",new Date((t.getFullYear()+1).toString()));for(let o=t.getFullYear()+1;o<=s.getFullYear();o++)this.progressItemList.push({tag:o,left:(n+365*(o-(t.getFullYear()+1)))/this.dayList})}this.progressItemList.push({tag:this.endTime,left:1});break}case"month":{this.progressItemList.push({tag:this.startTime,left:0});let o=new Date(this.startTime).DateAdd("m",1);if(n=new Date(this.startTime).DateDiff("d",new Date(o.getFullYear()+"-"+(o.getMonth()+1)+"-01")),s.getFullYear()>t.getFullYear()){for(let a=t.getMonth()+2;a<=12;a++){let g=(new Date(t.getFullYear()+"-"+a).getTime()-new Date(t.getFullYear()+"-"+(t.getMonth()+1)).getTime())/864e5;a-(t.getMonth()+2)>0?this.progressItemList.push({tag:t.getFullYear()+"-"+a,left:(n+g-30)/this.dayList}):this.progressItemList.push({tag:t.getFullYear()+"-"+a,left:n/this.dayList})}for(let a=t.getFullYear()+1;a<s.getFullYear();a++)for(let g=1;g<=12;g++){let h=(new Date(t.getFullYear()+"-12").getTime()-new Date(t.getFullYear()+"-"+(t.getMonth()+1)).getTime())/864e5,l=(new Date(a+"-1").getTime()-new Date(t.getFullYear()+1+"-1").getTime())/(1e3*60*60*24),p=null;g==1?p=(new Date(a+"-"+g).getTime()-new Date(a-1+"-12").getTime())/(1e3*60*60*24):p=(new Date(a+"-"+g).getTime()-new Date(a+"-"+(g-1)).getTime())/(1e3*60*60*24),this.progressItemList.push({tag:a+"-"+g,left:(n+h+p+l)/this.dayList})}for(let a=1;a<s.getMonth()+1;a++){let g=(new Date(t.getFullYear()+"-12").getTime()-new Date(t.getFullYear()+"-"+(t.getMonth()+1)).getTime())/864e5,h=(new Date(s.getFullYear()+"-1").getTime()-new Date(t.getFullYear()+1+"-1").getTime())/(1e3*60*60*24),l=null;a==1?l=0:l=(new Date(s.getFullYear()+"-"+a).getTime()-new Date(s.getFullYear()+"-1").getTime())/(1e3*60*60*24),this.progressItemList.push({tag:s.getFullYear()+"-"+a,left:(n+g+l+h)/this.dayList})}}else if(s.getFullYear()==t.getFullYear())for(let a=t.getMonth()+2;a<=s.getMonth()+1;a++)this.progressItemList.push({tag:t.getFullYear()+"-"+a,left:(n+30*(a-(t.getMonth()+2)))/this.dayList});this.progressItemList.push({tag:this.endTime,left:1});break}case"day":{let o=JSON.parse(JSON.stringify(this.startTime)),a=JSON.parse(JSON.stringify(this.endTime)),g=0;for(n=new Date(this.startTime).DateDiff("d",new Date(this.endTime));o<=a;){this.progressItemList[g]={tag:o,left:g/this.dayList};let l=new Date(o).getTime()+24*60*60*1e3,p=new Date(l).getFullYear()+"-",b=new Date(l).getMonth()+1<10?"0"+(new Date(l).getMonth()+1)+"-":new Date(l).getMonth()+1+"-",H=new Date(l).getDate()<10?"0"+new Date(l).getDate():new Date(l).getDate();o=p+b+H,g++}this.progressItemList.push({tag:this.endTime,left:1});break}}this.getTransFormStyle().left&&(this.timmer&&window.clearInterval(this.timmer),this.widgetInfo.config.global.autoPlay?(this.left=parseFloat(this.getTransFormStyle().left),this.run(this.widgetInfo)):window.clearInterval(this.timmer))},getTagStyle(t){let s=this.widgetInfo.config.labelStyle;return{color:s.color,fontSize:s.fontSize+"px",left:s.left?this.barWidth*t+s.left+"px":this.barWidth*t+"px",top:s.top+"px"}},getBtnStyle(){let t=this.widgetInfo.config.buttonStyle;return{display:t.show?"block":"none",width:t.width?t.width+"px":"0",height:t.height?t.height+"px":"0",left:t.left?t.left+"px":"0",top:t.top?t.top+"px":"0",color:t.color,fontSize:t.fontSize}},getTransFormStyle(){let t=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeInterval;switch(this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeIntervalType){case"year":this.size=t*365,this.currentTime=new Date(this.startTime).DateAdd("y",parseInt(t));break;case"month":this.size=t*30,this.currentTime=new Date(this.startTime).DateAdd("m",parseInt(t));break;case"day":this.size=t,this.currentTime=new Date(this.startTime).DateAdd("d",parseInt(t));break}this.widthItem=Math.round(this.size*100/this.dayList)/100,this.progressWidth=parseInt(this.widthItem*this.barWidth);let r=this.widgetInfo.config.activeStyle,n=this.widgetInfo.config.inactiveStyle.pointer,o={backgroundColor:r.lineStyle.color,width:n.size?this.progressWidth+n.size/2+"px":this.progressWidth+"px",height:r.lineStyle.height+"px",position:"absolute",left:"0px"};return this.progressItemList.length==0&&(o.width="0px"),o},run(t){this.timmer=window.setInterval(()=>{this.runFunc(t,this.currentTime)},(t.config.global.interval+t.config.global.delay)*1e3)},runFunc(t,s){let r=this.$refs.progressTransform,n=new Date(s).DateDiff("d",new Date(this.endTime)),o=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeInterval,a=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeIntervalType;if((a=="year"&&n==366||a=="month"&&n==31)&&(n-=1),n>=this.size){parseInt(r.style.left)==0?(this.left=this.widthItem*this.barWidth,r.style.left=this.left+"px"):(this.left+=this.widthItem*this.barWidth,r.style.left=this.left+"px");let g=Math.round(this.left/(this.widthItem*this.barWidth));switch(a){case"year":this.currentTime=new Date(this.startTime).DateAdd("y",(g+1)*o);break;case"month":this.currentTime=new Date(this.startTime).DateAdd("m",(g+1)*o);break;case"day":this.currentTime=new Date(this.startTime).DateAdd("d",(g+1)*o);break}r.style.transition="all "+t.config.global.interval+"s linear",this.onChange(this.currentTime)}else this.widgetInfo.config.global.loop?(this.intiCurrentTime(),this.left=0,r.style.left=this.left+"px",this.onChange(this.currentTime)):window.clearInterval(this.timmer)},getGolbalStyle(){let t=this.widgetInfo.config.global;return{marginLeft:t.left+"px",marginRight:t.right+"px",paddingTop:t.top+"px"}},getLineStyle(){let t=this.widgetInfo.config.inactiveStyle.lineStyle,s=this.widgetInfo.config.inactiveStyle.pointer,r=this.$refs.progressContainer.offsetWidth/this.progressItemList.length;return{backgroundColor:t.color,width:(this.$refs.progressContainer.offsetWidth+r)/this.progressItemList.length-s.size+"px",height:t.height+"px",borderRadius:t.borderRadius+"px"}},getPointStyle(t){let s=this.widgetInfo.config.inactiveStyle.pointer;return{backgroundColor:s.color,width:s.size+"px",height:s.size+"px",border:s.borderWidth+"px solid "+s.borderColor,left:(this.barWidth-s.size/2)*t+"px"}},initAction(t){this.actionReceive(t),this.reStart(t)},intiCurrentTime(){let t=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeInterval;switch(this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeIntervalType){case"year":this.currentTime=new Date(this.startTime).DateAdd("y",1*t);break;case"month":this.currentTime=new Date(this.startTime).DateAdd("m",1*t);break;case"day":this.currentTime=new Date(this.startTime).DateAdd("d",1*t);break}},reStart(t){let s=this;if(t.action.receive&&t.action.receive.reStart&&t.action.receive.reStart.enabled&&t.action.receive.reStart.restartList.length>0){let r=t.action.receive.reStart.restartList;this.$$lib__.each(r,n=>{let o=n[0][1]+"_"+n[0][0];n[0][1].indexOf("_")>-1&&(o=n[0][1]),m.Z.$on(o,()=>{window.clearInterval(s.timmer),s.intiCurrentTime(),s.$refs.progressTransform.style.left="0px",s.run(s.widgetInfo),this.onChange(this.currentTime),s.widgetInfo.attr.pause=!1})})}},getValueFormat(t){let s=this.widgetInfo.config.global.valueFormat,r=t.startTime,n=t.endTime,o=new Date(r).getFullYear(),a=new Date(n).getFullYear(),g=new Date(r).getMonth(),h=new Date(n).getMonth(),l=new Date(r).getDate(),p=new Date(n).getDate();switch(s){case"yyyy":t.startTime=o,t.endTime=a;break;case"yyyy-MM":t.startTime=o+"-"+(g+1),t.endTime=a+"-"+(h+1);break;case"yyyy-MM-dd":t.startTime=o+"-"+(g+1)+"-"+l,t.endTime=a+"-"+(h+1)+"-"+p;break;default:t.startTime=o+"-"+(g+1)+"-"+l,t.endTime=a+"-"+(h+1)+"-"+p;break}return t},onChange(t){let s={},r=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeInterval,n=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.timeIntervalType,o=new Date(t).getFullYear()+"-"+(new Date(t).getMonth()+1)+"-"+new Date(t).getDate();switch(n){case"year":s.start=new Date(t).getFullYear()-r+"-"+(new Date(t).getMonth()+1)+"-"+new Date(t).getDate();break;case"month":{let h=new Date(t).getFullYear(),l=new Date(t).getMonth()+1-r;l==0&&(l=12,h=h-1),s.start=h+"-"+l+"-"+new Date(t).getDate();break}case"day":{let h=new Date(t).getFullYear(),l=new Date(t).getMonth()+1,p=new Date(t).getDate()-r;p==0&&(p=new Date(t.getTime()-1e3*60*60*24).getDate(),l>1?l=l-1:l==1&&(l=12,h=h-1)),s.start=h+"-"+l+"-"+p;break}}s.end=o;let a=this,g=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(g,h=>{if(h.enabled&&h.code==a.$$global_editor.actionType.change.code){let l=a.$$global_editor.actionType.change.code+"_"+a.widgetInfo.id,p={startTime:s.start,endTime:s.end};if(h.paramsExtend&&h.paramsExtend.length>0){let b=[];a.widgetInfo.dataset[a.widgetInfo.dataset.type].source&&a.widgetInfo.dataset[a.widgetInfo.dataset.type].source.length>0&&(b=a.widgetInfo.dataset[a.widgetInfo.dataset.type].source[0]),this.getExtendParams(p,h.paramsExtend,b,a.widgetInfo.dataset[a.widgetInfo.dataset.type].dimensions)}if(h.script&&h.script.enabled){if(F.log("Execute script for "+h.name+" component to "+h.script.title+" component"),h.script.content==""){S.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",h.script.content),p=this.customScript_actionSend_clickParam(p)}p=this.getValueFormat(p),m.Z.$emit(l,p),h.postMessage&&this.doPostMessage(p),this.actionNameList.push(l)}})}},beforeDestroy(){window.clearInterval(this.timmer)}},Y=M,L=i(768141),C=(0,L.Z)(Y,f,u,!1,null,"37de4482",null),k=C.exports}}]);
