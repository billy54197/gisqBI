(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[5034],{178282:function(e,u,t){e.exports=function(n){var a={};function o(s){if(a[s])return a[s].exports;var r=a[s]={i:s,l:!1,exports:{}};return n[s].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=n,o.c=a,o.d=function(s,r,i){o.o(s,r)||Object.defineProperty(s,r,{enumerable:!0,get:i})},o.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,r){if(r&1&&(s=o(s)),r&8||r&4&&typeof s=="object"&&s&&s.__esModule)return s;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:s}),r&2&&typeof s!="string")for(var l in s)o.d(i,l,function(f){return s[f]}.bind(null,l));return i},o.n=function(s){var r=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(r,"a",r),r},o.o=function(s,r){return Object.prototype.hasOwnProperty.call(s,r)},o.p="/dist/",o(o.s=780)}({0:function(n,a){n.exports=t(342579)},1:function(n,a){n.exports=t(828866)},10:function(n,a){n.exports=t(42762)},13:function(n,a){n.exports=t(66273)},2:function(n,a,o){"use strict";o.d(a,"a",function(){return s});function s(r,i,l,f,m,I,b,T){var c=typeof r=="function"?r.options:r;i&&(c.render=i,c.staticRenderFns=l,c._compiled=!0),f&&(c.functional=!0),I&&(c._scopeId="data-v-"+I);var h;if(b?(h=function(w){w=w||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!w&&typeof __VUE_SSR_CONTEXT__<"u"&&(w=__VUE_SSR_CONTEXT__),m&&m.call(this,w),w&&w._registeredComponents&&w._registeredComponents.add(b)},c._ssrRegister=h):m&&(h=T?function(){m.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:m),h)if(c.functional){c._injectStyles=h;var P=c.render;c.render=function(A,N){return h.call(N),P(A,N)}}else{var D=c.beforeCreate;c.beforeCreate=D?[].concat(D,h):[h]}return{exports:r,options:c}}},28:function(n,a){n.exports=t(132726)},4:function(n,a){n.exports=t(555616)},50:function(n,a){n.exports=t(636583)},6:function(n,a){n.exports=t(783574)},60:function(n,a){n.exports=t(308421)},61:function(n,a){n.exports=t(419457)},7:function(n,a){n.exports=t(17249)},780:function(n,a,o){"use strict";o.r(a);var s=o(0),r=o.n(s),i=function(){var p=this,S=p.$createElement,C=p._self._c||S;return C("div",{directives:[{name:"show",rawName:"v-show",value:p.shouldShow,expression:"shouldShow"}],staticClass:"sh-copy-tool"},[C("div",{directives:[{name:"show",rawName:"v-show",value:p.isShow,expression:"isShow"}]},[p.$slots.default?C("span",{staticClass:"geomCopyTool",on:{click:p.startCopy}},[p._t("default")],2):C("general-button",{attrs:{position:p.position,"is-column":p.isColumn,"icon-class":p.iconClass?p.iconClass:"copy-tool","show-img":p.showImg,"show-label":p.showLabel,"theme-style":p.themeStyle,"drag-enable":p.dragEnable,title:p.title?p.title:"\u590D\u5236"},on:{click:p.startCopy}})],1)])},l=[];i._withStripped=!0;var f=o(6),m=o.n(f),I=o(7),b=o.n(I),T=o(50),c=o.n(T),h=o(9),P=o.n(h),D=o(10),w=o.n(D),A=o(1),N=o.n(A),W=o(13),y=o.n(W),$=o(4),g=function(){function p(S,C){P()(this,p),this.name="graphicCopy",this.map=C,this.subscribe=S,this.layerManager=C.layerManager,this.copyGraphic=[],this.bindEvt()}return w()(p,[{key:"startCopy",value:function(){var C=N()(this).getSelectFeatures();if(C&&C.length>0){this.copyGraphic=c()(C);var F=this.layerManager.getEditLayer(),H=F?F.metadata:null;this.copyiedLayer=JSON.parse(y()(H)),$.Message.success("\u56FE\u5F62\u590D\u5236\u6210\u529F,\u53EF\u7528\u7C98\u8D34\u7EC4\u4EF6\u7C98\u8D34")}else $.Message.success("\u8BF7\u9009\u62E9\u9700\u8981\u590D\u5236\u7684\u56FE\u5F62")}},{key:"bindEvt",value:function(){var C=this;this.subscribe.$on("paste-tool:getCopyFeatures",function(F){r()(this,C),F(this.copyGraphic,this.copyiedLayer)}.bind(this)),this.subscribe.$on("paste-tool:clearCopyFeatures",function(){r()(this,C),this.clearCopy()}.bind(this))}},{key:"clearCopy",value:function(){this.copyGraphic=null,this.copyiedLayer=null}}]),p}(),v=o(60),M=o.n(v),z=o(61),K=o.n(z),R=void 0,B={name:"ShCopyTool",components:{GeneralButton:M.a},mixins:[m.a,b.a,K.a],props:{position:{type:Object,default:function(){return r()(this,R),{type:"absolute",top:"1px",left:"350px"}}.bind(void 0)}},data:function(){return{shouldShow:!1}},watch:{currentView:{handler:function(S){this.shouldShow=S==="map"},immediate:!0}},mounted:function(){var S=this;this.$map&&setTimeout(function(){r()(this,S),this.begin()}.bind(this),0)},methods:{begin:function(){this.initCopy()},initCopy:function(){this.CopyTool=new g(this.subscribe,this.$map)},execute:function(){this.CopyTool?this.CopyTool.startCopy():(this.CopyTool=new g(this.subscribe,this.$map),this.CopyTool.startCopy())},startCopy:function(){this.execute()},clearCopy:function(){this.CopyTool&&this.CopyTool.clearCopy()}}},j=B,x=o(2),G=Object(x.a)(j,i,l,!1,null,null,null),L=G.exports,O=o(28),V=o.n(O),d=void 0,E=V()(L,{transform:function(S){r()(this,d);var C=S.show,F=S.label,H=S.position;return{isShow:C,title:F,position:H}}.bind(void 0)});E.install=function(p){p.component(E.name,E)};var U=a.default=E},9:function(n,a){n.exports=t(122777)}})},419457:function(e,u,t){"use strict";var n=t(419534);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var a=n(t(452909)),o=n(t(342579)),s=void 0,r={props:{isShow:{type:Boolean,default:!0},position:{type:Object,default:function(){return(0,o.default)(this,s),{type:"absolute",top:"1px",left:"1px"}}.bind(void 0)},isColumn:{type:Boolean,default:!1},title:{type:String},iconClass:{type:String},dragEnable:{type:Boolean,default:!1},showImg:{type:Boolean,default:!0},showLabel:{type:Boolean,default:!0},themeStyle:{type:Object}},data:function(){return{theme:"light"}},watch:{currentView:{handler:function(f){f==="earth"?this.theme="dark":this.theme="light"},immediate:!0}},mounted:function(){var f,m=this;this.$_mixin_generalButton=(0,a.default)(f=this.$children).call(f,function(I){return(0,o.default)(this,m),I.$options.name==="ShGeneralButton"}.bind(this))},methods:{getPosition:function(){var f;return(f=this.$_mixin_generalButton)===null||f===void 0?void 0:f.getPosition()}}},i=r;u.default=i},132726:function(e,u,t){"use strict";var n=t(149500),a=t(985208),o=t(659791),s=t(22466),r=t(183393),i=t(105077),l=t(419534);Object.defineProperty(u,"__esModule",{value:!0}),u.default=W;var f=l(t(611323)),m=l(t(543389)),I=l(t(934749)),b=l(t(342579)),T=l(t(985208)),c=l(t(828866)),h=l(t(22466)),P=l(t(581806)),D=l(t(705146));function w(y,$){var g=a(y);if(o){var v=o(y);$&&(v=s(v).call(v,function(M){return r(y,M).enumerable})),g.push.apply(g,v)}return g}function A(y){for(var $=1;$<arguments.length;$++){var g=arguments[$]!=null?arguments[$]:{};$%2?w(Object(g),!0).forEach(function(v){(0,m.default)(y,v,g[v])}):i?Object.defineProperties(y,i(g)):w(Object(g)).forEach(function(v){Object.defineProperty(y,v,r(g,v))})}return y}function N(y,$){for(var g=!1,v=y,M=function(){var K=this;v=v.$parent;var R=v.$refs;R&&(0,T.default)(R).forEach(function(B){(0,b.default)(this,K),R[B]===y&&(R[B]=$,g=!0)}.bind(this))};v.$parent&&!g;)M()}function W(y){var $,g,v=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z=M.configName,K=M.componentName,R=M.transform,B=(0,c.default)($=(0,h.default)(g=y.mixins||[]).call(g,function(j){return(0,b.default)(this,v),!!j.props}.bind(this))).call($,function(j){return(0,b.default)(this,v),{props:j.props}}.bind(this));return{name:K||y.name,props:y.props,mixins:B,inject:{reactiveConfigInstance:{default:function(){var x=this;return function(){return(0,b.default)(this,x),null}.bind(this)}}},data:function(){return this.$configInfo={},{ready:!1}},computed:{configInstance:function(){return this.reactiveConfigInstance()}},mounted:function(){this.initConfig()},methods:{initConfig:function(){var x=this;return(0,I.default)(f.default.mark(function G(){var L,O;return f.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!x.configInstance){d.next=17;break}return L=x.$options.name.replace("Sh",""),O={},d.prev=3,d.next=6,x.configInstance.getWidgetInfoByTag(z||L);case 6:O=d.sent,d.next=13;break;case 9:return d.prev=9,d.t0=d.catch(3),n.error(d.t0),d.abrupt("return");case 13:if(O.stat){d.next=15;break}return d.abrupt("return");case 15:typeof R=="function"&&O.data?O=R(O.data,x.configInstance.widgetInfo.mapConfig,{url:x.configInstance.url.replace("/role/getResources",""),schemeId:x.configInstance.schemeId}):O=O.data,x.$configInfo=A({},O);case 17:x.ready=!0;case 18:case"end":return d.stop()}},G,null,[[3,9]])}))()},forwordRef:function(){var x;N(this._self,this._self.$children[0]),(x=this._self.$children[0])===null||x===void 0||x.$emit("mounted",this._self.$children[0])}},render:function(x){var G,L=this,O;if((0,P.default)(G=(0,T.default)(this.$listeners)).call(G,"hook:mounted")){var V;O=A(A({},this.$listeners),{},{"hook:mounted":(0,D.default)(V=[this.forwordRef]).call(V,this.$listeners["hook:mounted"])})}else O=A(A({},this.$listeners),{},{"hook:mounted":this.forwordRef});var d=this.$options.propsData;return(0,T.default)(d).forEach(function(E){(0,b.default)(this,L),d[E]===void 0&&delete d[E]}.bind(this)),this.ready?x(y,{on:O,scopedSlots:this.$scopedSlots,props:A(A({},this.$configInfo),d),attrs:this.$attrs},this.$slots.default):null}}}},805034:function(e,u,t){"use strict";t.r(u),t.d(u,{default:function(){return T}});var n=function(){var h=this,P=h._self._c;return P("div",{directives:[{name:"show",rawName:"v-show",value:h.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],ref:"gisBase",staticClass:"my-gisBase",style:{width:h.widgetInfo.attr.w+"px",height:h.widgetInfo.attr.hh+"px"}},[P("CopyTool",h._b({style:{width:h.widgetInfo.attr.w+"px",height:h.widgetInfo.attr.hh+"px"},attrs:{position:h.btnPosition,"theme-style":h.themeConfig}},"CopyTool",h.widgetInfo.config.btnConfig,!1))],1)},a=[],o=t(178282),s=t.n(o),r=t(386892),i=t(445061),l=t(950681),f={name:"GisCopy",components:{CopyTool:s()},mixins:[r.D,i.u,l.Z],props:["widgetInfo"],data(){return{map:null,width:"16px",height:"16px",fontSize:"12px;"}},mounted(){this.initAction(this.widgetInfo)},methods:{reLoadInfo(c){this.btnAttr=c.attr},initAction(c){this.actionReceive(c)}}},m=f,I=t(768141),b=(0,I.Z)(m,n,a,!1,null,"acf2b132",null),T=b.exports},105077:function(e,u,t){e.exports=t(272873)},659791:function(e,u,t){e.exports=t(169127)},780876:function(e){function u(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,o=new Array(n);a<n;a++)o[a]=t[a];return o}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},396159:function(e,u,t){var n=t(847578),a=t(780876);function o(s){if(n(s))return a(s)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},122777:function(e){function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},42762:function(e,u,t){var n=t(857448),a=t(168871);function o(r,i){for(var l=0;l<i.length;l++){var f=i[l];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),n(r,a(f.key),f)}}function s(r,i,l){return i&&o(r.prototype,i),l&&o(r,l),n(r,"prototype",{writable:!1}),r}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},543389:function(e,u,t){var n=t(857448),a=t(168871);function o(s,r,i){return r=a(r),r in s?n(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,s}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},554581:function(e,u,t){var n=t(494464),a=t(922780),o=t(735842);function s(r){if(typeof n<"u"&&a(r)!=null||r["@@iterator"]!=null)return o(r)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},412260:function(e){function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},636583:function(e,u,t){var n=t(396159),a=t(554581),o=t(877297),s=t(412260);function r(i){return n(i)||a(i)||o(i)||s()}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},877297:function(e,u,t){var n=t(797968),a=t(735842),o=t(780876);function s(r,i){var l;if(r){if(typeof r=="string")return o(r,i);var f=n(l=Object.prototype.toString.call(r)).call(l,8,-1);if(f==="Object"&&r.constructor&&(f=r.constructor.name),f==="Map"||f==="Set")return a(r);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return o(r,i)}}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},575833:function(e,u,t){"use strict";var n=t(505567);e.exports=n},314963:function(e,u,t){"use strict";var n=t(976694);e.exports=n},215748:function(e,u,t){"use strict";t(341809);var n=t(594388);e.exports=n.Array.isArray},259631:function(e,u,t){"use strict";t(125902);var n=t(594388);e.exports=n.Object.getOwnPropertyDescriptors},481640:function(e,u,t){"use strict";t(46932);var n=t(594388);e.exports=n.Object.getOwnPropertySymbols},735842:function(e,u,t){"use strict";e.exports=t(316276)},847578:function(e,u,t){"use strict";e.exports=t(20486)},316276:function(e,u,t){"use strict";var n=t(575833);e.exports=n},20486:function(e,u,t){"use strict";var n=t(314963);e.exports=n},341809:function(e,u,t){"use strict";var n=t(190434),a=t(267170);n({target:"Array",stat:!0},{isArray:a})},125902:function(e,u,t){"use strict";var n=t(190434),a=t(714451),o=t(883419),s=t(204036),r=t(168428),i=t(259063);n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(f){for(var m=s(f),I=r.f,b=o(m),T={},c=0,h,P;b.length>c;)P=I(m,h=b[c++]),P!==void 0&&i(T,h,P);return T}})},976694:function(e,u,t){"use strict";var n=t(215748);e.exports=n},272873:function(e,u,t){"use strict";var n=t(259631);e.exports=n},169127:function(e,u,t){"use strict";var n=t(481640);e.exports=n}}]);
