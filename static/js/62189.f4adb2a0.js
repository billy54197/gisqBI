"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[62189],{56279:function(N,b,e){e.d(b,{P:function(){return o}});var c=e(386892),d=e(149500);const o={mixins:[c.D],created(){},methods:{lifecycleBeforeChartsLoad(x){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&d.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),d.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let S=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[x]);if(S)return S}return x},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&d.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),d.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(N,b,e){e.d(b,{X:function(){return c},b:function(){return d}});let c={versions:function(){var o=navigator.userAgent;return{trident:o.indexOf("Trident")>-1,presto:o.indexOf("Presto")>-1,webKit:o.indexOf("AppleWebKit")>-1,gecko:o.indexOf("Gecko")>-1&&o.indexOf("KHTML")==-1,mobile:!!o.match(/AppleWebKit.*Mobile.*/),ios:!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:o.indexOf("Android")>-1,iPhone:o.indexOf("iPhone")>-1,iPad:o.indexOf("iPad")>-1,webApp:o.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},d;c.versions.mobile||c.versions.ios||c.versions.android||c.versions.iPhone||c.versions.iPad?d=!1:d=!0},162189:function(N,b,e){e.r(b),e.d(b,{default:function(){return _}});var c=function(){var i=this,n=i._self._c;return n("div",{style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"}},[n("hide-button",{attrs:{attr:i.widgetInfo.attr}}),n("div",{ref:"candlestickSimple",style:{width:i.widgetInfo.attr.w+"px",height:i.widgetInfo.attr.hh+"px"}})],1)},d=[],o=e(844513),x=e(927966),L=e(56279),S=e(445061),J=e(126711),A=e(99349),w=e(167616),s=e(555616),v=e(275770),P=e(67157),I=e(150813);const F={mixins:[P.c],data(){return{config_extend:{},filter_config:{title:JSON.parse(JSON.stringify(I.Z.charts.title)),legend:JSON.parse(JSON.stringify(I.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(I.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(I.Z.charts.toolbox)),xAxis:JSON.parse(JSON.stringify(I.Z.charts.xAxis)),yAxis:JSON.parse(JSON.stringify(I.Z.charts.yAxis)),color:["rgba(45,95,115, 1)"],series:[{itemStyle:{color:"#FFC978",borderColor:"#FFB23F",color0:"#5DDEDE",borderColor0:"#18CFCF"}}],lineSeries:[{lineStyle:{color:"rgba(255, 122, 92, 0.4)"},itemStyle:{color:"#FF7A5C"}}]}}},methods:{filterPredefineColoursSchemeConfig(t,i){this.getNewConfigWithArrary(t,i,this.filter_config)}}};var z=e(149500);const E=e(954255);var T={name:"CandlestickSimple",components:{HideButton:o.Z},mixins:[A.P,L.P,S.u,J.H,w.baseConfig,F],props:["widgetInfo"],data(){return{}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.echarts=E.init(this.$refs.candlestickSimple,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},destroyed(){this.echarts.dispose()},methods:{loadInfo(t){let i=t.dataset[t.dataset.type].source,n=t.dataset[t.dataset.type].dimensionsAlias,a=t.dataset[t.dataset.type].encode,l=this.getDataList(a,n,i),$=JSON.parse(JSON.stringify(t.config.title)),O=JSON.parse(JSON.stringify(t.config.legend)),h=this.getTooltip(t.config.tooltip),y=JSON.parse(JSON.stringify(t.config.toolbox)),g=JSON.parse(JSON.stringify(t.config.grid)),p=JSON.parse(JSON.stringify(t.config.series)),f=JSON.parse(JSON.stringify(t.config.lineSeries)),C=JSON.parse(JSON.stringify(t.config.xAxis)),r=this.getyAxis(t.config.yAxis);C.data=l.xList,r.axisTick.lineStyle.color=this.getColorInfo(r.axisTick.lineStyle.colorInfo),r.axisLine.lineStyle.color=this.getColorInfo(r.axisLine.lineStyle.colorInfo),O.data=this.getLegendData(p,f);let u={legend:O,tooltip:h,toolbox:y,title:$,dataZoom:[{end:100,start:0,type:"inside"}],grid:{left:g.left+"%",right:g.right+"%",top:g.top+"%",bottom:g.bottom+"%"},series:[],xAxis:C,yAxis:r};this.$$lib__.each(l.list,(H,m)=>{u.series.push({type:"candlestick",name:p[m].name,data:H,itemStyle:p[m].itemStyle,markLine:p[m].markLine})}),this.$$lib__.each(l.lineList,(H,m)=>{u.series.push({type:"line",name:f[m].name,symbol:f[m].symbol,symbolSize:f[m].symbolSize,smooth:f[m].smooth,data:H,itemStyle:f[m].itemStyle,lineStyle:f[m].lineStyle})}),this.getAnimation(u,t),this.setOption(u),this.setAnimationLoop(t,()=>{this.setOption(u,t)})},setOption(t){this.echarts.getOption()&&this.echarts.clear(),this.echarts.setOption(this.lifecycleBeforeChartsLoad(t),{notMerge:!0})},getLegendData(t,i){let n=[];return this.$$lib__.each(t,a=>{a.name&&n.push(a.name)}),this.$$lib__.each(i,a=>{a.name&&n.push(a.name)}),n},reLoadInfo(t){t&&(this.$refs.candlestickSimple.style.width=t.attr.w+"px",this.$refs.candlestickSimple.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},getDataList(t,i,n){let a=[],l=[],$=[],O=null;return this.$$lib__.each(i,(h,y)=>{h.name==t.x&&(O=y)}),this.$$lib__.each(n,h=>{a.push(h[O])}),this.$$lib__.each(t.y,h=>{let y=null,g=null,p=null,f=null,C=[];this.$$lib__.each(i,(r,u)=>{r.name==h.open&&(y=u),r.name==h.close&&(g=u),r.name==h.lowest&&(p=u),r.name==h.highest&&(f=u)}),this.$$lib__.each(n,r=>{C.push([r[y],r[g],r[p],r[f]])}),l.push(C)}),this.$$lib__.each(t.lines,h=>{let y=null,g=[];this.$$lib__.each(i,(p,f)=>{p.name==h.value&&(y=f)}),this.$$lib__.each(n,p=>{g.push(p[y])}),$.push(g)}),{list:l,lineList:$,xList:a}},initAction(t){this.actionSendout(t),this.actionReceive(t)},actionSendout(t){let i=this;this.$$lib__.each(t.action.sendOut.actionList,n=>{if(n.enabled){let a=n.code+"_"+t.id;if(n.paramsExtend&&n.paramsExtend.length>0){let l={};this.getParamsExtend(l,n.paramsExtend,t)}n.code==v.default.click.code&&i.onClick(a,n)}})},onClick(t,i){let n=this;n.echarts.on("click",a=>{let l={};if(l.x=a.name,l.y=a.data.splice(1,4),i.script&&i.script.enabled){if(z.log("Execute script for "+n.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){s.Message.warning({message:i.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",i.script.content),l=this.customScript(l)}x.Z.$emit(t,l),i.postMessage&&n.doPostMessage(l),n.actionNameList.push(t)})}}},Z=T,k=e(768141),D=(0,k.Z)(Z,c,d,!1,null,"2ec87fa4",null),_=D.exports},844513:function(N,b,e){e.d(b,{Z:function(){return A}});var c=function(){var s=this,v=s._self._c;return s.attr.buttonHide?v("div",{style:{position:"absolute",right:s.attr.buttonHideRight+"px",top:s.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(P){return s.onHide()}}},[s.openTooltip?v("el-tooltip",{attrs:{"open-delay":1e3,content:s.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[v("el-button",{class:s.attr.buttonHideIconClass&&s.attr.buttonHideIconClass!=""?s.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:s.attr.buttonHideColor,fontSize:s.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):v("el-button",{class:s.attr.buttonHideIconClass&&s.attr.buttonHideIconClass!=""?s.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:s.attr.buttonHideColor,fontSize:s.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):s._e()},d=[],o=e(752246),x={props:["attr"],name:"hide-button",data(){return{isPc:o.b}},computed:{openTooltip:function(){let w=!1,s=this.attr.buttonHideTooltipContent;return o.b&&s&&s!=null&&s.trim()!=""&&(w=!0),w}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},L=x,S=e(768141),J=(0,S.Z)(L,c,d,!1,null,"bf399b9a",null),A=J.exports}}]);
