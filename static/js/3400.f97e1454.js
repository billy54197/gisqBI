"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[3400],{23400:function(h,s,i){i.d(s,{j:function(){return u}});var n=i(48836),a=i(21300),d=i(27966);const u={data(){return{prefix:{widget:"widget_"},widget_layer_mouse_over:[]}},created(){},watch:{currentWidget:{immediate:!0,handler(r){if(!(!r||!r.id))if(this.getWidgets[r.id].parentId&&this.getWidgets[this.getWidgets[r.id].parentId].typeName==="mobile-container-list"){if(this.$$global_editor.dataSourcTypeList3){if(this.$$global_editor.dataSourcTypeList3.findIndex(t=>t.value==="extend")>-1)return;this.$$global_editor.dataSourcTypeList3.push({value:"extend",label:"\u7EE7\u627F"})}}else this.$$global_editor.dataSourcTypeList3=this.$$global_editor.dataSourcTypeList3.filter(e=>e.value!=="extend")}}},computed:{...(0,n.Se)(["getWidgets","getCanvasSetting"]),lockX(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedW},lockY(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedH}},mounted(){d.Z.$on("onWidgetLayerMouseOver",r=>{r!=null&&(r.type=="push"?this.widget_layer_mouse_over.push(r.layerId):r.type=="pop"&&(this.widget_layer_mouse_over=this.$$lib__.without(this.widget_layer_mouse_over,r.layerId)))}),d.Z.$on("autoScrollIntoViewBoardArea",r=>{this.autoScrollIntoViewBoardArea(r)})},methods:{...(0,n.nv)(["updateCurrentWidget"]),isParent(r,e,t){let o=t.find(b=>b.id===r);if(!o.parentId)return!1;if(o.parentId===e)return!0;let l=t.find(b=>b.id===o.parentId);return this.isParent(l.id,e,t)},fit(r,e){if(!this.isView||!/^mobile/.test(this.getCanvasSetting.transformType))return r+"px";let t=this.getCanvasSetting.width/10,o=this.getCanvasSetting.height/window.innerHeight,l="";switch(this.getCanvasSetting.transformType){case"mobileAutoWidth":e?l=r+"px":l=r/t+"rem";break;case"mobileAutoBoth":l=r/t+"rem";break;default:e?l=r/o+"px":l=r/t+"rem"}return l},getConfigData(){this.setSeriesList(),this.updateCurrentWidget(JSON.parse(JSON.stringify(this.currentWidget)))},getBoardConfigData(){this.updateCurrentWidget(JSON.parse(JSON.stringify(this.canvasSetting)))},setSeriesList(){},autoScrollIntoViewBoardArea(r){let e=this.$refs[this.prefix.widget+r];e&&e[0]&&e[0].$el.scrollIntoView()},getGradientColor(r){let e={};return r.type==this.$$global_editor.colorType.pureColor.code?e.backgroundColor=r.pureColor:r.type==this.$$global_editor.colorType.gradation.code&&(e.backgroundImage="linear-gradient("+r.position+", "+r.startColor+","+r.endColor+")"),e},getColumnName(r,e){let t=this.$$lib__.find(e,o=>o.name==r);return t?t&&t.alias&&t.alias!=""?t.alias:t.name:""},getBindStyle(r){let e={};return r.border.hide!=!0&&(r.border.type==!1?(e.borderTopWidth=r.border.widthT+"px",e.borderRightWidth=r.border.widthR+"px",e.borderBottomWidth=r.border.widthB+"px",e.borderLeftWidth=r.border.widthL+"px",e.borderTopStyle=r.border.styleT,e.borderRightStyle=r.border.styleR,e.borderBottomStyle=r.border.styleB,e.borderLeftStyle=r.border.styleL,e.borderTopColor=r.border.colorT,e.borderRightColor=r.border.colorR,e.borderBottomColor=r.border.colorB,e.borderLeftColor=r.border.colorL,e.borderTopLeftRadius=r.border.radiusTL+"px",e.borderTopRightRadius=r.border.radiusTR+"px",e.borderBottomLeftRadius=r.border.radiusBL+"px",e.borderBottomRightRadius=r.border.radiusBR+"px"):r.border.type==!0&&(e.borderStyle=r.border.borderStyle,e.borderTopWidth=r.border.breadthT+"px",e.borderRightWidth=r.border.breadthR+"px",e.borderBottomWidth=r.border.breadthB+"px",e.borderLeftWidth=r.border.breadthL+"px",e.borderImageSource=this.getImageUrl(r.border.borderImage),e.borderImageSlice=r.border.cutT+" "+r.border.cutR+" "+r.border.cutB+" "+r.border.cutL,e.borderImageRepeat=r.border.repeat)),e},getdraggableHW(r){let e={h:r.attr.h,w:r.attr.widgetW?r.attr.widgetW:r.attr.w};return r.border.hide!=!0&&(r.border.type==!1?(r.border.widthT&&r.border.styleT&&r.border.styleT!=="none"&&(e.h=e.h+r.border.widthT),r.border.widthB&&r.border.styleB&&r.border.styleB!=="none"&&(e.h=e.h+r.border.widthB),r.border.widthR&&r.border.styleR&&r.border.styleR!=="none"&&(e.w=e.w+r.border.widthR),r.border.widthL&&r.border.styleL&&r.border.styleL!=="none"&&(e.w=e.w+r.border.widthL)):r.border.type==!0&&(r.border.breadthT&&r.border.borderStyle&&r.border.borderStyle!=="none"&&(e.h=e.h+r.border.breadthT),r.border.breadthB&&r.border.borderStyle&&r.border.borderStyle!=="none"&&(e.h=e.h+r.border.breadthB),r.border.breadthR&&r.border.borderStyle&&r.border.borderStyle!=="none"&&(e.w=e.w+r.border.breadthR),r.border.breadthL&&r.border.borderStyle&&r.border.borderStyle!=="none"&&(e.w=e.w+r.border.breadthL))),e},getDraggableStyle(r){let e={position:"absolute"};if(this.getSelectMultiple){let t=JSON.parse(JSON.stringify(this.getMultipleWidget));for(let o in t)if((t[o].parentId==null||t[o].parentId!=r.id)&&(e.pointerEvents="none",r.id===o)){e.backgroundColor="rgba(236, 240, 241, 1)",e.filter="Alpha(Opacity=50)";break}}else!r.isContainer&&!r.attr.pointerEvents&&(e.pointerEvents="none",r.id===this.getCurrentWidget.id&&(e.backgroundColor="rgba(236, 240, 241, 1)",e.filter="Alpha(Opacity=50)"));if(this.getKeydown.ctrlKey){let t=JSON.parse(JSON.stringify(this.getMultipleWidget));for(let o in t)if((t[o].parentId==null||t[o].parentId!=r.id)&&(e.pointerEvents="none",r.id===o)){e.backgroundColor="rgba(236, 240, 241, 1)",e.filter="Alpha(Opacity=50)";break}}if(typeof r.attr.opacity=="number"&&(e.opacity=r.attr.opacity),r.attr.backgroundColor&&(e.backgroundColor=r.attr.backgroundColor),r.attr.backgroundImage&&(e.backgroundImage=this.getImageUrl(r.attr.backgroundImage)),r.attr.backgroundSize&&(r.attr.backgroundSize=="contain-no-repeat"?(e.backgroundPosition="top "+r.attr.align,e.backgroundSize="contain",e.backgroundRepeat="no-repeat"):e.backgroundSize=r.attr.backgroundSize),e.overflow=r.border.overflowShow?"hidden":"visible",r.border.hide!=!0){if(r.border.hShadow||r.border.vShadow){let t=r.border.blurColor?r.border.blurColor:"transparent";e.boxShadow=(r.border.hShadow||0)+"px "+(r.border.vShadow||0)+"px "+(r.border.blur||0)+"px "+t||"rgba(0,0,0,0)"}r.border.type==!1?(e.borderTopWidth=r.border.widthT+"px",e.borderRightWidth=r.border.widthR+"px",e.borderBottomWidth=r.border.widthB+"px",e.borderLeftWidth=r.border.widthL+"px",e.borderTopStyle=r.border.styleT,e.borderRightStyle=r.border.styleR,e.borderBottomStyle=r.border.styleB,e.borderLeftStyle=r.border.styleL,e.borderTopColor=r.border.colorT,e.borderRightColor=r.border.colorR,e.borderBottomColor=r.border.colorB,e.borderLeftColor=r.border.colorL,e.borderTopLeftRadius=r.border.radiusTL+"px",e.borderTopRightRadius=r.border.radiusTR+"px",e.borderBottomLeftRadius=r.border.radiusBL+"px",e.borderBottomRightRadius=r.border.radiusBR+"px"):r.border.type==!0&&(e.borderStyle=r.border.borderStyle,e.borderTopWidth=r.border.breadthT+"px",e.borderRightWidth=r.border.breadthR+"px",e.borderBottomWidth=r.border.breadthB+"px",e.borderLeftWidth=r.border.breadthL+"px",e.borderImageSource=this.getImageUrl(r.border.borderImage),e.borderImageSlice=r.border.cutT+" "+r.border.cutR+" "+r.border.cutB+" "+r.border.cutL,e.borderImageRepeat=r.border.repeat)}return e},getDraggableMouseOver(r){let e={width:this.getdraggableHW(r).w+"px",height:this.getdraggableHW(r).h+"px",zIndex:1e3,position:"absolute",left:"0px",top:"0px",display:"none",backgroundColor:"rgba(115, 170, 229, .5)"};return this.$$lib__.contains(this.widget_layer_mouse_over,r.id)==!0?(e.display="block",e.border="1px solid #09f"):(e.display="none",e.border="none"),e},getTitleStyle(r){let e={display:r.title.hide==!0?"none":"",height:r.title.h+"px",opacity:r.title.opacity,backgroundColor:r.title.backgroundColor,backgroundImage:this.getImageUrl(r.title.backgroundImage),backgroundSize:r.title.backgroundSize,fontSize:r.title.label.fontSize+"px",color:r.title.label.color,fontWeight:r.title.label.fontWeight,fontFamily:r.title.label.fontFamily,fontStyle:r.title.label.fontStyle,textDecoration:r.title.label.textDecoration,textAlign:r.title.label.horizontalAlignment};return r.title.border.hide!=!0&&(e.borderBottomWidth=r.title.border.widthB+"px",e.borderBottomStyle=r.title.border.styleB,e.borderBottomColor=r.title.border.colorB?r.title.border.colorB:"transparent",e.borderTopLeftRadius=r.title.border.radiusTL?r.title.border.radiusTL+"px":"0px",e.borderTopRightRadius=r.title.border.radiusTR?r.title.border.radiusTR+"px":"0px",e.borderBottomLeftRadius=r.title.border.radiusBL?r.title.border.radiusBL+"px":"0px",e.borderBottomRightRadius=r.title.border.radiusBR?r.title.border.radiusBR+"px":"0px"),r.title.link&&r.title.link.use&&r.title.link.use==!0?e.cursor="pointer":e.cursor="default",e},getWidgetTitleStyle(r){let e=r.title.position==="left"||r.title.position==="right"?"inline-block":"",t={display:r.title.hide==!0?"none":e,opacity:r.title.opacity,backgroundColor:r.title.backgroundColor,backgroundImage:this.getImageUrl(r.title.backgroundImage),backgroundSize:r.title.backgroundSize,boxSizing:"border-box",fontSize:r.title.label.fontSize+"px",color:r.title.label.color,fontWeight:r.title.label.fontWeight,fontFamily:r.title.label.fontFamily,fontStyle:r.title.label.fontStyle,textDecoration:r.title.label.textDecoration,textAlign:r.title.label.horizontalAlignment};return r.title.position==="left"||r.title.position==="right"?(t.width=r.title.h+"px",t.height=r.attr.h+"px"):(t.width="100%",t.height=r.title.h+"px"),r.title.border.hide!=!0&&(t.borderBottomWidth=r.title.border.widthB+"px",t.borderBottomStyle=r.title.border.styleB,t.borderBottomColor=r.title.border.colorB?r.title.border.colorB:"transparent",t.borderTopLeftRadius=r.title.border.radiusTL?r.title.border.radiusTL+"px":"0px",t.borderTopRightRadius=r.title.border.radiusTR?r.title.border.radiusTR+"px":"0px",t.borderBottomLeftRadius=r.title.border.radiusBL?r.title.border.radiusBL+"px":"0px",t.borderBottomRightRadius=r.title.border.radiusBR?r.title.border.radiusBR+"px":"0px"),r.title.link&&r.title.link.use&&r.title.link.use==!0?t.cursor="pointer":t.cursor="default",r.title.backgroundSize&&(r.title.backgroundSize=="contain-no-repeat"?(r.title.position=="top"||r.title.position=="bottom"?t.backgroundPosition=r.title.position+" "+r.title.align:t.backgroundPosition=r.title.vertical+" "+r.title.position,t.backgroundSize="contain",t.backgroundRepeat="no-repeat"):t.backgroundSize=r.title.backgroundSize),t},getTitleSpanStyle(r){let e=r.title.label,t={display:r.title.hide==!0?"none":""};if(e.textShadow){let o=e.textShadowBlur?e.textShadowBlur:0,l=e.textShadowColor?e.textShadowColor:"rgba(0,0,0,0)";t.textShadow=(e.hShadow?e.hShadow:0)+"px "+(e.vShadow?e.vShadow:0)+"px "+o+"px "+l||"rgba(0,0,0,0)"}return e.textStroke&&(t.webkitTextStrokeWidth=e.textStrokeWidth?e.textStrokeWidth+"px":0,t.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(t.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",t.webkitBackgroundClip="text",t.webkitTextFillColor="transparent"),e.radius&&(t.transform="rotate("+e.radius+"deg)",t.display="inline-block"),t},getInfoStyle(){return{}},getStyleBackGround(r){let e={};return r.backgroundColor&&(e.backgroundColor=r.backgroundColor),r.backgroundImage&&(e.backgroundImage=this.getImageUrl(r.backgroundImage)),r.backgroundSize&&(e.backgroundSize=r.backgroundSize),e},getStyleFontStyle(r,e){let t={};return r.fontSize&&(t.fontSize=a.getNewPxH(r.fontSize,e)+"px"),r.fontFamily&&(t.fontFamily=r.fontFamily),r.color&&(t.color=r.color),r.fontWeight&&(t.fontWeight=r.fontWeight),r.fontStyle&&(t.fontStyle=r.fontStyle),r.textDecoration&&(t.textDecoration=r.textDecoration),r.textAlign&&(t.textAlign=r.textAlign),t},getImageUrl(r){if(r&&r!="")return"url("+a.appendImageBaseURL(r)+")"},getZ(r){let e=r.attr.z;return this.getSelectMultiple?this.getMultipleWidget[r.id]!=null&&(e=999):this.getCurrentWidget&&this.getCurrentWidget.id==r.id&&(e=999),e},getImageFullUrl(r){if(r&&r!="")return a.appendImageBaseURL(r)},forceUpdate(){this.$forceUpdate()},radiusMaxChange(r,e,t){r.isShowMax&&!r.isShowMin&&Number(r.min)>=e?r.min=Number(e)-1:r.isShowMin&&Number(r.max)<=t?r.max=Number(t)+1:!r.isShowMin&&Number(r.max)<Number(r.min)&&(r.max=Number(r.min)+1),this.getConfigData()},radiusMinChange(r,e,t){r.isShowMin&&!r.isShowMax&&Number(r.max)<=t?r.max=Number(t)+1:r.isShowMax&&Number(r.min)>=e?r.min=Number(e)-1:!r.isShowMax&&Number(r.max)<Number(r.min)&&(r.min=Number(r.max)-1),this.getConfigData()},getHLockedDisabled(r){return r.parentId?this.getWidgets[r.parentId].attr.lockedH:!1},getWLockedDisabled(r){return r.parentId?this.getWidgets[r.parentId].attr.lockedW:!1}}}}}]);
