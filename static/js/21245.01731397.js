"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[21245],{926945:function(H,O,a){var k=a(945984),W=a(653183),M=a.n(W),T=a(149500);class I{constructor(C){this.options=C,this.url=void 0,this.config=void 0}loadConfig(){return this.options&&this.options.configUrl?(this.url=this.options.configUrl+"/Config?app=app&p=root",new Promise((C,N)=>{M().ajax({url:this.url,type:"GET",dataType:"json",success:b=>{b.toc.forEach(S=>{if(S.type&&S.type==="wms"){S.type="geoserver-wms";let m=S.url.lastIndexOf("/");S.url=S.url.substring(0,m)+"/wms",S.identifyField.length>0&&(S.identifyField[0].lyr=S.identifyField[0].lyr.substring(0,S.identifyField[0].lyr.lastIndexOf("/")),S.identifyField[0].lyr=S.identifyField[0].lyr.substring(0,S.identifyField[0].lyr.lastIndexOf("/")))}else if(S.type&&S.type==="wfs"){S.type="geoserver-wfs";let m=S.url.lastIndexOf("/");S.url=S.url.substring(0,m)+"/wfs",S.identifyField.length>0&&(S.identifyField[0].lyr=S.identifyField[0].lyr.substring(0,S.identifyField[0].lyr.lastIndexOf("/")),S.identifyField[0].lyr=S.identifyField[0].lyr.substring(0,S.identifyField[0].lyr.lastIndexOf("/")))}else S.type&&S.type==="wmts"?S.type="geoserver-wmts":S.type&&S.type==="tms"&&(S.type="geoserver-tms")}),this.config=b,C(b)},error:b=>{T.log(b),N(b)}})})):new Promise(C=>{this.config=k.Z,C(k.Z)})}getlayersConfig(){return this.config.toc}getConfig(){return this.config}}O.Z=I},458262:function(H,O,a){a.d(O,{Z:function(){return Bt}});var k=a(555616),W=a(224856),M=a(568433),T=a(130798),I=a(653183),G=a.n(I),C=a(568640),N=a(23230),b=a(682571),S=a(505689),m=a(816658),n=a(390583);let y=new C.Z({color:"rgba(0,255,0,0.4)"}),h=new N.Z({color:"#00FF00",width:1.25}),x=[new b.ZP({image:new S.Z({fill:y,stroke:h,radius:7}),fill:y,stroke:h})],w=new C.Z({color:[255,0,0,.3]}),P=new N.Z({color:[255,0,0],width:3}),R=new b.ZP({fill:w,stroke:P,image:new S.Z({fill:new C.Z({color:[255,0,0]}),radius:7})}),ie=null,se=null;function ue(d){return d==4326||d==3857||d==102100||d==102113||d==900913?"WGS84":ie.indexOf(Number(d))>-1?"CGCS2000":se.indexOf(Number(d))>-1?"xian80":"other"}function ne(d,e,t){return je(d,e,t)}let U=null;function Ne(d,e,t,r){return U=t||null,fe(d,e,U,r),U}const je=(d,e,t)=>{var r=d.getView();if(!r)return null;t=t||Be();const s=r.getCenter(),l=r.getProjection(),f=d.getView().getProjection().getUnits()=="degrees"?m.Wm.degrees:m.Wm.m;return e=e||r.getResolution(),(0,n.getPointResolution)(l,e,s,f)*t},fe=(d,e,t,r)=>{U||(U=d.getView().getResolution());let s=je(d,U,t),l=Math.abs(s-e);if(s>e&&(!r||r==="lessthen"))r="lessthen",U-=_e(l),fe(d,e,r);else if(e>s&&(!r||r==="morethen"))r="morethen",U+=_e(l),fe(d,e,r);else return},_e=d=>{let e=5e-4;return d<=50?e=1e-7:d>50&&d<=100?e=3e-7:d>100&&d<=200?e=5e-7:d>200&&d<=500?e=1e-6:d>500&&d<=1e3?e=3e-6:d>1e3&&d<=2e3?e=5e-6:d>2e3&&d<=5e3?e=1e-5:d>5e3&&d<=1e4?e=5e-5:d>1e4&&d<=5e4?e=1e-4:d>5e4&&d<=1e5?e=5e-4:d>1e5&&d<=2e5?e=.001:d>2e5&&d<=5e5?e=.005:d>5e5&&d<=1e6?e=.01:d>1e6&&d<=5e6?e=.05:d>5e6&&d<=1e7?e=.5:e=1,e},Be=()=>{let d=72;if(window.screen.deviceXDPI!=null)d=window.screen.deviceXDPI;else{var e=document.createElement("DIV");e.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden",document.body.appendChild(e),d=parseInt(e.offsetWidth),e.parentNode.removeChild(e)}return d};class We extends W.Z{constructor(e){super(e),this._selectFeatures=[],this._checkedLayers=[],this._mapEventList=[],this._currentEditLayer=void 0}getLayerById(e){let t,r=this.getLayers().getArray();for(let s=0;s<r.length;s++)if(r[s].get("id")==e){t=r[s];break}return t}getLayerByLayerTag(e){let t,r=this.getLayers().getArray();for(let s=0;s<r.length;s++)if(r[s].get("layerTag")==e){t=r[s];break}return t}getSelectFeatures(){return this._selectFeatures}setSelectFeatures(e){this._selectFeatures=e}clearSelectFeatures(){this._selectFeatures=[]}getCheckedLayers(){return this._checkedLayers}getMapEvent(){return this._mapEventList}addMapEvent(e){e instanceof Array?e.forEach(t=>{this._mapEventList.push(t)}):this._mapEventList.push(e)}clearMapEvent(){if(this._mapEventList.length>0)for(let e=this._mapEventList.length-1;e>=0;e--){let t=this._mapEventList[e];t.type?(0,M.B)(t):this.removeInteraction(t),this._mapEventList.pop()}T.Z.$emit("setActiveIndex"),G()(this.getViewport()).off("pointerdown")}getCurrentEditLayer(){return this._currentEditLayer}setCurrentEditLayer(e){this._currentEditLayer=e}clearCurrentEditLayer(){this._currentEditLayer=void 0}getMapScale(){return ne(this)}getResolutionFromScale(e){return Ne(this,e)}}var Ve=We,Pe=a(565941),X=a(372449),Y=a(2487),De=a(108365),Ge=a(168207),ze=a(671482),Ue=a(312059),He=function(){var d=function(e,t){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])},d(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");d(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),de="units",K={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},Xe=[1,2,5],q=25.4/.28,Ke=function(d){He(e,d);function e(t){var r=this,s=t||{},l=s.className!==void 0?s.className:s.bar?"ol-scale-bar":"ol-scale-line";return r=d.call(this,{element:document.createElement("div"),render:s.render,target:s.target})||this,r.on,r.once,r.un,r.innerElement_=document.createElement("div"),r.innerElement_.className=l+"-inner",r.element.className=l+" "+ze.XV,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=s.minWidth!==void 0?s.minWidth:64,r.maxWidth_=s.maxWidth,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addChangeListener(de,r.handleUnitsChanged_),r.setUnits(s.units||K.METRIC),r.scaleBar_=s.bar||!1,r.scaleBarSteps_=s.steps||4,r.scaleBarText_=s.text||!1,r.dpi_=s.dpi||void 0,r}return e.prototype.getUnits=function(){return this.get(de)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(de,t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var r=t.center,s=t.projection,l=this.getUnits(),u=l==K.DEGREES?m.ZP.DEGREES:m.ZP.METERS,f=(0,n.getPointResolution)(s,t.resolution,r,u),p=this.minWidth_*(this.dpi_||q)/q,E=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||q)/q:void 0,c=p*f,g="";if(l==K.DEGREES){var j=n.METERS_PER_UNIT[m.ZP.DEGREES];c*=j,c<j/60?(g="\u2033",f*=3600):c<j?(g="\u2032",f*=60):g="\xB0"}else l==K.IMPERIAL?c<.9144?(g="in",f/=.0254):c<1609.344?(g="ft",f/=.3048):(g="mi",f/=1609.344):l==K.NAUTICAL?(f/=1852,g="NM"):l==K.METRIC?c<.001?(g="\u03BCm",f*=1e6):c<1?(g="mm",f*=1e3):c<1e3?g="m":(g="km",f/=1e3):l==K.US?c<.9144?(g="in",f*=39.37):c<1609.344?(g="ft",f/=.30480061):(g="mi",f/=1609.3472):(0,Ue.h)(!1,33);for(var _=3*Math.floor(Math.log(p*f)/Math.log(10)),L,v,F,Z,D,A;;){F=Math.floor(_/3);var te=Math.pow(10,F);if(L=Xe[(_%3+3)%3]*te,v=Math.round(L/f),isNaN(v)){this.element.style.display="none",this.renderedVisible_=!1;return}if(E!==void 0&&v>=E){L=Z,v=D,F=A;break}else if(v>=p)break;Z=L,D=v,A=F,++_}var re;this.scaleBar_?re=this.createScaleBar(v,L,g):re=L.toFixed(F<0?-F:0)+" "+g,this.renderedHTML_!=re&&(this.innerElement_.innerHTML=re,this.renderedHTML_=re),this.renderedWidth_!=v&&(this.innerElement_.style.width=v+"px",this.renderedWidth_=v),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)},e.prototype.createScaleBar=function(t,r,s){for(var l="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),u=[],f=t/this.scaleBarSteps_,p="ol-scale-singlebar-odd",E=0;E<this.scaleBarSteps_;E++)E===0&&u.push(this.createMarker("absolute",E)),u.push('<div><div class="ol-scale-singlebar '+p+'" style="width: '+f+'px;"></div>'+this.createMarker("relative",E)+(E%2===0||this.scaleBarSteps_===2?this.createStepText(E,t,!1,r,s):"")+"</div>"),E===this.scaleBarSteps_-1&&u.push(this.createStepText(E+1,t,!0,r,s)),p=p==="ol-scale-singlebar-odd"?"ol-scale-singlebar-even":"ol-scale-singlebar-odd";var c;this.scaleBarText_?c='<div class="ol-scale-text" style="width: '+t+'px;">'+l+"</div>":c="";var g='<div style="display: flex;">'+c+u.join("")+"</div>";return g},e.prototype.createMarker=function(t,r){var s=t==="absolute"?3:-10;return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+s+'px;"></div>'},e.prototype.createStepText=function(t,r,s,l,u){var f=t===0?0:Math.round(l/this.scaleBarSteps_*t*100)/100,p=f+(t===0?"":" "+u),E=t===0?-3:r/this.scaleBarSteps_*-1,c=t===0?0:r/this.scaleBarSteps_*2;return'<div class="ol-scale-step-text" style="margin-left: '+E+"px;text-align: "+(t===0?"left":"center")+"; min-width: "+c+"px;left: "+(s?r+"px":"unset")+';">'+p+"</div>"},e.prototype.getScaleForResolution=function(){var t=(0,n.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,m.ZP.METERS),r=this.dpi_||q,s=1e3/25.4;return parseFloat(t.toString())*s*r},e.prototype.render=function(t){var r=t.frameState;r?this.viewState_=r.viewState:this.viewState_=null,this.updateElement_()},e}(Ge.Z),Qe=Ke,ve=a(864341),Le=a(24918),Je=function(){var d=function(e,t){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])},d(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");d(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ce="projection",Te="coordinateFormat",$e=function(d){Je(e,d);function e(t){var r=this,s=t||{},l=document.createElement("div");l.className=s.className!==void 0?s.className:"ol-mouse-position",r=d.call(this,{element:l,render:s.render,target:s.target})||this,r.on,r.once,r.un,r.addChangeListener(ce,r.handleProjectionChanged_),s.coordinateFormat&&r.setCoordinateFormat(s.coordinateFormat),s.projection&&r.setProjection(s.projection);var u=!0,f="&#160;";return"undefinedHTML"in s?(s.undefinedHTML!==void 0&&(f=s.undefinedHTML),u=!!f):"placeholder"in s&&(s.placeholder===!1?u=!1:f=String(s.placeholder)),r.placeholder_=f,r.renderOnMouseOut_=u,r.renderedHTML_=l.innerHTML,r.mapProjection_=null,r.transform_=null,r}return e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(Te)},e.prototype.getProjection=function(){return this.get(ce)},e.prototype.handleMouseMove=function(t){var r=this.getMap();this.updateHTML_(r.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(t){if(d.prototype.setMap.call(this,t),t){var r=t.getViewport();this.listenerKeys.push((0,Le.oL)(r,ve.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,Le.oL)(r,ve.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(Te,t)},e.prototype.setProjection=function(t){this.set(ce,(0,n.get)(t))},e.prototype.updateHTML_=function(t){var r=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var s=this.getProjection();s?this.transform_=(0,n.getTransformFromProjections)(this.mapProjection_,s):this.transform_=n.identityTransform}var l=this.getMap(),u=l.getCoordinateFromPixelInternal(t);if(u){var f=(0,n.getUserProjection)();f&&(this.transform_=(0,n.getTransformFromProjections)(this.mapProjection_,f)),this.transform_(u,u);var p=this.getCoordinateFormat();p?r=p(u):r=u.toString()}}(!this.renderedHTML_||r!==this.renderedHTML_)&&(this.element.innerHTML=r,this.renderedHTML_=r)},e.prototype.render=function(t){var r=t.frameState;r?this.mapProjection_!=r.viewState.projection&&(this.mapProjection_=r.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(Ge.Z),Ye=$e,qe=a(432849),et=a(365598),tt=a(983354),rt=a(866884),i=a(778327),o=a(222276);i.default.defs("EPSG:4490","+proj=longlat +ellps=GRS80 +units=degrees +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4490").setExtent([-180,-90,180,90]),i.default.defs("EPSG:4543","+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4543").setExtent([344166.57,233820565e-2,622925.7,472937322e-2]),i.default.defs("EPSG:4544","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4544").setExtent([345643.07,248994065e-2,623868.1,467605219e-2]),i.default.defs("EPSG:4545","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4545").setExtent([341298.83,201266002e-2,623358.71,470493389e-2]),i.default.defs("EPSG:4546","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4546").setExtent([341226.58,200380299e-2,618043.7,499826383e-2]),i.default.defs("EPSG:4547","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4547").setExtent([344577.88,238139791e-2,617340.63,503605038e-2]),i.default.defs("EPSG:4548","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4548").setExtent([345754.3,250101713e-2,607809,552857896e-2]),i.default.defs("EPSG:4549","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4549").setExtent([347872.25,270373974e-2,599933.05,59123952e-1]),i.default.defs("EPSG:4550","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4550").setExtent([352748.57,312373399e-2,599394.66,593799042e-2]),i.default.defs("EPSG:4551","+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4551").setExtent([372262.47,445170513e-2,600236.64,589792874e-2]),i.default.defs("EPSG:4552","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4552").setExtent([374503.76,458275041e-2,606982.71,556973171e-2]),i.default.defs("EPSG:4553","+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4553").setExtent([376543.13,469937962e-2,610019.44,541736763e-2]),i.default.defs("EPSG:4554","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4554").setExtent([383491.84,508050785e-2,482969.27,536293084e-2]),i.default.defs("EPSG:4534","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4534").setExtent([375272.5,396533975e-2,626870.23,45027876e-1]),i.default.defs("EPSG:4535","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4535").setExtent([356780.75,343526695e-2,624607.97,463384266e-2]),i.default.defs("EPSG:4536","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4536").setExtent([355189.72,331551728e-2,617221.79,508385692e-2]),i.default.defs("EPSG:4537","+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4537").setExtent([352803.51,312816777e-2,613592.51,523390847e-2]),i.default.defs("EPSG:4538","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4538").setExtent([352176.08,307718078e-2,609359.83,545072914e-2]),i.default.defs("EPSG:4539","+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4539").setExtent([350541.6,302399226e-2,611765.09,536623103e-2]),i.default.defs("EPSG:4540","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4540").setExtent([352054.43,306720543e-2,618002.46,500048651e-2]),i.default.defs("EPSG:4541","+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4541").setExtent([352762.3,312484244e-2,620089.9,493049022e-2]),i.default.defs("EPSG:4542","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4542").setExtent([344482.32,23714303e-1,622787.54,473714955e-2]),i.default.defs("EPSG:4513","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4513").setExtent([253752725e-1,396533975e-2,2562687023e-2,45027876e-1]),i.default.defs("EPSG:4514","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4514").setExtent([2635678075e-2,343526695e-2,2662460797e-2,463384266e-2]),i.default.defs("EPSG:4515","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4515").setExtent([2735518972e-2,331551728e-2,2761722179e-2,508385692e-2]),i.default.defs("EPSG:4516","+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4516").setExtent([2835280351e-2,312816777e-2,2861359251e-2,523390847e-2]),i.default.defs("EPSG:4517","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4517").setExtent([2935217608e-2,307718078e-2,2960935983e-2,545072914e-2]),i.default.defs("EPSG:4518","+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4518").setExtent([303505416e-1,302399226e-2,3061176509e-2,536623103e-2]),i.default.defs("EPSG:4519","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4519").setExtent([3135205443e-2,306720543e-2,3161800246e-2,500048651e-2]),i.default.defs("EPSG:4520","+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4520").setExtent([323527623e-1,312484244e-2,326200899e-1,493049022e-2]),i.default.defs("EPSG:4521","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4521").setExtent([3334448232e-2,23714303e-1,3362278754e-2,473714955e-2]),i.default.defs("EPSG:4522","+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4522").setExtent([3434416657e-2,233820565e-2,346229257e-1,472937322e-2]),i.default.defs("EPSG:4523","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4523").setExtent([3534564307e-2,248994065e-2,356238681e-1,467605219e-2]),i.default.defs("EPSG:4524","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4524").setExtent([3634129883e-2,201266002e-2,3662335871e-2,470493389e-2]),i.default.defs("EPSG:4525","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4525").setExtent([3734122658e-2,200380299e-2,376180437e-1,499826383e-2]),i.default.defs("EPSG:4526","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4526").setExtent([3834457788e-2,238139791e-2,3861734063e-2,503605038e-2]),i.default.defs("EPSG:4527","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4527").setExtent([393457543e-1,250101713e-2,39607809,552857896e-2]),i.default.defs("EPSG:4528","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4528").setExtent([4034787225e-2,270373974e-2,4059993305e-2,59123952e-1]),i.default.defs("EPSG:4529","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4529").setExtent([4135274857e-2,312373399e-2,4159939466e-2,593799042e-2]),i.default.defs("EPSG:4530","+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4530").setExtent([4237226247e-2,445170513e-2,4260023664e-2,589792874e-2]),i.default.defs("EPSG:4531","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4531").setExtent([4337450376e-2,458275041e-2,4360698271e-2,556973171e-2]),i.default.defs("EPSG:4532","+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4532").setExtent([4437654313e-2,469937962e-2,4461001944e-2,541736763e-2]),i.default.defs("EPSG:4533","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4533").setExtent([4538349184e-2,508050785e-2,4548296927e-2,536293084e-2]),i.default.defs("EPSG:4507","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4507").setExtent([181721.15,196585414e-2,746725.01,470820687e-2]),i.default.defs("EPSG:4508","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4508").setExtent([179915.67,184951647e-2,736087.19,500154983e-2]),i.default.defs("EPSG:4509","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4509").setExtent([184047.25,210657941e-2,708208.94,571420625e-2]),i.default.defs("EPSG:4510","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4510").setExtent([196182.08,272949505e-2,698769.28,594113159e-2]),i.default.defs("EPSG:4511","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4511").setExtent([209606.47,329062732e-2,702362.77,585547168e-2]),i.default.defs("EPSG:4512","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4512").setExtent([263541.74,499154788e-2,482969.27,536293084e-2]),i.default.defs("EPSG:4502","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4502").setExtent([374665.41,392206444e-2,752994.91,455271522e-2]),i.default.defs("EPSG:4503","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4503").setExtent([206116.83,323077931e-2,727179.04,523718474e-2]),i.default.defs("EPSG:4504","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4504").setExtent([203003.72,302665893e-2,718708.81,545398063e-2]),i.default.defs("EPSG:4505","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4505").setExtent([204050.9,306990968e-2,725045.7,531169664e-2]),i.default.defs("EPSG:4506","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4506").setExtent([188253.52,234041416e-2,744727.96,478711785e-2]),i.default.defs("EPSG:4491","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4491").setExtent([1337466541e-2,392206444e-2,1375299491e-2,455271522e-2]),i.default.defs("EPSG:4492","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4492").setExtent([1420611683e-2,323077931e-2,1472717904e-2,523718474e-2]),i.default.defs("EPSG:4493","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4493").setExtent([1520300372e-2,302665893e-2,1571870881e-2,545398063e-2]),i.default.defs("EPSG:4494","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4494").setExtent([162040509e-1,306990968e-2,167250457e-1,531169664e-2]),i.default.defs("EPSG:4495","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4495").setExtent([1718825352e-2,234041416e-2,1774472796e-2,478711785e-2]),i.default.defs("EPSG:4496","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4496").setExtent([1818172115e-2,196585414e-2,1874672501e-2,470820687e-2]),i.default.defs("EPSG:4497","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4497").setExtent([1917991567e-2,184951647e-2,1973608719e-2,500154983e-2]),i.default.defs("EPSG:4498","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4498").setExtent([2018404725e-2,210657941e-2,2070820894e-2,571420625e-2]),i.default.defs("EPSG:4499","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4499").setExtent([2119618208e-2,272949505e-2,2169876928e-2,594113159e-2]),i.default.defs("EPSG:4500","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4500").setExtent([2220960647e-2,329062732e-2,2270236277e-2,585547168e-2]),i.default.defs("EPSG:4501","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4501").setExtent([2326354174e-2,499154788e-2,2348296927e-2,536293084e-2]),i.default.defs("EPSG:4610","+proj=longlat +a=6378140 +b=6356755.288157528 +units=degrees +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:4610").setExtent([-180,-90,180,90]),i.default.defs("EPSG:2379","+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2379").setExtent([344166.5,233820674e-2,622925.76,472937542e-2]),i.default.defs("EPSG:2380","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2380").setExtent([345643,248994181e-2,623868.16,467605437e-2]),i.default.defs("EPSG:2381","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2381").setExtent([341298.75,201266096e-2,623358.77,470493609e-2]),i.default.defs("EPSG:2382","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2382").setExtent([341226.51,200380392e-2,618043.76,499826616e-2]),i.default.defs("EPSG:2383","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2383").setExtent([344577.81,238139902e-2,617340.68,503605273e-2]),i.default.defs("EPSG:2384","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2384").setExtent([345754.23,250101829e-2,607809.05,552858154e-2]),i.default.defs("EPSG:2385","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2385").setExtent([347872.18,2703741,599933.1,591239796e-2]),i.default.defs("EPSG:2386","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2386").setExtent([352748.5,312373545e-2,599394.71,59379932e-1]),i.default.defs("EPSG:2387","+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2387").setExtent([372262.41,44517072e-1,600236.68,58979315e-1]),i.default.defs("EPSG:2388","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2388").setExtent([374503.71,458275255e-2,606982.76,556973431e-2]),i.default.defs("EPSG:2389","+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2389").setExtent([376543.07,469938182e-2,610019.49,541737016e-2]),i.default.defs("EPSG:2390","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2390").setExtent([383491.79,508051022e-2,482969.27,536293335e-2]),i.default.defs("EPSG:2370","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2370").setExtent([375272.44,39653416e-1,626870.29,45027897e-1]),i.default.defs("EPSG:2371","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2371").setExtent([356780.68,343526856e-2,624608.03,463384482e-2]),i.default.defs("EPSG:2372","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2372").setExtent([355189.66,331551883e-2,617221.84,508385929e-2]),i.default.defs("EPSG:2373","+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2373").setExtent([352803.44,312816923e-2,613592.56,523391091e-2]),i.default.defs("EPSG:2374","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2374").setExtent([352176.01,307718221e-2,609359.88,545073168e-2]),i.default.defs("EPSG:2375","+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2375").setExtent([350541.53,302399367e-2,611765.14,536623354e-2]),i.default.defs("EPSG:2376","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2376").setExtent([352054.36,306720686e-2,618002.52,500048884e-2]),i.default.defs("EPSG:2377","+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2377").setExtent([352762.23,312484389e-2,620089.96,493049252e-2]),i.default.defs("EPSG:2378","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2378").setExtent([344482.25,23714314e-1,622787.6,473715176e-2]),i.default.defs("EPSG:2349","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2349").setExtent([2537527244e-2,39653416e-1,2562687029e-2,45027897e-1]),i.default.defs("EPSG:2350","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2350").setExtent([2635678068e-2,343526856e-2,2662460803e-2,463384482e-2]),i.default.defs("EPSG:2351","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2351").setExtent([2735518966e-2,331551883e-2,2761722184e-2,508385929e-2]),i.default.defs("EPSG:2352","+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2352").setExtent([2835280344e-2,312816923e-2,2861359256e-2,523391091e-2]),i.default.defs("EPSG:2353","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2353").setExtent([2935217601e-2,307718221e-2,2960935988e-2,545073168e-2]),i.default.defs("EPSG:2354","+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2354").setExtent([3035054153e-2,302399367e-2,3061176514e-2,536623354e-2]),i.default.defs("EPSG:2355","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2355").setExtent([3135205436e-2,306720686e-2,3161800252e-2,500048884e-2]),i.default.defs("EPSG:2356","+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2356").setExtent([3235276223e-2,312484389e-2,3262008996e-2,493049252e-2]),i.default.defs("EPSG:2357","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2357").setExtent([3334448225e-2,23714314e-1,336227876e-1,473715176e-2]),i.default.defs("EPSG:2358","+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2358").setExtent([343441665e-1,233820674e-2,3462292576e-2,472937542e-2]),i.default.defs("EPSG:2359","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2359").setExtent([35345643,248994181e-2,3562386816e-2,467605437e-2]),i.default.defs("EPSG:2360","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2360").setExtent([3634129875e-2,201266096e-2,3662335877e-2,470493609e-2]),i.default.defs("EPSG:2361","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2361").setExtent([3734122651e-2,200380392e-2,3761804376e-2,499826616e-2]),i.default.defs("EPSG:2362","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2362").setExtent([3834457781e-2,238139902e-2,3861734068e-2,503605273e-2]),i.default.defs("EPSG:2363","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2363").setExtent([3934575423e-2,250101829e-2,3960780905e-2,552858154e-2]),i.default.defs("EPSG:2364","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2364").setExtent([4034787218e-2,2703741,405999331e-1,591239796e-2]),i.default.defs("EPSG:2365","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2365").setExtent([413527485e-1,312373545e-2,4159939471e-2,59379932e-1]),i.default.defs("EPSG:2366","+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2366").setExtent([4237226241e-2,44517072e-1,4260023668e-2,58979315e-1]),i.default.defs("EPSG:2367","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2367").setExtent([4337450371e-2,458275255e-2,4360698276e-2,556973431e-2]),i.default.defs("EPSG:2368","+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2368").setExtent([4437654307e-2,469938182e-2,4461001949e-2,541737016e-2]),i.default.defs("EPSG:2369","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2369").setExtent([4538349179e-2,508051022e-2,4548296927e-2,536293335e-2]),i.default.defs("EPSG:2343","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2343").setExtent([189098.51,238474879e-2,746725.12,470820907e-2]),i.default.defs("EPSG:2344","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2344").setExtent([182364.58,200574433e-2,736087.3,500155217e-2]),i.default.defs("EPSG:2345","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2345").setExtent([190416.42,24523604e-1,708209.04,571420892e-2]),i.default.defs("EPSG:2346","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2346").setExtent([200433.02,291798659e-2,698769.38,594113437e-2]),i.default.defs("EPSG:2347","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2347").setExtent([247158.43,453269483e-2,702362.87,585547442e-2]),i.default.defs("EPSG:2348","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2348").setExtent([263541.63,499155021e-2,482969.27,536293335e-2]),i.default.defs("EPSG:2338","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2338").setExtent([374665.35,392206627e-2,752995.03,455271734e-2]),i.default.defs("EPSG:2339","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2339").setExtent([206116.69,323078081e-2,727179.14,523718719e-2]),i.default.defs("EPSG:2340","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2340").setExtent([203003.59,302666034e-2,718708.91,545398317e-2]),i.default.defs("EPSG:2341","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2341").setExtent([204050.76,306991111e-2,725045.8,531169912e-2]),i.default.defs("EPSG:2342","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2342").setExtent([188253.38,234041525e-2,744728.08,478712008e-2]),i.default.defs("EPSG:2327","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2327").setExtent([1337466535e-2,392206627e-2,1375299503e-2,455271734e-2]),i.default.defs("EPSG:2328","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2328").setExtent([1420611669e-2,323078081e-2,1472717914e-2,523718719e-2]),i.default.defs("EPSG:2329","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2329").setExtent([1520300359e-2,302666034e-2,1571870891e-2,545398317e-2]),i.default.defs("EPSG:2330","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2330").setExtent([1620405076e-2,306991111e-2,167250458e-1,531169912e-2]),i.default.defs("EPSG:2331","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2331").setExtent([1718825338e-2,234041525e-2,1774472808e-2,478712008e-2]),i.default.defs("EPSG:2332","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2332").setExtent([1818909851e-2,238474879e-2,1874672512e-2,470820907e-2]),i.default.defs("EPSG:2333","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2333").setExtent([1918236458e-2,200574433e-2,197360873e-1,500155217e-2]),i.default.defs("EPSG:2334","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2334").setExtent([2019041642e-2,24523604e-1,2070820904e-2,571420892e-2]),i.default.defs("EPSG:2335","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2335").setExtent([2120043302e-2,291798659e-2,2169876938e-2,594113437e-2]),i.default.defs("EPSG:2336","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2336").setExtent([2224715843e-2,453269483e-2,2270236287e-2,585547442e-2]),i.default.defs("EPSG:2337","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +a=6378140 +b=6356755.288157528 +units=m +no_defs"),(0,o.register)(i.default),(0,n.get)("EPSG:2337").setExtent([2326354163e-2,499155021e-2,2348296927e-2,536293335e-2]);var Me=a(957922);class it{constructor(e){this.name="mapDraw",this.active=!1,this.map=e}init(){let e;if(this.map.getCurrentEditLayer()){let t=this.map.getCurrentEditLayer().geometryType,r=this.map.getCurrentEditLayer().layerTag;switch(t.toLowerCase()){case"point":t="Point";break;case"linestring":t="LineString";break;case"polyline":t="LineString";break;case"polygon":t="Polygon";break}t=="Polyline"&&(t="LineString"),e=new Me.ZP({source:this.map.getLayerById("drawLayer").getSource(),type:t}),e.on("drawend",s=>{s.feature.set("layerTag",r)})}else e=new Me.ZP({source:this.map.getLayerById("drawLayer").getSource(),type:"Polygon"});e.interactionsType="draw",this.map.addInteraction(e),this.map.addMapEvent(e),this.active=!0}setActive(e){e?this.init():this.active&&this.cancelMapDraw()}cancelMapDraw(){this.map.interactions.forEach(t=>{t.interactionsType&&t.interactionsType=="draw"&&this.map.removeInteraction(t)}),this.active=!1}}var st=it,nt=a(655825),le=a(296231),lt=a(832450),ot=a(252759),be=a(192249),at=a(545059),V=a(955631),ee=a(95232),Q=a(910516),Ce=function(){var d=function(e,t){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])},d(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");d(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ut={SELECT:"select"},ft=function(d){Ce(e,d);function e(t,r,s,l){var u=d.call(this,t)||this;return u.selected=r,u.deselected=s,u.mapBrowserEvent=l,u}return e}(lt.ZP),oe={},dt=function(d){Ce(e,d);function e(t){var r=d.call(this)||this;r.on,r.once,r.un;var s=t||{};r.boundAddFeature_=r.addFeature_.bind(r),r.boundRemoveFeature_=r.removeFeature_.bind(r),r.condition_=s.condition?s.condition:Q.Kf,r.addCondition_=s.addCondition?s.addCondition:Q.Fi,r.removeCondition_=s.removeCondition?s.removeCondition:Q.Fi,r.toggleCondition_=s.toggleCondition?s.toggleCondition:Q.vY,r.multi_=s.multi?s.multi:!1,r.filter_=s.filter?s.filter:be.uX,r.hitTolerance_=s.hitTolerance?s.hitTolerance:0,r.style_=s.style!==void 0?s.style:ct(),r.features_=s.features||new nt.Z;var l;if(s.layers)if(typeof s.layers=="function")l=s.layers;else{var u=s.layers;l=function(f){return(0,V.q9)(u,f)}}else l=be.uX;return r.layerFilter_=l,r.featureLayerAssociation_={},r}return e.prototype.addFeatureLayerAssociation_=function(t,r){this.featureLayerAssociation_[(0,ee.sq)(t)]=r},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[(0,ee.sq)(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(t){var r=this.getMap();r&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),d.prototype.setMap.call(this,t),t?(this.features_.addEventListener(le.Z.ADD,this.boundAddFeature_),this.features_.addEventListener(le.Z.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(le.Z.ADD,this.boundAddFeature_),this.features_.removeEventListener(le.Z.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var r=t.element;if(this.style_&&this.applySelectedStyle_(r),!this.getLayer(r)){var s=this.getMap().getAllLayers().find(function(l){if(l instanceof X.default&&l.getSource()&&l.getSource().hasFeature(r))return l});s&&this.addFeatureLayerAssociation_(r,s)}},e.prototype.removeFeature_=function(t){var r=t.element;this.style_&&this.restorePreviousStyle_(r)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var r=(0,ee.sq)(t);r in oe||(oe[r]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var r=this.getMap().getInteractions().getArray(),s=r.length-1;s>=0;--s){var l=r[s];if(l!==this&&l instanceof e&&l.getStyle()&&l.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(l.getStyle());return}}var u=(0,ee.sq)(t);t.setStyle(oe[u]),delete oe[u]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[(0,ee.sq)(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var r=this.addCondition_(t),s=this.removeCondition_(t),l=this.toggleCondition_(t),u=!r&&!s&&!l,f=t.map,p=this.getFeatures(),E=[],c=[];if(u){(0,at.ZH)(this.featureLayerAssociation_),f.forEachFeatureAtPixel(t.pixel,function(v,F){if(this.filter_(v,F))return this.addFeatureLayerAssociation_(v,F),c.push(v),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=p.getLength()-1;g>=0;--g){var j=p.item(g),_=c.indexOf(j);_>-1?c.splice(_,1):(p.remove(j),E.push(j))}c.length!==0&&p.extend(c)}else{f.forEachFeatureAtPixel(t.pixel,function(v,F){if(this.filter_(v,F))return(r||l)&&!(0,V.q9)(p.getArray(),v)?(this.addFeatureLayerAssociation_(v,F),c.push(v)):(s||l)&&(0,V.q9)(p.getArray(),v)&&(E.push(v),this.removeFeatureLayerAssociation_(v)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var L=E.length-1;L>=0;--L)p.remove(E[L]);p.extend(c)}return(c.length>0||E.length>0)&&this.dispatchEvent(new ft(ut.SELECT,c,E,t)),!0},e}(ot.ZP);function ct(){var d=(0,b.Ly)();return(0,V.l7)(d.Polygon,d.LineString),(0,V.l7)(d.GeometryCollection,d.LineString),function(e){return e.getGeometry()?d[e.getGeometry().getType()]:null}}var pt=dt,we=a(324459);class ht{constructor(e){this.name="mapSelect",this.active=!1,this.map=e,this.currentEditTargetLayer,this.tempLayer=this.map.getLayerById("drawLayer")}init(){this.currentEditTargetLayer=this.map.getCurrentEditLayer();let e=this.currentEditTargetLayer?[this.map.getLayerById(this.currentEditTargetLayer.id),this.tempLayer]:[this.tempLayer],t=new pt({layers:e,style:x});t.interactionsType="select",this.map.addInteraction(t);let r=t.getFeatures();this.map.addMapEvent(t);let s=new we.Z({condition:Q.QC});s.interactionsType="dragBox",this.map.addInteraction(s),this.map.addMapEvent(s),this.active=!0,s.on("boxend",()=>{let l=s.getGeometry().getExtent();this.map.getLayers().getArray().forEach(f=>{(this.currentEditTargetLayer&&f.get("id")==this.currentEditTargetLayer.id||f.get("id")=="drawLayer")&&f instanceof X.default&&f.getSource().forEachFeatureIntersectingExtent(l,p=>{r.push(p)})})}),s.on("boxstart",function(){r.clear()}),r.on(["add","remove"],l=>{l.type=="add",this.map.setSelectFeatures(r)})}setActive(e){e?this.init():this.active&&this.cancelMapSelect()}cancelMapSelect(){this.map.interactions.forEach(t=>{t.interactionsType&&t.interactionsType=="select"&&this.map.removeInteraction(t),t.interactionsType&&t.interactionsType=="dragBox"&&this.map.removeInteraction(t)}),this.map.clearSelectFeatures(),this.active=!1}}var gt=ht,Ie=a(762735),Fe=a(131751),pe=a(337564),Re=a(303289),ke=a(322356);class mt{constructor(e){this.map=e,this.coordinate,this.resolution=this.map?this.map.getView().getResolution():void 0,this.projection=this.map?this.map.getView().getProjection():void 0,this.outputFormat="application/json",this.maxFeatures=1,this.params={INFO_FORMAT:this.outputFormat,FEATURE_COUNT:this.maxFeatures}}}var yt=mt,he=a(301058),Ze=a(128261);class Et{constructor(e){this.layerOption=e}execute(e){let s=new he.Z({source:new Ze.Z({url:this.layerOption.url,params:{LAYERS:this.layerOption.visibleLayers,VERSION:"1.1.0"}})}).getSource().getGetFeatureInfoUrl(e.coordinate,e.resolution,e.projection,e.params);return new Promise((l,u)=>{G().ajax({url:s,type:"GET",success:f=>{if(f.features&&f.features.length>0){let p={layerLabel:this.layerOption.label,layerId:this.layerOption.id,layerTag:this.layerOption.layerTag,feature:f.features[0]};l(p)}else l()},error:f=>{u(f)}})})}}var xt=Et,St=a(149500);class jt{constructor(e){this.name="mapQuery",this.active=!1,this.map=e,this.overlayTip=void 0}init(){this.initMapClickQuery(),this.active=!0}initMapClickQuery(){let e=this.map.on("click",t=>{this.map.getViewport().style.cursor="wait";let r=this.map.getCheckedLayers(),s=[];for(let l=0,u=r.length;l<u;l++){if((r[l].type==="geoserver-wms"||r[l].type==="geoserver-wfs")&&r[l].identifyField.length>0){let f=new xt(r[l]),p=new yt(this.map);p.coordinate=t.coordinate,s.push(f.execute(p))}if(r[l].type==="dynamic"&&r[l].identifyField.length>0){let f=this.map.getView().getProjection().getCode();f=f.slice(5,f.length);let p=r[l].identifyField,E=p[0].lyr.lastIndexOf("/"),c=p[0].lyr.slice(0,E),g=[];for(let F=0,Z=p.length;F<Z;F++)g.push(Number(p[F].lyr.slice(E+1,p[F].lyr.length)));let j=new this.IdentifyTask(c),_=new this.IdentifyParameters;_.spatialReference={wkid:f},_.tolerance=3,_.returnGeometry=!0,_.layerIds=g,_.width=this.map.getSize()[0],_.height=this.map.getSize()[1],_.geometry=this.GeometryJsonUtils.fromJson({x:t.coordinate[0],y:t.coordinate[1],spatialReference:{wkid:f}});let L=this.map.getView().calculateExtent(this.map.getSize());_.mapExtent=new this.Extent({xmin:L[0],ymin:L[1],xmax:L[2],ymax:L[3],spatialReference:{wkid:f}});let v=j.execute(_);v.layerTag=r[l].layerTag,v.layerLabel=r[l].label,v.layerId=r[l].id,s.push(v)}}s.length>0?Promise.all(s).then(l=>{this.map.getViewport().style.cursor="auto";let u=[];l.forEach((f,p)=>{if(Array.isArray(f)){if(f.length>0){let E={layerLabel:s[p].layerLabel,layerId:s[p].layerId,layerTag:s[p].layerTag,feature:""},c=new Fe.Z,g=new pe.default;(function(L,v){var F=L[v];Object.defineProperty(L,v,{get:function(){return F},set:function(Z){F=Z}})})(f[0].feature.geometry,"rings");let _=c.readFeature(f[0].feature);E.feature=JSON.parse(g.writeFeature(_)),u.push(E)}}else f instanceof Object&&f.feature&&u.push(f)}),T.Z.$emit("showIdentifyInfo",u)}).catch(l=>{this.map.getViewport().style.cursor="auto",St.log(l),(0,k.Message)({message:l,type:"error"})}):(this.map.getViewport().style.cursor="auto",(0,k.Message)({message:"\u5F53\u524D\u65E0\u53EF\u67E5\u8BE2\u56FE\u5C42\uFF01",type:"warning"}))});this.map.addMapEvent(e)}initBoxSelectQuery(){let e=new we.Z({condition:Q.QC});this.map.addInteraction(e),this.map.addMapEvent(e);let t=[];e.on("boxend",()=>{t=[];let r=e.getGeometry().getExtent(),s=this.map.getCheckedLayers(),l=this.map.getView().getProjection().getCode();for(let u=0,f=s.length;u<f;u++)if(s[u].type.split("-")[0].toLowerCase()==="geoserver"&&s[u].identifyField.length>0){let p=s[u].visibleLayers[0].split(":"),E=s[u].identifyField[0].lyr+"/"+p[0]+"/wfs",c={layer:{value:s[u].id,label:s[u].label},queryUrl:E,totalUrlData:function(){return new XMLSerializer().serializeToString(new Re.Z().writeGetFeature({srsName:l,featurePrefix:p[0],featureTypes:[p[1]],resultType:"hits",outputFormat:"application/json",filter:(0,ke.VW)("",r,l)}))},paginationUrlData:function(g,j){return new XMLSerializer().serializeToString(new Re.Z().writeGetFeature({srsName:l,featurePrefix:p[0],featureTypes:[p[1],p[1]],outputFormat:"application/json",maxFeatures:g,startIndex:j,filter:(0,ke.VW)("",r,l)}))}};t.push(c)}t.length>0?T.Z.$emit("showBoxQueryInfo",t):(0,k.Message)({message:"\u5F53\u524D\u65E0\u53EF\u67E5\u8BE2\u56FE\u5C42\uFF01",type:"warning"})})}showPopup(e){if(G()("#identifyPopup").show(),this.overlayTip instanceof Ie.Z)this.overlayTip.setPosition(e);else{let t=document.getElementById("identifyPopup");this.overlayTip=new Ie.Z({element:t,autoPan:!0,autoPanAnimation:{duration:250},offset:[0,0]}),this.map.addOverlay(this.overlayTip),this.overlayTip.setPosition(e)}}setActive(e){e?(this.init(),T.Z.$emit("setActiveIndex","Identify")):this.active&&this.cancelMapQuery()}cancelMapQuery(){this.map.clearMapEvent(),this.active=!1}}var _t=jt;class Pt{constructor(e){this.interactions=[],this.map=e,this.currentInteraction={},this.init()}openInteraction(e,t){return this.currentInteraction=void 0,this.interactions.forEach(r=>{r.name==e?this.currentInteraction=r:r.setActive(!1)}),this.currentInteraction&&!this.currentInteraction.active&&(this.currentInteraction.setActive(!0,t),G()(this.map.getViewport()).on("pointerdown",this.mapMouseEvent.bind(this))),this.currentInteraction}init(){this.interactions.push(new st(this.map)),this.interactions.push(new gt(this.map)),this.interactions.push(new _t(this.map))}addInteraction(e){this.interactions.push(e)}mapMouseEvent(e){var t=e.button;if(t==2){this.currentInteraction.setActive(!1);return}else return}getInteractionByName(e){for(let t=0,r=this.interactions.length;t<r;t++)if(this.interactions[t].name==e)return this.interactions[t]}}var Gt=Pt,u0=a(927966),z=a(313927),ge=a(213910),me=a(586805),J=a(957713),vt=a(831840),ye=a(354372),Ae=a(988821),Lt=a(444138),Ee=a(412542),Tt=a(220346),Mt=a(394308),bt=a(25002),$=a(33288),xe=a(776094),Ct=a(704391),Se=a(57250),B=a(149500);class wt{constructor(e){this.map=e}generate(e){debugger;if(e.type=="tiled")return new Promise((t,r)=>{G().ajax({url:e.url+"?f=json",type:"GET",success:s=>{let l=JSON.parse(s),u=[],f=[],p=[],E=[],c=[],g="EPSG:"+(l.fullExtent.spatialReference.wkid==102100?3857:l.fullExtent.spatialReference.wkid);p.push(l.tileInfo.origin.x,l.tileInfo.origin.y),f.push(l.fullExtent.xmin,l.fullExtent.ymin,l.fullExtent.xmax,l.fullExtent.ymax),u.push(l.initialExtent.xmin,l.initialExtent.ymin,l.initialExtent.xmax,l.initialExtent.ymax),c.push(l.tileInfo.rows,l.tileInfo.cols);for(let L=0,v=l.tileInfo.lods.length;L<v;L++)E.push(l.tileInfo.lods[L].resolution);let j={projCode:g,origin:p,initExtent:u,extent:f,resolutions:E,tileSize:c,extUrl:"/tile/{z}/{y}/{x}"},_=this.createArcGISTileLayer(e,j);t(_)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="geoserver-vectorTiled")return new Promise((t,r)=>{G().ajax({url:e.url,type:"GET",success:s=>{let l=[],u=[],f=[],p=[],E,c="",g=(0,$.WU)(s);E=g.getElementsByTagName("SRS")[0].innerHTML;let _=g.getElementsByTagName("BoundingBox");u.push(Number(_[0].attributes[0].nodeValue),Number(_[0].attributes[_[0].attributes.length-1].nodeValue));for(let A=0,te=_[0].attributes.length;A<te;A++)l.push(Number(_[0].attributes[A].nodeValue));let L=g.getElementsByTagName("TileSets");for(let A=0,te=L[0].children.length;A<te;A++)f.push(Number(L[0].children[A].attributes[1].nodeValue));let v=g.getElementsByTagName("TileFormat");p.push(Number(v[0].attributes[0].nodeValue),Number(v[0].attributes[1].nodeValue));let F=e.url.lastIndexOf("@");c="/{z}/{x}/{-y}."+e.url.substring(F+1,e.url.length);let Z={projCode:E,origin:u,initExtent:l,extent:l,resolutions:f,tileSize:p,extUrl:c},D=this.createGeoServerVectorTileLayer(e,Z);t(D)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="geoserver-tms")return new Promise((t,r)=>{G().ajax({url:e.url,type:"GET",success:s=>{let l=[],u=[],f=[],p="",E,c=(0,$.WU)(s);E=c.getElementsByTagName("SRS")[0].innerHTML;let j=c.getElementsByTagName("BoundingBox");for(let Z=0,D=j[0].attributes.length;Z<D;Z++)l.push(Number(j[0].attributes[Z].nodeValue));let _=c.getElementsByTagName("TileSets");for(let Z=0,D=_[0].children.length;Z<D;Z++)u.push(Number(_[0].children[Z].attributes[1].nodeValue));let L=c.getElementsByTagName("TileFormat");f.push(Number(L[0].attributes[0].nodeValue),Number(L[0].attributes[1].nodeValue)),p="/{z}/{x}/{-y}."+e.url.substring(e.url.lastIndexOf("@")+1,e.url.length);let v={projCode:E,initExtent:l,extent:l,resolutions:u,tileSize:f,extUrl:p},F=this.createGeoServerTMSLayer(e,v);t(F)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="arcgis-wms")return new Promise((t,r)=>{G().ajax({url:e.url+"?service=WMS&Request=getCapabilities",type:"GET",success:s=>{let f=new Ae.Z().read(s).Capability.Layer.Layer,c={initExtent:(0,V.sE)(f,function(j){return j.Name==e.visibleLayers[0]}).BoundingBox[0].extent},g=this.createImageWMSLayer(e,c);t(g)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="geoserver-wms")return new Promise((t,r)=>{G().ajax({url:e.url+"?Request=getCapabilities",type:"GET",success:s=>{let f=new Ae.Z().read(s).Capability.Layer.Layer,c={initExtent:(0,V.sE)(f,function(j){return j.Name==e.visibleLayers[0]}).BoundingBox[0].extent},g=this.createImageWMSLayer(e,c);t(g)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="tdt")return new Promise((t,r)=>{G().ajax({url:e.url+(e.url.indexOf("?")==-1?"?":"&")+"SERVICE=WMTS&Request=getCapabilities&version=1.0.0"+(0,$.GW)(),type:"GET",success:s=>{let l={CapabilitiesXml:s},u=this.createTDTLayer(e,l);t(u)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="dynamic")return new Promise((t,r)=>{G().ajax({url:e.url+"?f=json",type:"GET",success:s=>{let l="";(typeof s).toLowerCase()==="string"?l=JSON.parse(s):l=s;let u=[],f="EPSG:"+l.fullExtent.spatialReference.wkid;u.push(l.fullExtent.xmin,l.fullExtent.ymin,l.fullExtent.xmax,l.fullExtent.ymax);let p={projCode:f,initExtent:(0,n.transformExtent)(u,f,"EPSG:4326")},E=this.createArcGISDynamicLayer(e,p);t(E)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="feature")return new Promise((t,r)=>{G().ajax({url:e.url+"?f=json",type:"GET",success:s=>{let l="";(typeof s).toLowerCase()==="string"?l=JSON.parse(s):l=s;let u=[],f="EPSG:"+l.initialExtent.spatialReference.wkid;u.push(l.initialExtent.xmin,l.initialExtent.ymin,l.initialExtent.xmax,l.initialExtent.ymax);let p={projCode:f,initExtent:(0,n.transformExtent)(u,f,"EPSG:4326")},E=this.createArcGISFeatureLayer(e,p);t(E)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="geoserver-wfs")return new Promise((t,r)=>{G().ajax({url:e.url+"?Request=getCapabilities",type:"GET",success:s=>{let l=s.getElementsByTagName("FeatureTypeList")[0].children,u;for(let c=0,g=l.length;c<g;c++){for(let j=0,_=l[c].children.length;j<_;j++)if(l[c].children[j].nodeName=="Name"&&l[c].children[j].innerHTML==e.visibleLayers[0]){u=l[c];break}if(u)break}let f=[];if(u){for(let c=0,g=u.children.length;c<g;c++)if(u.children[c].nodeName=="ows:WGS84BoundingBox"){let j=u.children[c].children[0].innerHTML.split(" "),_=u.children[c].children[1].innerHTML.split(" ");f=[Number(j[0]),Number(j[1]),Number(_[0]),Number(_[1])];break}}let p={initExtent:f},E=this.createGeoServerWFSLayer(e,p);t(E)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="geoserver-wmts")return new Promise((t,r)=>{G().ajax({url:e.url+"?service=WMTS&Request=getCapabilities",type:"GET",success:s=>{let l={CapabilitiesXml:s},u=this.createWMTSLayer(e,l);t(u)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="wmts")return new Promise((t,r)=>{G().ajax({url:e.url+"?service=WMTS&Request=getCapabilities",type:"GET",success:s=>{let l={CapabilitiesXml:s},u=this.createArcGISWMTSLayer(e,l);t(u)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="arcgis-wfs")return new Promise((t,r)=>{G().ajax({url:e.url+"?service=WFS&Request=getCapabilities",type:"GET",success:s=>{let u=(0,$.WU)(s).getElementsByTagName("wfs:FeatureTypeList")[0].children,f;for(let g=0,j=u.length;g<j;g++){for(let _=0,L=u[g].children.length;_<L;_++)if(u[g].children[_].nodeName=="wfs:Name"&&u[g].children[_].innerHTML==e.visibleLayers[0]){f=u[g];break}if(f)break}let p=[];for(let g=0,j=f.children.length;g<j;g++)if(f.children[g].nodeName=="ows:WGS84BoundingBox"){let _=f.children[g].children[0].innerHTML.split(" "),L=f.children[g].children[1].innerHTML.split(" ");p=[Number(_[0]),Number(_[1]),Number(L[0]),Number(L[1])];break}let E={initExtent:p},c=this.createArcGISWFSLayer(e,E);t(c)},error:s=>{B.log(s),r('\u56FE\u5C42"'+e.label+'"\u52A0\u8F7D\u5931\u8D25,\u8BF7\u68C0\u67E5\u914D\u7F6E\u662F\u5426\u6B63\u786E!')}})});if(e.type=="gaode")return new Promise(t=>{let r=this.createGaoDeLayer(e);t(r)})}createArcGISTileLayer(e,t){let r=new z.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,initExtent:t.initExtent,minResolution:e.minResolution,maxResolution:e.maxResolution?e.maxResolution:t.resolutions[0]*2,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new me.Z({projection:t.projCode,crossOrigin:"anonymous",declutter:!0,tileGrid:new Ee.default({extent:t.extent,origin:t.origin,resolutions:t.resolutions,tileSize:t.tileSize}),url:e.url+t.extUrl})});if(e.callback){let s=e.callback;r.once("postcompose",()=>{s()})}return r}createGeoServerTMSLayer(e,t){let r=new z.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,initExtent:t.initExtent,minResolution:e.minResolution,maxResolution:e.maxResolution?e.maxResolution:t.resolutions[0]*2,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new me.Z({projection:t.projCode,crossOrigin:"anonymous",declutter:!0,tileGrid:new Ee.default({extent:t.extent,resolutions:t.resolutions,tileSize:t.tileSize}),url:e.url+t.extUrl})});if(e.callback){let s=e.callback;r.once("postcompose",()=>{s()})}return r}createGeoServerVectorTileLayer(e,t){this.idProp=e.idProp;let r=new ge.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,initExtent:t.initExtent,minResolution:e.minResolution,maxResolution:e.maxResolution?e.maxResolution:t.resolutions[0]*2,isFit:typeof e.isFit=="boolean"?e.isFit:!0,declutter:!0,source:new Lt.default({projection:t.projCode,crossOrigin:"anonymous",format:new bt.Z,tileGrid:new Ee.default({extent:t.extent,resolutions:t.resolutions,tileSize:t.tileSize}),url:e.url+t.extUrl})});if(e.callback){let s=e.callback;r.once("postcompose",()=>{s()})}return r}createImageWMSLayer(e,t){let r=new he.Z({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,initExtent:t.initExtent,minResolution:e.minResolution,maxResolution:e.maxResolution,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new Ze.Z({crossOrigin:"anonymous",url:e.url,params:{LAYERS:e.visibleLayers,VERSION:"1.1.0"}})});if(e.callback){let s=e.callback;r.once("postcompose",()=>{s()})}return r}createTDTLayer(e,t){let r=[],l=new ye.Z().read(t.CapabilitiesXml),u=l.Contents.Layer;r=(0,V.sE)(u,function(c){return c.Identifier==e.visibleLayers}).WGS84BoundingBox;let p=(0,J.B)(l,{layer:e.visibleLayers});for(let c=0;c<p.tileGrid.origins_.length;c++)p.tileGrid.origins_[c].reverse();if(p.crossOrigin="anonymous",e.url.indexOf("?tk=")>-1){let c=new Array,g=new Array;for(let j=1;j<19;++j)c[j]=(0,xe.getWidth)(r)/p.tileGrid.tileSizes_[j-1]/Math.pow(2,j),g[j]=j;p.tileGrid.extent_=r,p.tileGrid.resolutions_=c,p.tileGrid.matrixIds_=g,p.urls[0]=e.url+"&"+(0,$.GW)()}let E=new z.default({id:e.id,layerTag:e.layerTag,opacity:1,initExtent:r,zIndex:e.mapIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new J.Z(p)});if(e.callback){let c=e.callback;E.once("postcompose",()=>{c()})}return E}createArcGISDynamicLayer(e,t){let r=new he.Z({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,initExtent:t.initExtent,minResolution:e.minResolution,maxResolution:e.maxResolution,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new vt.Z({crossOrigin:"anonymous",url:e.url,params:{LAYERS:e.visibleLayers}})});if(e.callback){let s=e.callback;r.once("postcompose",()=>{s()})}return r}createArcGISFeatureLayer(e,t){let r=new Fe.Z,s=new Y.default({loader:function(u,f,p){let E=e.url+"/"+e.visibleLayers+"/query/?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+u[0]+',"ymin":'+u[1]+',"xmax":'+u[2]+',"ymax":'+u[3]+',"spatialReference":{"wkid":102100}}')+"&geometryType=esriGeometryEnvelope&inSR=102100&outFields=*&outSR=102100";G().ajax({url:E,dataType:"jsonp",success:function(c){if(c.error)B.log(E),B.log(c.error.message+`
`+c.error.details.join(`
`));else{let g=r.readFeatures(c,{featureProjection:p});g.length>0&&s.addFeatures(g)}}})},strategy:(0,Se.Gg)((0,Mt.dl)({tileSize:512}))}),l=new X.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,initExtent:t.initExtent,minResolution:e.minResolution,maxResolution:e.maxResolution,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:s});if(e.callback){let u=e.callback;l.once("postcompose",()=>{u()})}return l}createGeoServerWFSLayer(e,t){let r=new X.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,initExtent:t.initExtent,minResolution:e.minResolution,maxResolution:e.maxResolution,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new Y.default({format:new pe.default,url:s=>e.url+"?service=WFS&version=1.1.0&request=GetFeature&typename="+e.visibleLayers+"&outputFormat=application/json&srsname="+this.map.getView().getProjection().getCode()+"&bbox="+s.join(",")+","+this.map.getView().getProjection().getCode(),strategy:Se.VW})});if(e.callback){let s=e.callback;r.once("postcompose",()=>{s()})}return r}createArcGISWMTSLayer(e,t){let s=new ye.Z().read(t.CapabilitiesXml),l=(0,J.B)(s,{layer:e.visibleLayers}),u=e.extent?e.extent:l.tileGrid.extent_,f=new J.Z({url:e.url,layer:e.visibleLayers?e.visibleLayers:l.layer,matrixSet:l.matrixSet,format:l.format,projection:l.projection.code_,tileGrid:new Tt.Z({origin:e.origin?e.origin:[l.tileGrid.origins_[0][1],l.tileGrid.origins_[0][0]],resolutions:e.resolutions?e.resolutions:l.tileGrid.resolutions_,matrixIds:e.matrixIds?e.matrixIds:l.tileGrid.matrixIds_,extent:u}),style:l.style,wrapX:!0,tileLoadFunction:function(E,c){c.indexOf("wmts/&")!=-1?c=c.replace("wmts/&","wmts?"):c.indexOf("wmts&")!=-1&&(c=c.replace("wmts&","wmts?")),c+="&ServiceMode=KVP",E.getImage().src=c}});return new z.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,source:f,isFit:typeof e.isFit=="boolean"?e.isFit:!0,extent:u,initExtent:u})}createWMTSLayer(e,t){let r=[],l=new ye.Z().read(t.CapabilitiesXml),u=(0,J.B)(l,{layer:e.visibleLayers}),f=new z.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,minResolution:e.minResolution,maxResolution:e.maxResolution?e.maxResolution:u.tileGrid.resolutions_[0]*2,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new J.Z(u)});if(f.getSource().getTileGrid().extent_)r=f.getSource().getTileGrid().extent_;else{let p=new DOMParser().parseFromString(t.CapabilitiesXml,"text/xml"),E=G()(p).find("Layer"),c;for(let A=0;A<E.length&&(G()(E[A]).children("ows\\:Identifier")[0].innerHTML==e.visibleLayers[0]&&(c=G()(E[A]).children("TileMatrixSetLink").children("TileMatrixSet")[0].innerHTML),!c);A++);let g=f.getSource().getTileGrid().origins_[0],j=f.getSource().getTileGrid().resolutions_[0],_=l.Contents.TileMatrixSet,L=(0,V.sE)(_,function(A){return A.Identifier==c}),v=L.TileMatrix[0].MatrixHeight,F=L.TileMatrix[0].MatrixWidth,Z=L.TileMatrix[0].TileWidth,D=L.TileMatrix[0].TileHeight;r=[g[0],g[1]-j*v*D,g[0]+j*F*Z,g[1]]}if(f.set("initExtent",r),e.callback){let p=e.callback;f.once("postcompose",()=>{p()})}return f}createArcGISWFSLayer(e,t){let r=new X.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,initExtent:t.initExtent,minResolution:e.minResolution,maxResolution:e.maxResolution,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new Y.default({format:new Ct.Z,url:s=>e.url+"?service=WFS&version=1.1.0&request=GetFeature&typename="+e.visibleLayers+"&outputFormat=gml3&srsname="+this.map.getView().getProjection().getCode()+"&bbox="+s.join(",")+","+this.map.getView().getProjection().getCode(),strategy:Se.VW})});if(e.callback){let s=e.callback;r.once("postcompose",()=>{s()})}return r}createGaoDeLayer(e){let t=new z.default({id:e.id,layerTag:e.layerTag,opacity:e.opacity,zIndex:e.mapIndex,isFit:typeof e.isFit=="boolean"?e.isFit:!0,source:new me.Z({crossOrigin:"anonymous",url:e.url})});if(t.set("initExtent",[1321164626079204e-8,323406052002823e-8,13621322113586534e-9,3604259406967655e-9]),e.callback){let r=e.callback;t.once("postcompose",()=>{r()})}return t}}var Oe=wt;class It{constructor(e){this.map=e,this.idProp=void 0,this.visualizationLayer=void 0,this.tildLayer=[],this.layerGenerater=new Oe(e)}addLayer(e){this.layerGenerater.generate(e).then(t=>{this.addLayerToMap(t)}).catch(t=>{(0,k.Message)({message:t,type:"error"})})}addMapvLayer(e){this.remomeVisualizationLayer(),this.map.addLayer(e),this.visualizationLayer=e}removeLayer(e){let t=this.map.getLayerById(e.id);if(t instanceof z.default){for(let r=0,s=this.tildLayer.length;r<s;r++)if(t===this.tildLayer[r]){this.tildLayer.splice(r,1);break}if(this.tildLayer.length>0){let r=[],s=[];this.tildLayer.forEach(l=>{r.push(l.getSource().tileGrid.minZoom),s.push(l.getSource().tileGrid.maxZoom)}),r.sort(function(l,u){return l-u}),s.sort(function(l,u){return u-l}),this.setMinAndMaxZoom(r[0],s[0])}else this.setMinAndMaxZoom(0,28)}this.map.removeLayer(t)}addLayerToMap(e){if(e instanceof z.default||e instanceof ge.default){let t=e.getSource().getProjection().getCode()==="EPSG:900913"||e.getSource().getProjection().getCode()==="EPSG:102100"||e.getSource().getProjection().getCode()==="EPSG:102113"?"EPSG:3857":e.getSource().getProjection().getCode();if(this.map.getView().getProjection().getCode()===t)this.map.addLayer(e),this.setMinAndMaxZoom(e.getSource().tileGrid.minZoom,e.getSource().tileGrid.maxZoom),this.tildLayer.push(e),e.get("isFit")&&this.fitToLayer(e);else if(this.tildLayer.length>0){for(let r=0;r<this.tildLayer.length;r++)T.Z.$emit("setLayerChecked",this.tildLayer[r].get("id"),!1);this.changeMapProjection(e.getSource().getProjection()),this.map.getView().setMaxZoom(e.getSource().tileGrid.maxZoom),this.map.addLayer(e),this.setMinAndMaxZoom(e.getSource().tileGrid.minZoom,e.getSource().tileGrid.maxZoom),this.tildLayer.push(e),e.get("isFit")&&this.fitToLayer(e)}else this.changeMapProjection(e.getSource().getProjection()),this.map.getView().setMaxZoom(e.getSource().tileGrid.maxZoom),this.map.addLayer(e),this.setMinAndMaxZoom(e.getSource().tileGrid.minZoom,e.getSource().tileGrid.maxZoom),this.tildLayer.push(e),e.get("isFit")&&this.fitToLayer(e)}else this.map.addLayer(e),e.get("isFit")&&e.get("initExtent")&&this.fitToLayer(e)}fitToLayer(e){e instanceof z.default||e instanceof ge.default?(this.map.getView().fit(e.get("initExtent"),this.map.getSize()),this.map.getView().getResolutionForExtent(e.get("initExtent")>e.getMaxResolution()/2)&&this.map.getView().setResolution(e.getMaxResolution()/2)):this.map.getView().fit((0,n.transformExtent)(e.get("initExtent"),"EPSG:4326",this.map.getView().getProjection().getCode()),this.map.getSize())}setMinAndMaxZoom(e,t){(this.tildLayer.length<=0||this.map.getView().getMinZoom()>e)&&this.map.getView().setMinZoom(e),(this.tildLayer.length<=0||this.map.getView().getMaxZoom()<t)&&this.map.getView().setMaxZoom(t)}changeMapProjection(e){let t=this.map.getView().getMinZoom(),r=this.map.getView().getMaxZoom();this.map.setView(new Pe.ZP({projection:e,minZoom:t,maxZoom:r})),T.Z.$emit("mapProjectionChange",e)}changeLayerIndex(e,t,r){let s;r==="before"?s=this.map.getLayerById(t.id).getZIndex()+.01:r==="after"&&(s=this.map.getLayerById(t.id).getZIndex()-.01),this.map.getLayerById(e.id).setZIndex(s)}changeLayerOpacity(e){this.map.getLayerById(e.id)&&this.map.getLayerById(e.id).setOpacity(e.opacity)}}var Ft=It,Rt=a(869787),kt=a.n(Rt),ae=a(149500);class Zt{constructor(e,t,r,s){this.map=e,this.layerTag=r,this.where=s,this.configManager=t,this.layerInfo={}}init(){this.getTargetLayer().then(e=>{this.filterLayer(e)}).catch(e=>{ae.log(e)})}getTargetLayer(){let e;return new Promise((t,r)=>{this.layerInfo=(0,V.sE)(this.configManager.getlayersConfig(),s=>s.layerTag===this.layerTag),e=this.targetLayerIsExist(),e?t(e):T.Z.$emit("setLayerChecked",this.layerInfo.id,!0,()=>{e=this.targetLayerIsExist(),e?t(e):r(new Error("\u672A\u627E\u5230\u56FE\u5C42\u6807\u8BC6\u4E3A:"+this.layerTag+"\u7684\u56FE\u5C42"))})})}targetLayerIsExist(){let e;this.mapLayers=this.map.getLayers().getArray();for(let t=0;t<this.mapLayers.length;t++){const r=this.mapLayers[t];if(r.get("layerTag")&&r.get("layerTag")===this.layerTag){e=r;break}}return e}filterLayer(e){switch(this.layerInfo.type){case"geoserver-wms":{e.getSource().updateParams({CQL_FILTER:this.where}),this.fitToLayer(e,!0);break}default:ae.error("\u4E0D\u652F\u6301\u6539\u7C7B\u578B\u56FE\u5C42\u8FC7\u6EE4");break}}fitToLayer(){let e=[];for(let t=0;t<this.layerInfo.visibleLayers.length;t++)e.push(new Promise((r,s)=>{let l=this.layerInfo.identifyField[0].lyr+"/"+this.layerInfo.visibleLayers[t].split(":")[0]+"/wfs",u={service:"wfs",version:"1.1.0",request:"GetFeature",typeName:this.layerInfo.visibleLayers[t],outputFormat:"application/json"};G().ajax({url:l,type:"POST",data:kt().stringify(u),success:f=>{r(f)},error:f=>{s(f)}})}));Promise.all(e).then(t=>{ae.log(t);let r=new pe.default,s;if(t.forEach((l,u)=>{l.features.forEach((f,p)=>{let E=r.readFeature(f);u===0&&p===0?s=E.getGeometry().getExtent():s=(0,xe.extend)(s,E.getGeometry().getExtent())})}),s){let l=this.map.getView().getResolutionForExtent(s);this.map.getView().animate({center:(0,xe.getCenter)(s),resolution:l})}}).catch(t=>{ae.log(t)})}}var At=Zt;class Ot{constructor(){this.bubbleChart}addLayerById(e,t){T.Z.$emit("setLayerChecked",e,!0,t)}removeLayerById(e){T.Z.$emit("setLayerChecked",e,!1)}addTargetLayer(e){this.setLayerIsChecked(e,!0)}removeTargetLayer(e){this.setLayerIsChecked(e,!1)}removeBubble(e){let t=this;this.bubbleChart?this.bubbleChart.clearBubble():a.e(35387).then(a.bind(a,937531)).then(r=>{this.bubbleChart=new r.default(t,e),this.bubbleChart.clearBubble()})}removeScatter(e){let t=this;this.scatterChart?this.scatterChart.clearscatter():a.e(74477).then(a.bind(a,574477)).then(r=>{this.scatterChart=new r.default(t,e),this.scatterChart.clearscatter()})}addShowMap(e,t,r){let s=this;e.mode=="bubble"?this.bubbleChart?this.bubbleChart.initBubble(e):a.e(35387).then(a.bind(a,937531)).then(l=>{this.bubbleChart=new l.default(s,t),this.bubbleChart.initBubble(e),this.bubbleChart.addOnClickListener(r)}):e.mode=="scatter"?this.scatterChart?this.scatterChart.initscatter(e,t):a.e(74477).then(a.bind(a,574477)).then(l=>{this.scatterChart=new l.default(s),this.scatterChart.initscatter(e,t)}):Promise.all([a.e(35776),a.e(7715),a.e(4501)]).then(a.bind(a,704501)).then(l=>{new l.default(s,e,t).initChart()})}addHeatMap(e,t){Promise.all([a.e(56828),a.e(8647)]).then(a.bind(a,908647)).then(r=>{new r.default(this.map,e,t).initHeat()})}mapFilter(e,t){this.layerFilter=new At(this.map,this.configManager,e,t),this.layerFilter.init()}}var Nt=Ot;class Bt extends Nt{constructor(e){super(),this.mapInitialized=!1,this.options=Object.assign({},e),this.target=e.target,this.configManager=e.configManager,this.map=this.createMap(),this.linkMap=[],this.interactionManager=new Gt(this.map),this.layerManager=new Ft(this.map)}createMap(){let e=new Ve({target:this.target,layers:[new X.default({id:"drawLayer",zIndex:999999,source:new Y.default,style:new b.ZP({fill:new C.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new N.Z({color:"#ffcc33",width:2}),image:new S.Z({radius:7,fill:new C.Z({color:"#ffcc33"})})})}),new X.default({id:"localLayer",zIndex:999999,source:new Y.default,style:new b.ZP({fill:new C.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new N.Z({color:"#ffcc33",width:2}),image:new S.Z({radius:7,fill:new C.Z({color:"#ffcc33"})})})})],view:new Pe.ZP({center:this.options.center?this.options.center:[103,30],zoom:this.options.zoom?this.options.zoom:4,projection:this.options.projection?this.options.projection:"EPSG:4490"}),controls:(0,De.ce)({zoom:this.options.controls.zoom,zoomOptions:{className:"ol-zoomPosition"}})});if(this.options.controls.mousePosition){let t=new Ye({className:"mousePosition",coordinateFormat:(0,rt.Fj)(4)});e.addControl(t)}if(this.options.controls.scaleLine){let t=new Qe;e.addControl(t)}return e.getInteractions().forEach(t=>{t instanceof qe.Z&&!this.options.interaction.mouseWheelZoom&&t.setActive(!1),t instanceof et.Z&&!this.options.interaction.doubleClickZoom&&t.setActive(!1),t instanceof tt.Z&&!this.options.interaction.dragPan&&t.setActive(!1)}),e.set("params",this._transformMapOption(Object.assign({},this.options.mapOption))),e.once("postcompose",()=>{window.shinemap=this,this.mapInitialized=!0,T.Z.$emit("mapInitialized",this)}),e}_transformMapOption(e){let t={};return t.uesrId=(e.uesrId,e.uesrId),t.editBlockGuid=e.editBlockGuid?e.editBlockGuid:e.dkGuid,t.editProjectGuid=e.editProjectGuid?e.editProjectGuid:e.xmGuid,e.blockAttributes?t.blockAttributes=e.blockAttributes:e.keyField&&e.keyField.split(",").length>0&&e.keyField.split(",").length===e.keyValue.split(",").length&&e.keyField.split(",").forEach((r,s)=>{t.blockAttributes[r]=e.keyValue.split(",")[s]}),t.editLayertag=e.editLayertag?e.editLayertag:e.xm,t.editRoot=e.editRoot?e.editRoot:e.editRole,t.identifyPopupIsShow=e.identifyPopupIsShow!==void 0?e.identifyPopupIsShow:e.showInfoWindow!==void 0?e.showInfoWindow:!0,t.regionExtent=e.regionExtent?e.regionExtent:e.xzq,t.logoIsShow=e.logoIsShow!==void 0?e.logoIsShow:e.hideLogo?e.hideLogo===0:!0,t.isHideHeader=e.isHideHeader?e.isHideHeader:!1,t.solutionId=e.solutionId,t}_addCheckedLayers(e){let t=this.map.getCheckedLayers();if(t.length===0)t.push(e);else for(let r=0,s=t.length;r<s;r++){if(e.mapIndex>=t[r].mapIndex){t.splice(r,0,e);break}r===t.length-1&&t.push(e)}this.layerManager.addLayer(e)}_removeCheckedLayers(e){let t=this.map.getCheckedLayers();for(let r=0,s=t.length;r<s;r++)if(t[r].id===e.id){t.splice(r,1),this.layerManager.removeLayer(e);break}}addLinkMap(e){if(this.linkMap.length>=3)return(0,k.Message)({message:"\u6700\u591A\u53EA\u80FD\u8054\u52A8\u56DB\u4E2A\u7A97\u53E3",type:"warning"});{let t=(0,$.GW)();new Oe(this.map).generate(e).then(s=>{let l=new W.Z({layers:[s],view:this.map.getView()});l.set("mapTarget",t),this.linkMap.push(l)})}}removeLinkMap(e){for(let t=0;t<this.linkMap.length;t++)if(this.linkMap[t].get("mapTarget")===e){this.linkMap.splice(t,1);break}}updateSize(){this.map.updateSize(),this.linkMap.forEach(e=>{e.updateSize()})}setLayerIsChecked(e,t){if(e.id)T.Z.$emit("setLayerChecked",e.id,t);else if(e.layerTag){let r=this.configManager.config.toc;if(r&&r.length>0){let s=null;for(let l=0;l<r.length;l++){let u=r[l];if(u.layerTag===e.layerTag){s=u;break}}T.Z.$emit("setLayerChecked",s.id,t)}else throw new Error("\u672A\u627E\u5230layerTag\u4E3A'"+e.layerTag+"'\u7684\u56FE\u5C42")}!t&&this.map.getCurrentEditLayer()&&(this.map.getCurrentEditLayer().id===e.id||this.map.getCurrentEditLayer().layerTag===e.layerTag)&&this.map.clearCurrentEditLayer()}}},130798:function(H,O,a){var k=a(42160);O.Z=new k.default},33288:function(H,O,a){a.d(O,{GW:function(){return W},WU:function(){return k}});function k(T){let I;return window.DOMParser?I=new DOMParser().parseFromString(T,"text/xml"):(I=new ActiveXObject("Microsoft.XMLDOM"),I.async="false",I.loadXML(T)),I}function W(){for(var T="",I=1;I<=32;I++){var G=Math.floor(Math.random()*16).toString(16);T+=G,(I==8||I==12||I==16||I==20)&&(T+="-")}return T}function M(T,I){return"rgba("+parseInt("0x"+T.slice(1,3))+","+parseInt("0x"+T.slice(3,5))+","+parseInt("0x"+T.slice(5,7))+","+I+")"}},583258:function(H,O,a){a.r(O);var k=a(653183),W=a.n(k);(function(M,T,I){var G=M([]),C=M.resize=M.extend(M.resize,{}),N,b="setTimeout",S="resize",m=S+"-special-event",n="delay",y="throttleWindow";C[n]=250,C[y]=!0,M.event.special[S]={setup:function(){if(!C[y]&&this[b])return!1;var x=M(this);G=G.add(x),M.data(this,m,{w:x.width(),h:x.height()}),G.length===1&&h()},teardown:function(){if(!C[y]&&this[b])return!1;var x=M(this);G=G.not(x),x.removeData(m),G.length||clearTimeout(N)},add:function(x){if(!C[y]&&this[b])return!1;var w;function P(R,ie,se){var ue=M(this),ne=M.data(this,m);ne.w=ie!==I?ie:ue.width(),ne.h=se!==I?se:ue.height(),w.apply(this,arguments)}if(M.isFunction(x))return w=x,P;w=x.handler,x.handler=P}};function h(){N=T[b](function(){G.each(function(){var x=M(this),w=x.width(),P=x.height(),R=M.data(this,m);(w!==R.w||P!==R.h)&&x.trigger(S,[R.w=w,R.h=P])}),h()},C[n])}})(W(),window)},945984:function(H,O){const a={title:"\u81FB\u5584\u79D1\u6280OpenGIS\u56FE\u5F62\u5E73\u53F0",toc:[]};O.Z=a},104840:function(H,O,a){a.d(O,{Z:function(){return S}});var k=function(){var n=this,y=n._self._c;return y("div",{attrs:{id:"LayerMenu"}},[y("el-card",{staticClass:"box-card"},[y("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[y("el-button",{staticStyle:{float:"left"},attrs:{icon:"el-icon-close",size:"mini",circle:""},on:{click:n.closeWindow}}),y("span",[n._v("\u56FE\u5C42\u5217\u8868")]),y("el-button",{staticStyle:{float:"right"},attrs:{icon:"el-icon-arrow-right",size:"mini",circle:""},on:{click:n.showOther}})],1),y("div",{staticStyle:{overflow:"auto","max-height":"400px"}},[y("el-input",{attrs:{placeholder:"\u641C\u7D22\u56FE\u5C42...",size:"small","prefix-icon":"el-icon-search"},model:{value:n.filterText,callback:function(h){n.filterText=h},expression:"filterText"}}),y("el-tree",{ref:"tree",attrs:{data:n.treeData,"show-checkbox":"","node-key":"id","default-expanded-keys":[1],"default-checked-keys":n.defaultCheck,props:n.defaultProps,"render-after-expand":!1,"filter-node-method":n.filterNode},on:{"check-change":n.treeNodeCheckChange},scopedSlots:n._u([{key:"default",fn:function({node:h,data:x}){return y("span",{staticClass:"custom-tree-node"},[x.group&&x.group==="1"?y("span",[y("i",{staticClass:"el-icon-aliicon-baseLayer"})]):x.group&&x.group==="2"?y("span",[y("i",{staticClass:"el-icon-aliicon-projectLayer"})]):n._e(),y("span",[n._v(n._s(h.label))]),x.group?y("span",{staticClass:"layerMenuIconGroup"},[y("i",{staticClass:"el-icon-share",on:{click:function(w){return n.mapLink(x)}}})]):n._e()])}}])})],1)])],1)},W=[],M=a(653183),T=a.n(M),I=a(130798),G={props:["shinemap"],data(){return{treeToc:[],treeData:[],filterText:"",layerData:[],defaultCheck:[],defaultProps:{children:"children",label:"label"},layerParames:void 0,backToc:{}}},mounted:function(){let m=this,n=this.shinemap.configManager.getConfig();this.treeToc=n.toc;let y="",h=this.shinemap.map.get("params");if(h&&h.solutionId){let w=n.solution;y=T().grep(w,R=>R.id===h.solutionId||R.name===h.solutionId)[0].resourceLayersId}this.treeData=this.treeDataTransform(n.toc,y);let x=JSON.stringify(this.treeData);this.backToc=JSON.parse(x),I.Z.$on("setLayerChecked",(w,P,R)=>{m.layerParames={id:w,checked:P,callback:R},m.$refs&&m.$refs.tree&&m.$refs.tree.setChecked(w,P)})},methods:{removeLayer(){let n=this.shinemap.map.getLayers().getArray();[].concat(n).forEach(h=>{h.get("id")!=="drawLayer"&&h.get("id")!=="localLayer"&&this.shinemap.map.removeLayer(h)})},treeDataTransform(m,n){let y=[],h=[],x=[];m&&m.forEach(P=>{if(P.type){h.push(P);let R=this.getParentNode(m,P);this.parentSearch(m,h,y,R)}}),this.uniqueArray(h),h.sort(this.getSortFun("asc","showIndex"));let w=this.folderCountFunc(y);this.replaceParentLabel(h,w);for(let P=0;P<h.length;P++)if(n?h[P].url&&h[P].url!==""&&n.indexOf(h[P].id)!==-1&&(this.defaultCheck.push(h[P].id),this.shinemap._addCheckedLayers(h[P])):h[P].url&&h[P].url!==""&&(h[P].initChecked===!0||h[P].initChecked==="true")&&(this.defaultCheck.push(h[P].id),this.shinemap._addCheckedLayers(h[P])),h[P].id==="P6F2D955F5A84BA882CC7B645974376C")h.splice(P,1),P--;else if(h[P].parent==="P6F2D955F5A84BA882CC7B645974376C"){let R=h[P];R.children=[],x.push(R),h.splice(P,1),P--}return this.dataTransform(h,x),x},filterNode(m,n){return m?n.label.indexOf(m)!==-1:!0},treeNodeCheckChange(m,n){if(m.url&&m.url!=="")if(n){let y=m;this.layerParames&&this.layerParames.id===y.id&&this.layerParames.checked===n&&(y.callback=this.layerParames.callback,this.layerParames=void 0),this.shinemap._addCheckedLayers(y)}else this.shinemap._removeCheckedLayers(m)},getParentNode(m,n){return T()(m).filter((h,x)=>x.id===n.parent&&!x.type)},parentSearch(m,n,y,h){if(h.length>0){if(h[0].id==="P6F2D955F5A84BA882CC7B645974376C")return;n.push(h[0]),y.push(h[0]),h=this.getParentNode(m,h[0]),this.parentSearch(m,n,y,h)}},folderCountFunc(m){let n=[],y={};m.forEach(h=>{y[h.id]?y[h.id]++:y[h.id]=1});for(let h in y)n.push({id:h,count:y[h]});return n},replaceParentLabel(m,n){n.forEach(y=>{m.forEach(h=>{h.id===y.id&&(h.label=h.label+"("+y.count+")")})})},uniqueArray(m){let n={},y=0,h=m.slice();for(let x=0;x<h.length;x++)n[h[x].id]?m.splice(y,1):(n[h[x].id]=!0,y++)},getSortFun(m,n){let y=m==="asc"?">":"<";return new Function("a","b","return a."+n+y+"b."+n+"?1:-1")},dataTransform(m,n){if(m.length>0&&n.length>0)for(let y=0,h=n.length;y<h;y++){for(let x=0;x<m.length;x++)if(m[x].parent===n[y].id){let w=m[x];w.opacity&&(w.opacity=Number(w.opacity)),w.children=[],n[y].children.push(w),m.splice(x,1),x--}this.dataTransform(m,n[y].children)}},closeWindow(){T()("#LayerMenu").hide(),I.Z.$emit("showBtn","LayerMenu")},showOther(){T()("#LayerMenu").hide(),T()("#LayerController").show()},mapLink(m){this.shinemap.addLinkMap(m)}},watch:{filterText(m){this.$refs.tree.filter(m)}}},C=G,N=a(768141),b=(0,N.Z)(C,k,W,!1,null,"6018f0a6",null),S=b.exports},222276:function(H,O,a){a.r(O),a.d(O,{register:function(){return I}});var k=a(967170),W=a(816658),M=a(390583),T=a(984362);function I(G){var C=Object.keys(G.defs),N=C.length,b,S;for(b=0;b<N;++b){var m=C[b];if(!(0,M.get)(m)){var n=G.defs(m),y=n.units;!y&&n.projName==="longlat"&&(y=W.ZP.DEGREES),(0,M.addProjection)(new k.default({code:m,axisOrientation:n.axis,metersPerUnit:n.to_meter,units:y}))}}for(b=0;b<N;++b){var h=C[b],x=(0,M.get)(h);for(S=0;S<N;++S){var w=C[S],P=(0,M.get)(w);if(!(0,T.U2)(h,w))if(G.defs[h]===G.defs[w])(0,M.addEquivalentProjections)([x,P]);else{var R=G(h,w);(0,M.addCoordinateTransforms)(x,P,(0,M.createSafeCoordinateTransform)(x,P,R.forward),(0,M.createSafeCoordinateTransform)(P,x,R.inverse))}}}}}}]);
