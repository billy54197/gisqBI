"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[1925],{56279:function(w,h,n){n.d(h,{P:function(){return d}});var v=n(86892),r=n(49500);const d={mixins:[v.D],created(){},methods:{lifecycleBeforeChartsLoad(f){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&r.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),r.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let u=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[f]);if(u)return u}return f},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&r.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),r.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},44513:function(w,h,n){n.d(h,{Z:function(){return g}});var v=function(){var i=this,p=i._self._c;return i.attr.buttonHide?p("div",{style:{position:"absolute",right:i.attr.buttonHideRight+"px",top:i.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(x){return i.onHide()}}},[i.openTooltip?p("el-tooltip",{attrs:{"open-delay":1e3,content:i.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[p("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):p("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):i._e()},r=[],d=n(52246),f={props:["attr"],name:"hide-button",data(){return{isPc:d.b}},computed:{openTooltip:function(){let y=!1,i=this.attr.buttonHideTooltipContent;return d.b&&i&&i!=null&&i.trim()!=""&&(y=!0),y}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},m=f,u=n(68141),b=(0,u.Z)(m,v,r,!1,null,"bf399b9a",null),g=b.exports},70606:function(w,h,n){n.r(h),n.d(h,{default:function(){return S}});var v=function(){var e=this,s=e._self._c;return s("div",{ref:"pictureSingle",style:e.style},[s("hide-button",{attrs:{attr:e.widgetInfo.attr}}),e.flag?s("LivePlayer",{ref:"livePlayer",staticClass:"my-livePlayer",attrs:{videoUrl:e.src,autoplay:e.widgetInfo.config.autoplay,controls:e.widgetInfo.config.controls,muted:e.widgetInfo.config.muted,loop:e.widgetInfo.config.loop,stretch:e.widgetInfo.config.stretch,aspect:"fullscreen",fluent:"",live:""},on:{snapOutside:e.snapOutside}}):e._e()],1)},r=[],d=n(21300),f=n(44513),m=n(6061),u=n(45061),b=n(56279),g=n(27966),y=n(48836),i=n(49500),p={props:["widgetInfo"],name:"video-single",async beforeCreate(){await d.registerScript("./js/liveplayer-lib.min.js").then(()=>{this.flag=!0})},components:{HideButton:f.Z,LivePlayer:()=>n.e(430).then(n.t.bind(n,26806,23))},mixins:[m.u,u.u,b.P],data(){return{flag:!1,style:{},src:""}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.getStyle(this.widgetInfo),this.$emit("attrChange",this.widgetInfo)}},methods:{...(0,y.nv)(["addChildInitFinish"]),loadInfo(t){this.getStyle(t),this.lifecycleAfterLoad()},reLoadInfo(t){this.loadInfo(t)},snap:function(){this.$refs.livePlayer.snap()},snapOutside:function(t){i.log(t)},initAction(t){i.info(t),this.actionReceiveInit(t)},actionReceiveInit(t){t.action==null||t.action.receive==null||(this.doReceive(t),this.addChildInitFinish(),this.actionReceive(t))},doReceive(t){t.action&&t.action.receive&&t.action.receive.play&&t.action.receive.play.enabled&&t.action.receive.play.playList&&t.action.receive.play.playList.length>0&&this.doPlay(t.action.receive.play.playList,t.action.receive.play.value),t.action&&t.action.receive&&t.action.receive.pause&&t.action.receive.pause.enabled&&t.action.receive.pause.pauseList&&t.action.receive.pause.pauseList.length>0&&this.doPause(t.action.receive.pause.pauseList,t.action.receive.pause.value),t.action&&t.action.receive&&t.action.receive.receiveSrc&&t.action.receive.receiveSrc.enabled&&t.action.receive.receiveSrc.receiveSrcList&&t.action.receive.receiveSrc.receiveSrcList.length>0&&this.doReceiveSrc(t.action.receive.receiveSrc.receiveSrcList)},doPlay(t,e){let s=this;this.$$lib__.each(t,a=>{let o=a[0][1]+"_"+a[0][0];a[0][1].indexOf("_")>-1&&(o=a[0][1]),g.Z.$on(o,l=>{if(e==null||e==""||e==null)s.doAction(!0);else{let c=a[0][2],I=c.indexOf("|");I>-1&&(c=a[0][2].substring(I+1)),e==l[c]&&s.doAction(!0)}})})},doPause(t,e){let s=this;this.$$lib__.each(t,a=>{let o=a[0][1]+"_"+a[0][0];a[0][1]&&a[0][1].indexOf("_")>-1&&(o=a[0][1]),g.Z.$on(o,l=>{if(e==null||e==""||e==null)s.doAction(!1);else{let c=a[0][2],I=c.indexOf("|");I>-1&&(c=a[0][2].substring(I+1)),e==l[c]&&s.doAction(!1)}})})},doReceiveSrc(t){let e=this;this.$$lib__.each(t,s=>{let a=s[0][1]+"_"+s[0][0];s[0][1].indexOf("_")>-1&&(a=s[0][1]),i.info(a),g.Z.$on(a,o=>{i.info(o);let l=s[0][2],c=l.indexOf("|");c>-1&&(l=s[0][2].substring(c+1)),o[l].indexOf("http")==-1?e.src=this.getImageUrl(o[l]):e.src=o[l]})})},doAction(t){let e=this.$refs.livePlayer;t?e&&e.play():e&&e.pause()},getStyle(t){if(this.style={width:t.attr.w+"px",height:t.attr.hh+"px",display:t.attr.hide==!0?"none":"",opacity:t.config.opacity,position:"relative"},t.dataset[t.dataset.type].encode&&t.dataset[t.dataset.type].encode.url){let e=this.getData(t.dataset[t.dataset.type].encode,t.dataset[t.dataset.type].dimensions,t.dataset[t.dataset.type].source);this.src=this.getImageUrl(e)}else this.src=this.getImageUrl(t.config.src)?this.getImageUrl(t.config.src):""},getData(t,e,s){let a=-1;for(let o=0;o<e.length;o++)if(e[o]==t.url){a=o;break}return s[0]?s[0][a]:""},getImageUrl(t){if(t&&t!="")return d.appendImageBaseURL(t)}}},x=p,L=n(68141),C=(0,L.Z)(x,v,r,!1,null,"487cf3fe",null),S=C.exports}}]);
