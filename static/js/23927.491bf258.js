"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[23927],{56279:function(y,f,o){o.d(f,{P:function(){return a}});var c=o(386892),l=o(149500);const a={mixins:[c.D],created(){},methods:{lifecycleBeforeChartsLoad(h){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&l.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),l.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let p=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[h]);if(p)return p}return h},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&l.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),l.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(y,f,o){o.d(f,{X:function(){return c},b:function(){return l}});let c={versions:function(){var a=navigator.userAgent;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1,iPhone:a.indexOf("iPhone")>-1,iPad:a.indexOf("iPad")>-1,webApp:a.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},l;c.versions.mobile||c.versions.ios||c.versions.android||c.versions.iPhone||c.versions.iPad?l=!1:l=!0},844513:function(y,f,o){o.d(f,{Z:function(){return C}});var c=function(){var n=this,v=n._self._c;return n.attr.buttonHide?v("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(L){return n.onHide()}}},[n.openTooltip?v("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[v("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):v("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},l=[],a=o(752246),h={props:["attr"],name:"hide-button",data(){return{isPc:a.b}},computed:{openTooltip:function(){let m=!1,n=this.attr.buttonHideTooltipContent;return a.b&&n&&n!=null&&n.trim()!=""&&(m=!0),m}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},w=h,p=o(768141),b=(0,p.Z)(w,c,l,!1,null,"bf399b9a",null),C=b.exports},623927:function(y,f,o){o.r(f),o.d(f,{default:function(){return $}});var c=function(){var s=this,i=s._self._c;return i("div",{ref:"svg",style:s.containerStyle},[i("div",{ref:"svgDiv",style:{marginLeft:s.mUtils.getNewPxW(s.widgetInfo.config.global.marginLeft)+"px",marginTop:s.mUtils.getNewPxH(s.widgetInfo.config.global.marginTop)+"px"},domProps:{innerHTML:s._s(s.svgContent)}}),i("hide-button",{attrs:{attr:s.widgetInfo.attr}})],1)},l=[],a=o(844513),h=o(927966),w=o(142196),p=o(445061),b=o(126711),C=o(56279),m=o(555616),n=o(149500),v={name:"PictureSvg",components:{HideButton:a.Z},mixins:[p.u,b.H,C.P,w.baseConfig],props:["widgetInfo"],data(){return{svgSource:[],paramsIndex:"",svgContent:""}},computed:{containerStyle(){let t=this.widgetInfo.config&&this.widgetInfo.config.expandMode?this.widgetInfo.config.expandMode:"hidden",s={width:this.widgetInfo.attr.w+"px",height:this.widgetInfo.attr.hh+"px",overflow:t};return t.startsWith("visible")&&(s.width="auto"),t.endsWith("visible")&&(s.height="auto"),this.$nextTick(()=>{let i=this.$el&&this.$el.parentElement.parentElement.className.indexOf("my-drag-widget")>-1?this.$el.parentElement.parentElement:null;i&&(i.style.overflow=t.indexOf("visible")>-1?"visible":"hidden")}),s}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},created(){window.click=this.onClick},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{loadInfo(t){this.getSvgSource(t),this.lifecycleAfterLoad()},getSvgSource(t){let s=t.dataset[t.dataset.type].encode,i=t.dataset[t.dataset.type].source,r=t.dataset[t.dataset.type].columnList;if(this.svgContent=this.widgetInfo.config.svgStyle.svgContent,s.paramsList.forEach(e=>{let d=this.getIndex(e.val,r);this.replaceParams(i,d,e.key)}),t.action&&t.action.sendOut&&t.action.sendOut.actionList){let e=t.action.sendOut.actionList.find(d=>d.enabled&&d.code==="resize");e&&this.$nextTick(()=>{this.$nextTick(()=>{let d=this.$refs.svgDiv.getBoundingClientRect(),I=e.code+"_"+this.widgetInfo.id,g={height:d.height,width:d.width};if(e.paramsExtend&&e.paramsExtend.length>0){let u=[];this.widgetInfo.dataset[this.widgetInfo.dataset.type].source&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].source.length>0&&(u=this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[0]),this.getExtendParams(g,e.paramsExtend,u,this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(n.log("Execute script for "+this.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){m.Message.warning({message:e.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",e.script.content),g=this.customScript_actionSend_clickParam(g)}h.Z.$emit(I,g,this),this.actionNameList.push(I),e.postMessage&&this.doPostMessage(g)})})}},getIndex(t,s){let i=-1;return s.forEach(r=>{t===r.name&&(i=r.index)}),i},replaceParams(t,s,i){let r=[],e=this;t.forEach(u=>{r.push(u[s])});let d=null;this.widgetInfo.config.svgStyle.defaultTxt==null?d="":d=this.widgetInfo.config.svgStyle.defaultTxt;let I=/\${.*?}/g,g=e.svgContent.match(I);g&&g.forEach(u=>{if(u.split("${")[1].split(",").length>1){let x=u.split("${")[1].split(",")[1].split("}")[0];r[x]==null?e.svgContent=e.svgContent.replace("${"+i+","+x+"}",d):e.svgContent=e.svgContent.replace("${"+i+","+x+"}",r[x])}else r[0]==null?e.svgContent=e.svgContent.replace("${"+i+"}",d):e.svgContent=e.svgContent.replace("${"+i+"}",r[0])})},reLoadInfo(t){this.loadInfo(t)},initAction(t){this.actionSendout(t),this.actionReceive(t)},sendoutClick(t){this.paramsIndex=t},onClick(){let t=this,s=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(s,i=>{if(i.enabled&&i.code==t.$$global_editor.actionType.click.code){let r=t.$$global_editor.actionType.click.code+"_"+t.widgetInfo.id,e={};for(let d in arguments)e["param"+d]=arguments[d];if(n.log(e),i.paramsExtend&&i.paramsExtend.length>0){let d=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(d=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(e,i.paramsExtend,d,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(i.script&&i.script.enabled){if(n.log("Execute script for "+t.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){m.Message.warning({message:i.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",i.script.content),e=this.customScript_actionSend_clickParam(e)}h.Z.$emit(r,e),this.actionNameList.push(r),i.postMessage&&this.doPostMessage(e)}})}}},L=v,S=o(768141),P=(0,S.Z)(L,c,l,!1,null,"36f1f294",null),$=P.exports}}]);
