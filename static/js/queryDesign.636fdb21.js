(function(){"use strict";var ut={8877:function(b,T,c){c.d(T,{_:function(){return m}});const m={props:{attributes:{},control_type:{type:String,default:""}},watch:{attributes:{deep:!0,handler:function(){this.attributes_value=this.attributes}}},mounted(){this.attributes_value=this.attributes},data(){return{attributes_value:{},global_query:this.$$global_query}},methods:{changeAttributes(){this.$emit("changeAttributes",JSON.parse(JSON.stringify(this.attributes_value)))}}}},141272:function(b,T,c){var m=c(42160),$=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%",height:"100%"}},[t("screen",{ref:"design_screen"}),t("login-dialog")],1)},q=[],f=c(234240),B=c(299187),S=c(231954),y=c(927966),w=c(148836),J=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"box",staticClass:"box"},[t("div",{staticClass:"left"},[t("design-view",{ref:"design_view"})],1),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5DE6\u53F3\u6ED1\u52A8\u8C03\u6574\u5927\u5C0F",effect:"light",placement:"top"}},[t("div",{staticClass:"resize"},[e._v(" \u22EE ")])]),t("div",{staticClass:"mid"},[t("design",{ref:"design"})],1)],1)},Z=[],A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"design_cont"},[t("toolbar-design"),t("configure-design",{ref:"configure_design"})],1)},O=[],V=function(){var e=this,t=e._self._c;return t("div",{ref:"myToolbarDesign",staticClass:"my-toolbar-design"},[t("span",{staticClass:"icon_content"},[t("el-tooltip",{attrs:{effect:"light",content:"\u53D1\u5E03",placement:"top"}},[t("span",{staticClass:"iconfont bi_release",style:{color:e.canEdit?"#FFF":e.theme.lockBtn,cursor:e.canEdit?"pointer":"no-drop"},on:{click:function(i){return e.doPublish()}}})]),t("el-tooltip",{attrs:{effect:"light",content:"\u9884\u89C8",placement:"top"}},[t("span",{staticClass:"iconfont bi_view",on:{click:function(i){return e.doPreview()}}})]),t("el-tooltip",{attrs:{effect:"light",placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.editingInfoEditor)},slot:"content"}),t("el-badge",{staticClass:"my-el-badge",attrs:{value:"!",type:"warning",hidden:!e.editingInfo}},[t("span",{staticClass:"iconfont bi_save1",style:{color:e.canEdit?"#FFF":e.theme.lockBtn,cursor:e.canEdit?"pointer":"no-drop"},on:{click:function(i){return e.saveQuery(!0)}}})])],1),t("span",{staticClass:"right-select"},[t("el-dropdown",{on:{command:e.packUpTagChange,"visible-change":e.hideSelect}},[t("el-button",{staticClass:"dropdown-btn"},[t("i",{staticClass:"el-icon-arrow-down el-icon--right iconfont bi_arrowTriangle"})]),t("el-dropdown-menu",{staticClass:"dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.packUpList,function(i){return t("el-dropdown-item",{key:i.id,attrs:{command:i.id}},[t("span",{class:"iconfont "+i.iconfont,staticStyle:{color:"#606266","background-color":"#f6f7fa"}}),t("span",{style:{marginLeft:"6px",color:"#606266"}},[e._v(e._s(i.name))])])}),1)],1)],1)],1),t("query-resources-list",{ref:"queryResourcesList",attrs:{"query-id":e.queryId}}),t("publish-query",{ref:"publishQuery"}),t("data-dialog",{ref:"refDataDialog",attrs:{associativeIds:e.queryConfig.associativeDataset,"hide-tabs":["dialog_dataLocal","dialog_layerDirectory"],"is-associative":!0},on:{changeAssociativeIds:e.changeAssociativeIds}})],1)},K=[],oe=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{staticClass:"data-dialog-dialog setData geoJson layerDirectory fieldEnum dataLocal",attrs:{visible:e.dialog.visible,width:e.dialog.width+"px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(i){return e.$set(e.dialog,"visible",i)},opened:e.dialogOpened}},[t("div",{staticClass:"tab-button-list",attrs:{slot:"title"},slot:"title"},[t("el-radio-group",{attrs:{size:"mini"},model:{value:e.tabsValue,callback:function(i){e.tabsValue=i},expression:"tabsValue"}},e._l(e.radio_list,function(i){return t("el-radio-button",{key:i.id,attrs:{label:i.id}},[e._v(e._s(i.name)+" ")])}),1)],1),t("div",{style:{height:e.dialog.height+"px",width:"100%"}},[e.tabsValue=="dialog_dataSet"?t("data-set",{attrs:{isAssociative:e.isAssociative,associativeIds:e.associativeIds},on:{changeAssociativeIds:e.changeAssociativeIds}}):e._e(),e.tabsValue=="dialog_dataSource"?t("data-source",{attrs:{isDialog:!0}}):e._e(),e.tabsValue=="dialog_imageManage"?t("image-manage",{ref:"imageMange",attrs:{isDialog:!0,isDialogFullscreen:!0,"is-show-select":!1,type:["image","video"]}}):e._e(),e.tabsValue=="dialog_dataLocal"?t("data-local",{attrs:{"is-data-local-dialog":!0}}):e._e(),e.tabsValue=="dialog_fieldEnum"?t("div",[e.isPlatform?t("iframe",{staticClass:"platform-page",style:{height:e.dialog.height+"px",width:"100%"},attrs:{src:e.domain+"#/gisqbiDialog/dictionarySetting?subGuid="+this.editorAppId+"&token="+e.token,frameborder:"0"}}):t("field-enum",{attrs:{isDialog:!0}})],1):e._e(),e.tabsValue=="dialog_resource"?t("resource",{attrs:{isDialog:!0}}):e._e(),e.tabsValue=="dialog_layerDirectory"?t("layer-directory",{attrs:{isDialog:!0}}):e._e(),e.tabsValue=="dialog_iconFontFile"?t("icon-font-file",{attrs:{isDialog:!0,isDialogFullscreen:!0}}):e._e(),e.tabsValue=="dialog_xzqGeojson"?t("xzq-geojson",{attrs:{isDialog:!0}}):e._e(),e.tabsValue=="dialog_param"?t("div",[e.isPlatform?t("iframe",{staticClass:"platform-page",style:{height:e.dialog.height+"px",width:"100%"},attrs:{src:e.domain+"#/gisqbiDialog/keyvalueSetting?subGuid="+this.editorAppId+"&token="+e.token,frameborder:"0"}}):t("Param",{attrs:{isDialog:!0}})],1):e._e(),e.tabsValue=="dialog_font"?t("font-file",{attrs:{isDialog:!0}}):e._e()],1),t("span",{staticClass:"closeBut",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(i){e.dialog.visible=!1}}},[e._v("\u5173 \u95ED")])],1)])],1)},re=[],j=c(321300),R=c(842164),W=c(839841),U=c(763311),X=c(548145),Y=c(932120),se=c(582333),ce=c(94729),z=c(619130),h=c(427163),F=c(977001),E=c(892461),te={name:"data-dialog",props:["hideTabs","associativeIds","isAssociative"],components:{Resource:F.default,XzqGeojson:h.default,Param:z.default,IconFontFile:ce.default,ImageManage:se.default,DataLocal:Y.default,FieldEnum:X.default,LayerDirectory:U.default,DataSource:W.default,DataSet:R.default,FontFile:E.default},data(){return{isPlatform:S.Z.baseConfig.isPlatform,domain:S.Z.baseConfig.domain,token:j.getStoreToken(),dialog:{visible:!1,width:0,height:0},tabsValue:"dataSet",tabs_list:[{name:"\u6570\u636E\u8FDE\u63A5",id:"dialog_dataSource"},{name:"\u6570\u636E\u96C6",id:"dialog_dataSet"},{name:"\u56FE\u7247\u89C6\u9891",id:"dialog_imageManage"},{name:"\u672C\u5730\u6570\u636E",id:"dialog_dataLocal"},{name:"\u6570\u636E\u5B57\u5178",id:"dialog_fieldEnum"},{name:"\u6587\u4EF6\u7BA1\u7406",id:"dialog_resource"},{name:"\u56FE\u5C42\u76EE\u5F55",id:"dialog_layerDirectory"},{name:"\u56FE\u6807\u5E93",id:"dialog_iconFontFile"},{name:"\u884C\u653F\u533A\u7BA1\u7406",id:"dialog_xzqGeojson"},{name:"\u53C2\u6570\u914D\u7F6E",id:"dialog_param"},{name:"\u5B57\u4F53\u7BA1\u7406",id:"dialog_font"}]}},computed:{...(0,w.Se)(["editorAppId"]),radio_list(){let a=JSON.parse(JSON.stringify(this.tabs_list));return this.hideTabs&&(a=this.$$lib__.filter(this.tabs_list,e=>!this.$$lib__.contains(this.hideTabs,e.id))),a}},mounted(){this.reSize(),window.addEventListener("resize",()=>{this.reSize()})},methods:{reSize(){this.dialog.height=window.innerHeight-141,this.dialog.width=window.innerWidth-40},openDialog(a){a&&(this.tabsValue=a),this.dialog.visible=!0},dialogOpened(){this.tabsValue=="dialog_imageManage"&&this.$refs.imageMange.setSelectImage(null)},changeAssociativeIds(a){this.$emit("changeAssociativeIds",a)}},beforeDestroy(){window.removeEventListener("resize",()=>{this.reSize()})}},M=te,D=c(768141),ee=(0,D.Z)(M,oe,re,!1,null,"11b77cac",null),de=ee.exports,ie=c(378931),p=c(468864),k=c(840804),I=c(245890),C=c(555616),ae=c.n(C),ne=c(149500);const P={data(){return{loading:!1,global:this.$$global,global_query:this.$$global_query,global_editor:this.$$global_editor,script_content:""}},computed:{...(0,w.Se)(["canEdit","queryIdFun","queryAppIdFun","accessTypeFun","datasourceType","dateSetConfig","queryConfigFun","queryImgFun","publishIdFun","defaultQueryConfig"]),accessType(){return this.accessTypeFun(this.widgetId)},queryId(){return this.queryIdFun(this.widgetId)},queryAppId(){return this.queryAppIdFun(this.widgetId)},queryConfig(){return this.queryConfigFun(this.widgetId)},queryImg(){return this.queryImgFun(this.widgetId)},publishId(){return this.publishIdFun(this.widgetId)},card_height:function(){return window.innerHeight-45}},methods:{...(0,w.nv)(["setQueryImg","setCustomFonts"]),saveQuery(a,e){if(!this.canEdit)return;this.loading=!0,this.$$lib__.each(this.queryConfig.button,o=>{m.default.delete(o,"children")});let t=this.getListInfo(this.queryConfig);this.associativeDataset(t),this.customFonts(t);let i={queryListId:this.queryId,queryListCode:this.queryConfig.base.code,queryListName:this.queryConfig.base.name,datasetId:this.queryConfig.base.datasetId,configJson:JSON.stringify(this.queryConfig)};ie.y.save(i).then(o=>{this.loading=!1,this.saveQueryFieldAndDataSet(t),o&&o.status==200?(a==!0&&(C.Message.success({message:"\u4FDD\u5B58\u6210\u529F",offset:40}),this.setAutoSave()),(this.queryConfig.base&&this.queryConfig.base.autoScreenShot==!0||this.queryImg==null||this.queryImg=="")&&this.saveScreenShot()):a==!0&&C.Message.error({message:o.msg,offset:60}),e&&e(o)})},associativeDataset(a){if(a==null)return;let e=[];this.queryConfig.associativeDataset&&this.queryConfig.associativeDataset.length>0&&(e=JSON.parse(JSON.stringify(this.queryConfig.associativeDataset))),this.$$lib__.each(a.dataSetList,t=>{this.$$lib__.contains(e,t.datasetId)||e.push(t.datasetId)}),this.setRequestAssociativeDataset(e)},customFonts(a){if(a==null)return;let e=this.$$lib__.filter(a.res,i=>i.resType=="font"),t=this.$$lib__.pluck(e,"resId");t=this.$$lib__.uniq(t),this.setCustomFonts(t)},saveScreenShot(){let a=this.$loading({lock:!0,text:"\u6B63\u5728\u622A\u53D6\u5C01\u9762\u7F29\u7565\u56FE\uFF0C\u8BF7\u7A0D\u540E..."}),e=this.$parent.$parent.$refs.design_view;e==null&&(e=this.$parent.$parent.$parent.$parent.$parent.$refs.design_view);let t=1;this.queryConfig.base.screenShotScale&&(t=this.queryConfig.base.screenShotScale);let i=this;Promise.all([c.e(94009),c.e(53932)]).then(function(){const o=c(64707).Z;o(e.$refs.query_view.$refs.query_view_body,{scale:t,useCORS:!0,allowTaint:!1}).then(n=>{const d=n.toDataURL("image/jpeg");ie.y.save({queryListId:i.queryId,queryListCode:i.queryConfig.base.code,queryListName:i.queryConfig.base.name,queryListImg:d}).then(g=>{i.setQueryImg({widgetId:i.widgetId,queryListImg:d}),a.close(),g&&g.status==200?C.Message.success({message:"\u7F29\u7565\u56FE\u4FDD\u5B58\u6210\u529F",offset:60}):C.Message.error({message:g.msg,offset:60})})})}.bind(null,c)).catch(c.oe)},saveQueryFieldAndDataSet(a){a!=null&&(p.J.save(this.queryId,a.fieldList).then(e=>{(!e||e.status!=200)&&ne.error(e.msg)}),k.l.save(this.queryId,a.dataSetList).then(e=>{(!e||e.status!=200)&&ne.error(e.msg)}),I.j.save(this.queryId,a.res).then(e=>{(!e||e.status!=200)&&ne.error(e.msg)}))},getListInfo(a){if(!a)return;let e={fieldList:[],dataSetList:[],res:[]};return a.base&&(a.base.datasetId&&a.base.datasetId!=""&&e.dataSetList.push({queryListId:this.queryId,datasetId:a.base.datasetId,fieldType:"base",typeName:null,typeLabel:null,datasetJson:null}),a.base.table&&a.base.table.lazy_config&&a.base.table.lazy_config.data_set&&a.base.table.lazy_config.data_set.dataSetId&&a.base.table.lazy_config.data_set.dataSetId!=""&&e.dataSetList.push({queryListId:this.queryId,datasetId:a.base.table.lazy_config.data_set.dataSetId,fieldType:"field",typeName:null,typeLabel:"\u6811\u5F62\u6570\u636E\u61D2\u52A0\u8F7D",datasetJson:JSON.stringify({datasetId:a.base.table.lazy_config.data_set.dataSetId,dimensionsAlias:a.base.table.lazy_config.data_set.dimensionsAlias,query:a.base.table.lazy_config.data_set.query})}),a.base.global_params&&this.$$lib__.each(a.base.global_params.param_list,t=>{t.type==this.$$global_editor.globalParamsType.configParam.code&&e.res.push({boardId:this.queryId,widgetName:"\u5168\u5C40\u53D8\u91CF\uFF0C\u53C2\u6570\u7ED1\u5B9A\u53C2\u6570\u914D\u7F6E\uFF0C\u53C2\u6570\u540D\u79F0\uFF1A"+t.paramName,resId:t.configParamName,resApplicationId:t.configParamApp,resType:"param"})}),a.base.resource&&this.$$lib__.each(a.base.resource,t=>{e.res.push({boardId:this.queryId,widgetName:t.fileName,resId:t.fileId,resApplicationId:t.applicationId,resType:t.restypeId})}),a.base.table&&a.base.table.header_fontFamily&&a.base.table.header_fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u8868\u5934-\u5B57\u4F53\u6837\u5F0F",resId:a.base.table.header_fontFamily,resType:"font"}),a.base.table&&a.base.table.row_fontFamily&&a.base.table.row_fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u884C-\u5B57\u4F53\u6837\u5F0F",resId:a.base.table.row_fontFamily,resType:"font"}),a.headerOrder&&a.headerOrder.item&&a.headerOrder.item.fontFamily&&a.headerOrder.item.fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u9876\u90E8\u6392\u5E8F-\u5B57\u4F53\u6837\u5F0F",resId:a.headerOrder.item.fontFamily,resType:"font"}),a.headerOrder&&a.headerOrder.hover&&a.headerOrder.hover.fontFamily&&a.headerOrder.hover.fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u9876\u90E8\u6392\u5E8F-\u60AC\u505C\u5B57\u4F53\u6837\u5F0F",resId:a.headerOrder.hover.fontFamily,resType:"font"}),a.headerOrder&&a.headerOrder.active&&a.headerOrder.active.fontFamily&&a.headerOrder.active.fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u9876\u90E8\u6392\u5E8F-\u6FC0\u6D3B\u5B57\u4F53\u6837\u5F0F",resId:a.headerOrder.active.fontFamily,resType:"font"})),this.$$lib__.each(a.field,t=>{t.enum_type==this.global_query.enum_type.field.code&&t.field_enum_name&&t.field_enum_name!=""?e.fieldList.push({queryListId:this.queryId,fldLetterName:t.field_enum_name,fieldType:"field",typeName:t.field,typeLabel:t.label}):t.enum_type==this.global_query.enum_type.data_set.code&&t.data_set&&t.data_set.dataSetId&&t.data_set.dataSetId!=""&&e.dataSetList.push({queryListId:this.queryId,datasetId:t.data_set.dataSetId,fieldType:"field",typeName:t.field,typeLabel:t.label,datasetJson:JSON.stringify({datasetId:t.data_set.dataSetId,dimensionsAlias:t.data_set.dimensionsAlias,query:t.data_set.query})}),t.fontFamily&&t.fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u5B57\u6BB5\u3010"+t.field+"\u3011\u5B57\u4F53\u6837\u5F0F",resId:t.fontFamily,resType:"font"})}),this.$$lib__.each(a.condition,t=>{(t.control_type==this.global_query.control_type.select.code||t.control_type==this.global_query.control_type.selectTree.code||t.control_type==this.global_query.control_type.cascader.code||t.control_type==this.global_query.control_type.checkbox.code||t.control_type==this.global_query.control_type.radio.code)&&(t.control_enum_type==this.global_query.enum_type.field.code&&t.control_enum_name&&t.control_enum_name!=""?e.fieldList.push({queryListId:this.queryId,fldLetterName:t.control_enum_name,fieldType:"condition",typeName:t.field,typeLabel:t.label}):t.control_enum_type==this.global_query.enum_type.data_set.code&&t.data_set&&t.data_set.dataSetId&&t.data_set.dataSetId!=""&&e.dataSetList.push({queryListId:this.queryId,datasetId:t.data_set.dataSetId,fieldType:"condition",typeName:t.field,typeLabel:t.label,datasetJson:JSON.stringify({datasetId:t.data_set.dataSetId,dimensionsAlias:t.data_set.dimensionsAlias,query:t.data_set.query})}))}),this.$$lib__.each(a.button,t=>{t.tooltip&&t.tooltip.fontFamily&&t.tooltip.fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u6309\u94AE\u3010"+t.name+"\u3011\u6587\u5B57\u63D0\u793A\u7684\u5B57\u4F53\u6837\u5F0F",resId:t.tooltip.fontFamily,resType:"font"})}),this.$$lib__.each(a.request,t=>{t.data_set&&t.data_set.dataSetId&&t.data_set.dataSetId!=""&&e.dataSetList.push({queryListId:this.queryId,datasetId:t.data_set.dataSetId,fieldType:"request",typeName:t.name,typeLabel:t.name,datasetJson:JSON.stringify({datasetId:t.data_set.dataSetId,dimensionsAlias:t.data_set.dimensionsAlias,query:t.data_set.query})})}),this.$$lib__.each(a.description,t=>{t.prefix&&t.prefix.fontFamily&&t.prefix.fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u7EDF\u8BA1\u8BF4\u660E\u3010"+t.name+"\u3011\uFF0C\u524D\u7F00\u5B57\u4F53\u6837\u5F0F",resId:t.prefix.fontFamily,resType:"font"}),t.prefix&&t.text.fontFamily&&t.text.fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u7EDF\u8BA1\u8BF4\u660E\u3010"+t.name+"\u3011\uFF0C\u5185\u5BB9\u5B57\u4F53\u6837\u5F0F",resId:t.text.fontFamily,resType:"font"}),t.prefix&&t.suffix.fontFamily&&t.suffix.fontFamily.indexOf("font-")>-1&&e.res.push({boardId:this.queryId,widgetName:"\u7EDF\u8BA1\u8BF4\u660E\u3010"+t.name+"\u3011\uFF0C\u540E\u7F00\u5B57\u4F53\u6837\u5F0F",resId:t.suffix.fontFamily,resType:"font"})}),e},getUrlKey(a){let e=new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.href);return e?decodeURIComponent(e[1].replace(/\+/g,"%20")):null},forceUpdate(){this.$forceUpdate()}}};var Oe=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"dialog-query",attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,width:"820px"},on:{"update:visible":function(i){e.dialogVisible=i}}},[t("span",{attrs:{slot:"title"},slot:"title"},[e._v("\u67E5\u8BE2\u5217\u8868\u53D1\u5E03 "),t("el-tooltip",{attrs:{"open-delay":500,effect:"light",placement:"right"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("p",[e._v("\u53D1\u5E03\u7684\u4F5C\u7528\uFF1A")]),t("p",[e._v(" 1\u3001\u4FDD\u7559\u5386\u53F2\u7248\u672C\uFF0C\u53EF\u6062\u590D\u81F3\u5386\u53F2\u7248\u672C"),t("br"),e._v("2\u3001\u4FEE\u6539\u914D\u7F6E\u4FDD\u5B58\u540E\uFF0C\u4E0D\u5F71\u54CD\u6B63\u5728\u4F7F\u7528\u7684\u5DF2\u53D1\u5E03\u67E5\u8BE2\u5217\u8868\u7684\u5185\u5BB9 ")])]),t("el-button",{attrs:{type:"text",size:"medium"}},[t("i",{staticClass:"el-icon-info",style:{color:e.theme.switch_active_color}})])],1)],1),t("div",{staticClass:"my-publish"},[e._v(" \u53D1\u5E03\u4F4D\u7F6E\uFF1A "),t("el-radio-group",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},model:{value:e.position,callback:function(i){e.position=i},expression:"position"}},[t("el-radio-button",{attrs:{label:"current",disabled:e.isDisabled}},[e._v("\u53D1\u5E03\u5230\u88AB\u7F16\u8F91\u7684\u7248\u672C")]),t("el-radio-button",{attrs:{label:"new"}},[e._v("\u53D1\u5E03\u5230\u65B0\u7248\u672C")]),t("el-radio-button",{attrs:{label:"old"}},[e._v("\u53D1\u5E03\u5230\u5176\u4ED6\u7248\u672C")])],1),e.position!="new"?[t("el-tooltip",{attrs:{"open-delay":1e3,effect:"dark",placement:"left",content:"\u662F\u5426\u6E05\u7A7A\u7528\u6237\u81EA\u5B9A\u4E49\u67E5\u8BE2\u6761\u4EF6\u3001\u81EA\u5B9A\u4E49\u67E5\u8BE2\u7ED3\u679C\u5217\u3001\u6211\u7684\u7B5B\u9009\u5668\uFF0C\u5F53\u67E5\u8BE2\u5217\u8868\u8C03\u6574\u6BD4\u8F83\u5927\u65F6\uFF0C\u4E4B\u524D\u4FDD\u5B58\u7684\u81EA\u5B9A\u4E49\u5185\u5BB9\uFF0C\u53EF\u80FD\u5C06\u65E0\u6CD5\u4F7F\u7528\u6216\u51FA\u73B0\u95EE\u9898"}},[t("label",{staticStyle:{"margin-left":"20px"}},[e._v("\u662F\u5426\u6E05\u7A7A\u7528\u6237\u81EA\u5B9A\u4E49\u5185\u5BB9\uFF1A")])]),t("el-tooltip",{attrs:{"open-delay":1e3,effect:"dark",placement:"left",content:"\u662F\u5426\u6E05\u7A7A\u7528\u6237\u81EA\u5B9A\u4E49\u67E5\u8BE2\u6761\u4EF6\u3001\u81EA\u5B9A\u4E49\u67E5\u8BE2\u7ED3\u679C\u5217\u3001\u6211\u7684\u7B5B\u9009\u5668\uFF0C\u5F53\u67E5\u8BE2\u5217\u8868\u8C03\u6574\u6BD4\u8F83\u5927\u65F6\uFF0C\u4E4B\u524D\u4FDD\u5B58\u7684\u81EA\u5B9A\u4E49\u5185\u5BB9\uFF0C\u53EF\u80FD\u5C06\u65E0\u6CD5\u4F7F\u7528\u6216\u51FA\u73B0\u95EE\u9898"}},[t("el-switch",{model:{value:e.emptyCustomer,callback:function(i){e.emptyCustomer=i},expression:"emptyCustomer"}})],1)]:e._e(),e.position=="current"?t("div",[t("el-form",{staticStyle:{margin:"15px 0 0 0",padding:"0px"},attrs:{size:"mini"},model:{value:e.queryListPublish_current,callback:function(i){e.queryListPublish_current=i},expression:"queryListPublish_current"}},[t("el-form-item",{attrs:{label:" \u7248\u672C\u7C7B\u578B\uFF1A"}},[t("el-radio-group",{staticClass:"my-form-width",attrs:{disabled:!0},model:{value:e.queryListPublish_current.publishType,callback:function(i){e.$set(e.queryListPublish_current,"publishType",i)},expression:"queryListPublish_current.publishType"}},e._l(e.global.editTypeList,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1),t("el-tooltip",{attrs:{"open-delay":500,effect:"light",placement:"right"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("p",[e._v("\u7248\u672C\u7684\u533A\u522B\uFF1A")]),t("p",[e._v(" \u516C\u5F00\u7248\u672C\uFF1A\u4E0D\u9700\u8981\u767B\u5F55\u5373\u53EF\u76F4\u63A5\u8BBF\u95EE\u53D1\u5E03\u5730\u5740\uFF0C\u65E0\u7528\u6237\u8BA4\u8BC1"),t("br"),e._v(" \u666E\u901A\u7248\u672C\uFF1A\u9700\u8981\u767B\u5F55\u624D\u53EF\u8BBF\u95EE\u53D1\u5E03\u5730\u5740\uFF0C\u4FDD\u8BC1\u9875\u9762\u8BBF\u95EE\u5B89\u5168 ")])]),t("el-button",{attrs:{type:"text",size:"medium"}},[t("i",{staticClass:"el-icon-info",style:{color:e.theme.switch_active_color}})])],1)],1),t("el-form-item",{attrs:{label:" \u7248\u672C\u540D\u79F0\uFF1A"}},[t("el-input",{staticClass:"my-form-width",attrs:{disabled:!0},model:{value:e.queryListPublish_current.publishName,callback:function(i){e.$set(e.queryListPublish_current,"publishName",i)},expression:"queryListPublish_current.publishName"}})],1)],1)],1):e.position=="new"?t("div",[t("el-form",{ref:"publishData",staticStyle:{margin:"15px 0 0 0",padding:"0px"},attrs:{size:"mini"},nativeOn:{submit:function(i){i.preventDefault()}},model:{value:e.queryListPublish,callback:function(i){e.queryListPublish=i},expression:"queryListPublish"}},[t("el-form-item",{attrs:{label:" \u7248\u672C\u7C7B\u578B\uFF1A"}},[t("el-radio-group",{staticClass:"my-form-width",model:{value:e.queryListPublish.publishType,callback:function(i){e.$set(e.queryListPublish,"publishType",i)},expression:"queryListPublish.publishType"}},e._l(e.global.editTypeList,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1),t("el-tooltip",{attrs:{"open-delay":500,effect:"light",placement:"right"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("p",[e._v("\u7248\u672C\u7684\u533A\u522B\uFF1A")]),t("p",[e._v(" \u516C\u5F00\u7248\u672C\uFF1A\u4E0D\u9700\u8981\u767B\u5F55\u5373\u53EF\u76F4\u63A5\u8BBF\u95EE\u53D1\u5E03\u5730\u5740\uFF0C\u65E0\u7528\u6237\u8BA4\u8BC1"),t("br"),e._v(" \u666E\u901A\u7248\u672C\uFF1A\u9700\u8981\u767B\u5F55\u624D\u53EF\u8BBF\u95EE\u53D1\u5E03\u5730\u5740\uFF0C\u4FDD\u8BC1\u9875\u9762\u8BBF\u95EE\u5B89\u5168 ")])]),t("el-button",{attrs:{type:"text",size:"medium"}},[t("i",{staticClass:"el-icon-info",style:{color:e.theme.switch_active_color}})])],1)],1),t("el-form-item",{attrs:{label:" \u7248\u672C\u540D\u79F0\uFF1A"}},[t("el-input",{staticClass:"my-form-width",attrs:{placeholder:"\u8BF7\u8F93\u5165\u7248\u672C\u540D\u79F0,\u9ED8\u8BA4\u4F7F\u7528\u5F53\u524D\u7F16\u8F91\u67E5\u8BE2\u5217\u8868\u540D\u79F0"},model:{value:e.queryListPublish.publishName,callback:function(i){e.$set(e.queryListPublish,"publishName",i)},expression:"queryListPublish.publishName"}})],1)],1)],1):t("div",[t("query-publish-list",{ref:"queryPublishList",attrs:{enableChoose:!0,queryListId:this.queryId}})],1)],2),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.cancelDialog}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.savePublish}},[e._v("\u786E \u5B9A")]),e.position=="current"||e.position=="new"?t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.savePublish("copy")}}},[e._v("\u786E\u5B9A\u5E76\u590D\u5236\u5730\u5740")]):e._e(),t("input",{ref:"searchInput",staticStyle:{width:"1px",border:"none","background-color":"transparent"},attrs:{type:"text"}})],1)])},Te=[],ve=c(350707),Fe=c(301767),Be={name:"publish-query",components:{QueryPublishList:Fe.default},mixins:[P],data(){return{loading:!1,position:"new",emptyCustomer:!0,queryListPublish:{queryListId:"",publishType:this.$$global.editType.public.code,publishName:""},queryListPublish_current:{publishType:"",publishName:""},isDisabled:!0,dialogVisible:!1,action:""}},methods:{...(0,w.nv)(["setPublishId"]),publish(){this.action=null,this.dialogVisible=!0,this.emptyCustomer=!0,this.queryListPublish.publishName="",this.publishId&&this.publishId!=""&&ve._.getQueryListPublishInfo(this.publishId).then(a=>{a&&a.status==200?a.data.isDeleted==0&&(this.position="current",this.isDisabled=!1,this.queryListPublish_current.publishType=a.data.publishType,this.queryListPublish_current.publishName=a.data.publishName):C.Message.error({message:a.msg,offset:60})})},savePublish(a){a&&a=="copy"&&(this.action=a),this.queryListPublish.queryListId=this.queryId;let e={info:{position:this.position,emptyCustomer:this.emptyCustomer},queryListPublish:this.queryListPublish};if(e.info.position=="current")this.doSavePublish(e);else if(e.info.position=="old"){let t=this.$refs.queryPublishList.getSelectPublish(),i=t[this.global.editType.original.code].length,o=t[this.global.editType.public.code].length;if(i<1&&o<1){C.Message.warning({message:"\u81F3\u5C11\u9009\u4E00\u4E2A\u5DF2\u7ECF\u53D1\u5E03\u7684\u7248\u672C",offset:60});return}e.info.selectPublish=t;let n=[];if(i>0){let d=this.$$lib__.pluck(t[this.global.editType.original.code],"publishName");n.push("[\u666E\u901A\u7248\u672C("+i+"\u4E2A)\uFF1A"+d.join("\u3001")+"]")}if(o>0){let d=this.$$lib__.pluck(t[this.global.editType.public.code],"publishName");n.push("[\u516C\u5F00\u7248\u672C("+o+"\u4E2A)\uFF1A"+d.join("\u3001")+"]")}this.$confirm("\u53D1\u5E03\u5230\u5DF2\u6709\u67E5\u8BE2\u5217\u8868\uFF0C\u5C06\u8986\u76D6\u4EE5\u4E0B\u7248\u672C\uFF1A"+n.join("\uFF1B")+" , \u786E\u5B9A\u662F\u5426\u7EE7\u7EED \uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{this.doSavePublish(e)}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u672C\u6B21\u53D1\u5E03",offset:60})})}else e.info.position=="new"&&this.doSavePublish(e)},doSavePublish(a){ve._.publish(a).then(e=>{e&&e.status==200?(this.dialogVisible=!1,C.Message.success({message:"\u53D1\u5E03\u6210\u529F",offset:60}),a.info.position=="new"&&this.setPublishId({widgetId:this.widgetId,publishId:e.data}),this.copyUrl(e.data)):C.Message.error({message:e.msg,offset:60})})},copyUrl(a){if(this.action&&this.action=="copy"){let e=location.origin+S.Z.baseConfig.projectName+"/query_view.html?queryPid="+a+"&appId="+this.queryAppId;this.position=="current"?e=e+"&tp="+this.queryListPublish_current.publishType:this.position=="new"&&(e=e+"&tp="+this.queryListPublish.publishType);let t=this.$refs.searchInput;t.value=e,t.select(),document.execCommand("Copy")}},cancelDialog(){this.dialogVisible=!1,this.queryListPublish.publishName="",this.queryListPublish_current.publishType="",this.queryListPublish_current.publishName=""}}},qe=Be,fe=(0,D.Z)(qe,Oe,Te,!1,null,"2fcd50e1",null),Le=fe.exports,Pe=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{staticClass:"dialog-query-script",staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,top:"10px","modal-append-to-body":!1,"close-on-click-modal":!1,visible:e.dialogVisible,width:"800px"},on:{"update:visible":function(i){e.dialogVisible=i}}},[t("el-tabs",{staticClass:"my-tabs-design",model:{value:e.activeName,callback:function(i){e.activeName=i},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"\u679A\u4E3E\u5B57\u6BB5",name:"field"}},[t("query-field-list",{ref:"refField",attrs:{"query-list-id":e.queryId}})],1),t("el-tab-pane",{attrs:{label:"\u6570\u636E\u96C6",name:"dataset"}},[t("query-dataset-list",{ref:"refDataset",attrs:{"query-list-id":e.queryId}})],1),t("el-tab-pane",{attrs:{label:"\u8D44\u6E90\u6587\u4EF6",name:"file"}},[t("query-file-list",{ref:"refFile",attrs:{"query-list-id":e.queryId}})],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.activeName!="field",expression:"activeName != 'field'"}],attrs:{size:"mini",type:"primary"},on:{click:e.testAll}},[e._v("\u4E00\u952E\u6D4B\u8BD5")]),t("el-button",{attrs:{size:"mini"},on:{click:function(i){e.dialogVisible=!1}}},[e._v("\u5173 \u95ED")])],1)],1)],1)},Qe=[],ze=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"400","span-method":e.objectSpanMethod,border:""}},[t("el-table-column",{attrs:{prop:"fldLetterName",label:"\u5B57\u6BB5\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"fldChineseName",label:"\u5B57\u6BB5\u4E2D\u6587\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"fieldType",formatter:e.formatter,label:"\u4F7F\u7528\u7C7B\u578B"}}),t("el-table-column",{attrs:{prop:"typeName",label:"\u5B57\u6BB5\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"typeLabel",label:"\u6807\u9898"}})],1)],1)},Ee=[],xe=c(149500),Je={name:"query-field-list",props:["queryListId"],data(){return{loading:!1,position:0,rowSpanArr:[],tableData:[]}},mounted(){this.initTableData()},methods:{initTableData(){this.loading=!0,p.J.getListByQueryListId(this.queryListId).then(a=>{this.loading=!1,a&&a.status==200?(this.tableData=a.data,this.getRowSpan()):C.Message.error({message:a.msg,offset:60})})},getRowSpan(){this.rowSpanArr=[],this.tableData.forEach((a,e)=>{e==0?(this.rowSpanArr.push(1),this.position=0):this.tableData[e].fldLetterName==this.tableData[e-1].fldLetterName?(this.rowSpanArr[this.position]+=1,this.rowSpanArr.push(0),this.tableData[e].fldLetterName=this.tableData[e-1].fldLetterName):(this.rowSpanArr.push(1),this.position=e)})},objectSpanMethod({row:a,column:e,rowIndex:t,columnIndex:i}){if(xe.debug(a),xe.debug(e),i!=2&&i!=3&&i!=4)return{rowspan:this.rowSpanArr[t],colspan:1}},formatter(a){return a.fieldType=="field"?"\u7ED3\u679C\u5217":a.fieldType=="condition"?"\u67E5\u8BE2\u6761\u4EF6":"\u672A\u77E5"}}},Ae=Je,Re=(0,D.Z)(Ae,ze,Ee,!1,null,"66a703d8",null),pe=Re.exports,Me=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"400","span-method":e.objectSpanMethod,border:""}},[t("el-table-column",{attrs:{prop:"datasetName",label:"\u6570\u636E\u96C6\u540D\u79F0"},scopedSlots:e._u([{key:"default",fn:function(i){return[typeof i.row.isOk=="boolean"?t("div",[i.row.isOk?t("el-tooltip",{attrs:{content:"\u6D4B\u8BD5\u901A\u8FC7\uFF0C\u53EF\u7528\u4F7F\u7528","open-delay":1e3,effect:"dark",placement:"top"}},[t("i",{staticClass:"el-icon-check",staticStyle:{color:"green","font-weight":"bolder"}},[e._v(" \xA0"+e._s(i.row.datasetName))])]):[i.row.fieldType=="base"?t("el-tooltip",{attrs:{content:"\u67E5\u8BE2\u5217\u8868\u672C\u8EAB\u6570\u636E\u96C6\uFF0C\u4E0D\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u8BF7\u5728\u9884\u89C8\u7ED3\u679C\u4E2D\u67E5\u770B","open-delay":1e3,effect:"dark",placement:"top"}},[t("i",{staticClass:"el-icon-warning-outline",staticStyle:{color:"#E6A23C","font-weight":"bolder"}},[e._v(" \xA0"+e._s(i.row.datasetName))])]):t("el-tooltip",{attrs:{content:"\u6D4B\u8BD5\u5931\u8D25\uFF0C"+i.row.msg,"open-delay":1e3,effect:"dark",placement:"top"}},[t("i",{staticClass:"el-icon-close",staticStyle:{color:"red","font-weight":"bolder"}},[e._v("\xA0"+e._s(i.row.datasetName))])])]],2):t("div",[t("span",{directives:[{name:"show",rawName:"v-show",value:e.test,expression:"test"}],staticStyle:{"font-weight":"bold"}},[e._v("[\u6D4B\u8BD5\u4E2D...]")]),e._v(" "+e._s(i.row.datasetName)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"fieldType",formatter:e.formatter,label:"\u4F7F\u7528\u7C7B\u578B"}}),t("el-table-column",{attrs:{prop:"typeName",label:"\u5B57\u6BB5\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"typeLabel",label:"\u6807\u9898"}})],1)],1)},je=[],ue=c(489133),he=c(149500),Ze={name:"query-dataset-list",props:["queryListId"],data(){return{loading:!1,test:!1,okLen:0,position:0,rowSpanArr:[],tableData:[]}},mounted(){this.initTableData()},methods:{testAll(){this.tableData.forEach(e=>{this.$set(e,"isOk",null),this.$set(e,"msg","")}),window.dataSetTestTimer&&(clearTimeout(window.dataSetTestTimer),window.dataSetTestTimer=0),this.test=!0;let a=this.tableData;window.dataSetTestTimer=setTimeout(function(){a.forEach(e=>{typeof e.isOk!="boolean"&&(e.isOk=!1,e.msg="\u8FDE\u63A5\u8D85\u65F6,\u8BF7\u68C0\u67E5\u6570\u636E\u8FDE\u63A5")})},1e4),this.$$lib__.each(a,e=>{e.fieldType!="base"?ue._.test(e.datasetId,e.datasetJson).then(t=>{t.status==200?e.isOk=!0:(e.isOk=!1,e.msg=t.msg,he.error(t.msg)),this.okLen++,a.forEach(i=>{i.datasetId===e.datasetId&&(i.isOk=e.isOk,i.msg=e.msg)})}):e.isOk=!1})},initTableData(){this.test=!1,this.loading=!0,k.l.getListByQueryListId(this.queryListId).then(a=>{this.loading=!1,a&&a.status==200?(this.tableData=a.data,this.getRowSpan()):C.Message.error({message:a.msg,offset:60})})},getRowSpan(){this.rowSpanArr=[],this.tableData.forEach((a,e)=>{e==0?(this.rowSpanArr.push(1),this.position=0):this.tableData[e].datasetName==this.tableData[e-1].datasetName?(this.rowSpanArr[this.position]+=1,this.rowSpanArr.push(0),this.tableData[e].datasetName=this.tableData[e-1].datasetName):(this.rowSpanArr.push(1),this.position=e)})},objectSpanMethod({row:a,column:e,rowIndex:t,columnIndex:i}){if(he.debug(a),he.debug(e),i!=1&&i!=2&&i!=3)return{rowspan:this.rowSpanArr[t],colspan:1}},formatter(a){switch(a.fieldType){case"base":return"\u67E5\u8BE2\u5217\u8868\u672C\u8EAB";case"field":return"\u7ED3\u679C\u5217";case"request":return"\u6570\u636E\u8BF7\u6C42";case"condition":return"\u67E5\u8BE2\u6761\u4EF6";default:return"\u672A\u77E5"}}}},ge=Ze,He=(0,D.Z)(ge,Me,je,!1,null,"58796f6b",null),Ve=He.exports,Ce=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"400","span-method":e.objectSpanMethod,border:""}},[t("el-table-column",{attrs:{prop:"fileName",label:"\u8D44\u6E90\u6587\u4EF6\u540D\u79F0"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.isOk!=null?t("div",[i.row.isOk?t("el-tooltip",{attrs:{content:"\u6D4B\u8BD5\u901A\u8FC7\uFF0C\u53EF\u4EE5\u4F7F\u7528","open-delay":1e3,effect:"dark",placement:"top"}},[t("i",{staticClass:"el-icon-check",staticStyle:{color:"green","font-weight":"bolder"}},[e._v(" \xA0"+e._s(i.row.fileName))])]):t("el-tooltip",{attrs:{content:"\u6D4B\u8BD5\u5931\u8D25\uFF0C\u65E0\u6CD5\u6B63\u5E38\u4F7F\u7528","open-delay":1e3,effect:"dark",placement:"top"}},[t("i",{staticClass:"el-icon-close",staticStyle:{color:"red","font-weight":"bolder"}},[e._v("\xA0"+e._s(i.row.fileName))])])],1):t("div",[e._v(" "+e._s(i.row.fileName)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"resId",label:"\u8D44\u6E90\u6587\u4EF6Id"}}),t("el-table-column",{attrs:{prop:"restypeId",formatter:e.formatter,label:"\u8D44\u6E90\u7C7B\u578B"}}),t("el-table-column",{attrs:{prop:"fileUrlPath",label:"\u6587\u4EF6\u76F8\u5BF9\u8DEF\u5F84"}})],1)],1)},Ue=[],me=c(155946),we=c(149500),Ge={name:"query-file-list",props:["queryListId"],data(){return{loading:!1,test:!1,okLen:0,position:0,rowSpanArr:[],tableData:[]}},computed:{tableLen:function(){return this.tableData.length}},watch:{okLen(a){a==this.tableLen&&(this.tableData=this.$$lib__.sortBy(this.tableData,"isOk"))}},mounted(){this.initTableData()},methods:{testAll(){this.test=!0;let a=JSON.parse(JSON.stringify(this.tableData));this.tableData=[],this.okLen=0,this.$$lib__.each(a,e=>{let t="/resource/"+me.Z.state.index.application.applicationId+e.fileUrlPath;I.j.testResourceFile(t).then(i=>{i?e.isOk=!0:e.isOk=!1,this.tableData.push(e)})})},initTableData(){this.test=!1,this.loading=!0,I.j.getQueryResourceListByQueryId(this.queryListId).then(a=>{this.loading=!1,a&&a.status==200?(this.tableData=a.data,this.getRowSpan()):C.Message.error({message:a.msg,offset:60})})},getRowSpan(){this.rowSpanArr=[],this.tableData.forEach((a,e)=>{e==0?(this.rowSpanArr.push(1),this.position=0):this.tableData[e].fileName==this.tableData[e-1].fileName?(this.rowSpanArr[this.position]+=1,this.rowSpanArr.push(0),this.tableData[e].fileName=this.tableData[e-1].fileName):(this.rowSpanArr.push(1),this.position=e)})},objectSpanMethod({row:a,column:e,rowIndex:t,columnIndex:i}){if(we.debug(a),we.debug(e),i!=2&&i!=3&&i!=4)return{rowspan:this.rowSpanArr[t],colspan:1}},formatter(a){switch(a.restypeId){case"10001":return"css\u6837\u5F0F";case"10002":return"js\u811A\u672C";default:return"\u672A\u77E5\u7C7B\u578B"}}}},We=Ge,Ke=(0,D.Z)(We,Ce,Ue,!1,null,"c67db568",null),Se=Ke.exports,Xe={name:"query-resources-list",components:{QueryFileList:Se,QueryDatasetList:Ve,QueryFieldList:pe},props:{queryId:{type:String,default:""},dialogTitle:{type:String,default:"\u67E5\u770B\u67E5\u8BE2\u5217\u8868\u76F8\u5173\u6570\u636E\u7684\u4F7F\u7528\u60C5\u51B5"}},data(){return{dialogVisible:!1,activeName:"field"}},methods:{openDialog(){this.dialogVisible=!0;let a=this.$refs.refField;a&&a.initTableData();let e=this.$refs.refDataset;e&&e.initTableData();let t=this.$refs.refFile;t&&t.initTableData()},testAll(){if(this.activeName=="dataset"){let a=this.$refs.refDataset;a&&a.testAll()}else if(this.activeName=="file"){let a=this.$refs.refFile;a&&a.testAll()}}}},Ye=Xe,et=(0,D.Z)(Ye,Pe,Qe,!1,null,"727b5066",null),tt=et.exports,ke={name:"toolbar-design",components:{DataDialog:de,PublishQuery:Le,QueryResourcesList:tt},mixins:[P],computed:{...(0,w.Se)(["canEdit","editingInfo"]),editingInfoEditor:function(){return this.editingInfo||"\u4FDD\u5B58(Ctrl+Alt+s)"}},data(){return{dialog:{width:0,height:0},packUpTag:"",packUpList:[{iconfont:"bi_sjlj",name:"\u6570\u636E\u8FDE\u63A5",id:"dialog_dataSource"},{iconfont:"bi_sjj",name:"\u6570\u636E\u96C6",id:"dialog_dataSet"},{iconfont:"bi_bjtp",name:"\u56FE\u7247\u89C6\u9891",id:"dialog_imageManage"},{iconfont:"bi_sjzd",name:"\u6570\u636E\u5B57\u5178",id:"dialog_fieldEnum"},{iconfont:"bi_zygl",name:"\u6587\u4EF6\u7BA1\u7406",id:"dialog_resource"},{iconfont:"bi_zttbk",name:"\u56FE\u6807\u5E93",id:"dialog_iconFontFile"},{iconfont:"bi_xzqgl",name:"\u884C\u653F\u533A\u7BA1\u7406",id:"dialog_xzqGeojson"},{iconfont:"bi_cspz",name:"\u53C2\u6570\u914D\u7F6E",id:"dialog_param"},{iconfont:"bi_ztgl",name:"\u5B57\u4F53\u7BA1\u7406",id:"dialog_font"},{iconfont:"bi_kbfz",name:"\u6570\u636E\u4F7F\u7528\u60C5\u51B5\uFF08\u5DF2\u4FDD\u5B58\uFF09",id:"showList"}],timer_auto_save:null}},watch:{canEdit(){this.setAutoSave()}},mounted(){this.dialog.height=window.innerHeight-140,this.dialog.width=window.innerWidth-40,y.Z.$on("busSetAutoSave",()=>{this.setAutoSave()}),y.Z.$on("doQueryListSaveAction",({showMsg:a,callback:e})=>{this.saveQuery(a,e)}),document.onkeydown=a=>{a.ctrlKey&&a.altKey&&a.keyCode==83&&this.saveQuery(!0)}},methods:{...(0,w.nv)(["setRequestAssociativeDataset"]),packUpTagChange(a){/dialog/.test(a)?this.$refs.refDataDialog.openDialog(a):this[a]()},hideSelect(a){let e=this.$refs.myToolbarDesign.querySelector(".bi_arrowTriangle");a?e.style.transform="rotate(180deg)":e.style.transform="rotate(0deg)"},doPreview(){let a=location.origin+S.Z.baseConfig.projectName+"/query_view.html?queryId="+this.queryId+"&appId="+this.queryAppId+"&preview=true";window.open(a)},showList(){this.$refs.queryResourcesList.openDialog()},datasetDialogOpen(){this.$refs.datasetDialog&&this.$refs.datasetDialog.myUpdate()},doPublish(){this.canEdit&&this.$refs.publishQuery.publish()},changeAssociativeIds(a){this.setRequestAssociativeDataset(a)},setAutoSave(){if(this.timer_auto_save&&clearInterval(this.timer_auto_save),this.queryConfig&&this.queryConfig.base&&this.queryConfig.base.autoSave==!0&&this.canEdit){let a=10;this.queryConfig.base.autoSaveTime&&(a=this.queryConfig.base.autoSaveTime),this.timer_auto_save=setInterval(()=>{this.saveQuery(!1,e=>{e&&e.status==200?this.$notify({message:"\u67E5\u8BE2\u5217\u8868\u5DF2\u81EA\u52A8\u4FDD\u5B58\u6210\u529F",type:"success"}):this.$notify({message:"\u67E5\u8BE2\u5217\u8868\u81EA\u52A8\u4FDD\u5B58\u5931\u8D25\uFF1A"+e.msg,type:"error"})})},a*1e3*60)}}},destroyed(){this.timer_auto_save&&clearInterval(this.timer_auto_save)}},it=ke,at=(0,D.Z)(it,V,K,!1,null,"ba56f79e",null),$e=at.exports,ot=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-tabs",{staticClass:"my-tabs-design"},[t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\u57FA\u672C")]),t("design-base",{ref:"design_base",staticClass:"my-tab-pane-design",style:{height:e.card_height+"px"}})],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\u7ED3\u679C\u5217")]),t("design-field",{staticClass:"my-tab-pane-design",style:{height:e.card_height+"px"}})],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\u6761\u4EF6")]),t("design-condition",{staticClass:"my-tab-pane-design",style:{height:e.card_height+"px"}})],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\u6309\u94AE")]),t("design-button",{staticClass:"my-tab-pane-design",style:{height:e.card_height+"px"}})],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\u5F39\u7A97")]),t("design-dialog",{staticClass:"my-tab-pane-design",style:{height:e.card_height+"px"}})],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\u7EDF\u8BA1\u8BF4\u660E")]),t("design-description",{staticClass:"my-tab-pane-design",style:{height:e.card_height+"px"}})],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\u6570\u636E\u8BF7\u6C42")]),t("design-request",{staticClass:"my-tab-pane-design",style:{height:e.card_height+"px"}})],1),t("el-tab-pane",[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\u4E8B\u4EF6")]),t("design-action",{staticClass:"my-tab-pane-design",style:{height:e.card_height+"px"}})],1)],1)],1)},rt=[],r=function(){var e=this,t=e._self._c;return t("div",{ref:"myBase",staticClass:"my-base"},[t("el-form",{ref:"form",attrs:{model:e.query_config_base,inline:!0,size:"mini"}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5217\u8868\u540D\u79F0"}},[t("el-input",{staticStyle:{width:"220px"},attrs:{maxlength:"50"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.name,callback:function(i){e.$set(e.query_config_base,"name",i)},expression:"query_config_base.name"}})],1),t("el-form-item",{attrs:{label:"\u5217\u8868\u7F16\u7801"}},[t("el-input",{staticStyle:{width:"220px"},attrs:{maxlength:"50"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.code,callback:function(i){e.$set(e.query_config_base,"code",i)},expression:"query_config_base.code"}})],1),t("el-form-item",{attrs:{label:"\u6570\u636E\u96C6"}},[t("el-popover",{attrs:{placement:"left",trigger:"click",width:"400"},on:{show:e.showPopover},model:{value:e.popover_visible,callback:function(i){e.popover_visible=i},expression:"popover_visible"}},[t("div",[t("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeRadioGroup},model:{value:e.radio_select,callback:function(i){e.radio_select=i},expression:"radio_select"}},[t("el-radio-button",{attrs:{label:"all"}},[e._v("\u6240\u6709")]),t("el-radio-button",{attrs:{label:"associative"}},[e._v("\u5173\u8054\u5F53\u524D")])],1),t("el-input",{staticStyle:{margin:"5px 0px",width:"380px"},attrs:{clearable:"",placeholder:"\u8F93\u5165\u6570\u636E\u96C6\u540D\u79F0\u6216ID",size:"small"},model:{value:e.keywords,callback:function(i){e.keywords=i},expression:"keywords"}}),t("div",{staticStyle:{"overflow-y":"auto",height:"500px"}},[t("el-tree",{ref:"popoverTree",attrs:{"current-node-key":e.query_config_base.datasetId,data:e.datasetDt,"default-expanded-keys":e.query_config_base.datasetId?[e.query_config_base.datasetId]:[],"filter-node-method":e.filterNode,"highlight-current":!0,"node-key":"id"},on:{"node-click":e.selectValue},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{staticClass:"custom-tree-node"},[o.type=="category"?t("span",{attrs:{title:"\u5206\u7C7B [ "+i.label+" ]"}},[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})]),e._v(" "+e._s(i.label)+" ")]):e._e(),o.type=="data"?t("span",{attrs:{title:"\u6570\u636E\u96C6 [ "+i.label+" ]"}},[t("i",{staticClass:"iconfont bi_shujuji",style:{color:e.theme.btn_bgc}}),e._v(e._s(i.label)+" ")]):e._e()])}}])})],1)],1),t("el-tooltip",{attrs:{slot:"reference",disabled:!e.query_config_base.datasetId||e.query_config_base.datasetId=="","open-delay":1500,effect:"light",placement:"top"},slot:"reference"},[t("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},slot:"content"},[t("p",{staticStyle:{"line-height":"40px"}},[e._v("\u6570\u636E\u96C6\u540D\u79F0\uFF1A"+e._s(e.query_config_base.datesetName))]),t("el-button",{staticStyle:{padding:"6px 10px"},attrs:{type:"primary"},on:{click:e.copyDataset}},[e._v("\u590D\u5236\u540D\u79F0 ")]),t("input",{staticStyle:{opacity:"0",position:"absolute",width:"1px"},attrs:{id:"copyTxt",type:"text"},domProps:{value:e.query_config_base.datesetName}})],1),t("el-input",{staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"\u8BF7\u70B9\u51FB\u540E\u9009\u62E9\u6570\u636E\u96C6"},on:{clear:e.clearSelect},model:{value:e.query_config_base.datesetName,callback:function(i){e.$set(e.query_config_base,"datesetName",i)},expression:"query_config_base.datesetName"}})],1)],1),t("el-tooltip",{attrs:{content:"\u7F16\u8F91\u6570\u636E\u96C6","open-delay":1e3,effect:"dark",placement:"top"}},[t("el-button",{staticClass:"edit-btn icon_btn",attrs:{type:"text"},on:{click:function(i){return e.editDataset()}}},[t("i",{staticClass:"iconfont bi_edit4 icon_btn",staticStyle:{"margin-left":"5px"}})])],1),t("el-tooltip",{attrs:{content:"\u5237\u65B0\u6570\u636E\u96C6","open-delay":1e3,effect:"dark",placement:"top"}},[t("el-button",{staticClass:"refresh-btn icon_btn",attrs:{type:"text"},on:{click:function(i){return e.refreshDataset()}}},[t("i",{staticClass:"iconfont bi_refresh1",staticStyle:{color:"#67c23a"}})])],1)],1),t("el-form-item",{attrs:{label:"\u7F29\u7565\u56FE"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5206\u8FA8\u7387\u7684\u500D\u6570\uFF08\u5EFA\u8BAE\u5C0F\u4E8E1\uFF09,\u5927\u5C0F\u4F1A\u5F71\u54CD\u67E5\u8BE2\u548C\u52A0\u8F7D\u901F\u5EA6",effect:"dark",placement:"top"}},[t("el-input-number",{staticStyle:{width:"100px"},attrs:{max:5,min:.1,step:.1,"controls-position":"right"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.screenShotScale,callback:function(i){e.$set(e.query_config_base,"screenShotScale",i)},expression:"query_config_base.screenShotScale"}})],1),t("el-tooltip",{staticStyle:{"margin-left":"5px"},attrs:{"open-delay":1e3,content:"\u66F4\u65B0\u7F29\u7565\u56FE",effect:"dark",placement:"top"}},[t("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.screenShot}},[e._v("\u66F4\u65B0")])],1),t("el-tooltip",{staticStyle:{"margin-left":"5px"},attrs:{"open-delay":1e3,content:"\u662F\u5426\u5728\u4FDD\u5B58\u67E5\u8BE2\u5217\u8868\u914D\u7F6E\u65F6\uFF0C\u81EA\u52A8\u622A\u53D6\u7F29\u7565\u56FE",effect:"dark",placement:"top"}},[t("el-checkbox",{on:{change:e.checkImage},model:{value:e.query_config_base.autoScreenShot,callback:function(i){e.$set(e.query_config_base,"autoScreenShot",i)},expression:"query_config_base.autoScreenShot"}},[e._v("\u81EA\u52A8")])],1)],1),t("el-form-item",{attrs:{label:"\u5217\u8868\u7C7B\u578B"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.query_type,callback:function(i){e.$set(e.query_config_base,"query_type",i)},expression:"query_config_base.query_type"}},e._l(e.global_query.query_type_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u6574\u4F53\u6837\u5F0F"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.global_class,callback:function(i){e.$set(e.query_config_base,"global_class",i)},expression:"query_config_base.global_class"}},e._l(e.global_query.global_class_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1),t("warning-tooltip",{attrs:{content:"\u4FDD\u5B58\u540E\u5237\u65B0\u6709\u6548\u3002\u9ED8\u8BA4\u6837\u5F0F\u662F\u5E73\u53F0\u7EDF\u4E00\u7684\u6837\u5F0F\uFF0C\u8BF7\u4F7F\u7528\u9884\u5B9A\u4E49\u914D\u7F6E(\u5982\u6309\u94AE-\u989C\u8272\u4E3B\u9898)\uFF0C\u5426\u5219\u4ECD\u7136\u4EE5\u81EA\u5B9A\u4E49\u914D\u7F6E\u4E3A\u51C6\u3002"}}),t("el-tooltip",{attrs:{content:"\u91CD\u7F6E\u9ED8\u8BA4\u914D\u7F6E"}},[t("theme-platform-reset",{directives:[{name:"show",rawName:"v-show",value:e.query_config_base.global_class==="platform",expression:"query_config_base.global_class === 'platform'"}]})],1)],1),t("el-form-item",{attrs:{label:"\u81EA\u52A8\u4FDD\u5B58"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5F00\u542F\u540E\uFF0C\u5B9A\u65F6\u81EA\u52A8\u4FDD\u5B58\u67E5\u8BE2\u5217\u8868\uFF0C\u9ED8\u8BA4\u6BCF10\u5206\u949F\u4E00\u6B21",effect:"dark",placement:"top"}},[t("el-switch",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.autoSave,callback:function(i){e.$set(e.query_config_base,"autoSave",i)},expression:"query_config_base.autoSave"}})],1),e.query_config_base.autoSave==!0?[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u81EA\u52A8\u4FDD\u5B58\u7684\u65F6\u95F4\u95F4\u9694\uFF08\u5355\u4F4D\uFF1A\u5206\u949F\uFF09",effect:"dark",placement:"top"}},[t("el-input-number",{staticClass:"my-style-number-3",staticStyle:{width:"80px","margin-left":"8px","margin-right":"8px"},attrs:{min:3,step:.1,"controls-position":"right"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.autoSaveTime,callback:function(i){e.$set(e.query_config_base,"autoSaveTime",i)},expression:"query_config_base.autoSaveTime"}})],1),e._v(" \u5206\u949F ")]:e._e()],2)],1),t("div",{staticClass:"form-container button"},[t("el-form-item",{staticStyle:{width:"160px"},attrs:{label:"\u67E5\u8BE2\u8017\u65F6"}},[t("el-switch",{on:{change:e.changeQueryTimeEnable},model:{value:e.query_config_base.query_time,callback:function(i){e.$set(e.query_config_base,"query_time",i)},expression:"query_config_base.query_time"}})],1),t("el-form-item",{staticStyle:{width:"160px"},attrs:{label:"\u542F\u7528\u5206\u9875\u63A7\u4EF6"}},[t("el-switch",{on:{change:e.changePaginationEnable},model:{value:e.query_config_base.pagination_enable,callback:function(i){e.$set(e.query_config_base,"pagination_enable",i)},expression:"query_config_base.pagination_enable"}})],1),t("el-form-item",{staticStyle:{width:"160px"},attrs:{label:"\u9884\u89C8\u7B5B\u9009\u6761\u4EF6"}},[t("el-switch",{on:{change:e.changePreviewConditionEnable},model:{value:e.query_config_base.preview_condition_enable,callback:function(i){e.$set(e.query_config_base,"preview_condition_enable",i)},expression:"query_config_base.preview_condition_enable"}})],1),t("el-form-item",{staticStyle:{width:"160px"},attrs:{label:"\u542F\u7528\u9ED8\u8BA4\u6392\u5E8F"}},[t("el-switch",{on:{change:e.changeOrdersEnable},model:{value:e.query_config_base.orders_enable,callback:function(i){e.$set(e.query_config_base,"orders_enable",i)},expression:"query_config_base.orders_enable"}})],1),t("el-form-item",{staticStyle:{width:"160px"},attrs:{label:"\u542F\u7528\u9876\u90E8\u6392\u5E8F"}},[t("el-switch",{on:{change:e.changeOrdersEnable},model:{value:e.query_config_base.orders_header_enable,callback:function(i){e.$set(e.query_config_base,"orders_header_enable",i)},expression:"query_config_base.orders_header_enable"}})],1)],1)]),t("el-form",{attrs:{size:"mini"}},[t("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(i){e.activeNames=i},expression:"activeNames"}},[t("el-collapse-item",{attrs:{name:"param"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"param"}}),e._v("\u5168\u5C40\u53D8\u91CF ")]),t("global-param",{ref:"globalParam"})],1),e.queryConfig.base.query_type==e.global_query.query_type.card.code?t("el-collapse-item",{attrs:{name:"table"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"table"}}),e._v("\u5361\u7247\u8BBE\u7F6E ")]),t("base-card")],1):t("el-collapse-item",{attrs:{name:"table"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"table"}}),e._v("\u8868\u683C\u8BBE\u7F6E ")]),t("base-table")],1),t("el-collapse-item",{attrs:{name:"footer"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"footer"}}),e._v("\u5E95\u90E8\u8BBE\u7F6E ")]),t("base-footer",{ref:"baseFooter"})],1),t("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.query_config_base.pagination_enable,expression:"query_config_base.pagination_enable"}],attrs:{name:"pagination"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"pagination"}}),e._v("\u5206\u9875\u63A7\u4EF6 ")]),t("base-pagination",{ref:"base_pagination"})],1),e.query_config_base.preview_condition_enable?t("el-collapse-item",{attrs:{name:"condition"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"condition"}}),e._v("\u7B5B\u9009\u6761\u4EF6 ")]),t("base-preview-condition",{ref:"basePreviewCondition"})],1):e._e(),t("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.query_config_base.orders_enable,expression:"query_config_base.orders_enable"}],attrs:{name:"order"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"order"}}),e._v("\u9ED8\u8BA4\u6392\u5E8F ")]),t("base-order")],1),t("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.query_config_base.orders_header_enable,expression:"query_config_base.orders_header_enable"}],attrs:{name:"order_header"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"order"}}),e._v("\u9876\u90E8\u6392\u5E8F\u8BBE\u7F6E ")]),t("base-order-header")],1),t("el-collapse-item",{attrs:{name:"style"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"style"}}),e._v("\u6574\u4F53\u6837\u5F0F ")]),t("base-style")],1),t("el-collapse-item",{attrs:{name:"resource"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"resource"}}),e._v("\u8D44\u6E90\u6587\u4EF6 "),t("warning-tooltip",{attrs:{content:"\u67E5\u8BE2\u5217\u8868\u5728\u770B\u677F\u4E2D\u4F5C\u4E3A\u7EC4\u4EF6\u4F7F\u7528\u65F6\uFF0C\u4EE5\u4E0B\u8D44\u6E90\u6587\u4EF6\u5747\u4E0D\u52A0\u8F7D\uFF0C\u9700\u8981\u5728\u770B\u677F\u4E2D\u91CD\u65B0\u5F15\u7528\uFF1B\u53EF\u52A0\u5730\u5740\u680Fload_resource_file=false\uFF08\u4E0D\u52A0\u8F7D\u8D44\u6E90\uFF0C\u8BBE\u8BA1\u548C\u9884\u89C8\u754C\u9762\u5747\u6709\u6548\uFF09"}}),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5F00\u542F\u540E\uFF0C\u5728\u8BBE\u8BA1\u754C\u9762\u52A0\u8F7D\u8D44\u6E90\u6587\u4EF6\uFF08\u6B64\u9879\u914D\u7F6E\uFF0C\u4EC5\u5728\u8BBE\u8BA1\u754C\u9762\u6709\u6548\uFF09\uFF0C\u53EF\u52A0\u5730\u5740\u680Fload_resource_file=false\uFF08\u8BBE\u8BA1\u548C\u9884\u89C8\u754C\u9762\u5747\u6709\u6548\uFF09",effect:"dark",placement:"top"}},[t("el-switch",{staticStyle:{"margin-left":"10px"},on:{change:e.changeLoadResourceFileEnable},model:{value:e.query_config_base.load_resource_file,callback:function(i){e.$set(e.query_config_base,"load_resource_file",i)},expression:"query_config_base.load_resource_file"}})],1)],1),t("base-resource")],1)],1)],1),t("el-dialog",{staticClass:"dialog-query-setData",attrs:{"append-to-body":!0,"close-on-click-modal":!1,"modal-append-to-body":!0,visible:e.dialogVisibleDataSet,width:e.dialog.width+"px",title:"\u6570\u636E\u96C6\u914D\u7F6E"},on:{"update:visible":function(i){e.dialogVisibleDataSet=i},open:e.datasetDialogOpen}},[t("div",{style:{height:e.dialog.height+"px",overflowY:"auto"}},[t("data-set",{ref:"datasetDialog",attrs:{associativeIds:e.queryConfig.associativeDataset,"current-dataset-id":e.query_config_base.datasetId,isAssociative:!0},on:{changeAssociativeIds:e.changeAssociativeIds}})],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(i){e.dialogVisibleDataSet=!1}}},[e._v("\u5173 \u95ED")])],1)])],1)},l=[],s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base_table"},[t("el-form",{ref:"form",attrs:{size:"mini",inline:!0,model:e.query_config_base_table}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u8868\u683C\u5C3A\u5BF8"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u8868\u683C\u5C3A\u5BF8","popper-class":"white-bgc"},on:{change:e.changeTableSize},model:{value:e.query_config_base_table.size,callback:function(i){e.$set(e.query_config_base_table,"size",i)},expression:"query_config_base_table.size"}},e._l(e.global_query.table_size_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u8868\u683C\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right",placeholder:"\u4E3A\u7A7A\u65F6\u81EA\u52A8\u9002\u5E94(px)"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.height,callback:function(i){e.$set(e.query_config_base_table,"height",i)},expression:"query_config_base_table.height"}})],1),t("el-form-item",{attrs:{label:"\u7ED1\u5B9A\u5F39\u7A97"}},[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u6253\u5F00\u7684\u5F39\u7A97","popper-class":"white-bgc"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.dialog_id,callback:function(i){e.$set(e.query_config_base_table,"dialog_id",i)},expression:"query_config_base_table.dialog_id"}},e._l(e.dialog_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{staticClass:"class-empty-text",attrs:{label:"\u7A7A\u6570\u636E"}},[e.query_config_base_table.is_empty_text!=!0?t("el-input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"\u7A7A\u6570\u636E\u65F6\u663E\u793A\u7684\u6587\u672C"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.empty_text,callback:function(i){e.$set(e.query_config_base_table,"empty_text",i)},expression:"query_config_base_table.empty_text"}}):e._e(),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u81EA\u5B9A\u4E49\u7A7A\u6570\u636E\u65F6\u663E\u793A\u7684\u6587\u672C\u5185\u5BB9",effect:"light",placement:"top"}},[t("query-script",{attrs:{options:e.options.script_empty_text},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table,callback:function(i){e.query_config_base_table=i},expression:"query_config_base_table"}})],1)],1)],1),t("div",{staticClass:"form-container button"},[t("el-form-item",{attrs:{label:"\u6591\u9A6C\u7EB9"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.stripe,callback:function(i){e.$set(e.query_config_base_table,"stripe",i)},expression:"query_config_base_table.stripe"}})],1),t("el-form-item",{attrs:{label:"\u7EB5\u5411\u8FB9\u6846"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.border,callback:function(i){e.$set(e.query_config_base_table,"border",i)},expression:"query_config_base_table.border"}})],1),t("el-form-item",{attrs:{label:"\u9AD8\u4EAE\u5F53\u524D\u884C"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.highlight_current_row,callback:function(i){e.$set(e.query_config_base_table,"highlight_current_row",i)},expression:"query_config_base_table.highlight_current_row"}})],1),t("el-form-item",{attrs:{label:"\u663E\u793A\u5E8F\u53F7"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.column_type_index,callback:function(i){e.$set(e.query_config_base_table,"column_type_index",i)},expression:"query_config_base_table.column_type_index"}})],1),t("el-form-item",{attrs:{label:"\u663E\u793A\u591A\u9009\u6846"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.column_type_selection,callback:function(i){e.$set(e.query_config_base_table,"column_type_selection",i)},expression:"query_config_base_table.column_type_selection"}})],1),t("el-form-item",{attrs:{label:"\u663E\u793A\u8868\u5934"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.show_header,callback:function(i){e.$set(e.query_config_base_table,"show_header",i)},expression:"query_config_base_table.show_header"}})],1),t("el-form-item",{attrs:{label:"\u6570\u636E\u61D2\u52A0\u8F7D"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTableLazy},model:{value:e.query_config_base_table.lazy,callback:function(i){e.$set(e.query_config_base_table,"lazy",i)},expression:"query_config_base_table.lazy"}})],1),t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u884C\u70B9\u51FB\u4E8B\u4EF6"}},[t("query-script",{attrs:{options:e.options.row_click},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table,callback:function(i){e.query_config_base_table=i},expression:"query_config_base_table"}})],1)],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u64CD\u4F5C\u6309\u94AE\u5217")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u4F4D\u7F6E"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.column_button_position,callback:function(i){e.$set(e.query_config_base,"column_button_position",i)},expression:"query_config_base.column_button_position"}},e._l(e.global_query.column_button_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),e.query_config_base.column_button_position!=e.global_query.position.none.code?[t("el-form-item",{attrs:{label:"\u6807\u9898\u6587\u672C"}},[t("el-input",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.column_button_label,callback:function(i){e.$set(e.query_config_base,"column_button_label",i)},expression:"query_config_base.column_button_label"}})],1),t("el-form-item",{attrs:{label:"\u6807\u9898\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.column_button_header_align,callback:function(i){e.$set(e.query_config_base,"column_button_header_align",i)},expression:"query_config_base.column_button_header_align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.column_button_align,callback:function(i){e.$set(e.query_config_base,"column_button_align",i)},expression:"query_config_base.column_button_align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5217\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right",placeholder:"\u4E3A\u7A7A\u65F6\u81EA\u52A8\u9002\u5E94(px)"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.column_button_width,callback:function(i){e.$set(e.query_config_base,"column_button_width",i)},expression:"query_config_base.column_button_width"}})],1),t("div",[t("el-form-item",{attrs:{label:"\u4F4D\u7F6E\u56FA\u5B9A"}},[t("el-switch",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.column_button_fixed,callback:function(i){e.$set(e.query_config_base,"column_button_fixed",i)},expression:"query_config_base.column_button_fixed"}})],1),t("el-form-item",{attrs:{label:"\u81EA\u52A8\u9690\u85CF"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u64CD\u4F5C\u5217\u6CA1\u6709\u6309\u94AE\u663E\u793A\u65F6\uFF0C\u9690\u85CF\u64CD\u4F5C\u5217",effect:"light",placement:"top"}},[t("el-switch",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base.column_button_hide,callback:function(i){e.$set(e.query_config_base,"column_button_hide",i)},expression:"query_config_base.column_button_hide"}})],1)],1)],1)]:e._e()],2),e.query_config_base_table.column_type_selection==!0?[t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u591A\u9009\u6846\u914D\u7F6E")]),t("el-form-item",{attrs:{label:"\u662F\u5426\u53EF\u7528"}},[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u53EF\u7528\u5BF9\u5E94\u7684\u5B57\u6BB5","popper-class":"white-bgc",size:"mini"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.column_type_selection_field,callback:function(i){e.$set(e.query_config_base_table,"column_type_selection_field",i)},expression:"query_config_base_table.column_type_selection_field"}},e._l(this.field_list,function(i){return t("el-option",{key:i.field,attrs:{label:i.label,value:i.field}})}),1),t("warning-tooltip",{attrs:{content:"\u5B57\u6BB5\u503C\u4E3A\u771F\u65F6\u53EF\u4EE5\u9009\uFF0C\u4E3A\u5047\u65F6\u4E0D\u53EF\u9009\uFF1B1\u548Ctrue\u4E3A\u771F\uFF0C0\u548Cfalse\u4E3A\u5047"}})],1),t("el-form-item",{attrs:{label:"\u5B9A\u4E49\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.column_type_selection_value},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table,callback:function(i){e.query_config_base_table=i},expression:"query_config_base_table"}})],1)]:e._e(),e.query_config_base_table.column_type_index==!0?[t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u5E8F\u53F7\u914D\u7F6E")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u6807\u9898\u6587\u672C"}},[t("el-input",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.column_type_index_label,callback:function(i){e.$set(e.query_config_base_table,"column_type_index_label",i)},expression:"query_config_base_table.column_type_index_label"}})],1),t("el-form-item",{attrs:{label:"\u6807\u9898\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.column_type_index_header_align,callback:function(i){e.$set(e.query_config_base_table,"column_type_index_header_align",i)},expression:"query_config_base_table.column_type_index_header_align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.column_type_index_align,callback:function(i){e.$set(e.query_config_base_table,"column_type_index_align",i)},expression:"query_config_base_table.column_type_index_align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5217\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right",placeholder:"\u4E3A\u7A7A\u65F6\u81EA\u52A8\u9002\u5E94(px)"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.column_type_index_width,callback:function(i){e.$set(e.query_config_base_table,"column_type_index_width",i)},expression:"query_config_base_table.column_type_index_width"}})],1)],1)]:e._e(),e.query_config_base_table.lazy==!0?[t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u6811\u5F62\u6570\u636E\u61D2\u52A0\u8F7D")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u56FE\u6807\u663E\u793A"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5B50\u8282\u70B9\u5C55\u5F00\u7C7B\u578B",effect:"light",placement:"top"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.children_type,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"children_type",i)},expression:"query_config_base_table.lazy_config.children_type"}},e._l(e.global_query.children_type_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1)],1),e.query_config_base_table.lazy_config.children_type==e.global_query.children_type.expand_field.code?t("el-form-item",{attrs:{label:"\u5C55\u5F00\u5B57\u6BB5"}},[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u53EF\u4EE5\u5C55\u5F00\u5B50\u96C6\u5BF9\u5E94\u7684\u5B57\u6BB5","popper-class":"white-bgc",size:"mini"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.children_expand_field,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"children_expand_field",i)},expression:"query_config_base_table.lazy_config.children_expand_field"}},e._l(this.field_list,function(i){return t("el-option",{key:i.field,attrs:{label:i.label,value:i.field}})}),1),t("warning-tooltip",{attrs:{content:"\u6839\u636E\u5B57\u6BB5\u663E\u793A\u884C\u6570\u636E\u662F\u5426\u53EF\u4EE5\u5C55\u5F00\u5B50\u96C6\uFF0C\u5B57\u6BB5\u503C\u4E3A\u771F\u65F6\u53EF\u4EE5\u5C55\u5F00\uFF0C\u4E3A\u5047\u65F6\u4E0D\u53EF\u5C55\u5F00\uFF1B1\u548Ctrue\u4E3A\u771F\uFF0C0\u548Cfalse\u4E3A\u5047"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u7236\u7EA7\u5173\u8054\u5B57\u6BB5"}},[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B50\u96C6\u67E5\u8BE2\u5BF9\u5E94\u7684\u5B57\u6BB5","popper-class":"white-bgc",size:"mini"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.children_filter_field,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"children_filter_field",i)},expression:"query_config_base_table.lazy_config.children_filter_field"}},e._l(this.field_list,function(i){return t("el-option",{key:i.field,attrs:{label:i.label,value:i.field}})}),1),t("warning-tooltip",{attrs:{content:"\u6839\u636E\u7236\u7EA7\u6570\u636E\u91CC\u7684\u6B64\u5B57\u6BB5\u503C\uFF0C\u53BB\u67E5\u8BE2\u5B50\u96C6\u6570\u636E"}})],1),t("el-form-item",[t("div",{attrs:{slot:"label"},slot:"label"},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5B50\u96C6\u6570\u636E\u96C6\uFF1A\u5C06\u8981\u5C55\u793A\u51FA\u6765\u7684\u5B57\u6BB5\u540D\uFF0C\u5FC5\u987B\u8DDF\u5F53\u524D\u67E5\u8BE2\u5217\u8868\u7684\u5B57\u6BB5\u540D\u4E00\u6837\uFF0C\u5426\u5219\u5C06\u65E0\u6CD5\u663E\u793A\uFF1B\u6570\u636E\u96C6\u5FC5\u987B\u5305\u542B\u4E00\u4E2A\u67E5\u5B50\u96C6\u7684\u53C2\u6570",effect:"light",placement:"top"}},[t("span",[e._v("\u5B50\u6570\u636E\u96C6")])])],1),t("select-tree-data-set",{attrs:{clearable:!0,placeholder:"\u8BF7\u9009\u62E9\u5B50\u96C6\u6570\u636E\u96C6"},on:{change:e.changeQueryConfigBaseTableDataSet},model:{value:e.query_config_base_table.lazy_config.data_set,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"data_set",i)},expression:"query_config_base_table.lazy_config.data_set"}})],1),e.query_config_base_table.lazy_config.data_set&&e.query_config_base_table.lazy_config.data_set.dataSetId&&e.query_config_base_table.lazy_config.data_set.dataSetId!=""?t("el-form-item",{attrs:{label:"\u5B50\u96C6\u67E5\u8BE2\u5B57\u6BB5"}},[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B50\u96C6\u67E5\u8BE2\u7684\u53C2\u6570\u540D","popper-class":"white-bgc",size:"mini"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.children_filter_param,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"children_filter_param",i)},expression:"query_config_base_table.lazy_config.children_filter_param"}},e._l(this.filter_param_list,function(i){return t("el-option",{key:i.name,attrs:{label:i.name,value:i.name}})}),1),t("warning-tooltip",{attrs:{content:"\u5B50\u6570\u636E\u96C6\u91CC\u5BF9\u5E94\u7684\u67E5\u8BE2\u5B57\u6BB5"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u5C55\u5F00\u56FE\u6807"}},[t("el-icon",{attrs:{icon:e.query_config_base_table.lazy_config.icon_packup,"disabled-select-icon-font":!0,"default-current-icon-font":"element"},on:{"on-icon-change":e.onIconChangePackup}},[t("warning-tooltip",{attrs:{slot:"warning-tooltip",content:"\u4EC5\u9650\u4E8EelementUI\u5B57\u4F53\u56FE\u6807\uFF0C\u9ED8\u8BA4\u4F7F\u7528el-icon-arrow-down"},slot:"warning-tooltip"})],1)],1),t("el-form-item",{attrs:{label:"\u6536\u8D77\u56FE\u6807"}},[t("el-icon",{attrs:{icon:e.query_config_base_table.lazy_config.icon_expanded,"disabled-select-icon-font":!0,"default-current-icon-font":"element"},on:{"on-icon-change":e.onIconChangeExpanded}},[t("warning-tooltip",{attrs:{slot:"warning-tooltip",content:"\u4EC5\u9650\u4E8EelementUI\u5B57\u4F53\u56FE\u6807\uFF0C\u9ED8\u8BA4\u4F7F\u7528el-icon-arrow-right"},slot:"warning-tooltip"})],1)],1),t("el-form-item",{attrs:{label:"\u56FE\u6807\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6309\u94AE\u989C\u8272"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.icon_color,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"icon_color",i)},expression:"query_config_base_table.lazy_config.icon_color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.icon_color,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"icon_color",i)},expression:"query_config_base_table.lazy_config.icon_color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u56FE\u6807\u5927\u5C0F"}},[t("el-input-number",{attrs:{max:100,min:8,step:.5,"controls-position":"right",placeholder:"\u56FE\u6807\u5927\u5C0F"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.icon_size,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"icon_size",i)},expression:"query_config_base_table.lazy_config.icon_size"}})],1),t("el-form-item",{attrs:{label:"\u56FE\u6807\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{max:100,min:1,step:.5,"controls-position":"right",placeholder:"\u56FE\u6807\u5BBD\u5EA6"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.icon_width,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"icon_width",i)},expression:"query_config_base_table.lazy_config.icon_width"}})],1),t("el-form-item",{attrs:{label:"\u56FE\u6807\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{max:100,min:1,step:.5,"controls-position":"right",placeholder:"\u56FE\u6807\u9AD8\u5EA6"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.icon_height,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"icon_height",i)},expression:"query_config_base_table.lazy_config.icon_height"}})],1)],1),t("div",{staticClass:"form-container button"},[t("el-form-item",{attrs:{label:"\u81EA\u52A8\u5C55\u5F00\u7236\u7EA7"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.auto_load,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"auto_load",i)},expression:"query_config_base_table.lazy_config.auto_load"}})],1)],1),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5B9A\u4E49\u5E8F\u53F7"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTableIndexFormatter},model:{value:e.query_config_base_table.lazy_config.is_index_formatter,callback:function(i){e.$set(e.query_config_base_table.lazy_config,"is_index_formatter",i)},expression:"query_config_base_table.lazy_config.is_index_formatter"}}),t("el-tooltip",{attrs:{content:"\u6DFB\u52A0\u81EA\u5B9A\u4E49\u5E8F\u53F7","open-delay":1e3,effect:"light",placement:"top"}},[e.query_config_base_table.lazy_config.is_index_formatter==!0?t("el-button",{staticClass:"el-icon-plus",staticStyle:{color:"#13ce66","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text"},on:{click:e.addIndexFormatter}}):e._e()],1),t("warning-tooltip",{attrs:{content:"\u9700\u8981\u6DFB\u52A0\u5C42\u7EA7\u5E8F\u53F7\u7684\u663E\u793A\u683C\u5F0F\uFF0C\u7B2C1\u7EA7\u4E0D\u9700\u8981\u5904\u7406"}})],1),e.query_config_base_table.lazy_config.is_index_formatter==!0?e._l(e.query_config_base_table.lazy_config.index_formatter_arrary,function(i,o){return t("el-form-item",{attrs:{label:o+2+"\u7EA7\u683C\u5F0F"}},[t("el-input",{attrs:{placeholder:"${level_1}-${level_2}"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.lazy_config.index_formatter_arrary[o],callback:function(n){e.$set(e.query_config_base_table.lazy_config.index_formatter_arrary,o,n)},expression:"query_config_base_table.lazy_config.index_formatter_arrary[index]"}}),o>0?t("el-tooltip",{attrs:{content:"\u5220\u9664\u81EA\u5B9A\u4E49\u5E8F\u53F7","open-delay":1e3,effect:"light",placement:"top"}},[t("el-button",{staticClass:"el-icon-delete",staticStyle:{color:"#f6061b","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text"},on:{click:function(n){return e.deleteIndexFormatter(o)}}})],1):e._e(),t("warning-tooltip",{attrs:{content:"\u793A\u4F8B\uFF1A1-2(3)\uFF0C\u5373${level_1}-${level_2}(${level_3})\uFF0C\u5176\u4E2D${level_1}\u4E3A\u7B2C1\u7EA7\u5E8F\u53F7\uFF0C${level_2}\u4E3A\u7B2C2\u7EA7\u5E8F\u53F7\uFF0C${level_3}\u4E3A\u7B2C3\u7EA7\u5E8F\u53F7"}})],1)}):e._e()],2)]:e._e(),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u8868\u683C\u6837\u5F0F")]),t("el-card",{staticClass:"my-table-box-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("\u8868\u5934\u6837\u5F0F")])]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right",placeholder:"\u4E3A\u7A7A\u65F6\u81EA\u52A8\u9002\u5E94(px)"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.header_height,callback:function(i){e.$set(e.query_config_base_table,"header_height",i)},expression:"query_config_base_table.header_height"}})],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u8FC7\u957F\u63D0\u793A","label-width":"102px"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.header_tooltip,callback:function(i){e.$set(e.query_config_base_table,"header_tooltip",i)},expression:"query_config_base_table.header_tooltip"}}),t("warning-tooltip",{attrs:{content:"\u4E0D\u5F00\u542F\u8BE5\u914D\u7F6E\u65F6\uFF0C\u5185\u5BB9\u8FC7\u591A\u65F6\u9AD8\u5EA6\u4F1A\u88AB\u6491\u5F00\u3002"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u5B57\u4F53\u989C\u8272"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.header_color,callback:function(i){e.$set(e.query_config_base_table,"header_color",i)},expression:"query_config_base_table.header_color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.header_color,callback:function(i){e.$set(e.query_config_base_table,"header_color",i)},expression:"query_config_base_table.header_color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{min:12,step:.1,"controls-position":"right",placeholder:"\u5B57\u4F53\u5927\u5C0F(px)"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.header_fontSize,callback:function(i){e.$set(e.query_config_base_table,"header_fontSize",i)},expression:"query_config_base_table.header_fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.header_fontFamily,callback:function(i){e.$set(e.query_config_base_table,"header_fontFamily",i)},expression:"query_config_base_table.header_fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.header_backgroundColor,callback:function(i){e.$set(e.query_config_base_table,"header_backgroundColor",i)},expression:"query_config_base_table.header_backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.header_backgroundColor,callback:function(i){e.$set(e.query_config_base_table,"header_backgroundColor",i)},expression:"query_config_base_table.header_backgroundColor"}})],1)],1)],1),e.query_config_base_table.show_header==!0?t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.header_row_style},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table,callback:function(i){e.query_config_base_table=i},expression:"query_config_base_table"}})],1):e._e()],1)]),t("el-card",{staticClass:"my-table-box-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("\u884C\u6837\u5F0F")])]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right",placeholder:"\u4E3A\u7A7A\u65F6\u81EA\u52A8\u9002\u5E94(px)"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.row_height,callback:function(i){e.$set(e.query_config_base_table,"row_height",i)},expression:"query_config_base_table.row_height"}})],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u8FC7\u957F\u63D0\u793A","label-width":"102px"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.row_tooltip,callback:function(i){e.$set(e.query_config_base_table,"row_tooltip",i)},expression:"query_config_base_table.row_tooltip"}}),t("warning-tooltip",{attrs:{content:"\u5F00\u542F\u8BE5\u914D\u7F6E\u65F6\uFF0C\u9664\u64CD\u4F5C\u5217\u5916\u7684\u6240\u6709\u5217\u5747\u4F1A\u5F00\u542F\u5185\u5BB9\u8FC7\u957F\u63D0\u793A"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u5B57\u4F53\u989C\u8272"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.row_color,callback:function(i){e.$set(e.query_config_base_table,"row_color",i)},expression:"query_config_base_table.row_color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.row_color,callback:function(i){e.$set(e.query_config_base_table,"row_color",i)},expression:"query_config_base_table.row_color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{min:12,step:.1,"controls-position":"right",placeholder:"\u5B57\u4F53\u5927\u5C0F(px)"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.row_fontSize,callback:function(i){e.$set(e.query_config_base_table,"row_fontSize",i)},expression:"query_config_base_table.row_fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.row_fontFamily,callback:function(i){e.$set(e.query_config_base_table,"row_fontFamily",i)},expression:"query_config_base_table.row_fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.row_backgroundColor,callback:function(i){e.$set(e.query_config_base_table,"row_backgroundColor",i)},expression:"query_config_base_table.row_backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table.row_backgroundColor,callback:function(i){e.$set(e.query_config_base_table,"row_backgroundColor",i)},expression:"query_config_base_table.row_backgroundColor"}})],1)],1)],1),t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.row_style},on:{change:e.changeQueryConfigBaseTable},model:{value:e.query_config_base_table,callback:function(i){e.query_config_base_table=i},expression:"query_config_base_table"}})],1)],1)])],2)],1)},u=[],_=c(848384),v=c(523996),x=function(){var e=this,t=e._self._c;return t("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9"},on:{change:e.change},model:{value:e.selectedValue,callback:function(i){e.selectedValue=i},expression:"selectedValue"}},e._l(e.fontList,function(i){return t("el-option-group",{key:i.label,attrs:{label:i.label}},e._l(i.options,function(o){return t("el-option",{key:o.value,style:{fontFamily:o.value},attrs:{label:o.label,value:o.value}})}),1)}),1)},Q=[],be=c(808041),pt={name:"font-select",props:["value"],data(){return{selectedValue:this.value,fontList:[]}},watch:{value(){this.selectedValue=this.value}},mounted(){this.initData()},methods:{initData(){let a={pageName:1,pageSize:9999999,fontFile:JSON.stringify({fontName:""})};be.N.getListByPage(a).then(e=>{if(e&&e.status==200){let t={label:"\u81EA\u5B9A\u4E49",options:[]};if(e.data.list){let n=[];for(let d=0;d<e.data.list.length;d++){let g=e.data.list[d];g.label=g.fontFamily,g.value=g.fontId,g.resId=g.fontId,n.push(g)}this.setFonts(n),t.options=n}this.fontList.push(t);let i={label:"\u7CFB\u7EDF\u5185\u7F6E",options:[]},o=this.$$global_editor.fontFamily;for(let n=0;n<o.length;n++){let d={};d.fontId="",d.fontFamily=o[n].label,d.fontName=o[n].value,d.createdByName="\u7CFB\u7EDF\u5185\u7F6E",d.label=o[n].label,d.value=o[n].value,i.options.push(d)}this.fontList.push(i)}})},change(){this.$emit("input",this.selectedValue),this.$emit("change",this.selectedValue)},setFonts(a){if(a&&a.length>0){a=a.filter((t,i)=>{let o=[];return a.forEach(n=>o.push(n.resId)),o.indexOf(t.resId)==i});let e="";a.forEach(t=>{let i=t.resId;if(i){let o=i.split("-")[1],n=`./resource/font/${i}.${o}`;e+=`@font-face {font-family: "${i}"; src: url('${n}') format('${o}')}`}}),j.appendCss("font-style",e)}}}},nt=pt,wt=(0,D.Z)(nt,x,Q,!1,null,"449172f0",null),ye=wt.exports,St=function(){var e=this,t=e._self._c;return t("div",[t("el-popover",{attrs:{placement:"left",trigger:"click",width:"400"},on:{show:e.showPopover},model:{value:e.popover_visible,callback:function(i){e.popover_visible=i},expression:"popover_visible"}},[t("div",[t("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeRadioGroup},model:{value:e.radio_select,callback:function(i){e.radio_select=i},expression:"radio_select"}},[t("el-radio-button",{attrs:{label:"all"}},[e._v("\u6240\u6709")]),t("el-radio-button",{attrs:{label:"associative"}},[e._v("\u5173\u8054\u5F53\u524D")])],1),t("el-input",{staticStyle:{margin:"5px 0px",width:"380px"},attrs:{clearable:"",placeholder:"\u8F93\u5165\u6570\u636E\u96C6\u540D\u79F0\u6216ID",size:"small"},model:{value:e.keywords,callback:function(i){e.keywords=i},expression:"keywords"}}),t("div",{staticStyle:{"overflow-y":"auto",height:"500px"}},[t("el-tree",{ref:"popoverTree",attrs:{"current-node-key":e.data_set.dataSetId,data:e.treeData,"default-expanded-keys":e.data_set.dataSetId?[e.data_set.dataSetId]:[],"filter-node-method":e.filterNodeMethod,"highlight-current":!0,"node-key":"id"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{staticClass:"custom-tree-node"},[o.type=="category"?t("span",{attrs:{title:"\u5206\u7EC4 [ "+i.label+" ]"}},[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})]),e._v(" "+e._s(i.label)+" ")]):e._e(),o.type=="data"?t("span",{attrs:{title:"\u6570\u636E\u96C6 [ "+i.label+" ]"}},[t("i",{staticClass:"iconfont bi_shujuji",style:{color:e.theme.btn_bgc}}),e._v(e._s(i.label)+" ")]):e._e()])}}])})],1)],1),t("el-tooltip",{attrs:{slot:"reference",disabled:!e.data_set.dataSetId||e.data_set.dataSetId=="","open-delay":1500,effect:"light",placement:"top"},slot:"reference"},[t("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},slot:"content"},[t("p",{staticStyle:{"line-height":"40px"}},[e._v("\u6570\u636E\u96C6\u540D\u79F0\uFF1A"+e._s(e.data_set.dataSetName))]),t("el-button",{staticStyle:{padding:"6px 10px"},attrs:{type:"primary"},on:{click:e.copyDataset}},[e._v("\u590D\u5236\u540D\u79F0")]),t("input",{staticStyle:{opacity:"0",position:"absolute",width:"1px"},attrs:{id:"copyTxt",type:"text"},domProps:{value:e.data_set.dataSetName}})],1),t("el-input",{staticStyle:{width:"170px"},attrs:{clearable:"",placeholder:"\u8BF7\u70B9\u51FB\u540E\u9009\u62E9\u6570\u636E\u96C6"},on:{clear:e.clearSelect},model:{value:e.data_set.dataSetName,callback:function(i){e.$set(e.data_set,"dataSetName",i)},expression:"data_set.dataSetName"}})],1)],1),e.data_set.dataSetId&&e.data_set.dataSetId!=""?[t("el-tooltip",{attrs:{content:"\u914D\u7F6E\u6570\u636E\u96C6\u53C2\u6570","open-delay":1e3,effect:"light",placement:"top"}},[t("i",{staticClass:"iconfont bi-iconfont",staticStyle:{color:"#409eff","font-size":"20px",cursor:"pointer","margin-left":"5px"},on:{click:function(i){return e.setConfigQuery()}}},[e._v("\uE722")])]),t("el-tooltip",{attrs:{content:"\u5237\u65B0\u6570\u636E\u96C6","open-delay":1e3,effect:"light",placement:"top"}},[t("i",{staticClass:"iconfont bi-iconfont",staticStyle:{color:"#00f7c7","font-size":"16px",cursor:"pointer","margin-left":"5px"},on:{click:function(i){return e.refDataSet()}}},[e._v("\uE70E")])])]:e._e(),t("select-tree-data-set-dialog",{ref:"selectTreeDataSetDialog",on:{change:function(i){return e.changeValue()}},model:{value:e.data_set,callback:function(i){e.data_set=i},expression:"data_set"}})],2)},kt=[],$t=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-dialog",{staticClass:"dialog-query-setData",attrs:{title:e.title,visible:e.dialogVisible,"modal-append-to-body":!0,"close-on-click-modal":!1,"append-to-body":!0,width:e.dialog.width+"px"},on:{"update:visible":function(i){e.dialogVisible=i},opened:e.dialogOpened}},[t("div",{style:{height:e.dialog.height+"px",overflowY:"auto"}},[t("div",{staticClass:"data-preview",style:{height:e.dialog.height-20+"px"}},[t("preview",{ref:"preview_dynamic"})],1),t("div",{staticClass:"data-query",style:{height:e.dialog.height-20+"px"}},[e.dialogVisible&&e.datasourceType==this.$$global.sourceType.jdbc.code?t("data-set-query-jdbc",{ref:"configQuery",attrs:{divHDialog:e.dialog.height-25+"px",dimensionsAlias:e.data_set_info.dimensionsAlias},model:{value:e.data_set_info.query,callback:function(i){e.$set(e.data_set_info,"query",i)},expression:"data_set_info.query"}}):e._e(),e.dialogVisible&&e.datasourceType==this.$$global.sourceType.interface.code?t("data-set-query-interface",{ref:"configQuery",attrs:{divHDialog:e.dialog.height-25+"px",dimensionsAlias:e.data_set_info.dimensionsAlias},model:{value:e.data_set_info.query,callback:function(i){e.$set(e.data_set_info,"query",i)},expression:"data_set_info.query"}}):e._e()],1)]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){return e.doPreviewData()}}},[e._v("\u9884\u89C8\u6570\u636E\u96C6")]),t("el-button",{attrs:{size:"mini"},on:{click:function(i){e.dialogVisible=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.confirm()}}},[e._v("\u786E \u5B9A")])],1)])],1)},It=[],Nt=c(604726),Dt=c(113067),Ot=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dataConfigQuery"},[t("el-collapse",{staticStyle:{"overflow-y":"auto"},style:{height:e.divSH},attrs:{value:["1","2","3"]}},[e.showParams?t("el-collapse-item",{staticClass:"querySql",attrs:{name:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"iconfont bi_SQL tabTit"}),e._v("SQL\u53D8\u91CF ")]),t("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:e.query.params,border:"","header-cell-style":{"background-color":"#f5f7fa","border-bottom":"1px solid #dcdfe6"}}},[t("el-table-column",{attrs:{label:"\u53C2\u6570","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(i.row.name))])]}}],null,!1,536213379)}),t("el-table-column",{attrs:{label:"\u9ED8\u8BA4\u503C","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-input",{attrs:{size:"mini",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},on:{change:e.forceUpdate},model:{value:i.row.defaultVal,callback:function(o){e.$set(i.row,"defaultVal",o)},expression:"scope.row.defaultVal "}})]}}],null,!1,787930844)}),t("el-table-column",{attrs:{label:"\u5168\u5C40\u53D8\u91CF","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"","popper-class":"white-bgc","popper-append-to-body":!1,size:"mini",placeholder:"\u8BF7\u9009\u62E9\u53C2\u6570\u540D"},on:{change:e.forceUpdate},model:{value:i.row.globalParamName,callback:function(o){e.$set(i.row,"globalParamName",o)},expression:"scope.row.globalParamName"}},e._l(e.globalParamsList,function(o){return t("el-option",{key:o.value,attrs:{label:o.label,value:o.value}})}),1)]}}],null,!1,1808588679)})],1)],2):e._e(),e.showPage?t("el-collapse-item",{attrs:{name:"2"}},[t("template",{slot:"title"},[t("i",{staticClass:"iconfont bi_pagination tabTit"}),e._v("\u5206\u9875 ")]),t("div",{staticStyle:{"padding-left":"10px"}},[t("el-form",{attrs:{size:"mini"},model:{value:e.query.page,callback:function(i){e.$set(e.query,"page",i)},expression:"query.page"}},[t("el-form-item",{attrs:{label:"\u4F7F\u7528\u5206\u9875"}},[t("el-switch",{on:{change:e.forceUpdate},model:{value:e.query.page.enabled,callback:function(i){e.$set(e.query.page,"enabled",i)},expression:"query.page.enabled"}})],1),e.query.page.enabled?t("div",[t("el-form-item",{attrs:{label:"\u5F53\u524D\u9875\u6570"}},[t("el-input-number",{staticStyle:{width:"calc(100% - 80px)"},attrs:{placeholder:"\u9ED8\u8BA4\u5F53\u524D\u9875\u6570",step:1,min:1},on:{change:e.forceUpdate},model:{value:e.query.page.pageNum,callback:function(i){e.$set(e.query.page,"pageNum",i)},expression:"query.page.pageNum"}})],1),t("el-form-item",{attrs:{label:"\u6BCF\u9875\u6761\u6570"}},[t("el-input-number",{staticStyle:{width:"calc(100% - 80px)"},attrs:{placeholder:"\u6BCF\u9875\u663E\u793A\u6761\u76EE\u4E2A\u6570",step:1,min:1},on:{change:e.forceUpdate},model:{value:e.query.page.pageSize,callback:function(i){e.$set(e.query.page,"pageSize",i)},expression:"query.page.pageSize"}})],1)],1):e._e()],1)],1)],2):e._e(),e.showOrders?t("el-collapse-item",{attrs:{name:"3"}},[t("template",{slot:"title"},[t("i",{staticClass:"iconfont bi_sort tabTit"}),e._v("\u6392\u5E8F ")]),t("div",{staticStyle:{padding:"5px 10px 5px 10px"}},[t("el-form",{attrs:{size:"mini"}},[e._l(e.query.orders,function(i,o){return[t("el-form-item",{key:o,attrs:{label:"\u5B57\u6BB5"}},[t("el-select",{staticClass:"white-bgc",staticStyle:{width:"calc(100% - 170px)","margin-right":"5px"},attrs:{"popper-class":"white-bgc","popper-append-to-body":!1,placeholder:"\u6392\u5E8F\u5B57\u6BB5"},on:{change:e.forceUpdate},model:{value:i.sort,callback:function(n){e.$set(i,"sort",n)},expression:"or.sort"}},e._l(e.dimensionsAlias,function(n){return t("el-option",{key:n.name,attrs:{label:n.alias,value:n.name}})}),1),t("el-radio-group",{on:{change:e.forceUpdate},model:{value:i.order,callback:function(n){e.$set(i,"order",n)},expression:"or.order"}},[t("el-radio-button",{attrs:{label:"asc"}},[t("span",{staticClass:"iconfont bi_ascending"})]),t("el-radio-button",{attrs:{label:"desc"}},[t("span",{staticClass:"iconfont bi_descending"})])],1),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5220\u9664\u6392\u5E8F",effect:"light",placement:"top"}},[t("span",{staticClass:"iconfont bi_del del-cont",style:{color:e.theme.delete_btn,fontSize:"20px",cursor:"pointer",lineHeight:"30px",marginLeft:"5px"},on:{click:function(n){return e.deleteOrder(o)}}})])],1)]})],2),t("div",[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u6392\u5E8F\u5B57\u6BB5",effect:"light",placement:"top"}},[t("el-button",{staticClass:"addSort",attrs:{size:"mini"},on:{click:e.addOrder}},[t("span",{staticClass:"iconfont bi-iconfont"},[e._v("\uE6E2")]),e._v(" \u6DFB\u52A0\u6392\u5E8F\u5B57\u6BB5 ")])],1)],1)],1)],2):e._e()],1)],1)},Tt=[],Ft={name:"data-set-query-jdbc",model:{prop:"query",event:"change"},props:{query:{type:Object,default:()=>{}},dimensionsAlias:{type:Array},divHDialog:{type:String,default(){return null}}},mixins:[P],data(){return{divSH:"0px",showParams:!1,showPage:!1,showOrders:!1}},computed:{globalParamsList:function(){let a=this,e=[];if(a.queryConfig.base&&a.queryConfig.base.global_params&&a.queryConfig.base.global_params.params)for(let t in a.queryConfig.base.global_params.params)e.push({value:t,label:t});return e}},mounted(){this.divHDialog?this.divSH=this.divHDialog:this.divSH=window.innerHeight-320+"px",this.setShow()},methods:{getQuery(){return JSON.parse(JSON.stringify(this.query))},addOrder(){this.query.orders.push({sort:"",order:"asc"}),this.forceUpdate()},deleteOrder(a){this.query.orders.splice(a,1),this.forceUpdate()},forceUpdate(){this.$forceUpdate(),this.$emit("change",this.query)},setShow(){this.query.params!=null&&(this.showParams=!0),this.query.page!=null&&(this.showPage=!0),this.query.orders!=null&&(this.showOrders=!0)}}},Bt=Ft,Lt=(0,D.Z)(Bt,Ot,Tt,!1,null,"a191bc14",null),Pt=Lt.exports,Qt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dataConfigQuery"},[t("el-collapse",{staticStyle:{"overflow-y":"auto"},style:{height:e.divSH},attrs:{value:["1","2","3"]}},[e.showParams?t("el-collapse-item",{staticClass:"querySql",attrs:{name:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"iconfont bi_cspz tabTit"}),e._v("\u8BF7\u6C42\u53C2\u6570 "),t("el-popover",{attrs:{title:"\u4EC5\u9650\u8BF7\u6C42\u4F53\u4E2D\u7684\u53C2\u6570\u9884\u89C8",trigger:"hover"},on:{"after-enter":e.afterEnter}},[t("div",{staticStyle:{width:"500px",height:"300px"}},[t("my-monaco-editor",{ref:"request_body_json",attrs:{language:"json",theme:"vs"},model:{value:e.request_body_json,callback:function(i){e.request_body_json=i},expression:"request_body_json"}})],1),t("el-button",{staticStyle:{"margin-left":"15px"},attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\u9884\u89C8\u53C2\u6570")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:e.query.params,border:"","header-cell-style":{"background-color":"rgba(220, 223, 230, 1)"}}},[t("el-table-column",{attrs:{label:"\u53C2\u6570\u540D","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.position==e.global.paramPosition.url.code?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u8BF7\u6C42\u5730\u5740\u4E2D\u53C2\u6570\u4E0D\u53EF\u4FEE\u6539",effect:"light",placement:"top"}},[t("el-input",{attrs:{disabled:i.row.position==e.global.paramPosition.url.code,size:"mini",placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D"},model:{value:i.row.name,callback:function(o){e.$set(i.row,"name",o)},expression:"scope.row.name "}})],1):e._e(),i.row.position==e.global.paramPosition.body.code?t("el-input",{attrs:{size:"mini",placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D"},model:{value:i.row.name,callback:function(o){e.$set(i.row,"name",o)},expression:"scope.row.name "}}):e._e()]}}],null,!1,1516955396)}),t("el-table-column",{attrs:{label:"\u9ED8\u8BA4\u503C","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-input",{attrs:{size:"mini",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},model:{value:i.row.defaultVal,callback:function(o){e.$set(i.row,"defaultVal",o)},expression:"scope.row.defaultVal "}})]}}],null,!1,1190548029)}),t("el-table-column",{attrs:{label:"\u5168\u5C40\u53D8\u91CF","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"","popper-class":"white-bgc","popper-append-to-body":!1,size:"mini",placeholder:"\u8BF7\u9009\u62E9\u53C2\u6570\u540D"},model:{value:i.row.globalParamName,callback:function(o){e.$set(i.row,"globalParamName",o)},expression:"scope.row.globalParamName"}},e._l(e.globalParamsList,function(o){return t("el-option",{key:o.value,attrs:{label:o.label,value:o.value}})}),1)]}}],null,!1,821711206)}),t("el-table-column",{attrs:{"min-width":"25"},scopedSlots:e._u([{key:"header",fn:function(i){return[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u53C2\u6570\u5230\u8BF7\u6C42\u4F53\u4E2D",effect:"light",placement:"top"}},[t("i",{staticClass:"iconfont bi-iconfont",style:{color:e.theme.edit_btn,cursor:"pointer"},on:{click:function(o){return e.addParam(i)}}},[e._v("\uE6E2")])])]}},{key:"default",fn:function(i){return[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5220\u9664\u53C2\u6570",effect:"light",placement:"top"}},[t("i",{staticClass:"iconfont bi-iconfont",style:{color:e.theme.delete_btn,cursor:"pointer"},on:{click:function(o){return e.deleteParam(i)}}},[e._v("\uE6F7")])])]}}],null,!1,177879825)})],1)],2):e._e(),e.showPage?t("el-collapse-item",{attrs:{name:"2"}},[t("template",{slot:"title"},[t("i",{staticClass:"iconfont bi_pagination tabTit"}),e._v("\u5206\u9875 ")]),t("div",{staticStyle:{"padding-left":"10px"}},[t("el-form",{attrs:{size:"mini","label-width":"150"},model:{value:e.query.page,callback:function(i){e.$set(e.query,"page",i)},expression:"query.page"}},[t("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"\u4F7F\u7528\u5206\u9875"}},[t("el-switch",{on:{change:e.forceUpdate},model:{value:e.query.page.enabled,callback:function(i){e.$set(e.query.page,"enabled",i)},expression:"query.page.enabled"}})],1),e.query.page.enabled?t("div",[t("el-form-item",{attrs:{label:"\u5F53\u524D\u9875\u6570"}},[t("el-input-number",{staticStyle:{width:"calc(100% - 80px)"},attrs:{placeholder:"\u9ED8\u8BA4\u5F53\u524D\u9875\u6570",step:1,min:1,"controls-position":"right"},on:{change:e.forceUpdate},model:{value:e.query.page.pageNum,callback:function(i){e.$set(e.query.page,"pageNum",i)},expression:"query.page.pageNum"}})],1),t("el-form-item",{attrs:{label:"\u6BCF\u9875\u6761\u6570"}},[t("el-input-number",{staticStyle:{width:"calc(100% - 80px)"},attrs:{placeholder:"\u6BCF\u9875\u663E\u793A\u6761\u76EE\u4E2A\u6570",step:1,min:1,"controls-position":"right"},on:{change:e.forceUpdate},model:{value:e.query.page.pageSize,callback:function(i){e.$set(e.query.page,"pageSize",i)},expression:"query.page.pageSize"}})],1)],1):e._e()],1)],1)],2):e._e()],1)],1)},zt=[],Et={name:"data-set-query-interface",components:{MyMonacoEditor:()=>Promise.resolve().then(c.bind(c,980424))},model:{prop:"query",event:"change"},props:{query:{type:Object,default:()=>{}},dimensionsAlias:{type:Array},divHDialog:{type:String,default(){return null}}},mixins:[P],data(){return{divSH:"0px",showParams:!1,showPage:!1,showOrders:!1}},computed:{globalParamsList:function(){let a=this,e=[];if(a.queryConfig.base&&a.queryConfig.base.global_params&&a.queryConfig.base.global_params.params)for(let t in a.queryConfig.base.global_params.params)e.push({value:t,label:t});return e},request_body_json(){return this.get_request_body_json()}},mounted(){this.divHDialog?this.divSH=this.divHDialog:this.divSH=window.innerHeight-320+"px",this.setShow()},methods:{getQuery(){return JSON.parse(JSON.stringify(this.query))},addParam(){this.query.params.push({name:"",position:this.global.paramPosition.body.code,defaultVal:""}),this.forceUpdate()},deleteParam(a){this.query.params.splice(a.$index,1),this.forceUpdate()},forceUpdate(){this.$forceUpdate(),this.$emit("change",this.query)},setShow(){this.query.params!=null&&(this.showParams=!0),this.query.page!=null&&(this.showPage=!0),this.query.orders!=null&&(this.showOrders=!0)},afterEnter(){this.$nextTick(()=>{this.$refs.request_body_json.initEditor(),this.$nextTick(()=>{this.$refs.request_body_json.formatDocument()})})},get_request_body_json(){let a={};return this.$$lib__.each(this.query.params,e=>{e.position==this.global.paramPosition.body.code&&(a[e.name]=e.defaultVal)}),JSON.stringify(this.get_bode_json(a))},get_bode_json(a){let e={},t=[];for(let i in a){let o=a[i],n=i.indexOf(".");if(n>-1){let d=i.substring(0,n),g=i.substring(n+1);e[d]==null&&(e[d]={});let H=e[d],G={};H instanceof Object&&(G=e[d]),G[g]=o,g.indexOf(".")>-1&&t.push(d)}else e[i]==null&&(e[i]=o)}if(t.length>0)for(let i=0;i<t.length;i++){let o=this.get_bode_json(e[t[i]]);e[t[i]]=o}return e}}},Jt=Et,At=(0,D.Z)(Jt,Qt,zt,!1,null,"00e28ca2",null),Rt=At.exports,Mt=c(745643),jt={name:"select-tree-data-set-dialog",components:{DataSetQueryInterface:Rt,DataSetQueryJdbc:Pt,Preview:Nt.Z},mixins:[Mt.E],model:{prop:"data_set",event:"change"},props:{data_set:{type:Object,default:()=>{}}},data(){return{dialog:{width:0,height:0},data_set_info:null,loading:!1,dialogVisible:!1,title:"\u914D\u7F6E\u6570\u636E\u96C6\u53C2\u6570",datasourceType:null}},mounted(){this.dialog.height=window.innerHeight-140,this.dialog.width=window.innerWidth-40},methods:{openDialog(){this.data_set_info=JSON.parse(JSON.stringify(this.data_set)),!(!this.data_set_info.dataSetId||this.data_set_info.dataSetId=="")&&(this.loading=!0,ue._.getDataSetByDatasetId(this.data_set_info.dataSetId).then(a=>{this.loading=!1,a&&a.status==200?(this.datasourceType=a.data.datasourceType,this.title="\u914D\u7F6E\u6570\u636E\u96C6[ "+this.data_set_info.dataSetName+" ]\u7684\u53C2\u6570",this.data_set_info.dataSetName!=a.data.datasetName&&(this.title=this.title+",\u6570\u636E\u96C6\u540D\u79F0\u5DF2\u4FEE\u6539\u8FC7\uFF0C\u65B0\u540D\u79F0\u4E3A[ "+a.data.datasetName+" ]"),this.dialogVisible=!0):C.Message.error({message:a.msg,offset:60})}))},confirm(){this.data_set.query=this.data_set_info.query,this.$emit("change",this.data_set),this.dialogVisible=!1},dialogOpened(){this.$refs.preview_dynamic.formLoadPreview({},{})},doPreviewData(){let a=JSON.parse(JSON.stringify(this.data_set_info));this.loading=!0,Dt.o.getAggregateDataEx({dataSet:JSON.stringify(a)}).then(e=>{if(this.loading=!1,e&&e.status==200){let t=this.getDataSetData(e.data,a.query,a.dimensionsAlias,a.dataSetId);this.$refs.preview_dynamic.formLoadPreview(t,{dimensions:a.dimensionsAlias})}else C.Message.error({message:e.msg,offset:60})})}}},Zt=jt,Ht=(0,D.Z)(Zt,$t,It,!1,null,"4ebbd586",null),Vt=Ht.exports,Ut={name:"SelectTreeDataSet",components:{SelectTreeDataSetDialog:Vt},mixins:[P],model:{prop:"data_set",event:"change"},props:{clearable:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},selectWidth:{type:String,default:"auto"},treeHeight:{type:String,default:"300px"},placeholder:{type:String,default:"\u8BF7\u9009\u62E9\u6570\u636E\u96C6"},defaultExpandedKeys:{type:Array,default(){return[]}},data_set:{type:Object,default:()=>{}}},data(){return{list:{group:[],dataSet:[],dataSetTemp:[]},treeData:[],popover_visible:!1,keywords:"",radio_select:"associative"}},watch:{keywords(a){this.$refs.popoverTree.filter(a)}},mounted(){this.init_dataSet_data()},methods:{changeRadioGroup(){this.setDataSetDt()},showPopover(){this.radio_select=="associative"&&this.data_set.dataSetId&&this.data_set.dataSetId!=""&&(this.$$lib__.find(this.list.dataSetTemp,e=>e.datasetId==this.data_set.dataSetId)||(this.radio_select="all",this.changeRadioGroup()))},changeValue(){this.$emit("change",this.data_set)},clearSelect(){this.setDataSetInfo(null),this.defaultExpandedKeys.length=0,this.$refs.refTree&&this.$refs.refTree.setCurrentKey(null),this.changeValue(),this.$emit("select-tree-click",null)},filterNodeMethod(a,e){return a?e.label&&(e.id.indexOf(a)!==-1||e.label.indexOf(a)!==-1):!0},handleNodeClick(a){a.type=="data"&&(this.setDataSetInfo(a),this.changeValue(),this.$emit("select-tree-click",a),this.popover_visible=!1)},setDataSetInfo(a,e){if(a){let t=JSON.parse(a.configJson),i=t.query;this.data_set.dataSetId=a.datasetId,this.data_set.dataSetName=a.datasetName,this.data_set.dimensionsAlias=t.dimensions,this.data_set.query==null&&(this.data_set.query={}),i.script?this.data_set.query.script=JSON.parse(JSON.stringify(i.script)):this.data_set.query.script&&(this.data_set.query.script=void 0),e?e(i):(i.params&&(this.data_set.query.params=JSON.parse(JSON.stringify(i.params))),i.page&&(this.data_set.query.page=JSON.parse(JSON.stringify(i.page))),i.orders&&(this.data_set.query.orders=JSON.parse(JSON.stringify(i.orders))))}else this.data_set.dataSetId=null,this.data_set.dataSetName=null,this.data_set.dimensionsAlias=[],this.data_set.query={}},init_dataSet_data(a){ue._.getDataSetTree("''").then(e=>{e&&e.status==200?(this.list.group=e.data.dataSetCategoryList,this.list.dataSet=e.data.dataSetList,this.setDataSetDt(),a&&a()):C.Message.error({message:e.msg,offset:60})})},setConfigQuery(){this.$refs.selectTreeDataSetDialog.openDialog()},refDataSet(){this.init_dataSet_data(()=>{let a=this.$$lib__.find(this.list.dataSet,e=>e.datasetId==this.data_set.dataSetId);this.setDataSetInfo(a,e=>{let t=JSON.parse(JSON.stringify(this.data_set));if(e.params){let i=[];t.query&&t.query.params&&(i=JSON.parse(JSON.stringify(t.query.params))),this.data_set.query.params=[],this.$$lib__.each(e.params,o=>{let n=this.$$lib__.find(i,d=>o.name==d.name);n?this.data_set.query.params.push(JSON.parse(JSON.stringify(n))):this.data_set.query.params.push(JSON.parse(JSON.stringify(o)))})}if(e.page){let i=null;t.query&&t.query.page&&(i=JSON.parse(JSON.stringify(t.query.page))),i?this.data_set.query.page=JSON.parse(JSON.stringify(i)):this.data_set.query.page=JSON.parse(JSON.stringify(e.page))}if(e.orders){let i=[];t.query&&t.query.orders&&(i=JSON.parse(JSON.stringify(t.query.orders))),this.data_set.query.orders=[],this.$$lib__.each(e.orders,o=>{let n=this.$$lib__.find(i,d=>o.sort==d.sort);n?this.data_set.query.orders.push(JSON.parse(JSON.stringify(n))):this.data_set.query.orders.push(JSON.parse(JSON.stringify(o)))})}}),C.Message.success({message:"\u5237\u65B0\u5B8C\u6210",offset:60}),this.changeValue(),this.$emit("select-tree-click",a)})},copyDataset(){var a=document.getElementById("copyTxt");a.select(),document.execCommand("Copy")?this.$message({message:"\u6570\u636E\u96C6\u540D\u79F0\u590D\u5236\u6210\u529F",type:"success"}):this.$message({message:"\u6570\u636E\u96C6\u540D\u79F0\u590D\u5236\u5931\u8D25\uFF0C\u5F53\u524D\u64CD\u4F5C\u4E0D\u88AB\u652F\u6301\u6216\u672A\u88AB\u542F\u7528",type:"warning"})},setDataSetDt(){this.keywords=null,this.list.dataSetTemp=[];let a=JSON.parse(JSON.stringify(this.list.group));this.radio_select=="associative"?this.$$lib__.each(JSON.parse(JSON.stringify(this.list.dataSet)),i=>{this.$$lib__.contains(this.queryConfig.associativeDataset,i.datasetId)&&this.list.dataSetTemp.push(i)}):this.list.dataSetTemp=JSON.parse(JSON.stringify(this.list.dataSet));let e=this.rebuildData(a,this.list.dataSetTemp);if(e.length>1){let i=e.find(o=>o.label=="\u6240\u6709");i&&(e=[i])}let t=[];this.radio_select=="associative"?this.$$lib__.each(JSON.parse(JSON.stringify(e)),i=>{i.type=="data"?t.push(i):i.type=="category"&&i.children&&i.children.length>0&&(i.children=this.removeEmptyNode(i.children),(i.children.length>0||i.id==this.$$global.sysGuid.dataSetCategoryid)&&t.push(i))}):t=e,this.treeData=t.length>0?t[0].children:[]},removeEmptyNode(a){let e=[];return this.$$lib__.each(a,t=>{t.type=="data"?e.push(t):t.type=="category"&&t.children&&t.children.length>0&&(t.children=this.removeEmptyNode(t.children),t.children.length>0&&e.push(t))}),e},rebuildData(a,e){let t=JSON.parse(JSON.stringify(e)),i=JSON.parse(JSON.stringify(a)),o={},n={},d=[];return this.$$lib__.each(t,g=>{o[g.datasetType]||(o[g.datasetType]=[]),g.id=g.datasetId,g.label=g.datasetName,g.type="data",o[g.datasetType].push(g)}),this.$$lib__.each(i,g=>{g.id=g.categoryId,g.parent=g.categoryId,g.label=g.categoryName,g.type="category",g.parentId!=null&&g.parentId!=""?(n[g.parentId]||(n[g.parentId]=[]),n[g.parentId].push(g)):(this.defaultExpandedKeys.push(g.categoryId),d.push(g))}),this.transferData(d,n,o),d},transferData(a,e,t){this.$$lib__.each(a,i=>{let o=e[i.parent];o?(i.children=o,t[i.parent]&&this.$$lib__.each(t[i.parent],n=>{i.children.push(n)}),this.transferData(o,e,t)):t[i.parent]&&(i.children=t[i.parent])})}}},Gt=Ut,Wt=(0,D.Z)(Gt,St,kt,!1,null,"083a382b",null),Ie=Wt.exports,lt=c(521007),Kt=c(149500),Xt={name:"base-table",components:{ElIcon:lt.Z,SelectTreeDataSet:Ie,FontSelect:ye,WarningTooltip:v.Z,QueryScript:_.Z},mixins:[P],data(){return{query_config_base:{},query_config_base_table:{},options:{column_type_selection_value:{attribute_enable:"is_column_type_selection_value",attribute_enable_tooltip:"\u81EA\u5B9A\u4E49\u811A\u672C\u7684\u4F18\u5148\u7EA7\u9AD8\u4E8E\u7ED1\u5B9A\u7684\u662F\u5426\u53EF\u7528\u5B57\u6BB5",attribute_script_content:"script_column_type_selection_value",title:"\u591A\u9009\u6846\u662F\u5426\u53EF\u7528\u8FD4\u56DE\u503C",api:"api-row"},header_row_style:{attribute_enable:"is_header_row_style",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"script_header_row_style",title:"\u8868\u5934\u6837\u5F0F",api:"api-row"},row_style:{attribute_enable:"is_row_style",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"script_row_style",title:"\u8868\u683C\u884C\u6837\u5F0F",api:"api-row"},row_click:{attribute_enable:"is_row_click",attribute_script_content:"script_row_click",title:"\u8868\u683C\u884C\u70B9\u51FB\u4E8B\u4EF6",api:"api-row"},script_empty_text:{attribute_enable:"is_empty_text",attribute_script_content:"script_empty_text",title:"\u81EA\u5B9A\u4E49\u7A7A\u6570\u636E\u65F6\u663E\u793A\u7684\u6587\u672C\u5185\u5BB9",api:"api-row"}}}},watch:{"queryConfig.base":{deep:!0,handler:function(){this.query_config_base=JSON.parse(JSON.stringify(this.queryConfig.base))}},"queryConfig.base.table":{deep:!0,handler:function(){this.query_config_base_table=JSON.parse(JSON.stringify(this.queryConfig.base.table))}}},created(){this.query_config_base_table=JSON.parse(JSON.stringify(this.defaultQueryConfig.base.table))},computed:{field_list(){let a=JSON.parse(JSON.stringify(this.queryConfig.field));return a=this.$$lib__.sortBy(a,"order"),a},filter_param_list(){let a=[];return this.query_config_base_table.lazy_config.data_set&&this.query_config_base_table.lazy_config.data_set.query&&this.query_config_base_table.lazy_config.data_set.query&&this.query_config_base_table.lazy_config.data_set.query.params&&this.query_config_base_table.lazy_config.data_set.query.params.length>0&&(a=JSON.parse(JSON.stringify(this.query_config_base_table.lazy_config.data_set.query.params))),a.length==1&&(this.query_config_base_table.lazy_config.children_filter_param=a[0].name),a},dialog_list(){let a=[];return this.$$lib__.each(this.queryConfig.dialog,e=>{a.push({value:e.guid,label:e.name})}),a}},mounted(){this.queryConfig.base&&(this.query_config_base=JSON.parse(JSON.stringify(this.queryConfig.base)),this.queryConfig.base.table&&(this.query_config_base_table=JSON.parse(JSON.stringify(this.queryConfig.base.table))))},methods:{...(0,w.nv)(["updateQueryConfigBaseTable","updateQueryConfigBase"]),changeQueryConfigBase(){this.updateQueryConfigBase(this.query_config_base)},changeQueryConfigBaseTable(){Kt.log(this.query_config_base_table),this.updateQueryConfigBaseTable(this.query_config_base_table)},changeQueryConfigBaseTableDataSet(){this.query_config_base_table.lazy_config.children_filter_param=null,this.query_config_base_table.lazy_config.data_set&&this.query_config_base_table.lazy_config.data_set.query&&this.query_config_base_table.lazy_config.data_set.query&&this.query_config_base_table.lazy_config.data_set.query.params&&this.query_config_base_table.lazy_config.data_set.query.params.length==1&&(this.query_config_base_table.lazy_config.children_filter_param=this.query_config_base_table.lazy_config.data_set.query.params[0].name),this.changeQueryConfigBaseTable()},changeQueryConfigBaseTableLazy(){this.query_config_base_table.lazy_config.icon_packup==null&&(this.query_config_base_table.lazy_config.icon_packup="el-icon-arrow-right"),this.query_config_base_table.lazy_config.icon_expanded==null&&(this.query_config_base_table.lazy_config.icon_expanded="el-icon-arrow-down"),this.query_config_base_table.lazy_config.icon_color==null&&(this.query_config_base_table.lazy_config.icon_color="rgba(0, 0, 0, 1)"),this.query_config_base_table.lazy_config.icon_size==null&&(this.query_config_base_table.lazy_config.icon_size=10),this.query_config_base_table.lazy_config.icon_width==null&&(this.query_config_base_table.lazy_config.icon_width=10),this.query_config_base_table.lazy_config.icon_height==null&&(this.query_config_base_table.lazy_config.icon_height=10),this.changeQueryConfigBaseTable()},changeQueryConfigBaseTableIndexFormatter(){(!this.query_config_base_table.lazy_config.index_formatter_arrary||this.query_config_base_table.lazy_config.index_formatter_arrary.length==0)&&this.addIndexFormatter(),this.changeQueryConfigBaseTable()},changeTableSize(a){(!this.queryConfig.base.global_class||this.queryConfig.base.global_class=="default")&&(a==this.global_query.size.mini.code?(this.query_config_base_table.header_height=47,this.query_config_base_table.header_fontSize=12,this.query_config_base_table.row_height=41.54,this.query_config_base_table.row_fontSize=12):a==this.global_query.size.small.code?(this.query_config_base_table.header_height=51,this.query_config_base_table.header_fontSize=12,this.query_config_base_table.row_height=45.54,this.query_config_base_table.row_fontSize=12):a==this.global_query.size.medium.code&&(this.query_config_base_table.header_height=55,this.query_config_base_table.header_fontSize=14,this.query_config_base_table.row_height=49,this.query_config_base_table.row_fontSize=14)),this.changeQueryConfigBaseTable()},onIconChangePackup(a){this.query_config_base_table.lazy_config.icon_packup=a,this.changeQueryConfigBaseTable()},onIconChangeExpanded(a){this.query_config_base_table.lazy_config.icon_expanded=a,this.changeQueryConfigBaseTable()},addIndexFormatter(){this.query_config_base_table.lazy_config.index_formatter_arrary||(this.query_config_base_table.lazy_config.index_formatter_arrary=[]);let a=this.query_config_base_table.lazy_config.index_formatter_arrary.length,e=[];for(let t=0;t<a+2;t++)e.push("${level_"+(t+1)+"}");this.query_config_base_table.lazy_config.index_formatter_arrary.push(e.join("-")),this.changeQueryConfigBaseTable()},deleteIndexFormatter(a){this.query_config_base_table.lazy_config.index_formatter_arrary.splice(a,1),this.changeQueryConfigBaseTable()}}},Yt=Xt,ei=(0,D.Z)(Yt,s,u,!1,null,"fe3b04ea",null),ti=ei.exports,ii=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"10px"}},[t("el-form",{ref:"form",attrs:{size:"mini",inline:!0,model:e.query_config_base_pagination}},[t("div",{staticClass:"form-container button"},[t("el-form-item",{attrs:{label:"\u5355\u9875\u65F6\u9690\u85CF"}},[t("el-switch",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_pagination.hideSinglePage,callback:function(i){e.$set(e.query_config_base_pagination,"hideSinglePage",i)},expression:"query_config_base_pagination.hideSinglePage"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u80CC\u666F\u8272"}},[t("el-switch",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_pagination.background,callback:function(i){e.$set(e.query_config_base_pagination,"background",i)},expression:"query_config_base_pagination.background"}})],1)],1),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5E03\u5C40\u6837\u5F0F"}},[t("el-select",{ref:"encodeData",staticClass:"white-bgc",attrs:{multiple:"","collapse-tags":"","popper-class":"white-bgc",size:"mini",placeholder:"\u8BF7\u9009\u62E9\u6392\u5E8F\u65B9\u5F0F"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_pagination.layout,callback:function(i){e.$set(e.query_config_base_pagination,"layout",i)},expression:"query_config_base_pagination.layout"}},e._l(e.layoutList,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u6570\u91CF"}},[t("el-input-number",{staticClass:"my-style-number",attrs:{"controls-position":"right",step:2,min:5,max:21},on:{change:e.changePageCount},model:{value:e.query_config_base_pagination.pageCount,callback:function(i){e.$set(e.query_config_base_pagination,"pageCount",i)},expression:"query_config_base_pagination.pageCount"}})],1),t("el-form-item",{attrs:{label:"\u6BCF\u9875\u6761\u6570"}},[t("el-select",{staticClass:"white-bgc",attrs:{size:"mini","popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9\u6BCF\u9875\u6761\u6570"},on:{change:e.changePageSize},model:{value:e.query_config_base_pagination.pageSize,callback:function(i){e.$set(e.query_config_base_pagination,"pageSize",i)},expression:"query_config_base_pagination.pageSize"}},e._l(e.pageSizeList,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u5206\u9875\u6837\u5F0F"}},[t("el-select",{staticClass:"white-bgc",attrs:{size:"mini","popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_pagination.small,callback:function(i){e.$set(e.query_config_base_pagination,"small",i)},expression:"query_config_base_pagination.small"}},e._l(e.sizeList,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.query_config_base_pagination.layout.includes("prev"),expression:"query_config_base_pagination.layout.includes('prev')"}],attrs:{label:"\u524D\u9875\u6587\u5B57"}},[t("el-input",{attrs:{placeholder:"\u4E0A\u4E00\u9875\u6587\u5B57\u6587\u672C\u5185\u5BB9"},on:{input:e.changeQueryConfigBase},model:{value:e.query_config_base_pagination.prevText,callback:function(i){e.$set(e.query_config_base_pagination,"prevText",i)},expression:"query_config_base_pagination.prevText"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.query_config_base_pagination.layout.includes("next"),expression:"query_config_base_pagination.layout.includes('next')"}],attrs:{label:"\u540E\u9875\u6587\u5B57"}},[t("el-input",{attrs:{placeholder:"\u4E0B\u4E00\u9875\u6587\u5B57\u6587\u672C\u5185\u5BB9"},on:{input:e.changeQueryConfigBase},model:{value:e.query_config_base_pagination.nextText,callback:function(i){e.$set(e.query_config_base_pagination,"nextText",i)},expression:"query_config_base_pagination.nextText"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.query_config_base_pagination.layout.includes("sizes"),expression:"query_config_base_pagination.layout.includes('sizes')"}],attrs:{label:"\u6BCF\u9875\u6761\u76EE\u6570"}},[t("el-form-item",{attrs:{label:"\u6DFB\u52A0\u9009\u9879"}},[t("el-tooltip",{attrs:{content:"\u6DFB\u52A0\u9009\u9879","open-delay":1e3,effect:"light",placement:"top"}},[t("el-button",{staticClass:"el-icon-plus",staticStyle:{color:"#13CE66","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text"},on:{click:e.addPageSizes}})],1)],1),t("div",{staticClass:"item-input"},e._l(e.query_config_base_pagination.pageSizes,function(i,o){return t("el-form-item",{key:o,attrs:{label:"\u7B2C"+(o+1)+"\u9879:"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"170px"},attrs:{"controls-position":"right",step:1,min:0},on:{change:e.changePageSizeList},model:{value:e.query_config_base_pagination.pageSizes[o],callback:function(n){e.$set(e.query_config_base_pagination.pageSizes,o,n)},expression:"query_config_base_pagination.pageSizes[index]"}}),o===0?t("el-tooltip",{attrs:{content:"\u6BCF\u9875\u9ED8\u8BA4\u6761\u76EE\u6570","open-delay":1e3,effect:"light",placement:"top"}},[t("el-button",{staticStyle:{color:"#f0f0f8","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text"}})],1):e._e(),o>0?t("el-tooltip",{attrs:{content:"\u5220\u9664\u9009\u9879","open-delay":1e3,effect:"light",placement:"top"}},[t("el-button",{staticClass:"el-icon-delete",staticStyle:{color:"#f6061b","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text"},on:{click:function(n){return e.deletePageSizes(o)}}})],1):e._e()],1)}),1)],1)],1)],1)},ai=[],oi={name:"base-pagination",mixins:[P],data(){return{query_config_base_pagination:{},booleanList:[{value:!0,label:"\u662F"},{value:!1,label:"\u5426"}],layoutList:[{value:"sizes",label:"\u6BCF\u9875\u6761\u76EE\u6570"},{value:"prev",label:"\u4E0A\u4E00\u9875"},{value:"pager",label:"\u4E3B\u4F53"},{value:"next",label:"\u4E0B\u4E00\u9875"},{value:"jumper",label:"\u8DF3\u8F6C"},{value:"total",label:"\u603B\u8BA1"}],sizeList:[{value:!0,label:"\u5C0F\u578B\u5206\u9875\u6837\u5F0F"},{value:!1,label:"\u6B63\u5E38\u5206\u9875\u6837\u5F0F"}]}},computed:{pageSizeList(){let a=this,e=[];for(let t=0;t<a.query_config_base_pagination.pageSizes.length;t++)e.push({value:a.query_config_base_pagination.pageSizes[t],label:a.query_config_base_pagination.pageSizes[t]+"\u6761/\u9875"});return e}},watch:{"queryConfig.base.pagination":{deep:!0,handler:function(){this.query_config_base_pagination=JSON.parse(JSON.stringify(this.queryConfig.base.pagination))}}},created(){this.query_config_base_pagination=JSON.parse(JSON.stringify(this.defaultQueryConfig.base.pagination))},methods:{...(0,w.nv)(["updateQueryConfigBasePagination","setRequestBodyPage"]),changeQueryConfigBase(){this.updateQueryConfigBasePagination(this.query_config_base_pagination)},changePageSize(){this.changeQueryConfigBase(),this.setRequestBodyPage({pageNum:1,pageSize:this.query_config_base_pagination.pageSize,widgetId:this.widgetId}),y.Z.$emit("busQueryDataList")},changePageCount(){this.query_config_base_pagination.pageCount%2==0&&(this.query_config_base_pagination.pageCount=this.query_config_base_pagination.pageCount+1),this.changeQueryConfigBase()},changePageSizeList(){this.$$lib__.contains(this.query_config_base_pagination.pageSizes,this.query_config_base_pagination.pageSize)?this.changeQueryConfigBase():(this.query_config_base_pagination.pageSize=this.query_config_base_pagination.pageSizes[0],this.changePageSize())},addPageSizes(){this.query_config_base_pagination.pageSizes.push(0),this.changeQueryConfigBase()},deletePageSizes(a){this.query_config_base_pagination.pageSizes.splice(a,1),this.changePageSizeList()},setBodyPage(a){this.setRequestBodyPage({enabled:a,pageSize:this.query_config_base_pagination.pageSize,widgetId:this.widgetId})}}},ri=oi,ni=(0,D.Z)(ri,ii,ai,!1,null,"20e32f3b",null),li=ni.exports,si=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base-order"},[e._v(" \u6DFB\u52A0\u6392\u5E8F\u5B57\u6BB5 "),t("el-tooltip",{attrs:{content:"\u6DFB\u52A0\u5B57\u6BB5","open-delay":1e3,effect:"light",placement:"top"}},[t("el-button",{staticClass:"el-icon-plus",staticStyle:{color:"#13CE66","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text"},on:{click:e.addSort}})],1),t("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{size:"mini",inline:!0,model:e.form}},e._l(e.query_config_base_orders,function(i,o){return t("el-form-item",{key:o},[t("el-select",{attrs:{"popper-class":"white-bgc",placeholder:"\u6392\u5E8F\u5B57\u6BB5"},on:{change:function(n){return e.changeSelectOrder(o,arguments)}},model:{value:i.sort,callback:function(n){e.$set(i,"sort",n)},expression:"or.sort"}},e._l(e.queryConfig.field,function(n){return t("el-option",{key:n.field,attrs:{label:n.label,value:n.field}})}),1),t("el-button",{staticClass:"order-btn",on:{click:function(n){return e.orderClick(o)}}},[i.order=="desc"?t("span",{staticClass:"el-icon-sort-down"}):t("span",{staticClass:"el-icon-sort-up"})]),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5220\u9664\u6392\u5E8F",effect:"light",placement:"top"}},[t("el-button",{staticClass:"el-icon-delete",staticStyle:{color:"#f6061b","margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},attrs:{size:"small",type:"text"},on:{click:function(n){return e.delSort(o)}}})],1)],1)}),1)],1)},ci=[],di={name:"base-order",mixins:[P],data(){return{form:{},query_config_base_orders:[]}},computed:{},watch:{"queryConfig.base.orders":{deep:!0,handler:function(){this.query_config_base_orders=JSON.parse(JSON.stringify(this.queryConfig.base.orders))}}},methods:{...(0,w.nv)(["updateQueryConfigBaseOrders","setRequestBodyOrders"]),changeQueryConfigBase(){this.updateQueryConfigBaseOrders(this.query_config_base_orders),this.setRequestBodyOrders({orders:this.query_config_base_orders,widgetId:this.widgetId}),y.Z.$emit("busQueryDataList")},orderClick(a){this.query_config_base_orders[a].order=="asc"?this.query_config_base_orders[a].order="desc":this.query_config_base_orders[a].order="asc",this.changeQueryConfigBase()},changeSelectOrder(a,e){let t=this.$$lib__.filter(this.query_config_base_orders,i=>i.sort==e[0]);if(t&&t.length>1){C.Message.warning({message:"\u6392\u5E8F\u5B57\u6BB5\u5DF2\u7ECF\u5B58\u5728",offset:60}),this.query_config_base_orders[a].sort="";return}this.changeQueryConfigBase()},addSort(){if(this.$$lib__.find(this.query_config_base_orders,e=>e.sort=="")){C.Message.warning({message:"\u6392\u5E8F\u5B57\u6BB5\u4E0D\u5141\u8BB8\u4E3A\u7A7A",offset:60});return}this.query_config_base_orders.push({sort:"",order:"asc"})},delSort(a){this.query_config_base_orders.splice(a,1),this.changeQueryConfigBase()}}},ui=di,_i=(0,D.Z)(ui,si,ci,!1,null,"1e147a4a",null),fi=_i.exports,pi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base_shape"},[t("el-form",{ref:"form",attrs:{size:"mini",inline:!0,model:e.query_config_header_order}},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u6574\u4F53\u6837\u5F0F")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u663E\u793A\u5206\u9694"}},[t("el-switch",{on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.split,callback:function(i){e.$set(e.query_config_header_order,"split",i)},expression:"query_config_header_order.split"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.query_config_header_order.split,expression:"query_config_header_order.split"}],attrs:{label:"\u5206\u9694\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u5B57\u4F53\u989C\u8272"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.splitColor,callback:function(i){e.$set(e.query_config_header_order,"splitColor",i)},expression:"query_config_header_order.splitColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.splitColor,callback:function(i){e.$set(e.query_config_header_order,"splitColor",i)},expression:"query_config_header_order.splitColor"}})],1)],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.query_config_header_order.split,expression:"!query_config_header_order.split"}]}),t("el-form-item",{attrs:{label:"\u56DB\u5468\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,"controls-position":"right",placeholder:"\u56DB\u5468\u8BBE\u7F6E\u76F8\u540C\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.padding,callback:function(i){e.$set(e.query_config_header_order,"padding",i)},expression:"query_config_header_order.padding"}})],1),e.query_config_header_order.padding?e._e():[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0A\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.paddingTop,callback:function(i){e.$set(e.query_config_header_order,"paddingTop",i)},expression:"query_config_header_order.paddingTop"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0B\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.paddingBottom,callback:function(i){e.$set(e.query_config_header_order,"paddingBottom",i)},expression:"query_config_header_order.paddingBottom"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u5DE6\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.paddingLeft,callback:function(i){e.$set(e.query_config_header_order,"paddingLeft",i)},expression:"query_config_header_order.paddingLeft"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u53F3\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.paddingRight,callback:function(i){e.$set(e.query_config_header_order,"paddingRight",i)},expression:"query_config_header_order.paddingRight"}})],1)],t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.backgroundColor,callback:function(i){e.$set(e.query_config_header_order,"backgroundColor",i)},expression:"query_config_header_order.backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.backgroundColor,callback:function(i){e.$set(e.query_config_header_order,"backgroundColor",i)},expression:"query_config_header_order.backgroundColor"}})],1)],1)],1)],2),t("el-form-item",{attrs:{label:"\u6574\u4F53\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_container_style},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order,callback:function(i){e.query_config_header_order=i},expression:"query_config_header_order"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u5B57\u6BB5\u6837\u5F0F")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u56FE\u6807\u6837\u5F0F"}},[t("el-select",{attrs:{placeholder:"\u9ED8\u8BA4"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.iconCls,callback:function(i){e.$set(e.query_config_header_order,"iconCls",i)},expression:"query_config_header_order.iconCls"}},[t("el-option",{attrs:{label:"\u9ED8\u8BA4",value:"sort"}},[e._v("\u9ED8\u8BA4")]),t("el-option",{attrs:{label:"\u5B9E\u5FC3\u4E09\u89D2",value:"caret"}},[e._v("\u5B9E\u5FC3\u4E09\u89D2")]),t("el-option",{attrs:{label:"\u7BAD\u5934",value:"arrow"}},[e._v("\u7BAD\u5934")])],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.fontFamily,callback:function(i){e.$set(e.query_config_header_order.item,"fontFamily",i)},expression:"query_config_header_order.item.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{min:9,step:1,"controls-position":"right",placeholder:"\u8BF7\u8BBE\u7F6E\u5B57\u4F53\u5927\u5C0F"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.fontSize,callback:function(i){e.$set(e.query_config_header_order.item,"fontSize",i)},expression:"query_config_header_order.item.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u5B57\u4F53\u989C\u8272"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.color,callback:function(i){e.$set(e.query_config_header_order.item,"color",i)},expression:"query_config_header_order.item.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.color,callback:function(i){e.$set(e.query_config_header_order.item,"color",i)},expression:"query_config_header_order.item.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u56FE\u6807\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u56FE\u6807\u989C\u8272\u7559\u7A7A\u4E0E\u5B57\u4F53\u989C\u8272\u76F8\u540C"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.iconColor,callback:function(i){e.$set(e.query_config_header_order.item,"iconColor",i)},expression:"query_config_header_order.item.iconColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.iconColor,callback:function(i){e.$set(e.query_config_header_order.item,"iconColor",i)},expression:"query_config_header_order.item.iconColor"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u52A0\u7C97"}},[t("el-select",{attrs:{placeholder:"\u666E\u901A"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.fontWeight,callback:function(i){e.$set(e.query_config_header_order.item,"fontWeight",i)},expression:"query_config_header_order.item.fontWeight"}},[t("el-option",{attrs:{value:"normal",label:"\u666E\u901A"}}),t("el-option",{attrs:{value:"bold",label:"\u52A0\u7C97"}})],1)],1),t("el-form-item",{attrs:{label:"\u56DB\u5468\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u56DB\u5468\u8BBE\u7F6E\u76F8\u540C\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.padding,callback:function(i){e.$set(e.query_config_header_order.item,"padding",i)},expression:"query_config_header_order.item.padding"}})],1),e.query_config_header_order.item.padding==null||e.query_config_header_order.item.padding==""?[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0A\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.paddingTop,callback:function(i){e.$set(e.query_config_header_order.item,"paddingTop",i)},expression:"query_config_header_order.item.paddingTop"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0B\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.paddingBottom,callback:function(i){e.$set(e.query_config_header_order.item,"paddingBottom",i)},expression:"query_config_header_order.item.paddingBottom"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u5DE6\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.paddingLeft,callback:function(i){e.$set(e.query_config_header_order.item,"paddingLeft",i)},expression:"query_config_header_order.item.paddingLeft"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u53F3\u8FB9\u8DDD"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item.paddingRight,callback:function(i){e.$set(e.query_config_header_order.item,"paddingRight",i)},expression:"query_config_header_order.item.paddingRight"}})],1)]:e._e()],2),t("el-form-item",{attrs:{label:"\u5B57\u6BB5\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_item_style},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.item,callback:function(i){e.$set(e.query_config_header_order,"item",i)},expression:"query_config_header_order.item"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u60AC\u505C\u6837\u5F0F")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.hover.fontFamily,callback:function(i){e.$set(e.query_config_header_order.hover,"fontFamily",i)},expression:"query_config_header_order.hover.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{min:9,step:1,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u60AC\u505C\u5B57\u4F53\u5927\u5C0F"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.hover.fontSize,callback:function(i){e.$set(e.query_config_header_order.hover,"fontSize",i)},expression:"query_config_header_order.hover.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u60AC\u505C\u65F6\u6587\u5B57\u7684\u989C\u8272"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.hover.color,callback:function(i){e.$set(e.query_config_header_order.hover,"color",i)},expression:"query_config_header_order.hover.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.hover.color,callback:function(i){e.$set(e.query_config_header_order.hover,"color",i)},expression:"query_config_header_order.hover.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u56FE\u6807\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u60AC\u505C\u65F6\u56FE\u6807\u7684\u989C\u8272"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.hover.iconColor,callback:function(i){e.$set(e.query_config_header_order.hover,"iconColor",i)},expression:"query_config_header_order.hover.iconColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.hover.iconColor,callback:function(i){e.$set(e.query_config_header_order.hover,"iconColor",i)},expression:"query_config_header_order.hover.iconColor"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u52A0\u7C97"}},[t("el-select",{attrs:{placeholder:"\u666E\u901A"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.hover.fontWeight,callback:function(i){e.$set(e.query_config_header_order.hover,"fontWeight",i)},expression:"query_config_header_order.hover.fontWeight"}},[t("el-option",{attrs:{value:"normal",label:"\u666E\u901A"}}),t("el-option",{attrs:{value:"bold",label:"\u52A0\u7C97"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u60AC\u505C\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_hover_style},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.hover,callback:function(i){e.$set(e.query_config_header_order,"hover",i)},expression:"query_config_header_order.hover"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u6FC0\u6D3B\u6837\u5F0F")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.fontFamily,callback:function(i){e.$set(e.query_config_header_order.active,"fontFamily",i)},expression:"query_config_header_order.active.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{min:9,step:1,"controls-position":"right",placeholder:"\u6FC0\u6D3B\u65F6\u7684\u5B57\u4F53\u5927\u5C0F"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.fontSize,callback:function(i){e.$set(e.query_config_header_order.active,"fontSize",i)},expression:"query_config_header_order.active.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6FC0\u6D3B\u65F6\u7684\u5B57\u4F53\u989C\u8272"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.color,callback:function(i){e.$set(e.query_config_header_order.active,"color",i)},expression:"query_config_header_order.active.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.color,callback:function(i){e.$set(e.query_config_header_order.active,"color",i)},expression:"query_config_header_order.active.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u7C97\u7EC6"}},[t("el-select",{attrs:{placeholder:"\u6FC0\u6D3B\u65F6\u5B57\u4F53\u7684\u7C97\u7EC6"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.fontWeight,callback:function(i){e.$set(e.query_config_header_order.active,"fontWeight",i)},expression:"query_config_header_order.active.fontWeight"}},[t("el-option",{attrs:{value:"normal",label:"\u666E\u901A"}}),t("el-option",{attrs:{value:"bold",label:"\u52A0\u7C97"}})],1)],1),t("el-form-item",{attrs:{label:"\u5347\u5E8F\u56FE\u6807\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6FC0\u6D3B\u65F6\u5347\u5E8F\u56FE\u6807\u7684\u989C\u8272"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.iconColorAsc,callback:function(i){e.$set(e.query_config_header_order.active,"iconColorAsc",i)},expression:"query_config_header_order.active.iconColorAsc"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.iconColorAsc,callback:function(i){e.$set(e.query_config_header_order.active,"iconColorAsc",i)},expression:"query_config_header_order.active.iconColorAsc"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u964D\u5E8F\u56FE\u6807\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6FC0\u6D3B\u65F6\u964D\u5E8F\u7684\u56FE\u6807\u989C\u8272"},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.iconColorDesc,callback:function(i){e.$set(e.query_config_header_order.active,"iconColorDesc",i)},expression:"query_config_header_order.active.iconColorDesc"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active.iconColorDesc,callback:function(i){e.$set(e.query_config_header_order.active,"iconColorDesc",i)},expression:"query_config_header_order.active.iconColorDesc"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"\u6FC0\u6D3B\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_active_style},on:{change:e.changeQueryConfigHeaderOrder},model:{value:e.query_config_header_order.active,callback:function(i){e.$set(e.query_config_header_order,"active",i)},expression:"query_config_header_order.active"}})],1)],1)],1)},hi=[],gi={name:"base-order-header",components:{FontSelect:ye,QueryScript:_.Z},mixins:[P],data(){return{query_config_header_order:{iconCls:"sort",item:{},hover:{},active:{}},options:{script_container_style:{attribute_enable:"isContainerStyle",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"styleScriptContainer",title:"\u6574\u4F53\u6837\u5F0F",api:"api-header-order-container-style",script_examples:`
/**
  * config: \u7EC4\u4EF6\u914D\u7F6E
  * style: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u6837\u5F0F
 **/
console.info(config);
console.info(style);

style.backgroundColor = "#f5f7fa"; // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272
style.lineHeight = "40px"; // \u8BBE\u7F6E\u884C\u9AD8`},script_item_style:{attribute_enable:"isItemStyle",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"styleScriptItem",title:"\u6392\u5E8F\u5B57\u6BB5\u6837\u5F0F",api:"api-header-order-item-style",script_examples:`
/**
 * config: \u5F53\u524D\u914D\u7F6E
 * itemStyle: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u6392\u5E8F\u7ED3\u70B9\u6837\u5F0F
 * iconStyle: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u56FE\u6807\u6837\u5F0F
**/


console.info(config);
console.info(itemStyle);
console.info(iconStyle);

itemStyle.backgroundColor = "#f5f7fa"; // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272
iconStyle.backgroundColor = "#f5f7fa"; // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272
                        `},script_hover_style:{attribute_enable:"isHoverStyle",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"styleScriptHover",title:"\u6392\u5E8F\u5B57\u6BB5(\u9F20\u6807\u5212\u8FC7)\u6837\u5F0F",api:"api-header-order-hover-style",script_examples:`
/**
 * config: \u5F53\u524D\u914D\u7F6E
 * itemStyle: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u6392\u5E8F\u7ED3\u70B9\u6837\u5F0F(\u9F20\u6807\u60AC\u6D6E\u65F6)
 * iconStyle: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u56FE\u6807\u6837\u5F0F(\u9F20\u6807\u60AC\u6D6E\u65F6)
**/

console.info(config);
console.info(itemStyle);
console.info(iconStyle);

itemStyle.backgroundColor = "#f5f7fa"; // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272
itemStyle.color = "red"; // \u8BBE\u7F6E\u5B57\u4F53\u989C\u8272

iconStyle.backgroundColor = "#f5f7fa"; // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272
iconStyle.color = "red"; // \u8BBE\u7F6E\u5B57\u4F53\u989C\u8272`},script_active_style:{attribute_enable:"isActiveStyle",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"styleScriptActive",title:"\u6392\u5E8F\u5B57\u6BB5\u6FC0\u6D3B\u6837\u5F0F",api:"api-header-order-active-style",script_examples:`
/**
 * config: \u5F53\u524D\u914D\u7F6E
 * itemStyle: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u6837\u5F0F
 * ascStyle: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u56FE\u6807\u6837\u5F0F(\u5347\u5E8F\u6FC0\u6D3B\u65F6)
 * descStyle: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u56FE\u6807\u6837\u5F0F(\u964D\u5E8F\u6FC0\u6D3B\u65F6)
**/


console.info(config);
console.info(itemStyle);
console.info(ascStyle);
console.info(descStyle);

itemStyle.backgroundColor = "#f5f7fa"; // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272

ascStyle.backgroundColor = "#f5f7fa"; // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272

descStyle.backgroundColor = "#f5f7fa"; // \u8BBE\u7F6E\u80CC\u666F\u989C\u8272
`}}}},watch:{"queryConfig.headerOrder":{deep:!0,handler:function(){this.queryConfig.headerOrder&&(this.query_config_header_order=this.defaultConfig(this.queryConfig.headerOrder))}}},created(){this.query_config_header_order=this.defaultConfig(this.defaultQueryConfig.headerOrder)},methods:{...(0,w.nv)(["updateQueryConfigHeaderOrder"]),changeQueryConfigHeaderOrder(){this.updateQueryConfigHeaderOrder(this.removeDefaultConfig(this.query_config_header_order))},removeDefaultConfig(a){return a},defaultConfig(a){let e=JSON.parse(JSON.stringify(a));const t=this.defaultQueryConfig.headerOrder;return Object.keys(t).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:typeof e[i]=="object"&&Object.keys(t[i]).forEach(o=>{typeof e[i][o]>"u"&&(e[i][o]=t[i][o])})}),e}}},mi=gi,bi=(0,D.Z)(mi,pi,hi,!1,null,"3237e623",null),yi=bi.exports,vi=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{float:"left",width:"calc(100% - 240px)","min-width":"350px"}},[t("el-card",{staticClass:"my-box-card"},[t("div",{staticStyle:{"overflow-x":"auto"},attrs:{slot:"header"},slot:"header"},[t("el-input",{staticStyle:{width:"calc(100% - 100px)","margin-right":"5px"},attrs:{size:"mini",placeholder:"\u8F93\u5165\u53C2\u6570\u540D"},model:{value:e.newParam,callback:function(i){e.newParam=i},expression:"newParam"}}),t("el-button",{staticStyle:{float:"right","margin-top":"3px",color:"#fff"},attrs:{size:"mini",plain:"",icon:"iconfont bi_add3",type:"primary"},on:{click:function(i){return e.addParam()}}},[e._v(" \u6DFB\u52A0 ")])],1),t("div",{staticStyle:{"overflow-y":"auto",height:"257px"}},[t("el-form",{ref:"form",attrs:{size:"mini","label-width":"70px"}},e._l(e.query_config_base_global_params.param_list,function(i,o){return t("el-card",{key:o,class:e.paramCardClass(i.paramName,i.type)},[t("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"header"},on:{click:function(n){return e.onClickParamName(i.paramName)}},slot:"header"},[t("span",[t("i",{class:e.extendIcon(i.paramName),staticStyle:{color:"#DCDFE6","margin-right":"5px"}}),e._v(" \u5168\u5C40\u53D8\u91CF\uFF1A "+e._s(i.paramName)+" ")]),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u5168\u5C40\u53D8\u91CF",effect:"dark",placement:"top"}},[t("el-button",{staticStyle:{float:"right",color:"#F56C6C"},attrs:{size:"mini",icon:"iconfont bi_trash2",type:"text"},on:{click:function(n){return e.removeParam(i.paramName,o)}}})],1)],1),t("div",[t("el-form-item",{attrs:{label:"\u53C2\u6570\u7C7B\u578B"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9\u53C2\u6570\u503C\u7C7B\u578B"},on:{change:function(n){return e.changeQueryConfigBase()}},model:{value:i.type,callback:function(n){e.$set(i,"type",n)},expression:"item.type"}},e._l(e.globalParamsTypeList,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1),i.type==e.globalEditor.globalParamsType.static.code?[t("el-form-item",{attrs:{label:"\u9759\u6001\u503C"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"\u8F93\u5165\u9759\u6001\u503C"},on:{change:function(n){return e.changeQueryConfigBase()}},model:{value:i.value,callback:function(n){e.$set(i,"value",n)},expression:"item.value"}})],1)]:i.type==e.globalEditor.globalParamsType.systemParams.code?[t("el-form-item",{attrs:{label:"\u5185\u7F6E\u53D8\u91CF"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"popper-class":"white-bgc",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u5185\u7F6E\u53D8\u91CF"},on:{change:function(n){return e.changeQueryConfigBase()}},model:{value:i.systemParams,callback:function(n){e.$set(i,"systemParams",n)},expression:"item.systemParams"}},e._l(e.systemParamsTypeList,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1)]:i.type==e.globalEditor.globalParamsType.urlParams.code?[t("el-form-item",{attrs:{label:"\u53C2\u6570\u540D\u79F0"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"\u8F93\u5165\u5730\u5740\u680F\u7684\u53C2\u6570\u540D\u79F0"},on:{change:function(n){return e.changeQueryConfigBase()}},model:{value:i.urlParams,callback:function(n){e.$set(i,"urlParams",n)},expression:"item.urlParams"}})],1),t("el-form-item",{attrs:{label:"\u9ED8\u8BA4\u503C"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"\u8F93\u5165\u53C2\u6570\u7684\u9ED8\u8BA4\u503C"},on:{change:function(n){return e.changeQueryConfigBase()}},model:{value:i.urlParamsValue,callback:function(n){e.$set(i,"urlParamsValue",n)},expression:"item.urlParamsValue"}})],1)]:i.type==e.globalEditor.globalParamsType.configParam.code?[t("setting-screen-data-param",{attrs:{param:i,form_item_width_auto:!0},on:{change:function(n){return e.changeQueryConfigBase()}}})]:e._e()],2)])}),1)],1)])],1),t("div",{staticStyle:{float:"left",width:"234px",height:"320px"}},[t("my-monaco-editor",{ref:"editorJson",attrs:{theme:"vs",language:"json"},model:{value:e.editor_json,callback:function(i){e.editor_json=i},expression:"editor_json"}})],1)])},qi=[],xi=c(485205),Ci={name:"global-param",components:{SettingScreenDataParam:xi.Z,MyMonacoEditor:()=>Promise.resolve().then(c.bind(c,980424))},mixins:[P],data(){return{newParam:null,editor_json:"",query_config_base_global_params:{params:{},param_list:[]},globalEditor:this.$$global_editor,extend_card:[]}},computed:{...(0,w.Se)(["getURLParams"]),globalParamsTypeList:function(){return[{value:this.globalEditor.globalParamsType.static.code,label:this.globalEditor.globalParamsType.static.name},{value:this.globalEditor.globalParamsType.systemParams.code,label:this.globalEditor.globalParamsType.systemParams.name},{value:this.globalEditor.globalParamsType.urlParams.code,label:this.globalEditor.globalParamsType.urlParams.name},{value:this.globalEditor.globalParamsType.configParam.code,label:this.globalEditor.globalParamsType.configParam.name}]},systemParamsTypeList:function(){return[{value:this.globalEditor.systemParamsType.tokenNoHead.code,label:this.globalEditor.systemParamsType.tokenNoHead.name},{value:this.globalEditor.systemParamsType.userId.code,label:this.globalEditor.systemParamsType.userId.name},{value:this.globalEditor.systemParamsType.userName.code,label:this.globalEditor.systemParamsType.userName.name},{value:this.globalEditor.systemParamsType.staffName.code,label:this.globalEditor.systemParamsType.staffName.name}]}},watch:{"queryConfig.base.global_params":{deep:!0,handler:function(){this.query_config_base_global_params=JSON.parse(JSON.stringify(this.queryConfig.base.global_params))}}},methods:{...(0,w.nv)(["updateQueryConfigBaseGlobalParams","setViewGlobalParam"]),changeQueryConfigBase(){this.initGlobalParams(),this.previewParam(),this.updateQueryConfigBaseGlobalParams(this.query_config_base_global_params)},addParam(){if(this.newParam&&this.newParam!=""){if(this.query_config_base_global_params.params[this.newParam]!=null){C.Message.warning({message:"\u53D8\u91CF\u540D\u201C"+this.newParam+"\u201D\u5DF2\u5B58\u5728",offset:60});return}m.default.set(this.query_config_base_global_params.params,this.newParam,""),this.query_config_base_global_params.param_list.push({paramName:this.newParam,type:this.globalEditor.globalParamsType.static.code,value:""}),this.extend_card.push(this.newParam),this.newParam="",this.changeQueryConfigBase()}},removeParam(a,e){m.default.delete(this.query_config_base_global_params.params,a),this.query_config_base_global_params.param_list.splice(e,1),this.extend_card=this.$$lib__.without(this.extend_card,e),this.changeQueryConfigBase()},onClickParamName(a){this.$$lib__.contains(this.extend_card,a)?this.extend_card=this.$$lib__.without(this.extend_card,a):this.extend_card.push(a)},paramCardClass(a,e){return this.$$lib__.contains(this.extend_card,a)!=!0?"my-box-card-param my-box-card-param-collapse":e==this.globalEditor.globalParamsType.urlParams.code?"my-box-card-param my-box-card-param-extend1":"my-box-card-param my-box-card-param-extend2"},extendIcon(a){return this.$$lib__.contains(this.extend_card,a)==!0?" iconfont bi_triangleDown":" iconfont bi_start1"},initGlobalParams(){this.$$lib__.each(this.query_config_base_global_params.param_list,a=>{switch(a.type){case this.globalEditor.globalParamsType.static.code:this.query_config_base_global_params.params[a.paramName]=a.value;break;case this.globalEditor.globalParamsType.systemParams.code:this.query_config_base_global_params.params[a.paramName]=this.getSystemParamValue(a.systemParams);break;case this.globalEditor.globalParamsType.urlParams.code:this.getURLParams[a.urlParams]==null||this.getURLParams[a.urlParams]==null?this.query_config_base_global_params.params[a.paramName]=a.urlParamsValue:this.query_config_base_global_params.params[a.paramName]=this.getURLParams[a.urlParams];break;case this.globalEditor.globalParamsType.configParam.code:this.query_config_base_global_params.params[a.paramName]=a.configParamValue;break}}),this.setViewGlobalParam(this.query_config_base_global_params.params,this.widgetId)},getSystemParamValue(a){let e=JSON.parse(j.getStoreUserInfo());switch(a){case this.globalEditor.systemParamsType.tokenNoHead.code:return j.getStoreToken();case this.globalEditor.systemParamsType.userId.code:return e.userId;case this.globalEditor.systemParamsType.userName.code:return e.userCode;case this.globalEditor.systemParamsType.staffName.code:return e.userName}},previewParam(){this.editor_json=JSON.stringify(this.query_config_base_global_params.params),this.$nextTick(()=>{this.$refs.editorJson&&this.$refs.editorJson.formatDocument()})},initEditor(){this.editor_json=JSON.stringify(this.query_config_base_global_params.params),this.$refs.editorJson.initEditor()}}},wi=Ci,Si=(0,D.Z)(wi,vi,qi,!1,null,"0075acbb",null),ki=Si.exports,$i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base_preview_condition"},[t("el-form",{ref:"form",attrs:{size:"mini",inline:!0,model:e.query_config_base_preview_condition}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u6807\u7B7E\u6587\u672C"}},[t("el-input",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.label,callback:function(i){e.$set(e.query_config_base_preview_condition,"label",i)},expression:"query_config_base_preview_condition.label"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u5C3A\u5BF8"}},[t("el-select",{staticClass:"white-bgc",attrs:{"popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.size,callback:function(i){e.$set(e.query_config_base_preview_condition,"size",i)},expression:"query_config_base_preview_condition.size"}},e._l(e.global_query.size_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u7C7B\u578B"}},[t("el-select",{staticClass:"white-bgc",attrs:{"popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.type,callback:function(i){e.$set(e.query_config_base_preview_condition,"type",i)},expression:"query_config_base_preview_condition.type"}},e._l(e.global_query.tag_status_type_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u53F3\u4FA7\u95F4\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.marginRight,callback:function(i){e.$set(e.query_config_base_preview_condition,"marginRight",i)},expression:"query_config_base_preview_condition.marginRight"}})],1),t("el-form-item",{attrs:{label:"\u4E3B\u9898"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.effect,callback:function(i){e.$set(e.query_config_base_preview_condition,"effect",i)},expression:"query_config_base_preview_condition.effect"}},e._l(e.global_query.tag_effect_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6309\u94AE\u989C\u8272"},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.color,callback:function(i){e.$set(e.query_config_base_preview_condition,"color",i)},expression:"query_config_base_preview_condition.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.color,callback:function(i){e.$set(e.query_config_base_preview_condition,"color",i)},expression:"query_config_base_preview_condition.color"}})],1)],1)],1)],1),t("div",{staticClass:"form-container button"},[t("el-form-item",{attrs:{label:"\u53EF\u5173\u95ED"}},[t("el-switch",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.closable,callback:function(i){e.$set(e.query_config_base_preview_condition,"closable",i)},expression:"query_config_base_preview_condition.closable"}})],1),t("el-form-item",{attrs:{label:"\u6E10\u53D8\u52A8\u753B"}},[t("el-switch",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.disable_transitions,callback:function(i){e.$set(e.query_config_base_preview_condition,"disable_transitions",i)},expression:"query_config_base_preview_condition.disable_transitions"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.query_config_base_preview_condition.effect!=e.global_query.effect.dark.code,expression:"query_config_base_preview_condition.effect != global_query.effect.dark.code"}],attrs:{label:"\u8FB9\u6846\u63CF\u8FB9"}},[t("el-switch",{on:{change:e.changeQueryConfigBase},model:{value:e.query_config_base_preview_condition.hit,callback:function(i){e.$set(e.query_config_base_preview_condition,"hit",i)},expression:"query_config_base_preview_condition.hit"}})],1)],1)])],1)},Ii=[],Ni={name:"base-preview-condition",mixins:[P],data(){return{query_config_base_preview_condition:{}}},methods:{...(0,w.nv)(["updateQueryConfigBasePreviewCondition"]),setFormData(a){this.query_config_base_preview_condition=JSON.parse(JSON.stringify(a))},changeQueryConfigBase(){this.updateQueryConfigBasePreviewCondition(this.query_config_base_preview_condition)}}},Di=Ni,Oi=(0,D.Z)(Di,$i,Ii,!1,null,"2a6b68c4",null),Ti=Oi.exports,Fi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base_footer"},[t("el-form",{ref:"form",attrs:{size:"mini",inline:!0,model:e.query_config_base_footer}},[e.queryConfig.base.query_time==!0?[t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u67E5\u8BE2\u8017\u65F6")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u505C\u9760\u4F4D\u7F6E"}},[t("el-radio-group",{on:{change:e.changeQueryConfigFooter},model:{value:e.query_config_base_footer.query_time_float,callback:function(i){e.$set(e.query_config_base_footer,"query_time_float",i)},expression:"query_config_base_footer.query_time_float"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5DE6\u95F4\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigFooter},model:{value:e.query_config_base_footer.query_time_margin_left,callback:function(i){e.$set(e.query_config_base_footer,"query_time_margin_left",i)},expression:"query_config_base_footer.query_time_margin_left"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u95F4\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigFooter},model:{value:e.query_config_base_footer.query_time_margin_right,callback:function(i){e.$set(e.query_config_base_footer,"query_time_margin_right",i)},expression:"query_config_base_footer.query_time_margin_right"}})],1)],1)]:e._e(),e.queryConfig.base.pagination_enable==!0?[t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u5206\u9875\u63A7\u4EF6")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u505C\u9760\u4F4D\u7F6E"}},[t("el-radio-group",{on:{change:e.changeQueryConfigFooter},model:{value:e.query_config_base_footer.pagination_float,callback:function(i){e.$set(e.query_config_base_footer,"pagination_float",i)},expression:"query_config_base_footer.pagination_float"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5DE6\u95F4\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigFooter},model:{value:e.query_config_base_footer.pagination_margin_left,callback:function(i){e.$set(e.query_config_base_footer,"pagination_margin_left",i)},expression:"query_config_base_footer.pagination_margin_left"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u95F4\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigFooter},model:{value:e.query_config_base_footer.pagination_margin_right,callback:function(i){e.$set(e.query_config_base_footer,"pagination_margin_right",i)},expression:"query_config_base_footer.pagination_margin_right"}})],1)],1)]:e._e()],2)],1)},Bi=[],Li={name:"base-footer",mixins:[P],data(){return{query_config_base_footer:{}}},watch:{"queryConfig.base.footer":{deep:!0,handler:function(){this.query_config_base_footer=JSON.parse(JSON.stringify(this.queryConfig.base.footer))}}},created(){this.query_config_base_footer=JSON.parse(JSON.stringify(this.defaultQueryConfig.base.footer))},methods:{...(0,w.nv)(["updateQueryConfigBaseFooter"]),changeQueryConfigFooter(){this.updateQueryConfigBaseFooter(this.query_config_base_footer)}}},Pi=Li,Qi=(0,D.Z)(Pi,Fi,Bi,!1,null,"26045bf8",null),zi=Qi.exports,Ei=function(){var e=this,t=e._self._c;return t("div",[e._l(e.type_list,function(i,o){return[t("el-divider",{key:o,attrs:{"content-position":"left"}},[e._v(e._s(i.restypeName))]),t("el-table",{key:o,staticClass:"my-table-class",attrs:{stripe:"",data:e.query_config_base_resource.filter(n=>n.restypeId==i.restypeId),"header-cell-style":{background:"#F5F7FA"}}},[t("el-table-column",{attrs:{label:"\u5E8F\u53F7",type:"index",align:"center",width:"60"}}),t("el-table-column",{attrs:{prop:"fileId",align:"center","show-overflow-tooltip":"",label:"\u6587\u4EF6ID"}}),t("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"fileName",label:"\u6587\u4EF6\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"fileUrlPath","show-overflow-tooltip":"",label:"\u6587\u4EF6\u76F8\u5BF9\u8DEF\u5F84"}}),t("el-table-column",{attrs:{label:"\u52A0\u8F7D\u7C7B\u578B",prop:"sync",width:"60"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{attrs:{content:n.row.sync==!0?"\u70B9\u51FB\u540E\u53EF\u8BBE\u7F6E\u4E3A\u3010\u5F02\u6B65\u52A0\u8F7D\u3011\u8D44\u6E90\u6587\u4EF6":"\u70B9\u51FB\u540E\u53EF\u8BBE\u7F6E\u4E3A\u3010\u540C\u6B65\u52A0\u8F7D\u3011\u8D44\u6E90\u6587\u4EF6","open-delay":1e3,effect:"dark",placement:"top"}},[t("el-switch",{on:{change:function(d){return e.changeQueryConfigResource()}},model:{value:n.row.sync,callback:function(d){e.$set(n.row,"sync",d)},expression:"scope.row.sync"}})],1)]}}],null,!0)}),t("el-table-column",{attrs:{width:"40"},scopedSlots:e._u([{key:"header",fn:function(n){return[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u8D44\u6E90\u6587\u4EF6",effect:"dark",placement:"top"}},[t("el-button",{attrs:{size:"mini",icon:"iconfont bi_add3",type:"text"},on:{click:function(d){return e.addResource(i.restypeId,n.$index)}}})],1)]}},{key:"default",fn:function(n){return[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u8D44\u6E90\u6587\u4EF6",effect:"dark",placement:"top"}},[t("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",icon:"iconfont bi_trash2",type:"text"},on:{click:function(d){return e.removeResource(n.row)}}})],1)]}}],null,!0)})],1)]}),t("resource-select",{ref:"ref_resource_select",on:{selectChange:e.selectChange},model:{value:e.fileIds,callback:function(i){e.fileIds=i},expression:"fileIds"}})],2)},Ji=[],Ai=c(776922),Ri=c(971030),Mi={name:"base-resource",components:{ResourceSelect:Ri.Z},mixins:[P],data(){return{type_list:[],fileIds:[],query_config_base_resource:[]}},watch:{"queryConfig.base.resource":{deep:!0,handler:function(){this.query_config_base_resource=JSON.parse(JSON.stringify(this.queryConfig.base.resource))}}},created(){this.query_config_base_resource=JSON.parse(JSON.stringify(this.defaultQueryConfig.base.resource))},mounted(){this.getAllResourceType()},methods:{...(0,w.nv)(["updateQueryConfigBaseResource"]),changeQueryConfigResource(){this.updateQueryConfigBaseResource(this.query_config_base_resource)},selectChange(a){this.query_config_base_resource.push({fileId:a.fileId,fileName:a.fileName,restypeId:a.restypeId,updatedTime:a.updatedTime,fileUrlPath:a.fileUrlPath}),this.changeQueryConfigResource()},addResource(a){this.getFileIds(a),this.$refs.ref_resource_select.openDialog(a)},removeResource(a){this.$confirm("\u5C06\u79FB\u9664\u201C"+a.fileName+"\u201D\u8D44\u6E90\u6587\u4EF6\uFF0C\u786E\u8BA4\u6267\u884C\u6B64\u64CD\u4F5C\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{this.query_config_base_resource=this.$$lib__.filter(this.query_config_base_resource,e=>e.fileId!=a.fileId),this.changeQueryConfigResource()}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},getFileIds(a){this.fileIds=this.$$lib__.pluck(this.$$lib__.filter(this.query_config_base_resource,e=>e.restypeId==a),"fileId")},getAllResourceType(){this.type_list=[],Ai.o.getAllResourceType().then(a=>{a&&a.status==200?this.type_list=j.biResourceType(a.data):C.Message.error(a.msg)})}}},ji=Mi,Zi=(0,D.Z)(ji,Ei,Ji,!1,null,"19285329",null),Hi=Zi.exports,Vi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base_shape"},[t("el-form",{ref:"form",attrs:{size:"mini",inline:!0,model:e.query_config_base_shape}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u56DB\u5468\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u56DB\u5468\u8BBE\u7F6E\u76F8\u540C\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.padding,callback:function(i){e.$set(e.query_config_base_shape,"padding",i)},expression:"query_config_base_shape.padding"}})],1),e.query_config_base_shape.padding==null||e.query_config_base_shape.padding==""?[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0A\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.paddingTop,callback:function(i){e.$set(e.query_config_base_shape,"paddingTop",i)},expression:"query_config_base_shape.paddingTop"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0B\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.paddingBottom,callback:function(i){e.$set(e.query_config_base_shape,"paddingBottom",i)},expression:"query_config_base_shape.paddingBottom"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u5DE6\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.paddingLeft,callback:function(i){e.$set(e.query_config_base_shape,"paddingLeft",i)},expression:"query_config_base_shape.paddingLeft"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u53F3\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.paddingRight,callback:function(i){e.$set(e.query_config_base_shape,"paddingRight",i)},expression:"query_config_base_shape.paddingRight"}})],1)]:e._e(),t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.backgroundColor,callback:function(i){e.$set(e.query_config_base_shape,"backgroundColor",i)},expression:"query_config_base_shape.backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.backgroundColor,callback:function(i){e.$set(e.query_config_base_shape,"backgroundColor",i)},expression:"query_config_base_shape.backgroundColor"}})],1)],1)],1)],2),t("el-form-item",{attrs:{label:"\u6574\u4F53\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_shape_style},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape,callback:function(i){e.query_config_base_shape=i},expression:"query_config_base_shape"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u9876\u90E8\u6837\u5F0F")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u9876\u90E8\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top.height,callback:function(i){e.$set(e.query_config_base_shape.top,"height",i)},expression:"query_config_base_shape.top.height"}})],1),t("el-form-item",{attrs:{label:"\u56DB\u5468\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u56DB\u5468\u8BBE\u7F6E\u76F8\u540C\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top.padding,callback:function(i){e.$set(e.query_config_base_shape.top,"padding",i)},expression:"query_config_base_shape.top.padding"}})],1),e.query_config_base_shape.top.padding==null||e.query_config_base_shape.top.padding==""?[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0A\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top.paddingTop,callback:function(i){e.$set(e.query_config_base_shape.top,"paddingTop",i)},expression:"query_config_base_shape.top.paddingTop"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0B\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top.paddingBottom,callback:function(i){e.$set(e.query_config_base_shape.top,"paddingBottom",i)},expression:"query_config_base_shape.top.paddingBottom"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u5DE6\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top.paddingLeft,callback:function(i){e.$set(e.query_config_base_shape.top,"paddingLeft",i)},expression:"query_config_base_shape.top.paddingLeft"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u53F3\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top.paddingRight,callback:function(i){e.$set(e.query_config_base_shape.top,"paddingRight",i)},expression:"query_config_base_shape.top.paddingRight"}})],1)]:e._e(),t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top.backgroundColor,callback:function(i){e.$set(e.query_config_base_shape.top,"backgroundColor",i)},expression:"query_config_base_shape.top.backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top.backgroundColor,callback:function(i){e.$set(e.query_config_base_shape.top,"backgroundColor",i)},expression:"query_config_base_shape.top.backgroundColor"}})],1)],1)],1)],2),t("el-form-item",{attrs:{label:"\u9876\u90E8\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_shape_style},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.top,callback:function(i){e.$set(e.query_config_base_shape,"top",i)},expression:"query_config_base_shape.top"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u4E2D\u95F4\u8868\u683C\u6837\u5F0F")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u56DB\u5468\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u56DB\u5468\u8BBE\u7F6E\u76F8\u540C\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.table.padding,callback:function(i){e.$set(e.query_config_base_shape.table,"padding",i)},expression:"query_config_base_shape.table.padding"}})],1),e.query_config_base_shape.table.padding==null||e.query_config_base_shape.table.padding==""?[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0A\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.table.paddingTop,callback:function(i){e.$set(e.query_config_base_shape.table,"paddingTop",i)},expression:"query_config_base_shape.table.paddingTop"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0B\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.table.paddingBottom,callback:function(i){e.$set(e.query_config_base_shape.table,"paddingBottom",i)},expression:"query_config_base_shape.table.paddingBottom"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u5DE6\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.table.paddingLeft,callback:function(i){e.$set(e.query_config_base_shape.table,"paddingLeft",i)},expression:"query_config_base_shape.table.paddingLeft"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u53F3\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.table.paddingRight,callback:function(i){e.$set(e.query_config_base_shape.table,"paddingRight",i)},expression:"query_config_base_shape.table.paddingRight"}})],1)]:e._e(),t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.table.backgroundColor,callback:function(i){e.$set(e.query_config_base_shape.table,"backgroundColor",i)},expression:"query_config_base_shape.table.backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.table.backgroundColor,callback:function(i){e.$set(e.query_config_base_shape.table,"backgroundColor",i)},expression:"query_config_base_shape.table.backgroundColor"}})],1)],1)],1)],2),t("el-form-item",{attrs:{label:"\u4E2D\u95F4\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_shape_style},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.table,callback:function(i){e.$set(e.query_config_base_shape,"table",i)},expression:"query_config_base_shape.table"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u5E95\u90E8\u6837\u5F0F")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5E95\u90E8\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer.lineHeight,callback:function(i){e.$set(e.query_config_base_shape.footer,"lineHeight",i)},expression:"query_config_base_shape.footer.lineHeight"}})],1),t("el-form-item",{attrs:{label:"\u56DB\u5468\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u56DB\u5468\u8BBE\u7F6E\u76F8\u540C\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer.padding,callback:function(i){e.$set(e.query_config_base_shape.footer,"padding",i)},expression:"query_config_base_shape.footer.padding"}})],1),e.query_config_base_shape.footer.padding==null||e.query_config_base_shape.footer.padding==""?[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0A\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer.paddingTop,callback:function(i){e.$set(e.query_config_base_shape.footer,"paddingTop",i)},expression:"query_config_base_shape.footer.paddingTop"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u4E0B\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer.paddingBottom,callback:function(i){e.$set(e.query_config_base_shape.footer,"paddingBottom",i)},expression:"query_config_base_shape.footer.paddingBottom"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u5DE6\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer.paddingLeft,callback:function(i){e.$set(e.query_config_base_shape.footer,"paddingLeft",i)},expression:"query_config_base_shape.footer.paddingLeft"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right",placeholder:"\u8BBE\u7F6E\u53F3\u8FB9\u8DDD"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer.paddingRight,callback:function(i){e.$set(e.query_config_base_shape.footer,"paddingRight",i)},expression:"query_config_base_shape.footer.paddingRight"}})],1)]:e._e(),t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer.backgroundColor,callback:function(i){e.$set(e.query_config_base_shape.footer,"backgroundColor",i)},expression:"query_config_base_shape.footer.backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer.backgroundColor,callback:function(i){e.$set(e.query_config_base_shape.footer,"backgroundColor",i)},expression:"query_config_base_shape.footer.backgroundColor"}})],1)],1)],1)],2),t("el-form-item",{attrs:{label:"\u5E95\u90E8\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_shape_style},on:{change:e.changeQueryConfigShape},model:{value:e.query_config_base_shape.footer,callback:function(i){e.$set(e.query_config_base_shape,"footer",i)},expression:"query_config_base_shape.footer"}})],1)],1)],1)},Ui=[],Gi={name:"base-style",components:{QueryScript:_.Z},mixins:[P],data(){return{query_config_base_shape:{},options:{script_shape_style:{attribute_enable:"is_shape_style",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"script_shape_style",title:"\u6574\u4F53\u6837\u5F0F",api:"api-shape-style"}}}},watch:{"queryConfig.base.shape":{deep:!0,handler:function(){this.query_config_base_shape=JSON.parse(JSON.stringify(this.queryConfig.base.shape)),this.mergeFooterStyle()}}},created(){this.query_config_base_shape=JSON.parse(JSON.stringify(this.defaultQueryConfig.base.shape)),this.mergeFooterStyle()},methods:{...(0,w.nv)(["updateQueryConfigBaseShape","updateQueryConfigBaseFooter"]),changeQueryConfigShape(){this.updateQueryConfigBaseShape(this.query_config_base_shape)},mergeFooterStyle(){if(this.queryConfig.base&&this.queryConfig.base.footer){let a=JSON.parse(JSON.stringify(this.queryConfig.base.footer));(a.lineHeight||a.paddingTop||a.backgroundColor||a.is_footer_style||a.script_footer_style)&&(this.query_config_base_shape.footer.lineHeight=a.lineHeight,m.default.delete(a,"lineHeight"),this.query_config_base_shape.footer.paddingTop=a.paddingTop,m.default.delete(a,"paddingTop"),this.query_config_base_shape.footer.backgroundColor=a.backgroundColor,m.default.delete(a,"backgroundColor"),this.query_config_base_shape.footer.is_shape_style=a.is_footer_style,m.default.delete(a,"is_footer_style"),this.query_config_base_shape.footer.script_shape_style=a.script_footer_style,m.default.delete(a,"script_footer_style"),this.updateQueryConfigBaseFooter(a),this.updateQueryConfigBaseShape(this.query_config_base_shape))}}}},Wi=Gi,Ki=(0,D.Z)(Wi,Vi,Ui,!1,null,"4418fc7f",null),Xi=Ki.exports,Yi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base_card"},[t("el-form",{ref:"form",attrs:{size:"mini",inline:!0,model:e.query_config_base_card}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5361\u7247\u9634\u5F71"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.shadow,callback:function(i){e.$set(e.query_config_base_card,"shadow",i)},expression:"query_config_base_card.shadow"}},e._l(e.shadow_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5361\u7247\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.text_align,callback:function(i){e.$set(e.query_config_base_card,"text_align",i)},expression:"query_config_base_card.text_align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5361\u7247\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.width,callback:function(i){e.$set(e.query_config_base_card,"width",i)},expression:"query_config_base_card.width"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u95F4\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.marginRight,callback:function(i){e.$set(e.query_config_base_card,"marginRight",i)},expression:"query_config_base_card.marginRight"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u95F4\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.marginBottom,callback:function(i){e.$set(e.query_config_base_card,"marginBottom",i)},expression:"query_config_base_card.marginBottom"}})],1),t("el-form-item",{attrs:{label:"\u56DB\u5468\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.padding,callback:function(i){e.$set(e.query_config_base_card,"padding",i)},expression:"query_config_base_card.padding"}})],1),e.query_config_base_card.padding?e._e():[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.paddingTop,callback:function(i){e.$set(e.query_config_base_card,"paddingTop",i)},expression:"query_config_base_card.paddingTop"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.paddingRight,callback:function(i){e.$set(e.query_config_base_card,"paddingRight",i)},expression:"query_config_base_card.paddingRight"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.paddingBottom,callback:function(i){e.$set(e.query_config_base_card,"paddingBottom",i)},expression:"query_config_base_card.paddingBottom"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.paddingLeft,callback:function(i){e.$set(e.query_config_base_card,"paddingLeft",i)},expression:"query_config_base_card.paddingLeft"}})],1)],t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.backgroundColor,callback:function(i){e.$set(e.query_config_base_card,"backgroundColor",i)},expression:"query_config_base_card.backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.backgroundColor,callback:function(i){e.$set(e.query_config_base_card,"backgroundColor",i)},expression:"query_config_base_card.backgroundColor"}})],1)],1)],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u5361\u7247\u5185\u5BB9")]),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u5C55\u793A"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.display,callback:function(i){e.$set(e.query_config_base_card,"display",i)},expression:"query_config_base_card.display"}},e._l(e.display_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),e.query_config_base_card.display=="form"?[t("el-form-item",{attrs:{label:"\u5E26\u6709\u8FB9\u6846"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.form_border,callback:function(i){e.$set(e.query_config_base_card,"form_border",i)},expression:"query_config_base_card.form_border"}})],1),e.query_config_base_card.form_border!=!0?t("el-form-item",{attrs:{label:"\u663E\u793A\u5192\u53F7"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.form_colon,callback:function(i){e.$set(e.query_config_base_card,"form_colon",i)},expression:"query_config_base_card.form_colon"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u56FA\u5B9A\u9AD8\u5EA6"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.fixed_height,callback:function(i){e.$set(e.query_config_base_card,"fixed_height",i)},expression:"query_config_base_card.fixed_height"}})],1),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u6392\u5217\u65B9\u5411"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.form_direction,callback:function(i){e.$set(e.query_config_base_card,"form_direction",i)},expression:"query_config_base_card.form_direction"}},e._l(e.direction_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),e.query_config_base_card.fixed_height==!0?t("el-form-item",{attrs:{label:"\u5185\u5BB9\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.custom_height,callback:function(i){e.$set(e.query_config_base_card,"custom_height",i)},expression:"query_config_base_card.custom_height"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u8868\u5355\u5C3A\u5BF8"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u8868\u5355\u5C3A\u5BF8"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.form_size,callback:function(i){e.$set(e.query_config_base_card,"form_size",i)},expression:"query_config_base_card.form_size"}},e._l(e.global_query.table_size_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u6BCF\u884C\u6570\u91CF"}},[t("el-input-number",{attrs:{step:1,min:1,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.form_column,callback:function(i){e.$set(e.query_config_base_card,"form_column",i)},expression:"query_config_base_card.form_column"}})],1),t("el-form-item",{attrs:{label:"\u6807\u7B7E\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.form_label_width,callback:function(i){e.$set(e.query_config_base_card,"form_label_width",i)},expression:"query_config_base_card.form_label_width"}})],1)],1)]:e._e(),e.query_config_base_card.display=="custom"?[t("el-form-item",{attrs:{label:"\u663E\u793A\u6807\u7B7E"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.custom_label,callback:function(i){e.$set(e.query_config_base_card,"custom_label",i)},expression:"query_config_base_card.custom_label"}})],1),e.query_config_base_card.custom_label==!0?t("el-form-item",{attrs:{label:"\u5206\u9694\u7B26"}},[t("el-input",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.custom_label_separator,callback:function(i){e.$set(e.query_config_base_card,"custom_label_separator",i)},expression:"query_config_base_card.custom_label_separator"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.custom_height,callback:function(i){e.$set(e.query_config_base_card,"custom_height",i)},expression:"query_config_base_card.custom_height"}})],1)]:e._e(),t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u64CD\u4F5C\u6309\u94AE\u5217")]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u4F4D\u7F6E"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_position,callback:function(i){e.$set(e.query_config_base_card,"button_position",i)},expression:"query_config_base_card.button_position"}},e._l(e.global_query.card_button_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),e.query_config_base_card.button_position!=e.global_query.position.none.code?[t("el-form-item",{attrs:{label:"\u6309\u94AE\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_align,callback:function(i){e.$set(e.query_config_base_card,"button_align",i)},expression:"query_config_base_card.button_align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_height,callback:function(i){e.$set(e.query_config_base_card,"button_height",i)},expression:"query_config_base_card.button_height"}})],1),t("el-form-item",{attrs:{label:"\u56DB\u5468\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_padding,callback:function(i){e.$set(e.query_config_base_card,"button_padding",i)},expression:"query_config_base_card.button_padding"}})],1),e.query_config_base_card.button_padding?e._e():[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_paddingTop,callback:function(i){e.$set(e.query_config_base_card,"button_paddingTop",i)},expression:"query_config_base_card.button_paddingTop"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_paddingRight,callback:function(i){e.$set(e.query_config_base_card,"button_paddingRight",i)},expression:"query_config_base_card.button_paddingRight"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_paddingBottom,callback:function(i){e.$set(e.query_config_base_card,"button_paddingBottom",i)},expression:"query_config_base_card.button_paddingBottom"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_paddingLeft,callback:function(i){e.$set(e.query_config_base_card,"button_paddingLeft",i)},expression:"query_config_base_card.button_paddingLeft"}})],1)],t("el-form-item",{attrs:{label:"\u81EA\u52A8\u9690\u85CF"}},[t("el-tooltip",{attrs:{content:"\u64CD\u4F5C\u5217\u6CA1\u6709\u6309\u94AE\u663E\u793A\u65F6\uFF0C\u9690\u85CF\u64CD\u4F5C\u5217","open-delay":1e3,effect:"light",placement:"top"}},[t("el-switch",{on:{change:e.changeQueryConfigBaseCard},model:{value:e.query_config_base_card.button_hide,callback:function(i){e.$set(e.query_config_base_card,"button_hide",i)},expression:"query_config_base_card.button_hide"}})],1)],1)]:e._e()],2)],2)])],1)},ea=[],ta={name:"base-card",mixins:[P],data(){return{query_config_base_card:{},shadow_list:[{value:"always",label:"\u603B\u662F\u663E\u793A"},{value:"hover",label:"\u9F20\u6807\u60AC\u6D6E"},{value:"never",label:"\u4ECE\u4E0D\u663E\u793A"}],display_list:[{value:"form",label:"\u8868\u5355"},{value:"custom",label:"\u81EA\u5B9A\u4E49"}],direction_list:[{value:"horizontal",label:"\u6C34\u5E73"},{value:"vertical",label:"\u5782\u76F4"}]}},watch:{"queryConfig.base.card":{deep:!0,handler:function(){this.query_config_base_card=JSON.parse(JSON.stringify(this.queryConfig.base.card))}}},created(){this.query_config_base_card=JSON.parse(JSON.stringify(this.defaultQueryConfig.base.card))},mounted(){this.query_config_base_card=JSON.parse(JSON.stringify(this.queryConfig.base.card))},methods:{...(0,w.nv)(["updateQueryConfigBaseCard"]),changeQueryConfigBaseCard(){this.updateQueryConfigBaseCard(this.query_config_base_card)}}},ia=ta,aa=(0,D.Z)(ia,Yi,ea,!1,null,"151a8ac2",null),oa=aa.exports,ra=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"inline-block",padding:"0px 5px"}},[t("el-button",{attrs:{type:"text"},on:{click:e.showDialog}},[e._v("\u91CD\u7F6E")]),t("el-dialog",{staticClass:"my-dialog",staticStyle:{padding:"0px"},attrs:{title:"\u91CD\u7F6E\u9ED8\u8BA4\u914D\u7F6E(\u5E73\u53F0\u7EDF\u4E00\u914D\u7F6E)",top:"10px","append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisual,width:"600px"},on:{"update:visible":function(i){e.dialogVisual=i}}},[t("div",[t("el-table",{ref:"myTable",attrs:{data:e.themeConfig}},[t("el-table-column",{attrs:{type:"selection",prop:"checked"}}),t("el-table-column",{attrs:{label:"\u914D\u7F6E",width:"160",prop:"label"}}),t("el-table-column",{attrs:{lable:"\u5185\u5BB9"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{domProps:{innerHTML:e._s(i.row.desc)}})]}}])})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.cancelReset}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.reset}},[e._v("\u786E \u5B9A")])],1)])],1)},na=[],ht=c(441958);const gt=c(667251),st="platform";var la={name:"ThemePlatformReset",props:{theme:{type:String,default:st}},computed:{...(0,w.Se)(["defaultQueryConfig","queryConfigFun","themeQueryConfig"]),queryConfig(){return this.queryConfigFun()}},data(){return{global_class:ht.Z.global_class,dialogVisual:!1,themeConfig:[{label:"\u8868\u683C\u8BBE\u7F6E",desc:"\u91CD\u65B0\u8BBE\u7F6E\u5982\u4E0B\u5C5E\u6027\uFF1A<br/>\u8868\u683C\u5C3A\u5BF8\uFF1A\u8D85\u5C0F<br/>\u8868\u5934\u548C\u8868\u683C\u9AD8\u5EA6\uFF1A40<br/>\u5F00\u542F\u8868\u5934\u548C\u8868\u683C\u7684\u5185\u5BB9\u8FC7\u957F\u63D0\u793A<br/>\u64CD\u4F5C\u5217\uFF1A\u56FA\u5B9A\u5728\u8868\u683C\u53F3\u4FA7<br/>",checked:!0,handler(a){a.base.column_button_position!="none"&&(a.base.column_button_position="right"),a.base=gt(a.base,this.themeQueryConfig(st).base)}},{label:"\u7CFB\u7EDF\u6309\u94AE",desc:"\u91CD\u65B0\u8BBE\u7F6E\u7CFB\u7EDF\u6309\u94AE\u7684\u6837\u5F0F\u4E3A\u9ED8\u8BA4\u914D\u7F6E",checked:!0,handler:function(a){let e=ht.Z.button_system_theme[st];if(e)for(let t=0;t<a.button.length;++t){let i=a.button[t];if(i.isSys&&i.guid){let o=Object.keys(e).find(n=>e[n].guid==i.guid);o&&(a.button[t]=gt(i,e[o]))}}}},{label:"\u9876\u90E8\u81EA\u5B9A\u4E49\u6309\u94AE",desc:"\u5C06\u9876\u90E8\u7684\u81EA\u5B9A\u4E49\u6309\u94AE\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u914D\u7F6E",checked:!0,handler(a){for(let e=0;e<a.button.length;++e){let t=a.button[e];!t.isSys&&t.button_position==="header"&&(t.style="default",t.colorType="primary",t.is_button_style=!1)}}},{label:"\u884C\u5185\u81EA\u5B9A\u4E49\u6309\u94AE",desc:"\u5C06\u884C\u5185\u81EA\u5B9A\u4E49\u6309\u94AE\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u914D\u7F6E",checked:!0,handler(a){for(let e=0;e<a.button.length;++e){let t=a.button[e];!t.isSys&&t.button_position==="row"&&(t.style="text",t.colorType="primary",t.is_button_style=!1,a.base.column_button_position="right")}}}]}},methods:{...(0,w.nv)(["updateQueryConfigBase","updateQueryConfigButton"]),showDialog(){if(this.queryConfig?.base?.global_class!="platform"){this.$message.warning("\u53EA\u80FD\u91CD\u7F6E\u9ED8\u8BA4\u6837\u5F0F");return}this.dialogVisual=!0,this.$nextTick(()=>{this.themeConfig.forEach(a=>{this.$refs.myTable.toggleRowSelection(a,a.checked)})})},cancelReset(){this.dialogVisual=!1},reset(){this.$refs.myTable?.selection?.length>0&&this.$confirm("\u8BE5\u64CD\u4F5C\u4F1A\u8986\u76D6\u90E8\u5206\u914D\u7F6E\u9879\uFF0C\u5EFA\u8BAE\u63D0\u524D\u5BFC\u51FA\u4F5C\u4E3A\u5907\u4EFD\uFF0C\u662F\u5426\u8986\u76D6?","\u63D0\u9192").then(()=>{let a=JSON.parse(JSON.stringify(this.queryConfig));this.$refs.myTable.selection.forEach(e=>{e.handler.call(this,a)}),this.updateQueryConfigBase(a.base),this.updateQueryConfigButton(a.button),this.dialogVisual=!1})}}},sa=la,ca=(0,D.Z)(sa,ra,na,!1,null,"14cc7d20",null),da=ca.exports,ua={name:"design-base",components:{ThemePlatformReset:da,BaseCard:oa,BaseStyle:Xi,WarningTooltip:v.Z,BaseResource:Hi,BaseFooter:zi,BasePreviewCondition:Ti,GlobalParam:ki,DataSet:R.default,BaseOrder:fi,BaseTable:ti,BasePagination:li,BaseOrderHeader:yi},mixins:[P],data(){return{dialog:{width:0,height:0},activeNames:[],clickLoadResourceFile:{isClick:!1,activeNamesTemp:[]},query_config_base:{},datasetDt:[],datesetSql:null,base_datasetId:void 0,dialogVisibleDataSet:!1,list:{group:[],dataSet:[],dataSetTemp:[]},popover_visible:!1,keywords:"",radio_select:"associative"}},watch:{"queryConfig.base":{deep:!0,handler:function(){this.query_config_base=JSON.parse(JSON.stringify(this.queryConfig.base)),this.query_config_base.global_class||(this.query_config_base.global_class="default"),this.getDataSetInfo()}},keywords(a){this.$refs.popoverTree.filter(a)}},created(){y.Z.$on("busGetDatasetTreeData",()=>{this.getDatasetDt()}),this.query_config_base=JSON.parse(JSON.stringify(this.defaultQueryConfig.base))},mounted(){this.dialog.height=window.innerHeight-140,this.dialog.width=window.innerWidth-40},methods:{...(0,w.nv)(["updateQueryConfigBase","updateQueryConfigField","setDatasourceType","setDateSetConfig","setDefaultQueryConfig","setRequestBody","setRequestBodyOrders","setRequestAssociativeDataset"]),changeQueryConfigBase(){this.updateQueryConfigBase(this.query_config_base)},changeQueryTimeEnable(){this.query_config_base.query_time==!0&&!this.$$lib__.contains(this.query_config_base.footer.control_list,"query_time")?this.query_config_base.footer.control_list.push("query_time"):this.query_config_base.footer.control_list=this.$$lib__.without(this.query_config_base.footer.control_list,"query_time"),this.changeQueryConfigBase(),this.$refs.base_pagination.setBodyPage(this.query_config_base.pagination_enable),y.Z.$emit("busQueryDataList")},changePaginationEnable(){this.query_config_base.pagination_enable==!0&&!this.$$lib__.contains(this.query_config_base.footer.control_list,"pagination")?this.query_config_base.footer.control_list.push("pagination"):this.query_config_base.footer.control_list=this.$$lib__.without(this.query_config_base.footer.control_list,"pagination"),this.changeQueryConfigBase(),this.$refs.base_pagination.setBodyPage(this.query_config_base.pagination_enable),y.Z.$emit("busQueryDataList")},changePreviewConditionEnable(){this.$$lib__.isEmpty(this.query_config_base.preview_condition)&&(this.query_config_base.preview_condition={label:"\u7B5B\u9009\u6761\u4EF6\uFF1A",marginRight:5,size:"small",effect:"light",closable:!0,type:"info"}),this.changeQueryConfigBase()},changeOrdersEnable(){this.changeQueryConfigBase(),this.setRequestBodyOrders(this.queryConfig.base.orders),y.Z.$emit("busQueryDataList")},changeLoadResourceFileEnable(){this.clickLoadResourceFile.isClick=!0,this.clickLoadResourceFile.activeNamesTemp=JSON.parse(JSON.stringify(this.activeNames)),this.changeQueryConfigBase()},handleChange(){if(this.clickLoadResourceFile.isClick!=!0){let a=this.$refs.myBase.querySelectorAll(".bi_right");this.$$lib__.each(a,e=>{var t=this.$$lib__.find(this.activeNames,i=>i==e.attributes.name.value);t?(e.style.transform==""||e.style.transform=="rotate(0deg)")&&(e.style.transform="rotate(-90deg)"):e.style.transform=="rotate(-90deg)"&&(e.style.transform="rotate(0deg)")}),this.$$lib__.contains(this.activeNames,"param")&&this.$refs.globalParam.initEditor(),this.$$lib__.contains(this.activeNames,"condition")&&this.$refs.basePreviewCondition.setFormData(this.query_config_base.preview_condition)}else this.activeNames=JSON.parse(JSON.stringify(this.clickLoadResourceFile.activeNamesTemp)),this.clickLoadResourceFile.isClick=!1},getDataSetInfo(a,e){(e==!0||this.base_datasetId!=this.query_config_base.datasetId&&this.query_config_base.datasetId&&this.query_config_base.datasetId!="")&&(this.base_datasetId=this.query_config_base.datasetId,ue._.getDataSetByDatasetId(this.query_config_base.datasetId).then(t=>{if(t&&t.status==200){this.query_config_base.datasourceType=t.data.datasourceType,this.setDatasourceType(t.data.datasourceType);let i=JSON.parse(t.data.configJson);i.query&&i.query.sql&&(this.datesetSql=i.query.sql),this.setDateSetConfig(i),a&&a()}else C.Message.error({message:t.msg,offset:60})}))},getDatasetDt(a){this.loading=!0,ue._.getDataSetTree("''").then(e=>{this.loading=!1,e&&e.status==200?(this.list.group=e.data.dataSetCategoryList,this.list.dataSet=e.data.dataSetList,this.setDataSetDt(),a&&a()):C.Message.error({message:e.msg,offset:60})})},setDataSetDt(){this.keywords=null,this.list.dataSetTemp=[];let a=JSON.parse(JSON.stringify(this.list.group));this.radio_select=="associative"?this.$$lib__.each(JSON.parse(JSON.stringify(this.list.dataSet)),i=>{this.$$lib__.contains(this.queryConfig.associativeDataset,i.datasetId)&&this.list.dataSetTemp.push(i)}):this.list.dataSetTemp=JSON.parse(JSON.stringify(this.list.dataSet));let e=this.rebuildData(a,this.list.dataSetTemp,{type:"datasetType",id:"datasetId",label:"datasetName"});if(e.length>1){let i=e.find(o=>o.label=="\u6240\u6709");i&&(e=[i])}let t=[];this.radio_select=="associative"?this.$$lib__.each(JSON.parse(JSON.stringify(e)),i=>{i.type=="data"?t.push(i):i.type=="category"&&i.children&&i.children.length>0&&(i.children=this.removeEmptyNode(i.children),(i.children.length>0||i.id==this.$$global.sysGuid.dataSetCategoryid)&&t.push(i))}):t=e,this.datasetDt=t.length>0?t[0].children:[]},selectValue(a){if(a.type=="data"){this.query_config_base.datasetId=a.id,this.query_config_base.datesetName=a.label;let e=JSON.parse(a.configJson);e&&e.query&&(this.query_config_base.datesetConfigJson={dimensions:e.dimensions,query:{script:e.query.script}}),this.popover_visible=!1,this.loadDataSet(),this.changeQueryConfigBase()}},loadDataSet(a){this.getDataSetInfo(()=>{this.setDefaultQueryConfig();let e={datasetId:this.queryConfig.base.datasetId,keyValue:this.getKeyValue(),condition:this.queryConfig.condition,field:this.queryConfig.field};this.setRequestBody(e),y.Z.$emit("busQueryDataList")},a)},getKeyValue(){let a={};return this.$$lib__.each(this.queryConfig.condition,e=>{m.default.set(a,e.field,this.getDefaultValue(e))}),a},getDefaultValue(a){let e=null;switch(a.default_value.type){case this.global_query.default_value_type.fixed_value.code:e=a.default_value.fixed_value.value;break;case this.global_query.default_value_type.url.code:break;case this.global_query.default_value_type.local_storage.code:break;case this.global_query.default_value_type.javascript.code:break}return e},filterNode(a,e){return a?e.label&&(e.id.indexOf(a)!==-1||e.label.indexOf(a)!==-1):!0},clearSelect(){this.base_datasetId=null,this.query_config_base.datasetId=null,this.query_config_base.datesetName=null,this.datesetSql="",this.changeQueryConfigBase(),this.updateQueryConfigField([]),this.setDateSetConfig({})},copyDataset(){var a=document.getElementById("copyTxt");a.select(),document.execCommand("Copy")?this.$message({message:"\u6570\u636E\u96C6\u540D\u79F0\u590D\u5236\u6210\u529F",type:"success"}):this.$message({message:"\u6570\u636E\u96C6\u540D\u79F0\u590D\u5236\u5931\u8D25\uFF0C\u5F53\u524D\u64CD\u4F5C\u4E0D\u88AB\u652F\u6301\u6216\u672A\u88AB\u542F\u7528",type:"warning"})},editDataset(){this.dialogVisibleDataSet=!0},refreshDataset(){this.getDatasetDt(()=>{if(this.query_config_base.datasetId&&this.query_config_base.datasetId!=""){let a=this.$$lib__.find(this.list.dataSet,e=>e.datasetId==this.query_config_base.datasetId);if(a){let e=JSON.parse(a.configJson);e&&e.query&&(this.query_config_base.datesetConfigJson={dimensions:e.dimensions,query:{script:e.query.script}},this.changeQueryConfigBase()),this.loadDataSet(!0)}else C.Message.error({message:"\u672A\u83B7\u53D6\u5230\u5F53\u524D\u6570\u636E\u96C6\uFF0C\u53EF\u80FD\u5DF2\u5220\u9664\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9",offset:60})}})},datasetDialogOpen(){this.$refs.datasetDialog&&this.$refs.datasetDialog.myUpdate()},rebuildData(a,e,t){let i={},o={},n=[];return this.$$lib__.each(e,d=>{i[d[t.type]]||(i[d[t.type]]=[]),d.id=d[t.id],d.label=d[t.label],d.type="data",i[d[t.type]].push(d)}),this.$$lib__.each(a,d=>{d.id="type_"+d.categoryId,d.label=d.categoryName,d.type="category",d.parentId!=null?(o[d.parentId]||(o[d.parentId]=[]),o[d.parentId].push(d)):n.push(d)}),this.transferFl(n,o,i),n},transferFl(a,e,t){this.$$lib__.each(a,i=>{let o=e[i.categoryId];o?(i.children=o,t[i.categoryId]&&this.$$lib__.each(t[i.categoryId],n=>{i.children.push(n)}),this.transferFl(o,e,t)):t[i.categoryId]&&(i.children=t[i.categoryId])})},screenShot(){this.queryImg&&!this.queryImg.startsWith("data:")?this.$confirm("\u67E5\u8BE2\u5217\u8868\u6B63\u5728\u4F7F\u7528\u4E0A\u4F20\u7684\u56FE\u7247\u4F5C\u4E3A\u7F29\u7565\u56FE\uFF0C\u8BF7\u786E\u8BA4\u662F\u5426\u66F4\u65B0\u8986\u76D6\uFF1F","\u63D0\u793A",{customClass:"deleteBoardC"}).then(()=>{this.saveScreenShot()}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u66F4\u65B0\u7F29\u7565\u56FE",offset:60})}):this.saveScreenShot()},checkImage(a){a&&this.queryImg&&!this.queryImg.startsWith("data:")?this.$confirm("\u67E5\u8BE2\u5217\u8868\u6B63\u5728\u4F7F\u7528\u4E0A\u4F20\u7684\u56FE\u7247\u4F5C\u4E3A\u7F29\u7565\u56FE\uFF0C\u8BF7\u786E\u8BA4\u662F\u5426\u8BBE\u7F6E\u81EA\u52A8\u66F4\u65B0\u7F29\u7565\u56FE\uFF1F","\u63D0\u793A",{customClass:"deleteBoardC"}).then(()=>{this.changeQueryConfigBase()}).catch(()=>{this.query_config_base.autoScreenShot=!1,C.Message.info({message:"\u5DF2\u53D6\u6D88\u8BBE\u7F6E\u81EA\u52A8\u66F4\u65B0\u7F29\u7565\u56FE",offset:60})}):this.changeQueryConfigBase()},changeAssociativeIds(a){this.setRequestAssociativeDataset(a)},removeEmptyNode(a){let e=[];return this.$$lib__.each(a,t=>{t.type=="data"?e.push(t):t.type=="category"&&t.children&&t.children.length>0&&(t.children=this.removeEmptyNode(t.children),t.children.length>0&&e.push(t))}),e},changeRadioGroup(){this.setDataSetDt()},showPopover(){this.radio_select=="associative"&&this.query_config_base.datasetId&&this.query_config_base.datasetId!=""&&(this.$$lib__.find(this.list.dataSetTemp,e=>e.datasetId==this.query_config_base.datasetId)||(this.radio_select="all",this.changeRadioGroup()))}}},_a=ua,fa=(0,D.Z)(_a,r,l,!1,null,"b1cbe22a",null),pa=fa.exports,ha=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-design-field"},[t("el-container",[t("el-aside",{staticStyle:{"border-right":"1px solid #e4e7ed"},attrs:{width:"200px"}},[t("div",{staticClass:"my-design-field-content queryDataSourceTree",style:{height:e.card_height-10+"px"}},[t("el-tree",{ref:"field_tree",staticClass:"my_tree",attrs:{"allow-drag":e.allowDrag,"allow-drop":e.allowDrop,"current-node-key":e.current_node_key,data:e.field_tree_data,"expand-on-click-node":!1,"default-expand-all":"",draggable:"","highlight-current":"","node-key":"id"},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[t("span",{staticStyle:{"margin-right":"5px",color:"#0a84ff"}},[o.id=="root_left"?t("i",{staticClass:"iconfont bi_txtLeft"}):e._e(),o.id=="root_right"?t("i",{staticClass:"iconfont bi_txtRight"}):e._e(),o.id=="root"?t("i",{staticClass:"iconfont bi_txtCenterH"}):e._e()]),o.type=="header"?t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})])]):e._e(),t("el-tooltip",{attrs:{content:i.label,"open-delay":1e3,effect:"light",placement:"top"}},[t("span",{style:e.treeNodeStyle(i)},[e._v(" "+e._s(i.label)+" ")])]),t("span",{staticClass:"iconfont-container"},[o.id=="root"?t("span",{staticClass:"custom-tree-node-btn"},[t("el-dropdown",{attrs:{placement:"right-start"},on:{command:function(n){return e.handleCommandItem(n)}}},[t("span",{staticClass:"iconfont bi_gengduo seticon",staticStyle:{width:"101%"},style:{color:e.theme.icon_color}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"a"}},[t("i",{staticClass:"iconfont bi_add31"}),e._v("\u6DFB\u52A0\u81EA\u5B9A\u4E49\u8868\u5934 ")]),t("el-dropdown-item",{attrs:{command:"b"}},[t("i",{staticClass:"iconfont bi_add31"}),e._v("\u6DFB\u52A0\u67E5\u8BE2\u5217 ")])],1)],1)],1):e._e(),o.type=="field"?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u67E5\u8BE2\u5217",effect:"light",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>e.remove(o)}},[t("i",{staticClass:"iconfont bi_del3"})])],1):e._e(),o.type=="header"?[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u7F16\u8F91\u81EA\u5B9A\u4E49\u8868\u5934",effect:"light",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>e.editHeader(o)}},[t("i",{staticClass:"el-icon-edit",staticStyle:{color:"#409eff"}})])],1),!o.children||o.children&&o.children.length<1?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u81EA\u5B9A\u4E49\u8868\u5934",effect:"light",placement:"top"}},[t("el-button",{staticStyle:{"margin-left":"0px"},attrs:{size:"mini",type:"text"},on:{click:()=>e.removeHeader(o)}},[t("i",{staticClass:"iconfont bi_del3"})])],1):e._e()]:e._e()],2)],1)}}])})],1)]),t("el-main",[t("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.form_field.field&&e.form_field.field!="",expression:"form_field.field && form_field.field != ''"}],attrs:{stretch:""}},[t("el-tab-pane",{attrs:{label:"\u57FA\u672C\u914D\u7F6E"}},[t("div",{staticClass:"my-design-field-content",style:{height:e.card_height-43+"px"}},[t("el-form",{ref:"form",staticStyle:{margin:"10px"},attrs:{inline:!0,model:e.form_field,size:"mini"}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u4E3B\u952E"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form_field.guid,callback:function(i){e.$set(e.form_field,"guid",i)},expression:"form_field.guid"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u6BB5\u540D\u79F0"}},[t("el-input",{attrs:{disabled:!0,placeholder:"\u5B57\u6BB5\u540D\u79F0"},model:{value:e.form_field.field,callback:function(i){e.$set(e.form_field,"field",i)},expression:"form_field.field"}})],1),t("el-form-item",{attrs:{label:"\u6807\u9898\u6587\u672C"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u6807\u9898\u6587\u672C"},on:{change:e.changeFormField},model:{value:e.form_field.label,callback:function(i){e.$set(e.form_field,"label",i)},expression:"form_field.label"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u6BB5\u679A\u4E3E"}},[t("el-radio-group",{staticClass:"redio-4",on:{change:e.changeFormField},model:{value:e.form_field.enum_type,callback:function(i){e.$set(e.form_field,"enum_type",i)},expression:"form_field.enum_type"}},e._l(e.global_query.enum_type_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),e.form_field.enum_type&&e.form_field.enum_type!=""&&e.form_field.enum_type!=e.global_query.enum_type.none.code?[t("el-form-item",{attrs:{label:"\u591A\u679A\u4E3E\u503C"}},[t("el-switch",{on:{change:e.changeFormFieldIsMultipleEnum},model:{value:e.form_field.is_multiple_enum,callback:function(i){e.$set(e.form_field,"is_multiple_enum",i)},expression:"form_field.is_multiple_enum"}})],1),e.form_field.is_multiple_enum==!0?t("el-form-item",{attrs:{label:"\u5206\u9694\u7B26"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u679A\u4E3E\u503C\u5206\u9694\u7B26"},on:{change:e.changeFormField,input:e.forceUpdate},model:{value:e.form_field.multiple_enum_separator,callback:function(i){e.$set(e.form_field,"multiple_enum_separator",i)},expression:"form_field.multiple_enum_separator"}})],1):e._e()]:e._e(),e.form_field.enum_type==e.global_query.enum_type.field.code?[t("el-form-item",{attrs:{label:"\u679A\u4E3E\u5B57\u6BB5"}},[t("select-tree-field-enum",{attrs:{clearable:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5B57\u6BB5"},on:{change:e.changeFormFieldEnum,"select-tree-click":e.changeFormFieldEnum},model:{value:e.form_field.field_enum_name,callback:function(i){e.$set(e.form_field,"field_enum_name",i)},expression:"form_field.field_enum_name"}})],1)]:e.form_field.enum_type==e.global_query.enum_type.data_set.code?[t("el-form-item",{attrs:{label:"\u6570\u636E\u96C6"}},[t("select-tree-data-set",{attrs:{clearable:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u96C6"},on:{change:e.changeDataSet},model:{value:e.form_field.data_set,callback:function(i){e.$set(e.form_field,"data_set",i)},expression:"form_field.data_set"}})],1),t("el-form-item",{attrs:{label:"\u679A\u4E3E\u503C"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u679A\u4E3E\u503C\u5BF9\u5E94\u5B57\u6BB5","popper-class":"white-bgc"},on:{change:e.changeFormDataSet},model:{value:e.form_field.data_set.field_value,callback:function(i){e.$set(e.form_field.data_set,"field_value",i)},expression:"form_field.data_set.field_value"}},e._l(e.getDataSetFieldList(),function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u679A\u4E3E\u540D\u79F0"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u679A\u4E3E\u540D\u79F0\u5BF9\u5E94\u5B57\u6BB5","popper-class":"white-bgc"},on:{change:e.changeFormDataSet},model:{value:e.form_field.data_set.field_name,callback:function(i){e.$set(e.form_field.data_set,"field_name",i)},expression:"form_field.data_set.field_name"}},e._l(e.getDataSetFieldList(),function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1)]:e._e(),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_field.hide!=!0&&e.queryConfig.base.query_type!=e.global_query.query_type.card.code&&e.queryConfig.base.card&&e.queryConfig.base.card.display!="custom",expression:`
                                            form_field.hide != true &&
                                            queryConfig.base.query_type != global_query.query_type.card.code &&
                                            queryConfig.base.card &&
                                            queryConfig.base.card.display != 'custom'
                                        `}],attrs:{label:"\u6807\u9898\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeFormField},model:{value:e.form_field.header_align,callback:function(i){e.$set(e.form_field,"header_align",i)},expression:"form_field.header_align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_field.hide!=!0&&e.queryConfig.base.query_type!=e.global_query.query_type.card.code&&e.queryConfig.base.card&&e.queryConfig.base.card.display!="custom",expression:`form_field.hide!=true
                                                    &&queryConfig.base.query_type != global_query.query_type.card.code
                                                    && queryConfig.base.card&& queryConfig.base.card.display != 'custom'`}],attrs:{label:"\u5217\u7684\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeFormField},model:{value:e.form_field.width,callback:function(i){e.$set(e.form_field,"width",i)},expression:"form_field.width"}})],1),e.form_field.hide!=!0&&e.queryConfig.base.query_type==e.global_query.query_type.card.code&&e.queryConfig.base.card&&e.queryConfig.base.card.display=="custom"?[t("el-form-item",{attrs:{label:"\u5750\u6807x"}},[t("el-input-number",{attrs:{step:1,"controls-position":"right"},on:{change:e.changeFormField},model:{value:e.form_field.x,callback:function(i){e.$set(e.form_field,"x",i)},expression:"form_field.x"}})],1),t("el-form-item",{attrs:{label:"\u5750\u6807y"}},[t("el-input-number",{attrs:{step:1,"controls-position":"right"},on:{change:e.changeFormField},model:{value:e.form_field.y,callback:function(i){e.$set(e.form_field,"y",i)},expression:"form_field.y"}})],1),t("el-form-item",{attrs:{label:"\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right"},on:{change:e.changeFormField},model:{value:e.form_field.w,callback:function(i){e.$set(e.form_field,"w",i)},expression:"form_field.w"}})],1),t("el-form-item",{attrs:{label:"\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right"},on:{change:e.changeFormField},model:{value:e.form_field.h,callback:function(i){e.$set(e.form_field,"h",i)},expression:"form_field.h"}})],1),t("el-form-item",{attrs:{label:"\u5706\u89D2"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right"},on:{change:e.changeFormField},model:{value:e.form_field.borderRadius,callback:function(i){e.$set(e.form_field,"borderRadius",i)},expression:"form_field.borderRadius"}})],1),t("el-form-item",{attrs:{label:"\u80CC\u666F\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u80CC\u666F\u989C\u8272"},on:{change:e.changeFormField},model:{value:e.form_field.backgroundColor,callback:function(i){e.$set(e.form_field,"backgroundColor",i)},expression:"form_field.backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeFormField},model:{value:e.form_field.backgroundColor,callback:function(i){e.$set(e.form_field,"backgroundColor",i)},expression:"form_field.backgroundColor"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6587\u5B57\u6587\u672C\u989C\u8272"},on:{change:e.changeFormField},model:{value:e.form_field.color,callback:function(i){e.$set(e.form_field,"color",i)},expression:"form_field.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeFormField},model:{value:e.form_field.color,callback:function(i){e.$set(e.form_field,"color",i)},expression:"form_field.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeFormField},model:{value:e.form_field.fontFamily,callback:function(i){e.$set(e.form_field,"fontFamily",i)},expression:"form_field.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeFormField},model:{value:e.form_field.fontSize,callback:function(i){e.$set(e.form_field,"fontSize",i)},expression:"form_field.fontSize"}})],1)]:e._e(),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_field.hide!=!0,expression:"form_field.hide != true"}],attrs:{label:"\u5185\u5BB9\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeFormField},model:{value:e.form_field.align,callback:function(i){e.$set(e.form_field,"align",i)},expression:"form_field.align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_field.hide!=!0&&e.queryConfig.base.query_type!=e.global_query.query_type.card.code&&(!e.form_field.header_id||e.form_field.header_id==""),expression:`
                                            form_field.hide != true &&
                                            queryConfig.base.query_type != global_query.query_type.card.code &&
                                            (!form_field.header_id || form_field.header_id == '')
                                        `}],attrs:{label:"\u5217\u56FA\u5B9A\u5904"}},[t("el-radio-group",{on:{change:e.changeFormFieldFixed},model:{value:e.form_field.fixed,callback:function(i){e.$set(e.form_field,"fixed",i)},expression:"form_field.fixed"}},e._l(e.global_query.fixed_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5355\u5143\u683C"}},[t("el-radio-group",{on:{change:e.changeFormField},model:{value:e.form_field.merge,callback:function(i){e.$set(e.form_field,"merge",i)},expression:"form_field.merge"}},e._l(e.merge_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u7ED1\u5B9A\u5F39\u7A97"}},[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u6253\u5F00\u7684\u5F39\u7A97","popper-class":"white-bgc"},on:{change:e.changeFormField},model:{value:e.form_field.dialog_id,callback:function(i){e.$set(e.form_field,"dialog_id",i)},expression:"form_field.dialog_id"}},e._l(e.dialog_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1)],2),t("div",{staticClass:"form-container button"},[t("el-form-item",{attrs:{label:"\u662F\u5426\u9690\u85CF"}},[t("el-switch",{on:{change:e.changeFormField},model:{value:e.form_field.hide,callback:function(i){e.$set(e.form_field,"hide",i)},expression:"form_field.hide"}})],1),e.form_field.hide!=!0&&e.queryConfig.base.query_type==e.global_query.query_type.card.code&&e.queryConfig.base.card&&e.queryConfig.base.card.display=="custom"?t("el-form-item",{attrs:{label:"\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_card_style},on:{change:e.changeFormField},model:{value:e.form_field,callback:function(i){e.form_field=i},expression:"form_field"}})],1):e._e(),t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u70B9\u51FB\u4E8B\u4EF6"}},[t("query-script",{attrs:{options:e.options.script_cell_click},on:{change:e.changeFormField},model:{value:e.form_field,callback:function(i){e.form_field=i},expression:"form_field"}})],1),t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u81EA\u5B9A\u4E49\u5185\u5BB9"}},[t("query-script",{attrs:{options:e.options.script_cell_slot},on:{change:e.changeFormField},model:{value:e.form_field,callback:function(i){e.form_field=i},expression:"form_field"}})],1),t("el-form-item",{attrs:{label:"\u542F\u7528\u6392\u5E8F"}},[t("el-switch",{on:{change:e.changeFormField},model:{value:e.form_field.sortable,callback:function(i){e.$set(e.form_field,"sortable",i)},expression:"form_field.sortable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_field.hide!=!0,expression:"form_field.hide != true"}],attrs:{label:"\u9ED8\u8BA4\u663E\u793A"}},[t("el-switch",{on:{change:e.changeFormField},model:{value:e.form_field.default_display,callback:function(i){e.$set(e.form_field,"default_display",i)},expression:"form_field.default_display"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_field.hide!=!0&&e.queryConfig.base.query_type!=e.global_query.query_type.card.code,expression:`
                                            form_field.hide != true &&
                                            queryConfig.base.query_type != global_query.query_type.card.code
                                        `}],attrs:{label:"\u5185\u5BB9\u8FC7\u957F\u63D0\u793A"}},[t("el-switch",{on:{change:e.changeFormField},model:{value:e.form_field.show_overflow_tooltip,callback:function(i){e.$set(e.form_field,"show_overflow_tooltip",i)},expression:"form_field.show_overflow_tooltip"}})],1)],1)])],1)]),t("el-tab-pane",{attrs:{label:"\u6743\u9650\u914D\u7F6E"}},[t("div",{staticClass:"content top-bannner"},[t("div",{staticClass:"my-top-info"},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5DE6\u4FA7\u9009\u4E2D\u7684\u5B57\u6BB5",effect:"light",placement:"top"}},[t("label",{staticStyle:{"font-weight":"bolder",color:"#616266"}},[e._v("\u5F53\u524D\u5B57\u6BB5\uFF1A"+e._s(e.form_field.label))])])],1),t("div",{staticClass:"my-top-cont"},[t("el-tooltip",{attrs:{content:"\u52FE\u9009\u7684\u89D2\u8272\u624D\u663E\u793A\u5F53\u524D\u5217\uFF0C\u53D1\u5E03\u6210\u516C\u5F00\u7248\u672C\u6743\u9650\u4E0D\u751F\u6548"}},[t("i",{staticClass:"el-icon-info"})]),e._v(" \u542F\u7528\u6743\u9650 "),t("el-switch",{on:{change:e.changeFormField},model:{value:e.form_field.is_authorize,callback:function(i){e.$set(e.form_field,"is_authorize",i)},expression:"form_field.is_authorize"}})],1)]),t("div",{staticClass:"my-bottom-info",style:{height:e.card_height-94+"px",width:"100%"}},[t("el-tree",{directives:[{name:"show",rawName:"v-show",value:e.form_field.is_authorize,expression:"form_field.is_authorize"}],ref:"role_tree",attrs:{data:e.role_tree_data,"expand-on-click-node":!1,"default-expand-all":"","highlight-current":"","node-key":"id","show-checkbox":""},on:{check:e.handleCheck},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[o.type=="roleGroup"?t("el-tooltip",{attrs:{content:"\u89D2\u8272\u7EC4 [ "+i.label+" ]","open-delay":1e3,effect:"light",placement:"right"}},[t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})]),e._v(" "+e._s(i.label)+" ")])]):e._e(),o.type=="role"?t("el-tooltip",{attrs:{content:"\u89D2\u8272 [ "+i.label+" ]","open-delay":1e3,effect:"light",placement:"right"}},[t("span",[e._v(" "+e._s(i.label)+" ")])]):e._e()],1)}}])})],1)])],1)],1)],1),t("el-dialog",{staticClass:"my-dialog",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:e.dialogVisible,title:"\u589E\u52A0\u67E5\u8BE2\u5217",width:"400px"},on:{"update:visible":function(i){e.dialogVisible=i}}},[t("div",{staticStyle:{"max-height":"300px","min-width":"150px","overflow-y":"auto"}},[t("el-tree",{ref:"appendTree",attrs:{data:e.append_tree_data,"expand-on-click-node":!1,"check-on-click-node":"","default-expand-all":"","show-checkbox":""}})],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{margin:"0px 10px 15px 0px"},attrs:{size:"small"},on:{click:e.cancel}},[e._v("\u53D6 \u6D88")]),t("el-button",{staticStyle:{margin:"0px 20px 15px 0px"},attrs:{size:"small",type:"primary"},on:{click:e.confirm}},[e._v("\u786E \u5B9A")])],1)]),t("el-dialog",{staticClass:"my-dialog",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,title:e.titleHeader,visible:e.dialogVisibleHeader,width:"400px"},on:{"update:visible":function(i){e.dialogVisibleHeader=i}}},[t("el-form",{ref:"form_header",attrs:{model:e.form_header,inline:!0,size:"mini"}},[t("el-form-item",{attrs:{label:"\u4E0A\u7EA7\u8868\u5934"}},[t("el-select",{ref:"refParent",staticClass:"white-bgc",attrs:{value:e.form_header.parent_label,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u8868\u5934","popper-class":"white-bgc"},on:{"visible-change":e.visibleChange}},[t("el-option",{staticStyle:{height:"auto"},attrs:{label:e.form_header.parent_label,value:e.form_header.parent_guid}},[t("el-tree",{ref:"selectTree",attrs:{data:e.field_header_tree_data,"expand-on-click-node":!1,"default-expand-all":"","highlight-current":"","node-key":"id"},on:{"node-click":e.handleNodeClick2},scopedSlots:e._u([{key:"default",fn:function({node:i}){return t("span",{},[t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})])]),t("span",[e._v(" "+e._s(i.label)+" ")])])}}])})],1)],1)],1),t("el-form-item",{attrs:{label:"\u8868\u5934\u6587\u672C"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u8868\u5934\u6587\u672C"},model:{value:e.form_header.label,callback:function(i){e.$set(e.form_header,"label",i)},expression:"form_header.label"}})],1),t("el-form-item",{attrs:{label:"\u6807\u9898\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeFormField},model:{value:e.form_header.header_align,callback:function(i){e.$set(e.form_header,"header_align",i)},expression:"form_header.header_align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{margin:"0px 10px 15px 0px"},attrs:{size:"small"},on:{click:e.cancelHeader}},[e._v("\u53D6 \u6D88")]),t("el-button",{staticStyle:{margin:"0px 20px 15px 0px"},attrs:{size:"small",type:"primary"},on:{click:e.confirmHeader}},[e._v("\u786E \u5B9A")])],1)],1)],1)},ga=[],ma=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{ref:"refSelect",style:{width:e.selectWidth},attrs:{value:e.field_enum.fldChineseName,"popper-class":"white-bgc","filter-method":e.filterMethod,size:"mini",clearable:e.clearable,filterable:e.filterable,placeholder:e.placeholder},on:{clear:e.clearSelect,change:e.changeValue,"visible-change":e.visibleChange}},[t("el-option",{style:{height:e.treeHeight,overflowY:"auto"},attrs:{value:e.field_enum.fldLetterName,label:e.field_enum.fldChineseName}},[t("el-tree",{ref:"refTree",attrs:{data:e.treeData,"node-key":"fldLetterName","default-expanded-keys":e.defaultExpandedKeys,"highlight-current":"","expand-on-click-node":!1,"filter-node-method":e.filterNodeMethod},on:{"check-change":e.changeValue,"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[o.type=="group"?t("span",{attrs:{title:"\u5206\u7EC4 [ "+i.label+" ]"}},[i.expanded?t("i",{staticClass:"el-icon-folder-opened"}):t("i",{staticClass:"el-icon-folder"}),e._v(" "+e._s(i.label)+" ")]):e._e(),o.type=="field"?t("span",{attrs:{title:"\u5B57\u6BB5 [ "+i.label+" ]"}},[t("i",{staticClass:"el-icon-s-order"}),e._v(" "+e._s(i.label)+" ")]):e._e()])}}])})],1)],1)],1)},ba=[],ya=c(973770),va={name:"select-tree-field-enum",model:{prop:"value",event:"change"},props:{clearable:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},selectWidth:{type:String,default:"auto"},treeHeight:{type:String,default:"200px"},placeholder:{type:String,default:"\u8BF7\u9009\u62E9\u6570\u636E\u5B57\u5178"},defaultExpandedKeys:{type:Array,default(){return[]}},value:{default:null}},watch:{value(a){this.setSelectedFldLetterName(a)}},data(){return{field_enum:{fldLetterName:null,fldChineseName:null},list:{group:[],field:[]},treeData:[]}},created(){this.init_region_data()},methods:{changeValue(){this.$emit("change",this.field_enum.fldLetterName)},visibleChange(a){a&&this.$refs.refTree.setCurrentKey(this.field_enum.fldLetterName)},clearSelect(){this.field_enum.fldLetterName=null,this.field_enum.fldChineseName=null,this.defaultExpandedKeys.length=0,this.$refs.refTree.setCurrentKey(null),this.$emit("change",this.field_enum.fldLetterName),this.$forceUpdate()},filterMethod(a){this.$refs.refTree.filter(a)},filterNodeMethod(a,e){return a?e.label.indexOf(a)!==-1:!0},handleNodeClick(a,e,t){a.type=="field"&&(this.$emit("change",a.fldLetterName),this.field_enum=a,this.field_enum.fldLetterName=a.fldLetterName,this.field_enum.fldChineseName=a.label,this.$refs.refSelect.blur(),this.$emit("select-tree-click",a,e,t))},setSelectedFldLetterName(a){(!a||a=="")&&(this.field_enum.fldLetterName=null,this.field_enum.fldChineseName=null,this.defaultExpandedKeys.length=0),this.field_enum.fldLetterName=a;let e=this.$$lib__.find(this.list.field,t=>t.fldLetterName==a);e&&(this.field_enum.fldChineseName=e.fldChineseName,e.fldGroupId&&(this.defaultExpandedKeys.length=0,this.defaultExpandedKeys.push(e.fldGroupId)))},init_region_data(){ya.Q.getFieldExplainTree().then(a=>{a&&a.status==200?(this.list.group=a.data.list_group,this.list.field=a.data.list,this.rebuildData(),this.value&&this.setSelectedFldLetterName(this.value)):C.Message.error({message:a.msg,offset:60})})},rebuildData(){this.treeData=[];let a=JSON.parse(JSON.stringify(this.list.field)),e=JSON.parse(JSON.stringify(this.list.group)),t={},i={},o=[];this.$$lib__.each(a,n=>{t[n.fldGroupId]||(t[n.fldGroupId]=[]),n.id=n.fldExpId,n.label=n.fldChineseName+"( "+n.fldLetterName+" )",n.type="field",t[n.fldGroupId].push(n)}),this.$$lib__.each(e,n=>{n.id=n.fldGroupId,n.parent=n.fldGroupId,n.label=n.groupChineseName,n.type="group",n.fatherGroupId!=null&&n.fatherGroupId!=""?(i[n.fatherGroupId]||(i[n.fatherGroupId]=[]),i[n.fatherGroupId].push(n)):(this.defaultExpandedKeys.push(n.fldGroupId),o.push(n))}),this.transferData(o,i,t),this.treeData=JSON.parse(JSON.stringify(o))},transferData(a,e,t){this.$$lib__.each(a,i=>{let o=e[i.parent];o?(i.children=o,t[i.parent]&&this.$$lib__.each(t[i.parent],n=>{i.children.push(n)}),this.transferData(o,e,t)):t[i.parent]&&(i.children=t[i.parent])})}}},qa=va,xa=(0,D.Z)(qa,ma,ba,!1,null,null,null),mt=xa.exports,Ca=c(645617),le=c.n(Ca),bt=c(107803),wa={name:"design-field",components:{FontSelect:ye,SelectTreeDataSet:Ie,QueryScript:_.Z,SelectTreeFieldEnum:mt},mixins:[P],data(){return{dialogVisible:!1,current_node_key:null,query_config_field:[],form_field:null,query_config_field_header:[],field_header_tree_data:[],titleHeader:null,dialogVisibleHeader:!1,form_header:{},role_tree_data:[],merge_list:[{value:"none",label:"\u4E0D\u5408\u5E76"},{value:"row",label:"\u5408\u5E76\u884C"},{value:"column",label:"\u5408\u5E76\u5217"}],options:{script_cell_click:{attribute_enable:"is_cell_click",attribute_script_content:"script_cell_click",title:"\u70B9\u51FB\u4E8B\u4EF6",api:"api-cell-click"},script_cell_slot:{attribute_enable:"is_cell_slot",attribute_script_content:"script_cell_slot",title:"\u81EA\u5B9A\u4E49\u5185\u5BB9",api:"api-cell-slot"},script_card_style:{attribute_enable:"is_card_style",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"script_card_style",title:"\u5185\u5BB9\u6837\u5F0F",api:"api-shape-style"}}}},created(){this.setDefaultFormField()},computed:{append_tree_data(){let a=this,e=[];return a.$$lib__.each(a.dateSetConfig.dimensions,t=>{a.$$lib__.find(a.query_config_field,o=>o.field==t.name)||e.push({id:t.name,label:t.alias&&t.alias!=""?t.alias:t.name})}),[{id:"root",label:"\u5C1A\u672A\u6DFB\u52A0\u7684\u5B57\u6BB5",children:e}]},field_tree_data(){return[{id:"root",label:"\u67E5\u8BE2\u5217",children:this.rebuildData()}]},dialog_list(){let a=this,e=[];return a.$$lib__.each(a.queryConfig.dialog,t=>{e.push({value:t.guid,label:t.name})}),e}},watch:{"queryConfig.field":{deep:!0,handler:function(){let a=JSON.parse(JSON.stringify(this.queryConfig.field));a=this.$$lib__.sortBy(a,"order"),this.query_config_field=a,this.$$lib__.find(a,t=>t.field==this.form_field.field)||this.setDefaultFormField()}},"queryConfig.fieldHeader":{deep:!0,handler:function(){let a=JSON.parse(JSON.stringify(this.queryConfig.fieldHeader));a?(a=this.$$lib__.sortBy(a,"order"),this.query_config_field_header=a):this.query_config_field_header=[]}},field_tree_data:{deep:!0,handler:function(){this.form_field&&this.form_field.field&&this.$nextTick(()=>{this.$refs.field_tree.setCurrentKey(this.form_field.field)})}}},mounted(){this.initRoles(),y.Z.$on("busSetCurrentField",a=>{let e=this.$$lib__.find(this.queryConfig.field,t=>t.guid==a);e&&(this.form_field=JSON.parse(JSON.stringify(e)),this.current_node_key=e.field,this.$nextTick(()=>{this.$refs.field_tree.setCurrentKey(this.form_field.field)}))}),y.Z.$on("busReloadCurrentField",a=>{let e=this.$$lib__.find(this.queryConfig.field,t=>t.guid==a);e&&(this.form_field=JSON.parse(JSON.stringify(e)))})},methods:{...(0,w.nv)(["setCustomerFields","updateQueryConfigField","updateQueryConfigFieldHeader"]),handleCommandItem(a){a=="a"?this.appendHeader():a=="b"&&this.append()},changeFormFieldDefaultDisplay(){this.changeFormField();let a=[];this.query_config_field&&this.query_config_field.length>0&&(a=this.query_config_field.filter(e=>e.default_display).map(e=>e.guid)),this.setCustomerFields({customerFields:a,widgetId:this.widgetId})},changeFormField(){if(this.query_config_field&&this.query_config_field.length>0){for(let a=0;a<this.query_config_field.length;a++)if(this.query_config_field[a].field==this.form_field.field){this.query_config_field[a]=JSON.parse(JSON.stringify(this.form_field)),this.changeQueryConfigField();break}}},changeFormFieldEnum(){this.changeFormField(),y.Z.$emit("busGetFieldEnumJson")},changeFormFieldIsMultipleEnum(){(!this.form_field.multiple_enum_separator||this.form_field.multiple_enum_separator=="")&&(this.form_field.multiple_enum_separator=","),this.changeFormField()},changeFormFieldFixed(){this.changeFormField(),setTimeout(()=>{this.sortByOrder()},100)},changeFormDataSet(){this.changeFormField(),y.Z.$emit("busGetDataSetJson")},changeDataSet(){this.form_field.data_set.field_value=null,this.form_field.data_set.field_name=null,this.changeFormDataSet()},getDataSetFieldList(){let a=[];return this.form_field.data_set&&this.$$lib__.each(this.form_field.data_set.dimensionsAlias,e=>{a.push({value:e.name,label:e.alias&&e.alias!=""?e.alias:e.name})}),a},changeQueryConfigField(){this.updateQueryConfigField(this.query_config_field)},changeQueryConfigFieldHeader(){this.updateQueryConfigFieldHeader(this.query_config_field_header)},append(){this.dialogVisible=!0},remove(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664[ "+a.label+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{if(this.query_config_field&&this.query_config_field.length>0){for(let e=0;e<this.query_config_field.length;e++)if(this.query_config_field[e].field==a.id){this.query_config_field.splice(e,1),this.setDefaultFormField(),setTimeout(()=>{this.sortByOrder()},100);break}}}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},handleNodeClick(a){let e=this.$$lib__.find(this.query_config_field,t=>t.field==a.id);e&&(this.form_field=JSON.parse(JSON.stringify(e)),this.$refs.role_tree.setCheckedKeys(this.form_field.authorize_roles),this.current_node_key=e.field,this.queryConfig.base.query_type==this.global_query.query_type.card.code&&this.queryConfig.base.card.display=="custom"&&y.Z.$emit("busSetDraggableCurrentField",e.guid))},confirm(){let a=this.$refs.appendTree.getCheckedNodes(!0);if(a){let e=a.length;if(e==0||e==1&&a[0].id=="root"){this.dialogVisible=!1;return}let t=JSON.parse(JSON.stringify(this.defaultQueryConfig.field)),i=this.query_config_field.length,o=1,n=!0;this.$$lib__.each(a,d=>{this.$$lib__.find(this.query_config_field,H=>H.field==d.id)||(t.guid=le().v4().replace(/-/g,""),t.field=d.id,t.label=d.label,t.order=i+o,this.query_config_field.push(JSON.parse(JSON.stringify(t))),n&&(this.current_node_key=t.field,this.form_field=JSON.parse(JSON.stringify(t)),n=!1),o++)}),setTimeout(()=>{this.sortByOrder()},100)}this.dialogVisible=!1},cancel(){this.dialogVisible=!1},handleDragEnd(a,e,t){if(t=="none")return;let i=null;t=="inner"?i=e.data:e.parent&&(t=="before"||t=="after")&&(i=e.parent.data),i.type=="header"?a.data.type=="field"?this.$$lib__.each(this.query_config_field,o=>{o.field==a.data.field&&(i.id.indexOf("root")==-1?o.header_id=i.guid:o.header_id=void 0,o.fixed=this.global_query.position.none.code)}):this.$$lib__.each(this.query_config_field_header,o=>{o.guid==a.data.guid&&(i.id.indexOf("root")==-1?(o.parent_guid=i.guid,o.parent_label=i.label):(o.parent_guid=void 0,o.parent_label=void 0))}):a.data.type=="field"?this.$$lib__.each(this.query_config_field,o=>{o.field==a.data.field&&(i.id.indexOf("root")==-1?(o.header_id=i.guid,o.fixed=this.global_query.position.none.code):(o.header_id=void 0,o.fixed=i.fixed))}):this.$$lib__.each(this.query_config_field_header,o=>{o.guid==a.data.guid&&(i.id.indexOf("root")==-1?(o.parent_guid=i.guid,o.parent_label=i.label):(o.parent_guid=void 0,o.parent_label=void 0))}),this.sortByOrder()},sortByOrder(){let a=0,e=this.$refs.field_tree.getNode("root_left");e&&e.childNodes&&e.childNodes.length>0&&this.$$lib__.each(e.childNodes,o=>{this.$$lib__.each(this.query_config_field,n=>{n.field==o.data.field&&(n.order=a+1,a++),n.field==this.form_field.field&&(this.form_field=JSON.parse(JSON.stringify(n)))})});let t=this.$refs.field_tree.getNode("root");t&&t.childNodes&&t.childNodes.length>0&&(a=this.sortByOrderChildNode(t.childNodes,a));let i=this.$refs.field_tree.getNode("root_right");i&&i.childNodes&&i.childNodes.length>0&&this.$$lib__.each(i.childNodes,o=>{this.$$lib__.each(this.query_config_field,n=>{n.field==o.data.field&&(n.order=a+1,a++),n.field==this.form_field.field&&(this.form_field=JSON.parse(JSON.stringify(n)))})}),this.changeQueryConfigField(),this.changeQueryConfigFieldHeader()},sortByOrderChildNode(a,e){let t=a.length;for(let i=0;i<t;i++)a[i].data.type=="field"?this.$$lib__.each(this.query_config_field,o=>{o.field==a[i].data.field&&(o.order=e+1,e++),o.field==this.form_field.field&&(this.form_field=JSON.parse(JSON.stringify(o)))}):this.$$lib__.each(this.query_config_field_header,o=>{o.guid==a[i].data.guid&&(o.order=e+1,e++),o.guid==this.form_field.guid&&(this.form_field=JSON.parse(JSON.stringify(o)))}),a[i].childNodes&&a[i].childNodes.length>0&&(e=this.sortByOrderChildNode(a[i].childNodes,e));return e},allowDrop(a,e,t){if(a.data.type=="field")return e.data.type=="field"?t!="inner":e.data.id.indexOf("root")>-1?t=="inner":!0;if(a.data.type=="header"){if(e.data.type=="field")return t!="inner"&&e.data.fixed!=this.global_query.position.left.code&&e.data.fixed!=this.global_query.position.right.code;if(e.data.id.indexOf("root")==-1)return!0}else return!1},allowDrag(a){return a.data.id.indexOf("root")==-1},setDefaultFormField(){this.form_field=JSON.parse(JSON.stringify(this.defaultQueryConfig.field))},treeNodeStyle(a){let e=a.data.type=="header"?25:20;return{color:a.data.hide==!0?"#C0C4CC":"",width:140-e*(a.level-1)+"px"}},appendHeader(){this.form_header={header_align:"center"},this.dialogVisibleHeader=!0,this.titleHeader="\u6DFB\u52A0\u81EA\u5B9A\u4E49\u8868\u5934"},editHeader(a){this.form_header=JSON.parse(JSON.stringify(a)),this.dialogVisibleHeader=!0,this.titleHeader="\u7F16\u8F91\u8868\u5934[ "+a.label+" ]"},removeHeader(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664[ "+a.label+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{if(this.query_config_field_header&&this.query_config_field_header.length>0){for(let e=0;e<this.query_config_field_header.length;e++)if(this.query_config_field_header[e].guid==a.guid){this.query_config_field_header.splice(e,1),setTimeout(()=>{this.sortByOrder()},100);break}}}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},cancelHeader(){this.form_header={},this.dialogVisibleHeader=!1},confirmHeader(){if(this.form_header.guid){if(this.query_config_field_header&&this.query_config_field_header.length>0){for(let a=0;a<this.query_config_field_header.length;a++)if(this.query_config_field_header[a].guid==this.form_header.guid){this.query_config_field_header[a]=JSON.parse(JSON.stringify(this.form_header)),setTimeout(()=>{this.sortByOrder()},100);break}}}else{let a=this.query_config_field_header.length;this.form_header.guid=le().v4().replace(/-/g,""),this.form_header.order=a+1,this.query_config_field_header.push(JSON.parse(JSON.stringify(this.form_header)))}setTimeout(()=>{this.sortByOrder()},100),this.dialogVisibleHeader=!1},handleNodeClick2(a){a.guid!=this.form_header.guid?(this.form_header.parent_guid=a.guid,this.form_header.parent_label=a.label,this.$refs.refParent.blur(),this.$forceUpdate()):C.Message.warning({message:"\u4E0D\u5141\u8BB8\u9009\u62E9\u81EA\u8EAB\u8868\u5934\u4F5C\u4E3A\u4E0A\u7EA7\u8868\u5934",offset:60})},visibleChange(a){a&&this.$refs.selectTree.setCurrentKey(this.form_header.parent_guid)},rebuildData(){let a=[],e=[],t=[];this.$$lib__.each(JSON.parse(JSON.stringify(this.query_config_field)),L=>{L.fixed==this.global_query.position.left.code?e.push(L):L.fixed==this.global_query.position.right.code?t.push(L):a.push(L)});let i=JSON.parse(JSON.stringify(this.query_config_field_header)),o={},n={},d=[],g={},H=[];this.$$lib__.each(a,L=>{L.id=L.field,L.label=L.label+" ("+L.field+")",L.parent_guid=L.header_id,L.type="field"});let G=this.$$lib__.union(a,i);return G=this.$$lib__.sortBy(G,"order"),this.$$lib__.each(G,L=>{L.type!="field"&&(L.id=L.guid,L.type="header",L.parent_guid!=null&&L.parent_guid!=""?(g[L.parent_guid]||(g[L.parent_guid]=[]),g[L.parent_guid].push(L)):H.push(L)),L.parent_guid!=null&&L.parent_guid!=""?(n[L.parent_guid]||(n[L.parent_guid]=[]),n[L.parent_guid].push(L)):d.push(L)}),this.transferFl(H,g,{}),this.field_header_tree_data=JSON.parse(JSON.stringify(H)),this.transferFl(d,n,o),e=this.$$lib__.sortBy(e,"order"),t=this.$$lib__.sortBy(t,"order"),[{id:"root_left",label:"\u56FA\u5B9A\u5C45\u5DE6",fixed:this.global_query.position.left.code,children:e},{id:"root",label:"\u65E0\u56FA\u5B9A\u5217",fixed:this.global_query.position.none.code,children:d},{id:"root_right",label:"\u56FA\u5B9A\u5C45\u53F3",fixed:this.global_query.position.right.code,children:t}]},transferFl(a,e,t){this.$$lib__.each(a,i=>{let o=e[i.guid];o?(i.children=o,t[i.guid]&&this.$$lib__.each(t[i.guid],n=>{i.children.push(n)}),this.transferFl(o,e,t)):t[i.guid]&&(i.children=t[i.guid])})},initRoles(){bt.W.getRolesInfo().then(a=>{a&&a.status==200&&(this.role_tree_data=this.rebuildData2(a.data))})},handleCheck(){let a=this.$refs.role_tree.getCheckedNodes();a=this.$$lib__.filter(a,t=>t.type=="role");let e=this.$$lib__.pluck(a,"id");this.form_field.authorize_roles=e,this.changeFormField()},rebuildData2(a){let e=JSON.parse(JSON.stringify(a.roleList)),t=JSON.parse(JSON.stringify(a.roleGroupList)),i={},o={},n=[];return this.$$lib__.each(e,d=>{i[d.roleGroupId]||(i[d.roleGroupId]=[]),d.id=d.roleId,d.label=d.roleGroup,d.type="role",i[d.roleGroupId].push(d)}),this.$$lib__.each(t,d=>{d.id=d.roleGroupId,d.label=d.roleGroupName,d.type="roleGroup",d.parentId!=null?(o[d.parentId]||(o[d.parentId]=[]),o[d.parentId].push(d)):n.push(d)}),this.transferFl2(n,o,i),n},transferFl2(a,e,t){this.$$lib__.each(a,i=>{let o=e[i.roleGroupId];o?(i.children=o,t[i.roleGroupId]&&this.$$lib__.each(t[i.roleGroupId],n=>{i.children.push(n)}),this.transferFl2(o,e,t)):t[i.roleGroupId]&&(i.children=t[i.roleGroupId])})}},beforeDestroy(){y.Z.$off("busSetCurrentField"),y.Z.$off("busReloadCurrentField")}},Sa=wa,ka=(0,D.Z)(Sa,ha,ga,!1,null,"3ab734e6",null),$a=ka.exports,Ia=function(){var e=this,t=e._self._c;return t("div",{ref:"myDesignCondition",staticClass:"my-design-condition"},[t("el-container",[t("el-aside",{staticStyle:{"border-right":"1px solid #E4E7ED"},attrs:{width:"200px"}},[t("div",{staticClass:"my-design-condition-content queryDataSourceTree",style:{height:e.card_height-10+"px"}},[t("el-tree",{ref:"condition_tree",staticClass:"my_tree",attrs:{data:e.condition_tree_data,"node-key":"id","expand-on-click-node":!1,draggable:"","current-node-key":e.current_node_key,"highlight-current":"","default-expand-all":"","allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{"node-click":e.handleNodeClick,"node-drag-end":e.sortByOrder},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[o.id.indexOf("root")>-1?[t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})])]),t("el-tooltip",{attrs:{"open-delay":1e3,content:i.label,effect:"light",placement:"top"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":"",display:"inline"}},[e._v(" "+e._s(i.label)+" ")])])]:t("el-tooltip",{attrs:{"open-delay":1e3,content:i.label,effect:"light",placement:"top"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":""}},[e._v(" "+e._s(i.label)+" ")])]),t("span",{staticClass:"iconfont-container"},[o.children&&e.datasourceType==e.global.sourceType.jdbc.code?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u67E5\u8BE2\u6761\u4EF6\uFF0C\u4FDD\u5B58\u4E4B\u540E\u624D\u751F\u6548",effect:"light",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.append(o.control_position)}},[t("i",{staticClass:"iconfont bi_add31"})])],1):o.type==e.global_query.condition_type.where.code?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u67E5\u8BE2\u5217",effect:"light",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.remove(o)}},[t("i",{staticClass:"iconfont bi_del3"})])],1):e._e()],1)],2)}}])})],1)]),t("el-main",[t("div",{staticClass:"my-design-condition-content",style:{height:e.card_height-20+"px"}},[t("el-form",{directives:[{name:"show",rawName:"v-show",value:e.form_condition.field&&e.form_condition.field!="",expression:"(form_condition.field&&form_condition.field!='')"}],ref:"form",attrs:{model:e.form_condition,inline:!0,size:"mini"}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u4E3B\u952EID"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form_condition.guid,callback:function(i){e.$set(e.form_condition,"guid",i)},expression:"form_condition.guid"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u6BB5\u540D\u79F0"}},[t("el-input",{attrs:{disabled:!0,placeholder:"\u5B57\u6BB5\u540D\u79F0"},model:{value:e.form_condition.field,callback:function(i){e.$set(e.form_condition,"field",i)},expression:"form_condition.field"}})],1),t("el-form-item",{attrs:{label:"\u6807\u7B7E\u6807\u9898"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u6807\u7B7E\u6807\u9898"},on:{change:e.changeFormCondition},model:{value:e.form_condition.label,callback:function(i){e.$set(e.form_condition,"label",i)},expression:"form_condition.label"}})],1),t("el-form-item",{attrs:{label:"\u663E\u793A\u4F4D\u7F6E"}},[t("el-radio-group",{staticClass:"redio-2",on:{change:e.changeControlPosition},model:{value:e.form_condition.control_position,callback:function(i){e.$set(e.form_condition,"control_position",i)},expression:"form_condition.control_position"}},e._l(e.global_query.control_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u63A7\u4EF6\u7C7B\u578B"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u63A7\u4EF6\u7C7B\u578B","popper-class":"white-bgc"},on:{change:e.changeFormCondition},model:{value:e.form_condition.control_type,callback:function(i){e.$set(e.form_condition,"control_type",i)},expression:"form_condition.control_type"}},e._l(e.control_type_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),e.form_condition.control_type==e.global_query.control_type.select.code||e.form_condition.control_type==e.global_query.control_type.radio.code||e.form_condition.control_type==e.global_query.control_type.checkbox.code||e.form_condition.control_type==e.global_query.control_type.selectTree.code||e.form_condition.control_type==e.global_query.control_type.cascader.code?[t("el-form-item",{attrs:{label:"\u5B57\u6BB5\u679A\u4E3E"}},[t("el-radio-group",{staticClass:"redio-2",on:{change:e.changeFormConditionEnum},model:{value:e.form_condition.control_enum_type,callback:function(i){e.$set(e.form_condition,"control_enum_type",i)},expression:"form_condition.control_enum_type"}},e._l(e.enum_type_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),e.form_condition.control_enum_type==e.global_query.enum_type.field.code?t("el-form-item",{attrs:{label:"\u679A\u4E3E\u5B57\u6BB5"}},[t("select-tree-field-enum",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5B57\u6BB5",clearable:!0},on:{change:e.changeFormConditionEnum,"select-tree-click":e.changeFormConditionEnum},model:{value:e.form_condition.control_enum_name,callback:function(i){e.$set(e.form_condition,"control_enum_name",i)},expression:"form_condition.control_enum_name"}})],1):[t("el-form-item",{attrs:{label:"\u6570\u636E\u96C6"}},[t("select-tree-data-set",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u96C6",clearable:!0},on:{change:e.changeDataSet},model:{value:e.form_condition.data_set,callback:function(i){e.$set(e.form_condition,"data_set",i)},expression:"form_condition.data_set"}})],1),t("el-form-item",{attrs:{label:"\u679A\u4E3E\u503C"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u679A\u4E3E\u503C\u5BF9\u5E94\u5B57\u6BB5","popper-class":"white-bgc"},on:{change:e.changeFormConditionDataSet},model:{value:e.form_condition.data_set.field_value,callback:function(i){e.$set(e.form_condition.data_set,"field_value",i)},expression:"form_condition.data_set.field_value"}},e._l(e.getDataSetFieldList(),function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u679A\u4E3E\u540D\u79F0"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u679A\u4E3E\u540D\u79F0\u5BF9\u5E94\u5B57\u6BB5","popper-class":"white-bgc"},on:{change:e.changeFormConditionDataSet},model:{value:e.form_condition.data_set.field_name,callback:function(i){e.$set(e.form_condition.data_set,"field_name",i)},expression:"form_condition.data_set.field_name"}},e._l(e.getDataSetFieldList(),function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u662F\u5426\u7981\u7528"}},[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u7981\u7528\u5BF9\u5E94\u5B57\u6BB5","popper-class":"white-bgc"},on:{change:e.changeFormConditionDataSet},model:{value:e.form_condition.data_set.field_disabled,callback:function(i){e.$set(e.form_condition.data_set,"field_disabled",i)},expression:"form_condition.data_set.field_disabled"}},e._l(e.getDataSetFieldList(),function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1),t("warning-tooltip",{attrs:{content:"\u5B57\u6BB5\u503C\u4E3A\u771F\u65F6\u7981\u7528\uFF0C\u4E3A\u5047\u65F6\u53EF\u7528\uFF1B1\u548Ctrue\u4E3A\u771F\uFF0C0\u548Cfalse\u4E3A\u5047"}})],1),e.form_condition.control_type==e.global_query.control_type.selectTree.code||e.form_condition.control_type==e.global_query.control_type.cascader.code?[t("el-form-item",{attrs:{label:"\u7236\u7EA7\u679A\u4E3E\u503C"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u679A\u4E3E\u503C\u5BF9\u5E94\u5B57\u6BB5","popper-class":"white-bgc"},on:{change:e.changeFormConditionDataSet},model:{value:e.form_condition.data_set.parent_value,callback:function(i){e.$set(e.form_condition.data_set,"parent_value",i)},expression:"form_condition.data_set.parent_value"}},e._l(e.getDataSetFieldList(),function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u6839\u8282\u70B9\u503C"}},[t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u6839\u8282\u70B9\u503C"},on:{input:e.changeTreeRoot},model:{value:e.form_condition.data_set.tree_root,callback:function(i){e.$set(e.form_condition.data_set,"tree_root",i)},expression:"form_condition.data_set.tree_root"}})],1)]:e._e()]]:e._e(),t("el-form-item",{attrs:{label:"\u8FD0\u7B97\u7B26"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u63A7\u4EF6\u7C7B\u578B","popper-class":"white-bgc"},on:{change:e.changeFormCondition},model:{value:e.form_condition.operator,callback:function(i){e.$set(e.form_condition,"operator",i)},expression:"form_condition.operator"}},e._l(e.operator_type_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1),t("warning-tooltip")],1),t("el-form-item",{attrs:{label:"\u9ED8\u8BA4\u503C\u7C7B\u578B"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C\u7C7B\u578B","popper-class":"white-bgc"},on:{change:e.changeFormCondition},model:{value:e.form_condition.default_value.type,callback:function(i){e.$set(e.form_condition.default_value,"type",i)},expression:"form_condition.default_value.type"}},e._l(e.global_query.default_value_type_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),e.form_condition.default_value.type==e.global_query.default_value_type.fixed_value.code?t("el-form-item",{attrs:{label:"\u56FA\u5B9A\u9ED8\u8BA4\u503C"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u9ED8\u8BA4\u503C\u7684\u56FA\u5B9A\u503C"},on:{change:e.changeFormCondition},model:{value:e.form_condition.default_value.fixed_value.value,callback:function(i){e.$set(e.form_condition.default_value.fixed_value,"value",i)},expression:"form_condition.default_value.fixed_value.value"}})],1):e.form_condition.default_value.type==e.global_query.default_value_type.url.code?t("el-form-item",{attrs:{label:"url\u53C2\u6570key"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u5730\u5740\u680F\u53C2\u6570key"},on:{change:e.changeFormCondition},model:{value:e.form_condition.default_value.url.key,callback:function(i){e.$set(e.form_condition.default_value.url,"key",i)},expression:"form_condition.default_value.url.key"}})],1):e.form_condition.default_value.type==e.global_query.default_value_type.local_storage.code?t("el-form-item",{attrs:{label:"\u672C\u5730\u5B58\u50A8key"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165LocalStorage\u7684key"},on:{change:e.changeFormCondition},model:{value:e.form_condition.default_value.local_storage.key,callback:function(i){e.$set(e.form_condition.default_value.local_storage,"key",i)},expression:"form_condition.default_value.local_storage.key"}})],1):e.form_condition.default_value.type==e.global_query.default_value_type.javascript.code?t("el-form-item",{attrs:{label:"\u81EA\u5B9A\u4E49\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.defaultValue},on:{change:e.changeFormCondition},model:{value:e.form_condition.default_value.javascript,callback:function(i){e.$set(e.form_condition.default_value,"javascript",i)},expression:"form_condition.default_value.javascript"}})],1):e.form_condition.default_value.type==e.global_query.default_value_type.system.code?t("el-form-item",{attrs:{label:"\u7CFB\u7EDF\u5185\u7F6E"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u5185\u7F6E\u53D8\u91CF","popper-class":"white-bgc"},on:{change:e.changeFormCondition},model:{value:e.form_condition.default_value.system.key,callback:function(i){e.$set(e.form_condition.default_value.system,"key",i)},expression:"form_condition.default_value.system.key"}},e._l(e.default_system_type_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1):e._e()],2),t("el-form-item",{attrs:{label:"\u662F\u5426\u9690\u85CF"}},[t("el-switch",{on:{change:e.changeControlPosition},model:{value:e.form_condition.hide,callback:function(i){e.$set(e.form_condition,"hide",i)},expression:"form_condition.hide"}})],1),e.form_condition.hide!=!0?[t("el-form-item",{attrs:{label:"\u672B\u5C3E\u6362\u884C"}},[t("el-switch",{on:{change:e.changeControlPosition},model:{value:e.form_condition.is_br,callback:function(i){e.$set(e.form_condition,"is_br",i)},expression:"form_condition.is_br"}})],1),t("el-form-item",{attrs:{label:"\u503C\u53D8\u5316\u5373\u67E5\u8BE2"}},[t("el-switch",{on:{change:e.changeFormCondition},model:{value:e.form_condition.change_query,callback:function(i){e.$set(e.form_condition,"change_query",i)},expression:"form_condition.change_query"}})],1),t("el-form-item",{attrs:{label:"\u503C\u53D8\u5316\u4E8B\u4EF6"}},[t("query-script",{attrs:{options:e.options.changeValue},on:{change:e.changeFormCondition},model:{value:e.form_condition,callback:function(i){e.form_condition=i},expression:"form_condition"}})],1)]:e._e()],2),e.form_condition.field?t("el-form",{attrs:{size:"mini"}},[t("el-collapse",{on:{change:e.handleChange}},[t("el-collapse-item",{staticClass:"slide-down-up"},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"param"}}),t("span",{staticClass:"title-name"},[e._v(e._s(e.global_query.control_type[e.form_condition.control_type].name+"\u914D\u7F6E"))])]),t("attributes-"+e.form_condition.control_type,{tag:"component",attrs:{attributes:e.form_condition.attributes,operator:e.form_condition.operator},on:{changeAttributes:e.changeAttributes}},[t("attributes-common",{attrs:{attributes:e.form_condition.attributes,control_type:e.form_condition.control_type},on:{changeAttributes:e.changeAttributes}})],1)],1)],1)],1):e._e()],1)])],1),t("el-dialog",{staticClass:"my-dialog",attrs:{title:"\u589E\u52A0\u67E5\u8BE2\u6761\u4EF6",width:"350px","close-on-click-modal":!1,"modal-append-to-body":!1,visible:e.dialogVisible},on:{"update:visible":function(i){e.dialogVisible=i}}},[t("div",{staticStyle:{"max-height":"300px","min-width":"150px","overflow-y":"auto"}},[t("el-tree",{ref:"appendTree",attrs:{data:e.append_tree_data,"expand-on-click-node":!1,"check-on-click-node":"","default-expand-all":"","show-checkbox":""}})],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{margin:"0px 10px 15px 0px"},attrs:{size:"small"},on:{click:e.cancel}},[e._v("\u53D6 \u6D88")]),t("el-button",{staticStyle:{margin:"0px 20px 15px 0px"},attrs:{size:"small",type:"primary"},on:{click:e.confirm}},[e._v("\u786E \u5B9A")])],1)])],1)},Na=[],Da=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{attrs:{model:e.attributes_value,inline:!0,size:"mini"}},[t("div",{staticClass:"form-container input-min"},[t("el-form-item",{attrs:{label:"\u6807\u7B7E\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{"controls-position":"right",step:1,min:0},on:{change:e.changeAttributes},model:{value:e.attributes_value.label_width,callback:function(i){e.$set(e.attributes_value,"label_width",i)},expression:"attributes_value.label_width"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showWidth(),expression:"showWidth()"}],attrs:{label:"\u63A7\u4EF6\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{"controls-position":"right",step:1,min:0},on:{change:e.changeAttributes},model:{value:e.attributes_value.width_control,callback:function(i){e.$set(e.attributes_value,"width_control",i)},expression:"attributes_value.width_control"}})],1),t("el-form-item",{attrs:{label:"\u5C3A\u5BF8\u5927\u5C0F"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u5C3A\u5BF8\u5927\u5C0F","popper-class":"white-bgc"},on:{change:e.changeAttributes},model:{value:e.attributes_value.size,callback:function(i){e.$set(e.attributes_value,"size",i)},expression:"attributes_value.size"}},e._l(e.global_query.size_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showPlaceholder(),expression:"showPlaceholder()"}],attrs:{label:"\u5360\u4F4D\u6587\u672C"}},[t("el-input",{attrs:{placeholder:"\u63D0\u793A\u6587\u5B57"},on:{change:e.changeAttributes},model:{value:e.attributes_value.placeholder,callback:function(i){e.$set(e.attributes_value,"placeholder",i)},expression:"attributes_value.placeholder"}})],1)],1),t("div",{staticClass:"form-container button-min"},[t("el-form-item",{attrs:{label:"\u9690\u85CF\u6807\u7B7E"}},[t("el-switch",{on:{change:e.changeAttributes},model:{value:e.attributes_value.hide_label,callback:function(i){e.$set(e.attributes_value,"hide_label",i)},expression:"attributes_value.hide_label"}})],1),t("el-form-item",{attrs:{label:"\u662F\u5426\u7981\u7528"}},[t("el-switch",{on:{change:e.changeAttributes},model:{value:e.attributes_value.disabled,callback:function(i){e.$set(e.attributes_value,"disabled",i)},expression:"attributes_value.disabled"}})],1)],1)])],1)},Oa=[],Ta=c(8877),Fa={name:"attributes-common",mixins:[P,Ta._],data(){return{not_show_width:"radio,checkbox,switch",not_show_placeholder:"radio,checkbox,switch"}},methods:{showWidth(){return!(this.not_show_width.indexOf(this.control_type)>-1)},showPlaceholder(){return!(this.not_show_placeholder.indexOf(this.control_type)>-1)}}},Ba=Fa,La=(0,D.Z)(Ba,Da,Oa,!1,null,"1a5491f5",null),Pa=La.exports,Qa={name:"design-condition",components:{SelectTreeDataSet:Ie,QueryScript:_.Z,MyMonacoEditor:()=>Promise.resolve().then(c.bind(c,980424)),SelectTreeFieldEnum:mt,AttributesCommon:Pa,WarningTooltip:v.Z,AttributesCascaderXzq:()=>c.e(92427).then(c.bind(c,292427)),AttributesDatePicker:()=>c.e(28748).then(c.bind(c,228748)),AttributesInput:()=>c.e(72568).then(c.bind(c,172568)),AttributesNumber:()=>c.e(6977).then(c.bind(c,806977)),AttributesRadio:()=>c.e(2871).then(c.bind(c,602871)),AttributesCheckbox:()=>c.e(71147).then(c.bind(c,171147)),AttributesSwitch:()=>c.e(86961).then(c.bind(c,386961)),AttributesSelect:()=>c.e(99147).then(c.bind(c,699147)),AttributesSelectTree:()=>c.e(39943).then(c.bind(c,139943)),AttributesCascader:()=>c.e(51068).then(c.bind(c,251068))},mixins:[P],data(){return{dialogVisible:!1,current_node_key:null,query_config_condition:[],form_condition:null,control_type_list:[],options:{defaultValue:{attribute_script_content:"script",title:"\u9ED8\u8BA4\u503C\u8868\u8FBE\u5F0F",api:"api-defaultValue",button_style:{color:"#409EFF"}},changeValue:{attribute_enable:"is_change_value",attribute_script_content:"script_change_value",title:"\u503C\u53D8\u5316\u4E8B\u4EF6",api:"api-condition-change-value"}}}},created(){this.form_condition=JSON.parse(JSON.stringify(this.defaultQueryConfig.condition))},computed:{append_tree_data(){let a=this,e=[];return a.$$lib__.each(a.dateSetConfig.dimensions,t=>{a.$$lib__.find(a.query_config_condition,o=>o.field==t.name)||e.push({id:t.name,label:t.alias&&t.alias!=""?t.alias:t.name})}),[{id:"root",label:"\u5C1A\u672A\u6DFB\u52A0\u7684\u5B57\u6BB5",children:e}]},condition_tree_data(){let a=this,e={header:{id:"root_header",label:"\u5217\u8868\u9876\u90E8",control_position:"header",children:[]},extend:{id:"root_extend",label:"\u66F4\u591A\u7B5B\u9009",control_position:"extend",children:[]},dialog:{id:"root_dialog",label:"\u9AD8\u7EA7\u67E5\u8BE2",control_position:"dialog",children:[]}};return a.query_config_condition=a.$$lib__.sortBy(a.query_config_condition,"order"),a.$$lib__.each(a.query_config_condition,t=>{e[t.control_position].children.push({id:t.field,field:t.field,label:t.label+" ("+t.field+")",hide:t.hide,type:t.type,control_position:t.control_position})}),[e.header,e.extend,e.dialog]},no_operator(){let a=this,e=a.$$lib__.find(a.control_type_list,t=>t.value==a.form_condition.control_type);return e?e.no_operator:""},is_multiple(){let a=this;return a.form_condition&&a.form_condition.attributes&&(a.form_condition.attributes.show_checkbox==!0&&a.form_condition.control_type==a.global_query.control_type.selectTree.code||a.form_condition.attributes.multiple==!0&&(a.form_condition.control_type==a.global_query.control_type.select.code||a.form_condition.control_type==a.global_query.control_type.cascader.code||a.form_condition.control_type==a.global_query.control_type.cascaderXzq.code))?(a.form_condition.operator!=a.global_query.operator_type.equal.code&&a.form_condition.operator!=a.global_query.operator_type.not_equal.code&&(a.form_condition.operator=a.global_query.operator_type.equal.code),!0):!1},operator_type_list(){let a=this,e=a.$$lib__.filter(a.global_query.operator_type_list,t=>a.no_operator.indexOf(t.value)==-1);return a.is_multiple?[{value:a.global_query.operator_type.equal.code,label:a.global_query.operator_type.equal.name},{value:a.global_query.operator_type.not_equal.code,label:a.global_query.operator_type.not_equal.name}]:e},enum_type_list(){return[{value:this.global_query.enum_type.field.code,label:this.global_query.enum_type.field.name},{value:this.global_query.enum_type.data_set.code,label:this.global_query.enum_type.data_set.name}]},default_system_type_list(){let a=[{value:this.global_query.default_system_type.userId.code,label:this.global_query.default_system_type.userId.name},{value:this.global_query.default_system_type.userCode.code,label:this.global_query.default_system_type.userCode.name},{value:this.global_query.default_system_type.userName.code,label:this.global_query.default_system_type.userName.name}];return S.Z.baseConfig.isPlatform==!0&&a.push({value:this.global_query.default_system_type.tenant_id.code,label:this.global_query.default_system_type.tenant_id.name}),a}},watch:{"queryConfig.condition":{deep:!0,handler:function(){this.query_config_condition=JSON.parse(JSON.stringify(this.queryConfig.condition)),this.$$lib__.find(this.query_config_condition,e=>e.field==this.form_condition.field)||(this.form_condition=JSON.parse(JSON.stringify(this.defaultQueryConfig.condition)))}},condition_tree_data:{deep:!0,handler:function(){this.form_condition&&this.form_condition.field&&this.$nextTick(()=>{this.$refs.condition_tree.setCurrentKey(this.form_condition.field)})}}},mounted(){this.getControlTypeList()},methods:{...(0,w.nv)(["updateQueryConfigCondition"]),changeFormCondition(){if(this.query_config_condition&&this.query_config_condition.length>0){for(let a=0;a<this.query_config_condition.length;a++)if(this.query_config_condition[a].field==this.form_condition.field){this.query_config_condition[a]=JSON.parse(JSON.stringify(this.form_condition));break}this.changeQueryConfigCondition()}},handleChange(){let a=this.$refs.myDesignCondition.querySelector(".bi_right");a.style.transform==""||a.style.transform=="rotate(0deg)"?a.style.transform="rotate(-90deg)":a.style.transform="rotate(0deg)"},changeFormConditionEnum(){this.changeFormCondition(),y.Z.$emit("busGetFieldEnumJson")},changeFormConditionDataSet(){this.changeFormCondition(),y.Z.$emit("busGetDataSetJson")},changeDataSet(){let a={};this.$$lib__.each(this.getDataSetFieldList(),e=>{e.value==this.form_condition.data_set.field_value?a.field_value=!0:e.value==this.form_condition.data_set.field_name?a.field_name=!0:e.value==this.form_condition.data_set.parent_value&&(a.parent_value=!0)}),a.field_value!=!0&&(this.form_condition.data_set.field_value=null),a.field_name!==!0&&(this.form_condition.data_set.field_name=null),a.parent_value!=!0&&(this.form_condition.data_set.parent_value=null),this.changeFormConditionDataSet()},getDataSetFieldList(){let a=[];return this.form_condition.data_set&&this.$$lib__.each(this.form_condition.data_set.dimensionsAlias,e=>{a.push({value:e.name,label:e.alias&&e.alias!=""?e.alias:e.name})}),a},changeAttributes(a){m.default.set(this.form_condition,"attributes",a),this.changeFormCondition()},changeTreeRoot(a){this.form_condition.data_set.tree_root=a,this.$forceUpdate(),this.changeFormCondition()},changeControlPosition(){this.changeFormCondition(),this.sortByOrder()},changeQueryConfigCondition(){this.updateQueryConfigCondition(this.query_config_condition)},getControlTypeList(){this.control_type_list=[{value:this.global_query.control_type.input.code,label:this.global_query.control_type.input.name,no_operator:"between,out_between"},{value:this.global_query.control_type.number.code,label:this.global_query.control_type.number.name,no_operator:"between,out_between"},{value:this.global_query.control_type.radio.code,label:this.global_query.control_type.radio.name,no_operator:"between,out_between"},{value:this.global_query.control_type.checkbox.code,label:this.global_query.control_type.checkbox.name,no_operator:"between,out_between,like,like_left,like_right,gt,gte,lt,lte"},{value:this.global_query.control_type.switch.code,label:this.global_query.control_type.switch.name,no_operator:"between,out_between"},{value:this.global_query.control_type.datePicker.code,label:this.global_query.control_type.datePicker.name,no_operator:"like,like_left,like_right"},{value:this.global_query.control_type.select.code,label:this.global_query.control_type.select.name,no_operator:"between,out_between"},{value:this.global_query.control_type.selectTree.code,label:this.global_query.control_type.selectTree.name,no_operator:"between,out_between"},{value:this.global_query.control_type.cascader.code,label:this.global_query.control_type.cascader.name,no_operator:"between,out_between"},{value:this.global_query.control_type.cascaderXzq.code,label:this.global_query.control_type.cascaderXzq.name,no_operator:"gt,gte,lt,lte,between,out_between"}]},append(a){this.dialogVisible=!0,this.append_control_position=a},remove(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664[ "+a.label+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{if(this.query_config_condition&&this.query_config_condition.length>0){for(let e=0;e<this.query_config_condition.length;e++)if(this.query_config_condition[e].field==a.id){this.query_config_condition.splice(e,1),this.form_condition={},this.changeQueryConfigCondition();break}}}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},handleNodeClick(a){let e=this.$$lib__.find(this.query_config_condition,t=>t.field==a.id);e&&(this.form_condition=JSON.parse(JSON.stringify(e)),this.current_node_key=e.field)},confirm(){let a=this.$refs.appendTree.getCheckedNodes(!0);if(a){let e=a.length;if(e==0||e==1&&a[0].id=="root"){this.dialogVisible=!1;return}let t=JSON.parse(JSON.stringify(this.defaultQueryConfig.condition)),i=!0;this.$$lib__.each(a,o=>{this.$$lib__.find(this.query_config_condition,d=>d.field==o.id)||(t.guid=le().v4().replace(/-/g,""),t.field=o.id,t.label=o.label,t.control_position=this.append_control_position,this.query_config_condition.push(JSON.parse(JSON.stringify(t))),i&&(this.current_node_key=t.field,this.form_condition=JSON.parse(JSON.stringify(t)),i=!1))}),this.sortByOrder()}this.dialogVisible=!1},cancel(){this.dialogVisible=!1},typeName(a){if(!a||a=="")return null;if(this.global_query.condition_type[a])return this.global_query.condition_type[a].name},sortByOrder(a,e,t){t=="inner"?e.data.control_position!=a.data.control_position&&this.$$lib__.each(this.query_config_condition,g=>{g.field==a.data.id&&(g.control_position=e.data.control_position),this.form_condition&&this.form_condition.field&&this.form_condition.field==a.data.id&&this.form_condition.field==g.field&&(this.form_condition.control_position=e.data.control_position)}):(t=="before"||t=="after")&&e.parent&&e.parent.data.control_position!=a.data.control_position&&this.$$lib__.each(this.query_config_condition,g=>{g.field==a.data.id&&(g.control_position=e.parent.data.control_position),this.form_condition&&this.form_condition.field&&this.form_condition.field==a.data.id&&this.form_condition.field==g.field&&(this.form_condition.control_position=e.parent.data.control_position)});let i=this.$refs.condition_tree.getNode("root_dialog"),o=this.$refs.condition_tree.getNode("root_header"),n=i.childNodes.length,d=o.childNodes.length;if(n>0)for(let g=0;g<n;g++)this.$$lib__.each(this.query_config_condition,H=>{H.field==i.childNodes[g].data.id&&(H.order=g+1,this.form_condition&&this.form_condition.field&&this.form_condition.field==H.field&&(this.form_condition.order=g+1))});if(d>0)for(let g=n;g<n+d;g++)this.$$lib__.each(this.query_config_condition,H=>{H.field==o.childNodes[g-n].data.id&&(H.order=g+1,this.form_condition&&this.form_condition.field&&this.form_condition.field==H.field&&(this.form_condition.order=g+1))});e&&this.form_condition.field==e.data.field&&(this.form_condition.control_position=e.data.control_position),this.changeFormCondition()},allowDrop(a,e,t){return e.data.id.indexOf("root")>-1?t=="inner":a.data.id.indexOf("root")==-1?t!=="inner":!0},allowDrag(a){return a.data.id.indexOf("root")==-1}}},za=Qa,Ea=(0,D.Z)(za,Ia,Na,!1,null,"a16ed422",null),Ja=Ea.exports,Aa=function(){var e=this,t=e._self._c;return t("div",{ref:"myDesignButton",staticClass:"my-design-button my-design-condition"},[t("el-container",[t("el-aside",{staticStyle:{"border-right":"1px solid #e4e7ed"},attrs:{width:"200px"}},[t("div",{staticClass:"my-design-button-content queryDataSourceTree",style:{height:e.card_height-13+"px"}},[t("el-tree",{ref:"button_tree",staticClass:"my_tree",attrs:{"allow-drag":e.allowDrag,"allow-drop":e.allowDrop,"current-node-key":e.current_node_key,data:e.button_tree_data,"expand-on-click-node":!1,"default-expand-all":"",draggable:"","highlight-current":"","node-key":"id"},on:{"node-click":e.handleNodeClick,"node-drag-end":e.nodeDragEnd},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[o.id.indexOf("root")>-1||o.id.indexOf("align")>-1?[t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})])]),t("el-tooltip",{attrs:{content:i.label,"open-delay":1e3,effect:"light",placement:"left"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":"",display:"inline"}},[e._v(" "+e._s(i.label)+" ")])])]:o.isDropdown?[t("span",[t("i",{staticClass:"el-icon-s-operation",staticStyle:{color:"#409eff"}})]),t("el-tooltip",{attrs:{content:i.label,"open-delay":1e3,effect:"light",placement:"left"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":"",verticalAlign:"middle"}},[e._v(" "+e._s(i.label)+" ")])])]:t("el-tooltip",{attrs:{content:i.label,"open-delay":1e3,effect:"light",placement:"left"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":""}},[e._v(" "+e._s(i.label)+" ")])]),t("span",{staticStyle:{position:"absolute",right:"0px",padding:"0px 10px"}},[o.id.indexOf("root")>-1&&o.button_position==e.global_query.button_position.header.code?t("span",{staticClass:"custom-tree-node-btn"},[t("el-dropdown",{attrs:{placement:"right-start"},on:{command:function(n){return e.handleCommandItem(n,o.button_position)}}},[t("span",{staticClass:"iconfont bi_gengduo seticon",staticStyle:{width:"101%"},style:{color:e.theme.icon_color}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"a"}},[t("i",{staticClass:"iconfont bi_add31"}),e._v("\u6DFB\u52A0\u7CFB\u7EDF\u6309\u94AE ")]),t("el-dropdown-item",{attrs:{command:"b"}},[t("i",{staticClass:"iconfont bi_add31"}),e._v("\u6DFB\u52A0\u81EA\u5B9A\u4E49\u6309\u94AE ")])],1)],1)],1):o.id.indexOf("root")>-1?t("span",[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u81EA\u5B9A\u4E49\u6309\u94AE",effect:"light",placement:"left"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>e.append(o.button_position)}},[t("i",{staticClass:"iconfont bi_add31"})])],1)],1):o.id.indexOf("align")==-1?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u6309\u94AE",effect:"light",placement:"left"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>e.remove(o)}},[t("i",{staticClass:"iconfont bi_del3"})])],1):e._e()],1)],2)}}])})],1)]),t("el-main",[t("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.form_button.guid&&e.form_button.guid!="",expression:"form_button.guid && form_button.guid != ''"}],attrs:{stretch:""}},[t("el-tab-pane",{attrs:{label:"\u57FA\u672C\u914D\u7F6E"}},[t("div",{staticClass:"my-design-button-content",style:{height:e.card_height-43+"px"}},[t("el-form",{ref:"form",staticStyle:{margin:"10px"},attrs:{inline:!0,model:e.form_button,size:"mini"}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u4E3B\u952EID"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form_button.guid,callback:function(i){e.$set(e.form_button,"guid",i)},expression:"form_button.guid"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u540D\u79F0"}},[t("el-input",{attrs:{disabled:e.form_button.isSys},on:{change:e.changeFormButton},model:{value:e.form_button.name,callback:function(i){e.$set(e.form_button,"name",i)},expression:"form_button.name"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u6587\u672C"}},[t("el-input",{on:{change:e.changeFormButton},model:{value:e.form_button.label,callback:function(i){e.$set(e.form_button,"label",i)},expression:"form_button.label"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_button.isSys!=!0,expression:"form_button.isSys != true"}],attrs:{label:"\u663E\u793A\u4F4D\u7F6E"}},[t("el-radio-group",{staticClass:"redio-2",on:{change:e.changeControlPosition},model:{value:e.form_button.button_position,callback:function(i){e.$set(e.form_button,"button_position",i)},expression:"form_button.button_position"}},e._l(e.global_query.button_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),e.isDropdownButton(e.form_button.parent)?e._e():[e.form_button.guid==e.global_query.button_system.query_super.guid?t("el-form-item",{attrs:{label:"\u5BF9\u8BDD\u6846\u5BBD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeFormButton},model:{value:e.form_button.dialog_width,callback:function(i){e.$set(e.form_button,"dialog_width",i)},expression:"form_button.dialog_width"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u6309\u94AE\u5C3A\u5BF8"}},[t("el-radio-group",{staticClass:"redio-4",on:{change:e.changeFormButton},model:{value:e.form_button.size,callback:function(i){e.$set(e.form_button,"size",i)},expression:"form_button.size"}},e._l(e.global_query.size_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u6837\u5F0F"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u6837\u5F0F","popper-class":"white-bgc"},on:{change:e.changeFormButton},model:{value:e.form_button.style,callback:function(i){e.$set(e.form_button,"style",i)},expression:"form_button.style"}},e._l(e.style_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u5DE6\u95F4\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeFormButton},model:{value:e.form_button.marginLeft,callback:function(i){e.$set(e.form_button,"marginLeft",i)},expression:"form_button.marginLeft"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeFormButton},model:{value:e.form_button.width,callback:function(i){e.$set(e.form_button,"width",i)},expression:"form_button.width"}})],1)],t("el-form-item",{attrs:{label:"\u989C\u8272\u4E3B\u9898"}},[t("el-select",{attrs:{placeholder:"\u81EA\u5B9A\u4E49"},on:{change:e.changeFormButton},model:{value:e.form_button.colorType,callback:function(i){e.$set(e.form_button,"colorType",i)},expression:"form_button.colorType"}},[t("el-option",{key:"custom",attrs:{label:"\u81EA\u5B9A\u4E49",value:"custom"}}),e._l(e.global_query.tag_status_type_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})})],2)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form_button.colorType||e.form_button.colorType=="custom",expression:"!form_button.colorType || form_button.colorType == 'custom'"}],attrs:{label:"\u6309\u94AE\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6309\u94AE\u989C\u8272"},on:{change:e.changeFormButton},model:{value:e.form_button.backgroundColor,callback:function(i){e.$set(e.form_button,"backgroundColor",i)},expression:"form_button.backgroundColor"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeFormButton},model:{value:e.form_button.backgroundColor,callback:function(i){e.$set(e.form_button,"backgroundColor",i)},expression:"form_button.backgroundColor"}})],1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form_button.colorType||e.form_button.colorType=="custom",expression:"!form_button.colorType || form_button.colorType == 'custom'"}],attrs:{label:"\u6587\u672C\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6309\u94AE\u6587\u672C\u989C\u8272"},on:{change:e.changeFormButton},model:{value:e.form_button.color,callback:function(i){e.$set(e.form_button,"color",i)},expression:"form_button.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeFormButton},model:{value:e.form_button.color,callback:function(i){e.$set(e.form_button,"color",i)},expression:"form_button.color"}})],1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isDropdownButton(e.form_button.parent),expression:"isDropdownButton(form_button.parent)"}],attrs:{label:"\u663E\u793A\u5206\u5272\u7EBF"}},[t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.divided,callback:function(i){e.$set(e.form_button,"divided",i)},expression:"form_button.divided"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_button.button_position==e.global_query.button_position.header.code&&!e.isDropdownButton(e.form_button.parent),expression:`
                                        form_button.button_position == global_query.button_position.header.code &&
                                        !isDropdownButton(form_button.parent)
                                    `}],attrs:{label:"\u6309\u94AE\u9760\u9F50"}},[t("el-radio-group",{on:{change:e.changeFormButton},model:{value:e.form_button.align,callback:function(i){e.$set(e.form_button,"align",i)},expression:"form_button.align"}},e._l(e.button_align_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_button.guid==e.global_query.button_system.empty.guid,expression:"form_button.guid == global_query.button_system.empty.guid"}],attrs:{label:"\u6E05\u7A7A\u5185\u5BB9"}},[t("el-radio-group",{on:{change:e.changeFormButton},model:{value:e.form_button.empty_content,callback:function(i){e.$set(e.form_button,"empty_content",i)},expression:"form_button.empty_content"}},e._l(e.global_query.empty_content_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_button.guid==e.global_query.button_system.refresh.guid,expression:"form_button.guid == global_query.button_system.refresh.guid"}],attrs:{label:"\u4FDD\u7559\u5185\u5BB9"}},[t("el-radio-group",{on:{change:e.changeFormButton},model:{value:e.form_button.keep_content,callback:function(i){e.$set(e.form_button,"keep_content",i)},expression:"form_button.keep_content"}},e._l(e.global_query.empty_content_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u56FE\u6807"}},[t("el-icon",{attrs:{icon:e.form_button.icon},on:{"on-icon-change":e.onIconChange}})],1),e.form_button.icon&&e.form_button.icon!=""?[t("el-form-item",{attrs:{label:"\u56FE\u6807\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeFormButton},model:{value:e.form_button.icon_align,callback:function(i){e.$set(e.form_button,"icon_align",i)},expression:"form_button.icon_align"}},e._l(e.global_query.button_align_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u56FE\u6807\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6309\u94AE\u989C\u8272"},on:{change:e.changeFormButton},model:{value:e.form_button.icon_color,callback:function(i){e.$set(e.form_button,"icon_color",i)},expression:"form_button.icon_color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeFormButton},model:{value:e.form_button.icon_color,callback:function(i){e.$set(e.form_button,"icon_color",i)},expression:"form_button.icon_color"}})],1)],1)],1)]:e._e(),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_button.isSys!=!0,expression:"form_button.isSys != true"}],attrs:{label:"\u7ED1\u5B9A\u5F39\u7A97"}},[t("el-select",{staticClass:"white-bgc",attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u6253\u5F00\u7684\u5F39\u7A97","popper-class":"white-bgc"},on:{change:e.changeFormButton},model:{value:e.form_button.dialog_id,callback:function(i){e.$set(e.form_button,"dialog_id",i)},expression:"form_button.dialog_id"}},e._l(e.dialog_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_button.isDropdown||e.form_button.guid==e.global_query.button_system.customer_fields.guid||e.form_button.guid==e.global_query.button_system.customer_query.guid||e.form_button.guid==e.global_query.button_system.customer_conditions.guid||(e.form_button.guid==e.global_query.button_system.exportExcelCurrent.guid||e.form_button.guid==e.global_query.button_system.exportExcelAll.guid)&&e.form_button.export_excel_customer_fields,expression:`
                                        form_button.isDropdown ||
                                        form_button.guid == global_query.button_system.customer_fields.guid ||
                                        form_button.guid == global_query.button_system.customer_query.guid ||
                                        form_button.guid == global_query.button_system.customer_conditions.guid ||
                                        ((form_button.guid == global_query.button_system.exportExcelCurrent.guid ||
                                            form_button.guid == global_query.button_system.exportExcelAll.guid) &&
                                            form_button.export_excel_customer_fields)
                                    `}],attrs:{label:"\u89E6\u53D1\u4E0B\u62C9"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u89E6\u53D1\u4E0B\u62C9","popper-class":"white-bgc"},on:{change:e.changeFormButton},model:{value:e.form_button.trigger,callback:function(i){e.$set(e.form_button,"trigger",i)},expression:"form_button.trigger"}},e._l(e.trigger_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1),t("warning-tooltip",{attrs:{content:"\u4FDD\u5B58\u540E\u5237\u65B0\u751F\u6548"}})],1),e.form_button.isDropdown==!0?[t("el-form-item",{attrs:{label:"\u83DC\u5355\u5F39\u51FA\u4F4D\u7F6E"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u83DC\u5355\u5F39\u51FA\u4F4D\u7F6E","popper-class":"white-bgc"},on:{change:e.changeFormButton},model:{value:e.form_button.placement,callback:function(i){e.$set(e.form_button,"placement",i)},expression:"form_button.placement"}},e._l(e.global_query.placement_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u70B9\u51FB\u9009\u4E2D\u540E\u6536\u8D77"}},[t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.hide_on_click,callback:function(i){e.$set(e.form_button,"hide_on_click",i)},expression:"form_button.hide_on_click"}})],1)]:e._e()],2),t("div",{staticClass:"form-container button"},[e.form_button.guid==e.global_query.button_system.exportExcelCurrent.guid||e.form_button.guid==e.global_query.button_system.exportExcelAll.guid?[t("el-form-item",{attrs:{label:"\u81EA\u5B9A\u4E49\u5BFC\u51FA\u5217"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u81EA\u5B9A\u4E49\u5BFC\u51FA\u7684\u7ED3\u679C\u5217",effect:"dark",placement:"left"}},[t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.export_excel_customer_fields,callback:function(i){e.$set(e.form_button,"export_excel_customer_fields",i)},expression:"form_button.export_excel_customer_fields"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_button.export_excel_customer_fields!=!0,expression:"form_button.export_excel_customer_fields != true"}],attrs:{label:"\u5BFC\u51FA\u5168\u90E8\u5217"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u9ED8\u8BA4\u5BFC\u51FA\u5F53\u524D\u53EF\u89C1\u5217\uFF0C\u5F00\u542F\u540E\u5BFC\u51FA\u5168\u90E8\u7ED3\u679C\u5217(\u9690\u85CF\u5217\u9664\u5916)",effect:"dark",placement:"left"}},[t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.export_excel_all_fields,callback:function(i){e.$set(e.form_button,"export_excel_all_fields",i)},expression:"form_button.export_excel_all_fields"}})],1)],1),t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u5B9A\u4E49\u6587\u4EF6\u540D"}},[t("query-script",{attrs:{options:e.getOptionsDefineFileName(e.form_button)},on:{change:e.changeFormButton},model:{value:e.form_button,callback:function(i){e.form_button=i},expression:"form_button"}})],1)]:e._e(),t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u6309\u94AE\u6837\u5F0F\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.script_button_style},on:{change:e.changeFormButton},model:{value:e.form_button,callback:function(i){e.form_button=i},expression:"form_button"}})],1),t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u70B9\u51FB\u4E8B\u4EF6\u811A\u672C"}},[t("query-script",{attrs:{options:e.getOptions(e.form_button)},on:{change:e.changeFormButton},model:{value:e.form_button,callback:function(i){e.form_button=i},expression:"form_button"}})],1),e.form_button.isSys!=!0&&!e.isDropdownButton(e.form_button.parent)?t("el-form-item",{attrs:{label:"\u4E0B\u62C9\u83DC\u5355"}},[t("el-switch",{on:{change:e.changeControlIsDropdown},model:{value:e.form_button.isDropdown,callback:function(i){e.$set(e.form_button,"isDropdown",i)},expression:"form_button.isDropdown"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u662F\u5426\u9690\u85CF"}},[t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.hide,callback:function(i){e.$set(e.form_button,"hide",i)},expression:"form_button.hide"}})],1),t("el-form-item",{attrs:{label:"\u662F\u5426\u7981\u7528"}},[t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.disabled,callback:function(i){e.$set(e.form_button,"disabled",i)},expression:"form_button.disabled"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form_button.guid==e.global_query.button_system.empty.guid,expression:"form_button.guid == global_query.button_system.empty.guid"}],attrs:{label:"\u6E05\u7A7A\u5373\u67E5\u8BE2"}},[t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.empty_query,callback:function(i){e.$set(e.form_button,"empty_query",i)},expression:"form_button.empty_query"}})],1)],2),t("el-collapse",{on:{change:e.handleChange}},[t("el-collapse-item",{staticClass:"slide-down-up"},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"param"}}),t("span",{staticClass:"title-name"},[e._v("\u6587\u5B57\u63D0\u793A")])]),t("el-form-item",{attrs:{label:"\u662F\u5426\u542F\u7528"}},[t("el-switch",{on:{change:e.changeTooltipEnable},model:{value:e.form_button.tooltip.enable,callback:function(i){e.$set(e.form_button.tooltip,"enable",i)},expression:"form_button.tooltip.enable"}})],1),e.form_button.tooltip.enable==!0?[e.form_button.tooltip.is_tooltip_content!=!0?t("el-form-item",{attrs:{label:"\u63D0\u793A\u6587\u672C"}},[t("el-input",{attrs:{rows:3,placeholder:"\u5185\u5BB9\u6587\u672C\u652F\u6301html\u5185\u5BB9",type:"textarea"},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.content,callback:function(i){e.$set(e.form_button.tooltip,"content",i)},expression:"form_button.tooltip.content"}})],1):e._e(),t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u5185\u5BB9\u811A\u672C"}},[t("query-script",{attrs:{options:e.getOptionsTooltip(e.form_button)},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip,callback:function(i){e.$set(e.form_button,"tooltip",i)},expression:"form_button.tooltip"}})],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u5B57\u53F7"}},[t("el-input-number",{attrs:{max:100,min:8,step:.5,"controls-position":"right",placeholder:"\u5B57\u53F7\u5927\u5C0F"},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.fontSize,callback:function(i){e.$set(e.form_button.tooltip,"fontSize",i)},expression:"form_button.tooltip.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u5B57\u4F53"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5185\u5BB9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.fontFamily,callback:function(i){e.$set(e.form_button.tooltip,"fontFamily",i)},expression:"form_button.tooltip.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u63D0\u793A\u6587\u5B57\u6587\u672C\u989C\u8272"},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.color,callback:function(i){e.$set(e.form_button.tooltip,"color",i)},expression:"form_button.tooltip.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.color,callback:function(i){e.$set(e.form_button.tooltip,"color",i)},expression:"form_button.tooltip.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u9ED8\u8BA4\u4E3B\u9898"}},[t("el-radio-group",{on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.effect,callback:function(i){e.$set(e.form_button.tooltip,"effect",i)},expression:"form_button.tooltip.effect"}},e._l(e.global_query.tooltip_effect_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u51FA\u73B0\u4F4D\u7F6E"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u4FDD\u5B58\u540E\u5237\u65B0\u6709\u6548",effect:"light"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u51FA\u73B0\u4F4D\u7F6E","popper-class":"white-bgc"},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.placement,callback:function(i){e.$set(e.form_button.tooltip,"placement",i)},expression:"form_button.tooltip.placement"}},e._l(e.global_query.tooltip_placement_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1)],1),t("el-form-item",{attrs:{label:"\u6E10\u53D8\u52A8\u753B"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u6E10\u53D8\u52A8\u753B","popper-class":"white-bgc"},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.transition,callback:function(i){e.$set(e.form_button.tooltip,"transition",i)},expression:"form_button.tooltip.transition"}},e._l(e.global_query.transition_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u4F4D\u7F6E\u504F\u79FB"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u51FA\u73B0\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF",effect:"light"}},[t("el-input-number",{attrs:{step:1,"controls-position":"right"},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.offset,callback:function(i){e.$set(e.form_button.tooltip,"offset",i)},expression:"form_button.tooltip.offset"}})],1)],1),t("el-form-item",{attrs:{label:"\u5EF6\u8FDF\u51FA\u73B0"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5EF6\u8FDF\u51FA\u73B0\uFF0C\u5355\u4F4D\u6BEB\u79D2",effect:"light"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right"},on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.open_delay,callback:function(i){e.$set(e.form_button.tooltip,"open_delay",i)},expression:"form_button.tooltip.open_delay"}})],1)],1),t("el-form-item",{attrs:{label:"\u9F20\u6807\u8FDB\u5165"}},[t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.tooltip.enterable,callback:function(i){e.$set(e.form_button.tooltip,"enterable",i)},expression:"form_button.tooltip.enterable"}})],1)]:e._e()],2)],1)],1)],1)]),t("el-tab-pane",{attrs:{label:"\u6743\u9650\u914D\u7F6E"}},[t("div",{staticClass:"content top-bannner"},[t("div",{staticClass:"my-top-info"},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5DE6\u4FA7\u9009\u4E2D\u7684\u6309\u94AE",effect:"light",placement:"top"}},[t("label",{staticStyle:{"font-weight":"bolder",color:"#616266"}},[e._v("\u5F53\u524D\u6309\u94AE\uFF1A"+e._s(e.form_button.name))])])],1),t("div",{staticClass:"my-top-cont"},[t("el-tooltip",{attrs:{content:"\u52FE\u9009\u7684\u89D2\u8272\u624D\u663E\u793A\u5F53\u524D\u5217\uFF0C\u53D1\u5E03\u6210\u516C\u5F00\u7248\u672C\u6743\u9650\u4E0D\u751F\u6548"}},[t("i",{staticClass:"el-icon-info"})]),e._v(" \u542F\u7528\u6743\u9650 "),t("el-switch",{on:{change:e.changeFormButton},model:{value:e.form_button.is_authorize,callback:function(i){e.$set(e.form_button,"is_authorize",i)},expression:"form_button.is_authorize"}})],1)]),t("div",{staticClass:"my-bottom-info",style:{height:e.card_height-94+"px",width:"100%"}},[t("el-tree",{directives:[{name:"show",rawName:"v-show",value:e.form_button.is_authorize,expression:"form_button.is_authorize"}],ref:"role_tree",attrs:{data:e.role_tree_data,"expand-on-click-node":!1,"default-expand-all":"","highlight-current":"","node-key":"id","show-checkbox":""},on:{check:e.handleCheck},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[o.type=="roleGroup"?t("el-tooltip",{attrs:{content:"\u89D2\u8272\u7EC4 [ "+i.label+" ]","open-delay":1e3,effect:"light",placement:"right"}},[t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})]),e._v(" "+e._s(i.label)+" ")])]):e._e(),o.type=="role"?t("el-tooltip",{attrs:{content:"\u89D2\u8272 [ "+i.label+" ]","open-delay":1e3,effect:"light",placement:"right"}},[t("span",[e._v(" "+e._s(i.label)+" ")])]):e._e()],1)}}])})],1)])],1)],1)],1),t("el-dialog",{staticClass:"my-dialog",attrs:{"close-on-click-modal":!1,"modal-append-to-body":!1,visible:e.dialogVisible,title:"\u6DFB\u52A0\u7CFB\u7EDF\u6309\u94AE",width:"350px"},on:{"update:visible":function(i){e.dialogVisible=i}}},[t("div",{staticStyle:{"max-height":"300px","min-width":"150px","overflow-y":"auto"}},[t("el-tree",{ref:"appendTree",attrs:{data:e.append_system_button_data,"expand-on-click-node":!1,"check-on-click-node":"","default-expand-all":"","show-checkbox":""}})],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{margin:"0px 10px 15px 0px"},attrs:{size:"small"},on:{click:e.cancel}},[e._v("\u53D6 \u6D88")]),t("el-button",{staticStyle:{margin:"0px 20px 15px 0px"},attrs:{size:"small",type:"primary"},on:{click:e.confirm}},[e._v("\u786E \u5B9A")])],1)])],1)},Ra=[],Ma={name:"design-button",mixins:[P],components:{FontSelect:ye,QueryScript:_.Z,WarningTooltip:v.Z,ElIcon:lt.Z},data(){return{form_button:{},current_node_key:null,query_config_button:[],style_list:[{value:"default",label:"\u9ED8\u8BA4"},{value:"text",label:"\u6587\u672C"},{value:"plain",label:"\u6734\u7D20\u6309\u94AE"},{value:"round",label:"\u5706\u89D2\u6309\u94AE"},{value:"circle",label:"\u5706\u5F62\u6309\u94AE"}],trigger_list:[{value:"hover",label:"\u60AC\u505C"},{value:"click",label:"\u70B9\u51FB"}],dialogVisible:!1,role_tree_data:[],options:{script_button_style:{attribute_enable:"is_button_style",attribute_enable_tooltip:"\u6837\u5F0F\u811A\u672C\u7684\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4E14\u811A\u672C\u4E2D\u7684style\u53D8\u91CF\uFF0C\u5DF2\u7EE7\u627F\u524D\u9762\u7684\u6837\u5F0F",attribute_script_content:"script_button_style",title:"\u6309\u94AE\u6837\u5F0F",api:"api-button-style"}},default_tooltip:{enable:!0,effect:"light",placement:"top",transition:"el-fade-in-linear",enterable:!0,hide_after:0}}},created(){this.form_button=JSON.parse(JSON.stringify(this.defaultQueryConfig.button))},computed:{button_align_list(){return[{value:this.global_query.position.left.code,label:this.global_query.position.left.name},{value:"center",label:"\u968F\u67E5\u8BE2\u6761\u4EF6"},{value:this.global_query.position.right.code,label:this.global_query.position.right.name}]},append_system_button_data(){let a=this,e=[];for(let t in a.global_query.button_system){let i=JSON.parse(JSON.stringify(a.global_query.button_system[t]));a.$$lib__.find(a.query_config_button,n=>n.guid==i.guid)||e.push({id:i.guid,label:i.label+"("+i.name+")",button_type:t})}return[{id:"root",label:"\u5C1A\u672A\u6DFB\u52A0\u7684\u7CFB\u7EDF\u6309\u94AE",children:e}]},button_tree_data(){let a=this,e={row:{id:"root_row",label:"\u5217\u8868\u884C\u5185",button_position:"row",children:[]},header:{id:"root_header",label:"\u5217\u8868\u9876\u90E8",button_position:"header",children:[]}},t={left:[],center:[],right:[],dropdown:[]},i={button:[],dropdown:[]},o={header:{},row:{}};return a.$$lib__.each(a.$$lib__.sortBy(a.query_config_button,"order"),n=>{let d={id:n.guid,label:n.name+(n.label&&n.label!=""?" ("+n.label+")":""),isSys:n.isSys,order:n.order,hide:n.hide,isDropdown:n.isDropdown,parent:n.parent,align:n.align,button_position:n.button_position};d.button_position==this.global_query.button_position.row.code?d.isDropdown?i.dropdown.push(d):this.isDropdownButton(d.parent)?(o.row[d.parent]||m.default.set(o.row,d.parent,[]),o.row[d.parent].push(d)):i.button.push(d):d.button_position==this.global_query.button_position.header.code&&(d.isDropdown?t.dropdown.push(d):this.isDropdownButton(d.parent)?(o.header[d.parent]||m.default.set(o.header,d.parent,[]),o.header[d.parent].push(d)):t[d.align].push(d))}),a.$$lib__.each(i.dropdown,n=>{for(let d in o.row)n.id==d&&(n.children=o.row[d]);i.button.push(n)}),e.row.children=a.$$lib__.sortBy(i.button,"order"),a.$$lib__.each(t.dropdown,n=>{for(let d in o.header)n.id==d&&(n.children=o.header[d]);t[n.align].push(n)}),e.header.children.push({id:"align_left",label:"\u9760\u5DE6",button_position:"header",align:"left",children:a.$$lib__.sortBy(t.left,"order")}),e.header.children.push({id:"align_center",label:"\u8DDF\u968F\u67E5\u8BE2\u6761\u4EF6",button_position:"header",align:"center",children:a.$$lib__.sortBy(t.center,"order")}),e.header.children.push({id:"align_right",label:"\u9760\u53F3",button_position:"header",align:"right",children:a.$$lib__.sortBy(t.right,"order")}),[e.header,e.row]},dialog_list(){let a=this,e=[];return a.$$lib__.each(a.queryConfig.dialog,t=>{e.push({value:t.guid,label:t.name})}),e}},watch:{"queryConfig.button":{deep:!0,handler:function(){this.query_config_button=JSON.parse(JSON.stringify(this.queryConfig.button))}},button_tree_data:{deep:!0,handler:function(){this.form_button&&this.form_button.guid&&this.$nextTick(()=>{this.$refs.button_tree.setCurrentKey(this.form_button.guid)})}}},mounted(){this.initRoles()},methods:{...(0,w.nv)(["updateQueryConfigButton"]),handleCommandItem(a,e){a=="a"?this.appendSystem():a=="b"&&this.append(e)},changeFormButton(){if(this.query_config_button&&this.query_config_button.length>0){for(let a=0;a<this.query_config_button.length;a++)if(this.query_config_button[a].guid==this.form_button.guid){this.query_config_button[a]=JSON.parse(JSON.stringify(this.form_button)),this.changeQueryConfigButton();break}}},changeControlPosition(){this.form_button.parent=null,this.$$lib__.each(this.query_config_button,a=>{a.parent==this.form_button.guid&&(a.isSys==!0?a.parent=null:a.button_position=this.form_button.button_position)}),this.changeFormButton(),this.sortByOrder()},changeControlIsDropdown(){this.form_button.isDropdown==!1&&this.$$lib__.each(this.query_config_button,a=>{a.parent==this.form_button.guid&&(a.parent=null)}),this.changeFormButton(),this.sortByOrder()},changeQueryConfigButton(){this.updateQueryConfigButton(this.query_config_button)},changeTooltipEnable(){this.form_button.tooltip.effect==null&&(this.form_button.tooltip=JSON.parse(JSON.stringify(this.default_tooltip))),this.changeFormButton()},handleChange(){let a=this.$refs.myDesignButton.querySelector(".bi_right");a.style.transform==""||a.style.transform=="rotate(0deg)"?a.style.transform="rotate(-90deg)":a.style.transform="rotate(0deg)"},append(a){let e=JSON.parse(JSON.stringify(this.defaultQueryConfig.button));e.guid=le().v4().replace(/-/g,""),e.name="\u64CD\u4F5C\u6309\u94AE",e.label="\u64CD\u4F5C\u6309\u94AE",e.button_position=a,a!="row"&&(e.style="default"),e.order=this.query_config_button.length+1,this.query_config_button.push(JSON.parse(JSON.stringify(e))),this.current_node_key=e.guid,this.form_button=JSON.parse(JSON.stringify(e)),this.sortByOrder()},appendSystem(){this.dialogVisible=!0},remove(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664[ "+a.label+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{this.query_config_button=this.$$lib__.filter(this.query_config_button,e=>!(e.guid==a.id||a.isDropdown&&e.parent==a.id)),this.changeQueryConfigButton()}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},handleNodeClick(a){let e=this.$$lib__.find(this.query_config_button,t=>t.guid==a.id);e&&(this.form_button=JSON.parse(JSON.stringify(e)),this.$refs.role_tree.setCheckedKeys(this.form_button.authorize_roles))},sortByOrder(){let a=this.$refs.button_tree.getNode("root_row"),e=this.$refs.button_tree.getNode("root_header"),t=this.$$lib__.union(a.childNodes,e.childNodes),i=1;this.$$lib__.each(t,o=>{this.$$lib__.each(this.query_config_button,n=>{n.guid==o.data.id&&(n.order=i,i++),n.guid==this.form_button.guid&&(this.form_button=JSON.parse(JSON.stringify(n)))}),o.childNodes&&o.childNodes.length>0&&this.$$lib__.each(o.childNodes,n=>{this.$$lib__.each(this.query_config_button,d=>{d.guid==n.data.id&&(d.order=i,i++),d.guid==this.form_button.guid&&(this.form_button=JSON.parse(JSON.stringify(d)))}),n.childNodes&&n.childNodes.length>0&&this.$$lib__.each(n.childNodes,d=>{this.$$lib__.each(this.query_config_button,g=>{g.guid==d.data.id&&(g.order=i,i++),g.guid==this.form_button.guid&&(this.form_button=JSON.parse(JSON.stringify(g)))})})})}),this.changeQueryConfigButton()},nodeDragEnd(a,e,t){if(t=="none")return;let i=null;if(t=="inner"?i=e.data:e.parent&&(t=="before"||t=="after")&&(i=e.parent.data),a.data.isDropdown==!0){let o=e.data.id=="root_row"||e.parent&&e.parent.data.id=="root_row"||e.parent&&e.parent.parent&&e.parent.parent.data.id=="root_row";this.$$lib__.each(this.query_config_button,n=>{(n.guid==a.data.id||n.parent==a.data.id)&&(o==!1||n.isSys!=!0?(n.button_position=i.button_position,i.align&&(n.align=i.align),i.isDropdown==!0&&(n.parent=i.id,n.isDropdown=!1)):n.parent=null)})}else this.$$lib__.each(this.query_config_button,o=>{o.guid==a.data.id&&(o.button_position=i.button_position,i.align&&(o.align=i.align),i.isDropdown==!0?o.parent=i.id:o.parent=null)});this.sortByOrder()},allowDrop(a,e,t){return a.data.isSys&&(e.data.id=="root_row"||e.parent&&e.parent.data.id=="root_row"||e.parent&&e.parent.parent&&e.parent.parent.data.id=="root_row"||(t=="inner"?e.data.isDropdown:e.parent.data.isDropdown)==!0&&(a.data.id==this.global_query.button_system.customer_fields.guid||a.data.id==this.global_query.button_system.customer_conditions.guid||a.data.id==this.global_query.button_system.customer_query.guid))||e.data.id=="root_header"||e.data.id.indexOf("align")>-1&&t!="inner"?!1:e.data.id.indexOf("align")>-1&&t=="inner"||e.data.isDropdown&&t=="inner"?!0:this.isDropdownButton(e.data.parent)?t!=="inner":e.data.id=="root_row"?t=="inner":t!=="inner"},allowDrag(a){return a.data.id.indexOf("root")==-1&&a.data.id.indexOf("align")==-1},onIconChange(a){this.form_button.icon=a,this.changeFormButton()},setButtonClickTooltip(a){if(a.isSys)switch(a.guid){case this.global_query.button_system.query.guid:return`/* \u8BF4\u660E
 this.form_condition: \u6240\u6709\u67E5\u8BE2\u63A7\u4EF6\u7684\u503C(\u67E5\u8BE2\u6761\u4EF6\u8F93\u5165\u6216\u9009\u62E9\u7684\u503C\uFF0C\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u524D\u7684\u6570\u636E)
 this.requestBody: \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
 this.doQuery(requestBody): \u6267\u884C\u67E5\u8BE2\u5217\u8868\u6570\u636E\u7684\u65B9\u6CD5(\u7CFB\u7EDF\u5185\u7F6E);requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2
*/
/* doQuery \u65B9\u6CD5\u8BF4\u660E(\u5185\u90E8\u5904\u7406\u903B\u8F91)
this.dialogVisible = false; // \u5173\u95ED\u66F4\u591A\u7B5B\u9009\u5F39\u7A97
this.setRequestBodyKeyValue({ keyValue: JSON.parse(JSON.stringify(this.form_condition)), widgetId: this.widgetId }); // \u8BBE\u7F6E\u67E5\u8BE2\u6761\u4EF6
bus.$emit("busQueryDataList");  // \u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
this.sendAction(this.global_query.action_system.query_doQuery.code); // \u6267\u884C\u53D1\u9001\u67E5\u8BE2\u4E8B\u4EF6
*/

this.doQuery(requestBody); // \u76F4\u63A5\u8C03\u7528\u6B64\u65B9\u6CD5\u5373\u53EF\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C;requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2`;case this.global_query.button_system.empty.guid:return`/* \u8BF4\u660E
 this.form_condition: \u6240\u6709\u67E5\u8BE2\u63A7\u4EF6\u7684\u503C(\u67E5\u8BE2\u6761\u4EF6\u8F93\u5165\u6216\u9009\u62E9\u7684\u503C\uFF0C\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u524D\u7684\u6570\u636E)
 this.requestBody: \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
 this.emptyHeader(button): \u6267\u884C\u6E05\u7A7A\u67E5\u8BE2\u6761\u4EF6\u7684\u65B9\u6CD5(\u7CFB\u7EDF\u5185\u7F6E)
*/
/* emptyHeader \u65B9\u6CD5\u8BF4\u660E(\u5185\u90E8\u5904\u7406\u903B\u8F91)
// \u5F53\u66F4\u591A\u7B5B\u9009\u6761\u4EF6\u662F\u5728\u5934\u90E8\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u5373\u4E3A\u6E05\u7A7A\u6240\u6709\u67E5\u8BE2\u6761\u4EF6
if (this.extendVisible == true) {
   this.empty(null, button);
} else {
   this.empty('header', button); // \u67E5\u8BE2\u6761\u4EF6  'header': \u8868\u793A\u53EA\u6E05\u7A7A\u5934\u90E8\u7684\u67E5\u8BE2\u6761\u4EF6 'dialog': \u8868\u793A\u53EA\u6E05\u7A7A\u66F4\u591A\u7B5B\u9009\u5F39\u7A97\u7684\u67E5\u8BE2\u6761\u4EF6
}this.sendAction(this.global_query.action_system.query_emptyHeader.code); // \u6267\u884C\u53D1\u9001\u6E05\u7A7A\u4E8B\u4EF6
*/
/* empty \u65B9\u6CD5\u8BF4\u660E(\u5185\u90E8\u5904\u7406\u903B\u8F91) 
let condition_control_list = [];
// \u6839\u636E\u6E05\u7A7A\u4F4D\u7F6E\uFF0C\u83B7\u53D6\u9700\u6C42\u6E05\u7A7A\u7684\u67E5\u8BE2\u6761\u4EF6\uFF1B\u5373\u5934\u90E8\u8FD8\u662F\u5F39\u7A97
if (position) {
    condition_control_list = JSON.parse(JSON.stringify(this.condition_control[position]));
} else {
    for (let key_position in this.condition_control) {
        condition_control_list = this.$$lib__.union(condition_control_list, JSON.parse(JSON.stringify(this.condition_control[key_position])));
    }
}
// \u6839\u636E\u6E05\u7A7A\u5185\u5BB9\uFF0C\u8FDB\u884C\u4E0D\u540C\u5904\u7406\uFF08\u6CA1\u6709\u8BBE\u7F6E\u65F6\uFF0C\u9ED8\u8BA4\u4FDD\u7559\u9ED8\u8BA4\u503C\uFF09
if (button && button.empty_content) {
    switch (button.empty_content) {
        case this.global_query.empty_content.all.code: // \u6E05\u7A7A\u6240\u6709
            this.emptyAll(condition_control_list);
            break;
        case this.global_query.empty_content.keep_defaults.code: // \u4FDD\u7559\u9ED8\u8BA4\u503C
            this.emptyDefaults(condition_control_list);
            break;
        case this.global_query.empty_content.keep_filter.code: // \u4FDD\u7559\u7B5B\u9009\u5668
            this.emptyFilter(condition_control_list);
            break;
        default: // \u4FDD\u7559\u9ED8\u8BA4\u503C
            this.emptyDefaults(condition_control_list);
    }
} else { // \u4FDD\u7559\u9ED8\u8BA4\u503C
    this.emptyDefaults(condition_control_list);
}*/

this.emptyHeader(); // \u76F4\u63A5\u8C03\u7528\u6B64\u65B9\u6CD5\u5373\u53EF\u6267\u884C\u6E05\u7A7A\u64CD\u4F5C
`;case this.global_query.button_system.query_super.guid:return`/* \u8BF4\u660E
 this.form_condition: \u6240\u6709\u67E5\u8BE2\u63A7\u4EF6\u7684\u503C(\u67E5\u8BE2\u6761\u4EF6\u8F93\u5165\u6216\u9009\u62E9\u7684\u503C\uFF0C\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u524D\u7684\u6570\u636E)
 this.requestBody: \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
 button_config: \u6309\u94AE\u914D\u7F6E\u4FE1\u606F
 this.dialogVisible: \u9AD8\u7EA7\u67E5\u8BE2\u5F39\u7A97\u7684\u9690\u85CF\u663E\u793A
*/

this.query_title = button_config.label; // \u5F39\u7A97\u6807\u9898
this.dialog_width = button_config.dialog_width; // \u5F39\u7A97\u5BBD\u5EA6
this.dialogVisible = !this.dialogVisible; // \u6253\u5F00\u5F39\u7A97`;case this.global_query.button_system.query_extend.guid:return`/* \u8BF4\u660E
 this.form_condition: \u6240\u6709\u67E5\u8BE2\u63A7\u4EF6\u7684\u503C(\u67E5\u8BE2\u6761\u4EF6\u8F93\u5165\u6216\u9009\u62E9\u7684\u503C\uFF0C\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u524D\u7684\u6570\u636E)
 this.requestBody: \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
 button_config: \u6309\u94AE\u914D\u7F6E\u4FE1\u606F
 this.extendVisible: \u66F4\u591A\u7B5B\u9009\u7684\u9690\u85CF\u663E\u793A
*/

this.extendVisible = !this.extendVisible; // \u9690\u85CF\u663E\u793A\u66F4\u591A\u7B5B\u9009`;case this.global_query.button_system.customer_fields.guid:return`/* \u8BF4\u660E
 this.customerFieldsInfo: \u9009\u62E9\u7684\u5B57\u6BB5ID\uFF0C\u503C\u4E3A\u7A7Anull\u65F6\uFF0C\u4E3A\u8FD8\u539F\u9ED8\u8BA4\u64CD\u4F5C
 this.doSaveCustomerFields(): \u4FDD\u5B58\u5F53\u524D\u7528\u6237\u81EA\u5B9A\u4E49\u67E5\u8BE2\u7ED3\u679C\u5217\u6570\u636E\u65B9\u6CD5
 this.doSaveCustomerFields(customerFieldsInfo,()=>{}): \u4FDD\u5B58\u540E\uFF0C\u53EF\u4EE5\u6267\u884C\u56DE\u8C03\u51FD\u6570
*/

this.doSaveCustomerFields(customerFieldsInfo); // \u76F4\u63A5\u8C03\u7528\u6B64\u65B9\u6CD5\u5373\u53EF\u6267\u884C\u81EA\u5B9A\u4E49\u5217\u4FDD\u5B58\u64CD\u4F5C
`;case this.global_query.button_system.customer_query.guid:return`/* \u8BF4\u660E
    query: \u5F53\u524D\u9009\u4E2D\u7684\u7B5B\u9009\u5668\u5185\u5BB9
    button_config: \u6309\u94AE\u914D\u7F6E\u4FE1\u606F
*/
let keyValue = {};  // \u7B5B\u9009\u6761\u4EF6
if (query) {
    keyValue = query.keyValue;
    if (keyValue && keyValue != "") {
        keyValue = JSON.parse(keyValue);  // \u5B57\u7B26\u4E32\u8F6C\u5BF9\u8C61
    }
}
// \u8BBE\u7F6E\u5F53\u524D\u7684\u7B5B\u9009\u6761\u4EF6
this.setRequestBodyKeyValue({ keyValue: keyValue, widgetId: this.widgetId });
// \u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\u9884\u89C8
bus.$emit("busPreviewConditionValue" + (this.widgetId ? "_" + this.widgetId : ""));
// \u8BBE\u7F6E\u81EA\u5B9A\u4E49\u67E5\u8BE2\u6761\u4EF6
bus.$emit("busSetQueryCustomer" + (this.widgetId ? "_" + this.widgetId : ""));
// \u6267\u884C\u6267\u884C\u64CD\u4F5C
bus.$emit("busDoQuery" + (this.widgetId ? "_" + this.widgetId : ""),queryInfo);`;case this.global_query.button_system.save_query.guid:return"this.$refs.saveQuery.addQuery(); // \u6253\u5F00\u4FDD\u5B58\u5F39\u7A97";case this.global_query.button_system.customer_conditions.guid:return`/* \u8BF4\u660E
 this.customerConditionsInfo: \u9009\u62E9\u7684\u67E5\u8BE2\u6761\u4EF6ID\uFF0C\u503C\u4E3A\u7A7Anull\u65F6\uFF0C\u4E3A\u8FD8\u539F\u9ED8\u8BA4\u64CD\u4F5C
 this.doSaveCustomerConditions(): \u4FDD\u5B58\u5F53\u524D\u7528\u6237\u81EA\u5B9A\u4E49\u67E5\u8BE2\u6761\u4EF6\u6570\u636E\u65B9\u6CD5
 this.doSaveCustomerConditions(customerConditionsInfo,()=>{}): \u4FDD\u5B58\u540E\uFF0C\u53EF\u4EE5\u6267\u884C\u56DE\u8C03\u51FD\u6570
 */

this.doSaveCustomerConditions(customerConditionsInfo); // \u76F4\u63A5\u8C03\u7528\u6B64\u65B9\u6CD5\u5373\u53EF\u6267\u884C\u81EA\u5B9A\u4E49\u67E5\u8BE2\u6761\u4EF6\u7684\u4FDD\u5B58\u64CD\u4F5C`;case this.global_query.button_system.refresh.guid:return`/* \u8BF4\u660E
 this.form_condition: \u6240\u6709\u67E5\u8BE2\u63A7\u4EF6\u7684\u503C(\u67E5\u8BE2\u6761\u4EF6\u8F93\u5165\u6216\u9009\u62E9\u7684\u503C\uFF0C\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u524D\u7684\u6570\u636E)
 this.requestBody: \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
 this.doRefresh(button): \u6267\u884C\u5237\u65B0\u6570\u636E\u7684\u65B9\u6CD5
*/
/* doRefresh  \u65B9\u6CD5\u8BF4\u660E(\u5185\u90E8\u5904\u7406\u903B\u8F91)
this.setRequestBodyOrders({
    keyValue: JSON.parse(JSON.stringify(this.requestDefaultBody.orders)),
    widgetId: this.widgetId
}); // \u6392\u5E8F\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4
this.setRequestBodyPage({pageNum: 1, widgetId: this.widgetId}); // \u5206\u9875\u8BBE\u7F6E\u4E3A\u7B2C\u4E00\u9875
this.refreshCondition(button) // \u6839\u636E\u4FDD\u7559\u5185\u5BB9\uFF0C\u5BF9\u67E5\u8BE2\u6761\u4EF6\u8FDB\u884C\u4E0D\u540C\u5904\u7406;
this.setRequestBodyKeyValue({
    keyValue: JSON.parse(JSON.stringify(this.form_condition)),
    widgetId: this.widgetId
});  // \u8BBE\u7F6E\u8BF7\u6C42\u7684\u67E5\u8BE2\u6761\u4EF6
bus.$emit("busTableClearSort" + (this.widgetId ? "_" + this.widgetId : "")); // \u6E05\u7A7A\u5217\u8868\u91CC\u9762\u7684\u6392\u5E8F
bus.$emit("busQueryDataList" + (this.widgetId ? "_" + this.widgetId : "")); // \u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
this.sendAction(this.global_query.action_system.query_doRefresh.code); // \u6267\u884C\u5237\u65B0\u4E8B\u4EF6*/
this.doRefresh(button);  // \u76F4\u63A5\u8C03\u7528\u6B64\u65B9\u6CD5\u5373\u53EF\u6267\u884C\u5237\u65B0\u64CD\u4F5C`;case this.global_query.button_system.exportExcelCurrent.guid:return`/* \u8BF4\u660E
 this.requestBody: \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
 customerFieldsInfo: \u9009\u62E9\u5BFC\u51FA\u7ED3\u679C\u5217ID\uFF0C\u503C\u4E3A\u7A7Anull\u65F6\uFF0C\u4E3A\u5BFC\u51FA\u6240\u6709\u5217
 this.doExportExcelCurrent(customerFieldsInfo): \u6267\u884C\u5BFC\u51FAExcel\uFF08\u5F53\u524D\u9875\uFF09\u7684\u65B9\u6CD5
*/
/* doExportExcelCurrent  \u65B9\u6CD5\u8BF4\u660E(\u5185\u90E8\u5904\u7406\u903B\u8F91)
let requestBody = JSON.parse(JSON.stringify(this.requestBody)); // \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
requestBody.customerFields = customerFieldsInfo;// \u5BFC\u51FA\u7684\u7ED3\u679C\u5217\u6570\u636E
bus.$emit("busExportExcel", {requestBody: requestBody, button: button}); // \u6267\u884C\u5BFC\u51FAExcel\u64CD\u4F5C
this.$emit("sendAction", this.global_query.action_system.query_doExportExcelCurrent.code); // \u6267\u884C\u53D1\u9001\u5BFC\u51FAExcel\uFF08\u6240\u6709\uFF09\u4E8B\u4EF6
*/

this.doExportExcelCurrent(customerFieldsInfo); // \u6267\u884C\u5BFC\u51FAExcel(\u5F53\u524D\u9875)\u4E8B\u4EF6`;case this.global_query.button_system.exportExcelAll.guid:return`/* \u8BF4\u660E
 this.requestBody: \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
 customerFieldsInfo: \u9009\u62E9\u5BFC\u51FA\u7ED3\u679C\u5217ID\uFF0C\u503C\u4E3A\u7A7Anull\u65F6\uFF0C\u4E3A\u5BFC\u51FA\u6240\u6709\u5217
 this.doExportExcelAll(customerFieldsInfo): \u6267\u884C\u5BFC\u51FAExcel\uFF08\u5F53\u524D\u9875\uFF09\u7684\u65B9\u6CD5
*/
/* doExportExcelAll  \u65B9\u6CD5\u8BF4\u660E(\u5185\u90E8\u5904\u7406\u903B\u8F91)
let requestBody = JSON.parse(JSON.stringify(this.requestBody)); // \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
// \u4E0D\u4F7F\u7528\u5206\u9875\u529F\u80FD
if (requestBody.page) {
  requestBody.page.enabled = false;
}
requestBody.customerFields = customerFieldsInfo;// \u5BFC\u51FA\u7684\u7ED3\u679C\u5217\u6570\u636E
bus.$emit("busExportExcel", {requestBody: requestBody, button: button}); // \u6267\u884C\u5BFC\u51FAExcel\u64CD\u4F5C
this.$emit("sendAction", this.global_query.action_system.query_doExportExcelAll.code); // \u6267\u884C\u53D1\u9001\u5BFC\u51FAExcel\uFF08\u6240\u6709\uFF09\u4E8B\u4EF6
*/
this.doExportExcelAll(customerFieldsInfo); // \u6267\u884C\u5BFC\u51FAExcel(\u5168\u90E8)\u4E8B\u4EF6`}else{if(a.button_position==this.global_query.button_position.row.code)return`/* \u53C2\u6570\u8BF4\u660E
 row: \u5F53\u524D\u884C\u7684\u6570\u636E
 column: \u5F53\u524D\u5217\u7684\u4FE1\u606F
 $index: \u5F53\u524D\u884C\u7684\u4E0B\u6807
 button_config: \u6309\u94AE\u914D\u7F6E\u4FE1\u606F
*/
console.info(this.form_condition); // \u6240\u6709\u67E5\u8BE2\u63A7\u4EF6\u7684\u503C(\u67E5\u8BE2\u6761\u4EF6\u8F93\u5165\u6216\u9009\u62E9\u7684\u503C\uFF0C\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u524D\u7684\u6570\u636E)
console.info(this.requestBody); // \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)

// \u6253\u5F00\u914D\u7F6E\u7684\u9ED8\u8BA4\u5F39\u7A97
if (button_config.dialog_id && button_config.dialog_id != "") {
    this.openDialog(button_config.dialog_id);
}
// \u8BBE\u7F6E\u5168\u5C40\u53D8\u91CF
this.setViewGlobalParam({ is_save: true, widgetId: this.widgetId });
// \u83B7\u53D6\u5168\u5C40\u53D8\u91CF
let globalParams = this.globalParamsFun(this.widgetId);
console.info(globalParams)

// \u6253\u5F00\u5F39\u7A97 dialogId\u4E3A\u5F39\u7A97Id
this.openDialog(dialogId, (dialogVisible, iframeURL, dialog_list) => {
    console.info(dialogVisible); // dialogVisible: \u6240\u6709\u5F39\u7A97\u663E\u793A\u6807\u8BC6
    console.info(iframeURL); // iframeURL: \u6240\u6709\u5F39\u7A97\u5185\u5BB9\u5730\u5740
    console.info(dialog_list); // dialog_list:\u5F39\u7A97\u914D\u7F6E\u4FE1\u606F\uFF08\u9664\u53BB\u5DF2\u7ECF\u9690\u85CF\u7684\u5F39\u7A97\u6570\u636E\uFF09
    // \u4FEE\u6539\u5F39\u7A97\u5185\u5BB9\u5730\u5740
    iframeURL[dialogId] = "https://map.baidu.com/";
});`;if(a.button_position==this.global_query.button_position.header.code)return`/* \u53C2\u6570\u8BF4\u660E
 button_config: \u5F53\u524D\u6309\u94AE\u7684\u914D\u7F6E\u5185\u5BB9
*/
console.info(this.form_condition); // \u6240\u6709\u67E5\u8BE2\u63A7\u4EF6\u7684\u503C(\u67E5\u8BE2\u6761\u4EF6\u8F93\u5165\u6216\u9009\u62E9\u7684\u503C\uFF0C\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u524D\u7684\u6570\u636E)
console.info(this.requestBody); // \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
console.info(this.refTable); // \u5F53\u524D\u8868\u683C\u5BF9\u8C61

// \u6253\u5F00\u914D\u7F6E\u7684\u9ED8\u8BA4\u5F39\u7A97
if (button_config.dialog_id && button_config.dialog_id != "") {
    this.openDialog(button_config.dialog_id);
}
// \u8BBE\u7F6E\u5168\u5C40\u53D8\u91CF
this.setViewGlobalParam({ is_save: true, widgetId: this.widgetId });
// \u83B7\u53D6\u5168\u5C40\u53D8\u91CF
let globalParams = this.globalParamsFun(this.widgetId);
console.info(globalParams)

// \u6253\u5F00\u5F39\u7A97 dialogId\u4E3A\u5F39\u7A97Id
this.openDialog(dialogId, (dialogVisible, iframeURL, dialog_list) => {
    console.info(dialogVisible); // dialogVisible: \u6240\u6709\u5F39\u7A97\u663E\u793A\u6807\u8BC6
    console.info(iframeURL); // iframeURL: \u6240\u6709\u5F39\u7A97\u5185\u5BB9\u5730\u5740
    console.info(dialog_list); // dialog_list:\u5F39\u7A97\u914D\u7F6E\u4FE1\u606F\uFF08\u9664\u53BB\u5DF2\u7ECF\u9690\u85CF\u7684\u5F39\u7A97\u6570\u636E\uFF09
    // \u4FEE\u6539\u5F39\u7A97\u5185\u5BB9\u5730\u5740
    iframeURL[dialogId] = "https://map.baidu.com/";
});`}},isDropdownButton(a){return a!=null&&a!=null&&a!=""},cancel(){this.dialogVisible=!1},confirm(){let a=this.$refs.appendTree.getCheckedNodes(!0);if(a){let e=a.length;if(e==0||e==1&&a[0].id=="root"){this.dialogVisible=!1;return}let t=this.query_config_button.length,i=1,o=!0;this.$$lib__.each(a,n=>{let d=JSON.parse(JSON.stringify(this.global_query.buttonSystemTheme(this.queryConfig.base.global_class)[n.button_type]));d.order=t+i,this.query_config_button.push(JSON.parse(JSON.stringify(d))),o&&(this.current_node_key=d.guid,this.form_button=JSON.parse(JSON.stringify(d)),o=!1),i++}),this.changeQueryConfigButton()}this.dialogVisible=!1},getOptions(a){return{attribute_enable:"is_click",attribute_script_content:"script_click",title:"\u6309\u94AE\uFF1A"+a.name,api:"api-script-click",script_examples:this.setButtonClickTooltip(a)}},getOptionsTooltip(a){return{attribute_enable:"is_tooltip_content",attribute_script_content:"script_tooltip_content",title:"\u6309\u94AE\uFF1A"+a.name,api:"api-script-click",script_examples:this.setTooltipContentTooltip(a)}},getOptionsDefineFileName(a){return{attribute_enable:"is_define_fileName",attribute_script_content:"script_define_fileName",title:"\u6309\u94AE\uFF1A"+a.name,api:"api-script-click",script_examples:`/* \u8BF4\u660E
 button_config: \u6309\u94AE\u914D\u7F6E\u4FE1\u606F
 this.requestBody: \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\u7684\u503C(\u6267\u884C\u8FC7\u67E5\u8BE2\u64CD\u4F5C\u4E4B\u540E\u7684\u6570\u636E)
 this.enumInfoFun(this.widgetId): \u679A\u4E3E\u4FE1\u606F 
 this.datasetInfoFun(this.widgetId): \u6570\u636E\u96C6\u679A\u4E3E\u4FE1\u606F 
*/
/* 
\u793A\u4F8B\u4E00\uFF1A\u8F93\u51FA\u56FA\u5B9A\u540D\u79F0
\u4F8B\u5B50\u4E3A\u8F93\u51FA\u540D\u4E3A\u6D59\u6C5F\u7701\u7684Excel\u6587\u4EF6
*/
return "\u6D59\u6C5F\u7701";
/* 
\u793A\u4F8B\u4E8C\uFF1A\u8F93\u51FA\u6587\u672C\u8F93\u5165\u6846\u91CC\u7684\u5185\u5BB9\u4E3A\u6587\u4EF6\u540D\u79F0,key\u6539\u4E3A\u6761\u4EF6\u7684\u5B57\u6BB5\u540D\u79F0\uFF0C\u7528\u53CC\u5F15\u53F7\u5F15\u7528\uFF0C\u5982"name"
*/
//key\u4E3A\u67E5\u8BE2\u6761\u4EF6\u7684\u5B57\u6BB5\u540D\u79F0\uFF0C\u4F7F\u7528\u53CC\u5F15\u53F7\u5F15\u7528\uFF0C\u5982\u5982"name"
let file_name = this.requestBody.keyValue[key];

return file_name;

/* 
\u793A\u4F8B\u4E09\uFF1A\u67E5\u8BE2\u6761\u4EF6\u662F\u6570\u636E\u5B57\u5178\u7C7B\u578B 
*/
//key\u4E3A\u67E5\u8BE2\u6761\u4EF6\u7684\u5B57\u6BB5\u540D\u79F0\uFF0C\u4F7F\u7528\u53CC\u5F15\u53F7\u5F15\u7528\uFF0C\u5982\u5982"name"
let file_name = this.requestBody.keyValue[key]; 
// \u83B7\u53D6\u6307\u5B9A\u679A\u4E3E\u6570\u636E\uFF0Cenum_key\u4E3A\u6570\u636E\u5B57\u5178\u91CC\u65B0\u5EFA\u5B57\u6BB5\u65F6\u8F93\u5165\u7684\u5B57\u6BB5\u540D\u79F0\uFF0C\u4F7F\u7528\u53CC\u5F15\u53F7\u5F15\u7528\u5982\u201Cgender\u201D
let region_enum = this.enumInfoFun(this.widgetId).enumJson[enum_key]; // \u6570\u636E\u96C6\u679A\u4E3E\u7528this.datasetInfoFun(this.widgetId)
// \u5728\u679A\u4E3E\u4E2D\u67E5\u627E\u679A\u4E3E\u4FE1\u606F\uFF0C\u67E5\u5230\u540E\u53EF\u53D6\u679A\u4E3E\u540D\u79F0\uFF0C\u65E0\u9700\u4FEE\u6539
let find = this.$$lib__.find(region_enum, (item) => {
    return item["enumValue"] == file_name;
});
if (find) {
    return find["enumName"];
}else{
//\u5982\u679C\u6CA1\u6709\u67E5\u5230\u5BF9\u5E94\u7684\u6570\u636E\u81EA\u52A8\u5185\u5BB9\uFF0C\u5219\u51FA\u73B0\u8B66\u544A\uFF0C\u5E76\u4E14\u6309\u7167\u539F\u6765\u89C4\u5219\u5BFC\u51FA\u6587\u4EF6\u540D\u79F0
    this.Message.warning({message: "\u672A\u83B7\u53D6\u5230\u67E5\u8BE2\u6761\u4EF6\u5185\u5BB9", offset: 60});
}`}},setTooltipContentTooltip(a){if(a.button_position==this.global_query.button_position.row.code)return`/* \u53C2\u6570\u8BF4\u660E
 row: \u5F53\u524D\u884C\u7684\u6570\u636E
 column: \u5F53\u524D\u5217\u7684\u4FE1\u606F
 $index: \u5F53\u524D\u884C\u7684\u4E0B\u6807
 button_config: \u6309\u94AE\u914D\u7F6E\u4FE1\u606F
*/
console.info(row);
console.info(column);
console.info($index);
console.info(button_config);
return "\u63D0\u793A\u6587\u672C\u5185\u5BB9";`;if(a.button_position==this.global_query.button_position.header.code)return`/* \u53C2\u6570\u8BF4\u660E
 button_config: \u6309\u94AE\u914D\u7F6E\u4FE1\u606F
*/
console.info(button_config);
return "\u63D0\u793A\u6587\u672C\u5185\u5BB9";`},initRoles(){bt.W.getRolesInfo().then(a=>{a&&a.status==200&&(this.role_tree_data=this.rebuildData(a.data))})},handleCheck(){let a=this.$refs.role_tree.getCheckedNodes(),e=this.$$lib__.pluck(a,"id");a=this.$$lib__.filter(a,t=>t.type=="role"),this.form_button.authorize_roles=e,this.changeFormButton()},rebuildData(a){let e=JSON.parse(JSON.stringify(a.roleList)),t=JSON.parse(JSON.stringify(a.roleGroupList)),i={},o={},n=[];return this.$$lib__.each(e,d=>{i[d.roleGroupId]||(i[d.roleGroupId]=[]),d.id=d.roleId,d.label=d.roleGroup,d.type="role",i[d.roleGroupId].push(d)}),this.$$lib__.each(t,d=>{d.id=d.roleGroupId,d.label=d.roleGroupName,d.type="roleGroup",d.parentId!=null?(o[d.parentId]||(o[d.parentId]=[]),o[d.parentId].push(d)):n.push(d)}),this.transferFl(n,o,i),n},transferFl(a,e,t){this.$$lib__.each(a,i=>{let o=e[i.roleGroupId];o?(i.children=o,t[i.roleGroupId]&&this.$$lib__.each(t[i.roleGroupId],n=>{i.children.push(n)}),this.transferFl(o,e,t)):t[i.roleGroupId]&&(i.children=t[i.roleGroupId])})}}},ja=Ma,Za=(0,D.Z)(ja,Aa,Ra,!1,null,"ff903cc2",null),Ha=Za.exports,Va=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-design-action"},[t("el-container",[t("el-aside",{staticStyle:{"border-right":"1px solid #E4E7ED"},attrs:{width:"200px"}},[t("div",{staticClass:"my-design-action-content queryDataSourceTree",style:{height:e.card_height-10+"px"}},[t("el-tree",{ref:"action_tree",staticClass:"my_tree",attrs:{data:e.action_tree_data,"node-key":"id","expand-on-click-node":!1,"current-node-key":e.current_node_key,"highlight-current":"","default-expand-all":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[o.id.indexOf("root")>-1?[t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})])]),t("el-tooltip",{attrs:{"open-delay":1e3,content:i.label,effect:"light",placement:"top"}},[t("span",{style:{color:o.disabled==!0?"#C0C4CC":"",display:"inline"}},[e._v(" "+e._s(i.label)+" ")])])]:t("el-tooltip",{attrs:{"open-delay":1e3,content:i.label,effect:"light",placement:"top"}},[t("span",{style:{color:o.disabled==!0?"#C0C4CC":""}},[e._v(" "+e._s(i.label)+" ")])]),t("span",{staticClass:"iconfont-container"},[o.id.indexOf("root")>-1?t("el-tooltip",{attrs:{"open-delay":1e3,content:o.action_type=="send"?"\u6DFB\u52A0\u53D1\u9001\u4E8B\u4EF6":"\u6DFB\u52A0\u63A5\u6536\u4E8B\u4EF6",effect:"light",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.append(o.action_type)}},[t("i",{staticClass:"iconfont bi_add31"})])],1):t("el-tooltip",{attrs:{"open-delay":1e3,content:o.action_type=="send"?"\u79FB\u9664\u53D1\u9001\u4E8B\u4EF6":"\u79FB\u9664\u63A5\u6536\u4E8B\u4EF6",effect:"light",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.remove(o)}},[t("i",{staticClass:"iconfont bi_del3"})])],1)],1)],2)}}])})],1)]),t("el-main",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.form_action.guid&&e.form_action.guid!="",expression:"(form_action.guid && form_action.guid != '')"}],staticClass:"my-design-action-content",style:{height:e.card_height-20+"px"}},[t("el-form",{ref:"form",staticStyle:{margin:"10px 10px 0px 10px"},attrs:{model:e.form_action,inline:!0,size:"mini"}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u4E8B\u4EF6\u7F16\u7801"}},[t("el-input",{attrs:{disabled:e.form_action.isSys},on:{change:e.changeFormAction},model:{value:e.form_action.code,callback:function(i){e.$set(e.form_action,"code",i)},expression:"form_action.code"}})],1),t("el-form-item",{attrs:{label:"\u4E8B\u4EF6\u540D\u79F0"}},[t("el-input",{on:{change:e.changeFormAction},model:{value:e.form_action.name,callback:function(i){e.$set(e.form_action,"name",i)},expression:"form_action.name"}})],1)],1),t("div",{staticClass:"form-container button"},[t("el-form-item",{attrs:{label:"\u662F\u5426\u7981\u7528"}},[t("el-switch",{on:{change:e.changeFormAction},model:{value:e.form_action.disabled,callback:function(i){e.$set(e.form_action,"disabled",i)},expression:"form_action.disabled"}})],1),e.form_action.disabled!=!0?[t("el-form-item",{attrs:{label:"\u4E8B\u4EF6\u811A\u672C"}},[t("query-script",{attrs:{options:e.getOptions()},on:{change:e.changeFormAction},model:{value:e.form_action,callback:function(i){e.form_action=i},expression:"form_action"}})],1),e.form_action.code==e.global_query.action_system.query_onPostMessage.code?t("el-form-item",{staticStyle:{width:"240px"},attrs:{label:"\u57DF\u540D\u8FC7\u6EE4"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u53EA\u63A5\u6536\u7279\u5B9A\u57DF\u540D\u7684\u6D88\u606F\uFF0C'*'\u8868\u793A\u4EFB\u610F\u57DF\u540D",effect:"dark",placement:"top"}},[t("el-input",{on:{change:e.changeFormAction},model:{value:e.form_action.origin,callback:function(i){e.$set(e.form_action,"origin",i)},expression:"form_action.origin"}})],1)],1):e._e(),e.form_action.action_type=="send"?t("el-form-item",{attrs:{label:"\u53D1\u9001\u7236\u9875"}},[t("el-switch",{on:{change:e.changeFormAction},model:{value:e.form_action.postMessage,callback:function(i){e.$set(e.form_action,"postMessage",i)},expression:"form_action.postMessage"}})],1):e._e()]:e._e()],2)])],1)])],1),t("el-dialog",{staticClass:"my-dialog",attrs:{title:e.append_action_type=="send"?"\u6DFB\u52A0\u53D1\u9001\u4E8B\u4EF6":"\u6DFB\u52A0\u63A5\u6536\u4E8B\u4EF6",width:"350px","close-on-click-modal":!1,"modal-append-to-body":!1,visible:e.dialogVisible},on:{"update:visible":function(i){e.dialogVisible=i}}},[t("div",{staticStyle:{"max-height":"300px","min-width":"150px","overflow-y":"auto"}},[t("el-tree",{ref:"appendTree",attrs:{data:e.append_action_data,"expand-on-click-node":!1,"check-on-click-node":"","default-expand-all":"","show-checkbox":""}})],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{margin:"0px 10px 15px 0px"},attrs:{size:"small"},on:{click:e.cancel}},[e._v("\u53D6 \u6D88")]),t("el-button",{staticStyle:{margin:"0px 20px 15px 0px"},attrs:{size:"small",type:"primary"},on:{click:e.confirm}},[e._v("\u786E \u5B9A")])],1)])],1)},Ua=[],Ga={name:"design-action",components:{QueryScript:_.Z},mixins:[P],data(){return{form_action:{},append_action_type:null,current_node_key:null,query_config_action:[],dialogVisible:!1}},computed:{append_action_data(){let a=this,e=[];for(let t in a.global_query.action_system){let i=JSON.parse(JSON.stringify(a.global_query.action_system[t]));i.action_type==a.append_action_type&&(a.$$lib__.find(a.query_config_action,n=>n.code==i.code)||e.push({id:i.guid,code:i.code,label:i.name,action_code:t}))}return[{id:"root",label:a.append_action_type=="send"?"\u5C1A\u672A\u6DFB\u52A0\u53D1\u9001\u4E8B\u4EF6":"\u5C1A\u672A\u6DFB\u52A0\u63A5\u6536\u4E8B\u4EF6",children:e}]},action_tree_data(){let a=this,e={send:[],receive:[]};return a.$$lib__.each(a.query_config_action,t=>{let i={id:t.guid,code:t.code,label:t.name,disabled:t.disabled,action_type:t.action_type};e[t.action_type].push(i)}),[{id:"root_send",label:"\u53D1\u9001",action_type:"send",children:e.send},{id:"root_receive",label:"\u63A5\u6536",action_type:"receive",children:e.receive}]}},watch:{"queryConfig.action":{deep:!0,handler:function(){this.query_config_action=JSON.parse(JSON.stringify(this.queryConfig.action))}},action_tree_data:{deep:!0,handler:function(){this.form_action&&this.form_action.guid&&this.$nextTick(()=>{this.$refs.action_tree.setCurrentKey(this.form_action.guid)})}}},methods:{...(0,w.nv)(["updateQueryConfigAction"]),changeFormAction(){if(this.query_config_action&&this.query_config_action.length>0){for(let a=0;a<this.query_config_action.length;a++)if(this.query_config_action[a].code==this.form_action.code){this.query_config_action[a]=JSON.parse(JSON.stringify(this.form_action)),this.changeQueryConfigAction();break}}},changeQueryConfigAction(){this.updateQueryConfigAction(this.query_config_action)},append(a){this.append_action_type=a,this.dialogVisible=!0},remove(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664[ "+a.label+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{if(this.query_config_action&&this.query_config_action.length>0){for(let e=0;e<this.query_config_action.length;e++)this.query_config_action[e].code==a.code&&(this.query_config_action.splice(e,1),this.form_action={});this.changeQueryConfigAction()}}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},handleNodeClick(a){let e=this.$$lib__.find(this.query_config_action,t=>t.code==a.code);e&&(this.form_action=JSON.parse(JSON.stringify(e)))},cancel(){this.dialogVisible=!1},confirm(){let a=this.$refs.appendTree.getCheckedNodes(!0);if(a){let e=a.length;if(e==0||e==1&&a[0].id=="root"){this.dialogVisible=!1;return}let t=this.query_config_action.length,i=1,o=!0;this.$$lib__.each(a,n=>{let d=JSON.parse(JSON.stringify(this.global_query.action_system[n.action_code]));d.order=t+i,this.query_config_action.push(JSON.parse(JSON.stringify(d))),o&&(this.current_node_key=d.guid,this.form_action=JSON.parse(JSON.stringify(d)),o=!1),i++}),this.changeQueryConfigAction()}this.dialogVisible=!1},getOptions(){return{attribute_script_content:"script_action",title:"\u4E8B\u4EF6\u811A\u672C",api:"api-script-action",script_examples:this.setScriptActionTooltip(),button_style:{color:"#409EFF"}}},setScriptActionTooltip(){let a=null;if("query_doQuery,query_emptyHeader,query_doRefresh,query_doExportExcelCurrent,query_doExportExcelAll".indexOf(this.form_action.code)>-1)a=`/* \u53EF\u4F7F\u7528\u7684\u65B9\u6CD5\u8BF4\u660E*/
// \u76F8\u5173\u5185\u5BB9\u4ECB\u7ECD
console.info(this.form_condition); // \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\uFF08\u5305\u62EC\u66F4\u591A\u7B5B\u9009\u7684\u5F39\u7A97\u5185\u5BB9\uFF09\u7684\u503C\uFF0C\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539\u503C\uFF0C\u518D\u8FDB\u884C\u67E5\u8BE2\u64CD\u4F5C
this.doQuery(requestBody); // \u67E5\u8BE2\u6309\u94AE\u65B9\u6CD5;requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2
this.emptyHeader(); // \u6E05\u7A7A\u5934\u90E8\u67E5\u8BE2\u6761\u4EF6\u6309\u94AE\u65B9\u6CD5
this.doRefresh(); // \u5237\u65B0\u6309\u94AE\u65B9\u6CD5
this.doExportExcelCurrent(); // \u5BFC\u51FAExcel\uFF08\u5F53\u524D\u9875\uFF09\u6309\u94AE\u65B9\u6CD5
this.doExportExcelAll(); // \u5BFC\u51FAExcel\uFF08\u6240\u6709\uFF09\u6309\u94AE\u65B9\u6CD5

return this.form_condition
`;else switch(this.form_action.code){case this.global_query.action_system.query_onPostMessage.code:a=`/* \u53EF\u4F7F\u7528\u7684\u65B9\u6CD5\u8BF4\u660E*/
// \u5934\u90E8\u76F8\u5173\u5185\u5BB9\u4ECB\u7ECD
let refHeader = this.$refs.refHeader;
console.info(refHeader.form_condition); // \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\uFF08\u5305\u62EC\u66F4\u591A\u7B5B\u9009\u7684\u5F39\u7A97\u5185\u5BB9\uFF09\u7684\u503C\uFF0C\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539\u503C\uFF0C\u518D\u8FDB\u884C\u67E5\u8BE2\u64CD\u4F5C
refHeader.doQuery(requestBody); // \u67E5\u8BE2\u6309\u94AE\u65B9\u6CD5;requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2
refHeader.emptyHeader(); // \u6E05\u7A7A\u5934\u90E8\u67E5\u8BE2\u6761\u4EF6\u6309\u94AE\u65B9\u6CD5
refHeader.doRefresh(); // \u5237\u65B0\u6309\u94AE\u65B9\u6CD5
refHeader.doExportExcelCurrent(); // \u5BFC\u51FAExcel\uFF08\u5F53\u524D\u9875\uFF09\u6309\u94AE\u65B9\u6CD5
refHeader.doExportExcelAll(); // \u5BFC\u51FAExcel\uFF08\u6240\u6709\uFF09\u6309\u94AE\u65B9\u6CD5

// \u5E95\u90E8\u76F8\u5173\u5185\u5BB9\u4ECB\u7ECD
let refMain = this.$refs.refMain;
// orders \u8BF4\u660E
// orders = null/undefined \u8868\u793A\u6062\u590D\u9ED8\u8BA4\u6392\u5E8F
// orders = {sort: "field", order: "desc"} sort \u4E3A\u5B57\u6BB5\u540D\uFF0Corder \u4E3Aasc\u548Cdesc
// orders = [{sort: "field", order: "desc"},{sort: "field", order: "desc"}]  \u591A\u4E2A\u5B57\u6BB5\u6392\u5E8F
refMain.setOrders({orders}); // \u8BBE\u7F6E\u6392\u5E8F\u5B57\u6BB5\uFF0C\u518D\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C

// \u5E95\u90E8\u76F8\u5173\u5185\u5BB9\u4ECB\u7ECD
let refFooter = this.$refs.refFooter;
refFooter.setPageNum({pageNum}); // \u8BBE\u7F6E\u5F53\u524D\u7684\u9875\u6570\uFF0C\u518D\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
refFooter.setPageSize({pageSize}); // \u8BBE\u7F6E\u5F53\u524D\u4E3A\u7B2C\u4E00\u9875\uFF0C\u6BCF\u9875\u6761\u6570\u540E\uFF0C\u518D\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
`;break}return a}}},Wa=Ga,Ka=(0,D.Z)(Wa,Va,Ua,!1,null,"f10b09d6",null),Xa=Ka.exports,Ya=function(){var e=this,t=e._self._c;return t("div",{ref:"myDesignDialog",staticClass:"my-design-dialog"},[t("el-container",[t("el-aside",{staticStyle:{"border-right":"1px solid #e4e7ed"},attrs:{width:"200px"}},[t("div",{staticClass:"my-design-dialog-content queryDataSourceTree",style:{height:e.card_height-10+"px"}},[t("el-tree",{ref:"dialog_tree",staticClass:"my_tree",attrs:{data:e.dialog_tree_data,"node-key":"guid","expand-on-click-node":!1,"current-node-key":e.current_node_key,"highlight-current":"","default-expand-all":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[o.guid.indexOf("root")>-1?[t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})])]),t("el-tooltip",{attrs:{"open-delay":1e3,content:i.label,effect:"light",placement:"top"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":"",display:"inline"}},[e._v(" "+e._s(i.label)+" ")])])]:t("el-tooltip",{attrs:{"open-delay":1e3,content:i.label,effect:"light",placement:"top"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":""}},[e._v(" "+e._s(i.label)+" ")])]),t("span",{staticClass:"iconfont-container"},[o.guid.indexOf("root")>-1?t("span",[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u5F39\u7A97",effect:"light",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.append()}},[t("i",{staticClass:"iconfont bi_add31"})])],1)],1):t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u5F39\u7A97",effect:"light",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.remove(o)}},[t("i",{staticClass:"iconfont bi_del3"})])],1)],1)],2)}}])})],1)]),t("el-main",[t("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.form_dialog.guid&&e.form_dialog.guid!="",expression:"form_dialog.guid && form_dialog.guid != ''"}],attrs:{stretch:""}},[t("el-tab-pane",{attrs:{label:"\u57FA\u672C\u914D\u7F6E"}},[t("div",{staticClass:"my-design-dialog-content",style:{height:e.card_height-43+"px"}},[t("el-form",{ref:"form",staticStyle:{margin:"10px"},attrs:{model:e.form_dialog,inline:!0,size:"mini"}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5F39\u7A97ID"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form_dialog.guid,callback:function(i){e.$set(e.form_dialog,"guid",i)},expression:"form_dialog.guid"}})],1),t("el-form-item",{attrs:{label:"\u5F39\u7A97\u540D\u79F0"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u5F39\u7A97\u540D\u79F0"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.name,callback:function(i){e.$set(e.form_dialog,"name",i)},expression:"form_dialog.name"}})],1),t("el-form-item",{attrs:{label:"\u5F39\u7A97\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{placeholder:"\u5F39\u7A97\u5BBD\u5EA6","controls-position":"right",step:1,min:0},on:{change:e.changeFormDialog},model:{value:e.form_dialog.width,callback:function(i){e.$set(e.form_dialog,"width",i)},expression:"form_dialog.width"}}),t("el-select",{staticClass:"unit-class",attrs:{placeholder:"\u5355\u4F4D"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.width_unit,callback:function(i){e.$set(e.form_dialog,"width_unit",i)},expression:"form_dialog.width_unit"}},[t("el-option",{attrs:{label:"px",value:"px"}}),t("el-option",{attrs:{label:"%",value:"%"}})],1)],1),t("el-form-item",{attrs:{label:"\u5782\u76F4\u5C45\u4E2D"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.center_vertically,callback:function(i){e.$set(e.form_dialog,"center_vertically",i)},expression:"form_dialog.center_vertically"}})],1),e.form_dialog.center_vertically!=!0?t("el-form-item",{attrs:{label:"\u9876\u90E8\u8DDD\u79BB"}},[t("el-input-number",{attrs:{placeholder:"\u9876\u90E8\u8DDD\u79BB","controls-position":"right",step:1,min:0},on:{change:e.changeFormDialog},model:{value:e.form_dialog.top,callback:function(i){e.$set(e.form_dialog,"top",i)},expression:"form_dialog.top"}})],1):e._e()],1),t("el-form-item",{attrs:{label:"\u906E\u7F69\u5C42"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.modal,callback:function(i){e.$set(e.form_dialog,"modal",i)},expression:"form_dialog.modal"}})],1),e.form_dialog.modal?t("el-form-item",{attrs:{label:"\u70B9\u51FB\u906E\u7F69\u5C42\u5173\u95ED"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.modalClose,callback:function(i){e.$set(e.form_dialog,"modalClose",i)},expression:"form_dialog.modalClose"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u662F\u5426\u5168\u5C4F"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.fullscreen,callback:function(i){e.$set(e.form_dialog,"fullscreen",i)},expression:"form_dialog.fullscreen"}})],1),t("el-form-item",{attrs:{label:"\u53EF\u5426\u62D6\u62FD"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.draggable,callback:function(i){e.$set(e.form_dialog,"draggable",i)},expression:"form_dialog.draggable"}})],1),t("el-form-item",{attrs:{label:"\u5173\u95ED\u9500\u6BC1"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.destroyOnClose,callback:function(i){e.$set(e.form_dialog,"destroyOnClose",i)},expression:"form_dialog.destroyOnClose"}})],1),t("el-form-item",{attrs:{label:"\u5173\u95ED\u6309\u94AE"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.showClose,callback:function(i){e.$set(e.form_dialog,"showClose",i)},expression:"form_dialog.showClose"}})],1),t("el-form-item",{attrs:{label:"\u6253\u5F00\u65F6\u4E8B\u4EF6"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6253\u5F00\u65F6\u7684\u56DE\u8C03",effect:"light",placement:"top"}},[t("query-script",{attrs:{options:e.options.dialog_open},on:{change:e.changeFormDialog},model:{value:e.form_dialog,callback:function(i){e.form_dialog=i},expression:"form_dialog"}})],1)],1),t("el-form-item",{attrs:{label:"\u6253\u5F00\u540E\u4E8B\u4EF6"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6253\u5F00\u52A8\u753B\u7ED3\u675F\u65F6\u7684\u56DE\u8C03",effect:"light",placement:"top"}},[t("query-script",{attrs:{options:e.options.dialog_opened},on:{change:e.changeFormDialog},model:{value:e.form_dialog,callback:function(i){e.form_dialog=i},expression:"form_dialog"}})],1)],1),t("el-form-item",{attrs:{label:"\u5173\u95ED\u524D\u56DE\u8C03"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5173\u95ED\u524D\u7684\u56DE\u8C03\uFF0C\u4F1A\u6682\u505C\u5F39\u7A97\u7684\u5173\u95ED\u3002\u4EC5\u5F53\u7528\u6237\u901A\u8FC7\u70B9\u51FB\u5173\u95ED\u56FE\u6807\u6216\u70B9\u51FB\u906E\u7F69\u5C42\u5173\u95ED\u5F39\u7A97\u65F6\u8D77\u6548\u3002\u5982\u679C\u4F60\u5728\u5F39\u7A97\u5E95\u90E8\u91CC,\u6DFB\u52A0\u4E86\u7528\u4E8E\u5173\u95ED\u5F39\u7A97\u7684\u6309\u94AE\uFF0C\u90A3\u4E48\u53EF\u4EE5\u5728\u6309\u94AE\u7684\u70B9\u51FB\u4E8B\u4EF6\u91CC\u52A0\u5165\u76F8\u5173\u903B\u8F91\u5904\u7406",effect:"light",placement:"top"}},[t("query-script",{attrs:{options:e.options.before_close},on:{change:e.changeFormDialog},model:{value:e.form_dialog,callback:function(i){e.form_dialog=i},expression:"form_dialog"}})],1)],1),t("el-form-item",{attrs:{label:"\u5173\u95ED\u4E8B\u4EF6"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5173\u95ED\u7684\u56DE\u8C03",effect:"light",placement:"top"}},[t("query-script",{attrs:{options:e.options.dialog_close},on:{change:e.changeFormDialog},model:{value:e.form_dialog,callback:function(i){e.form_dialog=i},expression:"form_dialog"}})],1)],1),t("el-form-item",{attrs:{label:"\u5173\u95ED\u540E\u4E8B\u4EF6"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5173\u95ED\u52A8\u753B\u7ED3\u675F\u65F6\u7684\u56DE\u8C03",effect:"light",placement:"top"}},[t("query-script",{attrs:{options:e.options.dialog_closed},on:{change:e.changeFormDialog},model:{value:e.form_dialog,callback:function(i){e.form_dialog=i},expression:"form_dialog"}})],1)],1),t("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(i){e.activeNames=i},expression:"activeNames"}},[t("el-collapse-item",{attrs:{name:"text"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"text"}}),t("span",{staticClass:"title-name"},[e._v("\u5F39\u7A97\u6807\u9898")])]),t("el-form-item",{attrs:{label:"\u6807\u9898\u6587\u672C"}},[t("el-input",{attrs:{placeholder:"\u6807\u9898\u6587\u672C\u5185\u5BB9"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.title.label,callback:function(i){e.$set(e.form_dialog.title,"label",i)},expression:"form_dialog.title.label"}})],1),t("el-form-item",{attrs:{label:"\u6807\u9898\u6837\u5F0F"}},[t("query-script",{attrs:{options:e.options.title_style},on:{change:e.changeFormDialog},model:{value:e.form_dialog.title,callback:function(i){e.$set(e.form_dialog,"title",i)},expression:"form_dialog.title"}})],1),e.form_dialog.showClose==!0?[t("el-divider",{attrs:{"content-position":"left"}},[t("el-tooltip",{attrs:{content:'\u9700\u8981\u5F00\u542F"\u5173\u95ED\u9500\u6BC1"\u914D\u7F6E\u9879\uFF0C\u4EE5\u4E0B\u914D\u7F6E\u9879\u624D\u80FD\u5B9E\u65F6\u751F\u6548',"open-delay":1e3,effect:"light",placement:"top"}},[t("el-badge",{attrs:{"is-dot":"",type:"warning"}},[e._v(" \u5173\u95ED\u6309\u94AE")])],1)],1),t("el-form-item",{attrs:{label:"\u81EA\u5B9A\u4E49\u6837\u5F0F"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.title.button_style_enable,callback:function(i){e.$set(e.form_dialog.title,"button_style_enable",i)},expression:"form_dialog.title.button_style_enable"}})],1),e.form_dialog.title.button_style_enable==!0?[t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.title.button_style_top,callback:function(i){e.$set(e.form_dialog.title,"button_style_top",i)},expression:"form_dialog.title.button_style_top"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.title.button_style_right,callback:function(i){e.$set(e.form_dialog.title,"button_style_right",i)},expression:"form_dialog.title.button_style_right"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u56FE\u6807"}},[t("el-icon",{attrs:{icon:e.form_dialog.title.button_style_icon},on:{"on-icon-change":e.onIconChange}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6309\u94AE\u989C\u8272"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.title.button_style_color,callback:function(i){e.$set(e.form_dialog.title,"button_style_color",i)},expression:"form_dialog.title.button_style_color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeFormDialog},model:{value:e.form_dialog.title.button_style_color,callback:function(i){e.$set(e.form_dialog.title,"button_style_color",i)},expression:"form_dialog.title.button_style_color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u5927\u5C0F"}},[t("el-input-number",{attrs:{placeholder:"\u6309\u94AE\u5927\u5C0F","controls-position":"right",step:.5,min:8,max:100},on:{change:e.changeFormDialog},model:{value:e.form_dialog.title.button_style_fontSize,callback:function(i){e.$set(e.form_dialog.title,"button_style_fontSize",i)},expression:"form_dialog.title.button_style_fontSize"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u6837\u5F0F"}},[t("query-script",{attrs:{options:e.options.title_button_style},on:{change:e.changeFormDialog},model:{value:e.form_dialog.title,callback:function(i){e.$set(e.form_dialog,"title",i)},expression:"form_dialog.title"}})],1)]:e._e()]:e._e()],2),t("el-collapse-item",{attrs:{name:"content"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"content"}}),t("span",{staticClass:"title-name"},[e._v("\u5F39\u7A97\u5185\u5BB9")])]),t("div",{staticClass:"form-container input-min"},[t("el-form-item",{attrs:{label:"\u5185\u5BB9\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{placeholder:"\u5185\u5BB9\u9AD8\u5EA6","controls-position":"right",step:1,min:0},on:{change:e.changeFormDialog},model:{value:e.form_dialog.container.height,callback:function(i){e.$set(e.form_dialog.container,"height",i)},expression:"form_dialog.container.height"}}),t("el-select",{staticClass:"unit-class",attrs:{placeholder:"\u5355\u4F4D"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.container.height_unit,callback:function(i){e.$set(e.form_dialog.container,"height_unit",i)},expression:"form_dialog.container.height_unit"}},[t("el-option",{attrs:{label:"px",value:"px"}}),t("el-option",{attrs:{label:"%",value:"%"}})],1)],1),e.form_dialog.container.height_unit=="%"?t("el-form-item",{attrs:{label:"\u6700\u5C0F\u9AD8\u5EA6"}},[t("el-input-number",{attrs:{min:0,step:1,"controls-position":"right",placeholder:"\u6700\u5C0F\u9AD8\u5EA6"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.container.height_min,callback:function(i){e.$set(e.form_dialog.container,"height_min",i)},expression:"form_dialog.container.height_min"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u6EDA\u52A8\u6761"}},[t("el-select",{attrs:{"popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9\u663E\u793A\u6EDA\u52A8\u6761"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.container.scrolling,callback:function(i){e.$set(e.form_dialog.container,"scrolling",i)},expression:"form_dialog.container.scrolling"}},e._l(e.scrollingList,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1)],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u6837\u5F0F"}},[t("query-script",{attrs:{options:e.options.container_style},on:{change:e.changeFormDialog},model:{value:e.form_dialog.container,callback:function(i){e.$set(e.form_dialog,"container",i)},expression:"form_dialog.container"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"\u5185\u5BB9\u9009\u62E9"}},[t("content-select",{attrs:{content:e.form_dialog.container.content},on:{changeContent:e.changeUrl}})],1),t("div",[t("div",{staticClass:"class_url",style:{width:e.form_dialog.container.url_param&&e.form_dialog.container.url_param.length>0?"calc(100% - 220px)":"calc(100% - 10px)"}},[t("label",{staticStyle:{"font-size":"14px",color:"#606266"}},[e._v("\u5185\u5BB9\u5730\u5740")]),t("warning-tooltip",{attrs:{content:"\u53EF\u7528${param}\u8BBE\u7F6E\u53C2\u6570"}}),t("el-input",{attrs:{type:"textarea",rows:e.form_dialog.container.url_param&&e.form_dialog.container.url_param.length>0?12:6,placeholder:"\u5185\u5BB9\u5730\u5740",disabled:e.selectContent},on:{input:e.changeUrl},model:{value:e.form_dialog.container.url,callback:function(i){e.$set(e.form_dialog.container,"url",i)},expression:"form_dialog.container.url"}})],1),e.form_dialog.container.url_param&&e.form_dialog.container.url_param.length>0||e.form_dialog.container.content&&e.form_dialog.container.content.type!="custom"&&e.form_dialog.container.url&&e.form_dialog.container.url!=""?t("div",{staticStyle:{float:"left",width:"215px"}},[t("div",{staticStyle:{height:"34px"}},[t("label",{staticStyle:{"wfont-size":"14px","line-height":"34px",color:"#606266",float:"left"}},[e._v("\u5185\u5BB9\u5730\u5740\u53C2\u6570\u53D8\u91CF")]),e.selectContent?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u5185\u5BB9\u5730\u5740\u53C2\u6570\u53D8\u91CF",effect:"light",placement:"top"}},[t("el-button",{staticClass:"add-url-param",attrs:{icon:"iconfont bi_add4",type:"text"},on:{click:e.addUrlParam}})],1):e._e()],1),e.form_dialog.container.url_param&&e.form_dialog.container.url_param.length>0?t("div",{staticStyle:{height:"270px","overflow-y":"auto"}},e._l(e.form_dialog.container.url_param,function(i,o){return t("el-collapse-item",{key:o},[t("template",{slot:"title"},[t("div",{staticStyle:{width:"100%"}},[t("span",{staticStyle:{float:"left","margin-left":"5px"}},[e._v(e._s(i.name))]),e.selectContent?t("el-button",{staticStyle:{color:"#f56c6c",float:"right","margin-right":"5px"},attrs:{icon:"iconfont bi_del",type:"text"},on:{click:function(n){return e.delUrlParam(o)}}}):e._e()],1)]),e.selectContent?t("el-form-item",{attrs:{label:"\u53C2\u6570\u53D8\u91CF\u540D"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u53C2\u6570\u53D8\u91CF\u540D"},on:{input:e.changeUrl},model:{value:i.name,callback:function(n){e.$set(i,"name",n)},expression:"param.name"}})],1):e._e(),t("el-form-item",{attrs:{label:"\u53C2\u6570\u53D8\u91CF\u503C\u7C7B\u578B"}},[t("el-select",{attrs:{"popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9\u53C2\u6570\u53D8\u91CF\u503C\u7C7B\u578B"},on:{input:e.changeUrl},model:{value:i.type,callback:function(n){e.$set(i,"type",n)},expression:"param.type"}},e._l(e.iframeUrlParamsTypeList,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1),i.type==e.globalEditor.iframeUrlParamsType.static.code?t("el-form-item",{attrs:{label:"\u56FA\u5B9A\u503C"}},[t("el-input",{attrs:{placeholder:"\u8F93\u5165\u56FA\u5B9A\u503C"},on:{input:e.changeUrl},model:{value:i.staticValue,callback:function(n){e.$set(i,"staticValue",n)},expression:"param.staticValue"}})],1):i.type==e.globalEditor.iframeUrlParamsType.globalParams.code?t("el-form-item",{attrs:{label:"\u5168\u5C40\u53D8\u91CF"}},[t("el-select",{attrs:{"popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9\u5168\u5C40\u53D8\u91CF\u53C2\u6570\u540D"},on:{input:e.changeUrl},model:{value:i.globalParamName,callback:function(n){e.$set(i,"globalParamName",n)},expression:"param.globalParamName"}},e._l(e.globalParamsList,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1):i.type==e.globalEditor.iframeUrlParamsType.row.code?t("el-form-item",{attrs:{label:"\u5B57\u6BB5\u540D\u79F0"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5F39\u7A97\u6253\u5F00\u65F6\uFF0C\u5FC5\u987B\u5DF2\u7ECF\u70B9\u51FB\u8FC7\u67D0\u4E00\u884C\uFF0C\u5B58\u5728\u5F53\u524D\u884C\u6570\u636E\u65F6\uFF0C\u624D\u80FD\u83B7\u53D6\u5230\u884C\u5185\u5B57\u6BB5\u7684\u6570\u636E",effect:"dark",placement:"top"}},[t("el-select",{attrs:{"popper-class":"white-bgc",placeholder:"\u8BF7\u9009\u62E9\u884C\u6570\u636E\u7684\u5B57\u6BB5\u540D\u79F0"},on:{input:e.changeUrl},model:{value:i.fieldName,callback:function(n){e.$set(i,"fieldName",n)},expression:"param.fieldName"}},e._l(e.fieldList,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1)],1):e._e()],2)}),1):e._e()]):e._e()]),e.form_dialog.container.url&&e.form_dialog.container.url!=""?[t("el-form-item",{attrs:{label:"\u76D1\u542CpostMessage"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.container.listener_postMessage_enabled,callback:function(i){e.$set(e.form_dialog.container,"listener_postMessage_enabled",i)},expression:"form_dialog.container.listener_postMessage_enabled"}})],1),e.form_dialog.container.listener_postMessage_enabled==!0?[t("el-form-item",{attrs:{label:"\u57DF\u540D\u8FC7\u6EE4"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u53EA\u63A5\u6536\u7279\u5B9A\u57DF\u540D\u7684\u6D88\u606F\uFF0C'*'\u8868\u793A\u4EFB\u610F\u57DF\u540D",effect:"dark",placement:"top"}},[t("el-input",{on:{change:e.changeFormDialog},model:{value:e.form_dialog.container.origin,callback:function(i){e.$set(e.form_dialog.container,"origin",i)},expression:"form_dialog.container.origin"}})],1)],1),t("el-form-item",{attrs:{label:"\u4E8B\u4EF6\u811A\u672C"}},[t("query-script",{attrs:{options:e.options.postMessage},on:{change:e.changeFormDialog},model:{value:e.form_dialog.container,callback:function(i){e.$set(e.form_dialog,"container",i)},expression:"form_dialog.container"}})],1)]:e._e()]:e._e()],2),t("el-collapse-item",{attrs:{name:"footer"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"footer"}}),t("span",{staticClass:"title-name"},[e._v("\u5F39\u7A97\u5E95\u90E8")])]),t("el-form-item",{attrs:{label:"\u6309\u94AE\u4F4D\u7F6E"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u5BF9\u9F50\u65B9\u5F0F","popper-class":"white-bgc"},on:{change:e.changeFormDialog},model:{value:e.form_dialog.footer.align,callback:function(i){e.$set(e.form_dialog.footer,"align",i)},expression:"form_dialog.footer.align"}},e._l(e.global_query.text_position_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u5E95\u90E8\u6837\u5F0F"}},[t("query-script",{attrs:{options:e.options.footer_style},on:{change:e.changeFormDialog},model:{value:e.form_dialog.footer,callback:function(i){e.$set(e.form_dialog,"footer",i)},expression:"form_dialog.footer"}})],1)],1)],1)],1)],1)]),t("el-tab-pane",{attrs:{label:"\u6309\u94AE\u914D\u7F6E"}},[t("div",{staticClass:"content top-bannner"},[t("div",{staticClass:"my-top-info"},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5DE6\u4FA7\u9009\u4E2D\u7684\u5F39\u7A97",effect:"light",placement:"top"}},[t("label",{staticStyle:{"font-weight":"bolder",color:"#616266"}},[e._v("\u5F53\u524D\u5F39\u7A97\uFF1A"+e._s(e.form_dialog.name))])])],1),t("div",{staticClass:"my-top-cont"},[t("el-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:e.addButton}},[e._v(" \u6DFB\u52A0\u6309\u94AE")])],1)]),t("div",{staticClass:"my-design-dialog-content",style:{height:e.card_height-100+"px"}},[t("el-collapse",{staticStyle:{"margin-left":"10px","margin-top":"10px"},on:{change:e.buttonsHandleChange},model:{value:e.buttonsActiveNames,callback:function(i){e.buttonsActiveNames=i},expression:"buttonsActiveNames"}},[t("el-form",{ref:"form",staticStyle:{margin:"10px"},attrs:{model:e.form_dialog,inline:!0,size:"mini"}},e._l(e.button_list,function(i,o){return t("el-collapse-item",{key:o,attrs:{name:i.guid}},[t("template",{slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:i.guid}}),t("label",{staticStyle:{"font-weight":"bolder"}},[e._v(" "+e._s(i.name))]),t("div",{staticStyle:{position:"absolute",right:"20px"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u6309\u94AE",effect:"light",placement:"top"}},[t("i",{staticClass:"iconfont bi_trash3",staticStyle:{"margin-right":"5px",color:"#f56c6c"},on:{click:function(n){return e.buttonRemove(i)}}})]),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6309\u94AE\u5411\u524D\u79FB\u52A8",effect:"light",placement:"top"}},[t("i",{staticClass:"iconfont bi_prev1",staticStyle:{"margin-right":"5px",color:"#409eff"},on:{click:function(n){return e.buttonUp(i)}}})]),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6309\u94AE\u5411\u540E\u79FB\u52A8",effect:"light",placement:"top"}},[t("i",{staticClass:"iconfont bi_next2",staticStyle:{"margin-right":"10px",color:"#409eff"},on:{click:function(n){return e.buttonDown(i)}}})])],1)]),t("div",{staticClass:"form-container input-min"},[t("el-form-item",{attrs:{label:"\u6309\u94AE\u540D\u79F0"}},[t("el-input",{on:{change:e.changeFormDialog},model:{value:i.name,callback:function(n){e.$set(i,"name",n)},expression:"item.name"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u6587\u672C"}},[t("el-input",{on:{change:e.changeFormDialog},model:{value:i.label,callback:function(n){e.$set(i,"label",n)},expression:"item.label"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u5C3A\u5BF8"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u5C3A\u5BF8","popper-class":"white-bgc"},on:{change:e.changeFormDialog},model:{value:i.size,callback:function(n){e.$set(i,"size",n)},expression:"item.size"}},e._l(e.global_query.size_list,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u6837\u5F0F"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u6837\u5F0F","popper-class":"white-bgc"},on:{change:e.changeFormDialog},model:{value:i.style,callback:function(n){e.$set(i,"style",n)},expression:"item.style"}},e._l(e.style_list,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{step:1,min:0,"controls-position":"right"},on:{change:e.changeFormDialog},model:{value:i.width,callback:function(n){e.$set(i,"width",n)},expression:"item.width"}})],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{placeholder:"\u6309\u94AE\u989C\u8272"},on:{change:e.changeFormDialog},model:{value:i.backgroundColor,callback:function(n){e.$set(i,"backgroundColor",n)},expression:"item.backgroundColor"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeFormDialog},model:{value:i.backgroundColor,callback:function(n){e.$set(i,"backgroundColor",n)},expression:"item.backgroundColor"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u6587\u672C\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{placeholder:"\u6309\u94AE\u6587\u672C\u989C\u8272"},on:{change:e.changeFormDialog},model:{value:i.color,callback:function(n){e.$set(i,"color",n)},expression:"item.color"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:e.global_query.predefineColors},on:{change:e.changeFormDialog},model:{value:i.color,callback:function(n){e.$set(i,"color",n)},expression:"item.color"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"\u6309\u94AE\u56FE\u6807"}},[t("el-icon",{on:{"on-icon-change":e.changeFormDialog},model:{value:i.icon,callback:function(n){e.$set(i,"icon",n)},expression:"item.icon"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:i.icon&&i.icon!="",expression:"item.icon && item.icon != ''"}],attrs:{label:"\u56FE\u6807\u5BF9\u9F50"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u56FE\u6807\u5BF9\u9F50\u65B9\u5F0F","popper-class":"white-bgc"},on:{change:e.changeFormDialog},model:{value:i.icon_align,callback:function(n){e.$set(i,"icon_align",n)},expression:"item.icon_align"}},e._l(e.global_query.button_align_list,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}),1)],1),t("div",{staticClass:"form-container button-min"},[t("el-form-item",{attrs:{label:"\u662F\u5426\u9690\u85CF"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:i.hide,callback:function(n){e.$set(i,"hide",n)},expression:"item.hide"}})],1),t("el-form-item",{attrs:{label:"\u662F\u5426\u7981\u7528"}},[t("el-switch",{on:{change:e.changeFormDialog},model:{value:i.disabled,callback:function(n){e.$set(i,"disabled",n)},expression:"item.disabled"}})],1),t("el-form-item",{attrs:{label:"\u70B9\u51FB\u4E8B\u4EF6\u811A\u672C","label-width":"100px"}},[t("query-script",{attrs:{options:e.options.footer_button_click},on:{change:e.changeFormDialog},model:{value:e.button_list[o],callback:function(n){e.$set(e.button_list,o,n)},expression:"button_list[index]"}})],1)],1)],2)}),1)],1)],1)])],1)],1)],1)],1)},eo=[],to=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{width:"100%"}},[t("el-radio-group",{on:{change:e.changeType},model:{value:e.content.type,callback:function(i){e.$set(e.content,"type",i)},expression:"content.type"}},[t("el-radio",{attrs:{label:"board"}},[e._v("\u770B\u677F")]),e.isPlatform?t("el-radio",{attrs:{label:"form"}},[e._v("\u8868\u5355")]):e._e(),t("el-radio",{attrs:{label:"queryList"}},[e._v("\u67E5\u8BE2\u5217\u8868")]),t("el-radio",{attrs:{label:"custom"}},[e._v("\u81EA\u5B9A\u4E49")])],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.content.type!="custom",expression:"content.type != 'custom'"}],staticStyle:{width:"100%",height:"50px","line-height":"50px"}},[t("label",{staticStyle:{"margin-right":"10px",color:"#606266"}},[e._v(e._s(e.typeName))]),t("el-input",{staticStyle:{width:"250px"},attrs:{"suffix-icon":e.boardDialog||e.formDialog||e.queryDialog?"el-icon-arrow-up":"el-icon-arrow-down",placeholder:"\u8BF7\u9009\u62E9"+e.typeName,readonly:"",size:"mini"},nativeOn:{click:function(i){return e.selectContent.apply(null,arguments)}},model:{value:e.content.publishName,callback:function(i){e.$set(e.content,"publishName",i)},expression:"content.publishName"}}),t("el-tooltip",{attrs:{content:"\u6DFB\u52A0"+e.typeName,"open-delay":300,effect:"dark",placement:"top"}},[t("el-button",{staticStyle:{margin:"5px 0px 0px 10px"},attrs:{type:"text"},on:{click:e.addContent}},[t("i",{staticClass:"iconfont bi_add1",staticStyle:{color:"#67c23a"}})])],1),t("el-tooltip",{attrs:{content:"\u8BBE\u8BA1"+e.typeName,"open-delay":300,effect:"dark",placement:"top"}},[t("el-button",{staticStyle:{margin:"5px 0px 0px 10px"},attrs:{type:"text"},on:{click:e.designContent}},[t("i",{staticClass:"iconfont bi_design"})])],1)],1),t("el-dialog",{staticClass:"my-dialog",staticStyle:{padding:"0px"},attrs:{title:"\u9009\u62E9"+e.typeName,top:"10px","append-to-body":!0,"close-on-click-modal":!1,visible:e.boardDialog,width:"1250px"},on:{"update:visible":function(i){e.boardDialog=i}}},[t("div",[t("board-publish-list",{ref:"boardPublish"})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.cancelBoard}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getBoardLast}},[e._v("\u4F7F\u7528\u6700\u65B0\u7248\u672C")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getBoard}},[e._v("\u786E \u5B9A")])],1)]),t("el-dialog",{staticClass:"my-dialog",staticStyle:{padding:"0px"},attrs:{title:"\u9009\u62E9"+e.typeName,top:"10px","append-to-body":!0,"close-on-click-modal":!1,visible:e.formDialog,width:"1250px"},on:{"update:visible":function(i){e.formDialog=i}}},[t("div",[t("publish-list-form",{ref:"formPublish"})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.cancelForm}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getFormLast}},[e._v("\u4F7F\u7528\u6700\u65B0\u7248\u672C")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getForm}},[e._v("\u786E \u5B9A")])],1)]),t("el-dialog",{staticClass:"my-dialog",staticStyle:{padding:"0px"},attrs:{title:"\u9009\u62E9"+e.typeName,top:"10px","append-to-body":!0,"close-on-click-modal":!1,visible:e.queryDialog,width:"1250px"},on:{"update:visible":function(i){e.queryDialog=i}}},[t("div",[t("publish-list-query",{ref:"queryPublish"})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.cancelQuery}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getQueryLast}},[e._v("\u4F7F\u7528\u6700\u65B0\u7248\u672C")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getQuery}},[e._v("\u786E \u5B9A")])],1)]),t("el-dialog",{ref:"addDialog",staticClass:"add-dialog",attrs:{"append-to-body":"",visible:e.addDialog,"close-on-click-modal":!1,title:"\u65B0\u5EFA"+e.typeName,width:"680px"},on:{"update:visible":function(i){e.addDialog=i}}},[t("el-form",{ref:"addform",staticClass:"add-form",attrs:{model:e.docData,rules:e.rules,size:"mini","label-width":"110px"}},[t("el-form-item",{attrs:{label:e.typeName+"\u540D\u79F0",prop:"docName"}},[t("el-input",{attrs:{maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0","show-word-limit":""},model:{value:e.docData.docName,callback:function(i){e.$set(e.docData,"docName",i)},expression:"docData.docName"}})],1),t("el-form-item",{attrs:{label:e.typeName+"\u5206\u7EC4",prop:"groupName"}},[t("el-select",{ref:"refSelect",staticClass:"white-bgc",staticStyle:{width:"100%"},attrs:{value:e.docData.groupName,"popper-class":"gisq-form-select","popper-append-to-body":!1,placeholder:"\u8BF7\u9009\u62E9\u4E0B\u62C9\u7684\u5206\u7EC4","allow-create":"",filterable:"","default-first-option":""},on:{"visible-change":e.visibleChange,change:e.selectChange}},[t("el-option",{staticStyle:{height:"auto"},attrs:{value:e.docData.groupId||"groupId",label:e.docData.groupName}},[t("el-tree",{ref:"groupTree",attrs:{data:e.groupTreeData,props:e.defaultProps,"node-key":"groupId","default-expand-all":!0,"highlight-current":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick2}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u63CF\u8FF0",prop:"docDesc"}},[t("el-input",{attrs:{type:"textarea",rows:5,maxlength:"200","show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0"},model:{value:e.docData.docDesc,callback:function(i){e.$set(e.docData,"docDesc",i)},expression:"docData.docDesc"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.addClose}},[e._v("\u53D6\u6D88")]),t("el-button",{staticStyle:{background:"rgb(85, 124, 236)",color:"rgb(255, 255, 255)"},attrs:{size:"mini",type:"primary"},on:{click:e.addDefine}},[e._v("\u786E\u5B9A")])],1)],1)],1)},io=[],_e=c(935051),yt=c(987711),ao=c(766941),vt=c(853762),oo=c(126711),ro=c(545373),no=function(){var e=this,t=e._self._c;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{border:"1px solid #eee",margin:"0px 5px 5px 5px"}},[t("el-aside",{staticStyle:{"border-right":"1px solid #eee",width:"300px"}},[t("div",{staticStyle:{"line-height":"50px",width:"280px","padding-left":"10px"}},[t("el-input",{staticStyle:{width:"270px","margin-right":"10px"},attrs:{placeholder:"\u8F93\u5165\u67E5\u8BE2\u5217\u8868\u5206\u7EC4\u540D\u79F0\u6216\u67E5\u8BE2\u5217\u8868\u540D\u79F0","prefix-icon":"el-icon-search",size:"small",clearable:""},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.initAllQueryListGroup.apply(null,arguments)}},model:{value:e.filterText,callback:function(i){e.filterText=i},expression:"filterText"}})],1),t("div",{staticStyle:{"overflow-y":"auto"},style:{height:e.divH+"px"}},[t("el-tree",{ref:"tree",attrs:{data:e.queryTreeData,props:e.defaultProps,"filter-node-method":e.filterNode,"current-node-key":e.defaultNode,"highlight-current":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{staticClass:"custom-tree-node"},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5206\u7EC4 [ "+i.label+" ]",effect:"dark",placement:"top"}},[o.type=="group"?t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})]),e._v(" "+e._s(i.label)+" ")]):e._e()]),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u67E5\u8BE2\u5217\u8868 [ "+i.label+" ]",effect:"dark",placement:"top"}},[o.type=="query"?t("span",[t("i",{staticClass:"iconfont bi_dashboard",style:{color:e.theme.btn_bgc,fontSize:"16px"}}),e._v(e._s(i.label))]):e._e()])],1)}}])})],1)]),t("el-container",[t("el-tabs",{staticClass:"my-tabs",style:{height:e.divH+"px"},model:{value:e.activeName,callback:function(i){e.activeName=i},expression:"activeName"}},[e._l(e.global.editTypeList,function(i,o){return t("el-tab-pane",{key:o,staticClass:"tab-pane",attrs:{label:i.label,name:i.value}},[t("div",{staticClass:"my-list-top"},[t("el-input",{staticStyle:{width:"300px","margin-left":"15px","margin-right":"15px"},attrs:{placeholder:"\u8BF7\u8F93\u5165\u7248\u672C\u540D\u79F0\u6216\u7248\u672CID",clearable:"","suffix-icon":"el-icon-search",size:"mini"},model:{value:e.searchKey,callback:function(n){e.searchKey=n},expression:"searchKey"}}),t("el-button",{attrs:{type:e.publishTemplate.isLast==!0&&e.publishTemplate.publishType==e.activeName?"success":"primary",round:"",disabled:e.disabled,size:"mini"},on:{click:e.useLast}},[e._v(" \u59CB\u7EC8\u4F7F\u7528\u6700\u65B0\u7248\u672C ")])],1),t("div",{staticClass:"my-publish-list",style:{height:e.divH-65+"px"}},[t("div",{staticClass:"my-card"},e._l(e.list,function(n,d){return t("div",{key:d,ref:"publish_"+n.publishId,refInFor:!0,staticStyle:{position:"relative","margin-top":"10px"},on:{click:function(g){return e.onSelectPublish(n)},mouseenter:function(g){return e.onMouseEnter(n.publishId)},mouseleave:function(g){return e.onMouseLeave(n.publishId)}}},[t("el-card",{staticClass:"my-card-content",style:{border:e.publishTemplate.publishId==n.publishId?"1px solid #108CEE":"1px solid #ebeef5"}},[t("div",{staticClass:"clearFix",staticStyle:{width:"70%"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:n.publishName,effect:"dark",placement:"top"}},[t("span",{staticClass:"span-weight",staticStyle:{width:"65%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"inline-block","line-height":"30px"}},[e._v(" "+e._s(n.publishName)+" ")])]),d==0?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6700\u65B0\u7248\u672C",effect:"dark",placement:"top"}},[t("div",{staticStyle:{height:"30px",color:"#ff5e67","vertical-align":"top",padding:"0 3px","line-height":"30px",border:"1px solid #fdd6d5","background-color":"#ffeef0","border-radius":"16px",float:"right","margin-right":"11%"}},[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#bi_new"}})]),t("span",[e._v("\u6700\u65B0")])])]):e._e()],1),t("div",{staticClass:"publishCard"},[[t("el-tabs",{attrs:{value:"img",type:"card"}},[t("el-tab-pane",{staticClass:"pane_img",attrs:{name:"img"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"iconfont bi-iconfont",staticStyle:{"font-size":"20px"}},[e._v("\uE6FE")])]),t("div",{staticClass:"image"},[t("img",{staticStyle:{"margin-left":"auto","margin-right":"auto"},attrs:{src:n.publishImg||c(415865),width:"310px",height:"180px"}})])]),t("el-tab-pane",{staticClass:"pane_information",attrs:{name:"information"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"iconfont bi-iconfont",staticStyle:{"font-size":"20px"}},[e._v("\uE6FB")])]),t("el-form",{attrs:{model:n,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"\u53D1\u5E03\u65F6\u95F4:"}},[t("span",{staticClass:"span-weight"},[e._v(e._s(e.parseDate(n.createdTime)))])]),t("el-form-item",{attrs:{label:"\u66F4\u65B0\u65F6\u95F4:"}},[t("span",{staticClass:"span-weight"},[e._v(e._s(e.parseDate(n.updatedTime)))])]),t("el-form-item",{attrs:{label:"\u53D1\u5E03\u7C7B\u578B:"}},[t("span",{staticClass:"span-weight"},[e._v(e._s(e.getEditType(n.publishType)))])]),t("el-form-item",{attrs:{label:"\u5206\u8FA8\u7387:"}},[t("span",{staticClass:"span-weight"},[e._v(e._s(e.screen(n.publishDesc)))])])],1)],1)],1)]],2)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.publishTemplate.publishId==n.publishId,expression:"publishTemplate.publishId == item.publishId"}],staticClass:"my-card-select"},[t("i",{staticClass:"iconfont bi-iconfont",staticStyle:{"font-size":"20px",color:"#fff","line-height":"20px"}},[e._v("\uE6DE")])])],1)}),0)])])}),t("div",[e._v(" \u5DF2\u9009[ "),t("span",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s(e.publishTypeName))]),e._v("]\uFF1A"),t("span",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s(e.publishTemplate.publishName))])])],2)],1)],1)},lo=[],so={name:"PublishListQuery",data(){return{global:this.$$global,loading:!1,filterText:"",activeName:"public",queryListId:"",applicationId:"",queryListName:"",searchKey:"",divH:"0",defaultProps:{children:"children",id:"id",label:"label"},defaultNode:"",queryGroupList:[],queryList:[],queryTreeData:[],publishList:[],publishTemplate:{isLast:null,queryListId:"",applicationId:"",publishId:"",publishName:"",publishType:""},queryListPublishList:[]}},computed:{list:function(){return this.getListByType(this.searchKey,this.activeName)},disabled:function(){return!(this.list&&this.list.length>0&&this.queryListId&&this.queryListId!="")},publishTypeName:function(){let a=this.global.editType[this.publishTemplate.publishType];return a?a.name:""}},watch:{filterText(a){this.$refs.tree.filter(a)},activeName(){this.getPublishList(this.queryListId)}},mounted(){this.divH=window.innerHeight-240},methods:{initQueryListTree(){this.loading=!0,ie.y.getQueryListTreeForAuthor("''").then(a=>{this.loading=!1,a&&a.status==200?(this.queryListPublishList=a.data.queryListPublishList,this.handleTreeData(a.data)):C.Message.error({message:a.msg,offset:60})})},handleTreeData(a){this.queryGroupList=a.queryListGroupList,this.queryListList=a.queryListList,this.queryTreeData=this.rebuildData(),this.getPublishList(this.queryListId),this.defaultNode=this.queryListId,this.$refs.tree.setCurrentKey(this.queryListId)},handleNodeClick(a){a.type=="query"&&(this.queryListId=a.queryListId,this.applicationId=a.applicationId,this.queryListName=a.queryListName,this.getPublishList(this.queryListId),this.clearSelectQueryList())},initAllQueryListGroup(){},getPublishList(a){this.publishList=[];for(let e=0;e<this.queryListPublishList.length;e++)a==this.queryListPublishList[e].queryListId&&this.activeName==this.queryListPublishList[e].publishType&&this.publishList.push(this.queryListPublishList[e]);this.$nextTick(()=>{this.$refs.tree.setCurrentKey(a)})},getListByType(a,e){let t=[];return a==""||a==null?t=this.$$lib__.filter(this.publishList,i=>i.publishType==e):t=this.$$lib__.filter(this.publishList,i=>i.publishType==e&&(i.publishName.indexOf(a)>-1||i.publishId==a)),this.$$lib__.sortBy(t,"createdTime").reverse()},useLast(a){if(!this.queryListId||this.queryListId=="")return C.Message.error({message:"\u8BF7\u5148\u5728\u5DE6\u4FA7\u9009\u62E9\u67E5\u8BE2\u5217\u8868\uFF0C\u624D\u80FD\u4F7F\u7528\u6700\u65B0\u7248\u672C\u529F\u80FD",offset:60}),!1;if(!this.list?.length>0)return C.Message.error({message:"\u8BF7\u5148\u53D1\u5E03\u67E5\u8BE2\u5217\u8868",offset:60}),!1;if(this.publishTemplate.isLast==!0&&!a)this.clearSelectQueryList();else return this.publishTemplate.isLast=!0,this.publishTemplate.queryListId=this.queryListId,this.publishTemplate.applicationId=this.applicationId,this.publishTemplate.publishId="",this.publishTemplate.publishName=this.queryListName+">\u6700\u65B0\u7248\u672C",this.publishTemplate.publishType=this.activeName,!0},onSelectPublish(a){this.publishTemplate.publishId!=a.publishId?(this.publishTemplate.isLast=null,this.publishTemplate.applicationId=a.applicationId,this.publishTemplate.queryListId=a.queryListId,this.publishTemplate.publishId=a.publishId,this.publishTemplate.publishName=this.queryListName+">"+a.publishName,this.publishTemplate.publishType=a.publishType):this.clearSelectQueryList()},onMouseEnter(a){let e=this.$refs["publish_"+a];e[0].children[0].style.backgroundColor="rgba(0,0,0,0.1)",e[0].children[0].style.filter="Alpha(Opacity=60)",e[0].children[0].style.border="1px solid #108CEE"},onMouseLeave(a){let e=this.$refs["publish_"+a];e[0].children[0].style.backgroundColor="transparent",e[0].children[0].style.filter="",e[0].children[0].style.border="1px solid rgba(0,0,0,0)",this.publishTemplate.publishId==a&&(e[0].children[0].style.border="1px solid #108CEE")},getSelectQueryList(){return this.publishTemplate},setSelectQueryList(a){this.publishTemplate.isLast=a.isLast,this.publishTemplate.queryListId=a.queryListId,this.publishTemplate.applicationId=a.applicationId,this.publishTemplate.publishId=a.publishId,this.publishTemplate.publishName=a.publishName,this.publishTemplate.publishType=a.publishType,this.queryListId=a.queryListId,this.applicationId=a.applicationId,this.initQueryListTree()},parseDate(a){return j.formatDate(new Date(a),"")},getEditType(a){return this.global.editType[a].name},screen(a){if(!a)return;let e=JSON.parse(a).canvasSetting;if(!e)return"";let t=e.width,i=e.height;return t&&i?t+" x "+i:""},filterNode(a,e){return a?e.name.indexOf(a)!==-1||e.queryListId==a:!0},clearSelectQueryList(){this.publishTemplate.isLast=null,this.publishTemplate.queryListId="",this.publishTemplate.applicationId="",this.publishTemplate.publishId="",this.publishTemplate.publishName="",this.publishTemplate.publishType=""},rebuildData(){let a={},e={},t=[];return this.$$lib__.each(this.queryListList,i=>{a[i.queryListGroupId]||(a[i.queryListGroupId]=[]),i.id=i.queryListId,i.label=i.queryListName,i.name=i.queryListName,i.type="query",a[i.queryListGroupId].push(i)}),this.$$lib__.each(this.queryGroupList,i=>{i.id=i.groupId,i.label=i.groupName,i.name=i.groupName,i.type="group",i.parentId!=null&&i.parentId!=""?(e[i.parentId]||(e[i.parentId]=[]),e[i.parentId].push(i)):t.push(i)}),this.transferFl(t,e,a),t},transferFl(a,e,t){this.$$lib__.each(a,i=>{let o=e[i.groupId];o?(i.children=o,t[i.groupId]&&this.$$lib__.each(t[i.groupId],n=>{i.children.push(n)}),this.transferFl(o,e,t)):t[i.groupId]&&(i.children=t[i.groupId])})}}},co=so,uo=(0,D.Z)(co,no,lo,!1,null,"12c1fd54",null),_o=uo.exports,fo=function(){var e=this,t=e._self._c;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{border:"1px solid #eee",margin:"0px 5px 5px 5px"}},[t("el-aside",{staticStyle:{"border-right":"1px solid #eee",width:"300px"}},[t("div",{staticStyle:{"line-height":"50px",width:"280px","padding-left":"10px"}},[t("el-input",{staticStyle:{width:"270px","margin-right":"10px"},attrs:{placeholder:"\u8F93\u5165\u8868\u5355\u5206\u7EC4\u540D\u79F0\u6216\u8868\u5355\u540D\u79F0","prefix-icon":"el-icon-search",size:"small",clearable:""},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.initAllFormGroup.apply(null,arguments)}},model:{value:e.filterText,callback:function(i){e.filterText=i},expression:"filterText"}})],1),t("div",{staticStyle:{"overflow-y":"auto"},style:{height:e.divH+"px"}},[t("el-tree",{ref:"tree",attrs:{data:e.formTreeData,props:e.defaultProps,"filter-node-method":e.filterNode,"current-node-key":e.defaultNode,"highlight-current":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{staticClass:"custom-tree-node"},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5206\u7EC4 [ "+i.label+" ]",effect:"dark",placement:"top"}},[o.type=="group"?t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})]),e._v(" "+e._s(i.label)+" ")]):e._e()]),t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u8868\u5355 [ "+i.label+" ]",effect:"dark",placement:"top"}},[o.type=="form"?t("span",[t("i",{staticClass:"iconfont bi_dashboard",style:{color:e.theme.btn_bgc,fontSize:"16px"}}),e._v(e._s(i.label))]):e._e()])],1)}}])})],1)]),t("el-container",[t("div",{staticStyle:{width:"100%"}},[t("div",{staticClass:"my-list-top"},[t("el-input",{staticStyle:{width:"300px","margin-left":"15px","margin-right":"15px"},attrs:{disabled:!0,placeholder:"\u8BF7\u8F93\u5165\u7248\u672C\u540D\u79F0\u6216\u7248\u672CID",clearable:"","suffix-icon":"el-icon-search",size:"mini"},model:{value:e.searchKey,callback:function(i){e.searchKey=i},expression:"searchKey"}}),t("el-button",{attrs:{type:e.publishTemplate.isLast==!0?"success":"primary",round:"",disabled:e.disabled,size:"mini"},on:{click:e.useLast}},[e._v(" \u59CB\u7EC8\u4F7F\u7528\u6700\u65B0\u7248\u672C ")])],1),t("div",{staticClass:"my-publish-list",style:{height:e.divH-10+"px"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"list.length > 0"}],staticClass:"my-card",style:{alignItems:"center",height:e.divH-15+"px"}},[e._v(" \u8BF7\u4F7F\u7528\u6700\u65B0\u7248\u672C ")]),t("div",{staticClass:"my-card",staticStyle:{display:"none"}},e._l(e.list,function(i,o){return t("div",{key:o,ref:"publish_"+i.publishId,refInFor:!0,staticStyle:{position:"relative","margin-top":"10px"},on:{click:function(n){return e.onSelectPublish(i)},mouseenter:function(n){return e.onMouseEnter(i.publishId)},mouseleave:function(n){return e.onMouseLeave(i.publishId)}}},[t("el-card",{staticClass:"my-card-content",style:{border:e.publishTemplate.publishId==i.publishId?"1px solid #108CEE":"1px solid #ebeef5"}},[t("div",{staticClass:"clearFix",staticStyle:{width:"70%"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:i.publishName,effect:"dark",placement:"top"}},[t("span",{staticClass:"span-weight",staticStyle:{width:"65%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"inline-block","line-height":"30px"}},[e._v(" "+e._s(i.publishName)+" ")])]),o==0?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6700\u65B0\u7248\u672C",effect:"dark",placement:"top"}},[t("div",{staticStyle:{height:"30px",color:"#ff5e67","vertical-align":"top",padding:"0 3px","line-height":"30px",border:"1px solid #fdd6d5","background-color":"#ffeef0","border-radius":"16px",float:"right","margin-right":"11%"}},[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#bi_new"}})]),t("span",[e._v("\u6700\u65B0")])])]):e._e()],1),t("div",{staticClass:"publishCard"},[[t("el-tabs",{attrs:{value:"img",type:"card"}},[t("el-tab-pane",{staticClass:"pane_img",attrs:{name:"img"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"iconfont bi-iconfont",staticStyle:{"font-size":"20px"}},[e._v("\uE6FE")])]),t("div",{staticClass:"image"},[t("img",{staticStyle:{"margin-left":"auto","margin-right":"auto"},attrs:{src:i.publishImg||c(415865),width:"310px",height:"180px"}})])]),t("el-tab-pane",{staticClass:"pane_information",attrs:{name:"information"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"iconfont bi-iconfont",staticStyle:{"font-size":"20px"}},[e._v("\uE6FB")])]),t("el-form",{attrs:{model:i,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"\u53D1\u5E03\u65F6\u95F4:"}},[t("span",{staticClass:"span-weight"},[e._v(e._s(e.parseDate(i.createdTime)))])]),t("el-form-item",{attrs:{label:"\u66F4\u65B0\u65F6\u95F4:"}},[t("span",{staticClass:"span-weight"},[e._v(e._s(e.parseDate(i.updatedTime)))])]),t("el-form-item",{attrs:{label:"\u63CF\u8FF0:"}},[t("span",{staticClass:"span-weight"},[e._v(e._s(i.publishDesc))])])],1)],1)],1)]],2)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.publishTemplate.publishId==i.publishId,expression:"publishTemplate.publishId == item.publishId"}],staticClass:"my-card-select"},[t("i",{staticClass:"iconfont bi-iconfont",staticStyle:{"font-size":"20px",color:"#fff","line-height":"20px"}},[e._v("\uE6DE")])])],1)}),0)]),t("div",[t("span",{staticStyle:{"margin-left":"10px"}},[e._v("\u5DF2\u9009\uFF1A")]),t("span",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s(e.publishTemplate.publishName))])])])])],1)},po=[],ho={name:"PublishListForm",data(){return{global:this.$$global,loading:!1,filterText:"",activeName:"public",formId:"",formCode:"",formName:"",applicationId:"",searchKey:"",divH:"0",defaultProps:{children:"children",id:"id",label:"label"},defaultNode:"",formGroupList:[],formList:[],formTreeData:[],publishList:[],publishTemplate:{isLast:null,formId:"",formCode:"",formName:"",applicationId:"",publishId:"",publishName:""}}},computed:{...(0,w.Se)(["getApplication"]),list:function(){return this.getListByType(this.searchKey,this.activeName)},disabled:function(){return!(this.list&&this.list.length>0&&this.formId&&this.formId!="")},publishTypeName:function(){let a=this.global.editType[this.publishTemplate.publishType];return a?a.name:""}},watch:{filterText(a){this.$refs.tree.filter(a)}},mounted(){this.divH=window.innerHeight-240},methods:{initAllFormGroup(){},initFormTree(){this.loading=!0,(0,_e.formGetRequest)("/gisqForm/api/formGroup/getAllByTree").then(a=>{this.loading=!1,a&&a.code===200&&(this.formGroupList=a.data,this.getFormList())})},getFormList(a){let e="";a&&a!=""?e="/gisqForm/api/form/getAllForm?groupId="+a:e="/gisqForm/api/form/getFormByApplicationId?ApplicationId="+this.getApplication.applicationId,(0,_e.formGetRequest)(e).then(t=>{t&&t.code===200&&(this.formList=t.data,this.formTreeData=this.rebuildData(),this.getPublishList(this.formId),this.$nextTick(()=>{this.$refs.tree.setCurrentKey(this.formId)}))})},handleNodeClick(a){a.type=="form"&&(this.formId=a.formId,this.formCode=a.formCode,this.formName=a.formName,this.applicationId=a.applicationId,this.getPublishList(this.formId),this.clearSelectForm())},getPublishList(a){this.publishList=[],!(!a||a=="")&&(this.loading=!0,(0,_e.formGetRequest)("/gisqForm/api/formPublish/getPublishByFormId?formId="+a).then(e=>{this.loading=!1,e&&e.code===200&&(this.publishList=e.data.data)}))},getListByType(a){let e=[];return e=this.$$lib__.filter(this.publishList,t=>(t.publishName="V"+t.version,!0)),a&&a!=""&&(e=this.$$lib__.filter(this.publishList,t=>t.publishName.indexOf(a)>-1||t.publishId==a)),e},useLast(a){if(!this.formId||this.formId=="")return C.Message.error({message:"\u8BF7\u5148\u5728\u5DE6\u4FA7\u9009\u62E9\u8868\u5355\uFF0C\u624D\u80FD\u4F7F\u7528\u6700\u65B0\u7248\u672C\u529F\u80FD",offset:60}),!1;if(!this.list?.length>0)return C.Message.error({message:"\u8BF7\u5148\u53D1\u5E03\u8868\u5355",offset:60}),!1;if(this.publishTemplate.isLast==!0&&!a)this.clearSelectForm();else return this.publishTemplate.isLast=!0,this.publishTemplate.formId=this.formId,this.publishTemplate.formCode=this.formCode,this.publishTemplate.formName=this.formName,this.publishTemplate.applicationId=this.applicationId,this.publishTemplate.publishId="",this.publishTemplate.publishName=this.formName+">\u6700\u65B0\u7248\u672C",!0},onSelectPublish(a){this.publishTemplate.publishId!=a.publishId?(this.publishTemplate.isLast=null,this.publishTemplate.applicationId=a.applicationId,this.publishTemplate.formId=a.formId,this.publishTemplate.formCode=a.formCode,this.publishTemplate.formName=a.formName,this.publishTemplate.publishId=a.publishId,this.publishTemplate.publishName=this.formName+">"+a.publishName):this.clearSelectForm()},onMouseEnter(a){let e=this.$refs["publish_"+a];e[0].children[0].style.backgroundColor="rgba(0,0,0,0.1)",e[0].children[0].style.filter="Alpha(Opacity=60)",e[0].children[0].style.border="1px solid #108CEE"},onMouseLeave(a){let e=this.$refs["publish_"+a];e[0].children[0].style.backgroundColor="transparent",e[0].children[0].style.filter="",e[0].children[0].style.border="1px solid rgba(0,0,0,0)",this.publishTemplate.publishId==a&&(e[0].children[0].style.border="1px solid #108CEE")},getSelectForm(){return this.publishTemplate},setSelectForm(a){this.publishTemplate.isLast=a.isLast,this.publishTemplate.formId=a.formId,this.publishTemplate.applicationId=a.applicationId,this.publishTemplate.publishId=a.publishId,this.publishTemplate.publishName=a.publishName,this.publishTemplate.publishType=a.publishType,this.formId=a.formId,this.applicationId=a.applicationId,this.initFormTree()},parseDate(a){let e="";return a&&a!=""&&(e=j.formatDate(new Date(a),"")),e},getEditType(a){return this.global.editType[a].name},filterNode(a,e){return a?e.name.indexOf(a)!==-1||e.formId==a:!0},clearSelectForm(){this.publishTemplate.isLast=null,this.publishTemplate.formId="",this.publishTemplate.applicationId="",this.publishTemplate.publishId="",this.publishTemplate.publishName=""},rebuildData(){let a={},e={},t=[];return this.$$lib__.each(this.formList,i=>{a[i.groupId]||(a[i.groupId]=[]),i.id=i.formId,i.label=i.formName,i.name=i.formName,i.type="form",a[i.groupId].push(i)}),this.$$lib__.each(this.formGroupList,i=>{i.id=i.groupId,i.label=i.groupName,i.name=i.groupName,i.type="group",i.parentId!=null&&i.parentId!=""?(e[i.parentId]||(e[i.parentId]=[]),e[i.parentId].push(i)):t.push(i)}),this.transferFl(t,e,a),t},transferFl(a,e,t){this.$$lib__.each(a,i=>{let o=e[i.groupId];o?(i.children=o,t[i.groupId]&&this.$$lib__.each(t[i.groupId],n=>{i.children.push(n)}),this.transferFl(o,e,t)):t[i.groupId]&&(i.children=t[i.groupId])})}}},go=ho,mo=(0,D.Z)(go,fo,po,!1,null,"67e4e192",null),bo=mo.exports;const Ne=()=>((1+Math.random())*4294967296|0).toString(16).substring(1);var yo={name:"ContentSelect",components:{BoardPublishList:ro.Z,PublishListQuery:_o,PublishListForm:bo},mixins:[oo.H],props:{content:{type:Object,default:()=>({type:"board",applicationId:"",groupId:"",groupName:"",contentCode:"",contentId:"",contentName:"",contentDesc:"",contentImg:"",publishType:"",publishId:"",publishName:"",publishUrl:"",isLast:!1})}},data(){return{boardDialog:!1,formDialog:!1,queryDialog:!1,addDialog:!1,defaultProps:{id:"groupId",children:"modelGroup",label:"groupName"},keyword:"",cardList:[],cardAll:[],groupTreeData:[],docData:{groupId:"",groupName:"",docName:"",docCode:"",docDesc:"",docImg:""},rules:{groupName:[{required:!0,message:"\u5206\u7EC4\u5FC5\u9009",trigger:"blur"}],docName:[{required:!0,max:50,message:"\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],docCode:[{required:!0,max:50,message:"\u7F16\u7801\u5FC5\u586B",trigger:"blur"}],docDesc:[{required:!1,max:200,message:"\u5B57\u7B26\u4E0A\u9650200",trigger:"blur"}]},isPlatform:window.bi.config.isPlatform}},computed:{...(0,w.Se)(["getApplication"]),typeName(){let a="";return this.content.type=="board"&&(a="\u770B\u677F"),this.content.type=="form"&&(a="\u8868\u5355"),this.content.type=="queryList"&&(a="\u67E5\u8BE2\u5217\u8868"),a}},watch:{},mounted(){},methods:{changeContent(){this.$emit("changeContent")},clearContent(){this.content.groupId="",this.content.groupName="",this.content.contentId="",this.content.contentCode="",this.content.contentName="",this.content.contentDesc="",this.content.contentImg="",this.content.applicationId="",this.content.publishType="",this.content.publishId="",this.content.publishName="",this.content.publishUrl="#",this.changeContent()},changeType(){this.clearContent("all")},selectContent(){let a=this;this.content.type=="board"&&(this.boardDialog=!0,setTimeout(function(){let e={};e.isLast=a.content.isLast,e.applicationId=a.content.applicationId,e.boardId=a.content.contentId,e.publishId=a.content.publishId,e.publishType=a.content.publishType,e.publishName=a.content.publishName,a.$refs.boardPublish.setSelectBoard(e)},500)),this.content.type=="form"&&(this.formDialog=!0,setTimeout(function(){let e={};e.isLast=a.content.isLast,e.applicationId=a.content.applicationId,e.formId=a.content.contentId,e.formCode=a.content.contentCode,e.formName=a.content.contentName,e.publishId=a.content.publishId,e.publishName=a.content.publishName,a.$refs.formPublish.setSelectForm(e)},500)),this.content.type=="queryList"&&(this.queryDialog=!0,setTimeout(function(){let e={};e.isLast=a.content.isLast,e.applicationId=a.content.applicationId,e.queryListId=a.content.contentId,e.publishId=a.content.publishId,e.publishType=a.content.publishType,e.publishName=a.content.publishName,a.$refs.queryPublish.setSelectQueryList(e)},500))},cancelBoard(){this.clearContent("form"),this.boardDialog=!1},getBoardLast(){this.$refs.boardPublish.useLast(!0)&&this.$nextTick(()=>{this.getBoard()})},getBoard(){let a=JSON.parse(JSON.stringify(this.$refs.boardPublish.getSelectBoard()));(a.publishId&&a.publishId!=""||a.boardId&&a.boardId!="")&&(this.content.isLast=a.isLast,this.content.applicationId=a.applicationId,this.content.contentId=a.boardId,this.content.publishId=a.publishId,this.content.publishType=a.publishType,this.content.publishName=a.publishName,this.content.isLast?this.content.publishUrl=this.getPublishLastUrl(this.content):this.content.publishUrl=this.getPublishUrl(this.content)),this.changeContent(),this.boardDialog=!1},cancelForm(){this.formDialog=!1,this.clearForm()},clearForm(){this.docData.groupId="",this.docData.groupName="",this.docData.docName="",this.docData.docCode="",this.docData.docDesc="",this.docData.docImg=""},getFormLast(){this.$refs.formPublish.useLast(!0)&&this.$nextTick(()=>{this.getForm()})},getForm(){let a=JSON.parse(JSON.stringify(this.$refs.formPublish.getSelectForm()));(a.publishId&&a.publishId!=""||a.formId&&a.formId!="")&&(this.content.isLast=a.isLast,this.content.applicationId=a.applicationId,this.content.contentId=a.formId,this.content.contentCode=a.formCode,this.content.contentName=a.formName,this.content.publishId=a.publishId,this.content.publishName=a.publishName,this.content.isLast?this.content.publishUrl=this.getPublishLastUrl(this.content):this.content.publishUrl=this.getPublishUrl(this.content)),this.changeContent(),this.formDialog=!1},cancelQuery(){this.queryDialog=!1},getQueryLast(){this.$refs.queryPublish.useLast(!0)&&this.$nextTick(()=>{this.getQuery()})},getQuery(){let a=JSON.parse(JSON.stringify(this.$refs.queryPublish.getSelectQueryList()));(a.publishId&&a.publishId!=""||a.queryListId&&a.queryListId!="")&&(this.content.isLast=a.isLast,this.content.applicationId=a.applicationId,this.content.contentId=a.queryListId,this.content.publishId=a.publishId,this.content.publishType=a.publishType,this.content.publishName=a.publishName,this.content.isLast?this.content.publishUrl=this.getPublishLastUrl(this.content):this.content.publishUrl=this.getPublishUrl(this.content)),this.changeContent(),this.queryDialog=!1},getPublishUrl(a){if(a.publishId=="")return;let e="";if(a.type=="board"){let t=S.Z.baseConfig.projectName+"/view.html?tp="+a.publishType+"&biPid="+a.publishId+"&appId="+a.applicationId;t+=j.getLoadUrlComponent(a.layoutJson),e=this.getOpenURL(t,this.getGlobalParams(a.layoutJson))}if(a.type=="form"&&(e="/gisqForm/view.html?publishId="+a.publishId+"&applicationId="+a.applicationId),this.content.type=="queryList"){let t=S.Z.baseConfig.projectName+"/query_view.html?queryPid="+a.publishId+"&appId="+a.applicationId+"&tp="+a.publishType;t+=j.getLoadUrlComponent(a.layoutJson),e=this.getOpenURL(t,this.getGlobalParams(a.layoutJson))}return e},getPublishLastUrl(a){if(a.contentId=="")return;let e="";if(a.type=="board"){let t=S.Z.baseConfig.projectName+"/view.html?tp="+a.publishType+"&biId="+a.contentId+"&appId="+a.applicationId;t+=j.getLoadUrlComponent(a.layoutJson),e=this.getOpenURL(t,this.getGlobalParams(a.layoutJson))}if(a.type=="form"&&(e="/gisqForm/view.html?formId="+a.contentId+"&formCode="+a.contentCode+"&formName="+a.contentName+"&applicationId="+a.applicationId),this.content.type=="queryList"){let t=S.Z.baseConfig.projectName+"/query_view.html?queryId="+a.contentId+"&appId="+a.applicationId+"&tp="+a.publishType;t+=j.getLoadUrlComponent(a.layoutJson),e=this.getOpenURL(t,this.getGlobalParams(a.layoutJson))}return e},getGroupTree(){this.groupTreeData=[],this.content.type=="board"?this.getBoardGroupTree():this.content.type=="form"?this.getFormGroupTree():this.content.type=="queryList"&&this.getQueryGroupTree()},getBoardGroupTree(){yt.U.getBoardGroupByUserId2(0).then(a=>{if(a&&a.status==200&&a.data){let e=[];for(let t in a.data)a.data[t].parentId==null&&(a.data[t].parentId="");if(this.isPlatform){for(let t=0;t<a.data.length;t++)if(a.data[t].groupType=="menu"){let i=this.boardGroupTree(a.data,a.data[t].groupId),o="";for(let d=0;d<a.data.length;d++)a.data[d].groupId==a.data[t].parentId&&(o=a.data[d].groupName);let n={};n.groupId=a.data[t].groupId,n.groupName=o,n.modelGroup=[],i.push(n),e=e.concat(i)}}else e=this.boardGroupTree(a.data,"");this.groupTreeData=e}else C.Message.error({message:a.msg,offset:60})})},boardGroupTree(a,e){let t=[];if(a){for(let i=0;i<a.length;i++)if(a[i].parentId==e){let o={};o.groupId=a[i].groupId,o.groupName=a[i].groupName,o.modelGroup=this.boardGroupTree(a,a[i].groupId),t.push(o)}}return t},getFormGroupTree(){(0,_e.formGetRequest)("/gisqForm/api/formGroup/getAllByTree").then(a=>{a&&a.code===200&&(a.data.length===0&&this.addFormTree(),this.groupTreeData=a.data)})},addFormTree(){const a=j.getStore("applicationInfo"),e=new FormData;e.append("groupCode",a.applicationId||Ne()),e.append("groupName",a.applicationName||"\u5728\u7EBF\u8868\u5355"),(0,_e.formPostRequest)("/gisqForm/api/formGroup/insert",e,{"Content-Type":"application/x-www-form-urlencoded"})},getQueryGroupTree(){vt.M.getQueryListGroupByUserId().then(a=>{a&&a.status==200&&a.data?this.groupTreeData=this.queryGroupTree(a.data,null):C.Message.error({message:a.msg,offset:60})})},queryGroupTree(a,e){let t=[];if(a){for(let i=0;i<a.length;i++)if(a[i].parentId==e){let o={};o.groupId=a[i].groupId,o.groupName=a[i].groupName,o.modelGroup=this.queryGroupTree(a,a[i].groupId),t.push(o)}}return t},visibleChange(a){a&&this.content&&this.content.groupId!=""&&this.$refs.groupTree.setCurrentKey(this.content.groupId)},selectChange(a){this.docData.groupId="",this.docData.groupName=a},handleNodeClick2(a){this.docData.groupId=a.groupId,this.docData.groupName=a.groupName,this.$refs.refSelect.blur()},addContent(){this.getGroupTree(),this.content.type=="board"&&(this.docData.docCode="board"+Ne()),this.content.type=="form"&&(this.docData.docCode="gisqBI"+Ne()),this.content.type=="queryList"&&(this.docData.docCode="queryList"+Ne()),this.addDialog=!0},addClose(){this.$refs.addform.resetFields(),this.addDialog=!1,this.clearForm()},addDefine(){this.content.type=="board"?this.addBoardDefine():this.content.type=="form"?this.addFormDefine():this.content.type=="queryList"&&this.addQueryDefine()},async addBoardDefine(){if(!await this.$refs.addform.validate())return;let e={boardId:"",boardGroupId:this.docData.groupId,boardGroupName:this.docData.groupName,boardCode:this.docData.docCode,boardName:this.docData.docName,boardDesc:this.docData.docDesc,boardImg:"",configJson:""};if(e.boardGroupId==""){let i={isTemplate:0,applicationId:this.getApplication.applicationId,groupId:"",groupName:e.boardGroupName,parentId:this.isPlatform?this.groupTreeData[this.groupTreeData.length-1].groupId:""};const o=await yt.U.save(i);if(o.status==200)e.boardGroupId=o.data;else{C.Message.error({message:"\u521B\u5EFA\u770B\u677F\u5206\u7EC4\u5931\u8D25",offset:60});return}}let t=this;ao.D.saveIsTemplate(e,0).then(i=>{i&&i.status==200?(C.Message.success({message:"\u65B0\u5EFA\u6210\u529F",offset:60}),this.addDialog=!1,t.content.contentId=i.data,t.designContent()):C.Message.error({message:i.msg?i.msg:"",offset:60}),t.addClose()})},async addFormDefine(){if(!await this.$refs.addform.validate())return;const e=new FormData;e.append("formId",this.docData.docId),this.isFindGroupName(this.groupTreeData,this.docData.groupName)&&e.append("groupId",this.docData.groupId),e.append("groupName",this.docData.groupName),e.append("formCode",this.docData.docCode),e.append("formName",this.docData.docName),e.append("formDesc",this.docData.docDesc),e.append("formImg",this.docData.docImg);const t=await(0,_e.formPostRequest)("/gisqForm/api/form/insert",e,{"Content-Type":"application/x-www-form-urlencoded"});t.data&&t.data.formId&&t.data.formId!=""?(C.Message.success({message:"\u65B0\u5EFA\u6210\u529F",offset:60}),this.addDialog=!1,this.content.contentCode=this.docData.docCode,this.content.contentId=t.data.formId,this.designContent()):C.Message.error({message:t.msg?t.msg:"",offset:60}),this.addClose()},isFindGroupName(a,e){for(let t=0;t<a.length;t++){if(a[t].groupName==e)return!0;a[t].modelGroup&&a[t].modelGroup.length>0&&this.isFindGroupName(a[t].modelGroup,e)}return!1},async addQueryDefine(){if(!await this.$refs.addform.validate())return;let e={queryListId:"",queryListGroupId:this.docData.groupId,queryListGroupName:this.docData.docName,queryListCode:this.docData.docCode,queryListName:this.docData.docName,queryListDesc:this.docData.docDesc,queryListImg:"",configJson:""};if(e.queryListGroupId==""){let i={applicationId:this.getApplication.applicationId,groupId:"",groupName:e.queryListGroupName,parentId:""};const o=await vt.M.save(i);if(o.status==200)e.queryListGroupId=o.data;else{C.Message.error({message:"\u521B\u5EFA\u67E5\u8BE2\u5217\u8868\u5206\u7EC4\u5931\u8D25",offset:60});return}}let t=this;ie.y.save(e).then(i=>{i&&i.status==200?(C.Message.success({message:"\u65B0\u5EFA\u6210\u529F",offset:60}),this.addDialog=!1,t.content.contentId=i.data,t.designContent()):C.Message.error({message:i.msg?i.msg:"",offset:60}),t.addClose()})},designContent(){if(this.content.contentId==""){this.$message.warning({message:"\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A"+this.typeName,offset:60});return}this.content.type=="board"?this.designBoard():this.content.type=="form"?this.designForm():this.content.type=="queryList"&&this.designQuery()},designBoard(){let a=location.origin+S.Z.baseConfig.projectName+"/editor.html?biId="+this.content.contentId+"&appId="+this.getApplication.applicationId+"&temp=0&groupType=",e={};window.open(this.getOpenURL(a,e))},designForm(){let a=`/gisqForm/editor.html?formCode=${this.content.contentCode}&formId=${this.content.contentId}&applicationId=${this.getApplication.applicationId}&formType=design&preview=true`;window.open(a)},designQuery(){let a=location.origin+S.Z.baseConfig.projectName+"/query_design.html?queryId="+this.content.contentId+"&appId="+this.getApplication.applicationId;window.open(this.getOpenURL(a,{}))}}},vo=yo,qo=(0,D.Z)(vo,to,io,!1,null,null,null),xo=qo.exports,Co={name:"DesignDialog",components:{WarningTooltip:v.Z,QueryScript:_.Z,ElIcon:lt.Z,ContentSelect:xo},mixins:[P],data(){return{globalEditor:this.$$global_editor,global_query:this.$$global_query,current_node_key:null,query_config_dialog:[],form_dialog:null,scrollingList:[{value:"yes",label:"\u663E\u793A"},{value:"no",label:"\u4E0D\u663E\u793A"},{value:"auto",label:"\u81EA\u52A8"}],style_list:[{value:"text",label:"\u6587\u672C"},{value:"plain",label:"\u6734\u7D20\u6309\u94AE"},{value:"round",label:"\u5706\u89D2\u6309\u94AE"},{value:"circle",label:"\u5706\u5F62\u6309\u94AE"}],defaultButton:{name:"\u5173\u95ED\u6309\u94AE",label:"\u5173\u95ED",size:"mini",style:"plain",align:"right",footer_button_click:`/**  \u53C2\u6570\u8BF4\u660E
 * dialog_config: \u5F53\u524D\u5F39\u7A97\u7684\u914D\u7F6E\u4FE1\u606F
 * button: \u5F53\u524D\u6309\u94AE\u7684\u914D\u7F6E\u4FE1\u606F
*/
// \u5173\u95ED\u5F53\u524D\u5F39\u7A97
this.doCloseDialog(dialog_config.guid);`},options:{dialog_open:{attribute_enable:"is_dialog_open",attribute_script_content:"dialog_open",title:"\u6253\u5F00\u4E8B\u4EF6",api:"api-dialog-events"},dialog_opened:{attribute_enable:"is_dialog_opened",attribute_script_content:"dialog_opened",title:"\u6253\u5F00\u540E\u4E8B\u4EF6",api:"api-dialog-events"},before_close:{attribute_enable:"is_before_close",attribute_script_content:"before_close",title:"\u5173\u95ED\u524D\u4E8B\u4EF6",api:"api-dialog-before-close"},dialog_close:{attribute_enable:"is_dialog_close",attribute_script_content:"dialog_close",title:"\u5173\u95ED\u4E8B\u4EF6",api:"api-dialog-events"},dialog_closed:{attribute_enable:"is_dialog_closed",attribute_script_content:"dialog_closed",title:"\u5173\u95ED\u540E\u4E8B\u4EF6",api:"api-dialog-events"},title_style:{attribute_enable:"is_title_style",attribute_script_content:"title_style",title:"\u6807\u9898\u6837\u5F0F",api:"api-dialog-style"},title_button_style:{attribute_enable:"is_title_button_style",attribute_script_content:"title_button_style",title:"\u6807\u9898\u6309\u94AE\u6837\u5F0F",api:"api-dialog-style"},container_style:{attribute_enable:"is_container_style",attribute_script_content:"container_style",title:"\u5185\u5BB9\u6837\u5F0F",api:"api-dialog-style"},footer_style:{attribute_enable:"is_footer_style",attribute_script_content:"footer_style",title:"\u5E95\u90E8\u6837\u5F0F",api:"api-dialog-style"},footer_button_click:{attribute_script_content:"footer_button_click",title:"\u5E95\u90E8\u6309\u94AE\u70B9\u51FB\u4E8B\u4EF6",api:"api-dialog-footer-button-click"},postMessage:{attribute_script_content:"script_listener_postMessage",title:"\u76D1\u542CpostMessage",api:"api-script-action",script_examples:`/* \u53EF\u7528\u53C2\u6570\u8BF4\u660E
  param\uFF1Aiframe\u53D1\u9001\u8FC7\u6765\u7684postMessage\u4FE1\u606F
  dialog_config\uFF1A\u5F53\u524D\u5F39\u7A97\u7684\u914D\u7F6E\u4FE1\u606F
*/

// \u5F53\u524D\u770B\u677F\u4E2D\u6240\u6709\u5F39\u7A97\u4FE1\u606F
console.info(this.dialog_list);
// \u8F93\u51FAiframe\u53D1\u9001\u8FC7\u6765\u7684\u6570\u636E
console.info(param.data)
// \u5173\u95ED\u5F53\u524D\u5F39\u7A97
this.closeDialog(dialog_config.guid);`,button_style:{color:"#409EFF"}}},activeNames:[],buttonsActiveNames:[],clickCollapseItem:{isClick:!1,buttonsActiveNamesTemp:[]}}},computed:{dialog_tree_data(){let a=this,e=[];return a.$$lib__.each(a.query_config_dialog,t=>{e.push({id:t.guid,label:t.title.label+"("+t.name+")",guid:t.guid})}),[{guid:"root",label:"\u5F39\u7A97",children:e}]},button_list(){return this.$$lib__.sortBy(this.form_dialog.button,"order")},iframeUrlParamsTypeList(){return[{value:this.globalEditor.iframeUrlParamsType.static.code,label:this.globalEditor.iframeUrlParamsType.static.name},{value:this.globalEditor.iframeUrlParamsType.globalParams.code,label:this.globalEditor.iframeUrlParamsType.globalParams.name},{value:this.globalEditor.iframeUrlParamsType.row.code,label:this.globalEditor.iframeUrlParamsType.row.name}]},globalParamsList(){let a=this,e=[];if(a.queryConfig.base&&a.queryConfig.base.global_params&&a.queryConfig.base.global_params.params)for(let t in a.queryConfig.base.global_params.params)e.push({value:t,label:t});return e},fieldList(){let a=[];return this.$$lib__.each(this.queryConfig.field,e=>{a.push({value:e.field,label:e.label})}),a},selectContent(){return this.form_dialog.container.content&&this.form_dialog.container.content.type!="custom"}},watch:{"queryConfig.dialog":{deep:!0,handler:function(){let a=JSON.parse(JSON.stringify(this.queryConfig.dialog));this.query_config_dialog=a,this.$$lib__.find(a,t=>t.guid==this.form_dialog.guid)||this.setDefaultFormDialog()}},dialog_tree_data:{deep:!0,handler:function(){this.form_dialog&&this.form_dialog.guid&&this.$nextTick(()=>{this.$refs.dialog_tree.setCurrentKey(this.form_dialog.guid)})}}},created(){this.setDefaultFormDialog()},methods:{...(0,w.nv)(["updateQueryConfigDialog"]),changeFormDialog(){if(this.query_config_dialog&&this.query_config_dialog.length>0){for(let a=0;a<this.query_config_dialog.length;a++)if(this.query_config_dialog[a].guid==this.form_dialog.guid){this.query_config_dialog[a]=JSON.parse(JSON.stringify(this.form_dialog)),this.changeQueryConfigDialog();break}}},buttonsHandleChange(){if(this.clickCollapseItem.isClick!=!0){let a=this.$refs.myDesignDialog.querySelectorAll(".bi_right");this.$$lib__.each(a,e=>{var t=this.$$lib__.find(this.buttonsActiveNames,i=>i==e.attributes.name.value);t?(e.style.transform==""||e.style.transform=="rotate(0deg)")&&(e.style.transform="rotate(-90deg)"):e.style.transform=="rotate(-90deg)"&&(e.style.transform="rotate(0deg)")})}else this.buttonsActiveNames=JSON.parse(JSON.stringify(this.clickCollapseItem.buttonsActiveNamesTemp)),this.clickCollapseItem.isClick=!1},handleChange(){let a=this.$refs.myDesignDialog.querySelectorAll(".bi_right");this.$$lib__.each(a,e=>{var t=this.$$lib__.find(this.activeNames,i=>i==e.attributes.name.value);t?(e.style.transform==""||e.style.transform=="rotate(0deg)")&&(e.style.transform="rotate(-90deg)"):e.style.transform=="rotate(-90deg)"&&(e.style.transform="rotate(0deg)")})},changeQueryConfigDialog(){this.updateQueryConfigDialog(this.query_config_dialog)},handleNodeClick(a){let e=this.$$lib__.find(this.query_config_dialog,t=>t.guid==a.guid);e&&(this.form_dialog=JSON.parse(JSON.stringify(e)),this.current_node_key=e.guid,this.getParams())},setDefaultFormDialog(){this.form_dialog=JSON.parse(JSON.stringify(this.defaultQueryConfig.dialog))},append(){let a=JSON.parse(JSON.stringify(this.defaultQueryConfig.dialog));a.guid=le().v4().replace(/-/g,""),a.center_vertically=!0,a.width=60,a.width_unit="%",a.container.height=60,a.container.height_unit="%",this.query_config_dialog.push(JSON.parse(JSON.stringify(a))),this.current_node_key=a.guid,this.form_dialog=JSON.parse(JSON.stringify(a)),this.changeQueryConfigDialog()},remove(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664[ "+a.label+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{if(this.query_config_dialog&&this.query_config_dialog.length>0){for(let e=0;e<this.query_config_dialog.length;e++)if(this.query_config_dialog[e].guid==a.guid){this.query_config_dialog.splice(e,1),this.form_dialog={},this.changeQueryConfigDialog();break}}}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},changeUrl(){this.getParams(),this.changeFormDialog()},getParams(){if(this.form_dialog.container.content){if(this.form_dialog.container.content.publishUrl=="#"&&(this.form_dialog.container.url="",this.form_dialog.container.url_param=[],this.form_dialog.container.content.publishUrl=""),this.form_dialog.container.content.type!="custom"&&(this.form_dialog.container.content.publishUrl!=""&&(this.form_dialog.container.url=this.form_dialog.container.content.publishUrl),this.form_dialog.container.url_param)){let n=this.form_dialog.container.url_param;for(let d=0;d<n.length;d++)this.form_dialog.container.url+="&"+n[d].name+"=${"+n[d].name+"}"}this.form_dialog.container.content.publishName==""&&this.form_dialog.container.url&&this.form_dialog.container.url!=""&&(this.form_dialog.container.content.type="custom")}else this.form_dialog.container.content={},this.form_dialog.container.content.type="custom";let a=this.form_dialog.container.url;if(a==null||a==""){this.form_dialog.container.url_param=[];return}let e=[];this.form_dialog.container.url_param&&(e=JSON.parse(JSON.stringify(this.form_dialog.container.url_param)));let t=[],i="\\$\\{(.*?)\\}",o=a.match(i);for(;o!=null;){if(!this.$$lib__.find(t,d=>o[1].trim()==d.name)){let d=this.$$lib__.find(e,g=>o[1].trim()==g.name);d?t.push(d):t.push({name:o[1].trim(),type:"static"})}a=o.input.replace(o[0],o[1]),o=a.match(i)}m.default.set(this.form_dialog.container,"url_param",JSON.parse(JSON.stringify(t))),this.setParamStyle()},addUrlParam(){let a=[];this.form_dialog.container.url_param?(a=this.form_dialog.container.url_param,a.push({name:"param"+a.length,type:"static"})):a=[{name:"param0",type:"static"}],this.form_dialog.container.url_param=[],m.default.set(this.form_dialog.container,"url_param",JSON.parse(JSON.stringify(a))),this.changeUrl()},delUrlParam(a){let e=[];if(this.form_dialog.container.url_param)for(let t=0;t<this.form_dialog.container.url_param.length;t++)t!=a&&e.push(this.form_dialog.container.url_param[t]);this.form_dialog.container.url_param=e,this.changeUrl()},setParamStyle(){this.form_dialog.container.url_param&&this.$nextTick(function(){let a="";this.form_dialog.container.url_param.length>0?a="right":a="left";let e=document.querySelectorAll(".add-url-param");if(e)for(let t=0;t<e.length;t++)e[t].style.float=a})},addButton(){let a=JSON.parse(JSON.stringify(this.defaultButton)),e=this.form_dialog.button.length;a.guid=le().v4().replace(/-/g,""),a.order=e>0?e+1:1,this.form_dialog.button.push(a),this.changeFormDialog()},buttonRemove(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664\u6309\u94AE[ "+a.name+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{if(this.form_dialog.button&&this.form_dialog.button.length>0){for(let e=0;e<this.form_dialog.button.length;e++)if(this.form_dialog.button[e].guid==a.guid){this.form_dialog.button.splice(e,1),this.changeFormDialog();break}}}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})}),this.clickCollapseItem.isClick=!0,this.clickCollapseItem.buttonsActiveNamesTemp=JSON.parse(JSON.stringify(this.buttonsActiveNames))},buttonUp(a){let e=a.order;this.$$lib__.each(this.form_dialog.button,t=>{t.order==e?t.order=e-1:t.order==e-1&&(t.order=e)}),this.clickCollapseItem.isClick=!0,this.clickCollapseItem.buttonsActiveNamesTemp=JSON.parse(JSON.stringify(this.buttonsActiveNames)),this.changeFormDialog()},buttonDown(a){let e=a.order;this.$$lib__.each(this.form_dialog.button,t=>{t.order==e?t.order=e+1:t.order==e+1&&(t.order=e)}),this.clickCollapseItem.isClick=!0,this.clickCollapseItem.buttonsActiveNamesTemp=JSON.parse(JSON.stringify(this.buttonsActiveNames)),this.changeFormDialog()},onIconChange(a){this.form_dialog.title.button_style_icon=a,this.changeFormDialog()}}},wo=Co,So=(0,D.Z)(wo,Ya,eo,!1,null,"5c649af8",null),ko=So.exports,$o=function(){var e=this,t=e._self._c;return t("div",{ref:"myDesignDescription",staticClass:"my-design-description"},[t("el-container",[t("el-aside",{staticStyle:{"border-right":"1px solid #e4e7ed"},attrs:{width:"200px"}},[t("div",{staticClass:"my-design-description-content queryDataSourceTree",style:{height:e.card_height-10+"px"}},[t("el-tree",{ref:"description_tree",staticClass:"my_tree",attrs:{"allow-drag":e.allowDrag,"allow-drop":e.allowDrop,"current-node-key":e.current_node_key,data:e.description_tree_data,"expand-on-click-node":!1,"default-expand-all":"",draggable:"","highlight-current":"","node-key":"id"},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[t("span",{staticStyle:{"margin-right":"5px",color:"#0a84ff"}},[o.id=="root_left"?t("i",{staticClass:"iconfont bi_txtLeft"}):e._e(),o.id=="root_right"?t("i",{staticClass:"iconfont bi_txtRight"}):e._e()]),t("el-tooltip",{attrs:{content:i.label,"open-delay":1e3,effect:"light",placement:"top"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":""}},[e._v(" "+e._s(i.label)+" ")])]),t("span",{staticClass:"iconfont-container"},[o.children?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u7EDF\u8BA1\u8BF4\u660E\uFF0C\u4FDD\u5B58\u4E4B\u540E\u624D\u751F\u6548",effect:"light",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>e.append(o.position)}},[t("i",{staticClass:"iconfont bi_add31"})])],1):t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u7EDF\u8BA1\u8BF4\u660E",effect:"light",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>e.remove(o)}},[t("i",{staticClass:"iconfont bi_del3"})])],1)],1)],1)}}])})],1)]),t("el-main",[t("div",{staticClass:"my-design-description-content",style:{height:e.card_height-20+"px"}},[t("el-form",{directives:[{name:"show",rawName:"v-show",value:e.form_description.guid&&e.form_description.guid!="",expression:"form_description.guid && form_description.guid != ''"}],ref:"form",staticStyle:{margin:"10px"},attrs:{inline:!0,model:e.form_description,size:"mini"}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u4E3B\u952E"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form_description.guid,callback:function(i){e.$set(e.form_description,"guid",i)},expression:"form_description.guid"}})],1),t("el-form-item",{attrs:{label:"\u8BF4\u660E\u540D\u79F0"}},[t("el-input",{attrs:{placeholder:"\u8BF4\u660E\u540D\u79F0"},on:{change:e.changeFormDescription},model:{value:e.form_description.name,callback:function(i){e.$set(e.form_description,"name",i)},expression:"form_description.name"}})],1),t("el-form-item",{attrs:{label:"\u663E\u793A\u4F4D\u7F6E"}},[t("el-radio-group",{staticClass:"redio-2",on:{change:e.changeFormDescription},model:{value:e.form_description.position,callback:function(i){e.$set(e.form_description,"position",i)},expression:"form_description.position"}},e._l(e.global_query.button_align_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),e.form_description.hide!=!0?[t("el-form-item",{attrs:{label:"\u6570\u636E\u8BF7\u6C42"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u8BF7\u6C42","popper-class":"white-bgc"},on:{change:e.changeFormDescriptionRequestData},model:{value:e.form_description.request_data,callback:function(i){e.$set(e.form_description,"request_data",i)},expression:"form_description.request_data"}},e._l(e.request_data_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value,disabled:i.disabled}})}),1),t("warning-tooltip",{attrs:{content:"\u9700\u8981\u5728\u3010\u6570\u636E\u8BF7\u6C42\u3011\u4E2D\u5148\u914D\u7F6E\u597D\u5BF9\u5E94\u7684\u6570\u636E\u96C6\u8BF7\u6C42\uFF0C\u6570\u636E\u8BF7\u6C42\u53EF\u4EE5\u88AB\u590D\u7528\uFF0C\u672A\u9009\u62E9\u6570\u636E\u96C6\u7684\u6570\u636E\u8BF7\u6C42\u4E0D\u53EF\u7528"}})],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u5B57\u6BB5"}},[t("el-select",{staticClass:"white-bgc",attrs:{placeholder:"\u8BF7\u9009\u62E9\u5185\u5BB9\u5B57\u6BB5","popper-class":"white-bgc"},on:{change:e.changeFormDescription},model:{value:e.form_description.field_name,callback:function(i){e.$set(e.form_description,"field_name",i)},expression:"form_description.field_name"}},e._l(e.field_name_list,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1),t("warning-tooltip",{attrs:{content:"\u5148\u9009\u62E9\u6570\u636E\u8BF7\u6C42\u540E\uFF0C\u65B9\u53EF\u9009\u62E9\u6570\u636E\u8BF7\u6C42\u7684\u8FD4\u56DE\u5B57\u6BB5\uFF0C\u9ED8\u8BA4\u53D6\u8FD4\u56DE\u5B57\u6BB5\u7684\u7B2C\u4E00\u884C\u6570\u636E\u4F5C\u4E3A\u7EDF\u8BA1\u8BF4\u660E\u7684\u5185\u5BB9"}})],1)]:e._e()],2),t("div",{staticClass:"form-container button"},[t("el-form-item",{attrs:{label:"\u662F\u5426\u9690\u85CF"}},[t("el-switch",{on:{change:e.changeFormDescription},model:{value:e.form_description.hide,callback:function(i){e.$set(e.form_description,"hide",i)},expression:"form_description.hide"}})],1)],1),e.form_description.hide!=!0?t("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(i){e.activeNames=i},expression:"activeNames"}},[t("el-collapse-item",{attrs:{name:"text"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"text"}}),t("span",{staticClass:"title-name"},[e._v("\u524D\u7F00")])]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u524D\u7F00\u5185\u5BB9"}},[t("el-input",{attrs:{placeholder:"\u8BF4\u660E\u540D\u79F0"},on:{change:e.changeFormDescription},model:{value:e.form_description.prefix.label,callback:function(i){e.$set(e.form_description.prefix,"label",i)},expression:"form_description.prefix.label"}})],1),t("el-form-item",{attrs:{label:"\u524D\u7F00\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{min:1,step:1,"controls-position":"right"},on:{change:e.changeFormDescription},model:{value:e.form_description.prefix.width,callback:function(i){e.$set(e.form_description.prefix,"width",i)},expression:"form_description.prefix.width"}})],1),t("el-form-item",{attrs:{label:"\u524D\u7F00\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeFormDescription},model:{value:e.form_description.prefix.align,callback:function(i){e.$set(e.form_description.prefix,"align",i)},expression:"form_description.prefix.align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6587\u5B57\u6587\u672C\u989C\u8272"},on:{change:e.changeFormDescription},model:{value:e.form_description.prefix.color,callback:function(i){e.$set(e.form_description.prefix,"color",i)},expression:"form_description.prefix.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeFormDescription},model:{value:e.form_description.prefix.color,callback:function(i){e.$set(e.form_description.prefix,"color",i)},expression:"form_description.prefix.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{min:1,step:1,"controls-position":"right"},on:{change:e.changeFormDescription},model:{value:e.form_description.prefix.fontSize,callback:function(i){e.$set(e.form_description.prefix,"fontSize",i)},expression:"form_description.prefix.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeFormDescription},model:{value:e.form_description.prefix.fontFamily,callback:function(i){e.$set(e.form_description.prefix,"fontFamily",i)},expression:"form_description.prefix.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u52A0\u7C97"}},[t("el-radio-group",{on:{change:e.changeFormDescription},model:{value:e.form_description.prefix.fontWeight,callback:function(i){e.$set(e.form_description.prefix,"fontWeight",i)},expression:"form_description.prefix.fontWeight"}},[t("el-radio-button",{attrs:{label:"normal"}},[e._v("\u666E\u901A")]),t("el-radio-button",{attrs:{label:"bold"}},[e._v("\u52A0\u7C97")])],1)],1)],1)]),t("el-collapse-item",{attrs:{name:"content"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"content"}}),t("span",{staticClass:"title-name"},[e._v("\u5185\u5BB9")])]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u5185\u5BB9\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{min:1,step:1,"controls-position":"right"},on:{change:e.changeFormDescription},model:{value:e.form_description.text.width,callback:function(i){e.$set(e.form_description.text,"width",i)},expression:"form_description.text.width"}})],1),t("el-form-item",{attrs:{label:"\u5185\u5BB9\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeFormDescription},model:{value:e.form_description.text.align,callback:function(i){e.$set(e.form_description.text,"align",i)},expression:"form_description.text.align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6587\u5B57\u6587\u672C\u989C\u8272"},on:{change:e.changeFormDescription},model:{value:e.form_description.text.color,callback:function(i){e.$set(e.form_description.text,"color",i)},expression:"form_description.text.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeFormDescription},model:{value:e.form_description.text.color,callback:function(i){e.$set(e.form_description.text,"color",i)},expression:"form_description.text.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{min:1,step:1,"controls-position":"right"},on:{change:e.changeFormDescription},model:{value:e.form_description.text.fontSize,callback:function(i){e.$set(e.form_description.text,"fontSize",i)},expression:"form_description.text.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeFormDescription},model:{value:e.form_description.text.fontFamily,callback:function(i){e.$set(e.form_description.text,"fontFamily",i)},expression:"form_description.text.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u52A0\u7C97"}},[t("el-radio-group",{on:{change:e.changeFormDescription},model:{value:e.form_description.text.fontWeight,callback:function(i){e.$set(e.form_description.text,"fontWeight",i)},expression:"form_description.text.fontWeight"}},[t("el-radio-button",{attrs:{label:"normal"}},[e._v("\u666E\u901A")]),t("el-radio-button",{attrs:{label:"bold"}},[e._v("\u52A0\u7C97")])],1)],1),e.form_description.text.is_description_text!=!0&&e.form_description.text.is_count_to==!0?[t("el-divider",{attrs:{"content-position":"left"}},[e._v("\u7FFB\u724C\u5668\u914D\u7F6E")]),t("el-form-item",{attrs:{label:"\u52A8\u753B\u65F6\u95F4"}},[t("el-input-number",{attrs:{placeholder:"\u7FFB\u724C\u6301\u7EED\u65F6\u95F4(\u6BEB\u79D2)","controls-position":"right",min:1,step:100},on:{change:e.changeFormDescription},model:{value:e.form_description.text.duration,callback:function(i){e.$set(e.form_description.text,"duration",i)},expression:"form_description.text.duration"}})],1),t("el-form-item",{attrs:{label:"\u5C0F\u6570\u4F4D\u6570"}},[t("el-input-number",{attrs:{placeholder:"\u4FDD\u7559\u5C0F\u6570\u4F4D\u6570","controls-position":"right",min:0,step:1},on:{change:e.changeFormDescription},model:{value:e.form_description.text.decimals,callback:function(i){e.$set(e.form_description.text,"decimals",i)},expression:"form_description.text.decimals"}})],1),t("el-form-item",{attrs:{label:"\u5206\u9694\u7B26"}},[t("el-input",{attrs:{controls:!1,placeholder:"\u6570\u5B57\u5206\u9694\u7B26"},on:{change:e.changeFormDescription},model:{value:e.form_description.text.separator,callback:function(i){e.$set(e.form_description.text,"separator",i)},expression:"form_description.text.separator"}})],1)]:e._e()],2),t("div",{staticClass:"form-container button"},[t("el-form-item",{staticClass:"script-radio",attrs:{label:"\u5185\u5BB9\u81EA\u5B9A\u4E49"}},[t("query-script",{attrs:{options:e.options.script_description_text},on:{change:e.changeFormDescription},model:{value:e.form_description.text,callback:function(i){e.$set(e.form_description,"text",i)},expression:"form_description.text"}})],1),e.form_description.text.is_description_text!=!0?t("el-form-item",{attrs:{label:"\u7FFB\u724C\u5668"}},[t("el-switch",{on:{change:e.changeFormDescription},model:{value:e.form_description.text.is_count_to,callback:function(i){e.$set(e.form_description.text,"is_count_to",i)},expression:"form_description.text.is_count_to"}})],1):e._e()],1)]),t("el-collapse-item",{attrs:{name:"footer"}},[t("p",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"iconfont bi_right",attrs:{name:"footer"}}),t("span",{staticClass:"title-name"},[e._v("\u540E\u7F00")])]),t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u540E\u7F00\u5185\u5BB9"}},[t("el-input",{attrs:{placeholder:"\u8BF4\u660E\u540D\u79F0"},on:{change:e.changeFormDescription},model:{value:e.form_description.suffix.label,callback:function(i){e.$set(e.form_description.suffix,"label",i)},expression:"form_description.suffix.label"}})],1),t("el-form-item",{attrs:{label:"\u540E\u7F00\u5BBD\u5EA6"}},[t("el-input-number",{attrs:{min:1,step:1,"controls-position":"right"},on:{change:e.changeFormDescription},model:{value:e.form_description.suffix.width,callback:function(i){e.$set(e.form_description.suffix,"width",i)},expression:"form_description.suffix.width"}})],1),t("el-form-item",{attrs:{label:"\u540E\u7F00\u5BF9\u9F50"}},[t("el-radio-group",{on:{change:e.changeFormDescription},model:{value:e.form_description.suffix.align,callback:function(i){e.$set(e.form_description.suffix,"align",i)},expression:"form_description.suffix.align"}},e._l(e.global_query.text_position_list,function(i){return t("el-radio-button",{key:i.value,attrs:{label:i.value}},[e._v(" "+e._s(i.label)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:19}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6587\u5B57\u6587\u672C\u989C\u8272"},on:{change:e.changeFormDescription},model:{value:e.form_description.suffix.color,callback:function(i){e.$set(e.form_description.suffix,"color",i)},expression:"form_description.suffix.color"}})],1),t("el-col",{staticStyle:{height:"32px"},attrs:{span:4}},[t("el-color-picker",{attrs:{predefine:e.global_query.predefineColors,"show-alpha":""},on:{change:e.changeFormDescription},model:{value:e.form_description.suffix.color,callback:function(i){e.$set(e.form_description.suffix,"color",i)},expression:"form_description.suffix.color"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u5927\u5C0F"}},[t("el-input-number",{attrs:{min:1,step:1,"controls-position":"right"},on:{change:e.changeFormDescription},model:{value:e.form_description.suffix.fontSize,callback:function(i){e.$set(e.form_description.suffix,"fontSize",i)},expression:"form_description.suffix.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u6837\u5F0F"}},[t("font-select",{attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53\u6837\u5F0F"},on:{change:e.changeFormDescription},model:{value:e.form_description.suffix.fontFamily,callback:function(i){e.$set(e.form_description.suffix,"fontFamily",i)},expression:"form_description.suffix.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u52A0\u7C97"}},[t("el-radio-group",{on:{change:e.changeFormDescription},model:{value:e.form_description.suffix.fontWeight,callback:function(i){e.$set(e.form_description.suffix,"fontWeight",i)},expression:"form_description.suffix.fontWeight"}},[t("el-radio-button",{attrs:{label:"normal"}},[e._v("\u666E\u901A")]),t("el-radio-button",{attrs:{label:"bold"}},[e._v("\u52A0\u7C97")])],1)],1)],1)])],1):e._e()],1)],1)])],1)],1)},Io=[],No={name:"design-description",components:{WarningTooltip:v.Z,FontSelect:ye,QueryScript:_.Z},mixins:[P],data(){return{current_node_key:null,query_config_description:[],form_description:null,activeNames:[],options:{script_description_text:{attribute_enable:"is_description_text",attribute_script_content:"script_description_text",title:"\u5185\u5BB9\u81EA\u5B9A\u4E49",api:"api-description-text"}}}},created(){this.setDefaultFormDescription()},computed:{description_tree_data(){return this.rebuildData()},request_data_list(){let a=[];return this.$$lib__.each(JSON.parse(JSON.stringify(this.queryConfig.request)),e=>{a.push({value:e.guid,label:e.name,disabled:this.$$lib__.isEmpty(e.data_set)})}),a},field_name_list(){let a=[],e=this.$$lib__.find(this.queryConfig.request,t=>t.guid==this.form_description.request_data);return e&&e.data_set&&e.data_set.dimensionsAlias&&this.$$lib__.each(JSON.parse(JSON.stringify(e.data_set.dimensionsAlias)),t=>{a.push({value:t.name,label:t.alias&&t.alias!=""?t.alias:t.name})}),a}},watch:{"queryConfig.description":{deep:!0,handler:function(){this.query_config_description=JSON.parse(JSON.stringify(this.queryConfig.description))}},description_tree_data:{deep:!0,handler:function(){this.form_description&&this.form_description.guid&&this.$nextTick(()=>{this.$refs.description_tree.setCurrentKey(this.form_description.guid)})}}},methods:{...(0,w.nv)(["updateQueryConfigDescription"]),changeFormDescriptionRequestData(){this.form_description.field_name=null,this.changeFormDescription()},changeFormDescription(){if(this.query_config_description&&this.query_config_description.length>0){for(let a=0;a<this.query_config_description.length;a++)if(this.query_config_description[a].guid==this.form_description.guid){this.query_config_description[a]=JSON.parse(JSON.stringify(this.form_description)),this.changeQueryConfigDescription();break}}},changeQueryConfigDescription(){this.updateQueryConfigDescription(this.query_config_description)},handleChange(){let a=this.$refs.myDesignDescription.querySelectorAll(".bi_right");this.$$lib__.each(a,e=>{var t=this.$$lib__.find(this.activeNames,i=>i==e.attributes.name.value);t?(e.style.transform==""||e.style.transform=="rotate(0deg)")&&(e.style.transform="rotate(-90deg)"):e.style.transform=="rotate(-90deg)"&&(e.style.transform="rotate(0deg)")})},append(a){let e=JSON.parse(JSON.stringify(this.defaultQueryConfig.description));e.guid=le().v4().replace(/-/g,""),e.position=a,e.order=this.query_config_description.length+1,this.query_config_description.push(JSON.parse(JSON.stringify(e))),this.current_node_key=e.guid,this.form_description=JSON.parse(JSON.stringify(e)),setTimeout(()=>{this.sortByOrder()},100)},remove(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664[ "+a.label+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{if(this.query_config_description&&this.query_config_description.length>0){for(let e=0;e<this.query_config_description.length;e++)if(this.query_config_description[e].guid==a.id){this.query_config_description.splice(e,1),this.setDefaultFormDescription(),setTimeout(()=>{this.sortByOrder()},100);break}}}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},handleNodeClick(a){let e=this.$$lib__.find(this.query_config_description,t=>t.guid==a.id);e&&(this.form_description=JSON.parse(JSON.stringify(e)),this.current_node_key=e.guid)},handleDragEnd(a,e,t){if(t=="none")return;let i=null;t=="inner"?i=e.data:e.parent&&(t=="before"||t=="after")&&(i=e.parent.data),this.$$lib__.each(this.query_config_description,o=>{o.guid==a.data.guid&&(o.position=i.position)}),this.sortByOrder()},sortByOrder(){let a=0,e=this.$refs.description_tree.getNode("root_left");e&&e.childNodes&&e.childNodes.length>0&&this.$$lib__.each(e.childNodes,i=>{this.$$lib__.each(this.query_config_description,o=>{o.guid==i.data.guid&&(o.order=a+1,a++),o.guid==this.form_description.guid&&(this.form_description=JSON.parse(JSON.stringify(o)))})});let t=this.$refs.description_tree.getNode("root_right");t&&t.childNodes&&t.childNodes.length>0&&this.$$lib__.each(t.childNodes,i=>{this.$$lib__.each(this.query_config_description,o=>{o.guid==i.data.guid&&(o.order=a+1,a++),o.guid==this.form_description.guid&&(this.form_description=JSON.parse(JSON.stringify(o)))})}),this.changeQueryConfigDescription()},allowDrop(a,e,t){return e.data.type=="description"?t!="inner":e.data.id.indexOf("root")>-1?t=="inner":!0},allowDrag(a){return a.data.id.indexOf("root")==-1},setDefaultFormDescription(){this.form_description=JSON.parse(JSON.stringify(this.defaultQueryConfig.description))},rebuildData(){let a=[],e=[];return this.$$lib__.each(JSON.parse(JSON.stringify(this.query_config_description)),t=>{t.position==this.global_query.position.left.code?(t.id=t.guid,t.type="description",t.label=t.name,a.push(t)):t.position==this.global_query.position.right.code&&(t.id=t.guid,t.type="description",t.label=t.name,e.push(t))}),[{id:"root_left",label:"\u56FA\u5B9A\u5C45\u5DE6",position:this.global_query.position.left.code,children:this.$$lib__.sortBy(a,"order")},{id:"root_right",label:"\u56FA\u5B9A\u5C45\u53F3",position:this.global_query.position.right.code,children:this.$$lib__.sortBy(e,"order")}]}}},Do=No,Oo=(0,D.Z)(Do,$o,Io,!1,null,"1d32fc09",null),To=Oo.exports,Fo=function(){var e=this,t=e._self._c;return t("div",{ref:"myDesignRequest",staticClass:"my-design-request"},[t("el-container",[t("el-aside",{staticStyle:{"border-right":"1px solid #e4e7ed"},attrs:{width:"200px"}},[t("div",{staticClass:"my-design-request-content queryDataSourceTree",style:{height:e.card_height-10+"px"}},[t("el-tree",{ref:"request_tree",staticClass:"my_tree",attrs:{"current-node-key":e.current_node_key,data:e.request_tree_data,"expand-on-click-node":!1,"default-expand-all":"","highlight-current":"","node-key":"id"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:i,data:o}){return t("span",{},[o.guid.indexOf("root")>-1?t("span",[t("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i.expanded&&i.childNodes.length>0?t("use",{attrs:{"xlink:href":" #bi_fileOpen"}}):t("use",{attrs:{"xlink:href":"#bi_fileClose"}})])]):e._e(),t("el-tooltip",{attrs:{content:i.label,"open-delay":1e3,effect:"light",placement:"top"}},[t("span",{style:{color:o.hide==!0?"#C0C4CC":"",marginLeft:"5px"}},[e._v(" "+e._s(i.label)+" ")])]),t("span",{staticClass:"iconfont-container"},[o.children?t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u6DFB\u52A0\u6570\u636E\u8BF7\u6C42\uFF0C\u4FDD\u5B58\u4E4B\u540E\u624D\u751F\u6548",effect:"light",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>e.append()}},[t("i",{staticClass:"iconfont bi_add31"})])],1):t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u79FB\u9664\u6570\u636E\u8BF7\u6C42",effect:"light",placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>e.remove(o)}},[t("i",{staticClass:"iconfont bi_del3"})])],1)],1)],1)}}])})],1)]),t("el-main",[t("div",{staticClass:"my-design-request-content",style:{height:e.card_height-20+"px"}},[t("el-form",{directives:[{name:"show",rawName:"v-show",value:e.form_request.guid&&e.form_request.guid!="",expression:"form_request.guid && form_request.guid != ''"}],ref:"form",staticStyle:{margin:"10px"},attrs:{inline:!0,model:e.form_request,size:"mini"}},[t("div",{staticClass:"form-container input"},[t("el-form-item",{attrs:{label:"\u4E3B\u952E"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form_request.guid,callback:function(i){e.$set(e.form_request,"guid",i)},expression:"form_request.guid"}})],1),t("el-form-item",{attrs:{label:"\u8BF7\u6C42\u540D\u79F0"}},[t("el-input",{attrs:{placeholder:"\u8BF4\u660E\u540D\u79F0"},on:{change:e.changeFormRequest},model:{value:e.form_request.name,callback:function(i){e.$set(e.form_request,"name",i)},expression:"form_request.name"}})],1),t("el-form-item",{attrs:{label:"\u6570\u636E\u96C6"}},[t("select-tree-data-set",{attrs:{clearable:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u8BF7\u6C42\u7684\u6570\u636E\u96C6"},on:{change:e.changeFormRequest},model:{value:e.form_request.data_set,callback:function(i){e.$set(e.form_request,"data_set",i)},expression:"form_request.data_set"}})],1)],1),t("div",{staticClass:"form-container button"},[t("el-form-item",{attrs:{label:"\u968F\u67E5\u8BE2\u66F4\u65B0"}},[t("el-tooltip",{attrs:{"open-delay":1e3,content:"\u67E5\u8BE2\u6309\u94AE\u6216\u5237\u65B0\u6309\u94AE\u6267\u884C\u540E\uFF0C\u5373\u66F4\u65B0\u5F53\u524D\u8BF7\u6C42",effect:"light",placement:"top"}},[t("el-switch",{on:{change:e.changeFormRequest},model:{value:e.form_request.query_request,callback:function(i){e.$set(e.form_request,"query_request",i)},expression:"form_request.query_request"}})],1)],1)],1)])],1)])],1)],1)},Bo=[],Lo={name:"design-request",components:{SelectTreeDataSet:Ie},mixins:[P],data(){return{current_node_key:null,query_config_request:[],form_request:null}},created(){this.setDefaultFormRequest()},computed:{request_tree_data(){let a=this,e=[];return a.$$lib__.each(a.query_config_request,t=>{e.push({id:t.guid,label:t.name,guid:t.guid})}),[{guid:"root",label:"\u6570\u636E\u8BF7\u6C42",children:e}]}},watch:{"queryConfig.request":{deep:!0,handler:function(){this.query_config_request=JSON.parse(JSON.stringify(this.queryConfig.request))}},request_tree_data:{deep:!0,handler:function(){this.form_request&&this.form_request.guid&&this.$nextTick(()=>{this.$refs.request_tree.setCurrentKey(this.form_request.guid)})}}},methods:{...(0,w.nv)(["updateQueryConfigRequest"]),changeFormRequest(){if(this.query_config_request&&this.query_config_request.length>0){for(let a=0;a<this.query_config_request.length;a++)if(this.query_config_request[a].guid==this.form_request.guid){this.query_config_request[a]=JSON.parse(JSON.stringify(this.form_request)),this.changeQueryConfigRequest();break}}},changeQueryConfigRequest(){this.updateQueryConfigRequest(this.query_config_request)},append(){let a=JSON.parse(JSON.stringify(this.defaultQueryConfig.request));a.guid=le().v4().replace(/-/g,""),a.order=this.query_config_request.length+1,this.query_config_request.push(JSON.parse(JSON.stringify(a))),this.current_node_key=a.guid,this.form_request=JSON.parse(JSON.stringify(a)),this.changeQueryConfigRequest()},remove(a){this.$confirm("\u8BF7\u786E\u8BA4\u662F\u5426\u79FB\u9664[ "+a.label+" ]?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{if(this.query_config_request&&this.query_config_request.length>0){for(let e=0;e<this.query_config_request.length;e++)if(this.query_config_request[e].guid==a.id){this.query_config_request.splice(e,1),this.setDefaultFormRequest(),this.changeQueryConfigRequest();break}}}).catch(()=>{C.Message.info({message:"\u5DF2\u53D6\u6D88\u79FB\u9664",offset:60})})},handleNodeClick(a){let e=this.$$lib__.find(this.query_config_request,t=>t.guid==a.id);e&&(this.form_request=JSON.parse(JSON.stringify(e)),this.current_node_key=e.guid)},setDefaultFormRequest(){this.form_request=JSON.parse(JSON.stringify(this.defaultQueryConfig.request))}}},Po=Lo,Qo=(0,D.Z)(Po,Fo,Bo,!1,null,"ce327218",null),zo=Qo.exports,Eo={name:"configure-design",components:{DesignRequest:zo,DesignDescription:To,DesignDialog:ko,DesignAction:Xa,DesignButton:Ha,DesignCondition:Ja,DesignField:$a,DesignBase:pa},mixins:[P],created(){this.initInfo()},methods:{...(0,w.nv)(["setQueryId","setViewPreview","setIsQueryEditor","setQueryAppId","setApplicationIdEx","setURLParams"]),initInfo(){this.setURLParams(),this.setViewPreview(!0),this.setIsQueryEditor(!0);let a=this.getUrlKey("queryId"),e=this.getUrlKey("appId");this.setQueryId({queryId:a,widgetId:this.widgetId}),this.setQueryAppId({queryAppId:e,widgetId:this.widgetId}),this.setApplicationIdEx(e)}}},Jo=Eo,Ao=(0,D.Z)(Jo,ot,rt,!1,null,"def62096",null),Ro=Ao.exports,Mo={name:"design",components:{ConfigureDesign:Ro,ToolbarDesign:$e}},jo=Mo,Zo=(0,D.Z)(jo,A,O,!1,null,"45871ea8",null),Ho=Zo.exports,Vo=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%"}},[t("query-view",{ref:"query_view",attrs:{queryListId:e.query_list_id,applicationId:e.application_id,"is-design":!0}})],1)},Uo=[],Go=c(694807),qt=c(479876),Wo={name:"design-view",components:{QueryView:Go.Z},mixins:[qt.G],data(){return{query_list_id:null,application_id:null}},mounted(){this.initInfo()},methods:{initInfo(){this.query_list_id=this.getUrlKey("queryId"),this.application_id=this.getUrlKey("appId"),setTimeout(()=>{this.$refs.query_view.initQueryInfo(()=>{y.Z.$emit("busGetDatasetTreeData")})},1)}}},Ko=Wo,Xo=(0,D.Z)(Ko,Vo,Uo,!1,null,"329043c8",null),Yo=Xo.exports,er={name:"screen",components:{DesignView:Yo,Design:Ho},mixins:[qt.G],data(){return{loading:!1,queryListData:{}}},computed:{...(0,w.Se)(["queryIdFun","queryAppIdFun"]),queryId(){return this.queryIdFun(this.widgetId)},queryAppId(){return this.queryAppIdFun(this.widgetId)}},mounted(){this.dragControllerDiv()},methods:{dragControllerDiv:function(){var a=document.getElementsByClassName("resize"),e=document.getElementsByClassName("left"),t=document.getElementsByClassName("mid"),i=document.getElementsByClassName("box");for(let o=0;o<a.length;o++)a[o].onmousedown=function(n){a[o].style.background="#818181";var d=n.clientX;return a[o].left=a[o].offsetLeft,document.onmousemove=function(g){var H=g.clientX,G=a[o].left+(H-d),L=i[o].clientWidth-a[o].offsetWidth;G<200&&(G=200),G>L-200&&(G=L-200),a[o].style.left=G;for(let De=0;De<e.length;De++)e[De].style.width=G+"px",t[De].style.width=i[o].clientWidth-G-10+"px"},document.onmouseup=function(){a[o].style.background="#d6d6d6",document.onmousemove=null,document.onmouseup=null,a[o].releaseCapture&&a[o].releaseCapture()},a[o].setCapture&&a[o].setCapture(),!1}}}},tr=er,ir=(0,D.Z)(tr,J,Z,!1,null,"30708ae2",null),ar=ir.exports,xt=c(149500),or={name:"App",components:{Screen:ar,LoginDialog:B.Z},computed:{...(0,w.Se)(["queryIdFun","queryAppIdFun"])},mounted(){document.getElementsByTagName("body")[0].classList.add("query_design");try{this.registerEditing()}catch(a){xt.error(a)}},methods:{...(0,w.nv)(["changeCanEdit","setEditingInfo"]),registerEditing(){if(S.Z.baseConfig.isUseEditorWs){const a=`${this.queryAppIdFun(this.widgetId)}_${this.queryIdFun(this.widgetId)}`,e=this;xt.log("begin edit queryList: "+a),window.initEditorWebSocket(e,a,(t,i,o)=>{o?o.name=="save"&&y.Z.$emit("doQueryListSaveAction",{showMsg:"",callback:n=>{debugger;if(o.callback){let d={};n.status===200?(d.status=200,d.msg=""):(d.status=500,d.msg=""),o.callback(d)}}}):(e.changeCanEdit(t),e.setEditingInfo(i))})}else this.changeCanEdit(!0),this.setEditingInfo("")}}},rr=or,nr=(0,D.Z)(rr,$,q,!1,null,"0cbed2b1",null),lr=nr.exports,ct=c(807788),sr=c(900705),cr=c(416131),dr=c(801559),ur=c(520674),_r=c(340774),Ct=c(66715);m.default.prototype.theme=sr.Z,m.default.use(ae()),m.default.config.productionTip=!1,m.default.prototype.mUtils=j;const dt=Ct.Z.getQueryString("applicationId")||Ct.Z.getQueryString("appId");S.Z.baseConfig.isPlatform&&dt&&me.Z.dispatch("setApplicationIdEx",dt),ct.Z.setAppIcon(dt),ct.Z.getTokenFromUrl({isPreview:!1}),ct.Z.healteBeat(5),new m.default({store:me.Z,render:a=>a(lr)}).$mount("#app")},935051:function(b,T,c){c.r(T),c.d(T,{authenticationFailed:function(){return ee},deleteRequest:function(){return F},downloadExcelRequest:function(){return z},formGetRequest:function(){return M},formPostRequest:function(){return D},get:function(){return te},getRequest:function(){return E},platformGetRequest:function(){return de},platformPostRequest:function(){return ie},postRequest:function(){return se},putRequest:function(){return h},uploadFileRequest:function(){return ce}});var m=c(231954),$=c(91382),q=c(155946),f=c(927966),B=c(17977),S=c.n(B),y=c(555616),w=c.n(y),J=c(645617),Z=c.n(J),A=c(321300),O=c(149500);const V="X-Gisq-Token",K="X-Gisq-DeviceId",oe="ApplicationId",re="gisq_request_id",j=m.Z.baseConfig,R=S().create({});R.interceptors.request.use(p=>{if(!p.url.startsWith(window.location.origin)&&!p.url.startsWith("/")&&!p.url.startsWith(".")&&!p.url.startsWith(j.platformApi)&&!p.url.startsWith(j.apiBaseURL))return p;if(p.headers[V]==null){const I=A.getStoreToken();I!==void 0&&I!==""&&I!==null&&(p.headers[V]="Bearer "+I)}if(p.headers[K]==null){const I=A.getStoreDeviceId();I!==void 0&&I!==""&&I!==null&&(p.headers[K]=I)}const k=q.Z.state.index.application.applicationId;return k&&(p.headers[oe]=k),p.headers[re]=Z().v4(),p},p=>(y.Message.error({message:p,offset:60}),Promise.reject(p))),R.interceptors.response.use(p=>{const k=p.data;return q.Z.commit("SET_RESPONSE_HEADERS",p.headers),k.status&&k.status!==200&&k.status!==201?k&&k.status==401?X(p):Promise.reject(k):k},p=>{let k=p&&p.response&&p.response.data&&(p.response.data.msg||p.response.data.message)||"",I=p.config.Message||y.Message;if(!(typeof p.config.errorHandler=="function"&&!p.config.errorHandler(p.response.status,p))){if(p.response.status==500){let C="\u540E\u7AEF\u670D\u52A1\u8FDE\u63A5\u5931\u8D25";if(p.response.data.type==="application/json"){let ae=new FileReader;ae.readAsText(p.response.data,"utf-8"),ae.onload=ne=>{let P=JSON.parse(ne.target.result);O.info(P),I.error({message:P.message||P.msg,offset:60})},ae.onload=function(ne){let P=JSON.parse(ne.target.result);O.info(P),I.error({message:P.message||P.msg,offset:60})}}else{C=k||C;let ae="com.gisquest.datavisual.exception.DataVisualException:";C.indexOf(ae)==0&&(C=C.substring(ae.length)),I.error({message:C&&C.length>1?C:"\u51FA\u73B0\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5\u6216\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458",offset:60})}}else if(p.response.status==520)I.error({message:k,offset:60});else if(p.response.status==504||p.response.status==404){if(p.request.responseURL.indexOf("xzq/importGisXzqGeojson")>-1)return Promise.resolve(p);I.error({message:"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8FD4\u56DE\uFF1A"+p.response.status,offset:60})}else p.response.status==403?I.error({message:"\u6743\u9650\u4E0D\u8DB3,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458!",offset:60}):p.response.status==401?(I.error({message:k,offset:60}),ee()):(O.info(p),I.error({message:k||"\u672A\u77E5\u9519\u8BEF\uFF01",offset:60}));return Promise.reject(p)}});let W=!0,U=[];const X=async p=>{if(W){O.log("\u6B63\u5728\u5237\u65B0token"),W=!1;const k=p.config;try{const I=await Y();if(I&&I!=="")return A.setStoreToken(I),U.forEach(C=>C()),U=[],k.headers[V]="Bearer "+I,O.log("token\u5237\u65B0\u6210\u529F",I),R(k);O.log("token\u5237\u65B0\u5931\u8D25, token\u83B7\u53D6\u4E3A\u7A7A"),U=[],A.removeStoreToken(),ee()}catch(I){O.error("token\u5237\u65B0\u5931\u8D25",I),U=[],A.removeStoreToken(),ee()}finally{W=!0}}else return new Promise(k=>{U.push(()=>k(S()(m.Z)))});return p.data},Y=async()=>{const p=A.getStoreToken();let k={http:R,token:p,mUtils:A,axios:S()};return window.refreshToken?(O.info("\u5728window.refreshToken\u4E2D\u83B7\u53D6token"),await window.refreshToken(k)):null},se=(p,k,I={})=>(I.headers||(I.headers={"Content-Type":"application/json"}),R({method:"post",url:`${m.Z.baseConfig.apiBaseURL}${p}`,data:k,...I})),ce=(p,k,I)=>R({method:"post",url:`${m.Z.baseConfig.apiBaseURL}${p}`,data:k,headers:{"Content-Type":"multipart/form-data"},...I}),z=(p,k)=>R({method:"post",url:`${m.Z.baseConfig.apiBaseURL}${p}`,data:k,responseType:"blob"}),h=(p,k)=>R({method:m.Z.baseConfig.usePutMethod?"put":"post",url:`${m.Z.baseConfig.apiBaseURL}${p}`,data:k,headers:{"Content-Type":"application/json"}}),F=p=>R({method:m.Z.baseConfig.usePutMethod?"delete":"get",url:`${m.Z.baseConfig.apiBaseURL}${p}`}),E=(p,k={})=>(k.headers||(k.headers={"Content-Type":"application/json"}),R({method:"get",url:`${m.Z.baseConfig.apiBaseURL}${p}`,...k})),te=p=>(p=location.origin+`${m.Z.baseConfig.projectName}${p}`,R({method:"get",url:p})),M=(p,k={})=>R({method:"get",url:p,...k}),D=(p,k,I={})=>R({method:"post",url:p,data:k,...I}),ee=p=>{if(!A.isView())return f.Z.$emit("loginAgain",!0),!1;if(A.removeStoreToken(),A.removeStoreUserInfo(),A.removeStoreDeviceId(),A.removeStoreOrApp("needModifyPassword"),localStorage.removeItem("menuData"),q.Z.commit("ADD_MENU",[]),m.Z.baseConfig.isPlatform){if(window.top!=window){let k={from:"gisq-bi",action:"logout"};window.top.postMessage(JSON.stringify(k),"*")}if(window.bi&&window.bi.config&&window.bi.config.publishUrl){let k=window.bi.config.publishUrl.startsWith("http")?window.bi.config.publishUrl:`${m.Z.baseConfig.domain}#${window.bi.config.publishUrl}`;return window.location.href=`${k}${k.indexOf("?")>-1?"&":"?"}redirect=${encodeURIComponent(window.location.href)}`,!1}}return!p&&$.Z.currentRoute.path!=="/"?($.Z.replace({path:"/",query:{redirect:$.Z.currentRoute.path}}),!1):!0},de=(p,k={})=>R({method:"get",url:`${m.Z.baseConfig.platformApi}${p}`,...k}),ie=(p,k,I={})=>(I.headers||(I.headers={"Content-Type":"application/json"}),R({method:"post",url:`${m.Z.baseConfig.platformApi}${p}`,data:k,...I}))},321300:function(b,T,c){c.r(T),c.d(T,{AES:function(){return Xe},accSub:function(){return Be},addClass:function(){return C},appendCss:function(){return tt},appendImageBaseURL:function(){return Oe},appendLink:function(){return Ge},appendResource:function(){return We},arrObjSort:function(){return Ce},biResourceType:function(){return we},colorToRgb:function(){return he},colorToRgbValue:function(){return Ze},dataSet2DataList:function(){return at},dealRegison:function(){return Je},enc:function(){return me},formatDate:function(){return p},getAppStore:function(){return re},getHtmlImageInfo:function(){return ve},getImageBase64:function(){return Te},getLoadUrlComponent:function(){return Ve},getLocationByAddress:function(){return Me},getNewFontSize:function(){return Le},getNewPxH:function(){return Qe},getNewPxMin:function(){return ze},getNewPxW:function(){return Pe},getScalePxW:function(){return Ee},getStore:function(){return oe},getStoreDeviceId:function(){return de},getStoreOrApp:function(){return X},getStoreRememberPassword:function(){return te},getStoreToken:function(){return F},getStoreUserInfo:function(){return E},getUrlKey:function(){return $e},getWidgetPermissionDisabled:function(){return rt},hexToRgba:function(){return He},html2canvas:function(){return Ye},isEditor:function(){return it},isEmpty:function(){return ae},isMobile:function(){return je},isNumber:function(){return ne},isView:function(){return ke},loadCallbackResource:function(){return Se},loadCallbackResourceList:function(){return Ke},mergeObjs:function(){return qe},mergeObjsArr:function(){return fe},parseStringTemplate:function(){return ot},parseToDate:function(){return k},parseToScope:function(){return I},randomString:function(){return ue},rebuildData:function(){return Re},registerScript:function(){return Ue},removeAppStore:function(){return R},removeStore:function(){return j},removeStoreDeviceId:function(){return ie},removeStoreOrApp:function(){return Y},removeStoreRememberPassword:function(){return ee},removeStoreToken:function(){return M},removeStoreUserInfo:function(){return D},rgbaToHex:function(){return ge},setAppStore:function(){return K},setBrowserTitle:function(){return Fe},setImgStyle:function(){return Ae},setStore:function(){return V},setStoreDeviceId:function(){return h},setStoreOrApp:function(){return U},setStoreRememberPassword:function(){return z},setStoreToken:function(){return se},setStoreUserInfo:function(){return ce},stringToBoolean:function(){return xe},style2CSSStr:function(){return et},toFixedNum:function(){return P},transferFl:function(){return pe},useAppStore:function(){return W}});var m=c(645617),$=c.n(m),q=c(231954),f=c(155946),B=c(910761),S=c.n(B),y=c(117231),w=c(42160),J=c(792162),Z=c.n(J),A=c(869036),O=c(149500);const V=(r,l)=>{r&&(typeof l!="string"&&(l=JSON.stringify(l)),window.localStorage.setItem(r,l))},K=(r,l)=>{if(r&&l)if(q.Z.baseConfig.isPlatform==!1||q.Z.baseConfig.isUseAppObject==!1)V(r,l);else if(f.Z.state.index.application&&f.Z.state.index.application.applicationId&&f.Z.state.index.application.applicationId!=""){let s=f.Z.state.index.application.applicationId,u=window.localStorage.getItem("appObject");if(u)try{u=JSON.parse(u);let _=u[s];_?(_[r]=l,u[s]=_):(u[s]={},u[s][r]=l)}catch{O.error(u)}else u={},u[s]={},u[s][r]=l;window.localStorage.setItem("appObject",JSON.stringify(u))}else f.Z.state.editor.isBoardEditor!=!0&&O.error("localStorage\u4FE1\u606F\u5B58\u50A8\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A")},oe=r=>{if(!r)return;let l=window.localStorage.getItem(r);if(l!==null)try{l=JSON.parse(l)}catch{return l}return l},re=r=>{if(r){if(q.Z.baseConfig.isPlatform==!1||q.Z.baseConfig.isUseAppObject==!1)return oe(r);if(f.Z.state.index.application&&f.Z.state.index.application.applicationId&&f.Z.state.index.application.applicationId!=""){let l=f.Z.state.index.application.applicationId,s=window.localStorage.getItem("appObject");if(s)try{s=JSON.parse(s);let u=s[l];if(u)return u[r];f.Z.state.editor.isBoardEditor!=!0&&O.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u6CA1\u6709["+l+"]\u7684\u5E94\u7528\u4FE1\u606F")}catch{O.error(s)}else f.Z.state.editor.isBoardEditor!=!0&&O.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u6CA1\u6709appObject\u5E94\u7528\u4FE1\u606F")}else f.Z.state.editor.isBoardEditor!=!0&&O.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A");return null}},j=r=>{r&&window.localStorage.removeItem(r)},R=r=>{if(r)if(q.Z.baseConfig.isPlatform==!1||q.Z.baseConfig.isUseAppObject==!1)j(r);else if(f.Z.state.index.application&&f.Z.state.index.application.applicationId&&f.Z.state.index.application.applicationId!=""){let l=f.Z.state.index.application.applicationId,s=window.localStorage.getItem("appObject");if(s)try{s=JSON.parse(s);let u=s[l];u?(u[r]=void 0,s[l]=u,window.localStorage.setItem("appObject",JSON.stringify(s))):f.Z.state.editor.isBoardEditor!=!0&&O.error("localStorage\u4FE1\u606F\u83B7\u53D6\u5220\u9664\u5931\u8D25\uFF0C\u6CA1\u6709["+l+"]\u7684\u5E94\u7528\u4FE1\u606F")}catch{O.error(s)}else f.Z.state.editor.isBoardEditor!=!0&&O.error("localStorage\u4FE1\u606F\u5220\u9664\u5931\u8D25\uFF0C\u6CA1\u6709appObject\u5E94\u7528\u4FE1\u606F")}else f.Z.state.editor.isBoardEditor!=!0&&O.error("localStorage\u4FE1\u606F\u5220\u9664\u5931\u8D25\uFF0C\u5E94\u7528ID\u4E0D\u80FD\u4E3A\u7A7A")},W=()=>q.Z.baseConfig.isPlatform&&q.Z.baseConfig.isUseAppObject&&ke()&&$e("preview")!=="true"&&f.Z.state.view.preview!=!0&&window.sessionStorage.getItem("preview")!=="true",U=(r,l)=>{W()?K(r,l):V(r,l)},X=r=>W()?re(r):oe(r),Y=(r,l=!1)=>{r&&((l||W())&&R(r),(l||!W())&&j(r))},se=r=>{r&&(U("accessToken",r),U("X-Gisq-Token","Bearer "+r))},ce=r=>{r&&(typeof r!="string"&&(r.user_id&&(r.userId=r.user_id),r.user_nickname&&(r.userName=decodeURIComponent(r.user_nickname)),r.user_name&&(r.userCode=r.user_name),r.system_user&&(r.systemUser=r.system_user),r.superManager=r.superManager||r.roles&&r.roles.indexOf("ROLE_ADMIN")>-1,r=JSON.stringify(r)),U("userinfo",r))},z=(r,l,s,u)=>{if(!l||!s){O.log("\u7528\u6237\u6216\u8005\u5BC6\u7801\u4E3A\u7A7A,\u65E0\u6CD5\u8BB0\u4F4F\u5BC6\u7801");return}let _={username:l,password:s,expdate:new Date().getTime()+24*60*60*1e3*(u??30)},v=y.Z.encrypt_custom(JSON.stringify(_));window.localStorage.setItem("rememberPassword_"+r,v)},h=()=>{const r=X("accessDeviceId");(r==null||r==""||r==null)&&U("accessDeviceId",$().v1())},F=()=>X("accessToken"),E=()=>{let r=X("userinfo");return r?(q.Z.baseConfig.isPlatform&&(typeof r=="string"&&(r=JSON.parse(r)),(r.user_name&&!r.userCode||r.userCode!=r.user_name)&&(r.userId=r.user_id,r.userCode=r.user_name,r.userName=decodeURIComponent(r.user_nickname||""),r.phone=r.user_tel,r.roles=r.authorities)),typeof r=="string"?r:JSON.stringify(r)):"{}"},te=r=>{let l=window.localStorage.getItem("rememberPassword_"+r);if(!l)return null;let s=JSON.parse(y.Z.decrypt_custom(l));return s.expdate<new Date().getTime()?(ee(r),null):{username:s.username,password:s.password}},M=()=>{Y("accessToken"),Y("X-Gisq-Token")},D=()=>{Y("userinfo")},ee=r=>{window.localStorage.removeItem("rememberPassword_"+r)},de=()=>X("accessDeviceId"),ie=()=>{Y("accessDeviceId")},p=(r,l)=>{let s=r.getFullYear(),u=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,_=r.getDate()<10?"0"+r.getDate():r.getDate(),v=r.getHours()<10?"0"+r.getHours():r.getHours(),x=r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),Q=r.getSeconds()<10?"0"+r.getSeconds():r.getSeconds(),be=r.getMilliseconds()<10?"0"+r.getMilliseconds():r.getMilliseconds();return l==1?s+"-"+u+"-"+_+" "+v+":"+x+":"+Q+"."+be:l==2?s+""+u+_+v+x+Q:l==3?s+"-"+u+"-"+_:s+"-"+u+"-"+_+" "+v+":"+x+":"+Q},k=r=>{let l="",s=r.substr(0,4),u=r.substr(4,2),_=r.substr(6,2),v=r.substr(8,2),x=r.substr(10,2),Q=r.substr(12,2);return l=s+"-"+u+"-"+_+" "+v+":"+x+":"+Q,l},I=(r,l)=>{let s={day:"\u5929",hour:"\u5C0F\u65F6",minute:"\u5206",seconds:"\u79D2",...l},u=r>=864e5?parseInt(r/864e5)+s.day:"",_=r%864e5;return u+=u.length>0||_>=36e5?parseInt(_/36e5)+s.hour:"",_=r%36e5,u+=u.length>0||_>=6e4?parseInt(_/6e4)+s.minute:"",_=r%6e4,u+=parseInt(_/1e3)+s.seconds,u},C=(r,l)=>{if(!l.headerBanner||!l.headerBanner.classList)return;let s=l.headerBanner.classList;r.target.scrollTop>10?s&&s.value.indexOf("scroll")==-1&&s.add("scroll"):s&&s.value.indexOf("scroll")>-1&&s.remove("scroll")},ae=r=>{if(typeof r=="string")return r=r.replace(/\|&nbsp;|\\/g,"").replace(/(^\s*)|(\s*$)/g,""),r==""||r==null||r=="null"||r==="undefined";if(typeof r>"u")return!0;if(typeof r=="number")return!1;if(typeof r=="boolean")return!1;if(typeof r=="object")return JSON.stringify(r)=="{}"?!0:r==null;if(r instanceof Array&&r.length==0)return!0},ne=r=>{let l=/^\d+(\.\d+)?$/,s=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!!(l.test(r)||s.test(r))},P=r=>Number(r).toFixed(2),Oe=r=>!r||r==""?null:r.toString().indexOf("/images")==0?q.Z.baseConfig.viewImageBaseURL+r:r.toString(),Te=r=>{let l='url("',s='")';return r.indexOf(l)>-1&&(r=r.substring(l.length)),r.indexOf(s)>-1&&(r=r.substring(0,r.length-s.length)),r},ve=(r,l)=>{if(!l||l==""||l=="none")return null;let s='url("',u='")';l.indexOf(s)>-1&&(l=l.substring(s.length)),l.indexOf(u)>-1&&(l=l.substring(0,l.length-u.length));let _={id:$().v4().replace(/-/g,""),name:null,type:null,url_real:null,url_temp:l,base64:null};if(l.indexOf("data:")>-1){let v=r.id;_.id=Z().SHA1(l).toString(Z().enc.Hex),_.type=l.substring(l.indexOf("image/")+6,l.indexOf(";")),_.name=v,_.url_real="/images/"+_.id+"."+_.type,_.base64=l}else{let v=l.substring(l.lastIndexOf("/"));_.name=v.substring(0,v.indexOf(".")),_.type=v.substring(v.indexOf(".")),_.url_real="/images/"+_.id+"."+_.type}return _},Fe=r=>{document.title=r},Be=(r,l)=>{let s,u,_,v;try{s=r.toString().split(".")[1].length}catch{s=0}try{u=l.toString().split(".")[1].length}catch{u=0}return _=Math.pow(10,Math.max(s,u)),v=s>=u?s:u,((r*_-l*_)/_).toFixed(v)},qe=(r,l)=>{if(l){if(!r)return l}else return r;for(let s in l)if(l[s]!=null&&l[s].constructor==Object)try{r[s]=qe(r[s],l[s])}catch(u){O.error(u)}else r[s]=l[s];return r},fe=(r,l)=>{if(l){if(!r)return l}else return r;for(let s in l)if(l[s]!=null&&l[s].constructor==Object)try{r[s]=fe(r[s],l[s])}catch(u){O.error(u)}else if(l[s]!=null&&l[s]instanceof Array&&l[s].length>0)if(l[s][0].constructor==Object){let u=[],_={};if(r[s])for(let v=0,x=r[s].length;v<x;v++)_[r[s][v].id]=v;for(let v=0,x=l[s].length;v<x;v++){let Q=l[s][v];_[Q.id]!==void 0?r[s][v]=fe(r[s][v],Q):u.push(Q)}if(r[s])for(let v=0,x=u.length;v<x;v++)r[s].push(u[v])}else for(let u=0;u<l[s].length;u++){let _=l[s][u];r[s].indexOf(_)===-1&&r[s].push(_)}else r[s]=l[s];return r},Le=(r,l,s)=>s||l||f.Z.state.board.boardConfig.canvasSetting.transformType=="autoBoth"&&f.Z.state.board.boardConfig.canvasSetting.authBothNoText?r:r*Math.min(f.Z.state.view.bodyFraction.windowH,f.Z.state.view.bodyFraction.windowW),Pe=(r,l)=>typeof l=="boolean"&&l?r:typeof l=="object"&&l.attr&&l.layout?l.attr.lockedW?r:l.layout.widgetW.old>0?r*l.attr.widgetW/l.layout.widgetW.old:0:r*f.Z.state.view.bodyFraction.windowW,Qe=(r,l)=>typeof l=="boolean"&&l?r:typeof l=="object"&&l.attr&&l.layout?l.attr.lockedH?r:l.layout.hh.old>0?r*l.attr.hh/l.layout.hh.old:0:r*f.Z.state.view.bodyFraction.windowH,ze=(r,l)=>l?r:r*Math.min(f.Z.state.view.bodyFraction.windowW,f.Z.state.view.bodyFraction.windowH),Ee=(r,l)=>{if(l==="auto"||l==="autoWidth")return r*f.Z.state.view.bodyFraction.windowScaleW;if(l==="autoHeight")return r*f.Z.state.view.bodyFraction.windowScaleH},xe=r=>{if(r){let l=r.toString();switch(l.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return!!l}}},Je=r=>{let l=r.toString().length,s;return l==5&&r=="china"?s="china":l<=2?s="geometryProvince/"+r:l<=4?s="geometryCities/"+r+"00":l<=6?s="geometryCouties/"+r+"00":l<=12&&(s="geometryTown/"+r),s},Ae=r=>{let l=c(403963);try{l=c(28544)("./"+r.widgetType+"/"+r.widgetGroup+"/"+r.widgetImg)}catch{}return{backgroundImage:"url("+l+")"}},Re=(r,l,s)=>{let u={},_={},v=[];return S().each(l,x=>{x.id=x[s.data.id]+"_"+x.applicationId,x.label=x[s.data.name],x.type="data",u[x[s.data.category]]||(u[x[s.data.category]]=[]),u[x[s.data.category]].push(x)}),S().each(r,x=>{x.id="category_"+x[s.category.id]+"_"+x.applicationId,x.label=x[s.category.name],x.type="category",x[s.category.parentId]!=null&&x[s.category.parentId]!=""?(_[x[s.category.parentId]]||(_[x[s.category.parentId]]=[]),_[x[s.category.parentId]].push(x)):v.push(x)}),pe(v,_,u,s.category.id),v},pe=(r,l,s,u)=>{S().each(r,_=>{let v=l[_[u]];v?(_.children=v,s[_[u]]&&S().each(s[_[u]],x=>{_.children.push(x)}),pe(v,l,s,u)):s[_[u]]&&(_.children=s[_[u]])})},Me=(r,l,s,u)=>new Promise((_,v)=>{(!l||l=="")&&(l="\u5168\u56FD");let x="http://api.map.baidu.com/place/v2/search?query="+r+"&region="+l+"&output=json&ak=8cyYUAN3bZGbZ2C8T4MD3T0HDOuDCm4x&page_size="+s+"&ret_coordtype=gcj02ll&page_num="+u;w.default.jsonp(x).then(Q=>{_(Q)}).catch(Q=>{v(Q)})}),je=()=>{if(typeof window.gisqbiParamIsMobile>"u"){let r=navigator.userAgent;window.gisqbiParamIsMobile=r.indexOf("Linux")>-1&&r.indexOf("Android")>-1||r.indexOf("iPhone")>-1||r.indexOf("MQQBrowser")>-1}return window.gisqbiParamIsMobile},ue=r=>{let l="";for(r||(r=4);l.length<r;l+=Math.random().toString(36).substr(2));return l.substr(0,r)},he=r=>{let l=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(r=r.toLowerCase(),r&&l.test(r)){if(r.length===4){let u="#";for(let _=1;_<4;_+=1)u+=r.slice(_,_+1).concat(r.slice(_,_+1));r=u}let s=[];for(let u=1;u<7;u+=2)s.push(parseInt("0x"+r.slice(u,u+2)));return"rgb("+s.join(",")+")"}else return r},Ze=r=>{if(r=r.toLowerCase(),r&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(r)){if(r.length===4){let u="#";for(let _=1;_<4;_+=1)u+=r.slice(_,_+1).concat(r.slice(_,_+1));r=u}let s=[];for(let u=1;u<7;u+=2)s.push(parseInt("0x"+r.slice(u,u+2)));return s.join(",")}else if(r.indexOf("rgb")>-1){r=r.substring(r.indexOf("(")+1,r.indexOf(")"));let s=r.split(",");return s.length=3,s.join(",")}return r},ge=r=>{if(r&&r.startsWith("rgba(")){let l="";r=r.trim(),r=r.substring(5,r.length-1);let s=r.split(",");s=s.map(u=>u.trim()-0);for(let u=0;u<3;++u){let _=s[u].toString(16);l+=_.length<2?"0"+_:_}if(s[3]&&s[3]<1){let u=Math.round(s[3]*100).toString(16);l+=u.length<2?"0"+u:u}return l}else return r},He=r=>{if(r.length<=8){let l="rgba(";for(let s=0;s<3;++s){let u=r.substr(s*2,2);l+=parseInt("0x"+u)+","}return r.length==8?l+=parseInt("0x"+r.substr(6))/100+")":l+="1)",l}else return r},Ve=r=>{try{let l=null;if(typeof r=="object"?r.canvasSetting?l=r.canvasSetting:l=r:typeof r=="string"&&(l=JSON.parse(r).canvasSetting),l&&l.loading&&l.loading.type!="default")return"&load="+l.loading.type+"$"+ge(l.loading.backgroundColor)+"$"+ge(l.loading.iconColor)}catch(l){O.log(l)}return""},Ce=(r,l,s)=>{s=s?s.toLowerCase():"asc",r.sort((u,_)=>l?s=="asc"?u[l]-_[l]:_[l]-u[l]:s=="asc"?u-_:_-u),r.forEach(u=>{u.children&&u.children.length>0&&Ce(u.children,l,s)})},Ue=async r=>new Promise((l,s)=>{const u=document.createElement("script");u.src=r,u.onload=l,u.onerror=s;const _=document.getElementsByTagName("script")[0];_.parentNode.insertBefore(u,_)}),me=r=>{let l=JSON.parse(JSON.stringify(r));if(l.dataSet){let s=typeof l.dataSet=="string"?JSON.parse(l.dataSet):l.dataSet;s.query&&s.query.script&&(s.query.script.enabled?s.query.script.content="":delete s.query.script),s.source&&(s.source=[]),l.dataSet=JSON.stringify(s)}else{if(l.query){let s=typeof l.query=="string",u=s?JSON.parse(l.query):l.query;u.script&&(u.script.enabled?u.script.content="":delete u.script,s&&(l.query=JSON.stringify(u)))}l.source&&(l.source=[])}if(q.Z.baseConfig.enc)if(l=l||JSON.parse(JSON.stringify(r)),l.dataSet){let s=JSON.parse(l.dataSet);s.query&&(s.query=y.Z.encrypt(typeof s.query=="string"?s.query:JSON.stringify(s.query))),s.dataSetParams&&(s.dataSetParams=y.Z.encrypt(typeof s.dataSetParams=="string"?s.dataSetParams:JSON.stringify(s.dataSetParams))),l.dataSet=JSON.stringify(s)}else l.query&&(l.query=y.Z.encrypt(typeof l.query=="string"?l.query:JSON.stringify(l.query))),l.dataSetParams&&(l.dataSetParams=y.Z.encrypt(typeof l.dataSetParams=="string"?l.dataSetParams:JSON.stringify(l.dataSetParams))),l.cfg&&(l.cfg=y.Z.encrypt(typeof l.cfg=="string"?l.cfg:JSON.stringify(l.cfg)));return l},we=r=>{let l=["10001","10002"];return S().filter(r,s=>S().contains(l,s.restypeId))},Ge=r=>{let l=document.createElement("link");l.setAttribute("rel","stylesheet"),l.setAttribute("class","iconLibrary"),l.setAttribute("href",q.Z.baseConfig.projectName+r),document.head.appendChild(l)},We=(r,l,s,u)=>{if(f.Z.state.index.application&&f.Z.state.index.application.applicationId&&f.Z.state.index.application.applicationId!=""){let _=null;switch(l){case"10001":return _=document.createElement("link"),_.setAttribute("rel","stylesheet"),_.setAttribute("href",q.Z.baseConfig.projectName+"/resource/"+f.Z.state.index.application.applicationId+r+"?v="+s),document.head.appendChild(_),_;case"10002":return _=document.createElement("script"),_.setAttribute("charset","utf-8"),_.setAttribute("type","application/javascript"),_.setAttribute("src",q.Z.baseConfig.projectName+"/resource/"+f.Z.state.index.application.applicationId+r+"?v="+s),u&&(_.onload=u,_.onerror=u),document.head.appendChild(_),_;default:O.error("\u672A\u77E5\u8D44\u6E90\u7C7B\u578B")}}else O.error("\u5E94\u7528ID\u4E3A\u7A7A")},Ke=(r,l)=>new Promise(()=>{r.reduce((s,u)=>s.then(()=>Se(u.fileUrlPath,u.restypeId,u.updatedTime)),Promise.resolve()).then(()=>{l&&l()}).catch(s=>(O.error("\u8D44\u6E90\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25:",s.name,s.message),Promise.reject(s)))}),Se=(r,l,s)=>{if(f.Z.state.index.application&&f.Z.state.index.application.applicationId&&f.Z.state.index.application.applicationId!=""){let u=null;switch(l){case"10001":return u=q.Z.baseConfig.projectName+"/resource/"+f.Z.state.index.application.applicationId+r+"?v="+s,new Promise((_,v)=>{const x=document.createElement("link");x.setAttribute("rel","stylesheet"),x.onload=()=>_(),x.onerror=()=>v(new Error(`Load css from ${u} failed`)),x.href=u;const Q=document.head||document.getElementsByTagName("head")[0];(document.body||Q).appendChild(x)});case"10002":return u=q.Z.baseConfig.projectName+"/resource/"+f.Z.state.index.application.applicationId+r+"?v="+s,new Promise((_,v)=>{const x=document.createElement("script");x.setAttribute("charset","utf-8"),x.setAttribute("type","application/javascript"),x.onload=()=>_(),x.onerror=()=>v(new Error(`Load script from ${u} failed`)),x.src=u;const Q=document.head||document.getElementsByTagName("head")[0];(document.body||Q).appendChild(x)});default:return O.error("\u672A\u77E5\u8D44\u6E90\u7C7B\u578B"),new Promise((_,v)=>{v()})}}else return O.error("\u5E94\u7528ID\u4E3A\u7A7A"),new Promise((u,_)=>{_()})},Xe={CryptoJS:y.Z.getCryptoJS(),encrypt:y.Z.encrypt,decrypt:y.Z.decrypt},Ye=(r,l,s)=>{if(!r||!r.dom){O.error("\u53C2\u6570\u9519\u8BEF");return}l||(l=function(u,_){u.toBlob(v=>{const x=document.createElement("a");x.download=_.filename||_.dom.id||"\u56FE\u7247",x.style.display="none",x.target="_blank",x.href=URL.createObjectURL(v),document.body.appendChild(x),x.click(),document.body.removeChild(x)})}),Promise.all([c.e(94009),c.e(23497)]).then(function(){const u=c(64707).Z;u(r.dom,{scale:r.scale||.5,useCORS:!0,allowTaint:!1}).then(_=>{l(_,r)}).catch(_=>{O.error(_),typeof s=="function"&&s(_)})}.bind(null,c)).catch(c.oe)},et=r=>Object.keys(r).reduce((l,s)=>l+(r[s]?`${s.split(/(?=[A-Z])/).join("-").toLowerCase()}:${r[s]};`:""),""),tt=(r,l)=>{let s=document.getElementById(r);s?s.innerHTML=l:(s=document.createElement("style"),s.id=r,s.innerHTML=l,document.getElementsByTagName("head")[0].appendChild(s))},ke=()=>window.location.pathname.indexOf("view.html")>-1||window.location.pathname.indexOf("query_view.html")>-1||f.Z.getters.isView,it=()=>window.location.pathname.indexOf("editor.html")>-1||window.location.pathname.indexOf("query_design.html")>-1,at=r=>{let l=null;return r&&r.type?l=r[r.type]:r&&r.source&&r.dimensions&&(l=r),l.source&&l.source.length>0&&l.dimensions?l.source.map(s=>{let u={};return l.dimensions.forEach((_,v)=>{u[_]=s[v]}),u}):[]},$e=r=>{let l=(new RegExp("[?|&]"+r+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[""])[1];return l!=null&&decodeURIComponent(l.replace(/\+/g,"%20"))||null},ot=(r,l)=>{if(!r)return null;let s=r.split(/\$\{(?!\d)[\wæøåÆØÅ]*\}/),_=(r.match(/[^{\}]+(?=})/g)||[]).map(v=>l[v]||(l[v]===void 0?"":l[v]));return String.raw({raw:s},..._)},rt=(r,l)=>{if(A.Z.state.viewType=="public")return!1;let s=!1,u=JSON.parse(E()),_=r.permissions,v=null;_&&_.length>0&&(v=_.find(Q=>Q.enabled&&Q.code===l));let x=window.localStorage.getItem("roleIds");if(u&&!u.roleIdArray&&x&&(u.roleIdArray=x.split(",")),v&&v.roles&&v.roles.length>0&&u&&u.roleIdArray){let Q=!1;for(let be in u.roleIdArray)if(v.roles.find(nt=>nt.roleId==u.roleIdArray[be])){Q=!0;break}s=v&&!v.roleHide?!Q:Q}else if(_)for(let Q=0;Q<_.length;Q++)_[Q].code==l&&_[Q].enabled&&(s=!_[Q].roleHide);return s}},848384:function(b,T,c){c.d(T,{Z:function(){return ce}});var m=function(){var h=this,F=h._self._c;return F("div",[h._t("prepend"),F("el-tooltip",{attrs:{"open-delay":1e3,content:h.options.attribute_enable_tooltip,effect:"light",placement:"top",disabled:h.options.attribute_enable_tooltip==null}},[h.options.attribute_enable!=null?F("el-switch",{on:{change:h.changeScript},model:{value:h.script_info.enable,callback:function(E){h.$set(h.script_info,"enable",E)},expression:"script_info.enable"}}):h._e()],1),h.script_info.enable==!0||h.options.attribute_enable==null?F("el-tooltip",{attrs:{"open-delay":1e3,content:"\u7F16\u8F91\u8981\u6267\u884C\u7684"+h.options.title+"\u811A\u672C\u5185\u5BB9",effect:"light",placement:"top"}},[F("el-button",{staticClass:"iconfont bi_edit4",style:h.button_style,attrs:{size:"small",type:"text"},on:{click:function(E){return h.editScript()}}})],1):h._e(),h._t("append"),F("query-script-dialog",{ref:"query_script_dialog",attrs:{script_info:h.script_info,options:h.options},on:{confirmScriptContent:h.confirmScriptContent}})],2)},$=[],q=function(){var h=this,F=h._self._c;return F("div",[F("el-dialog",{staticClass:"dialog-query-script",attrs:{title:h.dialog.title,"append-to-body":!0,"modal-append-to-body":!0,"close-on-click-modal":!1,visible:h.dialog.visible,width:h.dialog.width+"px"},on:{"update:visible":function(E){return h.$set(h.dialog,"visible",E)}}},[F("div",{staticClass:"my-query-script main-content",style:{height:h.dialog.height+"px",overflowY:"auto"}},[F("query-script-dialog-script",{ref:"query_script_dialog_script",attrs:{attribute_script_content:h.options.attribute_script_content,api:h.options.api,script_examples:h.new_script_examples}})],1),F("span",{attrs:{slot:"footer"},slot:"footer"},[F("el-button",{attrs:{size:"mini"},on:{click:function(E){h.dialog.visible=!1}}},[h._v("\u53D6\u6D88\u7F16\u8F91\u811A\u672C")]),F("el-button",{attrs:{size:"mini",type:"primary"},on:{click:h.confirm}},[h._v("\u786E\u5B9A\u7F16\u8F91\u811A\u672C")])],1)])],1)},f=[],B=function(){var h=this,F=h._self._c;return F("div",{ref:"query_box",staticClass:"query_box"},[F("div",{staticClass:"query_left"},[F("my-monaco-editor",{ref:"editorScript",attrs:{theme:"vs"},model:{value:h.script_content,callback:function(E){h.script_content=E},expression:"script_content"}})],1),F("el-tooltip",{attrs:{"open-delay":1e3,content:"\u5DE6\u53F3\u6ED1\u52A8\u8C03\u6574\u5927\u5C0F",effect:"light",placement:"top"}},[F("div",{ref:"queryResize",staticClass:"query_resize"},[h._v(" \u22EE ")])]),F("div",{staticClass:"query_mid"},[F("el-aside",{staticClass:"my-aside",attrs:{width:"150px"}},[F("el-row",[h._l(h.navMenu_list,function(E,te){return[F("el-col",{key:te,attrs:{span:24}},[E.divider?[F("el-divider",[h._v(h._s(E.name))])]:[F("div",{class:"my-navMenu-list "+(h.activated.id==E.id?"color_blue":""),on:{mouseenter:h.onMouseEnter,mouseleave:h.onMouseLeave,click:function(M){return h.onActivated(E)}}},[h._v(" "+h._s(E.name)+" ")])]],2)]})],2)],1),F("el-container",{staticStyle:{height:"100%"}},[F("my-monaco-editor",{directives:[{name:"show",rawName:"v-show",value:h.activated.type=="examples",expression:"activated.type == 'examples'"}],ref:"script_aip_examples",attrs:{theme:"vs"},model:{value:h.script_examples,callback:function(E){h.script_examples=E},expression:"script_examples"}}),F("my-monaco-editor",{directives:[{name:"show",rawName:"v-show",value:h.activated.type=="query",expression:"activated.type == 'query'"}],ref:"script_aip_query",attrs:{theme:"vs",language:"json"},model:{value:h.query_config,callback:function(E){h.query_config=E},expression:"query_config"}}),F("my-monaco-editor",{directives:[{name:"show",rawName:"v-show",value:h.activated.type=="global_params",expression:"activated.type == 'global_params'"}],ref:"script_aip_global_params",attrs:{theme:"vs",language:"json"},model:{value:h.global_params,callback:function(E){h.global_params=E},expression:"global_params"}}),F("div",{staticClass:"markdown-body",staticStyle:{"overflow-y":"auto"}},[F("vue-markdown",{staticClass:"my-markdown",attrs:{show:h.activated.type=="api",source:h.htmlMD}})],1)],1)],1)],1)},S=[],y=c(17977),w=c.n(y),J=c(148836),Z=c(149500),A={name:"query-script-dialog-script",components:{MyMonacoEditor:()=>Promise.resolve().then(c.bind(c,980424)),VueMarkdown:()=>Promise.all([c.e(824),c.e(61188)]).then(c.t.bind(c,659832,23))},props:{script_examples:{type:String,default:""},attribute_script_content:{type:String,default:""},api:{type:String,default:""}},data(){return{query_config:"",global_params:"",script_content:"",activated:{id:"examples",type:"examples"},mouseOverClassName:" background_color_grey",navMenu_list:[],htmlMD:""}},computed:{...(0,J.Se)(["queryConfigFun"]),queryConfig(){return this.queryConfigFun()}},mounted(){this.dragControllerDiv(),this.set_navMenu_list()},methods:{setScriptContent(z){this.script_content=z,this.activated.id="examples",this.activated.type="examples"},getScriptContent(){return this.script_content},onActivated(z){this.activated.id=z.id,this.activated.type=z.type,this.$nextTick(()=>{switch(this.activated.type){case"examples":this.activatedExamples();break;case"query":this.activatedQuery();break;case"global_params":this.activatedGlobalParams();break;case"api":w().get(z.url,{Message:{error:Z.log,info:Z.info,log:Z.log}}).then(h=>{this.htmlMD=h||`## \u63D0\u793A \r
  \u6682\u672A\u63D0\u4F9BAPI . `});break}})},activatedExamples(){this.$refs.script_aip_examples&&(this.$refs.script_aip_examples.initEditor(),this.$nextTick(()=>{this.$refs.script_aip_examples.formatDocument(),setTimeout(()=>{this.$refs.script_aip_examples.setReadOnly()},1e3)}))},activatedQuery(){this.query_config=JSON.stringify(this.queryConfig),this.$refs.script_aip_query&&(this.$refs.script_aip_query.initEditor(),this.$nextTick(()=>{this.$refs.script_aip_query.formatDocument(),setTimeout(()=>{this.$refs.script_aip_query.setReadOnly()},1e3)}))},activatedGlobalParams(){this.global_params=JSON.stringify(this.queryConfig.base.global_params.params),this.$refs.script_aip_global_params&&(this.$refs.script_aip_global_params.initEditor(),this.$nextTick(()=>{this.$refs.script_aip_global_params.formatDocument(),setTimeout(()=>{this.$refs.script_aip_global_params.setReadOnly()},1e3)}))},onMouseEnter(z){z.currentTarget.className=z.currentTarget.className+this.mouseOverClassName},onMouseLeave(z){let h=z.currentTarget.className.indexOf(this.mouseOverClassName);h>-1&&(z.currentTarget.className=z.currentTarget.className.substring(0,h)+z.currentTarget.className.substring(h+this.mouseOverClassName.length))},set_navMenu_list(){this.navMenu_list=[{id:"examples",name:"\u793A\u4F8B\u4EE3\u7801",type:"examples"},{id:"config",name:"\u67E5\u8BE2\u5217\u8868\u914D\u7F6E",type:"query"},{id:"global_params",name:"\u5168\u5C40\u53D8\u91CF",type:"global_params"}],this.navMenu_list=this.$$lib__.union(this.navMenu_list,[{name:"API",divider:!0},{id:"api",name:"\u811A\u672CAPI",type:"api",url:"./static/md/query/"+this.api+".md"},{id:"attributes",name:"\u901A\u7528\u5C5E\u6027",type:"api",url:"./static/md/query/attributes.md"},{id:"methods",name:"\u901A\u7528\u65B9\u6CD5",type:"api",url:"./static/md/query/methods.md"},{id:"events",name:"\u901A\u7528\u4E8B\u4EF6",type:"api",url:"./static/md/query/events.md"}])},dragControllerDiv:function(){let z=this;var h=document.getElementsByClassName("query_resize"),F=document.getElementsByClassName("query_left"),E=document.getElementsByClassName("query_mid"),te=document.getElementsByClassName("query_box");for(let M=0;M<h.length;M++)h[M].onmousedown=function(D){z.$refs.queryResize.focus(),h[M].style.background="#818181";var ee=D.clientX;return h[M].left=h[M].offsetLeft,document.onmousemove=function(de){var ie=de.clientX,p=h[M].left+(ie-ee),k=te[M].clientWidth-h[M].offsetWidth;p<200&&(p=200),p>k-200&&(p=k-200),h[M].style.left=p;for(let I=0;I<F.length;I++)F[I].style.width=p+"px",E[I].style.width=te[M].clientWidth-p-10+"px"},document.onmouseup=function(){h[M].style.background="#d6d6d6",document.onmousemove=null,document.onmouseup=null,h[M].releaseCapture&&h[M].releaseCapture(),z.$refs.editorScript.initEditor(),z.onActivated(z.activated)},h[M].setCapture&&h[M].setCapture(),!1}}}},O=A,V=c(768141),K=(0,V.Z)(O,B,S,!1,null,"c242c2f6",null),oe=K.exports,re={script_row_style:{script_examples:`/* \u8BF4\u660E
 row: \u884C\u6570\u636E
 rowIndex: \u884C\u7D22\u5F15
 styleInfo: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u6837\u5F0F
*/
styleInfo.height = '48px';
styleInfo.color = '#909399';
styleInfo.backgroundColor = '#f5f7fa';
styleInfo.fontFamily = 'SimHei';
styleInfo.fontSize = '14px';
return styleInfo;`},script_row_click:{script_examples:`/* \u8BF4\u660E
 row: \u884C\u6570\u636E
 column : \u5F53\u524D\u70B9\u51FB\u7684\u5B57\u6BB5\u4FE1\u606F
 event: \u4E8B\u4EF6\u5BF9\u8C61
 table_config: \u8868\u683C\u914D\u7F6E\u4FE1\u606F
*/
console.info('\u884C\u6570\u636E:',row);
console.info('\u5F53\u524D\u70B9\u51FB\u7684\u5B57\u6BB5\u4FE1\u606F:',column);
console.info('\u4E8B\u4EF6\u5BF9\u8C61:',event);
console.info('\u8868\u683C\u914D\u7F6E\u4FE1\u606F:',table_config);`},script_column_type_selection_value:{script_examples:`/* \u8BF4\u660E
 row: \u884C\u6570\u636E
 rowIndex: \u884C\u7D22\u5F15
 value: \u5F53\u524D\u8FD4\u56DE\u503C
*/
return rowIndex % 2 == 0; // \u5355\u6570\u884C\u53EF\u4EE5\u52FE\u9009`},script_header_row_style:{script_examples:`/* \u8BF4\u660E
 row: \u884C\u6570\u636E
 column: \u5217
 rowIndex: \u884C\u7D22\u5F15
 columnIndex: \u5217\u7D22\u5F15
 styleInfo: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u6837\u5F0F
*/
styleInfo.height = '48px';
styleInfo.color = '#909399';
styleInfo.backgroundColor = '#f5f7fa';
styleInfo.fontFamily = 'SimHei';
styleInfo.fontSize = '14px';
return styleInfo;`},script_button_style:{script_examples:`/* \u5217\u8868\u884C\u5185\u6709\u4EE5\u4E0B\u53C2\u6570
  row: \u5F53\u524D\u884C\u7684\u6570\u636E(\u4EC5\u5F53\u6309\u94AE\u5728\u5217\u8868\u884C\u5185\u624D\u6709)
  column: \u5F53\u524D\u5217\u7684\u4FE1\u606F(\u4EC5\u5F53\u6309\u94AE\u5728\u5217\u8868\u884C\u5185\u624D\u6709)
  $index: \u5F53\u524D\u884C\u7684\u4E0B\u6807(\u4EC5\u5F53\u6309\u94AE\u5728\u5217\u8868\u884C\u5185\u624D\u6709)
  button_config: \u6309\u94AE\u4FE1\u606F 
  style: \u5DF2\u7ECF\u914D\u7F6E\u8FC7\u7684\u6837\u5F0F 
 */
style.height = '60px';
style.color = '#000';
style.backgroundColor = '#ed43cb';
style.fontFamily = 'SimHei';
style.fontSize = '14px'; 
return style;
`},onClickScript:{script_examples:`/*  \u4EE5\u4E0B\u63D0\u4F9B\u51E0\u79CD\u5E38\u89C1\u7684\u5FEB\u6377\u9009\u9879\uFF0C\u590D\u5236\u6240\u9700\u8981\u7684\u811A\u672C\u5373\u53EF\uFF0C\u4E5F\u53EF\u81EA\u5DF1\u7F16\u5199  */

/* ============================= \u9009\u62E9\u65E5 ====================================== */

/* =============== \u4ECA\u5929 ================== */
picker.$emit('pick', new Date()); 


/* =============== \u6628\u5929 ================== */
const date = new Date();
date.setTime(date.getTime() - 3600 * 1000 * 24);
picker.$emit('pick', date); 


/* =============== \u4E00\u5468\u524D ================== */
const date = new Date();
date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);
picker.$emit('pick', date);



/* ============================= \u9009\u62E9\u65E5\u671F\u8303\u56F4 ====================================== */

/* =============== \u6700\u8FD1\u4E00\u5468 ================== */
const end = new Date();
const start = new Date();
start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);
picker.$emit('pick', [start, end]);


/* =============== \u6700\u8FD1\u4E00\u4E2A\u6708 ================== */
const end = new Date();
const start = new Date();
start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);
picker.$emit('pick', [start, end]);


/* =============== \u6700\u8FD1\u4E09\u4E2A\u6708 ================== */
const end = new Date();
const start = new Date();
start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);
picker.$emit('pick', [start, end]);




/* ============================= \u9009\u62E9\u6708\u4EFD\u8303\u56F4 ====================================== */

/* =============== \u672C\u6708 ================== */
picker.$emit('pick', [new Date(), new Date()]);


/* =============== \u4ECA\u5E74\u81F3\u4ECA ================== */
const end = new Date();
const start = new Date(new Date().getFullYear(), 0);
picker.$emit('pick', [start, end]);


/* =============== \u6700\u8FD1\u516D\u4E2A\u6708 ================== */
const end = new Date();
const start = new Date();
start.setMonth(start.getMonth() - 6);
picker.$emit('pick', [start, end]);
`},script:{script_examples:`/* \u8FD4\u56DE\u6700\u8FD1\u4E00\u5468\u7684\u8D77\u59CB\u548C\u7ED3\u675F\u65E5\u671F */
const end = new Date();
const start = new Date();
start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);
const data_arrary = [start, end];
return data_arrary;

/* \u8FD4\u56DE\u7528\u6237ID */
let userInfo_str = this.mUtils.getStoreUserInfo();
let userInfo = {};
if (userInfo_str) {
    userInfo = JSON.parse(userInfo_str);
}
return userInfo.userId;`},script_cell_click:{script_examples:`/* \u53C2\u6570\u8BF4\u660E
 row: \u5F53\u524D\u884C\u7684\u6570\u636E
 column: \u5F53\u524D\u5217\u7684\u4FE1\u606F
 cell: \u5F53\u524D\u5355\u5143\u683C\u7684\u4FE1\u606F
 event: \u4E8B\u4EF6\u4FE1\u606F
 column_config: \u5B57\u6BB5\u914D\u7F6E\u4FE1\u606F
*/

alert(JSON.stringify(row));`},script_cell_slot:{script_examples:`/* \u8FD4\u56DE\u5B57\u7B26\u4E32\u5185\u5BB9\uFF0C\u53EF\u4EE5\u662FHTML\u5185\u5BB9
  \u53C2\u6570\u8BF4\u660E
  row: \u5F53\u524D\u884C\u7684\u6570\u636E
  column: \u5F53\u524D\u5217\u7684\u4FE1\u606F
  $index: \u5F53\u524D\u884C\u7684\u4E0B\u6807
  column_config: \u5B57\u6BB5\u914D\u7F6E\u4FE1\u606F 
 */
return '<a style = "color: #409EFF; text-decoration: underline; cursor: pointer;" >' + row[column.property] + '</a>';
`},script_action:{script_examples:`/* \u53EF\u4F7F\u7528\u7684\u65B9\u6CD5\u8BF4\u660E*/
// \u76F8\u5173\u5185\u5BB9\u4ECB\u7ECD
console.info(this.form_condition); // \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\uFF08\u5305\u62EC\u66F4\u591A\u7B5B\u9009\u7684\u5F39\u7A97\u5185\u5BB9\uFF09\u7684\u503C\uFF0C\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539\u503C\uFF0C\u518D\u8FDB\u884C\u67E5\u8BE2\u64CD\u4F5C
this.doQuery(requestBody); // \u67E5\u8BE2\u6309\u94AE\u65B9\u6CD5;requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2
this.emptyHeader(); // \u6E05\u7A7A\u5934\u90E8\u67E5\u8BE2\u6761\u4EF6\u6309\u94AE\u65B9\u6CD5
this.doRefresh(); // \u5237\u65B0\u6309\u94AE\u65B9\u6CD5
this.doExportExcelCurrent(); // \u5BFC\u51FAExcel\uFF08\u5F53\u524D\u9875\uFF09\u6309\u94AE\u65B9\u6CD5
this.doExportExcelAll(); // \u5BFC\u51FAExcel\uFF08\u6240\u6709\uFF09\u6309\u94AE\u65B9\u6CD5
return this.form_condition;
// \u5934\u90E8\u76F8\u5173\u5185\u5BB9\u4ECB\u7ECD
let refHeader = this.$refs.refHeader;
console.info(refHeader.form_condition); // \u6240\u6709\u67E5\u8BE2\u6761\u4EF6\uFF08\u5305\u62EC\u66F4\u591A\u7B5B\u9009\u7684\u5F39\u7A97\u5185\u5BB9\uFF09\u7684\u503C\uFF0C\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539\u503C\uFF0C\u518D\u8FDB\u884C\u67E5\u8BE2\u64CD\u4F5C
refHeader.doQuery(requestBody); // \u67E5\u8BE2\u6309\u94AE\u65B9\u6CD5\uFF1BrequestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2
refHeader.emptyHeader(); // \u6E05\u7A7A\u5934\u90E8\u67E5\u8BE2\u6761\u4EF6\u6309\u94AE\u65B9\u6CD5
refHeader.doRefresh(); // \u5237\u65B0\u6309\u94AE\u65B9\u6CD5
refHeader.doExportExcelCurrent(); // \u5BFC\u51FAExcel\uFF08\u5F53\u524D\u9875\uFF09\u6309\u94AE\u65B9\u6CD5
refHeader.doExportExcelAll(); // \u5BFC\u51FAExcel\uFF08\u6240\u6709\uFF09\u6309\u94AE\u65B9\u6CD5

// \u5E95\u90E8\u76F8\u5173\u5185\u5BB9\u4ECB\u7ECD
let refMain = this.$refs.refMain;
// orders \u8BF4\u660E
// orders = null/undefined \u8868\u793A\u6062\u590D\u9ED8\u8BA4\u6392\u5E8F
// orders = {sort: "field", order: "desc"} sort \u4E3A\u5B57\u6BB5\u540D\uFF0Corder \u4E3Aasc\u548Cdesc
// orders = [{sort: "field", order: "desc"},{sort: "field", order: "desc"}]  \u591A\u4E2A\u5B57\u6BB5\u6392\u5E8F
refMain.setOrders({orders}); // \u8BBE\u7F6E\u6392\u5E8F\u5B57\u6BB5\uFF0C\u518D\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C

// \u5E95\u90E8\u76F8\u5173\u5185\u5BB9\u4ECB\u7ECD
let refFooter = this.$refs.refFooter;
refFooter.setPageNum({pageNum}); // \u8BBE\u7F6E\u5F53\u524D\u7684\u9875\u6570\uFF0C\u518D\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
refFooter.setPageSize({pageSize}); // \u8BBE\u7F6E\u5F53\u524D\u4E3A\u7B2C\u4E00\u9875\uFF0C\u6BCF\u9875\u6761\u6570\u540E\uFF0C\u518D\u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
`},title_style:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * style: \u9ED8\u8BA4\u6837\u5F0F
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
style.backgroundColor = "#EBEEF5";
style.borderBottom = "#E4E7ED 1px solid";
style.textAlign = "left";
style.fontWeight = "bold";
style.padding = "15px";
return style;`},title_button_style:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * style: \u9ED8\u8BA4\u6837\u5F0F
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
// \u5F39\u7A97\u6807\u9898
let dialogTitle = this.$refs["dialogTitle_" + dialog_config.guid];
if (dialogTitle && dialogTitle[0] && dialogTitle[0].parentElement && dialogTitle[0].children) {
    this.$$lib__.each(dialogTitle[0].parentElement.children, (el) => {
        // \u5F39\u7A97\u6807\u9898\u5185\u7684\u6309\u94AE
        if (el.tagName && el.tagName.toLocaleLowerCase() == "button") {
            // \u5F39\u7A97\u6807\u9898\u5185\u7684\u6309\u94AE\u4E0A\u8FB9\u8DDD
            if (dialog_config.title.button_style_top) {
                el.style.top = dialog_config.title.button_style_top + "px";
            }
            // \u5F39\u7A97\u6807\u9898\u5185\u7684\u6309\u94AE\u53F3\u8FB9\u8DDD
            if (dialog_config.title.button_style_right) {
                el.style.right = dialog_config.title.button_style_right + "px";
            }
            // \u5F39\u7A97\u6807\u9898\u5185\u7684\u6309\u94AE\u6807\u7B7E
            if (el.children && el.children[0] && el.children[0].tagName && el.children[0].tagName.toLocaleLowerCase() == "i") {
                // \u5F39\u7A97\u6807\u9898\u5185\u7684\u6309\u94AE\u6807\u7B7E\u989C\u8272
                if (dialog_config.title.button_style_color) {
                    el.children[0].style.color = dialog_config.title.button_style_color;
                }
                // \u5F39\u7A97\u6807\u9898\u5185\u7684\u6309\u94AE\u6807\u7B7E\u5927\u5C0F
                if (dialog_config.title.button_style_fontSize) {
                    el.children[0].style.fontSize = dialog_config.title.button_style_fontSize + "px";
                }
                // \u5F39\u7A97\u6807\u9898\u5185\u7684\u6309\u94AE\u56FE\u6807
                if (dialog_config.title.button_style_icon) {
                    el.children[0].className = "el-dialog__close " + dialog_config.title.button_style_icon;
                }            }
        }
    });
}`},container_style:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * style: \u9ED8\u8BA4\u6837\u5F0F
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
style.width = dialog_config.width - 20 + "px";
style.padding = "10px";
return style;`},footer_style:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * style: \u9ED8\u8BA4\u6837\u5F0F
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
style.width = dialog_config.width - 20 + "px";
style.padding = "10px";
return style;`},footer_button_click:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * dialog_config: \u5F53\u524D\u5F39\u7A97\u7684\u914D\u7F6E\u4FE1\u606F
 * button: \u5F53\u524D\u6309\u94AE\u7684\u914D\u7F6E\u4FE1\u606F
*/

// \u83B7\u53D6\u5F39\u7A97\u5BF9\u8C61
let dialogId = dialog_config.guid;
let ref_dialog = this.$refs["myDialog_" + dialogId];
console.info(ref_dialog);

// \u83B7\u53D6\u5F39\u7A97\u4E2D\u7684iframe\u5BF9\u8C61
let ref_iframe = this.$refs["dialogIframe_" + dialogId];
console.info(ref_iframe);

// \u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
this.doQuery(requestBody); // requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2  
// \u5173\u95ED\u5F53\u524D\u5F39\u7A97
this.doCloseDialog(dialog_config.guid);`},dialog_open:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E 
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
// \u6253\u5F00\u5F39\u7A97\uFF0C\u50CF\u5F39\u7A97\u5185\u7684iframe\u53D1\u9001postmessage\u4FE1\u606F
let data = {option:"\u5F39\u7A97\u6253\u5F00\u4E8B\u4EF6"};
let ref_iframe = this.$refs["dialogIframe_" + dialog_config.guid];
ref_iframe.contentWindow.postMessage(data, "*");`},dialog_opened:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E 
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
// \u6253\u5F00\u5F39\u7A97\uFF0C\u50CF\u5F39\u7A97\u5185\u7684iframe\u53D1\u9001postmessage\u4FE1\u606F
let data = {option:"\u5F39\u7A97\u6253\u5F00\u4E8B\u4EF6"};
let ref_iframe = this.$refs["dialogIframe_" + dialog_config.guid];
ref_iframe.contentWindow.postMessage(data, "*");`},before_close:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E 
 * done: \u5173\u95ED\u5F39\u7A97\u7684\u65B9\u6CD5\uFF08\u6CE8\u610F\uFF1A\u5FC5\u987B\u6267\u884Cdone()\u51FD\u6570\uFF0C\u5F39\u7A97\u624D\u4F1A\u5173\u95ED\uFF09
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
// \u5224\u65AD\u662F\u5426\u4FDD\u5B58\uFF0C\u672A\u4FDD\u5B58\u65F6\uFF0C\u65E0\u6CD5\u5173\u95ED\u5F39\u7A97
let is_save = this.getGlobalParamFun("is_save", null);
if (is_save == true) {
    done();
}`},dialog_close:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E 
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
// \u5173\u95ED\u5F39\u7A97\uFF0C\u6267\u884C\u5217\u8868\u67E5\u8BE2\u64CD\u4F5C
this.doQuery(requestBody); // requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2 `},dialog_closed:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E 
 * dialog_config: \u5F39\u7A97\u914D\u7F6E\u9879
*/
// \u5173\u95ED\u5F39\u7A97\uFF0C\u6267\u884C\u5217\u8868\u67E5\u8BE2\u64CD\u4F5C
this.doQuery(requestBody); // requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2 `},script_enum_filter:{script_examples:`/** \u53C2\u6570\u8BF4\u660E
 * enum_list: \u6240\u6709\u7684\u679A\u4E3E\u6570\u636E
 */
//-----------------------------\u884C\u653F\u533A\u9009\u62E9\u5668\u63A7\u4EF6\u793A\u4F8B---------------------
// \u83B7\u53D6\u5F53\u524D\u767B\u5F55\u7684\u7528\u6237\u4FE1\u606F
let userInfo_str = this.mUtils.getStoreUserInfo();
if (userInfo_str) {
    let userInfo = JSON.parse(userInfo_str);
    // \u5F53\u524D\u8D26\u53F7\u7684\u884C\u653F\u533A\u8BBE\u7F6E\u4E3A\u6839\u8282\u70B9\u884C\u653F\u533A
    this.tree_root = userInfo.tenant_id;
}
if (this.tree_root && this.tree_root != "") {
    // \u8FC7\u6EE4\u884C\u653F\u533A\u6570\u636E
    let list = this.$$lib__.filter(enum_list, (item) => {
        // \u8FD4\u56DE\u6839\u8282\u70B9\u4E0B\u9762\u7684\u6240\u6709\u884C\u653F\u533A\u6570\u636E
        return item.xzqCode.indexOf(this.tree_root) == 0;
    });
    return list;
}
else {
    return enum_list;
}
//-----------------------------\u884C\u653F\u533A\u9009\u62E9\u5668\u63A7\u4EF6\u793A\u4F8B---------------------

//-----------------------------\u4E0B\u62C9\u9009\u62E9\u6811\u548C\u7EA7\u8054\u9009\u62E9\u5668\u63A7\u4EF6\u793A\u4F8B---------------------
// \u8BBE\u7F6E\u6839\u8282\u70B9(\u5373parentEnumValue\u7684\u503C)
this.tree_root = "root";
// \u8FC7\u6EE4\u884C\u679A\u4E3E\u6570\u636E
let list = [];
this.$$lib__.each(enum_list, (item) => {
    // \u8FD4\u56DE\u6839\u8282\u70B9\u4E0B\u9762\u7684\u6240\u6709\u679A\u4E3E\u6570\u636E
    if (item.enumValue == "") {
        list.push(item);
    }
});
return list;
//-----------------------------\u4E0B\u62C9\u9009\u62E9\u6811\u548C\u7EA7\u8054\u9009\u62E9\u5668\u63A7\u4EF6\u793A\u4F8B---------------------

//-----------------------------\u4E0B\u62C9\u9009\u62E9\u5668\u63A7\u4EF6\u793A\u4F8B--------------------- 
// \u8FC7\u6EE4\u884C\u679A\u4E3E\u6570\u636E
let list = [];
this.$$lib__.each(enum_list, (item) => {
    // \u8FD4\u56DE\u6839\u8282\u70B9\u4E0B\u9762\u7684\u6240\u6709\u679A\u4E3E\u6570\u636E
    if (item.enumValue == "") {
        list.push(item);
    }
});
return list;
//-----------------------------\u4E0B\u62C9\u9009\u62E9\u5668\u63A7\u4EF6\u793A\u4F8B---------------------`},script_shape_style:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * style: \u9ED8\u8BA4\u6837\u5F0F
*/
style.lineHeight = "30px";
style.backgroundColor = "#f5f7fa";
return style;`},script_card_style:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * field_config: \u5B57\u6BB5\u914D\u7F6E\u4FE1\u606F
 * content_value: \u5B57\u6BB5\u5185\u5BB9\u503C
 * style: \u9ED8\u8BA4\u6837\u5F0F
*/
style.lineHeight = "30px";
style.backgroundColor = "#f5f7fa";
return style;`},script_condition_enter:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * condition_config: \u67E5\u8BE2\u6761\u4EF6\u914D\u7F6E\u4FE1\u606F
 * value\uFF1A\u5F53\u524D\u67E5\u8BE2\u6761\u4EF6\u7684\u503C
*/ 
console.info(value);
// \u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
this.doQuery(requestBody); // requestBody\u53EF\u4E3A\u7A7A\uFF0C\u9700\u8981\u8BBE\u7F6E\u7279\u6B8A\u7684\u67E5\u8BE2\u6761\u4EF6\u65F6\uFF0C\u53EF\u4F20\u53C2\u8FDB\u884C\u67E5\u8BE2`},script_icon_click:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * condition_config: \u67E5\u8BE2\u6761\u4EF6\u914D\u7F6E\u4FE1\u606F
 * value\uFF1A\u5F53\u524D\u67E5\u8BE2\u6761\u4EF6\u7684\u503C
*/ 
console.info(value);
// \u6267\u884C\u67E5\u8BE2\u64CD\u4F5C
this.doQuery();`},script_change_value:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * condition_config: \u67E5\u8BE2\u6761\u4EF6\u914D\u7F6E\u4FE1\u606F
 * value\uFF1A\u5F53\u524D\u67E5\u8BE2\u6761\u4EF6\u7684\u503C
*/

// ======= \u793A\u4F8B\uFF1A\u6E05\u7A7A\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6\u7684\u9009\u4E2D\u503C\uFF0C\u5E76\u91CD\u65B0\u83B7\u53D6\u6B64\u67E5\u8BE2\u6761\u4EF6\uFF08\u6570\u636E\u96C6\u679A\u4E3E\uFF09\u7684\u5907\u9009\u6570\u636E

// \u6E05\u7A7A\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6\u7684\u9009\u4E2D\u503C\uFF0CkeyID \u4E3A\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6\u7684\u4E3B\u952EID
this.setConditionValue(keyID, null); 

/**  \u91CD\u65B0\u83B7\u53D6\u6B64\u67E5\u8BE2\u6761\u4EF6\uFF08\u6570\u636E\u96C6\u679A\u4E3E\uFF09\u7684\u5907\u9009\u6570\u636E
* 
* \u6B64\u67E5\u8BE2\u6761\u4EF6\u5FC5\u987B\u4E3A\u4E0B\u62C9\u9009\u62E9\u5668\u6216\u8005\u4E0B\u62C9\u6811\u9009\u62E9\u5668\u63A7\u4EF6
* \u540C\u65F6\uFF0C\u5907\u9009\u6570\u636E\u662F\u4F7F\u7528\u6570\u636E\u96C6\u679A\u4E3E\uFF0C\u4E14\u8BBE\u7F6E\u4E86\u53C2\u6570\uFF0C\u4E14\u53C2\u6570\u7ED1\u5B9A\u5230\u5168\u5C40\u53D8\u91CF
* 
*/

// \u66F4\u65B0\u5168\u5C40\u53D8\u91CF\u6570\u636E
let info = { "param_name": value, widgetId: this.widgetId}; // param_name \u4E3A\u5168\u5C40\u53D8\u91CF\u8BBE\u7F6E\u7684\u53C2\u6570\u540D, widgetId \u4E3A\u67E5\u8BE2\u5217\u8868\u7EC4\u4EF6ID
this.setViewGlobalParam(info); // \u66F4\u65B0\u5168\u5C40\u53D8\u91CF\u7684\u65B9\u6CD5
// \u91CD\u65B0\u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6\u7684\u5907\u9009\u6570\u636E\uFF0C\u5373\u91CD\u65B0\u83B7\u53D6\u6570\u636E\u96C6\u6570\u636E
this.getEnumDataSetJson(keyID); // keyID \u4E3A\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6\u7684\u4E3B\u952EID

// ======= \u793A\u4F8B\uFF1A\u6E05\u7A7A\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6\u7684\u9009\u4E2D\u503C\uFF0C\u5E76\u91CD\u65B0\u83B7\u53D6\u6B64\u67E5\u8BE2\u6761\u4EF6\uFF08\u6570\u636E\u96C6\u679A\u4E3E\uFF09\u7684\u5907\u9009\u6570\u636E
`},script_description_text:{script_examples:`/**  \u53C2\u6570\u8BF4\u660E
 * requestData\uFF1A\u7ED1\u5B9A\u7684\u6570\u636E\u8BF7\u6C42\u7684\u6570\u636E
 * label\uFF1A\u7ED1\u5B9A\u7684\u6570\u636E\u8BF7\u6C42\u5BF9\u5E94\u7684\u5B57\u6BB5\u5185\u5BB9
 * description_config: \u7EDF\u8BA1\u8BF4\u660E\u7684\u914D\u7F6E\u4FE1\u606F
*/
console.info(label); // \u6253\u5370\u5B57\u6BB5\u5185\u5BB9
console.info(requestData); // \u6570\u636E\u8BF7\u6C42\u7684\u6570\u636E
// \u8FD4\u56DE\u5185\u5BB9
return label;`},script_empty_text:{script_examples:`/* \u8BF4\u660E
 table_config: \u8868\u683C\u914D\u7F6E\u4FE1\u606F
*/
console.info('\u8868\u683C\u914D\u7F6E\u4FE1\u606F:',table_config);
return '\u6682\u65E0\u6570\u636E\uFF0C<a style="color: blue;">\u8BF7\u6DFB\u52A0\u6570\u636E</a>';`}},j={name:"query-script-dialog",components:{QueryScriptDialogScript:oe},props:{script_info:{type:Object,default:()=>{}},options:{type:Object,default:()=>({attribute_enable:"",attribute_script:"",title:"",script_examples:""})}},data(){return{new_script_examples:"",dialog:{width:0,height:0,visible:!1,title:"\u53D1\u9001\u4E8B\u4EF6"}}},mounted(){this.dialog.height=window.innerHeight-140,this.dialog.width=window.innerWidth-40},methods:{openDialog(){this.dialog.title="\u7F16\u8F91"+this.options.title+"\u811A\u672C",this.setScriptExamples(),this.dialog.visible=!0,this.$nextTick(()=>{this.$refs.query_script_dialog_script.setScriptContent(this.script_info.script_content)})},setScriptExamples(){this.options&&this.options.script_examples&&this.options.script_examples!=""?this.new_script_examples=this.options.script_examples:re[this.options.attribute_script_content]&&(this.new_script_examples=re[this.options.attribute_script_content].script_examples)},confirm(){let z=this.$refs.query_script_dialog_script.getScriptContent();this.$emit("confirmScriptContent",z),this.dialog.visible=!1}}},R=j,W=(0,V.Z)(R,q,f,!1,null,"174a8eec",null),U=W.exports,X={name:"query-script",components:{QueryScriptDialog:U},model:{prop:"script_object",event:"change"},props:{script_object:{type:Object,default:()=>({})},options:{type:Object,default:()=>({attribute_enable:"",attribute_enable_tooltip:"",attribute_script_content:"",title:"",script_examples:"",api:"",button_style:{}})}},data(){return{script_info:{enable:!1,script:""},button_style:{color:"#557CEC",fontSize:"larger",marginLeft:"10px",padding:0}}},watch:{script_object:{deep:!0,handler:function(){this.setScriptInfo()}}},mounted(){this.setScriptInfo()},methods:{setScriptInfo(){this.script_info.enable=this.script_object[this.options.attribute_enable],this.script_info.script_content=this.script_object[this.options.attribute_script_content],this.options.button_style&&(this.button_style=JSON.parse(JSON.stringify(this.options.button_style)))},changeScript(){this.script_object[this.options.attribute_enable]=this.script_info.enable,this.script_object[this.options.attribute_script_content]=this.script_info.script_content,this.$emit("change",this.script_object)},editScript(){this.script_info.enable=this.script_object[this.options.attribute_enable],this.script_info.script_content=this.script_object[this.options.attribute_script_content],this.$refs.query_script_dialog.openDialog()},confirmScriptContent(z){this.script_info.script_content=z,this.changeScript()}}},Y=X,se=(0,V.Z)(Y,m,$,!1,null,"9c8894fc",null),ce=se.exports}},_t={};function N(b){var T=_t[b];if(T!==void 0)return T.exports;var c=_t[b]={id:b,loaded:!1,exports:{}};return ut[b].call(c.exports,c,c.exports,N),c.loaded=!0,c.exports}N.m=ut,function(){N.amdO={}}(),function(){var b=[];N.O=function(T,c,m,$){if(c){$=$||0;for(var q=b.length;q>0&&b[q-1][2]>$;q--)b[q]=b[q-1];b[q]=[c,m,$];return}for(var f=1/0,q=0;q<b.length;q++){for(var c=b[q][0],m=b[q][1],$=b[q][2],B=!0,S=0;S<c.length;S++)($&!1||f>=$)&&Object.keys(N.O).every(function(O){return N.O[O](c[S])})?c.splice(S--,1):(B=!1,$<f&&(f=$));if(B){b.splice(q--,1);var y=m();y!==void 0&&(T=y)}}return T}}(),function(){N.n=function(b){var T=b&&b.__esModule?function(){return b.default}:function(){return b};return N.d(T,{a:T}),T}}(),function(){var b=Object.getPrototypeOf?function(c){return Object.getPrototypeOf(c)}:function(c){return c.__proto__},T;N.t=function(c,m){if(m&1&&(c=this(c)),m&8||typeof c=="object"&&c&&(m&4&&c.__esModule||m&16&&typeof c.then=="function"))return c;var $=Object.create(null);N.r($);var q={};T=T||[null,b({}),b([]),b(b)];for(var f=m&2&&c;typeof f=="object"&&!~T.indexOf(f);f=b(f))Object.getOwnPropertyNames(f).forEach(function(B){q[B]=function(){return c[B]}});return q.default=function(){return c},N.d($,q),$}}(),function(){N.d=function(b,T){for(var c in T)N.o(T,c)&&!N.o(b,c)&&Object.defineProperty(b,c,{enumerable:!0,get:T[c]})}}(),function(){N.f={},N.e=function(b){return Promise.all(Object.keys(N.f).reduce(function(T,c){return N.f[c](b,T),T},[]))}}(),function(){N.u=function(b){return"static/js/"+(b===61188?"VueMarkdown":b)+"."+{824:"54563975",1030:"1c7c40b3",2465:"030986b4",2739:"1edfe9f9",2871:"5fb8ef3f",3850:"0cb17409",4116:"836d7fe1",4527:"83f2f2c1",6206:"885858a8",6977:"06170801",7090:"3af70bbe",7556:"bc5bff9d",8646:"d0ffd548",8890:"7a2bf188",10482:"c693da24",11174:"83640ee5",11183:"f9de8541",12768:"9ced6a87",12826:"ccca38ce",13621:"e7993f3f",14849:"9d7da7ba",14931:"09991168",15690:"4b6d5e72",17745:"edef5c2e",17813:"add0c0c5",18587:"9382e9ef",19471:"9d2d0b96",20098:"f7918d90",20755:"3022f02d",22305:"09cb9b2c",22707:"7af46e92",23497:"b4871df2",23731:"78eec250",25362:"106dbc59",26591:"827ad4d0",27737:"5df39411",27992:"993016d6",28748:"db5194ee",29865:"5afe550b",29932:"eef4dddb",29936:"ca12ad66",30198:"2799bfa6",30830:"367c3c4e",31357:"fa17eba2",32002:"950a19fd",32132:"3e64b9c3",32602:"941edfc8",32654:"5cbc6c98",33217:"13e53db7",33332:"129c8a7e",35151:"6462a7c8",35485:"5a5c243f",36456:"7b957eb3",36968:"d067d249",37040:"1d245d41",39450:"86b54115",39943:"a3ee5d8e",40028:"e9f535bc",41e3:"6a48ead4",41585:"f2b24ba7",42019:"d980a86e",43446:"2ed7ef89",44564:"c53cae66",44777:"c527054e",46113:"486307ea",46564:"732d4ba1",47558:"a3712fe0",48773:"2432ba7b",49558:"bff864fc",49639:"79100752",50189:"8e7f0bb1",51068:"f8dfa219",52605:"99a2d589",52830:"9e2a7bf0",52864:"2fee1bf9",53210:"751935dd",53932:"61747f4e",54188:"f0c9fff9",54197:"7723e5b2",55482:"7962003a",55660:"2e8c12fd",59452:"352ca5c4",61188:"2a94bd6e",62368:"1609b5cb",62732:"43a4df77",63106:"9d6b6c74",63995:"7e653c8c",64510:"4980f251",64529:"b5677fc2",64879:"87d0cf1c",65056:"b7d7c901",68397:"c5834e75",68433:"5d39b9d9",68684:"389e314b",69796:"f5b81cd7",71147:"6f85b64a",72217:"3ab89416",72568:"084fe310",73641:"b8799aca",74214:"9638e810",75201:"715ec1ed",75305:"0ea7e8ae",77334:"b65a0d1a",77414:"04743487",79273:"8162b234",80709:"e4d440a6",81080:"2953be8a",81346:"4a5c9c29",81435:"d9ce6e19",81814:"cda8444c",81978:"a7c0863a",82157:"2468c708",82876:"6b63d707",83676:"539e9554",84296:"9b88c442",86961:"aa9e1b9c",88362:"15990839",88545:"717156a8",89536:"db2d5a69",90099:"1c62466f",90926:"79efcd43",91374:"ed6881e7",92241:"b4e9b97a",92427:"c3b43a61",94009:"843f0bf8",96831:"5b154aa1",97060:"df3c7e18",97698:"6ec4a630",97986:"6683bd1e",98706:"52af0981",99096:"afd32c04",99147:"d7711819"}[b]+".js"}}(),function(){N.miniCssF=function(b){return"static/css/"+b+"."+{2739:"346bf361",13621:"4b9a6c41",14849:"b473f9d9",28748:"a072ff8c",36968:"5fdf268e",41e3:"187af014",41585:"2aed1dfd",44777:"4096670b",75201:"8461def7",81435:"31f05bfd",90099:"1d01d7b2"}[b]+".css"}}(),function(){N.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){N.o=function(b,T){return Object.prototype.hasOwnProperty.call(b,T)}}(),function(){var b={},T="datavisual:";N.l=function(c,m,$,q){if(b[c]){b[c].push(m);return}var f,B;if($!==void 0)for(var S=document.getElementsByTagName("script"),y=0;y<S.length;y++){var w=S[y];if(w.getAttribute("src")==c||w.getAttribute("data-webpack")==T+$){f=w;break}}f||(B=!0,f=document.createElement("script"),f.charset="utf-8",f.timeout=120,N.nc&&f.setAttribute("nonce",N.nc),f.setAttribute("data-webpack",T+$),f.src=c),b[c]=[m];var J=function(A,O){f.onerror=f.onload=null,clearTimeout(Z);var V=b[c];if(delete b[c],f.parentNode&&f.parentNode.removeChild(f),V&&V.forEach(function(K){return K(O)}),A)return A(O)},Z=setTimeout(J.bind(null,void 0,{type:"timeout",target:f}),12e4);f.onerror=J.bind(null,f.onerror),f.onload=J.bind(null,f.onload),B&&document.head.appendChild(f)}}(),function(){N.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})}}(),function(){N.nmd=function(b){return b.paths=[],b.children||(b.children=[]),b}}(),function(){N.j=54883}(),function(){N.p=""}(),function(){if(!(typeof document>"u")){var b=function($,q,f,B,S){var y=document.createElement("link");y.rel="stylesheet",y.type="text/css";var w=function(J){if(y.onerror=y.onload=null,J.type==="load")B();else{var Z=J&&J.type,A=J&&J.target&&J.target.href||q,O=new Error("Loading CSS chunk "+$+` failed.
(`+Z+": "+A+")");O.name="ChunkLoadError",O.code="CSS_CHUNK_LOAD_FAILED",O.type=Z,O.request=A,y.parentNode&&y.parentNode.removeChild(y),S(O)}};return y.onerror=y.onload=w,y.href=q,f?f.parentNode.insertBefore(y,f.nextSibling):document.head.appendChild(y),y},T=function($,q){for(var f=document.getElementsByTagName("link"),B=0;B<f.length;B++){var S=f[B],y=S.getAttribute("data-href")||S.getAttribute("href");if(S.rel==="stylesheet"&&(y===$||y===q))return S}for(var w=document.getElementsByTagName("style"),B=0;B<w.length;B++){var S=w[B],y=S.getAttribute("data-href");if(y===$||y===q)return S}},c=function($){return new Promise(function(q,f){var B=N.miniCssF($),S=N.p+B;if(T(B,S))return q();b($,S,null,q,f)})},m={54883:0};N.f.miniCss=function($,q){var f={2739:1,13621:1,14849:1,28748:1,36968:1,41e3:1,41585:1,44777:1,75201:1,81435:1,90099:1};m[$]?q.push(m[$]):m[$]!==0&&f[$]&&q.push(m[$]=c($).then(function(){m[$]=0},function(B){throw delete m[$],B}))}}}(),function(){var b={54883:0};N.f.j=function(m,$){var q=N.o(b,m)?b[m]:void 0;if(q!==0)if(q)$.push(q[2]);else{var f=new Promise(function(w,J){q=b[m]=[w,J]});$.push(q[2]=f);var B=N.p+N.u(m),S=new Error,y=function(w){if(N.o(b,m)&&(q=b[m],q!==0&&(b[m]=void 0),q)){var J=w&&(w.type==="load"?"missing":w.type),Z=w&&w.target&&w.target.src;S.message="Loading chunk "+m+` failed.
(`+J+": "+Z+")",S.name="ChunkLoadError",S.type=J,S.request=Z,q[1](S)}};N.l(B,y,"chunk-"+m,m)}},N.O.j=function(m){return b[m]===0};var T=function(m,$){var q=$[0],f=$[1],B=$[2],S,y,w=0;if(q.some(function(Z){return b[Z]!==0})){for(S in f)N.o(f,S)&&(N.m[S]=f[S]);if(B)var J=B(N)}for(m&&m($);w<q.length;w++)y=q[w],N.o(b,y)&&b[y]&&b[y][0](),b[y]=0;return N.O(J)},c=self.webpackChunkdatavisual=self.webpackChunkdatavisual||[];c.forEach(T.bind(null,0)),c.push=T.bind(null,c.push.bind(c))}();var ft=N.O(void 0,[94998,13064],function(){return N(141272)});ft=N.O(ft)})();
