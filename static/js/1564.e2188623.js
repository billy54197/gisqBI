"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[1564],{598521:function(M,v,a){var x=a(275770),w=a(927966),d=a(555616),C=a.n(d),E=a(149500);v.Z={autoShow(I,A,L){let l=I;if(l.innerAutoShowInterval&&l.innerAutoShowInterval>-1&&(clearInterval(l.innerAutoShowInterval),l.innerAutoShowInterval=-1,A.dispatchAction({type:"downplay",dataIndex:l.innerAutoShowIndex}),l.innerAutoShowIndex=0),!(I&&A&&L&&L.enabled&&L.interval>0))return;let o=L.showTip;typeof l.innerAutoShowIndex>"u"&&(l.innerAutoShowIndex=0),l.innerAutoShowInterval=setInterval(function(){let p=A.getOption(),O=0,u=0;p.series[O].data?u=p.series[O].data.length:p.dataset&&p.dataset.length>0&&(u=p.dataset[0].source.length),u!=0&&(A.dispatchAction({type:"downplay",dataIndex:l.innerAutoShowIndex}),l.innerAutoShowIndex=(l.innerAutoShowIndex+1)%u,A.dispatchAction({type:"highlight",dataIndex:l.innerAutoShowIndex}),o&&A.dispatchAction({type:"showTip",seriesIndex:O,dataIndex:l.innerAutoShowIndex}),F(l,l.innerAutoShowIndex,O,p))},L.interval*1e3);function F(p,O,u,N){let c=p.widgetInfo;p.$$lib__.each(c.action.sendOut.actionList,m=>{if(m.enabled&&m.code==x.default.autoHighLight.code){let P=c.dataset[c.dataset.type].dimensions,k=m.code+"_"+c.id,D={},_=[];if(c.dataset[c.dataset.type].source&&c.dataset[c.dataset.type].source.length>0&&(_=c.dataset[c.dataset.type].source[O]),D.x=p.getFieldVal(_,P,N.series[u].encode.x),D.y=p.getFieldVal(_,P,N.series[u].encode.y),p.getExtendParams(D,m.paramsExtend,_,P),m.script&&m.script.enabled){if(E.log("Execute script for "+c.name+" component to "+m.name+" component"),m.script.content==""){d.Message.warning({message:m.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}try{D=new Function("param,autoShowIndex,seriesIndex, opts",m.script.content).apply(p,[D,O,u,N])}catch(z){E.error(z)}}w.Z.$emit(k,D),m.postMessage&&p.doPostMessage(D)}})}}}},56279:function(M,v,a){a.d(v,{P:function(){return d}});var x=a(386892),w=a(149500);const d={mixins:[x.D],created(){},methods:{lifecycleBeforeChartsLoad(C){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&w.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),w.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let I=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[C]);if(I)return I}return C},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&w.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),w.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(M,v,a){a.d(v,{X:function(){return x},b:function(){return w}});let x={versions:function(){var d=navigator.userAgent;return{trident:d.indexOf("Trident")>-1,presto:d.indexOf("Presto")>-1,webKit:d.indexOf("AppleWebKit")>-1,gecko:d.indexOf("Gecko")>-1&&d.indexOf("KHTML")==-1,mobile:!!d.match(/AppleWebKit.*Mobile.*/),ios:!!d.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:d.indexOf("Android")>-1,iPhone:d.indexOf("iPhone")>-1,iPad:d.indexOf("iPad")>-1,webApp:d.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},w;x.versions.mobile||x.versions.ios||x.versions.android||x.versions.iPhone||x.versions.iPad?w=!1:w=!0},101564:function(M,v,a){a.r(v),a.d(v,{default:function(){return z}});var x=function(){var e=this,s=e._self._c;return s("div",{style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}},[s("hide-button",{attrs:{attr:e.widgetInfo.attr}}),s("div",{ref:"lineAreaStack",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px"}})],1)},w=[],d=a(844513),C=a(927966),E=a(56279),I=a(445061),A=a(126711),L=a(697490),l=a(99349),o=a(598521),F=a(555616),p=a(275770),O=a(67157),u=a(150813);const N={mixins:[O.c],data(){return{config_extend:{config:{series:[{itemStyle:{color:"#222227"}},{itemStyle:{color:"#29CC97"}}]}},filter_config:{title:JSON.parse(JSON.stringify(u.Z.charts.title)),legend:JSON.parse(JSON.stringify(u.Z.charts.legend)),tooltip:JSON.parse(JSON.stringify(u.Z.charts.tooltip)),toolbox:JSON.parse(JSON.stringify(u.Z.charts.toolbox)),xAxis:JSON.parse(JSON.stringify(u.Z.charts.xAxis)),yAxis:JSON.parse(JSON.stringify(u.Z.charts.yAxis)),series:[{areaStyle:{colorInfo:{type:"pureColor",pureColor:"rgba(41, 204, 151, 0.2)",gradation:{top:"rgba(146, 203, 255, 1)",bottom:"rgba(20, 122, 217, 1)"}},opacity:1},itemStyle:{opacity:1,color:"#29CC97"}}]}}},methods:{filterPredefineColoursSchemeConfig(t,e){this.getNewConfigWithArrary(t,e,this.filter_config)}}};var c=a(149500);const m=a(954255);var P={name:"LineAreaStack",components:{HideButton:d.Z},mixins:[L.baseConfig,E.P,I.u,A.H,l.P,N],props:["widgetInfo"],data(){return{dimensionsAliasEx:null,innerAutoShowIndex:0}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.echarts=m.init(this.$refs.lineAreaStack,null,{devicePixelRatio:2}),this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo),this.initClick(this.widgetInfo)},destroyed(){this.echarts.dispose(),this.clearAutoCarousel()},methods:{loadInfo(t){t.dataset[t.dataset.type]&&(this.source=t.dataset[t.dataset.type].source,this.dimensionsEx=t.dataset[t.dataset.type].dimensions),t.config.drillDown&&t.config.drillDown.enable==!0?(this.drillDown=JSON.parse(JSON.stringify(t.config.drillDown)),delete this.drillDown.graphic,this.drillDown.pid_arrary=[],this.doDrillDown(t,!0)):this.beforeRenderEcharts(t,this.source)},renderEcharts(t,e){let s=[],r=[],f=[];t.dataset[t.dataset.type]&&(s=t.dataset[t.dataset.type].dimensions,r=t.dataset[t.dataset.type].dimensionsAlias,f=t.dataset[t.dataset.type].encode),this.dimensionsAliasEx=r;let i=JSON.parse(JSON.stringify(t.config.series)),G=this.getTooltip(t.config.tooltip),R=JSON.parse(JSON.stringify(t.config.toolbox)),y=JSON.parse(JSON.stringify(t.config.legend)),b=JSON.parse(JSON.stringify(t.config.title)),Z=JSON.parse(JSON.stringify(t.config.grid)),h=JSON.parse(JSON.stringify(t.config.xAxis)),g=JSON.parse(JSON.stringify(t.config.yAxis)),K=[];if(t.config.drillDown&&t.config.drillDown.enable==!0){let n=this.getGraphic(t.config.drillDown.graphic);n&&n.elements&&n.elements.length>0&&(n.elements[0].ignore=this.drillDown.pid_arrary.length<1),K.push(n)}for(let n=0;n<i.length;n++){i[n].dimensions=s,i[n].type="line",i[n].lineWidth&&(i[n].lineWidth=i[n].lineWidth+"%"),i[n].encode.x=f.x,i[n].encode.y=f.y[n],i[n].name=this.getLegendData(r,i[n].encode.y),i[n].areaStyle.colorInfo.type&&(i[n].areaStyle.color=this.getItemStyleColor(i[n].areaStyle.colorInfo));let J={},B=[],W=[];for(let S=i[n].dimensions.length-1;S>-1;--S)J[s[S]]=S;for(let S=0;S<e.length;++S){let H=e[S],T={};for(let $ in J)T[$]=H[J[$]]||"";B.push({value:H[J[f.y[n]]]||"",row:T}),W.push(H[J[f.x]]||"")}if(i[n].data=B,h.data=W,i[n].emphasis)try{if(i[n].emphasis.script&&i[n].emphasis.script.enabled){if(i[n].emphasis.script.content)try{let S=this,H=new Function("index","item","data",i[n].emphasis.script.content);i[n].data.forEach((T,$)=>{let U=H.call(S,$,T,B);i[n].data[$]={value:T,emphasis:U}})}catch(S){c.error("\u81EA\u5B9A\u4E49\u9AD8\u4EAE\u6837\u5F0F\u811A\u672C\u62A5\u9519\uFF1A",S)}}else i[n].emphasis.itemStyle&&i[n].emphasis.itemStyle.color&&(i[n].emphasis={itemStyle:{...i[n].emphasis.itemStyle}})}catch(S){c.error("\u5904\u7406\u9AD8\u4EAE\u6837\u5F0F\u62A5\u9519\uFF1A",S)}}let V={color:this.$$global_editor.predefineColors,tooltip:G,toolbox:R,title:{show:b.show,text:b.text,link:b.link,textAlign:b.textAlign,left:b.left+"%",right:b.right+"%",top:b.top+"%",bottom:b.bottom+"%",textStyle:{fontSize:b.textStyle.fontSize,fontFamily:b.textStyle.fontFamily,color:b.textStyle.color}},legend:{show:y.show,type:y.type,itemWidth:y.itemWidth,itemHeight:y.itemHeight,icon:y.icon,orient:y.orient,align:y.align,itemGap:y.itemGap,left:y.left+"%",right:y.right+"%",top:y.top+"%",bottom:y.bottom+"%",textStyle:{fontSize:y.textStyle.fontSize,fontFamily:y.textStyle.fontFamily,color:y.textStyle.color}},graphic:K,grid:{left:Z.left+"%",right:Z.right+"%",top:Z.top+"%",bottom:Z.bottom+"%"},xAxis:[{type:"category",show:h.show,name:h.name,data:h.data,nameLocation:h.nameLocation,nameGap:h.nameGap,boundaryGap:h.boundaryGap,axisLine:{show:h.axisLine.show,lineStyle:{color:h.axisLine.lineStyle.color}},axisTick:{show:h.axisTick.show},axisLabel:{interval:h.axisLabel.interval,show:h.axisLabel.show,rotate:h.axisLabel.rotate,margin:h.axisLabel.margin,fontSize:h.axisLabel.fontSize,fontFamily:h.axisLabel.fontFamily,color:h.axisLabel.color},splitLine:h.splitLine}],yAxis:[{type:"value",scale:!1,min:g.min,max:g.max,show:g.show,name:g.name,nameLocation:g.nameLocation,nameGap:g.nameGap,axisLine:{show:g.axisLine.show,lineStyle:{color:g.axisLine.lineStyle.color}},axisTick:{show:g.axisTick.show},axisLabel:{show:g.axisLabel.show,rotate:g.axisLabel.rotate,margin:g.axisLabel.margin,fontSize:g.axisLabel.fontSize,fontFamily:g.axisLabel.fontFamily,color:g.axisLabel.color},splitLine:g.splitLine}],dataset:{source:e,sourceHeader:!1},series:i};this.getAnimation(V,t),this.setOption(V,t),this.setAnimationLoop(t,()=>{this.setOption(V,t)})},setOption(t,e){this.echarts.getOption()&&this.echarts.clear(),setTimeout(()=>{this.echarts.setOption(this.lifecycleBeforeChartsLoad(t),{notMerge:!0}),o.Z.autoShow(this,this.echarts,e.config.autoShow)},0)},reLoadInfo(t){this.mergeConfig(t),t&&(this.$refs.lineAreaStack.style.width=t.attr.w+"px",this.$refs.lineAreaStack.style.height=t.attr.hh+"px"),this.loadInfo(t),this.echarts.resize()},getLegendData(t,e){let s=this.$$lib__.find(t,r=>r.name==e);return s?s.alias&&s.alias!=""?s.alias:s.name:""},getEmphasisStyle(t){let e=null;return t.pureColor&&(e=t.pureColor),e},getItemStyleColor(t){let e=null;return t.pureColor&&t.type==this.$$global_editor.colorType.pureColor.code?e=t.pureColor:t.type==this.$$global_editor.colorType.gradation.code&&t.position=="levelDec"?e=new m.graphic.LinearGradient(1,0,0,0,[{offset:1,color:t.gradation.top!=null&&t.gradation.top!=""?t.gradation.top:"#FFFFFF"},{offset:0,color:t.gradation.bottom!=null&&t.gradation.bottom!=""?t.gradation.bottom:"#FFFFFF"}]):t.type==this.$$global_editor.colorType.gradation.code&&t.position!="levelDec"&&(e=new m.graphic.LinearGradient(0,0,0,1,[{offset:0,color:t.gradation.top!=null&&t.gradation.top!=""?t.gradation.top:"#FFFFFF"},{offset:1,color:t.gradation.bottom!=null&&t.gradation.bottom!=""?t.gradation.bottom:"#FFFFFF"}])),e},initAction(t){this.actionReceive(t)},doDrillDown(t,e){let s=[];if(this.drillDown.pidValue&&this.drillDown.id&&this.drillDown.pid){let r={};for(let f=this.dimensionsEx.length-1;f>-1;--f)r[this.dimensionsEx[f]]=f;for(let f=0;f<this.source.length;++f){let i=this.source[f];i[r[this.drillDown.pid]]==this.drillDown.pidValue&&s.push(JSON.parse(JSON.stringify(i)))}}else c.error("\u5FC5\u987B\u914D\u7F6E\u4E0B\u94BB\u7684\u3010\u4E0A\u7EA7\u6570\u503C\u3001\u6570\u636E\u5B57\u6BB5\u3001\u4E0A\u7EA7\u5B57\u6BB5\u3011");if(s.length>0)this.beforeRenderEcharts(t,s);else{let r=this.drillDown.pid_arrary.length-1;this.drillDown.pid_arrary.length=r>0?r:0,c.info("\u4E0B\u94BB\u5DF2\u65E0\u6570\u636E"),e&&this.renderEcharts(t,s)}},initClick(t){this.echarts.on("click",e=>{if(e.componentType=="graphic"){if(this.drillDown&&this.drillDown.enable==!0){let s=this.drillDown.pid_arrary.length;s>0?(this.drillDown.pidValue=this.drillDown.pid_arrary[s-1],this.drillDown.pid_arrary.length=s-1,this.drillDown.pidValue?this.doDrillDown(t):c.error("\u4E0B\u94BB\u5B57\u6BB5\u672A\u83B7\u53D6\u5230\u6709\u6548\u503C")):c.error("\u5DF2\u7ECF\u662F\u6700\u9876\u7EA7\uFF0C\u4E0D\u53EF\u4EE5\u518D\u8FD4\u56DE")}}else e.componentType=="series"&&(this.actionOnClick(t,e),this.drillDown&&this.drillDown.enable==!0&&(this.drillDown.pid_arrary.length==0?this.drillDown.pid_arrary.push(t.config.drillDown.pidValue):this.$$lib__.contains(this.drillDown.pid_arrary,this.drillDown.pidValue)||this.drillDown.pid_arrary.push(this.drillDown.pidValue),this.drillDown.pidValue=e.data.row[this.drillDown.id],this.drillDown.pidValue?this.doDrillDown(t):c.error("\u4E0B\u94BB\u5B57\u6BB5\u672A\u83B7\u53D6\u5230\u6709\u6548\u503C")))})},actionOnClick(t,e){let s=this;this.$$lib__.each(t.action.sendOut.actionList,r=>{if(r.enabled){let f=r.code+"_"+t.id;if(r.paramsExtend&&r.paramsExtend.length>0){let i={};this.getParamsExtend(i,r.paramsExtend,t)}if(r.code==p.default.click.code){t.config.autoShow&&t.config.autoShow.enabled&&t.config.autoShow.interval>0&&(this.echarts.dispatchAction({type:"downplay",dataIndex:this.innerAutoShowIndex}),this.innerAutoShowIndex=e.dataIndex);let i={},G=s.getValue(e.seriesName,e.data.value);i.x=e.name||e.value,i.y=G;let R=[];if(t.dataset[t.dataset.type].source&&t.dataset[t.dataset.type].source.length>0&&(R=t.dataset[t.dataset.type].source[e.dataIndex]),s.getExtendParams(i,r.paramsExtend,R,t.dataset[t.dataset.type].dimensions),r.script&&r.script.enabled){if(c.log("Execute script for "+t.name+" component to "+r.name+" component"),r.script.content==""){F.Message.warning({message:r.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param,params",r.script.content),i=this.customScript_actionSend_clickParam(i,e)}C.Z.$emit(f,i),r.postMessage&&s.doPostMessage(i)}}})},beforeRenderEcharts(t,e){this.clearAutoCarousel(),t.config.autoCarousel.enable==!0?this.setAutoCarousel(t,e):this.renderEcharts(t,e)}}},k=P,D=a(768141),_=(0,D.Z)(k,x,w,!1,null,"4687abef",null),z=_.exports},844513:function(M,v,a){a.d(v,{Z:function(){return L}});var x=function(){var o=this,F=o._self._c;return o.attr.buttonHide?F("div",{style:{position:"absolute",right:o.attr.buttonHideRight+"px",top:o.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(p){return o.onHide()}}},[o.openTooltip?F("el-tooltip",{attrs:{"open-delay":1e3,content:o.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[F("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):F("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):o._e()},w=[],d=a(752246),C={props:["attr"],name:"hide-button",data(){return{isPc:d.b}},computed:{openTooltip:function(){let l=!1,o=this.attr.buttonHideTooltipContent;return d.b&&o&&o!=null&&o.trim()!=""&&(l=!0),l}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},E=C,I=a(768141),A=(0,I.Z)(E,x,w,!1,null,"bf399b9a",null),L=A.exports}}]);
