"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[82807],{752246:function(v,c,s){s.d(c,{X:function(){return d},b:function(){return u}});let d={versions:function(){var a=navigator.userAgent;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")==-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1,iPhone:a.indexOf("iPhone")>-1,iPad:a.indexOf("iPad")>-1,webApp:a.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},u;d.versions.mobile||d.versions.ios||d.versions.android||d.versions.iPhone||d.versions.iPad?u=!1:u=!0},459738:function(v,c,s){s.d(c,{OW:function(){return u},m3:function(){return h},nm:function(){return a},vP:function(){return g},xC:function(){return p}});var d=s(153258);function u(t,e,o){let n=t;const r=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(f=>(0,d.mf)(n[f]));if(!(0,d.mf)(n[r]))return!1;do{if(n[r](e))return!0;if(n===o)return!1;n=n.parentNode}while(n);return!1}function a(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function g(t,e,o){t&&(t.attachEvent?t.attachEvent("on"+e,o):t.addEventListener?t.addEventListener(e,o,!0):t["on"+e]=o)}function p(t,e,o){t&&(t.detachEvent?t.detachEvent("on"+e,o):t.removeEventListener?t.removeEventListener(e,o,!0):t["on"+e]=null)}function h(t,e,o,n){var r=0,f=setInterval(()=>{r<o?(r++,t()):(clearInterval(f),n&&n())},e);return f}},153258:function(v,c,s){s.d(c,{ew:function(){return g},le:function(){return p},mf:function(){return d},sg:function(){return h},xn:function(){return u}});function d(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function u(t,e,o,n=1){const r=Math.round(e/n/t[0])*t[0],f=Math.round(o/n/t[1])*t[1];return[r,f]}function a(t){const e=t.getBoundingClientRect();return[parseInt(e.width),parseInt(e.height)]}function g(t,e,o){return t-e-o}function p(t,e,o){return t-e-o}function h(t,e,o){return e!==null&&t<e?e:o!==null&&o<t?o:t}},844513:function(v,c,s){s.d(c,{Z:function(){return e}});var d=function(){var n=this,r=n._self._c;return n.attr.buttonHide?r("div",{style:{position:"absolute",right:n.attr.buttonHideRight+"px",top:n.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(f){return n.onHide()}}},[n.openTooltip?r("el-tooltip",{attrs:{"open-delay":1e3,content:n.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[r("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):r("el-button",{class:n.attr.buttonHideIconClass&&n.attr.buttonHideIconClass!=""?n.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:n.attr.buttonHideColor,fontSize:n.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):n._e()},u=[],a=s(752246),g={props:["attr"],name:"hide-button",data(){return{isPc:a.b}},computed:{openTooltip:function(){let o=!1,n=this.attr.buttonHideTooltipContent;return a.b&&n&&n!=null&&n.trim()!=""&&(o=!0),o}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},p=g,h=s(768141),t=(0,h.Z)(p,d,u,!1,null,"bf399b9a",null),e=t.exports},382807:function(v,c,s){s.r(c),s.d(c,{default:function(){return M}});var d=function(){var l=this,m=l._self._c;return m("div")},u=[],a=s(844513),g=s(316188),p=s(445061),h=s(126711),t=s(386892),e=s(927966),o=s(148836),n=s(459738),r=s(149500),f={name:"GisPlot",components:{},mixins:[g.baseConfig,t.D,p.u,h.H],props:["widgetInfo"],computed:{...(0,o.Se)(["getWidgets","getWidgetAllArr","getCurrentWidget","getActiveScreen"])},data(){return{showMsg:!0,timer:"",map:null,loading:null}},watch:{},beforeDestroy(){},mounted(){r.log(this.widgetInfo),this.initAction(this.widgetInfo),this.loading=this.$loading({lock:!0,text:"\u6B63\u5728\u914D\u7F6E\u5730\u56FE\uFF0C\u8BF7\u7A0D\u540E..",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.timer=(0,n.m3)(this.getBindMap,500,50,()=>{r.error("gis-polt\u7EC4\u4EF6getBindMap\u7ED1\u5B9A\u8D85\u65F6")}),e.Z.$on("gis-plot-activate",(i,l)=>{r.log(i),this.$refs.plot.activate(i,l)}),e.Z.$emit("register-save-event",{widget:this,handler:this.savePlot}),e.Z.$on("refreshStyle",(i,l)=>{this.$refs.plot.refreshStyle(i,l)}),e.Z.$on("zIndexChange",i=>{this.$refs.plot.zIndexChange(i)}),e.Z.$on("deleteGeo",()=>{this.$refs.plot.deleteGeo()}),e.Z.$on("translateGeo",()=>{this.$refs.plot.translateGeo()})},methods:{...(0,o.nv)(["setSelectMultiple","addMultipleWidget","clearMultipleWidget","setCurrentWidget","setActiveScreen"]),loadInfo(i){r.log(i)},selectCurrentWidget(){if(this.getWidgets){let i="";for(let l in this.getWidgets)if(this.getWidgets[l]&&this.getWidgets[l].typeName=="gis-plot"){i=this.getWidgets[l].id;break}i&&(this.getActiveScreen||this.getCurrentWidget.id!=i)&&(this.setActiveScreen(!1),this.setCurrentWidget(i),this.setSelectMultiple(!1),this.clearMultipleWidget(),this.addMultipleWidget(i))}},reLoadInfo(i){r.log("\u914D\u7F6E\u66F4\u65B0\u4E86"),this.loadInfo(i)},initAction(i){this.registerAction(i,"configMap","mapList",this.doConfigMap),this.actionReceive(i)},savePlot(){this.widgetInfo.config.data=this.$refs.plot.getPlots()},drawEnd(){e.Z.$emit("gis-plot-drawend")},getBindMap(){if(this.loading.close(),typeof this.widgetInfo.action.gisMapId>"u"&&this.$$lib__.each(this.getWidgetAllArr,i=>{i.typeName=="gis-map"&&!this.widgetInfo.action.gisMapId&&(this.widgetInfo.action.gisMapId=i.id,r.log("auto bind map:"+i.id))}),typeof this.widgetInfo.action.gisMapId<"u"){r.log(this.widgetInfo.action.gisMapId);let i=this.getWidgetObject(this.widgetInfo.action.gisMapId);if(i){clearInterval(this.timer);let l=i.$refs.gismap;l&&(r.log("\u83B7\u53D6map\u5BF9\u8C61\u6210\u529F\uFF0C\u7ED8\u5236\u7EC4\u4EF6\u7ED1\u5B9A\u5730\u56FE\uFF0C\u5173\u95ED\u5B9A\u65F6\u5668"),this.map=l.map,this.$refs.plot.setMap(this.map),this.widgetInfo.config.data&&this.$refs.plot.setPlots(this.widgetInfo.config.data))}}else this.showMsg&&(this.$message.info("\u672A\u914D\u7F6E\u5730\u56FE\u7EC4\u4EF6\uFF0C\u8BF7\u6DFB\u52A0\u5730\u56FE\u7EC4\u4EF6\u3002"),this.showMsg=!1)},doConfigMap(i,l,m){},setPlotStyle(i,l){e.Z.$emit("changePlot",i,l)}}},b=f,I=s(768141),x=(0,I.Z)(b,d,u,!1,null,"54fc2645",null),M=x.exports}}]);
