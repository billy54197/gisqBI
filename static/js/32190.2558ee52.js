"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[32190,16362],{999860:function(b,h,l){var u=l(808041),f=l(321300);h.Z={name:"font-select",props:["value"],data(){return{selectedValue:this.value,fontList:[]}},watch:{value(){this.selectedValue=this.value}},mounted(){this.initData()},methods:{initData(){let p={pageName:1,pageSize:9999999,fontFile:JSON.stringify({fontName:""})};u.N.getListByPage(p).then(i=>{if(i&&i.status==200){let d={label:"\u81EA\u5B9A\u4E49",options:[]};if(i.data.list){let o=[];for(let m=0;m<i.data.list.length;m++){let _=i.data.list[m];_.label=_.fontFamily,_.value=_.fontId,_.resId=_.fontId,o.push(_)}this.setFonts(o),d.options=o}this.fontList.push(d);let r={label:"\u7CFB\u7EDF\u5185\u7F6E",options:[]},n=this.$$global_editor.fontFamily;for(let o=0;o<n.length;o++){let m={};m.fontId="",m.fontFamily=n[o].label,m.fontName=n[o].value,m.createdByName="\u7CFB\u7EDF\u5185\u7F6E",m.label=n[o].label,m.value=n[o].value,r.options.push(m)}this.fontList.push(r)}})},change(){this.$emit("input",this.selectedValue),this.$emit("change",this.selectedValue)},setFonts(p){if(p&&p.length>0){p=p.filter((d,r)=>{let n=[];return p.forEach(o=>n.push(o.resId)),n.indexOf(d.resId)==r});let i="";p.forEach(d=>{let r=d.resId;if(r){let n=r.split("-")[1],o=`./resource/font/${r}.${n}`;i+=`@font-face {font-family: "${r}"; src: url('${o}') format('${n}')}`}}),f.appendCss("font-style",i)}}}}},353422:function(b,h,l){l.d(h,{s:function(){return u},x:function(){return f}});var u=function(){var i=this,d=i._self._c;return d("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9"},on:{change:i.change},model:{value:i.selectedValue,callback:function(r){i.selectedValue=r},expression:"selectedValue"}},i._l(i.fontList,function(r){return d("el-option-group",{key:r.label,attrs:{label:r.label}},i._l(r.options,function(n){return d("el-option",{key:n.value,style:{fontFamily:n.value},attrs:{label:n.label,value:n.value}})}),1)}),1)},f=[]},182920:function(b,h,l){l.d(h,{Z:function(){return D}});var u=function(){var e=this,t=e._self._c;return t("div",[t("el-collapse",[t("el-collapse-item",[t("template",{slot:"title"},[t("div",{staticClass:"my-title"},[e._v("\u56FE\u8868\u4E0B\u94BB")])]),t("vue-lazy-component",{staticClass:"my-collapse-chart"},[t("el-form",{ref:"form",attrs:{model:e.drillDown,rules:e.rules,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"\u542F\u7528\u4E0B\u94BB"}},[t("el-switch",{on:{change:e.changeData},model:{value:e.drillDown.enable,callback:function(a){e.$set(e.drillDown,"enable",a)},expression:"drillDown.enable"}})],1),e.drillDown.enable==!0?[t("el-form-item",{ref:"pidValue",attrs:{label:"\u4E0A\u7EA7\u6570\u503C",prop:"pidValue"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"\u7B2C\u4E00\u7EA7\u6570\u636E\u7684\u4E0A\u7EA7\u5339\u914D\u503C",size:"mini"},on:{input:e.changeData},model:{value:e.drillDown.pidValue,callback:function(a){e.$set(e.drillDown,"pidValue",a)},expression:"drillDown.pidValue"}})],1),t("el-form-item",{ref:"id",attrs:{label:"\u6570\u636E\u5B57\u6BB5",prop:"id"}},[t("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"\u5206\u7C7B\u6570\u636E\u7684\u5B57\u6BB5",size:"mini"},on:{change:e.changeData},model:{value:e.drillDown.id,callback:function(a){e.$set(e.drillDown,"id",a)},expression:"drillDown.id"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(a){return t("el-option",{key:a.name,attrs:{label:a.alias!=""?a.alias:a.name,value:a.name}})}),1)],1),t("el-form-item",{ref:"pid",attrs:{label:"\u4E0A\u7EA7\u5B57\u6BB5",prop:"pid"}},[t("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"\u6570\u636E\u5BF9\u5E94\u7684\u4E0A\u7EA7\u5B57\u6BB5",size:"mini"},on:{change:e.changeData},model:{value:e.drillDown.pid,callback:function(a){e.$set(e.drillDown,"pid",a)},expression:"drillDown.pid"}},e._l(e.currentWidget.dataset[e.currentWidget.dataset.type].dimensionsAlias,function(a){return t("el-option",{key:a.name,attrs:{label:a.alias!=""?a.alias:a.name,value:a.name}})}),1)],1),t("echarts-graphic",{attrs:{graphic:e.drillDown.graphic,title:"\u8FD4\u56DE\u6309\u94AE"},on:{change:e.changeData}})]:e._e()],2)],1)],2)],1)],1)},f=[],p=function(){var e=this,t=e._self._c;return t("div",[t("el-collapse",[t("el-collapse-item",{attrs:{title:e.title}},[t("el-form",{ref:"form",attrs:{model:e.graphic,"label-width":"80px",size:"mini"},nativeOn:{submit:function(a){a.preventDefault()}}},[t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u5DE6\u8FB9\u8DDD"},on:{change:e.changeData},model:{value:e.graphic.group.left,callback:function(a){e.$set(e.graphic.group,"left",a)},expression:"graphic.group.left"}})],1),t("el-form-item",{attrs:{label:"\u53F3\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u53F3\u8FB9\u8DDD"},on:{change:e.changeData},model:{value:e.graphic.group.right,callback:function(a){e.$set(e.graphic.group,"right",a)},expression:"graphic.group.right"}})],1),t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u4E0A\u8FB9\u8DDD"},on:{change:e.changeData},model:{value:e.graphic.group.top,callback:function(a){e.$set(e.graphic.group,"top",a)},expression:"graphic.group.top"}})],1),t("el-form-item",{attrs:{label:"\u4E0B\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u4E0B\u8FB9\u8DDD"},on:{change:e.changeData},model:{value:e.graphic.group.bottom,callback:function(a){e.$set(e.graphic.group,"bottom",a)},expression:"graphic.group.bottom"}})],1),t("el-collapse-item",{attrs:{title:"\u6587\u672C"}},[t("el-form-item",{attrs:{label:"\u6587\u5B57\u5185\u5BB9"}},[t("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u8BF7\u8F93\u5165\u6587\u5B57\u5185\u5BB9"},model:{value:e.graphic.text.style.text,callback:function(a){e.$set(e.graphic.text.style,"text",a)},expression:"graphic.text.style.text"}})],1),t("el-form-item",{attrs:{label:"\u6587\u5B57\u5B57\u53F7"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{max:100,min:10,step:1,"controls-position":"right",placeholder:"\u6587\u5B57\u5B57\u53F7\u5927\u5C0F"},on:{change:e.changeData},model:{value:e.graphic.text.style.fontSize,callback:function(a){e.$set(e.graphic.text.style,"fontSize",a)},expression:"graphic.text.style.fontSize"}})],1),t("el-form-item",{attrs:{label:"\u6587\u5B57\u5B57\u4F53"}},[t("font-select",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6587\u5B57\u5B57\u4F53"},on:{change:e.changeData},model:{value:e.graphic.text.style.fontFamily,callback:function(a){e.$set(e.graphic.text.style,"fontFamily",a)},expression:"graphic.text.style.fontFamily"}})],1),t("el-form-item",{attrs:{label:"\u5B57\u4F53\u989C\u8272"}},[t("el-row",[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{placeholder:"\u9009\u62E9\u5B57\u4F53\u989C\u8272"},on:{change:e.changeData},model:{value:e.graphic.text.style.fill,callback:function(a){e.$set(e.graphic.text.style,"fill",a)},expression:"graphic.text.style.fill"}})],1),t("el-col",{attrs:{span:6}},[t("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{predefine:this.$$global_editor.predefineColors,"show-alpha":""},on:{change:e.changeData},model:{value:e.graphic.text.style.fill,callback:function(a){e.$set(e.graphic.text.style,"fill",a)},expression:"graphic.text.style.fill"}})],1)],1)],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u5DE6\u8FB9\u8DDD"},on:{change:e.changeData},model:{value:e.graphic.text.left,callback:function(a){e.$set(e.graphic.text,"left",a)},expression:"graphic.text.left"}})],1),t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u4E0A\u8FB9\u8DDD"},on:{change:e.changeData},model:{value:e.graphic.text.top,callback:function(a){e.$set(e.graphic.text,"top",a)},expression:"graphic.text.top"}})],1)],1),t("el-collapse-item",{attrs:{title:"\u56FE\u7247"}},[t("el-form-item",{attrs:{label:"\u9009\u62E9\u56FE\u7247"}},[t("select-img",{attrs:{image:e.graphic.image.style.imageUrl},on:{change:e.changeData,clearSelectImage:function(a){return e.clearSelectImage()},openSelectImage:function(a){return e.openSelectImage()}}})],1),t("el-form-item",{attrs:{label:"\u56FE\u7247\u5BBD\u5EA6"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u56FE\u7247\u5BBD\u5EA6"},on:{change:e.changeData},model:{value:e.graphic.image.style.width,callback:function(a){e.$set(e.graphic.image.style,"width",a)},expression:"graphic.image.style.width"}})],1),t("el-form-item",{attrs:{label:"\u56FE\u7247\u9AD8\u5EA6"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u56FE\u7247\u9AD8\u5EA6"},on:{change:e.changeData},model:{value:e.graphic.image.style.height,callback:function(a){e.$set(e.graphic.image.style,"height",a)},expression:"graphic.image.style.height"}})],1),t("el-form-item",{attrs:{label:"\u5DE6\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u5DE6\u8FB9\u8DDD"},on:{change:e.changeData},model:{value:e.graphic.image.left,callback:function(a){e.$set(e.graphic.image,"left",a)},expression:"graphic.image.left"}})],1),t("el-form-item",{attrs:{label:"\u4E0A\u8FB9\u8DDD"}},[t("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{min:0,"controls-position":"right",placeholder:"\u4E0A\u8FB9\u8DDD"},on:{change:e.changeData},model:{value:e.graphic.image.top,callback:function(a){e.$set(e.graphic.image,"top",a)},expression:"graphic.image.top"}})],1)],1)],1)],1)],1),t("el-dialog",{staticClass:"my-image-dialog",staticStyle:{padding:"0"},attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,width:e.dialogWidth,title:"\u9009\u62E9\u56FE\u7247",top:"10px"},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("div",[t("image-manage",{ref:"imageMange",attrs:{isDialog:!0,type:["image"]}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:function(a){e.dialogVisible=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getImage}},[e._v("\u786E \u5B9A")])],1)])],1)},i=[],d=l(582333),r=l(916362),n=l(721829),o={name:"echarts-graphic",components:{SelectImg:n.Z,FontSelect:r.default,ImageManage:d.default},props:{graphic:{type:Object,default:()=>({group:{},image:{style:{}},text:{style:{}}})},title:{type:String,default:"\u56FE\u5F62\u5143\u7D20"}},data(){return{dialogVisible:!1,dialogWidth:"0px"}},mounted(){this.dialogWidth=window.innerWidth-170+"px"},methods:{changeData(){this.$forceUpdate(),this.$emit("change",this.graphic)},openSelectImage(){let g=this;this.dialogVisible=!0,setTimeout(function(){g.$refs.imageMange.getImageList(null),g.$refs.imageMange.setSelectImage(g.graphic.image.style.imageUrl)},500)},clearSelectImage(){this.graphic.image.style.imageUrl="",this.changeData()},getImage(){let g=this.$refs.imageMange.getSelectImage();if(g!=null){if(this.$$global.fileType.image.indexOf(g.imageFileType)==-1){Message.warning("\u9009\u62E9\u7684\u4E0D\u662F\u56FE\u7247");return}this.dialogVisible=!1,this.graphic.image.style.imageUrl=g.fileUrlPath,this.changeData()}else Message.warning("\u672A\u9009\u62E9\u4EFB\u4F55\u56FE\u7247")}}},m=o,_=l(768141),s=(0,_.Z)(m,p,i,!1,null,"2787ccf6",null),c=s.exports,y={name:"drill-down",components:{EchartsGraphic:c},model:{prop:"drillDown",event:"change"},props:{currentWidget:{type:Object,default:()=>({})},drillDown:{type:Object,default:()=>({})}},data(){return{rules:{pidValue:[{required:!0,message:" ",trigger:"blur"}],id:[{required:!0,message:" ",trigger:"change"}],pid:[{required:!0,message:" ",trigger:"change"}],label:[{required:!0,message:" ",trigger:"change"}]}}},watch:{"currentWidget.dataset":function(){this.checkDataset()}},methods:{changeData(){this.$emit("change",this.drillDown)},checkDataset(){const g=this.currentWidget.dataset[this.currentWidget.dataset.type].dimensionsAlias;this.$$lib__.find(g,a=>a.name==this.drillDown.id)||(this.drillDown.id=null),this.$$lib__.find(g,a=>a.name==this.drillDown.pid)||(this.drillDown.pid=null)}}},v=y,x=(0,_.Z)(v,u,f,!1,null,"c4516290",null),D=x.exports},443722:function(b,h,l){l.d(h,{Z:function(){return m}});var u=function(){var s=this,c=s._self._c;return c("div",[c("el-collapse",[c("el-collapse-item",[c("template",{slot:"title"},[c("div",{staticClass:"my-title"},[s._v(s._s(s.title))])]),c("vue-lazy-component",{staticClass:"my-collapse-chart"},[c("el-form",{ref:"form",attrs:{size:"mini",model:s.emphasis,"label-width":"90px"}},[c("el-form-item",{attrs:{label:"\u9AD8\u4EAE\u989C\u8272"}},[c("el-row",[c("el-col",{attrs:{span:18}},[c("el-input",{attrs:{placeholder:"\u9009\u62E9\u989C\u8272"},on:{change:s.change},model:{value:s.emphasis.itemStyle.color,callback:function(y){s.$set(s.emphasis.itemStyle,"color",y)},expression:"emphasis.itemStyle.color"}})],1),c("el-col",{attrs:{span:6}},[c("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:this.$$global_editor.predefineColors},on:{change:s.change},model:{value:s.emphasis.itemStyle.color,callback:function(y){s.$set(s.emphasis.itemStyle,"color",y)},expression:"emphasis.itemStyle.color"}})],1)],1)],1),c("el-form-item",{attrs:{label:"\u81EA\u5B9A\u4E49"}},[c("common-custom-script",{attrs:{options:s.options,"current-widget":s.currentWidget},on:{change:s.change},model:{value:s.emphasis.script,callback:function(y){s.$set(s.emphasis,"script",y)},expression:"emphasis.script"}})],1)],1)],1)],2)],1)],1)},f=[],p=l(406627),i=l(149500),d={name:"echarts-emphasis",components:{CommonCustomScript:p.default},props:{title:{type:String,default:()=>"\u9AD8\u4EAE\u6837\u5F0F"},currentWidget:{type:Object,default:()=>({})},emphasis:{type:Object,default:()=>({itemStyle:{}})}},model:{prop:"emphasis",event:"change"},data(){return{options:{attribute_enable:"enabled",attribute_script_content:"content",title:"\u81EA\u5B9A\u4E49\u9AD8\u4EAE\u6837\u5F0F",script_examples:`/* \u5F53\u524D\u65B9\u6CD5\u4E2D\u53EF\u4F7F\u7528\u7684\u53C2\u6570
  * index:\u67F1\u72B6\u56FE\u7684\u7D22\u5F15\u503C
  * item:\u5F53\u524D\u67F1\u5B50/\u67F1\u72B6\u7684\u6570\u636E(\u4E0D\u540C\u7684\u56FE\u8868\u4F1A\u63D0\u4F9B\u4E0D\u540C\u7684item\uFF0C\u8BF7\u6CE8\u610F)
  * data:\u5F53\u524D\u56FE\u5F62\u7684\u5168\u90E8\u6570\u636E(\u4E0D\u540C\u7684\u56FE\u6807\u6570\u636E\u683C\u5F0F\u4E5F\u4F1A\u4E0D\u540C\uFF0C\u8BF7\u6CE8\u610F)
  *
  * \u8FD4\u56DE\u503C\uFF1A
  *  \u8FD4\u56DE\u5F53\u524D\u989C\u8272\u8BBE\u7F6E\u7684\u5BF9\u8C61\uFF0C\u53EF\u6839\u636Eecharts\u4E2D\u7684emphasis\u914D\u7F6E\u8FDB\u884C\u914D\u7F6E\uFF08\u652F\u6301\u6E10\u53D8\uFF09
  *  https://echarts.apache.org/zh/option.html#series-line.emphasis
  *  \u4F8B\u5B50\uFF1A { itemStyle: { color: '#F1F1F1', borderColor: '#FF0000' }, lineStyle: {color: '#FF00F0'} }
  */

let color = '#F1F1F1';
if (index === 0) {
    color = '#F2F2F2';
} else if (index == 1) {
    color = '#F3F3F3';
}

return  { itemStyle: {color : color}};`}}},methods:{change(){i.log("change",this.emphasis),this.$emit("change",this.emphasis)}}},r=d,n=l(768141),o=(0,n.Z)(r,u,f,!1,null,"102b4e28",null),m=o.exports},916362:function(b,h,l){l.r(h);var u=l(353422),f=l(278528),p=l(768141),i=(0,p.Z)(f.Z,u.s,u.x,!1,null,"449172f0",null);h.default=i.exports},278528:function(b,h,l){var u=l(999860);h.Z=u.Z}}]);
