"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[8405],{44513:function(C,h,r){r.d(h,{Z:function(){return y}});var f=function(){var i=this,a=i._self._c;return i.attr.buttonHide?a("div",{style:{position:"absolute",right:i.attr.buttonHideRight+"px",top:i.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(S){return i.onHide()}}},[i.openTooltip?a("el-tooltip",{attrs:{"open-delay":1e3,content:i.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[a("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):a("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):i._e()},w=[],c=r(52246),b={props:["attr"],name:"hide-button",data(){return{isPc:c.b}},computed:{openTooltip:function(){let p=!1,i=this.attr.buttonHideTooltipContent;return c.b&&i&&i!=null&&i.trim()!=""&&(p=!0),p}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},u=b,x=r(68141),v=(0,x.Z)(u,f,w,!1,null,"bf399b9a",null),y=v.exports},98405:function(C,h,r){r.r(h),r.d(h,{default:function(){return k}});var f=function(){var t=this,o=t._self._c;return o("div",{ref:"textShow",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:"hidden"}},[o("hide-button",{attrs:{attr:t.widgetInfo.attr}}),o("div",{directives:[{name:"popover",rawName:"v-popover:textPopup",arg:"textPopup"}],style:{width:t.widgetInfo.attr.w-t.mUtils.getNewPxW(t.widgetInfo.config.text.margin.left,t.lockX)+"px",height:t.widgetInfo.attr.hh-t.mUtils.getNewPxH(t.widgetInfo.config.text.margin.top,t.lockY)+"px",paddingLeft:t.mUtils.getNewPxW(t.widgetInfo.config.text.margin.left,t.lockX)+"px",paddingTop:t.paddingT+"px",fontSize:t.mUtils.getNewFontSize(t.widgetInfo.config.text.label.fontSize,t.lockX,t.lockY)+"px",color:t.widgetInfo.config.text.label.color,fontWeight:t.widgetInfo.config.text.label.fontWeight,fontFamily:t.widgetInfo.config.text.label.fontFamily,fontStyle:t.widgetInfo.config.text.label.fontStyle,textDecoration:t.widgetInfo.config.text.label.textDecoration,textAlign:t.widgetInfo.config.text.label.horizontalAlignment,lineHeight:t.lineH+"px",overflow:t.widgetInfo.config.text.label.overflow==!0?"auto":"hidden"},on:{mouseover:function(n){return t.mouseover("widget")},mouseleave:function(n){return t.mouseleave("widget")}}},[o("span",{style:this.getSpanStyle(t.widgetInfo)},[t._v(" "+t._s(t.textInfo)+" ")])]),t.widgetInfo.config.popover?o("div",[t.widgetInfo.config.popover.showWidget?o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.config.popover.widgetStyle.show,expression:"widgetInfo.config.popover.widgetStyle.show"}],ref:"textShowPopup",attrs:{id:"textShow-popup"},on:{mouseover:function(n){return t.mouseover("popWidget")},mouseleave:function(n){return t.mouseleave("popWidget")}}},[o("div",{staticClass:"popper-arrow"})])]):o("el-popover",{ref:"textPopup",attrs:{"popper-class":"text-popover",transition:"fade-in-linear",width:t.widgetInfo.config.popover.width,trigger:t.widgetInfo.config.popover.trigger,placement:t.widgetInfo.config.popover.placement,disabled:t.widgetInfo.config.popover.disabled,offset:t.widgetInfo.config.popover.offset,"visible-arrow":t.widgetInfo.config.popover.arrow}},[o("div",{style:t.popoerStyle(t.widgetInfo.config),domProps:{innerHTML:t._s(t.content)}})])],1):t._e()],1)},w=[],c=r(44513),b=r(27966),u=r(57761),x=r(48836),v=r(67157);const y={mixins:[v.c],data(){return{config_extend:{config:{text:{margin:{top:0,left:0},number:{fontSize:18,fontFamily:"alibabaPuHuiTiMedium"}}}},filter_config:{text:{label:{color:"",startColor:"",endColor:""}},popover:{backgroundColor:"",fontStyle:{color:""},widgetStyle:{shadowColor:"",left:0,top:0}}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfig(e,t,this.filter_config)}}};var p=r(49500),i={props:["widgetInfo","currentWidget"],name:"title-show",components:{HideButton:c.Z},mixins:[u.uN,y],computed:{...(0,x.Se)(["getCanvasSettingInfo","getCanvasSetting"]),lockX(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedW},lockY(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedH}},data(){return{paddingT:0,lineH:0,textInfo:"",content:"",widgetStatus:"leave",popWidgetStatus:"leave"}},mounted(){this.loadInfo(this.widgetInfo),p.log(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{computeFontSize(e,t,o){let n=document.createElement("span");n.style.fontSize=t,n.style.opacity="0",n.style.fontFamily=o,n.innerHTML=e,document.body.append(n);let d={};return d.width=n.offsetWidth,d.height=n.offsetHeight,n.remove(),d},loadInfo(e){p.info("----------");let t=this.computeFontSize("\u4F60\u597D",e.config.text.label.fontSize+"px",e.config.text.label.fontFamily);if(e.config.text.label.singleLine)switch(e.config.text.label.verticalAlignment){case"top":this.lineH=t.height,this.paddingT=this.mUtils.getNewPxH(e.config.text.margin.top,this.lockY);break;case"middle":this.lineH=e.attr.hh-this.mUtils.getNewPxH(e.config.text.margin.top,this.lockY),this.paddingT=this.mUtils.getNewPxH(e.config.text.margin.top,this.lockY);break;case"bottom":this.lineH=t.height,this.paddingT=e.attr.hh-t.height;break}else this.lineH=t.height,this.paddingT=this.mUtils.getNewPxH(e.config.text.margin.top,this.lockY);e.dataset[e.dataset.type]&&e.dataset[e.dataset.type].dimensions&&e.dataset[e.dataset.type].dimensions.length>0?this.textInfo=e.dataset[e.dataset.type].source[0]:this.textInfo=e.dataset[e.dataset.type].encode.text,this.content=e.config.popover.content==""?this.textInfo:e.config.popover.content;let o=document.getElementById("myBoardArea"),n=this.$refs.textShow.querySelector(".popper-arrow"),d=(e.config.popover.widgetStyle.shadowOffsetX||0)+"px "+(e.config.popover.widgetStyle.shadowOffsetY||0)+"px "+(e.config.popover.widgetStyle.shadowBlur||0)+"px "+e.config.popover.widgetStyle.shadowColor||"rgba(0,0,0,0)";if(d+=e.config.popover.widgetStyle.inset?" inset":"",e.config.popover.showWidget&&!o&&e.config.popover.widgetStyle.bindWidgetId){let g=this.$refs.textShowPopup,l=document.querySelector("#widget_"+e.config.popover.widgetStyle.bindWidgetId);g.style.right=this.mUtils.getNewPxW(e.config.popover.widgetStyle.right)+"px",g.style.bottom=this.mUtils.getNewPxH(e.config.popover.widgetStyle.bottom+e.attr.h)+"px",g.style.boxShadow=d;let I=!1;if(this.$$lib__.each(document.querySelector("body").childNodes,s=>{s.id=="textShow-popup"&&(I=this.$$lib__.contains(s.childNodes,"#widget_"+e.config.popover.widgetStyle.bindWidgetId))}),l&&!I){g.style.borderRadius=l.style.borderRadius,l.style.position="absolute",e.config.popover.position=="top"?l.style.top="0px":l.style.top="16px",l.style.left="0px",g.appendChild(l);let s=document.querySelector("#textShow-popup");if(s.style.left=e.attr.x+this.mUtils.getNewPxW(e.config.popover.widgetStyle.left)+"px",e.config.popover.position=="top"){let m=this.mUtils.getNewPxH(e.config.popover.widgetStyle.bottom)?this.mUtils.getNewPxH(e.config.popover.widgetStyle.bottom):0;s.style.top=e.attr.y-parseInt(l.style.height)-16-m+"px",n.style.display=e.config.popover.showArrow?"inline-block":"none",n.style.left=e.config.popover.arrowLeft?e.config.popover.arrowLeft+"px":parseInt(l.style.width)*.2+"px",n.style.borderTopColor=l.style.backgroundColor,n.style.bottom="-16px"}else{let m=this.mUtils.getNewPxH(e.config.popover.widgetStyle.top)?this.mUtils.getNewPxH(e.config.popover.widgetStyle.top):0;s.style.top=e.attr.y+e.attr.h+m+"px",n.style.display=e.config.popover.showArrow?"inline-block":"none",n.style.left=e.config.popover.arrowLeft?e.config.popover.arrowLeft+"px":parseInt(l.style.width)*.2+"px",n.style.borderBottomColor=l.style.backgroundColor,n.style.top="0px"}s.style.position="absolute",s.style.width=parseInt(l.style.width)+"px",s.style.height=parseInt(l.style.height)+"px",document.querySelector("#my_bi_screen").appendChild(s)}}else e.config.popover.widgetStyle.show&&!o&&(n.style.display="none")},reLoadInfo(e){e&&(this.$refs.textShow.style.width=e.attr.w+"px",this.$refs.textShow.style.height=e.attr.hh+"px"),this.loadInfo(e)},mouseover(e){if(e=="widget"?this.widgetStatus="over":e=="popWidget"&&(this.popWidgetStatus="over"),this.widgetInfo.config.popover.showWidget){let t=document.querySelector("#widget_"+this.widgetInfo.config.popover.widgetStyle.bindWidgetId);t&&t.parentNode&&(t.parentNode.style.display="block")}},mouseleave(e){e=="widget"?setTimeout(()=>{this.popWidgetStatus=="leave"&&(this.widgetStatus="leave")},500):e=="popWidget"&&(this.widgetStatus="leave",this.popWidgetStatus="leave"),setTimeout(()=>{if(this.widgetInfo.config.popover.showWidget&&this.widgetStatus=="leave"&&this.popWidgetStatus=="leave"){let t=document.querySelector("#widget_"+this.widgetInfo.config.popover.widgetStyle.bindWidgetId);t&&t.parentNode&&(t.parentNode.style.display="none")}},1e3)},popoerStyle(e){let t=document.getElementsByClassName("text-popover");return t.length&&(t[0].style.backgroundColor=e.popover.backgroundColor,t[0].style.borderColor=e.popover.backgroundColor),{fontSize:this.mUtils.getNewFontSize(e.popover.fontStyle.fontSize)+"px",fontFamily:e.popover.fontStyle.fontFamily,color:e.popover.fontStyle.color}},getSpanStyle(e){let t=e.config.text.label,o={};return t.textShadow&&(o.textShadow=t.hShadow+"px "+t.vShadow+"px "+t.textShadowBlur+"px "+t.textShadowColor||"rgba(0,0,0,0)"),t.textStroke&&(o.webkitTextStrokeWidth=t.textStrokeWidth+"px",o.webkitTextStrokeColor=t.textStrokeColor),t.gradient&&(o.backgroundImage="linear-gradient("+t.angle+"deg,"+t.startColor+","+t.endColor+")",o.webkitBackgroundClip="text",o.webkitTextFillColor="transparent"),t.singleLine&&(o.height="100%",o.width="100%",o.display="inline-block",o.whiteSpace="nowrap",t.enabledEllipsis&&(o.textOverflow="ellipsis",o.overflow="hidden")),o}}},a=i,S=r(68141),H=(0,S.Z)(a,f,w,!1,null,"33641ede",null),k=H.exports}}]);
