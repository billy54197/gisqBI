"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[98852],{940097:function(y,u,a){a.d(u,{Z:function(){return b}});var v=function(){var l=this,r=l._self._c;return r("div",{staticClass:"my_class",style:l.svgStyle(),domProps:{innerHTML:l._s(l.html_svg)}})},f=[],d=a(321300),o=a(149500),h={name:"background-svg",props:{svg_info:{},svg_info_extend:{},widgetInfo:{},mounted_load:{type:Boolean,default:!1}},data(){return{html_svg:"",svg_attribute:{},dimensionsAliasEx:null,negative:null}},mounted(){this.mounted_load&&this.getHtmlSvg()},methods:{resize(){this.getHtmlSvg()},getHtmlSvg(){if(this.html_svg="",this.svg_attribute=this.$$lib__.extend(this.svg_info,this.svg_info_extend),this.svg_attribute.svg_content)try{let s=new Function("svg_attribute","widgetInfo",this.svg_attribute.svg_content);this.html_svg=s.apply(this,[this.svg_attribute,this.widgetInfo])}catch(s){this.widgetInfo&&this.widgetInfo.name?o.error("\u7EC4\u4EF6\uFF1A"+this.widgetInfo.name+" \u7684\u88C5\u9970\u80CC\u666F\uFF0CSVG\u4EE3\u7801\u6267\u884C\u62A5\u9519\uFF1A"+s.message):o.error("SVG\u4EE3\u7801\u6267\u884C\u62A5\u9519\uFF1A"+s.message)}else this.widgetInfo&&this.widgetInfo.name?o.error("\u7EC4\u4EF6\uFF1A"+this.widgetInfo.name+" \u7684\u88C5\u9970\u80CC\u666F\uFF0CSVG\u4EE3\u7801\u4E3A\u7A7A"):o.error("SVG\u4EE3\u7801\u4E3A\u7A7A")},svgStyle(){let s={width:this.svg_attribute.width+"px",height:this.svg_attribute.height+"px"};return this.svg_attribute.turn==!0&&(s.mozTransform="scale(1,-1)",s.webkitTransform="scale(1,-1)",s.oTransform="scale(1,-1)",s.transform="scale(1,-1)",s.filter="FlipV"),s},getText(){let s=this.getDataSourceList();return s&&s.length>0?s[0][this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.text]:""},getDataSourceList(){let s=[];if(this.widgetInfo&&this.widgetInfo.dataset[this.widgetInfo.dataset.type]&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions&&this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions.length>0)for(let l=0;l<this.widgetInfo.dataset[this.widgetInfo.dataset.type].source.length;l++){let r={};for(let g=0;g<this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions.length;g++)r[this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions[g]]=this.widgetInfo.dataset[this.widgetInfo.dataset.type].source[l][g];s.push(r)}return s},getRandom(s){return d.randomString(s)},colorToRgb(s){return d.colorToRgb(s)}}},m=h,p=a(768141),_=(0,p.Z)(m,v,f,!1,null,"826862c2",null),b=_.exports},298852:function(y,u,a){a.r(u),a.d(u,{default:function(){return S}});var v=function(){var t=this,e=t._self._c;return e("div",[e("el-form",{ref:"form",attrs:{size:"mini",model:t.currentWidget.config,"label-width":"80px"}},[e("el-collapse",[e("el-collapse-item",[e("template",{slot:"title"},[e("div",{staticClass:"my-title"},[t._v(" \u88C5\u9970\u6837\u5F0F")])]),e("vue-lazy-component",{staticClass:"my-collapse-text"},[e("el-form-item",{attrs:{label:"\u88C5\u9970\u7C7B\u578B"}},[e("background-svg-select",{on:{change:t.changeSvg},model:{value:t.currentWidget.config.svg.svgType,callback:function(n){t.$set(t.currentWidget.config.svg,"svgType",n)},expression:"currentWidget.config.svg.svgType"}})],1),e("el-form-item",{attrs:{label:"SVG\u4EE3\u7801"}},[e("common-custom-script",{attrs:{options:t.options.svg_content,"current-widget":t.currentWidget},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg,callback:function(n){t.$set(t.currentWidget.config,"svg",n)},expression:"currentWidget.config.svg"}})],1),e("el-form-item",{attrs:{label:"\u4E3B\u989C\u8272"}},[e("el-row",[e("el-col",{attrs:{span:18}},[e("el-input",{attrs:{placeholder:"\u8FB9\u6846\u4E3B\u989C\u8272"},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.mainColor,callback:function(n){t.$set(t.currentWidget.config.svg,"mainColor",n)},expression:"currentWidget.config.svg.mainColor"}})],1),e("el-col",{attrs:{span:6}},[e("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:this.$$global_editor.predefineColors},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.mainColor,callback:function(n){t.$set(t.currentWidget.config.svg,"mainColor",n)},expression:"currentWidget.config.svg.mainColor"}})],1)],1)],1),e("el-form-item",{attrs:{label:"\u526F\u989C\u8272"}},[e("el-row",[e("el-col",{attrs:{span:18}},[e("el-input",{attrs:{placeholder:"\u8FB9\u6846\u526F\u989C\u8272"},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.subColor,callback:function(n){t.$set(t.currentWidget.config.svg,"subColor",n)},expression:"currentWidget.config.svg.subColor"}})],1),e("el-col",{attrs:{span:6}},[e("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:this.$$global_editor.predefineColors},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.subColor,callback:function(n){t.$set(t.currentWidget.config.svg,"subColor",n)},expression:"currentWidget.config.svg.subColor"}})],1)],1)],1),e("el-form-item",{attrs:{label:"\u52A8\u753B\u65F6\u957F"}},[e("el-input-number",{staticClass:"my-style-number-150",attrs:{placeholder:"\u52A8\u753B\u65F6\u957F(\u79D2)",min:0,"controls-position":"right"},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.animationDuration,callback:function(n){t.$set(t.currentWidget.config.svg,"animationDuration",n)},expression:"currentWidget.config.svg.animationDuration"}})],1),e("el-form-item",{attrs:{label:"\u6587\u672C\u5185\u5BB9"}},[e("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"\u6587\u672C\u5185\u5BB9"},on:{input:t.getConfigData},model:{value:t.currentWidget.config.svg.text,callback:function(n){t.$set(t.currentWidget.config.svg,"text",n)},expression:"currentWidget.config.svg.text"}})],1),e("el-form-item",{attrs:{label:"\u6587\u672C\u5B57\u53F7"}},[e("el-input-number",{staticClass:"my-style-number",staticStyle:{width:"160px"},attrs:{"controls-position":"right",step:.5,min:10,max:100},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.fontSize,callback:function(n){t.$set(t.currentWidget.config.svg,"fontSize",n)},expression:"currentWidget.config.svg.fontSize"}})],1),e("el-form-item",{attrs:{label:"\u6587\u672C\u5B57\u4F53"}},[e("font-select",{staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5B57\u4F53"},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.fontFamily,callback:function(n){t.$set(t.currentWidget.config.svg,"fontFamily",n)},expression:"currentWidget.config.svg.fontFamily"}})],1),e("el-form-item",{attrs:{label:"\u6587\u672C\u989C\u8272"}},[e("el-row",[e("el-col",{attrs:{span:18}},[e("el-input",{attrs:{placeholder:"\u9009\u62E9\u989C\u8272"},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.color,callback:function(n){t.$set(t.currentWidget.config.svg,"color",n)},expression:"currentWidget.config.svg.color"}})],1),e("el-col",{attrs:{span:6}},[e("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{"show-alpha":"",predefine:this.$$global_editor.predefineColors},on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.color,callback:function(n){t.$set(t.currentWidget.config.svg,"color",n)},expression:"currentWidget.config.svg.color"}})],1)],1)],1),e("el-form-item",{attrs:{label:"\u662F\u5426\u65CB\u8F6C"}},[e("el-switch",{on:{change:t.getConfigData},model:{value:t.currentWidget.config.svg.turn,callback:function(n){t.$set(t.currentWidget.config.svg,"turn",n)},expression:"currentWidget.config.svg.turn"}})],1)],1)],2)],1)],1)],1)},f=[],d=a(723400),o=a(813550),h=a(406627),m=function(){var t=this,e=t._self._c;return e("div",[e("el-input",{staticStyle:{width:"180px"},attrs:{clearable:!0,value:t.svg_value_name,placeholder:"\u8BF7\u9009\u62E9\u88C5\u9970\u80CC\u666F"},on:{change:function(n){return t.changeName()},clear:function(n){return t.clearName()}}},[e("el-button",{attrs:{slot:"prepend",icon:"el-icon-search"},on:{click:function(n){return t.openDialog()}},slot:"prepend"})],1),e("el-dialog",{staticClass:"my-dialog-class",attrs:{"append-to-body":!0,"close-on-click-modal":!1,"modal-append-to-body":!0,visible:t.dialog.visible,width:t.dialog.width+"px",title:"\u88C5\u9970\u80CC\u666F"},on:{"update:visible":function(n){return t.$set(t.dialog,"visible",n)}}},[e("div",{style:{height:t.dialog.height+"px"}},[e("el-tabs",{attrs:{"tab-position":"top",type:"card"},model:{value:t.tabsValue,callback:function(n){t.tabsValue=n},expression:"tabsValue"}},t._l(t.tabsPane,function(n){return e("el-tab-pane",{key:n.name,attrs:{label:n.label,name:n.name}},[e("div",{staticClass:"my-select",style:{height:t.dialog.height-40+"px"}},t._l(t.getBoardSvgList(n.name),function(c){return e("div",{key:c.code,staticClass:"my-background-div",style:{height:n.height+35+"px",margin:"10px "+t.dialog.margin+"px"},on:{click:function(w){return t.onClick(c.code)}}},[e("div",{class:"my-background-info "+(t.svg_value==c.code?"my-background-selected":""),style:{height:n.height+20+"px"}},[e("background-svg",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{mounted_load:!0,svg_info:c,svg_info_extend:t.getSvgInfoExtend(n)}})],1),t._v(" "+t._s(c.name)+" ")])}),0)])}),1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"mini"},on:{click:function(n){t.dialog.visible=!1}}},[t._v("\u5173\u95ED")]),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.confirm}},[t._v("\u786E\u5B9A")])],1)])],1)},p=[],_=a(940097),b={name:"background-svg-select",components:{BackgroundSvg:_.Z},model:{prop:"value",event:"change"},props:{value:{default:null}},data(){return{dialog:{width:0,height:0,visible:!1,margin:0},svg_info_extend:{mainColor:"rgba(0, 206, 209, 1)",subColor:"rgba(250, 212, 0, 1)",animationDuration:3,fontSize:15,color:"rgb(255, 255, 255)",text:"\u88C5\u9970",width:220,height:165},svg_value:null,svg_value_name:null,svg_name:null,tabsValue:"border",tabsPane:[{name:"border",label:"\u8FB9\u6846\u88C5\u9970",height:100},{name:"circular",label:"\u5706\u5F62\u88C5\u9970"},{name:"line",label:"\u7EBF\u578B\u88C5\u9970",height:80},{name:"flash",label:"\u95EA\u52A8\u88C5\u9970",height:150}]}},watch:{value(i){this.svg_value=i,this.getSvgTypeName()}},mounted(){this.svg_value=this.value,this.dialog.height=window.innerHeight-140,this.dialog.width=window.innerWidth-40;let i=this.dialog.width%240,t=parseInt(this.dialog.width/240);i>20&&(i=i-20),this.dialog.margin=i/(t*2)},methods:{openDialog(){this.svg_value=this.value,this.dialog.visible=!0},confirm(){this.getSvgTypeName(),this.changeValue(),this.dialog.visible=!1},onClick(i){this.svg_value==i?(this.svg_value=null,this.svg_value_name=null,this.svg_name=null):this.svg_value=i},clearName(){this.svg_value=null,this.svg_value_name=null,this.svg_name=null,this.changeValue()},changeValue(){this.$emit("change",this.svg_value!=""?this.svg_value:null)},changeName(){this.svg_value_name=null,this.svg_value_name=this.svg_name},getSvgTypeName(){if(this.svg_value){let i=o.default[this.svg_value];i?(this.svg_value_name=i.name,this.svg_name=i.name):(this.svg_value_name=null,this.svg_name=null)}else this.svg_value_name=null,this.svg_name=null},getBoardSvgList(i){let t=[];for(let e in o.default)this.svg_value&&this.svg_value!=""&&e==this.svg_value&&(this.svg_value_name=o.default[e].name,this.svg_name=o.default[e].name,this.tabsValue=o.default[e].type),i==o.default[e].type&&t.push(JSON.parse(JSON.stringify(o.default[e])));return t},getSvgInfoExtend(i){let t=JSON.parse(JSON.stringify(this.svg_info_extend));return i.height&&(t.height=i.height),t}}},s=b,l=a(768141),r=(0,l.Z)(s,m,p,!1,null,"205885d8",null),g=r.exports,x={name:"decorate-background-style",components:{BackgroundSvgSelect:g,CommonCustomScript:h.default,FontSelect:()=>a.e(16362).then(a.bind(a,916362))},props:["currentWidget","widgets"],mixins:[d.j],data(){return{options:{svg_content:{attribute_script_content:"svg_content",title:"\u88C5\u9970\u80CC\u666F\u4EE3\u7801",script_examples:""}}}},methods:{changeSvg(){if(this.currentWidget.config.svg.svgType&&this.currentWidget.config.svg.svgType!=""){let i=o.default[this.currentWidget.config.svg.svgType];i&&(this.currentWidget.config.svg.svg_content=i.svg_content)}else this.currentWidget.config.svg.svg_content="";this.setSVGScriptExamples(),this.getConfigData()},setSVGScriptExamples(){if(this.options.svg_content.script_examples=o.default.custom_decorate_background.svg_content,this.currentWidget.config.svg&&this.currentWidget.config.svg.svgType&&this.currentWidget.config.svg.svgType!=""){let i=o.default[this.currentWidget.config.svg.svgType];i&&(this.options.svg_content.script_examples=i.svg_content)}}}},W=x,k=(0,l.Z)(W,v,f,!1,null,"401c6f1d",null),S=k.exports}}]);
