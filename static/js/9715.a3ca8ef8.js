"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[9715],{83577:function(I,p,a){a.d(p,{i:function(){return x}});var b=a(48836),m=a(27966);const x={created(){},computed:{...(0,b.Se)(["getCurrentWidget","getKeydown","getSelectMultiple","getMultipleWidget","getWidgets"])},methods:{...(0,b.nv)(["setCurrentWidget","setCurrentWidgetXYWHR","setActiveScreen","removeMultipleWidget","addMultipleWidget","setSelectMultiple","clearMultipleWidget"]),reLoadInfo(e){this.widgetInfo.id!=e.id&&this.$refs["comp_"+e.id]&&setTimeout(()=>{this.$refs["comp_"+e.id][0].reLoadInfo(e),this.$refs["comp_frame_"+e.id][0].initSvg()},500),this.loadInfo(e)},orgWidget(e,r){let s=[];return this.$$lib__.each(e,n=>{for(let d=0;d<this.widgetArr.length;d++){let f=this.widgetArr[d];f.parentId==this.widgetInfo.id&&f.id==n.id&&(!r||r(f))&&s.push(JSON.parse(JSON.stringify(f)))}}),s},setTitleText(e,r){r?this.$$lib__.each(r,s=>{this.$$lib__.each(this.orgWidget(s.widgets,n=>!n.title.hide&&n.title.text),n=>{n.attr.widgetW||(n.attr.widgetW=n.attr.w),this.$refs["title_"+n.id]&&this.$refs["title_"+n.id][0]&&(this.$refs["title_"+n.id][0].innerHTML=this.initTextPosition(n)),n.title.position||(n.title.position="top")})}):this.$$lib__.each(this.orgWidget(e,s=>!s.title.hide&&s.title.text),s=>{this.$refs["title_"+s.id]&&this.$refs["title_"+s.id][0]&&(this.$refs["title_"+s.id][0].innerHTML=this.initTextPosition(s)),s.title.position||(s.title.position="top")})},initTextPosition(e){return e.title.text===void 0||!e.title.text?"":e.title.text&&(e.title.position==="left"||e.title.position==="right")?e.title.text.split("").join("<br />"):e.title.text},onActive(e){return this.getSelectMultiple?this.getMultipleWidget[e.id]!=null:e.id===this.getCurrentWidget.id},onClicked(e){if(e&&e.currentTarget){let r=e.currentTarget.id;if(r&&r.indexOf(this.prefix.widget)>-1){let s=r.substr(this.prefix.widget.length);if(s!=this.getCurrentWidget.id){this.setActiveScreen(!1),this.setCurrentWidget(s);let n=this.$$lib__.keys(this.getMultipleWidget);this.getKeydown.ctrlKey?(this.setSelectMultiple(!0),this.getMultipleWidget[s]?this.removeMultipleWidget(s):this.addMultipleWidget(s)):this.getMultipleWidget[s]==null?(this.setSelectMultiple(!1),this.clearMultipleWidget(),this.addMultipleWidget(s)):n&&n.length==1&&(this.setSelectMultiple(!1),this.setCurrentWidget(n[0]),this.clearMultipleWidget(),this.addMultipleWidget(n[0]))}m.Z.$emit("autoScrollIntoViewWidgetTree",s)}}},onMouseEnter(e){this.onWidgetLayerMouseOver("push",e)},onMouseLeave(e){this.onWidgetLayerMouseOver("pop",e)},onWidgetLayerMouseOver(e,r){if(r&&r.currentTarget){let s=r.currentTarget.id;if(s&&s.indexOf(this.prefix.widget)>-1){let n=s.substr(this.prefix.widget.length);n&&n!=this.getCurrentWidget.id&&this.getMultipleWidget[n]==null&&e=="push"&&this.widget_layer_mouse_over.push(n),e=="pop"&&(this.widget_layer_mouse_over=this.$$lib__.without(this.widget_layer_mouse_over,n))}}},onDragstop(e,r){let s=this.getCurrentWidget.attr;s&&(s.x!=e||s.y!=r)&&this.setCurrentWidgetXYWHR({x:e,y:r})},dragging(e,r,s,n){if(this.getSelectMultiple){let d=this.getCurrentWidget.attr;d&&(d.x!=e||d.y!=r)&&this.setCurrentWidgetXYWHR({x:e,y:r})}},onResizstop(e,r,s,n){this.setCurrentWidgetXYWHR({x:e,y:r,w:s,h:n})},onRotatestop(e){this.setCurrentWidgetXYWHR({r:e})},getdraggableHW(e){let r={h:e.attr.h,w:e.attr.w?e.attr.widgetW:e.attr.w};return e.border.hide!=!0&&(e.border.type==!1?(e.border.widthT&&e.border.styleT&&e.border.styleT!=="none"&&(r.h=r.h+e.border.widthT),e.border.widthB&&e.border.styleB&&e.border.styleB!=="none"&&(r.h=r.h+e.border.widthB),e.border.widthR&&e.border.styleR&&e.border.styleR!=="none"&&(r.w=r.w+e.border.widthR),e.border.widthL&&e.border.styleL&&e.border.styleL!=="none"&&(r.w=r.w+e.border.widthL)):e.border.type==!0&&(e.border.breadthT&&e.border.borderStyle&&e.border.borderStyle!=="none"&&(r.h=r.h+e.border.breadthT),e.border.breadthB&&e.border.borderStyle&&e.border.borderStyle!=="none"&&(r.h=r.h+e.border.breadthB),e.border.breadthR&&e.border.borderStyle&&e.border.borderStyle!=="none"&&(r.w=r.w+e.border.breadthR),e.border.breadthL&&e.border.borderStyle&&e.border.borderStyle!=="none"&&(r.w=r.w+e.border.breadthL))),r},getDraggableStyle(e){let r={};return!e.isContainer&&!e.attr.pointerEvents&&(r.pointerEvents="none",e.id===this.getCurrentWidget.id&&(r.backgroundColor="rgba(236, 240, 241, 1)",r.filter="Alpha(Opacity=50)")),typeof e.attr.opacity=="number"&&(r.opacity=e.attr.opacity),e.attr.backgroundColor&&(r.backgroundColor=e.attr.backgroundColor),e.attr.backgroundImage&&(r.backgroundImage=this.getImageUrl(e.attr.backgroundImage)),e.attr.backgroundSize&&(r.backgroundSize=e.attr.backgroundSize),r.overflow=e.border.overflowShow?"hidden":"visible",e.border.hide!=!0&&((e.border.hShadow||e.border.vShadow)&&(r.boxShadow=(e.border.hShadow||0)+"px "+(e.border.vShadow||0)+"px "+(e.border.blur||0)+"px "+e.border.blurColor||"rgba(0,0,0,0)"),e.border.type==!1?(r.borderTopWidth=e.border.widthT+"px",r.borderRightWidth=e.border.widthR+"px",r.borderBottomWidth=e.border.widthB+"px",r.borderLeftWidth=e.border.widthL+"px",r.borderTopStyle=e.border.styleT,r.borderRightStyle=e.border.styleR,r.borderBottomStyle=e.border.styleB,r.borderLeftStyle=e.border.styleL,r.borderTopColor=e.border.colorT,r.borderRightColor=e.border.colorR,r.borderBottomColor=e.border.colorB,r.borderLeftColor=e.border.colorL,r.borderTopLeftRadius=e.border.radiusTL+"px",r.borderTopRightRadius=e.border.radiusTR+"px",r.borderBottomLeftRadius=e.border.radiusBL+"px",r.borderBottomRightRadius=e.border.radiusBR+"px"):e.border.type==!0&&(r.borderStyle=e.border.borderStyle,r.borderTopWidth=e.border.breadthT+"px",r.borderRightWidth=e.border.breadthR+"px",r.borderBottomWidth=e.border.breadthB+"px",r.borderLeftWidth=e.border.breadthL+"px",r.borderImageSource=this.getImageUrl(e.border.borderImage),r.borderImageSlice=e.border.cutT+" "+e.border.cutR+" "+e.border.cutB+" "+e.border.cutL,r.borderImageRepeat=e.border.repeat)),r.float="left !important",r}}}},59738:function(I,p,a){a.d(p,{OW:function(){return m},m3:function(){return s},nm:function(){return x},vP:function(){return e},xC:function(){return r}});var b=a(53258);function m(n,d,f){let h=n;const g=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(y=>(0,b.mf)(h[y]));if(!(0,b.mf)(h[g]))return!1;do{if(h[g](d))return!0;if(h===f)return!1;h=h.parentNode}while(h);return!1}function x(n){const d=window.getComputedStyle(n);return[parseFloat(d.getPropertyValue("width"),10),parseFloat(d.getPropertyValue("height"),10)]}function e(n,d,f){n&&(n.attachEvent?n.attachEvent("on"+d,f):n.addEventListener?n.addEventListener(d,f,!0):n["on"+d]=f)}function r(n,d,f){n&&(n.detachEvent?n.detachEvent("on"+d,f):n.removeEventListener?n.removeEventListener(d,f,!0):n["on"+d]=null)}function s(n,d,f,h){var g=0,y=setInterval(()=>{g<f?(g++,n()):(clearInterval(y),h&&h())},d);return y}},54486:function(I,p,a){a.r(p),a.d(p,{default:function(){return N}});var b=function(){var t=this,l=t._self._c;return l("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}],ref:"drawer",staticClass:"test",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[l("hide-button",{attrs:{attr:t.widgetInfo.attr}}),l("pull-refresh",{staticClass:"my-pull-refresh",style:{height:"100%",overflow:"auto"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(u){t.refreshing=u},expression:"refreshing"}},[l("list",{style:{height:"auto",width:"auto"},attrs:{value:t.loading,finished:t.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86","immediate-check":!1},on:{load:t.onLoad}},[l("div",{style:{display:t.widgetInfo.config.list.layOut==="single"?"block":"flex",flexFlow:"wrap"}},[!t.widgetInfo.config.list.selectType||t.widgetInfo.config.list.selectType==="none"?t._l(t.widgetInfo.dataset[t.widgetInfo.dataset.type].source,function(u,c){return l("div",{key:c,style:{flex:"none",position:"relative",width:t.widgetInfo.config.list.listItem.width+"px",height:t.widgetInfo.config.list.listItem.height+"px",background:t.widgetInfo.config.list.listItem.backgroundColor,borderRadius:t.widgetInfo.config.list.listItem.borderRadius+"px",margin:`${t.widgetInfo.config.list.listItem.marginTop}px 0 0 ${t.widgetInfo.config.list.listItem.marginLeft}px `}},[t._l(t.orgWidget(t.widgetInfo.config.container.widgets),function(o){return[c===0?l("draggable",{directives:[{name:"show",rawName:"v-show",value:o.attr.hideEditor!==!0,expression:"widget.attr.hideEditor !== true"}],key:t.prefix.widget+o.id+c,ref:t.prefix.widget+o.id,refInFor:!0,attrs:{rotatable:!0,resizable:!o.attr.locked,draggable:!o.attr.locked,snap:!0,id:t.prefix.widget+o.id,x:o.attr.x,y:o.attr.y,z:o.attr.z,r:o.attr.deg,h:o.attr.h,w:o.attr.w,minw:o.attr.minw,minh:o.attr.minh,deselectCancel:".unboardArea",active:t.onActive(o)},on:{onClicked:t.onClicked,dragstop:t.onDragstop,resizestop:t.onResizstop,rotatestop:t.onRotatestop}},[l("div",{directives:[{name:"show",rawName:"v-show",value:o.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:t.getDraggableStyle(o)},[l("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(o),on:{click:function(v){return t.openLink(o)}}},[l("div",{style:{marginLeft:o.title.label.left+"px",marginTop:o.title.label.top+"px"}},[l("span",{style:t.getTitleSpanStyle(o)},[t._v(t._s(o.title.text)+" ")])])]),l("draggable-component-container",{ref:"comp_"+o.id,refInFor:!0,style:t.getInfoStyle(o),attrs:{widgetData:o,currentWidget:t.getCurrentWidget}})],1)]):l("div",{key:t.prefix.widget+o.id+c,staticClass:"no-select",style:t.getBindStyle1(o)},[l("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(o),on:{click:function(v){return t.openLink(o)}}},[l("div",{style:{marginLeft:o.title.label.left+"px",marginTop:o.title.label.top+"px"}},[l("span",{style:t.getTitleSpanStyle(o)},[t._v(t._s(o.title.text)+" ")])])]),l("draggable-component-container",{ref:"comp_"+o.id,refInFor:!0,style:t.getInfoStyle(o),attrs:{widgetData:o,currentWidget:t.getCurrentWidget}})],1)]})],2)}):l(t.widgetInfo.config.list.selectType==="single"?"RadioGroup":"CheckboxGroup",{tag:"component",attrs:{value:t.widgetInfo.config.list.selectType==="single"?t.radioValue:t.checkBoxList},on:{input:t.selectInput}},t._l(t.widgetInfo.dataset[t.widgetInfo.dataset.type].source,function(u,c){return l("div",{key:c,style:{flex:"none",position:"relative",width:t.widgetInfo.config.list.listItem.width+"px",height:t.widgetInfo.config.list.listItem.height+"px",background:t.widgetInfo.config.list.listItem.backgroundColor,borderRadius:t.widgetInfo.config.list.listItem.borderRadius+"px",margin:`${t.widgetInfo.config.list.listItem.marginTop}px 0 0 ${t.widgetInfo.config.list.listItem.marginLeft}px `}},[l(t.widgetInfo.config.list.selectType==="single"?"radio":"checkbox",{tag:"component",style:{position:"absolute",left:t.widgetInfo.config.list.select.left+"px",top:t.widgetInfo.config.list.select.top+"px"},attrs:{name:u[t.valueIndex],shape:t.widgetInfo.config.list.select.shape,"icon-size":t.widgetInfo.config.list.select.fontSize+"px","checked-color":t.widgetInfo.config.list.select.checkedColor,disabled:t.disabledIndex===""?!1:u[t.disabledIndex]==1},scopedSlots:t._u([t.widgetInfo.config.list.select.showIcon?{key:"icon",fn:function(o){return[t.widgetInfo.config.list.select.iconType==="icon"?l("i",{class:`${o.checked?t.widgetInfo.config.list.select.activeIcon:t.widgetInfo.config.list.select.icon} select-icon`,style:{fontSize:t.widgetInfo.config.list.select.fontSize+"px",color:o.checked?t.widgetInfo.config.list.select.checkedColor:t.widgetInfo.config.list.select.color}}):l("van-image",{style:{width:t.widgetInfo.config.list.select.fontSize+"px",height:t.widgetInfo.config.list.select.fontSize+"px"},attrs:{fit:t.widgetInfo.config.list.select.fit,src:o.checked?t.getImageFullUrl(t.widgetInfo.config.list.select.activeUrl):t.getImageFullUrl(t.widgetInfo.config.list.select.url)}})]}}:null],null,!0)}),t._l(t.orgWidget(t.widgetInfo.config.container.widgets),function(o){return[c===0?l("draggable",{directives:[{name:"show",rawName:"v-show",value:o.attr.hideEditor!==!0,expression:"widget.attr.hideEditor !== true"}],key:t.prefix.widget+o.id+c,ref:t.prefix.widget+o.id,refInFor:!0,attrs:{rotatable:!0,resizable:!o.attr.locked,draggable:!o.attr.locked,snap:!0,id:t.prefix.widget+o.id,x:o.attr.x,y:o.attr.y,z:o.attr.z,r:o.attr.deg,h:o.attr.h,w:o.attr.w,minw:o.attr.minw,minh:o.attr.minh,deselectCancel:".unboardArea",active:t.onActive(o)},on:{onClicked:t.onClicked,dragstop:t.onDragstop,resizestop:t.onResizstop,rotatestop:t.onRotatestop}},[l("div",{directives:[{name:"show",rawName:"v-show",value:o.attr.hide!==!0,expression:"widget.attr.hide !== true"}],staticClass:"my-drag-widget",style:t.getDraggableStyle(o)},[l("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(o),on:{click:function(v){return t.openLink(o)}}},[l("div",{style:{marginLeft:o.title.label.left+"px",marginTop:o.title.label.top+"px"}},[l("span",{style:t.getTitleSpanStyle(o)},[t._v(t._s(o.title.text)+" ")])])]),l("draggable-component-container",{ref:"comp_"+o.id,refInFor:!0,style:t.getInfoStyle(o),attrs:{widgetData:o,currentWidget:t.getCurrentWidget}})],1)]):l("div",{key:t.prefix.widget+o.id+c,staticClass:"no-select",style:t.getBindStyle1(o)},[l("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(o),on:{click:function(v){return t.openLink(o)}}},[l("div",{style:{marginLeft:o.title.label.left+"px",marginTop:o.title.label.top+"px"}},[l("span",{style:t.getTitleSpanStyle(o)},[t._v(t._s(o.title.text)+" ")])])]),l("draggable-component-container",{ref:"comp_"+o.id,refInFor:!0,style:t.getInfoStyle(o),attrs:{widgetData:o,currentWidget:t.getCurrentWidget}})],1)]})],2)}),0)],2)])],1)],1)},m=[],x=a(95795),e=a(63565),r=a(20946),s=a(2004),n=a(91221),d=a(91692),f=a(95144),h=a(91567),g=a(37735),y=a(83762),F=a(66780),W=a(75792),Z=a(38575),C=a(77117),T=a(44513),L=a(46207),R=a(80512),k=a(23400),B=a(83577),M=a(81573),S=a(48836),$=a(67157);const E={mixins:[$.c],data(){return{config_extend:{config:{}},filter_config:{list:{select:{checkedColor:"rgba(25,137,250,1)",color:"rgba(200, 201, 204,1)"},listItem:{backgroundColor:"#ffffff"}},container:{scroll:{color:"#001725"}}}}},methods:{filterPredefineColoursSchemeConfig(i,t){this.getNewConfigWithArrary(i,t,this.filter_config)}}};var z=a(56279),A={name:"mobile-container-list",props:["widgetInfo","widgetArr","currentWidget"],components:{DraggableComponentContainer:R.Z,draggable:L.Z,List:C.Z,PullRefresh:W.Z,RadioGroup:y.Z,Radio:h.Z,CheckboxGroup:d.Z,Checkbox:s.Z,HideButton:T.Z,VanImage:e.Z},mixins:[M.u,E,k.j,B.i,z.P],data(){return{prefix:{widget:"widget_"},refreshing:!1,finished:!1,data:{source:[]},disabledIndex:"",valueIndex:"",radioValue:"",checkBoxList:[],loading:!1}},watch:{"widgetInfo.dataset":{deep:!0,handler(){this.widgetInfo.config.container.widgets.forEach(i=>{let t=this.getWidgetAllArr.find(l=>l.id===i.id);this.$nextTick(()=>{this.$refs[`comp_${t.id}`]&&this.$refs[`comp_${t.id}`].forEach((l,u)=>{let c=JSON.parse(JSON.stringify(t));t.dataset.extend&&t.dataset.extend.source.length>0&&(c.dataset.extend.source=JSON.parse(JSON.stringify([t.dataset.extend.source[u]])),c.dataset.extend.dimensions.indexOf("LIST_INDEX")!==-1&&c.dataset.extend.source.length>0&&c.dataset.extend.source[0].pop(),c.dataset.extend.source[0].push(u+1)),l.reLoadInfo(c)})})})}}},computed:{...(0,S.Se)(["getWidgets","getWidgetAllArr"])},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{...(0,S.nv)(["updateCurrentWidget","setCurrentWidget"]),onRefresh(){},onLoad(){},initAction(){},loadInfo(i){if(i.id===this.widgetInfo.id&&this.getListInfo(i.dataset[i.dataset.type]),this.lifecycleAfterLoad(),!this.widgetInfo.config.list.selectType||this.widgetInfo.config.list.selectType==="none")return;let t=i.dataset[i.dataset.type].columnList.filter(l=>l.name===i.dataset[i.dataset.type].encode.value);if(t.length>0&&(this.valueIndex=t[0].index),i.dataset[i.dataset.type].encode.disabled){let l=i.dataset[i.dataset.type].columnList.filter(u=>u.name===i.dataset[i.dataset.type].encode.disabled);l.length>0&&(this.disabledIndex=l[0].index)}},reLoadInfo(i){this.loadInfo(i)},getListInfo(i){this.data=i},getBindStyle1(i){let t={opacity:i.attr.opacity,backgroundColor:i.attr.backgroundColor,backgroundImage:this.getImageUrl(i.attr.backgroundImage),backgroundSize:i.attr.backgroundSize,zIndex:i.attr.z,left:i.attr.x+"px",top:i.attr.y+"px",width:i.attr.widgetW+"px",height:i.attr.h+"px",transform:"rotate3d(0,0,1,"+i.attr.deg+"deg)"};return i.border.hide!=!0&&((i.border.hShadow||i.border.vShadow)&&(t.boxShadow=(i.border.hShadow||0)+"px "+(i.border.vShadow||0)+"px "+(i.border.blur||0)+"px "+i.border.blurColor||"rgba(0,0,0,0)"),i.border.type==!1?(t.borderTopWidth=i.border.widthT+"px",t.borderRightWidth=i.border.widthR+"px",t.borderBottomWidth=i.border.widthB+"px",t.borderLeftWidth=i.border.widthL+"px",t.borderTopStyle=i.border.styleT,t.borderRightStyle=i.border.styleR,t.borderBottomStyle=i.border.styleB,t.borderLeftStyle=i.border.styleL,t.borderTopColor=i.border.colorT,t.borderRightColor=i.border.colorR,t.borderBottomColor=i.border.colorB,t.borderLeftColor=i.border.colorL,t.borderTopLeftRadius=i.border.radiusTL+"px",t.borderTopRightRadius=i.border.radiusTR+"px",t.borderBottomLeftRadius=i.border.radiusBL+"px",t.borderBottomRightRadius=i.border.radiusBR+"px"):i.border.type==!0&&(t.borderStyle=i.border.borderStyle,t.borderTopWidth=i.border.breadthT+"px",t.borderRightWidth=i.border.breadthR+"px",t.borderBottomWidth=i.border.breadthB+"px",t.borderLeftWidth=i.border.breadthL+"px",t.borderImageSource=this.getImageUrl(i.border.borderImage),t.borderImageSlice=i.border.cutT+" "+i.border.cutR+" "+i.border.cutB+" "+i.border.cutL,t.borderImageRepeat=i.border.repeat)),t},selectInput(i){this.widgetInfo.config.list.selectType==="single"?this.radioValue=i:this.checkBoxList=i}}},O=A,D=a(68141),P=(0,D.Z)(O,b,m,!1,null,"cfb565c4",null),N=P.exports}}]);
