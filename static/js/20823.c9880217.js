"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[20823],{418966:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _components_editor_widgets_common_view_hide_button__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(844513),_utils_bus_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(927966),_components_editor_board_digital_scrolling_count_to_count_to__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(134580),_js_editor_action_action_receive__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(445061),_js_editor_action_action_sendout__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(126711),_js_editor_action_action_lifecycle__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(56279),_title_flip_config__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(228617),element_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(555616),element_ui__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_7__),_title_flip_config_extend__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(417499),console=__webpack_require__(149500);__webpack_exports__.Z={components:{CountTo:_components_editor_board_digital_scrolling_count_to_count_to__WEBPACK_IMPORTED_MODULE_2__.Z,HideButton:_components_editor_widgets_common_view_hide_button__WEBPACK_IMPORTED_MODULE_0__.Z},props:["widgetInfo"],name:"title-flip",mixins:[_title_flip_config__WEBPACK_IMPORTED_MODULE_6__.baseConfig,_title_flip_config_extend__WEBPACK_IMPORTED_MODULE_8__.s,_js_editor_action_action_receive__WEBPACK_IMPORTED_MODULE_3__.u,_js_editor_action_action_sendout__WEBPACK_IMPORTED_MODULE_4__.H,_js_editor_action_action_lifecycle__WEBPACK_IMPORTED_MODULE_5__.P],data(){return{startVal:0,endVal:0,duration:3e3,decimals:0}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{loadInfo(info){this.endVal=0,info.dataset[info.dataset.type]&&info.dataset[info.dataset.type].dimensions&&info.dataset[info.dataset.type].dimensions.length>0?this.endVal=this.getValEx(info.dataset[info.dataset.type].source,info.dataset[info.dataset.type].dimensions,info.dataset[info.dataset.type].encode.number):this.endVal=info.dataset[info.dataset.type].encode.number,setTimeout(()=>{this.startVal=eval(eval(this.endVal))},info.config.text.number.duration),this.lifecycleAfterLoad()},reLoadInfo(t){t&&(this.$refs.titleFlip.style.width=t.attr.w+"px",this.$refs.titleFlip.style.height=t.attr.hh+"px"),this.loadInfo(t)},initAction(t){this.actionReceive(t)},getValEx(t,i,e){let r=-1;if(t&&t.length>0){for(let a=0;a<i.length;a++)i[a]==e&&(r=a);return parseFloat(t[0][r])}return NaN},getStylePrefix(t){let i={wordWrap:"break-word",float:"left",display:t.config.text.prefix.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.config.text.prefix.w)+"px",marginLeft:this.mUtils.getNewPxW(t.config.text.prefix.left)+"px",marginTop:this.mUtils.getNewPxH(t.config.text.prefix.top)+"px",fontSize:this.mUtils.getNewFontSize(t.config.text.prefix.fontSize)+"px",color:t.config.text.prefix.color,fontWeight:t.config.text.prefix.fontWeight,fontStyle:t.config.text.prefix.fontStyle,fontFamily:t.config.text.prefix.fontFamily,textDecoration:t.config.text.prefix.textDecoration,textAlign:t.config.text.prefix.horizontalAlignment},e=t.config.text.prefix;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleNumber(t){let i={wordWrap:"break-word",float:"left",display:t.config.text.number.hide==!0?"none":"",marginLeft:this.mUtils.getNewPxW(t.config.text.number.left)+"px",marginTop:this.mUtils.getNewPxH(t.config.text.number.top)+"px",fontSize:this.mUtils.getNewPxW(t.config.text.number.fontSize)+"px",color:t.config.text.number.color,fontWeight:t.config.text.number.fontWeight,fontFamily:t.config.text.number.fontFamily,fontStyle:t.config.text.number.fontStyle,textDecoration:t.config.text.number.textDecoration,textAlign:t.config.text.number.horizontalAlignment};t.config.text.number.w&&(i.width=this.mUtils.getNewPxW(t.config.text.number.w)+"px"),this.endVal<0&&(i.color=t.config.text.number.negativeColor);let e=t.config.text.number;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleSuffix(t){let i={wordWrap:"break-word",float:"left",display:t.config.text.suffix.hide==!0?"none":"",width:this.mUtils.getNewPxW(t.config.text.suffix.w)+"px",marginLeft:this.mUtils.getNewPxW(t.config.text.suffix.left)+"px",marginTop:this.mUtils.getNewPxH(t.config.text.suffix.top)+"px",fontSize:this.mUtils.getNewPxW(t.config.text.suffix.fontSize)+"px",color:t.config.text.suffix.color,fontWeight:t.config.text.suffix.fontWeight,fontFamily:t.config.text.suffix.fontFamily,fontStyle:t.config.text.suffix.fontStyle,textDecoration:t.config.text.suffix.textDecoration,textAlign:t.config.text.suffix.horizontalAlignment},e=t.config.text.suffix;return e.textShadow&&(i.textShadow=e.hShadow+"px "+e.vShadow+"px "+e.textShadowBlur+"px "+e.textShadowColor||"rgba(0,0,0,0)"),e.textStroke&&(i.webkitTextStrokeWidth=e.textStrokeWidth+"px",i.webkitTextStrokeColor=e.textStrokeColor),e.gradient&&(i.backgroundImage="linear-gradient("+e.angle+"deg,"+e.startColor+","+e.endColor+")",i.webkitBackgroundClip="text",i.webkitTextFillColor="transparent"),i},getStyleInfo(t){let i={};return t.top&&(i.paddingTop=this.mUtils.getNewPxH(t.top)+"px"),t.left&&(i.paddingLeft=this.mUtils.getNewPxW(t.left)+"px"),t.right&&(i.paddingRight=this.mUtils.getNewPxW(t.right)+"px"),t.fontStyle.fontSize&&(i.fontSize=this.mUtils.getNewPxW(t.fontStyle.fontSize)+"px"),t.fontStyle.fontFamily&&(i.fontFamily=t.fontStyle.fontFamily),t.fontStyle.color&&(i.color=t.fontStyle.color),t.fontStyle.fontWeight&&(i.fontWeight=t.fontStyle.fontWeight),t.fontStyle.fontStyle&&(i.fontStyle=t.fontStyle.fontStyle),t.fontStyle.textDecoration&&(i.textDecoration=t.fontStyle.textDecoration),t.fontStyle.horizontalAlignment&&(i.textAlign=t.fontStyle.horizontalAlignment),i},onClick(){let t=this,i=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(i,e=>{if(e.enabled&&e.code==t.$$global_editor.actionType.click.code){let r=t.$$global_editor.actionType.click.code+"_"+t.widgetInfo.id,a={number:JSON.parse(JSON.stringify(t.$refs.countTo.endVal))};if(e.paramsExtend&&e.paramsExtend.length>0){let s=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(s=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(a,e.paramsExtend,s,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(console.log("Execute script for "+t.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){element_ui__WEBPACK_IMPORTED_MODULE_7__.Message.warning({message:e.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",e.script.content),a=this.customScript_actionSend_clickParam(a)}_utils_bus_js__WEBPACK_IMPORTED_MODULE_1__.Z.$emit(r,a),e.postMessage&&this.doPostMessage(a),this.actionNameList.push(r)}else if(e.enabled&&e.code==t.$$global_editor.actionType.openLink.code){let r={};if(e.paramsExtend&&e.paramsExtend.length>0){let a=[];t.widgetInfo.dataset[t.widgetInfo.dataset.type].source&&t.widgetInfo.dataset[t.widgetInfo.dataset.type].source.length>0&&(a=t.widgetInfo.dataset[t.widgetInfo.dataset.type].source[0]),this.getExtendParams(r,e.paramsExtend,a,t.widgetInfo.dataset[t.widgetInfo.dataset.type].dimensions)}if(e.script&&e.script.enabled){if(console.log("Execute script for "+t.widgetInfo.name+" component to "+e.name+" component"),e.script.content==""){element_ui__WEBPACK_IMPORTED_MODULE_7__.Message.warning({message:e.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_openLinkParam=new Function("param",e.script.content),r=this.customScript_actionSend_openLinkParam(r)}this.openLinkAction(e,r)}})}}}},417499:function(t,i,e){e.d(i,{s:function(){return a}});var r=e(67157);const a={mixins:[r.c],data(){return{config_extend:{config:{text:{margin:{top:13,left:7},number:{fontSize:"16",fontFamily:"alibabaPuHuiTiMedium"}}}},filter_config:{text:{prefix:{color:"",startColor:"",endColor:""},number:{color:"",startColor:"",endColor:""},suffix:{color:"",startColor:"",endColor:""}},information:{fontStyle:{color:""}}}}},methods:{filterPredefineColoursSchemeConfig(s,_){this.getNewConfig(s,_,this.filter_config)}}}},56279:function(t,i,e){e.d(i,{P:function(){return s}});var r=e(386892),a=e(149500);const s={mixins:[r.D],created(){},methods:{lifecycleBeforeChartsLoad(_){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&a.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),a.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let c=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[_]);if(c)return c}return _},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&a.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),a.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(t,i,e){e.d(i,{X:function(){return r},b:function(){return a}});let r={versions:function(){var s=navigator.userAgent;return{trident:s.indexOf("Trident")>-1,presto:s.indexOf("Presto")>-1,webKit:s.indexOf("AppleWebKit")>-1,gecko:s.indexOf("Gecko")>-1&&s.indexOf("KHTML")==-1,mobile:!!s.match(/AppleWebKit.*Mobile.*/),ios:!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:s.indexOf("Android")>-1,iPhone:s.indexOf("iPhone")>-1,iPad:s.indexOf("iPad")>-1,webApp:s.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},a;r.versions.mobile||r.versions.ios||r.versions.android||r.versions.iPhone||r.versions.iPad?a=!1:a=!0},134580:function(t,i,e){e.d(i,{Z:function(){return w}});var r=function(){var l=this,u=l._self._c;return u("span",[l._v(" "+l._s(l.displayValue)+" ")])},a=[];let s=0;const _="webkit moz ms o".split(" ");let d,c;if(typeof window>"u")d=function(){},c=function(){};else{d=window.requestAnimationFrame,c=window.cancelAnimationFrame;let f;for(let l=0;l<_.length&&!(d&&c);l++)f=_[l],d=d||window[f+"RequestAnimationFrame"],c=c||window[f+"CancelAnimationFrame"]||window[f+"CancelRequestAnimationFrame"];(!d||!c)&&(d=function(l){const u=new Date().getTime(),p=Math.max(0,16-(u-s)),x=window.setTimeout(()=>{l(u+p)},p);return s=u+p,x},c=function(l){window.clearTimeout(l)})}var m={name:"count-to",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:2,validator(f){return f>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(f,l,u,p){return u*(-Math.pow(2,-10*f/p)+1)*1024/1023+l}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{decimals(){this.start()},startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=d(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){c(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,d(this.count)},reset(){this.startTime=null,c(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(f){this.startTime||(this.startTime=f),this.timestamp=f;const l=f-this.startTime;this.remaining=this.localDuration-l,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(l,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(l,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(l/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(l/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),l<this.localDuration?this.rAF=d(this.count):this.$emit("callback")},isNumber(f){return!isNaN(parseFloat(f))},formatNumber(f){f=f.toFixed(this.decimals),f+="";const l=f.split(".");let u=l[0];const p=l.length>1?this.decimal+l[1]:"",x=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;x.test(u);)u=u.replace(x,"$1"+this.separator+"$2");return this.prefix+u+p+this.suffix}},destroyed(){c(this.rAF)}},n=m,o=e(768141),h=(0,o.Z)(n,r,a,!1,null,"696c34af",null),w=h.exports},844513:function(t,i,e){e.d(i,{Z:function(){return m}});var r=function(){var o=this,h=o._self._c;return o.attr.buttonHide?h("div",{style:{position:"absolute",right:o.attr.buttonHideRight+"px",top:o.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(w){return o.onHide()}}},[o.openTooltip?h("el-tooltip",{attrs:{"open-delay":1e3,content:o.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[h("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):h("el-button",{class:o.attr.buttonHideIconClass&&o.attr.buttonHideIconClass!=""?o.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:o.attr.buttonHideColor,fontSize:o.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):o._e()},a=[],s=e(752246),_={props:["attr"],name:"hide-button",data(){return{isPc:s.b}},computed:{openTooltip:function(){let n=!1,o=this.attr.buttonHideTooltipContent;return s.b&&o&&o!=null&&o.trim()!=""&&(n=!0),n}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},d=_,c=e(768141),g=(0,c.Z)(d,r,a,!1,null,"bf399b9a",null),m=g.exports},220823:function(t,i,e){e.r(i),e.d(i,{default:function(){return g}});var r=function(){var n=this,o=n._self._c;return o("div",{ref:"titleFlip",style:{width:n.widgetInfo.attr.w+"px",height:n.widgetInfo.attr.hh+"px"}},[o("hide-button",{attrs:{attr:n.widgetInfo.attr}}),o("div",{style:{width:n.mUtils.getNewPxW(n.widgetInfo.attr.w-n.widgetInfo.config.text.margin.left)+"px",height:n.widgetInfo.attr.hh+"px",paddingLeft:n.mUtils.getNewPxW(n.widgetInfo.config.text.margin.left)+"px",paddingTop:n.mUtils.getNewPxH(n.widgetInfo.config.text.margin.top)+"px",cursor:this.getCursor(n.widgetInfo.action,this.$$global_editor.actionType.click.code,this.$$global_editor.actionType.openLink.code)},on:{click:n.onClick}},[o("div",{style:n.getStylePrefix(n.widgetInfo)},[o("span",[n._v(" "+n._s(n.widgetInfo.config.text.prefix.lable)+" ")])]),o("div",{style:n.getStyleNumber(n.widgetInfo)},[o("count-to",{directives:[{name:"show",rawName:"v-show",value:!this.$$lib__.isNaN(n.endVal),expression:"!this.$$lib__.isNaN(endVal) "}],ref:"countTo",attrs:{startVal:n.startVal,endVal:n.endVal,duration:n.widgetInfo.config.text.number.duration,decimals:n.widgetInfo.config.text.number.decimals,separator:n.widgetInfo.config.text.number.separator}}),o("span",{directives:[{name:"show",rawName:"v-show",value:this.$$lib__.isNaN(n.endVal),expression:"this.$$lib__.isNaN(endVal)"}]},[n._v(" - ")])],1),o("div",{style:n.getStyleSuffix(n.widgetInfo)},[o("span",[n._v(" "+n._s(n.widgetInfo.config.text.suffix.lable)+" ")])]),n.widgetInfo.config.information.hide?n._e():o("div",{staticClass:"my-textarea"},[o("div",{ref:"myTextArea",staticClass:"test-div",style:n.getStyleInfo(n.widgetInfo.config.information),attrs:{contenteditable:"true"},domProps:{textContent:n._s(n.widgetInfo.config.information.text)}})])])],1)},a=[],s=e(418966),_=s.Z,d=e(768141),c=(0,d.Z)(_,r,a,!1,null,"5d41bab5",null),g=c.exports}}]);
