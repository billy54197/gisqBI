"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[82691],{105143:function(S,u,s){s.d(u,{b:function(){return v}});var I=s(148836),p=s(42160),y=s(149500);const v={created(){},computed:{...(0,I.Se)(["getWidgetAllArr"])},data(){return{containerViewSubWidgetList:[]}},methods:{...(0,I.nv)(["updateWidgetParentArrDataset","updateWidgetAllArrDataset"]),reLoadInfo(r){this.widgetInfo.id!=r.id&&this.$refs["comp_"+r.id]&&setTimeout(this.$refs["comp_"+r.id][0].reLoadInfo(r),500),this.loadInfo(r)},orgWidget(r){let d=[];return this.$$lib__.each(r,h=>{let a=this.$$lib__.find(this.getWidgetAllArr,l=>l.parentId==this.widgetInfo.id&&l.id==h.id);a&&(a.dataset&&a.dataset[a.dataset.type]&&(a.dataset.type==this.$$global_editor.dataSourcType.dynamic.code||a.dataset.type==this.$$global_editor.dataSourcType.local.code)&&a.dataset[a.dataset.type].autoUpdate==!0&&(p.default.set(this.dynamicWidgets,a.id,a),a.attr.hide!=!0&&a.dataset[a.dataset.type].autoUpdate==!0&&p.default.set(this.autoUpdateWidget,a.id,a)),d.push(a))}),p.default.set(this,"containerViewSubWidgetList",d),d},setTitleText(r,d){d?this.$$lib__.each(d,h=>{this.$$lib__.each(this.orgWidget(h.widgets),a=>{a.attr.widgetW||(a.attr.widgetW=a.attr.w),this.$refs["title_"+a.id]&&this.$refs["title_"+a.id][0]&&(this.$refs["title_"+a.id][0].innerHTML=this.initTextPosition(a)),a.title.position||(a.title.position="top")})}):this.$$lib__.each(this.orgWidget(r),h=>{this.$refs["title_"+h.id]&&this.$refs["title_"+h.id][0]&&(this.$refs["title_"+h.id][0].innerHTML=this.initTextPosition(h)),h.title.position||(h.title.position="top")})},initTextPosition(r){return r.title.text===void 0||!r.title.text?"":r.title.text&&(r.title.position==="left"||r.title.position==="right")?r.title.text.split("").join("<br />"):r.title.text},updataWidgetSource(r,d,h){try{switch(r.dataset.type){case this.$$global_editor.dataSourcType.dynamic.code:r.dataset.dynamic.source=d.data,d.total&&(r.dataset.dynamic.total=d.total);break;case this.$$global_editor.dataSourcType.local.code:r.dataset.local.dimensionsAlias=[],r.dataset.local.columnList=[],r.dataset.local.source=[],r.dataset.local.dimensions=[],r.dataset.local.dimensionsAlias=d.dimensionsAlias,r.dataset.local.columnList=d.columnList,r.dataset.local.source=d.source,r.dataset.local.dimensions=d.dimensions;break}}catch(l){y&&y.log&&y.log(l)}let a=this.$refs["comp_"+r.id];a&&a.length>0&&(this.updateWidgetAllArrDataset(r),this.updateWidgetParentArrDataset(r),a[0].reLoadInfo(r),this.sendoutDataloadSuccess(r),this.sendoutResponseData(r,d,h))},fit(r,d){if(!this.isView||!/^mobile/.test(this.getCanvasSetting.transformType))return r+"px";let h=this.getCanvasSetting.width/10,a=this.getCanvasSetting.height/window.innerHeight,l="";switch(this.getCanvasSetting.transformType){case"mobileAutoWidth":d?l=r+"px":l=r/h+"rem";break;case"mobileAutoBoth":l=r/h+"rem";break;default:d?l=r/a+"px":l=r/h+"rem"}return l}}}},996070:function(S,u,s){var I=s(586569),p=s(279141),y=s(691905),v=s(751595),r=s(398839)},980512:function(S,u,s){s.d(u,{Z:function(){return l}});var I=function(){var c=this,E=c._self._c;return E("div",{class:"container_child_"+c.widgetData.id,attrs:{id:"container_child_"+c.widgetData.id}},[E("keep-alive",[E(c.isView&&c.widgetData.isContainer?c.widgetData.typeName+"-view":c.widgetData.typeName,{ref:"com_"+c.widgetData.id,tag:"component",attrs:{"widget-info":c.widgetData,"widget-arr":c.getWidgetAllArr,"current-widget":c.currentWidget},on:{doGetPreviewData:c.doGetPreviewData,doReSetBoardId:c.doReSetBoardId,attrChange:c.attrChange}})],1)],1)},p=[],y=s(513229),v=s(148836),r={name:"DraggableComponent",extends:y.Z,computed:{...(0,v.Se)(["getWidgetAllArr","isView"])},methods:{reLoadInfo(w){if(w.id){let c=this.$refs["com_"+w.id];c&&c.reLoadInfo(w)}},doReSetBoardId(w){this.$emit("doReSetBoardId",w)},attrChange(w){this.$emit("attrChange",w)}}},d=r,h=s(768141),a=(0,h.Z)(d,I,p,!1,null,"41d16aa2",null),l=a.exports},360075:function(S,u,s){s.r(u),s.d(u,{default:function(){return L}});var I=function(){var t=this,i=t._self._c;return i("div",{style:{width:t.drawer.mountBoard?0:t.popContentHeight.w+"px",height:t.drawer.mountBoard?0:t.popContentHeight.h+"px"}},[i("popup",{ref:"my_popup",staticClass:"my-popup",class:t.drawerVisible?t.widgetInfo.attr.showAnimate&&t.widgetInfo.attr.showAnimate.length>0?`animated ${t.widgetInfo.attr.showAnimate[1]}`:"":t.widgetInfo.attr.hideAnimate&&t.widgetInfo.attr.hideAnimate.length>0?`animated ${t.widgetInfo.attr.hideAnimate[1]}`:"",style:t.getPopupStyle,attrs:{"close-icon-position":t.drawer.closeIconPosition,"close-on-click-overlay":t.drawer.mountBoard&&t.drawer.overLay&&t.drawer.closeOnClickOverlay,closeable:t.drawer.closeable,"get-container":/^mobile/.test(t.getCanvasSetting.transformType)?"body":"#my_bi_screen","lazy-render":t.widgetInfo.config.drawer.lazyRender,"lock-scroll":t.drawer.mountBoard&&t.drawer.lockScroll,overlay:t.drawer.mountBoard&&t.drawer.overLay,"overlay-style":t.drawer.mountBoard?t.drawer.overLayStyle:{},position:t.drawer.startPosition,round:t.drawer.round,"transition-appear":!0},on:{close:t.close,open:t.open},model:{value:t.drawerVisible,callback:function(e){t.drawerVisible=e},expression:"drawerVisible"}},[t.drawer.startPosition=="bottom"||t.drawer.startPosition=="top"?i("div",{ref:"drawer",class:`${t.moving?"":"drawer-content"}`,style:{display:"flex",flexDirection:"column",...t.drawer.background,height:t.moving?t.movingHeight+"px":t.popContentHeight.h+"px",overflow:"hidden"},attrs:{id:"drawer"}},[i("hide-button",{attrs:{attr:t.widgetInfo.attr}}),t.drawer.startPosition==="bottom"?i("div",[t.drawer.changeHeight==="3"?i("div",{style:{textAlign:"center",paddingTop:t.drawer.iconStyle.marginTop+"px"},on:{mousedown:t.handleMouseDownPc,touchstart:t.handleMouseDownMobile}},[i("div",{style:{height:"25px"}},[i("i",{class:`${t.popContentHeight.icon}`,style:{fontSize:t.drawer.iconStyle.fontSize+"px",color:t.drawer.iconStyle.color,textAlign:"center"}})])]):t._e(),t.drawer.changeHeight==="2"?i("div",{style:{textAlign:"center",paddingTop:t.drawer.iconStyle.marginTop+"px"},on:{click:t.changeHeight}},[i("i",{class:`${t.popContentHeight.icon}`,style:{fontSize:t.drawer.iconStyle.fontSize+"px",color:t.drawer.iconStyle.color},attrs:{id:"icon"}})]):t._e()]):t._e(),t.drawer.startPosition==="top"?i("div",{staticStyle:{height:"30px",width:"100%",position:"absolute",bottom:"0px"}},[t.drawer.changeHeight==="3"?i("div",{style:{textAlign:"center",paddingBottom:t.drawer.iconStyle.marginBottom+"px",position:"absolute",bottom:"0px",width:t.drawer.tabarWidth.width,"z-index":999},on:{mousedown:t.handleDownTopPc,touchstart:t.handleDownTopMobile}},[i("div",{style:{height:"100%"}},[i("i",{class:`${t.popContentHeight.icon}`,style:{fontSize:t.drawer.iconStyle.fontSize+"px",color:t.drawer.iconStyle.color,textAlign:"center"}})])]):t._e(),t.drawer.changeHeight==="2"?i("div",{style:{textAlign:"center",paddingBottom:t.drawer.iconStyle.marginBottom+"px",position:"absolute",bottom:"0px",width:t.drawer.tabarWidth.width,"z-index":999},on:{click:t.changeHeight}},[i("i",{class:`${t.popContentHeight.icon}`,style:{fontSize:t.drawer.iconStyle.fontSize+"px",color:t.drawer.iconStyle.color,height:"20px",width:"20px"},attrs:{id:"icon-top"}})]):t._e()]):t._e(),i("div",{ref:"myScreen",staticClass:"my-div",style:{overflow:"hidden",flex:1,position:"relative"},attrs:{id:"my-div"},on:{touchend:function(e){t.drawer.startPosition==="bottom"&&(t.drawer.changeHeight==="2"||t.drawer.changeHeight==="3")&&t.onTouchEnd(e)},touchmove:function(e){t.drawer.startPosition==="bottom"&&(t.drawer.changeHeight==="2"||t.drawer.changeHeight==="3")&&t.onTouchMove(e)},touchstart:function(e){t.drawer.startPosition==="bottom"&&(t.drawer.changeHeight==="2"||t.drawer.changeHeight==="3")&&t.onTouchStart(e)}}},[t.container.scroll.show?i("happy-scroll",{attrs:{color:t.container.scroll.color,"hide-horizontal":!0,"scroll-top":t.scrollTopDis,size:t.container.scroll.width},on:{"update:scrollTop":function(e){t.scrollTopDis=e},"update:scroll-top":function(e){t.scrollTopDis=e}}},[i("div",{style:{height:t.scrollHeight+"px",width:(t.widgetInfo.config.drawer.startPosition==="bottom"?t.bodyWidth:t.widgetInfo.attr.w)+"px"},on:{touchend:function(e){return t.happyTouchEnd(e)},touchmove:function(e){return t.happyTouchMove(e)},touchstart:function(e){return t.happyTouchStart(e)}}},[t._l(t.orgWidget(t.container.widgets),function(e){return[i("div",{key:"widget_"+e.id,style:(e.attr.deg&&e.attr.deg!=0?"transform: rotate("+e.attr.deg+"deg);":"")+"position: absolute;width: "+e.attr.widgetW+"px;height: "+e.attr.h+"px;left:"+e.attr.x+"px;top:"+e.attr.y+"px"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.attr.showAnimate||e.attr.hideAnimate?!0:e.attr.hide!==!0,expression:"(widget.attr.showAnimate || widget.attr.hideAnimate) ? true: widget.attr.hide !== true"}],ref:"widget_"+e.id,refInFor:!0,staticClass:"my-comp",style:t.getBindStyle(e)},[i("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(e),on:{click:function(n){return t.openLink(e)}}},[i("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[i("span",{style:t.getTitleSpanStyle(e)},[t._v(t._s(e.title.text)+" ")])])]),i("draggable-component-container",{ref:"comp_"+e.id,refInFor:!0,style:t.getInfoStyle(e),attrs:{widgetData:e},on:{attrChange:t.attrChange,doGetPreviewData:t.getPreviewData,doReSetBoardId:t.doReSetBoardId}})],1)])]})],2)]):t._l(t.orgWidget(t.container.widgets),function(e){return[i("div",{key:"widget_"+e.id,style:(e.attr.deg&&e.attr.deg!=0?"transform: rotate("+e.attr.deg+"deg);":"")+"position: absolute;width: "+e.attr.widgetW+"px;height: "+e.attr.h+"px;left:"+e.attr.x+"px;top:"+e.attr.y+"px"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.attr.showAnimate||e.attr.hideAnimate?!0:e.attr.hide!==!0,expression:"(widget.attr.showAnimate || widget.attr.hideAnimate) ? true: widget.attr.hide !== true"}],ref:"widget_"+e.id,refInFor:!0,staticClass:"my-comp",style:t.getBindStyle(e)},[i("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(e),on:{click:function(n){return t.openLink(e)}}},[i("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[i("span",{style:t.getTitleSpanStyle(e)},[t._v(t._s(e.title.text)+" ")])])]),i("draggable-component-container",{ref:"comp_"+e.id,refInFor:!0,style:t.getInfoStyle(e),attrs:{widgetData:e},on:{attrChange:t.attrChange,doGetPreviewData:t.getPreviewData,doReSetBoardId:t.doReSetBoardId}})],1)])]})],2)],1):t._e(),t.drawer.startPosition==="left"||t.drawer.startPosition==="right"?i("div",{ref:"drawers",class:`${t.moving?"":"drawer-content"}`,style:{display:"flex",flexDirection:"column",...t.drawer.background,width:t.moving?t.movingWidth+"px":t.popContentHeight.w+"px",height:t.drawer.tabarWidth.height,overflow:"hidden"},attrs:{id:"drawers"}},[i("hide-button",{attrs:{attr:t.widgetInfo.attr}}),t.drawer.startPosition==="left"?i("div",{staticStyle:{width:"30px",height:"100%",position:"absolute",right:"0px"}},[t.drawer.changeWidth==="freeDrag"?i("div",{style:{paddingRight:t.drawer.iconStyle.marginRight+"px",position:"absolute",top:"50%",width:t.drawer.tabarWidth.width,"z-index":999},on:{touchstart:t.handleDownLeftMobile,mousedown:t.handleDownLeftPc}},[i("div",{style:{height:"100%"}},[i("i",{class:`${t.popContentHeight.icon}`,style:{fontSize:t.drawer.iconStyle.fontSize+"px",color:t.drawer.iconStyle.color,display:"flex","align-items":"center"}})])]):t._e(),t.drawer.changeWidth==="wGrade"?i("div",{style:{textAlign:"center",paddingRight:t.drawer.iconStyle.marginRight+"px",position:"absolute",top:"50%","z-index":999,display:"flex"},on:{click:t.changeWidth}},[i("i",{class:`${t.popContentHeight.icon}`,style:{fontSize:t.drawer.iconStyle.fontSize+"px",color:t.drawer.iconStyle.color,height:"20px",width:"20px"},attrs:{id:"icon-right"}})]):t._e()]):t._e(),t.drawer.startPosition==="right"?i("div",{staticStyle:{width:"30px",height:"100%",position:"absolute",left:"0px"}},[t.drawer.changeWidth==="freeDrag"?i("div",{style:{paddingLeft:t.drawer.iconStyle.marginLeft+"px",position:"absolute",left:t.drawer.iconStyle.marginLeft+"px",top:"50%",width:t.drawer.tabarWidth.width,"z-index":999},on:{touchstart:t.handleDownRightMobile,mousedown:t.handleDownRightPc}},[i("div",{style:{height:"100%"}},[i("i",{class:`${t.popContentHeight.icon}`,style:{fontSize:t.drawer.iconStyle.fontSize+"px",color:t.drawer.iconStyle.color,display:"flex"}})])]):t._e(),t.drawer.changeWidth==="wGrade"?i("div",{style:{textAlign:"center",paddingLeft:t.drawer.iconStyle.marginLeft+"px",position:"absolute",left:t.drawer.iconStyle.marginLeft+"px",top:"50%",width:t.drawer.tabarWidth.width,height:"100%","z-index":999,display:"flex"},on:{click:t.changeWidth}},[i("i",{class:`${t.popContentHeight.icon}`,style:{fontSize:t.drawer.iconStyle.fontSize+"px",color:t.drawer.iconStyle.color,height:"20px",width:"20px"},attrs:{id:"icon-left"}})]):t._e()]):t._e(),i("div",{ref:"myScreen",staticClass:"my-div",style:{overflow:"hidden",flex:1,position:"relative"},on:{touchend:function(e){t.drawer.startPosition==="left"&&(t.drawer.changeWidth==="wGrade"||t.drawer.changeWidth==="freeDrag")&&t.onTouchend(e)},touchmove:function(e){t.drawer.startPosition==="left"&&(t.drawer.changeWidth==="wGrade"||t.drawer.changeWidth==="freeDrag")&&t.onTouchmove(e)},touchstart:function(e){t.drawer.startPosition==="left"&&(t.drawer.changeWidth==="wGrade"||t.drawer.changeWidth==="freeDrag")&&t.onTouchstart(e)}}},[t.container.scroll.show?i("happy-scroll",{attrs:{color:t.container.scroll.color,"hide-horizontal":!0,"scroll-top":t.scrollTopDis,size:t.container.scroll.height},on:{"update:scrollTop":function(e){t.scrollTopDis=e},"update:scroll-top":function(e){t.scrollTopDis=e}}},[i("div",{style:{width:t.scrollWidth+"px",width:(t.widgetInfo.config.drawer.startPosition==="left"?t.bodyHeight:t.widgetInfo.attr.h)+"px"},on:{touchend:function(e){return t.happyTouchEnd(e)},touchmove:function(e){return t.happyTouchMove(e)},touchstart:function(e){return t.happyTouchStart(e)}}},[t._l(t.orgWidget(t.container.widgets),function(e){return[i("div",{key:"widget_"+e.id,style:(e.attr.deg&&e.attr.deg!=0?"transform: rotate("+e.attr.deg+"deg);":"")+"position: absolute;width: "+e.attr.widgetW+"px;height: "+e.attr.h+"px;left:"+e.attr.x+"px;top:"+e.attr.y+"px"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.attr.showAnimate||e.attr.hideAnimate?!0:e.attr.hide!==!0,expression:"(widget.attr.showAnimate || widget.attr.hideAnimate) ? true: widget.attr.hide !== true"}],ref:"widget_"+e.id,refInFor:!0,staticClass:"my-comp",style:t.getBindStyle(e)},[i("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(e),on:{click:function(n){return t.openLink(e)}}},[i("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[i("span",{style:t.getTitleSpanStyle(e)},[t._v(t._s(e.title.text)+" ")])])]),i("draggable-component-container",{ref:"comp_"+e.id,refInFor:!0,style:t.getInfoStyle(e),attrs:{widgetData:e},on:{attrChange:t.attrChange,doGetPreviewData:t.getPreviewData,doReSetBoardId:t.doReSetBoardId}})],1)])]})],2)]):t._l(t.orgWidget(t.container.widgets),function(e){return[i("div",{key:"widget_"+e.id,style:(e.attr.deg&&e.attr.deg!=0?"transform: rotate("+e.attr.deg+"deg);":"")+"position: absolute;width: "+e.attr.widgetW+"px;height: "+e.attr.h+"px;left:"+e.attr.x+"px;top:"+e.attr.y+"px"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.attr.showAnimate||e.attr.hideAnimate?!0:e.attr.hide!==!0,expression:"(widget.attr.showAnimate || widget.attr.hideAnimate) ? true: widget.attr.hide !== true"}],ref:"widget_"+e.id,refInFor:!0,staticClass:"my-comp",style:t.getBindStyle(e)},[i("div",{staticStyle:{overflow:"hidden",width:"100%"},style:t.getTitleStyle(e),on:{click:function(n){return t.openLink(e)}}},[i("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[i("span",{style:t.getTitleSpanStyle(e)},[t._v(t._s(e.title.text)+" ")])])]),i("draggable-component-container",{ref:"comp_"+e.id,refInFor:!0,style:t.getInfoStyle(e),attrs:{widgetData:e},on:{attrChange:t.attrChange,doGetPreviewData:t.getPreviewData,doReSetBoardId:t.doReSetBoardId}})],1)])]})],2)],1):t._e()])],1)},p=[],y=s(996070),v=s(344115),r=s(844513),d=s(980512),h=s(193575),a=s(105143),l=s(927966),w=s(977863),c=s(701753),E=s(126711),H=s(56279),T=s(42160),P=s(148836),W=s(555616),b=s(149500),M={name:"mobile-container-drawer-view",props:["widgetInfo"],components:{DraggableComponentContainer:d.Z,HappyScroll:w.HappyScroll,Popup:v.Z,HideButton:r.Z},mixins:[c.baseConfig,h.E,a.b,E.H,H.P],data(){return{prefix:{widget:"widget_"},dragState:{},currentHeightType:"",currentWidthType:"",beforeHeightType:"",beforeWidthType:"",moving:!1,screenY:"",screenX:"",movingHeight:0,movingWidth:0,happyScreenY:0,scrollTopDis:0,drawerVisible:!1,dbClick:!0,actionList:{},bodyWidth:0,bodyHeight:0,screenHeight:"",startY:0,endY:0,startX:0,endX:0,distantX:0,distantY:0,startMouseTop:0,endMouseTop:0,startMouse:0,endMouse:0}},mounted(){this.initAction(this.widgetInfo),this.bodyWidth=window.innerWidth,this.bodyHeight=window.innerHeight,this.loadInfo(this.widgetInfo)},computed:{...(0,P.Se)(["getCanvasSetting","isView"]),scrollHeight(){let o=[];return this.orgWidget(this.widgetInfo.config.container.widgets).forEach(t=>{o.push(t.attr.h+t.attr.y)}),o.sort((t,i)=>i-t),o[0]},scrollWidth(){let o=[];return this.orgWidget(this.widgetInfo.config.container.widgets).forEach(t=>{o.push(t.attr.w+t.attr.x)}),o.sort((t,i)=>i-t),o[0]},drawer(){return this.widgetInfo.config.drawer},container(){return this.widgetInfo.config.container},popContentHeight(){let o=0,t=0,i="";if(this.widgetInfo.config.drawer.changeHeight=="1"&&(this.drawer.startPosition=="bottom"||this.drawer.startPosition=="top"))return{h:this.widgetInfo.attr.hh,icon:""};if(this.widgetInfo.config.drawer.changeWidth=="wFixed"&&(this.drawer.startPosition=="left"||this.drawer.startPosition=="right"))return{icon:"",w:this.widgetInfo.attr.w};if(this.widgetInfo.config.drawer.changeHeight=="3"&&this.drawer.startPosition=="bottom")o=this.widgetInfo.config.drawer.zNormalHeight,i=this.widgetInfo.config.drawer.normalIcon?this.widgetInfo.config.drawer.normalIcon:"iconfont bi_del4";else if(this.widgetInfo.config.drawer.changeHeight=="2"&&this.drawer.startPosition=="bottom")switch(this.currentHeightType){case"maxHeight":o=this.widgetInfo.attr.hh,i=this.widgetInfo.config.drawer.maxIcon?this.widgetInfo.config.drawer.maxIcon:"iconfont bi_down";break;case"normalHeight":o=this.widgetInfo.config.drawer.normalHeight,i=this.widgetInfo.config.drawer.normalIcon?this.widgetInfo.config.drawer.normalIcon:"iconfont bi_del4";break;case"minHeight":o=this.widgetInfo.config.drawer.minHeight,i=this.widgetInfo.config.drawer.minIcon?this.widgetInfo.config.drawer.minIcon:"iconfont bi_up";break;default:o=this.widgetInfo.attr.hh}else if(this.widgetInfo.config.drawer.changeHeight=="3"&&this.drawer.startPosition=="top")o=this.widgetInfo.config.drawer.zNormalHeight,i=this.widgetInfo.config.drawer.normalIcon?this.widgetInfo.config.drawer.normalIcon:"iconfont bi_del4";else if(this.widgetInfo.config.drawer.changeHeight=="2"&&this.drawer.startPosition=="top")switch(this.currentHeightType){case"maxHeight":o=this.widgetInfo.attr.hh,i=this.widgetInfo.config.drawer.maxIcon?this.widgetInfo.config.drawer.maxIcon:"iconfont bi_down";break;case"normalHeight":o=this.widgetInfo.config.drawer.normalHeight,i=this.widgetInfo.config.drawer.normalIcon?this.widgetInfo.config.drawer.normalIcon:"iconfont bi_del4";break;case"minHeight":o=this.widgetInfo.config.drawer.minHeight,i=this.widgetInfo.config.drawer.minIcon?this.widgetInfo.config.drawer.minIcon:"iconfont bi_up";break;default:o=this.widgetInfo.attr.hh}else if(this.widgetInfo.config.drawer.changeWidth=="wGrade"&&this.drawer.startPosition=="left")switch(this.currentWidthType){case"maxWidth":t=this.widgetInfo.attr.w,i=this.widgetInfo.config.drawer.maxIcon?this.widgetInfo.config.drawer.maxIcon:"iconfont bi_right";break;case"normalWidth":t=this.widgetInfo.config.drawer.normalWidth,i=this.widgetInfo.config.drawer.normalIcon?this.widgetInfo.config.drawer.normalIcon:"iconfont bi_menuMoreV";break;case"minWidth":t=this.widgetInfo.config.drawer.minWidth,i=this.widgetInfo.config.drawer.minIcon?this.widgetInfo.config.drawer.minIcon:"iconfont bi_left";break;default:t=this.widgetInfo.attr.w}else if(this.widgetInfo.config.drawer.changeWidth=="freeDrag"&&this.drawer.startPosition=="left")t=this.widgetInfo.config.drawer.zNormalWidth,i=this.widgetInfo.config.drawer.normalIcon?this.widgetInfo.config.drawer.normalIcon:"iconfont bi_menuMoreV";else if(this.widgetInfo.config.drawer.changeWidth=="wGrade"&&this.drawer.startPosition=="right")switch(this.currentWidthType){case"maxWidth":t=this.widgetInfo.attr.w,i=this.widgetInfo.config.drawer.maxIcon?this.widgetInfo.config.drawer.maxIcon:"iconfont bi_left";break;case"normalWidth":t=this.widgetInfo.config.drawer.normalWidth,i=this.widgetInfo.config.drawer.normalIcon?this.widgetInfo.config.drawer.normalIcon:"iconfont bi_menuMoreV";break;case"minWidth":t=this.widgetInfo.config.drawer.minWidth,i=this.widgetInfo.config.drawer.minIcon?this.widgetInfo.config.drawer.minIcon:"iconfont bi_right";break;default:t=this.widgetInfo.attr.w}else this.widgetInfo.config.drawer.changeWidth=="freeDrag"&&this.drawer.startPosition=="right"&&(t=this.widgetInfo.config.drawer.zNormalWidth,i=this.widgetInfo.config.drawer.normalIcon?this.widgetInfo.config.drawer.normalIcon:"iconfont bi_menuMoreV");return b.info("====",{h:o,icon:i,w:t}),{h:o,icon:i,w:t}},getPopupStyle(){if(this.widgetInfo.config.drawer.startPosition==="left"&&this.widgetInfo.config.drawer.changeWidth=="freeDrag")return{width:this.widgetInfo.config.drawer.zNormalWidth+"px",height:this.bodyHeight+"px",left:"0px"};if(this.widgetInfo.config.drawer.startPosition==="right"&&this.widgetInfo.config.drawer.changeWidth=="wGrade")return{width:this.widgetInfo.config.drawer.initWidth,height:this.bodyHeight+"px",right:"0px"};if(this.widgetInfo.config.drawer.startPosition==="left"&&this.widgetInfo.config.drawer.changeWidth=="wGrade")return{width:this.widgetInfo.config.drawer.initWidth,height:this.bodyHeight+"px",left:"0px"};if(this.widgetInfo.config.drawer.startPosition==="right"&&this.widgetInfo.config.drawer.changeWidth=="freeDrag")return{width:this.widgetInfo.config.drawer.zNormalWidth+"px",height:this.bodyHeight+"px",right:"0px"};if(this.widgetInfo.config.drawer.startPosition==="right"&&this.widgetInfo.config.drawer.changeWidth=="wFixed")return{width:this.widgetInfo.attr.w,height:this.bodyHeight+"px",right:"0px"};if(this.widgetInfo.config.drawer.startPosition==="left"&&this.widgetInfo.config.drawer.changeWidth=="wFixed")return{width:this.widgetInfo.attr.w,height:this.bodyHeight+"px",left:"0px"}}},watch:{"widgetInfo.attr.hide":function(o){this.$emit("attrChange",this.widgetInfo),this.drawerVisible=!o}},methods:{loadInfo(){this.drawerVisible=this.widgetInfo.config.drawer.initShow,this.widgetInfo.attr.hide=!this.widgetInfo.config.drawer.initShow,this.currentHeightType=this.widgetInfo.config.drawer.initHeight,this.beforeHeightType=this.widgetInfo.config.drawer.initHeight,this.currentWidthType=this.widgetInfo.config.drawer.initWidth,this.beforeWidthType=this.widgetInfo.config.drawer.initWidth,this.widgetInfo.attr.h=0,this.lifecycleAfterLoad()},handleDownRightMobile(o){document.onselectstart=()=>!1,document.ondragstart=()=>!1,this.dragstates={startX:o.touches[0].clientX,endX:o.touches[0].clientX},document.addEventListener("touchmove",this.handleMoveRightMobile),document.addEventListener("touchend",this.handleUpRightMobile)},handleMoveRightMobile(o){let t=this.$refs.drawers.parentElement;const{endX:i}=this.dragstates;let e=t.offsetWidth;this.distanceX=i-o.touches[0].clientX;let n=parseInt(document.getElementById("drawers").parentElement.style.width);if(b.log(this.distanceX,e),this.distanceX<0){if(n&&n<=this.widgetInfo.config.drawer.minInitWidth)return document.getElementById("drawers").parentElement.style.width=this.widgetInfo.config.drawer.minInitWidth+"px";document.getElementById("drawers").parentElement.style.width=n+this.distanceX+"px",document.getElementById("drawers").style.width=n-this.distanceX+"px"}else{if(n&&n>=this.widgetInfo.attr.w){n=this.widgetInfo.attr.w+"px";return}document.getElementById("drawers").parentElement.style.width=e+this.distanceX+"px",document.getElementById("drawers").style.width=n+this.distanceX+"px"}this.dragstates.endX=o.touches[0].clientX},handleUpRightMobile(){document.removeEventListener("touchmove",this.handleMoveRightMobile),document.removeEventListener("touchend",this.handleUpRightMobile),document.onselectstart=null,document.ondragstart=null,this.startX=0,this.distanceX=0},handleDownRightPc(o){document.onselectstart=()=>!1,document.ondragstart=()=>!1,this.dragStates={startMouse:o.clientX,endMouse:o.clientX},document.addEventListener("mousemove",this.handleMoveRightPc),document.addEventListener("mouseup",this.handleUpRightPc)},handleMoveRightPc(o){let t=this.$refs.drawers.parentElement;const{endMouse:i}=this.dragStates;let e=t.offsetWidth;this.distanceX=i-o.clientX;let n=parseInt(document.getElementById("drawers").parentElement.style.width);if(this.distanceX<0){if(n&&n<=this.widgetInfo.config.drawer.minInitWidth)return document.getElementById("drawers").parentElement.style.width=this.widgetInfo.config.drawer.minInitWidth+"px";document.getElementById("drawers").parentElement.style.width=n+this.distanceX+"px",document.getElementById("drawers").style.width=n-this.distanceX+"px"}else{if(n&&n>=this.widgetInfo.attr.w){n=this.widgetInfo.attr.w+"px";return}document.getElementById("drawers").parentElement.style.width=e+this.distanceX+"px",document.getElementById("drawers").style.width=n+this.distanceX+"px"}this.dragStates.endMouse=o.clientX},handleUpRightPc(){document.removeEventListener("mousemove",this.handleMoveRightPc),document.removeEventListener("mouseup",this.handleUpRightPc),document.onselectstart=null,document.ondragstart=null},handleDownLeftMobile(o){document.onselectstart=()=>!1,document.ondragstart=()=>!1,this.dragstates={startX:o.touches[0].clientX,endX:o.touches[0].clientX},document.addEventListener("touchmove",this.handleMoveLeftMobile),document.addEventListener("touchend",this.handleUpLeftMobile)},handleMoveLeftMobile(o){let t=this.$refs.drawers.parentElement;const{endX:i}=this.dragstates;let e=t.offsetWidth;this.distanceX=o.touches[0].clientX-i;let n=parseInt(document.getElementById("drawers").parentElement.style.width);if(b.log(this.distanceX,e),this.distanceX<0){if(n&&n<=this.widgetInfo.config.drawer.minInitWidth)return document.getElementById("drawers").parentElement.style.width=this.widgetInfo.config.drawer.minInitWidth+"px";document.getElementById("drawers").parentElement.style.width=n+this.distanceX+"px",document.getElementById("drawers").style.width=n-this.distanceX+"px"}else{if(n&&n>=this.widgetInfo.attr.w){n=this.widgetInfo.attr.w+"px";return}document.getElementById("drawers").parentElement.style.width=e+this.distanceX+"px",document.getElementById("drawers").style.width=n+this.distanceX+"px"}this.dragstates.endX=o.touches[0].clientX},handleUpLeftMobile(){document.removeEventListener("touchmove",this.handleMoveLeftMobile),document.removeEventListener("touchend",this.handleUpLeftMobile),document.onselectstart=null,document.ondragstart=null,this.startX=0,this.distanceX=0},handleDownLeftPc(o){document.onselectstart=()=>!1,document.ondragstart=()=>!1,this.dragStates={startMouse:o.clientX,endMouse:o.clientX},document.addEventListener("mousemove",this.handleMoveLeftPc),document.addEventListener("mouseup",this.handleUpLeftPc)},handleMoveLeftPc(o){let t=this.$refs.drawers.parentElement;const{endMouse:i}=this.dragStates;let e=t.offsetWidth;this.distanceX=o.clientX-i;let n=parseInt(document.getElementById("drawers").parentElement.style.width);if(this.distanceX<0){if(n&&n<=this.widgetInfo.config.drawer.minInitWidth)return document.getElementById("drawers").parentElement.style.width=this.widgetInfo.config.drawer.minInitWidth+"px";document.getElementById("drawers").parentElement.style.width=n+this.distanceX+"px",document.getElementById("drawers").style.width=n-this.distanceX+"px"}else{if(n&&n>=this.widgetInfo.attr.w){n=this.widgetInfo.attr.w+"px";return}document.getElementById("drawers").parentElement.style.width=e+this.distanceX+"px",document.getElementById("drawers").style.width=n+this.distanceX+"px"}this.dragStates.endMouse=o.clientX},handleUpLeftPc(){document.removeEventListener("mousemove",this.handleMoveLeftPc),document.removeEventListener("mouseup",this.handleUpLeftPc),document.onselectstart=null,document.ondragstart=null},handleDownTopMobile(o){document.onselectstart=()=>!1,document.ondragstart=()=>!1,this.dragstate={startY:o.touches[0].clientY,endY:o.touches[0].clientY},document.addEventListener("touchmove",this.handleMoveTopMobile),document.addEventListener("touchend",this.handleUpTopMobile)},handleMoveTopMobile(o){let t=this.$refs.drawer.parentElement;const{endY:i}=this.dragstate;let e=t.offsetHeight;this.distanceY=o.touches[0].clientY-i;let n=parseInt(document.getElementById("drawer").parentElement.style.height);if(b.log(this.distanceY,e),this.distanceY<0){if(n&&n<=this.widgetInfo.config.drawer.minInitHeight)return document.getElementById("drawer").parentElement.style.height=this.widgetInfo.config.drawer.minInitHeight+"px";document.getElementById("drawer").parentElement.style.height=n+this.distanceY+"px",document.getElementById("drawer").style.height=n-this.distanceY+"px"}else{if(n&&n>=this.widgetInfo.attr.hh){n=this.widgetInfo.attr.hh+"px";return}document.getElementById("drawer").parentElement.style.height=e+this.distanceY+"px",document.getElementById("drawer").style.height=n+this.distanceY+"px"}this.dragstate.endY=o.touches[0].clientY},handleUpTopMobile(){document.removeEventListener("touchmove",this.handleMoveTopMobile),document.removeEventListener("touchend",this.handleUpTopMobile),document.onselectstart=null,document.ondragstart=null,this.startY=0,this.distanceY=0},handleDownTopPc(o){document.onselectstart=()=>!1,document.ondragstart=()=>!1,this.dragState={endMouseTop:o.pageY},document.addEventListener("mousemove",this.handleMoveTopPc),document.addEventListener("mouseup",this.handleUpTopPc)},handleMoveTopPc(o){let{endMouseTop:t}=this.dragState,i=this.$refs.drawer.parentElement.offsetHeight;this.distanceY=o.clientY-t;let e=parseInt(this.$refs.drawer.parentElement.style.height);if(this.distanceY<0){if(e&&e<=this.widgetInfo.config.drawer.minInitHeight)return document.getElementById("drawer").parentElement.style.height=this.widgetInfo.config.drawer.minInitHeight+"px";document.getElementById("drawer").parentElement.style.height=e+this.distanceY+"px",document.getElementById("drawer").style.height=e-this.distanceY+"px"}else if(this.distanceY>0){if(e&&e>=this.widgetInfo.attr.hh){e=this.widgetInfo.attr.hh+"px";return}this.$refs.drawer.style.height=e+this.distanceY+"px",this.$refs.drawer.parentElement.style.height=i+this.distanceY+"px"}this.dragState.endMouseTop=o.clientY},handleUpTopPc(){document.removeEventListener("mousemove",this.handleMoveTopPc),document.removeEventListener("mouseup",this.handleUpTopPc),document.onselectstart=null,document.ondragstart=null},handleMouseDownPc(o){document.onselectstart=()=>!1,document.ondragstart=()=>!1,this.dragState={startMouseTop:o.clientY,endMouseTop:o.clientY},document.addEventListener("mousemove",this.handleMouseMovePc),document.addEventListener("mouseup",this.handleMouseUpPc)},handleMouseMovePc(o){let t=this.$refs.drawer.parentElement;const{endMouseTop:i}=this.dragState;let e=t.offsetHeight;this.distanceY=i-o.clientY;let n=parseInt(document.getElementById("drawer").parentElement.style.height);if(this.distanceY<0){if(n&&n<=this.widgetInfo.config.drawer.minInitHeight)return document.getElementById("drawer").parentElement.style.height=this.widgetInfo.config.drawer.minInitHeight+"px";document.getElementById("drawer").parentElement.style.height=n+this.distanceY+"px",document.getElementById("drawer").style.height=n-this.distanceY+"px"}else{if(n&&n>=this.widgetInfo.attr.hh){n=this.widgetInfo.attr.hh+"px";return}document.getElementById("drawer").parentElement.style.height=e+this.distanceY+"px",document.getElementById("drawer").style.height=n+this.distanceY+"px"}this.dragState.endMouseTop=o.clientY},handleMouseUpPc(){document.removeEventListener("mousemove",this.handleMouseMovePc),document.removeEventListener("mouseup",this.handleMouseUpPc),document.onselectstart=null,document.ondragstart=null},handleMouseDownMobile(o){document.onselectstart=()=>!1,document.ondragstart=()=>!1,this.dragstate={startY:o.touches[0].clientY,endY:o.touches[0].clientY},document.addEventListener("touchmove",this.handleMouseMoveMobile),document.addEventListener("touchend",this.handleMouseUpMobile)},handleMouseMoveMobile(o){let t=this.$refs.drawer.parentElement;const{endY:i}=this.dragstate;let e=t.offsetHeight;this.distanceY=i-o.touches[0].clientY;let n=parseInt(document.getElementById("drawer").parentElement.style.height);if(this.distanceY<0){if(n&&n<=this.widgetInfo.config.drawer.minInitHeight)return document.getElementById("drawer").parentElement.style.height=this.widgetInfo.config.drawer.minInitHeight+"px";document.getElementById("drawer").parentElement.style.height=n+this.distanceY+"px",document.getElementById("drawer").style.height=n-this.distanceY+"px"}else{if(n&&n>=this.widgetInfo.attr.hh){n=this.widgetInfo.attr.hh+"px";return}document.getElementById("drawer").parentElement.style.height=e+this.distanceY+"px",document.getElementById("drawer").style.height=n+this.distanceY+"px"}this.dragstate.endY=o.touches[0].clientY},handleMouseUpMobile(){document.removeEventListener("touchmove",this.handleMouseMoveMobile),document.removeEventListener("touchend",this.handleMouseUpMobile),document.onselectstart=null,document.ondragstart=null,this.startY=0,this.distanceY=0},reLoadInfo(o){this.loadInfo(o)},initAction(o){this.actionReceive(o)},actionReceive(o){if(o.action===void 0||o.action.receive===void 0)return;let t=o.action.receive.openDrawer;t&&t.enabled&&t.openDrawerList&&t.openDrawerList.length>0&&this.doDrawerVisible(t.openDrawerList,t.value,t.script,!0);let i=o.action.receive.closeDrawer;i&&i.enabled&&i.closeDrawerList&&i.closeDrawerList.length>0&&this.doDrawerVisible(i.closeDrawerList,i.value,i.script,!1);let e=o.action.receive.openInitDrawer;e&&e.enabled&&e.openInitDrawerList&&e.openInitDrawerList.length>0&&this.doMaxDrawerVisible(e.openInitDrawerList,e.value,e.script,!0);let n=o.action.receive.changeDrawer;n&&n.enabled&&n.changeDrawerList&&n.changeDrawerList.length>0&&this.doDrawerVisible(n.changeDrawerList,n.value,n.script,"change")},doDrawerVisible(o,t,i,e){let n=this;this.$$lib__.each(o,g=>{let x=g[0][1]+"_"+g[0][0];g[0][1].indexOf("_")>-1&&(x=g[0][1]);let m=g[0][2];if(m){let f=m.indexOf("|");f>-1&&(m=g[0][2].substring(f+1))}l.Z.$on(x,f=>{if(n.dbClick){if(n.dbClick=!1,i&&i.enabled){if(i.content===""){W.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.showDrawer=new Function("param","param_key","value","visible",i.content)}T.default.set(n.actionList,x,f),this.showDrawer(f,m,t,e),setTimeout(()=>{n.dbClick=!0},500)}})})},showDrawer(o,t,i,e){if(i==null||i===""||i===void 0||i===o[t]){if(e==="change"){this.drawerVisible=!this.drawerVisible,this.widgetInfo.attr.hide=!!this.drawerVisible;return}this.widgetInfo.attr.hide=!e,this.drawerVisible=e}},doMaxDrawerVisible(o,t,i,e){let n=this;this.$$lib__.each(o,g=>{let x=g[0][1]+"_"+g[0][0];g[0][1].indexOf("_")>-1&&(x=g[0][1]);let m=g[0][2];if(m){let f=m.indexOf("|");f>-1&&(m=g[0][2].substring(f+1))}l.Z.$on(x,f=>{if(n.dbClick){if(n.dbClick=!1,i&&i.enabled){if(i.content===""){W.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.showMaxDrawer=new Function("param","param_key","value","visible",i.content)}T.default.set(n.actionList,x,f),this.widgetInfo.config.drawer.startPosition=="top"||this.widgetInfo.config.drawer.startPosition=="bottom"?this.showMaxDrawer(f,m,t,e):(this.widgetInfo.config.drawer.startPosition=="left"||this.widgetInfo.config.drawer.startPosition=="right")&&this.showInitDrawer(f,m,t,e),setTimeout(()=>{n.dbClick=!0},50)}})})},showInitDrawer(o,t,i,e){let n=0;debugger;this.widgetInfo.attr.hide=!e,(i==null||i===""||i===void 0||i===o[t])&&(this.widgetInfo.config.drawer.changeWidth=="freeDrag"&&this.widgetInfo.config.drawer.startPosition==="left"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeWidth=="freeDrag"&&this.widgetInfo.config.drawer.startPosition==="left"&&this.widgetInfo.config.drawer.initShow?this.nextTick(function(){this.$refs.drawers.parentElement.style.width=this.widgetInfo.config.drawer.zNormalWidth+"px",this.$refs.drawers.style.width=this.widgetInfo.config.drawer.zNormalWidth+"px",this.drawerVisible=e}):this.widgetInfo.config.drawer.changeWidth=="wGrade"&&this.widgetInfo.config.drawer.startPosition==="left"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeWidth=="wGrade"&&this.widgetInfo.config.drawer.startPosition==="left"&&this.widgetInfo.config.drawer.initShow?(this.$nextTick(function(){switch(this.widgetInfo.config.drawer.initWidth){case"maxWidth":n=this.widgetInfo.attr.w,this.$refs.drawers.style.width=n+"px",this.widgetInfo.config.drawer.maxIcon==""?document.getElementById("icon-right").className="iconfont bi_right":document.getElementById("icon-right").className=this.widgetInfo.config.drawer.maxIcon;break;case"normalWidth":n=this.widgetInfo.config.drawer.normalWidth,this.$refs.drawers.style.width=n+"px",this.widgetInfo.config.drawer.normalIcon==""?document.getElementById("icon-right").className="iconfont bi_del4":document.getElementById("icon-right").className=this.widgetInfo.config.drawer.normalIcon;break;case"minWidth":n=this.widgetInfo.config.drawer.minWidth,this.$refs.drawers.style.width=n+"px",this.widgetInfo.config.drawer.normalIcon==""?document.getElementById("icon-right").className="iconfont bi_left":document.getElementById("icon-right").className=this.widgetInfo.config.drawer.minIcon;break;default:n=this.widgetInfo.attr.w}}),this.drawerVisible=e):this.widgetInfo.config.drawer.changeWidth=="wFixed"&&this.widgetInfo.config.drawer.startPosition==="left"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeWidth=="wFixed"&&this.widgetInfo.config.drawer.startPosition==="left"&&this.widgetInfo.config.drawer.initShow?this.$nextTick(function(){n=this.widgetInfo.attr.w,this.$refs.drawers.style.width=n+"px",this.drawerVisible=e}):this.widgetInfo.config.drawer.changeWidth=="wFixed"&&this.widgetInfo.config.drawer.startPosition==="right"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeWidth=="wFixed"&&this.widgetInfo.config.drawer.startPosition==="right"&&this.widgetInfo.config.drawer.initShow?this.$nextTick(function(){n=this.widgetInfo.attr.w,this.$refs.drawers.style.width=n+"px",this.drawerVisible=e}):this.widgetInfo.config.drawer.changeWidth=="freeDrag"&&this.widgetInfo.config.drawer.startPosition==="right"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeWidth=="freeDrag"&&this.widgetInfo.config.drawer.startPosition==="right"&&this.widgetInfo.config.drawer.initShow?this.$nextTick(function(){this.$refs.drawers.parentElement.style.width=this.widgetInfo.config.drawer.zNormalWidth+"px",this.$refs.drawers.style.width=this.widgetInfo.config.drawer.zNormalWidth+"px",this.drawerVisible=e}):(this.widgetInfo.config.drawer.changeWidth=="wGrade"&&this.widgetInfo.config.drawer.startPosition==="right"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeWidth=="wGrade"&&this.widgetInfo.config.drawer.startPosition==="right"&&this.widgetInfo.config.drawer.initShow)&&(this.$nextTick(function(){switch(this.widgetInfo.config.drawer.initWidth){case"maxWidth":n=this.widgetInfo.attr.w,this.$refs.drawers.style.width=n+"px",this.widgetInfo.config.drawer.maxIcon==""?document.getElementById("icon-left").className="iconfont bi_left":document.getElementById("icon-left").className=this.widgetInfo.config.drawer.maxIcon;break;case"normalWidth":n=this.widgetInfo.config.drawer.normalWidth,this.$refs.drawers.style.width=n+"px",this.widgetInfo.config.drawer.normalIcon==""?document.getElementById("icon-left").className="iconfont bi_del4":document.getElementById("icon-left").className=this.widgetInfo.config.drawer.normalIcon;break;case"minWidth":n=this.widgetInfo.config.drawer.minWidth,this.$refs.drawers.style.width=n+"px",this.widgetInfo.config.drawer.normalIcon==""?document.getElementById("icon-left").className="iconfont bi_right":document.getElementById("icon-left").className=this.widgetInfo.config.drawer.minIcon;break;default:n=this.widgetInfo.attr.w}}),this.drawerVisible=e))},showMaxDrawer(o,t,i,e){let n=0;this.widgetInfo.attr.hide=!e,(i==null||i===""||i===void 0||i===o[t])&&(this.widgetInfo.config.drawer.changeHeight=="3"&&this.widgetInfo.config.drawer.startPosition==="bottom"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeHeight=="3"&&this.widgetInfo.config.drawer.startPosition==="bottom"&&this.widgetInfo.config.drawer.initShow?this.$nextTick(function(){this.$refs.drawer.parentElement.style.height=this.widgetInfo.config.drawer.zNormalHeight+"px",this.$refs.drawer.style.height=this.widgetInfo.config.drawer.zNormalHeight+"px",this.drawerVisible=e}):this.widgetInfo.config.drawer.changeHeight=="2"&&this.widgetInfo.config.drawer.startPosition==="bottom"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeHeight=="2"&&this.widgetInfo.config.drawer.startPosition==="bottom"&&this.widgetInfo.config.drawer.initShow?(this.$nextTick(function(){switch(this.widgetInfo.config.drawer.initHeight){case"maxHeight":n=this.widgetInfo.attr.hh,this.$refs.drawer.style.height=n+"px",this.widgetInfo.config.drawer.maxIcon==""?document.getElementById("icon").className="iconfont bi_down":document.getElementById("icon").className=this.widgetInfo.config.drawer.maxIcon;break;case"normalHeight":n=this.widgetInfo.config.drawer.normalHeight,this.$refs.drawer.style.height=n+"px",this.widgetInfo.config.drawer.normalIcon==""?document.getElementById("icon").className="iconfont bi_del4":document.getElementById("icon").className=this.widgetInfo.config.drawer.normalIcon;break;case"minHeight":n=this.widgetInfo.config.drawer.minHeight,this.$refs.drawer.style.height=n+"px",this.widgetInfo.config.drawer.normalIcon==""?document.getElementById("icon").className="iconfont bi_up":document.getElementById("icon").className=this.widgetInfo.config.drawer.minIcon;break;default:n=this.widgetInfo.attr.hh}}),this.drawerVisible=e):this.widgetInfo.config.drawer.changeHeight=="1"&&this.widgetInfo.config.drawer.startPosition==="bottom"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeHeight=="1"&&this.widgetInfo.config.drawer.startPosition==="bottom"&&this.widgetInfo.config.drawer.initShow?this.$nextTick(function(){n=this.widgetInfo.attr.hh,this.$refs.drawer.style.height=n+"px",this.drawerVisible=e}):this.widgetInfo.config.drawer.changeHeight=="1"&&this.widgetInfo.config.drawer.startPosition==="top"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeHeight=="1"&&this.widgetInfo.config.drawer.startPosition==="top"&&this.widgetInfo.config.drawer.initShow?this.$nextTick(function(){n=this.widgetInfo.attr.hh,this.$refs.drawer.style.height=n+"px",this.drawerVisible=e}):this.widgetInfo.config.drawer.changeHeight=="3"&&this.widgetInfo.config.drawer.startPosition==="top"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeHeight=="3"&&this.widgetInfo.config.drawer.startPosition==="top"&&this.widgetInfo.config.drawer.initShow?this.$nextTick(function(){this.$refs.drawer.parentElement.style.height=this.widgetInfo.config.drawer.zNormalHeight+"px",this.$refs.drawer.style.height=this.widgetInfo.config.drawer.zNormalHeight+"px",this.drawerVisible=e}):(this.widgetInfo.config.drawer.changeHeight=="2"&&this.widgetInfo.config.drawer.startPosition==="top"&&!this.widgetInfo.config.drawer.initShow||this.widgetInfo.config.drawer.changeHeight=="2"&&this.widgetInfo.config.drawer.startPosition==="top"&&this.widgetInfo.config.drawer.initShow)&&(this.$nextTick(function(){switch(this.widgetInfo.config.drawer.initHeight){case"maxHeight":n=this.widgetInfo.attr.hh,this.$refs.drawer.style.height=n+"px",this.widgetInfo.config.drawer.maxIcon==""?document.getElementById("icon-top").className="iconfont bi_down":document.getElementById("icon-top").className=this.widgetInfo.config.drawer.maxIcon;break;case"normalHeight":n=this.widgetInfo.config.drawer.normalHeight,this.$refs.drawer.style.height=n+"px",this.widgetInfo.config.drawer.normalIcon==""?document.getElementById("icon-top").className="iconfont bi_del4":document.getElementById("icon-top").className=this.widgetInfo.config.drawer.normalIcon;break;case"minHeight":n=this.widgetInfo.config.drawer.minHeight,this.$refs.drawer.style.height=n+"px",this.widgetInfo.config.drawer.normalIcon==""?document.getElementById("icon-top").className="iconfont bi_up":document.getElementById("icon-top").className=this.widgetInfo.config.drawer.minIcon;break;default:n=this.widgetInfo.attr.hh}}),this.drawerVisible=e))},open(){let o=this,t=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(t,i=>{if(i.enabled&&i.code==o.$$global_editor.actionType.open.code){let e=o.$$global_editor.actionType.open.code+"_"+o.widgetInfo.id,n={visible:!0};if(i.paramsExtend&&i.paramsExtend.length>0&&this.getExtendParams(n,i.paramsExtend),i.script&&i.script.enabled){if(b.log("Execute script for "+this.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){W.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",i.script.content),n=this.customScript(n)}l.Z.$emit(e,n),i.postMessage&&this.doPostMessage(n),this.actionNameList.push(e)}})},close(){let o=this;this.widgetInfo.attr.hide=!0;let t=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(t,i=>{if(i.enabled&&i.code==o.$$global_editor.actionType.close.code){let e=o.$$global_editor.actionType.close.code+"_"+o.widgetInfo.id,n={visible:!1};if(i.paramsExtend&&i.paramsExtend.length>0&&this.getExtendParams(n,i.paramsExtend),i.script&&i.script.enabled){if(b.log("Execute script for "+this.widgetInfo.name+" component to "+i.name+" component"),i.script.content==""){W.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",i.script.content),n=this.customScript(n)}l.Z.$emit(e,n),i.postMessage&&this.doPostMessage(n),this.actionNameList.push(e)}})},doReSetBoardId(o){this.$emit("doReSetBoardId",o)},attrChange(){},changeHeight(){switch(this.currentHeightType){case"maxHeight":this.beforeHeightType="maxHeight",this.currentHeightType="normalHeight";break;case"minHeight":this.beforeHeightType="minHeight",this.currentHeightType="normalHeight";break;case"normalHeight":this.beforeHeightType==="maxHeight"?this.currentHeightType="minHeight":this.currentHeightType="maxHeight",this.beforeHeightType="normalHeight";break;default:return}this.scrollTopDis!==0&&(this.scrollTopDis=0)},changeWidth(){switch(this.currentWidthType){case"maxWidth":this.beforeWidthType="maxWidth",this.currentWidthType="normalWidth";break;case"minWidth":this.beforeWidthType="minWidth",this.currentWidthType="normalWidth";break;case"normalWidth":this.beforeWidthType==="maxWidth"?this.currentWidthType="minWidth":this.currentWidthType="maxWidth",this.beforeWidthType="normalWidth";break;default:return}this.scrollTopDis!==0&&(this.scrollTopDis=0)},onTouchstart(o){this.moving=!0,this.movingWidth=this.popContentHeight.W,this.screenX=o.changedTouches[0].screenX},onTouchmove(o){let t;this.screenX?t=o.changedTouches[0].screenX-this.screenX:t=0,this.screenX=o.changedTouches[0].screenX,this.movingWidth-=t,this.movingWidth>this.widgetInfo.attr.w&&(this.movingWidth=this.widgetInfo.attr.w),o.preventDefault()},onTouchend(){let o=[{key:"maxWidth",dis:this.movingWidth-this.widgetInfo.attr.w},{key:"normalWidth",dis:this.movingWidth-this.drawer.normalWidth},{key:"minWidth",dis:this.movingWidth-this.drawer.minWidth}];o.sort((t,i)=>Math.abs(t.dis)-Math.abs(i.dis)),this.currentWidthType=o[0].key,this.moving=!1,this.screenX=""},onTouchStart(o){this.moving=!0,this.movingHeight=this.popContentHeight.h,this.screenY=o.changedTouches[0].screenY},onTouchMove(o){let t;this.screenY?t=o.changedTouches[0].screenY-this.screenY:t=0,this.screenY=o.changedTouches[0].screenY,this.movingHeight-=t,this.movingHeight>this.widgetInfo.attr.hh&&(this.movingHeight=this.widgetInfo.attr.hh),o.preventDefault()},onTouchEnd(){let o=[{key:"maxHeight",dis:this.movingHeight-this.widgetInfo.attr.hh},{key:"normalHeight",dis:this.movingHeight-this.drawer.normalHeight},{key:"minHeight",dis:this.movingHeight-this.drawer.minHeight}];o.sort((t,i)=>Math.abs(t.dis)-Math.abs(i.dis)),this.currentHeightType=o[0].key,this.moving=!1,this.screenY=""},happyTouchStart(o){this.happyScreenY=o.changedTouches[0].screenY},happyTouchMove(o){let t=o.changedTouches[0].screenY-this.happyScreenY;this.scrollTopDis===0?t<=0&&o.stopPropagation():this.scrollTopDis===this.scrollHeight-this.$refs.myScreen.offsetHeight+20+3?(t<0||o.stopPropagation(),this.screenY=o.changedTouches[0].screenY):(o.stopPropagation(),this.screenY=o.changedTouches[0].screenY)},happyTouchEnd(){}}},D=M,_=s(768141),$=(0,_.Z)(D,I,p,!1,null,"b2a9de3e",null),L=$.exports}}]);
