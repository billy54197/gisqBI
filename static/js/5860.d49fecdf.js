"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[5860],{56279:function(S,I,n){n.d(I,{P:function(){return c}});var f=n(386892),m=n(149500);const c={mixins:[f.D],created(){},methods:{lifecycleBeforeChartsLoad(h){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&m.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),m.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let x=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[h]);if(x)return x}return h},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&m.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),m.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},833264:function(S,I,n){n.d(I,{t:function(){return c}});var f=n(470709),m=n(321300);const c={created(){},methods:{getConfigForPublic(h){return(0,f.M0)("/visual/boardPublish/getConfigForPublic",h)},savePublicWidgetDataApi(h){return(0,f.M0)("/visual/boardPublish/savePublicWidgetData",h)},getAggregateDataEx(h){return(0,f.M0)("/dashboard/editor/getAggregateDataEx",(0,m.enc)(h))},getDataLocalByDatalocalId(h){return(0,f.xV)("/data/local/getDataLocalByDatalocalId/"+h)},getAggregateDataForExcel(h){return(0,f.Fb)("/dashboard/editor/getAggregateDataForExcel",(0,m.enc)(h))}}}},752246:function(S,I,n){n.d(I,{X:function(){return f},b:function(){return m}});let f={versions:function(){var c=navigator.userAgent;return{trident:c.indexOf("Trident")>-1,presto:c.indexOf("Presto")>-1,webKit:c.indexOf("AppleWebKit")>-1,gecko:c.indexOf("Gecko")>-1&&c.indexOf("KHTML")==-1,mobile:!!c.match(/AppleWebKit.*Mobile.*/),ios:!!c.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:c.indexOf("Android")>-1,iPhone:c.indexOf("iPhone")>-1,iPad:c.indexOf("iPad")>-1,webApp:c.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},m;f.versions.mobile||f.versions.ios||f.versions.android||f.versions.iPhone||f.versions.iPad?m=!1:m=!0},844513:function(S,I,n){n.d(I,{Z:function(){return L}});var f=function(){var s=this,y=s._self._c;return s.attr.buttonHide?y("div",{style:{position:"absolute",right:s.attr.buttonHideRight+"px",top:s.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(D){return s.onHide()}}},[s.openTooltip?y("el-tooltip",{attrs:{"open-delay":1e3,content:s.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[y("el-button",{class:s.attr.buttonHideIconClass&&s.attr.buttonHideIconClass!=""?s.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:s.attr.buttonHideColor,fontSize:s.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):y("el-button",{class:s.attr.buttonHideIconClass&&s.attr.buttonHideIconClass!=""?s.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:s.attr.buttonHideColor,fontSize:s.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):s._e()},m=[],c=n(752246),h={props:["attr"],name:"hide-button",data(){return{isPc:c.b}},computed:{openTooltip:function(){let $=!1,s=this.attr.buttonHideTooltipContent;return c.b&&s&&s!=null&&s.trim()!=""&&($=!0),$}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},C=h,x=n(768141),F=(0,x.Z)(C,f,m,!1,null,"bf399b9a",null),L=F.exports},5860:function(S,I,n){n.r(I),n.d(I,{default:function(){return U}});var f=function(){var t=this,i=t._self._c;return i("div",{style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px"}},[i("div",{staticStyle:{overflow:"visible"}},[i("hide-button",{attrs:{attr:t.widgetInfo.attr}}),i("div",[i("span",{staticClass:"com_cascader_label",style:t.labelStyle},[t._v(" "+t._s(t.widgetInfo.config.part.label.text)+" ")]),i("div",{ref:"cascader",style:{display:"inline-block",float:"left"}},[i("el-cascader",{ref:"elCascader",attrs:{"append-to-body":!0,clearable:t.widgetInfo.config.part.option.clearable,"collapse-tags":t.widgetInfo.config.part.option.collapseTags,"disable-branch-nodes":t.widgetInfo.config.part.option.disableBranchNodes,disabled:t.widgetInfo.config.part.option.disabled,"expand-trigger":t.widgetInfo.config.part.option.expandTrigger==!0?"hover":"click",filterable:t.widgetInfo.config.part.option.searchable,lazy:t.widgetInfo.config.part.option.delayLoad,multiple:t.widgetInfo.config.part.option.multiple,options:t.comCascaderData,placeholder:t.widgetInfo.config.part.option.placeholder,"popper-class":"popper-class_"+t.widgetInfo.id,props:t.props,"show-all-levels":t.widgetInfo.config.part.option.showAllLevels,"show-count":t.widgetInfo.config.part.option.showCount},on:{change:t.changeEvent,"visible-change":function(o){return t.visibleChangeEvent(o,t.AREACODE)},"expand-change":t.expandChangeEvent},scopedSlots:t._u([{key:"default",fn:function({node:o,data:a}){return t.widgetInfo.config.part.option.showCount==!0?i("span",{},[i("span",[t._v(t._s(a.label))]),o.isLeaf?t._e():i("span",[t._v(" ("+t._s(a.children.length)+") ")])]):t.widgetInfo.config.part.select.dropWidth-0>0?i("el-tooltip",{attrs:{content:a.label,disabled:!a.showTooltip,effect:t.widgetInfo.config.part.select.tooltipEffect||"light"}},[i("span",{style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",maxWidth:`${t.widgetInfo.config.part.select.dropWidth}px`},on:{mouseenter:function(l){return t.spanEnter(a)}}},[t._v(t._s(a.label))])]):t._e()}}],null,!0),model:{value:t.selectValue,callback:function(o){t.selectValue=o},expression:"selectValue"}})],1)])],1)])},m=[],c=n(844513),h=n(443227),C=n(67157);const x={mixins:[C.c],data(){return{config_extend:{config:{part:{label:{paddingLeft:8,marginTop:5},select:{color:"#616266",fontSize:14,fontFamily:"alibabaPuHuiTiRegular",borderColor:"#DCDFE5",borderRadius:4,textAlign:"left",paddingTop:0,background:"#FFFFFF"}}}},filter_config:{part:{label:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266"},select:{dropBackground:null,color:"#616266",fontFamily:"alibabaPuHuiTiRegular",borderColor:"#DCDFE5",background:""}}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var F=n(445061),L=n(126711),$=n(56279),s=n(555616),y=n(42160),D=n(723400),A=n(833264),N=n(113067),E=n(148836),_=n(927966),B=n(321300),b=n(149500),O={name:"ComCascader",components:{HideButton:c.Z},mixins:[F.u,L.H,$.P,D.j,A.t,h.baseConfig,x],props:["widgetInfo"],data(){return{node:"",comCascaderData:[],selectValue:[],AREACODE:"",ArrCode:[],mulArrCode:[]}},computed:{...(0,E.Se)(["viewType","getCanvasSettingInfo"]),canvasSetting(){return this.getCanvasSettingInfo},labelStyle:function(){let e=this,t=e.widgetInfo.config.part.label.width,i=e.widgetInfo.config.part.label.height;return e.widgetInfo.config.part.label.paddingLeft&&(t=t-e.widgetInfo.config.part.label.paddingLeft),e.widgetInfo.config.part.label.marginTop&&(i=i-e.widgetInfo.config.part.label.marginTop),{display:e.widgetInfo.config.part.label.show?"inline-block":"none",width:this.mUtils.getNewPxW(t)+"px",height:this.mUtils.getNewPxH(i)+"px",lineHeight:this.mUtils.getNewPxH(i)+"px",paddingLeft:this.mUtils.getNewPxW(e.widgetInfo.config.part.label.paddingLeft)+"px",marginTop:this.mUtils.getNewPxH(e.widgetInfo.config.part.label.marginTop)+"px",fontSize:this.mUtils.getNewFontSize(e.widgetInfo.config.part.label.fontSize)+"px",fontFamily:e.widgetInfo.config.part.label.fontFamily,color:e.widgetInfo.config.part.label.color,textAlign:e.widgetInfo.config.part.label.textAlign}},props(){if(this.widgetInfo.config.part.option.delayLoad==!0&&this.widgetInfo.config.part.option.disableBranchNodes==!1&&this.widgetInfo.config.part.option.multiple==!0)return{lazy:!0,lazyLoad:this.lazyLoad,checkStrictly:!0,multiple:!0,emitPath:!1};if(this.widgetInfo.config.part.option.delayLoad==!0&&this.widgetInfo.config.part.option.disableBranchNodes==!1)return{lazy:!0,lazyLoad:this.lazyLoad,checkStrictly:!0,emitPath:!1};if(this.widgetInfo.config.part.option.delayLoad==!0&&this.widgetInfo.config.part.option.multiple==!0)return{lazy:!0,lazyLoad:this.lazyLoad,multiple:!0,emitPath:!1};if(this.widgetInfo.config.part.option.multiple==!0&&this.widgetInfo.config.part.option.disableBranchNodes==!1)return{checkStrictly:!0,multiple:!0,emitPath:!1};if(this.widgetInfo.config.part.option.multiple==!0)return{multiple:!0,emitPath:!1};if(this.widgetInfo.config.part.option.disableBranchNodes==!1)return{checkStrictly:!0,emitPath:!1};if(this.widgetInfo.config.part.option.disableBranchNodes==!0)return{checkStrictly:!1,emitPath:!1}}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)},"widgetInfo.config.part.select":{handler(){this.setStyle(this.widgetInfo)},deep:!0}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},methods:{spanEnter(e){this.$set(e,"showTooltip",event.target.scrollWidth>event.target.offsetWidth)},lazyLoad(e,t){b.log(e);let i=this,o;if(e.level==0){o=i.widgetInfo.dataset[i.widgetInfo.dataset.type].encode.firstPid;return}else o=e.data.value;let a=i.replaceParentParams(o,i.widgetInfo.config.part.option.parentParams,i.widgetInfo.dataset[i.widgetInfo.dataset.type]);switch(this.viewType){case this.$$global.editType.public.code:this.getAggregateDataEx(a).then(l=>{if(l&&l.status==200){let p=this.listToObj(i.widgetInfo.dataset[i.widgetInfo.dataset.type].dimensions,l.data.data),g=this.handleDataTree(p,i.widgetInfo.dataset[i.widgetInfo.dataset.type].encode);t(g),b.log(g)}}).catch(l=>{b.log(l)});break;default:N.o.getAggregateDataEx(a).then(l=>{if(b.log(l,l.data.data),l&&l.status==200){let p=this.listToObj(i.widgetInfo.dataset[i.widgetInfo.dataset.type].dimensions,l.data.data),g=this.handleDataTree(p,i.widgetInfo.dataset[i.widgetInfo.dataset.type].encode);t(g),b.log(g)}}).catch(l=>{b.log(l)})}},loadInfo(e){this.comCascaderData=this.getTreeData(e.dataset[e.dataset.type].encode,e.dataset[e.dataset.type].dimensions,e.dataset[e.dataset.type].source),this.setStyle(e),this.$nextTick(()=>{this.selectValue=this.getSelectValue(e)}),this.lifecycleAfterLoad()},resize(){this.setStyle(this.widgetInfo)},reLoadInfo(e){this.loadInfo(e)},setStyle(e){let t=this.getCssString(e),i=e.config.part.select.hoverBackground,o=e.config.part.select.dropBackground,a=e.config.part.select.dropBorderColor,l=`div#widget_${this.widgetInfo.id} .el-cascader .el-input .el-input__inner { border-style:solid;} `,p=`.popper-class_${this.widgetInfo.id} .el-cascader-node.in-active-path {color:#616266;font-weight:normal}.popper-class_${this.widgetInfo.id}.el-popper.el-cascader__dropdown[x-placement^=bottom] .popper__arrow::after{border-bottom-color:${o}!important;border-top-color:${o}!important;top:0px}.popper-class_${this.widgetInfo.id}.el-popper.el-cascader__dropdown[x-placement^=top] .popper__arrow::after{border-bottom-color:${o}!important;border-top-color:${o}!important;top:-6px}.popper-class_${this.widgetInfo.id}.el-popper.el-cascader__dropdown .el-scrollbar.el-cascader-menu{border-color:${a}!important} .popper-class_${this.widgetInfo.id}.el-cascader__dropdown .el-cascader-node:not(.is-disabled):focus,.popper-class_${this.widgetInfo.id}.el-cascader__dropdown .el-cascader-node:not(.is-disabled):hover{ background:${i}!important }`,g=`style_widget_${e.id}`,d=document.getElementById(g);d?d.innerHTML=l+p+t:(d=document.createElement("style"),d.id=g,d.innerHTML=l+p+t,document.getElementsByTagName("head")[0].appendChild(d))},getCssString(e){let t=this.widgetInfo.config.part.select,i="",o={};o.width=this.mUtils.getNewPxW(t.width)+"px",o.height=`${t.height}px!important`,o.borderRadius=t.borderRadius+"px",o.background=t.background,o.borderColor=t.borderColor,o.borderWidth=`${t.borderTop}px ${t.borderRight}px ${t.borderBottom}px ${t.borderLeft}px`,o.fontSize=this.mUtils.getNewFontSize(t.fontSize)+"px",o.paddingTop=`${t.paddingTop}px`,o.paddingLeft=`${t.paddingLeft}px`,o.fontFamily=`${t.fontFamily}`,o.textAlign=`${t.textAlign}`,o.color=`${t.color}`,i+=`#widget_${e.id} .el-cascader .el-input .el-input__inner {
                     ${this.mUtils.style2CSSStr(o)};
                     ${t.customCascaderCss||""}
                 }
                 `;let a={};a.borderRadius=t.borderRadius+"px",a.fontSize=this.mUtils.getNewFontSize(t.fontSize)+"px",a.paddingTop=`${t.paddingTop}px`,a.paddingLeft=`${t.paddingLeft}px`,a.fontFamily=`${t.fontFamily}`,a.textAlign=`${t.textAlign}`,a.background=t.background,a.color=`${t.color}`,i+=`#widget_${e.id} .el-cascader__search-input,#widget_${e.id} .el-tag.el-tag--info {
                    ${this.mUtils.style2CSSStr(a)};
                }
                `;let l={maxWidth:"calc(100% - 55px)"};t.tagFontColor&&(l.color=t.tagFontColor),t.tagBackgroundColor&&(l.backgroundColor=t.tagBackgroundColor),i+=`#widget_${e.id} .el-tag.el-tag--info {
                     ${this.mUtils.style2CSSStr(l)}
                }`;let p={};p.background=t.dropBackground,i+=`.popper-class_${e.id} .el-cascader-menu__list,
                    .popper-class_${e.id} .el-cascader__suggestion-list {
                    ${this.mUtils.style2CSSStr(p)};
                }
                `;let g={};g.borderBottomColor=`${t.dropBackground} !important`,i+=`.popper-class_${e.id} .el-popper.el-cascader__dropdown[x-placement^=bottom] .popper__arrow::after {
                    ${this.mUtils.style2CSSStr(g)};
                }
                `;let d={};d.color=t.dropColor,i+=`.popper-class_${e.id} .el-cascader-node__label{
                    ${this.mUtils.style2CSSStr(d)};
                }
                `;let w={};w.background=`${t.dropBackground} !important`,w.border=`1px solid ${t.dropBorderColor} !important`,i+=`.popper-class_${e.id}.el-popper.el-cascader__dropdown {
                    ${this.mUtils.style2CSSStr(w)};
                }
                `;let r={};r.fontSize=` ${t.hoverfontSize}px`,r.color=` ${t.hovercolor}!important`,r.fontWeight=` ${t.HoverFontWeight}`,i+=`.popper-class_${e.id} .el-cascader-node:not(.is-disabled):hover span,
                .popper-class_${e.id} .el-cascader-node:not(.is-disabled):hover i{
                    ${this.mUtils.style2CSSStr(r)};
                }
                `;let u={};return u.background=` ${t.activeBackground}!important`,u.fontSize=` ${t.activeFontSize}px`,u.color=` ${t.activeColor}!important`,u.fontWeight=` ${t.activeFontWeight}`,i+=`.popper-class_${e.id} .el-cascader-node.is-active span,
                    .popper-class_${e.id} .el-cascader__dropdown .el-cascader-node.in-active-path,
                    .popper-class_${e.id} .el-cascader__dropdown .el-cascader-node.is-active,
                    .popper-class_${e.id} .el-cascader__dropdown .el-cascader-node.is-selectable.in-checked-path  {
                        ${this.mUtils.style2CSSStr(u)};
                    }`,i},initAction(e){e.action&&e.action.receive&&e.action.receive.replaceFirstPid&&e.action.receive.replaceFirstPid.enabled&&this.doReplaceFirstPid(e.action.receive.replaceFirstPid,e),e.action&&e.action.receive&&e.action.receive.clearData&&e.action.receive.clearData.enabled&&this.doActionClear(e.action.receive.clearData,e),this.actionReceive(e)},doActionClear(e,t){this.$$lib__.each(e.clearList,i=>{let o=i[0][1]+"_"+i[0][0];i[0][1].indexOf("_")>-1&&(o=i[0][1]),_.Z.$on(o,()=>{let a=i[0][2],l=a.indexOf("|");l>-1&&(a=i[0][2].substring(l+1)),t.action.receive.clearData.script&&t.action.receive.clearData.script.enabled&&(b.log("Execute the script to"+e.name+" to the "+t.name+" component"),this.clearDataAction()),this.clearDataAction()})})},clearDataAction(){this.selectValue=[]},doReplaceFirstPid(e,t){this.$$lib__.each(e.replaceList,i=>{let o=i[0][1]+"_"+i[0][0];i[0][1].indexOf("_")>-1&&(o=i[0][1]),_.Z.$on(o,a=>{let l=i[0][2],p=l.indexOf("|");p>-1&&(l=i[0][2].substring(p+1)),t.action.receive.replaceFirstPid.script&&t.action.receive.replaceFirstPid.script.enabled&&(b.log("Execute the script to"+e.name+" to the "+t.name+" component"),this.replaceFirstPid=new Function("info","data","param_key",t.action.receive.replaceFirstPid.script.content)),this.replaceFirstPid(t,a,l)})})},replaceFirstPid(e,t,i){this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode.firstPid=t[i],this.loadInfo(this.widgetInfo),this.selectValue=[]},expandChangeEvent(e){let t=this,i,o=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(o,a=>{if(a.enabled&&a.code=="expandChange"){let l=a.code+"_"+t.widgetInfo.id;if(i=this.getActionParam(e,a),a.script&&a.script.enabled){if(b.log("Execute script for "+this.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){s.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",a.script.content),i=this.customScript(i)}_.Z.$emit(l,i),a.postMessage&&this.doPostMessage(i),this.actionNameList.push(l)}}),setTimeout(()=>{this.setStyle(this.widgetInfo)},1)},changeEvent(e){let t=this,i={},o=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(o,a=>{if(a.enabled&&a.code==t.$$global_editor.actionType.change.code){let l=t.$$global_editor.actionType.change.code+"_"+t.widgetInfo.id;if(i=this.getActionParam(a),a.script&&a.script.enabled){if(b.log("Execute script for "+this.widgetInfo.name+" component to "+a.name+" component"),a.script.content==""){s.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript=new Function("param",a.script.content),i=this.customScript(i)}_.Z.$emit(l,i),a.postMessage&&this.doPostMessage(i),this.actionNameList.push(l)}})},visibleChangeEvent(){setTimeout(()=>{this.setStyle(this.widgetInfo)},1)},getActionParam(e){let t=[];this.selectValue instanceof Array?t=JSON.parse(JSON.stringify(this.selectValue)):t.push(this.selectValue);let i=this.widgetInfo.dataset[this.widgetInfo.dataset.type].encode,o=this.widgetInfo.dataset[this.widgetInfo.dataset.type].dimensions,a=this.widgetInfo.dataset[this.widgetInfo.dataset.type].source,l=-1,p=-1;for(let r=0;r<o.length;r++)o[r]==i.id&&(l=r),o[r]==i.label&&(p=r);let g=[];if(t.length>0&&a)for(let r=0;r<t.length;r++)for(let u=0;u<a.length;u++)t[r]==a[u][l]&&g.push(a[u][p]);let d=this.widgetInfo.config.part.option,w={};return d.multiple==!0?w.value=g:t.length>0&&(w.value=g[0]),e.paramsExtend&&e.paramsExtend.length>0&&this.$$lib__.each(e.paramsExtend,r=>{if(r.type==this.$$global_editor.dataSourcType.static.code&&r.fieldS&&r.fieldS!="")y.default.set(w,r.fieldS,r.value);else if(r.type=="global"&&r.fieldG!=""){let u=this.getGlobalParamsVaule(r.fieldG);y.default.set(w,r.fieldG,u)}else if((r.type==this.$$global_editor.dataSourcType.dynamic.code||r.type==this.$$global_editor.dataSourcType.local.code)&&r.fieldD!=""){let u=-1,P=[];for(let v=0;v<o.length;v++)o[v]==r.fieldD&&(u=v);if(t.length>0&&a&&u>-1)for(let v=0;v<t.length;v++)for(let T=0;T<a.length;T++)t[v]==a[T][l]&&P.push(a[T][u]);d.multiple==!0?y.default.set(w,r.fieldD,P):P.length>0&&y.default.set(w,r.fieldD,P[0])}}),w},replaceParentParams(e,t,i){return i&&i.query&&i.query.params&&i.query.params.length>0&&this.$$lib__.each(i.query.params,o=>{o.name&&o.name==t&&(o.defaultVal=e)}),i.source=[],{dataSet:JSON.stringify(i)}},getTreeData(e,t,i){let o=[];if(e.id&&e.pid&&e.label){let a=this.listToObj(t,i);if(a.length==0)return o;this.widgetInfo.config.part.option.delayLoad?o=this.handleDataTree(a,e):(o=this.handleDataTree(a,e),b.log(o))}return o},listToObj(e,t){let i=[];for(let o=0;o<t.length;o++){let a={};for(let l=0;l<e.length;l++)y.default.set(a,e[l],t[o][l]);i.push(JSON.parse(JSON.stringify(a)))}return i},handleDataTree(e,t){let i={},o=[];return this.$$lib__.each(e,a=>{let l={};l.id=a[t.id],l.value=a[t.id],l.label=a[t.label],l.pid=a[t.pid],this.$$lib__.isUndefined(a[t.disabled])||(l.disabled=B.stringToBoolean(a[t.disabled])),a[t.pid]!=null&&a[t.pid]!=""&&a[t.pid]!=t.firstPid?(i[a[t.pid]]||(i[a[t.pid]]=[]),i[a[t.pid]].push(l)):o.push(l)}),this.transferFl(o,i,t.id),JSON.parse(JSON.stringify(o))},transferFl(e,t,i){this.$$lib__.each(e,o=>{let a=t[o.id];a&&(o.children=a,this.transferFl(a,t,i))})},getValue(){return this.selectValue},getGlobalParams(e){let t;return this.$$lib__.each(this.canvasSetting.data.globalParams.params,(i,o)=>{e.split("globalParams_")[1]==o&&(t=i)}),t},getSelectValue(e){let t=null,i=null,o=e.dataset[e.dataset.type].encode.defaultValType,a=e.dataset[e.dataset.type].encode.defaultVal,l=e.dataset[e.dataset.type].encode.defaultParams;if(this.comCascaderData&&this.comCascaderData.length>0){if(o=="static"&&a&&a!="")(!this.widgetInfo.config.part.option.multiple&&this.widgetInfo.config.part.option.disableBranchNodes||!this.widgetInfo.config.part.option.multiple&&this.widgetInfo.config.part.option.disableBranchNodes==!1||this.widgetInfo.config.part.option.multiple||this.widgetInfo.config.part.option.multiple&&this.widgetInfo.config.part.option.disableBranchNodes==!1)&&(i=a.split(","));else if((o=="dynamic"||o=="local")&&l&&l!="")t=this.getGlobalParams(l);else if(o=="first"){let d=[];return this.widgetInfo.config.part.option.multiple?(t=this.getFirstTreeNode(this.comCascaderData),t&&(d=t),d):(t=this.getFirstTreeNode(this.comCascaderData),d=t,d)}}let p=[],g=null;if(i){if(!this.widgetInfo.config.part.option.multiple&&this.widgetInfo.config.part.option.disableBranchNodes||!this.widgetInfo.config.part.option.multiple&&this.widgetInfo.config.part.option.disableBranchNodes==!1||this.widgetInfo.config.part.option.multiple||this.widgetInfo.config.part.option.multiple&&this.widgetInfo.config.part.option.disableBranchNodes==!1)for(let d=0;d<i.length;d++)p.push(i[d]);return p}else{if(l&&!this.widgetInfo.config.part.option.multiple)return g=t,g;if(l&&this.widgetInfo.config.part.option.multiple){t=t.split(",");for(let d=0;d<t.length;d++)p.push(t[d]);return p}}},getFirstTreeNode(e){let t=[],i=null;if(e.length>0&&this.widgetInfo.config.part.option.multiple){if(e[0].children&&e[0].children.length>0)t=this.getFirstTreeNode(e[0].children);else for(let o=0;o<e.length;o++)t.push(e[o].id);return t}else if(e.length>0&&!this.widgetInfo.config.part.option.multiple)return e[0].children&&e[0].children.length>0?i=this.getFirstTreeNode(e[0].children):i=e[0].id,i}}},z=O,H=n(768141),k=(0,H.Z)(z,f,m,!1,null,"010e6672",null),U=k.exports}}]);
