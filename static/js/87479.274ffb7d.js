"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[87479],{153258:function(Z,P,N){N.d(P,{ew:function(){return m},le:function(){return A},mf:function(){return D},sg:function(){return S},xn:function(){return Y}});function D(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Function]"}function Y(p,M,b,$=1){const X=Math.round(M/$/p[0])*p[0],E=Math.round(b/$/p[1])*p[1];return[X,E]}function f(p){const M=p.getBoundingClientRect();return[parseInt(M.width),parseInt(M.height)]}function m(p,M,b){return p-M-b}function A(p,M,b){return p-M-b}function S(p,M,b){return M!==null&&p<M?M:b!==null&&b<p?b:p}},787479:function(Z,P,N){N.d(P,{Z:function(){return K}});var D=function(){var e=this,s=e._self._c;return s("div",{class:[e.className,{[e.classNameDragging]:e.dragging,[e.classNameResizing]:e.resizing,[e.classNameDraggable]:e.draggable,[e.classNameResizable]:e.resizable,[e.classNameRotatable]:e.rotatable,[e.classNameActive]:e.enabled}],style:e.style,on:{mouseenter:e.elementMouseEnter,mouseleave:e.elementMouseLeave,mousedown:function(i){return i.stopPropagation(),e.elementMouseDown.apply(null,arguments)},touchstart:function(i){return i.preventDefault(),i.stopPropagation(),e.elementTouchDown.apply(null,arguments)}}},[s("div",{staticClass:"align-xy",style:{display:e.enabled?"block":"none"}},[e._v(e._s(e.left+"/"+e.top)+" ")]),e._l(e.actualHandles,function(i){return s("div",{key:i,class:[e.classNameHandle,e.classNameHandle+"-"+i],style:e.handleStyle(i),on:{mousedown:function(n){return n.stopPropagation(),n.preventDefault(),e.handleDown(i,n)},touchstart:function(n){return n.stopPropagation(),n.preventDefault(),e.handleTouchDown(i,n)}}},[e._t(i)],2)}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.xYShow&&(e.rotate===0||e.rotate===360),expression:"xYShow&&(rotate===0||rotate===360)"}]},e._l(e.xYHandles,function(i){return s("div",{key:i,class:"handle-"+i,style:{display:e.enabled?"block":"none"}})}),0),e._t("default")],2)},Y=[],f=N(459738),m=N(153258),A=N(149500);const S={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},p={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},M={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let b=S.mouse;var $={replace:!0,name:"VueDraggableResizableRotatable",props:{className:{type:String,default:"vdrr"},classNameDraggable:{type:String,default:"draggable"},classNameRotatable:{type:String,default:"rotatable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:1,validator:t=>t>=0},minHeight:{type:Number,default:1,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},r:{type:Number,default:0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml","spin"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml","spin"]);return new Set(t.filter(s=>e.has(s))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:[Boolean,String],default:!1},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0},isConflictCheck:{type:Boolean,default:!1},snap:{type:Boolean,default:!1},snapTolerance:{type:Number,default:5,validator:function(t){return typeof t=="number"}},scaleRatio:{type:Number,default:1,validator:t=>typeof t=="number"},handleInfo:{type:Object,default:()=>({size:8,offset:-4,switch:!0})}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,rotate:this.r,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,minW:this.minWidth,minH:this.minHeight,maxW:this.maxWidth,maxH:this.maxHeight,handle:null,enabled:this.active,rotating:!1,resizing:!1,dragging:!1,zIndex:this.z,event:{},xYHandles:["xyl","xyr"],xYShow:!0}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&A.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxWidth&&this.minHeight>this.maxHeight&&A.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[s,i]=(0,f.nm)(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:s)/(this.h!=="auto"?this.h:i),this.width=this.w!=="auto"?this.w:s,this.height=this.h!=="auto"?this.h:i,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.settingAttribute(),(0,f.vP)(document.documentElement,"mousedown",this.deselect),(0,f.vP)(document.documentElement,"touchend touchcancel",this.deselect),(0,f.vP)(window,"resize",this.checkParentSize)},beforeDestroy:function(){(0,f.xC)(document.documentElement,"mousedown",this.deselect),(0,f.xC)(document.documentElement,"touchstart",this.handleUp),(0,f.xC)(document.documentElement,"mousemove",this.move),(0,f.xC)(document.documentElement,"touchmove",this.move),(0,f.xC)(document.documentElement,"mouseup",this.handleUp),(0,f.xC)(document.documentElement,"touchend touchcancel",this.deselect),(0,f.xC)(window,"resize",this.checkParentSize)},methods:{elementMouseEnter(t){this.$emit("onMouseEnter",t)},elementMouseLeave(t){this.$emit("onMouseLeave",t)},resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e}},getParentSize(){if(this.parent===!0){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}if(typeof this.parent=="string"){const t=document.querySelector(this.parent);if(!(t instanceof HTMLElement))throw new Error(`The selector ${this.parent} does not match any element`);return[t.offsetWidth,t.offsetHeight]}return[null,null]},elementTouchDown(t){b=S.touch,this.elementDown(t)},elementMouseDown(t){b=S.mouse,this.elementDown(t)},elementDown(t){if(this.event=t,t instanceof MouseEvent&&t.which!==1)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.$emit("onClicked",this.event),this.onDragStart(t)===!1)return;if(this.dragHandle&&!(0,f.OW)(e,this.dragHandle,this.$el)||this.dragCancel&&(0,f.OW)(e,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated",this.event),this.$emit("update:active",!0)),this.draggable&&(this.dragging=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),(0,f.vP)(document.documentElement,b.move,this.move),(0,f.vP)(document.documentElement,b.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(){this.resetBoundsAndMouseState()},handleTouchDown(t,e){b=S.touch,this.handleDown(t,e)},handleDown(t,e){e instanceof MouseEvent&&e.which!==1||this.onResizeStart(t,e)!==!1&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizing=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),t==="spin"&&this.handleRotateDown(t,e),(0,f.vP)(document.documentElement,b.move,this.handleResize),(0,f.vP)(document.documentElement,b.stop,this.handleUp))},handleRotateDown(){let{top:t,left:e,width:s,height:i}=this.$el.getBoundingClientRect();this.lastCenterX=window.pageXOffset+e+s/2,this.lastCenterY=window.pageYOffset+t+i/2,this.rotating=!0},calcResizeLimits(){let t=this.minW,e=this.minH,s=this.maxW,i=this.maxH;const n=this.aspectFactor,[a,r]=this.grid,c=this.width,l=this.height,h=this.left,u=this.top,d=this.right,g=this.bottom;this.lockAspectRatio&&(t/e>n?e=t/n:t=n*e,s&&i?(s=Math.min(s,n*i),i=Math.min(i,s/n)):s?i=s/n:i&&(s=n*i)),s=s-s%a,i=i-i%r;const o={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(o.minLeft=h%a,o.maxLeft=h+Math.floor((c-t)/a)*a,o.minTop=u%r,o.maxTop=u+Math.floor((l-e)/r)*r,o.minRight=d%a,o.maxRight=d+Math.floor((c-t)/a)*a,o.minBottom=g%r,o.maxBottom=g+Math.floor((l-e)/r)*r,s&&(o.minLeft=Math.max(o.minLeft,this.parentWidth-d-s),o.minRight=Math.max(o.minRight,this.parentWidth-h-s)),i&&(o.minTop=Math.max(o.minTop,this.parentHeight-g-i),o.minBottom=Math.max(o.minBottom,this.parentHeight-u-i)),this.lockAspectRatio&&(o.minLeft=Math.max(o.minLeft,h-u*n),o.minTop=Math.max(o.minTop,u-h/n),o.minRight=Math.max(o.minRight,d-g*n),o.minBottom=Math.max(o.minBottom,g-d/n))):(o.minLeft=null,o.maxLeft=h+Math.floor((c-t)/a)*a,o.minTop=null,o.maxTop=u+Math.floor((l-e)/r)*r,o.minRight=null,o.maxRight=d+Math.floor((c-t)/a)*a,o.minBottom=null,o.maxBottom=g+Math.floor((l-e)/r)*r,s&&(o.minLeft=-(d+s),o.minRight=-(h+s)),i&&(o.minTop=-(g+i),o.minBottom=-(u+i)),this.lockAspectRatio&&s&&i&&(o.minLeft=Math.min(o.minLeft,-(d+s)),o.minTop=Math.min(o.minTop,-(i+g)),o.minRight=Math.min(o.minRight,-h-s),o.minBottom=Math.min(o.minBottom,-u-i))),o},move(t){this.resizing?this.handleResize(t):this.dragging&&this.handleDrag(t)},async handleDrag(t){const e=this.axis,s=this.grid,i=this.bounds,n=this.mouseClickPosition,a=e&&e!=="y"?n.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,r=e&&e!=="x"?n.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[c,l]=(0,m.xn)(s,a,r,this.scaleRatio),h=(0,m.sg)(n.left-c,i.minLeft,i.maxLeft),u=(0,m.sg)(n.top-l,i.minTop,i.maxTop);if(this.onDrag(h,u)===!1)return;const d=(0,m.sg)(n.right+c,i.minRight,i.maxRight),g=(0,m.sg)(n.bottom+l,i.minBottom,i.maxBottom);this.left=h,this.top=u,this.right=d,this.bottom=g,await this.snapCheck(),this.$emit("dragging",this.left,this.top,this.w,this.h)},moveHorizontally(t){const[e,s]=(0,m.xn)(this.grid,t,this.top,this.scale),i=(0,m.sg)(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=i,this.right=this.parentWidth-this.width-i},moveVertically(t){const[e,s]=(0,m.xn)(this.grid,this.left,t,this.scale),i=(0,m.sg)(s,this.bounds.minTop,this.bounds.maxTop);this.top=i,this.bottom=this.parentHeight-this.height-i},handleResize(t){let e=this.left,s=this.top,i=this.right,n=this.bottom;const a=this.mouseClickPosition,r=this.aspectFactor,c=a.mouseX-(t.touches?t.touches[0].pageX:t.pageX),l=a.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&c&&(this.widthTouched=!0),!this.heightTouched&&l&&(this.heightTouched=!0);const[h,u]=(0,m.xn)(this.grid,c,l,this.scaleRatio);if(this.handle.includes("b")?(n=(0,m.sg)(a.bottom+u,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(i=this.right-(this.bottom-n)*r)):this.handle.includes("t")&&(s=(0,m.sg)(a.top-u,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-s)*r)),this.handle.includes("r")?(i=(0,m.sg)(a.right+h,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(n=this.bottom-(this.right-i)/r)):this.handle.includes("l")&&(e=(0,m.sg)(a.left-h,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(s=this.top-(this.left-e)/r)),this.handle.includes("spin")){let{x:o,y}=this.getMouseCoordinate(t),x=y-this.lastCenterY,T=o-this.lastCenterX;this.rotate=(this.getAngle(T,x)+90)%360,this.$emit("rotating",this.rotate,t)}const d=(0,m.ew)(this.parentWidth,e,i),g=(0,m.le)(this.parentHeight,s,n);this.onResize(this.handle,e,s,d,g)!==!1&&(this.left=e,this.top=s,this.right=i,this.bottom=n,this.width=d,this.height=g,this.$emit("resizing",this.left,this.top,this.width,this.height,this.$el))},getMouseCoordinate(t){return t.type.indexOf("touch")!==-1?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.pageX||t.clientX+document.documentElement.scrollLeft,y:t.pageY||t.clientY+document.documentElement.scrollTop}},changeWidth(t){const[e,s]=(0,m.xn)(this.grid,t,0,this.scale);let i=(0,m.sg)(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight),n=this.bottom;this.lockAspectRatio&&(n=this.bottom-(this.right-i)/this.aspectFactor);const a=(0,m.ew)(this.parentWidth,this.left,i),r=(0,m.le)(this.parentHeight,this.top,n);this.right=i,this.bottom=n,this.width=a,this.height=r},changeHeight(t){const[e,s]=(0,m.xn)(this.grid,0,t,this.scale);let i=(0,m.sg)(this.parentHeight-s-this.top,this.bounds.minBottom,this.bounds.maxBottom),n=this.right;this.lockAspectRatio&&(n=this.right-(this.bottom-i)*this.aspectFactor);const a=(0,m.ew)(this.parentWidth,this.left,n),r=(0,m.le)(this.parentHeight,this.top,i);this.right=n,this.bottom=i,this.width=a,this.height=r},async handleUp(t){this.handle=null;const e=new Array(3).fill({display:!1,position:"",origin:"",lineLength:""}),s={vLine:[],hLine:[]};for(let n in s)s[n]=JSON.parse(JSON.stringify(e));const i=this.$el.parentNode.childNodes;for(let n of i)n.className!==void 0&&n.getAttribute("data-is-snap")!==null&&n.getAttribute("data-is-snap")!=="false"&&n.className.includes("align")&&(n.className=n.className.replace(" align",""));this.resizing&&(this.resizing=!1,await this.conflictCheck(),this.$emit("refLineParams",s,t),this.$emit("resizestop",this.left,this.top,this.width,this.height,t)),this.dragging&&(this.dragging=!1,await this.conflictCheck(),this.$emit("refLineParams",s,t),this.$emit("dragstop",this.left,this.top,t)),this.rotating&&(this.rotating=!1,this.$emit("rotatestop",this.rotate,t)),this.resetBoundsAndMouseState(),(0,f.xC)(document.documentElement,b.move,this.handleResize)},settingAttribute(){this.$el.setAttribute("data-is-check",`${this.isConflictCheck}`),this.$el.setAttribute("data-is-snap",`${this.snap}`)},conflictCheck(){const t=this.top,e=this.left,s=this.width,i=this.height;if(this.isConflictCheck){const n=this.$el.parentNode.childNodes;for(let a of n)if(a.className!==void 0&&!a.className.includes(this.classNameActive)&&a.getAttribute("data-is-check")!==null&&a.getAttribute("data-is-check")!=="false"){const r=a.offsetWidth,c=a.offsetHeight;let[l,h]=this.formatTransformVal(a.style.transform);const u=t>=h&&e>=l&&h+c>t&&l+r>e||t<=h&&e<l&&t+i>h&&e+s>l,d=e<=l&&t>=h&&e+s>l&&t<h+c||t<h&&e>l&&t+i>h&&e<l+r,g=t<=h&&e>=l&&t+i>h&&e<l+r||t>=h&&e<=l&&t<h+c&&e>l+r,o=t<=h&&e>=l&&t+i>h&&e<l+r||t>=h&&e<=l&&t<h+c&&e>l+r,y=e>=l&&t>=h&&e<l+r&&t<h+c||t>h&&e<=l&&e+s>l&&t<h+c,x=t<=h&&e>=l&&t+i>h&&e<l+r||t>=h&&e<=l&&t<h+c&&e+s>l;(u||d||g||o||y||x)&&(this.top=this.mouseClickPosition.top,this.left=this.mouseClickPosition.left,this.right=this.mouseClickPosition.right,this.bottom=this.mouseClickPosition.bottom)}}},async snapCheck(){let t=this.width,e=this.height;if(this.snap){let s=this.left,i=this.left+t,n=this.top,a=this.top+e;const r=new Array(3).fill({display:!1,position:"",origin:"",lineLength:""}),c={vLine:[],hLine:[]};for(let x in c)c[x]=JSON.parse(JSON.stringify(r));const l=this.$el.parentNode.childNodes;let h={value:{x:[[],[],[]],y:[[],[],[]]},display:[],position:[]};const{groupWidth:u,groupHeight:d,groupLeft:g,groupTop:o,bln:y}=await this.getActiveAll(l);y||(t=u,e=d,s=g,i=g+u,n=o,a=o+d);for(let x of l)if(x.className!==void 0&&!x.className.includes(this.classNameActive)&&x.getAttribute("data-is-snap")!==null&&x.getAttribute("data-is-snap")!=="false"){const T=x.offsetWidth,C=x.offsetHeight,[w,v]=this.formatTransformVal(x.style.transform),R=w+T,H=v+C,k=Math.abs(n+e/2-(v+C/2))<=this.snapTolerance,W=Math.abs(s+t/2-(w+T/2))<=this.snapTolerance,F=Math.abs(v-a)<=this.snapTolerance,_=Math.abs(H-a)<=this.snapTolerance,O=Math.abs(v-n)<=this.snapTolerance,I=Math.abs(H-n)<=this.snapTolerance,U=Math.abs(w-i)<=this.snapTolerance,V=Math.abs(R-i)<=this.snapTolerance,j=Math.abs(w-s)<=this.snapTolerance,J=Math.abs(R-s)<=this.snapTolerance;h.display=[F,_,O,I,k,k,U,V,j,J,W,W],h.position=[v,H,v,H,v+C/2,v+C/2,w,R,w,R,w+T/2,w+T/2],F||_||O||I||k||k||U||V||j||J||W||W?x.className.includes("align")||(x.className+=" align",this.xYShow=!1):x.className.includes("align")&&(x.className=x.className.replace(" align",""),this.xYShow=!0),F&&(y&&(this.top=v-e,this.bottom=this.parentHeight-this.top-e),h.value.y[0].push(w,R,s,i)),O&&(y&&(this.top=v,this.bottom=this.parentHeight-this.top-e),h.value.y[0].push(w,R,s,i)),_&&(y&&(this.top=H-e,this.bottom=this.parentHeight-this.top-e),h.value.y[1].push(w,R,s,i)),I&&(y&&(this.top=H,this.bottom=this.parentHeight-this.top-e),h.value.y[1].push(w,R,s,i)),U&&(y&&(this.left=w-t,this.right=this.parentWidth-this.left-t),h.value.x[0].push(v,H,n,a)),j&&(y&&(this.left=w,this.right=this.parentWidth-this.left-t),h.value.x[0].push(v,H,n,a)),V&&(y&&(this.left=R-t,this.right=this.parentWidth-this.left-t),h.value.x[1].push(v,H,n,a)),J&&(y&&(this.left=R,this.right=this.parentWidth-this.left-t),h.value.x[1].push(v,H,n,a)),k&&(y&&(this.top=v+C/2-e/2,this.bottom=this.parentHeight-this.top-e),h.value.y[2].push(w,R,s,i)),W&&(y&&(this.left=w+T/2-t/2,this.right=this.parentWidth-this.left-t),h.value.x[2].push(v,H,n,a));const L=[0,1,0,1,2,2,0,1,0,1,2,2];for(let z=0;z<=L.length;z++){const Q=z<6?"y":"x",B=z<6?"hLine":"vLine";if(h.display[z]){const{origin:q,length:tt}=this.calcLineValues(h.value[Q][L[z]]);c[B][L[z]].display=h.display[z],c[B][L[z]].position=h.position[z]+"px",c[B][L[z]].origin=q,c[B][L[z]].lineLength=tt}}}this.$emit("refLineParams",c)}},calcLineValues(t){const e=Math.max(...t)-Math.min(...t)+"px",s=Math.min(...t)+"px";return{length:e,origin:s}},async getActiveAll(t){const e=[],s=[],i=[];let n=0,a=0,r=0,c=0;for(let u of t)u.className!==void 0&&u.className.includes(this.classNameActive)&&e.push(u);const l=e.length;if(l>1){for(let u of e){const d=u.offsetLeft,g=d+u.offsetWidth,o=u.offsetTop,y=o+u.offsetHeight;s.push(o,y),i.push(d,g)}n=Math.max(...i)-Math.min(...i),a=Math.max(...s)-Math.min(...s),r=Math.min(...i),c=Math.min(...s)}return{groupWidth:n,groupHeight:a,groupLeft:r,groupTop:c,bln:l===1}},formatTransformVal(t){let e=t.match(/\.*translate\((.*?)\)/)[0],[s,i]=e.replace(/[^0-9\-,]/g,"").split(",");return[+s,+i]},getAngle(t,e){let s=Math.atan2(e,t);return s=Math.round(180/Math.PI*s),s<0&&(s=360+s),s}},computed:{handleStyle(){return t=>{if(!this.handleInfo.switch)return{display:this.enabled?"block":"none"};const e=(this.handleInfo.size/this.scaleRatio).toFixed(2),s=(this.handleInfo.offset/this.scaleRatio).toFixed(2),i=(e/2).toFixed(2),n={tl:{top:`${s}px`,left:`${s}px`},tm:{top:`${s}px`,left:`calc(50% - ${i}px)`},tr:{top:`${s}px`,right:`${s}px`},mr:{top:`calc(50% - ${i}px)`,right:`${s}px`},br:{bottom:`${s}px`,right:`${s}px`},bm:{bottom:`${s}px`,right:`calc(50% - ${i}px)`},bl:{bottom:`${s}px`,left:`${s}px`},ml:{top:`calc(50% - ${i}px)`,left:`${s}px`},spin:{top:`${-1*e+2}px`,left:"50%"}},a={width:`${e}px`,height:`${e}px`,top:n[t].top,left:n[t].left,right:n[t].right,bottom:n[t].bottom};return a.display=this.enabled?"block":"none",a}},style(){return{transform:`translate(${this.left}px, ${this.top}px)  rotate(`+this.rotate+"deg)",width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?p:M}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated",this.event):this.$emit("deactivated")},r(t){t>=0&&(this.rotate=t%360)},z(t){(t>=0||t==="auto")&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t),this.$emit("change",this.w,this.h,this.x,this.y))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t),this.$emit("change",this.w,this.h,this.x,this.y))},lockAspectRatio(t){t?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},minWidth(t){t>0&&t<=this.width&&(this.minW=t)},minHeight(t){t>0&&t<=this.height&&(this.minH=t)},maxWidth(t){this.maxW=t},maxHeight(t){this.maxH=t},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t),this.$emit("change",this.w,this.h,this.x,this.y))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t),this.$emit("change",this.w,this.h,this.x,this.y))}}},X=$,E=N(768141),G=(0,E.Z)(X,D,Y,!1,null,"5a4f16b5",null),K=G.exports}}]);
