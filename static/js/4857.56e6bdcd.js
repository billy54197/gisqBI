"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[4857],{84857:function(zt,S,l){l.r(S),l.d(S,{default:function(){return Ct}});var P=function(){var e=this,o=e._self._c;return o("div",{ref:"bampPoint",attrs:{id:"mapChart"}},[o("baidu-map",{staticClass:"bm-view",style:e.getStyle(e.widgetInfo),attrs:{ak:e.widgetInfo.config.mapApk,center:e.center,zoom:e.widgetInfo.config.zoom,mapType:e.widgetInfo.config.MapType,"scroll-wheel-zoom":e.widgetInfo.config.scrollwheelzoom},on:{ready:e.handler}},[e.widgetInfo.config.navigation?o("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}}):e._e(),e.widgetInfo.config.showPointer?o("bm-marker",{attrs:{position:e.center,icon:e.iconIamge}},[o("bm-label",{attrs:{content:e.content,offset:{width:e.widgetInfo.config.marker.width,height:e.widgetInfo.config.marker.height},labelStyle:{fontSize:e.widgetInfo.config.marker.fontSize+"px",border:"0",backgroundColor:"rgba(1,1,1,0)"}}})],1):e._e(),o("bm-boundary",{attrs:{name:e.widgetInfo.config.boundary.region,strokeWeight:2,strokeColor:e.widgetInfo.config.boundary.strokeColor,fillColor:e.widgetInfo.config.boundary.fillColor}}),e.widgetInfo.config.marker.showPointer?o("div",e._l(e.data,function(n,i){return o("bm-marker",{key:i,attrs:{position:n.positionPoint?n.positionPoint:{lng:0,lat:0},icon:e.imageMakerList[n.mode]&&e.imageMakerList[n.mode].url?e.imageMakerList[n.mode]:e.listIamge,title:n.discription},on:{click:function(a){return e.onClick(n,i)}}},[e.widgetInfo.config.label.showName?o("bm-label",{attrs:{content:n.name,offset:{width:e.widgetInfo.config.label.width,height:e.widgetInfo.config.label.height},labelStyle:{fontSize:e.widgetInfo.config.label.fontSize+"px",border:"0",backgroundColor:"rgba(1,1,1,0)"}}}):e._e()],1)}),1):e._e()],1)],1)},Z=[],$=l(21300),z=l(27966),O=function(){var e=this,o=e._self._c;return o("div",[e.hasBmView?e._e():o("div",{ref:"view",staticStyle:{width:"100%",height:"100%"}}),e._t("default")],2)},L=[],T={"bm-map":["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],"bm-geolocation":["locationSuccess","locationError"],"bm-overview-map":["viewchanged","viewchanging"],"bm-marker":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],"bm-polyline":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-polygon":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-circle":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-label":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],"bm-info-window":["close","open","maximize","restore","clickclose"],"bm-ground":["click","dblclick"],"bm-autocomplete":["onconfirm","onhighlight"],"bm-point-collection":["click","mouseover","mouseout"]};function I(t,e){const o=e||T[this.$options.name];o&&o.forEach(n=>{const a=n.slice(0,2)==="on"?n.slice(2):n,s=this.$listeners[a];s&&t.addEventListener(n,s.fns)})}const R=t=>t.lng&&t.lat,M=t=>Object.prototype.toString.call(t).slice(8,-1),Ot=(t,e)=>R(e)?createPoint(t,e):e;var A={name:"bm-map",props:{ak:{type:String},center:{type:[Object,String]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},highResolution:{type:Boolean,default:!0},mapClick:{type:Boolean,default:!0},mapType:{type:String},dragging:{type:Boolean,default:!0},scrollWheelZoom:{type:Boolean,default:!1},doubleClickZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},inertialDragging:{type:Boolean,default:!0},continuousZoom:{type:Boolean,default:!0},pinchToZoom:{type:Boolean,default:!0},autoResize:{type:Boolean,default:!0},theme:{type:Array},mapStyle:{type:Object}},watch:{center(t,e){const{map:o,zoom:n}=this;M(t)==="String"&&t!==e&&o.centerAndZoom(t,n)},"center.lng"(t,e){const{BMap:o,map:n,zoom:i,center:a}=this;t!==e&&t>=-180&&t<=180&&n.centerAndZoom(new o.Point(t,a.lat),i)},"center.lat"(t,e){const{BMap:o,map:n,zoom:i,center:a}=this;t!==e&&t>=-74&&t<=74&&n.centerAndZoom(new o.Point(a.lng,t),i)},zoom(t,e){const{map:o}=this;t!==e&&t>=3&&t<=19&&o.setZoom(t)},minZoom(t){const{map:e}=this;e.setMinZoom(t)},maxZoom(t){const{map:e}=this;e.setMaxZoom(t)},highResolution(){this.reset()},mapClick(){this.reset()},mapType(t){const{map:e}=this;e.setMapType(l.g[t])},dragging(t){const{map:e}=this;t?e.enableDragging():e.disableDragging()},scrollWheelZoom(t){const{map:e}=this;t?e.enableScrollWheelZoom():e.disableScrollWheelZoom()},doubleClickZoom(t){const{map:e}=this;t?e.enableDoubleClickZoom():e.disableDoubleClickZoom()},keyboard(t){const{map:e}=this;t?e.enableKeyboard():e.disableKeyboard()},inertialDragging(t){const{map:e}=this;t?e.enableInertialDragging():e.disableInertialDragging()},continuousZoom(t){const{map:e}=this;t?e.enableContinuousZoom():e.disableContinuousZoom()},pinchToZoom(t){const{map:e}=this;t?e.enablePinchToZoom():e.disablePinchToZoom()},autoResize(t){const{map:e}=this;t?e.enableAutoResize():e.disableAutoResize()},theme(t){const{map:e}=this;e.setMapStyle({styleJson:t})},"mapStyle.features":{handler(t,e){const{map:o,mapStyle:n}=this,{style:i,styleJson:a}=n;o.setMapStyle({styleJson:a,features:t,style:i})},deep:!0},"mapStyle.style"(t,e){const{map:o,mapStyle:n}=this,{features:i,styleJson:a}=n;o.setMapStyle({styleJson:a,features:i,style:t})},"mapStyle.styleJson":{handler(t,e){const{map:o,mapStyle:n}=this,{features:i,style:a}=n;o.setMapStyle({styleJson:t,features:i,style:a})},deep:!0},mapStyle(t){const{map:e,theme:o}=this;!o&&e.setMapStyle(t)}},methods:{setMapOptions(){const{map:t,minZoom:e,maxZoom:o,mapType:n,dragging:i,scrollWheelZoom:a,doubleClickZoom:s,keyboard:r,inertialDragging:d,continuousZoom:g,pinchToZoom:c,autoResize:y}=this;e&&t.setMinZoom(e),o&&t.setMaxZoom(o),n&&t.setMapType(l.g[n]),i?t.enableDragging():t.disableDragging(),a?t.enableScrollWheelZoom():t.disableScrollWheelZoom(),s?t.enableDoubleClickZoom():t.disableDoubleClickZoom(),r?t.enableKeyboard():t.disableKeyboard(),d?t.enableInertialDragging():t.disableInertialDragging(),g?t.enableContinuousZoom():t.disableContinuousZoom(),c?t.enablePinchToZoom():t.disablePinchToZoom(),y?t.enableAutoResize():t.disableAutoResize()},init(t){if(this.map)return;let e=this.$refs.view;for(let d of this.$slots.default||[])d.componentOptions&&d.componentOptions.tag==="bm-view"&&(this.hasBmView=!0,e=d.elm);const o=new t.Map(e,{enableHighResolution:this.highResolution,enableMapClick:this.mapClick});this.map=o;const{setMapOptions:n,zoom:i,getCenterPoint:a,theme:s,mapStyle:r}=this;s?o.setMapStyle({styleJson:s}):o.setMapStyle(r),n(),I.call(this,o),o.reset(),o.centerAndZoom(a(),i),this.$emit("ready",{BMap:t,map:o})},getCenterPoint(){const{center:t,BMap:e}=this;switch(M(t)){case"String":return t;case"Object":return new e.Point(t.lng,t.lat);default:return new e.Point}},initMap(t){this.BMap=t,this.init(t)},getMapScript(){if(l.g.BMap)return l.g.BMap._preloader?l.g.BMap._preloader:Promise.resolve(l.g.BMap);{const t=this.ak||this._BMap().ak;return l.g.BMap={},l.g.BMap._preloader=new Promise((e,o)=>{l.g._initBaiduMap=function(){e(l.g.BMap),l.g.document.body.removeChild(n),l.g.BMap._preloader=null,l.g._initBaiduMap=null};const n=document.createElement("script");l.g.document.body.appendChild(n),n.src=`https://api.map.baidu.com/api?v=2.0&ak=${t}&callback=_initBaiduMap`}),l.g.BMap._preloader}},reset(){const{getMapScript:t,initMap:e}=this;t().then(e)}},mounted(){this.reset()},data(){return{hasBmView:!1}}},E=A,u=l(68141),D=(0,u.Z)(E,O,L,!1,null,null,null),N=D.exports,j=function(){var e=this,o=e._self._c;return o("div",[e._t("default")],2)},_=[];const F={control:{unload:"removeControl"},layer:{unload:"removeTileLayer"},overlay:{unload:"removeOverlay"},contextMenu:{unload:"removeContextMenu"}},w=t=>t.abstract||t.$el===t.$children[0].$el?w(t.$parent):t;function C(){const{unload:t,renderByParent:e,$parent:o}=this;e&&o.reload(),t()}class U{constructor(e){this.methods={ready(){const o=w(this.$parent),n=this.BMap=o.BMap,i=this.map=o.map;this.load(),this.$emit("ready",{BMap:n,map:i})},transmitEvent(o){this.$emit(o.type.replace(/^on/,""),o)},reload(){this&&this.BMap&&this.$nextTick(()=>{this.unload(),this.$nextTick(this.load)})},unload(){const{map:o,originInstance:n}=this;try{switch(e.type){case"search":return n.clearResults();case"autoComplete":case"lushu":return n.dispose();case"markerClusterer":return n.clearMarkers();default:o[F[e.type].unload](n)}}catch{}}},this.computed={renderByParent(){return this.$parent.preventChildrenRender}},this.mounted=function(){const o=w(this.$parent),n=o.map,{ready:i}=this;n?i():o.$on("ready",i)},this.destroyed=C,this.beforeDestroy=C}}var b=t=>new U({type:t});function m(t,e={}){const{lng:o,lat:n}=e;return new t.Point(o,n)}function Lt(t,e={}){const{x:o,y:n}=e;return new t.Pixel(o,n)}function Tt(t,e={}){const{sw:o,ne:n}=e;return new t.Bounds(m(t,o),m(t,n))}function p(t,e={}){const{width:o,height:n}=e;return new t.Size(o,n)}function B(t,e={}){const{url:o,size:n,opts:i={}}=e;return new t.Icon(o,p(t,n),{anchor:i.anchor&&p(t,i.anchor),imageSize:i.imageSize&&p(t,i.imageSize),imageOffset:i.imageOffset&&p(t,i.imageOffset),infoWindowAnchor:i.infoWindowAnchor&&p(t,i.infoWindowAnchor),printImageUrl:i.printImageUrl})}function V(t,e={}){const{content:o,opts:n}=e;return new t.Label(o,{offset:n.offset&&p(t,n.offset),position:n.position&&m(t,n.position),enableMassClear:n.enableMassClear})}var J={name:"bm-marker",mixins:[b("overlay")],props:{position:{},offset:{},icon:{},massClear:{type:Boolean,default:!0},dragging:{type:Boolean,default:!1},clicking:{type:Boolean,default:!0},raiseOnDrag:{type:Boolean,default:!1},draggingCursor:{type:String},rotation:{type:Number},shadow:{type:Object},title:{type:String},label:{type:Object},animation:{type:String},top:{type:Boolean,default:!1},zIndex:{type:Number,default:0}},watch:{"position.lng"(t,e){const{BMap:o,originInstance:n,position:i,renderByParent:a,$parent:s}=this;t!==e&&t>=-180&&t<=180&&n.setPosition(m(o,{lng:t,lat:i.lat})),a&&s.reload()},"position.lat"(t,e){const{BMap:o,originInstance:n,position:i,renderByParent:a,$parent:s}=this;t!==e&&t>=-74&&t<=74&&n.setPosition(m(o,{lng:i.lng,lat:t})),a&&s.reload()},"offset.width"(t,e){const{BMap:o,originInstance:n}=this;t!==e&&n.setOffset(new o.Size(t,this.offset.height))},"offset.height"(t,e){const{BMap:o,originInstance:n}=this;t!==e&&n.setOffset(new o.Size(this.offset.width,t))},icon:{deep:!0,handler(t){const{BMap:e,originInstance:o,rotation:n}=this;o&&o.setIcon(B(e,t)),n&&o&&o.setRotation(n)}},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},dragging(t){t?this.originInstance.enableDragging():this.originInstance.disableDragging()},clicking(){this.reload()},raiseOnDrag(){this.reload()},draggingCursor(t){this.originInstance.setDraggingCursor(t)},rotation(t){this.originInstance.setRotation(t)},shadow(t){this.originInstance.setShadow(t)},title(t){this.originInstance.setTitle(t)},label(t){this.reload()},animation(t){this.originInstance.setAnimation(l.g[t])},top(t){this.originInstance.setTop(t)},zIndex(t){this.originInstance.setZIndex(t)}},methods:{load(){const{BMap:t,map:e,position:o,offset:n,icon:i,massClear:a,dragging:s,clicking:r,raiseOnDrag:d,draggingCursor:g,rotation:c,shadow:y,title:f,label:v,animation:Bt,top:xt,renderByParent:Pt,$parent:Zt,zIndex:$t}=this,h=new t.Marker(new t.Point(o.lng,o.lat),{offset:n,icon:i&&B(t,i),enableMassClear:a,enableDragging:s,enableClicking:r,raiseOnDrag:d,draggingCursor:g,rotation:c,shadow:y,title:f});this.originInstance=h,v&&h&&h.setLabel(V(t,v)),h.setTop(xt),h.setZIndex($t),I.call(this,h),Pt?Zt.reload():e.addOverlay(h),h.setAnimation(l.g[Bt])}}},W=J,K=(0,u.Z)(W,j,_,!1,null,null,null),H=K.exports,G={name:"bm-label",render(){},mixins:[b("overlay")],props:{content:{type:String},title:{type:String},offset:{},position:{},labelStyle:{},zIndex:{type:Number,default:0},massClear:{type:Boolean,default:!0}},watch:{content(t){this.originInstance.setContent(t)},title(t){this.originInstance.setTitle(t)},"offset.width"(t,e){const{BMap:o}=this;t.toString()!==e.toString()&&this.originInstance.setOffset(p(o,{width:t,height:this.offset.height}))},"offset.height"(t,e){const{BMap:o}=this;t.toString()!==e.toString()&&this.originInstance.setOffset(p(o,{width:this.offset.width,height:t}))},"position.lng"(t,e){const{BMap:o}=this,n=t;t.toString()!==e.toString()&&n>=-180&&n<=180&&this.originInstance.setCenter(m(o,{lng:n,lat:this.center.lat}))},"position.lat"(t,e){const{BMap:o}=this,n=t;t.toString()!==e.toString()&&n>=-74&&n<=74&&this.originInstance.setCenter(m(o,{lng:this.center.lng,lat:n}))},labelStyle:{handler(t){this.originInstance.setStyle(t)},deep:!0},zIndex(t){this.originInstance.setZIndex(t)},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()}},methods:{load(){const{BMap:t,map:e,content:o,title:n,offset:i,position:a,labelStyle:s,zIndex:r,massClear:d,$parent:g}=this,c=new t.Label(o,{offset:p(t,i),position:m(t,a),enableMassClear:d});this.originInstance=c;try{g.originInstance.setLabel(c)}catch{e.addOverlay(c)}n&&c.setTitle(n),s&&c.setStyle(s),r&&c.setZIndex(r),I.call(this,c)}}},Q=G,X,Y,q=(0,u.Z)(Q,X,Y,!1,null,null,null),tt=q.exports,et=function(){var e=this,o=e._self._c;return e.paths.length?o("div",e._l(e.paths,function(n,i){return o("bm-polygon",{key:i,attrs:{path:n,"stroke-color":e.strokeColor,"stroke-weight":e.strokeWeight,"stroke-opacity":e.strokeOpacity,"stroke-style":e.strokeStyle,"fill-opacity":e.fillOpacity,"fill-color":e.fillColor,"mass-clear":e.massClear,clicking:e.clicking},on:{click:function(a){return e.$emit("click",a)},dblclick:function(a){return e.$emit("dblclick",a)},mousedown:function(a){return e.$emit("mousedown",a)},mouseup:function(a){return e.$emit("mouseup",a)},mouseout:function(a){return e.$emit("mouseout",a)},mouseover:function(a){return e.$emit("mouseover",a)},remove:function(a){return e.$emit("remove",a)}}})}),1):e._e()},ot=[],nt={name:"bm-polygon",render(){},mixins:[b("overlay")],props:{path:{type:Array,default(){return[]}},strokeColor:{type:String},strokeWeight:{type:Number},strokeOpacity:{type:Number},strokeStyle:{type:String},fillColor:{type:String},fillOpacity:{type:Number},massClear:{type:Boolean,default:!0},clicking:{type:Boolean,default:!0},editing:{type:Boolean,default:!1}},watch:{path:{handler(t,e){this.reload()},deep:!0},strokeColor(t){this.originInstance.setStrokeColor(t)},strokeOpacity(t){this.originInstance.setStrokeOpacity(t)},strokeWeight(t){this.originInstance.setStrokeWeight(t)},strokeStyle(t){this.originInstance.setStrokeStyle(t)},fillColor(t){this.originInstance.setFillColor(t)},fillOpacity(t){this.originInstance.setFillOpacity(t)},editing(t){t?this.originInstance.enableEditing():this.originInstance.disableEditing()},massClear(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},clicking(t){this.reload()}},methods:{load(){const{BMap:t,map:e,path:o,strokeColor:n,strokeWeight:i,strokeOpacity:a,strokeStyle:s,fillColor:r,fillOpacity:d,editing:g,massClear:c,clicking:y}=this,f=new t.Polygon(o.map(v=>m(t,{lng:v.lng,lat:v.lat})),{strokeColor:n,strokeWeight:i,strokeOpacity:a,strokeStyle:s,fillColor:r,fillOpacity:d,enableMassClear:c,enableClicking:y});this.originInstance=f,e.addOverlay(f),I.call(this,f),g?f.enableEditing():f.disableEditing()}}},it=nt,at,st,lt=(0,u.Z)(it,at,st,!1,null,null,null),rt=lt.exports,ct={mixins:[b("abstract")],props:["name","strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","massClear","clicking"],data(){return{paths:[]}},components:{BmPolygon:rt},watch:{name(){this.reload()}},methods:{load(){const{BMap:t,name:e}=this;new t.Boundary().get(e,n=>{this.paths=n.boundaries.map(i=>(i||[]).split(";").map(a=>(([s,r])=>({lng:s,lat:r}))(a.split(",").map(s=>+s))))})}}},dt=ct,gt=(0,u.Z)(dt,et,ot,!1,null,null,null),pt=gt.exports,mt={name:"bm-navigation",render(){},mixins:[b("control")],props:{anchor:{type:String},offset:{type:Object},type:{type:String},showZoomInfo:{type:Boolean},enableGeolocation:{type:Boolean,default:!1}},watch:{anchor(){this.reload()},offset(){this.reload()},type(){this.reload()},showZoomInfo(){this.reload()}},methods:{load(){const{BMap:t,map:e,anchor:o,offset:n,type:i,showZoomInfo:a,enableGeolocation:s}=this;this.originInstance=new t.NavigationControl({anchor:l.g[o],offset:n&&p(t,n),type:l.g[i],showZoomInfo:a,enableGeolocation:s}),e.addControl(this.originInstance)}}},ht=mt,ut,ft,yt=(0,u.Z)(ht,ut,ft,!1,null,null,null),bt=yt.exports,vt=l(65840),It=l(45061),wt=l(26711),x=l(55616),k=l(49500),kt={props:["widgetInfo","currentWidget"],name:"bmap-point",mixins:[vt.u,It.u,wt.H],components:{BaiduMap:N,BmMarker:H,BmLabel:tt,BmBoundary:pt,BmNavigation:bt},data(){return{historyRegion:[],dimensionsEx:null,dimensionsAliasEx:null,scrollwheelzoom:!1,iconIamge:{url:l(99154),size:{width:50,height:50}},listIamge:{url:l(99154),size:{width:50,height:50}},center:{lng:this.widgetInfo.config.x,lat:this.widgetInfo.config.y},content:"",data:[],imageMakerList:null}},watch:{"widgetInfo.config.x":{handler(t){this.center.lng=t}},"widgetInfo.config.y":{handler(t){this.center.lat=t}},"widgetInfo.config.title":{handler(t){this.content=t}}},mounted(){this.initAction(this.widgetInfo)},methods:{loadInfo(t){let e=[],o=[],n=[],i=[];t.dataset.type==this.$$global_editor.dataSourcType.static.code?(e=t.dataset.static.source,o=t.dataset.static.dimensions,n=t.dataset.static.dimensionsAlias,i=t.dataset.static.encode):t.dataset.type==this.$$global_editor.dataSourcType.dynamic.code&&(e=t.dataset.dynamic.source,o=t.dataset.dynamic.dimensions,n=t.dataset.dynamic.dimensionsAlias,i=t.dataset.dynamic.encode),this.dimensionsEx=o,this.dimensionsAliasEx=n,this.data=this.getTotalData(i,o,e),this.reSetCenter(this.data,i);let a=t.config.modeImgURL,s={},r={},d=t.config.imageMakerList;a.forEach((g,c)=>{s[g.model]=g.color,d&&(r[g.model]={url:this.getImageUrl(d[c]),size:{width:50,height:50}})}),this.imageMakerList=r,t.config.pointImgURL?this.iconIamge.url=this.getImageUrl(t.config.pointImgURL):this.iconIamge.url=l(99154)},reLoadInfo(t){t&&(this.$refs.bampPoint.style.width=t.attr.w+"px",this.$refs.bampPoint.style.height=t.attr.hh+"px"),this.loadInfo(t)},initAction(t){this.actionReceive(t)},getStyle(t){let e=t.config.global.padding.left||0,o=t.config.global.padding.right||0,n=t.config.global.padding.top||0,i=t.config.global.padding.bottom||0;return{width:t.attr.w-e-o+"px",height:t.attr.hh-n-i+"px",paddingLeft:t.config.global.padding.left+"px",paddingTop:t.config.global.padding.top+"px",paddingRight:t.config.global.padding.right+"px",paddingBottom:t.config.global.padding.bottom+"px",display:t.attr.hide===!0?"none":""}},getTotalData(t,e,o){let n=[],i=this.getAttrIndex(e,t);return o.forEach(a=>{let s={};if(i.name>-1?s.name=a[i.name]:s.name="",i.mode>-1?s.mode=a[i.mode]:s.mode="",i.positionPoint>-1){let r=a[i.positionPoint].split(",");r.length==2?s.positionPoint={lng:Number(r[0].trim()),lat:Number(r[1].trim())}:k.error("\u5750\u6807\u70B9\u4F4D\u7F6E\u6709\u8BEF")}else s.positionPoint={lng:120.219,lat:30.259};i.discription>-1?s.discription=a[i.discription]:s.discription="",n.push(s)}),n},getAttrIndex(t,e){let o={name:-1,mode:-1,positionPoint:-1,discription:-1};for(let n=0;n<t.length;n++)t[n]==e.name&&(o.name=n),t[n]==e.mode&&(o.mode=n),t[n]==e.positionPoint&&(o.positionPoint=n),t[n]==e.discription&&(o.discription=n);return o},getImageUrl(t){if(t&&t!="")return $.appendImageBaseURL(t)},handler(){this.loadInfo(this.widgetInfo)},reSetCenter(t,e){let o=parseInt(e.centerPoint);o?(o=o-1,this.center.lng=t[o].positionPoint.lng,this.center.lat=t[o].positionPoint.lat,this.content=t[o].name):t.length==1&&t[0].positionPoint?(this.center.lng=t[0].positionPoint.lng,this.center.lat=t[0].positionPoint.lat,this.content=t[0].name):(this.center.lng=this.widgetInfo.config.x,this.center.lat=this.widgetInfo.config.y)},onClick(t,e){let o=this,n=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(n,i=>{if(i.enabled&&i.code.indexOf(o.$$global_editor.actionType.click.code)>-1){let a=i.code+"_"+o.widgetInfo.id,s={name:t.name};if(i.paramsExtend&&i.paramsExtend.length>0&&this.getExtendParams(s,i.paramsExtend,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[e],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions),i.script&&i.script.enabled){if(k.log("Execute script for "+i.name+" component to "+i.script.title+" component"),i.script.content==""){x.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",i.script.content),s=this.customScript_actionSend_clickParam(s)}z.Z.$emit(a,s),i.postMessage&&this.doPostMessage(s),this.actionNameList.push(a)}else if(i.enabled&&i.code.indexOf(o.$$global_editor.actionType.openLink.code)>-1){let a={name:t.name};if(i.paramsExtend&&i.paramsExtend.length>0&&this.getExtendParams(a,i.paramsExtend,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[e],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions),i.type===this.$$global_editor.linkType.dynamic.code&&(i[this.$$global_editor.linkType.dynamic.code].url=this.getActionUrl(i,o.widgetInfo.dataset[o.widgetInfo.dataset.type].source[e],o.widgetInfo.dataset[o.widgetInfo.dataset.type].dimensions)),i.script&&i.script.enabled){if(k.log("Execute script for "+i.name+" component to "+i.script.title+" component"),i.script.content==""){x.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_openLink=new Function("param",i.script.content),a=this.customScript_actionSend_openLink(a)}this.openLinkAction(i,a)}})}}},St=kt,Mt=(0,u.Z)(St,P,Z,!1,null,null,null),Ct=Mt.exports}}]);
