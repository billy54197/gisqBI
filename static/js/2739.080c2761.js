"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[2739],{2739:function(O,u,d){d.r(u),d.d(u,{default:function(){return b}});var m=function(){var r=this,t=r._self._c;return t("div",{staticClass:"header-orders-container",attrs:{id:r.domId}},[r._l(r.columns,function(i,s){return[t("a",{key:`item-${s}`,class:`header-orders-item ${i.enabled?"active":""} ${i.disabled?"disabled":""} ${i.status} ${r.configHeaderOrder.split?"split":""}`},[t("span",{on:{click:function(l){return r.changeStatusEnable(i)}}},[r._v(r._s(i.label))]),t("i",{class:r.iconCls(i),on:{click:function(l){return r.changeStatus(i)}}})])]})],2)},y=[],h=d(48836),g=d(27966),a=d(49500);const c={caret:{none:"el-icon-d-caret",asc:"el-icon-caret-top",desc:"el-icon-caret-bottom"},sort:{none:"el-icon-sort",asc:"el-icon-sort-up",desc:"el-icon-sort-down"},arrow:{none:"el-icon-arrow-up",asc:"el-icon-arrow-up",desc:"el-icon-arrow-down"}};var v={name:"header-orders",props:{widgetId:{type:String}},data(){return{columns:[]}},computed:{...(0,h.Se)(["queryConfigFun","queryIdFun"]),domId(){return`header-orders-${this.queryId}-${this.widgetId}`},config(){return{split:!0,icon:"arrow"}},queryId(){return this.queryIdFun()||""},configField(){let e=this.queryConfigFun(this.widgetId);return e.field&&e.field.length>0?e.field.filter(r=>r.type=="field"&&!r.hide&&r.sortable).map(r=>({label:r.label,guid:r.guid,field:r.field})):[]},configHeaderOrder(){return this.queryConfigFun(this.widgetId).headerOrder}},watch:{configField:{deep:!0,handler:function(e){this.resetSortFields(e)}},configHeaderOrder:{deep:!0,handler:function(e){this.resetStyle(e)}}},mounted(){this.resetSortFields(this.configField),this.resetStyle(this.configHeaderOrder)},methods:{...(0,h.nv)(["setRequestBodyOrdersEx"]),iconCls(e){let r=this.configHeaderOrder.iconCls||"sort",t=c[r]?c[r]:c.sort,i=`header-orders-icon ${e.status} `,s=e.status&&t[e.status]?t[e.status]:t.none;return i+s},resetSortFields(e){this.columns=this.columns.filter(r=>e.find(t=>t.guid==r.guid));for(let r=0;r<e.length;++r){let t=e[r],i=this.columns.find(s=>s.guid==t.guid);if(i)i.label=t.label,i.field=t.field;else{let s=JSON.parse(JSON.stringify(t));s.enabled=!1,s.status="",this.columns.push(s)}}},changeStatusEnable(e){e.disabled||(e.enabled=!e.enabled,e.enabled&&!e.status&&(e.status="asc"),this.emitSort())},changeStatus(e){e.disabled||(e.enabled=!0,e.status=e.status=="asc"?"desc":"asc",this.emitSort())},emitSort(){let e=this;e.sorting||(e.sorting=!0,setTimeout(function(){let r=e.columns.filter(t=>t.enabled&&(t.status==="asc"||t.status==="desc")).map(t=>({sort:t.field,order:t.status}));e.setRequestBodyOrdersEx({orders:r,widgetId:e.widgetId}),g.Z.$emit("busQueryDataList"+(e.widgetId?"_"+e.widgetId:"")),e.sorting=!1},200))},resetStyle(e){if(e){let r=this.getStyleContainer(e)+this.getStyleItem(e)+this.getStyleItemHover(e)+this.getStyleItemActive(e)+this.getStyleSplit(e),t=document.getElementById(`${this.domId}-style`);t?t.remove():(t=document.createElement("STYLE"),t.id=`${this.domId}-style`,t.type="text/css"),t.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(t)}},config2String(e,r){let t=this.style2String(this.config2Style(e,r));return t&&t.length>4?t:""},config2Style(e,r){let t=JSON.parse(JSON.stringify(e));r&&r.removes&&r.removes.length>0&&r.removes.forEach(i=>delete t[i]);for(let i in t)(typeof t[i]>"u"||t[i]==null||typeof document.body.style[i]>"u")&&delete t[i];t.padding&&t.padding-0+""!="NaN"?(delete t.paddingLeft,delete t.paddingRight,delete t.paddingTop,delete t.paddingBottom):delete t.padding;for(let i in t)(i.startsWith("padding")||i.startsWith("margin"))&&t[i]-0+""!="NaN"?t[i]+="px":i.startsWith("fontSize")&&t[i]-0>0&&(t[i]+="pt");return t},style2String(e){return Object.keys(e).reduce((r,t)=>r+t.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+e[t]+";","")},getStyleContainer(e){let r=JSON.parse(JSON.stringify(e));if(e.isContainerStyle&&e.styleScriptContainer)try{new Function("config","style",e.styleScriptContainer).apply(this,[e,r])}catch(i){a.error(i)}let t=this.config2String(r,{removes:["item"]});return t&&t.length>4?`#${this.domId} {${t}}
`:""},getStyleItem(e){let{iconColor:r}=JSON.parse(JSON.stringify(e.item)),t=JSON.parse(JSON.stringify(e.item)),i=r?{color:r}:{};if(e.item.isItemStyle&&e.item.styleScriptItem)try{new Function("config","itemStyle","iconStyle",e.item.styleScriptItem).apply(this,[e,t,i])}catch(o){a.error(o)}let s=this.config2String(t),l=this.config2String(i),n="";return s&&(n+=`#${this.domId} .header-orders-item { ${s}; }
`),l&&(n+=`#${this.domId} .header-orders-item > .header-orders-icon { ${l}; }
`),n},getStyleItemHover(e){let{iconColor:r}=JSON.parse(JSON.stringify(e.hover)),t=JSON.parse(JSON.stringify(e.hover)),i=r?{color:r+" !important"}:{};if(e.hover.isHoverStyle&&e.hover.styleScriptHover)try{new Function("config","itemStyle","iconStyle",e.hover.styleScriptHover).apply(this,[e,t,i])}catch(o){a.error(o)}let s=this.config2String(t),l=this.config2String(i),n="";return s&&(n+=`#${this.domId} .header-orders-item:hover > span { ${s}; }
`,n+=`#${this.domId} .header-orders-item:hover >  .header-orders-icon { font-weight: inherit; }
`),l&&(n+=`#${this.domId} .header-orders-item > .header-orders-icon:hover { ${l}; }
`),n},getStyleItemActive(e){let{iconColorAsc:r,iconColorDesc:t}=JSON.parse(JSON.stringify(e.active)),i=JSON.parse(JSON.stringify(e.active)),s=r?{color:r}:{},l=t?{color:t}:{};if(e.active.isActiveStyle&&e.active.styleScriptActive)try{new Function("config","itemStyle","ascStyle","descStyle",e.active.styleScriptActive).apply(this,[e,i,s,l])}catch(f){a.error(f)}let n="",o=this.config2String(i);o&&(n+=`#${this.domId} .header-orders-item.active span { ${o}; }
`);let S=this.config2String(s);S&&(n+=`#${this.domId} .header-orders-item.active > i.asc { ${S} }
`);let p=this.config2String(l);return p&&(n+=`#${this.domId} .header-orders-item.active > i.desc { ${p} }
`),n},getStyleSplit(e){if(e.split){let r=15,t=this.getNum(e.item.padding);if(typeof t<"u")r=t;else{let l=this.getNum(e.item.paddingLeft),n=this.getNum(e.item.paddingRight);l=typeof l>"u"?5:l,n=typeof n>"u"?5:n,r=(l+n)/2}let i=`content: "|";position: relative;font-weight: bold;right:-${r}px;`;return i+=`color:${e.splitColor?e.splitColor:"color:rgb(235, 238, 245)"};`,`#${this.domId} a.split:not(:last-child)::after { ${i} };
`}return""},getNum(e){if(typeof e<"u"&&e-0+""!="NaN")return e-0}}},I=v,$=d(68141),N=(0,$.Z)(I,m,y,!1,null,"0eaeac83",null),b=N.exports}}]);
