"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[99438],{56279:function(u,c,n){n.d(c,{P:function(){return r}});var a=n(386892),d=n(149500);const r={mixins:[a.D],created(){},methods:{lifecycleBeforeChartsLoad(g){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&d.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),d.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let h=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[g]);if(h)return h}return g},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&d.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),d.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},752246:function(u,c,n){n.d(c,{X:function(){return a},b:function(){return d}});let a={versions:function(){var r=navigator.userAgent;return{trident:r.indexOf("Trident")>-1,presto:r.indexOf("Presto")>-1,webKit:r.indexOf("AppleWebKit")>-1,gecko:r.indexOf("Gecko")>-1&&r.indexOf("KHTML")==-1,mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:r.indexOf("Android")>-1,iPhone:r.indexOf("iPhone")>-1,iPad:r.indexOf("iPad")>-1,webApp:r.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},d;a.versions.mobile||a.versions.ios||a.versions.android||a.versions.iPhone||a.versions.iPad?d=!1:d=!0},844513:function(u,c,n){n.d(c,{Z:function(){return x}});var a=function(){var i=this,p=i._self._c;return i.attr.buttonHide?p("div",{style:{position:"absolute",right:i.attr.buttonHideRight+"px",top:i.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(b){return i.onHide()}}},[i.openTooltip?p("el-tooltip",{attrs:{"open-delay":1e3,content:i.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[p("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):p("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):i._e()},d=[],r=n(752246),g={props:["attr"],name:"hide-button",data(){return{isPc:r.b}},computed:{openTooltip:function(){let m=!1,i=this.attr.buttonHideTooltipContent;return r.b&&i&&i!=null&&i.trim()!=""&&(m=!0),m}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},y=g,h=n(768141),w=(0,h.Z)(y,a,d,!1,null,"bf399b9a",null),x=w.exports},999438:function(u,c,n){n.r(c),n.d(c,{default:function(){return $}});var a=function(){var t=this,o=t._self._c;return o("div",{ref:"comProgress",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:"hidden",cursor:this.getCursor(t.widgetInfo.action,this.$$global_editor.actionType.click.code)},on:{click:t.onClick}},[o("hide-button",{attrs:{attr:t.widgetInfo.attr}}),o("div",{ref:"bgImg",style:t.getStyleBgImg(t.widgetInfo)}),t.widgetInfo.config.numberAttr.position=="top"?o("div",{style:t.getStyleNumber(t.widgetInfo)},[o("span",{style:t.getStyleNumberPrefix(t.widgetInfo.config.numberAttr.prefix)},[t._v(" "+t._s(t.widgetInfo.config.numberAttr.text)+" ")]),o("span",{style:t.getStyleNumberNum(t.widgetInfo.config.numberAttr.number)},[t._v(" "+t._s(t.molecular+t.widgetInfo.config.numberAttr.delimiter+t.denominator)+" ")]),o("span",{style:t.getStyleNumberSuffix(t.widgetInfo.config.numberAttr.suffix)},[t._v(" "+t._s(t.widgetInfo.config.numberAttr.unit)+" ")])]):t._e(),t.widgetInfo.config.progressAttr.tooltip.hide?o("div",{staticClass:"my-progress",style:{paddingLeft:t.mUtils.getNewPxW(t.widgetInfo.config.partitionAttr.left)+"px",paddingTop:t.mUtils.getNewPxH(t.widgetInfo.config.partitionAttr.top)+"px"}},[o("el-progress",{ref:"myProgress",style:{width:t.mUtils.getNewPxW(t.widgetInfo.config.partitionAttr.width)+"px"},attrs:{id:"id"+t.widgetInfo.id,type:t.widgetInfo.config.progressAttr.type,width:t.mUtils.getNewPxH(t.widgetInfo.config.progressAttr.width),"stroke-width":t.mUtils.getNewPxH(t.widgetInfo.config.progressAttr.strokeWidth),"text-inside":t.widgetInfo.config.progressAttr.textInside,"show-text":t.widgetInfo.config.percentage.showText,percentage:t.percentage>100?100:t.percentage}})],1):o("el-popover",{attrs:{placement:t.widgetInfo.config.progressAttr.tooltip.placement,offset:t.widgetInfo.config.progressAttr.tooltip.offset,trigger:"hover","popper-class":"popover_"+t.widgetInfo.id,content:t.content()},on:{show:function(s){return t.popoverStyle()}}},[o("div",{staticClass:"my-progress",style:{paddingLeft:t.mUtils.getNewPxW(t.widgetInfo.config.partitionAttr.left)+"px",paddingTop:t.mUtils.getNewPxH(t.widgetInfo.config.partitionAttr.top)+"px"},attrs:{slot:"reference"},slot:"reference"},[o("el-progress",{ref:"myProgress",style:{width:t.mUtils.getNewPxW(t.widgetInfo.config.partitionAttr.width)+"px"},attrs:{id:"id"+t.widgetInfo.id,type:t.widgetInfo.config.progressAttr.type,width:t.mUtils.getNewPxH(t.widgetInfo.config.progressAttr.width),"stroke-width":t.mUtils.getNewPxH(t.widgetInfo.config.progressAttr.strokeWidth),"text-inside":t.widgetInfo.config.progressAttr.textInside,"show-text":t.widgetInfo.config.percentage.showText,percentage:t.percentage>100?100:t.percentage}})],1)]),t.widgetInfo.config.numberAttr.position=="bottom"?o("div",{style:t.getStyleNumber(t.widgetInfo)},[o("span",{style:t.getStyleNumberNum(t.widgetInfo.config.numberAttr.number)},[t._v(" "+t._s(t.molecular+t.widgetInfo.config.numberAttr.delimiter+t.denominator)+" ")]),o("span",{style:t.getStyleNumberSuffix(t.widgetInfo.config.numberAttr.suffix)},[t._v(" "+t._s(t.widgetInfo.config.numberAttr.unit)+" ")])]):t._e(),t.widgetInfo.config.information.hide?t._e():o("div",{staticClass:"my-textarea"},[o("div",{ref:"myTextArea",staticClass:"test-div",style:t.getStyleInfo(t.widgetInfo.config.information),attrs:{contenteditable:"true",onfocus:"this.blur();"},domProps:{textContent:t._s(t.widgetInfo.config.information.text)},on:{click:t.onClick}})]),o("svg",[o("linearGradient",{attrs:{id:t.widgetInfo.id,x1:"0%",y1:"0%",x2:"0%",y2:"100%"}},[o("stop",{staticStyle:{"stop-opacity":"1"},style:{stopColor:t.widgetInfo.config.partitionAttr.partBefore.backgroundColor.left},attrs:{offset:"0%"}}),o("stop",{staticStyle:{"stop-opacity":"1"},style:{stopColor:t.widgetInfo.config.partitionAttr.partBefore.backgroundColor.right},attrs:{offset:"100%"}})],1)],1)],1)},d=[],r=n(927966),g=n(321300),y=n(445061),h=n(126711),w=n(56279),x=n(844513),m=n(653692),i=n(555616),p=n(67157);const b={mixins:[p.c],data(){return{config_extend:{config:{numberAttr:{number:{fontSize:16,fontFamily:"alibabaPuHuiTiRegular",color:"rgba(76,132, 255, 1)"}},partitionAttr:{partAfter:{color:"rgba(196, 196, 196, 1)"}},percentage:{fontStyle:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14,color:"rgba(0, 0, 0, 1)"}}}},filter_config:{bgiImg:{opcity:.5},numberAttr:{number:{fontFamily:"alibabaPuHuiTiRegular",color:"rgba(76,132, 255, 1)"}},partitionAttr:{partBefore:{type:"pureColor",pureColor:"rgba(76,132, 255, 1)",backgroundColor:{left:"",right:""}},partAfter:{color:"rgba(196, 196, 196, 1)"}}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfigWithArrary(e,t,this.filter_config)}}};var I=n(149500),N={props:["widgetInfo"],name:"com-progress",components:{HideButton:x.Z},mixins:[m.baseConfig,y.u,h.H,w.P,b],data(){return{molecular:0,denominator:0,percentage:0,encode:{}}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo)},watch:{percentage(){let e=this.$refs.myProgress.$el,t=this.$refs.myProgress.$el.childNodes[0].childNodes[0].childNodes[0];if(this.widgetInfo.config.percentage.showText){let o=e.childNodes[1]&&e.childNodes[1].className=="el-progress__text"?e.childNodes[1]:t.childNodes[0];o.innerHTML=this.percentage+"%"}},"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},updated(){let e=this.$refs.myProgress.$el,t=this.$refs.myProgress.$el.childNodes[0].childNodes[0].childNodes[0],o=e.childNodes[1]&&e.childNodes[1].className=="el-progress__text"?e.childNodes[1]:t.childNodes[0];this.widgetInfo.config.percentage.showText&&o&&(o.innerHTML=this.percentage+"%")},methods:{loadInfo(e){let t=[],o=[];o=e.dataset[e.dataset.type].dimensions,t=e.dataset[e.dataset.type].source,this.encode=e.dataset[e.dataset.type].encode;let s=this.getVal(t,o,this.encode.molecular),l=this.getVal(t,o,this.encode.denominator);if(this.molecular=this.$$lib__.isNaN(s)!=!0?s:null,this.denominator=this.$$lib__.isNaN(l)!=!0?l:null,this.encode.percentage){let f=this.getVal(t,o,this.encode.percentage);e.config.progressAttr.decimalDigitsRadio?this.percentage=this.$$lib__.isNaN(f)!=!0?parseFloat(parseFloat(f).toFixed(e.config.progressAttr.decimalDigits)):0:this.percentage=this.$$lib__.isNaN(f)!=!0?f:0}else this.molecular!=null&&this.denominator!=null&&this.denominator!=0?(this.percentage=this.molecular/this.denominator*100,e.config.progressAttr.decimalDigitsRadio?this.percentage=parseFloat(parseFloat(this.percentage).toFixed(e.config.progressAttr.decimalDigits)):this.percentage=parseFloat(parseFloat(this.percentage))):this.percentage=0;this.molecular=this.molecular!=null?this.molecular:"",this.denominator=this.denominator!=null?this.denominator:"",this.setColor(e.config,e.id),e.config.percentage.showText&&this.$nextTick(()=>{this.setStylePercentage(e.config.percentage)}),this.lifecycleAfterLoad()},reLoadInfo(e){this.loadInfo(e)},setColor(e,t){let o=this.$refs.myProgress,s=e.partitionAttr.partBefore,l=e.partitionAttr.partAfter;e.progressAttr.type=="line"?(s.type==this.$$global_editor.colorType.pureColor.code?o.$el.childNodes[0].childNodes[0].childNodes[0].style.backgroundColor=s.pureColor:s.type==this.$$global_editor.colorType.gradation.code&&(o.$el.childNodes[0].childNodes[0].childNodes[0].style.backgroundColor="none",o.$el.childNodes[0].childNodes[0].childNodes[0].style.backgroundImage="linear-gradient(to right, "+s.backgroundColor.left+","+s.backgroundColor.right+")"),o.$el.childNodes[0].childNodes[0].style.backgroundColor=l.color):(s.type==this.$$global_editor.colorType.pureColor.code?o.$el.childNodes[0].childNodes[0].childNodes[1]&&(o.$el.childNodes[0].childNodes[0].childNodes[1].style.stroke=s.pureColor):s.type==this.$$global_editor.colorType.gradation.code&&(o.$el.childNodes[0].childNodes[0].childNodes[1].setAttribute("stroke","url(#"+t+")"),o.$el.childNodes[0].childNodes[0].childNodes[1].style.stroke=""),o.$el.childNodes[0].childNodes[0].childNodes[0].style.stroke=l.color)},content(){let e="",t=this.widgetInfo.config.numberAttr.text;return t&&(e+=t+":"),e+=this.percentage+"%",e},popoverStyle(){let e=document.querySelector(".popover_"+this.widgetInfo.id),t=document.querySelector(".popover_"+this.widgetInfo.id+">.popper__arrow");e.style.background="rgba(0,0,0,.4)",e.style.minWidth="0",e.style.padding="5px",e.style.width="auto",e.style.border="none",e.style.fontSize=this.widgetInfo.config.progressAttr.tooltip.fontSize,e.style.fontFamily=this.widgetInfo.config.progressAttr.tooltip.fontFamily,e.style.color=this.widgetInfo.config.progressAttr.tooltip.color,t.style.display="none"},setStylePercentage(e){let t=this.$refs.myProgress;if(t.$el.childNodes[1]&&t.$el.childNodes[1].style&&(t.$el.childNodes[1].style.position="absolute",t.$el.childNodes[1].style.left=this.mUtils.getNewPxW(e.left)+"px",t.$el.childNodes[1].style.top=this.mUtils.getNewPxH(e.top)+"px",t.$el.childNodes[1].style.fontSize=this.mUtils.getNewFontSize(e.fontStyle.fontSize)+"px",t.$el.childNodes[1].style.fontFamily=e.fontStyle.fontFamily,t.$el.childNodes[1].style.color=e.fontStyle.color,t.$el.childNodes[1].style.fontWeight=e.fontStyle.fontWeight,t.$el.childNodes[1].style.fontStyle=e.fontStyle.fontStyle,t.$el.childNodes[1].style.textDecoration=e.fontStyle.textDecoration,t.$el.childNodes[1].style.textAlign=e.fontStyle.horizontalAlignment),this.widgetInfo.config.progressAttr.textInside){let o=t.$el.childNodes[0].childNodes[0].childNodes[0].childNodes[0];o.style.color=e.fontStyle.color,o.style.fontSize=this.mUtils.getNewFontSize(e.fontStyle.fontSize)+"px",o.style.fontFamily=e.fontStyle.fontFamily,o.style.fontWeight=e.fontStyle.fontWeight,o.style.fontStyle=e.fontStyle.fontStyle,o.style.textDecoration=e.fontStyle.textDecoration,t.$el.childNodes[0].childNodes[0].childNodes[0].style.textAlign=e.fontStyle.horizontalAlignment}},getVal(e,t,o){let s=-1;if(e.length>0){for(let l=0;l<t.length;l++)t[l]==o&&(s=l);return parseFloat(e[0][s])}return NaN},getStyleBgImg(e){return{display:e.config.bgiImg.show==!0?"block":"none",width:this.mUtils.getNewPxW(e.config.bgiImg.width)+"px",height:this.mUtils.getNewPxH(e.config.bgiImg.height)+"px",position:"absolute",opacity:e.config.bgiImg.opcity,backgroundImage:this.getImageUrl(e.config.bgiImg.url),backgroundSize:e.config.bgiImg.backgroundSize,left:this.mUtils.getNewPxW(e.config.bgiImg.left)+"px",top:this.mUtils.getNewPxH(e.config.bgiImg.top)+"px",zIndex:1}},getImageUrl(e){if(e&&e!="")return"url("+g.appendImageBaseURL(e)+")"},getStyleNumber(e){return{display:e.config.numberAttr.hide==!0?"none":"",width:e.attr.w+"px",height:this.mUtils.getNewPxH(e.config.numberAttr.height)+"px",paddingLeft:this.mUtils.getNewPxW(e.config.numberAttr.left)+"px",paddingTop:this.mUtils.getNewPxH(e.config.numberAttr.top)+"px",textAlign:e.config.numberAttr.horizontalAlignment}},getStyleNumberNum(e){return{marginLeft:this.mUtils.getNewPxW(e.left)+"px",marginRight:this.mUtils.getNewPxW(e.right)+"px",fontSize:this.mUtils.getNewFontSize(e.fontSize)+"px",fontFamily:e.fontFamily,color:e.color,fontWeight:e.fontWeight,fontStyle:e.fontStyle,textDecoration:e.textDecoration}},getStyleNumberSuffix(e){return{marginRight:"5px",fontSize:this.mUtils.getNewFontSize(e.fontSize)+"px",fontFamily:e.fontFamily,color:e.color,fontWeight:e.fontWeight,fontStyle:e.fontStyle,textDecoration:e.textDecoration}},getStyleNumberPrefix(e){return{fontSize:this.mUtils.getNewFontSize(e.fontSize)+"px",fontFamily:e.fontFamily,color:e.color,fontWeight:e.fontWeight,fontStyle:e.fontStyle,textDecoration:e.textDecoration}},getStyleInfo(e){let t={};return e.top&&(t.paddingTop=this.mUtils.getNewPxH(e.top)+"px"),e.left&&(t.paddingLeft=this.mUtils.getNewPxW(e.left)+"px"),e.right&&(t.paddingRight=this.mUtils.getNewPxW(e.right)+"px"),e.fontStyle.fontSize&&(t.fontSize=this.mUtils.getNewFontSize(e.fontStyle.fontSize)+"px"),e.fontStyle.fontFamily&&(t.fontFamily=e.fontStyle.fontFamily),e.fontStyle.color&&(t.color=e.fontStyle.color),e.fontStyle.fontWeight&&(t.fontWeight=e.fontStyle.fontWeight),e.fontStyle.fontStyle&&(t.fontStyle=e.fontStyle.fontStyle),e.fontStyle.textDecoration&&(t.textDecoration=e.fontStyle.textDecoration),e.fontStyle.horizontalAlignment&&(t.textAlign=e.fontStyle.horizontalAlignment),t},initAction(e){this.actionReceive(e)},onClick(){let e=this,t=this.widgetInfo.action.sendOut.actionList;this.$$lib__.each(t,o=>{if(o.enabled&&o.code==e.$$global_editor.actionType.click.code){let s=e.$$global_editor.actionType.click.code+"_"+e.widgetInfo.id,l={molecular:e.molecular,denominator:e.denominator};if(o.paramsExtend&&o.paramsExtend.length>0){let f=[];e.widgetInfo.dataset[e.widgetInfo.dataset.type].source&&e.widgetInfo.dataset[e.widgetInfo.dataset.type].source.length>0&&(f=e.widgetInfo.dataset[e.widgetInfo.dataset.type].source[0]),this.getExtendParams(l,o.paramsExtend,f,e.widgetInfo.dataset[e.widgetInfo.dataset.type].dimensions)}if(o.script&&o.script.enabled){if(I.log("Execute script for "+e.widgetInfo.name+" component to "+o.name+" component"),o.script.content==""){i.Message.warning({message:o.name+"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}this.customScript_actionSend_clickParam=new Function("param",o.script.content),l=this.customScript_actionSend_clickParam(l)}r.Z.$emit(s,l),this.actionNameList.push(s),o.postMessage&&this.doPostMessage(l)}})}}},S=N,v=n(768141),A=(0,v.Z)(S,a,d,!1,null,"4e23a231",null),$=A.exports}}]);
