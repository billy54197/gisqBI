"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[2932],{5143:function(y,h,r){r.d(h,{b:function(){return g}});var u=r(48836),f=r(42160),p=r(49500);const g={created(){},computed:{...(0,u.Se)(["getWidgetAllArr"])},data(){return{containerViewSubWidgetList:[]}},methods:{...(0,u.nv)(["updateWidgetParentArrDataset","updateWidgetAllArrDataset"]),reLoadInfo(i){this.widgetInfo.id!=i.id&&this.$refs["comp_"+i.id]&&setTimeout(this.$refs["comp_"+i.id][0].reLoadInfo(i),500),this.loadInfo(i)},orgWidget(i){let l=[];return this.$$lib__.each(i,s=>{let n=this.$$lib__.find(this.getWidgetAllArr,d=>d.parentId==this.widgetInfo.id&&d.id==s.id);n&&(n.dataset&&n.dataset[n.dataset.type]&&(n.dataset.type==this.$$global_editor.dataSourcType.dynamic.code||n.dataset.type==this.$$global_editor.dataSourcType.local.code)&&n.dataset[n.dataset.type].autoUpdate==!0&&(f.default.set(this.dynamicWidgets,n.id,n),n.attr.hide!=!0&&n.dataset[n.dataset.type].autoUpdate==!0&&f.default.set(this.autoUpdateWidget,n.id,n)),l.push(n))}),f.default.set(this,"containerViewSubWidgetList",l),l},setTitleText(i,l){l?this.$$lib__.each(l,s=>{this.$$lib__.each(this.orgWidget(s.widgets),n=>{n.attr.widgetW||(n.attr.widgetW=n.attr.w),this.$refs["title_"+n.id]&&this.$refs["title_"+n.id][0]&&(this.$refs["title_"+n.id][0].innerHTML=this.initTextPosition(n)),n.title.position||(n.title.position="top")})}):this.$$lib__.each(this.orgWidget(i),s=>{this.$refs["title_"+s.id]&&this.$refs["title_"+s.id][0]&&(this.$refs["title_"+s.id][0].innerHTML=this.initTextPosition(s)),s.title.position||(s.title.position="top")})},initTextPosition(i){return i.title.text===void 0||!i.title.text?"":i.title.text&&(i.title.position==="left"||i.title.position==="right")?i.title.text.split("").join("<br />"):i.title.text},updataWidgetSource(i,l,s){try{switch(i.dataset.type){case this.$$global_editor.dataSourcType.dynamic.code:i.dataset.dynamic.source=l.data,l.total&&(i.dataset.dynamic.total=l.total);break;case this.$$global_editor.dataSourcType.local.code:i.dataset.local.dimensionsAlias=[],i.dataset.local.columnList=[],i.dataset.local.source=[],i.dataset.local.dimensions=[],i.dataset.local.dimensionsAlias=l.dimensionsAlias,i.dataset.local.columnList=l.columnList,i.dataset.local.source=l.source,i.dataset.local.dimensions=l.dimensions;break}}catch(d){p&&p.log&&p.log(d)}let n=this.$refs["comp_"+i.id];n&&n.length>0&&(this.updateWidgetAllArrDataset(i),this.updateWidgetParentArrDataset(i),n[0].reLoadInfo(i),this.sendoutDataloadSuccess(i),this.sendoutResponseData(i,l,s))},fit(i,l){if(!this.isView||!/^mobile/.test(this.getCanvasSetting.transformType))return i+"px";let s=this.getCanvasSetting.width/10,n=this.getCanvasSetting.height/window.innerHeight,d="";switch(this.getCanvasSetting.transformType){case"mobileAutoWidth":l?d=i+"px":d=i/s+"rem";break;case"mobileAutoBoth":d=i/s+"rem";break;default:l?d=i/n+"px":d=i/s+"rem"}return d}}}},42932:function(y,h,r){r.r(h),r.d(h,{default:function(){return S}});var u=function(){var t=this,o=t._self._c;return o("div",[t.widgetInfo.config.scroll.show?o("happy-scroll",{attrs:{color:t.widgetInfo.config.scroll.color,size:t.widgetInfo.config.scroll.width,resize:""}},[o("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:t.widgetInfo.config.scroll.show?"visible":"hidden"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.attr.buttonHide,expression:"widgetInfo.attr.buttonHide"}],style:{position:"absolute",right:t.widgetInfo.attr.buttonHideRight+"px",top:t.widgetInfo.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"}},[o("el-tooltip",{attrs:{content:t.widgetInfo.attr.buttonHideTooltipContent,disabled:t.widgetInfo.attr.buttonHideTooltipContent==""||t.widgetInfo.attr.buttonHideTooltipContent==null,"open-delay":1e3,effect:"dark",placement:"top"}},[o("el-button",{class:t.widgetInfo.attr.buttonHideIconClass&&t.widgetInfo.attr.buttonHideIconClass!=""?t.widgetInfo.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.widgetInfo.attr.buttonHideColor,fontSize:t.widgetInfo.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.onHide()}}})],1)],1),t._l(t.orgWidget(t.widgetInfo.config.widgets),function(e){return[o("div",{style:t.getWidgetStyle(e)},[o("div",{key:"widget_"+e.id,ref:"widget_"+e.id,refInFor:!0,class:t.getWidgetClass(e),style:t.getBindStyle(e),attrs:{id:"widget_"+e.id}},[o("external-frame-svg",{ref:"comp_frame_"+e.id,refInFor:!0,attrs:{"widget-info":e}}),e.title.position==="top"||e.title.position==="left"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:t.getWidgetTitleStyle(e),on:{click:function(c){return t.openLink(e)}}},[o("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[o("span",{ref:"title_"+e.id,refInFor:!0,style:t.getTitleSpanStyle(e),domProps:{innerHTML:t._s(t.getTitleText(e))}})])]):t._e(),o("draggable-component-container",{ref:"comp_"+e.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:t.getInfoStyle(e),attrs:{"widget-data":e},on:{attrChange:t.attrChange,doGetPreviewData:t.getPreviewData}}),e.title.position==="bottom"||e.title.position==="right"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:t.getWidgetTitleStyle(e),on:{click:function(c){return t.openLink(e)}}},[o("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[o("span",{ref:"title_"+e.id,refInFor:!0,style:t.getTitleSpanStyle(e),domProps:{innerHTML:t._s(t.getTitleText(e))}})])]):t._e()],1)])]})],2)]):o("div",{staticClass:"my-div",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:t.widgetInfo.config.overflow?"visible":"hidden"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.attr.buttonHide,expression:"widgetInfo.attr.buttonHide"}],style:{position:"absolute",right:t.widgetInfo.attr.buttonHideRight+"px",top:t.widgetInfo.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"}},[o("el-tooltip",{attrs:{content:t.widgetInfo.attr.buttonHideTooltipContent,disabled:t.widgetInfo.attr.buttonHideTooltipContent==""||t.widgetInfo.attr.buttonHideTooltipContent==null,"open-delay":1e3,effect:"dark",placement:"top"}},[o("el-button",{class:t.widgetInfo.attr.buttonHideIconClass&&t.widgetInfo.attr.buttonHideIconClass!=""?t.widgetInfo.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:t.widgetInfo.attr.buttonHideColor,fontSize:t.widgetInfo.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.onHide()}}})],1)],1),t._l(t.orgWidget(t.widgetInfo.config.widgets),function(e){return[o("div",{style:t.getWidgetStyle(e)},[o("div",{key:"widget_"+e.id,ref:"widget_"+e.id,refInFor:!0,class:t.getWidgetClass(e),style:t.getBindStyle(e),attrs:{id:"widget_"+e.id}},[o("external-frame-svg",{ref:"comp_frame_"+e.id,refInFor:!0,attrs:{"widget-info":e}}),e.title.position==="top"||e.title.position==="left"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:t.getWidgetTitleStyle(e),on:{click:function(c){return t.openLink(e)}}},[o("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[o("span",{ref:"title_"+e.id,refInFor:!0,style:t.getTitleSpanStyle(e),domProps:{innerHTML:t._s(t.getTitleText(e))}})])]):t._e(),o("draggable-component-container",{ref:"comp_"+e.id,refInFor:!0,staticStyle:{display:"inline-block",float:"left"},style:t.getInfoStyle(e),attrs:{"widget-data":e},on:{attrChange:t.attrChange,doGetPreviewData:t.getPreviewData,doReSetBoardId:t.doReSetBoardId}}),e.title.position==="bottom"||e.title.position==="right"?o("div",{staticStyle:{overflow:"hidden",float:"left"},style:t.getWidgetTitleStyle(e),on:{click:function(c){return t.openLink(e)}}},[o("div",{style:{marginLeft:e.title.label.left+"px",marginTop:e.title.label.top+"px"}},[o("span",{ref:"title_"+e.id,refInFor:!0,style:t.getTitleSpanStyle(e),domProps:{innerHTML:t._s(t.getTitleText(e))}})])]):t._e()],1)])]})],2)],1)},f=[],p=r(80512),g=r(93575),i=r(5143),l=r(77863),s=r(80161),n=r(45061),d=r(1783),m=r(56279),v={name:"ContainerPaneView",components:{ExternalFrameSvg:d.Z,DraggableComponentContainer:p.Z,HappyScroll:l.HappyScroll},mixins:[s.u,g.E,i.b,n.u,m.P],props:["widgetInfo","currentWidget"],data(){return{timerArr:[],dataSetArr:{},autoUpdateWidget:{},dynamicWidgets:{},prefix:{widget:"widget_"}}},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},mounted(){this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo),this.$nextTick(()=>{setTimeout(()=>{this.setHappyScrollStyle()},50)})},created:function(){this.clear()},destroyed:function(){this.clear()},methods:{loadInfo(){this.getDynamicWidgetsSource(this.dynamicWidgets),this.lifecycleAfterLoad()},initAction(a){this.actionReceive(a)},getCarouselItemStyle(a){return{opacity:a.opacity,backgroundColor:a.backgroundColor,backgroundImage:this.getImageUrl(a.backgroundImage),backgroundSize:a.backgroundSize}},doReSetBoardId(a){this.$emit("doReSetBoardId",a)},getTitleText(a){return a.title.text===void 0||!a.title.text?"":a.title.text&&(a.title.position==="left"||a.title.position==="right")?a.title.text.split("").join("<br />"):a.title.text},setHappyScrollStyle(){if(this.widgetInfo.config.scroll.show){let a=0,t=0;if(this.widgetInfo.config.scroll.width&&this.widgetInfo.config.scroll.width!=0){let e=document.querySelector("#widget_"+this.widgetInfo.id).querySelector(".happy-scroll-strip--vertical");e&&e.childNodes&&e.childNodes.length>0&&e.childNodes[0].style&&e.childNodes[0].style.opacity==1&&(a=this.widgetInfo.config.scroll.width);let c=document.querySelector("#widget_"+this.widgetInfo.id).querySelector(".happy-scroll-strip--horizontal");c&&c.childNodes&&c.childNodes.length>0&&c.childNodes[0].style&&c.childNodes[0].style.opacity==1&&(t=this.widgetInfo.config.scroll.width)}let o=document.querySelector("#widget_"+this.widgetInfo.id).querySelector(".happy-scroll");o&&o.childNodes&&o.childNodes.length>0&&o.childNodes[0].style&&(o.childNodes[0].style.width=this.widgetInfo.attr.w+a+"px",o.childNodes[0].style.height=this.widgetInfo.attr.hh+t+"px")}}}},I=v,b=r(68141),x=(0,b.Z)(I,u,f,!1,null,"4614171d",null),S=x.exports}}]);
