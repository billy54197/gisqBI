"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[4334],{19357:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _js_editor_editor_setting__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23400),_api_thirdparty_platformService__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(41261),_api_sys_userService__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(73573),_utils_platfrom_BigInt_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(59679),_utils_platfrom_RSA_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(25785),_config_config__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(31954),element_ui__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(55616),element_ui__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_6__);__webpack_exports__.Z={name:"modify-password-form",props:{widgetInfo:{type:Object,default:function(){}},dialogVisible:{type:Boolean,default:!0},needModifyPassword:{type:Object,default:function(){}}},mixins:[_js_editor_editor_setting__WEBPACK_IMPORTED_MODULE_0__.j],data(){let s=(i,d,n)=>{if(d==="")n(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801"));else{this.passwordForm.confirmPassword!==""&&this.$refs.passwordForm.validateField("confirmPassword");let l=this.checkPlatformRule(i,d,n);l?n(new Error(l)):n()}},r=(i,d,n)=>{if(d==="")n(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"));else if(d!==this.passwordForm.newPassword)n(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4!"));else{let l=this.checkPlatformRule(i,d,n);l?n(new Error(l)):n()}};return{fullloading:!1,storeUser:null,userInfo:{},platInfo:null,passwordForm:{currentPassword:null,newPassword:null,confirmPassword:null},rules:{currentPassword:[{required:!0,message:"\u5FC5\u586B\u9879\uFF0C\u4E0D\u5141\u8BB8\u4E3A\u7A7A",trigger:"blur"},{min:this.widgetInfo.config.from.currentPassword.input.minlength,max:this.widgetInfo.config.from.currentPassword.input.maxlength,message:"\u957F\u5EA6\u5728 "+(this.widgetInfo.config.from.currentPassword.input.minlength?this.widgetInfo.config.from.currentPassword.input.minlength:0)+" \u5230 "+(this.widgetInfo.config.from.currentPassword.input.maxlength?this.widgetInfo.config.from.currentPassword.input.maxlength:0)+" \u4E2A\u5B57\u7B26",trigger:"blur"}],newPassword:[{required:!0,validator:s,trigger:"blur"},{min:this.widgetInfo.config.from.newPassword.input.minlength,max:this.widgetInfo.config.from.newPassword.input.maxlength,message:"\u957F\u5EA6\u5728 "+(this.widgetInfo.config.from.newPassword.input.minlength?this.widgetInfo.config.from.newPassword.input.minlength:0)+" \u5230 "+(this.widgetInfo.config.from.newPassword.input.maxlength?this.widgetInfo.config.from.newPassword.input.maxlength:0)+" \u4E2A\u5B57\u7B26",trigger:"blur"}],confirmPassword:[{required:!0,validator:r,trigger:"blur"},{min:this.widgetInfo.config.from.confirmPassword.input.minlength,max:this.widgetInfo.config.from.confirmPassword.input.maxlength,message:"\u957F\u5EA6\u5728 "+(this.widgetInfo.config.from.confirmPassword.input.minlength?this.widgetInfo.config.from.confirmPassword.input.minlength:0)+" \u5230 "+(this.widgetInfo.config.from.confirmPassword.input.maxlength?this.widgetInfo.config.from.confirmPassword.input.maxlength:0)+" \u4E2A\u5B57\u7B26",trigger:"blur"}]},subPasswordRuleStatement:""}},computed:{height:function(){let s=this.widgetInfo.attr.hh-this.widgetInfo.config.dialog.title.h;return this.widgetInfo.config.button.height&&this.widgetInfo.config.button.height!=""&&(s=s-this.widgetInfo.config.button.height),s}},mounted(){this.storeUser=JSON.parse(this.mUtils.getStoreUserInfo()),this.userInfo=JSON.parse(JSON.stringify(this.storeUser)),_config_config__WEBPACK_IMPORTED_MODULE_5__.Z.baseConfig.isPlatform&&(this.getPlatInfo(),this.storeUser.user_id&&this.storeUser.user_id!=""&&(this.userInfo.userId=this.storeUser.user_id),this.storeUser.user_name&&this.storeUser.user_name!=""&&(this.userInfo.userCode=this.storeUser.user_name),this.storeUser.user_nickname&&this.storeUser.user_nickname!=""&&(this.userInfo.userName=decodeURIComponent(this.storeUser.user_nickname)),this.needModifyPassword&&(this.subPasswordRuleStatement=this.needModifyPassword.subPasswordRuleStatement))},watch:{dialogVisible(){this.subPasswordRuleStatement=this.needModifyPassword&&this.needModifyPassword.subPasswordRuleStatement?this.needModifyPassword.subPasswordRuleStatement:"",this.$refs.passwordForm.resetFields()}},methods:{onBlur(){this.passwordForm.newPassword&&this.passwordForm.newPassword!=null&&this.passwordForm.confirmPassword&&this.passwordForm.confirmPassword!=null&&this.passwordForm.newPassword!=this.passwordForm.confirmPassword&&element_ui__WEBPACK_IMPORTED_MODULE_6__.Message.warning({message:"\u4E24\u6B21\u8F93\u5165\u7684\u65B0\u5BC6\u7801\u4E0D\u4E00\u81F4",offset:60})},checkPlatformRule(s,r){if(this.needModifyPassword&&this.needModifyPassword.subPasswordRule)try{if(this.platformReg=this.platformReg||new RegExp(this.needModifyPassword.subPasswordRule.substring(1,this.needModifyPassword.subPasswordRule.length-2)),!this.platformReg.test(r))return this.needModifyPassword.subPasswordRuleStatement||"\u4E0D\u7B26\u5408\u5BC6\u7801\u6821\u9A8C\u89C4\u5219(\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458\u8FDB\u884C\u8BBE\u7F6E)"}catch{return"\u5BC6\u7801\u5F3A\u5EA6\u89C4\u5219\u89E3\u6790\u5931\u8D25,\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458"}return""},submit(s){this.checkPastPwd(()=>{let r=this;this.$confirm("\u4FEE\u6539\u7528\u6237[ "+r.userInfo.userName+" ]\u7684\u5BC6\u7801\uFF0C\u662F\u5426\u7EE7\u7EED \uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",customClass:"deleteBoardC"}).then(()=>{let i=this.getFormData();r.fullloading=!0,_api_sys_userService__WEBPACK_IMPORTED_MODULE_2__.W.setPassWord(i).then(d=>{r.fullloading=!1,d&&d.status==200?(element_ui__WEBPACK_IMPORTED_MODULE_6__.Message.success({message:"\u5BC6\u7801\u4FEE\u6539\u6210\u529F\uFF0C\u4E0B\u6B21\u767B\u5F55\uFF0C\u8BF7\u4F7F\u7528\u65B0\u5BC6\u7801",offset:60}),s()):element_ui__WEBPACK_IMPORTED_MODULE_6__.Message.error({message:d.msg,offset:60})})}).catch(()=>{r.fullloading=!1,element_ui__WEBPACK_IMPORTED_MODULE_6__.Message.info({message:"\u5DF2\u53D6\u6D88\u4FEE\u6539",offset:60})})})},getFormData(){return _config_config__WEBPACK_IMPORTED_MODULE_5__.Z.baseConfig.isPlatform?{username:this.userInfo.userCode,password:this.encryptString(this.passwordForm.newPassword),pastPwd:this.encryptString(this.passwordForm.currentPassword),modulus:this.platInfo.modulus,exponent:this.platInfo.exponent,pass:this.platInfo.pass}:{userId:this.userInfo.userId,newPassWord:this.passwordForm.newPassword,oldPassWord:this.passwordForm.currentPassword}},checkPastPwd(s){let r={userId:this.userInfo.userId,userCode:this.userInfo.userCode,currentPassword:this.passwordForm.currentPassword};this.checkPasswordRule(this.passwordForm.newPassword)==!0&&_api_sys_userService__WEBPACK_IMPORTED_MODULE_2__.W.checkPastPwd(r).then(i=>{i&&i.status==200?i.data?s():element_ui__WEBPACK_IMPORTED_MODULE_6__.Message.error({message:"\u65E7\u5BC6\u7801\u4E0D\u6B63\u786E",offset:60}):element_ui__WEBPACK_IMPORTED_MODULE_6__.Message.error({message:i.msg,offset:60})})},checkPasswordRule(password){if(_config_config__WEBPACK_IMPORTED_MODULE_5__.Z.baseConfig.isPlatform==!0&&this.needModifyPassword){if(!this.needModifyPassword.subPasswordRule||this.needModifyPassword.subPasswordRule=="")return this.subPasswordRuleStatement="\u5BC6\u7801\u5F3A\u5EA6\u6821\u9A8C\u6B63\u5219\u8868\u8FBE\u5F0F\u4E3A\u7A7A",!1;try{let reg=eval(this.needModifyPassword.subPasswordRule);if(reg.test(password)==!1)return this.subPasswordRuleStatement="\u5BC6\u7801\u5F3A\u5EA6\u6821\u9A8C\u5931\u8D25\uFF1A"+this.needModifyPassword.subPasswordRuleStatement,!1}catch(s){return this.subPasswordRuleStatement="\u5BC6\u7801\u5F3A\u5EA6\u6821\u9A8C\u6B63\u5219\u8868\u8FBE\u5F0F\u8F6C\u4E49\u5931\u8D25",!1}}return!0},getPlatInfo(){_api_thirdparty_platformService__WEBPACK_IMPORTED_MODULE_1__.d.getPlatInfoExplorer().then(s=>{s&&s.status==200?this.platInfo=s.data:element_ui__WEBPACK_IMPORTED_MODULE_6__.Message.error({message:s.msg,offset:60})})},encryptString(s){(0,_utils_platfrom_BigInt_js__WEBPACK_IMPORTED_MODULE_3__.rJ)(129);let r=new _utils_platfrom_RSA_js__WEBPACK_IMPORTED_MODULE_4__.z(this.platInfo.exponent,"",this.platInfo.modulus);return(0,_utils_platfrom_RSA_js__WEBPACK_IMPORTED_MODULE_4__.d)(r,s)}}}},56279:function(s,r,i){i.d(r,{P:function(){return l}});var d=i(86892),n=i(49500);const l={mixins:[d.D],created(){},methods:{lifecycleBeforeChartsLoad(c){if(this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.beforeChartsLoad&&this.widgetInfo.action.lifecycle.beforeChartsLoad.enabled){(!this.widgetInfo.action.lifecycle.beforeChartsLoad.script||!this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content||this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content=="")&&n.warn("\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C\u4E3A\u7A7A"),n.info("\u6267\u884C\u5E38\u89C4\u56FE\u8868["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u524D\u7684\u811A\u672C");let h=new Function("option",this.widgetInfo.action.lifecycle.beforeChartsLoad.script.content).apply(this,[c]);if(h)return h}return c},lifecycleAfterLoad(){this.widgetInfo.action&&this.widgetInfo.action.lifecycle&&this.widgetInfo.action.lifecycle.afterLoad&&this.widgetInfo.action.lifecycle.afterLoad.enabled&&((!this.widgetInfo.action.lifecycle.afterLoad.script||!this.widgetInfo.action.lifecycle.afterLoad.script.content||this.widgetInfo.action.lifecycle.afterLoad.script.content=="")&&n.warn("\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C\u4E3A\u7A7A"),n.info("\u6267\u884C\u7EC4\u4EF6["+this.widgetInfo.name+"]\u52A0\u8F7D\u4E4B\u540E\u7684\u811A\u672C"),new Function("",this.widgetInfo.action.lifecycle.afterLoad.script.content).apply(this,[]))}}}},24334:function(s,r,i){i.r(r),i.d(r,{default:function(){return k}});var d=function(){var e=this,t=e._self._c;return t("div",{ref:"dialog",style:{width:e.widgetInfo.attr.w+"px",height:e.widgetInfo.attr.hh+"px",overflowY:"hidden"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.attr.hide!=!0,expression:"widgetInfo.attr.hide != true"}]},[t("div",{style:e.getTitleStyle(e.widgetInfo.config.dialog),attrs:{slot:"title"},slot:"title"},[t("div",{style:{paddingLeft:e.widgetInfo.config.dialog.title.label.left+"px",paddingTop:e.widgetInfo.config.dialog.title.label.top+"px"}},[t("span",{style:e.getTitleSpanStyle(e.widgetInfo.config.dialog)},[e._v(" "+e._s(e.widgetInfo.config.dialog.title.text)+" ")])]),t("button",{directives:[{name:"show",rawName:"v-show",value:e.widgetInfo.config.dialog.showClose,expression:"widgetInfo.config.dialog.showClose"}],ref:"myButton",staticClass:"el-dialog__header_botton",attrs:{type:"button","aria-label":"Close"}},[t("i",{staticClass:"el-dialog__close el-icon el-icon-close"})])]),t("modify-password-form",{attrs:{"widget-info":e.widgetInfo,needModifyPassword:e.needModifyPassword}}),t("div",{style:e.styleButtonDiv(e.widgetInfo.config.button)},[e.widgetInfo.config.button.cancel.enable?t("el-button",{style:e.styleButton(e.widgetInfo.config.button.cancel),attrs:{size:"mini"},on:{click:e.cancel}},[e._v(" "+e._s(e.widgetInfo.config.button.cancel.text)+" ")]):e._e(),t("el-button",{style:e.styleButton(e.widgetInfo.config.button.confirm),attrs:{size:"mini",type:"primary"},on:{click:e.confirm}},[e._v(" "+e._s(e.widgetInfo.config.button.confirm.text)+" ")])],1)],1),t("el-dialog",{ref:"myDialog",staticClass:"my-dialog",attrs:{"close-on-click-modal":!1,width:e.widgetInfo.attr.w+"px",modal:e.widgetInfo.config.dialog.modal,fullscreen:e.widgetInfo.config.dialog.fullscreen,showClose:e.widgetInfo.config.dialog.showClose,top:e.widgetInfo.config.dialog.top+"px","before-close":e.handleClose,visible:e.dialogVisible,"append-to-body":""},on:{opened:e.opened,"update:visible":function(a){e.dialogVisible=a}}},[t("div",{style:e.getDialogStyle(e.widgetInfo)},[t("div",{staticStyle:{overflow:"hidden",width:"100%"},style:e.getTitleStyle(e.widgetInfo.config.dialog),attrs:{slot:"title"},slot:"title"},[t("div",{style:{marginLeft:e.widgetInfo.config.dialog.title.label.left+"px",marginTop:e.widgetInfo.config.dialog.title.label.top+"px"}},[t("span",{style:e.getTitleSpanStyle(e.widgetInfo.config.dialog)},[e._v(" "+e._s(e.widgetInfo.config.dialog.title.text)+" ")])])]),t("modify-password-form",{ref:"passwordInfoForm",attrs:{dialogVisible:e.dialogVisible,needModifyPassword:e.needModifyPassword,"widget-info":e.widgetInfo}}),t("div",{style:e.styleButtonDiv(e.widgetInfo.config.button),attrs:{slot:"footer"},slot:"footer"},[e.widgetInfo.config.button.cancel.enable?t("el-button",{style:e.styleButton(e.widgetInfo.config.button.cancel),attrs:{size:"mini"},on:{click:e.cancel}},[e._v(" "+e._s(e.widgetInfo.config.button.cancel.text)+" ")]):e._e(),t("el-button",{style:e.styleButton(e.widgetInfo.config.button.confirm),attrs:{size:"mini",type:"primary"},on:{click:e.confirm}},[e._v(" "+e._s(e.widgetInfo.config.button.confirm.text)+" ")])],1)],1)])],1)},n=[],l=i(27966),c=i(39202),p=i(23400),h=i(26711),M=i(42160),x=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullloading,expression:"fullloading",modifiers:{fullscreen:!0,lock:!0}}],style:{width:e.widgetInfo.attr.w+"px",height:e.height+"px",backgroundColor:e.widgetInfo.config.from.background.backgroundColor,backgroundImage:this.getImageUrl(e.widgetInfo.config.from.background.backgroundImage),backgroundSize:e.widgetInfo.config.from.background.backgroundSize}},[e.needModifyPassword&&(e.needModifyPassword.subNeedModifyPassword==!0||e.needModifyPassword.initPasswordModifyFlag===!1)?t("div",{staticStyle:{height:"30px","line-height":"30px",color:"#f0aa5e","background-color":"#fdf6ec","text-align":"center"}},[t("i",{staticClass:"el-icon-warning",staticStyle:{"margin-left":"10px"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.needModifyPassword.initPasswordModifyFlag===!1?e.needModifyPassword.initPasswordModifyCause:e.subPasswordRuleStatement))])]):e._e(),t("el-form",{ref:"passwordForm",style:{paddingLeft:e.widgetInfo.config.from.left+"px",paddingTop:e.widgetInfo.config.from.top+"px"},attrs:{model:e.passwordForm,rules:e.rules,"label-width":e.widgetInfo.config.from.labelWidth+"px","label-position":e.widgetInfo.config.from.labelPosition,size:e.widgetInfo.config.from.size}},[t("el-form-item",{attrs:{label:e.widgetInfo.config.from.currentPassword.label.label,prop:"currentPassword"}},[t("el-input",{style:{width:e.widgetInfo.config.from.currentPassword.input.width+"px"},attrs:{"show-password":"",maxlength:e.widgetInfo.config.from.currentPassword.input.maxlength?e.widgetInfo.config.from.currentPassword.input.maxlength:null,minlength:e.widgetInfo.config.from.currentPassword.input.minlength?e.widgetInfo.config.from.currentPassword.input.minlength:null,placeholder:e.widgetInfo.config.from.currentPassword.input.placeholder,clearable:e.widgetInfo.config.from.currentPassword.input.clearable,disabled:e.widgetInfo.config.from.currentPassword.input.disabled,readonly:e.widgetInfo.config.from.currentPassword.input.readonly},model:{value:e.passwordForm.currentPassword,callback:function(a){e.$set(e.passwordForm,"currentPassword",a)},expression:"passwordForm.currentPassword"}})],1),t("el-form-item",{attrs:{label:e.widgetInfo.config.from.newPassword.label.label,prop:"newPassword"}},[t("el-input",{style:{width:e.widgetInfo.config.from.newPassword.input.width+"px"},attrs:{"show-password":"",maxlength:e.widgetInfo.config.from.newPassword.input.maxlength?e.widgetInfo.config.from.newPassword.input.maxlength:null,minlength:e.widgetInfo.config.from.newPassword.input.minlength?e.widgetInfo.config.from.newPassword.input.minlength:null,placeholder:e.widgetInfo.config.from.newPassword.input.placeholder,clearable:e.widgetInfo.config.from.newPassword.input.clearable,disabled:e.widgetInfo.config.from.newPassword.input.disabled,readonly:e.widgetInfo.config.from.newPassword.input.readonly},on:{blur:e.onBlur},model:{value:e.passwordForm.newPassword,callback:function(a){e.$set(e.passwordForm,"newPassword",a)},expression:"passwordForm.newPassword"}})],1),t("el-form-item",{attrs:{label:e.widgetInfo.config.from.confirmPassword.label.label,prop:"confirmPassword"}},[t("el-input",{style:{width:e.widgetInfo.config.from.confirmPassword.input.width+"px"},attrs:{"show-password":"",maxlength:e.widgetInfo.config.from.confirmPassword.input.maxlength?e.widgetInfo.config.from.confirmPassword.input.maxlength:null,minlength:e.widgetInfo.config.from.confirmPassword.input.minlength?e.widgetInfo.config.from.confirmPassword.input.minlength:null,placeholder:e.widgetInfo.config.from.confirmPassword.input.placeholder,clearable:e.widgetInfo.config.from.confirmPassword.input.clearable,disabled:e.widgetInfo.config.from.confirmPassword.input.disabled,readonly:e.widgetInfo.config.from.confirmPassword.input.readonly},on:{blur:e.onBlur},model:{value:e.passwordForm.confirmPassword,callback:function(a){e.$set(e.passwordForm,"confirmPassword",a)},expression:"passwordForm.confirmPassword"}})],1)],1)],1)},C=[],v=i(19357),R=v.Z,P=i(68141),E=(0,P.Z)(R,x,C,!1,null,"43ea61e8",null),S=E.exports,b=i(31954),y=i(21300),I=i(55616),D=i(67157);const T={mixins:[D.c],data(){return{config_extend:{config:{dialog:{title:{label:{left:17,color:"#303133",fontFamily:"alibabaPuHuiTiMedium"}},buttonClose:{custom:!0,right:10,top:14,fontSize:16,color:"#C0C4CC"}},from:{left:10},button:{confirm:{width:60,height:30,fontStyle:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14,color:"#fff"}},cancel:{width:60,height:30,fontStyle:{fontFamily:"alibabaPuHuiTiRegular",fontSize:14,color:"#616266"}}}}},filter_config:{dialog:{title:{backgroundColor:"#ffffff",border:{colorB:"rgba(189, 195, 199, 1)"},label:{color:"#303133",fontFamily:"alibabaPuHuiTiMedium",startColor:"rgba(30, 144, 255, 1)",endColor:"rgba(255, 0, 0, 1)"}},buttonClose:{color:"#C0C4CC"}},from:{background:{backgroundColor:"#ffffff"}},button:{border:{colorT:"#DBDFE6"},background:{backgroundColor:"#ffffff"},confirm:{fontStyle:{fontFamily:"alibabaPuHuiTiRegular",color:"#fff"}},cancel:{fontStyle:{fontFamily:"alibabaPuHuiTiRegular",color:"#616266"}}}}}},methods:{filterPredefineColoursSchemeConfig(o,e){this.getNewConfigWithArrary(o,e,this.filter_config)}}};var L=i(56279),B=i(49500),O={name:"modify-password",components:{ModifyPasswordForm:S},props:["widgetInfo","currentWidget"],mixins:[c.u,p.j,h.H,T,L.P],data(){return{dialogVisible:!1,actionList:{},needModifyPassword:{subNeedModifyPassword:null,subPasswordRule:null,subPasswordRuleStatement:null,initPasswordModifyFlag:!0,initPasswordModifyCause:null}}},watch:{"currentWidget.id":{deep:!0,handler:function(){this.currentWidget.id==this.widgetInfo.id?this.widgetInfo.attr.hide=!1:this.widgetInfo.attr.hide=!0}}},mounted(){this.widgetInfo.attr.hide=!0,this.initAction(this.widgetInfo),this.loadInfo(this.widgetInfo),this.checkNeedModifyPassword()},methods:{loadInfo(o){let e=this.$refs.myButton;this.setButtonStyle(o,e),this.currentWidget.id==o.id&&(this.widgetInfo.attr.hide=!1),this.lifecycleAfterLoad()},reLoadInfo(o){this.loadInfo(o)},initAction(o){this.actionReceive(o)},actionReceive(o){let e=o.action.receive.dialogVisible;e&&e.enabled&&e.dialogVisibleList&&e.dialogVisibleList.length>0&&this.doDialogVisible(e.dialogVisibleList,e.value,e.script,o.name)},getDialogStyle(o){let e={opacity:o.attr.opacity,backgroundColor:o.attr.backgroundColor,backgroundImage:this.getImageUrl(o.attr.backgroundImage),backgroundSize:o.attr.backgroundSize};return o.border.hide!=!0&&((o.border.hShadow||o.border.vShadow)&&(e.boxShadow=(o.border.hShadow||0)+"px "+(o.border.vShadow||0)+"px "+(o.border.blur||0)+"px "+o.border.blurColor||"rgba(0,0,0,0)"),o.border.type==!1?(e.borderTopWidth=o.border.widthT+"px",e.borderRightWidth=o.border.widthR+"px",e.borderBottomWidth=o.border.widthB+"px",e.borderLeftWidth=o.border.widthL+"px",e.borderTopStyle=o.border.styleT,e.borderRightStyle=o.border.styleR,e.borderBottomStyle=o.border.styleB,e.borderLeftStyle=o.border.styleL,e.borderTopColor=o.border.colorT,e.borderRightColor=o.border.colorR,e.borderBottomColor=o.border.colorB,e.borderLeftColor=o.border.colorL,e.borderTopLeftRadius=o.border.radiusTL+"px",e.borderTopRightRadius=o.border.radiusTR+"px",e.borderBottomLeftRadius=o.border.radiusBL+"px",e.borderBottomRightRadius=o.border.radiusBR+"px",e.overflow="hidden"):o.border.type==!0&&(e.borderStyle=o.border.borderStyle,e.borderTopWidth=o.border.breadthT+"px",e.borderRightWidth=o.border.breadthR+"px",e.borderBottomWidth=o.border.breadthB+"px",e.borderLeftWidth=o.border.breadthL+"px",e.borderImageSource=this.getImageUrl(o.border.borderImage),e.borderImageSlice=o.border.cutT+" "+o.border.cutR+" "+o.border.cutB+" "+o.border.cutL,e.borderImageRepeat=o.border.repeat)),e},opened(){let e=this.$refs.myDialog.$el.querySelector(".el-dialog__headerbtn");this.setButtonStyle(this.widgetInfo,e)},setButtonStyle(o,e){e&&(e.style.position="absolute",e.style.border="none",e.style.fontFamily="normal",e.style.backgroundColor="transparent",e.style.lineHeight="normal",o.config.dialog&&o.config.dialog.buttonClose&&o.config.dialog.buttonClose.custom?(e.style.top=o.config.dialog.buttonClose.top+"px",e.style.right=o.config.dialog.buttonClose.right+"px",e.style.fontSize=o.config.dialog.buttonClose.fontSize+"px",e.style.zIndex=999,e.childNodes&&e.childNodes.length>0&&(e.childNodes[0].style.color=o.config.dialog.buttonClose.color,e.childNodes[0].style.verticalAlign="top",o.config.dialog.buttonClose.fontWeight?e.childNodes[0].style.fontWeight="bolder":e.childNodes[0].style.fontWeight="normal")):(e.style.top="10px",e.style.right="20px",e.style.fontSize="16px",e.style.padding="0",e.style.background="transparent",e.style.outline="0",e.style.cursor="pointer",e.childNodes&&e.childNodes.length>0&&(e.childNodes[0].style.color="#909399",e.childNodes[0].style.fontWeight="normal")))},cancel(){this.handleClose()&&(this.dialogVisible=!1)},confirm(){this.$refs.passwordInfoForm.$refs.passwordForm.validate(o=>{o?this.$refs.passwordInfoForm.submit(()=>{this.needModifyPassword?(this.needModifyPassword.subNeedModifyPassword=!1,this.needModifyPassword.initPasswordModifyFlag=!0,this.needModifyPassword.initPasswordModifyCause=null):this.needModifyPassword={subNeedModifyPassword:!1,initPasswordModifyFlag:!0,initPasswordModifyCause:null},y.setAppStore("needModifyPassword",this.needModifyPassword),this.dialogVisible=!1}):I.Message.warning({message:"\u5BC6\u7801\u6821\u9A8C\u672A\u901A\u8FC7\uFF0C\u8BF7\u4FEE\u6539\u5BC6\u7801\u540E\u91CD\u8BD5",offset:60})})},styleButtonDiv(o){let e={textAlign:o.horizontalAlignment,height:o.height+"px",paddingTop:o.top+"px",backgroundColor:o.background.backgroundColor,backgroundImage:this.getImageUrl(o.background.backgroundImage),backgroundSize:o.background.backgroundSize};return o.border.hide!=!0&&(e.borderTopWidth=o.border.widthT+"px",e.borderTopStyle=o.border.styleT,e.borderTopColor=o.border.colorT?o.border.colorT:"transparent",e.borderTopLeftRadius=o.border.radiusTL+"px",e.borderTopRightRadius=o.border.radiusTR+"px"),e},styleButton(o){return{width:o.width+"px",height:o.height+"px",marginLeft:o.left+"px",marginRight:o.right+"px",fontSize:o.fontStyle.fontSize+"px",color:o.fontStyle.color,fontWeight:o.fontStyle.fontWeight,fontFamily:o.fontStyle.fontFamily,fontStyle:o.fontStyle.fontStyle}},doDialogVisible(o,e,t,a){let u=this;this.$$lib__.each(o,f=>{let g=f[0][1]+"_"+f[0][0];f[0][1].indexOf("_")>-1&&(g=f[0][1]),l.Z.$on(g,m=>{M.default.set(u.actionList,g,m);let w=f[0][2];if(w){let _=w.indexOf("|");_>-1&&(w=f[0][2].substring(_+1))}if(t&&t.enabled){if(B.log("Execute script for "+a+" component to dialogVisible component"),t.content==""){I.Message.warning({message:"\u81EA\u5B9A\u4E49\u811A\u672C\u5DF2\u542F\u7528\uFF0C\u4F46\u672A\u7F16\u5199\u4EFB\u4F55\u811A\u672C",offset:60});return}new Function("data","param_key","value",t.content).apply(this,[m,w,e])}else(e==null||e==""||e==null||e==m[w])&&(u.dialogVisible=!0)})})},doReceiveTitle(o){let e=this;this.$$lib__.each(o,t=>{let a=t[0][1]+"_"+t[0][0];t[0][1].indexOf("_")>-1&&(a=t[0][1]),l.Z.$on(a,u=>{let f=t[0][2],g=f.indexOf("|");g>-1&&(f=t[0][2].substring(g+1)),e.widgetInfo.config.dialog.title.text=u[f]})})},checkNeedModifyPassword(){window.location.href.indexOf("view.html")>0==!0&&b.Z.baseConfig.isPlatform==!0&&(this.needModifyPassword=y.getAppStore("needModifyPassword"),this.needModifyPassword&&(this.needModifyPassword.subNeedModifyPassword==!0||this.needModifyPassword.initPasswordModifyFlag===!1)&&(this.dialogVisible=!0))},handleClose(o){return this.widgetInfo.config.button.needModifyPassword==!0&&b.Z.baseConfig.isPlatform==!0&&this.needModifyPassword&&this.needModifyPassword.subNeedModifyPassword==!0||this.needModifyPassword&&this.needModifyPassword.initPasswordModifyFlag===!1?!1:(typeof o=="function"&&o(),!0)}}},F=O,W=(0,P.Z)(F,d,n,!1,null,"75fe6420",null),k=W.exports}}]);
