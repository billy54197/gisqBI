"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[16362],{999860:function(c,u,a){var d=a(808041),r=a(321300);u.Z={name:"font-select",props:["value"],data(){return{selectedValue:this.value,fontList:[]}},watch:{value(){this.selectedValue=this.value}},mounted(){this.initData()},methods:{initData(){let s={pageName:1,pageSize:9999999,fontFile:JSON.stringify({fontName:""})};d.N.getListByPage(s).then(e=>{if(e&&e.status==200){let o={label:"\u81EA\u5B9A\u4E49",options:[]};if(e.data.list){let l=[];for(let n=0;n<e.data.list.length;n++){let i=e.data.list[n];i.label=i.fontFamily,i.value=i.fontId,i.resId=i.fontId,l.push(i)}this.setFonts(l),o.options=l}this.fontList.push(o);let t={label:"\u7CFB\u7EDF\u5185\u7F6E",options:[]},_=this.$$global_editor.fontFamily;for(let l=0;l<_.length;l++){let n={};n.fontId="",n.fontFamily=_[l].label,n.fontName=_[l].value,n.createdByName="\u7CFB\u7EDF\u5185\u7F6E",n.label=_[l].label,n.value=_[l].value,t.options.push(n)}this.fontList.push(t)}})},change(){this.$emit("input",this.selectedValue),this.$emit("change",this.selectedValue)},setFonts(s){if(s&&s.length>0){s=s.filter((o,t)=>{let _=[];return s.forEach(l=>_.push(l.resId)),_.indexOf(o.resId)==t});let e="";s.forEach(o=>{let t=o.resId;if(t){let _=t.split("-")[1],l=`./resource/font/${t}.${_}`;e+=`@font-face {font-family: "${t}"; src: url('${l}') format('${_}')}`}}),r.appendCss("font-style",e)}}}}},353422:function(c,u,a){a.d(u,{s:function(){return d},x:function(){return r}});var d=function(){var e=this,o=e._self._c;return o("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9"},on:{change:e.change},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},e._l(e.fontList,function(t){return o("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(_){return o("el-option",{key:_.value,style:{fontFamily:_.value},attrs:{label:_.label,value:_.value}})}),1)}),1)},r=[]},916362:function(c,u,a){a.r(u);var d=a(353422),r=a(278528),s=a(768141),e=(0,s.Z)(r.Z,d.s,d.x,!1,null,"449172f0",null);u.default=e.exports},278528:function(c,u,a){var d=a(999860);u.Z=d.Z}}]);
