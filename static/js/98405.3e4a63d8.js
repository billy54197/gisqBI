"use strict";(self.webpackChunkdatavisual=self.webpackChunkdatavisual||[]).push([[98405],{752246:function(b,g,l){l.d(g,{X:function(){return a},b:function(){return p}});let a={versions:function(){var r=navigator.userAgent;return{trident:r.indexOf("Trident")>-1,presto:r.indexOf("Presto")>-1,webKit:r.indexOf("AppleWebKit")>-1,gecko:r.indexOf("Gecko")>-1&&r.indexOf("KHTML")==-1,mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:r.indexOf("Android")>-1,iPhone:r.indexOf("iPhone")>-1,iPad:r.indexOf("iPad")>-1,webApp:r.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},p;a.versions.mobile||a.versions.ios||a.versions.android||a.versions.iPhone||a.versions.iPad?p=!1:p=!0},844513:function(b,g,l){l.d(g,{Z:function(){return y}});var a=function(){var i=this,c=i._self._c;return i.attr.buttonHide?c("div",{style:{position:"absolute",right:i.attr.buttonHideRight+"px",top:i.attr.buttonHideTop+"px",width:"30px",height:"25px",cursor:"pointer",zIndex:"9999"},on:{click:function(I){return i.onHide()}}},[i.openTooltip?c("el-tooltip",{attrs:{"open-delay":1e3,content:i.attr.buttonHideTooltipContent,effect:"dark",placement:"top"}},[c("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):c("el-button",{class:i.attr.buttonHideIconClass&&i.attr.buttonHideIconClass!=""?i.attr.buttonHideIconClass:"iconfont bi_eyeslash",staticStyle:{"margin-left":"6px",padding:"3px 0",width:"15px",height:"15px"},style:{color:i.attr.buttonHideColor,fontSize:i.attr.buttonHideIconFontSize+"px"},attrs:{size:"small",type:"text"}})],1):i._e()},p=[],r=l(752246),S={props:["attr"],name:"hide-button",data(){return{isPc:r.b}},computed:{openTooltip:function(){let h=!1,i=this.attr.buttonHideTooltipContent;return r.b&&i&&i!=null&&i.trim()!=""&&(h=!0),h}},methods:{onHide(){this.attr.hide=!0,this.$emit("sendButtonHide")}}},u=S,x=l(768141),v=(0,x.Z)(u,a,p,!1,null,"bf399b9a",null),y=v.exports},598405:function(b,g,l){l.r(g),l.d(g,{default:function(){return k}});var a=function(){var t=this,o=t._self._c;return o("div",{ref:"textShow",style:{width:t.widgetInfo.attr.w+"px",height:t.widgetInfo.attr.hh+"px",overflow:"hidden"}},[o("hide-button",{attrs:{attr:t.widgetInfo.attr}}),o("div",{directives:[{name:"popover",rawName:"v-popover:textPopup",arg:"textPopup"}],style:{width:t.widgetInfo.attr.w-t.mUtils.getNewPxW(t.widgetInfo.config.text.margin.left,t.lockX)+"px",height:t.widgetInfo.attr.hh-t.mUtils.getNewPxH(t.widgetInfo.config.text.margin.top,t.lockY)+"px",paddingLeft:t.mUtils.getNewPxW(t.widgetInfo.config.text.margin.left,t.lockX)+"px",paddingTop:t.paddingT+"px",fontSize:t.mUtils.getNewFontSize(t.widgetInfo.config.text.label.fontSize,t.lockX,t.lockY)+"px",color:t.widgetInfo.config.text.label.color,fontWeight:t.widgetInfo.config.text.label.fontWeight,fontFamily:t.widgetInfo.config.text.label.fontFamily,fontStyle:t.widgetInfo.config.text.label.fontStyle,textDecoration:t.widgetInfo.config.text.label.textDecoration,textAlign:t.widgetInfo.config.text.label.horizontalAlignment,lineHeight:t.lineH+"px",overflow:t.widgetInfo.config.text.label.overflow==!0?"auto":"hidden"},on:{mouseover:function(n){return t.mouseover("widget")},mouseleave:function(n){return t.mouseleave("widget")}}},[o("span",{style:this.getSpanStyle(t.widgetInfo)},[t._v(" "+t._s(t.textInfo)+" ")])]),t.widgetInfo.config.popover?o("div",[t.widgetInfo.config.popover.showWidget?o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:t.widgetInfo.config.popover.widgetStyle.show,expression:"widgetInfo.config.popover.widgetStyle.show"}],ref:"textShowPopup",attrs:{id:"textShow-popup"},on:{mouseover:function(n){return t.mouseover("popWidget")},mouseleave:function(n){return t.mouseleave("popWidget")}}},[o("div",{staticClass:"popper-arrow"})])]):o("el-popover",{ref:"textPopup",attrs:{"popper-class":"text-popover",transition:"fade-in-linear",width:t.widgetInfo.config.popover.width,trigger:t.widgetInfo.config.popover.trigger,placement:t.widgetInfo.config.popover.placement,disabled:t.widgetInfo.config.popover.disabled,offset:t.widgetInfo.config.popover.offset,"visible-arrow":t.widgetInfo.config.popover.arrow}},[o("div",{style:t.popoerStyle(t.widgetInfo.config),domProps:{innerHTML:t._s(t.content)}})])],1):t._e()],1)},p=[],r=l(844513),S=l(927966),u=l(557761),x=l(148836),v=l(67157);const y={mixins:[v.c],data(){return{config_extend:{config:{text:{margin:{top:0,left:0},number:{fontSize:18,fontFamily:"alibabaPuHuiTiMedium"}}}},filter_config:{text:{label:{color:"",startColor:"",endColor:""}},popover:{backgroundColor:"",fontStyle:{color:""},widgetStyle:{shadowColor:"",left:0,top:0}}}}},methods:{filterPredefineColoursSchemeConfig(e,t){this.getNewConfig(e,t,this.filter_config)}}};var h=l(149500),i={props:["widgetInfo","currentWidget"],name:"title-show",components:{HideButton:r.Z},mixins:[u.baseConfig,y],computed:{...(0,x.Se)(["getCanvasSettingInfo","getCanvasSetting"]),lockX(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedW},lockY(){return this.getCanvasSetting.transformType==this.$$global_editor.transformType.autoBoth.code&&this.widgetInfo.attr.lockedH}},data(){return{paddingT:0,lineH:0,textInfo:"",content:"",widgetStatus:"leave",popWidgetStatus:"leave"}},mounted(){this.loadInfo(this.widgetInfo),h.log(this.widgetInfo)},watch:{"widgetInfo.attr.hide":function(){this.$emit("attrChange",this.widgetInfo)}},methods:{computeFontSize(e,t,o){let n=document.createElement("span");n.style.fontSize=t,n.style.opacity="0",n.style.fontFamily=o,n.innerHTML=e,document.body.append(n);let f={};return f.width=n.offsetWidth,f.height=n.offsetHeight,n.remove(),f},loadInfo(e){h.info("----------");let t=this.computeFontSize("\u4F60\u597D",e.config.text.label.fontSize+"px",e.config.text.label.fontFamily);if(e.config.text.label.singleLine)switch(e.config.text.label.verticalAlignment){case"top":this.lineH=t.height,this.paddingT=this.mUtils.getNewPxH(e.config.text.margin.top,this.lockY);break;case"middle":this.lineH=e.attr.hh-this.mUtils.getNewPxH(e.config.text.margin.top,this.lockY),this.paddingT=this.mUtils.getNewPxH(e.config.text.margin.top,this.lockY);break;case"bottom":this.lineH=t.height,this.paddingT=e.attr.hh-t.height;break}else this.lineH=t.height,this.paddingT=this.mUtils.getNewPxH(e.config.text.margin.top,this.lockY);e.dataset[e.dataset.type]&&e.dataset[e.dataset.type].dimensions&&e.dataset[e.dataset.type].dimensions.length>0?this.textInfo=e.dataset[e.dataset.type].source[0]:this.textInfo=e.dataset[e.dataset.type].encode.text,this.content=e.config.popover.content==""?this.textInfo:e.config.popover.content;let o=document.getElementById("myBoardArea"),n=this.$refs.textShow.querySelector(".popper-arrow"),f=(e.config.popover.widgetStyle.shadowOffsetX||0)+"px "+(e.config.popover.widgetStyle.shadowOffsetY||0)+"px "+(e.config.popover.widgetStyle.shadowBlur||0)+"px "+e.config.popover.widgetStyle.shadowColor||"rgba(0,0,0,0)";if(f+=e.config.popover.widgetStyle.inset?" inset":"",e.config.popover.showWidget&&!o&&e.config.popover.widgetStyle.bindWidgetId){let w=this.$refs.textShowPopup,s=document.querySelector("#widget_"+e.config.popover.widgetStyle.bindWidgetId);w.style.right=this.mUtils.getNewPxW(e.config.popover.widgetStyle.right)+"px",w.style.bottom=this.mUtils.getNewPxH(e.config.popover.widgetStyle.bottom+e.attr.h)+"px",w.style.boxShadow=f;let C=!1;if(this.$$lib__.each(document.querySelector("body").childNodes,d=>{d.id=="textShow-popup"&&(C=this.$$lib__.contains(d.childNodes,"#widget_"+e.config.popover.widgetStyle.bindWidgetId))}),s&&!C){w.style.borderRadius=s.style.borderRadius,s.style.position="absolute",e.config.popover.position=="top"?s.style.top="0px":s.style.top="16px",s.style.left="0px",w.appendChild(s);let d=document.querySelector("#textShow-popup");if(d.style.left=e.attr.x+this.mUtils.getNewPxW(e.config.popover.widgetStyle.left)+"px",e.config.popover.position=="top"){let m=this.mUtils.getNewPxH(e.config.popover.widgetStyle.bottom)?this.mUtils.getNewPxH(e.config.popover.widgetStyle.bottom):0;d.style.top=e.attr.y-parseInt(s.style.height)-16-m+"px",n.style.display=e.config.popover.showArrow?"inline-block":"none",n.style.left=e.config.popover.arrowLeft?e.config.popover.arrowLeft+"px":parseInt(s.style.width)*.2+"px",n.style.borderTopColor=s.style.backgroundColor,n.style.bottom="-16px"}else{let m=this.mUtils.getNewPxH(e.config.popover.widgetStyle.top)?this.mUtils.getNewPxH(e.config.popover.widgetStyle.top):0;d.style.top=e.attr.y+e.attr.h+m+"px",n.style.display=e.config.popover.showArrow?"inline-block":"none",n.style.left=e.config.popover.arrowLeft?e.config.popover.arrowLeft+"px":parseInt(s.style.width)*.2+"px",n.style.borderBottomColor=s.style.backgroundColor,n.style.top="0px"}d.style.position="absolute",d.style.width=parseInt(s.style.width)+"px",d.style.height=parseInt(s.style.height)+"px",document.querySelector("#my_bi_screen").appendChild(d)}}else e.config.popover.widgetStyle.show&&!o&&(n.style.display="none")},reLoadInfo(e){e&&(this.$refs.textShow.style.width=e.attr.w+"px",this.$refs.textShow.style.height=e.attr.hh+"px"),this.loadInfo(e)},mouseover(e){if(e=="widget"?this.widgetStatus="over":e=="popWidget"&&(this.popWidgetStatus="over"),this.widgetInfo.config.popover.showWidget){let t=document.querySelector("#widget_"+this.widgetInfo.config.popover.widgetStyle.bindWidgetId);t&&t.parentNode&&(t.parentNode.style.display="block")}},mouseleave(e){e=="widget"?setTimeout(()=>{this.popWidgetStatus=="leave"&&(this.widgetStatus="leave")},500):e=="popWidget"&&(this.widgetStatus="leave",this.popWidgetStatus="leave"),setTimeout(()=>{if(this.widgetInfo.config.popover.showWidget&&this.widgetStatus=="leave"&&this.popWidgetStatus=="leave"){let t=document.querySelector("#widget_"+this.widgetInfo.config.popover.widgetStyle.bindWidgetId);t&&t.parentNode&&(t.parentNode.style.display="none")}},1e3)},popoerStyle(e){let t=document.getElementsByClassName("text-popover");return t.length&&(t[0].style.backgroundColor=e.popover.backgroundColor,t[0].style.borderColor=e.popover.backgroundColor),{fontSize:this.mUtils.getNewFontSize(e.popover.fontStyle.fontSize)+"px",fontFamily:e.popover.fontStyle.fontFamily,color:e.popover.fontStyle.color}},getSpanStyle(e){let t=e.config.text.label,o={};return t.textShadow&&(o.textShadow=t.hShadow+"px "+t.vShadow+"px "+t.textShadowBlur+"px "+t.textShadowColor||"rgba(0,0,0,0)"),t.textStroke&&(o.webkitTextStrokeWidth=t.textStrokeWidth+"px",o.webkitTextStrokeColor=t.textStrokeColor),t.gradient&&(o.backgroundImage="linear-gradient("+t.angle+"deg,"+t.startColor+","+t.endColor+")",o.webkitBackgroundClip="text",o.webkitTextFillColor="transparent"),t.singleLine&&(o.height="100%",o.width="100%",o.display="inline-block",o.whiteSpace="nowrap",t.enabledEllipsis&&(o.textOverflow="ellipsis",o.overflow="hidden")),o}}},c=i,I=l(768141),H=(0,I.Z)(c,a,p,!1,null,"33641ede",null),k=H.exports}}]);
